[{"tags": ["python"], "comments": [{"owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "edited": false, "score": 0, "creation_date": 1496879819, "post_id": 44424522, "comment_id": 75847543, "body": "by <code>x = a - i - 1</code> maybe?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8128416"}, "reply_to_user": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "edited": false, "score": 0, "creation_date": 1496879985, "post_id": 44424522, "comment_id": 75847585, "body": "But then the user input will not print"}, {"owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "edited": false, "score": 0, "creation_date": 1496880284, "post_id": 44424522, "comment_id": 75847666, "body": "You could increase the range by 1 as well."}], "answers": [{"comments": [{"owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 0, "creation_date": 1496879996, "post_id": 44424542, "comment_id": 75847587, "body": "Why the downvote?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1496880076, "post_id": 44424542, "comment_id": 75847613, "body": "Looks perfectly senseable to me +1 :)"}], "tags": [], "owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "is_accepted": false, "score": 0, "last_activity_date": 1496879816, "creation_date": 1496879816, "answer_id": 44424542, "question_id": 44424522, "link": "https://stackoverflow.com/questions/44424522/countdown-to-zero-instead-of-1/44424542#44424542", "title": "Countdown to zero instead of 1?", "body": "<p>Just add 1 to your range.</p>\n\n<p>Your program now looks like:</p>\n\n<pre><code>a = int(input(\"Enter a number: \"))\n\n\nfor i in range(a+1):\n    x = a - i\n    print(x)\n</code></pre>\n\n<p>This is because <code>range(n)</code> goes from 0 to n-1, and so as you have it, your final iteration runs a - (a-1) = 1. To make your range go until a ( to calculate a - a ) you need to use <code>range(a+1)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 4, "last_activity_date": 1496880220, "last_edit_date": 1496880220, "creation_date": 1496879830, "answer_id": 44424544, "question_id": 44424522, "link": "https://stackoverflow.com/questions/44424522/countdown-to-zero-instead-of-1/44424544#44424544", "title": "Countdown to zero instead of 1?", "body": "<p>You could use the three-argument form of <a href=\"https://docs.python.org/library/functions.html#func-range\" rel=\"nofollow noreferrer\"><code>range</code></a>:</p>\n\n<pre><code>for i in range(a, -1, -1):\n     print(i)\n</code></pre>\n\n<p>It will start with <code>a</code> and then (because the step [third argument] is <code>-1</code>) count down to <code>0</code> because the stop value (<code>-1</code> [second argument]) is excluded.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8128416"}, "edited": false, "score": 0, "creation_date": 1496880069, "post_id": 44424552, "comment_id": 75847611, "body": "I need to use for loop range for this. While loop not allowed"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1496880249, "post_id": 44424552, "comment_id": 75847661, "body": "@python_noob edited the answer"}], "tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": false, "score": 0, "last_activity_date": 1496880240, "last_edit_date": 1496880240, "creation_date": 1496879923, "answer_id": 44424552, "question_id": 44424522, "link": "https://stackoverflow.com/questions/44424522/countdown-to-zero-instead-of-1/44424552#44424552", "title": "Countdown to zero instead of 1?", "body": "<p>You can also use a <code>while-loop</code> like:</p>\n\n<pre><code>a = int(input(\"Enter a numeber: \"))\nwhile a &gt;= 0:\n    print(a)\n    a -= 1\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Enter a numeber: 10\n10\n9\n8\n7\n6\n5\n4\n3\n2\n1\n0\n</code></pre>\n\n<p>if you want to use a for loop you just need to use a+1 in the range:</p>\n\n<pre><code>a = int(input(\"Enter a numeber: \"))\nfor i in range(a+1):\n    print(a-i)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8128416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 1, "closed_date": 1496886087, "answer_count": 3, "score": 1, "last_activity_date": 1496885580, "creation_date": 1496879666, "last_edit_date": 1496885580, "question_id": 44424522, "link": "https://stackoverflow.com/questions/44424522/countdown-to-zero-instead-of-1", "closed_reason": "Duplicate", "title": "Countdown to zero instead of 1?", "body": "<pre><code>a = int(input(\"Enter a numeber: \"))\n\nfor i in range(a):\n    x = a - i\n    print(x)\n</code></pre>\n\n<p>How can I make this count down to zero instead of 1?</p>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 2, "creation_date": 1496879644, "post_id": 44424505, "comment_id": 75847504, "body": "Filenames don&#39;t end with slashes. Does <code>open(&#39;.&#47;searchJson2.json&#39;)</code> work?"}, {"owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1496880483, "post_id": 44424505, "comment_id": 75847706, "body": "I fixed it ... and there was an error. I fixed it ... and there was an error.   Traceback (most recent call last):   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\Desktop\\\uc878\uc5c5\uc791\ud488\\indexer_test1.py&quot;, line 192, in &lt;module&gt;     search_list = json.loads(data_file.read())   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json_<i>init_</i>.py&quot;, line 354, in loads     return _default_decoder.decode(s)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1496880508, "post_id": 44424505, "comment_id": 75847711, "body": "Post your code as plain text, not an image."}, {"owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1496880524, "post_id": 44424505, "comment_id": 75847718, "body": "File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json\\decoder.py&quot;, line 339, in decode     obj, end = self.raw_decode(s, idx=_w(s, 0).end())   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json\\decoder.py&quot;, line 357, in raw_decode     raise JSONDecodeError(&quot;Expecting value&quot;, s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1496881055, "post_id": 44424505, "comment_id": 75847831, "body": "You get that last error if json tries to decode an empty string. Is the file empty?"}, {"owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1496881449, "post_id": 44424505, "comment_id": 75847932, "body": "yes. .json is the file empty"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1496880320, "post_id": 44424521, "comment_id": 75847673, "body": "Traceback (most recent call last):   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\Desktop\\\uc878\uc5c5\uc791\ud488\\indexer_test1.py&quot;, line 192, in &lt;module&gt;     search_list = json.loads(data_file.read())   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json_<i>init_</i>.py&quot;, line 354, in loads     return _default_decoder.decode(s)"}, {"owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1496880340, "post_id": 44424521, "comment_id": 75847678, "body": "File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json\\decoder.py&quot;, line 339, in decode     obj, end = self.raw_decode(s, idx=_w(s, 0).end())   File &quot;C:\\Users\\\ud55c\ucc2c\ud76c\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\&zwnj;&#8203;json\\decoder.py&quot;, line 357, in raw_decode     raise JSONDecodeError(&quot;Expecting value&quot;, s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1496880579, "post_id": 44424521, "comment_id": 75847730, "body": "@\ud55c\ucc2c\ud76c Sounds like the file doesn&#39;t contain valid JSON."}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496902245, "post_id": 44424521, "comment_id": 75853693, "body": "The answer respond to your original question."}], "tags": [], "owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "is_accepted": true, "score": 0, "last_activity_date": 1496879666, "creation_date": 1496879666, "answer_id": 44424521, "question_id": 44424505, "link": "https://stackoverflow.com/questions/44424505/dont-understand-this-invalid-argument-error/44424521#44424521", "title": "Don&#39;t understand this Invalid argument error", "body": "<p>Because the path is not correct. Remove the trailing slash.</p>\n\n<p>It should be:</p>\n\n<blockquote>\n  <p>with open('./searchJson2.json') as data_file:</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 6541394, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-N2yR6rx9hDM/AAAAAAAAAAI/AAAAAAAAVrU/ju2kC3sAD9E/photo.jpg?sz=128", "display_name": "anshaj", "link": "https://stackoverflow.com/users/6541394/anshaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1496919633, "creation_date": 1496919633, "answer_id": 44433894, "question_id": 44424505, "link": "https://stackoverflow.com/questions/44424505/dont-understand-this-invalid-argument-error/44433894#44433894", "title": "Don&#39;t understand this Invalid argument error", "body": "<p>Can you try this:</p>\n\n<pre><code>dir_path = os.path.dirname(os.path.realpath(__file__))\nwith open('{0}/searchJson2.json'.format(dir_path),'r+') as data_file:\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7239425, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zAcGg9KEVOg/AAAAAAAAAAI/AAAAAAAAABw/IxcdGMZ8Wf8/photo.jpg?sz=128", "display_name": "\ud55c\ucc2c\ud76c", "link": "https://stackoverflow.com/users/7239425/%ed%95%9c%ec%b0%ac%ed%9d%ac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 44424521, "answer_count": 2, "score": -2, "last_activity_date": 1502889508, "creation_date": 1496879504, "last_edit_date": 1502889508, "question_id": 44424505, "link": "https://stackoverflow.com/questions/44424505/dont-understand-this-invalid-argument-error", "title": "Don&#39;t understand this Invalid argument error", "body": "<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"C:\\Users\\\ud55c\ucc2c\ud76c\\Desktop\\\uc878\uc5c5\uc791\ud488\\indexer_test1.py\", line 191, in \n&lt;module&gt;\n    with open('./searchJson2.json/') as data_file:\nOSError: [Errno 22] Invalid argument: './searchJson2.json/\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/1ExLy.jpg\" alt=\"Folder contents screenshot\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/4z06z.jpg\" alt=\"code screenshot\"></p>\n"}, {"tags": ["python", "pyramid", "chameleon"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8395092, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5111cf027df3b91f7fed2f6bc9b4a4eb?s=128&d=identicon&r=PG", "display_name": "zille", "link": "https://stackoverflow.com/users/8395092/zille"}, "is_accepted": false, "score": 0, "last_activity_date": 1501516572, "creation_date": 1501516572, "answer_id": 45420401, "question_id": 44424503, "link": "https://stackoverflow.com/questions/44424503/pyramid-chameleon-passing-data-into-a-chameleon-template/45420401#45420401", "title": "Pyramid/Chameleon - Passing data into a chameleon template", "body": "<p>You may have a look at the tal:repeat function in chameleon:</p>\n\n<pre><code>&lt;div tal:repeat=\"fielddict fieldslist\"&gt;\n&lt;label&gt;${fielddict['fieldname']}&lt;/label&gt;\n&lt;input type=\"${fielddict['fieldtype']}\" class=\"form-control\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>something like that, but I am not sure if tal:repeat can iterate through dictionaries directly. lists work well.</p>\n"}], "owner": {"reputation": 1, "user_id": 7020740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19e6310fba375aeba7a30177db29b412?s=128&d=identicon&r=PG", "display_name": "caroisawesome", "link": "https://stackoverflow.com/users/7020740/caroisawesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501516572, "creation_date": 1496879491, "question_id": 44424503, "link": "https://stackoverflow.com/questions/44424503/pyramid-chameleon-passing-data-into-a-chameleon-template", "title": "Pyramid/Chameleon - Passing data into a chameleon template", "body": "<p>I have a Chameleon template in a Pyramid app called <code>table_search.pt</code>:</p>\n\n<pre><code>&lt;form class=\"table-search\" tal:repeat=\"search_item search_fields\"&gt;\n      &lt;div class=\"form-group\"&gt;\n      &lt;label data-field=\"${search_item.field}\"&gt;${search_item.label}&lt;/label&gt;\n      &lt;input type=\"${search_item.field_type}\" class=\"form-control\"&gt;\n      &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I am hoping to pass a list of dictionaries called <code>search_fields</code> into this template, but I can't figure out how.  I am loading <code>table_search.py</code> into another template called <code>table.pt</code>: </p>\n\n<pre><code>&lt;div metal:use-macro=\"load: pagelayout.pt\"&gt;\n\n&lt;div metal:fill-slot=\"content\"&gt;\n     &lt;div class=\"content\"&gt;\n\n     &lt;div metal:define-slot=\"search_fields\"&gt;\n          &lt;div metal:use-macro=\"load: table_search.pt\"&gt;&lt;/div&gt;\n     &lt;/div&gt;\n\n ...\n</code></pre>\n\n<p>is there any way to load the search template into another template with a certain data context that contains the <code>search_fields</code> list of dictionaries? </p>\n\n<p>It might be tricky to pass in <code>search_fields</code> through the pyramid view callable, so is there another way?  </p>\n"}, {"tags": ["python", "xpath", "python-requests", "lxml"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 1, "last_activity_date": 1496885220, "last_edit_date": 1496885220, "creation_date": 1496879782, "answer_id": 44424536, "question_id": 44424474, "link": "https://stackoverflow.com/questions/44424474/parse-selective-table-rows-in-python-with-lxml-and-xpath/44424536#44424536", "title": "parse selective table rows in python with lxml and xpath", "body": "<p>You can use <code>@attr=value</code> to extract specific tr tags:</p>\n\n<pre><code>//tr[@data-mod-primary='true']/td/text()\n</code></pre>\n\n<p>Or if you use <code>contains</code>, it would be something like:</p>\n\n<pre><code>//tr[contains(@data-mod-primary, 'true')]/td/text()\n</code></pre>\n"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 44424536, "answer_count": 1, "score": 0, "last_activity_date": 1496885220, "creation_date": 1496879273, "question_id": 44424474, "link": "https://stackoverflow.com/questions/44424474/parse-selective-table-rows-in-python-with-lxml-and-xpath", "title": "parse selective table rows in python with lxml and xpath", "body": "<p>below is the structure of the html file that i wish to parse</p>\n\n<pre><code>&lt;tr data-mod-primary=\"true\"&gt;\n    &lt;td&gt;'some text'\n&lt;tr&gt;\n    &lt;td&gt;'some text'\n&lt;tr&gt;\n    &lt;td&gt;'some text'\n&lt;tr data-mod-primary=\"true\"&gt;\n    &lt;td&gt;'some text'\n</code></pre>\n\n<p>I am interested in parsing only the text under <code>&lt;tr data-mod-primary=\"true\"&gt;</code> and ignore other <code>&lt;tr&gt;</code>'s</p>\n\n<p>I get all <code>&lt;tr&gt;</code> text through <code>.xpath('//tr/td/text()')</code> but this is not what I want. I have tried the below code after researching for solution for sometime:</p>\n\n<pre><code>.xpath('//tr[contains(@data-mod-primary=\"true\",None)]/td/text()')\n</code></pre>\n\n<p>but this too gets me the text under all <code>&lt;tr&gt;</code> basically same result as <code>.xpath('//tr/td/text()')</code></p>\n\n<p>Any help is appreciated. thank you.</p>\n"}, {"tags": ["python", "scope", "immutability"], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 2948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09159a2ed561a30d2227e631972e41ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2948567", "link": "https://stackoverflow.com/users/2948567/user2948567"}, "edited": false, "score": 0, "creation_date": 1496945064, "post_id": 44424563, "comment_id": 75883028, "body": "Thanks Robert.  I had to import the copy library in my python 2.7 environment.  Your suggestion was the key."}], "tags": [], "owner": {"reputation": 8864, "user_id": 234009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342e019ead7a196820deaa9b784efe91?s=128&d=identicon&r=PG", "display_name": "robert_x44", "link": "https://stackoverflow.com/users/234009/robert-x44"}, "is_accepted": true, "score": 1, "last_activity_date": 1496879988, "creation_date": 1496879988, "answer_id": 44424563, "question_id": 44424459, "link": "https://stackoverflow.com/questions/44424459/class-duplicates-input-objects/44424563#44424563", "title": "Class duplicates input objects", "body": "<p>You are making a shallow copy of the list passed to your class in the init function.</p>\n\n<p>See <a href=\"https://docs.python.org/3/library/copy.html\" rel=\"nofollow noreferrer\">Shallow and deep copy operations</a> in the Python documentation for some basic information.</p>\n\n<p><code>self.colList = ColList[:]</code> makes a new LIST, but inside that new list are references to the same objects that were in the original list (a shallow copy).</p>\n\n<p>You need a deep copy:</p>\n\n<pre><code>import copy\n...\nself.colList = copy.deepcopy(ColList)\n</code></pre>\n\n<p>A deep copy has a new list, as well as new objects initialized to match the objects in the original list.  So if the objects in one class' list change, they don't change in every class.</p>\n"}], "owner": {"reputation": 148, "user_id": 2948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09159a2ed561a30d2227e631972e41ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2948567", "link": "https://stackoverflow.com/users/2948567/user2948567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 44424563, "answer_count": 1, "score": 1, "last_activity_date": 1496885962, "creation_date": 1496879098, "last_edit_date": 1496885962, "question_id": 44424459, "link": "https://stackoverflow.com/questions/44424459/class-duplicates-input-objects", "title": "Class duplicates input objects", "body": "<p>I have two python class objects that I use to extract data from Oracle to ArcMap.  The various activities in the process cause me to start with a list of 'column' objects and build a <code>pyTable</code> object.  The <code>pyTable</code> object has a list of insert Fields by name.  During <code>__init__</code> I use the <code>getSelect()</code> function to populate the list of insert Fields.</p>\n\n<p>I have added a bunch of statements to make sure that each time I call <code>pyTable</code> I get a newly created object, but I'm still seeing a strange result.  The first time I use the class, all is fine.  The second time I issue the same statement, the <code>colList</code> is new, but the field list is duplicated.  My apologies for not cleaning out the extraneous code sections.  </p>\n\n<p>Where am I messing up my object references?</p>\n\n<p>Here are the execution results.  <code>myList</code> has 8 column objects.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; arcTable = pyTable(myList)\n&gt;&gt;&gt; len(arcTable.getTuple())\n8\n&gt;&gt;&gt; arcTable = pyTable(myList)\n&gt;&gt;&gt; len(arcTable.getTuple())\n16\n&gt;&gt;&gt; arcTable = pyTable(myList)\n&gt;&gt;&gt; len(arcTable.getTuple())\n8\n&gt;&gt;&gt; arcTable = pyTable(myList)\n&gt;&gt;&gt; len(arcTable.getTuple())\n8\n&gt;&gt;&gt; newTable = pyTable(myList)\n&gt;&gt;&gt; len(newTable.getTuple())\n8\n&gt;&gt;&gt; thirdTable = pyTable(myList)\n&gt;&gt;&gt; len(thirdTable.getTuple())\n16\n&gt;&gt;&gt; thirdTable = pyTable(myList)\n&gt;&gt;&gt; len(thirdTable.getTuple())\n24\n&gt;&gt;&gt; thirdTable = pyTable(myList)\n&gt;&gt;&gt; len(thirdTable.getTuple())\n8\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Here are the two classes:</p>\n\n<pre><code>import arcpy, cx_Oracle\n\nclass column:\n    # Add to the arcType and cxType functions to support more Oracle data types.\n    # BLOB and CLOB fields will need additional support in Read and Write fx's.\n      name = ''\n      dataType = ''\n      dataLen = 1\n      dataPrecision = 0\n      dataScale = 0\n      query = ''\n      isShape = False\n      isLOB = False\n\n      def __init__(self, Name, DataType, DataLen, DataPrecision, DataScale):\n          self.name = Name\n          self.dataType = DataType\n          self.dataLen = DataLen\n          self.dataPrecision = DataPrecision\n          self.dataScale = DataScale\n          if DataType == 'WKT':\n              self.query = 'sdo_util.to_wktgeometry(t.' + Name + ') wkb, '\n          else:\n              self.query = 't.' + Name\n          if DataType == 'SDO_GEOMETRY':\n              self.isShape = True\n          if DataType == 'BLOB' or DataType == 'CLOB' or DataType == 'WKT':\n              self.isLOB = True\n\n      def getArcType(self, *args):        # Data type translation 'Oracle_type':'ESRI_type'\n          return {\n#             'BINARY_DOUBLE':'DOUBLE',\n#             'BINARY_FLOAT':'FLOAT',\n#             'BLOB':'BLOB',\n              'CHAR':'STRING',\n              'CLOB':'CLOB',\n              'DATE':'DATE',\n#             'FLOAT':'FLOAT',\n#             'LONG':'LONG',\n#             'LONG RAW':'BLOB',\n              'NUMBER':'DOUBLE',\n#             'RAW':'BLOB',\n#             'ROWID':'SHORT',\n              'SDO_GEOMETRY':'GEOMETRY',\n              'VARCHAR2':'STRING',\n              'WKT':'WKT',\n          }.get(self.dataType,\"undefined\")\n\n      def getCxType(self, *args):        # Data type translation 'Oracle_type':'cx_Oracle.type'\n          return {\n              'BLOB':cx_Oracle.BLOB,\n              'CHAR':cx_Oracle.STRING,\n              'CLOB':cx_Oracle.CLOB,\n              'DATE':cx_Oracle.DATETIME,\n              'NUMBER':cx_Oracle.NUMBER,\n              'SDO_GEOMETRY':cx_Oracle.CLOB,\n              'VARCHAR2':cx_Oracle.STRING,\n          }.get(self.dataType,\"undefined\")\n\nclass pyTable:\n    # Create an object to track columns for read and write operations.\n    # BLOB, CLOB and SDO_GEOMETRY types will need additional support in Read and Write fx's.\n    length = 0\n    # colList = []       # The original list of columns is coming from an Oracle query.\n    # These two lists are different because of the way I treat shape.\n    # I create a FC and then add attribute columns.  This puts the Shape column first in the list. \n    __insCols = []       # I use insCols as a list of column type objects to write to ArcMap.\n    __insertFields = []\n    __colTuple = None\n    __myData = []\n    __pKey = 'P_KEY'     # The name of the primary key field should be &lt;table&gt;_CN\n    __insBlobCols = []   # A list of column positions that contain BLOB data types.\n    __insKeyCol = -1     # The position of the primary key column.\n\n    def __init__(self, ColList):\n        self.colList = ColList[:]\n        self.length = len(ColList)\n        self.isFC = self.__getShape()\n        self.__select = self.getSelect()\n        arcpy.AddMessage('New table class created with ' + str(self.length) + ' columns.')\n\n    def __del__(self):\n        self.colList = []\n        del self.__insCols [:]\n        del self.__insertFields [:]\n        del self.__myData [:]\n        del self.__insBlobCols [:]\n\n    def addDataRow(self, inDataRow):\n        self.__myData.append(inDataRow)\n\n    def getInsCols(self):\n        return self.__insCols\n\n    def getTuple(self):\n        return self.__colTuple\n\n    def getPK(self):\n        return self.__pKey\n\n    def getInsBlobCols(self):\n        return self.__insBlobCols\n\n    def clearData(self):\n        self.__myData = []\n\n    def getData(self):\n        return self.__myData\n\n    def getKeyCol(self):\n        return self.__insKeyCol\n\n    def __getShape(self):\n        isFeature = False\n        featureName = ''\n        for col in self.colList:\n            if col.isShape:\n                isFeature = True\n                featureName = col.name\n        if isFeature:\n            wktShape = column(featureName, 'WKT', 0, 0, 0)\n            self.__insCols.append(wktShape)\n        for col in self.colList:\n            if not col.isShape:\n                self.__insCols.append(col)\n        return isFeature\n\n    def getSelect(self):\n        # Build the select statement\n        # Build the list of insert Field names\n        # Build the Tuple of insert Field names\n        # Identify the LOB columns by index number\n        statement = 'select '\n        del self.__insertFields[:]\n        indx = 0\n#        print ('Table has ', len(self.__insCols), ' insert columns.')\n        for col in self.__insCols:\n            if col.dataType == 'WKT':\n                statement += 'sdo_util.to_wktgeometry(t.shape) wkb, '\n                self.__insertFields.append('SHAPE@WKT')\n            else:\n                statement += 't.' + col.name + ', '\n                self.__insertFields.append(col.name)\n                if col.dataType == 'BLOB':\n                    self.__insBlobCols.append(indx)\n            #\n            # ToDo: The key column should be &lt;table&gt;_CN\n            #   But, the logic needs to work for views with different names.\n            #\n            if col.name == self.__pKey:\n                self.__insKeyCol = indx\n            indx += 1\n        statement = statement[:statement.rfind(',')]  # Trim off the trailing comma\n#        print ('Insert is composed of ', len(self.__insertFields), ' fields.' )\n        self.__colTuple = tuple(self.__insertFields)\n        return statement\n\n    def createTemp(self, WorkSpace, tempFC):\n        success = False\n        insertCols = self.__insCols\n        arcpy.AddMessage('Adding ' + tempFC + ' with ' + str(len(insertCols)) + ' columns.')\n        try:\n            if self.isFC:\n                arcpy.CreateFeatureclass_management(WorkSpace, tempFC, 'POINT')\n                arcpy.AddMessage(tempFC + ' feature class was successfully created.')\n            else:\n                arcpy.CreateTable_management(WorkSpace, tempFC)\n                arcpy.AddMessage(tempFC + ' table was successfully created.')\n            for col in insertCols:\n                esriType = col.getArcType()\n                if esriType == \"undefined\":\n                    arcpy.AddError('Data type not currently supported, ' + col.dataType)\n                    return success\n                if col.dataType &lt;&gt; 'WKT':\n                    arcpy.AddField_management(tempFC, col.name, esriType, col.dataPrecision, col.dataScale, col.dataLen)\n                    arcpy.AddMessage('Created column: ' + col.name)\n            success = True\n        except:\n            e = sys.exc_info()[1]\n            arcpy.AddError('Create of ' + tempFC + ' failed with ' + str(e.args[0]))            \n        return success\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup", "lxml"], "comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496879408, "post_id": 44424402, "comment_id": 75847436, "body": "Have you tried <code>creator</code> instead of <code>dc:creator</code>?"}, {"owner": {"reputation": 25411, "user_id": 84885, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wcYCF.jpg?s=128&g=1", "display_name": "Atma", "link": "https://stackoverflow.com/users/84885/atma"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496879522, "post_id": 44424402, "comment_id": 75847477, "body": "@codekaizer yes it doesn&#39;t return anything"}], "answers": [{"tags": [], "owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1496880259, "last_edit_date": 1496880259, "creation_date": 1496879721, "answer_id": 44424529, "question_id": 44424402, "link": "https://stackoverflow.com/questions/44424402/tag-contents-not-returning-in-beautifulsoup/44424529#44424529", "title": "tag contents not returning in beautifulsoup", "body": "<p>This worked for me using Python 3 - <a href=\"https://repl.it/languages/python3\" rel=\"nofollow noreferrer\">https://repl.it/languages/python3</a></p>\n\n<p>Specifying parser as <code>xml</code></p>\n\n<pre><code>import bs4 as bs\ncontent=\"\"\"\n&lt;collection&gt;\n    &lt;item&gt;&lt;dc:creator&gt;&lt;![CDATA[Chris M]]&gt;&lt;/dc:creator&gt;&lt;/item&gt;\n    &lt;item&gt;&lt;dc:creator&gt;&lt;![CDATA[Harris A]]&gt;&lt;/dc:creator&gt;&lt;/item&gt;\n&lt;/collection&gt;\n\"\"\"\n\nsoup = bs.BeautifulSoup(content, 'xml')\n\nitems = soup.findAll(\"item\")\nfor i in items:\n   author = i.find('creator')\n   print(author.string)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Chris M\nHarris A\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1496880068, "creation_date": 1496880068, "answer_id": 44424568, "question_id": 44424402, "link": "https://stackoverflow.com/questions/44424402/tag-contents-not-returning-in-beautifulsoup/44424568#44424568", "title": "tag contents not returning in beautifulsoup", "body": "<p>BeautifulSoup recognizes CData as a subclass so you can have it check for instances of it.</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup, CData\n\n&gt;&gt;&gt; text = \"\"\"&lt;item&gt;\n&lt;dc:creator&gt;&lt;![CDATA[Chris M]]&gt;&lt;/dc:creator&gt;\n&lt;pubDate&gt;Tue, 06 Jun 2017 07:38:23 +0000&lt;/pubDate&gt;\n&lt;/item&gt;\"\"\"\n&gt;&gt;&gt; soup = BeautifulSoup(text)\n&gt;&gt;&gt; for item in soup.findAll(text=True):\n        if isinstance(item, CData):\n            print(item)\n\n\nChris M\n</code></pre>\n"}], "owner": {"reputation": 25411, "user_id": 84885, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wcYCF.jpg?s=128&g=1", "display_name": "Atma", "link": "https://stackoverflow.com/users/84885/atma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496880266, "creation_date": 1496878618, "last_edit_date": 1496880266, "question_id": 44424402, "link": "https://stackoverflow.com/questions/44424402/tag-contents-not-returning-in-beautifulsoup", "title": "tag contents not returning in beautifulsoup", "body": "<p>I have the following string I'm trying to extract:</p>\n\n<pre><code>&lt;item&gt;\n&lt;dc:creator&gt;&lt;![CDATA[Chris M]]&gt;&lt;/dc:creator&gt;\n&lt;pubDate&gt;Tue, 06 Jun 2017 07:38:23 +0000&lt;/pubDate&gt;\n&lt;/item&gt;\n</code></pre>\n\n<p>I'm trying to get the name Chris M and other authors with this:</p>\n\n<pre><code>soup = BeautifulSoup(response, \"lxml\")\nitems = soup.findAll(\"item\")\n            for i in items:\n                 author = i.find('dc:creator')\n                 print author\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>&lt;dc:creator&gt;&lt;/dc:creator&gt;\n</code></pre>\n\n<p>How can I get the name contents from the tag?</p>\n"}, {"tags": ["python", "c++", "arrays", "numpy", "swig"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7967265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668702729b917f51e83f7d1c605e796c?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/7967265/tony"}, "edited": false, "score": 0, "creation_date": 1497039440, "post_id": 44424387, "comment_id": 75928929, "body": "Yes, it&#39;s a general int** and it has 2 possible size. I already know how to make it work with adding code snippet in the c++ definition. But I&#39;m still looking for a way to make it work by only editing the interface file or the python part. Thanks!"}], "tags": [], "owner": {"reputation": 1, "user_id": 2731169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b16be94ffd0e276ee260ee2181e462?s=128&d=identicon&r=PG&f=1", "display_name": "berks", "link": "https://stackoverflow.com/users/2731169/berks"}, "is_accepted": false, "score": 0, "last_activity_date": 1496945663, "last_edit_date": 1496945663, "creation_date": 1496878504, "answer_id": 44424387, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig/44424387#44424387", "title": "Reading c++ 2d array in python swig", "body": "<p>Your question would be easier to answer if you could add a code snippet of your C++ definition (or C if you use int**). When you say \"2d int array\", do you mean a general int**? Is the array size known in advance?</p>\n\n<p>At any rate, you could probably use <a href=\"https://docs.scipy.org/doc/numpy/reference/swig.interface-file.html\" rel=\"nofollow noreferrer\">numpy.i</a> but it depends on the fine details of your array.</p>\n\n<p>See this somewhat related question:\n<a href=\"https://stackoverflow.com/questions/30259591/swig-and-multidimensional-arrays\">Swig and multidimensional arrays</a></p>\n"}, {"tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 0, "last_activity_date": 1496881479, "creation_date": 1496881479, "answer_id": 44424756, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig/44424756#44424756", "title": "Reading c++ 2d array in python swig", "body": "<p>You'll find that passing things back and forth between languages is much easier if you use a one-dimensional array in which you access elements using, e.g. <code>arr[y*WIDTH+x]</code>.</p>\n\n<p>Since you are operating in C++ you can even wrap these arrays in classes with nice <code>operator()(int x, int y)</code> methods for use on the C++ side.</p>\n\n<p>In fact, this is the internal representation which Numpy uses for arrays: they are all one-dimensional.</p>\n"}], "owner": {"reputation": 9, "user_id": 7967265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668702729b917f51e83f7d1c605e796c?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/7967265/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496945663, "creation_date": 1496877978, "last_edit_date": 1496883155, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig", "title": "Reading c++ 2d array in python swig", "body": "<p>C++ part\nI have a class <code>a</code> with a <strong>public</strong> variable 2d int array <code>b</code> that I want to print out in python.(The way I want to access it is <code>a.b</code>)</p>\n\n<p>I have been able to wrap the most part of the code and I can call most of the functions in class a in python now.</p>\n\n<p>So how can I read b in python? How to read it into an numpy array with numpy.i(I find some solution on how to work with a function not variable)? Is there a way I can read any array in the c++ library? Or I have to deal with each of the variables in the interface file.</p>\n\n<p>for now b is <code>&lt;Swig Object of type 'int (*)[24]' at 0x02F65158&gt;</code> when I try to use it in python</p>\n\n<p>ps:\n1. If possible I don't want to modify the cpp part.</p>\n\n<ol start=\"2\">\n<li>I'm trying to access a variable, not a function. </li>\n</ol>\n\n<p>So don't refer me to links that doesn't really answer my question, thanks.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496878107, "post_id": 44424264, "comment_id": 75847098, "body": "What have you tried so far? Have you found any similar questions/answers?"}, {"owner": {"reputation": 35, "user_id": 5130862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58de5bbd1d0801f2a96bb6bc360362c3?s=128&d=identicon&r=PG&f=1", "display_name": "valpha", "link": "https://stackoverflow.com/users/5130862/valpha"}, "reply_to_user": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496878298, "post_id": 44424264, "comment_id": 75847159, "body": "so wrong to give -1 withoput even understanding the question and not having breath of what someone is trying to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": false, "score": 0, "last_activity_date": 1496879495, "creation_date": 1496879495, "answer_id": 44424504, "question_id": 44424264, "link": "https://stackoverflow.com/questions/44424264/regex-to-replace-a-part-of-string/44424504#44424504", "title": "Regex to replace a part of string", "body": "<p>I don't know what is your desired output, but you can try:</p>\n\n<pre><code>import re\ns = \"target:40,trg: tra:20,this:30\"\nprint re.sub(r'[a-zA-Z0-9]+:\\s', ' ', s)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>target:40, tra:20,this:30\n</code></pre>\n\n<p>If you want to just delete it without adding a space, use <code>''</code> instead of <code>' '</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3586197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bd3a0a69a95477b14c71f7c0c4fcc9?s=128&d=identicon&r=PG&f=1", "display_name": "TommaR", "link": "https://stackoverflow.com/users/3586197/tommar"}, "is_accepted": false, "score": 0, "last_activity_date": 1496881568, "creation_date": 1496881568, "answer_id": 44424767, "question_id": 44424264, "link": "https://stackoverflow.com/questions/44424264/regex-to-replace-a-part-of-string/44424767#44424767", "title": "Regex to replace a part of string", "body": "<p>I'm a newb and not sure about this question. But from what I understand I would do this.</p>\n\n<pre><code>import re\ntext = \"target:40,trg: tra:20,this:30\"\nfindText = re.compile(r\": \")\nmo = ft.search(text)\nmog = mo.group()\ntextsplit = re.split((mog), text)[1]\nprint(textsplit)\n</code></pre>\n\n<p>which will output:</p>\n\n<pre><code>tra:20,this:30\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5130862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58de5bbd1d0801f2a96bb6bc360362c3?s=128&d=identicon&r=PG&f=1", "display_name": "valpha", "link": "https://stackoverflow.com/users/5130862/valpha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1496906761, "creation_date": 1496877620, "last_edit_date": 1496906761, "question_id": 44424264, "link": "https://stackoverflow.com/questions/44424264/regex-to-replace-a-part-of-string", "title": "Regex to replace a part of string", "body": "<p>I have a string like </p>\n\n<pre><code> \"target:40,trg: tra:20,this:30\"\n</code></pre>\n\n<p>I want to replace <strong>trg:</strong> \nor in other words, anything before colon followed by one empty space should be replaced.</p>\n\n<p>I don't have any easy way to do it.\nAny help will be great.</p>\n"}, {"tags": ["python", "unit-testing", "mockito", "parameter-passing"], "answers": [{"tags": [], "owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "is_accepted": true, "score": 4, "last_activity_date": 1496878069, "creation_date": 1496878069, "answer_id": 44424321, "question_id": 44424182, "link": "https://stackoverflow.com/questions/44424182/pyunit-mock-sys-argv-in-other-file/44424321#44424321", "title": "pyunit mock sys.argv in other file", "body": "<p>You can do this using <code>patch</code> from the <a href=\"http://www.voidspace.org.uk/python/mock/\" rel=\"nofollow noreferrer\">mock</a> module. Here is an example:</p>\n\n<pre><code>from mock import patch\n\ndef test_your_function():\n    fake_args = [None, \"myfakearg\"]\n    with patch('sys.argv', fake_args):\n        import yourmodule\n        # rest of your test\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6890703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b368ced28d0ec37b7dbc7876f778aa58?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6890703/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 0, "accepted_answer_id": 44424321, "answer_count": 1, "score": 1, "last_activity_date": 1496878069, "creation_date": 1496877135, "question_id": 44424182, "link": "https://stackoverflow.com/questions/44424182/pyunit-mock-sys-argv-in-other-file", "title": "pyunit mock sys.argv in other file", "body": "<p>I have one python file wrote like this:</p>\n\n<pre><code>import sys\ncfgfile = sys.argv[1]\ncfg = ConfigObj(cfgfile)\ndb_dbname=cfg.get(\"DB_NAME\")\nclass UserMappingsLoader:\n    def __init__(self):\n        self.debug = 0\n        self.cuStartTime = 0\n        self.fiId = 0\n</code></pre>\n\n<p>and I want to write a pyunit to do the testing for one method in this code. But when I run my testing code, it shows: </p>\n\n<pre><code>cfgfile = sys.argv[1]\nlist index out of range\n</code></pre>\n\n<p>Anyone know how to mock the sys.argv from testing file to this file?</p>\n"}, {"tags": ["python", "list"], "answers": [{"tags": [], "owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "is_accepted": false, "score": 1, "last_activity_date": 1496877465, "creation_date": 1496877465, "answer_id": 44424232, "question_id": 44424176, "link": "https://stackoverflow.com/questions/44424176/string-element-of-lista-are-substrings-of-listb-how-to-retrieve-and-store-each/44424232#44424232", "title": "string element of listA are substrings of listB. How to retrieve and store each string in listB which contains these subsrtings in python?", "body": "<p>Easy job with <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow noreferrer\"><code>filter</code></a>:</p>\n\n<pre><code>alpha = filter(lambda s: s.startswith('alpha'), listB)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 3231557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b734e7cb6de2b7394ab1da5baa2d37e?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Gwynn-Jones", "link": "https://stackoverflow.com/users/3231557/rob-gwynn-jones"}, "is_accepted": true, "score": 3, "last_activity_date": 1496877483, "creation_date": 1496877483, "answer_id": 44424236, "question_id": 44424176, "link": "https://stackoverflow.com/questions/44424176/string-element-of-lista-are-substrings-of-listb-how-to-retrieve-and-store-each/44424236#44424236", "title": "string element of listA are substrings of listB. How to retrieve and store each string in listB which contains these subsrtings in python?", "body": "<p>You could do something like:</p>\n\n<p><code>{i: [j for j in listB if j.startswith(i)] for i in listA}</code></p>\n\n<p>which returns:</p>\n\n<pre><code>{\n    'alpha': [\n        'alphav1', \n        'alphav2', \n        'alpha$v3', \n        'alpha$v4-beta', \n        'alpha-beta'\n    ], \n    'beta': [\n        'beta$v1', \n        'betav2', \n        'beta-alpha', \n        'beta$v6-get'\n    ], \n    'gamma': [\n        'gamma'\n    ]\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 8128335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fd9145bcd8c947cd6b4cc46038343e?s=128&d=identicon&r=PG&f=1", "display_name": "neophyte_robo", "link": "https://stackoverflow.com/users/8128335/neophyte-robo"}, "edited": false, "score": 0, "creation_date": 1496877635, "post_id": 44424239, "comment_id": 75846947, "body": "what if I have list of 1000 elements of list A and 10k+.. in listB?"}, {"owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "reply_to_user": {"reputation": 9, "user_id": 8128335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fd9145bcd8c947cd6b4cc46038343e?s=128&d=identicon&r=PG&f=1", "display_name": "neophyte_robo", "link": "https://stackoverflow.com/users/8128335/neophyte-robo"}, "edited": false, "score": 0, "creation_date": 1496877730, "post_id": 44424239, "comment_id": 75846977, "body": "Id you want to make the list out of elements in both lists just change &#39;in listB&#39; to &#39;in listA + listB&#39;."}], "tags": [], "owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "is_accepted": false, "score": 1, "last_activity_date": 1496877495, "creation_date": 1496877495, "answer_id": 44424239, "question_id": 44424176, "link": "https://stackoverflow.com/questions/44424176/string-element-of-lista-are-substrings-of-listb-how-to-retrieve-and-store-each/44424239#44424239", "title": "string element of listA are substrings of listB. How to retrieve and store each string in listB which contains these subsrtings in python?", "body": "<p>This code will make a new list for the items in list b and seperating them based on the first letter of the string.</p>\n\n<pre><code>alpha = [x for x in listB if x.startswith('a')]\nbeta = [x for x in listB if x.startswith('b')]\ngamma = [x for x in listB if x.startswith('g')]\n\nprint(alpha, beta, gamma, sep='\\n')\n\n&gt;&gt;&gt;\n['alphav1', 'alphav2', 'alpha$v3', 'alpha$v4-beta', 'alpha-beta']\n['beta$v1', 'betav2', 'beta-alpha', 'beta$v6-get']\n['gamma']\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8128335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fd9145bcd8c947cd6b4cc46038343e?s=128&d=identicon&r=PG&f=1", "display_name": "neophyte_robo", "link": "https://stackoverflow.com/users/8128335/neophyte-robo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 44424236, "answer_count": 3, "score": -1, "last_activity_date": 1496877727, "creation_date": 1496877086, "last_edit_date": 1496877727, "question_id": 44424176, "link": "https://stackoverflow.com/questions/44424176/string-element-of-lista-are-substrings-of-listb-how-to-retrieve-and-store-each", "title": "string element of listA are substrings of listB. How to retrieve and store each string in listB which contains these subsrtings in python?", "body": "<p>i have following lists</p>\n\n<pre><code>listA = ['alpha','beta','gamma'] \nlistB = ['alphav1','alphav2','alpha$v3', 'alpha$v4-beta', \n        'alpha-beta','beta$v1', 'betav2', 'beta-alpha', 'beta$v6-get', 'gamma']\n</code></pre>\n\n<p>i wanted to retrieve and store:</p>\n\n<pre><code>alpha = ['alphav1','alphav2','alpha$v3', 'alpha$v4-beta'] \n</code></pre>\n\n<p>i.e a list named alpha and similarly for beta and gamma</p>\n\n<p>I have to get the this with starting strings only and not any other matching strings! Ex: incase of alpha-beta and alpha$v4-beta fall into alpha and beta-alpha fall into beta.</p>\n\n<p>Note: I have huge listA with 1k+ elements - looking for generic answer with time complexity issue too.</p>\n"}, {"tags": ["python", "nginx", "docker", "docker-compose", "uwsgi"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 1, "creation_date": 1496878383, "post_id": 44424170, "comment_id": 75847178, "body": "Just use tcp for uwsgi and link the containers. Socket sharing is possible, but not supported on OSX. Also, yes, having uwsgi and nginx is separate containers is best practice."}, {"owner": {"reputation": 122, "user_id": 5735800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd20817a4c79e5d41457ae9e2c0adafc?s=128&d=identicon&r=PG&f=1", "display_name": "CodeUnsolved", "link": "https://stackoverflow.com/users/5735800/codeunsolved"}, "edited": false, "score": 0, "creation_date": 1501140775, "post_id": 44424170, "comment_id": 77649640, "body": "@<a href=\"https://stackoverflow.com/users/1032785/jordanm\">jordanm</a> Holly shit! You are right! I had tried 2 hours to share .sock file between OSX and docker(Nginx)! It works on Ubuntu with 666, i just tried."}], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 5735800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd20817a4c79e5d41457ae9e2c0adafc?s=128&d=identicon&r=PG&f=1", "display_name": "CodeUnsolved", "link": "https://stackoverflow.com/users/5735800/codeunsolved"}, "edited": false, "score": 1, "creation_date": 1501137398, "post_id": 44426095, "comment_id": 77647416, "body": "if <code>uwsgi</code> on host, what <code>uwsgi_pass</code> should be? host&#39;s IP? I had tired that, show some &quot;Connection refused&quot; error. thx!"}], "tags": [], "owner": {"reputation": 631, "user_id": 3137058, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1aba2b715126624d1c6302636ff6df0?s=128&d=identicon&r=PG&f=1", "display_name": "nooper", "link": "https://stackoverflow.com/users/3137058/nooper"}, "is_accepted": true, "score": 7, "last_activity_date": 1497256333, "last_edit_date": 1497256333, "creation_date": 1496892127, "answer_id": 44426095, "question_id": 44424170, "link": "https://stackoverflow.com/questions/44424170/how-to-share-sock-file-between-nginx-docker-and-uwsgi-docker/44426095#44426095", "title": "How to share .sock file between nginx docker and uwsgi docker?", "body": "<p>You don't need to share the sock file with different docker container.</p>\n\n<p>The simple solution is share the socket port between dockers.</p>\n\n<p>In the uwsgi file need to add <code>socket=:3000</code>.</p>\n\n<pre><code>[uwsgi]\n\nmaster=true\nchdir=.\nmodule=flaskapp\n\nharakiri=60\n\ncallable=app\nthunder-lock=true\nsocket=:3000\nworkers=12\nthreads=4\nchmod-socket=666\nvacuum=true\ndie-on-term=true\npidfile=uwsgi.pid\n\nmax-requests=5000\n\npost-buffering=65536\npost-buffering-bufsize=524288\n</code></pre>\n\n<p>the define the nginx conf. the <code>uwsgi_pass</code> section <code>flask:3000</code> means  (docker server name):(docker expose port).</p>\n\n<pre><code>server {\n    listen 80;\n\n    charset     utf-8;\n    client_max_body_size 20M;\n\n    location / {\n        try_files $uri @slack;\n    }\n\n    location @slack {\n        include uwsgi_params;\n        uwsgi_pass flask:3000;\n        uwsgi_read_timeout 60s;\n        uwsgi_send_timeout 60s;\n        uwsgi_connect_timeout 60s;\n    }\n}\n</code></pre>\n\n<p>In docker-compose file:</p>\n\n<pre><code>nginx:\n    container_name: nginx\n    build:\n      context: .\n      dockerfile: ./Dockerfile-Nginx\n    ports:\n      - \"80:80\"\n    depends_on:\n      - flask\n\nflask:\n    tty: true\n    container_name: flask\n    build:\n      context: .\n      dockerfile: ./Dockerfile\n    expose:\n      - \"3000\"\n\n    command: uwsgi --ini ./uwsgi.ini\n</code></pre>\n\n<p>So just let the docker run one process for each docker container. </p>\n"}], "owner": {"reputation": 847, "user_id": 7999670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/980a6bff4b67376fe0dd3b95a7230617?s=128&d=identicon&r=PG&f=1", "display_name": "GMe", "link": "https://stackoverflow.com/users/7999670/gme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2719, "favorite_count": 3, "accepted_answer_id": 44426095, "answer_count": 1, "score": 3, "last_activity_date": 1542965295, "creation_date": 1496877053, "question_id": 44424170, "link": "https://stackoverflow.com/questions/44424170/how-to-share-sock-file-between-nginx-docker-and-uwsgi-docker", "title": "How to share .sock file between nginx docker and uwsgi docker?", "body": "<p>I'm using docker-compose and now have two docker containers - one is a nginx webserver, whereas the other one is ubuntu with Python uwsgi and Flask.</p>\n\n<p>As I know, the best way to connect nginx and uWSGI is done by sharing a *.sock file between them and pass the requests into the file (And that what I do in older projects where I did not use dockers).</p>\n\n<p>I'm wondering how can I share the sock file between the dockers in order to enable the communication between them?</p>\n\n<p>And at all.. I'm wondering if this scenario of two containers - one for nginx and one for the Flask framework and uWSGI - is best practice and right to do.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "data-cleaning"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6559682, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/639ab889abbae05e9733679e68d2e796?s=128&d=identicon&r=PG&f=1", "display_name": "Pearl", "link": "https://stackoverflow.com/users/6559682/pearl"}, "edited": false, "score": 0, "creation_date": 1496881390, "post_id": 44424347, "comment_id": 75847916, "body": "@Casey Van Buren . Thanks for such easy solution"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 1, "last_activity_date": 1496878771, "last_edit_date": 1496878771, "creation_date": 1496878282, "answer_id": 44424347, "question_id": 44424091, "link": "https://stackoverflow.com/questions/44424091/pandas-how-to-drop-columns-that-have-numbers-and-combine-the-rest-of-the-columns/44424347#44424347", "title": "PANDAS how to drop columns that have numbers and combine the rest of the columns", "body": "<p>You can mask the cells containing digits can then concat all columns\"</p>\n\n<pre><code>df['D'] = df[~df.fillna('').apply(lambda x: x.str.contains('\\d'))]\\\n            .fillna('').apply(lambda x: ''.join(x), axis=1)\ndf\nOut[810]: \n             A          B     C            D\n0           PQ       None  None           PQ\n1       Chieti       None  None       Chieti\n2  Gainesville       None  None  Gainesville\n3      Wenzhou     325027  None      Wenzhou\n4       Boston       None  None       Boston\n5      D-53127       Bonn  None         Bonn\n6     SE-11282  Stockholm  None    Stockholm\n7   Birmingham       None  None   Birmingham\n8        Miami       None  None        Miami\n9          Los    Angeles  None   LosAngeles\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2047399"}, "is_accepted": false, "score": 1, "last_activity_date": 1496879974, "creation_date": 1496879974, "answer_id": 44424559, "question_id": 44424091, "link": "https://stackoverflow.com/questions/44424091/pandas-how-to-drop-columns-that-have-numbers-and-combine-the-rest-of-the-columns/44424559#44424559", "title": "PANDAS how to drop columns that have numbers and combine the rest of the columns", "body": "<p>You could do this by applying a function over the rows with <code>apply(...,axis=1)</code>.</p>\n\n<pre><code>import pandas as pd\n\ndef row_func(row):\n    def num_there(s):\n        return any(i.isdigit() for i in s)\n    result = []\n    for x in row:\n        if x and not num_there(str(x)):\n            result.append(str(x))\n    return ''.join(result)\n\n\ndf['D'] = df.apply(row_func, axis=1)\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6559682, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/639ab889abbae05e9733679e68d2e796?s=128&d=identicon&r=PG&f=1", "display_name": "Pearl", "link": "https://stackoverflow.com/users/6559682/pearl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496879974, "creation_date": 1496876505, "question_id": 44424091, "link": "https://stackoverflow.com/questions/44424091/pandas-how-to-drop-columns-that-have-numbers-and-combine-the-rest-of-the-columns", "title": "PANDAS how to drop columns that have numbers and combine the rest of the columns", "body": "<p>I have a DataFrame:</p>\n\n<pre><code>     A          B       C\n  0 PQ          None    None\n  1 Chieti      None    None\n  2 Gainesville None    None\n  3 Wenzhou     325027  None\n  4 Boston      None    None\n  5 D-53127     Bonn    None\n  6 SE-11282    Stockholm None\n  7 Birmingham  None    None\n  8 Miami       None    None\n  9 Los         Angeles None\n</code></pre>\n\n<p>I want to combine the text in all columns  and create a new column which is column 'D' here .However I do not want to include the column if there are numbers or digits in that column . My final output should look like this:</p>\n\n<pre><code>     A          B       C       D\n  0 PQ          None    None    PQ\n  1 Chieti      None    None    Chieti\n  2 Gainesville None    None    Gainesville\n  3 Wenzhou     325027  None    Wenzhou  \n  4 Boston      None    None    Boston\n  5 D-53127     Bonn    None    Bonn\n  6 SE-11282    Stockholm None  Stockholm\n  7 Birmingham  None    None    Birmingham\n  8 Miami       None    None    Miami\n  9 Los         Angeles None    LosAngeles\n</code></pre>\n\n<p>Could the knowledgeable folks in Stackoverflow give me an insight into solving this using PANDAS/python</p>\n"}, {"tags": ["python", "tensorflow", "windows-10", "keras"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1496881538, "post_id": 44424068, "comment_id": 75847948, "body": "Looks like it&#39;s a recent bug <a href=\"https://github.com/tensorflow/tensorflow/issues/9819\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/9819</a>"}, {"owner": {"reputation": 442, "user_id": 5281775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd062fbe79a875efb59c1d069f0ac9d0?s=128&d=identicon&r=PG&f=1", "display_name": "enterML", "link": "https://stackoverflow.com/users/5281775/enterml"}, "edited": false, "score": 0, "creation_date": 1496924045, "post_id": 44424068, "comment_id": 75868015, "body": "Can you please put the output of DependencyWalker here?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8410600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d288a81aaf838de8846d062015dbf1d?s=128&d=identicon&r=PG&f=1", "display_name": "mrjskrueger", "link": "https://stackoverflow.com/users/8410600/mrjskrueger"}, "is_accepted": false, "score": 0, "last_activity_date": 1501753832, "last_edit_date": 1501753832, "creation_date": 1501753122, "answer_id": 45480407, "question_id": 44424068, "link": "https://stackoverflow.com/questions/44424068/python-keras-installation-on-windows-10-gru-ops-dll-not-found/45480407#45480407", "title": "Python Keras installation on Windows 10 _gru_ops.dll not found", "body": "<p>I had a same issue but couldn't figure out how to solve it properly. While Anaconda environment has almost all needed packages preinstalled and will fix your problem, I would recommend you the following:</p>\n\n<ul>\n<li>install Anaconda from: <a href=\"https://www.continuum.io/downloads\" rel=\"nofollow noreferrer\">https://www.continuum.io/downloads</a></li>\n<li>start Anacondas Prompt as admin and check with:<code>pip install keras</code> and <code>pip install tensorflow</code> if needed packages are installed, yet</li>\n<li>now use the new Python interpreter in your IDE or for compiling (in PyCharm for example go to settings --> project interpreter and choose your path)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8023768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc98bd7b9b3386f1289212d2575926b?s=128&d=identicon&r=PG&f=1", "display_name": "Clem.R", "link": "https://stackoverflow.com/users/8023768/clem-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1505573389, "creation_date": 1505573389, "answer_id": 46255142, "question_id": 44424068, "link": "https://stackoverflow.com/questions/44424068/python-keras-installation-on-windows-10-gru-ops-dll-not-found/46255142#46255142", "title": "Python Keras installation on Windows 10 _gru_ops.dll not found", "body": "<p>I had the same issue and it seemed that tensorflow wasn't handling very well path with accents (<a href=\"https://github.com/tensorflow/tensorflow/issues/9481\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/9481</a>).</p>\n\n<p>I had a \"\u00e9\" in my path to tensorflow (as you do) and moving my installation to another folder fixed my problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8782941, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dm96geKAoB8/AAAAAAAAAAI/AAAAAAAAJbc/NiarH1IXBL0/photo.jpg?sz=128", "display_name": "OsaShayne", "link": "https://stackoverflow.com/users/8782941/osashayne"}, "is_accepted": false, "score": 0, "last_activity_date": 1508231672, "creation_date": 1508231672, "answer_id": 46786587, "question_id": 44424068, "link": "https://stackoverflow.com/questions/44424068/python-keras-installation-on-windows-10-gru-ops-dll-not-found/46786587#46786587", "title": "Python Keras installation on Windows 10 _gru_ops.dll not found", "body": "<p>Just rename the XX.dll to XX.dll.bak.Maybe the system asks the trustedinstaller</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3819837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VuBal.jpg?s=128&g=1", "display_name": "heluwe", "link": "https://stackoverflow.com/users/3819837/heluwe"}, "is_accepted": false, "score": 0, "last_activity_date": 1519375884, "creation_date": 1519375884, "answer_id": 48944231, "question_id": 44424068, "link": "https://stackoverflow.com/questions/44424068/python-keras-installation-on-windows-10-gru-ops-dll-not-found/48944231#48944231", "title": "Python Keras installation on Windows 10 _gru_ops.dll not found", "body": "<ul>\n<li>uninstall tensorflow use <code>pip uninstall tensorflow</code></li>\n<li>run cmd as admin and then use <code>pip install tensorflow</code></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 8128279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aaa281561922c5f96ce4a3acd430a84?s=128&d=identicon&r=PG&f=1", "display_name": "Clem v", "link": "https://stackoverflow.com/users/8128279/clem-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2460, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1519375884, "creation_date": 1496876362, "question_id": 44424068, "link": "https://stackoverflow.com/questions/44424068/python-keras-installation-on-windows-10-gru-ops-dll-not-found", "title": "Python Keras installation on Windows 10 _gru_ops.dll not found", "body": "<p>I have to install Keras with Tensorflow on windows 10. I followed the tutorial on the official website <a href=\"https://keras.io/#installation\" rel=\"nofollow noreferrer\">https://keras.io/#installation</a>.</p>\n\n<p>The installation of Tensorflow and Keras seems to work properly but when I import Keras in a python terminal I have this :</p>\n\n<pre><code>&gt;&gt;&gt; import keras\nUsing TensorFlow backend.\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\keras\\__init__.py\", line 3, in &lt;module&gt;\n    from . import activations\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\keras\\activations.py\", line 6, in &lt;module&gt;\n    from .engine import Layer\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\keras\\engine\\__init__.py\", line 8, in &lt;module&gt;\n    from .training import Model\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\keras\\engine\\training.py\", line 24, in &lt;module&gt;\n    from .. import callbacks as cbks\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\keras\\callbacks.py\", line 26, in &lt;module&gt;\n    from tensorflow.contrib.tensorboard.plugins import projector\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\__init__.py\", line 26, in &lt;module&gt;\n    from tensorflow.contrib import crf\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\crf\\__init__.py\", line 32, in &lt;module&gt;\n    from tensorflow.contrib.crf.python.ops.crf import _lengths_to_masks\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\crf\\python\\ops\\crf.py\", line 44, in &lt;module&gt;\n    from tensorflow.contrib.rnn.python.ops import core_rnn_cell\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\rnn\\__init__.py\", line 80, in &lt;module&gt;\n    from tensorflow.contrib.rnn.python.ops.gru_ops import *\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\rnn\\python\\ops\\gru_ops.py\", line 32, in &lt;module&gt;\n    resource_loader.get_path_to_datafile(\"_gru_ops.so\"))\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\util\\loader.py\", line 55, in load_op_library\n    ret = load_library.load_op_library(path)\n  File \"C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\load_library.py\", line 64, in load_op_library\n    None, None, error_msg, error_code)\ntensorflow.python.framework.errors_impl.NotFoundError: C:\\Users\\Cl\u00e9mence\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\rnn\\python\\ops\\_gru_ops.dll not found\n</code></pre>\n\n<p>It looks like this file is missing : _gru_ops.dll</p>\n\n<p>Thank's for your answers and your help</p>\n"}, {"tags": ["python", "pandas", "graphics", "xserver", "sungridengine"], "answers": [{"tags": [], "owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "is_accepted": true, "score": 1, "last_activity_date": 1497485092, "creation_date": 1497485092, "answer_id": 44556507, "question_id": 44424058, "link": "https://stackoverflow.com/questions/44424058/import-pandas-with-graphics-disabled/44556507#44556507", "title": "Import pandas with graphics disabled", "body": "<p>The <code>pandas</code> team told me that this bug should be fixed as of version 0.20.2.</p>\n\n<p>If you are compelled to use versions of <code>pandas</code> that contain this bug, one potential workaround is to include</p>\n\n<pre><code>export DISPLAY=\"\"\n</code></pre>\n\n<p>at the top of the bash script you submit to SGE.</p>\n"}], "owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 44556507, "answer_count": 1, "score": 2, "last_activity_date": 1497485092, "creation_date": 1496876316, "last_edit_date": 1496882720, "question_id": 44424058, "link": "https://stackoverflow.com/questions/44424058/import-pandas-with-graphics-disabled", "title": "Import pandas with graphics disabled", "body": "<p>I'm running an analysis using the Sun Grid Engine.</p>\n\n<p>However, in my code I import pandas, which causes this error to be raised:</p>\n\n<pre><code>import pandas as pd\n</code></pre>\n\n<blockquote>\n  <p>: cannot connect to X server :3026.0</p>\n</blockquote>\n\n<p>What I've gathered from some Googling and conversations with my sys admin is that <code>pandas</code> is trying to load graphics, and the SGE is not allowing this.</p>\n\n<p>I don't want to do any plotting with <code>pandas</code>.  I just want to use its <code>DataFrame</code> features.</p>\n\n<p>Is there a way to load <code>pandas</code> with graphics disabled, so the SGE doesn't hiccup in this way?</p>\n\n<p><strong>UPDATE:</strong> I reverted to <code>pandas</code> version 0.18, and that version does not cause this error.  Version 0.20 does cause the error.  I don't have time to investigate exactly which version introduced the error.  But I did post this as an issue on the <code>pandas</code> GitHub issue tracker, so hopefully someone else will do the work that remains to fix this.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496876928, "post_id": 44424053, "comment_id": 75846739, "body": "is it certain that once the page is loaded, the text will be there? or the text appearance is purely random and uncertain?"}, {"owner": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496877334, "post_id": 44424053, "comment_id": 75846863, "body": "Yes, it is nearly as certain as can be."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496877407, "post_id": 44424163, "comment_id": 75846891, "body": "This solved my problem. Very much appreciated, have been at this for few days :) Am brand new to Python and Selenium but I see you are rebuilding post refresh with concat methodology ?"}, {"owner": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "reply_to_user": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496877541, "post_id": 44424163, "comment_id": 75846926, "body": "@gamb1t_88 - I just tried to work with your existing code. Welcome to python &amp; selenium. Research more on how you can approach the same thing in a better way. Why do you need to refresh the page?"}, {"owner": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496877688, "post_id": 44424163, "comment_id": 75846964, "body": "Essentially do not know when the page will have data I need, not due to load time rather when the data posts to page. Is there a smarter solution ?"}, {"owner": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "reply_to_user": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496877854, "post_id": 44424163, "comment_id": 75847023, "body": "Can&#39;t really say without looking at the page itself. May be you can try wait for some element to be displayed. <a href=\"https://selenium-python.readthedocs.io/waits.html#explicit-waits\" rel=\"nofollow noreferrer\">selenium-python.readthedocs.io/waits.html#explicit-waits</a>"}, {"owner": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496877936, "post_id": 44424163, "comment_id": 75847052, "body": "I did have this implemented and it worked, but to me it seems that explicit wait as you mention will only wait for elements to render that are in a cache, rather than new updated data to the page itself? I was uncertain of using the approach."}, {"owner": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "reply_to_user": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "edited": false, "score": 0, "creation_date": 1496878040, "post_id": 44424163, "comment_id": 75847080, "body": "wait is applicable for new elements to appear on the page. You can carry on with the current implementation if it meets your needs"}], "tags": [], "owner": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "is_accepted": true, "score": 0, "last_activity_date": 1496876996, "creation_date": 1496876996, "answer_id": 44424163, "question_id": 44424053, "link": "https://stackoverflow.com/questions/44424053/python-stale-element-reference-element-not-attached-to-page-document/44424163#44424163", "title": "Python Stale Element Reference: Element not attached to page document", "body": "<p>When you are doing the explicit refresh, the links object will not longer be valid and will throw the <code>StaleElementReferenceException</code>. You should get that element again after the refresh. You can try something like below:</p>\n\n<pre><code>innerArticles = driver.find_elements_by_xpath(\"//div[@class='inner-article']\")\n\nfor i in range(len(innerArticles)):\n    print('inFor')\n\n    SubItems = driver.find_elements_by_xpath(\"//div[@class='inner-article']\")[i].find_elements_by_xpath(\"//a[text()='Text']\")\n\n    iterator = 0\n    if len(SubItems) &lt; 1:\n        print('Sub &lt; 1')\n        while iterator &lt; 5:\n            print('While', iterator)\n\n            time.sleep(1)  # sleep 1 seconds to refresh again\n            iterator = iterator + 1  # iterate\n            driver.refresh()  # refresh\n            SubItems = driver.find_elements_by_xpath(\"//div[@class='inner-article']\")[i].find_elements_by_xpath(\"//a[text()='Text']\")\n            break\n            if len(SubItems) &gt; 0:\n                print('break')\n                break\n\n    if len(SubItems) &gt; 0:\n        print('SecondIf')\n        links = driver.find_elements_by_xpath(\"//div[@class='inner-article']\")[i]\n        if links.text.startswith('SText') and links.text.endswith('SText'):\n            links.click()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4031595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pjQEqvSzJ_8/AAAAAAAAAAI/AAAAAAAAAkc/4ZHFJdmIbnI/photo.jpg?sz=128", "display_name": "torvel", "link": "https://stackoverflow.com/users/4031595/torvel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1782, "favorite_count": 0, "accepted_answer_id": 44424163, "answer_count": 1, "score": -1, "last_activity_date": 1496876996, "creation_date": 1496876292, "last_edit_date": 1496876658, "question_id": 44424053, "link": "https://stackoverflow.com/questions/44424053/python-stale-element-reference-element-not-attached-to-page-document", "title": "Python Stale Element Reference: Element not attached to page document", "body": "<p>having trouble getting around Stale Element reference. I think the innerArticles array is at fault, as it is controlling the whole for loop. After I refresh explicitly i get stale element exception. </p>\n\n<p>Esentially I want the page to keep refreshing until the 'Text' in SubItems xpath has appeared on the page. As I do not know when this will occur I need to start and keep reloading. </p>\n\n<p>Any help is appreciated. </p>\n\n<p>Code:</p>\n\n<pre><code>innerArticles = driver.find_elements_by_xpath(\"//div[@class='inner-article']\")\n\nfor links in innerArticles:\n    print('inFor')\n\n    SubItems = links.find_elements_by_xpath(\"//a[text()='Text']\")\n\n    iterator = 0\n    if len(SubItems) &lt; 1:\n        print('Sub &lt; 1')\n        while iterator &lt; 5:\n            print('While', iterator)\n\n            time.sleep(1)  # sleep 1 seconds to refresh again\n            iterator = iterator + 1  # iterate\n            driver.refresh()  # refresh\n            SubItems = links.find_elements_by_xpath(\"//a[text()='Text']\")\n            break\n            if len(SubItems) &gt; 0:\n                print('break')\n                break\n\n    if len(SubItems) &gt; 0:\n        print('SecondIf')\n        if links.text.startswith('SText') and links.text.endswith('SText'):\n            links.click()\n</code></pre>\n"}, {"tags": ["python", "django", "logging"], "comments": [{"owner": {"reputation": 5960, "user_id": 1522548, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/swFB2.png?s=128&g=1", "display_name": "JWP", "link": "https://stackoverflow.com/users/1522548/jwp"}, "edited": false, "score": 1, "creation_date": 1496893842, "post_id": 44424040, "comment_id": 75850716, "body": "Please show some code of what has been done."}, {"owner": {"reputation": 8594, "user_id": 264632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bab3a3e1a3625c3e9db43f8b2f7924c?s=128&d=identicon&r=PG", "display_name": "Javier Novoa C.", "link": "https://stackoverflow.com/users/264632/javier-novoa-c"}, "reply_to_user": {"reputation": 5960, "user_id": 1522548, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/swFB2.png?s=128&g=1", "display_name": "JWP", "link": "https://stackoverflow.com/users/1522548/jwp"}, "edited": false, "score": 1, "creation_date": 1496938170, "post_id": 44424040, "comment_id": 75879055, "body": "@JohnPeters there you go!"}], "answers": [{"comments": [{"owner": {"reputation": 8594, "user_id": 264632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bab3a3e1a3625c3e9db43f8b2f7924c?s=128&d=identicon&r=PG", "display_name": "Javier Novoa C.", "link": "https://stackoverflow.com/users/264632/javier-novoa-c"}, "edited": false, "score": 0, "creation_date": 1497289492, "post_id": 44477791, "comment_id": 76004645, "body": "could you please ellaborate on how I can use certain custom attribute I add via a filter on the logging formatter string?"}, {"owner": {"reputation": 5217, "user_id": 6582873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEx7y.jpg?s=128&g=1", "display_name": "napuzba", "link": "https://stackoverflow.com/users/6582873/napuzba"}, "reply_to_user": {"reputation": 8594, "user_id": 264632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bab3a3e1a3625c3e9db43f8b2f7924c?s=128&d=identicon&r=PG", "display_name": "Javier Novoa C.", "link": "https://stackoverflow.com/users/264632/javier-novoa-c"}, "edited": false, "score": 1, "creation_date": 1497336384, "post_id": 44477791, "comment_id": 76020707, "body": "ellaborated about filters."}, {"owner": {"reputation": 12815, "user_id": 27401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8199ddc0a286ca23415595a4eb22c44?s=128&d=identicon&r=PG", "display_name": "Reinout van Rees", "link": "https://stackoverflow.com/users/27401/reinout-van-rees"}, "edited": false, "score": 2, "creation_date": 1497336792, "post_id": 44477791, "comment_id": 76020973, "body": "One thing to watch out for is that logging can also happen in places where there&#39;s no <code>request</code> (generic python code or <code>models.py</code> for instance). So the production version will probably need a bit more code for robustness. (As an example, it is fine, of course! I&#39;ve learned something from it and I&#39;ll look at filters a bit more!)"}, {"owner": {"reputation": 1997, "user_id": 648176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22de266afafe3db3029b162072b02203?s=128&d=identicon&r=PG", "display_name": "Fush", "link": "https://stackoverflow.com/users/648176/fush"}, "edited": false, "score": 1, "creation_date": 1497510157, "post_id": 44477791, "comment_id": 76110613, "body": "<a href=\"https://docs.python.org/3/howto/logging-cookbook.html#using-filters-to-impart-contextual-information\" rel=\"nofollow noreferrer\">Python docs</a> for reference"}, {"owner": {"reputation": 1887, "user_id": 1092940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2e8e9b67646db490fc27d32e015805?s=128&d=identicon&r=PG", "display_name": "AlanSE", "link": "https://stackoverflow.com/users/1092940/alanse"}, "edited": false, "score": 0, "creation_date": 1502376989, "post_id": 44477791, "comment_id": 78193391, "body": "The python docs link comes the closest to answering the question. It allows you to attach information from another context to the log record, so that the value will be available to the formatter. This still falls short of the thing being asked - which is how to pass the request user through."}, {"owner": {"reputation": 562, "user_id": 1044605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a4cd7806e4a28d67199c07f06f6fe6ee?s=128&d=identicon&r=PG", "display_name": "mega.venik", "link": "https://stackoverflow.com/users/1044605/mega-venik"}, "edited": false, "score": 3, "creation_date": 1585071020, "post_id": 44477791, "comment_id": 107635136, "body": "Looks like it doesn&#39;t work anymore - <code>AttributeError: &#39;LogRecord&#39; object has no attribute &#39;request&#39;</code>"}], "tags": [], "owner": {"reputation": 5217, "user_id": 6582873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEx7y.jpg?s=128&g=1", "display_name": "napuzba", "link": "https://stackoverflow.com/users/6582873/napuzba"}, "is_accepted": true, "score": 28, "last_activity_date": 1497336198, "last_edit_date": 1497336198, "creation_date": 1497126793, "answer_id": 44477791, "question_id": 44424040, "link": "https://stackoverflow.com/questions/44424040/django-logging-custom-attributes-in-formatter/44477791#44477791", "title": "Django logging custom attributes in formatter", "body": "<p>You can use a filter to add your custom attribute. For example :</p>\n\n<pre><code>def add_my_custom_attribute(record):\n    record.myAttribute = 'myValue'\n    record.username = record.request.user.username \n    return True\n\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        ...\n        'add_my_custom_attribute': {\n            '()': 'django.utils.log.CallbackFilter',\n            'callback': add_my_custom_attribute,\n        }\n    },\n    'handlers': {\n        ...\n        'django.server': {\n            'level': 'INFO',\n            'class': 'logging.StreamHandler',\n            'filters': ['add_my_custom_attribute'],\n            'formatter': 'django.server',\n        },            \n    },\n    ...\n}\n</code></pre>\n\n<hr>\n\n<p>By installing a filter, you can process each log record and decide whether it should be passed from logger to handler. </p>\n\n<p>The filter get the log record which contains all the details of log (i.e : time, severity, request, status code). </p>\n\n<p>The attributes of the record are used by the formatter to format it to string message. If you add your custom attributes to that record - they will also be available to the formatter.</p>\n"}, {"comments": [{"owner": {"reputation": 12815, "user_id": 27401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8199ddc0a286ca23415595a4eb22c44?s=128&d=identicon&r=PG", "display_name": "Reinout van Rees", "link": "https://stackoverflow.com/users/27401/reinout-van-rees"}, "edited": false, "score": 1, "creation_date": 1497336593, "post_id": 44478298, "comment_id": 76020841, "body": "Using <code>extra</code> works, but it gets tedious if you have/want to add it all the time. The original question is for a standard way to specify it in one place only (namely the logging setup)."}], "tags": [], "owner": {"reputation": 997, "user_id": 5381704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lYch.png?s=128&g=1", "display_name": "Bishwas Mishra", "link": "https://stackoverflow.com/users/5381704/bishwas-mishra"}, "is_accepted": false, "score": 3, "last_activity_date": 1497130533, "last_edit_date": 1592644375, "creation_date": 1497130533, "answer_id": 44478298, "question_id": 44424040, "link": "https://stackoverflow.com/questions/44424040/django-logging-custom-attributes-in-formatter/44478298#44478298", "title": "Django logging custom attributes in formatter", "body": "<p>The <code>extra</code> keyword is not a workaround. That's the most eloquent way of writing customized formatters, unless you are writing a <a href=\"https://docs.djangoproject.com/en/1.11/topics/logging/#custom-logging-configuration\" rel=\"nofollow noreferrer\">custom logging</a> altogether.</p>\n<pre><code>format: '%(asctime).19s %(levelname)s - %(username)s: %(message)s'\nlogging.basicConfig(format=format)\nlogger.info(message, extra={'username' : request.user.username})\n</code></pre>\n<p>Some note from the documentation (<a href=\"https://docs.python.org/3/library/logging.html#logging.debug\" rel=\"nofollow noreferrer\">**kwars for Django logger</a>):</p>\n<blockquote>\n<p>The keys in the dictionary passed in extra should not clash with the keys used by the logging system.</p>\n<p>If the strings expected by the Formatter are missing, the message will not be logged.</p>\n<p>This feature is intended for use in specialized circumstances, and not always.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1887, "user_id": 1092940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2e8e9b67646db490fc27d32e015805?s=128&d=identicon&r=PG", "display_name": "AlanSE", "link": "https://stackoverflow.com/users/1092940/alanse"}, "is_accepted": false, "score": 2, "last_activity_date": 1502377664, "creation_date": 1502377664, "answer_id": 45617420, "question_id": 44424040, "link": "https://stackoverflow.com/questions/44424040/django-logging-custom-attributes-in-formatter/45617420#45617420", "title": "Django logging custom attributes in formatter", "body": "<p>I will provide one of many possible complete answers to this question:</p>\n\n<blockquote>\n  <p>How can Django use logging to log using custom attributes in the formatter? I'm thinking of logging the logged in username for example.</p>\n</blockquote>\n\n<p>Other answers touched on the way to add extra contextual info through python's logging utilities. The method of using filters to attach additional information to the log record is ideal, and best described in the docs:</p>\n\n<p><a href=\"https://docs.python.org/3/howto/logging-cookbook.html#using-filters-to-impart-contextual-information\" rel=\"nofollow noreferrer\">https://docs.python.org/3/howto/logging-cookbook.html#using-filters-to-impart-contextual-information</a></p>\n\n<p>This still does not tell us <em>how to get the user</em> from the request in a universal way. The following library does this:</p>\n\n<p><a href=\"https://github.com/ninemoreminutes/django-crum\" rel=\"nofollow noreferrer\">https://github.com/ninemoreminutes/django-crum</a></p>\n\n<p>Thus, combine the two, and you will have a complete answer to the question that has been asked.</p>\n\n<pre><code>import logging\nfrom crum import get_current_user\n\nclass ContextFilter(logging.Filter):\n    \"\"\"\n    This is a filter injects the Django user\n    \"\"\"\n\n    def filter(self, record):\n\n        record.user = get_current_user()\n        return True\n\nif __name__ == '__main__':\n    logging.basicConfig(level=logging.DEBUG,\n                        format='User: %(user)-8s %(message)s')\n    a1 = logging.getLogger('a.b.c')\n\n    f = ContextFilter()\n    a1.addFilter(f)\n    a1.debug('A debug message')\n</code></pre>\n\n<p>This will need to happen within a Django request-response cycle with the CRUM library properly installed.</p>\n"}], "owner": {"reputation": 8594, "user_id": 264632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bab3a3e1a3625c3e9db43f8b2f7924c?s=128&d=identicon&r=PG", "display_name": "Javier Novoa C.", "link": "https://stackoverflow.com/users/264632/javier-novoa-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6381, "favorite_count": 4, "accepted_answer_id": 44477791, "answer_count": 3, "score": 18, "last_activity_date": 1614860513, "creation_date": 1496876248, "last_edit_date": 1497337245, "question_id": 44424040, "link": "https://stackoverflow.com/questions/44424040/django-logging-custom-attributes-in-formatter", "title": "Django logging custom attributes in formatter", "body": "<p>How can Django use logging to log using custom attributes in the formatter? I'm thinking of logging the logged in username for example.</p>\n\n<p>In the <code>settings.py</code> script, the LOGGING variable is defined:</p>\n\n<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_false': {\n            '()': 'django.utils.log.RequireDebugFalse'\n        },\n    },\n    'formatters' : {\n        'info_format' : {\n            'format' : '%(asctime)s %(levelname)s - %(message)s',\n        },\n    }\n}\n</code></pre>\n\n<p>I wish to use a format, something like:</p>\n\n<pre><code>'format' : '%(asctime).19s %(levelname)s - %(username)s: %(message)s'\n</code></pre>\n\n<p>Where username would be the currently logged in user. Maybe any other kind of session's variables may be added here.</p>\n\n<p>A workaround here is to use the <code>extra</code> parameter on the logger methods, which receives a dictionary with the keys as the strings I want to use on the format string:</p>\n\n<pre><code>logger.info(message, extra={'username' : request.user.username})\n</code></pre>\n\n<p>Another (ugly) workaround would be to build the message attribute to include the things that are not part of the default attributes that logging formatters have.</p>\n\n<pre><code>message = request.user.username + \" - \" + message\nlogger.info(message)\n</code></pre>\n\n<p>But, is there a way to set up the format string with certain attributes and make Django give them automatically to the logging API? If %(username)s for example, the request.user.username, of any others perhaps...</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1496876404, "post_id": 44424039, "comment_id": 75846563, "body": "Well for one thing you could do <code>list(map(int, each))</code> once and assign it to a variable rather than as part of the if statement and inside it"}, {"owner": {"reputation": 555, "user_id": 7489452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c9920f29b423a2af6ac9ed41ff95f91?s=128&d=identicon&r=PG&f=1", "display_name": "nCessity", "link": "https://stackoverflow.com/users/7489452/ncessity"}, "edited": false, "score": 1, "creation_date": 1496876443, "post_id": 44424039, "comment_id": 75846577, "body": "please provide a full minimal example. Thanks"}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496876558, "post_id": 44424039, "comment_id": 75846625, "body": "Yes, there are much more efficient ways to do this. Perhaps start by working through the problem yourself on paper (with a small <code>number</code>) and see what algorithm <i>you</i> follow. I&#39;ve seen this as an interview question, so you&#39;ll probably also be able to find solutions on the web."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1496877264, "post_id": 44424039, "comment_id": 75846846, "body": "@Uriel I assume it&#39;s from <a href=\"https://docs.python.org/2/library/itertools.html#itertools.combinations_with_replacement\" rel=\"nofollow noreferrer\"><b><code>itertools.combinations_with_replacement</code></b></a>"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1496877305, "post_id": 44424039, "comment_id": 75846856, "body": "@PeterWood my bad."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1496877378, "post_id": 44424039, "comment_id": 75846879, "body": "<code>sum(list(map(int, each)))</code> can be <code>sum(int(value) for value in each)</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1496877739, "post_id": 44424039, "comment_id": 75846980, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30130890/find-values-in-list-which-sum-to-a-given-value\">Find values in list which sum to a given value</a>"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1496878572, "creation_date": 1496878572, "answer_id": 44424398, "question_id": 44424039, "link": "https://stackoverflow.com/questions/44424039/generating-all-possible-combinations-inefficient/44424398#44424398", "title": "Generating all possible combinations inefficient", "body": "<p>First of all, quit repeating work.</p>\n\n<ul>\n<li>Convert the list elements to integers before you enter the loop.</li>\n<li>The combination is already in a tuple; do you really need to convert it to a list for <code>combos</code>?</li>\n<li>Instead of generating all combinations for a variety of list lengths, try the recursive solution you can find with a \"sum to target\" search.  This will <em>greatly</em> reduce the quantity of lists to try.</li>\n</ul>\n\n<p>The basic idea of the recursive solution is:</p>\n\n<pre><code># Given: remaining target sum and list of numbers (lon) to use\nif target = 0:\n    return []\nif target &lt; 0 or len(lon) == 0:\n    return None\n\nif target &gt;= lon[0]:\n    # add one of the first number; recur\n    result = sum_to_target(target - lon[0], lon)\n    return result + [lon[0]] if result else None\n\n# Done with this number; try the rest of the list\nresult = sum_to_target(target, lon[1:])\nreturn result if result else None\n</code></pre>\n\n<p>Try every step both with and without the first number of the list.\nIf you exceed the target or run out of numbers, you fail.\nIf you hit the target exactly, you succeed: build the valid set of numbers as you crawl back up the call stack.</p>\n\n<p>Note that I've left the problem of concatenating all solutions as an exercise for you ... as well as some debugging and boundary details.</p>\n"}], "owner": {"reputation": 279, "user_id": 7016928, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a04bf498c82dacd1e43ee8967877866c?s=128&d=identicon&r=PG&f=1", "display_name": "vikky 2405", "link": "https://stackoverflow.com/users/7016928/vikky-2405"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 44424398, "answer_count": 1, "score": 0, "last_activity_date": 1496878572, "creation_date": 1496876238, "question_id": 44424039, "link": "https://stackoverflow.com/questions/44424039/generating-all-possible-combinations-inefficient", "title": "Generating all possible combinations inefficient", "body": "<p>Code to generate all possible combinations of a list of numbers and fetch combinations  with a particular sum:</p>\n\n<pre><code>combos = []\n\nfor each in combinations_with_replacement(list, number):\n    if sum(list(map(int, each))) == particular_number:\n        combos.append(list(map(int, each)))\n</code></pre>\n\n<p>the code is working perfectly fine. But the problem is if the number argument in the function <strong>combinations_with_replacement</strong> is more than 8 it is taking a lot of time. Is there a optimized way my logic can be replaced with? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1496876058, "post_id": 44424008, "comment_id": 75846426, "body": "You call it with an asterisk for tuple unpacking, so <code>pow(*c)</code>..."}, {"owner": {"reputation": 95, "user_id": 7871890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6a320d449cca777eba028156f52d898?s=128&d=identicon&r=PG&f=1", "display_name": "Hitopopamus", "link": "https://stackoverflow.com/users/7871890/hitopopamus"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1496876129, "post_id": 44424008, "comment_id": 75846449, "body": "Thank you. Is this method safe though? Will it unpack the tuple in its original inner order?"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1496876234, "post_id": 44424008, "comment_id": 75846492, "body": "Yes, tuples are ordered and remain the same order when unpacked"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1496876341, "post_id": 44424008, "comment_id": 75846544, "body": "Yes, it always unpacks the tuple in the order of the elements. The elements you give to <code>pow</code> are unnamed, so the order in which the parameters of <code>pow</code> are defined is used."}], "owner": {"reputation": 95, "user_id": 7871890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6a320d449cca777eba028156f52d898?s=128&d=identicon&r=PG&f=1", "display_name": "Hitopopamus", "link": "https://stackoverflow.com/users/7871890/hitopopamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1496876192, "answer_count": 0, "score": 0, "last_activity_date": 1496876358, "creation_date": 1496876015, "last_edit_date": 1496876358, "question_id": 44424008, "link": "https://stackoverflow.com/questions/44424008/how-to-use-tuples-as-function-arguments", "closed_reason": "Duplicate", "title": "How to use tuples as function arguments?", "body": "<p>For example if we take the build-in function <code>pow</code>,\nand I have:</p>\n\n<pre><code>c= (2,3)\n</code></pre>\n\n<p>How do I calculate <code>pow(2,3)</code> using the tuple <code>c</code>?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 0, "creation_date": 1496876405, "post_id": 44424003, "comment_id": 75846564, "body": "objs = list(map(Interval, intervals)) should work"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 0, "creation_date": 1496876515, "post_id": 44424003, "comment_id": 75846608, "body": "@AlanLeuthard: it works, but then <code>s</code> will get a list as input, and <code>e</code> will be <code>0</code> for all cases..."}], "answers": [{"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1496876889, "post_id": 44424028, "comment_id": 75846727, "body": "Are you everywhere at this time of the night? hahaha, and also better answer... I must admit"}, {"owner": {"reputation": 747, "user_id": 1022894, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/256a5e324a8815f390860c4a09efa40d?s=128&d=identicon&r=PG", "display_name": "Pritam", "link": "https://stackoverflow.com/users/1022894/pritam"}, "edited": false, "score": 0, "creation_date": 1496877119, "post_id": 44424028, "comment_id": 75846798, "body": "Ah! starmap, this is what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1496876472, "last_edit_date": 1496876472, "creation_date": 1496876142, "answer_id": 44424028, "question_id": 44424003, "link": "https://stackoverflow.com/questions/44424003/python-call-class-with-inputs-from-list/44424028#44424028", "title": "Python call class with inputs from list", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/itertools.html#itertools.starmap\" rel=\"nofollow noreferrer\"><code>starmap</code></a> from <code>itertools</code>:</p>\n\n<pre><code><b>from itertools import starmap</b>\n\nobjs = <b>starmap</b>(Interval,intervals)</code></pre>\n\n<p>Mind that <code>starmap</code> works lazily (like <code>map</code> in Python-3.x) and that you will need to materialize it, for instance using <code>list(..)</code>:</p>\n\n<pre><code>&gt;&gt;&gt; list(objs)\n[&lt;__main__.Interval object at 0x7efbf7e82358&gt;, &lt;__main__.Interval object at 0x7efbf7e82390&gt;, &lt;__main__.Interval object at 0x7efbf7e823c8&gt;, &lt;__main__.Interval object at 0x7efbf7e82400&gt;, &lt;__main__.Interval object at 0x7efbf7e82438&gt;]\n</code></pre>\n\n<p>If you do not want to use the <code>itertools</code> library, an equivalent is:</p>\n\n<pre><code>objs = map(<b>lambda x: Interval(*x)</b>,intervals)</code></pre>\n\n<p>As far as I know, that's why they call it <em>star</em>map: because of the asterisk if you would use a lambda expression.</p>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1496876849, "creation_date": 1496876849, "answer_id": 44424138, "question_id": 44424003, "link": "https://stackoverflow.com/questions/44424003/python-call-class-with-inputs-from-list/44424138#44424138", "title": "Python call class with inputs from list", "body": "<p>Maybe you can try also the old-school way:</p>\n\n<pre><code>class Interval(object):\n    def __init__(self, s=0, e=0):\n        self.start = s\n        self.end = e\n\n\ndef map_intervals(intervals):\n        ret = []\n        for inter in intervals:\n          ret.append(Interval(inter[0],inter[1]))\n        return ret\ninters = [[1,2],[3,5],[6,7],[8,10],[12,16]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "is_accepted": false, "score": 2, "last_activity_date": 1496876850, "creation_date": 1496876850, "answer_id": 44424139, "question_id": 44424003, "link": "https://stackoverflow.com/questions/44424003/python-call-class-with-inputs-from-list/44424139#44424139", "title": "Python call class with inputs from list", "body": "<p>This worked for me.</p>\n\n<pre><code>&gt;&gt;&gt; objs = []\n&gt;&gt;&gt; for interval in intervals:\n...     objs.append(Interval(*interval))\n... \n&gt;&gt;&gt; objs\n[&lt;__main__.Interval object at 0x013E67D0&gt;, &lt;__main__.Interval object at 0x013E6910&gt;, &lt;__main__.Interval object at 0x013E68F0&gt;, &lt;__main__.Interval object at 0x013E6870&gt;, &lt;__main__.Interval object at 0x013E6950&gt;]\n&gt;&gt;&gt; objs[0]\n&lt;__main__.Interval object at 0x013E67D0&gt;\n&gt;&gt;&gt; objs[0].start\n1\n&gt;&gt;&gt; objs[0].end\n2\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 1022894, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/256a5e324a8815f390860c4a09efa40d?s=128&d=identicon&r=PG", "display_name": "Pritam", "link": "https://stackoverflow.com/users/1022894/pritam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 0, "accepted_answer_id": 44424028, "answer_count": 3, "score": 1, "last_activity_date": 1496876850, "creation_date": 1496875969, "last_edit_date": 1496876600, "question_id": 44424003, "link": "https://stackoverflow.com/questions/44424003/python-call-class-with-inputs-from-list", "title": "Python call class with inputs from list", "body": "<p>I have a class called Interval for which I want to create multiple interval objects from a list of intervals. How do I do it with map ?</p>\n\n<pre><code>class Interval(object):\n    def __init__(self, s=0, e=0):\n        self.start = s\n        self.end = e\n\nintervals = [[1,2],[3,5],[6,7],[8,10],[12,16]]\n</code></pre>\n\n<p>I tried to do:</p>\n\n<pre><code>objs = map(Interval, intervals)\n</code></pre>\n\n<p>But this sends the full interval as the first parameter rather than the inputs to the class individually. </p>\n"}, {"tags": ["python", "python-3.x", "import", "module", "python-import"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1496876213, "post_id": 44423985, "comment_id": 75846485, "body": "You need to import <code>modTwo</code> itself, not just <code>pacTwo</code>.  Modules inside a package aren&#39;t automatically imported just because you import the package."}, {"owner": {"reputation": 1733, "user_id": 2529482, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mqeW8.png?s=128&g=1", "display_name": "Joshua Strot", "link": "https://stackoverflow.com/users/2529482/joshua-strot"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1496876482, "post_id": 44423985, "comment_id": 75846594, "body": "@BrenBarn <code>globals()[&quot;pacOne.&quot; + module + &quot;.modTwo&quot;].testFunc()</code> does not work either when imported as <code>&quot;pacOne.&quot; + module + &quot;.modTwo&quot;</code>. Same error basically: <code>AttributeError: module &#39;pacOne.pacTwo.modTwo&#39; has no attribute &#39;testFunc&#39;</code>"}, {"owner": {"reputation": 1733, "user_id": 2529482, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mqeW8.png?s=128&g=1", "display_name": "Joshua Strot", "link": "https://stackoverflow.com/users/2529482/joshua-strot"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1496877554, "post_id": 44423985, "comment_id": 75846928, "body": "@BrenBarn I added new information I discovered from changing it to your recommendation."}], "owner": {"reputation": 1733, "user_id": 2529482, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mqeW8.png?s=128&g=1", "display_name": "Joshua Strot", "link": "https://stackoverflow.com/users/2529482/joshua-strot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496877416, "creation_date": 1496875843, "last_edit_date": 1496877416, "question_id": 44423985, "link": "https://stackoverflow.com/questions/44423985/accessing-nested-packages-from-top-level-with-importlib-python", "title": "Accessing nested packages from top level with importlib (python)", "body": "<p>I have a project hierarchy like the following simplified example:</p>\n\n<pre><code>\u251c\u2500\u2500 pacOne\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 pacTwo\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 modTwo.py\n\u2514\u2500\u2500 main.py\n</code></pre>\n\n<p>There's many more packages at the <code>pacTwo</code> level in my example, which I load according to a YAML file with the following function at <code>main.py</code>. It's a function because in the actual program, there's a little bit more that it does, which I've excluded for the relevence of this post.</p>\n\n<pre><code>def loadModules(modules):\n    for module in modules:\n        moduleImport = importlib.import_module(\"pacOne.\" + module)\n        globals()[\"pacOne.\" + module] = moduleImport\n</code></pre>\n\n<p>After importing the module, I cannot figure out how to access <code>modTwo</code>. It imports just fine, no errors, but once trying to access it I get errors saying <code>modTwo</code> is not an attribute of pacTwo.</p>\n\n<p>Here's an example of how I'm attempting to access <code>modTwo</code>:</p>\n\n<pre><code>globals()[\"pacOne.\" + module].modTwo.testFunc()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>AttributeError: module 'pacOne.pacTwo' has no attribute 'modTwo'\n</code></pre>\n\n<p>So the question is how can I access <code>modTwo.py</code> from <code>main.py</code> with <code>importlib</code> like above? Or is it simply impossible, because I just shouldn't be doing this?</p>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>Changing the import function to be like:</p>\n\n<pre><code>def loadModules(modules):\n    for module in modules:\n        moduleImport = importlib.import_module(\"pacOne.\" + module + \".modTwo\")\n        globals()[\"pacOne.\" + module + \".modTwo\"] = moduleImport\n</code></pre>\n\n<p>and accessing it like:</p>\n\n<pre><code>globals()[\"pacOne.\" + module + \".modTwo\"].testFunc()\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>AttributeError: module 'pacOne.pacTwo.modTwo' has no attribute 'testFunc'\n</code></pre>\n\n<p>Which is weird, because when I inspect it with <code>inspect</code> like:</p>\n\n<pre><code>print(inspect.getmembers(moduleImport, inspect.isfunction))\n</code></pre>\n\n<p>I find:</p>\n\n<pre><code>[('testFunc', &lt;function testFunc at 0x7f5878df4d08&gt;)]\n</code></pre>\n\n<p>I'm not really sure what to make out of that. I can only assume I need to call it differently, but I have no idea how.</p>\n"}, {"tags": ["python", "node.js", "http", "express", "server"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 4955885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/579eb64ed01f53a51e971f71ec6dace0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Gupta", "link": "https://stackoverflow.com/users/4955885/nikita-gupta"}, "edited": false, "score": 0, "creation_date": 1496883344, "post_id": 44424950, "comment_id": 75848387, "body": "and how to pass the parameters so that python program can accept it as sys.argv and return a json"}, {"owner": {"reputation": 385, "user_id": 4955885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/579eb64ed01f53a51e971f71ec6dace0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Gupta", "link": "https://stackoverflow.com/users/4955885/nikita-gupta"}, "edited": false, "score": 1, "creation_date": 1496885538, "post_id": 44424950, "comment_id": 75848859, "body": "var arg1 = req.params.value1;     var arg2 = req.params.value2; const ls = spawn(&#39;python&#39;, [&#39;script.py&#39;, arg1, arg2]); Is this correct?"}, {"owner": {"reputation": 4089, "user_id": 5371505, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh3.googleusercontent.com/-bdjlTLtK0iA/AAAAAAAAAAI/AAAAAAAAACw/-JrM5TFzjhc/photo.jpg?sz=128", "display_name": "PirateApp", "link": "https://stackoverflow.com/users/5371505/pirateapp"}, "edited": false, "score": 0, "creation_date": 1550721922, "post_id": 44424950, "comment_id": 96375472, "body": "upvoted but what do I do if I want an infinite python process running and express needs to communicate with that"}], "tags": [], "owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "is_accepted": true, "score": 5, "last_activity_date": 1496883727, "last_edit_date": 1496883727, "creation_date": 1496882982, "answer_id": 44424950, "question_id": 44423931, "link": "https://stackoverflow.com/questions/44423931/calling-python-script-with-node-js-express-server/44424950#44424950", "title": "Calling python script with node js express server", "body": "<p>To run a Python script from Node.js would require spawning a new process.\nYou can do that with <a href=\"https://nodejs.org/api/child_process.html\" rel=\"noreferrer\">child_process</a>.</p>\n\n<p>You would run <code>python</code> as the executable and give your script name as the first argument.</p>\n\n<p>Here is an example based on the documentation linked above:</p>\n\n<pre><code>const spawn = require('child_process').spawn;\nconst ls = spawn('python', ['script.py', 'arg1', 'arg2']);\n\nls.stdout.on('data', (data) =&gt; {\n  console.log(`stdout: ${data}`);\n});\n\nls.stderr.on('data', (data) =&gt; {\n  console.log(`stderr: ${data}`);\n});\n\nls.on('close', (code) =&gt; {\n  console.log(`child process exited with code ${code}`);\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 3430612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f828342aa181f0715f1ef0c8c0d400?s=128&d=identicon&r=PG", "display_name": "eafloresf", "link": "https://stackoverflow.com/users/3430612/eafloresf"}, "is_accepted": false, "score": 0, "last_activity_date": 1517778729, "creation_date": 1517778729, "answer_id": 48613059, "question_id": 44423931, "link": "https://stackoverflow.com/questions/44423931/calling-python-script-with-node-js-express-server/48613059#48613059", "title": "Calling python script with node js express server", "body": "<p>If you want to execute it with params</p>\n\n<pre><code>const scriptExecution = spawn(pythonExecutable, [\"my_Script.py\", \"Argument 1\",\"Argument 2\"]);\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 4955885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/579eb64ed01f53a51e971f71ec6dace0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Gupta", "link": "https://stackoverflow.com/users/4955885/nikita-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5626, "favorite_count": 0, "accepted_answer_id": 44424950, "answer_count": 2, "score": 2, "last_activity_date": 1517778729, "creation_date": 1496875520, "last_edit_date": 1496882568, "question_id": 44423931, "link": "https://stackoverflow.com/questions/44423931/calling-python-script-with-node-js-express-server", "title": "Calling python script with node js express server", "body": "<p>With below code I have created a HTTP server on port 3000 and have added some get parameters. I want to invoke a python script with this express.js server code such that when I hit localhost:3000/key1/abc/key2/234 python script will get invoked. I've my python script ready which takes input args as sys.argv. Please suggest how to call python script with this code so that it will take value1 and value 2 as input arguments and return json.</p>\n\n<pre><code>var express = require('express');\nvar app = express();\napp.get('/key1/:value1/key2/:value2',function(req,res)\n{\n    console.log(req.params);\n    var value1 = req.params.value1;\n    var value2 = req.params.value2;\n    res.send(req.params);\n});\napp.listen(3000,function()\n{\n    console.log(\"Server listening on port 3000\");\n});\n</code></pre>\n"}, {"tags": ["python", "numpy", "graph", "colors", "average"], "comments": [{"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496877612, "post_id": 44423907, "comment_id": 75846945, "body": "This looks strangely familiar :) By the way you have a typo in the 4th-from-last line, blue should be red."}, {"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496877796, "post_id": 44423907, "comment_id": 75847001, "body": "I still can&#39;t clearly understand what is wrong. Can you give an example of &quot;seems to repeat some average values&quot;? If the second loop is not producing any output, you could insert some debugging print statements at the top of the loop and after each <code>if</code> statement."}, {"owner": {"reputation": 39, "user_id": 8121865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/43557387e8d55e6521464184348f3765?s=128&d=identicon&r=PG&f=1", "display_name": "Danny.Tran2018", "link": "https://stackoverflow.com/users/8121865/danny-tran2018"}, "reply_to_user": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496878333, "post_id": 44423907, "comment_id": 75847164, "body": "Image of what was ran: <a href=\"http://imgur.com/KExYXJy\" rel=\"nofollow noreferrer\">imgur.com/KExYXJy</a> ....As I go through all the information, the second loop for BGR averages for second color was not shown. After I figure this out, I need to somehow get the average values of each well in a column and average them together."}, {"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496878618, "post_id": 44423907, "comment_id": 75847236, "body": "It&#39;s better to copy and paste text as text rather than screenshots or photos, but I think I have understood what is going on. Posting an answer ..."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496879211, "post_id": 44424446, "comment_id": 75847398, "body": "So in particular you never got <code>center[0]&gt;360</code> because it was a colour value 0..255."}], "tags": [], "owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1496878990, "creation_date": 1496878990, "answer_id": 44424446, "question_id": 44423907, "link": "https://stackoverflow.com/questions/44423907/looking-for-average-bgr-values-for-each-column-in-each-color/44424446#44424446", "title": "Looking for average BGR values for each column in each color", "body": "<p>The huge array <code>wells</code> at the beginning looks cumbersome and repetitive. It could be improved by creating lists of the X/Y positions of columns A-H and rows 1-12.</p>\n\n<p>And this is the source of your errors: in the loops, you're parsing <code>center</code> as if it is the x,y position, but in fact it is the pixel retrieved from <code>img</code>.</p>\n\n<p>Instead something like:</p>\n\n<pre><code>columns = [110,124,160] # give 8 values for columns A-H\nrows = [97, 165, 235] # give 12 values for rows 1-12\n#...\nfor row = 0 to 3:\n    for column = 0 to 7:\n        center_column = columns[column]\n        center_row = rows[row]\n        #... get img pixels and process b,g,r values\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496932268, "post_id": 44425640, "comment_id": 75874633, "body": "More effort than I put in :)"}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": false, "score": 1, "last_activity_date": 1496888557, "creation_date": 1496888557, "answer_id": 44425640, "question_id": 44423907, "link": "https://stackoverflow.com/questions/44423907/looking-for-average-bgr-values-for-each-column-in-each-color/44425640#44425640", "title": "Looking for average BGR values for each column in each color", "body": "<p>Here's how I would rewrite your code:</p>\n\n<pre><code>import cv2\nfrom itertools import product\nimport numpy as np\nimport sys\n\n# image coordinates\nROWS = (891, 820, 750, 680, 607, 537, 466, 396, 324, 254, 184, 110)   # rows 1..12\nCOLS = (582, 511, 442, 373, 305, 235, 165, 97)                        # cols A..H\n\ndef get_rect_avg_color(img, x, y, w=8, h=8):\n    \"\"\"\n    Return the BGR average color of a rectangular area of the image\n      centered on (x,y) with width w and height h\n    \"\"\"\n    half_w = w // 2\n    half_h = h // 2\n    # extract the rectangular area\n    rect = img[x - half_w: x + (w - half_w) + 1, y - half_h: y + (h - half_h) + 1]\n    # average each channel independantly\n    avg_col = rect.mean(axis=(0,1))\n    return avg_col    # returns [avg_b, avg_g, avg_r]\n\ndef get_cells_avg_color(img, cells):\n    \"\"\"\n    Return the BGR average color of a list of cells\n    \"\"\"\n    cell_colors = np.vstack(get_rect_avg_color(img, *cell) for cell in cells)\n    return cell_colors.mean(axis=0)    # returns [avg_b, avg_g, avg_r]\n\ndef get_cells(col_from, col_to, row_from, row_to):\n    \"\"\"\n    Return a list of all cells in a rectangular block\n\n    col_from, col_to  in \"A\"..\"H\"\n    row_from, row_to  in 1..12\n\n    col_to and row_to are inclusive\n    \"\"\"\n    col_from  = ord(col_from.upper()) - ord(\"A\")\n    col_to    = ord(col_to  .upper()) - ord(\"A\")\n    col_from, col_to = min(col_from, col_to), max(col_from, col_to)\n    row_from -= 1\n    row_to   -= 1\n    row_from, row_to = min(row_from, row_to), max(row_from, row_to)\n    return product(ROWS[row_from:row_to + 1], COLS[col_from:col_to + 1])\n\ndef main(img_fname):\n    img = cv2.imread(img_fname)\n\n    first_cells = get_cells(\"A\", \"G\", 9, 12)\n    first_avg = get_cells_avg_color(img, first_cells)\n    print(\"First color average: blue {:0.2f}, green {:0.2f}, red {:0.2f}\".format(*first_avg))\n\n    second_cells = get_cells(\"A\", \"G\", 5, 8)\n    second_avg = get_cells_avg_color(img, second_cells)\n    print(\"Second color average: blue {:0.2f}, green {:0.2f}, red {:0.2f}\".format(*second_avg))\n\nif __name__ == \"__main__\":\n    if len(sys.argv) == 2:\n        main(sys.argv[1])\n    else:\n        print(\"Usage: python {} plate.jpg\".format(__name__))\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8121865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/43557387e8d55e6521464184348f3765?s=128&d=identicon&r=PG&f=1", "display_name": "Danny.Tran2018", "link": "https://stackoverflow.com/users/8121865/danny-tran2018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 44424446, "answer_count": 2, "score": 0, "last_activity_date": 1496888557, "creation_date": 1496875320, "last_edit_date": 1496876553, "question_id": 44423907, "link": "https://stackoverflow.com/questions/44423907/looking-for-average-bgr-values-for-each-column-in-each-color", "title": "Looking for average BGR values for each column in each color", "body": "<p>We are working on a code that looks at a 96-well plate. We have the centers coordinates of each well. We then created a for loop that would allow us get the BGR value of each well. However, we need to somehow organize each column and average those values. I believe that we are getting an error from the first loop. With this one, it seems like the function only goes through the first loop and not the second one. When I run it, I get 3 values (assuming to be bgr values) and then proceeds to push out the averages. It also seems to repeat some average values. Any suggestions to what I can change, or errors at first-look. I will provide the image and legend below.</p>\n\n<p>Links to images are: \n<a href=\"https://imgur.com/Eb87ZxW\" rel=\"nofollow noreferrer\">http://imgur.com/Eb87ZxW</a> (the image was scaled, so the coordinates may not work with the uploaded image)\n<a href=\"https://imgur.com/P4tPPXX\" rel=\"nofollow noreferrer\">http://imgur.com/P4tPPXX</a></p>\n\n<pre><code>import cv2, numpy as np, sys\n\n#filename will be taken from the command line and process as the image variable\n#filename= sys.argv([1])\nimg = cv2.imread('greenandblueplate.jpg')\n\n#centroids\nwells = [img[110,97], img[184,97], img[254,97], img[324,97], img[396,96], img[466,97], #columnH 12-7\n         img[537,96], img[607,97], img[680,96], img[750,97], img[820,96], img[891,97], #columnH 6-1\n         img[110,165],img[184,165],img[254,165],img[324,165],img[396,165],img[466,165], #columnG 12-7\n         img[537,165],img[607,165],img[680,165],img[750,166],img[820,165],img[891,165], #columnG 6-1\n         img[110,235],img[184,235],img[254,235],img[324,235],img[396,235],img[466,235], #columnF 12-7\n         img[537,235],img[607,235],img[680,235],img[750,235],img[820,235],img[891,235], #columnF 6-1\n         img[110,305],img[184,305],img[254,305],img[324,305],img[396,305],img[466,305], #columnE 12-7\n         img[537,305],img[607,305],img[680,305],img[750,305],img[820,305],img[891,305], #columnE 6-1\n         img[110,373],img[184,373],img[254,373],img[324,373],img[396,373],img[466,373], #columnD 12-7\n         img[537,373],img[607,373],img[680,373],img[750,372],img[820,373],img[891,373], #columnD 6-1\n         img[110,442],img[184,442],img[254,442],img[324,442],img[396,442],img[466,442], #columnC 12-7\n         img[537,442],img[607,442],img[680,442],img[750,443],img[820,442],img[891,442], #columnC 6-1\n         img[109,511],img[184,511],img[254,511],img[324,511],img[396,511],img[466,511], #columnB 12-7\n         img[537,512],img[607,512],img[680,511],img[750,511],img[820,511],img[891,511], #columnB 6-1\n         img[109,582],img[184,582],img[254,582],img[324,581],img[396,582],img[466,582], #columnA 12-7\n         img[537,581],img[607,582],img[680,582],img[750,581],img[820,582],img[891,582]] #columnA 6-1\n\nbAvgFilledWells = []\ngAvgFilledWells = []\nrAvgFilledWells = []\n\n#filtering out the centroids that are not needed\n#and getting the bgr values for the first color on the plate\nfor center in wells:\n    if center[1] &gt; 124:\n        if center[0] &lt; 360:\n            b = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 0]\n            g = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 1]\n            r = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 2]\n            bAvg = np.mean(b)\n            gAvg = np.mean(g)\n            rAvg = np.mean(r)\n\n            bAvgFilledWells.append(bAvg)\n            gAvgFilledWells.append(gAvg)\n            rAvgFilledWells.append(rAvg)\n            print(center)\n            print(\"For the first color, average value for blue is:\", bAvg)\n            print(\"For the first color, average value for green is:\", gAvg)\n            print(\"For the first color, average value for red is:\", rAvg)\n\n\nbAvgFilledWells2 = []\ngAvgFilledWells2 = []\nrAvgFilledWells2 = []\n\n#filtering out the centroids that are not needed\n#and getting the bgr values for the second color on the plate        \nfor center in wells:\n    if center[1] &gt; 124:\n        if center[0] &gt; 360 and center[0] &lt; 642:\n            b2 = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 0]\n            g2 = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 1]\n            r2 = img[center[0]-4: center[0]+5, center[1]-4: center[1]+5, 2]\n            bAvg2 = np.mean(b2)\n            gAvg2 = np.mean(g2)\n            rAvg2 = np.mean(r2)\n\n            print(center)\n            print(\"For the second color, average value for blue is:\", bAvg2)\n            print(\"For the second color, average value for green is:\", gAvg2)\n            print(\"For the second color, average value for blue is:\", rAvg2)\n            bAvgFilledWells2.append(bAvg2)\n            gAvgFilledWells2.append(gAvg2)\n            rAvgFilledWells2.append(rAvg2)\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "bezier"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1496938771, "post_id": 44423889, "comment_id": 75879459, "body": "<code>path1.to_polygons()</code> shows the same behaviour, in case that is interesting. <a href=\"https://github.com/matplotlib/matplotlib/blob/master/src/_path.h\" rel=\"nofollow noreferrer\">This is the place</a> to go to see why this is happening. It seems to do some kind of ray tracing, to find the interior points, which I imagine is not the most accurate method,  and not the most understandable either. At this point I&#39;m lost; but if you feel like it&#39;s a bug, why not report it on the GitHub rep."}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1496944968, "post_id": 44423889, "comment_id": 75882970, "body": "Huh, I wonder if those two things use the same underlying code.  I went chasing from the place you specified and managed to run across some things called &quot;approximation_method&quot; deep in the agg code, but like you I got completely lost.  I was hoping there was some sort of approximation fidelity I could specify, but I couldn&#39;t find one in the public API."}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1496945404, "post_id": 44423889, "comment_id": 75883196, "body": "I&#39;m not sure if it&#39;s a bug or an enhancement request ... although the apparent approximation points don&#39;t actually look like they&#39;re on the curve anyway..."}], "answers": [{"tags": [], "owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "is_accepted": true, "score": 1, "last_activity_date": 1497464825, "creation_date": 1497464825, "answer_id": 44552090, "question_id": 44423889, "link": "https://stackoverflow.com/questions/44423889/path-contains-points-yields-incorrect-results-with-bezier-curve/44552090#44552090", "title": "Path &#39;contains_points&#39; yields incorrect results with Bezier curve", "body": "<p>This has to do with the space in which the paths are evaluated, as explained in GitHub issue <a href=\"https://github.com/matplotlib/matplotlib/issues/6076\" rel=\"nofollow noreferrer\">#6076</a>. From a comment by mdboom there:</p>\n\n<blockquote>\n  <p>Path intersection is done by converting the curves to line segments\n  and then converting the intersection based on the line segments. This\n  conversion happens by \"sampling\" the curve at increments of 1.0. This\n  is generally the right thing to do when the paths are already scaled\n  in display space, because sampling the curve at a resolution finer\n  than a single pixel doesn't really help. However, when calculating the\n  intersection in data space as you've done here, we obviously need to\n  sample at a finer resolution.</p>\n</blockquote>\n\n<p>This is discussing intersections, but <code>contains_points</code> is also affected. This enhancement is still open so we'll have to see if it is addressed in the next milestone.  In the meantime, there are a couple options:</p>\n\n<p><strong>1)</strong> If you are going to be displaying a patch anyway, you can use the display transformation. In the example above, adding the following demonstrates the correct behavior (based on a comment by tacaswell on duplicate issue <a href=\"https://github.com/matplotlib/matplotlib/issues/8734\" rel=\"nofollow noreferrer\">#8734</a>, now closed):</p>\n\n<pre><code># Work in transformed (pixel) coordinates\nhit_patch = path1.transformed(ax.transData)\ntf1 = hit_patch.contains_points(ax.transData.transform(pts)).reshape(nx, ny)\n\nax.imshow(tf2.T, origin='lower', extent=(x[0], x[-1], y[0], y[-1]))\n</code></pre>\n\n<p><strong>2)</strong> If you aren't using a display and just want to calculate using a path, the best bet is to simply form the Bezier curve yourself and make a path out of line segments. Replacing the formation of <code>path1</code> with the following calculation of <code>path2</code> will produce the desired result.</p>\n\n<pre><code>from scipy.special import binom\ndef bernstein(n, i, x):\n    coeff = binom(n, i)\n    return coeff * (1-x)**(n-i) * x**i\n\ndef bezier(ctrlpts, nseg):\n    x = np.linspace(0, 1, nseg)\n    outpts = np.zeros((nseg, 2))\n    n = len(ctrlpts)-1\n    for i, point in enumerate(ctrlpts):\n        outpts[:,0] += bernstein(n, i, x) * point[0]\n        outpts[:,1] += bernstein(n, i, x) * point[1]\n\n    return outpts\n\nverts1 = [(1.0, 1.5), (-2.0, 0.25), (-1.0, 0.0), (1.0, 0.5), (1.0, 1.5)]\nnsegments = 31\nverts2 = np.concatenate([bezier(verts1[:4], nsegments), np.array([verts1[4]])])\ncodes2 = [Path.MOVETO] + [Path.LINETO]*(nsegments-1) + [Path.CLOSEPOLY]\npath2 = Path(verts2, codes2)\n</code></pre>\n\n<p>Either method yields something that looks like the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DDDx7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DDDx7.png\" alt=\"true and false match bezier curve\"></a></p>\n"}], "owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 44552090, "answer_count": 1, "score": 3, "last_activity_date": 1497464825, "creation_date": 1496875239, "last_edit_date": 1496876269, "question_id": 44423889, "link": "https://stackoverflow.com/questions/44423889/path-contains-points-yields-incorrect-results-with-bezier-curve", "title": "Path &#39;contains_points&#39; yields incorrect results with Bezier curve", "body": "<p>I am trying to select a region of data based on a matplotlib <code>Path</code> object, but when the path contains a Bezier curve (not just straight lines), the selected region doesn't completely fill in the curve. It looks like it's trying, but the far side of the curve gets chopped off.</p>\n\n<p>For example, the following code defines a fairly simple closed path with one straight line and one cubic curve. When I look at the True/False result from the <code>contains_points</code> method, it does not seem to match either the curve itself or the raw vertices.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.path import Path\nfrom matplotlib.patches import PathPatch\n\n# Make the Path\nverts = [(1.0, 1.5), (-2.0, 0.25), (-1.0, 0.0), (1.0, 0.5), (1.0, 1.5)]\ncodes = [Path.MOVETO, Path.CURVE4, Path.CURVE4, Path.CURVE4, Path.CLOSEPOLY]\npath1 = Path(verts, codes)\n\n# Make a field with points to select\nnx, ny = 101, 51\nx = np.linspace(-2, 2, nx)\ny = np.linspace(0, 2, ny)\n\nyy, xx = np.meshgrid(y, x)\npts = np.column_stack((xx.ravel(), yy.ravel()))\n\n# Construct a True/False array of contained points\ntf = path1.contains_points(pts).reshape(nx, ny)\n\n# Make a PathPatch for display\npatch1 = PathPatch(path1, facecolor='c', edgecolor='b', lw=2, alpha=0.5)\n\n# Plot the true/false array, the patch, and the vertices\nfig, ax = plt.subplots()\nax.imshow(tf.T, origin='lower', extent=(x[0], x[-1], y[0], y[-1]))\nax.add_patch(patch1)\nax.plot(*zip(*verts), 'ro-')\n\nplt.show()\n</code></pre>\n\n<p>This gives me this plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vpRhf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vpRhf.png\" alt=\"true points do not completely fill the curve\"></a></p>\n\n<p>It looks like there is some sort of approximation going on - is this just a fundamental limitation of the calculation in matplotlib, or am I doing something wrong?</p>\n\n<p>I <em>can</em> calculate the points inside the curve myself, but I was hoping to not reinvent this wheel if I don't have to.</p>\n\n<p>It's worth noting that a simpler construction using quadratic curves does appear to work properly:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C9h3t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C9h3t.png\" alt=\"quadratic curves emulating a circle work fine\"></a></p>\n\n<p>I am using matplotlib 2.0.0.</p>\n"}, {"tags": ["python", "string", "python-2.7", "file", "readfile"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496875055, "post_id": 44423842, "comment_id": 75846140, "body": "<code>text = open(filename, &#39;w&#39;)</code>. That&#39;s it, you&#39;re set. Anyway, if you want to read from it again, you&#39;ll have to open it once more in <code>&#39;r&#39;</code> mode."}, {"owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496875207, "post_id": 44423842, "comment_id": 75846184, "body": "@Shiva Then it is giving error for text.read(), not opened in read mode."}, {"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 0, "creation_date": 1496875277, "post_id": 44423842, "comment_id": 75846216, "body": "@Mihir You need to open the file in read mode before you can read it."}, {"owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "reply_to_user": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 0, "creation_date": 1496875875, "post_id": 44423842, "comment_id": 75846375, "body": "@ILostMySpoon I opened my file with &#39;w&#39; and again open it with &#39;r&#39; for reading, it worked! But why &#39;w+&#39; is not working for both reading and writing ?"}], "answers": [{"comments": [{"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 0, "creation_date": 1496875554, "post_id": 44423911, "comment_id": 75846291, "body": "Might as well use <code>w+</code> seeing as the OP wants to erase the file&#39;s data before writing the new lines to it. This way he doesn&#39;t need to call <code>truncate</code> either."}, {"owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "edited": false, "score": 0, "creation_date": 1496875686, "post_id": 44423911, "comment_id": 75846329, "body": "I am also using truncate. So for reading + writing + truncate , we use &#39;w+&#39; then why can&#39;t I use it here ?"}, {"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "reply_to_user": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "edited": false, "score": 0, "creation_date": 1496875795, "post_id": 44423911, "comment_id": 75846357, "body": "@Mihir There is really no reason to call <code>truncate</code> if you are opening the file with <code>w+</code> other than showing that you can..."}, {"owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "reply_to_user": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 0, "creation_date": 1496880066, "post_id": 44423911, "comment_id": 75847609, "body": "@ILostMySpoon Done finally! Used text.seek(0) to set the pointer at the beginning and it worked."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1496875361, "creation_date": 1496875361, "answer_id": 44423911, "question_id": 44423842, "link": "https://stackoverflow.com/questions/44423842/python-printing-strings-from-another-file/44423911#44423911", "title": "Python: printing strings from another file", "body": "<p>So, your error (by your comments is that it isn't letting you read). </p>\n\n<p>This is because your trying to read using a file pointer which was used to open the file in write mode.</p>\n\n<pre><code>from sys import argv\nstring, filename = argv\nwith open(filename, 'w') as text:\n    line1 = \"hey\"\n    line2 = \"I was doing just fine before I met you\"\n    line3 = \"I drink too much and that's an issue but I'm okay\"\n    text.write('%s\\n%s\\n%s\\n' %(line1, line2, line3))\n\nwith open(filename, 'r') as text:\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "is_accepted": true, "score": 1, "last_activity_date": 1496886556, "creation_date": 1496886556, "answer_id": 44425391, "question_id": 44423842, "link": "https://stackoverflow.com/questions/44423842/python-printing-strings-from-another-file/44425391#44425391", "title": "Python: printing strings from another file", "body": "<p>So adding seek(0) will do the job here.\nseek(0) set the pointer at the beginning. \nHere's the working code:</p>\n\n<pre><code>    from sys import argv\n    string, filename = argv\n\n\n    text = open(filename, 'w+')\n    text.truncate()\n\n    line1 = \"hey\"\n    line2 = \"I was doing just fine before I met you\"\n    line3 = \"I drink too much and that's an issue but I'm okay\"\n\n    text.write('%s\\n%s\\n%s\\n' %(line1, line2, line3))\n    text.seek(0)\n    new = text.read()\n    text.seek(0)\n    old = text.readlines()\n    print \"%s\" %(new)\n    print old\n    text.seek(0)\n    print text.readlines()\n\n    text.close()\n</code></pre>\n\n<p>Output:</p>\n\n<p>hey\nI was doing just fine before I met you\nI drink too much and that's an issue but I'm okay</p>\n\n<p>['hey\\n', 'I was doing just fine before I met you\\n', \"I drink too much and that's an issue but I'm okay\\n\"]\n['hey\\n', 'I was doing just fine before I met you\\n', \"I drink too much and that's an issue but I'm okay\\n\"]</p>\n"}], "owner": {"reputation": 63, "user_id": 7774102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc6df66814d44918fa1716c68fa9600?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/7774102/mihir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 44425391, "answer_count": 2, "score": 1, "last_activity_date": 1496886556, "creation_date": 1496874948, "question_id": 44423842, "link": "https://stackoverflow.com/questions/44423842/python-printing-strings-from-another-file", "title": "Python: printing strings from another file", "body": "<p>I want to call a file, erase its data, write new lines and print it. \nBelow is my program and its output.</p>\n\n<pre><code>from sys import argv\nstring, filename = argv\ntext = open(filename, 'w+')\ntext.truncate()\nline1 = \"hey\"\nline2 = \"I was doing just fine before I met you\"\nline3 = \"I drink too much and that's an issue but I'm okay\"\ntext.write('%s\\n%s\\n%s\\n' %(line1, line2, line3))\nnew = text.read()\nold = text.readlines()\nprint \"%s\" %(new)\nprint old\nprint text.readlines()\ntext.close()\n</code></pre>\n\n<p>Output:</p>\n\n<p>[]\n[]</p>\n"}, {"tags": ["python", "unit-testing", "mocking", "aiohttp"], "comments": [{"owner": {"reputation": 8384, "user_id": 723891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/efa487837d848c7399dcbdea3c02bfb6?s=128&d=identicon&r=PG", "display_name": "Igonato", "link": "https://stackoverflow.com/users/723891/igonato"}, "edited": false, "score": 0, "creation_date": 1496884643, "post_id": 44423801, "comment_id": 75848664, "body": "In your code where you&#39;re making the call. Can you log <code>add_job_to_db.__module__</code>? Is it <code>export_api.main</code>?"}, {"owner": {"reputation": 8384, "user_id": 723891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/efa487837d848c7399dcbdea3c02bfb6?s=128&d=identicon&r=PG", "display_name": "Igonato", "link": "https://stackoverflow.com/users/723891/igonato"}, "edited": false, "score": 0, "creation_date": 1496885178, "post_id": 44423801, "comment_id": 75848765, "body": "Also, also the problem might be the asynchronous nature of the test. Can you patch something regular? Like <code>time.sleep</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 6819, "user_id": 140837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e6470f08d90f2d62f514b5b71ca5ca3f?s=128&d=identicon&r=PG", "display_name": "amirouche", "link": "https://stackoverflow.com/users/140837/amirouche"}, "is_accepted": true, "score": 1, "last_activity_date": 1500399969, "creation_date": 1500399969, "answer_id": 45173761, "question_id": 44423801, "link": "https://stackoverflow.com/questions/44423801/python-mock-with-aiohttp-isnt-mocking/45173761#45173761", "title": "Python Mock with Aiohttp isn&#39;t mocking", "body": "<p>Checklist:</p>\n\n<ol>\n<li>Use <a href=\"https://github.com/Martiusweb/asynctest/\" rel=\"nofollow noreferrer\">asynctest</a> package</li>\n<li>Don't forget to use <code>@asyncio.coroutine</code> decorator around the unit test</li>\n<li>Patch the object where it is used, in this case it <code>export_api.main.add_job_to_db</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 1759549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7264d99205f6e4f459402f43beeb82f?s=128&d=identicon&r=PG", "display_name": "mindflayer", "link": "https://stackoverflow.com/users/1759549/mindflayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1504298478, "creation_date": 1504298478, "answer_id": 46007722, "question_id": 44423801, "link": "https://stackoverflow.com/questions/44423801/python-mock-with-aiohttp-isnt-mocking/46007722#46007722", "title": "Python Mock with Aiohttp isn&#39;t mocking", "body": "<p>I'm the author of <a href=\"https://github.com/mindflayer/python-mocket\" rel=\"nofollow noreferrer\"><strong>mocket</strong></a> and few days ago I released the version <em>2.0.0</em> which fully supports <em>asyncio</em>/<em>aiohttp</em>.</p>\n\n<p>Here is the same example of code mocking a URL on HTTP and on HTTPS:</p>\n\n<pre><code>import aiohttp\nimport asyncio\nimport async_timeout\nfrom unittest import TestCase\n\nfrom mocket.mocket import mocketize\nfrom mocket.mockhttp import Entry\n\n\nclass AioHttpEntryTestCase(TestCase):\n    @mocketize\n    def test_http_session(self):\n        url = 'http://httpbin.org/ip'\n        body = \"asd\" * 100\n        Entry.single_register(Entry.GET, url, body=body, status=404)\n        Entry.single_register(Entry.POST, url, body=body*2, status=201)\n\n        async def main(l):\n            async with aiohttp.ClientSession(loop=l) as session:\n                with async_timeout.timeout(3):\n                    async with session.get(url) as get_response:\n                        assert get_response.status == 404\n                        assert await get_response.text() == body\n\n                with async_timeout.timeout(3):\n                    async with session.post(url, data=body * 6) as post_response:\n                        assert post_response.status == 201\n                        assert await post_response.text() == body * 2\n\n        loop = asyncio.get_event_loop()\n        loop.set_debug(True)\n        loop.run_until_complete(main(loop))\n\n    @mocketize\n    def test_https_session(self):\n        url = 'https://httpbin.org/ip'\n        body = \"asd\" * 100\n        Entry.single_register(Entry.GET, url, body=body, status=404)\n        Entry.single_register(Entry.POST, url, body=body*2, status=201)\n\n        async def main(l):\n            async with aiohttp.ClientSession(loop=l) as session:\n                with async_timeout.timeout(3):\n                    async with session.get(url) as get_response:\n                        assert get_response.status == 404\n                        assert await get_response.text() == body\n\n                with async_timeout.timeout(3):\n                    async with session.post(url, data=body * 6) as post_response:\n                        assert post_response.status == 201\n                        assert await post_response.text() == body * 2\n\n        loop = asyncio.get_event_loop()\n        loop.set_debug(True)\nloop.run_until_complete(main(loop))\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/mindflayer/python-mocket/blob/master/tests/tests35/test_http_aiohttp.py\" rel=\"nofollow noreferrer\">https://github.com/mindflayer/python-mocket/blob/master/tests/tests35/test_http_aiohttp.py</a></p>\n"}], "owner": {"reputation": 45, "user_id": 5017116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77af94ab7ee7621dcc49c957b6897031?s=128&d=identicon&r=PG", "display_name": "Lays Rodrigues", "link": "https://stackoverflow.com/users/5017116/lays-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "accepted_answer_id": 45173761, "answer_count": 2, "score": 2, "last_activity_date": 1504298478, "creation_date": 1496874721, "last_edit_date": 1496884704, "question_id": 44423801, "link": "https://stackoverflow.com/questions/44423801/python-mock-with-aiohttp-isnt-mocking", "title": "Python Mock with Aiohttp isn&#39;t mocking", "body": "<p>I'm using AioHttp to implement a service at work, and during my tests, I'm mocking a method, the issue is there the call for the method is calling the real instead of the mocked method.</p>\n\n<pre><code>@unittest_run_loop\n@patch('export_api.main.add_job_to_db')\nasync def test_view_job(self, mocked_method):\n    json = {\n        \"edl\": \"somedata\"\n    }\n    response = await self.client.request(\"PUT\", \"/v1/job\", json=json)\n    mocked_method.assert_called_once_with()\n    assert response.status == 200\n</code></pre>\n\n<p>So I get this error on the assertion of the mock:</p>\n\n<pre><code>msg = \"Expected 'add_job_to_db' to be called once. Called 0 times.\"\n</code></pre>\n\n<p>My method on the main.py:</p>\n\n<pre><code> async def __call__(self, request):\n    \"\"\"Faz post do Job na fila do Render\"\"\"\n    data = await request.json()\n    job_id = uuid.uuid4()\n    job = Jobs(\n        job_id=str(job_id),\n        body=data\n        )\n    try:\n        add_job_to_db(self.app['db'], job)\n        return web.Response(status=200)\n    except DatabaseError as e:\n        print(e)\n        return web.Response(status=500)\n</code></pre>\n\n<p>Yes, is a callable method inside a class. The test work fine without the mocking. But I need to mock the call for the db, and I'm not having luck so far.\nAny ideas?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 5, "creation_date": 1496917448, "post_id": 44423786, "comment_id": 75863458, "body": "&quot;<i>... would the code still work?</i>&quot; &lt;-- it&#39;s literally faster to just try this part than ask about it. Whenever you want to ask &quot;<i>does thing work in python?</i>&quot;, try it first. If the result baffles you, you&#39;ll be able to ask a more interesting and specific question."}, {"owner": {"reputation": 16143, "user_id": 3357935, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jaomO.png?s=128&g=1", "display_name": "Stevoisiak", "link": "https://stackoverflow.com/users/3357935/stevoisiak"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 11, "creation_date": 1521743742, "post_id": 44423786, "comment_id": 85874086, "body": "@AndrasDeak The question may be simple, but that doesn&#39;t mean it&#39;s not worth asking. Questions like these can be helpful for newer programmers, or for when the answer can&#39;t otherwise be found from a quick search."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 16143, "user_id": 3357935, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jaomO.png?s=128&g=1", "display_name": "Stevoisiak", "link": "https://stackoverflow.com/users/3357935/stevoisiak"}, "edited": false, "score": 2, "creation_date": 1521744046, "post_id": 44423786, "comment_id": 85874230, "body": "@StevenVascellaro I&#39;m not sure I understand your point. New programmers can also literally try it faster than ask or read about it :)"}, {"owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "edited": false, "score": 0, "creation_date": 1525195458, "post_id": 44423786, "comment_id": 87259417, "body": "...or where a user is wondering and not before a live python interpreter to actually try anything out. However I was wondering abbot the mental ergonomics aspect of this question, I know a log of legacy C++ static typed code somewhat artificially pushed leaf call stack dependency order to the top of file but when learning a codebase it may be best to order the functions for top down execution. With advanced IDEs capable of jumping to arbitrary positions it may not matter as much as it once did however."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 2, "creation_date": 1559201906, "post_id": 44423786, "comment_id": 99349218, "body": "@AndrasDeak However people that reach this question doesn&#39;t have exactly this code snippet in mind. Also note that the question actually consists of two where the second is not as simple to check as the first. Also note that in general this type of question is not possible to check if there&#39;s input involved (that would in general need to solve the stopping problem)."}], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 77, "last_activity_date": 1513697216, "last_edit_date": 1513697216, "creation_date": 1496874884, "answer_id": 44423829, "question_id": 44423786, "link": "https://stackoverflow.com/questions/44423786/does-the-order-of-functions-in-a-python-script-matter/44423829#44423829", "title": "Does the order of functions in a Python script matter?", "body": "<p>The only thing that Python cares about is that the name is defined when it is actually looked up. That's all. </p>\n\n<p>In your case, this is just fine, order doesn't really matter since you are just <em>defining</em> two functions. That is, you are just introducing two new names, no look-ups.</p>\n\n<p><em>Now</em>, if you <em>called</em> one of these (in effect, performed a look-up) and switched the order around:</p>\n\n<pre><code>def print_sum(a, b):\n    print(sum_numbers(a, b))\n\nprint_sum(2, 4)\n\ndef sum_numbers(a, b):\n    return a + b\n</code></pre>\n\n<p>you'd be in trouble (<code>NameError</code>) because it will try to find a name (<code>sum_numbers</code>) that just doesn't exist yet.</p>\n\n<p>So in general, yes, the order <em>does</em> matter; there's no hoisting of names in Python like there is in other languages (e.g JavaScript).</p>\n"}, {"comments": [{"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 2, "creation_date": 1559202383, "post_id": 44423849, "comment_id": 99349397, "body": "To be nitpicking there actually are cases where the order matters. If a symbol is being looked up as part of the definition/creation of the object the symbol must be defined earlier. An easy example is if you&#39;ve got default argument of a function, those are evaluated at definition time). Another example would be inheritance where the base classes must be defined first."}, {"owner": {"reputation": 340, "user_id": 8729073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b9hWWwzK20Y/AAAAAAAAAAI/AAAAAAAAAY0/UN73gFOj5mc/photo.jpg?sz=128", "display_name": "Alexandre Huat", "link": "https://stackoverflow.com/users/8729073/alexandre-huat"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1613466549, "post_id": 44423849, "comment_id": 117076711, "body": "Why not making an answer from your comment @skyking ?"}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 23, "last_activity_date": 1496874982, "creation_date": 1496874982, "answer_id": 44423849, "question_id": 44423786, "link": "https://stackoverflow.com/questions/44423786/does-the-order-of-functions-in-a-python-script-matter/44423849#44423849", "title": "Does the order of functions in a Python script matter?", "body": "<p>It doesn't matter in which order the functions are created. It only matters when the call to the function is done:</p>\n\n<pre><code>def print_sum(a, b):\n    print(sum_numbers(a, b))\n\ndef sum_numbers(a, b):\n    return a + b\n\nprint_sum(1, 3)\n# 4\n</code></pre>\n\n<p>that works because at the time <code>print_sum</code> is called both functions do exist. However if you call the function before defining <code>sum_numbers</code> it would fail because <code>sum_numbers</code> isn't defined yet:</p>\n\n<pre><code>def print_sum(a, b):\n    print(sum_numbers(a, b))\n\nprint_sum(1, 3)\n\ndef sum_numbers(a, b):\n    return a + b\n</code></pre>\n\n<p>throws:</p>\n\n<pre><code>---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n&lt;ipython-input-34-37c0e3733861&gt; in &lt;module&gt;()\n      2     print(sum_numbers(a, b))\n      3 \n----&gt; 4 print_sum(1, 3)\n      5 \n      6 def sum_numbers(a, b):\n\n&lt;ipython-input-34-37c0e3733861&gt; in print_sum(a, b)\n      1 def print_sum(a, b):\n----&gt; 2     print(sum_numbers(a, b))\n      3 \n      4 print_sum(1, 3)\n      5 \n\nNameError: name 'sum_numbers' is not defined\n</code></pre>\n"}], "owner": {"reputation": 1392, "user_id": 6533594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb40113ccda27e832d41311fc8a0977b?s=128&d=identicon&r=PG&f=1", "display_name": "flpn", "link": "https://stackoverflow.com/users/6533594/flpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28524, "favorite_count": 6, "accepted_answer_id": 44423829, "answer_count": 2, "score": 49, "last_activity_date": 1588875228, "creation_date": 1496874622, "last_edit_date": 1496917295, "question_id": 44423786, "link": "https://stackoverflow.com/questions/44423786/does-the-order-of-functions-in-a-python-script-matter", "title": "Does the order of functions in a Python script matter?", "body": "<p>Let's say I have two functions in my script: <code>sum_numbers</code> and <code>print_sum</code>. Their implementation is like this:</p>\n\n<pre><code>def sum_numbers(a, b):\n    return a + b\n\ndef print_sum(a, b):\n    print(sum_numbers(a, b))\n</code></pre>\n\n<p>So my question is: does the order in which the function are written matter? If I had written the <code>print_sum</code> function first and then the <code>sum_numbers</code>, would the code still work? If the answer is yes, does it always work?</p>\n"}, {"tags": ["python", "google-cloud-dataflow", "google-cloud-datalab"], "comments": [{"owner": {"reputation": 896, "user_id": 3386893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c483d62c99289a00994969d53beac6a?s=128&d=identicon&r=PG", "display_name": "Nef10", "link": "https://stackoverflow.com/users/3386893/nef10"}, "edited": false, "score": 1, "creation_date": 1496886576, "post_id": 44423769, "comment_id": 75849111, "body": "Can you edit your question to include a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> as well as the exact error message you are getting when trying to run this code?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8128248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567a3df3411023128cd00973d09a0177?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/8128248/divya"}, "edited": false, "score": 0, "creation_date": 1497634444, "post_id": 44425884, "comment_id": 76177829, "body": "We have attempted this, but it doesn&#39;t seem to be working (see edit above). Is there something else we&#39;re missing, or some issue with the DataflowRunner itself? (using a deprecated pip flag)"}, {"owner": {"reputation": 1416, "user_id": 5441818, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-jzTIEWDHa0g/AAAAAAAAAAI/AAAAAAAAAC4/JUuVvlAODC4/photo.jpg?sz=128", "display_name": "Chris Meyers", "link": "https://stackoverflow.com/users/5441818/chris-meyers"}, "reply_to_user": {"reputation": 21, "user_id": 8128248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567a3df3411023128cd00973d09a0177?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/8128248/divya"}, "edited": false, "score": 0, "creation_date": 1497890581, "post_id": 44425884, "comment_id": 76257354, "body": "Divya, Which version of Apache_beam are you using?"}, {"owner": {"reputation": 21, "user_id": 8128248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567a3df3411023128cd00973d09a0177?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/8128248/divya"}, "edited": false, "score": 0, "creation_date": 1497904536, "post_id": 44425884, "comment_id": 76264936, "body": "Looks like it was version 0.6.0. I upgraded to version 2.0.0 and got a different error in apache_beam/transforms/trigger.py: (ImportError: cannot import name TimestampCombiner), related to the second step in my pipeline.  When I comment out     <code>#  all_files = (all_files | &quot;Read file&quot; &gt;&gt; beam.FlatMap(read_file))</code> I again get the original CalledProcessError."}], "tags": [], "owner": {"reputation": 1416, "user_id": 5441818, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-jzTIEWDHa0g/AAAAAAAAAAI/AAAAAAAAAC4/JUuVvlAODC4/photo.jpg?sz=128", "display_name": "Chris Meyers", "link": "https://stackoverflow.com/users/5441818/chris-meyers"}, "is_accepted": false, "score": 3, "last_activity_date": 1496890518, "creation_date": 1496890518, "answer_id": 44425884, "question_id": 44423769, "link": "https://stackoverflow.com/questions/44423769/how-to-use-google-cloud-storage-in-dataflow-pipeline-run-from-datalab/44425884#44425884", "title": "How to use google cloud storage in dataflow pipeline run from datalab", "body": "<p>The most likely issue is that you need to have Dataflow install the <a href=\"https://pypi.python.org/pypi/datalab\" rel=\"nofollow noreferrer\">datalab pypi module</a>.</p>\n\n<p>Typically you would do this by listing \"datalab\" in the requirements.txt file you upload to Dataflow.  See <a href=\"https://cloud.google.com/dataflow/pipelines/dependencies-python\" rel=\"nofollow noreferrer\">https://cloud.google.com/dataflow/pipelines/dependencies-python</a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8128248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567a3df3411023128cd00973d09a0177?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/8128248/divya"}, "edited": false, "score": 0, "creation_date": 1498067119, "post_id": 44636227, "comment_id": 76349917, "body": "This would be better, but does this require the &quot;--save_main_session&quot; flag? That&#39;s currently giving me strange pickling errors..."}, {"owner": {"reputation": 1803, "user_id": 2984051, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b554b12f325eb6e30122d049e693b377?s=128&d=identicon&r=PG&f=1", "display_name": "bw4sz", "link": "https://stackoverflow.com/users/2984051/bw4sz"}, "edited": false, "score": 1, "creation_date": 1503590247, "post_id": 44636227, "comment_id": 78690786, "body": "@BradleyJiang can you just clarify your answer. By executing read_file, you are bringing the objects from gcp bucket to local system? They are stored in cwd()?, so further down in the pipeline, we could read them by supplying &quot;filepath&quot; or is that the location on the bucket, not the local system? I&#39;m confused whether this is passing the byte stream, or actually saving to a local path. I want to save."}], "tags": [], "owner": {"reputation": 424, "user_id": 5446282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549b20a1fbe68842b24dc21defdf390f?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Jiang", "link": "https://stackoverflow.com/users/5446282/bradley-jiang"}, "is_accepted": false, "score": 4, "last_activity_date": 1497891988, "creation_date": 1497891988, "answer_id": 44636227, "question_id": 44423769, "link": "https://stackoverflow.com/questions/44423769/how-to-use-google-cloud-storage-in-dataflow-pipeline-run-from-datalab/44636227#44636227", "title": "How to use google cloud storage in dataflow pipeline run from datalab", "body": "<p>If your only usage of pydatalab is to read from GCS, then I would suggest using Dataflow's gcsio. Code example:</p>\n\n<pre><code>def read_file(input_tuple):\n  filepath = input_tuple[0]\n  with beam.io.gcp.gcsio.GcsIO().open(filepath, 'r') as f:\n    # process f content\n    pass\n\n# File paths relative to the bucket\ninput_tuples = [(\"gs://bucket/file.jpg\", \"UNUSED_FILEPATH_2\")]\np = beam.Pipeline(options = options)\nall_files = (p | \"Create file path tuple\" &gt;&gt; beam.Create(input_tuples))\nall_files = (all_files | \"Read file\" &gt;&gt; beam.FlatMap(read_file))\np.run()\n</code></pre>\n\n<p>pydatalab is pretty heavy since it is more of an data exploration library used with Datalab or Jupyter. On the other hand, Dataflow's GCSIO is natively supported in pipeline.</p>\n"}], "owner": {"reputation": 21, "user_id": 8128248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567a3df3411023128cd00973d09a0177?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/8128248/divya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2637, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1497891988, "creation_date": 1496874553, "last_edit_date": 1497562445, "question_id": 44423769, "link": "https://stackoverflow.com/questions/44423769/how-to-use-google-cloud-storage-in-dataflow-pipeline-run-from-datalab", "title": "How to use google cloud storage in dataflow pipeline run from datalab", "body": "<p>We've been running a Python pipeline in datalab that reads image files from a bucket in google cloud storage (importing google.datalab.storage). Originally we were using DirectRunner and this worked fine, but now we're trying to use DataflowRunner, and we're having import errors. Even if we include \"import google.datalab.storage\" or any variant thereof inside the function run by the pipeline, we get errors such as \"No module named 'datalab.storage'\". We've also tried using the save_main_session, requirements_file, and setup_file flags with no luck. How would we correctly access image files in cloud storage buckets in a dataflow pipeline?</p>\n\n<p>EDIT: My original error was due to specifying the requirements_file flag with incorrect syntax (i.e. \"--requirements_file ./requirements.txt\"). I think I've fixed the syntax there, but now I'm getting a different error. Here's a basic version of the code we're trying to run- we have a pipeline that reads files from a storage bucket in Google Cloud.\nWe have a datalab notebook with a cell containing the following Python code:</p>\n\n\n\n<pre><code>import apache_beam as beam\nfrom apache_beam.utils.pipeline_options import PipelineOptions\nfrom apache_beam.utils.pipeline_options import GoogleCloudOptions\nfrom apache_beam.utils.pipeline_options import StandardOptions\nimport google.datalab.storage as storage\n\nbucket = \"BUCKET_NAME\"\nshared_bucket = storage.Bucket(bucket)\n\n# Create and set PipelineOptions. \noptions = PipelineOptions(flags = [\"--requirements_file\", \"./requirements.txt\"])\ngoogle_cloud_options = options.view_as(GoogleCloudOptions)\ngoogle_cloud_options.project = \"PROJECT_NAME\"\ngoogle_cloud_options.job_name = 'test-pipeline-requirements'\ngoogle_cloud_options.staging_location = 'gs://BUCKET_NAME/binaries'\ngoogle_cloud_options.temp_location = 'gs://BUCKET_NAME/temp'\noptions.view_as(StandardOptions).runner = 'DataflowRunner'\n\ndef read_file(input_tuple):\n  filepath = input_tuple[0]\n  shared_object = shared_bucket.object(filepath)\n  f = shared_object.read_stream()\n  # More processing of f's contents\n  return input_tuple\n\n# File paths relative to the bucket\ninput_tuples = [(\"FILEPATH_1\", \"UNUSED_FILEPATH_2\")]\np = beam.Pipeline(options = options)\nall_files = (p | \"Create file path tuple\" &gt;&gt; beam.Create(input_tuples))\nall_files = (all_files | \"Read file\" &gt;&gt; beam.FlatMap(read_file))\np.run()\n</code></pre>\n\n<p>Meanwhile there is a file named \"requirements.txt\" in the same directory as the notebook, with only the line</p>\n\n<pre><code>datalab==1.0.1\n</code></pre>\n\n<p>This code works fine if I use DirectRunner. However, when I use DataflowRunner, I get a CalledProcessError at \"p.run()\", with stack trace ending with the following:</p>\n\n<blockquote>\n  <p>/usr/local/lib/python2.7/dist-packages/apache_beam/runners/dataflow/internal/dependency.pyc in _populate_requirements_cache(requirements_file, cache_dir)<br>\n      224       '--no-binary', ':all:']<br>\n      225   logging.info('Executing command: %s', cmd_args)<br>\n  --> 226   processes.check_call(cmd_args)<br>\n      227<br>\n      228   </p>\n  \n  <p>/usr/local/lib/python2.7/dist-packages/apache_beam/utils/processes.pyc in check_call(*args, **kwargs)<br>\n       38   if force_shell:<br>\n       39     kwargs['shell'] = True<br>\n  ---> 40   return subprocess.check_call(*args, **kwargs)<br>\n       41<br>\n       42   </p>\n  \n  <p>/usr/lib/python2.7/subprocess.pyc in check_call(*popenargs, **kwargs)<br>\n      538         if cmd is None:<br>\n      539             cmd = popenargs[0]<br>\n  --> 540         raise CalledProcessError(retcode, cmd)<br>\n      541     return 0<br>\n      542   </p>\n  \n  <p>CalledProcessError: Command '['/usr/bin/python', '-m', 'pip', 'install', '--download', '/tmp/dataflow-requirements-cache', '-r', './requirements.txt', '--no-binary', ':all:']' returned non-zero exit status 1  </p>\n</blockquote>\n\n<p>It seems like the \"--download\" option is deprecated for pip, but that's part of the apache_beam code. I've also tried this with different ways of specifying \"requirements.txt\", with and without the \"--save_main_session\" flag, and with and without the \"--setup_file\" flag, but no dice.</p>\n"}, {"tags": ["python", "python-2.7", "list", "validation"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1496874527, "post_id": 44423738, "comment_id": 75845965, "body": "Lists do not have &quot;rows&quot; and &quot;columns&quot;. Please try to be <i>precise</i>"}, {"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496874542, "post_id": 44423738, "comment_id": 75845974, "body": "If you can add some code that constructs a sample of your nested list, answers are more likely to be in the right direction"}, {"owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "reply_to_user": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496876110, "post_id": 44423738, "comment_id": 75846442, "body": "@JoeP I&#39;ve added more code."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1496876428, "post_id": 44423738, "comment_id": 75846573, "body": "MMM i&#39;m still can&#39;t understand what do you want to achieve, can you put it in words? also an example list to input and how do you expect the output? that will help a lot!"}, {"owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1496984421, "post_id": 44423738, "comment_id": 75896201, "body": "@DamianLattenero ok an example list would be something like this:  <code>[[1,2,3],  [2,3,1],  [3,1,2]]</code>  The output would return True if numbers 1 to n appear once in the row and column and False if they don&#39;t. So I&#39;m checking to see if a sudoku square is valid(not sure if you play the game.)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1496874890, "post_id": 44423763, "comment_id": 75846089, "body": "@WillemVanOnsem Thank you. I just want to return True or False."}, {"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1496874900, "post_id": 44423763, "comment_id": 75846090, "body": "OP never really specified what was needed to be returned. I was merely showing a implementation of an iterative for loop and the program flow"}, {"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1496875022, "post_id": 44423763, "comment_id": 75846130, "body": "Edited to add returns"}], "tags": [], "owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "is_accepted": false, "score": 1, "last_activity_date": 1496874985, "last_edit_date": 1496874985, "creation_date": 1496874522, "answer_id": 44423763, "question_id": 44423738, "link": "https://stackoverflow.com/questions/44423738/how-to-run-a-function-for-each-row-in-a-nested-list/44423763#44423763", "title": "How to run a function for each row in a nested list?", "body": "<p>Are you looking for an iterative for loop?</p>\n\n<pre><code> check_sequence(list):\n    #your check here\n\n check_rows(list):\n     for row in list:\n         if not check_sequence(row):\n             return False\n     return True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1496874936, "post_id": 44423766, "comment_id": 75846101, "body": "I think this is brilliant, just perfect, but for someone who is starting is a lot to take in! don&#39;t you think? but, plus one for great answer"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1496874949, "last_edit_date": 1496874949, "creation_date": 1496874535, "answer_id": 44423766, "question_id": 44423738, "link": "https://stackoverflow.com/questions/44423738/how-to-run-a-function-for-each-row-in-a-nested-list/44423766#44423766", "title": "How to run a function for each row in a nested list?", "body": "<p>Given the nested list is <em>row oriented</em> (the rows are the lowest dimension), you can simply use:</p>\n\n<pre><code>check_rows(list):\n    return all(<b>check_sequence(sublist) for sublist in list</b>)</code></pre>\n\n<p>Here we thus use the <code>all(..)</code> builtin: it evaluates to <code>True</code> if and only if the <em>truthiness</em> of all elements the generator (boldface part) is <code>True</code>, otherwise the result is <code>False</code>. So from the moment one of the rows is not valid, the matrix is not valid.</p>\n\n<p>If on the other hand the nested list is <em>column oriented</em> (the columns are the lowest dimension), we will first need to do a <em>transpose</em> using <code>zip</code>:</p>\n\n<pre><code>check_rows(list):\n    return all(check_sequence(<b>list(sublist)</b>) for sublist in <b>zip(*</b>list<b>)</b>)</code></pre>\n\n<p>The <code>zip(*..)</code> transposes the <code>list</code> and we use <code>list(..)</code> to make sure that <code>check_sequence(..)</code> is still working with lists (if any iterable is sufficient, the <code>list(..)</code> part can be omitted.</p>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1496874961, "post_id": 44423805, "comment_id": 75846108, "body": "@WillemVanOnsem I was just providing an alternate solution to check for validity without needing to use functions... Have made a couple of edits."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1496876150, "post_id": 44423805, "comment_id": 75846455, "body": "@Shiva wow... that&#39;s a lot of functional understanding! plus one, really like it, but for someone who is starting, again, don&#39;t you think that&#39;s a lot to take in?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1496876312, "post_id": 44423805, "comment_id": 75846531, "body": "@DamianLattenero I agree. There are already excellent answers covering the basics. I wanted to give an answer to someone looking for a more pythonic solution to the same problem. :)"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1496876368, "post_id": 44423805, "comment_id": 75846551, "body": "@Shiva that&#39;s a cool way you have show, it&#39;s good to have more than one point of view"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1496874920, "last_edit_date": 1496874920, "creation_date": 1496874740, "answer_id": 44423805, "question_id": 44423738, "link": "https://stackoverflow.com/questions/44423738/how-to-run-a-function-for-each-row-in-a-nested-list/44423805#44423805", "title": "How to run a function for each row in a nested list?", "body": "<p>Here's a solution that'll work for any arbitrary 2D list.</p>\n\n<pre><code>l = [[1,2,3],[1,2],[1,4,5,6,7]]\ntry:\n    if len([1 for x in reduce(lambda x, y :x + y, l) if type(x) != type(0)]) &gt; 0:\n        raise Exception\n\ncatch Exception:\n   pass # error, do something \n</code></pre>\n\n<p>The intuition is to flatten the list and then successively check if its type is <code>int</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "edited": false, "score": 0, "creation_date": 1496875282, "post_id": 44423820, "comment_id": 75846220, "body": "In check_rows where you have <code>for elem in row:</code> when I pass in my check_sequence function after that will it check for that element only or the whole row?"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "edited": false, "score": 0, "creation_date": 1496875458, "post_id": 44423820, "comment_id": 75846269, "body": "@johnnewbie25 In check_rows, my bad name, will check only one row, it means, is a simple list of elements just like [1,2,3], do you understand?"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "edited": false, "score": 0, "creation_date": 1496875564, "post_id": 44423820, "comment_id": 75846293, "body": "@johnnewbie25 I can update the answer with an example, for example, check if every row has the number &quot;1&quot;, so you can see and then do you case, but better, could you add to the question what is your list, or a similar list of list, and your expected result?"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "edited": false, "score": 0, "creation_date": 1496875880, "post_id": 44423820, "comment_id": 75846378, "body": "@johnnewbie25 Also I updated the answer, see if it helps"}, {"owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "edited": false, "score": 0, "creation_date": 1496985201, "post_id": 44423820, "comment_id": 75896461, "body": "Ok, I think we are getting closer. The problem I was having is I don&#39;t know how to express in code how to use my check_sequence method that I have posted in my original question to check each row of a list. When I think of iterating through a list I think of choosing each item in that list and not the whole row. I&#39;m not quite sure what&#39;s happening in your check_rows method."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 1, "last_activity_date": 1496875855, "last_edit_date": 1496875855, "creation_date": 1496874848, "answer_id": 44423820, "question_id": 44423738, "link": "https://stackoverflow.com/questions/44423738/how-to-run-a-function-for-each-row-in-a-nested-list/44423820#44423820", "title": "How to run a function for each row in a nested list?", "body": "<p>You have to separate in two function, and think the first one will return the complete check for each value of the other:</p>\n\n<pre><code>def check_sequence(lis):\n  ret = True\n  for row in lis:\n    ret = ret and check_rows(row)\n  return ret\n\ndef check_rows(row):\n  ret = True\n  for elem in row:\n    pass #do your checking\n  return ret\n</code></pre>\n\n<p>a concrete example could be:</p>\n\n<pre><code>l = [[1,2,3],[1,2],[1,4,5,6,7]]\ndef check_sequence(lis):\n  ret = True\n  for row in lis:\n    ret = ret and check_rows(row)\n  return ret\n\ndef check_rows(row):\n  return 1 in row #ask if 1 belongs to the list\n\ncheck_sequence(l) ---&gt; True\ncheck_sequence([[1],[2,3]]) ---&gt; False\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 4954195, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24ef784d9569a9200ce4c893b698da7c?s=128&d=identicon&r=PG&f=1", "display_name": "johnnewbie25", "link": "https://stackoverflow.com/users/4954195/johnnewbie25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1496876090, "creation_date": 1496874338, "last_edit_date": 1496876090, "question_id": 44423738, "link": "https://stackoverflow.com/questions/44423738/how-to-run-a-function-for-each-row-in-a-nested-list", "title": "How to run a function for each row in a nested list?", "body": "<p>I'm a Python newbie and trying to write code that checks if a nested list has a valid set of numbers. Each row and each column have to be valid. I have written a function called check_sequence which validates if a list has a valid set of numbers. How would I call that function from another to check to see if the row is valid? So for example, I need something like this for check_rows:</p>\n\n<pre><code>check_sequence(list):\n  checks if list is valid\n\ncheck_rows(list):\n  For each of the rows in the nested list call check_sequence\n</code></pre>\n\n<p>Here is my code for check_sequence:</p>\n\n<pre><code>def check_sequence(mylist):\n    pos = 0\n    sequence_counter = 1\n    while pos &lt; len(mylist):\n        print \"The pos is: \" + \" \" + str(pos)\n        print \"The sequence_counter is:\" + \" \" + str(sequence_counter)\n        for number in mylist:\n            print \"The number is:\" + \" \" + str(number)\n            if number == sequence_counter:\n                sequence_counter = sequence_counter + 1\n                pos = pos + 1\n                break\n            else:\n                # if list is at the last position on the last item\n                if sequence_counter not in mylist:\n                    print \"The pos is:\" + \" \" + str(pos) + \" and the last position is:\"  + \" \"  + str(mylist[len(mylist) - 1])\n                    print \"False\"\n                    return False\n    print \"True\"\n    return True\n</code></pre>\n\n<p>So I'd call the main method like below:</p>\n\n<pre><code>check_square([[1, 2, 3],\n           [2, 3, 1],\n           [3, 1, 2]])\n\ndef check_square(list):\n   if check_rows() and check_columns() == True:\n       return True\n   else:\n       return False\n</code></pre>\n"}, {"tags": ["python", "string", "python-3.x", "input", "eval"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1496874374, "post_id": 44423730, "comment_id": 75845921, "body": "first of all... don&#39;t use <code>eval</code>..."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496874430, "post_id": 44423730, "comment_id": 75845939, "body": "You&#39;re better off using <code>json.loads</code>. Also, I would recommend you throw an error than break your head. If a user is going to enter input like that, chances are they&#39;re horsing around."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1496874456, "post_id": 44423730, "comment_id": 75845945, "body": "So, there are just double-quote chars randomly interspersed in the string? That&#39;s going to be hugely problematic to deal with in the general case."}, {"owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "edited": false, "score": 0, "creation_date": 1496877655, "post_id": 44423730, "comment_id": 75846952, "body": "Find another way to do this, eval is just leaving huge security holes in your code."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 8121607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1MgaT.png?s=128&g=1", "display_name": "JoshKopen", "link": "https://stackoverflow.com/users/8121607/joshkopen"}, "is_accepted": false, "score": 0, "last_activity_date": 1496874588, "creation_date": 1496874588, "answer_id": 44423780, "question_id": 44423730, "link": "https://stackoverflow.com/questions/44423730/eval-list-within-quotes/44423780#44423780", "title": "Eval list within quotes", "body": "<p>This is a somewhat difficult problem because it is hard for the computer to know which of the quotations are extraneous and which are the intended ones. The best solution which i can think of would be to first remove all double quotes and spaces, then add back in double quotes after any instance of the characters \"[\", insert a space and double quotes after any comma, and insert double quotes before every comma and \"]\". This is not an elegant solution and may take a few lines of code but unless you can sanitize the input earlier in the program this is probably the best solution.</p>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1496878087, "last_edit_date": 1496878087, "creation_date": 1496877055, "answer_id": 44424171, "question_id": 44423730, "link": "https://stackoverflow.com/questions/44423730/eval-list-within-quotes/44424171#44424171", "title": "Eval list within quotes", "body": "<p>I almost hate myself for doing this, but it may actually work. First, select a symbol that is not going to be entered by the user, ever (e.g., \u5b57 or ~). Then, remove the valid quotation marks at the beginning at the end and replace all <em>valid</em> quotation marks between items by that symbol:</p>\n\n<pre><code>s = '[\"Hello\", \"wor\",ld\"  , \" ]'\ns1 = re.sub(r\"(\\[\\s*\\\")|(\\\"\\s*,?\\s*\\])\", \"\", s)\n# 'Hello\", \"wor\",ld\"  , '\ns1 = re.sub(r\"\\\"\\s*,\\s*\\\"\", \"\u5b57\", s1)\n# 'Hello\u5b57wor\",ld\"  , '\n</code></pre>\n\n<p>Finally, escape all remaining double quotes, replace the funny symbols with the item separators, and add the brackets:</p>\n\n<pre><code>result = '[\"' + s1.replace('\"', r'\\\"').replace(\"\u5b57\",'\",\"') + '\"]'\n#'[\"Hello\",\"wor\\\\\",ld\\\\\"  , \"]'\nast.literal_eval(result)\n#['Hello', 'wor\",ld\"  , ']\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8128244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3addf9bab2fa9246b800d54c82106c95?s=128&d=identicon&r=PG&f=1", "display_name": "user399034", "link": "https://stackoverflow.com/users/8128244/user399034"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 897, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496878087, "creation_date": 1496874297, "question_id": 44423730, "link": "https://stackoverflow.com/questions/44423730/eval-list-within-quotes", "title": "Eval list within quotes", "body": "<p>I am writing a program in Python that takes in user input (not using Python's built-in <code>input</code>) that is a string that contains a list of strings, ie. <code>'[\"hello\", \"world\"]'</code>. However, some inputs will have multiple quotes inside, ie. <code>'[\"Hello\", \"wor\"ld\"]'</code>. I need the string to always <code>eval()</code> to a list. Any advice on cleansing the input string to ensure that it will always eval? Already tried <code>.replace('\"', '\\\"')</code>. </p>\n"}, {"tags": ["php", "python", "windows-8"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5753204, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fKNZ3.jpg?s=128&g=1", "display_name": "Asma", "link": "https://stackoverflow.com/users/5753204/asma"}, "edited": false, "score": 0, "creation_date": 1496875147, "post_id": 44423811, "comment_id": 75846170, "body": "Thank you, but I already try that, &amp; get that error : &#39;pecl&#39; n&#39;est pas reconnu en tant que commande interne ou externe, un programme ex&#233;cutable ou un fichier de commandes."}], "tags": [], "owner": {"reputation": 848, "user_id": 8121607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1MgaT.png?s=128&g=1", "display_name": "JoshKopen", "link": "https://stackoverflow.com/users/8121607/joshkopen"}, "is_accepted": false, "score": 1, "last_activity_date": 1496874804, "creation_date": 1496874804, "answer_id": 44423811, "question_id": 44423699, "link": "https://stackoverflow.com/questions/44423699/how-to-install-a-python-extension-for-php-on-windows-8/44423811#44423811", "title": "how to install a python extension for php on windows 8?", "body": "<p>In order to perform this command you're going to need to open up the command line in order to actually be able to have your computer run this. Here is a guide on how to use command line on a windows computer so that you can input the command which they suggested.</p>\n\n<p><a href=\"https://www.lifewire.com/how-to-open-command-prompt-2618089\" rel=\"nofollow noreferrer\">https://www.lifewire.com/how-to-open-command-prompt-2618089</a></p>\n"}], "owner": {"reputation": 91, "user_id": 5753204, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fKNZ3.jpg?s=128&g=1", "display_name": "Asma", "link": "https://stackoverflow.com/users/5753204/asma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496877044, "creation_date": 1496874034, "last_edit_date": 1496877044, "question_id": 44423699, "link": "https://stackoverflow.com/questions/44423699/how-to-install-a-python-extension-for-php-on-windows-8", "title": "how to install a python extension for php on windows 8?", "body": "<p>I want to know how to install a <a href=\"https://pecl.php.net/package/python/0.8.0\" rel=\"nofollow noreferrer\"><code>python extention</code></a> for <code>php</code> on <code>windows 8</code> ? </p>\n\n<p>This <code>extension</code> allows the <code>Python interpreter</code> to be embedded inside of <code>PHP</code>, allowing for the <code>instantiate</code> and <code>manipulation</code> of <code>Python objects</code> from within <code>PHP</code>.</p>\n\n<p>I found out that \"The easiest way to install the Perforce extension is by using the PECL installer\" : (depending on that <a href=\"https://github.com/jparise/php-python#installation\" rel=\"nofollow noreferrer\">guide</a>)</p>\n\n<pre><code>pecl install python\n</code></pre>\n\n<p>I try to run it with my command prompt but I get this error :</p>\n\n<blockquote>\n  <p>'pecl' n'est pas reconnu en tant que commande interne ou externe, un\n  programme ex\u00e9cutable ou un fichier de commandes.</p>\n</blockquote>\n\n<p>I found also a video in <code>YouTube</code> that shows <a href=\"https://www.youtube.com/watch?v=1EIl6Rokp1Q&amp;lc=z12yzx0rztmcg3w4204ccjpjutzajfpr5ig\" rel=\"nofollow noreferrer\">how to Add PECL Extensions to PHP on Windows</a>, but it wasn't useful for me because the package I downloaded has not any file that has an extension <code>.dll</code></p>\n\n<p>So please help me, what should I do ?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8060158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8caaad0844efb0fe15abd120ffbdb6e?s=128&d=identicon&r=PG&f=1", "display_name": "danrod13", "link": "https://stackoverflow.com/users/8060158/danrod13"}, "edited": false, "score": 0, "creation_date": 1496952995, "post_id": 44431708, "comment_id": 75887191, "body": "How do you read in data into this? I&#39;m trying to read in three separate datasets (wind speed, wind direction, and concentration) but it keeps giving a Value Error (not enough to unpack). All three arrays are (1341,). Your code works with the random filler data but not when I try and read my data in"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 81, "user_id": 8060158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8caaad0844efb0fe15abd120ffbdb6e?s=128&d=identicon&r=PG&f=1", "display_name": "danrod13", "link": "https://stackoverflow.com/users/8060158/danrod13"}, "edited": false, "score": 0, "creation_date": 1496953670, "post_id": 44431708, "comment_id": 75887523, "body": "Your data needs to be 2D arrays, just as in the example. Since I don&#39;t know your data, you need to figure that out yourself. You may look into <a href=\"https://stackoverflow.com/a/44355400/4124317\">this answer</a> for possible ways to obtain 2D data."}, {"owner": {"reputation": 81, "user_id": 8060158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8caaad0844efb0fe15abd120ffbdb6e?s=128&d=identicon&r=PG&f=1", "display_name": "danrod13", "link": "https://stackoverflow.com/users/8060158/danrod13"}, "edited": false, "score": 0, "creation_date": 1497289149, "post_id": 44431708, "comment_id": 76004469, "body": "Where should I read in the data? So if var1, var2, and var3 are wind speed, wind direction, and concentration of pollutant, respectively, how would I plot those into your function above? Let&#39;s say that all three are 2d arrays. I think I&#39;m getting caught up trying to read the data into the wrong spot."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 81, "user_id": 8060158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8caaad0844efb0fe15abd120ffbdb6e?s=128&d=identicon&r=PG&f=1", "display_name": "danrod13", "link": "https://stackoverflow.com/users/8060158/danrod13"}, "edited": false, "score": 0, "creation_date": 1497337405, "post_id": 44431708, "comment_id": 76021307, "body": "If all three input arrays are already 2D arrays of the same shape, <code>var1</code> would correspond to <code>R</code>, <code>var2</code> to <code>Theta</code> and <code>var3</code> to <code>C</code> in the above code. Mind that Theta and R need to form a grid and that <code>var2</code> must be in radiants."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 7, "last_activity_date": 1496913910, "creation_date": 1496913910, "answer_id": 44431708, "question_id": 44423694, "link": "https://stackoverflow.com/questions/44423694/plotting-windrose-making-a-pollution-rose-with-concentration-set-to-color/44431708#44431708", "title": "Plotting Windrose: making a pollution rose with concentration set to color", "body": "<p>The plots shown can be created using a <code>pcolormesh</code>. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ntheta = np.linspace(0,2*np.pi)\nr = np.linspace(2,15,16)\n\nTheta, R = np.meshgrid(theta, r)\nC = np.sinc(Theta-2)+(5-np.sqrt(R))+np.random.rand(len(r),len(theta))\nC = np.ma.masked_less_equal(C,2)\n\nfig, ax = plt.subplots(subplot_kw={\"projection\":\"polar\"})\n\nax.pcolormesh(Theta, R, C, vmin=2, vmax=5)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/itoCT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/itoCT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 81, "user_id": 8060158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8caaad0844efb0fe15abd120ffbdb6e?s=128&d=identicon&r=PG&f=1", "display_name": "danrod13", "link": "https://stackoverflow.com/users/8060158/danrod13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2872, "favorite_count": 1, "accepted_answer_id": 44431708, "answer_count": 1, "score": 4, "last_activity_date": 1594325976, "creation_date": 1496874007, "last_edit_date": 1496878443, "question_id": 44423694, "link": "https://stackoverflow.com/questions/44423694/plotting-windrose-making-a-pollution-rose-with-concentration-set-to-color", "title": "Plotting Windrose: making a pollution rose with concentration set to color", "body": "<p>Trying to plot a windrose diagram with speed and direction being plotted and the concentration determining the color. Unfortunately, matplotlib only supports two variables. Can make a nice scatter that shows what I want but not sure how to bin it so that it comes out like the image attached (Halliday et al 2016).</p>\n\n<p>Scatter plot that should be turned into windrose. Areas of high concentration marked by color</p>\n\n<p><img src=\"https://i.stack.imgur.com/bMegF.png\" alt=\"\"> </p>\n\n<p>image from paper that I would like to recreate</p>\n\n<p><img src=\"https://i.stack.imgur.com/dWWCA.png\" alt=\"\"></p>\n"}, {"tags": ["python", "tkinter", "widget", "pydev", "optionmenu"], "comments": [{"owner": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "edited": false, "score": 0, "creation_date": 1496882177, "post_id": 44423641, "comment_id": 75848104, "body": "Can I see the rest of the code?"}, {"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "reply_to_user": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "edited": false, "score": 0, "creation_date": 1496940211, "post_id": 44423641, "comment_id": 75880310, "body": "It&#39;s a lot code. lol Do you mind specifying? So I have a class for my Tk() window. &quot;var&quot; is initialized as shown above. I have that makeMenu function with those params within my class. My createWidgets function, no params, calls makeMenu to make the default menu using self.layout_menu = self.makeMenu(&quot;layout_menu&quot;, self.layout_sections, self.row_count, self.col_count). So what i&#39;m trying to do is when the user clicks on an item from a listbox, these menus get updated with corresponding values. When I try to update one with a value, all menus get updated with that value"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1496941502, "post_id": 44423641, "comment_id": 75881024, "body": "@E. Oregel: When Stiffy2000 is asking to see more code I believe he is referring to <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. We need to be able to test the code to see the overall problem."}, {"owner": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "edited": false, "score": 0, "creation_date": 1497141031, "post_id": 44423641, "comment_id": 75953559, "body": "I really do not think that you need <code>StringVar(master)</code>, you just need <code>StringVar()</code>"}, {"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "reply_to_user": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "edited": false, "score": 0, "creation_date": 1497290869, "post_id": 44423641, "comment_id": 76005351, "body": "@Stiffy2000 I was working on getting you the rest. Your solution works however! All menus were holding the same menu options. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "edited": false, "score": 0, "creation_date": 1506549992, "post_id": 44550149, "comment_id": 79871416, "body": "What happened was it was creating one var[0] for all of my menu&#39;s which meant that they were all basically controlled by one variable so anytime one menu changed, the others changed too."}], "tags": [], "owner": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1497457848, "creation_date": 1497457848, "answer_id": 44550149, "question_id": 44423641, "link": "https://stackoverflow.com/questions/44423641/why-are-all-my-tkinter-optionmenus-being-updated-when-i-change-the-values-of-one/44550149#44550149", "title": "Why are all my tkinter optionmenus being updated when I change the values of one menu?", "body": "<p>I really do not think that you need <code>StringVar(master)</code>, you just need <code>StringVar()</code></p>\n"}], "owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44550149, "answer_count": 1, "score": 0, "last_activity_date": 1497457848, "creation_date": 1496873749, "last_edit_date": 1496906505, "question_id": 44423641, "link": "https://stackoverflow.com/questions/44423641/why-are-all-my-tkinter-optionmenus-being-updated-when-i-change-the-values-of-one", "title": "Why are all my tkinter optionmenus being updated when I change the values of one menu?", "body": "<p>All my option menu widgets are being updated together when I change the values of 1 option menu.</p>\n\n<p>This is what I use to make all of the menus (<code>self.var</code> is initialized as <code>self.var = StringVar(master)</code>):</p>\n\n<pre><code>def makeMenu(self, name, items, r, c):\n\n    self.var.set(items[0])\n    name = OptionMenu(self, self.var, *items)\n    name.grid(row = r, column = c , padx = self.pad_x, pady = self.pad_y)\n    name.config( width = self.menu_width)\n    name.menu = Menu(name, tearoff = self.tear_off)\n\n    for i in range(len(items)):\n        name.menu.add_command(label = items[i])  \n\n    return name \n</code></pre>\n\n<p>When I try to make a new menu and change the items, all of the other menus' items change to the new ones as well. </p>\n\n<p>i.e. when I do this:</p>\n\n<pre><code>self.layout_menu = self.makeMenu(\"layout_menu\", self.layout_sections, \n                                 self.layout_menu_row, self.layout_menu_col)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2948, "user_id": 902952, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3990e134937951fc01182e4cb6b09952?s=128&d=identicon&r=PG", "display_name": "Watt", "link": "https://stackoverflow.com/users/902952/watt"}, "edited": false, "score": 1, "creation_date": 1496876298, "post_id": 44423740, "comment_id": 75846527, "body": "Perfect, this works, now going to google about <code>unstack</code> and <code>droplevel()</code>"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1496874666, "last_edit_date": 1496874666, "creation_date": 1496874344, "answer_id": 44423740, "question_id": 44423635, "link": "https://stackoverflow.com/questions/44423635/transform-non-numeric-rows-into-columns-with-custom-column-name/44423740#44423740", "title": "Transform non numeric rows into columns with custom column name", "body": "<p>Let's try this:</p>\n\n<pre><code>df1 = df.groupby('id')['vote'].apply(lambda x: pd.DataFrame(x.tolist())).unstack()\ndf1.columns = df1.columns.droplevel().values + 1\ndf1.add_prefix('vote_').reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         id vote_1 vote_2 vote_3 vote_4\n0  6690d79f    Pos    Neg    Pos    Neu\n1  7690d79f    Pos    Neg    Pos    Neu\n</code></pre>\n"}], "owner": {"reputation": 2948, "user_id": 902952, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3990e134937951fc01182e4cb6b09952?s=128&d=identicon&r=PG", "display_name": "Watt", "link": "https://stackoverflow.com/users/902952/watt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 44423740, "answer_count": 1, "score": 1, "last_activity_date": 1496874666, "creation_date": 1496873724, "question_id": 44423635, "link": "https://stackoverflow.com/questions/44423635/transform-non-numeric-rows-into-columns-with-custom-column-name", "title": "Transform non numeric rows into columns with custom column name", "body": "<p>I have a dataframe which looks something like this:</p>\n\n<pre><code>    df = pd.DataFrame([['7690d79f','Pos'],['7690d79f','Neg'],['7690d79f','Pos'],['7690d79f','Neu'],\\\n                       ['6690d79f','Pos'],['6690d79f','Neg'],['6690d79f','Pos'],['6690d79f','Neu']]\\\n                       ,columns=['id', 'vote'])\n</code></pre>\n\n<p>which is:</p>\n\n<pre><code>    id         vote\n0   7690d79f    Pos\n1   7690d79f    Neg\n2   7690d79f    Pos\n3   7690d79f    Neu\n4   6690d79f    Pos\n5   6690d79f    Neg\n6   6690d79f    Pos\n7   6690d79f    Neu\n</code></pre>\n\n<p>I want to pivot rows to columns such that, I get a resultDF as</p>\n\n<pre><code>id  vote_1 vote_2 vote_3 vote_4\n7690d79f Pos  Neg Pos Neu\n6690d79f Pos  Neg Pos Neu\n</code></pre>\n\n<p>If it helps, there is no more than 4 votes per ids.</p>\n\n<p>Though this is similar to</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/17298313/python-pandas-convert-rows-as-column-headers\">Python Pandas: Convert Rows as Column headers</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/41861846/convert-row-to-column-in-python-pandas\">Convert row to column in Python Pandas</a></p></li>\n</ol>\n\n<p>But unfortunately, none of them works for me.</p>\n"}, {"tags": ["python", "linux", "python-2.7", "ubuntu", "ssh"], "comments": [{"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496873574, "post_id": 44423575, "comment_id": 75845642, "body": "I&#39;ve read other articles on similar (I think) issues.  <a href=\"https://stackoverflow.com/questions/8633461/how-to-keep-environment-variables-when-using-sudo\" title=\"how to keep environment variables when using sudo\">stackoverflow.com/questions/8633461/&hellip;</a>   but the answers don&#39;t involve Python, and I don&#39;t know enough to actually apply what might be an answer... and the HTTP-GET (etc) stuff doesn&#39;t apply.  <a href=\"https://stackoverflow.com/questions/8633461/how-to-keep-environment-variables-when-using-sudo\" title=\"how to keep environment variables when using sudo\">stackoverflow.com/questions/8633461/&hellip;</a> is another one that doesn&#39;t seem to match my situation... along with a few others."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1496873761, "post_id": 44423575, "comment_id": 75845708, "body": "<code>sudo -E</code> should help."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1496873838, "post_id": 44423575, "comment_id": 75845737, "body": "I&#39;ve seen another thread mention sudo -E. But, in my Python program, how can I use it to detect the src IP of the (possible) SSH connection?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1496873925, "post_id": 44423575, "comment_id": 75845773, "body": "You cannot if sudo clears environment. So first make sudo to keep environment."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1496874201, "post_id": 44423575, "comment_id": 75845863, "body": "So assuming that there&#39;s no access to the full env$ variables, how can I detect if the current session is via SSH when sudo? I am fairly sure my program can&#39;t exit-itself, make sure sudo keeps the environment, and then re-run itself. (Unless that&#39;s possible... but I doubt it!)"}, {"owner": {"reputation": 16512, "user_id": 49489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe4f89328185db426deb42bf45faa65?s=128&d=identicon&r=PG", "display_name": "Barend", "link": "https://stackoverflow.com/users/49489/barend"}, "edited": false, "score": 0, "creation_date": 1496874714, "post_id": 44423575, "comment_id": 75846025, "body": "If you sudo visudo, you can add SSH_CONNECTION to the env_keep attributes."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496874925, "post_id": 44423575, "comment_id": 75846098, "body": "My program might be being ran on a system where SSH_CONNECTION hasn&#39;t been added to env_keep variables."}], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496877584, "post_id": 44424215, "comment_id": 75846936, "body": "pyutmp isn&#39;t available in the distro I&#39;m using. I&#39;ve echoed that file... not pleasing to the eye to read manually! I&#39;m working on writing some code to parse the file. If other users have since logged on over SSH since my program started, won&#39;t there be additional entries in /var/run/utmp ? I&#39;m presuming that sys.stdout.fileno is the resolution to that problem... investigating."}, {"owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "reply_to_user": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496877718, "post_id": 44424215, "comment_id": 75846974, "body": "pyutmp is just a <code>pip install pyutmp</code> install away...  You may use sys.stderr.fileno or sys.stdin.fileno as well.  But it all depends on the chosen one not being redirected to another file."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496878124, "post_id": 44424215, "comment_id": 75847105, "body": "Can&#39;t install away. What&#39;s not available will remain not available, as my program will be run in a distro that doesn&#39;t include pyutmp, and I don&#39;t have permissions to go install anything at all."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496878274, "post_id": 44424215, "comment_id": 75847153, "body": "Currently I&#39;m working on using this type of thing: getting all the lines from open(&quot;/var/run/utmp&quot;,&quot;r&quot;).readlines(), iterating, doing if fLine=os.ttyname(sys.stdout.fileno()) : IP=.... stuff... but when doing .read() on the file, it&#39;s in some utf-format that I&#39;m struggling to decode. .decode(&#39;utf-16-le&#39;) isn&#39;t working..."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496879023, "post_id": 44424215, "comment_id": 75847350, "body": "I see; a bit too complicated to properly dig into with plain eyes. However... in Python when I run os.ttyname(sys.stdout.fileno()) I get the answer of &#39;/dev/pts/8&#39; ... is this specific to the current session, which might be over an SSH connection? If so, then in /var/run/utmp there is a bit which starts with [pts/8ts/XXXXXXlocalhost2Z8Y ... (XXXX replaces my username)... is it translating 127.0.0.1 into &quot;localhost&quot; for me? Or is the 2Z8Y the bytes of the remote IP... investigating..."}, {"owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "edited": false, "score": 0, "creation_date": 1496879174, "post_id": 44424215, "comment_id": 75847392, "body": "2Z8Y doesn&#39;t obviously translate into the correct IP using any sensible encoding system for a 4-byte IPv4. Hmpf."}], "tags": [], "owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "is_accepted": false, "score": 2, "last_activity_date": 1496884635, "last_edit_date": 1496884635, "creation_date": 1496877303, "answer_id": 44424215, "question_id": 44423575, "link": "https://stackoverflow.com/questions/44423575/in-python-how-do-i-get-users-remote-ip-their-last-hop-if-theyre-connected-o/44424215#44424215", "title": "In Python, how do I get user&#39;s remote IP (their last hop) if they&#39;re connected over SSH?", "body": "<p>The OpenSSH daemon writes an entry to /var/run/utmp with the current terminal, the IP and the name of the user.  Check the output of the <code>w</code> or <code>who</code> commands that parse /var/run/utmp.</p>\n\n<p>It's just a question of getting the current terminal (similar to the <code>tty</code> command) and extracting the information you want.</p>\n\n<p>Use <a href=\"https://pypi.python.org/pypi/pyutmp\" rel=\"nofollow noreferrer\">pyutmp</a> like this:</p>\n\n<pre><code>from pyutmp import UtmpFile\nimport os\nimport sys\n\nfor utmp in UtmpFile():\n    if os.ttyname(sys.stdout.fileno()) == utmp.ut_line:\n        print '%s logged from %s on tty %s' % (utmp.ut_user, utmp.ut_host, utmp.ut_line)\n</code></pre>\n\n<p>Then filter by using <code>ut_pid</code> field to parse the /proc/<code>ut_pid</code>/cmdline file which should contain:</p>\n\n<blockquote>\n  <p>sshd: <strong><em>ut_user</em></strong> [priv]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "is_accepted": true, "score": 0, "last_activity_date": 1496885633, "last_edit_date": 1496885633, "creation_date": 1496884365, "answer_id": 44425123, "question_id": 44423575, "link": "https://stackoverflow.com/questions/44423575/in-python-how-do-i-get-users-remote-ip-their-last-hop-if-theyre-connected-o/44425123#44425123", "title": "In Python, how do I get user&#39;s remote IP (their last hop) if they&#39;re connected over SSH?", "body": "<p>GOT IT AT LAST!!!</p>\n\n<p>The \"last\" command has list of users and their IPs!! So simple.</p>\n\n<p>It has \"still logged in\" marked against sessions. Filter by these\nAnd then filter by current pts ID</p>\n\n<p>To get the IP for the current SSH session in Python, do this:</p>\n\n<pre><code>import os,sys,subprocess\n(out, err) = subprocess.Popen(['last | grep \"still logged in\" | grep \"' + os.ttyname(sys.stdout.fileno()).replace('/dev/','') + '\"'], stdout=subprocess.PIPE, shell=True).communicate()\nRemoteIP=out.split()[2].replace(\":0.0\",\"\") #Returns \"\" if not SSH\n</code></pre>\n\n<p>For readability, across multiple lines:</p>\n\n<pre><code>import os,sys,subprocess\npseudoTermID = os.ttyname(sys.stdout.fileno()).replace('/dev/','')\ncmdStr       = 'last | grep \"still logged in\" | grep \"'+pseudoTermID+'\"'\nsp           = subprocess.Popen([cmdStr], stdout=subprocess.PIPE, shell=True)\n(out, err)   = sp.communicate()\nRemoteIP     = out.split()[2].replace(\":0.0\",\"\")   #Returns \"\" if not SSH\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 2474008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/810145437/picture?type=large", "display_name": "Vexen Crabtree", "link": "https://stackoverflow.com/users/2474008/vexen-crabtree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 44425123, "answer_count": 2, "score": 2, "last_activity_date": 1589047740, "creation_date": 1496873255, "last_edit_date": 1496882406, "question_id": 44423575, "link": "https://stackoverflow.com/questions/44423575/in-python-how-do-i-get-users-remote-ip-their-last-hop-if-theyre-connected-o", "title": "In Python, how do I get user&#39;s remote IP (their last hop) if they&#39;re connected over SSH?", "body": "<p>I want to detect if the user is connected over SSH. In a term, the \"env\" command shows SSH_CONNECTION line. Accessed in Python in one of two ways:</p>\n\n<pre><code>#python:\nimport os\nprint os.getenv(\"SSH_CONNECTION\")       #works\nprint os.environ.get(\"SSH_CONNECTION\")  #works\n</code></pre>\n\n<p>But, if the user has ran my program using SUDO (as they will need to), env$ dooesn't show SSH_CONNECTION. So Python can't see it:</p>\n\n<pre><code>#sudo python:\nimport os\nprint os.getenv(\"SSH_CONNECTION\")       #not set\nprint os.environ.get(\"SSH_CONNECTION\")  #not set\n</code></pre>\n\n<p>The aim is to achieve the following:</p>\n\n<pre><code>#Detect if user is over remote IP\nlRemoteIP=\"\"                                     #Is set if user on SSH\nlStr=os.environ.get(\"SSH_CONNECTION\")            #Temp var\nif lStr: lRemoteIP=lStr.split()[0].split(\"=\")[1] #Store user's lasthop IP\n\n#Later on in the code, for multiple purposes:\nif lRemoteIP: pass #Do stuff (or not) depending on if they're on SSH\n</code></pre>\n\n<p>How do I retrieve SSH_CONNECTION environment variable under SUDO, when its not present in env$ ?</p>\n\n<p>Or more precisely: how can I detect if the current session is via SSH when sudo?</p>\n\n<p>I'm not a natural at Linuxy-type things, so be gentle with me...</p>\n\n<p>[EDIT:] METHOD 2: Giving up on env$, I've tried the following:</p>\n\n<pre><code>pstree -ps $$ | grep \"sshd(\"\n</code></pre>\n\n<p>If it returns anything then it means that the SSH daemon sits above the session. Ergo, it's a SSH connection. And the results are showing me the PIDs of the SSH daemons. Results of the pstree cmd:</p>\n\n<pre><code>init(1)---sshd(xxx)---sshd(xxx)---sshd(xxx)---bash(xxx)-+-grep(xxx)\n</code></pre>\n\n<p>But I'm struggling to get a src IP from the PID. Any ideas on this avenue?</p>\n\n<p>[EDIT] METHOD 3: /run/utmp contains details of SSH logins. In python:</p>\n\n<pre><code>import os\nimport sys\n\nlStr=open(\"/var/run/utmp\").read().replace('\\x00','') #Remove all those null values which make things hard to read\n\n#Get the pseudo-session ID (pts) minus the /dev/ that it starts with:\nlCurSess=os.ttyname(sys.stdout.fileno()).replace('/dev/','')\n#Answer is like pts/10  (pseudo-term session number 10)\n#Search lStr for pts/10\nlInt=lStr.find(lCurSess.replace('/dev/',''))\n#Print /var/utmp starting with where it first mentions current pts:\nprint lStr[lInt:]\n</code></pre>\n\n<p>So far, so good. This gives the following results (I've changed the IP and username to USERNAME)</p>\n\n<pre><code>pts/10/10USERNAME\\x9e\\x958Ym\\xb2\\x05\\x0 74\\x14pts/10s/10USERNAME192.168.1.1\\xbf\\x958Y\\xf8\\xa3\\r\\xc0\\xa88\\x01\n</code></pre>\n\n<p>So, when it comes to extracting the IP from the file, there's some bumf inbetween the occurances of pts/10 and the IP. What's the best way to parse it, given that (I reckon) the precise distance from the match to the IP will be different under different circumstances?</p>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496872992, "post_id": 44423482, "comment_id": 75845382, "body": "You have a base case. Seems fine to me."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 6, "creation_date": 1496872998, "post_id": 44423482, "comment_id": 75845386, "body": "But don&#39;t try these approaches on negative numbers ... :)"}, {"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 3, "creation_date": 1496873056, "post_id": 44423482, "comment_id": 75845417, "body": "Trying writing the outputs on a piece of paper"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1496873062, "post_id": 44423482, "comment_id": 75845419, "body": "If you call <code>is_even(3)</code>, one of the recursive calls eventually executed will be <code>is_even(0)</code>, but while that recursive call will return True, that&#39;s not what <code>is_even(3)</code> will return."}, {"owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "edited": false, "score": 0, "creation_date": 1496873086, "post_id": 44423482, "comment_id": 75845435, "body": "Go through the code step by step. It\u2019s really not difficult to understand."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1496873097, "post_id": 44423482, "comment_id": 75845446, "body": "@MSeifert just change <code>x</code> to <code>abs(x)</code> everywhere and OP&#39;s good to go."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1496873140, "post_id": 44423482, "comment_id": 75845461, "body": "<code>is_even(1)</code> will never return <code>True</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1496873148, "post_id": 44423482, "comment_id": 75845465, "body": "The basic idea is &quot;something is even if the number before it is odd OR it is zero&#39;, and &#39;something is even if it is not odd&quot;"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1496873255, "post_id": 44423482, "comment_id": 75845511, "body": "Considering that the base case returns 0, think about how many times the <code>not</code> is executed for even and odd kinds of numbers. For example, for <code>is_even(2)</code>, there is a base case of <code>True</code>, but <code>not</code> is executed an even number of times."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1496873665, "post_id": 44423482, "comment_id": 75845673, "body": "@PeterWood, isn&#39;t that a good thing given <code>1</code> is in fact odd."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1496873822, "post_id": 44423482, "comment_id": 75845728, "body": "@AChampion Yes, <code>is_even(1)</code> should return <code>False</code>, but it is easy to see why it does so, which is what OP was struggling with."}, {"owner": {"reputation": 4177, "user_id": 3806122, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cKU37.png?s=128&g=1", "display_name": "Jerfov2", "link": "https://stackoverflow.com/users/3806122/jerfov2"}, "edited": false, "score": 0, "creation_date": 1496875494, "post_id": 44423482, "comment_id": 75846282, "body": "Well, that&#39;s one way to test if a number is even or odd..."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 1, "creation_date": 1496881444, "post_id": 44423482, "comment_id": 75847929, "body": "Why do you think <code>is_even</code> will always return <code>True</code>? If you haven&#39;t even worked out your thinking enough to actually write it down for us, then it&#39;s impossible for us to explain where it went wrong. Which leaves us asking if you even really thought it through. As software developers, we <i>must</i> have the ability to critique our own thinking (or sometimes the lack of our thinking). I&#39;m afraid I must downvote for not doing so. Also, <a href=\"http://hwrnmnbsol.livejournal.com/148664.html\" rel=\"nofollow noreferrer\">what did the duck say</a>?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1546359229, "post_id": 44423482, "comment_id": 94831138, "body": "Hello, if your question was solved, please mark the most helpful answer accepted as having solved your problem (as described in the post here). Click the grey check to the left of the answer to toggle it green. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 3, "last_activity_date": 1496873176, "creation_date": 1496873176, "answer_id": 44423560, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even/44423560#44423560", "title": "Recursively checking for odd or even", "body": "<p>Like in most cases it might be helpful to include simply <code>print</code>s to follow the execution:</p>\n\n<pre><code>def is_even(x):\n    print('check if {} is even'.format(x))\n    if x == 0:\n        return True\n    else:\n        return is_odd(x-1)\n\ndef is_odd(x):\n    print('check if {} is odd'.format(x))\n    return not is_even(x)\n</code></pre>\n\n<p>Then in your cases:</p>\n\n<pre><code>&gt;&gt;&gt; print(is_even(2))\ncheck if 2 is even\ncheck if 1 is odd\ncheck if 1 is even\ncheck if 0 is odd\ncheck if 0 is even\nTrue\n\n&gt;&gt;&gt; print(is_odd(2))\ncheck if 2 is odd\ncheck if 2 is even\ncheck if 1 is odd\ncheck if 1 is even\ncheck if 0 is odd\ncheck if 0 is even\nFalse\n</code></pre>\n\n<p>So basically it decrements the number until it's <code>0</code>. The point is just how many <code>not</code>s have been accumulated in the <code>is_odd</code> calls. If it's an even number of <code>not</code>s then the result will be <code>True</code>, otherwise <code>False</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 2, "last_activity_date": 1496873522, "last_edit_date": 1496873522, "creation_date": 1496873204, "answer_id": 44423564, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even/44423564#44423564", "title": "Recursively checking for odd or even", "body": "<p>That's true; the recursion is supposed to end inside <code>is_even</code>.</p>\n\n<p>And when that will happen, you'll know that the number you have is <code>0</code>.</p>\n\n<p>Now lets go backwards. This final state will be achieved by two cases - direct call to <code>is_even(0)</code> or a call from <code>is_odd(0)</code>. In the first case - the result is all good. In the second - the result will be returned to the <code>is_odd</code> function, negated, and therefore will be falsy - giving a correct result.</p>\n\n<p>Now, here the missing piece comes - the recursion: in order to reach this state, we need to decrease the argument each time, passing it through the opposite function - and that's exactly what we get with <code>return is_odd(x-1)</code>.</p>\n\n<hr>\n\n<p><strong>Note:</strong> eventually this recursion leads to a chain of negations of the value <code>True</code> returned by the <code>is_even</code>. This chain is of length <code>x</code> where <code>x</code> is your number, and therefore odd or even in correspondence.</p>\n\n<p>Therefore, the following code will do the same (lacking the <code>is_odd</code> nice side effect):</p>\n\n<pre><code>def is_even (x):\n    res = True\n    while x:\n        res = not res\n        x -= 1\n    return res\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 9, "last_activity_date": 1546359105, "last_edit_date": 1546359105, "creation_date": 1496873286, "answer_id": 44423578, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even/44423578#44423578", "title": "Recursively checking for odd or even", "body": "<p>It always helps to decompose a recurrence relation till you find its base case.</p>\n\n<pre><code>is_even(2) =&gt; return is_odd(1) \n           =&gt; return not is_even(1) \n           =&gt; return not is_odd(0)\n           =&gt; return not not is_even(0)\n           =&gt; return not not True\n           =&gt; return True            ---- (1)\n</code></pre>\n\n<p></p>\n\n<pre><code>is_odd(2) =&gt; return not is_even(2) \n          =&gt; return not True       [from (1)] \n          =&gt; return False\n</code></pre>\n\n<p>In general, from your recurrence functions, it is easy to observe that <code>is_even(n)</code> will return <code>[not not not ... n times] True</code>, while <code>is_odd(n)</code> will return <code>[not not not ... n - 1 times] True</code>. So the number of <code>not</code>s and hence the final expression depend on <code>n</code> (aha!). Well, that's certainly a roundabout way of asking whether</p>\n\n<pre><code>n % 2 == 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 848, "user_id": 8121607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1MgaT.png?s=128&g=1", "display_name": "JoshKopen", "link": "https://stackoverflow.com/users/8121607/joshkopen"}, "is_accepted": false, "score": 1, "last_activity_date": 1496873735, "creation_date": 1496873735, "answer_id": 44423637, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even/44423637#44423637", "title": "Recursively checking for odd or even", "body": "<p>I think that all the other answers are great but potentially the easiest way to understand the problem is how many times the answer will get \"not\"ed. Every time it passes through the is_odd function a not will be added on to the final answer. True will always be returned but for even numbers, there will always be an even number of nots which cancel each other out, but for odd numbers they will always have an odd number of nots and therefore return false.</p>\n"}, {"comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496874524, "post_id": 44423688, "comment_id": 75845963, "body": "The question wasn&#39;t tagged python-3.x so probably better to include a <code>from __future__ import print_function</code> at the top."}], "tags": [], "owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "is_accepted": false, "score": 5, "last_activity_date": 1496886661, "last_edit_date": 1496886661, "creation_date": 1496873979, "answer_id": 44423688, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even/44423688#44423688", "title": "Recursively checking for odd or even", "body": "<p>Add a couple of <code>print</code> statements and you will see what it is doing:</p>\n\n<pre><code>from __future__ import print_function\n\ndef is_even(x):\n    if x == 0:\n        print('True')\n        return True\n    else:\n        return is_odd(x-1)\n\ndef is_odd(x):\n    print('not', end=' ')\n    return not is_even(x)\n\n&gt;&gt;&gt; is_even(5)\nnot not not not not True\nFalse\n&gt;&gt;&gt; is_odd(5)\nnot not not not not not True\nTrue\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 5652080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207024028613481/picture?type=large", "display_name": "Sam Dillard", "link": "https://stackoverflow.com/users/5652080/sam-dillard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1546359105, "creation_date": 1496872770, "last_edit_date": 1503337331, "question_id": 44423482, "link": "https://stackoverflow.com/questions/44423482/recursively-checking-for-odd-or-even", "title": "Recursively checking for odd or even", "body": "<p>In this code:</p>\n\n<pre><code>def is_even(x):\n  if x == 0:\n    return True\n  else:\n    return is_odd(x-1)\n\ndef is_odd(x):\n  return not is_even(x)\n\nprint(is_even(2))\nprint(is_odd(2))\n</code></pre>\n\n<p>I keep going through this in my head and wondering how it's working.  It seems to me that eventually <code>x</code> in <code>is_even(x)</code> will return <code>True</code> every time.  However, when I run the code, it works perfectly fine and returns <code>True</code> and <code>False</code> appropriately.  Can someone explain how that's happening?  </p>\n\n<p>I understand the basic concept of recursion and fully understand how the famous factorial example works.  However, this one is hard for me to wrap my head around.</p>\n\n<p>Feeling inept right now...</p>\n"}, {"tags": ["python", "r", "conditional"], "comments": [{"owner": {"reputation": 1151, "user_id": 3109834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7b76d82c5b329929d39025e904f6d9c?s=128&d=identicon&r=PG&f=1", "display_name": "lhoworko", "link": "https://stackoverflow.com/users/3109834/lhoworko"}, "edited": false, "score": 2, "creation_date": 1496872634, "post_id": 44423439, "comment_id": 75845248, "body": "So what do you have so far?"}, {"owner": {"reputation": 1180, "user_id": 5374691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PQKWn.jpg?s=128&g=1", "display_name": "esQmo_", "link": "https://stackoverflow.com/users/5374691/esqmo"}, "edited": false, "score": 0, "creation_date": 1496872828, "post_id": 44423439, "comment_id": 75845317, "body": "Hey @hminutu&#39;s Show us ds what you&#39;ve accomplished already."}, {"owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "edited": false, "score": 1, "creation_date": 1496872974, "post_id": 44423439, "comment_id": 75845373, "body": "Is it correct that <code>count</code> has nothing to do with deciding?  Just an ID appeared at least 10 times in each of three years?"}, {"owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496872980, "post_id": 44423439, "comment_id": 75845376, "body": "I honestly don&#39;t have anything yet. I think there should be if-statements or something. A first if-statement for the 3 year conditional, then another if-statement for the 10 appearances conditional."}, {"owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496873019, "post_id": 44423439, "comment_id": 75845397, "body": "I just want the data in <code>count</code> to be carried over with its respective ID."}, {"owner": {"reputation": 38476, "user_id": 4497050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b65a630d7ce51440895cf8d90ff9ec?s=128&d=identicon&r=PG", "display_name": "alistaire", "link": "https://stackoverflow.com/users/4497050/alistaire"}, "edited": false, "score": 2, "creation_date": 1496873066, "post_id": 44423439, "comment_id": 75845421, "body": "<code>library(dplyr); df %&gt;% group_by(ID) %&gt;% filter(n_distinct(year) &gt;= 3) %&gt;% group_by(ID, year) %&gt;% filter(n() &gt;= 10)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496874161, "post_id": 44423561, "comment_id": 75845846, "body": "This looks good...! Could you explain how it works..? Or could anyone else? It seems like it worked, but I&#39;d really like to know more about how it does it. Thank you!"}, {"owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496876069, "post_id": 44423561, "comment_id": 75846428, "body": "Ok, I&#39;m working through this and I think I see how it works. I forgot a key word in my original post though... I want it to be 3 consecutive years. Does this do that..? It doesn&#39;t seem like it does, but I could be wrong. Is there something I could add to make it consecutive?"}, {"owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "reply_to_user": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496881348, "post_id": 44423561, "comment_id": 75847904, "body": "This does not require years to be consecutive."}], "tags": [], "owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "is_accepted": false, "score": 2, "last_activity_date": 1496881033, "last_edit_date": 1496881033, "creation_date": 1496873179, "answer_id": 44423561, "question_id": 44423439, "link": "https://stackoverflow.com/questions/44423439/in-r-only-keep-values-that-appear-for-at-least-3-years-at-least-10-times-per-ye/44423561#44423561", "title": "In R only keep values that appear for at least 3 years, at least 10 times per year", "body": "<p>In R you could use</p>\n\n<pre><code>GoodIDs = names(which(rowSums(table(df$ID, df$year) &gt;= 10) &gt;=3))\ndf[df$ID %in% GoodIDs,]\n</code></pre>\n\n<p><strong>The gory Details</strong></p>\n\n<p>Just making a table of how many times each year-id combination occurred helps a lot. </p>\n\n<pre><code>table(df$ID, df$year)\n    2001 2002 2003\n  a   11   11   12\n  b    4    4    4\n  c    2    4    3\n</code></pre>\n\n<p>Now <em>we</em> see the answer (only id=a is wanted),  but we want to push that through to get the full answer.  Next step, test which entries in the table are at least 10. </p>\n\n<pre><code>table(df$ID, df$year) &gt;= 10\n     2001  2002  2003\n  a  TRUE  TRUE  TRUE\n  b FALSE FALSE FALSE\n  c FALSE FALSE FALSE\n</code></pre>\n\n<p>Now we want to count how many years had true for each id. Using the fact that TRUE will be treated as 1 and FALSE will be treated as 0, we can just add across the rows. </p>\n\n<pre><code>rowSums(table(df$ID, df$year) &gt;= 10)\na b c \n3 0 0 \n</code></pre>\n\n<p>Now we want to test which of these was at least 3</p>\n\n<pre><code>which(rowSums(table(df$ID, df$year) &gt;= 10) &gt;=3)\na \n1\n</code></pre>\n\n<p>Now get which ID's were selected</p>\n\n<pre><code>names(which(rowSums(table(df$ID, df$year) &gt;= 10) &gt;=3))\n[1] \"a\"\n</code></pre>\n\n<p>We store that in GoodIDs and then extract all of the rows with the selected IDs.</p>\n\n<pre><code>df[df$ID %in% GoodIDs,]\n&lt;output omitted&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "edited": false, "score": 0, "creation_date": 1496874887, "post_id": 44423733, "comment_id": 75846086, "body": "This looks great and I really appreciate your effort to explain this thoroughly.... what exactly is python pandas though? Thank you."}, {"owner": {"reputation": 425, "user_id": 3818562, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/607e2d40ee7dbefbd9dee985d6999378?s=128&d=identicon&r=PG&f=1", "display_name": "leoxs", "link": "https://stackoverflow.com/users/3818562/leoxs"}, "edited": false, "score": 0, "creation_date": 1496883963, "post_id": 44423733, "comment_id": 75848522, "body": "Pandas is a library to handle datasets. It&#39;s used a lot in data processing"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1496874307, "creation_date": 1496874307, "answer_id": 44423733, "question_id": 44423439, "link": "https://stackoverflow.com/questions/44423439/in-r-only-keep-values-that-appear-for-at-least-3-years-at-least-10-times-per-ye/44423733#44423733", "title": "In R only keep values that appear for at least 3 years, at least 10 times per year", "body": "<p>Python Pandas solution:</p>\n\n<pre><code>import pandas as pd\n</code></pre>\n\n<p>Read the CSV file into a DataFrame:</p>\n\n<pre><code>df = pd.read_table('foo.csv', sep='\\s+')\n</code></pre>\n\n<p>Group by ID and year, select only those years and IDs that have the total count of at least 10:</p>\n\n<pre><code>df1 = df.groupby(['ID','year']).sum()\ndf2 = df1[df1 &gt;= 10].dropna()\n</code></pre>\n\n<p>Eliminate all variables that have fewer than 3 years:</p>\n\n<pre><code>df3 = df2.reset_index().groupby('ID').count()['count']\ndf3[df3 &gt;= 3].index.values\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>#array(['a'], dtype=object)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34299, "user_id": 3817004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHP3g.png?s=128&g=1", "display_name": "Uwe", "link": "https://stackoverflow.com/users/3817004/uwe"}, "is_accepted": false, "score": 0, "last_activity_date": 1497081267, "last_edit_date": 1497081267, "creation_date": 1497080909, "answer_id": 44470909, "question_id": 44423439, "link": "https://stackoverflow.com/questions/44423439/in-r-only-keep-values-that-appear-for-at-least-3-years-at-least-10-times-per-ye/44470909#44470909", "title": "In R only keep values that appear for at least 3 years, at least 10 times per year", "body": "<p>There have already solutions being proposed using <a href=\"https://stackoverflow.com/a/44423561/3817004\">base R</a>, <a href=\"https://stackoverflow.com/questions/44423439/in-r-only-keep-values-that-appear-for-at-least-3-years-at-least-10-times-per-ye#comment75845421_44423439\">the <code>dplyr</code> package in R</a>, and <a href=\"https://stackoverflow.com/a/44423733/3817004\">Python Panda</a>. For the sake of completeness, I would like to suggest an R solution using the <code>data.table</code> package which has gained reputation for fast aggregation of large data, fast ordered joins, etc.</p>\n\n<p>The OP wants <em>to keep count data from IDs that appear for at least 3 years, with at least 10 appearances during each of those years</em>. </p>\n\n<p>So, it is necessary to identify the ID's whose data should be kept and the to filter the data set accordingly. To identify the IDs which comply with the requirements, it is important to first test which years fulfill the 10 appearances conditional for each ID and then to count the number of years per ID. </p>\n\n<p>With <code>data.table</code> this can be combined in one line:</p>\n\n<pre><code>library(data.table)\nsetDT(DF)[DF[, .N, .(ID, year)][N &gt;= 10L, .N, ID][N &gt;= 3L, .(ID)], on = \"ID\"]\n</code></pre>\n\n<h3>Explanation</h3>\n\n<ol>\n<li>setDT(DF) coerces the data.frame to class <code>data.table</code>.</li>\n<li><code>DF[, .N, .(ID, year)]</code> counts the number of appearances grouped by ID and year.</li>\n<li>The next operation <code>[N &gt;= 10L, .N, ID]</code> is <em>chained</em>, i.e. it takes the result of the previous step as input. It counts the number of years for each ID which fulfill the 10 appearances conditional.</li>\n<li><code>[N &gt;= 3L, .(ID)]</code> checks for the 3 year conditional and returns a <code>data.table</code> consisting only of one column with the selected IDs.</li>\n<li>The final filter operation of the full data set is implemented as a <em>right join</em> with the selected IDs. It returns only those rows of the full data set where the ID matches one of the selected IDs. In the join operation <code>setDT(DF)[DF[...], on = \"ID\"]</code>, the <code>on = \"ID\"</code> parameter tells <code>data.table</code> in which column to look for matches.</li>\n</ol>\n\n<h3>Data</h3>\n\n<p>I have added a few more rows of data for ID \"b\" in 2003 to cover also the case that one ID fulfills the 10 appearances conditional but only for one year.</p>\n\n<pre><code>DF &lt;- structure(list(ID = c(\"a\", \"b\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \n\"a\", \"b\", \"b\", \"a\", \"b\", \"c\", \"a\", \"a\", \"c\", \"c\", \"a\", \"b\", \"c\", \n\"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"b\", \"b\", \"a\", \"b\", \"c\", \"a\", \"a\", \n\"a\", \"c\", \"a\", \"a\", \"a\", \"a\", \"c\", \"a\", \"a\", \"b\", \"a\", \"a\", \"a\", \n\"a\", \"a\", \"a\", \"c\", \"b\", \"b\", \"b\", \"b\", \"b\", \"b\", \"b\", \"b\", \"b\", \n\"c\"), year = c(2001L, 2001L, 2001L, 2001L, 2001L, 2001L, 2001L, \n2001L, 2001L, 2001L, 2001L, 2001L, 2001L, 2001L, 2001L, 2001L, \n2001L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, \n2002L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, 2002L, \n2002L, 2002L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, \n2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, \n2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L, 2003L\n), count = c(2L, 3L, 2L, 1L, 4L, 0L, 1L, 3L, 2L, 3L, 4L, 5L, \n2L, 3L, 5L, 1L, 1L, 2L, 1L, 2L, 3L, 2L, 1L, 3L, 4L, 3L, 2L, 4L, \n2L, 1L, 1L, 2L, 3L, 4L, 5L, 2L, 2L, 1L, 2L, 4L, 3L, 2L, 1L, 3L, \n5L, 3L, 2L, 1L, 3L, 2L, 2L, 2L, 1L, 4L, 2L, 1L, 4L, 2L, 1L, 4L, \n3L)), .Names = c(\"ID\", \"year\", \"count\"), row.names = c(NA, -61L\n), class = \"data.frame\", index = structure(integer(0), \"`__ID`\" = c(1L, \n3L, 4L, 5L, 6L, 7L, 8L, 9L, 12L, 15L, 16L, 19L, 22L, 23L, 24L, \n25L, 26L, 27L, 30L, 33L, 34L, 35L, 37L, 38L, 39L, 40L, 42L, 43L, \n45L, 46L, 47L, 48L, 49L, 50L, 2L, 10L, 11L, 13L, 20L, 28L, 29L, \n31L, 44L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 14L, 17L, \n18L, 21L, 32L, 36L, 41L, 51L, 61L)))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8128145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5574d5320631d47381befa33a81d6a52?s=128&d=identicon&r=PG&f=1", "display_name": "hminutus", "link": "https://stackoverflow.com/users/8128145/hminutus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1497081267, "creation_date": 1496872562, "last_edit_date": 1496872662, "question_id": 44423439, "link": "https://stackoverflow.com/questions/44423439/in-r-only-keep-values-that-appear-for-at-least-3-years-at-least-10-times-per-ye", "title": "In R only keep values that appear for at least 3 years, at least 10 times per year", "body": "<p>Please see a general sample of my dataset below. I only want to keep count data from IDs that appear for at least 3 years, with at least 10 appearances during each of those years. So, here, I only want the data from ID 'a', and I want to remove the data with the ID of 'b' and 'c.'</p>\n\n<p>I have some basic/general knowledge of r, python, and excel. Any way to do this using any of those three languages would be great. I guess r would be preferred. Thank you.</p>\n\n<pre><code>ID  year    count\na   2001    2\nb   2001    3\na   2001    2\na   2001    1\na   2001    4 \na   2001    0\na   2001    1\na   2001    3\na   2001    2\nb   2001    3\nb   2001    4\na   2001    5\nb   2001    2\nc   2001    3\na   2001    5\na   2001    1\nc   2001    1\nc   2002    2\na   2002    1\nb   2002    2\nc   2002    3\na   2002    2\na   2002    1\na   2002    3\na   2002    4\na   2002    3\na   2002    2\nb   2002    4\nb   2002    2\na   2002    1\nb   2002    1\nc   2002    2\na   2002    3\na   2002    4\na   2002    5\nc   2002    2\na   2003    2\na   2003    1\na   2003    2\na   2003    4\nc   2003    3\na   2003    2\na   2003    1\nb   2003    3\na   2003    5\na   2003    3\na   2003    2\na   2003    1\na   2003    3\na   2003    2\nc   2003    2\nb   2003    2\nb   2003    1\nb   2003    4\nc   2003    3\n</code></pre>\n"}, {"tags": ["python", "recursion", "tree", "permutation", "combinatorics"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1496872699, "post_id": 44423419, "comment_id": 75845268, "body": "@Prune: I don&#39;t see any default arguments here."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 1, "creation_date": 1496872753, "post_id": 44423419, "comment_id": 75845287, "body": "What you want is <code>[list(x) for x in itertools.combinations([1, 2, 3, 4, 5], 3)]</code> instead of reinventing the wheel."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496873365, "post_id": 44423419, "comment_id": 75845555, "body": "@user2357112: thanks ... I apparently clicked through the list too quickly.  I can&#39;t edit the reference, but this issue has been handled on SO many times before."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1496873554, "post_id": 44423419, "comment_id": 75845632, "body": "The answer to your question is that you are <i>appending the exact same list every time</i>. <code>combArray.append(data)</code>"}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1496879013, "post_id": 44423419, "comment_id": 75847347, "body": "@Prune - You&#39;re not wrong that <a href=\"https://stackoverflow.com/questions/575196/in-python-why-can-a-function-modify-some-arguments-as-perceived-by-the-caller\">this</a> has <a href=\"https://stackoverflow.com/questions/2322068/python-passing-list-as-argument\">come</a> up many <a href=\"https://stackoverflow.com/questions/7379991/python-unintentionally-modifying-parameters-passed-into-a-function\">times</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8128137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52f1c5b2ac1c308aea9169936ea608ca?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/8128137/fredrik"}, "edited": false, "score": 0, "creation_date": 1496875372, "post_id": 44423542, "comment_id": 75846245, "body": "I.E a solution would be to change <code>combArray.append(data)</code> to <code>combArray.append(data[:])</code>. Great, thanks!"}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1496873102, "creation_date": 1496873102, "answer_id": 44423542, "question_id": 44423419, "link": "https://stackoverflow.com/questions/44423419/why-does-recursion-overwrite-values-in-a-list-that-is-passed-along/44423542#44423542", "title": "Why does recursion overwrite values in a list that is passed along?", "body": "<p>You initialize <code>data</code>, and from then on make changes to it &amp; add it to <code>combArray</code>, which means you are always adding <em>the same array</em> to <code>combArray</code>, so all of its elements are the same.  If you want the elements to be distinct arrays, you need to make a new array for each you want to add to <code>combArrays</code> (by, for example, making a copy of <code>data</code>).</p>\n"}], "owner": {"reputation": 3, "user_id": 8128137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52f1c5b2ac1c308aea9169936ea608ca?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/8128137/fredrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 44423542, "answer_count": 1, "score": 0, "last_activity_date": 1496877164, "creation_date": 1496872462, "last_edit_date": 1496875514, "question_id": 44423419, "link": "https://stackoverflow.com/questions/44423419/why-does-recursion-overwrite-values-in-a-list-that-is-passed-along", "title": "Why does recursion overwrite values in a list that is passed along?", "body": "<p>This recusion is adapted from <a href=\"http://www.geeksforgeeks.org/print-all-possible-combinations-of-r-elements-in-a-given-array-of-size-n/\" rel=\"nofollow noreferrer\">http://www.geeksforgeeks.org/print-all-possible-combinations-of-r-elements-in-a-given-array-of-size-n/</a> and does indeed print out all possible unique combination of <code>arr</code> with length <code>r</code>. </p>\n\n<p>What I want from it is to save all possible combination in a list to further use this algorithm in another program. Why is the values overritten in <code>combArray</code> in the recustion and how do I solve this?</p>\n\n<pre><code>def combRecursive(arr, data, start, end, index, r, combArray):\n    if index == r:\n        combArray.append(data)\n        return combArray\n\n    i = start\n    while True:\n        if i &gt; end or end - i + 1 &lt; r - index:\n            break\n        data[index] = arr[i]\n        combArray = combRecursive(arr, data, i + 1, end, index + 1, r, combArray)\n        i += 1\n    return combArray\n\ndef main():\n    arr = [1, 2, 3, 4, 5]\n    r = 3\n    n = len(arr)\n    data = [9999999, 9999999, 9999999]\n    combArray = []\n\n    combArray = combRecursive(arr, data, 0, n-1, 0, r, combArray)\n    print(\"All possible unique combination is: \")\n    for element in combArray:\n        print(element)\n</code></pre>\n\n<p>Result as of now:</p>\n\n<pre><code>[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n[3, 4, 5]\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>[1, 2, 3]\n[1, 2, 4]\n[1, 2, 5]\n[1, 3, 4]\n[1, 3, 5]\n[1, 4, 5]\n[2, 3, 4]\n[2, 3, 5]\n[2, 4, 5]\n[3, 4, 5]\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496872279, "post_id": 44423355, "comment_id": 75845107, "body": "How about <code>b[y,x] = 1</code>? Well with <code>b(x,y)</code>, <code>x</code> would be the first axis, i.e. Y-axis on cartesian coords and <code>y</code> would be <code>X-axis</code> on cartesian being the second axis of an array."}, {"owner": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496873264, "post_id": 44423355, "comment_id": 75845515, "body": "It doesn&#39;t populate the array, though"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496873293, "post_id": 44423355, "comment_id": 75845524, "body": "You populate with <code>b = np.full([20, 20], 0)</code> and then do that."}, {"owner": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496873793, "post_id": 44423355, "comment_id": 75845715, "body": "Sorry, I mean to say that it doesn&#39;t insert the ones at those coordinates"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496873844, "post_id": 44423355, "comment_id": 75845741, "body": "Flip those x,y : <code>b[x,y] = 1</code>?"}, {"owner": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496874913, "post_id": 44423355, "comment_id": 75846093, "body": "Doesn&#39;t numpy follow the x and y plane we see in math?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1496875177, "post_id": 44423355, "comment_id": 75846175, "body": "NumPy doesn&#39;t have the concept of <code>x,y</code>, but has axis. If you are strictly working with 2D data, maybe its worth looking into NumPy matrix class."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "edited": false, "score": 0, "creation_date": 1496874768, "post_id": 44423651, "comment_id": 75846046, "body": "Interesting. What&#39;s the purpose of the star?"}, {"owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "reply_to_user": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "edited": false, "score": 0, "creation_date": 1496875243, "post_id": 44423651, "comment_id": 75846198, "body": "unpacks the array one level"}], "tags": [], "owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "is_accepted": false, "score": 0, "last_activity_date": 1496873778, "creation_date": 1496873778, "answer_id": 44423651, "question_id": 44423355, "link": "https://stackoverflow.com/questions/44423355/insert-elements-in-numpy-array-given-x-and-y-index/44423651#44423651", "title": "Insert elements in numpy array given X and Y index", "body": "<pre><code>for _x, _y in zip(y, x):\n</code></pre>\n\n<p>is borked, zip 'em in the order you intend to use them</p>\n\n<pre><code>for _x, _y in zip(x,y):\n</code></pre>\n\n<p>then </p>\n\n<pre><code>print(*b, sep='\\n')\n[ 0.  0.  0. ...,  0.  0.  0.]\n[ 0.  0.  0. ...,  0.  0.  0.]\n[ 0.  0.  0. ...,  0.  0.  0.]\n[ 0.  0.  0. ...,  0.  1.  1.]\n[ 0.  0.  0. ...,  0.  0.  0.]\n[ 0.  0.  0. ...,  0.  0.  0.]\n[ 0.  0.  0. ...,  0.  1.  1.]\n[ 0.  0.  0. ...,  0.  0.  0.]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1496883027, "last_edit_date": 1496883027, "creation_date": 1496881850, "answer_id": 44424805, "question_id": 44423355, "link": "https://stackoverflow.com/questions/44423355/insert-elements-in-numpy-array-given-x-and-y-index/44424805#44424805", "title": "Insert elements in numpy array given X and Y index", "body": "<p>Create a smaller array (easier to display), and a pair of indices (forget the x,y labels):</p>\n\n<pre><code>In [270]: arr = np.zeros((10,10), int)\nIn [271]: I = [3,6,3,6]\nIn [272]: J = [4,4,5,5]\nIn [273]: for i,j in zip(I,J):\n     ...:     arr[i,j] = i+j     # note the [i,j] indexing\nIn [274]: arr\nOut[274]: \narray([[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  7,  8,  0,  0,  0,  0],  # row 3\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0, 10, 11,  0,  0,  0,  0],  # row 6\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0]])\n#                      col 4 5\n</code></pre>\n\n<p>We could have set the values directly with the <code>I,J</code> lists; or we can retrieve the values:</p>\n\n<pre><code>In [275]: arr[I,J]\nOut[275]: array([ 7, 10,  8, 11])\n</code></pre>\n\n<p>The convention with <code>numpy</code> 2d arrays, the first index is displayed as rows, the 2nd as columns.</p>\n\n<p><code>np.meshgrid</code> has an indexing parameter that accomodates different labeling:</p>\n\n<pre><code>In [279]: np.meshgrid([3,6],[4,5],indexing='xy')\nOut[279]: \n[array([[3, 6],\n        [3, 6]]), \n array([[4, 4],\n        [5, 5]])]\nIn [280]: np.meshgrid([3,6],[4,5],indexing='ij')\nOut[280]: \n[array([[3, 3],\n        [6, 6]]), \n array([[4, 5],\n        [4, 5]])]\n</code></pre>\n\n<p>Displaying the array is one thing, plotting it as a scatter plot or image is another.</p>\n\n<p>The default <code>imshow</code> parameters display the array the same orientation, with origin in the upper left.</p>\n\n<pre><code>plt.imshow(arr,origin='upper')\n</code></pre>\n\n<p>I really should have given the array different dimensions, e.g.</p>\n\n<pre><code>In [289]: arr = np.arange(12).reshape(3,4)\nIn [290]: arr\nOut[290]: \narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11]])\n</code></pre>\n\n<p>The <code>(3,4)</code> shape is displayed as 3 rows, 4 columns.  This is a wide spread practice when talking about arrays and/or matrices.  </p>\n"}], "owner": {"reputation": 53, "user_id": 7993394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a04e7b8a06e75c6bc65ddc1407b5df79?s=128&d=identicon&r=PG&f=1", "display_name": "Cast Fellow", "link": "https://stackoverflow.com/users/7993394/cast-fellow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1395, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496883027, "creation_date": 1496872173, "question_id": 44423355, "link": "https://stackoverflow.com/questions/44423355/insert-elements-in-numpy-array-given-x-and-y-index", "title": "Insert elements in numpy array given X and Y index", "body": "<p>I have the following code:</p>\n\n<pre>\nimport numpy as np\n\nb = np.full([20, 20], 0)\n\nx = [3, 6, 3, 6]\ny = [18, 18, 19, 19]\n\nprint(b)\nfor _x, _y in zip(y, x):\n    b[_x][_y] = 1\n    pass\n\nprint('\\n')\n\nprint(b)</pre>\n\n<p>However, I don't understand some of the things in there, such as the x and y coordinates. Why are they flipped?\nIs there any cleaner way to implement this using a built-in numpy function?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 1, "creation_date": 1496872215, "post_id": 44423339, "comment_id": 75845088, "body": "What is the syntax error you are getting?"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 1, "creation_date": 1496872260, "post_id": 44423339, "comment_id": 75845101, "body": "use <code>raw_input()</code> instead of <code>input()</code>."}, {"owner": {"reputation": 366, "user_id": 960709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64db5bc9ff043b53ae3f6bde45e0fc8?s=128&d=identicon&r=PG", "display_name": "Joe P", "link": "https://stackoverflow.com/users/960709/joe-p"}, "edited": false, "score": 0, "creation_date": 1496872409, "post_id": 44423339, "comment_id": 75845153, "body": "Guess: <code>TypeError: cannot concatenate &#39;str&#39; and &#39;int&#39; objects</code> If so, it&#39;s saying you can&#39;t concatenate &#39;str&#39; and &#39;int&#39; objects. Convert the int to a str explicitly, use a format string, or use the print(&quot;string&quot;, int) version of print."}], "answers": [{"comments": [{"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1498018261, "post_id": 44423424, "comment_id": 76318412, "body": "The problem here is that you&#39;re just masking the fact that <code>input</code> is <code>eval</code>ing the input in Python2. This leaves behind a potentially dangerous bug"}], "tags": [], "owner": {"reputation": 56, "user_id": 7419397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39RDl.jpg?s=128&g=1", "display_name": "Roi S.", "link": "https://stackoverflow.com/users/7419397/roi-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1496872478, "creation_date": 1496872478, "answer_id": 44423424, "question_id": 44423339, "link": "https://stackoverflow.com/questions/44423339/python-syntax-error-can-figure-out-variable/44423424#44423424", "title": "python syntax error can figure out!! variable", "body": "<p>and it's better to format the string like this when you have to use nums and chars:</p>\n\n<pre><code>print (\"Mucho Gusto {}\".format(miNumbre ))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1496873879, "post_id": 44423628, "comment_id": 75845751, "body": "Py3 doesn&#39;t give the listed error, ergo, he must be on Py2."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1496874136, "post_id": 44423628, "comment_id": 75845840, "body": "@TemporalWolf, I don&#39;t want to make assumptions about the OP&#39;s setup or which version of Python they are trying to learn, but it wouldn&#39;t be the first time someone has had both installed and not been aware which one is actually running their code."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 0, "last_activity_date": 1496873682, "creation_date": 1496873682, "answer_id": 44423628, "question_id": 44423339, "link": "https://stackoverflow.com/questions/44423339/python-syntax-error-can-figure-out-variable/44423628#44423628", "title": "python syntax error can figure out!! variable", "body": "<p>It's really important to run this with Python3</p>\n\n<pre><code>miNumbre=input()\nprint (\"Mucho Gusto \" + miNumbre )\n</code></pre>\n\n<p>in Python2, <code>input()</code> evaluates the string, so miNumbre will be an int</p>\n\n<p>If you mean to use Python2, the equivalent would be </p>\n\n<pre><code>miNumbre = raw_input()\nprint \"Mucho Gusto \" + miNumbre \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8128130, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YC_2buH8bqQ/AAAAAAAAAAI/AAAAAAAAABQ/XTaTgMD16Fc/photo.jpg?sz=128", "display_name": "Code Arg", "link": "https://stackoverflow.com/users/8128130/code-arg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1496908090, "accepted_answer_id": 44423424, "answer_count": 2, "score": -3, "last_activity_date": 1496874517, "creation_date": 1496872091, "last_edit_date": 1496874517, "question_id": 44423339, "link": "https://stackoverflow.com/questions/44423339/python-syntax-error-can-figure-out-variable", "closed_reason": "Not suitable for this site", "title": "python syntax error can figure out!! variable", "body": "<p>I have this code in python, to ask people how many cigarettes do they smoke and return how many they smoke in a month and in a year. I have an error at line 4, I have searched this but I don't find any that work. I know it is a syntax problem but I can't figure it out.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>print (\"Hola, Que Tal\")\nprint (\"Como te llamas?\")\nmiNumbre=input()\nprint (\"Mucho Gusto \" + miNumbre )\nprint (\"Cuantos Paquetes de Puchos Fumas Por Dia?\")\npuchos=input()\nprint (\"Fumas \" +str(int(puchos) * 30) + \" Paquetes de Puchos Por Mes\")\nprint (\"En Un A\u00f1o Fumas \" +str(int(puchos) * 360) + \" Paquetes de Puchos\")\n</code></pre>\n"}, {"tags": ["python", "list", "sorting", "heap"], "comments": [{"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 0, "creation_date": 1496872061, "post_id": 44423299, "comment_id": 75845026, "body": "With that many entries, you should <b>really</b> consider writing your data to a file as it is collected."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1496872278, "post_id": 44423299, "comment_id": 75845106, "body": "Why not using <code>generators</code> ? Instead of storing your data into a list then sorting it, create a generator then sort it once."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 1, "creation_date": 1496883121, "post_id": 44423299, "comment_id": 75848342, "body": "@ChihebNexus: A generator will still be converted to a <code>list</code> in memory to sort it."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1496886062, "post_id": 44423299, "comment_id": 75849000, "body": "@ShadowRanger True, but you&#39;ll escape storing the whole list in memory then sorting it again."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 2, "creation_date": 1496930192, "post_id": 44423299, "comment_id": 75872903, "body": "@ChihebNexus: You won&#39;t. If you just make the <code>list</code> up front (without pointless use of <code>heapq</code>), then call <code>.sort()</code> it&#39;s exactly the same. It saves if you&#39;re calling <code>sorted(mygenerator)</code> vs. <code>sorted(mylist)</code>, but if you already have <code>mylist</code>, calling <code>mylist.sort()</code> avoids the memory overhead too."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1496954057, "post_id": 44423299, "comment_id": 75887735, "body": "@ShadowRanger Yes i see. Thanks for your comments."}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": false, "score": 5, "last_activity_date": 1496885986, "last_edit_date": 1496885986, "creation_date": 1496872425, "answer_id": 44423411, "question_id": 44423299, "link": "https://stackoverflow.com/questions/44423299/python-large-list-sorting-and-storage/44423411#44423411", "title": "Python Large list sorting and storage", "body": "<p><code>sorted()</code> creates an entirely distinct list, so doubles the RAM needed for the massive list.  Use a list's <code>.sort()</code> method instead - that sorts the list in-place.</p>\n\n<p>And unless there's something you haven't told us, leave <code>heapq</code> out of it entirely.  Putting the entries in a heap serves no purpose I can think of.  Just use a list's <code>.append()</code> method to add new entries, and apply <code>.sort(reverse=True)</code> to the list at end.</p>\n\n<p>If you're still running out of RAM, then you simply can't solve this problem entirely in memory, and will need to craft an approach merging disk files.</p>\n\n<h1>LIVING WITH \"TOO SMALL\" RAM</h1>\n\n<p>In the worst case, even the list all by itself can't fit in available memory.  You can still create the sorted sequence, but it requires writing sorted chunks to disk and merging them later.  For the merging part, <code>heapq</code> <em>is</em> useful.  Here's an example:</p>\n\n<pre><code>import pickle\nimport heapq\n\nMAXPERFILE = 100  # the array will never get bigger than this\n\ndef getfname(i):\n    return \"pickled%d.dat\" % i\n\nfilenum = 0\ndef dumptofile(a):  # dump the array to file, as pickled data\n    global filenum\n    fname = getfname(filenum)\n    with open(fname, \"wb\") as f:\n        pickle.dump(len(a), f)\n        for x in a:\n            pickle.dump(x, f)\n    filenum += 1\n\n# generate some random data\nimport random\na = []\nfor _ in range(1012):  # 10 \"full\" files with some leftovers\n    a.append(random.random())\n    if len(a) == MAXPERFILE:\n        a.sort(reverse=True)\n        dumptofile(a)\n        del a[:]\nif a:\n    a.sort(reverse=True)\n    dumptofile(a)\n\nprint(\"number of files written:\", filenum)\n\n# now merge the files together; first a function\n# to generate the file contents, one at a time\ndef feedfile(i):\n    fname = getfname(i)\n    with open(fname, \"rb\") as f:\n        count = pickle.load(f)\n        for _ in range(count):\n            yield pickle.load(f)\n\nfor x in heapq.merge(*(feedfile(i) for i in range(filenum)),\n                     reverse=True):\n    print(x)\n</code></pre>\n\n<p>Max memory use can be made smaller by decreasing <code>MAXPERFILE</code>, although performance will be better the larger <code>MAXPERFILE</code>.  Indeed, if <code>MAXPERFILE</code> is small enough and the total amount of data is large enough, the merging code may die with an OS \"too many open files\" error.</p>\n"}], "owner": {"reputation": 41, "user_id": 3957998, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000141083603/picture?type=large", "display_name": "Nick &#39;Alamo&#39; Smith", "link": "https://stackoverflow.com/users/3957998/nick-alamo-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4239, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1590576730, "creation_date": 1496871906, "last_edit_date": 1590576730, "question_id": 44423299, "link": "https://stackoverflow.com/questions/44423299/python-large-list-sorting-and-storage", "title": "Python Large list sorting and storage", "body": "<p>I'm currently working with some very large lists (50 to 100 million entries) of information where each item in the list is in the form of [float,(string_1,string_2)]</p>\n\n<p>I'm adding elements to the list in an unsorted manner, and would eventually like to have a list that is sorted by the float value. For example I would have a list that looks like this:</p>\n\n<pre><code>[ [0.5,(A,B)], [-0.15,(B,C)], [0.3,(A,C)], [-0.8,(A,D)] ]\n</code></pre>\n\n<p>and then sort it  to get</p>\n\n<pre><code>[ [0.5,(A,B)], [0.3,(A,C)], [-0.15,(B,C)], [-0.8,(A,D)] ]\n</code></pre>\n\n<p>Currently I'm using heapq to add items as I go along and then using sorted(heap) to ultimately give me the list I need. My question is: is there a better way to go about adding millions of items to a list and sorting them that won't crash my computer? Holding a list that long and then sorting it is causing some issues with my RAM.</p>\n"}, {"tags": ["python", "signals", "fft"], "comments": [{"owner": {"reputation": 1641, "user_id": 3848765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITRqu.jpg?s=128&g=1", "display_name": "amonk", "link": "https://stackoverflow.com/users/3848765/amonk"}, "edited": false, "score": 0, "creation_date": 1496873007, "post_id": 44423271, "comment_id": 75845392, "body": "Concerning the 2nd plot, it seems that it needs to be zoomed. Try logscale also?"}, {"owner": {"reputation": 11, "user_id": 8127573, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212414776780995/picture?type=large", "display_name": "Diego Mart&#237;n Barreiro Fandi&#241;o", "link": "https://stackoverflow.com/users/8127573/diego-mart%c3%adn-barreiro-fandi%c3%b1o"}, "reply_to_user": {"reputation": 1641, "user_id": 3848765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITRqu.jpg?s=128&g=1", "display_name": "amonk", "link": "https://stackoverflow.com/users/3848765/amonk"}, "edited": false, "score": 0, "creation_date": 1496904522, "post_id": 44423271, "comment_id": 75854997, "body": "Thank you, I will try to find the instruction to do a logscale."}, {"owner": {"reputation": 1641, "user_id": 3848765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITRqu.jpg?s=128&g=1", "display_name": "amonk", "link": "https://stackoverflow.com/users/3848765/amonk"}, "edited": false, "score": 0, "creation_date": 1496922959, "post_id": 44423271, "comment_id": 75867199, "body": "Sure! Maybe it would be useful to add some data as well.Also don&#39;t forget units in the plots. Otherwise things will get messy..."}, {"owner": {"reputation": 11, "user_id": 8127573, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212414776780995/picture?type=large", "display_name": "Diego Mart&#237;n Barreiro Fandi&#241;o", "link": "https://stackoverflow.com/users/8127573/diego-mart%c3%adn-barreiro-fandi%c3%b1o"}, "reply_to_user": {"reputation": 1641, "user_id": 3848765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITRqu.jpg?s=128&g=1", "display_name": "amonk", "link": "https://stackoverflow.com/users/3848765/amonk"}, "edited": false, "score": 0, "creation_date": 1496940175, "post_id": 44423271, "comment_id": 75880288, "body": "Sorry, but what does it mean the output of the first plot? To be honest I am a bit lost."}, {"owner": {"reputation": 1641, "user_id": 3848765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITRqu.jpg?s=128&g=1", "display_name": "amonk", "link": "https://stackoverflow.com/users/3848765/amonk"}, "edited": false, "score": 0, "creation_date": 1496993961, "post_id": 44423271, "comment_id": 75900650, "body": "I can provide some Theory of FFT but not combined with Python. So for a given pulse (P=P(t) :time dependent) , via FFT you get the decomposition into frequencies  as in : <a href=\"https://i.stack.imgur.com/7GyVj.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/7GyVj.png</a>. What is you&#39;re missing here is the Mathematical Ideas behind FFT and trying to explain it yourself in simple words. Code will be your 2nd task. Don&#39;t forget to share some data."}], "owner": {"reputation": 11, "user_id": 8127573, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212414776780995/picture?type=large", "display_name": "Diego Mart&#237;n Barreiro Fandi&#241;o", "link": "https://stackoverflow.com/users/8127573/diego-mart%c3%adn-barreiro-fandi%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496876041, "creation_date": 1496871775, "last_edit_date": 1496876041, "question_id": 44423271, "link": "https://stackoverflow.com/questions/44423271/python-fourier-transform-of-numpy-array", "title": "Python Fourier transform of numpy array", "body": "<p>I have a problem trying to represent the Fourier transformation of a signal.\nThis is the my code:</p>\n\n<pre><code>path = \"./sensor_20170315_140457Z.das.h5\"\np5 = h5py.File(path, 'r')\ndsData = p5[\"DAS/Data\"]\nds_as_array = np.array(dsData, dtype=np.int32)\nchannel = ds_as_array[355, 0:2500]\nchannel_t=np.arange(0,1,0.0004)\nplt.plot(channel_t, channel)\nplt.show()\n</code></pre>\n\n<p>And my code to calculate the Fourier transform is:</p>\n\n<pre><code>Y = fft(y)\nplt.plot(Y)\nplt.show()\n</code></pre>\n\n<p>and the output is :</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZqHB4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZqHB4.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't understand this output, how could I know the frequencies?\nI also try the sample of the scipy documentation, but the result is even more disappointed</p>\n\n<pre><code>N = 2500\n# sample spacing\nT = 1.0 / 2500.0\nx = np.linspace(0.0, N*T, N)\ny = channel\nprint(y)\nyf = fft(y)\nxf = np.linspace(0.0, 1.0/(2.0*T), N//2)\nplt.plot(xf, 2.0/N * np.abs(yf[0:N//2]))\nplt.grid()\nplt.show()\n</code></pre>\n\n<p>and its output is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qUWHv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qUWHv.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "naming-conventions"], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 4, "creation_date": 1496873377, "post_id": 44423283, "comment_id": 75845561, "body": "of course Martijn Pieters has Python 1.5 installed :)"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1496873570, "post_id": 44423283, "comment_id": 75845639, "body": "@AdamSmith I&#39;ve got a <code>0.9.1</code> lying around (and <a href=\"https://www.python.org/download/releases/early/\" rel=\"nofollow noreferrer\">so can you</a>)"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 7, "last_activity_date": 1496872628, "last_edit_date": 1496872628, "creation_date": 1496871807, "answer_id": 44423283, "question_id": 44423260, "link": "https://stackoverflow.com/questions/44423260/why-do-some-built-in-constructors-begin-with-a-lower-case-letter/44423283#44423283", "title": "Why do some built-in constructors begin with a lower case letter?", "body": "<p>These types were original factory functions, not types. As such they got a lower-case name:</p>\n\n<pre><code>$ python1.5\nPython 1.5.2 (#1, Apr  1 2009, 22:55:54)  [GCC 4.1.2 20070925 (Red Hat\n4.1.2-27)] on linux2\nCopyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam\n&gt;&gt;&gt; type(int)\n&lt;type 'builtin_function_or_method'&gt;\n</code></pre>\n\n<p>That they are now types anyway is a historical artefact</p>\n\n<p>All built-in types now follow this convention, including <code>set</code> and <code>frozenset</code>, which were added after the type unification that made <code>int</code> et al types.</p>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1496872458, "post_id": 44423337, "comment_id": 75845172, "body": "It&#39;s more that that has been grandfathered in now."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1496872693, "post_id": 44423337, "comment_id": 75845264, "body": "Indeed, that&#39;s why I said <i>most</i> of these, @MartijnPieters. How much this historical precedent influenced the naming rules is another issue which I&#39;d be interested to know :-)"}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": false, "score": 6, "last_activity_date": 1496872061, "creation_date": 1496872061, "answer_id": 44423337, "question_id": 44423260, "link": "https://stackoverflow.com/questions/44423260/why-do-some-built-in-constructors-begin-with-a-lower-case-letter/44423337#44423337", "title": "Why do some built-in constructors begin with a lower case letter?", "body": "<p>Despite the historical reason for most of these, builtin names that abide to Pythons' naming conventions don't use CapWords. This is specified in <a href=\"https://www.python.org/dev/peps/pep-0008/#class-names\" rel=\"noreferrer\">PEP 8</a>:</p>\n\n<blockquote>\n  <p>Note that there is a separate convention for builtin names: most builtin names are single words (or two words run together), with the CapWords convention used only for exception names and builtin constants.</p>\n</blockquote>\n"}], "owner": {"reputation": 1392, "user_id": 6533594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb40113ccda27e832d41311fc8a0977b?s=128&d=identicon&r=PG&f=1", "display_name": "flpn", "link": "https://stackoverflow.com/users/6533594/flpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "accepted_answer_id": 44423283, "answer_count": 2, "score": 7, "last_activity_date": 1496874028, "creation_date": 1496871720, "last_edit_date": 1496874028, "question_id": 44423260, "link": "https://stackoverflow.com/questions/44423260/why-do-some-built-in-constructors-begin-with-a-lower-case-letter", "title": "Why do some built-in constructors begin with a lower case letter?", "body": "<p>Why do some constructors like <code>int()</code>, <code>list()</code>, <code>set()</code> and many others starts with a lower case letter instead of upper case? Shouldn't this be written <code>Int()</code>, <code>List()</code>, <code>Set()</code> and so on?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 1, "creation_date": 1496871790, "post_id": 44423246, "comment_id": 75844921, "body": "Unless you&#39;ve aliased it, it&#39;s a Python built-in..."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1496871830, "creation_date": 1496871830, "answer_id": 44423288, "question_id": 44423246, "link": "https://stackoverflow.com/questions/44423246/why-does-pythons-any-function-work-on-numpy-array/44423288#44423288", "title": "Why does Pythons &quot;any()&quot; function work on numpy array?", "body": "<p>A <code>numpy</code> array is iterable, which is all the built-in <code>any</code> expects of its argument. <code>any</code> returns <code>False</code> if all of the elements of the iterable are falsey, which all the zeros are. Then the comparison <code>False &gt; 0</code> is also <code>False</code>, giving you the observed value.</p>\n"}, {"comments": [{"owner": {"reputation": 1818, "user_id": 2171758, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0pO0W.jpg?s=128&g=1", "display_name": "salient", "link": "https://stackoverflow.com/users/2171758/salient"}, "edited": false, "score": 0, "creation_date": 1496876829, "post_id": 44423719, "comment_id": 75846707, "body": "Nice explanation and timing example. Are you sure about the side note though? <code>any(np.zeros(4)).__eq__(0)</code> ==&gt; <code>True</code>, <code>any(np.zeros(4)).__lt__(0)</code> ==&gt; <code>False</code> etc, which looks very much the same as &quot;check if any element is equal to/above/\u2026 zero&quot;"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1818, "user_id": 2171758, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0pO0W.jpg?s=128&g=1", "display_name": "salient", "link": "https://stackoverflow.com/users/2171758/salient"}, "edited": false, "score": 1, "creation_date": 1496876982, "post_id": 44423719, "comment_id": 75846757, "body": "The comparison and arithmetic operators like <code>&gt;</code> do element-wise operations/checks on an array, so I&#39;m pretty sure. Except you wanted to check if the result of <code>any</code> is greater than <code>0</code>. For example <code>any(np.array([-1, 0, 0])) &gt; 0</code> returns <code>True</code> but <code>any(np.array([-1, 0, 0]) &gt; 0)</code> returns <code>False</code>. It depends what you need (and you haven&#39;t said) so maybe it&#39;s me who is wrong. :)"}, {"owner": {"reputation": 1818, "user_id": 2171758, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0pO0W.jpg?s=128&g=1", "display_name": "salient", "link": "https://stackoverflow.com/users/2171758/salient"}, "edited": false, "score": 0, "creation_date": 1496877085, "post_id": 44423719, "comment_id": 75846787, "body": "Ah see the distinction now :)"}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 3, "last_activity_date": 1496876647, "last_edit_date": 1496876647, "creation_date": 1496874188, "answer_id": 44423719, "question_id": 44423246, "link": "https://stackoverflow.com/questions/44423246/why-does-pythons-any-function-work-on-numpy-array/44423719#44423719", "title": "Why does Pythons &quot;any()&quot; function work on numpy array?", "body": "<p>For one-dimensional arrays it works because the built-in Python-<code>any</code>-function just requires an iterable with items that can be cast to <code>bool</code>s (and a one-dimensional array satisfies these conditions) but for multidimensional arrays it won't work:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n\n&gt;&gt;&gt; any(np.ones((10, 10)))\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n\n&gt;&gt;&gt; np.any(np.ones((10, 10)))\nTrue\n</code></pre>\n\n<p>That's because if you iterate over a array you iterate over the first dimension, if you have a multidimensional array you'll get an <code>array</code> (not a number) in each iteration. These <code>array</code>s can't be cast to <code>bool</code>s. So it throws the exception.</p>\n\n<p>But <code>np.any</code> will be faster (in most cases) on arrays than <code>any</code> because it's aware of the input-type (<code>array</code>) and it can avoid the python iteration that <code>any</code> needs:</p>\n\n<pre><code>In [0]: arr = np.zeros((1000))\n\nIn [1]: %timeit any(arr)     \nOut[1]: 215 \u00b5s \u00b1 4.29 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n\nIn [2]: %timeit np.any(arr)  \nOut[2]: 31.2 \u00b5s \u00b1 1.41 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n</code></pre>\n\n<hr>\n\n<p>As a side note, you probably wanted to use <code>any(np.zeros(4) &gt; 0)</code> instead of <code>any(np.zeros(4))&gt;0</code>. </p>\n\n<p>The first one checks if any element in your array is above zero, while the second checks if the result of <code>any</code> (<code>True</code> if any element is <strong>not</strong> zero) is above zero.</p>\n"}], "owner": {"reputation": 1818, "user_id": 2171758, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0pO0W.jpg?s=128&g=1", "display_name": "salient", "link": "https://stackoverflow.com/users/2171758/salient"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 1, "accepted_answer_id": 44423719, "answer_count": 2, "score": 2, "last_activity_date": 1496876647, "creation_date": 1496871665, "last_edit_date": 1496876258, "question_id": 44423246, "link": "https://stackoverflow.com/questions/44423246/why-does-pythons-any-function-work-on-numpy-array", "title": "Why does Pythons &quot;any()&quot; function work on numpy array?", "body": "<p>Why is it possible to use <code>any</code> directly as a function on a <code>numpy</code> array? </p>\n\n<pre><code>In [30]: any(np.zeros(4))&gt;0\nOut[30]: False\n</code></pre>\n\n<p>I thought numpy's <code>any()</code>-method was on the <code>array</code> itself?</p>\n\n<p>Is this the <code>python</code> function or the actual <code>numpy</code> method?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "is_accepted": false, "score": 0, "last_activity_date": 1496873898, "creation_date": 1496873898, "answer_id": 44423673, "question_id": 44423214, "link": "https://stackoverflow.com/questions/44423214/efficient-way-to-split-temporal-numpy-vector-automatically/44423673#44423673", "title": "efficient way to split temporal Numpy vector automatically", "body": "<p>So I've programmed the solution in pure python and lists:</p>\n\n<pre><code>vec = np.load('vector_numpy.npy')\n# plt.plot(vec)\n# plt.show()\nprint vec.shape\n\ntemporal_vec = []\nflag = 0\nflag_start = 0\nflag_end = 0\n\nall_vectors = []\nall_index = []\n\ncount = -1\nfor element in vec:\n    count = count+1\n    #print element\n    if element &lt; 2.302:\n        if flag_start ==0:\n            all_index.append(count)\n            flag_start=1\n        temporal_vec.append(element)\n        flag = 1\n    if flag == 1:\n        if element &gt;= 2.302:\n            if flag_start==1:\n                all_index.append(count)\n                flag_start=0\n            all_vectors.append(temporal_vec)\n            temporal_vec = []\n            flag = 0\n\nprint(all_vectors)\n\nfor element in all_vectors:\n    print(len(element))\n    plt.plot(element)\n    plt.show()\n\nprint(all_index)\n</code></pre>\n\n<p>Any fancier way in Numpy or better/shorter python code?</p>\n"}], "owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496873898, "creation_date": 1496871525, "question_id": 44423214, "link": "https://stackoverflow.com/questions/44423214/efficient-way-to-split-temporal-numpy-vector-automatically", "title": "efficient way to split temporal Numpy vector automatically", "body": "<p>I have a temporal vector as in the following image:\n<a href=\"https://i.stack.imgur.com/Hm71G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hm71G.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Numpy vector:\n<a href=\"https://drive.google.com/file/d/0B4Jac-wNMDxHS3BnUzBoUkdmOGs/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0B4Jac-wNMDxHS3BnUzBoUkdmOGs/view?usp=sharing</a></p>\n\n<p>I would like to know an efficient way to split the vector in numpy, and extract the 5 chunks of the signals that drop in amplitude significantly.</p>\n\n<p>I could separate them by considering the amplitude 2.302 as the cut off amplitude and separate them by the initial index when the signal drops bellow this value and the final index when the signal goes above this value.</p>\n\n<p>Any efficient way to do this in numpy?</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 2348, "user_id": 553029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f0c0e9df094021d5625b3707c54714?s=128&d=identicon&r=PG", "display_name": "Yasel", "link": "https://stackoverflow.com/users/553029/yasel"}, "is_accepted": true, "score": 8, "last_activity_date": 1496872049, "creation_date": 1496872049, "answer_id": 44423333, "question_id": 44423211, "link": "https://stackoverflow.com/questions/44423211/how-to-filter-objects-by-price-range-in-django/44423333#44423333", "title": "How to filter objects by price range in Django?", "body": "<p>Check api reference for <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/querysets/#range\" rel=\"noreferrer\">range</a>. Like it states </p>\n\n<blockquote>\n  <p>You can use range anywhere you can use BETWEEN in SQL \u2014 for dates,\n  numbers and even characters.</p>\n</blockquote>\n\n<p>So, in your case:</p>\n\n<pre><code>Item.objects.filter(price__range=(min_price, max_price))\n</code></pre>\n"}], "owner": {"reputation": 158, "user_id": 3071148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000920596718/picture?type=large", "display_name": "igor_alefirenko", "link": "https://stackoverflow.com/users/3071148/igor-alefirenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5631, "favorite_count": 0, "accepted_answer_id": 44423333, "answer_count": 1, "score": 2, "last_activity_date": 1496872049, "creation_date": 1496871518, "question_id": 44423211, "link": "https://stackoverflow.com/questions/44423211/how-to-filter-objects-by-price-range-in-django", "title": "How to filter objects by price range in Django?", "body": "<p>I have a model <code>Item</code> with field <code>price</code>.</p>\n\n<pre><code>class Item(models.Model):\n    title = models.CharField(max_length=200, blank='true')\n    price = models.IntegerField(default=0)\n</code></pre>\n\n<p>My query may contain <code>min_price</code> &amp; <code>max_price</code> values. So, my request may be like this: <code>http://example.com/api/items?min_price=50&amp;max_price=500</code>. Can anybody tell me, how can I query items between min &amp; max values? Can I solve it using Django ORM? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 8, "creation_date": 1496871249, "post_id": 44423139, "comment_id": 75844734, "body": "It does find it, find returns the index 0, which is falsey, you need to check if it returns -1 ie, not found"}, {"owner": {"reputation": 4780, "user_id": 2151286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c85a35dc1de171cbb72a4046e2debe91?s=128&d=identicon&r=PG&f=1", "display_name": "Anoop", "link": "https://stackoverflow.com/users/2151286/anoop"}, "edited": false, "score": 0, "creation_date": 1496871311, "post_id": 44423139, "comment_id": 75844765, "body": "You can use <code>search in my_string</code>"}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 2, "creation_date": 1496871317, "post_id": 44423139, "comment_id": 75844767, "body": "Your test should be <code>if my_string.find(search) &gt;= 0</code> instead."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1496872374, "post_id": 44423139, "comment_id": 75845141, "body": "This is just a failure to read the <a href=\"https://docs.python.org/3.6/library/stdtypes.html#str.find\" rel=\"nofollow noreferrer\">docs</a> on OP&#39;s part."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1496876114, "post_id": 44423139, "comment_id": 75846445, "body": "@MadPhysicist indeed, a lacks research flag would be useful"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 1, "creation_date": 1496896032, "post_id": 44423139, "comment_id": 75851247, "body": "@NickA, I believe that the off topic flag &quot; This question was caused by a problem that can no longer be reproduced or a simple typographical error. While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers. This can often be avoided by identifying and closely inspecting the shortest program necessary to reproduce the problem before posting&quot; covers the issue pretty well."}], "answers": [{"tags": [], "owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "is_accepted": true, "score": 3, "last_activity_date": 1496872491, "last_edit_date": 1496872491, "creation_date": 1496871662, "answer_id": 44423245, "question_id": 44423139, "link": "https://stackoverflow.com/questions/44423139/python-find-fails-to-find-substring-at-start-of-string/44423245#44423245", "title": "python find() fails to find substring at start of string", "body": "<p><a href=\"https://docs.python.org/3.6/library/stdtypes.html#str.find\" rel=\"nofollow noreferrer\"><code>find</code></a> is actually working as intended. It is supposed to return the index of the string if found and -1 otherwise.</p>\n\n<p>Your <code>if</code> statement should read as follows:</p>\n\n<pre><code>for search in searches:\n    if my_string.find(search) &gt;= 0:\n        print(\"Found\", search)\n    else:\n        print(\"Did not find\", search)\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 6451496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7d4eb5a63b219d5534f636e8f2035d0?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/6451496/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1453, "favorite_count": 0, "accepted_answer_id": 44423245, "answer_count": 1, "score": 0, "last_activity_date": 1496872491, "creation_date": 1496871180, "question_id": 44423139, "link": "https://stackoverflow.com/questions/44423139/python-find-fails-to-find-substring-at-start-of-string", "title": "python find() fails to find substring at start of string", "body": "<p>I have encountered some odd behavior with <code>find</code>. When searching for a substring, if that substring is at the very beginning of the string I am searching (the substring starts at index 0), it will not be found. If I pad the string with a single whitespace character (so the substring starts at index 1), it rescues find functionality and behaves as expected. Am I using <code>find</code> incorrectly?</p>\n\n<pre><code>my_string = \"hello world\"\nsearches = [\"hello\",\n            \"world\",\n            ]\n# Search the string for the two substrings\nfor search in searches:\n    if my_string.find(search):\n        print(\"Found\", search)\n    else:\n        print(\"Did not find\", search)\n# Did not find hello\n# Found world\n\n# Try padding the string, so substring 'hello' is not at the very beginning\nmy_padded_string = \" \" + my_string\nfor search in searches:\n    if my_padded_string.find(search):\n        print(\"Found\", search)\n    else:\n        print(\"Did not find\", search)\n# Found world\n# Found hello\n</code></pre>\n\n<p>Note the order of the substrings in the <code>searches</code> list does not seem to matter.</p>\n\n<p>I am using Python 3.6.0 :: Anaconda 4.3.0 (64-bit).</p>\n"}, {"tags": ["python", "caffe", "pycaffe"], "comments": [{"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "edited": false, "score": 2, "creation_date": 1496872233, "post_id": 44423120, "comment_id": 75845091, "body": "it&#39;s the same answer as the one you linked to. Look closely at you f1.prototxt file and make sure no &quot;Data&quot; layers were left there by accident"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1496873051, "creation_date": 1496873051, "answer_id": 44423531, "question_id": 44423120, "link": "https://stackoverflow.com/questions/44423120/classify-image-with-pretrained-caffemodel-in-pycaffe/44423531#44423531", "title": "Classify image with pretrained caffemodel in pycaffe", "body": "<p>Scroll up through the log file; there should be an earlier message telling you exactly what file it couldn't open.  Check the path and permissions.  When I get this, it's usually because I invoked <code>caffe</code> from the wrong directory.</p>\n"}], "owner": {"reputation": 2575, "user_id": 2212461, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/654e61b024c8523447cce77c382de3ec?s=128&d=identicon&r=PG&f=1", "display_name": "user2212461", "link": "https://stackoverflow.com/users/2212461/user2212461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "closed_date": 1496898827, "accepted_answer_id": 44423531, "answer_count": 1, "score": 0, "last_activity_date": 1496873051, "creation_date": 1496871101, "question_id": 44423120, "link": "https://stackoverflow.com/questions/44423120/classify-image-with-pretrained-caffemodel-in-pycaffe", "closed_reason": "Duplicate", "title": "Classify image with pretrained caffemodel in pycaffe", "body": "<p>I want to classify an image with a pretrained model. I have the caffemodel and prototxt files, but when I load the models in caffe for python with</p>\n\n<pre><code>net = caffe.Net('/home/me/data/f1.prototxt',\n                '/home/me/data/f1.caffemodel',\n                caffe.TEST)\n</code></pre>\n\n<p>I am getting the error</p>\n\n<pre><code>Check failed: mdb_status == 0 (2 vs. 0) No such file or directory\n</code></pre>\n\n<p>There is a similar question <a href=\"https://stackoverflow.com/questions/36550131/check-failed-mdb-status-0-2-vs-0-no-such-file-or-directory\">here</a> but the example there is for training a model so it doesn't apply in my case. What am I missing here?</p>\n\n<p>The filepaths and permissions are correct.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1496872421, "post_id": 44423105, "comment_id": 75845156, "body": "Can you show the <code>pivot_table</code> line? We need to know the aggregation/indexing."}, {"owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1496872939, "post_id": 44423105, "comment_id": 75845360, "body": "<code>table = df.pivot_table(&#39;Other_Sales&#39;, columns=&#39;Name&#39;, index=&#39;Year&#39;, aggfunc=&#39;sum&#39;).sum(axis=1)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 1, "last_activity_date": 1496881999, "creation_date": 1496881999, "answer_id": 44424824, "question_id": 44423105, "link": "https://stackoverflow.com/questions/44423105/how-to-extract-column-from-python-pandas-pivot-table/44424824#44424824", "title": "How to extract column from Python Pandas Pivot_table?", "body": "<p>Simply <code>reset_index()</code>. Below creates a reproducible example with <code>loc</code> to slice column:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(44)\n# RANDOM DATA WITH US CLASS I RAILROADS\ndf = pd.DataFrame({'Name': ['UP', 'BNSF', 'CSX', 'KCS','NSF', 'CN', 'CP']*5,\n                   'Other_Sales': np.random.randn(35),\n                   'Year': list(range(2007,2014))*5})    \n\ntable = df.pivot_table('Other_Sales', columns='Name',\n                       index='Year', aggfunc='sum')\nprint(table)    \n# Name      BNSF        CN        CP       CSX       KCS       NSF        UP\n# Year                                                                      \n# 2007       NaN       NaN       NaN       NaN       NaN       NaN -1.785934\n# 2008  1.605111       NaN       NaN       NaN       NaN       NaN       NaN\n# 2009       NaN       NaN       NaN  1.800014       NaN       NaN       NaN\n# 2010       NaN       NaN       NaN       NaN -2.577264       NaN       NaN\n# 2011       NaN       NaN       NaN       NaN       NaN  0.899372       NaN\n# 2012       NaN -3.988874       NaN       NaN       NaN       NaN       NaN\n# 2013       NaN       NaN  1.725111       NaN       NaN       NaN       NaN\n\ntable = df.pivot_table('Other_Sales', columns='Name',\n                       index='Year', aggfunc='sum').sum(axis=1).reset_index()\n\nprint(table)    \n#    Year         0\n# 0  2007 -1.785934\n# 1  2008  1.605111\n# 2  2009  1.800014\n# 3  2010 -2.577264\n# 4  2011  0.899372\n# 5  2012 -3.988874\n# 6  2013  1.725111\n\nprint(table.loc[:,0])\n# 0   -1.785934\n# 1    1.605111\n# 2    1.800014\n# 3   -2.577264\n# 4    0.899372\n# 5   -3.988874\n# 6    1.725111\n# Name: 0, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4755, "favorite_count": 1, "accepted_answer_id": 44424824, "answer_count": 1, "score": 0, "last_activity_date": 1496881999, "creation_date": 1496871017, "question_id": 44423105, "link": "https://stackoverflow.com/questions/44423105/how-to-extract-column-from-python-pandas-pivot-table", "title": "How to extract column from Python Pandas Pivot_table?", "body": "<p>I have the following pandas pivot_table:\n<code>print table</code></p>\n\n<pre><code>Year\n1980.0     11.38\n1981.0     35.68\n1982.0     28.88\n1983.0     16.80\n1984.0     50.35\n1985.0     53.95\n1986.0     37.08\n1987.0     21.70\n1988.0     47.21\n1989.0     73.45\n1990.0     49.37\n1991.0     32.23\n1992.0     76.14\n1993.0     45.99\n1994.0     79.22\n1995.0     88.11\n1996.0    199.15\n1997.0    201.07\n1998.0    256.33\n1999.0    251.12\n2000.0    201.63\n2001.0    331.49\n2002.0    394.97\n2003.0    357.61\n2004.0    418.85\n2005.0    459.41\n2006.0    520.52\n2007.0    610.44\n2008.0    678.49\n2009.0    667.39\n2010.0    600.36\n2011.0    515.93\n2012.0    363.30\n2013.0    367.98\n2014.0    337.10\n2015.0    264.26\ndtype: float64\n</code></pre>\n\n<p>How do I extract the first column of this pivot_table? If I just do table[:,0], it gives me <code>ValueError: Can only tuple-index with a MultiIndex</code>. I am wondering what can I do in order to extract the first column of the table.</p>\n"}, {"tags": ["python", "rest", "python-requests", "certifi"], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 7569847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247d0a57e639baa0e227b9268ae5cd65?s=128&d=identicon&r=PG&f=1", "display_name": "doratheexplorer0911", "link": "https://stackoverflow.com/users/7569847/doratheexplorer0911"}, "is_accepted": true, "score": 0, "last_activity_date": 1496871856, "creation_date": 1496871856, "answer_id": 44423294, "question_id": 44423094, "link": "https://stackoverflow.com/questions/44423094/python-requests-get-raises-ssl-error-accessing-web-api/44423294#44423294", "title": "Python requests.get() raises SSL error accessing web API", "body": "<p>You need to make sure that your organization's SSL certificate is signed by a Certification Authority(CA), otherwise ssl connection won't work.</p>\n"}], "owner": {"reputation": 145, "user_id": 5203431, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10101410211811280/picture?type=large", "display_name": "dgketchum", "link": "https://stackoverflow.com/users/5203431/dgketchum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 44423294, "answer_count": 1, "score": 1, "last_activity_date": 1496878387, "creation_date": 1496870963, "last_edit_date": 1496878387, "question_id": 44423094, "link": "https://stackoverflow.com/questions/44423094/python-requests-get-raises-ssl-error-accessing-web-api", "title": "Python requests.get() raises SSL error accessing web API", "body": "<p>I'm trying to access the   at <code>https://www.ncdc.noaa.gov/cdo-we/api/v2/</code>.  This requires a token one receives immediately upon requesting it <a href=\"https://www.ncdc.noaa.gov/cdo-web/token\" rel=\"nofollow noreferrer\">here</a>. Then:</p>\n\n<pre><code>import requests\n\n\ndef get_noaa_data(url, data_type, header):\n\n    r = requests.get(url, data_type, headers=header)\n    print(r)\n\n\nif __name__ == '__main__':\n\n    token = 'longalphabetictoken'\n    creds = dict(token=token)\n    dtype = 'dataset'\n    url = 'https://www.ncdc.noaa.gov/cdo-web/api/v2/'\n\n    get_noaa_data(url, dtype, creds)\n</code></pre>\n\n<p>gives <code>requests.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:720)</code></p>\n\n<p>I understand I can set <code>verify=False</code>, but I do want to verify. I also want to be able to distribute this code, so I don't want to work around by modifying my cacert.pem.  I've also tried this with <code>certifi</code> imported into script. Is there an os-agnostic way to verify the NOAA site's SSL cert that would work if people download my package?</p>\n\n<p>It seems to me that there would be a secure way to access popular APIs like this without <code>verify=False</code>. Is this my organization's machine's problem?</p>\n\n<pre><code>ssl.get_default_verify_paths() = DefaultVerifyPaths(cafile='/data01/anaconda2/envs/imagenv/ssl/cert.pem', capath=None, openssl_cafile_env='SSL_CERT_FILE', openssl_cafile='/data01/anaconda2/envs/imagenv/ssl/cert.pem', openssl_capath_env='SSL_CERT_DIR', openssl_capath='/data01/anaconda2/envs/imagenv/ssl/certs')\n</code></pre>\n\n<p>FYI: https sites like amazon, google, etc work fine.</p>\n"}, {"tags": ["java", "python", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 7186443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0fdc5ca8f2c743ef5824a348eeec48a6?s=128&d=identicon&r=PG&f=1", "display_name": "LandSharks", "link": "https://stackoverflow.com/users/7186443/landsharks"}, "edited": false, "score": 0, "creation_date": 1496875924, "post_id": 44423761, "comment_id": 75846396, "body": "Should also be mentioned since you said you can also use java that selenium webdriver is also available for Java and a variety of other languages. <a href=\"http://www.seleniumhq.org/docs/03_webdriver.jsp\" rel=\"nofollow noreferrer\">seleniumhq.org/docs/03_webdriver.jsp</a>"}], "tags": [], "owner": {"reputation": 367, "user_id": 7186443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0fdc5ca8f2c743ef5824a348eeec48a6?s=128&d=identicon&r=PG&f=1", "display_name": "LandSharks", "link": "https://stackoverflow.com/users/7186443/landsharks"}, "is_accepted": false, "score": 0, "last_activity_date": 1496874513, "creation_date": 1496874513, "answer_id": 44423761, "question_id": 44423063, "link": "https://stackoverflow.com/questions/44423063/how-do-i-scrape-data-being-a-login-screen-for-different-login-names/44423761#44423761", "title": "How do I scrape data being a login screen for different login names?", "body": "<p>Not necessarily a scrape, but you can use Selenium Web Driver to browse to the page and input everything for you. Selenium Web Driver can be found <a href=\"http://selenium-python.readthedocs.io/installation.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Essentially, once it is installed you only need to instantiate the driver and then loop through a list of values inputting them as you go.</p>\n\n<pre><code>from selenium import webdriver\n# V sets up browser. If you want to use chrome addtional setup required\nbrowser = webdriver.Firefox()     \nfor i in len(100):               #loops to arbitrary amount\n    browser.get(\"http://exam.msrit.edu/\") #HTTP GET Request to page\n    elem = browser.find_element_by_id('id') #This is an html id. Could also use name, xpath, etc.\n    elem.send_keys(\"your string {}\".format(i)) #sends up keys\n    elem. browser.find_element_by_id('id) #id for search button\n    elem.click() #clicks that element\n</code></pre>\n\n<p>The documentation on selenium is pretty good. <a href=\"http://selenium-python.readthedocs.io/navigating.html\" rel=\"nofollow noreferrer\">http://selenium-python.readthedocs.io/navigating.html</a></p>\n\n<p>This will open a actual browser and will take some time to load so  it will not be the quickest way to do it but it will work. You can even take screenshots.</p>\n"}], "owner": {"reputation": 87, "user_id": 2711784, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0ffe1e7ed70e983a19d1149f5e7a97b4?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Gopal", "link": "https://stackoverflow.com/users/2711784/nikhil-gopal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496874513, "creation_date": 1496870838, "question_id": 44423063, "link": "https://stackoverflow.com/questions/44423063/how-do-i-scrape-data-being-a-login-screen-for-different-login-names", "title": "How do I scrape data being a login screen for different login names?", "body": "<p>I'm trying to compile the results of my class from my college's results page (<a href=\"http://exam.msrit.edu\" rel=\"nofollow noreferrer\">exam.msrit.edu</a>).</p>\n\n<p>The USNs for my class are from 1MS16CS001-100</p>\n\n<p>Is there any way that I could go about writing a scraper program to enter different values in the USN box and gather data? </p>\n\n<p>I am quite new to scraping but have decent enough exposure to Python and java</p>\n\n<p>Any advice is much appreciated :)</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "edited": false, "score": 1, "creation_date": 1496870971, "post_id": 44423062, "comment_id": 75844613, "body": "<code>find</code> returned None."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1496871060, "post_id": 44423062, "comment_id": 75844648, "body": "<code>bsObj.find(&quot;table&quot;,{&quot;id&quot;:&quot;giftlist&quot;})</code> is evaluating to <code>None</code>."}, {"owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 1, "creation_date": 1496871232, "post_id": 44423062, "comment_id": 75844727, "body": "To be clearer, bsObj.find(&quot;table&quot;,{&quot;id&quot;:&quot;giftlist&quot;}) returned a None object.  You then tried to call the children method of the None object which caused the error.  You need to check the results of the find method before committing it to this loop.  Or put the loop inside a try and handle the exception."}, {"owner": {"reputation": 25, "user_id": 7732675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1bf94f1b395d87a701becbdb58c7cc0?s=128&d=identicon&r=PG&f=1", "display_name": "vancouverde", "link": "https://stackoverflow.com/users/7732675/vancouverde"}, "edited": false, "score": 0, "creation_date": 1496871252, "post_id": 44423062, "comment_id": 75844736, "body": "so what should i do now? could you maybe help me?"}, {"owner": {"reputation": 25, "user_id": 7732675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1bf94f1b395d87a701becbdb58c7cc0?s=128&d=identicon&r=PG&f=1", "display_name": "vancouverde", "link": "https://stackoverflow.com/users/7732675/vancouverde"}, "edited": false, "score": 0, "creation_date": 1496871532, "post_id": 44423062, "comment_id": 75844841, "body": "i just put the loop insinde a try like this :  <code>try:     for child in bsObj.find(&quot;table&quot;,{&quot;id&quot;:&quot;giftlist&quot;}).children:         print(child) except Exception as e:     print(&quot;Tag was not found&quot;)</code>  it just printed &quot;Tag was not found&quot; . How could i fix the problem here?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1496872756, "post_id": 44423062, "comment_id": 75845289, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8949252/python-attribute-error-nonetype-object-has-no-attribute-something\">Python: Attribute Error - &#39;NoneType&#39; object has no attribute &#39;something&#39;</a>"}, {"owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 0, "creation_date": 1496876185, "post_id": 44423062, "comment_id": 75846473, "body": "What problem is that?  Your try worked exactly as you wrote it.  Your ultimate problem might be that bsObj.find() returns None. There is zero information here for anyone to help you with that problem.  All I can say is you need to find some html that has at least 1 table with id &quot;giftlist&quot;.  Until then, your find will always return None."}, {"owner": {"reputation": 25, "user_id": 7732675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1bf94f1b395d87a701becbdb58c7cc0?s=128&d=identicon&r=PG&f=1", "display_name": "vancouverde", "link": "https://stackoverflow.com/users/7732675/vancouverde"}, "edited": false, "score": 0, "creation_date": 1496876603, "post_id": 44423062, "comment_id": 75846640, "body": "there is already a table with id &quot;giftlist&quot;, you can open it on googleChrome and see !!!"}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "is_accepted": false, "score": 0, "last_activity_date": 1496875079, "creation_date": 1496875079, "answer_id": 44423867, "question_id": 44423062, "link": "https://stackoverflow.com/questions/44423062/attributeerror-nonetype-object-has-no-attribute-children/44423867#44423867", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;children&#39;", "body": "<p>One option is to put the offending loop construct into a try, then handle the exception that appears when the interator returns None:</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\n\nhtml = urlopen(\"http://www.pythonscraping.com/pages/page3.html\")\nbsObj = BeautifulSoup(html,\"html.parser\")\n\ntry:\n    for child in bsObj.find(\"table\",{\"id\":\"giftlist\"}).children:\n        print(child)\nexcept AttributeError:\n    # do what you want to do when bsObj.find() returns None\n</code></pre>\n\n<p>Or you could check the resulting list for None before entering the loop:</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\n\nhtml = urlopen(\"http://www.pythonscraping.com/pages/page3.html\")\nbsObj = BeautifulSoup(html,\"html.parser\")\n\nresult = bsObj.find(\"table\",{\"id\":\"giftlist\"})\nif result:\n    for child in result.children:\n        print(child)\nelse:\n    # do what you want to do when bsObj.find() returns None\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8776054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k-dNwFR0F-8/AAAAAAAAAAI/AAAAAAAAz-0/ldURxo3XhpE/photo.jpg?sz=128", "display_name": "Hubert Lu", "link": "https://stackoverflow.com/users/8776054/hubert-lu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507990012, "creation_date": 1507990012, "answer_id": 46745456, "question_id": 44423062, "link": "https://stackoverflow.com/questions/44423062/attributeerror-nonetype-object-has-no-attribute-children/46745456#46745456", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;children&#39;", "body": "<p>It's typo issue. I also meet the same problem. In the web page, the id name should be \"id=\"gift<strong>L</strong>ist\", not giftlist.\nIt should work after modifying the id name. Try it.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8835156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21969f083b24c6f96be531849beba9c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat_boss", "link": "https://stackoverflow.com/users/8835156/rajat-boss"}, "is_accepted": false, "score": 1, "last_activity_date": 1551967119, "creation_date": 1551967119, "answer_id": 55045537, "question_id": 44423062, "link": "https://stackoverflow.com/questions/44423062/attributeerror-nonetype-object-has-no-attribute-children/55045537#55045537", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;children&#39;", "body": "<p>You should put the code in try-except block </p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\n\nhtml = urlopen(\"http://www.pythonscraping.com/pages/page3.html\")\nbsObj = BeautifulSoup(html,\"html.parser\")\n\ntry:\n    for child in bsObj.find(\"table\",{\"id\":\"giftlist\"}).children:\n        print(child)\nexcept AttributeError as e:\n    print(e)\nexcept:\n    print(\"An error has occured\")\n</code></pre>\n\n<p>***In your case I have visited the website the id is not \"giftlist\", it's \"giftLift\" you have done a typing mistake and that's why find function is returning none type object.</p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 14589191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjxbQZQIFBhv1ukrCulxfR-8a_0q13ztqXFeyCm=k-s128", "display_name": "cliff_leaf", "link": "https://stackoverflow.com/users/14589191/cliff-leaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1604652864, "creation_date": 1604652864, "answer_id": 64711521, "question_id": 44423062, "link": "https://stackoverflow.com/questions/44423062/attributeerror-nonetype-object-has-no-attribute-children/64711521#64711521", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;children&#39;", "body": "<p>I'm not sure whether you have already solved this problem posted 3 years ago, but you've made a small mistake, I'm assuming.</p>\n<p><strong>The id of the tag is not giftlist... It is giftList</strong></p>\n<p>Is your code from the book &quot;Web Scraping With Python&quot; from the O'Reilly series? I found the exact same code from that book, including this webpage, <a href=\"https://pythonscraping.com/pages/page3.html\" rel=\"nofollow noreferrer\">pythonscraping.com/pages/page3.html</a>, which is posted by the author for the purpose of giving the readers a place to practice. Btw on the book it is also giftList, so I think you might have copied the code wrong</p>\n<p>try this one now</p>\n<pre><code>for child in bsObj.find(&quot;table&quot;,{&quot;id&quot;:&quot;giftList&quot;}).children:\nprint(child)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7732675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1bf94f1b395d87a701becbdb58c7cc0?s=128&d=identicon&r=PG&f=1", "display_name": "vancouverde", "link": "https://stackoverflow.com/users/7732675/vancouverde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3399, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1604652864, "creation_date": 1496870837, "last_edit_date": 1496874819, "question_id": 44423062, "link": "https://stackoverflow.com/questions/44423062/attributeerror-nonetype-object-has-no-attribute-children", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;children&#39;", "body": "<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\n\nhtml = urlopen(\"http://www.pythonscraping.com/pages/page3.html\")\nbsObj = BeautifulSoup(html,\"html.parser\")\n\nfor child in bsObj.find(\"table\",{\"id\":\"giftlist\"}).children:\n    print(child)\n</code></pre>\n\n<blockquote>\n  <p>Could anyone tell me what wrong with my code is? :((( What should i do next? </p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1496883508, "post_id": 44423000, "comment_id": 75848421, "body": "With your exact data, I cannot reproduce issue. No <code>NAN</code> rows show up with chain or loop merge. What is your environment? Python/pandas version? Also, does your data actually resemble posting."}, {"owner": {"reputation": 997, "user_id": 3483133, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/badfc19810f8531e64af122c1fc23cbf?s=128&d=identicon&r=PG&f=1", "display_name": "wi3o", "link": "https://stackoverflow.com/users/3483133/wi3o"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1497382398, "post_id": 44423000, "comment_id": 76051757, "body": "I&#39;m using python 3.6.1 and pandas 0.20.2 inside of conda environment. I retrieved all data from a mongoDB. I had to create my own datetime using python datetime for df1. I checked the type of date for all the other dfs (df2-4) and each has &lt;class &#39;pandas._libs.tslib.Timestamp&#39;&gt; date type. So, I converted df1 datetime to &lt;class &#39;pandas._libs.tslib.Timestamp&#39;&gt;, but still approach 1 and 2 don&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 0, "last_activity_date": 1496871046, "creation_date": 1496871046, "answer_id": 44423107, "question_id": 44423000, "link": "https://stackoverflow.com/questions/44423000/python-pandas-merging-several-dataframes-results-in-duplication-of-rows-with-u/44423107#44423107", "title": "Python, Pandas: Merging several dataframes results in duplication of rows with uneven NaN values", "body": "<p>You can also use pd.concat with set_index</p>\n\n<pre><code>pd.concat([df1.set_index('_id'), df2.set_index('_id'), df3.set_index('_id'), df4.set_index('_id')], axis = 1).reset_index()\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 3483133, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/badfc19810f8531e64af122c1fc23cbf?s=128&d=identicon&r=PG&f=1", "display_name": "wi3o", "link": "https://stackoverflow.com/users/3483133/wi3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496871046, "creation_date": 1496870587, "question_id": 44423000, "link": "https://stackoverflow.com/questions/44423000/python-pandas-merging-several-dataframes-results-in-duplication-of-rows-with-u", "title": "Python, Pandas: Merging several dataframes results in duplication of rows with uneven NaN values", "body": "<p>I have 4 dfs, which look like below</p>\n\n<p>df1</p>\n\n<pre><code>                     _id        bs        ds        as        pf\n0    2017-05-01 00:00:00  0.982218  0.906662  0.614119  0.999471\n1    2017-05-01 00:05:00  0.983751  0.913266  0.585237  0.999571\n2    2017-05-01 00:10:00  0.983012  0.914875  0.592698  0.999631\n3    2017-05-01 00:15:00  0.981884  0.910922  0.589013  0.999536\n4    2017-05-01 00:20:00  0.982611  0.913082  0.601056  0.999556\n5    2017-05-01 00:25:00  0.982386  0.912358  0.598856  0.999650\n</code></pre>\n\n<p>df2</p>\n\n<pre><code>                    _id  avg_time_serve  \n0   2017-05-01 00:00:00        0.520681            \n1   2017-05-01 00:05:00        0.521580            \n2   2017-05-01 00:10:00        0.517993            \n3   2017-05-01 00:15:00        0.520662            \n4   2017-05-01 00:20:00        0.514146            \n5   2017-05-01 00:25:00        0.513723            \n</code></pre>\n\n<p>df3</p>\n\n<pre><code>                    _id   total_distinct_ips    \n0   2017-05-01 00:00:00             291094.0     \n1   2017-05-01 00:05:00             287922.0     \n2   2017-05-01 00:10:00             292103.0     \n3   2017-05-01 00:15:00             295675.0     \n4   2017-05-01 00:20:00             297813.0     \n5   2017-05-01 00:25:00             302406.0     \n</code></pre>\n\n<p>df4</p>\n\n<pre><code>                    _id  total_40x  total_50x\n0   2017-05-01 00:00:00     162034          0\n1   2017-05-01 00:05:00     162497          0\n2   2017-05-01 00:10:00     161079          0\n3   2017-05-01 00:15:00     163338          0\n4   2017-05-01 00:20:00     167901          0\n5   2017-05-01 00:25:00     164394          0\n</code></pre>\n\n<p>I'm trying to combine them by '_id' column. The '_id' column is in timestamp format.</p>\n\n<p>I tried using the below approaches:</p>\n\n<pre><code>**Approach 1**\n\nfrom functools import reduce\n\ndfs = [df1, df2, df3, df4]\nfinal_df = reduce(lambda left,right: pd.merge(left, right, on='_id', \n           how='outer'), dfs)\n\n**Approach 2**\nfinal_df = pd.Dataframe()\n\nfor df in dfs:\n    if final_df.empty:\n        final_df = df\n    else:\n        final_df = pd.merge(final_df, df, how='outer', on='_id')\n</code></pre>\n\n<p>Both approaches give below result:</p>\n\n<pre><code>                    _id        bs        ds        as        pf  \\\n0   2017-05-01 00:00:00  0.982218  0.906662  0.614119  0.999471\n1   2017-05-01 00:00:00       NaN       NaN       NaN       NaN\n2   2017-05-01 00:05:00  0.983751  0.913266  0.585237  0.999571\n3   2017-05-01 00:05:00       NaN       NaN       NaN       NaN\n4   2017-05-01 00:10:00  0.983012  0.914875  0.592698  0.999631\n5   2017-05-01 00:10:00       NaN       NaN       NaN       NaN\n\n     avg_time_serve  total_distinct_ips  total_40x  total_50x\n0               NaN            291094.0     162034          0\n1          0.520681            291094.0     162034          0\n2               NaN            287922.0     162497          0\n3          0.521580            287922.0     162497          0\n4               NaN            292103.0     161079          0\n5          0.517993            292103.0     161079          0\n</code></pre>\n\n<p><strong>Approach 3</strong></p>\n\n<p>I took out 'df1' from dfs list, and added a 'join'.</p>\n\n<pre><code>from functools import reduce\n\ndfs = [df2, df3, df4]\nfinal_df = reduce(lambda left,right: pd.merge(left, right, on='_id', \n           how='outer'), dfs)\nfinal_df = final_df.join(df1.set_index('_id'), on='_id')\n</code></pre>\n\n<p>and finally got the right result</p>\n\n<pre><code>                    _id  avg_time_serve  total_distinct_ips  total_40x \n0   2017-05-01 00:00:00        0.520681            291094.0     162034\n1   2017-05-01 00:05:00        0.521580            287922.0     162497\n2   2017-05-01 00:10:00        0.517993            292103.0     161079\n3   2017-05-01 00:15:00        0.520662            295675.0     163338\n4   2017-05-01 00:20:00        0.514146            297813.0     167901\n5   2017-05-01 00:25:00        0.513723            302406.0     164394\n\n     total_50x        bs        ds        as        pf\n0            0  0.982218  0.906662  0.614119  0.999471\n1            0  0.983751  0.913266  0.585237  0.999571\n2            0  0.983012  0.914875  0.592698  0.999631\n3            0  0.981884  0.910922  0.589013  0.999536\n4            0  0.982611  0.913082  0.601056  0.999556\n5            0  0.982386  0.912358  0.598856  0.999650\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li><p>Shouldn't approach #1 and #2 work for any amount of dataframes merged together?</p></li>\n<li><p>Why did approach 1 and 2 created duplicates of '_id' and insert NaN values?</p></li>\n</ol>\n"}, {"tags": ["python", "duplicates"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1496870717, "post_id": 44422999, "comment_id": 75844495, "body": "When you apply a <code>for</code> loop (or any other loop) to a dataframe, in 99% you are doing something wrong."}, {"owner": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1496871280, "post_id": 44422999, "comment_id": 75844750, "body": "Do you have any ideas?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "edited": false, "score": 0, "creation_date": 1496872362, "post_id": 44423225, "comment_id": 75845137, "body": "Thank you. So, why did we just take 2 subsets while we got 3?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "edited": false, "score": 0, "creation_date": 1496872494, "post_id": 44423225, "comment_id": 75845188, "body": "You <i>do not</i> want the <i>same variable</i> with the <i>same value</i>."}, {"owner": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "edited": false, "score": 0, "creation_date": 1496877835, "post_id": 44423225, "comment_id": 75847013, "body": "Many thanks. Your answer works, but I get one issue in my data, that, at the instant t3, same var1, and value 3 is same to value 1, and I would like to keep value 3 at var1 at t3 because it&#39;s not consecutive with t1. I updated my data."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "edited": false, "score": 0, "creation_date": 1496877919, "post_id": 44423225, "comment_id": 75847040, "body": "Its&#39; a different question and requires a different answer."}, {"owner": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "edited": false, "score": 0, "creation_date": 1496879102, "post_id": 44423225, "comment_id": 75847375, "body": "Thank you. I will raise the other question."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1496871586, "creation_date": 1496871586, "answer_id": 44423225, "question_id": 44422999, "link": "https://stackoverflow.com/questions/44422999/how-to-drop-duplicates/44423225#44423225", "title": "How to drop_duplicates", "body": "<pre><code>df.drop_duplicates(subset=['Variable','Value'],keep='first')\n#                time Variable  Value\n#2014-07-11  19:50:20     Var1     10\n#2014-07-11  19:50:30     Var1     20\n#2014-07-11  19:50:50     Var2     30\n#2014-07-11  19:50:60     Var2     40\n#2014-07-11  19:50:70     Var2     50\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7832876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4706834d9c7e368c0eb427b82a97dc1?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTram", "link": "https://stackoverflow.com/users/7832876/nguyentram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 44423225, "answer_count": 1, "score": 0, "last_activity_date": 1496879166, "creation_date": 1496870583, "last_edit_date": 1496879166, "question_id": 44422999, "link": "https://stackoverflow.com/questions/44422999/how-to-drop-duplicates", "title": "How to drop_duplicates", "body": "<p>I have raw data as following example. At instant t1, a variable has a value x1, this variable should be recorded at instant t2 if and only if its value is not equal to x1. There is a way to compare a value in dataframes in python with the previous value and delete it if it's the same. I tried follow function, but it doesn't work.Please help.</p>\n\n<pre><code>df\ntime                 Variable   Value\n2014-07-11 19:50:20  Var1       10\n2014-07-11 19:50:30  Var1       20\n2014-07-11 19:50:40  Var1       20\n2014-07-11 19:50:50  Var1       30\n2014-07-11 19:50:60  Var1       20 \n2014-07-11 19:50:70  Var2       50\n2014-07-11 19:50:80  Var2       60\n2014-07-11 19:50:90  Var2       70\n</code></pre>\n\n<p>Coding:</p>\n\n<pre><code>for y in df.time:\n    for x in df.Value:\n        if y == y:\n            if x == x:\n                df1 = df.drop_duplicates(subset = ['time', 'Variable', 'Value'], keep=False) \n            else:\n                df1 = df.drop_duplicates(['time', 'Variable', 'Value'])\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>df\ntime                 Variable   Value\n2014-07-11 19:50:20  Var1       10\n2014-07-11 19:50:30  Var1       20\n2014-07-11 19:50:50  Var1       30\n2014-07-11 19:50:60  Var1       20 \n2014-07-11 19:50:70  Var2       50\n2014-07-11 19:50:80  Var2       60\n2014-07-11 19:50:90  Var2       70\n</code></pre>\n"}, {"tags": ["python", "opencv", "image-processing", "text"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1496871844, "post_id": 44422965, "comment_id": 75844941, "body": "Have you read the content of the link? FYI There is another answer where the C++ code is rewritten in Python. What have you tried?"}, {"owner": {"reputation": 14454, "user_id": 363661, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f72e1c0e1e7be6b60e7cf159e0f613ce?s=128&d=identicon&r=PG", "display_name": "esafwan", "link": "https://stackoverflow.com/users/363661/esafwan"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1496873186, "post_id": 44422965, "comment_id": 75845482, "body": "@barny I have tried text detection a while ago. That part I am confident, but with respect to measuring area am totally blank. I haven&#39;t tried anything with respect to measuring area, hence I have no clue where to start. So if get some clue, I want to try it."}, {"owner": {"reputation": 14454, "user_id": 363661, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f72e1c0e1e7be6b60e7cf159e0f613ce?s=128&d=identicon&r=PG", "display_name": "esafwan", "link": "https://stackoverflow.com/users/363661/esafwan"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1496874415, "post_id": 44422965, "comment_id": 75845934, "body": "@barny Added the code that worked for me, which I found online."}], "answers": [{"tags": [], "owner": {"reputation": 3203, "user_id": 1819423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ruMr.png?s=128&g=1", "display_name": "Totoro", "link": "https://stackoverflow.com/users/1819423/totoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1496888212, "creation_date": 1496888212, "answer_id": 44425593, "question_id": 44422965, "link": "https://stackoverflow.com/questions/44422965/detect-text-on-an-image-calculate-the-area-used-using-opencv/44425593#44425593", "title": "Detect text on an image &amp; calculate the area used using OpenCv", "body": "<p>A good starting point is to </p>\n\n<ol>\n<li><p>Calculate the total area (w*h) of bounding boxes. This corresponds to the total area of the image covered with text.</p></li>\n<li><p>Compare that with the total number of pixels in the image (rows*cols)</p></li>\n</ol>\n\n<p>Do note that this value will not be accurate as it is, because there can be different font sizes and line spacings. To determine the exact margin where 40% of the image is covered with text, you should find the threshold by picking several images with around 40% covered with text, both above and below that amount, as identified by humans.</p>\n"}], "owner": {"reputation": 14454, "user_id": 363661, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f72e1c0e1e7be6b60e7cf159e0f613ce?s=128&d=identicon&r=PG", "display_name": "esafwan", "link": "https://stackoverflow.com/users/363661/esafwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1168, "favorite_count": 1, "closed_date": 1496907883, "accepted_answer_id": 44425593, "answer_count": 1, "score": 1, "last_activity_date": 1496888212, "creation_date": 1496870441, "last_edit_date": 1496874369, "question_id": 44422965, "link": "https://stackoverflow.com/questions/44422965/detect-text-on-an-image-calculate-the-area-used-using-opencv", "closed_reason": "Needs more focus", "title": "Detect text on an image &amp; calculate the area used using OpenCv", "body": "<p>I want to detect the percentage of the area the text blocks are using on an image. The idea is to reject images that have more than 40% text on it. I saw a very informative and detailed post in detecting text <a href=\"https://stackoverflow.com/questions/23506105/extracting-text-opencv\">here</a>. The link is having C++ used. I think I can get the idea to use it in python.</p>\n\n<p>However, am not sure what would be the best way to measure the percentage of the area it is using. Is there any implementation of something similar that we could use? I am just getting started with Cv.</p>\n\n<p>I am getting my text as below using python. This is a code I found to work from a forum online. </p>\n\n<pre><code>import cv2\n\ndef captch_ex(file_name):\n    img = cv2.imread(file_name)\n    img_final = cv2.imread(file_name)\n    img2gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    ret, mask = cv2.threshold(img2gray, 180, 255, cv2.THRESH_BINARY)\n    image_final = cv2.bitwise_and(img2gray, img2gray, mask=mask)\n    ret, new_img = cv2.threshold(image_final, 180, 255, cv2.THRESH_BINARY) \n\n\n\n    kernel = cv2.getStructuringElement(cv2.MORPH_CROSS, (3,3)) \n    dilated = cv2.dilate(new_img, kernel, iterations=9)  \n\n    contours, hierarchy = cv2.findContours(dilated, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\n\n    for contour in contours:\n\n        [x, y, w, h] = cv2.boundingRect(contour)\n\n\n        if w &lt; 35 and h &lt; 35:\n            continue\n\n        cv2.rectangle(img, (x, y), (x + w, y + h), (255, 0, 255), 2)\n\n\n    cv2.imshow('captcha_result', img)\n    cv2.waitKey()\n\nfile_name = 'my_image.jpg'\ncaptch_ex(file_name)\n</code></pre>\n\n<p>However, how do I proceed further?</p>\n"}, {"tags": ["python", "decimal"], "comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1496870340, "post_id": 44422918, "comment_id": 75844326, "body": "Can you share what you have tried ?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1496870379, "post_id": 44422918, "comment_id": 75844337, "body": "You round <i>before</i> taking the square root. Note you should give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <b>as text</b>."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 2, "creation_date": 1496870381, "post_id": 44422918, "comment_id": 75844339, "body": "Your code as text please."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 1, "creation_date": 1496870454, "post_id": 44422918, "comment_id": 75844369, "body": "For example: <code>round(sqrt(600),2)</code>."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1496870457, "post_id": 44422918, "comment_id": 75844370, "body": "just print it to 2 decimal places <code>&quot;{num:0.2f}&quot;.format(num=sqrt(x))</code> ... rounding simply rounds the value it will still probably print more that two decimal places"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1496870545, "post_id": 44422918, "comment_id": 75844417, "body": "Just print using 2 decimal places? Have you tried it <code>print &quot;{:.2f}&quot;.format(math.sqrt(round(number,2)))</code>?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1496870751, "post_id": 44422918, "comment_id": 75844512, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1496870754, "post_id": 44422918, "comment_id": 75844513, "body": "In the future, please post your code as formatted text rather than an image. This makes it easier to read as well as copy and paste into our editors to try out."}], "answers": [{"tags": [], "owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "is_accepted": false, "score": 2, "last_activity_date": 1496870564, "creation_date": 1496870564, "answer_id": 44422996, "question_id": 44422918, "link": "https://stackoverflow.com/questions/44422918/square-root-to-2-decimal-places/44422996#44422996", "title": "Square Root to 2 Decimal places", "body": "<pre><code>&gt;&gt;&gt; format(math.sqrt(500), '.2f')\n'22.36'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 5826869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10208182703302470/picture?type=large", "display_name": "Abhinav Goel", "link": "https://stackoverflow.com/users/5826869/abhinav-goel"}, "is_accepted": false, "score": 0, "last_activity_date": 1496871671, "creation_date": 1496871671, "answer_id": 44423248, "question_id": 44422918, "link": "https://stackoverflow.com/questions/44422918/square-root-to-2-decimal-places/44423248#44423248", "title": "Square Root to 2 Decimal places", "body": "<p>I think you can use the format() function</p>\n\n<pre><code>format(math.sqrt(num), '.2f')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8127737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b049cf4bc275b6bfe321df0a16d4361e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/8127737/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3423, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1496874693, "creation_date": 1496870255, "last_edit_date": 1496874693, "question_id": 44422918, "link": "https://stackoverflow.com/questions/44422918/square-root-to-2-decimal-places", "title": "Square Root to 2 Decimal places", "body": "<p>I've been trying to do some homework and was getting on fine until I came across a particular task.</p>\n\n<p>The Task is: Ask the user to enter an integer that is over 500. Work out the square root of that number and display it to 2 decimal places.</p>\n\n<p>My current code is below I have managed to make it do the square root part but it is not displaying it to 2 decimal places.</p>\n\n<pre><code>import math\nnumber = float(input(\"Please Input a number over 500 and i will work out the square root of that number and display it to 2 decimal places! \"))\n\nif number &lt; 500:\n    print(\"That number is not above 500!\")\nelse:\n    print(math.sqrt(round(number,2)))\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas", "flask"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1496872024, "post_id": 44422915, "comment_id": 75845012, "body": "It doesn&#39;t look like you&#39;re passing the created filename to <code>pd.read_csv()</code>"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1496872129, "post_id": 44422915, "comment_id": 75845053, "body": "For example: <code>pd.read_csv(&quot;uplodovano&quot;+file.filename)</code>"}], "owner": {"reputation": 133, "user_id": 7571023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BT0Gg.jpg?s=128&g=1", "display_name": "Dalibor", "link": "https://stackoverflow.com/users/7571023/dalibor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496870243, "creation_date": 1496870243, "question_id": 44422915, "link": "https://stackoverflow.com/questions/44422915/python-flask-and-pandas", "title": "Python Flask and Pandas", "body": "<p>I am trying to upload a CSV file, and read it with Pandas, then add a column of data to that CSV file. But, I'm getting an error pandas.errors.EmptyDataError: No columns to parse from file</p>\n\n<pre><code>@app.route(\"/success\", methods=[\"POST\"])\ndef success():\n    global file\n    if request.method==\"POST\":\n        file=request.files[\"file\"]\n        file.save(secure_filename(\"uplodovano\"+file.filename))\n        podaci=pd.read_csv(file, index_col=\"Rbr\")\n        df=pd.DataFrame(podaci)\n\n        while True:\n            try:\n                if \"Adresa\" in df.columns:\n                    df1=df[\"Adresa\"]\n                    lst=[]\n                    for i in df1:\n                        g1=geocoder.google(i)\n                        g2=g1.latlng\n                        lst.append(g2)\n\n                    df[\"Koordinate\"]=lst\n                    df.to_csv(\"izvezeno.csv\")\n                    print(df)\n                    break\n                elif \"adresa\" in df.columns:\n                    df1=df[\"adresa\"]\n                    lst=[]\n                    for i in df1:\n                        g1=geocoder.google(i)\n                        g2=g1.latlng\n                        lst.append(g2)\n\n                    df[\"Koordinate\"]=lst\n                    df.to_csv(\"izvezeno.csv\")\n                    print(df)\n                    break\n                else:\n                    print(\"Ne postoje podaci o adresama. Please check CSV fajl!!!!!!\")\n                    break\n            except KeyError:\n                break\n        return render_template(\"index.html\", btn=\"download.html\")@app.route(\"/success\", methods=[\"POST\"])\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496869910, "post_id": 44422775, "comment_id": 75844150, "body": "Hard to read that code (a very different style from mine), but to me it looks the dashed lines are plotted last."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496870004, "post_id": 44422775, "comment_id": 75844179, "body": "Yes, but why would that make any difference? The lowest orange and yellow dots have the same y-coordinate as the horizontal dashed line."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496870057, "post_id": 44422775, "comment_id": 75844204, "body": "Ah, i misinterpreted your <i>below</i>."}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "edited": false, "score": 0, "creation_date": 1496870322, "post_id": 44422775, "comment_id": 75844318, "body": "some rounding issues ?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496870655, "post_id": 44422775, "comment_id": 75844468, "body": "That&#39;s over the top for me, but a quick glance showed it&#39;s really hard to grab info about those internals (centering, radius vs. diameter and co). For <a href=\"https://matplotlib.org/api/lines_api.html\" rel=\"nofollow noreferrer\">line2d</a> there is <code>markersize</code> and <code>linewidth</code>. Maybe you should be consistent too in regards to that. Also interesting is the doc-string: <code>markersize: float</code>, <code>linewidth: float value in points</code>. But i&#39;m only guessing."}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "edited": false, "score": 0, "creation_date": 1496871781, "post_id": 44422775, "comment_id": 75844913, "body": "I can produce the same picture as you. But when Ii enlarge the window, the picture is enlarge too and the artefact  disappears."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1496910335, "post_id": 44422775, "comment_id": 75858568, "body": "I would consider this to be a bug. Since version 2 matplotlib has somehow lost accuracy when it comes to plotting. I guess you can find a more minimal example for this and post an issue at matplotlib GitHub issue tracker."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1496932400, "post_id": 44422775, "comment_id": 75874731, "body": "<i>more</i> minimal example? it was tough enough to find this one."}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1496870090, "creation_date": 1496869595, "last_edit_date": 1496870090, "question_id": 44422775, "link": "https://stackoverflow.com/questions/44422775/why-does-pixel-quantization-in-matplotlib-seem-to-work-differently-for-lines-and", "title": "Why does pixel quantization in matplotlib seem to work differently for lines and points?", "body": "<p>I'm trying to partition some data in a graph into four quadrants and I get a funny behavior near the boundaries. Here's a simple example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nnp.random.seed(123)\nxy = np.random.randn(100000,2)\nofs = 6.0\nx0 = 0\ny0 = 0\nx = xy[:,0]\ny = xy[:,1]\nw = 2\nplt.figure(figsize=(10,8))\nf = plt.plot\nfor k,color in [(0,'green'),\n                (1,'red'),\n                (2,'orange'),\n                (3,'yellow')]:\n    sx = (k&amp;1)*2-1\n    sy = (k&amp;2)-1\n    ii = ((x-x0)*sx&gt;=0) &amp; ((y-y0)*sy&gt;=0)\n    f(x[ii]+ofs,y[ii]+ofs,'.',markersize=w,color=color)\nf(plt.xlim(),[y0+ofs,y0+ofs],'--k',linewidth=w)\nf([x0+ofs,x0+ofs],plt.ylim(),'--k',linewidth=w)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lgtMb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lgtMb.png\" alt=\"enter image description here\"></a></p>\n\n<p>The dots and the lines are the same width, so while I would have expected the dashed lines to show up with red/orange/yellow backgrounds (since those dots are plotted last), why is it that I can see orange and yellow <em>below</em> the dashed lines? (\"below\" = vertically below, not z-order below)</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 2, "creation_date": 1496869573, "post_id": 44422741, "comment_id": 75843996, "body": "error is <code>No module named &#39;web&#39;</code>"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 2, "creation_date": 1496869778, "post_id": 44422741, "comment_id": 75844083, "body": "That module is trying to load some other module called <code>web</code> in the global &#39;namespace&#39;, and your Python doesn&#39;t have it."}, {"owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 0, "creation_date": 1496870772, "post_id": 44422741, "comment_id": 75844520, "body": "I&#39;ve run into this with a couple different packages.  I just tested with this delphixpy package.  I installed to my Py3.6 build and my Py2.7 build, both using PIP.  Imported just fine in 2.7, failed with the same error as OP in 3.6.  In all cases I&#39;ve seen it, it doesn&#39;t seem like there should be an error.  Anyone have more experience with the package management of python 2 vs python 3?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1496889626, "post_id": 44422741, "comment_id": 75849807, "body": "What is the <code>pip</code> command that you used? If you didn&#39;t run <code>pip</code> by its full/relative path path, could you post the output of <code>which pip</code>? Because the path where it searches for the <i>web</i> module is: <i>/home/oracle/Envs/delphix/lib/python3.5/site-packages</i>."}], "owner": {"reputation": 1, "user_id": 1450534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8cc28f22b50993e26229c482b180e6?s=128&d=identicon&r=PG", "display_name": "user1450534", "link": "https://stackoverflow.com/users/1450534/user1450534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549041575, "creation_date": 1496869478, "last_edit_date": 1496869977, "question_id": 44422741, "link": "https://stackoverflow.com/questions/44422741/python-failure-in-loading-modules-from-sitepackages", "title": "python failure in loading modules from sitepackages", "body": "<p>I have installed a package from python using pip.  When i'm trying to load that module failed with errors.</p>\n\n<pre><code>Python 3.5.2 (default, Dec 22 2016, 12:23:20)\n[GCC 4.8.5] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import delphixpy\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/home/oracle/Envs/delphix/lib/python3.5/site-packages/delphixpy/__init__.py\", line 6, in &lt;module&gt;\n    import web\nImportError: No module named 'web'\n</code></pre>\n\n<hr>\n\n<p>When i look towards the folder, i could see the folders available  in the site-packages/delphixpy/</p>\n\n<p>I see the file <strong>init</strong>.py available in each and every subfolder as well.   Still it is failing loading the modules.</p>\n\n<p>Regards,\nRamesh G</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 4, "creation_date": 1496869495, "post_id": 44422720, "comment_id": 75843970, "body": "<a href=\"https://pyformat.info\" rel=\"nofollow noreferrer\">pyformat.info</a>"}, {"owner": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 0, "creation_date": 1496869815, "post_id": 44422720, "comment_id": 75844102, "body": "Do you have any constraints on the numbers? Most simple methods will force you to establish max number of digits that the value can be. Eg. <code>str.rjust()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1496871711, "last_edit_date": 1496871711, "creation_date": 1496870229, "answer_id": 44422910, "question_id": 44422720, "link": "https://stackoverflow.com/questions/44422720/how-do-i-right-justify-numbers-with-decimal-points-using-python-3-6/44422910#44422910", "title": "How do I right justify numbers with decimal points using Python 3.6", "body": "<p>Chaining string formatters works:</p>\n\n<pre><code>&gt;&gt;&gt; \"Cash Money: %10s\" % \"$%.2f\" % 6.124\n'Cash Money:      $6.12'\n</code></pre>\n\n<p>The first one adds the symbol &amp; formats the number, the second pads it to the proper length.</p>\n\n<p>Used in a more realistic way:</p>\n\n<pre><code>str_bal = \"$%.2f\" % bal\nprint \"Balance: %20s\" % str_bal\n</code></pre>\n\n<p>A real world example:</p>\n\n<p>I've build a report which intelligently resizes via mixing format strings:</p>\n\n<pre><code>format_string = \"%-9s %-{}s %6.3f%% (%{}i/%{}i) total events: %{}i\".format(\n                 max_len_key, max_len_pos, max_len_total, max_len_events)\nfor entry in table:\n    ...\n    print format_string % (title, key, percent, pos, total, event)\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>Version:  1.0.0.0  2.688% (10/372) total events: 150\nVersion:  1.4.1.15 0.000% ( 0/181) total events:  73\n</code></pre>\n\n<p>Note: you can do this without mixing formatters, but I think this ends up clearer than the abomination <code>\"%%-9s %%-%is %%6.3f%%%% (%%%ii/%%%ii) total events: %%%ii\"</code> (which is the valid replacement for the first format string).</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 6907174, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qDR2W7Sz6MI/AAAAAAAAAAI/AAAAAAAAeGo/JVilwO6FwEI/photo.jpg?sz=128", "display_name": "Viraj Rai", "link": "https://stackoverflow.com/users/6907174/viraj-rai"}, "is_accepted": true, "score": 3, "last_activity_date": 1496871390, "creation_date": 1496871390, "answer_id": 44423183, "question_id": 44422720, "link": "https://stackoverflow.com/questions/44422720/how-do-i-right-justify-numbers-with-decimal-points-using-python-3-6/44423183#44423183", "title": "How do I right justify numbers with decimal points using Python 3.6", "body": "<p>You could use: </p>\n\n<pre><code>print('{:&lt;15}: {:&gt;10.2f}'.format('Bonus', bonus),sep='') \n</code></pre>\n\n<p>The > takes care of right alignment while the .2f takes care of the decimal points. </p>\n"}], "owner": {"reputation": 13, "user_id": 8127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5d76d9503a2687ac09b3552b9af897?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/8127985/mark-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3217, "favorite_count": 1, "accepted_answer_id": 44423183, "answer_count": 2, "score": -1, "last_activity_date": 1496872057, "creation_date": 1496869390, "last_edit_date": 1496869813, "question_id": 44422720, "link": "https://stackoverflow.com/questions/44422720/how-do-i-right-justify-numbers-with-decimal-points-using-python-3-6", "title": "How do I right justify numbers with decimal points using Python 3.6", "body": "<p>I am looking for a way to right justify the numbers in the output so all the decimal points line up, Using Python 3.6.1.</p>\n\n<p>The general format I am using is: </p>\n\n<pre><code>print('Bonus: $',format(bonus, ',.2f'),sep='') \n</code></pre>\n\n<p>but I cannot figure out how to get the numbers to right justify and keep the currency format.  Here's a pic of output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UNznK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UNznK.png\" alt=\"Sales Output\"></a></p>\n"}, {"tags": ["python", "sql"], "answers": [{"comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1496872329, "post_id": 44422866, "comment_id": 75845125, "body": "In fact, you should use cursor parameters instead. No format or modulus for literal values."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1496930468, "post_id": 44422866, "comment_id": 75873140, "body": "Great. That is what I was looking for"}], "tags": [], "owner": {"reputation": 543, "user_id": 5843188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dffa95ddd998f0d12b8d8e3a1d5a8b6c?s=128&d=identicon&r=PG&f=1", "display_name": "jpgard", "link": "https://stackoverflow.com/users/5843188/jpgard"}, "is_accepted": true, "score": 1, "last_activity_date": 1496872744, "last_edit_date": 1496872744, "creation_date": 1496870021, "answer_id": 44422866, "question_id": 44422717, "link": "https://stackoverflow.com/questions/44422717/python-how-to-combine-two-sql-queries/44422866#44422866", "title": "Python: How to combine two SQL queries", "body": "<p>It depends -- what do you mean by \"combine?\" Do you mean concatenate row-wise? If so, you're looking for <code>UNION ALL</code>:</p>\n\n<pre><code>cur.execute(\"SELECT email FROM notifications WHERE diraddr = {0} UNION ALL SELECT email FROM users WHERE (username LIKE {1}) AND (domain LIKE {2}) and notifications = 'Y'\".format(sys.argv[1], bits[0], bits[1]))\n</code></pre>\n\n<p>The <code>UNION ALL</code> operator combines the results from multiple queries, as long as they have the same number of columns. This will work even if one (or both) of the subqueries return no results.</p>\n\n<blockquote>\n  <p>Note: I updated your code using <a href=\"https://docs.python.org/2/library/stdtypes.html#str.format\" rel=\"nofollow noreferrer\">Python's .format() method</a>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1496930180, "post_id": 44423057, "comment_id": 75872896, "body": "Exactly what I was doing but I was looking for to get it done at one shot (query)."}, {"owner": {"reputation": 157, "user_id": 7638826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ddb93a495eea41eb9b01930c1d1a2591?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath K", "link": "https://stackoverflow.com/users/7638826/bharath-k"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 1, "creation_date": 1496931896, "post_id": 44423057, "comment_id": 75874330, "body": "Since the functionality is to execute based on an event (if-else), you have to write a if -else logic to get this done.   or else   use the UNION statement as mentioned in above answer. NOTE: The above query has UNION ALL in it. This might retrieve more than 1 record in case the value exists in both the tables. So, use a UNION instead of UNION ALL to retrieve only UNIQUE record every time."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1496937074, "post_id": 44423057, "comment_id": 75878297, "body": "Good idea. Thanks for your help!"}], "tags": [], "owner": {"reputation": 157, "user_id": 7638826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ddb93a495eea41eb9b01930c1d1a2591?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath K", "link": "https://stackoverflow.com/users/7638826/bharath-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1496870827, "creation_date": 1496870827, "answer_id": 44423057, "question_id": 44422717, "link": "https://stackoverflow.com/questions/44422717/python-how-to-combine-two-sql-queries/44423057#44423057", "title": "Python: How to combine two SQL queries", "body": "<p>Can you be more specific with the question when you say COMBINE.</p>\n\n<p>From what I understand from the code is that you will you be getting an email id as input (as argument)? </p>\n\n<p>You will split that email id and store username and domain name as 2 list elements. If the first query do not return any result(querying notification table) , then you want to execute another query(on users table) using the element in the list?</p>\n\n<p>If above scenario is true, then use a simple if else logic to check if the first query is returning any result.If it is not returning anything, then execute the 2nd query in the else part.</p>\n"}], "owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1962, "favorite_count": 0, "closed_date": 1496900700, "accepted_answer_id": 44422866, "answer_count": 2, "score": 0, "last_activity_date": 1496930425, "creation_date": 1496869383, "last_edit_date": 1496930425, "question_id": 44422717, "link": "https://stackoverflow.com/questions/44422717/python-how-to-combine-two-sql-queries", "closed_reason": "Needs details or clarity", "title": "Python: How to combine two SQL queries", "body": "<p>As I have limited knowledge about Python how can I crate in Python one query  which will contains both from below where second will be queried for when first will return not results (no email address returned)</p>\n\n<p>Code blow</p>\n\n<pre><code>bits = sys.argv[1].split('@')\nif len(bits) != 2:\n    sys.exit(0)\n\ncur.execute(\"SELECT email FROM notifications WHERE diraddr = %s\", (sys.argv[1],))    \ncur.execute(\"SELECT email FROM users WHERE (username LIKE %s) AND (domain LIKE %s) and notifications = 'Y'\", (bits[0], bits[1]))\n</code></pre>\n\n<p>I have tried to do IF...ELSE for <code>email</code> return results from  first SQL query but it looks like can be done in one query without IF...ELSE statement.</p>\n"}, {"tags": ["python", "list", "for-loop"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496869414, "post_id": 44422696, "comment_id": 75843938, "body": "&quot;<i>but in the data it can contain the same string...</i>&quot; meaning?"}, {"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1496869437, "post_id": 44422696, "comment_id": 75843949, "body": "What is the inefficient way to accomplish this?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1496869611, "post_id": 44422696, "comment_id": 75844014, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a design, coding, research, or tutorial service."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1496869914, "post_id": 44422696, "comment_id": 75844153, "body": "I do not understand the logic of how your example input would get turned into your desired output."}, {"owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "edited": false, "score": 0, "creation_date": 1496870130, "post_id": 44422696, "comment_id": 75844233, "body": "You need to provide more information about how to data for each student is store. Or are you just wanting to strip the inner double quotations from the answers in the list?"}], "answers": [{"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": true, "score": 0, "last_activity_date": 1496871448, "creation_date": 1496871448, "answer_id": 44423198, "question_id": 44422696, "link": "https://stackoverflow.com/questions/44422696/replacing-items-in-nested-list-that-contain-same-answer/44423198#44423198", "title": "Replacing items in nested list that contain same answer", "body": "<p>You can create a simple <code>[index, answer, replacement]</code> replacement map, like:</p>\n\n<pre><code>replacement_map = {\n    1: {'\"answer 0\"': \"Blue\",  # replacements for index 1\n        '\"answer 1\"': \"Green\",\n        '\"answer 2\"': \"Yellow\",\n        '\"answer 3\"': \"Purple\",\n        '\"answer 4\"': \"Red\"},\n    2: {'\"answer 0\"': \"Right\",  # replacements for index 2\n        '\"answer 1\"': \"Left\",\n        '\"answer 2\"': \"Up\",\n        '\"answer 4\"': \"Down\"},\n    3: {'\"answer 0\"': \"Up\",  # replacements for index 3\n        '\"answer 1\"': \"Down\",\n        '\"answer 2\"': \"Left\",\n        '\"answer 4\"': \"Right\"},\n    4: {'\"answer 0\"': \"Football\",  # replacements for index 4\n        '\"answer 1\"': \"Pocket billiard\"}\n}\n\ndata = [\n    ['student 1', '\"answer 0\"', '\"answer 2\"', '\"answer 2\"', '\"answer 0\"'],\n    ['student 2', '\"answer 4\"', '\"answer 2\"', '\"answer 4\"', '\"answer 0\"']\n]\n\nreplaced_data = []  # we'll store our data here\nfor element in data:\n    replaced_element = []\n    for index, item in enumerate(element):\n        if index in replacement_map:\n            replaced_element.append(replacement_map[index].get(item, item))\n        else:  # no replacement available for this index\n            replaced_element.append(item)\n    replaced_data.append(replaced_element)\n# replaced_data contains:\n# [['student 1', 'Blue', 'Up', 'Left', 'Football'],\n#  ['student 2', 'Red', 'Up', 'Right', 'Football']]\n</code></pre>\n\n<p>If you really want it as efficient as possible, you can do it through list comprehension:</p>\n\n<pre><code>replaced_data = [[replacement_map.get(index, {}).get(item, item) for index, item in enumerate(element)] for element in data]\n</code></pre>\n\n<p>But that won't give you much of a speed up (in fact, in dependence on the replacement map it might end up slower) and is horrible to read.</p>\n"}], "owner": {"reputation": 63, "user_id": 8108733, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/fdfd8f70f77e0c7ba5465fa5a53b6920?s=128&d=identicon&r=PG&f=1", "display_name": "fcb434", "link": "https://stackoverflow.com/users/8108733/fcb434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1496901158, "accepted_answer_id": 44423198, "answer_count": 1, "score": -2, "last_activity_date": 1496871448, "creation_date": 1496869326, "question_id": 44422696, "link": "https://stackoverflow.com/questions/44422696/replacing-items-in-nested-list-that-contain-same-answer", "closed_reason": "Needs details or clarity", "title": "Replacing items in nested list that contain same answer", "body": "<p>I have a nested list that looks like this:</p>\n\n<pre><code>data = [\n['student 1', '\"answer 0\"', '\"answer 2\"', '\"answer 2\"', '\"answer 0\"'],\n['student 2', '\"answer 4\"', '\"answer 2\"', '\"answer 4\"', '\"answer 0\"']]\n</code></pre>\n\n<p>I want the results to appear as:</p>\n\n<pre><code>data = [\n['student 1', 'Blue', 'Up', 'Left', 'Football'],\n['student 2', 'Red', 'Up', 'Right', 'Football']]\n</code></pre>\n\n<p>Depending on the index in the list, it can have a different result, but in the data it can contain the same string.  What is an efficient way to accomplish this task?</p>\n"}, {"tags": ["python", "matplotlib", "scipy"], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 3, "last_activity_date": 1496871676, "creation_date": 1496871676, "answer_id": 44423249, "question_id": 44422677, "link": "https://stackoverflow.com/questions/44422677/pyplot-create-intensity-plot-from-1d-array/44423249#44423249", "title": "Pyplot Create Intensity Plot From 1D Array", "body": "<p>If you reshape <code>intensity_values</code> into a 2D NumPy array, you could use imshow:</p>\n\n<pre><code>ax.imshow(np.atleast_2d(intensity_values))\n</code></pre>\n\n<hr>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import gridspec\nx = np.linspace(0, np.pi, 100)\nintensity_values = np.sin(x)\n\n# https://stackoverflow.com/a/35881382/190597\nfig, (ax0, ax1) = plt.subplots(\n    nrows=2, gridspec_kw={'height_ratios':[7, 1],}, sharex=True)\nax0.plot(x, intensity_values)\nax1.imshow(np.atleast_2d(intensity_values), cmap=plt.get_cmap('gray'),\n              extent=(0, np.pi, 0, 1))\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xuelF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xuelF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 99, "user_id": 1725588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ca048a983ec96435920897fdf8e114b?s=128&d=identicon&r=PG", "display_name": "Flemingjp", "link": "https://stackoverflow.com/users/1725588/flemingjp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 44423249, "answer_count": 1, "score": 1, "last_activity_date": 1496871676, "creation_date": 1496869248, "question_id": 44422677, "link": "https://stackoverflow.com/questions/44422677/pyplot-create-intensity-plot-from-1d-array", "title": "Pyplot Create Intensity Plot From 1D Array", "body": "<p>I currently have a 1D array, representing intensity values with the index of the value being its x-position.</p>\n\n<pre><code>intensity_values = [0.10, 0.32, ... , 0.12, 0.23]\n</code></pre>\n\n<p>I want to create a subplot at the bottom of my figure with an intensity plot, visually showing the data as such.</p>\n\n<p><a href=\"https://i.stack.imgur.com/35pdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/35pdn.png\" alt=\"Gradient-Bar\"></a></p>\n\n<p>I've seen examples which require an array with 3-dimension to be able to fufil the data plot. How would I achieve this result?</p>\n"}, {"tags": ["python", "machine-learning", "tensorflow", "neural-network", "recurrent-neural-network"], "comments": [{"owner": {"reputation": 4923, "user_id": 992489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8568528b37ad2e84830c2c9aa9260369?s=128&d=identicon&r=PG", "display_name": "Alexandre Passos", "link": "https://stackoverflow.com/users/992489/alexandre-passos"}, "edited": false, "score": 2, "creation_date": 1496872521, "post_id": 44422656, "comment_id": 75845201, "body": "The problem is likely with your rnn implementation."}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1496881791, "post_id": 44422656, "comment_id": 75848010, "body": "Please post a minimal set of code that reproduces this error."}, {"owner": {"reputation": 789, "user_id": 6288172, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d9cb072975c5dc5a5ee485a63eb354b?s=128&d=identicon&r=PG&f=1", "display_name": "Paramdeep Singh Obheroi", "link": "https://stackoverflow.com/users/6288172/paramdeep-singh-obheroi"}, "edited": false, "score": 0, "creation_date": 1496902219, "post_id": 44422656, "comment_id": 75853682, "body": "I added the model implementation"}], "owner": {"reputation": 789, "user_id": 6288172, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d9cb072975c5dc5a5ee485a63eb354b?s=128&d=identicon&r=PG&f=1", "display_name": "Paramdeep Singh Obheroi", "link": "https://stackoverflow.com/users/6288172/paramdeep-singh-obheroi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496902174, "creation_date": 1496869157, "last_edit_date": 1496902174, "question_id": 44422656, "link": "https://stackoverflow.com/questions/44422656/how-do-i-train-a-recurrent-neural-network-in-tersorflow", "title": "How do I train a recurrent neural network in tersorflow?", "body": "<p>I tried training it to a time series with alternative 1s and 0s using this code snippet:</p>\n\n<pre><code>error = tf.reduce_mean((labels - predict)**2)\ntrain = tf.train.GradientDescentOptimizer(learning_rate).minimize(error)\n\ntime_series = [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]\nlbsx = [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]\n\nfor i in range(number_of_epochs):\n        for j in range(len(time_series)):\n            curr_X = time_series[j]\n            lbs = lbsx[j]\n\n            sess.run(train, feed_dict={X: [[curr_X]], labels: [[lbs]]})\n</code></pre>\n\n<p>Unfortunately I'm not able to get right predictions with it. I have not used tf.contrib rnn but rather made one my self.</p>\n\n<p>EDIT: As requested, this is my model implementation:</p>\n\n<pre><code># hyper parameters\nlearning_rate = 0.001\nnumber_of_epochs = 10000\n\n# Computation Graph\nW1 = tf.Variable(tf.truncated_normal(shape=[1, 4]), dtype=tf.float32, name = 'W1')\nW2 = tf.Variable(tf.truncated_normal(shape=[4, 1]), dtype=tf.float32, name = 'W2')\nWR = tf.Variable(tf.truncated_normal(shape=[1, 4]), dtype=tf.float32, name = 'WR')\nprev_val = tf.Variable([[0.0]], trainable=False)\n\nX = tf.placeholder(tf.float32, [None, None], name = 'X')\nlabels = tf.placeholder(tf.float32, [None, 1], name = 'labels')\n\nsess = tf.Session()\nsess.run(tf.initialize_all_variables())\n\nz = tf.matmul(X, W1) + tf.matmul(prev_val, WR)\nprev_val = z\n\npredict = tf.matmul(z, W2)\n</code></pre>\n"}, {"tags": ["python", "linux", "gcc", "tensorflow", "cuda"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7337874"}, "edited": false, "score": 0, "creation_date": 1496922625, "post_id": 44424768, "comment_id": 75866923, "body": "what about question 3 @PeteWarden ?"}], "tags": [], "owner": {"reputation": 2808, "user_id": 5708323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iN_dtRnmo9Y/AAAAAAAAAAI/AAAAAAAAABE/VlOtp_yX8RI/photo.jpg?sz=128", "display_name": "Pete Warden", "link": "https://stackoverflow.com/users/5708323/pete-warden"}, "is_accepted": true, "score": 1, "last_activity_date": 1496881600, "creation_date": 1496881600, "answer_id": 44424768, "question_id": 44422608, "link": "https://stackoverflow.com/questions/44422608/how-to-deal-with-gcc-in-tensorflow-installation-with-gpu/44424768#44424768", "title": "how to deal with `GCC` in tensorflow installation with gpu?", "body": "<p>gcc-5.4 may work, but as it's not a supported configuration it's hard to say for sure. It may be worth giving it a try to see if you hit problems if you're reluctant to switch.</p>\n\n<p>If you do want to switch, I like to use the <code>update-alternatives</code> approach to manage different versions of gcc on Ubuntu, as described here:</p>\n\n<p><a href=\"https://codeyarns.com/2015/02/26/how-to-switch-gcc-version-using-update-alternatives/\" rel=\"nofollow noreferrer\">https://codeyarns.com/2015/02/26/how-to-switch-gcc-version-using-update-alternatives/</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7337874"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 44424768, "answer_count": 1, "score": 0, "last_activity_date": 1496922538, "creation_date": 1496868923, "last_edit_date": 1496922538, "question_id": 44422608, "link": "https://stackoverflow.com/questions/44422608/how-to-deal-with-gcc-in-tensorflow-installation-with-gpu", "title": "how to deal with `GCC` in tensorflow installation with gpu?", "body": "<p>I am installing tensorflow with Gpu support. There is an installation guide in the tensorflow web site which explain more about <a href=\"http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4VZnqTJ2A\" rel=\"nofollow noreferrer\">CUDA Toolkit</a>. In this guide system requirement is described. A row in table 1 dedicate to <code>GCC</code> version and other ones is <code>Kernel</code> and etc. I know my ubuntu 16.4 LTS is based on kernel 4.4 but the <code>GCC</code> version dose not match with the table. My <code>gcc</code> is 5.4.0 and the table said that gcc-5.3.1 needed.\nMy OS  is Ubuntu 16.4 LTS xenial xerus and i have a Geforce GTX 1080 in my system.\nThere is two question.</p>\n\n<p>1- What should i do? Do i need to downgrade it or gcc-5.4.0 work as well? </p>\n\n<p>2- If it is necessary to downgrade , could anyone explain how ?</p>\n\n<p>3- Why gcc-5.4.0 compiler does not exist in /usr/bin ? how should refer to it ? </p>\n"}, {"tags": ["python", "bioinformatics", "biopython"], "answers": [{"tags": [], "owner": {"reputation": 1469, "user_id": 344850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/871426dddc1a9f702316c1ca03a33d9b?s=128&d=identicon&r=PG", "display_name": "peterjc", "link": "https://stackoverflow.com/users/344850/peterjc"}, "is_accepted": false, "score": 1, "last_activity_date": 1496920301, "creation_date": 1496920301, "answer_id": 44434111, "question_id": 44422584, "link": "https://stackoverflow.com/questions/44422584/biopython-to-extract-base-calls-at-a-list-of-positions/44434111#44434111", "title": "Biopython to extract base calls at a list of positions", "body": "<p>Most likely some of the sequences are not long enough to have that many letters, and thus the larger indexes are invalid.</p>\n\n<p>You might consider modifying the final loop to something like this:</p>\n\n<pre><code>if len(seq_record) &gt; x:\n    nuc = seq_record[x]\nelse:\n    nuc = None\nquery_dic[x] = nuc\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7407045, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/393f27c0968efd8a4308d81b3ee2a884?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lipworth", "link": "https://stackoverflow.com/users/7407045/sam-lipworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496937970, "creation_date": 1496868810, "last_edit_date": 1496937970, "question_id": 44422584, "link": "https://stackoverflow.com/questions/44422584/biopython-to-extract-base-calls-at-a-list-of-positions", "title": "Biopython to extract base calls at a list of positions", "body": "<p>I have a list of positions of interest eg:</p>\n\n<pre><code>10\n20\n1000\n4000000\n</code></pre>\n\n<p>I want to extract the base call at these positions from a fasta file using biopython.</p>\n\n<p>This is what I have tried:</p>\n\n<pre><code>query_dic ={}\nwith open(line) as pos_file:\n    for x in pos_file:\n        for seq_record in SeqIO.parse(query_file, \"fasta\"):\n            nuc = seq_record[x] \n            query_dic[x]=nuc\n</code></pre>\n\n<p>The error message says 'invalid index' - what is wrong?</p>\n"}, {"tags": ["python", "class", "loose-coupling"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "edited": false, "score": 0, "creation_date": 1496869428, "post_id": 44422618, "comment_id": 75843945, "body": "I actually hadn&#39;t considered passing a class directly to a function and having it taken care of right there with no outside references. That would probably work okay for my purposes."}, {"owner": {"reputation": 346, "user_id": 2457435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998a18446f06a200a4e66460a82f6d1?s=128&d=identicon&r=PG", "display_name": "01010011 01000010", "link": "https://stackoverflow.com/users/2457435/01010011-01000010"}, "reply_to_user": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "edited": false, "score": 0, "creation_date": 1496869755, "post_id": 44422618, "comment_id": 75844074, "body": "Yea I think functions will be the trick here. Knowing when to use inheritance can be tricky, but I think in your case a couple of well written functions will do just fine, that way you don&#39;t have to worry about cascading effects if you change your base class. If you have a specific problem in mind or some more sample code I&#39;d be happy to work it into my answer"}, {"owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "edited": false, "score": 0, "creation_date": 1496870785, "post_id": 44422618, "comment_id": 75844532, "body": "This will work fine the way it is. I have way to much code to condense it into a simple example."}], "tags": [], "owner": {"reputation": 346, "user_id": 2457435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998a18446f06a200a4e66460a82f6d1?s=128&d=identicon&r=PG", "display_name": "01010011 01000010", "link": "https://stackoverflow.com/users/2457435/01010011-01000010"}, "is_accepted": true, "score": 1, "last_activity_date": 1496869020, "creation_date": 1496869020, "answer_id": 44422618, "question_id": 44422519, "link": "https://stackoverflow.com/questions/44422519/keeping-classes-loosely-coupled-and-sharing-data/44422618#44422618", "title": "Keeping classes loosely coupled and sharing data", "body": "<p>If I'm understanding your question correctly, I would say that inheritance is not necessary in your case. Why not give <code>ParseMyWork</code> a function for dealing with a specific <code>Window</code> task?</p>\n\n<pre><code>class Window():\n  def __init__(self, parent=None):\n    self.parent = parent\n\n  def doStuff(self):\n    #do work here\n\nclass ParseMyWork():\n  def __init__(self, parent=None):\n    self.parent=parent`\n\n  def doWindowActivity(self, window):\n    window.doStuff\n</code></pre>\n\n<p>Then you can use the function like this</p>\n\n<pre><code>    work_parser = ParseMyWork()\n    window = Window()\n    work_parser.doWindowActivity(window);\n</code></pre>\n\n<p>That way you can use your work_parse instance with any window instance.</p>\n\n<p>Apologies in advance for my Python, it's been a while so if you see any rookie mistakes, do point them out.</p>\n"}, {"tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": false, "score": 1, "last_activity_date": 1496869589, "creation_date": 1496869589, "answer_id": 44422771, "question_id": 44422519, "link": "https://stackoverflow.com/questions/44422519/keeping-classes-loosely-coupled-and-sharing-data/44422771#44422771", "title": "Keeping classes loosely coupled and sharing data", "body": "<p>Keep it simple.py:</p>\n\n<pre><code>def doStuff(window):\n    #do work here\n    return window\n\ndef parseStuff(stuff):\n    pass\n</code></pre>\n\n<p>really.py:</p>\n\n<pre><code>from simple import doStuff, parseStuff\n\ndef really_simple(window):\n    okay = doStuff(window)\n    return parseStuff(okay)\n</code></pre>\n\n<p>don't complicate the class:</p>\n\n<pre><code>from really import really_simple\nreally_simple(window)\n</code></pre>\n\n<p>imo: classes are overly complicated objects, and in a lot of cases more confusing than they need to be, plus they hold references and modify stuff, and can be difficult to decouple once they have been tied to other classes. if there isn't a clear reason why a class needs to be used, then it probably doesn't need to be used.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "edited": false, "score": 0, "creation_date": 1496873014, "post_id": 44423349, "comment_id": 75845395, "body": "I&#39;ve never actually used get and set methods within a class before, as I never really thought there was much use. I&#39;m still kind of leery of their use, although I&#39;m coming around to them now. It would make modifying names, and datatypes (not as relevant in python) much easier to do. I haven&#39;t used them at all in my code. But, I probably should be."}, {"owner": {"reputation": 41, "user_id": 7867462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883856dfefef527b07416c9603447eca?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Gomez", "link": "https://stackoverflow.com/users/7867462/gabe-gomez"}, "reply_to_user": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "edited": false, "score": 0, "creation_date": 1496873321, "post_id": 44423349, "comment_id": 75845533, "body": "When I first started working with classes, I was also very reluctant to use getters and setters. I thought they had very little use and were a waste of time. I have come around to using them over this past year since I first learned of classes simply because, I feel, they make my code look cleaner and also for what I had mentioned above.  It will make things easier to follow cause you can trace easier. I know it&#39;s a bear, but trust me"}], "tags": [], "owner": {"reputation": 41, "user_id": 7867462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883856dfefef527b07416c9603447eca?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Gomez", "link": "https://stackoverflow.com/users/7867462/gabe-gomez"}, "is_accepted": false, "score": 1, "last_activity_date": 1496872142, "creation_date": 1496872142, "answer_id": 44423349, "question_id": 44422519, "link": "https://stackoverflow.com/questions/44422519/keeping-classes-loosely-coupled-and-sharing-data/44423349#44423349", "title": "Keeping classes loosely coupled and sharing data", "body": "<p>Classes are super powerful, so it's good you're getting started with em. </p>\n\n<p>Discalimer: Haven't worked in python for a while now, so things might not be exact. The general idea still applies though.</p>\n\n<p>Getting into your question now:</p>\n\n<p>I would say the best way to achieve what you want is to create an instance of the first object where you will extract information from.</p>\n\n<p>Now when creating a class, it's vital that you have attributes within them that you will want to be stored within it that you would like to retrieve once the class is instantiated. </p>\n\n<p>For example, using your Window class example above, let's say that you have an attribute called resolution. It would look something like this:</p>\n\n<pre><code>    class Window():\n      def __init__(self, parent = None):\n         self.parent = None\n         self.resolution = '40x80'\n</code></pre>\n\n<p>Now the resolution information associated with your Window class is forever part of any Window class instance. Now, the next step would be to create a get method for resolution. This should be done as follow:</p>\n\n<pre><code>    class Window():\n      def __init__(self, parent = None):\n         self.parent = None\n         self.resolution = '40x80'\n\n      def getResoultion():\n         return self.resolution\n</code></pre>\n\n<p>Now, the reason we created this get method is because we can now set a variable to the information that is returned with it. </p>\n\n<p>So let's say that you have everything associated with your Window class in its own file (let's say the file name is called Window.py). In a separate file (let's call it main.py), you can do the following:</p>\n\n<pre><code>    import Window\n\n    windowInstance = Window()\n    windowResolution = windowInstance.getResolution()\n</code></pre>\n\n<p>If you print out the variable windowResolution, you should get that 40x80 printed out. </p>\n\n<p>Now, as a side note, I do believe it is possible to get the information associated with an attribute with an instance of a class by simply doing something like </p>\n\n<pre><code>     windowResolution = windowInstance.resolution\n</code></pre>\n\n<p>but that is bad practice in general. The reason, in a nutshell, is because you are now exposing attribute names of your class which you do not want to do because it makes it easy for a person outside of your code to learn the name where that information is held and change it. This can then lead to a myriad of other problems when it comes to making an overall program work. That is why it is best practice to use getters and setters. I already showed what getters are. Simply a get method for attributes. Setters, as you can probably assume, allow for one to set the information of an attribute to something else. Now you might say \"Gabe, if we can create setter methods, what's the point of it if they just change it\". My answer to that is to not give a setter method to all attributes. For attributes you don't mind for a person to change, give it a setter method, but for attributes you do not want any outside users to touch, simply don't create a setter method for it. Same goes with getter methods too. Users don't need to see all of the information of all attributes that makes your program work. Here's a better explanation: <a href=\"https://en.wikipedia.org/wiki/Mutator_method\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Mutator_method</a></p>\n\n<p>Now, back to your example. Now let's say you have your ParseMyWork class in its own file like we did with your Window class, and let's say that ParseMyWork needs the resolution info from Window class. You can do the following :</p>\n\n<pre><code>    import Window\n    import ParseMyWork\n\n    windowInstance = Window()\n    windowResolution = windowInstance.getResolution()\n\n    parseInstance = ParseMyWork(windowResolution)\n</code></pre>\n\n<p>This will only pass the window resolution information associated with your Window class. Hope this helps.</p>\n"}], "owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 44422618, "answer_count": 3, "score": 1, "last_activity_date": 1496872142, "creation_date": 1496868568, "question_id": 44422519, "link": "https://stackoverflow.com/questions/44422519/keeping-classes-loosely-coupled-and-sharing-data", "title": "Keeping classes loosely coupled and sharing data", "body": "<p>I've been working in python on a project where I have a GUI which I split up a bunch of the work between classes. I don't know a lot of the best practices for passing data around between classes, and I've frequently run into the issue, where I have to implement something, or change something for work, and I've resorted to making a lot of the classes objects of another class in order to give it the data I need.</p>\n\n<p>Any ideas or suggests would be greatly appreciated on how to keep my classes independent for later modification and still pass the relevant data around without affecting interfaces too much?</p>\n\n<p><strong>As an example</strong></p>\n\n<pre><code>class Window():\n    def __init__(self, parent=None):\n        self.parent = parent\n    def doStuff(self):\n        #do work here\n\nclass ParseMyWork(Window):\n    def __init__(self, parent=None):\n        self.parent=parent\n</code></pre>\n\n<p>I often find myself doing stuff like the above giving objects to class <em>Window</em>\nor simply inheriting everything from them as in <em>ParseMyWork</em> </p>\n\n<p>There must be better and cleaner ways of passing data around without making my classes utterly dependent on eachother, where one little change creates a cascade effect that forces me to make changes in a bunch of other classes.</p>\n\n<p><strong>Any answers to the question don't necessarily have to be in python, but it will be helpful if they are</strong></p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 997253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29652ad59c284fe1edfd688e481d77b4?s=128&d=identicon&r=PG", "display_name": "Andreas Storvik Strauman", "link": "https://stackoverflow.com/users/997253/andreas-storvik-strauman"}, "edited": false, "score": 0, "creation_date": 1502188854, "post_id": 44429137, "comment_id": 78091006, "body": "Thanks, this works! But why? What does tf.local_variables_initializer() do?"}, {"owner": {"reputation": 1280, "user_id": 6778091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9e2d8aa9be9fed7c877a64b351cded3?s=128&d=identicon&r=PG&f=1", "display_name": "Jie.Zhou", "link": "https://stackoverflow.com/users/6778091/jie-zhou"}, "reply_to_user": {"reputation": 1456, "user_id": 997253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29652ad59c284fe1edfd688e481d77b4?s=128&d=identicon&r=PG", "display_name": "Andreas Storvik Strauman", "link": "https://stackoverflow.com/users/997253/andreas-storvik-strauman"}, "edited": false, "score": 1, "creation_date": 1502189156, "post_id": 44429137, "comment_id": 78091204, "body": "@AndreasStorvikStrauman besides trainiable variables you create with <code>tf.Variable</code> or <code>tf.get_variable</code>, there are untrainable variables like global step which increase one after each train step, these variables all called local variables, if you want to calculate AUC, tensorflow implicitly create some local variables for it, so you also need to initialize it"}, {"owner": {"reputation": 1456, "user_id": 997253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29652ad59c284fe1edfd688e481d77b4?s=128&d=identicon&r=PG", "display_name": "Andreas Storvik Strauman", "link": "https://stackoverflow.com/users/997253/andreas-storvik-strauman"}, "edited": false, "score": 0, "creation_date": 1502189356, "post_id": 44429137, "comment_id": 78091338, "body": "Ah, okay. Thanks :)"}], "tags": [], "owner": {"reputation": 1280, "user_id": 6778091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9e2d8aa9be9fed7c877a64b351cded3?s=128&d=identicon&r=PG&f=1", "display_name": "Jie.Zhou", "link": "https://stackoverflow.com/users/6778091/jie-zhou"}, "is_accepted": true, "score": 24, "last_activity_date": 1496906397, "creation_date": 1496906397, "answer_id": 44429137, "question_id": 44422508, "link": "https://stackoverflow.com/questions/44422508/tensorflow-attempting-to-use-uninitialized-value-auc-auc-auc-false-positives/44429137#44429137", "title": "Tensorflow Attempting to use uninitialized value AUC/AUC/auc/false_positives", "body": "<p>try this:</p>\n\n<pre><code>init = tf.group(tf.global_variables_initializer(), tf.local_variables_initializer())\nsess.run(init)\n</code></pre>\n"}], "owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5864, "favorite_count": 1, "accepted_answer_id": 44429137, "answer_count": 1, "score": 9, "last_activity_date": 1496906397, "creation_date": 1496868541, "question_id": 44422508, "link": "https://stackoverflow.com/questions/44422508/tensorflow-attempting-to-use-uninitialized-value-auc-auc-auc-false-positives", "title": "Tensorflow Attempting to use uninitialized value AUC/AUC/auc/false_positives", "body": "<p>I'm training a CNN using for image classification. Due to the limited size of my data set I'm using transfer learning. Basically, I'm using the pre-trained network Google is proving in its retrain example (<a href=\"https://www.tensorflow.org/tutorials/image_retraining\" rel=\"noreferrer\">https://www.tensorflow.org/tutorials/image_retraining</a>). </p>\n\n<p>The model works great and gives a very good accuracy. But my dataset is highly imbalance which mean accuracy is not the best metric to judge the performance of the model. </p>\n\n<p>By looking into different solutions, some suggested changing the sampling method or the performance metric used. I'm choosing to go with the later. </p>\n\n<p>Tensorflow provides a good verity of metrics including, AUC, precision, recall, etc. </p>\n\n<p>Now, here is the code of the retraing model: \n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py</a> </p>\n\n<p>I'm adding the following to <code>add_evaluation_step(result_tensor, ground_truth_tensor)</code> function: </p>\n\n<pre><code>  with tf.name_scope('AUC'):\n    with tf.name_scope('prediction'):\n        prediction = tf.argmax(result_tensor, 1)\n    with tf.name_scope('AUC'):\n        auc_value = tf.metrics.auc(tf.argmax(ground_truth_tensor, 1), prediction, curve='ROC')\n\n\n  tf.summary.scalar('accuracy', evaluation_step)\n  tf.summary.scalar('AUC', auc_value)\n</code></pre>\n\n<p>But I'm getting this error: </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\",\n  line 1135, in \n      tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/platform/app.py\",\n  line 44, in run\n      _sys.exit(main(_sys.argv[:1] + flags_passthrough))   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\",\n  line 911, in main\n      ground_truth_input: train_ground_truth})   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/client/session.py\",\n  line 767, in run\n      run_metadata_ptr)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/client/session.py\",\n  line 965, in _run\n      feed_dict_string, options, run_metadata)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/client/session.py\",\n  line 1015, in _do_run\n      target_list, options, run_metadata)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/client/session.py\",\n  line 1035, in _do_call\n      raise type(e)(node_def, op, message) tensorflow.python.framework.errors_impl.FailedPreconditionError:\n  Attempting to use uninitialized value AUC/AUC/auc/false_positives<br>\n  [[Node: AUC/AUC/auc/false_positives/read = IdentityT=DT_FLOAT,\n  _class=[\"loc:@AUC/AUC/auc/false_positives\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]</p>\n  \n  <p>Caused by op u'AUC/AUC/auc/false_positives/read', defined at:   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\",\n  line 1135, in \n      tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/platform/app.py\",\n  line 44, in run\n      _sys.exit(main(_sys.argv[:1] + flags_passthrough))   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\",\n  line 874, in main\n      final_tensor, ground_truth_input)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\",\n  line 806, in add_evaluation_step\n      auc_value, update_op = tf.metrics.auc(tf.argmax(ground_truth_tensor, 1), prediction,\n  curve='ROC')   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/metrics_impl.py\",\n  line 555, in auc\n      labels, predictions, thresholds, weights)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/metrics_impl.py\",\n  line 473, in _confusion_matrix_at_thresholds\n      false_p = _create_local('false_positives', shape=[num_thresholds])   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/metrics_impl.py\",\n  line 177, in _create_local\n      validate_shape=validate_shape)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\",\n  line 226, in <strong>init</strong>\n      expected_shape=expected_shape)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\",\n  line 344, in _init_from_args\n      self._snapshot = array_ops.identity(self._variable, name=\"read\")   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/ops/gen_array_ops.py\",\n  line 1490, in identity\n      result = _op_def_lib.apply_op(\"Identity\", input=input, name=name)   File\n  \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/framework/op_def_library.py\",\n  line 768, in apply_op\n      op_def=op_def)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/framework/ops.py\",\n  line 2402, in create_op\n      original_op=self._default_original_op, op_def=op_def)   File \"/home/user_2/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/framework/ops.py\",\n  line 1264, in <strong>init</strong>\n      self._traceback = _extract_stack()</p>\n  \n  <p>FailedPreconditionError (see above for traceback): Attempting to use\n  uninitialized value AUC/AUC/auc/false_positives    [[Node:\n  AUC/AUC/auc/false_positives/read = IdentityT=DT_FLOAT,\n  _class=[\"loc:@AUC/AUC/auc/false_positives\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]</p>\n</blockquote>\n\n<p>But I don't understand why is this because in the main I have this: </p>\n\n<pre><code>init = tf.global_variables_initializer()\nsess.run(init)\n</code></pre>\n"}, {"tags": ["python", "arrays", "list", "numpy", "range"], "comments": [{"owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "edited": false, "score": 1, "creation_date": 1496869401, "post_id": 44422388, "comment_id": 75843932, "body": "Check my edit if you want the elements in the second half to only be the first half but shuffled."}], "answers": [{"comments": [{"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868852, "post_id": 44422512, "comment_id": 75843679, "body": "@Shiva why should he? OP wanted the first part to maintain order"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496869010, "post_id": 44422512, "comment_id": 75843748, "body": "@Shiva titles might be misleading. seen that more than once."}], "tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": false, "score": 2, "last_activity_date": 1496869230, "last_edit_date": 1496869230, "creation_date": 1496868559, "answer_id": 44422512, "question_id": 44422388, "link": "https://stackoverflow.com/questions/44422388/how-to-have-a-list-of-random-numbers-by-ensuring-all-of-them-at-least-once-used/44422512#44422512", "title": "How to have a list of random numbers by ensuring all of them at least once used?", "body": "<p>What's wrong with:</p>\n\n<pre><code>import random\n\nyour_array = list(range(1, 11)) + random.sample(range(1, 11), 10)  \n#  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 3, 7, 8, 2, 1, 9, 5, 10, 6, 4]\n</code></pre>\n\n<p>On a second read... If you want repeats in your second part you can do it as:</p>\n\n<pre><code>your_array = list(range(1, 11)) + [random.randrange(1, 11) for _ in range(10)]\n# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 5, 4, 8, 1, 5, 1, 10, 5, 2, 10]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868708, "post_id": 44422522, "comment_id": 75843610, "body": "@Shiva you can with some changes; OP&#39;s example repeats numbers and not all numbers occur at least once, though."}, {"owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496869169, "post_id": 44422522, "comment_id": 75843821, "body": "@Shiva I&#39;m sorry, but did you properly read the question? OP says &quot;half of it having the arbitrarily ordered numbers and half should have random numbers in the given range&quot;."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1496869996, "post_id": 44422522, "comment_id": 75844177, "body": "Keep in mind that <code>random.randint(0, 10)</code> will return an integer from 0 to 10 (inclusive). From the question, it appears that the OP needs integers in range 1-10, inclusive."}], "tags": [], "owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "is_accepted": true, "score": 2, "last_activity_date": 1496868573, "creation_date": 1496868573, "answer_id": 44422522, "question_id": 44422388, "link": "https://stackoverflow.com/questions/44422388/how-to-have-a-list-of-random-numbers-by-ensuring-all-of-them-at-least-once-used/44422522#44422522", "title": "How to have a list of random numbers by ensuring all of them at least once used?", "body": "<p>Use the <code>random</code> built-in.</p>\n\n<pre><code>import random\n\nmy_list = list(range(1,11))\nfor i in range(10):\n    my_list.append(random.randint(0, 10))\n\nprint(my_list)\n# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 6, 5, 10, 8, 6, 10, 6, 5, 6, 6]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "is_accepted": false, "score": 3, "last_activity_date": 1496869356, "last_edit_date": 1496869356, "creation_date": 1496868639, "answer_id": 44422538, "question_id": 44422388, "link": "https://stackoverflow.com/questions/44422388/how-to-have-a-list-of-random-numbers-by-ensuring-all-of-them-at-least-once-used/44422538#44422538", "title": "How to have a list of random numbers by ensuring all of them at least once used?", "body": "<pre><code>import random\n\nl = [x for x in range(11)] + [random.randint(0, 10) for x in range(11)]\n</code></pre>\n\n<p>edit \nIf you would like the 2nd half of list to only contain elements from the first half, but in a random order</p>\n\n<pre><code>a = [x for x in range(11)]\nb = a[:]\nrandom.shuffle(b)\na.extend(b)\n\n&gt;&gt;&gt; a\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 7, 4, 10, 1, 5, 9, 3, 0, 6, 2, 8]\n</code></pre>\n"}], "owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 44422522, "answer_count": 3, "score": 3, "last_activity_date": 1496869356, "creation_date": 1496868107, "last_edit_date": 1496868562, "question_id": 44422388, "link": "https://stackoverflow.com/questions/44422388/how-to-have-a-list-of-random-numbers-by-ensuring-all-of-them-at-least-once-used", "title": "How to have a list of random numbers by ensuring all of them at least once used?", "body": "<p>I am trying to have a list of numbers from 1 to 10 with many occurrences, therefore I began with using the following code:</p>\n\n<pre><code>list(range(1,11))\n</code></pre>\n\n<p>However, it only gives every number only once. I need to have an output in double size, half of it having the arbitrarily ordered numbers and half should have random numbers in the given range like following:</p>\n\n<pre><code>[1,2,3,4,5,6,7,8,9,10,3,4,2,7,5,7,5,2,8,9]\n</code></pre>\n\n<p>My approach was:</p>\n\n<p>1) Making a random list</p>\n\n<pre><code>a = random.randint(0,9)\n</code></pre>\n\n<p>2) Combining with the output of range</p>\n\n<pre><code>b = list(range(1,11))\nresult = a+b\n</code></pre>\n\n<p>Is it possible to have it in other way?</p>\n"}, {"tags": ["python", "performance", "numpy", "for-loop"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868180, "post_id": 44422370, "comment_id": 75843344, "body": "Have you checked that there are no unwanted broadcast operations?"}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868336, "post_id": 44422370, "comment_id": 75843420, "body": "How can I check that exactly?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868375, "post_id": 44422370, "comment_id": 75843439, "body": "You could print <code>x.shape</code> to ensure that the operations are done properly and the output is of the expected shape/size."}, {"owner": {"reputation": 3381, "user_id": 3572366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb8dea69aa80d1cb9b7bbdb8aebadf9?s=128&d=identicon&r=PG&f=1", "display_name": "sirfz", "link": "https://stackoverflow.com/users/3572366/sirfz"}, "edited": false, "score": 1, "creation_date": 1496868527, "post_id": 44422370, "comment_id": 75843518, "body": "Try profiling your code and see where the bottleneck is. For example in your numpy version, you can compute <code>np.abs(sample - 0.5)</code> once and re-use it instead of computing it twice..."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 2, "creation_date": 1496868666, "post_id": 44422370, "comment_id": 75843582, "body": "There&#39;s a lot that could be improved in each version. It really doesn&#39;t make sense to compare such not-optimal solutions. Try to optimize each individually before comparing them against each other."}, {"owner": {"reputation": 3931, "user_id": 2244081, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2a084ed5223858de201a3ebaf53c4fa8?s=128&d=identicon&r=PG", "display_name": "Ignacio Vergara Kausel", "link": "https://stackoverflow.com/users/2244081/ignacio-vergara-kausel"}, "edited": false, "score": 0, "creation_date": 1496868685, "post_id": 44422370, "comment_id": 75843595, "body": "That itertools.product doesn&#39;t seem the most numpy friendly thing to do. You&#39;re going in and out numpy paying overhead and who knows what else."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1496868714, "post_id": 44422370, "comment_id": 75843617, "body": "Your itertools loop generates 100*100 steps, while the <code>dim</code> loop is only 2 steps.  So you aren&#39;t making any significant use of <code>numpy</code> array fuctionality."}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496868897, "post_id": 44422370, "comment_id": 75843703, "body": "Indeed it is the itertools loop that is the botleneck. @MSeifert could you elaborate? I though these two were OK..."}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "reply_to_user": {"reputation": 3381, "user_id": 3572366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb8dea69aa80d1cb9b7bbdb8aebadf9?s=128&d=identicon&r=PG&f=1", "display_name": "sirfz", "link": "https://stackoverflow.com/users/3572366/sirfz"}, "edited": false, "score": 0, "creation_date": 1496869028, "post_id": 44422370, "comment_id": 75843758, "body": "@sirfz I did it and it is obviously the itertool loop that is doing all the job. I have tried your suggestion (np.abs) with no luck."}], "answers": [{"comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871194, "post_id": 44422762, "comment_id": 75844707, "body": "Generally better to include <code>()</code> instead of using backslashes when using multiline expressions."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871245, "post_id": 44422762, "comment_id": 75844731, "body": "@MSeifert Line wrapping where?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871260, "post_id": 44422762, "comment_id": 75844741, "body": "It&#39;s removing the backslashes from my comments. But I meant the line that starts with: <code>prod_arr *= 1 + 0.5 * ...</code>"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871750, "post_id": 44422762, "comment_id": 75844908, "body": "@MSeifert Doesn&#39;t allow me to avoid backslash on my Spyder IDE. An IDE thing?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871878, "post_id": 44422762, "comment_id": 75844957, "body": "@Divakar Strange, doesn&#39;t the version I included in my answer work (I used the <code>()</code> without backslash. My IDE hates backslashes at the end of lines. :D"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 3, "last_activity_date": 1496873391, "last_edit_date": 1496873391, "creation_date": 1496869556, "answer_id": 44422762, "question_id": 44422370, "link": "https://stackoverflow.com/questions/44422370/why-is-numpy-slower-than-for-loop/44422762#44422762", "title": "Why is numpy slower than for loop", "body": "<p>With NumPy, one must look to vectorize things and we could certainly do  so here. </p>\n\n<p>Taking a closer look at the loop portion, we are iterating along the first axis of the input data <code>samples</code> twice with that loop startup :</p>\n\n<pre><code>for i, j in itertools.product(range(n_sample), range(n_sample)):\n</code></pre>\n\n<p>We could convert these iterations into vectorized operations, once we let <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\"><code>broadcasting</code></a> handle those. </p>\n\n<p>Now, to have a fully vectorized solution, we would need a lot more memory space, specifically <code>(N,N,M)</code>, where <code>(N,M)</code> is the shape of the input data.</p>\n\n<p>Another noticeable aspect here is that at each iteration, we aren't doing a lot of work, as we are performing operation on each row and each row contains only <code>2</code> elements for the given sample. So, the idea that comes out is that we could run a loop along <code>M</code>, such that at each iteration, we would compute the <code>prod</code> and accumulate. Thus, for the given sample, its just two loop iterations.</p>\n\n<p>Getting out of the loop, we would have the accumulated <code>prod</code>, that just needs summation for <code>disc2</code> as the final output.</p>\n\n<p>Here's an implementation to fulfil the above mentioned ideas -</p>\n\n<pre><code>prod_arr = 1\nfor i in range(sample.shape[1]):\n    si = sample[:,i]\n    prod_arr *= 1 + 0.5 * np.abs(si[:,None] - 0.5) + 0.5 * np.abs(si - 0.5) - \\\n                                    0.5 * np.abs(si[:,None] - si)\ndisc2 = prod_arr.sum()\n</code></pre>\n\n<p><strong>Runtime test</strong></p>\n\n<p>The stripped down version of the loopy portion from the original approach and the modified versions as approaches are listed below :</p>\n\n<pre><code>def org_app(sample):\n    disc2 = 0\n    n_sample = len(sample)\n    for i, j in itertools.product(range(n_sample), range(n_sample)):\n        disc2 += np.prod(1 + 0.5 * np.abs(sample[i] - 0.5) + 0.5 * \\\n            np.abs(sample[j] - 0.5) - 0.5 * np.abs(sample[i] - sample[j]))\n    return disc2\n\n\ndef mod_app(sample):\n    prod_arr = 1\n    for i in range(sample.shape[1]):\n        si = sample[:,i]\n        prod_arr *= 1 + 0.5 * np.abs(si[:,None] - 0.5) + 0.5 * np.abs(si - 0.5) - \\\n                                        0.5 * np.abs(si[:,None] - si)\n    disc2 = prod_arr.sum()\n    return disc2\n</code></pre>\n\n<p>Timings and verification -</p>\n\n<pre><code>In [10]: sample = np.random.random_sample((100, 2))\n\nIn [11]: org_app(sample)\nOut[11]: 11934.878683659041\n\nIn [12]: mod_app(sample)\nOut[12]: 11934.878683659068\n\nIn [14]: %timeit org_app(sample)\n10 loops, best of 3: 84.4 ms per loop\n\nIn [15]: %timeit mod_app(sample)\n10000 loops, best of 3: 94.6 \u00b5s per loop\n</code></pre>\n\n<p>About <strong><code>900x</code></strong> speedup! Well this should be motivating enough, hopefully to look to vectorize things whenever possible.</p>\n"}, {"comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496871101, "post_id": 44422890, "comment_id": 75844667, "body": "@Y0da I also included an additional approach and timed it against Divarkars solution."}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496871369, "post_id": 44422890, "comment_id": 75844785, "body": "I cannot vote for two answers but yours is also definitely worth looking at! Thanks for the numba approach."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496871423, "post_id": 44422890, "comment_id": 75844808, "body": "@Y0da You can vote on both answers - but you can only <b>accept</b> one. And Divarkars answer definetly deserves the <b>accept</b>. :)"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1496871634, "post_id": 44422890, "comment_id": 75844874, "body": "Numba the last resort huh! ;)"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496871949, "post_id": 44422890, "comment_id": 75844983, "body": "I&#39;m tired of thinking about broadcasting stuff and worrying about <code>MemoryError</code>s - so Numba, Cython or (if possible) numexpr are in most cases much handier than pure-NumPy :) Unfortunatly Cython is not really appropriate on StackOverflow because the compilation is complicated (if one doesn&#39;t use IPythons magic <code>%%cython</code>)."}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496875621, "post_id": 44422890, "comment_id": 75846308, "body": "@MSeifert With the broadcasting, why numba is faster? I though that behind numpy it was C so there should be no speedup for me."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1496875908, "post_id": 44422890, "comment_id": 75846387, "body": "@Y0da Numba uses LLVM to compile the code, so the loops are basically at C speed and it doesn&#39;t use python types but C types which makes the arithmetic as fast as if you would use NumPy. It&#39;s faster because it doesn&#39;t create temporary arrays (each operation on a numpy array like <code>array + 2</code> creates a new array) and it avoids the excessive memory use that broadcasting needs (broadcasting creates a huge intermediate array)."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1496876077, "post_id": 44422890, "comment_id": 75846430, "body": "However numba doesn&#39;t support all (in fact it only supports a few) python and numpy operations and it requires a lot of trial and error to actually make an operation as fast as possible. In this case it&#39;s quite easy but generally it can be quite hard to find a numba implementation that is actually (much) faster than NumPy."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 2, "last_activity_date": 1496871070, "last_edit_date": 1496871070, "creation_date": 1496870108, "answer_id": 44422890, "question_id": 44422370, "link": "https://stackoverflow.com/questions/44422370/why-is-numpy-slower-than-for-loop/44422890#44422890", "title": "Why is numpy slower than for loop", "body": "<p>As I mentioned in the comments your solutions are not really optimal and it doesn't really make sense to compare not-ideal approaches. </p>\n\n<p>For one thing iterating or indexing single elements of a NumPy array is really slow. I recently answered a question including a lot of details (if you're interested you might have a look at it: <a href=\"https://stackoverflow.com/a/44226069/5393381\">\"convert np array to a set takes too long\"</a>). So the Python approach could be faster simply by converting the <code>array</code> to a <code>list</code>:</p>\n\n<pre><code>def func():\n    sample = np.random.random_sample((100, 2))\n    disc1 = 0\n    n_sample = len(sample)\n    dim = sample.shape[1]\n    sample = sample.tolist()  # converted to list\n\n    for i in range(n_sample):\n        prod = 1\n        for item in sample[i]:\n            sub = abs(item - 0.5)\n            prod *= 1 + 0.5 * sub - 0.5 * sub ** 2\n        disc1 += prod\n\n    disc2 = 0\n    for i, j in itertools.product(range(n_sample), range(n_sample)):\n        prod = 1\n        for k in range(dim):\n            a = 0.5 * abs(sample[i][k] - 0.5)\n            b = 0.5 * abs(sample[j][k] - 0.5)\n            c = 0.5 * abs(sample[i][k] - sample[j][k])\n            prod *= 1 + a + b - c\n        disc2 += prod\n\n    c2 = (13 / 12) ** dim - 2 / n_sample * disc1 + 1 / (n_sample ** 2) * disc2\n</code></pre>\n\n<p>I also replaced the <code>np.abs</code> calls with normal <code>abs</code>. The normal <code>abs</code> has a lower overhead! And also changed some other parts. In the end this is more than 10-20 times faster than your original \"normal\" approach.</p>\n\n<p>I didn't have time to check the NumPy approach yet and @Divarkar already included a really good and optimized approach. Comparing the two approaches:</p>\n\n<pre><code>def func_numpy():\n    sample = np.random.random_sample((100, 2))\n\n    disc1 = 0\n    disc2 = 0\n    n_sample = len(sample)\n    dim = sample.shape[1]\n\n    disc1 = np.sum(np.prod(1 + \n                           0.5 * np.abs(sample - 0.5) - \n                           0.5 * np.abs(sample - 0.5) ** 2, \n                           axis=1))\n\n    prod_arr = 1\n    for i in range(sample.shape[1]):\n        s0 = sample[:,i]\n        prod_arr *= (1 + \n                     0.5 * np.abs(s0[:,None] - 0.5) + \n                     0.5 * np.abs(s0 - 0.5) - \n                     0.5 * np.abs(s0[:,None] - s0))\n    disc2 = prod_arr.sum()\n\n    c2 = (13 / 12) ** dim - 2 / n_sample * disc1 + 1 / (n_sample ** 2) * disc2\n\n\nprint('Normal function time: ' , \n      timeit.repeat('func()', number=20, repeat=3, setup=\"from __main__ import func\"))\n# Normal function time:  [1.4846746248249474, 1.5018398493266432, 1.5476674017127152]\nprint('numpy function time: ', \n      timeit.repeat('func_numpy()', number=20, repeat=3, setup=\"from __main__ import func_numpy\"))\n# numpy function time:  [0.020140038561976326, 0.016502230831292763, 0.016452520269695015]\n</code></pre>\n\n<p>So an optimized NumPy approach can definetly beat an \"optimized\" Python approach. It's almost 100 times faster. In case you want it even faster you could use <a href=\"/questions/tagged/numba\" class=\"post-tag\" title=\"show questions tagged &#39;numba&#39;\" rel=\"tag\">numba</a> on a slightly modified version of the pure python code:</p>\n\n<pre><code>import numba as nb\n\n@nb.njit\ndef func_numba():\n    sample = np.random.random_sample((100, 2))\n    disc1 = 0\n    n_sample = len(sample)\n    dim = sample.shape[1]\n\n    for i in range(n_sample):\n        prod = 1\n        for item in sample[i]:\n            sub = abs(item - 0.5)\n            prod *= 1 + 0.5 * sub - 0.5 * sub ** 2\n        disc1 += prod\n\n    disc2 = 0\n    for i in range(n_sample):\n        for j in range(n_sample):\n            prod = 1\n            for k in range(dim):\n                a = 0.5 * abs(sample[i,k] - 0.5)\n                b = 0.5 * abs(sample[j,k] - 0.5)\n                c = 0.5 * abs(sample[i,k] - sample[j,k])\n                prod *= 1 + a + b - c\n            disc2 += prod\n\n    return (13 / 12) ** dim - 2 / n_sample * disc1 + 1 / (n_sample ** 2) * disc2\n\nfunc_numba()\n\n\nprint('numba function time: ' , \n      timeit.repeat('func_numba()', number=20, repeat=3, setup=\"from __main__ import func_numba\"))\n# numba function time:  [0.003022848984983284, 0.0030429566279508435, 0.004060626777572907]\n</code></pre>\n\n<p>That's almost a factor 8-10 faster than the NumPy approach.</p>\n"}], "owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2336, "favorite_count": 1, "accepted_answer_id": 44422762, "answer_count": 2, "score": 2, "last_activity_date": 1496873391, "creation_date": 1496868051, "last_edit_date": 1496869242, "question_id": 44422370, "link": "https://stackoverflow.com/questions/44422370/why-is-numpy-slower-than-for-loop", "title": "Why is numpy slower than for loop", "body": "<p>I have a function using some for loops and I wanted to improve the speed using numpy. But this seems not to do the trick as the bumpy version appears to be 2 times slower. Here is the code:</p>\n\n<pre><code>import numpy as np\nimport itertools\nimport timeit\n\ndef func():\n    sample = np.random.random_sample((100, 2))\n\n    disc1 = 0\n    disc2 = 0\n    n_sample = len(sample)\n    dim = sample.shape[1]\n\n    for i in range(n_sample):\n        prod = 1\n        for k in range(dim):\n            sub = np.abs(sample[i, k] - 0.5)\n            prod *= 1 + 0.5 * sub - 0.5 * sub ** 2\n\n        disc1 += prod\n\n    for i, j in itertools.product(range(n_sample), range(n_sample)):\n        prod = 1\n        for k in range(dim):\n            a = 0.5 * np.abs(sample[i, k] - 0.5)\n            b = 0.5 * np.abs(sample[j, k] - 0.5)\n            c = 0.5 * np.abs(sample[i, k] - sample[j, k])\n            prod *= 1 + a + b - c\n        disc2 += prod\n\n    c2 = (13 / 12) ** dim - 2 / n_sample * disc1 + 1 / (n_sample ** 2) * disc2\n\n\ndef func_numpy():\n    sample = np.random.random_sample((100, 2))\n\n    disc1 = 0\n    disc2 = 0\n    n_sample = len(sample)\n    dim = sample.shape[1]\n\n    disc1 = np.sum(np.prod(1 + 0.5 * np.abs(sample - 0.5) - 0.5 * np.abs(sample - 0.5) ** 2, axis=1))\n\n    for i, j in itertools.product(range(n_sample), range(n_sample)):\n        disc2 += np.prod(1 + 0.5 * np.abs(sample[i] - 0.5) + 0.5 * np.abs(sample[j] - 0.5) - 0.5 * np.abs(sample[i] - sample[j]))\n\n    c2 = (13 / 12) ** dim - 2 / n_sample * disc1 + 1 / (n_sample ** 2) * disc2\n\n\nprint('Normal function time: ' , timeit.repeat('func()', number=20, repeat=5, setup=\"from __main__ import func\"))\nprint('numpy function time: ', timeit.repeat('func_numpy()', number=20, repeat=5, setup=\"from __main__ import func_numpy\"))\n</code></pre>\n\n<p>The timing output is: </p>\n\n<pre><code>Normal function time:  [2.831496894999873, 2.832342429959681, 2.8009242500411347, 2.8075121529982425, 2.824807019031141]\nnumpy function time:  [5.154757721000351, 5.2011515340418555, 5.148996959964279, 5.095560318033677, 5.125199959962629]\n</code></pre>\n\n<p>What am I missing here? I know that the bottleneck is the itertools part because I have a 100x100x2 loop instead of a 100x2 loop before.\nDo you see another way to do that?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 1, "creation_date": 1496868168, "post_id": 44422368, "comment_id": 75843340, "body": "Don&#39;t add quotes, the <code>subprocess</code> module will escape your whitespaced strings the proper way for the underlying shell (as escape patterns might differ)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1496868384, "post_id": 44422368, "comment_id": 75843444, "body": "The quotes here are for the benefit of the <i>shell</i>, not for the benefit of <code>ls</code>. If you don&#39;t have a shell, you shouldn&#39;t have any literal quotes."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868487, "post_id": 44422368, "comment_id": 75843497, "body": "@CharlesDuffy  Won&#39;t it read it as escaped backspaces?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1496868538, "post_id": 44422368, "comment_id": 75843525, "body": "@Shiva, no, because it&#39;s the shell that&#39;s responsible for processing escapes, not <code>ls</code>. In the case here, there <i>is</i> no shell."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868621, "post_id": 44422415, "comment_id": 75843560, "body": "...first approach is cleaner, <i>and</i> more secure (if you&#39;re handling untrusted filenames, you don&#39;t need one with <code>$(rm -rf ~)&#39;$(rm -rf ~)&#39;</code> in its contents to cause havoc)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868700, "post_id": 44422415, "comment_id": 75843608, "body": "@CharlesDuffy I don&#39;t know the expression you&#39;re talking about but terminating the command with <code>;</code> then chaining another command would be a problem too. but anyway, If <code>shell=True</code> isn&#39;t set that&#39;s still safe right?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868763, "post_id": 44422415, "comment_id": 75843643, "body": "Quite right -- a file named <code>&#47;path&#47;to&#47;file&#47;&quot;; rm -rf ~; : &quot;</code> would indeed cause trouble too. And also quite right. (I was expanding on your last sentence, talking about how the <code>shell=False</code> approach is more secure)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868832, "post_id": 44422415, "comment_id": 75843670, "body": "but only if <code>shell=True</code>. Otherwise it&#39;s not interpreted (testing on MS-DOS/Windows with <code>&amp;&amp;</code> confirms this)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868856, "post_id": 44422415, "comment_id": 75843684, "body": "BTW, on UNIXy systems, I can&#39;t reproduce the stated behavior that passing a string will work with multiple arguments when <code>shell=False</code> (as is default)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496868966, "post_id": 44422415, "comment_id": 75843728, "body": "<code>subprocess.check_output(&quot;echo &#39;hello world&#39;&quot;)</code> gives me a &quot;No such file or directory&quot; (as I&#39;d expect it to), as opposed to the claim that &quot;<code>subprocess</code> handles the argument splitting&quot; &quot;without <code>shell=True</code>&quot;."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496869016, "post_id": 44422415, "comment_id": 75843752, "body": "wouldn&#39;t be because <code>echo</code> is built-in? (I know there&#39;s a non-built-in echo as well, but it&#39;s a good lead). <code>cd</code> works only with <code>shell=True</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496869054, "post_id": 44422415, "comment_id": 75843772, "body": "Rather, that would be become <code>subprocess</code> <i>doesn&#39;t</i> actually handle argument splitting (at least on Unixlikes -- Windows is a foreign land to me), so the above is looking for a single file with a name containing quotes and spaces, akin to <code>&#47;usr&#47;bin&#47;echo &#39;hello world&#39;</code> or such."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496869154, "post_id": 44422415, "comment_id": 75843813, "body": "@CharlesDuffy that&#39;s an interesting difference then. Because <code>subprocess.check_output(&#39;ls -l &quot;&#47;path&#47;to&#47;file&#47;with possible space in directory&#47;or with space in name&quot;&#39;)</code> works fine on Windows (provided that <code>ls</code> is installed from MSYS or Cygwin. Let me edit my answer."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496869222, "post_id": 44422415, "comment_id": 75843847, "body": "Can&#39;t say I&#39;m surprised -- Windows actually <i>does</i> use strings for its calling convention, after all, whereas on UNIX the list-of-C-strings approach is plumbed all the way down."}, {"owner": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "edited": false, "score": 0, "creation_date": 1496869243, "post_id": 44422415, "comment_id": 75843864, "body": "@Jean Francois Fabre, thank you so much for solving this issue AND explaining it so I understand."}, {"owner": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1496869265, "post_id": 44422415, "comment_id": 75843873, "body": "@CharlesDuffy thank you so much for solving this issue AND explaining it so I understand."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1496869441, "post_id": 44422415, "comment_id": 75843950, "body": "@CharlesDuffy I cannot let that one pass: &quot;don&#39;t parse the output of <code>ls</code>&quot; :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "edited": false, "score": 0, "creation_date": 1496869476, "post_id": 44422415, "comment_id": 75843965, "body": "@user3155618 you&#39;re welcome, but I hope you&#39;re not actually using <code>ls</code> in your program, because there are other cleaner ways to get file information from python without using system calls."}, {"owner": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "edited": false, "score": 0, "creation_date": 1496869837, "post_id": 44422415, "comment_id": 75844108, "body": "@Jean Francois Fabre, I am only using ls for testing purposes. The ultimate purpose is to run commands for the appropriate type of file. The files are all tar, tar.gz, tar.Z, zip files, and I want to list out the contents of each file. I tested using ls. I don&#39;t <i>think</i> python has archive listing tools, so I will likely need to do system calls."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "edited": false, "score": 1, "creation_date": 1496869907, "post_id": 44422415, "comment_id": 75844146, "body": "@user3155618: you&#39;re wrong. Python can handle zip &amp; tar &amp; gzip files natively. For <code>.Z</code> you may need to run <code>compress</code> but the rest is OK. Check into <code>zipfile</code> &amp; <code>tarfile</code> &amp; <code>gzfile</code> modules. one Q&amp;A at random (there are hundreds of those): <a href=\"https://stackoverflow.com/questions/8176953/python-zipfile-path-separators\" title=\"python zipfile path separators\">stackoverflow.com/questions/8176953/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1496869365, "last_edit_date": 1496869365, "creation_date": 1496868209, "answer_id": 44422415, "question_id": 44422368, "link": "https://stackoverflow.com/questions/44422368/using-a-variable-containing-doublequotes-with-subprocess/44422415#44422415", "title": "Using a variable containing doublequotes with subprocess", "body": "<p>in the first command (which is the best option there is):</p>\n\n<pre><code>archivelist = subprocess.check_output(['ls', '-l', \"/path/to/file/with possible space in directory/or with space in name\"])\n</code></pre>\n\n<p>the third argument is actually <code>/path/to/file/with possible space in directory/or with space in name</code> (without quotes) which is the filename that exists, and the command works.</p>\n\n<p>Since <code>shell=True</code> isn't even set, the command is directly passed to <code>exec</code>, with the arguments passed as-is: the spaces &amp; other chars are preserved.</p>\n\n<p>If you add more quotes, they're not removed and they're passed literally to <code>ls</code>. </p>\n\n<p>Since there's no such file called <code>\"/path/to/file/with possible space in directory/or with space in name\"</code> (with quotes), the file/dir isn't found.</p>\n\n<p>There's another (dirty) way of calling a command: passing the full command as a <em>string</em> (not as a list of parameters). In that case, that would work (without <code>shell=True</code> at least on Windows, <code>subprocess</code> seems to handle the argument splitting, <code>shell=True</code> seems to be required on Unix-like systems):</p>\n\n<pre><code>subprocess.check_output('ls -l \"/path/to/file/with possible space in directory/or with space in name\"')\n</code></pre>\n\n<p>but your first approach is cleaner, specially if you don't know the directory name because it's a parameter. Let <code>subprocess</code> do the heavy lifting for you.</p>\n\n<p>On Unix-like systems, using this last approach requires <code>shell=True</code>, but then you're exposing your program to malicious attacks like any open system call (appending <code>;rm -rf /</code> to the filename, evaluating sub-shells for instance)</p>\n\n<p>Final note: if you're <em>really</em> planning to use <code>ls</code> and parse its output, don't do it (<a href=\"http://mywiki.wooledge.org/ParsingLs\" rel=\"nofollow noreferrer\">http://mywiki.wooledge.org/ParsingLs</a>), use standard <code>os.listdir</code>, <code>os.path.getsize/getmtime</code> &amp; <code>os.stat</code> calls to get the information you need.</p>\n"}], "owner": {"reputation": 187, "user_id": 3155618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7caa251ab72a10c5096268b18ae5ae3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3155618", "link": "https://stackoverflow.com/users/3155618/user3155618"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 44422415, "answer_count": 1, "score": 1, "last_activity_date": 1496869365, "creation_date": 1496868042, "last_edit_date": 1496868222, "question_id": 44422368, "link": "https://stackoverflow.com/questions/44422368/using-a-variable-containing-doublequotes-with-subprocess", "title": "Using a variable containing doublequotes with subprocess", "body": "<p>I am having some trouble with the subprocess module. I would like the module to run the shell command equivalent to 'ls -l \"/path/to/file/with possible space in directory/or with space in name\"'. Subprocess works fine when the filename is not a variable. If the filename is a variable that contains the quotes, then it doesn't work.</p>\n\n<p>Code that doesn't work:</p>\n\n<pre><code>import subprocess\n\narchive_file_list = \"/var/tmp/list\"\narchive = open(archive_file_list, \"r\")\n\nfor line in archive:\n    noreturnline = line[:-1]\n    quotedline = \"\\\"\" + noreturnline + \"\\\"\"\n    if extension == \"zip\":\n        print quotedline\n        archivelist = subprocess.check_output(['ls', '-l', quotedline])\n        print archivelist\n</code></pre>\n\n<p>Code that works:</p>\n\n<pre><code>archivelist = subprocess.check_output(['ls', '-l', \"/path/to/file/with possible space in directory/or with space in name\"])\n</code></pre>\n\n<p>Here is the output for the code that doesn't work:</p>\n\n<pre><code>\"/path/to/file/with possible space in directory/or with space in name\"\nls: cannot access \"/path/to/file/with possible space in directory/or with space in name\" No such file or directory\nTraceback (most recent call last):\nFile \"./archive_test.py\", line 12, in &lt;module&gt;\narchivelist = subprocess.check_output(['ls', '-l', quotedline])\nFile \"/usr/lib64/python2.7/subprocess.py\", line 575, in check_output\nraise CalledProcessError(retcode, cmd, output=output)\nsubprocess.CalledProcessError: Command '['ls', '-l', '\"/path/to/file/with possible space in directory/or with space in name\"']' returned non-zero exit status 2\n</code></pre>\n\n<p>Before you ask - yes, I have already verified that \"/path/to/file/with possible space in directory/or with space in name\" does in fact exist by running 'ls -l' from the command line.</p>\n\n<p>Any help would be appreciated. Thanks in advance.</p>\n"}, {"tags": ["python", "loops", "security", "raspberry-pi", "exit"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868084, "post_id": 44422353, "comment_id": 75843298, "body": "<code>if input() == &#39;&lt;your_char_here&gt;&#39;: break</code>?"}, {"owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868219, "post_id": 44422353, "comment_id": 75843363, "body": "@Shiva that doesn&#39;t work, <code>input</code> is blocking."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868286, "post_id": 44422353, "comment_id": 75843403, "body": "Oh... got it. <code>signal.signal</code> perhaps?"}, {"owner": {"reputation": 910, "user_id": 7776603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112be0000c4a227fec01d8e12971ccae?s=128&d=identicon&r=PG&f=1", "display_name": "syntaxError", "link": "https://stackoverflow.com/users/7776603/syntaxerror"}, "edited": false, "score": 0, "creation_date": 1496868370, "post_id": 44422353, "comment_id": 75843435, "body": "you tried this: <a href=\"https://stackoverflow.com/questions/13180941/how-to-kill-a-while-loop-with-a-keystroke\" title=\"how to kill a while loop with a keystroke\">stackoverflow.com/questions/13180941/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8127885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jAKpz.jpg?s=128&g=1", "display_name": "n00b_pyth0n", "link": "https://stackoverflow.com/users/8127885/n00b-pyth0n"}, "edited": false, "score": 0, "creation_date": 1496868615, "post_id": 44422353, "comment_id": 75843556, "body": "also, all I see at startup (when the code is running) is a black screen. cmd-C does not cause a keyboardinterupt or at least not exit to desktop."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8127885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jAKpz.jpg?s=128&g=1", "display_name": "n00b_pyth0n", "link": "https://stackoverflow.com/users/8127885/n00b-pyth0n"}, "edited": false, "score": 0, "creation_date": 1497457225, "post_id": 44422465, "comment_id": 76090470, "body": "This worked! thank you. Unfortunately the Raspberry pi is just not loading the script correctly because I just get a black screen. I&#39;ll keep at it."}], "tags": [], "owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "is_accepted": false, "score": 0, "last_activity_date": 1496868385, "creation_date": 1496868385, "answer_id": 44422465, "question_id": 44422353, "link": "https://stackoverflow.com/questions/44422353/python-close-a-loop-on-keypress/44422465#44422465", "title": "Python: Close a loop on keypress", "body": "<p>You can stop program execution with Ctrl + C in the command line window that the script is running in.</p>\n\n<p>If you'd like to still do some processing, then wrap your <code>while</code> loop in an <code>try</code> block as such:</p>\n\n<pre><code>try:\n    while True:\n        pir.wait_for_motion()\n        filename = datetime.now().strftime(\"%Y-%m-%d_%H.%M.%S.h264\")\n        camera.start_recording(filename)\n        pir.wait_for_no_motion()\n        camera.stop_recording()\nexcept KeyboardInterrupt:\n    pass\n\n# Continue your code here\n</code></pre>\n\n<p>If you'd like to pick the key that stops the program (other than Ctrl + C) and/or have it stop when you press your key from anywhere in the OS, then I'd recommend using the <a href=\"https://pypi.python.org/pypi/keyboard\" rel=\"nofollow noreferrer\">Keyboard</a> library.</p>\n"}], "owner": {"reputation": 1, "user_id": 8127885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jAKpz.jpg?s=128&g=1", "display_name": "n00b_pyth0n", "link": "https://stackoverflow.com/users/8127885/n00b-pyth0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4389, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1496868385, "creation_date": 1496867987, "question_id": 44422353, "link": "https://stackoverflow.com/questions/44422353/python-close-a-loop-on-keypress", "title": "Python: Close a loop on keypress", "body": "<p>I am building an motion detection security camera with a raspberry pi <a href=\"https://www.raspberrypi.org/learning/parent-detector/worksheet/\" rel=\"nofollow noreferrer\">https://www.raspberrypi.org/learning/parent-detector/worksheet/</a>.</p>\n\n<p>The code works fine, but I want the device to run my python code at startup and I want it to close the program when I hit a certain key. As of now, the program runs but wont get out of the loop so I can't get to the raspberry pi desktop (my workaround to this is turning the device off, manually removing the camera, turn the device back on, to get an error because camera is not detected which exits the code to the desktop....very inefficient I know!)</p>\n\n<p>Essentially, this code was written to run the program from a pi that is connected to a monitor, keyboard, etc. I want to just plug it in somewhere and have it arm the camera. Then after I return to the house (work, vacation, etc), I want to plug in a keyboard, hit a key to exit the program, shutdown safly and be able to view any security incidents when I connect it to a monitor.</p>\n\n<p>script code:</p>\n\n<pre><code>from gpiozero import MotionSensor\nfrom picamera import PiCamera\nfrom datetime import datetime\n\ncamera = PiCamera()\npir = MotionSensor(4)\nwhile True:\n    pir.wait_for_motion()\n    filename = datetime.now().strftime(\"%Y-%m-%d_%H.%M.%S.h264\")\n    camera.start_recording(filename)\n    pir.wait_for_no_motion()\n    camera.stop_recording()\n</code></pre>\n"}, {"tags": ["python", "dataframe", "formatting"], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496938816, "post_id": 44422751, "comment_id": 75879491, "body": "Even though I remove the comma (,) I get the same error."}, {"owner": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496939018, "post_id": 44422751, "comment_id": 75879613, "body": "can you try the same thing, importing values from a csv file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2047399"}, "reply_to_user": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496940882, "post_id": 44422751, "comment_id": 75880699, "body": "From the edits, it looks like you get a different error. <code>ValueError: Invalid conversion specification</code> changed to <code>ValueError: Unknown format code &#39;f&#39; for object of type &#39;str&#39;</code>. Make sure your values are being read in as float. Try <code>pd.to_numeric()</code>"}, {"owner": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496941757, "post_id": 44422751, "comment_id": 75881158, "body": "The csv file actually contains multiple columns. The first column can be converted to the specified format for some reason. If I try to run the same code in a different column, I get the same error."}, {"owner": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496941804, "post_id": 44422751, "comment_id": 75881192, "body": "Can a dataframe have different columns with different formatting?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2047399"}, "reply_to_user": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "edited": false, "score": 0, "creation_date": 1496942074, "post_id": 44422751, "comment_id": 75881340, "body": "Yes, every column has it&#39;s own <a href=\"https://pandas.pydata.org/pandas-docs/stable/basics.html\" rel=\"nofollow noreferrer\">dtype</a>. In fact, if your csv is really messy you can have different types for each element, the columns <code>dtype</code> will be listed as <code>object</code>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2047399"}, "is_accepted": false, "score": 2, "last_activity_date": 1496942286, "last_edit_date": 1496942286, "creation_date": 1496869525, "answer_id": 44422751, "question_id": 44422334, "link": "https://stackoverflow.com/questions/44422334/formatting-a-csv-file/44422751#44422751", "title": "Formatting a csv file", "body": "<p>Remove the comma in your string formatting and it should work.</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame([54,156,3])\ndf[0].map('{:06.2f}'.format)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>054.00\n156.00\n003.00\n</code></pre>\n\n<p>Here's a reasource for string formatting:</p>\n\n<p><a href=\"https://pyformat.info/\" rel=\"nofollow noreferrer\">https://pyformat.info/</a></p>\n\n<p>Edit:<br>\nIt sounds like this is a problem of messy data. I suggest trying the following options when reading your csv file:</p>\n\n<pre><code>df = pandas.read_csv('abc.csv', dtype=object)\ndf['speed'] = df['speed'].apply(pd.to_numeric, errors='coerce')\ndf['speed'] = df['speed'].map('{:06.2f}'.format)\n</code></pre>\n\n<p><code>errors='coerce'</code> will try to convert to float, and return <code>NaN</code> if it fails to do so.</p>\n"}], "owner": {"reputation": 515, "user_id": 3548453, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/38ed643814f389c30849873dc30b7daa?s=128&d=identicon&r=PG&f=1", "display_name": "pnkjmndhl", "link": "https://stackoverflow.com/users/3548453/pnkjmndhl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496942286, "creation_date": 1496867929, "last_edit_date": 1496868543, "question_id": 44422334, "link": "https://stackoverflow.com/questions/44422334/formatting-a-csv-file", "title": "Formatting a csv file", "body": "<p>I have a csv file with no formatting. I need to format the csv file.  </p>\n\n<pre><code>import pandas\ndf = pandas.read_csv('abc.csv')\ndf['speed'] = df['speed'].map('{:06,.2f}'.format)\ndf.to_csv(\"FINAL.csv\")\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 3, in &lt;module&gt;\nFile \"C:\\Python27\\ArcGIS10.4\\lib\\site-packages\\pandas\\core\\series.py\", line 2009, in map\nmapped = map_f(values, arg)\nFile \"pandas\\src\\inference.pyx\", line 1064, in pandas.lib.map_infer (pandas\\lib.c:58525)\nValueError: Unknown format code 'f' for object of type 'str'\n</code></pre>\n\n<p>For Example:</p>\n\n<pre><code>df['speed'] = [54,156,3]\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>speed\n054.00\n156.00\n003.00\n</code></pre>\n"}, {"tags": ["python", "macos", "python-2.7"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496868033, "post_id": 44422318, "comment_id": 75843268, "body": "OSX comes with python2.7 by default. There&#39;s a good chance your homebrew version and the default version in <code>&#47;usr&#47;bin&#47;python</code> are screwing with each other."}, {"owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496870109, "post_id": 44422318, "comment_id": 75844223, "body": "I misspoke. I actually use the default python2.7 but installed 3.6 using home-brew. The script I am trying to run uses python 2.7. Is there other information I can supply that would help, @Shiva?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1496870633, "post_id": 44422318, "comment_id": 75844456, "body": "Besides uninstalling 3.6, I can&#39;t think of anything... apologies. :("}], "owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496870057, "creation_date": 1496867847, "last_edit_date": 1496870057, "question_id": 44422318, "link": "https://stackoverflow.com/questions/44422318/debugging-python-crash-on-os-sierra-10-segmentation-fault-11", "title": "Debugging Python crash on OS Sierra 10: &quot;segmentation fault: 11&quot;", "body": "<p>I need help debugging a python crash. Python is crashing and leaves the message <code>segmentation fault: 11</code> either when I run each line of code where it's meant to plot or when I run the entire script in the command line. I'm on a Mac running Sierra 10.12.4.</p>\n\n<p>I am using python 2.7 but also have python 3.6 which I installed with homebrew. Homebrew is up to date. </p>\n\n<p>Here's the crash log: <a href=\"https://pastebin.com/z8giGADs\" rel=\"nofollow noreferrer\">https://pastebin.com/z8giGADs</a>.</p>\n\n<p>I have seen other stack overflow questions on this, such as: <a href=\"https://stackoverflow.com/questions/18768967/python-segmentation-fault-11-on-osx#19551329\">Python Segmentation fault: 11 on OSX</a> but for example in one of the answers that recommends: <code>cd /Library/Frameworks/Python.framework/Versions/3.3</code> and then altering a file, I don't have the directory <code>Frameworks</code>. Any leads highly appreciated!!</p>\n"}, {"tags": ["python", "python-2.7", "yaml", "jinja2"], "comments": [{"owner": {"reputation": 6520, "user_id": 3025981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1222441570/picture?type=large", "display_name": "Ilya V. Schurov", "link": "https://stackoverflow.com/users/3025981/ilya-v-schurov"}, "edited": false, "score": 0, "creation_date": 1496874424, "post_id": 44422304, "comment_id": 75845936, "body": "Can you provide your code, please?"}, {"owner": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "reply_to_user": {"reputation": 6520, "user_id": 3025981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1222441570/picture?type=large", "display_name": "Ilya V. Schurov", "link": "https://stackoverflow.com/users/3025981/ilya-v-schurov"}, "edited": false, "score": 0, "creation_date": 1496880254, "post_id": 44422304, "comment_id": 75847663, "body": "@IlyaV.Schurov- from here: <a href=\"https://stackoverflow.com/questions/1773805/how-can-i-parse-a-yaml-file-in-python\" title=\"how can i parse a yaml file in python\">stackoverflow.com/questions/1773805/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": false, "score": 2, "last_activity_date": 1497332111, "last_edit_date": 1497332111, "creation_date": 1497079990, "answer_id": 44470775, "question_id": 44422304, "link": "https://stackoverflow.com/questions/44422304/how-can-i-update-a-yml-file-ignoring-preexisting-jinja-syntax-using-python/44470775#44470775", "title": "How can I update a .yml file, ignoring preexisting Jinja syntax, using Python?", "body": "<p>In their current format, your <code>.yml</code> files are jinja templates which will not be valid <code>yaml</code> until they have been rendered.  This is because the jinja placeholder syntax conflicts with yaml syntax, as braces (<code>{</code> and <code>}</code>) can be used to represent mappings in yaml.</p>\n\n<pre><code>&gt;&gt;&gt; yaml.load('foo: {{ bar }}')\nTraceback (most recent call last):\n...\nyaml.constructor.ConstructorError: while constructing a mapping\n  in \"&lt;string&gt;\", line 1, column 6:\n    foo: {{ bar }}\n     ^\nfound unacceptable key (unhashable type: 'dict')\n  in \"&lt;string&gt;\", line 1, column 7:\n    foo: {{ bar }}\n</code></pre>\n\n<p>One way to workaround this is to replace the jinja placeholders with something else, process the file as yaml, then reinstate the placeholders.</p>\n\n<pre><code>$ cat test.yml\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja_variable }}\n    - val1\n    - val2\n</code></pre>\n\n<p>Open the file as a text file</p>\n\n<pre><code>&gt;&gt;&gt; with open('test.yml') as f:\n...     text = f.read()\n... \n&gt;&gt;&gt; print text\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja_variable }}\n    - val1\n    - val2\n</code></pre>\n\n<p>The regular expression <code>r'{{\\s*(?P&lt;jinja&gt;[a-zA-Z_][a-zA-Z0-9_]*)\\s*}}'</code> will match any jinja placeholders in the text; the named group <code>jinja</code> in the expression captures the variable name.  The regular expression the same as that <a href=\"http://jinja.pocoo.org/docs/2.9/api/#notes-on-identifiers\" rel=\"nofollow noreferrer\">used by Jinja2</a> to match variable names.</p>\n\n<p>The <a href=\"https://docs.python.org/2/library/re.html#re.sub\" rel=\"nofollow noreferrer\">re.sub</a> function can reference named groups in its replacement string using the <code>\\g</code> syntax. We can use this feature to replace the jinja syntax with something that does not conflict with yaml syntax, and does not already appear in the files that you are processing.  For example replace <code>{{ ... }}</code> with <code>&lt;&lt; ... &gt;&gt;</code>.</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; yml_text = re.sub(r'{{\\s*(?P&lt;jinja&gt;[a-zA-Z_][a-zA-Z0-9_]*)\\s*}}', '&lt;&lt;\\g&lt;jinja&gt;&gt;&gt;', text)\n&gt;&gt;&gt; print yml_text\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - &lt;&lt;jinja_variable&gt;&gt;\n    - val1\n    - val2\n</code></pre>\n\n<p>Now load the text as yaml:</p>\n\n<pre><code>&gt;&gt;&gt; yml = yaml.load(yml_text)\n&gt;&gt;&gt; yml\n{'A': {'B': [{'ip': '1.2.3.4'}, {'myArray': ['&lt;&lt;jinja_variable&gt;&gt;', 'val1', 'val2']}]}}\n</code></pre>\n\n<p>Add the new value:</p>\n\n<pre><code>&gt;&gt;&gt; yml['A']['B'][1]['myArray'].append('val3')\n&gt;&gt;&gt; yml\n{'A': {'B': [{'ip': '1.2.3.4'}, {'myArray': ['&lt;&lt;jinja_variable&gt;&gt;', 'val1', 'val2', 'val3']}]}}\n</code></pre>\n\n<p>Serialise back to a yaml string:</p>\n\n<pre><code>&gt;&gt;&gt; new_text = yaml.dump(yml, default_flow_style=False)\n&gt;&gt;&gt; print new_text\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - &lt;&lt;jinja_variable&gt;&gt;\n    - val1\n    - val2\n    - val3\n</code></pre>\n\n<p>Now reinstate the jinja syntax.</p>\n\n<pre><code>&gt;&gt;&gt; new_yml = re.sub(r'&lt;&lt;(?P&lt;placeholder&gt;[a-zA-Z_][a-zA-Z0-9_]*)&gt;&gt;', '{{ \\g&lt;placeholder&gt; }}', new_text)\n&gt;&gt;&gt; print new_yml\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja_variable }}\n    - val1\n    - val2\n    - val3\n</code></pre>\n\n<p>And write the yaml to disk.</p>\n\n<pre><code>&gt;&gt;&gt; with open('test.yml', 'w') as f:\n...     f.write(new_yml)\n... \n\n$cat test.yml\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja_variable }}\n    - val1\n    - val2\n    - val3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "edited": false, "score": 0, "creation_date": 1497289420, "post_id": 44493305, "comment_id": 76004606, "body": "Could add some explanation around the Parser/Lexer/Environment classes? i.e., what/why?"}, {"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "reply_to_user": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "edited": false, "score": 0, "creation_date": 1497321782, "post_id": 44493305, "comment_id": 76015877, "body": "@PhD, tried to some add how/why.  Let me know if you have any questions.  Cheers."}], "tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": false, "score": 3, "last_activity_date": 1497321736, "last_edit_date": 1497321736, "creation_date": 1497251344, "answer_id": 44493305, "question_id": 44422304, "link": "https://stackoverflow.com/questions/44422304/how-can-i-update-a-yml-file-ignoring-preexisting-jinja-syntax-using-python/44493305#44493305", "title": "How can I update a .yml file, ignoring preexisting Jinja syntax, using Python?", "body": "<p>One way to do this is to use the <code>jinja2</code> parser itself to parse the template and output an alternate format.</p>\n\n<h3>Jinja2 Code:</h3>\n\n<p>This code inherits from the Jinja2 <code>Parser</code>, <code>Lexer</code> and <code>Environment</code> classes to parse inside variable blocks (usually <code>{{ }}</code>). Instead of evaluating the variables, this code changes the text to something that <code>yaml</code> can understand.  The exact same code can be used to reverse the process with an exchange of the delimiters.  By default it translates to the delimiters suggested by <a href=\"https://stackoverflow.com/a/44470775/7311767\">snakecharmerb</a>. </p>\n\n<pre><code>import jinja2\nimport yaml\n\nclass MyParser(jinja2.parser.Parser):\n\n    def parse_tuple(self, *args, **kwargs):\n\n        super(MyParser, self).parse_tuple(*args, **kwargs)\n\n        if not isinstance(self.environment._jinja_vars, list):\n            node_text = self.environment._jinja_vars\n            self.environment._jinja_vars = None\n            return jinja2.nodes.Const(\n                self.environment.new_variable_start_string +\n                node_text +\n                self.environment.new_variable_end_string)\n\nclass MyLexer(jinja2.lexer.Lexer):\n\n    def __init__(self, *args, **kwargs):\n        super(MyLexer, self).__init__(*args, **kwargs)\n        self.environment = None\n\n    def tokenize(self, source, name=None, filename=None, state=None):\n        stream = self.tokeniter(source, name, filename, state)\n\n        def my_stream(environment):\n            for t in stream:\n                if environment._jinja_vars is None:\n                    if t[1] == 'variable_begin':\n                        self.environment._jinja_vars = []\n                elif t[1] == 'variable_end':\n                    node_text = ''.join(\n                        [x[2] for x in self.environment._jinja_vars])\n                    self.environment._jinja_vars = node_text\n                else:\n                    environment._jinja_vars.append(t)\n                yield t\n\n        return jinja2.lexer.TokenStream(self.wrap(\n            my_stream(self.environment), name, filename), name, filename)\n\njinja2.lexer.Lexer = MyLexer\n\n\nclass MyEnvironment(jinja2.Environment):\n\n    def __init__(self,\n                 new_variable_start_string='&lt;&lt;',\n                 new_variable_end_string='&gt;&gt;',\n                 reverse=False,\n                 *args,\n                 **kwargs):\n        if kwargs.get('loader') is None:\n            kwargs['loader'] = jinja2.BaseLoader()\n\n        super(MyEnvironment, self).__init__(*args, **kwargs)\n        self._jinja_vars = None\n        if reverse:\n            self.new_variable_start_string = self.variable_start_string\n            self.new_variable_end_string = self.variable_end_string\n            self.variable_start_string = new_variable_start_string\n            self.variable_end_string = new_variable_end_string\n        else:\n            self.new_variable_start_string = new_variable_start_string\n            self.new_variable_end_string = new_variable_end_string\n        self.lexer.environment = self\n\n    def _parse(self, source, name, filename):\n        return MyParser(self, source, name,\n                        jinja2._compat.encode_filename(filename)).parse()\n</code></pre>\n\n<h3>How/Why?</h3>\n\n<p>The jinja2 parser scans the template file looking for delimiters.  When finding delimiters, it then switches to parse the appropriate material between the delimiters.  The changes in the code here insert themselves into the lexer and parser to capture the text captured during the template compilation, and then when finding the termination delimiter, concats the parsed tokens into a string and inserts it as a <code>jinja2.nodes.Const</code> parse node, in place of the compiled jinja code, so that when the template is rendered the string is inserted instead of a variable expansion.</p>\n\n<p>The MyEnvironment() code is used to hook in the custom parser and lexer extensions.  And while at it, added some parameters processing. </p>\n\n<p>The primary advantage of this approach is that it should be fairly robust to parsing whatever jinja will parse.</p>\n\n<h3>User Code:</h3>\n\n<pre><code>def dict_from_yaml_template(template_string):\n    env = MyEnvironment()\n    template = env.from_string(template_string)\n    return yaml.load(template.render())\n\ndef yaml_template_from_dict(template_yaml, **kwargs):\n    env = MyEnvironment(reverse=True)\n    template = env.from_string(yaml.dump(template_yaml, **kwargs))\n    return template.render()\n</code></pre>\n\n<h3>Test Code:</h3>\n\n<pre><code>with open('data.yml') as f:\n    data = dict_from_yaml_template(f.read())\ndata['A']['B'][1]['myArray'].append('val 3')\ndata['A']['B'][1]['myArray'].append('&lt;&lt; jinja.variable2 &gt;&gt;')\nnew_yaml = yaml_template_from_dict(data, default_flow_style=False)\nprint(new_yaml)\n</code></pre>\n\n<h3>data.yml</h3>\n\n<pre><code>A:\n B:\n - ip: 1.2.3.4\n - myArray:\n   - {{ x['}}'] }}\n   - {{ [(1, 2, (3, 4))] }}\n   - {{ jinja.variable }}\n   - val1\n   - val2\n</code></pre>\n\n<h3>Results:</h3>\n\n<pre><code>A:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ x['}}'] }}\n    - {{ [(1, 2, (3, 4))] }}\n    - {{ jinja.variable }}\n    - val1\n    - val2\n    - val 3\n    - {{ jinja.variable2 }}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1497345465, "post_id": 44515747, "comment_id": 76026543, "body": "The above requires <code>ruamel.yaml&gt;=0.15.1</code>. You can also use older versions of <code>ruamel.yaml</code> to do the above, then you would need to use <code>round_trip_load()&#47;round_trip_dump()</code>, at the cost of adding some lines of code."}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1497351689, "post_id": 44515747, "comment_id": 76030984, "body": "+1 for recommending changing <code>block_start_string</code> etc - I was thinking about adding that as a separate answer, as even though it&#39;s outside the scope of the question, it&#39;s a much better long term solution if these updates are frequent."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1497352199, "post_id": 44515747, "comment_id": 76031334, "body": "@snakecharmerb I have given a complete example of that <a href=\"https://stackoverflow.com/a/42083975/1307905\">elsewhere</a>. But it requires having tight control over the jinja2 rendering. If, for the OP, that is hidden in the bowels of some web framework, that might not be so easy."}, {"owner": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "edited": false, "score": 0, "creation_date": 1497385814, "post_id": 44515747, "comment_id": 76053568, "body": "@Anthon - this is really good - however, I don&#39;t see <code>val3</code> in the output. Did the code work or was accidentally left out in a copy/paste? Also, your code is dependent on searching for <code>val2</code> however, that may not be the case. I can never know what values are in <code>myArray</code>..."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "edited": false, "score": 0, "creation_date": 1497389850, "post_id": 44515747, "comment_id": 76055641, "body": "@PhD My bad, as you can see from the edit history I originally had a different comment in the input than what I was using later on. When I realised that, I copied the new input into the answer... but at the wrong place (they do look very similar ;-) ) and a few edits later I updated the input for real now, never realising the output had the <code>val3</code> deleted. I reran the program: the val3 really gets added at the right place."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "edited": false, "score": 2, "creation_date": 1497475616, "post_id": 44515747, "comment_id": 76100365, "body": "@PhD I realised that this kind of pre- and post-processing would be an ideal candidate for a plug-in mechanism for <code>ruamel.yaml</code>. So I implemented that and the plug-in. I updated the answer with how to install and use it."}, {"owner": {"reputation": 535, "user_id": 3568904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dVLSn.jpg?s=128&g=1", "display_name": "ypriverol", "link": "https://stackoverflow.com/users/3568904/ypriverol"}, "edited": false, "score": 0, "creation_date": 1507699357, "post_id": 44515747, "comment_id": 80308600, "body": "@Anthon I have used your example but is producing this outoput:  <code>--- !!python&#47;object&#47;apply:ruamel.yaml.comments.CommentedMap  dictitems:  about: !!python&#47;object&#47;apply:ruamel.yaml.comments.CommentedMap  dictitems: {home: &#39;https:&#47;&#47;github.com&#47;soedinglab&#47;xxmotif&#39;, license:   GPLv3, license_file: LICENSE,  summary: &#39;eXhaustive, weight matriX-based motif discovery in nucleotide sequences&#39;}</code>"}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 9, "last_activity_date": 1497475500, "last_edit_date": 1497475500, "creation_date": 1497341309, "answer_id": 44515747, "question_id": 44422304, "link": "https://stackoverflow.com/questions/44422304/how-can-i-update-a-yml-file-ignoring-preexisting-jinja-syntax-using-python/44515747#44515747", "title": "How can I update a .yml file, ignoring preexisting Jinja syntax, using Python?", "body": "<p><em>The solution in this answer has been incorporated into ruamel.yaml using a plugin mechanism. At the bottom of this post there are quick-and-dirty instructions on how to use that.</em></p>\n\n<p>There are three aspects in updating a YAML file that contains jinja2 \"code\": </p>\n\n<ul>\n<li>making the jinja2 code acceptable to the YAML parser</li>\n<li>making sure the acceptable can reversed (i.e. the changes should be unique, so only they get reversed)</li>\n<li>preserving the layout of the YAML file so that the updated file processed by jinja2 still produces a valid YAML file, that again can be loaded.</li>\n</ul>\n\n<p>Let's start by making your example somewhat more realistic by adding a jinja2 variable definition and for-loop and adding some comments (<code>input.yaml</code>):</p>\n\n<pre><code># trying to update\n{% set xyz = \"123\" }\n\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja.variable }}\n    - val1\n    - val2         # add a value after this one\n    {% for d in data %}\n    - phone: {{ d.phone }}\n      name: {{ d.name }}\n    {% endfor %}\n    - {{ xyz }}\n# #% or ##% should not be in the file and neither &lt;{ or &lt;&lt;{\n</code></pre>\n\n<p>The lines starting with <code>{%</code> contain no YAML, so we'll make those into comments (assuming that comments are preserved on round-trip, see below). Since YAML scalars cannot start with <code>{</code> without being quoted we'll change the <code>{{</code> to <code>&lt;{</code>. This is done in the following code by calling <code>sanitize()</code> (which also stores the patterns used, and the reverse is done in <code>sanitize.reverse</code> (using the stored patterns).</p>\n\n<p>The preservation of your YAML code (block-style etc) is best done using <a href=\"https://pypi.python.org/pypi/ruamel.yaml/\" rel=\"noreferrer\"><code>ruamel.yaml</code></a> (disclaimer: I am the author of that package), that way you don't have to worry about flow-style elements in the input getting mangled into as block style as with the rather crude <code>default_flow_style=False</code> that the other answers use. <code>ruamel.yaml</code> also preserves comments, both the ones that were originally in the file, as well as those temporarily inserted to \"comment out\" jinja2 constructs starting with <code>%{</code>.</p>\n\n<p>The resulting code:</p>\n\n<pre><code>import sys\nfrom ruamel.yaml import YAML\n\nyaml = YAML()\n\nclass Sanitize:\n    \"\"\"analyse, change and revert YAML/jinja2 mixture to/from valid YAML\"\"\"\n    def __init__(self):\n        self.accacc = None\n        self.accper = None\n\n    def __call__(self, s):\n        len = 1\n        for len in range(1, 10):\n            pat = '&lt;' * len + '{'\n            if pat not in s:\n                self.accacc = pat\n                break\n        else:\n            raise NotImplementedError('could not find substitute pattern '+pat)\n        len = 1\n        for len in range(1, 10):\n            pat = '#' * len + '%'\n            if pat not in s:\n                self.accper = pat\n                break\n        else:\n            raise NotImplementedError('could not find substitute pattern '+pat)\n        return s.replace('{{', self.accacc).replace('{%', self.accper)\n\n    def revert(self, s):\n        return s.replace(self.accacc, '{{').replace(self.accper, '{%')\n\n\ndef update_one(file_name, out_file_name=None):\n\n    sanitize = Sanitize()\n\n    with open(file_name) as fp:\n        data = yaml.load(sanitize(fp.read()))\n    myArray = data['A']['B'][1]['myArray']\n    pos = myArray.index('val2')\n    myArray.insert(pos+1, 'val 3')\n    if out_file_name is None:\n        yaml.dump(data, sys.stdout, transform=sanitize.revert)\n    else:\n        with open(out_file_name, 'w') as fp:\n            yaml.dump(data, out, transform=sanitize.revert)\n\nupdate_one('input.yaml')\n</code></pre>\n\n<p>which prints (specify a second parameter to <code>update_one()</code> to write to a file) using Python 2.7:</p>\n\n<pre><code># trying to update\n{% set xyz = \"123\" }\n\nA:\n  B:\n  - ip: 1.2.3.4\n  - myArray:\n    - {{ jinja.variable }}\n    - val1\n    - val2         # add a value after this one\n    - val 3\n    {% for d in data %}\n    - phone: {{ d.phone }}\n      name: {{ d.name }}\n    {% endfor %}\n    - {{ xyz }}\n# #% or ##% should not be in the file and neither &lt;{ or &lt;&lt;{\n</code></pre>\n\n<p>If neither <code>#{</code> nor <code>&lt;{</code> are in any of the original inputs then sanitizing and reverting can be done with simple one-line functions (see <a href=\"https://stackoverflow.com/revisions/44515747/2\">this versions of this post</a>), and then you don't need the class <code>Sanitize</code></p>\n\n<p>Your example is indented with one position (key <code>B</code>) as well as two positions (the sequence elements), <code>ruamel.yaml</code> doesn't have that fine control over output indentation (and I don't know of any YAML parser that does). The indent (defaulting to 2) is applied to both YAML mappings as to sequence elements (measured to the beginning of the element, not to the dash). This has no influence on re-reading the YAML and happened to the output of the other two answerers as well (without them pointing out this change).</p>\n\n<p>Also note that <code>YAML().load()</code> is safe (i.e. doesn't load arbitrary potentially malicious objects), whereas the <code>yaml.load()</code> as used in the other answers <strong>is definitely unsafe</strong>, it says so in the documentation and is even mentioned in the <a href=\"https://en.wikipedia.org/wiki/YAML#Security\" rel=\"noreferrer\">WikiPedia article on YAML</a>. If you use <code>yaml.load()</code>, you would have to check each and every input file to make sure there are no tagged objects that could cause your disc to be wiped (or worse).</p>\n\n<p>If you need to update your files repeatedly, and have control over the jinja2 templating, it might be better to change the patterns for jinja2 once and not revert them, and then specifying appropriate <code>block_start_string</code>, <code>variable_start_string</code> (and possible <code>block_end_string</code> and <code>variable_end_string</code>) to the <code>jinja2.FileSystemLoader</code> added as loader to the <code>jinja2.Environment</code>.</p>\n\n<hr>\n\n<p>If the above seems to complicated then in a a virtualenv do:</p>\n\n<pre><code>pip install ruamel.yaml ruamel.yaml.jinja2\n</code></pre>\n\n<p>assuming you have the <code>input.yaml</code> from before you can run:</p>\n\n<pre><code>import os\nfrom ruamel.yaml import YAML\n\n\nyaml = YAML(typ='jinja2')\n\nwith open('input.yaml') as fp:\n    data = yaml.load(fp)\n\nmyArray = data['A']['B'][1]['myArray']\npos = myArray.index('val2')\nmyArray.insert(pos+1, 'val 3')\n\nwith open('output.yaml', 'w') as fp:\n    yaml.dump(data, fp)\n\nos.system('diff -u input.yaml output.yaml')\n</code></pre>\n\n<p>to get the <code>diff</code> output:</p>\n\n<pre><code>--- input.yaml  2017-06-14 23:10:46.144710495 +0200\n+++ output.yaml 2017-06-14 23:11:21.627742055 +0200\n@@ -8,6 +8,7 @@\n     - {{ jinja.variable }}\n     - val1\n     - val2         # add a value after this one\n+    - val 3\n     {% for d in data %}\n     - phone: {{ d.phone }}\n       name: {{ d.name }}\n</code></pre>\n\n<p><code>ruamel.yaml</code> 0.15.7 implements a new plug-in mechanism and <code>ruamel.yaml.jinja2</code> is a plug-in that rewraps the code in this answer transparently for the user. Currently the information for reversion is attached to the <code>YAML()</code> instance, so make sure you do <code>yaml = YAML(typ='jinja2')</code> for each file you process (that information could be attached to the top-level <code>data</code> instance, just like the YAML comments are).</p>\n"}], "owner": {"reputation": 10252, "user_id": 609074, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb7eb62618a588d914fe487987746ce9?s=128&d=identicon&r=PG&f=1", "display_name": "PhD", "link": "https://stackoverflow.com/users/609074/phd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2481, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1497475500, "creation_date": 1496867802, "last_edit_date": 1497251391, "question_id": 44422304, "link": "https://stackoverflow.com/questions/44422304/how-can-i-update-a-yml-file-ignoring-preexisting-jinja-syntax-using-python", "title": "How can I update a .yml file, ignoring preexisting Jinja syntax, using Python?", "body": "<p>I have some preprocessing to do with some existing .yml files - however, some of them have Jinja template syntax embedded in them:</p>\n\n<pre><code>A:\n B:\n - ip: 1.2.3.4\n - myArray:\n   - {{ jinja.variable }}\n   - val1\n   - val2\n</code></pre>\n\n<p>I'd want to read in this file, and add <code>val3</code> under <code>myArray</code> as such:</p>\n\n<pre><code>A:\n B:\n - ip: 1.2.3.4\n - myArray:\n   - {{ jinja.variable }}\n   - val1\n   - val2\n   - val 3\n</code></pre>\n\n<p>I tried manually writing out the jinja templates, but they got written with single quotes around them: <code>'{{ jinja.variable }}'</code> </p>\n\n<p>What's the recommended way for me to read such .yml files and modify them, albeit with preexisting Jinja syntax? I'd like to <em>add</em> information to these files keeping all else the same. </p>\n\n<p>I tried the above using PyYAML on Python 2.7+</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1496868353, "creation_date": 1496868353, "answer_id": 44422456, "question_id": 44422238, "link": "https://stackoverflow.com/questions/44422238/find-lost-rows-after-a-pyspark-dataframe-join/44422456#44422456", "title": "Find lost rows after a pyspark DataFrame join", "body": "<p>Although I would still like to know why my above-posted code doesn't work, I've realized that I can just do another join to answer my question:</p>\n\n<pre><code>csv_df = self.sqlContext.read.load('csv_table.parquet')\ncsv_df = csv_df.withColumn(\n    \"mid\", monotonically_increasing_id()\n)\nother_df = self.sqlContext.read.load('other_table.parquet')\njoined = csv_df.join(other_df, ['col1', 'col2'])\nfound_rows = joined.select('mid').distinct()\nnot_found_rows = csv_df.selectExpr('mid').subtract(found_rows)\nnot_found_ids = csv_df.join(not_found_rows, 'mid')\n</code></pre>\n"}], "owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1496868353, "creation_date": 1496867527, "question_id": 44422238, "link": "https://stackoverflow.com/questions/44422238/find-lost-rows-after-a-pyspark-dataframe-join", "title": "Find lost rows after a pyspark DataFrame join", "body": "<p>Given 2 spark DataFrames, <code>csv_df</code> and <code>other_df</code>, I need to join them and then figure out which rows from <code>csv_df</code> were lost in the join.</p>\n\n<p>Here's what I've tried:</p>\n\n<pre><code>    csv_df = self.sqlContext.read.load('csv_table.parquet')\n    csv_df = csv_df.withColumn(\n        \"mid\", monotonically_increasing_id()\n    )\n    other_df = self.sqlContext.read.load('other_table.parquet')\n    joined = csv_df.join(other_df, ['col1', 'col2'])\n    found_rows = joined.select('mid').distinct()\n    not_found_ids = csv_df.where(~csv_df.mid.isin(found_rows))\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>AttributeError: 'DataFrame' object has no attribute '_get_object_id'\n</code></pre>\n\n<p>What am I doing wrong? How can I fix my code to get the non-joined rows?</p>\n"}, {"tags": ["python", "django", "heroku", "oauth-2.0"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "edited": false, "score": 0, "creation_date": 1496930969, "post_id": 44422410, "comment_id": 75873549, "body": "You are a scholar and a gentleman sir!  THANK YOU @mateuszb.  This did the trick.  For anyone else having this problem I also had to add django-cors-middleware to my requirements file as well.  I am a django noob and I am not exactly sure why it would work locally without these lines in the requirements.txt file but when I push to heroku they are required.  Hmm."}, {"owner": {"reputation": 1013, "user_id": 5616580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6d6fac2bd7d0e135af8bbe8363504735?s=128&d=identicon&r=PG&f=1", "display_name": "mateuszb", "link": "https://stackoverflow.com/users/5616580/mateuszb"}, "reply_to_user": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "edited": false, "score": 0, "creation_date": 1496931235, "post_id": 44422410, "comment_id": 75873776, "body": "@GW1732 It was working because you had both packages already installed in your system ;) When you&#39;re using another environment (e.g. Heroku), you have to explicitly specify which packages are required to install ;)"}, {"owner": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "edited": false, "score": 0, "creation_date": 1496931443, "post_id": 44422410, "comment_id": 75873939, "body": "Aha.  Thank you!"}], "tags": [], "owner": {"reputation": 1013, "user_id": 5616580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6d6fac2bd7d0e135af8bbe8363504735?s=128&d=identicon&r=PG&f=1", "display_name": "mateuszb", "link": "https://stackoverflow.com/users/5616580/mateuszb"}, "is_accepted": true, "score": 4, "last_activity_date": 1496868189, "creation_date": 1496868189, "answer_id": 44422410, "question_id": 44422226, "link": "https://stackoverflow.com/questions/44422226/heroku-python-django-app-deployment-failure-no-module-named-oauth2-provider/44422410#44422410", "title": "Heroku Python Django App Deployment Failure: No module named &#39;oauth2_provider&#39;", "body": "<p>You're missing this package in your <code>requirements.txt</code> file. So add <code>django-oauth-toolkit</code> there and it should work</p>\n"}, {"tags": [], "owner": {"reputation": 5749, "user_id": 1419184, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ScuMz.jpg?s=128&g=1", "display_name": "Led Machine", "link": "https://stackoverflow.com/users/1419184/led-machine"}, "is_accepted": false, "score": 0, "last_activity_date": 1519957229, "last_edit_date": 1519957229, "creation_date": 1511767048, "answer_id": 47505624, "question_id": 44422226, "link": "https://stackoverflow.com/questions/44422226/heroku-python-django-app-deployment-failure-no-module-named-oauth2-provider/47505624#47505624", "title": "Heroku Python Django App Deployment Failure: No module named &#39;oauth2_provider&#39;", "body": "<p>Try installing the package \"django-oauth-toolkit\", execute:</p>\n\n<pre><code>pip install -U django-oauth-toolkit\n</code></pre>\n\n<p>or </p>\n\n<pre><code>pip3 install -U django-oauth-toolkit\n</code></pre>\n\n<p>Another fix could be upgrade your python version, I got this problem with python 2.7, but not with python 3.5</p>\n"}], "owner": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3875, "favorite_count": 0, "accepted_answer_id": 44422410, "answer_count": 2, "score": 1, "last_activity_date": 1519957229, "creation_date": 1496867474, "question_id": 44422226, "link": "https://stackoverflow.com/questions/44422226/heroku-python-django-app-deployment-failure-no-module-named-oauth2-provider", "title": "Heroku Python Django App Deployment Failure: No module named &#39;oauth2_provider&#39;", "body": "<p>I am following the <a href=\"https://django-oauth-toolkit.readthedocs.io/en/latest/tutorial/tutorial_01.html\" rel=\"nofollow noreferrer\">Django OAuth Toolkit tutorial</a>.  I have the app running successfully on my local server with Django OAuth Toolkit installed.  </p>\n\n<p>When I try to deploy to Heroku I get a \"ModuleNotFoundError: No module named 'oauth2_provider'\" error while running '$ python manage.py collectstatic --noinput'.</p>\n\n<p>I have attempted to search Stack Overflow for similar questions but was unable to find one.  I saw many questions on Stack Overflow relating to collectstatic but I do not think that is my problem.  </p>\n\n<p>My backtrace is as so:</p>\n\n<pre><code>remote: -----&gt; Python app detected\nremote: -----&gt; Installing requirements with pip\nremote: \nremote: -----&gt; $ python manage.py collectstatic --noinput\nremote:        Traceback (most recent call last):\nremote:          File \"manage.py\", line 10, in &lt;module&gt;\nremote:            execute_from_command_line(sys.argv)\nremote:          File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 363, in execute_from_command_line\nremote:            utility.execute()\nremote:          File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 337, in execute\nremote:            django.setup()\nremote:          File \"/app/.heroku/python/lib/python3.6/site-packages/django/__init__.py\", line 27, in setup\nremote:            apps.populate(settings.INSTALLED_APPS)\nremote:          File \"/app/.heroku/python/lib/python3.6/site-packages/django/apps/registry.py\", line 85, in populate\nremote:            app_config = AppConfig.create(entry)\nremote:          File \"/app/.heroku/python/lib/python3.6/site-packages/django/apps/config.py\", line 94, in create\nremote:            module = import_module(entry)\nremote:          File \"/app/.heroku/python/lib/python3.6/importlib/__init__.py\", line 126, in import_module\nremote:            return _bootstrap._gcd_import(name[level:], package, level)\nremote:          File \"&lt;frozen importlib._bootstrap&gt;\", line 978, in _gcd_import\nremote:          File \"&lt;frozen importlib._bootstrap&gt;\", line 961, in _find_and_load\nremote:          File \"&lt;frozen importlib._bootstrap&gt;\", line 948, in _find_and_load_unlocked\nremote:        ModuleNotFoundError: No module named 'oauth2_provider'\nremote: \nremote:  !     Error while running '$ python manage.py collectstatic --noinput'.\nremote:        See traceback above for details.\n</code></pre>\n\n<p>My settings.py Installed Apps is as so:</p>\n\n<pre><code>INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    # Disable Django's own staticfiles handling in favour of WhiteNoise, for\n    # greater consistency between gunicorn and `./manage.py runserver`. See:\n    # http://whitenoise.evans.io/en/stable/django.html#using-whitenoise-in-development\n    'whitenoise.runserver_nostatic',\n    'django.contrib.staticfiles',\n    'oauth2_provider',\n    'corsheaders',\n]\n</code></pre>\n\n<p>I am using Python 3.6.1 and my requirements.txt is as so:</p>\n\n<pre><code>dj-database-url==0.4.1\nDjango==1.11.1\ngunicorn==19.6.0\npsycopg2==2.6.2\nwhitenoise==3.2\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "magicmock"], "comments": [{"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 0, "creation_date": 1496867572, "post_id": 44422174, "comment_id": 75843055, "body": "What is the output of <code>self.subscribers[topic]</code> when you print it?"}], "answers": [{"tags": [], "owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "is_accepted": true, "score": 1, "last_activity_date": 1496869783, "creation_date": 1496869783, "answer_id": 44422808, "question_id": 44422174, "link": "https://stackoverflow.com/questions/44422174/python-magicmock-causes-nonetype-object-has-no-attribute-unregister/44422808#44422808", "title": "Python magicmock causes &#39;NoneType&#39; object has no attribute &#39;unregister&#39;", "body": "<p>Instead of the above mock, you have to write a Mock calling the instantiation within the side effect</p>\n\n<pre><code>    def subscriber (topic, topic_type, outgoing_function):\n        # convert to a ROS object\n        output = ROSBridgeObject()\n        output.foo = topic\n        # pretend we got a message from what we subscribed to\n        outgoing_function(output)\n        mock = MagicMock()\n        subscriberMock.unregister.return_value = True\n        return mock\n    subscriberMock = MagicMock(side_effect=subscriber)      \n</code></pre>\n\n<p>This is because MagicMock's either have return values or side effects</p>\n"}], "owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "accepted_answer_id": 44422808, "answer_count": 1, "score": 1, "last_activity_date": 1496869783, "creation_date": 1496867238, "last_edit_date": 1496868331, "question_id": 44422174, "link": "https://stackoverflow.com/questions/44422174/python-magicmock-causes-nonetype-object-has-no-attribute-unregister", "title": "Python magicmock causes &#39;NoneType&#39; object has no attribute &#39;unregister&#39;", "body": "<p>I'm trying to patch a function call with a custom mock I wrote</p>\n\n<pre><code>    subscriberMock = MagicMock(side_effect=subscriber)\n    subscriberMock.return_value.unregister.return_value = True\n    with patch('rospy.Subscriber', subscriberMock):\n        data['op'] = \"unsubscribe\"\n        data['topic'] = \"/helo\"\n        self.rosbridge.incoming(data)\n</code></pre>\n\n<p>The inner method has this piece of code</p>\n\n<pre><code>self.subscribers[topic] = rospy.Subscriber(topic, 'msg', outgoing_function)\nself.subscribers[topic].unregister() # &lt;-- AttributeError\n</code></pre>\n\n<p>However when I run this it returns an attribute error</p>\n\n<blockquote>\n  <p>'NoneType' object has no attribute 'unregister'</p>\n</blockquote>\n\n<p>I'm guessing the <code>return_value</code> is set to a NoneType but I thought this <code>subscriberMock.return_value.unregister.return_value</code> would override it</p>\n\n<hr>\n\n<p>More Information:</p>\n\n<p>if I print <code>self.subscribers[topic]</code> it returns <code>None</code>. It then runs the side effect. Why should <code>self.subscribers[topic] = None</code> given that I have a return value for a parameter in it. </p>\n"}, {"tags": ["python", "lisp", "bioinformatics", "biopython"], "comments": [{"owner": {"reputation": 5679, "user_id": 1878788, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fc54887ecbaba35e17251129e5b78c9a?s=128&d=identicon&r=PG", "display_name": "bli", "link": "https://stackoverflow.com/users/1878788/bli"}, "edited": false, "score": 1, "creation_date": 1496924207, "post_id": 44422133, "comment_id": 75868154, "body": "Note that if you don&#39;t get satisfying answers here, you might try in the newly created bioinformatics SE site: <a href=\"https://bioinformatics.stackexchange.com/\">bioinformatics.stackexchange.com</a>"}, {"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1496933364, "post_id": 44422133, "comment_id": 75875503, "body": "Perhaps try the three-letter code for valine: <code>pathways = meta.pathways_of_compound(&#39;val&#39;)</code>"}, {"owner": {"reputation": 31, "user_id": 8116116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfa1855beff3abc9a91a6ec38e98a24?s=128&d=identicon&r=PG&f=1", "display_name": "astridmarilyn", "link": "https://stackoverflow.com/users/8116116/astridmarilyn"}, "reply_to_user": {"reputation": 5679, "user_id": 1878788, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fc54887ecbaba35e17251129e5b78c9a?s=128&d=identicon&r=PG", "display_name": "bli", "link": "https://stackoverflow.com/users/1878788/bli"}, "edited": false, "score": 0, "creation_date": 1497015976, "post_id": 44422133, "comment_id": 75915141, "body": "@bli thank you! I will repost it there"}, {"owner": {"reputation": 31, "user_id": 8116116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfa1855beff3abc9a91a6ec38e98a24?s=128&d=identicon&r=PG&f=1", "display_name": "astridmarilyn", "link": "https://stackoverflow.com/users/8116116/astridmarilyn"}, "reply_to_user": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1497016107, "post_id": 44422133, "comment_id": 75915241, "body": "@nbryans I have tried that and unfortunately it did not work. I tried several different synonyms as well."}], "owner": {"reputation": 31, "user_id": 8116116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfa1855beff3abc9a91a6ec38e98a24?s=128&d=identicon&r=PG&f=1", "display_name": "astridmarilyn", "link": "https://stackoverflow.com/users/8116116/astridmarilyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1497032440, "creation_date": 1496867067, "last_edit_date": 1497032440, "question_id": 44422133, "link": "https://stackoverflow.com/questions/44422133/what-methods-should-i-use-from-pythoncyc-api-to-query-metabolites-in-biocyc-data", "title": "What methods should I use from PythonCyc API to query metabolites in BioCyc database?", "body": "<p>I am using <strong>PythonCyc</strong> API in order to write a query for metabolites in <strong>BioCyc</strong>. The purpose of this API is to communicate with the database software of BioCyc- Pathway Tools. Pathway Tools is in lisp therefore, PythonCyc creates a bridge between python and common lisp. To use this this API one must first create a PGDB object with a specified organism ID (orgid). In the example below I create a PGDB with orgid \"meta\". After this, I am able to call methods from PythonCyc with this object:</p>\n\n<pre><code>import sys\nimport pythoncyc\n#this creates PGDB object associated with meta(MetaCyc)\nmeta = pythoncyc.select_organism('meta')\n#lists pathways of specified compound\npathways = meta.pathways_of_compound('sucrose')\nprint pathways\n</code></pre>\n\n<p>The query for the metabolite above, 'sucrose', provides a list a pathways:</p>\n\n<pre><code>[u'|PWY-7347|', u'|SUCSYN-PWY|', u'|PWY-7238|', u'|PWY-6527|', u'|PWY-5343|', u'|PWY-3801|', u'|PWY-7345|', u'|PWY-862|', u'|SUCUTIL-PWY|', u'|PWY66-373|', u'|PWY-621|', u'|PWY-822|', u'|SUCROSEUTIL2-PWY|', u'|PWY-6525|', u'|PWY-6524|', u'|PWY-5337|', u'|PWY-5384|']\n</code></pre>\n\n<p>However if I switch this metabolite name to a common amino acid name, such as 'valine': </p>\n\n<pre><code>import sys\nimport pythoncyc\n#this creates PGDB object associated with meta(MetaCyc)\nmeta = pythoncyc.select_organism('meta')\n#lists pathways of specified compound\npathways = meta.pathways_of_compound('valine')\nprint pathways\n</code></pre>\n\n<p>The query provides an error message that states \"non coercible frame\", which means it cannot find this ID. This is a common metabolite, just as sucrose, which should very well have pathway entries in database, however there are none found with this method. I have also tried synonyms of valine and other methods in PythonCyc such as \"all_pathways(cpds)\", which give me the same error message.\nWhat is the reason for this? Does BioCyc not list any pathways for amino acids? Am I using an incorrect method to access amino acid information?</p>\n\n<p><a href=\"http://pythoncyc.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Link to PythonCyc API</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1086, "user_id": 2715719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ce72q.jpg?s=128&g=1", "display_name": "Sebastian Walla", "link": "https://stackoverflow.com/users/2715719/sebastian-walla"}, "edited": false, "score": 0, "creation_date": 1496867285, "post_id": 44422129, "comment_id": 75842906, "body": "Please provide the snippet where eat is provided as user input too"}, {"owner": {"reputation": 17218, "user_id": 487033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea0625099985c0ff486685846ac0dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "doelleri", "link": "https://stackoverflow.com/users/487033/doelleri"}, "edited": false, "score": 1, "creation_date": 1496867638, "post_id": 44422129, "comment_id": 75843091, "body": "Variable is defined as <code>Action</code> but used as <code>action</code>."}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 1, "last_activity_date": 1496868369, "last_edit_date": 1496868369, "creation_date": 1496867639, "answer_id": 44422262, "question_id": 44422129, "link": "https://stackoverflow.com/questions/44422129/why-dont-variables-upload-in-a-loop/44422262#44422262", "title": "Why don&#39;t variables upload in a loop?", "body": "<p>The problem is that you defined <code>Action</code> but tried to use <code>action</code> (the case matters!). Without the <code>try</code> and <code>except</code> you may have noticed that yourself. That's one reason you should (almost) never use a bare <code>except</code>. Always catch specific exceptions like <code>ValueError</code> and similar. </p>\n\n<p>If I remove these and use this code, the exception is shown:</p>\n\n<pre><code>apples=3\n\nwhile apples&gt;0:\n    print(\"You have {} a left\".format(apples))\n\n    Action=input('Action:')\n    if action == \"eat\":\n        apples=apples-1\n    else:\n        print(\"invalid\")\n\n\n# ...\n\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n      4     print(\"You have {} a left\".format(apples))\n      5     Action=input('Action:')\n----&gt; 6     if action == \"eat\":\n      7         apples=apples-1\n      8     else:\n\nNameError: name 'action' is not defined\n</code></pre>\n\n<p>You may also need to <code>strip</code> the <code>input</code> because it sometimes contains a trailing newline:</p>\n\n<pre><code>apples=3\n\nwhile apples &gt; 0:\n    print(\"You have {} apples left\".format(apples))\n    action=input('Action:')\n    if action.strip() == \"eat\":  # here is the strip that removes all leading and trailing whitespaces\n        apples=apples-1\n    else:\n        print(\"invalid\")\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7823353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadf12ea7a37f8b82179c9d24363a51d?s=128&d=identicon&r=PG&f=1", "display_name": "stavro", "link": "https://stackoverflow.com/users/7823353/stavro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 44422262, "answer_count": 1, "score": 1, "last_activity_date": 1496868369, "creation_date": 1496867057, "last_edit_date": 1496868149, "question_id": 44422129, "link": "https://stackoverflow.com/questions/44422129/why-dont-variables-upload-in-a-loop", "title": "Why don&#39;t variables upload in a loop?", "body": "<p>I want to make a program that tracks how many apples apples I have and takes an apple away when I eat one.</p>\n\n<pre><code>apples=3\n\nwhile apples&gt;0:\n    try: \n        print(\"You have {} a left\".format(apples))\n\n        Action=input('Action:')\n        if action == \"eat\":\n            apples=apples-1\n        else:\n            print(\"invalid\")\n    except:\n        pass\n</code></pre>\n\n<p>However this code doesn't update apples when I write eat as user input.</p>\n\n<blockquote>\n  <p>You have 3 apples left<br>\n  Action:eat<br>\n  You have 3 apples left<br>\n  Action:eat<br>\n  You have 3 apples left<br>\n  Action:eat<br>\n  You have 3 apples left<br>\n  Action:eat<br>\n  You have 3 apples left</p>\n</blockquote>\n"}, {"tags": ["python", "text", "text-mining", "n-gram"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 7993882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ae0ff77972d54e3a03144d39cbd33f?s=128&d=identicon&r=PG&f=1", "display_name": "Sruthi Susan Thomas", "link": "https://stackoverflow.com/users/7993882/sruthi-susan-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1496868148, "last_edit_date": 1496868148, "creation_date": 1496867841, "answer_id": 44422314, "question_id": 44422120, "link": "https://stackoverflow.com/questions/44422120/n-gram-analysis-in-python/44422314#44422314", "title": "N-Gram Analysis in Python", "body": "<p>This code will help you get the count of unigrams such as 'nutrition' from bigrams. </p>\n\n<pre><code>2gram=result[result['ngram']==2]\n2gram=2gram.reset_index()\n#create an empty dictionary to store count of words in bigrams\nwords=dict()\nfor i in range(0,len(2gram):\n    query_wrds=2gram.loc[i,'query'].split()\n        for item in query_words:\n            if item not in words:\n                words[item]=1\n            else:\n                words[item]+=1\n#to get count of word 'nutrition'\nnut_ct=words['nutrition']\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 7564979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rpGxq2tkTcs/AAAAAAAAAAI/AAAAAAAAABI/lhD3x_bEkw8/photo.jpg?sz=128", "display_name": "Ran Tao", "link": "https://stackoverflow.com/users/7564979/ran-tao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496868148, "creation_date": 1496867018, "last_edit_date": 1496867405, "question_id": 44422120, "link": "https://stackoverflow.com/questions/44422120/n-gram-analysis-in-python", "title": "N-Gram Analysis in Python", "body": "<p>Here is what my sample data looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jYhAe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jYhAe.png\" alt=\"enter image description here\"></a></p>\n\n<p>I need to conduct 1-2 gram on query, and calculate the sum and average of impression associated with the queries. Now I've figured out how to aggregate the impressions using the codes below.</p>\n\n<pre><code>def n_grams(txt):\ngrams = list()\nwords = txt.split(' ')\nfor i in range(len(words)):\n    for k in range(1, len(words) - i + 1):\n        grams.append(\" \".join(words[i:i+k]))\nreturn pd.Series(grams)\n\n\ncounts = df['query'].apply(n_grams).join(df)\nresult = counts.drop(\"query\", axis=1).set_index(\"impression\").unstack()    .rename(\"ngram\").dropna().reset_index()    .drop(\"level_0\", \naxis=1).groupby(\"ngram\")[\"impression\"].sum()\nresult = result.to_frame()\nresult['query'] = result.index\nresult['ngram'] =result['query'].str.split().apply(len)\nresult = result.groupby(['ngram','query'])['impression'].sum()\nresult = result.reset_index()\nresult = result.sort_values(['ngram', 'impression'], ascending=[True, False])\n</code></pre>\n\n<p>The results return like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PCxPH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCxPH.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here I need an another column to show the average impression associated with those queries. For example, the word \"nutrition\" appear four times, so the avg impression should be 100/4 = 25. Also, I want to show how many times this query appear in another column. The ultimate result should look like this:<a href=\"https://i.stack.imgur.com/fLwkp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fLwkp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1526180243, "creation_date": 1526180243, "answer_id": 50312358, "question_id": 44422105, "link": "https://stackoverflow.com/questions/44422105/is-it-possible-with-flask-sqlalchemy-join-to-select-all-columns-from-one-table-a/50312358#50312358", "title": "Is it possible with Flask-SQLAlchemy join to select all columns from one table and specify some from another?", "body": "<p>You can do it as follows:</p>\n\n<pre><code>result = session.query(Advertisement, Coupon.discount, Coupon.expiry_date).filter(\n   Advertisement.id==Coupon.id, \n   Advertisement.date==Coupon.date, \n   Advertisement.id==12345\n)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4803243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXPbt.png?s=128&g=1", "display_name": "eriye9", "link": "https://stackoverflow.com/users/4803243/eriye9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526180243, "creation_date": 1496866940, "last_edit_date": 1496867513, "question_id": 44422105, "link": "https://stackoverflow.com/questions/44422105/is-it-possible-with-flask-sqlalchemy-join-to-select-all-columns-from-one-table-a", "title": "Is it possible with Flask-SQLAlchemy join to select all columns from one table and specify some from another?", "body": "<p>I'm doing a join of two tables and want to select all the columns from one and only some from another. I feel like I'm close, but it's not quite returning what I want. I have an advertisement table and a coupon table in where they have a 1 to 1 relationship.</p>\n\n<p>I have called a query on the db model like so:</p>\n\n<pre><code>result = Advertisement.query.join(Coupon, \nAdvertisement.id==Coupon.id).filter(Advertisement.date==Coupon.date, \nAdvertisement.id==12345).add_columns(Coupon.discount, \nCoupon.expiry_date)\n</code></pre>\n\n<p>What I want to get back is all the columns from Advertisement and the two from Coupon. My understanding was that add_columns would do this, but I only get back the two from Coupon and nothing from Advertisement. While if I remove add_columns I get back all from Advertisement but nothing from Coupon.</p>\n\n<p>Do I have to declare the table relationship in the class? I know what the query should look like in sql, but I'm at a bit of a loss here. If the information I gave isn't clear enough, let me know and I can try to elaborate further, thanks.</p>\n"}, {"tags": ["python", "import", "module", "openturns"], "comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1496867122, "post_id": 44422100, "comment_id": 75842807, "body": "have you tried installing like this, <code>conda install theano pygpu</code> ?"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1496867344, "post_id": 44422100, "comment_id": 75842933, "body": "try to add the path in your <code>env</code> variable at windows."}, {"owner": {"reputation": 108, "user_id": 4048407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NrHxZ.jpg?s=128&g=1", "display_name": "Aorus", "link": "https://stackoverflow.com/users/4048407/aorus"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1496869228, "post_id": 44422100, "comment_id": 75843853, "body": "I updated theano and pygpu, to no effect."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8394910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5332c7f107136313605447e8ed1685?s=128&d=identicon&r=PG&f=1", "display_name": "jschueller", "link": "https://stackoverflow.com/users/8394910/jschueller"}, "is_accepted": false, "score": 1, "last_activity_date": 1501515602, "last_edit_date": 1501515602, "creation_date": 1501514392, "answer_id": 45419667, "question_id": 44422100, "link": "https://stackoverflow.com/questions/44422100/python-package-import-conflicts-theano-and-openturns/45419667#45419667", "title": "Python package import conflicts (Theano and openturns)", "body": "<p>It seems the theano package from the defaults anaconda channel pulls mingw dependencies, which probably conflict with our own newer provided runtime; a workaround is to install everything from conda-forge.</p>\n\n<p>This should work: </p>\n\n<pre><code>conda install openturns theano pymc3 -c conda-forge\n</code></pre>\n"}], "owner": {"reputation": 108, "user_id": 4048407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NrHxZ.jpg?s=128&g=1", "display_name": "Aorus", "link": "https://stackoverflow.com/users/4048407/aorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1584148197, "creation_date": 1496866892, "last_edit_date": 1584148197, "question_id": 44422100, "link": "https://stackoverflow.com/questions/44422100/python-package-import-conflicts-theano-and-openturns", "title": "Python package import conflicts (Theano and openturns)", "body": "<p>I'm running Anaconda 4.3.1 (Python 3.6.1) on Windows 7 64-bit and am unable to import both theano and openturns into my session, however importing only one or the other works fine. Obviously one is causing some sort of import conflict in the other, but I don't understand enough of the importing process to identify why. </p>\n\n<p>If theano is imported and I attempt to import openturns, I get this:</p>\n\n<pre><code>import theano.tensor as tt\nimport openturns as ot\n\n    Traceback (most recent call last):\n\n      File \"&lt;ipython-input-38-704e69d30dff&gt;\", line 1, in &lt;module&gt;\n        import openturns as ot\n\n      File \"C:\\Anaconda3\\lib\\site-packages\\openturns\\__init__.py\", line 61, in &lt;module&gt;\n        from .common import *\n\n      File \"C:\\Anaconda3\\lib\\site-packages\\openturns\\common.py\", line 20, in &lt;module&gt;\n        _common = swig_import_helper()\n\n      File \"C:\\Anaconda3\\lib\\site-packages\\openturns\\common.py\", line 19, in swig_import_helper\n        return importlib.import_module('_common')\n\n      File \"C:\\Anaconda3\\lib\\importlib\\__init__.py\", line 126, in import_module\n        return _bootstrap._gcd_import(name[level:], package, level)\n\n    ModuleNotFoundError: No module named '_common'\n</code></pre>\n\n<p>If I attempt the converse, where openturns is imported and I then attempt to import theano, I get this:</p>\n\n<pre><code>import openturns as ot    \nfrom theano import tensor as tt\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-3-ed4283f52c57&gt;\", line 1, in &lt;module&gt;\n    from theano import tensor as tt\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\__init__.py\", line 80, in &lt;module&gt;\n    from theano.scan_module import (scan, map, reduce, foldl, foldr, clone,\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\scan_module\\__init__.py\", line 41, in &lt;module&gt;\n    from theano.scan_module import scan_opt\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\scan_module\\scan_opt.py\", line 60, in &lt;module&gt;\n    from theano import tensor, scalar\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\tensor\\__init__.py\", line 9, in &lt;module&gt;\n    from theano.tensor.subtensor import *\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\tensor\\subtensor.py\", line 26, in &lt;module&gt;\n    import theano.gof.cutils  # needed to import cutils_ext\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\gof\\cutils.py\", line 320, in &lt;module&gt;\n    compile_cutils()\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\gof\\cutils.py\", line 285, in compile_cutils\n    preargs=args)\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\gof\\cmodule.py\", line 2325, in compile_str\n    return dlimport(lib_filename)\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\theano\\gof\\cmodule.py\", line 302, in dlimport\n    rval = __import__(module_name, {}, {}, [module_name])\n\nImportError: DLL load failed: The specified procedure could not be found.\n</code></pre>\n\n<p>Not sure if relevant, but the Theano installation required that I add a folder containing some DLLs to the system PATH. Thanks!</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8127872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9abffcf39c72837e5deff5c7d256de?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Fleischer", "link": "https://stackoverflow.com/users/8127872/andrew-fleischer"}, "edited": false, "score": 0, "creation_date": 1496925983, "post_id": 44422299, "comment_id": 75869477, "body": "Thanks :) Saved a lot of time"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 0, "last_activity_date": 1496867794, "creation_date": 1496867794, "answer_id": 44422299, "question_id": 44422098, "link": "https://stackoverflow.com/questions/44422098/plotting-pandas-dataframe-matplotlib/44422299#44422299", "title": "Plotting Pandas dataframe matplotlib", "body": "<p><strong>Case 1</strong>  </p>\n\n<pre><code>df.unstack().plot.bar()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jtEXT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jtEXT.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Case 2</strong>  </p>\n\n<pre><code>df.unstack(0).plot.bar()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sHG9C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sHG9C.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 41, "user_id": 8127872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9abffcf39c72837e5deff5c7d256de?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Fleischer", "link": "https://stackoverflow.com/users/8127872/andrew-fleischer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 44422299, "answer_count": 1, "score": 0, "last_activity_date": 1496867794, "creation_date": 1496866882, "question_id": 44422098, "link": "https://stackoverflow.com/questions/44422098/plotting-pandas-dataframe-matplotlib", "title": "Plotting Pandas dataframe matplotlib", "body": "<p>I'm using Pandas to read in a .csv file containing dates and a product type and I'm trying to graph the amount of each product over time. Heres my current code: </p>\n\n<pre><code>    df = df.dropna()\n    df= df[df['product'].str.contains(\"X|Y|Z\")]\n    df=df.groupby('date')['product'].value_counts()\n</code></pre>\n\n<p>which returns me this dataframe:</p>\n\n<pre><code>date        product\n2013.0      X         2229\n            Y         194\n            Z         590\n2014.0      X         229\n            Y         1924\n            Z         5902\n</code></pre>\n\n<p>Whats the best way to plot this using matplotlib?</p>\n"}, {"tags": ["python", "pydev"], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 1259406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c0145fc6b26e8f27b1d51fae6c1bbea7?s=128&d=identicon&r=PG", "display_name": "maugch", "link": "https://stackoverflow.com/users/1259406/maugch"}, "edited": false, "score": 0, "creation_date": 1497365956, "post_id": 44524159, "comment_id": 76042032, "body": "I didn&#39;t have the time to test it yet, but I think I will try the &quot;force builtins&quot;. for all libraries that gives me similar issues"}], "tags": [], "owner": {"reputation": 1, "user_id": 8155209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0960253d728b5f8eed1c490628564428?s=128&d=identicon&r=PG", "display_name": "ogattaz", "link": "https://stackoverflow.com/users/8155209/ogattaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1497363515, "creation_date": 1497363515, "answer_id": 44524159, "question_id": 44422078, "link": "https://stackoverflow.com/questions/44422078/pydev-unresolved-import-only-on-ide-still-running/44524159#44524159", "title": "PyDev - unresolved import only on IDE, still running", "body": "<p>Bonjour,</p>\n\n<p>As you, I had an unresolved import only on IDE and I found a workaround.</p>\n\n<p>I installed \"netifaces\" using the appropriate command :</p>\n\n<pre><code>pip3 install netifaces\n</code></pre>\n\n<p>After the installation, I got two entries in the folder \"/usr/local/lib/python3.6/site-packages\"  (ref. Mac OS + homebrew).</p>\n\n<ul>\n<li>netifaces-0.10.6.dist-info</li>\n<li>netifaces.cpython-36m-darwin.so</li>\n</ul>\n\n<p>At this point, I had an unresolved import issue in the PyDev editor, but my application runs well when I launched it using a Pydev launch configuration and the same interpreter.</p>\n\n<p>Note: I also import other modudes installed using pip3 and their importations did'nt generate issue.</p>\n\n<p>I created the symbolic link \"netifaces.so\" to get the same file I found in the \"site-packages\" folder of the Python 2.7.13 interpretor </p>\n\n<pre><code>ln -s  netifaces.cpython-36m-darwin.so  netifaces.so\n</code></pre>\n\n<p>After this creation, all run well : the import issues desapear in the Pydev editor.</p>\n\n<p>Question : where is the error ? </p>\n\n<ol>\n<li>In the module installation done by pip3 : the installed \".so\" file doesn't have the name of the module ?</li>\n<li>In the module discovery function of pyDev which doesn't take care of the \"platform extended\" name of the installed \".so\" file</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1208, "user_id": 1259406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c0145fc6b26e8f27b1d51fae6c1bbea7?s=128&d=identicon&r=PG", "display_name": "maugch", "link": "https://stackoverflow.com/users/1259406/maugch"}, "is_accepted": true, "score": 0, "last_activity_date": 1499410921, "creation_date": 1499410921, "answer_id": 44964482, "question_id": 44422078, "link": "https://stackoverflow.com/questions/44422078/pydev-unresolved-import-only-on-ide-still-running/44964482#44964482", "title": "PyDev - unresolved import only on IDE, still running", "body": "<p>I solved it by forcing the build of all external libraries that caused that error (force builtins under interpreter's properties)\nFor my libraries I deleted all .pyc files and tried again and it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 8941168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882e5811b4d4410b1d1913dd33287734?s=128&d=identicon&r=PG&f=1", "display_name": "ryh", "link": "https://stackoverflow.com/users/8941168/ryh"}, "is_accepted": false, "score": 1, "last_activity_date": 1510688570, "creation_date": 1510688570, "answer_id": 47293998, "question_id": 44422078, "link": "https://stackoverflow.com/questions/44422078/pydev-unresolved-import-only-on-ide-still-running/47293998#47293998", "title": "PyDev - unresolved import only on IDE, still running", "body": "<p>I had the same issue with Orange-Bioinformatics, code would run fine but PyDev showed an unknown import.</p>\n\n<p>The problem in this case were missing <code>__init__.py</code> files in the Orange-Bioinformatics archive, which pip downloaded and installed. PyDev seems to want a namespace declaration for each module, so I simply created a file in ~/.local/lib/python3.4/site-packages/orangecontrib/ (would be /usr/lib/python2.7/sqlite3/ in your case), named the file <code>__init__.py</code> and saved it with the following content:</p>\n\n<pre><code># namespace stub\n__import__(\"pkg_resources\").declare_namespace(__name__)\n</code></pre>\n\n<p>The file was put into the subfolder orangecontrib/bio/</p>\n\n<p>Just refresh PyDev's module list via Window -> Preferences -> PyDev -> Interpreters -> Python Interpreter -> Apply. Now all works well for me :-)</p>\n"}], "owner": {"reputation": 1208, "user_id": 1259406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c0145fc6b26e8f27b1d51fae6c1bbea7?s=128&d=identicon&r=PG", "display_name": "maugch", "link": "https://stackoverflow.com/users/1259406/maugch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "accepted_answer_id": 44964482, "answer_count": 3, "score": 0, "last_activity_date": 1510688570, "creation_date": 1496866799, "question_id": 44422078, "link": "https://stackoverflow.com/questions/44422078/pydev-unresolved-import-only-on-ide-still-running", "title": "PyDev - unresolved import only on IDE, still running", "body": "<p>I'm trying to understand what PyDev doesn't like. I'm under Ubuntu and it seems that PyDev doesn't see the libraries like bash does.\nI have a problem with two libraries, sqlite3 and peewee. If I run my program on a shell, all fine; if I open it in my newly installed PyDev I see a couple of instruction underlined with the message</p>\n\n<blockquote>\n  <p>Unresolved import: sqlite3</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>Undefined variable from import: get</p>\n</blockquote>\n\n<p>The first error comes from the following code:</p>\n\n<pre><code>from pprint import pprint\nimport sqlite3\nfrom bs4 import BeautifulSoup\nimport codecs\nfrom database import Tbrecipe\nfrom datetime import datetime\nimport logging\n\ndef main():\n    logger = logging.getLogger('peewee')\n    logger.setLevel(logging.DEBUG)\n    logger.addHandler(logging.StreamHandler())\n    CONN = sqlite3.connect('ent.db')  \n</code></pre>\n\n<p>The import error happens at the.. import. Second line.This happens because I've personally added /usr/lib/python2.7/sqlite3 to the pythonpath on the pydev's python interpreter. If I remove it, the error is at \"sqlite3.connect\". I suppose connect is not defined on that directory. I didn't find it.</p>\n\n<p>Peewee has other issues. I created an object class for my database's table. All fine until I try to use some methods inherited from peewee.</p>\n\n<p>My database.py looks like this:</p>\n\n<p>from peewee import *\ndatabase = MySQLDatabase('test', **{'host': 'localhost',\n 'password': 'rt', 'user': 'rt','charset':'utf8mb4'})</p>\n\n<p>class UnknownField(object):\n    def <strong>init</strong>(self, *_, **__): pass</p>\n\n<p>class BaseModel(Model):\n    class Meta:\n        database = database</p>\n\n<p>class Tbitem(BaseModel):\n    source = IntegerField()\n    name = CharField(null=True)</p>\n\n<p>on my main.py</p>\n\n<pre><code>...\nfrom database import Tbitem\nitem = Tbitem.get(Tbitem.id==id_item)\n</code></pre>\n\n<p>both \"get\" and \"Tbitem.id\" are underlined in red with the error</p>\n\n<blockquote>\n  <p>Undefined variable from import: get</p>\n</blockquote>\n\n<p>I can continue to work as nothing happens, or I can go back to vim or vscode (slow debugger), but I\"d prefer using this since I'm used to eclipse and I like the idea of pydev. What should I do? I did check pythonpath on a shell and it looks the same, other than a directory that doesn't exist anymore.</p>\n\n<p>I read on the FAQ of pydev that it doesn't like softlinks. Should I remove all softlinks? peewee is not softlinked and sqlite3 I don't even know where it finish.</p>\n\n<p>Anyone with similar issues and a solution? I did read most of the questions here on SO, but they don't work for me.</p>\n"}, {"tags": ["python", "css", "flask", "pycharm"], "comments": [{"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 1, "creation_date": 1496868510, "post_id": 44422029, "comment_id": 75843511, "body": "Are you sure you cleared your browser cache(Ctrl+Shift+R) and deleted all the pyc files?"}, {"owner": {"reputation": 78, "user_id": 1093327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d910c03b050f5def77567ce304c01?s=128&d=identicon&r=PG", "display_name": "Fakhir", "link": "https://stackoverflow.com/users/1093327/fakhir"}, "edited": false, "score": 0, "creation_date": 1497010449, "post_id": 44422029, "comment_id": 75911285, "body": "create an inner folder with the name of static and place all your static files here. Remove your browser cache and try again."}], "owner": {"reputation": 416, "user_id": 5937027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oO93k.png?s=128&g=1", "display_name": "HoereeBauke", "link": "https://stackoverflow.com/users/5937027/hoereebauke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1496866557, "creation_date": 1496866557, "question_id": 44422029, "link": "https://stackoverflow.com/questions/44422029/flask-imports-wrong-css", "title": "Flask imports wrong css", "body": "<p>I'm struggeling with this problem now for hours and can't find the problem. I'm building a flask application for a school project and in my static folder, I made a folder css with a file <strong>style.css</strong>. But when I run the project it usses a completely different stylesheet which is not even linked to my file and it even isn't in my project. </p>\n\n<p>Do any of you have a solution for this.</p>\n\n<p>It would be verry helpfull</p>\n\n<p>Thanks in advance</p>\n\n<p><em>CSS in flask project</em>\n<a href=\"https://i.stack.imgur.com/5TXZn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5TXZn.png\" alt=\"enter image description here\"></a></p>\n\n<p><em>CSS file that my browser loads</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/Fb74h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fb74h.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 597, "user_id": 2168066, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be0d65389e4ecf624bd2944a9156ff3e?s=128&d=identicon&r=PG", "display_name": "user2168066", "link": "https://stackoverflow.com/users/2168066/user2168066"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1496967074, "post_id": 44422006, "comment_id": 75892099, "body": "Sorry for the delay, I actually did something very similiar. I just made a manual migration with create sequence as you described."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1496968281, "post_id": 44422006, "comment_id": 75892377, "body": "Good to know, but may I suggest adding it to the migrations. So that the process is reproducible. Also your tests may not work."}], "answers": [{"tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": true, "score": 0, "last_activity_date": 1496878476, "creation_date": 1496878476, "answer_id": 44424383, "question_id": 44422006, "link": "https://stackoverflow.com/questions/44422006/auto-increment-non-pk-field-starting-at-1000/44424383#44424383", "title": "Auto Increment non-pk field starting at 1000", "body": "<blockquote>\n  <p>From what I have researched so far I would need to extend the save function and check the previous value in the db.</p>\n</blockquote>\n\n<p>Generally doing a SELECT followed by an insert or update based on that SELECT is a bad idea for any RDBMS. Because this can lead to race conditions and databases have built in mechanisms that avoid this race condition and are usually faster.</p>\n\n<p>Postgresql has a <a href=\"https://www.postgresql.org/docs/current/static/datatype-numeric.html\" rel=\"nofollow noreferrer\">Serial</a> type. It will be included in the django.contrib.posgres from the next major release of Django but for now. Create a custom migration like this:</p>\n\n<pre><code>CREATE SEQUENCE my_serial START 1000;\nALTER TABLE myapp_mymodel ALTER COLUMN order_number SET DEFAULT nextval('my_serial');\n</code></pre>\n\n<p>If you have never created a custom migration before, look up <a href=\"https://docs.djangoproject.com/en/1.11/ref/migration-operations/#django.db.migrations.operations.RunPython\" rel=\"nofollow noreferrer\">RunPython</a></p>\n"}], "owner": {"reputation": 597, "user_id": 2168066, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be0d65389e4ecf624bd2944a9156ff3e?s=128&d=identicon&r=PG", "display_name": "user2168066", "link": "https://stackoverflow.com/users/2168066/user2168066"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 44424383, "answer_count": 1, "score": 1, "last_activity_date": 1496878476, "creation_date": 1496866483, "question_id": 44422006, "link": "https://stackoverflow.com/questions/44422006/auto-increment-non-pk-field-starting-at-1000", "title": "Auto Increment non-pk field starting at 1000", "body": "<p>I have been working in Django for about a week now so I don't have much idea on the following. I need to create a sequence for a field in my model and postgres database that auto increments starting at 1000. So it would list like:\n1000, 1001, 1002, etc....</p>\n\n<p>From what I have researched so far I would need to extend the save function and check the previous value in the db.</p>\n\n<p>The end result is to be able to post to an API using this model and this field increments like above.</p>\n\n<pre><code>class MyModel(AuditMixin, models.Model):\n    order_number = models.IntegerField(blank=False)\n\n    def get_number(self):\n        return ???\n\n    def save(self):\n        ??? .save()\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "class", "mocking", "python-unittest"], "answers": [{"tags": [], "owner": {"reputation": 2109, "user_id": 8129609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2325576ffe7f43d5c16b58439d1e8702?s=128&d=identicon&r=PG&f=1", "display_name": "codelessbugging", "link": "https://stackoverflow.com/users/8129609/codelessbugging"}, "is_accepted": true, "score": 1, "last_activity_date": 1496911890, "creation_date": 1496911890, "answer_id": 44430993, "question_id": 44422000, "link": "https://stackoverflow.com/questions/44422000/python-test-that-class-has-been-instantiated-with-arguments/44430993#44430993", "title": "python - test that class has been instantiated with arguments", "body": "<p>By calling both</p>\n\n<pre><code>args = Args()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>expected_args = Args()\n</code></pre>\n\n<p>you are assigning these two variables to two different objects, thus they fail the test case even though their attributes are the same.</p>\n\n<p>To overcome this, you might want to specifically compare their attributes. Referring to <a href=\"https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.call_args\" rel=\"nofollow noreferrer\">call_args</a>, </p>\n\n<pre><code>with patch(\"xosgen.xosgen.XOSGenerator\") as generator:\n    XosGen.init(args)\n    actual_args = generator.call_args[1]['args'] # if XOSGenerator takes in a keyword argument\n    actual_args = generator.call_args[0][0] # otherwise, so comment one of these lines out\n    assert actual_args.inputs == expected_args.inputs\n    assert actual_args.target == expected_args.target\n    assert actual_args.output == expected_args.output\n</code></pre>\n"}], "owner": {"reputation": 1905, "user_id": 1889864, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/4c6faaccb517f6825e732e7bc0898625?s=128&d=identicon&r=PG", "display_name": "teone", "link": "https://stackoverflow.com/users/1889864/teone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 44430993, "answer_count": 1, "score": 0, "last_activity_date": 1496911890, "creation_date": 1496866459, "last_edit_date": 1496867621, "question_id": 44422000, "link": "https://stackoverflow.com/questions/44422000/python-test-that-class-has-been-instantiated-with-arguments", "title": "python - test that class has been instantiated with arguments", "body": "<p>I'm pretty new with python, and I'm trying to figure out how to test this code.</p>\n\n<p>Here is my class:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport argparse\nfrom generator import *\n\nparse = argparse.ArgumentParser(description='XOS Generative Toolchain')\nparse.add_argument('--rev', dest='rev', action='store_true',default=False, help='Convert proto to xproto')\nparse.add_argument('--target', dest='target', action='store',default=None, help='Output format, corresponding to &lt;output&gt;.yaml file', required=True)\nparse.add_argument('--output', dest='output', action='store',default=None, help='Destination dir', required=True)\nparse.add_argument('--attic', dest='attic', action='store',default=None, help='The location at which static files are stored')\nparse.add_argument('--kvpairs', dest='kv', action='store',default=None, help='Key value pairs to make available to the target')\nparse.add_argument('inputs', metavar='&lt;input file&gt;', nargs='+', action='store', help='xproto files to compile')\n\nclass XosGen:\n\n    @staticmethod\n    def init(args=None):\n\n        if not args:\n            args = parse.parse_args()\n\n        args.quiet = False\n\n        # convert output to absolute path\n        if not os.path.isabs(args.output):\n            args.output = os.path.abspath(os.getcwd() + '/' + args.output)\n        if not os.path.isabs(args.target):\n            args.target = os.path.abspath(os.getcwd() + '/' + args.target)\n\n        inputs = []\n        for fname in args.inputs:\n            if not os.path.isabs(fname):\n                inputs.append(os.path.abspath(os.getcwd() + '/' + fname))\n            else:\n                inputs.append(fname)\n        args.inputs = inputs\n\n        print args.output\n\n        generator = XOSGenerator(args)\n        generator.generate()\n</code></pre>\n\n<p>And here is the test:\n    import unittest\n    from mock import patch\n    from xosgen.xosgen import XosGen</p>\n\n<pre><code>class Args:\n    pass\n\nclass XOSGeneratorTest(unittest.TestCase):\n    \"\"\"\n    Testing the CLI binding for the XOS Generative Toolchain\n    \"\"\"\n\n    def test_generator(self):\n        \"\"\"\n        [XOS-GenX] The CLI entry point should correctly parse params  \n        \"\"\"\n        args = Args()\n        args.inputs = ['../test.xproto']\n        args.target = '../test.xtarget'\n        args.output = '../out/dir'\n\n        expected_args = Args()\n        expected_args.inputs = ['/Users/teone/Sites/opencord/orchestration/xos/lib/test.xproto']\n        expected_args.target = '/Users/teone/Sites/opencord/orchestration/xos/lib/test.xtarget'\n        expected_args.output = '/Users/teone/Sites/opencord/orchestration/xos/lib/out/dir'\n\n        with patch(\"xosgen.xosgen.XOSGenerator\") as generator:\n            XosGen.init(args)\n            generator.assert_called_with(expected_args)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>What I want to test is if the passed arguments were changed correctly, but my test is failing with:</p>\n\n<pre><code>AssertionError: Expected call: XOSGenerator(&lt;test_cli.Args instance at 0x10abc29e0&gt;)\nActual call: XOSGenerator(&lt;test_cli.Args instance at 0x10abc2950&gt;)\n</code></pre>\n\n<p>What would be the correct way to test this?</p>\n"}, {"tags": ["python", "shell", "urllib"], "comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1496866531, "post_id": 44421967, "comment_id": 75842508, "body": "are you using python 3.x or 2.7 ?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 3, "creation_date": 1496866542, "post_id": 44421967, "comment_id": 75842515, "body": "afaik urllib.urlopen is python2 ... in python3 try <code>urllib.request.urlopen</code>"}], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1496866643, "post_id": 44422032, "comment_id": 75842577, "body": "Must be <code>datasource = urllib.request.urlopen(&quot;http:&#47;&#47;www.google.com&quot;)</code> (<code>urllib.request.urlopen</code> does not add <code>&quot;http:&#47;&#47;&quot;</code>)"}, {"owner": {"reputation": 17410, "user_id": 3160881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/96c8o.png?s=128&g=1", "display_name": "itzMEonTV", "link": "https://stackoverflow.com/users/3160881/itzmeontv"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1496866828, "post_id": 44422032, "comment_id": 75842667, "body": "removed that part. OP will understand that once it works :)"}], "tags": [], "owner": {"reputation": 17410, "user_id": 3160881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/96c8o.png?s=128&g=1", "display_name": "itzMEonTV", "link": "https://stackoverflow.com/users/3160881/itzmeontv"}, "is_accepted": true, "score": 1, "last_activity_date": 1496866752, "last_edit_date": 1496866752, "creation_date": 1496866579, "answer_id": 44422032, "question_id": 44421967, "link": "https://stackoverflow.com/questions/44421967/how-to-read-in-url-in-python-and-then-print-each-url-on-the-website/44422032#44422032", "title": "How to read in url in python and then print each URL on the website?", "body": "<p>Seems python3X, so you should use</p>\n\n<pre><code>urllib.request.urlopen\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 1, "last_activity_date": 1496866680, "creation_date": 1496866680, "answer_id": 44422058, "question_id": 44421967, "link": "https://stackoverflow.com/questions/44421967/how-to-read-in-url-in-python-and-then-print-each-url-on-the-website/44422058#44422058", "title": "How to read in url in python and then print each URL on the website?", "body": "<p>This is very simple example.</p>\n\n<p>This works in Python 3.2 and greater.</p>\n\n<pre><code>import urllib.request\nwith urllib.request.urlopen(\"http://www.apple.com\") as url:\n    r = url.read()\nprint(r)\n</code></pre>\n\n<p>For reference, go through this question. <a href=\"https://stackoverflow.com/questions/3969726/attributeerror-module-object-has-no-attribute-urlopen\">Urlopen attribute error</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 7245145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/njfat.png?s=128&g=1", "display_name": "Steffi Keran Rani J", "link": "https://stackoverflow.com/users/7245145/steffi-keran-rani-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1518459544, "creation_date": 1518459544, "answer_id": 48752988, "question_id": 44421967, "link": "https://stackoverflow.com/questions/44421967/how-to-read-in-url-in-python-and-then-print-each-url-on-the-website/48752988#48752988", "title": "How to read in url in python and then print each URL on the website?", "body": "<p>The <strong>AttributeError</strong> was because it should be <code>urllib.request.urlopen</code> instead of <code>urllib.urlopen</code>.</p>\n\n<p>Apart from the <code>AttributeError</code> mentioned in the question, I faced 2 more errors.</p>\n\n<ol>\n<li><p><strong>ValueError</strong>: unknown url type: 'www.google.com'</p>\n\n<p><strong>Solution</strong>: Rewrite the line defining <code>datasource</code> as follows where the <code>https</code> part is included:</p>\n\n<p><code>datasource = urllib.request.urlopen(\"https://www.google.com\")</code></p></li>\n<li><p><strong>TypeError</strong>: a bytes-like object is required, not 'str'\nin the line ' if (line.find(\"www\") > -1) :`.</p></li>\n</ol>\n\n<p><strong>The overall solution code is:</strong></p>\n\n<pre><code>import os\nimport urllib\n\ndatasource = urllib.request.urlopen(\"https://www.google.com\")\n\nwhile 1:\n        line = str(datasource.read())\n        if line == \"\": break\n        if (line.find(\"www\") &gt; -1) :\n                print (line)\n\nli = ['www.apple.com', 'www.google.com']\nos.chdir('..')\nos.chdir('..')\nos.chdir('..')\nos.chdir('Program Files (x86)\\\\LinkChecker')\n\nfor s in li:\n    os.system('Start .\\linkchecker ' + s)\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 5715663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f97faa636dfff4577766484d606a6f4b?s=128&d=identicon&r=PG&f=1", "display_name": "nenur", "link": "https://stackoverflow.com/users/5715663/nenur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 44422032, "answer_count": 3, "score": 1, "last_activity_date": 1518462318, "creation_date": 1496866312, "last_edit_date": 1518462318, "question_id": 44421967, "link": "https://stackoverflow.com/questions/44421967/how-to-read-in-url-in-python-and-then-print-each-url-on-the-website", "title": "How to read in url in python and then print each URL on the website?", "body": "<p>I am trying to figure out how to only read in each line that is a url from a website, every time I run the code I get the error: </p>\n\n<blockquote>\n  <p>AttributeError: module 'urllib' has no attribute 'urlopen'</p>\n</blockquote>\n\n<p>My code is below</p>\n\n<pre><code>import os\nimport subprocess\nimport urllib\n\ndatasource = urllib.urlopen(\"www.google.com\")\n\nwhile 1:\n        line = datasource.readline()\n        if line == \"\": break\n        if (line.find(\"www\") &gt; -1) :\n                print (line)\n\n\nli = ['www.apple.com', 'www.google.com']\nos.chdir('..')\nos.chdir('..')\nos.chdir('..')\nos.chdir('Program Files (x86)\\\\LinkChecker')\n\nfor s in li:\n    os.system('Start .\\linkchecker ' + s)\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "python", "html", "ajax"], "comments": [{"owner": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 0, "creation_date": 1496867289, "post_id": 44421953, "comment_id": 75842910, "body": "<code>data</code> is not defined at function passed to <code>.done()</code>. <code>echo</code> is not a JavaScript global function  <code>.done(function(data) { &#47;&#47; define expected parameter </code>data`    // do something    console.log(data);    x.innerHTML += &quot;&lt;p&gt;&quot; + data + &quot;&lt;/p&gt;&quot; })`"}], "owner": {"reputation": 13, "user_id": 7948356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9abea5996b402507ae07703f993b31?s=128&d=identicon&r=PG&f=1", "display_name": "victor", "link": "https://stackoverflow.com/users/7948356/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496867094, "creation_date": 1496866282, "question_id": 44421953, "link": "https://stackoverflow.com/questions/44421953/run-python-in-server-from-javascript-and-get-the-response", "title": "Run python in server from javascript and get the response", "body": "<p>I have a Raspberry that is both server and client.\nOn the one hand, I have a script in python connected to a fingerprint scanner that scans your fingerprint and responses with the name of the fingerprint owner.</p>\n\n<p>On the other hand, I have a web page where I want to call the mentioned script by clicking a button on javascript.</p>\n\n<p>So, I want to click the button with the id \"btn\" and execute the script which will scan the fingerprint in the background, and then, when it has finished, will print the name of the person who has identified himself.</p>\n\n<p>I have been reading, and I have seen that this can be done with AJAX, which send the request and get data back to the webpage.</p>\n\n<p>At the moment I have this in my javascript file linked to the button, but this is not working...</p>\n\n<pre><code>var btn = document.getElementById(\"btn\");\n\nbtn.addEventListener(\"click\", function(){\n    $.ajax({\n      type: \"POST\",\n      url: \"/home/pi/xxx.py\",\n      data: { param: text}\n    }).done(function() {\n       // do something\n       echo \"&lt;p&gt; data &lt;/p&gt;\"\n       x.innerHTML += data\n    });\n})\n</code></pre>\n\n<p>Can someone help me?\nDo I need anything in my python script?</p>\n\n<p>I would be very grateful if it were...</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 3, "creation_date": 1496866156, "post_id": 44421886, "comment_id": 75842297, "body": "What&#39;s your definition of <b>really</b> empty array?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1496866203, "post_id": 44421886, "comment_id": 75842324, "body": "An empty array has zero dimensions. An array with non-zero dimensions is not empty."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496866402, "post_id": 44421886, "comment_id": 75842443, "body": "Are you aware of the underlying basics? E.g. uninitialized C-arrays? Allocating memory and pre-setting memory are two different things. And empty just means, you are not initializing it with values (so any garbage from memory will live there until overwritten)."}, {"owner": {"reputation": 2103, "user_id": 6630397, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HbAYT.png?s=128&g=1", "display_name": "s.k", "link": "https://stackoverflow.com/users/6630397/s-k"}, "edited": false, "score": 0, "creation_date": 1496866819, "post_id": 44421886, "comment_id": 75842662, "body": "&lt;at&gt;Divakar : My definition in this case would have been an array with nothing in it, i.e. no 1st row as my example shown. &lt;at&gt;sascha : No I&#39;m not really aware of these memory underlying basics but it&#39;s alway good to have some clues; thanks."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496866884, "post_id": 44421886, "comment_id": 75842697, "body": "Well, you asked for a row and see stuff from memory (because of no init). Psidom&#39;s answer shows what you maybe did try to do."}], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 6630397, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HbAYT.png?s=128&g=1", "display_name": "s.k", "link": "https://stackoverflow.com/users/6630397/s-k"}, "edited": false, "score": 0, "creation_date": 1496867008, "post_id": 44421944, "comment_id": 75842761, "body": "What&#39;s the most annoying here is not the simplicity and efficiency of the answer but rather the fact I didn&#39;t think of it by myself (I&#39;ve tried so many more complicated stuff...) anyway; big thanks"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1614618014, "post_id": 44421944, "comment_id": 117433613, "body": "Is there a numpy function returning a shapeless (hence without initialized coefficients as there are no coeffficient if the shape is not specified) array ? (Like a default constructor doing really nothing.)"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 7, "last_activity_date": 1496866239, "creation_date": 1496866239, "answer_id": 44421944, "question_id": 44421886, "link": "https://stackoverflow.com/questions/44421886/initialized-empty-numpy-array-is-not-really-empty-contains-zeros/44421944#44421944", "title": "Initialized empty numpy array is not really empty (contains zeros)", "body": "<p>You need the shape to be <code>(0, 3)</code> so you have the correct number of columns to stack but have actually no data inside:</p>\n\n<pre><code>import numpy as np\npointsarrray = np.empty((0,3))\n\npointsarrray\n# array([], shape=(0, 3), dtype=float64)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 2, "last_activity_date": 1496867108, "last_edit_date": 1496867108, "creation_date": 1496866800, "answer_id": 44422079, "question_id": 44421886, "link": "https://stackoverflow.com/questions/44421886/initialized-empty-numpy-array-is-not-really-empty-contains-zeros/44422079#44422079", "title": "Initialized empty numpy array is not really empty (contains zeros)", "body": "<p>Maybe it's the name that is confusing you but <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.empty.html\" rel=\"nofollow noreferrer\"><code>numpy.empty</code>s documentation</a> explains what is happening:</p>\n\n<blockquote>\n  <p>Return a new array of given shape and type, without initializing entries.</p>\n</blockquote>\n\n<p>So it just doesn't initialize the entries (sometimes they are <strong>random</strong> sometimes they are <strong>zero</strong>) but empty refers only to the value of the entries not to the shape of the array.</p>\n\n<hr>\n\n<p>However it's really bad for performance to create an array by appending or stacking. Just collect them in a list and create the array afterwards:</p>\n\n<pre><code>pointsarray = [np.array(myPoint)]\n\n# ...\n\npointsarray = np.array(pointsarray)  # or np.stack(pointsarray, axis=...) whatever you need.\n</code></pre>\n"}], "owner": {"reputation": 2103, "user_id": 6630397, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HbAYT.png?s=128&g=1", "display_name": "s.k", "link": "https://stackoverflow.com/users/6630397/s-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4205, "favorite_count": 3, "accepted_answer_id": 44421944, "answer_count": 2, "score": 0, "last_activity_date": 1496867108, "creation_date": 1496866077, "last_edit_date": 1496867107, "question_id": 44421886, "link": "https://stackoverflow.com/questions/44421886/initialized-empty-numpy-array-is-not-really-empty-contains-zeros", "title": "Initialized empty numpy array is not really empty (contains zeros)", "body": "<p>In order to store many 3D points coordinates tuples in a numpy.ndarray I initialize an empty numpy array before entering a loop for each of some features.</p>\n\n<p>To do so, I currently do this before entering the loop:    </p>\n\n<pre><code>import numpy as np\npointsarrray = np.empty((1,3))\n</code></pre>\n\n<p>but this results in an array which is all but empty:</p>\n\n<pre><code>array([[  5.30498948e-315,   0.00000000e+000,   7.81250000e-003]])\n</code></pre>\n\n<p>When filling <code>pointsarray</code> in my loop after, I do this:  </p>\n\n<pre><code>pointsarray = np.vstack((pointsarray, [np.array(myPoint)]))\n</code></pre>\n\n<p>(it also works with np.append)</p>\n\n<p>and I finally need to delete the <strong>first</strong> line of the array after exiting the loop because this first line always contains the values from the initialization step!</p>\n\n<p>It's not a big deal but I wonder if there is a cleaner way to achieve a <strong>really</strong> empty array, I mean; with nothing inside it (it shows 1 row yet, I can not figure out why) but at the right dimensions?</p>\n"}, {"tags": ["python", "python-2.7", "python-2.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496866159, "post_id": 44421870, "comment_id": 75842300, "body": "Python 2 rounds more aggressively when <code>print</code>ing floats."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1496866219, "post_id": 44421870, "comment_id": 75842330, "body": "<code>minroot</code> is <code>7.000000000000001</code> not <code>7.0</code> use <code>print repr(minroot)</code> to see the a better represented value"}, {"owner": {"reputation": 175, "user_id": 7050787, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b99b2cf2ce9222df132515244bca4ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7050787/alex"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1496866267, "post_id": 44421870, "comment_id": 75842350, "body": "@MooingRawr wow that&#39;s correct... why the hell does it do that? the answer should be 7 even"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1496866283, "post_id": 44421870, "comment_id": 75842358, "body": "@MooingRawr: Strictly speaking, not the exact value, but enough digits to distinguish the value from any other float."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496866333, "post_id": 44421870, "comment_id": 75842393, "body": "@Alex: <code>minroot</code> is not an integer. In real-number arithmetic, it would be an integer, but true real-number arithmetic is unimplementable. This is floating-point, an approximation."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496866369, "post_id": 44421870, "comment_id": 75842421, "body": "@user2357112 extract was a poor choice of word on my part."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1496866399, "post_id": 44421870, "comment_id": 75842439, "body": "<a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a> more read here"}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496866441, "post_id": 44421870, "comment_id": 75842461, "body": "what is the resulting type of an int divided by a float? <a href=\"https://stackoverflow.com/questions/2958684/python-division\">stackoverflow.com/questions/2958684/python-division</a>"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 7050787, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b99b2cf2ce9222df132515244bca4ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7050787/alex"}, "edited": false, "score": 0, "creation_date": 1496866550, "post_id": 44421989, "comment_id": 75842523, "body": "I see. How do you deal with this in practice? I&#39;d like to check if minroot is an integer in an <code>IF</code> statement I have"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1496866598, "post_id": 44421989, "comment_id": 75842552, "body": "<code>is_integer</code> is not a type check; it&#39;s a value check."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 175, "user_id": 7050787, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b99b2cf2ce9222df132515244bca4ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7050787/alex"}, "edited": false, "score": 1, "creation_date": 1496866852, "post_id": 44421989, "comment_id": 75842682, "body": "@Alex: If properties like that are important to you, floating-point arithmetic is not suitable for your use case. Formulate your program in terms of types that provide exact operations, like ints, and consider getting a computer algebra system, like SymPy."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496867830, "post_id": 44421989, "comment_id": 75843189, "body": "@user2357112; thanks for proofreading my brain.  I&#39;m fixing the answer."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1496867859, "last_edit_date": 1496867859, "creation_date": 1496866423, "answer_id": 44421989, "question_id": 44421870, "link": "https://stackoverflow.com/questions/44421870/is-integer-returning-incorrect-result-python-2-x/44421989#44421989", "title": "Is_Integer returning incorrect result - Python 2.X", "body": "<p>SNote that <code>minroot</code> is not <em>precisely</em> 7.0, due to floating-point imprecision.  <code>is_integer</code> requires that precision.  Here's your code, with a little more detail.</p>\n\n<pre><code>dig = 16807\ndigcount = len(str(dig))\nminroot = dig ** (1 / float(digcount))\n\nprint repr(minroot)\nprint minroot.is_integer()\na = 7.0\nprint a, type(a)\nprint a.is_integer()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>7.0000000000000009\nFalse\n7.0 &lt;type 'float'&gt;\nTrue\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE: HOW TO HANDLE \"VERY CLOSE\"</strong></p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/558216/function-to-determine-if-two-numbers-are-nearly-equal-when-rounded-to-n-signific\">here</a> for code to handle <em>almost</em> equal.  The general approach is to set a tolerance and use something such as:</p>\n\n<pre><code>if abs(a-b) &lt;= tolerance:\n</code></pre>\n\n<p>Or, \"is the difference too small to matter?\"</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 4449191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb052c9cca1088466ccea0303b34d7a?s=128&d=identicon&r=PG", "display_name": "jared", "link": "https://stackoverflow.com/users/4449191/jared"}, "is_accepted": false, "score": 0, "last_activity_date": 1496866483, "creation_date": 1496866483, "answer_id": 44422007, "question_id": 44421870, "link": "https://stackoverflow.com/questions/44421870/is-integer-returning-incorrect-result-python-2-x/44422007#44422007", "title": "Is_Integer returning incorrect result - Python 2.X", "body": "<p>From the docs \"Return True if the float instance is finite with integral value, and False otherwise\". Only zeroes in decimal places makes it return true as an integer.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496872434, "post_id": 44422493, "comment_id": 75845161, "body": "That only happened to work out nicely because 1/5 is exactly representable in decimal. For something like 729^(1/6), it fails again. You can&#39;t get exact results out of inexact arithmetic just by throwing more precision at the problem or changing the base."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496916601, "post_id": 44422493, "comment_id": 75862936, "body": "You are right.  <code>729**(1&#47;6)</code> calculated with binary floating point happens to be equal to int 3, while calculated with decimal floating point, it is not."}], "tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1496868497, "creation_date": 1496868497, "answer_id": 44422493, "question_id": 44421870, "link": "https://stackoverflow.com/questions/44421870/is-integer-returning-incorrect-result-python-2-x/44422493#44422493", "title": "Is_Integer returning incorrect result - Python 2.X", "body": "<p>If you want more exact decimal arithmetic, use the decimal module. Decimals do not have an <code>is_integer method</code>, but you can compare to the int value.</p>\n\n<pre><code>&gt;&gt;&gt; from decimal import Decimal as D\n&gt;&gt;&gt; 7**5\n16807\n&gt;&gt;&gt; from decimal import Decimal as D\n&gt;&gt;&gt; n = D(16807)**(D(1)/D(5))\n&gt;&gt;&gt; n\nDecimal('7.000000000000000000000000000')\n&gt;&gt;&gt; int(n)\n7\n&gt;&gt;&gt; n == int(n)\nTrue\n</code></pre>\n\n<p>To show that the test does what you want:</p>\n\n<pre><code>&gt;&gt;&gt; m = D('7.000000000000000000000000001')\n&gt;&gt;&gt; m == int(m)\nFalse\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 7050787, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b99b2cf2ce9222df132515244bca4ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7050787/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 44421989, "answer_count": 3, "score": 0, "last_activity_date": 1496868972, "creation_date": 1496866024, "last_edit_date": 1496868972, "question_id": 44421870, "link": "https://stackoverflow.com/questions/44421870/is-integer-returning-incorrect-result-python-2-x", "title": "Is_Integer returning incorrect result - Python 2.X", "body": "<pre><code>dig = 16807\ndigcount = len(str(dig))\nminroot = dig ** (1 / float(digcount))\n\nprint minroot\nprint minroot.is_integer()\n</code></pre>\n\n<p><code>minroot</code> returns as 7.0 as a float, but <code>is_integer</code> returns <code>FALSE</code>.</p>\n\n<p>I tried <code>(7.0).is_integer()</code>, and it returns <code>TRUE</code>. What gives?</p>\n"}, {"tags": ["python", "loops", "logic"], "comments": [{"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 1, "creation_date": 1496865975, "post_id": 44421824, "comment_id": 75842214, "body": "Your have an extra underscore here<code>input__no</code>, and you are comparing strings to numbers."}], "answers": [{"tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": false, "score": 2, "last_activity_date": 1496865938, "creation_date": 1496865938, "answer_id": 44421849, "question_id": 44421824, "link": "https://stackoverflow.com/questions/44421824/why-is-code-get-stuck-in-a-loop/44421849#44421849", "title": "why is code get stuck in a loop?", "body": "<p>You forgot to convert the input into an <code>int</code> inside the loop, and there's an extra <code>_</code> in one of the variables. Change to this in the two offending lines:</p>\n\n<pre><code>input_no = int(raw_input(\"Enter a number again\"))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8127824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c7d2a81108f860350a0f72f97a3127?s=128&d=identicon&r=PG&f=1", "display_name": "JAPSIMRAN", "link": "https://stackoverflow.com/users/8127824/japsimran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1496910320, "answer_count": 1, "score": -2, "last_activity_date": 1496865938, "creation_date": 1496865843, "last_edit_date": 1496865893, "question_id": 44421824, "link": "https://stackoverflow.com/questions/44421824/why-is-code-get-stuck-in-a-loop", "closed_reason": "Not suitable for this site", "title": "why is code get stuck in a loop?", "body": "<pre><code>import random\n\ni = random.uniform(10,100)  # created a random number\n\nnumber = int(i)\n\nprint number\n\nprint \"Enter your number user(1-100):\"\n\ninput__no = raw_input(\"-&gt;\")\n\ninput_no = int(input__no)\n\nwhile(input_no != number):\n\n    if(input_no&gt;number):\n        print \"Number entered is greater than generated number.\"\n        print \"input -&gt;\" , input_no , \"\\toutput-&gt;\" , number\n        input__no = raw_input(\"Enter a number again\")\n\n    else:\n        print \"Number entered is smaller than generated number.\"\n        input_no = raw_input(\"Enter a number again\")\n\nprint \"Awesome this is correct guess\"\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 266, "user_id": 5166967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207506050840516/picture?type=large", "display_name": "Javier Campos", "link": "https://stackoverflow.com/users/5166967/javier-campos"}, "is_accepted": false, "score": 1, "last_activity_date": 1496866102, "creation_date": 1496866102, "answer_id": 44421900, "question_id": 44421774, "link": "https://stackoverflow.com/questions/44421774/unable-to-parse-required-data-from-nested-arrays-in-json-using-python/44421900#44421900", "title": "Unable to parse required data from nested arrays in json using python", "body": "<p>Write before the print(j)</p>\n\n<pre><code>import pdb; pdb.set_trace()\n</code></pre>\n\n<p>Run your script and then the console will wait for commands, there you can write commands, start playing with your json, remember that a Json are tuples with dictionaries, that can have more tupels or more dictionaries inside, so you will end with something like </p>\n\n<p>print (j[1]['EmailAddress'])</p>\n"}, {"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": true, "score": 1, "last_activity_date": 1496876917, "creation_date": 1496876917, "answer_id": 44424150, "question_id": 44421774, "link": "https://stackoverflow.com/questions/44421774/unable-to-parse-required-data-from-nested-arrays-in-json-using-python/44424150#44424150", "title": "Unable to parse required data from nested arrays in json using python", "body": "<p>Finally found the solution:</p>\n\n<pre><code>import requests\nfrom urllib.parse import urlencode\nurl = 'https://oresapp.asicanada.net/ores.imis.services/api/member/?'\naddress = '&amp;callback=angular.callbacks._0&amp;city=&amp;companyName=&amp;personName='\nxhr = url + urlencode({'address':address})\nj = requests.get(xhr).json()\nfor item in j:\n    print(item['Members'][0]['FirstLastName'],item['Members'][0]['Email'], item['Members'][0]['Phone'])\n</code></pre>\n"}], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 44424150, "answer_count": 2, "score": 0, "last_activity_date": 1518624376, "creation_date": 1496865630, "last_edit_date": 1518624376, "question_id": 44421774, "link": "https://stackoverflow.com/questions/44421774/unable-to-parse-required-data-from-nested-arrays-in-json-using-python", "title": "Unable to parse required data from nested arrays in json using python", "body": "<p>When I tried with my script, I do get response but can't parse the Name and Email from this response as I never worked with json arrays. Hope there is somebody to give me an idea. I tried with:</p>\n\n<pre><code>import requests\nfrom urllib.parse import urlencode\nurl = 'https://oresapp.asicanada.net/ores.imis.services/api/member/?'\naddress = '&amp;callback=angular.callbacks._0&amp;city=&amp;companyName=&amp;personName='\nxhr = url + urlencode({'address':address})\nj = requests.get(xhr).json()\nprint(j)\n</code></pre>\n\n<p>And the partial response is like:</p>\n\n<pre><code>[{'EmailAddress': '', 'Zip': '', 'Members': [{'Fax': '', 'FirstLastName': 'Ryley Reat', 'Id': 46648, 'FirstName': 'Ryley', 'FullName': 'Ryley Reat', 'Email': 'zolo@zolo.ca', 'LastName': 'Reat', 'LocationId': 46647, 'Phone': '', 'WebSite': ''}], 'ProvinceCode': '', 'CityRanking': 1.0, 'WorkPhone': '', 'Website': '', 'GeoCodeAddress': 'CANADA', 'GeoCode': {'latitude': 56.130366, 'longitude': -106.346771}, 'City': '', 'FullAddress': 'CANADA', 'Id': 46647, 'Fax': '', 'CompanyNameRanking': 1.0, 'Company': 'Zolo Realty Inc.', 'Country': 'Canada', 'BrokerName': ' '}, {'EmailAddress': '', 'Zip': 'T3H 4W2', 'Members': [{'Fax': '', 'FirstLastName': 'David SandBrand', 'Id': 46646, 'FirstName': 'David', 'FullName': 'David SandBrand', 'Email': 'david@sandbrand.com', 'LastName': 'SandBrand', 'LocationId': 46645, 'Phone': '', 'WebSite': ''}], 'ProvinceCode': 'AB', 'CityRanking': 1.0, 'WorkPhone': '', 'Website': '', 'GeoCodeAddress': '146 West Springs Pl SW Calgary, AB  T3H 4W2 CANADA', 'GeoCode': {'latitude': 51.0626195, 'longitude': -114.1907432}, 'City': 'Calgary', 'FullAddress': '146 West Springs Pl SW Calgary, AB  T3H 4W2 CANADA', 'Id': 46645, 'Fax': '', 'CompanyNameRanking': 1.0, 'Company': 'Damecca Holdings Ltd', 'Country': 'Canada', 'BrokerName': ' '}, {'EmailAddress': 'c.reception@century21.ca', 'Zip': 'S9V 0N7', 'Members': [{'Fax': '', 'FirstLastName': 'Alex Palmer', 'Id': 45347, 'FirstName': 'Alex', 'FullName': 'Alex Palmer', 'Email': 'alex.palmer@century21.ca', 'LastName': 'Palmer', 'LocationId': 37526, 'Phone': '(306) 821-0138', 'WebSite': ''}, {'Fax': '', 'FirstLastName': 'Becky Hofer', 'Id': 45379, 'FirstName': 'Becky', 'FullName': 'Becky Hofer', 'Email': 'becky.hofer@century21.ca', 'LastName': 'Hofer', 'LocationId': 37526, 'Phone': '(306) 830-9740', 'WebSite': ''}, {'Fax': '', 'FirstLastName': 'Cheryl Fairweather', 'Id': 45346, 'FirstName': 'Cheryl', 'FullName': 'Cheryl Fairweather', 'Email': 'cheryl.fariweather@century21.ca', 'LastName': 'Fairweather', 'LocationId': 37526, 'Phone': '(780) 808-9406', 'WebSite': ''}, {'Fax': '', 'FirstLastName': 'Chris Hassall', 'Id': 45334, 'FirstName': 'Chris', 'FullName': 'Chris Hassall', 'Email': 'chris.hassall@century21.ca', 'LastName': 'Hassall', 'LocationId': 37526, 'Phone': '(780) 871-3838', 'WebSite': ''}\n</code></pre>\n"}, {"tags": ["python", "tkinter", "global-variables", "openpyxl"], "comments": [{"owner": {"reputation": 485, "user_id": 8066530, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MiLNd.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/8066530/bill"}, "edited": false, "score": 0, "creation_date": 1496954293, "post_id": 44421773, "comment_id": 75887863, "body": "Can anyone please help me?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1497088781, "post_id": 44421773, "comment_id": 75939500, "body": "Please create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You&#39;ve posted a lot of code that doesn&#39;t appear to be part of the problem. Also, why are you calling <code>quit</code> and the later trying to create more widgets? It his highly unusual to have more GUI code after the call to <code>mainloop</code>."}, {"owner": {"reputation": 485, "user_id": 8066530, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MiLNd.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/8066530/bill"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1497121231, "post_id": 44421773, "comment_id": 75949271, "body": "@BryanOakley I have clarified my answer can anyone please help I have a deadline for the 15th of June please someone!!"}, {"owner": {"reputation": 1453, "user_id": 2133240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iz1JT.jpg?s=128&g=1", "display_name": "dsgdfg", "link": "https://stackoverflow.com/users/2133240/dsgdfg"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1497140259, "post_id": 44421773, "comment_id": 75953438, "body": "Ask_filename some time throw error(cos using os model encoding). Creating a file for reopen use &quot;sys.path.append(os.getcwd())&quot;. @BryanOakley is right need full traceback !"}], "answers": [{"comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 485, "user_id": 8066530, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MiLNd.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/8066530/bill"}, "edited": false, "score": 0, "creation_date": 1497203928, "post_id": 44477668, "comment_id": 75967984, "body": "If this answer was helpful consider applying the bounty to this answer :D"}], "tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": true, "score": 1, "last_activity_date": 1497127365, "last_edit_date": 1497127365, "creation_date": 1497125855, "answer_id": 44477668, "question_id": 44421773, "link": "https://stackoverflow.com/questions/44421773/tkinter-and-openpyxl-error-no-such-file-or-directory/44477668#44477668", "title": "Tkinter and openpyxl error no such file or directory &#39;&#39;", "body": "<p>From what I can see of your code the problem is because you have not actually add the file names to the variables you are trying to use.</p>\n\n<p>So when your program gets to the lines where <code>workbook1</code>, <code>workbook2</code>, <code>worksheet1</code>, and <code>worksheet2</code> are the program is trying to run the command <code>openpyxl.load_workbook(str(wb1))</code> before the variables <code>wb1</code>, <code>wb2</code>, <code>wb1</code>, <code>sheet1</code>, and <code>sheet2</code> have been created. You need to have the functions that ask for the file name to assign to the variables to be called before you create the following:</p>\n\n<pre><code>workbook1 = openpyxl.load_workbook(str(wb1))\nworkbook2 = openpyxl.load_workbook(str(wb2))\n\nworksheet1 = workbook1.get_sheet_by_name(str(sheet1))\nworksheet2 = workbook2.get_sheet_by_name(str(sheet2))\n</code></pre>\n\n<p>Here is an example of what you might want to do in order to accomplish this.</p>\n\n<p>This is not the best way or even a good way but it will work for your needs in a hurry and give an example of what is needed for your workbooks and worksheets to be dealt with properly.</p>\n\n<pre><code>def ask_for_filename_1():\n    global wb1\n    wb1 = askopenfilename(title=\"Select Workbook 1\")\n    print(str(wb1))\n    return wb1\n\nask_for_filename_1() # add this line\n\ndef ask_for_filename_2():\n    global wb2\n    wb2 = askopenfilename(title=\"Select Workbook 1\")\n    print(str(wb2))\n    return wb2\n\nask_for_filename_2() # add this line\n</code></pre>\n\n<p>you will need to do this for ever function that applies a file name to a variable before you work with said variables.</p>\n\n<p>Keep in mind the example I gave is just to illustrate what needs to happen before you do anything with the variables <code>workbook1</code>, <code>workbook2</code>, <code>worksheet1</code>, and <code>worksheet2</code>. You may want to review and change your code so this is not a problem in the future.</p>\n\n<p>Maybe add this section:</p>\n\n<pre><code>workbook1 = openpyxl.load_workbook(str(wb1))\nworkbook2 = openpyxl.load_workbook(str(wb2))\n\nworksheet1 = workbook1.get_sheet_by_name(str(sheet1))\nworksheet2 = workbook2.get_sheet_by_name(str(sheet2))\n</code></pre>\n\n<p>to a function that is called after each <code>wb1</code>, <code>wb2</code>, <code>wb1</code>, <code>sheet1</code>, and <code>sheet2</code> have been created.</p>\n"}], "owner": {"reputation": 485, "user_id": 8066530, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MiLNd.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/8066530/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 44477668, "answer_count": 1, "score": 3, "last_activity_date": 1497127365, "creation_date": 1496865627, "last_edit_date": 1497116451, "question_id": 44421773, "link": "https://stackoverflow.com/questions/44421773/tkinter-and-openpyxl-error-no-such-file-or-directory", "title": "Tkinter and openpyxl error no such file or directory &#39;&#39;", "body": "<p>I have a program that uses tkinter and openpyxl to make an excel comparing program. Here is my code:</p>\n\n<pre><code>import openpyxl, csv\nfrom tkinter import *\nfrom tkinter.filedialog import askopenfilename\nfrom openpyxl.utils import get_column_letter, column_index_from_string\n\noutput = open('differences.csv', 'w', newline='')\noutput_writer = csv.writer(output)\n\nwb1, wb2 = '', ''\nsheet1, sheet2 = '', ''\ncolumn_1, column_2 = '', ''\n\nroot = Tk()\nroot.configure(background='light green')\nroot.geometry(\"500x500\")\nroot.wm_title(\"BananaCell\")\n\ne1 = Text(root, width=15, height=1)\ne1.pack()\ne1.place(x=70, y=150)\n\ne2 = Text(root, width=15, height=1)\ne2.pack()\ne2.place(x=300, y=150)\n\ncolumn1_entry = Text(root, width=5, height=1)\ncolumn1_entry.pack()\ncolumn1_entry.place(x=135, y=250)\n\ncolumn2_entry = Text(root, width=5, height=1)\ncolumn2_entry.pack()\ncolumn2_entry.place(x=385, y=250)\n\n\ndef destroy():\n    root.destroy()\n\n\ndef ask_for_filename_1():\n    global wb1\n    wb1 = askopenfilename(title=\"Select Workbook 1\")\n    print(str(wb1))\n    return wb1\n\n\ndef ask_for_filename_2():\n    global wb2\n    wb2 = askopenfilename(title=\"Select Workbook 1\")\n    print(str(wb2))\n    return wb2\n\n\ndef ask_for_sheet1():\n    global sheet1\n    sheet1 = e1.get(\"1.0\", \"end-1c\")\n    print(sheet1)\n    return sheet1\n\n\ndef ask_for_sheet2():\n    global sheet2\n    sheet2 = e2.get(\"1.0\", \"end-1c\")\n    print(sheet2)\n    return sheet2\n\n\ndef get_col_1():\n    global column_1\n    c1 = column1_entry.get(\"1.0\", \"end-1c\")\n    print(c1)\n\n\ndef get_col_2():\n    global column_2\n    c2 = column2_entry.get(\"1.0\", \"end-1c\")\n    print(c2)\n\nfilename_button1 = Button(root, text=\"Workbook 1\", width=12, height=2, command=ask_for_filename_1)\nfilename_button1.pack()\nfilename_button1.place(x=100, y=100)\n\nfilename_button2 = Button(root, text=\"Workbook 2\", width=12, height=2, \n command=ask_for_filename_2)\nfilename_button2.pack()\nfilename_button2.place(x=300, y=100)\n\ncol_button1 = Button(root, text=\"Enter\", width=5, height=1, command=get_col_1)\ncol_button1.pack()\ncol_button1.place(x=185, y=248)\n\ncol_button2 = Button(root, text=\"Enter\", width=5, height=1, command=get_col_2)\ncol_button2.pack()\ncol_button2.place(x=435, y=248)\n\ncol1 = column_1\ncol2 = column_2\n\nsheet_button1 = Button(root, text=\"Enter\", width=6, height=0, \ncommand=ask_for_sheet1)\nsheet_button1.pack()\nsheet_button1.place(x=15, y=147)\n\nsheet_button2 = Button(root, text=\"Enter\", width=6, height=0, command=ask_for_sheet2)\nsheet_button2.pack()\nsheet_button2.place(x=430, y=147)\n\nlabel1 = Label(root, text=\"Sheet 1 column letter: \", bg=\"light green\")\nlabel1.pack()\nlabel1.place(x=10, y=250)\n\n label2 = Label(root, text=\"Sheet 2 column letter: \", bg = \"light green\")\nlabel2.pack()\nlabel2.place(x=260, y=250)\n\n\nworkbook1 = openpyxl.load_workbook(str(wb1))\nworkbook2 = openpyxl.load_workbook(str(wb2))\n\nworksheet1 = workbook1.get_sheet_by_name(str(sheet1))\nworksheet2 = workbook2.get_sheet_by_name(str(sheet2))\n\ncol1 = column_1\ncol2 = column_2\n\n\ndef show():\n    scrollbar = Scrollbar(root)\n    scrollbar.pack(side=RIGHT, fill=Y)\n    textbox = Text(root, wrap=WORD, yscrollcommand=scrollbar.set)\n    textbox.pack()\n    textbox.place(x=300, y=200)\n    for (col, col_1) in zip(worksheet1.iter_cols(min_col = column_index_from_string(col1), max_col=column_index_from_string(col1)), worksheet2.iter_cols(min_col = column_index_from_string(col2), max_col=column_index_from_string(col2))):\n        for (cell, cell_1) in zip(col, col_1):\n           if cell.value != cell_1.value and cell.row == cell_1.row:\n               textbox.insert(INSERT, 'Row ' + str(cell.row) + ' ' + \nstr(cell.value) + ' is not equal to ' + str(cell_1.value) + ' ' + 'Row ' + str(cell_1.row) + '\\n')\n\n\ndef write_csv():\n    for (col, col_1) in zip(worksheet1.iter_cols(min_col = column_index_from_string(col1), max_col=column_index_from_string(col1)), worksheet2.iter_cols(min_col = column_index_from_string(col2), max_col=column_index_from_string(col2))):\n        for (cell, cell_1) in zip(col, col_1):\n           if cell.value != cell_1.value and cell.row == cell_1.row:\n               output_writer.writerow(['Sheet 1 value: ' + ' ' + str(cell.value) + '  ' + 'is not equal to ' + '  ' + 'Sheet 2 value:  ' + ' ' + str(cell_1.value) + ' ' + 'on row ' + ' ' + str(cell.row)])\n\nshow_button = Button(root, text=\"Show\", width=8, height=1, command=show)\nshow_button.pack()\nshow_button.place(x=1, y=20)\n\nbutton_export = Button(root, text=\"Export to CSV\", width=10, height=1, command=write_csv)\nbutton_export.pack()\nbutton_export.place(x=450, y=60)\n\ndButton = Button(root, text=\"Done\", width=8, height=1, command=destroy)\ndButton.pack()\ndButton.place(x=100, y=60)\n\nmainloop()\n</code></pre>\n\n<p>The program crashes and gives me the following error: <code>No such file or directory ''</code> and I am not sure it will fully run as planned. Can anyone rewrite my code to make it smoothly compile? Anything is great</p>\n"}, {"tags": ["python", "python-3.x", "amazon-web-services", "flask", "amazon-elastic-beanstalk"], "answers": [{"comments": [{"owner": {"reputation": 246, "user_id": 5751264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67b055ba187ae6cdf0bac1ef1d1756c?s=128&d=identicon&r=PG&f=1", "display_name": "Stf_F", "link": "https://stackoverflow.com/users/5751264/stf-f"}, "edited": false, "score": 0, "creation_date": 1497013716, "post_id": 44455697, "comment_id": 75913516, "body": "Hi @Igor T., thanks.  I have just tried and the deployment is still failing, I have the same error."}], "tags": [], "owner": {"reputation": 2464, "user_id": 1035438, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d802ced0d7c4ac1f7a3d4958a90eb724?s=128&d=identicon&r=PG", "display_name": "Igor T.", "link": "https://stackoverflow.com/users/1035438/igor-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1497004856, "creation_date": 1497004856, "answer_id": 44455697, "question_id": 44421761, "link": "https://stackoverflow.com/questions/44421761/flask-beanstalk-deployment-errors/44455697#44455697", "title": "Flask Beanstalk deployment errors", "body": "<p>Try removing the following line from your requirements.txt</p>\n\n<pre><code>uuid==1.30\n</code></pre>\n\n<p><code>uuid</code> is bundled with Python as of version 2.5 or so.</p>\n"}], "owner": {"reputation": 246, "user_id": 5751264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67b055ba187ae6cdf0bac1ef1d1756c?s=128&d=identicon&r=PG&f=1", "display_name": "Stf_F", "link": "https://stackoverflow.com/users/5751264/stf-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550572503, "creation_date": 1496865580, "question_id": 44421761, "link": "https://stackoverflow.com/questions/44421761/flask-beanstalk-deployment-errors", "title": "Flask Beanstalk deployment errors", "body": "<p>I am relatively new to Python and I am trying to deploy a Flask app to AWS Beanstalk. I have followed the official tutorial and went through a lot of the resources available online (here or elsewhere) regarding deployment issues with Flask / Django on Beanstalk. No success, I keep getting errors I cannot fix.\nBelow the structure of my app:</p>\n\n<pre><code>|-application.py\n|-config.py\n|-const.py\n|-requirements.txt\n|-app/\n|--__init.py__\n|--views.py\n|--models.py\n|--static/\n|--templates/\n</code></pre>\n\n<p>My application.py</p>\n\n<pre><code>from app.views import application\n\napplication.run(debug=False)\n</code></pre>\n\n<p>The first few lines of my views.py file that contains the declaration of the Flask app:</p>\n\n<pre><code>from flask import Flask, render_template, redirect, url_for, session, request, abort\nfrom flask_bootstrap import Bootstrap\nfrom . models import Datalayer, Config, Signin\nfrom . util import check_user\nfrom flask_basicauth import BasicAuth\nfrom flask_bcrypt import Bcrypt\nfrom faker import Faker\nfrom htmlmin.minify import html_minify\nfake = Faker()\n\n\napplication = app = Flask(__name__)\napp.config.from_object('config')\n\nbootstrap = Bootstrap(app)\nbasic_auth = BasicAuth(app)\nbcrypt = Bcrypt(app)\n</code></pre>\n\n<p>And finally the content of the <code>/var/log/eb-activity.log</code></p>\n\n<pre><code> SyntaxError: invalid syntax\n      2017-06-07 19:08:18,171 ERROR    Error installing dependencies: Command '/opt/python/run/venv/bin/pip install -r /opt/python/ondeck/app/requirements.txt' returned non-zero exit status 1\n      Traceback (most recent call last):\n        File \"/opt/elasticbeanstalk/hooks/appdeploy/pre/03deploy.py\", line 22, in main\n          install_dependencies()\n        File \"/opt/elasticbeanstalk/hooks/appdeploy/pre/03deploy.py\", line 18, in install_dependencies\n          check_call('%s install -r %s' % (os.path.join(APP_VIRTUAL_ENV, 'bin', 'pip'), requirements_file), shell=True)\n        File \"/usr/lib64/python2.7/subprocess.py\", line 541, in check_call\n          raise CalledProcessError(retcode, cmd)\n      CalledProcessError: Command '/opt/python/run/venv/bin/pip install -r /opt/python/ondeck/app/requirements.txt' returned non-zero exit status 1 (ElasticBeanstalk::ExternalInvocationError)\n    caused by: Traceback (most recent call last):\n        File \"/opt/python/run/venv/bin/pip\", line 7, in &lt;module&gt;\n          from pip import main\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/__init__.py\", line 15, in &lt;module&gt;\n          from pip.vcs import git, mercurial, subversion, bazaar  # noqa\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/vcs/mercurial.py\", line 10, in &lt;module&gt;\n          from pip.download import path_to_url\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/download.py\", line 38, in &lt;module&gt;\n          from pip._vendor import requests, six\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/__init__.py\", line 53, in &lt;module&gt;\n          from .packages.urllib3.contrib import pyopenssl\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/packages/__init__.py\", line 3, in &lt;module&gt;\n          from . import urllib3\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/packages/urllib3/__init__.py\", line 10, in &lt;module&gt;\n          from .connectionpool import (\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/packages/urllib3/connectionpool.py\", line 37, in &lt;module&gt;\n          from .request import RequestMethods\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/packages/urllib3/request.py\", line 6, in &lt;module&gt;\n          from .filepost import encode_multipart_formdata\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/pip/_vendor/requests/packages/urllib3/filepost.py\", line 3, in &lt;module&gt;\n          from uuid import uuid4\n        File \"/opt/python/run/venv/local/lib/python3.4/site-packages/uuid.py\", line 138\n          if not 0 &lt;= time_low &lt; 1&lt;&lt;32L:\n                                      ^\n      SyntaxError: invalid syntax\n      2017-06-07 19:08:18,171 ERROR    Error installing dependencies: Command '/opt/python/run/venv/bin/pip install -r /opt/python/ondeck/app/requirements.txt' returned non-zero exit status 1\n      Traceback (most recent call last):\n        File \"/opt/elasticbeanstalk/hooks/appdeploy/pre/03deploy.py\", line 22, in main\n          install_dependencies()\n        File \"/opt/elasticbeanstalk/hooks/appdeploy/pre/03deploy.py\", line 18, in install_dependencies\n          check_call('%s install -r %s' % (os.path.join(APP_VIRTUAL_ENV, 'bin', 'pip'), requirements_file), shell=True)\n        File \"/usr/lib64/python2.7/subprocess.py\", line 541, in check_call\n          raise CalledProcessError(retcode, cmd)\n      CalledProcessError: Command '/opt/python/run/venv/bin/pip install -r /opt/python/ondeck/app/requirements.txt' returned non-zero exit status 1 (Executor::NonZeroExitStatus)\n</code></pre>\n\n<p>And my requirements.txt:</p>\n\n<pre><code>appdirs==1.4.3\nbcrypt==3.1.3\nbeautifulsoup4==4.6.0\ncffi==1.10.0\nclick==6.7\ndjango-htmlmin==0.10.0\ndominate==2.3.1\nFaker==0.7.12\nFlask==0.12.2\nFlask-BasicAuth==0.2.0\nFlask-Bcrypt==0.7.1\nFlask-Bootstrap==3.3.7.1\nFlask-WTF==0.14.2\nhtml5lib==0.999999999\nitsdangerous==0.24\nJinja2==2.9.6\nMarkupSafe==1.0\npackaging==16.8\npycparser==2.17\npyparsing==2.2.0\npython-dateutil==2.6.0\nPyYAML==3.12\nrequests==2.14.2\nsix==1.10.0\nua-parser==0.7.3\nuser-agents==1.1.0\nuuid==1.30\nvisitor==0.1.3\nwebencodings==0.5.1\nWerkzeug==0.12.2\nWTForms==2.1\n</code></pre>\n\n<p>I have no beanstalk config file (yet) but I have performed a manual install of: <code>yum install libffi-devel</code> </p>\n\n<p>My first question is how do we determine when we need to add <code>-devel</code> packages to our deployment? (I fixed a first deployment issue with the installation of the devel package above.) \nI assumed all the necessary packages / libraries would be installed with the requirements.txt?</p>\n\n<p>My second question is do you have any clue as to why this deployment is failing? (will hopefully be linked to the first question?)</p>\n\n<p>Thanks in advance for the help,</p>\n\n<p>Stf</p>\n"}, {"tags": ["python", "python-2.7", "csv", "gurobi"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496866648, "post_id": 44421742, "comment_id": 75842582, "body": "Show the first two lines of <code>my_data</code>."}, {"owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496866939, "post_id": 44421742, "comment_id": 75842719, "body": "1,19.007,35.75,1    2,4.4447,6.0735,2"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496866994, "post_id": 44421742, "comment_id": 75842752, "body": "Add those two lines in code-mode to your question. It&#39;s  less useful with broken-format within a comment. <b>Edit:</b> so no header i suppose?"}, {"owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496867114, "post_id": 44421742, "comment_id": 75842802, "body": "No (I am really new and learning how to use stackoverflow, sorry)"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496867192, "post_id": 44421742, "comment_id": 75842847, "body": "Double-check your <i>Add degree-b constraint</i>. This does not make any sense to me! i from loop is unused, so you are doing the same operation n times. j maybe undefined..."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496867276, "post_id": 44421742, "comment_id": 75842901, "body": "And after you checked this, replace <code>my_data[:,3]</code> with <code>my_data[:,3].tolist()</code>."}, {"owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496867585, "post_id": 44421742, "comment_id": 75843063, "body": "I used <code>j</code> instead of <code>i</code>, put even after changing it (and also putting <code>my_data[:,3].tolist</code>) I am having the same problem"}, {"owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496867660, "post_id": 44421742, "comment_id": 75843106, "body": "Actually, I got another message <code>TypeError: unsupported operand type(s) for *: &#39;int&#39; and &#39;builtin_function_or_method&#39;</code>"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496868044, "post_id": 44421742, "comment_id": 75843275, "body": "Then add this error and a full traceback (it will show the line) to your question as edit. And also show the modified code. Look at other questions to see what a good procedure is to get more help."}, {"owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496869126, "post_id": 44421742, "comment_id": 75843797, "body": "I realize I forgot to put the index in <code>my_data[:,3]</code> as <code>my_data[i,3]</code>. A really stupid error. But thank you a lot for your patience. How can I mark the question as solved??"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1496869267, "post_id": 44421742, "comment_id": 75843874, "body": "You can&#39;t without some answer. I recommend writing the answer yourself, with a good explanation of the solution. Not sure if you can accept it yourself with your status though."}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "is_accepted": false, "score": 1, "last_activity_date": 1496869642, "creation_date": 1496869642, "answer_id": 44422782, "question_id": 44421742, "link": "https://stackoverflow.com/questions/44421742/gurobi-in-python-best-way-to-read-csv-file/44422782#44422782", "title": "Gurobi in Python: best way to read csv file", "body": "<p>Actually it was a problem of indexing instead of data type. In the code:</p>\n\n<pre><code># Add degree-b constraint\nm.addConstrs((vars.sum('*',j) &lt;= my_data[:,3]\n         for i in range(n)), name='degree')\n</code></pre>\n\n<p>It should be used <code>vars.sum('*',i)</code> instead of <code>vars.sum('*',j)</code> and <code>my_data[i,3]</code> instead of <code>my_data[:,3]</code></p>\n"}, {"tags": [], "owner": {"reputation": 299, "user_id": 4962829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42de87032c2fee84557521f1b1d4e65f?s=128&d=identicon&r=PG&f=1", "display_name": "Rich L", "link": "https://stackoverflow.com/users/4962829/rich-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1499204189, "creation_date": 1499204189, "answer_id": 44914266, "question_id": 44421742, "link": "https://stackoverflow.com/questions/44421742/gurobi-in-python-best-way-to-read-csv-file/44914266#44914266", "title": "Gurobi in Python: best way to read csv file", "body": "<p>Even though this question is answered, for future visitors who are looking for good ways to read a csv file, pandas must be mentioned:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('prob25.csv', header=None, index_col=0, names=['x', 'y', 'idx'])\ndf\n         x        y  idx\n1  19.0070  35.7500    1\n2   4.4447   6.0735    2\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7197034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243273459073106/picture?type=large", "display_name": "Luciana Marques", "link": "https://stackoverflow.com/users/7197034/luciana-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499204189, "creation_date": 1496865533, "last_edit_date": 1496867806, "question_id": 44421742, "link": "https://stackoverflow.com/questions/44421742/gurobi-in-python-best-way-to-read-csv-file", "title": "Gurobi in Python: best way to read csv file", "body": "<p>I'm learning how to solve combinatorial optimization problems in Gurobi using Python. I would like to know what is the best option to read a csv file to use the data as model parameters. I'm using 'genfromtxt' to read the csv file, but I'm having difficulties in using it for constraint construction (Gurobi doesn't support this type - see error). </p>\n\n<p>Here my code and error message, my_data is composed by 4 columns: node index, x coordinate, y coordinate and maximum degree.</p>\n\n<pre><code>from gurobipy import *\nfrom numpy import genfromtxt\nimport math\n\n# Read data from csv file\nmy_data = genfromtxt('prob25.csv', delimiter=',')\n\n# Number of vertices\nn = len(my_data)\n\n# Function to calculate euclidean distancces\ndist = {(i,j) :\n    math.sqrt(sum((my_data[i][k]-my_data[j][k])**2 for k in [1,2]))\n    for i in range(n) for j in range(i)}\n\n# Create a new model\nm = Model(\"dcstNarula\")\n\n# Create variables\n\nvars = m.addVars(dist.keys(), obj=dist, vtype=GRB.BINARY, name='e')\nfor i,j in vars.keys():\n    vars[j,i] = vars[i,j] # edge in opposite direction\n\nm.update()\n\n# Add degree-b constraint\nm.addConstrs((vars.sum('*',j) &lt;= my_data[:,3]\n             for i in range(n)), name='degree')\n\nGurobiError: Unsupported type (&lt;type 'numpy.ndarray'&gt;) for LinExpr addition argument\n</code></pre>\n\n<p>First two lines of data</p>\n\n<pre><code>1,19.007,35.75,1\n2,4.4447,6.0735,2\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1496865682, "creation_date": 1496865682, "answer_id": 44421783, "question_id": 44421736, "link": "https://stackoverflow.com/questions/44421736/why-python-tries-to-compute-some-calculations-in-multiprocessing-in-advance/44421783#44421783", "title": "Why Python tries to compute some calculations in multiprocessing in advance", "body": "<p>The peephole optimizer is trying to constant-fold the <code>5**10000000000</code> calculation. This happens before any worker processes launch.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1496865992, "creation_date": 1496865992, "answer_id": 44421859, "question_id": 44421736, "link": "https://stackoverflow.com/questions/44421736/why-python-tries-to-compute-some-calculations-in-multiprocessing-in-advance/44421859#44421859", "title": "Why Python tries to compute some calculations in multiprocessing in advance", "body": "<p>Most languages have a constant-folding optimization: when an operation between constants appears, the compiler will perform the operation and replace the expression with the single-constant result.</p>\n\n<p>Python does this, as well.  I expect that your multi-node operation was simply the sequence of start-print-join on each node.</p>\n\n<p>If you want to get longer runs on the four nodes, try an expression that can't be evaluated at parse-time.  For instance, pass the base in the argument list and use that instead of 5, or perhaps have each process pick a random number in the range 1-10 and add that to the exponent.  This should force run-time evaluation.</p>\n"}, {"tags": [], "owner": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "is_accepted": false, "score": 1, "last_activity_date": 1496866677, "creation_date": 1496866677, "answer_id": 44422057, "question_id": 44421736, "link": "https://stackoverflow.com/questions/44421736/why-python-tries-to-compute-some-calculations-in-multiprocessing-in-advance/44422057#44422057", "title": "Why Python tries to compute some calculations in multiprocessing in advance", "body": "<p>I believe the previous answers are correct, but may not fully explain your observations.  As others have pointed out, that the single processor time you're seeing is the time that the interpreter is spending to calculate the value of the exponential expression.  Because you're using integers, and Python can do arbitrarily long integers, this takes quite awhile, probably exponential in terms of the number of 0's in your exponent.  In the first case, the calculation is taking so long that it appears to not get past that (I don't know if you ran to completion, or if your machine could even do it without running out of memory).</p>\n\n<p>In the second case, you've removed enough zeros so that it can calculate it (single threaded interpreter) then proceed to print it (in parallel).  However long that took, it will probably take at least 1000 times longer to do the first case.</p>\n"}], "owner": {"reputation": 507, "user_id": 6144691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-2E_c95YfweU/AAAAAAAAAAI/AAAAAAAAA0g/sqpLV3Sy0dQ/photo.jpg?sz=128", "display_name": "Arjunsingh", "link": "https://stackoverflow.com/users/6144691/arjunsingh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1496866677, "creation_date": 1496865512, "question_id": 44421736, "link": "https://stackoverflow.com/questions/44421736/why-python-tries-to-compute-some-calculations-in-multiprocessing-in-advance", "title": "Why Python tries to compute some calculations in multiprocessing in advance", "body": "<p>I am using Ubuntu 17.04 64-bit with processor-Intel\u00ae Core\u2122 i7-7500U CPU @ 2.70GHz \u00d7 4 and 16gb of RAM.<br>\nSo when I run this program, it uses a single core instead of using all the 4 cores.  </p>\n\n<pre><code>import time\nimport multiprocessing\n\ndef boom1(*args):\n    print(5**10000000000)\n\ndef boom2(*args):\n    print(5**10000000000)   \n\ndef boom3(*args):\n    print(5**10000000000)   \n\ndef boom4(*args):\n    print(5**10000000000)\n\nif __name__==\"__main__\":\n    array = []\n    p1 = multiprocessing.Process(target=boom1, args=(array,))\n    p2 = multiprocessing.Process(target=boom2, args=(array,))\n    p3 = multiprocessing.Process(target=boom3, args=(array,))\n    p4 = multiprocessing.Process(target=boom4, args=(array,))\n\n    p1.start()\n    p2.start()\n    p3.start()\n    p4.start()\n\n\n    p1.join()\n    p2.join()\n    p3.join()\n    p4.join()\n\n    print('Done')\n</code></pre>\n\n<p>Now if I print some low power of 10 in each function:</p>\n\n<pre><code>print(5 ** 10000000)\n</code></pre>\n\n<p>Now for small duration of time, a single core is processing 100% and then all 4 cores are performing 100%.\nWhy is this so? Shouldn't it start with all cores performing 100%.</p>\n\n<p>What I had come to know was that python performs some operation before itself and hence was doing that from a single core. If it is so then what is the point of python being an interpreted language or am I missing something?does</p>\n"}, {"tags": ["python", "multithreading", "parallel-processing", "multiprocessing"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 2, "creation_date": 1496865664, "post_id": 44421669, "comment_id": 75842068, "body": "That seems like a particularly difficult way to handle the problem. What are these jobs? Perhaps that&#39;s the best way to handle the problem. Consume the csv once to create jobs (perhaps stored in a database or separate files) and manage those. If you want to do the csv thing, it should only be managed by a single entity (that master program dealing with the jobs perhaps) that is sent responses from the workers and does the csv file update."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1496866350, "post_id": 44421669, "comment_id": 75842403, "body": "You don&#39;t. Handling side-effects from multiple (parallel) points of control is a recipe for disaster. If it&#39;s the <i>only way to make it work</i> you can implement locks as some of your current answers suggest, however that doesn&#39;t seem to be the case here. You should implement a manager/worker pattern and have the manager handle IO, pass jobs off to the workers, and receive results from the workers."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1496866987, "post_id": 44421791, "comment_id": 75842747, "body": "Why implement a custom lock? <a href=\"https://docs.python.org/3/library/multiprocessing.html?highlight=multiprocessing.lock#multiprocessing.Lock\" rel=\"nofollow noreferrer\"><code>multiprocessing.Lock</code></a> exists for this purpose."}], "tags": [], "owner": {"reputation": 342, "user_id": 6381439, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cpv2O5u7Xv4/AAAAAAAAAAI/AAAAAAAAAV4/wpwrRwppfUc/photo.jpg?sz=128", "display_name": "Benjamin Commet", "link": "https://stackoverflow.com/users/6381439/benjamin-commet"}, "is_accepted": false, "score": 0, "last_activity_date": 1496865711, "creation_date": 1496865711, "answer_id": 44421791, "question_id": 44421669, "link": "https://stackoverflow.com/questions/44421669/python-3-how-to-write-to-the-same-file-from-multiple-processes-without-messing/44421791#44421791", "title": "Python 3: How to write to the same file from multiple processes without messing it up?", "body": "<p>Look into locking files in python. Locking a file will make the next process wait until the file is unlocked to modify it. Locking files is platform specific so you will have to use whichever method works for the os you are on. If you need to figure out the os use a switch statement like this.</p>\n\n<pre><code>import os\n\ndef my_lock(f):\n    if os.name == \"posix\":\n        # Unix or OS X specific locking here\n    elif os.name == \"nt\":\n        # Windows specific locking here\n    else:\n        print \"Unknown operating system, lock unavailable\"\n</code></pre>\n\n<p>Then I would look at <a href=\"http://blog.e-shell.org/309\" rel=\"nofollow noreferrer\">this article </a> and figure out exactly how you want to implement your lock.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 8106112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fefa7d3f830011f7b719dbed7ea0e316?s=128&d=identicon&r=PG&f=1", "display_name": "J. Darnell", "link": "https://stackoverflow.com/users/8106112/j-darnell"}, "is_accepted": false, "score": 1, "last_activity_date": 1496865776, "creation_date": 1496865776, "answer_id": 44421808, "question_id": 44421669, "link": "https://stackoverflow.com/questions/44421669/python-3-how-to-write-to-the-same-file-from-multiple-processes-without-messing/44421808#44421808", "title": "Python 3: How to write to the same file from multiple processes without messing it up?", "body": "<p>Use a 'Lock' from the multiprocessing library to serialize operations with the file.</p>\n\n<p>You will want to pass the lock into each process. Each process should 'acquire' the lock before it opens the file and 'release' the lock after it closes the file.</p>\n\n<p><a href=\"https://docs.python.org/2/library/multiprocessing.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/multiprocessing.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496866372, "post_id": 44421927, "comment_id": 75842425, "body": "It is. I need to continuously update the file because there could be about 40,000 jobs to do, each taking about a minute, and the chance of my computer being shut off (or the program being interrupted) in the middle of this program is high. Therefore I think I should continuously update the file."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496866556, "post_id": 44421927, "comment_id": 75842527, "body": "@user1367204 so you&#39;re having each worker process parse a 40k entry csv, find the <i>one</i> entry it&#39;s supposed to delete, and overwrite the file? That sounds like a horror show. There&#39;s a number of better implementations, one of which being zwer&#39;s second paragraph here about keeping the csv intact but populating a &quot;done&quot; list as well."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496866958, "post_id": 44421927, "comment_id": 75842732, "body": "@user1367204 - then use a &#39;diff&#39; file - write a new line for each link you download in that file, then when you start your downloader the next time, after loading the &#39;input&#39; file with the links, load this &#39;diff&#39; file, remove the &#39;diff&#39; links from &#39;input&#39; links, save the &#39;input&#39; file with this filtered list and blank the &#39;diff&#39; file. I&#39;ll write some pseudo code a bit later if you need it better visualized..."}, {"owner": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496867284, "post_id": 44421927, "comment_id": 75842905, "body": "@zwer, thanks for being so helpful. I think the diff file might have the same issue, namely, it might be a problem if several <code>downloader</code> functions try to write to it at the same time."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496867473, "post_id": 44421927, "comment_id": 75842995, "body": "@user1367204 right, that&#39;s why we&#39;re all suggesting you not let the <code>downloader</code> functions touch the filesystem at all."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496867571, "post_id": 44421927, "comment_id": 75843053, "body": "@user1367204 - don&#39;t write to the diff file from your sub-processes, write from your main process (the &#39;dispatcher&#39; that loads the &#39;input&#39; links in the first place) when a process finishes downloading and returns successful. An alternative is to use <code>multiprocessing.Lock</code> and to pass it around your processes so that only one subprocess accesses the &#39;diff&#39; file at the time, but that&#39;s needless complicating of something rather simple."}, {"owner": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 1, "creation_date": 1496874610, "post_id": 44421927, "comment_id": 75845990, "body": "@zwer Thanks, I looked into what you are talking about and it made the most sense. I&#39;m going to avoid locking and instead use a worker-manager setup."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "edited": false, "score": 0, "creation_date": 1496877826, "post_id": 44421927, "comment_id": 75847011, "body": "@user1367204 - check the update as one way to do it... it can be more efficient and less verbose, but this is for demonstration purposes and I don&#39;t want to introduce new concepts."}], "tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": true, "score": 5, "last_activity_date": 1496877765, "last_edit_date": 1496877765, "creation_date": 1496866186, "answer_id": 44421927, "question_id": 44421669, "link": "https://stackoverflow.com/questions/44421669/python-3-how-to-write-to-the-same-file-from-multiple-processes-without-messing/44421927#44421927", "title": "Python 3: How to write to the same file from multiple processes without messing it up?", "body": "<p>If this is a continuation of your <a href=\"https://stackoverflow.com/questions/44377789/python-3-how-to-properly-setup-this-multiprocessing-job\">project from yesterday</a> you already have your download list in memory - just remove the entries from the loaded list as their processes finish download and only write down the whole list over the input file once you're exiting the 'downloader'. There is no reason to constantly write down the changes.</p>\n\n<p>If you want to know (say from an external process) when a url gets downloaded even while your 'downloader' is running, write in a <code>downloaded.dat</code> a new line each time a process returns that download was successful.</p>\n\n<p>Of course, in both cases, write from within your main process/thread so you don't have to worry about mutex.</p>\n\n<p><strong>UPDATE</strong> - Here's how to do it with an additional file, using the same code base as yesterday:</p>\n\n<pre><code>def init_downloader(params):  # our downloader initializator\n    downloader = Downloader(**params[0])  # instantiate our downloader\n    downloader.run(params[1])  # run our downloader\n    return params  # job finished, return the same params for identification\n\nif __name__ == \"__main__\":  # important protection for cross-platform use\n\n    downloader_params = [  # Downloaders will be initialized using these params\n        {\"port_number\": 7751},\n        {\"port_number\": 7851},\n        {\"port_number\": 7951}\n    ]\n    downloader_cycle = cycle(downloader_params)  # use a cycle for round-robin distribution\n\n    with open(\"downloaded_links.dat\", \"a+\") as diff_file:  # open your diff file\n        diff_file.seek(0)  # rewind the diff file to the beginning to capture all lines\n        diff_links = {row.strip() for row in diff_file}  # load downloaded links into a set\n        with open(\"input_links.dat\", \"r+\") as input_file:  # open your input file\n            available_links = []\n            download_jobs = []  # store our downloader parameters + a link here\n            # read our file line by line and filter out downloaded links\n            for row in input_file:  # loop through our file\n                link = row.strip()  # remove the extra whitespace to get the link\n                if link not in diff_links:  # make sure link is not already downloaded\n                    available_links.append(row)\n                    download_jobs.append([next(downloader_cycle), link])\n            input_file.seek(0)  # rewind our input file\n            input_file.truncate()  # clear out the input file\n            input_file.writelines(available_links)  # store back the available links\n            diff_file.seek(0)  # rewind the diff file\n            diff_file.truncate()  # blank out the diff file now that the input is updated\n        # and now let's get to business...\n        if download_jobs:\n            download_pool = Pool(processes=5)  # make our pool use 5 processes\n            # run asynchronously so we can capture results as soon as they ar available\n            for response in download_pool.imap_unordered(init_downloader, download_jobs):\n                # since it returns the same parameters, the second item is a link\n                # add the link to our `diff` file so it doesn't get downloaded again\n                diff_file.write(response[1] + \"\\n\")\n        else:\n            print(\"Nothing left to download...\")\n</code></pre>\n\n<p>The whole idea is, as I wrote in the comment, to use a file to store downloaded links as they get downloaded, and then on the next run to filter out the downloaded links and update the input file. That way even if you forcibly kill it, it will always resume where it left off (except for the partial downloads).</p>\n"}], "owner": {"reputation": 3493, "user_id": 1367204, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb24ce2c5d3ff481ac1ecba67ff51039?s=128&d=identicon&r=PG", "display_name": "user1367204", "link": "https://stackoverflow.com/users/1367204/user1367204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2519, "favorite_count": 0, "accepted_answer_id": 44421927, "answer_count": 3, "score": 4, "last_activity_date": 1496877765, "creation_date": 1496865235, "question_id": 44421669, "link": "https://stackoverflow.com/questions/44421669/python-3-how-to-write-to-the-same-file-from-multiple-processes-without-messing", "title": "Python 3: How to write to the same file from multiple processes without messing it up?", "body": "<p>I have a program that can be started or stopped at any moment. The program is used to download data from web pages. First, a user will define a bunch of web pages in a <code>.csv</code> file, then save that <code>.csv</code> file, then start the program. That program will read the <code>.csv</code> file and turn it into a list of jobs. Next, the jobs are split among 5 separate <code>downloader</code> functions that work in parallel but may take different times to download. </p>\n\n<p>After a <code>downloader</code> (which there are 5 of) finished downloading a web page, I need it to open the <code>.csv</code> file and remove the link. This way, as time passes, the <code>.csv</code> file will get smaller and smaller. The issue is that sometimes two <code>download</code> functions will try to update the <code>.csv</code> file at the same time and will cause the program to crash. How can I deal with this? </p>\n"}, {"tags": ["python", "python-2.7", "tkinter", "trace"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1496865641, "post_id": 44421642, "comment_id": 75842063, "body": "I cannot reproduce using Python 2.7 on Ubuntu 16.04. Everything works for me. Are you sure this is all of your code?"}, {"owner": {"reputation": 3655, "user_id": 6634373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLqp9.png?s=128&g=1", "display_name": "CommonSense", "link": "https://stackoverflow.com/users/6634373/commonsense"}, "edited": false, "score": 0, "creation_date": 1496865805, "post_id": 44421642, "comment_id": 75842133, "body": "Change your trace to <code>self.testvar.trace(&#39;w&#39;, self.testfun)</code> to prevent execution on declarition and definition of your callback to <code>def testfun(self, *args):</code> to supply more than one argument. Links: <a href=\"https://stackoverflow.com/questions/5767228/why-is-button-parameter-command-executed-when-declared\">similar problem</a>, <a href=\"https://stackoverflow.com/questions/29690463/what-are-the-arguments-to-tkinter-variable-trace-method-callbacks\">trace callback arguments</a>."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 3655, "user_id": 6634373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLqp9.png?s=128&g=1", "display_name": "CommonSense", "link": "https://stackoverflow.com/users/6634373/commonsense"}, "edited": false, "score": 1, "creation_date": 1496867335, "post_id": 44421642, "comment_id": 75842927, "body": "@CommonSense Can you post you answer in the comment above as an Answer? So it can be &#39;accepted&#39;?"}, {"owner": {"reputation": 13, "user_id": 8127758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b884117420f4bba7214957160ec9044?s=128&d=identicon&r=PG&f=1", "display_name": "Charlieboy", "link": "https://stackoverflow.com/users/8127758/charlieboy"}, "reply_to_user": {"reputation": 3655, "user_id": 6634373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLqp9.png?s=128&g=1", "display_name": "CommonSense", "link": "https://stackoverflow.com/users/6634373/commonsense"}, "edited": false, "score": 0, "creation_date": 1496912091, "post_id": 44421642, "comment_id": 75859720, "body": "@CommonSense, thank you very much, you saved my day."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8127758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b884117420f4bba7214957160ec9044?s=128&d=identicon&r=PG&f=1", "display_name": "Charlieboy", "link": "https://stackoverflow.com/users/8127758/charlieboy"}, "edited": false, "score": 0, "creation_date": 1496912102, "post_id": 44422331, "comment_id": 75859726, "body": "Thank you very much"}, {"owner": {"reputation": 956, "user_id": 4729700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087241d6b8e76ac735ac3bf3924ef24b?s=128&d=identicon&r=PG&f=1", "display_name": "Jannick", "link": "https://stackoverflow.com/users/4729700/jannick"}, "edited": false, "score": 0, "creation_date": 1496923020, "post_id": 44422331, "comment_id": 75867252, "body": "@Bryan Oakley You are the master of patience. I feel like on third of tkinter questions are exactly this problem"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 956, "user_id": 4729700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087241d6b8e76ac735ac3bf3924ef24b?s=128&d=identicon&r=PG&f=1", "display_name": "Jannick", "link": "https://stackoverflow.com/users/4729700/jannick"}, "edited": false, "score": 0, "creation_date": 1496923454, "post_id": 44422331, "comment_id": 75867595, "body": "@Jannick: there are definitely a <i>lot</i> of questions related to calling a function rather than providing a reference. The problem is that this is a somewhat hard concept for beginner programmers to wrap their head around."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 0, "last_activity_date": 1498588844, "last_edit_date": 1498588844, "creation_date": 1496867912, "answer_id": 44422331, "question_id": 44421642, "link": "https://stackoverflow.com/questions/44421642/python-tkinter-trace-error/44422331#44422331", "title": "Python tkinter trace error", "body": "<p>Consider this line of code:</p>\n\n<pre><code>self.testvar.trace('w',self.testfun())  \n</code></pre>\n\n<p>This is exactly the same as this:</p>\n\n<pre><code>result = self.testfun()\nself.testvar.trace('w', result)\n</code></pre>\n\n<p>Since the function returns <code>None</code>, the trace is going to try to call <code>None</code>, and thus you get <code>'NoneType' object is not callable</code></p>\n\n<p>The <code>trace</code> method requires a <em>callable</em>. That is, a reference to a function. You need to change that line to be the following (notice the missing <code>()</code> at the end):</p>\n\n<pre><code>self.testvar.trace('w',self.testfun) \n</code></pre>\n\n<p>Also, you need to modify <code>testfun</code> to take arguments that are automatically passed by the tracing mechanism. For more information see <a href=\"https://stackoverflow.com/q/29690463/7432\">What are the arguments to Tkinter variable trace method callbacks?</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8127758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b884117420f4bba7214957160ec9044?s=128&d=identicon&r=PG&f=1", "display_name": "Charlieboy", "link": "https://stackoverflow.com/users/8127758/charlieboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 44422331, "answer_count": 1, "score": 1, "last_activity_date": 1498588844, "creation_date": 1496865151, "last_edit_date": 1496865243, "question_id": 44421642, "link": "https://stackoverflow.com/questions/44421642/python-tkinter-trace-error", "title": "Python tkinter trace error", "body": "<p>I'm trying to write a GUI for my code. My plan is to use tkinter's <code>StringVar</code>, <code>DoubleVar</code>, etc. to monitor my input in real time. So I found out the <code>DoubleVar.trace('w', callback)</code> function. However, every time I make the change I get an exception:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\Users\\Anaconda2\\lib\\lib-tk\\Tkinter.py\", line 1542, in __call__\n    return self.func(*args)\nTypeError: 'NoneType' object is not callable\n</code></pre>\n\n<p>I have no idea what's going wrong. I'm using python 2.7 \nMy code is as follows:</p>\n\n<pre><code>from Tkinter import *\nclass test(Frame):\n    def __init__(self,master):\n        Frame.__init__(self,master=None) \n        self.main_frame = Frame(master);\n        self.main_frame.pack() \n        self.testvar = DoubleVar()\n        self.slider_testvar = Scale(self.main_frame,variable = self.testvar,from_ = 0.2, to = 900, resolution = 0.1, orient=HORIZONTAL,length = 300)\n        self.slider_testvar.grid(row = 0, column = 0, columnspan = 5)       \n        self.testvar.trace('w',self.testfun())    \n    def testfun(self):\n        print(self.testvar.get())\n\nroot = Tk()\nroot.geometry(\"1024x768\")\napp = test(master = root) \nroot.mainloop() \n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 266, "user_id": 5166967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207506050840516/picture?type=large", "display_name": "Javier Campos", "link": "https://stackoverflow.com/users/5166967/javier-campos"}, "edited": false, "score": 1, "creation_date": 1496866605, "post_id": 44421607, "comment_id": 75842557, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29921900/override-default-django-username-validators-for-abstractuser-model\">Override default django username validators for AbstractUser model</a>"}, {"owner": {"reputation": 266, "user_id": 5166967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207506050840516/picture?type=large", "display_name": "Javier Campos", "link": "https://stackoverflow.com/users/5166967/javier-campos"}, "edited": false, "score": 0, "creation_date": 1496866623, "post_id": 44421607, "comment_id": 75842565, "body": "I think this is a duplicate, maybe look here <a href=\"https://stackoverflow.com/questions/29921900/override-default-django-username-validators-for-abstractuser-model\" title=\"override default django username validators for abstractuser model\">stackoverflow.com/questions/29921900/&hellip;</a>"}, {"owner": {"reputation": 19515, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "reply_to_user": {"reputation": 266, "user_id": 5166967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207506050840516/picture?type=large", "display_name": "Javier Campos", "link": "https://stackoverflow.com/users/5166967/javier-campos"}, "edited": false, "score": 0, "creation_date": 1496866807, "post_id": 44421607, "comment_id": 75842654, "body": "So I have to create a new user model and then use that and override the length there basically?"}], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 1744045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/055e87ffc4ee3faf0e30b3792bcd96ef?s=128&d=identicon&r=PG", "display_name": "Pettis", "link": "https://stackoverflow.com/users/1744045/pettis"}, "is_accepted": true, "score": 1, "last_activity_date": 1496877602, "creation_date": 1496877602, "answer_id": 44424257, "question_id": 44421607, "link": "https://stackoverflow.com/questions/44421607/change-username-max-length-in-django-1-11-django-contrib-auth/44424257#44424257", "title": "Change username max_length in Django 1.11 (django.contrib.auth)", "body": "<p>One way to allow custom length of username field is to use custom user model. The documentation is here: <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#specifying-a-custom-user-model\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#specifying-a-custom-user-model</a></p>\n\n<p>Extend your custom user model from <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#django.contrib.auth.models.AbstractBaseUser\" rel=\"nofollow noreferrer\">AbstractBaseUser</a> which provides necessary methods to work with Django authentication.</p>\n\n<p>Basically you can just create the model with data you need to have and define the required fields in the model. In your case you might want to set the <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#django.contrib.auth.models.CustomUser.USERNAME_FIELD\" rel=\"nofollow noreferrer\">USERNAME_FIELD</a> and <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#django.contrib.auth.models.CustomUser.EMAIL_FIELD\" rel=\"nofollow noreferrer\">EMAIL_FIELD</a> to be the same field in model.</p>\n"}, {"tags": [], "owner": {"reputation": 754, "user_id": 6243513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0039f119259c4993b102069d92ceffba?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff ", "link": "https://stackoverflow.com/users/6243513/jeff"}, "is_accepted": false, "score": 0, "last_activity_date": 1571326873, "creation_date": 1571326873, "answer_id": 58436291, "question_id": 44421607, "link": "https://stackoverflow.com/questions/44421607/change-username-max-length-in-django-1-11-django-contrib-auth/58436291#58436291", "title": "Change username max_length in Django 1.11 (django.contrib.auth)", "body": "<p>Django 1.10 shipped with a migration to alter the username max_length.  You just have to run migrations i.e. <code>python manage.py migrate auth</code> to update your database tables.</p>\n"}], "owner": {"reputation": 19515, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 0, "accepted_answer_id": 44424257, "answer_count": 2, "score": 1, "last_activity_date": 1571326873, "creation_date": 1496865015, "question_id": 44421607, "link": "https://stackoverflow.com/questions/44421607/change-username-max-length-in-django-1-11-django-contrib-auth", "title": "Change username max_length in Django 1.11 (django.contrib.auth)", "body": "<p>My users are using e-mail addresses as usernames, which caused a problem in Django 1.9 because there was a 30 character maximum <code>username</code> length.</p>\n\n<p>This was <a href=\"https://code.djangoproject.com/ticket/20846\" rel=\"nofollow noreferrer\">supposed to be fixed</a> by Django 1.10, with a 150 character limit, I believe (though it looks like <a href=\"https://docs.djangoproject.com/en/1.11/ref/contrib/auth/\" rel=\"nofollow noreferrer\">the docs</a> actually say that <code>max_length</code> should be able to go up to 191 characters for certain databases).</p>\n\n<p>I upgraded to Django 1.11 but <code>username</code> still seems to be limited to 30 characters. Is it because I need to set the value of <code>max_length</code> somewhere? If so, where do I set this (an example would be great)? If not, how do I increase the max length?</p>\n\n<p>Here is my current view. </p>\n\n<pre><code>def register(request):\n    alreadyRegistered = False\n    invalidID = False\n    context_dict = {}\n    if request.method == 'POST':\n        # Gather the username and password provided by the user.\n        # This information is obtained from the login form.\n        Userid = request.POST['username']\n        Userid = Userid[0:29] # horrible work-around that has to change\n        if User.objects.filter(username=Userid).count() &gt; 0:\n            alreadyRegistered = True\n        else:\n            isGU = 1 &gt; 0 # this will always = TRUE for now\n            if isGU or isEA:\n                firstname = request.POST['firstname']\n                lastname = request.POST['lastname']\n                email = Userid\n                password = request.POST['password']\n                user = User.objects.create_user(Userid, email, password)\n                user.first_name = firstname\n                user.last_name = lastname\n                user.save()\n                registered = True\n                user = authenticate(username=Userid, password=password)\n                login(request, user)\n                return HttpResponseRedirect('/studentprogress/')\n            else:\n                invalidID = True\n\n    context_dict['alreadyRegistered'] = alreadyRegistered\n    context_dict['invalidID'] = invalidID\n    return render(request,\n            'studentprogress/register.html', context_dict)\n</code></pre>\n"}]