[{"tags": ["python", "google-cloud-dataflow", "apache-beam"], "answers": [{"tags": [], "owner": {"reputation": 1200, "user_id": 10144000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce63eb1708adebcee3b078c1dff13fa?s=128&d=identicon&r=PG&f=1", "display_name": "Tanveer Uddin", "link": "https://stackoverflow.com/users/10144000/tanveer-uddin"}, "is_accepted": false, "score": 1, "last_activity_date": 1544750222, "creation_date": 1544750222, "answer_id": 53772282, "question_id": 53753190, "link": "https://stackoverflow.com/questions/53753190/apache-beam-python-read-tgz-and-parse-to-bigquery/53772282#53772282", "title": "Apache Beam Python read .tgz and parse to BigQuery", "body": "<p>I am afraid beam does not support tgz/tar.gz i.e. doubly zipped file at this moment. There is a open <a href=\"https://issues.apache.org/jira/browse/BEAM-3867\" rel=\"nofollow noreferrer\">JIRA</a> for the feature. However, it can read a gz file which has one file only inside. sample code below: </p>\n\n<pre><code>beam.io.textio.ReadFromText(file_pattern= 'gs://bucket_name/logs-*.gz',compression_type='gzip')\n</code></pre>\n"}], "owner": {"reputation": 758, "user_id": 4179714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1d073e3d0b8ec9746d876a0e091dc21?s=128&d=identicon&r=PG&f=1", "display_name": "PR102012", "link": "https://stackoverflow.com/users/4179714/pr102012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544831075, "creation_date": 1544659156, "last_edit_date": 1544831075, "question_id": 53753190, "link": "https://stackoverflow.com/questions/53753190/apache-beam-python-read-tgz-and-parse-to-bigquery", "title": "Apache Beam Python read .tgz and parse to BigQuery", "body": "<p>I have .tgz files , for instance. It resides in Google Cloud Storage. Inside the .tgz is a series of | delimited .txt files.\nFor instance one of the 10 files could be named similar to \n</p>\n\n<p>I'd like to use Apache Beam in Python SDK to at minimal read the .tgz and accompanying .txt files, without having to unpack it first. I'd like to parse the | delimited content and send the Collection to BigQuery, in a predefined Dataset.Table.</p>\n\n<p>This is what I have so far.</p>\n\n<pre><code>import apache_beam as beam\nfrom apache_beam import (coders, io)\n\nraw_logs = (p\n            | io.Read(\"ReadLogsFromGCS\", beam.io.TextFileSource(\n                      \"gs://my-bucket/logs-*.gz\",\n                      coder=coders.BytesCoder()))\np.run()\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 315, "user_id": 6003629, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9a52f4e5b0da193bab9a98ceee50647b?s=128&d=identicon&r=PG&f=1", "display_name": "jimfawkes", "link": "https://stackoverflow.com/users/6003629/jimfawkes"}, "edited": false, "score": 0, "creation_date": 1544659770, "post_id": 53753151, "comment_id": 94359385, "body": "Could you please provide your project structure and the files in the directories (At least the views.py and dunder inits."}, {"owner": {"reputation": 263, "user_id": 4418439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3c639fe5ca421b6db82c8f7912ac4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "9minday", "link": "https://stackoverflow.com/users/4418439/9minday"}, "reply_to_user": {"reputation": 315, "user_id": 6003629, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9a52f4e5b0da193bab9a98ceee50647b?s=128&d=identicon&r=PG&f=1", "display_name": "jimfawkes", "link": "https://stackoverflow.com/users/6003629/jimfawkes"}, "edited": false, "score": 0, "creation_date": 1544660352, "post_id": 53753151, "comment_id": 94359511, "body": "<a href=\"https://monosnap.com/file/0RnMIV2JgScQsHQPxaZuwgES18pbe1\" rel=\"nofollow noreferrer\">monosnap.com/file/0RnMIV2JgScQsHQPxaZuwgES18pbe1</a>  Here is an image of the whole structure"}, {"owner": {"reputation": 2206, "user_id": 6026516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fLyDS.jpg?s=128&g=1", "display_name": "Ramtin", "link": "https://stackoverflow.com/users/6026516/ramtin"}, "edited": false, "score": 0, "creation_date": 1544663840, "post_id": 53753151, "comment_id": 94360173, "body": "I have never put a <code>views.py</code> next to <code>settings.py</code>, Try one of these two things: 1. remove the decorator and see if it makes any difference 2. Move the <code>index</code> method to a <code>utils.py</code> file in an app"}, {"owner": {"reputation": 17759, "user_id": 2091925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc96737b990c24e08de6174eed0b0f?s=128&d=identicon&r=PG", "display_name": "Will Keeling", "link": "https://stackoverflow.com/users/2091925/will-keeling"}, "edited": false, "score": 0, "creation_date": 1544706242, "post_id": 53753151, "comment_id": 94376631, "body": "@9minday what are the imports listed in <code>ebdjango&#47;views.py</code>? Can you share those?"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 4418439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3c639fe5ca421b6db82c8f7912ac4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "9minday", "link": "https://stackoverflow.com/users/4418439/9minday"}, "edited": false, "score": 0, "creation_date": 1544659218, "post_id": 53753192, "comment_id": 94359237, "body": "Yes they both have <b>init</b>.py in them"}, {"owner": {"reputation": 315, "user_id": 6003629, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9a52f4e5b0da193bab9a98ceee50647b?s=128&d=identicon&r=PG&f=1", "display_name": "jimfawkes", "link": "https://stackoverflow.com/users/6003629/jimfawkes"}, "edited": false, "score": 0, "creation_date": 1544659521, "post_id": 53753192, "comment_id": 94359325, "body": "If you use Quotes around your <code>__init__.py</code> it will display the dunder and not make it bold."}, {"owner": {"reputation": 315, "user_id": 6003629, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9a52f4e5b0da193bab9a98ceee50647b?s=128&d=identicon&r=PG&f=1", "display_name": "jimfawkes", "link": "https://stackoverflow.com/users/6003629/jimfawkes"}, "edited": false, "score": 0, "creation_date": 1544659701, "post_id": 53753192, "comment_id": 94359366, "body": "Is there a dunder init file in the root dir?"}, {"owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "edited": false, "score": 0, "creation_date": 1544659824, "post_id": 53753192, "comment_id": 94359397, "body": "That is weird, maybe post an image of your project file structure?"}, {"owner": {"reputation": 263, "user_id": 4418439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3c639fe5ca421b6db82c8f7912ac4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "9minday", "link": "https://stackoverflow.com/users/4418439/9minday"}, "edited": false, "score": 0, "creation_date": 1544660246, "post_id": 53753192, "comment_id": 94359486, "body": "Here is a link to the image of the structure. <a href=\"https://monosnap.com/file/0RnMIV2JgScQsHQPxaZuwgES18pbe1\" rel=\"nofollow noreferrer\">monosnap.com/file/0RnMIV2JgScQsHQPxaZuwgES18pbe1</a>"}, {"owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "edited": false, "score": 0, "creation_date": 1544661129, "post_id": 53753192, "comment_id": 94359678, "body": "what command are you running to get that error message? Also are you on windows?"}, {"owner": {"reputation": 263, "user_id": 4418439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3c639fe5ca421b6db82c8f7912ac4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "9minday", "link": "https://stackoverflow.com/users/4418439/9minday"}, "edited": false, "score": 0, "creation_date": 1544661323, "post_id": 53753192, "comment_id": 94359700, "body": "I use OS Terminal. It comes up when I try to do python manage.py runserver. @MichaelCalve"}, {"owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "edited": false, "score": 0, "creation_date": 1544661723, "post_id": 53753192, "comment_id": 94359786, "body": "Is that Mac OS?"}, {"owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "edited": false, "score": 0, "creation_date": 1544662100, "post_id": 53753192, "comment_id": 94359864, "body": "It is weird because python recognizes the views.py file but not the function within it somehow, even though your code looks fine.  I&#39;m not sure though. Good luck!"}, {"owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "edited": false, "score": 0, "creation_date": 1544662214, "post_id": 53753192, "comment_id": 94359884, "body": "I would recommend using PyCharm as your IDE for creating your django app and using the terminal within PyCharm. The issue could be OS Terminal and PyCharm might help fix the situation"}], "tags": [], "owner": {"reputation": 21, "user_id": 7001636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2XrO.png?s=128&g=1", "display_name": "Michael Calve", "link": "https://stackoverflow.com/users/7001636/michael-calve"}, "is_accepted": false, "score": 0, "last_activity_date": 1544659159, "creation_date": 1544659159, "answer_id": 53753192, "question_id": 53753151, "link": "https://stackoverflow.com/questions/53753151/fail-to-import-view-from-main-django-project-folder-into-app-views-py/53753192#53753192", "title": "Fail to Import View from main Django project folder into app views.py", "body": "<p>Do both <code>ebdjango/</code> and <code>dailytask/</code> folders have <code>__init__.py</code> files in them?</p>\n"}], "owner": {"reputation": 263, "user_id": 4418439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3c639fe5ca421b6db82c8f7912ac4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "9minday", "link": "https://stackoverflow.com/users/4418439/9minday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544661273, "creation_date": 1544658913, "last_edit_date": 1544661273, "question_id": 53753151, "link": "https://stackoverflow.com/questions/53753151/fail-to-import-view-from-main-django-project-folder-into-app-views-py", "title": "Fail to Import View from main Django project folder into app views.py", "body": "<p>I have a problem to import a view from the main Django project views.py into my app's views.py.</p>\n\n<p>This is what happens:</p>\n\n<blockquote>\n  <p>ImportError: cannot import name 'index' from 'ebdjango.views'\n  (/Users/iamsuccessful/ebdjango/ebdjango/views.py)</p>\n</blockquote>\n\n<p>Inside dailytask/views.py (app folder)</p>\n\n<pre><code>from ebdjango.views import index\n</code></pre>\n\n<p>Inside ebdjango/views.py (main Django project folder)</p>\n\n<pre><code>@login_required(login_url=\"/login\")\ndef index(request):\n    user = request.user\n    if user.userprofile.daily_task_done is False:\n        return render(request, 'home.html')\n    elif user.userprofile.daily_task_done is True:\n        return task_done(request, pk=user.userprofile.daily_task)\n</code></pre>\n\n<p>settings.py</p>\n\n<pre><code>BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n</code></pre>\n\n<p><img src=\"https://monosnap.com/image/0RnMIV2JgScQsHQPxaZuwgES18pbe1.png\" alt=\"Structure\"></p>\n\n<p>What do I need to do to import the view Index into the app views.py?</p>\n"}, {"tags": ["python", "python-3.x", "visual-studio-code"], "comments": [{"owner": {"reputation": 476, "user_id": 7953755, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10159102321335497/picture?type=large", "display_name": "Pari Baker", "link": "https://stackoverflow.com/users/7953755/pari-baker"}, "edited": false, "score": 0, "creation_date": 1544658880, "post_id": 53753114, "comment_id": 94359133, "body": "Have you tried restarting VSC?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1544658991, "post_id": 53753114, "comment_id": 94359177, "body": "To make <code>pha</code> a package it needs a file named <code>__init__.py</code>"}, {"owner": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "reply_to_user": {"reputation": 476, "user_id": 7953755, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10159102321335497/picture?type=large", "display_name": "Pari Baker", "link": "https://stackoverflow.com/users/7953755/pari-baker"}, "edited": false, "score": 0, "creation_date": 1544659556, "post_id": 53753114, "comment_id": 94359337, "body": "@PariBaker I have. No luck."}, {"owner": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1544659574, "post_id": 53753114, "comment_id": 94359339, "body": "@PeterWood It has one."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1544660837, "post_id": 53753114, "comment_id": 94359607, "body": "@beezle not if it&#39;s called <code>__init.py__</code> it doesn&#39;t."}, {"owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1544663172, "post_id": 53753114, "comment_id": 94360046, "body": "@PeterWood You don&#39;t need (empty) <code>__init__.py</code> files to define a package in Python 3, which this question is tagged as. See <a href=\"https://stackoverflow.com/a/37140173/425458\">this</a>. Though the point that <code>__init.py__</code> is the wrong name is absolutely correct."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544664868, "post_id": 53753114, "comment_id": 94360361, "body": "When you moved <code>myScript.py</code> into the <code>pha</code> directory, you made it part of the package, but by running it directly, you&#39;re attempting to do so as though it wasn&#39;t. You can get the <code>import</code> to work in that case by using just a regular <code>from libclass import *</code> since <code>libclass.py</code> is now in the same directory as <code>myScript.py</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544665012, "post_id": 53753114, "comment_id": 94360395, "body": "There&#39;s good information about this kind of thing in the accepted answer to the question <a href=\"https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time\">Relative imports for the billionth time</a>."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 0, "creation_date": 1544660982, "post_id": 53753314, "comment_id": 94359644, "body": "Right... so the problem is, I&#39;ve oversimplified the issue. I have a script in <code>pha.ps.sbpro</code> (three nested directories) that <code>libclass</code> imports. Once I make the change you suggest, those imports break. I&#39;d rather not start changing any of those imports, because there&#39;s more scripts at the root level that use this whole library. Am I not supposed to be running scripts in a package structure at all different levels?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 2, "creation_date": 1544662329, "post_id": 53753314, "comment_id": 94359907, "body": "@beezle: No, you&#39;re not."}, {"owner": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "reply_to_user": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 0, "creation_date": 1544662867, "post_id": 53753314, "comment_id": 94359997, "body": "@beezle Why is my answer down voted? I think it fixes the problem YOU POSTED HERE (sorry if you oversimplified it). Try to correct your question, please."}, {"owner": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "reply_to_user": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 0, "creation_date": 1544663848, "post_id": 53753314, "comment_id": 94360174, "body": "@beezle: The change I suggested was just in <b>myScript.py</b>. Can you just post all the code and files/directories you are working on?"}, {"owner": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "reply_to_user": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 0, "creation_date": 1544733498, "post_id": 53753314, "comment_id": 94391235, "body": "@beezle will you update your question and remove the oversimplification any time soon?"}, {"owner": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "edited": false, "score": 0, "creation_date": 1544739437, "post_id": 53753314, "comment_id": 94393529, "body": "@Josu&#233;Cortina unfortunately, the full project is pretty large, and since it&#39;s my employer&#39;s property, it&#39;s not mine to divulge. I ended up circumventing the problem by divorcing the call to execute the script from the file the class was in, and creating a script at the root level to call it, like I treat the rest of my scripts. Thanks."}], "tags": [], "owner": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "is_accepted": true, "score": 1, "last_activity_date": 1544660726, "last_edit_date": 1544660726, "creation_date": 1544660377, "answer_id": 53753314, "question_id": 53753114, "link": "https://stackoverflow.com/questions/53753114/moved-a-script-into-a-directory-imports-now-failing/53753314#53753314", "title": "Moved a script into a directory, imports now failing", "body": "<p>python cant find the module pha, you need to change your import statement to <code>import libclass</code> / <code>from libclass import *</code> in myScript.py, cause both scripts are now side by side under the same directory</p>\n"}], "owner": {"reputation": 35, "user_id": 10553510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kebmr.jpg?s=128&g=1", "display_name": "beezle", "link": "https://stackoverflow.com/users/10553510/beezle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53753314, "answer_count": 1, "score": 1, "last_activity_date": 1544662487, "creation_date": 1544658638, "last_edit_date": 1544662487, "question_id": 53753114, "link": "https://stackoverflow.com/questions/53753114/moved-a-script-into-a-directory-imports-now-failing", "title": "Moved a script into a directory, imports now failing", "body": "<p>I'm using Visual Studio Code. I had a python script that was working, but realized that I'd like to make it a class for other scripts to use. The files were structured as follows:</p>\n\n<pre><code>pha\n   libclass.py\n   __init.py__\nmyScript.py\n</code></pre>\n\n<p>And it worked fine. <code>myScript.py</code> imported <code>pha.libclass</code> without a problem. Wanting to add <code>myScript.py</code> to my library, I moved it into the <code>pha</code> folder</p>\n\n<pre><code>pha\n    libclass.py\n    __init.py__\n    myScript.py\n</code></pre>\n\n<p>And when I try to run it now, the <code>from pha.libclass import *</code> call causes an error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Exception has occurred: ModuleNotFoundError\nNo Module named 'pha'\n</code></pre>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["python", "pyqt", "pyqt4", "qpushbutton"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1544660787, "last_edit_date": 1544660787, "creation_date": 1544660478, "answer_id": 53753327, "question_id": 53753039, "link": "https://stackoverflow.com/questions/53753039/qpushbutton-toggled-connection-does-not-seems-to-be-trigger-at-the-start/53753327#53753327", "title": "QPushButton toggled connection does not seems to be trigger at the start", "body": "<p>The signal is emited when there is a change of state and notify the slots that are connected up to that moment. When a new slot is connected, it will only be notified if there is a change of status after the connection so it is always advisable to update the status as signals. On the other hand it is not necessary to create setInfoVis() method since toggled transmits the state information.</p>\n\n<pre><code>class MyWindow(QtGui.QWidget):\n    def __init__(self):\n        super(MyWindow, self).__init__()\n        # ...\n        self.informationVisBtn.toggled.connect(self.toggleVisibility)\n\n        # update the state it has since the connection\n        # was made after the state change\n        self.toggleVisibility(\n                self.informationVisBtn.isChecked()\n            )\n\n    @QtCore.pyqtSlot(bool)\n    def toggleVisibility(self, value):\n        self.uiInformationFrame.setVisible(value)\n        self.informationVisBtn.setText(\"-\" if value else \"+\")\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 53753327, "answer_count": 1, "score": 1, "last_activity_date": 1544660787, "creation_date": 1544658022, "last_edit_date": 1544659583, "question_id": 53753039, "link": "https://stackoverflow.com/questions/53753039/qpushbutton-toggled-connection-does-not-seems-to-be-trigger-at-the-start", "title": "QPushButton toggled connection does not seems to be trigger at the start", "body": "<p>I am connecting a QPushButton in which it will either hide/ show the widgets within a Frame.</p>\n\n<p>I loaded/ created my GUI using the <code>.ui</code> method.</p>\n\n<p>For this QPushButton, I have set and checked the attribute <code>setChecked</code>.</p>\n\n<pre><code>class MyWindow(QtGui.QWidget):\n    def __init__(self):\n        ...\n        # self.informationVisBtn, `setChecked` and `setCheckable` field is checked in the .ui file\n        self.informationVisBtn.toggled.connect(self.setInfoVis)\n\n    def setInfoVis(self):\n            self.toggleVisibility(\n                self.informationVisBtn.isChecked()\n            )\n\n    def toggleVisibility(self, value):\n        if value:\n            self.uiInformationFrame.show()\n            self.informationVisBtn.setText(\"-\")\n        else:\n            self.uiInformationFrame.hide()\n            self.informationVisBtn.setText(\"+\")\n</code></pre>\n\n<p>While loading my code on the first try, I noticed that the <code>informationVisBtn</code>, while it is checked, the frame is being shown but the  text did not gets set to <code>-</code> and instead it remains as a <code>+</code> as set in my .ui file.</p>\n\n<p>Unless in the <code>__init__()</code>, if I add in <code>setInfoVis()</code> before setting the connection, only will the text be populated correctly.</p>\n\n<p>Does the use of <code>toggled</code> not trigger the state at the start? Appreciate in advance for any replies.</p>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1544657920, "post_id": 53752980, "comment_id": 94358888, "body": "Is this class example <i>purposefully</i> trying to be difficult?  For example, why say <code>subset[:]</code>, when just <code>subset</code> will do... why not go with <code>subset[0:len(subset)]</code> as well  ;)"}, {"owner": {"reputation": 566, "user_id": 5348722, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/K5zG2.jpg?s=128&g=1", "display_name": "Bhagyesh", "link": "https://stackoverflow.com/users/5348722/bhagyesh"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1544658047, "post_id": 53752980, "comment_id": 94358921, "body": "@Kingsley ask myself the same question..."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 5, "creation_date": 1544658351, "post_id": 53752980, "comment_id": 94359000, "body": "@Kingsley, the <code>[:]</code> forces a <i>copy</i> of <code>subset</code>.  An alternative would be <code>list(subset)</code>.  However, just saying <code>subset</code> as you suggest damages the result."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1544659326, "post_id": 53752980, "comment_id": 94359265, "body": "Based on <a href=\"https://stackoverflow.com/a/6542458/1730895\">stackoverflow.com/a/6542458/1730895</a> , this same result can be obtained with <code>itertools</code> in 3 lines."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1544659355, "post_id": 53752980, "comment_id": 94359276, "body": "The best way to understand programs like this is to pretend you&#39;re the computer. Write down the variables on a piece of paper, and step through the program changing their values as instructed."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 2, "creation_date": 1544659377, "post_id": 53752980, "comment_id": 94359286, "body": "@Kingsley But then you wouldn&#39;t learn about recursion, which is the pedagogical goal here."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544659703, "post_id": 53752980, "comment_id": 94359369, "body": "@Barmar - Agreed somewhat, but this example mixes up python list operations with the recursion example.  It&#39;s unnecessarily complex. IMHO the factorial calculation is a much better example of recursion, since the reader isn&#39;t having to spend time deciphering cryptic code inside the function body. <a href=\"https://www.programiz.com/python-programming/examples/factorial-recursion\" rel=\"nofollow noreferrer\">programiz.com/python-programming/examples/factorial-recursio&zwnj;&#8203;n</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1544659790, "post_id": 53752980, "comment_id": 94359389, "body": "@Kingsley Maybe factorial is <i>too</i> simple, the instructor wanted to demonstrate something more complex."}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "is_accepted": false, "score": 1, "last_activity_date": 1544670289, "last_edit_date": 1544670289, "creation_date": 1544660433, "answer_id": 53753320, "question_id": 53752980, "link": "https://stackoverflow.com/questions/53752980/explain-subset-creation-with-recursion/53753320#53753320", "title": "Explain subset creation with recursion", "body": "<p>I would say the best way to understand how a function is operating is tracing its variable thorugh its execution:</p>\n\n<pre><code>def subsets(nums):\n\n    def helper(subset, i):\n        print(  \"|   \"*i + \"*\"*90)\n        print(  \"|   \"*i + \"*{:^88}*\".format(\"STARTING OF helper (i={})\".format(i)))\n        print(  \"|   \"*i + \"*{:^88}*\".format('res= {}, subset = {}'.format( res,subset,len(nums))))\n        print(  \"|   \"*i + \"*{:^88}*\".format(' '))\n        if i == len(nums):\n            print( \"|   \"*i + \"*{:^88}*\".format('APPENDING \"{}\" to res'.format( (subset[:]))))\n            res.append(subset[:])\n        else:\n            helper(subset, i+1)\n            print( \"|   \"*i + \"*{:^88}*\".format('INTERMEDIATE STEP'.format( res)))\n            print( \"|   \"*i + \"*{:^88}*\".format('APPENDING \"{}\" to subset'.format( nums[i])))\n            subset.append(nums[i])\n            helper(subset, i+1)\n            print( \"|   \"*i + \"*{:^88}*\".format('INTERMEDIATE STEP'.format( res)))\n            print( \"|   \"*i + \"*{:^88}*\".format('REMOVING \"{}\" from subset'.format( nums[i])))\n            subset.remove(nums[i])\n\n        print( \"|   \"*i + \"*{:^88}*\".format('res={}'.format( res)))\n        print( \"|   \"*i + \"*{:^88}*\".format('END OF helper (i={})'.format( i)))\n        print( \"|   \"*i + \"*\"*90)\n        print( \"|   \"*i + \" \"*90)\n        print( \"|   \"*i + \" \"*90)\n\n    res = []\n    helper([], 0)\n    return res\n\nprint(subsets([\"a\",\"b\",\"c\"]))\n</code></pre>\n\n<p>which will produce</p>\n\n<pre><code>******************************************************************************************\n*                                STARTING OF helper (i=0)                                *\n*                                  res= [], subset = []                                  *\n*                                                                                        *\n|   ******************************************************************************************\n|   *                                STARTING OF helper (i=1)                                *\n|   *                                  res= [], subset = []                                  *\n|   *                                                                                        *\n|   |   ******************************************************************************************\n|   |   *                                STARTING OF helper (i=2)                                *\n|   |   *                                  res= [], subset = []                                  *\n|   |   *                                                                                        *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *                                  res= [], subset = []                                  *\n|   |   |   *                                                                                        *\n|   |   |   *                                 APPENDING \"[]\" to res                                  *\n|   |   |   *                                        res=[[]]                                        *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                APPENDING \"c\" to subset                                 *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *                               res= [[]], subset = ['c']                                *\n|   |   |   *                                                                                        *\n|   |   |   *                                APPENDING \"['c']\" to res                                *\n|   |   |   *                                    res=[[], ['c']]                                     *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                REMOVING \"c\" from subset                                *\n|   |   *                                    res=[[], ['c']]                                     *\n|   |   *                                  END OF helper (i=2)                                   *\n|   |   ******************************************************************************************\n|   |                                                                                             \n|   |                                                                                             \n|   *                                   INTERMEDIATE STEP                                    *\n|   *                                APPENDING \"b\" to subset                                 *\n|   |   ******************************************************************************************\n|   |   *                                STARTING OF helper (i=2)                                *\n|   |   *                            res= [[], ['c']], subset = ['b']                            *\n|   |   *                                                                                        *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *                            res= [[], ['c']], subset = ['b']                            *\n|   |   |   *                                                                                        *\n|   |   |   *                                APPENDING \"['b']\" to res                                *\n|   |   |   *                                 res=[[], ['c'], ['b']]                                 *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                APPENDING \"c\" to subset                                 *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *                      res= [[], ['c'], ['b']], subset = ['b', 'c']                      *\n|   |   |   *                                                                                        *\n|   |   |   *                             APPENDING \"['b', 'c']\" to res                              *\n|   |   |   *                           res=[[], ['c'], ['b'], ['b', 'c']]                           *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                REMOVING \"c\" from subset                                *\n|   |   *                           res=[[], ['c'], ['b'], ['b', 'c']]                           *\n|   |   *                                  END OF helper (i=2)                                   *\n|   |   ******************************************************************************************\n|   |                                                                                             \n|   |                                                                                             \n|   *                                   INTERMEDIATE STEP                                    *\n|   *                                REMOVING \"b\" from subset                                *\n|   *                           res=[[], ['c'], ['b'], ['b', 'c']]                           *\n|   *                                  END OF helper (i=1)                                   *\n|   ******************************************************************************************\n|                                                                                             \n|                                                                                             \n*                                   INTERMEDIATE STEP                                    *\n*                                APPENDING \"a\" to subset                                 *\n|   ******************************************************************************************\n|   *                                STARTING OF helper (i=1)                                *\n|   *                  res= [[], ['c'], ['b'], ['b', 'c']], subset = ['a']                   *\n|   *                                                                                        *\n|   |   ******************************************************************************************\n|   |   *                                STARTING OF helper (i=2)                                *\n|   |   *                  res= [[], ['c'], ['b'], ['b', 'c']], subset = ['a']                   *\n|   |   *                                                                                        *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *                  res= [[], ['c'], ['b'], ['b', 'c']], subset = ['a']                   *\n|   |   |   *                                                                                        *\n|   |   |   *                                APPENDING \"['a']\" to res                                *\n|   |   |   *                       res=[[], ['c'], ['b'], ['b', 'c'], ['a']]                        *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                APPENDING \"c\" to subset                                 *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *            res= [[], ['c'], ['b'], ['b', 'c'], ['a']], subset = ['a', 'c']             *\n|   |   |   *                                                                                        *\n|   |   |   *                             APPENDING \"['a', 'c']\" to res                              *\n|   |   |   *                 res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c']]                  *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                REMOVING \"c\" from subset                                *\n|   |   *                 res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c']]                  *\n|   |   *                                  END OF helper (i=2)                                   *\n|   |   ******************************************************************************************\n|   |                                                                                             \n|   |                                                                                             \n|   *                                   INTERMEDIATE STEP                                    *\n|   *                                APPENDING \"b\" to subset                                 *\n|   |   ******************************************************************************************\n|   |   *                                STARTING OF helper (i=2)                                *\n|   |   *      res= [[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c']], subset = ['a', 'b']       *\n|   |   *                                                                                        *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *      res= [[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c']], subset = ['a', 'b']       *\n|   |   |   *                                                                                        *\n|   |   |   *                             APPENDING \"['a', 'b']\" to res                              *\n|   |   |   *           res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b']]            *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                APPENDING \"c\" to subset                                 *\n|   |   |   ******************************************************************************************\n|   |   |   *                                STARTING OF helper (i=3)                                *\n|   |   |   *res= [[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b']], subset = ['a', 'b', 'c']*\n|   |   |   *                                                                                        *\n|   |   |   *                           APPENDING \"['a', 'b', 'c']\" to res                           *\n|   |   |   *   res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]   *\n|   |   |   *                                  END OF helper (i=3)                                   *\n|   |   |   ******************************************************************************************\n|   |   |                                                                                             \n|   |   |                                                                                             \n|   |   *                                   INTERMEDIATE STEP                                    *\n|   |   *                                REMOVING \"c\" from subset                                *\n|   |   *   res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]   *\n|   |   *                                  END OF helper (i=2)                                   *\n|   |   ******************************************************************************************\n|   |                                                                                             \n|   |                                                                                             \n|   *                                   INTERMEDIATE STEP                                    *\n|   *                                REMOVING \"b\" from subset                                *\n|   *   res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]   *\n|   *                                  END OF helper (i=1)                                   *\n|   ******************************************************************************************\n|                                                                                             \n|                                                                                             \n*                                   INTERMEDIATE STEP                                    *\n*                                REMOVING \"a\" from subset                                *\n*   res=[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]   *\n*                                  END OF helper (i=0)                                   *\n******************************************************************************************\n\n\n[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]\n</code></pre>\n\n<p>For a more in-depth explanation, helper as you can see will start executing with an empty list at level 0.</p>\n\n<p>For every level of helper lower than len(nums) the recursive function will branch into 2 new recursive function that will either keep subset as is or add the ith element of nums to it.</p>\n\n<p>For the last level, subset will be added to the result it can be easly visualized with some ascii art graph</p>\n\n<pre><code>nums = ['a','b','c']\nlevel:   0='a'   1='b'     2='c'         3=add_to_res\n         [] ---&gt; [] -----&gt; [] ---------&gt; []\n          |       |         |__________&gt; ['c']\n          |       |\n          |       |______&gt; ['b'] ------&gt; ['b']\n          |                 |__________&gt; ['b','c']\n          |\n          |____&gt; ['a'] --&gt; ['a'] ------&gt; ['a']\n                    |       |__________&gt; ['a','c']\n                    |\n                    |____&gt; ['a','b'] --&gt; ['a','b']\n                            |__________&gt; ['a','b','c']\n</code></pre>\n\n<p>From a more math oriented point of view you can consider this starting from the last iteration:</p>\n\n<ul>\n<li>Take cross-producat of the set [[],'c'] with [[],'b'] = [[],'b','c',['b','c']]</li>\n<li>Than take the cross-product of the result with [[],'a'] = [[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1544660547, "creation_date": 1544660547, "answer_id": 53753334, "question_id": 53752980, "link": "https://stackoverflow.com/questions/53752980/explain-subset-creation-with-recursion/53753334#53753334", "title": "Explain subset creation with recursion", "body": "<p>I'm only going to address the relationship of the two functions, not the recursive algorithm.</p>\n\n<p>The inner function <code>helper</code> is the main routine, the outer function <code>subsets</code> just sets up the arguments for the inner function.  Let's rewrite this function with more explicit variable names and a slight change:</p>\n\n<pre><code>def subsets(elements):\n    result = []\n\n    def subsets_recursive(subset, index):\n        if index == len(elements):\n            result.append(subset[:])\n        else:\n            subsets_recursive(subset, index + 1)\n            subset.append(elements[index])\n            subsets_recursive(subset, index + 1)\n            del subset[-1]\n\n    subsets_recursive([], 0)\n\n    return result\n\nprint(subsets(['a', 'b', 'c']))\n</code></pre>\n\n<p>I substituted <code>del subset[-1]</code> for <code>subset.remove(nums[i])</code> as <code>remove()</code> implies a search but we know we added the new element to the end of the <code>subsets</code> list and that's where it still is when it comes time to remove it.  (I.e. efficiency.)</p>\n\n<p>Now, let's rework the code to eliminate the outer function:</p>\n\n<pre><code>def subsets_recursive(elements, subset=[], index=0):  # dangerous default value\n    result = []\n\n    if index == len(elements):\n        result.append(subset[:])\n    else:\n        result.extend(subsets_recursive(elements, subset, index + 1))\n        subset.append(elements[index])\n        result.extend(subsets_recursive(elements, subset, index + 1))\n        del subset[-1]\n\n    return result\n\nprint(subsets_recursive(['a', 'b', 'c']))\n</code></pre>\n\n<p>Although the <code>subset=[]</code> is considered a dangerous default (being a container), in this case it's mostly benign as whatever gets put into <code>subset</code> gets taken out again, <em>if</em> everything completes normally, so it's clean for the next call.  Though that's a big <em>if</em>.</p>\n\n<p>To get rid of the <em>dangerous</em> default, and hide from the user of our routine the two extra arguments we don't want them to ever set, we wrap it in a non recursive routine that just takes one argument and internally sets up the call the way we want it.  Which leads us back to where we started but this time implemented the way I might do it:</p>\n\n<pre><code>def subsets(elements):\n\n    def subsets_recursive(subset, index):\n        result = []\n\n        if index == len(elements):\n            result.append(subset[:])\n        else:\n            result.extend(subsets_recursive(subset, index + 1))\n            subset.append(elements[index])\n            result.extend(subsets_recursive(subset, index + 1))\n            del subset[-1]\n\n        return result\n\n    return subsets_recursive([], 0)\n\nprint(subsets(['a', 'b', 'c']))\n</code></pre>\n\n<p>As I prefer proper <code>return</code> calls over <em>side effects</em>.</p>\n"}], "owner": {"reputation": 566, "user_id": 5348722, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/K5zG2.jpg?s=128&g=1", "display_name": "Bhagyesh", "link": "https://stackoverflow.com/users/5348722/bhagyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544670289, "creation_date": 1544657607, "last_edit_date": 1544661254, "question_id": 53752980, "link": "https://stackoverflow.com/questions/53752980/explain-subset-creation-with-recursion", "title": "Explain subset creation with recursion", "body": "<p>In my class we went over subset creation with recursion.  I understood it to an extent, though I am lost with respect to how the linked function works:</p>\n\n<pre><code>   def subsets(nums):\n\n    def helper(subset, i):\n        if i == len(nums):\n            res.append(subset[:])\n        else:\n            helper(subset, i+1)\n            subset.append(nums[i])\n            helper(subset, i+1)\n            subset.remove(nums[i])\n\n    res = []\n    helper([], 0)\n    return res\n\nprint(subsets([\"a\",\"b\",\"c\"]))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[], ['c'], ['b'], ['b', 'c'], ['a'], ['a', 'c'], ['a', 'b'], ['a', 'b', 'c']]\n</code></pre>\n"}, {"tags": ["python", "numpy", "argmax"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1544657859, "post_id": 53752977, "comment_id": 94358870, "body": "are you looking to find the max value for just this case or any slice in general, like <code>array[i][j]</code>?"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1544657895, "post_id": 53752977, "comment_id": 94358881, "body": "Your expected output of <code>2</code> is the maximum <i>value</i>, not the <i>argument of the maximum</i> (&quot;argmax&quot;) value. Do you actually expect to get the coordinates along the first two dimensions <i>of</i> the maximum value, which would be <code>(1, 1)</code>?"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1544658129, "post_id": 53752977, "comment_id": 94358944, "body": "Actually, re-reading your question, if you are looking for the argument in the last axis that points to the maximum value, you can use <code>array[1,1,:].argmax()</code>"}, {"owner": {"reputation": 19, "user_id": 9216598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f69e28d166d71bcc66b5d9f8803906f?s=128&d=identicon&r=PG&f=1", "display_name": "Ok iDoki", "link": "https://stackoverflow.com/users/9216598/ok-idoki"}, "edited": false, "score": 0, "creation_date": 1544721107, "post_id": 53752977, "comment_id": 94385642, "body": "Sorry I was working. I expect to find the max value for any value in the array, like the top comment said array[i][j]. I want to compare all values for the z axis and return the one that has the biggest value. In the example I want as an input the first two axes [i][j] and then check for all possible values that the third axes can be [z]. In the example: [1][1][0] and [1][1][1] and since the second has a higher value I want that as return"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9216598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f69e28d166d71bcc66b5d9f8803906f?s=128&d=identicon&r=PG&f=1", "display_name": "Ok iDoki", "link": "https://stackoverflow.com/users/9216598/ok-idoki"}, "edited": false, "score": 0, "creation_date": 1544721963, "post_id": 53753028, "comment_id": 94386108, "body": "That works perfectly, thanks a lot! Really appreciate it."}, {"owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "reply_to_user": {"reputation": 19, "user_id": 9216598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f69e28d166d71bcc66b5d9f8803906f?s=128&d=identicon&r=PG&f=1", "display_name": "Ok iDoki", "link": "https://stackoverflow.com/users/9216598/ok-idoki"}, "edited": false, "score": 0, "creation_date": 1544753244, "post_id": 53753028, "comment_id": 94396944, "body": "If the answer fixed your problem, you should <a href=\"https://stackoverflow.com/help/someone-answers\">mark it as accepted</a>"}, {"owner": {"reputation": 19, "user_id": 9216598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f69e28d166d71bcc66b5d9f8803906f?s=128&d=identicon&r=PG&f=1", "display_name": "Ok iDoki", "link": "https://stackoverflow.com/users/9216598/ok-idoki"}, "edited": false, "score": 0, "creation_date": 1544824197, "post_id": 53753028, "comment_id": 94426251, "body": "Sorry I didnt know. Thank you!"}], "tags": [], "owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "is_accepted": true, "score": 0, "last_activity_date": 1544658458, "last_edit_date": 1544658458, "creation_date": 1544657952, "answer_id": 53753028, "question_id": 53752977, "link": "https://stackoverflow.com/questions/53752977/getting-argmax-of-a-2d-array/53753028#53753028", "title": "Getting ArgMax of a 2d Array", "body": "<p>For what you describe, you could just do:</p>\n\n<pre><code>array[1,1].max()\n</code></pre>\n\n<p>which will return 2. If you instead wanted the maximum value along the last axis for every combination of the first two axes, you would do:</p>\n\n<pre><code>array.max(axis=-1)\n</code></pre>\n\n<p>which in your case will return a 3x3 array of the maximum values along the last axis:</p>\n\n<pre><code>[[0. 0. 0.]\n [0. 2. 0.]\n [0. 0. 0.]]\n</code></pre>\n\n<p>If you want the <em>indices</em> of the maximum value, you would instead use <code>argmax</code>, just like you would <code>max</code> above:</p>\n\n<pre><code>array[1,1].argmax()\n</code></pre>\n\n<p>which in this case returns just <code>1</code>. You would then have to append that to <code>(1,1)</code> to get the complete index to the maximum value in your original array (ie <code>(1,1,1)</code>).</p>\n"}], "owner": {"reputation": 19, "user_id": 9216598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f69e28d166d71bcc66b5d9f8803906f?s=128&d=identicon&r=PG&f=1", "display_name": "Ok iDoki", "link": "https://stackoverflow.com/users/9216598/ok-idoki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 53753028, "answer_count": 1, "score": 0, "last_activity_date": 1544658458, "creation_date": 1544657592, "question_id": 53752977, "link": "https://stackoverflow.com/questions/53752977/getting-argmax-of-a-2d-array", "title": "Getting ArgMax of a 2d Array", "body": "<p>so my questions is pretty straight forward. I have a 3-d array and would like to get the maximal value alone the first two axes.</p>\n\n<pre><code>import numpy as np\narray = np.zeros((3,3,2))\narray[1][1][0] = 1\narray[1][1][1] = 2\n</code></pre>\n\n<p>How do I now check along [1][1] which value has the max value? I would suspect to use np.argmax() but I googled for ages and could not find a working solution. Thank you in advance!</p>\n\n<p>To be clear, I want my return to be 2, just a single integer.</p>\n"}, {"tags": ["python", "discord"], "comments": [{"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 2, "creation_date": 1544657831, "post_id": 53752969, "comment_id": 94358861, "body": "Have you tried &#39;\\U0001F611&#39; ? Aren&#39;t you missing &#39;await&#39;? <a href=\"https://www.reddit.com/r/discordapp/comments/8j1ywl/discordpy_how_to_use_add_reaction/\" rel=\"nofollow noreferrer\">reddit.com/r/discordapp/comments/8j1ywl/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658037, "post_id": 53752969, "comment_id": 94358919, "body": "Thanks, I think await was needed, but I am still getting errors, it goes like this:"}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658067, "post_id": 53752969, "comment_id": 94358929, "body": "if message.content.startswith(&#39;[react&#39;):         author=message.author         await discord.Client.add_reaction(message.author,&#39;\\U0001F611&#39;)"}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658089, "post_id": 53752969, "comment_id": 94358935, "body": "and the error still is : Ignoring exception in on_message Traceback (most recent call last):   File &quot;/home/runner/.site-packages/discord/client.py&quot;, line 307, in _run_event     yield from getattr(self, event)(*args, **kwargs)   File &quot;main.py&quot;, line 18, in on_message     await discord.Client.add_reaction(message.author,&#39;\\U0001F611&#39;) TypeError: add_reaction() missing 1 required positional argument: &#39;emoji&#39;"}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658101, "post_id": 53752969, "comment_id": 94358939, "body": "sorry comments are weird, that might be hard to read"}, {"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658432, "post_id": 53752969, "comment_id": 94359022, "body": "Also, I guess you should pass message and not message.author."}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658700, "post_id": 53752969, "comment_id": 94359103, "body": "@sehigle message works, but the whole emoji thing won&#39;t work, I am trying &#39;\\U0001F611&#39; too."}, {"owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544659527, "post_id": 53752969, "comment_id": 94359326, "body": "I got it! thanks to @sehigle original comment, the proper code was :                await client.add_reaction(message,&quot;\\U0001F44D&quot;) - (for thumbs up)                                 I had DISCORD in the start, when it is editing the clients message! Thanks alot the people here are always so helpful"}], "owner": {"reputation": 39, "user_id": 10663874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d8dc20ad4a4c5c0588866c121fa141?s=128&d=identicon&r=PG&f=1", "display_name": "ThePatchWorkHoax", "link": "https://stackoverflow.com/users/10663874/thepatchworkhoax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544659611, "creation_date": 1544657462, "question_id": 53752969, "link": "https://stackoverflow.com/questions/53752969/python-bot-adding-reactions", "title": "Python bot, adding reactions", "body": "<p>I am making a python bot, that when someone types [react, the bot will react with (\ud83d\ude11) or in Unicode (U+1F611)</p>\n\n<p>I currently have this code:</p>\n\n<pre><code>async def on_message(message):\nif message.content.startswith('[react'):\n  author=message.author\n  discord.Client.add_reaction(author,'U+1F611')\n</code></pre>\n\n<p>when I try this and type [react, I get this error:</p>\n\n<pre><code>Ignoring exception in on_message\nTraceback (most recent call last):\n File \"/home/runner/.site-packages/discord/client.py\", line 307, in \n_run_event\nyield from getattr(self, event)(*args, **kwargs)\nFile \"main.py\", line 21, in on_message\ndiscord.Client.add_reaction(author,'U+1F611')\nTypeError: add_reaction() missing 1 required positional argument: 'emoji\n</code></pre>\n\n<p>If anyone knows what is wrong, I would be very thankful.</p>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544656990, "post_id": 53752893, "comment_id": 94358613, "body": "Loops are really your only choice here. Note, <code>CountVectorizer</code> <i>uses loops</i>"}, {"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544657486, "post_id": 53752893, "comment_id": 94358778, "body": "You could try converting the strings to some numbers and operating on them."}], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "is_accepted": true, "score": 1, "last_activity_date": 1544659138, "creation_date": 1544659138, "answer_id": 53753184, "question_id": 53752893, "link": "https://stackoverflow.com/questions/53752893/vectorize-pandas-dataframe-by-n-gram-of-characters-and-append-column-name/53753184#53753184", "title": "Vectorize Pandas DataFrame By N-Gram of Characters, and Append Column Name", "body": "<p>Not sure if this is exactly what you want, but perhaps you can use <code>CountVectorizer</code> with a character analyzer, and iterate over the columns to gram.</p>\n\n<pre><code>import pandas as pd\nfrom sklearn.feature_extraction.text import CountVectorizer\n\ndata = pd.DataFrame(\n    {\n        'first_name': ['John', 'Ed'],\n        'last_name': ['Smith', 'Bean']\n    }\n)\n\nvec = CountVectorizer(analyzer = 'char', ngram_range = (3, 3))\n\noutput = pd.DataFrame()\n\nfor i in data.columns:\n\n    pre = pd.DataFrame(vec.fit_transform(data[i]).toarray(), columns = [i + '_' + j for j in vec.get_feature_names()])\n\n    output = pd.concat([output, pre], axis = 1)\n\npd.concat([data, output], axis = 1)\n</code></pre>\n\n<p>Gives:</p>\n\n<p><a href=\"https://i.stack.imgur.com/J0JmF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J0JmF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or perhaps you'd like the names as values?</p>\n\n<pre><code>output * output.columns\n</code></pre>\n\n<p>Gives:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pbR2r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pbR2r.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 67, "user_id": 7444443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdb47262c002c8db13400ed45623442?s=128&d=identicon&r=PG", "display_name": "Shazbots", "link": "https://stackoverflow.com/users/7444443/shazbots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 53753184, "answer_count": 1, "score": 0, "last_activity_date": 1544718672, "creation_date": 1544656867, "last_edit_date": 1544718672, "question_id": 53752893, "link": "https://stackoverflow.com/questions/53752893/vectorize-pandas-dataframe-by-n-gram-of-characters-and-append-column-name", "title": "Vectorize Pandas DataFrame By N-Gram of Characters, and Append Column Name", "body": "<p>I am trying to vectorize a pandas dataframe into separate n-grams of chracters. There is a caveat though, I want the column name to be part of the character sequence. For example, let's pretend this is the raw data:</p>\n\n<pre><code>First Name, Last Name\nJohn, Smith\n</code></pre>\n\n<p>and I am using character n-grams of length 3.</p>\n\n<p>I want the following n-grams to be generated:</p>\n\n<pre><code>\"First Name_Joh\", \n\"First Name_ohn\", \n\"Last Name_Smi\", \n\"Last Name_mit\", \n\"Last Name_ith\"\n</code></pre>\n\n<p>so I can create a one-hot-encoding for that vector. I want the column name to be part of the character n-gram sequence. For what I am working on, I don't want all the n-grams to be lumped together. (Sorry if I'm not using the correct terms; I'm not good with explaining this material.)</p>\n\n<p>^ I know how to this this with loops, in an inefficient way; however I need this to be scalable and reusable, so I want to use something like sklearn's CountVectorizer to do this. How can I do this? </p>\n"}, {"tags": ["python", "python-imaging-library", "stack-overflow"], "comments": [{"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544657011, "post_id": 53752886, "comment_id": 94358618, "body": "Recursion is just pretty bad. You could just go through the height and add each pixel in each horizontal line to &#39;memo&#39;."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544660645, "post_id": 53752886, "comment_id": 94359559, "body": "You could try making <code>memo</code> a <a href=\"https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset\" rel=\"nofollow noreferrer\"><code>set</code></a> of <code>(x, y)</code> tuples instead of a <code>list</code> which will automatically eliminate all the duplicates that are getting put into it. This will not only greatly reduce the amount of memory needed, it will also likely speed up all the membership-testing that&#39;s being done."}, {"owner": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1544661126, "post_id": 53752886, "comment_id": 94359675, "body": "Thanks, martineau. I didn`t know about the set object before. I am updating memo with the .add() method now. It is a good tip, but the code still runs into the same problem."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1545036777, "post_id": 53752886, "comment_id": 94471597, "body": "Huh? So if you tell me pixel [63,84] is in your wedge, how can I tell if the pixel beside it is in your wedge? Do you tell me the origin of the lines? Or the formula of the lines?"}, {"owner": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1547067375, "post_id": 53752886, "comment_id": 95068936, "body": "I have a list with all the coordinate pixels in those lines."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1544660614, "post_id": 53753157, "comment_id": 94359548, "body": "Thank you, Jeremiah. I don<code>t understand your code, but I think you are finding the wedge based on the red coloring, right? If this is the case, it will not work, as I colored that wedge to illustrate a region where my code worked (in finding the coordinates of all those points). So, I</code>m trying to find the pixel coordinates inside the known wedge boundaries (pixels_1, pixels_2 and the image edges)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "reply_to_user": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1544661613, "post_id": 53753157, "comment_id": 94359764, "body": "Oh sorry. I should have commented it better. No, the red coloring doesn\u2019t matter. I\u2019m using a sober filter to find the edges of the objects in the image, thresholding to convert the edge image to black &amp; white, and then labeling each object in the image that isn\u2019t connected to any other objects. It will work As is If the wedge is at the top of the image and doesn\u2019t cross the noise in the image below it.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "reply_to_user": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1544661618, "post_id": 53753157, "comment_id": 94359765, "body": "If the wedge isn\u2019t on top, it won\u2019t be the first object in the object array, so the wedge won\u2019t be at index [0]. If it crosses the noise, the way the noise is cleared will have to be tweaked so it doesn\u2019t clear out the wedge"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "is_accepted": false, "score": 0, "last_activity_date": 1544658938, "creation_date": 1544658938, "answer_id": 53753157, "question_id": 53752886, "link": "https://stackoverflow.com/questions/53752886/find-all-pixel-coordinates-in-a-specified-region-using-pil-kernel-crashes/53753157#53753157", "title": "Find all pixel coordinates in a specified region using PIL, kernel crashes", "body": "<p>With only that one image, it's hard to tell if this will be fully generalizable for your purposes, but it does work in this case.  IT will need some tweaking if the wedge isn't always on the top edge or if the image content isn't so easily filtered out.  You seem to have a pretty good handle on locating the wedge amongst the image noise though so that part probably doesn't matter to you.  I'll include it just in case, but the important part for you is probably at the bottom of the code block.  The rest is just how I isolated the wedge  You should be able to label the objects in the image, and then use the lines as the bounding point for the pixels.</p>\n\n<pre><code>import imageio\nimport skimage\nimport numpy\nimport scipy.ndimage.filters\nimport skimage.io\nimport skimage.filters\nimport skimage.morphology\n\n\nimage = imageio.imread(r'C:\\Users\\Jeremiah\\Pictures\\wedge.png')\nimage_array = numpy.float64(image)\n\nR_x = scipy.ndimage.filters.correlate(image_array[:, :, 0], [[1, 2, 1], [0, 0, 0], [-1, -2, -1]])\nG_x = scipy.ndimage.filters.correlate(image_array[:, :, 1], [[1, 2, 1], [0, 0, 0], [-1, -2, -1]])\nB_x = scipy.ndimage.filters.correlate(image_array[:, :, 2], [[1, 2, 1], [0, 0, 0], [-1, -2, -1]])\n\nR_y = scipy.ndimage.filters.correlate(image_array[:, :, 0], [[1, 0 , -1], [2, 0, -2], [1, 0, -1]])\nG_y = scipy.ndimage.filters.correlate(image_array[:, :, 1], [[1, 0 , -1], [2, 0, -2], [1, 0, -1]])\nB_y = scipy.ndimage.filters.correlate(image_array[:, :, 2], [[1, 0 , -1], [2, 0, -2], [1, 0, -1]])\n\nJacobian_x = R_x**2 + G_x**2 + B_x**2\nJacobian_y = R_y**2 + G_y**2 + B_y**2\nJacobian_xy = R_x * R_y + G_x * G_y + B_x * B_y\nDeterminant = numpy.sqrt(numpy.fabs((Jacobian_x**2) - (2 * Jacobian_x * Jacobian_y) + (Jacobian_y**2) + 4 * (Jacobian_xy**2)))\nMaximum_Eigenvalue = (Jacobian_x + Jacobian_y + Determinant) / 2\nEdges = numpy.sqrt(Maximum_Eigenvalue)\n\nThreshold = skimage.filters.threshold_mean(Edges)\nBinary_Image = Edges &gt; Threshold    \nlabeled_Edges, features = scipy.ndimage.label(Edges)\n\nsliced = scipy.ndimage.find_objects(labeled_Edges)[0]\nslices = image[sliced]\n\n&gt;&gt;&gt;(slice(0, 36, None), slice(471, 508, None))\n&gt;&gt;&gt;[[[  0   0   0 255]\n   [  0   0   0 255]\n   [  0   0   0 255]\n   ...\n   [255  51  51 255]\n   [255 255 255 255]\n   [  0   0   0 255]]\n</code></pre>\n\n<p>The pixels you want are contained within those slices, no recursion needed...I think.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "edited": false, "score": 0, "creation_date": 1547067274, "post_id": 53813888, "comment_id": 95068893, "body": "Thank you, Mark Setchell. This is really interesting stuff, but unfortunately not useful for my problem. Ultimately, I want to analyse some images, so I will not change the color of any region. The only reason I colored the wedge red was to confirm that the code was correctly identifying the coordinates of all pixels inside that region. In fact, the only reason I was able to color the region was because I had already identified all those coordinates. I wrote new code using a few loops, but it is probably not the best solution. So I am still open to any ideas!"}], "tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 1, "last_activity_date": 1545045883, "last_edit_date": 1545045883, "creation_date": 1545044605, "answer_id": 53813888, "question_id": 53752886, "link": "https://stackoverflow.com/questions/53752886/find-all-pixel-coordinates-in-a-specified-region-using-pil-kernel-crashes/53813888#53813888", "title": "Find all pixel coordinates in a specified region using PIL, kernel crashes", "body": "<p>I think you actually want to run a <em>\"Connected Component Analysis\"</em>, or a <em>\"labelling\"</em> which assigns a unique number (label) to each <em>\"blob\"</em> of connected (touching) pixels.</p>\n\n<p>You can do that with <strong>OpenCV</strong>'s <code>findContours()</code> which is documented <a href=\"https://docs.opencv.org/3.4/d4/d73/tutorial_py_contours_begin.html\" rel=\"nofollow noreferrer\">here</a>, or you can use <strong>scipy</strong>'s <code>label()</code> which seems like fun to try out.</p>\n\n<p>I wanted to be sure my method works with more than one \"blob\" so I added two more lines of the same colour as your wedge:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7ZXQj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ZXQj.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code is pretty self-explanatory, but I wanted to draw your attention to a couple of things.</p>\n\n<p>The mask image I make is black everywhere except where the image is the same colour as the seed pixel and it is white in those places:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WaDmT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WaDmT.png\" alt=\"enter image description here\"></a></p>\n\n<p>The default SE (Structuring Element) to describe which pixels are considered connected to the central pixel is:</p>\n\n<pre><code>SE = 0 1 0\n     1 1 1\n     0 1 0\n</code></pre>\n\n<p>which is called 4-connected, because the central pixel is connected to the 4 pixels North, East, South and West of it. As your wedge is not rectangular, we need to also consider pixels diagonally touching as neighbours. That means 8-connected and looks like this:</p>\n\n<pre><code>SE = 1 1 1\n     1 1 1\n     1 1 1\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nfrom scipy import ndimage\nfrom scipy.ndimage import label, generate_binary_structure\nimport numpy as np\nfrom PIL import Image\n\n# Load image and ensure RGB - just in case palettised\nim = Image.open(\"sky.png\").convert(\"RGB\")\n\n# Make numpy array from image\nnpimage = np.array(im, dtype=np.uint8)\n\n# Assume we were told to take pixel [17,483] as our seed\nseed = npimage[17,483]\n\n# If we had been given a seed colour instead, e.g. red, we would do\n# seed = np.array((255,0,0), dtype=np.uint8)\n\n# Make greyscale mask image, generally black but white where same colour as seed\nmask = (np.all((npimage==seed),axis=-1)*255).astype(np.uint8) \n\n# The default SE (structuring element) is for 4-connectedness, i.e. only pixels North, South, East and West of another are considered connected.\n# Pixels in our wedge are 8-connected, i.e. N, NE, E, SE, S, SW, W, NW, so we need a corresponding SE\nSE = generate_binary_structure(2,2)   \n\n# Now run a labelling, or \"Connected Components Analysis\"\n# Each \"blob\" of connected pixels matching our seed will get assigned a unique number in the new image called \"labeled\"\nlabeled, nr_objects = ndimage.label(mask, structure=SE)\n\nprint('Num objects found: {}'.format(nr_objects))\n\n# Get label assigned to our blob, and its area\nourlabel = labeled[17,483]\narea     = np.bincount(labeled.flat)[ourlabel:ourlabel+1]\nprint('Our blob got label: {} and has area: {}'.format(ourlabel,area))\n\n# Now print list of pixels in our blob\nprint(*np.argwhere(labeled==ourlabel))\n</code></pre>\n\n<hr>\n\n<p>Here is the output:</p>\n\n<pre><code>Num objects found: 3\nOur blob got label: 1 and has area: [530]\n[  0 475] [  0 476] [  0 477] [  0 478] [  0 479] [  0 480] [  0 481] [  0 482] [  0 483] [  0 484] [  0 485] [  0 486] [  0 487] [  0 488] [  0 489] [  0 490] [  0 491] [  0 492] [  0 493] [  0 494] [  0 495] [  0 496] [  0 497] [  0 498] [  0 499] [  0 500] [  0 501] [  0 502] [  0 503] [  0 504] [  0 505] [  1 475] [  1 476] [  1 477] [  1 478] [  1 479] [  1 480] [  1 481] [  1 482] [  1 483] [  1 484] [  1 485] [  1 486] [  1 487] [  1 488] [  1 489] [  1 490] [  1 491] [  1 492] [  1 493] [  1 494] [  1 495] [  1 496] [  1 497] [  1 498] [  1 499] [  1 500] [  1 501] [  1 502] [  1 503] [  1 504] [  2 475] [  2 476] [  2 477] [  2 478] [  2 479] [  2 480] [  2 481] [  2 482] [  2 483] [  2 484] [  2 485] [  2 486] [  2 487] [  2 488] [  2 489] [  2 490] [  2 491] [  2 492] [  2 493] [  2 494] [  2 495] [  2 496] [  2 497] [  2 498] [  2 499] [  2 500] [  2 501] [  2 502] [  2 503] [  3 475] [  3 476] [  3 477] [  3 478] [  3 479] [  3 480] [  3 481] [  3 482] [  3 483] [  3 484] [  3 485] [  3 486] [  3 487] [  3 488] [  3 489] [  3 490] [  3 491] [  3 492] [  3 493] [  3 494] [  3 495] [  3 496] [  3 497] [  3 498] [  3 499] [  3 500] [  3 501] [  3 502] [  4 475] [  4 476] [  4 477] [  4 478] [  4 479] [  4 480] [  4 481] [  4 482] [  4 483] [  4 484] [  4 485] [  4 486] [  4 487] [  4 488] [  4 489] [  4 490] [  4 491] [  4 492] [  4 493] [  4 494] [  4 495] [  4 496] [  4 497] [  4 498] [  4 499] [  4 500] [  4 501] [  5 475] [  5 476] [  5 477] [  5 478] [  5 479] [  5 480] [  5 481] [  5 482] [  5 483] [  5 484] [  5 485] [  5 486] [  5 487] [  5 488] [  5 489] [  5 490] [  5 491] [  5 492] [  5 493] [  5 494] [  5 495] [  5 496] [  5 497] [  5 498] [  5 499] [  5 500] [  6 475] [  6 476] [  6 477] [  6 478] [  6 479] [  6 480] [  6 481] [  6 482] [  6 483] [  6 484] [  6 485] [  6 486] [  6 487] [  6 488] [  6 489] [  6 490] [  6 491] [  6 492] [  6 493] [  6 494] [  6 495] [  6 496] [  6 497] [  6 498] [  6 499] [  7 475] [  7 476] [  7 477] [  7 478] [  7 479] [  7 480] [  7 481] [  7 482] [  7 483] [  7 484] [  7 485] [  7 486] [  7 487] [  7 488] [  7 489] [  7 490] [  7 491] [  7 492] [  7 493] [  7 494] [  7 495] [  7 496] [  7 497] [  7 498] [  8 475] [  8 476] [  8 477] [  8 478] [  8 479] [  8 480] [  8 481] [  8 482] [  8 483] [  8 484] [  8 485] [  8 486] [  8 487] [  8 488] [  8 489] [  8 490] [  8 491] [  8 492] [  8 493] [  8 494] [  8 495] [  8 496] [  8 497] [  9 475] [  9 476] [  9 477] [  9 478] [  9 479] [  9 480] [  9 481] [  9 482] [  9 483] [  9 484] [  9 485] [  9 486] [  9 487] [  9 488] [  9 489] [  9 490] [  9 491] [  9 492] [  9 493] [  9 494] [  9 495] [  9 496] [ 10 475] [ 10 476] [ 10 477] [ 10 478] [ 10 479] [ 10 480] [ 10 481] [ 10 482] [ 10 483] [ 10 484] [ 10 485] [ 10 486] [ 10 487] [ 10 488] [ 10 489] [ 10 490] [ 10 491] [ 10 492] [ 10 493] [ 10 494] [ 10 495] [ 11 475] [ 11 476] [ 11 477] [ 11 478] [ 11 479] [ 11 480] [ 11 481] [ 11 482] [ 11 483] [ 11 484] [ 11 485] [ 11 486] [ 11 487] [ 11 488] [ 11 489] [ 11 490] [ 11 491] [ 11 492] [ 11 493] [ 11 494] [ 12 475] [ 12 476] [ 12 477] [ 12 478] [ 12 479] [ 12 480] [ 12 481] [ 12 482] [ 12 483] [ 12 484] [ 12 485] [ 12 486] [ 12 487] [ 12 488] [ 12 489] [ 12 490] [ 12 491] [ 12 492] [ 12 493] [ 13 475] [ 13 476] [ 13 477] [ 13 478] [ 13 479] [ 13 480] [ 13 481] [ 13 482] [ 13 483] [ 13 484] [ 13 485] [ 13 486] [ 13 487] [ 13 488] [ 13 489] [ 13 490] [ 13 491] [ 13 492] [ 14 475] [ 14 476] [ 14 477] [ 14 478] [ 14 479] [ 14 480] [ 14 481] [ 14 482] [ 14 483] [ 14 484] [ 14 485] [ 14 486] [ 14 487] [ 14 488] [ 14 489] [ 14 490] [ 14 491] [ 15 475] [ 15 476] [ 15 477] [ 15 478] [ 15 479] [ 15 480] [ 15 481] [ 15 482] [ 15 483] [ 15 484] [ 15 485] [ 15 486] [ 15 487] [ 15 488] [ 15 489] [ 15 490] [ 16 475] [ 16 476] [ 16 477] [ 16 478] [ 16 479] [ 16 480] [ 16 481] [ 16 482] [ 16 483] [ 16 484] [ 16 485] [ 16 486] [ 16 487] [ 16 488] [ 16 489] [ 17 474] [ 17 475] [ 17 476] [ 17 477] [ 17 478] [ 17 479] [ 17 480] [ 17 481] [ 17 482] [ 17 483] [ 17 484] [ 17 485] [ 17 486] [ 17 487] [ 17 488] [ 18 474] [ 18 475] [ 18 476] [ 18 477] [ 18 478] [ 18 479] [ 18 480] [ 18 481] [ 18 482] [ 18 483] [ 18 484] [ 18 485] [ 18 486] [ 18 487] [ 18 488] [ 19 474] [ 19 475] [ 19 476] [ 19 477] [ 19 478] [ 19 479] [ 19 480] [ 19 481] [ 19 482] [ 19 483] [ 19 484] [ 19 485] [ 19 486] [ 19 487] [ 20 474] [ 20 475] [ 20 476] [ 20 477] [ 20 478] [ 20 479] [ 20 480] [ 20 481] [ 20 482] [ 20 483] [ 20 484] [ 20 485] [ 20 486] [ 21 474] [ 21 475] [ 21 476] [ 21 477] [ 21 478] [ 21 479] [ 21 480] [ 21 481] [ 21 482] [ 21 483] [ 21 484] [ 21 485] [ 22 474] [ 22 475] [ 22 476] [ 22 477] [ 22 478] [ 22 479] [ 22 480] [ 22 481] [ 22 482] [ 22 483] [ 22 484] [ 23 474] [ 23 475] [ 23 476] [ 23 477] [ 23 478] [ 23 479] [ 23 480] [ 23 481] [ 23 482] [ 23 483] [ 24 474] [ 24 475] [ 24 476] [ 24 477] [ 24 478] [ 24 479] [ 24 480] [ 24 481] [ 24 482] [ 25 474] [ 25 475] [ 25 476] [ 25 477] [ 25 478] [ 25 479] [ 25 480] [ 25 481] [ 26 474] [ 26 475] [ 26 476] [ 26 477] [ 26 478] [ 26 479] [ 26 480] [ 27 474] [ 27 475] [ 27 476] [ 27 477] [ 27 478] [ 27 479] [ 28 474] [ 28 475] [ 28 476] [ 28 477] [ 28 478] [ 29 474] [ 29 475] [ 29 476] [ 29 477] [ 30 473] [ 30 474] [ 30 475] [ 30 476] [ 31 473] [ 31 474] [ 31 475] [ 32 473] [ 32 474] [ 33 473]\n</code></pre>\n\n<hr>\n\n<p>You can do this possibly more simply just at the command line with <strong>ImageMagick</strong> which is installed on most Linux distros and is available for macOS and Windows.</p>\n\n<p>Firstly, make everything that is not the same colour red as your wedge into black pixels:</p>\n\n<pre><code>convert sky.png -alpha off -fill black +opaque \"srgb(255,51,51)\" mask.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/33g6d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/33g6d.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now that you have seen how that works, do the same thing again but this time continue and run a <em>\"Connected Component Analysis\"</em> as well:</p>\n\n<pre><code>convert sky.png -alpha off -fill black +opaque \"srgb(255,51,51)\"  \\\n    -define connected-components:verbose=true                     \\\n    -connected-components 8 -normalize  output.png\n</code></pre>\n\n<p><strong>Sample Output</strong></p>\n\n<pre><code>Objects (id: bounding-box centroid area mean-color):\n  0: 946x707+0+0 472.5,353.1 665950 srgb(0,0,0)\n  3: 173x341+299+300 385.0,470.0 1531 srgb(255,51,51)\n  2: 33x201+599+200 615.0,300.0 811 srgb(255,51,51)\n  1: 33x34+473+0 484.5,11.0 530 srgb(255,51,51)        &lt;--- this is your wedge\n</code></pre>\n\n<p>That means 3 red areas were found, namely the last three lines where <code>srgb(255,51,51)</code> and the last one is an area 33x34 pixels located 473,0 pixels across from the top-left corner and it has an area of 530 pixels just the same as we found with Python.</p>\n"}], "owner": {"reputation": 11, "user_id": 4587156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112798267/picture?type=large", "display_name": "user137196", "link": "https://stackoverflow.com/users/4587156/user137196"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1545045883, "creation_date": 1544656815, "last_edit_date": 1544660744, "question_id": 53752886, "link": "https://stackoverflow.com/questions/53752886/find-all-pixel-coordinates-in-a-specified-region-using-pil-kernel-crashes", "title": "Find all pixel coordinates in a specified region using PIL, kernel crashes", "body": "<p>I have some code find to all the pixels within a region of an image. This region is bounded by two straight lines sharing the same origin and extended until the edge of the image (a wedge shape). I supply the function with a starting point inside this region as a parameter and use recursion to get all the pixels inside it. The problem is that it only works for very small \"wedges\".</p>\n\n<pre><code>import threading\nthreading.stack_size(99999999)\n\nimport sys\nsys.setrecursionlimit(2**30)\n\npix=im.load()\npixels=[]\nmemo=[]\ncount=0\n\ndef flood_wedge(x,y):\n    global count\n    count+=1\n    #memo records every pixel visited \n    memo.append([x,y])\n    if ([x,y] in pixels) or ([x,y] in pixels_1) or ([x,y] in pixels_2):\n        pass\n    else:\n        try:\n            #if (x,y) is outside the image, pix[x,y] returns an error \n            pix[x,y]=(256,51,51)\n            #pixels is the desired list\n            pixels.append([x,y])\n        except:\n            pass\n        else:\n            if ([x+1,y] not in memo):\n                flood_wedge(x+1,y)\n            if ([x-1,y] not in memo):\n                flood_wedge(x-1,y)\n            if ([x,y+1] not in memo):\n                flood_wedge(x,y+1)\n            if ([x,y-1] not in memo):\n                flood_wedge(x,y-1)\n</code></pre>\n\n<p>I have tried increasing the recursion limit, though depth isn't necessarily the problem. If increased, the kernel just crashes. I tried increasing the stack size, but it made no difference at all. The code actually runs pretty fast, but increasing the size of the region just slightly causes this problem. Ultimately, I would need to use this on large images (.tif).</p>\n\n<p><a href=\"https://i.stack.imgur.com/UVoHM.png\" rel=\"nofollow noreferrer\">sample small wedge on a 946x710 image</a></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1544657124, "post_id": 53752876, "comment_id": 94358658, "body": "I got the following error: <code>ValueError: incompatible dimensions for cross product (dimension must be 2 or 3)</code>"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1544657196, "post_id": 53752876, "comment_id": 94358683, "body": "Sorry I had some typos. I  edited it now."}, {"owner": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "edited": false, "score": 1, "creation_date": 1544657452, "post_id": 53752876, "comment_id": 94358766, "body": "<b>pt1 - pp = array([-123. , -397.5])</b>, are you hoping to get <b>array([-123. , -397.5, 1])</b>?"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "edited": false, "score": 0, "creation_date": 1544657499, "post_id": 53752876, "comment_id": 94358783, "body": "@Indominus yes, precisely."}], "answers": [{"comments": [{"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1544657735, "post_id": 53752978, "comment_id": 94358837, "body": "<i>facepalm</i> :)))"}, {"owner": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "reply_to_user": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1544657920, "post_id": 53752978, "comment_id": 94358889, "body": "If you do this type of vector/matrix manipulations a lot, be prepared that the migration from Matlab to Python would make your life a little worse, especially bench-marked to the newer versions of Matlab. Python&#39;s matrix syntax is not as concise, also the way numpy handles matrix dimensions is less intuitive than Matlab. Your question is a typical example of numpy not able to easily differentiate a <i>nx1</i> matrix and a <i>1xn</i> matrix"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544662856, "post_id": 53752978, "comment_id": 94359995, "body": "While I know what you are driving at, I&#39;d differ in how you phrase it.  <code>numpy</code> is perfectly able to distinguish between (1,n) and (n,1) arrays.  But it also has (n,) arrays, which apparently are a mystery to someone raised on MATLAB :)  And it also has real scalars (not the pseudo 1x1 MATLAB ones).  I tend to discourage the use of <code>np.append</code> because it is often misused.  Here, though, it is useful, turning the scalar <code>1</code> into a 1d array that can be concatenated with the rest."}, {"owner": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "edited": false, "score": 0, "creation_date": 1544665375, "post_id": 53752978, "comment_id": 94360472, "body": "You are absolutely right. What I meant by &quot;easily&quot; is just I like to write <code>arr[i, :]</code> instead of <code>arr[[i], :]</code>. Matlab defaults array dimension to 2 (unless above 2). It is true that it is pseudo, but we humans see and do things in 2-dim. Sorry, I&#39;ll stop here before I go completely off topic."}], "tags": [], "owner": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "is_accepted": true, "score": 2, "last_activity_date": 1544657598, "creation_date": 1544657598, "answer_id": 53752978, "question_id": 53752876, "link": "https://stackoverflow.com/questions/53752876/numpy-issue-with-concatenating-arrays/53752978#53752978", "title": "numpy issue with concatenating arrays", "body": "<p>This might be what you are looking for:</p>\n\n<pre><code>np.cross(np.append(pt1-pp, 1), np.append(pt2-pp, 1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1544666246, "last_edit_date": 1544666246, "creation_date": 1544663215, "answer_id": 53753639, "question_id": 53752876, "link": "https://stackoverflow.com/questions/53752876/numpy-issue-with-concatenating-arrays/53753639#53753639", "title": "numpy issue with concatenating arrays", "body": "<p>If you use <code>np.r_</code> instead it works:</p>\n\n<pre><code>In [40]: np.cross(np.r_[pt1 - pp, 1], np.r_[pt2 - pp, 1])\nOut[40]: array([-5.32030000e+02, -2.98623000e+03, -1.25246611e+06])\n</code></pre>\n\n<p>Your <code>pt1</code> and <code>pp</code> are (2,) arrays.  To add a <code>1</code> to them you need to use a 1d concatenate, <code>np.r_</code> for 'row', as opposed to <code>columns</code>.</p>\n\n<p>There are lots of ways of constructing a 3 element array:</p>\n\n<pre><code>In [43]: np.r_[pt1 - pp, 1]\nOut[43]: array([-123. , -397.5,    1. ])\nIn [44]: np.append(pt1 - pp, 1)\nOut[44]: array([-123. , -397.5,    1. ])\nIn [45]: np.concatenate((pt1 - pp, [1]))\nOut[45]: array([-123. , -397.5,    1. ])\n</code></pre>\n\n<p><code>concatenate</code> is the base operation.  The others tweak the <code>1</code> to produce a 1d array that can be joined with the (2,) shape array to make a (3,).</p>\n\n<p>Concatenate turns all of its inputs into arrays, if they aren't already: <code>np.concatenate((pt1 - pp, np.array([1])))</code>.</p>\n\n<p>Note that <code>np.c_</code> docs say it is the equivalent of </p>\n\n<pre><code>np.r_['-1,2,0', index expression]\n</code></pre>\n\n<p>That initial string expression is a bit complicated.  The key point is it tries to concatenate 2d arrays (whereas your <code>pt1</code> is 1d).</p>\n\n<p>It is like <code>column_stack, joining</code>n<code></code>(2,1)<code>arrays to make a</code>(2,n)` array.</p>\n\n<pre><code>In [48]: np.c_[pt1, pt2]\nOut[48]: \narray([[  440.  , -2546.23],\n       [   59.  ,   591.03]])\nIn [50]: np.column_stack((pt1, pt2))\nOut[50]: \narray([[  440.  , -2546.23],\n       [   59.  ,   591.03]])\n</code></pre>\n\n<p>In MATLAB everything has at least 2 dimensions, and because it is Fortran based, the outer dimensions are last.  So in a sense its most natural 'vector' shape is n x 1, a column matrix.  <code>numpy</code> is built on Python, with a natural interface to its scalars and nested lists.  Order is <code>c</code> based; the initial dimensions are outer most.  So <code>numpy</code> code can have true scalars (Python numbers without shape or size), or arrays with 0 or more dimensions.  A 'vector' most naturally has shape <code>(n,)</code> (a 1 element tuple).  It can easily be reshaped to (1,n) or (n,1) if needed.  </p>\n\n<p>If you want a (3,1) array (instead of (3,) shaped), you'd need to use some sort of 'vertical' concatenation, joining a (2,1) array with a (1,1):</p>\n\n<pre><code>In [51]: np.r_['0,2,0', pt1-pp, 1]\nOut[51]: \narray([[-123. ],\n       [-397.5],\n       [   1. ]])\nIn [53]: np.vstack([(pt1-pp)[:,None], 1])\nOut[53]: \narray([[-123. ],\n       [-397.5],\n       [   1. ]])\n</code></pre>\n\n<p>(But <code>np.cross</code> wants (n,3) or (3,) arrays, not (3,1)!)</p>\n\n<pre><code>In [58]: np.cross(np.r_['0,2,0', pt1-pp, 1], np.r_['0,2,0', pt2-pp, 1])\n...\nValueError: incompatible dimensions for cross product\n(dimension must be 2 or 3)\n</code></pre>\n\n<p>To get around this specify an axis:</p>\n\n<pre><code>In [59]: np.cross(np.r_['0,2,0', pt1-pp, 1], np.r_['0,2,0', pt2-pp, 1], axis=0)\nOut[59]: \narray([[-5.32030000e+02],\n       [-2.98623000e+03],\n       [-1.25246611e+06]])\n</code></pre>\n\n<p>Study <code>np.cross</code> if you want an example of manipulating dimensions. In this <code>axis=0</code> case it transposes the arrays so they are (1,3) and then does the calculation.</p>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 53752978, "answer_count": 2, "score": 0, "last_activity_date": 1544666246, "creation_date": 1544656773, "last_edit_date": 1544657127, "question_id": 53752876, "link": "https://stackoverflow.com/questions/53752876/numpy-issue-with-concatenating-arrays", "title": "numpy issue with concatenating arrays", "body": "<p>I am porting some Matlab code to python and I have the following statement in Matlab:</p>\n\n<pre><code>cross([pt1,1]-[pp,0],[pt2,1]-[pp,0]);\n</code></pre>\n\n<p><code>pt1</code>, <code>pt2</code> and <code>pp</code> are 2D points.</p>\n\n<p>So, my corresponding python code looks as follows:</p>\n\n<pre><code>np.cross(np.c_[pt1 - pp, 1], np.c_[pt2 - pp, 1])\n</code></pre>\n\n<p>The points are defined as:</p>\n\n<pre><code>pt1  = np.asarray((440.0, 59.0))\npt2 = np.asarray((-2546.23, 591.03))\npp = np.asarray([563.,  456.5])\n</code></pre>\n\n<p>When I execute the statement with the cross product, I get the following error:</p>\n\n<pre><code>ValueError: all the input array dimensions except for the concatenation axis must match exactly\n</code></pre>\n\n<p>So looking at some other posts, here I thought I would try <code>np.column_stack</code> but I get the same error:</p>\n\n<pre><code>np.cross(np.column_stack((pt1 - pp, 1)), np.column_stack((pt2 - pp, 1)))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "grammar", "bnf", "ply"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544659421, "post_id": 53752868, "comment_id": 94359301, "body": "Not easily. Why do you want to do that? It&#39;s easy enough to concatenate the subtree back into a string if that&#39;s what you want to do. (Anyway, how do you propose to tell the parser which close parenthesis in the input matches the pattern without letting it analyse the expression?)"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544659801, "post_id": 53752868, "comment_id": 94359393, "body": "@rici i want to do this because when the expression starts with abc(...) i just want to get whatever params are passed to it. Only problem is that the params might match other grammar rules, so how do i get the params? what should i do and what should be the right way to do the same?"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544660325, "post_id": 53752868, "comment_id": 94359504, "body": "@rici i just want that whole string. I know i can let other expressions to get matched with it but i am returning something else from other expression functions and not the string i want. So, how can i achieve this?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544661073, "post_id": 53752868, "comment_id": 94359661, "body": "Are you trying to write a preprocessor? That requires a slightly different architecture. Otherwise, I&#39;d stick with the answer that the right way to do it is to parse into an AST and do whatever you want with the subtree in context, which might be to just recreate the original string (or extract it from the input by using location information). I don&#39;t think a more concrete answer is possible here without a more concrete question."}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544664337, "post_id": 53752868, "comment_id": 94360250, "body": "ok, what i did is -&gt; I created a rule like expression : abc ( expression2 )  and expression2 leading to all the same matching rules but all those matching rules fucntions returning the string. This way I am able to recreate the string. Is this what you are suggesting? what&#39;s the AST way of doing this?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1544667846, "post_id": 53752868, "comment_id": 94361025, "body": "An AST is a tree which describes the parse. How it does so is basically up to you, but normally the leaves are tokens and the other nodes are productions -- but not necessarily every production. You&#39;ll find examples all over the place. You can add position ranges to every token in your lexical actions, and then use that to compute position ranges for every production (from the first position of the first token to the last position of the last token); that way, it&#39;s easy to turn any tree node back into its source data."}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544657082, "creation_date": 1544656745, "last_edit_date": 1544657082, "question_id": 53752868, "link": "https://stackoverflow.com/questions/53752868/extract-expression-as-string-in-grammar-rules-instead-of-it-being-matched-to-oth", "title": "extract expression as string in grammar rules instead of it being matched to other expression grammar rules python ply", "body": "<pre><code>def abc_expression(p):\n   expression : abc ( expression ) \n</code></pre>\n\n<p>I want to extract the p[3] term as it is, instead of it to be matched to other grammar rules. For eg: my input is :</p>\n\n<pre><code>abc(def(hello))\n</code></pre>\n\n<p>i want to extract \"<code>def(hello)</code>\" by using the rule <code>abc ( expression )</code> instead of expression i.e <code>def(hello)</code> getting matched to a rule like <code>def ( token ).</code></p>\n\n<p>Please help, is it possible to extract <code>def(hello)</code> from <code>abc(def(hello))</code>, instead of expression getting matched to any other rule. </p>\n"}, {"tags": ["python", "dictionary", "tuples"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1544656912, "post_id": 53752838, "comment_id": 94358586, "body": "What should your output look like? Also, in your title you say &#39;df&#39; but in the question you say dict. Assuming you want to use a dict but just want to double check"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9639519"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1544658090, "post_id": 53752838, "comment_id": 94358937, "body": "@G.Anderson, sorry, the question has been amended"}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 10782802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752c174765f97472b3bc279949a668a7?s=128&d=identicon&r=PG&f=1", "display_name": "rLevv", "link": "https://stackoverflow.com/users/10782802/rlevv"}, "is_accepted": true, "score": 0, "last_activity_date": 1544658200, "creation_date": 1544658200, "answer_id": 53753058, "question_id": 53752838, "link": "https://stackoverflow.com/questions/53752838/accurately-return-dict-to-tuples/53753058#53753058", "title": "Accurately return dict to tuples", "body": "<p>The problem is here: </p>\n\n<pre><code>int(k.split('_')[0][1]\n</code></pre>\n\n<p>You're only grabbing one character after the 'A' where you mean to be grabbing all the characters after 'A' until the '_'. You can use this instead to grab all the characters until the split:</p>\n\n<pre><code>int(k.split('_')[0][1:]\n</code></pre>\n\n<p>So the whole thing should be:</p>\n\n<pre><code>tuples = [((t, k.split('_')[0][0], int(k.split('_')[0][1:]), k.split('_')[1]), v[i]) for k,v in d.items() for i,t in enumerate(time)]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9639519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53753058, "answer_count": 1, "score": 0, "last_activity_date": 1544658316, "creation_date": 1544656521, "last_edit_date": 1544658316, "question_id": 53752838, "link": "https://stackoverflow.com/questions/53752838/accurately-return-dict-to-tuples", "title": "Accurately return dict to tuples", "body": "<p>I am trying to create a set of <code>tuples</code> from various values in a <code>dict</code>. Using the example below, It works up until the <code>_10</code> <code>integer</code>. So anything above <code>_9</code> gets overwritten. e.g <code>_12</code> becomes <code>_2</code>. </p>\n\n<pre><code>time = [1]\n\nd = ({  \n    'A1_S' : [10],    \n    'A2_S' : [20],                       \n    'A3_S' : [30],    \n    'A4_S' : [40],        \n    'A5_S' : [50],    \n    'A6_S' : [60],                       \n    'A7_S' : [70],    \n    'A8_S' : [80],                    \n    'A9_S' : [90],    \n    'A10_S' : [100],                       \n    'A11_S' : [110],    \n    'A12_S' : [120],\n    'A13_S' : [130],    \n    'A14_S' : [140],                       \n    'A15_S' : [150],                        \n    }) \n\ntuples = [((t, k.split('_')[0][0], int(k.split('_')[0][1]), k.split('_')[1]), v[i]) for k,v in d.items() for i,t in enumerate(time)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[((1, 'A', 1, 'S'), 10), ((1, 'A', 2, 'S'), 20), ((1, 'A', 3, 'S'), 30), ((1, 'A', 4, 'S'), 40), ((1, 'A', 5, 'S'), 50), ((1, 'A', 6, 'S'), 60), ((1, 'A', 7, 'S'), 70), ((1, 'A', 8, 'S'), 80), ((1, 'A', 9, 'S'), 90), ((1, 'A', 1, 'S'), 100), ((1, 'A', 1, 'S'), 110), ((1, 'A', 1, 'S'), 120), ((1, 'A', 1, 'S'), 130), ((1, 'A', 1, 'S'), 140), ((1, 'A', 1, 'S'), 150)]\n</code></pre>\n\n<p>Intended Output:</p>\n\n<pre><code>[((1, 'A', 1, 'S'), 10), ((1, 'A', 2, 'S'), 20), ((1, 'A', 3, 'S'), 30), ((1, 'A', 4, 'S'), 40), ((1, 'A', 5, 'S'), 50), ((1, 'A', 6, 'S'), 60), ((1, 'A', 7, 'S'), 70), ((1, 'A', 8, 'S'), 80), ((1, 'A', 9, 'S'), 90), ((1, 'A', 10, 'S'), 100), ((1, 'A', 11, 'S'), 110), ((1, 'A', 12, 'S'), 120), ((1, 'A', 13, 'S'), 130), ((1, 'A', 14, 'S'), 140), ((1, 'A', 15, 'S'), 150)]\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544656584, "post_id": 53752823, "comment_id": 94358496, "body": "I guess, you should remove &#39;Vc&#39; and &#39;PC&#39; from ticks_x and ticks_y respectively."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1544656592, "post_id": 53752823, "comment_id": 94358498, "body": "Looks like a possible solution in <a href=\"https://stackoverflow.com/questions/45988872/how-to-remove-a-particular-grid-line-corresponding-to-a-custom-xtick-on-a-log-sc\">this question</a>"}, {"owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "reply_to_user": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544657085, "post_id": 53752823, "comment_id": 94358643, "body": "@sehigle the thing is that I need to show the value of that point, this is why I have to add them to custom ticks"}, {"owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1544657094, "post_id": 53752823, "comment_id": 94358649, "body": "@G.Anderson I&#39;ve read all that post, that solution works only in that case, not in mine, or at least I have no idea how to try it on my code."}, {"owner": {"reputation": 332, "user_id": 10149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e467289ea29b0084c3f2d740ae68d?s=128&d=identicon&r=PG&f=1", "display_name": "sehigle", "link": "https://stackoverflow.com/users/10149171/sehigle"}, "edited": false, "score": 0, "creation_date": 1544658163, "post_id": 53752823, "comment_id": 94358953, "body": "Could you give a minimal code example?"}, {"owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1544659592, "post_id": 53752823, "comment_id": 94359343, "body": "Thanks @G.Anderson, I found the solution there. This was the third time I came to that link and finally I was able to understand it."}], "answers": [{"comments": [{"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1544660082, "post_id": 53753149, "comment_id": 94359443, "body": "the actual solution that you put in the question should better be here. Can you please move it?"}, {"owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "reply_to_user": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1544660645, "post_id": 53753149, "comment_id": 94359558, "body": "Done! No images here because I need at least 10 reputation, but it is still in the question!"}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1544746074, "post_id": 53753149, "comment_id": 94395493, "body": "Thanks mate! I didn&#39;t realize they make stuff so hard for noobies. I guess it&#39;s to protect against spam or something. Anyways, I removed the answer from the question and moved the figure down here. That&#39;s how it should be."}], "tags": [], "owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "is_accepted": false, "score": 1, "last_activity_date": 1544750507, "last_edit_date": 1544750507, "creation_date": 1544658902, "answer_id": 53753149, "question_id": 53752823, "link": "https://stackoverflow.com/questions/53752823/remove-a-grid-line-created-from-custom-ticks-in-a-plot/53753149#53753149", "title": "Remove a grid line created from custom ticks in a plot", "body": "<p>Solved! The key was to read slowly and try to do the same method in my code as it is shown here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45988872/how-to-remove-a-particular-grid-line-corresponding-to-a-custom-xtick-on-a-log-sc\">How to remove a particular grid line corresponding to a custom xtick on a log scale axis?</a></p>\n\n<p>I managed to solve it by making a custom grid this way:</p>\n\n<pre><code>ticks_x=[0.2,Vc,0.4,0.6,0.8,1,1.2]\nticks_y=[-50,0,Pc,50,100,150,200]\nxticks(ticks_x)\nyticks(ticks_y)\n\nfor x1 in ticks_x:\n    if x1!= Vc:\n        axvline(x=x1, color = 'k', linestyle = '-', linewidth = 0.2)\n\nfor y1 in ticks_y:\n    if y1!= Pc:\n        axhline(y=y1, color = 'k', linestyle = '-', linewidth = 0.2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/O0CDr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O0CDr.png\" alt=\"Solved\"></a></p>\n"}], "owner": {"reputation": 19, "user_id": 10783327, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43nXV0Ll-a8/AAAAAAAAAAI/AAAAAAAACpk/xEic0R22h1U/photo.jpg?sz=128", "display_name": "Peybol", "link": "https://stackoverflow.com/users/10783327/peybol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1544659090, "answer_count": 1, "score": 0, "last_activity_date": 1544760672, "creation_date": 1544656426, "last_edit_date": 1544760672, "question_id": 53752823, "link": "https://stackoverflow.com/questions/53752823/remove-a-grid-line-created-from-custom-ticks-in-a-plot", "closed_reason": "Duplicate", "title": "Remove a grid line created from custom ticks in a plot", "body": "<p>In first place, sorry for my English, and in the second place, sorry for my code skills.</p>\n\n<p>All I want is to remove a grid line that is created automatically from my custom xticks and yticks lists. I need to notify a point in the plot and I have spent over 2 hours reading all kind of solutions that exceeds my knowledge by far. No solution I found yet.</p>\n\n<p>[![The plot][1]][1]</p>\n\n<p>All I did is create custom ticks for Y and X axis:</p>\n\n<pre><code>ticks_x=[0.2,Vc,0.4,0.6,0.8,1,1.2]\nticks_y=[-50,0,Pc,50,100,150,200]\nxticks(ticks_x)\nyticks(ticks_y)\ngrid(lw=0.2,color=\"k\")\n</code></pre>\n\n<p>Could someone help me, please? Thanks a lot.</p>\n"}, {"tags": ["python", "tensorflow", "mxnet"], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 1047213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kpm47.png?s=128&g=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/1047213/hari"}, "edited": false, "score": 0, "creation_date": 1593162802, "post_id": 53758665, "comment_id": 110689213, "body": "Isn&#39;t the OP saying that MXNet and TensorFlow are assigning IDs in opposite order to PCI Bus order?"}], "tags": [], "owner": {"reputation": 756, "user_id": 4748557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/256e4321e2519c302820c2c588776017?s=128&d=identicon&r=PG&f=1", "display_name": "stefan.schroedl", "link": "https://stackoverflow.com/users/4748557/stefan-schroedl"}, "is_accepted": true, "score": 2, "last_activity_date": 1544693312, "creation_date": 1544693312, "answer_id": 53758665, "question_id": 53752811, "link": "https://stackoverflow.com/questions/53752811/wrong-gpu-order-in-mxnet-and-tensorflow/53758665#53758665", "title": "Wrong gpu order in mxnet and tensorflow", "body": "<p>Set</p>\n\n<p><code>export CUDA_DEVICE_ORDER=PCI_BUS_ID</code>.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/questions/13781738/how-does-cuda-assign-device-ids-to-gpus\">this question</a></p>\n"}], "owner": {"reputation": 421, "user_id": 5623476, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k18cB8fZPxc/AAAAAAAAAAI/AAAAAAAAeGE/FyPGMkPQgHc/photo.jpg?sz=128", "display_name": "Ivan Kovtun", "link": "https://stackoverflow.com/users/5623476/ivan-kovtun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 2, "accepted_answer_id": 53758665, "answer_count": 1, "score": 3, "last_activity_date": 1544693312, "creation_date": 1544656340, "question_id": 53752811, "link": "https://stackoverflow.com/questions/53752811/wrong-gpu-order-in-mxnet-and-tensorflow", "title": "Wrong gpu order in mxnet and tensorflow", "body": "<p>My desktop has 2 gpu installed: 1080 and 1080Ti\nnvidia-smi shows that gpu-0 is 1080 and gpu-1 is 1080Ti</p>\n\n<pre><code>+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 410.79       Driver Version: 410.79       CUDA Version: 10.0     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 1080    Off  | 00000000:01:00.0 Off |                  N/A |\n| 26%   57C    P2    53W / 215W |    696MiB /  8119MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  GeForce GTX 108...  Off  | 00000000:02:00.0 Off |                  N/A |\n| 55%   70C    P2   204W / 250W |   8641MiB / 11178MiB |     28%      Default |\n+-------------------------------+----------------------+----------------------+\n</code></pre>\n\n<p>Right now both <strong>tensorflow</strong> and <strong>mxnet</strong> use reversed order: 1080ti when I specify gpu=0 and 1080 when I specify gpu=1.</p>\n\n<p><strong>Why is it happening and how to synchronize tensorflow and mxnet gpu order with nvidia-smi gpu order?</strong></p>\n\n<p>Code snippets for mxnet:</p>\n\n<pre><code>mod = mx.mod.Module(symbol, label_names=None, context=mx.gpu(0))\n</code></pre>\n\n<p>For tensorflow I use environment variable</p>\n\n<pre><code>CUDA_VISIBLE_DEVICES=\"0\"   \n</code></pre>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 55, "user_id": 10783290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069d64f54884d84c000f5bce30eee51?s=128&d=identicon&r=PG&f=1", "display_name": "Farhanhasnat", "link": "https://stackoverflow.com/users/10783290/farhanhasnat"}, "edited": false, "score": 0, "creation_date": 1544656369, "post_id": 53752804, "comment_id": 94358437, "body": "I have also checked other threads in here but could not come up with the proper solution."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10783290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069d64f54884d84c000f5bce30eee51?s=128&d=identicon&r=PG&f=1", "display_name": "Farhanhasnat", "link": "https://stackoverflow.com/users/10783290/farhanhasnat"}, "edited": false, "score": 0, "creation_date": 1544777478, "post_id": 53753770, "comment_id": 94403612, "body": "I am actually using the CE edition. I am just learning python so the database i am using is very small. Thank you for your support."}], "tags": [], "owner": {"reputation": 71, "user_id": 7484700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8573f33053e13e997b6d3c0d5b1749af?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil M.", "link": "https://stackoverflow.com/users/7484700/jamil-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1549722142, "last_edit_date": 1549722142, "creation_date": 1544664444, "answer_id": 53753770, "question_id": 53752804, "link": "https://stackoverflow.com/questions/53752804/i-am-unable-to-connect-to-mysql-on-pycharm-even-after-installing-pip-and-mysql-c/53753770#53753770", "title": "I am unable to connect to MySQL on Pycharm even after installing pip and mysql connector properly", "body": "<p>\"msql-connector-repackaged\" should be \"mysql-connector-repackaged\", also try to pass in a database in your \"myDB\" variable (database must have already been created):</p>\n\n<pre><code>mydb = mysql.connector.connect(\n    host=\"localhost\",\n    user=\"root\",\n    password=\"password\",\n    database=\"name of your database\"\n    )\n</code></pre>\n\n<p>Other than that, what edition of pycharm are you using? From my understanding pycharm ce edition doesn't support the use of database management systems such as Oracle, MySQL, SQL etc..., you need the professional version to do so.</p>\n\n<p>I've been able to build databases with SQLite in pycharm, but that's built into python. I don't know how large the data your working with is, but if it's small you can resort to SQLite instead.</p>\n\n<p><a href=\"https://www.jetbrains.com/help/pycharm/relational-databases.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/pycharm/relational-databases.html</a></p>\n\n<p>Also, you can try other connection packages (CAUTION: IntelliJ, creators of PyCharm, may eventually remove them in order to preserve the mysql compatibility of non-free PyCharm editions) such as: mysql-connector, mysql-connector-python, mysql-connector-dd and mysql-connector-rf. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13056979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54e2dfb7efc8ad643093c088fd2b153?s=128&d=identicon&r=PG&f=1", "display_name": "Pati Rosa", "link": "https://stackoverflow.com/users/13056979/pati-rosa"}, "is_accepted": false, "score": 0, "last_activity_date": 1592243616, "last_edit_date": 1592243616, "creation_date": 1591884835, "answer_id": 62326425, "question_id": 53752804, "link": "https://stackoverflow.com/questions/53752804/i-am-unable-to-connect-to-mysql-on-pycharm-even-after-installing-pip-and-mysql-c/62326425#62326425", "title": "I am unable to connect to MySQL on Pycharm even after installing pip and mysql connector properly", "body": "<p>You may need to install the Python 3 and MySQL development headers and libraries like so:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$sudo apt-get install python3-dev default-libmysqlclient-dev build-essential\n</code></pre>\n\n<p>Then run the pip install:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$pip install mysqlclient\n</code></pre>\n\n<p>Now you can add the package mysqlclient on Pycharm </p>\n\n<p>Documentation: <a href=\"https://github.com/PyMySQL/mysqlclient-python\" rel=\"nofollow noreferrer\">https://github.com/PyMySQL/mysqlclient-python</a></p>\n\n<p>:)</p>\n"}], "owner": {"reputation": 55, "user_id": 10783290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069d64f54884d84c000f5bce30eee51?s=128&d=identicon&r=PG&f=1", "display_name": "Farhanhasnat", "link": "https://stackoverflow.com/users/10783290/farhanhasnat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "accepted_answer_id": 53753770, "answer_count": 2, "score": 1, "last_activity_date": 1592243616, "creation_date": 1544656304, "last_edit_date": 1544657577, "question_id": 53752804, "link": "https://stackoverflow.com/questions/53752804/i-am-unable-to-connect-to-mysql-on-pycharm-even-after-installing-pip-and-mysql-c", "title": "I am unable to connect to MySQL on Pycharm even after installing pip and mysql connector properly", "body": "<p>I have installed mysql connector properly and the command prompt even shows successful installation but for some reason Pycharm is showing error in installing the connector. </p>\n\n<p><img src=\"https://i.stack.imgur.com/oiy1N.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/lQ9fz.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/79yTc.jpg\" alt=\"enter image description here\"></p>\n\n<p>Coder Starts here</p>\n\n<pre><code>    Collecting mysqlconnector\n      Using cached https://files.pythonhosted.org/packages/e4/7c/957e0c387d4c65df42ba56d5160456b0ff6f83f3cda122e18287605e3711/mysqlconnector-0.1.1.tar.gz\n    Installing collected packages: mysqlconnector\n      Running setup.py install for mysqlconnector: started\n        Running setup.py install for mysqlconnector: finished with status 'error'\n        Complete output from command \"C:\\Users\\Farhan Hasnat\\PycharmProjects\\untitled1\\venv\\Scripts\\python.exe\" -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\FARHAN~1\\\\AppData\\\\Local\\\\Temp\\\\pycharm-packaging\\\\mysqlconnector\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\FARHAN~1\\AppData\\Local\\Temp\\pip-record-hnanue0h\\install-record.txt --single-version-externally-managed --compile --install-headers \"C:\\Users\\Farhan Hasnat\\PycharmProjects\\untitled1\\venv\\include\\site\\python3.7\\mysqlconnector\":\n        running install\n        Traceback (most recent call last):\n          File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n          File \"C:\\Users\\FARHAN~1\\AppData\\Local\\Temp\\pycharm-packaging\\mysqlconnector\\setup.py\", line 47, in &lt;module&gt;\n            'mysqlconnector = mysqlconnector.cli:cli',\n          File \"C:\\Users\\Farhan Hasnat\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\distutils\\core.py\", line 148, in setup\n            dist.run_commands()\n          File \"C:\\Users\\Farhan Hasnat\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\distutils\\dist.py\", line 966, in run_commands\n            self.run_command(cmd)\n          File \"C:\\Users\\Farhan Hasnat\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\distutils\\dist.py\", line 985, in run_command\n            cmd_obj.run()\n          File \"C:\\Users\\FARHAN~1\\AppData\\Local\\Temp\\pycharm-packaging\\mysqlconnector\\setup.py\", line 20, in run\n            raise Exception(\"You probably meant to install and run mysql-connector\")\n        Exception: You probably meant to install and run mysql-connector\n\n        ----------------------------------------\n\n    Command \"\"C:\\Users\\Farhan Hasnat\\PycharmProjects\\untitled1\\venv\\Scripts\\python.exe\" -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\FARHAN~1\\\\AppData\\\\Local\\\\Temp\\\\pycharm-packaging\\\\mysqlconnector\\\\setup.py';f=getattr**strong text**(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\FARHAN~1\\AppData\\Local\\Temp\\pip-record-hnanue0h\\install-record.txt --single-version-externally-managed --compile --install-headers \"C:\\Users\\Farhan Hasnat\\PycharmProjects\\untitled1\\venv\\include\\site\\python3.7\\mysqlconnector\"\" failed with error code 1 in C:\\Users\\FARHAN~1\\AppData\\Local\\Temp\\pycharm-packaging\\mysqlconnector\\\n    You are using pip version 10.0.1, however version 18.1 is available.\n    You should consider upgrading via the 'python -m pip install --upgrade pip' command.\n</code></pre>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1544656350, "post_id": 53752776, "comment_id": 94358429, "body": "This answer might have some possible solutions: <a href=\"https://stackoverflow.com/questions/25027122/break-the-function-after-certain-time\">break the function after certain time</a>"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1544656359, "post_id": 53752776, "comment_id": 94358431, "body": "Possibly related, helpful or dupe of <a href=\"https://stackoverflow.com/questions/2281850/timeout-function-if-it-takes-too-long-to-finish\">Timeout function if it takes too long to finish &#91;duplicate&#93;</a> or <a href=\"https://stackoverflow.com/questions/492519/timeout-on-a-function-call\">Timeout on a function call</a>"}], "owner": {"reputation": 11, "user_id": 10783340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211979960086873/picture?type=large", "display_name": "Hughes Chen", "link": "https://stackoverflow.com/users/10783340/hughes-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544665209, "creation_date": 1544656136, "last_edit_date": 1544665209, "question_id": 53752776, "link": "https://stackoverflow.com/questions/53752776/how-to-time-out-a-statement-in-a-for-loop", "title": "How to time out a statement in a for loop", "body": "<p>I'm writing a python script to perform camera calibration with OpenCV. </p>\n\n<p>I found that the <code>cv2.findChessboardCorners</code> function may take very long to run on certain images. </p>\n\n<p>I would therefore like to be able to stop the function after a certain period of time has passed, and move on to the next image. </p>\n\n<p>How do I do that?</p>\n\n<pre><code>for fname in images:        \n    img = cv2.imread(fname)                            \n    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    ret, corners = cv2.findChessboardCorners(gray, (20, 17), None)   \n</code></pre>\n"}, {"tags": ["python", "list", "sum"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1544656149, "post_id": 53752752, "comment_id": 94358359, "body": "<code>np.cumsum(myLlist)[1:]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 992, "user_id": 7374610, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xFSdX.jpg?s=128&g=1", "display_name": "Zito Relova", "link": "https://stackoverflow.com/users/7374610/zito-relova"}, "is_accepted": false, "score": 1, "last_activity_date": 1544656148, "creation_date": 1544656148, "answer_id": 53752778, "question_id": 53752752, "link": "https://stackoverflow.com/questions/53752752/running-total-sum-of-one-list-stored-in-a-new-list-python/53752778#53752778", "title": "Running total sum of one list, stored in a new list - python", "body": "<p>try this:</p>\n\n<pre><code>newList = [sum(myList[:i+1]) for i in range(len(myList))][1:]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9919099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SR0Tb.jpg?s=128&g=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/9919099/sophie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "closed_date": 1544656091, "answer_count": 1, "score": -1, "last_activity_date": 1544656148, "creation_date": 1544656004, "question_id": 53752752, "link": "https://stackoverflow.com/questions/53752752/running-total-sum-of-one-list-stored-in-a-new-list-python", "closed_reason": "Duplicate", "title": "Running total sum of one list, stored in a new list - python", "body": "<p>I have the following list:</p>\n\n<pre><code>myList = [5,15,23,45,2,43]\n</code></pre>\n\n<p>I want to create a running total in a new list, so it would look like:</p>\n\n<pre><code>newList = [20,43,88,90,133]\n</code></pre>\n\n<p>How would I do this?</p>\n"}, {"tags": ["python", "r", "dplyr"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1544656209, "post_id": 53752717, "comment_id": 94358377, "body": "what do you want to do if there are 3 in a row"}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 2, "creation_date": 1544658174, "post_id": 53752717, "comment_id": 94358956, "body": "How many times do you plan on changing the question?  Not fun for the people that have already submitted answers."}, {"owner": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1544660579, "post_id": 53752717, "comment_id": 94359540, "body": "@d_kennetz i&#39;d like to do the same thing."}, {"owner": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "reply_to_user": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 0, "creation_date": 1544660628, "post_id": 53752717, "comment_id": 94359553, "body": "@RichScriven sorry just wanted to clarify that what i&#39;m merging are sentences or words not characters."}, {"owner": {"reputation": 34987, "user_id": 7669809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3d13c12bea84ee6a15f6888e673c4e3?s=128&d=identicon&r=PG&f=1", "display_name": "www", "link": "https://stackoverflow.com/users/7669809/www"}, "edited": false, "score": 1, "creation_date": 1544660741, "post_id": 53752717, "comment_id": 94359587, "body": "You should not change your question."}, {"owner": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "reply_to_user": {"reputation": 34987, "user_id": 7669809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3d13c12bea84ee6a15f6888e673c4e3?s=128&d=identicon&r=PG&f=1", "display_name": "www", "link": "https://stackoverflow.com/users/7669809/www"}, "edited": false, "score": 0, "creation_date": 1544660878, "post_id": 53752717, "comment_id": 94359617, "body": "duly noted @www"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "edited": false, "score": 0, "creation_date": 1544660763, "post_id": 53752913, "comment_id": 94359594, "body": "the dat part? and what if the list is not that short? my data set is like 7000 rows"}, {"owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "reply_to_user": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "edited": false, "score": 0, "creation_date": 1544665287, "post_id": 53752913, "comment_id": 94360447, "body": "@MariamIbrahim  It should work for <code>n</code> number of rows."}], "tags": [], "owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": true, "score": 1, "last_activity_date": 1544658968, "last_edit_date": 1544658968, "creation_date": 1544657003, "answer_id": 53752913, "question_id": 53752717, "link": "https://stackoverflow.com/questions/53752717/merging-specific-rows-based-on-consecutive-duplicate-values-in-same-column/53752913#53752913", "title": "Merging specific rows based on consecutive duplicate values in same column", "body": "<p>Here is a <code>base R</code> method with <code>aggregate</code>.  Create a grouping column by comparing adjacent elements equality of 'X', use that in <code>aggregate</code> to group by and <code>paste</code> elements together.</p>\n\n<pre><code>aggregate(Y ~ X + grp, transform(dat, \n    grp = cumsum(c(TRUE, X[-1] != X[-length(X)]))), \n           FUN = paste, collapse= \",\")[c('X', 'Y')]\n#    X   Y\n#1 cat   Q\n#2 dog   U\n#3 cat   T\n#4 dog   P\n#5 cat Y,K\n#6 dog   P\n</code></pre>\n\n<h3>data</h3>\n\n<pre><code>dat &lt;- structure(list(X = c(\"cat\", \"dog\", \"cat\", \"dog\", \"cat\", \"cat\", \n \"dog\"), Y = c(\"Q\", \"U\", \"T\", \"P\", \"Y\", \"K\", \"P\")), \n  class = \"data.frame\", row.names = c(NA, -7L))\n</code></pre>\n\n<hr>\n\n<p>Or using <code>python</code></p>\n\n<pre><code>dat['grp'] = (dat.X != dat.X.shift()).cumsum()\nout = dat.groupby(['grp', 'X'])['Y'].apply(lambda x: \\\n           \",\".join(x)).reset_index()[['X', 'Y']]\nprint(out)\n#     X    Y\n#0  cat    Q\n#1  dog    U\n#2  cat    T\n#3  dog    P\n#4  cat  Y,K\n#5  dog    P\n</code></pre>\n\n<h3>data</h3>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndat = pd.DataFrame({'X': [\"cat\", \"dog\", \"cat\", \"dog\", \"cat\", \"cat\", \n        \"dog\"], \"Y\": [\"Q\", \"U\", \"T\", \"P\", \"Y\", \"K\", \"P\"]})\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10783329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kPSc1_H27w/AAAAAAAAAAI/AAAAAAAAAcs/kd769QzHBzo/photo.jpg?sz=128", "display_name": "Mariam Ibrahim", "link": "https://stackoverflow.com/users/10783329/mariam-ibrahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 1, "accepted_answer_id": 53752913, "answer_count": 1, "score": -4, "last_activity_date": 1546626318, "creation_date": 1544655761, "last_edit_date": 1546626318, "question_id": 53752717, "link": "https://stackoverflow.com/questions/53752717/merging-specific-rows-based-on-consecutive-duplicate-values-in-same-column", "title": "Merging specific rows based on consecutive duplicate values in same column", "body": "<p>Using R or python, i have a data set I would like to know how I could merge consecutive rows with consecutive duplicate entries.</p>\n\n<p>Example</p>\n\n<h2>X ....Y</h2>\n\n<p>cat...Q</p>\n\n<hr>\n\n<p>dog...U</p>\n\n<hr>\n\n<p>cat...T</p>\n\n<hr>\n\n<p>dog...P</p>\n\n<hr>\n\n<p>cat*...Y</p>\n\n<hr>\n\n<p>cat*...K</p>\n\n<hr>\n\n<p>dog...P</p>\n\n<p>The column X has some entries, I would like to merge any rows that have the entry \"cat\" two consecutive times in a row (i have highlighted them with a \"*\") so they would become one row with the entries in column Y to be (Y , K).</p>\n\n<h2>X.....Y</h2>\n\n<p>cat...Q</p>\n\n<hr>\n\n<p>dog...U</p>\n\n<hr>\n\n<p>cat...T</p>\n\n<hr>\n\n<p>dog...P</p>\n\n<hr>\n\n<p>cat...Y,K</p>\n\n<hr>\n\n<p>dog...T</p>\n\n<p>pretty much merging any rows with duplicate entries on one condition, if the are consecutive. </p>\n"}, {"tags": ["python", "rest", "authentication", "coinbase-api"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1544655856, "post_id": 53752705, "comment_id": 94358266, "body": "It&#39;s actually an unclosed parenthesis on the line before..."}, {"owner": {"reputation": 1, "user_id": 6281395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6772c6875c80f45c93099db77e89d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Karbon", "link": "https://stackoverflow.com/users/6281395/karbon"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1544656747, "post_id": 53752705, "comment_id": 94358540, "body": "Argh!!!  This has been driving me insane over such a simple thing.  Thanks for your help Jason."}], "owner": {"reputation": 1, "user_id": 6281395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6772c6875c80f45c93099db77e89d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Karbon", "link": "https://stackoverflow.com/users/6281395/karbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544655681, "creation_date": 1544655681, "question_id": 53752705, "link": "https://stackoverflow.com/questions/53752705/coinbase-api-python-request-syntax-question", "title": "Coinbase API Python request syntax question", "body": "<p>I am having trouble with the code in that every time I go to run it, it receive an error as follows:\n    <em>File \"/Users/richard/Desktop/Python/gdaxauth.py\", line 27\n    request.headers.update({          ^\n    SyntaxError: invalid syntax</em> </p>\n\n<p>So it seems to relate to something in the request.headers.update section.  I have tried researching this but have hit a total brick wall.  Can anyone advise as to what the correct syntax should be?  I am using Python 3.7.</p>\n\n<pre><code>import json\nimport hmac\nimport hashlib\nimport time\nimport requests\nimport base64\nimport urllib\nfrom requests.auth import AuthBase\n\n# Tracking execution time\nstart = time.time()\n\n# Create custom authentication for Exchange\nclass CoinbaseExchangeAuth(AuthBase):\n    def __init__(self, api_key, secret_key, passphrase):\n    self.api_key = api_key\n    self.secret_key = secret_key\n    self.passphrase = passphrase\n\n    def __call__(self, request):\n        timestamp = str(time.time())\n        message = timestamp + request.method + request.path_url +     (request.body or '')\n        hmac_key = base64.b64decode(self.secret_key)\n        signature = hmac.new(hmac_key, message.encode('utf-8'), hashlib.sha256)\n        signature_b64 = base64.b64encode(signature.digest().rstrip('\\n')\n\n        request.headers.update({\n            'CB-ACCESS-SIGN': signature_b64,\n            'CB-ACCESS-TIMESTAMP': timestamp,\n            'CB-ACCESS-KEY': self.api_key,\n            'CB-ACCESS-PASSPHRASE': self.passphrase,\n            'Content-type': 'application/json'\n        })\n        return request\n\n# Credentials - ADD YOUR API KEY CREDS IN THIS SECTION\nAPI_KEY = \"xxxxxxxxx\"\nSECRET_KEY = \"xxxxxxxxxx\"\nAPI_PASSPHRASE = \"xxxxxxxxxx\"\n\n# Get accounts\napi_url = 'https://api.gdax.com/' #'https://api.pro.coinbase.com'\nauth = CoinbaseExchangeAuth(API_KEY,SECRET_KEY,API_PASSPHRASE)\nr = requests.get(api_url + 'accounts', auth=auth)\n\n# Output account data and code execution time\nprint(json.dumps(r.json(),indent=4))\n</code></pre>\n"}, {"tags": ["python", "c++", "numpy", "eigen", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1544657238, "creation_date": 1544657238, "answer_id": 53752941, "question_id": 53752699, "link": "https://stackoverflow.com/questions/53752699/how-with-pybind11-to-bind-a-function-that-takes-as-argument-a-numpy-array-with/53752941#53752941", "title": "How with pybind11 to bind a function that takes as argument a numpy.array() with, for instance, a shape (10, 10, 3)?", "body": "<p>From the pybind information, you can extract the dimension information.</p>\n\n<p>For instance, this is what I do inside <a href=\"https://github.com/mbrucher/AudioTK/blob/master/Python/ATK/Core/Core.cpp#L76\" rel=\"nofollow noreferrer\">Audio ToolKit</a> with <code>m</code> the current Python module you want to build:</p>\n\n<pre><code>py::class_&lt;MyClass&gt;(m,\"name\")\n.def(\"set_pointer\", [](MyClass&amp; instance, const py::array_t&lt;DataType&gt;&amp; array)\n{\n  gsl::index channels = 1;\n  gsl::index size = array.shape(0);\n  if(array.ndim() == 2)\n  {\n    channels = array.shape(0);\n    size = array.shape(1);\n  }\n  // Call using array.data() and possibly add more dimension information, this is specific to my use case\n  instance.set_pointer(array.data(), channels, size);\n});\n</code></pre>\n\n<p>From this, you can create the <a href=\"https://eigen.tuxfamily.org/dox/group__TutorialMapClass.html\" rel=\"nofollow noreferrer\"><code>Eigen::Map</code></a> call instead to create an Eigen-like matrix that you can use in your templated code.</p>\n\n<p>Basically, pybind11 allows you to create a lambda where you can create your wrapper for your use case. The same works for return, you can get the Eigen class, create a pybind array that you populate with the Eigen data.</p>\n\n<p>Eigen has the Tensor class that you can use as well.</p>\n"}], "owner": {"reputation": 1127, "user_id": 1278365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33tk1.jpg?s=128&g=1", "display_name": "gmagno", "link": "https://stackoverflow.com/users/1278365/gmagno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544657238, "creation_date": 1544655629, "question_id": 53752699, "link": "https://stackoverflow.com/questions/53752699/how-with-pybind11-to-bind-a-function-that-takes-as-argument-a-numpy-array-with", "title": "How with pybind11 to bind a function that takes as argument a numpy.array() with, for instance, a shape (10, 10, 3)?", "body": "<p>I would like to write a function that can take a multidimensional numpy array, not just 2D.</p>\n\n<pre><code>void compute(Eigen::Ref&lt;Eigen::MatrixXd&gt; array3d) {\n    // change the array in-place\n    // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Eigen::MatrixXd &amp;compute() {\n    // create array\n    // ...\n    // and return it\n}\n</code></pre>\n\n<p>I am using Eigen here just to depict the goal, I believe Eigen does not support 3D, or more dimensions, arrays.</p>\n\n<p>I appreciate your feedback and patience since I am not familiar with Pybind11 nor Eigen.</p>\n"}, {"tags": ["python", "django", "django-models", "model"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1544655587, "post_id": 53752678, "comment_id": 94358176, "body": "Yes, you can use <code>.update(..)</code>."}, {"owner": {"reputation": 195, "user_id": 1359279, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b3dfe4c65fe445224b3668874a0288e8?s=128&d=identicon&r=PG", "display_name": "Gustavo_fringe", "link": "https://stackoverflow.com/users/1359279/gustavo-fringe"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1544655721, "post_id": 53752678, "comment_id": 94358226, "body": "i believe this only works with a queryset. @WillemVanOnsem"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1544655776, "post_id": 53752678, "comment_id": 94358243, "body": "correct, but you can use a <code>QuerySet</code>, like <code>Person.objects.filter(pk=instance.pk).update(foo=bar)</code>."}, {"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1544657166, "post_id": 53752678, "comment_id": 94358673, "body": "If you don&#39;t really need to save the slug in database, you can create a <code>slug</code> property on your model which will dynamically return <code>slugify(name + id)</code>."}, {"owner": {"reputation": 195, "user_id": 1359279, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b3dfe4c65fe445224b3668874a0288e8?s=128&d=identicon&r=PG", "display_name": "Gustavo_fringe", "link": "https://stackoverflow.com/users/1359279/gustavo-fringe"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1544809913, "post_id": 53752678, "comment_id": 94420726, "body": "@WillemVanOnsem thanks that worked well!"}], "owner": {"reputation": 195, "user_id": 1359279, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b3dfe4c65fe445224b3668874a0288e8?s=128&d=identicon&r=PG", "display_name": "Gustavo_fringe", "link": "https://stackoverflow.com/users/1359279/gustavo-fringe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544655518, "creation_date": 1544655518, "question_id": 53752678, "link": "https://stackoverflow.com/questions/53752678/can-you-update-a-model-instance-without-calling-save", "title": "can you update a model instance without calling save( )?", "body": "<p>I am working on a project that requires unique slugs. The slugs are dynamically created in a custom save() method using the objects name.</p>\n\n<pre><code>class SlugMixin(models.Model):\n    def save(self, *args, **kwargs):\n        slug = striptags(self.name)\n        self.slug = slugify(slug)\n        super(SlugMixin, self).save(*args, **kwargs)\n\n    class Meta:\n        abstract = True\n</code></pre>\n\n<p>name is not unique so it's possible to have multiples of the same slug. So the solution i was working with is appending the id of the instance to it's slug in a post_save. The problem here is by attempting to update the slug with the id. save() needs to be called again. </p>\n\n<pre><code>def ensure_unique_slug(sender, instance, created, **kwargs):\n    if created and Person.objects.filter(slug=instance.slug).count() &gt; 1:\n        instance.slug = instance.slug + '-{}'.format(instance.id)\n        instance.save()\n</code></pre>\n\n<p>rendering the update useless. is there anyway to update the slug without calling save()</p>\n"}, {"tags": ["python", "json", "utf-8", "jupyter"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544655900, "post_id": 53752658, "comment_id": 94358279, "body": "You are almost certainly using Python 2 in the console and Python 3 in your notebook. Writing Python 2/ 3 compatible code is not trivial. it is best to think of them as different languages."}, {"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1544699328, "post_id": 53752658, "comment_id": 94372808, "body": "It&#39;s apparently about the minor version here, thus your Jupyter notebook is probably pre-3.6. The <a href=\"https://docs.python.org/3/library/json.html#json.loads\" rel=\"nofollow noreferrer\">docs for <code>json.loads</code></a> say: &quot;<i>Changed in version 3.6: s can now be of type bytes or bytearray.</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1042, "user_id": 10372434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edfe9c80e6b7c6a794d4e421162d78c?s=128&d=identicon&r=PG", "display_name": "Arbazz Hussain", "link": "https://stackoverflow.com/users/10372434/arbazz-hussain"}, "is_accepted": false, "score": 1, "last_activity_date": 1544656859, "creation_date": 1544656859, "answer_id": 53752891, "question_id": 53752658, "link": "https://stackoverflow.com/questions/53752658/typeerror-the-json-object-must-be-str-not-bytes-on-jupyter-notebook-only/53752891#53752891", "title": "TypeError: the JSON object must be str, not &#39;bytes&#39; on Jupyter notebook only", "body": "<p>Works for me:</p>\n\n<pre><code>The version of the notebook server is: 5.6.0\nThe server is running on this version of Python:\nPython 3.6.6 |Anaconda custom (64-bit)| (default, Jun 28 2018, 11:27:44) [MSC v.1900 64 bit (AMD64)]\n</code></pre>\n\n<hr>\n\n<pre><code>A=b'[\"c1006\",\"c1007\"]'\njson.loads(A)\n</code></pre>\n\n<blockquote>\n  <p>['c1006', 'c1007']</p>\n</blockquote>\n\n<p>Check your version,seems to be running different python version than your anaconda has : </p>\n\n<pre><code>import sys \nsys.version\n</code></pre>\n"}], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544656859, "creation_date": 1544655404, "last_edit_date": 1544656322, "question_id": 53752658, "link": "https://stackoverflow.com/questions/53752658/typeerror-the-json-object-must-be-str-not-bytes-on-jupyter-notebook-only", "title": "TypeError: the JSON object must be str, not &#39;bytes&#39; on Jupyter notebook only", "body": "<p>The very same code</p>\n\n<pre><code>A=b'[\"c1006\",\"c1007\"]'\njson.loads(A)\n</code></pre>\n\n<p>works in Python console, but doesn't work in Jupyter notebook, saying</p>\n\n<pre><code>TypeError: the JSON object must be str, not 'bytes'\n</code></pre>\n\n<p>Why and how to fix / write portable?</p>\n\n<hr>\n\n<p>I am using Python 3.x on Linux:</p>\n\n<pre><code>(py36) dims@calculon:~$ python\nPython 3.6.3 |Anaconda, Inc.| (default, Oct 13 2017, 12:02:49)\n[GCC 7.2.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import json\n&gt;&gt;&gt; A= b'[\"c1006\",\"c1007\"]'\n&gt;&gt;&gt; json.loads(A)\n['c1006', 'c1007']\n</code></pre>\n"}, {"tags": ["python", "bash", "command-line", "xcode10"], "owner": {"reputation": 31, "user_id": 5352823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/502a04821c23d2880ee9f3d16b79f227?s=128&d=identicon&r=PG&f=1", "display_name": "rajesh", "link": "https://stackoverflow.com/users/5352823/rajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544655321, "creation_date": 1544655321, "question_id": 53752648, "link": "https://stackoverflow.com/questions/53752648/bash-command-python-script-to-add-target-dependencies-to-xcode-project", "title": "Bash command / Python script to add Target Dependencies to Xcode Project", "body": "<p>Here is my Xcode project structure Main Project(SampleApp), Sub project (Framework Source App). I need to add this out put framework of sub project as a Target dependency to the main project using bash command / python script, as of now I am doing it manually, but I would like to automate this process, any help would be appreciated, thanks in advance.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1544655332, "post_id": 53752635, "comment_id": 94358096, "body": "You might need to get a better keyboard."}, {"owner": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1544656652, "post_id": 53752635, "comment_id": 94358517, "body": "I just tryed it and it has nothing to do with the type of keyboard."}, {"owner": {"reputation": 584, "user_id": 10372572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DTty-xE8CY4/AAAAAAAAAAI/AAAAAAAAAgc/UtgZ2OsTcv0/photo.jpg?sz=128", "display_name": "Joyal Mathew", "link": "https://stackoverflow.com/users/10372572/joyal-mathew"}, "edited": false, "score": 0, "creation_date": 1544657472, "post_id": 53752635, "comment_id": 94358773, "body": "Can you post the code?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "edited": false, "score": 0, "creation_date": 1544706206, "post_id": 53753630, "comment_id": 94376607, "body": "if pressed_keys[pygame.K_w]: IndexError: tuple index out of range"}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "reply_to_user": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "edited": false, "score": 0, "creation_date": 1544706810, "post_id": 53753630, "comment_id": 94376957, "body": "ah, i was using <code>pygame.mouse.get_pressed()</code> instead of <code>pygame.key.get_pressed()</code>. I updated my answer"}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "reply_to_user": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "edited": false, "score": 0, "creation_date": 1544706842, "post_id": 53753630, "comment_id": 94376978, "body": "but also note you can do the same thing with multiple mouse clicks with <code>pygame.mouse.get_pressed()</code>"}, {"owner": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "edited": false, "score": 0, "creation_date": 1544717682, "post_id": 53753630, "comment_id": 94383778, "body": "I noticed that, I already have a fix tho but thanks for your help."}], "tags": [], "owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "is_accepted": true, "score": 2, "last_activity_date": 1544706771, "last_edit_date": 1544706771, "creation_date": 1544663153, "answer_id": 53753630, "question_id": 53752635, "link": "https://stackoverflow.com/questions/53752635/pygame-object-movement/53753630#53753630", "title": "Pygame Object Movement", "body": "<p>Grabbing the key presses from <code>for event in pygame.event.get():</code> will only get you one key press at a time. you need to use <code>pygame.key.get_pressed()</code> to grab the array of that state of the entire keyboard.</p>\n\n<pre><code>pressed_keys = pygame.key.get_pressed()\nif pressed_keys[pygame.K_w]:\n    # do stuff\nif pressed_keys[pygame.K_s]:\n    # do stuff\n</code></pre>\n\n<p>This all happens in the main game loop. This is also the way to grab the keys if you want to hold down keys.</p>\n\n<p>For more documentation: <a href=\"https://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed\" rel=\"nofollow noreferrer\">https://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10236621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alberto Dos Santos Rodriguez", "link": "https://stackoverflow.com/users/10236621/alberto-dos-santos-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 53753630, "answer_count": 1, "score": 0, "last_activity_date": 1544706771, "creation_date": 1544655240, "last_edit_date": 1544690095, "question_id": 53752635, "link": "https://stackoverflow.com/questions/53752635/pygame-object-movement", "title": "Pygame Object Movement", "body": "<p>I have two objects that I control with my keboard, one with WASD and the other with the arrows. (Imagine a 2D game)</p>\n\n<p>I recently made the code to make them keep moving while the key is pressed but if I keep pressing W and up arrow at the same time only one works and the other one stops.\n I would like to know a fix.</p>\n\n<p>This is the movement code:</p>\n\n<pre><code>if e.type == pygame.KEYDOWN:\n\n    if e.key==K_d:\n        PX += movimentenpx\n        EnergiaD +=energiapermoviment\n\n    if e.key==K_a:\n        PX -= movimentenpx\n        EnergiaD +=energiapermoviment\n\n    if e.key==K_w:\n\n        PY -= movimentenpx\n        EnergiaD +=energiapermoviment\n\n    if e.key==K_s:\n\n        PY += movimentenpx\n        EnergiaD +=energiapermoviment\n\n    if e.key ==K_UP:\n\n        PY2 -= movimentenpx\n        EnergiaD2 +=energiapermoviment\n\n    if e.key ==K_LEFT:\n        PX2 -= movimentenpx\n\n        EnergiaD2 +=energiapermoviment\n\n    if e.key ==K_DOWN:\n\n        PY2 += movimentenpx\n        EnergiaD2 +=energiapermoviment\n\n    if e.key ==K_RIGHT:\n        PX2 +=movimentenpx\n        EnergiaD2 +=energiapermoviment\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 1028, "user_id": 5025510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Qjl75.jpg?s=128&g=1", "display_name": "Indominus", "link": "https://stackoverflow.com/users/5025510/indominus"}, "edited": false, "score": 0, "creation_date": 1544655539, "post_id": 53752604, "comment_id": 94358161, "body": "if you want 2nd (0-based) column to the last column you can do      <b>a[:, 2:]</b>  elseif you want explicitly 2nd and 3rd columns, you can do      <b>a[:, 2:4]</b>"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 2597134, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4e87571c569de2d661bfc8a8de52fe97?s=128&d=identicon&r=PG&f=1", "display_name": "chad", "link": "https://stackoverflow.com/users/2597134/chad"}, "edited": false, "score": 0, "creation_date": 1544655635, "post_id": 53752639, "comment_id": 94358198, "body": "This gives me [[3 4] [7 8] [11 12]], how can I get [3 7 11] and [4 8 12] ?"}, {"owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "reply_to_user": {"reputation": 325, "user_id": 2597134, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4e87571c569de2d661bfc8a8de52fe97?s=128&d=identicon&r=PG&f=1", "display_name": "chad", "link": "https://stackoverflow.com/users/2597134/chad"}, "edited": false, "score": 0, "creation_date": 1544656311, "post_id": 53752639, "comment_id": 94358420, "body": "You have to transpose the result : <code>a[:, 2:4].T</code>"}, {"owner": {"reputation": 325, "user_id": 2597134, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4e87571c569de2d661bfc8a8de52fe97?s=128&d=identicon&r=PG&f=1", "display_name": "chad", "link": "https://stackoverflow.com/users/2597134/chad"}, "edited": false, "score": 0, "creation_date": 1544656529, "post_id": 53752639, "comment_id": 94358480, "body": "Thanks ! @AxelPuig  that\u2019s what I needed :)"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1544656595, "post_id": 53752639, "comment_id": 94358500, "body": "Or <code>a.T[2:4]</code>.."}], "tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 2, "last_activity_date": 1544656326, "last_edit_date": 1544656326, "creation_date": 1544655272, "answer_id": 53752639, "question_id": 53752604, "link": "https://stackoverflow.com/questions/53752604/numpy-slicing-2-columns-from-2d-array/53752639#53752639", "title": "Numpy slicing 2 columns from 2D array", "body": "<p>The elements you are trying to get with this code:</p>\n\n<pre><code>for i in range(2,4):\n    print a[:, i]\n</code></pre>\n\n<p>correspond to that:</p>\n\n<pre><code>print a[:, 2:4]\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 2597134, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4e87571c569de2d661bfc8a8de52fe97?s=128&d=identicon&r=PG&f=1", "display_name": "chad", "link": "https://stackoverflow.com/users/2597134/chad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1544655409, "accepted_answer_id": 53752639, "answer_count": 1, "score": -1, "last_activity_date": 1544656326, "creation_date": 1544655036, "last_edit_date": 1544655783, "question_id": 53752604, "link": "https://stackoverflow.com/questions/53752604/numpy-slicing-2-columns-from-2d-array", "closed_reason": "Duplicate", "title": "Numpy slicing 2 columns from 2D array", "body": "<p>Hi I am trying to slice 2 columns from a 2D numpy array but it seems that I can't get it without using a loop.<br>\nWhat am i missing? I am trying to get <code>[3 7 11]</code> and <code>[4 8 12]</code>.</p>\n\n<pre><code>import numpy as np\n\na=np.array([1,2,3,4,5,6,7,8,9,10,11,12])\n\na=np.reshape(a,(3,4))\n\nprint a[:,2] #vgives me [ 3  7 11]\n</code></pre>\n\n<p>The only way I can do it seems to be with a loop</p>\n\n<pre><code>for i in range(2,4):\n    print a[:,i]\n</code></pre>\n\n<p>How can I do that with pure Numpy slicing?</p>\n"}, {"tags": ["python", "sql", "stored-procedures", "pyodbc"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544658058, "post_id": 53752742, "comment_id": 94358924, "body": "Thanks, however just to be clear from my side. This stored proc is not returning any output. It simply creates two new tables in the schema. Now when I run thru Python only one table is being generated and not the other one. The way this stored proc works is that it creates 1st table, writes it to the DB and then creates the 2nd table (based on the data in the 1st table) and writes the 2nd table too. It is the 1st tables that is being only created in the database when running thru Python"}, {"owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "reply_to_user": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544658271, "post_id": 53752742, "comment_id": 94358985, "body": "Ah ok. Could you post the stored procedure code that is creating the tables?"}, {"owner": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544658518, "post_id": 53752742, "comment_id": 94359053, "body": "Added in the post above. Thanks!"}, {"owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "reply_to_user": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544659684, "post_id": 53752742, "comment_id": 94359361, "body": "Had a quick look at the code. Are the tables you are attempting to save the #col and #RetTable? Using the # character in this way means they are temporary tables, and so will be deleted on the session closing. I can&#39;t see any other tables being created. If I am wrong, could you let me know where you are defining the tables in question."}, {"owner": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544660732, "post_id": 53752742, "comment_id": 94359581, "body": "Thanks. There are some temp tables that are created in the Stored Proc but ultimately it creates two final tables &quot;INPUT_TABLEConstituentReturns&quot; &amp; &quot;INPUT_TABLEIndexReturns&quot;. It is the 1st table that is being created by Python while running the same stored proc thru SQL studio creates both tables. What is extremely puzzling to me is --- Python is executing the stored proc query on the SQL Server thus Python is not even thinking its the SQL which is doing the job so how come results are different?"}, {"owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "reply_to_user": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544661407, "post_id": 53752742, "comment_id": 94359716, "body": "Ok, so my guess is that it is encountering an error, and because you are using PRINT it isn&#39;t being communicated to pyodbc. Change the PRINTs at the end in your error handling to RAISERROR() instead and it should fail and give you the correct error message. <a href=\"https://docs.microsoft.com/en-us/sql/t-sql/language-elements/raiserror-transact-sql?view=sql-server-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/sql/t-sql/language-elements/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "reply_to_user": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544661474, "post_id": 53752742, "comment_id": 94359734, "body": "If it isn&#39;t that. Are you connecting through python using the same log on as you are using on SSMS?"}, {"owner": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544666959, "post_id": 53752742, "comment_id": 94360827, "body": "Yes, connection is fine (and I use same conn string for multiple other instances which work fine) as python still runs the proc (no errors) and the 1st table is being created, its just the 2nd table that is not being created"}, {"owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "reply_to_user": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "edited": false, "score": 0, "creation_date": 1544667279, "post_id": 53752742, "comment_id": 94360899, "body": "Did you try using the RAISERROR function? I think if where you are using &quot;if @error = 1 GOTO error_three&quot; encounters an error it will just end the function as though there was no error. So it will execute the code up to the point where the first table is created, then it will encounter an error and PRINT a message. Since you are not capturing the message in Python, pyodbc will execute as if there is no error. Alternatively, you could capture and print the messages in python. If it runs without error then you should see the &#39;Returns procedure is done.&#39;"}], "tags": [], "owner": {"reputation": 31, "user_id": 3793275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5a1996604154382d5d884834c62ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Harrison", "link": "https://stackoverflow.com/users/3793275/steven-harrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1544655897, "creation_date": 1544655897, "answer_id": 53752742, "question_id": 53752579, "link": "https://stackoverflow.com/questions/53752579/python-running-sql-stored-procedure/53752742#53752742", "title": "Python Running SQL Stored Procedure", "body": "<p>You will need to use cursr.fetchall() to get all the rowsets, and use cursr.nextset() to get the second one.</p>\n\n<p>See details here: <a href=\"https://www.easysoft.com/developer/languages/python/examples/CallSPMultiResultSet.html\" rel=\"nofollow noreferrer\">https://www.easysoft.com/developer/languages/python/examples/CallSPMultiResultSet.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4641348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152708231107876/picture?type=large", "display_name": "Gaurav Sinha", "link": "https://stackoverflow.com/users/4641348/gaurav-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544658501, "creation_date": 1544654921, "last_edit_date": 1544658501, "question_id": 53752579, "link": "https://stackoverflow.com/questions/53752579/python-running-sql-stored-procedure", "title": "Python Running SQL Stored Procedure", "body": "<p>I am relatively very new to the world of SQL. I have a stored proc that somebody wrote and I simply want to execute it thru my Python. </p>\n\n<p>Now the stored proc accepts a table as an input and generates two output tables. It works fine and I have tried it in SQL Studio using </p>\n\n<pre><code>exec CalcIdxRet_v4  INPUT_TABLE\n</code></pre>\n\n<p>and it works absolutely fine. However when i run it in Python. It works fine and no errors but it ONLY produces one of the 2 output tables. Since there are no errors and still there is one output table only, it is puzzling to me.</p>\n\n<p>Can someone throw some light. Many many thanks</p>\n\n<p>Python code:</p>\n\n<pre><code>import pyodbc as db\n(username, password, driver, database, server)  = ('xxx', 'xxx', '{ODBC Driver 13 for SQL Server}', 'DB', 'ZZZZZ')\nconn = db.connect('DRIVER='+driver+'; PORT=1433; SERVER='+server+'; PORT=1443; DATABASE='+database+'; UID='+username+'; PWD='+ password)\n\ncursr = conn.cursor()\n\nsql_btest_1 = ('exec CalcIdxRet_v4  INPUT_TABLE')\n\ncursr.execute(sql_btest_1)\nconn.commit()\n</code></pre>\n\n<p>Here is the stored proc</p>\n\n<pre><code>USE [DevDB]\nGO\n/****** Object:  StoredProcedure [dbo].[CalcIdxRet_v4]    Script Date: 12/12/2018 6:46:13 PM ******/\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\n-- drop table temp\n-- create table temp(date date, fs_perm_sec_id varchar(10), weight float)\n-- insert into temp values('20160101','aaa',1)\n-- [CalcIdxRet_v2b] 'temp'\n\nALTER procedure [dbo].[CalcIdxRet_v4]\n\n@weightTable varchar(max), \n@retType VARCHAR(25) = null,  -- USD or local\n@constTable varchar(max) = null,\n@indexTable varchar(max) = null,\n@finalDate date = '21000101'\n\n/* Table definitions\n- @weightTable: user supplied date, fs_perm_sec_id, weight\n- @constTable: the constituent data when all is done\n- TempReturns: mirrors @constTable this is where I work\n*/\nas\n\n-- catch table names with a period\nif charindex('.',@weightTable) &gt; 0 GOTO error_one\nif charindex('.',@constTable) &gt; 0 GOTO error_one\nif charindex('.',@indexTable) &gt; 0 GOTO error_one\n\n\n-- auto generate output table names\nif @constTable is null set @constTable = @weightTable + 'ConstituentReturns'\nif @indexTable is null set @indexTable = @weightTable + 'IndexReturns'\n\n/*\n alter view vw_HistPrice_monthly_USD as select date, startDate, endDate, terminationFlag, fs_perm_sec_id, priceRet, divRet, totalRet from HistPrice_monthly\n alter view vw_HistPrice_monthly_local as select date, startDate, endDate, terminationFlag,fs_perm_sec_id, priceRet_local as priceRet, divRet, totalRet_local as totalRet from HistPrice_monthly\n alter view vw_HistPrice_daily_USD as select date, startDate, endDate, terminationFlag,fs_perm_sec_id, priceRet, divRet, totalRet from HistPrice_daily\n alter view vw_HistPrice_daily_local as select date, startDate, endDate, terminationFlag,fs_perm_sec_id, priceRet_local as priceRet, divRet, totalRet_local as totalRet from HistPrice_daily\n alter view vw_HistPriceUS_monthly_USD as select date, startDate, endDate, terminationFlag,fs_perm_sec_id, priceRet, divRet, totalRet from HistPriceUS_monthly\n alter view vw_HistPriceUS_daily_USD as select date, startDate, endDate, terminationFlag,fs_perm_sec_id, priceRet, divRet, totalRet from HistPriceUS_daily\n*/\n\ndeclare @DynamicSQL nvarchar(max)\ndeclare @startDate date = '19000101'\ndeclare @startDatePrev date = '19000101'\ndeclare @endDate date\ndeclare @interimDate date\ndeclare @interimDatePrev date\ndeclare @schema varchar(20) = (select SCHEMA_NAME())\ndeclare @temp varchar(25) = (select @schema + '.temp_returns')\ndeclare @error int = 0\n\nset @weightTable = (select @schema + '.' + @weightTable)\nset @constTable = (select @schema + '.' + @constTable)\nset @indexTable = (select @schema + '.' + @indexTable)\n\nif charindex('#',@weightTable) &gt; 0  -- if temp table used for table weights, schema is wrong\nbegin \n    set @weightTable = (select 'tempdb.' + @schema + '.' + \n        substring(@weightTable,(select charindex('#',@weightTable)),(select DATALENGTH(@weightTable))))\nend\n\n\nIF OBJECT_ID(@temp, 'U') IS NOT NULL\nbegin \n    set @DynamicSQL = 'DROP TABLE ' + @temp;\n    exec (@DynamicSQL)\nend\n\n------------------------------------\n-- Ensure proper inputs\n------------------------------------\n\n-- ill-specified weighting table\nset @DynamicSQL = \n'set @error0 = (select case when OBJECT_ID ('''+@weightTable+''', ''U'') IS NULL then 1 else 0 end)'\nEXECUTE sp_executesql @DynamicSQL, N'@error0 bit OUTPUT', @error0=@error OUTPUT\n\nif @error = 1 goto error_three\n\n\n-- wrong columns\nCREATE TABLE #cols(column_name varchar(500), IsDate int, IsNum int, IsChar Int)\n\nSET @DynamicSQL = \n    'INSERT INTO #cols\n    SELECT column_name\n    , case when datetime_precision is not null then 1 else 0 end as IsDate\n    , case when numeric_precision is not null then 1 else 0 end as IsNum\n    , case when character_maximum_length is not null then 1 else 0 end as IsChar\n    FROM INFORMATION_SCHEMA.COLUMNS\n    WHERE TABLE_SCHEMA+''.''+TABLE_NAME = '''+@weightTable+''''\nEXEC(@DynamicSQL)\n\nset @error = (\n    select 3-sum(case when column_name = 'date' and IsDate &gt; 0 then 1 else 0 end)\n        -  sum(case when column_name = 'fs_perm_sec_id' and IsChar &gt; 0 then 1 else 0 end)\n        - sum(case when column_name = 'weight' and IsNum &gt; 0 then 1 else 0 end) as error\n    from #cols\n)\nif @error &gt; 0 goto error_five\n\n\n-- non-unique date / fs_perm_sec_id\nset @DynamicSQL =\n'select @error0 = count(*)\nfrom (\n    SELECT date, fs_perm_sec_id, COUNT(*) as ct\n    FROM ' + @weightTable +\n    ' GROUP BY date, fs_perm_sec_id\n    HAVING COUNT(*) &gt; 1\n) as a'\nEXECUTE sp_executesql @DynamicSQL, N'@error0 int OUTPUT', @error0=@error OUTPUT\n\nif @error &gt; 0 goto error_four\n\n\n\n\n\n------------------------------------\n-- Copy table structure from Returns\n------------------------------------\n-- what type of returns are calculating?\nSET @DynamicSQL = 'select top 0 date, startDate, endDate, terminationFlag, fs_perm_sec_id, priceRet_local, totalRet_local, fxRet, priceRet as priceRet_USD, totalRet as totalRet_USD INTO ' + @temp + ' from HistPrice_daily';\nexec (@DynamicSQL)\n\nSET @DynamicSQL = 'alter table ' + @temp + ' add weightOpen float, weightClose float'\nexec (@DynamicSQL)\n\nSET @DynamicSQL = 'alter table ' + @temp + ' alter column enddate date'\nexec (@DynamicSQL)\n\nSET @DynamicSQL = 'SELECT top 0 * INTO ' + @constTable + ' FROM ' + @temp;\nexec (@DynamicSQL)\n\n\n------------------------------------\n-- Pre-Allocate Returns for Speed\n------------------------------------\nCREATE TABLE #RetTable\n(   date DATE\n    , startDate DATE\n    , endDate DATE\n    , terminationFlag BIT\n    , fs_perm_sec_id VARCHAR(50)\n    , priceRet_local FLOAT\n    , totalRet_local FLOAT\n    , fxRet FLOAT\n    , priceRet_usd FLOAT\n    , totalRet_usd FLOAT\n\n)\n\n\nset @DynamicSQL =\n    'insert into #RetTable\n    select date, startDate, endDate, terminationFlag, fs_perm_sec_id, priceRet_local, totalRet_local, case when currency = ''USD'' then 1 else fxRet end as fxRet, priceRet, totalRet\n    from HistPrice_daily as a\n    where fs_perm_sec_id in (select fs_perm_sec_id from ' + @weightTable + ')\n    and priceRet is not null'\nexec (@DynamicSQL)\n\n\nset @DynamicSQL =\n    'insert into #RetTable\n    select date, startDate, endDate, terminationFlag, fs_perm_sec_id, priceRet_local, totalRet_local, case when currency = ''USD'' then 1 else fxRet end as fxRet, priceRet_local as priceRet, totalRet_local as totalRet\n    from HistPriceUS_daily as a\n    where fs_perm_sec_id in (select fs_perm_sec_id from ' + @weightTable + ')\n    and priceRet is not null'\nexec (@DynamicSQL)\n\nCREATE INDEX idx ON #RetTable(fs_perm_sec_id,startDate)\n\n\n------------------------------------\n-- Initial start and end date\n------------------------------------\nset @DynamicSQL = \n'select @date = min(date) from ' + @weightTable +\n' where date &gt; (select coalesce(max(date),''19000101'') from ' + @constTable + ')'\nEXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@startDate OUTPUT\n\nset @DynamicSQL = \n'select @date = coalesce(min(date),''21000101'') from ' + @weightTable +\n' where date &gt; ''' + convert(varchar(8),@startDate,112) +''''\nEXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@endDate OUTPUT\n\n------------------------------------\n-- Loop on rebalance dates\n------------------------------------\ndeclare @run bit = 1\n\nif @startDate = '21000101' begin set @run = 0 end\n\nwhile (@run = 1)\nbegin\n\n    set @DynamicSQL = 'truncate table ' + @temp;\n    exec (@DynamicSQL)\n\n    -- source the dreturns data\n    set @DynamicSQL = \n    'insert into ' + @temp + \n    ' select date, startDate, endDate, terminationFlag, fs_perm_sec_id, priceRet_local, totalRet_local, fxRet, priceRet_usd, totalRet_usd\n        , null as weightOpen, null as weightClose\n    from #RetTable as a\n    where startDate between dateadd(d,1,''' + convert(varchar(8),@startDate,112) + ''') and ''' + convert(varchar(8),@endDate,112) +'''\n    and fs_perm_sec_id in (select fs_perm_sec_id from ' + @weightTable + ' where date = '''+convert(varchar(8),@startDate,112)+''')\n    and priceRet_local is not null'\n    exec (@DynamicSQL)\n\n\n\n    -- This prevents corp actions prior to being in portfolio\n    set @DynamicSQL =\n    'delete from ' + @temp + ' where startDate &lt; (select max(endDate) from '  + @constTable + ')'  \n    exec (@DynamicSQL)\n\n    ------------------------------------\n    -- Fill missing companies\n    ------------------------------------\n\n    -- This is really slick, it allows for errant days where a single\n    -- company shows up in the pricing table.  On these days, we dummy\n    -- a return of 1, so the rest of the portfolio just carries forward!\n\n    set @DynamicSQL = '\n    insert into ' + @temp + ' (date, fs_perm_sec_id, priceRet_local, totalRet_local, priceRet_usd, totalRet_usd)\n    select *, 1 as priceRet_local, 1 as totalRet_local, 1 as priceRet_usd, 1 as totalRet_usd\n    from (\n        select *\n        from ( select distinct date from ' + @temp + ' ) as a\n        join (select distinct fs_perm_sec_id from ' + @weightTable + ' where date = '''+convert(varchar(8),@startDate,112)+''') as b\n        on 1=1\n        except\n        select date, fs_perm_sec_id \n        from ' + @temp + '\n    ) as aa\n\n    -- delete past termination \n    delete from ' + @temp + '\n    where fs_perm_sec_id + convert(varchar(8),date,112)\n    in (\n        select a.fs_perm_sec_id + convert(varchar(8),a.date,112)\n        from ' + @temp + ' as a\n        join ' + @temp + ' as b\n        on a.date &gt; b.date and a.fs_perm_sec_id = b.fs_perm_sec_id\n        where b.terminationFlag = 1\n    )\n\n    -- update enddate\n    ;WITH cte AS (SELECT *, ROW_NUMBER() OVER(PARTITION BY date ORDER BY ct DESC) AS rn\n              FROM (SELECT date, enddate, COUNT(*) AS ct              \n                    FROM ' + @temp + '            \n                    GROUP BY date, enddate) AS a\n             )\n    UPDATE ' + @temp + ' \n    SET enddate = bb.enddate\n    FROM ' + @temp + ' AS aa\n    JOIN cte AS bb\n    ON aa.date = bb.date\n    where aa.enddate IS NULL AND bb.rn = 1'\n    exec (@DynamicSQL)\n\n    ------------------------------------\n    -- Initial weights\n    ------------------------------------\n    set @DynamicSQL = \n    'update ' + @temp +\n    '   set weightOpen = b.weight\n    from ' + @temp + ' as a\n    join ' + @weightTable + ' as b\n    on a.fs_perm_sec_id = b.fs_perm_sec_id\n    where a.date = (select min(date) from ' + @temp + ') \n    and b.date = ''' + convert(varchar(8),@startDate,112) + '''';\n    exec (@DynamicSQL)\n\n\n    set @DynamicSQL = \n    'select @date = (select min(date) from ' + @temp + ')'\n    EXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@interimDate OUTPUT\n\n\n    -- normalize weight\n    set @DynamicSQL = \n    'update ' + @temp +\n    ' set weightOpen = weightOpen / b.wgt\n    from ' + @temp + ' as a\n    join (\n        select date, sum(weightOpen) as wgt\n        from ' + @temp + '\n        where date = ''' + convert(varchar(8),@interimDate,112) + ''' \n        group by date\n    ) as b\n    on a.date = b.date\n\n    -- update close\n    update ' + @temp + '\n    set weightClose = priceRet_usd*weightOpen / div\n    from ' + @temp + ' as a\n    join (\n        select date, sum(priceRet_usd*weightOpen) as div\n        from ' + @temp + '\n        where date = ''' + convert(varchar(8),@interimDate,112) + ''' \n        group by date\n    ) as b\n    on a.date = b.date'\n    exec (@DynamicSQL)\n\n\n    ------------------------------------\n    -- Loop on intirim dates\n    ------------------------------------\n\n    declare @ct int\n\n    set @DynamicSQL = \n    'select @ct2 = (select count(*) from ' + @temp + ' where date &gt; ''' + convert(varchar(8),@interimDate,112) + ''')'\n    EXECUTE sp_executesql @DynamicSQL, N'@ct2 int OUTPUT', @ct2=@ct OUTPUT\n\n\n\n    while (@ct &lt;&gt; 0)\n    begin \n        select @interimDatePrev = @interimDate\n        --select @interimDate = min(date) from TempReturns where date &gt; @interimDatePrev\n\n        set @DynamicSQL = \n        'select @date = (select min(date) from ' + @temp + ' where date &gt; ''' + convert(varchar(8),@interimDate,112) + ''')'\n        EXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@interimDate OUTPUT\n\n        -- push forward weights\n        set @DynamicSQL =\n        'update a \n        set weightOpen = b.weightClose\n        from ' + @temp + ' as a\n        join ' + @temp + ' as b\n        on a.fs_perm_sec_id = b.fs_perm_sec_id\n        where a.date = ''' + convert(varchar(8),@interimDate,112) + ''' \n            and b.date = ''' + convert(varchar(8),@interimDatePrev,112) + ''''\n        exec(@DynamicSQL)\n\n        -- update in case something was terminated\n        set @DynamicSQL =\n        'update a\n        set weightOpen = weightOpen / b.wgt\n        from ' + @temp + ' as a\n        join (\n            select date, sum(weightOpen) as wgt\n            from ' + @temp + '\n            where date = ''' + convert(varchar(8),@interimDate,112) + ''' \n            group by date\n        ) as b\n        on a.date = b.date'\n        exec(@DynamicSQL)\n\n        -- update close\n        set @DynamicSQL =\n        'update a\n        set weightClose = priceRet_usd*weightOpen / div\n        from ' + @temp + ' as a\n        join (\n            select date, sum(priceRet_usd*weightOpen) as div\n            from ' + @temp + '\n            where date = ''' + convert(varchar(8),@interimDate,112) + ''' \n            group by date\n        ) as b\n        on a.date = b.date'\n        exec(@DynamicSQL)\n\n    set @DynamicSQL = \n    'select @ct2 = (select count(*) from ' + @temp + ' where date &gt; ''' + convert(varchar(8),@interimDate,112) + ''')'\n    EXECUTE sp_executesql @DynamicSQL, N'@ct2 int OUTPUT', @ct2=@ct OUTPUT\n\n\n    end\n    -------------\n    -- END WHILE\n    ------------\n\n    set @DynamicSQL = 'insert into ' + @constTable + ' select * from ' + @temp\n    exec(@DynamicSQL)\n\n\n    -------------------\n    -- update dates\n    -------------------\n    -- If there is no end date, we set end date to 2100-01-01 and the portfolio gets\n    -- computed all of the way out.  If there is rebalance date more recent than the\n    -- max date in constituent table, then start date to 2100-01-01.  This is our \n    -- flag to end loop\n    set @startDatePrev = @startDate\n\n    set @DynamicSQL = \n    'select @date = coalesce(min(date),''21000101'') from ' + @weightTable +\n    ' where date &gt;= (select max(Date) from ' + @constTable + ')'\n    EXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@startDate OUTPUT\n\n    set @DynamicSQL = \n    'select @date = coalesce(min(date),''21000101'') from ' + @weightTable +\n    ' where date &gt; ''' + convert(varchar(8),@startDate,112) +''''\n    EXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@endDate OUTPUT\n\n    if @endDate &gt;= @finalDate set @endDate = @finalDate\n    if @startDate &gt;= @finalDate set @run = 0\n    if @startDate in('21000101',@startDatePrev) set @run = 0\n\n\nend\n-------------\n-- END WHILE\n------------\nset @DynamicSQL = 'drop table ' + @temp;\nexec(@DynamicSQL)\n\nprint('constituents done')\n-------------\n-- Aggregate\n-------------\ndeclare @datePrev date\ndeclare @date date\n\nset @DynamicSQL =\n'select min(endDate) as date\n     , count(*) as constituents\n     , sum(weightOpen) as weightOpen\n     , sum(weightClose) as weightClose\n     , sum(weightOpen * priceRet_local) as priceRet_local\n     , sum(weightOpen * totalRet_local) as totalRet_local\n     , sum(weightOpen * fxRet) as fxRet\n     , sum(weightOpen * priceRet_usd) as priceRet_usd\n     , sum(weightOpen * totalRet_usd) as totalRet_usd\n\ninto ' + @indexTable +\n' from ' + @constTable +\n' group by date'\nexec (@DynamicSQL)\n\nset @DynamicSQL =\n'delete from ' + @indexTable + ' where date is null'\nexec(@DynamicSQL)\n\nset @DynamicSQL =\n'alter table ' + @indexTable +\n' add priceIdxLevel_local numeric(16,8)\n    , trIdxLevel_local numeric(16,8)\n    , priceIdxLevel_usd numeric(16,8)\n    , trIdxLevel_usd numeric(16,8)'\nexec (@DynamicSQL)\n\nset @DynamicSQL =\n'insert into ' + @indexTable + ' (date, priceIdxLevel_local,trIdxLevel_local,priceIdxLevel_usd, trIdxLevel_usd)\nselect (select min(startdate) from ' + @constTable + '),100,100,100,100'\nexec (@DynamicSQL)\n\nset @DynamicSQL = \n'select @date = (select max(date) from ' + @indexTable + ' where priceIdxLevel_local is not null)'\nEXECUTE sp_executesql @DynamicSQL, N'@date date OUTPUT', @date=@datePrev OUTPUT\n\nset @DynamicSQL = \n'select @date2 = (select min(date) from ' + @indexTable + ' where date &gt; ''' + convert(varchar(8),@datePrev,112) + ''')'\nEXECUTE sp_executesql @DynamicSQL, N'@date2 date OUTPUT', @date2=@date OUTPUT\n\n\nset @run = 1\nwhile (@run = 1)\nbegin\n\n    set @DynamicSQL =\n    'update a\n    set priceIdxLevel_local = b.priceIdxLevel_local*a.priceRet_local\n        , trIdxLevel_local = b.trIdxLevel_local*a.totalRet_local\n        , priceIdxLevel_usd = b.priceIdxLevel_usd*a.priceRet_usd\n        , trIdxLevel_usd = b.trIdxLevel_usd*a.totalRet_usd\n    from ' + @indexTable + ' as a\n    join ' + @indexTable + ' as b\n    on a.date = ''' + convert(varchar(8),@date,112) + ''' and \n        b.date = ''' + convert(varchar(8),@datePrev,112) + ''''\n    exec(@DynamicSQL)\n\n    set @datePrev = @date\n\n\n    set @DynamicSQL = \n    'select @date2 = (select coalesce(min(date),''21000101'') from ' + @indexTable + \n    ' where date &gt; ''' + convert(varchar(8),@datePrev,112) + ''')'\n    EXECUTE sp_executesql @DynamicSQL, N'@date2 date OUTPUT', @date2=@date OUTPUT\n\n    if @date = '21000101' begin set @run = 0 end\nend\n\n\n------------------------\n-- Backwards Compatability\n------------------------\nif @retType = 'USD'\nbegin\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column priceRet_local'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column totalRet_local'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column fxRet'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column priceRet_local'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column totalRet_local'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column fxRet'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column priceIdxLevel_local'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column trIdxLevel_local'\n    exec(@DynamicSQL)\n\n    set @DynamicSQL = 'sp_rename ''' + @constTable +'.priceRet_USD'',''priceRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @constTable +'.totalRet_USD'',''totalRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.priceRet_usd'',''priceRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.totalRet_usd'',''totalRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.priceIdxLevel_USD'',''priceIdxLevel'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.trIdxLevel_USD'',''trIdxLevel'',''COLUMN'''\n    exec(@DynamicSQL)\nend\n\nif @retType = 'local'\nbegin\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column priceRet_USD'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column totalRet_USD'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @constTable +' drop column fxRet'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column priceRet_USD'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column totalRet_USD'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column fxRet'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column priceIdxLevel_USD'\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'alter table ' + @indexTable +' drop column trIdxLevel_USD'\n    exec(@DynamicSQL)\n\n    set @DynamicSQL = 'sp_rename ''' + @constTable +'.priceRet_local'',''priceRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @constTable +'.totalRet_local'',''totalRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.priceRet_local'',''priceRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.totalRet_local'',''totalRet'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.priceIdxLevel_local'',''priceIdxLevel'',''COLUMN'''\n    exec(@DynamicSQL)\n    set @DynamicSQL = 'sp_rename ''' + @indexTable +'.trIdxLevel_local'',''trIdxLevel'',''COLUMN'''\n    exec(@DynamicSQL)\nend\n\n\nGOTO clean_exit\n\n\n------------------------\n-- Error codes\n------------------------\n\nerror_one:\nprint('Input or output table names should not include schema!')\nreturn\n\nerror_two:\nprint('Input frequency or return type is unknown!')\nreturn\n\nerror_three:\nprint('The weighting table does not exist!')\nreturn\n\nerror_four:\nprint('The security and date combinations in the weighting table are not unique.')\nreturn\n\nerror_five:\nprint('The weighting table is not correctly specified.  \n    It needs a date column called date, \n    a char column called fs_perm_sec_id, \n    and a numeric column called weight.')\nreturn\n\nclean_exit:\nprint('Returns procedure is done.')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1544655159, "post_id": 53752537, "comment_id": 94358034, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11850425/custom-python-list-sorting\">Custom Python list sorting</a>"}], "answers": [{"tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": true, "score": 1, "last_activity_date": 1544684084, "last_edit_date": 1544684084, "creation_date": 1544655169, "answer_id": 53752622, "question_id": 53752537, "link": "https://stackoverflow.com/questions/53752537/sort-list-by-a-function-with-several-parameters/53752622#53752622", "title": "Sort list by a function with several parameters", "body": "<p>Use the ranking function as the sorting key:</p>\n\n<pre><code>sorted_list.sort(key=lambda node: function(node, player))\n</code></pre>\n\n<p>I don't know why you pass <code>player</code> as parameter if you're not using it. If you remove it, the key will be even simpler:</p>\n\n<pre><code>sorted_list.sort(key=function)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9790605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca746d261520541e482d02c935a6f634?s=128&d=identicon&r=PG&f=1", "display_name": "Bny4W", "link": "https://stackoverflow.com/users/9790605/bny4w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53752622, "answer_count": 1, "score": 0, "last_activity_date": 1544684084, "creation_date": 1544654683, "question_id": 53752537, "link": "https://stackoverflow.com/questions/53752537/sort-list-by-a-function-with-several-parameters", "title": "Sort list by a function with several parameters", "body": "<p>How can I sort some objects on the following list with the result of the <code>function</code>?</p>\n\n<pre><code>sorted_list = []\nfor c in objects:\n    sorted_list.insert(c)\n\n    sorted_list.sort(function(c))\n</code></pre>\n\n<p>Something like a map</p>\n\n<p>Example:</p>\n\n<pre><code>objects = [node3, node2, node1, node4]\n\ndef function (node, player):\n   if (node == node1): return 1\n   else if (node == node2): return 2\n   else if (node == node3): return 3\n   else if (node == node4): return 4\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>objects = [node1, node2, node3, node4]\n</code></pre>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 6525894, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BjfvHgmUFcs/AAAAAAAAAAI/AAAAAAAAB6c/Fo4uYQLYRwo/photo.jpg?sz=128", "display_name": "Cayza Angka Maulana", "link": "https://stackoverflow.com/users/6525894/cayza-angka-maulana"}, "edited": false, "score": 1, "creation_date": 1544656001, "post_id": 53752609, "comment_id": 94358316, "body": "This is really helps me. Thank you."}], "tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1544655082, "creation_date": 1544655082, "answer_id": 53752609, "question_id": 53752534, "link": "https://stackoverflow.com/questions/53752534/how-to-reformat-list-data/53752609#53752609", "title": "How to reformat list data?", "body": "<p>If you're just trying to get a list of single-element lists, you could do something like this:</p>\n\n<pre><code>&gt;&gt;&gt; L = range(10)\n\n&gt;&gt;&gt; print(L)\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n&gt;&gt;&gt; print([ [i] for i in L ])\n[[0], [1], [2], [3], [4], [5], [6], [7], [8], [9]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 6525894, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BjfvHgmUFcs/AAAAAAAAAAI/AAAAAAAAB6c/Fo4uYQLYRwo/photo.jpg?sz=128", "display_name": "Cayza Angka Maulana", "link": "https://stackoverflow.com/users/6525894/cayza-angka-maulana"}, "edited": false, "score": 1, "creation_date": 1544655972, "post_id": 53752643, "comment_id": 94358307, "body": "This is really helps me. Thank you."}], "tags": [], "owner": {"reputation": 2404, "user_id": 5052566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLyM.png?s=128&g=1", "display_name": "Employee", "link": "https://stackoverflow.com/users/5052566/employee"}, "is_accepted": true, "score": 1, "last_activity_date": 1544655295, "creation_date": 1544655295, "answer_id": 53752643, "question_id": 53752534, "link": "https://stackoverflow.com/questions/53752534/how-to-reformat-list-data/53752643#53752643", "title": "How to reformat list data?", "body": "<p>You want to use <strong>list comprehension</strong>:</p>\n\n<pre><code>input = [28, 27, 26, 5]           \noutput = [[i] for i in input]\n</code></pre>\n\n<p>Executing this code results in <code>output</code> being: <code>[[28], [27], [26], [5]]</code></p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 99, "user_id": 6525894, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BjfvHgmUFcs/AAAAAAAAAAI/AAAAAAAAB6c/Fo4uYQLYRwo/photo.jpg?sz=128", "display_name": "Cayza Angka Maulana", "link": "https://stackoverflow.com/users/6525894/cayza-angka-maulana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 53752643, "answer_count": 2, "score": 0, "last_activity_date": 1544661266, "creation_date": 1544654673, "last_edit_date": 1544661266, "question_id": 53752534, "link": "https://stackoverflow.com/questions/53752534/how-to-reformat-list-data", "title": "How to reformat list data?", "body": "<p>I use pyodbc in python and I return data and the data look like this</p>\n\n<pre><code>[28, 27, 26,...,5]\n</code></pre>\n\n<p>I want the data look like this</p>\n\n<pre><code>[28],[27],[26],...,[5]\n</code></pre>\n\n<p>How I get the data:</p>\n\n<pre><code>cursor.execute(\"SELECT top 100 ....\")\nresult = cursor.fetchall()\nsumresult = []\nfor row in result:\n    sumresult.append(row[0])\n    return sumresult\n</code></pre>\n"}, {"tags": ["python", "list", "loops"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1544655718, "post_id": 53752520, "comment_id": 94358225, "body": "Why is this strange? In the first one, you&#39;re mutating the list, by in the second you just rebind the variable to a different object. Those are two different operations."}], "answers": [{"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1544655644, "creation_date": 1544655644, "answer_id": 53752701, "question_id": 53752520, "link": "https://stackoverflow.com/questions/53752520/value-in-list-changed-after-running-through-loop/53752701#53752701", "title": "Value in list changed after running through loop", "body": "<p>I think the bottom line is that in your first loop, each instance of <code>x</code> is a list.  In your second loop, each instance of <code>x</code> is an integer.  In Python, lists are mutable, but ints are immutable. If you do a search online for \"python mutable vs immutable\", you can find a number of pages that describe what the difference is and why it leads to results like this.</p>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 1, "last_activity_date": 1544656013, "creation_date": 1544656013, "answer_id": 53752755, "question_id": 53752520, "link": "https://stackoverflow.com/questions/53752520/value-in-list-changed-after-running-through-loop/53752755#53752755", "title": "Value in list changed after running through loop", "body": "<p>Your question can be simplified to this:</p>\n\n<pre><code>a = 0\nb = a\nb = 1\nprint(a, b) # &gt;&gt; 0 1\n\na = [0,0]\nb = a\nb[0] = 1\nprint(a, b) # &gt;&gt; [1, 0] [1, 0]\n</code></pre>\n\n<p>That is because when you do <code>b = a</code> with numbers, <code>b</code> is a copy of <code>a</code>, so you can edit them separately. But when you do this with a list, the two variables correspond to the same object. This is mostly done to improve efficiency (copying a list every time you do something like <code>a = b</code> would be very inefficient and often useless). So when you edit one, the other one is affected.</p>\n\n<p>In <code>for x in test_list2:</code>, <code>x</code> is a copy of an element of <code>test_list2</code>. But in <code>for x in test_list1:</code>, <code>x</code> directly correspond to an element (a list) of <code>test_list2</code>.</p>\n\n<p>For more details, you can read <a href=\"https://medium.com/@meghamohan/mutable-and-immutable-side-of-python-c2145cf72747\" rel=\"nofollow noreferrer\">this article about mutable objects</a>.</p>\n"}], "owner": {"reputation": 75, "user_id": 8418647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c946fc4acc94667fc763cf90dbae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom-as", "link": "https://stackoverflow.com/users/8418647/tom-as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 53752755, "answer_count": 2, "score": 1, "last_activity_date": 1544656013, "creation_date": 1544654615, "question_id": 53752520, "link": "https://stackoverflow.com/questions/53752520/value-in-list-changed-after-running-through-loop", "title": "Value in list changed after running through loop", "body": "<p>I\u00b4ve been cleaning some data recently and there is just one thing that struck me.\nSimple example:</p>\n\n<pre><code>test_list1 = [[1,2,3,4,5], [1,2,3,4,5]]\n\nfor x in test_list1:\n    for y in range(0, len(x)):\n        x[y] = 0\n\nprint(test_list1)\n\n-&gt; [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0]]\n</code></pre>\n\n<p>However, if I try the following, I obtain a different result:</p>\n\n<pre><code>test_list2 = [1,2,3,4,5]\n\nfor x in test_list2:\n    x = 0\n\nprint(test_list2)\n\n-&gt; [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>It seems rather odd to me that in test_list1, I was able to change the values in its sub-lists without actually referring to test_list1.\nWhy did the values in test_list1 change just by running the loop if I didn\u00b4t explicitly stated that test_list1[0][0] = 0 and so on?\nIn test_list2, it was not possible.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1018, "user_id": 1312320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebf28b20dae6510720e69b1310422fd2?s=128&d=identicon&r=PG", "display_name": "sardok", "link": "https://stackoverflow.com/users/1312320/sardok"}, "edited": false, "score": 3, "creation_date": 1544655038, "post_id": 53752507, "comment_id": 94357998, "body": "If you replace <code>repr</code> with <code>str</code>, you should get what you&#39;re asking."}, {"owner": {"reputation": 151, "user_id": 9529780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046d1b30d9e87d7798ab39305cbf78c7?s=128&d=identicon&r=PG&f=1", "display_name": "Stewie", "link": "https://stackoverflow.com/users/9529780/stewie"}, "reply_to_user": {"reputation": 1018, "user_id": 1312320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebf28b20dae6510720e69b1310422fd2?s=128&d=identicon&r=PG", "display_name": "sardok", "link": "https://stackoverflow.com/users/1312320/sardok"}, "edited": false, "score": 0, "creation_date": 1544655963, "post_id": 53752507, "comment_id": 94358303, "body": "But also the apostrophe  which one is between I and m disappears. The output become like that: Im getting too old for this stuff"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544661640, "post_id": 53752507, "comment_id": 94359768, "body": "Replacing <code>&quot;&#39;&quot;</code> with <code>&quot;&quot;</code> replaces single quotes with nothing (an empty string)."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 1, "creation_date": 1544666372, "post_id": 53752507, "comment_id": 94360702, "body": "Just use <code>str</code> in place of <code>repr</code>,  check in answer."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 9529780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046d1b30d9e87d7798ab39305cbf78c7?s=128&d=identicon&r=PG&f=1", "display_name": "Stewie", "link": "https://stackoverflow.com/users/9529780/stewie"}, "edited": false, "score": 0, "creation_date": 1544655319, "post_id": 53752632, "comment_id": 94358092, "body": "Yes, you&#39;re right. But when I tried your answer  &#39;May the force be with you&#39; this happens"}, {"owner": {"reputation": 78, "user_id": 9851383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6b547a59a77ecf6394b5fceafa4cbf?s=128&d=identicon&r=PG&f=1", "display_name": "PurpJuice", "link": "https://stackoverflow.com/users/9851383/purpjuice"}, "reply_to_user": {"reputation": 151, "user_id": 9529780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046d1b30d9e87d7798ab39305cbf78c7?s=128&d=identicon&r=PG&f=1", "display_name": "Stewie", "link": "https://stackoverflow.com/users/9529780/stewie"}, "edited": false, "score": 0, "creation_date": 1544655661, "post_id": 53752632, "comment_id": 94358206, "body": "I wanted to just add it as a comment but don&#39;t have the rep yet heh., but as the other guy already mentioned, str() can also help."}], "tags": [], "owner": {"reputation": 78, "user_id": 9851383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6b547a59a77ecf6394b5fceafa4cbf?s=128&d=identicon&r=PG&f=1", "display_name": "PurpJuice", "link": "https://stackoverflow.com/users/9851383/purpjuice"}, "is_accepted": false, "score": 0, "last_activity_date": 1544655359, "last_edit_date": 1544655359, "creation_date": 1544655228, "answer_id": 53752632, "question_id": 53752507, "link": "https://stackoverflow.com/questions/53752507/how-to-remove-strings-quotation-marks-which-inside-of-a-nested-list/53752632#53752632", "title": "How to remove string&#39;s quotation marks which inside of a nested list", "body": "<p>Try this instead:</p>\n\n<pre><code>for j in lst:\n    print(\" \".join(repr(i) for i in j).replace('\"', ''))\n</code></pre>\n\n<p>In your <code>.replace</code> you were replacing the<code>'</code>, not the <code>\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "is_accepted": true, "score": 3, "last_activity_date": 1544665788, "creation_date": 1544665788, "answer_id": 53753927, "question_id": 53752507, "link": "https://stackoverflow.com/questions/53752507/how-to-remove-strings-quotation-marks-which-inside-of-a-nested-list/53753927#53753927", "title": "How to remove string&#39;s quotation marks which inside of a nested list", "body": "<p>Just try this, l think this is what you want. </p>\n\n<pre><code>lst=[[67310,0,\"May the force be with you\"],[65310,1,\"I'm getting too old for this stuff\"]]\nfor  j in lst:\n    print(\" \".join(str(i) for i in j).replace(\"'\",\"\"))\n\n# 67310 0 May the force be with you\n# 65310 1 Im getting too old for this stuff\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 9529780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046d1b30d9e87d7798ab39305cbf78c7?s=128&d=identicon&r=PG&f=1", "display_name": "Stewie", "link": "https://stackoverflow.com/users/9529780/stewie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 53753927, "answer_count": 2, "score": 4, "last_activity_date": 1544665788, "creation_date": 1544654584, "question_id": 53752507, "link": "https://stackoverflow.com/questions/53752507/how-to-remove-strings-quotation-marks-which-inside-of-a-nested-list", "title": "How to remove string&#39;s quotation marks which inside of a nested list", "body": "<p>I have a code block as shown below:</p>\n\n<pre><code>lst=[67310,0,\"May the force be with you\"]\nprint(\" \".join(repr(i) for i in lst).replace(\"'\",\"\"))\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>67310 0 May the force be with you\n</code></pre>\n\n<p>But if I had a list, something like that:</p>\n\n<pre><code>lst=[[67310,0,\"May the force be with you\"],[65310,1,\"I'm getting too old for this stuff\"]]\nfor j in lst:\n    print(\" \".join(repr(i) for i in j).replace(\"'\",\"\"))\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>67310 0 May the force be with you\n65310 1 \"Im getting too old for this stuff\"\n</code></pre>\n\n<p>The problem is I want a output without quotation marks like that:</p>\n\n<pre><code>67310 0 May the force be with you\n65310 1 I'm getting too old for this stuff\n</code></pre>\n\n<p>How can I solve this problem easily? Thanks for help</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1544654652, "post_id": 53752504, "comment_id": 94357855, "body": "Because &quot;guessed letter&quot; (a misnomer) is actually a string of two characters, and <code>string.ascii_lowercase[:26]</code> only lists one of each character. So, the length of the input is not equal to one, and <code>&quot;aa&quot;</code> does not appear in your string check. It gives exactly the expected output."}, {"owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544655245, "post_id": 53752504, "comment_id": 94358073, "body": "how can i fix it then ?  would love some help since i&#39;m new to python and programming."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544655342, "post_id": 53752504, "comment_id": 94358098, "body": "From my side, I think I&#39;ve given you enough to try think about the problem slightly differently, because it looks like an assignment. Perhaps you could call <code>list()</code> on the input to split the string and deal with each individual character?"}, {"owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544655546, "post_id": 53752504, "comment_id": 94358165, "body": "I see.  Thanks for the help !  Much appreciated."}, {"owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544658008, "post_id": 53752504, "comment_id": 94358915, "body": "Is there any chance for some more help ? Still can&#39;t solve the problem . Need to solve it without loops"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "edited": false, "score": 0, "creation_date": 1544656144, "post_id": 53752655, "comment_id": 94358357, "body": "Is there another way to do it without loops ? since i haven&#39;t learned it yet."}, {"owner": {"reputation": 547, "user_id": 5322553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t2kBM.jpg?s=128&g=1", "display_name": "Ozgur Bagci", "link": "https://stackoverflow.com/users/5322553/ozgur-bagci"}, "reply_to_user": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "edited": false, "score": 0, "creation_date": 1544658084, "post_id": 53752655, "comment_id": 94358933, "body": "@LiranSarel added a solution that does not use loops."}, {"owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "edited": false, "score": 0, "creation_date": 1544659740, "post_id": 53752655, "comment_id": 94359377, "body": "Thanks a lot !  I don&#39;t think i would&#39;ve ever come up with that solution . Understood it all .  Is there any way i can contact you for further help with some things ? @OzgurBagci"}], "tags": [], "owner": {"reputation": 547, "user_id": 5322553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t2kBM.jpg?s=128&g=1", "display_name": "Ozgur Bagci", "link": "https://stackoverflow.com/users/5322553/ozgur-bagci"}, "is_accepted": true, "score": 1, "last_activity_date": 1544658066, "last_edit_date": 1544658066, "creation_date": 1544655386, "answer_id": 53752655, "question_id": 53752504, "link": "https://stackoverflow.com/questions/53752504/wrong-if-condition-output/53752655#53752655", "title": "Wrong &quot;if&quot; condition output", "body": "<p>Try this:</p>\n\n<pre><code>guessed_letter = input('Guess a letter: ')\nif len(guessed_letter) == 1 and guessed_letter in string.ascii_lowercase[:26]:\n    print(guessed_letter.lower())\nelif len(guessed_letter) &gt; 1:\n    for letter in guessed_letter:\n        if letter not in string.ascii_lowercase[:26]:\n            print('Error 3')\n        else:\n            print('Error 1')\nelif guessed_letter == 1 and guessed_letter not in string.ascii_lowercase[:26]:\n    print('Error 2')\n</code></pre>\n\n<p>Another solution without loops:</p>\n\n<pre><code>guessed_letter = input('Guess a letter: ')\nif len(guessed_letter) == 1 and guessed_letter in string.ascii_lowercase[:26]:\n    print(guessed_letter.lower())\nelif len(guessed_letter) &gt; 1:\n    new_strings = list(string.ascii_lowercase[:26])\n    new_strings.extend(list(set(list(guessed_letter))))\n    new_strings = list(set(new_strings))\n    if len(list(string.ascii_lowercase[:26])) &lt; len(new_strings):\n        print('Error 3')\n    else:\n        print('Error 1')\nelif guessed_letter == 1 and guessed_letter not in string.ascii_lowercase[:26]:\n    print('Error 2')\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10745778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfH-ym6t2gc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ixmLBrXfQB9pBzzpIbd4UMidTGuA/mo/photo.jpg?sz=128", "display_name": "Liran Sarel", "link": "https://stackoverflow.com/users/10745778/liran-sarel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53752655, "answer_count": 1, "score": -2, "last_activity_date": 1544658066, "creation_date": 1544654562, "question_id": 53752504, "link": "https://stackoverflow.com/questions/53752504/wrong-if-condition-output", "title": "Wrong &quot;if&quot; condition output", "body": "<p>Would like some help !</p>\n\n<p><a href=\"https://i.stack.imgur.com/sqhqh.png\" rel=\"nofollow noreferrer\">The task I recieved :</a></p>\n\n<p>the code I wrote :</p>\n\n<pre><code>guessed_letter = input('Guess a letter: ')\nif len(guessed_letter) == 1 and guessed_letter in string.ascii_lowercase[:26]:\n    print(guessed_letter.lower())\nelif len(guessed_letter) &gt; 1 and guessed_letter in string.ascii_lowercase[:26]:\n    print(\"Error 1\")\nelif guessed_letter == 1 and guessed_letter != string.ascii_lowercase[:26]:\n    print(\"Error 2\")\nelif len(guessed_letter) != 1 and guessed_letter not in string.ascii_lowercase[:26]:\n    print(\"Error 3\")\n</code></pre>\n\n<p>My problem is when I try and give an input of \"aa\" the output comes out Error 3 and not Error 1 . </p>\n\n<p>How can I proceed ?</p>\n"}, {"tags": ["python", "windows", "selenium", "subprocess", "anaconda"], "answers": [{"comments": [{"owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 0, "creation_date": 1544712166, "post_id": 53763702, "comment_id": 94380278, "body": "@DebanhanB I&#39;ve tried option B and the scan did not find anything. Is modifying the registry safe? How do I back it up?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 0, "creation_date": 1544712273, "post_id": 53763702, "comment_id": 94380369, "body": "@MariahAkinbi By default the old registry gets saved within the desktop. FYI there is also a third fixing option mentioned in the link <a href=\"https://www.drivethelife.com/windows-10/insufficient-system-resources-exist-to-complete-the-requested-service-windows-10.html\" rel=\"nofollow noreferrer\">Fix &quot;Insufficient System Resources Exist to Complete the Requested Service&quot; Error on Windows 10</a> which I have provided in my answer."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1544710042, "creation_date": 1544710042, "answer_id": 53763702, "question_id": 53752487, "link": "https://stackoverflow.com/questions/53752487/oserror-winerror-1450-insufficient-system-resources-exist-to-complete-the-req/53763702#53763702", "title": "OSError: [WinError 1450] Insufficient system resources exist to complete the requested service using Selenium in Python through Anaconda", "body": "<p>This error message...</p>\n\n<pre><code>OSError: [WinError 1450] Insufficient system resources exist to complete the requested service\n</code></pre>\n\n<p>...implies that the <strong>Python Client</strong> was unable to complete a particular requested service.</p>\n\n<p>This error doesn't seem to be <em>Selenium</em> related but involves the <em>Python Client</em> and the underlying <em>Operating System</em>.</p>\n\n<p>However, as per <a href=\"https://www.drivethelife.com/windows-10/insufficient-system-resources-exist-to-complete-the-requested-service-windows-10.html\" rel=\"nofollow noreferrer\">\"Insufficient System Resources Exist to Complete the Requested Service\" Error on Windows</a> often occurs on the <em>Windows 10</em> OS when you leave your computer on for a long time, when you plug into a USB drive, or when you're trying to launch some .exe files like the Chrome browser, iTunes, Microsoft Edge, etc. Then the computer will get freezing or stuttering. After a PC reboot, the error may happen again and stop your computing.</p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>The two most frequently used approach are as follows:</p>\n\n<h2>A. Modify Registry to Fix \"Insufficient System Resources Exist to Complete the Requested Service\"</h2>\n\n<ul>\n<li>If Windows 10 has no enough inner memory resources to create the system image, then you will get stuck on the system error \"insufficient system resources exist to complete the requested service\". A registry modification could release the pain.</li>\n<li>Use Windows shortcut keys <kbd>Win</kbd> + <kbd>R</kbd> to open the Run.</li>\n<li>Type into <code>regedit</code>.</li>\n<li>Hit the Enter.</li>\n<li>Expand the entry for the subkey: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\LanmanServer</code>.</li>\n<li>Highlight the LanmanServer and right-click the blank area on the right pane.</li>\n<li>Select the New and <code>DWORD</code> (32-bit) Value.</li>\n<li>Name the new entry as <code>maxworkitems</code>.</li>\n<li>Double-click the new entry and type <code>1024</code> into the Value data box.</li>\n<li>Click the OK. (Note: If your computer memory storage is less than 512M, type 256 into the box.)</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/UUL6y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UUL6y.png\" alt=\"ModifyRegistry1\"></a></p>\n\n<ul>\n<li>Go to the subkey: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Memory Management</code>.</li>\n<li>Highlight the Memory Management.</li>\n<li>On the right side, right-click the blank area to create a new <code>DWORD</code> (32-bit) Value.</li>\n<li>Name the new entry as <code>PoolUsageMaximum</code>.</li>\n<li>Change the Value data to <code>60</code> and choose the Decimal option.</li>\n<li>Click the OK.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/FjwFH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FjwFH.png\" alt=\"ModifyRegistry2\"></a></p>\n\n<ul>\n<li>Restart the computer.</li>\n<li><strong>Note</strong>: Registry Editor is a database storing important Windows data. You'd better backup registry before any modification in case other serious system errors occur, such as black screen problem, boot loop issue, \"system cannot find the file specified\" error, etc.</li>\n</ul>\n\n<h2>B. Scan Disk Drive to Fix the Error</h2>\n\n<ul>\n<li>The faulty disk drive can result in the error \"insufficient system resources exist to complete the requested service\" and other storage problems, such as high memory usage issue, memory leak issue, 100% disk usage problem, etc. So it may be necessary to take a scan to check the disk.</li>\n<li>Open This PC on Windows 10.</li>\n<li>Right-click the <code>C:</code> drive and select Properties.</li>\n<li>Go to the Tools tab.</li>\n<li>Click the Check button.</li>\n<li>Click the Scan drive.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/J1QLh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J1QLh.png\" alt=\"scan_disk_drive\"></a></p>\n\n<ul>\n<li>Then Windows 10 will start checking. If errors are found, you can follow the on-screen instructions to fix them.</li>\n<li>After that, you can also click the Optimize button on the <code>C:</code> drive Properties to optimize the drive.</li>\n</ul>\n"}], "owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2492, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544710042, "creation_date": 1544654480, "last_edit_date": 1544709452, "question_id": 53752487, "link": "https://stackoverflow.com/questions/53752487/oserror-winerror-1450-insufficient-system-resources-exist-to-complete-the-req", "title": "OSError: [WinError 1450] Insufficient system resources exist to complete the requested service using Selenium in Python through Anaconda", "body": "<p>I've been running the same python script using windows task scheduler for the past month, then all of a sudden the script runs into an <code>Insufficient Resources</code> error (see below). My CPU and RAM are at normal levels (CPU is &lt;10% and RAM is &lt;20%) when I try to run the program. I have quadrupled both the CPU and RAM on the virtual machine, but I still get the same error.</p>\n\n<p>This is the code I'm trying to run:</p>\n\n<pre><code>from selenium import webdriver\nbrowser = webdriver.Firefox()\n</code></pre>\n\n<p>This is the error I'm getting: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"Desktop\\Scripts\\Selenium_file.py\", line 34, in &lt;module&gt;\n    browser = webdriver.Firefox()\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\firefox\\webdriver.py\", line 164, in __init__\n    self.service.start()\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\common\\service.py\", line 76, in start\n    stdin=PIPE)\n  File \"C:\\ProgramData\\Anaconda3\\lib\\subprocess.py\", line 756, in __init__\n    restore_signals, start_new_session)\n  File \"C:\\ProgramData\\Anaconda3\\lib\\subprocess.py\", line 1155, in _execute_child\n    startupinfo)\nOSError: [WinError 1450] Insufficient system resources exist to complete the requested service\n</code></pre>\n\n<p>I've uninstalled and reinstalled selenium and get the same error.</p>\n\n<p>I've checked the COMSPEC variable like <a href=\"https://stackoverflow.com/questions/20330385/cannot-find-the-file-specified-when-using-subprocess-calldir-shell-true-in\">this</a> post suggested:</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.environ['COMSPEC']\n'C:\\\\Windows\\\\system32\\\\cmd.exe'\n</code></pre>\n\n<p>I've also checked the cpu and memory using psutil:</p>\n\n<pre><code>&gt;&gt;&gt; import psutil\n&gt;&gt;&gt; psutil.cpu_times()\nscputimes(user=237.75, system=402.5625, idle=7884.859375, interrupt=2.421875, dpc=3.71875)\n&gt;&gt;&gt; psutil.virtual_memory()\nsvmem(total=17179398144, available=14275997696, percent=16.9, used=2903400448, free=14275997696)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 1, "creation_date": 1544654354, "post_id": 53752377, "comment_id": 94357747, "body": "What have you tried so far?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1544654715, "post_id": 53752377, "comment_id": 94357880, "body": "provide sample data in text format, otherwise it&#39;s not easy to help"}, {"owner": {"reputation": 37, "user_id": 9609578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5304230957b10336b5e1e0c2174cc8d6?s=128&d=identicon&r=PG&f=1", "display_name": "NightCrawler", "link": "https://stackoverflow.com/users/9609578/nightcrawler"}, "edited": false, "score": 0, "creation_date": 1544655305, "post_id": 53752377, "comment_id": 94358090, "body": "So far I have tried,                                            data[(data[&#39;EXEMPT_FROM&#39;] != data[&#39;FROM_DATE&#39;])].unique()"}, {"owner": {"reputation": 37, "user_id": 9609578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5304230957b10336b5e1e0c2174cc8d6?s=128&d=identicon&r=PG&f=1", "display_name": "NightCrawler", "link": "https://stackoverflow.com/users/9609578/nightcrawler"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1544655604, "post_id": 53752377, "comment_id": 94358186, "body": "@Yuca hope that helps!"}], "answers": [{"tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": true, "score": 0, "last_activity_date": 1544655942, "creation_date": 1544655942, "answer_id": 53752746, "question_id": 53752377, "link": "https://stackoverflow.com/questions/53752377/pandas-dataframe-matching-dates-between-rows/53752746#53752746", "title": "Pandas Dataframe matching Dates between rows", "body": "<p>IIUC, this is what you want</p>\n\n<pre><code>A = df.groupby('REF').first()\nA.FROM_DATE == A.EXEMPT_FROM\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>REF\n10001033     True\n10001769    False\n</code></pre>\n\n<p>If you want to know how many times you have the desired match, apply <code>sum</code></p>\n\n<pre><code>sum(A.FROM_DATE == A.EXEMPT_FROM)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9609578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5304230957b10336b5e1e0c2174cc8d6?s=128&d=identicon&r=PG&f=1", "display_name": "NightCrawler", "link": "https://stackoverflow.com/users/9609578/nightcrawler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 53752746, "answer_count": 1, "score": 1, "last_activity_date": 1544655942, "creation_date": 1544653863, "last_edit_date": 1544655583, "question_id": 53752377, "link": "https://stackoverflow.com/questions/53752377/pandas-dataframe-matching-dates-between-rows", "title": "Pandas Dataframe matching Dates between rows", "body": "<pre><code>REF         FROM_DATE               EXEMPT_FROM\n10001033    2017-07-11 00:00:00     2017-07-11 00:00:00\n10001033    2017-07-11 00:00:00     2017-08-10 00:00:00\n10001033    2017-07-11 00:00:00     2018-04-01 00:00:00\n10001769    2018-05-15 00:00:00     2016-07-15 00:00:00\n10001769    2018-05-15 00:00:00     2018-01-03 00:00:00\n10001769    2018-05-15 00:00:00     2018-05-15 00:00:00\n10001769    2018-05-15 00:00:00     2018-06-14 00:00:00\n</code></pre>\n\n<p>I have the above data frame and I would like to be able to count the number of Unique REFs whose first row From_DATE does not match its first row Exempt_FROM. </p>\n\n<p>For example the first REF number 10001033 FROM_DATE and EXEMPT_FROM match but the second REF 10001769 do not. What might be the best approach?</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "file-io", "split"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9287474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adb5688bfd1de619fc9e5c405770905?s=128&d=identicon&r=PG&f=1", "display_name": "nsk", "link": "https://stackoverflow.com/users/9287474/nsk"}, "edited": false, "score": 0, "creation_date": 1544658314, "post_id": 53752867, "comment_id": 94358993, "body": "I will try this solution. But can I save list of arrays with this method. Doc mentions it has to be arrays."}, {"owner": {"reputation": 61, "user_id": 9287474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adb5688bfd1de619fc9e5c405770905?s=128&d=identicon&r=PG&f=1", "display_name": "nsk", "link": "https://stackoverflow.com/users/9287474/nsk"}, "edited": false, "score": 0, "creation_date": 1544659154, "post_id": 53752867, "comment_id": 94359221, "body": "I just tried with np.savez_compressed. It takes 7 times more time to evaluate, for n=50, m=3, list_length = 1000, which is a low end case."}, {"owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "reply_to_user": {"reputation": 61, "user_id": 9287474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adb5688bfd1de619fc9e5c405770905?s=128&d=identicon&r=PG&f=1", "display_name": "nsk", "link": "https://stackoverflow.com/users/9287474/nsk"}, "edited": false, "score": 0, "creation_date": 1544659365, "post_id": 53752867, "comment_id": 94359279, "body": "Just do <code>np.savez_compressed(&#39;filename&#39;, *l)</code> to save a list <code>l</code> of arrays. If it&#39;s taking too long, you can trade off speed vs size-on-disk to some extent by using the <code>np.savez</code> function instead."}], "tags": [], "owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "is_accepted": false, "score": 0, "last_activity_date": 1544657602, "last_edit_date": 1544657602, "creation_date": 1544656738, "answer_id": 53752867, "question_id": 53752371, "link": "https://stackoverflow.com/questions/53752371/how-to-split-large-data-and-rejoin-later/53752867#53752867", "title": "How to split large data and rejoin later", "body": "<p>Don't use pickle to store large data, it's not an efficient way to serialize anything. Instead, use the built-in numpy serialization formats/functions via the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.savez_compressed.html#numpy-savez-compressed\" rel=\"nofollow noreferrer\"><code>numpy.savez_compressed</code></a> and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.load.html#numpy.load\" rel=\"nofollow noreferrer\"><code>numpy.load</code></a> functions.</p>\n\n<p>System memory isn't infinite, so at some point you'll still need to split your files (or use a heavier duty solution such as the one provided by the <a href=\"http://docs.h5py.org/en/stable/quick.html\" rel=\"nofollow noreferrer\"><code>h5py</code></a> package). However, if you were able to fit the original list into memory then <code>savez_compressed</code> and <code>load</code> should do what you need.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 9287474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adb5688bfd1de619fc9e5c405770905?s=128&d=identicon&r=PG&f=1", "display_name": "nsk", "link": "https://stackoverflow.com/users/9287474/nsk"}, "edited": false, "score": 0, "creation_date": 1544742432, "post_id": 53754786, "comment_id": 94394505, "body": "This is something new for me. Will try it and get back."}], "tags": [], "owner": {"reputation": 1240, "user_id": 4192366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b6bf1ce902b1530a88a47e781d3c3bdc?s=128&d=identicon&r=PG&f=1", "display_name": "ZisIsNotZis", "link": "https://stackoverflow.com/users/4192366/zisisnotzis"}, "is_accepted": false, "score": 1, "last_activity_date": 1544673251, "creation_date": 1544673251, "answer_id": 53754786, "question_id": 53752371, "link": "https://stackoverflow.com/questions/53752371/how-to-split-large-data-and-rejoin-later/53754786#53754786", "title": "How to split large data and rejoin later", "body": "<p>Using <code>savez</code>, <code>savez_compressed</code>, or even things like <code>h5py</code> can be useful as @tel mentioned, but that takes extra effort trying to do \"reinvent\" caching mechanism. There are two easier ways to process larger-than-memory <code>ndarray</code> if applicable:</p>\n\n<ul>\n<li><p>The <strong>easiest</strong> way is of course enable <code>pagefile</code> (or some other name) on Windows or <code>swap</code> on Linux (not sure about OS X counter part). This creates a virtually large enough memory so that you don't need to worry about memory at all. It will save to disk/load from disk accordingly</p></li>\n<li><p>If the first way is not applicable due to not have admin rights or etc, <code>numpy</code> provides another way: <code>np.memmap</code>. This function maps an <code>ndarray</code> to disk such that you can index it just like it is in memory. Technically IO is done directly to the hard disk but OS will cache accordingly</p></li>\n</ul>\n\n<p>For the second way, you can create a hard-disk side <code>ndarray</code> using:</p>\n\n<pre><code>np.memmap('yourFileName', 'float32', 'w+', 0, 2**32)\n</code></pre>\n\n<p>This creates a 16GB <code>float32</code> array within no time (containing 4G numbers). You can then do IO to it. A lot of functions have an <code>out</code> parameter. You can set the <code>out</code> parameter accordingly so that the output is not \"copied\" to the disk from memory</p>\n\n<p>If you want to save a list of <code>ndarray</code>s using the second method, either create a lot of <code>memmap</code>s, or concat them to a single array</p>\n"}], "owner": {"reputation": 61, "user_id": 9287474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adb5688bfd1de619fc9e5c405770905?s=128&d=identicon&r=PG&f=1", "display_name": "nsk", "link": "https://stackoverflow.com/users/9287474/nsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544673251, "creation_date": 1544653827, "last_edit_date": 1544656509, "question_id": 53752371, "link": "https://stackoverflow.com/questions/53752371/how-to-split-large-data-and-rejoin-later", "title": "How to split large data and rejoin later", "body": "<p>My code generates a list of numpy arrays of size (1, 1, n, n, m, m) where n may vary from 50-100 and m from 5-10 depending on the case at hand. The length of the list itself may go up to 10,000 and is being written/dumped using <em>pickle</em> at the end of the code. For cases at the higher end of these numbers or when file sizes go beyond 5-6 GB, I get <em>Out of Memory</em> error. Below is a made up example of the situation,</p>\n\n<pre><code>import numpy as np\nlist, list_length = [], 1000\nn = 100\nm = 3\nfor i in range(0, list_length):\n   list.append(np.random.random((1, 1, n, n, m, m)))\n\nfile_path = 'C:/Users/Desktop/Temp/'\nwith open(file_path, 'wb') as file:\n    pickle.dump(list, file)\n</code></pre>\n\n<p>I am looking for a way that helps me to </p>\n\n<ul>\n<li>split the data so that I can get rid of memory error, and</li>\n<li>rejoin the data in the original form when needed later</li>\n</ul>\n\n<p>All I could think is:</p>\n\n<pre><code>for i in range(0, list_length):\n   data = np.random.random((1, 1, n, n, m, m))\n   file_path = 'C:/Users/Desktop/Temp/'+str(i)\n   with open(file_path, 'wb') as file:\n      pickle.dump(data, file)\n</code></pre>\n\n<p>and then combine using:</p>\n\n<pre><code>combined_list = []\nfor i in range(0, list_length):\n    file_path = 'C:/Users/Desktop/Temp/single' + str(i)\n    with open(file_path, 'rb') as file:\n        data = pickle.load(file)\n    combined_list.append(data)\n</code></pre>\n\n<p>Using this way, the file size certainly reduces due to multiple files, but that also increases processing time due to multiple file I/O operations.</p>\n\n<p>Is there a more elegant and better way to do this?</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1544653690, "post_id": 53752295, "comment_id": 94357475, "body": "You shouldn&#39;t be using <code>time.sleep()</code> in a Tkinter application at all, because it completely locks up the GUI.  Use Tkinter&#39;s <code>.after()</code> method to schedule function calls at a future time, instead."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544654687, "post_id": 53752295, "comment_id": 94357870, "body": "Here&#39;s some documentation on the universal <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/universal.html\" rel=\"nofollow noreferrer\"><code>after()</code></a> method."}], "answers": [{"tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": false, "score": 1, "last_activity_date": 1544750733, "creation_date": 1544750733, "answer_id": 53772343, "question_id": 53752295, "link": "https://stackoverflow.com/questions/53752295/tkinter-label-doesnt-update-before-a-sleep/53772343#53772343", "title": "tkinter label doesnt update before a sleep", "body": "<p>You can use <code>after()</code> to do what you want:</p>\n\n<pre><code>def updateLabel(txt):\n  labeltext.set(txt)\n\ndef GoodButton():\n  root.after(2000, updateLabel, 'New GoodButton text')\n\ndef BadButton():\n  updateLabel('New BadButton text')\n  root.after(2000, updateLabel, 'Third BadButton text')\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5312625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498623881dd1f58d3d085f0182f63ee7?s=128&d=identicon&r=PG", "display_name": "C382", "link": "https://stackoverflow.com/users/5312625/c382"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544750733, "creation_date": 1544653439, "question_id": 53752295, "link": "https://stackoverflow.com/questions/53752295/tkinter-label-doesnt-update-before-a-sleep", "title": "tkinter label doesnt update before a sleep", "body": "<p>In the code below, clicking on BadButton never displays the \"New BadButton text\", it waits two seconds and then displays 'Third BadButton text'\nHow do I persuade the script to display both messages.\nUsing Python 2.7.10</p>\n\n<pre><code>import os, sys\nimport time\nimport Tkinter\nfrom Tkinter import *\n\ndef GoodButton():\n   global labeltext\n\n   time.sleep(2)\n   labeltext.set('New GoodButton text')\n\ndef BadButton():\n   global labeltext\n\n   labeltext.set('New BadButton text')\n   time.sleep(2)\n   labeltext.set('Third BadButton text')\n\n# GUI construction\nroot = Tkinter.Tk()\nroot.title(\"Label Problem\")\n# set background\nback = Tkinter.Frame(master=root, width=375, height=125, bg='white')\nback.pack()\n\nB1 = Tkinter.Button(root,text =\"Test GoodButton\", command =     GoodButton)\nB1.pack()\nB1.place(height=25, width=100, x = 25, y = 25)   # default x,y = 0,0\n\nB2 = Tkinter.Button(root,text =\"Test BadButton\", command = BadButton)\nB2.pack()\nB2.place(height=25, width=100, x = 150, y = 25)\n\n# add a label to show progress\nlabeltext = Tkinter.StringVar(value = 'Ready')\nL1 = Tkinter.Label(root,textvariable = labeltext)\nL1.pack()\nL1.place(height=25, width=175, x = 150, y = 75)\n\n# MAIN\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "sql", "sqlite", "rdbms"], "comments": [{"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 0, "creation_date": 1544654855, "post_id": 53752294, "comment_id": 94357936, "body": "Pretty sure you could do it pure SQL in recent versions of SQLite3 with a row_number(), and an INSERT SELECT... If this isn&#39;t answered by the time I get home, I&#39;ll play with it and post an answer if I find it"}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 2, "creation_date": 1544655310, "post_id": 53752294, "comment_id": 94358091, "body": "SQL tables have no order; SQL result sets have order. So define &quot;previous&quot; &amp; explain what you mean by &quot;table&quot; since there is no &quot;previous row&quot; in an SQL table. After you define it this will be a faq."}], "answers": [{"comments": [{"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1544655526, "post_id": 53752479, "comment_id": 94358158, "body": "SQL tables have no order; SQL result sets have order. So &quot;previous row&quot; doesn&#39;t make sense for a &quot;table&quot;, so you can&#39;t be answering the question, because it doesn&#39;t make sense."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1544655724, "post_id": 53752479, "comment_id": 94358229, "body": "@philipxy well, you are right, of course and thanks for the comment. I&#39;ve assumed the OP has &quot;previous row&quot; notion defined based on an index or value of some other field. I am taking it from there and trying to provide a way to go about solving the problem."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1544654462, "creation_date": 1544654462, "answer_id": 53752479, "question_id": 53752294, "link": "https://stackoverflow.com/questions/53752294/updating-a-table-based-on-values-from-previous-row/53752479#53752479", "title": "Updating a table based on values from previous row", "body": "<p>One option would be to load it into a <code>pandas</code> DataFrame via <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_sql.html\" rel=\"nofollow noreferrer\"><code>.read_sql()</code></a>, calculate the next <code>Value</code> cell values and dump back into SQLite via <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_sql.html\" rel=\"nofollow noreferrer\"><code>.to_sql()</code></a>, something along these lines:</p>\n\n<pre><code>import sqlite3\nimport pandas as pd\n\nconn = sqlite3.connect(...)\n\ndf = pd.read_sql_table(name_of_table, conn)\n\nfor i in range(1, len(df)):\n    df.iloc[i, 1] = df.iloc[i - 1, 1] + df.iloc[i - 1, 2]\n\ndf.to_sql(name=name_of_table, con=conn, if_exists='replace', index=False)\n</code></pre>\n\n<p>Please be careful with the <code>\"replace\"</code> <code>if_exists</code> behaviour - it would drop the table before inserting new rows.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544670085, "last_edit_date": 1544670085, "creation_date": 1544660735, "answer_id": 53753354, "question_id": 53752294, "link": "https://stackoverflow.com/questions/53752294/updating-a-table-based-on-values-from-previous-row/53753354#53753354", "title": "Updating a table based on values from previous row", "body": "<p>If you're using a recent version of sqlite (3.25 or newer), it's pretty easy to do with window functions. The following assumes you're ordering by the name column like in the example input and output:</p>\n\n<pre><code>CREATE TABLE example(name TEXT, value INTEGER, adj INTEGER);\nINSERT INTO example VALUES('Apple',10,5);\nINSERT INTO example VALUES('Ball',20,10);\nINSERT INTO example VALUES('Cat',30,15);\nINSERT INTO example VALUES('Dog',40,0);\nINSERT INTO example VALUES('Emily',50,10);\nINSERT INTO example VALUES('Frog',60,0);\nINSERT INTO example VALUES('Goat',70,5);\nCREATE INDEX example_idx_name ON example(name); -- Used in the window ordering\nSELECT name AS \"Name\"\n     , first_value(value) OVER names + sum(adj) OVER names - adj AS \"Value\"\n     , adj AS \"Adjustment\"\nFROM example\nWINDOW names AS (ORDER BY name)\nORDER BY name;\n</code></pre>\n\n<p>produces:</p>\n\n<pre><code>Name        Value       Adjustment       \n----------  ----------  ----------\nApple       10          5         \nBall        15          10        \nCat         25          15        \nDog         40          0         \nEmily       40          10        \nFrog        50          0         \nGoat        50          5\n</code></pre>\n\n<p>Now, for updating the table instead... the problem with <code>UPDATE</code> is that rows are updated in arbitrary order (Probably by rowid, but you shouldn't depend on implementation details like that), so you can't really do something based on the \"previous\" row. One approach: Use a version of the above query to populate a temporary table, and then use that to update the original:</p>\n\n<pre><code>CREATE TEMP TABLE staging(id INTEGER PRIMARY KEY, value INTEGER);\nINSERT INTO staging\n    SELECT rowid, first_value(value) OVER names + sum(adj) OVER names - adj\n    FROM example WINDOW names AS (ORDER BY name);\nUPDATE example AS e SET value = (SELECT value FROM staging AS s WHERE s.id = e.rowid);\nDROP TABLE staging;\nSELECT * FROM example ORDER BY name;\nname        value       adj       \n----------  ----------  ----------\nApple       10          5         \nBall        15          10        \nCat         25          15        \nDog         40          0         \nEmily       40          10        \nFrog        50          0         \nGoat        50          5    \n</code></pre>\n"}], "owner": {"reputation": 2407, "user_id": 2614911, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/82aa1b1d42c31b38b78a1db812501730?s=128&d=identicon&r=PG", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2614911/pavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544670085, "creation_date": 1544653438, "question_id": 53752294, "link": "https://stackoverflow.com/questions/53752294/updating-a-table-based-on-values-from-previous-row", "title": "Updating a table based on values from previous row", "body": "<p>I have a table and I want to update the Values in the table based on values from the previous row. Here i want to update \"Value\" as the sum of previous row Value + Adjustment. I would like to do it in SQLite.</p>\n\n<p>Original Table</p>\n\n<pre><code>Name  | Value | Adjustment \nApple |  10   | 5\nBall  |  20   | 10\nCat   |  30   | 15\nDog   |  40   | 0\nEmily |  50   | 10\nFrog  |  60   | 0\nGoat  |  70   | 5\n</code></pre>\n\n<p>Updated Table</p>\n\n<pre><code>Name  | Value       | Adjustment \nApple |  10         | 5\nBall  |  15 (10+5)  | 10\nCat   |  25 (15+10) | 15\nDog   |  40 (25+15) | 0\nEmily |  40 (40+0)  | 10\nFrog  |  50 (40+10) | 0\nGoat  |  50 (50+0)  | 5\n</code></pre>\n\n<p>I can do it using python but i was wondering if there is fast and efficient way of doing it in SQLite.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1544653437, "post_id": 53752261, "comment_id": 94357388, "body": "can you explain how you got this<code>00D00AF000</code>?"}, {"owner": {"reputation": 1710, "user_id": 156125, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/938fad1c4d54669b4b68c40f5154fdd4?s=128&d=identicon&r=PG", "display_name": "oort", "link": "https://stackoverflow.com/users/156125/oort"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1544653614, "post_id": 53752261, "comment_id": 94357449, "body": "Sorry that was a mistake - fixing it."}], "answers": [{"comments": [{"owner": {"reputation": 1710, "user_id": 156125, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/938fad1c4d54669b4b68c40f5154fdd4?s=128&d=identicon&r=PG", "display_name": "oort", "link": "https://stackoverflow.com/users/156125/oort"}, "edited": false, "score": 0, "creation_date": 1544672948, "post_id": 53752899, "comment_id": 94362129, "body": "I&#39;m not sure what is wrong, but when I try <code>newdf.EDAY+=newdf.groupby([&#39;index&#39;,&#39;EDAY&#39;]).cumcount()# here is to protect when two position show up same time</code>, it tells me: <code>TypeError: ufunc &#39;add&#39; did not contain a loop with signature matching types dtype(&#39;&lt;U21&#39;) dtype(&#39;&lt;U21&#39;) dtype(&#39;&lt;U21&#39;)</code>"}, {"owner": {"reputation": 1710, "user_id": 156125, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/938fad1c4d54669b4b68c40f5154fdd4?s=128&d=identicon&r=PG", "display_name": "oort", "link": "https://stackoverflow.com/users/156125/oort"}, "edited": false, "score": 0, "creation_date": 1544673529, "post_id": 53752899, "comment_id": 94362239, "body": "Fixed it - was an issue because <code>newdf.EDAY</code> was type object, which I turned to numeric."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1710, "user_id": 156125, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/938fad1c4d54669b4b68c40f5154fdd4?s=128&d=identicon&r=PG", "display_name": "oort", "link": "https://stackoverflow.com/users/156125/oort"}, "edited": false, "score": 0, "creation_date": 1544673555, "post_id": 53752899, "comment_id": 94362242, "body": "@oort aha :-) -"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1544656918, "creation_date": 1544656918, "answer_id": 53752899, "question_id": 53752261, "link": "https://stackoverflow.com/questions/53752261/reordering-a-items-in-rows-in-a-subset-of-columns-in-pandas-dataframe-given-info/53752899#53752899", "title": "Reordering a Items in Rows in a Subset of Columns in Pandas DataFrame Given Information in Another Subset of Columns", "body": "<p>Just share my way for this question , I using <code>wide_to_long</code> to flatten you original dataframe , then exclude the -1 , and <code>zip</code> all the value into <code>list</code> of <code>list</code> , bad structure , but no worry we just need it create the pair of values and position (In my understanding the EDAY is the position of the char in E )</p>\n\n<pre><code>newdf=pd.wide_to_long(df.reset_index(),['E','EDAY'],i='index',j='drop').loc[lambda x : x.EDAY!=-1]\nnewdf.EDAY+=newdf.groupby(['index','EDAY']).cumcount()# here is to protect when two position show up same time\nnewdf=newdf.groupby(level=0).agg(list)\n</code></pre>\n\n<hr>\n\n<p>After beyond reshape we using for loop to create the char you need </p>\n\n<pre><code>l=[]\nfor x ,y in zip(newdf.E,newdf.EDAY):\n    xvar=list('0000000000')\n    for idx,z in enumerate(y):\n        xvar[z]=x[idx]\n    l.append(''.join(xvar))\nl\nOut[111]: ['ABC0000000', '00B0000000', '00D00FA000']\n</code></pre>\n"}], "owner": {"reputation": 1710, "user_id": 156125, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/938fad1c4d54669b4b68c40f5154fdd4?s=128&d=identicon&r=PG", "display_name": "oort", "link": "https://stackoverflow.com/users/156125/oort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53752899, "answer_count": 1, "score": 0, "last_activity_date": 1544656918, "creation_date": 1544653195, "last_edit_date": 1544653633, "question_id": 53752261, "link": "https://stackoverflow.com/questions/53752261/reordering-a-items-in-rows-in-a-subset-of-columns-in-pandas-dataframe-given-info", "title": "Reordering a Items in Rows in a Subset of Columns in Pandas DataFrame Given Information in Another Subset of Columns", "body": "<p>I have a pandas DataFrame: </p>\n\n<pre><code>import pandas as pd\n\ne = [{'E1': 'A', 'E2': 'B', 'E3': 'C', 'EDAY1': 0, 'EDAY2': 1, 'EDAY3': 2}, {'E1': 'B', 'E2': '0', 'E3': '0', 'EDAY1': 2, 'EDAY2': -1, 'EDAY3': -1}, {'E1': 'F', 'E2': 'A', 'E3': 'D', 'EDAY1': 5, 'EDAY2': 5, 'EDAY3': 2}]\ndf = pd.DataFrame(e)\ndisplay(df)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    E1  E2  E3  EDAY1   EDAY2   EDAY3\n0   A   B   C   0       1       2\n1   B   0   0   2      -1      -1\n2   F   A   D   5       5       2\n</code></pre>\n\n<p>Where <code>E1</code> through <code>E3</code> are events, and <code>EDAY1</code> through <code>EDAY3</code> are the days that the corresponding events occurred on. Note that:</p>\n\n<ul>\n<li>If no event occurred, it is labelled as '0' and the corresponding <code>EDAY</code> is set to <code>-1</code></li>\n<li>Event <code>E1</code> has greater precedence than <code>E2</code> and <code>E2</code> than <code>E3</code></li>\n<li>Event precedence does not correspond to <code>EDAY</code> (see the last row)</li>\n<li>Some events occurred on the same day</li>\n</ul>\n\n<p>I would like to turn these events into 10 char long strings based on the following criteria:</p>\n\n<ol>\n<li>Each character position on the string roughly corresponds to the day that the event occurred</li>\n<li>Days where there were no events will be represented by the character '0'</li>\n<li>Events that occurred on the same day will be sorted by level of precedence and set immediately adjacent to one another (I understand that this is not a perfect representation, but it will do for now)</li>\n</ol>\n\n<p>Therefore given the example above, I would like to have the following representation:</p>\n\n<pre><code>    E1  E2  E3  EDAY1   EDAY2   EDAY3   E_STR\n0   A   B   C   0       1       2       ABC0000000\n1   B   0   0   2      -1      -1       00B0000000\n2   F   A   D   5       5       2       00D00FA000\n</code></pre>\n\n<p>Please note that this is not homework but I am a Python and Pandas newbie, and this has me stumped.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1544653597, "post_id": 53752256, "comment_id": 94357443, "body": "How did you get this <code>data</code> value?"}, {"owner": {"reputation": 413, "user_id": 5220902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8da1ae9640eb1806b2a360e8ac3676ac?s=128&d=identicon&r=PG", "display_name": "Ken Dekalb", "link": "https://stackoverflow.com/users/5220902/ken-dekalb"}, "edited": false, "score": 0, "creation_date": 1544653810, "post_id": 53752256, "comment_id": 94357527, "body": "Does this <a href=\"https://stackoverflow.com/questions/18837262/convert-python-dict-into-a-dataframe\">help</a>?"}, {"owner": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "edited": false, "score": 0, "creation_date": 1544654116, "post_id": 53752256, "comment_id": 94357655, "body": "Hi @ ken, the data first part is dictionary, but after that It become bytes."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "edited": false, "score": 0, "creation_date": 1544728575, "post_id": 53752583, "comment_id": 94389107, "body": "Thank you Ayorgo,  really appreciate it.  there is a &quot;b&quot; on my data, not sure it will impact the code you provided."}, {"owner": {"reputation": 2123, "user_id": 4755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLwF0.jpg?s=128&g=1", "display_name": "ayorgo", "link": "https://stackoverflow.com/users/4755520/ayorgo"}, "reply_to_user": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "edited": false, "score": 0, "creation_date": 1544728637, "post_id": 53752583, "comment_id": 94389138, "body": "No worries, @david. Yes, I&#39;m aware of the <code>b</code>, that shouldn&#39;t affect the solution. Just wanted to pretty print it so the structure is apparent."}, {"owner": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "edited": false, "score": 0, "creation_date": 1544731515, "post_id": 53752583, "comment_id": 94390395, "body": "Hi Ayorgo,  thank you very much. when I type df.head(), because the data is have 500+ value inside.  I got a error shows object of type &#39;float&#39; has no len()"}, {"owner": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "edited": false, "score": 0, "creation_date": 1544734699, "post_id": 53752583, "comment_id": 94391729, "body": "It works, you are right Ayoro.  Really appreciate your help."}], "tags": [], "owner": {"reputation": 2123, "user_id": 4755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLwF0.jpg?s=128&g=1", "display_name": "ayorgo", "link": "https://stackoverflow.com/users/4755520/ayorgo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544660066, "last_edit_date": 1544660066, "creation_date": 1544654953, "answer_id": 53752583, "question_id": 53752256, "link": "https://stackoverflow.com/questions/53752256/bytes-list-of-dictionary-convert-to-dataframe/53752583#53752583", "title": "Bytes list of dictionary convert to DataFrame", "body": "<p>Given the structure of your data</p>\n\n<pre><code>{\n    'metricValue': 5.0,\n    'appMetadata': {\n        'index': 'cfs_planum_metrics_debug_86188',\n        'host': 'iaasn00041949',\n        'job': 'splunk_scraper'\n    },\n    'timestampEpochSecond': 1544651948897,\n    'metricName': 'splunk_logs_tstats_count_per_min',\n    'metricType': 'count',\n    'metricTags': {\n        'source': '/opt/splunk/etc/apps/PlanumComputeMetrics/bin/logs/DECOInstance2.log',\n        'query_timestamp': '2018-12-12T16:43:40.000-05:00'\n    }\n}, {\n    'metricValue': 4.0,\n    'appMetadata': {\n        'index': 'cfs_digital_88082',\n        'host': 'dgt01p01tx5l046',\n        'job': 'splunk_scraper'\n    },\n    'timestampEpochSecond': 1544651948462,\n    'metricName': 'splunk_logs_tstats_count_per_min',\n    'metricType': 'count',\n    'metricTags': {\n        'source': '/logs/apache24inst0/httpds0_access.log',\n        'query_timestamp': '2018-12-12T16:43:50.000-05:00'\n    }\n}\n</code></pre>\n\n<p>you can</p>\n\n<pre><code># Convert your data from list of bytes into a list of strings\nlist_of_string = list(map(lambda d: d.decode('utf-8'), data))\n\n# Parse the list of strings into a list of dictionaries\nfrom ast import literal_eval\nlist_of_dicts = list(map(literal_eval, list_of_string))\n\n# Convert the list to a DataFrame\ndf = pd.DataFrame(list_of_dicts)\n\n# Convert appMetadata to a DataFrame\napp_metadata = pd.concat(df['appMetadata']\n                         .apply(pd.DataFrame.from_dict, orient='index')\n                         .apply(lambda x: x.T)\n                         .to_dict()).reset_index(level=1, drop=True)\n\n# Convert metricTags to a DataFrame\nmetric_tags = pd.concat(df['metricTags']\n                        .apply(pd.DataFrame.from_dict, orient='index')\n                        .apply(lambda x: x.T)\n                        .to_dict()).reset_index(level=1, drop=True)\n\n# Join everything back to the original DataFrame\ndf = df.join(app_metadata).drop('appMetadata', axis=1)\ndf = df.join(metric_tags).drop('metricTags', axis=1)\n</code></pre>\n\n<p>or, alternatively</p>\n\n<pre><code># Flatten the dictionaries\ndef dict_flatten(d):\n    for key in d:\n        val = d[key]\n        if isinstance(val, dict):\n            for sub_key in val:\n                yield sub_key, val[sub_key]\n        else:\n            yield key, val\n\nflat_dicts = list(map(dict, map(dict_flatten, list_of_dicts)))\n\n# Convert the list of flattened dictionaries to a DataFrame\ndf = pd.DataFrame(flat_dicts)\n</code></pre>\n\n<p>both resulting in (up to the order of the columns)</p>\n\n<pre><code>                         metricName metricType  metricValue  timestampEpochSecond       ...                      query_timestamp                           index             host             job\n0  splunk_logs_tstats_count_per_min      count          5.0         1544651948897       ...        2018-12-12T16:43:40.000-05:00  cfs_planum_metrics_debug_86188    iaasn00041949  splunk_scraper\n1  splunk_logs_tstats_count_per_min      count          4.0         1544651948462       ...        2018-12-12T16:43:50.000-05:00               cfs_digital_88082  dgt01p01tx5l046  splunk_scraper\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10741532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc465e5aefa5ac6a7236e0a6f7065ac4?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/10741532/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 53752583, "answer_count": 1, "score": 1, "last_activity_date": 1544660066, "creation_date": 1544653174, "last_edit_date": 1544653392, "question_id": 53752256, "link": "https://stackoverflow.com/questions/53752256/bytes-list-of-dictionary-convert-to-dataframe", "title": "Bytes list of dictionary convert to DataFrame", "body": "<p>I am pretty new to bytes and pandas,  </p>\n\n<p>I have data like this, </p>\n\n<p>But not sure how to convert into a dataframe.</p>\n\n<pre><code>data=[b\"{'metricValue': 5.0, 'appMetadata':{'index': 'cfs_planum_metrics_debug_86188', 'host': 'iaasn00041949', 'job': 'splunk_scraper'}, 'timestampEpochSecond': 1544651948897, 'metricName': 'splunk_logs_tstats_count_per_min', 'metricType': 'count', 'metricTags': {'source': '/opt/splunk/etc/apps/PlanumComputeMetrics/bin/logs/DECOInstance2.log', 'query_timestamp': '2018-12-12T16:43:40.000-05:00'}}\", b\"{'metricValue': 4.0, 'appMetadata': {'index': 'cfs_digital_88082', 'host': 'dgt01p01tx5l046', 'job': 'splunk_scraper'}, 'timestampEpochSecond': 1544651948462, 'metricName': 'splunk_logs_tstats_count_per_min', 'metricType': 'count', 'metricTags': {'source': '/logs/apache24inst0/httpds0_access.log', 'query_timestamp': '2018-12-12T16:43:50.000-05:00'}}\"] \n</code></pre>\n\n<p>Thank you for the help</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544654566, "post_id": 53752223, "comment_id": 94357830, "body": "Here are three different ways, using increasingly more advanced constructs: <a href=\"https://gist.github.com/juanarrivillaga/0aa9f0bd539a8863479e8f90fc8fa530\" rel=\"nofollow noreferrer\">gist.github.com/juanarrivillaga/&hellip;</a>"}, {"owner": {"reputation": 135, "user_id": 10497994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSQ8W.png?s=128&g=1", "display_name": "S..", "link": "https://stackoverflow.com/users/10497994/s"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544728055, "post_id": 53752223, "comment_id": 94388883, "body": "@juanpa.arrivillaga Nice man, I used the first method; I didn&#39;t use <code>zip</code> though, but works the same. Would you say that I can avoid using <code>break</code> in that script?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544728629, "post_id": 53752223, "comment_id": 94389133, "body": "Not sure what you mean with regards to <code>zip</code>, I didn&#39;t use it either. But yeah, you can leave out the break but then it won&#39;t be short-circuiting. Essentially, that loop with the boolean flag re-implements <code>any</code>."}, {"owner": {"reputation": 135, "user_id": 10497994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSQ8W.png?s=128&g=1", "display_name": "S..", "link": "https://stackoverflow.com/users/10497994/s"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544731700, "post_id": 53752223, "comment_id": 94390461, "body": "@juanpa.arrivillaga Oh sorry I meant <code>set</code>, alright then"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544732989, "post_id": 53752223, "comment_id": 94391033, "body": "Well, you really should be using a set. You can just use <code>L2</code> directly, but list-membership tests are expensive. If you expect L2 to be large, then it is definitely worth the conversion"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544654051, "post_id": 53752399, "comment_id": 94357627, "body": "This is really inefficient: <code>len(list(set(sub_list).intersection(l2))) == 0:</code> and there is no need for the <code>len(list(...)) == 0</code>, <code>set</code> objects already have a length, and anyway, you can just just <code>if not set(sub_list).intersection(l2)</code>"}], "tags": [], "owner": {"reputation": 31, "user_id": 10782967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eZCOv.png?s=128&g=1", "display_name": "gSExpln", "link": "https://stackoverflow.com/users/10782967/gsexpln"}, "is_accepted": false, "score": 1, "last_activity_date": 1544654467, "last_edit_date": 1544654467, "creation_date": 1544653950, "answer_id": 53752399, "question_id": 53752223, "link": "https://stackoverflow.com/questions/53752223/deriving-a-new-list-of-lists-from-two-other-lists-where-the-elements-from-l1-ar/53752399#53752399", "title": "Deriving a new list of lists from two other lists, where the elements from L1 are appended if they&#39;re not in L2", "body": "<pre><code>def non_intersecting(l1, l2):\n    out = []\n    for sub_list in l1:\n        if len(list(set(sub_list).intersection(l2))) == 0:  #no common strings\n            out.append(sub_list)\n    return out\n</code></pre>\n\n<p>For this simple operation no need to add List() constructors..</p>\n"}, {"tags": [], "owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "is_accepted": false, "score": 1, "last_activity_date": 1544655105, "creation_date": 1544655105, "answer_id": 53752614, "question_id": 53752223, "link": "https://stackoverflow.com/questions/53752223/deriving-a-new-list-of-lists-from-two-other-lists-where-the-elements-from-l1-ar/53752614#53752614", "title": "Deriving a new list of lists from two other lists, where the elements from L1 are appended if they&#39;re not in L2", "body": "<pre><code>def non_intersecting(L1, L2):\n    s2 = set(L2)\n    lists_sets = ((l, set(l)) for l in L1)\n    return [l for l, s in lists_sets if not s &amp; s2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "edited": false, "score": 0, "creation_date": 1544655843, "post_id": 53752615, "comment_id": 94358261, "body": "<code>x</code> and <code>y</code> are not declared."}], "tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 1, "last_activity_date": 1544656071, "last_edit_date": 1544656071, "creation_date": 1544655124, "answer_id": 53752615, "question_id": 53752223, "link": "https://stackoverflow.com/questions/53752223/deriving-a-new-list-of-lists-from-two-other-lists-where-the-elements-from-l1-ar/53752615#53752615", "title": "Deriving a new list of lists from two other lists, where the elements from L1 are appended if they&#39;re not in L2", "body": "<p>For checking membership, you can use <code>any()</code> or <code>not any()</code></p>\n\n<pre><code>x=[['e', 'h', 'c', 'w'], ['p', 'j'], ['w', 's', 'u']]\ny=['k', 'w']\n\ndef non_intersecting(l1, l2):\n    outlist=[]\n    for sublist in x:\n        if not any([elem in sublist for elem in y]):\n            outlist.append(sublist)\n    return outlist\n\nnon_intersecting(x, y)\n\n[['p', 'j']]\n</code></pre>\n\n<p>The above can also be reduced to a list comprehension</p>\n\n<pre><code>def non_intersecting(l1, l2):\n    return [i for i in x if not any([j in i for j in y])]\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 10497994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSQ8W.png?s=128&g=1", "display_name": "S..", "link": "https://stackoverflow.com/users/10497994/s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1544656071, "creation_date": 1544653012, "last_edit_date": 1544653340, "question_id": 53752223, "link": "https://stackoverflow.com/questions/53752223/deriving-a-new-list-of-lists-from-two-other-lists-where-the-elements-from-l1-ar", "title": "Deriving a new list of lists from two other lists, where the elements from L1 are appended if they&#39;re not in L2", "body": "<p>So I've been studying for an upcoming test and while practicing I found this script; which is supposed to return a new list of lists containing the lists from <code>L1</code> that do not contain any string from <code>L2</code>:</p>\n\n<p>What I have done is to compare each element from <code>L2</code> with the elements from <code>L1</code>, and add them to <code>listas</code> without any duplicates. The part where I'm stuck is right after my loop finishes to run, I get a list of lists but without any actual comparison. I've tried to use a second list and it works but if <code>len(L2) &gt; 2</code> it wouldn't work, also <code>.remove()</code> but sometimes the element to remove is not in the list yet and I get some errors.</p>\n\n<pre><code>from typing import List\ndef non_intersecting(L1: List[List[str]], L2: List[str]) -&gt; List[List[str]]:    \n\"\"\"Return a new list that contains the original lists inside L1 that do not\ncontain any of the string in L2\n\n&gt;&gt;&gt; non_intersecting([['e', 'h', 'c', 'w'], ['p', 'j'], ['w', 's', 'u']], ['k', 'w'])\n[['p', 'j']]\n\"\"\"\n\nlistas = []\n\nif len(L2) == 0:\n    return L1\nelif len(L2) &gt; 0:\n    for index in range(len(L2)):\n        for lists in L1:\n            if lists not in listas:\n                if L2[index] not in lists:\n                    listas.append(lists)\n\nreturn listas\n</code></pre>\n\n<p>Any help? Would be great to do it without any modules nor <code>zip</code>,<code>lambdas</code>, as I'm not looking to submit this but rather understand the basics before my test.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1544688798, "last_edit_date": 1544688798, "creation_date": 1544687815, "answer_id": 53757314, "question_id": 53752194, "link": "https://stackoverflow.com/questions/53752194/how-to-find-all-sparse-data-regressors-in-scikit-learn/53757314#53757314", "title": "How to find all sparse data regressors in scikit-learn?", "body": "<p>There is no easy way to do that. You are better off checking the documentation for <code>fit()</code> as specified in this question:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/22737053/3374996\">Which estimators in scikit-learn don&#39;t support sparse matrices?</a></li>\n</ul>\n\n<p>or else use <code>try catch block</code> to handle that. </p>\n\n<p>Most estimators (regressors or classifiers) will check the validate the inputs by calling <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.utils.check_X_y.html\" rel=\"nofollow noreferrer\"><code>check_X_y</code></a> with appropriate parameters. The parameter of our interest is <code>**'accept_sparse'**</code> which is by default <code>False</code>. So if an estimator calls this method without any value for <code>'accept_sparse'</code> can be safely assumed to not support sparse matrices.</p>\n\n<p>You can use the following code for part of the problem.</p>\n\n<pre><code>import inspect \nfrom sklearn.utils.testing import all_estimators \nregressors = all_estimators(type_filter='regressor')\n\nfor regressor in regressors:\n    print(regressor[0], end=\" - \")\n    ff = getattr(regressor[1], 'fit')\n    if 'accept_sparse' in inspect.getsource(ff):\n        print('Accepts Sparse')\n    else:\n        print(\"Does not\")\n</code></pre>\n\n<ul>\n<li>If the output has \"<strong>Accepts Sparse</strong>\", then you can be sure that it can handle the sparse data.</li>\n<li><p>But if the output has \"<strong>Does not</strong>\", then it only means that the source code for <code>fit()</code>:-</p>\n\n<ul>\n<li>Does not contain the <code>check_X_y</code>: This does not mean that the sparse data is not supported. Maybe the current estimator is calling a different parent class's <code>fit()</code> which have that check. Some estimators having <code>CV</code> in the end are cross-validators which again pass the data to base estimators and hence may not perform the check.</li>\n<li>It maybe does not contain the parameter \"<code>accept_sparse</code>\" explicitly: The source code may have something like <code>check_X_y(X, y, ['csr', 'csc', 'coo'], ...)</code>. Depending upon the possible accepted values for <code>accept_sparse</code>, it may not be easily found out.</li>\n</ul>\n\n<p>So in that case, you can use the try-catch to find the actual status.</p></li>\n</ul>\n"}], "owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544688798, "creation_date": 1544652868, "question_id": 53752194, "link": "https://stackoverflow.com/questions/53752194/how-to-find-all-sparse-data-regressors-in-scikit-learn", "title": "How to find all sparse data regressors in scikit-learn?", "body": "<p>You can <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.utils.testing.all_estimators.html\" rel=\"nofollow noreferrer\">find all regressors</a> in scikit-learn with:</p>\n\n<pre><code>from sklearn.utils.testing import all_estimators\nregressors = all_estimators(type_filter='regressor')\n</code></pre>\n\n<p>However, my data is sparse, and I'm finding that many of these don't support sparse data. I could brute-force evaluate all of them and exclude those that fail, but is there an easier way to tell in advance which don't support sparsity?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544653551, "post_id": 53752188, "comment_id": 94357423, "body": "It&#39;s called <i>scraping</i>. &quot;scrapping&quot; means throwing something away."}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544653744, "post_id": 53752188, "comment_id": 94357497, "body": "@mkrieger1 you do realize that has nothing to do with what I asked right? All you got out of reading that is that I used the wrong verb? It&#39;s a simple typo sir."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544654073, "post_id": 53752188, "comment_id": 94357637, "body": "<code>convertToJson</code> uses <code>drop_duplicates</code>, but I don&#39;t see <code>convertToJson</code> being called anywhere. Maybe <code>drop_duplicates</code> is never called at all?"}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544654283, "post_id": 53752188, "comment_id": 94357718, "body": "convertToJson(quote_name, quote_price, quote_volume, url) just takes in the following arguments."}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544654821, "post_id": 53752188, "comment_id": 94357921, "body": "It does get called. It&#39;s just a snippet of the code."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544655901, "post_id": 53752724, "comment_id": 94358280, "body": "So don&#39;t even bother with drop_duplicated() then?"}, {"owner": {"reputation": 497, "user_id": 6142313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f03ba32f39a0d7e3f82b9b661d14a05?s=128&d=identicon&r=PG&f=1", "display_name": "Q. Qiao", "link": "https://stackoverflow.com/users/6142313/q-qiao"}, "reply_to_user": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 1, "creation_date": 1544655965, "post_id": 53752724, "comment_id": 94358305, "body": "Why a function if you can solve it in place with 2 lines of code."}, {"owner": {"reputation": 497, "user_id": 6142313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f03ba32f39a0d7e3f82b9b661d14a05?s=128&d=identicon&r=PG&f=1", "display_name": "Q. Qiao", "link": "https://stackoverflow.com/users/6142313/q-qiao"}, "reply_to_user": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544656073, "post_id": 53752724, "comment_id": 94358336, "body": "Yes, sorry about that."}, {"owner": {"reputation": 497, "user_id": 6142313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f03ba32f39a0d7e3f82b9b661d14a05?s=128&d=identicon&r=PG&f=1", "display_name": "Q. Qiao", "link": "https://stackoverflow.com/users/6142313/q-qiao"}, "reply_to_user": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544656114, "post_id": 53752724, "comment_id": 94358343, "body": "I used attr for attributes too many times recently and made that typo."}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544656326, "post_id": 53752724, "comment_id": 94358423, "body": "No problem. So just to clarify everything. This should be placed in my convertoJson()   <code>quotesArr.append(quoteObject)   quoteesArr_dict = {quote[&#39;url&#39;]: quote for quote in quotesArr}     quotesArr = list(quotesArr_dict.values())</code> for some reason I get an error that says Using variable &#39;quotesArr&#39; before assignment     `"}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544730708, "post_id": 53752724, "comment_id": 94390037, "body": "Agh for some reason it&#39;s not even writing to the JSON file now, nor is it updating the quotesArr. If you still have the time, I will  update my post with my full code. I appreciate all the help tho."}, {"owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1544817965, "post_id": 53752724, "comment_id": 94423992, "body": "If you have the time to check this again, I would appreciate it."}, {"owner": {"reputation": 497, "user_id": 6142313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f03ba32f39a0d7e3f82b9b661d14a05?s=128&d=identicon&r=PG&f=1", "display_name": "Q. Qiao", "link": "https://stackoverflow.com/users/6142313/q-qiao"}, "reply_to_user": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "edited": false, "score": 0, "creation_date": 1545060705, "post_id": 53752724, "comment_id": 94484974, "body": "Sorry, I do not you are doing anything wrong. I never used webdriver for scraping. I usually use requests and Beautiful Soup for this purpose. As for filtering out duplicates, I think you add my code correctly."}], "tags": [], "owner": {"reputation": 497, "user_id": 6142313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f03ba32f39a0d7e3f82b9b661d14a05?s=128&d=identicon&r=PG&f=1", "display_name": "Q. Qiao", "link": "https://stackoverflow.com/users/6142313/q-qiao"}, "is_accepted": false, "score": 2, "last_activity_date": 1544716609, "last_edit_date": 1544716609, "creation_date": 1544655781, "answer_id": 53752724, "question_id": 53752188, "link": "https://stackoverflow.com/questions/53752188/removing-duplicates-from-an-array-or-json-file-not-working/53752724#53752724", "title": "Removing duplicates from an Array or JSON file not working", "body": "<p>Before you dump quotesArr to json file, do this:</p>\n\n<pre><code>quotesArr_dict = {quote['url']: quote for quote in quotesArr}\nquotesArr = list(quotesArr_dict.values())\n</code></pre>\n\n<p>This two lines should remove all your duplicates in quoteArr.</p>\n\n<pre><code>def trendingBot(url, browser):\nbrowser.get(url)\ntrending = getTrendingQuotes(browser)\nfor trend in trending:\n    getStockDetails(trend, browser)\nquotesArr_dict = {quote['url']: quote for quote in quotesArr}\nquotesArr = list(quotesArr_dict.values())\n# requests finished, write json to file\nwith open('trendingQuoteData.json', 'w') as outfile:\n    json.dump(quotesArr, outfile)\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 9005618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a70163226c6c64ca1e915231c8c50faa?s=128&d=identicon&r=PG&f=1", "display_name": "pennyBoy", "link": "https://stackoverflow.com/users/9005618/pennyboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1613570644, "creation_date": 1544652835, "last_edit_date": 1613570644, "question_id": 53752188, "link": "https://stackoverflow.com/questions/53752188/removing-duplicates-from-an-array-or-json-file-not-working", "title": "Removing duplicates from an Array or JSON file not working", "body": "<p>Problem: I want to remove all the duplicates from my JSON file as I'm displaying the content on a personal website. I provided the JavaScript below on how I'm accessing and displaying the data from the JSON file. I also have the function that's suppose to remove duplicates called drop_duplicates(). It's not actually removing the duplicates.</p>\n<p>Also, I know it's much easier to use an API to do all this stuff, I'm just doing this for fun, to understand JSON and web-scraping. I also will be hosting this site and adding it to my portfolio, so if you have any tips regarding that as well I would appreciate it.\nI will be making another one similar to this with an API in the future.</p>\n<hr />\n<p>This is a snippet of my python Script that does the web scraping</p>\n<pre><code>    # grabs all the trending quotes for that day\ndef getTrendingQuotes(browser):\n    # wait until trending links appear, not really needed only for example\n    all_trendingQuotes = WebDriverWait(browser, 10).until(\n        lambda d: d.find_elements_by_css_selector('#trendingQuotes a')\n    )\n    return [link.get_attribute('href') for link in all_trendingQuotes]\n\n\n# def drop_duplicates(arr):\n#     &quot;&quot;&quot; Appends the item to the returned array only if not\n#         already present in our dummy array that serves as reference.\n#     &quot;&quot;&quot;\n#     selected = []\n#     urls = []\n#     for item in arr:\n#         if item['url'] not in urls:\n#             selected.append(item)\n#             urls.append(item['url'])\n\n#     print(&quot;\\n&quot;)\n#     print(urls)\n#     print(&quot;\\n&quot;)\n#     print(selected)\n#     print(&quot;\\n&quot;)\n\n#     return selected\n\n\ndef getStockDetails(url, browser):\n\n    print(url)\n    browser.get(url)\n\n    quote_wrapper = browser.find_element_by_css_selector('div.quote-wrapper')\n    quote_name = quote_wrapper.find_element_by_class_name(\n        &quot;quote-name&quot;).find_element_by_tag_name('h2').text\n    quote_price = quote_wrapper.find_element_by_class_name(&quot;quote-price&quot;).text\n    quote_volume = quote_wrapper.find_element_by_class_name(\n        &quot;quote-volume&quot;).text\n\n    print(&quot;\\n&quot;)\n    print(&quot;Quote Name: &quot; + quote_name)\n    print(&quot;Quote Price: &quot; + quote_price)\n    print(&quot;Quote Volume: &quot; + quote_volume)\n    print(&quot;\\n&quot;)\n\n    convertToJson(quote_name, quote_price, quote_volume, url)\n\n\nquotesArr = []\n# Convert to a JSON  file\n\n\ndef convertToJson(quote_name, quote_price, quote_volume, url):\n\n    quoteObject = {\n        &quot;url&quot;: url,\n        &quot;Name&quot;: quote_name,\n        &quot;Price&quot;: quote_price,\n        &quot;Volume&quot;: quote_volume\n    }\n    quotesArr.append(quoteObject)\n\n\ndef trendingBot(url, browser):\n    browser.get(url)\n    trending = getTrendingQuotes(browser)\n    for trend in trending:\n        getStockDetails(trend, browser)\n    # requests finished, write json to file\n\n    quotesArr_dict = {quote['url']: quote for quote in quotesArr}\n    quotesArr = list(quotesArr_dict.values())\n    print(&quot;\\n&quot;)\n    print(&quot;\\n&quot;)\n    print(&quot;COMPLETED!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;)\n    print(quotesArr)\n    print(&quot;\\n&quot;)\n    print(&quot;\\n&quot;)\n    with open('trendingQuoteData.json', 'w') as outfile:\n        json.dump(quotesArr, outfile)\n\n\ndef Main():\n    scheduler = BlockingScheduler()\n    chrome_options = Options()\n    chrome_options.add_argument(&quot;--headless&quot;)\n    # applicable to windows os only\n    chrome_options.add_argument('--disable-gpu')\n\n    url = 'https://www.tmxmoney.com/en/index.html'\n    browser = webdriver.Chrome(\n        chrome_options=chrome_options)\n\n    browser.get(url)\n\n    os.system('cls')\n    print(&quot;[+] Success! Bot Starting!&quot;)\n    scheduler.add_job(trendingBot, 'interval', minutes=1,\n                      next_run_time=datetime.now(), args=[url, browser])\n    scheduler.start()\n    # trendingBot(url, browser)\n    browser.quit()\n\n\nif __name__ == &quot;__main__&quot;:\n    Main()\n</code></pre>\n<hr />\n<p>This is snippet of my JSON file.</p>\n<pre><code>[\n  {\n    &quot;url&quot;: &quot;https://web.tmxmoney.com/quote.php?qm_symbol=ACB&amp;locale=EN&quot;,\n    &quot;Volume&quot;: &quot;Volume:\\n12,915,903&quot;,\n    &quot;Price&quot;: &quot;$ 7.67&quot;,\n    &quot;Name&quot;: &quot;Aurora Cannabis Inc.&quot;\n  },\n\n  {\n    &quot;url&quot;: &quot;https://web.tmxmoney.com/quote.php?qm_symbol=HNL&amp;locale=EN&quot;,\n    &quot;Volume&quot;: &quot;Volume:\\n548,038&quot;,\n    &quot;Price&quot;: &quot;$ 1.60&quot;,\n    &quot;Name&quot;: &quot;Horizon North Logistics Inc.&quot;\n  },\n  {\n    &quot;url&quot;: &quot;https://web.tmxmoney.com/quote.php?qm_symbol=ACB&amp;locale=EN&quot;,\n    &quot;Volume&quot;: &quot;Volume:\\n12,915,903&quot;,\n    &quot;Price&quot;: &quot;$ 7.67&quot;,\n    &quot;Name&quot;: &quot;Aurora Cannabis Inc.&quot;\n  }\n]\n</code></pre>\n<p>This is the javaScript that's in my html page.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code> var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 &amp;&amp; this.status == 200) {\n        // Typical action to be performed when the document is ready:\n        var response = JSON.parse(xhttp.responseText);\n        var output = \" \";\n        for (var i = 0; i &lt; response.length; i++) {\n          output += \"&lt;li&gt;\" + response[i].Name + \": \" + response[i].Price;\n\n          (\"&lt;/li&gt;\");\n        }\n        document.getElementById(\"quotes\").innerHTML = output;\n      }\n    };\n    xhttp.open(\"GET\", \"trendingQuoteData.json\", true);\n    xhttp.send();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "module", "installation", "pytorch", "python-idle"], "comments": [{"owner": {"reputation": 1127, "user_id": 6156524, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/232d424b3ad17f670e7450da4dd6ef89?s=128&d=identicon&r=PG&f=1", "display_name": "papabiceps", "link": "https://stackoverflow.com/users/6156524/papabiceps"}, "edited": false, "score": 0, "creation_date": 1544688288, "post_id": 53752179, "comment_id": 94366963, "body": "How did you install idle ? This is due to python path issues."}, {"owner": {"reputation": 111, "user_id": 6115152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d52b9123fd6770864378ecbe41d1eb71?s=128&d=identicon&r=PG&f=1", "display_name": "user6115152", "link": "https://stackoverflow.com/users/6115152/user6115152"}, "reply_to_user": {"reputation": 1127, "user_id": 6156524, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/232d424b3ad17f670e7450da4dd6ef89?s=128&d=identicon&r=PG&f=1", "display_name": "papabiceps", "link": "https://stackoverflow.com/users/6156524/papabiceps"}, "edited": false, "score": 0, "creation_date": 1544733526, "post_id": 53752179, "comment_id": 94391248, "body": "I used python website"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 1, "creation_date": 1544743082, "post_id": 53752179, "comment_id": 94394711, "body": "The is a duplicate of <a href=\"https://stackoverflow.com/questions/53693893/no-module-named-torch-on-python-idle\" title=\"no module named torch on python idle\">stackoverflow.com/questions/53693893/&hellip;</a>, which is a duplicate of several similar questions.  To repeat my comment: Exceptions appearing in IDLE&#39;s Shell are generated by the python binary that is running IDLE. ModuleNotFoundError means that the module was not found by python in any directory on that executing binary&#39;s sys.path. Run &#39;import sys; print(sys.executable, sys.path)&#39; to see both the python executable and its path."}], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 5538922, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GMFH2.jpg?s=128&g=1", "display_name": "bombs", "link": "https://stackoverflow.com/users/5538922/bombs"}, "is_accepted": true, "score": 5, "last_activity_date": 1581954861, "last_edit_date": 1581954861, "creation_date": 1546748136, "answer_id": 54058581, "question_id": 53752179, "link": "https://stackoverflow.com/questions/53752179/pytorch-runs-in-anaconda-prompt-but-not-in-python-idle/54058581#54058581", "title": "pytorch runs in anaconda prompt but not in python idle", "body": "<p>It seems like the python used by idle is not the one from anaconda. In python it's very common to have multiple <a href=\"https://conda.io/docs/user-guide/tasks/manage-environments.html\" rel=\"nofollow noreferrer\">environments</a>, and you always need to be aware of which environment is activated. To see what environment is activated, you can do something in this in anaconda and idle</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print(sys.executable)\n</code></pre>\n\n<p>If they have different paths, you need to first figure out how to stay in a specific environment in idle.</p>\n"}], "owner": {"reputation": 111, "user_id": 6115152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d52b9123fd6770864378ecbe41d1eb71?s=128&d=identicon&r=PG&f=1", "display_name": "user6115152", "link": "https://stackoverflow.com/users/6115152/user6115152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "accepted_answer_id": 54058581, "answer_count": 1, "score": 2, "last_activity_date": 1581954861, "creation_date": 1544652791, "question_id": 53752179, "link": "https://stackoverflow.com/questions/53752179/pytorch-runs-in-anaconda-prompt-but-not-in-python-idle", "title": "pytorch runs in anaconda prompt but not in python idle", "body": "<p>I know this question might be stupid, but I couldn't find any help on the internet. Recently I installed anaconda in my computer, it runs Windows 10 x64. Then I used anaconda prompt to download and install pytorch for 3.6 python:</p>\n\n<pre><code>conda install pytorch torchvision cuda100 -c pytorch\n</code></pre>\n\n<p>After the installation I verified in anaconda's prompt that pytorch is installed:</p>\n\n<pre><code>&gt;&gt;&gt; Python\n&gt;&gt;&gt; Import torch\n&gt;&gt;&gt; torch.cuda.is_available()\nTrue\n</code></pre>\n\n<p>I also checked conda list and indeed pytorch is installed in my machine.\nHowever, I write Python code in python 3.6.7 IDLE, not in anaconda prompt, so, whenever I try to import pytorch I get the message:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;pyshell#0&gt;\", line 1, in &lt;module&gt;\nimport pytorch\nModuleNotFoundError: No module named 'pytorch'\n</code></pre>\n\n<p>For some reason, Anacoda prompt recognizes pytorch, but not IDLE. Is there any solution for this? Is there any way to import pytorch module to IDLE?\nThanks in advance.</p>\n"}, {"tags": ["python", "datetime", "netcdf4"], "comments": [{"owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "edited": false, "score": 0, "creation_date": 1544701568, "post_id": 53752170, "comment_id": 94374055, "body": "Please show the full code; how are e.g. <code>datetime_16</code>, <code>Time_UTC_16</code>, etc. defined? Without the code (ideally a <a href=\"https://stackoverflow.com/help/mcve\">minimal working example</a>) we have to rely on making a lot of guesses....."}], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 1913367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f198708cd16e1e868ba2ab694867a4a?s=128&d=identicon&r=PG", "display_name": "msi_gerva", "link": "https://stackoverflow.com/users/1913367/msi-gerva"}, "is_accepted": false, "score": 1, "last_activity_date": 1545313806, "creation_date": 1545313806, "answer_id": 53870016, "question_id": 53752170, "link": "https://stackoverflow.com/questions/53752170/how-to-write-datetime-information-to-netcdf4/53870016#53870016", "title": "How to write datetime information to netcdf4?", "body": "<p>I really do not know, why you want to keep your time variables as a string (this is what the error message says: the values can be either strings, unicode or objects), but one example is like this:</p>\n\n<pre><code>#!/usr/bin/env ipython\n# ----------------------\nimport numpy as np\nfrom netCDF4 import Dataset,num2date,date2num\n# ----------------------\nny=104;\nnx=92\n# ----------------------\nradiance_10=np.random.random((ny,nx));\ndatetime_16=np.ones((ny,nx))\n# ----------------------\nnc_out = Dataset('test.nc', 'w', format='NETCDF4')\n\ny = nc_out.createDimension('y',ny)\nx = nc_out.createDimension('x',nx)\n\ntimes = nc_out.createVariable('time', np.unicode_, ('x','y'))\nO5s = nc_out.createVariable('O5s', np.float32, ('x', 'y'))\n\nO5s[:] = radiance_10\nfor ii in range(ny):\n    for jj in range(nx):\n        times[jj,ii] = \"2011-01-01 00:00:00\"\n\nnc_out.close()\n</code></pre>\n\n<p>Basically the values that are written to the time variable are now strings with value at every grid point \"2011-01-01 00:00:00\".</p>\n\n<p>Nevertheless, I would use timevalues as time elapsed from arbitarily selected timemoment. That is the most common way how to keep time in the netCDF file. Let us assume our data in every point is for time moment 2014-04-11 23:59. Then I could save it as seconds since 2014-04-01. Here is the code that I would use:</p>\n\n<pre><code>import numpy as np\nfrom netCDF4 import Dataset,num2date,date2num\nimport datetime\n# ----------------------\nny=104;\nnx=92\n# ----------------------\nradiance_10=np.random.random((ny,nx));\n# ---------------------------------------------------\ntimevalue = datetime.datetime(2014,4,11,23,59)\ntime_unit_out= \"seconds since 2014-04-01 00:00:00\"\n# ---------------------------------------------------\nnc_out = Dataset('test_b.nc', 'w', format='NETCDF4')\ny = nc_out.createDimension('y',ny)\nx = nc_out.createDimension('x',nx)\ntimes = nc_out.createVariable('time', np.float64, ('x','y'))\ntimes.setncattr('unit',time_unit_out);\n\nO5s = nc_out.createVariable('O5s', np.float32, ('x', 'y'))\n\nO5s[:] = radiance_10\ntimes[:] = date2num(timevalue,time_unit_out);\nnc_out.close()\n</code></pre>\n\n<p>If you check the value that is now in the time variable, it is 950340, which is the number of seconds from 2014-04-01 00:00 to 2014-04-11 23:59.</p>\n"}], "owner": {"reputation": 31, "user_id": 10446985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDgjt.jpg?s=128&g=1", "display_name": "j_hailglim", "link": "https://stackoverflow.com/users/10446985/j-hailglim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545313806, "creation_date": 1544652733, "question_id": 53752170, "link": "https://stackoverflow.com/questions/53752170/how-to-write-datetime-information-to-netcdf4", "title": "How to write datetime information to netcdf4?", "body": "<p>Essentially, I would like to open a netcdf file, read out the time stamps for individual pixels and then write the timestamps into a new file.  Here is my pseudo-code:</p>\n\n<pre><code>f10 = Dataset(nc_f10, 'r')\nTime_UTC_10 = np.transpose(f10.variables['TIME_UTC'][:]) #shape is [92,104]\nradiance_10 = f10.variables['RADIANCE'][:] #shape is [92,104]\nf10.close()\n\n#Manipulate Radiance Information\n\n#python separates the characters in the timestamp, so join it back up:\nfor i in np.arange(92):\n    for j in np.arange(104):\n        joined_16 = ''.join(Time_UTC_16[:,i,j])\n        datetime_16[i,j] = datetime.datetime.strptime(joined_16, '%Y-%m-%dT%H:%M:%S.%fZ')\n\n#Create and fill the netcdf \nnc_out = Dataset(output_directory+nc_out_file, 'w', format='NETCDF4')\n\ny = nc_out.createDimension('y',104)\nx = nc_out.createDimension('x',92)\n\ntimes = nc_out.createVariable('time', np.unicode_, ('x','y'))\nO5s = nc_out.createVariable('O5s', np.float32, ('x', 'y'))\n\ntimes[:] = datetime_16\nO5s[:] = radiance_10\n\nnc_out.close()\n</code></pre>\n\n<p>But when I try to run this, I get the following error:\n    TypeError: only numpy string, unicode or object arrays can be assigned to VLEN str var slices</p>\n\n<p>I feel like I may be misunderstanding something important here.  Any thoughts on how I can correct this code to write the timestamps to a variable in a netcdf?</p>\n"}, {"tags": ["python", "numpy", "statistics", "standard-error"], "comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544652954, "post_id": 53752155, "comment_id": 94357181, "body": "You can use <code>distances_list.count(distance)</code> to get the number of occurrences of whatever distance you&#39;re working with."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544653001, "post_id": 53752155, "comment_id": 94357199, "body": "Also in your code, what is key?"}, {"owner": {"reputation": 11, "user_id": 9403946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133f616bb5b99097b9981955b55d4074?s=128&d=identicon&r=PG&f=1", "display_name": "meteogirl79", "link": "https://stackoverflow.com/users/9403946/meteogirl79"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544653334, "post_id": 53752155, "comment_id": 94357345, "body": "Sorry, key is the array with distances. I should&#39;ve specified."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544653433, "post_id": 53752155, "comment_id": 94357387, "body": "Wait <code>dist</code> is not the distances? I assumed that <code>key</code> contains the values. Am I wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544653138, "creation_date": 1544653138, "answer_id": 53752251, "question_id": 53752155, "link": "https://stackoverflow.com/questions/53752155/standard-error-of-values-in-array-corresponding-to-values-in-another-array/53752251#53752251", "title": "Standard error of values in array corresponding to values in another array", "body": "<p>Does this help?</p>\n\n<pre><code>for d in set(key): \n    result.append(np.std[dist[i] for i in range(len(key)) if key[i] == d] / np.sqrt(dist.count(d)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 0, "last_activity_date": 1544653484, "creation_date": 1544653484, "answer_id": 53752308, "question_id": 53752155, "link": "https://stackoverflow.com/questions/53752155/standard-error-of-values-in-array-corresponding-to-values-in-another-array/53752308#53752308", "title": "Standard error of values in array corresponding to values in another array", "body": "<p>I'm having a bit of a hard time telling exactly how you want things structured, but I would recommend a dictionary, so that you can know which result is associated with which key value. If your data is like this:</p>\n\n<pre><code>&gt;&gt;&gt; key\narray([ 1,  1, 14,  6,  1, 12, 14,  6,  6,  7,  4,  3,  7,  9,  1,  3,  3,\n        6,  5,  8])\n&gt;&gt;&gt; values\narray([ 3.3 ,  2.1 ,  3.5 ,  2.5 ,  4.6 ,  7.4 ,  2.6 ,  7.8 ,  9.2 ,\n       10.11, 14.3 ,  2.5 ,  6.7 ,  3.4 ,  7.5 ,  8.5 ,  9.7 ,  4.3 ,\n        2.8 ,  4.1 ])\n</code></pre>\n\n<p>You can set up a dictionary along these lines with a dict comprehension:</p>\n\n<pre><code>result = {f'distance_{i}':np.std(values[key==i]) / np.sqrt(sum(key==i)) for i in set(key)}\n&gt;&gt;&gt; result\n{'distance_1': 1.0045988005169029, 'distance_3': 1.818424226264781, 'distance_4': 0.0, 'distance_5': 0.0, 'distance_6': 1.3372079120316331, 'distance_7': 1.2056170619230633, 'distance_8': 0.0, 'distance_9': 0.0, 'distance_12': 0.0, 'distance_14': 0.3181980515339463}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9403946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133f616bb5b99097b9981955b55d4074?s=128&d=identicon&r=PG&f=1", "display_name": "meteogirl79", "link": "https://stackoverflow.com/users/9403946/meteogirl79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544653484, "creation_date": 1544652646, "question_id": 53752155, "link": "https://stackoverflow.com/questions/53752155/standard-error-of-values-in-array-corresponding-to-values-in-another-array", "title": "Standard error of values in array corresponding to values in another array", "body": "<p>I have an array that contains numbers that are distances, and another that represents certain values at that distance. How do I calculate the standard error of all the data at a fixed value of the distance? </p>\n\n<p>The standard error is the standard deviation/ the square-root of the number of observations. </p>\n\n<p>e.g distances(d): </p>\n\n<pre><code>[1 1 14 6 1 12 14 6 6 7 4 3 7 9 1 3 3 6 5 8]\n</code></pre>\n\n<p>e.g data corresponding to the entry of the distances:</p>\n\n<p>therefore value=3.3 at d=1; value=2,1 at d=1; value=3.5 at d=14; etc..</p>\n\n<pre><code>[3.3 2.1 3.5 2.5 4.6 7.4 2.6 7.8 9.2 10.11 14.3 2.5 6.7 3.4 7.5 8.5 9.7 4.3 2.8 4.1]\n</code></pre>\n\n<p>For example, at distance d=6 I should calculate the standard error of 2.5, 7.8, 9.2 and 4.3 which would be the standard deviation of these values divided by the square root of the total number of values (4 in this case).  </p>\n\n<p>I've used the following code that works, but I don't know how to divide the result be the square-root of the total number of values at each distance:</p>\n\n<pre><code>import numpy as np\n\nresult = []\nfor d in set(key): \n    result.append(np.std[dist[i] for i in range(len(key)) if key[i] == d])\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thanks!</p>\n"}, {"tags": ["python", "bigdata"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544652992, "post_id": 53752152, "comment_id": 94357195, "body": "<code>line</code> is <i>not</i> a list, it is an array"}, {"owner": {"reputation": 77, "user_id": 10737824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c20d72e7c7c5ffb8bc76be7b3f31d4?s=128&d=identicon&r=PG&f=1", "display_name": "deppep", "link": "https://stackoverflow.com/users/10737824/deppep"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544653568, "post_id": 53752152, "comment_id": 94357432, "body": "@juanpa.arrivillaga hi there! you are right, i&#39;m sorry for the bad wording. I&#39;m a new coder. this happens with lists too though."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544653972, "post_id": 53752152, "comment_id": 94357588, "body": "Instead of doing <code>i = i + 1</code> in the loop, try looking into <code>enumerate</code> in python. Much more pythonic and clean. (This isn&#39;t an answer)"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544654148, "post_id": 53752152, "comment_id": 94357669, "body": "Also <code>len</code> and <code>np.array</code> will work nicely but that doesn&#39;t mean that it&#39;s a <code>list</code>."}, {"owner": {"reputation": 77, "user_id": 10737824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c20d72e7c7c5ffb8bc76be7b3f31d4?s=128&d=identicon&r=PG&f=1", "display_name": "deppep", "link": "https://stackoverflow.com/users/10737824/deppep"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544654311, "post_id": 53752152, "comment_id": 94357732, "body": "@hqkhan thanks for the suggestions, i will look into enumerate asap. also, yup check my previous comment about misnaming.. sorry!"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1544654346, "post_id": 53752152, "comment_id": 94357743, "body": "Is the <code>if i==100:</code> line indented correctly? It&#39;s essential, as you know-- edit your post if not."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544654472, "post_id": 53752152, "comment_id": 94357791, "body": "It&#39;s hard to tell what is wrong because we can&#39;t see the data as it&#39;s too big. One suggestion is to find out at which iteration of <code>i</code> the error occurs. Then try looking at the line to see if there is anything there (seems like there isn&#39;t -- maybe problem with data?). You can also wrap the lines where you do access line in <code>try</code> and <code>except</code> statement and perform some debugging that way."}, {"owner": {"reputation": 77, "user_id": 10737824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c20d72e7c7c5ffb8bc76be7b3f31d4?s=128&d=identicon&r=PG&f=1", "display_name": "deppep", "link": "https://stackoverflow.com/users/10737824/deppep"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1544654498, "post_id": 53752152, "comment_id": 94357807, "body": "@alexis, hey thanks! it is indented correctely, edited op"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1544654595, "post_id": 53752152, "comment_id": 94357838, "body": "So, your file has exactly 100 lines? Because the <code>if</code> statement is only evaluated once."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544654921, "post_id": 53752152, "comment_id": 94357961, "body": "You could add some logic before you hit that <code>if</code> statement such as checking the length of <code>line</code> using <code>len</code>. For instance, <code>if len(line) &lt; 3: continue</code> to skip that line."}], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1544654813, "post_id": 53752555, "comment_id": 94357917, "body": "Yup, you beat me to it. There&#39;s probably an empty line in the data which is causing the issue."}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": true, "score": 1, "last_activity_date": 1544654756, "creation_date": 1544654756, "answer_id": 53752555, "question_id": 53752152, "link": "https://stackoverflow.com/questions/53752152/indexerror-why-list-appear-to-be-empty-when-evaluated-from-if-statement/53752555#53752555", "title": "IndexError, why list appear to be empty when evaluated from if statement?", "body": "<p>Let's see what your line-reading code does with the lines you read:</p>\n\n<pre><code>&gt;&gt;&gt; line = np.array(list(filter(None,\"0 1 2 3 4 5 6 7 8 9 10\".strip().split(' ')))[4:],dtype=int)\n&gt;&gt;&gt; line[4]\n8\n</code></pre>\n\n<p>Yup, it works correctly. Conclusion: Your input file has some empty or short lines. Why don't you loop to print the length of each line, and you'll see for yourself.</p>\n\n<pre><code>with open('abitmorelinesdec.dat') as data_f:\n    for inpline in data_f:\n        print(len(np.array(list(filter(None,inpline.strip().split(' ')))[4:],dtype=int)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1173, "user_id": 7264269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098ba8f83cf1adc43093043ad883edca?s=128&d=identicon&r=PG&f=1", "display_name": "e.s.", "link": "https://stackoverflow.com/users/7264269/e-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1544655022, "creation_date": 1544655022, "answer_id": 53752602, "question_id": 53752152, "link": "https://stackoverflow.com/questions/53752152/indexerror-why-list-appear-to-be-empty-when-evaluated-from-if-statement/53752602#53752602", "title": "IndexError, why list appear to be empty when evaluated from if statement?", "body": "<p>this <strong>is not an answer</strong>. but this is the easiest way to write the code that might point to where you problem is. it'll give you more information on where the offending line is. </p>\n\n<pre><code>with open('abitmorelinesdec.dat') as data_f:\n    i=0\n    line=[]\n    for lines in data_f:\n        i=i+1\n        line = np.array(list(filter(None,lines.strip().split(' ')))[4:],dtype=int)\n        try:\n            fifth_element = line[4]\n        except IndexError:\n            print(f\"error at line {i}\")\n            print(line)\n            raise IndexError\n        if fifth_element == 0:\n            print('ok')\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10737824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c20d72e7c7c5ffb8bc76be7b3f31d4?s=128&d=identicon&r=PG&f=1", "display_name": "deppep", "link": "https://stackoverflow.com/users/10737824/deppep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53752555, "answer_count": 2, "score": 2, "last_activity_date": 1544655022, "creation_date": 1544652622, "last_edit_date": 1544654446, "question_id": 53752152, "link": "https://stackoverflow.com/questions/53752152/indexerror-why-list-appear-to-be-empty-when-evaluated-from-if-statement", "title": "IndexError, why list appear to be empty when evaluated from if statement?", "body": "<p>I'm trying to read from an huge file (1GB) and trying to go cheap on memory usage while doing so.\nThis is my code:</p>\n\n<pre><code>with open('abitmorelinesdec.dat') as data_f:\n    i=0\n    line=[]\n    for lines in data_f:\n        i=i+1\n        line = np.array(list(filter(None,lines.strip().split(' ')))[4:],dtype=int)\n        if line[4] == 0:\n            print('ok')\n</code></pre>\n\n<p>It does output the following:</p>\n\n<pre><code>if line[4] == 0:\n\nIndexError: index 4 is out of bounds for axis 0 with size 0\n</code></pre>\n\n<p>If i try instead to run this:</p>\n\n<pre><code>with open('abitmorelinesdec.dat') as data_f:\n    i=0\n    line=[]\n    for lines in data_f:\n        i=i+1\n        line = np.array(list(filter(None,lines.strip().split(' ')))[4:],dtype=int)\n    if i==100:\n        print(line) \n        print(len(line))\n</code></pre>\n\n<p>Spyder does output:</p>\n\n<pre><code>[3459 3458 3457 ... 3464 3460 3464]\n1024\n</code></pre>\n\n<p>This shows that python is correctely treating line as a list with 1024 elements just 'a moment' before the if statement is declared.\nWhat I'm missing here?</p>\n\n<p>You can find a fraction of the file here: <a href=\"https://pastebin.com/FPFWAsxP\" rel=\"nofollow noreferrer\">https://pastebin.com/FPFWAsxP</a></p>\n\n<p>Thanks you a lot in advance</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544653665, "post_id": 53752227, "comment_id": 94357465, "body": "Thank you for you answer. I tried your solution but it resulted in errors :<a href=\"https://imgur.com/QRH5CDa\" rel=\"nofollow noreferrer\">imgur.com/QRH5CDa</a>"}], "tags": [], "owner": {"reputation": 23077, "user_id": 492620, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/23e8d9c545b0a9d603765abaadc3f499?s=128&d=identicon&r=PG", "display_name": "oz123", "link": "https://stackoverflow.com/users/492620/oz123"}, "is_accepted": false, "score": 0, "last_activity_date": 1544653021, "creation_date": 1544653021, "answer_id": 53752227, "question_id": 53752116, "link": "https://stackoverflow.com/questions/53752116/python-drawing-a-graph/53752227#53752227", "title": "python drawing a graph", "body": "<p>You are drawing the graph only once.</p>\n\n<p>Your code should be something like this:</p>\n\n<pre><code>x = range(0, 101)\nplt.plot(x, vektor, 'black', x, povprec, 'red', x, std, 'blue')\n</code></pre>\n\n<p>This will draw all 3 lines on the same axis.</p>\n\n<p>See the documentaion of <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib-pyplot-plot\" rel=\"nofollow noreferrer\">plot</a> the function signature allows you to pass multiple curves to draw as:</p>\n\n<pre><code> x1, y1, format, x2, y2, format2 ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544654061, "post_id": 53752233, "comment_id": 94357630, "body": "I tried your solution but it still didn&#39;t draw all of them. Thank you for your answer."}, {"owner": {"reputation": 1560, "user_id": 9191460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213092679404905/picture?type=large", "display_name": "Rui Nian", "link": "https://stackoverflow.com/users/9191460/rui-nian"}, "reply_to_user": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544654368, "post_id": 53752233, "comment_id": 94357751, "body": "Hi Isaac, are you sure there are outputs for povprec and std?  Also did you use plt.scatter?  I tried it on my Jupyter notebook and it seems to work.  There may be a bug inside your functions.  My advise would be to print out povprec and std to ensure there are numerical value outputs."}, {"owner": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544654682, "post_id": 53752233, "comment_id": 94357867, "body": "I printed them out and they are float numbers. I have not tried using plt.scatter becouse I do not know how to. Can you help me please?   Edit: My funcion looks like this now : <a href=\"https://imgur.com/pJK6ora\" rel=\"nofollow noreferrer\">imgur.com/pJK6ora</a> and output is :<a href=\"https://imgur.com/Rm7nr1i\" rel=\"nofollow noreferrer\">imgur.com/Rm7nr1i</a> and <a href=\"https://imgur.com/NDEBcHU\" rel=\"nofollow noreferrer\">imgur.com/NDEBcHU</a>"}, {"owner": {"reputation": 1560, "user_id": 9191460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213092679404905/picture?type=large", "display_name": "Rui Nian", "link": "https://stackoverflow.com/users/9191460/rui-nian"}, "reply_to_user": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544654804, "post_id": 53752233, "comment_id": 94357911, "body": "Hi Isaac, plt.scatter allows you to plot float numbers.  For plt.plot, it plots lines.  Since a float number is a point, it will not show up on a plt.plot figure.  plt.scatter allows you to plot float values as dots.  plt.scatter takes an x and y value.  You can just copy the code I provided and it should plot them."}, {"owner": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544655256, "post_id": 53752233, "comment_id": 94358078, "body": "I fixed my functions that calculate povprec and std. But now the problem is that they print in 3 difrent graphs (I want them in one) and that both povprec and std display as a point in graph not a linear line. Thank you for your anwser thoe.Edit : I have them now in 1 graph but they still display as dots where is want them to display as linear line ."}, {"owner": {"reputation": 1560, "user_id": 9191460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213092679404905/picture?type=large", "display_name": "Rui Nian", "link": "https://stackoverflow.com/users/9191460/rui-nian"}, "reply_to_user": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544656840, "post_id": 53752233, "comment_id": 94358561, "body": "To make them a linear line, use this command: plt.axhline(y=std, color=&#39;r&#39;).  in this example, I have the line at std, and the color is red."}, {"owner": {"reputation": 1560, "user_id": 9191460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213092679404905/picture?type=large", "display_name": "Rui Nian", "link": "https://stackoverflow.com/users/9191460/rui-nian"}, "reply_to_user": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "edited": false, "score": 0, "creation_date": 1544657512, "post_id": 53752233, "comment_id": 94358785, "body": "Whoops sorry, I think I read your comment wrong, I thought you wanted a linear line.  It may be hard to draw a point on plt.plot, but you can do plt.plot([0, 0.5], [std, std]).  This will draw a very small line, but when the line is small enough, it looks like a dot.  Also, you can increase the thickness to make it look more like a dot."}], "tags": [], "owner": {"reputation": 1560, "user_id": 9191460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213092679404905/picture?type=large", "display_name": "Rui Nian", "link": "https://stackoverflow.com/users/9191460/rui-nian"}, "is_accepted": true, "score": 0, "last_activity_date": 1544653038, "creation_date": 1544653038, "answer_id": 53752233, "question_id": 53752116, "link": "https://stackoverflow.com/questions/53752116/python-drawing-a-graph/53752233#53752233", "title": "python drawing a graph", "body": "<p>Usually in Python, the values are plotted on the same figure until you run \"plt.show()\".  From your question statement, the first plot is 10 float numbers, thus you have a nice line.  For your mean and standard deviations, they are just float numbers, which is just a point.  They are also plotted on the graph, you just cant see it because it is just one point and you are using plt.plot.  To see the trend line and 2 other points for mean and standard deviation, do:</p>\n\n<pre><code>plt.plot(vektor,color='black')\nplt.show()\n\nplt.scatter(1, povprec,color='red')\nplt.show()\n\nplt.scatter(1, std,color='blue')\nplt.show()\n</code></pre>\n\n<p>This will output 3 plots, first one is your line as shown in your question.  The other 2 are points, with the y axis being their respective \"units\" (mean, standard deviation).</p>\n"}], "owner": {"reputation": 23, "user_id": 7103558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f18a5661c2e61d249802f3d22d85c15?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Dix", "link": "https://stackoverflow.com/users/7103558/isaac-dix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 53752233, "answer_count": 2, "score": 2, "last_activity_date": 1544653038, "creation_date": 1544652466, "last_edit_date": 1544652637, "question_id": 53752116, "link": "https://stackoverflow.com/questions/53752116/python-drawing-a-graph", "title": "python drawing a graph", "body": "<p>My code :</p>\n\n<pre><code>def izrisi_vektor(vektor):\n    plt.axis([0,9,0,100])\n\n    plt.plot(vektor,color='black')\n\n    povprec=povprecje(vektor)\n    plt.plot(povprec,color='red')\n\n    std=standardna_deviacija(vektor)\n    plt.plot(std,color='blue')\n\n    plt.ylabel('Amplituda')\n    plt.xlabel('Vzorec')\n    plt.show()\n    return 0\n</code></pre>\n\n<p>the vektor is a array consisting of 10 random numbers from 0 to 100\nthe function povprecje returns a float number witch is average of these 10 numbers. And standardna_deviacija(vektor) returns a float number of standard diviation of these numbers in arrayl. What I am trying to do is draw these on a graph. </p>\n\n<p>Only one that works is the first one where I plot these array numbers.</p>\n\n<p>Graph that I have at the moment</p>\n\n<p><img src=\"https://i.stack.imgur.com/AG20W.png\" alt=\"\"></p>\n"}, {"tags": ["python", "dataframe", "replace", "str-replace"], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544653751, "post_id": 53752166, "comment_id": 94357502, "body": "that works well... but when I&#39;m trying to do it for the whole df = df.str.extract(r&quot;&gt;([A-Z0-9]+)&lt;&quot;), I&#39;m getting this error: AttributeError: &#39;DataFrame&#39; object has no attribute &#39;str&#39;"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544654745, "post_id": 53752166, "comment_id": 94357893, "body": "@PAstudilloE oaky, correct me if I am wrong, you&#39;d like to apply this regex to multiple columns? How many columns do you have? Thanks."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544654803, "post_id": 53752166, "comment_id": 94357909, "body": "yes... I need to apply that to 80 different columns."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544655171, "post_id": 53752166, "comment_id": 94358041, "body": "@PAstudilloE okay, you could shortcut it to using <code>.applymap()</code>. Something along <code>df.applymap(lambda x: re.search(r&quot;&gt;([A-Z0-9]+)&lt;&quot;, x).group(1))</code>. It would though may be a good idea to pre-compile the regex and add some error-handling."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544655465, "post_id": 53752166, "comment_id": 94358138, "body": "just test it...  and I&#39;m getting this error. (&quot;&#39;NoneType&#39; object has no attribute &#39;group&#39;&quot;, &#39;occurred at index Aff_0&#39;). Any clue? I&#39;ll try again pre-compiling the regex"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544655579, "post_id": 53752166, "comment_id": 94358171, "body": "@PAstudilloE ah, I&#39;ve assumed only upper case and digits, you could adjust your regex to <code>r&quot;&gt;(\\w+)&lt;&quot;</code> - allowing all alphanumerics and an underscore."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544655884, "post_id": 53752166, "comment_id": 94358273, "body": "tks!... but I&#39;m still getting the same error. There&#39;s an issue with the attribute &#39;group&#39;"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "edited": false, "score": 0, "creation_date": 1544655911, "post_id": 53752166, "comment_id": 94358283, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185175/discussion-between-alecxe-and-pastudilloe\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 3, "last_activity_date": 1544652688, "creation_date": 1544652688, "answer_id": 53752166, "question_id": 53752108, "link": "https://stackoverflow.com/questions/53752108/python-erase-all-the-strings-except-the-information-between-in-a-dataframe/53752166#53752166", "title": "Python: Erase all the strings except the information between &gt; &lt; in a dataframe", "body": "<p>You could use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html\" rel=\"nofollow noreferrer\"><code>str.extract()</code></a> with a <em>capturing group</em>:</p>\n\n<pre><code>In [1]: import pandas as pd\n\nIn [2]: df = pd.DataFrame(['irus 1/3 km &gt;A001&lt; absc ','#$ jiadhf 3 &gt;A002&lt;', '#AB &gt;A003&lt;'], columns=['AFF'])\n\nIn [3]: df['AFF'] = df['AFF'].str.extract(r\"&gt;([A-Z0-9]+)&lt;\")\n\nIn [4]: print(df)\n    AFF\n0  A001\n1  A002\n2  A003\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544652688, "creation_date": 1544652425, "question_id": 53752108, "link": "https://stackoverflow.com/questions/53752108/python-erase-all-the-strings-except-the-information-between-in-a-dataframe", "title": "Python: Erase all the strings except the information between &gt; &lt; in a dataframe", "body": "<p>I need to erase all the content of the cell, except the information contained between > &lt; </p>\n\n<p>I have a dataframe with 100 * 15, that look like something like this:</p>\n\n<pre><code>df = pd.DataFrame(['irus 1/3 km &gt;A001&lt; absc ','#$ jiadhf 3 &gt;A002&lt;', '#AB &gt;A003&lt;'], columns=['AFF'])\n</code></pre>\n\n<p>df</p>\n\n<pre><code>    AFF\n0   irus 1/3 km &gt;A001&lt; absc\n1   #$ jiadhf 3 &gt;A002&lt;\n2   #AB &gt;A003&lt;\n</code></pre>\n\n<p>I need to get a result like this:</p>\n\n<pre><code>    AFF\n0   A001\n1   A002\n2   A003\n</code></pre>\n\n<p>I found that I need to use a command similar to this <code>re.sub('[^&gt;]+&gt;', '', y)</code>, but I've been trying several attempts and I can get exactly the info I need.</p>\n\n<p>Can somebody give me a hand?</p>\n"}, {"tags": ["python", "beautifulsoup", "string-matching"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544652114, "post_id": 53752034, "comment_id": 94356824, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1544652172, "post_id": 53752034, "comment_id": 94356854, "body": "Did you try debugging this yourself?  For instance, <code>print</code> the value of <code>text</code>; does it, indeed contain a string element with the value you want?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544652242, "post_id": 53752034, "comment_id": 94356894, "body": "Is <code>&#39;offering at Giraffe&#39;</code> embedded within the output, rather than a stand-alone string?  If so, you need the <code>index</code> method -- read the documentation of that and the <code>in</code> operator to make sure you&#39;re using the correct one."}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 2, "last_activity_date": 1544652192, "creation_date": 1544652192, "answer_id": 53752062, "question_id": 53752034, "link": "https://stackoverflow.com/questions/53752034/exact-text-match-if-statement-python-beautifulsoup/53752062#53752062", "title": "Exact text match if statement python beautifulsoup", "body": "<p>There are a few ways to search by text with <code>BeautifulSoup</code>:</p>\n\n<ul>\n<li><p><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-function\" rel=\"nofollow noreferrer\">searching function</a>. Use a function as the <code>text</code> value:</p>\n\n<pre><code>results = soup.find_all(text=lambda text: text and 'offering at Giraffe' in text)\n</code></pre></li>\n<li><p><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-regular-expression\" rel=\"nofollow noreferrer\">regular expression</a>. Use a regular expression pattern as the <code>text</code> value:</p>\n\n<pre><code>import re\n\nresults = soup.find_all(text=re.compile(r'offering at Giraffe'))\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10713182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868d08e0b8b5571742f28a295415668f?s=128&d=identicon&r=PG&f=1", "display_name": "Bramji", "link": "https://stackoverflow.com/users/10713182/bramji"}, "edited": false, "score": 0, "creation_date": 1544989449, "post_id": 53752132, "comment_id": 94460211, "body": "using the same statement do you know how I would also exclude text? Want to exclude the word &#39;menu? : So I&#39;m looking for &#39;offering at Giraffe&#39; within text, but want to exclude the word &#39;customised set&#39;, in this case it would return &quot;No Match&quot; as the words customised set&#39; is in the text. I&#39;ve tried this but it does work if &#39;offering at Giraffe&#39; in item, not in &#39;customised set&#39; in item:"}, {"owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "reply_to_user": {"reputation": 13, "user_id": 10713182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868d08e0b8b5571742f28a295415668f?s=128&d=identicon&r=PG&f=1", "display_name": "Bramji", "link": "https://stackoverflow.com/users/10713182/bramji"}, "edited": false, "score": 0, "creation_date": 1544995048, "post_id": 53752132, "comment_id": 94461747, "body": "it&#39;s checking each item in the list. it still matches, because that particular item doesn&#39;t include &#39;customised set&#39;. Unless, you want it to check the text as a whole text, not checking each line by line individually"}], "tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": true, "score": 0, "last_activity_date": 1544995212, "last_edit_date": 1544995212, "creation_date": 1544652523, "answer_id": 53752132, "question_id": 53752034, "link": "https://stackoverflow.com/questions/53752034/exact-text-match-if-statement-python-beautifulsoup/53752132#53752132", "title": "Exact text match if statement python beautifulsoup", "body": "<pre><code>import bs4\nimport requests\n\nurl = 'https://www.girafferestaurant.co.nz/menu'\nr  = requests.get(url)\nsoup = bs4.BeautifulSoup(r.text,'html.parser')\n\ntext = soup.find_all(text=True)\nmatches = []\n\nfor item in text:\n    if 'offering at Giraffe' in item:\n        matches.append(item)\n\nif matches != []:\n    print ('Match')\nelse: \n     print (\"No Match\")\n</code></pre>\n\n<p>EDIT: for your follow up. If you just want to check through out the entire text:</p>\n\n<pre><code>import bs4\nimport requests\n\nurl = 'https://www.girafferestaurant.co.nz/menu'\nr  = requests.get(url)\nsoup = bs4.BeautifulSoup(r.text,'html.parser')\n\ntext = soup.text\nmatches = []\n\nif 'offering at Giraffe' in text and 'customised set' not in text:\n        matches.append(text)\n\nif matches != []:\n    print ('Match')\nelse: \n     print (\"No Match\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10713182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868d08e0b8b5571742f28a295415668f?s=128&d=identicon&r=PG&f=1", "display_name": "Bramji", "link": "https://stackoverflow.com/users/10713182/bramji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "accepted_answer_id": 53752132, "answer_count": 2, "score": -1, "last_activity_date": 1552644124, "creation_date": 1544652042, "last_edit_date": 1552644124, "question_id": 53752034, "link": "https://stackoverflow.com/questions/53752034/exact-text-match-if-statement-python-beautifulsoup", "title": "Exact text match if statement python beautifulsoup", "body": "<p>I'm trying to find an 'exact text match' using the below code. The website is: <a href=\"https://www.girafferestaurant.co.nz/menu\" rel=\"nofollow noreferrer\">https://www.girafferestaurant.co.nz/menu</a>. When I print (soup.find_all(text=True)) I can get the text back and search, but I just want to match or no match depending if the word/phrase (in this case 'offering at Giraffe') is in the statement.</p>\n\n<p>Below is what I've tried.</p>\n\n<pre><code>text = soup.find_all(text=True)\nif 'offering at Giraffe' in text:\n     print (\"Match\")\nelse: \n     print (\"No Match\")\n</code></pre>\n\n<p>Also, I've used text = soup.find_all('p') but the text is not always in p tags, as it's across different sites.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "edited": false, "score": 1, "creation_date": 1544655109, "post_id": 53752010, "comment_id": 94358025, "body": "The code is not runnable since Player has no method named move. Please paste the full version for us to test"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544656827, "post_id": 53752010, "comment_id": 94358558, "body": "One potential problem has to do with the <code>playerOnTileS</code> surface you create. It&#39;s huge\u20143200W x 3200H. That size results in surface of 10,240,000 pixels (and each of those probably requires at least 3 or 4 bytes). If you want real help, you need to <a href=\"https://stackoverflow.com/posts/53752010/edit\">edit</a> your question and add enough code so that others can run it and reproduce the problem. If possible, also include the <code>grass.png</code> image. If you can&#39;t add it directly to your question, then upload it to a website like <a href=\"https://imgur.com\" rel=\"nofollow noreferrer\">imgur</a> and then put a link to it in."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544657604, "post_id": 53752010, "comment_id": 94358808, "body": "You don&#39;t need to draw the entire map, only the part that is visible on screen. It takes some (very minimal) math, but the speed-up ought to compensate for that \u2013 and then some."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1544659270, "post_id": 53752010, "comment_id": 94359251, "body": "The nested <code>for</code> loops near the end which do 80x80 = 6,400 <code>playerOnTileS.blit()</code>s between <b><i>each</i></b> <code>display.update()</code> are probably a major reason why it&#39;s so slooooooooooow..."}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "edited": false, "score": 0, "creation_date": 1544664889, "post_id": 53752010, "comment_id": 94360368, "body": "The nested for loops are indeed the culprit, but once you correct that (by drawing only what is visible) you can further optimize: <a href=\"https://stackoverflow.com/questions/6395923/any-way-to-speed-up-python-and-pygame\" title=\"any way to speed up python and pygame\">stackoverflow.com/questions/6395923/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 2, "last_activity_date": 1544687025, "creation_date": 1544687025, "answer_id": 53757136, "question_id": 53752010, "link": "https://stackoverflow.com/questions/53752010/pygame-running-super-slow-2-fps/53757136#53757136", "title": "Pygame running super slow (~2 fps)", "body": "<p>Images/pygame.Surfaces should usually be converted with the <a href=\"http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert\" rel=\"nofollow noreferrer\"><code>pygame.Surface.convert</code></a> or <code>convert_alpha</code> methods. The performance of unconverted surfaces is abysmal. When I convert the grass image, I get nearly 30 FPS.</p>\n\n<p>The next problem is the nested <code>for</code> loop. Python's function call overhead is rather big, so it would be a good idea to blit all the tiles onto one large background surface before the main loop starts and then blit this background surface onto the <code>DISPLAYSURF</code> once per frame to clear it. With that change I get pygame's apparent maximum FPS, that means <code>clock.get_fps()</code> jumps between 2000 and 1666.666 FPS.</p>\n\n<pre><code># Ahead of the while loop.\nplayerOnTileS = pygame.Surface((MAPWIDTH*TILESIZE, MAPHEIGHT*TILESIZE))\nfor row in range(len(tilemap)):\n    for column in range(len(tilemap[row])):\n        playerOnTileS.blit(tilemap[row][column],(column*TILESIZE,row*TILESIZE))\n</code></pre>\n\n<p>You have to change the <code>update</code> method (by the way, better call it <code>draw</code>) and blit the player surface onto the <code>DISPLAYSURF</code> instead.</p>\n"}], "owner": {"reputation": 105, "user_id": 10665144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f86d364e6faf4dcc4c0ab599d897be?s=128&d=identicon&r=PG&f=1", "display_name": "rivques", "link": "https://stackoverflow.com/users/10665144/rivques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 53757136, "answer_count": 1, "score": 1, "last_activity_date": 1544733109, "creation_date": 1544651933, "question_id": 53752010, "link": "https://stackoverflow.com/questions/53752010/pygame-running-super-slow-2-fps", "title": "Pygame running super slow (~2 fps)", "body": "<p>My pygame game runs super slowly, about 2 fps. You are supposed to be able to move around with WASD and always be centered in the screen. I know it has something to do with my tilemap and the way I do my math, but I can't pin it down.  Also, if there is a better way to keep the player in the center while moving the map behind it, I would love to know how to do that.</p>\n\n<pre><code>import pygame, sys, numpy\n#create fps clock\nclock = pygame.time.Clock()\n#\nMAPHEIGHT = 80\nMAPWIDTH = 80\nTILESIZE =  40\nTILESONSCREENW = 13\nTILESONSCREENH = 13\n#set screen size\nSCREENH = TILESONSCREENH*TILESIZE\nSCREENW = TILESONSCREENW*TILESIZE\n#create character vars\ncircleRad = 40\ncircleSpeed = 4\n#create circle pos vars\ncircleX = 250\ncircleY = 250\n#create keyboard button vars\nrightP = False\nleftP = False\nupP = False\ndownP = False\n#\nplayerOnTileS = pygame.Surface((MAPWIDTH*TILESIZE, MAPHEIGHT*TILESIZE))\n#constants for the tilemap\nGRASS = pygame.image.load(\"grass.png\")\n#tilemap\ntilemap = [[GRASS for i in range(MAPHEIGHT)] for j in range(MAPWIDTH)]\n#create window\nDISPLAYSURF = pygame.display.set_mode((SCREENW, SCREENH))\n#set window name\npygame.display.set_caption(\"Snowball Fight!\")\n#---------------------------------------------------\nclass Player:\n    def __init__(self, playX, playY, size):\n        self.playerX = playX\n        self.playerY = playY\n        self.size = size\n        self.playerSurface = pygame.Surface((size, size))\n        pygame.draw.rect(self.playerSurface, (19,135,67), (0,0,size, size))\n#------------------------------------------------\n    def update(self):\n        playerOnTileS.blit(self.playerSurface, (self.playerX, self.playerY))\n        DISPLAYSURF.blit(playerOnTileS, (SCREENW/2-self.playerX-self.size ,SCREENH/2-self.playerY-self.size))\n#game loop\nmyPlayer = Player(0,0,circleRad)\nwhile True:\n    DISPLAYSURF.fill((0,0,0))\n    for event in pygame.event.get():\n        #if the user closed the window\n        if event.type == pygame.QUIT:\n            #close pygame\n            pygame.quit()\n            sys.exit()\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_a:\n                leftP = True\n            if event.key == pygame.K_d:\n                rightP = True\n            if event.key == pygame.K_w:\n                upP = True\n            if event.key == pygame.K_s:\n                downP = True\n        if event.type == pygame.KEYUP:\n            if event.key == pygame.K_a:\n                leftP = False\n            if event.key == pygame.K_d:\n                rightP = False\n            if event.key == pygame.K_w:\n                upP = False\n            if event.key == pygame.K_s:\n                downP = False\n    if leftP:\n        myPlayer.move(-circleSpeed,0,True)\n    if rightP:\n        myPlayer.move(circleSpeed,0,True)\n    if downP:\n        myPlayer.move(0,circleSpeed,True)\n    if upP:\n        myPlayer.move(0,-circleSpeed,True)\n    for row in range(len(tilemap)):\n        for column in range(len(tilemap[row])):\n            playerOnTileS.blit(tilemap[row][column],(column*TILESIZE,row*TILESIZE))\n    myPlayer.update()\n    pygame.display.update()\n    clock.tick(30)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2282, "user_id": 123642, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/73aa7ad0c97ecb6a1d766fa8810aba29?s=128&d=identicon&r=PG", "display_name": "kolen", "link": "https://stackoverflow.com/users/123642/kolen"}, "edited": false, "score": 0, "creation_date": 1544660132, "post_id": 53751971, "comment_id": 94359459, "body": "<code>subprocess</code> module does not require installation, it&#39;s a part of standard library. You don&#39;t have <code>ls</code> program installed on Windows."}], "answers": [{"comments": [{"owner": {"reputation": 1927, "user_id": 8959427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b4fe6df437ab694030b8778119e3cf?s=128&d=identicon&r=PG&f=1", "display_name": "user8959427", "link": "https://stackoverflow.com/users/8959427/user8959427"}, "edited": false, "score": 0, "creation_date": 1544653513, "post_id": 53752131, "comment_id": 94357411, "body": "I just tried what you suggested and I get another error (I put in the original comment)"}], "tags": [], "owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "is_accepted": true, "score": 1, "last_activity_date": 1544652521, "creation_date": 1544652521, "answer_id": 53752131, "question_id": 53751971, "link": "https://stackoverflow.com/questions/53751971/python-subprocess-package-not-installing/53752131#53752131", "title": "Python subprocess package not installing", "body": "<p>The <code>subprocess</code> module is a part of the standard library in Python. The problem is probably that it cannot find the <code>ls</code> command. </p>\n\n<p>Your code should be </p>\n\n<pre><code>print(check_output([\"/bin/ls\", \"../input\"]).decode(\"utf8\"))\n</code></pre>\n\n<p>Or wherever you happen to have <code>ls</code> installed</p>\n"}], "owner": {"reputation": 1927, "user_id": 8959427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b4fe6df437ab694030b8778119e3cf?s=128&d=identicon&r=PG&f=1", "display_name": "user8959427", "link": "https://stackoverflow.com/users/8959427/user8959427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2915, "favorite_count": 0, "accepted_answer_id": 53752131, "answer_count": 1, "score": 0, "last_activity_date": 1544653481, "creation_date": 1544651742, "last_edit_date": 1544653481, "question_id": 53751971, "link": "https://stackoverflow.com/questions/53751971/python-subprocess-package-not-installing", "title": "Python subprocess package not installing", "body": "<p>Errors in packages in Python: I am trying to use the <code>subprocess</code> and <code>check_output</code> in Python. I run the following:</p>\n\n<pre><code>import numpy as np \nimport pandas as pd\nfrom subprocess import check_output\n\nprint(check_output([\"ls\", \"../input\"]).decode(\"utf8\"))\n</code></pre>\n\n<p>I try the following in Jupyter notebook and get the following error.</p>\n\n<pre><code>FileNotFoundError                         Traceback (most recent call last)\n&lt;ipython-input-22-96ca67a4cf87&gt; in &lt;module&gt;()\n      2 import pandas as pd\n      3 from subprocess import check_output\n----&gt; 4 print(check_output([\"ls\", \"../input\"]).decode(\"utf8\"))\n\n~\\Anaconda3\\lib\\subprocess.py in check_output(timeout, *popenargs, **kwargs)\n    334 \n    335     return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\n--&gt; 336                **kwargs).stdout\n    337 \n    338 \n\n~\\Anaconda3\\lib\\subprocess.py in run(input, timeout, check, *popenargs, **kwargs)\n    401         kwargs['stdin'] = PIPE\n    402 \n--&gt; 403     with Popen(*popenargs, **kwargs) as process:\n    404         try:\n    405             stdout, stderr = process.communicate(input, timeout=timeout)\n\n~\\Anaconda3\\lib\\subprocess.py in __init__(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, encoding, errors)\n    707                                 c2pread, c2pwrite,\n    708                                 errread, errwrite,\n--&gt; 709                                 restore_signals, start_new_session)\n    710         except:\n    711             # Cleanup if the child failed starting.\n\n~\\Anaconda3\\lib\\subprocess.py in _execute_child(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, unused_restore_signals, unused_start_new_session)\n    995                                          env,\n    996                                          os.fspath(cwd) if cwd is not None else None,\n--&gt; 997                                          startupinfo)\n    998             finally:\n    999                 # Child is launched. Close the parent's copy of those pipe\n\nFileNotFoundError: [WinError 2] El sistema no puede encontrar el archivo especificado\n</code></pre>\n\n<p>With this error I asume the <code>subprocess</code> is not installed so i run <code>!pip install subprocess</code> and get this message..</p>\n\n<pre><code>Collecting subprocess\n  Could not find a version that satisfies the requirement subprocess (from versions: )\nNo matching distribution found for subprocess\n</code></pre>\n\n<p>I am new to Python.</p>\n\n<p>EDIT: I now get this error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nFileNotFoundError                         Traceback (most recent call last)\n&lt;ipython-input-4-d1bde9bd8aa2&gt; in &lt;module&gt;()\n----&gt; 1 print(check_output([\"/bin/ls\", \"../input\"]).decode(\"utf8\"))\n\n~\\Anaconda3\\lib\\subprocess.py in check_output(timeout, *popenargs, **kwargs)\n    334 \n    335     return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\n--&gt; 336                **kwargs).stdout\n    337 \n    338 \n\n~\\Anaconda3\\lib\\subprocess.py in run(input, timeout, check, *popenargs, **kwargs)\n    401         kwargs['stdin'] = PIPE\n    402 \n--&gt; 403     with Popen(*popenargs, **kwargs) as process:\n    404         try:\n    405             stdout, stderr = process.communicate(input, timeout=timeout)\n\n~\\Anaconda3\\lib\\subprocess.py in __init__(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, encoding, errors)\n    707                                 c2pread, c2pwrite,\n    708                                 errread, errwrite,\n--&gt; 709                                 restore_signals, start_new_session)\n    710         except:\n    711             # Cleanup if the child failed starting.\n\n~\\Anaconda3\\lib\\subprocess.py in _execute_child(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, unused_restore_signals, unused_start_new_session)\n    995                                          env,\n    996                                          os.fspath(cwd) if cwd is not None else None,\n--&gt; 997                                          startupinfo)\n    998             finally:\n    999                 # Child is launched. Close the parent's copy of those pipe\n\nFileNotFoundError: [WinError 2] El sistema no puede encontrar el archivo especificado\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1544651772, "post_id": 53751933, "comment_id": 94356656, "body": "Option 1 sounds good to me."}, {"owner": {"reputation": 1125, "user_id": 10553098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00fb2d5007c1e5c1adb45aadfb37246?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10553098/john"}, "edited": false, "score": 0, "creation_date": 1544654266, "post_id": 53751933, "comment_id": 94357711, "body": "Have you looked at JSON?  It&#39;s a seemingly perfect format for storing the type of data you describe.  That seems likely to be a better format for your output than csv.  There are also options for converting from 1 to the other if you need csv."}, {"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1544656018, "post_id": 53751933, "comment_id": 94358322, "body": "JSON wouldn&#39;t be bad, however the intent is to provide it to a human consumer to just open in excel or whatever :) I&#39;m also doing some other analytics in Python on the data so not just reformatting the data."}], "owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544651537, "creation_date": 1544651537, "question_id": 53751933, "link": "https://stackoverflow.com/questions/53751933/how-to-collect-all-sub-dictionary-keys", "title": "How to collect all &quot;sub&quot; dictionary keys?", "body": "<p>I'm storing information read from several files into a dictionary of dictionaries. One piece of information will be guaranteed and should be unique so it is the key for the larger dictionary entry. There are other attributes which are associated to each key entry which are not always determinable. I also do not want have hard coded values in the code to get only certain attributes.</p>\n\n<p>For example, the file I'm parsing has data like so:</p>\n\n<pre><code>id=1\nlength=10\nwidth=11\nid=2\nwidth=1\nlength=4\nheight=2\nid=3\nsome user defined attribute=making life easy\n</code></pre>\n\n<p>The parsing of the data is trivial and I'm storing each item as a dictionary of the attributes with <code>id</code> being used as the key in the larger dictionary. (Multiple files are being pushed into one dictionary.)</p>\n\n<p>What I'm stuck on is how to best get all attributes in order to shove the data out to a csv report file using <code>csv.DictWriter</code> so that I can then have something like this:</p>\n\n<p>(pseudo csv formatting)</p>\n\n<pre><code>id, length, width, height, 'some user defined attribute',\n1, 10, 11, , ,\n2, 1, 4, 2, ,\n3, , , , making life easy,\n</code></pre>\n\n<p>I think my options are:</p>\n\n<ol>\n<li>Collect them as I build the dictionary storing in a list. Except then I need to pass around the list along with the dictionary.</li>\n<li><s>Run through the dictionary and build it up after.</s> Inefficient.</li>\n<li>Alternate to \"Collect them\", extend the dictionary and add that functionality to it when I add items.</li>\n</ol>\n"}, {"tags": ["python", "tensorflow", "keras", "tensorflow-lite"], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 2514112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aea269b564239b989e73faf7b1f56ca7?s=128&d=identicon&r=PG", "display_name": "Cativail", "link": "https://stackoverflow.com/users/2514112/cativail"}, "edited": false, "score": 0, "creation_date": 1544733778, "post_id": 53752959, "comment_id": 94391361, "body": "Thanks, seems to produce an output with tensorflow nightly: 1.13.0-dev20181207 and keras: 2.2.4"}], "tags": [], "owner": {"reputation": 101, "user_id": 7691129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16ce525dcb2c3d003526a149f851cded?s=128&d=identicon&r=PG&f=1", "display_name": "SoonYau", "link": "https://stackoverflow.com/users/7691129/soonyau"}, "is_accepted": true, "score": 0, "last_activity_date": 1544657400, "creation_date": 1544657400, "answer_id": 53752959, "question_id": 53751925, "link": "https://stackoverflow.com/questions/53751925/issues-when-converting-tensorflow-keras-model-to-tensorflow-lite-model/53752959#53752959", "title": "Issues when converting tensorflow/keras model to tensorflow lite model", "body": "<p>This looks like <a href=\"https://github.com/tensorflow/tensorflow/issues/22617\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/22617</a> where the _tensorflow_wrap_toco library is missing in Windows version. I would suggest you to  try installing the latest Tensorflow version.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9477964"}, "is_accepted": false, "score": 1, "last_activity_date": 1544775472, "creation_date": 1544775472, "answer_id": 53775791, "question_id": 53751925, "link": "https://stackoverflow.com/questions/53751925/issues-when-converting-tensorflow-keras-model-to-tensorflow-lite-model/53775791#53775791", "title": "Issues when converting tensorflow/keras model to tensorflow lite model", "body": "<p>The TfliteConverter and TocoConverter seem to be very problematic on all OS except Mac. You can still convert the model to TensorFlow Lite using the following steps:</p>\n\n<p>Create a new Google Colab notebook</p>\n\n<p>Write the code to convert the model. Import TFLiteConverter and other stuff.</p>\n\n<p>Upload the model in the notebook.</p>\n\n<p>Run the notebook.</p>\n\n<p>Download the generated TFLite file.</p>\n\n<p>You can use\u00a0<a href=\"https://drive.google.com/file/d/1IUIn9ffk5ICKujqPyuGaHL2irQ9Wmtpm/view?usp=drivesdk\" rel=\"nofollow noreferrer\">this notebook</a>.</p>\n"}], "owner": {"reputation": 968, "user_id": 2514112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aea269b564239b989e73faf7b1f56ca7?s=128&d=identicon&r=PG", "display_name": "Cativail", "link": "https://stackoverflow.com/users/2514112/cativail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "accepted_answer_id": 53752959, "answer_count": 2, "score": 1, "last_activity_date": 1607017335, "creation_date": 1544651501, "question_id": 53751925, "link": "https://stackoverflow.com/questions/53751925/issues-when-converting-tensorflow-keras-model-to-tensorflow-lite-model", "title": "Issues when converting tensorflow/keras model to tensorflow lite model", "body": "<p>While experimenting with <code>tensorflow</code> i've come accross an issue when converting <code>keras model</code> into <code>tensorflow lite</code>.</p>\n\n<p>This is my setup:</p>\n\n<pre><code>model = models.Sequential()\nmodel.add(layers.Dense(128, activation='relu', input_shape=(1,)))\nmodel.add(layers.Dense(64, activation='relu'))\nmodel.add(layers.Dense(17, activation='softmax'))\nmodel.compile(optimizer='adam',\n              loss='categorical_crossentropy',\n              metrics=['accuracy'])\n...\nmodel.save('Foo.h5')\n...\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"Foo.h5\")\ntflite_model = converter.convert()\nopen(\"Foo_converted.tflite\", \"wb\").write(tflite_model)\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>INFO:tensorflow:Froze 6 variables.\nINFO:tensorflow:Converted 6 variables to const ops.\n\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n&lt;ipython-input-6-f0613acb22f5&gt; in &lt;module&gt;()\n      2 \n      3 converter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"Foo.h5\")\n----&gt; 4 tflite_model = converter.convert()\n      5 open(\"converted_model.tflite\", \"wb\").write(tflite_model)\n\nc:\\users\\dev\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\lite.py in convert(self)\n    451           input_tensors=self._input_tensors,\n    452           output_tensors=self._output_tensors,\n--&gt; 453           **converter_kwargs)\n    454     else:\n    455       # Graphs without valid tensors cannot be loaded into tf.Session since they\n\nc:\\users\\dev\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py in toco_convert_impl(input_data, input_tensors, output_tensors, *args, **kwargs)\n    340   data = toco_convert_protos(model_flags.SerializeToString(),\n    341                              toco_flags.SerializeToString(),\n--&gt; 342                              input_data.SerializeToString())\n    343   return data\n    344 \n\nc:\\users\\dev\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py in toco_convert_protos(model_flags_str, toco_flags_str, input_data_str)\n    133     else:\n    134       raise RuntimeError(\"TOCO failed see console for info.\\n%s\\n%s\\n\" %\n--&gt; 135                          (stdout, stderr))\n    136 \n    137 \n\nRuntimeError: TOCO failed see console for info.\nb'Traceback (most recent call last):\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module(\\'_tensorflow_wrap_toco\\', [dirname(__file__)])\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"__main__\", mod_spec)\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\\\Users\\\\Dev\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python36\\\\Scripts\\\\toco_from_protos.exe\\\\__main__.py\", line 5, in &lt;module&gt;\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\toco_from_protos.py\", line 22, in &lt;module&gt;\\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 28, in &lt;module&gt;\\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"c:\\\\users\\\\dev\\\\appdata\\\\local\\\\programs\\\\python\\\\python36\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nModuleNotFoundError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n'\nNone\n</code></pre>\n\n<p>If someone could explain why the conversion fails that would be great. </p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "threadpool", "python-multithreading"], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 8103540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feaf3eed744f029b9a1d7839db8eb14d?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/8103540/stephen"}, "edited": false, "score": 0, "creation_date": 1544662850, "post_id": 53752860, "comment_id": 94359994, "body": "One quick thing, how would you prevent the QProgress Dialog window from popping up at the beginning aside from moving the building and connecting bits into the archiveEntry function. Other than that this is exactly what I need thank you!"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 38, "user_id": 8103540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feaf3eed744f029b9a1d7839db8eb14d?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/8103540/stephen"}, "edited": false, "score": 0, "creation_date": 1544663101, "post_id": 53752860, "comment_id": 94360033, "body": "@Stephen You must use hide as I already update my answer, on the other hand I did not understand the rest."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1544663007, "last_edit_date": 1544663007, "creation_date": 1544656665, "answer_id": 53752860, "question_id": 53751909, "link": "https://stackoverflow.com/questions/53751909/progress-bar-does-not-render-until-job-is-complete/53752860#53752860", "title": "Progress Bar Does not Render Until Job is Complete", "body": "<p>Heavy tasks should not run on the main thread, you should use a thread. In this case I have replaced your logic, so there is a class that is in charge of copying the files informing through signs of progress, error, etc. An object of that class will live in another thread notifying the GUI through signals, in this case I will use QProgressDialog to show the progress.</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nimport sys\nimport shutil\nimport threading\nfrom PyQt5 import QtCore, QtGui, QtWidgets\n\nclass MainWindow(QtWidgets.QMainWindow):\n    startMoveFilesSignal = QtCore.pyqtSignal(str, str)\n\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        srcdir = \"/media/zachlab/Windows/LinuxStorage/old/embryos\"\n        dstdir = \"/media/zachlab/Windows/LinuxStorage/old/out\"\n        self.le_src = QtWidgets.QLineEdit(srcdir)\n        self.le_dst = QtWidgets.QLineEdit(dstdir)\n        self.button = QtWidgets.QPushButton(\"Copy\")\n        self.button.clicked.connect(self.archiveEntry)\n\n        central_widget = QtWidgets.QWidget()\n        self.setCentralWidget(central_widget)\n        lay = QtWidgets.QFormLayout(central_widget)\n        lay.addRow(\"From: \", self.le_src)\n        lay.addRow(\"To: \", self.le_dst)\n        lay.addRow(self.button)\n\n        self.progressbar = QtWidgets.QProgressDialog(self)\n        self.progressbar.hide()\n\n        thread = QtCore.QThread(self)\n        thread.start()\n        self.helper = MoveFileHelper()\n        self.startMoveFilesSignal.connect(self.helper.moveFilesWithProgress)\n        self.helper.progressChanged.connect(self.progressbar.setValue)\n        self.helper.finished.connect(self.on_finished)\n        self.helper.started.connect(self.progressbar.show)\n        self.helper.errorOccurred.connect(self.on_errorOcurred)\n        self.helper.moveToThread(thread)\n\n    @QtCore.pyqtSlot()\n    def archiveEntry(self):\n        self.startMoveFilesSignal.emit(self.le_src.text(), self.le_dst.text())\n        self.progressbar.hide()\n\n    @QtCore.pyqtSlot()\n    def on_finished(self):\n        self.button.setText('Finished')\n\n    @QtCore.pyqtSlot(str)\n    def on_errorOcurred(self, msg):\n        QtWidgets.QMessageBox.critical(self, \"Error Ocurred\", msg)\n\nclass MoveFileHelper(QtCore.QObject):\n    progressChanged = QtCore.pyqtSignal(int)\n    started = QtCore.pyqtSignal()\n    finished = QtCore.pyqtSignal()\n    errorOccurred = QtCore.pyqtSignal(str)\n\n    def calculateAndUpdate(self, done, total):\n        progress = int(round((done / float(total)) * 100))\n        self.progressChanged.emit(progress)\n\n    @staticmethod\n    def countFiles(directory):\n        count = 0\n        if os.path.isdir(directory):\n            for path, dirs, filenames in os.walk(directory):\n                count += len(filenames)\n        return count\n\n    @staticmethod\n    def makedirs(dest):\n        if not os.path.exists(dest):\n            os.makedirs(dest)\n\n    @QtCore.pyqtSlot(str, str)\n    def moveFilesWithProgress(self, src, dest):\n        numFiles = MoveFileHelper.countFiles(src)\n        if os.path.exists(dest):\n            self.errorOccurred.emit(\"Dest exist\")\n            return \n        if numFiles &gt; 0:\n            self.started.emit()\n            MoveFileHelper.makedirs(dest)\n            numCopied = 0\n            for path, dirs, filenames in os.walk(src):\n                for directory in dirs:\n                    destDir = path.replace(src, dest)\n                    MoveFileHelper.makedirs(os.path.join(destDir, directory))\n\n                for sfile in filenames:\n                    srcFile = os.path.join(path, sfile)\n                    destFile = os.path.join(path.replace(src, dest), sfile)\n                    shutil.copy(srcFile, destFile)\n                    numCopied += 1\n                    self.calculateAndUpdate(numCopied, numFiles)\n            self.finished.emit()\n\nif __name__ == \"__main__\":\n    app = QtWidgets.QApplication(sys.argv)\n    ex = MainWindow()\n    ex.resize(640, ex.sizeHint().height())\n    ex.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 8103540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feaf3eed744f029b9a1d7839db8eb14d?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/8103540/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 1, "accepted_answer_id": 53752860, "answer_count": 1, "score": 1, "last_activity_date": 1566880879, "creation_date": 1544651426, "last_edit_date": 1592644375, "question_id": 53751909, "link": "https://stackoverflow.com/questions/53751909/progress-bar-does-not-render-until-job-is-complete", "title": "Progress Bar Does not Render Until Job is Complete", "body": "<p>I am trying to make a progress bar for copying large files. However, currently the Dialog window goes black until the process is finished. I now understand I probably have to learn how to use treads and pass the data back into the GUI. But I still don't understand why the window fails to render completely. I'd understand if the window was unresponsive because the <code>moveFilesWithProgress</code> function is running. But within that function I am updating the progress bar value. I even tried adding <code>QtGui.QGuiApplication.processEvents()</code> in the hopes that it will update the gui before continuing to iterate.</p>\n<p>I would appreciate any help to possibly fix this without a multi threaded process but if it is not possible I would greatly appreciate a dumbed down example of how to use Qthread. I found a related question but there was to much going on for me to understand the example. <a href=\"https://stackoverflow.com/questions/49582598/how-do-i-update-pyqt5-progress-bar-in-ui-mainwindow\">here is the link</a></p>\n<h3>example code:</h3>\n<pre><code>#!/usr/bin/env python\nimport os\nimport sys\nimport shutil\nfrom PyQt5.QtWidgets import (QApplication, QDialog, QLineEdit, QMainWindow,\n                            QPushButton, QProgressBar)\nimport PyQt5.QtGui as QtGui\n\nclass MainWindow(QMainWindow):\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        self.button = QPushButton(&quot;Copy&quot;, self)\n        self.button.clicked.connect(self.archiveEntry)\n        self.show()\n\n    def archiveEntry(self):\n        self.p = ProgressBar()\n        self.p.show()\n        Dir = &quot;/media/zachlab/Windows/LinuxStorage/old/embryos&quot;\n        outDir = &quot;/media/zachlab/Windows/LinuxStorage/old/out&quot;\n        run = self.p.moveFilesWithProgress(Dir, outDir)\n        # if run:\n        #    self.p.close\n\n\nclass ProgressBar(QDialog):\n    def __init__(self):\n        super().__init__()\n        self.pbar = QProgressBar(self)\n\n    def timerEvent(self, e):\n        if self.step &gt;= 100:\n            self.timer.stop()\n            self.btn.setText('Finished')\n            return\n        self.pbar.setValue(self.step)\n\n    def update(self, value):\n        self.pbar.setValue(value)\n        QtGui.QGuiApplication.processEvents()\n\n    def calculateAndUpdate(self, done, total):\n        progress = int(round((done / float(total)) * 100))\n        self.update(progress)\n        \n\n    def countFiles(self, directory):\n        files = []\n        if os.path.isdir(directory):\n            for path, dirs, filenames in os.walk(directory):\n                files.extend(filenames)\n        return len(files)\n\n    def makedirs(self, dest):\n        if not os.path.exists(dest):\n            os.makedirs(dest)\n\n    def moveFilesWithProgress(self, src, dest):\n        numFiles = self.countFiles(src)\n        if os.path.exists(dest):\n            return 0\n        if numFiles &gt; 0:\n            self.makedirs(dest)\n            numCopied = 0\n\n            for path, dirs, filenames in os.walk(src):\n                for directory in dirs:\n                    destDir = path.replace(src, dest)\n                    self.makedirs(os.path.join(destDir, directory))\n\n                for sfile in filenames:\n                    srcFile = os.path.join(path, sfile)\n                    destFile = os.path.join(path.replace(src, dest), sfile)\n                    shutil.copy(srcFile, destFile)\n                    numCopied += 1\n                    self.calculateAndUpdate(numCopied, numFiles)\n                    self.show()\n            return 1\n        else:\n            return 0\n\n\nif __name__ == &quot;__main__&quot;:\n    app = QApplication(sys.argv)\n    ex = MainWindow()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "deep-learning", "pytorch", "transfer-learning"], "answers": [{"tags": [], "owner": {"reputation": 8089, "user_id": 4280242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba7a603c8ad4ad09007c9360bc2f51ba?s=128&d=identicon&r=PG&f=1", "display_name": "Jatentaki", "link": "https://stackoverflow.com/users/4280242/jatentaki"}, "is_accepted": false, "score": 1, "last_activity_date": 1544653565, "creation_date": 1544653565, "answer_id": 53752320, "question_id": 53751882, "link": "https://stackoverflow.com/questions/53751882/pytorch-modify-dataset-label/53752320#53752320", "title": "Pytorch modify dataset label", "body": "<p>Yes, though not (easily) programmatically. The labels are coming from <a href=\"https://pytorch.org/docs/stable/torchvision/datasets.html#imagefolder\" rel=\"nofollow noreferrer\">torchvision.datasets.ImageFolder</a> and reflect the directory structure of your dataset (as seen on your HDD). Firstly, I suspect you may want to know the directory name as a string. This is poorly documented but the dataloader has a <code>classes</code> attribute which stores those. So</p>\n\n<pre><code>img, lbl = image_datasets['val'][0]\ndirectory_name = image_datasets['val'].classes[lbl]\n</code></pre>\n\n<p>If you're looking to consistently return those instead of class IDs, you can use the <code>target_transform</code> api as follows:</p>\n\n<pre><code>image_datasets['val'].target_transform = lambda id: image_datasets['val'].classes[id]\n</code></pre>\n\n<p>which will make the loader return strings instead of IDs from now on. If you're looking for something more advanced you can reimplement/inherit from <code>ImageFolder</code> or <code>DatasetFolder</code> and implement your own semantics. The only methods you need to provide are <code>__len__</code> and <code>__getitem__</code>.</p>\n"}], "owner": {"reputation": 7414, "user_id": 1385385, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/73c42b98586e7c94caa4db3eb1903437?s=128&d=identicon&r=PG", "display_name": "torayeff", "link": "https://stackoverflow.com/users/1385385/torayeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3359, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1544665194, "creation_date": 1544651285, "last_edit_date": 1544665194, "question_id": 53751882, "link": "https://stackoverflow.com/questions/53751882/pytorch-modify-dataset-label", "title": "Pytorch modify dataset label", "body": "<p>This is a code snippet for loading images as dataset from <a href=\"https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html\" rel=\"nofollow noreferrer\">pytorch transfer learning tutorial</a>:</p>\n\n<pre><code>data_transforms = {\n    'train': transforms.Compose([\n        transforms.RandomResizedCrop(224),\n        transforms.RandomHorizontalFlip(),\n        transforms.ToTensor(),\n        transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])\n    ]),\n    'val': transforms.Compose([\n        transforms.Resize(256),\n        transforms.CenterCrop(224),\n        transforms.ToTensor(),\n        transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])\n    ]),\n}\n\ndata_dir = 'data'\nimage_datasets = {x: datasets.ImageFolder(os.path.join(data_dir, x),\n                                          data_transforms[x])\n                  for x in ['train', 'val']}\n\ndataloaders = {x: torch.utils.data.DataLoader(image_datasets[x], batch_size=4,\n                                             shuffle=True, num_workers=4)\n              for x in ['train', 'val']}\ndataset_sizes = {x: len(image_datasets[x]) for x in ['train', 'val']}\n</code></pre>\n\n<p>And this is one of the examples in dataset:</p>\n\n<pre><code>image_datasets['val'][0]:\n\n(tensor([[[ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489],\n          [ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489],\n          [ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489],\n          ...,\n          [ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489],\n          [ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489],\n          [ 2.2489,  2.2489,  2.2489,  ...,  2.2489,  2.2489,  2.2489]],\n\n         [[ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286],\n          [ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286],\n          [ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286],\n          ...,\n          [ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286],\n          [ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286],\n          [ 2.4286,  2.4286,  2.4286,  ...,  2.4286,  2.4286,  2.4286]],\n\n         [[ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400],\n          [ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400],\n          [ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400],\n          ...,\n          [ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400],\n          [ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400],\n          [ 2.6400,  2.6400,  2.6400,  ...,  2.6400,  2.6400,  2.6400]]]), 0)\n</code></pre>\n\n<p>Is there any method (best practices) to change the example data in dataset, for example change label 0 to label 1. The following does not work:</p>\n\n<pre><code>image_datasets['val'][0] = (image_datasets['val'][0][0], 1)\n</code></pre>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 4633341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z34J5.png?s=128&g=1", "display_name": "ignacio pacheco", "link": "https://stackoverflow.com/users/4633341/ignacio-pacheco"}, "is_accepted": true, "score": 0, "last_activity_date": 1544826535, "creation_date": 1544826535, "answer_id": 53787710, "question_id": 53751848, "link": "https://stackoverflow.com/questions/53751848/labelencoder-vs-pandas-categorical-vs-enumerate/53787710#53787710", "title": "LabelEncoder vs. Pandas categorical vs. enumerate?", "body": "<p>I think pandas category is your best option since it use hash table, check <a href=\"https://stackoverflow.com/a/39503973/4633341\">https://stackoverflow.com/a/39503973/4633341</a> for some time tests.</p>\n"}], "owner": {"reputation": 362, "user_id": 1563247, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7190fe3f19506912a711e0e7264a8a29?s=128&d=identicon&r=PG", "display_name": "user1563247", "link": "https://stackoverflow.com/users/1563247/user1563247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "accepted_answer_id": 53787710, "answer_count": 1, "score": 1, "last_activity_date": 1544826535, "creation_date": 1544651100, "question_id": 53751848, "link": "https://stackoverflow.com/questions/53751848/labelencoder-vs-pandas-categorical-vs-enumerate", "title": "LabelEncoder vs. Pandas categorical vs. enumerate?", "body": "<p>I am building a recommender system, and as such I have lists of users, items, and ratings.  As such, I need to assign each user and item a categorical ID.  There are approximately 100,000 users and 10,000 items, with roughly 1 million ratings.  My question is <strong>which method is the most scalable?</strong></p>\n\n<p>I think I have 3 options:</p>\n\n<ol>\n<li>Using sklearn's <code>preprocessing.LabelEncoder()</code> </li>\n<li>Using pandas <code>df['items'].astype('category').cat.codes.values</code></li>\n<li>Using something like a dictionary that I can write back to the dataframe</li>\n</ol>\n\n<p>such as</p>\n\n<pre><code>items = item_reviews.items.unique()\nitems_map = {i:val for i,val in enumerate(items)}\ninverse_items_map = {val:i for i,val in enumerate(items)}\n</code></pre>\n\n<p>All should result in the same answer since each will label items from 0 to n-items for my user and items vectors (Note, there are actually more categories such as manufacturer, country of origin, color, etc that will also be used in the model).</p>\n\n<p>What I am building at present is a proof of concept, but will be scaled to a DB that has over 1.5MM users, 200k items, and 6MM ratings, so I need to make sure that I am not wasting memory or doing unneeded calculations.</p>\n"}, {"tags": ["python", "string", "python-3.x", "parsing", "split"], "comments": [{"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544665200, "post_id": 53751833, "comment_id": 94360425, "body": "Please give an example of input and expected output (which you wish to get after splitting)."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544665903, "post_id": 53751833, "comment_id": 94360592, "body": "@hygull examples added"}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544666142, "post_id": 53751833, "comment_id": 94360655, "body": "If no one solves, I will try to solve, actually I am in mobile right now. Got it.Thank you."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 1, "creation_date": 1544668220, "post_id": 53751833, "comment_id": 94361121, "body": "Finally, I solved your problem in mobile at rextester. Crazy exciting question. I am writing answer now. Thank you."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544670958, "post_id": 53751833, "comment_id": 94361720, "body": "What if you will get   <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]]</code> in place of <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c d&#39;]]</code>. Actually, both contains spaces for separation after 1st split operation, or we will need to pass extra parameters for this kind of operation.  I have also tried to obtain 2nd result,  I got but it failed for 1st, so I guessed that we may need extra parameters for that. So I think, if you wish or if my suggested O/P is okay then I will edit or I will try other methods to solve. Thank you."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544671293, "post_id": 53751833, "comment_id": 94361805, "body": "@hygull I don&#39;t understand wording of your comment. If you mean that <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]]</code> in place of <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c d&#39;]]</code> is OK, then no, it is not OK"}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544671713, "post_id": 53751833, "comment_id": 94361900, "body": "Okay,  so let me look for more options, thanks for the update."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 0, "creation_date": 1544728771, "post_id": 53751833, "comment_id": 94389190, "body": "@parton, I have updated my code based on your provided input set, please check. Thank  you."}], "answers": [{"comments": [{"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 1, "creation_date": 1544668501, "post_id": 53754239, "comment_id": 94361187, "body": "Wrong! It should be <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c d&#39;]]</code>"}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544668666, "post_id": 53754239, "comment_id": 94361210, "body": "Okay sorry for that,  let me fix that. Thank you."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544671564, "post_id": 53754239, "comment_id": 94361861, "body": "I tried to get 2nd  output in several ways but I got spaces in the substrings. So I suggest if <code>[[&#39;a&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]]</code> will help you then it will be better otherwise it introduces extra parameters in function&#39;s argument list which again needs more input from your side. Currently, I have updated my answer for this only. Thank you."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544672014, "post_id": 53754239, "comment_id": 94361971, "body": "I do not understand you: &quot;help you then it will be better otherwise it introduces extra parameters&quot;. What does that mean?"}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544674403, "post_id": 53754239, "comment_id": 94362405, "body": "I think that is not required, let me try in other ways. Thank you."}, {"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544728676, "post_id": 53754239, "comment_id": 94389158, "body": "Based on your provided input set, I have re-tried to look  and updated my code. Now it works for both of your input set. Please check. Thank you."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1544771588, "post_id": 53754239, "comment_id": 94401223, "body": "Your code parses <code>r&#39;a\\\\ \\+  b + c\\ d&#39;</code> wrongly. It should output <code>[[&#39;a\\\\&#39;, &#39;+&#39;, &#39;b&#39;], [&#39;c d&#39;, &#39;+&#39;]]</code>"}], "tags": [], "owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "is_accepted": false, "score": 0, "last_activity_date": 1544728528, "last_edit_date": 1544728528, "creation_date": 1544668340, "answer_id": 53754239, "question_id": 53751833, "link": "https://stackoverflow.com/questions/53751833/splitting-a-string-into-parts-with-regexps/53754239#53754239", "title": "Splitting a string into parts (with regexps?)", "body": "<p>Here is the answer of your problem. </p>\n\n<blockquote>\n  <p>Here the function <strong>get_splitted_strings_for()</strong> takes 1 parameter of type string <strong>s</strong>, and splits 1 by 1, 2 times and finally it stores result in 2d list. </p>\n</blockquote>\n\n<pre><code>import re\n\ndef get_splitted_strings_for(s): \n    splits = []\n    splits1 = re.split(r\"\\s*\\+\\s+\\\\\\s*|\\s+\\+\\s+\", s)\n\n    for split in splits1: \n        if \"\\+\" in split: \n            split = split.replace(\"\\\\\",  \"\") \n            splits.append(split.split()) \n        elif \"\\\\\" in split: \n            splits.append([split.replace(\"\\\\\", \"\")]) \n        else: \n            arr = re.split(r\"\\s+\", split.replace(\"\\\\\", '')) \n            splits.append(arr) \n\n    return splits\n\ns = \"filter1 + \\ chain -t http://www.w3.org/1999/xhtml -n error + \\ transformation filter2 --arg x=y\"\nprint(get_splitted_strings_for(s))\n\n# [['filter1'], ['chain', '-t', 'http://www.w3.org/1999/xhtml', '-n', 'error'], ['transformation', 'filter2', '--arg', 'x=y']]\n\nprint()  # New line\n\ns2 = \"a \\+ b + c\\ d\"\nprint(get_splitted_strings_for(s2))\n# [['a', '+', 'b'], ['c d']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "is_accepted": false, "score": 0, "last_activity_date": 1544773441, "last_edit_date": 1544773441, "creation_date": 1544771378, "answer_id": 53774981, "question_id": 53751833, "link": "https://stackoverflow.com/questions/53751833/splitting-a-string-into-parts-with-regexps/53774981#53774981", "title": "Splitting a string into parts (with regexps?)", "body": "<p>I wrote my own version of the routine:</p>\n\n<pre><code>import re\n\n\ndef split_pipeline(s):\n    res = [['']]\n    r = r'\\\\\\\\|\\\\\\+|\\\\\\s|\\s+\\+\\s+|\\s+|[^\\s\\\\]+'\n    for m in re.finditer(r, s, re.M|re.S):\n        if m[0][0] == '\\\\':\n            res[-1][-1] += m[0][1:]\n        elif re.match(r'^\\s+\\+\\s+$', m[0], re.M|re.S):\n            res.append([''])\n        elif re.match(r'^\\s+$', m[0], re.M | re.S):\n            res[-1].append('')\n        else:\n            res[-1][-1] += m[0]\n    return res\n\nprint(split_pipeline(r'a\\\\ \\+  b + c\\ d'))\n# [['a\\\\', '+', 'b'], ['c d']]\n</code></pre>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1544773441, "creation_date": 1544651037, "last_edit_date": 1544665884, "question_id": 53751833, "link": "https://stackoverflow.com/questions/53751833/splitting-a-string-into-parts-with-regexps", "title": "Splitting a string into parts (with regexps?)", "body": "<p>The question originating from <a href=\"https://stackoverflow.com/a/53750697/856090\">https://stackoverflow.com/a/53750697/856090</a> answer.</p>\n\n<p>We receive an \"input\" string.</p>\n\n<p>The input string is split into several \"commands\" by <code>+</code>s that is by <code>\\s+\\+\\s+</code> regexp. However while splitting quoted <code>+</code> (<code>\\+</code>) shall be ignored.</p>\n\n<p>Every command is then split into several \"arguments\" by whitespace characters, but quoted (<code>\\</code>) whitespace is not counted on splitting and instead becomes a part of an argument.</p>\n\n<p>Quoted <code>\\</code> (that is <code>\\\\</code>) becomes regular characted <code>\\</code> and itself is not participated in quoting.</p>\n\n<p>My solution is to process the input string char-by-char with special behavior for <code>\\</code>, <code>+</code>, and whitespace characters. This is slow and not elegant. I ask for an alternative solution (such as by using regexps).</p>\n\n<p>I write in Python 3.</p>\n\n<hr>\n\n<p>For example,</p>\n\n<pre><code>filter1 + \\\nchain -t http://www.w3.org/1999/xhtml -n error + \\\ntransformation filter2 --arg x=y\n</code></pre>\n\n<p>transformation filter3</p>\n\n<p>becomes</p>\n\n<pre><code>[['filter1'],\n ['chain', '-t', 'http://www.w3.org/1999/xhtml', '-n', 'error'],\n ['transformation', 'filter2', '--arg', 'x=y']]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>a \\+ b + c\\ d\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code> [['a', '+', 'b'], ['c d']]\n</code></pre>\n"}, {"tags": ["python", "tkinter", "swampy"], "comments": [{"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "edited": false, "score": 1, "creation_date": 1544689915, "post_id": 53751822, "comment_id": 94367661, "body": "you do <code>my_circle.config(fill=my_color)</code>, but <code>my_circle</code> seems to be your Button and not your canvas item, that&#39;s <code>circle</code>."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "edited": false, "score": 1, "creation_date": 1544690069, "post_id": 53751822, "comment_id": 94367732, "body": "Also I don&#39;t know what this <code>swampy.Gui</code> is exactly, but if you think you&#39;re ready for it I&#39;d really recommend learning real Tkinter instead of using this simplified interface module."}, {"owner": {"reputation": 63, "user_id": 9748333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "halny", "link": "https://stackoverflow.com/users/9748333/halny"}, "reply_to_user": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "edited": false, "score": 0, "creation_date": 1544692333, "post_id": 53751822, "comment_id": 94368916, "body": "@fhdrsdg - Thank you. I must have been blind when I was looking at it. Btw swampy.Gui is a suite  of Python programs for use with &quot;Think Python&quot; book of Allen Downey. It includes implementation of turtle graphics used to teach procedural interface design and OOP but perheps you are right and I shall reconsider start learning real Tkinter instead"}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "edited": false, "score": 1, "creation_date": 1544693801, "post_id": 53751822, "comment_id": 94369671, "body": "Well by the looks of it, this module is a &quot;dumbed down&quot; version of Tkinter. Thuis might be useful to get the basic concepts, but you don&#39;t seem to have any control over widget placement, which is very important in making real GUI&#39;s. Also a lot of object/method names are slightly different, which might make it hard to transition to real Tkinter when you learn this too much."}], "owner": {"reputation": 63, "user_id": 9748333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "halny", "link": "https://stackoverflow.com/users/9748333/halny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544650997, "creation_date": 1544650997, "question_id": 53751822, "link": "https://stackoverflow.com/questions/53751822/python-tkinter-tclerror-circle-config", "title": "Python Tkinter Tclerror, circle.config()", "body": "<p>This is exercise 19.3 from Think Python of  Allen Downey.\nThe code is suppose to get the color of the entry widget and change the background color of the circle. I have no idea why after clicking the button the code returns an error <code>Tclerror: unknown option \"-fill\"</code>. It is strange as the book itself provide exactly the same solution. Is something wrong with the configuration of my Python? No idea. Please help.</p>\n\n<pre><code>from swampy.Gui import *\n\ng = Gui()\ng.title = ('Gui')\n\ncanvas = g.ca(width=500, height=500)\ncanvas.config(bg='white')\ncircle = None\n\ndef make_circle():\n    global circle\n    circle = canvas.circle([0,0], 100, fill='red')\n\ndef change_color():\n    if circle == None:\n        return\n    my_color = entry.get()\n    my_circle.config(fill=my_color)\n\n\nmy_circle = g.bu(text='Make circle', command = make_circle)\nentry = g.en(text='Any text', bg = 'blue')\ng.bu(text='Change color', command = change_color)\n\ng.mainloop()\n</code></pre>\n"}, {"tags": ["python", "list", "csv"], "comments": [{"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 0, "creation_date": 1544651197, "post_id": 53751821, "comment_id": 94356399, "body": "Can you please include your current attempt?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1544651211, "post_id": 53751821, "comment_id": 94356406, "body": "Could you include a line or two of your input file and what you want the output for that input to look like?"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1544651975, "post_id": 53751821, "comment_id": 94356749, "body": "Please include the code directly in your question by <a href=\"https://stackoverflow.com/posts/53751821/edit\">editing</a> it."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544652130, "post_id": 53751821, "comment_id": 94356830, "body": "Seems like you need to write newline characters to the file at some point."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544652159, "post_id": 53751821, "comment_id": 94356848, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2918362/writing-string-to-a-file-on-a-new-line-every-time\">Writing string to a file on a new line every time</a>"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1544652273, "post_id": 53751821, "comment_id": 94356907, "body": "Or better, use the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">csv module</a> for reading and writing CSV files."}], "answers": [{"comments": [{"owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 1, "creation_date": 1544652012, "post_id": 53751982, "comment_id": 94356763, "body": "The OP wants the results as a set of strings.  So you could additionally put a <code>str()</code> around the <code>sum()</code> function.  Then again, if everything is being written to .csv anyway, then it might not matter here."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1544652362, "last_edit_date": 1544652362, "creation_date": 1544651793, "answer_id": 53751982, "question_id": 53751821, "link": "https://stackoverflow.com/questions/53751821/how-to-keep-the-formatation-of-a-list/53751982#53751982", "title": "How to keep the formatation of a list?", "body": "<p>I guess:</p>\n\n<pre><code>l1 = [\"12345\",\"325462\"]\n[sum([int(xx) for xx in list(x)]) for x in l1 ]\n</code></pre>\n\n<p>Which returns <code>[15, 22]</code></p>\n\n<p>Apply to each list, for example defining a method which also converts the sum to string, just in case:</p>\n\n<pre><code>def sum_digits_of_elements_in(lst):\n  sums = [ sum([int(xx) for xx in list(x)]) for x in lst ]\n  return [ str(x) for x in sums ]\n  # return just sums to return integers\n</code></pre>\n\n<p>To be used as</p>\n\n<pre><code>l2 = [\"214356\",\"53645\"]\nsum_digits_of_elements_in(l2)\n#=&gt; ['21', '23']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10782616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8432185938f3807e8b63e75810ff7275?s=128&d=identicon&r=PG&f=1", "display_name": "ale", "link": "https://stackoverflow.com/users/10782616/ale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544653059, "creation_date": 1544650996, "last_edit_date": 1544653059, "question_id": 53751821, "link": "https://stackoverflow.com/questions/53751821/how-to-keep-the-formatation-of-a-list", "title": "How to keep the formatation of a list?", "body": "<p>So I have several Lists of integers in a csv file like this:</p>\n\n<pre><code>[\"12345\",\"325462\"]\n\n[\"214356\",\"53645\"]\n\n...\n</code></pre>\n\n<p>I have to calculate the digit sum of every integer from the lists. After doing that I have to print the results like this:</p>\n\n<pre><code>\"digit_sum1\", \"digit_sum2\"\n\n\"digit_sum3\", \"digit_sum4\"\n\n...\n</code></pre>\n\n<p>The lists are in a .csv file.\nHow can I keep the original formatation from the original list? Or how can I make the results print like that? The results also have to be in another .csv file.</p>\n\n<p>This is my actual function:</p>\n\n<pre><code>def convert_raw_data(source, destination):\n\n    with open(source) as fr, open(destination, \"x\") as fw:\n        for line in fr:\n            splitted_lines_0 = line.splitlines()\n            for elem in splitted_lines_0:\n                splitted_lines = elem.split(\",\")\n                for numbers in splitted_lines:\n                    sums = calculate_digit_sum(numbers)\n                    fr.write(str(sums))\n</code></pre>\n\n<p>and the output of \"sums\" looks like this:</p>\n\n<pre><code>int1\n\nint2\n\nint3\n\n...\n</code></pre>\n\n<p>And when printed in the csv file its all a long string.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "bubble-sort"], "comments": [{"owner": {"reputation": 1710, "user_id": 5278004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OruJk.jpg?s=128&g=1", "display_name": "Wes Doyle", "link": "https://stackoverflow.com/users/5278004/wes-doyle"}, "edited": false, "score": 4, "creation_date": 1544651041, "post_id": 53751815, "comment_id": 94356312, "body": "Your &#39;numbers&#39; are strings"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1544651103, "post_id": 53751815, "comment_id": 94356344, "body": "<a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Lexicographical_order</a>. Try converting the values to ints when you read the file into the list."}], "owner": {"reputation": 9, "user_id": 10783097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SlYaAfmp7Pg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iFbkkTYj-Ys6Ufa2k3noqo-smKZQ/mo/photo.jpg?sz=128", "display_name": "Hi Hi", "link": "https://stackoverflow.com/users/10783097/hi-hi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "closed_date": 1544651139, "answer_count": 0, "score": 0, "last_activity_date": 1544651700, "creation_date": 1544650952, "last_edit_date": 1544651471, "question_id": 53751815, "link": "https://stackoverflow.com/questions/53751815/bubble-sort-of-random-list-out-of-order", "closed_reason": "Duplicate", "title": "Bubble sort of random list out of order", "body": "<p>So I have this question on some homework.</p>\n\n<p>3) Write a program which</p>\n\n<ol>\n<li>Writes a random number (<code>50</code> to <code>55</code>) of numbers (<code>0</code> - <code>100</code>) in a file</li>\n<li>Opens the file and reads the numbers from it into a list</li>\n<li>Sorts the list and Shows it. (you can't use python built-in functions <code>sort()</code>, <code>sorted()</code>, <code>sum()</code>, must write your own code)</li>\n</ol>\n\n<p>This is my current code:</p>\n\n<pre><code>import random\n\nmyFile = open(\"Median.txt\", \"w\")\n\nfor i in range(random.randint(50,55)):\n    myFile.write(str(random.randint(0,100))+'\\n')\n\nmyFile.close()\n\nmyFile = open(\"Median.txt\", \"r\")\nnums = []\n\nwith open(\"Median.txt\") as myFile:\n    nums = myFile.read().splitlines()\n\ndef sort(nums):\n    for num in range(len(nums)-1,0,-1):\n        for i in range(num):\n           if nums[i] &gt; nums[i+1]:\n                 temp = nums[i]\n                 nums[i] = nums[i+1]\n                 nums[i+1] = temp\n\nsort(nums)\nprint(nums)\n</code></pre>\n\n<p>My problem is that my output is looking like this</p>\n\n<blockquote>\n  <p><code>['1', '1', '100', '13', '14', '15', '17', '18', '18', '20', '20', '22', '22', '27', '35', '39', '40', '42', '44', '45', '5', '51', '54', '57', '57', '58', '59', '61', '62', '64', '64', '67', '68', '69', '69', '7', '70', '71', '72', '72', '73', '76', '79', '79', '84', '87', '9', '92', '95', '95', '97', '99']</code></p>\n</blockquote>\n\n<p>with numbers like <code>100</code>, and <code>7</code> being out of order.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy"], "comments": [{"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 1, "creation_date": 1544651171, "post_id": 53751763, "comment_id": 94356382, "body": "It might just be the way it&#39;s displayed. What does <code>row == previous_row</code> return?"}, {"owner": {"reputation": 2861, "user_id": 596841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9f4e5364ebc28bbbb6744e50e08e1447?s=128&d=identicon&r=PG", "display_name": "pookie", "link": "https://stackoverflow.com/users/596841/pookie"}, "reply_to_user": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1544651316, "post_id": 53751763, "comment_id": 94356455, "body": "@busybear Oh, good call. It does show as being equal. Why would they display differently?The data types are different: is it just the <code>labels</code> which are different, while the actual <code>data</code> is the same?"}, {"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 1, "creation_date": 1544651884, "post_id": 53751763, "comment_id": 94356701, "body": "Python doesn&#39;t have a <code>float64</code> builtin object (just <code>float</code>), so I don&#39;t think they are actually different data types. Perhaps <code>numpy.float64</code> was imported as <code>float64</code> somewhere. Just speculating."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1544656364, "post_id": 53751763, "comment_id": 94358433, "body": "Related: <a href=\"https://stackoverflow.com/questions/27098529/numpy-float64-vs-python-float\">Numpy float64 vs Python float</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "is_accepted": false, "score": 2, "last_activity_date": 1544656188, "creation_date": 1544656188, "answer_id": 53752787, "question_id": 53751763, "link": "https://stackoverflow.com/questions/53751763/why-does-pandas-dataframe-iloc-convert-to-numpy-float64-and-round/53752787#53752787", "title": "Why does Pandas.DataFrame.iloc convert to numpy.float64 and round?", "body": "<p>The type of the <code>'data'</code> column in your dataframe is <code>numpy.float64</code>, even if Pandas only reports it as <code>float64</code>. You can prove this to yourself with the following:</p>\n\n<pre><code>df['data'].dtype.type is numpy.float64\n</code></pre>\n\n<p>which will return <code>True</code>. An alternative form would be:</p>\n\n<pre><code>type(df['data'].values[0]) is numpy.float64\n</code></pre>\n\n<p>which will also return <code>True</code>.</p>\n\n<p>Any difference in display is down to how <code>SciView</code> is interpreting your code.</p>\n"}], "owner": {"reputation": 2861, "user_id": 596841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9f4e5364ebc28bbbb6744e50e08e1447?s=128&d=identicon&r=PG", "display_name": "pookie", "link": "https://stackoverflow.com/users/596841/pookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1544656188, "creation_date": 1544650726, "last_edit_date": 1544651189, "question_id": 53751763, "link": "https://stackoverflow.com/questions/53751763/why-does-pandas-dataframe-iloc-convert-to-numpy-float64-and-round", "title": "Why does Pandas.DataFrame.iloc convert to numpy.float64 and round?", "body": "<p>Take this number as an example:</p>\n\n<pre><code>1.64847910404205\n</code></pre>\n\n<p>If I create a Pandas DataFrame with a row and this value:</p>\n\n<pre><code>df = pd.DataFrame([{'id': 77, 'data': 1.64847910404205}])\n</code></pre>\n\n<p>and then iterate over the rows (Okay... the 'row') and inspect:</p>\n\n<pre><code>for index, row in df.iterrows():\n    if index &gt; 0:\n        previous_row = df.iloc[index]\n</code></pre>\n\n<p>Of course the above is weird: why would I iterate over the rows just to pull the same row from the DF? Forget that; I removed the <code>-1</code> to illustrate.</p>\n\n<p>Now, if I use <code>SciView</code> (part of <code>IntelliJ</code>) and the <code>data</code> tab to inspect the rows individually, I get this:</p>\n\n<pre><code>row\ndata: 1.64847910404205\n\nprevious_row\ndata: 1.64847910404\n</code></pre>\n\n<p>Notice that <code>previous_row</code> has been rounded. It's because they are for some reason different data types...</p>\n\n<pre><code>row: \ntype(row) #float64\n\nprevious_row:\ntype(previous_row) #numpy.float64\n</code></pre>\n\n<p>I'm curious to know: why does <code>iloc</code> convert to a <code>numpy.float64</code> and how can I prevent it from doing so?</p>\n\n<p>I need the same level of precision as I will later be doing Peak Signal to Noise Ratio (PSNR) calculations. Of course, I could just convert the <code>float</code> to a <code>numpy.float64</code>, but I don't want to lose precision.</p>\n"}, {"tags": ["python", "dictionary", "data-structures", "tree"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544650861, "post_id": 53751755, "comment_id": 94356221, "body": "Yes, you just need a dictionary instead of a list stored against each key. But how far are you planning to go? Soon enough I think it will become unwieldy"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1544650950, "post_id": 53751755, "comment_id": 94356263, "body": "<code>d[&quot;Child3&quot;].append(&quot;GrandChild1&quot;)</code> If you just want to establish the mapping"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544651073, "post_id": 53751755, "comment_id": 94356330, "body": "let&#39;s say it&#39;s at most 5 levels of depth"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544651165, "post_id": 53751755, "comment_id": 94356377, "body": "But d[&quot;Child3&quot;].append(&quot;GrandChild1&quot;) doesn&#39;t establish the mapping since it doesn&#39;t show the hierarchy of &quot;Parent&quot; to &quot;Child3&quot; to &quot;GrandChild1&quot; (which would look like d[&quot;Parent&quot;][&quot;Child3&quot;].append(&quot;GrandChild1&quot;), but that&#39;s not correct."}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544651248, "post_id": 53751755, "comment_id": 94356425, "body": "It&#39;s basically a tree implementation with a node pointing to its children but I&#39;m not sure how to implement it with dictionaries and lists."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1544651514, "post_id": 53751755, "comment_id": 94356557, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45460653/given-a-flat-list-of-parent-child-create-a-hierarchical-dictionary-tree\">Given a flat list of (parent,child), create a hierarchical dictionary tree</a>"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544651672, "post_id": 53751755, "comment_id": 94356622, "body": "Using nested <code>defaultdict</code>s might be good here. <a href=\"https://stackoverflow.com/questions/2600790/multiple-levels-of-collection-defaultdict-in-python\" title=\"multiple levels of collection defaultdict in python\">stackoverflow.com/questions/2600790/&hellip;</a> Could potentially be useful for you except you would have <code>defaultdict(list)</code> instead of <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544651660, "post_id": 53751885, "comment_id": 94356614, "body": "I&#39;m trying to build a tree structure with this, on which I can do a depth-first traversal. Given a JSON list: locations = [   {&quot;id&quot;: 1, &quot;name&quot;: &quot;San Francisco Bay Area&quot;, &quot;parent_id&quot;: None},   {&quot;id&quot;: 2, &quot;name&quot;: &quot;San Jose&quot;, &quot;parent_id&quot;: 3},   {&quot;id&quot;: 3, &quot;name&quot;: &quot;South Bay&quot;, &quot;parent_id&quot;: 1},   {&quot;id&quot;: 4, &quot;name&quot;: &quot;San Francisco&quot;, &quot;parent_id&quot;: 1},   {&quot;id&quot;: 5, &quot;name&quot;: &quot;Manhattan&quot;, &quot;parent_id&quot;: 6},   {&quot;id&quot;: 6, &quot;name&quot;: &quot;New York&quot;, &quot;parent_id&quot;: None} ] I want to be able to print each parent with its children: New York -Manhattan San Francisco Bay Area -San Francisco -South Bay \u2014San Jose"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544651879, "post_id": 53751885, "comment_id": 94356700, "body": "Is there a cleaner way to do this in Python than with dicts mapping to lists?"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544652395, "post_id": 53751885, "comment_id": 94356952, "body": "Not sure how your code solves it. If given a JSON list where each element tells you what its parent id is (for top level parent would be None), I want to be able to create a tree structure from it where each top level parent maps to its children and each of their children (at most depth of 5). With your solution, it&#39;s unclear how I would traverse the JSON list and create each mapping. For example, if I&#39;m iterating through the JSON list and see that &quot;GrandChild1&quot; is a child of &quot;Child3&quot; given its parent_id, how would I then know that &quot;Child3&quot; is a child of &quot;Parent&quot; and assign it the way you did?"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544653370, "post_id": 53751885, "comment_id": 94357360, "body": "Yes, it could be up to 5 levels. But basically the goal is to take that JSON list and output each parent with its children underneath it and add a &quot;-&quot; (hyphen) at each sublevel."}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544653661, "post_id": 53751885, "comment_id": 94357463, "body": "Thanks @Jayjayyy, that&#39;s really helpful. And how would you keep track of each level? For instance I want to sort each level alphabetically and add a hyphen to each level (level 1 would have &#39;-&#39; before the child, level 2 would have &#39;--&#39; before each child, etc"}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544654185, "post_id": 53751885, "comment_id": 94357685, "body": "I guess that would be a depth first traversal after creating the tree and keeping track of each level / using a stack."}, {"owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "edited": false, "score": 0, "creation_date": 1544654830, "post_id": 53751885, "comment_id": 94357929, "body": "does this method allow you to sort each level alphabetically?"}], "tags": [], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "is_accepted": true, "score": 1, "last_activity_date": 1544656534, "last_edit_date": 1544656534, "creation_date": 1544651300, "answer_id": 53751885, "question_id": 53751755, "link": "https://stackoverflow.com/questions/53751755/how-can-you-create-dictionaries-of-keys-mapping-to-lists-with-each-element-in-t/53751885#53751885", "title": "How can you create dictionaries of keys mapping to lists, with each element in the lists pointing to other lists, in Python?", "body": "<p>I think, you're trying to do something like this:</p>\n\n<pre><code>d = {}\n\nd[\"Parent\"] = {}\n\nd[\"Parent\"][\"Child1\"] = {}\nd[\"Parent\"][\"Child2\"] = {}\nd[\"Parent\"][\"Child3\"] = {}\n\nd[\"Parent\"][\"Child3\"][\"GrandChild1\"] = {}\nd[\"Parent\"][\"Child3\"][\"GrandChild2\"] = {}\n</code></pre>\n\n<p>However, where are you going with this? This might not the best way to do this with Python. :-) If you can get your current code to work, you can post it to <a href=\"https://codereview.stackexchange.com/\">https://codereview.stackexchange.com/</a> afterwards. You will get valuable feedback on how to improve your code.</p>\n\n<hr>\n\n<p>By the way, you can then look at the \"branches\" of the \"tree\" with <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.keys\" rel=\"nofollow noreferrer\"><code>dict.keys</code></a>:</p>\n\n<pre><code>print(d.keys())\nprint(d[\"Parent\"].keys())\nprint(d[\"Parent\"][\"Child3\"].keys())\n</code></pre>\n\n<p>Which prints</p>\n\n<pre><code>dict_keys(['Parent'])\ndict_keys(['Child3', 'Child2', 'Child1'])\ndict_keys(['GrandChild2', 'GrandChild1'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8864, "user_id": 243925, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/94b734ac6e85d9f279ee7286f28d6145?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/243925/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1544655931, "last_edit_date": 1544655931, "creation_date": 1544654684, "answer_id": 53752538, "question_id": 53751755, "link": "https://stackoverflow.com/questions/53751755/how-can-you-create-dictionaries-of-keys-mapping-to-lists-with-each-element-in-t/53752538#53752538", "title": "How can you create dictionaries of keys mapping to lists, with each element in the lists pointing to other lists, in Python?", "body": "<p>Being interested in how to do trees in python, I searched around and came across some example code on GitHub for a <a href=\"https://gist.github.com/hrldcpr/2012250\" rel=\"nofollow noreferrer\">One-line Tree in Python</a>.</p>\n\n<p>Create a tree from a <code>defaultdict</code>:</p>\n\n<pre><code>from collections import defaultdict\ndef tree(): return defaultdict(tree)\n</code></pre>\n\n<p>Build your tree structure:</p>\n\n<pre><code>t = tree()\nt['San Francisco Bay Area']['San Francisco']\nt['San Francisco Bay Area']['South Bay']['San Jose']\nt['New York']['Manhattan']\n</code></pre>\n\n<p>And print it out;</p>\n\n<pre><code>import json\nprint(json.dumps(t))\n</code></pre>\n\n<blockquote>\n  <p>{\"New York\": {\"Manhattan\": {}}, \"San Francisco Bay Area\": {\"San Francisco\": {}, \"South Bay\": {\"San Jose\": {}}}}</p>\n</blockquote>\n\n<p>There's further information on iteration and, in the comments, more useful code and suggestions on loading it from json and pretty printing the structure.</p>\n"}], "owner": {"reputation": 27, "user_id": 3317441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fdb825a0564a8a9b39cb63a19a47b?s=128&d=identicon&r=PG&f=1", "display_name": "Victor M", "link": "https://stackoverflow.com/users/3317441/victor-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53751885, "answer_count": 2, "score": 1, "last_activity_date": 1544656534, "creation_date": 1544650702, "question_id": 53751755, "link": "https://stackoverflow.com/questions/53751755/how-can-you-create-dictionaries-of-keys-mapping-to-lists-with-each-element-in-t", "title": "How can you create dictionaries of keys mapping to lists, with each element in the lists pointing to other lists, in Python?", "body": "<p>For example:</p>\n\n<pre><code>d = dict()\n\n#Map \"Parent\" to a list of \"children\" values\nd[\"Parent\"] = []\nd[\"Parent\"].append(\"Child1\")\nd[\"Parent\"].append(\"Child2\")\nd[\"Parent\"].append(\"Child3\")\n\n#I know the following is wrong, but I want each list that \"Parent\" maps to, also to map to a list- how would I do this?\nd[\"Parent\"][\"Child3\"] = []\nd[\"Parent\"][\"Child3\"].append(\"GrandChild1\")\n</code></pre>\n\n<p>This would basically look something like a tree (not binary) where there is a top level parent, pointing to its children (could be more than 2), and each can point to its multiple children. Are there other ways to do this?</p>\n"}, {"tags": ["python", "python-3.x", "class"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1544650493, "post_id": 53751684, "comment_id": 94356070, "body": "That&#39;s way too much code, you need to first debug yourself and figure out which part exactly is causing you problems. Also there&#39;s way too much <code>global</code> usage, that can&#39;t be good"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1544650772, "post_id": 53751684, "comment_id": 94356182, "body": "<code>global whatToChange</code> means that the first time you call <code>whatToChange</code> it overwrites the reference to itself with user input."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1544650872, "post_id": 53751684, "comment_id": 94356227, "body": "Start by getting rid of all the globals, and define your functions to take arguments and return values instead. You should start to see some patterns that would let you write a single <code>runItem</code> function instead of five separate <code>runItemX</code> functions."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1544651009, "post_id": 53751684, "comment_id": 94356298, "body": "You&#39;ll want to use lots of lists and dicts instead of doing things like defining 5 separate (but similar) variables <code>a</code>, <code>b</code>, <code>c</code>, <code>d</code>, and <code>e</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "is_accepted": false, "score": 0, "last_activity_date": 1544651897, "creation_date": 1544651897, "answer_id": 53752002, "question_id": 53751684, "link": "https://stackoverflow.com/questions/53751684/how-to-alter-a-class-using-a-method-based-off-user-input-within-a-function/53752002#53752002", "title": "How to alter a class using a method based off user input within a function", "body": "<p>It looks like you're mixing procedural methods with object orientated methods. \nOne of the principles of object orientated design is determining where the functions belong ... which functions belong to which class.\nOnce I had that sorted out for myself moving from thinking just procedurally to thinking in terms of objects became much easier for me.</p>\n\n<p>I suggest creating a list [], or a dictionary {} to store your items.</p>\n\n<p>Then print current list can be handled by </p>\n\n<pre><code>item_list = []\n# ... create items and add to item_list using item_list.append(item)\n\nfor item in item_list: \n     print(item)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>item_dictionary = {}\n# create items and add to item_dictionary using item_dictionary[some_key] = item\nfor key in item_dictionary:\n    item = item_dictionary[key]\n</code></pre>\n\n<p>Then add whatever functions you need for your item class and use methods to add/remove/edit those items in the list of the dictionary.</p>\n\n<p>I'd also drop the globals as the commentators suggested. I don't use globals at all in the python code I write.</p>\n"}], "owner": {"reputation": 19, "user_id": 10130443, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ai_zObePTEY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pFiCO5xWGKmwxLq0VdkYrbUgcBng/mo/photo.jpg?sz=128", "display_name": "Matt R.", "link": "https://stackoverflow.com/users/10130443/matt-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544651897, "creation_date": 1544650378, "question_id": 53751684, "link": "https://stackoverflow.com/questions/53751684/how-to-alter-a-class-using-a-method-based-off-user-input-within-a-function", "title": "How to alter a class using a method based off user input within a function", "body": "<p>Building a simple to-do list app to teach myself classes. Nearly everything works (so far, you can add items, view the list, and remove items). But, I can't seem to figure out how to implement a change item feature. This is supposed to change the name of an already created item, but the code I'm working on isn't doing it.</p>\n\n<pre><code># counters for telling if a slot is empty or not\na = 0\nb = 0\nc = 0\nd = 0\ne = 0\n\n# overarching class for entire program\n# outlines how a list item is structured\nclass Item():\n\n    def __init__(self, thingToDo, dueDate, priority):\n        self.thingToDo = thingToDo\n        self.dueDate = dueDate\n        self.priority = priority\n\n    def thingChange(self):\n        thingChange = input(\"What would you like to change it to? \")\n        self.thingToDo = thingChange\n\n\ndef whatToChange():\n    global whatToChange\n    whatToChange = input(\"What in the item would you like to change (1. thing, 2. due date, 3. priority)?\")\n    if \"1\" in whatToChange:\n        itemChange = input(\"What would you like to change it to? \")\n        item1.thingToDo = itemChange\n        printCurrentList()\n\n\n# takes inputs to add an instance of to do item\ndef getItem():\n    global thing\n    thing = input(\"What do you want to do?\")\n    global time\n    time = input(\"When do you need to do it by?\")\n    global importance\n    importance = input(\"Priority (rate out of 5): \")\n\n# each of these takes the inputs from getItem(), and puts them into the slots\ndef runItem1():\n    getItem()\n    global item1\n    item1 = Item(thing, time, importance)\n\n    print(\"1. You need to \" + item1.thingToDo + \" by \" + item1.dueDate + \", and the priority is \" + item1.priority + \"/5.\")\n    global a\n    a = a + 1\n\n\ndef runItem2():\n    getItem()\n    global item2\n    item2 = Item(thing, time, importance)\n\n    print(\"2. You need to \" + item2.thingToDo + \" by \" + item2.dueDate + \", and the priority is \" + item2.priority + \"/5.\")\n    global b\n    b = b + 1\n\n\ndef runItem3():\n    getItem()\n    global item3\n    item3 = Item(thing, time, importance)\n\n    print(\"3. You need to \" + item1.thingToDo + \" by \" + item1.dueDate + \", and the priority is \" + item1.priority + \"/5.\")\n    global c\n    c = c + 1\n\ndef runItem4():\n    getItem()\n    global item4\n    item4 = Item(thing, time, importance)\n\n    print(\"4. You need to \" + item4.thingToDo + \" by \" + item4.dueDate + \", and the priority is \" + item4.priority + \"/5.\")\n    global d\n    d = d + 1\n\ndef runItem5():\n    getItem()\n    global item5\n    item5 = Item(thing, time, importance)\n\n    print(\"5. You need to \" + item5.thingToDo + \" by \" + item5.dueDate + \", and the priority is \" + item5.priority + \"/5.\")\n    global e\n    e = e + 1\n\n# pretty self explanatory, prints out the current slots in a list-type format\ndef printCurrentList():\n    if a &gt; 0:\n        print(\"1. You need to \" + item1.thingToDo + \" by \" + item1.dueDate + \", and the priority is \" + item1.priority + \"/5.\")\n    else: print(\"Slot 1 is empty.\")\n\n    if b &gt; 0:\n        print(\"2. You need to \" + item2.thingToDo + \" by \" + item2.dueDate + \", and the priority is \" + item2.priority + \"/5.\")\n    else:\n        print(\"Slot 2 is empty.\")\n\n    if c &gt; 0:\n        print(\"3. You need to \" + item1.thingToDo + \" by \" + item1.dueDate + \", and the priority is \" + item1.priority + \"/5.\")\n    else:\n        print(\"Slot 3 is empty.\")\n\n    if d &gt; 0:\n        print(\"4. You need to \" + item4.thingToDo + \" by \" + item4.dueDate + \", and the priority is \" + item4.priority + \"/5.\")\n    else:\n        print(\"Slot 4 is empty.\")\n\n    if e &gt; 0:\n        print(\"5. You need to \" + item5.thingToDo + \" by \" + item5.dueDate + \", and the priority is \" + item5.priority + \"/5.\")\n    else:\n        print(\"Slot 5 is empty.\")\n\n# adds an item to the list, but first, checks to see if list slots are already used -- uses a,b,c,d,e\ndef add():\n    printCurrentList()\n    if a &gt; 0 and b &gt; 0 and c &gt; 0 and d &gt; 0 and e &gt; 0:\n        print(\"You need to empty a slot before you add another item.\")\n        whichToRemove = input(\"Which slot would you like to remove?\")\n        if input == \"1\":\n            print(\"What would you like to add in its place?\")\n            runItem1()\n    else:\n        slot = input(\"Which slot would you like to use?: \")\n        if slot == \"1\":\n            runItem1()\n        elif slot == \"2\":\n            runItem2()\n        elif slot == \"3\":\n            runItem3()\n        elif slot == \"4\":\n            runItem4()\n        elif slot == \"5\":\n            runItem5()\n        else:\n            print(\"Error. Please try again.\")\n            add()\n\n# main loop of the program\ndef main():\n    prompt = input(\"What do you want to do (add, remove, change, or view)?: \")\n    if prompt == \"add\":\n        add()\n    elif prompt == \"remove\":\n        printCurrentList()\n        whichToRemove = input(\"Which one would you like to remove?: \")\n        if whichToRemove == \"1\":\n            print(\"Item 1, \" + item1.thingToDo + \", has been removed.\")\n            global a\n            a = 0\n        elif whichToRemove == \"2\":\n            print(\"Item 2, \" + item2.thingToDo + \", has been removed.\")\n            global b\n            b = 0\n        elif whichToRemove == \"3\":\n            print(\"Item 3, \" + item3.thingToDo + \", has been removed.\")\n            global c\n            c = 0\n        elif whichToRemove == \"4\":\n            print(\"Item 4, \" + item4.thingToDo + \", has been removed.\")\n            global d\n            d = 0\n        elif whichToRemove == \"5\":\n            print(\"Item 5, \" + item5.thingToDo + \", has been removed.\")\n            global e\n            e = 0\n        printCurrentList()\n\n    elif prompt == \"view\":\n        print(\"Here is your current list: \")\n        printCurrentList()\n\n    elif prompt == \"change\":\n        whichToChange = input(\"Which one would you like to change?: \")\n        if \"1\" in whichToChange:\n            oldItem = item1.thingToDo\n            whatToChange()\n            thingChange()\n            print(\"Item 1, \" + oldItem + \", has been changed to \" + item1.thingToDo)\n        elif \"2\" in whichToChange:\n            print(\"Item 2, \" + item2.thingToDo + \", has been changed to _____________.\")\n        elif \"3\" in whichToChange:\n            print(\"Item 3, \" + item3.thingToDo + \", has been changed to _____________.\")\n        elif \"4\" in whichToChange:\n            print(\"Item 4, \" + item4.thingToDo + \", has been changed to _____________.\")\n        elif \"5\" in whichToChange:\n            print(\"Item 5, \" + item5.thingToDo + \", has been changed to _____________.\")\n        printCurrentList()\n    main()\n\nmain()\n</code></pre>\n\n<p>Is there a way to get this working?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "rnn", "keras-layer"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 9957560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33fecc096dd8ed03cd7218f1ceb76fe?s=128&d=identicon&r=PG&f=1", "display_name": "yiyang", "link": "https://stackoverflow.com/users/9957560/yiyang"}, "edited": false, "score": 0, "creation_date": 1545233744, "post_id": 53752335, "comment_id": 94556504, "body": "I am sorry but <code>call</code> such defined does not go together with <code>Layer</code>; I got TypeError: call() missing 1 required positional argument: &#39;states&#39;"}, {"owner": {"reputation": 603, "user_id": 10458815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AmmJ8NGZyv8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWC2_BHrtpecZ3044G9QoUPENyWzg/mo/photo.jpg?sz=128", "display_name": "Jordan Patterson", "link": "https://stackoverflow.com/users/10458815/jordan-patterson"}, "reply_to_user": {"reputation": 75, "user_id": 9957560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33fecc096dd8ed03cd7218f1ceb76fe?s=128&d=identicon&r=PG&f=1", "display_name": "yiyang", "link": "https://stackoverflow.com/users/9957560/yiyang"}, "edited": false, "score": 0, "creation_date": 1545324476, "post_id": 53752335, "comment_id": 94592857, "body": "Call() definitely goes with the Layer class, as specified <a href=\"https://keras.io/layers/writing-your-own-keras-layers/\" rel=\"nofollow noreferrer\">here</a>. It looks like an implementation error to me. Try passing [batch, state] as a single list input to call()."}], "tags": [], "owner": {"reputation": 603, "user_id": 10458815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AmmJ8NGZyv8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWC2_BHrtpecZ3044G9QoUPENyWzg/mo/photo.jpg?sz=128", "display_name": "Jordan Patterson", "link": "https://stackoverflow.com/users/10458815/jordan-patterson"}, "is_accepted": false, "score": 0, "last_activity_date": 1544654061, "last_edit_date": 1544654061, "creation_date": 1544653636, "answer_id": 53752335, "question_id": 53751609, "link": "https://stackoverflow.com/questions/53751609/how-to-wrap-a-tensorflow-rnncell-in-keras/53752335#53752335", "title": "How to wrap a tensorflow RNNCell in keras?", "body": "<p>From my understanding, you should just be able to initialize the cell in the init() of the class layer, and then inside the call method reference it with your input.</p>\n\n<p>Ex:</p>\n\n<pre><code>class MySimpleLayer(Layer):\n  def __init__(self, lstm_size):\n    super(MySimpleLayer, self).__init__()\n    self.lstm = tf.contrib.rnn.BasicLSTMCell(lstm_size)\n\n  def call(self, batch, state):\n    return self.lstm(batch, state)\n\nlayer = MySimpleLayer(lstm_size)\nlogits = layer(batch, state)\n</code></pre>\n\n<p>This implementation is as basic as it gets though, so you might need to look into the build() and compute_output_shape() methods for more complex use cases.</p>\n"}, {"tags": [], "owner": {"reputation": 869, "user_id": 5752875, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5e07eba630b8aa0601d30171f57a667c?s=128&d=identicon&r=PG&f=1", "display_name": "carusyte", "link": "https://stackoverflow.com/users/5752875/carusyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1590486716, "creation_date": 1590486716, "answer_id": 62019322, "question_id": 53751609, "link": "https://stackoverflow.com/questions/53751609/how-to-wrap-a-tensorflow-rnncell-in-keras/62019322#62019322", "title": "How to wrap a tensorflow RNNCell in keras?", "body": "<p>Now the documentation of tensorflow may have improved since the question is posted.</p>\n\n<p>You may want to check <a href=\"https://www.tensorflow.org/guide/keras/rnn#rnns_with_listdict_inputs_or_nested_inputs\" rel=\"nofollow noreferrer\">this guide</a> or <a href=\"https://stackoverflow.com/a/55584976/5752875\">this SO answer</a> for reference.</p>\n"}], "owner": {"reputation": 75, "user_id": 9957560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33fecc096dd8ed03cd7218f1ceb76fe?s=128&d=identicon&r=PG&f=1", "display_name": "yiyang", "link": "https://stackoverflow.com/users/9957560/yiyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1590486716, "creation_date": 1544649983, "question_id": 53751609, "link": "https://stackoverflow.com/questions/53751609/how-to-wrap-a-tensorflow-rnncell-in-keras", "title": "How to wrap a tensorflow RNNCell in keras?", "body": "<p>I would like to implement an custom LSTM cell as in a keras layer. Actually this implementation exists in tensorflow, so I was wondering if it is possible to just wrap it as an keras layer and call it in the model.</p>\n\n<p>I found official <a href=\"https://keras.io/layers/writing-your-own-keras-layers/\" rel=\"nofollow noreferrer\">documentation</a> too simplified to see how to build a custom RNN layer.\nThere are similar questions <a href=\"https://stackoverflow.com/questions/48054009/how-to-wrap-a-tensorflow-object-as-keras-layer\">here</a> and <a href=\"https://stackoverflow.com/questions/44300600/wrapping-tensorflow-for-use-in-keras\">here</a>, but they seem unresolved.</p>\n\n<p>Thanks in advance for your help !</p>\n"}, {"tags": ["python", "scripting", "3dsmax"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10782984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sAexAJAyeXU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jdVim5Yk6IvwvO59SHI0SF4NO1HA/mo/photo.jpg?sz=128", "display_name": "SixSioux", "link": "https://stackoverflow.com/users/10782984/sixsioux"}, "edited": false, "score": 0, "creation_date": 1551717043, "post_id": 54858877, "comment_id": 96732784, "body": "Thank you Michael for your very exhaustive reply! I will give it a try immediatly. What I did finally was to creat a button, linked to a MAXscript, that cheks - every time it is pressed - which is the active camera, and based to it activate or deactivate the relative effect:  if getActiveCamera() == $36x24_MoreDof then setActive(getEffect 1) true else setActive(getEffect 1) false if getActiveCamera() == $36x24_LessDof then setActive(getEffect 2) true else setActive(getEffect 2) false"}], "tags": [], "owner": {"reputation": 936, "user_id": 3842894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pdZRP.jpg?s=128&g=1", "display_name": "MichaelsonBritt", "link": "https://stackoverflow.com/users/3842894/michaelsonbritt"}, "is_accepted": false, "score": 3, "last_activity_date": 1551063240, "creation_date": 1551063240, "answer_id": 54858877, "question_id": 53751578, "link": "https://stackoverflow.com/questions/53751578/3ds-max-python-scripting/54858877#54858877", "title": "3DS Max Python scripting", "body": "<p>Below is python script to use as a guide for your request.</p>\n\n<ul>\n<li>PyMXS; my advice is to use this primarily.  It wraps almost all of MaxScript (except for some exotic MaxScript syntax features).  It has been continuously developed for decades, is robust, and offers a lot of helper functionality and simplifications compared to the 3ds Max SDK which it's build on.</li>\n<li>MaxPlus; my advice is to use certain bits of this which aren't covered by PyMXS (for example the function MaxPlus.GetQMaxMainWindow() for creating a Qt-based UI), but don't use this as the primary tool in Python. It is newer, and while it might prove better for Python exposure of the 3ds Max SDK in the long term, you might prefer PyMXS for coverage and simplicity in the short term.</li>\n</ul>\n\n<p>Basically, I recommend thinking of yourself as a MaxScript programmer who uses Python for the language benefits.  To access the 3ds Max scene, go through MaxScript (via PyMXS).  Then you employ Python's strengths for string processing and data management (dictionaries!).  Use MaxPlus when necessary for certain lower-level SDK access.</p>\n\n<p>The script below fetches an object by name, fetches a render effect by index, and enables/disables the render effect according to the object selection:</p>\n\n<pre><code>import pymxs\nmxs = pymxs.runtime\n\nobject_1 = mxs.getNodeByName( \"Camera001\" )\n\neffect_1 = mxs.getEffect(1)\neffect_1.camera\n\nmxs.setActive(effect_1, mxs.false)\n\nif object_1.isSelected:\n    mxs.setActive(effect_1, mxs.true)\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 10782984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sAexAJAyeXU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jdVim5Yk6IvwvO59SHI0SF4NO1HA/mo/photo.jpg?sz=128", "display_name": "SixSioux", "link": "https://stackoverflow.com/users/10782984/sixsioux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2226, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551063240, "creation_date": 1544649832, "last_edit_date": 1544655308, "question_id": 53751578, "link": "https://stackoverflow.com/questions/53751578/3ds-max-python-scripting", "title": "3DS Max Python scripting", "body": "<p>I have been looking for hours how to perform a very simple script in Python for 3DS Max (v2017), but the APIs are terrible - to say the least.</p>\n\n<p>I can't even get how to <em>select</em> an existing object in the scene..\nPlus I do not understand if I should use pymxs wrapper or MaxPlus.</p>\n\n<p>What I need to do is simply tell to 3ds Max to change a Rendering Effect Attribute when a certain scene camera is selected - or the view is switched to that camera.</p>\n\n<p>I will write you down the script in pseudo code so you can - hopefully - better understand the topic:</p>\n\n<pre><code>camera_1 = MaxPlus.Factory.SelectCameraObject(\"36x24_MoreDof\")\n# camera name is 36x24_MoreDof\n\ncamera_2 = MaxPlus.Factory.SelectCameraObject(\"36x24_LessDof\")\n# camera name is 36x24_LessDof\n\neffect1 = RenderingTab.EnvironmentAndEffects.Effects.Attribute1\neffect2 = RenderingTab.EnvironmentAndEffects.Effects.Attribute2\n\neffect1.active = False\neffect2.active = False\n\nwhile True:\n    if camera_1.isSelected == True:\n        effect1.active = True\n        effect2.active = False\n    elif camera_2.isSelected == True:\n        effect1.active = False\n        effect2.active = True\n</code></pre>\n\n<p>I hope it is clear enough..\nDo you have any idea how to translate this in actual Python code for 3DS Max?</p>\n\n<p>Thanks you all in advance,</p>\n\n<p>Riccardo</p>\n"}, {"tags": ["python", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1544649852, "post_id": 53751560, "comment_id": 94355771, "body": "<a href=\"https://docs.python.org/3/reference/expressions.html#comparisons\" rel=\"nofollow noreferrer\">Associated documentation here</a>"}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "reply_to_user": {"reputation": 103, "user_id": 9906296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9616e937d1f936c235aeae57f4560a?s=128&d=identicon&r=PG&f=1", "display_name": "Gao", "link": "https://stackoverflow.com/users/9906296/gao"}, "edited": false, "score": 1, "creation_date": 1544649873, "post_id": 53751560, "comment_id": 94355780, "body": "@Gao If their answer satisfies your question, please mark it as such with the green checkmark."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1544649917, "post_id": 53751560, "comment_id": 94355793, "body": "@TheIncorrigible1 thanks. Was trying to get an internal bookmark on that page :)"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544650010, "post_id": 53751560, "comment_id": 94355847, "body": "Just wondering how that is valid. <code>xmin &lt;= xi</code> returns True, which is evaluated as <code>1</code> and then it shouldn&#39;t make sense, but surprisingly, it works perfectly fine"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 2, "creation_date": 1544650135, "post_id": 53751560, "comment_id": 94355913, "body": "@Ayxan Comparison operators don&#39;t associate in this case; <code>x &lt;= y &lt;= z</code> is evaluated like <code>x &lt;= y and y &lt;= z</code> (but with <code>y</code> evaluated only once). It doesn&#39;t simply evaluate <code>x &lt;= y</code> and then compare the result to <code>z</code>."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1544650437, "post_id": 53751560, "comment_id": 94356045, "body": "@chepner that&#39;s really interesting. Thanks for the clarification."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1544654179, "post_id": 53751560, "comment_id": 94357681, "body": "if you do <code>(x &lt;= y) &lt;= z</code>, then you get your nasty boolean effect you were (?) looking for"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 14, "last_activity_date": 1544650051, "last_edit_date": 1544650051, "creation_date": 1544649752, "answer_id": 53751560, "question_id": 53751514, "link": "https://stackoverflow.com/questions/53751514/simplification-of-if-multiple-conditions-in-python/53751560#53751560", "title": "Simplification of if multiple conditions in python", "body": "<p>Typical case for <a href=\"https://docs.python.org/3/reference/expressions.html#comparisons\" rel=\"noreferrer\"><em>operator chaining</em></a>:</p>\n\n<pre><code>if not (xmin &lt;= xi &lt;= xmax and ymin &lt;= yi &lt;= ymax and zmin &lt;= zi &lt;= zmax):\n</code></pre>\n\n<p>Not only it simplifies the comparisons, allowing to remove parentheses, while retaining readability, but also the center argument is only evaluated <em>once</em> , which is particularly interesting when comparing against the result of a function:</p>\n\n<pre><code>if xmin &lt;= func(z) &lt;= xmax:\n</code></pre>\n\n<p>(so it's not equivalent to 2 comparisons if <code>func</code> has a side effect)</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 9906296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9616e937d1f936c235aeae57f4560a?s=128&d=identicon&r=PG&f=1", "display_name": "Gao", "link": "https://stackoverflow.com/users/9906296/gao"}, "edited": false, "score": 0, "creation_date": 1544740193, "post_id": 53751981, "comment_id": 94393794, "body": "Yes. I understand your idea. Thanks."}], "tags": [], "owner": {"reputation": 274, "user_id": 5405830, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/kZyLn.jpg?s=128&g=1", "display_name": "AltShift", "link": "https://stackoverflow.com/users/5405830/altshift"}, "is_accepted": false, "score": 1, "last_activity_date": 1544651789, "creation_date": 1544651789, "answer_id": 53751981, "question_id": 53751514, "link": "https://stackoverflow.com/questions/53751514/simplification-of-if-multiple-conditions-in-python/53751981#53751981", "title": "Simplification of if multiple conditions in python", "body": "<p>If you really want to start cooking with gas, create a class library for handling 3D points (e.g. by extending this one to include the Z coordinate: <a href=\"https://stackoverflow.com/questions/12468900/making-a-point-class-in-python\">Making a Point Class in Python</a>).</p>\n\n<p>You could then encapsulate the above solution into a method of the class, as:</p>\n\n<pre><code>def isInBox(self, p1, p2):\n    return (p1.X &lt;= self.X &lt;= p2.X and p1.Y &lt;= self.Y &lt;= p2.Y and p1.Z &lt;= self.Z &lt;= p2.Z)\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9906296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9616e937d1f936c235aeae57f4560a?s=128&d=identicon&r=PG&f=1", "display_name": "Gao", "link": "https://stackoverflow.com/users/9906296/gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 53751560, "answer_count": 2, "score": 6, "last_activity_date": 1544651789, "creation_date": 1544649597, "question_id": 53751514, "link": "https://stackoverflow.com/questions/53751514/simplification-of-if-multiple-conditions-in-python", "title": "Simplification of if multiple conditions in python", "body": "<p>I want to pick out some items in one rectangular box with axis limits of (xmin, xmax, ymin, ymax, zmin, zmax). So i use the following conditions, </p>\n\n<pre><code>if not ((xi &gt;= xmin and xi &lt;= xmax) and (yi &gt;= ymin and yi &lt;= ymax) and (zi &gt;= zmin and zi &lt;= zmax)):\n    expression \n</code></pre>\n\n<p>But I think python has some concise way to express it. Does anyone can tell me? </p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 1, "creation_date": 1544678573, "post_id": 53751496, "comment_id": 94363349, "body": "Your code can be simplified to <code>a = tf.Variable(0.0, dtype=tf.float32))</code>, <code>a_sqrt = tf.sqrt(a + epsilon)</code>, <code>a_scaled = a &#47; a_sqrt</code>, and the problem still exists. Printing <code>a_sqrt</code> will get the value of <code>1&#47;sqrt(epsilon)</code> for any <code>epsilon</code>.  Interestingly, change the code to <code>a = tf.constant(0.0)</code>, or <code>a_sqrt = tf.sqrt(a + epsilon) + 0.0</code>, or simply leaving out the division results in a correct answer. I do not know what happens here. The graph in tensorboard also does not provide many insights."}], "owner": {"reputation": 157, "user_id": 2620444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ef19a9081f6c9175fa8bf2004d8698?s=128&d=identicon&r=PG", "display_name": "Sara Fahim", "link": "https://stackoverflow.com/users/2620444/sara-fahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1544649473, "creation_date": 1544649473, "question_id": 53751496, "link": "https://stackoverflow.com/questions/53751496/unexpected-output-during-tensor-normalization", "title": "Unexpected output during tensor normalization", "body": "<p>I wanted to normalize each row of a matrix. </p>\n\n<pre><code>import tensorflow as tf\nt = 2\ndimension = 300\ntf.reset_default_graph()\nbatch_size = 2 \nepsilon = 1e-8\ntrain_labels = tf.placeholder(tf.int32, shape=[batch_size])\nout_embeddings = tf.Variable(tf.zeros([t, dimension], tf.float32))\nembed_out = tf.nn.embedding_lookup(out_embeddings, train_labels)\nout_square = tf.reduce_sum(tf.square(embed_out), 1, keepdims=True) + epsilon\nout_norm = tf.sqrt(tf.reduce_sum(tf.square(embed_out), 1, keepdims=True) + epsilon)\nnormalized_embed_out = embed_out / out_norm\n\nwith tf.Session(config=tf.ConfigProto(allow_soft_placement=True)) as session:\n    tf.global_variables_initializer().run()\n    batch_labels = [0, 1]\n    square, norm, normalized_embed = session.run([out_square, out_norm, normalized_embed_out],\n                                             feed_dict={train_labels: batch_labels})\n    print(\"square:\", square)\n    print(\"norm:\", norm)\n</code></pre>\n\n<p>But surprisingly I got this result:</p>\n\n<pre><code>square: [[1.e-08] [1.e-08]]\nnorm: [[10000.] [10000.]]\n</code></pre>\n\n<p>Could you please help me to understand the reason?</p>\n"}, {"tags": ["python", "charts", "histogram"], "answers": [{"tags": [], "owner": {"reputation": 722, "user_id": 8191362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f8be2ba9c6b3063c49ddc21b73e24e?s=128&d=identicon&r=PG&f=1", "display_name": "pistolpete", "link": "https://stackoverflow.com/users/8191362/pistolpete"}, "is_accepted": false, "score": 1, "last_activity_date": 1544650227, "creation_date": 1544650227, "answer_id": 53751660, "question_id": 53751449, "link": "https://stackoverflow.com/questions/53751449/python-how-to-change-a-line-chart-into-a-bar-chart/53751660#53751660", "title": "python - How to change a line chart into a bar chart?", "body": "<p>Change </p>\n\n<pre><code>plt.plot(histr, color = col)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>x = np.arrange(len(histr))\nplt.bar(x, histr, color = col)\n</code></pre>\n\n<p><a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html\" rel=\"nofollow noreferrer\">matplotlib bar chart documentation</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10777563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1099286076918878/picture?type=large", "display_name": "Arkadiusz Skalski", "link": "https://stackoverflow.com/users/10777563/arkadiusz-skalski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1544657713, "creation_date": 1544649284, "question_id": 53751449, "link": "https://stackoverflow.com/questions/53751449/python-how-to-change-a-line-chart-into-a-bar-chart", "title": "python - How to change a line chart into a bar chart?", "body": "<p>is anybody who know how to change <a href=\"https://i.stack.imgur.com/KKIC5.png\" rel=\"nofollow noreferrer\">line chart</a> to <a href=\"https://i.stack.imgur.com/pabFo.png\" rel=\"nofollow noreferrer\">bar chart</a>?</p>\n\n<p>there is a code:</p>\n\n<pre><code>plt.figure(figsize = (18,12))\nplt.subplot(2,2,1)\nimg = skimage.data.chelsea()\ncolor = ('r','g','b')\nfor i,col in enumerate(color):\n    histr = cv2.calcHist([img],[i],None,[256],[0,256])\n    plt.plot(histr,color = col)\n    plt.xlim([0,256])\nlabels= [\"red\",\"green\", \"blue\"]\nplt.legend(labels)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2125, "user_id": 2703802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4OvIl.jpg?s=128&g=1", "display_name": "vielkind", "link": "https://stackoverflow.com/users/2703802/vielkind"}, "edited": false, "score": 2, "creation_date": 1544649517, "post_id": 53751426, "comment_id": 94355645, "body": "If possible can you include a brief example of what the data looks like in your question?  Linking to outside images is not ideal.  Having the text in the question let&#39;s people copy and paste the content to work with it on their own to come up with a solution.  It also makes it easier for people reading your question to understand what you&#39;re asking and what your desired output is."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9412137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64c529a886309c46b749dc6cee0c108?s=128&d=identicon&r=PG&f=1", "display_name": "quadle ", "link": "https://stackoverflow.com/users/9412137/quadle"}, "edited": false, "score": 1, "creation_date": 1544653307, "post_id": 53751715, "comment_id": 94357329, "body": "THANK YOU! Sorry for the novis question, but this is a huge help"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 11, "user_id": 9412137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64c529a886309c46b749dc6cee0c108?s=128&d=identicon&r=PG&f=1", "display_name": "quadle ", "link": "https://stackoverflow.com/users/9412137/quadle"}, "edited": false, "score": 0, "creation_date": 1544653779, "post_id": 53751715, "comment_id": 94357516, "body": "@quadle it\u2019s a fine question. Just next time try to include sample data, instead of an image, as I have, to make it easy to reproduce your problem. People are much more likely to answer when they can simply copy and paste to start solving :)"}, {"owner": {"reputation": 11, "user_id": 9412137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64c529a886309c46b749dc6cee0c108?s=128&d=identicon&r=PG&f=1", "display_name": "quadle ", "link": "https://stackoverflow.com/users/9412137/quadle"}, "edited": false, "score": 1, "creation_date": 1544654409, "post_id": 53751715, "comment_id": 94357768, "body": "Thanks, I appreciate all your help! I&#39;ll be sure to include sample data moving forward. Just my second post, and still a lot to learn."}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 0, "last_activity_date": 1544651518, "last_edit_date": 1544651518, "creation_date": 1544650505, "answer_id": 53751715, "question_id": 53751426, "link": "https://stackoverflow.com/questions/53751426/combining-columns-within-the-same-df-python-pandas/53751715#53751715", "title": "Combining columns within the same df Python/Pandas", "body": "<p>If you are certain column ordering is consistent and tiled [A,B,C,A,B,C...], then you can create a new <code>DataFrame</code> by reshaping the old. Otherwise safer alternatives exist with <code>pd.wide_to_long</code> which uses the actual column names. </p>\n\n<h3>Sample Data</h3>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(123)\ndf = pd.DataFrame(np.random.randint(1, 10, (3, 15)),\n                  columns=list('BACDE')*3)\n#   B  A  C  D  E  B  A  C  D  E  B  A  C  D  E\n#0  3  3  7  2  4  7  2  1  2  1  1  4  5  1  1\n#1  5  2  8  4  3  5  8  3  5  9  1  8  4  5  7\n#2  2  6  7  3  2  9  4  6  1  3  7  3  5  5  7\n</code></pre>\n\n<h3>Reshape</h3>\n\n<pre><code>cols = pd.unique(df.columns)  # Preserves Order\npd.DataFrame(df.values.reshape(-1, len(cols)), columns=cols)\n#   B  A  C  D  E\n#0  3  3  7  2  4\n#1  7  2  1  2  1\n#2  1  4  5  1  1\n#3  5  2  8  4  3\n#4  5  8  3  5  9\n#5  1  8  4  5  7\n#6  2  6  7  3  2\n#7  9  4  6  1  3\n#8  7  3  5  5  7\n</code></pre>\n\n<h3><code>pd.wide_to_long</code></h3>\n\n<p>Useful when your columns are not in the same tiling order, or if you have more of some than others. Requires you to modify the column names by adding <code>_N</code> for which occurrence of the column it is.</p>\n\n<pre><code>cols = pd.unique(df.columns)\ns = pd.Series(df.columns).groupby(df.columns).cumcount()\ndf.columns = [f'{col}_{N}' for col,N in zip(df.columns, s)]\n\npd.wide_to_long(df.reset_index(), stubnames=cols, i='index', j='num', sep='_').reset_index(drop=True)\n#   B  A  C  D  E\n#0  3  3  7  2  4\n#1  5  2  8  4  3\n#2  2  6  7  3  2\n#3  7  2  1  2  1\n#4  5  8  3  5  9\n#5  9  4  6  1  3\n#6  1  4  5  1  1\n#7  1  8  4  5  7\n#8  7  3  5  5  7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 2965673, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e9605225083416e8dd3da79c71189df0?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2965673/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1544651118, "creation_date": 1544651118, "answer_id": 53751853, "question_id": 53751426, "link": "https://stackoverflow.com/questions/53751426/combining-columns-within-the-same-df-python-pandas/53751853#53751853", "title": "Combining columns within the same df Python/Pandas", "body": "<p>It looks like you are looking for \"append\":</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\ndf = pd.DataFrame(np.random.randint(1,10, (3,2)),columns=list('AB'))\ndf2 = pd.DataFrame(np.random.randint(1,10, (3,2)),columns=list('AB'))\ndf3=df.append(df2)\n\nIn [2]: df3\nOut[2]: \n   A  B\n0  7  6\n1  8  3\n2  2  1\n0  2  2\n1  1  3\n2  5  5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 5220902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8da1ae9640eb1806b2a360e8ac3676ac?s=128&d=identicon&r=PG", "display_name": "Ken Dekalb", "link": "https://stackoverflow.com/users/5220902/ken-dekalb"}, "is_accepted": false, "score": 0, "last_activity_date": 1544653446, "creation_date": 1544653446, "answer_id": 53752297, "question_id": 53751426, "link": "https://stackoverflow.com/questions/53751426/combining-columns-within-the-same-df-python-pandas/53752297#53752297", "title": "Combining columns within the same df Python/Pandas", "body": "<p>The following example is relevant when you exactly know where your columns are. Building on <a href=\"https://stackoverflow.com/users/4333359/alollz\">ALollz's</a> code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(123)\ndf = pd.DataFrame(np.random.randint(1, 10, (3, 15)),\n                  columns=list('BACDE')*3)\n#   B  A  C  D  E  B  A  C  D  E  B  A  C  D  E\n#0  3  3  7  2  4  7  2  1  2  1  1  4  5  1  1\n#1  5  2  8  4  3  5  8  3  5  9  1  8  4  5  7\n#2  2  6  7  3  2  9  4  6  1  3  7  3  5  5  7\n\n# Using iloc\n\ndf1 = df.iloc[:, :5]\n\ndf2 = df.iloc[:,5:10]\n\ndf3 = df.iloc[:,10:]\n\ndf_final= pd.concat([df1,df2,df3]).reset_index(drop=True)\n</code></pre>\n\n<p>Result <code>df_final</code>:</p>\n\n<pre><code>    B   A   C   D   E\n\n0   3   3   7   2   4\n1   5   2   8   4   3\n2   2   6   7   3   2\n3   7   2   1   2   1\n4   5   8   3   5   9\n5   9   4   6   1   3\n6   1   4   5   1   1\n7   1   8   4   5   7\n8   7   3   5   5   7\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9412137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64c529a886309c46b749dc6cee0c108?s=128&d=identicon&r=PG&f=1", "display_name": "quadle ", "link": "https://stackoverflow.com/users/9412137/quadle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1544654739, "creation_date": 1544649179, "last_edit_date": 1544654739, "question_id": 53751426, "link": "https://stackoverflow.com/questions/53751426/combining-columns-within-the-same-df-python-pandas", "title": "Combining columns within the same df Python/Pandas", "body": "<p>I'm new to the programming world and can't figure out how to concatenate columns in <code>pandas</code>. I'm not looking to join these columns, but rather stack them on top of each other.</p>\n\n<p>This is the code I have so far: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np \n\ndf = pd.read_excel(\"C:\\\\Users\\\\Kit Wesselhoeft\\\\Documents\\\\NEM\\\\Northend Manufacturing_deletecol.xlsx\")\n\nprint(df)\n\ndf = pd.concat(['A','A'])\n\nprint(df)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yTOl1.png\" rel=\"nofollow noreferrer\">image here</a></p>\n\n<p>I want to combine all the columns so that all the A's sit on top of each other, Same with the B's - E's.</p>\n\n<p>How can I do this?  Am I missing something?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 1, "creation_date": 1544650385, "post_id": 53751415, "comment_id": 94356020, "body": "&#39;ID&#39; is not in your dataframe as a column or index"}, {"owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "edited": false, "score": 1, "creation_date": 1544650458, "post_id": 53751415, "comment_id": 94356056, "body": "This kind of <code>KeyError</code> suggests that the <code>df</code> and <code>df2</code> dataframes that you&#39;re trying to merge do not both have a column with key <code>&#39;ID&#39;</code>. Are you certain that the dataframes have the content that you think they have? Add a <code>print</code> statement for both dataframes just before the line that is triggering the <code>KeyError</code>, and check the output."}], "owner": {"reputation": 1549, "user_id": 5223033, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bf6676f31f2155ff92b1f7ad96ab9924?s=128&d=identicon&r=PG&f=1", "display_name": "zwlayer", "link": "https://stackoverflow.com/users/5223033/zwlayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545556824, "creation_date": 1544649122, "last_edit_date": 1545556824, "question_id": 53751415, "link": "https://stackoverflow.com/questions/53751415/python-pandas-merge-command-doesnt-work-inside-the-code", "title": "Python pandas merge command doesn&#39;t work inside the code", "body": "<p>I try to do the following:</p>\n\n<pre><code>&gt;&gt;&gt;df = pd.read_table('file1.txt')\n&gt;&gt;&gt; df2 = pd.read_csv('file2.csv',quotechar=\"'\")\n&gt;&gt;&gt; df.columns\nIndex(['ID', 'Tweet', 'Intensity Score'], dtype='object')\ndf2.columns\nIndex(['ID', 'Tweet'],\n      dtype='object')\n&gt;&gt;&gt;pd.merge(df, df2, on='ID')\n</code></pre>\n\n<p>The last command (pd.merge) works fine when I try it on the terminal, however when I put the same code inside the foo.py and run that foo.py I got the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"main.py\", line 208, in &lt;module&gt;\n    main()\n    df_merged_trn=pd.merge(df,df2,on='ID')\n  File \"anaconda3/lib/python3.6/site-packages/pandas/core/reshape/merge.py\", line 60, in merge\n    validate=validate)\n  File \"anaconda3/lib/python3.6/site-packages/pandas/core/reshape/merge.py\", line 550, in __init__\n    self.join_names) = self._get_merge_keys()\n  File \"anaconda3/lib/python3.6/site-packages/pandas/core/reshape/merge.py\", line 856, in _get_merge_keys\n    rk, stacklevel=stacklevel))\n  File \"lib/python3.6/site-packages/pandas/core/generic.py\", line 1379, in _get_label_or_level_values\n    raise KeyError(key)\nKeyError: 'ID'\n</code></pre>\n\n<p>What could be the problem?</p>\n"}, {"tags": ["python", "python-3.x", "image", "opencv", "python-imaging-library"], "comments": [{"owner": {"reputation": 152, "user_id": 8310504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462a6dbf3a5233f0b0712d5ea33a7448?s=128&d=identicon&r=PG&f=1", "display_name": "K. Nielson", "link": "https://stackoverflow.com/users/8310504/k-nielson"}, "edited": false, "score": 2, "creation_date": 1544649536, "post_id": 53751389, "comment_id": 94355651, "body": "Try adding the keyword argument <code>interpolation=INTER_AREA</code> to your <code>cv2.resize</code> calls."}, {"owner": {"reputation": 49, "user_id": 10215286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5d52a6c62564d658fa9a25bcdc9b4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Taline", "link": "https://stackoverflow.com/users/10215286/taline"}, "reply_to_user": {"reputation": 152, "user_id": 8310504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462a6dbf3a5233f0b0712d5ea33a7448?s=128&d=identicon&r=PG&f=1", "display_name": "K. Nielson", "link": "https://stackoverflow.com/users/8310504/k-nielson"}, "edited": false, "score": 0, "creation_date": 1544650126, "post_id": 53751389, "comment_id": 94355909, "body": "I appreciate the advice but rather than testing every possible suggestion that may come up, the image is there, and the code as well it would be helpful if you could test on it and add in answers in case of success, thanks in advance."}, {"owner": {"reputation": 2089, "user_id": 4766168, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xrRVf1o5oQk/AAAAAAAAAAI/AAAAAAAAAEk/Uu9PgLhfHwA/photo.jpg?sz=128", "display_name": "Dmitrii Z.", "link": "https://stackoverflow.com/users/4766168/dmitrii-z"}, "edited": false, "score": 2, "creation_date": 1544650386, "post_id": 53751389, "comment_id": 94356022, "body": "Since you don&#39;t give any reasonable metrics of what you define as bad - nobody except you can decide if one or another interpolation method suits you, therefore please check the suggested interpolation type and if it suits you - notify the responder."}, {"owner": {"reputation": 49, "user_id": 10215286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5d52a6c62564d658fa9a25bcdc9b4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Taline", "link": "https://stackoverflow.com/users/10215286/taline"}, "reply_to_user": {"reputation": 2089, "user_id": 4766168, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xrRVf1o5oQk/AAAAAAAAAAI/AAAAAAAAAEk/Uu9PgLhfHwA/photo.jpg?sz=128", "display_name": "Dmitrii Z.", "link": "https://stackoverflow.com/users/4766168/dmitrii-z"}, "edited": false, "score": 0, "creation_date": 1544655826, "post_id": 53751389, "comment_id": 94358250, "body": "@DmitriiZ. my question explicitly mentions that the expected result is &quot;The resized images should not be skewed or deformed&quot; anything other than that is bad."}], "answers": [{"tags": [], "owner": {"reputation": 8089, "user_id": 4280242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba7a603c8ad4ad09007c9360bc2f51ba?s=128&d=identicon&r=PG&f=1", "display_name": "Jatentaki", "link": "https://stackoverflow.com/users/4280242/jatentaki"}, "is_accepted": false, "score": 2, "last_activity_date": 1544652757, "last_edit_date": 1544652757, "creation_date": 1544649443, "answer_id": 53751490, "question_id": 53751389, "link": "https://stackoverflow.com/questions/53751389/how-can-i-properly-resize-my-images-for-further-processing/53751490#53751490", "title": "How can i properly resize my images for further processing?", "body": "<p>Your problems are due to interpolation artifacts. As you can check in the <a href=\"https://docs.opencv.org/3.0-beta/modules/imgproc/doc/geometric_transformations.html?highlight=resize#cv2.resize\" rel=\"nofollow noreferrer\">documentation</a> for <code>cv2.resize</code>, by default <code>BILINEAR</code> is used. You should probably go with their suggestion and try using the <code>INTER_AREA</code> version. You may also want to check other options and see which one suits you best.</p>\n"}, {"tags": [], "owner": {"reputation": 859, "user_id": 10158438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5702aca0d421f347592484442f4278?s=128&d=identicon&r=PG&f=1", "display_name": "Howard GENG", "link": "https://stackoverflow.com/users/10158438/howard-geng"}, "is_accepted": false, "score": 0, "last_activity_date": 1544670335, "creation_date": 1544670335, "answer_id": 53754476, "question_id": 53751389, "link": "https://stackoverflow.com/questions/53751389/how-can-i-properly-resize-my-images-for-further-processing/53754476#53754476", "title": "How can i properly resize my images for further processing?", "body": "<p>You need to look at <a href=\"https://en.wikipedia.org/wiki/Vector_graphics\" rel=\"nofollow noreferrer\">vector images here</a> at Wikipedia if you really want a clear picture in a small size. OpenCV library doesn't provide a function for converting bitmap images to vector images. </p>\n"}], "owner": {"reputation": 49, "user_id": 10215286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5d52a6c62564d658fa9a25bcdc9b4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Taline", "link": "https://stackoverflow.com/users/10215286/taline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1544887323, "creation_date": 1544649026, "last_edit_date": 1544887323, "question_id": 53751389, "link": "https://stackoverflow.com/questions/53751389/how-can-i-properly-resize-my-images-for-further-processing", "title": "How can i properly resize my images for further processing?", "body": "<p>I want to resize my images( to a smaller size) :</p>\n\n<p>How can I resize my images properly without the bad pixels effect for further cnn processing afterward.</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1544702138, "post_id": 53751382, "comment_id": 94374361, "body": "Works for me as expected. There is no need to use <code>logo.append(...</code>, change to <code>image = tk.PhotoImage(file=&quot;image&#47;&quot; + lineList[0])</code>"}, {"owner": {"reputation": 9, "user_id": 10782834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5PoBllSr2bs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h2KgkRnhNuHLtOl9aEY6k0kweuNQ/mo/photo.jpg?sz=128", "display_name": "Kev", "link": "https://stackoverflow.com/users/10782834/kev"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1544714998, "post_id": 53751382, "comment_id": 94382159, "body": "I assume I still need the other two lines for it to work? Also does it matter where in the code Im puting this. I have it right after the existing logo code, but it still isnt changing the image."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1544733103, "post_id": 53751382, "comment_id": 94391070, "body": "<i>&quot;does it matter where in the code Im puting this&quot;</i>: <b>YES</b>, must be inside of <code>def displayItem</code>"}, {"owner": {"reputation": 9, "user_id": 10782834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5PoBllSr2bs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h2KgkRnhNuHLtOl9aEY6k0kweuNQ/mo/photo.jpg?sz=128", "display_name": "Kev", "link": "https://stackoverflow.com/users/10782834/kev"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1544737601, "post_id": 53751382, "comment_id": 94392962, "body": "Thanks, I managed to figure it out! I appreciate your help. I was putting the code to change the image with the initial 4 lines but I see now that it needs to be in the function to work with the linelist."}], "owner": {"reputation": 9, "user_id": 10782834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5PoBllSr2bs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h2KgkRnhNuHLtOl9aEY6k0kweuNQ/mo/photo.jpg?sz=128", "display_name": "Kev", "link": "https://stackoverflow.com/users/10782834/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544689699, "creation_date": 1544648994, "last_edit_date": 1544689699, "question_id": 53751382, "link": "https://stackoverflow.com/questions/53751382/updating-an-image-in-tkinter-from-a-listbox-selection", "title": "Updating an image in tkinter from a listbox selection", "body": "<p>I have a program which populates 7 text boxes with information from a text file. The first linelist of the text file is a png which I need to display with the corresponding information.</p>\n\n<p>The program functions so far and I have an initial image displayed at the top. But I am having issues implementing the code I need to update the image with the rest of the information.</p>\n\n<p>From what info I have the part I need to implement is the three lines below, I just can't figure out why it isn't functioning with the rest of the program it either tells me logo is not defined or it completely breaks the program and gives no error.</p>\n\n<pre><code>logo.append(tk.PhotoImage(file=\"images/\"+ lineList[0]))\n\nlab8.configure(image=logo[len(logo)-1])\n\nlab8.image= logo[len(logo)-1]\n</code></pre>\n\n<p>Rest of the program:</p>\n\n<pre><code>import tkinter as tk\n\nwindow = tk.Tk()\n\nwindow.geometry(\"300x600\")\n\nwindow.title(\"Realtor INC.\")\n\n##\n\ndef displayItem(event):\n\n     line=lst1.get(lst1.curselection())\n\n     lineList=line.split(':')\n\n     txt1.delete(1.0,tk.END)\n\n     txt1.insert(tk.END,lineList[0])\n\n     txt2.delete(1.0,tk.END)\n\n     txt2.insert(tk.END,lineList[1])\n\n     txt3.delete(1.0,tk.END)\n\n     txt3.insert(tk.END,lineList[2])\n\n     txt4.delete(1.0,tk.END)\n\n     txt4.insert(tk.END,lineList[3])\n\n\n\n     txt5.delete(1.0,tk.END)\n\n     txt5.insert(tk.END,lineList[4])\n\n\n\n     txt6.delete(1.0,tk.END)\n\n     txt6.insert(tk.END,lineList[5])\n\n\n\n     txt7.delete(1.0,tk.END)\n\n     txt7.insert(tk.END,lineList[6])\n\n##logo\n\nlogo=[]\n\nlogo.append(tk.PhotoImage(file=\"logo.png\"))\n\nlab8=tk.Label(image=logo[0])\n\nlab8.grid(column=0,row=0, columnspan=2)\n\n\n\n\n\ntxt1=tk.Text(width=20, height=1)\n\ntxt2=tk.Text(width=20, height=1)\n\ntxt3=tk.Text(width=20, height=1)\n\ntxt4=tk.Text(width=20, height=1)\n\ntxt5=tk.Text(width=20, height=1)\n\ntxt6=tk.Text(width=20, height=1)\n\ntxt7=tk.Text(width=20, height=1)\n\n\n\n\n\nlab1=tk.Label(text=\"House Image Name\")\n\nlab2=tk.Label(text=\"Price\")\n\nlab3=tk.Label(text=\"Number of Bedrooms\")\n\nlab4=tk.Label(text=\"Number of Bathrooms\")\n\nlab5=tk.Label(text=\"Location\")\n\nlab6=tk.Label(text=\"Square Feet\")\n\nlab7=tk.Label(text=\"Availability\")\n\n\n\nlst1=tk.Listbox(height=10, width=40)\n\n\n\nlab1.grid(column=0, row=1), txt1.grid(column=1, row=1)\n\nlab2.grid(column=0, row=2), txt2.grid(column=1, row=2)\n\nlab3.grid(column=0, row=3), txt3.grid(column=1, row=3)\n\nlab4.grid(column=0, row=4), txt4.grid(column=1, row=4)\n\nlab5.grid(column=0, row=5), txt5.grid(column=1, row=5)\n\nlab6.grid(column=0, row=6), txt6.grid(column=1, row=6)\n\nlab7.grid(column=0, row=7), txt7.grid(column=1, row=7)\n\n\n\nlst1.grid(column=0, row=10, columnspan=2)\n\n\n\ninfile = open(\"houses.txt\", 'r')\n\n\n\nfor line in infile:\n\n     ##print(line, end=\"\")\n\n     lst1.insert(tk.END, line)\n\ninfile.close()\n\nlst1.bind(\"&lt;&lt;ListboxSelect&gt;&gt;\", displayItem)\n\nwindow.mainloop()\n</code></pre>\n"}, {"tags": ["python", "mysql", "mysql-python"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544652665, "post_id": 53751358, "comment_id": 94357075, "body": "I&#39;m not experienced with MySQL but should there really be a variable <code>@pt1</code> which isn&#39;t referenced anywhere else?"}, {"owner": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544653006, "post_id": 53751358, "comment_id": 94357203, "body": "I copied the code above from an earlier version i was working on, it should be @pointt, I will edit it in my question, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "edited": false, "score": 0, "creation_date": 1544650918, "post_id": 53751592, "comment_id": 94356250, "body": "it tried what you said, but still doesn&#39;t work in python, interesting part is it doesn&#39;t raise an error anymore, it just doesn&#39;t do anything"}, {"owner": {"reputation": 15207, "user_id": 4104224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1UvuxsNkn9w/AAAAAAAAAAI/AAAAAAAAA10/vjzWlg3BR-U/photo.jpg?sz=128", "display_name": "Uueerdo", "link": "https://stackoverflow.com/users/4104224/uueerdo"}, "reply_to_user": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "edited": false, "score": 0, "creation_date": 1544655898, "post_id": 53751592, "comment_id": 94358278, "body": "Maybe double check the values the proc gets from both calling methods, you could put an <code>insert into somelog</code> at the start of the proc and see if the values coming in look different; it almost sounds like the proc is finding nothing close."}, {"owner": {"reputation": 15207, "user_id": 4104224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1UvuxsNkn9w/AAAAAAAAAAI/AAAAAAAAA10/vjzWlg3BR-U/photo.jpg?sz=128", "display_name": "Uueerdo", "link": "https://stackoverflow.com/users/4104224/uueerdo"}, "reply_to_user": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "edited": false, "score": 0, "creation_date": 1544656010, "post_id": 53751592, "comment_id": 94358319, "body": "Also, be a little wary of using session/@ variables inside stored procedures; they have connection scope, so proc calls can end up with initial values set elsewhere and/or earlier on the connection. And make sure you correct <code>@pt1</code> to <code>@pointt</code> in my answer, I started from before you corrected the typo(?) in your question."}, {"owner": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "edited": false, "score": 0, "creation_date": 1544703081, "post_id": 53751592, "comment_id": 94374891, "body": "well, i changed the @ variables and declared two separate variables inside the procedure, i also checked whether the procedure receives the input variables or no, which show it does, but it still doesn&#39;t insert into the table as before"}], "tags": [], "owner": {"reputation": 15207, "user_id": 4104224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1UvuxsNkn9w/AAAAAAAAAAI/AAAAAAAAA10/vjzWlg3BR-U/photo.jpg?sz=128", "display_name": "Uueerdo", "link": "https://stackoverflow.com/users/4104224/uueerdo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544649892, "creation_date": 1544649892, "answer_id": 53751592, "question_id": 53751358, "link": "https://stackoverflow.com/questions/53751358/stored-procedure-works-on-mysql-workbench-but-not-in-python/53751592#53751592", "title": "Stored procedure works on MySQL workbench, but not in python", "body": "<p>My <strong>guess</strong> is that perhaps there are some rounding issues between the 2nd and 3rd queries of the stored procedure. You might consider eliminating the 2nd query altogether, and just change the 3rd query to something like this:</p>\n\n<pre><code>SELECT location_id, ST_Distance_Sphere(@pt1, geopoint)/1000 AS distance\nINTO @lmini, @mini\nFROM locations\nORDER BY distance ASC\nLIMIT 1;\n</code></pre>\n\n<p>*I say \"something like\" because I primarily work in MSSQL lately, and didn't do a lot of SELECT INTO when I was in MySQL more often. <em>(Specifically, I don't recall if you can alias and into like this.)</em></p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "is_accepted": true, "score": 0, "last_activity_date": 1544718172, "creation_date": 1544718172, "answer_id": 53766103, "question_id": 53751358, "link": "https://stackoverflow.com/questions/53751358/stored-procedure-works-on-mysql-workbench-but-not-in-python/53766103#53766103", "title": "Stored procedure works on MySQL workbench, but not in python", "body": "<p>Answer ----->> so finally i was able to make it work, the trick was to add mydb.commit() after i call the procedure from python</p>\n\n<pre><code>try:\n    mydb = mysql.connector.connect(\n        host=\"localhost\",\n        user=\"root\",\n        password=\"123456\",\n        database=\"v21\")\n    c = mydb.cursor()\n\n    lat = 36.8451995849609\n    lng = 54.428798675537\n    city = \"Rasht\"\n    state = \"Gilan\"\n    user = 70440675\n\n    arg = (user, state, city, lat, lng)\n\n    c.callproc('do1', arg)\n    mydb.commit()\n\nexcept mysql.connector.Error as err:\n    print(\"Something went wrong: {}\".format(err))\n</code></pre>\n\n<p>it's not mentioned in the documentation that we need to use <a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection-commit.html\" rel=\"nofollow noreferrer\">.commit()</a> after using <a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-callproc.html\" rel=\"nofollow noreferrer\">.callproc()</a> method, especially when all the updating and inserting is being done on the database side. But, it is mentioned in <a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection-commit.html\" rel=\"nofollow noreferrer\">.commit()</a> documentation that </p>\n\n<blockquote>\n  <p>Since by default Connector/Python does not autocommit, it is important to call this method after every transaction that modifies data for tables that use transactional storage engines.</p>\n</blockquote>\n\n<p>So my guess is since the procedure tries to manipulate data on the database and it's called from the python client, we need to use .commit() after using .callproc().</p>\n"}], "owner": {"reputation": 15, "user_id": 10737349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gc271c7O93U/AAAAAAAAAAI/AAAAAAAAAC4/say_rCMRpaU/photo.jpg?sz=128", "display_name": "Pouria Mazandarani", "link": "https://stackoverflow.com/users/10737349/pouria-mazandarani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53766103, "answer_count": 2, "score": 1, "last_activity_date": 1544718172, "creation_date": 1544648867, "last_edit_date": 1544704121, "question_id": 53751358, "link": "https://stackoverflow.com/questions/53751358/stored-procedure-works-on-mysql-workbench-but-not-in-python", "title": "Stored procedure works on MySQL workbench, but not in python", "body": "<p>I'm testing a database where i have 3 tables, number 1 is storing user information, number 2 is storing the latitude and longitude for different cities, and there's a 3rd table storing the location of a user and it's distance to the closest city. The 3rd table has a composite key from primary keys of the other two tables. \nI have written a stored procedure in mysql workbench that takes in  5 variables then it inserts data into the 3rd table, here's the code using some random variables: </p>\n\n<pre><code>SET @lat55 = 36.8451995849609;\nSET @lng55 = 54.428798675537;\nSET @city55 = 'Rasht';\nSET @state55 = 'Gilan';\nSET @user_id55 = 70440675;\n\n\nDELIMITER //  \nDROP PROCEDURE IF EXISTS do1 //\nCREATE PROCEDURE do1 (IN id INT, IN state VARCHAR(25), IN city VARCHAR(25),             \nIN lat DECIMAL(15,13),IN lng DECIMAL(15,12))\nBEGIN\n\n`  `DECLARE dmini DECIMAL(5,1);\n    DECLARE lmini INT;\n\n    SELECT location_id, ST_Distance_Sphere(POINT(lng,lat), geopoint)/1000 AS \n    distance INTO lmini, dmini FROM locations ORDER BY distance ASC LIMIT 1;\n\n    INSERT INTO user_has_loc (user_id, location_id, distance, state, city, \n    lat, lng) VALUES (id, lmini, dmini, state, city, lat, lng);\nEND;\n//\n\nCALL do1(@user_id55,@state55,@city55,@lat55,@lng55);\n</code></pre>\n\n<p>it works just fine and inserts into the table, but when i try to call the same procedure with the same variables from python, it does nothing:</p>\n\n<pre><code>try:\n    mydb = mysql.connector.connect(\n        host=\"localhost\",\n        user=\"root\",\n        password=\"123456\",\n        database=\"v21\")\n    c = mydb.cursor()\n\n    lat = 36.8451995849609\n    lng = 54.428798675537\n    city = \"Rasht\"\n    state = \"Gilan\"\n    user = 70440675\n\n    arg = (user, state, city, lat, lng)\n\n    c.callproc('do1', arg)\n\nexcept mysql.connector.Error as err:\n    print(\"Something went wrong: {}\".format(err))\n</code></pre>\n\n<p>It is And when i use </p>\n\n<pre><code>c.execute(\"CALL do1({},{},{},{},{})\".format(user, state, city, lat, lng))\n</code></pre>\n\n<p>it gives another Error saying \"Unknown column 'Gilan' in 'field list'\". The interesting part is that if i insert the same data into the table manually, then when i try to call the procedure from python, it raises the error : \"Duplicate entry '70440675-883' for key 'PRIMARY'\". so it seems like it tries to insert into the table, but it doesn't save it !!\nCan somebody please tell me what am i doing wrong here??</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "vectorization"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 3, "creation_date": 1544649337, "post_id": 53751355, "comment_id": 94355584, "body": "Even if it worked <code>np.vectorize</code> doesn&#39;t offer any speed improvement.  If you can&#39;t rewrite <code>foo</code>, it&#39;s hard to beat the iteration: <code>foo(a[:,:,i], b]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1544667087, "creation_date": 1544667087, "answer_id": 53754097, "question_id": 53751355, "link": "https://stackoverflow.com/questions/53751355/how-to-vectorize-passing-a-function-to-two-numpy-arrays-3d-and-2d/53754097#53754097", "title": "How to vectorize passing a function to two numpy arrays: 3D and 2D?", "body": "<p>You can specify the function's signature using the <code>signature</code> keyword. This will, however, try to use the last dimensions of each input, so you'd have to manually transpose. Example</p>\n\n<pre><code>F = np.vectorize(np.matmul, signature='(m,n),(n,l)-&gt;(m,l)', otypes=(float,))\nA = np.arange(12).reshape(2, 2, 3)\nB = np.diag((1.5, 2.5))\n# F(A.transpose(2,0,1), B)\n# array([[[ 0. ,  7.5],\n#         [ 9. , 22.5]],\n# \n#        [[ 1.5, 10. ],\n#         [10.5, 25. ]],\n#\n#        [[ 3. , 12.5],\n#         [12. , 27.5]]])\n</code></pre>\n\n<p>As pointed out by @hpaulj in the comments <code>vectorize</code> is a convenience function, not a performance enhancer.</p>\n"}], "owner": {"reputation": 2395, "user_id": 1803908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RCEu7.jpg?s=128&g=1", "display_name": "Newskooler", "link": "https://stackoverflow.com/users/1803908/newskooler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544667087, "creation_date": 1544648857, "question_id": 53751355, "link": "https://stackoverflow.com/questions/53751355/how-to-vectorize-passing-a-function-to-two-numpy-arrays-3d-and-2d", "title": "How to vectorize passing a function to two numpy arrays: 3D and 2D?", "body": "<p>I have two multidimensional <code>numpy</code> arrays: <code>x</code> is 3D and <code>y</code> is 2D.</p>\n\n<p>If I have a function <code>foo(a, b)</code>, which takes as inputs two 2D arrays, how can I pass to <code>foo</code> my multidimensional arrays and iterate over <code>x</code>'s 3rd dimension in a vectorized way in order to get a list of <code>foo</code>'s results?</p>\n\n<p>I have been trying to do this with <code>np.vectorize</code>, but it iterates through the rows of the arrays and yields an error, so I am stuck.</p>\n"}, {"tags": ["python", "import", "anaconda", "spyder", "ta-lib"], "answers": [{"comments": [{"owner": {"reputation": 1763, "user_id": 1376472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/yPE3q.jpg?s=128&g=1", "display_name": "iso_9001_", "link": "https://stackoverflow.com/users/1376472/iso-9001"}, "edited": false, "score": 1, "creation_date": 1544652012, "post_id": 53751672, "comment_id": 94356764, "body": "I believe I did not install it wrong since I&#39;ve been using it for a long time. But, not always :) I am using the library but sometimes I cannot import it. That&#39;s my problem. All version, bit etc controls are OK."}], "tags": [], "owner": {"reputation": 368, "user_id": 10347353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d89c90f51be0821bd34ef7a95b6d6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Iulian", "link": "https://stackoverflow.com/users/10347353/iulian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544650296, "creation_date": 1544650296, "answer_id": 53751672, "question_id": 53751327, "link": "https://stackoverflow.com/questions/53751327/python-does-not-import-installed-external-library/53751672#53751672", "title": "Python does not import installed external library", "body": "<p>There is a chance you've installed it wrong. Also consider that this is an unofficial library.</p>\n\n<p>Make sure you installed the correct TA_lib for your Python version. What Python version are you using? \nIf it's 3.4, make sure you have downloaded the <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib\" rel=\"nofollow noreferrer\">TA_lib cp34</a> for windows 64 bits or 32 bits. If it's another version, make sure you find the one appropriate to you. </p>\n\n<p>Also another useful link to download TA_lib for 64bit is  <a href=\"https://github.com/afnhsn/TA-Lib_x64\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 1763, "user_id": 1376472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/yPE3q.jpg?s=128&g=1", "display_name": "iso_9001_", "link": "https://stackoverflow.com/users/1376472/iso-9001"}, "is_accepted": false, "score": 0, "last_activity_date": 1544798975, "last_edit_date": 1544798975, "creation_date": 1544776204, "answer_id": 53775964, "question_id": 53751327, "link": "https://stackoverflow.com/questions/53751327/python-does-not-import-installed-external-library/53775964#53775964", "title": "Python does not import installed external library", "body": "<p>I figured the problem. My <code>Python</code> file name was <code>Talib_pure</code> and then I renamed it to <code>Talib</code>. Since I import <code>talib</code> with <code>import talib</code> command, <code>Python</code> tried to import my own code isntead of <code>talib</code> library and therefore it got confused. </p>\n\n<p>I renamed the file to <code>ta_lib</code> and now it works (so far at least).</p>\n"}], "owner": {"reputation": 1763, "user_id": 1376472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/yPE3q.jpg?s=128&g=1", "display_name": "iso_9001_", "link": "https://stackoverflow.com/users/1376472/iso-9001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 505, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544798975, "creation_date": 1544648721, "last_edit_date": 1544689950, "question_id": 53751327, "link": "https://stackoverflow.com/questions/53751327/python-does-not-import-installed-external-library", "title": "Python does not import installed external library", "body": "<p>This is a rather weird problem. I'm on <code>Windows</code> and using <code>Anaconda</code> for <code>Python</code>. There is a financial tool library called <code>TA_lib</code> (Technical Analysis Library). Since this library is not officially supported, I had to install a <code>whl</code> version and I got it from <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>After installation I was able to use it. But sometimes, when I start <code>Anaconda</code> and <code>Spyder</code>, the import talib command yields <code>\"Talib has no functiona as ...\"</code> and I cannot import and use it. When this happens, I follow these steps:</p>\n\n<ol>\n<li>I close Anaconda and Spyder</li>\n<li>I install the library again through Anaconda prompt (I see requirement already satisfied messge)</li>\n<li>I restart Anaconda and Spyder</li>\n</ol>\n\n<p>If I'm lucky, I can import <code>talib</code> after first try. If not, I have to repeat these steps for a couple of times. What might be wrong?</p>\n\n<p>EDIT 1:</p>\n\n<p>Now it's not working. Here is the error log:</p>\n\n<pre><code>import pandas as pd\nimport talib\nimport numpy as np\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-2-a3bb601353da&gt;\", line 2, in &lt;module&gt;\n    import talib\n\n  File \"C:\\Users\\ismetb\\Desktop\\AlgoritmikFinans\\Classifier 11-12-2018 1830 v2\\talib.py\", line 90, in &lt;module&gt;\n    upperband, middleband, lowerband = talib.BBANDS(close, timeperiod=5, nbdevup=2, nbdevdn=2, matype=talib.MA_Type.T3)\n\nAttributeError: module 'talib' has no attribute 'BBANDS'\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 1283, "user_id": 10657880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8HXS.jpg?s=128&g=1", "display_name": "Aurora Wang", "link": "https://stackoverflow.com/users/10657880/aurora-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1544650580, "creation_date": 1544650580, "answer_id": 53751731, "question_id": 53751291, "link": "https://stackoverflow.com/questions/53751291/django-rest-framework-get-a-lookup-field-as-a-list-of-hyperlinks/53751731#53751731", "title": "Django Rest Framework get a lookup field as a list of hyperlinks", "body": "<p>If you want your <a href=\"https://stackoverflow.com/q/35522768/10657880\">photos full urls</a> you can declare a <a href=\"https://www.django-rest-framework.org/api-guide/fields/#serializermethodfield\" rel=\"nofollow noreferrer\">Serializer Method Field</a> to do something like this:</p>\n\n<pre><code>class AlbumSerializer(serializers.ModelSerializer):\n    photos_url = serializers.SerializerMethodField()\n\n    class Meta:\n        model = proxies.AlbumProxy\n        fields = ('id', 'name', 'description', 'company', 'access_code')\n\n    def get_photos_url(self, obj):\n        urls = []\n        request = self.context.get('request')\n        for photo in obj.photos:\n            urls.append(request.build_absolute_uri(photo.url))\n        return urls\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2870, "user_id": 623913, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nO2YC.jpg?s=128&g=1", "display_name": "Cartucho", "link": "https://stackoverflow.com/users/623913/cartucho"}, "is_accepted": true, "score": 1, "last_activity_date": 1544651781, "last_edit_date": 1544651781, "creation_date": 1544651339, "answer_id": 53751898, "question_id": 53751291, "link": "https://stackoverflow.com/questions/53751291/django-rest-framework-get-a-lookup-field-as-a-list-of-hyperlinks/53751898#53751898", "title": "Django Rest Framework get a lookup field as a list of hyperlinks", "body": "<p>I think you need a <a href=\"https://www.django-rest-framework.org/tutorial/5-relationships-and-hyperlinked-apis/#hyperlinking-our-api\" rel=\"nofollow noreferrer\">HyperlinkedRelatedField</a>, something like this:</p>\n\n<pre><code>class AlbumSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = proxies.AlbumProxy\n        fields = (\n            'id', \n            'name', \n            'description', \n            'company', \n            'access_code',  \n            'photos'\n        )\n\n    photos = serializers.HyperlinkedRelatedField(\n        many=True, \n        view_name='&lt;your-photos-view-name&gt;', \n        read_only=True\n    )\n</code></pre>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 53751898, "answer_count": 2, "score": 2, "last_activity_date": 1544651781, "creation_date": 1544648563, "question_id": 53751291, "link": "https://stackoverflow.com/questions/53751291/django-rest-framework-get-a-lookup-field-as-a-list-of-hyperlinks", "title": "Django Rest Framework get a lookup field as a list of hyperlinks", "body": "<p>I have a model <strong>Album</strong> and a model <strong>Photo</strong>, which references the first one through a <strong>FireignKey</strong> field. I want the <strong>ModelSerializer</strong> for model <strong>Album</strong> to return a list of hyperlinks to relate entries in model <strong>Photo</strong> through a lookup field, but I only get it to return a list of ids.</p>\n\n<p>These are my models:</p>\n\n<pre><code>class Album(models.Model):\n    name = models.CharField(max_length=200, verbose_name=_(\"Name\"))\n    description = models.TextField(null=True, blank=True, verbose_name=_(\"Description\"))\n    company = models.ForeignKey(Company, on_delete=models.PROTECT, related_name='albums', verbose_name=_(\"Company\"))\n    access_code = models.CharField(max_length=30, default=_create_access_code, verbose_name=_(\"Internal Use\"))\n\n    class Meta:\n        verbose_name = _(\"Album\")\n        verbose_name_plural = _(\"Albums\")\n\n    def __str__(self):\n        return \"[{}] {} ({})\".format(self.pk, self.name, self.company.id)\n\nclass Photo(models.Model):\n    name = models.CharField(max_length=100, null=True, blank=True, verbose_name=_(\"Name\"))\n    album = models.ForeignKey(Album, on_delete=models.PROTECT, related_name='photos', verbose_name=_(\"Album\"))\n    photo = models.ImageField(verbose_name=_(\"Photo\"))\n\n    class Meta:\n        verbose_name = _(\"Photo\")\n        verbose_name_plural =_(\"Photos\")\n\n    def __str__(self):\n        return \"[{}] {}\".format(self.pk, self.name)\n</code></pre>\n\n<p>And this is my serializer:</p>\n\n<pre><code>class AlbumSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = proxies.AlbumProxy\n        fields = ('id', 'name', 'description', 'company', 'access_code', 'photos')\n</code></pre>\n\n<p>I want the field <code>photos</code> to return a list of hyperlinks, but I get a list of ids:</p>\n\n<pre><code>\"id\": 1,\n\"name\": \"Navidad 2018\",\n\"description\": \"La primera\",\n\"company\": 1,\n\"access_code\": \"xxxxxxxxxx\",\n\"photos\": [\n     11,\n     10,\n      7,\n      6\n]\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "user-defined-functions", "databricks"], "comments": [{"owner": {"reputation": 4067, "user_id": 10465355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3cdf959a26e3060f387f6d551917c3?s=128&d=identicon&r=PG&f=1", "display_name": "10465355", "link": "https://stackoverflow.com/users/10465355/10465355"}, "edited": false, "score": 2, "creation_date": 1544654623, "post_id": 53751266, "comment_id": 94357846, "body": "You&#39;re on the right track - <code>datediff</code> (or any of the <code>pyspark.sql.functions</code>) are not allowed in <code>udf</code>."}, {"owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "reply_to_user": {"reputation": 4067, "user_id": 10465355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3cdf959a26e3060f387f6d551917c3?s=128&d=identicon&r=PG&f=1", "display_name": "10465355", "link": "https://stackoverflow.com/users/10465355/10465355"}, "edited": false, "score": 0, "creation_date": 1544654771, "post_id": 53751266, "comment_id": 94357899, "body": "Ahhhh okay thank you! I&#39;ll just post my alternate solution and close this out"}], "answers": [{"tags": [], "owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "is_accepted": false, "score": 2, "last_activity_date": 1544654862, "creation_date": 1544654862, "answer_id": 53752567, "question_id": 53751266, "link": "https://stackoverflow.com/questions/53751266/attributeerror-nonetype-object-has-no-attribute-jvm-pyspark-udf/53752567#53752567", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;_jvm - PySpark UDF", "body": "<pre><code>def check_if_sub_connected(created_at, expiration_array):\n  if not expiration_array:\n    return []\n  else:\n    close_to_array = []\n    for i in expiration_array:\n      if created_at - i &lt; pd.Timedelta(days=45):\n        if created_at - i &gt; pd.Timedelta(days=-45):\n          close_to_array.append(i)\n    return close_to_array\n\ncheck_if_sub_connected = udf(check_if_sub_connected, ArrayType(TimestampType()))\n</code></pre>\n\n<p>As @user10465355 pointed out, <code>pyspark.sql.functions</code> don't work in UDFs. As such, here is my alternate solution. Thanks</p>\n"}], "owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4049, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1544654862, "creation_date": 1544648407, "last_edit_date": 1544649252, "question_id": 53751266, "link": "https://stackoverflow.com/questions/53751266/attributeerror-nonetype-object-has-no-attribute-jvm-pyspark-udf", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;_jvm - PySpark UDF", "body": "<p>I have data of magazine subscriptions and when they were created, as well as a column that contains an array of all subscription expiration dates associated with a given user:</p>\n\n<pre><code> user_id           created_date             expiration_dates_for_user\n 202394           '2018-05-04'           ['2019-1-03', '2018-10-06', '2018-07-05']\n 202394           '2017-01-04'           ['2019-1-03', '2018-10-06', '2018-07-05']\n 202394           '2016-05-04'           ['2019-1-03', '2018-10-06', '2018-07-05']\n</code></pre>\n\n<p>I'm trying to create a new column that is an array of all expiration dates that are within 45 days of the created_date, like so:</p>\n\n<pre><code> user_id       created_date             expiration_dates_for_user                near_expiration_dates \n 202394       '2018-05-04'           ['2019-1-03', '2018-10-06', '2020-07-05']   []\n 202394       '2019-01-04'           ['2019-1-03', '2018-10-06', '2020-07-05']   ['2019-1-03']\n 202394       '2016-05-04'           ['2019-1-03', '2018-10-06', '2020-07-05']   []\n</code></pre>\n\n<p>Here is the code I'm using:</p>\n\n<pre><code>def check_if_sub_connected(created_at, expiration_array):\n  if not expiration_array:\n    return []\n  if created_at == None:\n    return []\n  else:\n    close_to_array = []\n    for i in expiration_array:\n      if datediff(created_at, i) &lt; 45:\n        if created_at != i:\n          if datediff(created_at, i) &gt; -45:\n            close_to_array.append(i)\n    return close_to_array\n\ncheck_if_sub_connected = udf(check_if_sub_connected, ArrayType(TimestampType()))\n</code></pre>\n\n<p>But when I apply the function to create a column...</p>\n\n<pre><code>df = df.withColumn('near_expiration-dates', check_if_sub_connected(df.created_date, df.expiration_dates_for_user)\n</code></pre>\n\n<p>I get this wild error:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute '_jvm'\n\nat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:317)\nat org.apache.spark.sql.execution.python.PythonUDFRunner$$anon$1.read(PythonUDFRunner.scala:83)\nat org.apache.spark.sql.execution.python.PythonUDFRunner$$anon$1.read(PythonUDFRunner.scala:66)\nat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:271)\nat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\nat scala.collection.Iterator$$anon$12.hasNext(Iterator.scala:439)\nat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:408)\nat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:408)\nat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage17.processNext(Unknown Source)\nat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\nat org.apache.spark.sql.execution.WholeStageCodegenExec$$anonfun$10$$anon$1.hasNext(WholeStageCodegenExec.scala:620)\nat org.apache.spark.sql.execution.collect.UnsafeRowBatchUtils$.encodeUnsafeRows(UnsafeRowBatchUtils.scala:49)\nat org.apache.spark.sql.execution.collect.Collector$$anonfun$2.apply(Collector.scala:126)\nat org.apache.spark.sql.execution.collect.Collector$$anonfun$2.apply(Collector.scala:125)\nat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\nat org.apache.spark.scheduler.Task.run(Task.scala:112)\nat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:384)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)\n\nDriver stacktrace:\nat org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1747)\nat org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1735)\nat org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1734)\nat scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\nat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\nat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1734)\nat org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:962)\nat org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:962)\nat scala.Option.foreach(Option.scala:257)\nat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:962)\nat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:1970)\nat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1918)\nat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1906)\nat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\nat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:759)\nat org.apache.spark.SparkContext.runJob(SparkContext.scala:2141)\nat org.apache.spark.sql.execution.collect.Collector.runSparkJobs(Collector.scala:237)\nat org.apache.spark.sql.execution.collect.Collector.collect(Collector.scala:247)\nat org.apache.spark.sql.execution.collect.Collector$.collect(Collector.scala:64)\nat org.apache.spark.sql.execution.collect.Collector$.collect(Collector.scala:70)\nat org.apache.spark.sql.execution.ResultCacheManager.getOrComputeResult(ResultCacheManager.scala:497)\nat org.apache.spark.sql.execution.CollectLimitExec.executeCollectResult(limit.scala:48)\nat org.apache.spark.sql.Dataset.org$apache$spark$sql$Dataset$$collectResult(Dataset.scala:2775)\nat org.apache.spark.sql.Dataset.org$apache$spark$sql$Dataset$$collectFromPlan(Dataset.scala:3350)\nat org.apache.spark.sql.Dataset$$anonfun$head$1.apply(Dataset.scala:2504)\nat org.apache.spark.sql.Dataset$$anonfun$head$1.apply(Dataset.scala:2504)\nat org.apache.spark.sql.Dataset$$anonfun$53.apply(Dataset.scala:3334)\nat org.apache.spark.sql.execution.SQLExecution$$anonfun$withCustomExecutionEnv$1.apply(SQLExecution.scala:89)\nat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:175)\nat org.apache.spark.sql.execution.SQLExecution$.withCustomExecutionEnv(SQLExecution.scala:84)\nat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:126)\nat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3333)\nat org.apache.spark.sql.Dataset.head(Dataset.scala:2504)\nat org.apache.spark.sql.Dataset.take(Dataset.scala:2718)\nat org.apache.spark.sql.Dataset.showString(Dataset.scala:259)\nat sun.reflect.GeneratedMethodAccessor472.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\nat py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:380)\nat py4j.Gateway.invoke(Gateway.java:295)\nat py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\nat py4j.commands.CallCommand.execute(CallCommand.java:79)\nat py4j.GatewayConnection.run(GatewayConnection.java:251)\nat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File \"/databricks/spark/python/pyspark/worker.py\", line 262, in main\n    process()\n  File \"/databricks/spark/python/pyspark/worker.py\", line 257, in process\n    serializer.dump_stream(func(split_index, iterator), outfile)\n  File \"/databricks/spark/python/pyspark/worker.py\", line 183, in &lt;lambda&gt;\n    func = lambda _, it: map(mapper, it)\n  File \"&lt;string&gt;\", line 1, in &lt;lambda&gt;\n  File \"/databricks/spark/python/pyspark/worker.py\", line 77, in &lt;lambda&gt;\n    return lambda *a: toInternal(f(*a))\n  File \"/databricks/spark/python/pyspark/util.py\", line 55, in wrapper\n    return f(*args, **kwargs)\n  File \"&lt;command-30583&gt;\", line 9, in check_if_sub_connected\n  File \"/databricks/spark/python/pyspark/sql/functions.py\", line 1045, in datediff\n    return Column(sc._jvm.functions.datediff(_to_java_column(end), _to_java_column(start)))\nAttributeError: 'NoneType' object has no attribute '_jvm'\nat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:317)\nat org.apache.spark.sql.execution.python.PythonUDFRunner$$anon$1.read(PythonUDFRunner.scala:83)\nat org.apache.spark.sql.execution.python.PythonUDFRunner$$anon$1.read(PythonUDFRunner.scala:66)\nat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:271)\nat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\nat scala.collection.Iterator$$anon$12.hasNext(Iterator.scala:439)\nat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:408)\nat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:408)\nat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage17.processNext(Unknown Source)\nat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\nat org.apache.spark.sql.execution.WholeStageCodegenExec$$anonfun$10$$anon$1.hasNext(WholeStageCodegenExec.scala:620)\nat org.apache.spark.sql.execution.collect.UnsafeRowBatchUtils$.encodeUnsafeRows(UnsafeRowBatchUtils.scala:49)\nat org.apache.spark.sql.execution.collect.Collector$$anonfun$2.apply(Collector.scala:126)\nat org.apache.spark.sql.execution.collect.Collector$$anonfun$2.apply(Collector.scala:125)\nat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\nat org.apache.spark.scheduler.Task.run(Task.scala:112)\nat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:384)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n... 1 more\n</code></pre>\n\n<p>Is the datediff function not allowed within a udf? Or is this some sort of import error? I'm running spark on databricks using the latest version. Thanks!</p>\n"}, {"tags": ["python", "nlp", "nltk", "prediction", "n-gram"], "comments": [{"owner": {"reputation": 356, "user_id": 10772072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb79441d39cbdf6cd725ecfa1d42c65?s=128&d=identicon&r=PG&f=1", "display_name": "Xion", "link": "https://stackoverflow.com/users/10772072/xion"}, "edited": false, "score": 0, "creation_date": 1544649694, "post_id": 53751241, "comment_id": 94355708, "body": "Not sure if this will help but you can think of it as a similar thing, instead of words think of it as a string, I don&#39;t much about N-grams, but from looking at it you can convert those elements as string and then convert it back to integer once you are done with what you are doing."}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 2482833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXc6R.jpg?s=128&g=1", "display_name": "kayas", "link": "https://stackoverflow.com/users/2482833/kayas"}, "edited": false, "score": 1, "creation_date": 1544828207, "post_id": 53774094, "comment_id": 94427424, "body": "Thanks for your comment. But don&#39;t you think using a library/package like &quot;sklearn&quot; is a better choice rather than implementing my own N-gram model."}, {"owner": {"reputation": 91, "user_id": 9638957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7gApR.png?s=128&g=1", "display_name": "dahrs", "link": "https://stackoverflow.com/users/9638957/dahrs"}, "reply_to_user": {"reputation": 531, "user_id": 2482833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXc6R.jpg?s=128&g=1", "display_name": "kayas", "link": "https://stackoverflow.com/users/2482833/kayas"}, "edited": false, "score": 0, "creation_date": 1544834475, "post_id": 53774094, "comment_id": 94428659, "body": "Yes, you might want to implement a good ML model for what you want to do. If you&#39;re working with vectors, or if what you want to do is a classifier and your training data is labelled, or if you want to use the sklearn vectorizer on your data. But until you explain what you want to do and what you goal is, it will be really hard to give you a better answer. You told us you &quot;want to create an N-Gram model which will not work with &#39;English words&#39; &quot;. But, as I explained, it looks like what you need is not really related to n-grams, it must be something else. And we don&#39;t know what."}, {"owner": {"reputation": 531, "user_id": 2482833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXc6R.jpg?s=128&g=1", "display_name": "kayas", "link": "https://stackoverflow.com/users/2482833/kayas"}, "edited": false, "score": 0, "creation_date": 1544840342, "post_id": 53774094, "comment_id": 94429530, "body": "I edited the question. Please have a look at the updated version. Thanks."}], "tags": [], "owner": {"reputation": 91, "user_id": 9638957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7gApR.png?s=128&g=1", "display_name": "dahrs", "link": "https://stackoverflow.com/users/9638957/dahrs"}, "is_accepted": true, "score": 1, "last_activity_date": 1544809600, "last_edit_date": 1544809600, "creation_date": 1544766348, "answer_id": 53774094, "question_id": 53751241, "link": "https://stackoverflow.com/questions/53751241/create-a-n-gram-model-for-custom-vocabulary/53774094#53774094", "title": "Create a N-gram model for custom vocabulary", "body": "<p>Ok, I'm not sure of what you want to do exactly. But let's try anyway.</p>\n\n<p>First how do N-gram works:\nN-grams are -quite simple- predictors of the probability of a sequence. Since sentences are just sequences of words and words are just a sequence of characters, it generally works great for strings:</p>\n\n<p>Problem: you have a list of letters and you want to find out what would be the next letter in the sequence.</p>\n\n<pre><code>letterSequence = ['a', 'b', None] \n</code></pre>\n\n<p>If you have a bunch of letters in sequence, you can take note of what are those sequences:</p>\n\n<pre><code>training_data = ['a', 'b', 'c',\n             'a', 'b', 'c',\n             'a', 'b', 'd',\n             'a', 'b', 'f',\n             'b', 'c', 'd']\n</code></pre>\n\n<p>At first glance, you can see that the probability of having a sequence 'a','b','c' are twice greater than the probability of having 'a','b','d' or 'a','b','f'.\nWhat we're going to do is to count how many times a same sequence appears in training_data and select the one that appears more often.</p>\n\n<pre><code>def makeNestedDict(aDict, listOfKeys):\n    if len(listOfKeys) == 0: \n        if aDict != {}: return aDict\n        return 0\n    if listOfKeys[0] not in aDict:\n        aDict[listOfKeys[0]] = {}\n    aDict[listOfKeys[0]] = makeNestedDict(aDict[listOfKeys[0]], listOfKeys[1:])\n    return aDict\n\ndef makeCoreferenceDict(ressource):\n    #we'll use 3-grams but we could have chosen any n for n-grams\n    ngramDict = {}\n    index = 0\n    #we make sure we won't go further than the length of the list\n    while (index+2) &lt; len(ressource):\n        k1 = ressource[index]\n        k2 = ressource[index+1]\n        k3 = ressource[index+2]\n        ngramDict = makeNestedDict(ngramDict, [k1, k2, k3])            \n        ngramDict[k1][k2][k3] += 1 #counting\n        index += 1\n    return ngramDict\n\ndef predict(unkSequence, ngramDict):\n    import operator\n    corefDict = ngramDict[unkSequence[0]][unkSequence[1]]\n    return max(corefDict.items(), key=operator.itemgetter(1))\n\n############################################\nngramDict = makeCoreferenceDict(training_data)\n#the most common letter that follows 'a', 'b' is... \npredict(letterSequence, ngramDict)\n&gt;&gt;&gt; ('c', 2) #... is 'c' and it appears twice in the data\n</code></pre>\n\n<p>You can also get a prediction score instead of getting the most common element by replacing the line (in the makeCoreferenceDict function):</p>\n\n<pre><code>ngramDict[k1][k2][k3] += 1 #counting\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>ngramDict[k1][k2][k3] += 1.0/float(len(ressource)) #add to the score\n</code></pre>\n\n<p>so:</p>\n\n<pre><code>def showScore(unkSequence, ngramDict):\n    return ngramDict[unkSequence[0]][unkSequence[1]]\n\n############################################\nngramDict = makeCoreferenceDict(training_data)\n#the most common letter that follows 'a', 'b' is... \nshowScore(letterSequence, ngramDict)\n&gt;&gt;&gt; {'c': 0.13333333333333333, 'd': 0.06666666666666667, 'f': 0.06666666666666667}\n</code></pre>\n\n<p>NOW the n-gram method depends on having a finite set of elements (characters, words, natural numbers, etc.). Now, in YOUR example, \"vocabs\" and \"training_data\" have barely any numbers in common. And I think that what you really need, is to get a distance score between your words. I'm guessing that because of what you said: </p>\n\n<blockquote>\n  <p>In the example I wanted to show that, the training \"words\" (list of 3 number) are not exactly the same as the \"words\" in my vocabulary but they will be very close.</p>\n</blockquote>\n\n<p>In that case it gets a little too complicated to show it here but you might want to measure the distance between </p>\n\n<p>each number of each element in \"vocabs\" </p>\n\n<p>and </p>\n\n<p>each number of each element in each sequence in \"training_data\" </p>\n\n<p>and then compare them and choose the smaller score.</p>\n\n<p>If that's not the answer to your question, please reformulate or give us more examples.\nIn any case, good luck with that.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 9638957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7gApR.png?s=128&g=1", "display_name": "dahrs", "link": "https://stackoverflow.com/users/9638957/dahrs"}, "is_accepted": false, "score": 1, "last_activity_date": 1544927947, "creation_date": 1544927947, "answer_id": 53799004, "question_id": 53751241, "link": "https://stackoverflow.com/questions/53751241/create-a-n-gram-model-for-custom-vocabulary/53799004#53799004", "title": "Create a N-gram model for custom vocabulary", "body": "<p>In that case, you can definitely use n-grams. </p>\n\n<p>First let me make sure I understood:</p>\n\n<p>You have a vocabulary:</p>\n\n<blockquote>\n  <p>vocabs = [v0, v1, v2, v3, ........vn]</p>\n</blockquote>\n\n<p>and 2 sequence generators who take elements from your vocab and return a list of vocab sequences:</p>\n\n<blockquote>\n  <p>sg1 = [v0, v1, v2, v1, v3]\n  sg2 = [v2, v4, v6, v2, v8]</p>\n</blockquote>\n\n<p>Now, if I understand correctly, you want to use n-grams to artificially replicate and augment your sg1 and sg2 outputs:</p>\n\n<blockquote>\n  <p>ngramSg1 = [v0, v1, v3, v0, v1, v2, v1, v2, ...] \n  ngramSg2 = [v2, v4, v6, v2, v8, v2, v6, v2, ...] </p>\n</blockquote>\n\n<p>Then, you want to use an ML model to determine from what is the origin of the n-grams output (either SG1 or SG2). Am I right? Am I circling down on it?</p>\n\n<p>If it's like what I described, then you should be able to use the code I wrote on the previous answer or any n-gram library you want. NEVERTHELESS, if I understood correctly, your vocabulary is made of lists of numbers and not individual objects. If that's the case then you probably won't find any library who can handle that. It's way too specific. You might have to code your own version of n-gram-based sequence generator. </p>\n\n<p>However, your case looks kind of familiar to word embeddings (which are basically language processing algorithms that use vectors as a representation on words). If you don't already know about them you might want to check out gensim's <a href=\"https://radimrehurek.com/gensim/models/word2vec.html\" rel=\"nofollow noreferrer\">word2vec</a>, <a href=\"https://radimrehurek.com/gensim/models/doc2vec.html#gensim.models.doc2vec.Doc2Vec\" rel=\"nofollow noreferrer\">doc2vec</a> or <a href=\"https://radimrehurek.com/gensim/models/fasttext.html#gensim.models.fasttext.FastText\" rel=\"nofollow noreferrer\">fastText</a> and either adopt them or adapt them.</p>\n"}], "owner": {"reputation": 531, "user_id": 2482833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXc6R.jpg?s=128&g=1", "display_name": "kayas", "link": "https://stackoverflow.com/users/2482833/kayas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 53774094, "answer_count": 2, "score": 1, "last_activity_date": 1544927947, "creation_date": 1544648328, "last_edit_date": 1592644375, "question_id": 53751241, "link": "https://stackoverflow.com/questions/53751241/create-a-n-gram-model-for-custom-vocabulary", "title": "Create a N-gram model for custom vocabulary", "body": "<p>I want to create an N-Gram model which will not work with &quot;English words&quot;. I have a custom vocabulary list like below:</p>\n<blockquote>\n<p>vocabs = [ [0.364, 0.227, 0.376], [0.875, 0.785, 0.376], ........ ]</p>\n</blockquote>\n<p>What I am trying to say is, each element in my vocabs list needs to be considered as a &quot;word&quot; by the N-Gram models. And my training dataset will have some numbers exactly in the same format of my vocabs list, like below:</p>\n<blockquote>\n<p>training_data = [  [0.344, 0.219, 0.374], [0.846, 0.776, 0.376],  ........ ]</p>\n</blockquote>\n<p><strong>Note:</strong> In the example I wanted to show that, the training &quot;words&quot; (list of 3 number) are not exactly the same as the &quot;words&quot; in my vocabulary but they will be very close.</p>\n<p>Now, my question is, can I build an N-Gram model which can be trained using the training data? And later, use that model to predict the probability of a  new &quot;word&quot; as it comes.</p>\n<p>I am using python and can find a lot of N-Gram examples using the &quot;<strong>nltk</strong>&quot; library. But the problem is in most cases &quot;English words&quot; are used. As I am not very familiar with N-Grams, these examples made me confused. I will be very happy if anyone can answer my questions and/or point out some tutorials to learn N-Grams in general (not specific to NLP).</p>\n<p>Thanks.</p>\n<p><strong>Edit:</strong></p>\n<p>Just to simplify the question, I will try to explain it in a different way:\nI have a vocabulary like below:</p>\n<blockquote>\n<p>vocabs = [v1, v2, v3, ........vn]</p>\n</blockquote>\n<p>I also have two sequence generator(SG). Both of them generates a sequence of words from my vocabulary.</p>\n<p>My goal is to predict from the streaming data: which generator is currently generating the sequence(words).</p>\n<p>Now I want to build two N-gram models(one for each SG) using my labeled training data(I already have some labeled data from the SGs). Finally, when I feed my streaming data into the models and select the probable SG by comparing predictions from the N-gram models. Just to be clear if the N-gram model for SG1 gives higher probability than the N-gram model for SG2, I will decide that the current streaming data is generated by SG1.</p>\n<p>Hope the explanation helps to understand my concern. I really appreciate the effort to answer this question.</p>\n<p><strong>Note:</strong> If you know any other models that can solve this problem well (better than N-gram model), please mention them.</p>\n<p>Thanks.</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-forms"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1009643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de91fd796fae661be7c426c9d48183e?s=128&d=identicon&r=PG", "display_name": "bheat", "link": "https://stackoverflow.com/users/1009643/bheat"}, "edited": false, "score": 0, "creation_date": 1544717562, "post_id": 53751606, "comment_id": 94383712, "body": "That didn&#39;t seem to work, but I think I have more information to debug now.  After adding form_valid I noticed it is never called, so I added form_invalid and it is also never being called.  Like I mentioned in my original post get_initial and render are called, but nothing else.  So somehow the view doesn&#39;t know anything about the form apparently."}, {"owner": {"reputation": 13, "user_id": 1009643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de91fd796fae661be7c426c9d48183e?s=128&d=identicon&r=PG", "display_name": "bheat", "link": "https://stackoverflow.com/users/1009643/bheat"}, "edited": false, "score": 0, "creation_date": 1544722624, "post_id": 53751606, "comment_id": 94386400, "body": "I&#39;m going to accept this as an answer as it sent me down the rabbit hole I needed to fix, updating question with more details, thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9727749"}, "reply_to_user": {"reputation": 13, "user_id": 1009643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de91fd796fae661be7c426c9d48183e?s=128&d=identicon&r=PG", "display_name": "bheat", "link": "https://stackoverflow.com/users/1009643/bheat"}, "edited": false, "score": 0, "creation_date": 1544730903, "post_id": 53751606, "comment_id": 94390127, "body": "@bheat - Ok glad to help."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9727749"}, "is_accepted": true, "score": 0, "last_activity_date": 1544649963, "creation_date": 1544649963, "answer_id": 53751606, "question_id": 53751211, "link": "https://stackoverflow.com/questions/53751211/django-modelform-not-saving-to-db/53751606#53751606", "title": "Django ModelForm Not Saving to DB", "body": "<p>Try adding type=\"submit\" to your button:</p>\n\n<pre><code>&lt;button class=\"btn btn-primary\" type=\"submit\"&gt;Vote&lt;/button &gt;\n</code></pre>\n\n<p>and then in your CreateView add a form_valid method:</p>\n\n<pre><code>class CreateVote(LoginRequiredMixin, CreateView):\n    model = Vote\n    template_name = 'folder/create_vote.html'\n    form_class = VoteForm\n\n    ...\n\n    def form_valid(self, form):\n        vote = form.save(commit=False)\n        game = Game.objects.get(id=game_id)\n        vote.game = game\n        vote.save() # You have to save the vote for it to be added to the db.\n        return HttpResponseRedirect(reverse('redirect_view'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 1009643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de91fd796fae661be7c426c9d48183e?s=128&d=identicon&r=PG", "display_name": "bheat", "link": "https://stackoverflow.com/users/1009643/bheat"}, "is_accepted": false, "score": 0, "last_activity_date": 1544723148, "creation_date": 1544723148, "answer_id": 53767456, "question_id": 53751211, "link": "https://stackoverflow.com/questions/53751211/django-modelform-not-saving-to-db/53767456#53767456", "title": "Django ModelForm Not Saving to DB", "body": "<p>This had a painful solution, a simple typo.  In my GameDetail's get_context_data I setup data for the template to use, one of those fields was the url to post to</p>\n\n<pre><code>ctx['vote_from_url'] = vote_form_url\n</code></pre>\n\n<p>In the template when I attempted to reference this I misspelled it</p>\n\n<pre><code> action=\"{{ vote_form_url }}\" &gt;\n</code></pre>\n\n<p>The frustrating thing for me is that this does not come up with an error, in the template if I put anything it defaults to the url of the parent view.  I should have noticed that POST was going to the wrong URL, but I wonder if there is a setting or log that would have told me I was referencing something in the template that doesn't exist.  Hope this recap helps someone that get stuck in a similar situation.</p>\n"}], "owner": {"reputation": 13, "user_id": 1009643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de91fd796fae661be7c426c9d48183e?s=128&d=identicon&r=PG", "display_name": "bheat", "link": "https://stackoverflow.com/users/1009643/bheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 53751606, "answer_count": 2, "score": 0, "last_activity_date": 1544723148, "creation_date": 1544648170, "question_id": 53751211, "link": "https://stackoverflow.com/questions/53751211/django-modelform-not-saving-to-db", "title": "Django ModelForm Not Saving to DB", "body": "<p>I'm new to Django and having a hard time figuring out how to get a model form to save to my db.  I've been following some tutorials/books and spending a lot of time on SO and I just can't figure this piece out.  The book examples i'm following is creating an IMDB type website where a user can vote movie quality (changed to games for my example).</p>\n\n<p>python v. 3.6.7,\ndjango v. 2.1.3,\npostgres v. 2.2.2</p>\n\n<p>Here is the model i'm trying to store and the associated manager</p>\n\n<pre><code>class VoteManager(models.Manager):\n    def get_vote_or_unsaved_blank_vote(self, game, user):\n        try:\n            vote = Vote.objects.get(game=game, user=user)\n        return vote\n    except self.model.DoesNotExist:\n            vote = Vote(game=game, user=user)\n        return vote\n\nclass Vote(models.Model):\n    objects = VoteManager()\n\n    value = models.FloatField()\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    game = models.ForeignKey(Game, on_delete=models.CASCADE,)\n    voted_on = models.DateTimeField(auto_now=True)\n\n    class Meta:\n        unique_together = ('user', 'game')\n</code></pre>\n\n<p>Now the model form I am trying using to try and store this</p>\n\n<pre><code>class VoteForm(forms.ModelForm):\n    user = forms.ModelChoiceField(widget=forms.HiddenInput, queryset=get_user_model().objects.all(), disabled=True)\n    game = forms.ModelChoiceField(widget=forms.HiddenInput, queryset=Game.objects.all(), disabled=True)\n    value = forms.FloatField()\n\n    class Meta:\n        model = Vote\n        fields = ('user', 'game', 'value')\n</code></pre>\n\n<p>Template i'm using to display this information.</p>\n\n<pre><code>{% block main %}\n&lt;h1&gt;{{ object }}&lt;/h1&gt;\n&lt;p class=\"lead\"&gt;\n{{ object.summary }}\n&lt;/p&gt;\n{% endblock %}\n\n{% block sidebar %}\n {# rating div omitted #}\n  &lt;div&gt;\n    {% if vote_form %}\n      &lt;form\n          method=\"post\"\n          action=\"{{ vote_form_url }}\" &gt;\n        {% csrf_token %}\n        {{ vote_form.as_p }}\n        &lt;button\n            class=\"btn btn-primary\" &gt;\n          Vote\n        &lt;/button &gt;\n      &lt;/form &gt;\n    &lt;h3&gt;Score: {{ object.score|default_if_none:\"No score yet!\" }}&lt;/h3&gt;\n    {% else %}\n      &lt;p &gt;Log in to vote for this game&lt;/p &gt;\n    {% endif %}\n  &lt;/div &gt;\n{% endblock %}\n</code></pre>\n\n<p>Finally the views to combine all of these pieces</p>\n\n<pre><code>class GameDetail(DetailView):\n    queryset = Game.objects.all_with_related_persons_and_score()\n\n    def post(self, request, *args, **kwargs):\n        return redirect('core:CreateVote', game_id=kwargs['pk'])\n\n    def get_context_data(self, **kwargs):\n        ctx = super().get_context_data(**kwargs)\n        if self.request.user.is_authenticated:\n            vote = Vote.objects.get_vote_or_unsaved_blank_vote(game=self.object, user=self.request.user)\n            if vote.id:\n                vote_form_url = reverse('core:UpdateVote', kwargs={'game_id': vote.game.id, 'pk': vote.id})\n            else:\n                vote_form_url = reverse('core:CreateVote', kwargs={'game_id': self.object.id})\n            ctx['vote_form'] = VoteForm(instance=vote)\n            ctx['vote_from_url'] = vote_form_url\n        return ctx\n\nclass CreateVote(LoginRequiredMixin, CreateView):\n    form_class = VoteForm\n\n    def get_initial(self):\n        initial = super().get_initial()\n        initial['user'] = self.request.user.id\n        initial['game'] = self.kwargs['game_id']\n        return initial\n\n    def get_success_url(self):\n        print('never called?')\n        game_id = self.kwargs['game_id']\n        return reverse('core:GameDetail', kwargs={'pk': game_id})\n\n    def render_to_response(self, context, **response_kwargs):\n        game_id = self.kwargs['game_id']\n        game_detail_url = reverse('core:GameDetail', kwargs={'pk': game_id})\n        return redirect(to=game_detail_url)\n</code></pre>\n\n<p>My guess currently is that I just don't know how to get form from the template, many examples on here create the form when requested, the tutorial i've been following create the form in get_context_data, then pass it off to the template.  So i've been struggling to figure out how to save or validate if the form is correct.</p>\n\n<p>Sorry for all the text, but these pieces are so interconnected I wanted to make sure I included everything that would be useful.  Displaying and reading from the db seem to work, if I manually go in and add votes through the admin panel I can read them successfully, when trying to write a new score through the vote button nothing happens, below is what the terminal window outputs.</p>\n\n<pre><code>[12/Dec/2018 20:24:34] \"GET /game/85 HTTP/1.1\" 200 2081\n[12/Dec/2018 20:46:49] \"POST /game/85 HTTP/1.1\" 302 0\n[12/Dec/2018 20:46:49] \"GET /game/vote/85/create HTTP/1.1\" 302 0\n[12/Dec/2018 20:46:49] \"GET /game/85 HTTP/1.1\" 200 2081\n</code></pre>\n\n<p>Oh maybe the url patterns might be useful.</p>\n\n<pre><code>app_name = 'core'\nurlpatterns = [\n    path('', views.MainPage.as_view(), name='MainPage'),\n    path('games', views.GameList.as_view(), name='GameList'),\n    path('game/&lt;int:pk&gt;', views.GameDetail.as_view(), name='GameDetail'),\n    path('game/vote/&lt;int:game_id&gt;/create', views.CreateVote.as_view(), name='CreateVote'),\n    path('game/vote/&lt;int:game_id&gt;/update/&lt;int:pk&gt;', views.UpdateVote.as_view(), name='UpdateVote'),\n]\n</code></pre>\n\n<p>Thanks in advance, i've been beating my head against the wall on this one for a while.</p>\n"}, {"tags": ["python", "amazon-web-services", "boto3"], "comments": [{"owner": {"reputation": 137816, "user_id": 13070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pio3A.jpg?s=128&g=1", "display_name": "Mark B", "link": "https://stackoverflow.com/users/13070/mark-b"}, "edited": false, "score": 0, "creation_date": 1544649312, "post_id": 53751203, "comment_id": 94355572, "body": "<a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html#SSM.Client.describe_parameters\" rel=\"nofollow noreferrer\">boto3.amazonaws.com/v1/documentation/api/latest/reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 9115027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da70152a8c6ad0a1822fc6fae96f3a8?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/9115027/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1544654441, "creation_date": 1544654441, "answer_id": 53752477, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/53752477#53752477", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>There's no ListParameters only DescribeParameter, which lists all the paremeters, or you can set filters.</p>\n\n<p>Boto3 Docs Link:\n<a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html#SSM.Client.describe_parameters\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html#SSM.Client.describe_parameters</a></p>\n\n<p>AWS API Documentation Link:\n<a href=\"https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribeParameters.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribeParameters.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10671338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe31b32ec1f1457bf44d1818add238d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rammy", "link": "https://stackoverflow.com/users/10671338/rammy"}, "edited": false, "score": 0, "creation_date": 1544718736, "post_id": 53753993, "comment_id": 94384416, "body": "get_parameters() lists only one parameter and get_parameters_by_path() have a limitation of only 10 parameters."}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 21, "user_id": 10671338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe31b32ec1f1457bf44d1818add238d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rammy", "link": "https://stackoverflow.com/users/10671338/rammy"}, "edited": false, "score": 2, "creation_date": 1544738293, "post_id": 53753993, "comment_id": 94393196, "body": "How about <code>describe_parameters()</code>?"}, {"owner": {"reputation": 21, "user_id": 10671338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe31b32ec1f1457bf44d1818add238d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rammy", "link": "https://stackoverflow.com/users/10671338/rammy"}, "edited": false, "score": 0, "creation_date": 1544816025, "post_id": 53753993, "comment_id": 94423210, "body": "describe_parameters() can list max of 50 parameters"}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 21, "user_id": 10671338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe31b32ec1f1457bf44d1818add238d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rammy", "link": "https://stackoverflow.com/users/10671338/rammy"}, "edited": false, "score": 1, "creation_date": 1544844887, "post_id": 53753993, "comment_id": 94430088, "body": "You can paginate <code>describe_parameters()</code>. &quot;You can specify the NextToken in a subsequent call to get the next set of results.&quot;"}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1544666221, "creation_date": 1544666221, "answer_id": 53753993, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/53753993#53753993", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>You can use <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html#SSM.Client.get_parameters\" rel=\"nofollow noreferrer\"><code>get_parameters()</code></a> and <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html#SSM.Client.get_parameters_by_path\" rel=\"nofollow noreferrer\"><code>get_parameters_by_path()</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 596, "user_id": 3126337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c763d40dc8f62c1829c050057639111?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Vrabel", "link": "https://stackoverflow.com/users/3126337/lukas-vrabel"}, "is_accepted": false, "score": 7, "last_activity_date": 1566058761, "creation_date": 1566058761, "answer_id": 57537984, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/57537984#57537984", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>For those who wants to just copy-paste the code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import boto3\nssm = boto3.client('ssm')\nparameters = ssm.describe_parameters()['Parameters']\n</code></pre>\n\n<p>Beware of the limit of max 50 parameters!</p>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 7747988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHOW3.jpg?s=128&g=1", "display_name": "Bob White", "link": "https://stackoverflow.com/users/7747988/bob-white"}, "edited": false, "score": 0, "creation_date": 1581571690, "post_id": 60200756, "comment_id": 106481486, "body": "please consider making an explanation of the solution that you&#39;ve provided."}], "tags": [], "owner": {"reputation": 51, "user_id": 12889782, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RxClXvifsnQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regOWLJsU7ruCF4Uq_MXS1wOoY2aw/photo.jpg?sz=128", "display_name": "Val Lapidus", "link": "https://stackoverflow.com/users/12889782/val-lapidus"}, "is_accepted": false, "score": 4, "last_activity_date": 1581573436, "last_edit_date": 1581573436, "creation_date": 1581569965, "answer_id": 60200756, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/60200756#60200756", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>Since no one has answered:</p>\n\n<pre><code>    def get_resources_from(ssm_details):\n        results = ssm_details['Parameters']\n        resources = [result for result in results]\n        next_token = ssm_details.get('NextToken', None)\n        return resources, next_token\n\n    def main()\n        config = boto3.client('ssm', region_name='us-east-1')\n        next_token = ' '\n        resources = []\n        while next_token is not None:\n            ssm_details = config.describe_parameters(MaxResults=50, NextToken=next_token)\n            current_batch, next_token = get_resources_from(ssm_details)\n            resources += current_batch\n        print(resources)\n        print('done')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 8131548, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nNVHfnLkan8/AAAAAAAAAAI/AAAAAAAAAJw/rbRDZbTzXuY/photo.jpg?sz=128", "display_name": "Kalim", "link": "https://stackoverflow.com/users/8131548/kalim"}, "is_accepted": false, "score": 0, "last_activity_date": 1598017469, "creation_date": 1598017469, "answer_id": 63524059, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/63524059#63524059", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>You can use get_paginator api. find below example, In my use case i had to get all the values of SSM parameter store and wanted to compare it with a string.</p>\n<pre><code>import boto3\nimport sys\n\nLBURL = sys.argv[1].strip()\nclient = boto3.client('ssm')\np = client.get_paginator('describe_parameters')\npaginator = p.paginate().build_full_result()\nfor page in paginator['Parameters']:\n    response = client.get_parameter(Name=page['Name'])\n    value = response['Parameter']['Value']\n    if LBURL in value:\n        print(&quot;Name is: &quot; + page['Name'] + &quot; and Value is: &quot; + value)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 585217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbbf9ad46679dc4837ac61338f208a9f?s=128&d=identicon&r=PG", "display_name": "BogeyMan", "link": "https://stackoverflow.com/users/585217/bogeyman"}, "is_accepted": false, "score": 1, "last_activity_date": 1602108060, "last_edit_date": 1602108060, "creation_date": 1602101715, "answer_id": 64251677, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there/64251677#64251677", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p>One of the responses from above/below(?) (by <a href=\"https://stackoverflow.com/users/12889782/val-lapidus\">Val Lapidas</a>) inspired me to expand it to this (as his solution doesn't get the SSM parameter value, and some other, additional details).</p>\n<p>The downside here is that the AWS function <code>client.get_parameters()</code> only allows 10 names per call.</p>\n<p>There's one referenced function call in this code (<code>to_pdatetime(...)</code>) that I have omitted - it just takes the <code>datetime</code> value and makes sure it is a &quot;naive&quot; datetime. This is because I am ultimately dumping this data to an Excel file using <code>pandas</code>, which doesn't deal well with timezones.</p>\n<pre class=\"lang-py prettyprint-override\"><code>from typing import List, Tuple\nfrom boto3 import session\nfrom mypy_boto3_ssm import SSMClient\n\ndef ssm_params(aws_session: session.Session = None) -&gt; List[dict]:\n    &quot;&quot;&quot;\n    Return a detailed list of all the SSM parameters.\n    &quot;&quot;&quot;\n    \n    # -------------------------------------------------------------\n    #\n    #\n    # -------------------------------------------------------------\n    def get_parameter_values(ssm_client: SSMClient,  ssm_details: dict) -&gt; Tuple[list, str]:\n        &quot;&quot;&quot;\n        Retrieve additional attributes for the SSM parameters contained in the 'ssm_details'\n        dictionary passed in.\n        &quot;&quot;&quot;\n        # Get the details\n        ssm_param_details = ssm_details['Parameters']\n\n        # Just the names, ma'am\n        param_names = [result['Name'] for result in ssm_param_details]\n\n        # Get the parames, including the values\n        ssm_params_with_values = ssm_client.get_parameters(Names=param_names,\n                                                           WithDecryption=True)\n        resources = []\n\n        result: dict\n        for result in ssm_params_with_values['Parameters']:\n\n            # Get the matching parameter from the `ssm_details` dict since this has some of the fields\n            # that aren't in the `ssm_params_with_values` returned from &quot;get_arameters&quot;.\n            param_details = next((zz for zz in ssm_param_details if zz.get('Name', None) == result['Name']), {})\n\n            param_policy = param_details.get('Policies', None)\n            if len(param_policy) == 0:\n                param_policy = None\n\n            resources.append({\n                    'Name': result['Name'],\n                    'LastModifiedDate': to_pdatetime(result['LastModifiedDate']),\n                    'LastModifiedUser': param_details.get('LastModifiedUser', None),\n                    'Version': result['Version'],\n                    'Tier': param_details.get('Tier', None),\n                    'Policies': param_policy,\n                    'ARN': result['ARN'],\n                    'DataType': result.get('DataType', None),\n                    'Type': result.get('Type', None),\n                    'Value': result.get('Value', None)\n                    })\n\n        next_token = ssm_details.get('NextToken', None)\n        return resources, next_token\n\n    # -------------------------------------------------------------\n    #\n    #\n    # -------------------------------------------------------------\n    if aws_session is None:\n        raise ValueError('No session.')\n\n    # Create SSM client\n    aws_ssm_client = aws_session.client('ssm')\n\n    next_token = ' '\n    ssm_resources = []\n\n    while next_token is not None:\n        # The &quot;describe_parameters&quot; call gets a whole lot of info on the defined SSM params,\n        # except their actual values. Due to this limitation let's call the nested function\n        # to get the values, and a few other details. \n        ssm_descriptions = aws_ssm_client.describe_parameters(MaxResults=10,\n                                                              NextToken=next_token)\n\n        # This will get additional details for the params, including values.\n        current_batch, next_token = get_parameter_values(ssm_client=aws_ssm_client,\n                                                         ssm_details=ssm_descriptions)\n        ssm_resources += current_batch\n\n    print(f'SSM Parameters: {len(ssm_resources)}')\n    return ssm_resources\n</code></pre>\n<p><a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a><a href=\"/questions/tagged/aws\" class=\"post-tag\" title=\"show questions tagged &#39;aws&#39;\" rel=\"tag\">aws</a><a href=\"/questions/tagged/boto3\" class=\"post-tag\" title=\"show questions tagged &#39;boto3&#39;\" rel=\"tag\">boto3</a><a href=\"/questions/tagged/amazon-web-services\" class=\"post-tag\" title=\"show questions tagged &#39;amazon-web-services&#39;\" rel=\"tag\">amazon-web-services</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10671338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe31b32ec1f1457bf44d1818add238d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rammy", "link": "https://stackoverflow.com/users/10671338/rammy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6034, "favorite_count": 1, "answer_count": 6, "score": 1, "last_activity_date": 1602108060, "creation_date": 1544648131, "last_edit_date": 1544666079, "question_id": 53751203, "link": "https://stackoverflow.com/questions/53751203/how-can-we-list-all-the-parameters-in-the-aws-parameter-store-using-boto3-there", "title": "How can we list all the parameters in the aws parameter store using Boto3? There is no ssm.list_parameters in boto3 documentation?", "body": "<p><a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm.html\" rel=\"nofollow noreferrer\">SSM \u2014 Boto 3 Docs 1.9.64 documentation</a></p>\n\n<p><code>get_parameters</code> doesn't list all parameters?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544648166, "post_id": 53751189, "comment_id": 94355100, "body": "<code>for i, x in enumerate(list_of_names): results[name].append(i+1)</code> ???"}], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544648358, "post_id": 53751215, "comment_id": 94355175, "body": "Never knew that you could specify a starting position for <code>enumerate</code>. Good stuff."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1544648187, "creation_date": 1544648187, "answer_id": 53751215, "question_id": 53751189, "link": "https://stackoverflow.com/questions/53751189/appending-a-list-in-a-dictionary-with-a-value-of-index-of-a-list/53751215#53751215", "title": "Appending a list in a dictionary with a value of index of a list", "body": "<p>yes. One line with dictionary comprehension and <code>enumerate</code> starting at 1:</p>\n\n<pre><code>list_of_names = ['Bob', 'Alice', 'Clare', 'Eva', 'Dennis']\n\nresults = {name:[i] for i,name in enumerate(list_of_names,1)}\n\n\n&gt;&gt;&gt; results\n{'Alice': [2], 'Bob': [1], 'Clare': [3], 'Dennis': [5], 'Eva': [4]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 0, "last_activity_date": 1544648534, "creation_date": 1544648534, "answer_id": 53751286, "question_id": 53751189, "link": "https://stackoverflow.com/questions/53751189/appending-a-list-in-a-dictionary-with-a-value-of-index-of-a-list/53751286#53751286", "title": "Appending a list in a dictionary with a value of index of a list", "body": "<p>If you want to use the existing list inside the dict</p>\n\n<pre><code>results = {\"Alice\":[], \"Bob\":[], \"Clare\":[], \"Dennis\":[], \"Eva\":[]}\nlist_of_names = ['Bob', 'Alice', 'Clare', 'Eva', 'Dennis']\nfor i,j in enumerate(list_of_names,1):\n    results[j].append(i)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10780485, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XNmx8c_y0oo/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jbD8vZzbU1HyMIbME0QozmwWBePg/mo/photo.jpg?sz=128", "display_name": "biner1999", "link": "https://stackoverflow.com/users/10780485/biner1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 53751215, "answer_count": 2, "score": 1, "last_activity_date": 1544648534, "creation_date": 1544648075, "question_id": 53751189, "link": "https://stackoverflow.com/questions/53751189/appending-a-list-in-a-dictionary-with-a-value-of-index-of-a-list", "title": "Appending a list in a dictionary with a value of index of a list", "body": "<p>I have a dictionary and a list:</p>\n\n<pre><code>results = {\"Alice\":[], \"Bob\":[], \"Clare\":[], \"Dennis\":[], \"Eva\":[]}\nlist_of_names = ['Bob', 'Alice', 'Clare', 'Eva', 'Dennis']\n</code></pre>\n\n<p>and I want to fill those lists with a value of index+1 accordingly.\nSo that if we have the list above the dictionary would look like this</p>\n\n<pre><code>results = {\"Alice\":[2], \"Bob\":[1], \"Clare\":[3], \"Dennis\":[5], \"Eva\":[4]}\n</code></pre>\n\n<p>this is my current code</p>\n\n<pre><code>Aindex = list_of_names.index(\"Alice\")\nBindex = list_of_names.index(\"Bob\")\nCindex = list_of_names.index(\"Clare\")\nDindex = list_of_names.index(\"Dennis\")\nEindex = list_of_names.index(\"Eva\")\nAindex = Aindex + 1\nBindex = Bindex + 1\nCindex = Cindex + 1\nDindex = Dindex + 1\nEindex = Eindex + 1\nresults[\"Alice\"].append(Aindex)\nresults[\"Bob\"].append(Bindex)\nresults[\"Clare\"].append(Cindex)\nresults[\"Dennis\"].append(Dindex)\nresults[\"Eva\"].append(Eindex)\n</code></pre>\n\n<p>Is there any way to shorten this code and make it work for any amount of dictionary/list entries?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1544648101, "post_id": 53751180, "comment_id": 94355075, "body": "so what doesn&#39;t work exactly?"}, {"owner": {"reputation": 356, "user_id": 10772072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb79441d39cbdf6cd725ecfa1d42c65?s=128&d=identicon&r=PG&f=1", "display_name": "Xion", "link": "https://stackoverflow.com/users/10772072/xion"}, "edited": false, "score": 4, "creation_date": 1544648319, "post_id": 53751180, "comment_id": 94355162, "body": "Your indentation is off, please edit your code again"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1544648509, "post_id": 53751180, "comment_id": 94355236, "body": "I&#39;m not sure that &quot;please help me debug my homework&quot; is an on-topic question on Stack Overflow. Could you focus it more? At the very least, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Debugging is an important skill that should be learned by practice rather than outsourced to Stack Overflow."}, {"owner": {"reputation": 7, "user_id": 10554869, "user_type": "registered", "profile_image": "https://graph.facebook.com/957543354430170/picture?type=large", "display_name": "Milo Del Campo", "link": "https://stackoverflow.com/users/10554869/milo-del-campo"}, "edited": false, "score": 0, "creation_date": 1544649002, "post_id": 53751180, "comment_id": 94355440, "body": "what doesn&#39;t work is that the numbers don&#39;t appear and they don&#39;t stay when the user gets a match"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544653655, "post_id": 53751180, "comment_id": 94357460, "body": "You break out of the loop when the user finds a single match. The game needs to keep going until they find all the matches."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544653695, "post_id": 53751180, "comment_id": 94357476, "body": "You don&#39;t display the numbers at all when they enter something that doesn&#39;t match. You need an <code>else:</code> block for that."}], "answers": [{"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1544654560, "creation_date": 1544654560, "answer_id": 53752502, "question_id": 53751180, "link": "https://stackoverflow.com/questions/53751180/how-can-i-get-this-python-memory-game-to-work/53752502#53752502", "title": "How can I get this python memory game to work", "body": "<p>Some suggestions for your code:</p>\n\n<ol>\n<li>Since you display the board so often, you may want to write a separate function that takes the variable <code>visual</code> as input and prints the content.  Then you can just call the function instead of writing all of those <code>print</code> statements.</li>\n<li>In your current code, you only display the cards when there's a match.  One of the whole strategies for playing a memory game is that if you overturn two cards and see \"5\" and \"2\" for example, it's not a match, but if you overturn a new pair of cards and one of them is another \"5\", you might remember where that first \"5\" was you overturned in your previous turn and thus know how to make a match.  So perhaps you should do this: update and display <code>visual</code> after selecting the first card, then do the same with the second card.  If there's a match, then leave <code>visual</code> as is.  If they don't match, then replace the two spots back with 'X' and go back to the top of the loop. </li>\n<li>Your code seems to consider a single match a \"win\".  Shouldn't it be considered won once all of the cards have been matched?  In this case, you can follow up the previous step by checking to see if 'X' shows up anywhere in <code>visual</code>.  If it doesn't, then that means all of the cards have been uncovered, thus the player has won.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 10782802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752c174765f97472b3bc279949a668a7?s=128&d=identicon&r=PG&f=1", "display_name": "rLevv", "link": "https://stackoverflow.com/users/10782802/rlevv"}, "is_accepted": false, "score": 1, "last_activity_date": 1544655851, "creation_date": 1544655851, "answer_id": 53752732, "question_id": 53751180, "link": "https://stackoverflow.com/questions/53751180/how-can-i-get-this-python-memory-game-to-work/53752732#53752732", "title": "How can I get this python memory game to work", "body": "<p>Here are the discrete steps in the game as I understand it:</p>\n\n<ol>\n<li>Initialize the board and data.</li>\n<li>Shuffle the data</li>\n<li>Enter Loop</li>\n<li>Print the board</li>\n<li>Ask user for their first guess</li>\n<li>Ask user for their second guess</li>\n<li>Print the board with reveals</li>\n<li>Cover them back up if user missed</li>\n<li>Check win condition (everything revealed?)</li>\n<li>Loop back or print win</li>\n</ol>\n\n<p>Your code successfully initializes the board (step 1), shuffles the data (2), enter loop (3), prints board (4), and asks for the guesses (5)(6).</p>\n\n<p>Here is some guidance on the pieces you are missing:</p>\n\n<ul>\n<li><p>After you get the inputs, you always want to print the board with the reveals (7). To do this you need to update visuals first with the piece you have written: </p>\n\n<pre><code>visual[user_input_1][user_input_2] = str(data[user_input_1][user_input_2])\nvisual[user_input_3][user_input_4] = str(data[user_input_3][user_input_4])\n</code></pre>\n\n<p>and then print your visuals. This does not need to happen with an if statement, because you always want to do a print of the revealed board.</p></li>\n<li><p>Afterwards, you want to do the swap back to X's if the user misses (8). You have this condition already basically written. You need to check if it's a miss in the data board and swap those visuals back to X's if true:</p>\n\n<pre><code>    if data[user_input_1][user_input_2] != data[user_input_3][user_input_4]:\n        visual[user_input_1][user_input_2] = 'X'\n        visual[user_input_3][user_input_4] = 'X'\n</code></pre>\n\n<p>Side Note: Ideally, you want to clear the previous board print of the reveals to test memory. This part is kind of tricky. There are no simple ways to clear the print of the reveals without using operating system commands which are almost certainly beyond the scope of your class. I would check with your teacher about expectations around flipping back over. </p>\n\n<p>If you are <em>interested</em> in how this is achievable using operating system command in Python <a href=\"https://stackoverflow.com/questions/4810537/how-to-clear-the-screen-in-python\">here</a> is a relevant StackOverflow post. You would need to import os and import time. After you print reveal, use <a href=\"https://docs.python.org/3/library/time.html#time.sleep\" rel=\"nofollow noreferrer\">time.sleep(number_of_seconds)</a> to give the user however many seconds to try to memorize placements and then use os.system('clear') for linux/mac os or os.system('CLS') for windows to clear the screen. <strong>Again, it's very unlikely that this is what your teacher is looking for.</strong></p></li>\n<li><p>Now let's deal with the win condition (9). Currently you are using a \"while True:\" with a break. While this may be functional in this case, using \"while True:\" should be almost always avoided (there are many reasons why-- <a href=\"https://stackoverflow.com/questions/390481/is-while-true-with-break-bad-programming-practice\">here</a> is a post that addresses one reason). Loop structures like \"while\", \"do-while\", and \"for\" have built-in stopping conditions which will be checked each time you loop. In this program, your stopping condition is that the board is completely revealed (that is how you know the game is over and user no longer needs to guess). So, until this happens you want your while loop to keep going. This looks like this:</p>\n\n<pre><code>    while #win condition is not met#:\n        #stuff you want to loop#\n    #congrats, you have met your win condition# \n</code></pre></li>\n<li><p>There are multiple ways to check your win condition is not yet met. One option is that you know you have not won yet if the visual board is still not the same as data board:</p>\n\n<pre><code>    while visuals != data:\n        #stuff you want to loop#\n    print(congrats....)\n</code></pre></li>\n</ul>\n\n<p>In summary, TLDR:</p>\n\n<pre><code>import random\nvisuals = [...]\ndata = [...]\n    #shuffle\n    while visuals != data:\n        #print visuals\n        #get input\n        #update the inputted visuals with reveals\n        #print visuals with reveals\n        if #not a match:\n            #update the inputted visuals back to X's\n    print(\"Congratulations you won the game!\")\n</code></pre>\n\n<p>There are a handful of smaller points that could improve your code as well if you're interested: be very vigilant about indents, a do-while loops is more appropriate here (can you think of why?), you can write functions and loops that reduce a lot of the repeating code (like when you print the visuals). But this should be enough for you to grapple with.</p>\n"}], "owner": {"reputation": 7, "user_id": 10554869, "user_type": "registered", "profile_image": "https://graph.facebook.com/957543354430170/picture?type=large", "display_name": "Milo Del Campo", "link": "https://stackoverflow.com/users/10554869/milo-del-campo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1544655851, "creation_date": 1544648041, "last_edit_date": 1544648232, "question_id": 53751180, "link": "https://stackoverflow.com/questions/53751180/how-can-i-get-this-python-memory-game-to-work", "title": "How can I get this python memory game to work", "body": "<p>This is the code I have so far, my teacher wants the game to \"flip the X's over\" when you guess a number and when they match the numbers stay but when the numbers are different the numbers \"flip back over\" and become X's again. And he wants the game to say that \"you win\" when all the numbers have been exposed.</p>\n\n<pre><code>import random\n\nvisual=[['X','X','X','X','X'],['X','X','X','X','X'],['X','X','X','X','X'],['X','X','X','X','X'],['X','X','X','X','X']]\ndata=[[1,2,3,4,5],[1,2,3,4,5],[1,2,3,4,5],[1,2,3,4,5],[1,2,3,4,5]]\n\n\nrandom.shuffle(data[0])\nrandom.shuffle(data[1])\nrandom.shuffle(data[2])\nrandom.shuffle(data[3])\nrandom.shuffle(data[4])\n\n\nwhile True:\n\n\nprint(visual[0])\nprint(visual[1])\nprint(visual[2])\nprint(visual[3])\nprint(visual[4])\n\n\n   user_input_1 = int(input('enter a number 0 thru 4 to pick your first X position: '))\n\n    user_input_2 = int(input('enter a number 0 thru 4 to pick your first Y position: '))\n    user_input_3 = int(input('enter a number 0 thru 4 to pick your second X position: '))\n\n\nuser_input_4 = int(input('enter a number 0 thru 4 to pick your second Y position: '))\n\n\nif data[user_input_1][user_input_2] == data[user_input_3][user_input_4]:\n    visual[user_input_1][user_input_2] = str(data[user_input_1][user_input_2])\n    visual[user_input_3][user_input_4] = str(data[user_input_3][user_input_4])\n\n    print(visual[0])\n    print(visual[1])\n    print(visual[2])\n    print(visual[3])\n    print(visual[4])\n    print('Congratulations you won the game!')\n    break\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "loops", "lambda", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1544647843, "post_id": 53751106, "comment_id": 94354979, "body": "change to <code>b.clicked.connect(lambda checked, x=string: self.func(x))</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1544647926, "post_id": 53751106, "comment_id": 94355020, "body": "the QPushButton signal by default has an argument called checked which is by default false and that is the cause of the problem."}, {"owner": {"reputation": 2244, "user_id": 3620725, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/749c22fd1dcdd6dee46a001ed2ce140c?s=128&d=identicon&r=PG&f=1", "display_name": "Esostack", "link": "https://stackoverflow.com/users/3620725/esostack"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1544648251, "post_id": 53751106, "comment_id": 94355131, "body": "Oh okay that explains it, thanks! Didn&#39;t see that other question before posting"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1544648328, "post_id": 53751106, "comment_id": 94355164, "body": "There are many similar questions (which I have closed as a duplicate), it is a very common problem."}], "owner": {"reputation": 2244, "user_id": 3620725, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/749c22fd1dcdd6dee46a001ed2ce140c?s=128&d=identicon&r=PG&f=1", "display_name": "Esostack", "link": "https://stackoverflow.com/users/3620725/esostack"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1544647817, "answer_count": 0, "score": 0, "last_activity_date": 1544647683, "creation_date": 1544647683, "question_id": 53751106, "link": "https://stackoverflow.com/questions/53751106/create-lambda-functions-in-a-loop-for-pyqt5-signals", "closed_reason": "Duplicate", "title": "Create lambda functions in a loop for PyQt5 Signals?", "body": "<p>I'm trying to connect a function to buttons created inside a loop, with a different argument for the function for each button. This is my attempt:</p>\n\n<pre><code>from PyQt5 import QtWidgets, QtGui, QtCore\n\nclass GUI(QtWidgets.QWidget):\n\n    def __init__(self):\n        super().__init__()\n        layout = QtWidgets.QVBoxLayout()\n        self.setLayout(layout)\n        self.show()\n        for num in range(5):\n            b = QtWidgets.QPushButton(str(num))\n            string = f\"You clicked button {num}!\"\n            b.clicked.connect(lambda x=string: self.func(x))\n            layout.addWidget(b)\n\n    def func(self, thing):\n        print(thing)\n\n\napp = QtWidgets.QApplication([])\nwin = GUI()\napp.exec_()\n</code></pre>\n\n<p>This creates a GUI with 5 buttons, but clicking them just prints \"False\" to the console.</p>\n\n<p>Initially I had <code>connect(lambda: self.func(string))</code> which caused each button to print <code>You clicked button 4!</code> because of this:\n<a href=\"https://docs.python.org/3/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result\" rel=\"nofollow noreferrer\">https://docs.python.org/3/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result</a></p>\n\n<p>But I have no idea why it's now passing False. I tried using the same functions and logic outside of PyQt as below and that successfully printed 0 1 2 3 4 to the console.</p>\n\n<pre><code>func_list = []\nfor num in range(5):\n    func_list.append(lambda x=num: func(x))\n\ndef func(thing):\n    print(thing)\n\nfor f in func_list:\n    f()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544649188, "post_id": 53751079, "comment_id": 94355517, "body": "What does &quot;external variable&quot; mean to you in this context? Is there a reason you <i>don&#39;t</i> want to use signals? (ctrl+c sends one kind of signal, but you could also use SIGUSR1 and SIGUSR2 to do other controls, or just rely on SIGSTOP to pause and SIGCONT to continue, which they&#39;ll already do out-of-the-box with no code changes needed)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544649257, "post_id": 53751079, "comment_id": 94355548, "body": "If by &quot;external variable&quot; you&#39;re referring to shell or environment variables, that won&#39;t work, since each program gets its own independent copy of those on creation. But it&#39;s not clear what you <i>do</i> mean by the term."}, {"owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544649575, "post_id": 53751079, "comment_id": 94355665, "body": "hey @CharlesDuffy the variable i&#39;m referring to in my code is &quot;loop&quot; which i am defining in the function with loop = int(args[0]) this value will always be zero or one and is toggled through when i press the button on touch osc which sends the message to the &quot;/3/playall&quot; defined in the message handler. sorry for my bad terminology, hopefully you can understand what im getting at"}, {"owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544649734, "post_id": 53751079, "comment_id": 94355719, "body": "essentially, i want the plalist to loop through when the button is on (loop == 1) and to stop when its off (loop == 0)"}, {"owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544649813, "post_id": 53751079, "comment_id": 94355756, "body": "re: Signals - the reason is that i dont know about them as im a total n00b. if you can elaborate that would be great, otherwise i will try google that and see if i can make sense of it."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544650684, "post_id": 53751079, "comment_id": 94356144, "body": "One approach to solving this would be to set <code>loop=1</code> when SIGUSR1 is received, and <code>loop=0</code> when SIGUSR2 is received. See the example in <a href=\"https://docs.python.org/2/library/signal.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/signal.html</a> setting a handler for SIGALARM -- you can follow that same pattern for different signals."}, {"owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1544651869, "post_id": 53751079, "comment_id": 94356697, "body": "I had a look at the example but it doesn&#39;t make a lot of sense to me yet, will give it a crack with fresh eyes tomorrow. Thanks Charles"}, {"owner": {"reputation": 608, "user_id": 10372350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8547a5f16e173ef6abc35ac24f01cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Vitor SRG", "link": "https://stackoverflow.com/users/10372350/vitor-srg"}, "edited": false, "score": 0, "creation_date": 1544668602, "post_id": 53751079, "comment_id": 94361202, "body": "If the control of your program is most of the time kept by either your <code>popen</code> or <code>time.sleep</code>, you&#39;ll hardly ever listen to any event with <code>handle_request</code>. I suggest using <code>threading</code> or <code>multiprocessing</code> to effectively verify whether the user is causing the event in a second task."}, {"owner": {"reputation": 521, "user_id": 317165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4f8d862196b94a62b8278f4d74a85d?s=128&d=identicon&r=PG", "display_name": "Win", "link": "https://stackoverflow.com/users/317165/win"}, "edited": false, "score": 0, "creation_date": 1544672518, "post_id": 53751079, "comment_id": 94362068, "body": "How does the message to stop the loop come in to your system? And with the OSC library you are using, does the library automatically run your playall function asynchronously, or does it expect to run a request to completion before anything else happens? My guess would be that the library would give you the facilities you need for this, without having to do your own multithreading or handling signals from the OS or anything like that. What OSC library are you using?"}, {"owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "reply_to_user": {"reputation": 521, "user_id": 317165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4f8d862196b94a62b8278f4d74a85d?s=128&d=identicon&r=PG", "display_name": "Win", "link": "https://stackoverflow.com/users/317165/win"}, "edited": false, "score": 0, "creation_date": 1544722566, "post_id": 53751079, "comment_id": 94386375, "body": "Thanks very much @Win ! That was the key to the solution, I&#39;m using the pyosc library which indeed includes a threading handler, so I just switched to using a threaded osc server and everything now works as it should :) I&#39;ll post the code shortly incase anyone comes across the same issue"}], "owner": {"reputation": 11, "user_id": 10782868, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156911275449948/picture?type=large", "display_name": "Josh McAuliffe", "link": "https://stackoverflow.com/users/10782868/josh-mcauliffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544650465, "creation_date": 1544647565, "last_edit_date": 1544650465, "question_id": 53751079, "link": "https://stackoverflow.com/questions/53751079/how-to-interrupt-and-stop-a-running-process-using-external-variable", "title": "How to interrupt and stop a running process using external variable", "body": "<p>I am very new to python and code in general so please bear with me.</p>\n\n<p>I have a bit of code that runs through and plays a list of files (like it would on an itunes playlist for example.) I need to be able to stop and restart the loop by toggling a button / variable that is sent from touchosc.</p>\n\n<p>The loop will trigger and run through just fine, but I cannot get it to stop without hitting ctrl-c. The issue seems to be that when the loop is running, my program will not update the \"loop\" variable with the new value, so as to stop the process when it is changed to 0. I have tried and failed using a number of different methods to get it to work. These have included while-looping and threading (way over my head). If anyone can please point me in the right direction it would be very appreciated! Also please excuse my hacky code -- the r, s, sp and sr flags are there mainly for another part of the program that is working, so i can make sure to kill the processes when i record or trigger different playfiles, to avoid overloading the cpu and also avoid feedback if i were to record to and play back from the same file simultaneously. If you have pointers on how to make that better feel free but I really just want to fix the main issue for now.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>from OSC import OSCServer,OSCClient, OSCMessage\nimport sys\nfrom time import sleep\nimport time\nimport types\nimport os\nimport subprocess\n\nserver = OSCServer( (\"10.1.1.143\", 7002) )#This has to be the IP of the RaspberryPi on the network\nclient = OSCClient()\n\nr = None\np = None\nsr = 0\nsp = 0\nloop = 0\n\ndef playall(path, tags, args, source):\n        global sp\n        global p\n        global sr\n        global r\n        global loop\n        loop = int(args[0])\n        if loop == 1:\n            print \"Play on Loop\";\n         for x in range(1,10):\n            i = \"\"\n            i = str(x)\n            print \"Loop Duration\", loop;\n            if sp == 0:\n                        if sr == 0:\n                            p = subprocess.Popen(['ola_recorder', '-p', i, '-i 0'], stdout=subprocess.PIPE)\n                            sp = 1\n\n                        else:\n                            r.kill()\n                            p = subprocess.Popen(['ola_recorder', '-p', i, '-i 0'], stdout=subprocess.PIPE)\n                            sp = 1\n                            sr = 0\n\n            else:\n                if sr == 0:\n                    p.kill()\n                    p = subprocess.Popen(['ola_recorder', '-p', i, '-i 0'], stdout=subprocess.PIPE)\n                    sp = 1\n\n                else:\n                    p.kill()\n                    r.kill()\n                    p = subprocess.Popen(['ola_recorder', '-p', i, '-i 0'], stdout=subprocess.PIPE)\n                    sp = 1\n                    sr = 0\n            time.sleep(5)\n            if loop == 0:\n                break\n\nserver.addMsgHandler(\"/3/playall\", playall)\n\nwhile True:\n    server.handle_request()\n\nserver.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "parallel-processing", "multiprocessing", "python-multiprocessing"], "comments": [{"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 1, "creation_date": 1544650083, "post_id": 53751050, "comment_id": 94355883, "body": "<code>4</code> Is arbitrary and the whole calculation of chunksize is a heuristic. The relevant factor is how much your actual processing time may vary. A bit more on this <a href=\"https://stackoverflow.com/a/53307813/9059420\">here</a> until I have time for an answer if still needed then."}, {"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1546126843, "post_id": 53751050, "comment_id": 94786013, "body": "Have you checked this <a href=\"https://stackoverflow.com/questions/34988692/python-3-multiprocessing-optimal-chunk-size?noredirect=1&amp;lq=1\">question</a>?"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 1, "creation_date": 1546141359, "post_id": 53751050, "comment_id": 94787874, "body": "Thanks @AndrewNaguib, I had actually not stumbled across that one somehow"}, {"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1546531395, "post_id": 53751050, "comment_id": 94887896, "body": "@BradSolomon You welcome :). Does it answer your question tho?"}], "answers": [{"tags": [], "owner": {"reputation": 504, "user_id": 2270574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23d0070cf83f1fe56fdb33c89807e93?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/2270574/rob"}, "is_accepted": false, "score": 7, "last_activity_date": 1549080938, "last_edit_date": 1549080938, "creation_date": 1546124554, "answer_id": 53973991, "question_id": 53751050, "link": "https://stackoverflow.com/questions/53751050/python-multiprocessing-understanding-logic-behind-chunksize/53973991#53973991", "title": "Python multiprocessing: understanding logic behind `chunksize`", "body": "<p>I think that part of what you're missing is that your naive estimate assumes that each unit of work takes the same amount of time in which case your strategy would be the best. But if some jobs finish sooner than others then some cores may become idle waiting for the slow jobs to finish.</p>\n\n<p>Thus, by breaking the chunks up into 4 times more pieces, then if one chunk finished early that core can start the next chunk ( while the other cores keep working on their slower chunk).</p>\n\n<p>I don't know why they picked the factor 4 exactly but it would be a trade off between minimising the overhead of the map code ( which wants the largest chunks possible) and balancing chunks taking different amount of times ( which wants the smallest chunk possible).</p>\n"}, {"comments": [{"owner": {"reputation": 6599, "user_id": 456550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5cd11130b5f8c988a54b663bad96cd68?s=128&d=identicon&r=PG", "display_name": "Christian Long", "link": "https://stackoverflow.com/users/456550/christian-long"}, "edited": false, "score": 55, "creation_date": 1551476180, "post_id": 54032744, "comment_id": 96667848, "body": "One of the most epic answers I&#39;ve seen on SO."}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 4, "creation_date": 1554483733, "post_id": 54032744, "comment_id": 97783774, "body": "Oh this was your short answer :P"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 1, "creation_date": 1554485082, "post_id": 54032744, "comment_id": 97784374, "body": "But forreal.. this is an excellent answer. I have starred the question for future cases where I want to understand this better. Skimming through it taught me a great deal already! Thanks"}, {"owner": {"reputation": 314, "user_id": 6521119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188b0bf22050ac5e155c83ff29d75008?s=128&d=identicon&r=PG&f=1", "display_name": "L.Iridium", "link": "https://stackoverflow.com/users/6521119/l-iridium"}, "edited": false, "score": 1, "creation_date": 1562029921, "post_id": 54032744, "comment_id": 100239736, "body": "Thanks for your answer. I want to know which tool you use to draw those figure. Thanks."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 314, "user_id": 6521119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188b0bf22050ac5e155c83ff29d75008?s=128&d=identicon&r=PG&f=1", "display_name": "L.Iridium", "link": "https://stackoverflow.com/users/6521119/l-iridium"}, "edited": false, "score": 2, "creation_date": 1562031359, "post_id": 54032744, "comment_id": 100240005, "body": "@L.Iridium You&#39;re welcome! I did use <a href=\"https://matplotlib.org/#\" rel=\"nofollow noreferrer\">matplotlib</a> where possible and otherwise ... LibreOffice calc + Pinta (basic image editing). Yeah I know ... but it works, somehow. ;)"}, {"owner": {"reputation": 3608, "user_id": 1308967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KipA4.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1308967/chris"}, "edited": false, "score": 0, "creation_date": 1577382671, "post_id": 54032744, "comment_id": 105157821, "body": "An answer pointing out <a href=\"https://stackoverflow.com/a/506004/1308967\"><code>window.location.replace()</code></a> got 14,452 votes, and this got 120 combined. Your efficiency earning SO rep is sub-optimal."}, {"owner": {"reputation": 103, "user_id": 795105, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b14f3a78fac63e7b184d15a7485d5c9f?s=128&d=identicon&r=PG", "display_name": "tly_alex", "link": "https://stackoverflow.com/users/795105/tly-alex"}, "edited": false, "score": 2, "creation_date": 1592372439, "post_id": 54032744, "comment_id": 110398462, "body": "First answer with a table of content seen on SO."}, {"owner": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 0, "creation_date": 1617933530, "post_id": 54032744, "comment_id": 118455246, "body": "give this person a medal"}], "tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": true, "score": 220, "last_activity_date": 1589139088, "last_edit_date": 1589139088, "creation_date": 1546572277, "answer_id": 54032744, "question_id": 53751050, "link": "https://stackoverflow.com/questions/53751050/python-multiprocessing-understanding-logic-behind-chunksize/54032744#54032744", "title": "Python multiprocessing: understanding logic behind `chunksize`", "body": "<h2>Short Answer</h2>\n\n<p>Pool's chunksize-algorithm is a heuristic. It provides a simple solution for all imaginable problem scenarios you are trying to stuff into Pool's methods. As a consequence, it cannot be optimized for any <em>specific</em> scenario.</p>\n\n<p>The algorithm arbitrarily divides the iterable in approximately four times more chunks than the naive approach. More chunks mean more overhead, but increased scheduling flexibility. How this answer will show, this leads to a higher worker-utilization on average, but <em>without</em> the guarantee of a shorter overall computation time for every case. </p>\n\n<p>\"That's nice to know\" you might think, \"but how does knowing this help me with my concrete multiprocessing problems?\" Well, it doesn't. The more honest short answer is, \"there is no short answer\",  \"multiprocessing is complex\" and \"it depends\". An observed symptom can have different roots, even for similar scenarios. </p>\n\n<p>This answer tries to provide you with basic concepts helping you to get a clearer picture of Pool's scheduling black box. It also tries to give you some basic tools at hand for recognizing and avoiding potential cliffs as far they are related to chunksize.</p>\n\n<hr>\n\n<p><strong>Table of Contents</strong></p>\n\n<p>Part I</p>\n\n<ol>\n<li>Definitions</li>\n<li>Parallelization Goals</li>\n<li>Parallelization Scenarios</li>\n<li>Risks of Chunksize > 1</li>\n<li>Pool's Chunksize-Algorithm</li>\n<li><p>Quantifying Algorithm Efficiency</p>\n\n<p>6.1 Models</p>\n\n<p>6.2 Parallel Schedule</p>\n\n<p>6.3 Efficiencies</p>\n\n<p>6.3.1 Absolute Distribution Efficiency (ADE)</p>\n\n<p>6.3.2 Relative Distribution Efficiency (RDE)</p></li>\n</ol>\n\n<p><a href=\"https://stackoverflow.com/a/54813527/9059420\">Part II</a></p>\n\n<ol start=\"7\">\n<li>Naive vs. Pool's Chunksize-Algorithm</li>\n<li>Reality Check</li>\n<li>Conclusion</li>\n</ol>\n\n<p>It is necessary to clarify some important terms first.</p>\n\n<hr>\n\n<h1>1. Definitions</h1>\n\n<p><br>\n<strong>Chunk</strong></p>\n\n<p>A chunk here is a share of the <code>iterable</code>-argument specified in a pool-method call. How the chunksize gets calculated and what effects this can have, is the topic of this answer.</p>\n\n<p><br>\n<strong>Task</strong></p>\n\n<p>A task's physical representation in a worker-process in terms of data can be seen in the figure below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/7nT9z.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7nT9z.png\" alt=\"figure0\"></a></p>\n\n<p>The figure shows an example call to <code>pool.map()</code>, displayed along a line of code, taken from the <code>multiprocessing.pool.worker</code> function, where a task read from the <code>inqueue</code> gets unpacked. <code>worker</code> is the underlying main-function in the <code>MainThread</code> of a pool-worker-process. The <code>func</code>-argument specified in the pool-method will only match the <code>func</code>-variable inside the <code>worker</code>-function for single-call methods like  <code>apply_async</code> and for <code>imap</code> with <code>chunksize=1</code>. For the rest of the pool-methods with a <code>chunksize</code>-parameter the processing-function <code>func</code> will be a mapper-function (<code>mapstar</code> or <code>starmapstar</code>). This function maps the user-specified <code>func</code>-parameter on every element of the transmitted chunk of the iterable (--> \"map-tasks\"). The time this takes, defines a <strong>task</strong> also as a <strong>unit of work</strong>. </p>\n\n<p><br>\n<strong>Taskel</strong></p>\n\n<p>While the usage of the word \"task\" for the <em>whole</em> processing of one chunk is matched by code within <code>multiprocessing.pool</code>, there is no indication how a <em>single call</em> to the user-specified <code>func</code>, with one\nelement of the chunk as argument(s), should be referred to. To avoid confusion emerging from naming conflicts (think of <code>maxtasksperchild</code>-parameter for Pool's <code>__init__</code>-method), this answer will refer to\nthe single units of work within a task as <strong>taskel</strong>.</p>\n\n<blockquote>\n  <p>A <strong>taskel</strong> (from <strong>task + el</strong>ement) is the smallest unit of work within a <strong>task</strong>.\n  It is the single execution of the function specified with the <code>func</code>-parameter of a <code>Pool</code>-method, called with arguments obtained from <strong>a single element</strong> of the transmitted <strong>chunk</strong>.\n  A <strong>task</strong> consists of <code>chunksize</code> <strong>taskels</strong>.</p>\n</blockquote>\n\n<p><br>\n<strong>Parallelization Overhead (PO)</strong></p>\n\n<p><strong>PO</strong> consists of Python-internal overhead and overhead for inter-process communication (IPC). The per-task overhead within Python comes with the code needed for packaging and unpacking the tasks and its results. IPC-overhead comes with the necessary synchronization of threads and the copying of data between different address spaces (two copy steps needed: parent -> queue -> child). The amount of IPC-overhead is OS-, hardware- and data-size dependent, what makes generalizations about the impact difficult.</p>\n\n<hr>\n\n<h1>2. Parallelization Goals</h1>\n\n<p>When using multiprocessing, our overall goal (obviously) is to minimize total processing time for all tasks. To reach this overall goal, our <strong>technical goal</strong> needs to be <strong>optimizing the utilization of hardware resources</strong>. </p>\n\n<p>Some important sub-goals for achieving the technical goal are:</p>\n\n<ul>\n<li>minimize parallelization overhead (most famously, but not alone: <a href=\"https://en.wikipedia.org/wiki/Inter-process_communication\" rel=\"noreferrer\">IPC</a>)</li>\n<li>high utilization across all cpu-cores</li>\n<li>keeping memory usage limited to prevent the OS from excessive paging (<a href=\"https://en.wikipedia.org/wiki/Thrashing_(computer_science)\" rel=\"noreferrer\">trashing</a>)</li>\n</ul>\n\n<p>At first, the tasks need to be computationally heavy (intensive) enough, to <em>earn back</em> the PO we have to pay for parallelization. The relevance of PO decreases with increasing absolute computation time per taskel. Or, to put it the other way around, the bigger the absolute computation time <em>per taskel</em> for your problem, the less relevant gets the need for reducing PO. If your computation will take hours per taskel, the IPC overhead will be negligible in comparison. The primary concern here is to prevent idling worker processes after all tasks have been distributed. Keeping all cores loaded means, we are parallelizing as much as possible.</p>\n\n<hr>\n\n<h1>3. Parallelization Scenarios</h1>\n\n<blockquote>\n  <p>What factors determine an optimal chunksize argument to methods like multiprocessing.Pool.map()</p>\n</blockquote>\n\n<p>The major factor in question is how much computation time may <em>vary</em> across our single taskels. To name it, the choice for an optimal chunksize is determined by the <strong>Coefficient of Variation</strong> (<a href=\"https://en.wikipedia.org/wiki/Coefficient_of_variation\" rel=\"noreferrer\">CV</a>) for computation times per taskel.</p>\n\n<p>The two extreme scenarios on a scale, following from the extent of this variation are:</p>\n\n<ol>\n<li>All taskels need exactly the same computation time.</li>\n<li>A taskel could take seconds or days to finish.</li>\n</ol>\n\n<p>For better memorability, I will refer to these scenarios as:</p>\n\n<ol>\n<li><strong>Dense Scenario</strong></li>\n<li><strong>Wide Scenario</strong></li>\n</ol>\n\n<p><br></p>\n\n<h2>Dense Scenario</h2>\n\n<p>In a <strong>Dense Scenario</strong> it would be desirable to distribute all taskels at once, to keep necessary IPC and context switching at a minimum. This means we want to create only as much chunks, as much worker processes there are. How already stated above, the weight of PO increases with shorter computation times per taskel.</p>\n\n<p>For maximal throughput, we also want all worker processes busy until all tasks are processed (no idling workers). For this goal, the distributed chunks should be of equal size or close to.</p>\n\n<p><br></p>\n\n<h2>Wide Scenario</h2>\n\n<p>The prime example for a <strong>Wide Scenario</strong> would be an optimization problem, where results either converge quickly or computation can take hours, if not days. Usually it is not predictable what mixture of \"light taskels\" and \"heavy taskels\" a task will contain in such a case, hence it's not advisable to distribute too many taskels in a task-batch at once. Distributing less taskels at once than possible, means increasing scheduling flexibility. This is needed here to reach our sub-goal of high utilization of all cores.</p>\n\n<p>If <code>Pool</code> methods, by default, would be totally optimized for the Dense Scenario, they would increasingly create suboptimal timings for every problem located closer to the Wide Scenario.</p>\n\n<hr>\n\n<h1>4. Risks of Chunksize > 1</h1>\n\n<p>Consider this simplified pseudo-code example of a <strong>Wide Scenario</strong>-iterable, which we want to pass into a pool-method:  </p>\n\n<pre><code>good_luck_iterable = [60, 60, 86400, 60, 86400, 60, 60, 84600]\n</code></pre>\n\n<p>Instead of the actual values, we pretend to see the needed computation time in seconds, for simplicity only 1 minute or 1 day.\nWe assume the pool has four worker processes (on four cores) and <code>chunksize</code> is set to <code>2</code>. Because the order will be kept, the chunks send to the workers will be these:</p>\n\n<pre><code>[(60, 60), (86400, 60), (86400, 60), (60, 84600)]\n</code></pre>\n\n<p>Since we have enough workers and the computation time is high enough, we can say, that every worker process will get a chunk to work on in the first place. (This does not have to be the case for fast completing tasks). Further we can say, the whole processing will take about 86400+60 seconds, because that's the highest total computation time for a chunk in this artificial scenario and we distribute chunks only once.</p>\n\n<p>Now consider this iterable, which has only one element switching its position compared to the previous iterable:</p>\n\n<pre><code>bad_luck_iterable = [60, 60, 86400, 86400, 60, 60, 60, 84600]\n</code></pre>\n\n<p>...and the corresponding chunks:</p>\n\n<pre><code>[(60, 60), (86400, 86400), (60, 60), (60, 84600)]\n</code></pre>\n\n<p>Just bad luck with the sorting of our iterable nearly doubled (86400+86400) our total processing time! The worker getting the vicious (86400, 86400)-chunk is blocking the second heavy taskel in its task from getting distributed to one of the idling workers already finished with their (60, 60)-chunks. We obviously would not risk such an unpleasant outcome if we set <code>chunksize=1</code>.</p>\n\n<p>This is the risk of bigger chunksizes. With higher chunksizes we trade scheduling flexibility for less overhead and in cases like above, that's a bad deal. </p>\n\n<p>How we will see in chapter <strong>6. Quantifying Algorithm Efficiency</strong>, bigger chunksizes can also lead to suboptimal results for <strong>Dense Scenarios</strong>.</p>\n\n<hr>\n\n<h1>5. Pool's Chunksize-Algorithm</h1>\n\n<p>Below you will find a slightly modified version of the algorithm inside the source code. As you can see, I cut off the lower part and wrapped it into a function for calculating the <code>chunksize</code> argument externally. I also replaced <code>4</code> with a <code>factor</code> parameter and outsourced the <code>len()</code> calls.</p>\n\n<pre><code># mp_utils.py\n\ndef calc_chunksize(n_workers, len_iterable, factor=4):\n    \"\"\"Calculate chunksize argument for Pool-methods.\n\n    Resembles source-code within `multiprocessing.pool.Pool._map_async`.\n    \"\"\"\n    chunksize, extra = divmod(len_iterable, n_workers * factor)\n    if extra:\n        chunksize += 1\n    return chunksize\n</code></pre>\n\n<p>To ensure we are all on the same page, here's what <code>divmod</code> does:</p>\n\n<p><code>divmod(x, y)</code> is a builtin function which returns <code>(x//y, x%y)</code>.\n<code>x // y</code> is the floor division, returning the down rounded quotient from <code>x / y</code>, while\n<code>x % y</code> is the modulo operation returning the remainder from <code>x / y</code>.\nHence e.g. <code>divmod(10, 3)</code> returns <code>(3, 1)</code>.</p>\n\n<p>Now when you look at <code>chunksize, extra = divmod(len_iterable, n_workers * 4)</code>, you will notice <code>n_workers</code> here is the divisor <code>y</code> in <code>x / y</code> and multiplication by <code>4</code>, without further adjustment through <code>if extra: chunksize +=1</code> later on, leads to an initial chunksize <em>at least</em> four times smaller (for <code>len_iterable &gt;= n_workers * 4</code>) than it would be otherwise.</p>\n\n<p>For viewing the effect of multiplication by <code>4</code> on the intermediate chunksize result consider this function:</p>\n\n<pre><code>def compare_chunksizes(len_iterable, n_workers=4):\n    \"\"\"Calculate naive chunksize, Pool's stage-1 chunksize and the chunksize\n    for Pool's complete algorithm. Return chunksizes and the real factors by\n    which naive chunksizes are bigger.\n    \"\"\"\n    cs_naive = len_iterable // n_workers or 1  # naive approach\n    cs_pool1 = len_iterable // (n_workers * 4) or 1  # incomplete pool algo.\n    cs_pool2 = calc_chunksize(n_workers, len_iterable)\n\n    real_factor_pool1 = cs_naive / cs_pool1\n    real_factor_pool2 = cs_naive / cs_pool2\n\n    return cs_naive, cs_pool1, cs_pool2, real_factor_pool1, real_factor_pool2\n</code></pre>\n\n<p>The function above calculates the naive chunksize (<code>cs_naive</code>) and the first-step chunksize of Pool's chunksize-algorithm (<code>cs_pool1</code>), as well as the chunksize for the complete Pool-algorithm (<code>cs_pool2</code>). Further it calculates the <em><strong>real factors</strong></em> <code>rf_pool1 = cs_naive / cs_pool1</code> and <code>rf_pool2 = cs_naive / cs_pool2</code>, which tell us how many times the naively calculated chunksizes are bigger than Pool's internal version(s).</p>\n\n<p>Below you see two figures created with output from this function. The left figure just shows the chunksizes for <code>n_workers=4</code> up until an iterable length of <code>500</code>. The right figure shows the values for <code>rf_pool1</code>. For iterable length <code>16</code>, the real factor becomes <code>&gt;=4</code>(for <code>len_iterable &gt;= n_workers * 4</code>) and it's maximum value is <code>7</code> for iterable lengths <code>28-31</code>. That's a massive deviation from the original factor <code>4</code> the algorithm converges to for longer iterables. 'Longer' here is relative and depends on the number of specified workers.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DlDQa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DlDQa.png\" alt=\"figure1\"></a></p>\n\n<p>Remember chunksize <code>cs_pool1</code> still lacks the <code>extra</code>-adjustment with the remainder from <code>divmod</code> contained in <code>cs_pool2</code> from the complete algorithm.</p>\n\n<p>The algorithm goes on with:</p>\n\n<pre><code>if extra:\n    chunksize += 1\n</code></pre>\n\n<p>Now in cases were there <em>is</em> a remainder (an <code>extra</code> from the divmod-operation), increasing the chunksize by 1 obviously cannot work out for every task. After all, if it would, there would not be a remainder to begin with.</p>\n\n<p>How you can see in the figures below, the \"<strong>extra-treatment</strong>\" has the effect, that the <strong>real factor</strong> for <code>rf_pool2</code> now converges towards <code>4</code> from <em>below</em> <code>4</code> and the deviation is somewhat smoother. Standard deviation for <code>n_workers=4</code> and <code>len_iterable=500</code> drops from <code>0.5233</code> for <code>rf_pool1</code> to <code>0.4115</code> for <code>rf_pool2</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DKDzL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DKDzL.png\" alt=\"figure2\"></a></p>\n\n<p>Eventually, increasing <code>chunksize</code> by 1 has the effect, that the last task transmitted only has a size of <code>len_iterable % chunksize or chunksize</code>.</p>\n\n<p>The more interesting and how we will see later, more consequential, effect of the <strong>extra-treatment</strong> however can be observed for the <strong>number of generated chunks</strong> (<code>n_chunks</code>).\nFor long enough iterables, Pool's completed chunksize-algorithm (<code>n_pool2</code> in the figure below) will stabilize the number of chunks at <code>n_chunks == n_workers * 4</code>.\nIn contrast, the naive algorithm (after an initial burp) keeps alternating between <code>n_chunks == n_workers</code> and <code>n_chunks == n_workers + 1</code> as the length of the iterable grows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zVjBq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zVjBq.png\" alt=\"figure3\"></a></p>\n\n<p>Below you will find two enhanced info-functions for Pool's and the naive chunksize-algorithm. The output of these functions will be needed in the next chapter.</p>\n\n<pre><code># mp_utils.py\n\nfrom collections import namedtuple\n\n\nChunkinfo = namedtuple(\n    'Chunkinfo', ['n_workers', 'len_iterable', 'n_chunks',\n                  'chunksize', 'last_chunk']\n)\n\ndef calc_chunksize_info(n_workers, len_iterable, factor=4):\n    \"\"\"Calculate chunksize numbers.\"\"\"\n    chunksize, extra = divmod(len_iterable, n_workers * factor)\n    if extra:\n        chunksize += 1\n    # `+ (len_iterable % chunksize &gt; 0)` exploits that `True == 1`\n    n_chunks = len_iterable // chunksize + (len_iterable % chunksize &gt; 0)\n    # exploit `0 == False`\n    last_chunk = len_iterable % chunksize or chunksize\n\n    return Chunkinfo(\n        n_workers, len_iterable, n_chunks, chunksize, last_chunk\n    )\n</code></pre>\n\n<p>Don't be confused by the probably unexpected look of <code>calc_naive_chunksize_info</code>. The <code>extra</code> from <code>divmod</code> is not used for calculating the chunksize.</p>\n\n<pre><code>def calc_naive_chunksize_info(n_workers, len_iterable):\n    \"\"\"Calculate naive chunksize numbers.\"\"\"\n    chunksize, extra = divmod(len_iterable, n_workers)\n    if chunksize == 0:\n        chunksize = 1\n        n_chunks = extra\n        last_chunk = chunksize\n    else:\n        n_chunks = len_iterable // chunksize + (len_iterable % chunksize &gt; 0)\n        last_chunk = len_iterable % chunksize or chunksize\n\n    return Chunkinfo(\n        n_workers, len_iterable, n_chunks, chunksize, last_chunk\n    )\n</code></pre>\n\n<hr>\n\n<h1>6. Quantifying Algorithm Efficiency</h1>\n\n<p>Now, after we have seen how the output of <code>Pool</code>'s chunksize-algorithm looks different compared to output from the naive algorithm...</p>\n\n<ul>\n<li><strong>How to tell if Pool's approach actually <em>improves</em> something?</strong></li>\n<li><strong>And what exactly could this <em>something</em> be?</strong></li>\n</ul>\n\n<p>As shown in the previous chapter, for longer iterables (a bigger number of taskels), Pool's chunksize-algorithm <em>approximately</em> divides the iterable into four times <em>more</em> chunks than the naive method. Smaller chunks mean more tasks and more tasks mean more <strong>Parallelization Overhead (PO)</strong>, a cost which must be weighed against the benefit of increased scheduling-flexibility (recall <strong>\"Risks of Chunksize>1\"</strong>).</p>\n\n<p>For rather obvious reasons, Pool's basic chunksize-algorithm cannot weigh scheduling-flexibility against <strong>PO</strong> for us. IPC-overhead is OS-, hardware- and data-size dependent. The algorithm cannot know on what hardware we run our code, nor does it have a clue how long a taskel will take to finish. It's a heuristic providing basic functionality for <em>all</em> possible scenarios. This means it cannot be optimized for any scenario in particular. As mentioned before, <strong>PO</strong> also becomes increasingly less of a concern with increasing computation times per taskel (negative correlation).</p>\n\n<p>When you recall the <strong>Parallelization Goals</strong> from chapter 2, one bullet-point was:</p>\n\n<ul>\n<li>high utilization across all cpu-cores</li>\n</ul>\n\n<p>The previously mentioned <em>something</em>, Pool's chunksize-algorithm <em>can</em> try to improve is the <strong>minimization of idling worker-processes</strong>, respectively the <strong>utilization of cpu-cores</strong>.</p>\n\n<p>A repeating question on SO regarding <code>multiprocessing.Pool</code> is asked by people wondering about unused cores / idling worker-processes in situations where you would expect all worker-processes busy. While this can have many reasons, idling worker-processes towards the end of a computation are an observation we can often make, even with <strong>Dense Scenarios</strong> (equal computation times per taskel) in cases where the number of workers is not a <strong>divisor</strong> of the number of chunks (<code>n_chunks % n_workers &gt; 0</code>). </p>\n\n<p>The question now is: </p>\n\n<blockquote>\n  <p>How can we practically translate our understanding of chunksizes into something which enables us to explain observed worker-utilization, or even compare the efficiency of different algorithms in that regard?</p>\n</blockquote>\n\n<hr>\n\n<h2>6.1 Models</h2>\n\n<p>For gaining deeper insights here, we need a form of abstraction of parallel computations which simplifies the overly complex reality down to a manageable degree of complexity, while preserving significance within defined boundaries. Such an abstraction is called a <em>model</em>.  An implementation of such a \"<strong>Parallelization Model\" (PM)</strong> generates worker-mapped meta-data (timestamps) as real computations would, if the data were to be collected. The model-generated meta-data allows predicting metrics of parallel computations under certain constraints.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4gjoC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4gjoC.png\" alt=\"figure4\"></a></p>\n\n<p>One of two sub-models within the here defined <strong>PM</strong> is the <strong>Distribution Model (DM)</strong>. The <strong>DM</strong> explains how atomic units of work (taskels) are distributed over <strong>parallel workers and time</strong>, when no other factors than the respective chunksize-algorithm, the number of workers, the input-iterable (number of taskels) and their computation duration is considered. This means any form of overhead is <em>not</em> included.</p>\n\n<p>For obtaining a complete <strong>PM</strong>, the <strong>DM</strong> is extended with an <strong>Overhead Model (OM)</strong>, representing various forms of <strong>Parallelization Overhead (PO)</strong>. Such a model needs to be calibrated for each node individually (hardware-, OS-dependencies). How many forms of overhead are represented in a <strong>OM</strong> is left open and so multiple <strong>OMs</strong> with varying degrees of complexity can exist. Which level of accuracy the implemented <strong>OM</strong> needs is determined by the overall weight of <strong>PO</strong> for the specific computation. Shorter taskels lead to a higher weight of <strong>PO</strong>, which in turn requires a more precise <strong>OM</strong> if we were attempting to <em>predict</em> <strong>Parallelization Efficiencies (PE)</strong>.</p>\n\n<hr>\n\n<h2>6.2 Parallel Schedule (PS)</h2>\n\n<p>The <strong>Parallel Schedule</strong> is a two-dimensional representation of the parallel computation, where the x-axis represents time and the y-axis represents a pool of parallel workers. The number of workers and the total computation time mark the extend of a rectangle, in which smaller rectangles are drawn in. These smaller rectangles represent atomic units of work (taskels).</p>\n\n<p>Below you find the visualization of a <strong>PS</strong> drawn with data from the <strong>DM</strong> of Pool's chunksize-algorithm for the <strong>Dense Scenario</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zgfRF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zgfRF.png\" alt=\"figure5\"></a></p>\n\n<ul>\n<li>The x-axis is sectioned into equal units of time, where each unit stands for the computation time a taskel requires. </li>\n<li>The y-axis is divided into the number of worker-processes the pool uses.</li>\n<li>A taskel here is displayed as the smallest cyan-colored rectangle, put into a timeline (a schedule) of an anonymized worker-process.</li>\n<li>A task is one or multiple taskels in a worker-timeline continuously highlighted with the same hue.</li>\n<li>Idling time units are represented through red colored tiles.</li>\n<li>The Parallel Schedule is partitioned into sections. The last section is the tail-section.</li>\n</ul>\n\n<p>The names for the composed parts can be seen in the picture below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QsIE9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QsIE9.png\" alt=\"figure6\"></a></p>\n\n<p>In a complete <strong>PM</strong> including an <strong>OM</strong>, the <strong>Idling Share</strong> is not limited to the tail, but also comprises space between tasks and even between taskels.</p>\n\n<hr>\n\n<h2>6.3 Efficiencies</h2>\n\n<p>The Models introduced above allow quantifying the rate of worker-utilization. We can distinguish:</p>\n\n<ul>\n<li><strong>Distribution Efficiency (DE)</strong> - calculated with help of a <strong>DM</strong> (or a simplified method for the <strong>Dense Scenario</strong>).</li>\n<li><strong>Parallelization Efficiency (PE)</strong> - either calculated with help of a calibrated <strong>PM</strong> (prediction) or calculated from meta-data of real computations.</li>\n</ul>\n\n<p>It's important to note, that calculated efficiencies <strong><em>do not</em></strong> automatically correlate with <em>faster</em> overall computation for a given parallelization problem. Worker-utilization in this context only distinguishes between a worker having a started, yet unfinished taskel and a worker not having such an \"open\" taskel. That means, possible idling <em>during</em> the time span of a taskel is <em>not</em> registered.</p>\n\n<p>All above mentioned efficiencies are basically obtained by calculating the quotient of the division <strong>Busy Share / Parallel Schedule</strong>. The difference between <strong>DE</strong> and <strong>PE</strong> comes with the Busy Share\noccupying a smaller portion of the overall Parallel Schedule for the overhead-extended <strong>PM</strong>.</p>\n\n<p>This answer will further only discuss a simple method to calculate <strong>DE</strong> for the Dense Scenario. This is sufficiently adequate to compare different chunksize-algorithms, since...</p>\n\n<ol>\n<li>... the <strong>DM</strong> is the part of the <strong>PM</strong>, which changes with different chunksize-algorithms employed.</li>\n<li>... the <strong>Dense Scenario</strong> with equal computation durations per taskel depicts a \"stable state\", for which these time spans drop out of the equation. Any other scenario would just lead to random results since the ordering of taskels would matter.</li>\n</ol>\n\n<hr>\n\n<h2>6.3.1 Absolute Distribution Efficiency (ADE)</h2>\n\n<p>This basic efficiency can be calculated in general by dividing the <strong>Busy Share</strong> through the whole potential of the <strong>Parallel Schedule</strong>:</p>\n\n<blockquote>\n  <p><strong>Absolute Distribution Efficiency (ADE)</strong> = <strong>Busy Share</strong> / <strong>Parallel Schedule</strong></p>\n</blockquote>\n\n<p>For the <strong>Dense Scenario</strong>, the simplified calculation-code looks like this:</p>\n\n<pre><code># mp_utils.py\n\ndef calc_ade(n_workers, len_iterable, n_chunks, chunksize, last_chunk):\n    \"\"\"Calculate Absolute Distribution Efficiency (ADE).\n\n    `len_iterable` is not used, but contained to keep a consistent signature\n    with `calc_rde`.\n    \"\"\"\n    if n_workers == 1:\n        return 1\n\n    potential = (\n        ((n_chunks // n_workers + (n_chunks % n_workers &gt; 1)) * chunksize)\n        + (n_chunks % n_workers == 1) * last_chunk\n    ) * n_workers\n\n    n_full_chunks = n_chunks - (chunksize &gt; last_chunk)\n    taskels_in_regular_chunks = n_full_chunks * chunksize\n    real = taskels_in_regular_chunks + (chunksize &gt; last_chunk) * last_chunk\n    ade = real / potential\n\n    return ade\n</code></pre>\n\n<p>If there is no <strong>Idling Share</strong>, <strong>Busy Share</strong> will be <em>equal</em> to <strong>Parallel Schedule</strong>, hence we get an <strong>ADE</strong> of 100%. In our simplified model, this is a scenario where all available processes will be busy through the whole time needed for processing all tasks. In other words, the whole job gets effectively parallelized to 100 percent.</p>\n\n<p>But why do I keep referring to <strong>PE</strong> as <em>absolute</em> <strong>PE</strong> here?</p>\n\n<p>To comprehend that, we have to consider a possible case for the chunksize (cs) which ensures maximal scheduling flexibility (also, the number of Highlanders there can be. Coincidence?):</p>\n\n<blockquote>\n  <p>__________________________________<strong>~ ONE ~</strong>__________________________________</p>\n</blockquote>\n\n<p>If we, for example, have four worker-processes and 37 taskels, there will be idling workers even with <code>chunksize=1</code>, just because <code>n_workers=4</code> is not a divisor of 37. The remainder of dividing 37 / 4 is 1. This single remaining taskel will have to be processed by a sole worker, while the remaining three are idling.</p>\n\n<p>Likewise, there will still be one idling worker with 39 taskels, how you can see pictured below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ysu7Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ysu7Y.png\" alt=\"figure7\"></a></p>\n\n<p>When you compare the upper <strong>Parallel Schedule</strong> for <code>chunksize=1</code> with the below version for <code>chunksize=3</code>, you will notice that the upper <strong>Parallel Schedule</strong> is smaller, the timeline on the x-axis shorter. It should become obvious now, how bigger chunksizes unexpectedly also <em>can</em> lead to increased overall computation times, even for <strong>Dense Scenarios</strong>.</p>\n\n<blockquote>\n  <p>But why not just use the length of the x-axis for efficiency calculations?</p>\n</blockquote>\n\n<p>Because the overhead is not contained in this model. It will be different for both chunksizes, hence the x-axis is not really directly comparable. The overhead can still lead to a longer total computation time like shown in <strong>case 2</strong> from the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/EzZaX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/EzZaX.png\" alt=\"figure8\"></a></p>\n\n<hr>\n\n<h2>6.3.2 Relative Distribution Efficiency (RDE)</h2>\n\n<p>The <strong>ADE</strong> value does not contain the information if a <em>better</em> distribution of taskels is possible with chunksize set to 1. <em>Better</em> here still means a smaller <strong>Idling Share</strong>.</p>\n\n<p>To get a <strong>DE</strong> value adjusted for the maximum possible <strong>DE</strong>, we have to divide the considered <strong>ADE</strong> through the <strong>ADE</strong> we get for <code>chunksize=1</code>.</p>\n\n<blockquote>\n  <p><strong>Relative Distribution Efficiency (RDE)</strong> = <strong>ADE_cs_x</strong> / <strong>ADE_cs_1</strong></p>\n</blockquote>\n\n<p>Here is how this looks in code:</p>\n\n<pre><code># mp_utils.py\n\ndef calc_rde(n_workers, len_iterable, n_chunks, chunksize, last_chunk):\n    \"\"\"Calculate Relative Distribution Efficiency (RDE).\"\"\"\n    ade_cs1 = calc_ade(\n        n_workers, len_iterable, n_chunks=len_iterable,\n        chunksize=1, last_chunk=1\n    )\n    ade = calc_ade(n_workers, len_iterable, n_chunks, chunksize, last_chunk)\n    rde = ade / ade_cs1\n\n    return rde\n</code></pre>\n\n<p><strong>RDE</strong>, how defined here, in essence is a tale about the tail of a <strong>Parallel Schedule</strong>. <strong>RDE</strong> is influenced by the maximum effective chunksize contained in the tail. (This tail can be of x-axis length <code>chunksize</code> or <code>last_chunk</code>.)\nThis has the consequence, that <strong>RDE</strong> naturally converges to 100% (even) for all sorts of \"tail-looks\" like shown in the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3rKsK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3rKsK.png\" alt=\"figure9\"></a></p>\n\n<p>A low <strong>RDE</strong> ...</p>\n\n<ul>\n<li>is a strong hint for optimization potential.</li>\n<li>naturally gets less likely for longer iterables, because the relative tail-portion of the overall <strong>Parallel Schedule</strong> shrinks.</li>\n</ul>\n\n<hr>\n\n<p>Please find Part II of this answer <a href=\"https://stackoverflow.com/a/54813527/9059420\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": false, "score": 56, "last_activity_date": 1556783183, "last_edit_date": 1556783183, "creation_date": 1550772368, "answer_id": 54813527, "question_id": 53751050, "link": "https://stackoverflow.com/questions/53751050/python-multiprocessing-understanding-logic-behind-chunksize/54813527#54813527", "title": "Python multiprocessing: understanding logic behind `chunksize`", "body": "<blockquote>\n  <p><strong>About this answer</strong></p>\n  \n  <p>This answer is Part II of the accepted answer <a href=\"https://stackoverflow.com/a/54032744/9059420\">above</a>.</p>\n</blockquote>\n\n<hr>\n\n<h1>7. Naive vs. Pool's Chunksize-Algorithm</h1>\n\n<p>Before going into details, consider the two gifs below. For a range of different <code>iterable</code> lengths, they show how the two compared algorithms chunk the passed <code>iterable</code> (it will be a sequence by then) and how the resulting tasks might be distributed. The order of workers is random and the number of distributed tasks per worker in reality can differ from this images for light taskels and or taskels in a Wide Scenario. As mentioned earlier, overhead is also not included here. For heavy enough taskels in a Dense Scenario with neglectable transmitted data-sizes, real computations draw a very similar picture, though.</p>\n\n<p><img src=\"https://user-images.githubusercontent.com/32203938/53185266-f337da80-35fe-11e9-9eb6-0b04f35a5263.gif\" alt=\"cs_4_50\"></p>\n\n<p><img src=\"https://user-images.githubusercontent.com/32203938/53185334-16628a00-35ff-11e9-8366-99fc27065b60.gif\" alt=\"cs_200_250\"></p>\n\n<p>As shown in chapter \"<strong>5. Pool's Chunksize-Algorithm</strong>\", with Pool's chunksize-algorithm the number of chunks will stabilize at <code>n_chunks == n_workers * 4</code> for big enough iterables, while it keeps switching between <code>n_chunks == n_workers</code> and <code>n_chunks == n_workers + 1</code> with the naive approach. For the naive algorithm applies: Because <code>n_chunks % n_workers == 1</code> is <code>True</code> for <code>n_chunks == n_workers + 1</code>, a new section will be created where only a single worker will be employed.</p>\n\n<blockquote>\n  <p>Naive Chunksize-Algorithm:</p>\n  \n  <p>You might think you created tasks in the same number of workers, but this will only be true for cases where there is no remainder for <code>len_iterable / n_workers</code>. If there <em>is</em> a remainder, there will be a new section with only one task for a single worker. At that point your computation will not be parallel anymore.</p>\n</blockquote>\n\n<p>Below you see a figure similar to the one shown in chapter 5, but displaying the number of sections instead of the number of chunks. For Pool's full chunksize-algorithm (<code>n_pool2</code>), <code>n_sections</code> will stabilize at the infamous, hard coded factor <code>4</code>. For the naive algorithm, <code>n_sections</code> will alternate between one and two.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aiIPx.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aiIPx.png\" alt=\"figure10\"></a></p>\n\n<p>For Pool's chunksize-algorithm, the stabilization at <code>n_chunks = n_workers * 4</code> through the before mentioned <strong>extra-treatment</strong>, prevents creation of a new section here and keeps the <strong>Idling Share</strong> limited to one worker for long enough iterables. Not only that, but the the algorithm will keep shrinking the relative size of the <strong>Idling Share</strong>, which leads to an RDE value converging towards 100%.</p>\n\n<p>\"Long enough\" for <code>n_workers=4</code> is <code>len_iterable=210</code> for example. For iterables equal or bigger than that, the <strong>Idling Share</strong> will be limited to one worker, a trait originally lost because of the <code>4</code>-multiplication within the chunksize-algorithm in the first place.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VpxaO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VpxaO.png\" alt=\"figure11\"></a></p>\n\n<p>The naive chunksize-algorithm also converges towards 100%, but it does so slower. The converging effect solely depends on the fact that the relative portion of the tail shrinks for cases where there will be two sections. This tail with only one employed worker is limited to x-axis length <code>n_workers - 1</code>, the possible maximum remainder for <code>len_iterable / n_workers</code>.</p>\n\n<blockquote>\n  <p>How do actual RDE values differ for the naive and Pool's chunksize-algorithm?</p>\n</blockquote>\n\n<p>Below you find two heatmaps showing the <strong>RDE</strong> values for all iterable lengths up to 5000, for all numbers of workers from 2 up to 100.\nThe color-scale goes from 0.5 to 1 (50%-100%). You will notice much more dark areas (lower RDE values) for the naive algorithm in the left heatmap. In contrast, Pool's chunksize-algorithm on the right draws a much more sunshiny picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/G6Jt8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/G6Jt8.png\" alt=\"figure12\"></a></p>\n\n<p>The diagonal gradient of lower-left dark corners vs. upper-right bright corners, is again showing the dependence on the number of workers for what to call a \"long iterable\".</p>\n\n<blockquote>\n  <p>How bad can it get with each algorithm?</p>\n</blockquote>\n\n<p>With Pool's chunksize-algorithm a <strong>RDE</strong> value of 81.25 % is the lowest value for the range of workers and iterable lengths specified above:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hzUZc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hzUZc.png\" alt=\"figure13\"></a></p>\n\n<p>With the naive chunksize-algorithm, things can turn much worse. The lowest calculated <strong>RDE</strong> here is 50.72 %. In this case, nearly for half of the computation time just a single worker is running! So, watch out, proud owners of <a href=\"https://ark.intel.com/de/products/95830/Intel-Xeon-Phi-Processor-7290-16GB-1-50-GHz-72-core-\" rel=\"noreferrer\">Knights Landing</a>. ;)</p>\n\n<p><a href=\"https://i.stack.imgur.com/jGEa4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jGEa4.png\" alt=\"figure14\"></a></p>\n\n<hr>\n\n<h1>8. Reality Check</h1>\n\n<p>In the previous chapters we considered a simplified model for the purely mathematical distribution problem, stripped from the nitty-gritty details which make multiprocessing such a thorny topic in the first place. To better understand how far the Distribution Model (DM) <em>alone</em> can contribute to explain observed worker utilization in reality, we will now take some looks at Parallel Schedules drawn by <em>real</em> computations.</p>\n\n<h2>Setup</h2>\n\n<p>The following plots all deal with parallel executions of a simple, cpu-bound dummy-function, which gets called with various arguments so we can observe how the drawn Parallel Schedule varies in dependence of the input values. The \"work\" within this function consists only of iteration over a range object. This is already enough to keep a core busy since we pass huge numbers in. Optionally the function takes some taskel-unique extra <code>data</code> which is just returned unchanged. Since every taskel comprises the exact same amount of work, we are still dealing with a Dense Scenario here.</p>\n\n<p>The function is decorated with a wrapper taking timestamps with ns-resolution (Python 3.7+). The timestamps are used to calculate the timespan of a taskel and therefore enable the drawing of an empiric Parallel Schedule.</p>\n\n<pre><code>@stamp_taskel\ndef busy_foo(i, it, data=None):\n    \"\"\"Dummy function for CPU-bound work.\"\"\"\n    for _ in range(int(it)):\n        pass\n    return i, data\n\n\ndef stamp_taskel(func):\n    \"\"\"Decorator for taking timestamps on start and end of decorated\n    function execution.\n    \"\"\"\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        start_time = time_ns()\n        result = func(*args, **kwargs)\n        end_time = time_ns()\n        return (current_process().name, (start_time, end_time)), result\n    return wrapper\n</code></pre>\n\n<p>Pool's starmap method is also decorated in such a way that only the starmap-call itself is timed. \"Start\" and \"end\" of this call determine minimum and maximum on the x-axis of the produced Parallel Schedule.</p>\n\n<p>We're going to observe computation of 40 taskels on four worker processes on a machine with these specs:\nPython 3.7.1, Ubuntu 18.04.2, Intel\u00ae Core\u2122 i7-2600K CPU @ 3.40GHz \u00d7 8</p>\n\n<p>The input values which will be varied are the number of iterations in the for-loop\n(30k, 30M, 600M) and the additionally send data size (per taskel, numpy-ndarray: 0 MiB, 50 MiB).</p>\n\n<pre><code>...\nN_WORKERS = 4\nLEN_ITERABLE = 40\nITERATIONS = 30e3  # 30e6, 600e6\nDATA_MiB = 0  # 50\n\niterable = [\n    # extra created data per taskel\n    (i, ITERATIONS, np.arange(int(DATA_MiB * 2**20 / 8)))  # taskel args\n    for i in range(LEN_ITERABLE)\n]\n\n\nwith Pool(N_WORKERS) as pool:\n    results = pool.starmap(busy_foo, iterable)\n</code></pre>\n\n<p>The shown runs below were handpicked to have the same ordering of chunks so you can spot the differences better compared to the Parallel Schedule from the Distribution Model, but don't forget the order in which the workers get their task is non-deterministic.</p>\n\n<h2>DM Prediction</h2>\n\n<p>To reiterate, the Distribution Model \"predicts\" a Parallel Schedule like we've seen it already before in chapter 6.2:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oxKuf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oxKuf.png\" alt=\"figure15\"></a></p>\n\n<h2>1st RUN: 30k iterations &amp; 0 MiB data per taskel</h2>\n\n<p><a href=\"https://i.stack.imgur.com/gNqre.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gNqre.png\" alt=\"figure16\"></a></p>\n\n<p>Our first run here is very short, the taskels are very \"light\". The whole <code>pool.starmap()</code>-call only took 14.5 ms in total.\nYou will notice, that contrary to with the <strong>DM</strong>, the idling is not restricted to the tail-section, but also takes place between tasks and even between taskels. That's because our real schedule here naturally includes all sorts of overhead. Idling here means just everything <em>outside</em> of a taskel. Possible <em>real</em> idling <em>during</em> a taskel is not captured how already mentioned before.</p>\n\n<p>Further you can see, that not all workers get their tasks at the same time. That's due to the fact that all workers are fed over a shared <code>inqueue</code> and only one worker can read from it at a time. The same applies for the <code>outqueue</code>. This can cause bigger upsets as soon as you're transmitting non-marginal sizes of data how we will see later.</p>\n\n<p>Furthermore you can see that despite the fact that every taskel comprises the same amount of work, the actual measured timespan for a taskel varies greatly. The taskels distributed to worker-3 and worker-4 need more time than the ones processed by the first two workers. For this run I suspect it is due to <a href=\"https://en.wikipedia.org/wiki/Intel_Turbo_Boost\" rel=\"noreferrer\">turbo boost</a> not being available anymore on the cores for worker-3/4 at that moment, so they processed their tasks with a lower clock-rate. </p>\n\n<p>The whole computation is so light that hardware or OS-introduced chaos-factors can skew the <strong>PS</strong> drastically. The computation is a \"leaf on the wind\" and the <strong>DM</strong>-prediction has little significance, even for a theoretically fitting scenario.</p>\n\n<h2>2nd RUN: 30M iterations &amp; 0 MiB data per taskel</h2>\n\n<p><a href=\"https://i.stack.imgur.com/dg7gi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dg7gi.png\" alt=\"figure17\"></a></p>\n\n<p>Increasing the number of iterations in the for-loop from 30,000 to 30 millions, results in a real Parallel Schedule which is close to a perfect match with the one predicted by data provided by the <strong>DM</strong>, hurray! The computation per taskel is now heavy enough to marginalize the idling parts at the start and in between, letting only the big Idling Share visible which the <strong>DM</strong> predicted.</p>\n\n<h2>3rd RUN: 30M iterations &amp; 50 MiB data per taskel</h2>\n\n<p><a href=\"https://i.stack.imgur.com/BkMCf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BkMCf.png\" alt=\"figure18\"></a></p>\n\n<p>Keeping the 30M iterations, but additionally sending 50 MiB per taskel back and forth skews the picture again. Here the queueing-effect is well visible. Worker-4 needs to wait longer for its second task than Worker-1. Now imagine this schedule with 70 workers!</p>\n\n<p>In case the taskels are computationally very light, but afford a notable amount of data as payload, the bottleneck of a single shared queue can prevent any additional benefit of adding more workers to the Pool, even if they are backed by physical cores. In such a case, Worker-1 could be done with its first task and awaiting a new one even before Worker-40 has gotten its first task.</p>\n\n<p>It should become obvious now why computation times in a <code>Pool</code> don't always decrease lineary with the number of workers. Sending relatively big amounts of data along <em>can</em> lead to scenarios where most of the time is spend on waiting for the data to be copied into the address space of a worker and only one worker can be fed at once.</p>\n\n<h2>4th RUN: 600M iterations &amp; 50 MiB data per taskel</h2>\n\n<p><a href=\"https://i.stack.imgur.com/ZrPR0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZrPR0.png\" alt=\"figure19\"></a></p>\n\n<p>Here we send 50 MiB again, but raise the number of iterations from 30M to 600M, which brings the total computation time up from 10 s to 152 s. The drawn Parallel Schedule <em>again</em>, is close to a perfect match with the predicted one, the overhead through the data copying is marginalized.</p>\n\n<hr>\n\n<h1>9. Conclusion</h1>\n\n<p>The discussed multiplication by <code>4</code> increases scheduling flexibility, but also leverages the unevenness in taskel-distributions. Without this multiplication, the Idling Share would be limited to a single worker even for short iterables (for <strong>DM</strong> with Dense Scenario) . Pool's chunksize-algorithm needs input-iterables to be of certain size to regain that trait.</p>\n\n<p>As this answer has hopefully shown, Pool's chunksize-algorithm leads to a better core utilization on average compared to the naive approach, at least for the average case and as long overhead is not considered. The naive algorithm here can have a Distribution Efficiency (DE) as low as ~51%, while Pool's chunksize algorithm has its low at ~81%. <strong>DE</strong> however doesn't comprise Parallelization Overhead (PO) like IPC. Chapter 8 has shown that <strong>DE</strong> still can have great predictive power for the Dense Scenario with marginalized overhead.</p>\n\n<p>Despite the fact that Pool's chunksize-algorithm achieves a higher <strong>DE</strong> compared to the naive approach, <strong>it does not provide optimal taskel distributions for every input constellation.</strong> While a simple static chunking-algorithm can not optimize (overhead-including) Parallelization Efficiency (PE), there is no inherent reason why it could not <em>always</em> provide a Relative Distribution Efficiency (RDE) of 100 %, that means, the same <strong>DE</strong> as with <code>chunksize=1</code>. A simple chunksize-algorithm consists only of basic math and is free to \"slice the cake\" in any way.</p>\n\n<p>Unlike Pool's implementation of an \"equal-size-chunking\" algorithm, an \"even-size-chunking\" algorithm would provide a <strong>RDE</strong> of 100% for every <code>len_iterable</code> / <code>n_workers</code> combination. An even-size-chunking algorithm would be slightly more complicated to implement in Pool's source, but can be modulated on top of the existing algorithm just by packaging the tasks externally (I'll link from here in case I drop an Q/A on how to do that).</p>\n"}], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18922, "favorite_count": 99, "accepted_answer_id": 54032744, "answer_count": 3, "score": 93, "last_activity_date": 1589139088, "creation_date": 1544647421, "last_edit_date": 1546604747, "question_id": 53751050, "link": "https://stackoverflow.com/questions/53751050/python-multiprocessing-understanding-logic-behind-chunksize", "title": "Python multiprocessing: understanding logic behind `chunksize`", "body": "<p>What factors determine an optimal <code>chunksize</code> argument to methods like <code>multiprocessing.Pool.map()</code>?  The <code>.map()</code> method seems to use an arbitrary heuristic for its default chunksize (explained below); what motivates that choice and is there a more thoughtful approach based on some particular situation/setup?</p>\n\n<p>Example - say that I am:</p>\n\n<ul>\n<li>Passing an <code>iterable</code> to <code>.map()</code> that has ~15 million elements;</li>\n<li>Working on a machine with 24 cores and using the default <a href=\"https://github.com/python/cpython/blob/502fe19b10f66235fcf8f13fc1c0308190845def/Lib/multiprocessing/pool.py#L166\" rel=\"noreferrer\"><code>processes = os.cpu_count()</code></a> within <code>multiprocessing.Pool()</code>.</li>\n</ul>\n\n<p>My naive thinking is to give each of 24 workers an equally-sized chunk, i.e. <code>15_000_000 / 24</code> or 625,000.  Large chunks should reduce turnover/overhead while fully utilizing all workers.  But it seems that this is missing some potential downsides of giving large batches to each worker.  Is this an incomplete picture, and what am I missing?</p>\n\n<hr>\n\n<p>Part of my question stems from the default logic for if <code>chunksize=None</code>: both <code>.map()</code> and <code>.starmap()</code> call <a href=\"https://github.com/python/cpython/blob/502fe19b10f66235fcf8f13fc1c0308190845def/Lib/multiprocessing/pool.py#L383\" rel=\"noreferrer\"><code>.map_async()</code></a>, which looks like this:</p>\n\n<pre><code>def _map_async(self, func, iterable, mapper, chunksize=None, callback=None,\n               error_callback=None):\n    # ... (materialize `iterable` to list if it's an iterator)\n    if chunksize is None:\n        chunksize, extra = divmod(len(iterable), len(self._pool) * 4)  # ????\n        if extra:\n            chunksize += 1\n    if len(iterable) == 0:\n        chunksize = 0\n</code></pre>\n\n<p>What's the logic behind <code>divmod(len(iterable), len(self._pool) * 4)</code>?  This implies that the chunksize will be closer to <code>15_000_000 / (24 * 4) == 156_250</code>.  What's the intention in multiplying <code>len(self._pool)</code> by 4?  </p>\n\n<p>This makes the resulting chunksize a factor of 4 <em>smaller</em> than my \"naive logic\" from above, which consists of just dividing the length of the iterable by number of workers in <code>pool._pool</code>.</p>\n\n<p>Lastly, there is also this <a href=\"https://docs.python.org/3.7/library/multiprocessing.html#multiprocessing.pool.Pool.imap\" rel=\"noreferrer\">snippet</a> from the Python docs on <code>.imap()</code> that further drives my curiosity:</p>\n\n<blockquote>\n  <p>The <code>chunksize</code> argument is the same as the one used by the <code>map()</code>\n  method. For very long iterables using a large value for <code>chunksize</code> can\n  make the job complete <strong>much</strong> faster than using the default value of 1.</p>\n</blockquote>\n\n<hr>\n\n<p><sub>Related answer that is helpful but a bit too high-level: <a href=\"https://stackoverflow.com/q/40799172/7954504\">Python multiprocessing: why are large chunksizes slower?</a>.</sub></p>\n"}, {"tags": ["python", "machine-learning", "text"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 3, "creation_date": 1544647690, "post_id": 53751044, "comment_id": 94354918, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544647797, "post_id": 53751044, "comment_id": 94354957, "body": "I&#39;m assuming you have a <code>dict</code> with <code>lists</code> as values for <code>data</code>. Since you have not shown us how <code>data</code> is formatted, I&#39;m assuming that <code>first1000</code> is a <code>list</code> of 1000 words and not a <code>dict</code>. Otherwise you would have done something like <code>first1000 = {&quot;review&quot; : data[&quot;review&quot;][0:1000]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1544648148, "post_id": 53751157, "comment_id": 94355090, "body": "It&#39;s a critical skill.  If I can help the poster so he doesn&#39;t even have to <i>ask</i> the next question, then everybody wins."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1544648185, "post_id": 53751157, "comment_id": 94355104, "body": "@Prune This...This is what I like to see."}, {"owner": {"reputation": 13, "user_id": 10359467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nHooqljFHUo/AAAAAAAAAAI/AAAAAAAAB28/kju7Rg6ttno/photo.jpg?sz=128", "display_name": "Joe", "link": "https://stackoverflow.com/users/10359467/joe"}, "edited": false, "score": 0, "creation_date": 1544651162, "post_id": 53751157, "comment_id": 94356374, "body": "I have removed the    [&quot;review&quot;] element from my call, and it gave me the clean review that I was expecting. I am currently working my way through the debug blog you linked."}, {"owner": {"reputation": 13, "user_id": 10359467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nHooqljFHUo/AAAAAAAAAAI/AAAAAAAAB28/kju7Rg6ttno/photo.jpg?sz=128", "display_name": "Joe", "link": "https://stackoverflow.com/users/10359467/joe"}, "edited": false, "score": 0, "creation_date": 1544652498, "post_id": 53751157, "comment_id": 94356994, "body": "Any recommended ways to debug a python program?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544653328, "post_id": 53751157, "comment_id": 94357339, "body": "If you Google the phrase &quot;Debug Python program&quot;, you\u2019ll find resources that can explain it much better than we can in an answer here."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1544647925, "creation_date": 1544647925, "answer_id": 53751157, "question_id": 53751044, "link": "https://stackoverflow.com/questions/53751044/text-cleaning-and-stopwords/53751157#53751157", "title": "Text Cleaning and Stopwords", "body": "<p>It appears that you have a dict <code>data</code> with various data entries, one of which is under the key <code>\"review\"</code>.  This data entries is a sequence of some sort, perhaps a list of lines (strings).</p>\n\n<p>You swept the first 1000 lines into a new list, <code>first1000</code>.  This is a <code>list</code>, not a <code>dict</code> -- it doesn't have any keys.  You have a sequence of 1000 strings in this variable -- there is no \"review\" entry.</p>\n\n<p>Remove the <code>[\"review\"]</code> element from your call and see what you get.  Better yet, learn some basic debugging: print out the values you're using, to make sure they match what you <em>think</em> they hold.</p>\n\n<p>See this lovely <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug</a> blog for help.</p>\n"}, {"tags": [], "owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1544647997, "creation_date": 1544647997, "answer_id": 53751169, "question_id": 53751044, "link": "https://stackoverflow.com/questions/53751044/text-cleaning-and-stopwords/53751169#53751169", "title": "Text Cleaning and Stopwords", "body": "<p>You're probably getting the error because <code>data[\"review\"][0:1000]</code> is likely a <code>list</code> (or some iterable), not a dictionary. If so, to fix it, just do <code>first1000[0]</code> instead. Impossible to tell since you haven't provided an MVCE, though.</p>\n\n<p>Here's a (smaller) example:</p>\n\n<pre><code>In [4]: data = {'review': list(range(10000))}\n\nIn [5]: data['review'][0:10]\nOut[5]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nIn [6]: first10 = data['review'][0:10]\n\nIn [7]: first10[0]\nOut[7]: 0\n</code></pre>\n\n<p>So, when you access a dictionary item with a given key, then you get whatever that key is <em>pointing to</em>, and <em>not</em> the key itself. Since it's just a <code>list</code>, you'll get a key error if you try to use the key <code>'review'</code>, since <code>list</code> can only take integer indices:</p>\n\n<pre><code>In [8]: first10['review'][0]\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-8-61dfa9e84754&gt; in &lt;module&gt;()\n----&gt; 1 first10['review'][0]\n\nTypeError: list indices must be integers or slices, not str\n</code></pre>\n\n<p>HTH.</p>\n"}], "owner": {"reputation": 13, "user_id": 10359467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nHooqljFHUo/AAAAAAAAAAI/AAAAAAAAB28/kju7Rg6ttno/photo.jpg?sz=128", "display_name": "Joe", "link": "https://stackoverflow.com/users/10359467/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 53751157, "answer_count": 2, "score": -1, "last_activity_date": 1544654604, "creation_date": 1544647393, "last_edit_date": 1544654604, "question_id": 53751044, "link": "https://stackoverflow.com/questions/53751044/text-cleaning-and-stopwords", "title": "Text Cleaning and Stopwords", "body": "<p>I am trying to complete a text learning project for a machine learning class. I was given the following function by my teacher and I don't understand why I'm getting the error I'm getting. This function is supposed to take a string of words, remove the punctuation and stop words, and return the new string.</p>\n\n<pre><code>def review_to_words( raw_review ):\n    # Function to convert a raw review to a string of words\n    # The input is a single string (a raw movie review), and \n    # the output is a single string (a preprocessed movie review)\n    #\n    # 1. Remove HTML\n    review_text = BeautifulSoup(raw_review).get_text() \n    #\n    # 2. Remove non-letters (punctuation)       \n    letters_only = re.sub(\"[^a-zA-Z]\", \" \", review_text) \n    #\n    # 3. Convert to lower case, split into individual words\n    words = letters_only.lower().split()                             \n    #\n    # 4. In Python, searching a set is much faster than searching\n    #   a list, so convert the stop words to a set\n    stops = set(stopwords.words(\"english\"))                  \n    # \n    # 5. Remove stop words\n    meaningful_words = [w for w in words if not w in stops]   \n    #\n    # 6. Join the words back into one string separated by space, \n    # and return the result.\n    return( \" \".join( meaningful_words ))\n\nclean_review = review_to_words(first1000[\"review\"][0] )\n</code></pre>\n\n<p>It says there is a key error with 'review' in the following line:</p>\n\n<pre><code>clean_review = review_to_words(first1000[\"review\"][0] )\n</code></pre>\n\n<p>first1000 is a variable set to:</p>\n\n<pre><code>first1000 = data[\"review\"][0:1000]\n</code></pre>\n\n<p>My dataset is a .tsv file containing several thousand movie reviews from imdb. The variable 'review' is just one review from that dataset.</p>\n\n<p>Again, this function is supposed to take a string of words, remove the punctuation and stop words, and return the new string. I'm not sure what is going on, because I have looked over the code and it looks fine to me.</p>\n\n<p>EDIT: What I'm hearing from the responses so far is, my data is a dictionary of lists. That sounds correct. Each review is a list of words, and the whole dataset is a list of reviews. But now I need to find a method to count the number of lists in the dictionary. What I currently have is:</p>\n\n<pre><code>num_reviews = count(train_reviews[\"reviews\"])\nprint(num_reviews)\n</code></pre>\n\n<p>where train_reviews[\"reviews\"] is a subset of my data. It is still a dictionary of lists. I need to count how many lists there are in train_reviews. I did not get an error with this code, but I did not get any output either. I know for sure it should have produced some output from the print command, which is why I'm confused.</p>\n\n<p>P.S. If I'm supposed to make a whole new question in order to post about a new problem with the same code, please just tell me and I will remember that in the future.</p>\n"}, {"tags": ["python", "python-3.x", "gekko"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 1026739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/722f252d31139e2a1edb8aac133d596a?s=128&d=identicon&r=PG", "display_name": "aknight0", "link": "https://stackoverflow.com/users/1026739/aknight0"}, "is_accepted": false, "score": 2, "last_activity_date": 1547946289, "creation_date": 1547946289, "answer_id": 54272716, "question_id": 53751032, "link": "https://stackoverflow.com/questions/53751032/problem-of-using-gekko-variables-in-self-defined-function-in-python/54272716#54272716", "title": "Problem of using GEKKO variables in self-defined function in python", "body": "<p>Unfortunately Gekko doesn't have full support for numpy arrays right now, and the error comes from trying to insert a Gekko variable into a numpy array.  To make an array of Gekko variables, you need to either use Gekko arrays, or nested lists.  Here's an example of both approaches:</p>\n\n<pre><code>from gekko import GEKKO\n\nm = GEKKO()\n\nni = 3  # number of rows\nnj = 2  # number of columns\n\n# best method: use m.Array function\nx = m.Array(m.Var,(ni,nj))\nm.Equations([x[i][j]==i*j+1 for i in range(ni) for j in range(nj)])\n\n# another way: list comprehensions\ny = [[m.Var() for j in range(nj)] for i in range(ni)]\nfor i in range(ni):\n     for j in range(nj):\n         m.Equation(x[i][j]**2==y[i][j])\n\n# summation\nz = m.Var()\nm.Equation(z==sum([sum([x[i][j] for i in range(ni)]) for j in range(nj)]))\n\nm.solve()\n\nprint('x:')\nprint(x)\nprint('y=x**2:')\nprint(y)\nprint('z')\nprint(z.value)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9522305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdb510f159a75a67e1cfebdf8538d75?s=128&d=identicon&r=PG&f=1", "display_name": "jing li", "link": "https://stackoverflow.com/users/9522305/jing-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1554233624, "creation_date": 1544647358, "last_edit_date": 1554233624, "question_id": 53751032, "link": "https://stackoverflow.com/questions/53751032/problem-of-using-gekko-variables-in-self-defined-function-in-python", "title": "Problem of using GEKKO variables in self-defined function in python", "body": "<p>I tried to use GEKKO variables in self-defined function in python. But there are always annoying errors which I cannot find reason for. Could you please give me a favour?</p>\n\n<p>The whole code is too long. So I only picked the important lines here to show the problem.</p>\n\n<pre><code>index = 0\nna = 3\ninter = np.zeros((na,na))\nintera = np.zeros(na*na)\n# all the other unmentioned parameters are constant.\ndef myfunction(x1,x2):\n...\n    gvol_fv = A + B * x1 + C * x1 ** 2\n    for i in range(na):\n        for j in range(na):\n            print(index,aij[index],bij[index],cij[index])\n            intera[index] = aij[index] + bij[index] * x1 + cij[index] * x1**2\n            inter[i][j] = math.exp((aij[index] + bij[index] * x1 + cij[index] * x1**2.0 / 1000.0)/x1)\n            index = index+1\n            print(index)\n...\nreturn [ac1,ac2] # ac1 and ac2 are very complicated variables. \n\nx1 = m.Const(300.0)\nx21,x22 = [m.Var(0.01,0.0,1.0) for i in range (2)]\nmf_x21_1 = myfunction(x1,x21)[0]\nmf_x21_2 = myfunction(x1,x21)[1]\nmf_x22_1 = myfunction(x1,x22)[0]\nmf_x22_2 = myfunction(x1,x22)[1]\nm.Equation(mf_x21_1==mf_x22_1)\nm.Equation(mf_x21_2==mf_x22_2)\nm.options.IMODE = 1\nm.solve()\n</code></pre>\n\n<p>The errors are as following:</p>\n\n<pre><code>#### for intera[index]:\nValueError: setting an array element with a sequence.\n#### for inter[i][j]:\nTypeError: a float is required\n</code></pre>\n"}, {"tags": ["python", "keras", "autoencoder"], "comments": [{"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1544648707, "post_id": 53751024, "comment_id": 94355314, "body": "By &quot;tie&quot; do you mean there are two Dense layers with exactly the same weights? If that&#39;s the case then why don&#39;t you use a single Dense layer and apply it in different parts of your model?"}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "reply_to_user": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1544649594, "post_id": 53751024, "comment_id": 94355674, "body": "Sorry about that, I have updated the question to show what I mean by &quot;tying&quot; the weights. Unfortunately, it is not as simple as using the same layer since the weight matrix has to be transposed."}, {"owner": {"reputation": 10041, "user_id": 5140223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFV3f.jpg?s=128&g=1", "display_name": "rvinas", "link": "https://stackoverflow.com/users/5140223/rvinas"}, "edited": false, "score": 0, "creation_date": 1544685761, "post_id": 53751024, "comment_id": 94365844, "body": "I can&#39;t test it, but I am quite confident that your approach is correct (although I am not sure whether <code>self._trainable_weights.append(self.kernel)</code> is strictly necessary, since the weights <code>self.tied_to.kernel</code> are in theory already trainable). I would suggest you to check the weights after training, and make sure that they are the same. You could also visualize the computational graph with Tensorboard."}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1544696950, "post_id": 53751024, "comment_id": 94371449, "body": "@JamesMchugh I think you should not use <code>self._trainable_weights.append(self.kernel)</code> at all since these weights are not trainable from the viewpoint of custom Dense layer. Either remove that line entirely, or use  <code>self._non_trainable_weights.append(self.kernel)</code> instead so that you can access the weights from the custom Dense layer independently (i.e. using <code>get_weights()</code> method)."}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "edited": false, "score": 0, "creation_date": 1544705425, "post_id": 53751024, "comment_id": 94376107, "body": "How do you invoke your custom layers to build a model?"}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "reply_to_user": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "edited": false, "score": 0, "creation_date": 1544713823, "post_id": 53751024, "comment_id": 94381381, "body": "@MikhailBerlinkov Sorry, I added the relevant code snippet."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "reply_to_user": {"reputation": 10041, "user_id": 5140223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFV3f.jpg?s=128&g=1", "display_name": "rvinas", "link": "https://stackoverflow.com/users/5140223/rvinas"}, "edited": false, "score": 0, "creation_date": 1544714304, "post_id": 53751024, "comment_id": 94381686, "body": "@rvinas The reason I added <code>self._trainable_weights.append(self.kernel)</code> is the <code>get_weights</code> method checks the <code>trainable_weights</code> and <code>non_trainable_weights</code> properties in the model. At least, that is what it looked like after reviewing the <code>Layer</code> class in the <code>keras.engine.baselayer</code> module. Before adding this, the <code>get_weights</code> method did not return the weights in the DenseTied layer&#39;s kernel. When I use <code>get_weights</code> for the tied layers, the weights do not seem to be tied, but maybe it is possible that the weights in <code>_trainable_weights</code> is not updating properly but the kernel is."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "reply_to_user": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1544715125, "post_id": 53751024, "comment_id": 94382255, "body": "@today So in this case, the encode layer would be indirectly responsible for learning the weights the decode layer needs as well? I thought it would be trainable so weights of the decode layer (which would be tied to the encode layer), would be updated directly when backpropagation occurs on that layer. At least, that is what the algorithm in the article looked like it was saying. I will try appending them to <code>self._non_trainable_weights</code> then."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 1, "creation_date": 1544822315, "post_id": 53751024, "comment_id": 94425623, "body": "For anyone interested, the problem was that by using <code>k.variable(k.transpose(self.kernel))</code>, I broke the tie. I had to use <code>k.transpose(self.kernel)</code> instead. However, this does cause some problems when trying to use <code>autoencoder.load_weights(file)</code> since <code>self.kernel</code> is a tensor and does not have the <code>assign</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544719281, "post_id": 53765677, "comment_id": 94384702, "body": "I did use <code>model.get_weights()</code> after training the model, but the weights did not seem to be properly tied. The weights of the decoder did not seem to be the transpose of the decoder. I have not tried <code>model.summary()</code> yet, but that is a good call. I will update you when I test this. Thank you for the answer."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544734899, "post_id": 53765677, "comment_id": 94391813, "body": "I used <code>model.get_weights()</code> and <code>model.summary()</code>, but it did not seem like there were any indications that the weights were tied."}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "reply_to_user": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544738769, "post_id": 53765677, "comment_id": 94393332, "body": "Could you try removing <code>self._trainable_weights.append(self.kernel)</code>? These are not trainable weights of this layer but of the other. I think what happens is that they get updated in two places of the graph and that&#39;s why they are different."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544740047, "post_id": 53765677, "comment_id": 94393740, "body": "I did change it to <code>self._non_trainable_weights.append(self.kernel)</code>, but the weights still seem to be different. If the kernel is not added to either of these lists, it will not print when using <code>model.get_weights()</code>."}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "reply_to_user": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544744785, "post_id": 53765677, "comment_id": 94395147, "body": "Could you show your <code>model.get_weights()</code>  and <code>model.summary()</code> when you add to non-trainable weights. Also, could you share the <code>call</code> method?"}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544815949, "post_id": 53765677, "comment_id": 94423172, "body": "The weights and model summary have been added. I also added the <code>call</code> method, but it was not edited."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544817700, "post_id": 53765677, "comment_id": 94423885, "body": "I added <code>__init__</code> as well. I assumed that the difference in  the number of parameters is caused by the biases, which we do not want to tie in this case. I might have missed something here though."}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "reply_to_user": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544818481, "post_id": 53765677, "comment_id": 94424177, "body": "If <code>call</code> method is the same, then you should have <code>input_shape = output_shape</code> as you apply <code>transpose</code> to kernel. I reproduced your example (with this fix) and have the same weights after training."}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544819474, "post_id": 53765677, "comment_id": 94424547, "body": "Are you saying I should add <code>input_shape = output_shape</code> to the beginning of the <code>build</code> method?"}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "reply_to_user": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544820061, "post_id": 53765677, "comment_id": 94424752, "body": "No, but passing <code>units</code> to your constructor doesn&#39;t make much sense. Could you show what you run, e.g. in colab notebook so that you end up with different weights?"}, {"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "reply_to_user": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544820294, "post_id": 53765677, "comment_id": 94424834, "body": "As an output, I get  32/100 [========&gt;.....................] - ETA: 0s - loss: 0.6486 100/100 [==============================] - 0s 2ms/step - loss: 0.6482 [[-0.76939976  0.43526956 -0.15488403  0.6467319 ]  [ 0.38243875 -0.44671533 -0.8416126  -0.05631071]  [ 0.523417   -0.08810697 -0.61158824 -0.7192199 ]  [-0.26845294  0.37578496  0.00717913  0.05403641]] [[-0.76939976  0.38243875  0.523417   -0.26845294]  [ 0.43526956 -0.44671533 -0.08810697  0.37578496]  [-0.15488403 -0.8416126  -0.61158824  0.00717913]  [ 0.6467319  -0.05631071 -0.7192199   0.05403641]]"}, {"owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "edited": false, "score": 0, "creation_date": 1544820759, "post_id": 53765677, "comment_id": 94425004, "body": "I found the problem thanks to your code. It was because I was converting the output of <code>transpose</code> to a <code>variable</code>. I guess this was untying the weights. I got an error when writing the class, and I thought it was because <code>kernel</code> was not a <code>variable</code>. I guess I was wrong about that. Thank you so much!"}, {"owner": {"reputation": 310, "user_id": 6394698, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29a83707313b0921c352ddd471b6ccdc?s=128&d=identicon&r=PG&f=1", "display_name": "inferno", "link": "https://stackoverflow.com/users/6394698/inferno"}, "edited": false, "score": 0, "creation_date": 1561956891, "post_id": 53765677, "comment_id": 100212425, "body": "I was trying to set the encoding_dim smaller than the dimension of data. With this code, I was getting error if the encoding_dim was set less than 4. Removing <code>assert input_shape[-1] == self.units</code> line in <code>compute_output_shape()</code> fixed it."}], "tags": [], "owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1544820141, "last_edit_date": 1544820141, "creation_date": 1544716760, "answer_id": 53765677, "question_id": 53751024, "link": "https://stackoverflow.com/questions/53751024/tying-autoencoder-weights-in-a-dense-keras-layer/53765677#53765677", "title": "Tying Autoencoder Weights in a Dense Keras Layer", "body": "<blockquote>\n  <p>So after showing my approach, my question is, is this a valid way to tie weights in a Dense Keras layer?</p>\n</blockquote>\n\n<p>Yes, it's valid.</p>\n\n<blockquote>\n  <p>My fear is that this will only set them equal when the model is build, but not actually tie them. My hope is that the backend transpose function is tying them through references under the hood, but I am sure that I am missing something.</p>\n</blockquote>\n\n<p>It actually ties them in a computation graph, you can check in printing <code>model.summary()</code> that there's just one copy of these trainable weights. Also, after training your model you can check weights of corresponding layers with <code>model.get_weights()</code>. When the model is build there're no weights yet actually, just placeholders for them.</p>\n\n<pre><code>random.seed(1)\n\nclass DenseTied(Layer):\n    def __init__(self, units,\n                 activation=None,\n                 use_bias=True,\n                 kernel_initializer='glorot_uniform',\n                 bias_initializer='zeros',\n                 kernel_regularizer=None,\n                 bias_regularizer=None,\n                 activity_regularizer=None,\n                 kernel_constraint=None,\n                 bias_constraint=None,\n                 tied_to=None,\n                 **kwargs):\n        self.tied_to = tied_to\n        if 'input_shape' not in kwargs and 'input_dim' in kwargs:\n            kwargs['input_shape'] = (kwargs.pop('input_dim'),)\n        super().__init__(**kwargs)\n        self.units = units\n        self.activation = activations.get(activation)\n        self.use_bias = use_bias\n        self.kernel_initializer = initializers.get(kernel_initializer)\n        self.bias_initializer = initializers.get(bias_initializer)\n        self.kernel_regularizer = regularizers.get(kernel_regularizer)\n        self.bias_regularizer = regularizers.get(bias_regularizer)\n        self.activity_regularizer = regularizers.get(activity_regularizer)\n        self.kernel_constraint = constraints.get(kernel_constraint)\n        self.bias_constraint = constraints.get(bias_constraint)\n        self.input_spec = InputSpec(min_ndim=2)\n        self.supports_masking = True\n\n    def build(self, input_shape):\n        assert len(input_shape) &gt;= 2\n        input_dim = input_shape[-1]\n\n        if self.tied_to is not None:\n            self.kernel = K.transpose(self.tied_to.kernel)\n            self._non_trainable_weights.append(self.kernel)\n        else:\n            self.kernel = self.add_weight(shape=(input_dim, self.units),\n                                          initializer=self.kernel_initializer,\n                                          name='kernel',\n                                          regularizer=self.kernel_regularizer,\n                                          constraint=self.kernel_constraint)\n        if self.use_bias:\n            self.bias = self.add_weight(shape=(self.units,),\n                                        initializer=self.bias_initializer,\n                                        name='bias',\n                                        regularizer=self.bias_regularizer,\n                                        constraint=self.bias_constraint)\n        else:\n            self.bias = None\n\n        self.built = True\n\n    def compute_output_shape(self, input_shape):\n        assert input_shape and len(input_shape) &gt;= 2\n        assert input_shape[-1] == self.units\n        output_shape = list(input_shape)\n        output_shape[-1] = self.units\n        return tuple(output_shape)\n\n    def call(self, inputs):\n        output = K.dot(inputs, self.kernel)\n        if self.use_bias:\n            output = K.bias_add(output, self.bias, data_format='channels_last')\n        if self.activation is not None:\n            output = self.activation(output)\n        return output\n\n\n# input_ = Input(shape=(16,), dtype=np.float32)\n# encoder\n#\nencoded1 = Dense(4, activation=\"sigmoid\", input_shape=(4,), use_bias=True)\ndecoded1 = DenseTied(4, activation=\"sigmoid\", tied_to=encoded1, use_bias=False)\n\n# autoencoder\n#\nautoencoder = Sequential()\n# autoencoder.add(input_)\nautoencoder.add(encoded1)\nautoencoder.add(decoded1)\n\nautoencoder.compile(optimizer=\"adam\", loss=\"binary_crossentropy\")\n\nprint(autoencoder.summary())\n\nautoencoder.fit(x=np.random.rand(100, 4), y=np.random.randint(0, 1, size=(100, 4)))\n\nprint(autoencoder.layers[0].get_weights()[0])\nprint(autoencoder.layers[1].get_weights()[0])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12451440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nUrTXP3arMY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdvqSpKbVE6Kg8NM-OQbcTinH8jJw/photo.jpg?sz=128", "display_name": "Jochen Sauter", "link": "https://stackoverflow.com/users/12451440/jochen-sauter"}, "is_accepted": false, "score": 4, "last_activity_date": 1574940600, "creation_date": 1574940600, "answer_id": 59087863, "question_id": 53751024, "link": "https://stackoverflow.com/questions/53751024/tying-autoencoder-weights-in-a-dense-keras-layer/59087863#59087863", "title": "Tying Autoencoder Weights in a Dense Keras Layer", "body": "<p>Thanks Mikhail Berlinkov, \nOne imporant remark: This code runs under Keras, but not in eager mode in TF2.0. It runs, but it trains badly. </p>\n\n<p>The critical point is, how the object stores the transposed weight. \nself.kernel = K.transpose(self.tied_to.kernel)</p>\n\n<p>In non eager mode this creates a graph the right way. In eager mode this fails, probably because the value of a transposed variable is stored at build (== the first call), and then used at subsequent calls.</p>\n\n<p>However: the solution is to store the variable unaltered at build, \nand put the transpose operation into the call method. </p>\n\n<p>I spent several days to figure this out, and I am happy if this helps anyone. </p>\n"}], "owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2747, "favorite_count": 3, "accepted_answer_id": 53765677, "answer_count": 2, "score": 5, "last_activity_date": 1574940600, "creation_date": 1544647307, "last_edit_date": 1544817383, "question_id": 53751024, "link": "https://stackoverflow.com/questions/53751024/tying-autoencoder-weights-in-a-dense-keras-layer", "title": "Tying Autoencoder Weights in a Dense Keras Layer", "body": "<p>I am attempting to create a custom, Dense layer in Keras to tie weights in an Autoencoder. I have tried following an example for doing this in convolutional layers <a href=\"https://gist.github.com/dswah/c6b3e4d47d933b057aab32c9c29c4221\" rel=\"noreferrer\">here</a>, but it seemed like some of the steps did not apply for the Dense layer (also, the code is from over two years ago).</p>\n\n<p>By tying weights, I want the decode layer to use the transposed weight matrix of the encode layer. This approach is also taken in <a href=\"https://arxiv.org/pdf/1801.05394.pdf\" rel=\"noreferrer\">this article</a> (page 5). Below is the relevant quote from the article:</p>\n\n<blockquote>\n  <p>Here, we choose both the encoding and decoding activation function to be sigmoid function and only consider the\n  tied weights case, in which W \u2032 = W<sup>T</sup>\n  (where W<sup>T</sup>\n  is the\n  transpose of W ) as most existing deep learning methods\n  do.</p>\n</blockquote>\n\n<p>In the quote above, <em>W</em> is the weight matrix in the encode layer and <em>W'</em> (equal to the transpose of <em>W</em>) is the weight matrix in the decode layer.</p>\n\n<p>I did not change too much in the dense layer. I added a <code>tied_to</code> parameter to the constructor, which allows you to pass the layer you want to tie it to. The only other change was to the <code>build</code> function, the snippet for this is below:</p>\n\n<pre><code>def build(self, input_shape):\n    assert len(input_shape) &gt;= 2\n    input_dim = input_shape[-1]\n\n    if self.tied_to is not None:\n        self.kernel = K.transpose(self.tied_to.kernel)\n        self._non_trainable_weights.append(self.kernel)\n    else:\n        self.kernel = self.add_weight(shape=(input_dim, self.units),\n                                      initializer=self.kernel_initializer,\n                                      name='kernel',\n                                      regularizer=self.kernel_regularizer,\n                                      constraint=self.kernel_constraint)\n    if self.use_bias:\n        self.bias = self.add_weight(shape=(self.units,),\n                                    initializer=self.bias_initializer,\n                                    name='bias',\n                                    regularizer=self.bias_regularizer,\n                                    constraint=self.bias_constraint)\n    else:\n        self.bias = None\n    self.input_spec = InputSpec(min_ndim=2, axes={-1: input_dim})\n    self.built = True\n</code></pre>\n\n<p>Below is the <code>__init__</code> method, the only change here was the addition of the <code>tied_to</code> parameter.</p>\n\n<pre><code>def __init__(self, units,\n             activation=None,\n             use_bias=True,\n             kernel_initializer='glorot_uniform',\n             bias_initializer='zeros',\n             kernel_regularizer=None,\n             bias_regularizer=None,\n             activity_regularizer=None,\n             kernel_constraint=None,\n             bias_constraint=None,\n             tied_to=None,\n             **kwargs):\n    if 'input_shape' not in kwargs and 'input_dim' in kwargs:\n        kwargs['input_shape'] = (kwargs.pop('input_dim'),)\n    super(Dense, self).__init__(**kwargs)\n    self.units = units\n    self.activation = activations.get(activation)\n    self.use_bias = use_bias\n    self.kernel_initializer = initializers.get(kernel_initializer)\n    self.bias_initializer = initializers.get(bias_initializer)\n    self.kernel_regularizer = regularizers.get(kernel_regularizer)\n    self.bias_regularizer = regularizers.get(bias_regularizer)\n    self.activity_regularizer = regularizers.get(activity_regularizer)\n    self.kernel_constraint = constraints.get(kernel_constraint)\n    self.bias_constraint = constraints.get(bias_constraint)\n    self.input_spec = InputSpec(min_ndim=2)\n    self.supports_masking = True\n    self.tied_to = tied_to\n</code></pre>\n\n<p>The <code>call</code> function was not edited, but it is below for reference.</p>\n\n<pre><code>def call(self, inputs):\n    output = K.dot(inputs, self.kernel)\n    if self.use_bias:\n        output = K.bias_add(output, self.bias, data_format='channels_last')\n    if self.activation is not None:\n        output = self.activation(output)\n    return output\n</code></pre>\n\n<p>Above, I added a conditional to check if the <code>tied_to</code> parameter was set, and if so, set the layer's kernel to the transpose of the <code>tied_to</code> layer's kernel.</p>\n\n<p>Below is the code used to instantiate the model. It is done using Keras's sequential API and <code>DenseTied</code> is my custom layer.</p>\n\n<pre><code># encoder\n#\nencoded1 = Dense(2, activation=\"sigmoid\")\n\ndecoded1 = DenseTied(4, activation=\"sigmoid\", tied_to=encoded1)\n\n# autoencoder\n#\nautoencoder = Sequential()\nautoencoder.add(encoded1)\nautoencoder.add(decoded1)\n</code></pre>\n\n<p>After training the model, below is the model summary and weights.</p>\n\n<pre><code>autoencoder.summary()\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\ndense_7 (Dense)              (None, 2)                 10        \n_________________________________________________________________\ndense_tied_7 (DenseTied)     (None, 4)                 12        \n=================================================================\nTotal params: 22\nTrainable params: 14\nNon-trainable params: 8\n________________________________________________________________\n\nautoencoder.layers[0].get_weights()[0]\narray([[-2.122982  ,  0.43029135],\n       [-2.1772149 ,  0.16689162],\n       [-1.0465667 ,  0.9828905 ],\n       [-0.6830663 ,  0.0512633 ]], dtype=float32)\n\n\nautoencoder.layers[-1].get_weights()[1]\narray([[-0.6521988 , -0.7131109 ,  0.14814234,  0.26533198],\n       [ 0.04387903, -0.22077179,  0.517225  , -0.21583867]],\n      dtype=float32)\n</code></pre>\n\n<p>As you can see, the weights reported by <code>autoencoder.get_weights()</code> do not seem to be tied. </p>\n\n<p>So after showing my approach, my question is, is this a valid way to tie weights in a Dense Keras layer? I was able to run the code, and it is currently training. It seems that the loss function is decreasing reasonably as well. My fear is that this will only set them equal when the model is build, but not actually tie them. My hope is that the backend <code>transpose</code> function is tying them through references under the hood, but I am sure that I am missing something.</p>\n"}, {"tags": ["python", "pycharm", "wave"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1544647619, "post_id": 53750976, "comment_id": 94354873, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>, and <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">... the perfect question</a> apply here. StackOverflow is not a design, coding, research, or tutorial resource. However, if you follow whatever resources you find on line, make an honest coding attempt, and run into a problem, you&#39;d have a good example to post."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10782824, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-etuZr6KjTXE/AAAAAAAAAAI/AAAAAAAAAUw/2TKVdhvppsc/photo.jpg?sz=128", "display_name": "Achilleas Peolidis", "link": "https://stackoverflow.com/users/10782824/achilleas-peolidis"}, "is_accepted": false, "score": 0, "last_activity_date": 1544655372, "creation_date": 1544655372, "answer_id": 53752654, "question_id": 53750976, "link": "https://stackoverflow.com/questions/53750976/how-to-generate-and-plot-a-triangle-wave-using-python-and-pycharm-how-do-i-cod/53752654#53752654", "title": "How to generate and plot a triangle wave using python and PyCharm ? How do i code that ?", "body": "<p>Found it ! For anyone looking out there your code is:</p>\n\n<pre><code>from scipy import signal\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nt = np.linspace(0, 4, 400)\nplt.plot(t,2* signal.sawtooth(2 * np.pi * 1 * t,0.5))  \nplt.xlabel(\"Time[s]\")\nplt.ylabel(\"Amplitude[V]\")\nplt.title(\"Singal for sampling\")\nplt.show()\n</code></pre>\n\n<p>Comments: Requires installation of scipy, matplotlib and numpy on the software you use to write code. For any questions on the code don't hesitate to contact me,\nPeace!</p>\n"}], "owner": {"reputation": 1, "user_id": 10782824, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-etuZr6KjTXE/AAAAAAAAAAI/AAAAAAAAAUw/2TKVdhvppsc/photo.jpg?sz=128", "display_name": "Achilleas Peolidis", "link": "https://stackoverflow.com/users/10782824/achilleas-peolidis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1876, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1545141045, "creation_date": 1544647096, "last_edit_date": 1545141045, "question_id": 53750976, "link": "https://stackoverflow.com/questions/53750976/how-to-generate-and-plot-a-triangle-wave-using-python-and-pycharm-how-do-i-cod", "title": "How to generate and plot a triangle wave using python and PyCharm ? How do i code that ?", "body": "<p>I would like to generate and plot a triangle wave of the amplitude of 2V and the frequency of 1 Hz using python. I would like to know the code thats does that as well as a simple explanation of each line.\nI googled that a lot and only found sin waveform ganeration in python and with limited explanation of the code used.<br>\nThink an answer is going to help lot of people getting started with signal processing in python.\nThanks for reading, will appreciate any answer even a link to where the answer may lie.</p>\n"}, {"tags": ["python", "python-idle"], "comments": [{"owner": {"reputation": 356, "user_id": 10772072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb79441d39cbdf6cd725ecfa1d42c65?s=128&d=identicon&r=PG&f=1", "display_name": "Xion", "link": "https://stackoverflow.com/users/10772072/xion"}, "edited": false, "score": 1, "creation_date": 1544649887, "post_id": 53750953, "comment_id": 94355784, "body": "One we can&#39;t test your code like that please link your code on here if possible, two we do not see your output that you have mention"}, {"owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 1, "creation_date": 1544649938, "post_id": 53750953, "comment_id": 94355805, "body": "Instead of calling <code>print</code> multiple times, first construct the entire string (by appending individual strings to a list and joining the list) and then print it in a single call."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 1, "creation_date": 1544649968, "post_id": 53750953, "comment_id": 94355823, "body": "Push everything to a buffer and then print it, instead of calling <code>print</code> a bazillion times."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1544742381, "post_id": 53750953, "comment_id": 94394492, "body": "&#39;GUI game using ASCII&#39;, printed to a text device is contradictory.  What you should is text-based, not GUI."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 9215900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lR41bQ5rKCo/AAAAAAAAAAI/AAAAAAAAAtw/TCMOZt38d9U/photo.jpg?sz=128", "display_name": "yolo", "link": "https://stackoverflow.com/users/9215900/yolo"}, "edited": false, "score": 0, "creation_date": 1544650317, "post_id": 53751619, "comment_id": 94355989, "body": "1.  As I&#39;ve mentioned I&#39;m using colour that which I don&#39;t think is possible to achieve on a command-line  2. Like I said I need to make sure an object is visible.  3.&lt;-"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 127, "user_id": 9215900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lR41bQ5rKCo/AAAAAAAAAAI/AAAAAAAAAtw/TCMOZt38d9U/photo.jpg?sz=128", "display_name": "yolo", "link": "https://stackoverflow.com/users/9215900/yolo"}, "edited": false, "score": 0, "creation_date": 1544742843, "post_id": 53751619, "comment_id": 94394630, "body": "There is no color currently, and print output to the IDLE&#39;s shell is not normally colored by usercode.  (IDLE colors normal output as specified on the settings highlight tab.)  If you want colored text, you should use something else that imitates a color terminal, such as VT100.    The existence of sys.stdout.shell is an IDLE implementation detail, and I expect to rename it &#39;_shell&#39; to indicate such before 3.7.3.  There is not much reason to access it directly."}], "tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1544650197, "last_edit_date": 1544650197, "creation_date": 1544650030, "answer_id": 53751619, "question_id": 53750953, "link": "https://stackoverflow.com/questions/53750953/how-to-make-this-output-faster/53751619#53751619", "title": "How to make this output faster?", "body": "<p>The print output will likely appear faster if you run the code directly with python from a command line instead of with IDLE.  It should also appear faster if you print entire lines at once instead of a character at a time.  It might be faster yet if you calculate all lines as one string and print everything at once with one print call.</p>\n"}], "owner": {"reputation": 127, "user_id": 9215900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lR41bQ5rKCo/AAAAAAAAAAI/AAAAAAAAAtw/TCMOZt38d9U/photo.jpg?sz=128", "display_name": "yolo", "link": "https://stackoverflow.com/users/9215900/yolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544650240, "creation_date": 1544646983, "last_edit_date": 1544650240, "question_id": 53750953, "link": "https://stackoverflow.com/questions/53750953/how-to-make-this-output-faster", "title": "How to make this output faster?", "body": "<pre><code>import time\nimport sys\ntry:                                                                        \n    shell = sys.stdout.shell\nexcept AttributeError:\n    raise RuntimeError(\"you must run this program in IDLE\")\n\nGrid=[[0,0,0,0,0,1,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,],[0,0,0,0,0,0,0,0,0,0,]]\ncounterX=0\ncounterY=0\nwhile (counterX&lt;=10 and counterY&lt;=19):\n    if(Grid[counterY-1][counterX-1]==0):\n        if (counterX!=10):\n            shell.write(\"\u2b1b\")\n        else:\n            shell.write(\"\u2b1b\\n\")\n    if(Grid[counterY-1][counterX-1]==1):\n        if (counterX!=10):\n            print(\"\u2b1b\", end=\"\")\n        else:\n            print(\"\u2b1b\")\n    if(counterX!=10):\n        counterX+=1\n    else:\n        counterX=0\n        counterY+=1\ni=0\nfor i in range (0,44):\n    print(\"\")\n    i+=1\n</code></pre>\n\n<p>I set myself the challenge of creating a GUI game using ASCII- and in doing so I print out the game grid every single game state (I print it so that it looks like it has replaced the last game state when really it has been printed enough lines down so it looks to be in the same place).I print each tile individually because I need my object to take up a different colour to differentiate background and object. (I haven't yet added the 'if value 1 make the colour red\")</p>\n\n<p>Anyway- when printing this out, you can see it print row by row. It's fast- but noticeable. How do I print it all at once?</p>\n\n<p>The new code is to be tested on a fullscreen shell window</p>\n"}, {"tags": ["python", "mongodb", "amazon-web-services", "aws-lambda", "pymongo"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 8484970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WdM01.jpg?s=128&g=1", "display_name": "Little Bamboo", "link": "https://stackoverflow.com/users/8484970/little-bamboo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544671121, "creation_date": 1544671121, "answer_id": 53754549, "question_id": 53750941, "link": "https://stackoverflow.com/questions/53750941/unable-to-import-pymongo-into-aws-lambda-function/53754549#53754549", "title": "Unable to import Pymongo into AWS Lambda Function", "body": "<p>The way I solved this issue was by packaging up the entire 'site-packages' directory in my virtual environment, rather than just the individual package locations.  It appears pymongo installs additional dependencies, such as bson library, that are required.  </p>\n\n<p>Here is the specific process I used to package installed libraries for use in aws lambda.</p>\n\n<pre><code>mkdir -p ./package/tmp/lib\ncp -a ./lambda/. ./package/tmp/\ncp -a venv/lib/python3.7/site-packages/. ./package/tmp/\nrm -rf ./package/tmp/wheel* &amp;&amp; rm -rf ./package/tmp/pip*\ncd ./package/tmp &amp;&amp; zip -r ../../hotel-car-rental.zip .\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 10775237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nj1CM.jpg?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/10775237/liam"}, "is_accepted": false, "score": 2, "last_activity_date": 1544694779, "creation_date": 1544694779, "answer_id": 53759083, "question_id": 53750941, "link": "https://stackoverflow.com/questions/53750941/unable-to-import-pymongo-into-aws-lambda-function/53759083#53759083", "title": "Unable to import Pymongo into AWS Lambda Function", "body": "<p>You could also - instead of doing this since it requires copying/tinkering with your own stuff - run this inside a docker container to package up lambda.</p>\n\n<pre><code>docker run -v &lt;code directory&gt;:/function -it --rm ubuntu\napt-get update\napt-get install python-pip\napt-get install zip\n\ncd function\npip install -t . pymongo\ncd ..\nzip -r linux-lambda.zip working\n</code></pre>\n\n<p>The only reason I do this now is that when using a Mac - which I do - it can sometimes give an \"Invalid ELF Header\" error and Lambda won't compile!</p>\n"}], "owner": {"reputation": 83, "user_id": 8484970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WdM01.jpg?s=128&g=1", "display_name": "Little Bamboo", "link": "https://stackoverflow.com/users/8484970/little-bamboo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1984, "favorite_count": 0, "accepted_answer_id": 53754549, "answer_count": 2, "score": 3, "last_activity_date": 1544694779, "creation_date": 1544646948, "question_id": 53750941, "link": "https://stackoverflow.com/questions/53750941/unable-to-import-pymongo-into-aws-lambda-function", "title": "Unable to import Pymongo into AWS Lambda Function", "body": "<p>How can I use pymongo in a lambda function?</p>\n\n<p>After following the instructions from AWS - <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html#python-package-dependencies\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html#python-package-dependencies</a>, I've found that the <strong>pymongo</strong> library is <strong>not recognized by my lambda handler function</strong>, but other local packages are.</p>\n\n<p>The <strong>python-dateutil</strong> is a local package that <strong>works as expected</strong> , however the pymongo package is not recognized as an import and fails when run.</p>\n\n<p>My file name is correctly listed in the lambda handler function as well (hotel-car-rental.lambda_handler) and other local package imports work fine.  So I believe it is something to do with pymongo?  How can I get pymongo to work with aws lambda?  </p>\n\n<p><strong>Here is the lambda file structure:</strong></p>\n\n<ul>\n<li>BookTrip\n\n<ul>\n<li>dateutil</li>\n<li>pymongo</li>\n<li>hotel-car-rental.py</li>\n</ul></li>\n</ul>\n\n<p><strong>Here is the code:</strong></p>\n\n<pre><code>import json\nimport datetime\nimport dateutil.parser  # &lt;--- Works with local package\nimport logging\n\nfrom pymongo import MongoClient   # &lt;--- Does NOT work with local package\n\n# --- Main handler ---\n\ndef lambda_handler(event, context):\n    \"\"\"\n    Route the incoming request based on intent.\n    The JSON body of the request is provided in the event slot.\n    \"\"\"\n\n    logger.debug('event.bot.name={}'.format(event['bot']['name']))\n\n    return dispatch(event)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1544646975, "post_id": 53750897, "comment_id": 94354607, "body": "<code>df[&#39;descrsched&#39;].apply(extract)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 617, "user_id": 3825949, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/640e8f564df2e1dd50f6e21bb4f2e3a9?s=128&d=identicon&r=PG&f=1", "display_name": "HMan06", "link": "https://stackoverflow.com/users/3825949/hman06"}, "edited": false, "score": 0, "creation_date": 1544651607, "post_id": 53751041, "comment_id": 94356591, "body": "Thank you! So much simpler than it seemed."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1544647387, "creation_date": 1544647387, "answer_id": 53751041, "question_id": 53750897, "link": "https://stackoverflow.com/questions/53750897/python-series-objects-are-mutable-address-parsing/53751041#53751041", "title": "Python - Series Objects are Mutable - Address Parsing", "body": "<h3>MCVE</h3>\n\n<pre><code>df = pd.DataFrame([[1, 2,], [3, 4]])\ndf\n\n# This is a tuple (index value, Series object that represents row)\n#   |\n#   v    \nfor i in df.iterrows():\n    print(df[i])\n#            ^\n#            |\n# This is you trying to tell Pandas to use a tuple\n# in which the second element is a Series as a reference for a column name\n</code></pre>\n\n<h3>Resolve X/Y problem</h3>\n\n<pre><code>df['cleansed_address'] = df['descrsched'].str.findall(pat).str[0]\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 3825949, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/640e8f564df2e1dd50f6e21bb4f2e3a9?s=128&d=identicon&r=PG&f=1", "display_name": "HMan06", "link": "https://stackoverflow.com/users/3825949/hman06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 53751041, "answer_count": 1, "score": 2, "last_activity_date": 1544647387, "creation_date": 1544646761, "question_id": 53750897, "link": "https://stackoverflow.com/questions/53750897/python-series-objects-are-mutable-address-parsing", "title": "Python - Series Objects are Mutable - Address Parsing", "body": "<p>I am attempting to create a new column in a data frame that will parse out an address from a string. When attempting to do this, I receive the following error:</p>\n\n<pre><code>(\"'Series' objects are mutable, thus they cannot be hashed\", u'occurred at index pk')\n</code></pre>\n\n<p>I have seen other questions similar to this on this site but don't quite understand how it applies to my code:</p>\n\n<pre><code>import usaddress, re, pyodbc\nimport pandas as pd\n\nconn = pyodbc.connect(\"DSN=TEST;UID=test;PWD=test\")\n\nsql = \"select top 10 pk, address from test..test\"\ndf = pd.read_sql(sql,conn)\n\npattern = re.compile(\".+\\\\b[0-9]{5}\\\\b\")\n\ndef extract(pat):\n    print pat\n    test = pattern.findall(pat)\n    return str(test[0])\n\ni = 0\n\nfor i in df.iterrows():\n    df[i]['cleansed_address'] = df.apply(lambda x: extract(df[i]['descrsched']))\n    i+=1\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "selenium-grid"], "answers": [{"comments": [{"owner": {"reputation": 2043, "user_id": 5551731, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6bc4dfeb01fd4f4da799cf14377d591c?s=128&d=identicon&r=PG&f=1", "display_name": "Taranjit Kang", "link": "https://stackoverflow.com/users/5551731/taranjit-kang"}, "edited": false, "score": 0, "creation_date": 1544713681, "post_id": 53753788, "comment_id": 94381299, "body": "Hmm if thats the case, whats the best way to differentiate and run resolution based on desktop/tablet/mobile. Capabilities would be the same, but If I hard code the resolution it will always be whatever the code implies.   I see there is a property for desiredCapabilities: commandLineFlags maybe leverage this?"}], "tags": [], "owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "is_accepted": true, "score": 1, "last_activity_date": 1544664603, "creation_date": 1544664603, "answer_id": 53753788, "question_id": 53750888, "link": "https://stackoverflow.com/questions/53750888/python-selenium-grid/53753788#53753788", "title": "Python + Selenium Grid", "body": "<p>You can't set that via the server/grid because they don't setup a container for your browser to run in like browser stack. You will need to set the browser size in your python code via <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html?highlight=window#selenium.webdriver.remote.webdriver.WebDriver.set_window_size\" rel=\"nofollow noreferrer\">the set_window_size command</a></p>\n"}], "owner": {"reputation": 2043, "user_id": 5551731, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6bc4dfeb01fd4f4da799cf14377d591c?s=128&d=identicon&r=PG&f=1", "display_name": "Taranjit Kang", "link": "https://stackoverflow.com/users/5551731/taranjit-kang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1263, "favorite_count": 0, "accepted_answer_id": 53753788, "answer_count": 1, "score": 0, "last_activity_date": 1570162346, "creation_date": 1544646713, "last_edit_date": 1570162346, "question_id": 53750888, "link": "https://stackoverflow.com/questions/53750888/python-selenium-grid", "title": "Python + Selenium Grid", "body": "<p>I managed to set up a Node + Hub on my own pc. </p>\n\n<p>I have a file called <code>run_parallel_test.py</code> that simply just creates a process to execute test scripts based on sys args, which are just browser configs with capabilities.</p>\n\n<p>The command would be as follows: </p>\n\n<pre><code>python run_parallel_tests.py testrunner.py browsers.json\n</code></pre>\n\n<p><code>testrunner.py</code> is basically Python's unittest framework executing test suites.</p>\n\n<p>The issue I am having is before, I was hooked with browser stack and not selenium grid, I was able to pass browser capabilities such as this:</p>\n\n<pre><code>    [\n  {\n    \"browser\": \"Chrome\",\n    \"browser_version\": \"71.0 beta\",\n    \"os\": \"Windows\",\n    \"os_version\": \"10\",\n    \"resolution\": \"1920x1080\"\n  },\n  {\n    \"browser\": \"Firefox\",\n    \"browser_version\": \"blah blah\",\n    \"os\": \"Windows\",\n    \"os_version\": \"10\",\n    \"resolution\": \"1920x1080\"\n  }\n]\n</code></pre>\n\n<p>Now with a grid, those capabilities no longer work, and I have created barebone capabilities to simply run my tests such as:</p>\n\n<pre><code>    [\n  {\n    \"browserName\": \"chrome\",\n    \"browser_version\": \"71.0 beta\",\n    \"platform\": \"WINDOWS\"\n  },\n  {\n    \"browserName\": \"firefox\",\n    \"browser_version\": \"64.0 beta\",\n    \"platform\": \"WINDOWS\"\n  },\n  {\n    \"browserName\": \"chrome\",\n    \"platform\": \"WINDOWS\"\n  },\n  {\n    \"browserName\": \"internet explorer\",\n    \"platform\": \"WINDOWS\"\n  }\n]\n</code></pre>\n\n<p>The issue is, I no longer can set the resolution etc via my JSON file config as I was before when using browser stack. Is there a way to set up the resolution?</p>\n\n<p>I have checked: <a href=\"https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities</a>\nI could not find the documentation for it. Maybe I am looking at the wrong place.</p>\n"}, {"tags": ["python", "unit-testing", "flask", "mocking", "pytest"], "comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1544647501, "post_id": 53750873, "comment_id": 94354820, "body": "Your decorator in the first example is invalid."}, {"owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "edited": false, "score": 0, "creation_date": 1544965051, "post_id": 53750873, "comment_id": 94453420, "body": "Take a look at <a href=\"https://stackoverflow.com/questions/53771263/mock-a-python-function-that-is-used-by-another-function\">this question</a>. You your problem is similar."}, {"owner": {"reputation": 366, "user_id": 1416114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f269fc85df4cb18a33ed9a3c4f4448?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1416114/adam"}, "edited": false, "score": 0, "creation_date": 1576970453, "post_id": 53750873, "comment_id": 105064815, "body": "This is precisely the same issue against which I&#39;ve been bashing my head. I&#39;d be wildly interested in finding out a working technique for this."}], "answers": [{"tags": [], "owner": {"reputation": 580, "user_id": 4319301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/426c8ff5577e62e762b8226f8884f9b4?s=128&d=identicon&r=PG", "display_name": "Luis Sobrecueva", "link": "https://stackoverflow.com/users/4319301/luis-sobrecueva"}, "is_accepted": false, "score": 0, "last_activity_date": 1575415335, "creation_date": 1575415335, "answer_id": 59166850, "question_id": 53750873, "link": "https://stackoverflow.com/questions/53750873/path-issues-when-attempting-to-patch-or-monkeypatch-a-function-called-in-a-flask/59166850#59166850", "title": "Path issues when attempting to patch or monkeypatch a function called in a Flask API", "body": "<p>The problem here is that in <code>api.py</code> you are importing a function of the module</p>\n\n<pre><code>from project_name.api.auth import login_auth\n</code></pre>\n\n<p>and it seems like the namespaces need to match, so as workaround you can import the whole module and call the funcion with the complete namespace:</p>\n\n<pre><code>if not project_name.api.auth.login_auth(username, password):\n</code></pre>\n\n<p>You can take a look to this other question too:\n<a href=\"https://stackoverflow.com/questions/5286390/mocking-functions-using-python-mock\">mocking functions using python mock</a></p>\n"}], "owner": {"reputation": 926, "user_id": 381158, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0f87063cd5f4bfb15c83497e07b638f6?s=128&d=identicon&r=PG", "display_name": "anthr", "link": "https://stackoverflow.com/users/381158/anthr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575415335, "creation_date": 1544646632, "question_id": 53750873, "link": "https://stackoverflow.com/questions/53750873/path-issues-when-attempting-to-patch-or-monkeypatch-a-function-called-in-a-flask", "title": "Path issues when attempting to patch or monkeypatch a function called in a Flask API", "body": "<p>I am trying to build out some tests for a Flask application and I'm struggling to get some of the mocking/patching working as expected.</p>\n\n<p>Despite spending time reading/thinking through the documentation around <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow noreferrer\">where to patch</a>, neither <code>@patch</code> or <code>monkeypatch</code> appear to behave as I expect and I'm struggling to see what I'm doing wrong.</p>\n\n<p>In the Flask <code>api.py</code> file I have a simple login API that checks an auth requirement (defined elsewhere and imported as shown):</p>\n\n<pre><code>from project_name.api.auth import login_auth\n\n@api.route('/v1/login', methods=['POST'])\n\n    data = request.get_json()\n\n    username = data['Username']\n    password = data['Password']\n\n    if not login_auth(username, password):\n        raise APIError('Invalid Username or Password')\n    ...\n</code></pre>\n\n<p>and I'm interested in patching the <code>login_auth</code> function so that I can test without a real username/password.</p>\n\n<p>In my pytest file, I have attempted to use both patch and monkeypatch to solve this.</p>\n\n<p><strong><code>@patch</code> approach:</strong></p>\n\n<pre><code>@patch('project_name.api.auth.login_auth')\ndef test_login(mock_login_auth, client):\n    mock_login_auth.return_value = True\n    mimetype = 'application/json'\n    headers = {\n        'Content-Type': mimetype,\n        'Accept': mimetype\n    }\n    data = {\n        'Username': \"test_user\",\n        'Password': \"test_password\",\n    }\n    url = 'api/v1/login'\n\n    assert project_name.api.auth.login_auth('x', 'y') == True                                                                                                                                                                                                               \n\n    response = client.post(url, data=json.dumps(data), headers=headers)\n    assert response.status_code == 200\n</code></pre>\n\n<p>And if I run this test then the first assert statement which calls the patched function directly will work as expected, however the API call will not use the mocked <code>login_auth</code> function and the test will fail this criteria.</p>\n\n<p><strong><code>monkeypatch</code> approach:</strong></p>\n\n<pre><code>def test_login2(client, monkeypatch):\n    monkeypatch.setattr(\"project_name.api.auth.login_auth\", lambda x, y: True)\n    mimetype = 'application/json'\n    headers = {\n        'Content-Type': mimetype,\n        'Accept': mimetype\n    }\n    data = {\n        'Username': \"test_user\",\n        'Password': \"test_password\",\n    }\n    url = 'api/v1/login'\n\n    assert project_name.api.auth.login_auth('x', 'y') == True                                                                                                                                                                                                               \n\n    response = client.post(url, data=json.dumps(data), headers=headers)\n    assert response.status_code == 200\n</code></pre>\n\n<p>And again, I see the first assert, that calls the function directly, being patched as expected but the function that is being called after the request to the API has not been patched so the test will fail on the second <code>assert</code> statement.</p>\n\n<p>I've tried a number of different approaches, including trying to patch the <code>login_auth</code> at the path <code>project_name.api.login_auth</code> (under the assumption that I'm trying to patch the specific login_auth function that gets imported into the <code>api.py</code> file) but the right approach is not clear to me. </p>\n\n<p>I'm wondering if there is something specific I need to do given that I'm using Flask's test_client approach, or whether there is something else I'm missing.</p>\n"}, {"tags": ["python", "python-3.x", "list", "math", "topology"], "answers": [{"comments": [{"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1544647164, "post_id": 53750910, "comment_id": 94354685, "body": "This works as you said,<code>a</code> is always a flat list. Could you write <code>result</code> as not in list comprehension form? I need to understand how this works, and this <code>result</code> is a bit confusing."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1544647460, "last_edit_date": 1544647460, "creation_date": 1544646812, "answer_id": 53750910, "question_id": 53750840, "link": "https://stackoverflow.com/questions/53750840/how-to-find-the-difference-between-each-element-of-two-list-while-one-of-them-is/53750910#53750910", "title": "How to find the difference between each element of two list while one of them is not a nested list", "body": "<p>with your inputs:</p>\n\n<pre><code>a = [1,2,3,4]\nb = [1,[2,3],[3,4]]\n</code></pre>\n\n<p>now I'm converting <code>a</code> as a <code>set</code></p>\n\n<pre><code>a = set(a)\n</code></pre>\n\n<p>then I'm performing set difference between <code>a</code> and elements of <code>b</code>, with just a test to see if the element is a simple value or a list. Convert back each element to <code>list</code> or use <code>sorted</code> to get increasing order.</p>\n\n<pre><code>result = [list(a-(set(be if isinstance(be,list) else [be]))) for be in b]\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>[[2, 3, 4], [1, 4], [1, 2]]\n</code></pre>\n\n<p>Small variant, creating directly a <code>set</code> when passed a non-list:</p>\n\n<pre><code>result = [list(a-(set(be) if isinstance(be,list) else {be})) for be in b]\n</code></pre>\n\n<p>And non comprehension implementation</p>\n\n<pre><code>a = set(a)\nresult = []\nfor be in b:\n    if isinstance(be,list):\n        result.append(list(a-set(be)))\n    else:\n        result.append(list(a - {be}))\n</code></pre>\n\n<p>Only works with \"flat\" lists like your example</p>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1544647558, "last_edit_date": 1544647558, "creation_date": 1544647167, "answer_id": 53750990, "question_id": 53750840, "link": "https://stackoverflow.com/questions/53750840/how-to-find-the-difference-between-each-element-of-two-list-while-one-of-them-is/53750990#53750990", "title": "How to find the difference between each element of two list while one of them is not a nested list", "body": "<p>You can do this with <a href=\"https://docs.python.org/3.7/library/stdtypes.html#frozenset\" rel=\"nofollow noreferrer\">frozenset's or sets</a>:</p>\n\n<pre><code>a = {1,2,3,4}    # normal set (mutable)\nb = [1,frozenset({2,3}),frozenset({3,4})] # frozenset in list to keep ordering \n\nc = [ (a-x) if isinstance(x,set) else (a-set([x])) for x in b]\n\nprint(c)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[set([2, 3, 4]), set([1, 4]), set([1, 2])]\n</code></pre>\n\n<hr>\n\n<p>Unrolled list comp:</p>\n\n<pre><code>d = []\nfor top in b:\n    d.append( a-top if isinstance(top,set) else a-set([top]) )\n\n# d == c \n</code></pre>\n\n<p><code>a-top</code> is just the shorthand for <a href=\"https://docs.python.org/3.7/library/stdtypes.html#frozenset.difference\" rel=\"nofollow noreferrer\">set.difference</a>. Here is a <a href=\"https://docs.python.org/2/library/sets.html#set-objects\" rel=\"nofollow noreferrer\">table of shorthands for sets (2.7 - still valid)</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1544647533, "post_id": 53751002, "comment_id": 94354838, "body": "note that &quot;differences between sets&quot; isn&#39;t symmetrical. <code>a-b != b-a</code>. +1 for changing OP inputs for <code>set</code>s, as they should be right from the start"}, {"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1544647943, "post_id": 53751002, "comment_id": 94355024, "body": "The problem is I can&#39;t take each element of <code>b</code> as a set, for example if I do <code>set(input(&quot;input the elements&quot;))</code> it takes &quot;,&quot; as like an element. If I convert it to <code>int</code> I got an error. So when the user input the elements of <code>b</code> I can&#39;t convert them to a set, that&#39;s why I&#39;ve used lists."}, {"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1544648010, "post_id": 53751002, "comment_id": 94355041, "body": "The input the user gives is <code>1,4,3</code> for example?"}, {"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1544648140, "post_id": 53751002, "comment_id": 94355085, "body": "@user8408080 well, for example; <code>1,(1,2),(2,3,4)</code> as like in a Topology, usually its more than 1 element. So for example set(1) throws an integer error, while <code>2,3</code> doesn&#39;t give any error but takes &quot;,&quot; as an element (comma)."}, {"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "reply_to_user": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1544648717, "post_id": 53751002, "comment_id": 94355316, "body": "@GLHF I think this should now fit your needs, but for a logical input the user should also put a set of length 1 in brackets"}], "tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": false, "score": 2, "last_activity_date": 1544651228, "last_edit_date": 1544651228, "creation_date": 1544647214, "answer_id": 53751002, "question_id": 53750840, "link": "https://stackoverflow.com/questions/53750840/how-to-find-the-difference-between-each-element-of-two-list-while-one-of-them-is/53751002#53751002", "title": "How to find the difference between each element of two list while one of them is not a nested list", "body": "<p>When working with mathematical sets you should really use the provided <code>set</code> type in Python. I wrote your sets as Python sets:</p>\n\n<pre><code>a = {1,2,3,4}\nb = [{1},{2,3},{3,4}]\n</code></pre>\n\n<p>Notice, that <code>b</code> is a list of sets; your topology on <code>a</code>. You can find differences between sets with the <code>-</code> operator (with two sets <code>A</code> and <code>B</code>, <code>A-B</code> is the same as the mathematical <code>A\\B</code>):</p>\n\n<pre><code>res = [a-el for el in b]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In [11]: res\nOut[11]: [{2, 3, 4}, {1, 4}, {1, 2}]\n</code></pre>\n\n<p>this is a list of the differences between the sets</p>\n\n<p><strong>EDIT</strong> Here is a way to transform your inputs in the way that you wanted:</p>\n\n<p>First of all, prompt the user to write every set in parenthesis, to have a regular syntax, like for example: <code>(1),(1,2),(2,3,4)</code> </p>\n\n<p>Now we need a regular expression to find the sets in the resulting string <code>\"(1),(1,2),(2,3,4)\"</code>:</p>\n\n<pre><code>import re\ninp_list = re.findall(r\"(?:\\(([\\d,]+))\", inp_string)\n</code></pre>\n\n<p>Now we can start with the solution mentioned above:</p>\n\n<pre><code>res = [{int(number) for number in inp.split(\",\")} for inp in inp_list]\n</code></pre>\n\n<p>To understand the regex, <a href=\"https://regex101.com/r/sYMjIs/1\" rel=\"nofollow noreferrer\">click here</a></p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544650953, "creation_date": 1544650953, "answer_id": 53751816, "question_id": 53750840, "link": "https://stackoverflow.com/questions/53750840/how-to-find-the-difference-between-each-element-of-two-list-while-one-of-them-is/53751816#53751816", "title": "How to find the difference between each element of two list while one of them is not a nested list", "body": "<p>I consider to write a custom method which returns the difference between two list:</p>\n\n<pre><code>def difference(w, z):\n  [w.remove(x) for x in z if x in w]\n  return w\n</code></pre>\n\n<p>Then use the method in a for loop:</p>\n\n<pre><code>res = []\nfor y in b:\n  tmp = a[:]\n  if not isinstance(y, list): y = [y]\n  res.append(difference(tmp, y))\n\nprint(res)\n#=&gt; [[2, 3, 4], [1, 4], [1, 2]]\n</code></pre>\n\n<p><hr>\nI don't know if it is useful but in this case:</p>\n\n<pre><code>a = [1,2,2,3,4]\nb = [1,[2,3],[3,4],5]\n</code></pre>\n\n<p>The result is <code>[[2, 2, 3, 4], [1, 2, 4], [1, 2, 2], [1, 2, 2, 3, 4]]</code></p>\n\n<p>You can customize the method to better fit your needs.</p>\n"}], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1544651228, "creation_date": 1544646466, "last_edit_date": 1544646740, "question_id": 53750840, "link": "https://stackoverflow.com/questions/53750840/how-to-find-the-difference-between-each-element-of-two-list-while-one-of-them-is", "title": "How to find the difference between each element of two list while one of them is not a nested list", "body": "<p>I'm trying to write an algorithtm that finds the difference between 2 lists, but one of them is not a nested list.</p>\n\n<p>For example;</p>\n\n<pre><code>a = [1,2,3,4]\nb = [1,[2,3],[3,4]]\n</code></pre>\n\n<p>Expected output is</p>\n\n<pre><code>expected = [[2,3,4],[1,4],[1,2]]\n</code></pre>\n\n<p>So the goal is, find <code>a-b1</code> where <code>b1</code> is the each element in <code>b</code> one by one.</p>\n\n<p>I tried to convert them to <code>set()</code>,<code>frozenset()</code> used <code>filter()</code> etc. but none of them was succesful. Either I got integer error or an output that is wrong(in my case).</p>\n\n<p>My actual goal is writing this algorithm for Topology, where <code>a</code> is the set and <code>b</code> is the Topology on <code>a</code>. So I'm trying to write the <strong>closed set</strong> of that Topology. </p>\n\n<p>In the real question, <code>a</code> and <code>b</code> are both sets where <code>b</code> is a nested <code>set</code>, but I realized working with <code>lists</code> is easier than <code>sets</code> to achieve my goal, but still none of the answers similar to my question(on stackoverflow) were not successful.</p>\n\n<p>How can I find the <code>closed set</code> of a <code>given set</code>, or, find the difference of all elements in the list2 from list1, where list2 is a nested list and list1 is not.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 9639535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1aebc8abed3dd73d8583ada9ee2b427?s=128&d=identicon&r=PG&f=1", "display_name": "Elias K.", "link": "https://stackoverflow.com/users/9639535/elias-k"}, "is_accepted": false, "score": 5, "last_activity_date": 1544647481, "creation_date": 1544647481, "answer_id": 53751063, "question_id": 53750791, "link": "https://stackoverflow.com/questions/53750791/specify-dtype-option-on-import-or-set-low-memory-false/53751063#53751063", "title": "Specify dtype option on import or set low_memory=False", "body": "<p>This solved my problem from <a href=\"https://stackoverflow.com/questions/24251219/pandas-read-csv-low-memory-and-dtype-options\">here</a>    </p>\n\n<pre><code>dashboard_df = pd.read_csv(p_file, sep=',', error_bad_lines=False, index_col=False, dtype='unicode')\n</code></pre>\n\n<p>Could anyone explain this answer to me tough?</p>\n"}], "owner": {"reputation": 379, "user_id": 9639535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1aebc8abed3dd73d8583ada9ee2b427?s=128&d=identicon&r=PG&f=1", "display_name": "Elias K.", "link": "https://stackoverflow.com/users/9639535/elias-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11375, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1544647481, "creation_date": 1544646177, "question_id": 53750791, "link": "https://stackoverflow.com/questions/53750791/specify-dtype-option-on-import-or-set-low-memory-false", "title": "Specify dtype option on import or set low_memory=False", "body": "<p>I am using the following code:</p>\n\n<pre><code>df = pd.read_csv('/Python Test/AcquirerRussell3000.csv')\n</code></pre>\n\n<p>I have the following type of data: </p>\n\n<pre><code>18.07.2000  27.1875         0 08.08.2000  25.3125       0.1 05.09.2000  \\\n0   19.07.00  26.6250 -0.020690   09.08.00  25.2344 -0.003085   06.09.00   \n1   20.07.00  26.6250  0.000000   10.08.00  25.1406 -0.003717   07.09.00   \n2   21.07.00  25.6875 -0.035211   11.08.00  25.5781  0.017402   08.09.00   \n3   24.07.00  26.2500  0.021898   14.08.00  25.4375 -0.005497   11.09.00   \n4   25.07.00  26.6875  0.016667   15.08.00  25.5625  0.004914   12.09.00 \n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>Pythone Test/untitled0.py:1: DtypeWarning: Columns (long list of numbers) have mixed types. \nSpecify dtype option on import or set low_memory=False.\n</code></pre>\n\n<p>So every 3rd column is a date the rest are numbers. I guess there is no single dtype since dates are strings and the rest is a float or int? I have about 5000 columns or more and around 400 rows.</p>\n\n<p>I have seen similar questions to this but dont quite know how to apply this to my data. Furthermore I want to run the following code after to stack the data frame.</p>\n\n<pre><code>a = np.arange(len(df.columns))\ndf.columns = [a % 3, a // 3]\ndf = df.stack().reset_index(drop=True)\n\ndf.to_csv('AcquirerRussell3000stacked.csv', sep=',')\n</code></pre>\n\n<p>What dtype should I use? Or should I just set low_memory to false?</p>\n"}, {"tags": ["python", "tkinter", "frames", "menubar"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1544646868, "post_id": 53750741, "comment_id": 94354566, "body": "You are asking how to switch pages via a menubar, and in your question you link to another question that answers that very question. Why is that answer not enough? What is unique about your question?"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1544699955, "post_id": 53750741, "comment_id": 94373169, "body": "Wyh do you use <code>SampleApp().show_frame(&quot;PageTwo&quot;)</code> instead of <code>command=lambda: controller.show_frame(&quot;PageTwo&quot;)</code> as within the other Button commands?"}], "owner": {"reputation": 1, "user_id": 7947835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa14febb24210518d95fa79a869c965?s=128&d=identicon&r=PG", "display_name": "MilesDyson", "link": "https://stackoverflow.com/users/7947835/milesdyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544645987, "creation_date": 1544645987, "question_id": 53750741, "link": "https://stackoverflow.com/questions/53750741/switch-frame-from-menubar-in-tkinter", "title": "Switch Frame From Menubar in Tkinter", "body": "<p>i am new to tkinter and trying to learn how to use it, as i was searching for answers to what i wanted to do in a GUI i came across this example <a href=\"https://stackoverflow.com/questions/7546050/switch-between-two-frames-in-tkinter\">HERE</a> to tinker around with switching between pages, then another example i found <a href=\"https://stackoverflow.com/questions/3520494/class-menu-in-tkinter-gui\">HERE</a> to add a Menubar as a class to the window.</p>\n\n<p>I had every thing working as i would like, after several attempts and searches to use the menubar to switch frames instead of using a button, i did find how to do this <a href=\"https://stackoverflow.com/questions/47117911/how-to-change-page-through-my-menu-bar-methods-in-tkinter\">HERE</a> and understand this method however the menubar is not a class in its self but defined within the SampleApp() class. not sure if it is better to have the menubar as a class or to have it inside the SampleApp() class. I would like the menubar to be always visible.</p>\n\n<p>the closest that i could get was by calling the function form the class SampleApp() to raise the frame but it opens a new window instead.</p>\n\n<p>How can i switch between pages from the menubar?</p>\n\n<p>any help would be greatly appreciated, thank you.</p>\n\n<p>here is the code i have. instead of switching frames it opens another window.</p>\n\n<pre><code>#!/usr/bin/python3\nfrom tkinter import *\nfrom tkinter import ttk\nfrom tkinter import font  as tkfont\n\n\n\nclass SampleApp(Tk):\n\n    def __init__(self, *args, **kwargs):\n        Tk.__init__(self, *args, **kwargs)\n\n        self.title_font = tkfont.Font(family='Helvetica', size=18, weight=\"bold\", slant=\"italic\")\n        self.title(\"Window\")\n        # the container is where we'll stack a bunch of frames\n        # on top of each other, then the one we want visible\n        # will be raised above the others\n        container = Frame(self)\n        container.pack(side=\"top\", fill=\"both\", expand=True)\n        container.grid_rowconfigure(0, weight=1)\n        container.grid_columnconfigure(0, weight=1)\n\n        self.frames = {}\n        for F in (Home_Page, Insert_Page, PageTwo):\n            page_name = F.__name__\n            frame = F(parent=container, controller=self)\n            self.frames[page_name] = frame\n\n            # put all of the pages in the same location;\n            # the one on the top of the stacking order\n            # will be the one that is visible.\n            frame.grid(row=0, column=0, sticky=\"nsew\")\n        menubar = MenuBar(self)\n        self.config(menu=menubar)\n\n\n        w = 800 # width for the Tk root\n        h = 650 # height for the Tk root\n\n        # get screen width and height\n        ws = self.winfo_screenwidth() # width of the screen\n        hs = self.winfo_screenheight() # height of the screen\n\n        # calculate x and y coordinates for the Tk root window\n        x = (ws/4) - (w/2)\n        y = (hs/2) - (h/2)\n\n        # set the dimensions of the screen \n        # and where it is placed\n        self.geometry('%dx%d+%d+%d' % (w, h, x, y))\n\n\n\n        self.show_frame(\"Home_Page\")\n\n    def show_frame(self, page_name):\n        '''Show a frame for the given page name'''\n        frame = self.frames[page_name]\n        frame.tkraise()\n\nclass MenuBar(Menu):\n    def __init__(self, parent):\n        Menu.__init__(self, parent)\n\n        filemenu = Menu(self, tearoff=False)\n        self.add_cascade(label=\"File\",underline=0, menu=filemenu)\n        filemenu.add_command(label=\"New\", command = self.donothing)\n        filemenu.add_command(label = \"Open\", command = self.donothing)\n        filemenu.add_command(label = \"Save\", command = self.donothing)\n        filemenu.add_command(label = \"Save as...\", command = self.donothing)\n        filemenu.add_command(label = \"Close\", command = self.donothing)\n        filemenu.add_separator()\n        filemenu.add_command(label = \"Exit\", command = self.quit)\n\n        editmenu = Menu(self, tearoff=False)\n        self.add_cascade(label = \"Edit\", menu = editmenu)\n        editmenu.add_command(label = \"Undo\", command = self.donothing)\n        editmenu.add_separator()\n        editmenu.add_command(label = \"Cut\", command = self.donothing)\n        editmenu.add_command(label = \"Copy\", command = self.donothing)\n        editmenu.add_command(label = \"Paste\", command = self.donothing)\n        editmenu.add_command(label = \"Delete\", command = self.donothing)\n        editmenu.add_command(label = \"Select All\", command = self.donothing)\n\n        recordsmenu = Menu(self, tearoff=False)\n        self.add_cascade(label=\"Records\", underline=0, menu=recordsmenu)\n        recordsmenu.add_command(label=\"Insert\", command=lambda: SampleApp().show_frame(\"Insert_Page\"))\n        recordsmenu.add_command(label=\"Search\", command=lambda: SampleApp().show_frame(\"PageTwo\"))\n\n        helpmenu = Menu(self, tearoff=False)\n        self.add_cascade(label = \"Help\", menu = helpmenu)\n        helpmenu.add_command(label = \"Help Index\", command = self.donothing)\n        helpmenu.add_command(label = \"About...\", command = self.donothing)\n\n    def quit(self):\n        sys.exit(0)\n\n    def donothing(self):\n        filewin = Toplevel()\n        button = Button(filewin, text=\"Do nothing button\")\n        button.pack()\n\n\nclass Home_Page(Frame):\n\n    def __init__(self, parent, controller):\n        Frame.__init__(self, parent)\n        self.controller = controller\n        label = Label(self, text=\"Home Page\", font=controller.title_font)\n        label.pack(side=\"top\", fill=\"x\", pady=10)\n\n        button1 = Button(self, text=\"Page One\", command=lambda: controller.show_frame(\"Insert_Page\"))\n        button2 = Button(self, text=\"Page Two\", command=lambda: controller.show_frame(\"PageTwo\"))\n        button1.pack()\n        button2.pack()\n\n\nclass Insert_Page(Frame):\n\n    def __init__(self, parent, controller):\n        Frame.__init__(self, parent)\n        self.controller = controller\n\n        label = Label(self, text=\"This is page 1\", font=controller.title_font)\n        label.pack(side=\"top\", fill=\"x\", pady=10)\n\n        page = ttk.Notebook(self)\n        tab1 = ttk.Frame(page)\n        tab2 = ttk.Frame(page)\n        tab3 = ttk.Frame(page)\n\n        page.add(tab1, text='One')\n        page.add(tab2, text='Two')\n        page.add(tab3, text='three')\n\n        page.pack(fill=BOTH, expand=1)\n\n        day_label = Label(tab1, text=\"Tab1:\")\n        day_label.pack()\n        day_label.place(x=0, y=30)\n        day_label = Label(tab2, text=\"Tab2:\")\n        day_label.pack()\n        day_label.place(x=0, y=30)\n        day_label = Label(tab3, text=\"Tab3:\")\n        day_label.pack()\n        day_label.place(x=0, y=30)\n\n        button = Button(self, text=\"Go to the start page\", command=lambda: controller.show_frame(\"Home_Page\"))\n        button.pack()\n\n\nclass PageTwo(Frame):\n\n    def __init__(self, parent, controller):\n        Frame.__init__(self, parent)\n        self.controller = controller\n        label = Label(self, text=\"This is page 2\", font=controller.title_font)\n        label.pack(side=\"top\", fill=\"x\", pady=10)\n        button = Button(self, text=\"Go to the start page\", command=lambda: controller.show_frame(\"Home_Page\"))\n        button.pack()\n\n\nif __name__ == \"__main__\":\n    app = SampleApp()\n    app.mainloop()\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544646197, "post_id": 53750733, "comment_id": 94354285, "body": "If you open up the developer tools of the browser, and check the network tab, do you see your webpage making a request to fetch the .css file? What status code does the request return?"}, {"owner": {"reputation": 57, "user_id": 8745473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e76e0936171de37790b52c122aae43?s=128&d=identicon&r=PG", "display_name": "Berat Bozkurt", "link": "https://stackoverflow.com/users/8745473/berat-bozkurt"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544646464, "post_id": 53750733, "comment_id": 94354391, "body": "@mckuok return 500 INTERNAL SERVER ERROR"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544646639, "post_id": 53750733, "comment_id": 94354457, "body": "version of flask and Werkzeug?"}, {"owner": {"reputation": 57, "user_id": 8745473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e76e0936171de37790b52c122aae43?s=128&d=identicon&r=PG", "display_name": "Berat Bozkurt", "link": "https://stackoverflow.com/users/8745473/berat-bozkurt"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544646954, "post_id": 53750733, "comment_id": 94354601, "body": "@mckuok Flask 1.0.2 and Werkzeug==0.11.15"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544647143, "post_id": 53750733, "comment_id": 94354678, "body": "According to flask, the required  Werkzeug version is <code>Werkzeug &gt;= 0.14</code> from <a href=\"http://flask.pocoo.org/docs/1.0/changelog/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 57, "user_id": 8745473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e76e0936171de37790b52c122aae43?s=128&d=identicon&r=PG", "display_name": "Berat Bozkurt", "link": "https://stackoverflow.com/users/8745473/berat-bozkurt"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544648059, "post_id": 53750733, "comment_id": 94355059, "body": "@mckuok thank you so much"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1544648542, "post_id": 53750733, "comment_id": 94355253, "body": "if the upgrade solves the problem you can select my answer so others can use this as reference for later"}], "answers": [{"tags": [], "owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "is_accepted": true, "score": 1, "last_activity_date": 1544648512, "creation_date": 1544648512, "answer_id": 53751281, "question_id": 53750733, "link": "https://stackoverflow.com/questions/53750733/flask-doesnt-see-the-static-file/53751281#53751281", "title": "Flask doesn&#39;t see the static file", "body": "<p>According to flask, the required Werkzeug version is Werkzeug >= 0.14 from <a href=\"http://flask.pocoo.org/docs/1.0/changelog/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 57, "user_id": 8745473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e76e0936171de37790b52c122aae43?s=128&d=identicon&r=PG", "display_name": "Berat Bozkurt", "link": "https://stackoverflow.com/users/8745473/berat-bozkurt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 1, "accepted_answer_id": 53751281, "answer_count": 1, "score": 0, "last_activity_date": 1544648512, "creation_date": 1544645946, "question_id": 53750733, "link": "https://stackoverflow.com/questions/53750733/flask-doesnt-see-the-static-file", "title": "Flask doesn&#39;t see the static file", "body": "<p>Regards, It's been seeing my static files by now. I am using VS Code as an editor. I clicked accidentally debug mode and then it stopped seeing my static files. I started VS Code again but the result hasn't changed. How can I solve this problem? When I open localhost, it shows <em>127.0.0.1:5000/static/css/main.css</em> but it gives an error when I display the page source and open the css file on the new page. </p>\n\n<p>The error I get in the browser is: <em>TypeError: make_conditional() got an unexpected keyword argument 'accept_ranges'</em></p>\n\n<p>The error I received in VS Code is as follows: </p>\n\n<pre><code>127.0.0.1 - - [12/Dec/2018 23:17:50] \"GET /static/css/main.css HTTP/1.1\" 500 -\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 2309, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 2295, in wsgi_app\n    response = self.handle_exception(e)\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1741, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/usr/local/lib/python3.6/site-packages/flask/_compat.py\", line 35, in reraise\n    raise value\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 2292, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1815, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1718, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/usr/local/lib/python3.6/site-packages/flask/_compat.py\", line 35, in reraise\n    raise value\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/usr/local/lib/python3.6/site-packages/flask/helpers.py\", line 976, in send_static_file\n    cache_timeout=cache_timeout)\n  File \"/usr/local/lib/python3.6/site-packages/flask/helpers.py\", line 713, in send_from_directory\n    return send_file(filename, **options)\n  File \"/usr/local/lib/python3.6/site-packages/flask/helpers.py\", line 628, in send_file\n    complete_length=fsize)\nTypeError: make_conditional() got an unexpected keyword argument 'accept_ranges'\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "django-2.1"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9727749"}, "edited": false, "score": 0, "creation_date": 1544646986, "post_id": 53750727, "comment_id": 94354613, "body": "Did you modify the logout view at all? I suspect it has something to do with your logout_then_login view, but would have to see more code."}, {"owner": {"reputation": 113, "user_id": 9503183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce45a7565467b0798674f3152cab103d?s=128&d=identicon&r=PG&f=1", "display_name": "Martix", "link": "https://stackoverflow.com/users/9503183/martix"}, "edited": false, "score": 0, "creation_date": 1544647407, "post_id": 53750727, "comment_id": 94354779, "body": "add logout.html"}], "answers": [{"tags": [], "owner": {"reputation": 17759, "user_id": 2091925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc96737b990c24e08de6174eed0b0f?s=128&d=identicon&r=PG", "display_name": "Will Keeling", "link": "https://stackoverflow.com/users/2091925/will-keeling"}, "is_accepted": true, "score": 2, "last_activity_date": 1544650464, "last_edit_date": 1544650464, "creation_date": 1544649930, "answer_id": 53751598, "question_id": 53750727, "link": "https://stackoverflow.com/questions/53750727/problem-with-err-too-many-redirects-django-2-1/53751598#53751598", "title": "Problem with ERR_TOO_MANY_REDIRECTS django 2.1", "body": "<p>You've set <code>LOGOUT_REDIRECT_URL</code> to point back to the <code>LogoutView</code> which will cause a redirect loop. The <code>LOGOUT_REDIRECT_URL</code> <a href=\"https://docs.djangoproject.com/en/dev/ref/settings/#logout-redirect-url\" rel=\"nofollow noreferrer\">should point to a URL</a> that the user will be redirected to <em>after</em> they've logged out using the <code>LogoutView</code>.</p>\n\n<p>Setting <code>LOGOUT_REDIRECT_URL</code> will override any template that's been set. Since you've explicitly set a template for the <code>LogoutView</code> in your <code>urls.py</code>, you should remove <code>LOGOUT_REDIRECT_URL</code> from your settings which will allow the template to be rendered.</p>\n"}], "owner": {"reputation": 113, "user_id": 9503183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce45a7565467b0798674f3152cab103d?s=128&d=identicon&r=PG&f=1", "display_name": "Martix", "link": "https://stackoverflow.com/users/9503183/martix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3058, "favorite_count": 0, "accepted_answer_id": 53751598, "answer_count": 1, "score": 3, "last_activity_date": 1544650464, "creation_date": 1544645899, "last_edit_date": 1544649049, "question_id": 53750727, "link": "https://stackoverflow.com/questions/53750727/problem-with-err-too-many-redirects-django-2-1", "title": "Problem with ERR_TOO_MANY_REDIRECTS django 2.1", "body": "<p>I started to create login module in django. Login module is ok but I have problem with logout. When i click Logout - we see \"error -ERR_TOO_MANY_REDIRECTS\" </p>\n\n<p>Probably something in this file is incorect: account/urls.py</p>\n\n<pre><code>from django.conf.urls import url\nfrom django.urls import path\nfrom django.contrib.auth import views as auth_views\nfrom . import views\n\napp_name = 'account'\n\nurlpatterns = [\n    path('', auth_views.LoginView.as_view(template_name='account/login.html'), name='login'),\n    path('logout/', auth_views.LogoutView.as_view(template_name='registration/logout.html'), name='logout'),\n    path('logout-then-login/', auth_views.logout_then_login, name='logout_then_login'),\n    path('dashboard/', views.dashboard, name='dashboard'),\n</code></pre>\n\n<p>base.html</p>\n\n<pre><code>&lt;body&gt;\n  &lt;div id=\"header\"&gt;\n  {% if request.user.is_authenticated %}\n    &lt;ul class=\"menu\"&gt;\n      &lt;li {% if section == \"dashboard\" %} class=\"selected\"{% endif %}&gt;\n        &lt;a href=\"{% url \"account:dashboard\" %}\"&gt;Panel g\u0142\u00f3wny&lt;/a&gt;\n      &lt;/li&gt;\n      &lt;li {% if section == \"images\" %} class=\"selected\"{% endif %}&gt;\n        &lt;a href=\"#\"&gt;Obrazy&lt;/a&gt;\n      &lt;/li&gt;\n      &lt;li {% if section == \"people\" %} class=\"selected\"{% endif %}&gt;\n        &lt;a href=\"#\"&gt;Ludzie&lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  {% endif %}\n\n    &lt;span class=\"user\"&gt;\n        {% if request.user.is_authenticated %}\n            Witaj, {{ request.user.first_name }}\n            &lt;a href=\"{% url \"account:logout\" %}\"&gt;Wyloguj&lt;/a&gt;\n        {% else %}\n            &lt;a href=\"{% url \"account:login\" %}\"&gt;Zaloguj&lt;/a&gt;\n        {% endif %}\n    &lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div id=\"content\"&gt;\n        {% block content %}\n        {% endblock %}\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>logout.html</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block title %} Wylogowanie {% endblock %}\n\n{% block content %}\n    &lt;h1&gt;Wylogowanie&lt;/h1&gt;\n    &lt;p&gt;Zostales wylogowany. Mozesz\n        &lt;a href=\"{% url \"account:login\" %}\"&gt;zalogowac sie ponownie&lt;/a&gt;&lt;/p&gt;\n{% endblock %}\n</code></pre>\n\n<p>settings.html</p>\n\n<pre><code>...\nLOGIN_REDIRECT_URL = reverse_lazy('account:dashboard')\nLOGIN_URL = reverse_lazy('account:login')\nLOGOUT_REDIRECT_URL = reverse_lazy('account:logout')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/88j7I.png\" rel=\"nofollow noreferrer\">show error</a></p>\n"}, {"tags": ["python", "matplotlib", "subplot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1544646059, "post_id": 53750714, "comment_id": 94354219, "body": "Maybe you want to set a <code>fig.suptitle</code> instead of three individual ones?"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 3354353, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000226335803/picture?type=large", "display_name": "Caio Belfort", "link": "https://stackoverflow.com/users/3354353/caio-belfort"}, "is_accepted": false, "score": 0, "last_activity_date": 1544646752, "creation_date": 1544646752, "answer_id": 53750895, "question_id": 53750714, "link": "https://stackoverflow.com/questions/53750714/automate-matplotlib-figure-dimension-based-on-the-title/53750895#53750895", "title": "Automate matplotlib figure dimension based on the title", "body": "<p>Based on the comment of @ImportanceOfBeingErnest you can do this:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndata = dict(var1=np.random.normal(0, 1, 1000), var2=np.random.normal(0, 2, 1000), var3=np.random.normal(1, 2, 1000))\nvar_title = 'Really really long overlapping title' \n\n\nf, ax = plt.subplots(1, 3)\nfor i in range(len(data)):\n    ax[i].boxplot(data[list(data.keys())[i]])\nf.suptitle(var_title)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Jqt8T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jqt8T.png\" alt=\"Result\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 10782802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752c174765f97472b3bc279949a668a7?s=128&d=identicon&r=PG&f=1", "display_name": "rLevv", "link": "https://stackoverflow.com/users/10782802/rlevv"}, "is_accepted": true, "score": 2, "last_activity_date": 1544647169, "creation_date": 1544647169, "answer_id": 53750991, "question_id": 53750714, "link": "https://stackoverflow.com/questions/53750714/automate-matplotlib-figure-dimension-based-on-the-title/53750991#53750991", "title": "Automate matplotlib figure dimension based on the title", "body": "<p>In order to create a title for multiple subplots you can use <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html\" rel=\"nofollow noreferrer\">Figure.suptitle</a> instead of fig.title and format font size and such as specified there.</p>\n\n<p>So your code will look like:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndata = dict(var1=np.random.normal(0, 1, 1000), \nvar2=np.random.normal(0, 2, 1000), var3=np.random.normal(1, 2, 1000))\nvar_title = 'Really really long overlapping title'\nfig = plt.figure()\nfig.suptitle(var_title)\nfor i in range(len(data)):\n    plt.subplot(1, 3, i + 1)\n    plt.boxplot(data[data.keys()[i]])\n    plt.show()\n</code></pre>\n\n<p>Question is also answered <a href=\"https://stackoverflow.com/questions/7526625/matplotlib-global-legend-and-title-aside-subplots\">here</a> by orbeckst.</p>\n"}], "owner": {"reputation": 615, "user_id": 5413581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10203805705341991/picture?type=large", "display_name": "&#193;lvaro M&#233;ndez Civieta", "link": "https://stackoverflow.com/users/5413581/%c3%81lvaro-m%c3%a9ndez-civieta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53750991, "answer_count": 2, "score": 0, "last_activity_date": 1544647169, "creation_date": 1544645812, "question_id": 53750714, "link": "https://stackoverflow.com/questions/53750714/automate-matplotlib-figure-dimension-based-on-the-title", "title": "Automate matplotlib figure dimension based on the title", "body": "<p>I have a set of three variables for which I would like to calculate a boxplot. The three variables share the same title, and have different x label, and I want the three of them to be created in the same figure.</p>\n\n<p>Look to the following example (with fake data):</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndata = dict(var1=np.random.normal(0, 1, 1000), var2=np.random.normal(0, 2, 1000), var3=np.random.normal(1, 2, 1000))\nvar_title = 'Really really long overlapping title'\nfig = plt.figure()\nfor i in range(len(data)):\n    plt.subplot(1, 3, i + 1)\n    plt.boxplot(data[data.keys()[i]])\n    plt.title(var_title)\n    plt.show()\n</code></pre>\n\n<p>This code generates the following figure:\n<a href=\"https://i.stack.imgur.com/2AHgW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2AHgW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, what I want is either to set just one title over the three subplots (since the title is the same) or get python to automatically redimension the figure so that the title fits and can be read.</p>\n\n<p>I am asking for this because this figure creation is part of a batch process in which the figures are saved automatically and used on the generation of PDF documents, so I cannot be involved on changing the figure dimensions one at a time.</p>\n"}, {"tags": ["python", "python-3.x", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 0, "creation_date": 1544671811, "post_id": 53754625, "comment_id": 94361925, "body": "You beat me by 1 minute."}], "tags": [], "owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "is_accepted": false, "score": 2, "last_activity_date": 1544671777, "creation_date": 1544671777, "answer_id": 53754625, "question_id": 53750677, "link": "https://stackoverflow.com/questions/53750677/retrieve-values-by-the-column-names-in-python-psycopg2/53754625#53754625", "title": "retrieve values by the column names in python psycopg2", "body": "<p><code>cursor2.description[0]</code> is a <code>psycopg2.extensions.Column</code> object, you can access its fields by name, e.g.</p>\n\n<pre><code>cursor2.description[0].type_code\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6091251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8a93a50c2a9994da28fcaffecb44ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Lee", "link": "https://stackoverflow.com/users/6091251/sean-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544671777, "creation_date": 1544645658, "last_edit_date": 1544655591, "question_id": 53750677, "link": "https://stackoverflow.com/questions/53750677/retrieve-values-by-the-column-names-in-python-psycopg2", "title": "retrieve values by the column names in python psycopg2", "body": "<pre><code>&gt;&gt;&gt; import psycopg2\n&gt;&gt;&gt; tb = 'races';\n&gt;&gt;&gt; conn2 = psycopg2.connect(host='localhost',dbname=latest_prod_copy,port=5438)\n&gt;&gt;&gt; cursor2.execute(sql.SQL(\"SELECT * from {}\").format(sql.Identifier(tb)))\n&gt;&gt;&gt; cursor2.description[0]\nColumn(name='id', type_code=23, display_size=None, internal_size=4, precision=None, scale=None, null_ok=None)\n&gt;&gt;&gt; cursor2.description[0][0]\n'id'\n&gt;&gt;&gt; cursor2.description[0][1]\n23\n</code></pre>\n\n<p>My question is how to retrieve values by the key? such as cursor2.description[0]->'type_code', instead of cursor2.description[0][1]</p>\n\n<p><a href=\"http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.Column\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/extensions.html#psycopg2.extensions.Column</a>\n<a href=\"http://initd.org/psycopg/docs/cursor.html#cursor.description\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/cursor.html#cursor.description</a></p>\n"}]