[{"tags": ["python", "python-2.7", "python-3.x", "parameters", "syntax-error"], "answers": [{"tags": [], "owner": {"reputation": 2439, "user_id": 2605317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3b74ebdc72c5c99c93ac018be3b67b?s=128&d=identicon&r=PG&f=1", "display_name": "Mithilesh Gupta", "link": "https://stackoverflow.com/users/2605317/mithilesh-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1487203456, "creation_date": 1487203456, "answer_id": 42262424, "question_id": 42262376, "link": "https://stackoverflow.com/questions/42262376/python-parameters-syntaxerror-invalid-syntax/42262424#42262424", "title": "Python parameters SyntaxError: invalid syntax", "body": "<p><code>@click</code> command should be used with <code>functions</code></p>\n\n<p>your code should be like:</p>\n\n<pre><code>@click.argument('-target_image', type=click.Path(exists=True))\n@click.argument('-source_image', type=click.Path(exists=True))\ndef match_color(target_img, source_img, mode='pca', eps=1e-5):\n    #body\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 0, "accepted_answer_id": 42262424, "answer_count": 1, "score": 1, "last_activity_date": 1487203745, "creation_date": 1487203120, "last_edit_date": 1487203745, "question_id": 42262376, "link": "https://stackoverflow.com/questions/42262376/python-parameters-syntaxerror-invalid-syntax", "title": "Python parameters SyntaxError: invalid syntax", "body": "<p>I have a lot of bash related programming skills, but my Python skills are lacking. I can't seem to do something as simple as having two parameters for a user to input images. </p>\n\n<p>The code is supposed to take two images from separate parameters, and then run the \"match_color\" function with them before outputting a new image. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>from types import SimpleNamespace\nimport argparse \n\n@click.argument('-target_image', type=click.Path(exists=True))\n@click.argument('-source_image', type=click.Path(exists=True))\n#Specify the name of the output file.\n#@click.argument('-out_file', type=click.Path(exists=True))\n\n\n\nparser = argparse.ArgumentParser()\nargs.parser.parse_args\nargs = SimpleNamespace(**kwargs)\ntarget_img = Image.open(args.target_image)\nsource_img = Image.open(args.source_image)\n\n\n\n\ndef match_color(target_img, source_img, mode='pca', eps=1e-5):\n    '''\n    Matches the colour distribution of the target image to that of the source image\n    using a linear transform.\n    Images are expected to be of form (w,h,c) and float in [0,1].\n    Modes are chol, pca or sym for different choices of basis.\n    '''\n    mu_t = target_img.mean(0).mean(0)\n    t = target_img - mu_t\n    t = t.transpose(2,0,1).reshape(3,-1)\n    Ct = t.dot(t.T) / t.shape[1] + eps * eye(t.shape[0])\n    mu_s = source_img.mean(0).mean(0)\n    s = source_img - mu_s\n    s = s.transpose(2,0,1).reshape(3,-1)\n    Cs = s.dot(s.T) / s.shape[1] + eps * eye(s.shape[0])\n    if mode == 'chol':\n        chol_t = np.linalg.cholesky(Ct)\n        chol_s = np.linalg.cholesky(Cs)\n        ts = chol_s.dot(np.linalg.inv(chol_t)).dot(t)\n    if mode == 'pca':\n        eva_t, eve_t = np.linalg.eigh(Ct)\n        Qt = eve_t.dot(np.sqrt(np.diag(eva_t))).dot(eve_t.T)\n        eva_s, eve_s = np.linalg.eigh(Cs)\n        Qs = eve_s.dot(np.sqrt(np.diag(eva_s))).dot(eve_s.T)\n        ts = Qs.dot(np.linalg.inv(Qt)).dot(t)\n    if mode == 'sym':\n        eva_t, eve_t = np.linalg.eigh(Ct)\n        Qt = eve_t.dot(np.sqrt(np.diag(eva_t))).dot(eve_t.T)\n        Qt_Cs_Qt = Qt.dot(Cs).dot(Qt)\n        eva_QtCsQt, eve_QtCsQt = np.linalg.eigh(Qt_Cs_Qt)\n        QtCsQt = eve_QtCsQt.dot(np.sqrt(np.diag(eva_QtCsQt))).dot(eve_QtCsQt.T)\n        ts = np.linalg.inv(Qt).dot(QtCsQt).dot(np.linalg.inv(Qt)).dot(t)\n    matched_img = ts.reshape(*target_img.transpose(2,0,1).shape).transpose(1,2,0)\n    matched_img += mu_s\n    matched_img[matched_img&gt;1] = 1\n    matched_img[matched_img&lt;0] = 0\n    return matched_img\n\n matched_img.save('out.png')\n</code></pre>\n\n<p>When trying to run the code, I get this error: </p>\n\n<pre><code>ubuntu@ubuntu-VirtualBox:/media/ubuntu/Transfer$ python3 linear-color-transfer.py -target_image fig4_style3.jpg -source_image fig4_content.jpg\n  File \"linear-color-transfer.py\", line 11\n    parser = argparse.ArgumentParser()\n         ^\nSyntaxError: invalid syntax\nubuntu@ubuntu-VirtualBox:/media/ubuntu/Transfer$\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1487202322, "post_id": 42262230, "comment_id": 71681983, "body": "No. Your search is using Python, Python&#39;s is using compiled-C code (if you are using CPython). The time <i>complexity</i> will be the same, though."}, {"owner": {"reputation": 151, "user_id": 5616833, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fce3419254b5244f380570a9dde2a7d4?s=128&d=identicon&r=PG&f=1", "display_name": "eukoloko", "link": "https://stackoverflow.com/users/5616833/eukoloko"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487202399, "post_id": 42262230, "comment_id": 71682007, "body": "Ah thanks for the response. So the two functions are not directly comparable because they use different languages?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487202419, "post_id": 42262230, "comment_id": 71682014, "body": "Python probably doesn&#39;t use a Python implementation for <code>index</code>; it probably uses some C code (or the native language of the implementation for Jython, etc)."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487202444, "post_id": 42262230, "comment_id": 71682022, "body": "Roughly, yes. Although, if you are using PyPy, <code>index</code> will be written in Python!"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1487204016, "post_id": 42262230, "comment_id": 71682490, "body": "You could put <code>time.sleep(1000)</code> inside your for-loop and its algorithmic complexity would still be O(N)."}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 4, "last_activity_date": 1487202349, "creation_date": 1487202349, "answer_id": 42262251, "question_id": 42262230, "link": "https://stackoverflow.com/questions/42262230/why-is-the-python-index-function-execution-time-faster-than-my-own-linear-search/42262251#42262251", "title": "Why is the python index function execution time faster than my own linear search function?", "body": "<p>Python's <code>list.index</code> function runs at C speed, and I don't see how your Python variant can possibly beat that.</p>\n\n<p>This of course assumes your Python installation uses CPython.</p>\n"}, {"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": false, "score": 5, "last_activity_date": 1487202536, "creation_date": 1487202536, "answer_id": 42262279, "question_id": 42262230, "link": "https://stackoverflow.com/questions/42262230/why-is-the-python-index-function-execution-time-faster-than-my-own-linear-search/42262279#42262279", "title": "Why is the python index function execution time faster than my own linear search function?", "body": "<p>This is a very important thing to understand... <strong><code>O(N)</code> tells you <em>nothing</em> about how quickly the operation will complete.</strong>  Just because your implementation and python's implementation are both <code>O(N)</code>, that doesn't mean that they'll both take the same amount of time.</p>\n\n<p>What <code>O(N)</code> tells you is that if one implementation takes 1s to process 100 items, it'll probably take about 2s to process 200 items.  In other words, <code>O(N)</code> tells you how the time spent in the algorithm will <em>scale</em> as the size of the input changes.</p>\n\n<hr>\n\n<p>In this case, python's search will always beat your search because python's search is operating in <code>C</code> (assuming CPython) with very little overhead for the interpreter -- whereas your implementation has to do a lot of lookups in \"python-space\" (which is surprisingly expensive in comparison).</p>\n\n<p>Some python implementations with a good JIT (e.g. <code>pypy</code>) will be able to reduce this difference, but I doubt that you'll ever be able to beat the performance of the optimized built-in function.</p>\n"}, {"tags": [], "owner": {"reputation": 646, "user_id": 7541446, "user_type": "registered", "profile_image": "https://graph.facebook.com/404103756589237/picture?type=large", "display_name": "Joseph Chotard", "link": "https://stackoverflow.com/users/7541446/joseph-chotard"}, "is_accepted": false, "score": 1, "last_activity_date": 1487202621, "creation_date": 1487202621, "answer_id": 42262287, "question_id": 42262230, "link": "https://stackoverflow.com/questions/42262230/why-is-the-python-index-function-execution-time-faster-than-my-own-linear-search/42262287#42262287", "title": "Why is the python index function execution time faster than my own linear search function?", "body": "<p>Python was written in C which happens to be around 5 times faster than python. This means that your code which is written in Python is approximately 5 times slower than the index() method written in C.</p>\n"}], "owner": {"reputation": 151, "user_id": 5616833, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fce3419254b5244f380570a9dde2a7d4?s=128&d=identicon&r=PG&f=1", "display_name": "eukoloko", "link": "https://stackoverflow.com/users/5616833/eukoloko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1487202621, "creation_date": 1487202242, "last_edit_date": 1487202365, "question_id": 42262230, "link": "https://stackoverflow.com/questions/42262230/why-is-the-python-index-function-execution-time-faster-than-my-own-linear-search", "title": "Why is the python index function execution time faster than my own linear search function?", "body": "<p>I'm doing an experiment comparing the execution time of the index function and my own linear search function. To my understanding, Python implements a linear search algorithm for the index function so the execution time should be roughly the same, shouldn't it?</p>\n\n<p>My own search function looks like this</p>\n\n<pre><code>def linearSearch (x,numList,length):      \n    n = 0\n    for i in range(length):\n            n = n + 1\n            if numList[i] == x:\n                    return i, n\n    return -1, n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-decorators", "functools"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1487202222, "post_id": 42262208, "comment_id": 71681945, "body": "Your &quot;wrapped class&quot; is a function. What did you expect <code>functools.wraps</code> to do?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1487203099, "post_id": 42262208, "comment_id": 71682235, "body": "Did you mean to wrap <code>some_method</code>? Because as is, you wrapped the class itself, which sort of works (haven&#39;t looked deeply, but I believe it should warn when you create an instance), but it also means that the name refers to the wrapper function, not the class anymore, so no class related stuff is visible on <code>SomeOldClass</code> without explicitly drilling through to <code>__wrapped__</code> attribute. If you want to deprecate classes this way, your wrapper should drill into the class and wrap <code>__init__</code> or <code>__new__</code> explicitly (returning the original <code>cls</code>), not return a function wrapping a class."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487203207, "post_id": 42262208, "comment_id": 71682266, "body": "@user2357112 I expect it to mask my wrapping function, so that is appears has it is the original class, except for my changes. Concretely, I wanted functions like <code>help()</code> to work properly on my deprecated Class."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1487203444, "post_id": 42262208, "comment_id": 71682346, "body": "@ShadowRanger thanks for your feedback! I can try to wrap the <code>__init__</code>, didn&#39;t think about that. The problem with that approach is that I cannot easily prepend the <code>__doc__</code>, can I?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1487203573, "post_id": 42262208, "comment_id": 71682377, "body": "@j3mdamas: If you wrap the class itself, you can modify its doc, then explicitly wrap its <code>__init__</code> and reassign it. You still return the original <code>cls</code> you were passed, you&#39;re just changing attributes on it."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1487203830, "post_id": 42262208, "comment_id": 71682439, "body": "@ShadowRanger that would be awesome, and would solve my question, as a correctly wrapped class would have the correct type in <code>__dict__</code>. Can you give me an example? I would really appreciate it."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487203928, "post_id": 42262208, "comment_id": 71682462, "body": "&quot;I expect it to mask my wrapping function, so that is appears has it is the original class, except for my changes&quot; - <code>functools.wraps</code> can only make a function look like another function, and even that has its limitations. It&#39;s not going to make a function look like a class. There are much less subtle ways in which things will go wrong than just <code>__dict__</code> having an unexpected type; for example, subclassing and <code>isinstance</code> will be completely broken."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487204170, "post_id": 42262208, "comment_id": 71682538, "body": "@user2357112 You are correct. Maybe my initial question should have been about decorating Classes"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "edited": false, "score": 0, "creation_date": 1487203975, "post_id": 42262359, "comment_id": 71682473, "body": "Thanks for your answer! It&#39;s hard to find working examples of decorated Classes though, so I was going with this approach."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": false, "score": 0, "last_activity_date": 1487202995, "creation_date": 1487202995, "answer_id": 42262359, "question_id": 42262208, "link": "https://stackoverflow.com/questions/42262208/functools-wraps-returning-a-dict-of-type-dict-instead-of-type-mappingproxy/42262359#42262359", "title": "functools.wraps returning a __dict__ of type dict instead of type mappingproxy", "body": "<p><code>functools.wrap</code> isn't misbehaving nor are you technically doing something wrong, you've returned the function which <em>when called</em> will return the instance. </p>\n\n<p>After wrapping, <code>SomeOldClass</code> is the function <code>new_func</code> you wrapped and returned:</p>\n\n<pre><code>&gt;&gt;&gt; SomeOldClass\n&lt;function __main__.SomeOldClass&gt;\n</code></pre>\n\n<p>not the class. The un-decorated <code>SomeClass</code> is preserved as a class who's <code>__dict__</code> is a <code>mappingproxy</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "edited": false, "score": 0, "creation_date": 1487206634, "post_id": 42262778, "comment_id": 71683272, "body": "Thank you so much! This is the answer that I was looking for! I am going to test it, but I&#39;m sure it works."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "edited": false, "score": 0, "creation_date": 1487209718, "post_id": 42262778, "comment_id": 71684104, "body": "@j3mdamas: I tested it on the cases shown (and made sure it can properly modified the <code>__doc__</code> strings, that the <code>class</code> remained a class, etc.), but I&#39;m sure there are some edge cases (for example, my test for class vs. non-class is not old-style class friendly on Py2, so you&#39;d need to tweak it a bit to support old-style classes). Regardless, it should be fairly close, with minimal tweaking needed."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "edited": false, "score": 0, "creation_date": 1487241939, "post_id": 42262778, "comment_id": 71699381, "body": "Just a small comment: for methods, the <code>__doc__</code> wasn&#39;t being updated. I moved the assignment to before <code>@functools.wraps(wrappedfunc)</code> and it started working."}, {"owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "edited": false, "score": 0, "creation_date": 1487253802, "post_id": 42262778, "comment_id": 71708342, "body": "Just a final comment: Thank you a lot for your example. Works perfectly and I hope that anyone trying to decorate a class finds this answer. I don&#39;t need compatibility with Py2, so I&#39;m good. About the Sphinx, my problem was due to the fact that the wrapper turned the class into a function. Since your code solves that, all my problems with Sphinx got solved :) Many thanks!"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1487211627, "last_edit_date": 1487211627, "creation_date": 1487205627, "answer_id": 42262778, "question_id": 42262208, "link": "https://stackoverflow.com/questions/42262208/functools-wraps-returning-a-dict-of-type-dict-instead-of-type-mappingproxy/42262778#42262778", "title": "functools.wraps returning a __dict__ of type dict instead of type mappingproxy", "body": "<p>I'd strongly suggest making your wrapper class aware, so it doesn't wrap the class itself:</p>\n\n<pre><code>class Deprecated(object):\n    def __init__(self, messagefmt='{wrapped} is deprecated'):\n        self.messagefmt = messagefmt\n\n    def __call__(self, wrapped):\n        message = self.messagefmt.format(wrapped=wrapped.__name__)\n        wrappingclass = isinstance(wrapped, type)\n        if wrappingclass:\n            wrappedfunc = wrapped.__init__\n        else:\n            wrappedfunc = wrapped\n\n        @functools.wraps(wrappedfunc)\n        def new_func(*args, **kwargs):\n            warnings.warn(message, category=DeprecationWarning, stacklevel=2)\n            return wrappedfunc(*args, **kwargs)\n        wrapped.__doc__ = 'Deprecated\\n\\n' + message + '\\n\\n' + (wrapped.__doc__ or '')\n\n        if wrappingclass:\n            wrapped.__init__ = new_func\n            return wrapped\n        else:\n            return new_func\n</code></pre>\n\n<p>This lets you use it with both classes:</p>\n\n<pre><code> @Deprecated()\n class SomeOldClass:\n     def some_method(self, x, y):\n         return x + y\n</code></pre>\n\n<p>without obscuring the class behaviors and with functions (possibly with a custom deprecation message):</p>\n\n<pre><code> @Deprecated('foo is dead')\n def foo():\n     pass\n</code></pre>\n\n<p>So when you use them:</p>\n\n<pre><code> &gt;&gt;&gt; import warnings\n &gt;&gt;&gt; warnings.filterwarnings('always', category=DeprecationWarning)\n &gt;&gt;&gt; SomeOldClass()\n /usr/local/bin/ipython3:1: DeprecationWarning: SomeOldClass is deprecated\n   #!/usr/bin/python3\n &lt;__main__.SomeOldClass at 0x7fea8f744a20&gt;\n &gt;&gt;&gt; foo()\n /usr/local/bin/ipython3:1: DeprecationWarning: foo is dead\n   #!/usr/bin/python3\n</code></pre>\n\n<p>And similarly, the <code>__doc__</code> for both is modified to prepend the deprecation notice (you can tweak it to Sphinxify it, I was just providing basic example).</p>\n"}], "owner": {"reputation": 23, "user_id": 7571782, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7OAnZGo7AFY/AAAAAAAAAAI/AAAAAAAAA0o/GM1S6CXNO0U/photo.jpg?sz=128", "display_name": "j3mdamas", "link": "https://stackoverflow.com/users/7571782/j3mdamas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42262778, "answer_count": 2, "score": 2, "last_activity_date": 1487211627, "creation_date": 1487202093, "question_id": 42262208, "link": "https://stackoverflow.com/questions/42262208/functools-wraps-returning-a-dict-of-type-dict-instead-of-type-mappingproxy", "title": "functools.wraps returning a __dict__ of type dict instead of type mappingproxy", "body": "<p>This is my first question here, after a long time consulting. I have googled about this issue a lot and I think I did not find any useful information addressing it.</p>\n\n<p>I am trying to create a general deprecation python decorator for my code in Python 3. The objective is to correctly wrap a function or class doing two things: print a warning about deprecation, and prepend the <code>__doc__</code> with deprecation information (that it can be processed also by <code>sphinx</code>). I think I have sorted out most of what I wanted, I'm still struggling with Sphinx, but I found something curious about the behaviour of <code>functools.wraps</code>. Basically, the <code>__dict__</code> of a wrapped class is of type <code>dict</code> while in an unwrapped class has type <code>mappingproxy</code>.</p>\n\n<p>Here is some showcase code:</p>\n\n<pre><code>import functools\n\nclass Deprecated(object):\n    def __call__(self, cls):\n        myassigns = functools.WRAPPER_ASSIGNMENTS\n        myassigns += ('__mro__',)\n\n        @functools.wraps(cls, assigned=myassigns)\n        def new_func(*args, **kwargs):\n            warnings.warn(message, category=DeprecationWarning, stacklevel=2)\n            return cls(*args, **kwargs)\n\n        return new_func\n\n\n@Deprecated()\nclass SomeOldClass:\n    def some_method(self, x, y):\n        return x + y\n\nclass SomeClass:\n    def some_method(self, x, y):\n        return x + y\n\nprint(type(SomeOldClass.__dict__))\nprint(type(SomeClass.__dict__))\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>&lt;class 'dict'&gt;\n&lt;class 'mappingproxy'&gt;\n</code></pre>\n\n<p>Is the <code>functools.wraps</code> misbehaving or am I doing something wrong?</p>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "answers": [{"tags": [], "owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "is_accepted": true, "score": 0, "last_activity_date": 1487213110, "creation_date": 1487213110, "answer_id": 42263902, "question_id": 42262199, "link": "https://stackoverflow.com/questions/42262199/dynamically-create-delete-drawn-objects-on-tkinter-canvas/42263902#42263902", "title": "Dynamically create/delete drawn objects on tkinter canvas?", "body": "<p>When you need to deal with an arbitrary number of similar objects, the proper solution is to put them in a list (or other container object).  You can easily iterate over the list to do something to all the objects, such as deleting them.</p>\n"}], "owner": {"reputation": 290, "user_id": 6084688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Np-HJoqGesI/AAAAAAAAAAI/AAAAAAAAABc/-xxFRECMExM/photo.jpg?sz=128", "display_name": "Dova", "link": "https://stackoverflow.com/users/6084688/dova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 42263902, "answer_count": 1, "score": 0, "last_activity_date": 1487213110, "creation_date": 1487202043, "last_edit_date": 1487212040, "question_id": 42262199, "link": "https://stackoverflow.com/questions/42262199/dynamically-create-delete-drawn-objects-on-tkinter-canvas", "title": "Dynamically create/delete drawn objects on tkinter canvas?", "body": "<p>I have managed to dynamically create various rectangles on the tkinter canvas widget using the below code:</p>\n\n<pre><code>setattr(self, \"wall_\" + str(counter), self.canvas_base.create_rectangle(*sel_wall,fill=\"black\"))\n</code></pre>\n\n<p>Where <code>counter</code> is an increasing and variable integer, <code>canvas_base</code> is the canvas being drawn on, <code>suffix</code> is a string alternating between <code>a</code> and <code>b</code>, and <code>sel_wall</code> is a list of coordinates used to draw the rectangle.</p>\n\n<p>Is there a way to dynamically delete these objects on the canvas (varying from <code>wall_1</code> to something like <code>wall_5</code>), or is there a better alternative combination to create/delete these canvas objects?</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1487239786, "post_id": 42270581, "comment_id": 71697681, "body": "That&#39;s what the imutils code is supposed to be doing (<a href=\"http://www.pyimagesearch.com/2014/08/25/4-point-opencv-getperspective-transform-example/#crayon-58a578867d24b280571411\" rel=\"nofollow noreferrer\">pyimagesearch.com/2014/08/25/&hellip;</a>), it looks to be doing the same thing, just calculating the dimensions of the output on the fly"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "reply_to_user": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1487240343, "post_id": 42270581, "comment_id": 71698159, "body": "So you want your output dimension to be be calculated on the fly @hardillb ?"}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1487241840, "post_id": 42270581, "comment_id": 71699313, "body": "I&#39;d like to keep it at the same scale to start with, then I can rescale it later"}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1487361997, "post_id": 42270581, "comment_id": 71767835, "body": "unfortunately that&#39;s still giving the same output (and the values you&#39;re passing into the <code>get_euler_distance</code> need to be pairs not single values). I&#39;ve zipped up all my code and the original image <a href=\"http://www.hardill.me.uk/sample.tgz\" rel=\"nofollow noreferrer\">here</a> if you want another look."}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1487369596, "post_id": 42270581, "comment_id": 71771591, "body": "OK, I&#39;ve finally worked out what the problem was, the version of imutils I have installed has a bug in it&#39;s <code>order_points</code> which was swapping the upper right and lower right hand corners of the area to be transformed."}], "tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": true, "score": 5, "last_activity_date": 1487253190, "last_edit_date": 1487253190, "creation_date": 1487239227, "answer_id": 42270581, "question_id": 42262198, "link": "https://stackoverflow.com/questions/42262198/4-point-persective-transform-failure/42270581#42270581", "title": "4 point persective transform failure", "body": "<p>I would recommend you to use the OpenCV <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform\" rel=\"noreferrer\">Perspective Transform</a> method, to get the desired results, as per the given image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OD23Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OD23Y.png\" alt=\"enter image description here\"></a></p>\n\n<p>First mark the position of src points:</p>\n\n<pre><code>src_pts = np.array([[8, 136], [415, 52], [420, 152], [14, 244]], dtype=np.float32)\n</code></pre>\n\n<p>And suppose you want to fit this number plate in a matrix of shape 50x200, so destination points would be:</p>\n\n<pre><code>dst_pts = np.array([[0, 0],   [200, 0],  [200, 50], [0, 50]], dtype=np.float32)\n</code></pre>\n\n<p>Find the perspective Transform Matrix as :</p>\n\n<pre><code>M = cv2.getPerspectiveTransform(src_pts, dst_pts)\nwarp = cv2.warpPerspective(img, M, (200, 50))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QGA86.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QGA86.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT: As you didn't wanted to hard code the final width, height of plate, So in order to make the calculations more flexible you can calculate the width and height of the plate from the 4 marker points as:</p>\n\n<pre><code>def get_euler_distance(pt1, pt2):\n    return ((pt1[0] - pt2[0])**2 + (pt1[1] - pt2[1])**2)**0.5\n\nsrc_pts = np.array([[8, 136], [415, 52], [420, 152], [14, 244]], dtype=np.float32)\n\nwidth = get_euler_distance(src_pts[0][0], src_pts[0][1])\nheight = get_euler_distance(src_pts[0][0], src_pts[0][3])\n\ndst_pts = np.array([[0, 0],   [width, 0],  [width, height], [0, height]], dtype=np.float32)\n\nM = cv2.getPerspectiveTransform(src_pts, dst_pts)\nwarp = cv2.warpPerspective(img, M, (width, height))\n</code></pre>\n"}], "owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5881, "favorite_count": 2, "accepted_answer_id": 42270581, "answer_count": 1, "score": 3, "last_activity_date": 1558158203, "creation_date": 1487202037, "question_id": 42262198, "link": "https://stackoverflow.com/questions/42262198/4-point-persective-transform-failure", "title": "4 point persective transform failure", "body": "<p>I've been trying to do a 4 point perspective transform in order to start doing some OCR.</p>\n\n<p>Starting with the following image I can detect the number plate</p>\n\n<p><a href=\"https://i.stack.imgur.com/R0phK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R0phK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>and crop it out with the green box being the bounding box and the red dots being the corners of the rectangle I want to square up.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6LtYq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6LtYq.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the output of the transform.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IxqBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IxqBl.png\" alt=\"enter image description here\"></a></p>\n\n<p>At a first look it seams to have done the transform inside out (taking the parts either side rather than between the points).</p>\n\n<p>I'm using the imutils package to do the transform and working from <a href=\"http://www.pyimagesearch.com/2017/02/13/recognizing-digits-with-opencv-and-python/\" rel=\"nofollow noreferrer\">this</a> and <a href=\"http://www.pyimagesearch.com/2014/08/25/4-point-opencv-getperspective-transform-example/\" rel=\"nofollow noreferrer\">this</a> as a guide. I'm sure it's something relatively simple I'm missing.</p>\n\n<pre><code>#!/usr/bin/python\nimport numpy as np\nimport cv2\nimport imutils\nfrom imutils import contours\nfrom imutils.perspective import four_point_transform\n\nimg = cv2.imread(\"sample7-smaller.jpg\")\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nblurred = cv2.bilateralFilter(gray,15,75,75)\nv = np.median(blurred)\nlower = int(max(0, (1.0 - 0.33) * v))\nupper = int(min(255, (1.0 + 0.33) * v))\nedged = cv2.Canny(blurred, lower, upper, 255)\n\nconts = cv2.findContours(edged.copy(), cv2.RETR_EXTERNAL,\n    cv2.CHAIN_APPROX_SIMPLE)\nconts = conts[0] if imutils.is_cv2() else conts[1]\nconts = sorted(conts, key=cv2.contourArea, reverse=True)\n\nfor cnt in conts:\n    approx = cv2.approxPolyDP(cnt,0.01*cv2.arcLength(cnt,True),True)\n    if len(approx) == 4:\n        x,y,w,h = cv2.boundingRect(cnt)\n        cv2.rectangle(img,(x,y),(x+w,y+h),(0,255,0),2)\n        for i in approx:\n            cv2.circle(img,(i[0][0], i[0][1]),2,(0,0,255), thickness=4)\n        warped = four_point_transform(img, approx.reshape(4,2))\n        cv2.imshow(\"crop\",img[y:y+h,x:x+w])\n        cv2.imshow(\"warped\", warped)\n        cv2.waitKey(0)\n</code></pre>\n"}, {"tags": ["python", "pip", "python-wheel"], "comments": [{"owner": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 0, "creation_date": 1487207222, "post_id": 42262197, "comment_id": 71683453, "body": "Since you explicitly specify the version number, why not just check if the version already exists in the wheelhouse before calling <code>pip wheel</code> on it?"}, {"owner": {"reputation": 117948, "user_id": 60711, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b4fa970be41e2286c39f5b0167e6d9d?s=128&d=identicon&r=PG", "display_name": "vartec", "link": "https://stackoverflow.com/users/60711/vartec"}, "reply_to_user": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 0, "creation_date": 1487207683, "post_id": 42262197, "comment_id": 71683595, "body": "@AkshatMahajan I would need to know the name of the wheel, which might not match the github name (for example <code>http:&#47;&#47;github.com&#47;datastax&#47;python-driver@3.7.1</code> builds wheel <code>cassandra-driver-3.71</code>). Assuming I&#39;d get that from the <code>setup.py</code>, I&#39;d still need to do that with a script. More moving parts, more prone to breaking."}, {"owner": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 0, "creation_date": 1487208047, "post_id": 42262197, "comment_id": 71683678, "body": "I believe this is <a href=\"https://github.com/pypa/pip/issues/855\" rel=\"nofollow noreferrer\">an open issue on the <code>pip</code> issuetracker</a>. Until that gets resolved, I don&#39;t believe you have much of a choice. Just maintain a local mapping of URL to wheel name in <code>script.py</code> or somewhere else, and check against that."}, {"owner": {"reputation": 117948, "user_id": 60711, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b4fa970be41e2286c39f5b0167e6d9d?s=128&d=identicon&r=PG", "display_name": "vartec", "link": "https://stackoverflow.com/users/60711/vartec"}, "reply_to_user": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 0, "creation_date": 1487213564, "post_id": 42262197, "comment_id": 71685119, "body": "@AkshatMahajan you&#39;re right. I hoped from some kind of workaround, but it might as well not be possible w/o doing this check myself"}], "owner": {"reputation": 117948, "user_id": 60711, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b4fa970be41e2286c39f5b0167e6d9d?s=128&d=identicon&r=PG", "display_name": "vartec", "link": "https://stackoverflow.com/users/60711/vartec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1487202388, "creation_date": 1487202026, "last_edit_date": 1487202388, "question_id": 42262197, "link": "https://stackoverflow.com/questions/42262197/skip-building-wheel-if-its-already-in-the-wheelhouse", "title": "Skip building wheel if it&#39;s already in the wheelhouse", "body": "<p>I'm automatically building wheels for each tagged release using github URL. These wheels are then uploaded to a wheelhouse.</p>\n\n<p>Command I'm using is </p>\n\n<pre><code>pip wheel --wheel-dir=/tmp/wheels/                             \\\n          --find-links=http://wheelhouse/index.html            \\\n          git+ssh://git@github.com/company/project.git@1.2.3\n</code></pre>\n\n<p><code>/tmp/wheels/</code> is initially empty.</p>\n\n<p>This rebuilds, even if the wheel for the release <code>1.2.3</code> of the <code>project</code> is already in the remote wheelhouse. Short of downloading all the wheels from the wheelhouse into local wheel dir, is there any other way of preventing unnecessary rebuilding? </p>\n"}, {"tags": ["python", "image", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1487202561, "post_id": 42262090, "comment_id": 71682056, "body": "If it&#39;s appearing in the wrong window, it&#39;s because it has the wrong parent. Look closely at your code."}, {"owner": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1487203344, "post_id": 42262090, "comment_id": 71682310, "body": "if by parent you mean stating the actual window in the code to display the image, I tried that and it still didnt change anything"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "edited": false, "score": 0, "creation_date": 1487254213, "post_id": 42262766, "comment_id": 71708692, "body": "thanks for your answer, how do i add a parent to it?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "edited": false, "score": 0, "creation_date": 1487254320, "post_id": 42262766, "comment_id": 71708780, "body": "@MikiAmeryk: the same way that you added a parent to every other widget that you create. <code>Label(root_search, image=photo)</code>"}, {"owner": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "edited": false, "score": 0, "creation_date": 1487254706, "post_id": 42262766, "comment_id": 71709120, "body": "photo = PhotoImage(root_search, file=&quot;image.gif&quot;) photoLabel = Label(image=photo) photoLabel.image = photo photoLabel.grid(row=1, column=4, pady = 10)"}, {"owner": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "edited": false, "score": 0, "creation_date": 1487254718, "post_id": 42262766, "comment_id": 71709134, "body": "i always added it to the first line"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 0, "last_activity_date": 1487254308, "last_edit_date": 1487254308, "creation_date": 1487205580, "answer_id": 42262766, "question_id": 42262090, "link": "https://stackoverflow.com/questions/42262090/tkinter-images-mix-when-multiple-window-launched/42262766#42262766", "title": "TKINTER, images mix when multiple window launched", "body": "<p>In your question you show this for your \"second window\":</p>\n\n<pre><code>def Search_Inventory():\n    #---Search Window----\n    root_search = Tk()\n    ...\n    photoLabel = Label(image=photo)\n</code></pre>\n\n<p>There are two problems with the above code. For one, you're creating a second instance of <code>Tk</code>. You should not do this. A tkinter program should have exactly one instance of <code>Tk</code>. If you want additional windows you need to create instances of <code>Toplevel</code>.</p>\n\n<p>The second problem is where you create the <code>Label</code> -- you are neglecting to give it a parent so it is probably defaulting to the original window. You need to change that last line to this:</p>\n\n<pre><code>photoLabel = Label(root_search, image=photo)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7227806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184035098341067/picture?type=large", "display_name": "Miki Ameryk", "link": "https://stackoverflow.com/users/7227806/miki-ameryk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487255621, "creation_date": 1487201396, "last_edit_date": 1487255621, "question_id": 42262090, "link": "https://stackoverflow.com/questions/42262090/tkinter-images-mix-when-multiple-window-launched", "title": "TKINTER, images mix when multiple window launched", "body": "<p><a href=\"https://i.stack.imgur.com/9SATE.png\" rel=\"nofollow noreferrer\">IMAGE: --->ScreenShot of the problem</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/be4HY.png\" rel=\"nofollow noreferrer\">IMAGE: --->How it is meant to look:</a></p>\n\n<p>In the first hyperlink above i have attached a screenshot of the problem.</p>\n\n<p>When running the windows which are connected by a button, the image on the window that is launched from the first window displays on the first window and not on the new window just opened.</p>\n\n<p>At first I  thought that python might be getting confused because the file name is the same. (that wasn't the case as I  used a slightly different image with a different file name.</p>\n\n<p>I  have tried so many ways and it just doesnt work.</p>\n\n<p>Directly below this line is the code for the first window:</p>\n\n<pre><code>#----Main Menu----\nroot_menu = Tk()\nroot_menu.title(\"Warehouse Inventory Control System\")\nroot_menu.configure(bg = \"black\")\n\n\nphoto = PhotoImage(file=\"logo.gif\")\nphotoLabel = Label(image=photo)\nphotoLabel.image = photo\nphotoLabel.grid(row=1, column=3,columnspan = 4, sticky = N)\n\nTitle_Screen = Label(root_menu,\n                     text=\"Welcome to the SsangYong\\n Warehouse Inventory        Control System\",\n                     fg=\"grey\",\n                     bg=\"black\",\n                     font=\"Helevetica 25 bold\",\n                     pady = \"50\",\n                     padx = \"50\",\n                     ).grid(row=2, column=3)\n\n\nSearch_Inventory = Button(root_menu,\n                          text = \"Search Inventory\",\n                          command=Search_Inventory,\n                          fg = \"Blue\",\n                          bg = \"Grey\",\n                          bd = 2,\n                          font=\"Helevetica 12 bold\",\n                          height = 1,\n                          width = 50,\n                          ).grid(row=16, column=3,pady = 25,padx = 25,)\n\nAdd_Stock = Button(root_menu,\n                text = \"Add New Items\",\n                command = Add_To_Database,\n                fg = \"Blue\",\n                bg = \"Grey\",\n                bd = 2,\n                font=\"Helevetica 12 bold\",\n                height = 1,\n                width = 60,\n                ).grid(row=15, column=3,pady = 25,padx = 25,)\n\nPrint_Report =  Button(root_menu,\n                text = \"Print Stock Report\",\n                fg = \"Blue\",\n                bg = \"Grey\",\n                bd = 2,\n                font=\"Helevetica 12 bold\",\n                height = 1,\n                width = 70,\n                ).grid(row=17, column=3,pady = 25,padx = 25,)\n\n\nHelp_Button = Button(root_menu,\n                     text = \"Help\",\n                     command=Help_PDF,\n                     fg = \"Red\",\n                     bg = \"Black\",\n                     height = \"1\",\n                     bd = \"2\",\n                     font = \"Helevetica 20 bold\",\n                     width = \"4\",\n                     ).grid(row=1, column=3,rowspan = 2, sticky= NE)\nroot_menu.mainloop()\n</code></pre>\n\n<p>and here is the code for the second window.</p>\n\n<pre><code>def Search_Inventory():\n#---Search Window----\nroot_search = Tk()\nroot_search.title(\"Warehouse Inventory Control System\")\nroot_search.configure(bg = \"black\")\n\n#----Title displayed under the company logo on the first window----\nTitle_Screen = Label(root_search,\n                     text=\"Warehouse Inventory Control System\",\n                     fg=\"grey\",\n                     bg=\"black\",\n                     font=\"Helevetica 25 bold\",\n                     pady = \"50\",\n                     padx = \"50\",\n                     ).grid(row=3, column=4)\n\n#----Interactive Input Boxes for the User----\n\n#----Label to Notify what is needed in the entry box----\n\nPN_Info_Label = Label(root_search,\n                    text = \"Part Number:\",\n                    fg=\"white\",\n                    bg=\"black\",\n                    font=\"Helevetica 15 bold\",\n                    padx = 50,\n                    ).grid(row=14, column=3, rowspan = 2)\n\n#----Input Box for Part Number\n\nPN_Display = StringVar()\nInput_PartNumber = Entry(root_search,\n                         textvariable=PN_Display,\n                         fg = \"blue\",\n                         font = \"Helevtica 25 bold\",\n                         ).grid(row=14, column=4)\n\n#----A button that will proceed to the next part of the program----\n\nSearch_Button = Button(root_search,\n                       text = \"Search Inventory\",\n                       fg = \"Blue\",\n                       bg = \"Grey\",\n                       bd = 2,\n                       font=\"Helevetica 15 bold\",\n                       command=lambda:Search_Prod(PN_Display.get()),\n                       height = 1,\n                       width = 15,\n                       ).grid(row=16, column=4,pady = 25,padx = 25,)\n\n#----Information regarding how to enter the part number---\nInfo = Label(root_search,\n             text=\"Please Use Capitals to Enter Part Number\",\n             fg= \"red\",\n             bg = \"black\",\n             font = \"helevetica 12 bold\",\n             ).grid(row = 15, column = 4)\n#----Adding the company logo to the first window----\n\nphoto = PhotoImage(file=\"image.gif\")\nphotoLabel = Label(image=photo)\nphotoLabel.image = photo\nphotoLabel.grid(row=1, column=4, pady = 10)\n\n#----Linking the Help Document----\n\nHelp_Button = Button(root_search,\n                     text = \"Help\",\n                     command=Help_PDF,\n                     fg = \"Red\",\n                     bg = \"Black\",\n                     height = \"1\",\n                     bd = \"2\",\n                     font = \"Helevetica 20 bold\",\n                     width = \"4\",\n                     ).grid(row=0, column=5, pady= 10,padx = 50, sticky = E)\n\n#----Saying who the program was made by----\n\nCredits = Label(root_search,\n                text = \"Created By: Me\",\n                fg = \"White\",\n                bg = \"Black\",\n                font = \"Helevetica 10 underline\",\n                ).grid(row = 19, column = 5)\n#To Make Sure that the window doesn't close\nroot_search.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pygame", "instance", "scale", "rect"], "comments": [{"owner": {"reputation": 646, "user_id": 7541446, "user_type": "registered", "profile_image": "https://graph.facebook.com/404103756589237/picture?type=large", "display_name": "Joseph Chotard", "link": "https://stackoverflow.com/users/7541446/joseph-chotard"}, "edited": false, "score": 0, "creation_date": 1487200934, "post_id": 42261978, "comment_id": 71681520, "body": "Could you please post the full error message?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1487200969, "post_id": 42261978, "comment_id": 71681540, "body": "What line is the error on?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487201079, "post_id": 42261978, "comment_id": 71681578, "body": "<code>ans.x *= s</code> with <code>s = delta</code>, which is probably not a float..."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1487201085, "post_id": 42261978, "comment_id": 71681579, "body": "<code>delta</code> should be a float. if it isn&#39;t, that&#39;s probably your issue."}, {"owner": {"reputation": 11, "user_id": 5496075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bf68bdd87825d89cc5028df16862548?s=128&d=identicon&r=PG&f=1", "display_name": "DGjohn", "link": "https://stackoverflow.com/users/5496075/dgjohn"}, "reply_to_user": {"reputation": 646, "user_id": 7541446, "user_type": "registered", "profile_image": "https://graph.facebook.com/404103756589237/picture?type=large", "display_name": "Joseph Chotard", "link": "https://stackoverflow.com/users/7541446/joseph-chotard"}, "edited": false, "score": 0, "creation_date": 1487206934, "post_id": 42261978, "comment_id": 71683369, "body": "@ClaymoreAdrendamar It was pretty much just the ans.x *=s line.Traceback (most recent call last): Area activated! In player   File &quot;/Users/PycharmProjects/mod1_dog/main.py&quot;, line 276, in &lt;module&gt;     puppy_sprite.move(delta_time)   File &quot;/Users/PycharmProjects/mod1_dog/main.py&quot;, line 122, in move     self.vel = direction.scale(self.vel)   File &quot;/Users/PycharmProjects/mod1_dog/classes.py&quot;, line 28, in scale     ans.x *= s TypeError: unsupported operand type(s) for *=: &#39;float&#39; and &#39;instance&#39;"}, {"owner": {"reputation": 11, "user_id": 5496075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bf68bdd87825d89cc5028df16862548?s=128&d=identicon&r=PG&f=1", "display_name": "DGjohn", "link": "https://stackoverflow.com/users/5496075/dgjohn"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487207336, "post_id": 42261978, "comment_id": 71683493, "body": "@Jean-Fran&#231;oisFabre like so? p_sprite.move(float(delta_time)) Still results in same issue. It is an int in debugger"}], "owner": {"reputation": 11, "user_id": 5496075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bf68bdd87825d89cc5028df16862548?s=128&d=identicon&r=PG&f=1", "display_name": "DGjohn", "link": "https://stackoverflow.com/users/5496075/dgjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "closed_date": 1611323963, "answer_count": 0, "score": 0, "last_activity_date": 1487201489, "creation_date": 1487200833, "last_edit_date": 1487201489, "question_id": 42261978, "link": "https://stackoverflow.com/questions/42261978/pygame-help-typeerror-unsupported-operand-types-for-float-and-instanc", "closed_reason": "Duplicate", "title": "Pygame Help: TypeError: unsupported operand type(s) for *=: &#39;float&#39; and &#39;instance&#39;", "body": "<p>I am trying to create a game in which a set of rectangle dictate where a sprite will move to depending on which color the rectangles are.</p>\n\n<p>Currently, when trying to implement code that works on a smaller scale, I am getting the error \"TypeError: unsupported operand type(s) for *=: 'float' and 'instance'\" </p>\n\n<p>This code is within the sprite class and should cause the sprite to move towards the rect object.</p>\n\n<pre><code>def move(self, delta):\n    if self.target is not None:\n        # get the full displacement to target\n        displacement = self.target.sub(self.pos)\n        # normalize it to get direction\n        direction = displacement.normalize()\n        # and multiply by speed to get velocity (pixels/ms)\n        self.vel = direction.scale(self.vel)\n\n        # to get the actual step for this frame, multiply\n        #  velocity by time (numerical integration)\n        step = self.vel.scale(delta)\n\n        # prevent overshooting (causes jitter back and forth)\n        if step.magnitude() &gt; displacement.magnitude():\n            self.pos = self.target\n            self.target = None\n        else:\n            # otherwise update position by adding step\n            self.pos = self.pos.add(step)\n\n    return\n</code></pre>\n\n<p>I debugged to check if delta is a float and it is not, so 'instance' may be the problem. My understanding is that instance is referring to an object based in some class, being my own vector2 class. Or maybe the class this method is being called. </p>\n\n<pre><code>def scale(self, s):\n    ans = vector2(self.x, self.y)\n    ans.x *= s\n    ans.y *= s\n    return ans\n</code></pre>\n\n<p>This is where 'move' is being called. It's within the main game loop</p>\n\n<pre><code># UPDATE simulation\nend = pygame.time.get_ticks()\ndelta_time = end - cycle_time\ncycle_time = end\n\n# Checks if player is touching any objects\nfor obj in object_list:\n    player_sprite.update(obj)\n\nfor obj in object_list:\n    if obj.status == 'active':\n        p_sprite.target = obj.pos\n</code></pre>\n\n<p>Any help on where the root of this error is would be greatly appreciated, I am relatively new to python. </p>\n"}, {"tags": ["python", "matplotlib", "multidimensional-array"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1487201832, "post_id": 42261921, "comment_id": 71681831, "body": "Such a function does not exist in matplotlib. You may need to find other means for plotting your <code>f(x,y,z)-&gt;scalar</code> function. Here is a very unconventional example: <a href=\"http://stackoverflow.com/questions/40853556/3d-discrete-heatmap-in-matplotlib\" title=\"3d discrete heatmap in matplotlib\">stackoverflow.com/questions/40853556/&hellip;</a>"}], "owner": {"reputation": 117, "user_id": 4576660, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ee2321f3e573aa6a0d4d486e7b7d0262?s=128&d=identicon&r=PG&f=1", "display_name": "jjv", "link": "https://stackoverflow.com/users/4576660/jjv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487204745, "creation_date": 1487200560, "last_edit_date": 1487204745, "question_id": 42261921, "link": "https://stackoverflow.com/questions/42261921/plotting-3d-matrix-using-matplotlib", "title": "Plotting 3D matrix using matplotlib", "body": "<p>I have a 3D matrix (i.e., grid) <code>(x,y,z)</code>, each of which has a value <code>f</code>. Let's assume that the grid is bounded, i.e., the matrix forms a cubic lattice.</p>\n\n<p>I want to plot it as a heatmap (or surface), like <a href=\"https://i.stack.imgur.com/GJEHs.png\" rel=\"nofollow noreferrer\">this surface</a>. In MATLAB, there is a function called <a href=\"http://www.mathworks.com/matlabcentral/fileexchange/49985-pcolor3/content/pcolor3/html/pcolor3_documentation.html\" rel=\"nofollow noreferrer\">pcolor3</a> which can efficiently do this.</p>\n\n<p>Is there a way of doing this using matplotlib?</p>\n\n<p>EDIT: Or can any python package solve this problem? (still hoping for a matplotlib workaround)</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 646, "user_id": 7541446, "user_type": "registered", "profile_image": "https://graph.facebook.com/404103756589237/picture?type=large", "display_name": "Joseph Chotard", "link": "https://stackoverflow.com/users/7541446/joseph-chotard"}, "edited": false, "score": 4, "creation_date": 1487200696, "post_id": 42261913, "comment_id": 71681431, "body": "Could you please post the code you&#39;ve tried as well as clarify your objective? Stack Overflow does not simply code for you."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1487201114, "post_id": 42261913, "comment_id": 71681589, "body": "I guess you have your answer now so I&#39;ll just point out that using <code>dict</code>, which is a builtin, as a variable name is not good practice and can cause problems elsewhere in your code."}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 3, "last_activity_date": 1487200828, "creation_date": 1487200828, "answer_id": 42261973, "question_id": 42261913, "link": "https://stackoverflow.com/questions/42261913/combine-2-list-in-python/42261973#42261973", "title": "Combine 2 list in python", "body": "<p>Here's one way to do it using a <em>list comprehension</em>:</p>\n\n<pre><code>lst = [{'ex1': j, 'ex2': i} for i in y for j in x]\n</code></pre>\n\n<p>If the list items are strings, you'll get:</p>\n\n<pre><code>print(lst)\n# [{'ex2': 'c', 'ex1': 'a'}, {'ex2': 'c', 'ex1': 'b'}, {'ex2': 'd', 'ex1': 'a'}, {'ex2': 'd', 'ex1': 'b'}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 4, "creation_date": 1487201361, "post_id": 42262068, "comment_id": 71681674, "body": "your formatting is unconventional and makes this code almost impossible to read."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487201511, "post_id": 42262068, "comment_id": 71681724, "body": "Please at least <i>try</i> to stick to Python style conventions. In Python, a comprehension is <i>almost always</i> better than an equivalent <code>map</code> with <code>lambda</code> from a readability perspective, and will likely perform better too. For the record, I did not downvote, since this does add a valuable generalization with <code>product</code>... just improve the style..."}, {"owner": {"reputation": 3259, "user_id": 854988, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66dc5a164daf24ad6fb75212c8068aac?s=128&d=identicon&r=PG", "display_name": "deeenes", "link": "https://stackoverflow.com/users/854988/deeenes"}, "edited": false, "score": 0, "creation_date": 1487201665, "post_id": 42262068, "comment_id": 71681771, "body": "thanks Paul for pointing this out. I thought about it a lot how to format multiple nested maps, and this was the most clear I could come up with. but I would be extremely grateful if you could show me a better way (just put this in a pastebin, if you have 2 minutes for me)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1487201767, "post_id": 42262068, "comment_id": 71681802, "body": "The answer is <i>don&#39;t use multiple maps</i>."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1487201891, "post_id": 42262068, "comment_id": 71681855, "body": "Also just use string literals <code>&#39;ex1&#39;</code> and <code>&#39;ex2&#39;</code> rather than trying to be clever with <code>enumerate</code>."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1487201936, "post_id": 42262068, "comment_id": 71681870, "body": "I had a go at formatting it but really, it still didn&#39;t read very well for me. Consider the answer from Moses: <code>lst = [{&#39;ex1&#39;: j, &#39;ex2&#39;: i} for i in y for j in x]</code>. There is no logical way to order your code under PEP 8 because the approach doesn&#39;t make sense when you can achieve the same goal with something like that."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487202121, "post_id": 42262068, "comment_id": 71681921, "body": "So, with comprehensions, it&#39;s much easier to decipher what&#39;s going on:  <code>[{&#39;ex&#39;+str(i+1):v for i,v in enumerate(vals)} for vals in itertools.product(*my_lists)]</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487202245, "post_id": 42262068, "comment_id": 71681956, "body": "Really, you should do something like <code>values = itertools.product(*my_lists)</code> then use the second argument to enumerate: <code>[{&#39;ex%d&#39;%i:v for i,v in enumerate(vals, 1)} for vals in values]</code>"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487202332, "post_id": 42262068, "comment_id": 71681989, "body": "@juanpa.arrivillaga if you need that, seems like the OP doesnt and in the answer above leads to an extra level of indirection. I can see though that your example achieves it in a much clearer way."}], "tags": [], "owner": {"reputation": 3259, "user_id": 854988, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66dc5a164daf24ad6fb75212c8068aac?s=128&d=identicon&r=PG", "display_name": "deeenes", "link": "https://stackoverflow.com/users/854988/deeenes"}, "is_accepted": false, "score": -1, "last_activity_date": 1487202534, "last_edit_date": 1487202534, "creation_date": 1487201315, "answer_id": 42262068, "question_id": 42261913, "link": "https://stackoverflow.com/questions/42261913/combine-2-list-in-python/42262068#42262068", "title": "Combine 2 list in python", "body": "<p>There is a package called <code>itertools</code> which provides many methods to make this kind of things easy. I assume you might have not only one list, but eventually more, so you can put them in another list <code>my_lists</code>, take their product, and the rest of the thing is just making it a <code>dict</code> in the desired format, i.e. with keys like <code>ex1</code>.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Here is the same with list comprehension:</p>\n\n<pre><code>[dict(('ex%u' % (i[0] + 1), i[1]) for i in enumerate(co))\n    for co in itertools.product(*my_lists)]\n</code></pre>\n\n<p>And was like this with map:</p>\n\n<pre><code>import itertools\n\nx = ['a', 'b']\ny = ['c', 'd']\nmy_lists = [x, y]\n\nlist_of_dicts = (\n    list(\n        map(\n            lambda co:\n                dict(\n                    map(\n                        lambda i:\n                            ('ex%u' % (i[0] + 1), i[1]),\n                        enumerate(co)\n                    )\n                ),\n            itertools.product(*my_lists)\n        )\n    )\n)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7571765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gj9hMBJMv_k/AAAAAAAAAAI/AAAAAAAAABU/xCLJDUVjOxE/photo.jpg?sz=128", "display_name": "Thais Maiolino", "link": "https://stackoverflow.com/users/7571765/thais-maiolino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487202534, "creation_date": 1487200509, "last_edit_date": 1487200733, "question_id": 42261913, "link": "https://stackoverflow.com/questions/42261913/combine-2-list-in-python", "title": "Combine 2 list in python", "body": "<p>I have 2 lists:</p>\n\n<pre><code>x = [a,b]\n\ny = [c,d]\n</code></pre>\n\n<p>and I want to create a list of dictionary like this:</p>\n\n<pre><code>dict = [{ex1:a,ex2:c},{ex1:b,ex2:c},{ex1:a,ex2:d},{ex1:b,ex2:d}]\n</code></pre>\n\n<p>How can I do that in a simple way?</p>\n"}, {"tags": ["python", "ubuntu", "model", "openerp", "odoo-10"], "comments": [{"owner": {"reputation": 8167, "user_id": 3734244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/y1UTF.png?s=128&g=1", "display_name": "danidee", "link": "https://stackoverflow.com/users/3734244/danidee"}, "edited": false, "score": 0, "creation_date": 1487212381, "post_id": 42261906, "comment_id": 71684781, "body": "Fix your indentation and why do you have backticks (``) all over the place in your xml code?"}, {"owner": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "reply_to_user": {"reputation": 8167, "user_id": 3734244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/y1UTF.png?s=128&g=1", "display_name": "danidee", "link": "https://stackoverflow.com/users/3734244/danidee"}, "edited": false, "score": 0, "creation_date": 1487247971, "post_id": 42261906, "comment_id": 71703851, "body": "@danidee I&#39;ve fixed the indentation but still the view doesn&#39;t recognize the model"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "edited": false, "score": 0, "creation_date": 1487251091, "post_id": 42274758, "comment_id": 71706166, "body": "I have 2  <b><i>_init_</i>.py</b>  files and both have <code>import models</code>, any other suggestions?"}, {"owner": {"reputation": 1692, "user_id": 6344135, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yx2wa.png?s=128&g=1", "display_name": "sfx", "link": "https://stackoverflow.com/users/6344135/sfx"}, "reply_to_user": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "edited": false, "score": 0, "creation_date": 1487253065, "post_id": 42274758, "comment_id": 71707695, "body": "what is your folder structure for this module?"}, {"owner": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "edited": false, "score": 0, "creation_date": 1487258027, "post_id": 42274758, "comment_id": 71711791, "body": "it&#39;s the basic structure created with <code>odoo-bin scaffold openacademy addons</code> command, 3 folders (views, modules, controllers)"}, {"owner": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "edited": false, "score": 0, "creation_date": 1487259275, "post_id": 42274758, "comment_id": 71712724, "body": "it&#39;s ok I&#39;ve solved the problem,I&#39;ve just created another empty model and copied my files there, thanks anyway"}], "tags": [], "owner": {"reputation": 1692, "user_id": 6344135, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yx2wa.png?s=128&g=1", "display_name": "sfx", "link": "https://stackoverflow.com/users/6344135/sfx"}, "is_accepted": false, "score": 0, "last_activity_date": 1487250123, "creation_date": 1487250123, "answer_id": 42274758, "question_id": 42261906, "link": "https://stackoverflow.com/questions/42261906/cant-import-a-model-in-odoo-view/42274758#42274758", "title": "Can&#39;t import a model in odoo view", "body": "<p>In the <strong>__init__.py</strong>  just try using</p>\n\n<pre><code>import models\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 5187894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2edd2bdefa3be017afdcbf2fd216ab3b?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Dat", "link": "https://stackoverflow.com/users/5187894/lee-dat"}, "is_accepted": false, "score": 0, "last_activity_date": 1487695205, "creation_date": 1487695205, "answer_id": 42373069, "question_id": 42261906, "link": "https://stackoverflow.com/questions/42261906/cant-import-a-model-in-odoo-view/42373069#42373069", "title": "Can&#39;t import a model in odoo view", "body": "<p>try replace this code :</p>\n\n<pre><code> &lt;field name=\"name\"&gt;course.form&lt;/field&gt;\n &lt;field name=\"model\"&gt;openacademy.course&lt;/field&gt;\n</code></pre>\n\n<p>You can not use \"''\" in XML, it will cause the error.\nAnd then rest some space at the beginning of rows like this </p>\n\n<pre><code> from odoo import models, fields, api\n class Course(models.Model):\n      _name = \"openacademy.course\"\n\n      name = fields.Char(string=\"Title\", required=True)\n      description = fields.Text()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8408039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bdaa1df29d000e9dbd024320311b12?s=128&d=identicon&r=PG&f=1", "display_name": "suibin zhang", "link": "https://stackoverflow.com/users/8408039/suibin-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1501708551, "creation_date": 1501708551, "answer_id": 45471128, "question_id": 42261906, "link": "https://stackoverflow.com/questions/42261906/cant-import-a-model-in-odoo-view/45471128#45471128", "title": "Can&#39;t import a model in odoo view", "body": "<p>Nothing wrong with the sample \"building a module\" <strong>init</strong>.py (from <a href=\"https://www.odoo.com/documentation/10.0/howtos/backend.html\" rel=\"nofollow noreferrer\">https://www.odoo.com/documentation/10.0/howtos/backend.html</a>) it is importing the model under addons/openacademy/models.</p>\n\n<p>In my case, I have to restart odoo (kill the current odoo-bin and restart). The error on importing \"openacademy.course\" went away, and installation was successful.</p>\n"}], "owner": {"reputation": 15, "user_id": 4721962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eae064f6e92668bc923c53eb8369320?s=128&d=identicon&r=PG&f=1", "display_name": "Houssem Abid", "link": "https://stackoverflow.com/users/4721962/houssem-abid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2554, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1501708551, "creation_date": 1487200477, "question_id": 42261906, "link": "https://stackoverflow.com/questions/42261906/cant-import-a-model-in-odoo-view", "title": "Can&#39;t import a model in odoo view", "body": "<p>I have installed odoo 10 on linux and it works fine\nI'm following the official tutorial from odoo website 'building a module' </p>\n\n<p><a href=\"https://www.odoo.com/documentation/10.0/howtos/backend.html#build-an-odoo-module\" rel=\"nofollow noreferrer\">https://www.odoo.com/documentation/10.0/howtos/backend.html#build-an-odoo-module</a></p>\n\n<p>I have created an empty module with</p>\n\n<pre><code>odoo-bin scaffold openacademy addons\n</code></pre>\n\n<p>but when I try to import a module in to the xml file <strong>openacademy.xml</strong> I get the following error</p>\n\n<pre><code>Error context:\nView `course.form`\n\n[view_id: 4867, xml_id: n/a, model: openacademy.course, parent_id: n/a]\nNone\" while parsing /opt/odoo/odoo-\n\n10.0/addons/openacademy/views/openacademy.xml:6, near\n&lt;record model=\"ir.ui.view\" id=\"course_form_view\"&gt;\n        &lt;field name=\"name\"&gt;course.form&lt;/field&gt;\n        &lt;field name=\"model\"&gt;openacademy.course&lt;/field&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n            &lt;form string=\"Course Form\"&gt;\n                &lt;sheet&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"name\"/&gt;\n                        &lt;field name=\"description\"/&gt;\n                    &lt;/group&gt;\n                &lt;/sheet&gt;\n            &lt;/form&gt;\n        &lt;/field&gt;\n    &lt;/record&gt;\n</code></pre>\n\n<p><strong>openacademy.xml</strong>:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n   &lt;odoo&gt;\n    &lt;data&gt;\n        &lt;record model=\"ir.ui.view\" id=\"course_form_view\"&gt;\n            &lt;field name=\"name\"&gt;`course.form`&lt;/field&gt;\n            &lt;field name=\"model\"&gt;`openacademy.course`&lt;/field&gt;\n            &lt;field name=\"arch\" type=\"xml\"&gt;\n                &lt;form string=\"Course Form\"&gt;\n                    &lt;sheet&gt;\n                        &lt;group&gt;\n                            &lt;field name=\"name\"/&gt;\n                            &lt;field name=\"description\"/&gt;\n                        &lt;/group&gt;\n                    &lt;/sheet&gt;\n                &lt;/form&gt;\n            &lt;/field&gt;\n        &lt;/record&gt;  \n  &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from odoo import models, fields, api\n\nclass Course(models.Model):\n_name = 'openacademy.course'\n\nname = fields.Char(string=\"Title\", required=True)\ndescription = fields.Text()\n</code></pre>\n\n<p><strong>__init__.py</strong></p>\n\n<pre><code>from . import models\n</code></pre>\n"}, {"tags": ["python", "cherrypy"], "comments": [{"owner": {"reputation": 500, "user_id": 5800952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/162124b3c0b78ad6e3c947e7bbaa001c?s=128&d=identicon&r=PG&f=1", "display_name": "patito", "link": "https://stackoverflow.com/users/5800952/patito"}, "edited": false, "score": 0, "creation_date": 1487200351, "post_id": 42261854, "comment_id": 71681315, "body": "Are you calling your script with virtualenv activated?"}, {"owner": {"reputation": 483, "user_id": 7427817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0fBh.png?s=128&g=1", "display_name": "Barkles", "link": "https://stackoverflow.com/users/7427817/barkles"}, "reply_to_user": {"reputation": 500, "user_id": 5800952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/162124b3c0b78ad6e3c947e7bbaa001c?s=128&d=identicon&r=PG&f=1", "display_name": "patito", "link": "https://stackoverflow.com/users/5800952/patito"}, "edited": false, "score": 0, "creation_date": 1487201230, "post_id": 42261854, "comment_id": 71681636, "body": "Yes, I definitely am! Its strange though: if I open python through cmd and execute each line individually, it works. If its run as a script, this error appears."}], "owner": {"reputation": 483, "user_id": 7427817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0fBh.png?s=128&g=1", "display_name": "Barkles", "link": "https://stackoverflow.com/users/7427817/barkles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1487201312, "answer_count": 0, "score": 0, "last_activity_date": 1487200272, "creation_date": 1487200272, "question_id": 42261854, "link": "https://stackoverflow.com/questions/42261854/attributeerror-module-cherrypy-has-no-attribute-expose", "closed_reason": "Duplicate", "title": "AttributeError: module &#39;cherrypy&#39; has no attribute &#39;expose&#39;", "body": "<p>I have installed cherrypy using pip within a virtualenv and run the first tutorial:</p>\n\n<pre><code>import cherrypy\n\n\nclass HelloWorld(object):\n    @cherrypy.expose\n    def index(self):\n        return \"Hello world!\"\n\n\nif __name__ == '__main__':\n    cherrypy.quickstart(HelloWorld())\n</code></pre>\n\n<p>It throws the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/wc/playground/scripts/cherrypy.py\", line 1, in &lt;module&gt;\n    import cherrypy\n  File \"C:\\wc\\playground\\scripts\\cherrypy.py\", line 4, in &lt;module&gt;\n    class HelloWorld(object):\n  File \"C:\\wc\\playground\\scripts\\cherrypy.py\", line 5, in HelloWorld\n    @cherrypy.expose\nAttributeError: module 'cherrypy' has no attribute 'expose'\n</code></pre>\n\n<p>Anyone have any idea about why?</p>\n"}, {"tags": ["python", "pandas", "datetime", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 1649, "user_id": 6824752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dlCSp.png?s=128&g=1", "display_name": "Filip Kilibarda", "link": "https://stackoverflow.com/users/6824752/filip-kilibarda"}, "is_accepted": false, "score": 6, "last_activity_date": 1487232783, "last_edit_date": 1495540395, "creation_date": 1487219333, "answer_id": 42264977, "question_id": 42261823, "link": "https://stackoverflow.com/questions/42261823/pandas-date-multiindex-with-missing-dates-rolling-sum/42264977#42264977", "title": "Pandas Date MultiIndex with missing dates - Rolling sum", "body": "<p>I've made a couple assumptions about what you want, <strong>please clarify</strong>:</p>\n\n<ol>\n<li>You want the rows that have missing dates, to be considered as having <code>Value = NaN</code>.</li>\n<li>As a result, the <strong>past 2 day</strong> rolling sum should return <code>NaN</code> anytime there's a missing date in the rolling window.</li>\n<li>You want to compute the rolling sum <strong>within in each group</strong> <code>Type A</code> and <code>Type B</code></li>\n</ol>\n\n<p>If I've assumed correctly,</p>\n\n<h2>Create sample data set</h2>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport io\n\ndatastring = io.StringIO(\n\"\"\"\nAttribute,DateEvent,Value\nType A,2017-04-02,1\nType A,2017-04-03,2\nType A,2017-04-04,3\nType A,2017-04-05,4\nType B,2017-04-02,1\nType B,2017-04-03,2\nType B,2017-04-04,3\nType B,2017-04-05,4\n\"\"\")\n\ns = pd.read_csv(\n            datastring, \n            index_col=['Attribute', 'DateEvent'],\n            parse_dates=True)\nprint(s)\n</code></pre>\n\n<p>Here's what it looks like. Each of <code>Type A</code> and <code>Type B</code> are missing <code>2017-04-01</code>.</p>\n\n<pre><code>                      Value\nAttribute DateEvent        \nType A    2017-04-02      1\n          2017-04-03      2\n          2017-04-04      3\n          2017-04-05      4\nType B    2017-04-02      1\n          2017-04-03      2\n          2017-04-04      3\n          2017-04-05      4\n</code></pre>\n\n<h2>Solution</h2>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/12390336/how-to-fill-the-missing-record-of-pandas-dataframe-in-pythonic-way\">this answer</a>, you have to reconstruct the index, then re-index your <code>Series</code> to get one that includes all the dates.</p>\n\n<pre><code># reconstruct index with all the dates\ndates = pd.date_range(\"2017-04-01\",\"2017-04-05\", freq=\"1D\")\nattributes = [\"Type A\", \"Type B\"]\n# create a new MultiIndex\nindex = pd.MultiIndex.from_product([attributes,dates], \n        names=[\"Attribute\",\"DateEvent\"])\n# reindex the series\nsNew = s.reindex(index)\n</code></pre>\n\n<p>The missing dates were added, with <code>Value = NaN</code>.</p>\n\n<pre><code>                      Value\nAttribute DateEvent        \nType A    2017-04-01    NaN\n          2017-04-02    1.0\n          2017-04-03    2.0\n          2017-04-04    3.0\n          2017-04-05    4.0\nType B    2017-04-01    NaN\n          2017-04-02    1.0\n          2017-04-03    2.0\n          2017-04-04    3.0\n          2017-04-05    4.0\n</code></pre>\n\n<p>Now group the <code>Series</code> by the <code>Attribute</code> index column and apply a rolling window of size <code>2</code> with <code>sum()</code></p>\n\n<pre><code># group the series by the `Attribute` column\ngrouped = sNew.groupby(level=\"Attribute\")\n# Apply a 2 day rolling window\nsummed = grouped.rolling(2).sum()\n</code></pre>\n\n<h2>Final Output</h2>\n\n<pre><code>                                Value\nAttribute Attribute DateEvent        \nType A    Type A    2017-04-01    NaN\n                    2017-04-02    NaN\n                    2017-04-03    3.0\n                    2017-04-04    5.0\n                    2017-04-05    7.0\nType B    Type B    2017-04-01    NaN\n                    2017-04-02    NaN\n                    2017-04-03    3.0\n                    2017-04-04    5.0\n                    2017-04-05    7.0\n</code></pre>\n\n<p><em>Final Note: No idea why there are now two <code>Attribute</code> index columns, let me know if anyone figures that out.</em></p>\n\n<p>EDIT: Turns out similar question was asked <a href=\"https://stackoverflow.com/questions/42129254/pandas-dataframe-multiindex-groupby-rolling-operation-with-missing-dates\">here</a>. Check it out.</p>\n\n<p><em>Source:</em> <a href=\"https://stackoverflow.com/questions/12390336/how-to-fill-the-missing-record-of-pandas-dataframe-in-pythonic-way\">How to fill in missing values with a multiIndex</a></p>\n"}], "owner": {"reputation": 1243, "user_id": 2718796, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b556307b30d0c851497e9591f13a73b6?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/2718796/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1487234621, "creation_date": 1487200081, "last_edit_date": 1487234621, "question_id": 42261823, "link": "https://stackoverflow.com/questions/42261823/pandas-date-multiindex-with-missing-dates-rolling-sum", "title": "Pandas Date MultiIndex with missing dates - Rolling sum", "body": "<p>I have a pandas series that looks like</p>\n\n<pre><code>Attribute      DateEvent     Value\nType A         2015-04-01    4\n               2015-04-02    5\n               2015-04-05    3\nType B         2015-04-01    1\n               2015-04-03    4\n               2015-04-05    1\n</code></pre>\n\n<p>How do I convert the values to a rolling sum (say, past two days) while making sure to account for missing dates in my DateEvent index (assuming the start date and end date of it are the full range? (For example, <code>2015-04-03</code> and <code>2015-04-04</code> are missing for Type A, and <code>2015-04-02</code> and <code>2015-04-04</code> are missing for Type B).</p>\n"}, {"tags": ["python", "django", "python-3.x", "cookies"], "answers": [{"comments": [{"owner": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "edited": false, "score": 0, "creation_date": 1487283310, "post_id": 42262917, "comment_id": 71728072, "body": "Hm, this looks very promising! Do you happen to know, can I ship <code>Client</code> as a standalone package (without the rest of Django)? And is it suitable for production?"}, {"owner": {"reputation": 1138, "user_id": 6910571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/n1gpt.jpg?s=128&g=1", "display_name": "awmleer", "link": "https://stackoverflow.com/users/6910571/awmleer"}, "reply_to_user": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "edited": false, "score": 0, "creation_date": 1487288721, "post_id": 42262917, "comment_id": 71730192, "body": "Sorry...I have never tried to use it as a standalone package...And maybe it should only be used in the testing process."}], "tags": [], "owner": {"reputation": 1138, "user_id": 6910571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/n1gpt.jpg?s=128&g=1", "display_name": "awmleer", "link": "https://stackoverflow.com/users/6910571/awmleer"}, "is_accepted": false, "score": 1, "last_activity_date": 1487206399, "creation_date": 1487206399, "answer_id": 42262917, "question_id": 42261749, "link": "https://stackoverflow.com/questions/42261749/how-do-i-convince-django-im-logged-in/42262917#42262917", "title": "How do I convince Django I&#39;m logged in?", "body": "<p>Try to use Django's test client instead of urllib.</p>\n\n<pre><code>&gt;&gt;&gt; from django.test import Client\n&gt;&gt;&gt; c = Client()\n&gt;&gt;&gt; response = c.post('/login/', {'username': 'john', 'password': 'smith'})\n&gt;&gt;&gt; response.status_code\n200\n&gt;&gt;&gt; response = c.get('/customer/details/')\n&gt;&gt;&gt; response.content\nb'&lt;!DOCTYPE html...'\n</code></pre>\n\n<p>See: <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#the-test-client\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "is_accepted": true, "score": 0, "last_activity_date": 1487532477, "last_edit_date": 1487532477, "creation_date": 1487272297, "answer_id": 42282682, "question_id": 42261749, "link": "https://stackoverflow.com/questions/42261749/how-do-i-convince-django-im-logged-in/42282682#42282682", "title": "How do I convince Django I&#39;m logged in?", "body": "<p>It appeared that <code>Set-Cookie</code> is a wrong header for consequent requests. <code>Cookie</code> should be used instead:</p>\n\n<pre><code>&gt;&gt;&gt; get = Request('http://127.0.0.1:8000/api/do-stuff')\n&gt;&gt;&gt; get.add_header('Cookie', 'csrftoken=53eX5pwRzV4fR...')  # just csrftoken here\n&gt;&gt;&gt; get_resp = urlopen(get)\n</code></pre>\n"}], "owner": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 42282682, "answer_count": 2, "score": 0, "last_activity_date": 1487532477, "creation_date": 1487199765, "last_edit_date": 1487238797, "question_id": 42261749, "link": "https://stackoverflow.com/questions/42261749/how-do-i-convince-django-im-logged-in", "title": "How do I convince Django I&#39;m logged in?", "body": "<p>I have a Django application and I want to allow users to log in via some API and allow them to use some API calls that are protected by <code>login_required</code> decorator:</p>\n\n<pre><code>@csrf_exempt\ndef api_login(request):\n    if request.method == 'POST':\n        username = request.POST.get('username', '')\n        password = request.POST.get('password', '')\n        user = authenticate(username=username, password=password)\n        if user is not None:\n            login(request, user)\n            return HttpResponse(status=201)\n    return HttpResponseBadRequest()\n\n@login_required\ndef do_stuff(request):\n    return HttpResponse(status=201)\n</code></pre>\n\n<p>And this is how I try to log in and call <code>do_stuff</code> from python shell:</p>\n\n<pre><code>&gt;&gt;&gt; from urllib.parse import urlencode\n&gt;&gt;&gt; from urllib.request import Request, urlopen\n&gt;&gt;&gt; post = Request('http://127.0.0.1:8000/api/login', urlencode({'username': 'admin', 'password': 'admin'}).encode())\n&gt;&gt;&gt; post_resp = urlopen(post)\n</code></pre>\n\n<p>So far so good. I get a response with <code>sessionid</code> and <code>csrftoken</code> cookies. Then I try to use the <code>sessionid</code> cookie to do stuff:</p>\n\n<pre><code>&gt;&gt;&gt; get = Request('http://127.0.0.1:8000/api/do-stuff')\n&gt;&gt;&gt; get.add_header('Set-Cookie', 'csrftoken=...')  # just copy paste of the response cookie\n&gt;&gt;&gt; get_resp = urlopen(get)\n</code></pre>\n\n<p>At this point <code>login_required</code> decorator thinks I'm an <code>AnonimousUser</code> and sends out a redirect to the login page. Browser works perfectly with this <code>sessionid</code> cookie, so I suppose I miss some headers, because they aren't numerous, just <code>Host</code>, <code>User-Agent</code>, and <code>Set-Cookie</code>.</p>\n\n<p>I'm deliberately trying to avoid using modules outside of Django and stdlib. Shouldn't authentication be rather simple?</p>\n"}, {"tags": ["python", "mysql", "mysql-python"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7571726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712f1d4f022a59b5dcaef2fdceb7944b?s=128&d=identicon&r=PG&f=1", "display_name": "Enda", "link": "https://stackoverflow.com/users/7571726/enda"}, "edited": false, "score": 0, "creation_date": 1487200538, "post_id": 42261732, "comment_id": 71681375, "body": "Thanks Haifeng Zhang I guess it worked ,   mysql&gt; GRANT ALL ON databasename.* TO stringName@&#39;stringName.mysql.pythonanywhere-services.com&#39;; ERROR 1044 (42000): Access denied for user &#39;stringName&#39;@&#39;%&#39; to database &#39;EndaKeane$rockford911&#39;"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "reply_to_user": {"reputation": 23, "user_id": 7571726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712f1d4f022a59b5dcaef2fdceb7944b?s=128&d=identicon&r=PG&f=1", "display_name": "Enda", "link": "https://stackoverflow.com/users/7571726/enda"}, "edited": false, "score": 0, "creation_date": 1487200588, "post_id": 42261732, "comment_id": 71681392, "body": "@Enda no problem:) please check it as the answer. The check mark is on the left side of my answer"}, {"owner": {"reputation": 23, "user_id": 7571726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712f1d4f022a59b5dcaef2fdceb7944b?s=128&d=identicon&r=PG&f=1", "display_name": "Enda", "link": "https://stackoverflow.com/users/7571726/enda"}, "edited": false, "score": 0, "creation_date": 1487200694, "post_id": 42261732, "comment_id": 71681429, "body": "I just need to figure out why my acces is denied now."}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "reply_to_user": {"reputation": 23, "user_id": 7571726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712f1d4f022a59b5dcaef2fdceb7944b?s=128&d=identicon&r=PG&f=1", "display_name": "Enda", "link": "https://stackoverflow.com/users/7571726/enda"}, "edited": false, "score": 0, "creation_date": 1487200867, "post_id": 42261732, "comment_id": 71681491, "body": "@Enda read more about the <code>GRANT</code> command from <a href=\"https://dev.mysql.com/doc/refman/5.7/en/grant.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/grant.html</a>   it would help"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": true, "score": 1, "last_activity_date": 1487199705, "creation_date": 1487199705, "answer_id": 42261732, "question_id": 42261677, "link": "https://stackoverflow.com/questions/42261677/error-1064-4200-when-i-type-in-a-grant-all-request-in-mysql/42261732#42261732", "title": "Error 1064 (4200) - when I type in a GRANT ALL request in MySQL", "body": "<blockquote>\n  <p>Several objects within GRANT statements are subject to quoting, although quoting is optional in many cases: Account, database, table, column, and routine names. For example, if a user_name or host_name value in an account name is legal as an unquoted identifier, you need not quote it. <em>However, quotation marks are necessary to specify a user_name string containing special characters (<strong>such as -</strong>), or a host_name string containing special characters or wildcard characters (such as %); for example, 'test-user'@'%.com'. Quote the user name and host name separately.</em></p>\n</blockquote>\n\n<p>You have to quote hostname as</p>\n\n<pre><code>username@'hostname.mysql.pythonanywhere-services.com'\n</code></pre>\n\n<p>without quote:</p>\n\n<pre><code>mysql&gt; GRANT ALL ON uesrName.* TO username@hostname.mysql.pythonanywhere-services.com;\nERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-services.com' at line 1\n</code></pre>\n\n<p>with quote:</p>\n\n<pre><code>mysql&gt; GRANT ALL ON uesrName.* TO username@'hostname.mysql.pythonanywhere-services.com';\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7571726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712f1d4f022a59b5dcaef2fdceb7944b?s=128&d=identicon&r=PG&f=1", "display_name": "Enda", "link": "https://stackoverflow.com/users/7571726/enda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 42261732, "answer_count": 1, "score": 2, "last_activity_date": 1487199705, "creation_date": 1487199416, "last_edit_date": 1487199542, "question_id": 42261677, "link": "https://stackoverflow.com/questions/42261677/error-1064-4200-when-i-type-in-a-grant-all-request-in-mysql", "title": "Error 1064 (4200) - when I type in a GRANT ALL request in MySQL", "body": "<pre><code>GRANT ALL ON uesrName.* TO username@hostname.mysql.pythonanywhere-services.com;\n</code></pre>\n\n<p>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-services.co\nm' at line 1</p>\n\n<p>Can someone tell me , Is it the \" - \" is causing my request to fail.</p>\n\n<p>I have used the correct User name and host name provided by pythonanwhere.com\nI am using pythonanywhere.coms GUI when performing this task.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1487200080, "post_id": 42261791, "comment_id": 71681225, "body": "You&#39;ve got to restart that interpreter session at some point today, Max."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1487200128, "post_id": 42261791, "comment_id": 71681243, "body": "@juanpa.arrivillaga, i will definitely do ;-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1487199956, "creation_date": 1487199956, "answer_id": 42261791, "question_id": 42261627, "link": "https://stackoverflow.com/questions/42261627/merge-values-of-groupby-results-with-dataframe-in-new-column-python-pandas/42261791#42261791", "title": "merge values of groupby results with dataframe in new column Python Pandas", "body": "<p>IIUC you can do it this way:</p>\n\n<pre><code>In [299]: df\nOut[299]:\n   a  b  c   d\n0  1  1  1  11\n1  1  1  2  12\n2  1  2  3  13\n3  1  2  4  14\n4  2  1  5  15\n\nIn [300]: g\nOut[300]:\na  b\n1  1    3\n   2    7\nName: c, dtype: int64\n\nIn [301]: df.merge(g.reset_index(), on=['a','b'], how='left',\n                   suffixes=['','_'], indicator=True) \\\n            .rename(columns={'c_':'new'})\nOut[301]:\n   a  b  c   d  new     _merge\n0  1  1  1  11  3.0       both\n1  1  1  2  12  3.0       both\n2  1  2  3  13  7.0       both\n3  1  2  4  14  7.0       both\n4  2  1  5  15  NaN  left_only\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7565404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59250111d7358c03e09da6c2dd6df5f?s=128&d=identicon&r=PG&f=1", "display_name": "Iftak Nayeem", "link": "https://stackoverflow.com/users/7565404/iftak-nayeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 42261791, "answer_count": 1, "score": 3, "last_activity_date": 1487199956, "creation_date": 1487199174, "question_id": 42261627, "link": "https://stackoverflow.com/questions/42261627/merge-values-of-groupby-results-with-dataframe-in-new-column-python-pandas", "title": "merge values of groupby results with dataframe in new column Python Pandas", "body": "<p>I have a groupby object which looks like:</p>\n\n<pre><code>Age  Pclass  fam_size\n0.0  3       alone       11.586475\n1.0  1       alone       83.210410\n     2       alone       18.092672\n     3       alone        7.974073\n2.0  1       alone       72.784513\n     2       alone       12.058114\n     3       alone       10.317035\n3.0  1       alone       39.364014\n     2       alone       14.625000\n     3       alone        7.048491\n4.0  1       alone       36.562920\n     2       alone       10.500000\n     3       alone        7.820000\nName: Fare, dtype: float64\n</code></pre>\n\n<p>I want to find the rows in my original df that satisfy the age, Pclass, and fam_size criteria as listed in the above groupby object and \nfill in a new column with their corresponding values. Those that don't should be kept null.</p>\n\n<p>I'm trying to look for an efficient way to do this, possibly an apply,transform,map, merge or something short but having no luck. </p>\n"}, {"tags": ["python", "encryption", "rsa"], "comments": [{"owner": {"reputation": 651, "user_id": 3457926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c20fffb472807235cde8427419119d?s=128&d=identicon&r=PG&f=1", "display_name": "the_constant", "link": "https://stackoverflow.com/users/3457926/the-constant"}, "edited": false, "score": 0, "creation_date": 1487201358, "post_id": 42261613, "comment_id": 71681672, "body": "On a side note, writing your own encryption algorithm is <i>horrible</i> practice in real world application. Not relevant to answering the question, but I just want to help with the understanding of good principles within the programmatic world."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4224849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e4b74d56918d4ca932f19d77ba90105b?s=128&d=identicon&r=PG&f=1", "display_name": "all_type_programmer4739", "link": "https://stackoverflow.com/users/4224849/all-type-programmer4739"}, "edited": false, "score": 0, "creation_date": 1487201129, "post_id": 42261862, "comment_id": 71681596, "body": "My professor told us that e cannot be a factor of n, so that&#39;s why I checked n%e==0. How would I go about encoding the whole string into a single number?"}], "tags": [], "owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "is_accepted": false, "score": 1, "last_activity_date": 1487200300, "creation_date": 1487200300, "answer_id": 42261862, "question_id": 42261613, "link": "https://stackoverflow.com/questions/42261613/rsa-encryption-decryption-converting-to-string/42261862#42261862", "title": "RSA encryption/decryption: converting to string", "body": "<p>You must not encrypt every character in the string separately. You must encode the whole string in a single number, and execute the rsa encryption on that number. The same must be done in reverse while decoding. RSA has standards how long the character sequence can be, how it should be encoded and padded. (see PKCS1 or OAEP)</p>\n\n<p>Btw your <code>findE</code> function is flawed. No one cares if <code>n%e==0</code>, but <code>e</code> and <code>pn</code> must be coprime. Simplest is to choose a not-too-small prime for <code>e</code> like <code>e==65537</code>. It doesn't have to be random.</p>\n"}, {"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1487202454, "post_id": 42262078, "comment_id": 71682027, "body": "Of course, as long as it fits, you can also take a few characters together. You first encode them to bytes (e.g. using ASCII) and then convert the resulting bytes into an integer."}, {"owner": {"reputation": 45, "user_id": 4224849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e4b74d56918d4ca932f19d77ba90105b?s=128&d=identicon&r=PG&f=1", "display_name": "all_type_programmer4739", "link": "https://stackoverflow.com/users/4224849/all-type-programmer4739"}, "edited": false, "score": 0, "creation_date": 1487202806, "post_id": 42262078, "comment_id": 71682130, "body": "But when decrypting, how would you determine what integer corresponds to which letter? eg. Would 15 be &quot;o&quot; or &quot;ae&quot;?"}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "reply_to_user": {"reputation": 45, "user_id": 4224849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e4b74d56918d4ca932f19d77ba90105b?s=128&d=identicon&r=PG&f=1", "display_name": "all_type_programmer4739", "link": "https://stackoverflow.com/users/4224849/all-type-programmer4739"}, "edited": false, "score": 0, "creation_date": 1487205405, "post_id": 42262078, "comment_id": 71682908, "body": "Neither. You would expect the same character value as in <code>x = ord(x) #converts character into ASCII reference number</code> (considering single characters). Of course you should not use <code>x = chr(x)</code> because that throws away information after encryption."}], "tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": false, "score": 2, "last_activity_date": 1487201355, "creation_date": 1487201355, "answer_id": 42262078, "question_id": 42261613, "link": "https://stackoverflow.com/questions/42261613/rsa-encryption-decryption-converting-to-string/42262078#42262078", "title": "RSA encryption/decryption: converting to string", "body": "<p>Generally, for this kind of toy RSA implementations, each character is encrypted separately. Now encryption will result in a value between zero and N, the modulus. </p>\n\n<p>Probably the easiest way to encode this value is to always make sure it is dLen decimals in size where dLen is the number of decimals required to display the modulus N. You can do this by prefixing zero digits until the value is of the right size. Then, to decrypt, read dLen characters, convert it into a number, and perform the modular exponentiation with the private key.</p>\n\n<p>The same thing happens for actual RSA encryption (e.g. RSA-OAEP). Here the result of the encryption is converted to the same number of <em>bytes</em> required to hold the modulus. This function is called I2OSP. Implementing above will let you practice implementing such function.</p>\n\n<hr>\n\n<p>Tamas is of course correct when he explains that - in real life - this is not how to encrypt strings. You'd use a hybrid cryptosystem instead where a block cipher encrypts the plaintext (converted to bytes). </p>\n"}], "owner": {"reputation": 45, "user_id": 4224849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e4b74d56918d4ca932f19d77ba90105b?s=128&d=identicon&r=PG&f=1", "display_name": "all_type_programmer4739", "link": "https://stackoverflow.com/users/4224849/all-type-programmer4739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2752, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487201355, "creation_date": 1487199116, "question_id": 42261613, "link": "https://stackoverflow.com/questions/42261613/rsa-encryption-decryption-converting-to-string", "title": "RSA encryption/decryption: converting to string", "body": "<p>I am doing a project for one of my classes. The professor is having us make an RSA encryption/decryption program without using the crypto libraries  (all done from scratch). So I get my p, q, n, phi, e, and d and everything is fine. The problem I run into is trying to encrypt it. I take the ASCII ordinance of each character and encrypt using my e and n. However, the number I get back is far out of range to change back into an ASCII character. How can I change that number into a character and still be able to decrypt it using my private key later? Here is my rough code so far:</p>\n\n<pre><code>import random\n\ndef generatePrimes():\n    prime = False\n    while prime == False:\n        n = random.randint(10000, 100000) #generates random integer between 10,000 and 100,000\n        if n % 2 != 0: #checks if integer is divisible by 2\n            for x in range(3, int(n ** 0.5), 2): #starts at 3, increments by 2 to check if integer is divisible by anything\n                if n % x == 0:\n                    break #if integer divides a number x and  has no remainder, it isn't prime and the loop breaks\n                else:\n                    prime = True #a prime number is found\n\n    return n #returns prime number\n\n\n\ndef  findE(n, pn):\n    factor = True\n    while factor == True:\n        e = random.randint(3, 35) #creates random integer from 2 to p(n), but keeps it small for ease of use\n        if n % e != 0: #checks if integer is divisible by n\n            factor = False #if remainder is not 0, the integer isn't divisible by n. if remainer is 0, the loop restarts to choose another number\n\n     return e\n\n\n\ndef findD(e, pn):\n    d = pow(e, pn - 2, pn) #calculates d\n\n    return d\n\n\n\ndef encryption():\n    p = generatePrimes() #creates random prime number for p\n    q = generatePrimes() #creates random prime number for q\n    n = p * q #finds n by multiplying p and q\n    pn = (p - 1) * (q - 1) #finds p(n)\n    e = findE(n, pn) #creates e such that 1 &lt; e &lt; p(n)\n    d = findD(e, pn) #creates d\n\n    print('n =', n)\n    print('e =', e)\n    print('d =', d)\n\n    print('Keys have been created.')\n    message = input('Enter the message you wish to encrypt:')\n\n    newMessage = '' #creates new string that the encrypted message will be put into\n    for x in message:\n        x = ord(x) #converts character into ASCII reference number\n        x = (x ** e) % n #encrypts using rsa algorithm\n        x = chr(x)\n        newMessage += x #places new character into the encrypted string\n\n    print('Here is your encrypted message:')\n    print(newMessage) \n\n\ndef decryption():\n    n = int(input('Enter in a value for n:'))\n    d = int(input('Enter in a value for d:'))\n\n    newMessage = []\n    message = input('Enter the message you wish to decrypt:')\n    for x in message:\n        x = ord(x)\n        x = (x ** d) % n\n        x = chr(x)\n    newMessage += x\n\n    print('Here is your decrypted message:')\n    print(newMessage)\n</code></pre>\n"}, {"tags": ["python", "caching", "pickle"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1487199461, "post_id": 42261605, "comment_id": 71681011, "body": "Where is <code>cache_id</code> coming from? I only see a <code>pkl_id</code>... typo? I would expect a <code>NameError</code> or unless there is a <code>cache_id</code> in a higher scope..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1487199934, "post_id": 42261605, "comment_id": 71681176, "body": "There&#39;s nothing wrong with splitting up conditionals like that; it&#39;s not uncommon for the condition variable to only affect parts of a function. I usually just assign a default value to the variable at the beginning to shut up the IDE&#39;s warnings."}, {"owner": {"reputation": 1497, "user_id": 2712770, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1341540476/picture?type=large", "display_name": "James Kelleher", "link": "https://stackoverflow.com/users/2712770/james-kelleher"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1487265944, "post_id": 42261605, "comment_id": 71718051, "body": "@juanpa.arrivillaga that&#39;s a typo! thanks for pointing that out"}], "owner": {"reputation": 1497, "user_id": 2712770, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1341540476/picture?type=large", "display_name": "James Kelleher", "link": "https://stackoverflow.com/users/2712770/james-kelleher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487265958, "creation_date": 1487199048, "last_edit_date": 1487265958, "question_id": 42261605, "link": "https://stackoverflow.com/questions/42261605/is-it-bad-form-to-split-a-conditional-context", "title": "Is it bad form to split a conditional context?", "body": "<p>I'm adding caching functionality to a function that's basically an api wrapper. The gist of it is as follows:</p>\n\n<pre><code>def get_data(do_cache, *args):\n\n    if do_cache:\n        pkl_id = '/path/to/dir/' + get_cache_id(args) +'.pkl'\n\n        try:\n            data = read_data_from_pkl(pkl_id)\n            return data\n        except FileNotFoundException:\n            pass\n\n    data = get_data_from_api(args)\n\n    if do_cache:\n        cache_data_to_pkl(data, pkl_id)\n\n    return data\n</code></pre>\n\n<p>I've split the <code>do_cache</code> contexts, since if this argument is set to <code>False</code> then I want to neither read from nor write to disk, just return the results to the api call.</p>\n\n<p>This works of course, but I'm getting a bad \"code smell\". Not only is my IDE warning me that it can't be sure that the <code>cache_id</code> in the second conditional context has been created, but this just feels weird to me. Has anyone seen this approach create problems?</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 5144, "user_id": 1568919, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/185b1a9657fd81a1808aec8d96a1d0fb?s=128&d=identicon&r=PG", "display_name": "jf328", "link": "https://stackoverflow.com/users/1568919/jf328"}, "is_accepted": true, "score": 4, "last_activity_date": 1487250499, "creation_date": 1487250499, "answer_id": 42274891, "question_id": 42261593, "link": "https://stackoverflow.com/questions/42261593/bokeh-datatable-width/42274891#42274891", "title": "bokeh DataTable width", "body": "<p>Just found out that <code>DataTable</code> has an attribute <code>width</code> (which is not documented). So</p>\n\n<p><code>table = bmw.DataTable(source=source, columns=columns, height = 1000, width = 4000)</code></p>\n\n<p>will work</p>\n"}], "owner": {"reputation": 5144, "user_id": 1568919, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/185b1a9657fd81a1808aec8d96a1d0fb?s=128&d=identicon&r=PG", "display_name": "jf328", "link": "https://stackoverflow.com/users/1568919/jf328"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2857, "favorite_count": 0, "accepted_answer_id": 42274891, "answer_count": 1, "score": 3, "last_activity_date": 1487250499, "creation_date": 1487198968, "question_id": 42261593, "link": "https://stackoverflow.com/questions/42261593/bokeh-datatable-width", "title": "bokeh DataTable width", "body": "<p>Seems bokeh DataTable has a fixed whole table width? </p>\n\n<p>When I set width of columns to be large, it will not work. The code below has 4 columns <strong>width = 1000</strong>, but it will only show 4 columns of much smaller width. </p>\n\n<p>Also, although I can move the boundaries of each column in the output html in Chrome, I can't move the right end of the table in html -- The whole table width seems to be fixed.</p>\n\n<p>Is there a way to have tables of large width?</p>\n\n<pre><code>import bokeh.models.widgets as bmw\n\nsource = bokeh.models.ColumnDataSource(df)\nnumformatter = bmw.NumberFormatter()\nnumformatter.format = '0.00'\ncolumns = [TableColumn(field=c, title=c, width = 1000, formatter=numformatter) for c in df]\n\ntable = bmw.DataTable(source=source, columns=columns, height = 1000)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "random", "key"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7114146"}, "edited": false, "score": 0, "creation_date": 1487198735, "post_id": 42261517, "comment_id": 71680700, "body": "Yeah, then accessing the value, r = random.choice(Cards.keys()) print(r[1])"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1487198940, "last_edit_date": 1487198940, "creation_date": 1487198655, "answer_id": 42261517, "question_id": 42261485, "link": "https://stackoverflow.com/questions/42261485/python-random-dict-key-and-access-it/42261517#42261517", "title": "python random dict key, and access it", "body": "<p>Something like this?</p>\n\n<pre><code>&gt;&gt;&gt; random.choice(list(Cards))\n'Heart'\n</code></pre>\n\n<p>Then a random card:</p>\n\n<pre><code>&gt;&gt;&gt; suit = random.choice(list(Cards))\n&gt;&gt;&gt; card = random.choice(Cards[suit])\n&gt;&gt;&gt; card, suit\n('King', 'Heart')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7114146"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "closed_date": 1487198569, "accepted_answer_id": 42261517, "answer_count": 1, "score": 0, "last_activity_date": 1539657445, "creation_date": 1487198528, "last_edit_date": 1539657445, "question_id": 42261485, "link": "https://stackoverflow.com/questions/42261485/python-random-dict-key-and-access-it", "closed_reason": "Not suitable for this site", "title": "python random dict key, and access it", "body": "<pre><code>import random\n\n\nCards = {\n    \"Spade\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\", \"Ace\"],\n    \"Diamond\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\", \"Ace\"],\n    \"Club\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\", \"Ace\"],\n    \"Heart\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\", \"Ace\"]\n\n}\n\nfor _ in range(55):\n    r = random.sample(list(Cards), 1)\n    print(r[0])\n</code></pre>\n\n<p>I've tried plenty more and couldn't figure it out. I'm having problem accessing the value of the key</p>\n"}, {"tags": ["python", "windows", "operating-system"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1487200324, "post_id": 42261482, "comment_id": 71681308, "body": "Just what do you mean by &quot;external storage that contains for example Linux&quot;? If you mean a hard drive that was formatted by a Linux system, you could find the file system used on that drive. That will not tell you the OS for sure, since some file systems can be made by multiple OSs. If you mean a computer linked to yours over the network, you could just ask the computer what its OS is. If you mean a drive that contains the files to run Linux, you could search for key files used by the OS."}, {"owner": {"reputation": 51, "user_id": 7242921, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-01sWUESOWNw/AAAAAAAAAAI/AAAAAAAAAE0/ehneZ5_Rke0/photo.jpg?sz=128", "display_name": "Zeiad Badawy", "link": "https://stackoverflow.com/users/7242921/zeiad-badawy"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1487203404, "post_id": 42261482, "comment_id": 71682333, "body": "What I meant is that I have a Hard Disk that contains Linux and I wanted to know what is the OS, like for example <code>Linux 4.4.21-v7+</code>"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1487204275, "post_id": 42261482, "comment_id": 71682567, "body": "Do you mean the drive contains the files to run Linux--it could be used as the boot drive for a Linux system?"}, {"owner": {"reputation": 51, "user_id": 7242921, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-01sWUESOWNw/AAAAAAAAAAI/AAAAAAAAAE0/ehneZ5_Rke0/photo.jpg?sz=128", "display_name": "Zeiad Badawy", "link": "https://stackoverflow.com/users/7242921/zeiad-badawy"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1487207541, "post_id": 42261482, "comment_id": 71683548, "body": "Yes, I mean a drive that contains all the files to run Linux. And I forget to mention it, it doesn&#39;t have to be just a Linux OS, it can be a Mac or Windows. The important thing for me is that I want to write some code that tells me that this Hard Disk contains Windows and this one contains for example Linux. That is all what I want."}], "owner": {"reputation": 51, "user_id": 7242921, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-01sWUESOWNw/AAAAAAAAAAI/AAAAAAAAAE0/ehneZ5_Rke0/photo.jpg?sz=128", "display_name": "Zeiad Badawy", "link": "https://stackoverflow.com/users/7242921/zeiad-badawy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487263489, "creation_date": 1487198513, "last_edit_date": 1487263489, "question_id": 42261482, "link": "https://stackoverflow.com/questions/42261482/get-os-from-an-external-storage-in-python", "title": "Get OS From An External Storage In Python", "body": "<p>I know that I can get the Operating System by typing <code>import platform\nprint platform.system(), platform.release()</code>, but if I have an external storage ( Hard Disk ) that contains for example Linux ( It can be any other OS like Windows or Mac ), What exactly do I do to get the OS??</p>\n\n<p>In other words, I want some code that tells me that this Hard Disk contains this OS. </p>\n\n<p>Thanks in Advance</p>\n\n<hr>\n\n<p>UPDATE:</p>\n\n<p>It seems that my question is unclear, so I will explain it in other words.</p>\n\n<p>If I import the <code>platform</code> module and printed <code>platform.system()</code> and <code>platform.release()</code>, it shows me :</p>\n\n<blockquote>\n  <p>Windows 7</p>\n</blockquote>\n\n<p>I want some code that gives me the same result but for attached external Hard Disks, that can contains any OS.</p>\n\n<p>At the end, I want to get it's output.</p>\n\n<p>So, if my Hard Disk contains FOR EXAMPLE Windows XP, it prints me:</p>\n\n<blockquote>\n  <p>Windows XP</p>\n</blockquote>\n\n<p>And so on.</p>\n\n<p>I think that this is the simpler way to describe my question.</p>\n"}, {"tags": ["python", "python-3.x", "google-maps-api-3", "google-distancematrix-api"], "comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1487198775, "post_id": 42261480, "comment_id": 71680726, "body": "what exactly are <code>a, b, ..., E, F, G</code>? Strings? If so, use some quotes. What have you tried so far?"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1487199361, "post_id": 42261480, "comment_id": 71680964, "body": "Add your code and the explanation of what all those are in the question body by hitting on the <code>edit</code> link."}, {"owner": {"reputation": 40, "user_id": 7513633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac293d2a74f877301a66182d4bbe989a?s=128&d=identicon&r=PG&f=1", "display_name": "TiagoCC", "link": "https://stackoverflow.com/users/7513633/tiagocc"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1487201452, "post_id": 42261480, "comment_id": 71681705, "body": "thanks, I uploaded my code, can you try and see what I can do to fix it?"}, {"owner": {"reputation": 1207, "user_id": 6639387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/700c518018001aaa79231216869ad08f?s=128&d=identicon&r=PG&f=1", "display_name": "JanHak", "link": "https://stackoverflow.com/users/6639387/janhak"}, "edited": false, "score": 0, "creation_date": 1487241753, "post_id": 42261480, "comment_id": 71699255, "body": "What do you expect this code to do and what is it outputting at the moment? Could you post a link to a csv. files that give you trouble?"}], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 7513633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac293d2a74f877301a66182d4bbe989a?s=128&d=identicon&r=PG&f=1", "display_name": "TiagoCC", "link": "https://stackoverflow.com/users/7513633/tiagocc"}, "edited": false, "score": 0, "creation_date": 1487200457, "post_id": 42261656, "comment_id": 71681346, "body": "thanks, I uploaded my code, can you try and see what I can do to fix it?"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487199286, "creation_date": 1487199286, "answer_id": 42261656, "question_id": 42261480, "link": "https://stackoverflow.com/questions/42261480/how-to-iterate-over-each-element-in-two-columns-of-different-length/42261656#42261656", "title": "how to iterate over each element in two columns of different length", "body": "<p>A list comprehension will do:</p>\n\n<pre><code>origins=['a','b','c','d']\ndestinations=['E','F','G']\n\nDistances_from = [\"{}{}\".format(x,y) for x in origins for y in destinations]\nprint(Distances_from)\n# ['aE', 'aF', 'aG', 'bE', 'bF', 'bG', 'cE', 'cF', 'cG', 'dE', 'dF', 'dG']\n</code></pre>\n\n<p>Obviously, you need to change what you want to do (probably not <code>\"{}{}\".format(x,y)</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 40, "user_id": 7513633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac293d2a74f877301a66182d4bbe989a?s=128&d=identicon&r=PG&f=1", "display_name": "TiagoCC", "link": "https://stackoverflow.com/users/7513633/tiagocc"}, "edited": false, "score": 0, "creation_date": 1487200471, "post_id": 42261670, "comment_id": 71681351, "body": "thanks, I uploaded my code, can you try and see what I can do to fix it?"}], "tags": [], "owner": {"reputation": 1207, "user_id": 6639387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/700c518018001aaa79231216869ad08f?s=128&d=identicon&r=PG&f=1", "display_name": "JanHak", "link": "https://stackoverflow.com/users/6639387/janhak"}, "is_accepted": false, "score": 0, "last_activity_date": 1487199446, "last_edit_date": 1487199446, "creation_date": 1487199373, "answer_id": 42261670, "question_id": 42261480, "link": "https://stackoverflow.com/questions/42261480/how-to-iterate-over-each-element-in-two-columns-of-different-length/42261670#42261670", "title": "how to iterate over each element in two columns of different length", "body": "<p>Is it as simple as nested for loop, you are searching for:</p>\n\n<pre><code>for origin in origins:\n    for destination in destinations:\n        distance(origin, destination)\n        ... \n</code></pre>\n\n<p>To write it in a more succinct manner you could do:</p>\n\n<pre><code>from functools import product\nfor origin, destination in product(origins, destinations):\n    distance(origin, destination)\n</code></pre>\n\n<p>Or use list comprehension:</p>\n\n<pre><code>distances = [distance(origin, destination) \n                      for origin in origins \n                      for destination in destinations]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40, "user_id": 7513633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac293d2a74f877301a66182d4bbe989a?s=128&d=identicon&r=PG&f=1", "display_name": "TiagoCC", "link": "https://stackoverflow.com/users/7513633/tiagocc"}, "is_accepted": false, "score": 0, "last_activity_date": 1487364741, "creation_date": 1487364741, "answer_id": 42307167, "question_id": 42261480, "link": "https://stackoverflow.com/questions/42261480/how-to-iterate-over-each-element-in-two-columns-of-different-length/42307167#42307167", "title": "how to iterate over each element in two columns of different length", "body": "<p>I think i've almost solved it, I keep having some problems but I thinks it's because of the Google API rather than the code.\nHere is the code I used.</p>\n\n<p>@JanHak</p>\n\n<pre><code>dest_f=open(os.path.join(dir,'Colombian_Municipalities.csv'),'r')\norig_f=open(os.path.join(dir,'Origins.csv'),'r')\noutput_f=open(os.path.join(dir,'Distances_to_Bogota.csv'),'w')\n\n# Constants\ndest_code_index=0 # detination city code\ndest_coord_index=10 # Coordinates from all municipalities in Colombia\norig_code_index=0 #\norig_coord_index=1 # Coordinates from markets and seaports\n\n\n\ndest_reader=csv.reader(dest_f)\norig_reader=csv.reader(orig_f)\noutput_writer=csv.writer(output_f)\noutput_header=['Origin','Destination','Distance (meters)','Duration (seconds)']\noutput_writer.writerow(output_header)\n\n\norig_reader_list=list(orig_reader)\ndest_reader_list=list(dest_reader)        \n\n\ntry:\n\nfor dest_row in dest_reader_list[1:]:\n\n    dest_code=dest_row[dest_code_index]\n    dest_coord=dest_row[dest_coord_index]\n\n\n    for orig_row in orig_reader_list[1:]:\n\n        orig_code=orig_row[orig_code_index]\n        orig_coord=orig_row[orig_coord_index]\n\n        print(orig_code,dest_code)\n\n        distances=gmaps.distance_matrix(orig_coord, dest_coord) \n\n        if distances['rows'][0]['elements'][0]['status']==\"OK\": \n            output_writer.writerow((dest_code,orig_code,\n                                 distances['rows'][0]['elements'][0]['distance']['value'], \n                                 distances['rows'][0]['elements'][0]['duration']['value']))             \n        else:\n            output_writer.writerow((dest_code,orig_code,\n                             \".\", \n                             \".\"))         \n\nfinally:\ndest_f.close()\norig_f.close()\noutput_f.close()\n</code></pre>\n"}], "owner": {"reputation": 40, "user_id": 7513633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac293d2a74f877301a66182d4bbe989a?s=128&d=identicon&r=PG&f=1", "display_name": "TiagoCC", "link": "https://stackoverflow.com/users/7513633/tiagocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1487364741, "creation_date": 1487198508, "last_edit_date": 1487204444, "question_id": 42261480, "link": "https://stackoverflow.com/questions/42261480/how-to-iterate-over-each-element-in-two-columns-of-different-length", "title": "how to iterate over each element in two columns of different length", "body": "<p>I have two columns in a CSV file, and I want to make a loop with Python, so I can match each element from one list to the other. I'm doing it to create a file with multiple itineraries from the GoogleMaps API. So what I actually want to do is map distances from a list of origins to a list of destinations, for each element in both lists.</p>\n\n<p>It's something like this:</p>\n\n<pre><code>origins = ['a', 'b', 'c', 'd']\ndestinations = ['E', 'F', 'G']\n</code></pre>\n\n<p>And I want an output like this:</p>\n\n<pre><code>Distances_from = ['aE', 'aF', 'aG', 'bE', 'bF', 'bG', 'cE', 'cF', 'cG', 'dE', 'dF', 'dG']\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>destination_index=0 #city code\ndestination_coordinates=10\norigin_index=12\norigin_coordinates=13\n\nreader=csv.reader(municipalities)\nwriter=csv.writer(output)\n\ntry:\n    for row in list(reader)[1:]:\n         destination_c=row[destination_coordinates]\n         origin_c=row[origin_coordinates]\n\n         destination_name=row[destination_index]\n         origin_name=row[origin_index]\n\n     for destination_coordinates, origin_coordinates in zip(destination_c, origin_c):\n         distances = gmaps.distance_matrix(origin_c, destination_c) \n\n         if distances['rows'][0]['elements'][0]['status'] == \"OK\": \n            writer.writerow((destination_name,origin_name,\n                                 distances['rows'][0]['elements'][0]['distance']['value'], \n                                 distances['rows'][0]['elements'][0]['duration']['value']))          \n         else:\n            writer.writerow((destination_name,origin_name,\n                             \".\", \n                             \".\"))         \nfinally:\n    municipalities.close()\n    output.close()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "multiprocessing", "python-multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 3778, "user_id": 2642845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7c7939d1173cd6f455ce4313e831c5?s=128&d=identicon&r=PG", "display_name": "Thomas Moreau", "link": "https://stackoverflow.com/users/2642845/thomas-moreau"}, "is_accepted": false, "score": 1, "last_activity_date": 1487945160, "last_edit_date": 1487945160, "creation_date": 1487344536, "answer_id": 42301363, "question_id": 42261474, "link": "https://stackoverflow.com/questions/42261474/multiprocessing-not-working-for-a-function-calculating-cross-product-of-matrices/42301363#42301363", "title": "Multiprocessing not working for a function calculating cross-product of matrices", "body": "<p>When you are using threads, the result matrix <code>T</code> is shared in the threads (this means it is basically the same object, using the same memory slots). Thus modification of <code>T</code> in a child <code>Thread</code> will modify the local version of <code>T</code> and you get the correct result.</p>\n\n<p>For subprocesses, each child <code>Process</code> gets a new copy of <code>T</code>. Thus, the modification of <code>T</code> in a subprocess does not modify its local version. To get the correct result, you need to send back the result of your computation, using a <code>Queue</code> for instance. But you have to be careful as the order you get back the results is not deterministic.</p>\n\n<pre><code>import numpy as np\nfrom multiprocessing import Process, Queue\n\n\ndef single_row(a, b, idx, q):\n    N = len(b[0])\n    output = np.zeros(N)\n    for j in range(len(b[0])):\n        for k in range(len(a)):\n            output[j] = output[j]+a[k]*b[k][j]\n    q.put((idx, output))\n\n# Parallel Matrix Cross Multiplication\n\n\ndef cross_parallel(a, b):\n    M = len(a)\n    q = Queue()\n    if len(a[0]) == len(b):\n        tasks = [None]*M\n        T = np.array([[0]*len(b[0])]*len(a))\n        for i in range(M):\n            tasks[i] = Process(target=single_row, args=(a[i], b, i, q))\n        for task in tasks:\n            task.start()\n        T = []\n        for i in range(M):\n            T += [q.get()]\n        for task in tasks:\n            task.join()\n        T.sort()\n        T = np.array([v[1] for v in T])\n        return T\n    else:\n        print('Error: Invalid Matrices')\n\n# Non-parallel Matrix Cross Multiplication\n\n\ndef cross_basic(a, b):\n    if len(a[0]) == len(b):\n        T = np.array([[0]*len(b[0])]*len(a))\n        for i in range(len(a)):\n            for j in range(len(b[0])):\n                for k in range(len(a[0])):\n                    T[i][j] = T[i][j]+a[i][k]*b[k][j]\n        return T\n    else:\n        print('Error: Invalid Matrices')\n\nif __name__ == '__main__':\n    x = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]\n    y = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]\n    print(cross_basic(x, y))\n    print(cross_parallel(x, y))\n</code></pre>\n\n<p>This approach can be uneasy to use, for instance, if you do not empty the queue before joining the processes, you can cause deadlocks in your program. I recommend looking at <code>multiprocessing.Pool</code> or <code>concurrents.futures.ProcessPoolExecutor</code> to get high level protocol that manage the communication/number of process in a better way.</p>\n\n<pre><code>def single_row2(a, b):\n    N = len(b[0])\n    output = np.zeros(N)\n    for j in range(len(b[0])):\n        for k in range(len(a)):\n            output[j] = output[j]+a[k]*b[k][j]\n    return output\n\ndef cross_parallel2(a, b):\n    import itertools\n    from concurrent.futures import ProcessPoolExecutor\n    executor = ProcessPoolExecutor(max_workers=4)\n    M = len(a)\n    if len(a[0]) == len(b):\n        res = executor.map(single_row2, a, itertools.repeat(b))\n\n        return np.array([row for row in res])\n    else:\n        print('Error: Invalid Matrices')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7571676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wb7cOl28zTE/AAAAAAAAAAI/AAAAAAAAA5Y/WP1Mhjk5bzw/photo.jpg?sz=128", "display_name": "Constantine Ren", "link": "https://stackoverflow.com/users/7571676/constantine-ren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487945160, "creation_date": 1487198500, "last_edit_date": 1487198806, "question_id": 42261474, "link": "https://stackoverflow.com/questions/42261474/multiprocessing-not-working-for-a-function-calculating-cross-product-of-matrices", "title": "Multiprocessing not working for a function calculating cross-product of matrices", "body": "<p>I am trying to compare the running time of a non-parallel version and a parallel version of a function. The problem is that, while the parallel function works well with the threading package, the processes just never start after I switch to the multiprocessing package. I am wondering if this is caused by my compiler or anything else. Can anyone run my code to see if it works in other environment? And if it does not, what is the problem within my code?</p>\n\n<pre><code>import numpy as np\nfrom multiprocessing import Process\n\ndef single_row(a,b,output):\n    for j in range(len(b[0])):\n        for k in range(len(a)):\n            output[j]=output[j]+a[k]*b[k][j]\n\n#Parallel Matrix Cross Multiplication\ndef cross_parallel(a,b):\n    if len(a[0])==len(b):\n        tasks=[None]*len(a)\n        T=np.array([[0]*len(b[0])]*len(a))\n        for i in range(len(a)):\n            tasks[i]=Process(target=single_row,args=(a[i],b,T[i]))\n        for task in tasks:\n            task.start()\n        for task in tasks:\n            task.join()\n        return T\n    else:\n        print 'Error: Invalid Matrices'\n\n#Non-parallel Matrix Cross Multiplication\ndef cross_basic(a,b):\n    if len(a[0])==len(b):\n        T=np.array([[0]*len(b[0])]*len(a))\n        for i in range(len(a)):\n            for j in range(len(b[0])):\n                for k in range(len(a[0])):\n                    T[i][j]=T[i][j]+a[i][k]*b[k][j]\n        return T\n    else:\n        print 'Error: Invalid Matrices'\n\nif __name__ == '__main__':     \n    x=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]\n    y=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]\n    print cross_basic(x,y)\n    print cross_parallel(x,y)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[[ 90 100 110 120]\n [202 228 254 280]\n [314 356 398 440]\n [426 484 542 600]]\n[[0 0 0 0]\n [0 0 0 0]\n [0 0 0 0]\n [0 0 0 0]]\n</code></pre>\n\n<p>The version using threading package that works(only different at line 15):</p>\n\n<pre><code>import numpy as np\nfrom threading import Thread\n\ndef single_row(a,b,output):\n    for j in range(len(b[0])):\n        for k in range(len(a)):\n            output[j]=output[j]+a[k]*b[k][j]\n\n#Parallel Matrix Cross Multiplication\ndef cross_parallel(a,b):\n    if len(a[0])==len(b):\n        tasks=[None]*len(a)\n        T=np.array([[0]*len(b[0])]*len(a))\n        for i in range(len(a)):\n            tasks[i]=Thread(target=single_row,args=(a[i],b,T[i]))\n        for task in tasks:\n            task.start()\n        for task in tasks:\n            task.join()\n        return T\n    else:\n        print 'Error: Invalid Matrices'\n\n#Non-parallel Matrix Cross Multiplication\ndef cross_basic(a,b):\n    if len(a[0])==len(b):\n        T=np.array([[0]*len(b[0])]*len(a))\n        for i in range(len(a)):\n            for j in range(len(b[0])):\n                for k in range(len(a[0])):\n                    T[i][j]=T[i][j]+a[i][k]*b[k][j]\n        return T\n    else:\n        print 'Error: Invalid Matrices'\n\nif __name__ == '__main__':     \n    x=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]\n    y=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]\n    print cross_basic(x,y)\n    print cross_parallel(x,y)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[[ 90 100 110 120]\n [202 228 254 280]\n [314 356 398 440]\n [426 484 542 600]]\n[[ 90 100 110 120]\n [202 228 254 280]\n [314 356 398 440]\n [426 484 542 600]]\n</code></pre>\n"}, {"tags": ["python", "pycharm", "getpass"], "owner": {"reputation": 13, "user_id": 7568458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QYMKd.jpg?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/7568458/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487198695, "creation_date": 1487198485, "last_edit_date": 1487198695, "question_id": 42261470, "link": "https://stackoverflow.com/questions/42261470/python-getpass2-to-python3-configuration-problems", "title": "Python - getpass2 to python3 configuration problems", "body": "<p>So lately, i've been working on my osu! Map Downloader, which i've posted about today.. too. So, my second problem is that when i try to create a hidden password, i can't. Well, i'm sure you know the library getpass. If not this is it: <a href=\"https://github.com/guoruibiao/getpass2\" rel=\"nofollow noreferrer\">getpass2</a>\n. Well, it is very helfpul when you're trying to make a hidden password. And well, it's a bit old, and it is strictly based on python2. I've been trying for hours now to change a few keywords in the source files in order for them to work. So, here they are:</p>\n\n<pre><code>import sys\nimport importlib\nimportlib.reload(sys)\nsys.setdefaultencoding('utf8')\n</code></pre>\n\n<p>I've used the default importlib library for <code>reload</code>, which was helpful and worked. But then came <code>setdefaultencoding</code>. It is strictly a python2 keyword, and i've got no idea what to do next. I also tried using py2to3 which didn't work, because.. apparently it didn't detect anything wrong with the <strong>init</strong>.py file which is where this little script is in.\nAny ideas? </p>\n"}, {"tags": ["python", "django", "heroku", "django-staticfiles", "django-middleware"], "comments": [{"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487212492, "post_id": 42261467, "comment_id": 71684810, "body": "what the issues you are getting while add the django middileware"}, {"owner": {"reputation": 3933, "user_id": 6006474, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1060795623959059/picture?type=large", "display_name": "Manan Mehta", "link": "https://stackoverflow.com/users/6006474/manan-mehta"}, "reply_to_user": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487213229, "post_id": 42261467, "comment_id": 71685039, "body": "The whitenoise documentation <a href=\"http://whitenoise.evans.io/en/stable/django.html\" rel=\"nofollow noreferrer\">here</a> says that we should not use both the middlewares and I just wanted to know if there was a drawback of using whitenoise over django.security"}, {"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 1, "creation_date": 1487213668, "post_id": 42261467, "comment_id": 71685148, "body": "Django has some built-in security mechanism, whatever request is coming to our system it will test the intruder actions whether any malware action and etc, so my suggestion follow up with Django middleware bcoz we can trust. But whitenoise is third party package we can&#39;t trust them until without knowledge. if you facing any issue related static files we can rectify"}, {"owner": {"reputation": 3933, "user_id": 6006474, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1060795623959059/picture?type=large", "display_name": "Manan Mehta", "link": "https://stackoverflow.com/users/6006474/manan-mehta"}, "reply_to_user": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487214003, "post_id": 42261467, "comment_id": 71685210, "body": "I want to build the backend restful api and the client-side UI (using angularjs) onto one server itself but from what I understand, django doesn&#39;t serve static pages if I set debug=False in settings.py. I could be wrong though. Do you have any suggestions as to how I should go about doing this?"}, {"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 1, "creation_date": 1487214398, "post_id": 42261467, "comment_id": 71685318, "body": "Thats the problem... ok got it.  can i added the solution in answer section ?"}, {"owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "edited": false, "score": 2, "creation_date": 1487216391, "post_id": 42261467, "comment_id": 71685926, "body": "@MananMehta Could you take a look at my answer? I don&#39;t think SnakeFcz&#39;s suggestion is a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487215825, "post_id": 42264293, "comment_id": 71685737, "body": "coding we can do anyway right, I trying to use the Django built-in middleware, I think they may don&#39;t have the performance issues"}, {"owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "reply_to_user": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 3, "creation_date": 1487216315, "post_id": 42264293, "comment_id": 71685908, "body": "@SnakeFcz No, any way is not &quot;right&quot; - Django is not designed to serve static files in production and Whitenoise <i>is</i>. I don&#39;t think you should make recommendations to beginner users without understanding the packages they&#39;re trying to use."}, {"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487216401, "post_id": 42264293, "comment_id": 71685927, "body": "mostly I will not suggest third party packages"}, {"owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "reply_to_user": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 2, "creation_date": 1487216495, "post_id": 42264293, "comment_id": 71685966, "body": "@SnakeFcz The <a href=\"https://devcenter.heroku.com/articles/django-assets#whitenoise\" rel=\"nofollow noreferrer\">Heroku documentation</a> is pretty clear - &quot;Django does not support serving static files in production. However, the fantastic WhiteNoise project can integrate into your Django application, and was designed with exactly this purpose in mind.&quot;"}, {"owner": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 0, "creation_date": 1487216855, "post_id": 42264293, "comment_id": 71686059, "body": "thats only for heroku. tell me why we need to go with third party package for serving static files insted using  something our own"}, {"owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "reply_to_user": {"reputation": 610, "user_id": 7489139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zi9qWUGTAR0/AAAAAAAAAAI/AAAAAAAAAAs/xEl53udjrD0/photo.jpg?sz=128", "display_name": "Cadmus", "link": "https://stackoverflow.com/users/7489139/cadmus"}, "edited": false, "score": 4, "creation_date": 1487216886, "post_id": 42264293, "comment_id": 71686068, "body": "@SnakeFcz The op is using Heroku! From the Q: &quot;I want to respond with static images and I&#39;m deploying my django app to Heroku.&quot;"}, {"owner": {"reputation": 3933, "user_id": 6006474, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1060795623959059/picture?type=large", "display_name": "Manan Mehta", "link": "https://stackoverflow.com/users/6006474/manan-mehta"}, "edited": false, "score": 0, "creation_date": 1487238954, "post_id": 42264293, "comment_id": 71697098, "body": "@AlexL I have edited the question for it to be more useful for others looking for answers. Also, can you please suggest something about the code I have added to my question?"}, {"owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "reply_to_user": {"reputation": 3933, "user_id": 6006474, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1060795623959059/picture?type=large", "display_name": "Manan Mehta", "link": "https://stackoverflow.com/users/6006474/manan-mehta"}, "edited": false, "score": 1, "creation_date": 1487254217, "post_id": 42264293, "comment_id": 71708696, "body": "@MananMehta I&#39;ve expanded my answer a little, hope it helps!"}], "tags": [], "owner": {"reputation": 7752, "user_id": 1129194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bdb7d5f257f8f63f6e03598be92a766f?s=128&d=identicon&r=PG", "display_name": "Alex L", "link": "https://stackoverflow.com/users/1129194/alex-l"}, "is_accepted": true, "score": 10, "last_activity_date": 1487254200, "last_edit_date": 1487254200, "creation_date": 1487215621, "answer_id": 42264293, "question_id": 42261467, "link": "https://stackoverflow.com/questions/42261467/best-practice-to-serve-static-files-in-django/42264293#42264293", "title": "Best practice to serve static files in Django", "body": "<p>Your comment:</p>\n\n<blockquote>\n  <p>The whitenoise documentation here says that we should not use both the middlewares and I just wanted to know if there was a drawback of using whitenoise over django.security \u2013 Manan Mehta 30 mins ago</p>\n</blockquote>\n\n<p>No, it doesn't say that - that section of the documentation refers to the order of MIDDLEWARE_CLASSES. You can happily use Whitenoise with Django's security middleware. </p>\n\n<p>Excerpt from the docs below:</p>\n\n<blockquote>\n  <p>Edit your settings.py file and add WhiteNoise to the MIDDLEWARE_CLASSES list, above all other middleware apart from Django\u2019s SecurityMiddleware:</p>\n</blockquote>\n\n<pre><code>MIDDLEWARE_CLASSES = [  \n    # 'django.middleware.security.SecurityMiddleware',\n    'whitenoise.middleware.WhiteNoiseMiddleware',  \n    # ...\n]\n</code></pre>\n\n<p>SnakeFcz's recommendation to force Django to serve static is not a good idea - the Whitenoise package is designed as a high performance method to serve static through Django. See the <a href=\"https://devcenter.heroku.com/articles/django-assets\" rel=\"noreferrer\">heroku docs</a> and the <a href=\"http://whitenoise.evans.io/en/stable/index.html\" rel=\"noreferrer\">Whitenoise docs</a>. </p>\n\n<hr>\n\n<p>Reply to your edit:</p>\n\n<p>In Django, static refers to things like JS/CSS/images that you create during development that don't change (remains <em>static</em>) when your app is deployed. Media are things like user uploaded images and video, or generated images (e.g. thumbnails).</p>\n\n<p>Django recommends storing static and media separately, in STATIC_ROOT and MEDIA_ROOT directories. Then in production you typically configure a web server at these directories for the URLs STATIC_URL and MEDIA_URL. Whitenoise simplifies things a bit by serving files from these folders correctly, without having to configure a web server.</p>\n\n<p>The main concerns for getting Django to serve images correctly (static or media) are as follows:</p>\n\n<ul>\n<li><p>Performance - Django is not optimised for serving assets, so it'll be slower than serving through a web server such as Nginx/Apache. Lots of image requests will also slow down standard page requests, because they'll queue up and cause a longer response time. This might not matter when your website is small, but changing the way your website works when you have traffic is tricky!</p></li>\n<li><p>Caching headers - Django doesn't know to add cache-control headers to images when they're returned, whereas packages like Whitenoise add sensible caching headers (the most important being the cache expiry, e.g. how long for user's browsers to hang onto your images).</p></li>\n</ul>\n\n<p>There are some other headers that Whitenoise handles that Django might not, depending on the way you return an image:</p>\n\n<ul>\n<li><p>Media types - browsers need to know how to deal with the response they're getting, so there's a header called <code>Content-Type</code>. With your code above, you're returning every file as an image - what if the user asks for a PNG?</p></li>\n<li><p>Content length - browsers use the content length (size of the response) to show progress bars, and other optimisation (such as reading the response in chunks).</p></li>\n<li><p>Compression - most browsers and web servers (and Whitenoise) support compression methods such as gzip or more recently brotli (built by google). The web server compresses the file (usually once, and then the compressed file is cached) to minimise bandwidth during transfer. Depending on the image and format, you can often compress images down to around 60-70% of their size.</p>\n\n<p>Demo on <a href=\"https://en.wikipedia.org/wiki/Lenna\" rel=\"noreferrer\">lena</a> bitmap:</p>\n\n<pre><code>\u276f brew install gzip brotli\n\n\u276f gzip -k -v lena.bmp\nlena.bmp:      18.3% -- replaced with lena.bmp.gz\n\n\u276f bro --input lena.bmp --output lena.bmp.bro\n\n\u276f ls -lh lena*\n-rw-r--r--@ 1 alex  staff   768K Feb 16 21:41 lena.bmp\n-rw-------  1 alex  staff   527K Feb 16 21:45 lena.bmp.bro\n-rw-r--r--@ 1 alex  staff   627K Feb 16 21:41 lena.bmp.gz\n</code></pre></li>\n<li><p>Security - another reason to leave serving static assets to the web server is the potential for security exploits!</p>\n\n<p>Let's assume the code in your view to serve images is as follows, and the url is set up at <code>static/&lt;filename&gt;</code>.</p>\n\n<pre><code>img = os.path.join(settings.MEDIA_ROOT, filename)\nwith open(img, \"rb\") as f:\n    return HttpResponse(f.read(), content_type=\"image/jpeg\")\n</code></pre>\n\n<p>Imagine if a malicious user navigated to <code>yoursite.com/static//Users/alex/.ssh/id_rsa</code>. Then filename becomes <code>/Users/alex/.ssh/id_rsa</code>:</p>\n\n<pre><code>filename = '/Users/alex/.ssh/id_rsa'\nos.path.join(settings.MEDIA_ROOT, filename)\n# '/Users/alex/.ssh/id_rsa'\n</code></pre>\n\n<p>Then the view reads in your web server's private key, and return it to the malicious user. Whoops! Now they can ssh into your server. </p></li>\n</ul>\n\n<hr>\n\n<p>Media on Heroku:</p>\n\n<p>One thing to bear in mind if you're deploying to Heroku is the way their dynos work. Heroku dynos are created and destroyed quite often (every time you deploy, and at least every day) so you can't rely on the file system to stay around. You can also run two or more dynos at once - these are completely separate containers run on different hosts in a data centre, they don't share a filesystem. Usually if you want to handle user uploaded media, you'll use <a href=\"https://django-storages.readthedocs.io/en/latest/\" rel=\"noreferrer\">Django-storages</a> to store images on S3 (AWS's storage service) instead of the filesystem. You could also store images in your database, but that doesn't scale as nicely. See <a href=\"https://github.com/eknuth/django-heroku-s3-bootstrap-demo\" rel=\"noreferrer\">https://github.com/eknuth/django-heroku-s3-bootstrap-demo</a> for an example Django app set up to store media on S3.</p>\n"}], "owner": {"reputation": 3933, "user_id": 6006474, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1060795623959059/picture?type=large", "display_name": "Manan Mehta", "link": "https://stackoverflow.com/users/6006474/manan-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2598, "favorite_count": 4, "accepted_answer_id": 42264293, "answer_count": 1, "score": 3, "last_activity_date": 1487261719, "creation_date": 1487198459, "last_edit_date": 1487261719, "question_id": 42261467, "link": "https://stackoverflow.com/questions/42261467/best-practice-to-serve-static-files-in-django", "title": "Best practice to serve static files in Django", "body": "<p>What is the best practice to serve image files in Django for production?  I want to respond with static images and I'm deploying my Django app to Heroku.</p>\n\n<p>Are there any significant drawbacks of using <code>django.middleware.security.SecurityMiddleware</code> instead of <code>whitenoise.middleware.WhiteNoiseMiddleware</code> in terms of efficiency or security?  </p>\n\n<p>Is the code below inefficient compared to using whitenoise? Is serving an image from <code>settings.MEDIA_ROOT</code> the same as serving a static file?</p>\n\n<pre><code>img =  os.path.join(settings.MEDIA_ROOT, filename)\ntry:\n    with open(img, \"rb\") as f:\n        return HttpResponse(f.read(), content_type=\"image/jpeg\")\nexcept IOError:\n    failedResponse = '{\"detail\": \"No image found\"}'\n    return HttpResponse(failedResponse)\n</code></pre>\n"}, {"tags": ["python", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 7563087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94559716c309dc5d97950a6a3d3af878?s=128&d=identicon&r=PG&f=1", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/7563087/mehdi"}, "is_accepted": false, "score": 1, "last_activity_date": 1487205097, "creation_date": 1487205097, "answer_id": 42262690, "question_id": 42261464, "link": "https://stackoverflow.com/questions/42261464/inserting-to-mongodb-using-pymongo-can-not-be-committed/42262690#42262690", "title": "Inserting to MongoDB using pymongo can not be committed", "body": "<p>Used this line instead</p>\n\n<pre><code>client = pymongo.MongoClient(\"mongodb://****:****@aws-ap-southeast-1-portal.2.dblayer.com:15312,aws-ap-southeast-1-portal.0.dblayer.com:15312/BBCArticles?ssl=true\",\n                                   ssl_cert_reqs=ssl.CERT_NONE)\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7563087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94559716c309dc5d97950a6a3d3af878?s=128&d=identicon&r=PG&f=1", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/7563087/mehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487205097, "creation_date": 1487198440, "last_edit_date": 1487201607, "question_id": 42261464, "link": "https://stackoverflow.com/questions/42261464/inserting-to-mongodb-using-pymongo-can-not-be-committed", "title": "Inserting to MongoDB using pymongo can not be committed", "body": "<p>I am using MongoDB using pymongo and below codes to insert some fields to my document</p>\n\n<pre><code>client = pymongo.MongoClient(\"mongodb://Mahdi-Bazargan-121:P_A_S_S_W_O_D@aws-ap-southeast-1-portal.2.dblayer.com:15312,aws-ap-southeast-1-portal.0.dblayer.com:15312/admin?ssl=true\")\n      print(\"client is %s\" %client)\n      mydb = client['BBCArticles']\n      print(\"db %s\" % mydb)\n      my_collection = mydb['Articles']\n      print(\"my_collection %s\" % my_collection)\n      myrecord = {\"author\": \"Duke\",\n                  \"title\": \"PyMongo 101\",\n                  \"tags\": [\"MongoDB\", \"PyMongo\", \"Tutorial\"],\n                  \"date\": datetime.datetime.utcnow()\n                  }\n      record_id = mydb.mytable.insert(myrecord)\n      print(\"record id %s\" %record_id)\n</code></pre>\n\n<p>however, i get flowing error</p>\n\n<pre><code>client is MongoClient(host=['aws-ap-southeast-1-portal.0.dblayer.com:15312', 'aws-ap-southeast-1-portal.2.dblayer.com:15312'], document_class=dict, tz_aware=False, connect=True, ssl=\nTrue)\ndb Database(MongoClient(host=['aws-ap-southeast-1-portal.0.dblayer.com:15312', 'aws-ap-southeast-1-portal.2.dblayer.com:15312'], document_class=dict, tz_aware=False, connect=True, ss\nl=True), u'BBCArticles')\nmy_collection Collection(Database(MongoClient(host=['aws-ap-southeast-1-portal.0.dblayer.com:15312', 'aws-ap-southeast-1-portal.2.dblayer.com:15312'], document_class=dict, tz_aware=F\nalse, connect=True, ssl=True), u'BBCArticles'), u'Articles')\n2017-02-16 01:40:05 [scrapy.core.scraper] ERROR: Spider error processing &lt;GET http://www.bbc.com/&gt; (referer: http://www.bbc.com/)\nTraceback (most recent call last):\n  File \"c:\\python27\\lib\\site-packages\\scrapy-1.3.1-py2.7.egg\\scrapy\\utils\\defer.py\", line 102, in iter_errback\n    yield next(it)\n  File \"c:\\python27\\lib\\site-packages\\scrapy-1.3.1-py2.7.egg\\scrapy\\spidermiddlewares\\offsite.py\", line 29, in process_spider_output\n    for x in result:\n  File \"c:\\python27\\lib\\site-packages\\scrapy-1.3.1-py2.7.egg\\scrapy\\spidermiddlewares\\referer.py\", line 22, in &lt;genexpr&gt;\n    return (_set_referer(r) for r in result or ())\n  File \"c:\\python27\\lib\\site-packages\\scrapy-1.3.1-py2.7.egg\\scrapy\\spidermiddlewares\\urllength.py\", line 37, in &lt;genexpr&gt;\n    return (r for r in result or () if _filter(r))\n  File \"c:\\python27\\lib\\site-packages\\scrapy-1.3.1-py2.7.egg\\scrapy\\spidermiddlewares\\depth.py\", line 58, in &lt;genexpr&gt;\n    return (r for r in result or () if _filter(r))\n  File \"C:\\Users\\Mehdi\\PycharmProjects\\WebCrawler\\src\\Crawler.py\", line 97, in parse\n    record_id = mydb.mytable.insert(myrecord)\n  File \"c:\\python27\\lib\\site-packages\\pymongo\\collection.py\", line 2467, in insert\n    with self._socket_for_writes() as sock_info:\n  File \"c:\\python27\\lib\\contextlib.py\", line 17, in __enter__\n    return self.gen.next()\n  File \"c:\\python27\\lib\\site-packages\\pymongo\\mongo_client.py\", line 823, in _get_socket\n    server = self._get_topology().select_server(selector)\n  File \"c:\\python27\\lib\\site-packages\\pymongo\\topology.py\", line 214, in select_server\n    address))\n  File \"c:\\python27\\lib\\site-packages\\pymongo\\topology.py\", line 189, in select_servers\n    self._error_message(selector))\nServerSelectionTimeoutError: SSL handshake failed: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:661),SSL handshake failed: [SSL: CERTIFICATE_VERIFY_FAILED] cert\nificate verify failed (_ssl.c:661)\n</code></pre>\n\n<p>I am wrting the right connection string, I am using Python 2.7 as well</p>\n"}, {"tags": ["android", "python", "shell"], "comments": [{"owner": {"reputation": 651, "user_id": 3457926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c20fffb472807235cde8427419119d?s=128&d=identicon&r=PG&f=1", "display_name": "the_constant", "link": "https://stackoverflow.com/users/3457926/the-constant"}, "edited": false, "score": 0, "creation_date": 1487204654, "post_id": 42261442, "comment_id": 71682689, "body": "Why is <code>install</code> not callable? It&#39;s a function.."}, {"owner": {"reputation": 651, "user_id": 3457926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c20fffb472807235cde8427419119d?s=128&d=identicon&r=PG&f=1", "display_name": "the_constant", "link": "https://stackoverflow.com/users/3457926/the-constant"}, "edited": false, "score": 0, "creation_date": 1487204712, "post_id": 42261442, "comment_id": 71682708, "body": "You needed to pass in the object, not the call. You specify the arguments to the function with <code>args</code> constructor attribute with the thread. A partial is not required"}, {"owner": {"reputation": 6246, "user_id": 2375474, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fe2b848606ff248cb3ab487ef426b3db?s=128&d=identicon&r=PG", "display_name": "F1sher", "link": "https://stackoverflow.com/users/2375474/f1sher"}, "reply_to_user": {"reputation": 651, "user_id": 3457926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c20fffb472807235cde8427419119d?s=128&d=identicon&r=PG&f=1", "display_name": "the_constant", "link": "https://stackoverflow.com/users/3457926/the-constant"}, "edited": false, "score": 0, "creation_date": 1487229593, "post_id": 42261442, "comment_id": 71691110, "body": "Thank you for explaining. How could I run it without using partial? Could you give me an example please? :)"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 4849245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5250903fb7bf0eb23eb0a66a29818fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Modrzy\u0144ski", "link": "https://stackoverflow.com/users/4849245/tomasz-modrzy%c5%84ski"}, "is_accepted": true, "score": 0, "last_activity_date": 1487235508, "creation_date": 1487235508, "answer_id": 42269147, "question_id": 42261442, "link": "https://stackoverflow.com/questions/42261442/running-three-functions-at-the-same-time-in-python-doesnt-work/42269147#42269147", "title": "Running three functions at the same time in Python doesn&#39;t work", "body": "<p>You can run it without partial by using <code>args</code> param in Thread constructor:</p>\n\n<pre><code>Thread(target=install, args=('emulator-5558',)).start()\n</code></pre>\n"}], "owner": {"reputation": 6246, "user_id": 2375474, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fe2b848606ff248cb3ab487ef426b3db?s=128&d=identicon&r=PG", "display_name": "F1sher", "link": "https://stackoverflow.com/users/2375474/f1sher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42269147, "answer_count": 1, "score": 0, "last_activity_date": 1487236782, "creation_date": 1487198353, "last_edit_date": 1487236782, "question_id": 42261442, "link": "https://stackoverflow.com/questions/42261442/running-three-functions-at-the-same-time-in-python-doesnt-work", "title": "Running three functions at the same time in Python doesn&#39;t work", "body": "<p>I am trying to simultaneously install Android APK on few Android Devices at the same time.</p>\n\n<p>My idea is to invoke shell command that installs apk like:</p>\n\n<pre><code>adb -s DEVICE_NAME install APK &amp;\n</code></pre>\n\n<p>Followed with <code>&amp;</code> as it starts new terminal process.</p>\n\n<p>My Python script should execute <code>install(device_name)</code> function at the same time. But it doesn't happen. There is a code:</p>\n\n<pre><code>from ShellHelper import *\nfrom threading import Thread\nimport time\nimport datetime\n\n\nshellHelper = ShellHelper()\n\napk_dir = \"app-automation-integrationTest.apk\"\n\ndef install(device_name):\n    start_time = int(round(time.time() * 1000))\n    print('[{:%H:%M:%S}]: '.format(datetime.datetime.now())\n          + \"Installation started on device '\" + device_name + \"'.\")\n\n    install_cmd = \"adb -s \" + device_name + \" install \" + apk_dir + \" &amp;\"\n    shellHelper.execute_shell(install_cmd)\n\n    end_time = int(round(time.time() * 1000))\n    print('[{:%H:%M:%S}]: '.format(datetime.datetime.now())\n          + \"Installation ended on device '\" + device_name + \"'. It took: \" + str(\n        (end_time - start_time) / 1000) + \" seconds.\")\n\n\nif __name__ == '__main__':\n    Thread(target=install(\"emulator-5554\")).start()\n    Thread(target=install(\"emulator-5556\")).start()\n    Thread(target=install(\"emulator-5558\")).start()\n</code></pre>\n\n<p>And log: </p>\n\n<pre><code>[23:31:50]: Installation started on device 'emulator-5554'.\n[23:32:33]: Installation ended on device 'emulator-5554'. It took: 42.671 seconds.\n[23:32:33]: Installation started on device 'emulator-5556'.\n[23:32:37]: Installation ended on device 'emulator-5556'. It took: 4.451 seconds.\n[23:32:37]: Installation started on device 'emulator-5558'.\n[23:32:46]: Installation ended on device 'emulator-5558'. It took: 8.98 seconds.\n</code></pre>\n\n<p>Throwing aside fact if ADB is capable of installing apks at the same time... what I would expect to happen is something similar to this:</p>\n\n<pre><code>[23:31:50]: Installation started on device 'emulator-5554'.\n[23:31:50]: Installation started on device 'emulator-5556'.\n[23:31:50]: Installation started on device 'emulator-5558'.\n[23:32:10]: Installation ended on device 'emulator-5554'. It took: 20.00 seconds.\n[23:32:30]: Installation ended on device 'emulator-5558'. It took: 40.00 seconds.\n[23:32:33]: Installation ended on device 'emulator-5556'. It took: 43.00 seconds.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>// this worked</p>\n\n<pre><code>Thread(target=partial(install, \"emulator-5554\")).start()\nThread(target=partial(install, \"emulator-5556\")).start()\nThread(target=partial(install, \"emulator-5558\")).start()\n</code></pre>\n\n<p>And expected result:</p>\n\n<pre><code>[01:07:44]: Installation started on device 'emulator-5554'.\n[01:07:44]: Installation started on device 'emulator-5556'.\n[01:07:44]: Installation started on device 'emulator-5558'.\n[01:08:00]: Installation ended on device 'emulator-5558'. It took: 15.303 seconds.\n[01:08:00]: Installation ended on device 'emulator-5556'. It took: 15.571 seconds.\n[01:08:01]: Installation ended on device 'emulator-5554'. It took: 16.748 seconds.\n</code></pre>\n"}, {"tags": ["python", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 2181862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece259c2e1e6d7b23e23c0b8f811c667?s=128&d=identicon&r=PG", "display_name": "Jakub G&#243;rzy\u0144ski", "link": "https://stackoverflow.com/users/2181862/jakub-g%c3%b3rzy%c5%84ski"}, "is_accepted": false, "score": 2, "last_activity_date": 1489997165, "creation_date": 1489997165, "answer_id": 42898525, "question_id": 42261379, "link": "https://stackoverflow.com/questions/42261379/pytest-with-multiple-command-line-options/42898525#42898525", "title": "pytest with multiple command line options", "body": "<p>The problem, I think, is simple. Just add <strong>@pytest.fixture</strong> decorator before <code>cmdopt2</code> function</p>\n\n<pre><code>@pytest.fixture\ndef cmdopt(request):\nreturn request.config.getoption(\"--cmdopt\")\n\n@pytest.fixture\ndef cmdopt2(request):\n    return request.config.getoption(\"--cmdopt2\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7571595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3808c8a7ee084d984ce5b40c9a9ca75?s=128&d=identicon&r=PG&f=1", "display_name": "Pacman", "link": "https://stackoverflow.com/users/7571595/pacman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1752, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1542780285, "creation_date": 1487198079, "last_edit_date": 1532688516, "question_id": 42261379, "link": "https://stackoverflow.com/questions/42261379/pytest-with-multiple-command-line-options", "title": "pytest with multiple command line options", "body": "<p>I have no problems with one command line argument to pytest.</p>\n\n<p>When I run the program:<br>\n<code>python -m pytest -q -v --confcutdir=/usr/local/penguin/home/px09/p001 --cmdopt=type1 test-suite.py</code></p>\n\n<p>I get the expected response:</p>\n\n<pre><code>================================================ FAILURES ================================================\n______________________________________________ test_answer _______________________________________________\n\ncmdopt = 'type1'\n\n    def test_answer(cmdopt):\n        if cmdopt == \"type1\":\n            print (\"first\")\n        elif cmdopt == \"type2\":\n            print (\"second\")\n&gt;       assert 0 # to see what was printed\nE       assert 0\n\ntest-suite.py:7: AssertionError\n------------------------------------------ Captured stdout call ------------------------------------------\nfirst\n======================================== 1 failed in 0.01 seconds ==============\n</code></pre>\n\n<p>When I try multiple arguments I run into issues</p>\n\n<h1>content of test_sample.py</h1>\n\n<pre><code>def test_answer(cmdopt):\n    if cmdopt == \"type1\":\n        print (\"first\")\n    elif cmdopt == \"type2\":\n        print (\"second\")\n    assert 0 # to see what was printed\n\ndef test_answer2(cmdopt2):\n    if cmdopt2 == \"type1\":\n        print (\"first\")\n    elif cmdopt2 == \"type2\":\n        print (\"second\")\n    assert 0 # to see what was printed\n</code></pre>\n\n<h1>content of conftest.py</h1>\n\n<pre><code>import pytest\n\ndef pytest_addoption(parser):\n    parser.addoption(\"--cmdopt\", action=\"store\", default=\"type1\",\n        help=\"my option: type1 or type2\")\n    parser.addoption(\"--cmdopt2\", action=\"store\", default=\"type3\",\n                     help=\"my option: type3 or type4\")\n\n@pytest.fixture\ndef cmdopt(request):\n    return request.config.getoption(\"--cmdopt\")\n\ndef cmdopt2(request):\n    return request.config.getoption(\"--cmdopt2\")\n</code></pre>\n\n<blockquote>\n  <p>_____________________________________ ERROR at setup of test_answer2 _____________________________________ file /usr/local/penguin/home/px09/p001/test-suite.py, line 9   def\n  test_answer2(cmdopt2): E       fixture 'cmdopt2' not found<br>\n  >   available fixtures: cache, capfd, capsys, cmdopt, doctest_namespace, monkeypatch, pytestconfig, record_xml_property,\n  recwarn, tmpdir, tmpdir_factory<br>\n  >       use 'pytest --fixtures [testpath]' for help on them.</p>\n  \n  <p>/usr/local/penguin/home/px09/p001/test-suite.py:9</p>\n</blockquote>\n\n<pre><code>================================================ FAILURES ================================================\n______________________________________________ test_answer _______________________________________________\n\ncmdopt = 'type1'\n\n    def test_answer(cmdopt):\n        if cmdopt == \"type1\":\n            print (\"first\")\n        elif cmdopt == \"type2\":\n            print (\"second\")\n&gt;       assert 0 # to see what was printed\nE       assert 0\n\ntest-suite.py:7: AssertionError\n-\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1487198128, "post_id": 42261307, "comment_id": 71680452, "body": "Everything you do to read the file is to <code>readline()</code> i.e. one line at a time, but you don&#39;t iterate through the file."}], "answers": [{"tags": [], "owner": {"reputation": 3889, "user_id": 175320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e42a3912a2296d240a18b5c1ffa4f9?s=128&d=identicon&r=PG", "display_name": "TkTech", "link": "https://stackoverflow.com/users/175320/tktech"}, "is_accepted": false, "score": 0, "last_activity_date": 1487198332, "last_edit_date": 1487198332, "creation_date": 1487198029, "answer_id": 42261370, "question_id": 42261307, "link": "https://stackoverflow.com/questions/42261307/filter-values-by-row-and-if-above-threshold-return-column-title/42261370#42261370", "title": "Filter values by row and if above threshold return column title", "body": "<p>Why are you trying to parse CSV files yourself? Please see the standard <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">CSV</a> module. In particular what you want is the <a href=\"https://docs.python.org/2/library/csv.html#csv.DictReader\" rel=\"nofollow noreferrer\"><code>csv.DictReader()</code></a> class.</p>\n\n<p>Ex:</p>\n\n<pre><code>with open('kodo_mod_7.meanQ', 'rb') as fin:\n    reader = csv.DictReader(fin)\n\n    for row in reader:\n        for column_label, column_value in row.iteritems():\n            if not column_label.startswith('Pop_'):\n                continue\n\n            if float(column_value) &gt; 0.5:\n                yield row\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2094, "user_id": 5508728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P3gtR.jpg?s=128&g=1", "display_name": "jeff carey", "link": "https://stackoverflow.com/users/5508728/jeff-carey"}, "is_accepted": false, "score": 0, "last_activity_date": 1487198196, "creation_date": 1487198196, "answer_id": 42261406, "question_id": 42261307, "link": "https://stackoverflow.com/questions/42261307/filter-values-by-row-and-if-above-threshold-return-column-title/42261406#42261406", "title": "Filter values by row and if above threshold return column title", "body": "<p>2 things:</p>\n\n<p>1) You don't have to throw away the first column, you can just skip over it by adjusting the loop</p>\n\n<p>2) Use enumerate to number the things you are looping through when that isn't already there for you.</p>\n\n<pre><code>for i, score in enumerate(x[1:]):\n    if float(score) &gt; 0.5:\n        filtered.append(col_names[i]+'\\n')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7571637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e48806c5c02ea9a5632b7de53143f3?s=128&d=identicon&r=PG&f=1", "display_name": "m.jon", "link": "https://stackoverflow.com/users/7571637/m-jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487228786, "creation_date": 1487197712, "last_edit_date": 1487228786, "question_id": 42261307, "link": "https://stackoverflow.com/questions/42261307/filter-values-by-row-and-if-above-threshold-return-column-title", "title": "Filter values by row and if above threshold return column title", "body": "<p>This is what I have so far, but I'm stuck. I was able to filter the values that I wanted, but I can't figure out how to take those filtered values and instead of getting them in a list return column titles. </p>\n\n<p>This is what my data looks like: </p>\n\n<pre><code>Taxa,Pop_1,Pop_2,Pop_3,Pop_4,Pop_5,Pop_6,Pop_7\nIPs216:C95NTANXX:1:250590968,0.000023,0.999865,0.000023,0.000023,0.000023,0.000023,0.000022\nIPs159:C95NTANXX:1:250591032,0.000023,0.000023,0.000023,0.000023,0.000023,0.999864,0.000023\nIPs286:C95NTANXX:1:250591013,0.000024,0.000024,0.000024,0.000024,0.000024,0.000024,0.999856\nIPs63:C95NTANXX:1:250591090,0.000024,0.000024,0.409426,0.352769,0.000024,0.237707,0.000024\nIPs892:C95NTANXX:1:250591054,0.000024,0.000024,0.999853,0.000024,0.000024,0.000024,0.000024\nIPs264:C95NTANXX:1:250590956,0.000023,0.000023,0.000023,0.999864,0.000023,0.000023,0.000023\nIPs716:C95NTANXX:1:250590960,0.000023,0.000023,0.999864,0.000023,0.000023,0.000023,0.000023\nIPs854:C95NTANXX:1:250590951,0.000022,0.080564,0.919325,0.000022,0.000022,0.000022,0.000022\nIPs914:C95NTANXX:1:250591052,0.238472,0.000023,0.000023,0.686966,0.000023,0.074471,0.000023\nIPs729:C95NTANXX:1:250591019,0.000022,0.000022,0.000022,0.999869,0.000022,0.000022,0.000022        \n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>f=open(\"/home/mjohnson/Desktop/Millet_Files/final_analysis/trees/pop_info/kodo_mod_7.meanQ\" , \"r\")\ncol_titles=list()\npop_values=list()\nf.readline()\nfiltered=list()\n#gives a list with column names, i need to index this to pair values with them\na=open(\"/home/mjohnson/Desktop/Millet_Files/final_analysis/trees/pop_info/kodo_mod_7.meanQ\" , \"r\")\ncol_titles.append(a.readline())\ncol_names=list()\nfor names in col_titles:\n    q=names.strip('\\n').split(',')\n    col_names.append(q)\n#end of getting column names\n\nfor line in f:\n    x=line.strip('\\n').split(',')\n    x=x[1:] #this has the list ignore the first values, so taxa names ignored \n    for score in x:\n        if float(score) &gt; 0.5:\n            filtered.append(score+'\\n')\n</code></pre>\n"}, {"tags": ["python", "html", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487200124, "post_id": 42261649, "comment_id": 71681239, "body": "Running your solution, I got out this error: InvalidSelectorException"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487200614, "post_id": 42261649, "comment_id": 71681401, "body": "Well, the find_elements is for sure correct because of this: <a href=\"http://selenium-python.readthedocs.io/locating-elements.html\" rel=\"nofollow noreferrer\">selenium-python.readthedocs.io/locating-elements.html</a> so something it does not like on the actual expression. I&#39; improved my answer and soon I&#39;ll come with a method for you - not just a solution, bear with me mate :)"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487200707, "post_id": 42261649, "comment_id": 71681435, "body": "I highly recommend to download Xpath helper add on for Chrome. This will make you life a hell of a lot easier and will help you to experiment and understand xPath more"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487200711, "post_id": 42261649, "comment_id": 71681437, "body": "<a href=\"https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl?hl=en\" rel=\"nofollow noreferrer\">chrome.google.com/webstore/detail/xpath-helper/&hellip;</a>"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487200941, "post_id": 42261649, "comment_id": 71681524, "body": "I uploaded an image with xPath helper. On the left you put your xpath and then it highlights the relevant and text and shows what values it has found on the right"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487201029, "post_id": 42261649, "comment_id": 71681555, "body": "Depending on what other elements you have you might need to start from //table/tbody//tr//td[@span] - good luck!"}, {"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487235342, "post_id": 42261649, "comment_id": 71694381, "body": "Ok. There are also some items in input tag, how go I go about them? Thanks for your time"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487251810, "post_id": 42261649, "comment_id": 71706683, "body": "Hi Umar, now worries it is a pleasure if I can be of some help. However, if I helped you solve it, I would appreciate an upvote (arrow up next to my answer). Think of your html tags as a tree. You start from the top and work your way down to the attribute that you want. So if your html tag is input (and the attribute you want to grab is type=&#39;submit&#39;) so this translates like following in xpath: <b>//htmlTag[@attribute=&#39;value&#39;]</b>  --&gt; so we will have --&gt; <b>//input[@type=&#39;submit&#39;]</b>"}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487251920, "post_id": 42261649, "comment_id": 71706774, "body": "You can focus on an element if you load you xPath helper for Chrome and right click on an element and select <i>Inspect</i>; then it focuses on what you need to select :)"}, {"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487325904, "post_id": 42261649, "comment_id": 71744994, "body": "You may add the above explanation in the comment to the answer for future search reference."}, {"owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1487327287, "post_id": 42261649, "comment_id": 71745955, "body": "Done! Thanks Umar!"}], "tags": [], "owner": {"reputation": 1723, "user_id": 1332498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/535833e7d9196d3424c306c83a67d467?s=128&d=identicon&r=PG", "display_name": "Xwris Stoixeia", "link": "https://stackoverflow.com/users/1332498/xwris-stoixeia"}, "is_accepted": true, "score": 1, "last_activity_date": 1487327312, "last_edit_date": 1487327312, "creation_date": 1487199266, "answer_id": 42261649, "question_id": 42261303, "link": "https://stackoverflow.com/questions/42261303/python-selenium-access-html-tags-with-a-table/42261649#42261649", "title": "Python selenium - Access html tags with a table", "body": "<p>First you want <strong>find_elementS</strong> not find_element. If I understood your goal well, you are aiming to get the text from the span id's; hence this is where I will focus my xPath expression. So with the below you should be able to find all elements which correspond to html span id in a clever way; meaning without specifying any particular value for the specific span id/html tag. Here is the xpath:</p>\n\n<pre><code>//tr[@span]\n</code></pre>\n\n<p>Now using find_elements you can return a list of elements matching the Xpath (so, all the span ids); then you extract the text from them.</p>\n\n<pre><code>for ele in driver.find_elements_by_xpath(\"//tr[@span]\"):\n    print ele.text\n</code></pre>\n\n<p>Best of luck!</p>\n\n<p><em>Update after OP's comment:</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/gaOQB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gaOQB.png\" alt=\"enter image description here\"></a></p>\n\n<p><em>Think of your html tags as a tree. You start from the top and work your way down to the attribute that you want. So if your html tag is input (and the attribute you want to grab is type='submit') this translates like following in xpath: //htmlTag[@attribute='value'] --> so we will have --> //input[@type='submit']\nYou can focus on an element if you load you xPath helper for Chrome and right click on an element and select Inspect; then it focuses on what you need to select :)</em></p>\n"}], "owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 42261649, "answer_count": 1, "score": 0, "last_activity_date": 1487327312, "creation_date": 1487197701, "question_id": 42261303, "link": "https://stackoverflow.com/questions/42261303/python-selenium-access-html-tags-with-a-table", "title": "Python selenium - Access html tags with a table", "body": "<p>I have this table:-</p>\n\n<pre><code>&lt;table&gt;\n&lt;tbody&gt;\n    &lt;tr class=\"stripe\"&gt;\n        &lt;td colspan=\"3\"/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td style=\"width: 160px;\"&gt;Field1:&lt;/td&gt;\n        &lt;td style=\"width: 250px;\"&gt;\n        &lt;strong&gt;\n        &lt;span id=\"lblSalesExec\"&gt;item1&lt;/span&gt;\n        &lt;/strong&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Field2:&lt;/td&gt;\n        &lt;td&gt;\n        &lt;strong&gt;\n        &lt;span id=\"lblLocation\"&gt;item2&lt;/span&gt;\n        &lt;/strong&gt;\n        &lt;/td&gt;\n        &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;th colspan=\"3\"&gt;\n    &lt;h3 style=\"color: rgb(255, 255, 255);\"&gt;Other Details&lt;/h3&gt;\n    &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;Field3:&lt;/td&gt;\n    &lt;td&gt;\n    &lt;span id=\"lblRef\"&gt;item3&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;Field4:&lt;/td&gt;\n    &lt;td&gt;\n    &lt;span id=\"lblCustomerName\"&gt;item4&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;Field5:&lt;/td&gt;\n    &lt;td&gt;\n    &lt;span id=\"lblCurrentAddress\"&gt;\n    item5-1\n    &lt;br/&gt;\n    item5-2\n    &lt;br/&gt;\n    item5-3\n    &lt;br/&gt;\n    item5-4\n    &lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;\n    &lt;i class=\"icon-envelope\"/&gt;\n    Field6:\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;input name=\"txtCustomerEmail\" type=\"text\" value=\"item6\" id=\"txtCustomerEmail\" style=\"width: 250px;\"/&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;\n    &lt;i class=\"icon-phone\"/&gt;\n    Field7:\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;input name=\"txtCustomerTelNo1\" type=\"text\" value=\"item7\" id=\"txtCustomerTelNo1\" style=\"width: 250px;\"/&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;\n    &lt;i class=\"icon-phone\"/&gt;\n    Field8:\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;input name=\"txtCustomerTelNo2\" type=\"text\" id=\"txtCustomerTelNo2\" style=\"width: 250px;\"/&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;\n    &lt;i class=\"icon-phone\"/&gt;\n    Field9:\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;input name=\"txtCustomerTelNo3\" type=\"text\" id=\"txtCustomerTelNo3\" style=\"width: 250px;\"/&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;Field10:&lt;/td&gt;\n    &lt;td&gt;\n    &lt;span id=\"lblCurrentVehicle\"&gt;\n    item10\n    &lt;br/&gt;\n    item10-1\n    &lt;br/&gt;\n    item10-2\n    &lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td/&gt;\n    &lt;/tr&gt;\n\n\n    &lt;tr&gt;\n    &lt;th colspan=\"3\"&gt;\n\n    &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n\n&lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>How to I use Python selenium to parse a table with lots of varying html tags in its rows? See the attached image below with the expected output table.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9Om4V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Om4V.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I have don so far...</p>\n\n<pre><code>ele = driver.find_element_by_class_name(\"list\")\nele_txt = ele.text\nspli = re.split('\\n', ele_txt)\n# spli1 = re.split(':', ele_txt)\n\nspli\n</code></pre>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1487197612, "post_id": 42261241, "comment_id": 71680216, "body": "So you want the value of <code>self.health</code> to automatically update when the value of <code>self.level</code> changes?"}, {"owner": {"reputation": 23, "user_id": 7077456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c63a43c14127c3078563ceeba90f1b40?s=128&d=identicon&r=PG&f=1", "display_name": "Shoes Be Codin", "link": "https://stackoverflow.com/users/7077456/shoes-be-codin"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1487198646, "post_id": 42261241, "comment_id": 71680669, "body": "That is exactly what I&#39;m looking for @leaf"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 7448, "user_id": 554903, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6fyv9.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/554903/jonathan"}, "edited": false, "score": 1, "creation_date": 1487197815, "post_id": 42261288, "comment_id": 71680319, "body": "@Jonathan Don&#39;t use edits to change the spirit of an answer. I was actually going to add another solution similar to this."}, {"owner": {"reputation": 23, "user_id": 7077456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c63a43c14127c3078563ceeba90f1b40?s=128&d=identicon&r=PG&f=1", "display_name": "Shoes Be Codin", "link": "https://stackoverflow.com/users/7077456/shoes-be-codin"}, "edited": false, "score": 0, "creation_date": 1487253121, "post_id": 42261288, "comment_id": 71707734, "body": "Thank you for this answer, I&#39;m using the first answer as a base but when I try to print the results I only get the location of the method. How can I print the value?"}, {"owner": {"reputation": 447, "user_id": 5556887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb86c8d689592c71cc88a42c7981c252?s=128&d=identicon&r=PG&f=1", "display_name": "bouletta", "link": "https://stackoverflow.com/users/5556887/bouletta"}, "reply_to_user": {"reputation": 23, "user_id": 7077456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c63a43c14127c3078563ceeba90f1b40?s=128&d=identicon&r=PG&f=1", "display_name": "Shoes Be Codin", "link": "https://stackoverflow.com/users/7077456/shoes-be-codin"}, "edited": false, "score": 0, "creation_date": 1487258017, "post_id": 42261288, "comment_id": 71711784, "body": "@ShoesBeCodin Are you sure you are printing <code>PlayerIG.health()</code> and not <code>PlayerIG.health</code>  ? Note the parenthesis as you actually want the method to be called."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1487197951, "last_edit_date": 1487197951, "creation_date": 1487197637, "answer_id": 42261288, "question_id": 42261241, "link": "https://stackoverflow.com/questions/42261241/how-would-i-be-able-to-modify-classes-inside-a-function/42261288#42261288", "title": "How would I be able to modify classes inside a function?", "body": "<p>Define <code>health</code> as a function, not a property</p>\n\n<pre><code>class Player:\n    def __init__(self):\n        self.level = 1\n        self.maxhealth = 90 + self.level * 10\n\n    def health(self):\n        return 90 + self.level * 10\nPlayerIG = Player()\nprint(PlayerIG.health())\n</code></pre>\n\n<p>or provide a function that updates <code>health</code>, and call it whenever you level up.</p>\n\n<pre><code>class Player:\n    def __init__(self):\n        self.level = 1\n        self.update_health()\n\n    def update_health(self):\n        self.health = 90 + self.level * 10\n\n    def level_up(self):\n        self.level += 1\n        self.update_health()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 447, "user_id": 5556887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb86c8d689592c71cc88a42c7981c252?s=128&d=identicon&r=PG&f=1", "display_name": "bouletta", "link": "https://stackoverflow.com/users/5556887/bouletta"}, "is_accepted": false, "score": 0, "last_activity_date": 1487198289, "last_edit_date": 1487198289, "creation_date": 1487197944, "answer_id": 42261358, "question_id": 42261241, "link": "https://stackoverflow.com/questions/42261241/how-would-i-be-able-to-modify-classes-inside-a-function/42261358#42261358", "title": "How would I be able to modify classes inside a function?", "body": "<p><code>__init__</code> is only run when you instantiate your class. I'm guessing you are currently updating a player's level doing <code>PlayerIG.level +=1</code>. If you do that <code>__init__</code> is not ran again and therefore the maxhealth is not updated so you are going to want a level up method.</p>\n\n<pre><code>class Player:\n    def __init__(self, level): # allows you to create a player of level != 1\n        self.level = level\n        self.maxhealth = 90 + self.level * 10\n        self.health = self.maxhealth\n\n    def level_up(self):\n        self.level += 1\n        self.maxhealth += 10\n\nPlayerIG = Player(1) # creates a player of level 1 and maxhealth 100\nPlayerIG.level_up() # PlayerIG is now level 2 with a maxhealth of 110\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7077456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c63a43c14127c3078563ceeba90f1b40?s=128&d=identicon&r=PG&f=1", "display_name": "Shoes Be Codin", "link": "https://stackoverflow.com/users/7077456/shoes-be-codin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487256078, "creation_date": 1487197430, "last_edit_date": 1487256078, "question_id": 42261241, "link": "https://stackoverflow.com/questions/42261241/how-would-i-be-able-to-modify-classes-inside-a-function", "title": "How would I be able to modify classes inside a function?", "body": "<p>I'm really new to the concept of classes in Python so please excuse my lack of understanding... I'm trying to make a basic and simple fighting RPG based off a YouTube tutorial I saw a while back. I had the idea that your character's health would be based on \"90 + level * 10\". And this worked great up until I tried to level my character, to find that the level increased but the health stayed the same as when I first loaded the program. I understand why it's doing this but is there a way to almost bypass and get it to update based on the level?</p>\n\n<p>Here's a bit of the code</p>\n\n<pre><code>class Player:\n    def __init__(self):\n        self.level = 1\n        self.maxhealth = 90 + self.level * 10\n        self.health = self.maxhealth\nPlayerIG = Player()\n</code></pre>\n"}, {"tags": ["python", "web-services", "wsdl", "zeep"], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 3978009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f385c6f442524d0d44c38efd64768c54?s=128&d=identicon&r=PG&f=1", "display_name": "Ronildo Braga Junior", "link": "https://stackoverflow.com/users/3978009/ronildo-braga-junior"}, "is_accepted": true, "score": 1, "last_activity_date": 1487309870, "creation_date": 1487309870, "answer_id": 42290202, "question_id": 42261164, "link": "https://stackoverflow.com/questions/42261164/python-zeep-overview-of-the-services-available/42290202#42290202", "title": "Python zeep overview of the services available", "body": "<p>Just in case if you are facing the same problem, please see below how you was supposed to craft this call</p>\n\n<pre><code>    enquiry_header = {\n        'client-reference': 'my-ref-101',\n        'operator-id': 101,\n        'operator-name': 'Adam Hills',\n        'permission-type-code': 'XY',\n        'product-data-level-code': 'N',\n        'requested-scores': {'scorecard-id': ['VSA_2.0_XY_NR']}\n    }\n\n    enquiry_data = {\n        'individual': {\n            'current-name': {\n                'title': 'Mr',\n                'family-name': 'Hunt',\n                'first-given-name': 'Matthew',\n                'other-given-name': 'Eales'\n            },\n            'addresses': {\n                'address': [{\n                    'type': 'C',\n                    'unit-number': 12,\n                    'street-number': 4,\n                    'street-name': 'Huntsman',\n                    'street-type': 'CIR',\n                    'suburb': 'Pyrmont',\n                    'state': tf.stateType('NSW'),\n                    'postcode': 2011\n                }]\n            },\n            'drivers-license': {'number': '758811G'},\n            'gender-code': 'M',\n            'date-of-birth': '1970-01-26',\n            'employment': {\n                'employer': [employerType(name='DATA FISH PTD LTD', type='C')]\n            }\n        },\n        'enquiry': {\n            'account-type-code': 'PR',\n            'enquiry-amount': tf.MoneyType(5000, 'AUD'),\n            'is-credit-review': False,\n            'relationship-code': 1\n        }\n    }\n\n    print(client.service.submitEnquiry(enquiry_header, enquiry_data))\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 3978009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f385c6f442524d0d44c38efd64768c54?s=128&d=identicon&r=PG&f=1", "display_name": "Ronildo Braga Junior", "link": "https://stackoverflow.com/users/3978009/ronildo-braga-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4571, "favorite_count": 0, "accepted_answer_id": 42290202, "answer_count": 1, "score": 2, "last_activity_date": 1487309870, "creation_date": 1487197125, "last_edit_date": 1487217850, "question_id": 42261164, "link": "https://stackoverflow.com/questions/42261164/python-zeep-overview-of-the-services-available", "title": "Python zeep overview of the services available", "body": "<p>I have been working with python zeep to inspect the WSDL document and generates the corresponding code to use the services and types in the wsdl document.</p>\n\n<p>The code below is a short example. It partially works. The problem is: These parameters is not exactly what the web service is waiting for</p>\n\n<pre><code>client = Client(wsdl='veda/wsdl/vedascore-apply-v2-0-6.wsdl')\nclient.service.submitEnquiry('Zeep', 'is cool')\n</code></pre>\n\n<p>In order to find out what I was supposed to send and to get an overview of the services available on the endpoint, I performed the following command in my terminal:</p>\n\n<pre><code>python -mzeep 'veda/wsdl/vedascore-apply-v2-0-6.wsdl'\n</code></pre>\n\n<p>The result of the command above is a big text file which I will attached <a href=\"http://textuploader.com/d1zka\" rel=\"nofollow noreferrer\">here</a>. Now that I have an overview of the services I guess I was supposed to create a proper call signature. I also went through the official documentation and I manage to perform the follow code:</p>\n\n<pre><code>    client = Client(wsdl='veda/wsdl/vedascore-apply-v2-0-6.wsdl')\n    request_type = client.get_type('ns0:requestType')\n    client.service.submitEnquiry(request_type)\n</code></pre>\n\n<p>The code above is not even close to the final solution. In order to build a proper call I have to understand the overview of the services available which I am struggling to do. The image below is just part of the description. If you can please give me any ideas I am more than happy to listen to you.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kTwwL.png\" rel=\"nofollow noreferrer\">overview of the services</a></p>\n\n<p>Warm Regards.</p>\n\n<p>Ronildo Braga Junior</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 0, "creation_date": 1487198108, "post_id": 42261138, "comment_id": 71680445, "body": "Serialize your data. JSON should suffice."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 7571639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23947bdc7178d61208263059b6166097?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Raper", "link": "https://stackoverflow.com/users/7571639/jake-raper"}, "is_accepted": false, "score": 1, "last_activity_date": 1487198633, "creation_date": 1487198633, "answer_id": 42261511, "question_id": 42261138, "link": "https://stackoverflow.com/questions/42261138/extracting-variables-from-data-printed-to-screen/42261511#42261511", "title": "Extracting variables from data printed to screen", "body": "<p>It's a bit of a hack, but you can redirect stdout to a file by adding something like this to your code.</p>\n\n<pre><code>import sys\n\n# This sets the normal system print output to a variable\n# in case you need to restore it later in the script.\nnormal_stdout = sys.stdout\n\n# This redirects the print output to a file.\nsys.stdout = open('output.dat','w')\n\n#do stuff\n\n# And to change it back for new code, in case you actually want to print\nsys.stdout = normal_stdout\n</code></pre>\n\n<p>Please keep in mind that anything that prints to the console, including Tracebacks, will be printed to the file. You can open this file and read the information inside without much difficulty.</p>\n\n<p>Best practice would be to do one of two things:<br>\n1) If you are adding to the old code, modify it by assigning to a variable or appending to a dictionary or similar object, which you can use elsewhere for further processing, either alongside or instead of a print statement.<br>\n2) If your code is referencing the other code, import it at the top of your code</p>\n\n<pre><code> import oldCode.py\n</code></pre>\n\n<p>and modify the old code to return rather than print. To do this, you'll probably have to make similar changes to those described above in 1) so that you have something to return. To know the best route to take, we would have to see your old code, or at least a stripped down version. </p>\n"}], "owner": {"reputation": 41, "user_id": 7458433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/57da8681c1643a908a51512f37da7761?s=128&d=identicon&r=PG&f=1", "display_name": "tptptpfg", "link": "https://stackoverflow.com/users/7458433/tptptpfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1487214538, "answer_count": 1, "score": -2, "last_activity_date": 1487198633, "creation_date": 1487197017, "question_id": 42261138, "link": "https://stackoverflow.com/questions/42261138/extracting-variables-from-data-printed-to-screen", "closed_reason": "Needs details or clarity", "title": "Extracting variables from data printed to screen", "body": "<p>I am working on older code, oldCode.py Basically it prints to screen some data, like the sales of items 1,2 and 3.</p>\n\n<p>print '1 500'\n   print '2 842'\n   print '3 734'</p>\n\n<p>I want to extract this data for further processing.  I know I can stop python from printing this information to the screen, and make it write the information to some file output.dat by writing</p>\n\n<pre><code>python oldCode.py &gt;&gt; output.dat\n</code></pre>\n\n<p>However, in the first place how do I even extract the data to process from output.dat when that isn't defined in the script in the first place? And I have to write the results of my processing step to the same output file. Short of rewriting the entire code (final option), how will I be able to do this?</p>\n"}, {"tags": ["python", "list", "loops"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487197038, "post_id": 42261131, "comment_id": 71679924, "body": "Sounds like there are actually 3 extra invisible characters on that line."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487197106, "post_id": 42261131, "comment_id": 71679959, "body": "Why are you slicing <i>after</i> you encode? You&#39;re chopping off 45 bytes, not 45 characters, when you do it that way."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487197108, "post_id": 42261131, "comment_id": 71679961, "body": "wouldn&#39;t it be a BOM header problem? BOM headers are part of the encoding and are ... 3 bytes long on the first line..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487197215, "post_id": 42261131, "comment_id": 71680019, "body": "check that: <a href=\"http://stackoverflow.com/questions/13156395/python-load-json-file-with-utf-8-bom-header\" title=\"python load json file with utf 8 bom header\">stackoverflow.com/questions/13156395/&hellip;</a>"}, {"owner": {"reputation": 53, "user_id": 3597545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded11a2565f296fc9266af145c57fedb?s=128&d=identicon&r=PG&f=1", "display_name": "user3597545", "link": "https://stackoverflow.com/users/3597545/user3597545"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487197550, "post_id": 42261131, "comment_id": 71680185, "body": "@user2357112 Not sure, I switched the slice to appear before the encoding but the first line is now removing only the first 44 characters and not 45"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3597545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded11a2565f296fc9266af145c57fedb?s=128&d=identicon&r=PG&f=1", "display_name": "user3597545", "link": "https://stackoverflow.com/users/3597545/user3597545"}, "edited": false, "score": 0, "creation_date": 1487198247, "post_id": 42261249, "comment_id": 71680496, "body": "Was already perusing the link you provided in your initial reply, but thank you for the more in-depth explanation. The loop line you provided works perfectly"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 53, "user_id": 3597545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded11a2565f296fc9266af145c57fedb?s=128&d=identicon&r=PG&f=1", "display_name": "user3597545", "link": "https://stackoverflow.com/users/3597545/user3597545"}, "edited": false, "score": 1, "creation_date": 1487198601, "post_id": 42261249, "comment_id": 71680642, "body": "if my post was useful, then you can accept the answer. If you figured out yourself, then you don&#39;t have to accept it of course."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1487197475, "last_edit_date": 1495541819, "creation_date": 1487197475, "answer_id": 42261249, "question_id": 42261131, "link": "https://stackoverflow.com/questions/42261131/loop-action-on-list-doesnt-perform-correctly-on-just-the-first-item/42261249#42261249", "title": "Loop action on list doesn&#39;t perform correctly on just the first item", "body": "<p>That UTF-8 stuff along with the 3 bytes shift in the first line looks very much like extra BOM header.</p>\n\n<pre><code>&gt;&gt;&gt; from codecs import BOM_UTF8\n&gt;&gt;&gt; len(BOM_UTF8)\n3\n</code></pre>\n\n<p>BOM header is detected by most text editors and is not directly visible (unless you use a text editor).</p>\n\n<p>I propose you change your inner loop like this:</p>\n\n<pre><code>for item in list1:\n    list2.append(item[45+len(codecs.BOM_UTF8) if item.startswith(codecs.BOM_UTF8) else 45:])\n</code></pre>\n\n<p>so if line (first line) starts with the BOM header, you add the 3 extra bytes</p>\n\n<p>Or may directly before you encode your full string:</p>\n\n<pre><code>list1 = [(x[len(codecs.BOM_UTF8):] if x.startswith(codecs.BOM_UTF8) else x).encode('utf-8') for x in list1]\n</code></pre>\n\n<p>BOM-strip code taken from this Q/A: <a href=\"https://stackoverflow.com/questions/13156395/python-load-json-file-with-utf-8-bom-header\">Python load json file with UTF-8 BOM header</a></p>\n"}], "owner": {"reputation": 53, "user_id": 3597545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded11a2565f296fc9266af145c57fedb?s=128&d=identicon&r=PG&f=1", "display_name": "user3597545", "link": "https://stackoverflow.com/users/3597545/user3597545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 42261249, "answer_count": 1, "score": 1, "last_activity_date": 1487197475, "creation_date": 1487196967, "question_id": 42261131, "link": "https://stackoverflow.com/questions/42261131/loop-action-on-list-doesnt-perform-correctly-on-just-the-first-item", "title": "Loop action on list doesn&#39;t perform correctly on just the first item", "body": "<p>I'm just trying to remove the first 45 characters from every line in an imported text file and then write the results to a new text file. For some reason, only the first item in the list/line gets messed up and only the first 42 characters are removed. </p>\n\n<p>I've encountered this issue a number of times before and never figured out why it was happening, could use some outside wisdom! Thanks! </p>\n\n<p>Here's my code:</p>\n\n<pre><code>list1 = []\nlist2 = []\nwith codecs.open('FILE.txt', \"r\", encoding=\"utf-8\") as inputfile:\n        list1 = [line.strip() for line in inputfile]\n        list1 = [x.encode('utf-8') for x in list1]\n        for item in list1:\n            list2.append(item[45:])\nz = open('NEWFILE.txt', 'w');\nz.write(\"\\n\".join(list2))\nz.close()\n</code></pre>\n"}, {"tags": ["python", "command-line-interface", "argparse"], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 4223749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/895a3e50a4188f3dce19eb25927b19f9?s=128&d=identicon&r=PG&f=1", "display_name": "dtrckd", "link": "https://stackoverflow.com/users/4223749/dtrckd"}, "edited": false, "score": 0, "creation_date": 1487202341, "post_id": 42262057, "comment_id": 71681993, "body": "Thanks, that&#39;s a nice way !"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 4, "last_activity_date": 1487201650, "last_edit_date": 1487201650, "creation_date": 1487201245, "answer_id": 42262057, "question_id": 42261093, "link": "https://stackoverflow.com/questions/42261093/how-to-catch-the-value-that-cause-argparse-to-raise-an-error-in-python/42262057#42262057", "title": "How to catch the value that cause argparse to raise an error in Python", "body": "<p>You could define an error catching <code>type</code> function.  For example wrap <code>int</code> as:</p>\n\n<pre><code>def trytype(astr, fn=int):\n    try:\n       ret = fn(astr)\n    except ValueError:   \n       ret = ('error', astr)\n    return ret\n\nIn [51]: parser = argparse.ArgumentParser()\nIn [52]: parser.add_argument('-f', type=trytype);\nIn [53]: parser.parse_args('-f 123'.split())\nOut[53]: Namespace(f=123)\nIn [54]: parser.parse_args('-f abc'.split())\nOut[54]: Namespace(f=('error', 'abc'))\n</code></pre>\n\n<p>This could be generalized to handle other type functions (may be a trytype factory function).  Also make it catch all the error types (ValueError, TypeError, ArgumentTypeError).  And customize the return value.  Here I just returned a tuple with an 'error' string and the original string.</p>\n\n<pre><code>In [55]: from functools import partial\nIn [56]: partial(trytype, fn=float)\nOut[56]: functools.partial(&lt;function trytype at 0xac13a8e4&gt;, fn=&lt;class 'float'&gt;)\nIn [57]: partial(trytype, fn=float)('12.34')\nOut[57]: 12.34\nIn [58]: partial(trytype, fn=int)('12.34')\nOut[58]: ('error', '12.34')\nIn [59]: partial(trytype, fn=str)('abc')\nOut[59]: 'abc'\n</code></pre>\n\n<p>accept int in one argument and float in another:</p>\n\n<pre><code>In [60]: parser = argparse.ArgumentParser()\nIn [61]: parser.add_argument('-i', type=partial(trytype, fn=int));\nIn [62]: parser.add_argument('-f', type=partial(trytype, fn=float));\nIn [63]: parser.parse_args('-f abc -i123'.split())\nOut[63]: Namespace(f=('error', 'abc'), i=123)\nIn [64]: parser.parse_args('-f 12.32 -ia23'.split())\nOut[64]: Namespace(f=12.32, i=('error', 'a23'))\nIn [65]: parser.parse_args('-f 12e32 -ia23'.split())\nOut[65]: Namespace(f=1.2e+33, i=('error', 'a23'))\nIn [66]: parser.parse_args('-f x2e32 -ia23'.split())\nOut[66]: Namespace(f=('error', 'x2e32'), i=('error', 'a23'))\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 4223749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/895a3e50a4188f3dce19eb25927b19f9?s=128&d=identicon&r=PG&f=1", "display_name": "dtrckd", "link": "https://stackoverflow.com/users/4223749/dtrckd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 42262057, "answer_count": 1, "score": 1, "last_activity_date": 1487419077, "creation_date": 1487196813, "last_edit_date": 1495535387, "question_id": 42261093, "link": "https://stackoverflow.com/questions/42261093/how-to-catch-the-value-that-cause-argparse-to-raise-an-error-in-python", "title": "How to catch the value that cause argparse to raise an error in Python", "body": "<p>Is it possible to catch an error raised when a value's type is wrong with argparse (invalid value but the argument is recognised) in order to see what caused the error and eventually <strong>ignore</strong> it (continue with the parsing)?</p>\n\n<p>I know that I can override the error method of the ArgumentParser, but it gives only the error message as a string, and I would want to avoid parsing this string.</p>\n\n<p>This is in order to handle some magic keywords in the CLI whatever the type defined with argparse.</p>\n\n<p>Note that I read the following related question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/38340252/handle-invalid-arguments-with-argparse-in-python\">Handle invalid arguments with argparse in Python</a></p>\n\n<p>and Python documentation, neither one seems to give an answer.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487196709, "post_id": 42261018, "comment_id": 71679741, "body": "the problem is that you want to replace a list of space-separated words by a word. So you have to be exhaustive, or the regex won&#39;t know when to start/stop replacing words. For instance: <code>I am the super live in man</code>: where do I start/stop replacing?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487196818, "post_id": 42261018, "comment_id": 71679794, "body": "if your &quot;words&quot; are provided line by line, then a simple match against <code>\\bsuper\\b</code> and you can replace the entire string."}, {"owner": {"reputation": 1904, "user_id": 2605262, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a5d81ecf2f500b5a9856140a1b2e372?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/2605262/lukasz"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487196852, "post_id": 42261018, "comment_id": 71679811, "body": "I was thinking of using the <code>for</code> loop to iterate through each member of the list. If that member would contain the word <code>super</code> then the entire member should be replaced by <code>superintendent</code>."}, {"owner": {"reputation": 1904, "user_id": 2605262, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a5d81ecf2f500b5a9856140a1b2e372?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/2605262/lukasz"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487197279, "post_id": 42261018, "comment_id": 71680048, "body": "@Jean-Fran&#231;ois Fabre, I&#39;ve attempted <code>\\bsuper\\b</code> but my list remains completely unchanged."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1487197411, "post_id": 42261018, "comment_id": 71680119, "body": "sort the different branches of your alternation by string length in reverse order."}], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 1, "last_activity_date": 1487198838, "creation_date": 1487198838, "answer_id": 42261547, "question_id": 42261018, "link": "https://stackoverflow.com/questions/42261018/replacing-entire-string-if-there-is-a-matching-word/42261547#42261547", "title": "Replacing entire string if there is a matching word", "body": "<p>The <code>re.sub</code> method doesn't replace a string in place. It can't, since strings in Python are immutable. When you do a substitution on a string, it returns a new string with the requested changes (or the original string if there was no match). You're currently ignoring the return value, so your code has no effect.</p>\n\n<p>But I don't think you actually need regular expressions at all for this issue. If you want to replace any string that mentions the word <code>super</code> anywhere with the string <code>\"superintendent\"</code>, you can use a simple substring test:</p>\n\n<pre><code>for i, item in enumerate(list_of_strings):\n    if \"super\" in item:\n        list_of_strings[i] = \"superintendent\"\n</code></pre>\n\n<p>This will of course be more prone to false-positives than using your current regex. You could still use the structure of the code above with a regex search if you want (just change the <code>if \"super\" in item:</code> line to <code>if re.search(pattern, item):</code> after setting <code>pattern</code> to a regex that matches the strings you want it to). </p>\n"}, {"tags": [], "owner": {"reputation": 726, "user_id": 5864903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72165bd7db05f14bbad2ad25b04491a2?s=128&d=identicon&r=PG&f=1", "display_name": "staad", "link": "https://stackoverflow.com/users/5864903/staad"}, "is_accepted": false, "score": 1, "last_activity_date": 1487198886, "creation_date": 1487198886, "answer_id": 42261561, "question_id": 42261018, "link": "https://stackoverflow.com/questions/42261018/replacing-entire-string-if-there-is-a-matching-word/42261561#42261561", "title": "Replacing entire string if there is a matching word", "body": "<p>I'm not sure if I understand your question but if you want to replace every element with the word <code>super</code> in it by <code>superintendant</code>, here's what I would do.</p>\n\n<pre><code>for index,element in enumerate(listToCheck):\n    if \"super\" in element:\n        listToCheck[index]=\"superintendant\"\n</code></pre>\n\n<p>By the way don't name your variables <code>list</code> because it's a reserved python keyword.</p>\n"}, {"tags": [], "owner": {"reputation": 4080, "user_id": 5838056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A1TkO.jpg?s=128&g=1", "display_name": "arshbot", "link": "https://stackoverflow.com/users/5838056/arshbot"}, "is_accepted": false, "score": 1, "last_activity_date": 1487198948, "creation_date": 1487198948, "answer_id": 42261584, "question_id": 42261018, "link": "https://stackoverflow.com/questions/42261018/replacing-entire-string-if-there-is-a-matching-word/42261584#42261584", "title": "Replacing entire string if there is a matching word", "body": "<p>I might be misunderstanding your question, but couldn't you use <code>in</code> instead? This doesn't seem to warrant regex as regex is significantly slower. </p>\n\n<p>For instance:</p>\n\n<pre><code>i=0\nwhile i &lt; len(list):\n    if 'super' in list[i]:\n        list[i] = 'superintendant'\n    i+=1\n</code></pre>\n\n<p>This will replace everything in your list that contains <code>super</code> with <code>superintendent</code></p>\n"}, {"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487201273, "creation_date": 1487201273, "answer_id": 42262062, "question_id": 42261018, "link": "https://stackoverflow.com/questions/42261018/replacing-entire-string-if-there-is-a-matching-word/42262062#42262062", "title": "Replacing entire string if there is a matching word", "body": "<p>Shortest with a list comprehension:</p>\n\n<pre><code>lst = [\"resident super\", \"super live in\", \"on site superintendent in building\", \n\"livein super\", \"residential super\", \"superintendent lives in\", \"on-site super\", \"mega-intendent\"]\n\nnew_lst = ['superintendent' if 'super' in item else item \n            for item in lst]\n\nprint(new_lst)\n# ['superintendent', 'superintendent', 'superintendent', 'superintendent', 'superintendent', 'superintendent', \n# 'superintendent', 'mega-intendent']\n</code></pre>\n"}], "owner": {"reputation": 1904, "user_id": 2605262, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a5d81ecf2f500b5a9856140a1b2e372?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/2605262/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2951, "favorite_count": 0, "accepted_answer_id": 42261547, "answer_count": 4, "score": 0, "last_activity_date": 1487201273, "creation_date": 1487196504, "last_edit_date": 1487197185, "question_id": 42261018, "link": "https://stackoverflow.com/questions/42261018/replacing-entire-string-if-there-is-a-matching-word", "title": "Replacing entire string if there is a matching word", "body": "<p>I've got a large list of words that I'm trying to cleanup. A number of those words appear multiple times written a little differently every time and I would like to normalize them. For instance I would like to replace the following words:</p>\n\n<pre><code>list = [\"resident super\", \"super live in\", \"on site superintendent in building\", \"livein super\", \"residential super\", \"superintendent lives in\", \"on-site super\"...]\n</code></pre>\n\n<p>with just <code>superintendent</code></p>\n\n<p>I figured I could do this with </p>\n\n<pre><code>for item in list:\n    re.sub(\"resident super|super live in|on site superintendent in building| livein super|residential super|superintendent lives in|on-site super\", \n           \"superintendent\", list)\n</code></pre>\n\n<p>but I'm certain to miss some entries. All the entries include the word <code>super</code>, but is there a way to have a regex rule that will replace the entire item with the desired word?</p>\n"}, {"tags": ["python", "libusb-win32"], "comments": [{"owner": {"reputation": 2525, "user_id": 1762117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gt9Rc.jpg?s=128&g=1", "display_name": "MiltoxBeyond", "link": "https://stackoverflow.com/users/1762117/miltoxbeyond"}, "edited": false, "score": 0, "creation_date": 1487196590, "post_id": 42261002, "comment_id": 71679690, "body": "That looks like path problems.  Check to make sure that any dll&#39;s you may need are included in the path."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1487197291, "post_id": 42261002, "comment_id": 71680053, "body": "I don&#39;t think that code produced that error message. The first line of the traceback mentions spec_sample_plot.py, line 10. The code you&#39;ve provided only has 8 lines. Please copy-paste the <i>exact</i> program that generated the error."}, {"owner": {"reputation": 11, "user_id": 7571495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d017a4a9f016300979bdb31e3be740?s=128&d=identicon&r=PG&f=1", "display_name": "Gelat Cact", "link": "https://stackoverflow.com/users/7571495/gelat-cact"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1487272772, "post_id": 42261002, "comment_id": 71722131, "body": "@Rob\u1d69 I had some comments in the code that I did not post here that account for the line numbers mismatching. I have edited the post to include the error readout for only this code."}, {"owner": {"reputation": 268, "user_id": 2680858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6623724492b9fc9966c0fd0749b94795?s=128&d=identicon&r=PG&f=1", "display_name": "gchaks", "link": "https://stackoverflow.com/users/2680858/gchaks"}, "edited": false, "score": 0, "creation_date": 1487277213, "post_id": 42261002, "comment_id": 71724759, "body": "The error seems to be with the libusb DLL. Does pyusb work for you without seabreeze? Some code from a tutorial <a href=\"https://github.com/walac/pyusb/blob/master/docs/tutorial.rst\" rel=\"nofollow noreferrer\">link</a>. If it doesn&#39;t maybe the libusb DLL is not in your path environment variable."}, {"owner": {"reputation": 11, "user_id": 7571495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d017a4a9f016300979bdb31e3be740?s=128&d=identicon&r=PG&f=1", "display_name": "Gelat Cact", "link": "https://stackoverflow.com/users/7571495/gelat-cact"}, "reply_to_user": {"reputation": 268, "user_id": 2680858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6623724492b9fc9966c0fd0749b94795?s=128&d=identicon&r=PG&f=1", "display_name": "gchaks", "link": "https://stackoverflow.com/users/2680858/gchaks"}, "edited": false, "score": 0, "creation_date": 1487277551, "post_id": 42261002, "comment_id": 71724946, "body": "@gchaks I will check some code from that tutorial as soon as I get the chance. If that were the case though, why does it work when I type the program in line by line to the python shell?"}, {"owner": {"reputation": 268, "user_id": 2680858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6623724492b9fc9966c0fd0749b94795?s=128&d=identicon&r=PG&f=1", "display_name": "gchaks", "link": "https://stackoverflow.com/users/2680858/gchaks"}, "edited": false, "score": 0, "creation_date": 1487278282, "post_id": 42261002, "comment_id": 71725391, "body": "I always have trouble running anaconda from command line, can you check your conda env list and see which one is activated?"}, {"owner": {"reputation": 11, "user_id": 7571495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d017a4a9f016300979bdb31e3be740?s=128&d=identicon&r=PG&f=1", "display_name": "Gelat Cact", "link": "https://stackoverflow.com/users/7571495/gelat-cact"}, "reply_to_user": {"reputation": 268, "user_id": 2680858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6623724492b9fc9966c0fd0749b94795?s=128&d=identicon&r=PG&f=1", "display_name": "gchaks", "link": "https://stackoverflow.com/users/2680858/gchaks"}, "edited": false, "score": 0, "creation_date": 1487279164, "post_id": 42261002, "comment_id": 71725934, "body": "@gchaks Its just the root env"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7752618, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/091272c4eea2e73a5411eb295ec3a528?s=128&d=identicon&r=PG", "display_name": "Markus Allgaier", "link": "https://stackoverflow.com/users/7752618/markus-allgaier"}, "is_accepted": false, "score": 1, "last_activity_date": 1490201166, "creation_date": 1490201166, "answer_id": 42957901, "question_id": 42261002, "link": "https://stackoverflow.com/questions/42261002/python-code-runs-in-interactive-prompt-but-not-as-script/42957901#42957901", "title": "Python code runs in interactive prompt but not as script", "body": "<p>Your initial guess was not far off. I had exactly the same problem, however, on Windows 7 32bit with Python 2.7. The example code gchaks linked to was running fine.\nWhen I tried executing the script several times in quick succession, the error message changed and pointed at a empty devices list. I added a delay of 2 seconds after</p>\n\n<p>devs = sb.list_devices()</p>\n\n<p>and that solved the problem. Your code was running just fine on a Linux machine btw.</p>\n\n<p>Another hint: If your code should run once, but then you run into another error message, make sure you close the device connection or dis- and reconnect the spectrometer.</p>\n"}], "owner": {"reputation": 11, "user_id": 7571495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d017a4a9f016300979bdb31e3be740?s=128&d=identicon&r=PG&f=1", "display_name": "Gelat Cact", "link": "https://stackoverflow.com/users/7571495/gelat-cact"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490201166, "creation_date": 1487196438, "last_edit_date": 1487275583, "question_id": 42261002, "link": "https://stackoverflow.com/questions/42261002/python-code-runs-in-interactive-prompt-but-not-as-script", "title": "Python code runs in interactive prompt but not as script", "body": "<p>I am trying to interface with an Ocean optics spectrometer using seabreeze (<a href=\"https://oceanoptics.com/api/seabreeze/\" rel=\"nofollow noreferrer\">seabreeze</a>) and pyseabreeze (<a href=\"https://github.com/ap--/python-seabreeze\" rel=\"nofollow noreferrer\" title=\"pyseabreeze\">pyseabreeze</a>).</p>\n\n<p>If I enter python from the command prompt (cmd) in windows and enter the following code line by line, it works. However, if I put it in a script (spec_test.py) and try running it from cmd.exe by using 'python spec_test.py', it will not work. </p>\n\n<p>I have searched around a lot for similar problems but none seem to cover the issue I'm having. I am running Windows 7 64 bit, python 3.5.2 installed using anaconda. I also had to install pyusb and libusb to use pyseabreeze.</p>\n\n<p>The code:</p>\n\n<pre><code>import seabreeze\nseabreeze.use('pyseabreeze')\nimport seabreeze.spectrometers as sb\n\ndevs = sb.list_devices()\nprint(devs)\nspec = sb.Spectrometer(devs[0])\nprint(spec.model)\n</code></pre>\n\n<p>and the error message I get:</p>\n\n<pre><code>[&lt;SeaBreezeDevice USB2000PLUS:FLMS02379&gt;]\nTraceback (most recent call last):\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\pyseabreeze\\interfaces\\common.py\", line 14, in decorated_func\n    return func(*args, **kwargs)\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\pyseabreeze\\interfaces\\spectrometer.py\", line 46, in open\n    self.open_device(device.handle)\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\pyseabreeze\\interfaces\\communication.py\", line 37, in open_device\n    device.set_configuration()\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\usb\\core.py\", line 869, in set_configuration\n    self._ctx.managed_set_configuration(self, configuration)\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\usb\\core.py\", line 102, in wrapper\n    return f(self, *args, **kwargs)\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\usb\\core.py\", line 148, in managed_set_configuration\n    self.backend.set_configuration(self.handle, cfg.bConfigurationValue)\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\usb\\backend\\libusb0.py\", line 493, in set_configuration\n    _check(_lib.usb_set_configuration(dev_handle, config_value))\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\usb\\backend\\libusb0.py\", line 431, in _check\n    raise USBError(errmsg, ret)\nusb.core.USBError: [Errno None] b'libusb0-dll:err [set_configuration] could not set config 1: win error: The parameter is incorrect.\\r\\n'\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-9-ead886eb3666&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/Raman Lab/Python code/Spectrometers/spec_testing.py', wdir='C:/Users/Raman Lab/Python code/Spectrometers')\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 866, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"C:/Users/Raman Lab/Python code/Spectrometers/spec_testing.py\", line 7, in &lt;module&gt;\n    spec = sb.Spectrometer(devs[0])\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\spectrometers.py\", line 62, in __init__\n    self._open_device(device)\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\spectrometers.py\", line 90, in _open_device\n    lib.device_open(self._dev)\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\pyseabreeze\\wrapper.py\", line 81, in device_open\n    return device.interface.open(device)\n\n  File \"C:\\Users\\Raman Lab\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\seabreeze\\pyseabreeze\\interfaces\\common.py\", line 23, in decorated_func\n    raise SeaBreezeError(msg)\n\nSeaBreezeError: An error occured during opening.\n</code></pre>\n\n<p>Thanks for any help!</p>\n\n<p>Edit:\nFor some reason I figured this out, thought it might help describe the issue. If I enter interactive python from cmd.exe and paste the code instead of typing it in manually, I get the same error. This makes me think (most likely I'm wrong) that it is somehow tied up with speed of imports. I tried adding a sleep for a few seconds in between lines 3 and 5, to simulate what happens when I am typing in the prompt, but that didn't help. I hope this was descriptive enough.</p>\n"}, {"tags": ["python", "json", "post", "request", "bitcoin"], "comments": [{"owner": {"reputation": 401, "user_id": 4676706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/693sz.jpg?s=128&g=1", "display_name": "Fi3", "link": "https://stackoverflow.com/users/4676706/fi3"}, "edited": false, "score": 0, "creation_date": 1487237498, "post_id": 42260980, "comment_id": 71695981, "body": "Why you are not passing the message in requests.post? <code>requests.post(url, data, headers)</code>. Than I do not understand why you have <code>http_method = get</code>?"}, {"owner": {"reputation": 13, "user_id": 4976319, "user_type": "registered", "profile_image": "https://graph.facebook.com/1052813328081244/picture?type=large", "display_name": "Dave Herrera", "link": "https://stackoverflow.com/users/4976319/dave-herrera"}, "reply_to_user": {"reputation": 401, "user_id": 4676706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/693sz.jpg?s=128&g=1", "display_name": "Fi3", "link": "https://stackoverflow.com/users/4676706/fi3"}, "edited": false, "score": 0, "creation_date": 1487314924, "post_id": 42260980, "comment_id": 71738420, "body": "Im Still a noob but i changed  http_method = &quot;POST&quot; i entered in the body the data as a dictionary and as json.dumps(data) and am still not able to get the correct response from the api. im getting closer i feel so thank you for the help"}, {"owner": {"reputation": 401, "user_id": 4676706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/693sz.jpg?s=128&g=1", "display_name": "Fi3", "link": "https://stackoverflow.com/users/4676706/fi3"}, "edited": false, "score": 0, "creation_date": 1487317562, "post_id": 42260980, "comment_id": 71739877, "body": "You should edit your question with the new code so will be simpler find the answer  :)"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 2773257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFvux.jpg?s=128&g=1", "display_name": "vicco", "link": "https://stackoverflow.com/users/2773257/vicco"}, "is_accepted": false, "score": 0, "last_activity_date": 1529462280, "last_edit_date": 1529462280, "creation_date": 1529461220, "answer_id": 50939287, "question_id": 42260980, "link": "https://stackoverflow.com/questions/42260980/python-post-request-bitso-api-withdrawal/50939287#50939287", "title": "python post request bitso api withdrawal", "body": "<p>Hi man I highly recommend you to use the API wrapper Bitso provides, it already has the method you want to use.</p>\n\n<p>Those wrappers are available for python and java</p>\n\n<p><a href=\"https://github.com/bitsoex/bitso-py\" rel=\"nofollow noreferrer\">https://github.com/bitsoex/bitso-py</a></p>\n\n<p><a href=\"https://github.com/bitsoex/bitso-java\" rel=\"nofollow noreferrer\">https://github.com/bitsoex/bitso-java</a></p>\n\n<p>Here is a basic program:</p>\n\n<pre><code>import time\nimport hmac\nimport hashlib\nimport requests\nimport json\nimport random\nimport sys\n\ndef main(argv):\n    bitso_url = \"https://api.bitso.com\"\n    bitso_key = \"&lt;KEY&gt;\"\n    bitso_secret = \"&lt;SECRET&gt;\"\n\n    nonce = str(int(round(time.time())) * 100000 * 2)\n\n    http_method = \"POST\"\n    request_path = \"/api/v3/&lt;POST_ENDPOINT&gt;\" \n\n    payload = {}\n    #Add required keys of the parameters to the json\n    #As follows\n    #payload[\"&lt;needed key&gt;\"] = &lt;key value&gt;\n\n    json_payload = json.dumps(payload)\n\n    # Create signature\n    message = nonce + http_method + request_path + json_payload\n    signature = hmac.new(bitso_secret.encode('utf-8'),\n                        message.encode('utf-8'),\n                        hashlib.sha256).hexdigest()\n\n    # Build the auth header\n    auth_header = 'Bitso %s:%s:%s' % (bitso_key, nonce, signature)\n\n    # Send request\n    response = requests.post(bitso_url+request_path,\n        headers = {\"Authorization\" : auth_header},\n        json = payload)\n\n    print(response.content)\n\nif __name__ == \"__main__\":\n   main(sys.argv[1:])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4976319, "user_type": "registered", "profile_image": "https://graph.facebook.com/1052813328081244/picture?type=large", "display_name": "Dave Herrera", "link": "https://stackoverflow.com/users/4976319/dave-herrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529462280, "creation_date": 1487196375, "last_edit_date": 1487822655, "question_id": 42260980, "link": "https://stackoverflow.com/questions/42260980/python-post-request-bitso-api-withdrawal", "title": "python post request bitso api withdrawal", "body": "<p>Im trying to do a post request on the bitso Api using python to perform a debit card withdrawal. the api is telling me \"Body parameters should be JSON encoded and should be exactly the same as the JSON payload used to construct the signature.\" the body parameters are.  amount , recipient_given_names ,recipient_family_names, card_number, bank_code, i just want to know how i can add the body parameters to the post request of the following code.</p>\n\n<pre><code>    bitso_key = 'xxxxxxxxxxxx'\n\n    bitso_secret = 'xxxxxxxxxx'\n\n    nonce =  str(int(round(time.time() * 10000)))\n\n    http_method = \"POST\"\n\n    request_path = \"/v3/balance/\"\n\n    json_payload = \"\"\n\n  # Create signature\n\n    message = nonce+http_method+request_path+json_payload\n\n    signature = hmac.new(bitso_secret.encode('utf-8'),\n\n                                        message.encode('utf-8'),\n\n                                        hashlib.sha256).hexdigest()\n\n    # Build the auth header\n\n    auth_header = 'Bitso %s:%s:%s' % (bitso_key, nonce, signature)\n\n\n\n    # Send request\n\n    bitso_withdrawal = requests.post(\"https://api.bitso.com/v3/debit_card_withdrawal/\",headers={\"Authorization\": auth_header})\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy", "metaprogramming", "metaclass", "declarative"], "answers": [{"tags": [], "owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1487219561, "creation_date": 1487219561, "answer_id": 42265020, "question_id": 42260976, "link": "https://stackoverflow.com/questions/42260976/sqlalchemy-dynamically-create-table-and-mapped-class/42265020#42265020", "title": "Sqlalchemy dynamically create table and mapped class", "body": "<p>The <code>mydict</code> mapping has to either include a table object or specify that the table needs to be loaded from the database.</p>\n\n<p>This should work</p>\n\n<pre><code>mydict={'__tablename__':tbl, '__table__': table}\n</code></pre>\n\n<p>This should also work</p>\n\n<pre><code>mydict={'__tablename__':tbl, '__table_args__': ({'autoload':True},)}\n</code></pre>\n\n<p>the primary keys are already specified when you create <code>table</code>. It shouldn't be necessary to specify them again when creating a declarative, however if it required (say, for a complex key), it should be specified in <code>__table_args__</code>.</p>\n\n<p>The mapper has to be called on a declarative class. However, the newly created declarative doesn't have a metadata object. Adding the metadata will make the dynamically created declarative behave <em>more</em> like a regular declarative, so I would recommend putting this line after class creation</p>\n\n<pre><code>cls.metadata = cls.__table__.metadata\n</code></pre>\n\n<p>so, the full edits could be:</p>\n\n<pre><code>mydict={'__tablename__':tbl, '__table__': table}\ncls = type(cls_name, (Base,), mydict)\ncls.metadata = cls.__table__.metadata\n</code></pre>\n"}], "owner": {"reputation": 1736, "user_id": 130208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4026093fcab95eb45ce347cf3f635fad?s=128&d=identicon&r=PG", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/130208/sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1485, "favorite_count": 3, "accepted_answer_id": 42265020, "answer_count": 1, "score": 1, "last_activity_date": 1487219561, "creation_date": 1487196367, "last_edit_date": 1495542848, "question_id": 42260976, "link": "https://stackoverflow.com/questions/42260976/sqlalchemy-dynamically-create-table-and-mapped-class", "title": "Sqlalchemy dynamically create table and mapped class", "body": "<p>Given a set of column names and their types, the goal is to<br>\nto instantiate a  table and the corresponding mapped class.</p>\n\n<p>It is related to question posted here: <a href=\"https://stackoverflow.com/questions/2768607/dynamic-class-creation-in-sqlalchemy\">Dynamic Class Creation in SQLAlchemy</a>. </p>\n\n<p>So far I have the following:</p>\n\n<pre><code>table = Table(tbl, \n              metadata, \n             *(Column(col, ctype, primary_key=pk, index=idx) for  col,  ctype, pk, idx in zip(attrs, types, primary_keys, indexes))\n              )\n</code></pre>\n\n<p>This creates the table object. Now I need to create the corresponding class. </p>\n\n<pre><code>mydict={'__tablename__':tbl}\ncls = type(cls_name, (Base,), mydict)\n</code></pre>\n\n<p>This gives me following error:</p>\n\n<blockquote>\n  <p>ArgumentError: Mapper Mapper|persons_with_coord|t_persons_w_coord could not assemble any primary key columns for mapped table</p>\n</blockquote>\n\n<p>My question is how do I specify the primary keys as part of the class creation. \nAnd after the class is created do I need to call mapper as follows:</p>\n\n<pre><code>mapper(cls, table)\n</code></pre>\n"}, {"tags": ["python", "pandas", "parallel-processing"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1487197851, "post_id": 42260968, "comment_id": 71680333, "body": "Please provide sample imput and desired (output) data sets. Please read <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">how to make good reproducible pandas examples</a>"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1487198646, "post_id": 42260968, "comment_id": 71680670, "body": "Have you done any profiling to determine which part of your code is slow?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1487199083, "post_id": 42260968, "comment_id": 71680856, "body": "@RolandSmith, let me guess - nested loops? ;-)"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1487228383, "post_id": 42260968, "comment_id": 71690496, "body": "@MaxU I would have said loading the pandas dataframe from disk..."}], "answers": [{"comments": [{"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1487268588, "post_id": 42262138, "comment_id": 71719716, "body": "In the standard Python implementation, threads do not really improve performance on CPU-bound tasks. There is a &quot;Global Interpreter Lock&quot; that enforces that only <i>one</i> thread at a time can be executing Python bytecode. This was done to keep the complexity of memory management down."}, {"owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "reply_to_user": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1487788845, "post_id": 42262138, "comment_id": 71946439, "body": "Thank you for this explanation, I did not know this fact !"}, {"owner": {"reputation": 16753, "user_id": 395287, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OiGAR.jpg?s=128&g=1", "display_name": "Tim McNamara", "link": "https://stackoverflow.com/users/395287/tim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1509917762, "post_id": 42262138, "comment_id": 81203915, "body": "In cases where functions block such as I/O (not so likely with a Pandas apply function, but still plausible), using threads in Python can still lead to very effective speedups"}], "tags": [], "owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "is_accepted": false, "score": 0, "last_activity_date": 1487788993, "last_edit_date": 1487788993, "creation_date": 1487201709, "answer_id": 42262138, "question_id": 42260968, "link": "https://stackoverflow.com/questions/42260968/parallelize-operations-in-python/42262138#42262138", "title": "Parallelize operations in python", "body": "<p>[EDIT] As Roland mentioned in comment, in a standard Python implementation, this post does not offer any solution to improve CPU performances.</p>\n\n<blockquote>\n  <p>In the standard Python implementation, threads do not really improve performance on CPU-bound tasks. There is a \"Global Interpreter Lock\" that enforces that only one thread at a time can be executing Python bytecode. This was done to keep the complexity of memory management down.</p>\n</blockquote>\n\n<p>Have you tried to use different Threads for the different functions?</p>\n\n<p>Let's say you separate your dataframe into columns and create multiple threads. Then you assign each thread to apply a function to a column. If you have enough processing power, you might be able to gain a lot of time:</p>\n\n<pre><code>from threading import Thread\nimport pandas as pd\nimport numpy as np\nfrom queue import Queue\nfrom time import time\n\n# Those will be used afterwards\nN_THREAD = 8\nq = Queue()\ndf2 = pd.DataFrame()  # The output of the script \n\n# You create the job that each thread will do\ndef apply(series, func):\n    df2[series.name] = series.map(func)\n\n\n# You define the context of the jobs\ndef threader():\n    while True:\n        worker = q.get()\n        apply(*worker)\n        q.task_done()\n\ndef main():\n\n    # You import your data to a pandas dataframe\n    df = pd.DataFrame(np.random.randn(100000,4), columns=['A', 'B', 'C', 'D'])\n\n    # You create the functions you will apply to your columns\n    func1 = lambda x: x&lt;10\n    func2 = lambda x: x==0\n    func3 = lambda x: x&gt;=0\n    func4 = lambda x: x&lt;0\n    func_rep = [func1, func2, func3, func4]\n\n    for x in range(N_THREAD):  # You create your threads    \n        t = Thread(target=threader)\n        t.start()\n\n    # Now is the tricky part: You enclose the arguments that\n    # will be passed to the function into a tuple which you\n    # put into a queue. Then you start the job by \"joining\"\n    # the queue\n    for i, func in enumerate(func_rep):\n        worker = tuple([df.iloc[:,i], func])\n        q.put(worker)\n\n    t0 = time()\n    q.join()\n    print(\"Entire job took: {:.3} s.\".format(time() - t0))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1219, "user_id": 3426358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9f7fcc552dd4e78b2347319cd670a61e?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingAura", "link": "https://stackoverflow.com/users/3426358/flyingaura"}, "edited": false, "score": 0, "creation_date": 1487248346, "post_id": 42262255, "comment_id": 71704121, "body": "The group by operation indeed fastens up the process. Can you please explain in gist how this happens?  <code>res.unstack(level=1).fillna(0).values</code> however does not result in a matrix."}, {"owner": {"reputation": 1219, "user_id": 3426358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9f7fcc552dd4e78b2347319cd670a61e?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingAura", "link": "https://stackoverflow.com/users/3426358/flyingaura"}, "edited": false, "score": 0, "creation_date": 1487248621, "post_id": 42262255, "comment_id": 71704332, "body": "I think to create a matrix, just <code>res.unstack(level=1).fillna(0)</code> would suffice."}], "tags": [], "owner": {"reputation": 5844, "user_id": 1827356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21f270a4064c6c6721b6649c344f792f?s=128&d=identicon&r=PG", "display_name": "user1827356", "link": "https://stackoverflow.com/users/1827356/user1827356"}, "is_accepted": true, "score": 1, "last_activity_date": 1487202368, "creation_date": 1487202368, "answer_id": 42262255, "question_id": 42260968, "link": "https://stackoverflow.com/questions/42260968/parallelize-operations-in-python/42262255#42262255", "title": "Parallelize operations in python", "body": "<p>For 2.5 million records you should be able to do</p>\n\n<pre><code>res = file.groupby(['Unique_Inventor_Number', 'AppYearStr']).Citation.nunique()\n</code></pre>\n\n<p>The matrix should be available in</p>\n\n<pre><code>res.unstack(level=1).fillna(0).values\n</code></pre>\n\n<p>I'm not sure if the is the fastest, but should be significantly faster than your implementation</p>\n"}], "owner": {"reputation": 1219, "user_id": 3426358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9f7fcc552dd4e78b2347319cd670a61e?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingAura", "link": "https://stackoverflow.com/users/3426358/flyingaura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 42262255, "answer_count": 2, "score": 0, "last_activity_date": 1487788993, "creation_date": 1487196344, "last_edit_date": 1487203668, "question_id": 42260968, "link": "https://stackoverflow.com/questions/42260968/parallelize-operations-in-python", "title": "Parallelize operations in python", "body": "<p>I'm populating a matrix using a conditional lookup from a file. The file is extremely large (25,00,000 records) and is saved as a dataframe ('file').\nEach matrix row operation (lookup) is independent of the other. Is there anyway I could parallelize this process? </p>\n\n<p>I'm working in pandas and python. My current approach is bare naive. </p>\n\n<pre><code>for r in row:\n    for c in column:\n        num=file[(file['Unique_Inventor_Number']==r) &amp; file['AppYearStr']==c)]['Citation'].tolist()\n        num = len(list(set(num)))\n        d.set_value(r, c, num)\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1487201386, "last_edit_date": 1487201386, "creation_date": 1487197542, "answer_id": 42261265, "question_id": 42260926, "link": "https://stackoverflow.com/questions/42260926/trying-to-understand-the-double-index-in-python/42261265#42261265", "title": "Trying to understand the double index in python", "body": "<p>The second index does the same as the first but with the nested value.\nFor exemple:</p>\n\n<pre><code>a = [(1, 2), (2, 3), (3, 4)]\na[-1]  # (3, 4)\na[-1][1]  # 4\n</code></pre>\n\n<p>In your example you don't have a list with numbers but enumerate objects converted to lists</p>\n\n<pre><code>sort(list(enumerate(nums)))\n</code></pre>\n\n<p>It means that you have data like this:</p>\n\n<pre><code>nums = [1, 2, 3, 4, 5]\nenum_list = list(enumerate(nums))  # [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 726, "user_id": 5864903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72165bd7db05f14bbad2ad25b04491a2?s=128&d=identicon&r=PG&f=1", "display_name": "staad", "link": "https://stackoverflow.com/users/5864903/staad"}, "is_accepted": false, "score": 2, "last_activity_date": 1487198290, "creation_date": 1487198290, "answer_id": 42261427, "question_id": 42260926, "link": "https://stackoverflow.com/questions/42260926/trying-to-understand-the-double-index-in-python/42261427#42261427", "title": "Trying to understand the double index in python", "body": "<p>It seems like <code>left</code> is an array containing tuples. I.e. Each element of the array is a tuple.</p>\n\n<p>Ex: <code>left=[(value1oftuple1,value2oftuple1),(value1ofarray2,value2ofarray2)]</code></p>\n\n<p>In this case <code>left[-1][1]</code> would reference the first value in the last element of the array (<code>value1ofarray2</code>).</p>\n\n<p>I found this by running your code and printing the value of <code>left</code> just before your code calls <code>left[-1][1]</code>. This way you can see what data type left is. </p>\n"}], "owner": {"reputation": 13, "user_id": 7571494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab889f2356d858067e36a67f16846b8e?s=128&d=identicon&r=PG&f=1", "display_name": "swordfish", "link": "https://stackoverflow.com/users/7571494/swordfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10125, "favorite_count": 0, "accepted_answer_id": 42261265, "answer_count": 2, "score": 1, "last_activity_date": 1487201386, "creation_date": 1487196184, "last_edit_date": 1487196365, "question_id": 42260926, "link": "https://stackoverflow.com/questions/42260926/trying-to-understand-the-double-index-in-python", "title": "Trying to understand the double index in python", "body": "<pre><code>def countSmaller(self, nums):\n        def sort(enum):\n            half = len(enum) / 2\n            if half:\n                left, right = sort(enum[:half]), sort(enum[half:])\n                for i in range(len(enum))[::-1]:\n                    if not right or left and left[-1][1] &gt; right[-1][1]:\n                        smaller[left[-1][0]] += len(right)\n                        enum[i] = left.pop()\n                    else:\n                        enum[i] = right.pop()\n            return enum\n        smaller = [0] * len(nums)\n        sort(list(enumerate(nums)))\n        return smaller\n</code></pre>\n\n<p>I am a new python coder so this query!.. In left[-1][1] , I understood [-1] makes me think the last index but what does the second index [1] mean.</p>\n"}, {"tags": ["python", "django", "authentication", "model"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7225224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2879466c066c16ad6406a4df49a2a60?s=128&d=identicon&r=PG&f=1", "display_name": "RobinW2", "link": "https://stackoverflow.com/users/7225224/robinw2"}, "edited": false, "score": 0, "creation_date": 1487201884, "post_id": 42261801, "comment_id": 71681851, "body": "Hi neomanic, thanks for your answer. By &quot;scalable&quot; I am referring to the size of the user base on the application, i.e. when it grows to a significant amount of users. Regarding the two types of users, they will have access to different type of functionalities. TypeA will be able to add and manage objects on the site while TypeB will be able to buy and review."}, {"owner": {"reputation": 346, "user_id": 2189058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZXiLP.png?s=128&g=1", "display_name": "neomanic", "link": "https://stackoverflow.com/users/2189058/neomanic"}, "reply_to_user": {"reputation": 89, "user_id": 7225224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2879466c066c16ad6406a4df49a2a60?s=128&d=identicon&r=PG&f=1", "display_name": "RobinW2", "link": "https://stackoverflow.com/users/7225224/robinw2"}, "edited": false, "score": 0, "creation_date": 1487203554, "post_id": 42261801, "comment_id": 71682374, "body": "So you have regular users and administrators? That&#39;s exactly where I use the groups/permissions functionality in my webapp. It would be simple enough later on to drop down to a more basic implementation based solely on User attributes if scalability starts to suffer, but I wouldn&#39;t worry about that in the initial design."}, {"owner": {"reputation": 89, "user_id": 7225224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2879466c066c16ad6406a4df49a2a60?s=128&d=identicon&r=PG&f=1", "display_name": "RobinW2", "link": "https://stackoverflow.com/users/7225224/robinw2"}, "edited": false, "score": 0, "creation_date": 1487287869, "post_id": 42261801, "comment_id": 71729870, "body": "Great thanks for your help. I&#39;ll look a bit more into Groups and permissions and note your answer as correct."}], "tags": [], "owner": {"reputation": 346, "user_id": 2189058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZXiLP.png?s=128&g=1", "display_name": "neomanic", "link": "https://stackoverflow.com/users/2189058/neomanic"}, "is_accepted": true, "score": 0, "last_activity_date": 1487199977, "last_edit_date": 1495540806, "creation_date": 1487199977, "answer_id": 42261801, "question_id": 42260925, "link": "https://stackoverflow.com/questions/42260925/django-python-multiple-user-types-with-booleanfield-in-custom-user-model-o/42261801#42261801", "title": "Django - Python - Multiple User Types With BooleanField In Custom User Model &amp; OneToOne Relationships", "body": "<ol>\n<li><p>No, it's not a problem for the one-to-one relationship. As stated in <a href=\"https://stackoverflow.com/a/5891861/2189058\">this SO answer</a>, a OneToOne is just a ForeignKey with unique=True and the reverse relation being singular.</p></li>\n<li><p>Would be helpful to a little more detail on how you're dividing up the app based on the type of user, and what you mean by \"scalable\". \nDjango's <a href=\"https://docs.djangoproject.com/en/1.10/topics/auth/#usage\" rel=\"nofollow noreferrer\">Groups and permissions</a> is a more generalisable solution for \"each user group having access to different pages on the site\", and then you can check group membership when you're creating objects too.</p></li>\n</ol>\n"}], "owner": {"reputation": 89, "user_id": 7225224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2879466c066c16ad6406a4df49a2a60?s=128&d=identicon&r=PG&f=1", "display_name": "RobinW2", "link": "https://stackoverflow.com/users/7225224/robinw2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 42261801, "answer_count": 1, "score": 0, "last_activity_date": 1487199977, "creation_date": 1487196182, "question_id": 42260925, "link": "https://stackoverflow.com/questions/42260925/django-python-multiple-user-types-with-booleanfield-in-custom-user-model-o", "title": "Django - Python - Multiple User Types With BooleanField In Custom User Model &amp; OneToOne Relationships", "body": "<p>I am building a web application that will enable two different types of users to log in, with each user group having access to different pages on the site.</p>\n\n<p>As the information collected is similar for each type of user, I am planning to use only one custom user model with two boolean fields for each user type. The model will be defined as follows:</p>\n\n<pre><code>class My_Users(AbstractBaseUser):\n...\nis_active = models.BooleanField(default=True)\nis_admin = models.BooleanField(default=False)\nis_typeA = models.BooleanField(default=False)\nis_typeB = models.BooleanField(default=False)\n\n...\n</code></pre>\n\n<p>I intend to use OneToOne fields based on user IDs in other models, for both typeA and typeB users. So for example, there could be:</p>\n\n<pre><code>class Model1(models.Model):\n    id = models.OneToOneField(TypeA, on_delete=models.CASCADE,  primary_key=True,)\n    ...\n\nclass Model2(models.Model):\n    id = models.OneToOneField(TypeB, on_delete=models.CASCADE,  primary_key=True,)\n    ...\n</code></pre>\n\n<p>My question are the following:</p>\n\n<p>1/ This will imply that some ids created in my user model will be typeA and some others will be typeB. Will this be a problem for the one to one reliationship? i.e. will it be a problem that the ids are not incremental (type A could be id 1, 3, 4, 5, etc... whilst type B could have ids 2, 6, 7, etc...) for the one-to-one relationship.</p>\n\n<p>2/ Is this the best set up in order to ensure that the app is scalable. If not, what would this be?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "exception-handling", "traceback"], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 1, "last_activity_date": 1487201190, "last_edit_date": 1487201190, "creation_date": 1487197697, "answer_id": 42261301, "question_id": 42260912, "link": "https://stackoverflow.com/questions/42260912/how-to-get-filename-of-second-item-deep-in-exception-traceback/42261301#42261301", "title": "How to get filename of second item deep in exception traceback?", "body": "<p>You need to access the same attributes after going towards the frame that raised the exception by using <code>tb_next</code> on <code>exc_tb</code>: </p>\n\n<pre><code>exc_tb.tb_next.tb_frame.f_code.co_filename\n</code></pre>\n\n<p><code>tb_next</code> is another <code>traceback</code> object that contains identical attributes as the previous; it's just a chain which you can follow until you reach the level you need.</p>\n\n<hr>\n\n<p>Even though I've never used it, I'm certain the <a href=\"https://docs.python.org/3/library/traceback.html\" rel=\"nofollow noreferrer\"><code>traceback</code> module</a> would be quite handy if you're doing weird things with them.</p>\n"}], "owner": {"reputation": 4435, "user_id": 2801069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b7f58afbd866da432633593302fe79c4?s=128&d=identicon&r=PG&f=1", "display_name": "kyrenia", "link": "https://stackoverflow.com/users/2801069/kyrenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 42261301, "answer_count": 1, "score": 0, "last_activity_date": 1487201190, "creation_date": 1487196129, "last_edit_date": 1495539933, "question_id": 42260912, "link": "https://stackoverflow.com/questions/42260912/how-to-get-filename-of-second-item-deep-in-exception-traceback", "title": "How to get filename of second item deep in exception traceback?", "body": "<p>If I have a traceback such as:</p>\n\n<pre><code> Traceback (most recent call last):\n  File \"...\\overall_input.py\", line 5, in setup_data\n    MODULE1.function_name()\n  File \"...\\MODULE1.py\", line 5, in function_name\n    value = 1/0\n</code></pre>\n\n<p>How do I get the name of the second file deep - i.e. <code>MODULE1.py</code>?</p>\n\n<p>For reference, I know I can get the first file (i.e. <code>overall_input.py</code>) by capturing the exception and then using: </p>\n\n<pre><code>exc_type, exc_obj, exc_tb = sys.exc_info()\nfname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[1]\n</code></pre>\n\n<p>as described in the answer <a href=\"https://stackoverflow.com/questions/1278705/python-when-i-catch-an-exception-how-do-i-get-the-type-file-and-line-number\">Python When I catch an exception, how do I get the type, file, and line number?</a> .</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3471, "user_id": 316723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/752df5a606619b92b23612feda4420ad?s=128&d=identicon&r=PG", "display_name": "naktinis", "link": "https://stackoverflow.com/users/316723/naktinis"}, "edited": false, "score": 0, "creation_date": 1487196836, "post_id": 42260902, "comment_id": 71679802, "body": "It would help if you could give an example of the input and what you expect to generate from it."}, {"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "reply_to_user": {"reputation": 3471, "user_id": 316723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/752df5a606619b92b23612feda4420ad?s=128&d=identicon&r=PG", "display_name": "naktinis", "link": "https://stackoverflow.com/users/316723/naktinis"}, "edited": false, "score": 0, "creation_date": 1487198517, "post_id": 42260902, "comment_id": 71680613, "body": "@naktinis thanks. i added some explanation. actually the question is quite simple. after re.search() returns true, is there a way to get parts of the matched pattern, whatever it is? Perl lets you do that (the matched parts are saved in a global variable)."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 1, "creation_date": 1487198740, "post_id": 42260902, "comment_id": 71680703, "body": "Python doesn&#39;t have automatic assignment to global variables. You could easily write a wrapper function to do it, but it&#39;s not built into the language."}, {"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1487202084, "post_id": 42260902, "comment_id": 71681909, "body": "@JohnY thanks. it&#39;s also good to know that Python simply lacks such feature. so I&#39;ll focus on something else."}], "answers": [{"comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1487198123, "post_id": 42261053, "comment_id": 71680449, "body": "Thanks. What you posted should work for the cases I showed in my codes. But what I&#39;m looking for is a more general way to extract the matched pattern after re.search() returns true without having to test anything else."}, {"owner": {"reputation": 600, "user_id": 350429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/800837bb653076b301601d3991671678?s=128&d=identicon&r=PG", "display_name": "adifire", "link": "https://stackoverflow.com/users/350429/adifire"}, "reply_to_user": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1487198516, "post_id": 42261053, "comment_id": 71680612, "body": "@Shiping <code>re.search</code> returns a <code>Match</code> object and not a boolean. The above code will work even if you replace <code>match</code> with <code>search</code>. If you want to test and then extract, you can either do <code>try..except</code> the same code above or assign the <code>Match</code> object returned by <code>re.search</code> and check if it&#39;s <code>None</code> or not."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1487198869, "post_id": 42261053, "comment_id": 71680759, "body": "@adifire - I don&#39;t think your edit is any closer to what OP is looking for. Actually it may be even worse. See their comment about Perl at the main question."}, {"owner": {"reputation": 600, "user_id": 350429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/800837bb653076b301601d3991671678?s=128&d=identicon&r=PG", "display_name": "adifire", "link": "https://stackoverflow.com/users/350429/adifire"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1487199266, "post_id": 42261053, "comment_id": 71680923, "body": "@JohnY Guess you are right, maybe I am missing something here. I thought the code should work as intended given the input."}], "tags": [], "owner": {"reputation": 600, "user_id": 350429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/800837bb653076b301601d3991671678?s=128&d=identicon&r=PG", "display_name": "adifire", "link": "https://stackoverflow.com/users/350429/adifire"}, "is_accepted": false, "score": 2, "last_activity_date": 1487198690, "last_edit_date": 1487198690, "creation_date": 1487196666, "answer_id": 42261053, "question_id": 42260902, "link": "https://stackoverflow.com/questions/42260902/python-better-ways-to-extract-matched-patterns/42261053#42261053", "title": "python: better ways to extract matched patterns?", "body": "<p>You could try this</p>\n\n<pre><code>import re\nr = re.compile(\"(high|medium|low)=(\\d+)\")\nwith open(file) as f:\n    for line in f:\n        match = r.search(line)\n        if not match:\n            continue\n        lvl, val = match.groups()\n        if lvl == \"high\":\n            high = val\n        elif lvl == \"medium\":\n            medium = val\n        elif lvl == \"low\":\n            low = val\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1487201639, "post_id": 42261481, "comment_id": 71681762, "body": "Thanks. This surely works.  But I wanted to know if there&#39;s an alternative, something like shown in my second code example.  Apparently Python lacks such feature."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "reply_to_user": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1487227058, "post_id": 42261481, "comment_id": 71689802, "body": "@Shiping - Python lacks the feature, but it&#39;s trivial to add it yourself. The class-based implementation shown here is more formal, some would say more proper. But you could simply use your own global variable and write an extremely short function to do the search and update the global."}, {"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1487289308, "post_id": 42261481, "comment_id": 71730410, "body": "Thanks. It works the way I wanted though I was hoping Python had something like that built in."}], "tags": [], "owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "is_accepted": true, "score": 2, "last_activity_date": 1487210860, "last_edit_date": 1487210860, "creation_date": 1487198512, "answer_id": 42261481, "question_id": 42260902, "link": "https://stackoverflow.com/questions/42260902/python-better-ways-to-extract-matched-patterns/42261481#42261481", "title": "python: better ways to extract matched patterns?", "body": "<p>_ holds the result of the last executed statement when you work in an interactive shell. It's just an ordinary variable in the context of a program.</p>\n\n<p>So, if you don't want to do the search again, you have to store the match object, as you do in your 3rd code example.</p>\n\n<p>If you want to avoid nesting the ifs, you can use continue :</p>\n\n<pre><code>with open(file) as r:\n    for line in r:\n        m = re.search('high=(\\d+)', line)\n        if m:\n            high = m.group(1)\n            continue\n        m = re.search('medium=(\\d+)', line)\n        if m:\n            medium = m.group(1)\n            continue\n        m = re.search('low=(\\d+)', line)\n        if m:\n            low = m.group(1)\n            continue\n        ...\n</code></pre>\n\n<p>Edit, to answer your comment:</p>\n\n<p>There is no general way to do what you want in Python:</p>\n\n<ul>\n<li><p>you don't have any automatic assignment of the results to a variable, like in Perl,</p></li>\n<li><p>you can't write </p>\n\n<p>if xxx = yyy:</p></li>\n</ul>\n\n<p>to avoid writing = by mistake instead of ==</p>\n\n<p>Though, there's always one way to do it:</p>\n\n<pre><code>import re\n\n\nclass Matcher:\n    def __init__(self, pattern):\n        self._pattern = pattern\n        self._compiled_pattern = re.compile(pattern)\n        self._match = None\n\n    def __str__(self):\n        return '&lt;Matcher&gt; %s, matching %s' % (self._pattern, self._match)\n\n    # match and search apply on the regex, and return the match object   \n    def match(self, string):\n        self._match = self._compiled_pattern.match(string)\n        return self._match\n\n    def search(self, string):\n        self._match = self._compiled_pattern.search(string)\n        return self._match\n\n    # Other methods apply to the match object\n    def __getattr__(self, attr):\n        return  getattr(self._match, attr)\n\n\n\nif __name__ == '__main__':\n\n    # instead of m = re.compile(...)\n    m = Matcher(r'(high)=(\\d+)')\n\n    lines = ['high=4', 'nothing here']\n\n\n    for line in lines:\n        # you can use search and match just like on the re object\n        if m.search(line):\n            # then you can use all methods of Match objects\n            print(m.groups())\n            print(m.group(1), m.group(2))\n            print(m.span())\n</code></pre>\n\n<p>So, it seems to behave just like you wanted!</p>\n"}], "owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 42261481, "answer_count": 2, "score": 1, "last_activity_date": 1487210860, "creation_date": 1487196100, "last_edit_date": 1487202128, "question_id": 42260902, "link": "https://stackoverflow.com/questions/42260902/python-better-ways-to-extract-matched-patterns", "title": "python: better ways to extract matched patterns?", "body": "<p>I have some codes like the following. It searches each line in a file for some patterns and, if found, extract some string from the matched pattern. Each line will only match, if any, one pattern at most.  What's in the file are just text lines, some lines have something like hight=123, some medium=123, and some low=123.</p>\n\n<pre><code>with open(file) as r:\n    for line in r:\n        if re.search('high=\\d+', line):\n             p = re.search('high=(\\d+)', line)\n             high = p.group(1)\n        elif re.search('medium=\\d+', line):\n             p = re.search('medium=(\\d+)', line)\n             medium = p.group(1)\n        elif re.search('low=\\d+', line):\n             p = re.search('low=(\\d+)', line)\n             low = p.group(1)\n        ...\n</code></pre>\n\n<p>Now I'm wondering if I can extract the matched part without doing a second search, as illustrated below with some invalid codes as an example. The patterns searched could be quite different from each other. The question here is if there's a way to extract the matched part after re.search() returns true.</p>\n\n<pre><code>with open(file) as r:\n    for line in r:\n        if re.search('high=(\\d+)', line):\n            high = _.group(1)    # invalid code, but looking for something like this.\n        elif re.search('medium=(\\d+)', line):\n            medium = _.group(1)  # invalid code\n        elif re.search('low=(\\d+)', line):\n            low = _.group(1)     # invalid code\n        ...\n</code></pre>\n\n<p>Note I could have done the below, but that's not what I wanted.</p>\n\n<pre><code>with open(file) as r:\n    for line in r:\n        m = re.search('high=(\\d+)', line)\n        if m:\n             high = m.group(1)\n        else:\n             m = re.search('medium=(\\d+)', line)\n             if m:\n                 medium = m.group(1)\n             else:\n                 m = re.search('low=(\\d+)', line)\n                 if m:\n                    low = m.group(1)\n        ...\n</code></pre>\n\n<p>I had tried to compile the patterns first, such as the following, but I got the error \"NameError: name '_' is not defined\". I tried this with both python2 and python3. There're some peculiar behaves with _.group(1) (it worked in some cases). I may bring up the issue in a separate post.</p>\n\n<pre><code>h = re.compile('hight=(\\d+)')\nm = re.compile('medium=(\\d+)')\nl = re.compile('low=(\\d+)')\n\nwith open(file) as r:\n    for line in r:\n        if h.search(line):\n            high = _.group(1)\n        elif m.search(line):\n            medium = _.group(1)\n        elif l.search(line):\n            low = _.group(1)\n        ...\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 6, "last_activity_date": 1487196027, "creation_date": 1487196027, "answer_id": 42260884, "question_id": 42260840, "link": "https://stackoverflow.com/questions/42260840/python-remove-dictionary-from-list-if-key-is-equal-to-value/42260884#42260884", "title": "Python - Remove dictionary from list if key is equal to value", "body": "<pre><code>a = [x for x in a if x['link'] not in b]\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; a = [{'link':'http://example.com/1/', 'id': 1}, {'link':'http://example.com/2/', 'id': 2}]\n&gt;&gt;&gt; b = ['http://example.com/2/', 'http://example.com/3/']\n&gt;&gt;&gt; a = [x for x in a if x['link'] not in b]\n&gt;&gt;&gt; a\n[{'link': 'http://example.com/1/', 'id': 1}]\n</code></pre>\n"}], "owner": {"reputation": 2145, "user_id": 4866484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2eeed273cdbbb92e20ab7fdca5110285?s=128&d=identicon&r=PG&f=1", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/4866484/hyperion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2236, "favorite_count": 2, "closed_date": 1487196102, "accepted_answer_id": 42260884, "answer_count": 1, "score": 5, "last_activity_date": 1487196027, "creation_date": 1487195876, "question_id": 42260840, "link": "https://stackoverflow.com/questions/42260840/python-remove-dictionary-from-list-if-key-is-equal-to-value", "closed_reason": "Duplicate", "title": "Python - Remove dictionary from list if key is equal to value", "body": "<p>How do I remove from list a all dictionaries which link value is included in list b? </p>\n\n<pre><code>a = [{'link':'http://example.com/1/', 'id': 1}, {'link':'http://example.com/2/', 'id': 2}]\nb = ['http://example.com/2/', 'http://example.com/3/']\n</code></pre>\n\n<p>a should be:</p>\n\n<pre><code>a = [{'link':'http://example.com/1/', 'id': 1}]\n</code></pre>\n"}, {"tags": ["python", "mysql", "linux", "subprocess"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1487196158, "post_id": 42260838, "comment_id": 71679471, "body": "are you on windows or Linux? if you&#39;re in windows, type <code>where mysqldump</code> and post the result. On Linux, I think it&#39;s <code>which mysqldump</code>. Also, can you post the output returned by <code>Popen</code> when <code>shell=False</code>, the one returned by <code>communicate()</code>"}, {"owner": {"reputation": 245, "user_id": 7214696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363a2f812f053d27efc0d47423b59377?s=128&d=identicon&r=PG", "display_name": "gms", "link": "https://stackoverflow.com/users/7214696/gms"}, "edited": false, "score": 0, "creation_date": 1487202087, "post_id": 42260838, "comment_id": 71681910, "body": "If you want to be sure you are splitting right the command you can use the <code>args = shlex.split(&#39;mysqldump --defaults-extra-file= ..whatever.. ..... &#39;)</code>. And by the way maybe you want to check the <code>subprocess.run</code>. It do the same without the wait and communicate methods. The results will be the same although and not fix the problem"}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1487281233, "post_id": 42260838, "comment_id": 71727043, "body": "linux. which mysqldump yields /usr/bin/mysqldump, subprocess.Popen([&quot;which&quot;,&quot;mysqldump&quot;]) yields same."}], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1487279830, "creation_date": 1487195873, "last_edit_date": 1487279830, "question_id": 42260838, "link": "https://stackoverflow.com/questions/42260838/python-subprocess-calling-mysqldump-with-cnf-file-fails-when-shell-false", "title": "Python subprocess calling mysqldump with .cnf file fails when shell=False", "body": "<p>What I want to do is call mysqldump to make a backup of a database table.</p>\n\n<p>I have assembled a list of command line arguments, where db and tbl are the database and table names, respectively, and cnf is a properly formatted mysql configuration file (containing host, user and password),</p>\n\n<pre><code>args = [\"mysqldump\",\"--defaults-extra-file=\"+cnf,db,tbl]\nprint \" \".join(args)\n</code></pre>\n\n<p>The output of the print is,</p>\n\n<pre><code>mysqldump --defaults-extra-file=dbserver.cnf test mytable\n</code></pre>\n\n<p>When I copy/paste the above line into the (bash) shell, it works.</p>\n\n<p>When I use subprocess.Popen, the command fails,</p>\n\n<pre><code>import subprocess as sp\n...\nproc = sp.Popen(args, shell=False, stdin=sp.PIPE, stdout=sp.PIPE)\nstdout = proc.communicate()\nretcode = proc.wait()\nif retcode&gt;0: print \"error\",retcode\n</code></pre>\n\n<p>But when I join the args together, and call subprocess.Popen with shell=True,\nthe command works as desired,</p>\n\n<pre><code>cmd = \" \".join(args)\nproc = sp.Popen(cmd, shell=True, stdin=sp.PIPE, stdout=sp.PIPE)\nstdout = proc.communicate()\nretcode = proc.wait()\nif retcode&gt;0: print \"error\",retcode\n</code></pre>\n\n<p>Further investigation reveals that the first command does not seem to use the user/password credentials from the config file, but the second variant does.</p>\n\n<p>Responses to other questions about subprocess.Popen make it clear that one should avoid the shell=True, but the first approach above fails.</p>\n\n<p>Can anyone identify what I am doing wrong above?</p>\n"}, {"tags": ["python", "pandas", "numpy", "timestamp", "split-apply-combine"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1488254374, "post_id": 42260764, "comment_id": 72138511, "body": "PR has been merged, and the fix should be in <code>0.20.0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": true, "score": 1, "last_activity_date": 1487283782, "last_edit_date": 1487283782, "creation_date": 1487225430, "answer_id": 42266229, "question_id": 42260764, "link": "https://stackoverflow.com/questions/42260764/pandas-timestamp-difference-in-groupby-transform/42266229#42266229", "title": "Pandas timestamp difference in groupby transform", "body": "<p><strong>Why does <code>agg</code> work but <code>transform</code> fails?</strong></p>\n\n<p>The difference between these two behaviors is that the <code>transform()</code> operation needs to return a like-indexed.  To facilitate this, <code>transform</code> starts with a copy of the original series. Then, after the computation for each group, sets the appropriate elements of the copied series equal to the result.  At that point is does a type comparison, and discovers that the <code>timedelta</code> is not cast-able to a <code>datetime</code>. <code>agg()</code> does not perform this step, so does not fail the type check.</p>\n\n<p><strong>A Work Around:</strong></p>\n\n<p>This analysis suggests a work around.  If the result of the <code>transform</code> is a <code>datetime</code>, it will succeed.  So to work around:</p>\n\n<pre><code>base_time = df['time_stamp'][0]\ndf.groupby('session_id')['time_stamp'].transform(\n    lambda x: x.max() - x.min() + base_time) - base_time\n</code></pre>\n\n<p><strong>Is this a Bug?</strong>     </p>\n\n<p>I assume it is a bug, and I plan to file an issue in the morning.  I will update here with the issue link.</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>I have submitted a <a href=\"https://github.com/pandas-dev/pandas/issues/15429\" rel=\"nofollow noreferrer\">bug</a> and a <a href=\"https://github.com/pandas-dev/pandas/pull/15430\" rel=\"nofollow noreferrer\">pull request</a> for this issue.</p>\n"}], "owner": {"reputation": 125, "user_id": 7470772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b8d29f2ed426f33d43c12912b0196c?s=128&d=identicon&r=PG&f=1", "display_name": "lenderson", "link": "https://stackoverflow.com/users/7470772/lenderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 1, "accepted_answer_id": 42266229, "answer_count": 1, "score": 4, "last_activity_date": 1487283782, "creation_date": 1487195533, "last_edit_date": 1487225542, "question_id": 42260764, "link": "https://stackoverflow.com/questions/42260764/pandas-timestamp-difference-in-groupby-transform", "title": "Pandas timestamp difference in groupby transform", "body": "<p>I have a dataframe with an integer index, session_id, event, and time_stamp that looks like this:</p>\n\n<pre><code>In [41]: df = pd.DataFrame(data={'session_id': np.sort(np.random.choice(np.arange(3), 11)), 'event': np.random.choice(['A', 'B', 'C', 'D'], 11), 'time_stamp': pd.date_range\n    ...: ('1/1/2017', periods=11, freq='S')}).reset_index(drop=True)\n\nIn [42]: df\nOut[42]:\n   event  session_id          time_stamp\n0      B           0 2017-01-01 00:00:00\n1      C           0 2017-01-01 00:00:01\n2      D           0 2017-01-01 00:00:02\n3      B           1 2017-01-01 00:00:03\n4      B           1 2017-01-01 00:00:04\n5      D           2 2017-01-01 00:00:05\n6      B           2 2017-01-01 00:00:06\n7      A           2 2017-01-01 00:00:07\n8      B           2 2017-01-01 00:00:08\n9      B           2 2017-01-01 00:00:09\n10     A           2 2017-01-01 00:00:10\n</code></pre>\n\n<p>I want to calculate session length using <code>groupby</code> by and a <code>lambda</code> function, but I want to return a series object indexed the same as the original dataframe so I can add it as a column. This should be possible with <code>groupby.transform</code> like this, but it returns a strange \"cannot convert object to numpy datetime\" error:</p>\n\n<pre><code>In [44]: df.groupby('session_id')['time_stamp'].transform(lambda x: x.max() - x.min())\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-44-c67ed1d4a90e&gt; in &lt;module&gt;()\n----&gt; 1 df.groupby('session_id')['time_stamp'].transform(lambda x: x.max() - x.min())\n\n/Users/hendele/anaconda2/lib/python2.7/site-packages/pandas/core/groupby.pyc in transform(self, func, *args, **kwargs)\n   2843\n   2844             indexer = self._get_index(name)\n-&gt; 2845             result[indexer] = res\n   2846\n   2847         result = _possibly_downcast_to_dtype(result, dtype)\n\nValueError: Could not convert object to NumPy datetime\n</code></pre>\n\n<p>I thought I was using this incorrectly, but when you use <code>groupby.agg</code>, it works!</p>\n\n<pre><code>In [43]: df.groupby('session_id')['time_stamp'].agg(lambda x: x.max() - x.min())\nOut[43]:\nsession_id\n0   00:00:02\n1   00:00:01\n2   00:00:05\nName: time_stamp, dtype: timedelta64[ns]\n</code></pre>\n\n<p>Could you please explain if this is a bug or not, and if not, what I'm doing wrong? Thanks!</p>\n\n<p>p.s. didn't want to use timestamp index because I may have duplicate timestamps in actual data.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 6013700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f54b71d2584ef41bff5a8cae310c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marses", "link": "https://stackoverflow.com/users/6013700/marses"}, "edited": false, "score": 0, "creation_date": 1487196669, "post_id": 42260872, "comment_id": 71679730, "body": "See the update. Is there a way to make the apply function do what I want? I don&#39;t really understand the error it&#39;s giving me (there&#39;s a ton of text), but I assumed it&#39;s trying to return the <code>i</code>-th row of <code>b</code>, instead of the <code>i</code>-element of each element of b."}, {"owner": {"reputation": 867, "user_id": 5922657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnlXa.jpg?s=128&g=1", "display_name": "Neo X", "link": "https://stackoverflow.com/users/5922657/neo-x"}, "reply_to_user": {"reputation": 968, "user_id": 6013700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f54b71d2584ef41bff5a8cae310c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marses", "link": "https://stackoverflow.com/users/6013700/marses"}, "edited": false, "score": 0, "creation_date": 1487196719, "post_id": 42260872, "comment_id": 71679747, "body": "Do you want to use <code>f</code> on a list or series, or on a 2D dataframe? Pandas <code>apply</code> applies function along input axis of DataFrame. And <code>applymap</code> apply a function to a DataFrame that is intended to operate elementwise, i.e. like doing map(func, series) for each series in the DataFrame."}, {"owner": {"reputation": 968, "user_id": 6013700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f54b71d2584ef41bff5a8cae310c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marses", "link": "https://stackoverflow.com/users/6013700/marses"}, "edited": false, "score": 0, "creation_date": 1487196852, "post_id": 42260872, "comment_id": 71679812, "body": "Essentially I would like the functionality of applymap (so apply <code>func</code> on each element of <code>df</code>/<code>b</code>), while being able to pass my &quot;external&quot; argument <code>i</code> into <code>func</code>. As you said, it seems I could use global variables or perhaps function attributes or something, or just split <code>df</code> into Series, but I was just wondering if there was a way to do that directly within pandas."}, {"owner": {"reputation": 867, "user_id": 5922657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnlXa.jpg?s=128&g=1", "display_name": "Neo X", "link": "https://stackoverflow.com/users/5922657/neo-x"}, "reply_to_user": {"reputation": 968, "user_id": 6013700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f54b71d2584ef41bff5a8cae310c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marses", "link": "https://stackoverflow.com/users/6013700/marses"}, "edited": false, "score": 0, "creation_date": 1487197298, "post_id": 42260872, "comment_id": 71680061, "body": "It depends on how do you define your <code>i-th</code> element of a 2D array? If it is <code>i = row * n_col + col</code>, pandas doesn&#39;t have a direct way for that, but you may consider using <code>apply</code> twice or <a href=\"http://stackoverflow.com/questions/25440008/python-pandas-flatten-a-dataframe-to-a-list\">flattening the dataframe to a list first</a>."}], "tags": [], "owner": {"reputation": 867, "user_id": 5922657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnlXa.jpg?s=128&g=1", "display_name": "Neo X", "link": "https://stackoverflow.com/users/5922657/neo-x"}, "is_accepted": false, "score": 0, "last_activity_date": 1487195978, "creation_date": 1487195978, "answer_id": 42260872, "question_id": 42260699, "link": "https://stackoverflow.com/questions/42260699/pandas-dataframe-how-to-applymap-with-external-arguments/42260872#42260872", "title": "pandas.DataFrame: how to applymap() with external arguments", "body": "<p>Pandas <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.applymap.html\" rel=\"nofollow noreferrer\"><code>applymap</code></a> doesn't accept arguments, <code>DataFrame.applymap(func)</code>. If you want to maintain an <code>i</code> as state, you can store it as a global variable that's accessed/modified by <code>func</code>, or use a <code>decorator</code>.</p>\n\n<p>However, I would recommend you to try the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\"><code>apply</code></a> method.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 3876608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49597d31074aafa3ebd0806e45ffb477?s=128&d=identicon&r=PG&f=1", "display_name": "user3876608", "link": "https://stackoverflow.com/users/3876608/user3876608"}, "is_accepted": false, "score": 2, "last_activity_date": 1506506377, "creation_date": 1506506377, "answer_id": 46444940, "question_id": 42260699, "link": "https://stackoverflow.com/questions/42260699/pandas-dataframe-how-to-applymap-with-external-arguments/46444940#46444940", "title": "pandas.DataFrame: how to applymap() with external arguments", "body": "<p>You can use it:</p>\n\n<pre><code>def matchValue(value, dictionary):\n    return dictionary[value]\n\na = {'first':  1, 'second':  2}\nb = {'first': 10, 'second': 20}\ndf['column'] = df['column'].map(lambda x: matchValue(x, a))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 4366229, "user_type": "registered", "profile_image": "https://graph.facebook.com/721337061/picture?type=large", "display_name": "Martin Alexandersson", "link": "https://stackoverflow.com/users/4366229/martin-alexandersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1557991921, "creation_date": 1557991921, "answer_id": 56163140, "question_id": 42260699, "link": "https://stackoverflow.com/questions/42260699/pandas-dataframe-how-to-applymap-with-external-arguments/56163140#56163140", "title": "pandas.DataFrame: how to applymap() with external arguments", "body": "<p>This is a solution where argument is stored within a nested method</p>\n\n<pre><code>f(cell,argument):\n    \"\"\"Do something with cell value and argument\"\"\"\n    return output\n\ndef outer(argument):\n   def inner(cell):\n        return f(cell,argument)\n\n   return inner \n\nargument = ...\ndf.applymap(func = outer(argument))\n</code></pre>\n"}], "owner": {"reputation": 968, "user_id": 6013700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f54b71d2584ef41bff5a8cae310c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marses", "link": "https://stackoverflow.com/users/6013700/marses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5266, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1557991921, "creation_date": 1487195275, "last_edit_date": 1487196949, "question_id": 42260699, "link": "https://stackoverflow.com/questions/42260699/pandas-dataframe-how-to-applymap-with-external-arguments", "title": "pandas.DataFrame: how to applymap() with external arguments", "body": "<p>SEE UPDATE AT THE END FOR A MUCH CLEARER DESCRIPTION.</p>\n\n<p>According to <a href=\"http://pandas.pydata.org/pandas-docs/version/0.18.1/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/version/0.18.1/generated/pandas.DataFrame.apply.html</a> you can pass external arguments to an apply function, but the same is not true of applymap: <a href=\"http://pandas.pydata.org/pandas-docs/version/0.18.1/generated/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/version/0.18.1/generated/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap</a></p>\n\n<p>I want to apply an elementwise function <code>f(a, i)</code>, where <code>a</code> is the element, and <code>i</code> is a manually entered argument. The reason I need that is because I will do <code>df.applymap(f)</code> in a loop <code>for i in some_list</code>. </p>\n\n<p>To give an example of what I want, say I have a DataFrame <code>df</code>, where each element is a <code>numpy.ndarray</code>. I want to extract the <code>i</code>-th element of each <code>ndarray</code> and form a new DataFrame from them. So I define my <code>f</code>:</p>\n\n<pre><code>def f(a, i):\n    return a[i]\n</code></pre>\n\n<p>So that I could make a loop which would return the i-th element of each of the <code>np.ndarray</code> contained in <code>df</code>:</p>\n\n<pre><code>for i in some_series:\n    b[i] = df.applymap(f, i=i)\n</code></pre>\n\n<p>so that in each iteration, it would pass my value of <code>i</code> into the function <code>f</code>. </p>\n\n<p>I realise it would all have been easier if I had used MultiIndexing for <code>df</code> but for now, this is what I'm working with. Is there a way to do what I want within pandas? I would ideally like to avoid for-looping through all the columns in <code>df</code>, and I don't see why <code>applymap</code> doesn't take keyword arguments, while <code>apply</code> does.</p>\n\n<p>Also, the way I currently understand it (I may be wrong), when I use <code>df.apply</code> it would give me the <code>i</code>-th element of each row/column, instead of the <code>i</code>-th element of each <code>ndarray</code> contained in <code>df</code>.</p>\n\n<hr>\n\n<p>UPDATE:</p>\n\n<p>So I just realised I could split <code>df</code> into Series and then use the <code>pd.Series.apply</code> which could do what I want. Let me just generate some data to show what I mean:</p>\n\n<pre><code>def f(a,i):\n    return a[i]\n\nb = pd.Series(index=range(10), dtype=object)\nfor i in b.index:\n    b[i] = np.random.rand(5)\n\nb.apply(f,args=(1,))\n</code></pre>\n\n<p>Does exactly what I expect, and want it to do. However, trying with a DataFrame:</p>\n\n<pre><code>b = pd.DataFrame(index=range(4), columns=range(4), dtype=object)\nfor i in b.index:\n    for col in b.columns:\n        b.loc[i,col] = np.random.rand(10)\n\nb.apply(f,args=(1,))\n</code></pre>\n\n<p>Gives me <code>ValueError: Shape of passed values is (4, 10), indices imply (4, 4)</code>.</p>\n"}, {"tags": ["python", "hadoop", "apache-spark", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7591636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0424a42efa6697adbaf06131c871c5e9?s=128&d=identicon&r=PG&f=1", "display_name": "Ao Li", "link": "https://stackoverflow.com/users/7591636/ao-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1487576102, "creation_date": 1487576102, "answer_id": 42338842, "question_id": 42260633, "link": "https://stackoverflow.com/questions/42260633/using-sparks-default-log4j-profile-org-apache-spark-log4j-defaults-properties/42338842#42338842", "title": "Using Spark&#39;s default log4j profile: org/apache/spark/log4j-defaults.properties Setting default log level to &quot;WARN&quot;", "body": "<p>The warning information \"Could not locate executable null\\bin\\winutils.exe in the Hadoop binaries.\"</p>\n\n<p>I use Windows, in \"Environment Variables\", add a variable \"HADOOP_HOME\" with value of your hadoop directory path. For example, my hadoop install under c:\\hadoop.\nIt would be \"HADOOP_HOME\" with value \"c:\\hadoop\"</p>\n\n<p>restart your cmd</p>\n\n<p>At this time, if the warning information shows: \"Could not locate executable c:\\hadoop\\bin\\winutils.exe in the Hadoop binaries.\"</p>\n\n<p>You need to github download hadoop-common-2.2.0-bin-master.zip and copy winutils.exe to c:\\hadoop\\bin</p>\n\n<p>At this time, it should work</p>\n"}], "owner": {"reputation": 1, "user_id": 7571460, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZmMNNRpUNkU/AAAAAAAAAAI/AAAAAAAACDs/CG-bGZFlYoA/photo.jpg?sz=128", "display_name": "Salahudin Malik", "link": "https://stackoverflow.com/users/7571460/salahudin-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487576102, "creation_date": 1487195019, "last_edit_date": 1487423362, "question_id": 42260633, "link": "https://stackoverflow.com/questions/42260633/using-sparks-default-log4j-profile-org-apache-spark-log4j-defaults-properties", "title": "Using Spark&#39;s default log4j profile: org/apache/spark/log4j-defaults.properties Setting default log level to &quot;WARN&quot;", "body": "<p>I am new to spark, I am using spark 2.1.0 with python 2.7, and it's not working. I've been searching for a week to find a solution to my problem without success.</p>\n\n<p>I am getting following error when I run pyspark in commmadLine:</p>\n\n<pre><code>Python 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:42:59) [MSC v.1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nUsing Spark's default log4j profile: org/apache/spark/log4j-defaults.properties\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\n17/02/16 02:37:41 ERROR Shell: Failed to locate the winutils binary in the hadoop binary path\njava.io.IOException: Could not locate executable null\\bin\\winutils.exe in the Hadoop binaries.\n        at org.apache.hadoop.util.Shell.getQualifiedBinPath(Shell.java:379)\n        at org.apache.hadoop.util.Shell.getWinUtilsPath(Shell.java:394)\n        at org.apache.hadoop.util.Shell.&lt;clinit&gt;(Shell.java:387)\n        at org.apache.hadoop.hive.conf.HiveConf$ConfVars.findHadoopBinary(HiveConf.java:2327)\n        at org.apache.hadoop.hive.conf.HiveConf$ConfVars.&lt;clinit&gt;(HiveConf.java:365)\n        at org.apache.hadoop.hive.conf.HiveConf.&lt;clinit&gt;(HiveConf.java:105)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:348)\n        at py4j.reflection.CurrentThreadClassLoadingStrategy.classForName(CurrentThreadClassLoadingStrategy.java:40)\n        at py4j.reflection.ReflectionUtil.classForName(ReflectionUtil.java:51)\n        at py4j.reflection.TypeUtil.forName(TypeUtil.java:243)\n        at py4j.commands.ReflectionCommand.getUnknownMember(ReflectionCommand.java:175)\n        at py4j.commands.ReflectionCommand.execute(ReflectionCommand.java:87)\n        at py4j.GatewayConnection.run(GatewayConnection.java:214)\n        at java.lang.Thread.run(Thread.java:745)\n17/02/16 02:38:21 WARN ObjectStore: Version information not found in metastore. hive.metastore.schema.verification is not enabled so recording the schema version 1.2.0\n17/02/16 02:38:21 WARN ObjectStore: Failed to get database default, returning NoSuchObjectException\nTraceback (most recent call last):\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\bin\\..\\python\\pyspark\\shell.py\", line 43, in &lt;module&gt;\n    spark = SparkSession.builder\\\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\python\\pyspark\\sql\\session.py\", line 179, in getOrCreate\n    session._jsparkSession.sessionState().conf().setConfString(key, value)\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\python\\lib\\py4j-0.10.4-src.zip\\py4j\\java_gateway.py\", line 1133, in __call__\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\python\\pyspark\\sql\\utils.py\", line 79, in deco\n    raise IllegalArgumentException(s.split(': ', 1)[1], stackTrace)\npyspark.sql.utils.IllegalArgumentException: u\"Error while instantiating 'org.apache.spark.sql.hive.HiveSessionState':\"\n&gt;&gt;&gt;\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"C:\\Python27\\lib\\atexit.py\", line 24, in _run_exitfuncs\n    func(*targs, **kargs)\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\python\\pyspark\\java_gateway.py\", line 110, in killChild\n    Popen([\"cmd\", \"/c\", \"taskkill\", \"/f\", \"/t\", \"/pid\", str(proc.pid)])\n  File \"C:\\Python27\\lib\\subprocess.py\", line 390, in __init__\n    errread, errwrite)\n  File \"C:\\Python27\\lib\\subprocess.py\", line 640, in _execute_child\n    startupinfo)\n  File \"C:\\Spark\\spark-2.1.0-bin-hadoop2.7\\python\\pyspark\\context.py\", line 236, in signal_handler\n    raise KeyboardInterrupt()\n</code></pre>\n"}, {"tags": ["python", "jira", "confluence", "confluence-rest-api"], "comments": [{"owner": {"reputation": 3389, "user_id": 2037826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LK68l.jpg?s=128&g=1", "display_name": "daveruinseverything", "link": "https://stackoverflow.com/users/2037826/daveruinseverything"}, "edited": false, "score": 1, "creation_date": 1487195585, "post_id": 42260625, "comment_id": 71679185, "body": "First of all, the way you&#39;re doing this is a bit confusing. Don&#39;t use python to call the curl binary, you might as well not use python at all. Use the <code>requests</code> module if you can, so you can clean up your code and keep it all pure python. Then try again and let us know the response you get. There are probably more resources on the web for using <code>requests</code> than nearly any other Python library so you shouldn&#39;t have trouble finding what you need."}, {"owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "reply_to_user": {"reputation": 3389, "user_id": 2037826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LK68l.jpg?s=128&g=1", "display_name": "daveruinseverything", "link": "https://stackoverflow.com/users/2037826/daveruinseverything"}, "edited": false, "score": 0, "creation_date": 1487195978, "post_id": 42260625, "comment_id": 71679384, "body": "edited/updated."}], "answers": [{"comments": [{"owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "edited": false, "score": 1, "creation_date": 1487281377, "post_id": 42279698, "comment_id": 71727128, "body": "I accepted this as the answer because I really appreciated the help - I never would of figured out that confluence was not supposed to be in the request call. As always though, I posted the final solution incase anyone comes across this and needs help."}], "tags": [], "owner": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "is_accepted": true, "score": 2, "last_activity_date": 1487284525, "last_edit_date": 1487284525, "creation_date": 1487262894, "answer_id": 42279698, "question_id": 42260625, "link": "https://stackoverflow.com/questions/42260625/confluence-wiki-page-not-updating-through-api/42279698#42279698", "title": "Confluence WIki Page Not Updating Through API", "body": "<p>First of all, please check the base url of your Confluence instance, because by default it looks like <code>xxx.xxx.xxx.xxx:1990/confluence</code>, but one can get rid of the context <code>confluence</code>. In your example, you use <code>wiki.myCompany.com:8444</code> as something called <code>jirasite</code> and still add <code>confluence</code> before the REST API url <code>rest/api</code>. If you use the right API endpoint, you should <strong>never</strong> get a HTML response.</p>\n\n<p>Then, please decide which API method you want to use. To <a href=\"https://docs.atlassian.com/confluence/REST/latest/#content-createContent\" rel=\"nofollow noreferrer\"><strong>create</strong></a> a new content, you have to send a <em>POST</em> request to <code>rest/api/content</code>, but to <a href=\"https://docs.atlassian.com/confluence/REST/latest/#content-update\" rel=\"nofollow noreferrer\"><strong>update</strong></a> an existing content, you have to send a <em>PUT</em> request to <code>rest/api/content/{contentId}</code>.</p>\n\n<p>I just noticed, that you are using the <code>-u</code> option in curl and the <code>auth</code> method of the requests library for authentication. I am not quite sure, but I think it is not possible to authenticate via those techniques. Atlassian lists <a href=\"https://developer.atlassian.com/fecrudev/remote-api-reference/rest-api-guide/authenticating-rest-requests\" rel=\"nofollow noreferrer\">the possibilities</a> in their documentation and I think, that you have to implement their <em>Basic authentication</em> on your own.</p>\n\n<h3>Some additional troubleshooting tips:</h3>\n\n<p>Atlassian provides a <a href=\"https://marketplace.atlassian.com/plugins/com.atlassian.labs.rest-api-browser/server/overview\" rel=\"nofollow noreferrer\">REST API Browser Plugin</a> to test API requests. If you cannot install plugins in your Confluence instance, you can use a browser extension (e.g. <a href=\"https://chrome.google.com/webstore/detail/yet-another-rest-client/ehafadccdcdedbhcbddihehiodgcddpl\" rel=\"nofollow noreferrer\">YARC</a>). This way, you can send requests to your Confluence without caring about authentication.</p>\n"}, {"tags": [], "owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "is_accepted": false, "score": 2, "last_activity_date": 1487281236, "creation_date": 1487281236, "answer_id": 42285194, "question_id": 42260625, "link": "https://stackoverflow.com/questions/42260625/confluence-wiki-page-not-updating-through-api/42285194#42285194", "title": "Confluence WIki Page Not Updating Through API", "body": "<p>I accepted lukegv's answer as it finally gave me some error messages that I could work with to get the final solution. More importantly, I am posting my script in case anyone comes across this and was infuriated at the lack of documentation of the confluence API.</p>\n\n<p>@lukegv is right - even though the documentation for updating confluence says to use this:</p>\n\n<pre><code>http://localhost:8080/confluence/rest/api/content/3604482\n</code></pre>\n\n<p>If you are using the wiki site you should be using this</p>\n\n<pre><code>http://localhost:8080/rest/api/content/3604482\n</code></pre>\n\n<p>The second issue is that you need to increment the version number of the page in order to update. To do that you need to call expand=version like this.</p>\n\n<pre><code>get_json = json.loads(requests.get('{0}/rest/api/content/28870287?expand=body.storage,version'.format(conflu_site),\n                 auth=(test_user, test_pass)).text)\n</code></pre>\n\n<p>Here is how I ended up implementing the code in order for it to work.</p>\n\n<pre><code># This is the bare minimum that it takes to update a wiki page\nupdate_templete = json.loads('{\"id\":\"28870287\",\"type\":\"page\",\"body\":{\"storage\":' \\\n              '{\"value\":\"Test\",\"representation\":\"storage\"}},\"version\":{\"number\":2}}')\n\n# This is used to get the current body of the wiki page \nget_json = json.loads(requests.get('{0}/rest/api/content/28870287?expand=body.storage,version'.format(conflu_site),\n                 auth=(test_user, test_pass)).text)\n\n# This increments the version number by one\nupdate_templete[\"version\"][\"number\"] = get_json[\"version\"][\"number\"] + 1\n\n# This saves the current page's body as a string\nbody = str(get_json[\"body\"][\"storage\"][\"value\"])\n\n# Use this to change the body however you see fit \nnew_body = do_Stuff(body) \n\n# Update the templete's body json with the new body\nupdate_templete[\"body\"][\"storage\"][\"value\"] = new_body\n\n# updates the confluence wiki site with the page body\nupdate_response = requests.put('{0}/rest/api/content/28870287/'.format(conflu_site),\n                                data=json.dumps(update_templete),\n                                auth=(test_user, test_pass),\n                                headers=({'Content-Type': 'application/json'}))\n</code></pre>\n"}], "owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2595, "favorite_count": 3, "accepted_answer_id": 42279698, "answer_count": 2, "score": 3, "last_activity_date": 1552749249, "creation_date": 1487194984, "last_edit_date": 1552749249, "question_id": 42260625, "link": "https://stackoverflow.com/questions/42260625/confluence-wiki-page-not-updating-through-api", "title": "Confluence WIki Page Not Updating Through API", "body": "<p>I trying to use the Rest API to update our wiki page but nothing seems to be happening even though I am receiving 200 codes.</p>\n\n<p>I've tried to accomplish this through both postman as well as Python, and I am receiving the same server response in both cases, but to no avail.\nHere is my Python code -</p>\n\n<pre><code>curl = 'curl -u user:pass -X POST -H \\'Content-Type: application/json\\' ' \\\n           '-d \\'{0}\\' https://wiki.myCompany.com:8444/confluence/rest/api/content/'\\\n            .format(json.dumps(new))\n    output = subprocess.check_output(['bash', '-c', curl])\n    print(output`)\n</code></pre>\n\n<p>I've tried using both POST and PUT</p>\n\n<p>Here is the response -</p>\n\n<pre><code>PUT https://wiki.myCompany.com:8444/confluence/rest/api/content/\n 200 OK       26.47 kB       655 ms\nView Request View Response\nHEADERS\nContent-Encoding: gzip\nContent-Length: 6578\nContent-Security-Policy: frame-ancestors 'self'\nContent-Type: text/html;charset=UTF-8\nDate: Wed, 15 Feb 2017 20:24:46 GMT\nServer: Apache-Coyote/1.1\nSet-Cookie: JSESSIONID=DBCAA4C03DC489A720B8A59D755BD22A; Path=/; Secure; HttpOnly\nVary: User-Agent\nX-Accel-Buffering: no\nX-Asen: SEN-3386858\nX-Ausername: username\nX-Confluence-Request-Time: 1487190286413\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Seraph-Loginreason: OK\nX-Xss-Protection: 1; mode=block\n\nBODYview raw\n\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Dashboard - myCompany Wiki&lt;/title&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=EDGE,chrome=IE7\"&gt;\n      &lt;meta charset=\"UTF-8\"&gt;\n        &lt;meta id=\"confluence-context-path\" name=\"confluence-context-path\" content=\"\"&gt;\n          &lt;meta id=\"confluence-base-url\" name=\"confluence-base-url\" content=\"https://wiki.myCompany.com:8444\"&gt;\n            &lt;meta id=\"atlassian-token\" name=\"atlassian-token\" content=\"abcd227f923fa6d5cce068a25de3bb4a3a3ceca4\"&gt;\n              &lt;script type=\"text/javascript\"&gt;\n        var contextPath = '';\n&lt;/script&gt;\n\n..... A lot more html .... but nothing relating to Body or Body.Storage...\n</code></pre>\n\n<p>My JSON is formed correctly and contains the page ID - Here is the start of it....</p>\n\n<pre><code>{\"id\":\"28870287\",\"type\":\"page\",\"status\":\"current\",\"title\":\"Automated QA Results - Android\",\"body\":{\"storage\":{\"value\":\"&lt;p&gt;These are the results of every git merge...}}\n</code></pre>\n\n<p>Does anyone have any idea why nothing is happening?</p>\n\n<p>I have tried this through the requests library before - I get the same 200 response code. I was just seeing if you guys notice something wrong with calls themselves rather than the implementation</p>\n\n<pre><code>   # output = requests.post('https://{0}/confluence/rest/api/content'.format(jirasite),\n#                     data=(json.dumps(new)),\n#                     auth=('user', 'pass'),\n#                     headers=({'Content-Type': 'application/json'}))\n</code></pre>\n\n<p>**** New Update ****</p>\n\n<p>I am trying it from literally the stock curl value which is Given on the Confluence API page</p>\n\n<pre><code>'{\"id\":\"28870287\",\"type\":\"page\",\"title\":\"new page\",\"space\":{\"key\":\"TST\"},\"body\":{\"storage\":{\"value\":\"&lt;p&gt;This is the updated text for the new page&lt;/p&gt;\",\"representation\":\"storage\"}},\"version\":{\"number\":2}}'\n</code></pre>\n\n<p>Still to no avail... I am at a complete loss....</p>\n\n<p>****** Update Again ******</p>\n\n<p>I am just going to post the code that I am currently working with</p>\n\n<pre><code>    r = requests.get('{0}/rest/api/content/28870287?expand=body.storage,version'.format(conflu_site),\n                 auth=(test_user, test_pass)).text\n\n    print(r) # This works as expected\n\nnew = '{\\\"id\\\":\\\"28870287\\\",\\\"type\\\":\\\"page\",\\\"title\":\\\"Automated QA Results - Android\\\",\\\"space\\\":{\\\"key\\\":\\\"TST\\\"},' \\\n      '\\\"body\\\":{\\\"storage\\\":{\\\"value\\\":\\\"&lt;p&gt;This is the updated text for the new page&lt;/p&gt;\\\",' \\\n      '\\\"representation\\\":\\\"storage\\\"}},\\\"version\\\":{\\\"number\\\":2}}'\n\nupdate_response = requests.put('{0}/confluence/rest/api/content/28870287/'.format(conflu_site),\n                                data=new,\n                                auth=(test_user, test_pass),\n                                headers=({'Content-Type': 'application/json'}))\n\nprint(\"Update Confluence Response: \" + str(update_response))\n</code></pre>\n"}, {"tags": ["python", "mysql", "airflow"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5696097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b3510c882668e56aca594653a13899?s=128&d=identicon&r=PG&f=1", "display_name": "dmcd", "link": "https://stackoverflow.com/users/5696097/dmcd"}, "is_accepted": false, "score": 3, "last_activity_date": 1487198130, "creation_date": 1487198130, "answer_id": 42261388, "question_id": 42260618, "link": "https://stackoverflow.com/questions/42260618/apache-airflow-mysql-specified-key-was-too-long-max-key-length-is-1000-bytes/42261388#42261388", "title": "Apache Airflow - mysql &#39;Specified key was too long; max key length is 1000 bytes&#39;", "body": "<p>I think I was able to get this to work. I changed my original create database to CREATE DATABASE airflow CHARACTER SET ascii and updated my engine to have /airflow?charset=ascii. Seems like it is working now (which is amazing)</p>\n"}], "owner": {"reputation": 81, "user_id": 5696097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b3510c882668e56aca594653a13899?s=128&d=identicon&r=PG&f=1", "display_name": "dmcd", "link": "https://stackoverflow.com/users/5696097/dmcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1609880445, "creation_date": 1487194953, "question_id": 42260618, "link": "https://stackoverflow.com/questions/42260618/apache-airflow-mysql-specified-key-was-too-long-max-key-length-is-1000-bytes", "title": "Apache Airflow - mysql &#39;Specified key was too long; max key length is 1000 bytes&#39;", "body": "<p>Trying to set up Airflow for MySQL and I am getting an error while Airflow attempts to set the primary key during \"airflow initdb\"</p>\n\n<pre><code>File \"/usr/lib/pymodules/python2.7/MySQLdb/cursors.py\", line 166, in execute\nself.errorhandler(self, exc, value)\nFile \"/usr/lib/pymodules/python2.7/MySQLdb/connections.py\", line 35, in defaulterrorhandler\nraise errorclass, errorvalue\nsqlalchemy.exc.OperationalError: (_mysql_exceptions.OperationalError) (1071, 'Specified key was too long; max key length is 1000 bytes') [SQL: u'\\nCREATE TABLE sla_miss (\\n\\ttask_id VARCHAR(250) NOT NULL, \\n\\tdag_id VARCHAR(250) NOT NULL, \\n\\texecution_date DATETIME NOT NULL, \\n\\temail_sent BOOL, \\n\\ttimestamp DATETIME, \\n\\tdescription TEXT, \\n\\tPRIMARY KEY (task_id, dag_id, execution_date), \\n\\tCHECK (email_sent IN (0, 1))\\n)\\n\\n']\n</code></pre>\n\n<p>Messed around with this for a while and could not exactly get it to work out. </p>\n\n<p>I know that the key is too long for the database but I am hoping that there is another way I can try to create the database to get this to work? </p>\n\n<p>From this example <a href=\"http://site.clairvoyantsoft.com/installing-and-configuring-apache-airflow/\" rel=\"nofollow noreferrer\">http://site.clairvoyantsoft.com/installing-and-configuring-apache-airflow/</a> I tried this:</p>\n\n<pre><code>CREATE DATABASE airflow CHARACTER SET utf8 COLLATE utf8_unicode_ci;\n</code></pre>\n\n<p>But that still caused the errors. When i change the CHARACTER SET to latin1 it is able to create the database but then none of the actual airflow processes are able to run due to decode errors.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "loops", "csv", "time", "export-to-csv"], "answers": [{"tags": [], "owner": {"reputation": 23682, "user_id": 18196, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/nTnqA.jpg?s=128&g=1", "display_name": "Frank V", "link": "https://stackoverflow.com/users/18196/frank-v"}, "is_accepted": true, "score": 3, "last_activity_date": 1487207632, "last_edit_date": 1487207632, "creation_date": 1487195370, "answer_id": 42260728, "question_id": 42260538, "link": "https://stackoverflow.com/questions/42260538/writing-data-into-a-csv-within-a-loop-python/42260728#42260728", "title": "Writing data into a CSV within a loop Python", "body": "<blockquote>\n  <p>How do I best write the data of the polygons that I create into the csv? Do I open the csv at the beginning and then write each row into the file, as I iterate over classes and images?</p>\n</blockquote>\n\n<p>I suspect most folks would gather the data in a list or perhaps dictionary and then write it all out at the end. But if you don't need to do additional processing to it, yeah -- send it to disk and release the resources. </p>\n\n<blockquote>\n  <p>And I guess writing the data into the csv right away would result in less RAM used, right?</p>\n</blockquote>\n\n<p>Yes, it would but it's not going to impact CPU usage; just reduce RAM usage though it does depend on when Python GC them. You really shouldn't worry about details like this. Get accurate output, first and foremost. </p>\n"}, {"tags": [], "owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1487208469, "creation_date": 1487208469, "answer_id": 42263210, "question_id": 42260538, "link": "https://stackoverflow.com/questions/42260538/writing-data-into-a-csv-within-a-loop-python/42263210#42263210", "title": "Writing data into a CSV within a loop Python", "body": "<p>First of all, use the csv library. \nDocumentation <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/csv.html</a> (py2)\nor <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/csv.html</a> (py3)</p>\n\n<p>Now, using this library you can take a list of list-like objects or a list of dicts (where the keys are the headers of your csv) and write them to a file. This is almost certainly the right way to go. If you've got enough data that you've maxed out your memory for the python process, then you might want to go back and think about it some more but with 429 * 10 = 4290 rows, that's probably not happening. </p>\n\n<blockquote>\n  <p>And I guess writing the data into the csv right away would result in less RAM used, right?</p>\n</blockquote>\n\n<p>Disk access is in general a relatively slow operation, so anything that maximizes disk access to save memory usage is a questionable approach.</p>\n"}], "owner": {"reputation": 193, "user_id": 6721948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853c26e8b43cb95f2322f9149557888b?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/6721948/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 42260728, "answer_count": 2, "score": 0, "last_activity_date": 1487256372, "creation_date": 1487194601, "last_edit_date": 1487256372, "question_id": 42260538, "link": "https://stackoverflow.com/questions/42260538/writing-data-into-a-csv-within-a-loop-python", "title": "Writing data into a CSV within a loop Python", "body": "<p>I am currently working on the Dstl satellite kaggle challenge. There I need to create a submission file that is in csv format. Each row in the csv contains: </p>\n\n<p><code>Image ID, polygon class (1-10), Polygons</code></p>\n\n<p>Polygons are a very long entry with starts and ends and starts etc.</p>\n\n<p>The polygons are created with an algorithm, for one class at a time, for one picture at a time (429 pictures, 10 classes each). </p>\n\n<p>Now my question is related to computation time and best practice: How do I best write the data of the polygons that I create into the csv? Do I open the csv at the beginning and then write each row into the file, as I iterate over classes and images? </p>\n\n<p>Or should I rather save the data in a list or dictionary or something and then write the whole thing into the csv file at once? </p>\n\n<p>The thing is, I am not sure how fast the writing into a csv file is. Also, as the algorithm is already rather consuming computationally, I would like to save my pc the trouble of keeping all the data in the RAM. </p>\n\n<p>And I guess writing the data into the csv right away would result in less RAM used, right?</p>\n\n<p>So you say that disc operations are slow. What exactly does that mean? When I write into the csv each row live as I create the data, does that slow down my program? So if I write a whole list into a csv file that would be faster than writing a row, then again calculating a new data row? So that would mean, that the computer waits for an action to finish before the next action gets started, right? But then still, what makes the process faster if I wait for the whole data to accumulate? Anyway the same number of rows have to be written into the csv, why would it be slower if I do it line by line?</p>\n"}, {"tags": ["python", "scipy"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1487194740, "post_id": 42260519, "comment_id": 71678741, "body": "I presume you want a probability density function?"}, {"owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 0, "creation_date": 1487196364, "post_id": 42260519, "comment_id": 71679584, "body": "<code>sts.pareto.pdf(np.linspace(0, 5), 4, 3)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1487233207, "post_id": 42261013, "comment_id": 71693133, "body": "The peaks appear slightly lower than on the Wikipedia page. Is that because your <code>x</code> does not exactly hit 1?"}, {"owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "reply_to_user": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1487246756, "post_id": 42261013, "comment_id": 71702955, "body": "Yes, it&#39;s because of the divisions of <code>x</code>.  I&#39;ll adjust it to make the grid finer."}], "tags": [], "owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "is_accepted": true, "score": 4, "last_activity_date": 1487246831, "last_edit_date": 1487246831, "creation_date": 1487196497, "answer_id": 42261013, "question_id": 42260519, "link": "https://stackoverflow.com/questions/42260519/defining-pareto-distribution-in-python-scipy/42261013#42261013", "title": "Defining Pareto distribution in Python scipy", "body": "<p>You could plot the pdf for different values of b (the shape parameter) like so:</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\nfrom scipy.stats import pareto\n\nxm = 1 # scale \nalphas = [1, 2, 3] # shape parameters\nx = np.linspace(0, 5, 1000)\n\noutput = np.array([pareto.pdf(x, scale = xm, b = a) for a in alphas])\nplt.plot(x, output.T)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dV26F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dV26F.png\" alt=\"pareto plot\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11534509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8U2mj6gH8A/AAAAAAAAAAI/AAAAAAAAAWg/zD4EG2HE1Zk/photo.jpg?sz=128", "display_name": "Ramon P&#233;rez", "link": "https://stackoverflow.com/users/11534509/ramon-p%c3%a9rez"}, "is_accepted": false, "score": 2, "last_activity_date": 1576669033, "creation_date": 1576669033, "answer_id": 59391205, "question_id": 42260519, "link": "https://stackoverflow.com/questions/42260519/defining-pareto-distribution-in-python-scipy/59391205#59391205", "title": "Defining Pareto distribution in Python scipy", "body": "<p>Since I wasn't entirely conviced, I've run some tests.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.stats import pareto\n\ndef my_pareto_pdf(x, a, x_m):\n    \"\"\"\n    Returns the value of the pareto density function at\n    the point x.\n    \"\"\"\n    if x &gt;= x_m:\n        pdv = a\n        pdv *= x_m**a\n        pdv /= x**(a+1)\n        return pdv\n    else:\n        return 0\n\nx = np.linspace(0, 10, 100)\n\nplt.plot(x, pareto.pdf(x, b=1.3), color='k', label='Scipy: b=1.3')\nplt.plot(x, [my_pareto_pdf(val, a=1.3, x_m=1) for val in x], color='tab:blue', alpha=0.5, lw=5, label='Mypdf: a=1.3 x_m=1')\n\nplt.plot(x, pareto.pdf(x, b=1.7, scale=3), color='k', label='Scipy: b=1.7 scale=3')\nplt.plot(x, [my_pareto_pdf(val, a=1.7, x_m=3) for val in x], color='tab:blue', alpha=0.5, lw=5, label='Mypdf: a=1.7 x_m=3')\n\nplt.plot(x, pareto.pdf(x, b=2.3, scale=6), color='k', label='Scipy: b=2.3 scale=6')\nplt.plot(x, [my_pareto_pdf(val, a=2.3, x_m=6) for val in x], color='tab:blue', alpha=0.5, lw=5, label='Mypdf: a=2.3 x_m=6')\n\nplt.legend(loc='best')\nplt.title('Pareto PDFs')\nplt.show()\n</code></pre>\n\n<p>And this is the output.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pdTkE.png\" rel=\"nofollow noreferrer\">Pareto PDFs</a></p>\n\n<p>So in scipy the parameter b works as the alpha, and scale as the xm, of the classic definition.</p>\n"}], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3513, "favorite_count": 0, "accepted_answer_id": 42261013, "answer_count": 2, "score": 3, "last_activity_date": 1576669033, "creation_date": 1487194514, "question_id": 42260519, "link": "https://stackoverflow.com/questions/42260519/defining-pareto-distribution-in-python-scipy", "title": "Defining Pareto distribution in Python scipy", "body": "<p>I'm trying to define a Pareto distribution using scypi in Python. I have values of alpha and xm in mind like they are in the classic definition of the distribution, for example in wikipedia: <a href=\"https://en.wikipedia.org/wiki/Pareto_distribution\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Pareto_distribution</a> \nLet's say I want to have alpha = 4 and xm = 3.\nHow do I initialize scipy.stats.pareto with those parameters?</p>\n\n<pre><code>import scipy.stats as sts\npareto_alpha = 4\npareto_xm = 3\npareto_rv = sts.pareto(???)\n</code></pre>\n\n<p>Here is the docs page of the pareto function <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pareto.html#scipy.stats.pareto\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pareto.html#scipy.stats.pareto</a>\nI can't find a clear description of the constructor there.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1487194146, "post_id": 42260400, "comment_id": 71678434, "body": "Where do you typically put <code>.lower()</code> for a <code>str</code>?"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 7, "creation_date": 1487195402, "post_id": 42260400, "comment_id": 71679104, "body": "Seven downvotes is a bit harsh for a first time poster.  The problem description is clear enough &quot;I need .lower() to work for one of my inputs, however I&#39;m not sure where to place it.&quot; The OP showed his code and showed that he knew he should be using <code>str.lower()</code>.  While the answer might seem obvious, it wasn&#39;t to the OP.  A bad beginner question would show no code and ask how to make something lowercase without researching enough to know that <code>str.lower()</code> would be the right way to do it.  Let&#39;s make this a more welcoming community and be more accepting of new users and beginning coders."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1487196106, "post_id": 42260400, "comment_id": 71679446, "body": "First let&#39;s talk about how not to use <code>lower()</code>.  Don&#39;t do <code>lower(&quot;RED&quot;)</code> to get <code>red</code> because lower is a string method, not a function.   Instead do <code>&quot;RED&quot;.lower()</code>.  Methods are accessed by adding a dot to an object reference and then the method name and parenthesis.  If you need to pass any arguments they would go in the parenthesis.  This also works <code>color = &quot;RED&quot;</code> then <code>color = color.lower()</code>.  Note that I assigned the result of <code>color.lower()</code> back to the name <code>color</code>.  The reason I did this is that Python strings are immutable.  Rather than mutating they return a new string."}, {"owner": {"reputation": 99, "user_id": 7427385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a2TacdVMy-o/AAAAAAAAAAI/AAAAAAAAABM/teNayNHR5Y4/photo.jpg?sz=128", "display_name": "A_Man", "link": "https://stackoverflow.com/users/7427385/a-man"}, "edited": false, "score": 0, "creation_date": 1487253799, "post_id": 42260400, "comment_id": 71708340, "body": "Thanks a lot more man! I really appreciate what you wrote. You made it clearer for me...@StevenRumbalski"}], "answers": [{"tags": [], "owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "is_accepted": true, "score": 4, "last_activity_date": 1487194191, "creation_date": 1487194191, "answer_id": 42260426, "question_id": 42260400, "link": "https://stackoverflow.com/questions/42260400/where-should-i-write-lower-for-it-to-work/42260426#42260426", "title": "Where should I write .lower() for it to work?", "body": "<p>Here:</p>\n\n<pre><code>phone_model = [\"s4\", \"s5\", \"note\", \"j5\", \"s6\", \"s7\", \"s6 edge\", \"s7 edge\", \"ace\", \"ace 2\"]\nmodel = input(\"Which model is your Samsung device?\").lower()\nif model in phone_model:\n    problems = input(\"OK, what is the problem with your device?\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "is_accepted": false, "score": 1, "last_activity_date": 1487194266, "creation_date": 1487194266, "answer_id": 42260449, "question_id": 42260400, "link": "https://stackoverflow.com/questions/42260400/where-should-i-write-lower-for-it-to-work/42260449#42260449", "title": "Where should I write .lower() for it to work?", "body": "<p>If you just do:</p>\n\n<pre><code>model = input(\"stuff\").lower()\n</code></pre>\n\n<p>it will automatically cast the input to lower when it is stored in model.</p>\n"}, {"tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1487194267, "creation_date": 1487194267, "answer_id": 42260450, "question_id": 42260400, "link": "https://stackoverflow.com/questions/42260400/where-should-i-write-lower-for-it-to-work/42260450#42260450", "title": "Where should I write .lower() for it to work?", "body": "<p>You can convert your intput <code>model</code> to lowercase when checks it whether in <code>phone_model</code></p>\n\n<p><code>if model.lower() in phone_model:</code></p>\n\n<p>In this way you keep the original input <code>model</code>, when debug is needed, you can check what exactly the user inputed</p>\n"}, {"tags": [], "owner": {"reputation": 33993, "user_id": 56555, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/epNWB.jpg?s=128&g=1", "display_name": "Kredns", "link": "https://stackoverflow.com/users/56555/kredns"}, "is_accepted": false, "score": 3, "last_activity_date": 1487196288, "last_edit_date": 1487196288, "creation_date": 1487194280, "answer_id": 42260456, "question_id": 42260400, "link": "https://stackoverflow.com/questions/42260400/where-should-i-write-lower-for-it-to-work/42260456#42260456", "title": "Where should I write .lower() for it to work?", "body": "<p>You will write lower at the end of the input like so:</p>\n\n<pre><code>model = input(\"Which model is your Samsung device?\").lower()\n</code></pre>\n\n<p>However I would recommend <em>not</em> doing that and instead changing to lowercase in your conditional statement that way you can preserve the original input. </p>\n\n<pre><code>if model.lower() in phone_model:\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 7427385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a2TacdVMy-o/AAAAAAAAAAI/AAAAAAAAABM/teNayNHR5Y4/photo.jpg?sz=128", "display_name": "A_Man", "link": "https://stackoverflow.com/users/7427385/a-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "closed_date": 1487194324, "accepted_answer_id": 42260426, "answer_count": 4, "score": 1, "last_activity_date": 1487196288, "creation_date": 1487194095, "last_edit_date": 1487194584, "question_id": 42260400, "link": "https://stackoverflow.com/questions/42260400/where-should-i-write-lower-for-it-to-work", "closed_reason": "Duplicate", "title": "Where should I write .lower() for it to work?", "body": "<p><strong>This question is different as I did not understand how the other answers were in accordance with my code. I did check the other questions first. I needed something specific to my code.</strong> \nI need .lower() to work for one of my inputs, however I'm not sure where to place it. I'm not acquainted when it comes to functions like these and so I require a little help.\nA part of my code is...</p>\n\n<pre><code>phone_model = [\"s4\", \"s5\", \"note\", \"j5\", \"s6\", \"s7\", \"s6 edge\", \"s7 edge\", \"ace\", \"ace 2\"]\nmodel = input(\"Which model is your Samsung device?\")\nif model in phone_model:\n    problems = input(\"OK, what is the problem with your device?\")\n</code></pre>\n\n<p>I would like the function to convert the answer to MODEL into lower case please.</p>\n"}, {"tags": ["python", "beautifulsoup", "urllib2"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 3, "creation_date": 1487194174, "post_id": 42260387, "comment_id": 71678451, "body": "Have a look at <a href=\"http://www.scrapy.org/\" rel=\"nofollow noreferrer\"><code>Scrapy</code></a>"}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 2, "creation_date": 1487195145, "post_id": 42260387, "comment_id": 71678948, "body": "Also have a look at your craigslist terms of use. Scraping craigslist is prohibited. It is right at the top, under &quot;USE&quot;.  <a href=\"https://www.craigslist.org/about/terms.of.use.en\" rel=\"nofollow noreferrer\">craigslist.org/about/terms.of.use.en</a>"}], "owner": {"reputation": 9, "user_id": 4211686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01dcd92b018d932b9db32eeb8a1cf473?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/4211686/topher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487204582, "creation_date": 1487194046, "last_edit_date": 1487204582, "question_id": 42260387, "link": "https://stackoverflow.com/questions/42260387/python-using-beautifulsoup4-and-urllib2-to-make-web-spider", "title": "Python Using BeautifulSoup4 and urllib2 to make web spider", "body": "<p>So here is my code so far.</p>\n\n<pre><code>import urlparse\nimport urllib2\nc_s_l = [\"anchorage\", \"fairbanks\",\"kenai\",\"juneau\"]\n#Craigslist state list\n\n#for city in c_s_l:                      #insert from c_s_l into url[] in city\n    #print \"https://%s.craigslist.org/search/cta?query=sprinter\" % city #substitutes city in city list in url\nfor city in c_s_l:                      #insert from c_s_l into url[] in city\n    base = \"https://%s.craigslist.org\"% city #substitutes city in city list in url\n    url = base + \"/search/cta?query=sprinter\" \n    response = urllib2.urlopen(url)\n    html = response.read()\n    soup = BeautifulSoup(html, 'html.parser')\n    for a in soup.find_all('a', class_='result-title hdrlnk'):\n        print a\n</code></pre>\n\n<p>I eventually would like to scale up to all of craigslist. But right now I'm trying to figure out how to eliminate things I don't want. Ie Things that are Sprinter vans. thanks for advice and help</p>\n"}, {"tags": ["python", "list", "enumerate"], "comments": [{"owner": {"reputation": 447, "user_id": 5556887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb86c8d689592c71cc88a42c7981c252?s=128&d=identicon&r=PG&f=1", "display_name": "bouletta", "link": "https://stackoverflow.com/users/5556887/bouletta"}, "edited": false, "score": 1, "creation_date": 1487194458, "post_id": 42260377, "comment_id": 71678613, "body": "I&#39;m unsure about the error but in any case I don&#39;t think your program will do what you expect. You have a for loop with a return statement. This means that the program will only ever go ONCE in the loop and return. your entire code block is equivalent to <code>return (history_lists[0][-1] + history_lists[0][-2])&#47;2.0</code> . Maybe you want to print instead of return? Or stored in somewhere and print the whole thing at the end of the loop?"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 1, "creation_date": 1487194520, "post_id": 42260377, "comment_id": 71678645, "body": "Why <code>return</code>? If you&#39;re looking to make a generator then use <code>yield</code>. Also, don&#39;t name a variable <code>list</code>. <code>list(map(lambda x: sum(x[-2:])&#47;2.0, history_lists))</code> should get you far."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487194593, "post_id": 42260377, "comment_id": 71678679, "body": "the error is not located in the code you provided. Full stacktrace and code please?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 1, "creation_date": 1487194639, "post_id": 42260377, "comment_id": 71678696, "body": "I just ran this and didn&#39;t have any errors. Also change <code>return</code> to <code>print</code> and don&#39;t use variables native to Python as names for your other variables."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487198069, "post_id": 42260501, "comment_id": 71680430, "body": "note: the answer must be in python language, not p++ (I just made that up). That&#39;s too bad because I&#39;m willing to encourage first-time posters..."}, {"owner": {"reputation": 7, "user_id": 7431233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf0bbbae77167166383a03c6c26156e?s=128&d=identicon&r=PG&f=1", "display_name": "techkris", "link": "https://stackoverflow.com/users/7431233/techkris"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487254345, "post_id": 42260501, "comment_id": 71708799, "body": "answer syntax corrected. I&#39;ve been writing a lot of c# lately so it kind of got mixed in there, but should be right now."}], "tags": [], "owner": {"reputation": 7, "user_id": 7431233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf0bbbae77167166383a03c6c26156e?s=128&d=identicon&r=PG&f=1", "display_name": "techkris", "link": "https://stackoverflow.com/users/7431233/techkris"}, "is_accepted": false, "score": -2, "last_activity_date": 1487254588, "last_edit_date": 1487254588, "creation_date": 1487194463, "answer_id": 42260501, "question_id": 42260377, "link": "https://stackoverflow.com/questions/42260377/python-locate-items-in-lists-of-list-and-float-object-is-not-subscriptable/42260501#42260501", "title": "python locate items in lists of list and &#39;float&#39; object is not subscriptable", "body": "<p>i think you want to do something more along these lines...</p>\n\n<pre><code>average = 0\nfor list in history_lists:\n    final += (list[-1] + list[-2])/2\nprint average\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1444, "user_id": 6888191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/882ac7ceca6fcf2791985e837e1e12a2?s=128&d=identicon&r=PG&f=1", "display_name": "B. Eckles", "link": "https://stackoverflow.com/users/6888191/b-eckles"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194856, "last_edit_date": 1487194856, "creation_date": 1487194528, "answer_id": 42260525, "question_id": 42260377, "link": "https://stackoverflow.com/questions/42260377/python-locate-items-in-lists-of-list-and-float-object-is-not-subscriptable/42260525#42260525", "title": "python locate items in lists of list and &#39;float&#39; object is not subscriptable", "body": "<p>Using your style, instead of more Pythonic approaches:</p>\n\n<pre><code>history_lists=[[1,2,3,4],[2,3,1],[5,8,0,1]]\naverages = []\n\n# Don't use \"list\" as a variable name since that's a keyword\nfor lst in history_lists:\n    avg = (lst[-1] + lst[-2]) / 2.0\n    averages.append(avg)\n\nprint averages\n</code></pre>\n\n<p>Alternatively, if you want all of them averaged:</p>\n\n<pre><code>history_lists=[[1,2,3,4],[2,3,1],[5,8,0,1]]\ntotal_count = 0\ntotal_sum = 0\n\nfor lst in history_lists:\n    total_count += 2.0\n    total_sum += lst[-1] + lst[-2]\n\ntotal_average = total_sum / total_count\n\nprint total_average\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 704, "user_id": 1169248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2309ad5a69e4c0d56b4fb4670f9597c8?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1169248/ben"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487195107, "post_id": 42260559, "comment_id": 71678928, "body": "Ah yes, missed the parentheses, thanks for the edit."}], "tags": [], "owner": {"reputation": 704, "user_id": 1169248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2309ad5a69e4c0d56b4fb4670f9597c8?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1169248/ben"}, "is_accepted": false, "score": 1, "last_activity_date": 1487195126, "last_edit_date": 1487195126, "creation_date": 1487194695, "answer_id": 42260559, "question_id": 42260377, "link": "https://stackoverflow.com/questions/42260377/python-locate-items-in-lists-of-list-and-float-object-is-not-subscriptable/42260559#42260559", "title": "python locate items in lists of list and &#39;float&#39; object is not subscriptable", "body": "<p>You can achieve this succinctly with a list comprehension:</p>\n\n<pre><code>history_lists=[[1,2,3,4],[2,3,1],[5,8,0,1]]\naverages=[(history_list[-1] + history_list[-2]) / 2.0 for history_list in history_lists]\n</code></pre>\n\n<p>Your error was likely because whatever is calling your function is expecting a <code>list</code> to be returned but since you're using <code>return</code> in your loop it's instead receiving a single float. This will be fixed by simply returning the <code>averages</code> list as generated above.</p>\n\n<p><strong>Edit: Added missing parentheses</strong></p>\n"}], "owner": {"reputation": 63, "user_id": 7303416, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/44179b34cfbf092c69e6bdda0ce7f4b5?s=128&d=identicon&r=PG&f=1", "display_name": "key", "link": "https://stackoverflow.com/users/7303416/key"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1487254588, "creation_date": 1487194024, "last_edit_date": 1487196949, "question_id": 42260377, "link": "https://stackoverflow.com/questions/42260377/python-locate-items-in-lists-of-list-and-float-object-is-not-subscriptable", "title": "python locate items in lists of list and &#39;float&#39; object is not subscriptable", "body": "<p>I'm trying to locate items in lists of list and use the items to do calculation. But <code>TypeError: 'float' object is not subscriptable</code> occurred. </p>\n\n<p>Here's the question/lists:</p>\n\n<pre><code>history_lists=[[1,2,3,4],[2,3,1],[5,8,0,1]]\n</code></pre>\n\n<p>I want to locate the last two item in each list in <code>history_lists</code>, and calculate the average.</p>\n\n<p>Here's my codes:</p>\n\n<pre><code>def get_question(self):\n\n    combined_lists_history.append(var1)\n    combined_lists_history.append(var2)\n\n    history_lists = [[] for _for _ in range(max(combined_lists_history[1::2]))]\n\n    for i in range(1, len(combined_lists_history),2):\n           history_lists[combined_lists_history[i]-1].append(combined_lists_history[i-1])\n\n # this codes are for recreating a list of lists\n # combined_lists_history = [1,**1**,3,**1**,5,**3**,4,**1**,2,**2**,3,**2**,1,**2**,8,**3**,0,**3**,1,**3**,2,**1**,]\n # history_lists=[[1,2,3,4],[2,3,1],[5,8,0,1]]\n\ndef get_avg(self):\n\n    for i, lst in enumerate(history_lists):\n           (history_lists[i][-1] + history_lists[i][-2])/2.0 \n          # for each list in history_lists, retrieve last two item\n</code></pre>\n"}, {"tags": ["python", "django", "apache", "permissions", "mod-wsgi"], "comments": [{"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 1, "creation_date": 1487198031, "post_id": 42260353, "comment_id": 71680414, "body": "Your <code>VirtualHost</code> is likely not active or not matched by your request. It is therefore falling back to the default <code>VirtualHost</code> (first found by Apache), which maps to default <code>DocumentRoot</code>. That is then failing because you removed the directory default <code>DocumentRoot</code> refers to as well as directives which permit access to it."}, {"owner": {"reputation": 639, "user_id": 2322869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/822471d05ee2f022f929267067693525?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2322869/george"}, "reply_to_user": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1487199363, "post_id": 42260353, "comment_id": 71680965, "body": "@GrahamDumpleton, oh my god, you are right! The problem was that it somehow matched the <code>000-default.conf</code> file instead of needed one. Thank you, Graham Dumpleton! I&#39;m gonna donate mod_wsgi project now :)"}], "owner": {"reputation": 639, "user_id": 2322869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/822471d05ee2f022f929267067693525?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2322869/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1290, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1487194326, "creation_date": 1487193946, "last_edit_date": 1487194326, "question_id": 42260353, "link": "https://stackoverflow.com/questions/42260353/client-denied-by-server-configuration-django-app-with-mod-wsgi-and-apache-2-4", "title": "Client denied by server configuration. Django app with mod_wsgi and apache 2.4", "body": "<p>I can't configure apache 2.4 to run wsgi application on a clean Ubuntu 16.04 installation. I use Python 3.5 and mod_wsgi 3.5 (compiled manually for both my Python and Apache) I have successfully done this before a lot of times, this time I have no clue what is the problem.</p>\n\n<p>My app's config looks like this:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    WSGIScriptAlias / /var/django/myapp/myapp/wsgi.py\n    WSGIDaemonProcess myapp python-home=/var/.virtualenvs/myapp python-path=/var/django/myapp\n    WSGIProcessGroup myapp\n\n    ServerName mydomain.com\n    ErrorLog /var/log/apache2/myapp_error.log\n\n    alias /static /var/django/myapp/static/\n    &lt;Directory \"/var/django/myapp/static/\"&gt;\n            Require all granted\n    &lt;/Directory&gt;\n    &lt;Directory \"/var/django/myapp/myapp\"&gt;\n            &lt;Files \"wsgi.py\"&gt;\n                    Require all granted\n            &lt;/Files&gt;\n    &lt;/Directory&gt;\n</code></pre>\n\n<p></p>\n\n<p>I always use the exact same configuration for all my Django projects, but now, every time I go to mydomain.com, I get the 403 Forbidden page. As you can see, I configured apache to log errors to <code>myapp_error.log</code>, but it logs to regular <code>error.log</code> instead:</p>\n\n<pre><code>AH01630: client denied by server configuration: /var/www/html\n</code></pre>\n\n<p>Also, I don't understand why it says <code>/var/www/html</code>. I deleted <code>html</code> folder and even commented out</p>\n\n<pre><code>#&lt;Directory /var/www/&gt;\n#       Options Indexes FollowSymLinks\n#       AllowOverride None\n#       Require all granted\n#&lt;/Directory&gt; \n</code></pre>\n\n<p>in Apache main config file, but I still get this messages. I checked some other config files like <code>000-default.conf</code> but found nothing related to 'html' folder.</p>\n\n<p>I enabled LogLevel info and the following lines appeared in <code>myapp_error.log</code></p>\n\n<pre><code>[Wed Feb 15 21:32:15.006425 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Attach interpreter ''.\n[Wed Feb 15 21:32:15.024194 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Adding '/var/django/myapp' to path.\n[Wed Feb 15 22:50:13.237501 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Shutdown requested 'myapp'.\n[Wed Feb 15 22:50:13.237561 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Stopping process 'myapp'.\n[Wed Feb 15 22:50:13.237569 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Destroying interpreters.\n[Wed Feb 15 22:50:13.237573 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Cleanup interpreter ''.\n[Wed Feb 15 22:50:13.241445 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Terminating Python.\n[Wed Feb 15 22:50:13.245683 2017] [:info] [pid 9701:tid 140288059017088] mod_wsgi (pid=9701): Python has shutdown.\n</code></pre>\n\n<p>This means that Python is running and mod_wsgi is fine.</p>\n\n<p>I think this can be some kind of permission issue, but I can't figure it out exactly. <code>/var/django</code> folder is owned by me:django. www-data user is also in django group. </p>\n\n<p><code>wsgi.py</code> file permissions are</p>\n\n<pre><code>-rwxr-x--x  1 me django  400 Jan 20 15:32 wsgi.py\n</code></pre>\n\n<p>r-x should be enough, right? \nI tried making wsgi.py file's permissions 777, but it didn't work.</p>\n\n<p>And the funniest thing that IT USED TO WORK on this server with the same configurations, and then stopped. Not sure what could go wrong. I executed git pull command to update my app's source code, did some other stuff and then I got that nasty 403 error. I can't fix it for two days. Please help.</p>\n"}, {"tags": ["python", "recursion", "tuples"], "comments": [{"owner": {"reputation": 975, "user_id": 6078401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb74e4a1d8acc16d37b3f01f917b2ae?s=128&d=identicon&r=PG", "display_name": "daragua", "link": "https://stackoverflow.com/users/6078401/daragua"}, "edited": false, "score": 0, "creation_date": 1487194025, "post_id": 42260321, "comment_id": 71678385, "body": "Please post your code attempt."}, {"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "reply_to_user": {"reputation": 975, "user_id": 6078401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb74e4a1d8acc16d37b3f01f917b2ae?s=128&d=identicon&r=PG", "display_name": "daragua", "link": "https://stackoverflow.com/users/6078401/daragua"}, "edited": false, "score": 0, "creation_date": 1487194171, "post_id": 42260321, "comment_id": 71678449, "body": "x = (1,2,(&#39;a&#39;, &#39;b&#39;, (6,9,7)), 6,(&#39;$&#39;,&#39;@&#39;)) for y in x: \tprint y"}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1487194688, "post_id": 42260321, "comment_id": 71678714, "body": "If you want recursion you&#39;ll need a function. Start with writing a function that accepts a <code>tuple</code> as a parameter and then prints each tuple entry."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487195152, "post_id": 42260595, "comment_id": 71678951, "body": "Can you please explain this line what that is doing? if hasattr(base_element, &#39;<b>iter</b>&#39;):"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 1, "creation_date": 1487195217, "post_id": 42260595, "comment_id": 71678992, "body": "@dino110 : I suppose you refer to the second line. It basically checks if <code>base_element</code> is iterable (list, tuple, dict, ...)"}, {"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487196342, "post_id": 42260595, "comment_id": 71679576, "body": "Ok I just  tried it it goes in infinite loop cursion.............recursionExample.py&quot;, line 4, in print_recursive     print_recursive(element)"}, {"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487196389, "post_id": 42260595, "comment_id": 71679595, "body": "If I don&#39;t use recursion what is a diff method of doing this I hav not used the function hasattr"}, {"owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "reply_to_user": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487196474, "post_id": 42260595, "comment_id": 71679642, "body": "@dino110 it means that you have an error in your file. When I ran this exemple it works."}, {"owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "reply_to_user": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487196714, "post_id": 42260595, "comment_id": 71679744, "body": "@dino110 without recursion you should use loop for every nested level. If you don&#39;t want to use hasattr(base_element, &#39;<b>iter</b>&#39;) you can check by type (e.g. tuple and list) or collections.Iterable"}, {"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487197113, "post_id": 42260595, "comment_id": 71679963, "body": "@OleksandrDashkov yup worked in other editor. Question what <b>iter</b> doing?"}, {"owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "reply_to_user": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487197746, "post_id": 42260595, "comment_id": 71680290, "body": "@dino110 Eric already answered you, but I can repeat. It&#39;s a method of object which return an iterator. You could read more <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__iter__\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/datamodel.html#object.__iter__</a>"}, {"owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "edited": false, "score": 0, "creation_date": 1487197943, "post_id": 42260595, "comment_id": 71680370, "body": "@OleksandrDashkov Thanks for providing the guidance I&#39;m new and learning basic of python. Really appreciate your help."}], "tags": [], "owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194826, "creation_date": 1487194826, "answer_id": 42260595, "question_id": 42260321, "link": "https://stackoverflow.com/questions/42260321/python-using-recursion/42260595#42260595", "title": "python: Using recursion", "body": "<p>If you really want to use recursion, you could use something like this:</p>\n\n<pre><code>def print_recursive(base_element):                                \n     if hasattr(base_element, '__iter__'):\n         for element in base_element:\n             print_recursive(element)\n     else:\n         print(base_element)\nprint_recursive((1,2,('a', 'b', (6,9,7)), 6,('$','@')))\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7571410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5da8ea19c70989fa74b3b9195e409e?s=128&d=identicon&r=PG", "display_name": "dino110", "link": "https://stackoverflow.com/users/7571410/dino110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1487194826, "creation_date": 1487193798, "last_edit_date": 1487194074, "question_id": 42260321, "link": "https://stackoverflow.com/questions/42260321/python-using-recursion", "title": "python: Using recursion", "body": "<p>I was recently asked to print a nested tuple using recursion logic. I'm not sure about recursion. \nI just learning python and very new to this topic please explain.</p>\n\n<p>Here is question given to me.</p>\n\n<p>Print a nested tuple in a separate line using recursion:</p>\n\n<pre><code>Print (1,2,('a', 'b', (6,9,7)), 6,('$','@'))                        \n</code></pre>\n\n<p>Each item should print in the line</p>\n\n<p><a href=\"https://i.stack.imgur.com/8NXtB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8NXtB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1487193881, "post_id": 42260305, "comment_id": 71678305, "body": "Is purchase time a column? Can you post df.head() that gives a view of all the columns?"}, {"owner": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1487275974, "post_id": 42260305, "comment_id": 71724027, "body": "Purchase time is not a column. The other columns were not relevant to the question at hand. The other columns are source, medium, order value, order number.."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "edited": false, "score": 0, "creation_date": 1487212720, "post_id": 42260775, "comment_id": 71684880, "body": "Great! It seems to have worked, but can you explain this part a little more?  <code>purchase_time = rows.loc[rows[&#39;type_&#39;] == &#39;Purchase&#39;, &#39;time_&#39;].iloc[0]</code>  its pulling values where <code>type_</code> is <code>Purchase</code>, but what is the <code>time_</code> referencing? I&#39;m also not sure what the <code>.iloc[0]</code> at the end is doing. Thank you very much for this!"}, {"owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "reply_to_user": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "edited": false, "score": 1, "creation_date": 1487213384, "post_id": 42260775, "comment_id": 71685075, "body": "@Christopher please see my edit. I&#39;ve expanded the one-liner in <code>after_purchase</code> which should hopefully make it more clear what&#39;s happening. Let me know if I need to elaborate more."}, {"owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "reply_to_user": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "edited": false, "score": 1, "creation_date": 1487213496, "post_id": 42260775, "comment_id": 71685099, "body": "The indexing syntax is <code>rows.loc[row_labels, column_labels]</code> where I had used a boolean mask as <code>row_labels</code> and <code>&#39;time&#39;</code> as <code>column_labels</code>. Basically selects a subset of rows and a single column."}, {"owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "reply_to_user": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "edited": false, "score": 1, "creation_date": 1487213572, "post_id": 42260775, "comment_id": 71685121, "body": "The <code>iloc[0]</code> was originally meant to take the first timestamp from the resulting list of purchase timestamps. However, I have updated the answer to use <code>min()</code> instead to ensure that the <i>earliest</i> timestamp is grabbed, not just the first one (in case your events are not chronological). If you can guarantee only one purchase per device, then switch back to using <code>iloc[0]</code>, since it&#39;s faster."}, {"owner": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "edited": false, "score": 0, "creation_date": 1487275820, "post_id": 42260775, "comment_id": 71723935, "body": "Thanks so much for the thorough explanation!"}], "tags": [], "owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "is_accepted": true, "score": 2, "last_activity_date": 1487213330, "last_edit_date": 1487213330, "creation_date": 1487195574, "answer_id": 42260775, "question_id": 42260305, "link": "https://stackoverflow.com/questions/42260305/python-return-rows-after-a-certain-date-where-a-condition-is-met/42260775#42260775", "title": "Python - Return rows after a certain date where a condition is met", "body": "<p>First, define a function to filter the rows in each group, e.g.</p>\n\n<pre><code>def after_purchase(rows):\n    # boolean mask indicating rows which are purchases\n    is_purchase = rows.type_ == 'Purchase'\n\n    # select timestamps from all purchases\n    purchase_times = rows.loc[is_purchase, 'time']\n\n    # grab the first (earliest) purchase timestamp\n    first_purchase_time = purchase_times.min()\n\n    # return all rows which occurred after the first purchase\n    return rows.loc[rows.time &gt; first_purchase_time]\n</code></pre>\n\n<p>Then, group your data frame by the device ID and apply the function to each group.</p>\n\n<pre><code>df.groupby('deviceid').apply(after_purchase)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>            type_  deviceid   campaign_                time\ndeviceid                                                   \ndevice_1 2  Click  device_1  Campaign_5 2016-11-19 14:17:00\n         3  Click  device_1  Campaign_1 2016-11-19 14:30:00\ndevice_2 6  Click  device_2  Campaign_2 2016-11-10 05:17:00\n         7  Click  device_2  Campaign_3 2016-11-12 19:19:00\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 7556913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noAEuQfW868/AAAAAAAAAAI/AAAAAAAAAFk/BP2BkoGKeTo/photo.jpg?sz=128", "display_name": "Christopher_M", "link": "https://stackoverflow.com/users/7556913/christopher-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 42260775, "answer_count": 1, "score": 3, "last_activity_date": 1487213330, "creation_date": 1487193724, "last_edit_date": 1487196181, "question_id": 42260305, "link": "https://stackoverflow.com/questions/42260305/python-return-rows-after-a-certain-date-where-a-condition-is-met", "title": "Python - Return rows after a certain date where a condition is met", "body": "<p>I have a data frame that is approximately 350k rows and 12 columns of clickstream data. Below is a simplified snippet of what the data looks like. For each device I'd like to return all rows that appear after the purchase time.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   type_  deviceid   campaign_            time\n   Click  device_1  Campaign_1  11/16/16 14:07\nPurchase  device_1  Campaign_6  11/18/16 16:26\n   Click  device_1  Campaign_5  11/19/16 14:17\n   Click  device_1  Campaign_1  11/19/16 14:30\n   Click  device_2  Campaign_4    11/6/16 7:00\nPurchase  device_2  Campaign_2   11/9/16 21:56\n   Click  device_2  Campaign_2   11/10/16 5:17\n   Click  device_2  Campaign_3  11/12/16 19:19\n</code></pre>\n\n<p>I've tried using <code>.loc</code> to pull the results I need, but to no avail. Can anyone point me in the right direction or let me know what I need to do?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1487193957, "post_id": 42260267, "comment_id": 71678348, "body": "See also <a href=\"https://docs.python.org/2/library/calendar.html\" rel=\"nofollow noreferrer\"><b><code>calendar</code></b></a>"}], "answers": [{"tags": [], "owner": {"reputation": 4283, "user_id": 2148023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/356193279a082d3077d672f63bfc6c33?s=128&d=identicon&r=PG&f=1", "display_name": "Carles Mitjans", "link": "https://stackoverflow.com/users/2148023/carles-mitjans"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194055, "creation_date": 1487194055, "answer_id": 42260391, "question_id": 42260267, "link": "https://stackoverflow.com/questions/42260267/converting-string-from-csv-to-datetime-to-tell-if-it-is-a-specific-week-day/42260391#42260391", "title": "Converting string from .csv to datetime to tell if it is a specific week day", "body": "<p>If the date is always at position 2, you can use <code>datetime.strptime()</code> function to retrieve the weekday and see if it is friday.</p>\n\n<pre><code>from datetime import datetime\nl = ['1555', 'A rotary phone', '6/25/16', '$186 ']\nt = datetime.strptime(l[2], \"%m/%d/%y\")\nt.weekday() # Will return 0 for Monday, 1 Tuesday and so on\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 988082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7ca6a79ceaf492c0617e61d67e74dfa?s=128&d=identicon&r=PG", "display_name": "ozking", "link": "https://stackoverflow.com/users/988082/ozking"}, "is_accepted": false, "score": 1, "last_activity_date": 1487195025, "last_edit_date": 1487195025, "creation_date": 1487194068, "answer_id": 42260392, "question_id": 42260267, "link": "https://stackoverflow.com/questions/42260267/converting-string-from-csv-to-datetime-to-tell-if-it-is-a-specific-week-day/42260392#42260392", "title": "Converting string from .csv to datetime to tell if it is a specific week day", "body": "<p>You can use <code>datetime.datetime.strptime</code>: (<a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\" title=\"documentation\">documentation</a>)</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt; datetime_obj = datetime.strptime('6/25/16', '%m/%d/%y')\n&gt;&gt;&gt; datetime_obj.weekday()\n5\n</code></pre>\n\n<p>Function:</p>\n\n<pre><code>def is_friday(l):\n    return datetime.strptime(l[2], '%m/%d/%y') == 5\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>is_friday = lambda l: datetime.strptime(l[2], '%m/%d/%y') == 5\n\n&gt;&gt;&gt; is_friday(['1555', 'A rotary phone', '6/25/16', '$186 '])\nFalse\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 4492176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QFlMs4uFciQ/AAAAAAAAAAI/AAAAAAAATes/98-ik3qshfs/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/4492176/evan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194492, "creation_date": 1487194492, "answer_id": 42260515, "question_id": 42260267, "link": "https://stackoverflow.com/questions/42260267/converting-string-from-csv-to-datetime-to-tell-if-it-is-a-specific-week-day/42260515#42260515", "title": "Converting string from .csv to datetime to tell if it is a specific week day", "body": "<p>You can use weekday() found in datetime (<a href=\"https://docs.python.org/2/library/datetime.html\" rel=\"nofollow noreferrer\">documentation</a>).</p>\n\n<pre><code>import datetime\n#                          this string manipulation adds the '20' to make the date '2016'\ndatetime.datetime.strptime(lineOfCSV[2][:-2]+'20'+lineOfCSV[2][-2:], \"%m/%d/%Y\").date().weekday()\n</code></pre>\n\n<p>This will return an int which matches to a weekday:\n0: Monday\n1: Tuesday\n2: Wednesday\n3: Thursday\n4: Friday\n5: Saturday\n6: Sunday</p>\n"}], "owner": {"reputation": 23, "user_id": 7502669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57047ad7d2e63fa48522e71317535f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/7502669/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1487195025, "creation_date": 1487193553, "question_id": 42260267, "link": "https://stackoverflow.com/questions/42260267/converting-string-from-csv-to-datetime-to-tell-if-it-is-a-specific-week-day", "title": "Converting string from .csv to datetime to tell if it is a specific week day", "body": "<p>I am reading in a csv file and printing it in list form by line so it prints like this:</p>\n\n<pre><code>['1555', 'A rotary phone', '6/25/16', '$186 ']\n['1444', 'A top hat', '10/5/16', '$77 ']\n['1666', 'A turtle', '9/28/16', '$198 ']\n</code></pre>\n\n<p>What code can i write to take the date from each line and determine whether that date for that entry is a friday using the datetime module? I am working on my skills and this would help a lot. thanks.</p>\n"}, {"tags": ["python", "keras", "keras-layer", "cv2"], "answers": [{"comments": [{"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487262360, "post_id": 42262632, "comment_id": 71715335, "body": "I&#39;ve run into the same problem as before.  At prediction time, I get an error that <code>ktf</code> is not found.  I applied the same import statement in my prediction script of course.  I also changed to a full path as <code>keras.backend.tf</code> and still <code>NameError</code>: name <code>keras</code> is not defined"}, {"owner": {"reputation": 8311, "user_id": 2217210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPiFz.jpg?s=128&g=1", "display_name": "indraforyou", "link": "https://stackoverflow.com/users/2217210/indraforyou"}, "reply_to_user": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487265262, "post_id": 42262632, "comment_id": 71717604, "body": "@SamHammamy It seems the environment where you are running the predict script don&#39;t have keras. Try importing only keras and see. If it works see which backend its using. Also instead of getting <code>tf</code> from keras backend, you can use <code>import tensorflow as tf</code> and use the same."}, {"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487275699, "post_id": 42262632, "comment_id": 71723857, "body": "Of course it has <code>keras</code>.  I ran the prediction by resizing in the <code>generator</code> for weeks.  It is however a Raspberry Pi board and I installed TensorFlow on it from a custom pip wheel I found online.  As I said it works fine if I resize in the generator.  I also found this solution which I need to investigate today <a href=\"https://gist.github.com/bzamecnik/a33052ec46ee7efeb217856d98a4fb5f\" rel=\"nofollow noreferrer\">gist.github.com/bzamecnik/a33052ec46ee7efeb217856d98a4fb5f</a>"}, {"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487276786, "post_id": 42262632, "comment_id": 71724494, "body": "I could get this to work either <code>model.add(Lambda(lambda image: K.resize_images(image, 240.&#47;64, 340.&#47;64, &#39;tf&#39;)))</code>  I get a resource exhausted error during training even with only 32 images in a batch"}, {"owner": {"reputation": 8311, "user_id": 2217210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPiFz.jpg?s=128&g=1", "display_name": "indraforyou", "link": "https://stackoverflow.com/users/2217210/indraforyou"}, "reply_to_user": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487294499, "post_id": 42262632, "comment_id": 71731873, "body": "There are few things which you can do.. train on system. when you have a good set of weights use it to run on the embedded system.. this will decrease the memory requirement on the embedded system by the batch size. 2nd use theano backend.. tensorflow is more memory hungry."}, {"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1487296245, "post_id": 42262632, "comment_id": 71732375, "body": "I was training on a <code>p2.xlarge</code> instance on AWS.  I know I wasn&#39;t clear in saying that.  I think the problem is on the Pi at prediction time.  Anyhow, I don&#39;t want to spend too much time on this.  If I resize in my generator and resize on the Pi before prediction, all is well.  Thanks again!"}], "tags": [], "owner": {"reputation": 8311, "user_id": 2217210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPiFz.jpg?s=128&g=1", "display_name": "indraforyou", "link": "https://stackoverflow.com/users/2217210/indraforyou"}, "is_accepted": true, "score": 25, "last_activity_date": 1529579054, "last_edit_date": 1529579054, "creation_date": 1487204727, "answer_id": 42262632, "question_id": 42260265, "link": "https://stackoverflow.com/questions/42260265/resizing-an-input-image-in-a-keras-lambda-layer/42262632#42262632", "title": "Resizing an input image in a Keras Lambda layer", "body": "<p>If you are using tensorflow backend then you can use <code>tf.image.resize_images()</code> function to resize the images in <code>Lambda</code> layer. </p>\n\n<p>Here is a small example to demonstrate the same:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport scipy.ndimage\nimport matplotlib.pyplot as plt\n\nfrom keras.layers import Lambda, Input\nfrom keras.models import Model\nfrom keras.backend import tf as ktf\n\n\n# 3 channel images of arbitrary shape\ninp = Input(shape=(None, None, 3))\ntry:\n    out = Lambda(lambda image: ktf.image.resize_images(image, (128, 128)))(inp)\nexcept :\n    # if you have older version of tensorflow\n    out = Lambda(lambda image: ktf.image.resize_images(image, 128, 128))(inp)\n\nmodel = Model(input=inp, output=out)\nmodel.summary()\n\nX = scipy.ndimage.imread('test.jpg')\n\nout = model.predict(X[np.newaxis, ...])\n\nfig, Axes = plt.subplots(nrows=1, ncols=2)\nAxes[0].imshow(X)\nAxes[1].imshow(np.int8(out[0,...]))\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17210, "favorite_count": 5, "accepted_answer_id": 42262632, "answer_count": 1, "score": 21, "last_activity_date": 1529579054, "creation_date": 1487193549, "last_edit_date": 1529577298, "question_id": 42260265, "link": "https://stackoverflow.com/questions/42260265/resizing-an-input-image-in-a-keras-lambda-layer", "title": "Resizing an input image in a Keras Lambda layer", "body": "<p>I would like my <code>keras</code> model to resize the input image using cv2 or similar.  </p>\n\n<p>I have seen the use of <code>ImageGenerator</code>, but I would prefer to write my own generator and simply resize the image in the first layer with <code>keras.layers.core.Lambda</code>.</p>\n\n<p>How would I do this?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 428, "user_id": 988082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7ca6a79ceaf492c0617e61d67e74dfa?s=128&d=identicon&r=PG", "display_name": "ozking", "link": "https://stackoverflow.com/users/988082/ozking"}, "edited": false, "score": 0, "creation_date": 1487193602, "post_id": 42260234, "comment_id": 71678192, "body": "Is your path to csv relative or absolute?"}, {"owner": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 1, "creation_date": 1487193617, "post_id": 42260234, "comment_id": 71678203, "body": "The first line of Example A is problematic: <code>Outfile.write = open (path_to_csv, &quot;w+&quot;)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487194190, "post_id": 42260234, "comment_id": 71678465, "body": "are you sure B even runs when launched through A? Is A creating the file properly / not crashing?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1487195213, "post_id": 42260234, "comment_id": 71678989, "body": "It should be easy to post a runnable example that we can commit on. Bugs like <code>Outfile.write = open (path_to_csv, &quot;w+&quot;)</code> just confuse things!"}, {"owner": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "edited": false, "score": 0, "creation_date": 1487196922, "post_id": 42260234, "comment_id": 71679856, "body": "Thanks for pointing out the mistake here, However I have not made that mistake in the actual code."}, {"owner": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "reply_to_user": {"reputation": 428, "user_id": 988082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7ca6a79ceaf492c0617e61d67e74dfa?s=128&d=identicon&r=PG", "display_name": "ozking", "link": "https://stackoverflow.com/users/988082/ozking"}, "edited": false, "score": 0, "creation_date": 1487196944, "post_id": 42260234, "comment_id": 71679871, "body": "@ozking It is an absolute path."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1487197220, "post_id": 42260234, "comment_id": 71680023, "body": "BTW, per <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP-8</a>, the first letter of <i>class</i> names should be capitalized, but <code>Outfile</code> isn&#39;t a class -- it&#39;s just a regular object, so its name should be all-lowercase."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1487197349, "post_id": 42260234, "comment_id": 71680088, "body": "To emphasize what tdelaney said -- if you&#39;d tested that your example generated the <i>exact same error</i> when run, and provided everything needed to let someone run the test themselves, then we could could know for a fact whether a given answer solves your problem, instead of needing to guess at whether something is a typo. See <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> for guidelines on asking a question in such a way that others can test their answers."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "edited": false, "score": 0, "creation_date": 1487197483, "post_id": 42260374, "comment_id": 71680155, "body": "Ah, the solution is always simple with Python, isn&#39;t it? As you pointed out correctly, I didnt make Outfile.write mistake ( a typo) but guilty on Outfile.close Surprising thing is python didnt raise exception and let it run. I have almost given up on why it isn&#39;t working before you came to my rescue. Thanks for the solution. It works!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "edited": false, "score": 0, "creation_date": 1487197743, "post_id": 42260374, "comment_id": 71680287, "body": "on windows you&#39;d have an exception because there are write file locks that prevent other process (or the same process) to read a non-closed file being written. In Linux, no such lock, so I suppose that buffering made that the file was not written at all to disk until process ends. Glad it worked for you."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "edited": false, "score": 0, "creation_date": 1487262888, "post_id": 42260374, "comment_id": 71715805, "body": "@Shaardyy, why would it be an exception? Function objects have a value; if you refer to a function without calling it, you&#39;re looking up that value -- it&#39;s completely valid syntax, and has a useful meaning (albeit not so useful in the case, like here, where the looked-up value is immediately thrown away, and where the lookup itself is done without side effects)."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1487194017, "creation_date": 1487194017, "answer_id": 42260374, "question_id": 42260234, "link": "https://stackoverflow.com/questions/42260234/cant-access-content-of-a-file-while-using-subprocess-python/42260374#42260374", "title": "cant access content of a file while using subprocess python", "body": "<p><code>Outfile.write = open (path_to_csv, \"w+\")</code> is probably a typo, next line could work as is. You probably mean <code>Outfile = open (path_to_csv, \"w+\")</code></p>\n\n<p>Then the problem is that you don't actually close your file:</p>\n\n<pre><code>Outfile.close\n</code></pre>\n\n<p>accomplishes nothing. You need:</p>\n\n<pre><code>Outfile = open (path_to_csv, \"w+\")\nOutfile.write(string_to_be_written)\nOutfile.close()\n</code></pre>\n\n<p>else the file stays open/unflushed. On Windows, you cannot open it again (locked), on Linux it may contain unflushed data.</p>\n\n<p>The most annoying thing as that when <code>a</code> finishes, the file is properly closed and you see the proper csv output, so it's misleading as why it doesn't work.</p>\n\n<p>Better: use a <code>with</code> block to close file on exiting the block</p>\n\n<pre><code>with open (path_to_csv, \"w+\") as Outfile:\n   Outfile.write(string_to_be_written)\n# now call the subprocess outside the with block: the file is closed\nsubprocess.call([\"path/to/B.py\", path_to_csv, args+])\n</code></pre>\n\n<p>Even better: rewrite both scripts so output of the first one is consumed by input of the second one (avoids writing a temporary file just to pass data)</p>\n"}], "owner": {"reputation": 55, "user_id": 6646682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7699a7384e6281f3b824bd3b5432265?s=128&d=identicon&r=PG&f=1", "display_name": "Shaardyy", "link": "https://stackoverflow.com/users/6646682/shaardyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 42260374, "answer_count": 1, "score": 2, "last_activity_date": 1487196891, "creation_date": 1487193442, "last_edit_date": 1487196891, "question_id": 42260234, "link": "https://stackoverflow.com/questions/42260234/cant-access-content-of-a-file-while-using-subprocess-python", "title": "cant access content of a file while using subprocess python", "body": "<p>Script A.py (python 3.0) does some work and creates a output.csv file.\nScript B.py (python 2.5) takes output.csv as input and does some work.</p>\n\n<p>Example A.py:</p>\n\n<pre><code>Outfile = open (path_to_csv, \"w+\")\nOutfile.write(string_to_be_written)\nOutfile.close\nsubprocess.call([\"path/to/B.py\", path_to_csv, args+])\n</code></pre>\n\n<p>Example B.py:</p>\n\n<pre><code>csv_file = open(path_to_csv, \"rb\")\ncsv_reader = csv.reader(csv_file)\nfor row in csv_reader:\n    print row\n</code></pre>\n\n<p>Now when I run B.py directly, it works perfectly and prints each row of the csv.\nBut doesn't read anything when called from A.py with subprocess.call. It doesnt throw any errors while reading either.</p>\n\n<p>I have tried using os.system and subprocess.Popen but they encounter the same problem. What am I missing here?</p>\n"}, {"tags": ["python", "python-2.7", "maya", "pymel"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4978718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206221282586589/picture?type=large", "display_name": "Shobhit Khinvasara", "link": "https://stackoverflow.com/users/4978718/shobhit-khinvasara"}, "is_accepted": true, "score": 0, "last_activity_date": 1487195626, "creation_date": 1487195626, "answer_id": 42260786, "question_id": 42260229, "link": "https://stackoverflow.com/questions/42260229/how-to-access-pynode-from-a-pynode-list/42260786#42260786", "title": "How to access PyNode from a PyNode list?", "body": "<p>Found the answer myself.</p>\n\n<p>So apparently the Script Editor returns a representation of PyNode when we print it. Like it's an overloaded <strong>str</strong>. It is still a PyNode but looks like a string only in Maya's Script Editor. To make it actually appear like a PyNode, we have to use repr() or enclose in back-ticks (`)</p>\n\n<p>Here is the link where I found the answer.\n: <a href=\"http://download.autodesk.com/us/maya/2011help/pymel/tutorial.html\" rel=\"nofollow noreferrer\">http://download.autodesk.com/us/maya/2011help/pymel/tutorial.html</a></p>\n\n<p>Formatting: Read Me First to Avoid Confusion section</p>\n"}], "owner": {"reputation": 1, "user_id": 4978718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206221282586589/picture?type=large", "display_name": "Shobhit Khinvasara", "link": "https://stackoverflow.com/users/4978718/shobhit-khinvasara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 42260786, "answer_count": 1, "score": 0, "last_activity_date": 1487195626, "creation_date": 1487193427, "question_id": 42260229, "link": "https://stackoverflow.com/questions/42260229/how-to-access-pynode-from-a-pynode-list", "title": "How to access PyNode from a PyNode list?", "body": "<p>I ran this example code with 2 polyCubes in scene.</p>\n\n<pre><code>import pymel.core as pymel\n\npymel.select('pCube1', 'blinn1')\nprint pymel.ls(sl = True)\nprint pymel.ls(sl = True)[0]\n</code></pre>\n\n<p>and this is my output</p>\n\n<pre><code>[nt.Transform(u'pCube1'), nt.Blinn(u'blinn1')]\npCube1\n</code></pre>\n\n<p>I know the elements inside this list are PyNodes, but printing them gives out a string type name of the node. Is there anyway to access the PyNode directly from this list?</p>\n"}, {"tags": ["python", "performance", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1599, "user_id": 5636510, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09b361064433b5c7272b92f4a0c6a8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hansen", "link": "https://stackoverflow.com/users/5636510/eric-hansen"}, "edited": false, "score": 0, "creation_date": 1487194595, "post_id": 42260496, "comment_id": 71678680, "body": "Yes of course, I guess the indexing occurs in the same way in each case anyways. I can look into this some more myself, but do you think this is probably just a slightly confusing example of something that is generally true? e.g. for other Series the documentation advice is usually correct?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1599, "user_id": 5636510, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09b361064433b5c7272b92f4a0c6a8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hansen", "link": "https://stackoverflow.com/users/5636510/eric-hansen"}, "edited": false, "score": 1, "creation_date": 1487194755, "post_id": 42260496, "comment_id": 71678747, "body": "I think you are using the best approach - test, profile, chose the best method for this particular task. One solution can can be better for this particular task and will be the slowest for another one... And yes, i saw it already quite a few times when list comprehension was faster for <b>string</b> Series"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1599, "user_id": 5636510, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09b361064433b5c7272b92f4a0c6a8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hansen", "link": "https://stackoverflow.com/users/5636510/eric-hansen"}, "edited": false, "score": 0, "creation_date": 1487194953, "post_id": 42260496, "comment_id": 71678854, "body": "@EricHansen, glad i could help :-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1487194445, "creation_date": 1487194445, "answer_id": 42260496, "question_id": 42260173, "link": "https://stackoverflow.com/questions/42260173/performance-of-list-comprehensions-in-boolean-indexing/42260496#42260496", "title": "Performance of list comprehensions in boolean indexing", "body": "<p>IMO it's not about boolean indexing - it's about working with string series:</p>\n\n<pre><code>In [204]: %timeit df.a.str.startswith('t')\n10 loops, best of 3: 75.7 ms per loop\n\nIn [205]: %timeit df['a'].map(lambda x: x.startswith('t'))\n10 loops, best of 3: 76.5 ms per loop\n\nIn [206]: %timeit [x.startswith('t') for x in df['a']]\n10 loops, best of 3: 39.7 ms per loop\n\nIn [209]: %timeit [df.a.str[0] == 't']\n10 loops, best of 3: 85.2 ms per loop\n</code></pre>\n\n<p>DF shape: 70.000 x 3</p>\n\n<pre><code>In [207]: df.shape\nOut[207]: (70000, 3)\n</code></pre>\n\n<p>Often list comprehension is faster when working with <code>string</code> series.</p>\n\n<p>PS i was using Pandas version 0.19.2 for this example</p>\n"}], "owner": {"reputation": 1599, "user_id": 5636510, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09b361064433b5c7272b92f4a0c6a8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hansen", "link": "https://stackoverflow.com/users/5636510/eric-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 42260496, "answer_count": 1, "score": 2, "last_activity_date": 1487194445, "creation_date": 1487193222, "last_edit_date": 1487194384, "question_id": 42260173, "link": "https://stackoverflow.com/questions/42260173/performance-of-list-comprehensions-in-boolean-indexing", "title": "Performance of list comprehensions in boolean indexing", "body": "<p>I am currently trying to learn more about Pandas, and was looking at the <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing\" rel=\"nofollow noreferrer\">Boolean Indexing</a> section in the documentation. </p>\n\n<p>In the example given, it is noted that for a DataFrame</p>\n\n<pre><code>In[439]: df2 = pd.DataFrame({'a' : ['one', 'one', 'two', 'three', 'two', 'one', 'six'],\n                             'b' : ['x', 'y', 'y', 'x', 'y', 'x', 'x'],\n                             'c' : np.random.randn(7)})\n\nIn[440]: df2\nOut[440]: \n       a  b         c\n0    one  x -0.858441\n1    one  y  0.643366\n2    two  y -0.862198\n3  three  x -0.408981\n4    two  y  1.137740\n5    one  x  0.829057\n6    six  x -1.251656\n</code></pre>\n\n<p>using the <code>map</code> method of a Series like</p>\n\n<pre><code>In [441]: criterion = df2['a'].map(lambda x: x.startswith('t'))\n\nIn [442]: df2[criterion]\nOut[442]: \n       a  b         c\n2    two  y  0.041290\n3  three  x  0.361719\n4    two  y -0.238075\n</code></pre>\n\n<p>is faster than the equivalent list comprehension</p>\n\n<pre><code>In [443]: df2[[x.startswith('t') for x in df2['a']]]\nOut[443]: \n       a  b         c\n2    two  y  0.041290\n3  three  x  0.361719\n4    two  y -0.238075\n</code></pre>\n\n<p>Now for this situation I would use <code>df2[df2.a.str.startswith('t')]</code> which wasn't mentioned in the docs, so I wanted to benchmark the approaches. </p>\n\n<hr>\n\n<p><strong>Small Series benchmark</strong></p>\n\n<pre><code>%timeit df2[df2.a.str.startswith('t')]\n1000 loops, best of 3: 880 \u00b5s per loop\n\n%timeit df2[df2['a'].map(lambda x: x.startswith('t'))]\n1000 loops, best of 3: 783 \u00b5s per loop\n\n%timeit df2[[x.startswith('t') for x in df2['a']]]\n1000 loops, best of 3: 572 \u00b5s per loop\n</code></pre>\n\n<p>Surprisingly, the list comprehension approach seemed to be the fastest! So I tried making the DataFrame <em>much</em> larger and benchmarking again. </p>\n\n<pre><code>In[444]: df2 = pd.DataFrame({'a' : ['one', 'one', 'two', 'three', 'two', 'one', 'six']*1000000,\n                             'b' : ['x', 'y', 'y', 'x', 'y', 'x', 'x']*1000000,\n                             'c' : np.random.randn(7*1000000)})\n</code></pre>\n\n<p><strong>Big Series benchmark</strong></p>\n\n<pre><code>%timeit df2[df2.a.str.startswith('t')]\n1 loop, best of 3: 5.89 s per loop\n\n%timeit df2[df2['a'].map(lambda x: x.startswith('t'))]\n1 loop, best of 3: 5.73 s per loop\n\n%timeit df2[[x.startswith('t') for x in df2['a']]]\n1 loop, best of 3: 3.95 s per loop\n</code></pre>\n\n<p>Still the list comprehension seems to be the fastest, and the difference is even more noticeable with a large Series.</p>\n\n<hr>\n\n<h2>Question</h2>\n\n<p>Is the <code>map</code> method of a Series generally actually faster than a list comprehension for Boolean Indexing? Why does the list comprehension approach seem to actually be faster here and contradict the <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing\" rel=\"nofollow noreferrer\">documentation section</a>?</p>\n\n<p>There may very well be an error in my benchmarking approach or testing, and I am well aware that for more complex criterion (and even simple criterion) one of the first two approaches is <em>much</em> nicer to look at and implement, but my question here is just about performance. </p>\n\n<p><em>Note</em>: I am using Pandas version <code>0.18.1</code></p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "deep-learning"], "comments": [{"owner": {"reputation": 1627, "user_id": 7119965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689e0b4bb6c0ac5173d21bf0ff28e86e?s=128&d=identicon&r=PG&f=1", "display_name": "drpng", "link": "https://stackoverflow.com/users/7119965/drpng"}, "edited": false, "score": 2, "creation_date": 1487269796, "post_id": 42260167, "comment_id": 71720396, "body": "We&#39;ve had issues with relative paths in the past. Could you specify an absolute path for the log directory?"}, {"owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "reply_to_user": {"reputation": 1627, "user_id": 7119965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689e0b4bb6c0ac5173d21bf0ff28e86e?s=128&d=identicon&r=PG&f=1", "display_name": "drpng", "link": "https://stackoverflow.com/users/7119965/drpng"}, "edited": false, "score": 1, "creation_date": 1487276797, "post_id": 42260167, "comment_id": 71724502, "body": "@drpng you mean TensorFlow team had issue with relative paths? I was also told there is a version inconsistency between tflearn and tensorflow because I am using the latest version but I do need to use the latest version for another project"}, {"owner": {"reputation": 1627, "user_id": 7119965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689e0b4bb6c0ac5173d21bf0ff28e86e?s=128&d=identicon&r=PG&f=1", "display_name": "drpng", "link": "https://stackoverflow.com/users/7119965/drpng"}, "edited": false, "score": 2, "creation_date": 1487278642, "post_id": 42260167, "comment_id": 71725639, "body": "I mean that it tensorflow did not always work well with relative paths in some cases. Anyway, try the absolute path."}, {"owner": {"reputation": 993, "user_id": 6858837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f56ccb5125aaaad6dd7bb752be8f3494?s=128&d=identicon&r=PG&f=1", "display_name": "Trevir", "link": "https://stackoverflow.com/users/6858837/trevir"}, "edited": false, "score": 2, "creation_date": 1488272430, "post_id": 42260167, "comment_id": 72146331, "body": "Absolute paths were necessary for restoring my tensorflow model!"}, {"owner": {"reputation": 103, "user_id": 2779181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21273ac222d6a734bb53180c645194a?s=128&d=identicon&r=PG", "display_name": "zhy", "link": "https://stackoverflow.com/users/2779181/zhy"}, "edited": false, "score": 0, "creation_date": 1494297411, "post_id": 42260167, "comment_id": 74755709, "body": "That may be the saver version problem\uff1atry define <code>saver</code> like this\uff1a <code>saver = tf.train.Saver(tf.global_variables(), write_version=tf.train.SaverDef.V1)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13598, "user_id": 3990607, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0ZRtB.png?s=128&g=1", "display_name": "patapouf_ai", "link": "https://stackoverflow.com/users/3990607/patapouf-ai"}, "is_accepted": false, "score": 10, "last_activity_date": 1491585635, "creation_date": 1491585635, "answer_id": 43283827, "question_id": 42260167, "link": "https://stackoverflow.com/questions/42260167/unsuccessful-tensorslicereader-constructor-failed-to-find-any-matching-files-fo/43283827#43283827", "title": "Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912", "body": "<p>I just had the same problem. \nThe problem is in this line:</p>\n\n<pre><code>model = tflearn.DNN(network, tensorboard_verbose=0, checkpoint_path='bird-classifier.tfl.ckpt')\n</code></pre>\n\n<p>Giving the checkpoint file name is not enough, you need to give the path. \nIf the checkpoint file is in the working directory, you can simply change it to</p>\n\n<pre><code>model = tflearn.DNN(network, tensorboard_verbose=0, checkpoint_path='./bird-classifier.tfl.ckpt')\n</code></pre>\n\n<p>and it should work. </p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 1429847, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cyg_OIDK0QE/AAAAAAAAAAI/AAAAAAAAAh0/A9e1RdvHAoo/photo.jpg?sz=128", "display_name": "Sergei Shitikov", "link": "https://stackoverflow.com/users/1429847/sergei-shitikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1515017431, "creation_date": 1515017431, "answer_id": 48085905, "question_id": 42260167, "link": "https://stackoverflow.com/questions/42260167/unsuccessful-tensorslicereader-constructor-failed-to-find-any-matching-files-fo/48085905#48085905", "title": "Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912", "body": "<p>It's a bug. Just use \"./test_images/\" instead of test_images/ in any path attributes. This helped for me.</p>\n"}, {"comments": [{"owner": {"reputation": 633, "user_id": 3901074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ff193b9cdb51542891c85e8094a82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3901074/matt"}, "edited": false, "score": 0, "creation_date": 1618335446, "post_id": 59426206, "comment_id": 118569396, "body": "Thanks! This totally saved me, I had squared brakes in my file name."}], "tags": [], "owner": {"reputation": 79, "user_id": 12571058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA13kCz3zE7sBA_CQr09uWuz0o0a62ftq9Nuu3K=k-s128", "display_name": "sascha berger", "link": "https://stackoverflow.com/users/12571058/sascha-berger"}, "is_accepted": false, "score": 3, "last_activity_date": 1576855717, "last_edit_date": 1576855717, "creation_date": 1576849275, "answer_id": 59426206, "question_id": 42260167, "link": "https://stackoverflow.com/questions/42260167/unsuccessful-tensorslicereader-constructor-failed-to-find-any-matching-files-fo/59426206#59426206", "title": "Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912", "body": "<p>Just got the same Error message when loading my model in Colab. </p>\n\n<p>For me it where brackets in my filename, which the <code>save()</code> command can handle but <code>load_model()</code> can't. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12789026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b016b8c0cb5a56419fbdb6bd5ea70c3?s=128&d=identicon&r=PG&f=1", "display_name": "postovalov", "link": "https://stackoverflow.com/users/12789026/postovalov"}, "is_accepted": false, "score": 0, "last_activity_date": 1612851034, "last_edit_date": 1612851034, "creation_date": 1612808945, "answer_id": 66107301, "question_id": 42260167, "link": "https://stackoverflow.com/questions/42260167/unsuccessful-tensorslicereader-constructor-failed-to-find-any-matching-files-fo/66107301#66107301", "title": "Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912", "body": "<p>Try downloading your <code>bird-classifier.tfl.ckpt-50912</code> model from the site and paste files into the folder (worked in my case):</p>\n<pre><code>C:\\Users\\%user%\\AppData\\Local\\Temp\\tfhub_modules\\87c08e811d90a898c320e6626614764b3f4e562b\\variables\n</code></pre>\n"}], "owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16463, "favorite_count": 0, "answer_count": 4, "score": 16, "last_activity_date": 1612851034, "creation_date": 1487193204, "last_edit_date": 1519373972, "question_id": 42260167, "link": "https://stackoverflow.com/questions/42260167/unsuccessful-tensorslicereader-constructor-failed-to-find-any-matching-files-fo", "title": "Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912", "body": "<p>I am following this tutorial <a href=\"http://www.bitfusion.io/2016/08/31/training-a-bird-classifier-with-tensorflow-and-tflearn/\" rel=\"noreferrer\">http://www.bitfusion.io/2016/08/31/training-a-bird-classifier-with-tensorflow-and-tflearn/</a>\nI assume that training was done but the system was restarted so I can't verify if the 100 epochs were done. Can you please suggest fixes?</p>\n\n<pre><code>mona@pascal:~/computer_vision/python_playground$ python infer.py test_images/\nbird_african_fish_eagle.jpg          bird_mount_bluebird.jpg              not_a_bird_creativecommons_logo.jpg  \nbird_bullocks_oriole.jpg             not_a_bird_airplane.jpg              not_a_bird_stop_sign.jpg             \nmona@pascal:~/computer_vision/python_playground$ python infer.py test_images/not_a_bird_stop_sign.jpg \nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: Tesla K40c\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\npciBusID 0000:03:00.0\nTotal memory: 11.92GiB\nFree memory: 11.85GiB\nW tensorflow/stream_executor/cuda/cuda_driver.cc:590] creating context when one is currently active; existing: 0x3771170\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 1 with properties: \nname: Tesla K40c\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\npciBusID 0000:83:00.0\nTotal memory: 11.92GiB\nFree memory: 11.85GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 0 and 1\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 1 and 0\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 1 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y N \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 1:   N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Tesla K40c, pci bus id: 0000:03:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla K40c, pci bus id: 0000:83:00.0)\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tflearn/summaries.py:46 in get_summary.: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tflearn/summaries.py:46 in get_summary.: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tflearn/helpers/trainer.py:766 in create_summaries.: merge_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.merge.\nWARNING:tensorflow:VARIABLES collection name is deprecated, please use GLOBAL_VARIABLES instead; VARIABLES will be removed after 2017-03-02.\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tflearn/helpers/trainer.py:130 in __init__.: initialize_all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.\nInstructions for updating:\nUse `tf.global_variables_initializer` instead.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Tesla K40c, pci bus id: 0000:03:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla K40c, pci bus id: 0000:83:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Tesla K40c, pci bus id: 0000:03:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla K40c, pci bus id: 0000:83:00.0)\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tflearn/helpers/trainer.py:378 in restore.: initialize_all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.\nInstructions for updating:\nUse `tf.global_variables_initializer` instead.\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nW tensorflow/core/framework/op_kernel.cc:975] Not found: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\nTraceback (most recent call last):\n  File \"infer.py\", line 44, in &lt;module&gt;\n    model.load(\"bird-classifier.tfl.ckpt-50912\")\n  File \"/usr/local/lib/python2.7/dist-packages/tflearn/models/dnn.py\", line 227, in load\n    self.trainer.restore(model_file)\n  File \"/usr/local/lib/python2.7/dist-packages/tflearn/helpers/trainer.py\", line 379, in restore\n    self.restorer.restore(self.session, model_file)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1388, in restore\n    {self.saver_def.filename_tensor_name: save_path})\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 766, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 964, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.NotFoundError: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\n     [[Node: save_1/RestoreV2_14 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save_1/Const_0, save_1/RestoreV2_14/tensor_names, save_1/RestoreV2_14/shape_and_slices)]]\n     [[Node: save_1/RestoreV2_21/_17 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_158_save_1/RestoreV2_21\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n\nCaused by op u'save_1/RestoreV2_14', defined at:\n  File \"infer.py\", line 43, in &lt;module&gt;\n    model = tflearn.DNN(network, tensorboard_verbose=0, checkpoint_path='bird-classifier.tfl.ckpt')\n  File \"/usr/local/lib/python2.7/dist-packages/tflearn/models/dnn.py\", line 57, in __init__\n    session=session)\n  File \"/usr/local/lib/python2.7/dist-packages/tflearn/helpers/trainer.py\", line 125, in __init__\n    keep_checkpoint_every_n_hours=keep_checkpoint_every_n_hours)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1000, in __init__\n    self.build()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1030, in build\n    restore_sequentially=self._restore_sequentially)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 624, in build\n    restore_sequentially, reshape)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 361, in _AddRestoreOps\n    tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 200, in restore_op\n    [spec.tensor.dtype])[0])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_io_ops.py\", line 441, in restore_v2\n    dtypes=dtypes, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nNotFoundError (see above for traceback): Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bird-classifier.tfl.ckpt-50912\n     [[Node: save_1/RestoreV2_14 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save_1/Const_0, save_1/RestoreV2_14/tensor_names, save_1/RestoreV2_14/shape_and_slices)]]\n     [[Node: save_1/RestoreV2_21/_17 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_158_save_1/RestoreV2_21\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n\n[1]+  Killed                  python2 infer.py ${f} 2&gt; /dev/null\nmona@pascal:~/computer_vision/python_playground$ ls *50912(\n-bash: syntax error near unexpected token `('\nmona@pascal:~/computer_vision/python_playground$ ls *50912*\nbird-classifier.tfl.ckpt-50912.data-00000-of-00001  bird-classifier.tfl.ckpt-50912.index  bird-classifier.tfl.ckpt-50912.meta\n</code></pre>\n\n<p>Here are the dumped training files I have <a href=\"http://pastebin.com/9RF58yBB\" rel=\"noreferrer\">http://pastebin.com/9RF58yBB</a> </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 2, "creation_date": 1487193067, "post_id": 42260063, "comment_id": 71677884, "body": "Are you looking to seek if <code>(inimeste_arv &#47; kohtade_arv)</code> has a fractional part? If so: look at <a href=\"https://docs.python.org/2/library/math.html#math.modf\" rel=\"nofollow noreferrer\">modf</a>"}, {"owner": {"reputation": 11, "user_id": 7536765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qepgO.jpg?s=128&g=1", "display_name": "Harli17", "link": "https://stackoverflow.com/users/7536765/harli17"}, "edited": false, "score": 0, "creation_date": 1487193731, "post_id": 42260063, "comment_id": 71678242, "body": "The result from the operation <code>(inimeste_arv &#47; kohtade_arv)</code> has to be an <i>int</i>, but when dividing those numbers, it gives me a <i>float</i> (for example 1.0, 2.0 etc). However, if I put an <code>int()</code> infront of this operation, it also makes <i>float</i> s into <i>int</i>, but my program then fails to operate properly (its meant to only let pass integers, not <i>float</i> s). I can post the full part of this program if it makes it any easier to understand - its a program where you enter a number of passengers and seats in a single bus and it tells you how many such buses do you need and how many sit in the last one."}, {"owner": {"reputation": 11, "user_id": 7536765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qepgO.jpg?s=128&g=1", "display_name": "Harli17", "link": "https://stackoverflow.com/users/7536765/harli17"}, "edited": false, "score": 0, "creation_date": 1487194163, "post_id": 42260063, "comment_id": 71678442, "body": "pastebin.com/hrpJjhiY  It&#39;s in Estonian, I can translate it for you if it makes it any easier.  Note that it&#39;s just the part with my <i>elif</i> statement, it&#39;s not my full program; if you also want that, I can provide it for you for better understanding.  inimeste_arv = number of people;  kohtade_arv = number of seats;  Viimases bussis inimesi = number of people in the last bus"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1487196224, "post_id": 42260063, "comment_id": 71679498, "body": "Judging by the wide range of answers, no one really could understand what the issue was here. The closest seems to be find if the result is in a range which is a duplicate as indicated. If the poster clarifies the issue -- please post a new question. That is why we are here."}], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 1011268, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/08b8b606a5a4730078cc43b88c14b4da?s=128&d=identicon&r=PG", "display_name": "imriqwe", "link": "https://stackoverflow.com/users/1011268/imriqwe"}, "edited": false, "score": 0, "creation_date": 1495462581, "post_id": 42260120, "comment_id": 75249699, "body": "Thanks King of Python! You should get a T-shirt with that statement."}], "tags": [], "owner": {"reputation": 428, "user_id": 988082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7ca6a79ceaf492c0617e61d67e74dfa?s=128&d=identicon&r=PG", "display_name": "ozking", "link": "https://stackoverflow.com/users/988082/ozking"}, "is_accepted": false, "score": 0, "last_activity_date": 1487193044, "creation_date": 1487193044, "answer_id": 42260120, "question_id": 42260063, "link": "https://stackoverflow.com/questions/42260063/how-to-make-python-understand-how-a-series-of-numbers-continues/42260120#42260120", "title": "How to make Python understand how a series of numbers continues", "body": "<p>try</p>\n\n<pre><code>elif (inimeste_arv / kohtade_arv) in map(float, range(1, number)):\n</code></pre>\n\n<p>where <code>number</code> is the <code>max value + 1</code></p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 7471271, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211615631609138/picture?type=large", "display_name": "Davide Marchi", "link": "https://stackoverflow.com/users/7471271/davide-marchi"}, "is_accepted": false, "score": -1, "last_activity_date": 1487193443, "creation_date": 1487193443, "answer_id": 42260235, "question_id": 42260063, "link": "https://stackoverflow.com/questions/42260063/how-to-make-python-understand-how-a-series-of-numbers-continues/42260235#42260235", "title": "How to make Python understand how a series of numbers continues", "body": "<p>if you want to see if the result of the division is an entire number, you can use the % operator.\nTry: </p>\n\n<pre><code>elif (inimeste_arv % kohtade_arv) == 0:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 7571193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIQwU.jpg?s=128&g=1", "display_name": "Jammeth_Q", "link": "https://stackoverflow.com/users/7571193/jammeth-q"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194275, "creation_date": 1487194275, "answer_id": 42260454, "question_id": 42260063, "link": "https://stackoverflow.com/questions/42260063/how-to-make-python-understand-how-a-series-of-numbers-continues/42260454#42260454", "title": "How to make Python understand how a series of numbers continues", "body": "<p>Always make the computers do the typing for you. I think we'd need a little more information to figure out an exact answer for you, but I have some guesses at what you're getting at.</p>\n\n<p>One possibility I can surmise from your example is you want to know whether your result is an whole number. To test that, you could use the modulus operator (%), which gives you the remainder of a division operation:</p>\n\n<pre><code>124 % 5\nOut: 4\n125 % 5\nOut: 0\n</code></pre>\n\n<p>So, if your (inimeste_arv / kohtade_arv) results in 0, you'll know it was a whole number.</p>\n\n<p>Another possibility is you want to know if it's in a specific pattern of numbers. For a simple pattern, you could use range:</p>\n\n<pre><code>range(0, 125, 25)\nOut: [0, 25, 50, 75, 100]\n</code></pre>\n\n<p>Which does have a finite end, but still saves you a lot of typing. For more complicated patterns, you might have read up on list comprehensions, which are very powerful but can be unintuitive for new programmers:</p>\n\n<pre><code>[i**2 for i in xrange(0, 6)]\nOut: [0, 1, 4, 9, 16, 25]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7536765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qepgO.jpg?s=128&g=1", "display_name": "Harli17", "link": "https://stackoverflow.com/users/7536765/harli17"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "closed_date": 1487195292, "answer_count": 3, "score": -2, "last_activity_date": 1487271171, "creation_date": 1487192858, "last_edit_date": 1487271171, "question_id": 42260063, "link": "https://stackoverflow.com/questions/42260063/how-to-make-python-understand-how-a-series-of-numbers-continues", "closed_reason": "Duplicate", "title": "How to make Python understand how a series of numbers continues", "body": "<p>Hello and sorry in advance if my question is silly (I just started learning Python some weeks ago and it's my first programming language), but here it is anyways.\nI was wondering if and how I can make Python understand how a series of numbers continues? For my current program, I have a line like this:</p>\n\n<pre><code>elif (inimeste_arv / kohtade_arv) in (1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0):\n</code></pre>\n\n<p>Now, I want it to understand that it keeps going by the same meaning indefinitely (10.0, 11.0, 12.0 etc), because I can't manually enter every number this elif-statement needs.\nIs there even a way to do it or is it not possible?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "is_accepted": true, "score": 2, "last_activity_date": 1487194202, "creation_date": 1487194202, "answer_id": 42260432, "question_id": 42260059, "link": "https://stackoverflow.com/questions/42260059/python-pandas-frequency-string-comparisons/42260432#42260432", "title": "Python Pandas frequency string comparisons", "body": "<p><code>pd.to_timedelta</code> can be used to convert a str to a time period. Here is an example:</p>\n\n<pre><code>import pandas as pd\nimport re\n\ndef to_timedelta(freq):\n    # Add '1' to freq that doesn't have any digit\n    if not bool(re.search(r'\\d', freq)):\n        freq = '1{}'.format(freq)\n\n    # Convert str to datetime.timedelta\n    return pd.to_timedelta(freq)\n\ndef get_relative_timediff(freq1, freq2):\n    return to_timedelta(freq1) / to_timedelta(freq2)\n\nprint get_relative_timediff('8H', 'min')\nprint get_relative_timediff('4D', '8H')\n</code></pre>\n\n<p>And you get:</p>\n\n<pre><code>480.0\n12.0\n</code></pre>\n\n<p>Notice I have to manually add a '1' to frequency without any digits.</p>\n"}], "owner": {"reputation": 128, "user_id": 7571193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIQwU.jpg?s=128&g=1", "display_name": "Jammeth_Q", "link": "https://stackoverflow.com/users/7571193/jammeth-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 42260432, "answer_count": 1, "score": 0, "last_activity_date": 1487194202, "creation_date": 1487192840, "question_id": 42260059, "link": "https://stackoverflow.com/questions/42260059/python-pandas-frequency-string-comparisons", "title": "Python Pandas frequency string comparisons", "body": "<p>I've been writing a class that uses pandas dataframes sampled at specific frequenciess. The arguments it uses to specify these frequencies are the <a href=\"http://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries-offset-aliases\" rel=\"nofollow noreferrer\">frequency strings</a> commonly used in pandas (e.g. 'H', '15min', 'D')</p>\n\n<p>One of my methods needs to compare these frequencies to each other - how many of one fits into the other. Is there a smart, direct way to do this? I wrote the following but it seems so clunky and indirect:</p>\n\n<pre><code>def _get_relative_timediff(self, freq1, freq2):\n    \"\"\" Returns how many (based on seconds) of frequency 2 goes into frequency 1\n    \"\"\"\n    old = pd.period_range(start='1/1/1900', freq=freq1, periods=2)[1].to_timestamp()\n    new = pd.period_range(start='1/1/1900', freq=freq2, periods=2)[1].to_timestamp()\n\n    old = (old - pd.to_datetime('1/1/1900')).seconds\n    new = (new - pd.to_datetime('1/1/1900')).seconds\n\n    relative = float(old/new)\n\n    return relative\n</code></pre>\n\n<p>It works:</p>\n\n<pre><code>my_object._get_relative_timediff('8H', 'min')\n480.0\n</code></pre>\n\n<p>But I have to imagine there's a better way (or should be). Thanks!</p>\n"}, {"tags": ["python", "django", "azure", "webjob"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 7561775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baad70e4e9668833abcbd7d84446dba?s=128&d=identicon&r=PG&f=1", "display_name": "totor", "link": "https://stackoverflow.com/users/7561775/totor"}, "edited": false, "score": 0, "creation_date": 1487263416, "post_id": 42268411, "comment_id": 71716207, "body": "Thanks ! The crash is actually due to the shutil.copy() function. The file gets copied in the webjob directory, but then an error happens, and the code fails. Any idea? I also tried shutil.copyfile (both with absolute paths) but it fails too"}, {"owner": {"reputation": 98, "user_id": 7561775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baad70e4e9668833abcbd7d84446dba?s=128&d=identicon&r=PG&f=1", "display_name": "totor", "link": "https://stackoverflow.com/users/7561775/totor"}, "edited": false, "score": 0, "creation_date": 1487365512, "post_id": 42268411, "comment_id": 71769610, "body": "There is no specific information, even in the Azure logs. Just Server error 500 But see my answer below, I am quite sure that this is due to the fact that azure tries to have access to the &quot;run.py&quot; file (maybe to copy it in the temp directory?) once it is detected"}], "tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487233247, "creation_date": 1487233247, "answer_id": 42268411, "question_id": 42260033, "link": "https://stackoverflow.com/questions/42260033/create-azure-webjobs-from-django-python-web-app/42268411#42268411", "title": "Create Azure webjobs from Django/python web app", "body": "<p>According to your description, per my experience, I think the issue was caused by using the relative path in your code. </p>\n\n<p>On Azure WebApps, we have the permission of doing any operations under the path <code>D:/home</code>. </p>\n\n<p>My suggestion is using the absolute path instead of the relative path, such as <code>D:/home/site/wwwroot/App_Data/jobs/triggered/&lt;triggered-job-name&gt;/test.txt</code> or <code>/home/site/wwwroot/App_Data/jobs/triggered/&lt;triggered-job-name&gt;/test.txt</code> instead of <code>test.txt</code>. And please make sure the directory &amp; parent directories had been made via use <code>os.path.exists(path)</code> to check the path exists and use <code>os.makedirs</code> to make them before writing a file.</p>\n\n<p>Meanwhile, you also can try to use the <a href=\"https://github.com/projectkudu/kudu/wiki/WebJobs-API\" rel=\"nofollow noreferrer\">WebJobs API</a> to do some operations, such as creating a webjob via uploading a zip file or updating <code>settings.job</code>. For using these WebJobs APIs, be sure you had configured the <code>Deployment credentials</code> on Azure portal as the figure below, and add the basic auth <code>Authorization: Basic &lt;BASE64-Encode(\"deployment-username\":\"password\")&gt;</code>in the request header.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wHe6z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wHe6z.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 7561775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baad70e4e9668833abcbd7d84446dba?s=128&d=identicon&r=PG&f=1", "display_name": "totor", "link": "https://stackoverflow.com/users/7561775/totor"}, "is_accepted": true, "score": 0, "last_activity_date": 1487270905, "creation_date": 1487270905, "answer_id": 42282259, "question_id": 42260033, "link": "https://stackoverflow.com/questions/42260033/create-azure-webjobs-from-django-python-web-app/42282259#42282259", "title": "Create Azure webjobs from Django/python web app", "body": "<p>Here is my analysis:</p>\n\n<ul>\n<li>there is no problem copying other files than \"run.py\" to the webjob directory</li>\n<li>the code crashes after (successfully) copying the file \"run.py\" from my Django app directory to the webjob directory. It does not matter if I use shutil.copy/shutil.copyfile or simply open(\"{path}/run.py\",\"w\"), the problem occurs when I try to write a file called \"run.py\" to the disk in the webjob directory.</li>\n</ul>\n\n<p>I think that when we create a new webjob directory, if the system detects a file called \"run.py\" it tries to carry out some operations. Then there is a conflict with two processes trying to access the same file at the same time.</p>\n\n<p>My solution: I copy the python script to the webjob directory with the name \"myrun.txt\", and then I rename it to run.py using os.rename</p>\n\n<p>It works !</p>\n"}], "owner": {"reputation": 98, "user_id": 7561775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baad70e4e9668833abcbd7d84446dba?s=128&d=identicon&r=PG&f=1", "display_name": "totor", "link": "https://stackoverflow.com/users/7561775/totor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 42282259, "answer_count": 2, "score": 0, "last_activity_date": 1487270905, "creation_date": 1487192720, "last_edit_date": 1487196287, "question_id": 42260033, "link": "https://stackoverflow.com/questions/42260033/create-azure-webjobs-from-django-python-web-app", "title": "Create Azure webjobs from Django/python web app", "body": "<p>I have a Django app deployed on a Azure Web App, and I want to dynamically create webjobs. More precisely, when I save a Django model called Importer, I want to be able to create a new web job, made of 3 files:</p>\n\n<ul>\n<li>run.py : the Python webjob</li>\n<li>settings.job : the cron schedule</li>\n<li>config.ini : a config file for the webjob</li>\n</ul>\n\n<p>The content of the \"settings.job\" &amp; \"config.ini\" comes from an admin form and is specific to the webjob.</p>\n\n<p>When I save my model, the code creates a new directory in </p>\n\n<blockquote>\n  <p>App_Data\\jobs\\triggered{my job name}</p>\n</blockquote>\n\n<p>, and copies there the \"run.py\" from my app directory.</p>\n\n<p>This works. However, when I try to create a new text file called \"settings.job\" in the job directory and write the cron schedule in it, I got a server error. </p>\n\n<p>I tried many things, but the following basic test causes a failure:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>file = open('test.txt','w')\nfile.write('this is a test')\nfile.close()\n</code></pre>\n\n<p>It seems that I don't have the right to write a file to the disk. How can that be solved? \nAlso, I want to be able to modify the content of the config and settings.job files when I update the corresponding Django model. </p>\n\n<p>In addition, I tried to copy another file called \"run2.py\" to the webjob directory, and that fails too ! I cannot copy another file that run.py in that directory</p>\n"}, {"tags": ["python", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 3, "last_activity_date": 1487192648, "creation_date": 1487192648, "answer_id": 42260013, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260013#42260013", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>You have a <em>list</em> of dictionaries, so you can use a list comprehension:</p>\n\n<pre><code>[d for d in lst if d['id'] == 5]\n\n# [{'id': 5, 'name': 'Ellen'}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2439, "user_id": 2605317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3b74ebdc72c5c99c93ac018be3b67b?s=128&d=identicon&r=PG&f=1", "display_name": "Mithilesh Gupta", "link": "https://stackoverflow.com/users/2605317/mithilesh-gupta"}, "is_accepted": false, "score": 3, "last_activity_date": 1487192656, "creation_date": 1487192656, "answer_id": 42260016, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260016#42260016", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<pre><code>new_list = [m['name'] for m in list if m['id']==5]\nprint '\\n'.join(new_list)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1997, "user_id": 2058281, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jppqe.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2058281/aaron"}, "edited": false, "score": 0, "creation_date": 1487192759, "post_id": 42260022, "comment_id": 71677719, "body": "Since this can be handled with a fairly basic list comprehension, I would guess that is &quot;Pythonic&quot; way to solve his problem, as opposed to explicitly writing a loop."}, {"owner": {"reputation": 5657, "user_id": 1287593, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/769e943de03a0b9ff6602a4b4abfbe1d?s=128&d=identicon&r=PG", "display_name": "theJollySin", "link": "https://stackoverflow.com/users/1287593/thejollysin"}, "reply_to_user": {"reputation": 1997, "user_id": 2058281, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jppqe.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2058281/aaron"}, "edited": false, "score": 0, "creation_date": 1487192874, "post_id": 42260022, "comment_id": 71677783, "body": "@Aaron I doubt just printing out the name is the goal.  If we assume that some more complicated logic is needed at this point, a list comprehension may not be useful. (And the OP does not seem to understand how to use dictionaries, so I think this is a bad time to explain list comprehensions.)"}], "tags": [], "owner": {"reputation": 5657, "user_id": 1287593, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/769e943de03a0b9ff6602a4b4abfbe1d?s=128&d=identicon&r=PG", "display_name": "theJollySin", "link": "https://stackoverflow.com/users/1287593/thejollysin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487195710, "last_edit_date": 1487195710, "creation_date": 1487192675, "answer_id": 42260022, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260022#42260022", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>This will be easy to accomplish with a single for-loop:</p>\n\n<pre><code>for d in list:\n    if 'id' in d and d['in'] == 5:\n        print(d['name'])\n</code></pre>\n\n<p>There are two key concepts to learn here. The first is that we used a <a href=\"http://www.tutorialspoint.com/python/python_for_loop.htm\" rel=\"nofollow noreferrer\">for loop</a> to \"go through each element of the list\". The second, is that we used the <a href=\"https://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow noreferrer\">in</a> word to check if a dictionary had a certain key.</p>\n"}, {"tags": [], "owner": {"reputation": 999, "user_id": 5313508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc324fd94b4258a000a5aa5e79da99a5?s=128&d=identicon&r=PG&f=1", "display_name": "P-M", "link": "https://stackoverflow.com/users/5313508/p-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192786, "creation_date": 1487192786, "answer_id": 42260046, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260046#42260046", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>How about the following?</p>\n\n<pre><code>for entry in list:\n    if entry['id']==5:\n        print entry['name']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1562, "user_id": 2789762, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7d29562a2ce01fbd9bb3e30191aeb251?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2789762/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192923, "creation_date": 1487192923, "answer_id": 42260080, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260080#42260080", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>It doesn't exist in <code>Python2</code>, but a simple solution in <code>Python3</code> would be to use a <code>ChainMap</code> instead of a <code>list</code>.</p>\n\n<pre><code>import collections\n\nd = collections.ChainMap(*[{'name':'Mike', 'id': 1}, {'name':'Ellen', 'id': 5}])\nif 'id' in d:\n    print(d['id'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 7512622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8084a1584184542e7978d466fa384911?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Kuang", "link": "https://stackoverflow.com/users/7512622/bowen-kuang"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192996, "creation_date": 1487192996, "answer_id": 42260105, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement/42260105#42260105", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>You can do it by using the filter function:</p>\n\n<pre><code>lis = [ {'name': 'Mike', 'id': 1}, {'name':'Ellen', 'id': 5}]\nresult = filter(lambda dic:dic['id']==5,lis)[0]['name']\nprint(result)\n</code></pre>\n"}], "owner": {"reputation": 2145, "user_id": 4866484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2eeed273cdbbb92e20ab7fdca5110285?s=128&d=identicon&r=PG&f=1", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/4866484/hyperion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 42260013, "answer_count": 6, "score": 0, "last_activity_date": 1487195710, "creation_date": 1487192488, "last_edit_date": 1487193044, "question_id": 42259972, "link": "https://stackoverflow.com/questions/42259972/python-get-dictionary-element-in-a-list-of-dictionaries-after-an-if-statement", "title": "Python - Get dictionary element in a list of dictionaries after an if statement", "body": "<p>How can I get a dictionary value in a list of dictionaries, based on the dictionary satisfying some condition? For instance, if one of the dictionaries in the list has the id=5, I want to print the value corresponding to the <code>name</code> key of that dictionary:</p>\n\n<pre><code>list = [{'name': 'Mike', 'id': 1}, {'name': 'Ellen', 'id': 5}]\nid = 5\nif any(m['id'] == id for m in list):\n    print m['name']\n</code></pre>\n\n<p>This won't work because <code>m</code> is not defined outside the if statement.</p>\n"}, {"tags": ["python", "pandas", "finance", "back-testing"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1487193297, "post_id": 42259822, "comment_id": 71678016, "body": "You can remove all of the financial-domain content from the question. This is about conditionally retrieving a portion of a dataframe and should be worded as such."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "edited": false, "score": 0, "creation_date": 1487219548, "post_id": 42260149, "comment_id": 71686880, "body": "That works for finding dates that would be acceptable; however it doesn&#39;t help with moving forward until it hits the first break point as to when it is &gt;16.5. Rather it would just jump to the next point in time where it is &lt;16.5."}, {"owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "edited": false, "score": 0, "creation_date": 1487219635, "post_id": 42260149, "comment_id": 71686920, "body": "Granted, you can see the gap in the time continuum. Yet I still don&#39;t see it as an effective way to completely back-test the idea. It seems as though I&#39;m at the same blocking point I was at before."}], "tags": [], "owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487193130, "creation_date": 1487193130, "answer_id": 42260149, "question_id": 42259822, "link": "https://stackoverflow.com/questions/42259822/using-pandas-to-do-simple-backtesting-using-until/42260149#42260149", "title": "Using Pandas to do SIMPLE Backtesting: using until", "body": "<p>You don't need to iterate:</p>\n\n<pre><code>In [21]: df\nOut[21]:\n            Adj Close    FOR\ndate\n1990-01-09     329.07  16.23\n1990-01-08     329.07  16.92\n\nIn [22]: df[df['FOR'] &lt; 16.5]\nOut[22]:\n            Adj Close    FOR\ndate\n1990-01-09     329.07  16.23\n\nIn [23]:\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 900, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487193130, "creation_date": 1487191933, "question_id": 42259822, "link": "https://stackoverflow.com/questions/42259822/using-pandas-to-do-simple-backtesting-using-until", "title": "Using Pandas to do SIMPLE Backtesting: using until", "body": "<p>I have a panda df with a date time index from 1990-2015. </p>\n\n<p>It has columns with an adj close of the S&amp;P 500, a FOR (Financial Obligation Ratio), a PE ratio, and so on and so forth. I've created graphs to look at relationships between the different ratios and market. I'm now trying to backtest an investment strategy. I've done some of this in Quantopian but never on my own and am a newbie to pandas.</p>\n\n<p>The first two columns of my table look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NsjVT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NsjVT.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I've messed around with some of the code but don't know how to do it. The idea is the following: Invest a starting portfolio of $1,000,000 the first month the FOR drops below 16.5. Ride the S&amp;P until the FOR hits 16.5, sell. Buy back when it drops back below again. I think that I would need to use a while statement</p>\n\n<pre><code>for idx in df.index:\n    if df['Financial Obligation Ratio'].loc[idx]&lt;16.5:\n\n       print idx, df['Adj Close'].loc[idx]\n</code></pre>\n\n<p>This prints all time periods that I would want the $$ invested. Is there a way to use \"while\" along with \"next idx\" to make this program successful</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "edited": false, "score": 0, "creation_date": 1487192160, "post_id": 42259804, "comment_id": 71677381, "body": "Is this a homework that you shouldn&#39;t use builtin methods?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6457530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059b2347c95cae2e3aa99a5876819f03?s=128&d=identicon&r=PG&f=1", "display_name": "lg713", "link": "https://stackoverflow.com/users/6457530/lg713"}, "edited": false, "score": 0, "creation_date": 1487192729, "post_id": 42259846, "comment_id": 71677701, "body": "Is there also a way for me to use loops to do this?"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 43, "user_id": 6457530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059b2347c95cae2e3aa99a5876819f03?s=128&d=identicon&r=PG&f=1", "display_name": "lg713", "link": "https://stackoverflow.com/users/6457530/lg713"}, "edited": false, "score": 0, "creation_date": 1487192819, "post_id": 42259846, "comment_id": 71677746, "body": "@lg713, technically - yes, but for such simple case it would be overcomplicated"}], "tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 3, "last_activity_date": 1487192685, "last_edit_date": 1495540900, "creation_date": 1487192028, "answer_id": 42259846, "question_id": 42259804, "link": "https://stackoverflow.com/questions/42259804/how-to-save-a-string-into-a-list-of-characters-but-also-able-to-print-that-list/42259846#42259846", "title": "how to save a string into a list of characters but also able to print that list out in reverse order", "body": "<p>To get string characters in reversed order no need to convert the string into list - use <em>reversed slicing</em>:</p>\n\n<pre><code>a = \"string\"\nprint(a[::-1])\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>gnirts\n</code></pre>\n\n<p>Some helpful topic about <strong><em>Python's slice notation</em></strong>:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/509211/explain-pythons-slice-notation\">Explain Python&#39;s slice notation</a></p>\n"}, {"comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "edited": false, "score": 0, "creation_date": 1487192531, "post_id": 42259865, "comment_id": 71677574, "body": "@Arman, actually the other guy edited his answer when he was downvoted, and we ended up providing the same response."}, {"owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "edited": false, "score": 0, "creation_date": 1487192678, "post_id": 42259865, "comment_id": 71677676, "body": "In my opinion your previous answer was correct too , because OP himself first converted string to list."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "edited": false, "score": 0, "creation_date": 1487193145, "post_id": 42259865, "comment_id": 71677927, "body": "@Arman, thanks for your comment, I have updated my question providing my previous response and another using a loop."}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 2, "last_activity_date": 1487192860, "last_edit_date": 1487192860, "creation_date": 1487192111, "answer_id": 42259865, "question_id": 42259804, "link": "https://stackoverflow.com/questions/42259804/how-to-save-a-string-into-a-list-of-characters-but-also-able-to-print-that-list/42259865#42259865", "title": "how to save a string into a list of characters but also able to print that list out in reverse order", "body": "<p>Probably the simplest way is just reverse your string using <a href=\"https://www.dotnetperls.com/slice-python\" rel=\"nofollow noreferrer\">slice notation</a>:</p>\n\n<pre><code>a = 'string'\nprint(a[::-1])\n</code></pre>\n\n<p>You can also convert your string to a list, then reverse it and finally join all together by:</p>\n\n<pre><code>a = 'string'\nprint(''.join(list(a)[::-1])\n</code></pre>\n\n<p>You can also use a for loop which is a little bit more complicated:</p>\n\n<pre><code>inversed_a = ''\n\nfor i in range(len(a) - 1, -1):\n    inversed_a += a[i]\n</code></pre>\n\n<p>then <code>inversed_a</code> will be <code>'gnirts'</code></p>\n"}], "owner": {"reputation": 43, "user_id": 6457530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059b2347c95cae2e3aa99a5876819f03?s=128&d=identicon&r=PG&f=1", "display_name": "lg713", "link": "https://stackoverflow.com/users/6457530/lg713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 42259865, "answer_count": 2, "score": 1, "last_activity_date": 1487192860, "creation_date": 1487191900, "last_edit_date": 1487191995, "question_id": 42259804, "link": "https://stackoverflow.com/questions/42259804/how-to-save-a-string-into-a-list-of-characters-but-also-able-to-print-that-list", "title": "how to save a string into a list of characters but also able to print that list out in reverse order", "body": "<p>New to Python and I was wondering if anyone could guide me in the right direction.</p>\n\n<p>For example:</p>\n\n<pre><code>a = \"string\"\n\ns = list(a)\n</code></pre>\n\n<p>That turns <code>\"string\"</code> into <code>['s', 't', 'r', 'i', 'n', 'g']</code></p>\n\n<p>But how can I reverse the list and print out <code>\"gnirts\"</code> without using the built in reverse method from Python.</p>\n"}, {"tags": ["python", "unit-testing", "cython"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 4, "creation_date": 1487195069, "post_id": 42259741, "comment_id": 71678913, "body": "How about writing a <code>def</code> or <code>cpdef</code> that calls <code>foo</code>?"}, {"owner": {"reputation": 7044, "user_id": 847663, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/h4tXb.png?s=128&g=1", "display_name": "Ginger", "link": "https://stackoverflow.com/users/847663/ginger"}, "edited": false, "score": 1, "creation_date": 1544373623, "post_id": 42259741, "comment_id": 94244214, "body": "Is there a good solution to this that does not involve cpdef?"}], "answers": [{"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 15, "last_activity_date": 1586163547, "last_edit_date": 1586163547, "creation_date": 1544391794, "answer_id": 53696970, "question_id": 42259741, "link": "https://stackoverflow.com/questions/42259741/how-to-test-functions-cdefd-in-cython/53696970#53696970", "title": "How to test functions cdef&#39;d in Cython?", "body": "<p>To test <code>cdef</code>-fuctionality you need to write your tests in Cython. One could try to use <code>cpdef</code>-functions, however not all signatures can be used in this case (for example signatures using pointers like <code>int *</code>, <code>float *</code> and so on).</p>\n\n<p>To access the cdef-functions you will need to \"export\" them via a pxd-file (the same can be done also for <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/sharing_declarations.html#sharing-extension-types\" rel=\"nofollow noreferrer\">cdef-functions of extension types</a> ):</p>\n\n<pre><code>#my_module.pyx:\ncdef double foo(double a) nogil:\n    return 3. * a\n\n#my_module.pxd:\ncdef double foo(double a) nogil\n</code></pre>\n\n<p>Now the functionality can be cimported and tested in a Cython-tester:</p>\n\n<pre><code>#test_my_module.pyx\ncimport my_module\n\ndef test_foo():\n    assert my_module.foo(2.0)==6.0\n    print(\"test ok\")\n\ntest_foo()\n</code></pre>\n\n<p>And now</p>\n\n<pre><code>&gt;&gt;&gt; cythonize -i my_module.pyx\n&gt;&gt;&gt; cythonize -i test_my_module.pyx \n&gt;&gt;&gt; python -c \"import test_my_module\"\ntest ok\n</code></pre>\n\n<p>Where to go from there depends on your testing infrastructure. </p>\n\n<hr>\n\n<p>For example if you use <code>unittest</code>-module, then you could use pyximport to cythonize/load the test-module inspect it and convert all test cases into <code>unittest</code>-test cases or use <code>unittest</code> directly in your cython code (probably a better solution).</p>\n\n<p>Here is a proof of concept for <code>unittest</code>:</p>\n\n<pre><code>#test_my_module.pyx\ncimport my_module\nimport unittest\n\nclass CyTester(unittest.TestCase): \n    def test_foo(self):\n        self.assertEqual(my_module.foo(2.0),6.0)\n</code></pre>\n\n<p>Now we only need to translate and to import it in pure python to be able to <code>unittest</code> it:</p>\n\n<pre><code>#test_cy.py \nimport pyximport;\npyximport.install(setup_args = {\"script_args\" : [\"--force\"]},\n                  language_level=3)\n\n# now drag CyTester into the global namespace, \n# so tests can be discovered by unittest\nfrom test_my_module import *\n</code></pre>\n\n<p>And now:</p>\n\n<pre><code>&gt;&gt;&gt; python -m unittest test_cy.py\n.\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nOK\n</code></pre>\n\n<p>Btw, there is no need to cythonize pyx-modules explicitly - <code>pyximport</code> does it for us automatically.</p>\n\n<p><strong>A word of warning:</strong> <code>pyximport</code> caches cythonized c-files in <code>~/.pyxbld</code> (or similar on other OSes) and as long as <code>test_my_module.pyx</code> has not changed the extension isn't rebuild, even if its depenencies where changed. This might be a problem (among others), when <code>my_module</code> changes and it leads to binary incompatibility (luckily python warns if this is the case).</p>\n\n<p>By passing <code>setup_args = {\"script_args\" : [\"--force\"]}</code> we force a rebuild.</p>\n\n<p>Another option is to delete the cached-files (one could use a temporary directory, for example created with <a href=\"https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory\" rel=\"nofollow noreferrer\"><code>tempfile.TemporaryDirectory()</code></a>,  via <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#arguments\" rel=\"nofollow noreferrer\"><code>pyximport.install(build_dir=...)</code></a>), which has the advantage of keeping the system clean.</p>\n\n<p>The explicit <code>language_level</code> (<a href=\"https://stackoverflow.com/q/54900723/5769463\">what is <code>language_level</code>?</a>) is needed in order to prevent warnings.</p>\n\n<hr>\n\n<p>If you use a virtual environment and install you cython-package via <code>setup.py</code> (or a similar workflow), you need <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#distributing-cython-modules\" rel=\"nofollow noreferrer\">to make sure that <code>*.pxd</code> files are also included into installation</a>, i.e. your setup-file needs to be augmented with:</p>\n\n<pre><code>from setuptools import setup, find_packages, Extension\n# usual stuff for cython-modules here\n...\n\nkwargs = {\n      # usual stuff for cython-modules here\n      ...\n\n      #ensure pxd-files:\n      'package_data' : { 'my_module': ['*.pxd']},\n      'include_package_data' : True,\n      'zip_safe' : False  #needed because setuptools are used\n}\n\nsetup(**kwargs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1616908644, "post_id": 66838488, "comment_id": 118147533, "body": "And if my cdef function has the following signature: cdef foo(double* a)?"}, {"owner": {"reputation": 891, "user_id": 3957402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20768ed27767d8379bea560533e99f7b?s=128&d=identicon&r=PG&f=1", "display_name": "RogerS", "link": "https://stackoverflow.com/users/3957402/rogers"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1616926500, "post_id": 66838488, "comment_id": 118150548, "body": "Then you can use your answer, which is still correct :)"}], "tags": [], "owner": {"reputation": 891, "user_id": 3957402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20768ed27767d8379bea560533e99f7b?s=128&d=identicon&r=PG&f=1", "display_name": "RogerS", "link": "https://stackoverflow.com/users/3957402/rogers"}, "is_accepted": false, "score": 0, "last_activity_date": 1616926538, "last_edit_date": 1616926538, "creation_date": 1616907440, "answer_id": 66838488, "question_id": 42259741, "link": "https://stackoverflow.com/questions/42259741/how-to-test-functions-cdefd-in-cython/66838488#66838488", "title": "How to test functions cdef&#39;d in Cython?", "body": "<p>Although mentioned earlier, the easiest way is to change the <strong>cdef</strong> declaration for <strong>cpdef</strong> :</p>\n<pre><code>cpdef double foo(double a) nogil:\n    return 3. * a\n</code></pre>\n<p>No need to change anything else. For most purposes they are practically the same, cpdef has slightly more overhead but plays nicer with inheritance, see <a href=\"https://cython.readthedocs.io/en/latest/src/tutorial/cdef_classes.html\" rel=\"nofollow noreferrer\">details here</a>:</p>\n<blockquote>\n<p>The directive cpdef makes two versions of the method available; one\nfast for use from Cython and one slower for use from Python. Then:</p>\n<p>This does slightly more than providing a python wrapper for a cdef\nmethod: unlike a cdef method, a cpdef method is fully overridable by\nmethods and instance attributes in Python subclasses. It adds a little\ncalling overhead compared to a cdef method.</p>\n</blockquote>\n"}], "owner": {"reputation": 10450, "user_id": 2902280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a91ff21ec8618a8fd6a12461e5fa40e?s=128&d=identicon&r=PG&f=1", "display_name": "P. Camilleri", "link": "https://stackoverflow.com/users/2902280/p-camilleri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2255, "favorite_count": 5, "accepted_answer_id": 53696970, "answer_count": 2, "score": 17, "last_activity_date": 1616926538, "creation_date": 1487191707, "question_id": 42259741, "link": "https://stackoverflow.com/questions/42259741/how-to-test-functions-cdefd-in-cython", "title": "How to test functions cdef&#39;d in Cython?", "body": "<p>I have a .pyx file in which I define some functions, e.g.</p>\n\n<pre><code>cdef double foo(double a) nogil:\n    return 3. * a\n</code></pre>\n\n<p>How could I unit test the behavior of such functions outside the pyx file? Since they are cdef'd, I am not able to simply import them...</p>\n"}, {"tags": ["python", "arrays", "button", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6056440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a80e3d2d7f89182d243af33cc00bad?s=128&d=identicon&r=PG&f=1", "display_name": "Ann.S", "link": "https://stackoverflow.com/users/6056440/ann-s"}, "edited": false, "score": 0, "creation_date": 1487284486, "post_id": 42263314, "comment_id": 71728606, "body": "what does command= lambda row = j, column=k: changelabel(row,column)     do in this code??"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "reply_to_user": {"reputation": 3, "user_id": 6056440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a80e3d2d7f89182d243af33cc00bad?s=128&d=identicon&r=PG&f=1", "display_name": "Ann.S", "link": "https://stackoverflow.com/users/6056440/ann-s"}, "edited": false, "score": 0, "creation_date": 1487285915, "post_id": 42263314, "comment_id": 71729206, "body": "command is the argument passed to the Button just as you had used it. However we also want to include parameters to <code>changelabel</code> for it to know which row/column the button was being called from. <a href=\"http://effbot.org/tkinterbook/button.htm#Tkinter.Button.config-method\" rel=\"nofollow noreferrer\">The callback can be a function, bound method, or any other callable Python object</a>, here <code>changelabel</code> <i>is that function</i> and the <a href=\"http://www.secnetix.de/olli/Python/lambda_functions.hawk\" rel=\"nofollow noreferrer\">lambda</a> assigns <code>j</code> and <code>k</code> at runtime as parameters to pass to <code>changelabel</code>"}], "tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": true, "score": 0, "last_activity_date": 1487209706, "last_edit_date": 1495540406, "creation_date": 1487209179, "answer_id": 42263314, "question_id": 42259731, "link": "https://stackoverflow.com/questions/42259731/problems-assigning-a-value-from-a-randomly-populated-array-to-a-tkinter-button/42263314#42263314", "title": "Problems assigning a value from a randomly populated array to a tkinter button", "body": "<p>This may be what you're wanting to do.<br>\nBorrowing info from <a href=\"https://stackoverflow.com/questions/6920302/how-to-pass-arguments-to-a-button-command-in-tkinter\">this answer</a>, I put a <a href=\"http://effbot.org/zone/tkinter-callbacks.htm\" rel=\"nofollow noreferrer\">callback</a> in the Button command to pass the row and column numbers.<br>\nAlso, 'B' and 'T' are being appended to each array of <code>0</code>'s, instead of getting assigned to locations within the array, which is what I think you want.<br>\nI made a few other changes, including fixing the <code>for</code> loops to start from <code>0</code> (the first row), etc.   </p>\n\n<pre><code># previous code\n\namount_to_add='B'  \nmy_array = [[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],    \n[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],\n[0,0,0,0,0,0,0,0]]  \n\n# ... all code up to here unchanged ...\n\nfor _ in range(4):\n    my_array[random.randrange(len(my_array))][random.randrange(len(my_array))] = amount_to_add   \n\nTreasure='T'\nfor _ in range(4):\n    my_array[random.randrange(len(my_array))][random.randrange(len(my_array))] = Treasure  \n\n# print my_array # uncomment to check array values before shuffle\nrandom.shuffle(my_array)\n# print my_array # and after shuffle to confirm button is getting the correct values\n\ndef changelabel(j,k):\n    tkinter.messagebox.showinfo('Button %d,%d' % (j,k), 'Button %d,%d contains a %s' % (j,k, my_array[j][k]))\n        print('hello this button works')\n        # return # not needed  \n\ni = 0  \nbttn = []\n\nfor j in range(0,8):   \n    for k in range(8):\n        bttn.append(Button(TreasureMap, text = ' ', command= lambda row = j, column = k: changelabel(row, column)))\n        bttn[i].grid(row = j, column = k)           \n        i += 1\n</code></pre>\n\n<p>Feel free to comment or ask questions if this doesn't do what you were asking for. Otherwise, hope it helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 6056440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a80e3d2d7f89182d243af33cc00bad?s=128&d=identicon&r=PG&f=1", "display_name": "Ann.S", "link": "https://stackoverflow.com/users/6056440/ann-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42263314, "answer_count": 1, "score": 0, "last_activity_date": 1487209706, "creation_date": 1487191674, "question_id": 42259731, "link": "https://stackoverflow.com/questions/42259731/problems-assigning-a-value-from-a-randomly-populated-array-to-a-tkinter-button", "title": "Problems assigning a value from a randomly populated array to a tkinter button", "body": "<p>Hello I am trying to create a game where you click on a button and it tells you if it is treasure or a bandit.  It if is treasure then you get points if it is a bandit you loose your coins.\nI have created the following code but cannot find a way of finding out if I have managed to set the buttons to the values stored in the array.\nHow do you use the data in the array and when a button is clicked it tells you what the value is.\nAm I doing the array correctly any help would be appreciated I am going round in circles and cannot think straight now.</p>\n\n<pre><code>from tkinter import *  \nimport tkinter.messagebox  \nimport random\n\n#count=0\n\nroot = Tk()  \nTreasureMap = Frame(root)  \nTreasureMap.grid()  \n\nroot.title(\"TreasureMap\")  \ntext_box = Entry(TreasureMap, justify=RIGHT)\n\ntext_box.grid(row = 0, column = 0, columnspan = 8,)  \ntext_box.insert(0, \"0\")  \n\namount_to_add='B'  \nmy_array = [[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],    \n[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],\n[0,0,0,0,0,0,0,0]]  \nmy_array[random.randrange(len(my_array))].append(amount_to_add)  \nmy_array[random.randrange(len(my_array))].append(amount_to_add)  \nmy_array[random.randrange(len(my_array))].append(amount_to_add)  \nmy_array[random.randrange(len(my_array))].append(amount_to_add)  \n\nTreasure='T'\nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)    \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure) \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)  \nmy_array[random.randrange(len(my_array))].append(Treasure)  \n\n\nprint(my_array)  \n\n\ndef changelabel():  `   \n        tkinter.messagebox.showinfo('Hellow this button works') `` \n        print('hello this button works') ` ``  \n        print(my_array)  ``  ``   \n        return  \n\n\n\ni = 0  \nbttn = []  \nfor j in range(1,9):`     \n     for k in range(8):  ``    \n     bttn.append(Button(TreasureMap, text = ' ', value=random.shuffle      \n     (my_array),command=changelabel))       \n     bttn[i].grid(row = j, column = k)           \n     i += 1  ``     \n\n\n TreasureMap.mainloop()  \n</code></pre>\n"}, {"tags": ["python", "c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487191401, "post_id": 42259556, "comment_id": 71676986, "body": "can you try to write a video with VideoWriter class (e.g. mjpg codec) and try to load that one afterwards?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487191959, "post_id": 42259556, "comment_id": 71677268, "body": "I did so. I still get 0 fps even though the video is rendered correctly."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487193968, "post_id": 42259556, "comment_id": 71678357, "body": "but your other videos aren&#39;t rendered correctly? you wrote &quot;and I can&#39;t access the frames of the video&quot;"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487252167, "post_id": 42259556, "comment_id": 71706956, "body": "I can write a video correctly, and <code>ffplay</code> it, but I can&#39;t read a video, either a &quot;real&quot; video or one I synthesized with OpenCV."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487255570, "post_id": 42259556, "comment_id": 71709841, "body": "ah ok, I interpreted &quot;rendered correctly&quot; to mean that you can read (and display/render) the frames but the number-of-frames-property was 0. Can you post your code?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487257009, "post_id": 42259556, "comment_id": 71710957, "body": "I edited with my code. The code is incredibly simple and works fine on other machines."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487257277, "post_id": 42259556, "comment_id": 71711192, "body": "but does it read frames? <code>cv::Mat img; cap &gt;&gt; img; std::cout &lt;&lt; &quot;image read: &quot; &lt;&lt; img.empty()==false &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 2, "creation_date": 1487258247, "post_id": 42259556, "comment_id": 71711959, "body": "Um, yeah, this is embarrassing. It does read the frame and I can display it. Why might <code>cap.get()</code> be lying to me then?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487259043, "post_id": 42259556, "comment_id": 71712548, "body": "does <code>cap.get()</code> work in centOS without VM (if you have a machine to test it)? From what I&#39;ve read, the VideoCapture class might show different behaviour for different OS or devices, especially the properties get and set are or aren&#39;t present for each device. But I don&#39;t even know which underlying low-level function is called for video property .get maybe you&#39;ll have to debug openCV yourself to locate the problem."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487259089, "post_id": 42259556, "comment_id": 71712586, "body": "Does cap.set and cap.get of parameter <code>CV_CAP_PROP_POS_FRAMES</code> work?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487260445, "post_id": 42259556, "comment_id": 71713757, "body": "<code>CV_CAP_PROP_POS_FRAMES</code> returns <code>185759637.0</code> when I call it on the video immediately after loading it."}, {"owner": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 0, "creation_date": 1492954794, "post_id": 42259556, "comment_id": 74193368, "body": "Any update on this?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 1, "creation_date": 1493042563, "post_id": 42259556, "comment_id": 74229887, "body": "I believe this is fixed in OpenCV 3.2. @ShivamGaur"}, {"owner": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 1, "creation_date": 1493100458, "post_id": 42259556, "comment_id": 74255053, "body": "Oh, okay. I did come across the same issue (where CAP_PROP_FRAME_COUNT returned 0 frames ) when using the python wrapper for opencv 3.2. But was able to fix it by installing <code>ffmpeg-devel</code>"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "edited": false, "score": 0, "creation_date": 1493123037, "post_id": 42259556, "comment_id": 74269943, "body": "Then maybe it&#39;s a codec issue as well. Good to know. Post it as an answer and I&#39;ll accept it."}, {"owner": {"reputation": 121, "user_id": 7199416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sjC6PWJsqAU/AAAAAAAAAAI/AAAAAAAADFo/Z9m4ssYaTp0/photo.jpg?sz=128", "display_name": "user7199416", "link": "https://stackoverflow.com/users/7199416/user7199416"}, "edited": false, "score": 0, "creation_date": 1551096555, "post_id": 42259556, "comment_id": 96502117, "body": "Same problem as @Hal T. Didn&#39;t work even after installing ffmpeg. I can read frames but cv2.CAP_PROP_FRAME_COUNT returns 0."}], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 2453904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc4d5409cb96d6d7922ca4cfc8c3100?s=128&d=identicon&r=PG", "display_name": "barceloco", "link": "https://stackoverflow.com/users/2453904/barceloco"}, "is_accepted": true, "score": 1, "last_activity_date": 1496948667, "creation_date": 1496948667, "answer_id": 44443705, "question_id": 42259556, "link": "https://stackoverflow.com/questions/42259556/opencv-videocapture-says-video-has-0-frames-c-and-python/44443705#44443705", "title": "OpenCV VideoCapture says video has 0 frames (C++ and Python)", "body": "<p>This looks similar to the codec issues I had, and described <a href=\"https://stackoverflow.com/questions/44426099/opencv-cannot-read-ffmpeg-videos/44426100#44426100\">in this stack overflow post</a>. In short: I used <code>ffmpeg</code> to convert the video:</p>\n\n<p><code>ffmpeg -i input.avi -c:v libx264 -vf format=yuv420p output.mp4</code></p>\n"}], "owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 0, "accepted_answer_id": 44443705, "answer_count": 1, "score": 3, "last_activity_date": 1496948667, "creation_date": 1487191069, "last_edit_date": 1487256989, "question_id": 42259556, "link": "https://stackoverflow.com/questions/42259556/opencv-videocapture-says-video-has-0-frames-c-and-python", "title": "OpenCV VideoCapture says video has 0 frames (C++ and Python)", "body": "<p>I'm using OpenCV 2.4.9 and trying to open a video. <code>isOpened()</code> successfully runs, but when I try to look at the number of frames the video has, it returns 0, and I can't access the frames of the video. This happens with every video I have. I can use the same videos on a different machine (the issue happens in my CentOS 7 VM, the videos are in a shared folder and the host OS can access them fine in OpenCV). Ffmpeg is installed and I can <code>ffplay</code> the videos and <code>ffmpeg -i</code> tells me the videos have a nonzero number of frames. My OpenCV was compiled with ffmpeg successfully:</p>\n\n<pre><code>\"  Video I/O:\\n\"\n\"    DC1394 1.x:                  NO\\n\"\n\"    DC1394 2.x:                  YES (ver 2.2.2)\\n\"\n\"    FFMPEG:                      YES\\n\"\n\"      codec:                     YES (ver 56.26.100)\\n\"\n\"      format:                    YES (ver 56.25.101)\\n\"\n\"      util:                      YES (ver 54.20.100)\\n\"\n\"      swscale:                   YES (ver 3.1.101)\\n\"\n\"      gentoo-style:              YES\\n\"\n\"    GStreamer:                   \\n\"\n\"      base:                      YES (ver 0.10.36)\\n\"\n\"      app:                       YES (ver 0.10.36)\\n\"\n\"      video:                     YES (ver 0.10.36)\\n\"\n\"    OpenNI:                      NO\\n\"\n\"    OpenNI PrimeSensor Modules:  NO\\n\"\n\"    PvAPI:                       NO\\n\"\n\"    GigEVisionSDK:               NO\\n\"\n\"    UniCap:                      NO\\n\"\n\"    UniCap ucil:                 NO\\n\"\n\"    V4L/V4L2:                    Using libv4l (ver 0.9.5)\\n\"\n\"    XIMEA:                       NO\\n\"\n\"    Xine:                        NO\\n\"\n\"\\n\"\n</code></pre>\n\n<p>My code correctly compiles and I can read images with OpenCV.</p>\n\n<p>The code is incredibly basic. For Python:</p>\n\n<pre><code>import cv2\ncap = cv2.VideoCapture('test.mp4')\nprint cap.isOpened()\nprint cap.get(cv2.cv.CV_CAP_PROP_FPS)\nprint cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT)\n&gt;&gt; True\n&gt;&gt; 0.0\n&gt;&gt; 0\n</code></pre>\n\n<p>And for C++:</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, char *argv[])\n{\n    cv::VideoCapture cap;\n    cap.open(\"test.mp4\");\n    if(cap.isOpened())\n    {\n        cout &gt;&gt; cap.get(CV_CAP_PROP_FPS) &gt;&gt; endl;\n        cout &gt;&gt; cap.get(CV_CAP_PROP_FRAME_COUNT) &gt;&gt; endl;\n    }\n    return(0);\n}\n</code></pre>\n\n<p>Which prints 0 as well. </p>\n"}, {"tags": ["python", "bash", "shell", "awk"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 5, "creation_date": 1487191048, "post_id": 42259527, "comment_id": 71676791, "body": "above or below it? your example disagrees with your explanation"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1487191119, "post_id": 42259527, "comment_id": 71676840, "body": "<code>set(f2.readlines()) - set(f1.readlines())</code> would work for your example, please give an example that better represents the logic you wish to apply."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1487191548, "post_id": 42259527, "comment_id": 71677054, "body": "Will the two files be sorted in the same way (if <code>test@test.com</code> exists it will be before <code>bob@test.com</code>... etc) and will all e-mails in file 1 be in file 2?"}, {"owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1487191673, "post_id": 42259527, "comment_id": 71677126, "body": "Whoops sorry, @TemporalWolf, it should be above in the example. Consider file 2 reversed (updating now)"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1487191714, "post_id": 42259527, "comment_id": 71677150, "body": "What would your output look like if both files looked like file1?"}, {"owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1487191974, "post_id": 42259527, "comment_id": 71677274, "body": "@TemporalWolf - All emails should be in file 2, yes. Also, the order does not matter."}], "answers": [{"comments": [{"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 0, "creation_date": 1487192552, "post_id": 42259947, "comment_id": 71677588, "body": "I suppose this is python.... It would be helpful to clarify it in your answer for other readers."}, {"owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487193800, "post_id": 42259947, "comment_id": 71678275, "body": "I am testing this but having an issue. It seems to be switching the keys and values within the dictionary which is throwing some errors. For example, at some point it is giving me a <code>KeyError</code> for one of the email addresses as it is a value in the dictionary, and not a key. But for others, the email address is the key in the dict."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487197873, "post_id": 42259947, "comment_id": 71680344, "body": "@Neemaximo I updated it to skip bad lines and only add in good pairs... apparently your input file is not a pure list... perhaps there was a header line?"}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1487197845, "last_edit_date": 1487197845, "creation_date": 1487192411, "answer_id": 42259947, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match/42259947#42259947", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>Assuming the lists are unordered and file2 isn't too large, building a dictionary for the second file seems like a decent option:</p>\n\n<pre><code>users = {}\nwith open(\"file2\") as file2:\n    try:\n        email = \"\"  # initialize\n        while True:\n            while \"@\" not in email:\n                username = email\n                email = file2.next().strip()\n            users[email] = username\n            email = \"\"\n            username = \"\"\n    except StopIteration:\n        pass\nprint users\nresult = []\nwith open(\"file1\") as file1:\n    try:\n        for line in file1:\n            result.append(users[line.strip()])\n    except StopIteration:\n        pass\n</code></pre>\n\n<p><code>result</code> will contain a list of usernames with <code>O(m+n)</code> time and <code>O(m)</code> space (for the dictionary for file2)</p>\n"}, {"comments": [{"owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487192826, "post_id": 42259974, "comment_id": 71677751, "body": "Taking a look at this - This also pulls the email addresses, how would you get it to pull just the usernames? I&#39;m looking at grep for this but is there a way to grep <code>@test.com</code> and then only take the line above it?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487193178, "post_id": 42259974, "comment_id": 71677946, "body": "@Neemaximo You might want to double check with more complex inputs.  -v should be giving you the lines that don&#39;t match the regex."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487193805, "post_id": 42259974, "comment_id": 71678279, "body": "@Neemaximo <code>-v</code> should not work in your case. <code>-v</code> is giving the lines not matching the regex. We don&#39;t need to isolate the username (or we have to do so?) We look at file1 - 1st line - pattern = <code>&quot;test@test.com&quot;</code>. With this pattern (test@test.com) grep looks in file2. If pattern is found on file2 , grep returns the line before the line found. That simple. No space for -v option here."}, {"owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487194106, "post_id": 42259974, "comment_id": 71678417, "body": "I do want to isolate the username. I want to check the email addresses, and then only return the username."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487194946, "post_id": 42259974, "comment_id": 71678847, "body": "@Neemaximo Yes my solution has a bug: the grep -B1 returns the line before match together with the match. So it returns two lines : email and user name. This can be solved by an extra grep. See updated answer in a minute"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1487196530, "post_id": 42259974, "comment_id": 71679664, "body": "<code>line</code>only returns the first line, not all matching lines. Perhaps use <code>grep -v @</code> hoping that no real name has a <code>@</code> in it."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1487196841, "post_id": 42259974, "comment_id": 71679807, "body": "@WalterA but line accepts input by grep, so by default will get the first line of grep match, not from the file . It could be head -n1 instead. grep pipes to line."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1487197224, "post_id": 42259974, "comment_id": 71680026, "body": "@GeorgeVasiliou When the input file has 4 lines, I want 4 lines of output."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1487197596, "post_id": 42259974, "comment_id": 71680208, "body": "@WalterA Damn. With line or head , you will get only one. This work around is wrong. Thanks Walter."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "edited": false, "score": 0, "creation_date": 1487197708, "post_id": 42259974, "comment_id": 71680268, "body": "@Neemaximo updated again. Now should be fine , using an extra grep -v &quot;@&quot;... thanks to Walter. Is not a matter of points,is a matter of honor!"}], "tags": [], "owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "is_accepted": false, "score": 0, "last_activity_date": 1487197654, "last_edit_date": 1487197654, "creation_date": 1487192494, "answer_id": 42259974, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match/42259974#42259974", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>This should work: <code>grep -B1 -F -f file1 file2</code></p>\n\n<p>-B1 : Get 1 line before match (GNU grep)<br>\n-F  : Fixed string match, not regex<br>\n-f  : Load patterns from file = file1 in your case<br>\nfile2: The file to apply grep and get the previous line (B1)</p>\n\n<p>Update:<br>\nAfter some testing, this solution has a bug: grep returns two lines.<br>\nOne line with the pattern matched = email<br>\nAnother line before pattern match = user name.</p>\n\n<p>Due to the -B1 grep operator , the line before pattern match goes first.</p>\n\n<p>The easy way to get only the first line = user name and not to get the pattern match (second line) is:</p>\n\n<pre><code>grep -B1 -F -f file1 file2 |grep -v \"@\"\n</code></pre>\n\n<p>This will works considering that user names do not include \"@\" . </p>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1487195354, "creation_date": 1487195354, "answer_id": 42260723, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match/42260723#42260723", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>First make an array with all previous lines from file2.<br>\nEach command fom the first step ends with <code>next</code>.<br>\nNow parse file1 (<code>NR</code> will be greater than <code>FNR</code>) and look them up in the array.</p>\n\n<pre><code>awk 'NR==FNR{a[$1]=x;x=$0;next} $1 in a{print a[$1]}' file2 file1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 4, "creation_date": 1487203754, "post_id": 42261560, "comment_id": 71682417, "body": "Nice. Ed Morton == Awk Wizard :)"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1487205927, "last_edit_date": 1487205927, "creation_date": 1487198883, "answer_id": 42261560, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match/42261560#42261560", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>This is the robust, efficient way to do what you want:</p>\n\n<pre><code>$ awk 'NR==FNR{a[$1];next} NR%2{prev=$0;next} $1 in a{print prev}' file1 file2\ntesting\nrobert\nsally\neve92\n</code></pre>\n\n<p>It strips leading/trailing blanks from the email addresses, does string (rather than regexp) matching on the whole email address from both files, and only compares the email addresses to every 2nd line of file2 so there is zero chance of a false match and zero chance of missing a real match.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1487206552, "last_edit_date": 1487206552, "creation_date": 1487201377, "answer_id": 42262084, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match/42262084#42262084", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>If the email are unique (which, assumably, they would be), you can build an array with file 2 then index that with file 1:</p>\n\n<pre><code>$ awk 'NR==FNR{getline l; arr[l]=$1; next} $1 in arr {print arr[$1]}' f2 f1\ntesting\nrobert\nsally\neve92\n</code></pre>\n\n<p>In Python, you might do:</p>\n\n<pre><code>with open(\"f2\") as f2:\n    keys=[(next(f2).strip(), k.strip()) for k in f2]\n\nwith open(\"f1\") as f1:\n    emails=[e.strip() for e in f1]\n\nfor e in emails:\n    for t in keys:\n        if t[0]==e:\n            print t[1]\n</code></pre>\n\n<p>That supports duplicate entries. If you know your email addresses are unique, it is much more efficient:</p>\n\n<pre><code>with open(\"f2\") as f2:\n    keys={next(f2).strip(): k.strip() for k in f2}      \n\nwith open(\"f1\") as f1:\n    for e in f1:\n        e=e.strip()\n        print keys.get(e, \"{} not found\".format(e))\n</code></pre>\n\n<p>Which is essentially the same as the <code>awk</code> program.</p>\n"}], "owner": {"reputation": 16339, "user_id": 1022857, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5f31664438e1720e1522d25d0938699?s=128&d=identicon&r=PG", "display_name": "Neemaximo", "link": "https://stackoverflow.com/users/1022857/neemaximo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1487206552, "creation_date": 1487190985, "last_edit_date": 1487191715, "question_id": 42259527, "link": "https://stackoverflow.com/questions/42259527/match-strings-in-2-files-and-return-the-line-above-in-file-2-if-they-match", "title": "Match strings in 2 files and return the line above in file 2 if they match", "body": "<p>I have a list of email addresses in file 1 and I am trying to lookup those email addresses (from file 1) in file 2. If the email address is in file 2, I want it to return the line above it, which is their username. For example:</p>\n\n<p>Here is file 1:</p>\n\n<pre><code>test@test.com\nbob@test.com\nsally@test.com\neve@test.com\n</code></pre>\n\n<p>Here is file 2:</p>\n\n<pre><code>testing\ntest@test.com\nrobert\nbob@test.com\nsally\nsally@test.com\neve92\neve@test.com\n</code></pre>\n\n<p>I want the output to be:</p>\n\n<pre><code>testing\nrobert\nsally\neve92\n</code></pre>\n\n<p>I am looking into <code>awk</code>, but can't seem to figure it out. Any thoughts on how best to do this? Willing to do it through bash or python or really whatever you think is best. Thanks!</p>\n"}, {"tags": ["python", "arrays", "numpy", "2d", "slice"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1487191211, "post_id": 42259464, "comment_id": 71676898, "body": "one trick would be to replace <code>row-1</code> with <code>row-(row!=0)</code> and similarly for <code>column</code>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1487191295, "post_id": 42259464, "comment_id": 71676938, "body": "<code>min(max(0, row-1), MAX_INDEX)</code>"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1487191494, "post_id": 42259464, "comment_id": 71677032, "body": "@TadhgMcDonald-Jensen you don&#39;t need to cut off at the right side; when slicing a too large upper bound is handled gracefully."}, {"owner": {"reputation": 27, "user_id": 7554794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a47abb361c35285decc9e65314b24a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tea", "link": "https://stackoverflow.com/users/7554794/tea"}, "edited": false, "score": 0, "creation_date": 1487191586, "post_id": 42259464, "comment_id": 71677078, "body": "Thanks Paul, it works exectly like I&#39;d hoped!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7554794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a47abb361c35285decc9e65314b24a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tea", "link": "https://stackoverflow.com/users/7554794/tea"}, "edited": false, "score": 0, "creation_date": 1499001494, "post_id": 43944637, "comment_id": 76720966, "body": "This is useful. I came back to this thread because I wanted to know how to search a larger area around a specific index. I made it work, but the code was hideous. This works perfect for doing that too. Here&#39;s the code I used to search in all directions with a length of 3.       for i, j in np.ndindex(a.shape):          check = a[max(i-3, 0):min(i+4, height), max(j-3, 0):min(j+4, width)]          print(i, j)          print(check)"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 27, "user_id": 7554794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a47abb361c35285decc9e65314b24a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tea", "link": "https://stackoverflow.com/users/7554794/tea"}, "edited": false, "score": 0, "creation_date": 1499094442, "post_id": 43944637, "comment_id": 76755730, "body": "@Tea. You should select answers that help you solve your issue. That is the standard operating procedure on this site. You can always change your selection later."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1494614869, "creation_date": 1494614869, "answer_id": 43944637, "question_id": 42259464, "link": "https://stackoverflow.com/questions/42259464/how-to-slice-a-2d-numpy-array-to-get-its-direct-neighbors/43944637#43944637", "title": "How to slice a 2D numpy array to get its direct neighbors?", "body": "<p>You can simplify the way your loop is written and not assume as much about the contents of the array, making your code more flexible. Numpy has an <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.nditer.html\" rel=\"nofollow noreferrer\"><code>nditer</code></a> class that can be used to iterate over an array. You can also use it to get the <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#tracking-an-index-or-multi-index\" rel=\"nofollow noreferrer\">multi-dimensional index</a> of each element. Iteration can be further simplified using the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html\" rel=\"nofollow noreferrer\"><code>ndenumerate</code></a> class, similar to Pythons builtin <a href=\"https://docs.python.org/3/library/functions.html#enumerate\" rel=\"nofollow noreferrer\"><code>enumerate</code></a>. If you do not need to get the elements back, just the index, you can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndindex.html\" rel=\"nofollow noreferrer\"><code>ndindex</code></a>. Here is an example using <code>ndindex</code>:</p>\n\n<pre><code>for r, c in ndindex(tilemap.shape):\n    check = tilemap[max(r-1, 0):min(r+1, mapheight), max(c-1, 0):min(c+1, mapwidth)]\n    print(check)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7554794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a47abb361c35285decc9e65314b24a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tea", "link": "https://stackoverflow.com/users/7554794/tea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1046, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1494614869, "creation_date": 1487190752, "last_edit_date": 1487191720, "question_id": 42259464, "link": "https://stackoverflow.com/questions/42259464/how-to-slice-a-2d-numpy-array-to-get-its-direct-neighbors", "title": "How to slice a 2D numpy array to get its direct neighbors?", "body": "<p>I want to loop through my 2D numpy array and check all its direct neighbors.\nIf I make a numpy array like so:</p>\n\n<pre><code>tilemap = np.arange(16).reshape(4,4)\n</code></pre>\n\n<p>It will look something like this:</p>\n\n<pre><code> [[ 0  1  2  3]\n [ 4  5  6  7]\n [ 8  9 10 11]\n [12 13 14 15]]\n</code></pre>\n\n<p>The loop that I created to help me find the neighbors for each spot in the array looks like this:</p>\n\n<pre><code> import numpy as np\n\n mapwidth = 4\n mapheight = 4\n\n tilemap = np.arange(mapwidth * mapheight).reshape(mapwidth, mapheight)\n\n row = 0\n for i in tilemap:\n     count = 0\n     for j in i:\n         column = j % mapwidth\n         check = tilemap[row-1:row+2, column-1:column+2]\n         print(check)\n         count += 1\n         if count % mapheight == 0:\n             row += 1\n</code></pre>\n\n<p>However, when I do this, I will not find any neighbors for the spot in the array with the values 0, 1, 2, 3, 4, 8, and 12. I understand why this is the case. for example, if I take the value of 8. it has the indices of [2,0]. the row-1 will result in -1, which is the same as index 3 in this example. the row+2 is 2. And slicing 2:3 will result in nothing because there is nothing between 2 and 3.</p>\n\n<p>Anyway, the result I'm looking for is something like this (for value 8):</p>\n\n<pre><code>[[4  5]\n[ 8  9]\n[12 13]]\n</code></pre>\n\n<p>I know I can achieve this by piling some if-statements but I wonder if there is a more elegant way of dealing with this.</p>\n\n<p>Thanks for your time.</p>\n\n<p><em>(For those who are curious to know this):\nThe neighbors for e.g. value 11 actually return like I want them to, without any errors. It returns this:</em></p>\n\n<pre><code>[[6  7]\n[10 11]\n[14 15]]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I should also mention I tried this:</p>\n\n<pre><code>check = np.take(tilemap, tilemap[row-1:row+2, column-1:column+2], mode = 'clip')\n</code></pre>\n\n<p>But this did not work.</p>\n"}, {"tags": ["python", "collections", "enumeration"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1487190638, "post_id": 42259383, "comment_id": 71676550, "body": "&quot;In other languages, in each cycle of the for, the counter.most_common() value is evaluated&quot; - what languages do that? I don&#39;t know of any. In every language I know of with a for-each loop, the thing you&#39;re looping over is only evaluated once."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1487190723, "post_id": 42259383, "comment_id": 71676605, "body": "Or in short: Don&#39;t confuse for-each with C-style <code>for</code> loops. All languages with a for-each-loop that I know of, evaluate the iterable once at the start. The difference with e.g. Java iterators is that <code>.most_common()</code> returns a fresh list that does not reference the original counter."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1487190732, "post_id": 42259383, "comment_id": 71676610, "body": "You might be thinking of cases where you&#39;re looping over a lazy object that generates values as needed, or you might be mistaking the effects of mutating the collection for reevaluating it, but <code>most_common</code> eagerly creates a new list independent of the counter it was created from."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1487190875, "post_id": 42259383, "comment_id": 71676679, "body": "It&#39;s not allowed to modify a <code>set</code> during iteration however this will also raise a <code>RuntimeError</code>: <code>RuntimeError: Set changed size during iteration</code>. As your operation does not change the size of the counter and is also not raising an exception I&#39;d assume it&#39;s safe."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487192719, "post_id": 42259383, "comment_id": 71677697, "body": "<code>most_common()</code> returns a list of the <i>n</i> most common elements at the time it&#39;s called, namely once at the beginning of the <code>for</code> loop. The values returned may no longer be the current most common ones since you&#39;re changing the <code>Counter</code> object inside the loop. It might be possible to suggest an alternative or workaround, if you would <a href=\"https://stackoverflow.com/posts/42259383/edit\">edit</a> your question and explain what you&#39;re ultimately trying to achieve."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487193304, "post_id": 42259383, "comment_id": 71678019, "body": "Documentation of the <a href=\"https://docs.python.org/2/reference/compound_stmts.html#the-for-statement\" rel=\"nofollow noreferrer\">&#39;for&#39; statement</a> explains that &quot;The expression list is evaluated once; it should yield an iterable object.&quot; In this case the &quot;expression list&quot; is the call to the <code>counter.most_common()</code> method."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1487194754, "post_id": 42259383, "comment_id": 71678746, "body": "It is safe in your case as you are not iterating over the actual <code>Counter</code> but over a list returned by <code>Counter.most_common</code> instead. So the collection you are iterating over is different from the collection you modify. In general it is safe to modify a collection you are iterating over as long as you <i>don&#39;t change its size</i>."}], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1487190837, "creation_date": 1487190837, "answer_id": 42259488, "question_id": 42259383, "link": "https://stackoverflow.com/questions/42259383/changing-a-collection-counter-during-enumeration/42259488#42259488", "title": "Changing a collection.Counter during enumeration?", "body": "<p>No, it doesn't.  A more illustrative example:</p>\n\n<pre><code>def example():\n    print(\"Ping\")\n    return [1,2,3,4]\n\nfor x in example():\n    print(x)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Ping\n1\n2\n3\n4\n</code></pre>\n"}], "owner": {"reputation": 7273, "user_id": 227026, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b0c6d3f2fcd9b18ac11747d9d56627a0?s=128&d=identicon&r=PG", "display_name": "Infinite Possibilities", "link": "https://stackoverflow.com/users/227026/infinite-possibilities"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "closed_date": 1487193209, "answer_count": 1, "score": 0, "last_activity_date": 1487192356, "creation_date": 1487190488, "last_edit_date": 1487192356, "question_id": 42259383, "link": "https://stackoverflow.com/questions/42259383/changing-a-collection-counter-during-enumeration", "closed_reason": "Duplicate", "title": "Changing a collection.Counter during enumeration?", "body": "<pre><code>counter = Counter()\n// fill data into counter\nfor a, b in counter.most_common():\n    if (b &gt; 1):\n        counter[a] = np.log(b)\n    else:\n        counter[a] = -np.log((1 / (b+0.01)))\n</code></pre>\n\n<p>As I see, this is safe, based on my trial. No bad thing happens when I change the collection while I am enumerating it. In other languages, in each cycle of the <code>for</code>, the <code>counter.most_common()</code> value is evaluated.</p>\n\n<p>Doesn't this happen in Python as well?</p>\n"}, {"tags": ["python", "airflow"], "answers": [{"tags": [], "owner": {"reputation": 609, "user_id": 7438942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hzM1oYUUBsM/AAAAAAAAAAI/AAAAAAAAAAA/Cs7wkayAniw/photo.jpg?sz=128", "display_name": "Necravolver", "link": "https://stackoverflow.com/users/7438942/necravolver"}, "is_accepted": false, "score": 0, "last_activity_date": 1487196813, "creation_date": 1487196813, "answer_id": 42261092, "question_id": 42259298, "link": "https://stackoverflow.com/questions/42259298/bashoperator-doent-run-bash-file-apache-airflow/42261092#42261092", "title": "BashOperator doen&#39;t run bash file apache airflow", "body": "<p>Try without the \"sh\"  just set the command to \"home/ubuntu/test/inst/scripts/test.sh\"</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 7126545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57c7f5ca2ef392292135c215b4c0b3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7126545", "link": "https://stackoverflow.com/users/7126545/user7126545"}, "is_accepted": false, "score": 2, "last_activity_date": 1487246968, "creation_date": 1487246968, "answer_id": 42273547, "question_id": 42259298, "link": "https://stackoverflow.com/questions/42259298/bashoperator-doent-run-bash-file-apache-airflow/42273547#42273547", "title": "BashOperator doen&#39;t run bash file apache airflow", "body": "<p>use just the script path, without \"sh\": \ncreate_command = \"/home/ubuntu/test/inst/scripts/test.sh\"</p>\n\n<p>also make sure that \"airflow\" user has permissions to execute \"test.sh\" script. </p>\n"}, {"tags": [], "owner": {"reputation": 729, "user_id": 4487949, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-kVkwRffXbDA/AAAAAAAAAAI/AAAAAAAAkOQ/BdEbIddfi6s/photo.jpg?sz=128", "display_name": "Nitesh Singh", "link": "https://stackoverflow.com/users/4487949/nitesh-singh"}, "is_accepted": true, "score": 17, "last_activity_date": 1488521925, "creation_date": 1488521925, "answer_id": 42571965, "question_id": 42259298, "link": "https://stackoverflow.com/questions/42259298/bashoperator-doent-run-bash-file-apache-airflow/42571965#42571965", "title": "BashOperator doen&#39;t run bash file apache airflow", "body": "<p>Add a space after .sh it should work\nthis is mentioned in the <a href=\"https://cwiki.apache.org/confluence/display/AIRFLOW/Common+Pitfalls\" rel=\"noreferrer\">confluence page</a> of airflow</p>\n\n<pre><code>t2 = BashOperator(\ntask_id='sleep',\nbash_command=\"/home/batcher/test.sh\", // This fails with `Jinja template not found` error\n#bash_command=\"/home/batcher/test.sh \", // This works (has a space after)\ndag=dag) \n</code></pre>\n"}], "owner": {"reputation": 2821, "user_id": 1972924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1071145112b4f0fcd83e78cabe98aab?s=128&d=identicon&r=PG", "display_name": "Kush Patel", "link": "https://stackoverflow.com/users/1972924/kush-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9657, "favorite_count": 3, "accepted_answer_id": 42571965, "answer_count": 3, "score": 9, "last_activity_date": 1488521925, "creation_date": 1487190218, "last_edit_date": 1495540494, "question_id": 42259298, "link": "https://stackoverflow.com/questions/42259298/bashoperator-doent-run-bash-file-apache-airflow", "title": "BashOperator doen&#39;t run bash file apache airflow", "body": "<p>I just started using apache airflow. I am trying to run test.sh file from airflow, however it is not work. </p>\n\n<p>Following is my code, file name is test.py</p>\n\n<pre><code>import os\nfrom airflow import DAG\nfrom airflow.operators.bash_operator import BashOperator\nfrom datetime import datetime, timedelta\n\n\ndefault_args = {\n    'owner': 'airflow',\n    'depends_on_past': False,\n    'start_date': datetime(2015, 6, 1),\n    'email': ['airflow@airflow.com'],\n    'email_on_failure': False,\n    'email_on_retry': False,\n    'retries': 1,\n    'retry_delay': timedelta(minutes=5),\n    # 'queue': 'bash_queue',\n    # 'pool': 'backfill',\n    # 'priority_weight': 10,\n    # 'end_date': datetime(2016, 1, 1),\n}\n\ndag = DAG('test', default_args=default_args)\n\n# t1 and t2 are examples of tasks created by instantiating operators\nt1 = BashOperator(\n    task_id='print_date',\n    bash_command='date',\n    dag=dag)\n\ncreate_command = \"sh home/ubuntu/test/inst/scripts/test.sh\"\n\nif os.path.exists(create_command):\n   t2 = BashOperator(\n        task_id= 'cllTest',\n        bash_command=create_command,\n        dag=dag\n   )\nelse:\n    raise Exception(\"Cannot locate {}\".format(create_command))\n\nt2.set_upstream(t1)\n</code></pre>\n\n<p>when I run  python ~/airflow/dags/test.py, it doesn't throw any error. </p>\n\n<p>However, When I run airflow list_dag, it throws following error:</p>\n\n<pre><code>[2017-02-15 20:20:02,741] {__init__.py:36} INFO - Using executor SequentialExecutor\n[2017-02-15 20:20:03,070] {models.py:154} INFO - Filling up the DagBag from /home/ubuntu/airflow/dags\n[2017-02-15 20:20:03,135] {models.py:2040} ERROR - sh home/ubuntu/test/inst/scripts/test.sh\nTraceback (most recent call last):\n  File \"/home/ubuntu/anaconda2/lib/python2.7/site-packages/airflow/models.py\", line 2038, in resolve_template_files\n    setattr(self, attr, env.loader.get_source(env, content)[0])\n  File \"/home/ubuntu/anaconda2/lib/python2.7/site-packages/jinja2/loaders.py\", line 187, in get_source\n    raise TemplateNotFound(template)\nTemplateNotFound: sh home/ubuntu/test/inst/scripts/test.sh\n</code></pre>\n\n<p>I have tried to used <a href=\"https://stackoverflow.com/questions/40146934/how-to-run-bash-script-file-in-airflow\">How to run bash script file in Airflow</a> for answer, it doesn't work</p>\n\n<p>Where I am making mistake ? </p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 2, "last_activity_date": 1487190245, "creation_date": 1487190245, "answer_id": 42259309, "question_id": 42259289, "link": "https://stackoverflow.com/questions/42259289/local-variable-script1-referenced-before-assignment/42259309#42259309", "title": "local variable &#39;script1&#39; referenced before assignment", "body": "<p>You need to look at all the routes through your code. If the request is not  POST, or the form is not valid, then script1 and div1 are not defined; yet you still use them at the end of the function.</p>\n\n<p>Either ensure that they are defined in all routes, or don't use them in the cases where they are not defined.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 7433056, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1d778272a2f55a2e686f2b40eb56ad42?s=128&d=identicon&r=PG&f=1", "display_name": "sdg", "link": "https://stackoverflow.com/users/7433056/sdg"}, "is_accepted": false, "score": 0, "last_activity_date": 1487200592, "creation_date": 1487200592, "answer_id": 42261929, "question_id": 42259289, "link": "https://stackoverflow.com/questions/42259289/local-variable-script1-referenced-before-assignment/42261929#42261929", "title": "local variable &#39;script1&#39; referenced before assignment", "body": "<p>I need to include script1 = None . Once that's included I cleared the reference before assignment inbound error.</p>\n"}], "owner": {"reputation": 381, "user_id": 7433056, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1d778272a2f55a2e686f2b40eb56ad42?s=128&d=identicon&r=PG&f=1", "display_name": "sdg", "link": "https://stackoverflow.com/users/7433056/sdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1487223419, "creation_date": 1487190173, "last_edit_date": 1487223419, "question_id": 42259289, "link": "https://stackoverflow.com/questions/42259289/local-variable-script1-referenced-before-assignment", "title": "local variable &#39;script1&#39; referenced before assignment", "body": "<p>Thank you in advance for you who could be able to help this. I spent many hours working on this error but can't figure it out. I am trying to use a form to grab a ticker and pass the ticker to a simple chart using bokeh and then deliver the result to views.py and display it on html. first of all I have the following code in my views.py.</p>\n\n<pre><code>def pme(request):\nos.chdir(os.path.dirname(__file__))\nresult = None\nif request.method =='POST':\n    form = InputForm(request.POST)\n    if form.is_valid():\n        forms = form.save(commit=False)\n        result = macd(forms.ticker)\n        script1, div1 = components(result, CDN)\nelse:\n    form = Ticker()\n\nreturn render(request,'pme.html',\n                          {\"form\":form,\n                           \"the_script1\":script1,\n                            \"the_div1\":div1,\n                           })\n</code></pre>\n\n<p>For some reasons, script1 is referenced before?</p>\n\n<p>my macd(forms.ticker) simply returns p and it works fine by itself.</p>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4283, "user_id": 2148023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/356193279a082d3077d672f63bfc6c33?s=128&d=identicon&r=PG&f=1", "display_name": "Carles Mitjans", "link": "https://stackoverflow.com/users/2148023/carles-mitjans"}, "edited": false, "score": 2, "creation_date": 1487189850, "post_id": 42259166, "comment_id": 71676151, "body": "This means function <code>unpaidMembers.items()</code> doesn&#39;t return 3 items in the form of a tuple. Try printing its value to know what type of return value you get: <code>print unpaidMembers.items()</code>"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1487190033, "post_id": 42259166, "comment_id": 71676252, "body": "Your code does not fit your traceback. In the code the problem is corrected but there&#39;s the <code>:</code> missing."}, {"owner": {"reputation": 342, "user_id": 4601536, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a9399e63d67c1745e2f10e306dcc4fe?s=128&d=identicon&r=PG&f=1", "display_name": "The Stupid Engineer", "link": "https://stackoverflow.com/users/4601536/the-stupid-engineer"}, "reply_to_user": {"reputation": 4283, "user_id": 2148023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/356193279a082d3077d672f63bfc6c33?s=128&d=identicon&r=PG&f=1", "display_name": "Carles Mitjans", "link": "https://stackoverflow.com/users/2148023/carles-mitjans"}, "edited": false, "score": 0, "creation_date": 1487190092, "post_id": 42259166, "comment_id": 71676287, "body": "Looks like you&#39;re trying to unpack a tuple containing two items into three distinct items. Like @CarlesMitjans said, try printing out the value returned by <code>unpaidMembers.items()</code>. You may have to do some additional processing to turn it into 3 items."}], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "is_accepted": false, "score": 3, "last_activity_date": 1487190374, "creation_date": 1487190374, "answer_id": 42259355, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2/42259355#42259355", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p>In this line:</p>\n\n<pre><code>for name, email, lastname in unpaidMembers.items():\n</code></pre>\n\n<p><code>unpaidMembers.items()</code> must have only two values per iteration.</p>\n\n<p>Here is a small example to illustrate the problem:</p>\n\n<p>This will work:</p>\n\n<pre><code>for alpha, beta, delta in [(\"first\", \"second\", \"third\")]:\n    print(\"alpha:\", alpha, \"beta:\", beta, \"delta:\", delta)\n</code></pre>\n\n<p>This will fail, and is what your code does:</p>\n\n<pre><code>for alpha, beta, delta in [(\"first\", \"second\")]:\n    print(\"alpha:\", alpha, \"beta:\", beta, \"delta:\", delta)\n</code></pre>\n\n<p>In this last example, what value in the list is assigned to <code>delta</code>? Nothing, There aren't enough values, and that is the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 6, "last_activity_date": 1487190463, "creation_date": 1487190463, "answer_id": 42259375, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2/42259375#42259375", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p>You probably want to assign the <code>lastname</code> you are reading out here</p>\n\n<pre><code>lastname = sheet.cell(row=r, column=3).value\n</code></pre>\n\n<p>to something; currently the program just forgets it</p>\n\n<p>you could do that two lines after, like so</p>\n\n<pre><code>unpaidMembers[name] = lastname, email\n</code></pre>\n\n<p>your program will still crash at the same place, because <code>.items()</code> still won't give you 3-tuples but rather something that has this structure: <code>(name, (lastname, email))</code></p>\n\n<p>good news is, python can handle this</p>\n\n<pre><code>for name, (lastname, email) in unpaidMembers.items():\n</code></pre>\n\n<p>etc.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 2804454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17bd40e0ccedd32af222fab12f7b75f6?s=128&d=identicon&r=PG&f=1", "display_name": "marcinowski", "link": "https://stackoverflow.com/users/2804454/marcinowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1487190512, "creation_date": 1487190512, "answer_id": 42259389, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2/42259389#42259389", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p>Since <code>unpaidMembers</code> is a <strong>dictionary</strong> it always returns two values when called with <code>.items()</code> - (key, value). You may want to keep your data as a list of tuples <code>[(name, email, lastname), (name, email, lastname)..]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12002952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db9db4d5dd3fb973bb7923d322b030bc?s=128&d=identicon&r=PG", "display_name": "KARAN PATEL", "link": "https://stackoverflow.com/users/12002952/karan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1567252757, "creation_date": 1567252757, "answer_id": 57737826, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2/57737826#57737826", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p>ValueErrors :In Python, a value is the information that is stored within a certain object. To encounter a ValueError in Python means that is a problem with the content of the object you tried to assign the value to.</p>\n\n<p>in your case name,lastname and email 3 parameters are there but unpaidmembers only contain 2 of them. </p>\n\n<blockquote>\n  <p><strong>name, lastname, email in unpaidMembers.items()</strong>\n  so you should refer data\n  or your code might be<br>\n  <strong>lastname, email in unpaidMembers.items()</strong>\n  or\n  <strong>name, email in unpaidMembers.items()</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8189, "user_id": 1616263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YyBBW.jpg?s=128&g=1", "display_name": "crifan", "link": "https://stackoverflow.com/users/1616263/crifan"}, "is_accepted": false, "score": 1, "last_activity_date": 1576140708, "creation_date": 1576140708, "answer_id": 59300765, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2/59300765#59300765", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p><strong>1. First should understand the error meaning</strong></p>\n\n<p>Error <code>not enough values to unpack (expected 3, got 2)</code> means:</p>\n\n<p>a <strong>2 part</strong> tuple, but assign to <strong>3 values</strong></p>\n\n<p>and I have written demo code to show for you:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n# Function: Showing how to understand ValueError 'not enough values to unpack (expected 3, got 2)'\n# Author: Crifan Li\n# Update: 20191212\n\ndef notEnoughUnpack():\n    \"\"\"Showing how to understand python error `not enough values to unpack (expected 3, got 2)`\"\"\"\n    # a dict, which single key's value is two part tuple\n    valueIsTwoPartTupleDict = {\n        \"name1\": (\"lastname1\", \"email1\"),\n        \"name2\": (\"lastname2\", \"email2\"),\n    }\n\n    # Test case 1: got value from key\n    gotLastname, gotEmail = valueIsTwoPartTupleDict[\"name1\"] # OK\n    print(\"gotLastname=%s, gotEmail=%s\" % (gotLastname, gotEmail))\n    # gotLastname, gotEmail, gotOtherSomeValue = valueIsTwoPartTupleDict[\"name1\"] # -&gt; ValueError not enough values to unpack (expected 3, got 2)\n\n    # Test case 2: got from dict.items()\n    for eachKey, eachValues in valueIsTwoPartTupleDict.items():\n        print(\"eachKey=%s, eachValues=%s\" % (eachKey, eachValues))\n    # same as following:\n    # Background knowledge: each of dict.items() return (key, values)\n    # here above eachValues is a tuple of two parts\n    for eachKey, (eachValuePart1, eachValuePart2) in valueIsTwoPartTupleDict.items():\n        print(\"eachKey=%s, eachValuePart1=%s, eachValuePart2=%s\" % (eachKey, eachValuePart1, eachValuePart2))\n    # but following:\n    for eachKey, (eachValuePart1, eachValuePart2, eachValuePart3) in valueIsTwoPartTupleDict.items(): # will -&gt; ValueError not enough values to unpack (expected 3, got 2)\n        pass\n\nif __name__ == \"__main__\":\n    notEnoughUnpack()\n</code></pre>\n\n<p>using <code>VSCode</code> debug effect:</p>\n\n<p><img src=\"https://i.stack.imgur.com/fGhhA.png\" alt=\"notEnoughUnpack CrifanLi\"></p>\n\n<p><strong>2. For your code</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for name, email, lastname in unpaidMembers.items():\n</code></pre>\n\n<p>but error\n<code>ValueError: not enough values to unpack (expected 3, got 2)</code></p>\n\n<p>means each item(a tuple value) in <code>unpaidMembers</code>, only have 1 parts:<code>email</code>, which corresponding above code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    unpaidMembers[name] = email\n</code></pre>\n\n<p>so should change code to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for name, email in unpaidMembers.items():\n</code></pre>\n\n<p>to avoid error.</p>\n\n<p>But obviously you expect extra <code>lastname</code>, so should change your above code to</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    unpaidMembers[name] = (email, lastname)\n</code></pre>\n\n<p>and better change to better syntax:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for name, (email, lastname) in unpaidMembers.items():\n</code></pre>\n\n<p>then everything is OK and clear.</p>\n"}], "owner": {"reputation": 149, "user_id": 6845295, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191481780893459/picture?type=large", "display_name": "Jakub K\u0142os", "link": "https://stackoverflow.com/users/6845295/jakub-k%c5%82os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149942, "favorite_count": 2, "accepted_answer_id": 42259375, "answer_count": 5, "score": 11, "last_activity_date": 1576140708, "creation_date": 1487189721, "last_edit_date": 1487189922, "question_id": 42259166, "link": "https://stackoverflow.com/questions/42259166/python-3-valueerror-not-enough-values-to-unpack-expected-3-got-2", "title": "Python 3 - ValueError: not enough values to unpack (expected 3, got 2)", "body": "<p>I have a problem with my Python 3 program. I use Mac OS X. This code is running properly.</p>\n\n<pre><code># -*- coding: utf-8 -*-\n#! python3\n# sendDuesReminders.py - Sends emails based on payment status in spreadsheet.\n\nimport openpyxl, smtplib, sys\n\n\n# Open the spreadsheet and get the latest dues status.\nwb = openpyxl.load_workbook('duesRecords.xlsx')\nsheet = wb.get_sheet_by_name('Sheet1')\n\nlastCol = sheet.max_column\nlatestMonth = sheet.cell(row=1, column=lastCol).value\n\n# Check each member's payment status.\nunpaidMembers = {}\nfor r in range(2, sheet.max_row + 1):\npayment = sheet.cell(row=r, column=lastCol).value\nif payment != 'zaplacone':\n    name = sheet.cell(row=r, column=2).value\n    lastname = sheet.cell(row=r, column=3).value\n    email = sheet.cell(row=r, column=4).value\n    unpaidMembers[name] = email\n\n\n# Log in to email account.\nsmtpObj = smtplib.SMTP_SSL('smtp.gmail.com', 465)\nsmtpObj.ehlo()\nsmtpObj.login('abc@abc.com', '1234')\n\n\n# Send out reminder emails.\nfor name, email in unpaidMembers.items()\nbody = \"Subject: %s - przypomnienie o platnosci raty za treningi GIT Parkour. \" \\\n       \"\\n\\nPrzypominamy o uregulowaniu wplaty za uczestnictwo: %s w treningach GIT Parkour w .\" \\\n       \"\\n\\nRecords show  that you have not paid dues for %s. Please make \" \\\n       \"this payment as soon as possible.\"%(latestMonth, name, latestMonth)\nprint('Sending email to %s...' % email)\nsendmailStatus = smtpObj.sendmail('abc@abc.com', email, body)\n\nif sendmailStatus != {}:\n    print('There was a problem sending email to %s: %s' % (email,\n    sendmailStatus))\nsmtpObj.quit()enter code here\n</code></pre>\n\n<p>Problems starts when I am trying to add next value to the for loop.</p>\n\n<pre><code># Send out reminder emails.\nfor name, lastname, email in unpaidMembers.items()\nbody = \"Subject: %s - przypomnienie o platnosci raty za treningi GIT Parkour. \" \\\n       \"\\n\\nPrzypominamy o uregulowaniu wplaty za uczestnictwo: %s %s w treningach GIT Parkour w .\" \\\n       \"\\n\\nRecords show  that you have not paid dues for %s. Please make \" \\\n       \"this payment as soon as possible.\"%(latestMonth, name, lastname, latestMonth)\nprint('Sending email to %s...' % email)\nsendmailStatus = smtpObj.sendmail('abc@abc.com', email, body)\n</code></pre>\n\n<p>Terminal shows error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"sendDuesEmailReminder.py\", line 44, in &lt;module&gt;\n        for name, email, lastname in unpaidMembers.items():\nValueError: not enough values to unpack (expected 3, got 2)\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1487190412, "post_id": 42259125, "comment_id": 71676452, "body": "AFAIK, you cannot use keys combinations with <code>chromedriver</code>. What exactly you want to perform? Which shortcuts?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user393267"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1487190551, "post_id": 42259125, "comment_id": 71676512, "body": "Trying to open a new window, new tab, save page, load page. I did try to send these key shortcut with &quot;body&quot; selected but even in that case, the application won&#39;t get the command. I can only send text to textfield in the web page itself, not the browser"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1487190632, "post_id": 42259125, "comment_id": 71676546, "body": "<code>Save page</code> you mean save <code>HTML</code> page source?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user393267"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1487192087, "post_id": 42259125, "comment_id": 71677341, "body": "Yes, save as the browser would save, when I use the &quot;save&quot; menu command"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user393267"}, "edited": false, "score": 0, "creation_date": 1487200857, "post_id": 42260051, "comment_id": 71681486, "body": "Thanks; this solve my load and save file; although I can&#39;t access the other functionalities of the browser app. It is curious to me that Selenium never expanded the range of operation to the container that actually run the webpage. There are other options of course; like opening a subprocess and call the keyboard shortcut via shell (I am on OSX); but it is not the same as just calling the webdriver. Thanks for the reply!"}], "tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192803, "creation_date": 1487192803, "answer_id": 42260051, "question_id": 42259125, "link": "https://stackoverflow.com/questions/42259125/send-key-stroke-to-chromedriver-using-selenium-python/42260051#42260051", "title": "Send key stroke to chromedriver, using selenium python", "body": "<p>You cannot use key combinations with <code>chromedriver</code>, but you can try some approaches to perform required actions:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Chrome()\ndriver.get('/path/to/your/local/file.html') # To load page\nwith open('/path/to/your/local/file.html', 'w') as f:\n    f.write(driver.page_source) # To save currently opened page HTML source code to local file\ndriver.execute_script('window.open('https://google.com', 'new');') # To open Google page in new tab/window\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user393267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487192803, "creation_date": 1487189616, "question_id": 42259125, "link": "https://stackoverflow.com/questions/42259125/send-key-stroke-to-chromedriver-using-selenium-python", "title": "Send key stroke to chromedriver, using selenium python", "body": "<p>I am planning to use keyboard shortcuts to drive chromedriver; although I can't find a suitable example.</p>\n\n<p>I load chromedriver as driver.remote object in selenium python; so I can access the elements, and so far it works fine; I can send keys to an element.</p>\n\n<p>Although I do not see how you can actually send browser shortcuts though; the driver.remote does not have a sendkey function; just the elements has it.</p>\n\n<p>So if I want to open a menu shortcut to do any action, I can't. Is there a way to do so, or it is out of the scope of Selenium per se?</p>\n"}, {"tags": ["python", "python-3.x", "installation"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1487189615, "post_id": 42259098, "comment_id": 71676017, "body": "Check this <a href=\"http://semver.org/\" rel=\"nofollow noreferrer\">semver.org</a>"}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1487189686, "post_id": 42259098, "comment_id": 71676054, "body": "If you want to use the most recently updated version, you will constantly be switching versions. If you target the highest version number, you&#39;ll only switch versions every time there&#39;s a new release. Also, given enough time, a higher version number will always have a more recent update than a lower version number."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 3317176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAlZI.png?s=128&g=1", "display_name": "ncuccia", "link": "https://stackoverflow.com/users/3317176/ncuccia"}, "edited": false, "score": 1, "creation_date": 1487190366, "post_id": 42259144, "comment_id": 71676425, "body": "Thank you so much!  This is a wonderful answer.  As a secondary question, do most packages explicitly state which version number they work with?  Also, if a package says something like &quot;works with 3.4+&quot; does that generally mean it will work with version 3.6, or would it only work with 3.4.x?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 115, "user_id": 3317176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAlZI.png?s=128&g=1", "display_name": "ncuccia", "link": "https://stackoverflow.com/users/3317176/ncuccia"}, "edited": false, "score": 0, "creation_date": 1487190480, "post_id": 42259144, "comment_id": 71676475, "body": "@user3317176: If it says &quot;3.4+&quot;, that includes 3.6."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1487190612, "post_id": 42259144, "comment_id": 71676535, "body": "@user3317176, it depends on the library. For example, in this page <a href=\"https://docs.djangoproject.com/en/1.10/faq/install/\" rel=\"nofollow noreferrer\">Django</a> it says which version of that package is compatible with which version of Python, and as user2357112 says, if you have something as version 3.4+ means that it will be compatible with version &gt;= 3.4.0."}, {"owner": {"reputation": 115, "user_id": 3317176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAlZI.png?s=128&g=1", "display_name": "ncuccia", "link": "https://stackoverflow.com/users/3317176/ncuccia"}, "edited": false, "score": 0, "creation_date": 1487267285, "post_id": 42259144, "comment_id": 71718906, "body": "Another question.  Does Python 3.6 not have all the features of 3.4?  It seems strange to support both 3.4 and 3.5 and 3.6 at the same time."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 115, "user_id": 3317176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAlZI.png?s=128&g=1", "display_name": "ncuccia", "link": "https://stackoverflow.com/users/3317176/ncuccia"}, "edited": false, "score": 0, "creation_date": 1487273595, "post_id": 42259144, "comment_id": 71722601, "body": "@ncuccia, you can see what is new in Python 3.6 <a href=\"https://docs.python.org/3/whatsnew/3.6.html\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 11, "last_activity_date": 1487190083, "last_edit_date": 1487190083, "creation_date": 1487189659, "answer_id": 42259144, "question_id": 42259098, "link": "https://stackoverflow.com/questions/42259098/python-version-numbering-scheme/42259144#42259144", "title": "Python Version Numbering Scheme", "body": "<p>According to <a href=\"http://semver.org/\">this</a>, a version number is defined by</p>\n\n<p>MAJOR.MINOR.PATCH</p>\n\n<p>where </p>\n\n<ol>\n<li>MAJOR version when you make incompatible API changes</li>\n<li>MINOR version when you add functionality in a backwards-compatible manner, and</li>\n<li>PATCH version when you make backwards-compatible bug fixes.</li>\n</ol>\n\n<p>According to <a href=\"https://www.python.org/download/releases/3.4.0/\">this</a> and <a href=\"https://www.python.org/downloads/release/python-350/\">this</a> Python 3.5.0 was released in 2015-09-13, while Python 3.4.0 was released on March 16th, 2014.</p>\n\n<p>The third number in the version number is the PATCH which usually fixes bugs, so the last version of Python is 3.6.0 which has no patches so far. I recommend to use the version based on the compatibility of the libraries you are going to use.</p>\n"}], "owner": {"reputation": 115, "user_id": 3317176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAlZI.png?s=128&g=1", "display_name": "ncuccia", "link": "https://stackoverflow.com/users/3317176/ncuccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2436, "favorite_count": 2, "accepted_answer_id": 42259144, "answer_count": 1, "score": 11, "last_activity_date": 1487190083, "creation_date": 1487189516, "question_id": 42259098, "link": "https://stackoverflow.com/questions/42259098/python-version-numbering-scheme", "title": "Python Version Numbering Scheme", "body": "<p>I am trying to get an understanding of the different version's of Python.  Currently, their website provides several different version within the download section.</p>\n\n<p>I understand the distinction between Python 2.x and 3.x, and the larger confusion I am having is between different versions of Python 3.x.</p>\n\n<p>For example, their website currently lists the three most recent releases as:</p>\n\n<ul>\n<li><strong>Python 3.4.6</strong> (2017-01-17)</li>\n<li><strong>Python 3.5.3</strong> (2017-01-17)</li>\n<li><strong>Python 3.6.0</strong> (2016-12-23)</li>\n</ul>\n\n<p>Clearly, the most recent release is 3.4.6, but it is not the largest release number.</p>\n\n<p>What is the distinction between these three different versions?  Should I install the most recent version, or the largest release number?  All help is appreciated.</p>\n"}, {"tags": ["python", "list", "dictionary", "group-by", "itertools"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1487189499, "post_id": 42259043, "comment_id": 71675953, "body": "Could you add an example of what kind of output you&#39;re hoping for please?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487189522, "post_id": 42259043, "comment_id": 71675970, "body": "&quot;Using itertools groupby to sort&quot; - <code>itertools.groupby</code> does no sorting. If you need to sort things, <code>itertools.groupby</code> will not help you do that. It can be helpful for processing sorted data, but something else needs to ensure the data is sorted."}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487189965, "post_id": 42259043, "comment_id": 71676215, "body": "Hi Mitch, The second block quote has the output I am looking for. (ie a list of lists of lists)"}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487190066, "post_id": 42259043, "comment_id": 71676271, "body": "I think group is actually a more accurate word for what I am doing. I changed it in the post. Thanks for pointing that out."}, {"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "edited": false, "score": 0, "creation_date": 1487190097, "post_id": 42259043, "comment_id": 71676289, "body": "can you provide a sample of your input?  (What does sortedData look like?)"}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487190373, "post_id": 42259043, "comment_id": 71676430, "body": "Kelvin, I edited the post to make that more clear. It takes a list of lists."}, {"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "edited": false, "score": 0, "creation_date": 1487190549, "post_id": 42259043, "comment_id": 71676510, "body": "I am a bit confused, your second quote block looks like a sample of your first quote block.  What do you want to happen, to sum by date / product?  BTW if you&#39;re going to have a long for your date you&#39;re better off with YYYYMMDD it makes sorting on date doable."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1487191239, "post_id": 42259043, "comment_id": 71676908, "body": "The second quote block has unbalanced brackets. There is an extra <code>]</code> at the end (or a missing <code>[</code> at the beginning.)"}], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "edited": false, "score": 0, "creation_date": 1487192305, "post_id": 42259806, "comment_id": 71677466, "body": "Really nice.  @Amelia, wouldn&#39;t a dict be a better data structure for this all the way through?"}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487193565, "post_id": 42259806, "comment_id": 71678167, "body": "Kelvin, do you mean having a dictionary like this {(location:date):{item:value}}"}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487194188, "post_id": 42259806, "comment_id": 71678462, "body": "And Rob, thank you so much. I do like list comprehension, and honestly am not familiar with collections, operator, pprint, or assert, so I am going to stick with your second solution. Thanks!"}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487196026, "post_id": 42259806, "comment_id": 71679409, "body": "@Rob\u1d69 I am using this with my datafile and I am getting an error: that says can not concatenate str and int variables about the following code that was imported: ` 630         result = Counter()`     631         for elem, count in self.items(): --&gt; 632             newcount = count + other[elem]     633             if newcount &gt; 0:     634                 result[elem] = newcount  what is this referring to? Can you tell what is getting concatenated here?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487234713, "post_id": 42259806, "comment_id": 71694015, "body": "@AmeliaMcClure - I&#39;m going to guess that one of your dictionary values is a string. My code will only work if all the dictionary values are integers."}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487252461, "post_id": 42259806, "comment_id": 71707197, "body": "@Rob\u1d69 yup, you are right. I will clean up the data a little bit and try it again."}, {"owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "edited": false, "score": 0, "creation_date": 1487271182, "post_id": 42259806, "comment_id": 71721199, "body": "@Rob\u1d69, sorry to keep bugging you but the way the code is now, if there are multiple values for a location, date, key permutation, the values get added together. Instead, I would just like to ignore the second one. How could I change the code to pass if there is a duplication?"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1487272099, "last_edit_date": 1487272099, "creation_date": 1487191902, "answer_id": 42259806, "question_id": 42259043, "link": "https://stackoverflow.com/questions/42259043/using-itertools-groupby-to-sort-lists-and-merge-dictionaries/42259806#42259806", "title": "Using itertools groupby to sort lists and merge dictionaries", "body": "<p>I think this does what you want:</p>\n\n<pre><code>from itertools import groupby\nfrom operator import itemgetter\n\ndef update_with_ignore(a, b):\n    '''Copy only new entries from B to A'''\n    for k,v in b.items():\n        a.setdefault(k,v)\n\ndef compileData(sortedData):\n    result = []\n    sortedData = sorted(sortedData, key=itemgetter(0,1))\n    for location, group in groupby(sortedData, key=itemgetter(0)):\n        l = []\n        for date, group in groupby(group, key=itemgetter(1)):\n            d = {}\n            for datum in group:\n                update_with_ignore(d, datum[2])\n            l.append([location, date, dict(d)])\n        result.append(l)\n    return result\n\n\nin_data = [\n    [\"Maine\", \"01062016\", {\"apple\":5}],\n    [\"Maine\", \"02042016\", {\"apple\":3}],\n    [\"Maine\", \"01062016\", {\"orange\":2}],\n    [\"Vermont\", \"01032016\", {\"peach\":3}],\n    [\"Maine\", \"02042016\", {\"peach\":2}],\n]\nout_data = compileData(in_data)\nassert out_data == [\n [['Maine', '01062016', {'apple': 5, 'orange': 2}],\n  ['Maine', '02042016', {'apple': 3, 'peach': 2}]],\n [['Vermont', '01032016', {'peach': 3}]]]\n\nin_data = [\n    [\"Maine\", \"01062016\", {\"apple\":5}],\n    [\"Maine\", \"01062016\", {\"apple\":4}],\n    [\"Maine\", \"02042016\", {\"apple\":3}],\n]\nout_data = compileData(in_data)\nassert out_data == [\n [['Maine', '01062016', {'apple': 5}],\n  ['Maine', '02042016', {'apple': 3}]]]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7564235, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Ne7ULMOWaBI/AAAAAAAAAAI/AAAAAAAAAAo/UTdrMJpwChE/photo.jpg?sz=128", "display_name": "Amelia McClure", "link": "https://stackoverflow.com/users/7564235/amelia-mcclure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487272099, "creation_date": 1487189327, "last_edit_date": 1487191915, "question_id": 42259043, "link": "https://stackoverflow.com/questions/42259043/using-itertools-groupby-to-sort-lists-and-merge-dictionaries", "title": "Using itertools groupby to sort lists and merge dictionaries", "body": "<p>I am looking to use python intertools groupby to make a function that groups small lists in to a bigger list. What I start with is a list of different datapoints with the following structure (called sortedData)</p>\n\n<pre><code>[\n  [location, date, {item:quantity}],\n  [location2, date, {item2:quantity2}],\n  ...\n]\n</code></pre>\n\n<p>I am trying to group them so that each location/date combination has a dictionary with all items and quantities, and that these lists are grouped by the location. Here is an example:</p>\n\n<pre><code>[\n  [\n    [Maine, 01062016, {apple:5, orange:2}],\n    [Maine, 02042016,{apple:3, peach:2}]\n  ],\n  [\n    [Vermont, 01032016, {peach:3}]\n  ]\n]\n</code></pre>\n\n<p>What I have so far is this code, but I am having trouble understanding how to use the group that is created, since it is not an iterable item. Now it gives a blank list, though it seems it should be appending things</p>\n\n<pre><code>def compileData(sortedData):    \n    from itertools import groupby\n    for key, locationGroup in groupby(sortedData, lambda x: x[0]):\n        locationList=[]\n        bigList=[]\n        for date in locationGroup:\n            locationList.append(date)\n        locationList.append(locationGroup)\n        for key, bigList in groupby(locationGroup, lambda x: x[1]):\n            datePlace=[key[0],key[1],{}]\n            for date in locationGroup:\n                datePlace[2]=dict(list(date[2].items())+list(datePlace[2].items()))\n                bigList.append(datePlace)\n        return bigList  \n</code></pre>\n\n<p>Let me know what you think, and if you have any better ideas to how to tackle this problem, let me know. I wrote it recursivley but the file I am using it on is too long, so it is too slow.   </p>\n"}, {"tags": ["python", "signals", "syslog-ng"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 2336770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4a1Wb.png?s=128&g=1", "display_name": "kvch", "link": "https://stackoverflow.com/users/2336770/kvch"}, "is_accepted": false, "score": 0, "last_activity_date": 1487239447, "creation_date": 1487239447, "answer_id": 42270663, "question_id": 42258990, "link": "https://stackoverflow.com/questions/42258990/my-embedded-python-running-inside-syslog-ng-fevd-does-not-appear-to-receive-s/42270663#42270663", "title": "My embedded Python running inside &quot;syslog-ng -Fevd&quot; does not appear to receive signals, is that true?", "body": "<p>You made a mistake in you Python code. You must import signal module in order to register your functions.</p>\n\n<p>However, fixing your code won't solve your problem. If you register handlers in Python, it seems that signals won't be forwarded to neither Python nor the signal handler of syslog-ng.</p>\n"}], "owner": {"reputation": 109, "user_id": 1658187, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8c9f54a2408cdc418ad177ca305b5d58?s=128&d=identicon&r=PG", "display_name": "tpc1095", "link": "https://stackoverflow.com/users/1658187/tpc1095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487239447, "creation_date": 1487189132, "question_id": 42258990, "link": "https://stackoverflow.com/questions/42258990/my-embedded-python-running-inside-syslog-ng-fevd-does-not-appear-to-receive-s", "title": "My embedded Python running inside &quot;syslog-ng -Fevd&quot; does not appear to receive signals, is that true?", "body": "<p>I have a Python program running inside \"syslog-ng -Fevd\" OSE version 3.8 so I can develop quickly from the command line. My signal handler catches control-C (and I assume other signals) when run from the command line but not when inside of syslog-ng. Are signals known to be propagated to Python in syslog-ng? I am new to Python, did I make a mistake?</p>\n\n<pre><code>#Start of syslog-ng python config\npython {\n\ndef handler(signum, frame):\n    print 'Signal handler called with signal', signum\n    stopSubscription()\n\nsignal.signal(signal.SIGALRM, handler)\nsignal.signal(signal.SIGINT, handler)\nsignal.signal(signal.SIGABRT, handler)\nsignal.signal(signal.SIGHUP, handler)\nsignal.signal(signal.SIGTERM, handler)\nsignal.signal(signal.SIGBUS, handler)\nsignal.signal(signal.SIGCHLD, handler)\nsignal.signal(signal.SIGCLD, handler)\n\ndef stopSubscription():\n    print \"shutdown requested\"\n}; # end of syslog-ng block\n</code></pre>\n\n<p>From the command line (control-C) and also from inside PyCharm (stop button) I get</p>\n\n<p>Signal handler called with signal 2\nshutdown requested</p>\n\n<p>but from syslog-ng, crickets.</p>\n"}, {"tags": ["python", "django", "ckeditor"], "answers": [{"tags": [], "owner": {"reputation": 1476, "user_id": 617648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f95d71778ac09f21d29a54b365514a5b?s=128&d=identicon&r=PG", "display_name": "obayhan", "link": "https://stackoverflow.com/users/617648/obayhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487189616, "creation_date": 1487189616, "answer_id": 42259127, "question_id": 42258965, "link": "https://stackoverflow.com/questions/42258965/how-to-get-ckeditor-to-work-in-django/42259127#42259127", "title": "How to get ckeditor to work in Django", "body": "<p>Copy this</p>\n\n<pre><code>CKEDITOR_JQUERY_URL = 'https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js'\n</code></pre>\n\n<p>to settings.py</p>\n"}], "owner": {"reputation": 61, "user_id": 7571090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a87f9294d275844e173719949e096f27?s=128&d=identicon&r=PG&f=1", "display_name": "hckrieger", "link": "https://stackoverflow.com/users/7571090/hckrieger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487189616, "creation_date": 1487189062, "question_id": 42258965, "link": "https://stackoverflow.com/questions/42258965/how-to-get-ckeditor-to-work-in-django", "title": "How to get ckeditor to work in Django", "body": "<p>I'm trying to get a blog up but I need ckeditor in Django admin to make posts.  </p>\n\n<p>In this link <a href=\"https://github.com/django-ckeditor/django-ckeditor\" rel=\"nofollow noreferrer\">https://github.com/django-ckeditor/django-ckeditor</a> it gives the instructions for getting ckeditor on Django admin and I don't understand step 3 which says this:</p>\n\n<blockquote>\n  <p>django-ckeditor uses jQuery in ckeditor-init.js file. You must set\n  <code>CKEDITOR_JQUERY_URL</code> to a jQuery URL that will be used to load the\n  library. If you have jQuery loaded from a different source just don't\n  set [CKEDITOR_JQUERY_URL] and django-ckeditor will not try to load its\n  own jQuery. If you find that CKEditor widgets don't appear in your\n  Django admin site, then check that this variable is set correctly.\n  Example:</p>\n  \n  <p>CKEDITOR_JQUERY_URL =\n  '<a href=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js\" rel=\"nofollow noreferrer\">https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js</a>'</p>\n</blockquote>\n\n<p>Can somebody go into better detail of how to execute this step?  What do I copy, paste, edit or configure in what file?</p>\n\n<p>I went on a limb and pasted the above URL in settings.py and moved on to step 4 which failed too.</p>\n\n<p>There aren't much other resources for how to do this.</p>\n"}, {"tags": ["python", "package", "conda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1487334966, "post_id": 42258964, "comment_id": 71750779, "body": "I usually make a directory called <code>conda.recipe</code> in the source directory and use this <code>meta.yaml</code> file template: <a href=\"https://github.com/bryanwweber/UConnRCMPy/blob/master/conda.recipe/meta.yaml\" rel=\"nofollow noreferrer\">github.com/bryanwweber/UConnRCMPy/blob/master/conda.recipe/&hellip;</a> Disclaimer: That is some software that I&#39;m the author of. I&#39;ll try to write a fuller example when I get the time"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1487335043, "post_id": 42258964, "comment_id": 71750829, "body": "Then you can build the package by writing (from the main source directory) <code>conda build conda.recipe</code> and then to install <code>conda install --use-local</code>. If you want to skip the package building altogether and just install the package as a development version, similar to <code>pip -e</code>, you can use <code>conda develop .</code>"}, {"owner": {"reputation": 293, "user_id": 1470957, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42b7b5ccfbaee9fe8383201fcf8348f0?s=128&d=identicon&r=PG", "display_name": "user1470957", "link": "https://stackoverflow.com/users/1470957/user1470957"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1487446367, "post_id": 42258964, "comment_id": 71792676, "body": "Thanks for the help."}, {"owner": {"reputation": 293, "user_id": 1470957, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42b7b5ccfbaee9fe8383201fcf8348f0?s=128&d=identicon&r=PG", "display_name": "user1470957", "link": "https://stackoverflow.com/users/1470957/user1470957"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1487446406, "post_id": 42258964, "comment_id": 71792688, "body": "can you please share your setup.py script you are using for this example?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1487457332, "post_id": 42258964, "comment_id": 71796075, "body": "In the same repository: <a href=\"https://github.com/bryanwweber/UConnRCMPy/blob/master/setup.py\" rel=\"nofollow noreferrer\">github.com/bryanwweber/UConnRCMPy/blob/master/setup.py</a>"}, {"owner": {"reputation": 13435, "user_id": 1601580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2B6rV.png?s=128&g=1", "display_name": "Charlie Parker", "link": "https://stackoverflow.com/users/1601580/charlie-parker"}, "edited": false, "score": 0, "creation_date": 1579548350, "post_id": 42258964, "comment_id": 105795898, "body": "did you try any of the solutions here: <a href=\"https://stackoverflow.com/questions/49474575/how-to-install-my-own-python-module-package-via-conda-and-watch-its-changes\" title=\"how to install my own python module package via conda and watch its changes\">stackoverflow.com/questions/49474575/&hellip;</a> ?"}, {"owner": {"reputation": 11526, "user_id": 235671, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xKXSM.png?s=128&g=1", "display_name": "t3chb0t", "link": "https://stackoverflow.com/users/235671/t3chb0t"}, "edited": false, "score": 0, "creation_date": 1608295534, "post_id": 42258964, "comment_id": 115546173, "body": "Why everything in python has to be so confusing and complicated? :-/"}], "answers": [{"tags": [], "owner": {"reputation": 5026, "user_id": 599884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2aed663a62fa8bf9f7aebe603d3998bb?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/599884/christoph"}, "is_accepted": false, "score": 2, "last_activity_date": 1561888577, "last_edit_date": 1561888577, "creation_date": 1520439878, "answer_id": 49156741, "question_id": 42258964, "link": "https://stackoverflow.com/questions/42258964/build-conda-package-from-local-python-package/49156741#49156741", "title": "build conda package from local python package", "body": "<p>You can use <code>python setup.py bdist_conda</code> to easily generate a conda package from your local python package, even without a recipe: </p>\n\n<blockquote>\n  <p>You can use conda build to build packages for Python to install rather than conda, by using setup.py bdist_conda. This is a quick way to build packages without using a recipe, but it has limitations. The script is limited to the Python version used in the build, and it is not as reproducible as using a recipe. We recommend using a recipe with conda build.</p>\n</blockquote>\n\n<p><a href=\"https://docs.conda.io/projects/conda-build/en/latest/user-guide/recipes/build-without-recipe.html\" rel=\"nofollow noreferrer\">https://docs.conda.io/projects/conda-build/en/latest/user-guide/recipes/build-without-recipe.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 4755099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4173353730224cc3bd9f43abbf9f84d3?s=128&d=identicon&r=PG&f=1", "display_name": "Asta86", "link": "https://stackoverflow.com/users/4755099/asta86"}, "is_accepted": false, "score": 3, "last_activity_date": 1597432779, "last_edit_date": 1597432779, "creation_date": 1520444297, "answer_id": 49158083, "question_id": 42258964, "link": "https://stackoverflow.com/questions/42258964/build-conda-package-from-local-python-package/49158083#49158083", "title": "build conda package from local python package", "body": "<p>A local source directory can be specified in the metadata file meta.yaml by using:</p>\n<pre><code>  source:\n     path: ../src\n</code></pre>\n<p><a href=\"https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#source-from-a-local-path\" rel=\"nofollow noreferrer\">https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#source-from-a-local-path</a></p>\n<p>Additionally, to package your own program you have to define the steps needed to build and install it (for instance, running setup.py install for a python script that uses setuptools: <a href=\"https://setuptools.readthedocs.io/en/latest/index.html\" rel=\"nofollow noreferrer\">https://setuptools.readthedocs.io/en/latest/index.html</a>) in the files build.sh for linux and bld.bat for windows.</p>\n"}, {"tags": [], "owner": {"reputation": 13435, "user_id": 1601580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2B6rV.png?s=128&g=1", "display_name": "Charlie Parker", "link": "https://stackoverflow.com/users/1601580/charlie-parker"}, "is_accepted": false, "score": 4, "last_activity_date": 1579550836, "creation_date": 1579550836, "answer_id": 59830172, "question_id": 42258964, "link": "https://stackoverflow.com/questions/42258964/build-conda-package-from-local-python-package/59830172#59830172", "title": "build conda package from local python package", "body": "<p>I think it should be trivial if you use the editable way to install packages with conda. I did:</p>\n\n<pre><code>conda develop .\n</code></pre>\n\n<p>in the project directory (where my <code>setup.py</code> file is). </p>\n\n<p>If you want an example of a <code>setup.py</code> here is mine:</p>\n\n<pre><code>from setuptools import setup\nfrom setuptools import find_packages\n\nsetup(\n    name='ml', #project name\n    version='0.1.0',\n    description='ML',\n    #url\n    author='Me',\n    author_email='charlie_parker@mit.edu', #not a real e-mail\n    license='MIT',\n    packages=find_packages(),\n    install_requires=['torch','numpy','scikit-learn','scipy','matplotlib','pyyml']\n)\n</code></pre>\n\n<p>The file above is at the root of the project (I do a github repo named <code>project</code> and inside I make a project <code>project</code> with all the packages I develop there.</p>\n\n<p>I believe <code>pip -e .</code> will do the same. You shouldn't need to sudo anything.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 7499546, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ATFmoK7i82g/AAAAAAAAAAI/AAAAAAAAAA8/slbvyLjftuw/photo.jpg?sz=128", "display_name": "Joshua Patterson", "link": "https://stackoverflow.com/users/7499546/joshua-patterson"}, "is_accepted": false, "score": 1, "last_activity_date": 1588215243, "last_edit_date": 1588215243, "creation_date": 1588130968, "answer_id": 61493737, "question_id": 42258964, "link": "https://stackoverflow.com/questions/42258964/build-conda-package-from-local-python-package/61493737#61493737", "title": "build conda package from local python package", "body": "<p>I found some helpful information on the <a href=\"https://enterprise-docs.anaconda.com/en/latest/data-science-workflows/packages/build.html\" rel=\"nofollow noreferrer\">Anaconda Enterprise</a> doc. The two videos linked:</p>\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=xiI1i525ljE&amp;feature=youtu.be&amp;t=9015\" rel=\"nofollow noreferrer\">The Sheer Joy of Packaging | SciPy 2018 Tutorial</a> There is A LOT of fluff, but the meat of it is about 2hr30min (link is timestamped)</li>\n<li><s><a href=\"https://www.youtube.com/watch?v=Kamld5Z-xx0\" rel=\"nofollow noreferrer\">Michael Sarahan - Making packages and packaging \"just work\"</a></s></li>\n</ul>\n\n<p>are the best things I found in my searching.</p>\n"}], "owner": {"reputation": 293, "user_id": 1470957, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42b7b5ccfbaee9fe8383201fcf8348f0?s=128&d=identicon&r=PG", "display_name": "user1470957", "link": "https://stackoverflow.com/users/1470957/user1470957"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8991, "favorite_count": 4, "answer_count": 4, "score": 16, "last_activity_date": 1597432779, "creation_date": 1487189061, "question_id": 42258964, "link": "https://stackoverflow.com/questions/42258964/build-conda-package-from-local-python-package", "title": "build conda package from local python package", "body": "<p>I can't find a complete example of how to create a conda package from a python package that I wrote and also how to install the package using conda install, while it is on my computer and not on anaconda cloud.\nI'm looking for example that not using conda skeleton from pypi, but using a python package on my windows machine, the source code must be on my windows machine and not on pypi or other cloud.\nany help would be mostly appriciate.\nthanks very much</p>\n"}, {"tags": ["python", "flask", "py2app"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 8241626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec268b9ab23933cbc664a54e345e64dc?s=128&d=identicon&r=PG", "display_name": "user8241626", "link": "https://stackoverflow.com/users/8241626/user8241626"}, "is_accepted": false, "score": 1, "last_activity_date": 1498924194, "creation_date": 1498924194, "answer_id": 44862780, "question_id": 42258930, "link": "https://stackoverflow.com/questions/42258930/setup-py-file-for-bundling-a-flask-program-with-py2app/44862780#44862780", "title": "Setup.py file for bundling a Flask program with py2app", "body": "<p>You need to do (at least) TWO things to make a macOS app with flask via py2app:</p>\n\n<ul>\n<li>configure your <code>setup.py</code> properly </li>\n<li>reconfigure your <code>&#95;&#95;init&#95;&#95;.py</code></li>\n</ul>\n\n<p>The gotcha that will hit after you build the app for the first time via a good version of <code>setup.py</code> with a proper list of <code>packages</code> is an inability to serve your static content and templates (until you configure a list of <code>resources</code> in <code>setup.py</code> and reconfigure the app's <code>&#95;&#95;init&#95;&#95;.py</code>). You have to set the template folder and the static folder to somewhere that both <code>setup.py</code> and <code>&#95;&#95;init&#95;&#95;.py</code> can use.</p>\n\n<p>But, before you get too excited, you should realize that you will have (significant) new problems with your new app: first, the application has no icon, no menu presence, and no way to give you feedback. You will need to \"Force Quit\" to exit it. It is probably more useful to run via the terminal:</p>\n\n<p><code>$ ./dist/myapp.app/Contents/MacOS/myapp</code> </p>\n\n<p>But here is the <strong>big</strong> problem: you just hard-coded the path to the templates with an absolute path. If you move the app, then it will lose the ability to find its data:</p>\n\n<pre>jinja2.exceptions.TemplateNotFound</pre>\n\n<p>If you poke around a bit you will become tempted by the possibility that setting the templates path to something like <code>../../templates</code> would work. It won't. py2app and its magic will include a file in your flask paths where you need a directory: something like <code>python36.zip</code>.<br>\n<br />\n<br />\nYou probably want more from your app in the end. But this is definitely a start: compiled. As you can see, I more or less stopped here. I was not desperate to have my scripts be an app, and it was looking like py2app and flask really did not want to play nicely together. There is probably a way to get something both compiled and truly portable, but I am not the person to answer that bit for you. Good luck!</p>\n\n<p><hr />\nsample <code>setup.py</code></p>\n\n<pre><code>\"\"\"\nThis is a setup.py script generated by py2applet\nUsage: python setup.py py2app\n\"\"\"\nAPP = ['myapp.py']\nDATA_FILES = []\nOPTIONS = {\n    'packages': ['flask', 'werkzeug', 'config', 'jinja2'],\n    'resources': ['./server/templates', './server/static'],\n    }\nsetup(\n    app=APP,\n    data_files=DATA_FILES,\n    options={'py2app': OPTIONS},\n    setup_requires=['py2app'],\n)\n</code></pre>\n\n<p><hr />\nmodified <code>&#95;&#95;init&#95;&#95;.py</code></p>\n\n<pre><code>myapp = Flask(__name__,\n    template_folder='/path/to/dist/dir/dist/myapp.app/Contents/Resources/templates', \n    static_folder='/path/to/dist/dir/dist/myapp.app/Contents/Resources/static')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3700716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81ec21655d5a4f47a3cb9a93b1a2e883?s=128&d=identicon&r=PG&f=1", "display_name": "AyeMarciMar", "link": "https://stackoverflow.com/users/3700716/ayemarcimar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498924194, "creation_date": 1487188908, "last_edit_date": 1487193270, "question_id": 42258930, "link": "https://stackoverflow.com/questions/42258930/setup-py-file-for-bundling-a-flask-program-with-py2app", "title": "Setup.py file for bundling a Flask program with py2app", "body": "<p>I can't really find any documentation anywhere for using py2app with a Flask program. How should I set up the setup.py file?</p>\n\n<p><a href=\"https://i.stack.imgur.com/R4qO5.png\" rel=\"nofollow noreferrer\">Here's the dependencies I'm working with</a></p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "lda"], "answers": [{"comments": [{"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487190995, "post_id": 42259341, "comment_id": 71676752, "body": "that is very helpful. Is there a way to convert DenseMatrix to numpy ndarray"}, {"owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487191402, "post_id": 42259341, "comment_id": 71676987, "body": "the method <code>toArray()</code> could be useful, but I am doubtful since I think that <code>topicsMatrix()</code> already calls it."}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 1, "creation_date": 1487194349, "post_id": 42259341, "comment_id": 71678552, "body": "Quick question. I get an error with this code. However this code would not print the actual word names which I what I was looking for"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487194420, "post_id": 42259341, "comment_id": 71678588, "body": "Topic 0:       3     print(&quot;Topic &quot; + str(topic) + &quot;:&quot;)       4     for word in range(0, ldaModel.vocabSize()): ----&gt; 5         print(&quot; &quot; + str(topics[word][topic]))  /Users/i854319/spark2/python/pyspark/ml/linalg/__init__.pyc in __getitem__(self, indices)     944      945     def __getitem__(self, indices): --&gt; 946         i, j = indices     947         if i &lt; 0 or i &gt;= self.numRows:     948             raise IndexError(&quot;Row index %d is out of range [0, %d)&quot;  TypeError: &#39;int&#39; object is not iterable"}, {"owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487195568, "post_id": 42259341, "comment_id": 71679173, "body": "You should check if <code>ldaModel.vocabSize()</code> returns <code>1184</code>. If it doesn&#39;t, then write <code>1184</code> where that method was called, and test again."}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487196332, "post_id": 42259341, "comment_id": 71679569, "body": "It does return 1184. But i have the same error. Second, LDA is supposed to give probability distribution for both document-topic matrix and topic-term matrix. But in topicsMatrix output (DenseMatrix) if you see the values are like 132.0, 3.000 etc. Which is not probablity"}, {"owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487196891, "post_id": 42259341, "comment_id": 71679833, "body": "You&#39;re right, both document-topic and topic-term are probability distributions, so every element should be <code>&lt;= 0</code>. What do you get when you call explicitly <code>topics[0][0]</code> and <code>topics[0][1]</code>?"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487201436, "post_id": 42259341, "comment_id": 71681703, "body": "every element should be between 0-1. But if you see the dense matrix above , we see values like 132 and all?"}, {"owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1487202237, "post_id": 42259341, "comment_id": 71681953, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/135814/discussion-between-nicolas-and-baktaawar\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "is_accepted": false, "score": 5, "last_activity_date": 1487191362, "last_edit_date": 1487191362, "creation_date": 1487190340, "answer_id": 42259341, "question_id": 42258926, "link": "https://stackoverflow.com/questions/42258926/understanding-lda-in-spark/42259341#42259341", "title": "Understanding LDA in Spark", "body": "<p>The method <code>topicsMatrix()</code> returns a <code>DenseMatrix</code> object.</p>\n\n<p>What you're seeing as output is a representation of such object. The \"attributes\" of these objects are:</p>\n\n<pre><code>numRows, numCols, values, isTransposed=False\n</code></pre>\n\n<p>so, from the output you got you can identify these attributes as:</p>\n\n<ul>\n<li><code>numRows</code>: the vocabulary size (1184 in your case).</li>\n<li><code>numCols</code>: the amount of topics (10 in your case).</li>\n<li><code>values</code>: the array with elements. These elements are represented as a plain vector inside <code>DenseMatrix</code>.</li>\n<li><code>isTransposed</code>: whether the matrix is transposed (0, i.e. False in your case).</li>\n</ul>\n\n<p>So, the important thing here is how to get a proper representation of that <code>DenseMatrix</code>.</p>\n\n<p>From the <a href=\"https://spark.apache.org/docs/latest/mllib-clustering.html\" rel=\"nofollow noreferrer\">guide of pyspark</a> I found a example that will be useful to you:</p>\n\n<pre><code>topics = ldaModel.topicsMatrix()\nfor topic in range(10):\n    print(\"Topic \" + str(topic) + \":\")\n    for word in range(0, ldaModel.vocabSize()):\n        print(\" \" + str(topics[word][topic]))\n</code></pre>\n\n<p>According to the <a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.mllib.html#pyspark.mllib.linalg.DenseMatrix\" rel=\"nofollow noreferrer\">documentation of DenseMatrix</a>, you could try with these two methods if you want to get a <em>more useful</em> representation:</p>\n\n<ul>\n<li><code>asML()</code></li>\n<li><code>toArray()</code>  to return an <code>numpy.ndarray</code></li>\n<li><code>toSparse()</code></li>\n</ul>\n"}], "owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1294, "favorite_count": 3, "answer_count": 1, "score": 5, "last_activity_date": 1525444799, "creation_date": 1487188881, "last_edit_date": 1525444799, "question_id": 42258926, "link": "https://stackoverflow.com/questions/42258926/understanding-lda-in-spark", "title": "Understanding LDA in Spark", "body": "<p>I am running Latent Dirichlet Allocation in Spark(LDA). And am trying to understand the output it gives out. </p>\n\n<p>Here is my sample dataset after I carried out the text-feature transform using Tokenizer, StopwordsRemover, CountVectorizer</p>\n\n<pre><code>[Row(Id=u'39', tf_features=SparseVector(1184, {89: 1.0, 98: 2.0, 108: 1.0, 168: 3.0, 210: 1.0, 231: 1.0, 255: 1.0, 290: 1.0, 339: 1.0, 430: 1.0, 552: 1.0, 817: 1.0, 832: 1.0, 836: 1.0, 937: 1.0, 999: 1.0, 1157: 1.0})),\n Row(Id=u'7666', tf_features=SparseVector(1184, {15: 2.0, 186: 2.0, 387: 2.0, 429: 2.0, 498: 2.0}))]\n</code></pre>\n\n<p>AS per Spark's Sparse Vector Representation tf_features stand for: (Vocab_zise,{term_id:term_freq...}</p>\n\n<p>Now I ran the below initial code:</p>\n\n<pre><code>from pyspark.ml.clustering import LDA\nlda = LDA(featuresCol=\"tf_features\",k=10, seed=1, optimizer=\"online\")\nldaModel=lda.fit(tf_df)\n\nlda_df=ldaModel.transform(tf_df)\n</code></pre>\n\n<p>First I inspect the resulting transformed data frame. </p>\n\n<pre><code>lda_df.take(3)\nOut[73]:\n[Row(Id=u'39', tf_features=SparseVector(1184, {89: 1.0, 98: 2.0, 108: 1.0, 168: 3.0, 210: 1.0, 231: 1.0, 255: 1.0, 290: 1.0, 339: 1.0, 430: 1.0, 552: 1.0, 817: 1.0, 832: 1.0, 836: 1.0, 937: 1.0, 999: 1.0, 1157: 1.0}), topicDistribution=DenseVector([0.0049, 0.0045, 0.0041, 0.0048, 0.9612, 0.004, 0.004, 0.0041, 0.0041, 0.0042])),\n Row(Id=u'7666', tf_features=SparseVector(1184, {15: 2.0, 186: 2.0, 387: 2.0, 429: 2.0, 498: 2.0}), topicDistribution=DenseVector([0.0094, 0.1973, 0.0079, 0.0092, 0.0082, 0.0077, 0.7365, 0.0078, 0.0079, 0.008])),\n Row(Id=u'44', tf_features=SparseVector(1184, {2: 1.0, 9: 1.0, 122: 1.0, 444: 1.0, 520: 1.0, 748: 1.0}), topicDistribution=DenseVector([0.0149, 0.8831, 0.0124, 0.0146, 0.013, 0.0122, 0.0122, 0.0124, 0.0125, 0.0127]))]\n</code></pre>\n\n<p>My understanding again is that topicDistribution column represents the weights of each topic in that row documents. So it's basically is topics distribution over a documents. Makes sense. </p>\n\n<p>Now I inspect the two methods for LdaModel. </p>\n\n<pre><code>ldaModel.describeTopics().show(2,truncate=False)\n+-----+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|topic|termIndices                            |termWeights                                                                                                                                                                                                               |\n+-----+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|0    |[0, 39, 68, 43, 50, 59, 49, 84, 2, 116]|[0.06362107696025378, 0.012284342954240298, 0.012104887652365797, 0.01066583226047289, 0.01022196994114675, 0.008836060842769776, 0.007638318779273158, 0.006478523079841644, 0.006421040016045976, 0.0057849412030562125]|\n|1    |[3, 1, 8, 6, 4, 11, 14, 7, 9, 2]       |[0.03164821806301453, 0.031039573066565747, 0.018856890552836778, 0.017520190459705844, 0.017243870770548828, 0.01717645631844006, 0.017147930104624565, 0.01706912474813669, 0.016946362395557312, 0.016722361546119266] |\n+-----+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\nonly showing top 2 rows\n</code></pre>\n\n<p>This seems to show the distribution of words or terms in each topics by their term id.  Shows ten terms (can be changed in the method as parameter). Again makes sense. </p>\n\n<p>Second method is below:</p>\n\n<pre><code>In [82]:\n\nldaModel.topicsMatrix()\nOut[82]:\nDenseMatrix(1184, 10, [132.7645, 3.0036, 13.3994, 3.6061, 9.3199, 2.4725, 9.3927, 3.4243, ..., 0.5774, 0.8335, 0.49, 0.6366, 0.546, 0.8509, 0.5081, 0.6627], 0)\n</code></pre>\n\n<p>Now as per docs, it says topicsMatrix is a matrix of Topics and it's terms where topics are columns and terms in that topics are rows. size would be vocab_size X k(no_of_topics). </p>\n\n<p><strong>I don't seem to see that here and not sure what this output mean?.</strong> </p>\n\n<p>Secondly, how do I associate these term id back to actual word names. In the end I want a list of topics (as columns or rows whatever) with the top 10-15 words/terms in that so that I can interpret the topics after seeing the kind of words present there. Here I just have some ids and no word names. </p>\n\n<p><strong>Any idea on these two?</strong> </p>\n\n<p>Edit II: </p>\n\n<p>When I just do topics[0][1] I get an error as mentioned in comment below. </p>\n\n<p>So I convert it to numpy array like below: </p>\n\n<pre><code>topics.toArray()\n</code></pre>\n\n<p>Looks like below</p>\n\n<pre><code>array([[ 132.76450545,    2.26966742,    0.73646762,    7.35362275,\n           0.57789645,    0.58248036,    0.65876465,    0.6695292 ,\n           0.70034004,    0.63875301],\n       [   3.00362754,   68.80842798,    0.48662529,  100.31770907,\n           0.57867623,    0.5357196 ,    0.58895636,    0.83408602,\n           0.53400242,    0.56291545],\n       [  13.39943055,   37.070078\n</code></pre>\n\n<p>This is a 1184 X 10 array so I am assuming it is a matrix of topics with distribution of words. </p>\n\n<p>If that is the case then the distribution should be probabilities but here we see numbers more than 1 like 132.76 etc. What is this then?</p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1487188907, "post_id": 42258843, "comment_id": 71675602, "body": "is your <code>start(self)</code> method defined? According to your code it is not. In addition, keep in mind that you should have a ScreenManager."}, {"owner": {"reputation": 59, "user_id": 4395618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/08c2d84b993b4660ffd98292547b855e?s=128&d=identicon&r=PG&f=1", "display_name": "i.r.b.a", "link": "https://stackoverflow.com/users/4395618/i-r-b-a"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1487190940, "post_id": 42258843, "comment_id": 71676714, "body": "yes &#39;start(self)&#39; is defined and I have a screen manager. The code is just a sample, Thank you.... I just want to know how to call a method from another screen"}], "answers": [{"tags": [], "owner": {"reputation": 7318, "user_id": 1258192, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2scd.png?s=128&g=1", "display_name": "Niklas9", "link": "https://stackoverflow.com/users/1258192/niklas9"}, "is_accepted": false, "score": 0, "last_activity_date": 1487191170, "creation_date": 1487191170, "answer_id": 42259584, "question_id": 42258843, "link": "https://stackoverflow.com/questions/42258843/newbie-calling-something-in-kivy/42259584#42259584", "title": "Newbie. calling something in kivy", "body": "<p>You need to create an instance of a class before you can call its methods.</p>\n\n<p>In Python it's done by calling the class with trailing parenthesis, basically just like a method call.\nWith that said, change your last line from:</p>\n\n<pre><code>self.play.bind(on_press=audio.start())\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>self.play.bind(on_press=Audio().start())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4395618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/08c2d84b993b4660ffd98292547b855e?s=128&d=identicon&r=PG&f=1", "display_name": "i.r.b.a", "link": "https://stackoverflow.com/users/4395618/i-r-b-a"}, "edited": false, "score": 0, "creation_date": 1487805060, "post_id": 42259775, "comment_id": 71954907, "body": "Thank you, your answer gave me the idea to keep everything in one screen."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 59, "user_id": 4395618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/08c2d84b993b4660ffd98292547b855e?s=128&d=identicon&r=PG&f=1", "display_name": "i.r.b.a", "link": "https://stackoverflow.com/users/4395618/i-r-b-a"}, "edited": false, "score": 0, "creation_date": 1487808397, "post_id": 42259775, "comment_id": 71956185, "body": "@RashIsh, I&#39;m glad my answer help you."}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 0, "last_activity_date": 1487191826, "creation_date": 1487191826, "answer_id": 42259775, "question_id": 42258843, "link": "https://stackoverflow.com/questions/42258843/newbie-calling-something-in-kivy/42259775#42259775", "title": "Newbie. calling something in kivy", "body": "<p>I think that you should define this methods in your screen manager root. For example:</p>\n\n<pre><code>class RootScreenManager(ScreenManager):\n    # your class implementation\n    def start(self):\n       # your method implementation\n\nclass Audio(Screen):\n    def start(self):\n        # your code\n\nclass MainPage(Screen):\n    # your code\n</code></pre>\n\n<p>If this method is called when pressing a button, I strongly suggest to use a Kivy file to define your view, and you can call <code>start</code> using the <code>on_press</code> attribute:</p>\n\n<pre><code>Button:\n    Image:\n        source: 'play.png'\n    size_hint: .2, .1\n    on_press: app.root.start()\n    pos: 600, 850\n</code></pre>\n\n<p>On the other hand, if you don't want the previous approach you can create an instance of the class within the method you want to called is defined, and then bind that method with your button by:</p>\n\n<pre><code>instance = Audio()\nself.play.bind(on_press=instance.start)\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4395618, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/08c2d84b993b4660ffd98292547b855e?s=128&d=identicon&r=PG&f=1", "display_name": "i.r.b.a", "link": "https://stackoverflow.com/users/4395618/i-r-b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42259775, "answer_count": 2, "score": 1, "last_activity_date": 1504711206, "creation_date": 1487188569, "last_edit_date": 1504711206, "question_id": 42258843, "link": "https://stackoverflow.com/questions/42258843/newbie-calling-something-in-kivy", "title": "Newbie. calling something in kivy", "body": "<p>I'm trying to call \"start\" from the AUDIO screen</p>\n\n<pre><code>class Audio(Screen):\n\n    def start(self):\n\nclass MainPage(Screen):\n\n    def open1(self, *args):\n         self.play = ImageButton(source= 'play.png',allow_stretch= True, pos= (600, 850), size_hint= (.2,.1))\n         self.play.bind(on_press=audio.start()) #How do I call start?\n</code></pre>\n\n<p>EDIT: This is just a sample code</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 6342575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4de518e31dfbc2e8a7af2ebd584f25e?s=128&d=identicon&r=PG&f=1", "display_name": "A.Kot", "link": "https://stackoverflow.com/users/6342575/a-kot"}, "is_accepted": false, "score": 0, "last_activity_date": 1487188387, "creation_date": 1487188387, "answer_id": 42258796, "question_id": 42258758, "link": "https://stackoverflow.com/questions/42258758/how-to-delete-the-rows-with-pattern/42258796#42258796", "title": "How to delete the rows with pattern", "body": "<p>You don't need to delete, you just need to select the ones that don't have 'edit' in them:</p>\n\n<pre><code>df = df[~df.RegionName1.str.contains('edit')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "is_accepted": false, "score": 0, "last_activity_date": 1487188410, "creation_date": 1487188410, "answer_id": 42258799, "question_id": 42258758, "link": "https://stackoverflow.com/questions/42258758/how-to-delete-the-rows-with-pattern/42258799#42258799", "title": "How to delete the rows with pattern", "body": "<p>I would opt for <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html\" rel=\"nofollow noreferrer\"><code>pandas.Series.str.contains</code></a> to get an appropriate filter. </p>\n\n<pre><code>df = df[~df.RegionName1.str.contains('[edit]')]\n</code></pre>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>&gt;&gt;&gt; df\n     RegionName1     State\n0  Alabama[edit]   Alabama\n1        Alabama   Alabama\n2   Alaska[edit]    Alaska\n3       Arkansas  Arkansas\n\n&gt;&gt;&gt; df = df[~df.RegionName1.str.contains('[edit]')]\n\n&gt;&gt;&gt; df\n  RegionName1     State\n1     Alabama   Alabama\n3    Arkansas  Arkansas\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1487190410, "creation_date": 1487190410, "answer_id": 42259358, "question_id": 42258758, "link": "https://stackoverflow.com/questions/42258758/how-to-delete-the-rows-with-pattern/42259358#42259358", "title": "How to delete the rows with pattern", "body": "<p>you can use <code>.str.endswith()</code> method:</p>\n\n<pre><code>In [165]: df = df.loc[~df.RegionName1.str.endswith('[edit]')]\n\nIn [166]: df\nOut[166]:\n       State   RegionName1\n1    Alabama        Auburn\n2    Alabama      Florence\n3    Alabama  Jacksonville\n4    Alabama    Livingston\n6     Alaska     Fairbanks\n8    Arizona     Flagstaff\n9    Arizona         Tempe\n11  Arkansas   Arkadelphia\n12  Arkansas  Fayetteville\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 7571076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DxB9c.jpg?s=128&g=1", "display_name": "Kriz", "link": "https://stackoverflow.com/users/7571076/kriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1496434856, "accepted_answer_id": 42259358, "answer_count": 3, "score": 0, "last_activity_date": 1487190479, "creation_date": 1487188237, "last_edit_date": 1487190479, "question_id": 42258758, "link": "https://stackoverflow.com/questions/42258758/how-to-delete-the-rows-with-pattern", "closed_reason": "Duplicate", "title": "How to delete the rows with pattern", "body": "<p>I have a DataFrame as below. I want to delete rows which has RegionName containing [edit]. I appreciate any help.</p>\n\n<pre><code>    State   RegionName1\n0   Alabama Alabama[edit]\n1   Alabama Auburn\n2   Alabama Florence\n3   Alabama Jacksonville\n4   Alabama Livingston\n9   Alaska  Alaska[edit]\n10  Alaska  Fairbanks\n11  Arizona Arizona[edit]\n12  Arizona Flagstaff\n13  Arizona Tempe\n15  Arkansas    Arkansas[edit]\n16  Arkansas    Arkadelphia\n18  Arkansas    Fayetteville\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 1, "creation_date": 1487188635, "post_id": 42258745, "comment_id": 71675441, "body": "you need to find the artist for the ticks and return it in your init and animate functions like you do for the line artist"}, {"owner": {"reputation": 414, "user_id": 3479599, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac6e792dadc71edf482d3d869e43b3b0?s=128&d=identicon&r=PG&f=1", "display_name": "HexxNine", "link": "https://stackoverflow.com/users/3479599/hexxnine"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1487189402, "post_id": 42258745, "comment_id": 71675897, "body": "@Aaron Thank you Aaron, would you by chance know what artist that would be or where to find the answer? Ive been looking at the docs but I have not been able to figure that out yet."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1487189778, "post_id": 42258745, "comment_id": 71676103, "body": "I&#39;m not really sure.. the script actually works as expected for me, but I&#39;m using qt5"}, {"owner": {"reputation": 414, "user_id": 3479599, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac6e792dadc71edf482d3d869e43b3b0?s=128&d=identicon&r=PG&f=1", "display_name": "HexxNine", "link": "https://stackoverflow.com/users/3479599/hexxnine"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1487190099, "post_id": 42258745, "comment_id": 71676291, "body": "@Aaron you&#39;re saying the tick labels change color on their own for you? hmm, they only change for me when I adjust the size of the window, I guessing because it has to redraw the whole graph again to fit the new window size...but mine don&#39;t change on their own...weird."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1487190460, "post_id": 42258745, "comment_id": 71676464, "body": "maybe <a href=\"http://matplotlib.org/api/axes_api.html#ticks-and-tick-labels\" rel=\"nofollow noreferrer\">this</a> with <a href=\"http://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.get_yticklabels.html#matplotlib.axes.Axes.get_yticklabels\" rel=\"nofollow noreferrer\"><code>ax.get_yticklabels()</code></a>"}, {"owner": {"reputation": 414, "user_id": 3479599, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac6e792dadc71edf482d3d869e43b3b0?s=128&d=identicon&r=PG&f=1", "display_name": "HexxNine", "link": "https://stackoverflow.com/users/3479599/hexxnine"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1487190954, "post_id": 42258745, "comment_id": 71676723, "body": "@Aaron I tried this earlier but got <code>AttributeError: &#39;silent_list&#39; object has no attribute &#39;set_animated&#39;</code>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1487192227, "post_id": 42258745, "comment_id": 71677424, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17558096/animated-title-in-matplotlib\">Animated title in matplotlib</a>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1487192311, "post_id": 42258745, "comment_id": 71677471, "body": "See especially <a href=\"http://stackoverflow.com/a/30860027/4124317\">this solution</a> inside <a href=\"http://stackoverflow.com/questions/17558096/animated-title-in-matplotlib\">Animated title in matplotlib</a>."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3517621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7adaa91092ec68b80a1a928d572f969?s=128&d=identicon&r=PG&f=1", "display_name": "Lino Bossio", "link": "https://stackoverflow.com/users/3517621/lino-bossio"}, "is_accepted": false, "score": 2, "last_activity_date": 1602149111, "last_edit_date": 1602149111, "creation_date": 1509067748, "answer_id": 46966153, "question_id": 42258745, "link": "https://stackoverflow.com/questions/42258745/how-to-update-tick-labels-in-animated-matplotlib-graph/46966153#46966153", "title": "How to update tick labels in animated matplotlib graph", "body": "<p>I got it working with the monkey patch suggested <a href=\"https://stackoverflow.com/questions/10368371/matplotlib-animated-plot-wont-update-labels-on-axis-using-blit/10704274#10704274\">in this post.</a></p>\n<p>Hope this works for wandering souls (like me) that spent A LOT of time trying to solve this problem.</p>\n"}], "owner": {"reputation": 414, "user_id": 3479599, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac6e792dadc71edf482d3d869e43b3b0?s=128&d=identicon&r=PG&f=1", "display_name": "HexxNine", "link": "https://stackoverflow.com/users/3479599/hexxnine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1602149111, "creation_date": 1487188196, "question_id": 42258745, "link": "https://stackoverflow.com/questions/42258745/how-to-update-tick-labels-in-animated-matplotlib-graph", "title": "How to update tick labels in animated matplotlib graph", "body": "<p>How can I get the tick labels to update once changed in an animated graph?\nHere is just a simple example of what I need. I realize I can set <code>blit=False</code> and have it work, however the project I am working on requires <code>blit=True</code> for performance reasons.</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Qt4Agg')\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport matplotlib.animation as animation\nimport time\n\nfig, ax = plt.subplots()\n\nx = np.arange(0, 2*np.pi, 0.01)\nline, = ax.plot(x, np.sin(x))\n\n\ndef animate(i):\n    line.set_ydata(np.sin(x + i/10.0))\n\n    if i &gt; 30:\n        ax.tick_params(axis='y', colors='red')  ### How do I get my graph to reflect this change?\n    return line,\n\n\ndef init():\n    line.set_ydata(np.ma.array(x, mask=True))\n    return line,\n\nani = animation.FuncAnimation(fig, animate, np.arange(1, 200), init_func=init,\n                          interval=100, blit=True)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "math", "pygame", "angle"], "comments": [{"owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "edited": false, "score": 1, "creation_date": 1487187939, "post_id": 42258637, "comment_id": 71675037, "body": "you may want to plot out the math on paper first prior to implementing it in code."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 17, "creation_date": 1487188012, "post_id": 42258637, "comment_id": 71675084, "body": "There is no angle between two points... There is only an angle between <b>three points</b>..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1487188828, "post_id": 42258637, "comment_id": 71675552, "body": "The angle between two vectors is <code>angle = acos(v1\u2022v2)</code> where <code>\u2022</code> means &quot;dot product&quot;? It sounds like the two vectors here would be defined by the shooter&#39;s current location and direction the gun is currently pointing, plus the current location and the location of the enemy."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487189754, "post_id": 42258637, "comment_id": 71676089, "body": "@martineau Since the gun and the target are defined relative to implicit x, y axes then <code>tangent = (y2-y1)&#47;(x2-x1)</code> would be used. This allows atan2 to be used."}, {"owner": {"reputation": 646, "user_id": 125062, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f1e04ac1753b9f984e3cd8a70fcea9eb?s=128&d=identicon&r=PG", "display_name": "Neo42", "link": "https://stackoverflow.com/users/125062/neo42"}, "edited": false, "score": 0, "creation_date": 1524087700, "post_id": 42258637, "comment_id": 86834799, "body": "answer what he meant to ask, not what he asked.  In this case I would assume he wants the angle to the next 90 degree split of the coordinate system."}], "answers": [{"comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 1, "creation_date": 1487190003, "post_id": 42258820, "comment_id": 71676236, "body": "Since the gun and the target are defined relative to implicit x, y axes then <code>tangent = (y2-y1)&#47;(x2-x1)</code> would be used. This allows atan2 to be used. You do not need to calculate the (implicit) axis vector."}, {"owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "reply_to_user": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1487190171, "post_id": 42258820, "comment_id": 71676333, "body": "You right, atan2 is a possible shortcut. I showed the general mathematical formula for explanatory reasons."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 1, "creation_date": 1487190920, "post_id": 42258820, "comment_id": 71676704, "body": "In either case you do not need to use vector 2, since vector one allows you to do the calculations that you need."}], "tags": [], "owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1487189439, "last_edit_date": 1487189439, "creation_date": 1487188509, "answer_id": 42258820, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points/42258820#42258820", "title": "How to know the angle between two points?", "body": "<p>As one commenter already said, there is only an angle between three points or between two intersecting vectors, that can be derived from this threee points. I assume you want the angle, that the gun and the target (vector 1) and the X-Axis (vector 2) has. Here is a link to a page, that explains how to calculate that angle. <a href=\"http://www.euclideanspace.com/maths/algebra/vectors/angleBetween/index.htm\" rel=\"nofollow noreferrer\">http://www.euclideanspace.com/maths/algebra/vectors/angleBetween/index.htm</a></p>\n\n<p>Python example:</p>\n\n<pre><code>import math\n\ndef angle(vector1, vector2):\n    length1 = math.sqrt(vector1[0] * vector1[0] + vector1[1] * vector1[1])\n    length2 = math.sqrt(vector2[0] * vector2[0] + vector2[1] * vector2[1])\n    return math.acos((vector1[0] * vector2[0] + vector1[1] * vector2[1])/ (length1 * length2))\n\nvector1 = [targetX - gunX, targetY - gunY] # Vector of aiming of the gun at the target\nvector2 = [1,0] #vector of X-axis\nprint(angle(vector1, vector2))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "edited": false, "score": 0, "creation_date": 1487192100, "post_id": 42258870, "comment_id": 71677351, "body": "thank you so much sir that was very useful in my code and helpful to understand more about the angles"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "edited": false, "score": 0, "creation_date": 1487192640, "post_id": 42258870, "comment_id": 71677651, "body": "@\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644 Thanks if you want you can accept it by checking the check mark on the side of the  answer."}, {"owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "edited": false, "score": 0, "creation_date": 1487192805, "post_id": 42258870, "comment_id": 71677742, "body": "done sir :) sorry i didnt know that i have to do this when i get the answered iam new here"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "edited": false, "score": 0, "creation_date": 1487194721, "post_id": 42258870, "comment_id": 71678735, "body": "@\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644 You do not <i>have to</i> It is available to allow you to mark the accepted answer if you choose to."}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": true, "score": 52, "last_activity_date": 1487192519, "last_edit_date": 1487192519, "creation_date": 1487188648, "answer_id": 42258870, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points/42258870#42258870", "title": "How to know the angle between two points?", "body": "<p>The tangent of the angle between two points is defined as delta y / delta x\nThat is (y2 - y1)/(x2-x1). This means that <code>math.atan2(dy, dx)</code> give the angle between the two points <strong>assuming</strong> that you know the base axis that defines the co-ordinates.</p>\n\n<p>Your gun is assumed to be the (0, 0) point of the axes in order to calculate the angle in radians. Once you have that angle, then you can use the angle for the remainder of your calculations.</p>\n\n<p>Note that since the angle is in radians, you need to use the math.pi instead of 180 degrees within your code. Also your test for more than 360 degrees (2*math.pi) is not needed. The test for negative (&lt; 0) is incorrect as you then force it to 0, which forces the target to be on the x axis in the positive direction.</p>\n\n<p>Your code to calculate the angle between the gun and the target is thus</p>\n\n<pre><code>myradians = math.atan2(targetY-gunY, targetX-gunX)\n</code></pre>\n\n<p>If you want to convert radians to degrees</p>\n\n<pre><code>mydegrees = math.degrees(myradians)\n</code></pre>\n\n<p>To convert from degrees to radians</p>\n\n<pre><code>myradians = math.radians(mydegrees)\n</code></pre>\n\n<p><a href=\"http://www.tutorialgateway.org/python-atan2/\" rel=\"noreferrer\">Python ATAN2</a></p>\n\n<blockquote>\n  <p>The Python ATAN2 function is one of the Python Math function which is\n  used to returns the angle (in radians) from the X -Axis to the\n  specified point (y, x).</p>\n</blockquote>\n\n<p><a href=\"https://sites.google.com/a/pythontkinter.com/tkinter/mathatan2\" rel=\"noreferrer\">math.atan2()</a></p>\n\n<blockquote>\n  <p><strong>Definition</strong>   Returns the tangent(y,x) in radius.</p>\n  \n  <p><strong>Syntax</strong><br>\n  math.atan2(y,x)</p>\n  \n  <p><strong>Parameters</strong><br>\n  y,x=numbers</p>\n  \n  <p><strong>Examples</strong><br>\n  The return is:  </p>\n\n<pre><code>&gt;&gt;&gt; import math  \n&gt;&gt;&gt; math.atan2(88,34)  \n1.202100424136847  \n&gt;&gt;&gt;\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 588, "user_id": 5909698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0e8068872f0a5d183612d8af4181fc?s=128&d=identicon&r=PG", "display_name": "Chidi", "link": "https://stackoverflow.com/users/5909698/chidi"}, "is_accepted": false, "score": 6, "last_activity_date": 1533133703, "creation_date": 1533133703, "answer_id": 51635888, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points/51635888#51635888", "title": "How to know the angle between two points?", "body": "<p>Specifically for working with <code>shapely linestring</code> objects, assuming your object (two points) is of the form <code>(min long, min lat, max long, max lat)</code></p>\n\n<pre><code>from math import atan2,degrees\nline = #Your-LineString-Object\nlineList = list(line.coords)\n\ndef AngleBtw2Points(pointA, pointB):\n  changeInX = pointB[0] - pointA[0]\n  changeInY = pointB[1] - pointA[1]\n  return degrees(atan2(changeInY,changeInX)) #remove degrees if you want your answer in radians\n\nAngleBtw2Points(lineList[0],lineList[1]) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": false, "score": 0, "last_activity_date": 1533210384, "last_edit_date": 1533210384, "creation_date": 1533192652, "answer_id": 51647228, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points/51647228#51647228", "title": "How to know the angle between two points?", "body": "<p>You can just use the <code>as_polar</code> method of Pygame's <a href=\"http://www.pygame.org/docs/ref/math.html#pygame.math.Vector2\" rel=\"nofollow noreferrer\">Vector2</a> class which returns the <a href=\"https://en.wikipedia.org/wiki/Polar_coordinates\" rel=\"nofollow noreferrer\">polar coordinates</a> of the vector (radius and polar angle (in degrees)).</p>\n\n<p>So just subtract the first point vector from the second and call the <code>as_polar</code> method of the resulting vector.</p>\n\n<pre><code>import pygame as pg\nfrom pygame.math import Vector2\n\n\npg.init()\nscreen = pg.display.set_mode((640, 480))\nclock = pg.time.Clock()\nBG_COLOR = pg.Color('gray12')\n\npoint = Vector2(320, 240)\nmouse_pos = Vector2(0, 0)\nradius, angle = (mouse_pos - point).as_polar()\n\ndone = False\nwhile not done:\n    for event in pg.event.get():\n        if event.type == pg.QUIT:\n            done = True\n        elif event.type == pg.MOUSEMOTION:\n            mouse_pos = event.pos\n            radius, angle = (mouse_pos - point).as_polar()\n\n    screen.fill(BG_COLOR)\n    pg.draw.line(screen, (0, 100, 255), point, mouse_pos)\n    pg.display.set_caption(f'radius: {radius:.2f} angle: {angle:.2f}')\n    pg.display.flip()\n    clock.tick(60)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 3, "last_activity_date": 1603875184, "last_edit_date": 1603875184, "creation_date": 1603835099, "answer_id": 64563327, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points/64563327#64563327", "title": "How to know the angle between two points?", "body": "<p>In general, the angle of a vector <em>(x, y)</em> can be calculated by <code>math.atan2(y, x)</code>. The vector can be defined by 2 points <em>(x1, y1)</em> and <em>(x2, y2)</em> on a line. Therefore the angle of the line is <code>math.atan2(y2-y1, x2-x1)</code>.\nBe aware that the y-axis needs to be reversed (<code>-y</code> respectively <code>y1-y2</code>) because the y-axis is generally pointing up but in the PyGame coordinate system the y-axis is pointing down. The unit of the angle in the Python <code>math</code> module is <a href=\"https://en.wikipedia.org/wiki/Radian\" rel=\"nofollow noreferrer\">Radian</a>, but the unit of the angle in PyGame functions like <a href=\"https://www.pygame.org/docs/ref/transform.html#pygame.transform.rotate\" rel=\"nofollow noreferrer\"><code>pygame.transform.rotate()</code></a> is <a href=\"https://en.wikipedia.org/wiki/Degree\" rel=\"nofollow noreferrer\">Degree</a>. Hence the angle has to be converted from Radians to Degrees by <code>math.degrees</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import math\n\ndef angle_of_vector(x, y):\n    return math.degrees(math.atan2(-y, x))\n\ndef angle_of_line(x1, y1, x2, y2):\n    return math.degrees(math.atan2(-y1-y2, x2-x1))\n</code></pre>\n<p>This can be simplified by using the <a href=\"https://www.pygame.org/docs/ref/math.html#pygame.math.Vector2.angle_to\" rel=\"nofollow noreferrer\"><code>angle_to</code></a> method of the <code>pygame.math.Vector2</code> object. This method computes the angle between 2 vectors in the PyGame coordinate system in degrees. Therefore it is not necessary to reverse the y-axis and convert from radians to degrees. Just calculate the angle between the vector and <em>(1, 0)</em>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def angle_of_vector(x, y):\n    return pygame.math.Vector2(x, y).angle_to((1, 0))\n\ndef angle_of_line(x1, y1, x2, y2):\n    return angle_of_vector(x2-x1, y2-y1)\n</code></pre>\n<p>Minimale example:</p>\n<p><a href=\"https://i.stack.imgur.com/Sb5p3.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sb5p3.gif\" alt=\"\" /></a></p>\n<pre class=\"lang-py prettyprint-override\"><code>import pygame\nimport math\n\ndef angle_of_vector(x, y):\n    #return math.degrees(math.atan2(-y, x))            # 1: with math.atan\n    return pygame.math.Vector2(x, y).angle_to((1, 0))  # 2: with pygame.math.Vector2.angle_to\n    \ndef angle_of_line(x1, y1, x2, y2):\n    #return math.degrees(math.atan2(-y1-y2, x2-x1))    # 1: math.atan\n    return angle_of_vector(x2-x1, y2-y1)               # 2: pygame.math.Vector2.angle_to\n    \npygame.init()\nwindow = pygame.display.set_mode((400, 400))\nclock = pygame.time.Clock()\nfont = pygame.font.SysFont(None, 50)\n\nangle = 0\nradius = 150\nvec = (radius, 0)\n\nrun = True\nwhile run:\n    clock.tick(60)\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            run = False\n\n    cpt = window.get_rect().center\n    pt = cpt[0] + vec[0], cpt[1] + vec[1]\n    angle = angle_of_vector(*vec)\n\n    window.fill((255, 255, 255))\n    pygame.draw.circle(window, (0, 0, 0), cpt, radius, 1)\n    pygame.draw.line(window, (0, 255, 0), cpt, (cpt[0] + radius, cpt[1]), 3)\n    pygame.draw.line(window, (255, 0, 0), cpt, pt, 3)\n    text_surf = font.render(str(round(angle/5)*5) + &quot;\u00b0&quot;, True, (255, 0, 0))\n    text_surf.set_alpha(127)\n    window.blit(text_surf, text_surf.get_rect(bottomleft = (cpt[0]+20, cpt[1]-20)))\n    pygame.display.flip()\n\n    angle = (angle + 1) % 360\n    vec = radius * math.cos(angle*math.pi/180), radius * -math.sin(angle*math.pi/180)\n\npygame.quit()\nexit()\n</code></pre>\n<hr />\n<p><a href=\"https://www.pygame.org/docs/ref/math.html#pygame.math.Vector2.angle_to\" rel=\"nofollow noreferrer\"><code>angle_to</code></a> can be used to calculate the angle between 2 vectors or lines:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def angle_between_vectors(x1, y1, x2, y2):\n    return pygame.math.Vector2(x1, y1).angle_to((x2, y2))\n</code></pre>\n<p>Minimal example:</p>\n<p><a href=\"https://i.stack.imgur.com/fW3WH.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fW3WH.gif\" alt=\"\" /></a></p>\n<pre class=\"lang-py prettyprint-override\"><code>import pygame\nimport math\n\ndef angle_between_vectors(x1, y1, x2, y2):\n    return pygame.math.Vector2(x1, y1).angle_to((x2, y2))\n\ndef angle_of_vector(x, y):\n    return pygame.math.Vector2(x, y).angle_to((1, 0))    \n    \npygame.init()\nwindow = pygame.display.set_mode((400, 400))\nclock = pygame.time.Clock()\nfont = pygame.font.SysFont(None, 50)\n\nangle = 0\nradius = 150\nvec1 = (radius, 0)\nvec2 = (radius, 0)\n\nrun = True\nwhile run:\n    clock.tick(60)\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            run = False\n\n    cpt = window.get_rect().center\n    pt1 = cpt[0] + vec1[0], cpt[1] + vec1[1]\n    pt2 = cpt[0] + vec2[0], cpt[1] + vec2[1]\n    angle = angle_between_vectors(*vec2, *vec1)\n\n    window.fill((255, 255, 255))\n    pygame.draw.circle(window, (0, 0, 0), cpt, radius, 1)\n    pygame.draw.line(window, (0, 255, 0), cpt, pt1, 3)\n    pygame.draw.line(window, (255, 0, 0), cpt, pt2, 3)\n    text_surf = font.render(str(round(angle/5)*5) + &quot;\u00b0&quot;, True, (255, 0, 0))\n    text_surf.set_alpha(127)\n    window.blit(text_surf, text_surf.get_rect(bottomleft = (cpt[0]+20, cpt[1]-20)))\n    pygame.display.flip()\n\n    angle1 = (angle_of_vector(*vec1) + 1/3) % 360\n    vec1 = radius * math.cos(angle1*math.pi/180), radius * -math.sin(angle1*math.pi/180)\n    angle2 = (angle_of_vector(*vec2) + 1) % 360\n    vec2 = radius * math.cos(angle2*math.pi/180), radius * -math.sin(angle2*math.pi/180)\n\npygame.quit()\nexit()\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56305, "favorite_count": 7, "accepted_answer_id": 42258870, "answer_count": 5, "score": 29, "last_activity_date": 1617571122, "creation_date": 1487187810, "last_edit_date": 1565149390, "question_id": 42258637, "link": "https://stackoverflow.com/questions/42258637/how-to-know-the-angle-between-two-points", "title": "How to know the angle between two points?", "body": "<p>I am making small game with pygame and I have made a gun that rotates around its center.\nMy problem is that I want the gun to rotate by itself to the enemy direction, but I couldn't do that because I can't find the angle between the gun and the enemy to make the gun rotate to it \nI have searched and I found that I have to use the <code>atan2</code> but I didn't find any working code so I hope someone could help me.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import pygame\nfrom pygame.locals import*\npygame.init()\nheight=650\nwidth=650\nscreen=pygame.display.set_mode((height,width))\nclock=pygame.time.Clock()\ngun=pygame.image.load(\"m2.png\").convert_alpha() \ngun=pygame.transform.smoothscale(gun,(200,200)).convert_alpha()\nangle=0\nangle_change=0\nRED=(255,0,0)\nx=525\ny=155\nwhile True :\n    screen.fill((150,150,150))\n    for event in pygame.event.get():\n        if event.type==QUIT:\n            pygame.quit()\n            quit()\n        if event.type==KEYDOWN:\n            if event.key==K_a:\n                angle_change=+1\n            if event.key==K_d:\n                angle_change=-1\n        elif event.type==KEYUP:\n            angle_change=0\n    angle+=angle_change\n    if angle&gt;360:\n        angle=0\n    if angle&lt;0:\n        angle=360\n    pygame.draw.rect(screen,RED,(x,y,64,64))\n    position = (height/2,width/2)\n    gun_rotate=pygame.transform.rotate(gun,angle) \n    rotate_rect = gun_rotate.get_rect()\n    rotate_rect.center = position\n    screen.blit(gun_rotate, rotate_rect)\n    pygame.display.update()\n    clock.tick(60) \n</code></pre>\n\n<p>And here is a picture trying to make it clear:</p>\n\n<p><a href=\"https://i.stack.imgur.com/b8cGG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/b8cGG.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I solve the problem?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "edited": false, "score": 2, "creation_date": 1487187786, "post_id": 42258603, "comment_id": 71674964, "body": "What have you tried so far?  I&#39;d advise looking at the pandas library to be able to do it easily."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1487187790, "post_id": 42258603, "comment_id": 71674967, "body": "please share your attempts."}, {"owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "edited": false, "score": 0, "creation_date": 1487188010, "post_id": 42258603, "comment_id": 71675081, "body": "I currently have the file imported and printed."}, {"owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "edited": false, "score": 0, "creation_date": 1487188020, "post_id": 42258603, "comment_id": 71675092, "body": "import csv  with open (&#39;transactions.csv&#39;) as csvfile:     readCSV = csv.reader(csvfile, delimiter=&#39;,&#39;)     print (readCSV)                for row in readCSV:         print(row)"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487188069, "post_id": 42258603, "comment_id": 71675123, "body": "Please <a href=\"https://stackoverflow.com/posts/42258603/edit\">edit</a> your question to add relevant code and other information."}, {"owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "edited": false, "score": 0, "creation_date": 1487188114, "post_id": 42258603, "comment_id": 71675144, "body": "This is for an assignment, just need to be able to compute the sum of those values for test cases, as required for the assignment."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1487188588, "post_id": 42258603, "comment_id": 71675410, "body": "What was wrong with the answer to your <a href=\"http://stackoverflow.com/questions/42254744/trying-to-add-sums-from-a-csv-file-in-python\">identical code 3 hours ago</a>?"}, {"owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1487188884, "post_id": 42258603, "comment_id": 71675591, "body": "@roganjosh Did not seem to run correctly."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1487189257, "post_id": 42258603, "comment_id": 71675816, "body": "Then you should reply to Laurent in that question and ask for clarification. Now you have two questions open for essentially the same thing and nobody knows why it &quot;did not seem to run correctly&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "edited": false, "score": 0, "creation_date": 1487192971, "post_id": 42258899, "comment_id": 71677834, "body": "Thank you for your help Kelvin."}, {"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "reply_to_user": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "edited": false, "score": 0, "creation_date": 1487193165, "post_id": 42258899, "comment_id": 71677938, "body": "no problem!  You&#39;re welcome"}], "tags": [], "owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "is_accepted": true, "score": 0, "last_activity_date": 1487189803, "last_edit_date": 1487189803, "creation_date": 1487188753, "answer_id": 42258899, "question_id": 42258603, "link": "https://stackoverflow.com/questions/42258603/adding-csv-values-together-and-updating-the-file-with-the-sum/42258899#42258899", "title": "Adding CSV values together and updating the file with the sum?", "body": "<p>You have a few things going on here:</p>\n\n<p>1) </p>\n\n<p>You are opening up the file without a mode selected.  It does automatically default to read but you may want to be a bit more explicit.</p>\n\n<pre><code>with open('mycsvfile', 'r') as csvfile:\n.\n.\n.\n</code></pre>\n\n<p>2)</p>\n\n<p>Since its for an assignment, take a look at the examples provided here in the CSV documentation:</p>\n\n<p>This should get you most of the way:</p>\n\n<p><a href=\"https://docs.python.org/2/library/csv.html#module-contents\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/csv.html#module-contents</a></p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 5, "user_id": 7570093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3uN7MDbkYQ/AAAAAAAAAAI/AAAAAAAAENA/QcEz9rWQl-g/photo.jpg?sz=128", "display_name": "Jacob Sedlacek", "link": "https://stackoverflow.com/users/7570093/jacob-sedlacek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1487195523, "accepted_answer_id": 42258899, "answer_count": 1, "score": -3, "last_activity_date": 1487189803, "creation_date": 1487187680, "last_edit_date": 1487188536, "question_id": 42258603, "link": "https://stackoverflow.com/questions/42258603/adding-csv-values-together-and-updating-the-file-with-the-sum", "closed_reason": "Needs more focus", "title": "Adding CSV values together and updating the file with the sum?", "body": "<p>As an example in a CSV format, I have 20,3,1 printed. </p>\n\n<p>In this case there are:</p>\n\n<ul>\n<li>20 seats available</li>\n<li>3 reservations</li>\n<li>1 cancellation</li>\n</ul>\n\n<p>I need to subtract the second value from the first one, and then add the third value to that, making a total. Then outputted as: 20,3,1,18 The sum being 18. This is just an example as there will be different files with different numbers, yet in this same formatting, from different files all named the same.\n'The code so far is:</p>\n\n<pre><code>import csv\n\nwith open ('transactions.csv') as csvfile:\n    readCSV = csv.reader(csvfile, delimiter=',')\n    print (readCSV)\n\nfor row in readCSV:\n    print(row)\n</code></pre>\n\n<p>The CSV files will contain multiple rows of this formatting:</p>\n\n<p>30,3,2</p>\n\n<p>20,4,1</p>\n\n<p>15,5,3</p>\n"}, {"tags": ["python", "proxy", "scrapy", "http-proxy", "http-proxy-middleware"], "answers": [{"comments": [{"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1487188266, "post_id": 42258681, "comment_id": 71675226, "body": "weirdly enough even if it is working and enabled it is not displayed in the output log like your question is indicating. Maybe it&#39;s a bug with scrapy?"}, {"owner": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "edited": false, "score": 0, "creation_date": 1487188282, "post_id": 42258681, "comment_id": 71675242, "body": "Yes, I read the docs, but it doesn&#39;t load at startup. If I remove <code>&#39;scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware&#39;&zwnj;&#8203;: 110,</code> from <code>DOWNLOADER_MIDDLEWARES</code> the output is exactly the same, it is, HttpProxyMiddleware doesn&#39;t load"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "reply_to_user": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "edited": false, "score": 0, "creation_date": 1487188534, "post_id": 42258681, "comment_id": 71675375, "body": "@RdlP does it work though? if you add <code>meta={&#39;proxy&#39;:&#39;http:&#47;&#47;someproxy&#39;}</code>."}, {"owner": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "edited": false, "score": 0, "creation_date": 1487188986, "post_id": 42258681, "comment_id": 71675655, "body": "I have tried to set a proxy environment variable in linux and it doesnt work (in the docs say that I can set that variable). I am using a virtual envorment for python (anaconda)"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "reply_to_user": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "edited": false, "score": 0, "creation_date": 1487189230, "post_id": 42258681, "comment_id": 71675799, "body": "@RdlP I&#39;ve tried creating a new project with new spider to test this and it seems to be that the middleware is enabled by default but is not printed out at scrapy crawl. Try running <a href=\"https://gist.github.com/Granitosaurus/9420d2ec33b394c13a830f3a943e4b36\" rel=\"nofollow noreferrer\">gist.github.com/Granitosaurus/9420d2ec33b394c13a830f3a943e4b&zwnj;&#8203;36</a> on a fresh project. I think it&#39;s a minor bug with scrapy."}, {"owner": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "edited": false, "score": 0, "creation_date": 1489089078, "post_id": 42258681, "comment_id": 72530563, "body": "You are right, HttpProxyMiddleware is enable by default but it doesn&#39;t show in the list of middleware loaded at start. Thanks"}], "tags": [], "owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "is_accepted": true, "score": 1, "last_activity_date": 1487187964, "creation_date": 1487187964, "answer_id": 42258681, "question_id": 42258582, "link": "https://stackoverflow.com/questions/42258582/scrapy-doesnt-load-httpproxymiddleware-at-startup/42258681#42258681", "title": "Scrapy doesn&#39;t load HttpProxyMiddleware at startup", "body": "<p>This middleware is enabled by default in <code>DOWNLOADER_MIDDLEWARES_BASE</code></p>\n\n<p>see <a href=\"https://doc.scrapy.org/en/latest/topics/settings.html?highlight=scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware#downloader-middlewares-base\" rel=\"nofollow noreferrer\">documentation of DOWNLOADER_MIDDLEWARES_BASE</a></p>\n\n<p>List of <code>DOWNLOADER_MIDDLEWARES_BASE</code> values :</p>\n\n<pre><code>{\n    'scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware': 100,\n    'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware': 300,\n    'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware': 350,\n    'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware': 400,\n    'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware': 500,\n    'scrapy.downloadermiddlewares.retry.RetryMiddleware': 550,\n    'scrapy.downloadermiddlewares.ajaxcrawl.AjaxCrawlMiddleware': 560,\n    'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware': 580,\n    'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware': 590,\n    'scrapy.downloadermiddlewares.redirect.RedirectMiddleware': 600,\n    'scrapy.downloadermiddlewares.cookies.CookiesMiddleware': 700,\n    'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware': 750,\n    'scrapy.downloadermiddlewares.stats.DownloaderStats': 850,\n    'scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware': 900,\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12943, "user_id": 4094231, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/da5d12e4b0c319022432a23fc5344831?s=128&d=identicon&r=PG&f=1", "display_name": "Umair Ayub", "link": "https://stackoverflow.com/users/4094231/umair-ayub"}, "is_accepted": false, "score": 1, "last_activity_date": 1487192375, "creation_date": 1487192375, "answer_id": 42259935, "question_id": 42258582, "link": "https://stackoverflow.com/questions/42258582/scrapy-doesnt-load-httpproxymiddleware-at-startup/42259935#42259935", "title": "Scrapy doesn&#39;t load HttpProxyMiddleware at startup", "body": "<p>Have you tried setting a proxy in spider?</p>\n\n<p>Do it with <code>request</code> object like this</p>\n\n<pre><code>req = Request(**all params here**)\nreq.meta['proxy'] = \"proxy ip here\";\nyield req\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 748, "user_id": 6946615, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Q3axndztLY/AAAAAAAAAAI/AAAAAAAAAF0/3qwzt2Vx82o/photo.jpg?sz=128", "display_name": "elacuesta", "link": "https://stackoverflow.com/users/6946615/elacuesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1487553036, "creation_date": 1487553036, "answer_id": 42334970, "question_id": 42258582, "link": "https://stackoverflow.com/questions/42258582/scrapy-doesnt-load-httpproxymiddleware-at-startup/42334970#42334970", "title": "Scrapy doesn&#39;t load HttpProxyMiddleware at startup", "body": "<p>Currently (as of version 1.3.2), the <code>HttpProxyMiddleware</code> is not enabled if neither <code>http_proxy</code> or <code>https_proxy</code> environmental variables are defined (<a href=\"https://github.com/scrapy/scrapy/blob/1.3.2/scrapy/downloadermiddlewares/httpproxy.py#L23-L24\" rel=\"nofollow noreferrer\">source</a>).</p>\n\n<p>However, that doesn't mean responses can't be downloaded through proxies. The example posted by @Granitosaurus works at the downloader handler level (<a href=\"https://github.com/scrapy/scrapy/blob/1.3.2/scrapy/core/downloader/handlers/http11.py#L238\" rel=\"nofollow noreferrer\">source</a>).</p>\n\n<p>There is a <a href=\"https://github.com/scrapy/scrapy/pull/2530\" rel=\"nofollow noreferrer\">recent PR</a>, not released to PyPI yet, which enables the middleware by default and provides a setting (<code>HTTPPROXY_ENABLED</code>) to disable it if necessary.</p>\n"}], "owner": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 1, "accepted_answer_id": 42258681, "answer_count": 3, "score": 1, "last_activity_date": 1487553036, "creation_date": 1487187617, "question_id": 42258582, "link": "https://stackoverflow.com/questions/42258582/scrapy-doesnt-load-httpproxymiddleware-at-startup", "title": "Scrapy doesn&#39;t load HttpProxyMiddleware at startup", "body": "<p>I have created a new project as follow</p>\n\n<pre><code>scrapy startproject test\nscrapy genspider test1 example.com\n</code></pre>\n\n<p>and change settings.py as follow:</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\n# Scrapy settings for test project\n#\n# For simplicity, this file contains only settings considered important or\n# commonly used. You can find more settings consulting the documentation:\n#\n#     http://doc.scrapy.org/en/latest/topics/settings.html\n#     http://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html\n#     http://scrapy.readthedocs.org/en/latest/topics/spider-middleware.html\n\nBOT_NAME = 'test'\n\nSPIDER_MODULES = ['test.spiders']\nNEWSPIDER_MODULE = 'test.spiders'\n\n\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\n#USER_AGENT = 'test (+http://www.yourdomain.com)'\n\n# Obey robots.txt rules\nROBOTSTXT_OBEY = True\n\n# Configure maximum concurrent requests performed by Scrapy (default: 16)\n#CONCURRENT_REQUESTS = 32\n\n# Configure a delay for requests for the same website (default: 0)\n# See http://scrapy.readthedocs.org/en/latest/topics/settings.html#download-delay\n# See also autothrottle settings and docs\n#DOWNLOAD_DELAY = 3\n# The download delay setting will honor only one of:\n#CONCURRENT_REQUESTS_PER_DOMAIN = 16\n#CONCURRENT_REQUESTS_PER_IP = 16\n\n# Disable cookies (enabled by default)\n#COOKIES_ENABLED = False\n\n# Disable Telnet Console (enabled by default)\n#TELNETCONSOLE_ENABLED = False\n\n# Override the default request headers:\n#DEFAULT_REQUEST_HEADERS = {\n#   'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n#   'Accept-Language': 'en',\n#}\n\n# Enable or disable spider middlewares\n# See http://scrapy.readthedocs.org/en/latest/topics/spider-middleware.html\n#SPIDER_MIDDLEWARES = {\n#    'test.middlewares.MyCustomSpiderMiddleware': 543,\n#}\n\n# Enable or disable downloader middlewares\n# See http://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html\nDOWNLOADER_MIDDLEWARES = {\n    'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware': 110,\n}\n\n# Enable or disable extensions\n# See http://scrapy.readthedocs.org/en/latest/topics/extensions.html\n#EXTENSIONS = {\n#    'scrapy.extensions.telnet.TelnetConsole': None,\n#}\n\n# Configure item pipelines\n# See http://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html\n#ITEM_PIPELINES = {\n#    'test.pipelines.SomePipeline': 300,\n#}\n\n# Enable and configure the AutoThrottle extension (disabled by default)\n# See http://doc.scrapy.org/en/latest/topics/autothrottle.html\n#AUTOTHROTTLE_ENABLED = True\n# The initial download delay\n#AUTOTHROTTLE_START_DELAY = 5\n# The maximum download delay to be set in case of high latencies\n#AUTOTHROTTLE_MAX_DELAY = 60\n# The average number of requests Scrapy should be sending in parallel to\n# each remote server\n#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0\n# Enable showing throttling stats for every response received:\n#AUTOTHROTTLE_DEBUG = False\n\n# Enable and configure HTTP caching (disabled by default)\n# See http://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings\n#HTTPCACHE_ENABLED = True\n#HTTPCACHE_EXPIRATION_SECS = 0\n#HTTPCACHE_DIR = 'httpcache'\n#HTTPCACHE_IGNORE_HTTP_CODES = []\n#HTTPCACHE_STORAGE = 'scrapy.extensions.httpcache.FilesystemCacheStorage'\n</code></pre>\n\n<p>as you can see, I set </p>\n\n<pre><code>DOWNLOADER_MIDDLEWARES = {\n    'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware': 110,\n}\n</code></pre>\n\n<p>but now, when I run the spider with <code>scrapy crawl test1</code> I get the following output:</p>\n\n<pre><code>2017-02-15 20:37:52 [scrapy] INFO: Enabled extensions:\n['scrapy.extensions.corestats.CoreStats',\n 'scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.logstats.LogStats']\n2017-02-15 20:37:52 [scrapy] INFO: Enabled downloader middlewares:\n['scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware',\n 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy.downloadermiddlewares.chunked.ChunkedTransferMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n2017-02-15 20:37:52 [scrapy] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n</code></pre>\n\n<p>as you can see HttpProxyMiddleware is not being loaded.</p>\n\n<p>Why <code>HttpProxyMiddleware</code> doesn't load?</p>\n\n<p>Edit: I have installed scrapy 1.1.1</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1487187673, "post_id": 42258514, "comment_id": 71674900, "body": "I would assume not - generators save the state that they yielded at so they can continue from that point. Is there a reason you aren&#39;t using the built-in <a href=\"https://docs.python.org/2/library/tempfile.html\" rel=\"nofollow noreferrer\">tempfile</a>?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487187785, "post_id": 42258514, "comment_id": 71674963, "body": "Couldn&#39;t you have just tested this yourself (since you apparently haven&#39;t taken the time to read the documentation,either)?"}, {"owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "edited": false, "score": 1, "creation_date": 1487187855, "post_id": 42258514, "comment_id": 71675002, "body": "Note: &quot;with&quot; block is called a context manager. :)"}, {"owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1487189097, "post_id": 42258514, "comment_id": 71675720, "body": "@TemporalWolf I was ignorant of its existence, thanks for the tip!"}, {"owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1487189212, "post_id": 42258514, "comment_id": 71675794, "body": "@martineau definitely could and would have, however I post on SO to also make the answer accessible to others. Also, MSeifert&#39;s answer uncovered some points that I wouldn&#39;t tested for, so asking here did pay off :)"}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1487187644, "creation_date": 1487187644, "answer_id": 42258587, "question_id": 42258514, "link": "https://stackoverflow.com/questions/42258514/does-yield-ing-trigger-the-exit-function-if-done-inside-a-with-block/42258587#42258587", "title": "Does &quot;yield&quot;-ing trigger the __exit__ function if done inside a &quot;with&quot; block?", "body": "<p><code>yield</code>ing inside a <code>with</code> won't trigger <code>__exit__</code>. Control flow inside the generator has to leave the <code>with</code> block for the <code>__exit__</code> to trigger; suspending the generator doesn't count as leaving the <code>with</code> block. This is similar in spirit to how context switching to another thread won't trigger <code>__exit__</code> either.</p>\n"}, {"tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": false, "score": 3, "last_activity_date": 1487187667, "creation_date": 1487187667, "answer_id": 42258594, "question_id": 42258514, "link": "https://stackoverflow.com/questions/42258514/does-yield-ing-trigger-the-exit-function-if-done-inside-a-with-block/42258594#42258594", "title": "Does &quot;yield&quot;-ing trigger the __exit__ function if done inside a &quot;with&quot; block?", "body": "<p>Let's test it empirically.</p>\n\n<pre><code>class MyContextManager:\n    def __enter__(self):\n        pass\n    def __exit__(self, *args):\n        print \"Context manager is exiting.\"\n\n\ndef f():\n    print(\"Entered Function.\")\n    with MyContextManager() as m:\n        print(\"Entered with statement. Yielding...\")\n        yield m\n        print(\"Yielded. About to exit with statement.\")\n    print(\"Now outside of with statement.\")\n\nfor x in f():\n    pass\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>C:\\Users\\Kevin\\Desktop&gt;test.py\nEntered Function.\nEntered with statement. Yielding...\nYielded. About to exit with statement.\nContext manager is exiting.\nNow outside of with statement.\n</code></pre>\n\n<p>The \"Context manager is exiting\" message appears after the \"About to exit with statement\" message, so we can conclude that the <code>yield</code> statement does <em>not</em> trigger the <code>__exit__</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1487187718, "creation_date": 1487187718, "answer_id": 42258616, "question_id": 42258514, "link": "https://stackoverflow.com/questions/42258514/does-yield-ing-trigger-the-exit-function-if-done-inside-a-with-block/42258616#42258616", "title": "Does &quot;yield&quot;-ing trigger the __exit__ function if done inside a &quot;with&quot; block?", "body": "<p>In short: <strong>no</strong>, it will suspend the method from the moment it reaches the <code>yield</code> statement. The remainder is executed in case you ask for the next element.</p>\n\n<p>Given you write <code>result = tmp_csv_file()</code> <strong>nothing is done</strong>: so not even <code>tmp_path='tmp.csv'</code> is executed.</p>\n\n<p>Now if you call <code>next(result)</code>, Python will start to evaluate the function <strong>until it hits the first <code>yield</code> statement</strong>. So it executes <code>tmp_path = 'tmp.csv'</code>, <code>open(..)</code>s the file and <code>__enter__</code>s the environment. It hits the <code>yield</code> statement and thus returns the <code>csv_file</code>. Now you can do whatever you want with that file. The file will remain open (as long as you do not <code>close()</code> it explicitly), and <code>__exit__</code> will <strong>not be called</strong>.</p>\n\n<p>If you however call <code>next(result)</code> a <strong>second time</strong>, Python will <strong>continue its quest to find the next <code>yield</code> statement</strong>. It will thus <code>__exit__</code> the <code>with</code> environment, and remove the file (<code>os.remove(tmp_path)</code>). Then it <strong>hits the end</strong> of the method. This means we are done. And thus <code>next(..)</code> will throw an error that the iterable is exhausted.</p>\n"}, {"comments": [{"owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "edited": false, "score": 1, "creation_date": 1487188973, "post_id": 42258636, "comment_id": 71675641, "body": "accepted this one because the added information on deleting and scope make it the more complete answer"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1487189201, "post_id": 42258636, "comment_id": 71675785, "body": "You don&#39;t have to <i>exhaust</i> the generator, just advance it out of the <code>with</code>. As for deleting it, generators are <code>close</code>d on garbage collection, but that doesn&#39;t always happen immediately or at all (especially on anything other than CPython), and a buggy generator might not exit the <code>with</code> even when <code>close</code>d."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487189350, "post_id": 42258636, "comment_id": 71675861, "body": "@user2357112 but exhausting is one possibility (because it&#39;s equivalent to a <code>return None</code>) - even if the context manager isn&#39;t exited immediatly it is exited eventually when the object is destroyed (do you have evidence for an implementation that doesn&#39;t do that or is it just a guess?). However your last point is interesting: What do you mean by a &quot;buggy&quot; generator that doesn&#39;t exit the <code>with</code>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487189821, "post_id": 42258636, "comment_id": 71676127, "body": "@MSeifert: <a href=\"http://ideone.com/R0nOVb\" rel=\"nofollow noreferrer\">If the generator catches the <code>GeneratorExit</code> exception and doesn&#39;t exit</a>, <code>finally</code> blocks and <code>__exit__</code> methods might not run."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 4, "last_activity_date": 1487188123, "last_edit_date": 1487188123, "creation_date": 1487187808, "answer_id": 42258636, "question_id": 42258514, "link": "https://stackoverflow.com/questions/42258514/does-yield-ing-trigger-the-exit-function-if-done-inside-a-with-block/42258636#42258636", "title": "Does &quot;yield&quot;-ing trigger the __exit__ function if done inside a &quot;with&quot; block?", "body": "<p>It depends:</p>\n\n<ul>\n<li><p>If your generator function goes out of scope (or is otherwise deleted) the <code>__exit__</code> is called.</p></li>\n<li><p>If the generator is exhausted the <code>__exit__</code> is called.</p></li>\n</ul>\n\n<p>=> As long as the generator is in the with-block and not-exhausted and the variable holding the generator is not deleted the <code>__exit__</code> is not called.</p>\n\n<p>For example:</p>\n\n<pre><code>class Test(object):\n    def __init__(self):\n        print('init')\n\n    def __enter__(self):\n        print('enter')\n\n    def __exit__(self, *args, **kwargs):\n        print('exit')\n\n\ndef funfunc():\n    with Test():\n        yield 1\n        yield 2\n</code></pre>\n\n<p>Testing it:</p>\n\n<pre><code>&gt;&gt;&gt; a = funfunc()\n&gt;&gt;&gt; next(a)  # no exit\ninit\nenter\n1\n&gt;&gt;&gt; next(a)  # no exit\n2\n&gt;&gt;&gt; next(a, 0)  # exit because generator leaves the with-context inside the function\nexit\n0\n</code></pre>\n\n<p>Or if manually deleted:</p>\n\n<pre><code>&gt;&gt;&gt; a = funfunc()\n&gt;&gt;&gt; next(a)\ninit\nenter\n1\n&gt;&gt;&gt; del a  # exit because the variable holding the suspended generator is deleted.\nexit\n</code></pre>\n"}], "owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1606, "favorite_count": 0, "accepted_answer_id": 42258636, "answer_count": 4, "score": 4, "last_activity_date": 1487188123, "creation_date": 1487187351, "last_edit_date": 1495541354, "question_id": 42258514, "link": "https://stackoverflow.com/questions/42258514/does-yield-ing-trigger-the-exit-function-if-done-inside-a-with-block", "title": "Does &quot;yield&quot;-ing trigger the __exit__ function if done inside a &quot;with&quot; block?", "body": "<p><a href=\"https://stackoverflow.com/questions/9885217/in-python-if-i-return-inside-a-with-block-will-the-file-still-close\">This question as been asked with respect to returning</a> from inside the <code>with</code> block, but how about yielding?</p>\n\n<p>Does the block's <code>__exit__</code> get called on <code>yield</code> and then <code>__enter__</code> gets called again if the function is next invoked? Or does it wait for the generator to exit the with block (or to return)</p>\n\n<p>as an example :</p>\n\n<pre><code>def tmp_csv_file():\n    tmp_path = 'tmp.csv'\n    with open(tmp_path, 'w+') as csv_file:\n        yield csv_file # will this close the file?\n    os.remove(tmp_path)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-1.10"], "comments": [{"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 3, "creation_date": 1487187536, "post_id": 42258506, "comment_id": 71674822, "body": "It has nothing to do with unmanaged tables, you just need a single underscore: <code>t1.trecho_set.all()</code>."}, {"owner": {"reputation": 1549, "user_id": 3529833, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/74c547cbe8476f731f97005480dda6aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mojimi", "link": "https://stackoverflow.com/users/3529833/mojimi"}, "reply_to_user": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1487187577, "post_id": 42258506, "comment_id": 71674845, "body": "@knbk Oh wow I&#39;m ashamed, totally forgot that, thanks!"}], "owner": {"reputation": 1549, "user_id": 3529833, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/74c547cbe8476f731f97005480dda6aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mojimi", "link": "https://stackoverflow.com/users/3529833/mojimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487187332, "creation_date": 1487187332, "question_id": 42258506, "link": "https://stackoverflow.com/questions/42258506/django-object-has-no-attribute-set-in-legacy-database", "title": "Django Object has no attribute &#39;__set&#39; in legacy Database", "body": "<p>I can't quite figure out how to work ou ManyToMany relationships in a legacy DB.</p>\n\n<p>models.py : </p>\n\n<pre><code>class Trecho(models.Model):\n    cod = models.BigIntegerField(primary_key=True)\n    torres = models.ManyToManyField('Torre', through=\"Trecho_Com_Torre\")\n\n    class Meta:\n        managed = False\n        db_table = 'OPE_TRECHO'\n\nclass Torre(models.Model):\n    cod = models.BigIntegerField(primary_key=True)\n\n    class Meta:\n        managed = False\n        db_table = 'OPE_TO'\n\nclass Trecho_Com_Torre(models.Model):\n    cod = models.BigIntegerField(primary_key=True)\n    cod_trecho = models.ForeignKey('Trecho', on_delete=models.CASCADE, db_index=False, db_column='COD_TRECHO')\n    cod_to = models.ForeignKey('Torre', on_delete=models.CASCADE, db_index=False, db_column='COD_TO')\n\n    class Meta:\n        managed = False\n        db_table = 'OPE_TRECHO_COM_TO'\n</code></pre>\n\n<p>The error is \"Torre object has no attribute trecho__set\", when I try to run the following query :</p>\n\n<pre><code>t1 = Torre.objects.get(cod=1)\ntrechos = t1.trecho__set.all()\n</code></pre>\n\n<p>If I'm not mistaken, this would work if all these tables were managed by Django, but since they are legacy, how can I make this work?</p>\n"}, {"tags": ["python", "animation", "matplotlib", "ffmpeg"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1487190007, "creation_date": 1487190007, "answer_id": 42259246, "question_id": 42258439, "link": "https://stackoverflow.com/questions/42258439/saving-matplotlib-animation-outputs-a-0-second-video/42259246#42259246", "title": "Saving matplotlib.animation outputs a 0 second video", "body": "<p>I think you need to supply the arguments to the FFMpegWriter class, not to <code>animate.save</code>. The documenation says:</p>\n\n<blockquote>\n  <p>fps, codec, bitrate, extra_args, metadata are used to construct a MovieWriter instance and can only be passed if writer is a string.</p>\n</blockquote>\n\n<p>So you could try</p>\n\n<pre><code>FFwriter = animation.FFMpegWriter(fps=30, codec=\"libx264\")     \nvideo_ani.save('basic_animation1.mp4', writer = FFwriter )\n</code></pre>\n\n<p>where the codec is specified using the <code>codec</code> argument instead of some extra argument. </p>\n\n<p>Appart from that you'd probably need to test certain things: </p>\n\n<ul>\n<li>Can you save the animation as animated gif? \n\n<ul>\n<li>If yes, then you have a problem creating the mp4, </li>\n<li>if no, you may have a problem with the animation itself. </li>\n</ul></li>\n<li>What does using another codec specification do? I always used <code>codec=\"h264\"</code>, maybe that matters.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7570950, "user_type": "registered", "profile_image": "https://graph.facebook.com/1264522220293037/picture?type=large", "display_name": "Andy Baldacchino", "link": "https://stackoverflow.com/users/7570950/andy-baldacchino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487190007, "creation_date": 1487187030, "question_id": 42258439, "link": "https://stackoverflow.com/questions/42258439/saving-matplotlib-animation-outputs-a-0-second-video", "title": "Saving matplotlib.animation outputs a 0 second video", "body": "<p>I am fairly new to matplotlib and animations, the animation I have works when using <code>pyplot.show</code> but when attempting to use the <code>animation.save</code> function, the only thing outputted is a 0 second video with the initial frame of the animation.</p>\n\n<p>This is my code:</p>\n\n<pre><code>plt.rcParams['animation.ffmpeg_path'] = r'C:\\FFMPEG\\bin\\ffmpeg.exe'\nFFwriter = animation.FFMpegWriter()     \nvideo_ani.save('basic_animation1.mp4', writer = FFwriter, fps=30, extra_args=['-vcodec', 'libx264'])\n</code></pre>\n\n<p>Any help would be appreciated, thanks</p>\n"}, {"tags": ["python", "regex", "python-2.7"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1487187010, "post_id": 42258425, "comment_id": 71674561, "body": "Look at <code>[+-^]</code>, the hyphen must be at the end and <code>^</code> should not be at the beginning."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1487187119, "post_id": 42258425, "comment_id": 71674617, "body": "Also, use raw strings: <code>r&#39;...&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 3570982, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c1b2836313c9a217631db857df993d92?s=128&d=identicon&r=PG&f=1", "display_name": "user3570982", "link": "https://stackoverflow.com/users/3570982/user3570982"}, "edited": false, "score": 0, "creation_date": 1487190141, "post_id": 42258477, "comment_id": 71676320, "body": "Thank you for the explanation. I almost never use character ranges, and for some reason forgot that the <code>-</code> was used for that purpose."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 539, "user_id": 3570982, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c1b2836313c9a217631db857df993d92?s=128&d=identicon&r=PG&f=1", "display_name": "user3570982", "link": "https://stackoverflow.com/users/3570982/user3570982"}, "edited": false, "score": 0, "creation_date": 1487190502, "post_id": 42258477, "comment_id": 71676487, "body": "Regular expressions have a reputation for being notoriously tricky for precisely this reason."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1487187187, "creation_date": 1487187187, "answer_id": 42258477, "question_id": 42258425, "link": "https://stackoverflow.com/questions/42258425/character-matches-both-and-in-python-regular-expression/42258477#42258477", "title": "&#39;^&#39; Character Matches Both &#39;&lt;&#39; and &#39;&gt;&#39; in Python Regular Expression", "body": "<p>The way sets are defined has a lot of latitude, and a metasyntax of its own:</p>\n\n<pre><code>[+-^]\n</code></pre>\n\n<p>This means all the characters between <code>+</code> and <code>^</code> in the ASCII table, which is a lot of them and includes <code>&lt;</code> and <code>&gt;</code> as well as all letters.</p>\n\n<p>To fix it:</p>\n\n<pre><code>[\\+\\-\\^]\n</code></pre>\n\n<p>Escaping anything irregular is usually a good idea even if not strictly necessary.</p>\n"}], "owner": {"reputation": 539, "user_id": 3570982, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c1b2836313c9a217631db857df993d92?s=128&d=identicon&r=PG&f=1", "display_name": "user3570982", "link": "https://stackoverflow.com/users/3570982/user3570982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "closed_date": 1487189371, "accepted_answer_id": 42258477, "answer_count": 1, "score": 1, "last_activity_date": 1487187187, "creation_date": 1487186963, "question_id": 42258425, "link": "https://stackoverflow.com/questions/42258425/character-matches-both-and-in-python-regular-expression", "closed_reason": "Duplicate", "title": "&#39;^&#39; Character Matches Both &#39;&lt;&#39; and &#39;&gt;&#39; in Python Regular Expression", "body": "<p>I'm trying to match against <code>*=</code>, <code>&amp;=</code>, <code>+=</code>, <code>-=</code>, <code>|=</code>, and <code>^=</code> in a regular expression, but for some reason the below pattern accepts both <code>&lt;=</code> and <code>&gt;=</code>:</p>\n\n<pre><code>modifyPat = re.compile('\\s*[&amp;\\|\\*/%\\+-^]*=[^=]*')\n</code></pre>\n\n<p>I've done some digging, and found that the problem arises due to the inclusion of the <code>^</code> character in the pattern. If, for example, I remove the <code>^</code> as in the below pattern, I get expected matching behavior, but of course lose the ability match against <code>^=</code>:</p>\n\n<pre><code>modifyPat = re.compile('\\s*[&amp;\\|\\*/%\\+-]*=[^=]*')\n</code></pre>\n\n<p>What is going on here, and is there any way to include the <code>^</code> character in order to match <code>^=</code> without also matching <code>&lt;=</code> and <code>&gt;=</code> as I'd desire?</p>\n"}, {"tags": ["python", "numpy", "matrix"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1487187184, "post_id": 42258424, "comment_id": 71674644, "body": "Are you guaranteed that a space separates the label from the text?"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1487187246, "post_id": 42258424, "comment_id": 71674673, "body": "@AChampion Yes, it looks like a tab."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1487187365, "post_id": 42258424, "comment_id": 71674735, "body": "@ShanZhengYang: is there any other spacing character in a row?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1487187857, "post_id": 42258424, "comment_id": 71675004, "body": "Any reason you can&#39;t just iterator over the file line-by-line and <code>split()</code> the line? Is the concern being the 9 billion characters per line - i.e. are you memory constrained?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1487187986, "post_id": 42258424, "comment_id": 71675062, "body": "I&#39;d try to process the file one line at a time.  <code>numpy</code> is not designed to work with character strings 9b characters long."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1487188024, "post_id": 42258424, "comment_id": 71675095, "body": "@AChampion The size of the line with <code>Count()</code> does worry me"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1487188051, "post_id": 42258424, "comment_id": 71675112, "body": "@hpaulj That might be the best idea. A <code>for</code> statement and then writing to disk after each line..."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1487189168, "post_id": 42258424, "comment_id": 71675765, "body": "@WillemVanOnsem Nope, just that space"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1487192201, "post_id": 42258424, "comment_id": 71677404, "body": "@AChampion How would you implement the above if it was only 500 characters, not 9 billion? You would simply use <code>split()</code> first?"}], "answers": [{"tags": [], "owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "is_accepted": false, "score": 1, "last_activity_date": 1487260524, "last_edit_date": 1487260524, "creation_date": 1487204647, "answer_id": 42262618, "question_id": 42258424, "link": "https://stackoverflow.com/questions/42258424/how-to-count-the-characters-of-each-matrix-row-with-python-counter/42262618#42262618", "title": "How to count the characters of each matrix row with Python? Counter()?", "body": "<p>I haven't tested this with anything nearly as large as your data, but you could try something like the following.</p>\n\n<p>The premise is we read each line in chunks and translate the ascii characters <code>a, b, 2</code> into ints of which we then take a running histogram.  The reason we read each line in chunks is because each line is 9 billion bytes, meaning the file will not fit into memory on many computers. </p>\n\n<p>First let's define somethings.  <code>transtable</code> is an array which will take the characters in <code>a,b,2</code> and transform them to <code>0,1,2</code>.  I wrote it this way so it could be generalized if you have more characters.  We will store the results in a dictionary <code>hists</code> of the form <code>sample_name: np.array([a_count, b_count, 2_count])</code>.</p>\n\n<pre><code>import numpy as np\n\ntranstable = np.arange(256, dtype=np.uint8)\ntranstable[np.frombuffer('ab2')] = np.arange(3)\n\nchunksize = 436549 # 9123001002 / 2 / 3^5 / 43\ninvchunksize = 43*2*3**5\n\nhists = {}\nbins = np.arange(4) # 3 + 1\n# convenience function to take string buffer to counts of a,b,2 (0,1,2)\nhist_func = lambda buff: np.histogram(transtable[np.frombuffer(buff, np.uint8)],\n                                      bins=bins)[0]\n</code></pre>\n\n<p>Now we open up the file, and parse the header</p>\n\n<pre><code>with open(infile, 'r') as fin:\n    header_line = fin.readline()\n    rows, cols = map(int, header_line.split())\n</code></pre>\n\n<p>With the file open, let's now loop through it, first getting the sample name</p>\n\n<pre><code>    while True:\n        # parse name\n        name = ''\n        nextchar = ''\n        while nextchar != ' ': #may need to replace with '\\t'\n            nextchar = fin.read(1)\n            name += nextchar\n</code></pre>\n\n<p>Now that we have the sample name, let's parse the actual data:</p>\n\n<pre><code>        hist = np.zeros(3)\n        for _ in xrange(invchunksize):\n            dat = np.fromfile(fin, dtype=np.uint8, count=(chunksize))\n            # stop reading if we didn't get chunksize bytes during last read\n            if data.size != chunksize:\n                break\n\n            hist += hist_func(dat)\n\n        hists[name] = hist\n\n        # read newline character and continue on to next line\n        fin.read(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487224471, "post_id": 42263461, "comment_id": 71688629, "body": "It&#39;s not clear to me with the above how you&#39;re reading in the large text file...(also, this is python2.x, which is ok---it&#39;s just good for other SO readers to be aware of this)"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487464754, "post_id": 42263461, "comment_id": 71797982, "body": "Fixed, I had used a <code>StringIO(str)</code> to turn a string into a file interface, for a file replace with `open(&#39;&lt;filename&gt;&#39;). Why do you believe this is python 2.x, my default environment is 3.x?"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487624900, "post_id": 42263461, "comment_id": 71859205, "body": "I didn&#39;t think <code>StringIO()</code> existed in Python3.x"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487648391, "post_id": 42263461, "comment_id": 71867122, "body": "I get <code>ValueError: too many values to unpack (expected 2)</code> for the above."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487651624, "post_id": 42263461, "comment_id": 71867967, "body": "Then you have lines without any spaces in them, just develop the case for that (e.g. if you want to ignore empty lines, <code>try: title, code = line.strip().split(&#39; &#39;); except ValueError: pass</code>"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487652465, "post_id": 42263461, "comment_id": 71868229, "body": "I&#39;ll try this. Maybe it&#39;s because some lines are tab-delimited and not space-delimited?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487652965, "post_id": 42263461, "comment_id": 71868375, "body": "The just use <code>split()</code> which will split on any whitespace."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1487656387, "post_id": 42263461, "comment_id": 71869679, "body": "After doing <code>from collections import Counter</code>, and using <code>split()</code>, it worked. (This is for Python 3.x) Thanks!"}], "tags": [], "owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "is_accepted": true, "score": 1, "last_activity_date": 1487464566, "last_edit_date": 1487464566, "creation_date": 1487210391, "answer_id": 42263461, "question_id": 42258424, "link": "https://stackoverflow.com/questions/42258424/how-to-count-the-characters-of-each-matrix-row-with-python-counter/42263461#42263461", "title": "How to count the characters of each matrix row with Python? Counter()?", "body": "<p>Assuming a small enough amount of data to fit in memory (per line), then you could do something as simple as:</p>\n\n<pre><code>results = {}\nwith open('&lt;myfile&gt;') as f:\n    next(f)  # skip first line\n    for line in f:\n        title, code = line.strip().split(' ')\n        results[title] = Counter(code)\n</code></pre>\n\n<p>Given your small example dataset above you get:</p>\n\n<pre><code>{'sample_name1': Counter({'.': 3, '2': 21, 'a': 22, 'b': 25}),\n 'sample_name2': Counter({'.': 3, '2': 7, 'a': 8, 'b': 53})}\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 42263461, "answer_count": 2, "score": 2, "last_activity_date": 1487464566, "creation_date": 1487186958, "question_id": 42258424, "link": "https://stackoverflow.com/questions/42258424/how-to-count-the-characters-of-each-matrix-row-with-python-counter", "title": "How to count the characters of each matrix row with Python? Counter()?", "body": "<p>I have a matrix shaped (600, 9 billion) saved as a <code>*.txt</code> file. Each row of the matrix is named by a different sample name <code>sample_name1</code>, <code>sample_name2</code>, etc. However, there are sample names which are not standardized, e.g. <code>s###30023</code></p>\n\n<p>Afterwards, there is a string of three characters, each ~9 billion characters long. </p>\n\n<p><code>sample_name1 ab2ab222baab22ba2bab2b2aab22ab22bababab2baab2b2a</code></p>\n\n<p>The matrix is in the following format:</p>\n\n<pre><code>600 9123001002\nsample_name1 ab2ab222baab22ba2bab2b2aab22ab22bababab2baab2b2a2bababab2baab2b2ab2a...\nsample_name2 abbbbbbbbbbbb2bbbbbbbbbbabbbbbbaaabbbbbbbbb222bbbbbabababbbb2b2b2bbb...\n...\n</code></pre>\n\n<p>I would like to create a dictionary (or list, pandas DataFrame) of each sample with the number of unique characters counted. That is, in dictionary form:</p>\n\n<pre><code>sample_name1 = {'a': 1824600201, 'b':  2736900300, '2': 4561500501}\n</code></pre>\n\n<p>for each row. </p>\n\n<p>The quickest way to count characters in python would be to use <code>from collections import Counter</code>. One could possibly load the text file into <code>numpy</code>, iterate through each row of the matrix and then use <code>Counter()</code> for each row. </p>\n\n<p>However, how does one scrape the correct label for each row, especially as these labels are not standardized? Perhaps I could take the first X characters for each matrix row? </p>\n"}, {"tags": ["python", "sql-server", "django", "pyodbc"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487187386, "post_id": 42258420, "comment_id": 71674746, "body": "Please post an example of the &quot;incorrectly&quot; encoded JSON. <a href=\"https://tools.ietf.org/html/rfc7159#section-7\" rel=\"nofollow noreferrer\">Character escapes</a> maybe valid JSON. Also: Setting the charset only on the header is insufficient, resulting in a non-standard response. If you want <code>ISO-8859-1</code>-encoded JSON (why?), you must also set <a href=\"https://docs.djangoproject.com/en/1.10/ref/request-response/#jsonresponse-objects\" rel=\"nofollow noreferrer\"><code>json_dumps_params</code></a>"}, {"owner": {"reputation": 677, "user_id": 2900522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/02422b279b45eee2781e426c1428c4d8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rosales", "link": "https://stackoverflow.com/users/2900522/miguel-rosales"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487189370, "post_id": 42258420, "comment_id": 71675874, "body": "[{&quot;Date&quot;: &quot;2006-07-13&quot;, &quot;plage&quot;: 1, &quot;Production&quot;: 151, &quot;config&quot;: 79, &quot;Arret&quot;: 2, &quot;Pause&quot;: 0, &quot;\\u00c9teint&quot;: 158, &quot;alcul\\u00e9&quot;: 311, &quot;prod&quot;: 22249, &quot;quan&quot;: 33959, &quot;Nombre&quot;: 0, &quot;Hrs&quot;: 0}, ...]    \\u00c9 should read &#233;"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487189784, "post_id": 42258420, "comment_id": 71676106, "body": "This is perfectly valid JSON, Python&#39;s <code>json</code> module unicode-escapes any non-ASCII character. The string should be properly decoded client-side."}, {"owner": {"reputation": 677, "user_id": 2900522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/02422b279b45eee2781e426c1428c4d8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rosales", "link": "https://stackoverflow.com/users/2900522/miguel-rosales"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487190000, "post_id": 42258420, "comment_id": 71676234, "body": "I use google chrome to read the json response, is it a config I need to change on google chrome? I&#39;m working on a windows environment using python django."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487190473, "post_id": 42258420, "comment_id": 71676471, "body": "So <a href=\"https://jsfiddle.net/Lw141pmb/1/\" rel=\"nofollow noreferrer\">this</a> does not reproduce the accent properly at your end? Side note: <code>charset=latin1</code> is still incorrect, JSON is in <code>utf-8</code> by default."}, {"owner": {"reputation": 677, "user_id": 2900522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/02422b279b45eee2781e426c1428c4d8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rosales", "link": "https://stackoverflow.com/users/2900522/miguel-rosales"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487190728, "post_id": 42258420, "comment_id": 71676608, "body": "I&#39;m not as experienced with encoding but I believe that this situation occurs because mssql stored the data in an encoding different to UTF8. When I get the data it is encoded UTF8 by python and then sent through the endpoint being UTF8."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487190899, "post_id": 42258420, "comment_id": 71676691, "body": "And <code>alcul&#233;</code> and <code>&#201;teint</code> have incorrect accents? If not, the JSON is correct."}, {"owner": {"reputation": 677, "user_id": 2900522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/02422b279b45eee2781e426c1428c4d8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rosales", "link": "https://stackoverflow.com/users/2900522/miguel-rosales"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1487191016, "post_id": 42258420, "comment_id": 71676765, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/135808/discussion-between-enixsys-and-dhke\">continue this discussion in chat</a>."}], "owner": {"reputation": 677, "user_id": 2900522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/02422b279b45eee2781e426c1428c4d8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rosales", "link": "https://stackoverflow.com/users/2900522/miguel-rosales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513783989, "creation_date": 1487186952, "question_id": 42258420, "link": "https://stackoverflow.com/questions/42258420/how-to-produce-json-response-with-correct-encoding-using-django-and-mssql-accen", "title": "How to produce Json response with correct encoding using Django and Mssql (accents)", "body": "<p>I'm using Python to connect to a SQL server 2014 database using pyodbc.\nI capture the lines to produce a dictionnary to then send the information through a http with Django using a JsonResponse obj. When I test it out my response has backslashes and numbers wherever accents are found. How can I encode the response correctly?</p>\n\n<p>Here is my code:</p>\n\n<p><strong>database_odbc.py</strong></p>\n\n<pre><code>import pyodbc\nimport json\ndef connect():\n    conn = pyodbc.connect(\n        r'DRIVER={ODBC Driver 13 for SQL Server};'\n        r'SERVER=myserver;'\n        r'DATABASE=mydatabase;'\n        r'UID=sa;'\n        r'PWD=secret')\n    return conn.cursor()\n\ndef get_data_v(cursor):\n    cursor.execute('select * from data')\n    columns = [column[0] for column in cursor.description]\n    results = []\n    for row in cursor.fetchall():\n        results.append(dict(zip(columns, row)))\n    return results\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.http import JsonResponse\nfrom .database_odbc import connect, get_data_v\n\ndef dataView(request):\n    payload = get_data_v(connect())\n    response = JsonResponse(payload, safe=False)\n    response['contentType'] = 'application/json; charset=latin1'\n    return JsonResponse(payload, safe=False)\n</code></pre>\n\n<p>I have tried with and without the response['contentType'] header.</p>\n\n<p>Thank you.</p>\n"}]