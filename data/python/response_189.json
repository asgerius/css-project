[{"tags": ["python", "mysql", "sql", "pymysql"], "comments": [{"owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "edited": false, "score": 1, "creation_date": 1534983044, "post_id": 51976669, "comment_id": 90903572, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32625593/retrieving-data-from-mysql-in-batches-via-python\">Retrieving Data from MySQL in batches via Python</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "is_accepted": true, "score": -1, "last_activity_date": 1554376090, "creation_date": 1554376090, "answer_id": 55514423, "question_id": 51976669, "link": "https://stackoverflow.com/questions/51976669/pymysql-retrievingdata-in-batches/55514423#55514423", "title": "pymysql retrievingdata in batches", "body": "<p>the way i'm doing this is, is like this:</p>\n\n<pre><code>query = \"SELECT * FROM my_table\"\nc = db.cursor(pymysql.cursors.DictCursor)\nc.execute(query)\n\nlimit = 5000\nnot_done = True\n\nwhile not_done:\n    data = []\n    for _ in range(limit):\n        try:\n            data += [c.fetchone()]\n        except:\n            not_done = False\n            break\n    do_something_with_data()\n</code></pre>\n"}], "owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 55514423, "answer_count": 1, "score": 0, "last_activity_date": 1554376090, "creation_date": 1534982314, "question_id": 51976669, "link": "https://stackoverflow.com/questions/51976669/pymysql-retrievingdata-in-batches", "title": "pymysql retrievingdata in batches", "body": "<p>i am using pymysql to interact with an sql db, here is the code:</p>\n\n<pre><code>    query = \"SELECT * FROM my_table\"\n    c = db.cursor(pymysql.cursors.DictCursor)\n    c.execute(query)\n    c.fetchall()\n</code></pre>\n\n<p>now i am doing this for a database of 3000 enteries which isn't alot, i plan to use this on a database with 15 million enteries and i want to take the data out in a loop as batches of 5000 enteries</p>\n\n<p>i wonder if i need to do this using LIMIT and OFFSET in my query, or can i just do it using a method in the pymysql module... Thank You </p>\n"}, {"tags": ["python", "decorator", "class-method"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534982652, "post_id": 51976665, "comment_id": 90903494, "body": "Can you give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? What you&#39;ve shown here is a classmethod written outside of any class, a normal method written outside of any class, a commented-out function, and some code that appears to be trying to construct an object, call a classmethod on an attribute that doesn&#39;t exist yet, and then assign the result to that attribute, and then throw away the object you just worked so hard to modify, so\u2026 it&#39;s kind of hard to tell what you&#39;re trying to do or what&#39;s wrong with it."}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534982945, "post_id": 51976665, "comment_id": 90903555, "body": "@abarnert oh crap. My apologies. The rest of my code didn&#39;t get pasted over"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534983183, "post_id": 51976665, "comment_id": 90903595, "body": "No problem; that\u2019s what the <a href=\"https://stackoverflow.com/posts/51976665/edit\">edit</a> button is for. :)"}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534983240, "post_id": 51976665, "comment_id": 90903606, "body": "@abarnert fixed it. My bad"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534985988, "post_id": 51976665, "comment_id": 90904111, "body": "Posting all of your code is still far from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Especially since, if anyone wanted to actually run your code to debug it, they&#39;d have to sit through typing in more than a dozen <code>input</code> prompts before seeing what happens."}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534986574, "post_id": 51976665, "comment_id": 90904232, "body": "the input doesn&#39;t matter. you could just hit enter for all of them"}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1534984147, "post_id": 51976824, "comment_id": 90903761, "body": "Thanks. I had thought of that but I really would like to learn and become more familiar with decorators. I feel like this is a prime time to use one but I will result to this is there is no other way"}], "tags": [], "owner": {"reputation": 104, "user_id": 10262090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daec178ed50e44ed2aaf1cde3ca4dbb1?s=128&d=identicon&r=PG&f=1", "display_name": "F.G.", "link": "https://stackoverflow.com/users/10262090/f-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1534984019, "creation_date": 1534984019, "answer_id": 51976824, "question_id": 51976665, "link": "https://stackoverflow.com/questions/51976665/how-can-i-make-these-counter-decorator-work-for-my-in-class-method/51976824#51976824", "title": "how can I make these counter decorator work for my in class method", "body": "<p>If you don't need to use a decorator then you could just measure the length of \nyour dictionary:</p>\n\n<pre><code>def _populate_profile_dict(self):\n        _profile_dict['profile' + str(len(_profile_dict))] = self.json_obj\n        print(_profile_dict)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1534985556, "post_id": 51976897, "comment_id": 90904022, "body": "Thanks for the reply. I just wanted to populate the _profile_dict with &quot;user profile&quot; entries. I plan on using them at a later stage in my program as part of form data for a request. I don&#39;t think I&#39;ll need an actual instance of a class. For now, I&#39;m more interested in learning about decorators and exploring the different ways I can populate this dict. Also, I&#39;m using pycharm and &quot;def wrapper(self)&quot; has self being taken as just a regular parameter. Not a spot for an instance."}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1534985828, "post_id": 51976897, "comment_id": 90904066, "body": "Also, that syntax error you mentioned was just a snafu with stackoverflow. Their ctrl + k never seems to work for me so I always just hit space 4 times on all my lines. Must have goofed there"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 1, "creation_date": 1534985935, "post_id": 51976897, "comment_id": 90904100, "body": "@UCProgrammer If you don&#39;t need an actual instance of the class, that almost always means you didn&#39;t need a class in the first place. Meanwhile, I don&#39;t know what &quot;a spot&quot; means on PyCharm or whatever, but I&#39;m not surprised that PyCharm can&#39;t guess that the thing we&#39;re defining as <code>wrapper</code> will eventually be used as a method, because we&#39;re not actually defining it as a method, but putting it into place as one after it was defined."}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1534986307, "post_id": 51976897, "comment_id": 90904188, "body": "by &quot;spot&quot; I meant how self is typically the first parameter and signifies the reference to the instance whose method is called. Pycharm always puts &#39;self&#39; in purple characters while other parameters are white and slightly larger"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 2, "creation_date": 1534987279, "post_id": 51976897, "comment_id": 90904345, "body": "@UCProgrammer OK, I think the best thing to do is to just ignore that. AFAIK, PyCharm bases its highlighting (and other stuff) on some pretty clever and powerful static analysis, but there&#39;s only so much you can do statically with a language as dynamic as Python, so they have to use heuristics for some things, and defining a function intended to be used as a method even though it wasn&#39;t defined as one, that probably breaks their heuristic guesses."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1534985569, "last_edit_date": 1534985569, "creation_date": 1534984748, "answer_id": 51976897, "question_id": 51976665, "link": "https://stackoverflow.com/questions/51976665/how-can-i-make-these-counter-decorator-work-for-my-in-class-method/51976897#51976897", "title": "how can I make these counter decorator work for my in class method", "body": "<p>Let me ignore your second attempt for now, because the first one was a lot closer to working:</p>\n\n<pre><code>def counter(self, func):\n    def wrapper():\n        wrapper.counter += 1\n        return func(wrapper.counter)\n\n    wrapper.counter = 0\n    return wrapper\n\n@counter\ndef _populate_profile_dict(self, count):\n    # ...\n</code></pre>\n\n<p>The reason this doesn't work is that decorator syntax is trying to do this:</p>\n\n<pre><code>_populate_profile_dict = counter(_populate_profile_dict)\n</code></pre>\n\n<p>\u2026 but <code>counter</code> is defined to take two arguments, not one, <code>self</code> and a function. There's obviously no <code>self</code> here. In fact, even the class itself doesn't exist yet, much less any methods. You're calling it with just the function, so that's what it needs to take.</p>\n\n<p>And if you just remove that <code>self</code> parameter, the decorator part will work just fine:</p>\n\n<pre><code>def counter(func):\n    def wrapper():\n        wrapper.counter += 1\n        return func(wrapper.counter)\n\n    wrapper.counter = 0\n    return wrapper\n</code></pre>\n\n<p>Now, that <code>counter</code> is no longer useful as a method on instances of the class\u2014but that's fine, since you never intend to use it that way.</p>\n\n<p>Meanwhile, it's perfectly useful as a normal function while the class is still being defined. And that's exactly the way you want to use it.</p>\n\n<p>It might be a bit confusing that <code>counter</code> ends up looking like a public method of <code>Profile</code> instances, even though it's not actually callable that way, which is pretty confusing. But you can solve that by either renaming it to <code>_counter</code>, or doing a <code>del counter</code> at the very end of the class definition.</p>\n\n<hr>\n\n<p>Anyway, the decorator part works, but there's a second problem:</p>\n\n<pre><code>def wrapper():\n</code></pre>\n\n<p>This defines a function with no parameters. But you're trying to create something that can be called as a normal instance method, so it's going to be passed a <code>self</code> argument. You need to accept that <code>self</code> argument, and you also need to pass it on to the wrapped function. So:</p>\n\n<pre><code>def counter(func):\n    def wrapper(self):\n        wrapper.counter += 1\n        return func(self, wrapper.counter)\n    # etc.\n</code></pre>\n\n<hr>\n\n<p>And now, everything works as (I think) you intended.</p>\n\n<hr>\n\n<p>While we're at it, this code is a bit weird:</p>\n\n<pre><code>def create_profiles():\n    Profile()._populate_profile_dict()\n</code></pre>\n\n<p>This creates a <code>Profile</code> instance, calls a private method on it, and then discards the instance. I'm not sure why you want to do that. Sure, it adds a <code>profile1</code> entry to the private global <code>_profile_dict</code>, but what does that get you?</p>\n\n<hr>\n\n<p>Coming to your second attempt now:</p>\n\n<pre><code>@classmethod\ndef counter(cls, func):\n    def wrapper():\n        wrapper.counter += 1\n        return func(wrapper.counter)\n\n    wrapper.counter = 0\n    return wrapper\n</code></pre>\n\n<p>Now you're successfully creating a public <code>classmethod</code>, which you try to call explicitly as a <code>classmethod</code>, which is perfect:</p>\n\n<pre><code>Profile()._populate_profile_dict = \nProfile.counter(Profile._populate_profile_dict)\n</code></pre>\n\n<p>But it has multiple other problems:</p>\n\n<ul>\n<li>Trying to split an assignment onto two lines like this is a <code>SyntaxError</code>.</li>\n<li><code>Profile.counter(Profile._populate_profile_dict)</code> returns a new function, which you don't call, so it's just assigning the function itself as the value.</li>\n<li>When you <em>do</em> call it, it's expecting to have two arguments, a <code>self</code> and a <code>count</code>, but you're only passing the <code>count</code>. And here, it's not clear where you want to get a <code>self</code> from. Maybe you wanted to call it on an instance of <code>Profile</code>, so you get a <code>self</code> and can pass it through?</li>\n<li>You're assigning the value to an instance attribute of a <code>Profile</code> instance that you just created and are just going to throw away, which has no visible effect.</li>\n<li>That instance attribute has the same name as the method you want to call--which is legal, and doesn't cause any particular problems here, but it's pretty confusing.</li>\n</ul>\n\n<p>The closest reasonable thing I can see to what you're trying to do is to make <code>counter</code> return something callable as a method, as above:</p>\n\n<pre><code>@classmethod\ndef counter(cls, func):\n    def wrapper(self):\n        wrapper.counter += 1\n        return func(self, wrapper.counter)\n\n    wrapper.counter = 0\n    return wrapper\n</code></pre>\n\n<p>\u2026 then monkeypatch <code>Profile</code> with the result, and then call the method on a <code>Profile</code> instance, like this:</p>\n\n<pre><code>if __name__ == \"__main__\":\n    Profile._populate_profile_dict = Profile.counter(Profile._populate_profile_dict)\n    Profile()._populate_profile_dict()\n</code></pre>\n\n<p>And now it works, but I'm not sure if it's what you wanted.</p>\n"}], "owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 51976897, "answer_count": 2, "score": 1, "last_activity_date": 1534985569, "creation_date": 1534982221, "last_edit_date": 1534983209, "question_id": 51976665, "link": "https://stackoverflow.com/questions/51976665/how-can-i-make-these-counter-decorator-work-for-my-in-class-method", "title": "how can I make these counter decorator work for my in class method", "body": "<p>I am new to decorators and believe I understand their purpose/the general gist of them for the most part. Unfortunately, I am having some issues with this decorator and its usage in a class. I am trying to populate a dictionary <code>_profile_dict = {}</code> with a new key created by <code>profile + str(&lt;counter value&gt;)</code>. I'd rather not instantiate the class and set it to a variable in my <code>if __name__ == '__main'</code> statement so I am trying to execute the class with the <code>create_profiles</code> function. Here is my code, </p>\n\n<pre><code>_profile_dict = {}\n\n\nclass Profile:\n    def __init__(self):\n        self.first_name = input('first name: ')\n        self.last_name = input('last name: ')\n        self.email = input('email: ')\n        self.address1 = input('primary address: ')\n        self.address2 = input('secondary address: ')\n        self.city = input('city: ')\n        self.country = input('country: ')\n        self.province = input('province: ')\n        self.zip = input('zip: ')\n        self.phone = input('phone number:')\n        self.cc_name = input('Name on credit card: ')\n        self.cc_num = input('Credit card number: ')\n        self.exp_month = input('card expiration month: ')\n        self.exp_year = input('card expiration year: ')\n        self.cvv = input('cvv: ')\n\n        self.json_obj = {\"utf8\": \"\u2713\",\n                          \"_method\": \"\",\n                          \"authenticity_token\": \"\",\n                          \"previous_step\": \"\",\n                          \"checkout[email]\": self.email,\n                          \"checkout[buyer_accepts_marketing]\": 1,\n                          \"checkout[shipping_address][first_name]\": self.first_name,\n                          \"checkout[shipping_address][last_name]\": self.last_name,\n                          \"checkout[shipping_address][address1]\": self.address1,\n                          \"checkout[shipping_address][address2]\": self.address2,\n                          \"checkout[shipping_address][city]\": self.city,\n                          \"checkout[shipping_address][country]\": self.country,\n                          \"checkout[shipping_address][province]\": self.province,\n                          \"checkout[shipping_address][zip]\": self.zip,\n                          \"checkout[shipping_address][phone]\": self.phone,\n                          \"step\": \"\"}\n\n    def counter(self, func):\n        def wrapper():\n            wrapper.counter += 1\n            return func(wrapper.counter)\n\n        wrapper.counter = 0\n        return wrapper\n\n    @counter\n    def _populate_profile_dict(self, count):\n        profile = 'profile'\n        _profile_dict[profile + str(count)] = self.json_obj\n        print(_profile_dict)\n\n\ndef create_profiles():\n    Profile()._populate_profile_dict()\n\nif __name__ == \"__main__\":\n    create_profiles()\n</code></pre>\n\n<p>At the moment, I am getting the following error, </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Carsten/Profile_Gen/src/config.py\", line 6, in &lt;module&gt;\nclass Profile:\n  File \"C:/Users/Carsten/Profile_gen/src/config.py\", line 49, in Profile\n    @counter\nTypeError: counter() missing 1 required positional argument: 'func'\n</code></pre>\n\n<p>Although from what I just read over here, <a href=\"https://stackoverflow.com/questions/1263451/python-decorators-in-classes\">Python decorators in classes</a> , I'm assuming this is not possible. Is it possible to accomplish what I am trying to acheive with @classmethod at all? </p>\n\n<p>Just by changing the last 3 functions/methods to this, still leads to no output:</p>\n\n<pre><code>@classmethod\ndef counter(cls, func):\n    def wrapper():\n        wrapper.counter += 1\n        return func(wrapper.counter)\n\n    wrapper.counter = 0\n    return wrapper\n\ndef _populate_profile_dict(self, count):\n    profile = 'profile'\n    _profile_dict[profile + str(count)] = self.json_obj\n    print(_profile_dict)\n\n#def create_profiles():\n#    Profile()._populate_profile_dict()\n\n\nif __name__ == \"__main__\":\n    Profile()._populate_profile_dict = \n    Profile.counter(Profile._populate_profile_dict)\n</code></pre>\n\n<p>Any help would be appreciated. Thank you for your time. I feel like decorators as well as a few other things that I have on my agenda will definitely help propel me into more of an intermediate stage of python. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1534981759, "creation_date": 1534981759, "answer_id": 51976610, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python/51976610#51976610", "title": "Change month name to date in python", "body": "<p>Can't you just write a function mapping to each? In fact, a dictionary will do.</p>\n\n<pre><code>def convert_monthname(monthname):\n    table = {\"January\": datetime.datetime(month=1, day=1, year=2018),\n             \"February\": datetime.datetime(month=2, day=1, year=2018),\n             ...}\n\n    return table.get(monthname, monthname)\n\nf['Month'] = f['Month'].apply(convert_monthname)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1570, "user_id": 8305056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVNQC.png?s=128&g=1", "display_name": "girlvsdata", "link": "https://stackoverflow.com/users/8305056/girlvsdata"}, "edited": false, "score": 1, "creation_date": 1534983054, "post_id": 51976651, "comment_id": 90903574, "body": "Upvoting for simplicity, great answer! There&#39;s a good tutorial <a href=\"https://www.guru99.com/calendar-in-python.html\" rel=\"nofollow noreferrer\">here</a> on other things you can do with the calendar module."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 4, "last_activity_date": 1534982082, "creation_date": 1534982082, "answer_id": 51976651, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python/51976651#51976651", "title": "Change month name to date in python", "body": "<p>As an elaboration of the answer by @AdamSmith, a better way to define a mapping between names and dates is to use the <code>calendar</code> module that already has a list of names:</p>\n\n<pre><code>import calendar\ntable = {name: datetime.datetime(month=1, day=val, year=2018) \n          for val, name in enumerate(calendar.month_name) if val&gt;0}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1534982467, "last_edit_date": 1534982467, "creation_date": 1534982121, "answer_id": 51976652, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python/51976652#51976652", "title": "Change month name to date in python", "body": "<p>The whole point of passing a format string like <code>%m/%d/%y</code> to <code>strftime</code> is that you're specifying what format the input strings are going to be in.</p>\n\n<p>You can see <a href=\"https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">the documentation</a>, but it's pretty obvious that a format like <code>%m/%d/%y</code> is not going to handle strings like <code>'October'</code>. You're asking for a (zero-padded) month number, a slash, a (zero-padded) day number, a slash, and a (zero-padded) (two-digit) years.</p>\n\n<p>If you specify a format that actually <em>does</em> match your input, everything works without error:</p>\n\n<pre><code>&gt;&gt;&gt; datetime.datetime.strptime('October', '%B')\ndatetime.datetime(1900, 10, 1, 0, 0)\n</code></pre>\n\n<p>However, that still isn't what you want, because the default year is 1900, not 2018. So, you either need to <a href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime.replace\" rel=\"nofollow noreferrer\"><code>replace</code></a> that, or pull the month out and build a new datetime object.</p>\n\n<pre><code>&gt;&gt;&gt; datetime.datetime.strptime('October', '%B').replace(year=2018)\ndatetime.datetime(2018, 10, 1, 0, 0)\n</code></pre>\n\n<p>Also, notice that all of the strings that <code>strptime</code> knows about are locale-specific. If you've set an English-speaking locale, like <code>en_US.UTF-8</code>, or <code>C</code>, then <code>%B</code> means the English months, so everything is great. But if you've set, say, <code>br_PT.UTF-8</code>, then you're asking it to match the Brazilian Portuguese month names, like <code>Outubro</code> instead of <code>October</code>.<sup>1</sup></p>\n\n<hr>\n\n<p><sub>1. Since I don't actually know Brazilian Portuguese, that was a pretty dumb example for me to pick\u2026 but Google says it's Outubro, and when Google Translate did so ever lead wrong one?</sub></p>\n"}, {"tags": [], "owner": {"reputation": 2369, "user_id": 101855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3f898fa4b7d3b673e753af842c90933?s=128&d=identicon&r=PG", "display_name": "rennat", "link": "https://stackoverflow.com/users/101855/rennat"}, "is_accepted": false, "score": 0, "last_activity_date": 1534982974, "last_edit_date": 1534982974, "creation_date": 1534982666, "answer_id": 51976701, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python/51976701#51976701", "title": "Change month name to date in python", "body": "<p>I'm assuming the data is mostly in the format you have specified (<code>mm/dd/yyyy</code>) but some outlier rows have month names in them.</p>\n\n<p>Without adding any extra dependencies:</p>\n\n<pre><code>DATE_FORMAT = '%m/%d/Y'\nMONTH_NAME_MAP = {\n    \"january\": 1,\n    \"jan\": 1,\n    \"february\": 2,\n    \"feb\": 2,\n    # ...\n}\n\ndef parse_month_value(value):\n    # check if the value is a name of a month\n    month_int = MONTH_NAME_MAP.get(value.lower())\n    if month_int:\n        this_year = datetime.date.today().year\n        return datetime.datetime(month=month_int, day=1, year=this_year)\n\n    # try to parse it normally, failing and raising exception if needed.\n    return datetime.datetime.strptime(value, DATE_FORMAT)\n</code></pre>\n\n<hr>\n\n<p>then </p>\n\n<pre><code>f['Month'] = f['Month'].apply(parse_month_value)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 3430612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f828342aa181f0715f1ef0c8c0d400?s=128&d=identicon&r=PG", "display_name": "eafloresf", "link": "https://stackoverflow.com/users/3430612/eafloresf"}, "is_accepted": false, "score": 0, "last_activity_date": 1589072886, "creation_date": 1589072886, "answer_id": 61705917, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python/61705917#61705917", "title": "Change month name to date in python", "body": "<p>The answer from @DYZ actually did it for me, I added the strftime to create the dict as the date string I wanted</p>\n\n<pre><code>months = {str(name).lower(): datetime.datetime(month=val, day=1, year=2016).strftime('%d/%m/%Y')\n      for val, name in enumerate(calendar.month_abbr) if val&gt;0}\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 9488647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fbea9adcfaca6e753f91574bb66e6b?s=128&d=identicon&r=PG&f=1", "display_name": "HeelMega", "link": "https://stackoverflow.com/users/9488647/heelmega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3761, "favorite_count": 1, "accepted_answer_id": 51976610, "answer_count": 5, "score": 3, "last_activity_date": 1589072886, "creation_date": 1534981501, "last_edit_date": 1534981716, "question_id": 51976580, "link": "https://stackoverflow.com/questions/51976580/change-month-name-to-date-in-python", "title": "Change month name to date in python", "body": "<p>I am trying to change month name to date in python but i m getting an error:</p>\n\n<pre><code>ValueError: time data 'October' does not match format '%m/%d/%Y'\n</code></pre>\n\n<p>My CSV has values such as October in it which I want to change it to 10/01/2018</p>\n\n<pre><code>import pandas as pd\nimport datetime\n\nf = pd.read_excel('test.xlsx', 'Sheet1', index_col=None)\nkeep_col = ['Month']\nnew_f = f[keep_col]\nf['Month'] = f['Month'].apply(lambda v: datetime.datetime.strptime(v, '%m/%d/%Y'))\n    new_f.to_csv(\"output.csv\", index=False)\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1534983301, "post_id": 51976579, "comment_id": 90903618, "body": "Are you using the development server or a production system such as uwsgi? You should generally use a production ready caching system, such as <code>memcached</code> by the way."}, {"owner": {"reputation": 341, "user_id": 5639707, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/98e8fe2415a4f4a8cb57ea605719532a?s=128&d=identicon&r=PG&f=1", "display_name": "demluckycharms", "link": "https://stackoverflow.com/users/5639707/demluckycharms"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1535037387, "post_id": 51976579, "comment_id": 90927733, "body": "@Selcuk Yeah this is on our test server that is deployed with nginx and uwsgi. We are using memcached as well but, at the moment, this system is separate."}, {"owner": {"reputation": 341, "user_id": 5639707, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/98e8fe2415a4f4a8cb57ea605719532a?s=128&d=identicon&r=PG&f=1", "display_name": "demluckycharms", "link": "https://stackoverflow.com/users/5639707/demluckycharms"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1535476243, "post_id": 51976579, "comment_id": 91076669, "body": "@Selcuk I think that&#39;s what it was. Per your recommendation, I moved it over to our memcached instead and it&#39;s working much better. Thanks for the advice!"}], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1535500211, "creation_date": 1535500211, "answer_id": 52067613, "question_id": 51976579, "link": "https://stackoverflow.com/questions/51976579/django-settings-variable-sometimes-getting-reset-and-unsure-why/52067613#52067613", "title": "Django Settings variable *sometimes* getting reset and unsure why", "body": "<p>If you have multiple workers configured for <code>uwsgi</code> they each will have their own Python interpreter (and each worker will have a separate copy of your dictionary). That's why it is recommended to use a single data store for caching purposes.</p>\n\n<p>You can test this by setting the <code>workers</code> (or <code>processors</code>, they are synonyms) setting to <code>1</code> to see if that resolves the issue.</p>\n"}], "owner": {"reputation": 341, "user_id": 5639707, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/98e8fe2415a4f4a8cb57ea605719532a?s=128&d=identicon&r=PG&f=1", "display_name": "demluckycharms", "link": "https://stackoverflow.com/users/5639707/demluckycharms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 52067613, "answer_count": 1, "score": 1, "last_activity_date": 1535500211, "creation_date": 1534981500, "question_id": 51976579, "link": "https://stackoverflow.com/questions/51976579/django-settings-variable-sometimes-getting-reset-and-unsure-why", "title": "Django Settings variable *sometimes* getting reset and unsure why", "body": "<p>I have a dict defined in my Django <code>settings.py</code> to act as a sort of...fake, temporary cache of data for all of my users. However, it has come to my attention that it is not behaving the way I would like and is resetting back to it's default value seemingly at random.</p>\n\n<p><code>settings.py</code></p>\n\n<pre><code># initialize with a fake key:value for ease in logging\nSTORE_DATA = {'hello': 'goodbye'}\n</code></pre>\n\n<p><code>views.py</code></p>\n\n<pre><code>def get_data(name):\n        from apiclient.discovery import build\n\n        search_q = name\n        service = build('youtube', 'v3', developerKey='&lt;key-here&gt;')\n        results = service.search().list(\n            part='snippet', \n            channelId='&lt;channel-here&gt;',\n            type='video',\n            q=search_q,\n        ).execute()\n\n        settings.STORE_DATA[name] = results['items']\n        result = settings.STORE_DATA[name]\n        return result\n\n    page.videos = []\n    if page.name in settings.STORE_DATA:\n        page.videos = settings.STORE_DATA[page.name]\n    else:\n        page.videos = get_data(page.name)\n</code></pre>\n\n<p>This is the only code that references this global variable. It's just simply storing the results of a youtube api call so we don't have to make a query every time someone visits the page.</p>\n\n<p>However - sometimes this works, sometimes it doesn't. Sometimes the key:value pairs stored in the dict get reset back to it's initial state. Here is a little print out from my log - </p>\n\n<pre><code>cache before the call - [u'hello']\n\"page1\" - 2018-08-22 23:23:47\ncache after the call - [u'page1', u'hello']\n\ncache before the call - [u'hello']\n\"page1\" - 2018-08-22 23:24:13\ncache after the call - [u'page1', u'hello']\n\ncache before the call - [u'page1', u'hello']\npage1 - found in cache!\ncache after the call - [u'page1', u'hello']\n\ncache before the call - [u'page1', u'hello']\npage1 - found in cache!\ncache after the call - [u'page1', u'hello']\n\ncache before the call - [u'hello']\n\"page1\" - 2018-08-22 23:27:50\ncache after the call - [u'page1', u'hello']\n</code></pre>\n\n<p>You can see the first time, it properly does not have the data in the cache, so it stores it. Good. The second time...wait. The data isn't there. Stores it again. Third time and fourth time - it's there! Nice! Fifth time - wtf. Gone again.</p>\n\n<p>This is super weird and doesn't make any sense to me. Anyone have an idea of what could be happening?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534982740, "post_id": 51976576, "comment_id": 90903515, "body": "I had answered but it actually depends on your pandas version.. what version are you using ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5327476"}, "edited": false, "score": 0, "creation_date": 1534982825, "post_id": 51976576, "comment_id": 90903533, "body": "pd.__version__ &#39;0.23.3&#39;"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534982864, "post_id": 51976576, "comment_id": 90903538, "body": "@adpatter then I believe my answer holds.."}], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 0, "last_activity_date": 1534982974, "last_edit_date": 1534982974, "creation_date": 1534982639, "answer_id": 51976695, "question_id": 51976576, "link": "https://stackoverflow.com/questions/51976576/subset-a-pandas-dataframe-that-has-an-index-that-contains-duplicates/51976695#51976695", "title": "Subset a pandas dataframe that has an index that contains duplicates", "body": "<p>The thing is you have duplicated values <code>NaN</code>s as indexes. You should disconsider those when reindexing because they are duplicates and there is ambiguity on which value use in the new index.</p>\n\n<pre><code>df.loc[df.index.dropna()].reindex([1, 1, 6])\n\n    value\nkey \n1   one\n1   one\n6   NaN\n</code></pre>\n\n<p>For a generalized solution, use <code>duplicated</code></p>\n\n<pre><code>df.loc[~df.index.duplicated(keep=False)].reindex([1, 1, 6])\n</code></pre>\n\n<p>If you want to keep duplicated indexes and use <code>reindex</code>, you'll fail. This <a href=\"https://stackoverflow.com/questions/30986989/reindex-a-dataframe-with-duplicate-index-values\">has actually been asked before</a> a couple of times</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5327476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 51976695, "answer_count": 1, "score": 1, "last_activity_date": 1534984045, "creation_date": 1534981476, "last_edit_date": 1534984045, "question_id": 51976576, "link": "https://stackoverflow.com/questions/51976576/subset-a-pandas-dataframe-that-has-an-index-that-contains-duplicates", "title": "Subset a pandas dataframe that has an index that contains duplicates", "body": "<p>For the data frame:</p>\n\n<pre><code>df = pd.DataFrame({\n    'key': [1,2,3,4,5, np.nan, np.nan],\n    'value': ['one','two','three', 'four', 'five', 'six', 'seven']\n}).set_index('key')\n</code></pre>\n\n<p>That looks like this:</p>\n\n<pre><code>        value\nkey     \n1.0     one\n2.0     two\n3.0     three\n4.0     four\n5.0     five\nNaN     six\nNaN     seven\n</code></pre>\n\n<p>I would like to subset it to:</p>\n\n<pre><code>    value\nkey     \n1   one\n1   one\n6   NaN\n</code></pre>\n\n<p>This produces a warning:</p>\n\n<pre><code>df.loc[[1,1,6],]\n\nPassing list-likes to .loc or [] with any missing label will raise\nKeyError in the future, you can use .reindex() as an alternative.\n</code></pre>\n\n<p>This produces an error:</p>\n\n<pre><code>df.reindex([1, 1, 6])\n\nValueError: cannot reindex from a duplicate axis\n</code></pre>\n\n<p>How to do it while referencing a missing index and without using apply?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534983025, "post_id": 51976566, "comment_id": 90903567, "body": "If you want to do this in a loop, you need some kind of special code to either (a) insert a <code>+</code> before each element unless it&#39;s the first one, or (b) insert a <code>+</code> after each element unless it&#39;s the last one. Once you recognize that there&#39;s no way around that, it becomes pretty easy to write, if a bit clumsy. (But, of course, there <i>is</i> a way around that once you realize you don&#39;t need to write a loop in the first place, and can just use <code>join</code>, as in chrisaycock&#39;s answer.)"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534984987, "post_id": 51976607, "comment_id": 90903940, "body": "I am confused on the &#39;In [11].... In [12]&#39;. Where did you get those numbers? Or were you just giving an example? Are you allocating this bit of code to &#39;def printList&#39; ?"}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534985867, "post_id": 51976607, "comment_id": 90904079, "body": "@Bunny The <code>In</code> stuff is IPython&#39;s prompt; it&#39;s equivalent to <code>&gt;&gt;&gt;</code> in the regular Python REPL. I set <code>myList</code> as an example in the first line so we could look at the output in the second line. And yes, you can put that new <code>print</code> statement in your function definition."}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534986256, "post_id": 51976607, "comment_id": 90904179, "body": "So would the <code>myList[1, 2, 3]</code> actually be empty... <code>myList[]</code>, since the user will need to input and it would be unlimited, I can&#39;t guess how many numbers they will be entering."}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534991467, "post_id": 51976607, "comment_id": 90905127, "body": "@Bunny Your list would start off is empty, correct. Again, I just pre-set the list as an example."}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534997175, "post_id": 51976607, "comment_id": 90906136, "body": "I updated my OP, however, when I run it, it is printing the output three times. I&#39;m not sure why? And thank you for all your help!"}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534997229, "post_id": 51976607, "comment_id": 90906148, "body": "@Bunny Don&#39;t use a loop. Just have the two print statements in your function."}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535002497, "post_id": 51976607, "comment_id": 90907518, "body": "Gotcha! So, where would I implement the error message if user enters something other than a number? Under <code>def fillList</code> ? Would I still use the <code>while number != 0</code> ?"}], "tags": [], "owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "is_accepted": false, "score": 2, "last_activity_date": 1534983014, "last_edit_date": 1534983014, "creation_date": 1534981741, "answer_id": 51976607, "question_id": 51976566, "link": "https://stackoverflow.com/questions/51976566/how-can-i-add-an-unlimited-set-of-integers-in-python-given-by-the-user/51976607#51976607", "title": "How can I add an unlimited set of integers in Python given by the user?", "body": "<p>Instead of printing in a loop like you've done, just <code>join</code> the inputs (and be sure to convert to <code>str</code> first).</p>\n\n<pre><code>In [11]: myList = [1, 2, 3]\n\nIn [12]: print(' + '.join(map(str, myList)))\n1 + 2 + 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1534984765, "post_id": 51976684, "comment_id": 90903884, "body": "Where would I then include the prompt: Please enter a number: ?"}, {"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535002641, "post_id": 51976684, "comment_id": 90907575, "body": "Inside the input()"}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535068103, "post_id": 51976684, "comment_id": 90940800, "body": "When I run the code and test it by using a letter, I am getting an error message (not invalid input), but from Python itself. <code>line 12, in &lt;module&gt;     raise Exception(&#39;Invalid Input&#39;) Exception: Invalid Input</code>"}, {"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535121299, "post_id": 51976684, "comment_id": 90963402, "body": "That&#39;s because you cannot add alphabets. In your question, you said integers not alphabets"}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535126865, "post_id": 51976684, "comment_id": 90966712, "body": "I wanted to include an error message if the user inputs anything other than a number"}, {"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535131195, "post_id": 51976684, "comment_id": 90968815, "body": "Use <code>ValueError(&#39;Invalid Input&#39;)</code> instead of the exception"}, {"owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535140204, "post_id": 51976684, "comment_id": 90972633, "body": "Still having issues when I run it- when I test it by entering a letter it doesn&#39;t give the invalid input message. <code>number = input(&quot;Please enter a number: &quot;) myList = []      while(True):     if number.isdigit():         number = int(number)         if number == 0:             break         myList.append(number)         number = input(&quot;Please enter a number: &quot;)     else:         ValueError(&quot;Invalid Input&quot;)  print(&#39; + &#39;.join(map(str, myList)), end = &#39; = &#39;) print(sum(myList))</code>"}, {"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "reply_to_user": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "edited": false, "score": 0, "creation_date": 1535140375, "post_id": 51976684, "comment_id": 90972706, "body": "It gives the message along with expection. If you don&#39;t want the exception, then better replace the <code>ValueError</code> or <code>Exception</code> with a print statement followed by an exit statement."}], "tags": [], "owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "is_accepted": true, "score": 0, "last_activity_date": 1534982547, "creation_date": 1534982547, "answer_id": 51976684, "question_id": 51976566, "link": "https://stackoverflow.com/questions/51976566/how-can-i-add-an-unlimited-set-of-integers-in-python-given-by-the-user/51976684#51976684", "title": "How can I add an unlimited set of integers in Python given by the user?", "body": "<p>More easier to do. </p>\n\n<pre><code>temp = input()\nmy_list = []\n\nwhile(True):\n        if temp.isdigit():\n                temp = int(temp)\n                if temp == 0:\n                        break\n                my_list.append(temp)\n                temp = input()\n        else:\n                raise Exception('Invalid Input')\n\nprint(' + '.join(map(str,my_list)),end = ' = ')\nprint(sum(my_list))\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10148452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52122a1e5eff42a47934f0cd8de967c?s=128&d=identicon&r=PG&f=1", "display_name": "Bunny", "link": "https://stackoverflow.com/users/10148452/bunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 51976684, "answer_count": 2, "score": 0, "last_activity_date": 1535049560, "creation_date": 1534981387, "last_edit_date": 1535049560, "question_id": 51976566, "link": "https://stackoverflow.com/questions/51976566/how-can-i-add-an-unlimited-set-of-integers-in-python-given-by-the-user", "title": "How can I add an unlimited set of integers in Python given by the user?", "body": "<p>The problem I am working on should:</p>\n\n<ul>\n<li><p>read a set of integers (from user) and store them in list</p></li>\n<li><p>compute the sum of all the numbers in said list and output it to the user</p></li>\n<li><p>use lists and functions</p></li>\n<li><p>gives an error message and exits if user enters anything but a number</p></li>\n<li><p>user enters 0 to quit</p></li>\n</ul>\n\n<p>Sample output:</p>\n\n<pre><code>Please enter a number: 1\n\nPlease enter a number: 5\n\nPlease enter a number: 6\n\nPlease enter a number: 7\n\nPlease enter a number: 8\n\nPlease enter a number: 0\n\n1 + 5 + 6 + 7 + 8 = 27\n</code></pre>\n\n<p>My current code, which isn't complete yet:</p>\n\n<pre><code>def createList():\n    myList = []\n    return myList\n\ndef fillList(myList):    \n    number = int(input(\"Please enter a number: \"))\n\n    while number != 0:\n        myList.append(number)\n        number = int(input(\"Please enter a number: \"))\n\ndef printList(myList):\n    for number in myList:\n        print(number, \"+\")\n\ndef main():\n    myList = createList()\n    fillList(myList)\n    printList(myList)\n\nmain()\n</code></pre>\n\n<p>In addition, I don't understand how to have the numbers, that the user inputs, show up with a '+' in between each one and an equal sign at the end.</p>\n\n<p><strong>Updated code... I still need to figure out a way to include an error message if user types anything other than an integer. Also, user presses 0 to quit:</strong></p>\n\n<pre><code>def createList():\n   myList = []\n   return myList\n\ndef fillList(myList):    \n    number = int(input(\"Please enter a number: \"))\n\n    while number != 0:\n        myList.append(number)\n        number = int(input(\"Please enter a number: \"))\n\ndef printList(myList):\n        print(' + '.join(map(str, myList)), end = ' = ')\n        print(sum(myList))\n\ndef main():\n    myList = createList()\n    fillList(myList)\n    printList(myList)\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-forms"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "is_accepted": true, "score": 1, "last_activity_date": 1534982347, "last_edit_date": 1534982347, "creation_date": 1534982007, "answer_id": 51976641, "question_id": 51976534, "link": "https://stackoverflow.com/questions/51976534/django-forms-assign-custom-attributes-to-forms-in-forms-py/51976641#51976641", "title": "Django - Forms - assign custom attributes to forms in forms.py", "body": "<p>To pass in attributes on the backend you can try something likes this:</p>\n\n<pre><code>email = forms.EmailField(widget=forms.EmailInput(attrs={'class': \"form_control form-control-lg\", 'placeholder': \"Email\"}), required=True, )\n</code></pre>\n\n<p>So, for your specific case:</p>\n\n<p><code>models.py</code>:</p>\n\n<pre><code>class BHA_Component(models.Model):\n    field_1 = models.CharField(max_length=100, widget=forms.TextInput(attrs={'custom_attribute': \"option_1\") })\n    field_2 = models.CharField(max_length=100, widget=forms.TextInput(attrs={'custom_attribute': \"option_2\") })\n    field_3 = models.CharField(max_length=100, widget=forms.TextInput() })\n</code></pre>\n\n<p>It should be a case of using something like this in your template:</p>\n\n<pre><code>{% for field in bha_component_form %}\n  {% if field.widget.attrs.custom_attribute == 'option_1' %}\n    {{ field|add_class:\"has_checkbox\"}}\n  {% else if field.widget.attrs.custom_attribute == 'option_2' %}\n    {{ field|add_class:\"blue_background\"}}\n  {% else %}\n    {{ field|add_class:\"plain\"}}\n  {% endif %}\n{% endfor %}\n</code></pre>\n\n<p>It should just be a case of modifying what I have outlined above for your specific use case. </p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 51976641, "answer_count": 1, "score": 0, "last_activity_date": 1534982347, "creation_date": 1534981187, "question_id": 51976534, "link": "https://stackoverflow.com/questions/51976534/django-forms-assign-custom-attributes-to-forms-in-forms-py", "title": "Django - Forms - assign custom attributes to forms in forms.py", "body": "<p>The question title might be a little misleading, but I couldn't think of a better title. If you've got better title, please edit the title.</p>\n\n<p>I have following set of <code>models.py</code> and forms.py`</p>\n\n<pre><code># models.py\nclass BHA_Component(models.Model):\n    field_1 = models.CharField(max_length=100)\n    field_2 = models.CharField(max_length=100)\n    field_3 = models.CharField(max_length=100)\n\n# forms.py\nclass BHA_Component_Form(forms.ModelForm):\n    class Meta():\n        fields = '__all__'\n</code></pre>\n\n<p>I want to create custom attributes for each field, so that I can identify what kind of field it is on the Front-End, and assign a class for each field type. </p>\n\n<p>Something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RmS0Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RmS0Y.png\" alt=\"enter image description here\"></a></p>\n\n<p>Some fields are just plain blank, some are grey, some are purple, and some have check boxes. These are done by manually giving each field a particular HTML class on the Front-End. However, I want to give each field some attributes on the Back-End, and have those attributes identified on the Front-End. So, something like this:</p>\n\n<pre><code>{% for field in bha_component_form %}\n\n  {% if field.custom_attribute == 'option_1' %}\n    {{ field|add_class:\"has_checkbox\"}}\n  {% else if field.custom_attribute == 'option_2' %}\n    {{ field|add_class:\"blue_background\"}}\n  {% else %}\n    {{ field|add_class:\"plain\"}}\n  {% endif %}\n\n{% endfor %}\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "regex", "python-os"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1534985054, "post_id": 51976517, "comment_id": 90903954, "body": "You aren&#39;t expecting <code>os.rename()</code> to modify the <code>filename</code> variable, correct?  If you are, that would be a problem."}, {"owner": {"reputation": 21, "user_id": 10262082, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214085679749000/picture?type=large", "display_name": "Kiely Shutt", "link": "https://stackoverflow.com/users/10262082/kiely-shutt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1534986243, "post_id": 51976517, "comment_id": 90904174, "body": "no, i do not want to modify the filename variable."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1534987192, "post_id": 51976517, "comment_id": 90904334, "body": "Ok, I didn&#39;t think so, but <code>print the filename</code> in the question and <code>print(filename)</code> in the code had me worried.  Based on your code...it tentatively looks like you want: find <code>(.*)30(.*Day.*)</code> replace with <code>ref$1$2</code> (where $1 and $2 are the contents of parentheses in find.  <a href=\"https://regex101.com/r/0vJduG/1/\" rel=\"nofollow noreferrer\">regex101.com/r/0vJduG/1</a>  I&#39;d give you an actual answer, but my python is crap, and i&#39;m not 100% clear on your requirements."}, {"owner": {"reputation": 21, "user_id": 10262082, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214085679749000/picture?type=large", "display_name": "Kiely Shutt", "link": "https://stackoverflow.com/users/10262082/kiely-shutt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1534987764, "post_id": 51976517, "comment_id": 90904439, "body": "Thanks for your response, I just got it working by adding {2} to &#39;\\d&#39; which meant it looked for 2 consecutive numbers, and replaced those, but kept the 1 in 1Day."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10262082, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214085679749000/picture?type=large", "display_name": "Kiely Shutt", "link": "https://stackoverflow.com/users/10262082/kiely-shutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1534987840, "creation_date": 1534987840, "answer_id": 51977180, "question_id": 51976517, "link": "https://stackoverflow.com/questions/51976517/python-renaming-files-twice-with-os/51977180#51977180", "title": "Python - renaming files twice with os", "body": "<p>I solved this myself:</p>\n\n<pre><code>                os.rename(os.path.join(root, filename),\n                      os.path.join(newfolder, \"ref\" + re.sub(r'\\d{2}', '', name) + ext))\n</code></pre>\n\n<p>Adding the {2} made it look for 2 consecutive numbers, and left the 1 alone.</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 21, "user_id": 10262082, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214085679749000/picture?type=large", "display_name": "Kiely Shutt", "link": "https://stackoverflow.com/users/10262082/kiely-shutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534987840, "creation_date": 1534980998, "question_id": 51976517, "link": "https://stackoverflow.com/questions/51976517/python-renaming-files-twice-with-os", "title": "Python - renaming files twice with os", "body": "<p>I am currently working on a script to take raw text files, place them in correct year folders based on a version number system, and rename them so that our devs can integrate them into our product easily.</p>\n\n<p>The file in question is called APR30CaseRVU-1Day.txt. \nI need this to be in the form refAPRCaseRVU-1Day.txt. </p>\n\n<p>Append ref, remove 30, keep 1Day.</p>\n\n<p>The script works fine for the other files that do not have this extra \"1Day\". I'm a beginner so I'm sure my workflow is shit but my idea was to use os.rename twice. Once to remove the characters, and then split on the hyphen to add the \"1\" back in to the filename, but when I print the filename after the first os.rename it still has 30 and 1.</p>\n\n<p>Anyone have any tips to do this more effectively?</p>\n\n<pre><code>folder = r\"C:\\Users\\xx\\Desktop\\Python Final Project\\Raw\"\n\nimport os\nimport re\nimport shutil\nfor root, dirs, filenames in os.walk(folder):\nfor filename in filenames:\n    srcpath = os.path.join(root, filename)\n    #split the filename so that we can rename accordingly below, filename_split[0] = filename, filename_split[1] = file ext\n    filename_split = os.path.splitext(filename)\n    name = filename_split[0]\n    ext = filename_split[1]\n    newfolder = ''\n    destpath = os.path.join(newfolder, \"ref\" + re.sub(r'\\d', '', filename_split[0]) + filename_split[1])\n    #first step: remove AP files entirely from directory\n    if filename.startswith(\"AP27\"):\n        os.remove(os.path.join(folder, filename))\n    #the rest include a version number that must be routed to the correct year folder directory created above\n    elif filename.__contains__(\"30\") and filename.__contains__(\"Day\"):\n        newfolder = r\"C:\\Users\\xx\\Desktop\\Python Final Project\\Raw\\2013\"\n        os.rename(os.path.join(root, filename),\n                  os.path.join(newfolder, \"ref\" + re.sub(r'\\d', '', filename_split[0]) + filename_split[1]))\n        print(filename)\n        day_name = re.split(r'[\\s-]+', filename)\n        print(day_name)\n        first_name = day_name[0]\n        last_name = day_name[1]\n        os.rename(os.path.join(newfolder, filename),\n                      os.path.join(newfolder, \"ref\" + first_name + '1' + last_name))    \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 525, "user_id": 2457853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2udWj.jpg?s=128&g=1", "display_name": "Sacry", "link": "https://stackoverflow.com/users/2457853/sacry"}, "edited": false, "score": 0, "creation_date": 1534985936, "post_id": 51976516, "comment_id": 90904101, "body": "AFAIK, <code>inverse_transform</code> just won&#39;t give you the original X. You can&#39;t get full information from projected data. check <a href=\"https://stats.stackexchange.com/questions/229092/how-to-reverse-pca-and-reconstruct-original-variables-from-several-principal-com\" title=\"how to reverse pca and reconstruct original variables from several principal com\">stats.stackexchange.com/questions/229092/&hellip;</a>"}], "owner": {"reputation": 2791, "user_id": 1960266, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/5iP9l.jpg?s=128&g=1", "display_name": "Little", "link": "https://stackoverflow.com/users/1960266/little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534986059, "creation_date": 1534980995, "last_edit_date": 1534986059, "question_id": 51976516, "link": "https://stackoverflow.com/questions/51976516/eigenfaces-in-scikit-do-not-correspond-to-training-images", "title": "eigenfaces in scikit do not correspond to training images", "body": "<p>I have code a small program of feature reduction by using PCA based on some online code, my source code is the following:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.datasets import fetch_lfw_people\nfrom sklearn.decomposition import PCA\n\ndef main():\n    lfw_dataset = fetch_lfw_people(min_faces_per_person=100)\n    n_samples, h, w = lfw_dataset.images.shape\n    X = lfw_dataset.data\n    y = lfw_dataset.target\n    target_names = lfw_dataset.target_names\n    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)\n    n_components = 100\n    pca = PCA(n_components=n_components, whiten=True).fit(X_train)\n    X_train_pca = pca.transform(X_train)\n    plot(X_train,h,w)\n    eigenfaces = pca.components_\n    X_train_recover = pca.inverse_transform(X_train_pca)\n    plot(eigenfaces,h,w)\n    plot(X_train_recover,h,w)\n\ndef plot(images,h,w):\n    n_row=2\n    n_col=5\n    plt.figure(figsize=(1.5 * n_col, 2.2 * n_row))\n    plt.subplots_adjust(0.6, 0.5, 1.5, 1.5)\n    for i in range(n_row * n_col):\n        plt.subplot(n_row, n_col, i + 1)\n        plt.imshow(images[i].reshape((h, w)), cmap=plt.cm.gray)\n    plt.tight_layout()\n    plt.show()\n\nif __name__==\"__main__\":\n    main()\n</code></pre>\n\n<p>The question that I have is when I execute the following lines of code:</p>\n\n<pre><code>eigenfaces = pca.components_\nX_train_recover = pca.inverse_transform(X_train_pca)\nplot(eigenfaces,h,w)\n</code></pre>\n\n<p>why the images that are plotted, eigenfaces, do not correspond to the set of images for training or the ones that I plot after the inverse_transform? I can see that the original training images and the ones from the inverse transform are the \"same\", if we consider that we had applied PCA.</p>\n\n<p>For what I know pca.components_ will give me an array of n_components x  n_features, but I do not see the relationship with the original or the transformed images showed.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework", "patch"], "comments": [{"owner": {"reputation": 6461, "user_id": 6786283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0STiP.jpg?s=128&g=1", "display_name": "Ykh", "link": "https://stackoverflow.com/users/6786283/ykh"}, "edited": false, "score": 0, "creation_date": 1534986825, "post_id": 51976479, "comment_id": 90904270, "body": "please post all error log"}, {"owner": {"reputation": 63, "user_id": 9379649, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oud__UXiKyQ/AAAAAAAAAAI/AAAAAAAAAAc/zzFyo5xxccs/photo.jpg?sz=128", "display_name": "Miho", "link": "https://stackoverflow.com/users/9379649/miho"}, "reply_to_user": {"reputation": 6461, "user_id": 6786283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0STiP.jpg?s=128&g=1", "display_name": "Ykh", "link": "https://stackoverflow.com/users/6786283/ykh"}, "edited": false, "score": 0, "creation_date": 1534989855, "post_id": 51976479, "comment_id": 90904843, "body": "@Ykh I just edited this thread and added error message! Now I found out that the save method in Work model causes this error. But I don&#39;t know how to fix it..."}], "answers": [{"tags": [], "owner": {"reputation": 6461, "user_id": 6786283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0STiP.jpg?s=128&g=1", "display_name": "Ykh", "link": "https://stackoverflow.com/users/6786283/ykh"}, "is_accepted": true, "score": 0, "last_activity_date": 1534991167, "creation_date": 1534991167, "answer_id": 51977548, "question_id": 51976479, "link": "https://stackoverflow.com/questions/51976479/how-to-make-patch-method-work-for-partial-update-in-django-app-without-imagefie/51977548#51977548", "title": "How to make PATCH method work for partial update in Django app? Without ImageField update, it doesn&#39;t work", "body": "<pre><code>class Work(models.Model):\n    owner       = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, null=True, blank=True)\n    title       = models.CharField(max_length=120)\n    made_date   = models.DateField(default=datetime.date.today, null=True, blank=True)\n    note        = models.TextField(max_length=2000, null=True, blank=True)\n    image       = models.ImageField(upload_to='work_pic', default='default_image.png')\n\n    def __str__(self):\n        return self.title\n\n    def save(self, *args, **kwargs):\n\n        if not self.id:\n            # add\n            self.set_image()\n        else:\n            # change\n            this = Work.objects.get(id=self.id)\n            if this.image != self.image:\n                self.set_image()\n        return super(Work, self).save(*args, **kwargs)\n\n    def set_image(self):\n        if self.image and self.image.name.lower().endswith(('.jpg', '.jpeg')):\n            pilImage = Img.open(BytesIO(self.image.read()))\n            for orientation in ExifTags.TAGS.keys():\n                if ExifTags.TAGS[orientation] == 'Orientation':\n                    break\n            exif = dict(pilImage._getexif().items())\n\n            if exif[orientation] == 3:\n                pilImage = pilImage.rotate(180, expand=True)\n            elif exif[orientation] == 6:\n                pilImage = pilImage.rotate(270, expand=True)\n            elif exif[orientation] == 8:\n                pilImage = pilImage.rotate(90, expand=True)\n\n            output = BytesIO()\n            pilImage.save(output, format='JPEG', quality=75)\n            output.seek(0)\n            self.image = File(output, self.image.name)\n</code></pre>\n\n<p>have a try</p>\n"}], "owner": {"reputation": 63, "user_id": 9379649, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oud__UXiKyQ/AAAAAAAAAAI/AAAAAAAAAAc/zzFyo5xxccs/photo.jpg?sz=128", "display_name": "Miho", "link": "https://stackoverflow.com/users/9379649/miho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 51977548, "answer_count": 1, "score": 0, "last_activity_date": 1534991167, "creation_date": 1534980567, "last_edit_date": 1534989665, "question_id": 51976479, "link": "https://stackoverflow.com/questions/51976479/how-to-make-patch-method-work-for-partial-update-in-django-app-without-imagefie", "title": "How to make PATCH method work for partial update in Django app? Without ImageField update, it doesn&#39;t work", "body": "<p>I'm trying to enable partial update in Django web app (using Django Rest Framework).</p>\n\n<p>The model I want to update includes ImageField.<br>\nPATCH method works when I update the ImageField, but it doesn't work when I don't update the ImageField.<br>\nError message says<br>\n<code>AttributeError:'NoneType' object has no attribute 'items'</code></p>\n\n<p>How can I fix it?</p>\n\n<p>Model:</p>\n\n<pre><code>class Work(models.Model):\n    owner       = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, null=True, blank=True)\n    title       = models.CharField(max_length=120)\n    made_date   = models.DateField(default=datetime.date.today, null=True, blank=True)\n    note        = models.TextField(max_length=2000, null=True, blank=True)\n    image       = models.ImageField(upload_to='work_pic', default='default_image.png')\n\n    def __str__(self):\n        return self.title\n\n    def save(self, *args, **kwargs):\n        if self.image and self.image.name.lower().endswith(('.jpg', '.jpeg')):\n            pilImage = Img.open(BytesIO(self.image.read()))\n            for orientation in ExifTags.TAGS.keys():\n                if ExifTags.TAGS[orientation] == 'Orientation':\n                    break\n            exif = dict(pilImage._getexif().items())\n\n            if exif[orientation] == 3:\n                pilImage = pilImage.rotate(180, expand=True)\n            elif exif[orientation] == 6:\n                pilImage = pilImage.rotate(270, expand=True)\n            elif exif[orientation] == 8:\n                pilImage = pilImage.rotate(90, expand=True)\n\n            output = BytesIO()\n            pilImage.save(output, format='JPEG', quality=75)\n            output.seek(0)\n            self.image = File(output, self.image.name)\n\n        return super(Work, self).save(*args, **kwargs)\n</code></pre>\n\n<p>Serializer:</p>\n\n<pre><code>class WorkSerializer(serializers.ModelSerializer):\n    owner = serializers.HiddenField(default=serializers.CurrentUserDefault())\n\n    class Meta:\n        model = Work\n        fields = '__all__'\n\n    def create(self, validated_data):\n        return Work.objects.create(**validated_data)\n</code></pre>\n\n<p>ViewSet:</p>\n\n<pre><code>class WorkViewSet(viewsets.ModelViewSet):\n    queryset = Work.objects.all()\n    serializer_class = WorkSerializer\n\n    def partial_update(self, request, *args, **kwargs):\n        kwargs['partial'] = True\n        return self.update(request, *args, **kwargs)\n</code></pre>\n\n<p>Method to send request (Vue.js):</p>\n\n<pre><code>updateWork: function() {\n    let formData  = new FormData();\n\n    //Initial value of currentWork.image is text (path to the original image in the media folder). \n    //When user upload new image, the file is set to currentWork.image. So condition is match to the if statement bellow.\n    if (this.currentWork.image instanceof File) {\n        formData.append(\"image\", this.currentWork.image);\n    }\n\n    formData.append(\"title\", this.currentWork.title);\n    formData.append(\"made_date\", this.currentWork.made_date);\n    formData.append(\"note\", this.currentWork.note);\n    this.loading = true;\n    axios.patch(`/api/work/${this.currentWork.id}/`, formData, {\n        headers: {\n            'Content-Type': 'multipart/form-data'\n        }\n    })\n        .then((response) =&gt; {\n            this.loading = false;\n        })\n        .catch((err) =&gt; {\n            this.loading = false;\n            console.log(err);\n        })\n</code></pre>\n\n<p>Error message:  </p>\n\n<pre><code>Internal Server Error: /api/work/61/    \nTraceback (most recent call last):  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/django/core/handlers/exception.py\", line 35, in inner  \n    response = get_response(request)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/django/core/handlers/base.py\", line 128, in _get_response    \n    response = self.process_exception_by_middleware(e, request)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/django/core/handlers/base.py\", line 126, in _get_response  \n    response = wrapped_callback(request, *callback_args, **callback_kwargs)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view  \n    return view_func(*args, **kwargs)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/viewsets.py\", line 103, in view  \n    return self.dispatch(request, *args, **kwargs)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/views.py\", line 483, in dispatch  \n    response = self.handle_exception(exc)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/views.py\", line 443, in handle_exception  \n    self.raise_uncaught_exception(exc)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/views.py\", line 480, in dispatch  \n    response = handler(request, *args, **kwargs)  \n  File \"/Users/rami/Dev/MySweetsBase/works/viewsets.py\", line 13, in partial_update  \n    return self.update(request, *args, **kwargs)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/mixins.py\", line 70, in update  \n    self.perform_update(serializer)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/mixins.py\", line 80, in perform_update  \n    serializer.save()  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/serializers.py\", line 209, in save  \n    self.instance = self.update(self.instance, validated_data)  \n  File \"/Users/rami/Dev/MySweetsBase/myvenv/lib/python3.6/site-packages/rest_framework/serializers.py\", line 981, in update  \n    instance.save()  \n  File \"/Users/rami/Dev/MySweetsBase/works/models.py\", line 26, in save   \n    exif = dict(pilImage._getexif().items())  \nAttributeError: 'NoneType' object has no attribute 'items'  \n</code></pre>\n"}, {"tags": ["python", "sigmoid"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534981047, "post_id": 51976461, "comment_id": 90903228, "body": "It used to be as simple as <code>scipy.special.expit(x)</code>, but <a href=\"https://github.com/scipy/scipy/commit/30e181c1179177bd4e40c240ca70ce3b82dac873\" rel=\"nofollow noreferrer\">someone changed it</a> back in 2016."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534981451, "post_id": 51976461, "comment_id": 90903296, "body": "I&#39;m not sure how important it is, though - I can find a few cases where the supposedly more stable version is about 1 ULP more accurate, but I can&#39;t find a solid analysis proving it&#39;s better, and <a href=\"http://fa.bianp.net/blog/2013/numerical-optimizers-for-logistic-regression/\" rel=\"nofollow noreferrer\">the closest thing to a source</a> I&#39;ve found analyzes the behavior of overflow wrong, coming to the incorrect conclusion that the straightforward 1/(1+exp(-x)) implementation will return infinity for x=-100."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534982217, "post_id": 51976461, "comment_id": 90903420, "body": "It seems like the superiority of the &quot;stable&quot; version may be a myth, or at most a tiny precision advantage."}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1604680187, "post_id": 51976461, "comment_id": 114429793, "body": "@user2357112supportsMonica Infinity will be returned for ~<code>-710</code> with naive implementation (<code>numpy</code>, <code>double</code> precision)"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 0, "creation_date": 1534981244, "post_id": 51976485, "comment_id": 90903265, "body": "Thanks for such a quick response. This is a lovely solution. May I ask is it possible to get rid of the element-wise for loop where we need to check the sign of x one at a time?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 1, "creation_date": 1534981323, "post_id": 51976485, "comment_id": 90903274, "body": "I do not follow you. There is no elementwise loop in the proposed solution."}, {"owner": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 0, "creation_date": 1534981508, "post_id": 51976485, "comment_id": 90903305, "body": "Okay, I made a mistake when I passed a python list z to your definition, so an exception was raised. So I though I still need the for loop in the original definition. Passing np.array(z) works. I&#39;ll mark the question as solved. Thanks so much!"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 1, "creation_date": 1534981591, "post_id": 51976485, "comment_id": 90903315, "body": "If you want to pass a list, just convert it to an array before passing (with <code>np.array(mylist)</code>)."}, {"owner": {"reputation": 4500, "user_id": 478525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f06dba5965530157d9b5bb0758e2edd?s=128&d=identicon&r=PG", "display_name": "titus", "link": "https://stackoverflow.com/users/478525/titus"}, "edited": false, "score": 1, "creation_date": 1590567501, "post_id": 51976485, "comment_id": 109724546, "body": "seems like the <code>np.where</code> evaluates both branches and then chooses which one it needs, this results in misleading overflow warnings. something like <code>sigmoid(np.array(-300, np.float32))</code>"}, {"owner": {"reputation": 1838, "user_id": 8776746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53083a92cbf253fb60fdbf5684f7aa4b?s=128&d=identicon&r=PG", "display_name": "ynn", "link": "https://stackoverflow.com/users/8776746/ynn"}, "reply_to_user": {"reputation": 4500, "user_id": 478525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f06dba5965530157d9b5bb0758e2edd?s=128&d=identicon&r=PG", "display_name": "titus", "link": "https://stackoverflow.com/users/478525/titus"}, "edited": false, "score": 0, "creation_date": 1594551319, "post_id": 51976485, "comment_id": 111159876, "body": "@titus You are right. See <a href=\"https://stackoverflow.com/a/62860170/8776746\">my answer</a> for a faster and more natural solution."}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1604678257, "post_id": 51976485, "comment_id": 114428943, "body": "See <a href=\"https://stackoverflow.com/a/64717799/10886420\">this answer</a> for discussion and downsides of this solution (unnecessary double evaluation which gives the runtime error)"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 9, "last_activity_date": 1534981375, "last_edit_date": 1534981375, "creation_date": 1534980615, "answer_id": 51976485, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/51976485#51976485", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p>You are right, you can do better by using <code>np.where</code>, the numpy equivalent of <code>if</code>:</p>\n\n<pre><code>def sigmoid(x):\n    return np.where(x &gt;= 0, \n                    1 / (1 + np.exp(-x)), \n                    np.exp(x) / (1 + np.exp(x)))\n</code></pre>\n\n<p>This function takes a numpy array <code>x</code> and returns a numpy array, too:</p>\n\n<pre><code>data = np.arange(-5,5)\nsigmoid(data)\n#array([0.00669285, 0.01798621, 0.04742587, 0.11920292, 0.26894142,\n#       0.5       , 0.73105858, 0.88079708, 0.95257413, 0.98201379])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1534981690, "post_id": 51976575, "comment_id": 90903332, "body": "There is really no point in using numpy functions and not using numpy vectorization."}, {"owner": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 0, "creation_date": 1534981735, "post_id": 51976575, "comment_id": 90903337, "body": "This is a very nice and clean alternative. Thanks a lot!"}, {"owner": {"reputation": 104, "user_id": 10262090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daec178ed50e44ed2aaf1cde3ca4dbb1?s=128&d=identicon&r=PG&f=1", "display_name": "F.G.", "link": "https://stackoverflow.com/users/10262090/f-g"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1534982192, "post_id": 51976575, "comment_id": 90903416, "body": "@DYZ While I agree that your solution is shorter and more consequent, it is preferred to use list comprehensions instead of for loops. I will edit my answer so that everyone can see that this is an alternative to the code posted in the question, not to your solution."}], "tags": [], "owner": {"reputation": 104, "user_id": 10262090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daec178ed50e44ed2aaf1cde3ca4dbb1?s=128&d=identicon&r=PG&f=1", "display_name": "F.G.", "link": "https://stackoverflow.com/users/10262090/f-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1534982283, "last_edit_date": 1534982283, "creation_date": 1534981475, "answer_id": 51976575, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/51976575#51976575", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p>Another alternative to your code is the following:</p>\n\n<pre><code>def sigmoid(z):\n    return [(1. / (1. + np.exp(-x)) if x &gt;= 0 else (np.exp(x) / (1. + np.exp(x))) for x in z]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11507139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vBgdCeLKsnY/AAAAAAAAAAI/AAAAAAAAAEk/HJ674tP77RU/photo.jpg?sz=128", "display_name": "hao peng", "link": "https://stackoverflow.com/users/11507139/hao-peng"}, "is_accepted": false, "score": 4, "last_activity_date": 1563956982, "creation_date": 1563956982, "answer_id": 57178527, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/57178527#57178527", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<pre><code>def sigmoid(x):\n    \"\"\"\n    A numerically stable version of the logistic sigmoid function.\n    \"\"\"\n    pos_mask = (x &gt;= 0)\n    neg_mask = (x &lt; 0)\n    z = np.zeros_like(x)\n    z[pos_mask] = np.exp(-x[pos_mask])\n    z[neg_mask] = np.exp(x[neg_mask])\n    top = np.ones_like(x)\n    top[neg_mask] = z[neg_mask]\n    return top / (1 + z)\n</code></pre>\n\n<p>This piece of code comes from assignment3 of cs231n, I don't really understand why we should calculate it in this way, but I know this may be the code that you are looking for. Hope to be helpful.</p>\n"}, {"comments": [{"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1604679949, "post_id": 62860170, "comment_id": 114429689, "body": "See <a href=\"https://stackoverflow.com/a/64717799/10886420\">my answer</a> for comparison and why your solution does not work for edge case (<code>np.array</code> is integer)."}], "tags": [], "owner": {"reputation": 1838, "user_id": 8776746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53083a92cbf253fb60fdbf5684f7aa4b?s=128&d=identicon&r=PG", "display_name": "ynn", "link": "https://stackoverflow.com/users/8776746/ynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1594551269, "creation_date": 1594551269, "answer_id": 62860170, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/62860170#62860170", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p><a href=\"https://stackoverflow.com/a/51976485/8776746\">The accepted answer</a> is correct but, as pointed out by <a href=\"https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth#comment109724546_51976485\">this comment</a>, it calculates both branches and is thus problematic.</p>\n<p>Rather, you may want to use <a href=\"https://numpy.org/doc/stable/reference/generated/numpy.piecewise.html#numpy.piecewise\" rel=\"nofollow noreferrer\"><code>np.piecewise()</code></a>. This is much faster, meaningful (<code>np.where</code> is <strong>not</strong> intended to define a piecewise function) and free of misleading warnings caused by entering into both branches.</p>\n<h2>Benchmark</h2>\n<p><strong>Source Code</strong></p>\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport time\n\nN: int = int(1e+4)\n\nnp.random.seed(0)\n\nx: np.ndarray = np.random.random((N, N))\nx *= 1e+3\n\nstart: float = time.time()\ny1 = np.where(x &gt; 0, 1 / (1 + np.exp(-x)), np.exp(x) / (1 + np.exp(x)))\nend: float = time.time()\nprint()\nprint(end - start)\n\nstart: float = time.time()\ny2 = np.piecewise(x, [x &gt; 0], [lambda i: 1 / (1 + np.exp(-i)), lambda i: np.exp(i) / (1 + np.exp(i))])\nend: float = time.time()\nprint(end - start)\n\nassert (np.array_equal(y1, y2))\n</code></pre>\n<p><strong>Result</strong></p>\n<p><code>np.piecewise()</code> is silent and twice faster!</p>\n<pre><code>test.py:12: RuntimeWarning: overflow encountered in exp\n  y1 = np.where(x &gt; 0, 1 / (1 + np.exp(-x)), np.exp(x) / (1 + np.exp(x)))\ntest.py:12: RuntimeWarning: invalid value encountered in true_divide\n  y1 = np.where(x &gt; 0, 1 / (1 + np.exp(-x)), np.exp(x) / (1 + np.exp(x)))\n\n6.32736349105835\n3.138420343399048\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1943850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ac6e6961909dfe22d046ce735d197f?s=128&d=identicon&r=PG", "display_name": "Yiyan Chen", "link": "https://stackoverflow.com/users/1943850/yiyan-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1594909141, "creation_date": 1594909141, "answer_id": 62936810, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/62936810#62936810", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p>I wrote one trick, I guess np.where or torch.where are implemented in the same manner to deal with binary conditions:</p>\n<pre><code>def sigmoid(x, max_v=1.0):    \n    sign = (torch.sign(x) + 3)//3\n    x = torch.abs(x)\n    res = max_v/(1 + torch.exp(-x))\n    res = res * sign + (1 - sign) * (max_v - res)\n    return res\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "is_accepted": false, "score": 2, "last_activity_date": 1612722830, "last_edit_date": 1612722830, "creation_date": 1604678101, "answer_id": 64717799, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth/64717799#64717799", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p>Fully correct answer (no warnings) was provided by <a href=\"https://stackoverflow.com/a/57178527/10886420\">@hao peng</a> but solution wasn't explained clearly. This would be too long for a comment, so I'll go for an answer.</p>\n<p>Let's start with analysis of a few answers (pure <code>numpy</code> answers only):</p>\n<h2><a href=\"https://stackoverflow.com/a/51976485/10886420\">@DYZ accepted answer</a></h2>\n<p>This one is correct mathematically but still gives us a warning. Let's look at the code:</p>\n<pre><code>def sigmoid(x):\n    return np.where(\n            x &gt;= 0, # condition\n            1 / (1 + np.exp(-x)), # For positive values\n            np.exp(x) / (1 + np.exp(x)) # For negative values\n    )\n</code></pre>\n<p>As both branches are evaluated (they are arguments, they have to be), the first branch will give us a warning for negative values and the second for positive.</p>\n<p>Although the warnings will be raised, results from overflows <strong>will not be incorporated</strong>, hence the result is correct.</p>\n<h3>Downsides</h3>\n<ul>\n<li>unnecessary evaluation of both branches (twice as many operations as needed)</li>\n<li>warnings are thrown</li>\n</ul>\n<h2><a href=\"https://stackoverflow.com/a/62860170/10886420\">@ynn answer</a></h2>\n<p>This one is almost correct, <strong>BUT</strong> will work only on floating point values, see below:</p>\n<pre><code>def sigmoid(x):\n    return np.piecewise(\n        x,\n        [x &gt; 0],\n        [lambda i: 1 / (1 + np.exp(-i)), lambda i: np.exp(i) / (1 + np.exp(i))],\n    )\n\n\nsigmoid(np.array([0.0, 1.0]))  # [0.5 0.73105858] correct\nsigmoid(np.array([0, 1]))  # [0, 0] incorrect\n</code></pre>\n<p>Why? Longer answer was provided by <a href=\"https://stackoverflow.com/a/27060141/10886420\">\n@mhawke</a> in another thread, but the main point is:</p>\n<blockquote>\n<p>It seems that piecewise() converts the return values to the same type\nas the input so, when an integer is input an integer conversion is\nperformed on the result, which is then returned.</p>\n</blockquote>\n<h3>Downsides</h3>\n<ul>\n<li>no automatic casting due to strange behavior of piecewise function</li>\n</ul>\n<h2>Improved <a href=\"https://stackoverflow.com/a/57178527/10886420\">@hao peng</a> answer</h2>\n<p>Idea of stable sigmoid comes from the fact that:</p>\n<p><a href=\"https://i.stack.imgur.com/Nz7fK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nz7fK.gif\" alt=\"sigmoid\" /></a></p>\n<p>Both versions are equally efficient in terms of operations if coded correctly (one <code>exp</code> evaluation is enough). Now:</p>\n<ul>\n<li><code>e^x</code> will overflow when <code>x</code> is positive</li>\n<li><code>e^-x</code> will overflow when <code>x</code> is negative</li>\n</ul>\n<p>Hence we have to branch when on <code>x</code> equal to zero. Use <code>numpy</code>'s masking we can transform only the part of array which is positive or negative with specific sigmoid implementations.</p>\n<p>See code comments for additional points:</p>\n<pre><code>def _positive_sigmoid(x):\n    return 1 / (1 + np.exp(-x))\n\n\ndef _negative_sigmoid(x):\n    # Cache exp so you won't have to calculate it twice\n    exp = np.exp(x)\n    return exp / (exp + 1)\n\n\ndef sigmoid(x):\n    positive = x &gt;= 0\n    # Boolean array inversion is faster than another comparison\n    negative = ~positive\n\n    # empty contains junk hence will be faster to allocate\n    # Zeros has to zero-out the array after allocation, no need for that\n    result = np.empty_like(x)\n    result[positive] = _positive_sigmoid(x[positive])\n    result[negative] = _negative_sigmoid(x[negative])\n\n    return result\n</code></pre>\n<h2>Time measurements</h2>\n<p>Results (50 times case test from <code>ynn</code>):</p>\n<pre><code>289.5070939064026 #DYZ\n222.49267292022705 #ynn\n230.81086134910583 #this\n</code></pre>\n<p>Indeed piecewise seems faster (not sure about the reasons, maybe masking and additional masking ops make it slower).</p>\n<p>Code below was used:</p>\n<pre><code>import time\n\nimport numpy as np\n\n\ndef _positive_sigmoid(x):\n    return 1 / (1 + np.exp(-x))\n\n\ndef _negative_sigmoid(x):\n    # Cache exp so you won't have to calculate it twice\n    exp = np.exp(x)\n    return exp / (exp + 1)\n\n\ndef sigmoid(x):\n    positive = x &gt;= 0\n    # Boolean array inversion is faster than another comparison\n    negative = ~positive\n\n    # empty contains juke hence will be faster to allocate than zeros\n    result = np.empty_like(x)\n    result[positive] = _positive_sigmoid(x[positive])\n    result[negative] = _negative_sigmoid(x[negative])\n\n    return result\n\n\nN = int(1e4)\nx = np.random.uniform(size=(N, N))\n\nstart: float = time.time()\nfor _ in range(50):\n    y1 = np.where(x &gt; 0, 1 / (1 + np.exp(-x)), np.exp(x) / (1 + np.exp(x)))\n    y1 += 1\nend: float = time.time()\nprint(end - start)\n\nstart: float = time.time()\nfor _ in range(50):\n    y2 = np.piecewise(\n        x,\n        [x &gt; 0],\n        [lambda i: 1 / (1 + np.exp(-i)), lambda i: np.exp(i) / (1 + np.exp(i))],\n    )\n    y2 += 1\nend: float = time.time()\nprint(end - start)\n\nstart: float = time.time()\nfor _ in range(50):\n    y2 = sigmoid(x)\n    y2 += 1\nend: float = time.time()\nprint(end - start)\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5346, "favorite_count": 1, "accepted_answer_id": 51976485, "answer_count": 6, "score": 9, "last_activity_date": 1612722830, "creation_date": 1534980392, "last_edit_date": 1594587939, "question_id": 51976461, "link": "https://stackoverflow.com/questions/51976461/optimal-way-of-defining-a-numerically-stable-sigmoid-function-for-a-list-in-pyth", "title": "optimal way of defining a numerically stable sigmoid function for a list in python", "body": "<p>For a scalar variable <code>x</code>, we know how to write down a numerically stable sigmoid function in python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def sigmoid(x):\n    if x &gt;= 0:\n        return 1. / ( 1. + np.exp(-x) )\n    else:\n        return exp(x) / ( 1. + np.exp(x) )\n</code></pre>\n<p>For a list of scalars, say <code>z = [x_1, x_2, x_3, ...]</code>, and suppose we don't know the sign of each <code>x_i</code> beforehand, we could generalize the above definition and try:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def sigmoid(z):\n    result = []\n    for x in z:\n        if x &gt;= 0:\n            result.append(1. / ( 1. + np.exp(-x) ) )\n        else:\n            result.append( exp(x) / ( 1. + np.exp(x) ) )\n    return result\n</code></pre>\n<p>This seems to work. However, I feel this is perhaps not the most pythonic way. How should I improve the definition in terms of 'cleanness'? Say, is there a way to use comprehension to shorten the function definition?</p>\n<p>I'm sorry if this has been asked, because I cannot find similar questions on SO. Thank you very much for your time and help!</p>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1534980575, "post_id": 51976453, "comment_id": 90903154, "body": "Have you tried prepending your string with an <code>r</code>? As in, instead of <code>&#39;%WINDIR%\\\\system32\\\\netsh.exe&#39;</code>, using <code>r&#39;%WINDIR%\\\\system32\\\\netsh.exe&#39;</code>?"}, {"owner": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 1, "creation_date": 1534980891, "post_id": 51976453, "comment_id": 90903192, "body": "Exactly how are you using javascript to show this? And how are you using python? Can we get a MCVE?"}, {"owner": {"reputation": 1360, "user_id": 753471, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc180a31ec5feada554c75c61ce5c718?s=128&d=identicon&r=PG", "display_name": "monty", "link": "https://stackoverflow.com/users/753471/monty"}, "edited": false, "score": 0, "creation_date": 1534980999, "post_id": 51976453, "comment_id": 90903214, "body": "Using pure js to show that string doesn&#39;t seem to have an issue: <a href=\"https://jsfiddle.net/6tqd530f/1/\" rel=\"nofollow noreferrer\">jsfiddle.net/6tqd530f/1</a> so how do you &quot;use javascript to show it&quot;?"}, {"owner": {"reputation": 345, "user_id": 746058, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f84ee0124ce53514c28e0058ef07a91d?s=128&d=identicon&r=PG", "display_name": "Likak", "link": "https://stackoverflow.com/users/746058/likak"}, "reply_to_user": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1534981704, "post_id": 51976453, "comment_id": 90903334, "body": "@PMende that&#39;s interesting, but still it can&#39;t get it solved. It seems the issue is in js part."}, {"owner": {"reputation": 345, "user_id": 746058, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f84ee0124ce53514c28e0058ef07a91d?s=128&d=identicon&r=PG", "display_name": "Likak", "link": "https://stackoverflow.com/users/746058/likak"}, "reply_to_user": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1534981837, "post_id": 51976453, "comment_id": 90903357, "body": "@ElliottFrisch Python handles a json object that will be passed to a template. This template uses d3 library in javascript and I need to show some node info using the text I get from python. Excuse me that it&#39;s not MCVE!"}, {"owner": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1534982260, "post_id": 51976453, "comment_id": 90903427, "body": "@Likak I asked for a MCVE because I can&#39;t reproduce the problem you&#39;re reporting. Since I can&#39;t reproduce the problem, I have <b>no idea</b> how you can fix it."}], "answers": [{"tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": false, "score": 0, "last_activity_date": 1534980855, "creation_date": 1534980855, "answer_id": 51976501, "question_id": 51976453, "link": "https://stackoverflow.com/questions/51976453/how-to-prevent-new-line-caused-by-n-in-windir-system32-netsh-exe-in-javasc/51976501#51976501", "title": "How to prevent new line caused by \\\\n in %WINDIR%\\\\system32\\\\netsh.exe in javascript", "body": "<p>Two options I can think of: first is what I recommended in my comment: prepending your string with an r. So using <code>r'%WINDIR%\\\\system32\\\\netsh.exe'</code>, instead of <code>'%WINDIR%\\\\system32\\\\netsh.exe'</code>.</p>\n\n<p>Alternatively, if that doesn't work, you can try using <code>pathlib</code>. Something like this:</p>\n\n<pre><code>from pathlib import Path\npath_str = str(Path('%WINDIR%\\\\system32\\\\netsh.exe'))\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8871181"}, "is_accepted": false, "score": 0, "last_activity_date": 1534981054, "creation_date": 1534981054, "answer_id": 51976521, "question_id": 51976453, "link": "https://stackoverflow.com/questions/51976453/how-to-prevent-new-line-caused-by-n-in-windir-system32-netsh-exe-in-javasc/51976521#51976521", "title": "How to prevent new line caused by \\\\n in %WINDIR%\\\\system32\\\\netsh.exe in javascript", "body": "<p>This worked fine for me:    </p>\n\n<pre><code>var text = \"%WINDIR%\\\\\\\\system32\\\\\\\\netsh.exe\";\ndocument.getElementById(\"result\").innerHTML = text;\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 746058, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f84ee0124ce53514c28e0058ef07a91d?s=128&d=identicon&r=PG", "display_name": "Likak", "link": "https://stackoverflow.com/users/746058/likak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534981054, "creation_date": 1534980273, "question_id": 51976453, "link": "https://stackoverflow.com/questions/51976453/how-to-prevent-new-line-caused-by-n-in-windir-system32-netsh-exe-in-javasc", "title": "How to prevent new line caused by \\\\n in %WINDIR%\\\\system32\\\\netsh.exe in javascript", "body": "<p>Is there a way that I can prevent the new line caused by '\\n' in:</p>\n\n<pre><code>%WINDIR%\\\\system32\\\\netsh.exe\n</code></pre>\n\n<p>I want to show this string in a html page and I use javascript to show it. However, I get: </p>\n\n<pre><code> %WINDIR%\\system32 etsh.exe\n</code></pre>\n\n<p>Also, I get this string using a python template and I already tried to replace it  with various combinations of '\\', '/', and 'n' in python and still no luck!</p>\n\n<p>I appreciate if someone can provide some hint. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1534980258, "post_id": 51976425, "comment_id": 90903094, "body": "You haven&#39;t shown us how you&#39;re doing any of the stuff you&#39;re talking about; without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> it&#39;s pretty hard to give you a concrete answer. But most likely, it&#39;s just a matter of calling <code>&lt;something&gt;(random_sample)</code> instead of <code>&lt;something&gt;(c)</code>, or similar."}, {"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "edited": false, "score": 1, "creation_date": 1534980574, "post_id": 51976425, "comment_id": 90903152, "body": "Just use dataframe.sample(4) , refer the docs - <a href=\"https://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.sample.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/version/0.17.0/generated/&hellip;</a>"}, {"owner": {"reputation": 73, "user_id": 9486854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spongebob Squarepants", "link": "https://stackoverflow.com/users/9486854/spongebob-squarepants"}, "edited": false, "score": 0, "creation_date": 1534980823, "post_id": 51976425, "comment_id": 90903185, "body": "I just added an edit, does that help?"}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 3866172, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f60997da43c5a202131cfee501ff12a5?s=128&d=identicon&r=PG&f=1", "display_name": "hpca01", "link": "https://stackoverflow.com/users/3866172/hpca01"}, "is_accepted": false, "score": 3, "last_activity_date": 1571218047, "last_edit_date": 1571218047, "creation_date": 1534980530, "answer_id": 51976473, "question_id": 51976425, "link": "https://stackoverflow.com/questions/51976425/how-to-take-random-sample-from-a-csv-file/51976473#51976473", "title": "How to take random sample from a csv file", "body": "<p>Best way to do it is use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sample.html#pandas-dataframe-sample\" rel=\"nofollow noreferrer\">pandas.DataFrame.sample</a>:</p>\n\n<pre><code>import pandas as pd\ndf=pd.read_csv(\"filename.csv\")\nprint(df.sample(4)) #Number of items from axis to return. Cannot be used with frac. Default = 1 if frac = None.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 1908533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684541da0bb7928d146ef2e4cfc94dbb?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/1908533/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1534981230, "creation_date": 1534981230, "answer_id": 51976544, "question_id": 51976425, "link": "https://stackoverflow.com/questions/51976425/how-to-take-random-sample-from-a-csv-file/51976544#51976544", "title": "How to take random sample from a csv file", "body": "<p>Most probably the <code>pandas</code> solution is the right one for you. In case you want to split any CSV-file generically in python to a random shuffled 20%:80% training- and test-splits, you can use core python:</p>\n\n<pre><code>import random\nx     = open(\"dataset.csv\").readlines()\nrandom.shuffle(x)\ntrain = x[:int(total*0.8)]\ntest  = x[int(total*0.8):]\n</code></pre>\n\n<p>As it seems you are trying to evaluate some kind of classification (machine learning?) task, I would highly recommend looking up <code>scikit-learn</code>'s <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html\" rel=\"nofollow noreferrer\"><code>train_test_split()</code></a>, as it can stratify for other variables and also works with pandas DataFrames.</p>\n"}], "owner": {"reputation": 73, "user_id": 9486854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spongebob Squarepants", "link": "https://stackoverflow.com/users/9486854/spongebob-squarepants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1904, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1571218047, "creation_date": 1534980011, "last_edit_date": 1534980804, "question_id": 51976425, "link": "https://stackoverflow.com/questions/51976425/how-to-take-random-sample-from-a-csv-file", "title": "How to take random sample from a csv file", "body": "<p>I have a csv file with 10 rows:</p>\n\n<pre><code>Text,Class\ntext0,class0\ntext1,class1\n...\ntext9,class9\n</code></pre>\n\n<p>I am classifying the text, and then comparing it to the correct class labeled in the csv file. I want to take a random sample of 4 pieces of text and their class from it. I have:</p>\n\n<pre><code>import random\ntextt=data['Text']\nclass_one=data['Class']\nc=textt[0:]\nrandom_sample=random.sample(c,4)\n</code></pre>\n\n<p>My classification then starts with:</p>\n\n<pre><code>for i in random_sample:\n</code></pre>\n\n<p>but when i calculate the accuracy of the classification, it calculates it for the entire dataset. How can I get it to only calculate the accuracy for just the sample of 4 pieces of data?</p>\n\n<p>edit: \nfor classification, i do:\n    for i in textt:\n        #classify text\nresults will look like:</p>\n\n<pre><code>choice 1\nchoice 2\nchoice 1\n...\n</code></pre>\n\n<p>and this is compared to the correct class from the csv file:</p>\n\n<pre><code>choice 1\nchoice 2\nchoice 2\n...\n</code></pre>\n\n<p>and accuracy will be calculated as 66.6% with:</p>\n\n<pre><code>for i in class_one:\n    #if predicted_class= correct_class: \n    #accuracy=number_correct/total_number\n</code></pre>\n\n<p>I want to only do the classification on the random sample, so instead of classifying all 10 examples, it would only classify 4</p>\n"}, {"tags": ["python", "firebase", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1534987297, "post_id": 51976401, "comment_id": 90904347, "body": "An ordered-dict work&#39;s exactly like a dict with respect to getting and setting values, etc."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10217397"}, "edited": false, "score": 0, "creation_date": 1535045621, "post_id": 51989082, "comment_id": 90932312, "body": "God bless your family"}, {"owner": {"reputation": 626, "user_id": 7874124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZws6.png?s=128&g=1", "display_name": "R7G", "link": "https://stackoverflow.com/users/7874124/r7g"}, "edited": false, "score": 0, "creation_date": 1535047758, "post_id": 51989082, "comment_id": 90933332, "body": "Thank you , And bless yours as well."}], "tags": [], "owner": {"reputation": 626, "user_id": 7874124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZws6.png?s=128&g=1", "display_name": "R7G", "link": "https://stackoverflow.com/users/7874124/r7g"}, "is_accepted": true, "score": 1, "last_activity_date": 1535037390, "creation_date": 1535037390, "answer_id": 51989082, "question_id": 51976401, "link": "https://stackoverflow.com/questions/51976401/how-to-parse-pyrebase-ordereddict/51989082#51989082", "title": "How to parse Pyrebase OrderedDict", "body": "<p>Hope this will work</p>\n\n<pre><code>for x in pyre_game.each():\n    print( x.key(), x.val() )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 12130376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oYaPr.jpg?s=128&g=1", "display_name": "Saswath Mishra", "link": "https://stackoverflow.com/users/12130376/saswath-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1569584436, "creation_date": 1569584436, "answer_id": 58133842, "question_id": 51976401, "link": "https://stackoverflow.com/questions/51976401/how-to-parse-pyrebase-ordereddict/58133842#58133842", "title": "How to parse Pyrebase OrderedDict", "body": "<p>you can also alternatively typecast the OrderedDict and use it like a dictionary.</p>\n\n<pre><code>pyre_game = dict(db.child(\"games/data\").order_by_child(game_object).limit_to_first(1).get().val()) \nprint(pyre_game)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10217397"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 51989082, "answer_count": 2, "score": 3, "last_activity_date": 1569584436, "creation_date": 1534979912, "last_edit_date": 1535030889, "question_id": 51976401, "link": "https://stackoverflow.com/questions/51976401/how-to-parse-pyrebase-ordereddict", "title": "How to parse Pyrebase OrderedDict", "body": "<p>Pyrebase get() method returns a OrderedDict and I was wondering how would I parse it to get the value. </p>\n\n<p>Here's how and when I use Pyrebase's get() method:</p>\n\n<pre><code> pyre_game = db.child(\"games/data\").order_by_child(\"id\").equal_to(\n                                    game_object).limit_to_first(1).get()\n</code></pre>\n\n<p>And when I call </p>\n\n<pre><code>pyre_game.val() \n</code></pre>\n\n<p>This is what I get: Here's what I get in the console:</p>\n\n<pre><code>OrderedDict([('-LKYjwhuEMjwadDcfWAl', {'category': 'Main game', 'cover': {'cloudinary_id': 'eohx6zgumfvvjlqgaac6', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/eohx6zgumfvvjlqgaac6.jpg'}, 'developers': [16083], 'first_release_date': 1532563200000, 'genres': [9, 14, 32], 'id': 105176, 'name': 'Arcane Golf', 'platforms': [6], 'release_dates': [{'category': 0, 'date': 1532563200000, 'human': '2018-Jul-26', 'm': 7, 'platform': 6, 'region': 8, 'y': 2018}], 'screenshots': [{'cloudinary_id': 'tgdsmj4ybqndrq9xrxe7', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/tgdsmj4ybqndrq9xrxe7.jpg'}, {'cloudinary_id': 'ryxzsrfw8zrlfa1fwuxz', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/ryxzsrfw8zrlfa1fwuxz.jpg'}, {'cloudinary_id': 'krlxlyg3r46w3mrsrozx', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/krlxlyg3r46w3mrsrozx.jpg'}, {'cloudinary_id': 'xkofnlley4atbqbpc4em', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/xkofnlley4atbqbpc4em.jpg'}, {'cloudinary_id': 'atr178vq39rcksei1bhd', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/atr178vq39rcksei1bhd.jpg'}, {'cloudinary_id': 'qo8znn18apizvlzbzec5', 'url': '//images.igdb.com/igdb/image/upload/t_thumb/qo8znn18apizvlzbzec5.jpg'}], 'summary': 'Arcane Golf is a miniature golf puzzle game set in a fantasy world full of dungeons, dangers, gems, and geometry. Play across 200 levels set in 4 unique courses inspired by classic adventure games!', 'updated_at': 1533116562596, 'videos': [{'name': 'Trailer', 'video_id': 'khDsYapla0M'}], 'websites': [{'category': 8, 'url': 'https://www.instagram.com/gold5games'}, {'category': 5, 'url': 'https://twitter.com/Gold5Games'}, {'category': 13, 'url': 'https://store.steampowered.com/app/897800'}]})])\n</code></pre>\n\n<p>How would I go to parse to get the value. The value is everything inside {} It starts with a category object </p>\n"}, {"tags": ["python", "error-handling", "sklearn-pandas", "one-hot-encoding"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534980283, "post_id": 51976394, "comment_id": 90903100, "body": "Please include a small sample of <code>X</code>."}, {"owner": {"reputation": 1, "user_id": 10261481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baa6875826c74c531039fc098487588?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn ", "link": "https://stackoverflow.com/users/10261481/quinn"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534981486, "post_id": 51976394, "comment_id": 90903300, "body": "Transp\tEd\tDrug Use  car\t        Dip \t    Y bus\t        Ged     N bike\t        Dip \t    Y"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534981529, "post_id": 51976394, "comment_id": 90903307, "body": "Please include in your code as valid Python data."}, {"owner": {"reputation": 1, "user_id": 10261481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baa6875826c74c531039fc098487588?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn ", "link": "https://stackoverflow.com/users/10261481/quinn"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534982012, "post_id": 51976394, "comment_id": 90903388, "body": "Age Transp  HH Size  Math  Read    Ed Drug Use  THC  Felon  Stipend Grad  0     52  Drive        1   6.0   9.0  Dip          Y   N     N      0.00     N 1     21  Drive        2  10.7  10.9  Dip          Y   N     N      0.00     N 2     23  Drive        3   5.5   7.2  Dip          Y   N     N      0.00     N"}, {"owner": {"reputation": 1, "user_id": 10261481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baa6875826c74c531039fc098487588?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn ", "link": "https://stackoverflow.com/users/10261481/quinn"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534982032, "post_id": 51976394, "comment_id": 90903391, "body": "Sorry, I don&#39;t know how to do that"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534982143, "post_id": 51976394, "comment_id": 90903407, "body": "Just click on the <code>Edit</code> link."}, {"owner": {"reputation": 1242, "user_id": 8044652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-T6aGhe5RQSE/AAAAAAAAAAI/AAAAAAAAASE/7LzSQMG0FFM/photo.jpg?sz=128", "display_name": "Nicolas M.", "link": "https://stackoverflow.com/users/8044652/nicolas-m"}, "edited": false, "score": 0, "creation_date": 1535125089, "post_id": 51976394, "comment_id": 90965708, "body": "Why don&#39;t you use a LabelBinarizer instead ? It do both at the same time"}], "owner": {"reputation": 1, "user_id": 10261481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baa6875826c74c531039fc098487588?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn ", "link": "https://stackoverflow.com/users/10261481/quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534984412, "creation_date": 1534979843, "last_edit_date": 1534984412, "question_id": 51976394, "link": "https://stackoverflow.com/questions/51976394/categorical-data-in-python-valueerror-could-not-convert-string-to-float", "title": "Categorical Data in Python: ValueError: could not convert string to float:", "body": "<p>I am trying to enter categorical data into Python. When I enter line five of the code below, I get ValueError: could not convert string to float: 'Y'</p>\n\n<pre><code>from sklearn.preprocessing import LabelEncoder, OneHotEncoder\nlabelencoder_X1 = LabelEncoder() \nX[:, 1] = labelencoder_X1.fit_transform(X[:, 1])\nonehotencoder = OneHotEncoder(categorical_features =[1])\nX = onehotencoder.fit_transform(X).toarray()\n</code></pre>\n\n<p>Sample of X:\nDrive   1   6.0\nDrive   2   10.7</p>\n\n<p>This happens with whatever categorical data I try to convert, be it a 'Y', 'N', or a typed text such as 'Drives' from any column of the file. I can't get it to work.</p>\n\n<p>Thanks for any input!</p>\n\n<p>Quinn</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1534979847, "post_id": 51976374, "comment_id": 90903008, "body": "Your variable <code>photo</code> is garbage collected the moment you exit the function <code>logo</code>; you need to keep a reference to it in the global space, or as an attribute of a class."}], "answers": [{"tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 0, "last_activity_date": 1534979805, "creation_date": 1534979805, "answer_id": 51976390, "question_id": 51976374, "link": "https://stackoverflow.com/questions/51976374/images-in-tkinter/51976390#51976390", "title": "Images in Tkinter", "body": "<p>You have to keep a reference to the image to prevent it being garbage collected. Try this: </p>\n\n<pre><code>def logo():\n    photo = PhotoImage(file=\"Logo.png\")\n    lbl = Label(root, image=photo)\n    lbl.image = photo # keep a reference\n    lbl.grid()\n</code></pre>\n\n<p>You don't have to do that in your other block because you are using global variables, which are never garbage collected. </p>\n\n<p>See the note on the bottom of <a href=\"http://effbot.org/tkinterbook/photoimage.htm\" rel=\"nofollow noreferrer\">this page</a>. </p>\n"}], "owner": {"reputation": 3, "user_id": 10258932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ad880a429803f854f7f38ddaeb6158?s=128&d=identicon&r=PG&f=1", "display_name": "B.Bacon", "link": "https://stackoverflow.com/users/10258932/b-bacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "closed_date": 1534979959, "accepted_answer_id": 51976390, "answer_count": 1, "score": -1, "last_activity_date": 1534979805, "creation_date": 1534979643, "question_id": 51976374, "link": "https://stackoverflow.com/questions/51976374/images-in-tkinter", "closed_reason": "Duplicate", "title": "Images in Tkinter", "body": "<p>How come I can't add images using this:</p>\n\n<pre><code>from tkinter import * \nroot = Tk()\n\ndef logo():\n    photo = PhotoImage(file=\"Logo.png\")\n    Label(root, image=photo).grid()\n\nlogo()\n\nroot.mainloop()\n</code></pre>\n\n<p>But I can add images using this:</p>\n\n<pre><code>from tkinter import * \nroot = Tk()\n\nphoto = PhotoImage(file=\"Logo.png\")\nLabel(window, image=photo).grid()\n\nlogo()\n\nroot.mainloop()\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["python", "windows", "pygame", "cx-freeze"], "comments": [{"owner": {"reputation": 1975, "user_id": 8516269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede452fc751d3847b90a32a94b4f1609?s=128&d=identicon&r=PG&f=1", "display_name": "jpeg", "link": "https://stackoverflow.com/users/8516269/jpeg"}, "edited": false, "score": 2, "creation_date": 1535006926, "post_id": 51976362, "comment_id": 90909275, "body": "You can copy any file to the build directory using the <code>include-files</code> option of the <code>build_exe</code> <a href=\"https://cx-freeze.readthedocs.io/en/latest/distutils.html#build-exe\" rel=\"nofollow noreferrer\">command</a>, not only image files.  Maybe you need to build a list of all needed (font) files in your <code>pygameMenu&#47;fonts</code> directory and pass this list to the <code>include-files</code> option. You can also include the folder itself, see <a href=\"https://stackoverflow.com/q/15079268/8516269\">stackoverflow.com/q/15079268/8516269</a> . Is this what you would like to do?"}, {"owner": {"reputation": 1194, "user_id": 8390068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbzKf.jpg?s=128&g=1", "display_name": "Micheal O&#39;Dwyer", "link": "https://stackoverflow.com/users/8390068/micheal-odwyer"}, "edited": false, "score": 0, "creation_date": 1535032389, "post_id": 51976362, "comment_id": 90924384, "body": "Please post any exceptions as text not an <a href=\"http://idownvotedbecau.se/imageofanexception/\" rel=\"nofollow noreferrer\">image</a>. Posting exceptions as images is not as useful as posting them in text, because people cannot copy and paste the text. Thanks!"}, {"owner": {"reputation": 47, "user_id": 7092447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ww9so.jpg?s=128&g=1", "display_name": "Rifqi Muttaqin", "link": "https://stackoverflow.com/users/7092447/rifqi-muttaqin"}, "edited": false, "score": 0, "creation_date": 1535142032, "post_id": 51976362, "comment_id": 90973418, "body": "thanks!!!, I&#39;m sorry for that question"}], "owner": {"reputation": 47, "user_id": 7092447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ww9so.jpg?s=128&g=1", "display_name": "Rifqi Muttaqin", "link": "https://stackoverflow.com/users/7092447/rifqi-muttaqin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "closed_date": 1535415107, "answer_count": 0, "score": 0, "last_activity_date": 1535006535, "creation_date": 1534979536, "question_id": 51976362, "link": "https://stackoverflow.com/questions/51976362/oserror-unable-to-read-font-file-pygamemenu-fonts-munro-ttf", "closed_reason": "Duplicate", "title": "OSError: unable to read font file &#39;pygameMenu/fonts/munro.ttf&#39;", "body": "<p>when I build my game with Pygame module and make .exe file with cx_Freeze, build process has been done with no errors, but when I try run in command line, that error is showing up, how to fix that ?, if image files we know, just add \"include_files\" in <code>setup.py</code>, if modules, just add <code>__init__.py</code>, but if font file ? how ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/8v9co.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8v9co.png\" alt=\"here the proof :(\"></a></p>\n\n<p>here the fonts directory:\n<a href=\"https://github.com/Rifqi31/AdvantureOfGimo/tree/master/pygameMenu/fonts\" rel=\"nofollow noreferrer\">https://github.com/Rifqi31/AdvantureOfGimo/tree/master/pygameMenu/fonts</a></p>\n"}, {"tags": ["python", "encoding", "str-replace", "unicode-escapes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534980130, "post_id": 51976328, "comment_id": 90903073, "body": "You don&#39;t have the character sequence backslash-x-a-d in your strings; you have actual soft hyphens. If you&#39;re seeing backslash-x-a-d in your printed output, you&#39;re probably doing something wrong like printing lists of strings instead of printing strings, or something else that would use the <code>repr</code> of your strings."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534980283, "post_id": 51976328, "comment_id": 90903099, "body": "(They should really be regular hyphens instead of soft hyphens, but that&#39;s a different issue.)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534980631, "post_id": 51976328, "comment_id": 90903160, "body": "So, why have you tried encoding the file as iso8859-15? Do you need iso8859-15 bytes? If so, why are you trying to read them as UTF-8?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534981827, "post_id": 51976328, "comment_id": 90903354, "body": "@user2357112 Ac-tu-al-ly, be-ing re-gu-lar hy-phens would pro-ba-bly be annoy-ing, un-less you want hy-phens in-sert-ed into al-most half the words in the no-vel. Probably better to just have nothing, and if someone wants to render it to a book, trust their hyphenation dictionary."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534981960, "post_id": 51976328, "comment_id": 90903380, "body": "@abarnert: No, the file has soft hyphens where it actually needs regular hyphens, like in &quot;eagle-feather quill&quot; and &quot;jet-black hair&quot;. None of the soft hyphens I&#39;ve found in the file are in syllable breaks."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9966224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315453d4587a951fb0ed95856e6fc690?s=128&d=identicon&r=PG", "display_name": "Data Science Officer", "link": "https://stackoverflow.com/users/9966224/data-science-officer"}, "edited": false, "score": 0, "creation_date": 1535015464, "post_id": 51976543, "comment_id": 90913965, "body": "Thanks. I tried alternative decodings to UTF-8 as they seemed to work better (didn&#39;t display the same error than when I tried to decode it with UTF-8). I think UTF-8 was simply the default <i>decoding</i> for <code>nltk</code> functions so I did indeed mix the two concepts of encoding and decoding up."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 12, "last_activity_date": 1534981664, "last_edit_date": 1534981664, "creation_date": 1534981230, "answer_id": 51976543, "question_id": 51976328, "link": "https://stackoverflow.com/questions/51976328/best-way-to-remove-xad-in-python/51976543#51976543", "title": "Best way to remove &#39;\\xad&#39; in Python?", "body": "<p>Your file almost certainly has actual <a href=\"http://www.fileformat.info/info/unicode/char/00AD/index.htm\" rel=\"noreferrer\">U+00AD soft-hyphen characters</a> in it.</p>\n\n<p>These are characters that mark places where a word could be split when fitting lines to a page. The idea is that the soft hyphen is invisible if the word doesn't need to be split, but printed the same as a <a href=\"http://www.fileformat.info/info/unicode/char/2010/index.htm\" rel=\"noreferrer\">U+2010 normal hyphen</a> if it does.</p>\n\n<p>Since you don't care about rendering this text in a book with nicely flowing text, you're never going to hyphenate anything, so you just want to remove these characters.</p>\n\n<p>The way to do this is not to fiddle with the encoding. Just remove them from the Unicode text, using whichever of these you find most readable:</p>\n\n<pre><code>data = data.replace('\\xad', '')\ndata = data.replace('\\u00ad', '')\ndata = data.replace('\\N{SOFT HYPHEN}', '')\n</code></pre>\n\n<p>Notice the single backslash. We're not replacing a literal backslash, <code>x</code>, <code>a</code>, <code>d</code>, we're replacing a literal soft-hyphen character, that is, the character whose code point is hex 0xad.</p>\n\n<p>You can either do this to the whole file before splitting into words, or do it once per word after splitting.</p>\n\n<hr>\n\n<p>Meanwhile, you seem to be confused about what encodings are and what to do with them:</p>\n\n<blockquote>\n  <p>I've tried encoding the .txt file as iso8859-15</p>\n</blockquote>\n\n<p>No, you've tried <em>decoding</em> the file as ISO-8859-15. It's not clear why you tried ISO-8859-15 in the first place. But, since the ISO-8859-15 encoding for the character <code>'\\xad'</code> is the byte <code>b'\\xad'</code>, maybe that's correct.</p>\n\n<blockquote>\n  <p>Ideally I'd like to encode this data as UTF-8 to avail of the nltk library</p>\n</blockquote>\n\n<p>But NLTK doesn't want UTF-8 bytes, it wants Unicode strings. You don't need to encode it for that.</p>\n\n<p>Plus, you're not trying to encode your Unicode text to UTF-8, you're trying to <em>decode</em> your bytes <em>from</em> UTF-8. If that's not what those bytes are\u2026\u00a0if you're lucky, you'll get an error like this one; if not, you'll get mojibake that you don't notice until you've screwed up a 500GB corpus and thrown away the original data.<sup>1</sup></p>\n\n<hr>\n\n<p><sub>1. UTF-8 is specifically designed so you'll get early errors whenever possible. In this case, reading ISO-8859-15 text with soft hyphens as if it were UTF-8 raises exactly the error you're seeing, but reading UTF-8 text with soft hyphens as if it were ISO-8859-15 will silently succeed, but with an extra <code>'\u00c2'</code> character before each soft hyphen. The error is usually more helpful.</sub></p>\n"}], "owner": {"reputation": 83, "user_id": 9966224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315453d4587a951fb0ed95856e6fc690?s=128&d=identicon&r=PG", "display_name": "Data Science Officer", "link": "https://stackoverflow.com/users/9966224/data-science-officer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5495, "favorite_count": 0, "accepted_answer_id": 51976543, "answer_count": 1, "score": 7, "last_activity_date": 1534981664, "creation_date": 1534979248, "question_id": 51976328, "link": "https://stackoverflow.com/questions/51976328/best-way-to-remove-xad-in-python", "title": "Best way to remove &#39;\\xad&#39; in Python?", "body": "<p>I'm trying to build a corpus from the .txt file found at <a href=\"http://www.glozman.com/TextPages/Harry%20Potter%203%20-%20The%20Prisoner%20Of%20Azkaban.txt\" rel=\"noreferrer\" title=\"Harry Potter\">this link</a>.\nI believe the instances of <code>\\xad</code> are supposedly 'soft-hyphens', but do not appear to be read correctly under UTF-8 encoding. I've tried encoding the .txt file as <code>iso8859-15</code>, using the code:</p>\n\n<pre><code>with open('Harry Potter 3 - The Prisoner Of Azkaban.txt', 'r', \nencoding='iso8859-15') as myfile:\ndata=myfile.read().replace('\\n', '')\n\ndata2 = data.split(' ')\n</code></pre>\n\n<p>This returns an array of 'words', but '\\xad' remains attached to many entries in data2. I've tried </p>\n\n<pre><code>data_clean = data.replace('\\\\xad', '')\n</code></pre>\n\n<p>and </p>\n\n<pre><code>data_clean = data.replace('\\\\xad|\\\\xad\\\\xad','')\n</code></pre>\n\n<p>but this doesn't seem to remove the instances of '\\xad'. Has anyone ran into a similar problem before? Ideally I'd like to encode this data as UTF-8 to avail of the <code>nltk</code> library, but it won't read the file with UTF-8 encoding as I get the following error:</p>\n\n<pre><code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xad in position 471: invalid start byte\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p><strong>Additional context:</strong> This is a recreational project with the aim of being able to generate stories based on the txt file. Everything I've generated thus far has been permeated with '\\xad', which ruins the fun!</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 11, "user_id": 10262073, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eYNGNVQH41I/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPmPAUpmfWB7l7usNA7HOTB_8b0xg/mo/photo.jpg?sz=128", "display_name": "biwwi bourdi", "link": "https://stackoverflow.com/users/10262073/biwwi-bourdi"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1534979418, "post_id": 51976316, "comment_id": 90902918, "body": "I&#39;m a beginner. It&#39;s my 4th week."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1534979448, "post_id": 51976316, "comment_id": 90902922, "body": "You&#39;ve exhausted your file iterator, you can&#39;t loop over the file more than once."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1534979510, "post_id": 51976316, "comment_id": 90902935, "body": "@MitchelPaulin that&#39;s fine, in this case, because they are looping over a <code>dict</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534979893, "post_id": 51976316, "comment_id": 90903018, "body": "Also iterating over the file twice: once in the dict comprehension, a second time in the <code>for</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1857, "user_id": 3499277, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zwdb7.png?s=128&g=1", "display_name": "Pieter De Clercq", "link": "https://stackoverflow.com/users/3499277/pieter-de-clercq"}, "reply_to_user": {"reputation": 11, "user_id": 10262073, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eYNGNVQH41I/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPmPAUpmfWB7l7usNA7HOTB_8b0xg/mo/photo.jpg?sz=128", "display_name": "biwwi bourdi", "link": "https://stackoverflow.com/users/10262073/biwwi-bourdi"}, "edited": false, "score": 0, "creation_date": 1534980575, "post_id": 51976410, "comment_id": 90903153, "body": "@biwwibourdi I updated my answer to include a non-Counter answer too"}], "tags": [], "owner": {"reputation": 1857, "user_id": 3499277, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zwdb7.png?s=128&g=1", "display_name": "Pieter De Clercq", "link": "https://stackoverflow.com/users/3499277/pieter-de-clercq"}, "is_accepted": false, "score": 2, "last_activity_date": 1534980556, "last_edit_date": 1534980556, "creation_date": 1534979950, "answer_id": 51976410, "question_id": 51976316, "link": "https://stackoverflow.com/questions/51976316/counting-occurrences-of-strings-in-a-file/51976410#51976410", "title": "Counting occurrences of strings in a file", "body": "<p>You can only use an iterator (which is obtained by using <code>open(file.txt)</code> once. The following code should work for your case. This code makes use of a <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">Counter</a>, which is included in the standard python libraries and is designed for counting occurrences of strings.</p>\n\n<p><strong>By using a Counter</strong></p>\n\n<pre><code># import the Counter so it can be used\nfrom collections import Counter\n# open the text file in read mode, by using this construct, \n# the lock will be released after the with-block to ensure \n# resources are freed correctly\nwith open(\"bones.txt\") as file:\n    # for every line in the file; remove the \\n and insert it into the counter\n    counts = Counter(line.strip() for line in file)\n\n# print every key in the counter\nfor dinosaur in counts:\n    print(\"{}: {}\".format(dinosaur, counts[dinosaur]))\n</code></pre>\n\n<p><strong>By using a dictionary</strong></p>\n\n<p>This code does not use a Counter, but operates exactly the same.</p>\n\n<pre><code># open the text file in read mode, by using this construct, \n# the lock will be released after the with-block to ensure \n# resources are freed correctly\nwith open(\"bones.txt\") as file:\n    # create a dictionary to store the counts\n    counts = dict()\n    # iterate over every line in the file\n    for line in file:\n        # remove the \\n from the line\n        stripped = line.strip()\n\n        if stripped in counts:\n            # key already exists -&gt; increment it\n            counts[stripped] += 1\n        else:\n            # key doesn't exist -&gt; add it\n            counts[stripped] = 1\n\n# print every key in the counts dictionary\nfor dinosaur in counts:\n    print(\"{}: {}\".format(dinosaur, counts[dinosaur]))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Pachycephalosaurus: 1\nStruthiomimus: 2\nAnkylosaurus: 3\nTyrannosaurus Rex: 1\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10262073, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eYNGNVQH41I/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPmPAUpmfWB7l7usNA7HOTB_8b0xg/mo/photo.jpg?sz=128", "display_name": "biwwi bourdi", "link": "https://stackoverflow.com/users/10262073/biwwi-bourdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535023047, "creation_date": 1534979140, "last_edit_date": 1535023047, "question_id": 51976316, "link": "https://stackoverflow.com/questions/51976316/counting-occurrences-of-strings-in-a-file", "title": "Counting occurrences of strings in a file", "body": "<p>My code is supposed to tally up all the times a dinosaur bone is displayed in a .txt file but my code states  that all bones are displayed 0 times.</p>\n\n<pre><code>print('Bones found:')\nf=open('bones.txt')\nbones = {line.replace('\\n', ''): 0 for line in f}\nfor bone in f:\n  if bone in bones:\n    bones[bone]=bones[bone]+1\n\nfor y in bones:\n  print(y+':'+str(bones[y]))\n</code></pre>\n\n<p>The bones.txt file is :</p>\n\n<pre><code>Ankylosaurus\nPachycephalosaurus\nAnkylosaurus\nTyrannosaurus Rex\nAnkylosaurus\nStruthiomimus\nStruthiomimus\n</code></pre>\n\n<p>It says: </p>\n\n<pre><code>Bones found:\nAnkylosaurus:0\nPachycephalosaurus:0\nTyrannosaurus Rex:0\nStruthiomimus:0\n</code></pre>\n\n<p>But supposed to say: </p>\n\n<pre><code>Bones found:\nAnkylosaurus: 3\nPachycephalosaurus: 1\nTyrannosaurus Rex: 1\nStruthiomimus: 2\n</code></pre>\n"}, {"tags": ["python", "c++", "64-bit", "ctypes"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8835328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc1c057be853dd91adb0c0924d81d8?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn S", "link": "https://stackoverflow.com/users/8835328/shawn-s"}, "edited": false, "score": 0, "creation_date": 1535029995, "post_id": 51976360, "comment_id": 90922724, "body": "Thanks for the heads up. It was actually my bad to post the code mid-changes. Infact I have ordered the variables similarily and also ensured that types match: for example (&quot;lais&quot;, float*6 ). Still the same problem ..."}, {"owner": {"reputation": 1, "user_id": 8835328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc1c057be853dd91adb0c0924d81d8?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn S", "link": "https://stackoverflow.com/users/8835328/shawn-s"}, "edited": false, "score": 0, "creation_date": 1535051728, "post_id": 51976360, "comment_id": 90935240, "body": "Ah found the issue thanks to your suggestion @abarnert, turns out I declared the same variable twice in the python structure. I&#39;ve fixed the code in the above question so now it should work. Thanks again for the recommendations."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1, "user_id": 8835328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc1c057be853dd91adb0c0924d81d8?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn S", "link": "https://stackoverflow.com/users/8835328/shawn-s"}, "edited": false, "score": 0, "creation_date": 1535051974, "post_id": 51976360, "comment_id": 90935347, "body": "@ShawnS I did exactly the same thing with a WIn32 API struct, and spent a whole weekend hunting down pretty much the same bug you&#39;re seeing, and it was so annoying that I still vividly remember it a decade later, which is exactly why I always write a script to generate the code. :)"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1534979531, "creation_date": 1534979531, "answer_id": 51976360, "question_id": 51976302, "link": "https://stackoverflow.com/questions/51976302/ctypes-structure-contains-garbage-not-correct-data/51976360#51976360", "title": "ctypes - structure contains garbage / not correct data", "body": "<p>Your two structures have at least two mismatches. </p>\n\n<p>I don't know which, if either, is relevant, because your garbage seems to be in a field named <code>spic</code>, which doesn't appear in either the C++ struct or the ctypes one\u2026</p>\n\n<hr>\n\n<p>First, you get two fields out of order:</p>\n\n<pre><code>double threshold;\nint isMesh;\ndouble mVol;\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>(\"threshold\", c_double),\n(\"mVol\", c_double),\n(\"isMesh\", c_int),\n</code></pre>\n\n<p>This might seem like no big deal, but once you put alignment-driven padding into the mix, it's conceivable that this could cause all of the subsequent fields to be 4 bytes off.</p>\n\n<hr>\n\n<p>And then, you use the wrong types for all of these arrays:</p>\n\n<pre><code>float lais[6];  \nfloat sais[6];  \nfloat la3D[6];      \n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>(\"lais\", c_double*6),   \n(\"said\", c_double*6), \n(\"la3D\", c_double*6),       \n</code></pre>\n\n<p>A <code>float</code> is 32 bits; a <code>c_double</code> is 64 bits. <code>lais[0]</code> is a garbage double consisting of <code>lais[0]</code> and <code>lais[1]</code> packed together as a double, <code>lais[4]</code> is <code>sais[2]</code> and <code>sais[3]</code> packaged together, <code>la3D[4]</code> is 64 random bits out of the heap past the end of the structure. If you're lucky, you get a segfault when you try to read that, but if not, you get hard-to-debug garbage.</p>\n\n<hr>\n\n<p>For really complicated structs like this, I usually don't trust myself to write the ctypes version manually without making at least three times as many mistakes as you did. Instead, I write a quick script to parse the header (or, occasionally, the docs) and generate the Python code. For things like CoreFoundation and Win32 headers, that have thousands of ridiculously huge structs all written in a very rigid and reliable style, I have scripts that I use over and over again.</p>\n"}], "owner": {"reputation": 1, "user_id": 8835328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc1c057be853dd91adb0c0924d81d8?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn S", "link": "https://stackoverflow.com/users/8835328/shawn-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535036309, "creation_date": 1534979043, "last_edit_date": 1535036309, "question_id": 51976302, "link": "https://stackoverflow.com/questions/51976302/ctypes-structure-contains-garbage-not-correct-data", "title": "ctypes - structure contains garbage / not correct data", "body": "<p>I have a C++ DLL (64bit) that takes as input a double pointer to a structure (i.e. a pointer to an array of structures). The function dynamically allocates the array of structures and 'then populates each structures elements (elements include: integers, floats, doubles, static arrays, another structure, and dynamically allocated arrays). </p>\n\n<p>I've created a python class to mimic the structure (all data elements). However, when I call the C++ function - CreateROIs( .. ) - from python , I get garbage / wrong values for some of the elements in the structure. </p>\n\n<p>Example, I'll get ppMem[0].spic=24609435234</p>\n\n<p>Interestingly, if I pass that same data structure back to the C++ DLL and print out the elements in C++ they are still correct (function / code not provided for this part below). </p>\n\n<p>I'm assuming it's an issue with data types (doubles / floats) when moving data between 64Bit python and C++ DLLs. Or maybe not having contiguous memory for the structure? I can't seem to track it down... Anyways, any help is much appreciated!</p>\n\n<p>Here's my code and thanks for the help!</p>\n\n<p>C++ DLL code:</p>\n\n<pre><code>// TriangleMesh struct where mesh is defined by vertices connected via triangles\n// &lt;summary&gt;\nextern \"C\"\n\nstruct MyDLL_API TriangleMesh\n{\n    int nbrVertices;\n    int nbrTriangles;\n\n    float* vertices;\n    int* triangles;\n};\n\nextern \"C\"\nstruct MyDLL_API ROI \n{\n    double xmm;\n    double ymm;\n    double zmm;\n    double diameter;\n    double level;\n    double volume;\n    double threshold;\n    int isMesh;\n    double mVol;\n    double mass;\n    double meanD;\n    double dve;\n    double dla;\n    double dsa;\n    double dla3D;\n    double spike; \n    float sphere;\n\n    float lais[6];  \n    float sais[6];  \n    float la3D[6];      \n\n    TriangleMesh mesh;\n};\n\nextern \"C\" MyDLL_API\nvoid CreateROIs(ROI** ppMem, int* NumROIs);\n\nvoid CreateROIs(ROI** ppMem, int* NumROIs)\n{\n    *ppMem = (ROI *)malloc(sizeof(ROI) * (*NumROIs));\n\n    for (int i = 0; i &lt; *nbrNodules; i++)\n    {\n        (*ppMem)[i].xmm = double(i + 1.0);\n        (*ppMem)[i].ymm = double(i + 1.0);\n        (*ppMem)[i].zmm = double(i + 1.0);\n        (*ppMem)[i].diameter = double(i + 1.0);\n        (*ppMem)[i].level = double(i + 1.0);\n        (*ppMem)[i].volume= double(i + 1.0);\n        (*ppMem)[i].threshold = double(i + 1.0);\n        (*ppMem)[i].mVol= double(i + 1.0);\n        (*ppMem)[i].mass = double(i + 1.0);\n        (*ppMem)[i].meanD= double(i + 1.0);\n        (*ppMem)[i].dve = double(i + 1.0);\n        (*ppMem)[i].dla = double(i + 1.0);\n        (*ppMem)[i].dsa = double(i + 1.0);\n        (*ppMem)[i].dla3D = double(i + 10.0);\n        (*ppMem)[i].spike = double(i + 1.0);\n        (*ppMem)[i].sphere = double(i + 1.0);\n\n        int arr_size = sizeof((*ppMem)[i].longAxis3D) / sizeof((*ppMem)[i].longAxis3D[0]);\n\n        for (int j = 0; j &lt; arr_size; j++)\n        {\n            float val = arr_size * i + j;\n            (*ppMem)[i].lais[j] = val;\n            (*ppMem)[i].sais[j] = val;\n            (*ppMem)[i].la3D[j] = val;\n        }\n\n\n        (*ppMem)[i].meshWasCreatedByDll = int(i+1);\n        (*ppMem)[i].segMesh.nbrVertices = int(rand() % 10 + 1);\n        (*ppMem)[i].segMesh.nbrTriangles = int(rand() % 10 + 1);\n\n        (*ppMem)[i].segMesh.vertices = (float *)malloc(sizeof(float) * (*ppMem)[i].segMesh.nbrVertices);\n        (*ppMem)[i].segMesh.triangles = (int *)malloc(sizeof(int) * (*ppMem)[i].segMesh.nbrTriangles);\n\n        for (int j = 0; j &lt; (*ppMem)[i].segMesh.nbrVertices; j++)\n        {\n            (*ppMem)[i].segMesh.vertices[j] = float(j + 1);\n        }\n\n        for (int j = 0; j &lt; (*ppMem)[i].segMesh.nbrTriangles; j++)\n        {\n            (*ppMem)[i].segMesh.triangles[j] = int(j + 1);\n        }\n\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Python Code:</p>\n\n<pre><code>from ctypes import *\nimport numpy as np\nfrom numpy.ctypeslib import ndpointer\n\nndDLL = cdll.LoadLibrary(\"./MyDll.dll\")\n\n# Triangle Mesh Structure\nclass TriangleMesh(Structure):\n    _fields_ = [\n        (\"nbrVertices\", c_int),\n        (\"nbrTriangles\", c_int),\n        (\"vertices\", POINTER(c_float)),\n        (\"triangles\",POINTER(c_int))]\n\n# LCSNoduleEx Structure\nclass ROI(Structure):\n    _fields_ = [\n        (\"xmm\", c_double),\n        (\"ymm\", c_double),\n        (\"zmm\", c_double),\n        (\"diameter\", c_double),\n        (\"level\", c_double),\n        (\"volume\", c_double),\n        (\"threshold\", c_double),\n        (\"isMesh\", c_int),\n        (\"mVol\", c_double),\n        (\"mass\", c_double),\n        (\"meanD\", c_double),\n        (\"dve\", c_double),\n        (\"dla\", c_double),\n        (\"dsa\", c_double),\n        (\"dla3D\", c_double),\n        (\"spike\", c_double), \n        (\"sphere\", c_float),\n\n        (\"lais\", c_float*6),   \n        (\"said\", c_float*6), \n        (\"la3D\", c_float*6),       \n\n        (\"mesh\", TriangleMesh)\n     ]\n\n\ndef PrintROI(pMem, NumROI):\n\n    for i in range():):\n        print(\"ROI %d\"%(i), flush=True)\n        print(\"\\tlevel %f\"%(pMem[i].level), flush=True)\n        print(\"\\tdiameter %f\"%(pMem[i].diameter), flush=True)\n        print(\"\\tdla3D %f\"%(pMem[i].dla3D), flush=True)\n        print(\"\\tddla %f\"%(pMem[i].dla), flush=True)\n        print(\"\\tmeanD %f\"%(pMem[i].meanD), flush=True)\n        print(\"\\tdai %f\"%(pMem[i].dai), flush=True)\n        print(\"\\tdve %f\"%(pMem[i].dve), flush=True)\n\n        print(\"\\tmass %f\"%(pMem[i].mass), flush=True)\n\n        print(\"\\tthreshold %f\"%(pMem[i].threshold), flush=True)\n\n        print(\"\\tspiculation %f\"%(pMem[i].spike), flush=True)\n        print(\"\\tspiculation2 %f\"%(pMem[i].sphere), flush=True)\n\n        print(\"\\tvolume %f\"%(pMem[i].volume), flush=True)\n        print(\"\\tmVol %f\"%(pMem[i].mVol), flush=True)\n        print(\"\\txmm %f\"%(pMem[i].xmm), flush=True)\n        print(\"\\tymm %f\"%(pMem[i].ymm), flush=True)\n        print(\"\\tzmm %f\"%(pMem[i].zmm), flush=True)\n\n        print(\"\\tla3D %f, %f, %f, %f, %f, %f\"%(pMem[i].la3D[0],\n                                                    pMem[i].la3D[1],\n                                                    pMem[i].la3D[2],\n                                                    pMem[i].la3D[3],\n                                                    pMem[i].la3D[4],\n                                                    pMem[i].la3D[5]), flush=True)\n\n        print(\"\\tsais %f, %f, %f, %f, %f, %f\"%(pMem[i].sais[0],\n                                                           pMem[i].sais[1],\n                                                           pMem[i].sais[2],\n                                                           pMem[i].sais[3],\n                                                           pMem[i].sais[4],\n                                                           pMem[i].sais[5]), flush=True)\n\n        print(\"\\tLAIS %f, %f, %f, %f, %f, %f\"%(pMem[i].lais[0],\n                                                            pMem[i].lais[1],\n                                                            pMem[i].lais[2],\n                                                            pMem[i].lais[3],\n                                                            pMem[i].lais[4],\n                                                            pMem[i].lais[5]), flush=True)\n\n        print(\"\\tisMesh %d\"%(pMem[i].isMesh), flush=True)\n\n\n        print(\"\\tnbrVertices %d\"%(pMem[i].mesh.nbrVertices))\n        print(\"\\tnbrTriangles %d\"%(pMem[i].mesh.nbrTriangles))\n\n\n        for j in range(pMem[i].mesh.nbrVertices):\n            print(\"\\t\\tVertices %d) %f\"%(j,pMem[i].mesh.vertices[j]), flush=True)\n\n        for j in range(pMem[i].mesh.nbrTriangles):\n            print(\"\\t\\tTriangle %d) %d\"%(j,pMem[i].mesh.triangles[j]), flush=True)\n\nndDLL.CreateROI.argtypes  = [POINTER(POINTER(ROI)), POINTER(c_int)]\n\npMem= POINTER(LCSNoduleEx)()\nNumROI = c_int(1)\n\nndDLL.CreateROI(byref(pMem),byref(NumROI) )\n\n\nPrintROI(pMem, NumROI.value)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "beautifulsoup", "python-requests"], "comments": [{"owner": {"reputation": 2178, "user_id": 808417, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rmLRB.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/808417/alfie"}, "edited": false, "score": 0, "creation_date": 1534979392, "post_id": 51976294, "comment_id": 90902916, "body": "what is r.text? do you mean response.text? : BeautifulSoup(r.text, &#39;html.parser&#39;)"}, {"owner": {"reputation": 560, "user_id": 5165935, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebdf861173d63c3cdb70ab0fe478d3c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ebad Ali", "link": "https://stackoverflow.com/users/5165935/ebad-ali"}, "reply_to_user": {"reputation": 2178, "user_id": 808417, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rmLRB.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/808417/alfie"}, "edited": false, "score": 0, "creation_date": 1534979606, "post_id": 51976294, "comment_id": 90902956, "body": "@Alfie yes it was response. text. I mistakenly put r.text."}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 9388279, "user_type": "registered", "profile_image": "https://graph.facebook.com/2103940609632462/picture?type=large", "display_name": "Austin Mackillop", "link": "https://stackoverflow.com/users/9388279/austin-mackillop"}, "is_accepted": true, "score": 2, "last_activity_date": 1534980611, "creation_date": 1534980611, "answer_id": 51976484, "question_id": 51976294, "link": "https://stackoverflow.com/questions/51976294/web-scraping-request-not-returning-complete-content-of-the-webpage/51976484#51976484", "title": "Web Scraping: request not returning complete content of the webpage", "body": "<p>Is it possible that you are hitting the buffer limit of your IDE's console?</p>\n\n<p>On Spyder, the default is 500 lines and you will only see 500 lines of the sourcecode as a result. Try increasing this limit to see if that solves your issue. </p>\n\n<p>On Spyder (windows), it's Tools > Preferences > IPython Console > Buffer (at the bottom).</p>\n\n<p>I increased my buffer to 4000 and it still wasn't enough to fit the entire page but it did reveal more lines.</p>\n"}, {"tags": [], "owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "is_accepted": false, "score": 0, "last_activity_date": 1534981720, "creation_date": 1534981720, "answer_id": 51976602, "question_id": 51976294, "link": "https://stackoverflow.com/questions/51976294/web-scraping-request-not-returning-complete-content-of-the-webpage/51976602#51976602", "title": "Web Scraping: request not returning complete content of the webpage", "body": "<p>You are missing out one thing here. The table rows are nested within the table tag. Therefore, you need to first extract the table body then the table rows.\nI use 'lxml' parser.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nresponse = requests.get(\"https://coinmarketcap.com/all/views/all\", headers={'User-Agent': 'Mozilla/5.0'})\nprint(response.text)\n\nsoup = BeautifulSoup(response.text, 'lxml')\nresults = soup.find('tbody')\ncurr_symbols = [x.text for x in results.find_all('td',attrs={'class':'text-left col-symbol'})]\nprint(curr_symbols)\nprint(len(curr_symbols)) # 1878\n</code></pre>\n"}], "owner": {"reputation": 560, "user_id": 5165935, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebdf861173d63c3cdb70ab0fe478d3c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ebad Ali", "link": "https://stackoverflow.com/users/5165935/ebad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 51976484, "answer_count": 2, "score": 2, "last_activity_date": 1534981720, "creation_date": 1534979006, "last_edit_date": 1534979565, "question_id": 51976294, "link": "https://stackoverflow.com/questions/51976294/web-scraping-request-not-returning-complete-content-of-the-webpage", "title": "Web Scraping: request not returning complete content of the webpage", "body": "<p>I am writing a website scraper that saves all names of cryptocurrency from a table within a website. I wrote a script to get the response of the webpage and then by using the <code>BeautifulSoup</code> library to parse the response into an HTML object. The issue is the response is not returning the complete content of the webpage. It displays data from a certain position of the table and skips the data above it.</p>\n\n<p>When I try debugging the code the response object has all the data from the webpage but when I try to print the data it only shows data from a certain point in the page.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nresponse = requests.get(\"https://coinmarketcap.com/all/views/all\", headers={'User-Agent': 'Mozilla/5.0'})\nprint(response.text)\n\nsoup = BeautifulSoup(response.text, 'html.parser')\n\nresults = soup.find_all('table', attrs={'id': 'currencies-all'})\n</code></pre>\n\n<p>It would be really helpful if someone could tell me what I am doing wrong because I am unable to find out the issue.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "xpath", "webdriver"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1534978674, "post_id": 51976238, "comment_id": 90902770, "body": "You&#39;ll need to collect the links from the page and then make a random choice from that list.  See the <code>random</code> package documentation for the <code>choice</code> method."}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534991978, "post_id": 51976238, "comment_id": 90905219, "body": "Thanks for the help. I figured out how to do collect all the links from the page. However there are some links that are unnecessary. Is it possible to exclude them?"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1535000286, "post_id": 51976238, "comment_id": 90906774, "body": "If you got <i>unnecessary links</i> then your selector is not perfect. Use more specific selector to get rid of them"}, {"owner": {"reputation": 304, "user_id": 6488703, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208666279668902/picture?type=large", "display_name": "Shlomi Bazel", "link": "https://stackoverflow.com/users/6488703/shlomi-bazel"}, "edited": false, "score": 0, "creation_date": 1535012516, "post_id": 51976238, "comment_id": 90912240, "body": "Hi @KunwarSodhi, what exactly do you mean by unnecessary links? Do you want to edit your post and give us an example of what exactly you need - which links exactly, and we could provide a detailed solution."}], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535034622, "post_id": 51987760, "comment_id": 90925904, "body": "Can you ensure you are accessing <code>http:&#47;&#47;www.google.com</code> as your program might be accessing the local google server instance which is probhably not ending with <code>.com</code>. In that case you may require to tweak the <i>xpath</i> but the logic remains the same. In this run I got an output as <b>6</b>."}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535034989, "post_id": 51987760, "comment_id": 90926165, "body": "It works!. In this case I got a output of 2. However the first time I ran I got a output of 10 and it didn&#39;t work then. Maybe the 10th link isn&#39;t on the webpage at the time?"}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535035055, "post_id": 51987760, "comment_id": 90926213, "body": "Yup I just got 10 as a output and it didn&#39;t work and said List Index out of range"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535035125, "post_id": 51987760, "comment_id": 90926263, "body": "Well, till now I got a maximum of <b>9</b> only :) but why would you get <i>List Index out of range</i> ? We haven&#39;t hard coded any value ..."}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535035784, "post_id": 51987760, "comment_id": 90926683, "body": "<a href=\"https://imgur.com/a/IgFlTJN\" rel=\"nofollow noreferrer\">imgur.com/a/IgFlTJN</a>   I have no idea why I&#39;m getting this error"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535036432, "post_id": 51987760, "comment_id": 90927093, "body": "Hmmm, <i>Failed to create shader cache entry</i> I suppose is a much finer issue with your system os/chores. See this discussion: <a href=\"https://stackoverflow.com/questions/46393818/failed-to-create-shader-cache-entry-error-while-locating-an-element-by-its-css\">Failed to create shader cache entry- error while locating an element by its Css selector</a> and the linked discussions."}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535036497, "post_id": 51987760, "comment_id": 90927139, "body": "Yaa I tried to fix that error. But I am talking about Line 19 and list out of index. Does the shader error have anything to do with this?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535036663, "post_id": 51987760, "comment_id": 90927255, "body": "I am pretty much confused by the error as we haven&#39;t hardcoded any size for the <i>List</i> as such :( I have executed almost 20 times without any error. Did you <code>from random import randint</code>?"}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535037009, "post_id": 51987760, "comment_id": 90927469, "body": "Yup. I think its because the webpage doesn&#39;t have more then 10 results?"}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535037187, "post_id": 51987760, "comment_id": 90927599, "body": "Ya it only happens when the code RandomNumber is = to 10. All the other numbers work fine"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535037314, "post_id": 51987760, "comment_id": 90927685, "body": "See <code>myRandomNumber</code> is calculated from the <i>List</i> length, so <code>my_search_list[myRandomNumber]</code> can&#39;t be <b>out of range</b> anyway."}, {"owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535038012, "post_id": 51987760, "comment_id": 90928151, "body": "I tried with searching for youtube instead of selenium. So far it has not gotten to using 10.I think it was a problem with the search?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "edited": false, "score": 0, "creation_date": 1535038092, "post_id": 51987760, "comment_id": 90928201, "body": "Exactly, I even didn&#39;t cross 9 for once."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1535033184, "creation_date": 1535033184, "answer_id": 51987760, "question_id": 51976238, "link": "https://stackoverflow.com/questions/51976238/how-to-click-a-random-link-from-google-search-results-through-selenium-and-pytho/51987760#51987760", "title": "How to click a random link from google search results through Selenium and Python", "body": "<p>As per your question to <code>click()</code> on a random link from google search results, as per your <em>code trial</em> if you invoke <code>window.scrollTo(0, 873)</code> and then invoke <code>click()</code> as in:</p>\n\n<pre><code>find_element(By.XPATH, '(//h3)[3]/a').click()`\n</code></pre>\n\n<p><em>Selenium</em> will still try to attempt <code>click()</code> on the first match, which may not be your desired <em>usecase</em>.</p>\n\n<h2>Solution</h2>\n\n<p>Inorder to <code>click()</code> on a random link from google search results, you can create a <em>List</em> out of the <em>search results</em> and then generate a <em>Random Number</em> and invoke <code>click()</code> through an <em>index</em> as follows:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys \nfrom random import randint\n\noptions = webdriver.ChromeOptions() \noptions.add_argument(\"start-maximized\")\noptions.add_argument('disable-infobars')\nbrowser=webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe')\nbrowser.get('http://www.google.com')\nsearch = browser.find_element_by_name('q')\nsearch.send_keys(\"selenium\")\nsearch.send_keys(Keys.RETURN)\nmy_search_list = WebDriverWait(browser, 10).until(EC.visibility_of_all_elements_located((By.XPATH, \"//h3[@class='r']/a[not(ancestor::div[@class='xIleA'])]\")))\nmyRandomNumber = randint(0, len(my_search_list))\nprint(myRandomNumber)\nmy_search_list[myRandomNumber].click()\n</code></pre></li>\n<li><p>Console Output:</p>\n\n<pre><code>4\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 183, "user_id": 10262036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dcqVxYUIqGA/AAAAAAAAAAI/AAAAAAAAAFs/0ay_lVpRcXY/photo.jpg?sz=128", "display_name": "Kunwar Sodhi", "link": "https://stackoverflow.com/users/10262036/kunwar-sodhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 0, "accepted_answer_id": 51987760, "answer_count": 1, "score": 0, "last_activity_date": 1535123649, "creation_date": 1534978479, "last_edit_date": 1535123649, "question_id": 51976238, "link": "https://stackoverflow.com/questions/51976238/how-to-click-a-random-link-from-google-search-results-through-selenium-and-pytho", "title": "How to click a random link from google search results through Selenium and Python", "body": "<p>Currently using Selenium+ Python and this code: </p>\n\n<pre><code>browser.get('http://www.google.com')\nsearch = browser.find_element_by_name('q')\nsearch.send_keys(\"how to search the internet\")\nsearch.send_keys(Keys.RETURN) # hit return after you enter search text\ntime.sleep(5) # sleep for 5 seconds so you can see the results\nbrowser.execute_script(\"window.scrollTo(0, 873)\") \ntime.sleep(2)\nbrowser.find_element(By.XPATH, '(//h3)[3]/a').click()`\n</code></pre>\n\n<p>as my code. </p>\n\n<p>What Happens: Goes to Google and types in the words and hits search. Scrolls down a bit and then it clicks the first link</p>\n\n<p>What I want: I want to be able to click a random link from the search result page</p>\n\n<p>How to do this? </p>\n\n<p>Edit: This is what I meant when I said unnecessary:\nUnnecessary 1: <a href=\"https://imgur.com/a/70qz89x\" rel=\"nofollow noreferrer\">https://imgur.com/a/70qz89x</a></p>\n\n<p>Unnecessary 2: <a href=\"https://imgur.com/a/8WWvcnC\" rel=\"nofollow noreferrer\">https://imgur.com/a/8WWvcnC</a> </p>\n\n<p>These are the only results I want: \nThis: <a href=\"https://imgur.com/a/eTatFV9\" rel=\"nofollow noreferrer\">https://imgur.com/a/eTatFV9</a></p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534980119, "post_id": 51976204, "comment_id": 90903070, "body": "What is <code>[1,3]</code> in your output ?"}, {"owner": {"reputation": 509, "user_id": 3226016, "user_type": "registered", "profile_image": "https://graph.facebook.com/3329336/picture?type=large", "display_name": "Ilya", "link": "https://stackoverflow.com/users/3226016/ilya"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534980701, "post_id": 51976204, "comment_id": 90903172, "body": "That is the data2 values from df2 that have overlapping span. Span (1,50), which corresponds to data2=1, and (0,90), which corresponds to data2=3, overlap the first 4 spans in df1 [(0,3) (10,17) (20,30) (33,39)]."}], "answers": [{"comments": [{"owner": {"reputation": 509, "user_id": 3226016, "user_type": "registered", "profile_image": "https://graph.facebook.com/3329336/picture?type=large", "display_name": "Ilya", "link": "https://stackoverflow.com/users/3226016/ilya"}, "edited": false, "score": 1, "creation_date": 1535043666, "post_id": 51977555, "comment_id": 90931399, "body": "Hi, this solution seems significantly slower than even my code. Testing with 1000 records my solution is 9.02s, the solution you proposed is 90.4s, about 10x slower. I edited my post with how to generate arbitrary amount of fake data."}, {"owner": {"reputation": 832, "user_id": 1094587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ed2da153d349816354af0a4441df21?s=128&d=identicon&r=PG", "display_name": "Ghasem Naddaf", "link": "https://stackoverflow.com/users/1094587/ghasem-naddaf"}, "reply_to_user": {"reputation": 509, "user_id": 3226016, "user_type": "registered", "profile_image": "https://graph.facebook.com/3329336/picture?type=large", "display_name": "Ilya", "link": "https://stackoverflow.com/users/3226016/ilya"}, "edited": false, "score": 0, "creation_date": 1535046299, "post_id": 51977555, "comment_id": 90932665, "body": "Apparently your original <code>overlap</code> recursive function is faster than a second row-wise apply on df2."}], "tags": [], "owner": {"reputation": 832, "user_id": 1094587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ed2da153d349816354af0a4441df21?s=128&d=identicon&r=PG", "display_name": "Ghasem Naddaf", "link": "https://stackoverflow.com/users/1094587/ghasem-naddaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1534991258, "creation_date": 1534991258, "answer_id": 51977555, "question_id": 51976204, "link": "https://stackoverflow.com/questions/51976204/pandas-dataframe-merge-by-intersection-of-spans/51977555#51977555", "title": "Pandas dataframe, merge by intersection of spans?", "body": "<p>When it comes to pandas dataframe, you should always avoid <code>for</code> loops to process rows/columns and use <code>apply</code>, <code>transform</code> or other pandas functions. For example to get the overlaps you can do:</p>\n\n<pre><code>def has_overlap(a1, a2, b1, b2):\n    ''' return True if spans overlap, otherwise return False '''\n    return (a2-a1)+(b2-b1)+min(a1,b1)-max(b2,a2)+1 &gt; 0\n\ndef find_overlap(row1):\n    '''return indices of df2 which overlap with the given row of df1 as a list'''\n    df2['has_overlap'] = df2.apply(lambda row2: has_overlap(row1.s, row1.e, row2.s, row2.e), axis=1)\n    return list(df2['data2'].loc[df2['has_overlap']])\n\ndf1['data2'] = df1.apply(lambda row: find_overlap(row), axis=1)\nprint('df1: {}'.format(df1))\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 3226016, "user_type": "registered", "profile_image": "https://graph.facebook.com/3329336/picture?type=large", "display_name": "Ilya", "link": "https://stackoverflow.com/users/3226016/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535043727, "creation_date": 1534978266, "last_edit_date": 1535043727, "question_id": 51976204, "link": "https://stackoverflow.com/questions/51976204/pandas-dataframe-merge-by-intersection-of-spans", "title": "Pandas dataframe, merge by intersection of spans?", "body": "<p>I would like to merge two dataframes based on overlap of spans (indicated by pairs (s,e), s- start of span, e - end of span), and while I have a pretty bad code for doing it, I would like to know if there is a good way to implement it. Here is example:</p>\n\n<pre><code>df1 = pd.DataFrame({'s':[0,10,20,33,424,5345],\n                'e':[3,17,30,39,1000,10987],\n                'data1':[1,2,3,4,5,6]})\n\ndf2 = pd.DataFrame({'s':[1,45,0],\n                    'e':[50,46,90],\n                    'data2':[1,2,3]})\n\ndef overlap(a1,a2,b1,b2):\n    if type(b1) == list or type(b1)==np.ndarray:\n        assert(len(b1)==len(b2))\n        return np.asarray([overlap(a1,a2,b1[k],b2[k]) for k in range(len(b1))])\n    else:\n        return max((a2-a1)+(b2-b1)+min(a1,b1)-max(b2,a2)+1,0)\n\noverlaps = [overlap(df1['s'].iloc[i],df1['e'].iloc[i],df2['s'].values,df2['e'].values)&gt;0 \n        for i in range(len(df1))]\ndf1['data2']=[df2['data2'][o].tolist() for o in overlaps]\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>    s   e   data1   data2\n0   0   3   1   [1, 3]\n1   10  17  2   [1, 3]\n2   20  30  3   [1, 3]\n3   33  39  4   [1, 3]\n4   424 1000    5   []\n5   5345    10987   6   []\n</code></pre>\n\n<p>Edit: also, in my particular case I am guaranteed that for df1 spans are non-overlapping and sequential (ie s[i]>s[i-1], e[i]>s[i], e[i] &lt; s[i+1] )</p>\n\n<p>Edit2: you can generate arbitrary amount of almost valid fake data (here we don't have guarantees on non-overlapping of spans in first df):</p>\n\n<pre><code>N=int(1e3)\nsdf1=np.random.randint(0, high=10*N, size=(N,))\nsdf1.sort()\nedf1=sdf1+np.random.randint(1, high=10, size=(N,))\ndata1=range(N)\n\nsdf2=np.random.randint(0, high=10*N, size=(N,))\nedf2=sdf2+np.random.randint(1, high=10, size=(N,))\ndata2=range(N)\n\n\ndf1 = pd.DataFrame({'s':sdf1,\n                    'e':edf1,\n                    'data1':data1})\n\ndf2 = pd.DataFrame({'s':sdf2,\n                    'e':edf2,\n                    'data2':data2})\n</code></pre>\n"}, {"tags": ["python", "google-translate", "google-translation-api"], "answers": [{"tags": [], "owner": {"reputation": 1209, "user_id": 5091538, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2IjhGscDJ-U/AAAAAAAAAAI/AAAAAAAAA8Q/_8EKfx7taqI/photo.jpg?sz=128", "display_name": "H&#233;ctor Neri", "link": "https://stackoverflow.com/users/5091538/h%c3%a9ctor-neri"}, "is_accepted": false, "score": 0, "last_activity_date": 1539206825, "creation_date": 1539206825, "answer_id": 52749034, "question_id": 51976180, "link": "https://stackoverflow.com/questions/51976180/phrase-based-translation-at-google-api-pbmt/52749034#52749034", "title": "Phrase-based translation at Google API PBMT", "body": "<p>tl;dr: It's not possible. </p>\n\n<p>The parameters you can specify in a Translation Request are only the ones listed in the <a href=\"https://cloud.google.com/translate/docs/reference/translate\" rel=\"nofollow noreferrer\">Translate Method reference</a>.</p>\n\n<p>If you're interested, Google released <a href=\"https://cloud.google.com/translate/automl/\" rel=\"nofollow noreferrer\">Cloud AutoML Translate</a>, which allows to train models using sentence pairs. Its model is not phrase-based though, so it may be not what you exactly want.</p>\n\n<p>For phrase-based model specifically, the only (long-shot) alternative is to go to the <a href=\"https://translate.google.com/community\" rel=\"nofollow noreferrer\">Google Translation Community</a> to provide your own pairs / mappings and wait until Google enhances the Phrase-based model.</p>\n"}], "owner": {"reputation": 41, "user_id": 3914782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvzzi.png?s=128&g=1", "display_name": "zabe", "link": "https://stackoverflow.com/users/3914782/zabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539206825, "creation_date": 1534978065, "last_edit_date": 1535139153, "question_id": 51976180, "link": "https://stackoverflow.com/questions/51976180/phrase-based-translation-at-google-api-pbmt", "title": "Phrase-based translation at Google API PBMT", "body": "<p>I am trying to use phrase-based machine translation as provided by the Google API (PBMT).  </p>\n\n<p>Is it possible to provide Google with my own mappings of terms between languages, thus extending their phrase table? </p>\n\n<p>Thank you! \ncheers\nzabe</p>\n"}, {"tags": ["python", "nginx", "debian", "stretch", "certbot"], "answers": [{"tags": [], "owner": {"reputation": 42, "user_id": 5329869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207432600116158/picture?type=large", "display_name": "Matias Salinas", "link": "https://stackoverflow.com/users/5329869/matias-salinas"}, "is_accepted": false, "score": 0, "last_activity_date": 1539972254, "creation_date": 1539972254, "answer_id": 52897787, "question_id": 51976179, "link": "https://stackoverflow.com/questions/51976179/install-lets-encrypt-certbot-on-debian9-with-nginx/52897787#52897787", "title": "Install Let&#39;s encrypt/Certbot on Debian9 with Nginx", "body": "<p>Do you have the cd-rom? </p>\n\n<pre><code>deb cdrom:[Debian GNU/Linux 9.4.0 _Stretch_ - Official amd64 DVD Binary-1 20180310-11:21]/ stretch contrib main\n</code></pre>\n\n<p>you could try comment this line and apply a </p>\n\n<pre><code>sudo apt-get update\n</code></pre>\n\n<p>and try install again <strong>python3-certbox-nginx</strong></p>\n"}, {"tags": [], "owner": {"reputation": 644, "user_id": 3928678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gy7ef.jpg?s=128&g=1", "display_name": "cecil merrel aka bringrainfire", "link": "https://stackoverflow.com/users/3928678/cecil-merrel-aka-bringrainfire"}, "is_accepted": false, "score": 0, "last_activity_date": 1539984348, "creation_date": 1539984348, "answer_id": 52900108, "question_id": 51976179, "link": "https://stackoverflow.com/questions/51976179/install-lets-encrypt-certbot-on-debian9-with-nginx/52900108#52900108", "title": "Install Let&#39;s encrypt/Certbot on Debian9 with Nginx", "body": "<p>Installing and setting up letsencrypt for nginx with debian 9</p>\n\n<pre><code>sudo apt install python-certbot-nginx\n</code></pre>\n\n<p>after installing we then run it</p>\n\n<pre><code>sudo certbot --authenticator webroot --installer nginx\n</code></pre>\n\n<p>Accept the agreement, then select the domain to secure, next input a valid email address tied to the domain, then for the part that asks for the webroot insert..</p>\n\n<pre><code>/var/www/example.com/public\n</code></pre>\n\n<p>Select option 2 for secure.</p>\n\n<p>After that a free Letsencrypt certificate will have been installed onto the server and is good for three months</p>\n\n<p>Next test it out by going to your browser and typing in <a href=\"https://example.com\" rel=\"nofollow noreferrer\">https://example.com</a></p>\n\n<p>After that then add http2 to the /etc/sites-available/example.com at the certbot controlled point like so</p>\n\n<pre><code>listen 443 ssl http2; # managed by Certbot\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>sudo nginx -t\nsudo systemctl restart nginx\n</code></pre>\n\n<p>Now the server will be serving http2 protocol</p>\n\n<p>This can be verified by using chrome\u2019s net-internals page by pasting the following into a new //tab with your domain loaded in another one.</p>\n\n<pre><code>chrome://net-internals/#http2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 961, "user_id": 908570, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e50b9c31a0fc983dd33ce6e12dbe4fae?s=128&d=identicon&r=PG", "display_name": "Bryan", "link": "https://stackoverflow.com/users/908570/bryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562274343, "creation_date": 1562274343, "answer_id": 56894211, "question_id": 51976179, "link": "https://stackoverflow.com/questions/51976179/install-lets-encrypt-certbot-on-debian9-with-nginx/56894211#56894211", "title": "Install Let&#39;s encrypt/Certbot on Debian9 with Nginx", "body": "<p>The instructions you refer to includes another step to add backports\n<a href=\"https://backports.debian.org/Instructions/\" rel=\"nofollow noreferrer\">https://backports.debian.org/Instructions/</a></p>\n\n<p>And that page says to add backports to your sources.list.  To add <code>deb http://deb.debian.org/debian stretch-backports main</code> to sources.list.</p>\n\n<p>Here is one way to do that and then install certbot...</p>\n\n<pre><code>echo \"deb http://deb.debian.org/debian stretch-backports main\" | tee -a /etc/apt/sources.list\napt-get update\napt-get install certbot python-certbot-apache -t stretch-backports\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4946956, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-WFENexBP_Jc/AAAAAAAAAAI/AAAAAAAAAHo/iX8jiYMTPnA/photo.jpg?sz=128", "display_name": "Baraque Obahamas", "link": "https://stackoverflow.com/users/4946956/baraque-obahamas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1881, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1562274343, "creation_date": 1534978064, "last_edit_date": 1534988518, "question_id": 51976179, "link": "https://stackoverflow.com/questions/51976179/install-lets-encrypt-certbot-on-debian9-with-nginx", "title": "Install Let&#39;s encrypt/Certbot on Debian9 with Nginx", "body": "<p>I tried to follow <a href=\"https://certbot.eff.org/lets-encrypt/debianstretch-nginx\" rel=\"noreferrer\">this document</a>, but I have this result:</p>\n\n<blockquote>\n  <p>root@debian:~# apt-get install python-certbot-nginx -t stretch-backports \n  Reading package lists... Done Building dependency\n  tree Reading state information... Done Some packages could not be\n  installed. This may mean that you have requested an impossible\n  situation or if you are using the unstable distribution that some\n  required packages have not yet been created or been moved out of\n  Incoming. The following information may help to resolve the situation:</p>\n  \n  <p>The following packages have unmet dependencies:  python-certbot-nginx\n  : Depends: python3-certbot-nginx but it is not going to be installed\n  E: Unable to correct problems, you have held broken packages.</p>\n</blockquote>\n\n<p>And when I try to install <strong>python3-certbox-nginx</strong>:</p>\n\n<blockquote>\n  <p>Some packages could not be installed. This may mean that you have\n  requested an impossible situation or if you are using the unstable\n  distribution that some required packages have not yet been created or\n  been moved out of Incoming. The following information may help to\n  resolve the situation:</p>\n  \n  <p>The following packages have unmet dependencies:  python3-certbot-nginx\n  : Depends: certbot (>= 0.25.0~) but it is not going to be installed\n                           Depends: python3-acme but it is not going to be installed\n                           Depends: python3-certbot but it is not going to be installed\n                           Depends: python3-mock but it is not installable\n                           Depends: python3-openssl (>= 0.13) but it is not installable\n                           Depends: python3-pyparsing (>= 1.5.5) but it is not installable\n                           Depends: python3-zope.interface but it is not installable E: Unable to correct problems, you have held broken\n  packages.</p>\n</blockquote>\n\n<p>I added the backports dep in my sources.list and ran <code>apt-get update</code>.</p>\n\n<p>Here is my <a href=\"https://pastebin.com/7f7eahgC\" rel=\"noreferrer\">sources.list</a>.</p>\n\n<p><code>python -V</code> says <strong>Python 2.7.13</strong>, but Python 3 is also installed.</p>\n"}, {"tags": ["python", "yaml", "pyyaml"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1534979270, "post_id": 51976149, "comment_id": 90902898, "body": "Your value for <code>c</code> should probably have spaces after the colons (<code>{x: 1, y: 1}</code>). I am not sure if PyYAML parses that properly. Does this have to be with PyYAML (i.e. do you only want support for the outdated YAML 1.1 standard)? My ruamel.yaml round-trips this &quot;out-of-the-box&quot; with only having to specify 4 indents for mappings."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10261938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af056bf2902302d0198d28cd5e543d3?s=128&d=identicon&r=PG&f=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/10261938/sparrow"}, "edited": false, "score": 0, "creation_date": 1534986976, "post_id": 51976475, "comment_id": 90904295, "body": "Thank you so much! Your package did exactly what I needed."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 1, "last_activity_date": 1535000686, "last_edit_date": 1535000686, "creation_date": 1534980539, "answer_id": 51976475, "question_id": 51976149, "link": "https://stackoverflow.com/questions/51976149/mixing-block-and-flow-formatting-in-yaml-with-python/51976475#51976475", "title": "Mixing block and flow formatting in YAML with Python", "body": "<p>You should probably look beyond PyYAML, one of the problems is that it constructs your <code>{x:1, y:1}</code>  to the Python dict  <code>{\"x\": 1, \"y\": 1}</code> where it should be construct to <code>{\"x:1\": None, \"y:1\": None}</code>, as there is no space after the colon and the scalars are not double quoted. </p>\n\n<p>Assuming you want the first Python representation, even if you rather not change your YAML to be correct and rely on the faulty interpretation thereof by PyYAML, PyYAML is not going to dump that without the extra space after the colon, thus changing your files.</p>\n\n<p>I suggest you look at ruamel.yaml (disclaimer: I am the author of that package) where you only extra thing apart from correcting your input YAML, is to to set the indent for mappings to 4 (as the default is 2).</p>\n\n<p>ruamel.yaml also supports having nested flow style nodes under block style where PyYAML only supports all-flow (<code>default-flow-style=True</code>), all-block (<code>default-flow-style=False</code>)or all-block-with-collection-leaf-nodes-flow (the default) out-of-the-box</p>\n\n<pre><code>import sys\nimport ruamel.yaml\n\nyaml_str = \"\"\"\\\na:\n    b:\n        c: {x: 1, y: 1}  # these need spaces after the colon\n        d: {r1: 2, r2: {r3: 3, r4: 4}}\n        e:\n            f: 1\n            g: 1\n\"\"\"\n\nyaml = ruamel.yaml.YAML()\nyaml.indent(mapping=4)\ndata = yaml.load(yaml_str)\nyaml.dump(data, sys.stdout)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>a:\n    b:\n        c: {x: 1, y: 1}  # these need spaces after the colon\n        d: {r1: 2, r2: {r3: 3, r4: 4}}\n        e:\n            f: 1\n            g: 1\n</code></pre>\n\n<p>And yes, the comment is preserved as well.</p>\n"}], "owner": {"reputation": 23, "user_id": 10261938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af056bf2902302d0198d28cd5e543d3?s=128&d=identicon&r=PG&f=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/10261938/sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1169, "favorite_count": 0, "accepted_answer_id": 51976475, "answer_count": 1, "score": 2, "last_activity_date": 1535000686, "creation_date": 1534977866, "question_id": 51976149, "link": "https://stackoverflow.com/questions/51976149/mixing-block-and-flow-formatting-in-yaml-with-python", "title": "Mixing block and flow formatting in YAML with Python", "body": "<p>I'm trying to change a value nested deeply in a YAML file using Python and pyyaml. I need to preserve the formatting, which is a combination of block and flow.  </p>\n\n<p>I want to change a single value nested in a dictionary several layers deep in the structure. For example, I might change the x value to 2:</p>\n\n<pre><code>a:\n    b:\n        c: {x:1, y:1}\n        d: {r1: 2, r2: 4}\n        e:\n            f: 1\n            g: 1\n</code></pre>\n\n<p>I've been able to import the data, change the value, and dump the file with block formatting or with default formatting, but neither exactly matches the format that I need. Is there a way to either mix the formatting or to only change the target value without re-writing the entire file?</p>\n"}, {"tags": ["python", "ms-access", "sql-insert", "pyodbc"], "comments": [{"owner": {"reputation": 1018, "user_id": 9706678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fj42a.png?s=128&g=1", "display_name": "Jiggles32", "link": "https://stackoverflow.com/users/9706678/jiggles32"}, "edited": false, "score": 0, "creation_date": 1534978840, "post_id": 51976146, "comment_id": 90902804, "body": "Code 0 generally means that a process completed without any errors. Are you finding that the <code>INSERT</code> did not work properly?"}], "answers": [{"tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 2, "last_activity_date": 1534987190, "creation_date": 1534987190, "answer_id": 51977122, "question_id": 51976146, "link": "https://stackoverflow.com/questions/51976146/python-insert-into-ms-access-table/51977122#51977122", "title": "Python - insert into ms access table", "body": "<p>You forgot to commit your changes.</p>\n\n<p>Add</p>\n\n<pre><code>connection.commit() \n</code></pre>\n\n<p>to the end of your code.</p>\n"}], "owner": {"reputation": 83, "user_id": 8814543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82766cf3d9cf54af399d8d4241402bd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vaclav Vlcek", "link": "https://stackoverflow.com/users/8814543/vaclav-vlcek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2332, "favorite_count": 0, "accepted_answer_id": 51977122, "answer_count": 1, "score": 3, "last_activity_date": 1534987190, "creation_date": 1534977861, "question_id": 51976146, "link": "https://stackoverflow.com/questions/51976146/python-insert-into-ms-access-table", "title": "Python - insert into ms access table", "body": "<p>I am able get some data from the ms access by some query, but I am not able to store data into any table, for example: </p>\n\n<pre><code>import sys, os, pyodbc\n\nconn_str = (\n    r'DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};'\n    r'DBQ=C:/Users/vlcek/Desktop/pokusdb.accdb;'\n    )\nconnection = pyodbc.connect(conn_str)\n\n\ncursor = connection.cursor()\n\nsql=\"Insert into people (user_id, Name, Surname) values (27, 'Peter','Jackson')\"\n\ncursor.execute(sql)\n</code></pre>\n\n<p>I do have the table \"people\" already in database...</p>\n\n<p>I am getting this output, I don't know, if it relevant: </p>\n\n<p>The thread 'MainThread' (0x30e4) has exited with code 0 (0x0).</p>\n\n<p>The program '[9696] python.exe' has exited with code 0 (0x0).</p>\n\n<p>Thank you for your help,</p>\n\n<p>Vaclav</p>\n"}, {"tags": ["python", "pandas", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1534984485, "last_edit_date": 1534984485, "creation_date": 1534978919, "answer_id": 51976284, "question_id": 51976145, "link": "https://stackoverflow.com/questions/51976145/python-concatenate-two-columns-but-maintain-fix-length/51976284#51976284", "title": "Python concatenate two columns but maintain fix length", "body": "<p>You may want to convert the numbers to strings before doing anything else, so I assume that <code>col1</code> and <code>col2</code> are strings.</p>\n\n<p>First, find the combined string lengths and how many zeros are missing:</p>\n\n<pre><code>pads = 13 - (df.col1.str.len() + df.col2.str.len())\n</code></pre>\n\n<p>Then generate the necessary paddings and concatenate the columns and the paddings:</p>\n\n<pre><code>df['var3'] = df.col1 + pads.apply(lambda x: x * '0') + df.col2\n#0     1234561234567\n#1     2000000000004\n#2    12345671234567\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534984619, "post_id": 51976821, "comment_id": 90903855, "body": "<code>.str.len()</code> is <i>much</i> faster than <code>.apply(len)</code>. <code>.apply</code> is a very slow method and should be avoided at any cost."}], "tags": [], "owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "is_accepted": false, "score": 1, "last_activity_date": 1535070870, "last_edit_date": 1535070870, "creation_date": 1534984005, "answer_id": 51976821, "question_id": 51976145, "link": "https://stackoverflow.com/questions/51976145/python-concatenate-two-columns-but-maintain-fix-length/51976821#51976821", "title": "Python concatenate two columns but maintain fix length", "body": "<p>For each row, make a tuple with 3 values:</p>\n\n<p>string1</p>\n\n<p>string2</p>\n\n<p>The difference between the length of both strings and 13 (or whatever target length)</p>\n\n<pre><code>x = pd.Series(list(zip(df['col1'].astype(str),\n                       df['col2'].astype(str),\n                       13 - (df['col1'].astype(str) + df['col2'].astype(str)).str.len())))\n</code></pre>\n\n<p>Then use the string method <code>ljust</code> to pad the left string with 0s and add it to the right string. Assign everything to the new column.</p>\n\n<pre><code>df['var3'] = x.apply(lambda x: x[0].ljust(x[2], '0') + x[1])\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 9237237, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c42895a2f14fa1b58cba35003d7ecca6?s=128&d=identicon&r=PG&f=1", "display_name": "Ni_Tempe", "link": "https://stackoverflow.com/users/9237237/ni-tempe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51976284, "answer_count": 2, "score": 1, "last_activity_date": 1535070870, "creation_date": 1534977855, "last_edit_date": 1534978314, "question_id": 51976145, "link": "https://stackoverflow.com/questions/51976145/python-concatenate-two-columns-but-maintain-fix-length", "title": "Python concatenate two columns but maintain fix length", "body": "<p>I have a DataFrame as below. I want to concatenate first 2 columns. </p>\n\n<ul>\n<li>If the length of their concatenation is <code>&lt;13</code> then I would like to add 0s in between so that the length becomes 13.</li>\n<li>If the length of their concatenation is <code>&gt;=13</code> then I just want to concatenate.</li>\n</ul>\n\n<hr>\n\n<pre><code>d = {'col1': [123456, 2, 1234567], 'col2': [1234567, 4, 1234567]}\ndf = pd.DataFrame(data=d)\ndf\ndf['var3'] = df.col1.astype(str) + df.col1.astype(str)\ndf\n</code></pre>\n\n<p>In case of second row, instead of '22' I want 11 0s between 2 and 2. \nI would like to keep the third row as it is as the length of concatenation is <code>&gt;13</code>.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 2, "creation_date": 1534977926, "post_id": 51976137, "comment_id": 90902621, "body": "jeeze, that is so neat!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 5, "last_activity_date": 1534978183, "last_edit_date": 1534978183, "creation_date": 1534977806, "answer_id": 51976137, "question_id": 51976120, "link": "https://stackoverflow.com/questions/51976120/generating-power-of-a-vector-and-putting-it-in-a-matrix-in-numpy-in-a-succint-wa/51976137#51976137", "title": "Generating power of a vector and putting it in a matrix in numpy in a succint way", "body": "<p>You could use <code>broadcasting</code> -</p>\n\n<pre><code>In [60]: [1,2]**np.arange(4)[:,None]\nOut[60]: \narray([[1, 1],\n       [1, 2],\n       [1, 4],\n       [1, 8]])\n</code></pre>\n\n<p>More compact one with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.vander.html\" rel=\"nofollow noreferrer\"><code>np.vander</code></a> as this is basically a <code>vandermode</code> matrix -</p>\n\n<pre><code>In [78]: np.vander([1,2],4,1).T\nOut[78]: \narray([[1, 1],\n       [1, 2],\n       [1, 4],\n       [1, 8]])\n</code></pre>\n\n<p>For <code>matrix</code> type -</p>\n\n<pre><code>In [61]: np.asmatrix([1,2]**np.arange(4)[:,None])\nOut[61]: \nmatrix([[1, 1],\n        [1, 2],\n        [1, 4],\n        [1, 8]])\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51976137, "answer_count": 1, "score": 0, "last_activity_date": 1534978183, "creation_date": 1534977704, "question_id": 51976120, "link": "https://stackoverflow.com/questions/51976120/generating-power-of-a-vector-and-putting-it-in-a-matrix-in-numpy-in-a-succint-wa", "title": "Generating power of a vector and putting it in a matrix in numpy in a succint way", "body": "<p>I want to write a function which takes in  a numpy array (whichever is more convenient) and a number.</p>\n\n<p>The function should return a matrix of this powers from 0 to n.</p>\n\n<p>e.g. if I input [1,2] and 3, the matrix should return</p>\n\n<p>np.matrix([[1, 1], [1, 2], [1, 4], [1, 8]])</p>\n\n<p>I know I can write a loop to do this, but is there a more succinct / fast method? Is there way of writing this using generators?</p>\n"}, {"tags": ["python", "django", "pytest", "uuid", "django-mixer"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7904883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OodJU7FIDbc/AAAAAAAAAAI/AAAAAAAALtM/CQ1n3f9kSxs/photo.jpg?sz=128", "display_name": "Ryan Mahaffey", "link": "https://stackoverflow.com/users/7904883/ryan-mahaffey"}, "is_accepted": false, "score": 0, "last_activity_date": 1535661584, "creation_date": 1535661584, "answer_id": 52105038, "question_id": 51976104, "link": "https://stackoverflow.com/questions/51976104/mixer-blend-module-cannot-properly-create-an-instance-that-is-referencing-cust/52105038#52105038", "title": "Mixer.blend() module cannot properly create an instance that is referencing custom User object with UUID as PK", "body": "<p>It seems that this is a versioning issue as Mixer does not support Django 2.1 yet.</p>\n\n<p>This PR supposedly will fix the issue. Not sure when or if it will be merged, as there have been no updates to the Mixer repo for 5 months.</p>\n\n<p><a href=\"https://github.com/klen/mixer/pull/104\" rel=\"nofollow noreferrer\">Mixer PR for Django 2.1 Support on Github</a></p>\n"}], "owner": {"reputation": 33, "user_id": 7904883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OodJU7FIDbc/AAAAAAAAAAI/AAAAAAAALtM/CQ1n3f9kSxs/photo.jpg?sz=128", "display_name": "Ryan Mahaffey", "link": "https://stackoverflow.com/users/7904883/ryan-mahaffey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 887, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535661584, "creation_date": 1534977546, "question_id": 51976104, "link": "https://stackoverflow.com/questions/51976104/mixer-blend-module-cannot-properly-create-an-instance-that-is-referencing-cust", "title": "Mixer.blend() module cannot properly create an instance that is referencing custom User object with UUID as PK", "body": "<p>I am trying to run tests of my models using pytest. I am having trouble with using mixer on a SQLite3 in \":memory:\" database.</p>\n\n<p>I have a model named Category that has a foreign key attribute called \"created_by\" which references my custom User model. </p>\n\n<p>When assigning the referenced model of User to the category variable in mixer.blend() I get an exception that says that the User instance is not that of a UUID. </p>\n\n<p>See my test below:</p>\n\n<pre><code>import pytest\n\nfrom mixer.backend.django import mixer\nfrom apps.API import models\n\npytestmark = pytest.mark.django_db\n\n\nclass TestCategory():\n    def test_model(self):\n        category = mixer.blend(models.Category)\n        assert category.pk == 1, 'Should create a Category instance'\n</code></pre>\n\n<p>This is very strange as this worked previously (about a week ago). Why can mixer not coerce the UUID from the primary key of my User object?</p>\n\n<p>If anyone has any ideas I am all ears. Below I define my models and show a few stack traces. Hopefully, we can find some insight.</p>\n\n<p>Here is the stack trace in pytest:</p>\n\n<pre><code>self = &lt;django.db.models.fields.UUIDField: id&gt;, value = &lt;User: doliver@smith.com&gt;\n\n    def to_python(self, value):\n        if value is not None and not isinstance(value, uuid.UUID):\n            try:\n&gt;               return uuid.UUID(value)\n\nvenv/lib/python3.6/site-packages/django/db/models/fields/__init__.py:2325:\n\n\nself = &lt;[AttributeError(\"'UUID' object has no attribute 'int'\") raised in repr()] UUID object at 0x7feeebf18f98&gt;, hex = &lt;User: doliver@smith.com&gt;, bytes = None, bytes_le = None\n fields = None, int = None, version = None\n\ndef __init__(self, hex=None, bytes=None, bytes_le=None, fields=None,\n                   int=None, version=None):\n    r\"\"\"Create a UUID from either a string of 32 hexadecimal digits,\n        a string of 16 bytes as the 'bytes' argument, a string of 16 bytes\n        in little-endian order as the 'bytes_le' argument, a tuple of six\n        integers (32-bit time_low, 16-bit time_mid, 16-bit time_hi_version,\n        8-bit clock_seq_hi_variant, 8-bit clock_seq_low, 48-bit node) as\n        the 'fields' argument, or a single 128-bit integer as the 'int'\n        argument.  When a string of hex digits is given, curly braces,\n        hyphens, and a URN prefix are all optional.  For example, these\n        expressions all yield the same UUID:\n\n        UUID('{12345678-1234-5678-1234-567812345678}')\n        UUID('12345678123456781234567812345678')\n        UUID('urn:uuid:12345678-1234-5678-1234-567812345678')\n        UUID(bytes='\\x12\\x34\\x56\\x78'*4)\n        UUID(bytes_le='\\x78\\x56\\x34\\x12\\x34\\x12\\x78\\x56' +\n                      '\\x12\\x34\\x56\\x78\\x12\\x34\\x56\\x78')\n        UUID(fields=(0x12345678, 0x1234, 0x5678, 0x12, 0x34, 0x567812345678))\n        UUID(int=0x12345678123456781234567812345678)\n\n        Exactly one of 'hex', 'bytes', 'bytes_le', 'fields', or 'int' must\n        be given.  The 'version' argument is optional; if given, the resulting\n        UUID will have its variant and version set according to RFC 4122,\n        overriding the given 'hex', 'bytes', 'bytes_le', 'fields', or 'int'.\n        \"\"\"\n\n    if [hex, bytes, bytes_le, fields, int].count(None) != 4:\n        raise TypeError('one of the hex, bytes, bytes_le, fields, '\n                        'or int arguments must be given')\n    if hex is not None:\n&gt;       hex = hex.replace('urn:', '').replace('uuid:', '')\nE       AttributeError: 'User' object has no attribute 'replace'\n\n/usr/lib/python3.6/uuid.py:137: AttributeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = &lt;apps.API.tests.test_models.TestCategory object at 0x7feeef113a58&gt;\n\ndef test_model(self):\n&gt;       category = mixer.blend(models.Category)\n\napps/API/tests/test_models.py:13:\n\nvenv/lib/python3.6/site-packages/mixer/main.py:568: in blend\n    return type_mixer.blend(**values)\nvenv/lib/python3.6/site-packages/mixer/main.py:116: in blend\n    for name, value in defaults.items()\nvenv/lib/python3.6/site-packages/mixer/main.py:116: in &lt;genexpr&gt;\n    for name, value in defaults.items()\nvenv/lib/python3.6/site-packages/mixer/mix_types.py:222: in gen_value\n    return type_mixer.gen_field(field)\nvenv/lib/python3.6/site-packages/mixer/backend/django.py:270: in gen_field\n    return super(TypeMixer, self).gen_field(field)\nvenv/lib/python3.6/site-packages/mixer/main.py:193: in gen_field\n    return self.gen_value(field.name, field, unique=unique)\nvenv/lib/python3.6/site-packages/mixer/main.py:261: in gen_value\n    return self.get_value(field_name, value)\nvenv/lib/python3.6/site-packages/mixer/backend/django.py:218: in get_value\n    return self._get_value(name, value, field)\nvenv/lib/python3.6/site-packages/mixer/backend/django.py:233: in _get_value\n    value = field.scheme.to_python(value)\nvenv/lib/python3.6/site-packages/django/db/models/fields/related.py:874: in to_python\n    return self.target_field.to_python(value)\n\n\nself = &lt;django.db.models.fields.UUIDField: id&gt;, value = &lt;User: doliver@smith.com&gt;\n\n   def to_python(self, value):\n        if value is not None and not isinstance(value, uuid.UUID):\n            try:\n                return uuid.UUID(value)\n            except (AttributeError, ValueError):\n                raise exceptions.ValidationError(\n                    self.error_messages['invalid'],\n                    code='invalid',\n&gt;                   params={'value': value},\n                )\nE               django.core.exceptions.ValidationError: [\"'doliver@smith.com' is not a valid UUID.\"]\n\nvenv/lib/python3.6/site-packages/django/db/models/fields/__init__.py:2330: ValidationError\n</code></pre>\n\n<p>See this last section of code in the above stack trace:</p>\n\n<p>I found that if I change \"value\" in the try block to \"value.id\" that the exception is not thrown. </p>\n\n<pre><code>def to_python(self, value):\n    if value is not None and not isinstance(value, uuid.UUID):\n        try:\n            return uuid.UUID(value)\n        except (AttributeError, ValueError):\n            raise exceptions.ValidationError(\n                    self.error_messages['invalid'],\n                    code='invalid',\n&gt;                   params={'value': value},\n                )\n\nE               django.core.exceptions.ValidationError: \n[\"'doliver@smith.com' is not a valid UUID.\"]\n</code></pre>\n\n<p>My User model is using UUID as its primary key.</p>\n\n<p>Here are the two models (Category and User) that I am using. </p>\n\n<p>My abstract BaseModel inheritance in Category just includes basic information like created_date, is_active, etc.</p>\n\n<p>Category:</p>\n\n<pre><code># django\nfrom django.conf import settings\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\n# models\nfrom apps.API.models.BaseModel import BaseModel\n\n\nclass Category(BaseModel):\n    CATEGORIES = (\n        # choices tuples go here\n    )\n\n    category = models.CharField(_('category'),\n                                choices=CATEGORIES,\n                                max_length=80,\n                                blank=False,\n                                db_index=True\n                                )\n\n    created_by = models.ForeignKey(settings.AUTH_USER_MODEL,\n                                   on_delete=models.SET(\n                                       BaseModel.get_sentinel_user),\n                                   blank=False,\n                                   editable=False,\n                                   db_index=True,\n                                   related_name=(\n                                       'created_categories')\n                                   )\n\n    class Meta:\n        app_label = \"API\"\n        verbose_name = _('Category')\n        verbose_name_plural = _('Categories')\n\n    def __str__(self):\n        return '{}'.format(self.category)\n</code></pre>\n\n<p>Here is my User model:</p>\n\n<pre><code>import uuid\n# django\nfrom django.contrib.auth.models import PermissionsMixin\nfrom django.contrib.auth.models import AbstractBaseUser\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\n# models\nfrom apps.API.models.BaseModel import BaseModel\nfrom apps.API.manager import UserManager\n\n\nclass User(AbstractBaseUser, PermissionsMixin):\n\n    # Use UUID to make the merging of tables much easier if need be.\n    id = models.UUIDField(primary_key=True,\n                          editable=False,\n                          default=uuid.uuid4,\n                          verbose_name='public identifier',)\n    email = models.EmailField(_('email address'), unique=True)\n\n    first_name = models.CharField(_('first name'),\n                                  max_length=255,\n                                  blank=True)\n\n    last_name = models.CharField(_('last name'),\n                                 max_length=255,\n                                 blank=True)\n\n    created_date = models.DateTimeField(_('created date'), \n                                        auto_now_add=True)\n\n    is_active = models.BooleanField(_('active'), default=True)\n    is_superuser = models.BooleanField(_('superuser'), default=False)\n    is_staff = models.BooleanField(_('staff'), default=False)\n\n\n    objects = UserManager()\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = []\n\n    class Meta:\n        app_label = \"API\"\n        verbose_name = _('User')\n        verbose_name_plural = _('Users')\n\n    def __str__(self):\n        return '{}'.format(self.email)\n</code></pre>\n\n<p>I popped into the Django shell and had the same issues with mixer so this is not an issue with pytest.</p>\n\n<pre><code>Traceback (most recent call last):\n\n    File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site- \n        packages/django/db/models/fields/__init__.py\", line 2325, in to_python\n\n        return uuid.UUID(value)\n\n    File \"/usr/lib/python3.6/uuid.py\", line 137, in __init__\n        hex = hex.replace('urn:', '').replace('uuid:', '')\n\nAttributeError: 'User' object has no attribute 'replace'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n     File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/main.py\", line 568, in blend\n\n         return type_mixer.blend(**values)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/main.py\", line 116, in blend\n         for name, value in defaults.items()\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/main.py\", line 116, in &lt;genexpr&gt;\n         for name, value in defaults.items()\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/mix_types.py\", line 222, in gen_value\n         return type_mixer.gen_field(field)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/backend/django.py\", line 270, in gen_field\n\n         return super(TypeMixer, self).gen_field(field)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/main.py\", line 193, in gen_field\n\n         return self.gen_value(field.name, field, unique=unique)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/main.py\", line 261, in gen_value\n\n         return self.get_value(field_name, value)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/backend/django.py\", line 218, in get_value\n         return self._get_value(name, value, field)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/mixer/backend/django.py\", line 233, in _get_value\n         value = field.scheme.to_python(value)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/django/db/models/fields/related.py\", line 874, in to_python\n\n         return self.target_field.to_python(value)\n\n     File \"/home/users/myname/dev/blah-django-app/venv/lib/python3.6/site-packages/django/db/models/fields/__init__.py\", line 2330, in to_python\n\n         params={'value': value},\n\n     django.core.exceptions.ValidationError: [\"'michaela32@yahoo.com' is not a valid UUID.\"]\n</code></pre>\n"}, {"tags": ["python", "visual-studio", "distutils"], "answers": [{"comments": [{"owner": {"reputation": 10559, "user_id": 891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196fe8fbf131b2b6fc275266d28ee0bc?s=128&d=identicon&r=PG", "display_name": "Zooba", "link": "https://stackoverflow.com/users/891/zooba"}, "edited": false, "score": 0, "creation_date": 1537201287, "post_id": 51977522, "comment_id": 91688618, "body": "Setting <code>MSSdk</code> should be unnecessary as of Python 3.5. <code>DISTUTILS_USE_SDK</code> is the only value required for bypassing detection."}], "tags": [], "owner": {"reputation": 13278, "user_id": 688624, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0714eded10b5ccee614c7134360974b?s=128&d=identicon&r=PG", "display_name": "imallett", "link": "https://stackoverflow.com/users/688624/imallett"}, "is_accepted": false, "score": 0, "last_activity_date": 1534990867, "creation_date": 1534990867, "answer_id": 51977522, "question_id": 51976015, "link": "https://stackoverflow.com/questions/51976015/select-visual-studio-version-in-distutils-setup/51977522#51977522", "title": "Select Visual Studio Version in `distutils.setup(...)`", "body": "<p>The following code sets two environment variables which were (obscurely) documented as a fallback for when the compiler detection fails.</p>\n\n<p>Then, we call \"vcvarsall.bat\".  Python apparently requires the 8.1 Windows SDK, and only the Visual Studio 2017 version of \"vcvarsall.bat\" supports that.  So, we call the 2017 version, but pass <code>-vcvars_ver=12.0</code> to set for 2013.</p>\n\n<pre><code>SET MSSdk=1\nSET DISTUTILS_USE_SDK=1\ncall \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/vcvarsall.bat\" amd64 8.1 -vcvars_ver=12.0\n</code></pre>\n\n<p>Then, you can run your:</p>\n\n<pre><code>python35.exe setup.py build\n</code></pre>\n"}], "owner": {"reputation": 13278, "user_id": 688624, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0714eded10b5ccee614c7134360974b?s=128&d=identicon&r=PG", "display_name": "imallett", "link": "https://stackoverflow.com/users/688624/imallett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1534990867, "creation_date": 1534976911, "question_id": 51976015, "link": "https://stackoverflow.com/questions/51976015/select-visual-studio-version-in-distutils-setup", "title": "Select Visual Studio Version in `distutils.setup(...)`", "body": "<p>I'm trying to build a simple C++ extension module for Blender through their Python API which, as of the latest version, is 3.5.3 (to my knowledge, one cannot change this).  Python 3.5.3 is compiled with MSC v.1800 (i.e., Visual Studio 2013 version 12.0).</p>\n\n<p>I have both Visual Studio 2013 and Visual Studio 2017 installed.  When running <a href=\"https://docs.python.org/3.5/distutils/introduction.html\" rel=\"nofollow noreferrer\"><code>distutils.setup(...)</code></a> in my \"setup.py\" for the extension, it invariably finds only Visual Studio 2017, causing the build to fail (one <em>must</em> match the Visual Studio version to the Python version <sup>[1]</sup> ).</p>\n\n<p><strong>How can I convince <code>distutils.setup(...)</code> to find the Visual Studio corresponding to the Python that's running?</strong></p>\n\n<p>I tried prepending the Visual Studio 2013 path to the <code>PATH</code>, which does nothing.  I also dug into \"Lib/distutils/\" to try to figure it out, but couldn't (looks like it's registry-based, not <code>PATH</code>-based).</p>\n\n<hr>\n\n<p><sub><sup>[1]</sup> Or else, one gets the mysterious, undocumented error <code>LNK1327: failure during running rc.exe</code>.  This is the entire error, though there is also a minor warning before it, <a href=\"https://stackoverflow.com/questions/37596516/warning-lnk4197-export-pyinit-python-module-name-specified-multiple-times-us\">which is apparently normal</a>.</sub></p>\n"}, {"tags": ["python", "python-3.x", "pandas", "datetime"], "owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534976861, "creation_date": 1534976861, "question_id": 51976004, "link": "https://stackoverflow.com/questions/51976004/pd-to-datetime-inserting-random-dates-and-not-comparing-against-todays-date", "title": "pd.to_datetime inserting random dates and not comparing against todays date?", "body": "<p>I have a dataframe with a birth_date column. </p>\n\n<p>df</p>\n\n<pre><code>birth_date:\n1970-01-01 00:00:00\n</code></pre>\n\n<p>The source I am reading the data from is another dataframe and the <code>birth_date</code> datatype is object. </p>\n\n<p>When I go to convert the column to date type I get random dates put in. Code:</p>\n\n<pre><code>df['birth_date'] = pd.to_datetime(df['birth_date'], errors='coerce')\n</code></pre>\n\n<p>The exact dates that are getting are: </p>\n\n<pre><code>birth_date\n0   1990-06-11\n1   2017-12-01\n</code></pre>\n\n<p>I have no idea why. </p>\n\n<p>All I want to do is take todays code and see if it is someones birthday and assign an ID. Code so far to do that, it worked, but not sure what is causing it to fail: </p>\n\n<pre><code>df['birth_date'] = pd.to_datetime(df['birth_date'],errors = 'coerce')\n\n#from datetime import date\n#today = str(date.today()) experimenting with this no luck\ntoday = pd.to_datetime('today')\n\n\nSegmentID = np.select( \n    [\n df.birth_date.eq(today) &amp; df['type'].eq('m'),\n\n\n    ],\n    [1],\n    default=np.nan\n)\n\ndf = df.assign(SegmentID=SegmentID).dropna(subset=['SegmentID'])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1535038286, "post_id": 51975996, "comment_id": 90928333, "body": "Handle <code>__doPostBack()</code> call with <code>staleness_of()</code> method following <a href=\"https://stackoverflow.com/questions/49561611/how-do-i-wait-for-a-javascript-dopostback-call-through-selenium-and-webdriver\">How do I wait for a JavaScript __doPostBack call through Selenium and WebDriver</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "is_accepted": false, "score": 0, "last_activity_date": 1534984916, "creation_date": 1534984916, "answer_id": 51976908, "question_id": 51975996, "link": "https://stackoverflow.com/questions/51975996/stale-element-in-selenium-python-3-6/51976908#51976908", "title": "stale element in selenium python 3.6", "body": "<p>Every time the script click one page number in the loop, the page changed and selenium treat it as new page. So those page numbers found on the page before click are invalid on new page.</p>\n\n<p>To fix you problem, simple way is to find page numbers on new page again in each iteration of the loop.</p>\n\n<pre><code>count = 1\nnext_page_string = \"javascript:__doPostBack('ctl00$MainContent$grdResults','Page$\" \n                  + str(count) + \"')\"\ntd_page_number_list = driver.find_elements_by_xpath(\n   \"//*[@id='MainContent_grdResults']/tbody/tr[22]/td/table/tbody/tr/td/a\")\n\nfor x in td_page_number_list:\n  if x.get_attribute(\"href\") == next_page_string:\n    driver.execute_script(\"__doPostBack('ctl00$MainContent$grdResults','Page$\" \n                  + str(count) + \"')\")\n\n    // find page numbers on new page again after click\n    // i think you need to add some wait before find again \n    // like: time.sleep(5) or using selenium wait api\n    td_page_number_list = driver.find_elements_by_xpath(\n           \"//*[@id='MainContent_grdResults']/tbody/tr[22]/td/table/tbody/tr/td/a\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1036, "user_id": 9855588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25aee783cab58b07adb188667fb051?s=128&d=identicon&r=PG&f=1", "display_name": "dataviews", "link": "https://stackoverflow.com/users/9855588/dataviews"}, "is_accepted": false, "score": 0, "last_activity_date": 1535042440, "creation_date": 1535042440, "answer_id": 51990572, "question_id": 51975996, "link": "https://stackoverflow.com/questions/51975996/stale-element-in-selenium-python-3-6/51990572#51990572", "title": "stale element in selenium python 3.6", "body": "<p>I needed a simple <code>break</code> right after the <code>driver.execute_script()</code> method. In fact it was doing the <code>__doPostBack</code>, but the for loop was still executing after the if condition was met. All I needed to do is exit the loop once the condition is met, which you can achieve by using the break condition.</p>\n"}], "owner": {"reputation": 1036, "user_id": 9855588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25aee783cab58b07adb188667fb051?s=128&d=identicon&r=PG&f=1", "display_name": "dataviews", "link": "https://stackoverflow.com/users/9855588/dataviews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535042440, "creation_date": 1534976830, "question_id": 51975996, "link": "https://stackoverflow.com/questions/51975996/stale-element-in-selenium-python-3-6", "title": "stale element in selenium python 3.6", "body": "<p><strong>My code:</strong></p>\n\n<pre><code>count = 1\nnext_page_string = \"javascript:__doPostBack('ctl00$MainContent$grdResults','Page$\" + str(count) + \"')\"\ntd_page_number_list = driver.find_elements_by_xpath(\"//*[@id='MainContent_grdResults']/tbody/tr[22]/td/table/tbody/tr/td/a\")\nfor x in td_page_number_list:\n      if x.get_attribute(\"href\") == next_page_string:\n                driver.execute_script(\"__doPostBack('ctl00$MainContent$grdResults','Page$\" + str(count) + \"')\")\n</code></pre>\n\n<p>The code is breaking when <code>driver object</code> goes to <code>execute_script</code> after the condition is met, giving me error:</p>\n\n<pre><code>stale element reference: element is not attached to the page document\n</code></pre>\n\n<p>It seems like this has something to do with the for loop in use. I have tried the implicit wait with no luck.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534977194, "post_id": 51975995, "comment_id": 90902448, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/5488307/numpy-array-in-python-list\" title=\"numpy array in python list\">stackoverflow.com/questions/5488307/numpy-array-in-python-li&zwnj;&#8203;st</a>"}, {"owner": {"reputation": 59, "user_id": 10261973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0cabbf74c0ebbf6bffbb6f67046e4ac?s=128&d=identicon&r=PG&f=1", "display_name": "some1", "link": "https://stackoverflow.com/users/10261973/some1"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534977307, "post_id": 51975995, "comment_id": 90902466, "body": "I am confused about why the above code works with numpyArray0, but not with numpyArray1, but thank you for the link."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534977345, "post_id": 51975995, "comment_id": 90902471, "body": "I understand; it is not really a dupe, rather a reference. I suggest you remove everything from your code from <code>print(&quot;numpyArray0:&quot;)</code> all the way down and keep <code>numpyArray0 in mainList</code> and <code>numpyArray1 in mainList</code> - to make the question clear and simple."}, {"owner": {"reputation": 59, "user_id": 10261973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0cabbf74c0ebbf6bffbb6f67046e4ac?s=128&d=identicon&r=PG&f=1", "display_name": "some1", "link": "https://stackoverflow.com/users/10261973/some1"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534977848, "post_id": 51975995, "comment_id": 90902596, "body": "yep, done and also fixed an incorrect print"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534995763, "post_id": 51975995, "comment_id": 90905856, "body": "In general an <code>in</code> test is not reliable unless you are clearly comparing object ids (e.g. an object class without the compare method), or the compare method itself is reliable (for your purposes)."}], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1534978419, "post_id": 51976198, "comment_id": 90902731, "body": "Why is <code>mainList in numpyArray0</code> then? And <code>mainList in numpyArray1</code>?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534995483, "post_id": 51976198, "comment_id": 90905803, "body": "As a further test, <code>numpyArray0[:] in mainList</code> raises the ValueError.  The object id&#39;s no longer match, so it goes on to doing the element test."}, {"owner": {"reputation": 82255, "user_id": 226621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ecd473d46f300f81636ee7034c358e2?s=128&d=identicon&r=PG", "display_name": "Alok Singhal", "link": "https://stackoverflow.com/users/226621/alok-singhal"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1534997103, "post_id": 51976198, "comment_id": 90906122, "body": "@DYZ <a href=\"https://stackoverflow.com/questions/18320624/how-does-contains-work-for-ndarrays\" title=\"how does contains work for ndarrays\">stackoverflow.com/questions/18320624/&hellip;</a>"}, {"owner": {"reputation": 82255, "user_id": 226621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ecd473d46f300f81636ee7034c358e2?s=128&d=identicon&r=PG", "display_name": "Alok Singhal", "link": "https://stackoverflow.com/users/226621/alok-singhal"}, "edited": false, "score": 0, "creation_date": 1534997231, "post_id": 51976198, "comment_id": 90906149, "body": "Yeah, pretty surprising :).  From my answer to that question: <a href=\"https://www.mail-archive.com/numpy-discussion@scipy.org/msg31578.html\" rel=\"nofollow noreferrer\">mail-archive.com/numpy-discussion@scipy.org/msg31578.html</a> and <a href=\"https://github.com/numpy/numpy/issues/3016\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/issues/3016</a> are relevant."}], "tags": [], "owner": {"reputation": 82255, "user_id": 226621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ecd473d46f300f81636ee7034c358e2?s=128&d=identicon&r=PG", "display_name": "Alok Singhal", "link": "https://stackoverflow.com/users/226621/alok-singhal"}, "is_accepted": false, "score": 4, "last_activity_date": 1534978234, "creation_date": 1534978234, "answer_id": 51976198, "question_id": 51975995, "link": "https://stackoverflow.com/questions/51975995/numpy-bug-python3/51976198#51976198", "title": "Numpy bug? (python3)", "body": "<p><code>numpyArray0 in mainList</code> calls <code>list.__contains__</code>.  A list's <code>__contains__</code> method calls <code>PyObject_RichCompareBool</code> for each element of the list to check if the elements are equal.  As it happens, <a href=\"https://github.com/python/cpython/blob/v3.7.0/Objects/object.c#L715\" rel=\"nofollow noreferrer\"><code>PyObject_RichCompareBool</code></a> checks for identity equality first, and then does a full comparison.</p>\n\n<p><code>numpyArray0 is mainList[0]</code> returns <code>True</code>, so full comparison is never done.  If full comparison was done, <code>numpy</code> would raise <code>ValueError</code> since a <code>numpy</code> array cannot be interepreted as a boolean.</p>\n\n<p><code>numpyArray1 in mainList</code> shows that as well (since identity comparison fails for <code>numpyArray1</code> vs <code>mainList[0]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "edited": false, "score": 0, "creation_date": 1534985550, "post_id": 51976206, "comment_id": 90904020, "body": "<i>This</i> is the right answer, <i>not</i> the accepted one."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534995340, "post_id": 51976206, "comment_id": 90905775, "body": "It&#39;s a combination of testing for id first, as described in @Alok&#39;s answer, followed by an array equality test - it&#39;s that equality test that produces the value error."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 2, "last_activity_date": 1534978288, "creation_date": 1534978288, "answer_id": 51976206, "question_id": 51975995, "link": "https://stackoverflow.com/questions/51975995/numpy-bug-python3/51976206#51976206", "title": "Numpy bug? (python3)", "body": "<p>Looks like it is a <a href=\"https://github.com/numpy/numpy/issues/10400\" rel=\"nofollow noreferrer\">well-known feature</a> related to the way the <code>==</code> operator is overloaded for Numpy arrays.</p>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1534978461, "post_id": 51976229, "comment_id": 90902737, "body": "Your answer does not explain why <code>numpyArray0 in mainList</code> works."}, {"owner": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1534979037, "post_id": 51976229, "comment_id": 90902845, "body": "as @alok mentions it is essentially short circuited logic at work.  since numpyArray0 is the first item in the mainList it is Ture because it is a single value.  i.e. &gt;&gt;&gt; numpyArray0 in [numpyArray0]  True  &gt;&gt;&gt; numpyArray1 in [numpyArray1] True"}], "tags": [], "owner": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1534979306, "last_edit_date": 1534979306, "creation_date": 1534978404, "answer_id": 51976229, "question_id": 51975995, "link": "https://stackoverflow.com/questions/51975995/numpy-bug-python3/51976229#51976229", "title": "Numpy bug? (python3)", "body": "<p>here the gist:</p>\n\n<pre><code>&gt;&gt;&gt; numpyArray1 in mainList\n....    \nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>this will work:</p>\n\n<pre><code>&gt;&gt;&gt; any([list(numpyArray1) == list(litem)  for litem in mainList])\n</code></pre>\n\n<p><code>True</code></p>\n"}, {"comments": [{"owner": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "edited": false, "score": 0, "creation_date": 1534994234, "post_id": 51976722, "comment_id": 90905554, "body": "why &#39;suspiciously&#39; ?"}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 1, "creation_date": 1535003970, "post_id": 51976722, "comment_id": 90908035, "body": "&quot;Bug&quot; questions almost always get upvoted if they can be replicated.  I imagine trawling bug reports on <code>github</code> and then making questions of them would get a new user some quick rep.  But considering that even in that case, it still produces a useful question and answer I don&#39;t find it too disruptive."}], "tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 0, "last_activity_date": 1534982871, "creation_date": 1534982871, "answer_id": 51976722, "question_id": 51975995, "link": "https://stackoverflow.com/questions/51975995/numpy-bug-python3/51976722#51976722", "title": "Numpy bug? (python3)", "body": "<p>Compare the same operations with <em>lists</em> instead of <em>numpy arrays</em>:</p>\n\n<pre><code>In[171]: mainList = []\nIn[172]: list0 = [1,2,3]\nIn[173]: list1 = [4,5,6]\nIn[174]: mainList.append(list0)\nIn[175]: mainList.append(list1)\nIn[176]: list0 in mainList\nOut[176]: True\nIn[177]: list1 in mainList\nOut[177]: True\n</code></pre>\n\n<p>What am I trying to show with this?</p>\n\n<p>Two things.</p>\n\n<ol>\n<li>That the right answer of OP question gave <a href=\"https://stackoverflow.com/users/4492932/dyz\">DYZ</a>, not <a href=\"https://stackoverflow.com/users/226621/alok-singhal\">Alok Singhal</a>.</li>\n<li>That the OP question is suspiciously similar to the reported bug. Compare with this part of reported issue in <a href=\"https://github.com/numpy/numpy/issues/10400\" rel=\"nofollow noreferrer\">Python member operation does not work on lists because of overloaded ndarray equality #10400</a>:</li>\n</ol>\n\n<blockquote>\n<pre><code>cache = []\ncache.append(numpy.ndarray([1,2,3]))\ncache.append(numpy.ndarray([4,5,6]))\nnumpy.ndarray([4,5,6]) in cache\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 59, "user_id": 10261973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0cabbf74c0ebbf6bffbb6f67046e4ac?s=128&d=identicon&r=PG&f=1", "display_name": "some1", "link": "https://stackoverflow.com/users/10261973/some1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 2, "accepted_answer_id": 51976206, "answer_count": 4, "score": 4, "last_activity_date": 1534982871, "creation_date": 1534976829, "last_edit_date": 1534978084, "question_id": 51975995, "link": "https://stackoverflow.com/questions/51975995/numpy-bug-python3", "title": "Numpy bug? (python3)", "body": "<pre><code>import numpy as np\nmainList = []\nnumpyArray0 = np.array([1,2,3])\nnumpyArray1 = np.array([4,5,6])\nmainList.append(numpyArray0)\nmainList.append(numpyArray1)\n\nprint(\"numpyArray0 in mainList:\")\ntry:\n  print(numpyArray0 in mainList)\nexcept ValueError:\n  print(\"ValueError\")\n\nprint(\"numpyArray1 in mainList:\")\ntry:\n  print(numpyArray1 in mainList)\nexcept ValueError:\n  print(\"ValueError\")\n\nprint(\"mainList in numpyArray0:\")\ntry:\n  print(mainList in numpyArray0)\nexcept ValueError:\n  print(\"ValueError\")\n\nprint(\"mainList in numpyArray1:\")\ntry:\n  print(mainList in numpyArray1)\nexcept ValueError:\n  print(\"ValueError\")\n\nprint(numpyArray1 in mainList)\n</code></pre>\n\n<p>So I have the above code basically it creates 2 numpy arrays inside a normal python list (mainList) and then it checks to see if those 2 arrays are inside the list. The code should output:</p>\n\n<pre><code>numpyArray0 in mainList:\nTrue\nnumpyArray1 in mainList:\n**True**\nmainList in numpyArray0:\nTrue\nmainList in numpyArray1:\nTrue\n**True**\n</code></pre>\n\n<p>But instead of outputing the above it outputs the following:</p>\n\n<pre><code>numpyArray0 in mainList:\nTrue\nnumpyArray1 in mainList:\nValueError\nmainList in numpyArray0:\nTrue\nmainList in numpyArray1:\nTrue\nTraceback (most recent call last):\n  File \"/home/user/Documents/pythonCode/temp.py\", line 31, in &lt;module&gt;\n    print(numpyArray1 in mainList)\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>Am I doing anything incorrectly? \nNote that I tried updating python, numpy, and my os (debian) before running the code.</p>\n"}, {"tags": ["python", "keras", "time-series", "recurrent-neural-network"], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 9415043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdMdk.jpg?s=128&g=1", "display_name": "from keras import michael", "link": "https://stackoverflow.com/users/9415043/from-keras-import-michael"}, "edited": false, "score": 0, "creation_date": 1535043498, "post_id": 51976383, "comment_id": 90931308, "body": "1. I am glad I am using the code correctly. I included the number of records just for the sake of illustration."}, {"owner": {"reputation": 576, "user_id": 9415043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdMdk.jpg?s=128&g=1", "display_name": "from keras import michael", "link": "https://stackoverflow.com/users/9415043/from-keras-import-michael"}, "edited": false, "score": 0, "creation_date": 1535043772, "post_id": 51976383, "comment_id": 90931443, "body": "2. The difficulty I think I am having is with how to define a many-to-one or a many-to-many RNN in Keras. I have seen diagrams where each time step of Y is evaluated, and then the activation is passed to the next time step. I want to be sure I am setting this up correctly."}, {"owner": {"reputation": 576, "user_id": 9415043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdMdk.jpg?s=128&g=1", "display_name": "from keras import michael", "link": "https://stackoverflow.com/users/9415043/from-keras-import-michael"}, "edited": false, "score": 0, "creation_date": 1535044030, "post_id": 51976383, "comment_id": 90931554, "body": "3. This is related to my difficulty from 2 above. If I remove the variable from X and instead include it as a sequence in Y, does Keras automatically use the information from Y at one time step to inform the prediction of Y at the next time step; or is it better to keep the variable in X and just predict the value of that variable at time step 11? Or is it a case of trying both and seeing which performs better?"}, {"owner": {"reputation": 576, "user_id": 9415043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdMdk.jpg?s=128&g=1", "display_name": "from keras import michael", "link": "https://stackoverflow.com/users/9415043/from-keras-import-michael"}, "edited": false, "score": 0, "creation_date": 1535044273, "post_id": 51976383, "comment_id": 90931666, "body": "4. By &#39;resembling&#39;, I meant the same structure as the data I have. I would like to simulate data where an RNN would be expected to outperform a fully-connected network, even just the simplest case. I have tried a few simulations and in each case a fully-connected network and a RNN perform the same. I&#39;ll keep trying and post if I find something helpful."}], "tags": [], "owner": {"reputation": 705, "user_id": 9388279, "user_type": "registered", "profile_image": "https://graph.facebook.com/2103940609632462/picture?type=large", "display_name": "Austin Mackillop", "link": "https://stackoverflow.com/users/9388279/austin-mackillop"}, "is_accepted": true, "score": 4, "last_activity_date": 1534979743, "creation_date": 1534979743, "answer_id": 51976383, "question_id": 51975951, "link": "https://stackoverflow.com/questions/51975951/keras-recurrent-neural-networks-for-multivariate-time-series/51976383#51976383", "title": "Keras Recurrent Neural Networks For Multivariate Time Series", "body": "<ol>\n<li><p>Yes the code used is correct for what you are trying to do. 10 years is the time window used to predict the following year so that should be the number of inputs into your model for each of the 20 variables. The sample size of 100,000 observations is not relevant to the input shape of your model.</p></li>\n<li><p>The way that you had originally shaped the dependent variable Y is correct. You are predicting a window of 1 year for 1 variable and you have 100,000 observations. The key word argument <code>return_sequences=True</code> will cause an error to be thrown because you only have a single LSTM layer. Set this parameter to <code>True</code> if you are implementing multiple LSTM layers and the layer in question is followed by another LSTM layer.</p></li>\n</ol>\n\n<p>I wish I could offer some guidance to 3 but without actually having your dataset I don't know if it's possible to answer this with any sort of certainty. </p>\n\n<p>I will say that LSTM's were designed to address what is know as the the long term dependency problem present in regular RNN's. What this problem boils down to is that as the gap between when the relevant information was observed to the point where that information would be useful grows, the standard RNN will have a harder time learning the relationship between them. Think of predicting a stock price based on 3 days of activity vs an entire year.</p>\n\n<p>This leads into number 4. If I use the term 'resembling' loosely and stretch your time window further out to say 50 years as opposed to 10, the advantages gained from using an LSTM would become more apparent. Although I'm sure that someone more experienced will be able to offer a better answer and I look forward to seeing it.</p>\n\n<p>I found this page helpful for understanding LSTM's:</p>\n\n<p><a href=\"https://colah.github.io/posts/2015-08-Understanding-LSTMs/\" rel=\"nofollow noreferrer\">https://colah.github.io/posts/2015-08-Understanding-LSTMs/</a></p>\n"}], "owner": {"reputation": 576, "user_id": 9415043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdMdk.jpg?s=128&g=1", "display_name": "from keras import michael", "link": "https://stackoverflow.com/users/9415043/from-keras-import-michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1064, "favorite_count": 2, "accepted_answer_id": 51976383, "answer_count": 1, "score": 2, "last_activity_date": 1535052977, "creation_date": 1534976551, "last_edit_date": 1535052977, "question_id": 51975951, "link": "https://stackoverflow.com/questions/51975951/keras-recurrent-neural-networks-for-multivariate-time-series", "title": "Keras Recurrent Neural Networks For Multivariate Time Series", "body": "<p>I have been reading about Keras RNN models (LSTMs and GRUs), and authors seem to largely focus on language data or univariate time series that use training instances composed of previous time steps. The data I have is a bit different. </p>\n\n<p>I have 20 variables measured every year for 10 years for 100,000 persons as input data, and the 20 variables measured for year 11 as output data. What I would like to do is predict the value of one of the variables (not the other 19) for the 11th year.</p>\n\n<p>I have my data structured as <code>X.shape = [persons, years, variables] = [100000, 10, 20]</code> and <code>Y.shape = [persons, variable] = [100000, 1]</code>. Below is my Python code for a LSTM model.</p>\n\n<pre><code>## LSTM model.\n\n# Define model.\n\nnetwork_lstm = models.Sequential()\nnetwork_lstm.add(layers.LSTM(128, activation = 'tanh', \n     input_shape = (X.shape[1], X.shape[2])))\nnetwork_lstm.add(layers.Dense(1, activation = None))\n\n# Compile model.\n\nnetwork_lstm.compile(optimizer = 'adam', loss = 'mean_squared_error')\n\n# Fit model.\n\nhistory_lstm = network_lstm.fit(X, Y, epochs = 25, batch_size = 128)\n</code></pre>\n\n<p>I have four (related) questions, please:</p>\n\n<ol>\n<li><p>Have I coded the Keras model correctly for the data structure I have? The performance I get from a fully-connected network (using flattened data) and from LSTM, GRU, and 1D CNN models are nearly identical, and I don't know if I have made an error in Keras or if a recurrent model is simply not helpful in this case.</p></li>\n<li><p>Should I have Y as a series with shape <code>Y.shape = [persons, years] = [100000, 11]</code>, rather than including the variable in X, which would then have shape <code>X.shape = [persons, years, variables] = [100000, 10, 19]</code>? If so, how can I get the RNN to output the predicted sequence? When I use <code>return_sequences = True</code>, Keras returns an error.</p></li>\n<li><p>Is this the best way to predict with the data I have? Are there better option choices available in the Keras RNN models, or even other models?</p></li>\n<li><p>How could I simulate data resembling the data structure I have so that a RNN model would outperform a fully-connected network?</p></li>\n</ol>\n\n<p>UPDATE:</p>\n\n<p>I have tried a simulation, with what I hope is a very simple case where an RNN should be expected to outperform a FNN. </p>\n\n<p>While the LSTM tends to outperform the FNN when both have less hidden layers (4), the performance becomes identical with more hidden layers (8+). Can anyone think of a better simulation where a RNN would be expected to outperform a FNN with a similar data structure?</p>\n\n<pre><code>from keras import models\nfrom keras import layers\n\nfrom keras.layers import Dense, LSTM\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n</code></pre>\n\n<p>The code below simulates data for 10,000 instances, 10 time steps, and 2 variables. If the second variable has a 0 in the very first time step, then Y is the value of the first variable for the very last time step multiplied by 3. If the second variable has a 1 in the very first time step, then Y is the value of the first variable for the very last time step multiplied by 9. </p>\n\n<p>My hope was that the RNN would keep the value of second variable at the very first time step in memory and use that to know which value (3 or 9) to multiply the the first variable for the very last time step.</p>\n\n<pre><code>## Simulate data.\n\ninstances = 10000\n\nsequences = 10\n\nX = np.zeros((instances, sequences * 2))\n\nX[:int(instances / 2), 1] = 1\n\nfor i in range(instances):\n\n    for j in range(0, sequences * 2, 2):\n\n        X[i, j] = np.random.random()\n\nY = np.zeros((instances, 1))\n\nfor i in range(len(Y)):\n\n    if X[i, 1] == 0:\n\n        Y[i] = X[i, -2] * 3\n\n    if X[i, 1] == 1:\n\n        Y[i] = X[i, -2] * 9\n</code></pre>\n\n<p>Below is code for a FNN:</p>\n\n<pre><code>## Densely connected model.\n\n# Define model.\n\nnetwork_dense = models.Sequential()\nnetwork_dense.add(layers.Dense(4, activation = 'relu', \n     input_shape = (X.shape[1],)))\nnetwork_dense.add(Dense(1, activation = None))\n\n# Compile model.\n\nnetwork_dense.compile(optimizer = 'rmsprop', loss = 'mean_absolute_error')\n\n# Fit model.\n\nhistory_dense = network_dense.fit(X, Y, epochs = 100, batch_size = 256, verbose = False)\n\nplt.scatter(Y[X[:, 1] == 0, :], network_dense.predict(X[X[:, 1] == 0, :]), alpha = 0.1)\nplt.plot([0, 3], [0, 3], color = 'black', linewidth = 2)\nplt.title('FNN, Second Variable has a 0 in the Very First Time Step')\nplt.xlabel('Actual')\nplt.ylabel('Predicted')\n\nplt.show()\n\nplt.scatter(Y[X[:, 1] == 1, :], network_dense.predict(X[X[:, 1] == 1, :]), alpha = 0.1)\nplt.plot([0, 9], [0, 9], color = 'black', linewidth = 2)\nplt.title('FNN, Second Variable has a 1 in the Very First Time Step')\nplt.xlabel('Actual')\nplt.ylabel('Predicted')\n\nplt.show()\n</code></pre>\n\n<p>Below is code for a LSTM:</p>\n\n<pre><code>## Structure X data for LSTM.\n\nX_lstm = X.reshape(X.shape[0], X.shape[1] // 2, 2)\n\nX_lstm.shape\n\n## LSTM model.\n\n# Define model.\n\nnetwork_lstm = models.Sequential()\nnetwork_lstm.add(layers.LSTM(4, activation = 'relu', \n     input_shape = (X_lstm.shape[1], 2)))\nnetwork_lstm.add(layers.Dense(1, activation = None))\n\n# Compile model.\n\nnetwork_lstm.compile(optimizer = 'rmsprop', loss = 'mean_squared_error')\n\n# Fit model.\n\nhistory_lstm = network_lstm.fit(X_lstm, Y, epochs = 100, batch_size = 256, verbose = False)\n\nplt.scatter(Y[X[:, 1] == 0, :], network_lstm.predict(X_lstm[X[:, 1] == 0, :]), alpha = 0.1)\nplt.plot([0, 3], [0, 3], color = 'black', linewidth = 2)\nplt.title('LSTM, FNN, Second Variable has a 0 in the Very First Time Step')\nplt.xlabel('Actual')\nplt.ylabel('Predicted')\n\nplt.show()\n\nplt.scatter(Y[X[:, 1] == 1, :], network_lstm.predict(X_lstm[X[:, 1] == 1, :]), alpha = 0.1)\nplt.plot([0, 9], [0, 9], color = 'black', linewidth = 2)\nplt.title('LSTM, FNN, Second Variable has a 1 in the Very First Time Step')\nplt.xlabel('Actual')\nplt.ylabel('Predicted')\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535014467, "post_id": 51975912, "comment_id": 90913312, "body": "Your use of the terms &quot;headers&quot; is ambiguous."}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535032831, "post_id": 51975912, "comment_id": 90924708, "body": "Good point, edited the question."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535039702, "post_id": 51975912, "comment_id": 90929164, "body": "You&#39;re still talking about print_titles which are something different. As are headers and footers."}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535043845, "post_id": 51975912, "comment_id": 90931473, "body": "Edited the question again."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 1, "creation_date": 1535100046, "post_id": 51975912, "comment_id": 90950184, "body": "So, what&#39;s the question now? <code>[c.value for c in ws.iter_rows(min_row=1, max_row=1)]</code> not sufficient?"}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535121568, "post_id": 51975912, "comment_id": 90963577, "body": "not sure if I&#39;m using this correctly, but <code>print([c.value for c in ws.iter_rows(min_row=1, max_row=1)])</code> gave me <code>AttributeError: &#39;tuple&#39; object has no attribute &#39;value</code>"}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535127249, "post_id": 51975912, "comment_id": 90966912, "body": "Try <code>[c.value for c in next(ws.iter_rows(min_row=1, max_row=1))]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535043959, "post_id": 51981889, "comment_id": 90931521, "body": "Please see the edited question. I&#39;m interested in getting the list of column names (assumably the first row) from an Excel document, not the titles. Sorry for the confusion."}, {"owner": {"reputation": 657, "user_id": 8596297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15ea6ae41503996e47d8d8f3d2357081?s=128&d=identicon&r=PG&f=1", "display_name": "HaR", "link": "https://stackoverflow.com/users/8596297/har"}, "edited": false, "score": 0, "creation_date": 1535096922, "post_id": 51981889, "comment_id": 90948588, "body": "By column name you mean you want to get the Letters of the column?"}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535121754, "post_id": 51981889, "comment_id": 90963705, "body": "I mean the words that label the columns in an Excel worksheet. (<code>City</code>, <code>Population</code>, <code>Country</code> in the updated example worksheet in the question)."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1535127280, "post_id": 51981889, "comment_id": 90966927, "body": "Those are just the values of the cells in the first row."}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535128927, "post_id": 51981889, "comment_id": 90967745, "body": "Ok, thanks for clarifying, @Charlie Clark. I added that to the question to hopefully clear things up."}], "tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 3, "last_activity_date": 1535127535, "last_edit_date": 1535127535, "creation_date": 1535014584, "answer_id": 51981889, "question_id": 51975912, "link": "https://stackoverflow.com/questions/51975912/get-column-names-of-excel-worksheet-with-openpyxl-in-readonly-mode/51981889#51981889", "title": "Get column names of Excel worksheet with OpenPyXL in readonly mode", "body": "<p>Read-only mode provides fast access to any row or set of rows in a worksheet. Use the method <code>iter_rows()</code> to restric the selection. So to get the first row of the worksheet:</p>\n\n<pre><code>rows = ws.iter_rows(min_row=1, max_row=1) # returns a generator of rows\nfirst_row = next(rows) # get the first row\nheadings = [c.value for c in first_row] # extract the values from the cells\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535121826, "post_id": 51999691, "comment_id": 90963740, "body": "Thank you, the <code>for</code> loop does take care of my first question. I ended up creating a list and appending those cell values to the list."}, {"owner": {"reputation": 657, "user_id": 8596297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15ea6ae41503996e47d8d8f3d2357081?s=128&d=identicon&r=PG&f=1", "display_name": "HaR", "link": "https://stackoverflow.com/users/8596297/har"}, "reply_to_user": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535305635, "post_id": 51999691, "comment_id": 91007928, "body": "Glad to hear that, if my answer has fulfilled your question, please select it as the answer."}, {"owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "edited": false, "score": 0, "creation_date": 1535375877, "post_id": 51999691, "comment_id": 91030988, "body": "this takes care of the first part of my question, but do you have a solution for the second part (returning all column names in an openpyxl Read-only workbook)?"}], "tags": [], "owner": {"reputation": 657, "user_id": 8596297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15ea6ae41503996e47d8d8f3d2357081?s=128&d=identicon&r=PG&f=1", "display_name": "HaR", "link": "https://stackoverflow.com/users/8596297/har"}, "is_accepted": true, "score": 10, "last_activity_date": 1535379134, "last_edit_date": 1535379134, "creation_date": 1535096505, "answer_id": 51999691, "question_id": 51975912, "link": "https://stackoverflow.com/questions/51975912/get-column-names-of-excel-worksheet-with-openpyxl-in-readonly-mode/51999691#51999691", "title": "Get column names of Excel worksheet with OpenPyXL in readonly mode", "body": "<p>This will print every thing from row 1;</p>\n\n<pre><code>list_with_values=[]\nfor cell in ws[1]:\n    list_with_values.append(cell.value)\n</code></pre>\n\n<p>If for some reason you want to get a list of the column letters that are filled in you can just:</p>\n\n<pre><code>column_list = [cell.column for cell in ws[1]]\n</code></pre>\n\n<p>For your 2nd question;\nAssuming you have stored the header values in a list called : \"list_with_values\"</p>\n\n<pre><code>from openpyxl import Workbook\nwb = Workbook()\nws = wb['Sheet']\n#Sheet is the default sheet name, you can rename it or create additional ones with wb.create_sheet()\nws.append(list_with_values)\nwb.save('OutPut.xlsx')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8201905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96820855bb2257068ace1ea4d22abca0?s=128&d=identicon&r=PG&f=1", "display_name": "pete", "link": "https://stackoverflow.com/users/8201905/pete"}, "is_accepted": false, "score": 0, "last_activity_date": 1611002092, "creation_date": 1611002092, "answer_id": 65781700, "question_id": 51975912, "link": "https://stackoverflow.com/questions/51975912/get-column-names-of-excel-worksheet-with-openpyxl-in-readonly-mode/65781700#65781700", "title": "Get column names of Excel worksheet with OpenPyXL in readonly mode", "body": "<p>Charlie Clarks answer compacted down to a one liner with list comprehension</p>\n<pre><code>    headers = [c.value for c in next(wb['sheet_name'].iter_rows(min_row=1, max_row=1))]\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 7781935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBrSk.jpg?s=128&g=1", "display_name": "Ty Hitzeman", "link": "https://stackoverflow.com/users/7781935/ty-hitzeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18761, "favorite_count": 0, "accepted_answer_id": 51999691, "answer_count": 3, "score": 7, "last_activity_date": 1611002092, "creation_date": 1534976251, "last_edit_date": 1535128888, "question_id": 51975912, "link": "https://stackoverflow.com/questions/51975912/get-column-names-of-excel-worksheet-with-openpyxl-in-readonly-mode", "title": "Get column names of Excel worksheet with OpenPyXL in readonly mode", "body": "<p>How could I retrieve </p>\n\n<ol>\n<li>the column names (values of the cells in the first row) in an openpyxl <a href=\"https://openpyxl.readthedocs.io/en/stable/optimized.html\" rel=\"noreferrer\">Read-only</a> <strong>worksheet</strong>? \n\n<ul>\n<li><code>City</code>, <code>Population</code>, <code>Country</code> in the below example worksheet</li>\n</ul></li>\n<li>all column names in an openpyxl Read-only <strong>workbook</strong>?\n\n<ul>\n<li><code>City</code>, <code>Population</code>, <code>Country</code>, frames from worksheet 1 and the other column names from all other worksheets</li>\n</ul></li>\n</ol>\n\n<p>Example Excel worksheet:</p>\n\n<pre><code>| City       | Population  |    Country   |\n| -----------|------------ | ------------ |\n| Madison    |   252,551   |     USA      |\n| Bengaluru  | 10,178,000  |    India     |\n| ...        |       ...   |     ...      |\n</code></pre>\n\n<p>Example code:</p>\n\n<pre><code>from openpyxl import load_workbook\n\nwb = load_workbook(filename=large_file.xlsx, read_only=True)\nsheet = wb.worksheets[0]\n\n... (not sure where to go from here)\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>I have to use readonly because the Excel file has over 1 million rows (don't ask)</li>\n<li>I'd like the column names so I can eventually infer the column types and import the excel data into a PostgreSQL database</li>\n</ul>\n"}, {"tags": ["python", "python-3.x", "tkinter", "overlay"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1534977189, "post_id": 51975792, "comment_id": 90902447, "body": "Show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can play with it. I&#39;m guessing the easiest solution will be to make a function to convert from nested to sequential."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1534977547, "post_id": 51975792, "comment_id": 90902525, "body": "What do you mean by nested exactly? What&#39;s the kind of nesting that you don&#39;t want to eliminate unless there&#39;s absolutely no other way?"}, {"owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "edited": false, "score": 0, "creation_date": 1535034797, "post_id": 51975792, "comment_id": 90926036, "body": "Frame A contains Frame B which contains Frame C. Complexity is managed by placing each frame in it&#39;s own (nested) function.  &quot;Unnesting&quot; destroys the modularity/isolaton enforced by this structure, making the code harder to maintain (you go from a clean structure to a messy one). The screenshots are extremely simplifed versions of what&#39;s in each frame which is why easy maintenance/modification is a basic requirement (e.g. you can move a child frame to a different parent just by moving the function call to the new parent)."}], "answers": [{"comments": [{"owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "edited": false, "score": 0, "creation_date": 1535035143, "post_id": 51976132, "comment_id": 90926275, "body": "It looks like I can&#39;t do what I want using only the basic tkinter widgets. I got too fixated on using .grid - the key is to use .pack when inserting the child frames into the parent frame,"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "edited": false, "score": 0, "creation_date": 1535035400, "post_id": 51976132, "comment_id": 90926433, "body": "@user1459519: it depends on what you mean by &quot;only the basic tkinter widgets&quot;. I don&#39;t see how ttk is any less &quot;basic&quot;. Also, you can use either <code>grid</code> or <code>pack</code> (or even <code>place</code>) to get the same effect. I just used <code>pack</code> for the example because it requires fewer lines of code, and is arguably the right choice when stacking things top-to-bottom."}, {"owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "edited": false, "score": 0, "creation_date": 1535058224, "post_id": 51976132, "comment_id": 90938191, "body": "By basic I meant only using &quot;from tkinter import * &quot; line.  I got it to work using grid. My problem was getting the proper combinaton of  &quot;&#39;grid parameters&quot; (e.g. columnconfigure(), rowconfigure(), padx, pady, sticky, etc.) set properly on ALL of the widgets.  BTW, it should be trivial for the standard widgets to show 1 pixel borders WITHOUT the annoying 3-D shadow coloring. The best I&#39;ve come up with is setting relief = RIDGE and borderwidth = 1 but that doesn&#39;t seem to work on all widgets.  Surely I don&#39;t have to use ttk.separtor and &quot;roll my own&quot; versions of the standard widgets?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "edited": false, "score": 0, "creation_date": 1535058343, "post_id": 51976132, "comment_id": 90938238, "body": "@user1459519: setting relief to solid and a borderwidth of 1 should give you a one pixel border. If the borderwidth is 1, it&#39;s impossible for it to appear as a 3D object with a shadow. You also have the option of a one pixel tall canvas that you can assign any color you want."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 2, "last_activity_date": 1534977781, "creation_date": 1534977781, "answer_id": 51976132, "question_id": 51975792, "link": "https://stackoverflow.com/questions/51975792/make-nested-tkinter-frame-widgets-look-like-one-frame/51976132#51976132", "title": "Make NESTED tkinter frame widgets look like one frame", "body": "<p>Setting the borderwidths of the inner frames to zero and then separating them with a <code>ttk.Separator</code> gives you the look you want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PzWKd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PzWKd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code that produced the above image:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\nroot = tk.Tk()\nroot.geometry(\"250x200\")\n\nouter_frame = tk.Frame(root, borderwidth=2, relief=\"groove\")\nouter_frame.pack(side=\"top\", fill=\"both\", expand=True, padx=20, pady=20)\n\nf1 = tk.Frame(outer_frame, borderwidth=0, highlightthickness=0)\nf2 = tk.Frame(outer_frame, borderwidth=0, highlightthickness=0)\nf3 = tk.Frame(outer_frame, borderwidth=0, highlightthickness=0)\n\ntk.Label(f1, text=\"Child Frame 1\").pack(fill=\"both\", expand=True)\ntk.Label(f2, text=\"Child Frame 2\").pack(fill=\"both\", expand=True)\ntk.Label(f3, text=\"Child Frame 3\").pack(fill=\"both\", expand=True)\n\ns1 = ttk.Separator(outer_frame, orient=\"horizontal\")\ns2 = ttk.Separator(outer_frame, orient=\"horizontal\")\n\nf1.pack(side=\"top\", fill=\"both\", expand=True)\ns1.pack(side=\"top\", fill=\"x\", expand=False)\nf2.pack(side=\"top\", fill=\"both\", expand=True)\ns2.pack(side=\"top\", fill=\"x\", expand=False)\nf3.pack(side=\"top\", fill=\"both\", expand=True)\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "accepted_answer_id": 51976132, "answer_count": 1, "score": 0, "last_activity_date": 1534977781, "creation_date": 1534975539, "question_id": 51975792, "link": "https://stackoverflow.com/questions/51975792/make-nested-tkinter-frame-widgets-look-like-one-frame", "title": "Make NESTED tkinter frame widgets look like one frame", "body": "<p>Is there a simple way to get <strong>nested</strong> frames to look like one frame - preferably using the grid layout manager?  This is relatively easy to do when the frames are <em>not</em> nested (i.e. the frames are children of the <em>same</em> parent widget - see second image).<br>\nThe problem is the (1 pixel?) separation that appears between the \nframes.  Eliminate that and my problem disappears.</p>\n\n<p>In the first image the three vertical lines, the edge boundaries of the nested frames, need to appear as one line (the same thing applies to the horizontal lines at the bottom of the image).  The desired result is a (parent) frame that contains 3 (child) frames - the second image.  </p>\n\n<p>I have these <strong>nested</strong> frames :  <a href=\"https://i.stack.imgur.com/YVCtW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YVCtW.png\" alt=\"Merge these tkinter frame boundaries\"></a>  but need them to look like :    <a href=\"https://i.stack.imgur.com/GWRRv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GWRRv.png\" alt=\"Combined tkinter Frame Boundaries\"></a></p>\n\n<p>BTW, all three child frames were implemented as Frame, not Button widgets.</p>\n\n<p>I've tried playing around with the \"padx\" (zero and negative numbers), \"relief\" (set to FLAT, etc.), and borderwidth (set to 0 and -1) widget properites without success.   </p>\n\n<p>I'm reluctant to re-engineer the app (to use Canvas and/or ttk.Separator) just to fix this small but annoying issue.  And eliminating the nesting is NOT an acceptable approach (unless there's absolutely no other way).</p>\n\n<p>Any suggestions? </p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1534975257, "post_id": 51975737, "comment_id": 90901922, "body": "You did not call the last function : <code>plt.show()</code>."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1534975512, "post_id": 51975737, "comment_id": 90902008, "body": "Problem solved I guess ....."}], "owner": {"reputation": 63, "user_id": 10250212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f082823287f785f4711506b0161be1c3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Maschio", "link": "https://stackoverflow.com/users/10250212/edoardo-maschio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534975125, "creation_date": 1534975125, "question_id": 51975737, "link": "https://stackoverflow.com/questions/51975737/matplotlib-not-showing-result", "title": "matplotlib not showing result", "body": "<p>When I run this little program ( a little experiment to see a linear transformation of a chosen vector), the python launcher icon on my mac starts to activate itself by bouncing on the dock but then nothing is displayed. What is the problem?</p>\n\n<pre><code>import matplotlib.pyplot as plt\ndef linear_transformation(up_sx,up_dx,down_sx,down_dx):\n    x_vect_val=(input('what is the X value of the vector?'))\n    y_vect_val=(input('what is the Y value of the vector?'))\n    x_vect_transfval=str((int(x_vect_val)*str(up_sx))+(int(y_vect_val)*str(up_dx)))\n    y_vect_transfval=str((int(x_vect_val)*str(down_sx))+(int(y_vect_val)*str(down_dx)))\n    xvals=[x_vect_val,x_vect_transfval]\n    yvals=[y_vect_val,y_vect_transfval]\n    plt.plot(xvals,yvals)\n    plt.show\n</code></pre>\n\n<p>It might be some stupid reason that I don't know, I am a beginner</p>\n\n<p>linear_transformation(1,2,0,1)</p>\n\n<p><a href=\"https://i.stack.imgur.com/og6VB.png\" rel=\"nofollow noreferrer\">the icon activating</a></p>\n"}, {"tags": ["python", "matplotlib", "plot", "tkinter", "tcp"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1534975269, "post_id": 51975728, "comment_id": 90901927, "body": "matplotlib includes an animate function that has many examples online; try some of those."}, {"owner": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1534975443, "post_id": 51975728, "comment_id": 90901984, "body": "I have tried most of those, the issue lies in parsing my data so that the animate functions or graphing libraries can take in the values properly and not give me errors because it is receiving strings in the data."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1534975542, "post_id": 51975728, "comment_id": 90902015, "body": "Then show us what you have tried. We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> before we can help you."}, {"owner": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1534975987, "post_id": 51975728, "comment_id": 90902137, "body": "Added what I tried, but it doesn&#39;t really address my issue of receiving the data and plotting it dynamically."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "edited": false, "score": 0, "creation_date": 1534976833, "post_id": 51975954, "comment_id": 90902373, "body": "Thank you for this! The above examples I provided is my complete example of my attempt. I think this is a good skeleton to do what I&#39;m trying to accomplish, but I&#39;m also looking for pointers of how to filter the strings out of my TCP data stream. Because plt won&#39;t process those strings right? and I don&#39;t want them there obviously."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "edited": false, "score": 0, "creation_date": 1534976976, "post_id": 51975954, "comment_id": 90902405, "body": "That&#39;s a different question. Make a new post (mabe better in a beginner forum like learnpython.reddit.com). Be sure to include an example of your TCP data and an example of what you want to extract."}, {"owner": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "edited": false, "score": 0, "creation_date": 1534977454, "post_id": 51975954, "comment_id": 90902501, "body": "Will do! Thanks"}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": false, "score": 0, "last_activity_date": 1534976568, "creation_date": 1534976568, "answer_id": 51975954, "question_id": 51975728, "link": "https://stackoverflow.com/questions/51975728/plotting-incoming-tcp-data-in-real-time-filtering-out-strings/51975954#51975954", "title": "Plotting incoming TCP data in real-time (filtering out strings?)", "body": "<p>Since you won't show us a complete example, all I can do is show you an example I have lying around and hope you can adapt it. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.animation as animation\nimport requests\n\nURL = 'https://poloniex.com/public?command=returnTicker'\n\ndef poloapi():\n    \"\"\"get a single datapoint\n    replace this with your code that returns a single datapoint\"\"\"\n    data = requests.get(URL).json()\n    return float(data['ETH_BCH']['highestBid'])\n\ndef animate(i):\n    ydata.append(poloapi())\n    line.set_data(range(len(ydata)), ydata)\n    plt.ylim(min(ydata), max(ydata))\n    plt.xlim(0, len(ydata))\n    return line,\n\nydata = [poloapi()]\nfig = plt.figure()\nax1 = fig.add_subplot(1,1,1)\nline, = ax1.plot(ydata, marker='o', markersize=10, markerfacecolor='green')\nani = animation.FuncAnimation(fig, animate, interval=30000)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10209725, "user_type": "registered", "profile_image": "https://graph.facebook.com/2156652541052094/picture?type=large", "display_name": "Jon Montgomery", "link": "https://stackoverflow.com/users/10209725/jon-montgomery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1534976568, "creation_date": 1534975049, "last_edit_date": 1534975950, "question_id": 51975728, "link": "https://stackoverflow.com/questions/51975728/plotting-incoming-tcp-data-in-real-time-filtering-out-strings", "title": "Plotting incoming TCP data in real-time (filtering out strings?)", "body": "<p>I'm trying to plot pairs of data values coming in from an instrument over TCP.\nI can successfully receive these values and print them to my UI, but I can't seem to figure out how to plot these values dynamically as they are being received. I've played around with a couple graphing libraries and animate, but the main problem seems to be filtering out the string labels and unwanted characters so I can only plot the float values being received. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    #s.settimeout(10)\n    s.connect((TCP_IP, TCP_PORT))\n    s.sendall(MESSAGE)\n    #s.shutdown(socket.SHUT_WR)\n\n    s.setblocking(0) # set port to nonblocking\n\n    begin=time.time()     \n\n\n    while(1):\n      if loop == 15:\n        text1.insert(END, \"Stopped Recieving Continious Data... Press SEND to continue recieving data \\n\")\n        text1.insert(END, \" To Stop Continious Transimisson, SEND *** 0\")\n        text1.see(\"end\")\n        break;\n    if logData and time.time()-begin &gt; timeout:\n        #print(\"in if 1\")\n        break\n    elif time.time()-begin &gt; timeout*2:\n        #print(\"in if 2\")\n        break\n    try:    \n        logData = s.recv(BUFFER_SIZE).strip('\\t\\r\\n')\n        f.write(logData)\n        f.write('\\n')\n        if logData:\n            udpData(logData) #prints to UI\n            print(repr(logData))\n            begin=time.time()\n            loop = loop + 1\n        else:\n            time.sleep(0.1)\n    except:\n        pass\n\n    # perform filtering of strings here or within while loop try?\n    # x = logData\n\n    #plt.plot(x, color = 'red', marker = 'o', linestyle = 'dashed', linewidth = 2)\n    #plt.show()\n</code></pre>\n\n<p>This function is activated by a send message button press within my UI and receives the data successfully and prints and writes to a file. How would I interpret the data and plot when I send a command that gives me a pair of values like this:</p>\n\n<pre><code>    CCT 1\n    Conc1: 1004.5    Conc2: 3003.2\n    Conc1: 567.4     Conc2: 4034.2\n    ...              ...\n</code></pre>\n\n<p>Also it seems like there is a \\t char after Conc1:, the values, and Conc2:</p>\n\n<p>Thanks for any input or help :)</p>\n\n<p>Plotting function using text file data has been written too, but strings are in that file as above and my animate function will not parse them correctly, but the main problems is doing this as I relieve data and not from the text file I write to. :</p>\n\n<pre><code>    def animate(i):\n       xs = []\n       ys = []\n      with open(\"C:\\\\Users\\\\aeros\\\\Desktop\\\\output6.txt\") as graph_data:\n          for line in graph_data:\n                x, y = line.split(\" \")\n                xs.append(x)\n                ys.append(y)\n\n ax1.clear()\n ax1.plot(xs, ys)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter", "treeview", "grid-layout"], "comments": [{"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 1, "creation_date": 1534975327, "post_id": 51975723, "comment_id": 90901946, "body": "What&#39;s the problem with the alignment there? What should it look like?"}, {"owner": {"reputation": 129, "user_id": 10042774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16ea052ba80cecc1beda9a8247558d84?s=128&d=identicon&r=PG&f=1", "display_name": "Tola", "link": "https://stackoverflow.com/users/10042774/tola"}, "reply_to_user": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 0, "creation_date": 1535006377, "post_id": 51975723, "comment_id": 90909030, "body": "The problem is the added space between the widgets in the lower lines"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 10042774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16ea052ba80cecc1beda9a8247558d84?s=128&d=identicon&r=PG&f=1", "display_name": "Tola", "link": "https://stackoverflow.com/users/10042774/tola"}, "edited": false, "score": 0, "creation_date": 1535020577, "post_id": 51980677, "comment_id": 90916970, "body": "Fantastic. It works smoothly. Thanks a lot for the help."}], "tags": [], "owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "is_accepted": true, "score": 2, "last_activity_date": 1535010189, "creation_date": 1535010189, "answer_id": 51980677, "question_id": 51975723, "link": "https://stackoverflow.com/questions/51975723/tkinter-treeview-widgets-not-properly-aligned-added-space-between-widgets/51980677#51980677", "title": "Tkinter treeview widgets not properly aligned/added space between widgets", "body": "<p>Put the style configuration in the <code>__init__()</code> function and the effect will go away. I'm not clear as to why this works. </p>\n\n<pre><code>def __init__(self):\n...\n    s = ttk.Style()\n    s.configure('MyStyle.Treeview', rowheight=20)\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 10042774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16ea052ba80cecc1beda9a8247558d84?s=128&d=identicon&r=PG&f=1", "display_name": "Tola", "link": "https://stackoverflow.com/users/10042774/tola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 937, "favorite_count": 0, "accepted_answer_id": 51980677, "answer_count": 1, "score": 1, "last_activity_date": 1535010189, "creation_date": 1534975028, "last_edit_date": 1535007471, "question_id": 51975723, "link": "https://stackoverflow.com/questions/51975723/tkinter-treeview-widgets-not-properly-aligned-added-space-between-widgets", "title": "Tkinter treeview widgets not properly aligned/added space between widgets", "body": "<p>I am working on this table in tkinter made from a bunch of treeveiw widgets. The idea is to get a table where I can add lines, select lines and edit them. In the code below you can add lines to the table by pushing the button. I now want to control the height of each row by configuring the style. However, when I use style the alignment of the treeview widgets is messed up, see attached picture. Any suggestions how to fix this?</p>\n\n<p>EDIT: The problem is the added space between the widgets.</p>\n\n<p>The code for the table is:</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\n\n\nclass MyApp(Tk):\n    def __init__(self):\n        super(MyApp, self).__init__()\n\n        self.geometry('950x500+100+100')\n        self.NewTree = []\n\n        label = Label(self,text='Table with some data', font=(\"Arial Bold\", 25))\n        label.pack()\n\n        self.addLine()\n\n        master_frame = Frame(self, bd=3, relief=RIDGE)\n        master_frame.pack(side=BOTTOM)\n\n        # Create a frame for the canvas and scrollbar(s).\n        frame2 = Frame(master_frame)\n        frame2.pack(side = BOTTOM)\n\n        # Add a canvas in that frame.\n        self.canvas = Canvas(frame2)\n        self.canvas.grid(row=0, column=0)\n\n        # Create a vertical scrollbar linked to the canvas.\n        vsbar = Scrollbar(frame2, orient=VERTICAL, command=self.canvas.yview)\n        vsbar.grid(row=0, column=1, sticky=NS)\n        self.canvas.configure(yscrollcommand=vsbar.set)\n\n        # Create a frame on the canvas to contain the buttons.\n        self.table_frame = Frame(self.canvas)\n\n        # Create canvas window to hold the buttons_frame.\n        self.canvas.create_window((0,0), window=self.table_frame, anchor=NW)\n\n    def addLine(self):\n        #Make button for adding step\n        bt = Button(self,text='Add Line',command=lambda: self.addLineMethod())\n        bt.config(width=9, height=1)\n        bt.pack() \n\n\n    def addLineMethod(self):\n\n\n        lineNumber = int(len(self.NewTree)/5)\n\n\n        for index in range(5):\n\n            s = ttk.Style()\n            s.configure('MyStyle.Treeview', rowheight=25)\n            self.NewTree.append(ttk.Treeview(self.table_frame, height=1,show=\"tree\",columns=(\"0\"),style='MyStyle.Treeview'))\n\n            #Works fine when using this line instead of those above\n            #self.NewTree.append(ttk.Treeview(self.table_frame, height=1,show=\"tree\",columns=(\"0\")))\n\n            self.NewTree[index+5*lineNumber].grid(row=lineNumber, column=index+1)\n            self.NewTree[index+5*lineNumber]['show'] = ''\n\n            item = str(index+5*lineNumber)\n            self.NewTree[index+5*lineNumber].column(\"0\", width=180, anchor=\"w\")\n            self.NewTree[index+5*lineNumber].insert(\"\", \"end\",item,text=item,values=('\"Text text text\"'))\n\n\n        self.table_frame.update_idletasks()  # Needed to make bbox info available.\n        bbox = self.canvas.bbox(ALL)  # Get bounding box of canvas with Buttons.\n\n        # Define the scrollable region as entire canvas with only the desired\n        # number of rows and columns displayed.\n        self.canvas.configure(scrollregion=bbox, width=925, height=200)\n\n\napp = MyApp()\napp.mainloop()\n</code></pre>\n\n<p>Her is a picture of the table with some lines.</p>\n\n<p><a href=\"https://i.stack.imgur.com/49wpd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/49wpd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pyqt", "console", "embed", "qprocess"], "answers": [{"comments": [{"owner": {"reputation": 1188, "user_id": 3024197, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/9Lret.jpg?s=128&g=1", "display_name": "v1h5", "link": "https://stackoverflow.com/users/3024197/v1h5"}, "edited": false, "score": 0, "creation_date": 1536647353, "post_id": 51982749, "comment_id": 91487031, "body": "I get a simple gui with no option in it. Is it normal ?  How can I get a normal terminal inside my PyQt5 app ?"}, {"owner": {"reputation": 384, "user_id": 5038009, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10207262991599114/picture?type=large", "display_name": "Du\u0161an Atanackovi\u0107", "link": "https://stackoverflow.com/users/5038009/du%c5%a1an-atanackovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1549888918, "post_id": 51982749, "comment_id": 96053831, "body": "Is it possible to resize embTerminal on any resizeEvent (self.resizeEvent if there&#39;s no parent, or parent.resizeEvent if it&#39;s in some container) ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8513021"}, "edited": false, "score": 0, "creation_date": 1550095457, "post_id": 51982749, "comment_id": 96149212, "body": "I also had that problem and this is the main reason I&#39;ve started developing my own terminal widget <a href=\"https://github.com/Fuchsiaff/PyQtTerminal\" rel=\"nofollow noreferrer\">github.com/Fuchsiaff/PyQtTerminal</a>"}, {"owner": {"reputation": 1812, "user_id": 1714490, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DPfJX.png?s=128&g=1", "display_name": "ZioByte", "link": "https://stackoverflow.com/users/1714490/ziobyte"}, "edited": false, "score": 0, "creation_date": 1565086543, "post_id": 51982749, "comment_id": 101232261, "body": "I had a look to your code, but there is no usage info (I left an &quot;Issue&quot;); how is it supposed to be used?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8513021"}, "is_accepted": true, "score": 3, "last_activity_date": 1612659495, "last_edit_date": 1612659495, "creation_date": 1535017262, "answer_id": 51982749, "question_id": 51975678, "link": "https://stackoverflow.com/questions/51975678/embedding-a-terminal-in-pyqt5/51982749#51982749", "title": "Embedding a terminal in PyQt5", "body": "<p>In PyQt. <code>QWidget.winId()</code> returns a <code>sip.voidptr</code> object, but if you convert it to an integer, it should work. Here's a working example:</p>\n<pre><code>import sys\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import *\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.process = QProcess(self)\n        self.terminal = QWidget(self)\n        layout = QVBoxLayout(self)\n        layout.addWidget(self.terminal)\n        wid = str(int(self.terminal.winId()))\n        self.process.start('urxvt', ['-embed', wid])\n\n    def closeEvent(self, event):\n        self.process.terminate()\n        self.process.waitForFinished(1000)\n\nif __name__ == &quot;__main__&quot;:\n\n    app = QApplication(sys.argv)\n    window = Window()\n    window.setGeometry(100, 100, 800, 600)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8513021"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 1, "accepted_answer_id": 51982749, "answer_count": 1, "score": 2, "last_activity_date": 1612659570, "creation_date": 1534974727, "last_edit_date": 1612659570, "question_id": 51975678, "link": "https://stackoverflow.com/questions/51975678/embedding-a-terminal-in-pyqt5", "title": "Embedding a terminal in PyQt5", "body": "<p>So I've been trying to create my own terminal but that has been proven very glitchy and not professional looking.</p>\n\n<p>Then I stumbled across this code which is for PyQt4:</p>\n\n<pre><code>#!/usr/bin/env python\n#-*- coding:utf-8 -*-\n\nimport sys\nfrom PyQt4.QtCore import *\nfrom PyQt4.QtGui import *\n\n\nclass embterminal(QWidget):\n\n    def __init__(self):\n        QWidget.__init__(self)\n        self.process = QProcess(self)\n        self.terminal = QWidget(self)\n        layout = QVBoxLayout(self)\n        layout.addWidget(self.terminal)\n        #self.process.start(\n                #'xterm',['-into', str(self.terminal.winId())])\n        # Works also with urxvt:\n        self.process.start(\n                'urxvt',['-embed', str(self.terminal.winId())])\n\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    main = embterminal()\n    main.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Since my application is written in PyQt5, I naturally tried porting that code to PyQt5.\nI changed <code>from PyQt4.QtCore import *\nfrom PyQt4.QtGui import *</code> to <code>from PyQt5.QtCore import *\nfrom PyQt5.QtGui import *</code> and added <code>from PyQt5.QtWidgets import *</code></p>\n\n<p>Then when I ran my code I realized the terminal didn't pop up.</p>\n\n<p>I wonder why does this happen and is there a workaround ?</p>\n\n<p>I also wonder if I can use both PyQt5 and PyQt4 in the same project/file, even.</p>\n"}, {"tags": ["python", "json", "serialization", "json-deserialization", "jsonserializer"], "comments": [{"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1534974798, "post_id": 51975664, "comment_id": 90901762, "body": "Who thinks this is too broad and downvoted me? How can I make it more specific? It&#39;s not productive!"}, {"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1534974883, "post_id": 51975664, "comment_id": 90901795, "body": "Have you looked at libraries like <a href=\"https://marshmallow.readthedocs.io/en/3.0/\" rel=\"nofollow noreferrer\">Marshmallow</a> for this?"}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1534974944, "post_id": 51975664, "comment_id": 90901814, "body": "Why would I need an extra library, can I not call json.dumps() and json.load() directly? All I should need to do is implement the right methods in my classes. What am I missing?"}, {"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1534975036, "post_id": 51975664, "comment_id": 90901853, "body": "You don&#39;t strictly <i>need</i> a third-party library, but serialization is more complicated than you appear to think (hence the existence of Marshmallow and other similar libraries). I suggest looking at the link I provided and making your own decision. For example, Marshmallow wants you to define schemas and Django REST Framework wants you to build serializers. Why do you think both of those make you do manual work?"}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1534975196, "post_id": 51975664, "comment_id": 90901909, "body": "Do you have any idea how I would do it in the setup described above? Assuming all fields of those classes are primitive types. Thanks"}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1534975481, "post_id": 51975664, "comment_id": 90901998, "body": "Can I use jsonpickle for this? What are the pros and cons of using marchmallow vs jsonpickle?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534976276, "post_id": 51975664, "comment_id": 90902221, "body": "You <i>can</i> use <code>jsonpickle</code> for this if you want. The advantage of <code>jsonpickle</code> is that you can use it for a wide variety of classes, even classes that do various weird things (almost anything that works with <code>pickle</code>), and get something that&#39;s somewhat human-readable and can be passed around as JSON. Whether that&#39;s what you want or not is a different story. If your classes are rigidly defined according to some set of rules (e.g., they&#39;re all <code>@dataclass</code>es, and equality is fully defined by the dataclass fields), you can write something a lot simpler/safer."}], "answers": [{"comments": [{"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1534979002, "post_id": 51976115, "comment_id": 90902838, "body": "Thanks, exactly what I needed! Couple follow ups: 1) Is dispatcher needed?  2) Can I achieve the same with jsonpickle, what are the pros and cons?"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 1, "creation_date": 1535036742, "post_id": 51976115, "comment_id": 90927310, "body": "@BaronYugovich <code>dispatcher </code> is just one of possible methods. I like to use it because it makes clear which classes are added and why - it limits what the json file can do. You decorate the classes you want, and nobody can handcraft a json file with classes I didn&#39;t plan to &quot;expose&quot;. I don&#39;t have any experience with <code>jsonpickle</code>, the reason I don&#39;t use it on my projects is that it is &quot;too magic&quot;... I like explicit things, like defining which attributes I want to serialize and how I want them in the json file. That said, <code>jsonpickle</code> probably uses some similar approach to this example."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "edited": false, "score": 0, "creation_date": 1559049072, "post_id": 51976115, "comment_id": 99291051, "body": "@user2880391 <code>from some_module import dispatcher</code> if you put it in <code>some_module.py</code>"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1534977633, "creation_date": 1534977633, "answer_id": 51976115, "question_id": 51975664, "link": "https://stackoverflow.com/questions/51975664/serialize-and-deserialize-objects-from-user-defined-classes/51976115#51976115", "title": "Serialize and deserialize objects from user-defined classes", "body": "<p>You can solve this with many methods. One example is to use the <code>object_hook</code> and <code>default</code> parameters to <code>json.load</code> and <code>json.dump</code> respectively.</p>\n\n<p>All you need is to store the class together with the serialized version of the object, then when loading you have to use a mapping of which class goes with which name.</p>\n\n<p>The example below uses a <code>dispatcher</code> class decorator to store the class name and object when serializing, and look it up later when deserializing. All you need is a <code>_as_dict</code> method on each class to convert the data to a dict:</p>\n\n<pre><code>import json\n\n@dispatcher\nclass Parent(object):\n    def __init__(self, name):\n        self.name = name\n\n    def _as_dict(self):\n        return {'name': self.name}\n\n\n@dispatcher\nclass Child1(Parent):\n    def __init__(self, name, n=0):\n        super().__init__(name)\n        self.n = n\n\n    def _as_dict(self):\n        d = super()._as_dict()\n        d['n'] = self.n\n        return d\n\n@dispatcher\nclass Child2(Parent):\n    def __init__(self, name, k='ok'):\n        super().__init__(name)\n        self.k = k\n\n    def _as_dict(self):\n        d = super()._as_dict()\n        d['k'] = self.k\n        return d\n</code></pre>\n\n<p>Now for the tests. First lets create a list with 3 objects of different types.</p>\n\n<pre><code>&gt;&gt;&gt; obj = [Parent('foo'), Child1('bar', 15), Child2('baz', 'works')]\n</code></pre>\n\n<p>Serializing it will yield the data with the class name in each object:</p>\n\n<pre><code>&gt;&gt;&gt; s = json.dumps(obj, default=dispatcher.encoder_default)\n&gt;&gt;&gt; print(s)\n[\n  {\"__class__\": \"Parent\", \"name\": \"foo\"},\n  {\"__class__\": \"Child1\", \"name\": \"bar\", \"n\": 15},\n  {\"__class__\": \"Child2\", \"name\": \"baz\", \"k\": \"works\"}\n]\n</code></pre>\n\n<p>And loading it back generates the correct objects:</p>\n\n<pre><code>obj2 = json.loads(s, object_hook=dispatcher.decoder_hook)\nprint(obj2)\n[\n  &lt;__main__.Parent object at 0x7fb6cd561cf8&gt;, \n  &lt;__main__.Child1 object at 0x7fb6cd561d68&gt;,\n  &lt;__main__.Child2 object at 0x7fb6cd561e10&gt;\n]\n</code></pre>\n\n<p>Finally, here's the implementation of <code>dispatcher</code>:</p>\n\n<pre><code>class _Dispatcher:\n    def __init__(self, classname_key='__class__'):\n        self._key = classname_key\n        self._classes = {} # to keep a reference to the classes used\n\n    def __call__(self, class_): # decorate a class\n        self._classes[class_.__name__] = class_\n        return class_\n\n    def decoder_hook(self, d):\n        classname = d.pop(self._key, None)\n        if classname:\n            return self._classes[classname](**d)\n        return d\n\n    def encoder_default(self, obj):\n        d = obj._as_dict()\n        d[self._key] = type(obj).__name__\n        return d\ndispatcher = _Dispatcher()\n</code></pre>\n"}], "owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1534977633, "creation_date": 1534974629, "last_edit_date": 1534975277, "question_id": 51975664, "link": "https://stackoverflow.com/questions/51975664/serialize-and-deserialize-objects-from-user-defined-classes", "title": "Serialize and deserialize objects from user-defined classes", "body": "<p>Suppose I have class hierarchy like this:</p>\n\n<pre><code>class SerializableWidget(object):\n# some code\n\nclass WidgetA(SerilizableWidget):\n# some code\n\nclass WidgetB(SerilizableWidget):\n# some code\n</code></pre>\n\n<p>I want to be able to serialize instances of <code>WidgetA</code> and <code>WidgetB</code> (and potentially other widgets) to text files as <code>json</code>. Then, I want to be able to deserialize those, without knowing beforehand their specific class:</p>\n\n<pre><code>some_widget = deserielize_from_file(file_path) # pseudocode, doesn't have to be exactly a method like this\n</code></pre>\n\n<p>and <code>some_widget</code> needs to be constructed from the precise subclass of <code>SerilizableWidget</code>. How do I do this? What methods exactly do I need to override/implement in each of the classes of my hierarchy?</p>\n\n<p>Assume all fields of the above classes are primitive types. How do I override some <code>__to_json__</code> and <code>__from_json__</code> methods, something like that?</p>\n"}, {"tags": ["python", "python-asyncio", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 3368722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9ccfeec6f6e3b87603a7aecd01032c8?s=128&d=identicon&r=PG&f=1", "display_name": "LemonPi", "link": "https://stackoverflow.com/users/3368722/lemonpi"}, "edited": false, "score": 0, "creation_date": 1534976400, "post_id": 51975808, "comment_id": 90902252, "body": "Thanks, where did you find this? I couldn&#39;t see it in the official docs: <a href=\"https://docs.python.org/3/library/asyncio-task.html#coroutine\" rel=\"nofollow noreferrer\">docs.python.org/3/library/asyncio-task.html#coroutine</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4396006"}, "edited": false, "score": 0, "creation_date": 1534976554, "post_id": 51975808, "comment_id": 90902306, "body": "Is async def a keyword? How does that work? never seen that"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "edited": false, "score": 0, "creation_date": 1534977971, "post_id": 51975808, "comment_id": 90902633, "body": "@J.C.Rocamonde yes, it is a new keyword, introduced in python 3.5, together with <code>async for</code>, <code>async with</code> and <code>await</code>. see here <a href=\"https://docs.python.org/3/reference/compound_stmts.html#async-def\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/compound_stmts.html#async-def</a>"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 753, "user_id": 3368722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9ccfeec6f6e3b87603a7aecd01032c8?s=128&d=identicon&r=PG&f=1", "display_name": "LemonPi", "link": "https://stackoverflow.com/users/3368722/lemonpi"}, "edited": false, "score": 1, "creation_date": 1535376170, "post_id": 51975808, "comment_id": 91031193, "body": "@LemonPi <code>close</code> and other methods on coroutine objects are documented at <a href=\"https://docs.python.org/3/reference/datamodel.html#coroutine-objects\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/datamodel.html#coroutine-objects</a>"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 1, "last_activity_date": 1534975619, "creation_date": 1534975619, "answer_id": 51975808, "question_id": 51975658, "link": "https://stackoverflow.com/questions/51975658/how-to-abort-created-coroutine-python/51975808#51975808", "title": "How to abort created coroutine python", "body": "<p>Use the <code>.close()</code> method:</p>\n\n<pre><code>async def foo():\n    pass\nx = foo()\nx.close()\n</code></pre>\n\n<p>Program finishes fine, no warnings.</p>\n"}], "owner": {"reputation": 753, "user_id": 3368722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9ccfeec6f6e3b87603a7aecd01032c8?s=128&d=identicon&r=PG&f=1", "display_name": "LemonPi", "link": "https://stackoverflow.com/users/3368722/lemonpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 51975808, "answer_count": 1, "score": 1, "last_activity_date": 1534975619, "creation_date": 1534974616, "question_id": 51975658, "link": "https://stackoverflow.com/questions/51975658/how-to-abort-created-coroutine-python", "title": "How to abort created coroutine python", "body": "<p>How do I abort a created coroutine instance? My use case is a function taking in a coroutine and conditionally creating a tracked task for it (so that all of them could be <code>gather</code>ed later).</p>\n\n<p>Ignoring it (not <code>await</code>ing it directly or indirectly) works, but gives a <code>RuntimeWarning</code>. I'd be OK with a solution that suppresses this warning. </p>\n\n<p>Creating a task then immediately cancelling it starts its execution and the cancellation leads to other issues so it's not workable.</p>\n\n<p>Checking the condition before the coroutines are created works, but damages maintainability since the same check for condition has to be in all the places before this function is called.</p>\n"}, {"tags": ["python", "webserver", "tornado", "gunicorn", "web-frameworks"], "comments": [{"owner": {"reputation": 1305, "user_id": 8440367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCwFQ.jpg?s=128&g=1", "display_name": "jalazbe", "link": "https://stackoverflow.com/users/8440367/jalazbe"}, "edited": false, "score": 0, "creation_date": 1535013301, "post_id": 51975617, "comment_id": 90912671, "body": "This migth help you. <a href=\"https://stackoverflow.com/questions/20766684/what-benefit-is-added-by-using-gunicorn-nginx-flask\" title=\"what benefit is added by using gunicorn nginx flask\">stackoverflow.com/questions/20766684/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "is_accepted": true, "score": 1, "last_activity_date": 1535013640, "creation_date": 1535013640, "answer_id": 51981597, "question_id": 51975617, "link": "https://stackoverflow.com/questions/51975617/common-web-servers-frameworks-for-deploying-python-machine-learning-models/51981597#51981597", "title": "Common web servers/frameworks for deploying python machine learning models?", "body": "<p>I suppose, main reason for choosing a Flask over Tornado as a web-framework to wrap ML is that Flask's is simple but feature-rich (using addons). ML in general is CPU and RAM bound and the main advantage of the Tornado is effective handling of IO-bound operations, which is not the case for ML. But choosing Tornado for ML means more complex development for litte-to-zero benefit. It would be wiser if you have main app in Tornado (if you really need to) and use ML with Flask as a microservice to your main app.</p>\n"}], "owner": {"reputation": 396, "user_id": 5615492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26dc181c7d559730769d1a84826652b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5615492/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "closed_date": 1535015171, "accepted_answer_id": 51981597, "answer_count": 1, "score": 0, "last_activity_date": 1535013640, "creation_date": 1534974417, "question_id": 51975617, "link": "https://stackoverflow.com/questions/51975617/common-web-servers-frameworks-for-deploying-python-machine-learning-models", "closed_reason": "Opinion-based", "title": "Common web servers/frameworks for deploying python machine learning models?", "body": "<p>I noticed both <a href=\"https://github.com/mlflow/mlflow/pull/61\" rel=\"nofollow noreferrer\">Databricks MLFlow</a> and <a href=\"https://github.com/awslabs/amazon-sagemaker-examples/tree/master/advanced_functionality/scikit_bring_your_own/container\" rel=\"nofollow noreferrer\">Amazon Sagemaker</a> both make use of the combination of Nginx, Gunicorn, and Flask. </p>\n\n<p>I was wondering if that tends to be the standard stack for deploying machine learning models (e.g. Scikit-learn, Tensorflow, Keras). </p>\n\n<p>If so, is there are reason those are used over alternatives like Tornado?</p>\n\n<p>If not, is there a \"standard stack\"</p>\n"}, {"tags": ["python", "r", "binaryfiles"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1534974648, "post_id": 51975612, "comment_id": 90901704, "body": "Your Python code is reading values in groups of 4, but your R code is dividing the values into 4 groups."}, {"owner": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534975447, "post_id": 51975612, "comment_id": 90901987, "body": "Per R Documentation, the argument <code>size</code> is: &quot;The number of bytes per element in the byte stream&quot;. Does that not mean reading in groups of 4? I learned all of this stuff... today... so I apologize if it is obvious. Thanks for the response."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1534975513, "post_id": 51975612, "comment_id": 90902009, "body": "No, that means reading 4-byte floats. The 4 groups come from the 4 slicing expressions that each take a quarter of the vector."}], "answers": [{"comments": [{"owner": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 0, "creation_date": 1535477117, "post_id": 52046283, "comment_id": 91077109, "body": "I believe this is working for most, it does not seem to be working for tmin. No errors, but the decoded data makes no sense (all undefined -999). I will keep looking but you did help. If I solve it (or you have ideas), Ill still mark this for the bounty. Thanks for the response."}, {"owner": {"reputation": 665, "user_id": 4960854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFBWf.png?s=128&g=1", "display_name": "Hkoof", "link": "https://stackoverflow.com/users/4960854/hkoof"}, "reply_to_user": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 0, "creation_date": 1535494436, "post_id": 52046283, "comment_id": 91084105, "body": "It would help to have the binary input file (or a way to create one), and the expected results. The R-code does give the correct expected output?"}, {"owner": {"reputation": 665, "user_id": 4960854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFBWf.png?s=128&g=1", "display_name": "Hkoof", "link": "https://stackoverflow.com/users/4960854/hkoof"}, "reply_to_user": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 1, "creation_date": 1535576684, "post_id": 52046283, "comment_id": 91122430, "body": "Thanks. You&#39;re welcome. It&#39;s fun to try solve it. In the meantime, when I have time, I will try to make a version that does not try to read and copy it entirely into memory. Those files are to big for that. Hope that also helps to sole te problem."}, {"owner": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 0, "creation_date": 1535631491, "post_id": 52046283, "comment_id": 91143894, "body": "Actually I have a really large box to play with so memory is not an issue... but yes thank you."}], "tags": [], "owner": {"reputation": 665, "user_id": 4960854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFBWf.png?s=128&g=1", "display_name": "Hkoof", "link": "https://stackoverflow.com/users/4960854/hkoof"}, "is_accepted": false, "score": 1, "last_activity_date": 1535400324, "creation_date": 1535400324, "answer_id": 52046283, "question_id": 51975612, "link": "https://stackoverflow.com/questions/51975612/r-readbin-vs-python-struct/52046283#52046283", "title": "R readBin vs. Python struct", "body": "<p>Deducing from the R code, the binary file first contains a certain number <code>tmax</code>'s, then the same number of <code>nmax</code>'s, then <code>tmin</code>'s and <code>nmin</code>'s. What the code does is reading the entire file, which is then chopped up in the 4 parts (tmax's, nmax's, etc..) using slicing.</p>\n\n<p>To do the same in python:</p>\n\n<pre><code>import struct\n\n# Read entire file into memory first. This is done so we can count\n# number of bytes before parsing the bytes. It is not a very memory\n# efficient way, but it's the easiest. The R-code as posted wastes even\n# more memory: it always takes 6e8 * 4 bytes (~ 2.2Gb) of memory no\n# matter how small the file may be.\n#\ndata = open('data.bin','rb').read()\n\n# Calculate number of points in the file.  This is \n# file-size / 16, because there are 4 numeric()'s per\n# point, and they are 4 bytes each.\n#\nnum = int(len(data) / 16)\n\n# Now we know how much there are, we take all tmax numbers first, then\n# all nmax's, tmin's and lastly all nmin's.\n\n# First generate a format string because it depends on the number points\n# there are in the file. It will look like: \"fffff\"\n#\nformat_string = 'f' * num\n\n# Then, for cleaner code, calculate chunk size of the bytes we need to \n# slice off each time.\n#\nn = num * 4     # 4-byte floats\n\n# Note that python has different interpretation of slicing indices\n# than R, so no \"+1\" is needed here as it is in the R code.\n#\ntmax = struct.unpack(format_string, data[:n])\nnmax = struct.unpack(format_string, data[n:2*n])\ntmin = struct.unpack(format_string, data[2*n:3*n])\nnmin = struct.unpack(format_string, data[3*n:])\n\nprint(\"tmax\", tmax)\nprint(\"nmax\", nmax)\nprint(\"tmin\", tmin)\nprint(\"nmin\", nmin)\n</code></pre>\n\n<p>If the goal is to have this data structured as a list of points(?) like <code>(tmax,nmax,tmin,nmin)</code>, then append this to the code:</p>\n\n<pre><code>print()\nprint(\"Points:\")\n\n# Combine (\"zip\") all 4 lists into a list of (tmax,nmax,tmin,nmin) points.\n# Python has a function to do this at once: zip()\n#\ni = 0\nfor point in zip(tmax, nmax, tmin, nmin):\n    print(i, \":\", point)\n    i += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 0, "creation_date": 1537970239, "post_id": 52118278, "comment_id": 91978506, "body": "This worked in the sense that a summary table built in Spotfire and in R matched. This helped me figure out that the R code previously used was actually incorrect. Thanks!"}, {"owner": {"reputation": 665, "user_id": 4960854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFBWf.png?s=128&g=1", "display_name": "Hkoof", "link": "https://stackoverflow.com/users/4960854/hkoof"}, "reply_to_user": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "edited": false, "score": 0, "creation_date": 1538327346, "post_id": 52118278, "comment_id": 92095557, "body": "Thanks for the +100 bounty!"}], "tags": [], "owner": {"reputation": 665, "user_id": 4960854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFBWf.png?s=128&g=1", "display_name": "Hkoof", "link": "https://stackoverflow.com/users/4960854/hkoof"}, "is_accepted": true, "score": 0, "last_activity_date": 1535728017, "creation_date": 1535728017, "answer_id": 52118278, "question_id": 51975612, "link": "https://stackoverflow.com/questions/51975612/r-readbin-vs-python-struct/52118278#52118278", "title": "R readBin vs. Python struct", "body": "<p>Here's a less memory-hungry way to do the same. It possibly is a bit faster too. (but that is difficult to check for me)</p>\n\n<p>My computer did not have sufficient memory to run the first program with those huge files. This one does, but I still needed to create a list of ony tmax's first (the first 1/4 of the file), then print it, and then delete the list in order to have enough memory for nmax's, tmin's and nmin's.</p>\n\n<p>But this one too says the nmin's inside the 2018 file are all -999.0. If that doesn't make sense, could you check what the R-code makes of it then? I suspect that it is just what's in the file. The other possibility is of course, that I got it all wrong (which I doubt). However, I tried the 2017 file too, and that one does not have such problem: all of tmax, nmax, tmin, nmin have around 37%  -999.0 's.</p>\n\n<p>Anyway, here's the second code:</p>\n\n<pre><code>import os\nimport struct\n\n# load_data()\n#   data_store : object to append() data items (floats) to\n#   num        : number of floats to read and store\n#   datafile   : opened binary file object to read float data from\n#\ndef load_data(data_store, num, datafile):\n    for i in range(num):\n        data = datafile.read(4)  # process one float (=4 bytes) at a time\n        item = struct.unpack(\"&lt;f\", data)[0]  # '&lt;' means little endian\n        data_store.append(item) \n\n# save_list() saves a list of float's as strings to a file\n#\ndef save_list(filename, datalist):\n    output = open(filename, \"wt\")\n    for item in datalist:\n        output.write(str(item) + '\\n')\n    output.close()\n\n#### MAIN ####\n\ndatafile = open('data.bin','rb')\n\n# Get file size so we can calculate number of points without reading\n# the (large) file entirely into memory.\n#\nfile_info = os.stat(datafile.fileno())\n\n# Calculate number of points, i.e. number of each tmax's, nmax's,\n# tmin's, nmin's. A point is 4 floats of 4 bytes each, hence number\n# of points = file-size / (4*4)\n#\nnum = int(file_info.st_size / 16)\n\ntmax_list = list()\nload_data(tmax_list, num, datafile)\nsave_list(\"tmax.txt\", tmax_list)\ndel tmax_list   # huge list, save memory\n\nnmax_list = list()\nload_data(nmax_list, num, datafile)\nsave_list(\"nmax.txt\", nmax_list)\ndel nmax_list   # huge list, save memory\n\ntmin_list = list()\nload_data(tmin_list, num, datafile)\nsave_list(\"tmin.txt\", tmin_list)\ndel tmin_list   # huge list, save memory\n\nnmin_list = list()\nload_data(nmin_list, num, datafile)\nsave_list(\"nmin.txt\", nmin_list)\ndel nmin_list   # huge list, save memory\n</code></pre>\n"}], "owner": {"reputation": 1782, "user_id": 2840398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ORpPX.jpg?s=128&g=1", "display_name": "Mark P.", "link": "https://stackoverflow.com/users/2840398/mark-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 52118278, "answer_count": 2, "score": 6, "last_activity_date": 1537970298, "creation_date": 1534974394, "question_id": 51975612, "link": "https://stackoverflow.com/questions/51975612/r-readbin-vs-python-struct", "title": "R readBin vs. Python struct", "body": "<p>I am attempting to read a binary file using Python. Someone else has read in the data with R using the following code:</p>\n\n<pre><code>x &lt;- readBin(webpage, numeric(), n=6e8, size = 4, endian = \"little\")\n      myPoints &lt;- data.frame(\"tmax\" = x[1:(length(x)/4)],\n                             \"nmax\" = x[(length(x)/4 + 1):(2*(length(x)/4))],\n                             \"tmin\" = x[(2*length(x)/4 + 1):(3*(length(x)/4))],\n                             \"nmin\" = x[(3*length(x)/4 + 1):(length(x))])\n</code></pre>\n\n<p>With Python, I am trying the following code:</p>\n\n<pre><code>import struct\n\nwith open('file','rb') as f:\n    val = f.read(16)\n    while val != '':\n        print(struct.unpack('4f', val))\n        val = f.read(16) \n</code></pre>\n\n<p>I am coming to slightly different results. For example, the first row in R returns 4 columns as -999.9, 0, -999.0, 0. Python returns -999.0 for all four columns (images below).</p>\n\n<p>Python output:\n<a href=\"https://i.stack.imgur.com/sfIsd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sfIsd.png\" alt=\"enter image description here\"></a></p>\n\n<p>R output:\n<a href=\"https://i.stack.imgur.com/hrDCJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hrDCJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I know that they are slicing by the length of the file with some of the <code>[]</code> code, but I do not know how exactly to do this in Python, nor do I understand quite why they do this. Basically, I want to recreate what R is doing in Python.</p>\n\n<p>I can provide more of either code base if needed. I did not want to overwhelm with code that was not necessary.</p>\n"}, {"tags": ["php", "python", "windows", "exec"], "comments": [{"owner": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "edited": false, "score": 0, "creation_date": 1534974171, "post_id": 51975519, "comment_id": 90901526, "body": "The <code>\\t</code> in the string is causing it to be interpreted as tabs <code>C:\\wamp\\www     ests    ipe    ipe.py</code>, use single quotes. <a href=\"https://3v4l.org/Sm2Dr\" rel=\"nofollow noreferrer\">3v4l.org/Sm2Dr</a>"}, {"owner": {"reputation": 1, "user_id": 10261852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372b0c69bd82bebb4769c0d22a113d8e?s=128&d=identicon&r=PG&f=1", "display_name": "scriline", "link": "https://stackoverflow.com/users/10261852/scriline"}, "reply_to_user": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "edited": false, "score": 0, "creation_date": 1535006584, "post_id": 51975519, "comment_id": 90909115, "body": "Oh my god, you just made my day better !"}], "owner": {"reputation": 1, "user_id": 10261852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372b0c69bd82bebb4769c0d22a113d8e?s=128&d=identicon&r=PG&f=1", "display_name": "scriline", "link": "https://stackoverflow.com/users/10261852/scriline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534974310, "creation_date": 1534973932, "last_edit_date": 1534974310, "question_id": 51975519, "link": "https://stackoverflow.com/questions/51975519/how-to-run-python-script-from-php-getting-and-error", "title": "How to run python script from php, getting and error", "body": "<p>I'm sorry, I know this has been a much debated issue but I can't solve my problem and all the posts are rather old... I've been trying for days but it doesn't work.\nThe thing is, I just want to execute a python script from a basic php script. \nI've tried with the exec() function but have a strange error :\nthis is what I'm typping in php :</p>\n\n<pre><code>echo exec(\"C:\\Users\\paulz\\AppData\\Local\\Programs\\Python\\Python35-32\\python C:\\wamp\\www\\tests\\tipe\\tipe.py 2&gt;&amp;1\")\n</code></pre>\n\n<p>and I have this :</p>\n\n<pre><code>C:\\Users\\paulz\\AppData\\Local\\Programs\\Python\\Python35-32\\python.exe: can't find '__main__' module in 'C:\\\\wamp\\\\www'\n</code></pre>\n\n<p>a few details : \n- I'm using a windows machine,\n- For the 'python.exe' file, I've seen people talking about a \"c:\\Python26\\python.exe\" path but I have nothing of this kind...\n- I tried to put my file in an other place ( directory ), same error\n- I tried to use system(), passthru(), shell_exec(), etc... and didn't work ( I was perhaps using them in the wrong way or with bad arguments )\n- I\u2019m using wamp so I\u2019m working in local but I\u2019ll have to work with a real server soon so if it changes something, I\u2019d like to know both ways...</p>\n\n<p>I just want to run this python script via php and get and array in return so if this is not the good way, just show me an other one ;)</p>\n\n<p>Help please :'(</p>\n\n<p>thanks !</p>\n"}, {"tags": ["python", "pandas", "numpy", "pandas-groupby"], "comments": [{"owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "edited": false, "score": 0, "creation_date": 1534975855, "post_id": 51975512, "comment_id": 90902094, "body": "I hope someone will make a benchmark of all of these submissions. I&#39;d do it now, but it is late here."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "edited": false, "score": 0, "creation_date": 1534976508, "post_id": 51975512, "comment_id": 90902292, "body": "@Andr&#233;C.Andersen I&#39;ll add benchmarking comments to each solution."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534976634, "post_id": 51975512, "comment_id": 90902325, "body": "1.91 ms &#177; 2.35 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1534975945, "post_id": 51975615, "comment_id": 90902122, "body": "Hah! I just did that.  I&#39;ll delete"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1534975992, "post_id": 51975615, "comment_id": 90902140, "body": "@piRSquared C&#39;mon, keep it! Let the OP decide."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1534976086, "post_id": 51975615, "comment_id": 90902167, "body": "@piRSquared Yours <code>Counter</code> was still on the slower side because of <code>apply</code>. The point here is not to mess up with pandas."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534976186, "post_id": 51975615, "comment_id": 90902194, "body": "I think the <code>collections</code> solution is fine, but calling it 10x faster than pandas/numpy is misleading.  On a dataframe with even just a couple hundred rows, piRSquared&#39;s factorize solution beats it easily, and timings on a sample dataframe never mean much"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534976292, "post_id": 51975615, "comment_id": 90902224, "body": "@user3483203 Agree. I added a note that the 10x speedup is seen only on the sample dataframe."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534976806, "post_id": 51975615, "comment_id": 90902362, "body": "1st: 252 &#181;s &#177; 1.87 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534976834, "post_id": 51975615, "comment_id": 90902374, "body": "2nd: 3.65 ms &#177; 26.2 &#181;s per loop (mean &#177; std. dev. of 7 runs, 100 loops each)"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 5, "last_activity_date": 1534976218, "last_edit_date": 1534976218, "creation_date": 1534974403, "answer_id": 51975615, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/51975615#51975615", "title": "Faster alternative to perform pandas groupby operation", "body": "<p><strong>UPDATE</strong></p>\n\n<p>It must be hard to beat this (~10 times faster on the sample daraframe than any proposed pandas solution and 1.5 faster than the proposed numpy solution). The gist is to stay away from pandas and use <code>itertools.groupby</code> which is doing a much better job when it concerns non-numerical data.</p>\n\n<pre><code>from itertools import groupby\nfrom collections import Counter\n\npd.Series({x: Counter(z[-1] for z in y).most_common(1)[0][0] for x,y \n          in groupby(sorted(df.values.tolist()), \n                            key=lambda x: x[0])})\n# Jerry    Black\n# John     White\n# Tom       Blue\n</code></pre>\n\n<p><strong>Old Answer</strong></p>\n\n<p>Here's another method. It is actually slower than the original one, but I'll keep it here:</p>\n\n<pre><code>data.groupby('name')['color']\\\n    .apply(pd.Series.value_counts)\\\n    .unstack().idxmax(axis=1)\n# name\n# Jerry    Black\n# John     White\n# Tom       Blue\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 5, "creation_date": 1534976682, "post_id": 51975680, "comment_id": 90902339, "body": "1st: 362 &#181;s &#177; 1.47 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1534976728, "post_id": 51975680, "comment_id": 90902348, "body": "2nd: 1.51 ms &#177; 4.67 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1534976762, "post_id": 51975680, "comment_id": 90902355, "body": "3rd: 834 &#181;s &#177; 2.66 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 15, "last_activity_date": 1534975912, "last_edit_date": 1534975912, "creation_date": 1534974738, "answer_id": 51975680, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/51975680#51975680", "title": "Faster alternative to perform pandas groupby operation", "body": "<h2>Numpy's <code>numpy.add.at</code> and <code>pandas.factorize</code></h2>\n\n<p>This is intended to be fast.  However, I tried to organize it to be readable as well.</p>\n\n<pre><code>i, r = pd.factorize(df.name)\nj, c = pd.factorize(df.color)\nn, m = len(r), len(c)\n\nb = np.zeros((n, m), dtype=np.int64)\n\nnp.add.at(b, (i, j), 1)\npd.Series(c[b.argmax(1)], r)\n\nJohn     White\nTom       Blue\nJerry    Black\ndtype: object\n</code></pre>\n\n<hr>\n\n<h2><code>groupby</code>, <code>size</code>, and <code>idxmax</code></h2>\n\n<pre><code>df.groupby(['name', 'color']).size().unstack().idxmax(1)\n\nname\nJerry    Black\nJohn     White\nTom       Blue\ndtype: object\n\nname\nJerry    Black\nJohn     White\nTom       Blue\nName: color, dtype: object\n</code></pre>\n\n<hr>\n\n<h2><code>Counter</code></h2>\n\n<p><code>\u00af\\_(\u30c4)_/\u00af</code></p>\n\n<pre><code>from collections import Counter\n\ndf.groupby('name').color.apply(lambda c: Counter(c).most_common(1)[0][0])\n\nname\nJerry    Black\nJohn     White\nTom       Blue\nName: color, dtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1534975597, "post_id": 51975776, "comment_id": 90902035, "body": "Sorry I miss understanding the question and fixed ."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534976571, "post_id": 51975776, "comment_id": 90902314, "body": "1.66 ms &#177; 3.48 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 4, "last_activity_date": 1534975416, "creation_date": 1534975416, "answer_id": 51975776, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/51975776#51975776", "title": "Faster alternative to perform pandas groupby operation", "body": "<p>Solution from <strong><code>pd.Series.mode</code></strong></p>\n\n<pre><code>df.groupby('name').color.apply(pd.Series.mode).reset_index(level=1,drop=True)\nOut[281]: \nname\nJerry    Black\nJohn     White\nTom       Blue\nName: color, dtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534976518, "post_id": 51975813, "comment_id": 90902295, "body": "12.2 ms &#177; 48.4 &#181;s per loop (mean &#177; std. dev. of 7 runs, 100 loops each)"}, {"owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1535015692, "post_id": 51975813, "comment_id": 90914111, "body": "Thank you. Not very good then, from what I see the others are getting. As feedback on time testing, if you&#39;re looping over the same small dataset many times it might not be comparable to doing it once on a large dataset. Many solutions like this have high startup cost, but will perform well as soon as it starts processing. Looping over the a small dataset many times means you might just be measuring the startup cost, which should be just a one time cost. I suggest you increase the size of the data set you are testing until it takes a few seconds to run one loop."}], "tags": [], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "is_accepted": false, "score": 2, "last_activity_date": 1534976015, "last_edit_date": 1534976015, "creation_date": 1534975659, "answer_id": 51975813, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/51975813#51975813", "title": "Faster alternative to perform pandas groupby operation", "body": "<p>How about doing two groupings with <code>transform(max)</code>?</p>\n\n<pre><code>df = df.groupby([\"name\", \"color\"], as_index=False, sort=False).count()\nidx = df.groupby(\"name\", sort=False).transform(max)[\"day\"] == df[\"day\"]\ndf = df[idx][[\"name\", \"color\"]].reset_index(drop=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    name  color\n0   John  White\n1    Tom   Blue\n2  Jerry  Black\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2350, "user_id": 3924566, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100006525577404/picture?type=large", "display_name": "Deepak Saini", "link": "https://stackoverflow.com/users/3924566/deepak-saini"}, "is_accepted": false, "score": 1, "last_activity_date": 1540547774, "creation_date": 1540547774, "answer_id": 53006120, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/53006120#53006120", "title": "Faster alternative to perform pandas groupby operation", "body": "<p>Similar to @piRSquared's <code>pd.factorize</code> and <code>np.add.at</code> ans.</p>\n\n<p>We encode the stings in columns using </p>\n\n<pre><code>i, r = pd.factorize(df.name)\nj, c = pd.factorize(df.color)\nn, m = len(r), len(c)\nb = np.zeros((n, m), dtype=np.int64)\n</code></pre>\n\n<p>But then, instead of doing this:</p>\n\n<pre><code>np.add.at(b, (i, j), 1)\nmax_columns_after_add_at = b.argmax(1)\n</code></pre>\n\n<p>We get the <code>max_columns_after_add_at</code> using a jited function, to do add at and find maximum in the same loop:</p>\n\n<pre><code>@nb.jit(nopython=True, cache=True)\ndef add_at(x, rows, cols, val):\n    max_vals = np.zeros((x.shape[0], ), np.int64)\n    max_inds = np.zeros((x.shape[0], ), np.int64)\n    for i in range(len(rows)):\n        r = rows[i]\n        c = cols[i]\n        x[r, c]+=1\n        if(x[r, c] &gt; max_vals[r]):\n            max_vals[r] = x[r, c]\n            max_inds[r] = c\n    return max_inds\n</code></pre>\n\n<p>And then get the dataframe in the end, </p>\n\n<pre><code>ans = pd.Series(c[max_columns_after_add_at], r)\n</code></pre>\n\n<p>So, the difference is how we do <code>argmax(axis=1) after np.add.at()</code>.</p>\n\n<p><strong>Timing analysis</strong></p>\n\n<pre><code>import numpy as np\nimport numba as nb\nm = 100000\nn = 100000\nrows = np.random.randint(low = 0, high = m, size=10000)\ncols = np.random.randint(low = 0, high = n, size=10000)\n</code></pre>\n\n<p>So this:</p>\n\n<pre><code>%%time\nx = np.zeros((m,n))\nnp.add.at(x, (rows, cols), 1)\nmaxs = x.argmax(1)\n</code></pre>\n\n<p>gives:</p>\n\n<blockquote>\n  <p>CPU times: user 12.4 s, sys: 38 s, total: 50.4 s Wall time: 50.5 s</p>\n</blockquote>\n\n<p>And this</p>\n\n<pre><code>%%time\nx = np.zeros((m,n))\nmaxs2 = add_at(x, rows, cols, 1)\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n  <p>CPU times: user 108 ms, sys: 39.4 s, total: 39.5 s Wall time: 38.4 s</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8552045, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ctC5yKHLS0U/AAAAAAAAAAI/AAAAAAAAAD0/T81cmmKxo9w/photo.jpg?sz=128", "display_name": "youthful737_train", "link": "https://stackoverflow.com/users/8552045/youthful737-train"}, "is_accepted": false, "score": 0, "last_activity_date": 1600074115, "last_edit_date": 1600074115, "creation_date": 1600073758, "answer_id": 63881140, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation/63881140#63881140", "title": "Faster alternative to perform pandas groupby operation", "body": "<p>For those who want to convert the above table into a data frame and try the posted answers, you can use this snippet. Copy paste the table above in the notebook cell like given below, make sure to remove the hyphens</p>\n<pre><code>l = &quot;&quot;&quot;name  day  color\nJohn   1   White\nJohn   2   White\nJohn   3   Blue\nJohn   4   Blue\nJohn   5   White\nTom    2   White\nTom    3   Blue\nTom    4   Blue\nTom    5   Black\nJerry  1   Black\nJerry  2   Black\nJerry  4   Black\nJerry  5   White&quot;&quot;&quot;.split('\\n')\n</code></pre>\n<p>Now we need to convert this list into a list of tuples.</p>\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame([tuple(i.split()) for i in l])\nheaders = df.iloc[0]\nnew_df  = pd.DataFrame(df.values[1:], columns=headers)\n</code></pre>\n<p>Use new_df now and you can refer the answers above by @piRSquared</p>\n"}], "owner": {"reputation": 157, "user_id": 10236633, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h-pK7H3mD6s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOlSB4f3Sss3YA9LryBPDfEsv-atg/mo/photo.jpg?sz=128", "display_name": "astrobiologist", "link": "https://stackoverflow.com/users/10236633/astrobiologist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9268, "favorite_count": 7, "accepted_answer_id": 51975680, "answer_count": 6, "score": 9, "last_activity_date": 1600074115, "creation_date": 1534973921, "last_edit_date": 1536704650, "question_id": 51975512, "link": "https://stackoverflow.com/questions/51975512/faster-alternative-to-perform-pandas-groupby-operation", "title": "Faster alternative to perform pandas groupby operation", "body": "<p>I have a dataset with name (person_name), day and color (shirt_color) as columns.</p>\n\n<p>Each person wears a shirt with a certain color on a particular day. The number of days can be arbitrary.</p>\n\n<p>E.g. input:</p>\n\n<pre><code>name  day  color\n----------------\nJohn   1   White\nJohn   2   White\nJohn   3   Blue\nJohn   4   Blue\nJohn   5   White\nTom    2   White\nTom    3   Blue\nTom    4   Blue\nTom    5   Black\nJerry  1   Black\nJerry  2   Black\nJerry  4   Black\nJerry  5   White\n</code></pre>\n\n<p>I need to find the most frequently used color by each person.</p>\n\n<p>E.g. result:</p>\n\n<pre><code>name    color\n-------------\nJerry   Black\nJohn    White\nTom     Blue\n</code></pre>\n\n<p>I am performing the following operation to get the results, which works fine but is quite slow:</p>\n\n<pre><code>most_frquent_list = [[name, group.color.mode()[0]] \n                        for name, group in data.groupby('name')]\nmost_frquent_df = pd.DataFrame(most_frquent_list, columns=['name', 'color'])\n</code></pre>\n\n<p>Now suppose I have a dataset with 5 million unique names. What is the best/fastest way to perform the above operation?</p>\n"}, {"tags": ["python", "django", "pycharm"], "comments": [{"owner": {"reputation": 769, "user_id": 8877418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/av2TM.jpg?s=128&g=1", "display_name": "pfcodes", "link": "https://stackoverflow.com/users/8877418/pfcodes"}, "edited": false, "score": 0, "creation_date": 1534973929, "post_id": 51975503, "comment_id": 90901443, "body": "Do you have a virtualenv set up?"}, {"owner": {"reputation": 109, "user_id": 6407879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d3327397805bb916fc9b53b4a95e2?s=128&d=identicon&r=PG&f=1", "display_name": "kpk", "link": "https://stackoverflow.com/users/6407879/kpk"}, "reply_to_user": {"reputation": 769, "user_id": 8877418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/av2TM.jpg?s=128&g=1", "display_name": "pfcodes", "link": "https://stackoverflow.com/users/8877418/pfcodes"}, "edited": false, "score": 0, "creation_date": 1534974122, "post_id": 51975503, "comment_id": 90901510, "body": "Yes I do <code>C:\\projects\\django\\deya\\venv\\Scripts\\python.exe &quot;C:\\Program Files\\JetBrains\\PyCharm 2017.3.3\\helpers\\pydev\\pydevconsole.py&quot; 6550 6551</code> is the command when Python console starts. <code>C:\\projects\\django\\deya\\venv</code> is the virtualenv"}, {"owner": {"reputation": 739, "user_id": 4163768, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JKXht4IxpzU/AAAAAAAAAAI/AAAAAAAAA94/82XKnW1fGZo/photo.jpg?sz=128", "display_name": "Lingster", "link": "https://stackoverflow.com/users/4163768/lingster"}, "edited": false, "score": 0, "creation_date": 1534975774, "post_id": 51975503, "comment_id": 90902073, "body": "what do you get if you run <code>python manage.py runserver</code> have you included the app in INSTALLED_APPS where the Damage model is defined?"}, {"owner": {"reputation": 109, "user_id": 6407879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d3327397805bb916fc9b53b4a95e2?s=128&d=identicon&r=PG&f=1", "display_name": "kpk", "link": "https://stackoverflow.com/users/6407879/kpk"}, "edited": false, "score": 0, "creation_date": 1535003242, "post_id": 51975503, "comment_id": 90907783, "body": "<code>python manage.py runserver</code> executes fine and I also included the app in INSTALLED_APPS"}], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 4163768, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JKXht4IxpzU/AAAAAAAAAAI/AAAAAAAAA94/82XKnW1fGZo/photo.jpg?sz=128", "display_name": "Lingster", "link": "https://stackoverflow.com/users/4163768/lingster"}, "edited": false, "score": 0, "creation_date": 1534976101, "post_id": 51975825, "comment_id": 90902172, "body": "It&#39;s actually possible to run Django outside of manage.py, in your script you just have to include: <code>from django.conf import settings from django.core.wsgi import get_wsgi_application from django.core.management import call_command  application = get_wsgi_application()</code> and also add DJANGO_SETTINGS_MODULE environment variable so django knows where to load the settings.py file from ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "reply_to_user": {"reputation": 739, "user_id": 4163768, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JKXht4IxpzU/AAAAAAAAAAI/AAAAAAAAA94/82XKnW1fGZo/photo.jpg?sz=128", "display_name": "Lingster", "link": "https://stackoverflow.com/users/4163768/lingster"}, "edited": false, "score": 0, "creation_date": 1534976318, "post_id": 51975825, "comment_id": 90902238, "body": "@Lingster Yes, outside of the normal configuration setup - it&#39;s possible I guess. :) I&#39;m assuming no prior or very beginner level Django experience for this user."}, {"owner": {"reputation": 109, "user_id": 6407879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d3327397805bb916fc9b53b4a95e2?s=128&d=identicon&r=PG&f=1", "display_name": "kpk", "link": "https://stackoverflow.com/users/6407879/kpk"}, "edited": false, "score": 0, "creation_date": 1535005938, "post_id": 51975825, "comment_id": 90908808, "body": "DJANGO_SETTINGS_MODULE is defined in project settings. I define it manually by <code>os.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;deya.settings&quot;)</code>. I tried also <code>import django</code> and &#39;django.setup()&#39;. After all these i am getting the error &#39;RuntimeError: Model class django.contrib.contenttypes.models.ContentType doesn&#39;t declare an explicit app_label and isn&#39;t in an application in INSTALLED_APPS.`"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "reply_to_user": {"reputation": 109, "user_id": 6407879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d3327397805bb916fc9b53b4a95e2?s=128&d=identicon&r=PG&f=1", "display_name": "kpk", "link": "https://stackoverflow.com/users/6407879/kpk"}, "edited": false, "score": 0, "creation_date": 1535006402, "post_id": 51975825, "comment_id": 90909044, "body": "@kpk Hi, the deflation of app label is certainly because you\u2019re running it outside of the python manage.py runserver."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "is_accepted": false, "score": 1, "last_activity_date": 1534975715, "creation_date": 1534975715, "answer_id": 51975825, "question_id": 51975503, "link": "https://stackoverflow.com/questions/51975503/cant-import-models-on-python-console-in-pycharm/51975825#51975825", "title": "Can&#39;t import models on python console in Pycharm", "body": "<p>Unfortunately, I don't think it is possible to work with <code>Django</code> outside of the <code>python manage.py runserver</code> initialisation. What happens when you run this in the terminal, do you receive any errors?</p>\n"}], "owner": {"reputation": 109, "user_id": 6407879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d3327397805bb916fc9b53b4a95e2?s=128&d=identicon&r=PG&f=1", "display_name": "kpk", "link": "https://stackoverflow.com/users/6407879/kpk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1607096680, "creation_date": 1534973867, "last_edit_date": 1607096680, "question_id": 51975503, "link": "https://stackoverflow.com/questions/51975503/cant-import-models-on-python-console-in-pycharm", "title": "Can&#39;t import models on python console in Pycharm", "body": "<p>I am trying to import one of my models in Python Console in PyCharm and I am getting the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    from damage.models import Damage\nTraceback (most recent call last):\n  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;\n  File &quot;C:\\Program Files\\JetBrains\\PyCharm 2017.3.3\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py&quot;, line 20, in do_import\n    module = self._system_import(name, *args, **kwargs)\n  File &quot;C:\\projects\\django\\deya\\damage\\models.py&quot;, line 2, in &lt;module&gt;\n    from django.contrib.auth.models import User\n  File &quot;C:\\Program Files\\JetBrains\\PyCharm 2017.3.3\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py&quot;, line 20, in do_import\n    module = self._system_import(name, *args, **kwargs)\n  File &quot;C:\\projects\\django\\deya\\venv\\lib\\site-packages\\django\\contrib\\auth\\models.py&quot;, line 2, in &lt;module&gt;\n    from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager\n  File &quot;C:\\Program Files\\JetBrains\\PyCharm 2017.3.3\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py&quot;, line 20, in do_import\n    module = self._system_import(name, *args, **kwargs)\n  File &quot;C:\\projects\\django\\deya\\venv\\lib\\site-packages\\django\\contrib\\auth\\base_user.py&quot;, line 47, in &lt;module&gt;\n    class AbstractBaseUser(models.Model):\n  File &quot;C:\\projects\\django\\deya\\venv\\lib\\site-packages\\django\\db\\models\\base.py&quot;, line 100, in __new__\n    app_config = apps.get_containing_app_config(module)\n  File &quot;C:\\projects\\django\\deya\\venv\\lib\\site-packages\\django\\apps\\registry.py&quot;, line 244, in get_containing_app_config\n    self.check_apps_ready()\n  File &quot;C:\\projects\\django\\deya\\venv\\lib\\site-packages\\django\\apps\\registry.py&quot;, line 127, in check_apps_ready\n    raise AppRegistryNotReady(&quot;Apps aren't loaded yet.&quot;)\ndjango.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.\n</code></pre>\n<p>Everything else in my project works fine.</p>\n<p>I am able to import my models when I run</p>\n<pre><code>python manage.py shell \n</code></pre>\n<p>from command line or even PyCharm Terminal.</p>\n<p>How can I solve this?</p>\n"}, {"tags": ["python", "django", "django-admin", "django-admin-filters"], "answers": [{"comments": [{"owner": {"reputation": 3598, "user_id": 6083378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b294b5a269a431028154b5e98be046?s=128&d=identicon&r=PG&f=1", "display_name": "dspencer", "link": "https://stackoverflow.com/users/6083378/dspencer"}, "edited": false, "score": 0, "creation_date": 1587477004, "post_id": 51975962, "comment_id": 108522622, "body": "As a note, at least in Django 3.0 (I haven&#39;t tested on other versions), you should not initialize an instance of the filter in <code>list_filter</code>, instead passing the class as <code>MyDateTimeFilter</code>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "is_accepted": true, "score": 4, "last_activity_date": 1534976605, "creation_date": 1534976605, "answer_id": 51975962, "question_id": 51975488, "link": "https://stackoverflow.com/questions/51975488/extending-django-admins-datefieldlistfilter-for-custom-upcoming-filter/51975962#51975962", "title": "Extending Django-admin&#39;s DateFieldListFilter for custom &quot;Upcoming&quot; filter", "body": "<p>Without jumping straight into this one, I have done exactly what you needed for a previous project:</p>\n\n<p>In <code>filters.py</code>:</p>\n\n<pre><code>import datetime\n\nfrom django.contrib.admin.filters import DateFieldListFilter\nfrom django.utils.translation import gettext_lazy as _\n\nclass MyDateTimeFilter(DateFieldListFilter):\n    def __init__(self, *args, **kwargs):\n        super(MyDateTimeFilter, self).__init__(*args, **kwargs)\n\n        now = timezone.now()\n        # When time zone support is enabled, convert \"now\" to the user's time\n        # zone so Django's definition of \"Today\" matches what the user expects.\n        if timezone.is_aware(now):\n            now = timezone.localtime(now)\n\n        today = now.date()\n\n        self.links += ((\n            (_('Upcoming'), {\n                self.lookup_kwarg_since: str(today),\n                self.lookup_kwarg_until: str(today + datetime.timedelta(days=7)),\n            }),\n        ))\n</code></pre>\n\n<p>You want to add a few declarations to be used later (e.g., <code>today = now.date()</code>) and then you want to use the <code>self.lookup_kwarg_until</code> keyword argument, and have some time range as your lookup until date (for ease, I have used <code>today + datetime.timedelta(days=7)</code>, but you could quite easily configure this to whatever timespan you need.</p>\n\n<p>Then you'd need something like this in <code>admin.py</code>:</p>\n\n<pre><code>from django.contrib import admin\n\nfrom filters import MyDateTimeFilter\n\nclass PostAdmin(admin.ModelAdmin):\n    list_filter = (\n        ('published_at', MyDateTimeFilter()),\n    )\n</code></pre>\n\n<p><strong><em>Disclaimer</em></strong>: this worked on Python 3.7, Django 2.0*. Fingers crossed this works for you!</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10261970"}, "edited": false, "score": 0, "creation_date": 1535044628, "post_id": 51987912, "comment_id": 90931827, "body": "Hi Alain, yes I certainly wouldn&#39;t advise meddling with the core/base Django project ... use my extend method and you won&#39;t go far wrong! :) Can my question be marked as a suitable answer?"}], "tags": [], "owner": {"reputation": 23, "user_id": 10261845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6344c7e36e1187c00168562589016101?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Boyer", "link": "https://stackoverflow.com/users/10261845/alain-boyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1535033642, "creation_date": 1535033642, "answer_id": 51987912, "question_id": 51975488, "link": "https://stackoverflow.com/questions/51975488/extending-django-admins-datefieldlistfilter-for-custom-upcoming-filter/51987912#51987912", "title": "Extending Django-admin&#39;s DateFieldListFilter for custom &quot;Upcoming&quot; filter", "body": "<p>Thank you for your answer,  it definitely pointed me in the right direction.  </p>\n\n<p>I was missing the _ in my syntax and I was trying to create my custom filter directly in the <strong>admin.py</strong> and not <strong>filters.py</strong>. Since I was not sure if you were refering to the Django source file <strong>django.contrib.admin.filters.py</strong> or a new created <strong>model.filters.py</strong> file, I tried both method, adding a custom filter and then importing did not work for some reason I had the following error code: </p>\n\n<pre><code>  TypeError: __init__() missing 6 required positional arguments: 'field', 'request', 'params', 'model', 'model_admin', and 'field_path'\n</code></pre>\n\n<p>It is like my <em>init</em> declaration is incomplete.</p>\n\n<p>However, given I found Django filters's original source file, I was able to adjust Django's original code (which is probably not recommended, but harmless in my case) and it worked great. I was not able to extend the original filter, but to override it.</p>\n"}], "owner": {"reputation": 23, "user_id": 10261845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6344c7e36e1187c00168562589016101?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Boyer", "link": "https://stackoverflow.com/users/10261845/alain-boyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "accepted_answer_id": 51975962, "answer_count": 2, "score": 2, "last_activity_date": 1535033642, "creation_date": 1534973812, "question_id": 51975488, "link": "https://stackoverflow.com/questions/51975488/extending-django-admins-datefieldlistfilter-for-custom-upcoming-filter", "title": "Extending Django-admin&#39;s DateFieldListFilter for custom &quot;Upcoming&quot; filter", "body": "<p>I am trying to add a custom \"Upcoming\" filter to the Django Admin DateFieldListFilter. It's really simple, just selecting dates after today. Building on <a href=\"https://stackoverflow.com/questions/37735191/how-do-i-extend-django-admins-datefieldlistfilter-class\">this thread</a> i was able to extend Django's standard DateFieldListFilter into my own custom one as follows :</p>\n\n<pre><code>class MyDateTimeFilter(DateFieldListFilter):\n\n    def __init__(self, *args, **kwargs):\n        super(MyDateTimeFilter, self).__init__(*args, **kwargs)\n\n        today = datetime.now()    \n        self.links += (('Upcoming'), {self.lookup_kwarg_since: today.strftime('%d %B %Y')}),\n</code></pre>\n\n<p>It correctly displays \"Upcoming\" at the bottom of my filters, but clicking does not actualy filter the results. I do not know what's wrong with my syntax and I have tried many alternatives...</p>\n\n<p>Your help is very much appreciated!</p>\n\n<p>PS: I am using Python 3.5.2 and Django 2.0.6</p>\n"}, {"tags": ["python", "json", "database"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1534974747, "post_id": 51975479, "comment_id": 90901746, "body": "Perhaps, SQL databases are not the best choice. SQL needs a fixed schema."}, {"owner": {"reputation": 856, "user_id": 4745345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198242af4955bf263b9df08a31cb962?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Warren", "link": "https://stackoverflow.com/users/4745345/jon-warren"}, "edited": false, "score": 2, "creation_date": 1534974985, "post_id": 51975479, "comment_id": 90901829, "body": "Just a heads up that your example JSON file is not a valid JSON. You would need to encapsulate the entire file in a set of square brackets, as well as encapsulate your keys with double quotations."}], "answers": [{"tags": [], "owner": {"reputation": 1597, "user_id": 7321360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6081373b1971c9df51425b3e62e7634d?s=128&d=identicon&r=PG&f=1", "display_name": "Jebby", "link": "https://stackoverflow.com/users/7321360/jebby"}, "is_accepted": false, "score": 0, "last_activity_date": 1534976783, "last_edit_date": 1534976783, "creation_date": 1534975841, "answer_id": 51975845, "question_id": 51975479, "link": "https://stackoverflow.com/questions/51975479/parsing-json-into-insert-statements-with-python/51975845#51975845", "title": "Parsing json into Insert statements with Python", "body": "<p>In Python, you can do something like this using <code>sqlite3</code> and <code>json</code>, both from the standard library.</p>\n\n<pre><code>import json\nimport sqlite3\n\n# The string representing the json.\n# You will probably want to read this string in from\n# a file rather than hardcoding it.\ns = \"\"\"[\n    {\n        \"id\": 1001, \n        \"name\": \"John\", \n        \"age\" : 30 \n    }, \n    {\n        \"id\" : 1002,\n        \"name\" : \"Peter\",\n        \"age\" : 25\n    },\n    {\n        \"id\" : 1002,\n        \"name\" : \"Kevin\",\n        \"age\" : 35,\n        \"salary\" : 5000\n    }\n]\"\"\"\n\n# Read the string representing json\n# Into a python list of dicts.\ndata = json.loads(s)\n\n\n# Open the file containing the SQL database.\nwith sqlite3.connect(\"filename.db\") as conn:\n\n    # Create the table if it doesn't exist.\n    conn.execute(\n        \"\"\"CREATE TABLE IF NOT EXISTS tab(\n                id int,\n                name varchar(100),\n                age int,\n                salary int\n            );\"\"\"\n        )\n\n    # Insert each entry from json into the table.\n    keys = [\"id\", \"name\", \"age\", \"salary\"]\n    for entry in data:\n\n        # This will make sure that each key will default to None\n        # if the key doesn't exist in the json entry.\n        values = [entry.get(key, None) for key in keys]\n\n        # Execute the command and replace '?' with the each value\n        # in 'values'. DO NOT build a string and replace manually.\n        # the sqlite3 library will handle non safe strings by doing this.\n        cmd = \"\"\"INSERT INTO tab VALUES(\n                    ?,\n                    ?,\n                    ?,\n                    ?\n                );\"\"\"\n        conn.execute(cmd, values)\n\n    conn.commit()\n</code></pre>\n\n<p>This will create a file named 'filename.db' in the current directory with the entries inserted.</p>\n\n<p>To test the tables:</p>\n\n<pre><code># Testing the table.\nwith sqlite3.connect(\"filename.db\") as conn:\n    cmd = \"\"\"SELECT * FROM tab WHERE SALARY NOT NULL;\"\"\"\n    cur = conn.execute(cmd)\n    res = cur.fetchall()\n    for r in res:\n        print(r)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 10101636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c8c1a5ac546be45924bb645adfcdb6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/10101636/matthew"}, "edited": false, "score": 1, "creation_date": 1535037802, "post_id": 51975931, "comment_id": 90928019, "body": "Thanks a ton @Jon Warren . Worked like a charm... that&#39;s exactly what I needed. Also learned a lot of new things. Thanks again."}], "tags": [], "owner": {"reputation": 856, "user_id": 4745345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198242af4955bf263b9df08a31cb962?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Warren", "link": "https://stackoverflow.com/users/4745345/jon-warren"}, "is_accepted": false, "score": 2, "last_activity_date": 1534976384, "creation_date": 1534976384, "answer_id": 51975931, "question_id": 51975479, "link": "https://stackoverflow.com/questions/51975479/parsing-json-into-insert-statements-with-python/51975931#51975931", "title": "Parsing json into Insert statements with Python", "body": "<p>You could try this:</p>\n\n<pre><code>import json\n\nTABLE_NAME = \"tab\"\n\nsqlstatement = ''\nwith open ('data.json','r') as f:\n    jsondata = json.loads(f.read())\n\nfor json in jsondata:\n    keylist = \"(\"\n    valuelist = \"(\"\n    firstPair = True\n    for key, value in json.items():\n        if not firstPair:\n            keylist += \", \"\n            valuelist += \", \"\n        firstPair = False\n        keylist += key\n        if type(value) in (str, unicode):\n            valuelist += \"'\" + value + \"'\"\n        else:\n            valuelist += str(value)\n    keylist += \")\"\n    valuelist += \")\"\n\n    sqlstatement += \"INSERT INTO \" + TABLE_NAME + \" \" + keylist + \" VALUES \" + valuelist + \"\\n\"\n\nprint(sqlstatement)\n</code></pre>\n\n<p>However for this to work, you'll need to change your JSON file to correct the syntax like this:</p>\n\n<pre><code>[{  \n    \"id\" : 1001, \n    \"name\" : \"John\", \n    \"age\" : 30 \n} , \n\n{   \n    \"id\" : 1002,\n    \"name\" : \"Peter\",\n    \"age\" : 25\n},\n\n{\n    \"id\" : 1003,\n    \"name\" : \"Kevin\",\n    \"age\" : 35,\n    \"salary\" : 5000\n}]\n</code></pre>\n\n<p>Running this gives the following output:</p>\n\n<pre><code>INSERT INTO tab (age, id, name) VALUES (30, 1001, 'John')\nINSERT INTO tab (age, id, name) VALUES (25, 1002, 'Peter')\nINSERT INTO tab (salary, age, id, name) VALUES (5000, 35, 1003, 'Kevin')\n</code></pre>\n\n<p>Note that you don't need to specify NULLs. If you don't specify a column in the insert statement, it should automatically insert NULL into any columns you left out.</p>\n"}], "owner": {"reputation": 123, "user_id": 10101636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c8c1a5ac546be45924bb645adfcdb6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/10101636/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7676, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1534976783, "creation_date": 1534973766, "question_id": 51975479, "link": "https://stackoverflow.com/questions/51975479/parsing-json-into-insert-statements-with-python", "title": "Parsing json into Insert statements with Python", "body": "<p>I have a file which contains several json records. I have to parse this file and load each of the jsons to a particular SQL-Server table. However, the table might not exist on the database, in which case I have to also create it first before loading. So, I have to parse the json file and figure out the fields/columns and create the table. Then I will have to <code>de-serialize</code> the jsons into records and insert them into the table created. However, the caveat is that some fields in the json are optional i.e. a field might be absent from one json record but could be present in another record. Below is an example file with 3 records :-</p>\n\n<pre><code>{ id : 1001, \n  name : \"John\", \n  age : 30 \n} , \n\n{ id : 1002,\n  name : \"Peter\",\n  age : 25\n},\n\n{ id : 1002,\n  name : \"Kevin\",\n  age : 35,\n  salary : 5000\n},\n</code></pre>\n\n<p>Notice that the field <em>salary</em> appears only in the 3rd record. The results should be :-</p>\n\n<pre><code>CREATE TABLE tab ( id int, name varchar(100), age int, salary int );\n\nINSERT INTO tab (id, name, age, salary) values (1001, 'John', 30, NULL)\nINSERT INTO tab (id, name, age, salary) values (1002, 'Peter', 25, NULL)\nINSERT INTO tab (id, name, age, salary) values (1003, 'Kevin', 35, 5000)\n</code></pre>\n\n<p>Can anyone please help me with some pointers as I am new to Python. Thanks.</p>\n"}, {"tags": ["python", "permutation"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1534973910, "post_id": 51975440, "comment_id": 90901432, "body": "Where is your current attempt?"}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 4743630, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f5402c5bf4f6cf31a5377e02a3a912a0?s=128&d=identicon&r=PG&f=1", "display_name": "Elias Strehle", "link": "https://stackoverflow.com/users/4743630/elias-strehle"}, "edited": false, "score": 0, "creation_date": 1534975851, "post_id": 51975686, "comment_id": 90902091, "body": "Thank you! Is it possible to use a list comprehension? <code>[0 if i in pad_idx else orig[:].pop() for i in range(m)]</code> does not work."}, {"owner": {"reputation": 943, "user_id": 4743630, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f5402c5bf4f6cf31a5377e02a3a912a0?s=128&d=identicon&r=PG&f=1", "display_name": "Elias Strehle", "link": "https://stackoverflow.com/users/4743630/elias-strehle"}, "edited": false, "score": 0, "creation_date": 1534976098, "post_id": 51975686, "comment_id": 90902171, "body": "Ah, got it: Define the inner list comprehension as a function and use that function (with <code>orig[:]</code> as input argument) in the outer list comprehension."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 943, "user_id": 4743630, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f5402c5bf4f6cf31a5377e02a3a912a0?s=128&d=identicon&r=PG&f=1", "display_name": "Elias Strehle", "link": "https://stackoverflow.com/users/4743630/elias-strehle"}, "edited": false, "score": 0, "creation_date": 1534977417, "post_id": 51975686, "comment_id": 90902490, "body": "Nice insight; yes, that will do it."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1534975335, "last_edit_date": 1534975335, "creation_date": 1534974789, "answer_id": 51975686, "question_id": 51975440, "link": "https://stackoverflow.com/questions/51975440/get-all-permutations-that-pad-a-list-with-zeroes/51975686#51975686", "title": "Get all permutations that pad a list with zeroes", "body": "<p>Use <code>itertools.combinations</code> to generate every combination of places to insert zeroes.  Then use a list comprehension to select 0 or the next original element to build the new list.</p>\n\n<pre><code># Pad list orig with zeroes, out to \"m\" total elements.\nfrom itertools import combinations\n\norig = [1, 2, 3]\nm = 5\nn = len(orig)\n\npadded = []\n\nfor pad_idx in combinations(range(m), m-n):\n    t = orig[:]\n    padded.append( [0 if i in pad_idx else t.pop(0)\n                    for i in range(m)] )\n\nprint(padded)\n</code></pre>\n\n<p>Output (formatted for readability):</p>\n\n<pre><code>[[0, 0, 1, 2, 3], \n [0, 1, 0, 2, 3], \n [0, 1, 2, 0, 3], \n [0, 1, 2, 3, 0], \n [1, 0, 0, 2, 3], \n [1, 0, 2, 0, 3], \n [1, 0, 2, 3, 0], \n [1, 2, 0, 0, 3], \n [1, 2, 0, 3, 0], \n [1, 2, 3, 0, 0]]\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 4743630, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f5402c5bf4f6cf31a5377e02a3a912a0?s=128&d=identicon&r=PG&f=1", "display_name": "Elias Strehle", "link": "https://stackoverflow.com/users/4743630/elias-strehle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 51975686, "answer_count": 1, "score": 1, "last_activity_date": 1534975587, "creation_date": 1534973551, "last_edit_date": 1534975587, "question_id": 51975440, "link": "https://stackoverflow.com/questions/51975440/get-all-permutations-that-pad-a-list-with-zeroes", "title": "Get all permutations that pad a list with zeroes", "body": "<p>I have a list <code>ls</code> of length <code>n</code> and want to get all lists of length <code>m</code> (where m > n) that contain <code>ls</code> in the same order, plus (m - n) zeroes, inserted at each possible combination of positions.</p>\n\n<p>For example: <code>ls = [1, 2, 3]</code> and <code>m = 4</code> should return</p>\n\n<pre><code>[[1, 2, 3, 0],\n [1, 2, 0, 3],\n [1, 0, 2, 3],\n [0, 1, 2, 3]]\n</code></pre>\n\n<p>and <code>ls = [1, 2, 3]</code> and <code>m = 5</code> should return</p>\n\n<pre><code>[[1, 2, 3, 0, 0],\n [1, 2, 0, 3, 0],\n [1, 2, 0, 0, 3],\n [1, 0, 2, 3, 0],\n [1, 0, 2, 0, 3],\n [1, 0, 0, 2, 3],\n [0, 1, 2, 3, 0],\n [0, 1, 2, 0, 3],\n [0, 1, 0, 2, 3],\n [0, 0, 1, 2, 3]]\n</code></pre>\n\n<p>The solution should be fast and memory efficient - in particular, it should avoid generating duplicate solutions. Any help is appreciated!</p>\n\n<p>A working (but inefficient) attempt:</p>\n\n<pre><code>ls = [1, 2, 3]\nm = 4\n\nfrom itertools import permutations\n\nn = len(ls)\nresults = []\nfor t in set(permutations('1' * n + '0' * (m - n))):\n    idxs = [i for i, j in enumerate(t) if j == '1']\n    result = [0] * m\n    for idx, value in zip(idxs, ls):\n        result[idx] = value\n    results.append(result)\n</code></pre>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "edited": false, "score": 0, "creation_date": 1534973742, "post_id": 51975432, "comment_id": 90901366, "body": "You might consider a template library like jinja2. It will make it possible to loop and do other control flow structures within a html page: <a href=\"http://jinja.pocoo.org/\" rel=\"nofollow noreferrer\">jinja.pocoo.org</a> If I remember correctly I think it is what powers Flask&#39;s html templating. Other than that you also have <code>df.to_html(...)</code> from pandas itself. Haven&#39;t tried it but might work."}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1534973858, "post_id": 51975432, "comment_id": 90901420, "body": "Your question is a bit vague on what your input is, what you want your output to be, what your actual output is, and how those last two are different. <code>print</code> just sends things to the console, so if you want to actually do something with the output, you&#39;ll have to save it somehow."}, {"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "edited": false, "score": 0, "creation_date": 1535145095, "post_id": 51975432, "comment_id": 90974513, "body": "@ Andrew C: Thanks! I was starting down that path. Jinja/Flask certainly sound interesting and worth learning, even if I don&#39;t use them here."}, {"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1535145337, "post_id": 51975432, "comment_id": 90974573, "body": "@Acccumulation:  I&#39;ll update my question to be a little clearer. I would like to print the html code for 100 tables, pulling data from a df to input into the tables. If it&#39;s easier, the output could be an html file, like flask would do, and I could get the html from the source."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "edited": false, "score": 0, "creation_date": 1535147117, "post_id": 51990228, "comment_id": 90975144, "body": "Nailed it. I wasn&#39;t able to copy it straight to Qualtrics because it kept the double quotes. I copied and pasted values to another cell, then I had to copy that into Word, and finally I could copy it into Qualtrics. I wish I could do it more directly from Excel, but this will work in this instance. Thank you!"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1535147468, "post_id": 51990228, "comment_id": 90975219, "body": "If you just want to concatenate columns, pandas will broadcast the <code>+</code> operator, i.e <code>df[col1]+df[col2]</code> will generate a column in which entry is the concatenation of <code>df[colq]</code> and <code>df[col2]</code> for that row."}, {"owner": {"reputation": 4374, "user_id": 4434072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60fc3263364a9aa1777ecd213e9cbdd9?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gibbons", "link": "https://stackoverflow.com/users/4434072/t-gibbons"}, "edited": false, "score": 0, "creation_date": 1535232678, "post_id": 51990228, "comment_id": 90993163, "body": "For future reference, if you change the html (style) double quotes to single quotes you can copy your Excel cells into Qualtrics without any extra effort."}], "tags": [], "owner": {"reputation": 4374, "user_id": 4434072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60fc3263364a9aa1777ecd213e9cbdd9?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gibbons", "link": "https://stackoverflow.com/users/4434072/t-gibbons"}, "is_accepted": true, "score": 0, "last_activity_date": 1535041141, "creation_date": 1535041141, "answer_id": 51990228, "question_id": 51975432, "link": "https://stackoverflow.com/questions/51975432/python-how-to-iterate-over-a-df-and-output-html-code/51990228#51990228", "title": "Python how to iterate over a df and output html code", "body": "<p>I think a simple approach would be to just create a formula in the first row of your Excel spreadsheet that concatenates the html and a person's information using the &amp; operator.  Then just copy the formula down for the remaining rows. Once you've done that you can copy the column to Qualtrics.  </p>\n"}], "owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 51990228, "answer_count": 1, "score": 1, "last_activity_date": 1535147390, "creation_date": 1534973512, "last_edit_date": 1535147390, "question_id": 51975432, "link": "https://stackoverflow.com/questions/51975432/python-how-to-iterate-over-a-df-and-output-html-code", "title": "Python how to iterate over a df and output html code", "body": "<p>I have a spreadsheet with one row per person. I also have html code to create a table for each person in the spreadsheet. I would like to iterate over the spreadsheet and output the html table code for each person, which I will paste into Qualtrics. </p>\n\n<p>Does anyone have a fairly simple approach to this? I'm still relatively new to Python. I thought I could just use Pandas to read the Excel file and iterate over it using strings to fill in the html code. Like this:</p>\n\n<pre><code>    for i in df.index:\n        print(\n\"\"\"&lt;table&gt;\n  &lt;tbody&gt;&lt;tr&gt;\n    &lt;td style=\"color: purple; font-size: 22pt;\"&gt;&lt;strong&gt;\"\"\"+df['Name']+\"\"\"[i]&lt;/strong&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td style=\"font-size: 9pt;\"&gt;&lt;i&gt;\"\"\"+df['Title'][i]+\"\"\"&lt;/i&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\"\"\")\n</code></pre>\n\n<p>That approach did not work at all. I started looking at Flask, but I haven't been able to figure out the iteration part and it feels like there is probably a simpler way to do this anyway. Thanks for any suggestions!</p>\n\n<p>EDIT: \nJust to clarify the output I was looking for, I wanted to print the html code for 100 tables. The html for each table is the same (sample below), but I would pull Name, Title, etc. from rows of the dataframe. Outputting an html file with 100 tables as described would also work as I could get the html from the source code. </p>\n\n<pre><code>&lt;table&gt;\n  &lt;tbody&gt;&lt;tr&gt;\n    &lt;td style=\"color: purple; font-size: 22pt;\"&gt;&lt;strong&gt;Name&lt;/strong&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td style=\"font-size: 9pt;\"&gt;&lt;i&gt;Title&lt;/i&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": true, "score": 0, "last_activity_date": 1534979812, "creation_date": 1534979812, "answer_id": 51976391, "question_id": 51975416, "link": "https://stackoverflow.com/questions/51975416/what-are-valid-appjar-stretch-function-arguments/51976391#51976391", "title": "What are valid appJar stretch function arguments", "body": "<p>If you look at the appJar <a href=\"https://github.com/jarvisteach/appJar/blob/appJar/appJar/appjar.py\" rel=\"nofollow noreferrer\">source code on GitHub</a>, you can identify what you should pass for <code>stretch</code>:</p>\n\n<p>Looking at how <code>strech</code> is used:</p>\n\n<pre><code>def setStretch(self, exp):\n    self.setExpand(exp)\n...\nstretch = property(getStretch, setStretch)\n</code></pre>\n\n<p>Looking at the source for the <code>setExpand</code> we see the possible values for strech:</p>\n\n<pre><code>def setExpand(self, exp):\n    if exp.lower() == \"none\":\n        self.containerStack[-1]['expand'] = \"NONE\"\n    elif exp.lower() == \"row\":\n        self.containerStack[-1]['expand'] = \"ROW\"\n    elif exp.lower() == \"column\":\n        self.containerStack[-1]['expand'] = \"COLUMN\"\n    else:\n        self.containerStack[-1]['expand'] = \"ALL\"\n</code></pre>\n\n<p>As a result, the possible strings are (case insensitive) <strong>\"None\", \"Row\", \"Column\", or anything else</strong> (which will result in <strong>\"ALL\"</strong>).</p>\n"}, {"tags": [], "owner": {"reputation": 263, "user_id": 5696846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d001e9b3a430ec826ee50092882f8de?s=128&d=identicon&r=PG&f=1", "display_name": "R.Jarvis", "link": "https://stackoverflow.com/users/5696846/r-jarvis"}, "is_accepted": false, "score": 0, "last_activity_date": 1540036673, "creation_date": 1540036673, "answer_id": 52905405, "question_id": 51975416, "link": "https://stackoverflow.com/questions/51975416/what-are-valid-appjar-stretch-function-arguments/52905405#52905405", "title": "What are valid appJar stretch function arguments", "body": "<p>It's also documented here: <a href=\"http://appjar.info/pythonWidgetLayout/#set-stretch-sticky\" rel=\"nofollow noreferrer\">http://appjar.info/pythonWidgetLayout/#set-stretch-sticky</a></p>\n\n<ul>\n<li>none, row, column, both</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 9555423, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JC6lQ9OF3Lw/AAAAAAAAAAI/AAAAAAAAAc8/TLc5oYb1fV4/photo.jpg?sz=128", "display_name": "Stuart Downing", "link": "https://stackoverflow.com/users/9555423/stuart-downing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 51976391, "answer_count": 2, "score": 1, "last_activity_date": 1540036673, "creation_date": 1534973449, "last_edit_date": 1534980088, "question_id": 51975416, "link": "https://stackoverflow.com/questions/51975416/what-are-valid-appjar-stretch-function-arguments", "title": "What are valid appJar stretch function arguments", "body": "<p>So far I've been attempting to create a 2 factor authentication script in python. It works very well now and I wanted to create a gui since this will be running nearly 24/7 on a raspberry pi. </p>\n\n<p>TLDR; I don't understand what the docs mean by \"stretch. Pass a string describing if rows/columns should stretch, to fill the entire GUI. \"</p>\n\n<pre><code>#!/usr/bin/env python\nimport pyotp\nimport os\nimport sys\nimport math\nimport time\nfrom appJar import gui\nudstart = 1\napp = gui(\"2FA Keys\",\"480x320\")\ndef count(n):\n        while n &gt;= 0:\n                time.sleep(1)\n                n -= 1\n        if n == 0:\n                return 1\n\n#Keygenertor function pass the base32 code\ndef keyGen(secret):\n        secretcalc = pyotp.TOTP(secret)\n        code = secretcalc.now()\n        Lcode = list(code)\n        Lcode.insert(3, \" \")\n        Ocode = ''.join(Lcode)\n        return Ocode\n\n#INIT CODES GO HERE\nCoinbaseCode = keyGen(\"3JCAJVDGIW4KHUHL\")\nSiaCoinCode = keyGen(\"PFFO3KKKRQL6ACU5\")\n\napp.stretch(columns)\napp.setFont(50)\napp.addLabel(\"l2\", \"Sia Coin: \" + SiaCoinCode, 0,0,0,0)\napp.setLabelbg(\"l2\", \"blue\")\napp.addLabel(\"l1\", \"Coinbase: \" + CoinbaseCode, 1,0,0,0) #Coinbase 2FA\napp.setLabelBg(\"l1\", \"red\")\n\n\n\nwhile True:\n        if udstart == 1:\n                break\n        else:\n                time.sleep(30)\n        break\ndef update():\n        #UPDATE CODES GO HERE\n        CoinbaseCode = keyGen(\"3JCAJVDGIW4KHUHL\") #Coinbase\n        SiaCoinCode = keyGen(\"PFFO3KKKRQL6ACU5\")\n        app.setLabel(\"l2\", \"Sia Coin: \" + SiaCoinCode)\n        app.setLabelBg(\"l2\", \"blue\")\n        app.setLabel(\"l1\", \"Coinbase: \" + CoinbaseCode)\n        app.setLabelBg(\"l1\", \"red\")\n#profit???\nudstart = 0\napp.registerEvent(update)\napp.go()\n</code></pre>\n\n<p>I have no idea what to pass it.</p>\n"}, {"tags": ["python", "python-3.x", "sqlalchemy"], "comments": [{"owner": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1534974612, "post_id": 51975411, "comment_id": 90901690, "body": "Have you tried using <code>primaryjoin</code> instead of <code>foreign_keys</code>? Then you can specify whatever join criteria you want for the relationship."}, {"owner": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1534974649, "post_id": 51975411, "comment_id": 90901706, "body": "<a href=\"http://docs.sqlalchemy.org/en/latest/orm/join_conditions.html#specifying-alternate-join-conditions\" rel=\"nofollow noreferrer\">docs.sqlalchemy.org/en/latest/orm/&hellip;</a>"}, {"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "reply_to_user": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1534975402, "post_id": 51975411, "comment_id": 90901969, "body": "@jbch <code>primaryjoin</code> whould get only one column, then It gives me either conversations that have the same user on user1 or user2"}, {"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "reply_to_user": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1534975616, "post_id": 51975411, "comment_id": 90902040, "body": "@jbch I tried <code>primaryjoin=&quot;or_(User.id == Conversation.user1, User.id == Conversation.user2)&quot;</code> but it gave me <code>RecursionError</code>"}], "owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535021647, "creation_date": 1534973416, "last_edit_date": 1535021647, "question_id": 51975411, "link": "https://stackoverflow.com/questions/51975411/sqlalchemy-relationship-to-child-with-2-foreinkeys-from-same-parent-column", "title": "SQLAlchemy relationship to child with 2 ForeinKeys from same parent column", "body": "<p>I have a <code>User</code> model and a <code>Conversation</code> model</p>\n\n<pre><code>class Conversation(Base):\n    __tablename__ = 'conversations'\n    id = Column(Integer, primary_key=True)\n    user1 = Column(Integer, ForeignKey('users.id'), unique=False, nullable=False)\n    user2 = Column(Integer, ForeignKey('users.id'), unique=False, nullable=False)\n    date = Column(DateTime, unique=False, nullable=False, default=dt.utcnow)\n\nclass User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    userName = Column(String, unique=False, nullable=True)\n</code></pre>\n\n<p>Im trying to add a <code>relationship()</code> to User model which should return all conversations where <code>Conversation.user1</code> or <code>Conversation.user2</code> is the selected <code>User</code></p>\n\n<p>I tried:</p>\n\n<pre><code>conversations = relationship('Conversation', backref=\"Users\")\n</code></pre>\n\n<p>Which results to this error when I was trying to get the <code>User</code>:</p>\n\n<blockquote>\n  <p>AmbiguousForeignKeysError: Could not determine join condition between\n  parent/child tables on relationship User.conversations - there are\n  multiple foreign key paths linking the tables.  Specify the\n  'foreign_keys' argument, providing a list of those columns which\n  should be counted as containing a foreign key reference to the parent\n  table.</p>\n</blockquote>\n\n<p>I realized I have to specify columns..</p>\n\n<p>So I tried:</p>\n\n<pre><code>conversations = relationship(Conversation, foreign_keys=[Conversation.user1, Conversation.user2], backref=\"Users\")\n</code></pre>\n\n<p>and </p>\n\n<pre><code>conversations = relationship(Conversation, foreign_keys='[Conversation.user1, Conversation.user2]', backref=\"Users\")\n</code></pre>\n\n<p>and again same error!</p>\n\n<p>After that I tried:</p>\n\n<pre><code>conversations = relationship(Conversation, foreign_keys=Conversation.user1 or Conversation.user2, backref=\"Users\")\n</code></pre>\n\n<p>Which returned this error on commiting my <code>Conversation</code> object:</p>\n\n<blockquote>\n  <p>RecursionError: maximum recursion depth exceeded</p>\n</blockquote>\n\n<p>Again I tried to use this:</p>\n\n<pre><code>conversations = relationship(Conversation, foreign_keys=['Conversation.user1', 'Conversation.user2'], backref=\"Users\")\n</code></pre>\n\n<p>And it gave me this error on getting the <code>User</code> object:</p>\n\n<blockquote>\n  <p>ArgumentError: Column-based expression object expected for argument\n  'foreign_keys'; got: 'Conversation.user1', type class 'str'</p>\n</blockquote>\n\n<p>Also I tried to get only one specific column by defining it using <code>foreign_keys</code> but it gave me the same <code>RecursionError</code></p>\n\n<p>I know I can do it by adding a method to <code>User</code> class like:</p>\n\n<pre><code>def conversations(self):\n    return session.query(Conversation).filter(Conversation.user1 == self.id or Conversation.user2 == self.id).all()\n</code></pre>\n\n<p>But it's important for me to do it using <code>relationship()</code>..</p>\n\n<p>Is it possible ?</p>\n\n<p>If it is, how !?</p>\n"}, {"tags": ["python", "pandas", "filter"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1534973704, "creation_date": 1534973704, "answer_id": 51975470, "question_id": 51975379, "link": "https://stackoverflow.com/questions/51975379/pandas-filter-each-client-by-different-date/51975470#51975470", "title": "Pandas: Filter each client by different date", "body": "<p>You can use <code>query</code> method:</p>\n\n<pre><code>df.query('Date &gt; StartDate')\n</code></pre>\n\n<p>Or boolean indexing:</p>\n\n<pre><code>df[df['Date'] &gt; df['StartDate']]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  Customer  Ticket       Date  StartDate\n2        A       2 2018-05-01 2018-01-01\n3        A       3 2018-05-01 2018-01-01\n4        B       4 2018-02-17 2018-01-01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534974425, "creation_date": 1534974425, "answer_id": 51975620, "question_id": 51975379, "link": "https://stackoverflow.com/questions/51975379/pandas-filter-each-client-by-different-date/51975620#51975620", "title": "Pandas: Filter each client by different date", "body": "<ol>\n<li><p>Ensure Data and StartDate are stored as date:</p>\n\n<pre><code>df.info()\n</code></pre></li>\n</ol>\n\n<p>if not date:</p>\n\n<pre><code>df.Date = pd.to_datetime(df.Date, format=\"%d-%m-%Y\")\ndf.StartDate = pd.to_datetime(df.StartDate, format=\"%d-%m-%Y\")\n</code></pre>\n\n<p>2: compare columns:</p>\n\n<pre><code>df2 = df[df.StartDate &lt; df.Date]\n</code></pre>\n\n<p>That should do it</p>\n"}], "owner": {"reputation": 687, "user_id": 6249001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/q0y7B.jpg?s=128&g=1", "display_name": "Daniel Zapata", "link": "https://stackoverflow.com/users/6249001/daniel-zapata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 51975470, "answer_count": 2, "score": -1, "last_activity_date": 1534974425, "creation_date": 1534973203, "question_id": 51975379, "link": "https://stackoverflow.com/questions/51975379/pandas-filter-each-client-by-different-date", "title": "Pandas: Filter each client by different date", "body": "<p>I have transactions of different customers.</p>\n\n<pre><code>Customer | Ticket |     Date    | StartDate\n   A         000     08-12-2017   01-01-2018\n   B         001     17-12-2017   01-01-2018\n   A         002     05-01-2018   01-01-2018\n   A         003     05-01-2018   01-01-2018\n   B         004     17-02-2018   01-01-2018\n</code></pre>\n\n<p>StartDate is when each customer started using the app. So, I have transactions of customer frmo before they started using the app. Each customer have different StartDate. How can I filter the transactions and get only the transactions after each customer started using the app.</p>\n\n<p>In this example I will only get the ticket 002, 003 and 004 since ticket 000 and 001 are from ebfore each customer started using the app.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "xml", "parsing", "elementtree", "findall"], "comments": [{"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534973757, "post_id": 51975369, "comment_id": 90901370, "body": "Your XML is not well formed -- there is an extra <code>&lt;</code> in the second time stamp"}], "answers": [{"tags": [], "owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "is_accepted": false, "score": 0, "last_activity_date": 1534974581, "creation_date": 1534974581, "answer_id": 51975654, "question_id": 51975369, "link": "https://stackoverflow.com/questions/51975369/python-print-last-element-value-in-xml/51975654#51975654", "title": "python print last element value in XML", "body": "<p>With a correctly formed version of your XML above, this will find specifically the last timestamp as a string. Without more information, I can't make sure this will be scalable at all.</p>\n\n<pre><code>t = root[-1].find(\".//*[@Name='user-08']/Value\").text\nprint(t)\n#=&gt; 8/20/2018 10:52:01 PM\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6042407, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--JSzSq08RwU/AAAAAAAAAAI/AAAAAAAAEc4/KmTIpJLqcac/photo.jpg?sz=128", "display_name": "Shawn Mahoney", "link": "https://stackoverflow.com/users/6042407/shawn-mahoney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534974581, "creation_date": 1534973128, "question_id": 51975369, "link": "https://stackoverflow.com/questions/51975369/python-print-last-element-value-in-xml", "title": "python print last element value in XML", "body": "<p>Using ElementTree, I have gone through a ton of post here and can't find any that are specific to my xml.  I want to return the last timestamp in the example xml below</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;Entities TotalResults=\"125\"&gt;\n    &lt;Entity Type=\"defect\"&gt;\n        &lt;Fields&gt;\n            &lt;Field Name=\"id\"&gt;\n                &lt;Value&gt;520342&lt;/Value&gt;\n            &lt;/Field&gt;\n            &lt;Field Name=\"priority\"&gt;\n                &lt;Value&gt;&lt;/Value&gt;\n            &lt;/Field&gt;\n            &lt;Field Name=\"user-08\"&gt;\n                &lt;Value&gt;8/20/2018 9:52:01 PM&lt;/Value&gt;\n            &lt;/Field&gt;\n        &lt;/Fields&gt;\n        &lt;RelatedEntities/&gt;\n    &lt;/Entity&gt;\n    &lt;Entity Type=\"defect\"&gt;\n        &lt;Fields&gt;\n            &lt;Field Name=\"id\"&gt;\n                &lt;Value&gt;520574&lt;/Value&gt;\n            &lt;/Field&gt;\n            &lt;Field Name=\"priority\"&gt;\n                &lt;Value&gt;&lt;/Value&gt;\n            &lt;/Field&gt;\n            &lt;Field Name=\"user-08\"&gt;\n                &lt;Value&gt;8/20/2018 10:52:01 PM&lt;&lt;/Value&gt;\n            &lt;/Field&gt;\n        &lt;/Fields&gt;\n        &lt;RelatedEntities/&gt;\n    &lt;/Entity&gt;\n&lt;/Entities&gt;\n</code></pre>\n"}, {"tags": ["python", "mysql", "database", "python-2.7"], "comments": [{"owner": {"reputation": 3909, "user_id": 50003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6703354d2d48c2e605bbe68ab1ff65ff?s=128&d=identicon&r=PG", "display_name": "Gnudiff", "link": "https://stackoverflow.com/users/50003/gnudiff"}, "edited": false, "score": 1, "creation_date": 1534973171, "post_id": 51975342, "comment_id": 90901142, "body": "Well, if its telling you plainly that you don&#39;t have the right to write to the table   or you supplied wrong username and /or password"}, {"owner": {"reputation": 713, "user_id": 9424742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JR ibkr", "link": "https://stackoverflow.com/users/9424742/jr-ibkr"}, "edited": false, "score": 0, "creation_date": 1534973488, "post_id": 51975342, "comment_id": 90901271, "body": "This might be helpful: <a href=\"https://dev.mysql.com/doc/refman/8.0/en/grant.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/8.0/en/grant.html</a>"}, {"owner": {"reputation": 601, "user_id": 3970404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf6ff14b6799f7569b7c89bfa695530?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Stokes", "link": "https://stackoverflow.com/users/3970404/dave-stokes"}, "edited": false, "score": 0, "creation_date": 1535045963, "post_id": 51975342, "comment_id": 90932483, "body": "Can you use the mysql shell to login to the server with those credentials?"}], "owner": {"reputation": 11, "user_id": 10261052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f109d579d5a40bea18b5113f755b9180?s=128&d=identicon&r=PG&f=1", "display_name": "tn1511", "link": "https://stackoverflow.com/users/10261052/tn1511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534985057, "creation_date": 1534972977, "last_edit_date": 1534985057, "question_id": 51975342, "link": "https://stackoverflow.com/questions/51975342/accessing-mysql-from-python-2-7-programmingerror-1045-28000", "title": "Accessing MySQL from Python 2.7: ProgrammingError: 1045 (28000)", "body": "<p>I am having difficulties connecting to a MySQL database using Python 2.7. The error I'm getting is </p>\n\n<blockquote>\n  <p>ProgrammingError: 1045 (28000): Access denied for user\n  'tommyan'@'localhost' (using password: YES)</p>\n</blockquote>\n\n<p>I know similar questions exist, but none of those were helpful to me. My code is below, thanks in advance.</p>\n\n<pre><code>import mysql.connector\n\nmydb = mysql.connector.connect(\n  host=\"127.0.0.1\",\n  user=\"tommyan\",\n  passwd=\"######\",\n  database=\"mydatabase\"\n)\n\n mycursor = mbdb.cursor()\n\nsql = \"INSERT INTO places (name, desc) VALUES (%s, %s)\"\nval = (\"Natinal gallery\", \"Housing masterpieces by painters including van Gogh, \nRenoir, da Vinci and Michelangelo\")\n\nmycursor.execute(sql, val)\n\nmydb.commit()\n\nprint(mycursor.rowcount, \"record inserted.\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "netcdf", "python-xarray"], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 10071715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8744fdc6f8141f749dddbea6a5b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "SHV_la", "link": "https://stackoverflow.com/users/10071715/shv-la"}, "edited": false, "score": 0, "creation_date": 1534975478, "post_id": 51975409, "comment_id": 90901995, "body": "Thank you @jhamman, but unfortunately this doesn&#39;t seem to work, it returns &#39;ERROR:root:Internal Python error in the inspect module.&#39; before then providing a tace back which says and the end &#39;OSError: [Errno 24] Too many open files&#39;. However this method does work for concatenating each year, i.e. &#39;ds = xr.open_mfdataset(&#39;ppt_1_1998*.nc&#39;). I wonder if the error is related to the &#39;01,02,03...11,12&#39; at the end of the file names? or is it just that there are a lot of files? I am not sure"}, {"owner": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "reply_to_user": {"reputation": 569, "user_id": 10071715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8744fdc6f8141f749dddbea6a5b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "SHV_la", "link": "https://stackoverflow.com/users/10071715/shv-la"}, "edited": false, "score": 1, "creation_date": 1534978115, "post_id": 51975409, "comment_id": 90902665, "body": "@SHV_la - see edit 1 above. Use the autoclose option in this case."}, {"owner": {"reputation": 569, "user_id": 10071715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8744fdc6f8141f749dddbea6a5b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "SHV_la", "link": "https://stackoverflow.com/users/10071715/shv-la"}, "edited": false, "score": 1, "creation_date": 1535033399, "post_id": 51975409, "comment_id": 90925075, "body": "wow, incredible. That has saved so much work! Thank you very much indeed :)"}], "tags": [], "owner": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "is_accepted": true, "score": 6, "last_activity_date": 1534978092, "last_edit_date": 1534978092, "creation_date": 1534973413, "answer_id": 51975409, "question_id": 51975333, "link": "https://stackoverflow.com/questions/51975333/python-loop-to-concatenate-multiple-200-netcdf-files-to-form-one-file/51975409#51975409", "title": "Python: loop to concatenate multiple (200+) netCDF files to form one file", "body": "<p>Xarray provides the <code>open_mfdataset()</code> function that should the open and concatenate steps for you. In your case, you can simply do:</p>\n\n<pre><code>import xarray as xr\n\nds = xr.open_mfdataset('ppt_1_*.nc')\ndf = ds.to_dataframe()\n\n# or\nds = xr.open_mfdataset([list_of_filenames])\ndf = ds.to_dataframe()\n</code></pre>\n\n<p>Either way, xarray will handle the open and concatenate steps within the open_mfdataset for you. More info in the xarray docs: <a href=\"http://xarray.pydata.org/en/latest/io.html#combining-multiple-files\" rel=\"noreferrer\">http://xarray.pydata.org/en/latest/io.html#combining-multiple-files</a></p>\n\n<p>Edit 1:</p>\n\n<p>In the event you're dealing with many files (too many to keep open at once), you can use the <code>autoclose=True</code> option within <code>open_mfdataset</code>. That would look like:</p>\n\n<pre><code>ds = xr.open_mfdataset('ppt_1_*.nc', autoclose=True)\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 10071715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8744fdc6f8141f749dddbea6a5b7e6?s=128&d=identicon&r=PG&f=1", "display_name": "SHV_la", "link": "https://stackoverflow.com/users/10071715/shv-la"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1975, "favorite_count": 3, "accepted_answer_id": 51975409, "answer_count": 1, "score": 3, "last_activity_date": 1534983439, "creation_date": 1534972922, "last_edit_date": 1534983439, "question_id": 51975333, "link": "https://stackoverflow.com/questions/51975333/python-loop-to-concatenate-multiple-200-netcdf-files-to-form-one-file", "title": "Python: loop to concatenate multiple (200+) netCDF files to form one file", "body": "<p>I have a large number (200+) of netCDF files which are indexed by date/time and contain 3 hourly measurements of precipitation for a single location, covering 20 years, a short example is shown below. </p>\n\n<pre><code>                        ppt     latitude    longitude\ntime            \n2017-03-01 00:00:00     0.00    16.625      -62.375\n2017-03-01 03:00:00     0.00    16.625      -62.375\n2017-03-01 06:00:00     0.00    16.625      -62.375\n2017-03-01 09:00:00     0.00    16.625      -62.375\n2017-03-01 12:00:00     0.00    16.625      -62.375\n2017-03-01 15:00:00     0.00    16.625      -62.375\n</code></pre>\n\n<p>Each file contains a month's worth of data. My aim is to concatenate all of these files into one containing all the data for 20 years. So far I have deduced that a potential way forward is to extract the data from each netCDF file and put them into a dataframe:</p>\n\n<pre><code>import xarray as xr\nimport pandas as pd\n\nds = xr.open_dataset('ppt_1_201703.nc')\ndf = ds.to_dataframe()\n</code></pre>\n\n<p>If I had a small number of files, using concat([df, df2, df3]) would suffice and I would extract data from each netCDF file manually. However, for such a large number of files, this approach would be time consuming to say the least. </p>\n\n<p>My thoughts so far amount to believing that the best approach would be a for loop that cycles through each file according to its name and produces a dataframe for each. I would then need another for loop to concatenate each dataframe. </p>\n\n<p>I am stuggling with how to construct these loops. The file names are like this:</p>\n\n<pre><code>ppt_1_199801.nc\nppt_1_199802.nc\nppt_1_199803.nc\n...\nppt_1_201610.nc\nppt_1_201611.nc\nppt_1_201612.nc\n</code></pre>\n\n<p>Are there any ideas out there? Sorry if the answer is easy (I am quite new to python), but I could not find anything that quite solved my problem elsewhere. Thanks! </p>\n"}, {"tags": ["python", "datetime", "apache-spark", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1534976754, "post_id": 51975317, "comment_id": 90902354, "body": "You can use the method on <a href=\"https://stackoverflow.com/questions/51140470/using-a-column-value-as-a-parameter-to-a-spark-dataframe-function\">this post</a> but <code>from_utc_timestamp</code> doesn&#39;t seem to like <code>GMT</code> or <code>SGT</code> (returning timestamp column unchanged)."}, {"owner": {"reputation": 1188, "user_id": 3333687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViHfO.jpg?s=128&g=1", "display_name": "jka.ne", "link": "https://stackoverflow.com/users/3333687/jka-ne"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1535012911, "post_id": 51975317, "comment_id": 90912480, "body": "Looks like the use of 3 letter timezones are deprecated. thanks @pault"}], "answers": [{"tags": [], "owner": {"reputation": 1188, "user_id": 3333687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViHfO.jpg?s=128&g=1", "display_name": "jka.ne", "link": "https://stackoverflow.com/users/3333687/jka-ne"}, "is_accepted": true, "score": 2, "last_activity_date": 1535035308, "last_edit_date": 1535035308, "creation_date": 1535012547, "answer_id": 51981273, "question_id": 51975317, "link": "https://stackoverflow.com/questions/51975317/get-local-time-in-pyspark-dependent-on-a-column/51981273#51981273", "title": "get local time in pyspark dependent on a column", "body": "\n\n<p>Using <a href=\"https://stackoverflow.com/questions/51140470/using-a-column-value-as-a-parameter-to-a-spark-dataframe-function\"><code>pyspark.sql.functions.expr()</code> rather the the dataframe API</a>, this  can be achieved by:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import pyspark.sql.functions as F\n\ndf = df.select(\n    '*',\n    F.expr('from_utc_timestamp(utc_time, timezone)').alias(\"timestamp_local\")\n)\n</code></pre>\n\n<p>However, the use of 3 letter timezones is deprecated. Per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html\" rel=\"nofollow noreferrer\">Java docs</a>:</p>\n\n<blockquote>\n  <p>For compatibility with JDK 1.1.x, some other three-letter time zone IDs (such as \"PST\", \"CTT\", \"AST\") are also supported. However, their use is deprecated because the same abbreviation is often used for multiple time zones (for example, \"CST\" could be U.S. \"Central Standard Time\" and \"China Standard Time\"), and the Java platform can then only recognize one of them.</p>\n</blockquote>\n"}], "owner": {"reputation": 1188, "user_id": 3333687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViHfO.jpg?s=128&g=1", "display_name": "jka.ne", "link": "https://stackoverflow.com/users/3333687/jka-ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "accepted_answer_id": 51981273, "answer_count": 1, "score": 3, "last_activity_date": 1535035308, "creation_date": 1534972862, "question_id": 51975317, "link": "https://stackoverflow.com/questions/51975317/get-local-time-in-pyspark-dependent-on-a-column", "title": "get local time in pyspark dependent on a column", "body": "<p>In pyspark, one can get the local time from the UTC time by passing the timestamp and the timezone <a href=\"http://spark.apache.org/docs/2.2.2/api/python/_modules/pyspark/sql/functions.html#from_utc_timestamp\" rel=\"nofollow noreferrer\">to the function</a> <code>from_utc_timestamp</code></p>\n\n<pre><code>&gt;&gt;&gt; df = spark.createDataFrame([('1997-02-28 10:30:00',)], ['t'])\n&gt;&gt;&gt; df.select(from_utc_timestamp(df.t, \"PST\").alias('t')).collect()\n[Row(t=datetime.datetime(1997, 2, 28, 2, 30))]\n</code></pre>\n\n<p>The timezone here is provided as a string literal (\"PST\"). If one were to have the following data structure:</p>\n\n<pre><code>+--------------------------+---------+\n| utc_time                 |timezone |\n+--------------------------+---------+\n|  2018-08-03T23:27:30.000Z|  PST    |\n|  2018-08-03T23:27:30.000Z|  GMT    |\n|  2018-08-03T23:27:30.000Z|  SGT    |\n+--------------------------+---------+\n</code></pre>\n\n<p>How could one achieve the following new column (preferably without a UDF)?</p>\n\n<pre><code>+--------------------------+-----------------------------------+\n| utc_time                 |timezone | local_time              |\n+--------------------------+-----------------------------------+\n|  2018-08-03T23:27:30.000Z|  PST    | 2018-08-03T15:27:30.000 |\n|  2018-08-03T23:27:30.000Z|  GMT    | 2018-08-04T00:27:30.000 |\n|  2018-08-03T23:27:30.000Z|  SGT    | 2018-08-04T07:27:30.000 |\n+--------------------------+-----------------------------------+\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "gtk3", "pygobject"], "answers": [{"tags": [], "owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "is_accepted": true, "score": 0, "last_activity_date": 1536526215, "creation_date": 1536526215, "answer_id": 52248549, "question_id": 51975256, "link": "https://stackoverflow.com/questions/51975256/setup-my-own-drag-icon-in-a-gtk-treeview/52248549#52248549", "title": "Setup my own drag icon in a Gtk.Treeview", "body": "<p>This answer is based on a <a href=\"https://gitlab.gnome.org/GNOME/pygobject/issues/251\" rel=\"nofollow noreferrer\">GitLab Issue</a>.</p>\n\n<p>The documentation is unclear about that point. The <code>drag_begin()</code> should look like this</p>\n\n<pre><code>def drag_begin(self, widget, context):\n    self._drag_icon = GdkPixbuf.Pixbuf.new_from_xpm_data(my_xpm)\n    Gtk.drag_set_icon_pixbuf(context, self._drag_icon, 0, 0)\n</code></pre>\n"}], "owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 52248549, "answer_count": 1, "score": 1, "last_activity_date": 1536526215, "creation_date": 1534972596, "question_id": 51975256, "link": "https://stackoverflow.com/questions/51975256/setup-my-own-drag-icon-in-a-gtk-treeview", "title": "Setup my own drag icon in a Gtk.Treeview", "body": "<p>I want to use my own drag icon in a <code>Gtk.Treeview</code>. The <a href=\"https://python-gtk-3-tutorial.readthedocs.io/en/latest/drag_and_drop.html#drag-source-signals\" rel=\"nofollow noreferrer\">official tutorial</a> says that the <code>drag-begin</code> signal/event can be used for this. The API-Reference give <a href=\"https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Widget.html#Gtk.Widget.signals.drag_begin\" rel=\"nofollow noreferrer\">more details</a> about how to do it.</p>\n\n<p>But in my example here it doesn't work. There is still the treeviews default drag icon used. It doesn't matter if I connect via <code>connect()</code> or <code>connect_after()</code>.</p>\n\n<pre><code>#!/usr/bin/env python3\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk\nfrom gi.repository import Gdk\nfrom gi.repository import GdkPixbuf\n\n# from wikipedia\nmy_xpm = [\n\"24 20 3 1 12 10 XPMEXT\",\n\"  c None\",\n\". c #0000FF\",\n\"+ c #FF0000\",\n\"                        \",\n\"    ..                  \",\n\"   ....                 \",\n\"  ......++++++++        \",\n\" .........+++++++       \",\n\" ..........+++++++      \",\n\" ............++++++     \",\n\" .............++++++    \",\n\"  ..............++++    \",\n\"   +.............+++    \",\n\"   ++.............++    \",\n\"   +++.............+    \",\n\"   +++++.............   \",\n\"   ++++++.............. \",\n\"   ++++++++............ \",\n\"   +++++++++........... \",\n\"    +++++++++.........  \",\n\"     ++++++++++.......  \",\n\"      ++++++++++.....   \",\n\"       +++++++++ ...    \"\n]\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        Gtk.Window.__init__(self, title=\"TreeView Drag and Drop\")\n        self.connect(\"delete-event\", Gtk.main_quit)\n        self.box = Gtk.Box()\n        self.add(self.box)\n\n        # \"model\" with dummy data\n        self.store = Gtk.TreeStore(str)\n        for i in range(5):\n            self.store.append(None, ['Item {}'.format(i)]) # treeview\n        self.tree = Gtk.TreeView(model=self.store)\n        self.box.pack_start(self.tree, True, True, 0)\n\n        # build columsn\n        colA = Gtk.TreeViewColumn('Col A', Gtk.CellRendererText(), text=0)\n        self.tree.append_column(colA)\n\n        # icon view\n        self._icon = GdkPixbuf.Pixbuf.new_from_xpm_data(my_xpm)\n        self.image = Gtk.Image.new_from_pixbuf(self._icon)\n        self.box.pack_start(self.image, True, True, 0)\n\n        # DnD events\n        self.tree.connect(\"drag-data-received\", self.drag_data_received)\n        self.tree.connect(\"drag-data-get\", self.drag_data_get)\n        #self.tree.connect(\"drag-begin\", self.drag_begin)\n        self.tree.connect_after(\"drag-begin\", self.drag_begin)\n\n        target_entry = Gtk.TargetEntry.new('text/plain', 2, 0)\n        self.tree.enable_model_drag_source(\n                Gdk.ModifierType.BUTTON1_MASK,[target_entry], \n                Gdk.DragAction.DEFAULT|Gdk.DragAction.MOVE\n        )\n        self.tree.enable_model_drag_dest(\n                [target_entry],\n                Gdk.DragAction.DEFAULT|Gdk.DragAction.MOVE\n        )\n\n    def drag_data_get (self, treeview, drag_context, data, info, time):\n        model, path = treeview.get_selection().get_selected_rows()\n        print('dd-get\\tpath: {}'.format(path))\n        data.set_text(str(path[0]), -1)\n\n    def drag_data_received (self, treeview, drag_context, x,y, data,info, time):\n        print('dd-received')\n        store = treeview.get_model()\n        source_iter = store.get_iter(data.get_text())\n        dest_path, drop_pos = self.tree.get_dest_row_at_pos(x, y)\n        print('path: {} pos: {}'.format(dest_path, drop_pos))\n\n    def drag_begin(self, widget, context):\n        self._drag_icon = GdkPixbuf.Pixbuf.new_from_xpm_data(my_xpm)\n        widget.drag_source_set_icon_pixbuf(self._drag_icon)\n        return context\n\nwin = MainWindow()\nwin.show_all()\nGtk.main()\n</code></pre>\n"}, {"tags": ["python", "static-methods"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1534972746, "post_id": 51975231, "comment_id": 90900969, "body": "Unless you have some actual reason it should be a static method, just use a function. I&#39;m not sure what you are doubtful about."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1534973523, "post_id": 51975231, "comment_id": 90901286, "body": "The fact that you wanted to call it as <code>some_utility_function(self.member)</code> instead of <code>self.some_utility_function(self.member)</code> or <code>Foo.some_utility_function(self.member)</code> means that intuitively, you&#39;re thinking of it as a function, not a staticmethod. In which case you should <i>definitely</i> write that one as a function, not a staticmethod."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534973937, "post_id": 51975231, "comment_id": 90901447, "body": "Are you asking &quot;How do I follow the Google style guide?&quot; or &quot;What is the best practice, whether that agrees with Google or not?&quot;"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1534977239, "post_id": 51975231, "comment_id": 90902457, "body": "Google Python Style Guide is not Python Style Guide. Google seems to feel that <code>@staticmethod</code> is evil, but that may not be what everyone else thinks. As for yourself, you may follow it or not follow it (unless you have to follow, that is)."}, {"owner": {"reputation": 167, "user_id": 4722198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7v7x5.jpg?s=128&g=1", "display_name": "HanaKaze", "link": "https://stackoverflow.com/users/4722198/hanakaze"}, "edited": false, "score": 0, "creation_date": 1563467900, "post_id": 51975231, "comment_id": 100719475, "body": "I am asking this question because I feel it is important to understand why the top companies in the world would prefer such a style. By understanding why the top coders do this I can better learn the language. It&#39;s not about admitting google has the best style, it&#39;s about learning from different perspective. It&#39;s very funny to see people attacking me for asking this and downvoting the question."}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1534973928, "creation_date": 1534973928, "answer_id": 51975516, "question_id": 51975231, "link": "https://stackoverflow.com/questions/51975231/why-choose-module-level-function-over-staticmethod-in-python-according-to-goog/51975516#51975516", "title": "Why choose module level function over @staticmethod in Python (according to Google Style Guide)?", "body": "<p>The way you've written the call to <code>some_utility_function()</code>, it isn't defined on the class anyway. If it were, you would be using <code>self.some_utility_function()</code> or possibly <code>Foo.some_utility_function()</code> to call it. So you've already done it the way the style guide recommends.</p>\n\n<p>The <code>@classmethod</code> and <code>@staticmethod</code> decorators are used primarily to tell Python what to pass as the first argument to the method in place of the usual <code>self</code>: either the type, or nothing at all. But if you're using <code>@staticmethod</code>, and need neither the instance nor its type, should it really be a member of the class at all? That's what they're asking you to consider here: should utility functions be methods of a class, when they are not actually tied to that class in any way? Google says no.</p>\n\n<p>But this is just Google's style guide. They have decided that they want their programmers to prefer module-level functions. Their word is not law. Obviously the designers of Python saw a use for <code>@staticmethod</code> or they wouldn't have implemented it! If you can make a case for having a utility function attached to a class, feel free to use it.</p>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 7098036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4396302d105fa320b52bb9e41b2e5928?s=128&d=identicon&r=PG&f=1", "display_name": "MarkoPaulo", "link": "https://stackoverflow.com/users/7098036/markopaulo"}, "edited": false, "score": 1, "creation_date": 1602544475, "post_id": 51975595, "comment_id": 113748766, "body": "Your answer is quite informative but I am still trying to understand why @staticmethod is labeled as evil by google? What are the issues that would arise by using them if let&#39;s say,  you do so when you want to logically tie a helper method to a specific class?"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 5, "last_activity_date": 1534974888, "last_edit_date": 1592644375, "creation_date": 1534974338, "answer_id": 51975595, "question_id": 51975231, "link": "https://stackoverflow.com/questions/51975231/why-choose-module-level-function-over-staticmethod-in-python-according-to-goog/51975595#51975595", "title": "Why choose module level function over @staticmethod in Python (according to Google Style Guide)?", "body": "<blockquote>\n<p>How to understand the Google Python Style Guide that says:</p>\n<blockquote>\n<p>Never use @staticmethod unless forced to in order to integrate with an API defined in an existing library. Write a module level function instead</p>\n</blockquote>\n</blockquote>\n<p>Well, you should understand it as Google's style guide. If you're writing Python code for Google, or contributing to a project that conforms to that style guide, or have chosen to use it for a project of your own, the answer is pretty simple: Don't use <code>@staticmethod</code> except when forced to by an API.</p>\n<p>This means there are no judgment-call cases: A utility function inside of a class is not forced to be a <code>@staticmethod</code> by an API, so it should not be a <code>@staticmethod</code>.</p>\n<p>The same is true for some other common<sup>1</sup> reasons for <code>@staticmethod</code>. If you want a default value for an instance attribute that's meant to hold a callback function\u2026 too bad, find another way to write it (e.g., a local function defined inside <code>__init__</code>). If you want something that looks like a <code>@classmethod</code> but explicitly doesn't covary with subclasses\u2026 too bad, it just can't look like a <code>@classmethod</code>.</p>\n<hr />\n<p>Of course if you're <em>not</em> following Google's style guide, then you should understand it as just one opinion among many. Plenty of Python developers aren't quite as hard against <code>@staticmethod</code> as that guide is. Of course Google is a pretty prominent developer of lots of Python code. On the other hand, Google's style guide was written while imported Java-isms were more of a problem than today.<sub>2</sub> But you probably don't want to think too much about how much weight to give each opinion; instead, when it's important, learn the issues and come up with your own opinion.</p>\n<hr />\n<p>As for your specific example, as I said in a comment: the fact that you naturally find yourself writing <code>some_utility_function(self.member)</code> instead of <code>self.some_utility_function(self.member)</code> or <code>Foo.some_utility_function(self.member)</code> means that intuitively, you're already thinking of it as a function, not a <code>@staticmethod</code>. In which case you should definitely write that one as a function, not a <code>@staticmethod</code>.</p>\n<p>That may be just the opinion of one guy on the internet, but I think most Python developers would agree in this case. It's the times when you <em>do</em> naturally find yourself prefixing <code>self.</code> before every call when there's a judgment call to make.</p>\n<hr />\n<p><sub>1. Well, not exactly <em>common</em>. But they aren't so rare that they never come up. And they were common enough that, when there was discussion about deprecating <code>@staticmethod</code> for Python 3, someone quickly came up with these two cases, with examples from the standard library, and that was enough for Guido to kill the discussion.</sub></p>\n<p><sub>2. In Java, there are no module-level functions, and you're forced to write static methods to simulate them. And there were a few years where most university CS programs were focused on Java, and a ton of software was written by Java, so tons of people were writing Python classes with way too many <code>@staticmethod</code>s (and getters and setters, and other Java-isms).</sub></p>\n"}, {"tags": [], "owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "is_accepted": false, "score": 0, "last_activity_date": 1587883959, "last_edit_date": 1587883959, "creation_date": 1585820898, "answer_id": 60988713, "question_id": 51975231, "link": "https://stackoverflow.com/questions/51975231/why-choose-module-level-function-over-staticmethod-in-python-according-to-goog/60988713#60988713", "title": "Why choose module level function over @staticmethod in Python (according to Google Style Guide)?", "body": "<p><sub>My 2\u00a2</sub></p>\n\n<p>The point is that when you want to do <a href=\"https://dev.to/middlebrooks314/duck-typing-1gnn\" rel=\"nofollow noreferrer\">duck-typing</a> <a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">polymorphic</a> things, defining module level functions is overkilled, especially if your definitions are very short. E.g. defining</p>\n\n<pre><code>class StaticClassA:\n    @staticmethod\n    def maker(i: int) -&gt; int:\n        return 2*i\n\nclass StaticClassB:\n    @staticmethod\n    def maker(i: int) -&gt; float:\n        return pow(i, 2)\n\n#[...] say, 23 other classes definitions\n\nclass StaticClassZ:\n    @staticmethod\n    def maker(i: int) -&gt; float:\n        return 2*pow(i, 2)\n</code></pre>\n\n<p>Is clearly smarter than having 26 (from A to Z) classes defined within 26 modules.</p>\n\n<p><hr>\nA practical example of what I imply with the word \"polymorphism\" ? With the above classes definitions, you can do</p>\n\n<pre><code>for class_ in [StaticClassA, StaticClassB, StaticClassZ]:\n    print(class_.maker(6))\n\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4722198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7v7x5.jpg?s=128&g=1", "display_name": "HanaKaze", "link": "https://stackoverflow.com/users/4722198/hanakaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1587883959, "creation_date": 1534972475, "last_edit_date": 1574922608, "question_id": 51975231, "link": "https://stackoverflow.com/questions/51975231/why-choose-module-level-function-over-staticmethod-in-python-according-to-goog", "title": "Why choose module level function over @staticmethod in Python (according to Google Style Guide)?", "body": "<p>According to Google Python Style Guide, static methods should (almost) never be used:</p>\n\n<blockquote>\n  <p>Never use @staticmethod unless forced to in order to integrate with an\n  API defined in an existing library. Write a module level function\n  instead</p>\n</blockquote>\n\n<p>What are the reasons behind such recommendation?</p>\n\n<p>Is this particular to Google only or are there any other (more general) downsides with using static methods in Python?</p>\n\n<p>Especially, what is the best practice if I want to implement an utility function inside of a class that will be called by other public member functions of that class?</p>\n\n<pre><code>class Foo: \n    .......\n    def member_func(self): \n        some_utility_function(self.member)\n</code></pre>\n\n<p><a href=\"https://github.com/google/styleguide/blob/gh-pages/pyguide.md\" rel=\"noreferrer\">google python style guide</a></p>\n"}, {"tags": ["python", "pandas", "sorting", "group-by"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1534973531, "last_edit_date": 1534973531, "creation_date": 1534972913, "answer_id": 51975332, "question_id": 51975227, "link": "https://stackoverflow.com/questions/51975227/sort-column-based-on-specific-column-python-pandas/51975332#51975332", "title": "sort column based on specific column | python | pandas", "body": "<h2><code>sort_values</code> takes a list of columns</h2>\n\n<p>Assuming your column names were <code>[0, 1, 2, 3]</code></p>\n\n<pre><code>df.sort_values([0, 3], ascending=[True, False])\n\n      0       1       2       3\n1  c234  0.8760  0.4560  0.8760\n0  c234  0.4255  0.2348  0.4255\n4  c561  0.8231  0.9750  0.9750\n2  c561  0.9527  0.2630  0.9527\n3  c561  0.4111  0.1543  0.4111\n</code></pre>\n\n<hr>\n\n<h2>Preserve row placement</h2>\n\n<p>Assume the first column is not sorted <strong>and</strong> you don't want it sorted.  You just want the rows within each group sorted.</p>\n\n<pre><code>df.loc[\n    df.groupby(0)[3].transform(\n        lambda x: x.sort_values(ascending=False).index\n    ).astype(df.index.dtype)\n]\n\n      0       1       2       3\n1  c234  0.8760  0.4560  0.8760\n0  c234  0.4255  0.2348  0.4255\n4  c561  0.8231  0.9750  0.9750\n2  c561  0.9527  0.2630  0.9527\n3  c561  0.4111  0.1543  0.4111\n</code></pre>\n\n<hr>\n\n<p>But that isn't interesting.  Suppose the dataframe were this instead</p>\n\n<pre><code>      0       1       2       3\n0  c561  0.9527  0.2630  0.9527\n1  c234  0.4255  0.2348  0.4255\n2  c234  0.8760  0.4560  0.8760\n3  c561  0.4111  0.1543  0.4111\n4  c561  0.8231  0.9750  0.9750\n</code></pre>\n\n<p>Notice that <code>'c561'</code> is at the top and more at the bottom.  We can sort them and keep there same row positions.  Let's run the last solution again.</p>\n\n<pre><code>      0       1       2       3\n4  c561  0.8231  0.9750  0.9750\n2  c234  0.8760  0.4560  0.8760\n1  c234  0.4255  0.2348  0.4255\n0  c561  0.9527  0.2630  0.9527\n3  c561  0.4111  0.1543  0.4111\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 713, "user_id": 9424742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JR ibkr", "link": "https://stackoverflow.com/users/9424742/jr-ibkr"}, "edited": false, "score": 0, "creation_date": 1534973036, "post_id": 51975343, "comment_id": 90901082, "body": "Also add following link :  <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}, {"owner": {"reputation": 713, "user_id": 9424742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JR ibkr", "link": "https://stackoverflow.com/users/9424742/jr-ibkr"}, "edited": false, "score": 0, "creation_date": 1534973321, "post_id": 51975343, "comment_id": 90901217, "body": "This is a duplicate question <a href=\"https://stackoverflow.com/questions/37287938/sort-pandas-dataframe-by-value\" title=\"sort pandas dataframe by value\">stackoverflow.com/questions/37287938/&hellip;</a>"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 1, "creation_date": 1534973680, "post_id": 51975343, "comment_id": 90901344, "body": "Note that this will sort by the first column, then by the fourth.  If you want to sort by the fourth, but keep the original order for the first column, it&#39;s more complicated."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 3, "last_activity_date": 1534973082, "last_edit_date": 1534973082, "creation_date": 1534972979, "answer_id": 51975343, "question_id": 51975227, "link": "https://stackoverflow.com/questions/51975227/sort-column-based-on-specific-column-python-pandas/51975343#51975343", "title": "sort column based on specific column | python | pandas", "body": "<p>Use, <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html#pandas-dataframe-sort-values\" rel=\"nofollow noreferrer\"><code>sort_values</code></a> with <code>ascending</code> as a boolean list to determine direction:</p>\n\n<pre><code>df.sort_values([0,3], ascending=[True, False])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>      0       1       2       3\n1  c234  0.8760  0.4560  0.8760\n0  c234  0.4255  0.2348  0.4255\n4  c561  0.8231  0.9750  0.9750\n2  c561  0.9527  0.2630  0.9527\n3  c561  0.4111  0.1543  0.4111\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 8919443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512b0b6982152bef9c7103e34f8b4126?s=128&d=identicon&r=PG&f=1", "display_name": "LamaMo", "link": "https://stackoverflow.com/users/8919443/lamamo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1534973705, "accepted_answer_id": 51975343, "answer_count": 2, "score": 1, "last_activity_date": 1534973531, "creation_date": 1534972457, "question_id": 51975227, "link": "https://stackoverflow.com/questions/51975227/sort-column-based-on-specific-column-python-pandas", "closed_reason": "Duplicate", "title": "sort column based on specific column | python | pandas", "body": "<p>I have a dataframe like this:</p>\n\n<pre><code>c234  0.4255  0.2348  0.4255\nc234  0.876   0.456   0.876\nc561  0.9527  0.263   0.9527\nc561  0.4111  0.1543  0.4111\nc561  0.8231  0.975   0.975\n</code></pre>\n\n<p>I want to sort <code>4th column</code> within each <code>1st column</code>, the output will be like this:</p>\n\n<pre><code>c234  0.876   0.456   0.876\nc234  0.4255  0.2348  0.4255\nc561  0.8231  0.975   0.975\nc561  0.9527  0.263   0.9527\nc561  0.4111  0.1543  0.4111\n</code></pre>\n\n<p>Any help please ?</p>\n"}, {"tags": ["python", "loops", "if-statement"], "comments": [{"owner": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "edited": false, "score": 0, "creation_date": 1534972527, "post_id": 51975174, "comment_id": 90900886, "body": "Get rid of the two while statesments, and use an if and elif statements. And under the <code>print(converted_land)</code>, use break instead."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4961417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QlTja.png?s=128&g=1", "display_name": "cassie", "link": "https://stackoverflow.com/users/4961417/cassie"}, "is_accepted": true, "score": 1, "last_activity_date": 1534972679, "creation_date": 1534972679, "answer_id": 51975278, "question_id": 51975174, "link": "https://stackoverflow.com/questions/51975174/python3-i-want-a-if-statement-to-work-for-only-2-statements/51975278#51975278", "title": "Python3 I want a if statement to work for only 2 statements", "body": "<p>I would change it and put the question part also inside of a while statement so that your user can't continue until they have input a valid response. So, adjusted code would look like:</p>\n\n<pre><code>print(\"Hello! This is a mile to km converter\")\nprint(\"Do you want to convert nauitcal miles or land miles?\")\n\nvalid_input=False\nwhile not valid_input:\n    question_convert = input(\"Please type nautical or land \\n\")\n    if question_convert == \"nautical\":\n        NAUTICAL = True\n        valid_input=True\n    if question_convert == \"land\":\n        NAUTICAL = False\n        valid_input=True\n\nwhile True:\n    while NAUTICAL == True:\n        nautical_mile = 1.852\n        print(\"How many nauitical miles do you want to convert in km?\")\n        convert_nauitcal = float(input())\n        converted_nautical = float(convert_nauitcal * nautical_mile)\n        print(\"Here's your converted nauitical miles: \")\n        print(converted_nautical)\n        quit()\n\n    while NAUTICAL == False:\n        land_mile = 1.609344\n        print(\"How many land miles do you want to convert in km?\")\n        convert_land = float(input())\n        converted_land = float(convert_land * land_mile)\n        print(\"Here's your converted land miles: \")\n        print(converted_land)\n        quit()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972856, "creation_date": 1534972856, "answer_id": 51975315, "question_id": 51975174, "link": "https://stackoverflow.com/questions/51975174/python3-i-want-a-if-statement-to-work-for-only-2-statements/51975315#51975315", "title": "Python3 I want a if statement to work for only 2 statements", "body": "<p>This is because you throw it into a an infinite while loop. You can fix this by modifying your initial <code>if</code> conditions, for when <code>NAUTICAL</code> is neither <code>True</code> nor <code>False</code>:</p>\n\n<pre><code>print(\"Hello! This is a mile to km converter\")\nprint(\"Do you want to convert nauitcal miles or land miles?\")\n\nquestion_convert = input(\"Please type nautical or land \\n\")\n\nNAUTICAL = None\nif question_convert == \"nautical\":\n    NAUTICAL = True    \nelse if question_convert == \"land\":\n    NAUTICAL = False\nelse:\n    print(\"I don't understand that...\")\n    # maybe throw an exception here if you want, instead of exit()-ing\n    exit()\n\nwhile NAUTICAL is not None:\n    while NAUTICAL:\n        nautical_mile = 1.852\n        print(\"How many nauitical miles do you want to convert in km?\")\n        convert_nauitcal = float(input())\n        converted_nautical = float(convert_nauitcal * nautical_mile)\n        print(\"Here's your converted nauitical miles: \")\n        print(converted_nautical)\n        quit()\n\n    while not NAUTICAL:\n        land_mile = 1.609344\n        print(\"How many land miles do you want to convert in km?\")\n        convert_land = float(input())\n        converted_land = float(convert_land * land_mile)\n        print(\"Here's your converted land miles: \")\n        print(converted_land)\n        quit()\n\n#land_mile = 1.609344\n#nautical_mile = 1.852\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972878, "creation_date": 1534972878, "answer_id": 51975322, "question_id": 51975174, "link": "https://stackoverflow.com/questions/51975174/python3-i-want-a-if-statement-to-work-for-only-2-statements/51975322#51975322", "title": "Python3 I want a if statement to work for only 2 statements", "body": "<p>For your first input problem it's probably crashing because the variable NAUTICAL isn't defined unless the input is 'nautical' or 'land'.</p>\n\n<p>One was to solve this is</p>\n\n<pre><code>if question_convert=='nautical':\n   NAUTICAL = True\nelif question_convert=='land':\n   NAUTICAL = False\nelse:\n   print('Please type land or nautical!!')\n   sys.exit(1)\n</code></pre>\n\n<p>For the other input validation problem the easiest way to check for numerical input in a case like this is to use a try/except clause around the float conversion</p>\n\n<pre><code>...\nin_val = input()\ntry:\n   converted_land = float(in_val)\nexcept ValueError:\n   print(\"{} doesn't look like a number!!\".format(inv_val))\n   # might want to exit at this point or use a default value for converted_land\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 9837082, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Felipe Emerim", "link": "https://stackoverflow.com/users/9837082/felipe-emerim"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972894, "creation_date": 1534972894, "answer_id": 51975326, "question_id": 51975174, "link": "https://stackoverflow.com/questions/51975174/python3-i-want-a-if-statement-to-work-for-only-2-statements/51975326#51975326", "title": "Python3 I want a if statement to work for only 2 statements", "body": "<pre><code>ALLOWED_TYPES = {'nautical', 'land'}    \n\nquestion_convert = ''\n\nwhile question_convert not in ALLOWED_TYPES:\n\n    question_convert = input(\"Please type nautical or land \\n\")\n\n    if question_convert not in ALLOWED_TYPES:\n\n        print('\"Please only write nautical or land in this input')\n        continue\n\n    if question_convert == \"nautical\":\n        NAUTICAL = True\n\n    if question_convert == \"land\":\n        NAUTICAL = False\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9514459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b75f262b410e12f3c46b5922938458?s=128&d=identicon&r=PG&f=1", "display_name": "Boran ", "link": "https://stackoverflow.com/users/9514459/boran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1534973179, "accepted_answer_id": 51975278, "answer_count": 4, "score": -1, "last_activity_date": 1535035489, "creation_date": 1534972216, "last_edit_date": 1535035489, "question_id": 51975174, "link": "https://stackoverflow.com/questions/51975174/python3-i-want-a-if-statement-to-work-for-only-2-statements", "closed_reason": "Duplicate", "title": "Python3 I want a if statement to work for only 2 statements", "body": "<p>So I just wrote a basic mile to km converter on python3. It asks you If you want to convert nautical miles or land miles into km when you type nautical it goes to that loop and converts nautical miles to km. The same thing goes with land, if you type land it converts land miles into km. But the problem is when I type something else than nautical or land the program just crashes. How can I write the code that says \"Please only write nautical or land in this input\".And when I type a input that is not a number in the \"how many miles do you want to convert in km part\" the same thing happens and it crashes...</p>\n\n<pre><code>print(\"Hello! This is a mile to km converter\")\nprint(\"Do you want to convert nauitcal miles or land miles?\")\n\nquestion_convert = input(\"Please type nautical or land \\n\")\n\nif question_convert == \"nautical\":\nNAUTICAL = True\n\nif question_convert == \"land\":\n    NAUTICAL = False\n\nwhile True:\n    while NAUTICAL == True:\n        nautical_mile = 1.852\n        print(\"How many nauitical miles do you want to convert in km?\")\n        convert_nauitcal = float(input())\n        converted_nautical = float(convert_nauitcal * nautical_mile)\n        print(\"Here's your converted nauitical miles: \")\n        print(converted_nautical)\n        quit()\n\n    while NAUTICAL == False:\n        land_mile = 1.609344\n        print(\"How many land miles do you want to convert in km?\")\n        convert_land = float(input())\n        converted_land = float(convert_land * land_mile)\n        print(\"Here's your converted land miles: \")\n        print(converted_land)\n        quit()\n\n#land_mile = 1.609344\n#nautical_mile = 1.852\n</code></pre>\n"}, {"tags": ["python", "json", "azure", "databricks"], "comments": [{"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534972549, "post_id": 51975165, "comment_id": 90900897, "body": "if you execute <code>json.dumps(leads, separators=(&#39;,&#39;, &#39;:&#39;) == manually_generated_json_string</code> in Python does it return true?"}, {"owner": {"reputation": 3411, "user_id": 1595350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71f08ffccf9fa18d45ace1b1f984335c?s=128&d=identicon&r=PG", "display_name": "STORM", "link": "https://stackoverflow.com/users/1595350/storm"}, "reply_to_user": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534972735, "post_id": 51975165, "comment_id": 90900966, "body": "Without <code>json.dumps</code> by only using my <code>leads</code> array it works. With json.dumps not. Whats happens or what is the difference? Of course, i am replaceing/using the correct variable/object within the method."}, {"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534972894, "post_id": 51975165, "comment_id": 90901034, "body": "<code>json.dumps</code> returns a string -- JSON is a string representation. It looks from @madprogrammer&#39;s answer that the function you are calling does not want JSON, it just wants python objects. I&#39;m guessing that when you were saying &quot;JSON generated manually&quot; you actually were just writing python code, NOT a string -- and if it&#39;s not a string, it&#39;s not JSON."}, {"owner": {"reputation": 3411, "user_id": 1595350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71f08ffccf9fa18d45ace1b1f984335c?s=128&d=identicon&r=PG", "display_name": "STORM", "link": "https://stackoverflow.com/users/1595350/storm"}, "reply_to_user": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534972958, "post_id": 51975165, "comment_id": 90901058, "body": "Very helpful thank you!"}, {"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1534973041, "post_id": 51975165, "comment_id": 90901087, "body": "You&#39;re welcome! And if @madprogrammer&#39;s answer solved your problem, don&#39;t forget to mark it &quot;accepted&quot;. Welcome to StackOverflow! :)"}], "answers": [{"comments": [{"owner": {"reputation": 3411, "user_id": 1595350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71f08ffccf9fa18d45ace1b1f984335c?s=128&d=identicon&r=PG", "display_name": "STORM", "link": "https://stackoverflow.com/users/1595350/storm"}, "edited": false, "score": 1, "creation_date": 1534972590, "post_id": 51975228, "comment_id": 90900910, "body": "Hm, ok it works. But it would be very helpful for me if you could explain why this happens! I would like to understand it."}, {"owner": {"reputation": 689, "user_id": 673016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9191a401f1fed6b4acf39a39141440bf?s=128&d=identicon&r=PG", "display_name": "madprogrammer", "link": "https://stackoverflow.com/users/673016/madprogrammer"}, "reply_to_user": {"reputation": 3411, "user_id": 1595350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71f08ffccf9fa18d45ace1b1f984335c?s=128&d=identicon&r=PG", "display_name": "STORM", "link": "https://stackoverflow.com/users/1595350/storm"}, "edited": false, "score": 0, "creation_date": 1534973081, "post_id": 51975228, "comment_id": 90901101, "body": "The <code>mc.execute</code> function expects a python object, not a JSON string as the input for <code>leads</code> parameter, and you do pass it in your question. It&#39;s just a coincidence that your Python list of dicts happens to look exactly like a JSON string, but since there are no quotes, <code>[{&quot;a&quot;:&quot;b&quot;},{&quot;c&quot;:&quot;d&quot;}]</code> will be interpreted as a Python list containing two dicts, while <code>&#39;[{&quot;a&quot;:&quot;b&quot;},{&quot;c&quot;:&quot;d&quot;}]&#39;</code> is a JSON string. In your case, the <code>mc.execute</code> function will do JSON encoding inside, so you don&#39;t need to."}], "tags": [], "owner": {"reputation": 689, "user_id": 673016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9191a401f1fed6b4acf39a39141440bf?s=128&d=identicon&r=PG", "display_name": "madprogrammer", "link": "https://stackoverflow.com/users/673016/madprogrammer"}, "is_accepted": true, "score": 0, "last_activity_date": 1534972459, "creation_date": 1534972459, "answer_id": 51975228, "question_id": 51975165, "link": "https://stackoverflow.com/questions/51975165/json-generated-manually-works-but-created-through-json-dumps-does-not-work-even/51975228#51975228", "title": "JSON generated manually works, but created through json.dumps does not work even if output seems to be exactly same", "body": "<p>I believe you don't need to call <code>json.dumps</code>, just do it like this</p>\n\n<pre><code>leads = []\n\nlead = {}\nlead['email'] = \"joe@example.com\"\nlead['firstName'] = \"Joe\"\nleads.append(lead)\n\nlead = {}\nlead['email'] = \"jill@example.com\"\nlead['firstName'] = \"Jill\"\nleads.append(lead)\n\nlead = mc.execute(method='create_update_leads', leads=leads, action='createOnly', \nlookupField='email', asyncProcessing='false', partitionName='Default')\n</code></pre>\n"}], "owner": {"reputation": 3411, "user_id": 1595350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71f08ffccf9fa18d45ace1b1f984335c?s=128&d=identicon&r=PG", "display_name": "STORM", "link": "https://stackoverflow.com/users/1595350/storm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 51975228, "answer_count": 1, "score": 1, "last_activity_date": 1534972459, "creation_date": 1534972175, "question_id": 51975165, "link": "https://stackoverflow.com/questions/51975165/json-generated-manually-works-but-created-through-json-dumps-does-not-work-even", "title": "JSON generated manually works, but created through json.dumps does not work even if output seems to be exactly same", "body": "<p>I am using the <code>Marketo</code> API through the Python Library <a href=\"https://github.com/jepcastelein/marketo-rest-python\" rel=\"nofollow noreferrer\">marketo-rest-python</a>. I can create Leads and also Update them through the following basic code:</p>\n\n<pre><code>leads = [{\"email\":\"joe@example.com\",\"firstName\":\"Joe\"},{\"email\":\"jill@example.com\",\"firstName\":\"Jill\"}]\nlead = mc.execute(method='create_update_leads', leads=leads, action='createOnly', lookupField='email', \n                asyncProcessing='false', partitionName='Default')\n</code></pre>\n\n<p>When i create programmatically this \"leads\" JSON object via</p>\n\n<pre><code>leads = []\n\nlead = {}\nlead['email'] = \"joe@example.com\"\nlead['firstName'] = \"Joe\"\nleads.append(lead)\n\nlead = {}\nlead['email'] = \"jill@example.com\"\nlead['firstName'] = \"Jill\"\nleads.append(lead)\n\njson_leads = json.dumps(leads, separators=(',', ':'))\n\nprint(json_leads)\n</code></pre>\n\n<p>Then the output is exactly the same within Microsoft Azure Databricks, but the Marketo system returns me an <code>609</code>-> Invalid JSON.</p>\n\n<p>My output looks like</p>\n\n<pre><code>[{\"email\":\"joe@example.com\",\"firstName\":\"Joe\"},{\"email\":\"jill@example.com\",\"firstName\":\"Jill\"}]\n</code></pre>\n\n<p>Its exactly the same like in the sample. When i use the sample JSON codeline it works, but my self generated JSOn does not work. </p>\n\n<p>Anyone has an idea what this ould be? I am using Python within Microsoft Azure Databricks.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1534972230, "post_id": 51975139, "comment_id": 90900783, "body": "<code>from django.conf.urls import patterns</code> got that?"}, {"owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1534974057, "post_id": 51975139, "comment_id": 90901487, "body": "doesn&#39;t work. Error: ImportError: cannot import name &#39;patterns&#39;"}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1534974371, "post_id": 51975139, "comment_id": 90901607, "body": "correct me if I&#39;m wrong, you&#39;re trying to just add your media links to the urls right?"}], "answers": [{"comments": [{"owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "edited": false, "score": 0, "creation_date": 1534975076, "post_id": 51975630, "comment_id": 90901866, "body": "Thanks. But the image still not showing: [22/Aug/2018 21:55:55] &quot;POST /polls/polls/search HTTP/1.1&quot; 200 852 Not Found: /polls/polls/{{MEDIA_URL}}my_img.jpg [22/Aug/2018 21:55:55] &quot;GET /polls/polls/%7B%7BMEDIA_URL%7D%7Dmy_img.jpg HTTP/1.1&quot; 404 2582"}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "reply_to_user": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "edited": false, "score": 0, "creation_date": 1534975842, "post_id": 51975630, "comment_id": 90902089, "body": "well, yeah, the url shows that media_url wasn&#39;t resolved; I&#39;ll edit the question"}], "tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": true, "score": 1, "last_activity_date": 1534976035, "last_edit_date": 1534976035, "creation_date": 1534974464, "answer_id": 51975630, "question_id": 51975139, "link": "https://stackoverflow.com/questions/51975139/django-urlpatterns-settings/51975630#51975630", "title": "Django urlpatterns settings", "body": "<p>It looks like using <code>patterns</code> won't work anymore. Since you're trying to serve static files, try this:</p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    # ... the rest of your URLconf goes here ...\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n\n<p>And set MEDIA_URL and MEDIA_ROOT in your settings.py.</p>\n\n<p>In order to get it to work in your templates, you'd do something like this:</p>\n\n<pre><code>{% load static %}\n&lt;body data-media-url=\"{% get_media_prefix %}\"&gt;\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/es/2.1/ref/templates/builtins/#std:templatetag-get_media_prefix\" rel=\"nofollow noreferrer\">Django docs</a></p>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 51975630, "answer_count": 1, "score": 1, "last_activity_date": 1534976035, "creation_date": 1534972025, "question_id": 51975139, "link": "https://stackoverflow.com/questions/51975139/django-urlpatterns-settings", "title": "Django urlpatterns settings", "body": "<p>I have a Django project, the working <code>urls.py</code> looks like:</p>\n\n<pre><code>urlpatterns = [\n    path('', views.index, name='index'),\n    path('polls/search', views.search, name='search'),\n\n]\n</code></pre>\n\n<p>Then I want to add additional path for my image in the urls.py</p>\n\n<pre><code>urlpatterns += patterns('django.views.static',(r'^media/(?P&lt;path&gt;.*)','serve',{'document_root':settings.MEDIA_ROOT}), )\n</code></pre>\n\n<p>But I got:</p>\n\n<pre><code> unresolved reference 'patterns'\n</code></pre>\n\n<p>I am using python 3.4 and Django 2.0.8. How do I properly add the additional path to my original urls.py ? Thanks!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 3, "last_activity_date": 1534973342, "creation_date": 1534973342, "answer_id": 51975401, "question_id": 51975126, "link": "https://stackoverflow.com/questions/51975126/trigger-result-by-column-value-in-pandas/51975401#51975401", "title": "trigger result by column value in pandas", "body": "<p>First, set up your conditions:</p>\n\n<pre><code>c1 = (df[0].lt(-0.5) &amp; df[0].shift().gt(-0.5)) | (df[0].gt(-0.5) &amp; df[0].shift().lt(-0.5))\nc2 = (df[0].lt(0.5) &amp; df[0].shift().gt(0.5)) | (df[0].gt(0.5) &amp; df[0].shift().lt(0.5))\n</code></pre>\n\n<p>Then use <code>np.select</code> and <code>ffill</code>:</p>\n\n<pre><code>df.assign(out=np.select([c1, c2], [-1, 1], np.nan)).ffill()\n\n     0  out\n0  0.1  NaN\n1  0.3  NaN\n2 -0.1  NaN\n3 -0.8 -1.0\n4 -0.7 -1.0\n5  0.2 -1.0\n6  0.9  1.0\n7  0.4  1.0\n8 -0.1  1.0\n9 -0.8 -1.0\n</code></pre>\n\n<p>The one thing this approach <em>does not</em> handle is what to do if both thresholds are crossed in a single step.  For example, if you go from <code>-0.6</code> to <code>0.8</code>, this will just default to the first condition.  You may want to adjust the conditions based on your need, but this will get you started.</p>\n"}], "owner": {"reputation": 1857, "user_id": 3152047, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/155762c4176b616fab8d1861a3f68a5e?s=128&d=identicon&r=PG&f=1", "display_name": "nunodsousa", "link": "https://stackoverflow.com/users/3152047/nunodsousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 51975401, "answer_count": 1, "score": 2, "last_activity_date": 1534973342, "creation_date": 1534971978, "question_id": 51975126, "link": "https://stackoverflow.com/questions/51975126/trigger-result-by-column-value-in-pandas", "title": "trigger result by column value in pandas", "body": "<p>Let us consider a dataframe with numbers distributed between -1 and 1. In this sequence there are two boundaries that change the state of system: -0.5 and 0.5. If the system cross 0.5, it will maintain its position until the system passes the -0.5 (and the oposite). A visual example is given in the following dataframe:</p>\n\n<pre><code>d = pd.DataFrame([[0.1,0.3,-0.1,-0.8,-0.7,0.2,0.9,0.4,-0.1,-0.8], [None, None, None, -1,-1,-1, 1, 1, 1, -1]]).T\n</code></pre>\n\n<p>How can we compute <em>column</em> <strong>1</strong> without using a for loop?</p>\n\n<p><a href=\"https://i.stack.imgur.com/aoIk0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aoIk0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django", "python-3.x", "locale", "chinese-locale"], "answers": [{"comments": [{"owner": {"reputation": 14724, "user_id": 96864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/562dfbc04cd800e8d63755d66a0400b0?s=128&d=identicon&r=PG", "display_name": "icn", "link": "https://stackoverflow.com/users/96864/icn"}, "edited": false, "score": 0, "creation_date": 1534984305, "post_id": 51975692, "comment_id": 90903793, "body": "Thanks for your answer! I missed the <code>LOCALE_PATHS</code>  in settings."}], "tags": [], "owner": {"reputation": 400, "user_id": 747017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0sI8Y.png?s=128&g=1", "display_name": "Mohammad Torkashvand", "link": "https://stackoverflow.com/users/747017/mohammad-torkashvand"}, "is_accepted": true, "score": 1, "last_activity_date": 1534974822, "creation_date": 1534974822, "answer_id": 51975692, "question_id": 51975122, "link": "https://stackoverflow.com/questions/51975122/django-locale-is-not-loading-correctly/51975692#51975692", "title": "django locale is not loading correctly", "body": "<p>Here is my django settings for Persian language:</p>\n\n<pre><code>import environ\n\nROOT_DIR = environ.Path(__file__) - 3  # (my_awesome_project/config/settings/base.py - 3 = my_awesome_project/)\nAPPS_DIR = ROOT_DIR.path('my_awesome_project')\n\n###### Locale settings\nLOCALE_PATHS = (\n    str(APPS_DIR.path('locale')),\n)\n\ngettext = lambda s: s\nLANGUAGES = (\n    # Translators: This message appears on the home page only\n    ('fa', gettext('Persian')),\n)\n</code></pre>\n\n<p>And in my code I use it in this way:</p>\n\n<pre><code>from django.utils.translation import ugettext_lazy as _\n\nraise ValidationError(_(\"League dos'nt exist\"))\n</code></pre>\n\n<p>Then in command line I run this command:</p>\n\n<pre><code>python manage.py makemessages\n</code></pre>\n\n<p>Then I edit <code>my_awesome_projec/my_awesome_projec/locale/fa/LC_MESSAGES/django.po</code> file according to Persian translation.</p>\n\n<p>Then I run this command:</p>\n\n<pre><code>python manage.py compilemessages\n</code></pre>\n\n<p>and in production I add this directive to my nginx settings:</p>\n\n<blockquote>\n  <p>proxy_pass_header \"Accept-Language\";</p>\n</blockquote>\n"}], "owner": {"reputation": 14724, "user_id": 96864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/562dfbc04cd800e8d63755d66a0400b0?s=128&d=identicon&r=PG", "display_name": "icn", "link": "https://stackoverflow.com/users/96864/icn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 51975692, "answer_count": 1, "score": 0, "last_activity_date": 1534974822, "creation_date": 1534971944, "last_edit_date": 1534973324, "question_id": 51975122, "link": "https://stackoverflow.com/questions/51975122/django-locale-is-not-loading-correctly", "title": "django locale is not loading correctly", "body": "<p>I am using django 1.8.7.</p>\n\n<p>From my understanding django locale is supposed to be loading from \n<code>&lt;site_root&gt;/locale/&lt;lang_code&gt;/LC_MESSAGES/django.po</code></p>\n\n<p>I have \n<code>&lt;site_root&gt;/locale/zh_CN/LC_MESSAGES/django.po</code></p>\n\n<p>and ran\n<code>python3 manage.py compilemessages</code> and\n I got \n<code>&lt;site_root&gt;/locale/zh_CN/LC_MESSAGES/django.mo</code> and \nI have\n<code>request.session[LANGUAGE_SESSION_KEY] = 'zh-cn'</code> </p>\n\n<p>But my django application not loading anything from my <code>&lt;site_root&gt;/locale/zn_CN/LC_MESSAGES/django.po</code> but only loading a few translations from locale translation from django 's default translations.</p>\n\n<p><code>django/contrib/auth/locale/zh_CN/LC_MESSAGES/django.po</code></p>\n\n<p>Somewhere should I look into?</p>\n"}, {"tags": ["python", "buffer", "paramiko", "readline", "tail"], "comments": [{"owner": {"reputation": 2251, "user_id": 4806820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9aa62bad386d0c2ce92c7d0dca2a69f6?s=128&d=identicon&r=PG&f=1", "display_name": "code_onkel", "link": "https://stackoverflow.com/users/4806820/code-onkel"}, "edited": false, "score": 0, "creation_date": 1534972363, "post_id": 51975080, "comment_id": 90900838, "body": "Please strip / clean up your example code a bit. There is a return statement outside a function."}, {"owner": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "reply_to_user": {"reputation": 2251, "user_id": 4806820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9aa62bad386d0c2ce92c7d0dca2a69f6?s=128&d=identicon&r=PG&f=1", "display_name": "code_onkel", "link": "https://stackoverflow.com/users/4806820/code-onkel"}, "edited": false, "score": 0, "creation_date": 1534972933, "post_id": 51975080, "comment_id": 90901052, "body": "@code_onkel done"}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "edited": false, "score": 0, "creation_date": 1534980899, "post_id": 51975201, "comment_id": 90903194, "body": "Thanks, so I checked the <code>pid</code> and I do see the socket connection on pid 1422, however, there are also other sockets using that same <code>pid</code>, is there a way to <code>tail</code> that specific socket connection? I also tried using line but that didn&#39;t terminate the <code>tail</code> process."}, {"owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "reply_to_user": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "edited": false, "score": 1, "creation_date": 1535002533, "post_id": 51975201, "comment_id": 90907536, "body": "Actually now that I look at what you&#39;re trying to do more, I&#39;m not sure what you&#39;re going for.  I&#39;m inferring that the <code>server.log</code> is the log file of the server at 127.0.0.1:40000.  Does it ever exit?  You&#39;re probably better off trying to put a semaphore in the log output that signals ending the loop."}, {"owner": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "edited": false, "score": 0, "creation_date": 1535059094, "post_id": 51975201, "comment_id": 90938519, "body": "Thanks! I got it working using <code>re</code> and terminating the loop when I get a match of a unique string at the end."}, {"owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "reply_to_user": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "edited": false, "score": 0, "creation_date": 1535091697, "post_id": 51975201, "comment_id": 90946191, "body": "Awesome, glad I could help!"}], "tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": true, "score": 3, "last_activity_date": 1534973437, "last_edit_date": 1534973437, "creation_date": 1534972350, "answer_id": 51975201, "question_id": 51975080, "link": "https://stackoverflow.com/questions/51975080/python-breaking-out-of-tail-f-process-when-remote-process-is-done/51975201#51975201", "title": "Python breaking out of tail -f process when remote process is done", "body": "<p>By design <code>tail -f</code> doesn't exit when a process is done writing to the log file (it doesn't really know the difference between the log being done and the process just taking a really long time to write its next line).  What you probably want is <code>tail -f --pid=PID</code> if you can obtain the pid of your background process (for example by using <code>ps</code>).  According to the documentation this should terminate <code>tail</code> after the process with process ID PID dies.</p>\n\n<p>Furthermore, the <code>if not data_buffer</code> check does not indicate <code>No more data</code>. The if condition will only be true, if <code>tail</code> returns without a single byte written to stdout, as <code>data_buffer</code> will be non-empty after the first non-empty line is read and appended. You could check <code>line</code> instead, but since you are using <code>iter()</code> with a sentinel value, this would be redundant.</p>\n"}], "owner": {"reputation": 826, "user_id": 1875768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9dbf95ccbe0d4a2fdc6c1c3369920b1d?s=128&d=identicon&r=PG&f=1", "display_name": "tiger_groove", "link": "https://stackoverflow.com/users/1875768/tiger-groove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "accepted_answer_id": 51975201, "answer_count": 1, "score": 1, "last_activity_date": 1534973437, "creation_date": 1534971745, "last_edit_date": 1534972913, "question_id": 51975080, "link": "https://stackoverflow.com/questions/51975080/python-breaking-out-of-tail-f-process-when-remote-process-is-done", "title": "Python breaking out of tail -f process when remote process is done", "body": "<p>I have two processes running </p>\n\n<ol>\n<li><code>exeAPI</code> (running in the background with <code>nohup</code>)</li>\n<li><code>tail -f server.log</code> to output the remote server log</li>\n</ol>\n\n<p>I am able to successfully see the output flush to my python client console like this:</p>\n\n<pre><code>@bp.route('/executeAPI', methods=['GET', 'POST'])\ndef executeAPI():\n\n    ...\n    (ssh set up params)\n\n    print('started...')\n    data_buffer = \"\"\n    stdin_run, stdout_run, stderr_run = client.exec_command('nohup echo source \"exeAPI\" | nc 127.0.0.1 40000 &amp;')\n\n    stdin, stdout, stderr = client.exec_command('tail -n 1 -f /home/server.log', get_pty=True)\n\n    for line in iter(lambda: stdout.readline(1024), \"\"):\n        data_buffer += line\n        print(line, end=\"\")\n        if not data_buffer:          # never hits this if statement\n            print('No more data')\n            break\n\n    print('finished.')\n    client.close()\n\n    return data_buffer\n</code></pre>\n\n<p>However, it never exits the <code>for loop</code> after the output is complete. </p>\n\n<p>How can I break out of the <code>for loop</code> when there are no newlines?</p>\n"}, {"tags": ["python", "glob"], "comments": [{"owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 0, "creation_date": 1534971909, "post_id": 51975071, "comment_id": 90900653, "body": "Can you please provide an <b><a href=\"https://stackoverflow.com/help/mcve\">MCVE</a></b>?"}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 8939718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3znQ0.jpg?s=128&g=1", "display_name": "Ori Arbes", "link": "https://stackoverflow.com/users/8939718/ori-arbes"}, "is_accepted": true, "score": 0, "last_activity_date": 1534972241, "creation_date": 1534972241, "answer_id": 51975182, "question_id": 51975071, "link": "https://stackoverflow.com/questions/51975071/python-fnmatch-with-parentheses-and-commas/51975182#51975182", "title": "Python fnmatch with parentheses and commas", "body": "<pre><code>files_list=[]\n\nfor filename in os.listdir(r'DirPath'):\n    if filename.count('(0, 0, 0)'):\n        files_list.append(filename)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 928, "user_id": 2260553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jkXDO.jpg?s=128&g=1", "display_name": "Asav Patel", "link": "https://stackoverflow.com/users/2260553/asav-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972455, "creation_date": 1534972455, "answer_id": 51975226, "question_id": 51975071, "link": "https://stackoverflow.com/questions/51975071/python-fnmatch-with-parentheses-and-commas/51975226#51975226", "title": "Python fnmatch with parentheses and commas", "body": "<p>you need to escape spaces also.</p>\n\n<p>try this : <code>*\\(0,\\ 0,\\ 0\\)*</code></p>\n"}], "owner": {"reputation": 648, "user_id": 592678, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4ab2f9dc2982ee6a13573fc02d5f2c2?s=128&d=identicon&r=PG", "display_name": "Teknophilia", "link": "https://stackoverflow.com/users/592678/teknophilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 51975182, "answer_count": 2, "score": -1, "last_activity_date": 1534972455, "creation_date": 1534971699, "last_edit_date": 1534972227, "question_id": 51975071, "link": "https://stackoverflow.com/questions/51975071/python-fnmatch-with-parentheses-and-commas", "title": "Python fnmatch with parentheses and commas", "body": "<p>I'm doing a walk through a dir, and trying to collect files which contain the string <code>(0, 0, 0)</code> using <code>fnmatch.fnmatch(filename,'*(0, 0, 0)*')</code>. It looks like the parentheses and commas are throwing it off, and matching to strings like <code>(0, 1, 1)</code>, which I don't want.</p>\n\n<p>The relevant snippet is:</p>\n\n<pre><code>for root, dirs, files in os.walk(data_dir):\n    for file in files:\n        filename = os.path.join(root, file)\n        if fnmatch.fnmatch(filename,'*\\(0, 0, 0\\)*'):\n            # do stuff\n</code></pre>\n\n<p>and the dirs contain files such as:</p>\n\n<pre><code>\\c_(0, 0, 0)\\data.txt\n\\c_(0, 05, 05)\\data.txt\n\\c_(0, 05, 1)\\data.txt\n\\c_(0, 1, 0)\\data.txt\n</code></pre>\n\n<p>My understanding is that escaping the parentheses should fix it, but no luck there. What would be the best way to fix this?</p>\n"}, {"tags": ["python", "arrays", "split", "strip"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1534971935, "post_id": 51975047, "comment_id": 90900671, "body": "Is <code>something</code> a string?"}], "answers": [{"tags": [], "owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "is_accepted": false, "score": 0, "last_activity_date": 1534973963, "last_edit_date": 1534973963, "creation_date": 1534973564, "answer_id": 51975444, "question_id": 51975047, "link": "https://stackoverflow.com/questions/51975047/python-splitting-an-input-of-unknown-length-and-creating-an-array/51975444#51975444", "title": "Python: Splitting an input of unknown length and creating an array", "body": "<p>If Something is a string, you could do this.</p>\n\n<pre><code>something = \"(1,2,3)&amp;(6,8,10)&amp;(2,5)&amp;(29,8,6)\"\n\nwords = something.split('&amp;')\n\nfor i,x in enumerate(words):\n    words[i] = x.replace('(','').replace(')','')\n</code></pre>\n\n<p>or use list comprehension instead of for loop like,</p>\n\n<pre><code>words[:] = [x.replace('(','').replace(')','') for x in words]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 4521646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ded989303a7b5694978c505052f6c1?s=128&d=identicon&r=PG", "display_name": "Jirka B.", "link": "https://stackoverflow.com/users/4521646/jirka-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1534974514, "creation_date": 1534974514, "answer_id": 51975641, "question_id": 51975047, "link": "https://stackoverflow.com/questions/51975047/python-splitting-an-input-of-unknown-length-and-creating-an-array/51975641#51975641", "title": "Python: Splitting an input of unknown length and creating an array", "body": "<p>if you have such a rigid structure, the solution may be as follows</p>\n\n<pre><code>s = \"(1,2,3)&amp;(6,8,10)&amp;(2,5)&amp;(29,8,6)\"\nl = [list(map(int, t[1:-1].split(','))) for t in s.split('&amp;')]\nprint(l)  # [[1, 2, 3], [6, 8, 10], [2, 5], [29, 8, 6]]\n</code></pre>\n\n<p>where first you split the string by \"&amp;\" and then you split the substrings, starting at second and ending and one before the last position, by \",\" and <code>map</code> them as <code>int</code> or any other number type</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 3182523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00a087483db34a3ea88b187772e06f9b?s=128&d=identicon&r=PG&f=1", "display_name": "Darth_Sourav", "link": "https://stackoverflow.com/users/3182523/darth-sourav"}, "is_accepted": false, "score": 0, "last_activity_date": 1534975692, "creation_date": 1534975692, "answer_id": 51975818, "question_id": 51975047, "link": "https://stackoverflow.com/questions/51975047/python-splitting-an-input-of-unknown-length-and-creating-an-array/51975818#51975818", "title": "Python: Splitting an input of unknown length and creating an array", "body": "<p>This is another way to go if you need to take care of changing input string</p>\n\n<pre><code>data = '(1,2,3)&amp;(6,8,10)&amp;(2,5)&amp;(29,8,6)'\na = []\nfor i in data.split('&amp;'):\n    a.append([int(j) for j in i[i.find('(')+1:i.find(')')].split(',')])\nprint(a)  #[[1, 2, 3], [6, 8, 10], [2, 5], [29, 8, 6]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1684, "user_id": 3044673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBqJJ.jpg?s=128&g=1", "display_name": "bla", "link": "https://stackoverflow.com/users/3044673/bla"}, "is_accepted": false, "score": 0, "last_activity_date": 1534976019, "creation_date": 1534976019, "answer_id": 51975880, "question_id": 51975047, "link": "https://stackoverflow.com/questions/51975047/python-splitting-an-input-of-unknown-length-and-creating-an-array/51975880#51975880", "title": "Python: Splitting an input of unknown length and creating an array", "body": "<p>You can try this approach:</p>\n\n<pre><code>&gt;&gt;&gt; def to_list(s):\n...     return [int(i) for i in s.strip('()').split(',')]\n... \n&gt;&gt;&gt; data = '(1,2,3)&amp;(6,8,10)&amp;(2,5)&amp;(29,8,6)'\n&gt;&gt;&gt; [to_list(item) for item in data.split('&amp;')]\n[[1, 2, 3], [6, 8, 10], [2, 5], [29, 8, 6]]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10194820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d421d4be2bb306e06e034988f244bb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Nat Kar", "link": "https://stackoverflow.com/users/10194820/nat-kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1534976019, "creation_date": 1534971584, "question_id": 51975047, "link": "https://stackoverflow.com/questions/51975047/python-splitting-an-input-of-unknown-length-and-creating-an-array", "title": "Python: Splitting an input of unknown length and creating an array", "body": "<p>In Python how would I go about creating an array containing the split input of something in this format:</p>\n\n<p>ex.) </p>\n\n<pre><code>(1,2,3)&amp;(6,8,10)&amp;(2,5)&amp;(29,8,6)\n</code></pre>\n\n<p>-the input would be any number of these tuples.</p>\n\n<p>-I'd split at '&amp;' and strip the parenthesis</p>\n\n<p>-then I'd like to turn it into an array\nin this case:</p>\n\n<pre><code>array=\n [[1,2,3],\n [6,8,10],\n [2,5],\n [29,8,6]]\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1534972889, "post_id": 51975045, "comment_id": 90901031, "body": "quick comment on your <code>test = pd.read_csv(&#39;test.csv&#39;, header=0, names=[&#39;lx&#39;, &#39;ly&#39;])</code> portion of code: The reason you are seeing your first output be 3041 is because names is giving you a header, then you are defining header=0 which is then using row 3040 as a header line (not counting in df). If you want 3040 as your first row take out <code>header=0</code>."}, {"owner": {"reputation": 71, "user_id": 5401841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwVcC.jpg?s=128&g=1", "display_name": "schwim", "link": "https://stackoverflow.com/users/5401841/schwim"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1535043144, "post_id": 51975045, "comment_id": 90931104, "body": "Thx for explaining. I had a specific reason for setting header=0."}], "answers": [{"comments": [{"owner": {"reputation": 908, "user_id": 4521646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ded989303a7b5694978c505052f6c1?s=128&d=identicon&r=PG", "display_name": "Jirka B.", "link": "https://stackoverflow.com/users/4521646/jirka-b"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1534973819, "post_id": 51975307, "comment_id": 90901401, "body": "well, it may depend on the Python and pandas version... could you also print what is the type of the particular cell? <code>type(test.loc[3042,&#39;ly&#39;])</code>"}, {"owner": {"reputation": 71, "user_id": 5401841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwVcC.jpg?s=128&g=1", "display_name": "schwim", "link": "https://stackoverflow.com/users/5401841/schwim"}, "edited": false, "score": 0, "creation_date": 1535042553, "post_id": 51975307, "comment_id": 90930812, "body": "The type in the default is np.float64. Changing it to np.float32 does indeed work. I do find it interesting that the default interpretation of the data from the csv causes the initial problem though."}], "tags": [], "owner": {"reputation": 908, "user_id": 4521646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ded989303a7b5694978c505052f6c1?s=128&d=identicon&r=PG", "display_name": "Jirka B.", "link": "https://stackoverflow.com/users/4521646/jirka-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972821, "creation_date": 1534972821, "answer_id": 51975307, "question_id": 51975045, "link": "https://stackoverflow.com/questions/51975045/pandas-read-csv-changes-values-on-import/51975307#51975307", "title": "pandas.read_csv changes values on import", "body": "<p>it seems it is linked to data type you are loading, which is in your case float64. Using float 32 you get what you expect. So you can change the <code>dtype</code> while <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">loading</a></p>\n\n<pre><code>test = pd.read_csv('test.csv', header=0, names=['lx', 'ly'], \n                   dtype={'ly': np.float32, 'ly': np.float32})\n</code></pre>\n\n<p>or afterward</p>\n\n<pre><code>print(type(test.loc[3042,'ly']))  # &lt;class 'numpy.float64'&gt;\ntest[['lx', 'ly']] = test[['lx', 'ly']].astype('float32')\nprint(test.loc[3042,'ly'])  # -0.891\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 5401841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwVcC.jpg?s=128&g=1", "display_name": "schwim", "link": "https://stackoverflow.com/users/5401841/schwim"}, "edited": false, "score": 0, "creation_date": 1535043053, "post_id": 51975465, "comment_id": 90931070, "body": "Changing float_precsion=&#39;round_trip&#39; does solve the problem, as does changing dtype=np.float32. Numpy must be imported as np for that to work though."}], "tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 0, "last_activity_date": 1534973676, "creation_date": 1534973676, "answer_id": 51975465, "question_id": 51975045, "link": "https://stackoverflow.com/questions/51975045/pandas-read-csv-changes-values-on-import/51975465#51975465", "title": "pandas.read_csv changes values on import", "body": "<p>For comparison purposes with other df's, you can use pd.option_context, (note I took off header=0 because it isn't displaying your first row in your df):</p>\n\n<pre><code>import pandas as pd\ntest = pd.read_csv('./Desktop/dummy.csv', names=['lx', 'ly'])\n\ntest.dtypes\n\nwith pd.option_context('display.precision', 5):\n    print(test.loc[3042,'ly'])\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>-0.891\n</code></pre>\n\n<p>This isn't the nicest fix, but adding</p>\n\n<pre><code>float_precision='round_trip'\n</code></pre>\n\n<p>won't always fix your problem either:</p>\n\n<pre><code>import pandas as pd\ntest = pd.read_csv('./Desktop/dummy.csv', names=['lx', 'ly'], float_precision='round_trip')\n\ntest.dtypes\n\ntest.loc[3042,'ly']\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>-0.89100000000000001\n</code></pre>\n\n<p>With display.precision, you will execute all blocks of code under this with statement at the precision you set, so you can guarantee that df's compared under this will be the value you expect.</p>\n"}], "owner": {"reputation": 71, "user_id": 5401841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwVcC.jpg?s=128&g=1", "display_name": "schwim", "link": "https://stackoverflow.com/users/5401841/schwim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 51975465, "answer_count": 2, "score": 0, "last_activity_date": 1535063760, "creation_date": 1534971574, "last_edit_date": 1535063760, "question_id": 51975045, "link": "https://stackoverflow.com/questions/51975045/pandas-read-csv-changes-values-on-import", "title": "pandas.read_csv changes values on import", "body": "<p>I have a csv file that looks as so:</p>\n\n<pre><code>\"3040\",0.24948,-0.89496\n\"3041\",0.25344,-0.89496\n\"3042\",0.2574,-0.891\n\"3043\",0.2574,-0.89496\n\"3044\",0.26136,-0.89892\n\"3045\",0.2574,-0.891\n\"3046\",0.26532,-0.9108\n\"3047\",0.27324,-0.9306\n\"3048\",0.23424,-0.8910\n</code></pre>\n\n<p>This data is \"reference\" data intended to validate calculations run on other data. Reading the data in gives me this:</p>\n\n<pre><code>In [2]: test = pd.read_csv('test.csv', header=0, names=['lx', 'ly'])\n\nIn [3]: test\nOut[3]: \n           lx       ly\n3041  0.25344 -0.89496\n3042  0.25740 -0.89100\n3043  0.25740 -0.89496\n3044  0.26136 -0.89892\n3045  0.25740 -0.89100\n3046  0.26532 -0.91080\n3047  0.27324 -0.93060\n3048  0.23424 -0.89100\n</code></pre>\n\n<p>Which looks as you might expect. Problem is, these values are not quite as they appear and comparisons with them don't work:</p>\n\n<pre><code>In [4]: test.loc[3042,'ly']\nOut[4]: -0.8909999999999999\n</code></pre>\n\n<p>Why is it doing <em>that</em>? It seems to be specific to values in the csv that only have 3 places to the right of the decimal, at least so far:</p>\n\n<pre><code>In [5]: test.loc[3048,'ly']\nOut[5]: -0.891\nIn [5]: test.loc[3048,'ly']\nOut[5]: -0.891\nIn [6]: test.loc[3047,'ly']\nOut[6]: -0.9306\nIn [7]: test.loc[3046,'ly']\nOut[7]: -0.9108\n</code></pre>\n\n<p>I just want the exact values from the csv, not an interpretation. Ideas?</p>\n\n<p>Update:</p>\n\n<p>I set float_precision='round_trip' in the read_csv parameters and that seemed to fix it. <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html#specifying-method-for-floating-point-conversion\" rel=\"nofollow noreferrer\">Document here.</a> What I don't understand is why by default the data is being changed as read in. This doesn't seem good for comparing data sets. Is there a better way to read in data for testing against other dataframes?</p>\n\n<p><strong>Update with answer:</strong></p>\n\n<p>Changing float_precision is what i went with, although I still don't understand how pandas can misrepresent the data in this way. I get a conversion happens on the import, but 0.891 should be 0.891. </p>\n\n<p>For my comparison case rather than testing equivalence I went with something different:</p>\n\n<pre><code># rather than\ndf1 == df2\n\n# I tested as\n(df1 / df2) - 1 &gt; 1e-14\n</code></pre>\n\n<p>This works fine for my purposes.</p>\n"}, {"tags": ["python", "image"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534971071, "post_id": 51974905, "comment_id": 90900314, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as well as review <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.  In it&#39;s current form, this questions is much too broad for SO.  Provide your code, show what&#39;s going wrong, then someone might be able to help you."}, {"owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534971238, "post_id": 51974905, "comment_id": 90900385, "body": "@user3483203  What part of it is too broad? The language is Python. The question is to embed a matrix of size m &amp;times; m in a larger n &amp;times; n matrix where n/2 - 1 &lt;= m/2 &lt;= n/2 + 1. The problem seems very specific and well-defined to me."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534971285, "post_id": 51974905, "comment_id": 90900416, "body": "Stack Overflow is not a free code-writing or tutorial service.  Please provide the code that you have written to solve this problem, and also share the problems that you have had with the code that you have written.  Also review the links I shared above."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1534971339, "post_id": 51974905, "comment_id": 90900434, "body": "Look at the two lines starting <code>blackcanvas = ...</code> here <a href=\"https://stackoverflow.com/a/51964270/2836621\">stackoverflow.com/a/51964270/2836621</a> That loads an image, creates a black canvas 1px bigger on each side and pastes the loaded image in offset 1px left and ine pixel down from the top-left... exactly what you want with slightly different  maths."}, {"owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534971357, "post_id": 51974905, "comment_id": 90900444, "body": "@user3483203 Neither did I say it was a code-writing or a tutorial service. I have seen questions like this asked before. And some of them were upvoted too. I do not know where to start. As I said, I&#39;m stuck. Everyone has to start from somewhere. It just happens that my knowledge of Python is not enough for tackling this problem as of yet."}, {"owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1534971563, "post_id": 51974905, "comment_id": 90900517, "body": "@MarkSetchell  Thanks for your answer. If I understand correctly, I have to find the maximum height and width and then use the trick on that post to enlargen the pictures. Am I right?"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1534971875, "post_id": 51974905, "comment_id": 90900639, "body": "Yep, more or less. See if you can do it, and I&#39;ll check tomorrow and help out if you get stuck - it&#39;s getting late here now."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1534972328, "post_id": 51974905, "comment_id": 90900821, "body": "You don&#39;t need OpenCV for that at all. The offset for <code>x</code> is <code>(150-imagewidth)&#47;2</code> and for <code>y</code> is <code>(150-imageheight)2</code>."}, {"owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1534972433, "post_id": 51974905, "comment_id": 90900851, "body": "@MarkSetchell  Yes, you&#39;re right. Thank you for all your help. I&#39;m trying to write the code now. I will edit my post after I&#39;m done. Please check it tomorrow if you had time. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1535020620, "post_id": 51975251, "comment_id": 90916993, "body": "That looks good - maybe you could adapt it a little closer to OP&#39;s request for a 150x150 black background using <code>canvas = Image.new(&quot;RGB&quot;,(150,150),(0,0,0))</code> instead of reading in <code>2.jpg</code>..."}, {"owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1535041828, "post_id": 51975251, "comment_id": 90930451, "body": "Thanks, Alex. This was really helpful. The &quot;paste&quot; method is what I was looking for. Also, thank you @MarkSetchell"}], "tags": [], "owner": {"reputation": 48, "user_id": 3159930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd7ba37ee5f9811643b2d0e58466adad?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Palumbo", "link": "https://stackoverflow.com/users/3159930/alex-palumbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1534972567, "creation_date": 1534972567, "answer_id": 51975251, "question_id": 51974905, "link": "https://stackoverflow.com/questions/51974905/how-to-embed-a-small-photo-in-the-center-of-a-larger-black-background-in-python/51975251#51975251", "title": "How to embed a small photo in the center of a larger black background in python?", "body": "<p>I've done something very similar before using PIL. I'm assuming you're trying to output the new image.</p>\n\n<pre><code>from PIL import Image\n\n# load in the top image\ntop_img = Image.open('1.jpg', 'r')\ntop_img_w, top_img_h = top_img.size\n\n# load in the bottom image\nbottom_img = Image.open('2.jpg', 'r')\n# get the size or use 150x150 if it's constant\nbottom_img_w, bottom_img_h = bottom_img.size\n\n# offset the top image so it's placed in the middle of the bottom image\noffset = ((bottom_img_w - top_img_w) // 2, (bottom_img_h - top_img_h) // 2)\n\n# embed top_img on top of bottom_img\nbottom_img.paste(top_img, offset)\n\noutput_name = '3.jpg'\nbottom_img.save(output_name)\n</code></pre>\n"}], "owner": {"reputation": 462, "user_id": 6547573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61726abd06adf1dafc07d0c5c9e3f5?s=128&d=identicon&r=PG&f=1", "display_name": "stressed out", "link": "https://stackoverflow.com/users/6547573/stressed-out"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51975251, "answer_count": 1, "score": 0, "last_activity_date": 1534972567, "creation_date": 1534970969, "last_edit_date": 1534971079, "question_id": 51974905, "link": "https://stackoverflow.com/questions/51974905/how-to-embed-a-small-photo-in-the-center-of-a-larger-black-background-in-python", "title": "How to embed a small photo in the center of a larger black background in python?", "body": "<p>So, I have a collection of binary (black and white) photos with the heights and the widths varying from 80px to 140px. The aspect ratio is not fixed. I want to embed each photo in the center of a larger 150px &times; 150px photo in Python.</p>\n\n<p>I have only recently become familiar with PIL and OpenCV. And I haven't been coding in Python for long. Hence, I'm stuck. Any solution that works in Python is appreciated.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1534971005, "post_id": 51974880, "comment_id": 90900285, "body": "Don&#39;t use <code>list</code> as a variable name as it will stomp on the builtin type. <code>list.append()</code> modifies the object in place and returns <code>None</code>."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 2, "creation_date": 1534971075, "post_id": 51974880, "comment_id": 90900315, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16641119/why-does-append-return-none-in-this-code\">Why does append return none in this code?</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534971230, "post_id": 51974880, "comment_id": 90900376, "body": "Incidentally, this wouldn&#39;t have worked even in Java. In Java, <code>List.add</code> returns <code>true</code>."}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 3, "last_activity_date": 1619191440, "last_edit_date": 1619191440, "creation_date": 1534971006, "answer_id": 51974911, "question_id": 51974880, "link": "https://stackoverflow.com/questions/51974880/how-to-use-an-inline-list-update-as-function-parameter/51974911#51974911", "title": "How to use an inline list update as function parameter?", "body": "<p>You can use:</p>\n<pre><code>L = ['a', 'b']\nprint(L + ['c'])\n</code></pre>\n<p>which concatenates the single-item list <code>['c']</code> with the <code>L</code> list. Passing this to <code>print</code> is the same as <code>my_function</code> in terms of behavior.</p>\n<p>Output of the above code, which is what the list looks like in <code>my_function</code> as well, is</p>\n<pre><code>['a', 'b', 'c']\n</code></pre>\n<p>Note that in your original example, when you call a variable <code>list</code>, you've redefined the builtin function <code>list()</code>, which converts an iterable to a list, so please use caution in choosing your variable names.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/16641119/why-does-append-always-return-none-in-python\">Why does append() always return None in Python?</a></p>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 9565456, "user_type": "registered", "profile_image": "https://graph.facebook.com/2071627313120596/picture?type=large", "display_name": "Ruiyang Li", "link": "https://stackoverflow.com/users/9565456/ruiyang-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972809, "last_edit_date": 1534972809, "creation_date": 1534972480, "answer_id": 51975233, "question_id": 51974880, "link": "https://stackoverflow.com/questions/51974880/how-to-use-an-inline-list-update-as-function-parameter/51975233#51975233", "title": "How to use an inline list update as function parameter?", "body": "<p>In python, an argument is defined as A value provided to a function when the function is called. <code>type(list.append())</code> returns a Nonetype. This is explained in this thread <a href=\"https://stackoverflow.com/questions/21095654/what-is-a-nonetype-object\">What is a &#39;NoneType&#39; object?</a>. As far as I know, there is no built-in list method in python returns the modified list.In short answer from @ggorlen is probably the best, because <code>l + ['c']</code> returns a list.\nor you can write your own append function</p>\n"}], "owner": {"reputation": 21, "user_id": 1683326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuEve.jpg?s=128&g=1", "display_name": "Tincho", "link": "https://stackoverflow.com/users/1683326/tincho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 51974911, "answer_count": 2, "score": 1, "last_activity_date": 1619191516, "creation_date": 1534970850, "last_edit_date": 1619191516, "question_id": 51974880, "link": "https://stackoverflow.com/questions/51974880/how-to-use-an-inline-list-update-as-function-parameter", "title": "How to use an inline list update as function parameter?", "body": "<p>I have a list which I appended a value and then use the new list to call a function, I would like to do that in one line but is not working...</p>\n<pre><code>list = ['a', 'b']\nmy_funtion(list.append('c'))\n</code></pre>\n<p><code>my_function</code> received a <code>None</code> instead the list with the three letters which is correct because from doc:</p>\n<pre><code>def append(self, p_object):\n    &quot;&quot;&quot; L.append(object) -&gt; None -- append object to end &quot;&quot;&quot;\n    pass\n</code></pre>\n<p>it works if I do:</p>\n<pre><code>list = ['a', 'b']\nlist.append('c')\nmy_funtion(list)\n</code></pre>\n<p>I would like to know if there is way to simplify the code with my original sample.</p>\n"}, {"tags": ["python", "python-3.x", "gtk", "gtk3", "pygobject"], "answers": [{"tags": [], "owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "is_accepted": true, "score": 4, "last_activity_date": 1537364658, "last_edit_date": 1537364658, "creation_date": 1536959574, "answer_id": 52339259, "question_id": 51974845, "link": "https://stackoverflow.com/questions/51974845/cancel-a-drag-drop-for-some-specific-items-in-a-gtk-treeview/52339259#52339259", "title": "Cancel a Drag &amp; Drop for some specific items in a Gtk.TreeView", "body": "<p>You have to overload <a href=\"https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TreeDragSource.html#Gtk.TreeDragSource.do_row_draggable\" rel=\"nofollow noreferrer\"><code>Gtk.TreeDragSource.do_row_draggable()</code></a>.</p>\n\n<pre><code>class MyTreeStore (Gtk.TreeStore):\n    # ...\n    def do_row_draggable(self, path):\n        # do your decision here\n\n        return True # draggable\n        return False # NOT draggable\n</code></pre>\n"}], "owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 52339259, "answer_count": 1, "score": 5, "last_activity_date": 1537364658, "creation_date": 1534970730, "last_edit_date": 1535022565, "question_id": 51974845, "link": "https://stackoverflow.com/questions/51974845/cancel-a-drag-drop-for-some-specific-items-in-a-gtk-treeview", "title": "Cancel a Drag &amp; Drop for some specific items in a Gtk.TreeView", "body": "<p>I have a <code>Gtk.TreeView</code> here. Most but not all of the items should be able to be dragged &amp; dropped. In this example the first item should <strong>not</strong> be able to be dragged &amp; dropped but it should be selectable.</p>\n\n<p>How can I realize this? Maybe I have to use the <code>drag-begin</code> signal and stop the drag in there. But I don't know how.</p>\n\n<pre><code>#!/usr/bin/env python3\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk\nfrom gi.repository import Gdk\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        Gtk.Window.__init__(self, title=\"TreeView Drag and Drop\")\n        self.connect(\"delete-event\", Gtk.main_quit)\n        self.set_default_size(400, 300)\n\n        # \"model\" with dummy data\n        self.store = Gtk.TreeStore(str)\n        self.store.append(None, ['do not drag this'])\n        self.store.append(None, ['drag this'])\n        self.view = Gtk.TreeView(model=self.store)\n        self.add(self.view)\n\n        # build columsn\n        colA = Gtk.TreeViewColumn('Col A', Gtk.CellRendererText(), text=0)\n        self.view.append_column(colA)\n\n        # DnD events\n        self.view.connect(\"drag-data-received\", self.drag_data_received)\n        self.view.connect(\"drag-data-get\", self.drag_data_get)\n        self.view.connect(\"drag-begin\", self.drag_begin)\n\n        target_entry = Gtk.TargetEntry.new('text/plain', 2, 0)\n        self.view.enable_model_drag_source(\n                Gdk.ModifierType.BUTTON1_MASK,[target_entry], \n                Gdk.DragAction.DEFAULT|Gdk.DragAction.MOVE\n        )\n        self.view.enable_model_drag_dest(\n                [target_entry],\n                Gdk.DragAction.DEFAULT|Gdk.DragAction.MOVE\n        )\n\n    def drag_data_get (self, treeview, drag_context, data, info, time):\n        model, path = treeview.get_selection().get_selected_rows()\n        print('dd-get\\tpath: {}'.format(path))\n        data.set_text(str(path[0]), -1)\n\n    def drag_data_received (self, treeview, drag_context, x,y, data,info, time):\n        print('dd-received')\n        store = treeview.get_model()\n        source_iter = store.get_iter(data.get_text())\n        dest_path, drop_pos = self.view.get_dest_row_at_pos(x, y)\n        print('path: {} pos: {}'.format(dest_path, drop_pos))\n\n    def drag_begin(self, widget, context):\n        print(widget)\n        print(context)\n\nwin = MainWindow()\nwin.show_all()\nGtk.main()\n</code></pre>\n"}, {"tags": ["python", "pandas", "networkx"], "comments": [{"owner": {"reputation": 1923, "user_id": 3661874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c46e7cbea4909e6811a5cb3c9e71384a?s=128&d=identicon&r=PG&f=1", "display_name": "fiveclubs", "link": "https://stackoverflow.com/users/3661874/fiveclubs"}, "edited": false, "score": 0, "creation_date": 1534971123, "post_id": 51974825, "comment_id": 90900323, "body": "I was able to reproduce this with python 3.7.0, pandas 0.23.4, networkx 2.1"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 1, "creation_date": 1534974229, "post_id": 51974825, "comment_id": 90901545, "body": "this likely has to do with the fact that in networkx v2.x <code>nx.degree(G)</code> returns what is called a &#39;DegreeView&#39; object, which is similar to a dict.  What format do you need <code>DEGREE</code> to be in?"}, {"owner": {"reputation": 237, "user_id": 4766240, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c45dea2ce9a8d7cefa18f95b9d9b0950?s=128&d=identicon&r=PG&f=1", "display_name": "ASF", "link": "https://stackoverflow.com/users/4766240/asf"}, "edited": false, "score": 0, "creation_date": 1534976168, "post_id": 51974825, "comment_id": 90902187, "body": "You are correct, the problem is in the DEGREE line. DEGREE should be in number (integers), just like in the example added to the original post"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1535141522, "post_id": 51974825, "comment_id": 90973206, "body": "@joel nice catch on the v2.x networkx change in data type return from nx.degree method."}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 4, "last_activity_date": 1535076670, "last_edit_date": 1535076670, "creation_date": 1535059289, "answer_id": 51994431, "question_id": 51974825, "link": "https://stackoverflow.com/questions/51974825/networkx-pandas-cant-output-the-degree-of-the-nodes-into-a-txt-file-error/51994431#51994431", "title": "NetworkX / Pandas - can&#39;t output the degree of the nodes into a .txt file (error message)", "body": "<p>Okay after reading the above comments ( @Joel ) and doing a <a href=\"https://networkx.github.io/documentation/stable/release/migration_guide_from_1.x_to_2.0.html\" rel=\"nofollow noreferrer\">little research</a>, we can use <code>dict(G.degree)</code> instead of <code>nx.degree</code>:</p>\n\n<pre><code>import networkx as nx\n\nG = nx.Graph()\nG.add_edges_from([(1,2),(1,3),(2,3),(3,4),(4,5),(4,6)])\n\ndf = pd.DataFrame(dict(\n    DEGREE = dict(G.degree),\n    DEGREE_CENTRALITY = nx.degree_centrality(G),\n    EIGENVECTOR = nx.eigenvector_centrality(G),\n    KATZ = nx.katz_centrality_numpy(G),\n    CLOSENESS_CENTRALITY = nx.closeness_centrality(G),\n    BETWEENNESS_CENTRALITY = nx.betweenness_centrality(G),\n    CLUSTCOEF = nx.clustering(G),\n)) \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   DEGREE  DEGREE_CENTRALITY  EIGENVECTOR      KATZ  CLOSENESS_CENTRALITY  BETWEENNESS_CENTRALITY  CLUSTCOEF\n1       2                0.4     0.456984  0.408764              0.500000                     0.0   1.000000\n2       2                0.4     0.456984  0.408764              0.500000                     0.0   1.000000\n3       3                0.6     0.584217  0.448883              0.714286                     0.6   0.333333\n4       3                0.6     0.417120  0.441314              0.714286                     0.7   0.000000\n5       1                0.2     0.183076  0.367131              0.454545                     0.0   0.000000\n6       1                0.2     0.183076  0.367131              0.454545                     0.0   0.000000\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 4766240, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c45dea2ce9a8d7cefa18f95b9d9b0950?s=128&d=identicon&r=PG&f=1", "display_name": "ASF", "link": "https://stackoverflow.com/users/4766240/asf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 51994431, "answer_count": 1, "score": 1, "last_activity_date": 1535076670, "creation_date": 1534970624, "last_edit_date": 1534976064, "question_id": 51974825, "link": "https://stackoverflow.com/questions/51974825/networkx-pandas-cant-output-the-degree-of-the-nodes-into-a-txt-file-error", "title": "NetworkX / Pandas - can&#39;t output the degree of the nodes into a .txt file (error message)", "body": "<p>I need to ouput the degree (as well other centrality metrics) of the nodes of a network into a .txt file. I was able to this in previous NetworkX / Pandas versions, but now I'm getting an error.</p>\n\n<p>I'm using NetworkX ver. 2.1 and Pandas ver. 0.23.4:</p>\n\n<pre><code>import pandas as pd\nimport networkx as nx\n\nG = nx.Graph()\nG.add_edges_from([(1,2),(1,3),(2,3),(3,4),(4,5),(4,6)])\n\ndf = pd.DataFrame(dict(\n    DEGREE = nx.degree(G),\n    DEGREE_CENTRALITY = nx.degree_centrality(G),\n    EIGENVECTOR = nx.eigenvector_centrality(G),\n    KATZ = nx.katz_centrality_numpy(G),\n    CLOSENESS_CENTRALITY = nx.closeness_centrality(G),\n    BETWEENNESS_CENTRALITY = nx.betweenness_centrality(G),\n    CLUSTCOEF = nx.clustering(G),\n)) \n#df.index += 1 \n#df.to_csv('centrality-metrics.csv')\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 8, in &lt;module&gt;\n  File \"/home/arthur/anaconda2/lib/python2.7/site-packages/pandas/core/frame.py\", line 348, in __init__\n    mgr = self._init_dict(data, index, columns, dtype=dtype)\n  File \"/home/arthur/anaconda2/lib/python2.7/site-packages/pandas/core/frame.py\", line 459, in _init_dict\n    return _arrays_to_mgr(arrays, data_names, index, columns, dtype=dtype)\n  File \"/home/arthur/anaconda2/lib/python2.7/site-packages/pandas/core/frame.py\", line 7356, in _arrays_to_mgr\n    index = extract_index(arrays)\n  File \"/home/arthur/anaconda2/lib/python2.7/site-packages/pandas/core/frame.py\", line 7405, in extract_index\n    raise ValueError('Mixing dicts with non-Series may lead to '\nValueError: Mixing dicts with non-Series may lead to ambiguous ordering.\n</code></pre>\n\n<p>Update: If I comment(#) the DEGREE line, the error won't happen. The output .txt would be similar to this (my original data is from a gene network):</p>\n\n<pre><code>GENE    BETWEENNESS CLOSENESS   CLUSTCOEF   DEGREE  DEGREE_CENTRALITY   EIGENVECTOR KATZ\nA1BG    0.000142303010695361    0.318553702985653   0.0350877192982456  19  0.00115635080031647 7.26316435442522e-05    0.00556190357079266\nA1CF    5.71271005407417e-05    0.33571705861921    0.375324675324675   56  0.00340819183251172 0.000225887126821305    -0.00251062164644857\nA2M 0.000886299232394493    0.370534908894101   0.109265734265734   146 0.00888564299190554 0.00294316042120819 0.0163918804690203\nA4GALT  7.38971769935498e-07    0.286369102602088   0   4   0.000243442273750837    1.35050378606586e-05    -0.000361261465931375\nA4GNT   1.03038198147882e-05    0.297404430929626   0   15  0.000912908526565638    2.45985150882602e-05    0.00562955611859571\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": true, "score": 1, "last_activity_date": 1534971285, "creation_date": 1534971285, "answer_id": 51974980, "question_id": 51974807, "link": "https://stackoverflow.com/questions/51974807/split-every-row-in-data-frame-and-add-value-to-each-element-avoiding-nan/51974980#51974980", "title": "Split every row in data frame and add value to each element avoiding NaN", "body": "<p>It looks like the problem is in the order of the <code>astype</code> and <code>fillna</code> calls.</p>\n\n<pre><code>&gt;&gt;&gt; df.astype(str).fillna('')\nuser_index movie_index  genre_index cast_index\n0       3590        1514  10|12|17|35     46|534\n1         63         563      4|2|1|8       None\n2         15           9         None       9|27\n</code></pre>\n\n<p>If you switch the order of the two methods you get something that works:</p>\n\n<pre><code>&gt;&gt;&gt; df.fillna('').astype(str).apply(lambda x: [ [int(z) + offset_dct.get(x.name, 0) for z in y.split('|') if z] for y in x])\n  user_index movie_index       genre_index cast_index\n0     [3592]      [1514]  [15, 17, 22, 40]  [46, 534]\n1       [65]       [563]     [9, 7, 6, 13]         []\n2       [17]         [9]                []    [9, 27]\n</code></pre>\n\n<p>Also there was an error in your original list comprehension.  You can't put an else clause in the if condition of a list comprehension.  The if condition is purely there to tell the comprehension which values to keep.  If you wanted to do something differently depending on the value of each item, you'd need to put that logic in the function part of the comprehension (probably using a lambda expression).  But for this particular problem you didn't need anything else than what I wrote above.</p>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534973040, "creation_date": 1534973040, "answer_id": 51975355, "question_id": 51974807, "link": "https://stackoverflow.com/questions/51974807/split-every-row-in-data-frame-and-add-value-to-each-element-avoiding-nan/51975355#51975355", "title": "Split every row in data frame and add value to each element avoiding NaN", "body": "<p>How about a two step approach?</p>\n\n<ol>\n<li><p>Convert to list:</p>\n\n<pre><code>df = df.applymap(lambda x: x if pd.isna(x) else str(x).split('|'))\n</code></pre></li>\n<li><p>Add:</p>\n\n<pre><code>offset_dct = {'user_index': 2, 'genre_index': 5}\nfor k,v in offset_dct.items():\n    df[k] = df[k].map(lambda x: [int(i)+5 for i in x] if isinstance(x,list) else x)\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 195, "user_id": 7332095, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9c1cdda11071106044de85edaadcd727?s=128&d=identicon&r=PG&f=1", "display_name": "Ekaterina", "link": "https://stackoverflow.com/users/7332095/ekaterina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 51974980, "answer_count": 2, "score": 0, "last_activity_date": 1534973040, "creation_date": 1534970549, "question_id": 51974807, "link": "https://stackoverflow.com/questions/51974807/split-every-row-in-data-frame-and-add-value-to-each-element-avoiding-nan", "title": "Split every row in data frame and add value to each element avoiding NaN", "body": "<p>the question originates from here: <a href=\"https://stackoverflow.com/questions/51972968/split-every-row-in-df-and-add-value-to-each-element\">Split every row in df and add value to each element</a></p>\n\n<p>here is updated df:</p>\n\n<pre><code>df = pd.DataFrame({'user_index': [3590,63, 15], 'movie_index': [1514,563, 9], \n'genre_index':['10|12|17|35', '4|2|1|8', None], 'cast_index':['46|534', None, '9|27']})\n</code></pre>\n\n<p>to get the desired dataframe in which to every element would be added a value, I try:</p>\n\n<pre><code>offset_dct = {'user_index': 2, 'genre_index': 5}\ndf.astype(str).fillna('').apply(lambda x: [\n[int(z) + offset_dct.get(x.name, 0) for z in y.split('|') if z is not None else []] for y in x])\n</code></pre>\n\n<p>but it returns me an error:</p>\n\n<pre><code>ValueError: (\"invalid literal for int() with base 10: 'nan'\", 'occurred at index genre_index')\n</code></pre>\n\n<p>if there were no 'NaN', this code would work perfectly:</p>\n\n<pre><code>offset_dct = {'user_index': 2, 'genre_index': 5}\ndf = df.fillna('').astype(str).apply(lambda x: [\n    [int(z) + offset_dct.get(x.name, 0) for z in y.split('|')] for y in x])\n</code></pre>\n\n<p>the problem is in constructing a list comprehension for ignoring NaN I think..</p>\n\n<p>any help to solve would be very appreciated!</p>\n"}, {"tags": ["python", "decorator", "self"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1534970774, "creation_date": 1534970774, "answer_id": 51974858, "question_id": 51974760, "link": "https://stackoverflow.com/questions/51974760/change-instance-attributes-inside-decorator/51974858#51974858", "title": "Change instance attributes inside decorator", "body": "<p>The wrapped function doesn't have a parameter named <code>self</code>; you need to specify that specifically if you are going to assume <code>fn</code> is a method.</p>\n\n<pre><code>def detectAndIgnoreErrors(fn):\n    def wrappedFunc(self, *args, **kwargs):\n        try:\n            fn(self, *args, **kwargs)\n            self.HasAnExceptionOccurredInInit = False\n        except KeyError as e:\n            self.HasAnExceptionOccurredInInit = True\n            # Log and print exception\n        except RuntimeError as e:\n            self.HasAnExceptionOccurredInInit = True\n            # Log and print exception\n\n    return wrappedFunc\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10261513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7829e8949cdd6e79fa616383d8dcf8?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Bonadia", "link": "https://stackoverflow.com/users/10261513/rodrigo-bonadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 51974858, "answer_count": 1, "score": 1, "last_activity_date": 1534970774, "creation_date": 1534970377, "question_id": 51974760, "link": "https://stackoverflow.com/questions/51974760/change-instance-attributes-inside-decorator", "title": "Change instance attributes inside decorator", "body": "<p>I have searched for this problem, but I did not find an answer to what I'm exactly looking for.</p>\n\n<p>Basically, I want to wrap a class constructor in a try/except clause so it ignores specific types of errors inside the constructor (but logs and prints them anyway). The best way I have found to do this is to wrap my method with a decorator, since there are other classes in which I want to do the same, but I don't want to keep repeating the same try/except clauses.</p>\n\n<p>However, <strong>the object must remember whether an exception has happened in the constructor</strong> (save it in a boolean attribute from that object) so that I can use that information later when that object calls a specific method later. So, I tried doing something like in this snippet:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def detectAndIgnoreErrors(fn):\n    def wrappedFunc(*args, **kwargs):\n        try:\n            fn(*args, **kwargs)\n            self.HasAnExceptionOccurredInInit = False\n        except KeyError as e:\n            self.HasAnExceptionOccurredInInit = True\n            # Log and print exception\n        except RuntimeError as e:\n            self.HasAnExceptionOccurredInInit = True\n            # Log and print exception\n\n    return wrappedFunc\n\n\nclass Foo(FooSuperclass):\n\n    @detectAndIgnoreErrors\n    def __init__(self):\n        # Do stuff that may raise exceptions\n        pass\n\n    def doStuff(self):\n        if self.HasAnExceptionOccurredInInit:\n            # Do stuff\n            pass\n        else:\n            # Do other stuff\n            pass\n\nfooInstance = Foo()\nfooInstance.doStuff()\n</code></pre>\n\n<p>The idea here would be for the object to ignore errors in the constructor, and later when the <code>doStuff()</code> method is called, the object remembers whether an exception occurred or not with <code>HasAnExceptionOccurredInInit</code> and adjusts its behavior accordingly. However, the interpreter says that the <code>self</code> name is not defined (which makes sense, as I was trying to access it outside the class scope).</p>\n\n<p>Then, I tried putting the decorator as a class member, and then later I tried putting it as a class member in Foo's parent class, but none of these alternatives worked.</p>\n\n<p>After some research, I realized that decorators are resolved at definition time, not during execution time, so there's no way <code>self</code> can be used this way, so I don't know how I can solve this problem.</p>\n\n<p>If someone knows how to solve this problem (or perhaps a better solution instead of decorators), it would be very appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 908, "user_id": 4521646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ded989303a7b5694978c505052f6c1?s=128&d=identicon&r=PG", "display_name": "Jirka B.", "link": "https://stackoverflow.com/users/4521646/jirka-b"}, "edited": false, "score": 2, "creation_date": 1534970433, "post_id": 51974727, "comment_id": 90900064, "body": "your <code>datafile</code> is a handler to the opened file which does not have a method <code>count</code>, may you more describe what you want to do or provide the sample file..."}], "answers": [{"tags": [], "owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1534970470, "creation_date": 1534970470, "answer_id": 51974790, "question_id": 51974727, "link": "https://stackoverflow.com/questions/51974727/duplicate-numbers-reading-a-text-file-in-python/51974790#51974790", "title": "Duplicate numbers reading a text file in Python", "body": "<p>Your immediate error is because you're asking <code>if datafile.count(i)</code> and <code>datafile</code> is a file, which doesn't know how to count its contents. </p>\n\n<p>Your question is not about how to solve the larger problem, but since I'm here:\nAssuming <code>Duplicate.txt</code> contains numbers, one per line, I would probably read each line's contents into a list and then use a Counter to count the list's contents. </p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534970934, "post_id": 51974798, "comment_id": 90900256, "body": "nice &amp; comprehensive answer, but using a counter for this is overkill. You don&#39;t want to count, you want to check for more than 1 occurrence. You can do this with 1 aux. set instead of bothering <code>collections.Counter</code> bazooka"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534971048, "post_id": 51974798, "comment_id": 90900303, "body": "@Jean-Fran&#231;oisFabre Yeah, two sets will work, and be more efficient, but I thought it would be more complicated to explain to someone who&#39;s thinking in terms of counting. (Although maybe coming up with better names, like <code>seen</code> and <code>repeated</code>, instead of using the OP&#39;s <code>newList</code> would help\u2026)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534971131, "post_id": 51974798, "comment_id": 90900327, "body": "agreed. Though your solution applies if you want to count elements occurring at least n times."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 4, "last_activity_date": 1534970866, "last_edit_date": 1534970866, "creation_date": 1534970498, "answer_id": 51974798, "question_id": 51974727, "link": "https://stackoverflow.com/questions/51974727/duplicate-numbers-reading-a-text-file-in-python/51974798#51974798", "title": "Duplicate numbers reading a text file in Python", "body": "<p>The problem is exactly what it says: file objects don't know how to count anything. They're just iterators, not lists or strings or anything like that.</p>\n\n<p>And part of the reason for that is that it would potentially be very slow to scan the whole file over and over like that.</p>\n\n<p>If you really need to use <code>count</code>, you can put the lines into a list first. Lists are entirely in-memory, so it's not nearly as slow to scan them over and over, and they have a <code>count</code> method that does exactly what you're trying to do with it:</p>\n\n<pre><code>datafile = open (\"Duplicate.txt\", \"r\")\nlines = list(datafile)\n\nfor i in lines:\n    if lines.count(i) &gt;= 2:\n        newList.add(i)\n\ndatafile.close()\n</code></pre>\n\n<hr>\n\n<p>However, there's a much better solution: Just keep counts as you go along, and then keep the ones that are >= 2. In fact, you can write that in two lines:</p>\n\n<pre><code>counts = collections.Counter(datafile)\nnewList = {line for line, count in counts.items() if count &gt;= 2}\n</code></pre>\n\n<p>But if it isn't clear to you why that works, you may want to do it more explicitly:</p>\n\n<pre><code>counts = collections.Counter()\nfor i in datafile:\n    counts[i] += 1\nnewList = set()\nfor line, count in counts.items():\n    if count &gt;= 2:\n        newList.add(line)\n</code></pre>\n\n<p>Or, if you don't even understand the basics of <code>Counter</code>:</p>\n\n<pre><code>counts = {}\nfor i in datafile:\n    if i not in counts:\n        counts[i] = 1\n    else:\n        counts[i] += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534971192, "post_id": 51974883, "comment_id": 90900358, "body": "Great answer (I guess it isn&#39;t that hard to explain\u2026). But why <code>sorted</code> at the end? The OP didn&#39;t ask for sorting, and I think it&#39;s just going to confuse things given that these lines are supposed to be &quot;numbers&quot; and you&#39;re reading and sorting them as strings\u2026"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534971267, "post_id": 51974883, "comment_id": 90900404, "body": ";) I guess we all have different ways of over-engineering things. Edited out. We didn&#39;t address the &quot;end of line char&quot; which will ruin the display, that said."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534971496, "post_id": 51974883, "comment_id": 90900492, "body": "Well, if you really want to overengineer things, you just need to write a key function that handles floats, ints too large to fit in a float, Roman numerals, numbers written out in English, numbers written out in ancient Mongolian, \u2026:)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534971567, "post_id": 51974883, "comment_id": 90900519, "body": "err ok let me post such an answer with my second account :)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1534971237, "last_edit_date": 1534971237, "creation_date": 1534970868, "answer_id": 51974883, "question_id": 51974727, "link": "https://stackoverflow.com/questions/51974727/duplicate-numbers-reading-a-text-file-in-python/51974883#51974883", "title": "Duplicate numbers reading a text file in Python", "body": "<p>The error in your code is trying to apply <code>count</code> on a file handle, not on a <code>list</code>.</p>\n\n<p>Anyway, you don't need to count the elements, you just need to see if the element already has been seen in the file.</p>\n\n<p>I'd suggest a marker set to note down which elements already occured.</p>\n\n<pre><code>seen = set()\nresult = set()\nwith open (\"Duplicate.txt\", \"r\") as datafile:\n    for i in datafile:\n        # you may turn i to a number here with: i = int(i)\n        if i in seen:\n            result.add(i)  # data is already in seen: duplicate\n        else:\n            seen.add(i)  # next time it occurs, we'll detect it\n\nprint(list(result))  # convert to list (maybe not needed, set is ok to print)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534971143, "post_id": 51974914, "comment_id": 90900337, "body": "If you <code>read</code> the whole file and then <code>split</code> it, you&#39;re counting words within lines, instead of counting lines like the OP was intending to. Maybe that&#39;s what they actually want, or maybe it doesn&#39;t matter, but if you&#39;re going to make a change like that, you need to explain that you&#39;re doing so, and why."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534971195, "post_id": 51974914, "comment_id": 90900360, "body": "besides, it&#39;s really over complicated and hard to understand."}, {"owner": {"reputation": 851, "user_id": 9915320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e7xTY7kugGw/AAAAAAAAAAI/AAAAAAAAAVE/tdGt_X0Zcvo/photo.jpg?sz=128", "display_name": "Philip DiSarro", "link": "https://stackoverflow.com/users/9915320/philip-disarro"}, "edited": false, "score": 0, "creation_date": 1534971411, "post_id": 51974914, "comment_id": 90900461, "body": "Where does the op mention he wanted to count lines? <code>str.split()</code> splits the string into a list of words, not a list of lines. So I&#39;m not counting words within lines, I&#39;m counting words within the whole file."}], "tags": [], "owner": {"reputation": 851, "user_id": 9915320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e7xTY7kugGw/AAAAAAAAAAI/AAAAAAAAAVE/tdGt_X0Zcvo/photo.jpg?sz=128", "display_name": "Philip DiSarro", "link": "https://stackoverflow.com/users/9915320/philip-disarro"}, "is_accepted": false, "score": 0, "last_activity_date": 1534971545, "last_edit_date": 1534971545, "creation_date": 1534971008, "answer_id": 51974914, "question_id": 51974727, "link": "https://stackoverflow.com/questions/51974727/duplicate-numbers-reading-a-text-file-in-python/51974914#51974914", "title": "Duplicate numbers reading a text file in Python", "body": "<p>You are looking to use the <code>list.count()</code> method, instead you've mistakenly called it on a file object. Instead, lets read the file, split it's contents into a list, and then obtain the count of each item using the <code>list.count()</code> method. </p>\n\n<pre><code># read the data from the file\nwith open (\"Duplicate.txt\", \"r\") as datafile:\n    datafile_data = datafile.read()\n\n# split the file contents by whitespace and convert to list\ndatafile_data = datafile_data.split()\n\n# build a dictionary mapping words to their counts\nword_to_count = {}\nunique_data = set(datafile_data)\nfor data in unique_data:\n    word_to_count[data] = datafile_data.count(data)\n\n# populate our list of duplicates\nall_duplicates = []\nfor x in word_to_count:\n    if word_to_count[x] &gt; 2:\n        all_duplicates.append(x)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3266606, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155367373346838/picture?type=large", "display_name": "Scott Marriott", "link": "https://stackoverflow.com/users/3266606/scott-marriott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1534976602, "creation_date": 1534970178, "last_edit_date": 1534976602, "question_id": 51974727, "link": "https://stackoverflow.com/questions/51974727/duplicate-numbers-reading-a-text-file-in-python", "title": "Duplicate numbers reading a text file in Python", "body": "<p>I have a Python script which I'm trying to use to print duplicate numbers in the <code>Duplicate.txt</code> file:</p>\n\n<pre><code>newList = set()\n\ndatafile = open (\"Duplicate.txt\", \"r\")\n\nfor i in datafile:\n    if datafile.count(i) &gt;= 2:\n        newList.add(i)\ndatafile.close()\n\nprint(list(newList))\n</code></pre>\n\n<p>I'm getting the following error, could anyone help please?</p>\n\n<p><code>AttributeError: '_io.TextIOWrapper' object has no attribute 'count'</code></p>\n"}, {"tags": ["python", "toolbar", "mayavi"], "comments": [{"owner": {"reputation": 2539, "user_id": 3637404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ff3SL.png?s=128&g=1", "display_name": "Felipe Lema", "link": "https://stackoverflow.com/users/3637404/felipe-lema"}, "edited": false, "score": 0, "creation_date": 1535056702, "post_id": 51974711, "comment_id": 90937540, "body": "Maybe a minimum working example will help for your question. I understand it may not be obvious from the answer you linked, but maybe we can help if you show us the code you&#39;re using."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10720998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0121fb7c38ac896e35b546946572a8c?s=128&d=identicon&r=PG&f=1", "display_name": "J.Yan", "link": "https://stackoverflow.com/users/10720998/j-yan"}, "edited": false, "score": 0, "creation_date": 1543480308, "post_id": 53533928, "comment_id": 93937022, "body": "@roflcopter122 hello, I have integrated a mayavi 3d plot into a gui which was made with pyqt5, and the Mayavi toolbar was removed using code. But when I Converting it into .exe-file with cx_Freeze, The same problem was encountered:&quot;no traitsui.toolkits plugin found for toolkit qt4&quot;.Can you tell me about your solution? Thank you very much!"}, {"owner": {"reputation": 135, "user_id": 10014980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc8f4ce2abb04f875befa26f233e5ab?s=128&d=identicon&r=PG&f=1", "display_name": "roflcopter122", "link": "https://stackoverflow.com/users/10014980/roflcopter122"}, "edited": false, "score": 0, "creation_date": 1543525306, "post_id": 53533928, "comment_id": 93961606, "body": "The only solution to handle this issue was to downgrade pyqt5 to pyqt4 and all other packages which have dependencies to pyqt5. Hope it will help you!"}], "tags": [], "owner": {"reputation": 1, "user_id": 10720998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0121fb7c38ac896e35b546946572a8c?s=128&d=identicon&r=PG&f=1", "display_name": "J.Yan", "link": "https://stackoverflow.com/users/10720998/j-yan"}, "is_accepted": false, "score": 0, "last_activity_date": 1543476853, "creation_date": 1543476853, "answer_id": 53533928, "question_id": 51974711, "link": "https://stackoverflow.com/questions/51974711/removing-toolbar-from-mayavi-scene/53533928#53533928", "title": "Removing toolbar from mayavi scene", "body": "<pre><code>import os\nos.environ['ETS_TOOLKIT'] = 'qt4'\nos.environ['QT_API'] = 'pyqt5' \n\nfrom traits.api import HasTraits, Instance, on_trait_change\nfrom traitsui.api import View, Item\nfrom mayavi.core.ui.api import MayaviScene, MlabSceneModel, SceneEditor\nfrom PyQt5.QtWidgets import *\nfrom main import Ui_MainWindow\nimport sys\nfrom traitsui.api import Handler\n\n\nclass Visualization(HasTraits):\n    scene = Instance(MlabSceneModel, ())\n\n    @on_trait_change('scene.activated')\n    def update_plot(self):\n        self.scene.mlab.test_points3d()\n\n    view = View(Item('scene', editor=SceneEditor(scene_class=MayaviScene),\n                 height=250, width=300, show_label=False),\n            resizable=True  # We need this to resize with the parent widget\n            )\n\n\nclass DisableToolbarHandler(Handler):\n    def position(self, info):\n        editor = info.ui.get_editors('scene')[0]\n        editor._scene._tool_bar.setVisible(False)\n\n\nclass MayaviQWidget(QWidget):\n    def __init__(self, parent=None):\n        QWidget.__init__(self, parent)\n        layout = QVBoxLayout(self)\n        layout.setContentsMargins(0, 0, 0, 0)\n        layout.setSpacing(0)\n        self.visualization = Visualization()\n        self.ui = self.visualization.edit_traits(handler=DisableToolbarHandler(), kind='subpanel').control\n        layout.addWidget(self.ui)\n        self.ui.setParent(self)\n\n\nclass Action(QMainWindow, Ui_MainWindow):\n    def __init__(self, parent=None):\n        super(Action, self).__init__(parent)\n        self.setupUi(self)\n        self.splitter.setSizes([100, 300])\n        self.splitter_2.setSizes([400, 100])\n\n        container = QWidget()\n        mayavi_widget = MayaviQWidget(container)\n        self.Layout.addWidget(mayavi_widget)\n\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    action = Action()\n    action.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 334, "user_id": 5632319, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9471069a61954f371e5b49c2d7726877?s=128&d=identicon&r=PG&f=1", "display_name": "Aydo", "link": "https://stackoverflow.com/users/5632319/aydo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572311369, "creation_date": 1572311369, "answer_id": 58600266, "question_id": 51974711, "link": "https://stackoverflow.com/questions/51974711/removing-toolbar-from-mayavi-scene/58600266#58600266", "title": "Removing toolbar from mayavi scene", "body": "<p>On a figure, this can easily be done like so:</p>\n\n<pre><code>fig = mlab.figure(1)\nfig.scene.scene_editor._tool_bar.setVisible(False)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 10014980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc8f4ce2abb04f875befa26f233e5ab?s=128&d=identicon&r=PG&f=1", "display_name": "roflcopter122", "link": "https://stackoverflow.com/users/10014980/roflcopter122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572311369, "creation_date": 1534970071, "question_id": 51974711, "link": "https://stackoverflow.com/questions/51974711/removing-toolbar-from-mayavi-scene", "title": "Removing toolbar from mayavi scene", "body": "<p>Is it possible to remove/hide the standard toolbar which is created by default when you plot something with mayavi? I found this: <a href=\"https://stackoverflow.com/questions/15444458/how-to-remove-mayavi-toolbar-in-python-using-code\">How to remove Mayavi toolbar in python using code</a></p>\n\n<p>But I don't understand where I should insert this code. Is there something easier like mlab.toolbar.setVisible(False)?</p>\n"}, {"tags": ["python", "tkinter", "ipython"], "owner": {"reputation": 188, "user_id": 1144088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c660b366e7a7d27551589939a068a9a?s=128&d=identicon&r=PG", "display_name": "jcolen19", "link": "https://stackoverflow.com/users/1144088/jcolen19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534969910, "creation_date": 1534969910, "question_id": 51974680, "link": "https://stackoverflow.com/questions/51974680/embedding-ipython-console-in-tkinter-frame", "title": "Embedding IPython console in Tkinter frame", "body": "<p>I was working on a PyQt application that had an embedded JupyterWidget that would allow a user to use an IPython console to interact with certain variables that were being displayed. However, it was recently suggested that we switch to Tkinter graphics instead of Qt because of Tkinter's out of the box support in Python. </p>\n\n<p>Is there a Tkinter equivalent implementation of the JupyterWidget in PyQt? The best I can seem to find is <a href=\"https://github.com/ipython/ipython/wiki/Trash:-Old-Embedding-Tkinter\" rel=\"nofollow noreferrer\">https://github.com/ipython/ipython/wiki/Trash:-Old-Embedding-Tkinter</a> but this uses a very old version of IPython where almost all of the function calls are deprecated or removed entirely. </p>\n\n<p>I had also tried <a href=\"https://stackoverflow.com/questions/21811464/how-can-i-embed-a-python-interpreter-frame-in-python-using-tkinter\">this</a> but was unable to make it so that changes in the subprocess' variables were reflected in the overall program.</p>\n"}, {"tags": ["python", "python-3.x", "opencv3.0"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 10264576, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f3ecb41589c92b3d4d8af6d98ca82c95?s=128&d=identicon&r=PG", "display_name": "Isabel", "link": "https://stackoverflow.com/users/10264576/isabel"}, "is_accepted": true, "score": 4, "last_activity_date": 1535026915, "last_edit_date": 1535026915, "creation_date": 1535025065, "answer_id": 51985187, "question_id": 51974632, "link": "https://stackoverflow.com/questions/51974632/webcam-light-still-on-after-cam-release/51985187#51985187", "title": "Webcam light still on after cam.release()", "body": "<p>I had exactly the same problem. Was using python3.6 and opencv 3.4.2 (also on Windows10), reinstalled opencv-python version to 3.4.0.14. That worked for me. </p>\n\n<p>Seems that there is a problem with opencv 3.4.2.</p>\n\n<p>That specific version you can install by running the command:</p>\n\n<p><code>pip install opencv-python==3.4.0.14</code></p>\n"}, {"comments": [{"owner": {"reputation": 572, "user_id": 3326192, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uCqeM.jpg?s=128&g=1", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/3326192/gabrielle"}, "edited": false, "score": 0, "creation_date": 1536295457, "post_id": 52210837, "comment_id": 91379746, "body": "I\u2019ve opened the issue... now it seems they created a PR to address this issue in the new version...."}], "tags": [], "owner": {"reputation": 1446, "user_id": 4267439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5c28773944047f7cb533b3707cac4e0e?s=128&d=identicon&r=PG&f=1", "display_name": "rok", "link": "https://stackoverflow.com/users/4267439/rok"}, "is_accepted": false, "score": 1, "last_activity_date": 1536261558, "creation_date": 1536261558, "answer_id": 52210837, "question_id": 51974632, "link": "https://stackoverflow.com/questions/51974632/webcam-light-still-on-after-cam-release/52210837#52210837", "title": "Webcam light still on after cam.release()", "body": "<p>Same here, using c++ and OpenCV 3.4.3 on Windows10.</p>\n\n<p>Problem seems related to MSMF backend, disabling creating a environment variable with value:</p>\n\n<p>OPENCV_VIDEOIO_PRIORITY_MSMF=0 </p>\n\n<p>solve the problem. Source: <a href=\"https://github.com/opencv/opencv/issues/12301#issuecomment-415801564\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11052068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c828844b71ae234fdeadc398e64f472?s=128&d=identicon&r=PG&f=1", "display_name": "Bacha", "link": "https://stackoverflow.com/users/11052068/bacha"}, "is_accepted": false, "score": 1, "last_activity_date": 1551151678, "last_edit_date": 1551151678, "creation_date": 1551151247, "answer_id": 54877961, "question_id": 51974632, "link": "https://stackoverflow.com/questions/51974632/webcam-light-still-on-after-cam-release/54877961#54877961", "title": "Webcam light still on after cam.release()", "body": "<p>I had the same problem.</p>\n\n<p>My problem was solved when I changed the while loop condition from:</p>\n\n<pre><code>while(cap.isOpened()): \n\n    #Your code\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>while(True):\n\n  ret, img = cap.read()\n\n  #Your code\n</code></pre>\n\n<p>Before changing the loop I also applied the following command on cmd prompt:</p>\n\n<pre><code>setx OPENCV_VIDEOIO_PRIORITY_MSMF 0\n</code></pre>\n\n<p>Please restart the PC once you applied the above command!</p>\n\n<p>Hope this work for you too.</p>\n\n<p>Cheers!!</p>\n"}], "owner": {"reputation": 572, "user_id": 3326192, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uCqeM.jpg?s=128&g=1", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/3326192/gabrielle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2553, "favorite_count": 0, "accepted_answer_id": 51985187, "answer_count": 3, "score": 5, "last_activity_date": 1551151678, "creation_date": 1534969713, "last_edit_date": 1535502777, "question_id": 51974632, "link": "https://stackoverflow.com/questions/51974632/webcam-light-still-on-after-cam-release", "title": "Webcam light still on after cam.release()", "body": "<p>I am using opencv and Python3 to read webcam.</p>\n\n<p>The webcam light keeps on even though I released the webcam.</p>\n\n<p>I am doing:</p>\n\n<pre><code>webcam = cv2.VideoCapture(0)\nwebcam.release()\n</code></pre>\n\n<p>After the release command, if I try to read the cam I get: <code>(False, None)</code> but the webcam itself is still <code>&lt;VideoCapture 0EE62DC0&gt;</code>. I don't know if this is the issue, but the light keeps on until I kill all python script or python terminal.</p>\n\n<p>I am on a Windows 10, python 3.5, opencv 4.0.1. Am I doing something wrong?</p>\n"}, {"tags": ["python", "matplotlib", "data-visualization", "seaborn"], "comments": [{"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 1, "creation_date": 1534969898, "post_id": 51974604, "comment_id": 90899800, "body": "The x axis are probably strings"}, {"owner": {"reputation": 375, "user_id": 10129531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tov3KhxxRss/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oZbNFxPOizDlAwTo3WUjKfGeoRUw/mo/photo.jpg?sz=128", "display_name": "\u0421\u0442\u0435\u043f\u0430\u043d \u0421\u043c\u0438\u0440\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/10129531/%d0%a1%d1%82%d0%b5%d0%bf%d0%b0%d0%bd-%d0%a1%d0%bc%d0%b8%d1%80%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1534970251, "post_id": 51974604, "comment_id": 90899978, "body": "That was the case"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": true, "score": 0, "last_activity_date": 1534970435, "creation_date": 1534970435, "answer_id": 51974777, "question_id": 51974604, "link": "https://stackoverflow.com/questions/51974604/seaborn-generates-a-graph-in-a-wrong-way/51974777#51974777", "title": "Seaborn generates a graph in a wrong way", "body": "<p>seaborn <a href=\"https://seaborn.pydata.org/generated/seaborn.lineplot.html#seaborn.lineplot\" rel=\"nofollow noreferrer\">lineplot</a> might give you a more sensible plot.</p>\n\n<p>If that doesn't work you might need to convert the <code>time</code> column to a datetime column in pandas.</p>\n\n<p>Something like</p>\n\n<pre><code>df['time'] = pd.to_datetime(df['time'], format='%m-%d-%y')\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 10129531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tov3KhxxRss/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oZbNFxPOizDlAwTo3WUjKfGeoRUw/mo/photo.jpg?sz=128", "display_name": "\u0421\u0442\u0435\u043f\u0430\u043d \u0421\u043c\u0438\u0440\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/10129531/%d0%a1%d1%82%d0%b5%d0%bf%d0%b0%d0%bd-%d0%a1%d0%bc%d0%b8%d1%80%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 51974777, "answer_count": 1, "score": -1, "last_activity_date": 1534970435, "creation_date": 1534969576, "question_id": 51974604, "link": "https://stackoverflow.com/questions/51974604/seaborn-generates-a-graph-in-a-wrong-way", "title": "Seaborn generates a graph in a wrong way", "body": "<p>I've been trying to make a graph out of .csv file.</p>\n\n<pre><code>import pandas as pd \nimport seaborn as sns\n\ndf = pd.read_csv('Path/to//Data.csv')\n\ng = sns.relplot(x=\"time\", y=\"data\", kind=\"line\", data=df)\n</code></pre>\n\n<p>data frame looks like:</p>\n\n<pre><code>time,data\n01-05-98,309\n01-06-98,310\n01-07-98,311\n01-08-98,312\n01-09-98,313\n01-10-98,314\n01-11-98,315\n</code></pre>\n\n<p>The result is generated in the following way:\n<a href=\"https://i.stack.imgur.com/6n7XS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6n7XS.png\" alt=\"enter image description here\"></a></p>\n\n<p>Whereas Excel graph is completely different:\n<a href=\"https://i.stack.imgur.com/NdiHz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NdiHz.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the way to fix the graph generated by Python?</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1534970261, "post_id": 51974601, "comment_id": 90899987, "body": "Try putting <code>plt.show()</code> outside the for loop at the end"}, {"owner": {"reputation": 595, "user_id": 2175913, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-f927h9P6Luc/AAAAAAAAAAI/AAAAAAAAAOI/Wfz0LvzJLqU/photo.jpg?sz=128", "display_name": "Axle Max", "link": "https://stackoverflow.com/users/2175913/axle-max"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1534970405, "post_id": 51974601, "comment_id": 90900052, "body": "That just shows the final plot. I want each of the plots to show every .5 seconds. Like the one plot is animated"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1534971211, "post_id": 51974601, "comment_id": 90900368, "body": "Why don&#39;t you use <code>animate</code> to create an animation"}, {"owner": {"reputation": 1247, "user_id": 5822776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rasLi.png?s=128&g=1", "display_name": "Jim Todd", "link": "https://stackoverflow.com/users/5822776/jim-todd"}, "edited": false, "score": 1, "creation_date": 1534974052, "post_id": 51974601, "comment_id": 90901485, "body": "Take a look at <a href=\"https://matplotlib.org/examples/animation/dynamic_image.html\" rel=\"nofollow noreferrer\">link</a>                          It does exactly what you want, using matplotlib.animation"}, {"owner": {"reputation": 595, "user_id": 2175913, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-f927h9P6Luc/AAAAAAAAAAI/AAAAAAAAAOI/Wfz0LvzJLqU/photo.jpg?sz=128", "display_name": "Axle Max", "link": "https://stackoverflow.com/users/2175913/axle-max"}, "edited": false, "score": 0, "creation_date": 1535009761, "post_id": 51974601, "comment_id": 90910708, "body": "I appreciate the help but that link doesn&#39;t animate anything on my macbook or on Google Colab."}, {"owner": {"reputation": 595, "user_id": 2175913, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-f927h9P6Luc/AAAAAAAAAAI/AAAAAAAAAOI/Wfz0LvzJLqU/photo.jpg?sz=128", "display_name": "Axle Max", "link": "https://stackoverflow.com/users/2175913/axle-max"}, "edited": false, "score": 0, "creation_date": 1535012093, "post_id": 51974601, "comment_id": 90912021, "body": "the code here (<a href=\"https://matplotlib.org/gallery/animation/animate_decay.html\" rel=\"nofollow noreferrer\">matplotlib.org/gallery/animation/animate_decay.html</a>) does work on my macbook. It&#39;s the first time I have achieved animation. Now looking at what is different"}], "answers": [{"tags": [], "owner": {"reputation": 595, "user_id": 2175913, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-f927h9P6Luc/AAAAAAAAAAI/AAAAAAAAAOI/Wfz0LvzJLqU/photo.jpg?sz=128", "display_name": "Axle Max", "link": "https://stackoverflow.com/users/2175913/axle-max"}, "is_accepted": false, "score": 0, "last_activity_date": 1535031560, "creation_date": 1535031560, "answer_id": 51987192, "question_id": 51974601, "link": "https://stackoverflow.com/questions/51974601/redraw-matplotlib-pyplot-imshow-in-place-using-jupyter/51987192#51987192", "title": "Redraw matplotlib.pyplot.imshow in place using Jupyter", "body": "<p>OK. I found a solution. it is based on <a href=\"https://matplotlib.org/examples/animation/dynamic_image2.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/examples/animation/dynamic_image2.html</a></p>\n\n<pre><code>from PIL import Image\nimport random\nimport time\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.pyplot import imshow, show\nimport matplotlib.animation as animation\n\n%matplotlib notebook\n\ndef next_shape(im, num_squares, sq_size):\n    pix = im.load()\n\n    #initialise plot location\n    startx, starty = 0, 0\n\n    for i in range(num_squares):\n        startx += sq_size\n        for j in range(num_squares):\n            starty += sq_size\n            rshade = np.random.randint(0, 256)\n            gshade = np.random.randint(0, 256)\n            bshade = np.random.randint(0, 256)\n\n            for x in range(sq_size):\n                for y in range(sq_size):\n                    value = (rshade, gshade, bshade)\n                    pix[(startx + x) % im_size, (starty + y) % im_size] = value \n\n    #return list of pixel tuples\n    return list(im.getdata())\n\n# First set up the figure, the axis, and the plot element we want to animate\nsq_size = 20\nnum_squares = 5\n\n#create a figure to animate\nfig = plt.figure()\n\n#create the image withi the figure to animate\nim_size = sq_size * num_squares\nim = Image.new('RGB', (im_size, im_size))\n\n#create a list to store all the images in the format of a list of RGB pixels\nim_list_pix = []\n\n#generate a bunch of images in the form of a list of RGB pixels\nfor pic in range(10):\n    im_list_pix.append(next_shape(im, 5, 20))\n\n#create a list to store images converted from RGB pixel tuples to image format\nimg_array = []\n\n#convert list of pixel tuples back to image\nfor i, v in enumerate(im_list_pix):\n    im = Image.new('RGB', (100, 100))\n    #put the pixel data into the image container\n    im.putdata(im_list_pix[i])\n\n    im = plt.imshow(im)\n    img_array.append([im])  \n\nani = animation.ArtistAnimation(fig, img_array, interval=500)\n\nplt.show()\n</code></pre>\n\n<p>It took me a long time to work out the square brackets in ...</p>\n\n<pre><code>img_array.append([im])\n</code></pre>\n\n<p>... is crucial. It must be the way matplotlib.animate parses the list.</p>\n\n<p>I hope this is useful for others wanting to pay with matplot.animate and have some fun creating art.</p>\n\n<p>PS - thank you to the commenters who pointed me towards matplotlib.animate and thanks also to the author of this great blog post that gave me some clues and also shows how far you can push this stuff <a href=\"http://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/\" rel=\"nofollow noreferrer\">http://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/</a></p>\n"}], "owner": {"reputation": 595, "user_id": 2175913, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-f927h9P6Luc/AAAAAAAAAAI/AAAAAAAAAOI/Wfz0LvzJLqU/photo.jpg?sz=128", "display_name": "Axle Max", "link": "https://stackoverflow.com/users/2175913/axle-max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 939, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535031560, "creation_date": 1534969565, "question_id": 51974601, "link": "https://stackoverflow.com/questions/51974601/redraw-matplotlib-pyplot-imshow-in-place-using-jupyter", "title": "Redraw matplotlib.pyplot.imshow in place using Jupyter", "body": "<p>I am trying to draw these pretty boxes but instead of drawing them vertically, I want each box to overwrite the previous, so it looks like one box with changing colours every .5 seconds</p>\n\n<p>I am using Jupyter notebooks and Python 3.6.</p>\n\n<p>I have read about 50 similar questions and answers but can't get it to display as desired. Anyone who can help please?</p>\n\n<pre><code>from PIL import Image\nimport random\nimport time\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.pyplot import imshow, show, clf\n\nsq_size = 20\nnum_squares = 5\nim_size = sq_size * num_squares\n\nim = Image.new('RGB', (im_size, im_size), color = 'white')\n\npix = im.load()\n\n#Create new colourful boxes 4 times\nfor _ in range(4):\n\n    startx, starty = 0, 0\n\n    #move to the right place to plot each small square\n    for i in range(num_squares):\n        startx += sq_size\n        for j in range(num_squares):\n            starty += sq_size\n            rshade = np.random.randint(0, 256)\n            gshade = np.random.randint(0, 256)\n            bshade = np.random.randint(0, 256)\n\n            #plot each small square\n            for x in range(sq_size):\n                for y in range(sq_size):\n                    value = (rshade, gshade, bshade)\n                    pix[(startx + x) % im_size, (starty + y) % im_size] = value \n\n    plt.imshow(im)\n    plt.show()\n\n    time.sleep(.5)\n</code></pre>\n\n<p>Currently this plots as follows...</p>\n\n<p><a href=\"https://i.stack.imgur.com/9km64.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9km64.png\" alt=\"enter image description here\"></a></p>\n\n<p>but I want each box to overwrite the previous, so it looks like one box with changing colours every .5 seconds</p>\n"}, {"tags": ["python", "typeerror"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 2, "creation_date": 1534969670, "post_id": 51974596, "comment_id": 90899706, "body": "Python is a <a href=\"https://wiki.python.org/moin/Why%20is%20Python%20a%20dynamic%20language%20and%20also%20a%20strongly%20typed%20language\" rel=\"nofollow noreferrer\">strongly typed language</a>, so you have to sum strings with strings and ints with ints. In your case, you probably want <code>&#39;my age is&#39; + str(age)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 0, "last_activity_date": 1534970082, "creation_date": 1534970082, "answer_id": 51974712, "question_id": 51974596, "link": "https://stackoverflow.com/questions/51974596/concatenation-of-string-and-numbers-through-variabes-throwing-this-typeerror/51974712#51974712", "title": "concatenation of string and numbers through variabes. throwing this &quot; TypeError: must be str, not int&quot;", "body": "<p>You can use:</p>\n\n<pre><code>print(\"my Age is %d\" % character_age)\nprint(\"my Name is %s\" % character_name)\n</code></pre>\n\n<p>This is called <code>string formatting</code> and will allow you to inject types into strings without explicitly converting them. <code>%d</code> is interpreted as <code>float</code> or <code>double</code>, <code>%s</code> for <code>string</code> etc...</p>\n\n<p>Explicit string concatenation forces you to manually convert your types, which can impair readability, but can be viewed as a stylistic preference on smaller scripts. On applications where speed is a must, string concatenation is generally slower than string formatting</p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 5554073, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7a828843fddee43f8dd83620cebdf7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harsha Jasti", "link": "https://stackoverflow.com/users/5554073/harsha-jasti"}, "is_accepted": false, "score": 0, "last_activity_date": 1534971029, "creation_date": 1534971029, "answer_id": 51974919, "question_id": 51974596, "link": "https://stackoverflow.com/questions/51974596/concatenation-of-string-and-numbers-through-variabes-throwing-this-typeerror/51974919#51974919", "title": "concatenation of string and numbers through variabes. throwing this &quot; TypeError: must be str, not int&quot;", "body": "<p>You can use either of these two solutions</p>\n\n<pre><code>character_name = \"sonie agarwal\"\ncharacter_age = 21\nprint (\"my Name is %s\" %character_name)\nprint (\"my Age is %d\"  %character_age)\n\ncharacter_name = \"sonie agarwal\"\ncharacter_age = 21\nprint (\"my Name is \"+ str(character_name))\nprint (\"my Age is \" + str(character_age))\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10243920, "user_type": "registered", "profile_image": "https://graph.facebook.com/126952848228081/picture?type=large", "display_name": "Sonie Agarwal", "link": "https://stackoverflow.com/users/10243920/sonie-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 51974712, "answer_count": 2, "score": 0, "last_activity_date": 1534971029, "creation_date": 1534969550, "last_edit_date": 1592644375, "question_id": 51974596, "link": "https://stackoverflow.com/questions/51974596/concatenation-of-string-and-numbers-through-variabes-throwing-this-typeerror", "title": "concatenation of string and numbers through variabes. throwing this &quot; TypeError: must be str, not int&quot;", "body": "<pre><code>character_name = &quot;sonie agarwal&quot;\ncharacter_age = 21\nprint (&quot;my Name is &quot;+ character_name)\nprint (&quot;my Age is &quot; + character_age)\n</code></pre>\n<p>i am trying to run the above code in the pycharm but output is getting this output</p>\n<blockquote>\n<p>my Name is sonie agarwal</p>\n<p>File &quot;C:/Users/deepu/PycharmProjects/trainingWithGirafee/app.py&quot;, line 5, in </p>\n<p>print (&quot;my Age is &quot; + character_age)\nTypeError: must be str, not int</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 762, "user_id": 7361872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c785c73a952e46acec48dbeb6f085c66?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/7361872/yog"}, "edited": false, "score": 0, "creation_date": 1534969795, "post_id": 51974595, "comment_id": 90899755, "body": "Yes it is possible."}, {"owner": {"reputation": 762, "user_id": 7361872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c785c73a952e46acec48dbeb6f085c66?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/7361872/yog"}, "edited": false, "score": 0, "creation_date": 1534970385, "post_id": 51974595, "comment_id": 90900037, "body": "check my code on the answer"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1534969899, "creation_date": 1534969899, "answer_id": 51974675, "question_id": 51974595, "link": "https://stackoverflow.com/questions/51974595/create-a-new-column-in-python-using-mutilevel-groupby/51974675#51974675", "title": "Create a new column in python using mutilevel groupby", "body": "<p>Using <code>transform</code> <code>mean</code> , then using <code>group</code> <code>head</code> with the result , and assign the new value to original dataframe by using <code>index</code> match , <code>fillna</code> with blank</p>\n\n<pre><code>s=df.groupby(['Zone','Code']).Value.transform('mean')\ndf['Mean Value grouped by zone and code']=s.groupby([df['Zone'],df['Code']]).head(1)\ndf['Mean Value grouped by zone and code'].fillna('',inplace=True)\ndf\nOut[268]: \n  Zone Code  Value Mean Value grouped by zone and code\n0  Dhk   Z1      2                                   3\n1  Dhk   Z1      4                                    \n2  Dhk   Z2      6                                   7\n3  Dhk   Z2      8                                    \n4  Raj   Z1      8                                   9\n5  Raj   Z1     10                                    \n6  Raj   Z2     12                                  13\n7  Raj   Z2     14                                    \n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 10261637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KOqj5JCipaM/AAAAAAAAAAI/AAAAAAAAADE/0ujjT2RJB0w/photo.jpg?sz=128", "display_name": "john ed", "link": "https://stackoverflow.com/users/10261637/john-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534970358, "creation_date": 1534969535, "last_edit_date": 1534969603, "question_id": 51974595, "link": "https://stackoverflow.com/questions/51974595/create-a-new-column-in-python-using-mutilevel-groupby", "title": "Create a new column in python using mutilevel groupby", "body": "<p>I am stuck a bit here. The given chart is something like this:</p>\n\n<pre><code>Zone    Code    Value\nDhk      Z1      2\nDhk      Z1      4\nDhk      Z2      6\nDhk      Z2      8\nRaj      Z1      8\nRaj      Z1     10\nRaj      Z2     12\nRaj      Z2     14\n</code></pre>\n\n<p>And the format I want to convert it to is:</p>\n\n<pre><code>Zone    Code    Value   Mean Value grouped by zone and code\nDhk      Z1       2                    3\nDhk      Z1       4 \nDhk      Z2       6                    7\nDhk      Z2       8\nRaj      Z1       8                    9\nRaj      Z1      10 \nRaj      Z2      12                   13\nRaj      Z2      14 \n</code></pre>\n\n<p>Is this possible in Python?</p>\n"}, {"tags": ["python", "function", "alias"], "comments": [{"owner": {"reputation": 8677, "user_id": 9337071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52afdb783a619060eb2b0c0cb5766d3?s=128&d=identicon&r=PG&f=1", "display_name": "tehhowch", "link": "https://stackoverflow.com/users/9337071/tehhowch"}, "edited": false, "score": 0, "creation_date": 1534970301, "post_id": 51974566, "comment_id": 90900003, "body": "Per the linked duplicate, make a dict with your function references, and then use a statement like <code>processed_line = myCommandDict[line_header](line)</code>, where you use the <code>line_header</code> to select the appropriate function in your dict."}], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "is_accepted": false, "score": 1, "last_activity_date": 1534969635, "creation_date": 1534969635, "answer_id": 51974616, "question_id": 51974566, "link": "https://stackoverflow.com/questions/51974566/best-pythonic-method-to-apply-multiple-references-to-a-single-function/51974616#51974616", "title": "Best pythonic method to apply multiple references to a single function", "body": "<p>You can use python's built-in <code>exec</code> function. </p>\n\n<pre><code>for i in range(101,110):\n    print(\"H0%d = H0100\" % i)   # Just so you see exactly what gets executed\n    exec( \"H0%d = H0100\" % i)   # Perform each assignment\n</code></pre>\n\n<p>However, I don't think you want to create a bunch of variables with unique names (it's certainly non-pythonic, and is bad practice in general, for any language). You are better off using a data structure such as a <a href=\"https://docs.python.org/3/tutorial/introduction.html#lists\" rel=\"nofollow noreferrer\">List</a> or a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#dictionaries\" rel=\"nofollow noreferrer\">Dictionary</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1534969868, "post_id": 51974662, "comment_id": 90899787, "body": "This almost looks like a cool application of decorators, as well"}], "tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": false, "score": 2, "last_activity_date": 1534969829, "creation_date": 1534969829, "answer_id": 51974662, "question_id": 51974566, "link": "https://stackoverflow.com/questions/51974566/best-pythonic-method-to-apply-multiple-references-to-a-single-function/51974662#51974662", "title": "Best pythonic method to apply multiple references to a single function", "body": "<p>My personal preference would be to use a dictionary of functions keyed by the prefix that is relevant.</p>\n\n<pre><code>def H0100(line)\n      .....process line\n\nfuncs = { 'H010' : H0100,\n          'H020' : H0200,\n          ... etc...\n        }\n</code></pre>\n\n<p>then</p>\n\n<pre><code>for line in file:\n    f = funcs[ line[:4] ]\n    f(line) \n</code></pre>\n\n<p>This works as is if the prefix length is fixed.  Variable length prefixes requires a slight modification of this approach.  You could implement this same strategy by peeking at the line and determining if it's three-letter prefix identifier or four-letter and then use the appropriate lookup table for that case.  It's hard to propose a concrete implementation there without more details.</p>\n"}], "owner": {"reputation": 11, "user_id": 10261604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1c7f3bbe3daa47394a0e64185c93ff?s=128&d=identicon&r=PG&f=1", "display_name": "ear9mrn", "link": "https://stackoverflow.com/users/10261604/ear9mrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1534969941, "answer_count": 2, "score": 0, "last_activity_date": 1534969829, "creation_date": 1534969383, "question_id": 51974566, "link": "https://stackoverflow.com/questions/51974566/best-pythonic-method-to-apply-multiple-references-to-a-single-function", "closed_reason": "Duplicate", "title": "Best pythonic method to apply multiple references to a single function", "body": "<p>I am reading a text file with many thousands of records (one per line). Each starts with 5 characters, first is alpha followed by 4 numeric e.g. H0100.</p>\n\n<p>The list of available starting labels is defined so not random although the last numeric value could be anything from 1-9 (sometimes last two could be 1-9).</p>\n\n<p>so a class of record could be any of the following H0100, H0101.....H0109 </p>\n\n<p>There are instances when the last to numbers have a range such that there would be 100 combinations.</p>\n\n<p>I would like to create a function to process each record such that if the first 3 or 4 characters in the label are identified the same function is called. The reason being is the records are essentially identical in format and can be processed the same even though the last one or two values in the label changes.</p>\n\n<p>Here is how I am doing it at the moment for the case H0100, H0101.....H0109</p>\n\n<pre><code>    for line in (file):\n            #turn the first 5 characters into an object\n            obj = eval (line[0:5]) \n            obj (line)\n\n    def H0100(line)\n          .....process line\n\n    #Just point all the alternative to the one function\n    H0101 = H0102 = H0103 = H0104 = H0105 = H0106 = H0107 = H0108 = H0109 = H0100\n</code></pre>\n\n<p>This works but it does not look very elegant and I am sure it is not Pythonic! Anyone have any suggestions as to how I could make this simpler/more elegant? I have 40-50 labels with one character change and few with two character changes as such have to point 100 alternatives to one function.</p>\n\n<p>Many thank.</p>\n"}, {"tags": ["python", "python-3.x", "iterator", "listiterator"], "comments": [{"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1534969616, "post_id": 51974546, "comment_id": 90899670, "body": "1) not really, that&#39;s like saying &quot;if I hang up the phone, can I then continue the phonecall?&quot;  The act of hanging up the phone says &quot;I am not going to continue the phonecall&quot; - if you want to continue it, you don&#39;t hang up, you (put the receiver on the table, mute it, put them on hold, something else). Similarly, <code>break</code> says &quot;I don&#39;t want to continue&quot;, and if you do want to continue, don&#39;t use break. Call a function, or design so you can <code>yield</code>, or something."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1534969681, "post_id": 51974546, "comment_id": 90899714, "body": "It depends on the usecase. At the very basic level you can save the state of the break point and start from that state."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 0, "creation_date": 1534971748, "post_id": 51974628, "comment_id": 90900590, "body": "Thank you for providing this. It is only slightly different from my starting point and concise. As a beginner in computer programming and with the Python language, is there a particular reason (i.e. memory usage, or similar) that breaking out of a loop and re-entering from the exit of the previous loop would cause that make this bad practice?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 1, "creation_date": 1534973079, "post_id": 51974628, "comment_id": 90901100, "body": "Breaking out of the loop means that you have a second loop trying to do essentially the same thing: double the code, double the local storage, double the set-up time for the <code>range</code> object, and double the maintenance.  It also makes your program harder to read and understand, a further hit to long-term quality."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1534969678, "creation_date": 1534969678, "answer_id": 51974628, "question_id": 51974546, "link": "https://stackoverflow.com/questions/51974546/python-how-to-recall-position-after-break-from-iteration-over-start-stop-step/51974628#51974628", "title": "Python: How to recall position after break from iteration over start, stop, step loop", "body": "<p>This is generally bad design.  If you want to pick up where you left off, why are you leaving the security of your loop at all?  You include the irruptive activity in that conditional block.</p>\n\n<pre><code>print(\"Range() Test\")\nfor i in range(10, 100, 10):\n    if i == 60:\n        print('Break Point')\n    print(i)\n</code></pre>\n\n<p>Alternately, save as much of that state as you need to restart:</p>\n\n<pre><code>lower = 10\nupper = 100\ninc = 10\n\nfor i in range(lower, upper, inc):\n    if i == 60:\n        print('Break Point')\n        break\n    print(i)\nold_i = i\n\nfor i in range(old_i, upper, inc):\n    print(i)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Range() Test\n10\n20\n30\n40\n50\nBreak Point\n60\n70\n80\n90\n</code></pre>\n\n<p>~                                            </p>\n"}, {"comments": [{"owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "edited": false, "score": 1, "creation_date": 1534970591, "post_id": 51974652, "comment_id": 90900134, "body": "Keep in mind it will be consumed! you can&#39;t loop over <code>x</code> a second time!"}, {"owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 0, "creation_date": 1534971393, "post_id": 51974652, "comment_id": 90900455, "body": "Thank you. I appreciate all of the feedback on this. Your response was the closest to what I was trying to do and I also appreciate that you added information regarding my question about the range() function."}], "tags": [], "owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "is_accepted": true, "score": 4, "last_activity_date": 1534969794, "creation_date": 1534969794, "answer_id": 51974652, "question_id": 51974546, "link": "https://stackoverflow.com/questions/51974546/python-how-to-recall-position-after-break-from-iteration-over-start-stop-step/51974652#51974652", "title": "Python: How to recall position after break from iteration over start, stop, step loop", "body": "<p>For your first question... I think you are on the right track. The <code>iter()</code> will make the range object an iterator. It will track itself and you can pick up where you were later in your code.  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&gt;&gt;&gt; x=iter(range(1,100,10))\r\n&gt;&gt;&gt; for i in x:\r\n...     if i &gt;30:\r\n...             break\r\n...\r\n&gt;&gt;&gt; for i in x:\r\n...     print(i)\r\n...\r\n41\r\n51\r\n61\r\n71\r\n81\r\n91</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>2) <strong>range objects are not iterators</strong> <a href=\"http://treyhunner.com/2018/02/python-range-is-not-an-iterator/\" rel=\"nofollow noreferrer\">This</a> Does a great job of explaining</p>\n"}], "owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 51974652, "answer_count": 2, "score": 0, "last_activity_date": 1534969794, "creation_date": 1534969312, "last_edit_date": 1534969645, "question_id": 51974546, "link": "https://stackoverflow.com/questions/51974546/python-how-to-recall-position-after-break-from-iteration-over-start-stop-step", "title": "Python: How to recall position after break from iteration over start, stop, step loop", "body": "<p>I am learning about iterators and how to use them and in the process have come up with a question. Is it possible to recall where a loop left off during iteration (if the loop were to have a break condition that was met) and then to pick up from the recalled spot? </p>\n\n<p>An example of what I am saying is, I have this code:</p>\n\n<pre><code>print(\"Range() Test\")\nfor i in range(10, 100, 10):\n    if i == 60:\n        print('Break Point')\n        break\n    print(i)\nfor i in range(10, 100, 10):\n    print(i)\n</code></pre>\n\n<p>Which should run and give you something like this: </p>\n\n<pre><code>Range() Test\n10\n20\n30\n40\n50\nBreak Point\n10\n20\n30\n40\n50\n60\n70\n80\n90\n</code></pre>\n\n<p>My first question is:</p>\n\n<p>1) Is there a way to recall the position where the break took place and begin from there as opposed to my bumbling start-over? I have seen instanced where the iteration was over a list of items, but have not been able to find an example/work out a functioning example of using iter() on the start/stop/step notation.</p>\n\n<p>2) In doing research (I am learning Python and doing a lot of self-teaching) I have seen the range() function describer both as an iterator and NOT as an iterator so, if anyone has more definitive information on this, as opposed to tearing me a new one for using it in my example, that would be much appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534969691, "post_id": 51974524, "comment_id": 90899719, "body": "Could you clarify why you need this to be vectorized? Are you just looking for a faster run time?"}, {"owner": {"reputation": 379, "user_id": 7501800, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-Xtgnm8uQbI8/AAAAAAAAAAI/AAAAAAAAHRc/DVKZjavedUg/photo.jpg?sz=128", "display_name": "Oscar Mu&#241;oz", "link": "https://stackoverflow.com/users/7501800/oscar-mu%c3%b1oz"}, "reply_to_user": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534969895, "post_id": 51974524, "comment_id": 90899799, "body": "actually yes, I will be using it for really big matrices and with a for loop it&#39;s taking a lot, so I was wondering if vectoricing it would be a bit better"}, {"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534969986, "post_id": 51974524, "comment_id": 90899843, "body": "How big of matrices?"}, {"owner": {"reputation": 379, "user_id": 7501800, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-Xtgnm8uQbI8/AAAAAAAAAAI/AAAAAAAAHRc/DVKZjavedUg/photo.jpg?sz=128", "display_name": "Oscar Mu&#241;oz", "link": "https://stackoverflow.com/users/7501800/oscar-mu%c3%b1oz"}, "reply_to_user": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534970386, "post_id": 51974524, "comment_id": 90900039, "body": "Well it can varied a lot but one of the worst cases is 10000x400x400"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1534970611, "post_id": 51974524, "comment_id": 90900141, "body": "<code>np.dot</code> is optimized for pairs of 2d arrays.  So a repeated application of <code>dot</code> like this might well be the fastest.  Mathematically I don&#39;t think there&#39;s a way of expressing this as some sort of &#39;parallel&#39; 3d operation.  I think there is some sort of &#39;chained dot&#39; function, but at best it chooses an optimal order in which to do the individual products."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534971524, "post_id": 51974896, "comment_id": 90900501, "body": "<code>multi_dot</code> isn&#39;t going to provide any advantage in this case, though. It still calls <code>dot</code> repeatedly at Python level. It tries to pick an optimal order in which to do so, but all arrays involved have identical shape in this case, so there is no advantage to be gained."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534971841, "post_id": 51974896, "comment_id": 90900624, "body": "@user2357112, yes, that&#39;s what previous SO tests indicated."}, {"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534972109, "post_id": 51974896, "comment_id": 90900736, "body": "Has numba been tested for this scenario? It seems to optimize loops efficiently"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534972640, "post_id": 51974896, "comment_id": 90900927, "body": "<code>numba</code> is good if it can reduce the calculation to C calls.  I&#39;m don&#39;t how it handles calls to <code>dot</code>.  <code>cython</code> with direct calls to the relevant <code>BLAS</code> routines might also be an option.  In either case, this doesn&#39;t get around loops; it just shoves the iteration into compiled code."}, {"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534972791, "post_id": 51974896, "comment_id": 90900989, "body": "Right, but compiling the code will make it quicker, and so it may be what was being asked for, not really sure based on the question"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 3, "last_activity_date": 1534973830, "last_edit_date": 1534973830, "creation_date": 1534970922, "answer_id": 51974896, "question_id": 51974524, "link": "https://stackoverflow.com/questions/51974524/product-operator-of-n-matrices-without-a-loop/51974896#51974896", "title": "Product operator of n matrices without a loop", "body": "<pre><code>In [99]: X = np.array([1,5,2,4,5,25,10,20,5,25,10,20]).reshape(3,2,2)\nIn [100]: X\nOut[100]: \narray([[[ 1,  5],\n        [ 2,  4]],\n\n       [[ 5, 25],\n        [10, 20]],\n\n       [[ 5, 25],\n        [10, 20]]])\nIn [101]: prod=np.identity(2)\nIn [102]: for t in X:\n     ...:     prod=np.dot(prod,t)\n     ...:     \nIn [103]: prod\nOut[103]: \narray([[1525., 3875.],\n       [1550., 3850.]])\n</code></pre>\n\n<p>With the <code>mutmul</code> operator:</p>\n\n<pre><code>In [104]: X[0]@X[1]@X[2]\nOut[104]: \narray([[1525, 3875],\n       [1550, 3850]])\nIn [105]: \n</code></pre>\n\n<p>A chained dot function:</p>\n\n<pre><code>In [106]: np.linalg.multi_dot(X)\nOut[106]: \narray([[1525, 3875],\n       [1550, 3850]])\n</code></pre>\n\n<p>Check its docs and its code to see how it tries to optimize the calculation.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45852228/how-is-numpy-multi-dot-slower-than-numpy-dot\">How is numpy multi_dot slower than numpy.dot?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/48801371/numpy-large-matrix-multiplication-optimize\">numpy large matrix multiplication optimize</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/42808259/multiply-together-list-of-matrices-in-numpy\">Multiply together list of matrices in Numpy</a></p>\n\n<hr>\n\n<p>If I expand <code>X</code> several times:</p>\n\n<pre><code>In [147]: X.shape\nOut[147]: (48, 2, 2)\n</code></pre>\n\n<p>The cost of one dot product:</p>\n\n<pre><code>In [148]: timeit X[0]@X[1]\n5.08 \u00b5s \u00b1 14.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>And for 48 of them:</p>\n\n<pre><code>In [149]: 5*48\nOut[149]: 240\n</code></pre>\n\n<p>Compare that to the cost of iteratively evaluating chained dot:</p>\n\n<pre><code>In [150]: %%timeit\n     ...: Y = np.eye(X.shape[1]).astype(X.dtype)\n     ...: for i in X:\n     ...:     Y = Y@i\n     ...:     \n227 \u00b5s \u00b1 5.19 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n</code></pre>\n\n<p>So the chaining does not cost any thing beyond just evaluating all the required dots.</p>\n\n<p>I tried a recursive function that does nested dots, and don't get any improvements.</p>\n\n<p>Unless you can, mathematically, come up with an alternative to evaluating the dots sequentially I doubt if there's room for improvement.  Using something like <code>cython</code> to directly call the underlying <code>BLAS</code> functions might be the only alternative.  It won't improve on individual dots, but could reduce some of the calling overhead.</p>\n"}, {"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534982726, "post_id": 51975716, "comment_id": 90903512, "body": "My <code>@</code> iteration, as in In[150] is 6x faster than <code>multi_dot</code> for your test case.  Not as good as your <code>numba</code> but close."}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1535017621, "post_id": 51975716, "comment_id": 90915241, "body": "It doen&#39;t make much difference wheter you use numba or not on your numba_method(array3d) function if you have the same BLAS backend in numpy and scipy (which numba uses). There is not much to optimize for Numba, simply because &gt;90% of runtime are spent in the BLAS backend which Numba and Numpy calls if you use np.dot() on floats. But there can be differences on int, because in this case there is no BLAS backend for int."}], "tags": [], "owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "is_accepted": true, "score": 2, "last_activity_date": 1534976906, "last_edit_date": 1534976906, "creation_date": 1534974991, "answer_id": 51975716, "question_id": 51974524, "link": "https://stackoverflow.com/questions/51974524/product-operator-of-n-matrices-without-a-loop/51975716#51975716", "title": "Product operator of n matrices without a loop", "body": "<p>If you just want a speedup, here is a solution (I am getting a 10x speed up on this computer)</p>\n\n<pre><code>import numpy as np\nimport numba as nb\n\nbig_array = np.random.rand(400, 400, 400)\n\ndef numpy_method(array3d):\n    return np.linalg.multi_dot(array3d)\n\n@nb.jit(nopython=True)\ndef numba_method(array3d):\n    prod = np.identity(array3d.shape[2])\n    for i in nb.prange(array3d.shape[0]):\n        temp = array3d[i, :, :]\n        prod = np.dot(prod, temp)\n\n    return prod\n\nnumpy_result = numpy_method(big_array)\nnumba_result = numba_method(big_array)\n\nprint(np.all(np.isclose(numpy_result, numba_result)))\n\n%timeit numpy_method(big_array)\n9.66 s \u00b1 142 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n%timeit numba_method(big_array)\n923 ms \u00b1 7.38 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<p>This does not scale very well to smaller arrays, but when the array is as large as you were saying compiling the code with the LLVM compiler does make a noticeable difference.</p>\n\n<p>Also, when I make the arrays bigger they all overload available memory in the floats and turn to inf values. I'm guessing that your matrices won't run into this issue though. </p>\n"}], "owner": {"reputation": 379, "user_id": 7501800, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-Xtgnm8uQbI8/AAAAAAAAAAI/AAAAAAAAHRc/DVKZjavedUg/photo.jpg?sz=128", "display_name": "Oscar Mu&#241;oz", "link": "https://stackoverflow.com/users/7501800/oscar-mu%c3%b1oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 51975716, "answer_count": 2, "score": 1, "last_activity_date": 1534976906, "creation_date": 1534969205, "last_edit_date": 1534971050, "question_id": 51974524, "link": "https://stackoverflow.com/questions/51974524/product-operator-of-n-matrices-without-a-loop", "title": "Product operator of n matrices without a loop", "body": "<p>I got a matrix of dimention (nx2x2) so suposing the matrix M of (3x2x2):</p>\n\n<pre><code>[[[ 1.  5.]\n  [ 2.  4.]]\n\n [[ 5. 25.]\n  [10. 20.]]\n\n [[ 5. 25.]\n  [10. 20.]]]\n</code></pre>\n\n<p>I would like to do a product operator (dot product) of each 2x2 matrix. In other words I want to do the folowing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1YVRC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1YVRC.png\" alt=\"enter image description here\"></a></p>\n\n<p>where Mj is the same as <code>M[j,:,:]</code> in python. The easiest way to do this is with a for loop like this:</p>\n\n<pre><code>prod=np.identity(2)\nfor temp in M:\n    prod=np.dot(prod,temp)\n</code></pre>\n\n<p>but I don't know if there is a vectorized way of doing this (I am sure that this is probably a repeated question but I can't figure out the right question to google)</p>\n"}, {"tags": ["python", "google-cloud-platform", "airflow", "google-cloud-composer"], "comments": [{"owner": {"reputation": 700, "user_id": 1556251, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4724bc91e7e13bc10cd6af905b59630a?s=128&d=identicon&r=PG", "display_name": "Picarus", "link": "https://stackoverflow.com/users/1556251/picarus"}, "edited": false, "score": 0, "creation_date": 1539730153, "post_id": 51974513, "comment_id": 92606066, "body": "I am having the same problem with these commands: from airflow.contrib.operators.gcs_to_s3 import GoogleCloudStorageToS3Operator from airflow.contrib.operators.s3_to_gcs_operator import S3ToGoogleCloudStorageOperator. Are the contrib operators installed by default? I am using composer 1.2 and airflow 1.9"}, {"owner": {"reputation": 1209, "user_id": 5091538, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2IjhGscDJ-U/AAAAAAAAAAI/AAAAAAAAA8Q/_8EKfx7taqI/photo.jpg?sz=128", "display_name": "H&#233;ctor Neri", "link": "https://stackoverflow.com/users/5091538/h%c3%a9ctor-neri"}, "edited": false, "score": 0, "creation_date": 1541117691, "post_id": 51974513, "comment_id": 93117289, "body": "Picarus: Your case also requires to use Airflow 1.10, since the gcs_to_s3 and s3_to_gcs_operator didn&#39;t exist prior to this version. Since October 26th, <a href=\"https://cloud.google.com/composer/docs/concepts/versioning/composer-versions\" rel=\"nofollow noreferrer\">Airflow 1.10 is available for Composer 1.3</a>."}], "answers": [{"comments": [{"owner": {"reputation": 700, "user_id": 1556251, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4724bc91e7e13bc10cd6af905b59630a?s=128&d=identicon&r=PG", "display_name": "Picarus", "link": "https://stackoverflow.com/users/1556251/picarus"}, "edited": false, "score": 0, "creation_date": 1539730080, "post_id": 52020140, "comment_id": 92606050, "body": "I have the same problem that OP with 1.2 composer and 1.9 airflow."}], "tags": [], "owner": {"reputation": 601, "user_id": 9924112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9N5F-JxYS1k/AAAAAAAAAAI/AAAAAAAAAEc/I1v9IQJbC4s/photo.jpg?sz=128", "display_name": "Feng Lu", "link": "https://stackoverflow.com/users/9924112/feng-lu"}, "is_accepted": false, "score": 0, "last_activity_date": 1535221866, "creation_date": 1535221866, "answer_id": 52020140, "question_id": 51974513, "link": "https://stackoverflow.com/questions/51974513/getting-error-of-import-in-airflow-dag-in-google-cloud-composer/52020140#52020140", "title": "getting error of import in airflow DAG in google cloud composer", "body": "<p>Which Composer version are you using? I copy and paste your DAG code into a newly created Composer environment <a href=\"https://cloud.google.com/composer/docs/release-notes#august_17_2018_composer-110-airflow-190\" rel=\"nofollow noreferrer\">composer-1.1.0-airflow-1.9.0</a>, it works out of the box for me.</p>\n\n<p>Here's the screenshot:\n<a href=\"https://i.stack.imgur.com/JSaAy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSaAy.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1209, "user_id": 5091538, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2IjhGscDJ-U/AAAAAAAAAAI/AAAAAAAAA8Q/_8EKfx7taqI/photo.jpg?sz=128", "display_name": "H&#233;ctor Neri", "link": "https://stackoverflow.com/users/5091538/h%c3%a9ctor-neri"}, "is_accepted": false, "score": 0, "last_activity_date": 1541117248, "creation_date": 1541117248, "answer_id": 53111069, "question_id": 51974513, "link": "https://stackoverflow.com/questions/51974513/getting-error-of-import-in-airflow-dag-in-google-cloud-composer/53111069#53111069", "title": "getting error of import in airflow DAG in google cloud composer", "body": "<p>I see that the import from base_sensor_operator was added in the <a href=\"https://github.com/apache/incubator-airflow/blob/v1-10-stable/airflow/contrib/sensors/gcs_sensor.py\" rel=\"nofollow noreferrer\">version 1.10 of Airflow</a>. This was not present in versions <a href=\"https://github.com/apache/incubator-airflow/blob/v1-8-stable/airflow/contrib/sensors/gcs_sensor.py\" rel=\"nofollow noreferrer\">1.8</a> and <a href=\"https://github.com/apache/incubator-airflow/blob/v1-9-stable/airflow/contrib/sensors/gcs_sensor.py\" rel=\"nofollow noreferrer\">1.9</a>. Instead, the import was done as follows:</p>\n\n<pre><code>from airflow.operators.sensors import BaseSensorOperator\n</code></pre>\n\n<p>So, checking the sensors, the related <a href=\"https://github.com/apache/incubator-airflow/tree/master/airflow/sensors\" rel=\"nofollow noreferrer\">sensor for Airflow 1.10</a> is under sensors but for Airflow 1.9 and 1.8, the sensor is under <a href=\"https://github.com/apache/incubator-airflow/blob/v1-9-stable/airflow/operators/sensors.py\" rel=\"nofollow noreferrer\">operators</a>.</p>\n\n<p>So, this issue seems to be related to the versioning of Composer and Airflow, but Airflow 1.10 wasn't available for Composer on August. In fact, this issue was reported  on <a href=\"https://issuetracker.google.com/118713709\" rel=\"nofollow noreferrer\">Google's Issue Tracker</a> and the response is to solve this by using Apache Airflow version 1.10, which can be included on the <a href=\"https://cloud.google.com/composer/docs/concepts/versioning/composer-versions\" rel=\"nofollow noreferrer\">version 1.3 of Composer</a>.</p>\n"}], "owner": {"reputation": 523, "user_id": 2183883, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c89c22cafe0317217309c8b6cd72213e?s=128&d=identicon&r=PG", "display_name": "MT467", "link": "https://stackoverflow.com/users/2183883/mt467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2952, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541117248, "creation_date": 1534969166, "last_edit_date": 1534969469, "question_id": 51974513, "link": "https://stackoverflow.com/questions/51974513/getting-error-of-import-in-airflow-dag-in-google-cloud-composer", "title": "getting error of import in airflow DAG in google cloud composer", "body": "<p>I have a DAG in google composer (airflow) that imports:</p>\n\n<p>from airflow.contrib.sensors.gcs_sensor import GoogleCloudStorageObjectSensor</p>\n\n<p>when I run the DAG I got this error:</p>\n\n<p>\"ImportError: No module named sensors.base_sensor_operator\"</p>\n\n<p>Basically I want to check if a file exists in a bucket before doing something else.</p>\n\n<p>Here is the complete python code:</p>\n\n<pre><code>from datetime import datetime,timedelta\nfrom airflow import DAG\nfrom airflow.operators.dummy_operator import DummyOperator\nfrom airflow.operators.subdag_operator import SubDagOperator\nfrom airflow.operators.python_operator import PythonOperator\nfrom airflow.contrib.operators.gcs_to_bq import \nGoogleCloudStorageToBigQueryOperator\nfrom airflow.contrib.sensors.gcs_sensor import \nGoogleCloudStorageObjectSensor\n\n\nCONNECTION_ID = 'something'\n\ndefault_args = {\n'owner': 'airflow',\n'depends_on_past': False,\n'start_date': datetime(2018, 8, 21, 0, 0),\n}\n\ndef print_hello():\nreturn 'youtube folder exists!!'\n\nwith DAG('DATA_TRANSFER_GCP_BUCKET_TO_BQ2', \nschedule_interval=timedelta(days=1), \n default_args=default_args ) as dag: \n\n gcp_sensorBucket=GoogleCloudStorageObjectSensor(\n task_id='gcp_sensorbucket',\n bucket='/aa_youtube_new/2018/06/04/', \n #bucket='{{var.value.gcp_youtube_video_bucket}}/2018/06/04/',\n object='*.csv', \n google_cloud_conn_id=CONNECTION_ID\n\n)\nhello_operator = PythonOperator(task_id='hello_task', \npython_callable=print_hello)\nhello_operator.set_upstream(gcp_sensorBucket)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "printing", "bokeh", "dashboard"], "comments": [{"owner": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "edited": false, "score": 1, "creation_date": 1535011124, "post_id": 51974510, "comment_id": 90911486, "body": "You could create a <a href=\"https://bokeh.pydata.org/en/latest/docs/user_guide/interaction/widgets.html#div\" rel=\"nofollow noreferrer\">Div</a> element and update the content as you wish"}, {"owner": {"reputation": 595, "user_id": 4008123, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4179fe27ff2d3797920b9d77aedba969?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Thompson", "link": "https://stackoverflow.com/users/4008123/nate-thompson"}, "reply_to_user": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "edited": false, "score": 0, "creation_date": 1535025718, "post_id": 51974510, "comment_id": 90920009, "body": "@ChesuCR Thanks, ill take a look at that."}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1535041979, "post_id": 51974510, "comment_id": 90930526, "body": "It&#39;s helpful for the maintainers if [bokeh] questions that can be answered get answers. Using a <code>Div</code> is indeed an appropriate solution. Would one of you add that information as a real answer?"}, {"owner": {"reputation": 25119, "user_id": 2166823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/daI9F.jpg?s=128&g=1", "display_name": "joelostblom", "link": "https://stackoverflow.com/users/2166823/joelostblom"}, "reply_to_user": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "edited": false, "score": 0, "creation_date": 1565044540, "post_id": 51974510, "comment_id": 101219743, "body": "@ChesuCR or Nate, If you have the time it would be very helpful if you could post an answer with a minimal example of how to achieve this."}, {"owner": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "reply_to_user": {"reputation": 25119, "user_id": 2166823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/daI9F.jpg?s=128&g=1", "display_name": "joelostblom", "link": "https://stackoverflow.com/users/2166823/joelostblom"}, "edited": false, "score": 1, "creation_date": 1565094876, "post_id": 51974510, "comment_id": 101236781, "body": "Sure @joelostblom, I will post something later"}], "answers": [{"tags": [], "owner": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "is_accepted": true, "score": 4, "last_activity_date": 1565191753, "last_edit_date": 1565191753, "creation_date": 1565096169, "answer_id": 57376599, "question_id": 51974510, "link": "https://stackoverflow.com/questions/51974510/how-can-i-show-and-update-a-list-of-print-statements-in-a-bokeh-dashboard/57376599#57376599", "title": "How can I show and update a list of print statements in a Bokeh dashboard?", "body": "<p>Just a simple example updating a <code>Div</code> element with the content of a list os messages (with html code). I think you can adapt this to your needs:</p>\n\n<pre><code>from bokeh.layouts import column\nfrom bokeh.io import curdoc\nfrom bokeh.models import Button\nfrom bokeh.models.widgets import Div\n\ndiv = Div(\n    text='',\n    width=200,\n    height=200\n)\n\nmsg_list = []\n\ndef update_div():\n    msg_num = len(msg_list)\n    msg_list.append('{}: New message'.format(msg_num))\n    m = ''\n    for msg in msg_list:\n        m += '&lt;li&gt;{}&lt;/li&gt;'.format(msg)\n    div.text = '&lt;ul&gt;{}&lt;/ul&gt;'.format(m)\n\nbt = Button(\n    label=\"Update div\",\n    button_type=\"success\",\n    width=50\n)\n\nbt.on_click(update_div)\n\ncurdoc().add_root(\n    column(children=[bt, div])\n)\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 4008123, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4179fe27ff2d3797920b9d77aedba969?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Thompson", "link": "https://stackoverflow.com/users/4008123/nate-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 57376599, "answer_count": 1, "score": 4, "last_activity_date": 1565192079, "creation_date": 1534969134, "last_edit_date": 1565192079, "question_id": 51974510, "link": "https://stackoverflow.com/questions/51974510/how-can-i-show-and-update-a-list-of-print-statements-in-a-bokeh-dashboard", "title": "How can I show and update a list of print statements in a Bokeh dashboard?", "body": "<p>Is there a way to create a section of a bokeh dashboard that shows the console output from the python session?</p>\n\n<p>I am creating a front-end dashboard with bokeh that runs a process that can take a while and does a lot of stuff. I wanted a section that would show some of the print statements that are executed along the way. Ideally I was hoping for a little widget type object that could display the output directly within the dashboard. </p>\n"}, {"tags": ["python", "html", "regex", "beautifulsoup", "href"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1534969289, "post_id": 51974506, "comment_id": 90899513, "body": "You can get attribute values directly via the API, as you already did in <code>a[&#39;href&#39;]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1534973050, "creation_date": 1534973050, "answer_id": 51975358, "question_id": 51974506, "link": "https://stackoverflow.com/questions/51974506/how-to-expand-beautifulsoup-href-search-from-a-to-td/51975358#51975358", "title": "How to expand BeautifulSoup HREF search from &lt;a&gt; to &lt;td&gt;", "body": "<p>To grab all <code>href</code> that start with <code>/game/</code> just append the found node <code>href</code> value to a list:</p>\n\n<pre><code>&gt;&gt;&gt; result1 = []\n&gt;&gt;&gt; for a in soup.find_all('a', href=True):\n    if a['href'].startswith('/game/'):\n        result1.append(a['href'])\n\n&gt;&gt;&gt; print(result1)\n['/game/index/4599712?org id=418']\n</code></pre>\n\n<p>As for the second one, you may use a regex, but on the plain text of the next sibling to <code>a</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; result2 = {}\n&gt;&gt;&gt; for a in soup.find_all('a', href=True):\n    if a['href'].startswith('/team/'):\n        m = re.search(r\"\\((\\d+-\\d+)\\)\", a.next_sibling.string)\n        if m:\n            result2[a.string] = m.group(1)\n        else:\n            result2[a.string] = \"\"\n\n&gt;&gt;&gt; print(result2)\n{'Philadelphia': '3-1'}\n</code></pre>\n\n<p>The <code>\\((\\d+-\\d+)\\)</code> will extract digits + <code>-</code> + digits that are inside parentheses. If this value is not present, a key-value will be added with the found key, but an empty value.</p>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1535061236, "creation_date": 1535061236, "answer_id": 51994800, "question_id": 51974506, "link": "https://stackoverflow.com/questions/51974506/how-to-expand-beautifulsoup-href-search-from-a-to-td/51994800#51994800", "title": "How to expand BeautifulSoup HREF search from &lt;a&gt; to &lt;td&gt;", "body": "<p>You can use CSS selectors for matching tag attributes that start with certain string: e.g. <code>soup.select('a[href^=\"/game/\"]')</code> will match all <code>&lt;a&gt;</code> tags with attribute href starting with <code>/game/</code>.</p>\n\n<p>For the second part, you can use <code>re</code> module:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport re\n\ndata = '''\n&lt;td colspan=\"4\"&gt;\n    &lt;a href=\"/game/index/4599712?org id=418\" class=\"skipMask\" target=\"TEAM_WIN\"&gt;35-28 &lt;/a&gt;\n&lt;/td&gt;\n&lt;td nowrap bgcolor=\"#FFFFFF\"&gt;\n    &lt;a href=\"/team/145/18741\"&gt;Philadelphia&lt;/a&gt; == $0\n    \" (3-1)                                     \"\n&lt;/td&gt;\n'''\n\nsoup = BeautifulSoup(data, 'lxml')\n\nfor a in soup.select('a[href^=\"/game/\"]'):\n  print(a['href'])\n\nfor a in soup.select('a[href^=\"/team/\"]'):\n    m = re.findall(r'\\s*(.*?)(?=\\s*==).*?(\\(.*?\\))', a.parent.text, flags=re.DOTALL)\n    if m:\n        print(dict(m))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>/game/index/4599712?org id=418\n{'Philadelphia': '(3-1)'}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10241323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d852c14915c2b8fdc0a02feddbee8b?s=128&d=identicon&r=PG&f=1", "display_name": "CB589", "link": "https://stackoverflow.com/users/10241323/cb589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 51975358, "answer_count": 2, "score": 2, "last_activity_date": 1535061236, "creation_date": 1534969117, "question_id": 51974506, "link": "https://stackoverflow.com/questions/51974506/how-to-expand-beautifulsoup-href-search-from-a-to-td", "title": "How to expand BeautifulSoup HREF search from &lt;a&gt; to &lt;td&gt;", "body": "<p>I'm trying to find certain hrefs within HTML and I had been using (which had been working):</p>\n\n<pre><code>for a in soup.find_all('a', href=True):\n    if a['href'].startswith('/game/'):\n        chunk = str(a).split('''\"''')\n        game = chunk[3]\n</code></pre>\n\n<p>for the following HTML:</p>\n\n<pre><code>&lt;td colspan=\"4\"&gt;\n    &lt;a href=\"/game/index/4599712?org id=418\" class=\"skipMask\" target=\"TEAM_WIN\"&gt;35-28 &lt;/a&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>my code successfully gave me the /game/index/4599712?org id=418</p>\n\n<p>However, there are other tags that have separate hrefs for the teams, and the record of the teams. Example:</p>\n\n<pre><code>&lt;td nowrap bgcolor=\"#FFFFFF\"&gt;\n    &lt;a href=\"/team/145/18741\"&gt;Philadelphia&lt;/a&gt; == $0\n    \" (3-1)                                     \"\n&lt;/td&gt;\n</code></pre>\n\n<p>I would like some advice with this. I THINK I want to 1) if the href starts with \"/game/\" id like to have a better way of getting that href than splitting on quotation marks (probably regular expressions?). 2) If the href starts with \"/team/\" Id like to be able to create a dictionary to pair Philadelphia with (3-1). Any suggestions or ideas would be appreciated.  </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "edited": false, "score": 0, "creation_date": 1534969328, "post_id": 51974473, "comment_id": 90899531, "body": "What is the content of <code>html</code> after <code>html = session.get(link).text</code>?"}, {"owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "edited": false, "score": 0, "creation_date": 1534969387, "post_id": 51974473, "comment_id": 90899561, "body": "Also I would try to run your code but you haven&#39;t included all of it for the given context (for example <code>row</code> is undefined)"}, {"owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "edited": false, "score": 0, "creation_date": 1534969419, "post_id": 51974473, "comment_id": 90899572, "body": "The <code>requests</code> module is easier to work with than <code>urrlib</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1534970627, "post_id": 51974634, "comment_id": 90900147, "body": "Wow!  That&#39;s amazing!!  I thought the solution would look totally different.  There are probably a few different ways to do this, but all I need is one.  Thanks so much!!  Just one more thing.  How does the final_names variable get populated?  Can you add some comments around that?  Also, how does this line work?  list(filter(lambda x:x != &#39;\\n&#39;"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1534974327, "post_id": 51974634, "comment_id": 90901590, "body": "@ryguy72 Glad to help! <code>list(filter(lambda x:x != &#39;\\n&#39; ...</code> removes all occurrences of the newline character in the raw data scraped from the page. <code>final_names</code> cleans the latter by removing <code>\\n</code> at the end of each line and checks to find the locations of the names and dates of office assumption. On the Wikipedia page, senators from the same state are grouped under the same <code>th</code> html table tag. That means that the length of the resulting lists will be <code>6</code> or <code>7</code>, depending on whether the entry has the state included (first <code>td</code> col. is not empty)."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 1, "last_activity_date": 1534969723, "creation_date": 1534969723, "answer_id": 51974634, "question_id": 51974473, "link": "https://stackoverflow.com/questions/51974473/how-can-i-get-python-to-navigate-to-a-link-and-print-several-data-points-from-th/51974634#51974634", "title": "How can I get Python to navigate to a link and print several data points from this child link?", "body": "<p>You can find the table via the id, and then loop over rows, finding the name and the date of <code>'Assumed office'</code>:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as soup\nd = soup(requests.get('https://en.wikipedia.org/wiki/List_of_current_members_of_the_United_States_Senate').text, 'html.parser')\n_, *data = [list(filter(lambda x:x != '\\n', [c.text for c in i.find_all('td')])) for i in d.find('table', {'id':'senators'}).find_all('tr')]\nfinal_names = [[(i[1] if len(i) == 7 else i[0]).rstrip(), i[-2].rstrip()] for i in data]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['Richard Shelby', 'January 3, 1987'], ['Doug Jones[d]', 'January 3, 2018'], ['Lisa Murkowski', 'December 20, 2002'], ['Dan Sullivan', 'January 3, 2015'], ['John McCain', 'January 3, 1987'], ['Jeff Flake', 'January 3, 2013'], ['John Boozman', 'January 3, 2011'], ['Tom Cotton', 'January 3, 2015'], ['Dianne Feinstein', 'November 10, 1992'], ['Kamala Harris', 'January 3, 2017'], ['Michael Bennet', 'January 22, 2009'], ['Cory Gardner', 'January 3, 2015'], ['Richard Blumenthal', 'January 3, 2011'], ['Chris Murphy', 'January 3, 2013'], ['Tom Carper', 'January 3, 2001'], ['Chris Coons', 'November 15, 2010'], ['Bill Nelson', 'January 3, 2001'], ['Marco Rubio', 'January 3, 2011'], ['Johnny Isakson', 'January 3, 2005'], ['David Perdue', 'January 3, 2015'], ['Brian Schatz', 'December 26, 2012'], ['Mazie Hirono', 'January 3, 2013'], ['Mike Crapo', 'January 3, 1999'], ['Jim Risch', 'January 3, 2009'], ['Dick Durbin', 'January 3, 1997'], ['Tammy Duckworth', 'January 3, 2017'], ['Joe Donnelly', 'January 3, 2013'], ['Todd Young', 'January 3, 2017'], ['Chuck Grassley', 'January 3, 1981'], ['Joni Ernst', 'January 3, 2015'], ['Pat Roberts', 'January 3, 1997'], ['Jerry Moran', 'January 3, 2011'], ['Mitch McConnell', 'January 3, 1985'], ['Rand Paul', 'January 3, 2011'], ['Bill Cassidy', 'January 3, 2015'], ['John Kennedy', 'January 3, 2017'], ['Susan Collins', 'January 3, 1997'], ['Angus King', 'January 3, 2013'], ['Ben Cardin', 'January 3, 2007'], ['Chris Van Hollen', 'January 3, 2017'], ['Elizabeth Warren', 'January 3, 2013'], ['Ed Markey', 'July 16, 2013'], ['Debbie Stabenow', 'January 3, 2001'], ['Gary Peters', 'January 3, 2015'], ['Amy Klobuchar', 'January 3, 2007'], ['Tina Smith[e]', 'January 3, 2018'], ['Roger Wicker', 'December 31, 2007'], ['Cindy Hyde-Smith[f]', 'April 9, 2018'], ['Claire McCaskill', 'January 3, 2007'], ['Roy Blunt', 'January 3, 2011'], ['Jon Tester', 'January 3, 2007'], ['Steve Daines', 'January 3, 2015'], ['Deb Fischer', 'January 3, 2013'], ['Ben Sasse', 'January 3, 2015'], ['Dean Heller', 'May 9, 2011'], ['Catherine Cortez Masto', 'January 3, 2017'], ['Jeanne Shaheen', 'January 3, 2009'], ['Maggie Hassan', 'January 3, 2017'], ['Bob Menendez', 'January 18, 2006'], ['Cory Booker', 'October 31, 2013'], ['Tom Udall', 'January 3, 2009'], ['Martin Heinrich', 'January 3, 2013'], ['Chuck Schumer', 'January 3, 1999'], ['Kirsten Gillibrand', 'January 26, 2009'], ['Richard Burr', 'January 3, 2005'], ['Thom Tillis', 'January 3, 2015'], ['John Hoeven', 'January 3, 2011'], ['Heidi Heitkamp', 'January 3, 2013'], ['Sherrod Brown', 'January 3, 2007'], ['Rob Portman', 'January 3, 2011'], ['Jim Inhofe', 'November 17, 1994'], ['James Lankford', 'January 3, 2015'], ['Ron Wyden', 'February 6, 1996'], ['Jeff Merkley', 'January 3, 2009'], ['Bob Casey Jr.', 'January 3, 2007'], ['Pat Toomey', 'January 3, 2011'], ['Jack Reed', 'January 3, 1997'], ['Sheldon Whitehouse', 'January 3, 2007'], ['Lindsey Graham', 'January 3, 2003'], ['Tim Scott', 'January 2, 2013'], ['John Thune', 'January 3, 2005'], ['Mike Rounds', 'January 3, 2015'], ['Lamar Alexander', 'January 3, 2003'], ['Bob Corker', 'January 3, 2007'], ['John Cornyn', 'December 1, 2002'], ['Ted Cruz', 'January 3, 2013'], ['Orrin Hatch', 'January 3, 1977'], ['Mike Lee', 'January 3, 2011'], ['Patrick Leahy', 'January 3, 1975'], ['Bernie Sanders', 'January 3, 2007'], ['Mark Warner', 'January 3, 2009'], ['Tim Kaine', 'January 3, 2013'], ['Patty Murray', 'January 3, 1993'], ['Maria Cantwell', 'January 3, 2001'], ['Joe Manchin', 'November 15, 2010'], ['Shelley Moore Capito', 'January 3, 2015'], ['Ron Johnson', 'January 3, 2011'], ['Tammy Baldwin', 'January 3, 2013'], ['Mike Enzi', 'January 3, 1997'], ['John Barrasso', 'June 25, 2007']]\n</code></pre>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 51974634, "answer_count": 1, "score": 0, "last_activity_date": 1534969723, "creation_date": 1534968980, "question_id": 51974473, "link": "https://stackoverflow.com/questions/51974473/how-can-i-get-python-to-navigate-to-a-link-and-print-several-data-points-from-th", "title": "How can I get Python to navigate to a link and print several data points from this child link?", "body": "<p>I am looking at a parent URL, which is this.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_current_members_of_the_United_States_Senate\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/List_of_current_members_of_the_United_States_Senate</a></p>\n\n<p>From there, I want to get Python to click several links, all of which are ('td')[3].a['href'].  The first three in the parent URL are:  <code>'Richard Shelby', 'Doug Jones', and 'Lisa Murkowski'</code>.  All children links have text that matches this:  <code>'Assumed office'</code>.  I want to grab all these dates of <code>'Assumed office'</code>.  So, for <code>'Richard Shelby'</code> it would be:</p>\n\n<pre><code>Assumed office\nJanuary 3, 1987\nAssumed office\nApril 10, 2018\n</code></pre>\n\n<p>How can I do that?</p>\n\n<p>For navigating to several different links, I think it will look something like this...</p>\n\n<pre><code>from urllib.parse import urljoin\nsenator_link = \"https://en.wikipedia.org/wiki/List_of_current_members_of_the_United_States_Senate\"\n\nsenator_link = row.find_all('td')[3].a['href']\nsenator_link = urljoin(link, senator_link)\nresponse = session.get(senator_link)\n\nwith requests.Session() as session:\n    html = session.get(link).text\n    soup = BeautifulSoup(response.content, \"lxml\")\n    res = soup.findAll(\"span\", {\"class\": \"nowrap\"})\n    for r in res:\n        print(\"Assumed Office: \" + r.find(\"span\", {'class': 'nowrap'}).text)\n</code></pre>\n\n<p>All I get with that piece of code is this:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'text'\n</code></pre>\n"}, {"tags": ["python", "string", "lambda"], "comments": [{"owner": {"reputation": 936, "user_id": 1694699, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/67158e2d17ce71988c8384329d84e579?s=128&d=identicon&r=PG", "display_name": "ofnowhere", "link": "https://stackoverflow.com/users/1694699/ofnowhere"}, "edited": false, "score": 0, "creation_date": 1534969080, "post_id": 51974455, "comment_id": 90899409, "body": "Can you format your question properly using code blocks? Others want to help, can you make it easier for them?"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 1, "creation_date": 1534969216, "post_id": 51974455, "comment_id": 90899469, "body": "I suggest you write your code out in the conventional if-elif-else blocks over multiple lines, and use <code>def</code> if you need a named function"}, {"owner": {"reputation": 1734, "user_id": 6117426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29be95172192d46e15094235654bfd2d?s=128&d=identicon&r=PG&f=1", "display_name": "Anakhand", "link": "https://stackoverflow.com/users/6117426/anakhand"}, "edited": false, "score": 0, "creation_date": 1534969289, "post_id": 51974455, "comment_id": 90899512, "body": "I believe the <code>elif</code> statement is invalid in a one-line expression like that. I guess you want to use a ternary &quot;operator&quot;, so try expanding <code>elif</code> into <code>else if</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534970117, "post_id": 51974455, "comment_id": 90899912, "body": "The basic problem is that your lamba expression is <i>not</i> an expression: you have tried to include a <code>print</code> statement, then an <code>elif</code> without any attached <code>if</code> or <code>else</code>."}, {"owner": {"reputation": 5, "user_id": 10261638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojW2-pBJ2M0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNmzFiUX9f6GaZ18Lkd2jdXnGM68w/mo/photo.jpg?sz=128", "display_name": "Moca", "link": "https://stackoverflow.com/users/10261638/moca"}, "edited": false, "score": 0, "creation_date": 1534970800, "post_id": 51974455, "comment_id": 90900208, "body": "Thank you all for the help This is my first posting on stack overflow an I haven&#39;t expected this friendly and quick response from all thank you very much my fellow Pythoners."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10261638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojW2-pBJ2M0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNmzFiUX9f6GaZ18Lkd2jdXnGM68w/mo/photo.jpg?sz=128", "display_name": "Moca", "link": "https://stackoverflow.com/users/10261638/moca"}, "edited": false, "score": 0, "creation_date": 1534970880, "post_id": 51974576, "comment_id": 90900234, "body": "Thank you very much abarnert that explains eveything... Loved your way of explanation and help. Wish i could give you hundred likes.."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1534970332, "last_edit_date": 1534970332, "creation_date": 1534969443, "answer_id": 51974576, "question_id": 51974455, "link": "https://stackoverflow.com/questions/51974455/lambda-expression-producing-a-syntaxerror/51974576#51974576", "title": "Lambda expression producing a SyntaxError", "body": "<p>You have multiple syntax errors in your code, and you have to fix all of them.</p>\n\n<hr>\n\n<p>First, <code>lambda</code> expressions\u2014like all expressions\u2014cannot have statements in them, only expressions.</p>\n\n<p>And that includes Python 2's <code>print</code> statement, which you appear to be using.</p>\n\n<p>If you want to write a function that includes a statement, you need to use a <code>def</code> statement, not a <code>lambda</code> expression.</p>\n\n<hr>\n\n<p>Second, if you were trying to write an <code>if-else</code> expression, you got the syntax for that wrong. You need to put the true-expression first, then <code>if</code>, then the condition to check, then <code>else</code>, then the false-expression.</p>\n\n<p>You appear to have been trying to put the condition first, right before the true-expression:</p>\n\n<pre><code>'opened' in x.lower().split() print(10)\n</code></pre>\n\n<p>You can't do that. And that's where your first <code>SyntaxError</code>, the one you're asking about, comes from.</p>\n\n<hr>\n\n<p>Third, you cannot use <code>elif</code> in an <code>if-else</code> expression. You'd have to write it into an <code>if-else</code> expression with another <code>if-else</code> expression as the false-value.</p>\n\n<p>Which is going to look horrible. If you find yourself needing that, you almost certainly want to break it out into an <code>if</code> statement instead.</p>\n\n<hr>\n\n<p>Also, while it isn't <em>illegal</em>, it's highly <em>misleading</em> to use an <code>if-else</code> expression for its side effects.. <code>if-else</code> expressions are about picking one value or another, not about running one set of side effects or another. If the latter is what you want, you want an <code>if</code> statement.</p>\n\n<p>And the same is true for <code>lambda</code>. That's about defining functions that compute values; a function that's only called for its side effects should almost always be a <code>def</code>.</p>\n\n<hr>\n\n<p>So, what you want is this:</p>\n\n<pre><code>def thingy(x):\n    if 'opened' in x.lower().split():\n        print(10)\n    elif 'clickedurl' in x.lower().split():\n        print(20)\n    else:\n        print('null')\n\nhunter = udf(thingy)\n</code></pre>\n\n<p>And notice that this gives you the opportunity to improve things (both readability and performance) by avoiding some repetition:</p>\n\n<pre><code>def thingy(x):\n    words = x.lower().split()\n    if 'opened' in words:\n        print(10)\n    elif 'clickedurl' words:\n        print(20)\n    else:\n        print('null')\n</code></pre>\n\n<p>Although of course you don't want to use names like <code>x</code> and <code>thingy</code>. I have no idea what any of these things represent, but surely you do.</p>\n\n<p>And finally, I don't know what that <code>udf</code> function is, but I can't imagine it returning anything useful when called with a function that always returns <code>None</code>, so I'll bet you have more problems beyond these, but hopefully you can solve them from here.</p>\n\n<hr>\n\n<p>And of course once you fix all of that, the next line is <em>also</em> a syntax error:</p>\n\n<pre><code>s= it/is/opened/memory/tae\n</code></pre>\n\n<p>This is attempting to divide a bunch of things. Even if <code>it</code>, <code>opened</code>, <code>memory</code>, and <code>tae</code> are all variables with relevant values, <code>is</code> certainly isn't, because it's a built-in operator, so you can't divide anything by it.</p>\n\n<p>You probably wanted a string here.</p>\n\n<p>Also, because you're calling <code>split()</code> without any argument, that's only going to split things separated by whitespace. So, either you wanted <code>split('/')</code> above, or you wanted whitespace here.</p>\n\n<p>So:</p>\n\n<pre><code>s = 'it is opened memory tae'\n</code></pre>\n\n<hr>\n\n<p>If you really wanted to make this one giant expression, it's <em>possible</em>, but it's going to be very, very ugly.</p>\n\n<p>First, you have to replace that <code>print</code> statement with a function call. Of course you could <code>from __future__ import print_function</code>, but otherwise, you need to write a function that does what you want, or use one that already exists.</p>\n\n<p>Second, you either need an <code>if-else</code> inside an <code>if-else</code> as the argument to that function, or you need to call that function in each branch of an <code>if-else</code> in an <code>if-else</code>. I think the first is slightly less horrible.</p>\n\n<p>So:</p>\n\n<pre><code>lambda x: sys.stdout.write(\n    str(10 if 'opened' in x.lower().split() else (\n             20 if 'clickedurl' in x.lower().split() else 'null'))\n    + '\\n')\n</code></pre>\n\n<p>And of course inside an expression, whitespace doesn't matter, so you can freely rewrite that to be even uglier if you want:</p>\n\n<pre><code>lambda x:sys.stdout.write(str(10 if 'opened' in x.lower().split() else(20 if 'clickedurl' in x.lower().split() else 'null'))+ '\\n')\n</code></pre>\n\n<p>\u2026 or:</p>\n\n<pre><code>lambda x: sys.stdout.write(str\n       (10 \n  if 'opened' in x.\n            lower\n           (\n         ).\n     split() else (20\n   if 'clickedurl' in x.lower().split() else 'null'))+ '\\n')\n</code></pre>\n\n<p>I can't imagine why you'd want the latter, but then I can't imagine why you'd want the former either, and yet you seemed to be trying to write something as much like that as possible, so\u2026\u00a0go for it.</p>\n"}], "owner": {"reputation": 5, "user_id": 10261638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojW2-pBJ2M0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNmzFiUX9f6GaZ18Lkd2jdXnGM68w/mo/photo.jpg?sz=128", "display_name": "Moca", "link": "https://stackoverflow.com/users/10261638/moca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 51974576, "answer_count": 1, "score": -1, "last_activity_date": 1534970332, "creation_date": 1534968897, "last_edit_date": 1534970062, "question_id": 51974455, "link": "https://stackoverflow.com/questions/51974455/lambda-expression-producing-a-syntaxerror", "title": "Lambda expression producing a SyntaxError", "body": "<p>I am looking for an lambda expression to print an integer if a given string is in a given sentence separated by <code>/</code>. This is the statement I wrote:</p>\n\n<pre><code>hunter = udf(lambda x : 'opened' in x.lower().split() print(10) elif 'clickedurl' in x.lower().split() print(20)  else print(\"null\"))\ns= it/is/opened/memory/tae\nhunter(s)\n</code></pre>\n\n<p>I am getting the following error</p>\n\n<pre><code> File \"/home/main.py\", line 1                                                                                         \n    hunter = udf(lambda x : 'opened' in x.lower().split() print(10) elif 'clickedurl' in x.lower().split() print 20  el\nse print(\"null\"))                                                                                                      \n                                                              ^                                                        \nSyntaxError: invalid syntax \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2476, "user_id": 1279003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TcGUp.jpg?s=128&g=1", "display_name": "MGP", "link": "https://stackoverflow.com/users/1279003/mgp"}, "edited": false, "score": 1, "creation_date": 1534968915, "post_id": 51974398, "comment_id": 90899329, "body": "Maybe there&#39;s an easier way by passing the right parameter through the CLI. What pdf reader are you using? For Adobe Reader check <a href=\"https://stackoverflow.com/questions/619158/adobe-reader-command-line-reference\">this answer</a>."}, {"owner": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "reply_to_user": {"reputation": 2476, "user_id": 1279003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TcGUp.jpg?s=128&g=1", "display_name": "MGP", "link": "https://stackoverflow.com/users/1279003/mgp"}, "edited": false, "score": 0, "creation_date": 1534969055, "post_id": 51974398, "comment_id": 90899396, "body": "As @ManuelGutierrez indicated, it all depends on what PDF reader you&#39;re using to open your document."}, {"owner": {"reputation": 3142, "user_id": 2311167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZpVr.jpg?s=128&g=1", "display_name": "Adrian W", "link": "https://stackoverflow.com/users/2311167/adrian-w"}, "edited": false, "score": 0, "creation_date": 1534969298, "post_id": 51974398, "comment_id": 90899517, "body": "You may want to have a look at <a href=\"https://stackoverflow.com/q/45795089\">this question</a> to read the PDF in Python and decrypting it from python. Then it should be possible to write a temporary unencrypted copy of the PDF which you should be able to open without password query."}, {"owner": {"reputation": 33, "user_id": 10261621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35880856342bcab0866508fabb9b0d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Parky118", "link": "https://stackoverflow.com/users/10261621/parky118"}, "edited": false, "score": 0, "creation_date": 1534969413, "post_id": 51974398, "comment_id": 90899567, "body": "I am opening the PDF on Microsoft edge"}, {"owner": {"reputation": 2476, "user_id": 1279003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TcGUp.jpg?s=128&g=1", "display_name": "MGP", "link": "https://stackoverflow.com/users/1279003/mgp"}, "edited": false, "score": 0, "creation_date": 1534969852, "post_id": 51974398, "comment_id": 90899779, "body": "@Parky118 Can you afford to use another one? With <a href=\"http://forums.foxitsoftware.com/forum/portable-document-format-pdf-tools/foxit-reader/774-portable-version-command-line-options-help-needed\" rel=\"nofollow noreferrer\">Foxit Reader</a> it&#39;s simple enough."}], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "is_accepted": false, "score": 0, "last_activity_date": 1534969176, "creation_date": 1534969176, "answer_id": 51974516, "question_id": 51974398, "link": "https://stackoverflow.com/questions/51974398/how-to-enter-a-pdf-password/51974516#51974516", "title": "How to enter a PDF password", "body": "<p>As per the comment above, you will have an easier time passing in the password as a parameter to the CLI. However, I have a hunch that a proper CLI is unavailable for the reader you're using (most of my favorite GUI desktop applications have no proper CLI :( ).</p>\n\n<p>If the CLI is indeed not an option, your next best bet is to use <a href=\"http://sikulix.com/\" rel=\"nofollow noreferrer\" title=\"SikuliX\">SikuliX</a>. It's a Jython (Python that runs on Java) app that let's you quite easily script GUI interactions.</p>\n\n<p>In this case you would use the SikuliX app to screenshot the password prompt, and then your script would navigate to the prompt, paste the password, and then either hit the return key or press the Enter key with the mouse (you will need to also screenshot the Enter key). I've used SikuliX in the past to convert a bunch of .gpx files to .midi using Guitar Pro, and if you put in some error-handling for edge cases it actually does a really good job, even with very simple scripts.</p>\n"}], "owner": {"reputation": 33, "user_id": 10261621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35880856342bcab0866508fabb9b0d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Parky118", "link": "https://stackoverflow.com/users/10261621/parky118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534969176, "creation_date": 1534968621, "last_edit_date": 1534968760, "question_id": 51974398, "link": "https://stackoverflow.com/questions/51974398/how-to-enter-a-pdf-password", "title": "How to enter a PDF password", "body": "<p>I am trying to use python to open a pdf file on my computer. The PDF file is locked.\nI know the password, but I have no idea how to enter the password once the page appears using python.</p>\n\n<p>I currently do the following:</p>\n\n<pre><code>import os\nos.startfile('file.pdf')\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/YM9TV.png\" alt=\"enter image description here\"></p>\n\n<p>assuming the password is for example 'abcd', could somebody please tell me how to type into the password prompt box.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "hex"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1534968743, "post_id": 51974380, "comment_id": 90899260, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks\">What is the most &quot;pythonic&quot; way to iterate over a list in chunks?</a> or <a href=\"https://stackoverflow.com/questions/9475241/split-string-every-nth-character\">Split string every nth character?</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534968899, "post_id": 51974380, "comment_id": 90899323, "body": "b&#39;\\xff\\x00\\xff\\xff\\xff\\&#39; is a syntax error: one backslash too many in the end"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1534968951, "post_id": 51974380, "comment_id": 90899351, "body": "@pault: if you consider the intermediate step of the hex string, yes it may be a dupe, but for the whole problem it isn&#39;t"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1534969035, "post_id": 51974380, "comment_id": 90899382, "body": "sure- I was thinking <code>btyestring = str(b&#39;\\xff\\x00\\xff\\xff\\xff&#39;).encode(&#39;hex&#39;)</code> and then you can do <code>&quot; &quot;.join([btyestring[i:i+2] for i in range(0, len(btyestring), 2)])</code> @Jean-Fran&#231;oisFabre"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 8, "last_activity_date": 1534969370, "last_edit_date": 1534969370, "creation_date": 1534968864, "answer_id": 51974447, "question_id": 51974380, "link": "https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between/51974447#51974447", "title": "Print Hex With Spaces Between", "body": "<p>just convert your array of bytes to hex strings, and join the result with space:</p>\n\n<pre><code>&gt;&gt;&gt; d=b'\\xff\\x00\\xff\\xff\\xff'\n&gt;&gt;&gt; \" \".join([\"{:02x}\".format(x) for x in d])\n'ff 00 ff ff ff'\n</code></pre>\n\n<p>note that <code>\" \".join(\"{:02x}\".format(x) for x in d)</code> would also work, but forcing the list creation is faster as explained here: <a href=\"https://stackoverflow.com/questions/34822676/joining-strings-generator-or-list-comprehension\">Joining strings. Generator or list comprehension?</a></p>\n\n<p>In python 2, <code>bytes</code> is <code>str</code> so you have to use <code>ord</code> to get character code</p>\n\n<pre><code>&gt;&gt;&gt; \" \".join([\"{:02x}\".format(ord(x)) for x in d])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 2, "creation_date": 1534969135, "post_id": 51974501, "comment_id": 90899433, "body": "How is this different than the other answer?"}, {"owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1534969315, "post_id": 51974501, "comment_id": 90899526, "body": "It&#39;s not, I was adding it at the same time as Jean-Francois&#39;s answer.  I agree with him that joining a list comprehension is probably faster that joining a generator comprehension.  But I like the elegance of generator comprehensions in a function call (if you know the list doesn&#39;t have many elements)."}], "tags": [], "owner": {"reputation": 126, "user_id": 7572202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfDVZ.png?s=128&g=1", "display_name": "Jon Sorenson", "link": "https://stackoverflow.com/users/7572202/jon-sorenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1534969102, "creation_date": 1534969102, "answer_id": 51974501, "question_id": 51974380, "link": "https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between/51974501#51974501", "title": "Print Hex With Spaces Between", "body": "<p>You can iterate over the byte string and get a series of bytes in python.  These bytes are represented as integers.  You then convert them back to hex strings and join them all together with a space between each hex string.</p>\n\n<pre><code>&gt;&gt;&gt; a = b'\\xff\\x00\\xff\\xff'\n&gt;&gt;&gt; print( ' '.join( '%02x' % x for x in a ) )\n'ff 00 ff ff'\n</code></pre>\n\n<p>Or using <code>format</code> in python3:</p>\n\n<pre><code>&gt;&gt;&gt; a = b'\\xff\\x00\\xff\\xff'\n&gt;&gt;&gt; print( ' '.join( '{:02x}'.format(x) for x in a ) )\n'ff 00 ff ff'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 630, "user_id": 3133336, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed0869de80f68b80128f28d4d2c8fe61?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/3133336/alexis"}, "edited": false, "score": 0, "creation_date": 1590949261, "post_id": 51974584, "comment_id": 109868256, "body": "Not in Python 3.8: <code>LookupError: &#39;hex&#39; is not a text encoding; use codecs.encode() to handle arbitrary codecs</code>"}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 1, "last_activity_date": 1534969470, "creation_date": 1534969470, "answer_id": 51974584, "question_id": 51974380, "link": "https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between/51974584#51974584", "title": "Print Hex With Spaces Between", "body": "<p>Seems like the community does not agree that this is a dupe, so I'll post <a href=\"https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between#comment90899382_51974380\">my comment</a> as an answer.</p>\n\n<p>You can convert to a string:</p>\n\n<pre><code>bytestring = str(b'\\xff\\x00\\xff\\xff\\xff').encode('hex')\nprint(bytestring)\n#ff00ffffff\n</code></pre>\n\n<p>Then <a href=\"https://stackoverflow.com/questions/9475241/split-string-every-nth-character\">iterate over it in chunks</a> of 2, and join the chunks with a space:</p>\n\n<pre><code>print(\" \".join([bytestring[i:i+2] for i in range(0, len(bytestring), 2)]))\n#'ff 00 ff ff ff'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6492, "user_id": 341744, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T0jno.png?s=128&g=1", "display_name": "ninMonkey", "link": "https://stackoverflow.com/users/341744/ninmonkey"}, "edited": false, "score": 1, "creation_date": 1593581764, "post_id": 62528037, "comment_id": 110827654, "body": "There&#39;s a 2nd parameter that sets bytes per separator, the default is 1. If you make it negative it counts separators from the right, instead of the left.  <a href=\"https://docs.python.org/3/library/stdtypes.html#bytes.hex\" rel=\"nofollow noreferrer\">docs: hex&#40;&#91;sep&#91;, bytes_per_sep&#93;&#93;&#41;</a>"}], "tags": [], "owner": {"reputation": 61, "user_id": 6375307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f87ba5fdb2c6220b2593df91f51d6fbb?s=128&d=identicon&r=PG&f=1", "display_name": "PX.Liu", "link": "https://stackoverflow.com/users/6375307/px-liu"}, "is_accepted": false, "score": 4, "last_activity_date": 1592890798, "creation_date": 1592890798, "answer_id": 62528037, "question_id": 51974380, "link": "https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between/62528037#62528037", "title": "Print Hex With Spaces Between", "body": "<p>In Python 3.8+, <code>hex</code> function has an optional argument splitter.</p>\n<pre><code>&gt;&gt;&gt; print(b'\\xff\\x00\\xff\\xff\\xff'.hex(' '))\n'ff 00 ff ff ff'\n</code></pre>\n<p>And you can split the hex string with any character you want.</p>\n<pre><code>&gt;&gt;&gt; print(b'\\xff\\x00\\xff\\xff\\xff'.hex(':'))\n'ff:00:ff:ff:ff'\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10261634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485166567fec8fa4f181045b7960fbef?s=128&d=identicon&r=PG&f=1", "display_name": "chxevsny", "link": "https://stackoverflow.com/users/10261634/chxevsny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5371, "favorite_count": 1, "accepted_answer_id": 51974447, "answer_count": 4, "score": 7, "last_activity_date": 1592890798, "creation_date": 1534968530, "last_edit_date": 1535126729, "question_id": 51974380, "link": "https://stackoverflow.com/questions/51974380/print-hex-with-spaces-between", "title": "Print Hex With Spaces Between", "body": "<p>I'm trying to print my hex out in another way...</p>\n\n<p>First I'm converting this (bytestring is the name of the variable):</p>\n\n<pre><code>b'\\xff\\x00\\xff\\xff\\xff'\n</code></pre>\n\n<p>to hex,</p>\n\n<pre><code>print(bytestring.hex())\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>ff00ffffff\n</code></pre>\n\n<p>but I've been trying for a while to get it to output this:</p>\n\n<pre><code>ff 00 ff ff ff\n</code></pre>\n\n<p>but no luck.</p>\n\n<p>Any suggestions?\nCheers!</p>\n\n<hr>\n\n<p>Update:</p>\n\n<pre><code>stringdata = f.read(5)\nprint(stringdata)\n#b'\\xff\\x00\\xff\\xff\\xff'\n\nreadHex = \" \".join([\"{:02x}\".format(x) for x in stringdata.hex()])\n# ValueError: Unknown format code 'x' for object of type 'str'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "list", "character"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1534968602, "post_id": 51974341, "comment_id": 90899201, "body": "Who is &quot;someone&quot;, why are they appending these unwanted items to the list, and why do you want the list itself to be responsible for ignoring those items?"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "edited": false, "score": 1, "creation_date": 1534968619, "post_id": 51974341, "comment_id": 90899211, "body": "Have you tried subclassing `list?"}, {"owner": {"reputation": 2965, "user_id": 4626254, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Td_75cnFBl0/AAAAAAAAAAI/AAAAAAAAAC8/COZ0iGRh-Ts/photo.jpg?sz=128", "display_name": "Underoos", "link": "https://stackoverflow.com/users/4626254/underoos"}, "edited": false, "score": 0, "creation_date": 1535009892, "post_id": 51974341, "comment_id": 90910783, "body": "Someone is none other than me. I have a constraint to have a list which ignores the specified character when appending accidentally or on purpose."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 6605779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/67CGf.jpg?s=128&g=1", "display_name": "StubbyAngel9", "link": "https://stackoverflow.com/users/6605779/stubbyangel9"}, "is_accepted": false, "score": 3, "last_activity_date": 1534968701, "creation_date": 1534968701, "answer_id": 51974417, "question_id": 51974341, "link": "https://stackoverflow.com/questions/51974341/how-to-ignore-specific-elements-being-added-to-python-list/51974417#51974417", "title": "How to ignore specific elements being added to Python list", "body": "<p>I don't think you should do this, but if you really have to, you could subclass a list like so:</p>\n\n<pre><code>class IgnoreList(list):\n    def append(self, item, *args, **kwargs):\n        if item == '.':\n            return\n        return super(IgnoreList, self).append(item)\n</code></pre>\n\n<p>But is horribly un-pythonic. A better solution is to just check the value before calling append.</p>\n\n<pre><code>if value != '.':\n    my_list.append(value)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 4392485, "user_type": "registered", "profile_image": "https://graph.facebook.com/618944091/picture?type=large", "display_name": "Kevin Koehler", "link": "https://stackoverflow.com/users/4392485/kevin-koehler"}, "is_accepted": false, "score": 3, "last_activity_date": 1534968716, "creation_date": 1534968716, "answer_id": 51974420, "question_id": 51974341, "link": "https://stackoverflow.com/questions/51974341/how-to-ignore-specific-elements-being-added-to-python-list/51974420#51974420", "title": "How to ignore specific elements being added to Python list", "body": "<p>The best way to do this in python would be to create a new class with the desired behaviour</p>\n\n<pre><code>&gt;&gt;&gt; class mylist(list):\n...     def append(self, x):\n...             if x != \".\":\n...                     super().append(x)\n... \n&gt;&gt;&gt; l = mylist()\n&gt;&gt;&gt; l.append(\"foo\")\n&gt;&gt;&gt; l\n['foo']\n&gt;&gt;&gt; l.append(\".\")\n&gt;&gt;&gt; l\n['foo']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": true, "score": 2, "last_activity_date": 1534968881, "creation_date": 1534968881, "answer_id": 51974448, "question_id": 51974341, "link": "https://stackoverflow.com/questions/51974341/how-to-ignore-specific-elements-being-added-to-python-list/51974448#51974448", "title": "How to ignore specific elements being added to Python list", "body": "<p>You could create a special appending function which modifies the list in place if the character is not a <code>'.'</code>:</p>\n\n<pre><code>def append_no_dot(l, c):\n   if c != '.': l.append(c)\n</code></pre>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; l = ['a','b']\n&gt;&gt;&gt; append_no_dot(l, 'c')\n&gt;&gt;&gt; append_no_dot(l, '.')\n&gt;&gt;&gt; l\n['a', 'b', 'c']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2965, "user_id": 4626254, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Td_75cnFBl0/AAAAAAAAAAI/AAAAAAAAAC8/COZ0iGRh-Ts/photo.jpg?sz=128", "display_name": "Underoos", "link": "https://stackoverflow.com/users/4626254/underoos"}, "edited": false, "score": 0, "creation_date": 1535030287, "post_id": 51980554, "comment_id": 90922948, "body": "Can we do the same thing in a simple manner. Not too complex and big as you&#39;ve mentioned above @Vishvajit Pathak"}, {"owner": {"reputation": 2293, "user_id": 1794144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hn8jz.png?s=128&g=1", "display_name": "Vishvajit Pathak", "link": "https://stackoverflow.com/users/1794144/vishvajit-pathak"}, "reply_to_user": {"reputation": 2965, "user_id": 4626254, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Td_75cnFBl0/AAAAAAAAAAI/AAAAAAAAAC8/COZ0iGRh-Ts/photo.jpg?sz=128", "display_name": "Underoos", "link": "https://stackoverflow.com/users/4626254/underoos"}, "edited": false, "score": 0, "creation_date": 1535033662, "post_id": 51980554, "comment_id": 90925253, "body": "@SukumarRdjf This is the best approach and it covers other requirements that might be useful to you."}], "tags": [], "owner": {"reputation": 2293, "user_id": 1794144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hn8jz.png?s=128&g=1", "display_name": "Vishvajit Pathak", "link": "https://stackoverflow.com/users/1794144/vishvajit-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1535047736, "last_edit_date": 1535047736, "creation_date": 1535009703, "answer_id": 51980554, "question_id": 51974341, "link": "https://stackoverflow.com/questions/51974341/how-to-ignore-specific-elements-being-added-to-python-list/51980554#51980554", "title": "How to ignore specific elements being added to Python list", "body": "<pre><code>class IgnoreList(list):\n\n    def __init__(self, ignore_me):\n        self.ignore_me = ignore_me\n\n    def check(self, v):\n        return v == self.ignore_me\n\n    def append(self, v):\n        if not self.check(v):\n            super(IgnoreList, self).append(v)\n\n\nmy_list = IgnoreList('x')        # `x` to be ignored here\nmy_list.append('a')\nmy_list.append('b')\nmy_list.append('x')\nmy_list.append('c')\nprint my_list\n\n######OUTPUT########\n['a', 'b', 'c']\n</code></pre>\n"}], "owner": {"reputation": 2965, "user_id": 4626254, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Td_75cnFBl0/AAAAAAAAAAI/AAAAAAAAAC8/COZ0iGRh-Ts/photo.jpg?sz=128", "display_name": "Underoos", "link": "https://stackoverflow.com/users/4626254/underoos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 51974448, "answer_count": 4, "score": 9, "last_activity_date": 1535047736, "creation_date": 1534968376, "question_id": 51974341, "link": "https://stackoverflow.com/questions/51974341/how-to-ignore-specific-elements-being-added-to-python-list", "title": "How to ignore specific elements being added to Python list", "body": "<p>I have a python list. Let's say it's an empty list. Is there any way that I can make the list ignore specifc characters that when someone tries to add, at the time of list creation itself.</p>\n\n<p>Suppose I want to ignore all the '.' characters to be ignored when someone tries to append the character usinng list.append('.'). </p>\n\n<p>Is there any way to mention that at the time of list creation itself?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "data-science"], "comments": [{"owner": {"reputation": 2125, "user_id": 2703802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4OvIl.jpg?s=128&g=1", "display_name": "vielkind", "link": "https://stackoverflow.com/users/2703802/vielkind"}, "edited": false, "score": 0, "creation_date": 1534968824, "post_id": 51974324, "comment_id": 90899299, "body": "Learn <code>boto3</code>.  You&#39;re asking a really broad question here, but if you start by familiarizing yourself with <code>boto3</code> to interact with S3 you&#39;ll be on a good path to getting started."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534968976, "post_id": 51974324, "comment_id": 90899360, "body": "Your question doesn&#39;t fit here particularly well, but is a worthy question.  Please check <a href=\"https://meta.stackexchange.com/questions/129598/which-computer-science-programming-stack-exchange-do-i-post-in\">&quot;Which site?&quot;</a>.  This is in the realm of tutorial guidance, which is too broad for Stack Overflow."}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1534972659, "post_id": 51974324, "comment_id": 90900931, "body": "in <a href=\"https://github.com/aws-samples/data-pipeline-samples/blob/master/samples/ShellCommandWithFTP/pipeline.json\" rel=\"nofollow noreferrer\">github.com/aws-samples/data-pipeline-samples/blob/master/&hellip;</a> is an example that uses <code>ShellCommandActivity</code> for the FTP"}], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 3782993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tZCYC.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/3782993/victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1534970470, "creation_date": 1534970470, "answer_id": 51974789, "question_id": 51974324, "link": "https://stackoverflow.com/questions/51974324/where-do-i-begin-when-trying-to-develope-a-data-pipeline-from-an-ftp-server-to-a/51974789#51974789", "title": "Where do I begin when trying to develope a data pipeline from an FTP server to an AWS S3 bucket?", "body": "<p>First try to manually configure a Data Pipeline in aws console, because the service is still buggy and you want to start with the easiest way:</p>\n\n<ol>\n<li>Access your account in AWS Console and go to Data Pipeline service.</li>\n<li>Hit <strong>Get Started</strong> button which should open <strong>Create Pipeline</strong> menu.</li>\n<li>Name the pipeline, choose in <strong>Source</strong> field \"Build using Architect\", choose in <strong>Schedule</strong> \"on pipeline activation\".</li>\n<li>(Optional) Highly suggest you to keep Logging as <strong>Enabled</strong> and provide an S3 bucket to keep your pipeline logs, so you can troubleshoot later.</li>\n<li>Hit <strong>Activate</strong> button which should open the UI constructor of your pipeline.</li>\n<li>On the UI diagram hit <strong>Add</strong> button and add a <strong>ShellCommandActivity</strong> where you will specify the bash command that reads the file/folder from your FTP. Because Data Pipeline doesn't support FTP as a datasource, you'll have to do it via this bash activity.</li>\n<li>On the right menu click \"Add optional field...\" and add <strong>Command</strong> field where you'll write your bash command that reads from FTP.</li>\n<li>Again hit \"Add and optional field...\" and choose <strong>Output</strong> which will create a <strong>DataNode</strong>.</li>\n<li>Click on that data node box and in right menu \"Add an optional field...\" <strong>Directory Path</strong> where you'll write your target S3 bucket.</li>\n<li>Save and <strong>Activate</strong> the pipeline.</li>\n</ol>\n\n<p>After you do this and make your pipeline working, you can involve Python. Not sure yet how you're planning to use Python. If you're thinking about doing the Data Pipeline configuration in a Python script, then checkout the <a href=\"https://boto3.readthedocs.io/en/latest/reference/services/datapipeline.html\" rel=\"nofollow noreferrer\">Boto3 documentation for Data Pipeline</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 10261613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465039c38a815ddb7239fb69265635d4?s=128&d=identicon&r=PG&f=1", "display_name": "Dominick Augustine", "link": "https://stackoverflow.com/users/10261613/dominick-augustine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534971464, "creation_date": 1534968284, "question_id": 51974324, "link": "https://stackoverflow.com/questions/51974324/where-do-i-begin-when-trying-to-develope-a-data-pipeline-from-an-ftp-server-to-a", "title": "Where do I begin when trying to develope a data pipeline from an FTP server to an AWS S3 bucket?", "body": "<p>I'm looking at creating a pipeline between an FTP server and an AWS S3 bucket. With the capability of monitoring the FTP server for new files. I would like to program most to all of it with Python. Where do I begin?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 2, "creation_date": 1534968692, "post_id": 51974298, "comment_id": 90899236, "body": "You want <code>index=False</code>. Also curious why you are keeping the <code>numeroLote</code> column when it&#39;s clear what it&#39;s value is from the filename?"}], "answers": [{"comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1534969380, "post_id": 51974487, "comment_id": 90899554, "body": "Reason for my downvote - This solution is really avoiding the root of the problem, which is writing the index to the output dataframe in the first place."}, {"owner": {"reputation": 59, "user_id": 7627224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XD7fHAhI2eY/AAAAAAAAAAI/AAAAAAAABK8/R5fq3XCy7LM/photo.jpg?sz=128", "display_name": "Sunny Liu", "link": "https://stackoverflow.com/users/7627224/sunny-liu"}, "reply_to_user": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1534971052, "post_id": 51974487, "comment_id": 90900308, "body": "If you really want to delete that one... you could use similar approach to delete by index. i.e...a.drop(a.columns[[0]], axis=1)"}], "tags": [], "owner": {"reputation": 59, "user_id": 7627224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XD7fHAhI2eY/AAAAAAAAAAI/AAAAAAAABK8/R5fq3XCy7LM/photo.jpg?sz=128", "display_name": "Sunny Liu", "link": "https://stackoverflow.com/users/7627224/sunny-liu"}, "is_accepted": false, "score": -1, "last_activity_date": 1534969047, "creation_date": 1534969047, "answer_id": 51974487, "question_id": 51974298, "link": "https://stackoverflow.com/questions/51974298/deleting-empty-index-column-pandas-dataframe-labels-not-contained-in-axi/51974487#51974487", "title": "Deleting empty index column pandas dataframe - labels [&#39; &#39;] not contained in axis", "body": "<p>Instead of trying to drop that unnamed column, you could select all columns starting from index 1. </p>\n\n<pre><code>a = a.iloc[:, 1:]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": true, "score": 1, "last_activity_date": 1534970003, "last_edit_date": 1534970003, "creation_date": 1534969351, "answer_id": 51974552, "question_id": 51974298, "link": "https://stackoverflow.com/questions/51974298/deleting-empty-index-column-pandas-dataframe-labels-not-contained-in-axi/51974552#51974552", "title": "Deleting empty index column pandas dataframe - labels [&#39; &#39;] not contained in axis", "body": "<p>You instead want <code>index=False</code>, like so:</p>\n\n<pre><code>for i in range(5,26):\n    a = racimitos[racimitos['numeroLote']==i][['peso','fecha','numeroLote']]\n    a.to_csv('racimitos{}.csv'.format(i), sep=',', header=True, index=False)\n</code></pre>\n\n<p>As an aside, I don't think it's necessary to include the <code>numeroLote</code> column when printing to the .csv file, simply because you capture it's value in the filename.</p>\n\n<p>Here is a much more efficient solution IMO using <code>groupby()</code>:</p>\n\n<pre><code>grouped = racimitos.groupby('numeroLote')[['peso','fecha']]\n[grouped.get_group(key).to_csv('racimitos{}.csv'.format(key), index=False) for key, item in grouped]\n</code></pre>\n"}], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 51974552, "answer_count": 2, "score": 0, "last_activity_date": 1534970003, "creation_date": 1534968160, "question_id": 51974298, "link": "https://stackoverflow.com/questions/51974298/deleting-empty-index-column-pandas-dataframe-labels-not-contained-in-axi", "title": "Deleting empty index column pandas dataframe - labels [&#39; &#39;] not contained in axis", "body": "<p>I have the following dataframe:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ARBU8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ARBU8.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The column <strong>numeroLote</strong> is between a range of <code>5</code> to <code>25</code> values.\nI want to create an export <code>csv</code> file to each data when <strong>numeroLote</strong> change their value and I perform the following:</p>\n\n<pre><code>for i in range(5,26):\n    print(i)\n    a = racimitos[racimitos['numeroLote']==i][['peso','fecha','numeroLote']]\n    a.to_csv('racimitos{}.csv'.format(i), sep=',', header=True, index=True)\n</code></pre>\n\n<p>And then, I get datasets similar to:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FMYW6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FMYW6.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>An additional column is generated like the one enclosed in the red box above \u2026</p>\n\n<p>I try to remove this column of the following way:</p>\n\n<pre><code>for i in range(5,26):\n    print(i)\n    a = racimitos[racimitos['numeroLote']==i][['peso','fecha','numeroLote']]\n    a.to_csv('racimitos{}.csv'.format(i), sep=',', header=True, index=True)\n    a.drop(columns=[' '], axis=1,)\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>KeyError                                  Traceback (most recent call last)\n&lt;ipython-input-18-e3ad718d5396&gt; in &lt;module&gt;()\n      9     a = racimitos[racimitos['numeroLote']==i][['peso','fecha','numeroLote']]\n     10     a.to_csv('racimitos{}.csv'.format(i), sep=',', header=True, index=True)\n---&gt; 11     a.drop(columns=[' '], axis=1,)\n\n~/anaconda3/envs/sioma/lib/python3.6/site-packages/pandas/core/indexes/base.py in drop(self, labels, errors)\n   4385             if errors != 'ignore':\n   4386                 raise KeyError(\n-&gt; 4387                     'labels %s not contained in axis' % labels[mask])\n   4388             indexer = indexer[~mask]\n   4389         return self.delete(indexer)\n\nKeyError: \"labels [' '] not contained in axis\"\n</code></pre>\n\n<p>How to can I remove this empty column index which is generated when I execute the export <code>to.csv</code> ?</p>\n"}, {"tags": ["python", "linux", "gcc", "spacy"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1534970515, "post_id": 51974294, "comment_id": 90900096, "body": "It sounds like an artifact of the developers. You may need to run <code>autoreconf -fi</code>, and then perform the configuration and build again."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1535397216, "post_id": 51974294, "comment_id": 91042166, "body": "<code>make distclean</code> is also potentially helpful, <i>if</i> this is using autoconf. If it&#39;s a custom <code>setup.py</code> / <code>setup.cfg</code>, we&#39;d need to dig into it."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1535397480, "post_id": 51974294, "comment_id": 91042275, "body": "Hmm. No references to the path in question from <a href=\"https://files.pythonhosted.org/packages/24/de/ac14cd453c98656d6738a5669f96a4ac7f668493d5e6b78227ac933c5fd4/spacy-2.0.12.tar.gz\" rel=\"nofollow noreferrer\"><code>spacy-2.0.12.tar.gz</code></a>. Can you confirm the URL to the package <code>pip</code> downloaded during this attempted install?"}], "owner": {"reputation": 1, "user_id": 9767242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2265d93188edb232ab73e55e962e0161?s=128&d=identicon&r=PG&f=1", "display_name": "lijin01ictaccn", "link": "https://stackoverflow.com/users/9767242/lijin01ictaccn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535396711, "creation_date": 1534968150, "question_id": 51974294, "link": "https://stackoverflow.com/questions/51974294/why-an-unknown-gcc-is-required-to-compile-spacy", "title": "Why an unknown gcc is required to compile spaCy?", "body": "<p>When installing spaCy under Ubuntu, but I got the following compile error.</p>\n\n<p>The installation code is simply using <code>pip install spacy</code>.</p>\n\n<p><code>/opt/rh/devtoolset-2/root/usr/bin/gcc -pthread -fPIC -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/mnt/nfs/lijin/local/opt/include/python2.7 -I/tmp/pip-install-ikyFEg/spacy/include -I/mnt/nfs/lijin/local/opt/include/python2.7 -c spacy/parts_of_speech.cpp -o build/temp.linux-x86_64-2.7/spacy/parts_of_speech.o -O2 -Wno-strict-prototypes -Wno-unused-function\n  unable to execute '/opt/rh/devtoolset-2/root/usr/bin/gcc': No such file or directory\n  error: command '/opt/rh/devtoolset-2/root/usr/bin/gcc' failed with exit status 1</code></p>\n\n<p>My system has a <code>/usr/bin/gcc</code> but not in <code>/opt/rh/xxx</code>. Can anyone help fix this problem? Thank you.</p>\n"}, {"tags": ["python", "methods"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1534968282, "post_id": 51974293, "comment_id": 90899074, "body": "For a mutable type? No, there isn&#39;t. Use immutable types (like tuples) if you want certainty. It&#39;s a good question, though."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1534968392, "post_id": 51974293, "comment_id": 90899108, "body": "You seem to be mixing up variables and objects. It&#39;s important to understand the difference between the two concepts, and how they interact. <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Ned Batchelder&#39;s article</a> is a good reference."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534968437, "post_id": 51974293, "comment_id": 90899134, "body": "Incidentally, <a href=\"http://adv-r.had.co.nz/R5.html\" rel=\"nofollow noreferrer\">R has mutable objects too</a>."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1534969028, "post_id": 51974293, "comment_id": 90899378, "body": "You could read the documentation about the specific function"}], "answers": [{"tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": false, "score": 2, "last_activity_date": 1534969405, "last_edit_date": 1534969405, "creation_date": 1534969079, "answer_id": 51974494, "question_id": 51974293, "link": "https://stackoverflow.com/questions/51974293/how-do-you-know-in-advance-if-a-method-or-function-will-alter-the-variable-whe/51974494#51974494", "title": "How do you know in advance if a method (or function) will alter the variable when called?", "body": "<p>Just checkout the doc:</p>\n\n<pre><code>&gt;&gt;&gt; list.count.__doc__\n'L.count(value) -&gt; integer -- return number of occurrences of value'\n&gt;&gt;&gt; list.append.__doc__\n'L.append(object) -&gt; None -- append object to end'\n</code></pre>\n\n<hr>\n\n<p>There isn't really an easy way to tell, but:</p>\n\n<blockquote>\n  <p>immutable object --> no way of changing through method calls</p>\n</blockquote>\n\n<p>So, for example, <code>tuple</code> has no methods which affect the tuple as it is unchangeable so methods can only return new instances.</p>\n\n<p>And if you \"wanted to see what the result of the append looked like first and then have the option to decide whether or not I want to assign it to a new variable\" then you can concatenate the list with a new list with one element.</p>\n\n<p>i.e.</p>\n\n<pre><code>&gt;&gt;&gt; l = [1,2,3]\n&gt;&gt;&gt; k = l + [4]\n&gt;&gt;&gt; l\n[1, 2, 3]\n&gt;&gt;&gt; k\n[1, 2, 3, 4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1534969131, "creation_date": 1534969131, "answer_id": 51974509, "question_id": 51974293, "link": "https://stackoverflow.com/questions/51974293/how-do-you-know-in-advance-if-a-method-or-function-will-alter-the-variable-whe/51974509#51974509", "title": "How do you know in advance if a method (or function) will alter the variable when called?", "body": "<p>Not from merely your invocation (your method call).  You can guarantee that the method won't change the object if you pass in only immutable objects, but some methods are <em>defined</em> to change the object -- and will either not be defined for the one you use, or will fault in execution.</p>\n\n<p>I Real Life, you look at the method's documentation: that will tell you exactly what happens.</p>\n\n<p>[I was about to include what Joe Iddon's answer covers ...]</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1534971278, "post_id": 51974867, "comment_id": 90900409, "body": "For the record, the confusing possibility of modifying the object in place <i>and</i> returning the object it was called on is common in some other languages (e.g. Ruby). It makes it easier to write one-liners that perform many different modifications in sequence to the same object. Python made the opposite choice, partially to make it clear when a method is mutating, and partially because they didn&#39;t want to encourage chaining method calls like that; <code>mylist.append(1).pop(0).count(3)</code> would leave doubt as to whether <code>mylist</code> was changed, and be more complex/confusing even without that doubt."}, {"owner": {"reputation": 99, "user_id": 4301136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4cca1c4c2c08d2b1c1651dca67d8f67?s=128&d=identicon&r=PG&f=1", "display_name": "Miles Coltrane", "link": "https://stackoverflow.com/users/4301136/miles-coltrane"}, "edited": false, "score": 0, "creation_date": 1534974664, "post_id": 51974867, "comment_id": 90901717, "body": "That&#39;s a fair point about efficiency. I don&#39;t mind mutating in place, I just mind not knowing in advance that it&#39;s gonna happen.  :)  Thanks for the detailed answer. And thanks to everyone else for all the comments."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1534970800, "creation_date": 1534970800, "answer_id": 51974867, "question_id": 51974293, "link": "https://stackoverflow.com/questions/51974293/how-do-you-know-in-advance-if-a-method-or-function-will-alter-the-variable-whe/51974867#51974867", "title": "How do you know in advance if a method (or function) will alter the variable when called?", "body": "<p>Aside from reading the documentation (which for some methods will include type annotations specifying the return value) or playing with the method in the interactive interpreter (including using <code>help()</code> to check the docstring for a type annotation), no, you can't know up front just by looking at the method.</p>\n\n<p>That said, the behavior you're seeing is intentional. <strong>Python methods <em>either</em> return a <em>new</em> modified copy of the object <em>or</em> modify the object in place; at least among built-ins, they never do both</strong> (some methods mutate the object and return a non-<code>None</code> value, but it's never the object just mutated; the <code>pop</code> method of <code>dict</code> and <code>list</code> is an example of this case).</p>\n\n<p>This either/or behavior is intentional; if they didn't obey this rule, you'd have had an even more confusing and hard to identify problem, namely, determining whether <code>append</code> mutated the value it was called on, or returned a new object. You definitely got back a <code>list</code>, but is it a new <code>list</code> or the same <code>list</code>? If it mutated the value it was called on, then</p>\n\n<pre><code>newlist = mylist.append(9)\n</code></pre>\n\n<p>is a little strange; <code>newlist</code> and <code>mylist</code> would be aliases to the same <code>list</code> (so why have both names?). You might not even notice for a while; you'd continue using <code>newlist</code>, thinking it was independent of <code>mylist</code>, only to look at <code>mylist</code> and discover it was all messed up. By having all such \"modify in place\" methods return <code>None</code> (or at least, not the original object), the error is discovered more quickly/easily; if you try and use <code>newlist</code>, mistakenly believing it to be a <code>list</code>, you'll immediately get <code>TypeError</code>s or <code>AttributeError</code>s.</p>\n\n<p>Basically, the only way to know in advance is to read the documentation. For methods whose name indicates a modifying operation, you can check the return value and often get an idea as to whether they're mutating. It helps to know what types are mutable in the first place; <code>list</code>, <code>dict</code>, <code>set</code> and <code>bytearray</code> are all mutable, and the methods they have that their immutable counterparts (aside from <code>dict</code>, which has no immutable counterpart) lack tend to mutate the object in place.</p>\n\n<p>The default tends to be to mutate the object in place simply because that's more efficient; if you have a 100,000 element <code>list</code>, a default behavior for <code>append</code> that made a new 100,001 element <code>list</code> and returned it would be extremely inefficient (and there would be no obvious way to avoid it). For immutable types (e.g. <code>str</code>, <code>tuple</code>, <code>frozenset</code>) this is unavoidable, and you can use those types if you want a guarantee that the object is never mutate in place, but it comes at a cost of unnecessary creation and destruction of objects that will slow down your code in most cases.</p>\n"}], "owner": {"reputation": 99, "user_id": 4301136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4cca1c4c2c08d2b1c1651dca67d8f67?s=128&d=identicon&r=PG&f=1", "display_name": "Miles Coltrane", "link": "https://stackoverflow.com/users/4301136/miles-coltrane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 4, "accepted_answer_id": 51974867, "answer_count": 3, "score": 6, "last_activity_date": 1534970800, "creation_date": 1534968138, "last_edit_date": 1534968846, "question_id": 51974293, "link": "https://stackoverflow.com/questions/51974293/how-do-you-know-in-advance-if-a-method-or-function-will-alter-the-variable-whe", "title": "How do you know in advance if a method (or function) will alter the variable when called?", "body": "<p>I am new to Python from R. I have recently spent a lot of time reading up on how everything in Python is an object, objects can call methods on themselves, methods are functions within a class, yada yada yada.</p>\n\n<p>Here's what I don't understand. Take the following simple code:</p>\n\n<pre><code>mylist = [3, 1, 7]\n</code></pre>\n\n<p>If I want to know how many times the number 7 occurs, I can do:</p>\n\n<pre><code>mylist.count(7)\n</code></pre>\n\n<p>That, of course, returns 1. And if I want to save the count number to another variable:</p>\n\n<pre><code>seven_counts = mylist.count(7)\n</code></pre>\n\n<p>So far, so good. Other than the syntax, the behavior is similar to R. However, let's say I am thinking about adding a number to my list:</p>\n\n<pre><code>mylist.append(9)\n</code></pre>\n\n<p>Wait a minute, that method actually changed the variable itself! (i.e., \"mylist\" has been altered and now includes the number 9 as the fourth digit in the list.) Assigning the code to a new variable (like I did with seven_counts) produces garbage:</p>\n\n<pre><code>newlist = mylist.append(9)\n</code></pre>\n\n<p>I find the inconsistency in this behavior a bit odd, and frankly undesirable. (Let's say I wanted to see what the result of the append looked like first and then have the option to decide whether or not I want to assign it to a new variable.)</p>\n\n<p>My question is simple:</p>\n\n<p>Is there a way to know in advance if calling a particular method will actually alter your variable (object)?</p>\n"}]