[{"tags": ["python", "pandas", "csv", "pandas-groupby"], "comments": [{"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1575504312, "post_id": 59186298, "comment_id": 104592854, "body": "If a movie has multiple genres, should the movie be assigned to multiple genres (thus duplicating the gross income), or should it be assigned to one genre (which keeps the whole dataset gross income constant)?"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 1, "creation_date": 1575504346, "post_id": 59186298, "comment_id": 104592862, "body": "I asked this same question of my professor and he said to add the income to both genres even though obviously this will lead to more income being shown in the graph than was actually brought in in the graphical representation"}, {"owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "edited": false, "score": 1, "creation_date": 1575506096, "post_id": 59186298, "comment_id": 104593265, "body": "@Banani720 Could you provide a sample line of data for one movie?"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1575507295, "post_id": 59186298, "comment_id": 104593527, "body": "Yes I stepped out to take my brother to soccer practice but should be back in ~1hr"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575516340, "post_id": 59186298, "comment_id": 104595376, "body": "Please include data as text in the post itself, not as an image. Can you also share <b>all</b> relevant code and data? See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1575515882, "post_id": 59186673, "comment_id": 104595274, "body": "I tried to apply this method and I am getting an error where you have <code>genres = item[1][1].split(&quot;|&quot;)</code> is giving me an index out of range error"}, {"owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1575516631, "post_id": 59186673, "comment_id": 104595423, "body": "@Banani720 this is where migrating it to your own dataset will change how you have to split it. Look at the variable I set n the first line, that item[1] = &#39;1,000,000&#39; item[1][1] = &#39;Action|Comedy|Drama&#39;"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1575517446, "post_id": 59186673, "comment_id": 104595604, "body": "So if I am translating this into my data set, where you have <code>Stack Overflow</code> this is the movie name. In my case, the genre is in column 9 so it would be <code>item[1][9]</code>?"}, {"owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1575519682, "post_id": 59186673, "comment_id": 104596113, "body": "Yes, correct. Just map your indexes to where they sit within your dataset"}], "tags": [], "owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "is_accepted": true, "score": 1, "last_activity_date": 1575508178, "last_edit_date": 1575508178, "creation_date": 1575507238, "answer_id": 59186673, "question_id": 59186298, "link": "https://stackoverflow.com/questions/59186298/how-to-split-values-from-a-csv-file-in-python-using-pandas-or-otherwise/59186673#59186673", "title": "How to split values from a CSV file in python using pandas or otherwise?", "body": "<p>Given you said this is an assignment, here is a way this could be achieved using a similar data set, once you understand you should be able to apply it to your own dataset.</p>\n\n<p>You are spot on with the assumption split can be utilized to achieve the result.</p>\n\n<pre><code>movie = [['StackOverflow', ['1,000,000', 'Action|Comedy|Drama']]]\nresult = []\n\nfor item in movie:\n    value = []\n    genres = item[1][1].split('|')\n    for v in genres:\n        value.append((v, item[1][0]))\n    result.append([item[0], value])\n\nprint(result)\n#[[MovieName, [(Genre, Gross)]], [MovieName, [(Genre, Gross)]]]\n&gt;&gt;&gt;[['StackOverflow', [('Action', '1,000,000'), ('Comedy', '1,000,000'), ('Drama', '1,000,000')]]]\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 59186673, "answer_count": 1, "score": 1, "last_activity_date": 1575516487, "creation_date": 1575503960, "last_edit_date": 1575516487, "question_id": 59186298, "link": "https://stackoverflow.com/questions/59186298/how-to-split-values-from-a-csv-file-in-python-using-pandas-or-otherwise", "title": "How to split values from a CSV file in python using pandas or otherwise?", "body": "<p>For an assignment, I am given a CSV file with various bits of data about a bunch of movies. One of the columns of the CSV is titled 'Genre' which ostensibly gives the genre of the movie and we are also given the gross income of the movie. In the genres column, many of the movies have multiple genres attached to them such as 'Action', 'Comedy', 'Drama' etc. with each genre separated by the character <code>|</code> when there is more than one genre attached to a movie. I am asked to plot a bar graph that shows the gross total income of each movie by genre where my horizontal (or x-axis) is the genre and the vertical (or y-axis) is the dollar amount that each genre has supposedly brought in. </p>\n\n<p>Thus far I have managed to extract just the genre and gross columns using pandas</p>\n\n<pre><code>#DataFrame is denoted by variable name movie_data\n\n\ngenre_and_gross = movie_data[['gross','genres']]\n\n</code></pre>\n\n<p>Where I am getting stuck here is that I cannot just simply use <code>pd.dF.groupBy.sum()</code> because I have multiple genres per cell in some cases and that wouldn't give me the data that I need. Is there a way to utilize the <code>split()</code> function perhaps to so that if a cell had a gross of 1 million dollars and was given the genres action and comedy, I would be able to add 1 million dollars to both the values of genre and comedy when I did my bar graph?</p>\n\n<p>For reference, this is an example of a line of the CSV File:</p>\n\n<pre><code>Color,James Cameron,723,178,0,855,Joel David Moore,1000,760505847,Action|Adventure|Fantasy|Sci-Fi,CCH Pounder,Avatar\u00a0,886204,4834,Wes Studi,0,avatar|future|marine|native|paraplegic,http://www.imdb.com/title/tt0499549/?ref_=fn_tt_tt_1,3054,English,USA,PG-13,237000000,2009,936,7.9,1.78,33000\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 12482781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca45bc7650e9bc7093514871486bf37?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/12482781/andy"}, "edited": false, "score": 0, "creation_date": 1575506181, "post_id": 59186407, "comment_id": 104593285, "body": "Tried this. Does not really work. I have multiple axes (plotting 2 figures each with 2 histograms side by side) so the new xtick goes over to the next plot. Also now I see that the bar isnt really at 6000 but before that in my OP. I expect it to be at 6000."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "reply_to_user": {"reputation": 35, "user_id": 12482781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca45bc7650e9bc7093514871486bf37?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/12482781/andy"}, "edited": false, "score": 0, "creation_date": 1575506403, "post_id": 59186407, "comment_id": 104593335, "body": "&quot;Also now I see that the bar isnt really at 6000 but before that&quot;  this is bacause how you defined your bins. You can either adjust that , or where you plot the bar relative to the bin center."}, {"owner": {"reputation": 35, "user_id": 12482781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca45bc7650e9bc7093514871486bf37?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/12482781/andy"}, "edited": false, "score": 0, "creation_date": 1575506677, "post_id": 59186407, "comment_id": 104593392, "body": "Ok Thanks. I guess I will read more into this. Any idea how to change the xtick label using ax and not plt?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "reply_to_user": {"reputation": 35, "user_id": 12482781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca45bc7650e9bc7093514871486bf37?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/12482781/andy"}, "edited": false, "score": 0, "creation_date": 1575507251, "post_id": 59186407, "comment_id": 104593520, "body": "Check update..."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1575507608, "post_id": 59186407, "comment_id": 104593592, "body": "plt.sca is smelly code"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1575507775, "post_id": 59186407, "comment_id": 104593632, "body": "@MadPhysicist in what way?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1575510060, "post_id": 59186407, "comment_id": 104594112, "body": "You&#39;re switching from the oo interface to the plt one after setting up the oo controls"}], "tags": [], "owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "is_accepted": true, "score": 1, "last_activity_date": 1575507140, "last_edit_date": 1575507140, "creation_date": 1575504790, "answer_id": 59186407, "question_id": 59186269, "link": "https://stackoverflow.com/questions/59186269/change-x-axis-tick-label-in-matplotlib-axes/59186407#59186407", "title": "Change x-axis tick label in matplotlib axes", "body": "<p>Something like this should work:</p>\n\n<pre><code>ticks, labels = plt.xticks()\nlabels[-1].set_text('6000+')\nplt.xticks(ticks, labels)\n</code></pre>\n\n<p>Update:\nYou can do it all manually:</p>\n\n<pre><code>bins= np.arange(0, 6000, 100)\nplt.sca(ax[0])\nplt.hist(np.clip(x1, bins[0], bins[-1]),  bins=bins,  weights=weights1, \n           alpha =.5, label = \"A\", color = \"blue\")\nplt.xticks([0,2000,4000,6000], ['0','2000','4000','6000+'])\n\nplt.sca(ax[1])\nplt.hist(np.clip(x2, bins[0], bins[-1]),  bins=bins,  weights=weights2, \n           alpha =.5, label = \"B\", color = \"red\")\nplt.xticks([0,2000,4000,6000], ['0','2000','4000','6000+'])\n</code></pre>\n\n<p>In theory this should work too, but for some reason not... If someone can shed light on this issue... ?</p>\n\n<pre><code>plt.sca(ax[1])\nplt.hist(np.clip(x2, bins[0], bins[-1]),  bins=bins,  weights=weights2, \n           alpha =.5, label = \"B\", color = \"red\")\nticks, labels = plt.xticks()\nlabels[-1].set_text('6000+')\nplt.xticks(ticks, labels)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12482781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca45bc7650e9bc7093514871486bf37?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/12482781/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1575507764, "accepted_answer_id": 59186407, "answer_count": 1, "score": 1, "last_activity_date": 1575507387, "creation_date": 1575503665, "last_edit_date": 1575507387, "question_id": 59186269, "link": "https://stackoverflow.com/questions/59186269/change-x-axis-tick-label-in-matplotlib-axes", "closed_reason": "Duplicate", "title": "Change x-axis tick label in matplotlib axes", "body": "<p>I am plotting two normalized histograms in the same plot using axes and want to have a bin that catches any value higher than 6000. This is what I have done so far:-</p>\n\n<pre><code>fig,ax=plt.subplots(1,2)\nx1 = (60, 80, 1000, 7000, 8000)\nx2 = (9000, 10000, 11000, 12000, 13000)\n\n\nweights1= np.ones_like(x1)/float(len(x1))\nweights2= np.ones_like(x2)/float(len(x2))\n\nbins= np.arange(0, 6000, 100)\nax[0].hist(np.clip(x1, bins[0], bins[-1]),  bins=bins,  weights=weights1, \n           alpha =.5, label = \"A\", color = \"blue\")\nax[1].hist(np.clip(x2, bins[0], bins[-1]),  bins=bins,  weights=weights2, \n           alpha =.5, label = \"B\", red = \"red\")\nplt.show()\n</code></pre>\n\n<p>This is what I get: \n<a href=\"https://i.stack.imgur.com/HlzAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HlzAm.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I change the x tick label at 6000 to 6000+ to show that it captures all observations above that?</p>\n"}, {"tags": ["python", "emacs", "org-babel", "emacs-lsp"], "comments": [{"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 1, "creation_date": 1575506933, "post_id": 59186253, "comment_id": 104593450, "body": "this must be an issue specific to <code>lsp-mode</code> (probably requiring a file associated with the buffer), as <code>company-anaconda</code> works fine in this case"}, {"owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575508420, "post_id": 59186253, "comment_id": 104593771, "body": "ty. @picklerick tI use doom-emacs he problem troubled me long ago when I employed company-anaconda, so switched to lsp-mode. My colleagues do not encounter such problems."}], "owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575506945, "creation_date": 1575503529, "last_edit_date": 1575506945, "question_id": 59186253, "link": "https://stackoverflow.com/questions/59186253/tab-completion-does-not-work-in-python-org-src", "title": "Tab completion does not work in python org src", "body": "<p>I set up a python org src </p>\n\n<pre><code>#+BEGIN_SRC python :results output\nimport sys\n\nprint(sys.version)\nprint(sys.version_info)\n\n#+END_SRC\n\n#+RESULTS:\n: 3.7.4 (default, Aug 13 2019, 20:35:49) \n: [GCC 7.3.0]\n: sys.version_info(major=3, minor=7, micro=4, releaselevel='final', serial=0)\n</code></pre>\n\n<p>After strike <code>C-'</code> to invoke a code buffer, the tab completion refused to work as intented.  </p>\n\n<p>Even though activated the python-mode and lsp-mode</p>\n\n<p><a href=\"https://i.stack.imgur.com/IaoG1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IaoG1.png\" alt=\"enter image description here\"></a></p>\n\n<p>ob-ipython did not work as well.</p>\n\n<pre><code>#+begin_src emacs-lisp :tangle yes :results output\n(print (emacs-version))\n(print (org-version))\n#+end_src\n\n#+RESULTS:\n: \n: \"GNU Emacs 26.3 (build 2, x86_64-pc-linux-gnu, GTK+ Version 3.24.11)\n:  of 2019-09-23, modified by Debian\"\n: \n: \"9.3\"\n</code></pre>\n"}, {"tags": ["python", "string", "python-3.7"], "comments": [{"owner": {"reputation": 591, "user_id": 6847387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/358c5407b33b445a989873d98a096ae3?s=128&d=identicon&r=PG&f=1", "display_name": "shkim", "link": "https://stackoverflow.com/users/6847387/shkim"}, "edited": false, "score": 0, "creation_date": 1575503725, "post_id": 59186233, "comment_id": 104592702, "body": "i don&#39;t know why image doesn&#39;t uploaded. so i add my code and execution result as text."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1575503904, "post_id": 59186233, "comment_id": 104592738, "body": "I reversed my downvote on the basis of you you converting the images to text. You shouldn&#39;t have been posting images of code in the first place. This is not.. great... but it&#39;s much better, thanks."}, {"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1575504527, "post_id": 59186233, "comment_id": 104592909, "body": "<code>strip()</code> removes characters only from edges of the string. When converting bytes to string, you add quotes on the edges of the string, so nothing is removed."}], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 5, "last_activity_date": 1575504339, "creation_date": 1575504339, "answer_id": 59186349, "question_id": 59186233, "link": "https://stackoverflow.com/questions/59186233/strip-method-does-not-work-on-str-class/59186349#59186349", "title": "strip() method does not work on str class", "body": "<p>When passed a <code>bytes</code> object without an <code>encoding</code> argument, the <code>str</code> function would simply call the <code>repr</code> function to return the string representation of the given <code>bytes</code> object, which is why <code>str(myteststring)</code> returns <code>\"b'asdf\\\\r\\\\n'\"</code>, with <code>\\r\\n</code> escaped with additional backslashes.</p>\n\n<p>You can properly convert a <code>bytes</code> object to a string by passing to the <code>str</code> function an <code>encoding</code> argument instead:</p>\n\n<pre><code>&gt;&gt;&gt; myteststring=b'asdf\\r\\n'\n&gt;&gt;&gt; str(myteststring, encoding='utf-8')\n'asdf\\r\\n'\n&gt;&gt;&gt; str(myteststring, encoding='utf-8').strip()\n'asdf'\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 6847387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/358c5407b33b445a989873d98a096ae3?s=128&d=identicon&r=PG&f=1", "display_name": "shkim", "link": "https://stackoverflow.com/users/6847387/shkim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59186349, "answer_count": 1, "score": 0, "last_activity_date": 1575505600, "creation_date": 1575503413, "last_edit_date": 1575505600, "question_id": 59186233, "link": "https://stackoverflow.com/questions/59186233/strip-method-does-not-work-on-str-class", "title": "strip() method does not work on str class", "body": "<p>First, I have <code>bytes</code> class object \"myst\". I then convert it to a <code>str</code> class using <code>str()</code>, and remove the whitespace using the <code>strip()</code> method. The problem is that the whitespace \"\\r\\n\" is not removed.</p>\n\n<pre><code>&gt;&gt;&gt; myteststring=b'asdf\\r\\n'\n&gt;&gt;&gt; str(myteststring)\n\"b'asdf\\\\r\\\\n'\"\n&gt;&gt;&gt; str(myteststring).strip()\n\"b'asdf\\\\r\\\\n'\"\n</code></pre>\n\n<p>But, using the <code>strip()</code> method on a <code>byte</code> class works properly.</p>\n\n<pre><code>&gt;&gt;&gt; byteclass=b'asdf\\r\\n'\n&gt;&gt;&gt; byteclass.strip()\nb'asdf'\n</code></pre>\n\n<p>What's wrong here?</p>\n\n<hr>\n\n<p>I think when I use <code>str()</code>, the resulting string includes double back slash <code>\\\\</code>. This is may be root of my problem. </p>\n\n<pre><code>&gt;&gt;&gt; myteststring\nb'asdf\\r\\n'\n&gt;&gt;&gt; str(myteststring)\n\"b'asdf\\\\r\\\\n'\"   # &lt;&lt; this is problem ??\n</code></pre>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1575504088, "post_id": 59186217, "comment_id": 104592791, "body": "It&#39;s hard to understand from your description where&#39;s the problem. Can you edit your question and add some sample input and expected output?"}, {"owner": {"reputation": 1, "user_id": 5321376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbc5b61b0dcb68a5758822d97c05a40?s=128&d=identicon&r=PG&f=1", "display_name": "sebd44", "link": "https://stackoverflow.com/users/5321376/sebd44"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1575505127, "post_id": 59186217, "comment_id": 104593052, "body": "hi, i want to search for a following word after a match"}, {"owner": {"reputation": 1, "user_id": 5321376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbc5b61b0dcb68a5758822d97c05a40?s=128&d=identicon&r=PG&f=1", "display_name": "sebd44", "link": "https://stackoverflow.com/users/5321376/sebd44"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1575505633, "post_id": 59186217, "comment_id": 104593170, "body": "hi, i want to search for a following word after a match, so when if i search in a string &quot;i use a table blue&quot; with (\\w+) with that regex i solver the problem, but &quot;i use a table blue-green-red&quot; so how can i get the entire word without using the (\\w+).(\\w+).(\\w+) n number of times. how can i get that, but there is always a carriage return after the &quot;i use a table blue-green-red\\n&quot;  or  &quot;i use a table blue\\n&quot; so how can i get the following entire word  even if there are n number of dash in the following word"}, {"owner": {"reputation": 1, "user_id": 5321376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbc5b61b0dcb68a5758822d97c05a40?s=128&d=identicon&r=PG&f=1", "display_name": "sebd44", "link": "https://stackoverflow.com/users/5321376/sebd44"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1575505669, "post_id": 59186217, "comment_id": 104593178, "body": "hi i edit the question for you to help me"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1575505927, "post_id": 59186217, "comment_id": 104593232, "body": "So you want to match string <code>&quot;i use a table blue&quot;</code> inside the text <code>&quot;i use a table blue-green-red\\n&quot;</code>?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575516602, "post_id": 59186217, "comment_id": 104595416, "body": "This still isn\u2019t clear. You aren\u2019t actually explaining what you\u2019re trying to do, nor your current solution. Once you\u2019ve rewritten your question into something which is easy to read and understand, it might be good to include some (properly formatted) examples."}], "answers": [{"comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1575516688, "post_id": 59186987, "comment_id": 104595434, "body": "RegEx101 is always a helpful recommendation, such a practical tool!"}, {"owner": {"reputation": 1, "user_id": 5321376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbc5b61b0dcb68a5758822d97c05a40?s=128&d=identicon&r=PG&f=1", "display_name": "sebd44", "link": "https://stackoverflow.com/users/5321376/sebd44"}, "edited": false, "score": 1, "creation_date": 1575586396, "post_id": 59186987, "comment_id": 104626739, "body": "thanks a lot mate you understand what i tryed in the last part, thnks a lot mate, and for the link for regular expression, yep it was correct there is always a carriage return at the end of the line, but may or may not come with 1, 2 or 3 dashes, thanks a lot for your time, i give  the correct answer"}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1575593293, "post_id": 59186987, "comment_id": 104628542, "body": "Happy to help!!"}], "tags": [], "owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "is_accepted": true, "score": 0, "last_activity_date": 1575509912, "creation_date": 1575509912, "answer_id": 59186987, "question_id": 59186217, "link": "https://stackoverflow.com/questions/59186217/python-search-word-after-match-dash/59186987#59186987", "title": "python search word after match dash", "body": "<p>If I understand correctly, what you are trying to extract is the <em>last word</em> (or <em>trailing word</em>) in the matched search, even if it has dashes. You also indicate that you are guaranteed a newline <code>\\n</code> at the end of the phrase.</p>\n\n<p>With that in mind, a possible solution would be to include a greedy operator right after the word \\w, and curb it with a newline, something like:</p>\n\n<pre><code>regex = r\"i use a table (\\w+.*)\\n\"\n</code></pre>\n\n<p>which matches both:</p>\n\n<pre><code>\"i use a table blue\\n\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>\"i use a table blue-green-red\\n\"\n</code></pre>\n\n<p>extracting the last word.</p>\n\n<p>See it in action here: <a href=\"https://regex101.com/r/34MBP3/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/34MBP3/1</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5321376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbc5b61b0dcb68a5758822d97c05a40?s=128&d=identicon&r=PG&f=1", "display_name": "sebd44", "link": "https://stackoverflow.com/users/5321376/sebd44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 59186987, "answer_count": 1, "score": -2, "last_activity_date": 1575683737, "creation_date": 1575503324, "last_edit_date": 1575683737, "question_id": 59186217, "link": "https://stackoverflow.com/questions/59186217/python-search-word-after-match-dash", "title": "python search word after match dash", "body": "<p>ihi, I want to search for a following word after a match, so when if i search in a string <code>\"i use a table blue\"</code> with (\\w+) with that regex i solver the problem, but <code>\"i use a table blue-green-red\"</code> so how can i get the entire word without using the (\\w+).(\\w+).(\\w+) n number of times. how can i get that, but there is always a carriage return after the <code>\"i use a table blue-green-red\\n\"</code>  or  <code>\"i use a table blue\\n\"</code> so how can i get the following entire word  even if there are n number of dash in the following word</p>\n"}, {"tags": ["python", "graph"], "comments": [{"owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "edited": false, "score": 0, "creation_date": 1575503456, "post_id": 59186204, "comment_id": 104592630, "body": "Do you mean matplotlib graphs, or node-edge graphs from something like NetworkX?"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 9963746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oovbv.jpg?s=128&g=1", "display_name": "Liam Plybon", "link": "https://stackoverflow.com/users/9963746/liam-plybon"}, "is_accepted": true, "score": 1, "last_activity_date": 1575508705, "creation_date": 1575508705, "answer_id": 59186839, "question_id": 59186204, "link": "https://stackoverflow.com/questions/59186204/is-there-any-way-to-save-all-graphs-generated-using-the-script-to-a-single-file/59186839#59186839", "title": "Is there any way to save all graphs generated using the script to a single file (image preferably)", "body": "<p>If you are using matplotlib, it would be easiest to use the subplots feature. This will make all of your graphs part of a single object, which can be saved as an image like you want. I would redirect you to the matplotlib website for a ton of good example on the subject. <a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.subplots.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.subplots.html</a></p>\n\n<p>Then, do </p>\n\n<pre><code>fig.savefig('mysweetsubplots.png')\n</code></pre>\n\n<p>and you are done.</p>\n"}], "owner": {"reputation": 29, "user_id": 11560481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W4otG.jpg?s=128&g=1", "display_name": "Kilgore Trout", "link": "https://stackoverflow.com/users/11560481/kilgore-trout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 59186839, "answer_count": 1, "score": -1, "last_activity_date": 1575508705, "creation_date": 1575503233, "question_id": 59186204, "link": "https://stackoverflow.com/questions/59186204/is-there-any-way-to-save-all-graphs-generated-using-the-script-to-a-single-file", "title": "Is there any way to save all graphs generated using the script to a single file (image preferably)", "body": "<p>The scripts I use generate a lot of graphs. I was wondering if there was a way to save them or specified ones into a single file as image or pdf for quicklooks.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1575503215, "post_id": 59186194, "comment_id": 104592568, "body": "Can you provide an example for <code>data</code> and what you expect <code>result</code> to be at the end?"}, {"owner": {"reputation": 67, "user_id": 6684132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZaTz7.jpg?s=128&g=1", "display_name": "d s", "link": "https://stackoverflow.com/users/6684132/d-s"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1575503296, "post_id": 59186194, "comment_id": 104592591, "body": "#example for positive numbers is working fine     data = I2C.read_i2c_block_data(I2CAddress, I2CRegister, 4)  result = 0  for b in data:     result = result * 256 + int(b)    an arduino is sending a negative integer as a byte array over I2C.  In data variable the array looks like: 0xff 0xff 0xff 0xe7  this is the representation of -25 integer as a byte array. So how can i convert that back using basic algorithm or existing methods which are supported in python 2.7.9"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1575503334, "post_id": 59186194, "comment_id": 104592603, "body": "Side note: when manipulating binary data, we typically use binary operators like <code>&lt;&lt;</code>, <code>&amp;</code> and <code>|</code> instead of arithmetic operators like <code>*</code> and <code>+</code>. Changing to these won&#39;t necessarily solve your current problem, but it is good to learn how to use these operators."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1575504464, "post_id": 59186194, "comment_id": 104592887, "body": "Side-note: Migrating to Python 3 would make this <i>much</i> simpler and <i>much</i> more efficient, thanks to <a href=\"https://docs.python.org/3/library/stdtypes.html#int.from_bytes\" rel=\"nofollow noreferrer\">the <code>int.from_bytes</code> alternate constructor</a> (which can interpret as signed or unsigned values)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1575504590, "post_id": 59186194, "comment_id": 104592922, "body": "Also note: If the bytes in question are encoded C type <code>int</code>s, the <code>struct</code> module is the way to handle this, e.g. <code>struct.unpack(&#39;&gt;i&#39;, bytearray([0xff, 0xff, 0xff, 0xe7]))[0]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1575504938, "last_edit_date": 1575504938, "creation_date": 1575503529, "answer_id": 59186252, "question_id": 59186194, "link": "https://stackoverflow.com/questions/59186194/python-convert-bytes-to-signed-integer-wanna-have-a-negative-integer-as-a-resul/59186252#59186252", "title": "Python convert bytes to signed integer (wanna have a negative integer as a result)", "body": "<p>Once you find the unsigned <code>result</code> using the above method, you can convert it to a signed integer:</p>\n\n<pre><code>max_int = 2**(8*len(data)-1)-1\nresult = result - (2 * (max_int + 1) if result &gt; max_int else 0)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6684132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZaTz7.jpg?s=128&g=1", "display_name": "d s", "link": "https://stackoverflow.com/users/6684132/d-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "closed_date": 1575504977, "accepted_answer_id": 59186252, "answer_count": 1, "score": 2, "last_activity_date": 1575504991, "creation_date": 1575503132, "last_edit_date": 1575504374, "question_id": 59186194, "link": "https://stackoverflow.com/questions/59186194/python-convert-bytes-to-signed-integer-wanna-have-a-negative-integer-as-a-resul", "closed_reason": "Duplicate", "title": "Python convert bytes to signed integer (wanna have a negative integer as a result)", "body": "<p>I am struggeling to convert a byte array (bytes) back to a singed integer. I found a lot of examples which are valid for having positive integers after the conversion but no working example how to handle a negative number.</p>\n\n<pre><code>#example for positive numbers is working fine    \ndata = I2C.read_i2c_block_data(I2CAddress, I2CRegister, 4)\n\nresult = 0\n\nfor b in data:\n    result = result * 256 + int(b)\n</code></pre>\n\n<p>I am running python on a raspberry with python version 2.7.9.</p>\n\n<p>It would be nice to get a basic algorithm for that.</p>\n\n<p>My goal is to convert the byte array from variable data back to a negative number.</p>\n\n<p>variable data has these items in its array:</p>\n\n<pre><code>[0xff, 0xff, 0xff, 0xe7]\n</code></pre>\n\n<p>Target negative number is <code>-25</code> (which is obviously <code>0xe7</code>)</p>\n\n<p>Cheers</p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1575503128, "post_id": 59186167, "comment_id": 104592542, "body": "I think you may use <code>re.sub(r&quot;^(-)|[^0-9.]&quot;, r&quot;\\1&quot;, value)</code>"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1575503170, "post_id": 59186167, "comment_id": 104592554, "body": "Hint: You have to look behind that there is not any character."}], "answers": [{"tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1575506716, "creation_date": 1575506716, "answer_id": 59186620, "question_id": 59186167, "link": "https://stackoverflow.com/questions/59186167/regex-match-a-character-except-at-the-beginning-of-a-string/59186620#59186620", "title": "Regex: match a character except at the beginning of a string", "body": "<p>The simplest solution to remove a character from a string that is not at the beginning is to use a <code>(?!^)</code> / <code>(?!\\A)</code> negative lookahead. However, you can't just use <code>re.sub(r\"(?!^)[^0-9.]\",'',value)</code> as it won't remove non-hyphen chars either, while your scenario implies you expect to only keep a hyphen at the start.</p>\n\n<p>Thus, in Python 3.5 and newer you may use (see <a href=\"https://regex101.com/r/XFpq2k/1\" rel=\"nofollow noreferrer\">demo</a>):</p>\n\n<pre><code>re.sub(r\"^(-)|[^0-9.]+\", r\"\\1\", value)\n</code></pre>\n\n<p>Or, you may fall back to</p>\n\n<pre><code>re.sub(r\"(?!^)-|[^0-9.-]+\", \"\", value)   # This one is somewhat easier to understand\nre.sub(r\"-(?&lt;!^-)|[^0-9.-]+\", \"\", value) # This one is a bit more efficient\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/XFpq2k/2\" rel=\"nofollow noreferrer\">demo #1</a> and <a href=\"https://regex101.com/r/XFpq2k/3\" rel=\"nofollow noreferrer\">demo #2</a>.</p>\n\n<p>Both <code>-(?&lt;!^-)</code> and <code>(?!^)-</code> match a <code>-</code> that is not at the start of  a string.</p>\n"}], "owner": {"reputation": 1434, "user_id": 5799673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f1eb668cc8e910aba87ad3d0502d7da0?s=128&d=identicon&r=PG&f=1", "display_name": "ebbishop", "link": "https://stackoverflow.com/users/5799673/ebbishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 59186620, "answer_count": 1, "score": 1, "last_activity_date": 1575506716, "creation_date": 1575502879, "question_id": 59186167, "link": "https://stackoverflow.com/questions/59186167/regex-match-a-character-except-at-the-beginning-of-a-string", "title": "Regex: match a character except at the beginning of a string", "body": "<p>I'm trying to strip a character from a string, unless that character is at the beginning of a string.</p>\n\n<p>So far, my code looks like this:</p>\n\n<pre><code>def strip_string(value):\n  return re.sub(r\"[^0-9\\.]\",'',value)\n\n# strip_string('1-23') =&gt; '123'\n</code></pre>\n\n<p>I want to remove only the dashes that <strong>aren't</strong> the first character though:</p>\n\n<p><code>strip_string('-1-23') =&gt; '-123'</code></p>\n\n<p>I know how to target dashes that are the first character (<code>r\"^-\"</code>), but not the inverse.</p>\n\n<p>Is it possible to do this, or do I need to go about it differently?</p>\n"}, {"tags": ["python", "docker", "python-3.6", "alpine"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1575503323, "post_id": 59186113, "comment_id": 104592598, "body": "use a different docker image, isn&#39;t that the point?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 2, "creation_date": 1575503399, "post_id": 59186113, "comment_id": 104592615, "body": "also you are probably looking for <code>python3</code> as you can see here --&gt; <a href=\"https://pkgs.alpinelinux.org/packages?name=python3&amp;branch=v3.9\" rel=\"nofollow noreferrer\">pkgs.alpinelinux.org/packages?name=python3&amp;branch=v3.9</a>"}, {"owner": {"reputation": 10144, "user_id": 7256341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RXEvi.jpg?s=128&g=1", "display_name": "valiano", "link": "https://stackoverflow.com/users/7256341/valiano"}, "edited": false, "score": 1, "creation_date": 1575528511, "post_id": 59186113, "comment_id": 104598743, "body": "@pms <code>python3</code> version on Alpine 3.9 is currently 3.6.9, so you should be good."}, {"owner": {"reputation": 909, "user_id": 1565154, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/91bc8bf750ff3214810206a722c87773?s=128&d=identicon&r=PG", "display_name": "pms", "link": "https://stackoverflow.com/users/1565154/pms"}, "reply_to_user": {"reputation": 10144, "user_id": 7256341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RXEvi.jpg?s=128&g=1", "display_name": "valiano", "link": "https://stackoverflow.com/users/7256341/valiano"}, "edited": false, "score": 0, "creation_date": 1575572949, "post_id": 59186113, "comment_id": 104621345, "body": "@valiano Yes you are right, but I noticed that anything from <code>edge</code> is polled into my alpine 3.9 as well. That&#39;s why default python version was 3.8. Just needed to keep a specific version of python as explained here: <code>https:&#47;&#47;wiki.alpinelinux.org&#47;wiki&#47;Alpine_Linux_package_manag&zwnj;&#8203;ement#Advanced_APK_U&zwnj;&#8203;sage</code>"}], "answers": [{"comments": [{"owner": {"reputation": 909, "user_id": 1565154, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/91bc8bf750ff3214810206a722c87773?s=128&d=identicon&r=PG", "display_name": "pms", "link": "https://stackoverflow.com/users/1565154/pms"}, "edited": false, "score": 0, "creation_date": 1575573136, "post_id": 59196600, "comment_id": 104621440, "body": "Thanks. I am using <code>https:&#47;&#47;wiki.alpinelinux.org&#47;wiki&#47;Alpine_Linux_package_manag&zwnj;&#8203;ement#Advanced_APK_U&zwnj;&#8203;sage</code> convention for versioning of required softwares"}], "tags": [], "owner": {"reputation": 1890, "user_id": 6214034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xz5KJ.jpg?s=128&g=1", "display_name": "Itamar Turner-Trauring", "link": "https://stackoverflow.com/users/6214034/itamar-turner-trauring"}, "is_accepted": false, "score": -1, "last_activity_date": 1575553647, "creation_date": 1575553647, "answer_id": 59196600, "question_id": 59186113, "link": "https://stackoverflow.com/questions/59186113/alpine-3-9-force-to-use-python-3-6/59196600#59196600", "title": "Alpine 3.9 force to use python 3.6", "body": "<ol>\n<li><p>You shouldn't use Alpine if possible, it risks obscure bugs and needing to compile libraries (<a href=\"https://pythonspeed.com/articles/base-image-python-docker-images/\" rel=\"nofollow noreferrer\">https://pythonspeed.com/articles/base-image-python-docker-images/</a>).</p></li>\n<li><p>If you must use Alpine, you can use the <code>python:3.6-alpine</code> base image.</p></li>\n</ol>\n"}], "owner": {"reputation": 909, "user_id": 1565154, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/91bc8bf750ff3214810206a722c87773?s=128&d=identicon&r=PG", "display_name": "pms", "link": "https://stackoverflow.com/users/1565154/pms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575553647, "creation_date": 1575502411, "question_id": 59186113, "link": "https://stackoverflow.com/questions/59186113/alpine-3-9-force-to-use-python-3-6", "title": "Alpine 3.9 force to use python 3.6", "body": "<p>Looks like current version of alpine 3.9 is supporting python 3.8, but I am using python 3.6 and can't upgrade to 3.8 soon. I was wondering if it is possible to force alpine to use python 3.6.</p>\n\n<p>I tried following but no success:</p>\n\n<p><code>RUN apk add python36</code></p>\n\n<p><code>RUN apk add python3.6</code></p>\n"}, {"tags": ["python", "pyside2", "qtstylesheets"], "comments": [{"owner": {"reputation": 265, "user_id": 9942325, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X5gZT947X0k/AAAAAAAAAAI/AAAAAAAAABQ/-_Z6eWfOgL4/photo.jpg?sz=128", "display_name": "Mateus Arruda", "link": "https://stackoverflow.com/users/9942325/mateus-arruda"}, "edited": false, "score": 0, "creation_date": 1577376192, "post_id": 59186106, "comment_id": 105155747, "body": "Ever got a solution? I&#39;m having the same issue :("}], "owner": {"reputation": 111, "user_id": 5937145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6WCMTZFzj6s/AAAAAAAAAAI/AAAAAAAAJs8/PVlyt9DkcWA/photo.jpg?sz=128", "display_name": "Ramiro Tell", "link": "https://stackoverflow.com/users/5937145/ramiro-tell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575512091, "creation_date": 1575502323, "last_edit_date": 1575512091, "question_id": 59186106, "link": "https://stackoverflow.com/questions/59186106/qss-border-radius-problem-on-widget-when-zooming-in", "title": "QSS &quot;border-radius&quot; problem on widget when zooming in", "body": "<p>I can't get perfect rounded corners by applying a stylesheet to a widget.\nIn this case I'm working with a QFrame widget within a QGraphicsScene, but I could recreate the same issue just by applying the same CSS to a QPushButton on a QDialog.\nIf you zoom in on the widget you'll see the borders are not rounded perfectly and a kind of square shape seems to appear visible on them.</p>\n\n<p>The first picture illustrates this at a scale of 1:1\n<a href=\"https://i.stack.imgur.com/Lde5M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lde5M.png\" alt=\"- \"></a></p>\n\n<p>The second picture shows a closer view on the QFrame widget\n<a href=\"https://i.stack.imgur.com/tJMQs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tJMQs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Example:</p>\n\n<pre><code>from PySide2 import QtCore, QtGui, QtWidgets\n\nview = QtWidgets.QGraphicsView()\nscene = QtWidgets.QGraphicsScene()\nview.setScene(scene)\nview.show()\n\nwidget = QtWidgets.QWidget()\nbutton = QtWidgets.QFrame(widget)\nbutton.setGeometry(0, 0, 500, 500)\nscene.addWidget(widget)\n\nstylesheet = \"\"\"\nQFrame{\n    border-style: solid;\n    border-color: rgba(10, 10, 10, 255);\n    border-width: 16px;\n    border-radius: 20px;\n    background-color: rgba(61, 72, 81, 255);\n}\n\"\"\"\nbutton.setStyleSheet(stylesheet)\nwidget.setStyleSheet('background-color: transparent;')\n</code></pre>\n\n<p>I'm testing this within Maya using PySide2.\nAny idea if there is a work-around to this issue?\nThanks in advance</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1575502666, "post_id": 59186104, "comment_id": 104592428, "body": "Are you sure this is where your issue is? I have run the same and i get a df returned from rename not a pandas series"}, {"owner": {"reputation": 778, "user_id": 9907994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39e1d840190728ac62b21ca9be7a102?s=128&d=identicon&r=PG&f=1", "display_name": "sammy", "link": "https://stackoverflow.com/users/9907994/sammy"}, "edited": false, "score": 1, "creation_date": 1575502799, "post_id": 59186104, "comment_id": 104592458, "body": "Yeah, works for me. No hidden conversion whatsoever."}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 1, "creation_date": 1575502895, "post_id": 59186104, "comment_id": 104592490, "body": "That command looks fine to me. Could you check <code>type(df)</code> before running that command?"}, {"owner": {"reputation": 970, "user_id": 12352927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856004218b8ec31474877b2e289a6833?s=128&d=identicon&r=PG&f=1", "display_name": "Stepan", "link": "https://stackoverflow.com/users/12352927/stepan"}, "edited": false, "score": 1, "creation_date": 1575503047, "post_id": 59186104, "comment_id": 104592527, "body": "Another way to rename way could be: df.columns = [&#39;day_of_week&#39;, &#39;Value&#39;] but you have to specify all column names"}, {"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1575503697, "post_id": 59186104, "comment_id": 104592695, "body": "@ChrisDoyle yeah it was a mistake- the problem actually lies with replacing the values. Thanks for the reminder."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575516925, "post_id": 59186104, "comment_id": 104595479, "body": "What is actually the problem then, I\u2019m confused. There are seemingly two or three different questions in here."}, {"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575517193, "post_id": 59186104, "comment_id": 104595543, "body": "@AlexanderC&#233;cile I had some misunderstanding about what my actual problem was so the question was changed during the discussion. Sorry for the confusion. Problem is solved"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575517350, "post_id": 59186104, "comment_id": 104595578, "body": "@nilsinelabore In the end it\u2019s just rename the columns + wrap all day numbers to 0-7?"}, {"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575517557, "post_id": 59186104, "comment_id": 104595633, "body": "@AlexanderC&#233;cile Yes"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "edited": false, "score": 0, "creation_date": 1575503567, "post_id": 59186169, "comment_id": 104592657, "body": "Thanks for the answer. I used <code>df[&#39;day_of_week&#39;].replace([&#39;8&#39;], &#39;1&#39;)</code> to replace values <code>8</code> with <code>1</code> but <code>df[&#39;day_of_week&#39;].describe()</code> showed that the values didn&#39;t change. Could you please tell me what&#39;s wrong?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "edited": false, "score": 0, "creation_date": 1575503953, "post_id": 59186169, "comment_id": 104592751, "body": "Could it be that your values \u200b\u200bare not str?"}, {"owner": {"reputation": 970, "user_id": 12352927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856004218b8ec31474877b2e289a6833?s=128&d=identicon&r=PG&f=1", "display_name": "Stepan", "link": "https://stackoverflow.com/users/12352927/stepan"}, "edited": false, "score": 0, "creation_date": 1575503968, "post_id": 59186169, "comment_id": 104592755, "body": "add &quot;inplace&quot; option and make types in replace the same as in df: df[&#39;day_of_week&#39;].replace(8, 1, inplace=True)"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575504027, "post_id": 59186169, "comment_id": 104592776, "body": "keep in mind that if it has a value like 9 or 10 or 23 you will have to include them in replace while the solution that I have budgeted does it always"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575504089, "post_id": 59186169, "comment_id": 104592792, "body": "<code>df[&#39;day_of_week&#39;]=df[&#39;day_of_week&#39;].replace([&#39;8&#39;], &#39;1&#39;)</code> or <code>df[&#39;day_of_week&#39;]=df[&#39;day_of_week&#39;].replace([8], 1)</code>"}, {"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "edited": false, "score": 0, "creation_date": 1575504360, "post_id": 59186169, "comment_id": 104592865, "body": "Thank you. It worked:) May I ask what the difference is between <code>replace</code> and <code>inplace</code>?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575504485, "post_id": 59186169, "comment_id": 104592893, "body": "inplace is an argument that is used so that the dataframe on which the methods apply is updated with the dataframe resulting from the methods applied. While replace is a method to replace dataframe values"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575504584, "post_id": 59186169, "comment_id": 104592919, "body": "normally instead of using for example <code>df.replace(8,1, inplace = True)</code> we use <code>df = df.replace(8,1)</code>"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575504716, "post_id": 59186169, "comment_id": 104592944, "body": "<a href=\"https://stackoverflow.com/questions/43893457/understanding-inplace-true\" title=\"understanding inplace true\">stackoverflow.com/questions/43893457/understanding-inplace-t&zwnj;&#8203;rue</a>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575524361, "post_id": 59186169, "comment_id": 104597360, "body": "Is <i><code>df[&#39;Weekday&#39;].mask(df[&#39;Weekday&#39;]&gt;7,df[&#39;Weekday&#39;]%7)</code></i> better than just <code>df[&#39;Weekday&#39;].subtract(1).mod(7).add(1)</code>?"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 0, "last_activity_date": 1575503220, "last_edit_date": 1575503220, "creation_date": 1575502890, "answer_id": 59186169, "question_id": 59186104, "link": "https://stackoverflow.com/questions/59186104/replacing-values-in-a-pandas-column/59186169#59186169", "title": "Replacing values in a pandas column", "body": "<p>Check the type and index of your dataframe at all times. The rename method applied to a dataframe always returns a dataframe.</p>\n\n<pre><code>df.index\ntype(df)\n</code></pre>\n\n<hr>\n\n<p>You could use:</p>\n\n<pre><code>#df=df.reset_index() # if Weekday is the index\ndf['Weekday']=df['Weekday'].mask(df['Weekday']&gt;7,df['Weekday']%7)\ndf=df.rename(columns = {'Weekday' : 'day_of_week'})\nprint(df)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>   day_of_week  Value\n0            2     10\n1            2      5\n2            1     50\n3            7     20\n4            4     11\n</code></pre>\n\n<hr>\n\n<p><code>Dataframe.rename</code> is what we use to rename the columns although you could use:</p>\n\n<pre><code>df.columns=[the names of your columns]\n</code></pre>\n"}], "owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 59186169, "answer_count": 1, "score": -1, "last_activity_date": 1575504402, "creation_date": 1575502292, "last_edit_date": 1575504402, "question_id": 59186104, "link": "https://stackoverflow.com/questions/59186104/replacing-values-in-a-pandas-column", "title": "Replacing values in a pandas column", "body": "<p>I would like to rename the <code>Weekday</code> to <code>day_of_week</code> in dataframe below</p>\n\n<pre><code>Weekday    Value\n2          10\n2          5\n8          50\n7          20\n4          11\n</code></pre>\n\n<p>using </p>\n\n<pre><code>df = df.rename(columns = {'Weekday' : 'day_of_week'})\n</code></pre>\n\n<p>I then notice that <code>df</code> has been converted to <code>pandas.core.series.Series</code> from <code>DataFrame</code>, which is not what I meant, because I would like to replace all <code>8</code> with <code>1</code> in the column in a <code>DataFrame</code>, and I'm not sure how to do it with a <code>series</code>.</p>\n\n<p>My question is: </p>\n\n<p>1) what are the different ways of renaming a column in a pandas dataframe and the differences(regarding data type transformation)?</p>\n\n<p>2) what is the best way to solve the problem in my case and how to do it?</p>\n\n<p>Thanks</p>\n\n<hr>\n\n<p>Update: \nSorry the problem lies with replacing values <code>8</code> with <code>1</code> in column <code>day_of_week</code> after renaming. </p>\n\n<p>New problem:\nI used </p>\n\n<pre><code>df['day_of_week'].replace(['8'], '1') \ndf['day_of_week'].describe()\n</code></pre>\n\n<p>and it showed that the values had not changed. What's the correct way of doing this? </p>\n"}, {"tags": ["python", "dataframe"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 3, "creation_date": 1575502359, "post_id": 59186077, "comment_id": 104592322, "body": "Welcome to stack overflow! In the future, please include the error traceback as text in your question, not as a picture. Also, please include sample of your input dataframe. In this case, the <code>keyerror</code> indicates that <code>borocd</code> is not a valid column name in your dataframe"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1575505197, "post_id": 59186077, "comment_id": 104593067, "body": "<a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\">Why not upload images of code on SO when asking a question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1351, "user_id": 1515997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f3146da7d1509745536c8b7cb1a3d7d9?s=128&d=identicon&r=PG", "display_name": "ozn", "link": "https://stackoverflow.com/users/1515997/ozn"}, "is_accepted": false, "score": 0, "last_activity_date": 1575505167, "last_edit_date": 1575505167, "creation_date": 1575503166, "answer_id": 59186198, "question_id": 59186077, "link": "https://stackoverflow.com/questions/59186077/how-to-convert-dataframe-object-into-int64/59186198#59186198", "title": "How to convert dataframe object into Int64?", "body": "<p>I don't know the structure (like combining two custom objects) you are thinking is the correct way, but you could use the <code>object.__int__()</code>, <code>object.__float__()</code> (like <code>object.__init__()</code>) methods to get those.</p>\n"}], "owner": {"reputation": 1, "user_id": 12482730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5816b3d1f93da9ab442a3d537e8b1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12482730/lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1575505167, "creation_date": 1575502152, "last_edit_date": 1575505126, "question_id": 59186077, "link": "https://stackoverflow.com/questions/59186077/how-to-convert-dataframe-object-into-int64", "title": "How to convert dataframe object into Int64?", "body": "<p>I am trying to merge two dataframes. because they are not the same type of data, I try to convert it into one. But I get the following error, can someone help me with this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/W1JkV.png\" rel=\"nofollow noreferrer\">My code</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1575502461, "post_id": 59186069, "comment_id": 104592363, "body": "Some examples with expected results would help make sense of this question..."}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 1, "creation_date": 1575502977, "post_id": 59186069, "comment_id": 104592506, "body": "Some class coding feedback - your double method is <i>both</i> updating the object&#39;s internal value of x to be double its original value, <i>and</i> returning the doubled value. It should probably do one or the other. It mostly depends on your use case which one you should do."}], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 3, "last_activity_date": 1575502495, "creation_date": 1575502495, "answer_id": 59186123, "question_id": 59186069, "link": "https://stackoverflow.com/questions/59186069/return-different-objects-from-a-method-depending-on-whether-method-parameter-is/59186123#59186123", "title": "Return different objects from a method, depending on whether method parameter is present", "body": "<p>It is not clear what you are trying to accomplish and there is probably a better design, but to answer your question, you can use the following idiom:</p>\n\n<pre><code>def return1(self, xg=None):\n    return xg if xg is not None else self.x\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10916933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a5eae85948a11fb188e43b4dafae44?s=128&d=identicon&r=PG&f=1", "display_name": "ScientistStats", "link": "https://stackoverflow.com/users/10916933/scientiststats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 59186123, "answer_count": 1, "score": -1, "last_activity_date": 1575502748, "creation_date": 1575502110, "last_edit_date": 1575502748, "question_id": 59186069, "link": "https://stackoverflow.com/questions/59186069/return-different-objects-from-a-method-depending-on-whether-method-parameter-is", "title": "Return different objects from a method, depending on whether method parameter is present", "body": "<p>I am creating a class with a number of methods, as one of the steps, I want to change one of the args to call the new version in a different method from the class.</p>\n\n<p>I am sure it\u2019s something simple but I just can\u2019t figure out where it is going wrong.</p>\n\n<p>For brevity, I have tried to make a simple example from what I am actually coding.</p>\n\n<pre><code>class Double:\n    def __init__(self, x):\n        self.x = x\n\n    def double(self):\n        self.x = self.x * 2\n        # change the x item to x*2\n        return self.x\n\n    def return1(self, xg=x):\n        # if xg isn\u2019t defined by user, this method should return\n        # the new version of x created above\n        return xg\n</code></pre>\n\n<p>I would also appreciate any other feedback on my class coding.</p>\n"}, {"tags": ["python", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1575502249, "post_id": 59186061, "comment_id": 104592294, "body": "Look for nonmax(imum) suppression algorithm."}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 2, "creation_date": 1575504314, "post_id": 59186061, "comment_id": 104592855, "body": "This occurs because slight shifts still match. You can mask out a region around each match in the match score result image before looking for the next one. Or use minMaxLoc() to find global max as described at <a href=\"https://docs.opencv.org/3.4/de/da9/tutorial_template_matching.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4/de/da9/tutorial_template_matching.html</a> and <a href=\"https://docs.opencv.org/3.4/d2/de8/group__core__array.html#gab473bf2eb6d14ff97e89b355dac20707\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4/d2/de8/&hellip;</a>. See also <a href=\"https://answers.opencv.org/question/165740/template-matching-multiple-objects/\" rel=\"nofollow noreferrer\">answers.opencv.org/question/165740/&hellip;</a>"}, {"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1575680816, "post_id": 59186061, "comment_id": 104659485, "body": "Could you add your original input image and an expected output image? Also would be nice if you added your template image. If you&#39;re trying to detect the nodes in the image, an alternative approach would be to use morphological opening with an elliptical shaped kernel is isolate the nodes."}, {"owner": {"reputation": 115, "user_id": 9513926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64a5262f2c86a425a96e5f9f5c229c?s=128&d=identicon&r=PG&f=1", "display_name": "FourZeroFive", "link": "https://stackoverflow.com/users/9513926/fourzerofive"}, "edited": false, "score": 0, "creation_date": 1575692789, "post_id": 59186061, "comment_id": 104660954, "body": "Added the original image, the template can be any cropped node from the image, but i will add it later anyway, because im away from the work computer. thx"}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 12488601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dffc03be2208369a4df34a0f35e63338?s=128&d=identicon&r=PG&f=1", "display_name": "MjH", "link": "https://stackoverflow.com/users/12488601/mjh"}, "is_accepted": true, "score": 1, "last_activity_date": 1575774760, "last_edit_date": 1575774760, "creation_date": 1575699954, "answer_id": 59223557, "question_id": 59186061, "link": "https://stackoverflow.com/questions/59186061/multiple-occurrences-of-bounding-boxes-around-a-same-location/59223557#59223557", "title": "Multiple occurrences of bounding boxes around a same location", "body": "<p>Here is one possible approach. Code is unlikely an efficient one. I think k-means clustering from some package may work better. Idea is to group together locations, which are too close:</p>\n\n<pre><code>def group_locations(locations, min_radius):\n    x = locations[:, 0][ : , None]\n    dist_x = x - x.T\n    y = locations[:, 1][ : , None]\n    dist_y = y - y.T\n    dist = np.sqrt(dist_x**2 + dist_y**2)\n    np.fill_diagonal(dist, min_radius+1)\n    too_close = np.nonzero(dist &lt;= min_radius)\n    groups = []\n    points = np.arange(len(locations))\n    i = 0\n    j = 0\n    while i &lt; len(points):\n        groups.append([points[i]])\n        for j in range(len(too_close[0])):\n            if too_close[0][j] == points[i]:\n                groups[i].append(too_close[1][j])\n                points = np.delete(points, np.nonzero(points == too_close[1][j]))\n        i += 1\n\n    new_locations = []\n    for group in groups:\n        new_locations.append(np.mean(locations[group], axis=0))\n\n    return np.array(new_locations)\n</code></pre>\n\n<p>So you take your locations and group them before plotting:</p>\n\n<pre><code>locations = []\nsize = 600\nfor _ in range(50):\n    locations.append((random.randint(0, size), random.randint(0, size)))\n\nlocations = np.array(locations)\nmin_radius = 50\n\nnew_locations = group_locations(locations, min_radius)\n#I run it second time as sometimes locations form chains which are longer than radius \nnew_locations = group_locations(new_locations, min_radius) \nplt.scatter(locations[:, 0], locations[:, 1], c='blue', label='Original locations')\nplt.scatter(new_locations[:, 0], new_locations[:, 1], c='red', marker='x', label='New grouped locations')\nplt.legend()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EjZwn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EjZwn.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>actually tried it with image provided</p>\n\n<pre><code>img_rgb = cv2.imread('obsvu.jpg')\nimg_rgb = cv2.medianBlur(img_rgb, 7)\n\nimg_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)\n\ntemplate_image = cv2.imread('template.jpg',0)\ntemplate_image = cv2.medianBlur(template_image, 5)\nwidth, height = template_image.shape[::-1]\n\nres = cv2.matchTemplate(img_gray, template_image, cv2.TM_CCOEFF_NORMED)\n\nthreshold =  0.6\n\nlocations = np.where(res &gt;= threshold)\n\nnew_locations = group_locations(np.array(locations).T, 50).T\n\nfor position_tuple in zip(*new_locations.astype(int)[::-1]):\n        cv2.rectangle(img_rgb, position_tuple, (position_tuple[0] + width, position_tuple[1] + height), (0,255,0), 5)\n</code></pre>\n\n<p>Original locations: 723 <br>\nNew locations: 6 (yep, template selection not the best)</p>\n\n<p><a href=\"https://i.stack.imgur.com/OglV7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OglV7.jpg\" alt=\"result\"></a></p>\n"}], "owner": {"reputation": 115, "user_id": 9513926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64a5262f2c86a425a96e5f9f5c229c?s=128&d=identicon&r=PG&f=1", "display_name": "FourZeroFive", "link": "https://stackoverflow.com/users/9513926/fourzerofive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59223557, "answer_count": 1, "score": 0, "last_activity_date": 1589562574, "creation_date": 1575502038, "last_edit_date": 1589562574, "question_id": 59186061, "link": "https://stackoverflow.com/questions/59186061/multiple-occurrences-of-bounding-boxes-around-a-same-location", "title": "Multiple occurrences of bounding boxes around a same location", "body": "<p>I implemented the following code, to match nodes in a plant, using as template a small cropped image.</p>\n\n<pre><code>img_rgb = cv2.imread('Exp.2 - Florest\u00f3polis, 35DAE, 2017-2018, T4, R2, P4.jpg')\nimg_rgb = cv2.medianBlur(img_rgb, 7)\n\nimg_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)\n\ntemplate_image = cv2.imread('TemplateNode.jpg',0)\ntemplate_image = cv2.medianBlur(template_image, 5)\nwidth, height = template_image.shape[::-1]\n\nres = cv2.matchTemplate(img_gray, template_image, cv2.TM_CCOEFF_NORMED)\n\nthreshold =  0.6\n\nlocations = np.where(res &gt;= threshold)\n\nfor position_tuple in zip(*locations[::-1]):\n\n        cv2.rectangle(img_rgb, position_tuple, (position_tuple[0] + width, position_tuple[1] + height), (0,255,0), 1)\n</code></pre>\n\n<p>However, it generates too many bounding boxes (tuples), around a same location, as show:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2ESqA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ESqA.jpg\" alt=\"Output Image from Template Matching\"></a></p>\n\n<p>So, there is a work around to solve this issue? </p>\n"}, {"tags": ["python", "regex", "list", "dictionary"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1575502296, "post_id": 59186049, "comment_id": 104592308, "body": "Replace <code>NGly_Sites=...</code> with <code>NGly_Sites.append(re.findall(r&#39;N[^P][ST][^P]&#39;, amino))</code>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575517398, "post_id": 59186049, "comment_id": 104595594, "body": "What\u2019s that data format?"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 2, "last_activity_date": 1575503067, "last_edit_date": 1575503067, "creation_date": 1575502678, "answer_id": 59186147, "question_id": 59186049, "link": "https://stackoverflow.com/questions/59186049/how-do-you-create-a-python-dictionary-using-lists-of-different-size/59186147#59186147", "title": "How do you create a python dictionary using lists of different size?", "body": "<p>You can use a list comprehension to build a complete protein list of tuple pairs, then a dict comprehension to filter out empty list values. This could be done in a single dict comprehension, but breaking it into two steps is a little bit clearer and saves an awkward extra call to <code>findall</code> for extracting the protein sequences.</p>\n\n<pre><code>import re\n\nline = \"&gt;sp|A|PE=3 SV=1 IDMANTTI &gt;sp|B|PE=3 SV=1 EVPFYPKA &gt;sp|C| PE=3 SV=2 QRWLFNYSGNISN\"\nprotein_pattern = r\"sp\\|(\\w+)\\|.+?SV=\\d\\s([A-Z]+)\"\nsites_pattern = r\"N[^P][ST][^P]\"\n\nall_proteins = [\n    (k, re.findall(sites_pattern, v)) \n    for k, v in re.findall(protein_pattern, line)\n]\nsites = {k: v for k, v in all_proteins if v}\n\nprint(sites) # =&gt; {'A': ['NTTI'], 'C': ['NYSG', 'NISN']}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1575504613, "post_id": 59186352, "comment_id": 104592926, "body": "Thanks for the answer, but I think OP doesn&#39;t want <code>B</code> because it&#39;s pointing to an empty list. if you add the filtering, your answer will amount to mine pretty much. Also, code-only answers are automatically flagged by a bot and put into a review queue for potential deletion, so adding an explanation goes a long way to increasing the value of the answer for future visitors."}], "tags": [], "owner": {"reputation": 314, "user_id": 1073911, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/YhNq4.png?s=128&g=1", "display_name": "hmiguel", "link": "https://stackoverflow.com/users/1073911/hmiguel"}, "is_accepted": false, "score": 1, "last_activity_date": 1575504373, "creation_date": 1575504373, "answer_id": 59186352, "question_id": 59186049, "link": "https://stackoverflow.com/questions/59186049/how-do-you-create-a-python-dictionary-using-lists-of-different-size/59186352#59186352", "title": "How do you create a python dictionary using lists of different size?", "body": "<pre><code>import re\n\nline=\"&gt;sp|A|PE=3 SV=1 IDMANTTI &gt;sp|B|PE=3 SV=1 EVPFYPKA &gt;sp|C| PE=3 SV=2 QRWLFNYSGNISN\"\n\np_and_a=re.findall(r'sp\\|(\\w+)\\|.+?SV=\\d\\s([A-Z]+)', line) \n\nsites =  { protein : re.findall(r'N[^P][ST][^P]', amino)  for protein, amino in p_and_a }\n\nprint(sites)\n\n# {'A': ['NTTI'], 'B': [], 'C': ['NYSG', 'NISN']}\n\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12334091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a952aa5c9febc62422eb3e8978eb8f?s=128&d=identicon&r=PG&f=1", "display_name": "EuropaAstronaut", "link": "https://stackoverflow.com/users/12334091/europaastronaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1575504373, "creation_date": 1575501957, "question_id": 59186049, "link": "https://stackoverflow.com/questions/59186049/how-do-you-create-a-python-dictionary-using-lists-of-different-size", "title": "How do you create a python dictionary using lists of different size?", "body": "<p>I have been learning to manipulate strings with regex, but have run into a problem formatting a dictionary with some data I am working with. Here is a simplified version of the code I am struggling with:</p>\n\n<pre><code>import re\n\nline=\"&gt;sp|A|PE=3 SV=1 IDMANTTI &gt;sp|B|PE=3 SV=1 EVPFYPKA &gt;sp|C| PE=3 SV=2 QRWLFNYSGNISN\"\n\nNGly_Sites=[]\nprotein_list=[]\n\np_and_a=re.findall(r'sp\\|(\\w+)\\|.+?SV=\\d\\s([A-Z]+)', line) \nfor protein, amino in p_and_a:\n    print(protein, amino)\n    protein_list.append(protein)\n    NGly_Sites=re.findall(r'N[^P][ST][^P]', amino)\n    print(NGly_Sites)\nSites={k:v for k,v in zip(protein_list, NGly_Sites)}\nprint(Sites)\n</code></pre>\n\n<p>And it prints:</p>\n\n<pre><code>A IDMANTTI\n['NTTI']\nB EVPFYPKA\n[]\nC QRWLFNYSGNISN\n['NYSG', 'NISN']\n{'A': 'NYSG', 'B': 'NISN'\n</code></pre>\n\n<p>I am trying to match up items I have named \"protein\" with the resulting sequences I have found using the .findall() function in python. Essentially I am wanting to do the following:</p>\n\n<pre><code>{'A':['NTTI'],'C':['NYSG','NISN']}\n</code></pre>\n\n<p>I do not understand why the objects found using the .findall() function that are being placed into the dictionary are being done so under all the keys ('A', 'B', 'C') rather then their specific key or why I can't seem to attach a list of the objects found using .findall() under one key. I'm sure this is just something to do with syntax, but I've experimented with {k:v for k,v in zip(list1,list2)} which was how I was told to make a dictionary with two lists, and I can't seem to figure out how to get it to insert a list within a list. How can I go about doing this?</p>\n"}, {"tags": ["python", "encryption"], "answers": [{"tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": true, "score": 0, "last_activity_date": 1575503328, "creation_date": 1575503328, "answer_id": 59186218, "question_id": 59185998, "link": "https://stackoverflow.com/questions/59185998/string-encryption-via-input/59186218#59186218", "title": "String Encryption Via Input", "body": "<p>you only execute the <code>else</code> statement to exit if the <code>crypt_url</code> is equal to an empty string. However <code>crypt_url</code> will never be equal to an empty string as even encrypting an empty string will return you a crypt_string. Maybe in your <code>if</code> statement you should just check if <code>url</code> is an empty string</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from fernet import Fernet\n\niD=Fernet.generate_key()\ncipher = Fernet(iD)\nurl = input('&gt;')\ncrypt_url = cipher.encrypt(bytes(url, \"utf-8\"))\nprint(f\"url input is '{url}'\")\nprint(f\"crypturl is {crypt_url}'\")\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>url input is ''\ncrypturl is b'gAAAAABd6EUmhm8olVB7fWvLjaqZpqWnLRPn7tnhHsw8Q3lYiqMh1r21dTYkAYmefTYy7HbcW5Yxe-uqb_NA708YZzZhPZMhJA==''\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12478367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CVPND.png?s=128&g=1", "display_name": "Import Error", "link": "https://stackoverflow.com/users/12478367/import-error"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 59186218, "answer_count": 1, "score": -1, "last_activity_date": 1575510483, "creation_date": 1575501650, "last_edit_date": 1575510483, "question_id": 59185998, "link": "https://stackoverflow.com/questions/59185998/string-encryption-via-input", "title": "String Encryption Via Input", "body": "<p>When <code>enter</code> is pressed with no string this opens the working directory instead of exiting, could someone explain why and how to prevent this?</p>\n\n<pre><code>def mURLs(self, *args):\n        for x in range(0, 2):\n            iD=Fernet.generate_key()\n            cipher = Fernet(iD)\n            url = input(\"&gt;\")\n            crypt_url=cipher.encrypt(bytes(url \"utf-8\"))\n            print(crypt_url)\n            if crypt_url != \"\":\n                dcrypt_url=cipher.decrypt(bytes(crypt_url))\n                print(dcrypt_url)\n                browser.open_new_tab(dcrypt_url)\n                print(Fore.BLUE+\"Accessing \" + url + \"..\")\n            else:\n                print(Fore.RED+\"&gt;no url was entered..\")\n                exit\n</code></pre>\n"}, {"tags": ["python", "package"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1575502619, "post_id": 59185986, "comment_id": 104592415, "body": "Which Python version?"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1575502906, "post_id": 59185986, "comment_id": 104592493, "body": "Because it is imported that way with the full name. I don&#39;t know jedi but using a relative import &quot;from . import modfile1&quot; may help."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12309770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e8c4cae48e9029dd69ec9f25631f54?s=128&d=identicon&r=PG&f=1", "display_name": "scmartin", "link": "https://stackoverflow.com/users/12309770/scmartin"}, "edited": false, "score": 0, "creation_date": 1575517717, "post_id": 59186180, "comment_id": 104595667, "body": "If I remove the import statements in _<i>init_</i>.py and in the interpreter use import package_name, the modules are not available. If I instead use from package_name import modfile1 I get the expected results."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 21, "user_id": 12309770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e8c4cae48e9029dd69ec9f25631f54?s=128&d=identicon&r=PG&f=1", "display_name": "scmartin", "link": "https://stackoverflow.com/users/12309770/scmartin"}, "edited": false, "score": 0, "creation_date": 1575535267, "post_id": 59186180, "comment_id": 104601458, "body": "Exactly! This is how it works. Now just decide what behaviour you want and code accordingly. Please see my enhanced answer. Trying to elaborate a little more."}, {"owner": {"reputation": 21, "user_id": 12309770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e8c4cae48e9029dd69ec9f25631f54?s=128&d=identicon&r=PG&f=1", "display_name": "scmartin", "link": "https://stackoverflow.com/users/12309770/scmartin"}, "edited": false, "score": 0, "creation_date": 1575556701, "post_id": 59186180, "comment_id": 104613003, "body": "For a package like numpy, does this mean the entire package gets loaded into memory?  If a package that large loads into memory, the memory footprint of small packages must not be too great I would think."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 21, "user_id": 12309770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e8c4cae48e9029dd69ec9f25631f54?s=128&d=identicon&r=PG&f=1", "display_name": "scmartin", "link": "https://stackoverflow.com/users/12309770/scmartin"}, "edited": false, "score": 0, "creation_date": 1575561407, "post_id": 59186180, "comment_id": 104615625, "body": "if numpy has imports in its <code>__init__.py</code>, then yes.  Well I&#39;m coding defensively out of habit, but you&#39;re right. this will probably not be a real issue for your package."}], "tags": [], "owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "is_accepted": true, "score": 0, "last_activity_date": 1575561497, "last_edit_date": 1575561497, "creation_date": 1575502986, "answer_id": 59186180, "question_id": 59185986, "link": "https://stackoverflow.com/questions/59185986/custom-python-package-includes-self-as-member/59186180#59186180", "title": "Custom python package includes self as member", "body": "<p>This is normal.</p>\n\n<p><code>package_name.modfile1</code> would even exist if <code>__init__.py</code> were empty. It's just a module name, that you could import (with <code>import package_name.modfile1</code>)</p>\n\n<p>same for <code>package_name.modfile2</code></p>\n\n<p>in <code>__init__.py</code> you import <code>package_name.modfile1</code>\nSo if you imported package_name, then the tab completion will offer you the symbols from  <code>__init__.py</code> within <code>package_name</code></p>\n\n<p>Thus you get <code>package_name.package_name.modfile1</code> and <code>package_name.package_name.modfile2</code></p>\n\n<p>Just comment the two imports from <code>__init__.py</code> and these symbols will disappear.</p>\n\n<p>You could change the lines</p>\n\n<pre><code>import package_name.modfile1\nimport package_name.modfile2\n</code></pre>\n\n<p>to </p>\n\n<pre><code>import package_name.modfile1 as modfile1\nimport package_name.modfile2 as modfile2\n</code></pre>\n\n<p>To have a more consistent naming.</p>\n\n<p>If you keep the <code>__init__.py</code> file empty</p>\n\n<p>You have to use either</p>\n\n<p><code>import package_name.modfile1</code>\nor\n<code>from package_name import modfile1</code></p>\n\n<p>If  you have it populated with my last suggestion you can just use.\n<code>import package_name</code>\nand then directly access <code>package_name.modfile1</code></p>\n\n<p>Please note, that adding imports to the <code>__init__.py</code> file has one small side effect.</p>\n\n<p>whenever you <code>package_name</code> <code>modified1</code> and <code>modified2</code> will <strong>always</strong> be imported into RAM. Even if you imported <code>package_name.modfile1</code> then <code>package_name.modfile2</code> would also be loaded into RAM.</p>\n\n<p>Therefore I personally keep the init files almost always empty and import explicitly what I want.\nexceptions being, where I know, that <code>modfile1</code> and <code>modfile2</code> will always be used together.</p>\n\n<p>Just do whatever fits best your purpose.</p>\n"}], "owner": {"reputation": 21, "user_id": 12309770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e8c4cae48e9029dd69ec9f25631f54?s=128&d=identicon&r=PG&f=1", "display_name": "scmartin", "link": "https://stackoverflow.com/users/12309770/scmartin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 59186180, "answer_count": 1, "score": 0, "last_activity_date": 1575561497, "creation_date": 1575501581, "question_id": 59185986, "link": "https://stackoverflow.com/questions/59185986/custom-python-package-includes-self-as-member", "title": "Custom python package includes self as member", "body": "<p>I have a simple python package that I am able to use and import, but that is behaving unexpectedly. The package structure is</p>\n\n<blockquote>\n  <p>package_name</p>\n  \n  <blockquote>\n    <p>__init__.py</p>\n    \n    <p>modfile1.py</p>\n    \n    <p>modfile2.py</p>\n  </blockquote>\n</blockquote>\n\n<p>in __init__.py I have</p>\n\n<pre><code>import package_name.modfile1\nimport package_name.modfile2\n</code></pre>\n\n<p>If I open a python interpreter and</p>\n\n<pre><code>import package_name\n</code></pre>\n\n<p>I then see the following autocomplete choices (via jedi)</p>\n\n<pre><code>package_name.modfile1 package_name.modfile2 package_name.package_name\n</code></pre>\n\n<p>If I use package_name.package_name this can continue recursively. Why is the package listed as a member of itself?</p>\n"}, {"tags": ["python", "json", "pandas", "performance"], "answers": [{"tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": false, "score": 0, "last_activity_date": 1575509216, "creation_date": 1575509216, "answer_id": 59186903, "question_id": 59185941, "link": "https://stackoverflow.com/questions/59185941/how-to-split-a-large-json-file-based-on-which-time-of-day-each-entry-was-created/59186903#59186903", "title": "How to split a large json file based on which time of day each entry was created?", "body": "<p>You can make use of <code>object_hook</code> argument of the <code>load</code> function like this:</p>\n\n<pre><code>def callback(obj):\n    ct = obj['created_at']\n    t = datetime.strptime(ct, '%Y-%m-%d %H:%M:%S')\n    fname = 'night.json' if t.hour &gt;= 18 else 'day.json'\n\n    with open(fname, \"a\") as f:\n        if f.tell() == 0:\n            f.write('[')\n        else:\n            f.write(',')\n        f.write(json.dumps(obj))\n\n    return {}\n\njson.load(f, object_hook=callback)\nwith open(\"night.json\", \"a\") as f:\n    f.write(']')\nwith open(\"day.json\", \"a\") as f:\n    f.write(']')\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2941601, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/12693aead64fe67d66e9dbf451271377?s=128&d=identicon&r=PG&f=1", "display_name": "Jayleaf", "link": "https://stackoverflow.com/users/2941601/jayleaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575525584, "creation_date": 1575501313, "last_edit_date": 1575525584, "question_id": 59185941, "link": "https://stackoverflow.com/questions/59185941/how-to-split-a-large-json-file-based-on-which-time-of-day-each-entry-was-created", "title": "How to split a large json file based on which time of day each entry was created?", "body": "<p>I have a 10GB JSON file that I need to split into two files: One with all entries between 6pm and 6am, and one with all entries between 6am and 6pm.</p>\n\n<p>I have the following code that uses Pandas between_time function, which works on smaller datasets, but is incredibly memory inefficient to the point where my 10GB JSON file cannot fit into memory:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pandas import read_json,to_datetime\n\ndef main():\n\n    full_df = read_json('data.json')\n\n    full_df['created_at'] = full_df['created_at'].astype(str).str[:-6] #strip timezone\n    full_df['created_at'] = full_df['created_at'].apply(to_datetime)\n\n    full_df = full_df.set_index('created_at')\n\n    full_df.between_time('18:00', '6:00', True, False).reset_index().drop(columns=\"created_at\").to_json('night.json',orient='records')\n    full_df.between_time('6:00', '18:00', True, False).reset_index().drop(columns=\"created_at\").to_json('day.json',orient='records')\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Here's an example of my data:</p>\n\n<pre><code>{\"field1\":3253235,\"field2\":424444,\"created_at\":\"2019-11-11 08:51:44.0910000 +00:00\"}\n</code></pre>\n\n<p>Is there a simpler/more efficient way of achieving this?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 3, "creation_date": 1575501371, "post_id": 59185922, "comment_id": 104592047, "body": "Does <a href=\"https://stackoverflow.com/questions/32448414/what-does-colon-at-assignment-for-list-do-in-python\" title=\"what does colon at assignment for list do in python\">stackoverflow.com/questions/32448414/&hellip;</a> help?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 5, "creation_date": 1575501414, "post_id": 59185922, "comment_id": 104592060, "body": "Assignment and mutation are not the same thing."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1575502373, "post_id": 59185922, "comment_id": 104592329, "body": "Try <a href=\"https://stackoverflow.com/q/986006/5987\">stackoverflow.com/q/986006/5987</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1575506237, "post_id": 59185922, "comment_id": 104593295, "body": "<i>variables</i> have scope, not objects. Different variables in different scopes can refer to the same object, which is what happens when you pass an argument"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1575506968, "post_id": 59185922, "comment_id": 104593462, "body": "So, simply put, using <code>nums[:] = whatever</code> is a <i>mutator method</i>, and sinve both your local and global variables are referring to the <i>same list</i> then you see the effect in your local variable. Read the following: <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1575506327, "post_id": 59186094, "comment_id": 104593319, "body": "This is <i>slice assignment</i> no copy is made. This is totally wrong: &quot;Therefore, for the case of the lst variable the addition of the operator [:] returns a copy of the global lst, but with reference attached to the original lst.&quot; Note, <i>objects</i> are neither local not global, variables have scope, not objects"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1575507039, "post_id": 59186094, "comment_id": 104593482, "body": "You are completely right @juanpa.arrivillaga -- did further research on the topic (got myself originally mixed up) and fixed above, thank you for pointing this out."}], "tags": [], "owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "is_accepted": true, "score": 1, "last_activity_date": 1575515960, "last_edit_date": 1575515960, "creation_date": 1575502226, "answer_id": 59186094, "question_id": 59185922, "link": "https://stackoverflow.com/questions/59185922/pass-a-list-into-python-function/59186094#59186094", "title": "Pass a List into Python Function", "body": "<p>To replicate what you are saying, take the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>var = 10\nlst = [1, 2, 3]\n\ndef func():\n    var = 11\n    lst[:] = [1, 2, 3, 4]\n\nfunc()\nprint(var, lst) \n</code></pre>\n\n<p>The above will output <code>10 [1, 2, 3, 4]</code>. Now notice the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>var = 10\nlst = [1, 2, 3]\n\ndef func():\n    print(var)\n    print(lst)\n\nfunc()\n</code></pre>\n\n<p>Outputs <code>10 [1, 2, 3]</code> -- so we know that functions can <em>access</em> global variables, but in most cases cannot modify them. Now let us look at both cases (<code>int</code> and <code>list</code>): The two cases are followed:</p>\n\n<ol>\n<li>The <code>var</code> variable is not being modified due to the difference of reference between local and global scope (while we can access the global scope, we can't modify it). I recommend playing around with printing <code>globals()</code> and <code>locals()</code> for fun. This case can be fixed if we do: </li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>def func():\n    global var\n    var = 11\n</code></pre>\n\n<ol start=\"2\">\n<li>The <code>lst</code> variable is being modified with the <code>[:]</code> notation because as referenced <a href=\"https://docs.python.org/3/library/operator.html#mapping-operators-to-functions\" rel=\"nofollow noreferrer\">here</a>, the slice assignment <code>[:]</code> utilizes the <code>operator</code> function <code>setitem()</code>. Therefore, technically, <code>lst[:] =</code> is the equivalent of doing:</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>from operator import setitem\n\nlst = [1, 2, 3]\n\n# Both of these are equivalent. \nlst[:] = [1, 2, 3, 4] \nsetitem(a, slice(0, len(a)), [1, 2, 3, 4])\n</code></pre>\n\n<p><code>setitem</code> does not discriminate between local or global scopes. </p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1575506443, "post_id": 59186146, "comment_id": 104593348, "body": "You aren&#39;t slicing the list, that is <i>slice assignment</i> and it isn&#39;t poor syntax, although, many consider it bad practice to mutate arguments to functions. And it <i>didn&#39;t</i> find the global variable because of the slice assignment, it was using a local variable"}, {"owner": {"reputation": 1580, "user_id": 1327325, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/9e3b833255f7177664af333128414d98?s=128&d=identicon&r=PG", "display_name": "VISQL", "link": "https://stackoverflow.com/users/1327325/visql"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1575509989, "post_id": 59186146, "comment_id": 104594099, "body": "Thanks for the clarification. As for the slice assignment, it&#39;s useless to us <code>[:]</code> if you are using the entire object anyway. If you aren&#39;t using any indices, then you aren&#39;t assigning to any particular slice, just the entire list ` nums1[:] = sorted(nums1[:m]+nums2)` doesn&#39;t need the <code>[:]</code> after nums1 on the left. That&#39;s what I was talking about."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1575510905, "post_id": 59186146, "comment_id": 104594293, "body": "Yeah, that&#39;s simply wrong. It&#39;s not useless, it&#39;s the idiomatic way of modifying the entire list. If you didn&#39;t use slice assignment, then it wouldn&#39;t modify the list. It&#39;s two totally different things"}], "tags": [], "owner": {"reputation": 1580, "user_id": 1327325, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/9e3b833255f7177664af333128414d98?s=128&d=identicon&r=PG", "display_name": "VISQL", "link": "https://stackoverflow.com/users/1327325/visql"}, "is_accepted": false, "score": 0, "last_activity_date": 1575502666, "creation_date": 1575502666, "answer_id": 59186146, "question_id": 59185922, "link": "https://stackoverflow.com/questions/59185922/pass-a-list-into-python-function/59186146#59186146", "title": "Pass a List into Python Function", "body": "<p>(Don't use the <code>[:]</code> thing. That's horrible.)</p>\n\n<h3>My informal answer</h3>\n\n<p>When you say <code>nums1[:]</code> Python is finding the GLOBAL list called <code>nums1</code>.\nHowever, <strong>inside</strong> of a function, Python pays attention to <em>new</em> variables first. Why?<br>\n- it would suck if any variable name you ised outisde of a function, was now restricted from being used as DIFFERENT variable inside the function</p>\n\n<pre><code>H = True # some variable.pretend it means \"High\"\n\ndef euro_height(inches):\n    H = inches # since H is a nice abbrev for height in inches\n    return H*2.54 # Centimeters\n</code></pre>\n\n<p>I don't want my <code>H</code> inside the function to overwrite something I already stored. Therefore, within <code>euro_height</code>, <code>H</code> is considered a different <strong>local</strong> variable, which only that function can see and use. If I want to use the <code>H</code> from outside of the function, I'd have to first tell Python to access it. Then I can use it.</p>\n\n<pre><code>H = True # some variable.pretend it means \"High\"\n\ndef euro_height(inches):\n    global H\n    print(H) # will say true\n\n    renamed_var = inches # since H is a nice abbrev for height in inches\n    return renamed_var*2.54 # Centimeters\n</code></pre>\n\n<p>If I were to assign <code>H = inches</code> inside the function now, it would <strong>overwrite</strong> the <code>True</code> value for the global <code>H</code>. So instead, I rename it, because there is already an <code>H</code> I want to use.</p>\n\n<p>The name for all this is called <strong>namespaces</strong>. Hopefully, you are doing a Python tutorial. You will understand this when they teach functions. I highyl suggest doing a tutorial if you aren't. </p>\n\n<p>For more about this answer related to what happened to you, look at the interactive examples here <a href=\"https://www.programiz.com/python-programming/global-local-nonlocal-variables\" rel=\"nofollow noreferrer\">https://www.programiz.com/python-programming/global-local-nonlocal-variables</a></p>\n\n<p>Also, never use <code>mylist[:]</code> again. =) It's poor syntax.\n<em>It just returns the entire list. so just use the name of the list <code>mylist</code>. By adding the brackets, you forced finding og the global var, and created your problem</em></p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 11365757, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5mkPramAVpk/AAAAAAAAAAI/AAAAAAAAFP4/SJeFvOCxrSg/photo.jpg?sz=128", "display_name": "erncncbk", "link": "https://stackoverflow.com/users/11365757/erncncbk"}, "is_accepted": false, "score": 0, "last_activity_date": 1575504088, "creation_date": 1575504088, "answer_id": 59186319, "question_id": 59185922, "link": "https://stackoverflow.com/questions/59185922/pass-a-list-into-python-function/59186319#59186319", "title": "Pass a List into Python Function", "body": "<p>If you are confused, take the following.</p>\n\n<p>Firstly placement and change are not the same things</p>\n\n<pre><code>nums1 = [1,2,3,8,0,0,0]\nlst = None\nm = 3\nnums2 = [2,5,6]\nn = 3\ndef merge(nums1, m, nums2, n):\n    global lst \n    lst = sorted(nums1[:m]+nums2)\nmerge(nums1, m, nums2, n)\nprint(lst)\n\n</code></pre>\n\n<p><code>nums1[:]</code> means your whole list. \nIf you use <code>nums1[:]</code> instead of <code>nums1</code> You can change your former <code>nums1[:]</code> list using <code>sorted(nums1[:m]+nums2)</code>. When you do this change what both your former and latest list, so you in the <code>nums1</code> array list changing new with new attached variables place each other. But if you use only <code>nums1</code> instead of <code>nums1[:]</code> the latest <code>nums1</code> now refers to a different list from the former.</p>\n"}], "owner": {"reputation": 261, "user_id": 11954573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de702fbcff8e5f634c96fd594701bf?s=128&d=identicon&r=PG&f=1", "display_name": "M00000001", "link": "https://stackoverflow.com/users/11954573/m00000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 2, "accepted_answer_id": 59186094, "answer_count": 3, "score": 2, "last_activity_date": 1575515960, "creation_date": 1575501167, "question_id": 59185922, "link": "https://stackoverflow.com/questions/59185922/pass-a-list-into-python-function", "title": "Pass a List into Python Function", "body": "<p>As a new python programmer, I have two questions about list and really appreciate your advice:</p>\n\n<p>Question 1:</p>\n\n<p>For the following code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>nums1 = [1,2,3,8,0,0,0]\nm = 3\nnums2 = [2,5,6]\nn = 3\ndef merge(nums1, m, nums2, n):\n    nums1[:] = sorted(nums1[:m]+nums2)\nmerge(nums1, m, nums2, n)\nnums1\n</code></pre>\n\n<p>What it does is: pass list nums1 and list nums2 into merge function, and merge them into list nums1 with the first m items in nums1 and n items in nums2, and sort list nums1. So the results are: [1, 2, 2, 3, 5, 6]\nSo my question is: since list nums1 was defined outside the scope of function merge, how come it has the ability to update nums1? And in the following example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = 10\ndef reassign(x):\n    x = 2\nreassign(x)\nx\n</code></pre>\n\n<p>Variable x was defined outside of function reassign, and the reassign function was not able to update x defined outside of reassign, which is why x returns 10.</p>\n\n<p>Question 2:</p>\n\n<p>In the above code I provided, if I write it like the following:</p>\n\n<p>Note: I just modified nums1[:] into nums1 when assigning sorted(nums1[:m]+nums2)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>nums1 = [1,2,3,8,0,0,0]\nm = 3\nnums2 = [2,5,6]\nn = 3\ndef merge(nums1, m, nums2, n):\n    nums1 = sorted(nums1[:m]+nums2)\nmerge(nums1, m, nums2, n)\nnums1\n</code></pre>\n\n<p>nums1 returns [1,2,3,8,0,0,0], so my question is: after adding [:] after nums1, how come the function has the ability to nums1? What does [:] in that example?</p>\n"}, {"tags": ["python", "csv", "neo4j", "cypher", "py2neo"], "answers": [{"tags": [], "owner": {"reputation": 4236, "user_id": 702846, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ad589b0712b73d8b534d9a7bf5e2f40d?s=128&d=identicon&r=PG", "display_name": "user702846", "link": "https://stackoverflow.com/users/702846/user702846"}, "is_accepted": true, "score": 1, "last_activity_date": 1575535066, "creation_date": 1575535066, "answer_id": 59191136, "question_id": 59185897, "link": "https://stackoverflow.com/questions/59185897/connecting-to-neo4j-database-after-importing-csv/59191136#59191136", "title": "Connecting to Neo4j database after importing CSV", "body": "<p>One has to to the config file and edit the following line in the <code>neo4j.config</code></p>\n\n<pre><code># The name of the database to mount\ndbms.active_database=graph.db\n</code></pre>\n\n<p>then can run <code>./bin/neo4j consol</code> </p>\n\n<p>the output should end like</p>\n\n<pre><code>Starting Neo4j.\n2019-12-01 23:42:14.731+0000 INFO  ======== Neo4j 3.5.3 ========\n2019-12-01 23:42:14.743+0000 INFO  Starting...\n2019-12-01 23:42:16.599+0000 INFO  Bolt enabled on 127.0.0.1:7687.\n2019-12-01 23:42:18.122+0000 INFO  Started.\n2019-12-01 23:42:19.065+0000 INFO  Remote interface available at http://localhost:7474/\n</code></pre>\n\n<p>then going back to the jupyter notebook ...</p>\n"}], "owner": {"reputation": 4236, "user_id": 702846, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ad589b0712b73d8b534d9a7bf5e2f40d?s=128&d=identicon&r=PG", "display_name": "user702846", "link": "https://stackoverflow.com/users/702846/user702846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 59191136, "answer_count": 1, "score": 1, "last_activity_date": 1575535066, "creation_date": 1575500977, "last_edit_date": 1575505885, "question_id": 59185897, "link": "https://stackoverflow.com/questions/59185897/connecting-to-neo4j-database-after-importing-csv", "title": "Connecting to Neo4j database after importing CSV", "body": "<p>I have imported my csv files using the neo4j-admin according to the <a href=\"https://neo4j.com/docs/operations-manual/current/tools/import/\" rel=\"nofollow noreferrer\">documentation</a> using the following command</p>\n\n<pre><code>/bin/neo4j-admin import --mode=csv --nodes all_nodes_ne_header.csv,all_nodes_ne.csv --relationships all_relations_ne_header.csv,all_relations_ne.csv\n</code></pre>\n\n<p>the result looks like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>IMPORT DONE in 15s 997ms.\nImported:\n  19354 nodes\n  11759454 relationships\n  58062 properties\nPeak memory usage: 1.03 GB\n</code></pre>\n\n<p>and I can see a file called <code>graph.db</code> in the <code>data/databases</code> folder.</p>\n\n<p>I go to python and do:</p>\n\n<pre><code>from py2neo import Graph, Node, Relationship, Database\n%matplotlib inline\n%load_ext cypher\n\ndefault_db = Database(db = Database())\ngraph = Graph(\"bolt://localhost:3637\")\n</code></pre>\n\n<p>and after running my query I get the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Format: (http|https)://username:password@hostname:port/db/name\n...\nConnectionError: HTTPConnectionPool(host='localhost', port=7474): Max retries exceeded with url: /db/data/ (Caused by NewConnectionError('&lt;urllib3.connection.HTTPConnection object at 0x12e269790&gt;: Failed to establish a new connection: [Errno 61] Connection refused'))\n</code></pre>\n\n<p>I guess I am not doing the connection correctly within Python and didn't find anywhere in the documentation how to do it. Basically, I have not set any password, username and even don't the port. I generated a report using <code>neo4j-admin report</code> and there was not anything relevant either. therefore, I appreciate your comments on how I can build the connection and start querying from python.</p>\n"}, {"tags": ["python", "dynamic", "runtime", "pytest", "fixtures"], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 2823074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d0723d6f169f6fe6961dcb1112a54c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikaelblomkvistsson", "link": "https://stackoverflow.com/users/2823074/mikaelblomkvistsson"}, "is_accepted": false, "score": 0, "last_activity_date": 1575539278, "creation_date": 1575539278, "answer_id": 59192296, "question_id": 59185838, "link": "https://stackoverflow.com/questions/59185838/pytest-dynamic-resolution-of-fixtures-dependencies/59192296#59192296", "title": "Pytest - dynamic resolution of fixtures&#39; dependencies", "body": "<p>This can be done using <code>request.getfixturevalue('that_fixture_name')</code>. Fixtures can be invoked in runtime. There is even no fixture's scope violation in this case (<code>'session'</code> vs. <code>'function'</code>).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\n\n\n@pytest.fixture(scope=\"session\")\ndef needed_environment_full(a_lot_of, expensive, fixtures_needed):\n    \"\"\"This does expensive setup that I need\n    to avoid in \"fast\" mode. Takes about a minute (docker pull, etc..)\"\"\"\n\n\n@pytest.fixture\ndef needed_environment_fast():\n    \"\"\"This does a fast setup, has \"function scope\"\n    and doesn't require any additional fixtures. Takes ~20ms\"\"\"\n\n\n@pytest.fixture\ndef needed_environment(request):\n    \"\"\"Dynamically run a named fixture function, basing on cli call argument.\"\"\"\n    if request.config.getoption('--run_that_fast'):\n        return request.getfixturevalue('needed_environment_fast')\n    else:\n        return request.getfixturevalue('needed_environment_full')\n\n\ndef test_that_things(needed_environment):\n    \"\"\"At this moment I don't want to distinguish what\n     needed_environment is. Tests have to pass in both modes.\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 2823074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d0723d6f169f6fe6961dcb1112a54c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikaelblomkvistsson", "link": "https://stackoverflow.com/users/2823074/mikaelblomkvistsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575539278, "creation_date": 1575500585, "last_edit_date": 1575502740, "question_id": 59185838, "link": "https://stackoverflow.com/questions/59185838/pytest-dynamic-resolution-of-fixtures-dependencies", "title": "Pytest - dynamic resolution of fixtures&#39; dependencies", "body": "<p>I cannot find a solution to alter fixtures dependency in any different way than this bellow.\nThe problem is that I need to determine the dependencies basing on <code>pytest.config.getoption</code> argument, instead of what's used here (variable resolved at module level).</p>\n\n<p>I need to get two modes of testing: fast and full, keeping the same test source code.</p>\n\n<p><code>pytest_generate_tests</code> seems to be useless, or at least I don't know how to use it here.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\n\n\nDO_FULL_SETUP = \"some condition that I need take from request.config.getoption(), not like this\"\n\nif DO_FULL_SETUP:\n    # such a distinction is valid from interpreter's (and pytest's) point of view\n\n    @pytest.fixture(scope=\"session\")\n    def needed_environment(a_lot_of, expensive, fixtures_needed):\n        \"\"\"This does expensive setup that I need \n        to avoid in \"fast\" mode. Takes about a minute (docker pull, etc..)\"\"\"\n\nelse:\n    @pytest.fixture\n    def needed_environment():\n        \"\"\"This does a fast setup, has \"function scope\" \n        and doesn't require any additional fixtures. Takes ~20ms\"\"\"\n\n\ndef test_that_things(needed_environment):\n    \"\"\"At this moment I don't want to distinguish what \n     needed_environment is. Tests have to pass in both modes.\"\"\"\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "multithreading", "tkinter"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1575501051, "post_id": 59185784, "comment_id": 104591961, "body": "Read <a href=\"https://stackoverflow.com/a/16747734/7414759\">use threads to preventing main event loop from \u201cfreezing\u201d</a> and <a href=\"https://stackoverflow.com/questions/29158220/tkinter-understanding-mainloop\">Tkinter understanding mainloop</a>"}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 11608340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1723559401123231/picture?type=large", "display_name": "Rafael Ferreira", "link": "https://stackoverflow.com/users/11608340/rafael-ferreira"}, "is_accepted": false, "score": 0, "last_activity_date": 1575539606, "creation_date": 1575539606, "answer_id": 59192387, "question_id": 59185784, "link": "https://stackoverflow.com/questions/59185784/updating-tkinter-gui-w-threading/59192387#59192387", "title": "Updating Tkinter GUI w/ threading", "body": "<p>I have some code here that might help you. I have already faced your problem and I figure it out with threading another class that will run my code. So unfortunately I cannot show the entire code but i tried to give you something that can help.</p>\n\n<pre><code>DELAY = 100  # millisecs between status label updates\n\n# global flag and a Lock to control concurrent access to it\nrun_flag_lock = threading.Lock()\nrunning = False\n\nclass RunningClass(threading.Thread):\n    def __init__(self):\n        self.run()\n\n    def run(self):\n        global running\n        # random work\n        YOUR CODE\n        with run_flag_lock:\n            running = False\n\nclass GUI(Frame, object):\n    def __init__(self, master)\n        super(GUI, self).__init__(master)\n        global running\n        self.button = Button(self, text=\"EXECUTE\", command=lambda: self.execute(), bg=\"green\", fg='white')\n        self.button.grid(row=0, column=0, sticky=E + W)\n        with run_flag_lock:\n            running = False\n        self.after(DELAY, self.update_status, None)  # start status widget updating\n\n    def update_status(self, run_state):\n        global running\n        \"\"\" Update status label text and state of buttons to match running flag. \"\"\"\n        # no need to declare run_flag_lock global since it's not being assigned a value\n        with run_flag_lock:\n            if running != run_state:  # status change?\n                if running:\n                    run_state = True\n                else:\n                    run_state = False\n            else:\n                try:\n                    x = self.temp\n                except:\n                    pass\n        # run again after a delay to repeat status check\n        self.after(DELAY, self.update_status, run_state)\n\n\n    def execute(self):\n        global running\n        flag_error = False\n        with run_flag_lock:\n            if not running:\n                self.temp = RunningClass()\n                self.temp.start()\n                running = True\n\nif __name__ == '__main__':\n    ROOT = Tk()\n    ROOT.title(\"TEXT\")\n    LOGIN = GUI(ROOT)\n    LOGIN.grid(sticky=E)\n    ROOT.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12259220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OXlYm.png?s=128&g=1", "display_name": "gerf.merns", "link": "https://stackoverflow.com/users/12259220/gerf-merns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575539606, "creation_date": 1575500225, "question_id": 59185784, "link": "https://stackoverflow.com/questions/59185784/updating-tkinter-gui-w-threading", "title": "Updating Tkinter GUI w/ threading", "body": "<p>I am working on a project that follows the basic structure: a sequencer class instantiates a GUI class that provides functionality to update/modify content on the GUI (change background image, update text fields, etc.). In the sequencer class, I want to kick off some method <code>run_test</code> that performs some actions (including some <code>time.sleep()</code> commands, and also updates the GUI to show that the test is running. Obviously, the GUI mainloop freezes when this occurs and the GUI does not update.</p>\n\n<p>What's the right solution here? How do I kick off the run_test in another thread so that the GUI can update?</p>\n\n<pre><code>class TestSequencer():\n\n    def __init__(self):\n        self._gui = TestGUI(sequencer=self)\n        self._gui.run_gui()\n\n    def start_sequencer(self):\n        self._gui.update_background_image()\n        self.run_test()\n\n    def run_test(self):\n        time.sleep(5)\n</code></pre>\n\n<p>The result is such that the code sleeps for 5 seconds, after which the GUI updates the background image. I want it to occur immediately, and potentially on the fly as various things occur during run_test (e.g. depending on pass/fail of run_test, show different things on the GUI).</p>\n\n<p>How do I accomplish this?!</p>\n"}, {"tags": ["python", "excel", "csv"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1575518077, "post_id": 59185782, "comment_id": 104595747, "body": "Include your data in the post itself as text, not as an image. What did you do to try to solve this?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "edited": false, "score": 1, "creation_date": 1575502408, "post_id": 59185846, "comment_id": 104592341, "body": "That&#39;s a great solution. Thank you."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575518170, "post_id": 59185846, "comment_id": 104595773, "body": "A defaultdict would make this even simpler."}], "tags": [], "owner": {"reputation": 79, "user_id": 9905843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COpf9.jpg?s=128&g=1", "display_name": "AntonioPelayo", "link": "https://stackoverflow.com/users/9905843/antoniopelayo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575500626, "creation_date": 1575500626, "answer_id": 59185846, "question_id": 59185782, "link": "https://stackoverflow.com/questions/59185782/combining-repeating-date-value-pairs-into-single-date-value-pair/59185846#59185846", "title": "Combining repeating date/value pairs into single date/value pair", "body": "<p>I'll allow you to set up the code for <code>csv</code>, opening/reading your file. But I would use a dictionary with the dates as keys and cumulative ticket sales as the values. </p>\n\n<pre><code>d = {}\n\n# Iterate through rows\nfor row in file:\n    date = row[0]\n    if date not in d:\n         d[date] = row[1]    \n    else:\n        # The date is already in the dictionary then add num tickets sold\n        d[date] += row[1]\n</code></pre>\n\n<p>This will scale if your num of ticket sales are not just 1.</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "edited": false, "score": 0, "creation_date": 1575501450, "post_id": 59185878, "comment_id": 104592074, "body": "This worked perfectly. Thank you so much! PS. Is there a way to then sort the dates in descending order?"}, {"owner": {"reputation": 457, "user_id": 2275237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3eb706cab04729dd1ff4a5570b6768e7?s=128&d=identicon&r=PG", "display_name": "DonnRK", "link": "https://stackoverflow.com/users/2275237/donnrk"}, "reply_to_user": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "edited": false, "score": 1, "creation_date": 1575502263, "post_id": 59185878, "comment_id": 104592298, "body": "df.sort_values(by=[&#39;date&#39;], ascending=False) check out the docs: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}, {"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "edited": false, "score": 0, "creation_date": 1575502393, "post_id": 59185878, "comment_id": 104592339, "body": "Thanks again! Huge help."}], "tags": [], "owner": {"reputation": 457, "user_id": 2275237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3eb706cab04729dd1ff4a5570b6768e7?s=128&d=identicon&r=PG", "display_name": "DonnRK", "link": "https://stackoverflow.com/users/2275237/donnrk"}, "is_accepted": true, "score": 2, "last_activity_date": 1575500824, "creation_date": 1575500824, "answer_id": 59185878, "question_id": 59185782, "link": "https://stackoverflow.com/questions/59185782/combining-repeating-date-value-pairs-into-single-date-value-pair/59185878#59185878", "title": "Combining repeating date/value pairs into single date/value pair", "body": "<p>Give this a shot.</p>\n\n<p>This solution assumes the \"ticket sales\" column is a number (count of tickets sold in that transaction).</p>\n\n<pre><code>import pandas as pd ## Imports pandas\ndf = pandas.read_csv('your_csv_file.csv') ## reads your csv into a pandas dataframe\ndf = df.groupby(['date']).sum() ## combines duplicate values in the 'date' column into a single record, then provides a sum total of the values associated with sales on that date\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "edited": false, "score": 1, "creation_date": 1575502456, "post_id": 59186062, "comment_id": 104592362, "body": "Thank you very much. Love the compactness."}], "tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 1, "last_activity_date": 1575502044, "creation_date": 1575502044, "answer_id": 59186062, "question_id": 59185782, "link": "https://stackoverflow.com/questions/59185782/combining-repeating-date-value-pairs-into-single-date-value-pair/59186062#59186062", "title": "Combining repeating date/value pairs into single date/value pair", "body": "<p>Without pandas here's an efficient approach using <code>itertools.groupby</code> and <code>operator.itemgetter</code> for the key:</p>\n\n<pre><code>ticket_counts = {dt: sum(int(q[1]) for q in qty)\n                     for dt, qty in groupby(data, key=itemgetter(0))}\n</code></pre>\n\n<p>Test data:</p>\n\n<pre><code>12/2/19,1\n12/2/19,1\n12/1/19,1\n12/1/19,1\n12/1/19,1\n12/1/19,1\n12/1/19,1\n12/1/19,1\n11/30/19,1\n11/30/19,1\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>{'12/2/19': 2, '12/1/19': 6, '11/30/19': 2}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 59185878, "answer_count": 3, "score": 0, "last_activity_date": 1575502044, "creation_date": 1575500223, "question_id": 59185782, "link": "https://stackoverflow.com/questions/59185782/combining-repeating-date-value-pairs-into-single-date-value-pair", "title": "Combining repeating date/value pairs into single date/value pair", "body": "<p>I have a .csv with <strong>date</strong> and <strong>ticket sales</strong> columns. Dates are repeated to signify multiple sales in one day. Is there a way to combine the repeating dates into a single row with their respective values added?\n<a href=\"https://i.stack.imgur.com/JrfDh.png\" rel=\"nofollow noreferrer\">Image</a></p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "dtype"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1575500953, "post_id": 59185778, "comment_id": 104591940, "body": "Set thee string length as well e.g. &#39;U10&#39;"}, {"owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1575501031, "post_id": 59185778, "comment_id": 104591956, "body": "@hpaulj It works! But is can the string&#39;s dtype be variable-length? I think <code>&#39;U10&#39;</code> sets the max length to 10."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1575501419, "post_id": 59185778, "comment_id": 104592062, "body": "In <code>np.array([&#39;one&#39;,&#39;three&#39;,...&#39;])</code> it chooses a long enough one based on inputs.  In other cases you just have to do that yourself.  Unlike python strings, the numpy dtype is fixed.  You can use Python strings with &#39;object&#39; dtype - that&#39;s what pandas does."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1575502378, "post_id": 59185778, "comment_id": 104592332, "body": "you could calculate your longest name <code>string_size = max([len(item[0]) for item in data])</code> then pass that as your dtype size <code>arr = np.array(data, dtype=np.dtype([(&#39;name&#39;, np.unicode, string_size), (&#39;height&#39;, np.float16)]))</code>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575518249, "post_id": 59185778, "comment_id": 104595802, "body": "Why are you using a numpy array to hold tuples with strings?"}], "owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575500858, "creation_date": 1575500217, "last_edit_date": 1592644375, "question_id": 59185778, "link": "https://stackoverflow.com/questions/59185778/strings-becoming-empty-when-dtype-is-defined-for-numpy-array", "title": "Strings Becoming Empty when dtype is defined for numpy.array", "body": "<p>I am encountering the problem of strings becoming empty when I try to set the <code>dtype</code> of a <code>numpy.array</code>.</p>\n<pre><code>import numpy as np\n\ndata = [('peter', 182.37), ('parker', 179.24)]\narr = np.array(data, dtype=np.dtype([('name', np.unicode), ('height', np.float16)]))\nprint(arr)\n</code></pre>\n<p>gives the following array where the strings <code>'peter'</code> and <code>'parker'</code> are both now <code>''</code>.</p>\n<blockquote>\n<p>[('', 182.4) ('', 179.2)]</p>\n</blockquote>\n<p>If no dtype is specified, the strings appear as expected in the <code>np.array</code>.</p>\n<pre><code>import numpy as np\n\ndata = [('peter', 182.37), ('parker', 179.24)]\narr = np.array(data)\nprint(arr)\n</code></pre>\n<blockquote>\n<p>[['peter' '182.37']</p>\n<p>['parker' '179.24']]</p>\n</blockquote>\n<p><strong>Question:</strong> Why are the strings becoming empty when the dtype for it is <code>np.unicode</code> or <code>np.string</code>? The string's dtype for <code>np.array</code> must support variable length strings. How can we fix this? Thank you!</p>\n<p>Using <em>Python 3.7.4, numpy 1.17.2</em></p>\n"}, {"tags": ["python", "python-3.x", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575518328, "post_id": 59185750, "comment_id": 104595820, "body": "Please share at least some of the data, and more of your program (see: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Odds are there is a way to work around this."}, {"owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "edited": false, "score": 0, "creation_date": 1575555432, "post_id": 59185750, "comment_id": 104612239, "body": "why don&#39;t you split the rows into columns at reading the text file in the first place?"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1575501235, "creation_date": 1575500063, "last_edit_date": 1575501235, "question_id": 59185750, "link": "https://stackoverflow.com/questions/59185750/using-str-splitexpand-true-on-dataframe-for-massive-data-sets", "title": "Using str.split(expand=True) on DataFrame for massive data sets", "body": "<p>I'm working with a data set of <strong>~800,000,000 - 1,000,000,000 rows</strong> that is read in as a DataFrame from a .txt type file.</p>\n\n<p>This DataFrame is read in as a <strong>single column</strong> where I have to use a df[column_name].str.split(expand=True) to expand out each value. This gives a unique column to each value between a set of white space.</p>\n\n<p>One caveat of this data set is that the number of values read into this single column <strong>can vary</strong> -- but if any values are 'missing' they are missing from the end of the sequence and not somewhere in between.</p>\n\n<p>For example:</p>\n\n<pre><code>df_in\n\n   0\n0  123 203 113 32\n1  555 22 155\n2  670 12\n</code></pre>\n\n<p>and then using <code>df_out = df_in['0'].str.split(expand=True)</code></p>\n\n<pre><code>df_out\n\n    0    1     3      4\n0   123  203   113    32\n1   555  22    155    None\n2   670  12    None   None\n</code></pre>\n\n<p>The problem is that this works well up until I get these huge data sets where I run into <code>MemoryError</code> issues.</p>\n\n<p>Is there a way to handle these larger data sets? Maybe using MultiProcessing? </p>\n\n<p>One note is that keeping the indices of the DataFrame is important.</p>\n"}, {"tags": ["python", "opencv", "scikit-learn", "image-segmentation", "scikit-image"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575501439, "post_id": 59185687, "comment_id": 104592069, "body": "Can you please provide the image itself rather than a screencapture of a plot of the image which is kind of like a photocopy of a photocopy...."}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 1, "creation_date": 1575501441, "post_id": 59185687, "comment_id": 104592070, "body": "You can do connected components processing in Python Wand (which uses Imagemagick) to merge small regions into their surrounding regions. See area-threshold under connected components at <a href=\"http://docs.wand-py.org/en/0.5.7/wand/image.html\" rel=\"nofollow noreferrer\">docs.wand-py.org/en/0.5.7/wand/image.html</a>"}, {"owner": {"reputation": 3258, "user_id": 1993206, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LhdIi.jpg?s=128&g=1", "display_name": "Aleksey Bilogur", "link": "https://stackoverflow.com/users/1993206/aleksey-bilogur"}, "edited": false, "score": 0, "creation_date": 1575657949, "post_id": 59185687, "comment_id": 104652949, "body": "Apologies. I started using JupyterLab recently, and their way of downloading output images (<a href=\"https://github.com/jupyterlab/jupyterlab/issues/2685\" rel=\"nofollow noreferrer\">github.com/jupyterlab/jupyterlab/issues/2685</a>) is rather nonintuitive."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4400079, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000897927261/picture?type=large", "display_name": "Digant Patel", "link": "https://stackoverflow.com/users/4400079/digant-patel"}, "is_accepted": true, "score": 1, "last_activity_date": 1575527222, "creation_date": 1575527222, "answer_id": 59189431, "question_id": 59185687, "link": "https://stackoverflow.com/questions/59185687/clean-up-unlabeled-pixels-in-image-segmentation/59189431#59189431", "title": "Clean up unlabeled pixels in image segmentation", "body": "<p>You can use opencv's morphological closing operation.(reference: <a href=\"https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html\" rel=\"nofollow noreferrer\">Link</a>)</p>\n\n<p>I tried to perform the same operation on your image:</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nimg = plt.imread('image path')\nplt.imshow(img)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iS50D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iS50D.png\" alt=\"orignal image\"></a></p>\n\n<pre><code>kernel = np.ones((5,5),dtype='uint8')\nclosing = cv2.morphologyEx(img, cv2.MORPH_CLOSE, kernel,iterations=1)\nplt.imshow(closing)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MswRW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MswRW.png\" alt=\"output\"></a></p>\n\n<p>You can play with kernel size and number of iterations. For small images kernel size of 3 or 5 would be find. You can increase the number of iterations to close bigger holes.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 12479445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240fe345b79590a667dc635fdd25fb9d?s=128&d=identicon&r=PG&f=1", "display_name": "gpcbitnik", "link": "https://stackoverflow.com/users/12479445/gpcbitnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1575539003, "creation_date": 1575539003, "answer_id": 59192216, "question_id": 59185687, "link": "https://stackoverflow.com/questions/59185687/clean-up-unlabeled-pixels-in-image-segmentation/59192216#59192216", "title": "Clean up unlabeled pixels in image segmentation", "body": "<p>the morphological closing is quite good but can modify the shape of your object, it add some artefact in the edge.\nfor your problem, i think you should use findContour and then use fillpoly to remove holes.</p>\n"}], "owner": {"reputation": 3258, "user_id": 1993206, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LhdIi.jpg?s=128&g=1", "display_name": "Aleksey Bilogur", "link": "https://stackoverflow.com/users/1993206/aleksey-bilogur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 59189431, "answer_count": 2, "score": 0, "last_activity_date": 1575539003, "creation_date": 1575499646, "question_id": 59185687, "link": "https://stackoverflow.com/questions/59185687/clean-up-unlabeled-pixels-in-image-segmentation", "title": "Clean up unlabeled pixels in image segmentation", "body": "<p>I have image segmentation results that look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/02LRY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/02LRY.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see there are small gaps in the segmentation map. These gap pixels have been assigned the value 0; all other, non-gap pixels have been assigned a non-0 class value.</p>\n\n<p>Is there a method, perhaps somewhere in <code>skimage</code>, which can perform something like k-nearest interpolation on just the null pixels, in order to assign them a value coherent with their neighborhood? I tried writing this function myself, but it too slow for my tastes.</p>\n"}, {"tags": ["python", "syntax", "terminal"], "comments": [{"owner": {"reputation": 365, "user_id": 7711444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ded9c7b7c934b058af3b18744b9b54?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7711444/sam"}, "edited": false, "score": 0, "creation_date": 1575499864, "post_id": 59185681, "comment_id": 104591674, "body": "What happens if you put quotes around the input?"}, {"owner": {"reputation": 11, "user_id": 12482601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36412f64b780ba130b21f5e3e31ef2d?s=128&d=identicon&r=PG&f=1", "display_name": "Aviva", "link": "https://stackoverflow.com/users/12482601/aviva"}, "reply_to_user": {"reputation": 365, "user_id": 7711444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ded9c7b7c934b058af3b18744b9b54?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7711444/sam"}, "edited": false, "score": 1, "creation_date": 1575500911, "post_id": 59185681, "comment_id": 104591925, "body": "That worked!! Thank you so much. Such a simple fix, I&#39;m a beginner!"}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 3, "last_activity_date": 1575499942, "creation_date": 1575499942, "answer_id": 59185731, "question_id": 59185681, "link": "https://stackoverflow.com/questions/59185681/running-python-in-the-terminal-syntax-error/59185731#59185731", "title": "Running python in the terminal, syntax error", "body": "<p>You're using Python 2. </p>\n\n<p>Use <code>raw_input()</code> instead of <code>input()</code> to collect keyboard input.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12482601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36412f64b780ba130b21f5e3e31ef2d?s=128&d=identicon&r=PG&f=1", "display_name": "Aviva", "link": "https://stackoverflow.com/users/12482601/aviva"}, "is_accepted": false, "score": 1, "last_activity_date": 1575500997, "creation_date": 1575500997, "answer_id": 59185902, "question_id": 59185681, "link": "https://stackoverflow.com/questions/59185681/running-python-in-the-terminal-syntax-error/59185902#59185902", "title": "Running python in the terminal, syntax error", "body": "<p>Quotations were needed around <code>/Users/juliafiske/....</code></p>\n"}], "owner": {"reputation": 11, "user_id": 12482601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36412f64b780ba130b21f5e3e31ef2d?s=128&d=identicon&r=PG&f=1", "display_name": "Aviva", "link": "https://stackoverflow.com/users/12482601/aviva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575501086, "creation_date": 1575499615, "question_id": 59185681, "link": "https://stackoverflow.com/questions/59185681/running-python-in-the-terminal-syntax-error", "title": "Running python in the terminal, syntax error", "body": "<p>I'm trying to run a python program in the terminal. I have successfully called the .py script using <code>python filename.py</code>, and once the script starts running it asks for the first input file, which is a .csv file. When I type the path to that .csv file, I get a syntax error. See below for all the code starting with calling the python script.</p>\n\n<pre><code>python /Users/juliafiske/Desktop/GTSeq_Pipeline/Genotyping_Scripts/Genotyping_Scripts/GTseq_BarcodeSplit_MP_NextSeq_10K.py \n\ntype the path to input file\nFormat= /home/user/...\n\n/Users/juliafiske/Desktop/GTSeq_Pipeline/Practice/Practice_sampleIDs_new.csv\nTraceback (most recent call last):\n  File \"/Users/juliafiske/Desktop/GTSeq_Pipeline/Genotyping_Scripts/Genotyping_Scripts/GTseq_BarcodeSplit_MP_NextSeq_10K.py\", line 24, in &lt;module&gt;\n    path1 = input()\n  File \"&lt;string&gt;\", line 1\n    /Users/juliafiske/Desktop/GTSeq_Pipeline/Practice/Practice_sampleIDs_new.csv\n    ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>The beginning of the .py script being called looks like this:</p>\n\n<pre><code>from multiprocessing import Process\n\nprint('type the path to input file\\nFormat= /home/user/...')\npath1 = input()\n\nprint('type the path to the fastq file to split\\nFormat= /home/user/...')\npath2 = input()\n</code></pre>\n"}, {"tags": ["python", "list", "loops"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1575499583, "post_id": 59185651, "comment_id": 104591589, "body": "are both your lists always the same length?"}, {"owner": {"reputation": 646, "user_id": 10574250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e431e751d63bd56a6aba068dd9c29c34?s=128&d=identicon&r=PG&f=1", "display_name": "geds133", "link": "https://stackoverflow.com/users/10574250/geds133"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1575500041, "post_id": 59185651, "comment_id": 104591727, "body": "Yes they are always the same"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1575500084, "post_id": 59185651, "comment_id": 104591742, "body": "then zip is the way to go @mamun has given a good example"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575518889, "post_id": 59185651, "comment_id": 104595943, "body": "I don\u2019t understand your attempted solution, are you familiar with <code>range()</code>?"}, {"owner": {"reputation": 646, "user_id": 10574250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e431e751d63bd56a6aba068dd9c29c34?s=128&d=identicon&r=PG&f=1", "display_name": "geds133", "link": "https://stackoverflow.com/users/10574250/geds133"}, "edited": false, "score": 0, "creation_date": 1575550964, "post_id": 59185651, "comment_id": 104609730, "body": "Question has been answered below. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1575499638, "post_id": 59185677, "comment_id": 104591610, "body": "need a +1 on i and j as the doesnt want the start num but wants to include the end num"}, {"owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "edited": false, "score": 1, "creation_date": 1575500244, "post_id": 59185677, "comment_id": 104591794, "body": "I added a version without the zip"}], "tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": true, "score": 5, "last_activity_date": 1575500211, "last_edit_date": 1575500211, "creation_date": 1575499593, "answer_id": 59185677, "question_id": 59185651, "link": "https://stackoverflow.com/questions/59185651/iteration-through-2-lists-in-paralell-using-the-same-index/59185677#59185677", "title": "Iteration through 2 lists in paralell using the same index", "body": "<p>Use <code>zip</code>:</p>\n\n<pre><code>In [4]: line_idx = [list(range(i + 1, j + 1)) for i, j in zip(def_idx, return_idx)]\n\nIn [5]: line_idx\nOut[5]: [[2, 3], [14], [24, 25]]\n</code></pre>\n\n<p>Without <code>zip</code> as requested by the op:</p>\n\n<pre><code>In [10]: line_idx = [list(range(j + 1, return_idx[i] + 1)) for i, j in enumerate\n...: (def_idx)]\n\nIn [11]: line_idx\nOut[11]: [[2, 3], [14], [24, 25]]\n</code></pre>\n\n<p>Another low level language where arrays are not iterable like version:</p>\n\n<pre><code>In [12]: line_idx = [list(range(def_idx[i] + 1, return_idx[i] + 1)) for i in ran\n...: ge(len(def_idx))]\n\nIn [13]: line_idx\nOut[13]: [[2, 3], [14], [24, 25]]\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 10574250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e431e751d63bd56a6aba068dd9c29c34?s=128&d=identicon&r=PG&f=1", "display_name": "geds133", "link": "https://stackoverflow.com/users/10574250/geds133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59185677, "answer_count": 1, "score": 1, "last_activity_date": 1575564562, "creation_date": 1575499420, "last_edit_date": 1575564562, "question_id": 59185651, "link": "https://stackoverflow.com/questions/59185651/iteration-through-2-lists-in-paralell-using-the-same-index", "title": "Iteration through 2 lists in paralell using the same index", "body": "<p>I am attempting to iterate through the list index of two lists in parallel in order to append the range between the ith number in the first list and the ith number in the second list to a new variable, each range in its own list. I do not want to include the first number in the range so for the first iteration the output would be <code>[2,3]</code>The lists are as follows:</p>\n\n<pre><code>def_idx = [1,13,23]\nreturn_id = [3,14,25]\nline_idx = []`\n</code></pre>\n\n<p>The desired output of <code>line_idx</code> would be as follows:\n<code>line_idx = [[2, 3], [14], [24, 25]]</code></p>\n\n<p>My attempt at this has not worked due to having too many lists:</p>\n\n<pre><code>line_idx = []\nfor i, j in enumerate(def_idx):\n    line_idx.append([list(range(j + 1, return_idx[i] + 1))])\n</code></pre>\n\n<p>Any help would be appreciated and if the question is not clear then I am very happy to give further explanation.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1575499426, "post_id": 59185637, "comment_id": 104591535, "body": "So you want to select the second element because the second element of y is 12? What is the relation between 2 and 12?"}, {"owner": {"reputation": 354, "user_id": 12476310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5600671f867be17bed062203133755df?s=128&d=identicon&r=PG&f=1", "display_name": "cischa", "link": "https://stackoverflow.com/users/12476310/cischa"}, "edited": false, "score": 0, "creation_date": 1575499471, "post_id": 59185637, "comment_id": 104591552, "body": "As written, dic[&#39;y&#39;] is a list rather than the number 12. Is this intended?"}, {"owner": {"reputation": 117, "user_id": 7074986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c982832a5bab6c1642786aa5ec741cbe?s=128&d=identicon&r=PG&f=1", "display_name": "MarcoC", "link": "https://stackoverflow.com/users/7074986/marcoc"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1575499566, "post_id": 59185637, "comment_id": 104591585, "body": "@RaySteam: Yes, I want to select to select 2 in x when y is 12, and there is no relationship between the keys x and y."}, {"owner": {"reputation": 117, "user_id": 7074986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c982832a5bab6c1642786aa5ec741cbe?s=128&d=identicon&r=PG&f=1", "display_name": "MarcoC", "link": "https://stackoverflow.com/users/7074986/marcoc"}, "reply_to_user": {"reputation": 354, "user_id": 12476310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5600671f867be17bed062203133755df?s=128&d=identicon&r=PG&f=1", "display_name": "cischa", "link": "https://stackoverflow.com/users/12476310/cischa"}, "edited": false, "score": 0, "creation_date": 1575499613, "post_id": 59185637, "comment_id": 104591604, "body": "@cischa. Yes it is a list. I must amend the text."}, {"owner": {"reputation": 1159, "user_id": 5423850, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71eb5c2772178a9564d83583595f5a1d?s=128&d=identicon&r=PG&f=1", "display_name": "oneturkmen", "link": "https://stackoverflow.com/users/5423850/oneturkmen"}, "edited": false, "score": 0, "creation_date": 1575499828, "post_id": 59185637, "comment_id": 104591663, "body": "@MarcoC are they ordered? i.e. value at index 1 at <code>y</code> maps to value at index 1 at <code>x</code>?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1575499844, "post_id": 59185637, "comment_id": 104591670, "body": "What is the relationship between the <code>12</code> and the <code>y</code> list and the <code>2</code> in the <code>x</code> list? From your example, I assume it is based on the position in the list. Is that correct?"}, {"owner": {"reputation": 117, "user_id": 7074986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c982832a5bab6c1642786aa5ec741cbe?s=128&d=identicon&r=PG&f=1", "display_name": "MarcoC", "link": "https://stackoverflow.com/users/7074986/marcoc"}, "reply_to_user": {"reputation": 1159, "user_id": 5423850, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71eb5c2772178a9564d83583595f5a1d?s=128&d=identicon&r=PG&f=1", "display_name": "oneturkmen", "link": "https://stackoverflow.com/users/5423850/oneturkmen"}, "edited": false, "score": 0, "creation_date": 1575499953, "post_id": 59185637, "comment_id": 104591706, "body": "@oneturkmen Yes, they are ordered."}, {"owner": {"reputation": 117, "user_id": 7074986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c982832a5bab6c1642786aa5ec741cbe?s=128&d=identicon&r=PG&f=1", "display_name": "MarcoC", "link": "https://stackoverflow.com/users/7074986/marcoc"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1575499982, "post_id": 59185637, "comment_id": 104591718, "body": "@Code-Apprentice Yes, it is correct."}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 1, "creation_date": 1575500322, "post_id": 59185637, "comment_id": 104591809, "body": "Are values in list <code>y</code> unique?"}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 8582381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdab05a261e69e17563b23edf6f35bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Kieran Moynihan", "link": "https://stackoverflow.com/users/8582381/kieran-moynihan"}, "edited": false, "score": 3, "creation_date": 1575500268, "post_id": 59185738, "comment_id": 104591797, "body": "On your recommendation, for OP\u2019s purposes it may actually be better to structure it as a dictionary with keys of y, and values of the corresponding x."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 396, "user_id": 8582381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdab05a261e69e17563b23edf6f35bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Kieran Moynihan", "link": "https://stackoverflow.com/users/8582381/kieran-moynihan"}, "edited": false, "score": 0, "creation_date": 1575500315, "post_id": 59185738, "comment_id": 104591808, "body": "@KieranMoynihan I just saw Selcuk&#39;s answer. That is definitely an elegant way to do it."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 1, "last_activity_date": 1575499963, "creation_date": 1575499963, "answer_id": 59185738, "question_id": 59185637, "link": "https://stackoverflow.com/questions/59185637/how-to-select-a-value-of-a-key-in-dictionary-based-on-the-value-of-another-key/59185738#59185738", "title": "How to select a value of a key in dictionary based on the value of another key", "body": "<p>If you want an <code>x</code> based on the position of a given <code>y</code>, I suggest using <code>zip()</code>:</p>\n\n<pre><code>def find_x(dic, target_y):\n    pairs = zip(dic['x'], dic['y'])\n    for x, y in pairs:\n        if y == target_y:\n            return x\n</code></pre>\n\n<p>In fact, if you are doing this kind of thing often. It would be best to store your x and y values as a list of pairs (or dictionaries or class objects) rather than a dictionary with separate x and y lists.</p>\n"}, {"comments": [{"owner": {"reputation": 322, "user_id": 9237486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTbCW.jpg?s=128&g=1", "display_name": "BlueLightning42", "link": "https://stackoverflow.com/users/9237486/bluelightning42"}, "edited": false, "score": 0, "creation_date": 1575500508, "post_id": 59185771, "comment_id": 104591842, "body": "if used multiple time this is defenitly a great solution. If used once a simpler version is just dic[&#39;x&#39;][ dic[&#39;y&#39;].index(12) ]"}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1575500178, "creation_date": 1575500178, "answer_id": 59185771, "question_id": 59185637, "link": "https://stackoverflow.com/questions/59185637/how-to-select-a-value-of-a-key-in-dictionary-based-on-the-value-of-another-key/59185771#59185771", "title": "How to select a value of a key in dictionary based on the value of another key", "body": "<p>A flexible solution is to create a lookup dictionary based on the values in <code>dic</code>:</p>\n\n<pre><code>&gt;&gt;&gt; dic = {'x':[1, 2, 3], 'y':[11, 12 , 13]}\n&gt;&gt;&gt; lookup = dict(zip(dic['y'], dic['x']))\n&gt;&gt;&gt; lookup\n{11: 1, 12: 2, 13: 3}\n&gt;&gt;&gt; lookup[12]\n2\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 7074986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c982832a5bab6c1642786aa5ec741cbe?s=128&d=identicon&r=PG&f=1", "display_name": "MarcoC", "link": "https://stackoverflow.com/users/7074986/marcoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 59185771, "answer_count": 2, "score": 0, "last_activity_date": 1575500456, "creation_date": 1575499346, "last_edit_date": 1575500388, "question_id": 59185637, "link": "https://stackoverflow.com/questions/59185637/how-to-select-a-value-of-a-key-in-dictionary-based-on-the-value-of-another-key", "title": "How to select a value of a key in dictionary based on the value of another key", "body": "<p>In the following dictionary:</p>\n\n<pre><code>dic = {'x':[1, 2, 3], 'y':[11, 12 , 13]}\n</code></pre>\n\n<p>I want to retrieve the value <code>2</code> from the list corresponding to the key <code>'x'</code>, when the element of the list corresponding to the key <code>'y'</code> is <code>12</code>.</p>\n"}, {"tags": ["python", "sql-server", "python-3.x", "csv", "pyodbc"], "comments": [{"owner": {"reputation": 138, "user_id": 7364668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/amHYW.jpg?s=128&g=1", "display_name": "Sha", "link": "https://stackoverflow.com/users/7364668/sha"}, "edited": false, "score": 0, "creation_date": 1575500883, "post_id": 59185633, "comment_id": 104591921, "body": "i think it&#39;s better you put sample csv file as well, it&#39;s helpful. Also better you can put <code>print(values)</code> inside the for loop to check what&#39;s going on."}, {"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "reply_to_user": {"reputation": 138, "user_id": 7364668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/amHYW.jpg?s=128&g=1", "display_name": "Sha", "link": "https://stackoverflow.com/users/7364668/sha"}, "edited": false, "score": 0, "creation_date": 1575501172, "post_id": 59185633, "comment_id": 104591993, "body": "<code>STUFF,NAME,A DATE,A TIME,ANOTHER DATE,ANOTHER TIME,A NUMBER Bananas,John Smith,2019-11-20,17:00,2019-11-20,20:00,3 Apples,Jane Doe,2019-11-07,17:00,2019-11-07,23:00,6</code> etc"}, {"owner": {"reputation": 1009, "user_id": 2154701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7ae78ede767e18ed6a2e9b403cec65?s=128&d=identicon&r=PG", "display_name": "fizzybear", "link": "https://stackoverflow.com/users/2154701/fizzybear"}, "edited": false, "score": 1, "creation_date": 1575501847, "post_id": 59185633, "comment_id": 104592169, "body": "Try <code>list(map((lambda x: x.strip()), header))</code> instead of <code>map((lambda x: x.strip()), header)</code>. Basically everytime you get a <code>map</code>, convert to list since map has no len method."}, {"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "reply_to_user": {"reputation": 138, "user_id": 7364668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/amHYW.jpg?s=128&g=1", "display_name": "Sha", "link": "https://stackoverflow.com/users/7364668/sha"}, "edited": false, "score": 0, "creation_date": 1575502126, "post_id": 59185633, "comment_id": 104592244, "body": "@Sha <code>print(values)</code> inside the for loop is a great idea but is not working as the program doesn&#39;t get that far."}, {"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "reply_to_user": {"reputation": 1009, "user_id": 2154701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7ae78ede767e18ed6a2e9b403cec65?s=128&d=identicon&r=PG", "display_name": "fizzybear", "link": "https://stackoverflow.com/users/2154701/fizzybear"}, "edited": false, "score": 0, "creation_date": 1575502362, "post_id": 59185633, "comment_id": 104592324, "body": "@fizzybear okay a new error: <code>my_cursor.execute(insert, values) pyodbc.ProgrammingError: (&#39;The SQL contains 7 parameter markers, but 1 parameters were supplied&#39;, &#39;HY000&#39;)</code>"}, {"owner": {"reputation": 138, "user_id": 7364668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/amHYW.jpg?s=128&g=1", "display_name": "Sha", "link": "https://stackoverflow.com/users/7364668/sha"}, "edited": false, "score": 0, "creation_date": 1575502836, "post_id": 59185633, "comment_id": 104592469, "body": "have a look on <a href=\"https://github.com/mkleehammer/pyodbc/issues/552\" rel=\"nofollow noreferrer\">pyodbc/issues</a>"}, {"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "reply_to_user": {"reputation": 138, "user_id": 7364668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/amHYW.jpg?s=128&g=1", "display_name": "Sha", "link": "https://stackoverflow.com/users/7364668/sha"}, "edited": false, "score": 0, "creation_date": 1575503297, "post_id": 59185633, "comment_id": 104592592, "body": "@Sha I don&#39;t see how that applies.  I thought that <code>insert = &#39;INSERT INTO {} (&#39;.format(table) + &#39;, &#39;.join(headers) + &#39;) VALUES ({})&#39; .format(&#39;, &#39;.join(len(headers) * &#39;?&#39;))</code> dynamically covers this?  I mean, obviously I&#39;m wrong, but adding their params line didn&#39;t work for me.  I don&#39;t see how it relates."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 1009, "user_id": 2154701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7ae78ede767e18ed6a2e9b403cec65?s=128&d=identicon&r=PG", "display_name": "fizzybear", "link": "https://stackoverflow.com/users/2154701/fizzybear"}, "edited": false, "score": 0, "creation_date": 1575519000, "post_id": 59185633, "comment_id": 104595971, "body": "@fizzybear In which case there is practically no reason to use <code>map()</code>, no?"}], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "edited": false, "score": 0, "creation_date": 1575510247, "post_id": 59186669, "comment_id": 104594148, "body": "Thank you!  Progress!  Error message has changed:   <code>my_cursor.execute(insert, values) pyodbc.ProgrammingError: (&#39;42000&#39;, &quot;[42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near &#39;TYPE&#39;. (102) (SQLExecDirectW); [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near &#39;DATE&#39;. (102); [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near &#39;TIME&#39;. (102); [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Statement(s) could not be prepared. (8180)&quot;)</code>"}, {"owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "edited": false, "score": 0, "creation_date": 1575512325, "post_id": 59186669, "comment_id": 104594539, "body": "Now works - thank you!  The error above was generated because my header row in the CSV didn&#39;t exactly match the header row in the SQL table."}], "tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 1, "last_activity_date": 1575507194, "creation_date": 1575507194, "answer_id": 59186669, "question_id": 59185633, "link": "https://stackoverflow.com/questions/59185633/typeerror-object-of-type-map-has-no-len-when-trying-to-insert-a-csv-into-an/59186669#59186669", "title": "TypeError: object of type &#39;map&#39; has no len() when trying to insert a CSV into an SQL Server database in Python 3", "body": "<p>Both of your issues are caused by the fact that with modern versions of Python (i.e., Python_3), <a href=\"https://docs.python.org/3/library/functions.html#map\" rel=\"nofollow noreferrer\">map()</a> returns a map <em>object</em> which is an iterable, not a list. Consequently,</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>import csv\n\nwith open('C:/Users/Gord/Desktop/foo.csv', 'r') as csvfile:\n    csvFile = csv.reader(csvfile, delimiter=',')\n    header = next(csvFile)\n    print(type(header))  # &lt;class 'list'&gt;\n    print(len(header))  # 3\n    headers_map = map((lambda x: x.strip()), header)\n    print(type(headers_map))  # &lt;class 'map'&gt;\n    try:\n        print(len(headers_map))\n    except TypeError as e:\n        print(str(e))  # object of type 'map' has no len()\n    headers_list = list(headers_map)\n    print(len(headers_list))  # 3\n</code></pre>\n\n<p>Similarly, if you do something like</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>values = map((lambda x: x.strip()), row)\nmy_cursor.execute(insert, values)\n</code></pre>\n\n<p>and get an error like</p>\n\n<blockquote>\n  <p>pyodbc.ProgrammingError: ('The SQL contains 7 parameter markers, but 1 parameters were supplied', 'HY000')</p>\n</blockquote>\n\n<p>that's because <code>values</code> is a single <code>&lt;class 'map'&gt;</code> object, where pyodbc is expecting a <code>list</code>, <code>tuple</code>, or <code>Row</code>. So, define <code>values</code> as</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>values = list(map((lambda x: x.strip()), row))\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 11361269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiQfq.jpg?s=128&g=1", "display_name": "Kim Jiwoo", "link": "https://stackoverflow.com/users/11361269/kim-jiwoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 59186669, "answer_count": 1, "score": 1, "last_activity_date": 1575507194, "creation_date": 1575499313, "last_edit_date": 1575504691, "question_id": 59185633, "link": "https://stackoverflow.com/questions/59185633/typeerror-object-of-type-map-has-no-len-when-trying-to-insert-a-csv-into-an", "title": "TypeError: object of type &#39;map&#39; has no len() when trying to insert a CSV into an SQL Server database in Python 3", "body": "<p>So I'm trying to get a CSV file into an SQL Server, </p>\n\n<p><strong>sample csv file</strong></p>\n\n<pre><code>STUFF,NAME,A DATE,A TIME,ANOTHER DATE,ANOTHER TIME,A NUMBER Bananas\nJohn Smith,2019-11-20,17:00,2019-11-20,20:00,3 Apples,Jane Doe,2019-11-07,17:00,2019-11-07,23:00,6\n</code></pre>\n\n<p>here's how I'm trying to do it (based on <a href=\"https://stackoverflow.com/questions/50260488/importing-a-csv-file-into-sql-server-using-python\">this</a>):</p>\n\n<pre><code>import csv  \nimport pyodbc  \n\nthecsv = 'iamacsvfile.csv'\n\nprint('connecting')\ndrivr = \"SQL Server\"\nservr = \"1.2.3.4\"\ndb = \"testdata\"\nusername = \"user\"\npassword = \"thepassword\"\nmy_cnxn = pyodbc.connect('DRIVER={};SERVER={};DATABASE={};UID={};PWD={}'.format(drivr,servr,db,username,password))\n\nmy_cursor = my_cnxn.cursor()\n\ndef insert_records(table, thecsv, my_cursor, my_cnxn):\n\n    with open(thecsv) as csvfile:\n        csvFile = csv.reader(csvfile, delimiter=',')\n        header = next(csvFile)\n        headers = map((lambda x: x.strip()), header)\n        insert = 'INSERT INTO {} ('.format(table) + ', '.join(headers) + ') VALUES ({})' .format(', '.join(len(headers) * '?'))\n        for row in csvFile:\n            values = map((lambda x: x.strip()), row)  \n            my_cursor.execute(insert, values) \n            my_cnxn.commit()\n\n\ntable = 'dbo.iamthetable'\nmycsv = thecsv \ninsert_records(table, mycsv, my_cursor, my_cnxn)\nmy_cursor.close()\n</code></pre>\n\n<p>Error message:</p>\n\n<blockquote>\n  <p>insert = 'INSERT INTO {} ('.format(table) + ', '.join(headers) + ') VALUES ({})' .format(', '.join(len(headers) * '?'))<br>\n  TypeError: object of type 'map' has no len()</p>\n</blockquote>\n\n<p>I've seen some similar examples of this type of error (such as <a href=\"https://stackoverflow.com/questions/36982858/object-of-type-map-has-no-len-in-python-3\">here</a>) but I'm not sure how the solutions apply to this particular usage case.  Can anyone assist?</p>\n\n<p>(by the way if this entire code block is bad I'm open to a completely different method of doing the same, but haven't found anything that works yet)</p>\n"}, {"tags": ["python", "excel", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1575499325, "post_id": 59185620, "comment_id": 104591511, "body": "Search for isin"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1575499611, "post_id": 59185620, "comment_id": 104591602, "body": "simply <code>col = &#39;REFERENCE NUMBER&#39;</code> <code>df.loc[~df[col].isin(df1[col])]</code> assuming your data frames are called df and df1"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575500194, "post_id": 59185620, "comment_id": 104591783, "body": "this is not duplicate of the link that has been put"}, {"owner": {"reputation": 23, "user_id": 11583948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217345419961407/picture?type=large", "display_name": "Holden", "link": "https://stackoverflow.com/users/11583948/holden"}, "edited": false, "score": 0, "creation_date": 1575500775, "post_id": 59185620, "comment_id": 104591902, "body": "Thank you! This worked!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11583948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217345419961407/picture?type=large", "display_name": "Holden", "link": "https://stackoverflow.com/users/11583948/holden"}, "edited": false, "score": 0, "creation_date": 1575500817, "post_id": 59185730, "comment_id": 104591911, "body": "I did a variation of this: ``` has_code = df1[(df1[&#39;DISPLAY CODE&#39;] == &#39;ESBK022&#39;) | (df1[&#39;DISPLAY CODE&#39;] == &#39;ESBK023&#39;)               | (df1[&#39;GNC DISPLAY CODE&#39;] == &#39;ESBK024&#39;)]  final_table = df2.loc[~df2[&#39;REFERENCE NUMBER&#39;].isin(has_code[&#39;REFERENCE NUMBER&#39;])] ```  Can you explain how yours works exactly and how I can save the result as its own table?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 23, "user_id": 11583948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217345419961407/picture?type=large", "display_name": "Holden", "link": "https://stackoverflow.com/users/11583948/holden"}, "edited": false, "score": 1, "creation_date": 1575500900, "post_id": 59185730, "comment_id": 104591924, "body": "i&#39;m glad to help:)"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 0, "last_activity_date": 1575499928, "creation_date": 1575499928, "answer_id": 59185730, "question_id": 59185620, "link": "https://stackoverflow.com/questions/59185620/how-do-i-remove-all-occurrences-of-a-number-from-one-table-with-of-a-vlookup-of/59185730#59185730", "title": "How do I remove all occurrences of a number from one table with of a vlookup of numbers from another table?", "body": "<p>Use:</p>\n\n<pre><code>l=df1.loc[df1['DISPLAY CODE'].isin(['ESBK022','ESBK023','ESBK024']),'REFERENCE NUMBER'].tolist()\ndf2[~df2['REFERENCE NUMBER'].isin(l)]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>   REFERENCE NUMBER\n4              1926\n5              1927\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11583948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217345419961407/picture?type=large", "display_name": "Holden", "link": "https://stackoverflow.com/users/11583948/holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575531164, "creation_date": 1575499239, "last_edit_date": 1575499427, "question_id": 59185620, "link": "https://stackoverflow.com/questions/59185620/how-do-i-remove-all-occurrences-of-a-number-from-one-table-with-of-a-vlookup-of", "title": "How do I remove all occurrences of a number from one table with of a vlookup of numbers from another table?", "body": "<p>I have come very close to solving this, but the final result is always missing a some of the information.</p>\n\n<p>I want to take every reference number that has the code ESBK022, ESBK023, or ESBK024 from the lookup file, and then remove every instance of that reference number from the mainfile.</p>\n\n<p>In the main file, there are no duplicate reference numbers as the display code only appears in the lookup file.</p>\n\n<p>Here is what I want to accomplish:</p>\n\n<p>Main File:</p>\n\n<pre><code>REFERENCE NUMBER     DISPLAY CODE\n      1922              ESBK022\n      1923              ESBK023\n      1924              ESBK022\n      1925              ESBK024\n      1922              IATL123\n      1922              AUXT876\n</code></pre>\n\n<p>Lookup file:</p>\n\n<pre><code>REFERENCE NUMBER\n      1922\n      1923\n      1924\n      1925\n      1926\n      1927\n</code></pre>\n\n<p>Final Result:</p>\n\n<pre><code>REFERENCE NUMBER\n      1926\n      1927\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>import pandas as pd\n\n\nexcel1 = 'desktop/lookup.xlsx'\nexcel2 = 'desktop/mainfile.xlsx'\n\n#Delete top 3 blank rows of main file and last two summary rows\ndf1 = pd.read_excel(excel1, header=3)\ndf1 = (df1[:-2])\n\ndf2 = pd.read_excel(excel2)\n\n\n#finds all reference numbers that have the ESBK code\nhas_code = df1[(df1['DISPLAY CODE'] == 'ESBK022') | (df1['DISPLAY CODE'] == 'ESBK023')\n              | (df1['DISPLAY CODE'] == 'ESBK024')]\n</code></pre>\n\n<p>I've played around a lot with this part. Right now this just results in the table showing only reference numbers that have an ESBK code, and not the other way around.</p>\n\n<pre><code>#copies merged table layout to setup concatenation\nmerge_codes = pd.merge(has_code, df2, on=\"REFERENCE NUMBER\")\n\nmerge_codes.to_excel('Desktop/ExcelTest.xlsx',sheet_name='DATA', index=False)\n</code></pre>\n"}, {"tags": ["python", "for-loop", "iteration"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 3, "creation_date": 1575499302, "post_id": 59185612, "comment_id": 104591500, "body": "<a href=\"https://stackoverflow.com/questions/16641119/why-does-append-always-return-none-in-python\"><code>item.append()</code> modifies <code>item</code> and returns <code>None</code></a>"}, {"owner": {"reputation": 1447, "user_id": 5162155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GouJq.jpg?s=128&g=1", "display_name": "Moshe Rabaev", "link": "https://stackoverflow.com/users/5162155/moshe-rabaev"}, "edited": false, "score": 0, "creation_date": 1575499406, "post_id": 59185612, "comment_id": 104591530, "body": "I think you want to do <code>var2.append([item[0], &quot;x&quot;]) </code>"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1575499409, "post_id": 59185612, "comment_id": 104591533, "body": "Try <code>item + [&quot;x&quot;]</code> instead"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1575499460, "post_id": 59185612, "comment_id": 104591546, "body": "<code>var2.append(item + [&#39;x&#39;])</code>"}, {"owner": {"reputation": 104, "user_id": 7195110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543224902ef345ca08789ffd2ce6ca9?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin \u015awierczyna", "link": "https://stackoverflow.com/users/7195110/marcin-%c5%9awierczyna"}, "edited": false, "score": 0, "creation_date": 1575499501, "post_id": 59185612, "comment_id": 104591563, "body": "Use item + [&#39;x&#39;]"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1447, "user_id": 5162155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GouJq.jpg?s=128&g=1", "display_name": "Moshe Rabaev", "link": "https://stackoverflow.com/users/5162155/moshe-rabaev"}, "edited": false, "score": 0, "creation_date": 1575499512, "post_id": 59185612, "comment_id": 104591569, "body": "@MosheRabaev: Or to handle potentially longer <code>item</code> <code>list</code>s, <code>item + [&#39;x&#39;]</code> or <code>[*item, &#39;x&#39;]</code> (the latter Py3 only) would both work."}, {"owner": {"reputation": 353, "user_id": 4681316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9110f36e396d74ea555594d716fadb68?s=128&d=identicon&r=PG&f=1", "display_name": "Ersel Er", "link": "https://stackoverflow.com/users/4681316/ersel-er"}, "edited": false, "score": 0, "creation_date": 1575499617, "post_id": 59185612, "comment_id": 104591606, "body": "Assign your item to a temprary variable then update it <code>for item in var: ...   tmp = item ...   tmp.append(&#39;x&#39;) ...   var2.append(tmp)</code>"}, {"owner": {"reputation": 337, "user_id": 4695453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c126a2e8cc0dd2feea773cf6d60ad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "swaggy p", "link": "https://stackoverflow.com/users/4695453/swaggy-p"}, "edited": false, "score": 1, "creation_date": 1575499739, "post_id": 59185612, "comment_id": 104591633, "body": "I have a meta question, trying to figure out when to comment vs answer. How come none of you posted an answer? I always feel like I&#39;m doing something wrong because it seems like everyone just answers questions in the comments instead of posting answers"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 337, "user_id": 4695453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c126a2e8cc0dd2feea773cf6d60ad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "swaggy p", "link": "https://stackoverflow.com/users/4695453/swaggy-p"}, "edited": false, "score": 0, "creation_date": 1575499819, "post_id": 59185612, "comment_id": 104591659, "body": "@swaggyp I didn&#39;t answer because I was pretty sure I could find a dupe for this question...but there&#39;s actually two things going on here so it&#39;s a little more nuanced. Probably worth an answer..."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1575500240, "post_id": 59185612, "comment_id": 104591793, "body": "@Alex see also: <a href=\"https://stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-list\">How to clone or copy a list?</a> and (tangentially related, but useful) <a href=\"https://stackoverflow.com/questions/240178/list-of-lists-changes-reflected-across-sublists-unexpectedly\">List of lists changes reflected across sublists unexpectedly</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1575499928, "post_id": 59185714, "comment_id": 104591696, "body": "don&#39;t use <code>list</code> as a variable name."}], "tags": [], "owner": {"reputation": 79, "user_id": 9905843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COpf9.jpg?s=128&g=1", "display_name": "AntonioPelayo", "link": "https://stackoverflow.com/users/9905843/antoniopelayo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575499782, "creation_date": 1575499782, "answer_id": 59185714, "question_id": 59185612, "link": "https://stackoverflow.com/questions/59185612/for-loop-changes-original-list-variable/59185714#59185714", "title": "For loop changes original list variable", "body": "<p>Your for loop is the culprit. This is not that hard but we have to make sure what is going on in the nested list appends.</p>\n\n<p>My solution to this would be:</p>\n\n<pre><code>var=[[1],[2],[3]]\nvar2 = []\n\nfor i in range(len(var)):\n  list = []\n  list.append(var[i][0])\n  list.append('x')\n  var2.append(list)\n\nprint(var)\nprint(var2)\n&gt;&gt;&gt; [[1], [2], [3]]\n&gt;&gt;&gt; [[1, 'x'], [2, 'x'], [3, 'x']]\n</code></pre>\n\n<p>Even though it may be intuitive to write:</p>\n\n<pre><code>for list in var:\n  list.append('x')\n  var2.append(newList)\n</code></pre>\n\n<p>This will change the values in the lists in the original <code>var</code> list as well.</p>\n"}, {"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1575499836, "creation_date": 1575499836, "answer_id": 59185720, "question_id": 59185612, "link": "https://stackoverflow.com/questions/59185612/for-loop-changes-original-list-variable/59185720#59185720", "title": "For loop changes original list variable", "body": "<p>The <code>append</code> function modifies its input. So when you call <code>item.append(...)</code>, you are modifying <code>item</code>, which is a reference to one of the elements in <code>var</code>.</p>\n\n<p>You can minimally reproduce this via</p>\n\n<pre><code>var=[[1],[2],[3]]\n\nfor item in var:\n    item.append(\"x\")\n</code></pre>\n\n<p>In addition, the return value of <code>append</code> is <code>None</code>, so you're effectively calling <code>var2.append(None)</code> for each item, explaining your <code>var2</code> result.</p>\n\n<p>To avoid this, use a non-destructive method that returns the value you want, such as</p>\n\n<pre><code>var=[[1],[2],[3]]\nvar2 = []\n\nfor item in var:\n    var2.append(item + [\"x\"])\n</code></pre>\n\n<p>Or, better still,</p>\n\n<pre><code>var=[[1],[2],[3]]\nvar2 = [item + [\"x\"] for item in var]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 2, "last_activity_date": 1575500283, "last_edit_date": 1575500283, "creation_date": 1575499957, "answer_id": 59185735, "question_id": 59185612, "link": "https://stackoverflow.com/questions/59185612/for-loop-changes-original-list-variable/59185735#59185735", "title": "For loop changes original list variable", "body": "<p>If you refer to the <a href=\"https://docs.python.org/3/tutorial/datastructures.html\" rel=\"nofollow noreferrer\">docs</a> <code>list.append</code> as well as others return <code>None</code> and that's what you're appending. Therefore you need to concatenate or extend the list while returning the value. I suggest using <code>item + ['x']</code> so your loop would look as follows:</p>\n\n<pre><code>for item in var:\n    var2.append(item + ['x'])\n</code></pre>\n\n<p>Although why not just use a list comprehension for this?</p>\n\n<pre><code>var=[[1],[2],[3]]\nvar2 = [item + ['x'] for item in var]\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>[[1, 'x'], [2, 'x'], [3, 'x']]\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 8555779, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647294415294473/picture?type=large", "display_name": "Alex Heebs", "link": "https://stackoverflow.com/users/8555779/alex-heebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 59185720, "answer_count": 3, "score": 0, "last_activity_date": 1575500283, "creation_date": 1575499195, "last_edit_date": 1575499712, "question_id": 59185612, "link": "https://stackoverflow.com/questions/59185612/for-loop-changes-original-list-variable", "title": "For loop changes original list variable", "body": "<p>Quick question from someone with limited Python experience. So I have some lists inside a list. I want to iterate through it, append something to each iteration, and then store that in a different list. </p>\n\n<p>For example:</p>\n\n<pre><code>var=[[1],[2],[3]]\nvar2 = []\n\nfor item in var:\n    var2.append(item.append(\"x\"))\n</code></pre>\n\n<p>However, rather than the expected output for <code>var2</code> of <code>[[1, 'x'], [2, 'x'], [3, 'x']]</code> I get <code>[None, None, None]</code></p>\n\n<p>I was planning to reuse my original variable, <code>var</code>, for a different purpose. However, <code>var</code> is now equal to <code>[[1, 'x'], [2, 'x'], [3, 'x']]</code></p>\n\n<p>What is going on here?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1575505496, "post_id": 59185598, "comment_id": 104593139, "body": "You have <code>sys.exit()</code> in there, so it&#39;s unclear what you&#39;re asking. If the script is executed from the command line, that&#39;s where you&#39;ll return. If it&#39;s running as a standalone program, it will exit and close the window."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 0, "last_activity_date": 1575505524, "creation_date": 1575505524, "answer_id": 59186489, "question_id": 59185598, "link": "https://stackoverflow.com/questions/59185598/closing-terminating-application-programmatically/59186489#59186489", "title": "Closing/terminating application programmatically", "body": "<p>If you want to close the window then you must call the <a href=\"https://doc.qt.io/qt-5/qwidget.html#close\" rel=\"nofollow noreferrer\"><code>close()</code></a> method, which by default if there is no other window open, the application will close unless you set the <a href=\"https://doc.qt.io/qt-5/qguiapplication.html#quitOnLastWindowClosed-prop\" rel=\"nofollow noreferrer\"><code>quitOnLastWindowClosed</code></a> qproperty to true.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># ...\napplication.show()\n# foo tasks\napplication.close()\nsys.exit(app.exec_()) \n</code></pre>\n\n<p>If instead you want to force the application to close, you can use <a href=\"https://doc.qt.io/qt-5/qcoreapplication.html#quit\" rel=\"nofollow noreferrer\"><code>QCoreApplication::quit()</code></a> or <a href=\"https://doc.qt.io/qt-5/qcoreapplication.html#exit\" rel=\"nofollow noreferrer\"><code>QCoreApplication::exit()</code></a>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># ...\napplication.show()\n# foo tasks\nQtCore.QCoreApplication.quit()\nsys.exit(app.exec_()) \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12482400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ab39c4cc9741de80f622f20e50d2cc?s=128&d=identicon&r=PG&f=1", "display_name": "user12482400", "link": "https://stackoverflow.com/users/12482400/user12482400"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575505524, "creation_date": 1575499113, "last_edit_date": 1575505263, "question_id": 59185598, "link": "https://stackoverflow.com/questions/59185598/closing-terminating-application-programmatically", "title": "Closing/terminating application programmatically", "body": "<p>After showing the window and want to do some stuff and then close both window and python; what code should I use ?</p>\n\n<pre><code>class mywindow(QtWidgets.QMainWindow):     \n    def __init__(self):\n        super(mywindow, self).__init__()\n        self.ui = Ui_MainWindow()\n        self.ui.setupUi(self)\n        self.showMaximized() \n\nif __name__ == \"__main__\":   \n    app = QtWidgets.QApplication([])\n    application = mywindow()\n    application.show()\n    # !!!!! do some stuf and close application (including window)\n    sys.exit(app.exec_()) \n</code></pre>\n"}, {"tags": ["python", "macos", "nfc", "rfid", "scrypt"], "owner": {"reputation": 21, "user_id": 12482584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCXhnULJLQzOpe1jwEvhui_ZsUNHr7rwS5-BxAf=k-s128", "display_name": "Romain Dormy", "link": "https://stackoverflow.com/users/12482584/romain-dormy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1575498984, "creation_date": 1575498984, "question_id": 59185583, "link": "https://stackoverflow.com/questions/59185583/read-nfc-chips-using-the-acr122u-and-python-3", "title": "Read NFC Chips using the ACR122U and Python 3", "body": "<p>I would like to read NFC cards I own and print something according to the specific ID of the CHip. \nLet's say I have 3 cards of ID: 1,2,3. \nI would like to make a python script allowing me to print 'Card 1' for ID 1... and so on. </p>\n\n<p>For now, I have tried using the NFCPY Github but can not manage to make it work. </p>\n\n<p>Any help would be appreciated...\nI am average in python and very new in the NFC field :)</p>\n\n<p>Thanks a lot </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1575499236, "post_id": 59185572, "comment_id": 104591475, "body": "you should look at the <code>split()</code>"}, {"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1575521255, "post_id": 59185572, "comment_id": 104596506, "body": "I rollbacked the question to its original form. Please do not deface your post after people have already made effort to provide a solution."}], "answers": [{"comments": [{"owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "reply_to_user": {"reputation": 11, "user_id": 12482540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9976d9abd5899c44a977ca39d4b22c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Douglas", "link": "https://stackoverflow.com/users/12482540/douglas"}, "edited": false, "score": 0, "creation_date": 1575503104, "post_id": 59185617, "comment_id": 104592539, "body": "Glad it has been useful"}], "tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": false, "score": 1, "last_activity_date": 1575499231, "creation_date": 1575499231, "answer_id": 59185617, "question_id": 59185572, "link": "https://stackoverflow.com/questions/59185572/how-to-not-go-with-doing-nothing/59185617#59185617", "title": "how to not go with doing nothing", "body": "<p>You can use the split method and get the first element:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>fin = open('input.txt', 'r')\nfout = open('output.txt', 'w')\n\nfor line in fin:\n   fout.write(line.split(':')[0] + '\\n')\n\nfout.close()\nfin.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 6061924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb75e808bd57d18b652e2a9093f2b2f9?s=128&d=identicon&r=PG&f=1", "display_name": "MKP", "link": "https://stackoverflow.com/users/6061924/mkp"}, "is_accepted": false, "score": 0, "last_activity_date": 1575499737, "creation_date": 1575499737, "answer_id": 59185709, "question_id": 59185572, "link": "https://stackoverflow.com/questions/59185572/how-to-not-go-with-doing-nothing/59185709#59185709", "title": "how to not go with doing nothing", "body": "<p>Put the content in abc.txt<br>\nPlease use this code:</p>\n\n<pre><code>with open(\"abc.txt\") as f:\n    line=f.readline()\n    while line:\n        print(line[0:line.find(':')])    \n        line=f.readline()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12482540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9976d9abd5899c44a977ca39d4b22c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Douglas", "link": "https://stackoverflow.com/users/12482540/douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1582717941, "creation_date": 1575498865, "last_edit_date": 1582717941, "question_id": 59185572, "link": "https://stackoverflow.com/questions/59185572/how-to-not-go-with-doing-nothing", "title": "how to not go with doing nothing", "body": "<p>I am a bit new to python\nso going from sign to sign (included) which is not that obvious with all the line in multiple, and do it again for all the other lines in a .txt file with python it's probably triggered\nfor example like this:</p>\n\n<pre><code>-before:\nqqaqz-ilkds-jioes-islkd:peoiflsirc\nesoij-skfjs-lkdfv-xeiro:gggggggggg\netc..\n-after:\nqqaqz-ilkds-jioes-islkd\nesoij-skfjs-lkdfv-xeiro\n</code></pre>\n\n<p>thanks in advance</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 465, "user_id": 6182097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tj9y1.png?s=128&g=1", "display_name": "Shaboti", "link": "https://stackoverflow.com/users/6182097/shaboti"}, "edited": false, "score": 0, "creation_date": 1575498923, "post_id": 59185553, "comment_id": 104591379, "body": "Can you provide an example of how <code>file.text</code> looks like?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1575498956, "post_id": 59185553, "comment_id": 104591387, "body": "<code>sankey</code> is a local variable within the <code>makeSankey()</code> function, but you&#39;re trying to access it outside the function, where it is not known."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1575498968, "post_id": 59185553, "comment_id": 104591390, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/423379/using-global-variables-in-a-function\">Using global variables in a function</a>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1575499018, "post_id": 59185553, "comment_id": 104591404, "body": "Also, at the end of the function, I think you want <code>return sankey</code>, not <code>return makeSankey()</code>."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1575519139, "post_id": 59185553, "comment_id": 104595996, "body": "Can you provide a better example of the file contents?"}], "answers": [{"comments": [{"owner": {"reputation": 1651, "user_id": 7004653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f467ac348911486e70d074f19a42871?s=128&d=identicon&r=PG&f=1", "display_name": "RNHTTR", "link": "https://stackoverflow.com/users/7004653/rnhttr"}, "edited": false, "score": 0, "creation_date": 1575499590, "post_id": 59185625, "comment_id": 104591592, "body": "Can you explain why this works and OP&#39;s does not? I.e. explain why return sankey is required rather than returning the function call"}, {"owner": {"reputation": 1, "user_id": 12482582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc3d875ce5e7f57f95a92344f48a35d?s=128&d=identicon&r=PG&f=1", "display_name": "MrPuffy", "link": "https://stackoverflow.com/users/12482582/mrpuffy"}, "edited": false, "score": 0, "creation_date": 1575658541, "post_id": 59185625, "comment_id": 104653162, "body": "I fixed up my code but I am receiving this error: FileNotFoundError: [Errno 2] No such file or directory: &#39;file.txt&#39;. I will add in all my other code to show you. I want the name of the file to be provided as a command line argument. I am using IDLE 3 btw."}, {"owner": {"reputation": 465, "user_id": 6182097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tj9y1.png?s=128&g=1", "display_name": "Shaboti", "link": "https://stackoverflow.com/users/6182097/shaboti"}, "edited": false, "score": 0, "creation_date": 1575677115, "post_id": 59185625, "comment_id": 104658865, "body": "Use <code>sys.argv</code> to read the arguments <code>argv[0]</code> is the name of the program itself, <code>argv[1]</code> is the name of the first argument, file.txt in this case. check the code up."}], "tags": [], "owner": {"reputation": 465, "user_id": 6182097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tj9y1.png?s=128&g=1", "display_name": "Shaboti", "link": "https://stackoverflow.com/users/6182097/shaboti"}, "is_accepted": false, "score": 0, "last_activity_date": 1575676957, "last_edit_date": 1575676957, "creation_date": 1575499254, "answer_id": 59185625, "question_id": 59185553, "link": "https://stackoverflow.com/questions/59185553/how-to-write-a-function-that-will-return-a-dictionary-containing-data-loaded-fro/59185625#59185625", "title": "How to write a function that will return a dictionary containing data loaded from a text file", "body": "<p>This works if <code>file.txt</code> contains lines like <code>key,val</code>. use <code>python script.py file.txt</code></p>\n\n<pre><code>#!/usr/bin/python2\nimport sys\n\ndef makeSankey(file_name):\n    sankey = {}\n    with open(file_name) as f:\n        for line in f:\n            (key,val) = line.split(\",\")\n            # strip to remove \\n\n            sankey[key] = val.strip()\n\n    # return the dic to the caller\n    return sankey\n\nif __name__ == \"__main__\":\n    # received file name as an argument, if not then just pass it to makeSankey fun\n    sanKeyDic = makeSankey(sys.argv[1])\n    print(sanKeyDic)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 7493063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd90601cefd414c31f76178289dd6cb?s=128&d=identicon&r=PG", "display_name": "Guven Degirmenci", "link": "https://stackoverflow.com/users/7493063/guven-degirmenci"}, "is_accepted": false, "score": 1, "last_activity_date": 1575501492, "creation_date": 1575501492, "answer_id": 59185970, "question_id": 59185553, "link": "https://stackoverflow.com/questions/59185553/how-to-write-a-function-that-will-return-a-dictionary-containing-data-loaded-fro/59185970#59185970", "title": "How to write a function that will return a dictionary containing data loaded from a text file", "body": "<p>First of all, you can't access <code>sankey</code> outside the function.\nYou can't call <code>sankey</code> as it's not your function's name which is <code>makeSankey</code>.\nWhat you meant to do with <code>return makeSankey</code> was probably return the value, which is stored in <code>sankey</code> so you <code>return sankey</code>.</p>\n\n<p>Your code in fixed condition should be something like this, I still am not sure about the input if it's the same as you provided but you can try it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def makeSankey(fileName):\n    sankey = {}\n    with open(fileName) as f:\n        for line in f:\n            (key, val) = line.split()\n            sankey[key] = val\n    return sankey\n\ndata = makeSankey(\"file.txt\")\n\nfor i in data:\n    print(i, data[i])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12482582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc3d875ce5e7f57f95a92344f48a35d?s=128&d=identicon&r=PG&f=1", "display_name": "MrPuffy", "link": "https://stackoverflow.com/users/12482582/mrpuffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1575676957, "creation_date": 1575498708, "last_edit_date": 1575578203, "question_id": 59185553, "link": "https://stackoverflow.com/questions/59185553/how-to-write-a-function-that-will-return-a-dictionary-containing-data-loaded-fro", "title": "How to write a function that will return a dictionary containing data loaded from a text file", "body": "<p>This is what I have so far, right now I get sankey is not defined.</p>\n\n<pre><code>    def makeSankey (inf):\n\n     sankey = {}\n     with open(\"file.txt\") as f:\n         for line in f:\n            (key, val) = line.split()\n            sankey[str(key)] = val\n\n\n\n     return makeSankey()\n\n    for i in sankey():\n     print(i),sankey[i]`\n</code></pre>\n\n<p>The text file looks like this:</p>\n\n<pre><code>    Single,2106\n    Double,603\n    Triple,44\n    Home Run,431\n    Walk / HBP,1402\n    Sacrifice Out,137\n    Other Out,8160\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1575499253, "post_id": 59185550, "comment_id": 104591480, "body": "The <code>__builtins__</code> key that gets added is precisely how the <code>exec</code>ed code gets access to the built-in functions, types, exceptions, etc.  If you didn&#39;t want that to happen, I believe you could pass a globals dictionary like <code>{ &#39;__builtins__&#39;: {} }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 4229101, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fa10c18b838cc9d93b736c5ee6f3afba?s=128&d=identicon&r=PG", "display_name": "krzna", "link": "https://stackoverflow.com/users/4229101/krzna"}, "is_accepted": false, "score": 0, "last_activity_date": 1575503444, "creation_date": 1575503444, "answer_id": 59186239, "question_id": 59185550, "link": "https://stackoverflow.com/questions/59185550/understanding-exec-statement-with-a-globals-parameter/59186239#59186239", "title": "Understanding exec statement with a globals parameter", "body": "<p>gdict from your program changes because python dictionaries are mutable. All available builtins will be added to the globals dict when you run exec(f.read(), gdict) and this is reflected when you view gdict.keys()</p>\n"}], "owner": {"reputation": 23, "user_id": 2929735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e67c26e626bb91decbae7d419be298?s=128&d=identicon&r=PG&f=1", "display_name": "sea_nw", "link": "https://stackoverflow.com/users/2929735/sea-nw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575503444, "creation_date": 1575498692, "question_id": 59185550, "link": "https://stackoverflow.com/questions/59185550/understanding-exec-statement-with-a-globals-parameter", "title": "Understanding exec statement with a globals parameter", "body": "<p>I have a python script that I'm picking up from someone else and am trying to understand what's happening when it runs.</p>\n\n<p>I have a file in my current directory called __version__.py that contains the following line:</p>\n\n<p><code>__version__ = \"1.0\"</code></p>\n\n<p>In a separate script I have the following code:</p>\n\n<pre><code>import os\n\ngdict = {}\ncurr_dir = os.path.abspath(os.path.dirname(__file__))\nwith open(os.path.join(curr_dir, \"__version__.py\")) as f:\n    exec(f.read(), gdict)\n</code></pre>\n\n<p>I'm puzzled about what's going on with the exec statement.  My understanding from reading the documentation is that gdict is there to specify which global functions are available to the exec() function, and since it's empty there shouldn't be anything available to exec() beyond the built-in functions.  I had thought that gdict would remain empty, but when I run this code and then look at gdict.keys() I see:</p>\n\n<pre><code>dict_keys(['__builtins__', '__version__'])\n</code></pre>\n\n<p>I understand that the f.read() is creating a global variable called \"__version__\" with a value of \"1.0\", but how is gdict being populated?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575498841, "post_id": 59185512, "comment_id": 104591359, "body": "provide  a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5195569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93e14d13665f90c5b5d479e203c6698e?s=128&d=identicon&r=PG&f=1", "display_name": "Cmarv", "link": "https://stackoverflow.com/users/5195569/cmarv"}, "edited": false, "score": 0, "creation_date": 1575557654, "post_id": 59196375, "comment_id": 104613551, "body": "Thanks for this. The MRE is missing as i&#39;m working on someone else code and modifying to learn the basics , basically just learning... ; thanks for the info."}, {"owner": {"reputation": 119, "user_id": 5195569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93e14d13665f90c5b5d479e203c6698e?s=128&d=identicon&r=PG&f=1", "display_name": "Cmarv", "link": "https://stackoverflow.com/users/5195569/cmarv"}, "edited": false, "score": 0, "creation_date": 1575839964, "post_id": 59196375, "comment_id": 104691342, "body": "quick question , in your example , how you deal with the text. I manage with your help to solve the rotation( was hard to wrap my head around reseting the x,y). Let me update the question with what i&#39;m seeing on the text"}], "tags": [], "owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "is_accepted": true, "score": 1, "last_activity_date": 1575552835, "creation_date": 1575552835, "answer_id": 59196375, "question_id": 59185512, "link": "https://stackoverflow.com/questions/59185512/rotate-rect-along-line/59196375#59196375", "title": "Rotate Rect along line", "body": "<p>Rotation is always done according to the origin point (0, 0), so you need to translate to the origin point of the rotation and then apply it.</p>\n\n<p>Also, when applying any temporary change to the painter, <code>save()</code> and <code>restore()</code> should be used: in this way the current state of the painter is stored, and that state will be restored afterwards (including any transformation applied in the meantime). Painter states can be nested, and one could save multiple times to apply multiple \"layers\" of painter state modifications. Just remember that the <strong>all</strong> states must be restored to the base status before releasing (ending) the painter.</p>\n\n<p>Since you didn't provide an MRE, I created a small widget to show how this works:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3YzIo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3YzIo.png\" alt=\"rectangle rotation example\"></a></p>\n\n<pre><code>class AngledRect(QtWidgets.QWidget):\n    def __init__(self):\n        QtWidgets.QWidget.__init__(self)\n        self.setMinimumSize(200, 200)\n\n    def paintEvent(self, event):\n        qp = QtGui.QPainter(self)\n        qp.setRenderHints(qp.Antialiasing)\n\n        contents = self.contentsRect()\n        # draw a line from the top left to the bottom right of the widget\n        line = QtCore.QLineF(contents.topLeft(), contents.bottomRight())\n        qp.drawLine(line)\n\n        # save the current state of the painter\n        qp.save()\n        # translate to the center of the painting rectangle\n        qp.translate(contents.center())\n        # apply an inverted rotation, since the line angle is counterclockwise\n        qp.rotate(-line.angle())\n\n        # create a rectangle that is centered at the origin point\n        rect = QtCore.QRect(-40, -10, 80, 20)\n        qp.setPen(QtCore.Qt.white)\n        qp.setBrush(QtCore.Qt.black)\n        qp.drawRect(rect)\n        qp.drawText(rect, QtCore.Qt.AlignCenter, '{:.05f}'.format(line.angle()))\n        qp.restore()\n\n        # ... other painting...\n</code></pre>\n\n<p>For simple transformations, using <code>translate</code> and <code>rotate</code> is usually enough, but the above is almost identical to:</p>\n\n<pre><code>        transform = QtGui.QTransform()\n        transform.translate(contents.center().x(), contents.center().y())\n        transform.rotate(-line.angle())\n        qp.save()\n        qp.setTransform(transform)\n        # ...\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5195569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93e14d13665f90c5b5d479e203c6698e?s=128&d=identicon&r=PG&f=1", "display_name": "Cmarv", "link": "https://stackoverflow.com/users/5195569/cmarv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 59196375, "answer_count": 1, "score": 0, "last_activity_date": 1575842159, "creation_date": 1575498397, "last_edit_date": 1575842159, "question_id": 59185512, "link": "https://stackoverflow.com/questions/59185512/rotate-rect-along-line", "title": "Rotate Rect along line", "body": "<p>First project in qt. </p>\n\n<p>I'm having trouble translating/rotating a rect along a line. Basically i would want to align the rect with the position of the line. When i change position of the circle the rect should translate along the line. See images below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/BuEYe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BuEYe.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/RV6E6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RV6E6.png\" alt=\"enter image description here\"></a></p>\n\n<p>What i have at the moment </p>\n\n<pre><code>w_len = len(str(weight)) / 3 * r + r / 3\nweight_v = Vector(r if w_len &lt;= r else w_len, r)\nweight_rectangle = QRectF(*(mid - weight_v), *(2 * weight_v))\npainter.drawRect(weight_rectangle)\n</code></pre>\n\n<p>*mid is just a vector with coordinates at half of the link , weight_v is a vector based on the text size. </p>\n\n<p>Any pointers , should i look at adding a translate to the painter ? Whenever i try to add translation to the painter it breaks the other shapes as well.</p>\n\n<pre><code>t = QTransform()\nt.translate(-5 ,-5)\nt.rotate(90)\npainter.setTransform(t)\npainter.drawRect(weight_rectangle)\npainter.resetTransform()\n</code></pre>\n\n<p>Update:</p>\n\n<p>With below answer i was able to fix the rotation. Many thanks, looks like my text is not displaying correctly. </p>\n\n<p><a href=\"https://i.stack.imgur.com/G2Kq5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G2Kq5.png\" alt=\"enter image description here\"></a>  </p>\n\n<p>I have the following code: </p>\n\n<pre><code>painter.translate(center_of_rec_x, center_of_rec_y);\npainter.rotate(- link_paint.angle());\nrx = -(weight_v[0] * 0.5)\nry = -(weight_v[1] )\nnew_rec = QRect(rx , ry, weight_v[0], 2 * weight_v[1])\npainter.drawRect(QRect(rx , ry, weight_v[0] , 2 * weight_v[1] ))\npainter.drawText(new_rec, Qt.AlignCenter, str(weight))\n</code></pre>\n\n<p>Update2:</p>\n\n<p>All is fine , was a mistake in my code. I was taking the wrong link angle.</p>\n\n<p>Thx. </p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 750, "user_id": 7513755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUtEU.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7513755/brandon"}, "edited": false, "score": 0, "creation_date": 1575498557, "post_id": 59185507, "comment_id": 104591263, "body": "Can you include the code you use to write to csv?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575498593, "post_id": 59185507, "comment_id": 104591274, "body": "<code>df2 = result.groupby([&#39;Sub ID&#39;,&#39;Date&#39;,&#39;Campaign Name&#39;,&#39;Source&#39;,],as_index=False).agg({&#39;Clicks&#39;: &#39;sum&#39;, &#39;Conversions&#39;: &#39;sum&#39;, &#39;Views&#39;: &#39;sum&#39;, &#39;Cost&#39;: &#39;sum&#39;, &#39;Net Profit&#39;: &#39;sum&#39;, &#39;Revenue&#39;: &#39;sum&#39;, &#39;Profit&#39;: &#39;sum&#39;})</code> and the use <code>to_csv</code> .. ?"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1575498596, "post_id": 59185507, "comment_id": 104591275, "body": "I assume you are using <code>ignore_index=True</code> when you export, just set it to <code>False</code> or don&#39;t include it."}, {"owner": {"reputation": 113, "user_id": 12406721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LDocIh5oU5U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtKQ6eqGtQjYo12YSAtDtvozu6dQ/photo.jpg?sz=128", "display_name": "Mariana Rodrigues", "link": "https://stackoverflow.com/users/12406721/mariana-rodrigues"}, "edited": false, "score": 0, "creation_date": 1575500088, "post_id": 59185507, "comment_id": 104591744, "body": "Yes, I was using the index= True. I changed to false and it worked.  Now is like this: df2.to_csv(&quot;df2.csv&quot;, index=False, encoding=&#39;utf-8-sig&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1575498825, "post_id": 59185554, "comment_id": 104591351, "body": "think you meant <code>sum</code>?"}, {"owner": {"reputation": 113, "user_id": 12406721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LDocIh5oU5U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtKQ6eqGtQjYo12YSAtDtvozu6dQ/photo.jpg?sz=128", "display_name": "Mariana Rodrigues", "link": "https://stackoverflow.com/users/12406721/mariana-rodrigues"}, "edited": false, "score": 0, "creation_date": 1575500135, "post_id": 59185554, "comment_id": 104591762, "body": "Thank you that looks much easier and cleaner"}, {"owner": {"reputation": 750, "user_id": 7513755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUtEU.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7513755/brandon"}, "edited": false, "score": 0, "creation_date": 1575563637, "post_id": 59185554, "comment_id": 104616931, "body": "No prob. Please upvote/accept if this answers your question."}], "tags": [], "owner": {"reputation": 750, "user_id": 7513755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUtEU.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7513755/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1575498859, "last_edit_date": 1575498859, "creation_date": 1575498720, "answer_id": 59185554, "question_id": 59185507, "link": "https://stackoverflow.com/questions/59185507/exporting-csv-after-groupby-pandas-function/59185554#59185554", "title": "Exporting .csv after groupby pandas function", "body": "<p>Your aggregations can be done in a cleaner way. This should solve your problem:</p>\n\n<pre><code>target_cols = ['Clicks', 'Conversions', 'Views', 'Cost', 'Net Profit', 'Revenue', 'Profit']\ndf2 = result.groupby(['Sub ID','Date','Campaign Name','Source',])[target_cols].sum()\ndf.to_csv(desired_path)\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 12406721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LDocIh5oU5U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtKQ6eqGtQjYo12YSAtDtvozu6dQ/photo.jpg?sz=128", "display_name": "Mariana Rodrigues", "link": "https://stackoverflow.com/users/12406721/mariana-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575498859, "creation_date": 1575498366, "question_id": 59185507, "link": "https://stackoverflow.com/questions/59185507/exporting-csv-after-groupby-pandas-function", "title": "Exporting .csv after groupby pandas function", "body": "<p>I<code>m starting my studies in python and pandas and, at the moment, I</code>m trying to create a project that I need to export in .csv the following</p>\n\n<p>I created a groupby function like this one below:</p>\n\n<pre><code>df2 = result.groupby(['Sub ID','Date','Campaign Name','Source',]).agg({'Clicks': 'sum', 'Conversions': 'sum', 'Views': 'sum', 'Cost': 'sum', 'Net Profit': 'sum', 'Revenue': 'sum', 'Profit': 'sum'})\n</code></pre>\n\n<p>However, when I export to .csv only the columns for Clicks, Conversions, Views, Cost, Net Profit, Revenue and Profit are exported and not the first ones. Does anybody know how to fix that?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "sorting", "dictionary"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 2, "creation_date": 1575498431, "post_id": 59185479, "comment_id": 104591227, "body": "Its sorting strings, not numbers, you need to parse the integer"}, {"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 2, "creation_date": 1575498467, "post_id": 59185479, "comment_id": 104591238, "body": "You could split the values into a separate letter then number. Make sure to cast the number to int so it isn\u2019t treated as separate digits. Your key would be <code>lambda x: x[1], x[2]</code> where the tuples are <code>(name, letter, number)</code>"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1575498797, "post_id": 59185479, "comment_id": 104591340, "body": "FWIW, the dict is beside the point. You could reproduce the same sorting behaviour with a list."}, {"owner": {"reputation": 75, "user_id": 11040248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iwmfY2LA0_w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOEeccTkQ93rM4Su1ms4mdDb-ZaSg/mo/photo.jpg?sz=128", "display_name": "Mark Rogers", "link": "https://stackoverflow.com/users/11040248/mark-rogers"}, "edited": false, "score": 0, "creation_date": 1575498872, "post_id": 59185479, "comment_id": 104591365, "body": "ah, yes... very true. That makes total sense now. haha. thank you guys!"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 11040248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iwmfY2LA0_w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOEeccTkQ93rM4Su1ms4mdDb-ZaSg/mo/photo.jpg?sz=128", "display_name": "Mark Rogers", "link": "https://stackoverflow.com/users/11040248/mark-rogers"}, "edited": false, "score": 1, "creation_date": 1575499536, "post_id": 59185586, "comment_id": 104591575, "body": "Exactly what i was looking for. Thanks"}], "tags": [], "owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "is_accepted": true, "score": 2, "last_activity_date": 1575499004, "creation_date": 1575499004, "answer_id": 59185586, "question_id": 59185479, "link": "https://stackoverflow.com/questions/59185479/how-can-i-sort-a-dictionary-by-value-in-alphanumeric-order-with-python/59185586#59185586", "title": "How can I sort a dictionary by value in alphanumeric order with Python?", "body": "<p>Its sorting strings, not numbers, you need to parse the integer.</p>\n\n<p>The one line approach would be ugly, so i'd be tempted to convert the given key below into a seperate function that can handle the splitting of the list</p>\n\n<pre><code>sorted(\n    shoppingList.items(),\n    key=lambda k: (\n        ''.join(x for x in k[1] if not x.isdigit()),\n        int(''.join(x for x in k[1] if x.isdigit())) \n    )\n)\n</code></pre>\n\n\n\n<pre><code> [('gum', 'CL24'), ('tuna', 'W3'), ('beans', 'W6'), ('eggs', 'W29'), ('milk', 'W30')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 2, "last_activity_date": 1575501682, "creation_date": 1575501682, "answer_id": 59186002, "question_id": 59185479, "link": "https://stackoverflow.com/questions/59185479/how-can-i-sort-a-dictionary-by-value-in-alphanumeric-order-with-python/59186002#59186002", "title": "How can I sort a dictionary by value in alphanumeric order with Python?", "body": "<p>The module <a href=\"https://pypi.org/project/natsort/\" rel=\"nofollow noreferrer\">natsort</a> will do this in the order you want.</p>\n\n<pre><code>from natsort import natsorted\nfrom operator import itemgetter\n\nD = natsorted(shoppingList.items(), key=itemgetter(1))\n\n[('gum', 'CL24'), ('tuna', 'W3'), ('beans', 'W6'), ('eggs', 'W29'), ('milk', 'W30')]\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11040248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iwmfY2LA0_w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOEeccTkQ93rM4Su1ms4mdDb-ZaSg/mo/photo.jpg?sz=128", "display_name": "Mark Rogers", "link": "https://stackoverflow.com/users/11040248/mark-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 59185586, "answer_count": 2, "score": 1, "last_activity_date": 1575501682, "creation_date": 1575498246, "last_edit_date": 1575498642, "question_id": 59185479, "link": "https://stackoverflow.com/questions/59185479/how-can-i-sort-a-dictionary-by-value-in-alphanumeric-order-with-python", "title": "How can I sort a dictionary by value in alphanumeric order with Python?", "body": "<p>Im having a problem while sorting my dictionary with alphanumeric values. Each value has at least one letter in front (sometimes two) followed by some numbers. Example:</p>\n\n<pre><code>shoppingList = {'milk': 'W30', 'eggs': 'W29', 'tuna': 'W3', 'gum': 'CL24', 'beans': 'W6'}\n</code></pre>\n\n<p>When Im sorting it:</p>\n\n<pre><code>sorted_dict = sorted(shoppingList.items(), key = operator.itemgetter(1))\n\nfor i in sorted_dict:\n    print(i)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>('gum', 'CL24')\n('eggs', 'W29')\n('tuna', 'W3')\n('milk', 'W30')\n('beans', 'W6')\n</code></pre>\n\n<p>So it seems the sort is only using the first number it comes across. Is there a way to get the output as</p>\n\n<pre><code>('gum', 'CL24')\n('tuna', 'W3')\n('beans', 'W6')\n('eggs', 'W29')\n('milk', 'W30')\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "python-3.7", "histogram2d"], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": true, "score": 1, "last_activity_date": 1575503838, "creation_date": 1575503838, "answer_id": 59186281, "question_id": 59185448, "link": "https://stackoverflow.com/questions/59185448/cannot-get-a-simple-histogram-to-plot-in-python-3-7-notebook/59186281#59186281", "title": "Cannot get a SIMPLE HISTOGRAM to plot in Python 3.7 Notebook", "body": "<p>Use the hist function directly from matplotlib:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\n\nplt.hist(code['Age'])\nplt.show()\n</code></pre>\n\n<p>This should work. You can also do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\n\ncode['Age'].hist()\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12147171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDrZTUk5P6qA0Ln8OwjZ96ROuM9E8bMiD58rVhOrw=k-s128", "display_name": "Your Training Expert", "link": "https://stackoverflow.com/users/12147171/your-training-expert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59186281, "answer_count": 1, "score": 0, "last_activity_date": 1575503838, "creation_date": 1575498084, "question_id": 59185448, "link": "https://stackoverflow.com/questions/59185448/cannot-get-a-simple-histogram-to-plot-in-python-3-7-notebook", "title": "Cannot get a SIMPLE HISTOGRAM to plot in Python 3.7 Notebook", "body": "<p>Below is the error code I received as I am trying to do a Histogram from the DF \"code\" and the column (\"Age\")</p>\n\n<pre><code>code['Age'].plt.hist()\n1\ncode['Age'].plt.hist()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-44-2117f9d17105&gt; in &lt;module&gt;\n----&gt; 1 code['Age'].plt.hist()\n\n~\\Anaconda3\\lib\\site-packages\\pandas\\core\\generic.py in __getattr__(self, name)\n   5177             if self._info_axis._can_hold_identifiers_and_holds_name(name):\n   5178                 return self[name]\n-&gt; 5179             return object.__getattribute__(self, name)\n   5180 \n   5181     def __setattr__(self, name, value):\n\nAttributeError: 'Series' object has no attribute 'plt'\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12103811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc513814cf3c7f360e1cfaf0b5c9e64a?s=128&d=identicon&r=PG&f=1", "display_name": "CollegeStruggles", "link": "https://stackoverflow.com/users/12103811/collegestruggles"}, "edited": false, "score": 0, "creation_date": 1575499889, "post_id": 59185486, "comment_id": 104591682, "body": "Thank you.  It is much more simple than I thought."}], "tags": [], "owner": {"reputation": 170, "user_id": 8512880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8QDRI.jpg?s=128&g=1", "display_name": "Batcastle", "link": "https://stackoverflow.com/users/8512880/batcastle"}, "is_accepted": false, "score": 1, "last_activity_date": 1575498274, "creation_date": 1575498274, "answer_id": 59185486, "question_id": 59185404, "link": "https://stackoverflow.com/questions/59185404/how-to-iterate-2d-arrays/59185486#59185486", "title": "How to iterate 2D arrays", "body": "<p>2D arrays are fairly simple to iterate, as a list of lists. A simple example on how to iterate:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>my_list = [[1,2,3],[4,5,6],[7,8,9]]\nfor each in my_list:\n    # each is going to be equal to each list in my_list, so we can iterate over it with another, nested, for loop\n    for each1 in each:\n        # do what you want to do to each value\n        # in this example, I'm just printing\n        print(each1)\n</code></pre>\n\n<p>Something similar to this should allow you to iterate over most 2D lists.</p>\n\n<p>For more info, I suggest checking this out: <a href=\"https://www.geeksforgeeks.org/python-using-2d-arrays-lists-the-right-way/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/python-using-2d-arrays-lists-the-right-way/</a></p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 11833899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUAMC.jpg?s=128&g=1", "display_name": "scottapotamus", "link": "https://stackoverflow.com/users/11833899/scottapotamus"}, "is_accepted": false, "score": 0, "last_activity_date": 1575502683, "creation_date": 1575502683, "answer_id": 59186148, "question_id": 59185404, "link": "https://stackoverflow.com/questions/59185404/how-to-iterate-2d-arrays/59186148#59186148", "title": "How to iterate 2D arrays", "body": "<p>Just to add to Batcastle's answer, showing the iteration in the simplest way possible:</p>\n\n<p>You are basically selecting a list from a list and then selecting an item from that list, so if your array was:</p>\n\n<pre><code>array = [['a','b','c'],['d','e','f'],['g','h','i']]\n</code></pre>\n\n<p>Here's how you'd get values from it:</p>\n\n<pre><code># this would be equal to ['d','e','f']\nx = array[1]\n\n# this would be equal to 'h':\nx = array[2][1]\n\n# this would be equal to ['b','c']\nx  = array[0][1:3]\n</code></pre>\n\n<p>Remember when iterating that it will always go from the first position up to but not including the last.</p>\n\n<p>Hope that helps</p>\n"}], "owner": {"reputation": 21, "user_id": 12103811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc513814cf3c7f360e1cfaf0b5c9e64a?s=128&d=identicon&r=PG&f=1", "display_name": "CollegeStruggles", "link": "https://stackoverflow.com/users/12103811/collegestruggles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575502683, "creation_date": 1575497747, "last_edit_date": 1575500521, "question_id": 59185404, "link": "https://stackoverflow.com/questions/59185404/how-to-iterate-2d-arrays", "title": "How to iterate 2D arrays", "body": "<p>I was assigned a homework assignment on 2D arrays, but we didn't have time to go over them.  If anyone can try to walk me through it that would be much appreciated or direct me to a helpful source.  I am not even sure where to begin so anything helps.  Also if you could possibly walk through the first one that would be helpful.  Thank you.</p>\n\n<pre><code>import numpy as np\n\n\ndef modify_2d_array(array):\n    \"\"\"\n    Given a 2d numpy array iterate through the values and set the value equal to the row*column number\n\n    :param array: 2d numpy array\n    \"\"\"\n    pass\n\n\ndef sum_threshold_2d_array(array, threshold):\n    \"\"\"\n    Iterate through each element of the 2d array using nested loops.\n    Sum up the values that are greater than a threshold value given as an input parameter.\n\n    :param array: a 2d array\n    :param threshold: a threshold value (valid int or float)\n    :return: sum total of values above the threshold\n    \"\"\"\n    pass\n\n\ndef clipping_2d_array(array, threshold):\n    \"\"\"\n    Iterate through each element of the 2d array using nested loops.\n    Set the values greater than a threshold value equal to the threshold value given as an input parameter.\n\n    (E.g. if the threshold is 1 and there is a value 1.5, set the value to 1 in the array)\n\n    :param array: a 2d array\n    :param threshold: a threshold value (valid int or float)\n    \"\"\"\n    pass\n\n\ndef create_identity_matrix(n):\n    \"\"\"\n    Create a nxn sized identity matrix. The return type should be a list or numpy ndarray\n\n    For more info: https://en.wikipedia.org/wiki/Identity_matrix\n\n    For this exercise you can use nested loops to construct your 2d array or find an applicable function in the numpy library.\n\n    :param n:\n    :return: nxn ndarray where the diagonal elements are 1 and nondiagonal elements are 0\n    \"\"\"\n\n    pass\n\n\nif __name__ == \"__main__\":\n    my_example_array = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])\n    print(sum_threshold_2d_array(my_example_array, 5))\n    print(clipping_2d_array(my_example_array, 5))\n    print(create_identity_matrix(5))\n\n    # Modifies existing array\n    modify_2d_array(my_example_array)\n    print(my_example_array)\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 1, "creation_date": 1575503261, "post_id": 59185395, "comment_id": 104592583, "body": "It&#39;s best you take an example file, that just has a few lines and you post the exact erro, that you get with the code and the data that you posted here."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11642881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d23b54c55966d163c185f593276110?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Sapparapu", "link": "https://stackoverflow.com/users/11642881/rahul-sapparapu"}, "is_accepted": false, "score": 0, "last_activity_date": 1575530594, "creation_date": 1575530594, "answer_id": 59190120, "question_id": 59185395, "link": "https://stackoverflow.com/questions/59185395/how-to-plot-data-from-csv-excel-file/59190120#59190120", "title": "How to plot data from CSV excel file", "body": "<p>Try importing <strong>matplotlib.pyplot.plot</strong> and use the this:</p>\n\n<pre><code>lines = df.plot.line(x, y)\n</code></pre>\n\n<p>by editing your last 3 lines of code</p>\n"}], "owner": {"reputation": 39, "user_id": 12327425, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x6eG_-ayVbU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdwFdiOTSjHDwV6KoI0tJ7fbTb-GA/photo.jpg?sz=128", "display_name": "sunny", "link": "https://stackoverflow.com/users/12327425/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575530594, "creation_date": 1575497695, "last_edit_date": 1575529656, "question_id": 59185395, "link": "https://stackoverflow.com/questions/59185395/how-to-plot-data-from-csv-excel-file", "title": "How to plot data from CSV excel file", "body": "<p>I'm trying to plot a line graph of two separate columns in a csv excel file using Python. The file contains 5 columns of details about movies that came out in 2016, which are: movie titles/release date/Distributor/Genre/MPAA/tickets sold. </p>\n\n<p>In this particular scenario I'm trying to plot the release date and the number of tickets sold as a line graph and then find which month has the highest rate of tickets sold. <a href=\"https://i.stack.imgur.com/cpm0o.png\" rel=\"nofollow noreferrer\">Here's some of the dataframe of the CSV file.</a> This is what I have so far but I'm not sure where to go from here, plus I keep running into a lot of errors. if anyone could help I'd appreciate it.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom datetime import datetime\nimport csv\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nheaders = ['Tickets Sold','Release Date']\ndf = pd.read_csv('2016_movie_data.csv',names=headers)\nprint (df)\n\ndf['Release Date'] = df['Release Date'].map(lambda x: datetime.strptime(str(x), '%Y/%m/%d %H:%M:%S.%f'))\nx = df['Release Date']\ny = df['Tickets Sold']\n\n# plot\nplt.plot(x,y)\n# beautify the x-labels\nplt.gcf().autofmt_xdate()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "object-detection"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1575500356, "post_id": 59185710, "comment_id": 104591818, "body": "Thank you for you reply. What I&#39;m trying to change is the amount of images that evaluates, not the frecuency."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1575503174, "post_id": 59185710, "comment_id": 104592556, "body": "@Jos&#233;Luis As I interpreted: ` that the global step and the loss will be logged during training` means that when it arrives to a checkpoint, then the losses will be logged based of the result of the summary of the previous n samples evaluation."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1575505324, "post_id": 59185710, "comment_id": 104593088, "body": "@Jos&#233;Luis Did you try out? If it won&#39;t wirk I will test in my environment too."}, {"owner": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1575572572, "post_id": 59185710, "comment_id": 104621146, "body": "yes, actually in the code I posted I have: log_step_count_steps = 10 and still evaluates 100 images. I&#39;d like the evaluation process to evaluates 9999 images"}, {"owner": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1587844542, "post_id": 59185710, "comment_id": 108671368, "body": "could you check it out?"}], "tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": false, "score": 0, "last_activity_date": 1575499743, "creation_date": 1575499743, "answer_id": 59185710, "question_id": 59185358, "link": "https://stackoverflow.com/questions/59185358/how-to-increase-100-image-default-for-tensorflow-model-main-py/59185710#59185710", "title": "How to increase 100-image default for tensorflow model_main.py?", "body": "<p>The row:</p>\n\n<pre><code>config = tf.estimator.RunConfig(model_dir=FLAGS.model_dir)\n</code></pre>\n\n<p>instantiates a <code>tf.estimator.RunConfig</code> object.\nBased of its <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/RunConfig\" rel=\"nofollow noreferrer\">documentation</a> it accept a <code>log_step_count_steps</code> keyword argument:</p>\n\n<blockquote>\n  <p><strong>log_step_count_steps:</strong> The frequency, in number of global steps, that the global step and the loss will be logged during training. Also controls the frequency that the global steps / s will be logged (and written to summary) during training.</p>\n</blockquote>\n\n<p>Its <strong>default value</strong> is <code>100</code>.\nSo you can pass a new value to this keyword argument:</p>\n\n<pre><code>config = tf.estimator.RunConfig(model_dir=FLAGS.model_dir, log_step_count_steps=anynumber )\n</code></pre>\n\n<p>I guess it will work for you.</p>\n"}], "owner": {"reputation": 83, "user_id": 6552718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c199695e1a304e6beba18917c9b13e?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/6552718/jos%c3%a9-luis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575505310, "creation_date": 1575497505, "last_edit_date": 1575505310, "question_id": 59185358, "link": "https://stackoverflow.com/questions/59185358/how-to-increase-100-image-default-for-tensorflow-model-main-py", "title": "How to increase 100-image default for tensorflow model_main.py?", "body": "<p>I'm running model_main.py (<a href=\"https://github.com/tensorflow/models/blob/master/research/object_detection/model_main.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/models/blob/master/research/object_detection/model_main.py</a>) to train an OD model.</p>\n\n<p>After some steps, evaluation starts. Here is the log:</p>\n\n<pre><code>2019-12-04 18:38:59,859 - tensorflow - INFO - Running local_init_op.\n\n2019-12-04 18:39:00,032 - tensorflow - INFO - Done running local_init_op.\n\n2019-12-04 18:39:04,461 - tensorflow - INFO - Evaluation [10/100]\n\n2019-12-04 18:39:06,404 - tensorflow - INFO - Evaluation [20/100]\n\n2019-12-04 18:39:08,155 - tensorflow - INFO - Evaluation [30/100]\n\n2019-12-04 18:39:09,934 - tensorflow - INFO - Evaluation [40/100]\n\n2019-12-04 18:39:11,761 - tensorflow - INFO - Evaluation [50/100]\n\n2019-12-04 18:39:13,584 - tensorflow - INFO - Evaluation [60/100]\n\n2019-12-04 18:39:15,379 - tensorflow - INFO - Evaluation [70/100]\n\n2019-12-04 18:39:17,073 - tensorflow - INFO - Evaluation [80/100]\n\n2019-12-04 18:39:19,001 - tensorflow - INFO - Evaluation [90/100]\n\n2019-12-04 18:39:20,742 - tensorflow - INFO - Evaluation [100/100]\n\n2019-12-04 18:39:21,949 - tensorflow - INFO - **Performing evaluation on 100 images**.\n\n2019-12-04 18:39:21,952 - tensorflow - INFO - Loading and preparing annotation results...\n\n2019-12-04 18:39:21,962 - tensorflow - INFO - DONE (t=0.01s)\n\n2019-12-04 18:39:29,931 - tensorflow - INFO - Finished evaluation at 2019-12-04-18:39:29\n\n2019-12-04 18:39:29,931 - tensorflow - INFO - Saving dict for global step 17507: DetectionBoxes_Precision/mAP = 0.44948143, DetectionBoxes_Precision/mAP (large) = 0.582809, DetectionBoxes_Precision/mAP (medium) = 0.33799592, DetectionBoxes_Precision/mAP (small) = 0.09610865, DetectionBoxes_Precision/mAP@.50IOU = 0.67960435, DetectionBoxes_Precision/mAP@.75IOU = 0.4594444, DetectionBoxes_Recall/AR@1 = 0.44452518, DetectionBoxes_Recall/AR@10 = 0.49779674, DetectionBoxes_Recall/AR@100 = 0.49779674, DetectionBoxes_Recall/AR@100 (large) = 0.636014, DetectionBoxes_Recall/AR@100 (medium) = 0.39656863, DetectionBoxes_Recall/AR@100 (small) = 0.15524893, Loss/BoxClassifierLoss/classification_loss = 0.16186869, Loss/BoxClassifierLoss/localization_loss = 0.19118023, Loss/RPNLoss/localization_loss = 0.087585546, Loss/RPNLoss/objectness_loss = 0.11538031, Loss/total_loss = 0.5560148, global_step = 17507, learning_rate = 0.001, loss = 0.5560148\n\n2019-12-04 18:39:32,022 - tensorflow - INFO - Saving 'checkpoint_path' summary for global step 17507: ../../Data/Training\\model.ckpt-17507\n</code></pre>\n\n<p>I'd like to evalute more than 100 images.</p>\n\n<p>1) Which configuration param I should change?</p>\n\n<p>2) Are those eval images in the <code>eval.tfrecord</code>? or <code>train</code>?</p>\n\n<p>I have <code>sample_1_of_n_eval_examples</code> and <code>sample_1_of_n_eval_on_train_examples</code> set in 1.\n<code>eval_training_data</code> in False.</p>\n\n<p>I changed those params but it seems those are not the ones I should change.</p>\n\n<p>The line is running is:</p>\n\n<pre><code>config = tf.estimator.RunConfig(       \n  model_dir                            = FLAGS.model_dir,\n  save_checkpoints_secs                = 60 * 5,\n  keep_checkpoint_max                  = 0,\n  save_summary_steps                   = 1000,\n  log_step_count_steps                 = 10)\n\ntrain_and_eval_dict                    = model_lib.create_estimator_and_inputs(\n  run_config                           = config,\n  hparams                              = model_hparams.create_hparams(FLAGS.hparams_overrides),\n  pipeline_config_path                 = FLAGS.pipeline_config_path,\n  train_steps                          = FLAGS.num_train_steps, \n  sample_1_of_n_eval_examples          = FLAGS.sample_1_of_n_eval_examples,\n  sample_1_of_n_eval_on_train_examples = FLAGS.sample_1_of_n_eval_on_train_examples,\n  override_eval_num_epochs             = False)\n\nestimator                              = train_and_eval_dict['estimator']\ntrain_input_fn                         = train_and_eval_dict['train_input_fn']\neval_input_fns                         = train_and_eval_dict['eval_input_fns']\neval_on_train_input_fn                 = train_and_eval_dict['eval_on_train_input_fn']\npredict_input_fn                       = train_and_eval_dict['predict_input_fn']\ntrain_steps                            = train_and_eval_dict['train_steps']\n\n\n  train_spec, eval_specs = model_lib.create_train_and_eval_specs(\n      train_input_fn,\n      eval_input_fns,\n      eval_on_train_input_fn,\n      predict_input_fn,\n      train_steps,\n      eval_on_train_data=False)\n</code></pre>\n\n<p>Tensorflow 1.14\nWindows 10</p>\n"}, {"tags": ["python", "python-3.x", "text", "parallel-processing"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1575503252, "post_id": 59185357, "comment_id": 104592579, "body": "I don&#39;t know how python processes re, but in general it is optimal to call re.compile() once, and re.execute() repeatedly."}], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 6437260, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c43edeef899721eaca382ac5ecb3d327?s=128&d=identicon&r=PG&f=1", "display_name": "i2_", "link": "https://stackoverflow.com/users/6437260/i2"}, "edited": false, "score": 0, "creation_date": 1575794333, "post_id": 59185823, "comment_id": 104679683, "body": "Thank you. It works. Before use this code the program took 13 mins. Now it takes 2 mins."}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "reply_to_user": {"reputation": 435, "user_id": 6437260, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c43edeef899721eaca382ac5ecb3d327?s=128&d=identicon&r=PG&f=1", "display_name": "i2_", "link": "https://stackoverflow.com/users/6437260/i2"}, "edited": false, "score": 0, "creation_date": 1575829799, "post_id": 59185823, "comment_id": 104688507, "body": "Awesome, glad to hear it!"}], "tags": [], "owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "is_accepted": true, "score": 2, "last_activity_date": 1575501847, "last_edit_date": 1575501847, "creation_date": 1575500480, "answer_id": 59185823, "question_id": 59185357, "link": "https://stackoverflow.com/questions/59185357/parallel-computing-for-large-text-files/59185823#59185823", "title": "Parallel Computing for Large Text Files", "body": "<p>This applies a text-processing function (currently with the <code>re.sub</code> from your question) to <code>NUM_CORES</code> equally sized chunks of your input text file, then writes them out (preserving the order from your original text input file). </p>\n\n<pre><code>from multiprocessing import Pool, cpu_count\nimport numpy as np\nimport re\n\nNUM_CORES = cpu_count()\n\ndef process_text(input_textlines):\n    clean_text = []\n    for line in input_textlines:\n        cleaned = re.sub(\"^(\\\\|)([0-9])(\\\\s)([A-Z][a-z]+[a-z])\\\\,\", \"1\\\\2\\t\\\\3\\\\4,\", line)\n        clean_text.append(cleaned)\n    return \"\".join(clean_text)\n\n# read in data and convert to sequence of equally-sized chunks\nwith open('data/text.txt', 'r') as f:\n    lines = f.readlines()\n\nnum_lines = len(lines)\ntext_chunks = np.array_split(lines, NUM_CORES)\n\n# process each chunk in parallel\npool = Pool(NUM_CORES)\nresults = pool.map(process_text, text_chunks)\n\n# write out results\nwith open(\"new_text.txt\", \"w\", newline=\"\\n\") as f:\n    for text_chunk in results:\n        f.write(text_chunk)\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 6437260, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c43edeef899721eaca382ac5ecb3d327?s=128&d=identicon&r=PG&f=1", "display_name": "i2_", "link": "https://stackoverflow.com/users/6437260/i2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 59185823, "answer_count": 1, "score": 1, "last_activity_date": 1575501847, "creation_date": 1575497500, "last_edit_date": 1575497667, "question_id": 59185357, "link": "https://stackoverflow.com/questions/59185357/parallel-computing-for-large-text-files", "title": "Parallel Computing for Large Text Files", "body": "<p>I am trying to find some typos in very big text files and correct them. Basicly, I run this code:</p>\n\n<pre><code>ocr = open(\"text.txt\")\ntext = ocr.readlines()\nclean_text = []\nfor line in text:\n    last = re.sub(\"^(\\\\|)([0-9])(\\\\s)([A-Z][a-z]+[a-z])\\\\,\",     \"1\\\\2\\t\\\\3\\\\4,\",     line)\n    clean_text.append(last) \nnew_text = open(\"new_text.txt\", \"w\", newline=\"\\n\") \nfor line in clean_text:\n    new_text.write(line)\nnew_text.close()\n</code></pre>\n\n<p>In reality I use 're.sub' function more than 1500 times and 'text.txt' has 100.000 lines. \nCan I divide my text into pieces and use different cores for different parts? </p>\n"}, {"tags": ["python", "dataframe", "apply"], "comments": [{"owner": {"reputation": 695, "user_id": 6934489, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/aa1df7a1a5d874f48bf8250542baee32?s=128&d=identicon&r=PG&f=1", "display_name": "DPdl", "link": "https://stackoverflow.com/users/6934489/dpdl"}, "edited": false, "score": 0, "creation_date": 1575498675, "post_id": 59185331, "comment_id": 104591294, "body": "I found out that this works: df[&#39;func_d&#39;] = df.apply(lambda x: func_d(x[&#39;Y&#39;],x[&#39;E&#39;]), axis=1)"}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 6934489, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/aa1df7a1a5d874f48bf8250542baee32?s=128&d=identicon&r=PG&f=1", "display_name": "DPdl", "link": "https://stackoverflow.com/users/6934489/dpdl"}, "edited": false, "score": 0, "creation_date": 1575498292, "post_id": 59185431, "comment_id": 104591187, "body": "Thank you. &#39;typ&#39; is a little more complicated than what I stated in the original question. There are several possible values for type and what func returns depends on the value of typ."}, {"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1575498340, "post_id": 59185431, "comment_id": 104591205, "body": "You don&#39;t need the lamba, you can pass additional positional or keyword arguments to apply using the args and **kwds arguments. Check out the docs <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 8577640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cTZ2ZO-GRMo/AAAAAAAAAAI/AAAAAAAAAQM/T5tl-pJuzXc/photo.jpg?sz=128", "display_name": "Shruthi Kubatur", "link": "https://stackoverflow.com/users/8577640/shruthi-kubatur"}, "reply_to_user": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1575499936, "post_id": 59185431, "comment_id": 104591698, "body": "@SimonN Thanks. Updated my answer."}], "tags": [], "owner": {"reputation": 43, "user_id": 8577640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cTZ2ZO-GRMo/AAAAAAAAAAI/AAAAAAAAAQM/T5tl-pJuzXc/photo.jpg?sz=128", "display_name": "Shruthi Kubatur", "link": "https://stackoverflow.com/users/8577640/shruthi-kubatur"}, "is_accepted": false, "score": 0, "last_activity_date": 1575500482, "last_edit_date": 1575500482, "creation_date": 1575497924, "answer_id": 59185431, "question_id": 59185331, "link": "https://stackoverflow.com/questions/59185331/apply-a-function-to-a-dataframe/59185431#59185431", "title": "Apply a function to a dataframe", "body": "<p>What is 'typ'? Do you want that as an argument? The function should ideally have row or column as an argument. So, something like this may work:</p>\n\n<pre><code>def func_d(row, typ='d'):\n    E = row['E']\n    Y = row['Y']\n    if typ == 'd':\n        return E/Y\n    else:\n        return E*Y\n\ndf['func_d'] = df.apply(lambda row:func_d(row,'d'), axis = 1)\n</code></pre>\n\n<p>Without the lambda function, it would be</p>\n\n<pre><code>df['func_d'] = df.apply(func_d, axis = 1, args = (\"d\"))\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 6934489, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/aa1df7a1a5d874f48bf8250542baee32?s=128&d=identicon&r=PG&f=1", "display_name": "DPdl", "link": "https://stackoverflow.com/users/6934489/dpdl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575500482, "creation_date": 1575497362, "question_id": 59185331, "link": "https://stackoverflow.com/questions/59185331/apply-a-function-to-a-dataframe", "title": "Apply a function to a dataframe", "body": "<p>I have a dataframe 'df' that looks like this:</p>\n\n<pre><code>                Y        E\n1312  2.098650e-10  4.05909\n1313  9.294030e-10  4.11673\n1314  5.596410e-10  4.18051\n1315  7.395250e-10  4.18648\n1316  3.997430e-10  4.20233\n</code></pre>\n\n<p>I want to apply a function to the values in columns Y and E to a new column 'func_d'.</p>\n\n<pre><code>def func(typ, Y, E):\n    if typ=='d':\n        return E/Y\n    else:\n        return E*Y\n\ndef func_d(Y,E):\n    return func('d', Y, E)\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>TypeError: (\"'Series' object is not callable\", 'occurred at index 1312')</p>\n</blockquote>\n\n<p>when I do this:</p>\n\n<pre><code>df['func_d'] = df.apply(func_d(df['Y'],df['E']), axis=1)\n</code></pre>\n\n<p>Am I not passing the variables to <code>func_d</code> correctly?</p>\n"}, {"tags": ["python", "html", "web2py"], "comments": [{"owner": {"reputation": 1099, "user_id": 3401916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f43cd5722eff52c0c2d14e65022754?s=128&d=identicon&r=PG&f=1", "display_name": "David_O", "link": "https://stackoverflow.com/users/3401916/david-o"}, "edited": false, "score": 0, "creation_date": 1576080075, "post_id": 59185302, "comment_id": 104784310, "body": "That&#39;s quite a big question. Your view at the moment is just displaying data and you need a process to pass data back to the server. The simplest approach is to pass a FORM to your view. That would have a submit button to send the data back and update the database. If you want to update on click then you&#39;re looking at AJAX, which uses Javascript on the page to post information back to the server. This is more of a hint at what options you have than an answer :)"}, {"owner": {"reputation": 1, "user_id": 12482482, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nC9L3WuwiNE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdx-x0Z0_6MFULs3ZVHK8ZejZAYQw/photo.jpg?sz=128", "display_name": "Josh Butterworth", "link": "https://stackoverflow.com/users/12482482/josh-butterworth"}, "reply_to_user": {"reputation": 1099, "user_id": 3401916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f43cd5722eff52c0c2d14e65022754?s=128&d=identicon&r=PG&f=1", "display_name": "David_O", "link": "https://stackoverflow.com/users/3401916/david-o"}, "edited": false, "score": 0, "creation_date": 1577964583, "post_id": 59185302, "comment_id": 105292796, "body": "Hi David, Thanks for the help. I&#39;ve added a form to the view:  &lt;form method=&quot;post&quot;,action=&quot;TaskCompletePost&quot;&gt;     &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;, class=&#39;btn btn-success btn-sm&#39;, style=&#39;float:right&#39;&gt; and I have this saying:  def TaskCompletePost():     vars=request.vars     redirect(URL(&#39;index&#39;,vars = vars, args=[&#39;TaskCompletePost&#39;]))     return However I&#39;m still unsure of how to make the controller read the &#39;true&#39; checkboxes and append them to the database :/ Apologies - very new to programming!!"}, {"owner": {"reputation": 1099, "user_id": 3401916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f43cd5722eff52c0c2d14e65022754?s=128&d=identicon&r=PG&f=1", "display_name": "David_O", "link": "https://stackoverflow.com/users/3401916/david-o"}, "edited": false, "score": 0, "creation_date": 1578303461, "post_id": 59185302, "comment_id": 105382712, "body": "I think you&#39;re missing the link between models, controller and views. The controller function for a page links your models to your views and is the main way to interact with data in the tables. So, rather than creating a pure HTML form in the views/, you use the controller to create the form and pass that to the view. The rendering process converts it to HTML but maintains a set of links that allows you to interact with it. Have a look at the minimal example in the web2py book here: <a href=\"http://web2py.com/books/default/chapter/29/07/forms-and-validators#SQLFORM\" rel=\"nofollow noreferrer\">web2py.com/books/default/chapter/29/07/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 12482482, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nC9L3WuwiNE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdx-x0Z0_6MFULs3ZVHK8ZejZAYQw/photo.jpg?sz=128", "display_name": "Josh Butterworth", "link": "https://stackoverflow.com/users/12482482/josh-butterworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575497230, "creation_date": 1575497230, "question_id": 59185302, "link": "https://stackoverflow.com/questions/59185302/processing-a-completed-checkbox-web2py", "title": "Processing a completed checkbox [web2py]", "body": "<p>Hi I'm a complete beginner so apologies if this is simple. I'm using web2py to create a 'simple' to do list. I want to be able to process the result from user interaction with a checkbox into my database but I've no idea how to make my page refresh and add the record in.</p>\n\n<p>Table in question is:</p>\n\n<pre><code>db.define_table('todo',\n                Field('completed', type='boolean', label='Completed', default=False))\n</code></pre>\n\n<p>This is currently represented in my views with:</p>\n\n<pre><code>&lt;td&gt;&lt;input type=\"checkbox\" name=\"completed\" value=\"{{=x.completed}}\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>I'm completely lost for ideas on how to make the result of user interaction with the checkbox update the master database - ideally as soon as someone clicks the checkbox it would update the database, please could someone point me in the right direction?</p>\n\n<p>Thanks,\nJosh</p>\n"}, {"tags": ["python", "optimization", "scipy"], "answers": [{"tags": [], "owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "is_accepted": true, "score": 1, "last_activity_date": 1575505642, "creation_date": 1575505642, "answer_id": 59186501, "question_id": 59185273, "link": "https://stackoverflow.com/questions/59185273/index-1-is-out-of-bounds-for-axis-0-with-size-1-while-trying-to-maximize-a-funct/59186501#59186501", "title": "Index 1 is out of bounds for axis 0 with size 1 while trying to maximize a function", "body": "<p>I am using Python 3.6.9 and scipy 1.3.3. Your code runs fine, except that the minimize operation does not converge. This is because you start with <code>x0 = [0, 0]</code>, which is used in <code>u(x)</code> where <code>log(0)</code> is then calculated. If you provide a different x0 (up to [5, 4], after that it stops converging), it works. With a little re-write (e.g., you do not need interp1d as all you are interpolating through is a natural logarithm), this looks like:</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import minimize\n\n\ndef u(x):\n    return np.log(x[0] ** alpha * x[0] ** (beta + nabla))\n\n\ndef k_plus(k, x):\n    return A * k + 1 - delta - x[0] - x[1]\n\n\ndef obj_fun(x, k, v_array):\n    return -u(x) - rho * np.log(k_plus(k, x))\n\n\nalpha = 1\nbeta = 0.5\nnabla = 0.5\nA = 1\ndelta = 1\nrho = 1\n\ngrid_max = 10\ngrid_size = 250\ngrid = np.linspace(1e-5, grid_max, grid_size)\n\nx_prueba = [2, 2]\nk = 10\n\nres = minimize(obj_fun, x0=[5, 4], args=(k, np.log(grid)),\n               bounds=((0, np.inf), (0, np.inf)),\n               constraints={\"type\": \"ineq\",\n                            \"fun\": lambda x: -x[0] - x[1] + 10})\nprint(res.success)\nprint(res.x)\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>True\n[6.66662927 0.        ]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6423778, "user_type": "registered", "profile_image": "https://graph.facebook.com/1545483942/picture?type=large", "display_name": "Martin Valdez", "link": "https://stackoverflow.com/users/6423778/martin-valdez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59186501, "answer_count": 1, "score": 0, "last_activity_date": 1575505642, "creation_date": 1575497037, "last_edit_date": 1575498125, "question_id": 59185273, "link": "https://stackoverflow.com/questions/59185273/index-1-is-out-of-bounds-for-axis-0-with-size-1-while-trying-to-maximize-a-funct", "title": "Index 1 is out of bounds for axis 0 with size 1 while trying to maximize a function", "body": "<p>I am trying to set up a dynamic programming problem:</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import minimize\nfrom scipy.interpolate import interp1d\n\n\nalpha = 1\nbeta = 0.5\nnabla = 0.5\nA = 1\ndelta = 1\nrho = 1\n\ngrid_max=10\ngrid_size=250\ngrid = np.linspace(1e-5, grid_max, grid_size)\n\ndef u(x):\n    return np.log((x[0]**alpha)*x[0]**(beta+nabla))\n\ndef f(x):\n    return A*x\n\ndef k_plus(k,x):\n    return f(k)+(1-delta)-x[0]-x[1]\n\ndef obj_fun(x,k,v_array):\n    \"\"\"note v_array is our guess of v evaluated at the grid points. \n    we then interpolate in between\"\"\"\n    v = interp1d(grid, v_array)\n\n    return u(x) + rho*v(k_plus(k,x))\n\nx_prueba = [2,2]\nk=10\nobjetivo = lambda x: (-1)*obj_fun(x,k,np.log(grid))\nminimize(objetivo, x0=[0,0], bounds=[(0, None), (0,None)], \n         constraints={\"type\": \"ineq\", \"fun\": lambda x: -x[0] -  x[1] + 10})\n</code></pre>\n\n<p>The parameters' values are like that for ease of computation but they will be different of course.\nThe latest error I get is:\nIteration limit exceeded</p>\n\n<p>I appreciate any help, and please let me know if the question is ill-pose in order to fix it</p>\n"}, {"tags": ["python", "django", "nginx", "webserver", "gunicorn"], "comments": [{"owner": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497161, "post_id": 59185255, "comment_id": 104590867, "body": "what makes you think its your  compute  or  nginx ? How  does this profiling compare to your local django request? Also, what is the distance between you and the linode server? Assuming you&#39;re in Australia and the server is in NYC thats quite a trip!"}, {"owner": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497367, "post_id": 59185255, "comment_id": 104590924, "body": "btw, if your site is &quot;lodugo.com&quot; i got a sub 70 ms response time which is SUPER fast even though it just says &quot;hola&quot;"}, {"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "reply_to_user": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497447, "post_id": 59185255, "comment_id": 104590947, "body": "In my development server the request doesn&#39;t take more than 200ms, and the url I&#39;m profiling usually never pass the 100ms, my linode server is on Texas, and I&#39;m on Chile, if I do a ping command the packets vary from 90ms to 130ms, I think that&#39;s ok, and yes, the site is &quot;lodugo.com&quot;, but on the very first request I cannot make it to respond as it should, sometimes it takes even 1 minute to get that &quot;Hola&quot; back, but after that it&#39;s very fast"}, {"owner": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497554, "post_id": 59185255, "comment_id": 104590980, "body": "Yeah so the distance from Texas to Chile is very big. So that will always add some delay. If you want to speed it up once you are all setup, use a CDN like CloudFlare to help distribute that static files and help speed up some requests from far away places"}, {"owner": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497644, "post_id": 59185255, "comment_id": 104591001, "body": "Also, if this is a new site with a new server and name etc, the DNS&#39;s servers around the world need to update their records and include your site. So until the rest of the network picks up there will be some slowness"}, {"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "reply_to_user": {"reputation": 459, "user_id": 7596388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287d123447c991169f410aca0ae68376?s=128&d=identicon&r=PG&f=1", "display_name": "William Bright", "link": "https://stackoverflow.com/users/7596388/william-bright"}, "edited": false, "score": 0, "creation_date": 1575497756, "post_id": 59185255, "comment_id": 104591036, "body": "But it is really normal to have to wait those 20 seconds for just a text response?, the server is already 1 month old, and also, after the first request everythiing start to work pretty well, I just feel something might be wrong"}, {"owner": {"reputation": 91, "user_id": 11945492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9tTq.jpg?s=128&g=1", "display_name": "HellaSpace", "link": "https://stackoverflow.com/users/11945492/hellaspace"}, "edited": false, "score": 0, "creation_date": 1576088423, "post_id": 59185255, "comment_id": 104788430, "body": "I really don&#39;t know how to phrase this into words but it&#39;s along the lines of: The server goes to sleep when it doesn&#39;t have any requests. However once you do send the first request, the server starts actively listening for more. It&#39;s working the way it&#39;s supposed to, there&#39;s absolutely nothing wrong with it."}, {"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "edited": false, "score": 0, "creation_date": 1576089206, "post_id": 59185255, "comment_id": 104788810, "body": "Sorry but if my visits are low and then after a couple hours someone access my website I don&#39;t want that person to wait about 20 seconds to 1 minute to get the response from the server in the very first request, I have never seen that behaviour over any other website. In any case, there is a way to keep it always on?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "edited": false, "score": 0, "creation_date": 1576154403, "post_id": 59295858, "comment_id": 104811955, "body": "Wow, that&#39;s sounds about right, just one of those IP addresses is the correct one!, but I&#39;m using a NameCheap domain, I truly have two A records, but both point to 45.56.114.74, can you give me a hand on where is the other IP set?, I will update the question with my DNS configuration"}, {"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "edited": false, "score": 0, "creation_date": 1576155450, "post_id": 59295858, "comment_id": 104812499, "body": "Forget that, you were right, after you pointed that out I solved my problem after a little of investigation, thank you so much!"}, {"owner": {"reputation": 1290, "user_id": 11203006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce586ce00e49e2de25d1c0e1b00251?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Bailey", "link": "https://stackoverflow.com/users/11203006/mark-bailey"}, "reply_to_user": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "edited": false, "score": 0, "creation_date": 1576155706, "post_id": 59295858, "comment_id": 104812683, "body": "Great.  I&#39;m sure the 2 separate A records for @ (= bare domain) and www are fine.  Was the URL redirect record causing the problem?"}, {"owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "edited": false, "score": 0, "creation_date": 1576155808, "post_id": 59295858, "comment_id": 104812746, "body": "I&#39;m not 100% sure, but I deleted the A record for the www and the URL redirect, then, created a new URL redirect from www to <a href=\"https://lodugo.com\" rel=\"nofollow noreferrer\">lodugo.com</a>, and after that the dig command reported only one IP address and everything started to work pretty well out of the box"}], "tags": [], "owner": {"reputation": 1290, "user_id": 11203006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce586ce00e49e2de25d1c0e1b00251?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Bailey", "link": "https://stackoverflow.com/users/11203006/mark-bailey"}, "is_accepted": true, "score": 2, "last_activity_date": 1576108622, "creation_date": 1576108622, "answer_id": 59295858, "question_id": 59185255, "link": "https://stackoverflow.com/questions/59185255/nginx-takes-too-long-to-send-the-network-response-using-django-with-gunicorn/59295858#59295858", "title": "Nginx takes too long to send the network response using Django with Gunicorn", "body": "<p>Do you realise there are 2 A records for your domain name?</p>\n\n<pre><code>$ dig lodugo.com\n...\n;; ANSWER SECTION:\nlodugo.com.             1308    IN      A       192.64.119.241\nlodugo.com.             1308    IN      A       45.56.114.74\n</code></pre>\n\n<p>DNS servers will respond with each IP address in turn.  I suspect that only one of the addresses is correct so there is a 50% chance of getting a bad address that will eventually timeout, and then may retry.</p>\n\n<p>This fits with what I have seen - Often taking a long time to connect, but once you hit the right address that will give fast responses until the DNS record reaches the end of it's TTL.  At that point you have a 50% chance again. </p>\n"}], "owner": {"reputation": 53, "user_id": 12482423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCT445EFs1ID1nHMaD-9ngyL-RcVimnk7ODHimd=k-s128", "display_name": "Maria N&#250;&#241;ez Belloso", "link": "https://stackoverflow.com/users/12482423/maria-n%c3%ba%c3%b1ez-belloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 59295858, "answer_count": 1, "score": 3, "last_activity_date": 1576154528, "creation_date": 1575496943, "last_edit_date": 1576154528, "question_id": 59185255, "link": "https://stackoverflow.com/questions/59185255/nginx-takes-too-long-to-send-the-network-response-using-django-with-gunicorn", "title": "Nginx takes too long to send the network response using Django with Gunicorn", "body": "<p>I'm developing a web application with Django, and so far everything seems ok, but I'm having a big problem with my server response, usually the first time I want to enter it takes around 20 to 40 seconds to get the response back from the server.</p>\n\n<p>I'm using a Linode linux virtual machine running Ubuntu 18.04, is a very cheap plan just for now with only one core CPU, 2GB of ram and 50Gb of SSD storage, however as I'm the only one accessing the website I feel it is not correct that it takes so long to response (It just happen every time I restart nginx or gunicorn, or after some time of inactivity, after it respond it start to work with a normal speed).</p>\n\n<p>I made a performance record with chrome dev tools and these were my results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n2751.png\" rel=\"nofollow noreferrer\">Network result</a></p>\n\n<p>As you can see the network request took 22 seconds, and if I check the main thread I can see that chrome detects that time as idle, and the real time it takes the server to process the view is only a few milliseconds.</p>\n\n<p><a href=\"https://i.stack.imgur.com/tzGcj.png\" rel=\"nofollow noreferrer\">Chrome results</a></p>\n\n<p>I also have my server with an SSL certificate, the config for nginx is the following:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>upstream rienpaAdmin {\n    server 127.0.0.1:8000 fail_timeout=0;\n}\n\nserver {\n    listen 443 ssl;\n    listen [::]:443 ssl;\n    ssl on;\n    ssl_certificate /correct/path/certificate.crt;\n    ssl_certificate_key /correct/path/certificate.key;\n    server_name lodugo.com www.lodugo.com;\n\n    client_max_body_size 4G;\n\n    access_log /var/www/rienpaAdmin/nginx-access.log;\n    error_log /var/www/rienpaAdmin/nginx-error.log;\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location /static/ {\n        root /var/www/rienpaAdmin;\n    }\n\n    location / {\n        include proxy_params;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_redirect off; \n        proxy_buffering off;\n        proxy_headers_hash_max_size 512;\n        proxy_headers_hash_bucket_size 128;\n        proxy_pass http://unix:/run/gunicorn.sock;\n    }\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n\n    server_name lodugo.com www.lodugo.com;\n    return 301 https://$server_name$request_uri;\n}\n</code></pre>\n\n<p>And I have a gunicorn service and socket like this:</p>\n\n<p>socket:</p>\n\n<pre><code>[Unit]\nDescription=gunicorn socket\n\n[Socket]\nListenStream=/run/gunicorn.sock\n\n[Install]\nWantedBy=sockets.target\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>[Unit]\nDescription=gunicorn daemon\nRequires=gunicorn.socket\nAfter=network.target\n\n[Service]\nUser=www-data\nGroup=www-data\nWorkingDirectory=/var/www/rienpaAdmin\nExecStart=/var/www/rienpaAdmin/adminPython/bin/gunicorn \\\n          --access-logfile - \\\n          --workers 3 \\\n          --threads 1 \\\n          --bind unix:/run/gunicorn.sock \\\n          rienpaAdmin.wsgi:application\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>Anyone can give me a good explaination why this is happening?, I can upgrade my Linode server but I really feel that my current setup for just one user should respond very fast as it does after the first request, I have several days reading other questions but none of them really helped me to figure this out.</p>\n\n<p>Just in case, I'm using Django 3.0 with a postgreSQL database</p>\n\n<p>EDIT:</p>\n\n<p>One of the answers says that I have two A records to different IPs, here is a screenshot of my DNS configuration of my NameCheap domain</p>\n\n<p><a href=\"https://i.stack.imgur.com/FNKvR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FNKvR.png\" alt=\"here\"></a> </p>\n"}, {"tags": ["python", "url", "urllib"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 3, "creation_date": 1575496996, "post_id": 59185248, "comment_id": 104590819, "body": "What would be the expected ouput?"}, {"owner": {"reputation": 169, "user_id": 12126280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b2fcbef7c1b09b826b9cf44f05e91b?s=128&d=identicon&r=PG&f=1", "display_name": "soccer_analytics_fan", "link": "https://stackoverflow.com/users/12126280/soccer-analytics-fan"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1575497069, "post_id": 59185248, "comment_id": 104590833, "body": "I assume [ becomes %5B, ] becomes %5D and so on for the comma and apostrophe"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1575497107, "post_id": 59185248, "comment_id": 104590845, "body": "You need to encode a <i>string</i> with those characters then. Encoding a list doesn&#39;t make any sense."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1575497141, "post_id": 59185248, "comment_id": 104590862, "body": "<code>urllib.parse.urlencode(str(l))</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1575497196, "post_id": 59185248, "comment_id": 104590871, "body": "From <code>help(urllib.parse.urlencode)</code>: &quot;Encode a dict or sequence of two-element tuples into a URL query string.&quot; You can&#39;t encode the list you are passing as an argument."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 1, "creation_date": 1575497386, "post_id": 59185248, "comment_id": 104590928, "body": "What are you url encoding this for? this feels more like POST data than something you&#39;d include in a url"}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1575497391, "creation_date": 1575497391, "answer_id": 59185338, "question_id": 59185248, "link": "https://stackoverflow.com/questions/59185248/how-could-i-url-encode-a-list-in-python/59185338#59185338", "title": "How could I url encode a list in python", "body": "<p><code>urlencode()</code> is used to convert a mapping or sequence of tuples into a query string. <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>In your case, it sounds like you want to replace special characters in a string. So first, you need to convert your list to a string. If it is a literal, like you show here, you can just add quotes around it. Or if it is a variable, you can call <code>str(l)</code>. Also, you should use <code>quote()</code> or <code>quote_plus()</code>:</p>\n\n<pre><code>quote(str(l))\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 12126280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b2fcbef7c1b09b826b9cf44f05e91b?s=128&d=identicon&r=PG&f=1", "display_name": "soccer_analytics_fan", "link": "https://stackoverflow.com/users/12126280/soccer-analytics-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1575497391, "creation_date": 1575496925, "question_id": 59185248, "link": "https://stackoverflow.com/questions/59185248/how-could-i-url-encode-a-list-in-python", "title": "How could I url encode a list in python", "body": "<p>Hi I am trying to url encode a list in python. This is the list: l = [['-3','3',['1004364']]]</p>\n\n<pre><code>l = [['-3','3',['1004364']]]\nurllib.parse.urlencode(l)\n</code></pre>\n\n<p>When I try to encode this list I get the following error: TypeError: not a valid non-string sequence or mapping object.</p>\n\n<p>How can I encode this using urllib?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1575496765, "post_id": 59185176, "comment_id": 104590751, "body": "<code>pd.concat(dfs_list, axis=1, ignore_index = True)</code>?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1575497975, "post_id": 59185176, "comment_id": 104591090, "body": "From your post, looks like <code>dfs_list</code> contains differently indexes dataframes?"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 3, "last_activity_date": 1575498552, "last_edit_date": 1575498552, "creation_date": 1575497715, "answer_id": 59185397, "question_id": 59185176, "link": "https://stackoverflow.com/questions/59185176/combining-list-of-dataframes/59185397#59185397", "title": "Combining List of DataFrames", "body": "<p>Let's use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.join.html#pandas-dataframe-join\" rel=\"nofollow noreferrer\"><code>join</code></a>.</p>\n\n<pre><code>df_list[0].join(df_list[1:])\n</code></pre>\n\n<p>Notes on join  </p>\n\n<blockquote>\n  <p>Join columns with other DataFrame either on index or on a key column.\n  Efficiently join multiple DataFrame objects by index at once by\n  passing a list.</p>\n  \n  <p>other : DataFrame, Series, or <strong><em>list of DataFrame</em></strong></p>\n</blockquote>\n"}], "owner": {"reputation": 445, "user_id": 11831806, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ft17asFByR4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRMl72ErQTkvGaz7cJQxW7VJcduA/photo.jpg?sz=128", "display_name": "dfahsjdahfsudaf", "link": "https://stackoverflow.com/users/11831806/dfahsjdahfsudaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575512360, "creation_date": 1575496510, "last_edit_date": 1575512360, "question_id": 59185176, "link": "https://stackoverflow.com/questions/59185176/combining-list-of-dataframes", "title": "Combining List of DataFrames", "body": "<p>dfs_list is a huge list of dataframes. For example here are three of the dataframes in the list:</p>\n\n<pre><code>[2501 rows x 2 columns],       ABCD TEST  ABCD TRIAL\nTime                                           \n0.000             NaN                  1.048793\n0.002             NaN                  1.048793\n0.004             NaN                  1.017976\n0.006             NaN                  1.059065\n0.008             NaN                  1.038521\n...               ...                       ...\n4.992             NaN                  0.997432\n4.994             NaN                  1.007704\n4.996             NaN                  1.007704\n4.998             NaN                  0.987160\n5.000             NaN                  0.001027\n\n[2501 rows x 2 columns],        ABC TEST  ABC TRIAL\nTime                                            \n0.000          0.73632                  1.039654\n0.002          0.76128                  1.021422\n0.004          0.82368                  0.984959\n0.006          0.74880                  1.021422\n0.008          0.71136                  1.048769\n...                ...                       ...\n4.992          0.72384                  1.012306\n4.994          0.71136                  1.030538\n4.996          0.76128                  0.984959\n4.998          0.69888                  1.021422\n5.000          0.03744                 -0.008660\n\n[2501 rows x 2 columns]]\n[      ABDCE TEST  ABCDE TRIAL\nTime                                           \n0.000             NaN                  1.065354\n0.002             NaN                  1.065354\n0.004             NaN                  1.048597\n0.006             NaN                  1.048597\n0.008             NaN                  1.065354\n...               ...                       ...\n4.992             NaN                  0.989946\n4.994             NaN                  1.006703\n4.996             NaN                  1.006703\n4.998             NaN                  1.006703\n5.000             NaN                  0.001257\n</code></pre>\n\n<p>I want to combine the list of dataframes to have an output like this:</p>\n\n<pre><code>                ABCD TEST     ABCD TRIAL    ABC TEST    ABC TRIAL   ABDCE TEST   ABCDE TRIAL\n\n    Time                                           \n    0.000       NaN        1.048793        0.73632        1.039654         NaN      1.065354\n    0.002       NaN        1.048793        0.76128        1.021422         NaN      1.065354\n    0.004       NaN        1.017976        0.82368        0.984959         NaN      1.048597\n    0.006       NaN        1.059065        0.74880        1.021422         NaN      1.048597\n    0.008       NaN        1.038521        0.71136        1.048769         NaN      1.065354\n    ...         ...             ...            ...             ...         ...           ...\n    4.992       NaN        0.997432        0.72384        1.012306         NaN      0.989946\n    4.994       NaN        1.007704        0.71136        1.030538         NaN      1.006703\n    4.996       NaN        1.007704        0.76128        0.984959         NaN      1.006703\n    4.998       NaN        0.987160        0.69888        1.021422         NaN      1.006703\n    5.000       NaN        0.001027        0.03744       -0.008660         NaN      0.001257\n</code></pre>\n\n<p>All of the dataframes are 2501 rows x 2 columns and have 'Time' as the index. All the 'Time' index values are exactly the same for all the dataframes.</p>\n\n<p>When I do:</p>\n\n<pre><code>pd.concat(dfs_list, axis=1)\n</code></pre>\n\n<p>The output is a dataframe that has a lot of Nan values.</p>\n\n<p>The closest I have gotten is using this code:</p>\n\n<pre><code>reduce(lambda left, right: pd.merge(left, right, left_index=True, right_index=True), dfs_list)\n</code></pre>\n\n<p>This correctly combines all the dataframes in dfs_list but only outputs the first row (Time = 0.0).</p>\n\n<p>To address the comment if I used ignore_index the dataframe result is:</p>\n\n<pre><code>       0         1    2         3        4    ...       383      384       385  386       387\nTime                                          ...                                            \n0.000  NaN  1.065354  NaN  1.048793  0.73632  ...  1.010290  0.64896  0.803985  NaN  0.665822\n0.002  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n0.002  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n0.002  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n0.002  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n...    ...       ...  ...       ...      ...  ...       ...      ...       ...  ...       ...\n4.998  NaN       NaN  NaN       NaN      NaN  ...       NaN  0.66144  0.934120  NaN       NaN\n4.998  NaN  1.006703  NaN  0.987160  0.69888  ...  0.991581      NaN       NaN  NaN  1.037600\n4.998  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n5.000  NaN       NaN  NaN       NaN      NaN  ...       NaN      NaN       NaN  NaN       NaN\n5.000  NaN  0.001257  NaN  0.001027  0.03744  ... -0.009355  0.00000  0.006913  NaN  0.234896\n</code></pre>\n\n<p>EDIT:\nWhat if I remove the time column all together and reset the index? I don't really care about the time column.. just the TEST AND TRIAL columns. Then the df_list would look like this:</p>\n\n<pre><code>[2501 rows x 2 columns],      ABCD TEST  ABCD TRIAL\n4893             NaN                  1.048793\n4894             NaN                  1.048793\n4895             NaN                  1.017976\n4896             NaN                  1.059065\n4897             NaN                  1.038521\n...              ...                       ...\n7389             NaN                  0.997432\n7390             NaN                  1.007704\n7391             NaN                  1.007704\n7392             NaN                  0.987160\n7393             NaN                  0.001027\n\n[2501 rows x 2 columns],       ABC TEST  ABC TRIAL\n4007          0.73632                  1.039654\n4008          0.76128                  1.021422\n4009          0.82368                  0.984959\n4010          0.74880                  1.021422\n4011          0.71136                  1.048769\n...               ...                       ...\n6503          0.72384                  1.012306\n6504          0.71136                  1.030538\n6505          0.76128                  0.984959\n6506          0.69888                  1.021422\n6507          0.03744                 -0.008660\n\n[2501 rows x 2 columns]]\n[     ABCDE TEST  ABCDE TRIAL\n4862             NaN                  1.065354\n4863             NaN                  1.065354\n4864             NaN                  1.048597\n4865             NaN                  1.048597\n4866             NaN                  1.065354\n...              ...                       ...\n7358             NaN                  0.989946\n7359             NaN                  1.006703\n7360             NaN                  1.006703\n7361             NaN                  1.006703\n7362             NaN                  0.001257\n</code></pre>\n\n<p>However, if I try <code>pd.concat(dfs_list, axis=1, ignore_index=True)</code> the output is still:</p>\n\n<pre><code>      0    1    2    3    4    ...  383  384  385  386       387\n12    NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN       NaN\n13    NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN       NaN\n14    NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN       NaN\n15    NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN       NaN\n16    NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN       NaN\n...   ...  ...  ...  ...  ...  ...  ...  ...  ...  ...       ...\n7491  NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN  0.970004\n7492  NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN  0.978454\n7493  NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN  1.020701\n7494  NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN  1.037600\n7495  NaN  NaN  NaN  NaN  NaN  ...  NaN  NaN  NaN  NaN  0.234896\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "batch-file"], "comments": [{"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1575496733, "post_id": 59185151, "comment_id": 104590740, "body": "add <code>conda activate</code> in  script"}, {"owner": {"reputation": 36, "user_id": 11711172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CGgpyEUY72A/AAAAAAAAAAI/AAAAAAAAAA8/TcPWA0sidHA/photo.jpg?sz=128", "display_name": "RJC", "link": "https://stackoverflow.com/users/11711172/rjc"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1575500660, "post_id": 59185151, "comment_id": 104591874, "body": "Apologies, if you could clarify a bit, do you mean add &quot;conda activate&quot; after @echo off?"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1575988389, "post_id": 59185151, "comment_id": 104746217, "body": "yes, since your code in python file is based on the anaconda python envronmnet not on the system python env i sugeest you to replicate step in bash to create anaconda env and invoke anaconda env before executing python file"}], "owner": {"reputation": 36, "user_id": 11711172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CGgpyEUY72A/AAAAAAAAAAI/AAAAAAAAAA8/TcPWA0sidHA/photo.jpg?sz=128", "display_name": "RJC", "link": "https://stackoverflow.com/users/11711172/rjc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575496334, "creation_date": 1575496334, "question_id": 59185151, "link": "https://stackoverflow.com/questions/59185151/getting-modulenotefounderror-running-python-3-7-from-batch-file", "title": "Getting ModuleNoteFoundError running python (3.7) from batch file", "body": "<p>I am trying to run a python script from a batch file, but it is returning a moduleNotFound error for pandas. I have python 3.7 and use anaconda/spyder, pandas is installed and the script works fine in spyder. I found a very similar question, but the solution offered failed to work for me.</p>\n\n<p>(<a href=\"https://stackoverflow.com/questions/54275817/modulenotfounderror-when-running-python-script-from-a-batch-file\">ModuleNotFoundError when running python script from a batch file</a>)</p>\n\n<pre><code>@echo off\n\"...\\Anaconda3\\pkgs\\python-3.7.1-h8c8aaf0_6\\python.exe\" \"...\\Code\\main.py\" %*\npause\n</code></pre>\n\n<p>Both with and without the %* has failed to work. Not used to using .bat, help and guidance would be appreciated.</p>\n"}, {"tags": ["python", "xml"], "comments": [{"owner": {"reputation": 187, "user_id": 5623153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3JAz2.png?s=128&g=1", "display_name": "WarBro", "link": "https://stackoverflow.com/users/5623153/warbro"}, "edited": false, "score": 0, "creation_date": 1575497238, "post_id": 59185125, "comment_id": 104590888, "body": "Can you explain a little more what the keys/values are in the dictionary?"}, {"owner": {"reputation": 187, "user_id": 5623153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3JAz2.png?s=128&g=1", "display_name": "WarBro", "link": "https://stackoverflow.com/users/5623153/warbro"}, "edited": false, "score": 0, "creation_date": 1575497410, "post_id": 59185125, "comment_id": 104590935, "body": "The <code>.find</code> and <code>.findall</code> methods use XPATH strings. The etree documentation has a good section on building XPATH strings, but basically I suspect you will need <code>for variable_name in root.findall(&quot;.&#47;&#47;variable-name&quot;)</code>"}, {"owner": {"reputation": 3, "user_id": 12482408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519824e34edc3a5568f5c9c8434dfb84?s=128&d=identicon&r=PG&f=1", "display_name": "PotatoSack", "link": "https://stackoverflow.com/users/12482408/potatosack"}, "reply_to_user": {"reputation": 187, "user_id": 5623153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3JAz2.png?s=128&g=1", "display_name": "WarBro", "link": "https://stackoverflow.com/users/5623153/warbro"}, "edited": false, "score": 0, "creation_date": 1575497485, "post_id": 59185125, "comment_id": 104590961, "body": "they will be the variable-name from the xml file.  so example 5:Inspection, Inspection would be added to the dictionary and counted 1 time.  i figured that would be the easiest way to count what variable-name is used and how many times it appears"}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 5623153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3JAz2.png?s=128&g=1", "display_name": "WarBro", "link": "https://stackoverflow.com/users/5623153/warbro"}, "is_accepted": true, "score": 0, "last_activity_date": 1575498423, "creation_date": 1575498423, "answer_id": 59185514, "question_id": 59185125, "link": "https://stackoverflow.com/questions/59185125/cannot-figure-out-how-to-populate-a-dictionary-from-an-xml-file/59185514#59185514", "title": "cannot figure out how to populate a dictionary from an xml file", "body": "<p>So first, you're going to want to pull all the variable_name nodes. The <code>.find</code> method will return the <em>first</em> node that matches the specified XPATH. The <code>.findall</code> method will return an array of <em>all</em> nodes that match. Next you're going to want to process the text. If you <em>know</em> that <em>all</em> variable names have a colon, you can use <code>.split()</code> on the string. Finally you can use <code>if key in dict.keys()</code> to check if a key exists.</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\ntree = ET.parse(\"sample.xml\")\nroot = tree.getroot()\n\ndict = {}\n\n# Loop through all nodes with tag &lt;variable_name&gt;\nfor variable_name in root.findall(\".//variable_name\"):\n\n    text = variable_name.text    # Get the raw text from the xml\n\n    variable = text.split(\":\")[1]    # Splits the text into an array\n                                     # [\"#\",\"VARIABLE\"]\n                                     # keep the second element\n\n    if variable in dict.keys():\n        dict[variable] += 1    # Increment the count for that variable\n    else:\n        dict[variable] = 1     # Add the new variable to dict, initialize to 1\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12482408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519824e34edc3a5568f5c9c8434dfb84?s=128&d=identicon&r=PG&f=1", "display_name": "PotatoSack", "link": "https://stackoverflow.com/users/12482408/potatosack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59185514, "answer_count": 1, "score": 0, "last_activity_date": 1575498423, "creation_date": 1575496136, "last_edit_date": 1575497968, "question_id": 59185125, "link": "https://stackoverflow.com/questions/59185125/cannot-figure-out-how-to-populate-a-dictionary-from-an-xml-file", "title": "cannot figure out how to populate a dictionary from an xml file", "body": "<p>I am brand new to python. I am working in 2.7 and I'm trying to parse an XML file to populate a dictionary and keep track of how many times the variable-name is used (the name will change, hence the dictionary), it also needs to skip the number and colon in the variable-name. I know I need to pull it as an element so I can manipulate it but I am not sure how. Please help. This is what I have back tracked to along with a section of the XML code.</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\ntree = ET.parse(sample.xml)\nroot = tree.getroot()\n\nd = {}\n\nfor iec-source in root:\n\n    variable_code = variable.find('variable-name')\n\nif variable_code.text == #varibale is in dictionary add count\n\nelse #add to dictionary and add count\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1GBIF.png\" rel=\"nofollow noreferrer\">xml picture</a></p>\n"}, {"tags": ["python", "sql", "discord.py", "mysql-connector"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1575519677, "post_id": 59185094, "comment_id": 104596110, "body": "What database library are you using? If it isn&#39;t explicitly async, then <code>await mycursor.execute</code> doesn&#39;t make sense and will cause an error."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 3397643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2da19655be5ceac32773d3be31bae20?s=128&d=identicon&r=PG&f=1", "display_name": "J0hn", "link": "https://stackoverflow.com/users/3397643/j0hn"}, "is_accepted": false, "score": 0, "last_activity_date": 1575564531, "creation_date": 1575564531, "answer_id": 59199779, "question_id": 59185094, "link": "https://stackoverflow.com/questions/59185094/discord-py-insert-values-into-database-using-mysql-connector/59199779#59199779", "title": "Discord.py Insert Values into Database using mysql-connector", "body": "<p>I've worked with mysql and discord bots for a few of my projects so I can give some insight to you here.</p>\n\n<p>Firstly, you shouldn't need to use await on the <code>mycursor.execute</code> or <code>mydb.commit()</code> calls.</p>\n\n<p>Secondly, the way I did my code was a bit different, take this for what it's worth but I know that it should work.  I had an SQLCmds.py file, which is imported into the main discord bot python file.  Inside the SQLCmds.py is all the necessary functions for placing new information into the MySQL Database.  So instead of calling SQL functions inside of the discord bot's code, you're calling a function similar to your top code and passing in whatever information the bot has.</p>\n\n<p>So for example, here's a banned word check:</p>\n\n<pre><code>def checkBannedWord(banned_word):\n    mycursor.execute(\"SELECT filtered_to FROM banned_word_table WHERE banned_word = '\"+str(banned_word).lower()+\"'\")\n    result = mycursor.fetchall()\n    if result != []:\n        return result[0][0]\n    else:\n        return False\n</code></pre>\n\n<p>In your discord bot's code, you'd be able to <code>checkBannedWord(banned_word)</code> and call this SQL function. It would make the whole process much more straightforward for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 12482413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51772fedc8904e10289fa23c8d822d85?s=128&d=identicon&r=PG&f=1", "display_name": "MarkRommins", "link": "https://stackoverflow.com/users/12482413/markrommins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2446, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575564531, "creation_date": 1575495986, "question_id": 59185094, "link": "https://stackoverflow.com/questions/59185094/discord-py-insert-values-into-database-using-mysql-connector", "title": "Discord.py Insert Values into Database using mysql-connector", "body": "<p>I am trying to insert values into a database through user input. The following code works without user input:</p>\n\n<pre><code>mycursor = mydb.cursor()\nsql = \"INSERT INTO DiscordData (UserID, Code) VALUES (%s, %s)\"\nval = (\"1234\", \"foobar\")\nmycursor.execute(sql, val)\nmydb.commit()\nprint(mycursor.rowcount, \"record inserted.\")\n</code></pre>\n\n<p>However data isn't inserted when i pass the code into a command handler for user input:</p>\n\n<pre><code>@bot.command()\nasync def foo(message, arg):\n    if isinstance(message.channel, discord.DMChannel):\n        await message.send(arg)\n        mycursor = mydb.cursor()\n        sql = \"INSERT INTO DiscordData (UserID, Code) VALUES (%s, %s)\"\n        val = (\"123\", arg)\n        await mycursor.execute(sql, val)\n        await mydb.commit()\n        print(mycursor.rowcount, \"record inserted.\")\n</code></pre>\n"}, {"tags": ["python", "xml", "parsing"], "comments": [{"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 1, "creation_date": 1575496283, "post_id": 59185089, "comment_id": 104590600, "body": "What did you try?"}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 5623153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/3JAz2.png?s=128&g=1", "display_name": "WarBro", "link": "https://stackoverflow.com/users/5623153/warbro"}, "is_accepted": false, "score": 0, "last_activity_date": 1575496660, "creation_date": 1575496660, "answer_id": 59185210, "question_id": 59185089, "link": "https://stackoverflow.com/questions/59185089/parsing-xml-with-python-and-exporting-to-excel/59185210#59185210", "title": "Parsing XML with Python and exporting to excel", "body": "<p>I recommend reading the python documentation. From <a href=\"https://docs.python.org/2/library/xml.etree.elementtree.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/xml.etree.elementtree.html</a>:</p>\n\n<pre><code> import xml.etree.ElementTree as ET\n tree = ET.parse('country_data.xml')\n root = tree.getroot()\n</code></pre>\n\n<p>I also recommend checking out <a href=\"https://xlsxwriter.readthedocs.io/\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/</a></p>\n\n<p>As far as the logic for manipulating the data, unless you absolutely know the specific order/structure of the xml file, you may run in to problems as there is nothing (as far as I can tell) differentiating <code>&lt;node&gt;A&lt;/node&gt;</code> from <code>&lt;node&gt;a&lt;/node&gt;</code> or limiting the number of nodes to exactly 8, so you would need to check that stuff and other things of that nature to make sure things end up lined up correctly in the excel file.</p>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1575498845, "last_edit_date": 1575498845, "creation_date": 1575498481, "answer_id": 59185524, "question_id": 59185089, "link": "https://stackoverflow.com/questions/59185089/parsing-xml-with-python-and-exporting-to-excel/59185524#59185524", "title": "Parsing XML with Python and exporting to excel", "body": "<p>One solution is to transform this XML (?) to HTML table and then load the HTML table to excel.</p>\n\n<p>For example (using BeautifulSoup library):</p>\n\n<pre><code>data = '''\n     &lt;Result name=\"1\"&gt;\n       &lt;point&gt;\n       &lt;objects&gt;\n          &lt;object&gt;\n             &lt;path&gt;\n                &lt;node&gt;A&lt;/node&gt;\n                &lt;node&gt;a&lt;/node&gt;\n                &lt;node&gt;B&lt;/node&gt;\n                &lt;node&gt;b&lt;/node&gt;\n                &lt;node&gt;C&lt;/node&gt;\n                &lt;node&gt;c&lt;/node&gt;\n                &lt;node&gt;D&lt;/node&gt;\n                &lt;node&gt;d&lt;/node&gt;\n             &lt;path/&gt;\n          &lt;object/&gt;\n          &lt;object&gt;\n             &lt;path&gt;\n                &lt;node&gt;A&lt;/node&gt;\n                &lt;node&gt;a&lt;/node&gt;\n                &lt;node&gt;B&lt;/node&gt;\n                &lt;node&gt;b&lt;/node&gt;\n                &lt;node&gt;C&lt;/node&gt;\n                &lt;node&gt;c&lt;/node&gt;\n                &lt;node&gt;D&lt;/node&gt;\n                &lt;node&gt;d&lt;/node&gt;\n               &lt;/path&gt;\n            &lt;object/&gt;\n         &lt;objects/&gt;\n      &lt;Result/&gt;\n   &lt;Results/&gt;'''\n\nimport re\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(re.sub(r'&lt;(.*?)/&gt;', r'&lt;/\\1&gt;', data), 'html.parser')\n\nnum_objects = len(soup.select('object'))\nnum_nodes = len(soup.select_one('object').select('node')) // 2\n\nprint('&lt;html&gt;&lt;table border=1&gt;')\nprint('&lt;tr&gt;')\nprint('&lt;th&gt;Result&lt;/th&gt;')\nfor i in range(num_objects):\n    print('&lt;th colspan={}&gt;Object&lt;/th&gt;'.format(num_nodes))\nprint('&lt;/tr&gt;')\n\nfor result in soup.select('Result[name]'):\n    print('&lt;tr&gt;')\n    print('&lt;td rowspan=2&gt;{}&lt;/td&gt;'.format(result['name']))\n\n    nodes = result.select('node')\n    for node in nodes[::2]:\n        print('&lt;td&gt;' + node.text + '&lt;/td&gt;')\n    print('&lt;/tr&gt;')\n    print('&lt;tr&gt;')\n    for node in nodes[1::2]:\n        print('&lt;td&gt;' + node.text + '&lt;/td&gt;')\n    print('&lt;/tr&gt;')\nprint('&lt;/table&gt;&lt;/html&gt;')\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>&lt;html&gt;&lt;table border=1&gt;\n&lt;tr&gt;\n&lt;th&gt;Result&lt;/th&gt;\n&lt;th colspan=4&gt;Object&lt;/th&gt;\n&lt;th colspan=4&gt;Object&lt;/th&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td rowspan=2&gt;1&lt;/td&gt;\n&lt;td&gt;A&lt;/td&gt;\n&lt;td&gt;B&lt;/td&gt;\n&lt;td&gt;C&lt;/td&gt;\n&lt;td&gt;D&lt;/td&gt;\n&lt;td&gt;A&lt;/td&gt;\n&lt;td&gt;B&lt;/td&gt;\n&lt;td&gt;C&lt;/td&gt;\n&lt;td&gt;D&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;a&lt;/td&gt;\n&lt;td&gt;b&lt;/td&gt;\n&lt;td&gt;c&lt;/td&gt;\n&lt;td&gt;d&lt;/td&gt;\n&lt;td&gt;a&lt;/td&gt;\n&lt;td&gt;b&lt;/td&gt;\n&lt;td&gt;c&lt;/td&gt;\n&lt;td&gt;d&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;&lt;/html&gt;\n</code></pre>\n\n<p>In Firefox, it looks:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ms8Vr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ms8Vr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Loading the data to LibreOffice Calc is easy (should be easy in Excel too):</p>\n\n<p><a href=\"https://i.stack.imgur.com/PjhPQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PjhPQ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 12417336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10162477691310548/picture?type=large", "display_name": "user12417336", "link": "https://stackoverflow.com/users/12417336/user12417336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1575501122, "creation_date": 1575495972, "last_edit_date": 1575501122, "question_id": 59185089, "link": "https://stackoverflow.com/questions/59185089/parsing-xml-with-python-and-exporting-to-excel", "title": "Parsing XML with Python and exporting to excel", "body": "<p>I have an XML file that looks like below:</p>\n\n<pre><code>     &lt;Result name=\"1\"&gt;\n       &lt;point&gt;\n       &lt;objects&gt;\n          &lt;object&gt;\n             &lt;path&gt;\n                &lt;node&gt;A&lt;/node&gt;\n                &lt;node&gt;a&lt;/node&gt;\n                &lt;node&gt;B&lt;/node&gt;\n                &lt;node&gt;b&lt;/node&gt;\n                &lt;node&gt;C&lt;/node&gt;\n                &lt;node&gt;c&lt;/node&gt;\n                &lt;node&gt;D&lt;/node&gt;\n                &lt;node&gt;d&lt;/node&gt;\n             &lt;path/&gt;\n          &lt;object/&gt;\n          &lt;object&gt;\n             &lt;path&gt;\n                &lt;node&gt;A&lt;/node&gt;\n                &lt;node&gt;a&lt;/node&gt;\n                &lt;node&gt;B&lt;/node&gt;\n                &lt;node&gt;b&lt;/node&gt;\n                &lt;node&gt;C&lt;/node&gt;\n                &lt;node&gt;c&lt;/node&gt;\n                &lt;node&gt;D&lt;/node&gt;\n                &lt;node&gt;d&lt;/node&gt;\n               &lt;/path&gt;\n            &lt;object/&gt;\n         &lt;objects/&gt;\n      &lt;Result/&gt;\n   &lt;Results/&gt;\n</code></pre>\n\n<p>I would like a python script that can export to excel in the format below: </p>\n\n<p><img src=\"https://i.stack.imgur.com/cT9Ff.jpg\" alt=\"enter image description here\"></p>\n\n<p>I would really appreciate the help. Thank you </p>\n"}, {"tags": ["python", "maya", "pymel"], "answers": [{"tags": [], "owner": {"reputation": 2302, "user_id": 2742418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbieZ.png?s=128&g=1", "display_name": "DrWeeny", "link": "https://stackoverflow.com/users/2742418/drweeny"}, "is_accepted": true, "score": 2, "last_activity_date": 1575565192, "last_edit_date": 1575565192, "creation_date": 1575564674, "answer_id": 59199819, "question_id": 59185039, "link": "https://stackoverflow.com/questions/59185039/how-are-attributes-accessed-in-pymel/59199819#59199819", "title": "How are attributes accessed in PyMEL?", "body": "<p>You can just use : </p>\n\n<pre><code>cube.listAttr()\n</code></pre>\n\n<p>Im not sure they wrapped all attributes.</p>\n\n<p>I have a simple cmds wrapper myself where Im just adding dynamicly any attributes of a node by overriding : <strong>getitem</strong>, <strong>getattr</strong></p>\n\n<p>here is the full code on git : <a href=\"https://github.com/DrWeeny/stackoverflow/blob/master/59185039.py\" rel=\"nofollow noreferrer\">https://github.com/DrWeeny/stackoverflow/blob/master/59185039.py</a>\nit is just an example</p>\n\n<pre><code>class MAttr(object):\n    \"\"\"Represent a maya attribute\n\n    Args:\n        node (str): a string for the maya node affected\n        attr (str): a string that represent the attribute\n    Attributes:\n        attr_bypass (str): regex to bypass the compound attributes, because i need to connect and getattr\n    \"\"\"\n    attr_bypass = re.compile('\\[(\\d+)?:(\\d+)?\\]')\n\n    def __init__(self, node, attr='result'):\n        self.__dict__['node'] = node  #: str: current priority node evaluated\n        self.__dict__['attribute'] = attr  #: str: current priority node evaluated\n        self.__dict__['idx'] = 0  #: str: current priority node evaluated\n\n    def __getitem__(self, item):\n        \"\"\"\n        getitem has been overrided so you can select the compound attributes\n        ``mn = MayaNode('cluster1')``\n        ``mn.node.weightList[0]``\n        ``mn.node.weightList[1].weights[0:100]``\n\n        Notes:\n            the notations with list[0:0:0] is class slice whereas list[0] is just and int\n\n        Args:\n            item (Any): should be slice class or an int\n\n        Returns:\n            cls : MAttr is updated with the chosen index/slice\n        \"\"\"\n        if isinstance(item, int):\n            self.__dict__['attribute'] = '{}[{}]'.format(self.attr, item)\n        else:\n            if not item.start and not item.stop and not item.step:\n                item = ':'\n            else:\n                item = ':'.join([str(i) for i in [item.start, item.stop, item.step] if i != None])\n            self.__dict__['attribute'] = '{}[{}]'.format(self.attr, item)\n        return self\n\n    def __getattr__(self, attr):\n        \"\"\"\n        __getattr__ is overriden in order to select attributes\n        Args:\n            attr (str): name of the attribute, even if we loop throught,\n\n        Returns:\n            str: it join all the attributes that has been chained : weightList[0].weight\n\n        \"\"\"\n        myattr = '{}.{}'.format(self.attr, attr)\n        if myattr in self.listAttr(myattr):\n            return MAttr(self._node, '{}.{}'.format(self.attr, attr))\n        else:\n            return self.__getattribute__(attr)\n\nclass MayaNode(object):\n    \"\"\"Represent a maya node as a class like pymel\n\n    Only provide the name as a string, if you use preset, you can create a new node\n\n    Note:\n        Should use maya api for getting the node\n\n    Args:\n        name (str): a string for the maya node you want to encapsulate\n        preset (:obj:`dict`, optional): Used for creating a new node from 'attrPreset'\n            you can also just specify the nodeType with a string instead\n\n    Attributes:\n        maya_attr_name (maya_data): Any attribute from the name will look for actual maya attribute\n\n    \"\"\"\n\n    def __init__(self, name, preset={}, blendValue=1):\n\n        # this dict method is used to avoid calling __getattr__\n        self.__dict__['node'] = name  #: str: current priority node evaluated\n        self.__dict__['item'] = 1  #: int: can be either 0 or 1 and should be exented with Mesh or Cluster\n        if preset:\n            targ_ns = name.rsplit(':', 1)[0]\n            self.loadNode(preset, blendValue, targ_ns)\n\n    def __getitem__(self, item):\n        \"\"\"\n        getitem has been overrided so you can select the main nodes sh or tr so when you do:\n        ``mn = MayaNode('pCube1')``\n        ``mn[0].node`` result as the transform\n        ``mn[1].node`` result as the shape\n\n        Note:\n            By default ``mn.node`` is the transform\n        \"\"\"\n        return self.setNode(item)\n\n    def __getattr__(self, attr):\n        \"\"\"\n        getattr has been overrided so you can select maya attributes and set them\n        if you type an attribute, it will try to find if it exists in either shape or transform\n        if it exists in both, it will always warn you that it returns shape in priority\n        ``mn = MayaNode('pCube1')``\n        ``mn.translateX = 10`` result in doing a cmds.setAttr\n        ``mn.translateX.set(10)``\n        ``mn.translateX.get()`` note that you to use get in order to do getAttr otherwise it __repr__ or __str__\n\n        ``mn = MayaNode('cluster1')``\n        ``mn.weightList[1].weights.get()`` is equivalent of cmds.getAttr('cluster1.weightList[1].weights[:]')\n\n        Note:\n            You cant have the value without .get()\n        \"\"\"\n        if attr in self.listAttr(attr):\n            return MAttr(self.node, attr)\n        elif attr in self.__dict__:\n            return self.__dict__[attr]\n        else:\n            try:\n                return self.__getattribute__(attr)\n            except AttributeError:\n                cmds.warning('{} doesn\\'t exists, return None instead')\n                return None\n</code></pre>\n"}], "owner": {"reputation": 3810, "user_id": 12323248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ampOo.jpg?s=128&g=1", "display_name": "akuzminykh", "link": "https://stackoverflow.com/users/12323248/akuzminykh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 59199819, "answer_count": 1, "score": -2, "last_activity_date": 1590088886, "creation_date": 1575495631, "last_edit_date": 1590088886, "question_id": 59185039, "link": "https://stackoverflow.com/questions/59185039/how-are-attributes-accessed-in-pymel", "title": "How are attributes accessed in PyMEL?", "body": "<p>There are multiple ways to access attributes of a <code>PyNode</code> such as <code>Transform</code>, which has the attributes <code>translation</code>, <code>rotation</code> and so on.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pymel.core as pm\n\ncube = pm.polyCube()[0]\n\ncube.translationX.set(1)\ncube.translation.translationX.set(2)\ncube.tx.set(3)\ncube.t.tx.set(4)\n\n# and more\n</code></pre>\n\n<p>What I don't understand is how the attributes are found because I cannot find any documentation that lists the attributes? Does <code>Transform</code> have all those attributes where each points at the corresponding, underlying attribute of the DAG node? Where does the mapping happen so the right attribute is found?</p>\n"}, {"tags": ["python", "matrix", "pytorch", "autograd"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2757771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96cf919e2b38780e3b280a63fdedc68?s=128&d=identicon&r=PG&f=1", "display_name": "user2757771", "link": "https://stackoverflow.com/users/2757771/user2757771"}, "edited": false, "score": 0, "creation_date": 1579914589, "post_id": 59892800, "comment_id": 105937721, "body": "I ended up just computing the jacobian myself and saving the hassle, but I&#39;ll look into JAX in the future. Thanks for the help."}], "tags": [], "owner": {"reputation": 447, "user_id": 12765337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOdlX.png?s=128&g=1", "display_name": "Nick McGreivy", "link": "https://stackoverflow.com/users/12765337/nick-mcgreivy"}, "is_accepted": false, "score": 0, "last_activity_date": 1579854672, "creation_date": 1579854672, "answer_id": 59892800, "question_id": 59185031, "link": "https://stackoverflow.com/questions/59185031/array-assignment-with-autograd-not-again/59892800#59892800", "title": "Array Assignment with Autograd ( not again :( )", "body": "<p>In Autograd, and in JAX, you are not allowed to perform array indexing assignments. See the <a href=\"https://github.com/google/jax#current-gotchas\" rel=\"nofollow noreferrer\">JAX gotchas</a> for a partial explanation of this. </p>\n\n<p>PyTorch allows this functionality. If you want to run your code in autograd, you'll have to find a way to remove the offending line <code>k[element[i], element[j]] += m[i, j] * alpha_value</code>. If you are okay with running your code in JAX (which has essentially the same syntax as autograd, but more features), then it looks like <a href=\"https://jax.readthedocs.io/en/latest/jax.ops.html\" rel=\"nofollow noreferrer\">jax.ops</a> could be helpful for performing this sort of indexing assignment.</p>\n"}], "owner": {"reputation": 129, "user_id": 2757771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96cf919e2b38780e3b280a63fdedc68?s=128&d=identicon&r=PG&f=1", "display_name": "user2757771", "link": "https://stackoverflow.com/users/2757771/user2757771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579854672, "creation_date": 1575495586, "last_edit_date": 1575534235, "question_id": 59185031, "link": "https://stackoverflow.com/questions/59185031/array-assignment-with-autograd-not-again", "title": "Array Assignment with Autograd ( not again :( )", "body": "<p>I have a fairly non trivial function I want to differentiate with <code>autograd</code> but I'm not quite enough of a numpy wizard to figure our how to do it without array assingment. </p>\n\n<p>I also apologize that I had to make this example incredibly contrived and meaningless to be able to run standalone. The actual code I'm working with is for non linear finite elements and is trying to compute the jacobian for a complex non linear system.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import autograd.numpy as anp\nfrom autograd import jacobian\n\ndef alpha(x):\n    return anp.exp(-(x - 10) ** 2) / (x + 1)\n\n\ndef f(x):\n    # Matrix getting constructed\n    k = anp.zeros((x.shape[0], x.shape[0]))\n\n    # loop over some random 3 dimensional vectors\n    for element in anp.random.randint(0, x.shape[0], (x.shape[0], 3)):\n\n        # select 3 values from x\n        x_ijk = anp.array([[x[i] for i in element]])\n\n        norm = anp.linalg.norm(\n            x_ijk @ anp.vstack((element, element)).transpose()\n        )\n\n        # make some matrix from the element\n        m = element.reshape(3, 1) @ element.reshape(1, 3)\n\n        # alpha is an arbitrary differentiable function R -&gt; R\n        alpha_value = alpha(norm)\n\n        # combine m matricies into k scaling by alpha_value\n        n = m.shape[0]\n        for i in range(n):\n            for j in range(n):\n                k[element[i], element[j]] += m[i, j] * alpha_value\n\n    return k @ x\n\n\nprint(jacobian(f)(anp.random.rand(10)))\n# And course we get an error\n# k[element[i], element[j]] += m[i, j] * alpha_value\n# ValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>I don't really understand this message since no type error is happening. I assume it must be from assignment.</p>\n\n<p>After writting the above I made a trivial switch to <code>PyTorch</code> and the code runs just fine. But I would still prefer to use <code>autograd</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#pytorch version\nimport torch\nfrom torch.autograd.gradcheck import zero_gradients\n\n\ndef alpha(x):\n    return torch.exp(x)\n\n\ndef f(x):\n    # Matrix getting constructed\n    k = torch.zeros((x.shape[0], x.shape[0]))\n\n    # loop over some random 3 dimensional vectors\n    for element in torch.randint(0, x.shape[0], (x.shape[0], 3)):\n\n        # select 3 values from x\n        x_ijk = torch.tensor([[1. if n == e else 0 for n in range(len(x))] for e in element]) @ x\n        norm = torch.norm(\n            x_ijk @ torch.stack((torch.tanh(element.float() + 4), element.float() - 4)).t()\n        )\n\n        m = torch.rand(3, 3)\n\n        # alpha is an arbitrary differentiable function R -&gt; R\n        alpha_value = alpha(norm)\n\n        n = m.shape[0]\n        for i in range(n):\n            for j in range(n):\n                k[element[i], element[j]] += m[i, j] * alpha_value\n\n    print(k)\n    return k @ x\n\n\nx = torch.rand(4, requires_grad=True)\nprint(x, '\\n')\ny = f(x)\nprint(y, '\\n')\ngrads = []\nfor val in y:\n    val.backward(retain_graph=True)\n    grads.append(x.grad.clone())\n    zero_gradients(x)\nif __name__ == '__main__':\n    print(torch.stack(grads))\n</code></pre>\n"}, {"tags": ["python", "django", "geodjango"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 12436626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC8J4x1hqvtrLbVpAfYm7iWraV4GeEnP_z_lMNA=k-s128", "display_name": "Mehmet Kutan", "link": "https://stackoverflow.com/users/12436626/mehmet-kutan"}, "is_accepted": false, "score": 3, "last_activity_date": 1575497665, "creation_date": 1575497665, "answer_id": 59185387, "question_id": 59184944, "link": "https://stackoverflow.com/questions/59184944/geodjango-display-map-on-template-form-from-model/59185387#59185387", "title": "GeoDjango display map on template form from model", "body": "<p>You need to describe \"forms \" models.py.</p>\n\n<p>Models.py </p>\n\n<p>from django.contrib.gis import forms</p>\n\n<pre><code>class Parks(models.Model):\npark_name_en = models.CharField(max_length=256)    \ndescription = models.TextField()\npicture = models.ImageField()\ngeom = models.PointField(widget= forms.OSMWidget(attrs={'map_width': 800, 'map_height': 500}) )\n\n@property\ndef picture_url(self):\n    return self.picture.url\n\ndef __unicode__(self):\n    return self.title\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def park_insert(request):\nform = ParkForm()\nreturn render(request, 'addpark.html', {'form': form})\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class ParkForm(forms.ModelForm):\nclass Meta:\n    model = Parks\n    fields = ('park_name_en', 'description', 'picture',)\n    geom = forms.PolygonField()\n</code></pre>\n\n<p>Try it. And  looked this\n <a href=\"https://docs.djangoproject.com/en/2.2/ref/contrib/gis/forms-api/#widget-classes\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/contrib/gis/forms-api/#widget-classes</a></p>\n"}], "owner": {"reputation": 13, "user_id": 7326540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4d34c6b255a907bf8d08b5d31fbf0?s=128&d=identicon&r=PG&f=1", "display_name": "zav", "link": "https://stackoverflow.com/users/7326540/zav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575497665, "creation_date": 1575495151, "question_id": 59184944, "link": "https://stackoverflow.com/questions/59184944/geodjango-display-map-on-template-form-from-model", "title": "GeoDjango display map on template form from model", "body": "<p>I am trying to build a sample website based on Django(GeoDjango) and OpenStreetMap. So far I have this simple scenario:</p>\n\n<p>Models.py </p>\n\n<pre><code>class Parks(models.Model):\npark_name_en = models.CharField(max_length=256)    \ndescription = models.TextField()\npicture = models.ImageField()\ngeom = PolygonField()\n\n@property\ndef picture_url(self):\n    return self.picture.url\n\ndef __unicode__(self):\n    return self.title\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def park_insert(request):\nform = ParkForm()\nreturn render(request, 'addpark.html', {'form': form})\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class ParkForm(forms.ModelForm):\nclass Meta:\n    model = Parks\n    fields = ('park_name_en', 'description', 'picture',)\n    geom = forms.PolygonField()\n</code></pre>\n\n<p>and last but not least the template addpark.html</p>\n\n<pre><code>    &lt;html&gt;\n&lt;head&gt;\n    {{ form.media }}\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div id=\"map\"&gt;\n        &lt;form enctype=\"multipart/form-data\" method=\"post\" action=\"\"&gt;\n            {% csrf_token %}\n                {{ form.as_p }}\n            &lt;input type=\"submit\" value=\"Submit\"/&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>When I open the template page all fields come up right, except the PolygonField() which comes up as a text. How can I display a map on the user form also (I got it working in the admin panel, but I want to create a form for inserting new parks)</p>\n"}, {"tags": ["python", "image", "python-imaging-library"], "comments": [{"owner": {"reputation": 6314, "user_id": 5770501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FUVQn.jpg?s=128&g=1", "display_name": "Arkistarvh Kltzuonstev", "link": "https://stackoverflow.com/users/5770501/arkistarvh-kltzuonstev"}, "edited": false, "score": 0, "creation_date": 1575496189, "post_id": 59184932, "comment_id": 104590573, "body": "Are your images in any chance grayscaled? Try once with <code>im = Image.open(&quot;fire_layer_0.png&quot;).convert(&#39;RGB&#39;)</code>"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575496577, "post_id": 59184932, "comment_id": 104590682, "body": "There are many issues with your code. You have removed all the <code>import</code> statements so it cannot work. You are using <code>for</code> loops which you will see is not a good approach if you look at any if the last 300 questions on PIL on StackOverflow. You never return a result from your function. Please look at some other questions/answers."}, {"owner": {"reputation": 1, "user_id": 12482362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08845322fb8e5e31c9fd7313ee623302?s=128&d=identicon&r=PG&f=1", "display_name": "Russian Hacker", "link": "https://stackoverflow.com/users/12482362/russian-hacker"}, "reply_to_user": {"reputation": 6314, "user_id": 5770501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FUVQn.jpg?s=128&g=1", "display_name": "Arkistarvh Kltzuonstev", "link": "https://stackoverflow.com/users/5770501/arkistarvh-kltzuonstev"}, "edited": false, "score": 0, "creation_date": 1575497649, "post_id": 59184932, "comment_id": 104591006, "body": "@ArkistarvhKltzuonstev The image actually had transparent pixels. Thanks for your suggestion, it helped a lot."}, {"owner": {"reputation": 1, "user_id": 12482362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08845322fb8e5e31c9fd7313ee623302?s=128&d=identicon&r=PG&f=1", "display_name": "Russian Hacker", "link": "https://stackoverflow.com/users/12482362/russian-hacker"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575497836, "post_id": 59184932, "comment_id": 104591053, "body": "@MarkSetchell The import statements are there, I just didn&#39;t include them here. As for the loop approach, I do understand it&#39;s not the fastest. However, my images are 16x16, so it doesn&#39;t matter as much. This is also my first day of using PIL and I do not quite understand the whole thing yet, even after looking at other questions, such as image.point and stuff like that. I appreciate your criticism though."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575498030, "post_id": 59184932, "comment_id": 104591103, "body": "It&#39;s late here, I&#39;ll try and take a look tomorrow if no-one else helps out."}, {"owner": {"reputation": 1, "user_id": 12482362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08845322fb8e5e31c9fd7313ee623302?s=128&d=identicon&r=PG&f=1", "display_name": "Russian Hacker", "link": "https://stackoverflow.com/users/12482362/russian-hacker"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575499078, "post_id": 59184932, "comment_id": 104591423, "body": "@MarkSetchell I figured it out with the help of the first person already, the problem was that some images had transparent pixels and converting them from HSV to RGB and then saving that didn&#39;t work. The only question I have now is how to maintain the transparency in HSV mode. Meaning that when I convert to RGBA, I want the originally transparent pixels remain transparent, but they become black."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1575500378, "post_id": 59184932, "comment_id": 104591824, "body": "See <code>getchannel()</code> to save alpha and <code>im.putalpha()</code> to restore it here... <a href=\"https://stackoverflow.com/a/56197189/2836621\">stackoverflow.com/a/56197189/2836621</a>"}, {"owner": {"reputation": 1, "user_id": 12482362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08845322fb8e5e31c9fd7313ee623302?s=128&d=identicon&r=PG&f=1", "display_name": "Russian Hacker", "link": "https://stackoverflow.com/users/12482362/russian-hacker"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1575588128, "post_id": 59184932, "comment_id": 104627209, "body": "@MarkSetchell Thanks for your and others&#39; help, I believe I got the script working efficiently and I am satisfied with the outcome. Thank you again."}], "owner": {"reputation": 1, "user_id": 12482362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08845322fb8e5e31c9fd7313ee623302?s=128&d=identicon&r=PG&f=1", "display_name": "Russian Hacker", "link": "https://stackoverflow.com/users/12482362/russian-hacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575495097, "creation_date": 1575495097, "question_id": 59184932, "link": "https://stackoverflow.com/questions/59184932/typeerror-when-saving-a-file-in-pil", "title": "TypeError when saving a file in PIL", "body": "<p>I am trying to change the hue of the image in Pillow and then save it. Basically the code below iterates over each pixel and sets its hue. The code works with most of the files, but for some reason, some files cause a TypeError when saving them.</p>\n\n<pre><code>im = Image.open(\"fire_layer_0.png\")\nim = im.convert(\"HSV\")\ndef change_hue(image):\n    for x in range(image.width):\n        for y in range(image.height):\n            print(\"sh\")\n            s = image.getpixel((x, y))[1]\n            v = image.getpixel((x, y))[2]\n            color = (190, s, v)\n            image.putpixel((x, y), color)\nchange_hue(im)\noutput = im.convert(\"RGB\")\nprint(output)\noutput.save(\"firetest\", 'PNG')\n</code></pre>\n\n<p>Here is the error message: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\Alex\\AppData\\Roaming\\Python\\Python37\\site-packages\\PIL\\Image.py\", line 2084, in save\n    save_handler(self, fp, filename)\n  File \"C:\\Users\\Alex\\AppData\\Roaming\\Python\\Python37\\site-packages\\PIL\\PngImagePlugin.py\", line 871, in _save\n    red, green, blue = transparency\nTypeError: cannot unpack non-iterable int object\n</code></pre>\n\n<p>Help with the problem and suggestions to improve the code would be greatly appreciated!</p>\n"}, {"tags": ["python", "autosys"], "comments": [{"owner": {"reputation": 2860, "user_id": 9196560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QLLtO.jpg?s=128&g=1", "display_name": "Olaf", "link": "https://stackoverflow.com/users/9196560/olaf"}, "edited": false, "score": 0, "creation_date": 1575502225, "post_id": 59184931, "comment_id": 104592289, "body": "As this question is not related to Powershell could you please remove the Powershell tag? Thanks. You may add a cmd tag instead."}, {"owner": {"reputation": 556, "user_id": 9136155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XolH_2a1lSs/AAAAAAAAAAI/AAAAAAAAHps/DnSCiv-EVys/photo.jpg?sz=128", "display_name": "Piyush", "link": "https://stackoverflow.com/users/9136155/piyush"}, "edited": false, "score": 0, "creation_date": 1575572442, "post_id": 59184931, "comment_id": 104621083, "body": "Autosys defined job on a Linux machine, calling exit 1 in shell script would directly reflect in the job run report."}], "owner": {"reputation": 11, "user_id": 12482367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15b9aa00b4131bfe5917d5a373b1ef15?s=128&d=identicon&r=PG&f=1", "display_name": "ChasePlusPlus", "link": "https://stackoverflow.com/users/12482367/chaseplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575504535, "creation_date": 1575495095, "last_edit_date": 1575504535, "question_id": 59184931, "link": "https://stackoverflow.com/questions/59184931/how-do-you-catch-a-python-scripts-error-code-in-autosys", "title": "How do you catch a Python script&#39;s error code in Autosys?", "body": "<p>I am running a python script on a Windows machine via Autosys.  </p>\n\n<p>Currently I am calling the command in my Autosys job as such: </p>\n\n<p><strong>Autosys job definition to run Python script:</strong></p>\n\n<pre><code>command: cmd /c \"python myScript.py\"\n</code></pre>\n\n<p><strong>Python code exit snippet:</strong></p>\n\n<pre><code>print(\"Actual threshold below tolerable limit, STOPPING PROCESS\")\nsys.exit(1)\n</code></pre>\n\n<p>I would like to fail the Autosys job when my Python script exits with code 1, however Autosys doesn't seem to care what the script's error code is and exits with status \"Success\" each time.   </p>\n\n<p>Any tips on how I might terminate the Autosys job with status \"FA\" when the script exits with code 1, much how we do in Bash? </p>\n"}, {"tags": ["python", "regex", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 10423341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38fc48907b74a038482b8a69bb082908?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Ahmad Khan", "link": "https://stackoverflow.com/users/10423341/jawad-ahmad-khan"}, "edited": false, "score": 0, "creation_date": 1575495926, "post_id": 59184941, "comment_id": 104590485, "body": "Seems fine for me."}], "tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": true, "score": 2, "last_activity_date": 1575495134, "creation_date": 1575495134, "answer_id": 59184941, "question_id": 59184910, "link": "https://stackoverflow.com/questions/59184910/count-the-number-of-sub-strings-irrespective-of-case-sensitivity/59184941#59184941", "title": "Count the number of sub strings irrespective of case sensitivity", "body": "<p>Why not just convert the string to lowercase before counting?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; a = 'WHEN when WhEn wHeN'\n&gt;&gt;&gt; a.lower().count('when')\n4\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 10423341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38fc48907b74a038482b8a69bb082908?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Ahmad Khan", "link": "https://stackoverflow.com/users/10423341/jawad-ahmad-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1594373797, "accepted_answer_id": 59184941, "answer_count": 1, "score": -3, "last_activity_date": 1595540735, "creation_date": 1575494931, "last_edit_date": 1595540735, "question_id": 59184910, "link": "https://stackoverflow.com/questions/59184910/count-the-number-of-sub-strings-irrespective-of-case-sensitivity", "closed_reason": "Needs more focus", "title": "Count the number of sub strings irrespective of case sensitivity", "body": "<p>I need to find the number of instances of substring <code>when</code> in a larger string irrespective of the case sensitivity, how do I efficiently do that ?</p>\n<p>String:</p>\n<blockquote>\n<p>When people fail to answer a yes/no question with the words \u201cyes\u201d or\n\u201cno\u201d before elaborating. That is, when the task of determining the\nactual answer to the question (yes/no) is left up to the person who\nasked it. Like this:</p>\n<p>Me: Do you want tacos for dinner tonight?</p>\n<p>Them: I want pizza.</p>\n<p>Me: [Thinking: So\u2026 the answer to my actual question is \u201cno.\u201d]</p>\n<p>Or\u2026</p>\n<p>Me: Did you do your homework?</p>\n<p>Them: I left it at home.</p>\n<p>Me: [Thinking <strong>when</strong>: So\u2026 the answer to my actual question is \u201cyes.\u201d]</p>\n</blockquote>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 1, "creation_date": 1575494709, "post_id": 59184847, "comment_id": 104590076, "body": "<code>pd.crosstab(df[&#39;timestamp&#39;],df[&#39;status&#39;])</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1575494802, "post_id": 59184847, "comment_id": 104590101, "body": "Are you ever going to have second values that you want grouped by minute?"}, {"owner": {"reputation": 43, "user_id": 12482302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-asHXS3PwCoo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdXXJvdVWqVoUPL3mkqj0htg2OB_g/photo.jpg?sz=128", "display_name": "charemma", "link": "https://stackoverflow.com/users/12482302/charemma"}, "edited": false, "score": 0, "creation_date": 1575495316, "post_id": 59184847, "comment_id": 104590308, "body": "Tried your suggestion and it seems to work, thanks a lot!  In the original data, the timestamps will have multiple entries within a minute and thus will differ in the range of seconds. e.g.  timestamp           status   2019-01-01 09:00:01 FAILED 2019-01-01 09:00:02 FAILED 2019-01-01 09:00:10 UNKNOWN 2019-01-01 09:00:13 PASSED 2019-01-01 09:00:24 PASSED 2019-01-01 09:01:02 PASSED 2019-01-01 09:01:30 FAILED"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1575497003, "post_id": 59184847, "comment_id": 104590821, "body": "If the answer is crosstab, the question is pivot"}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 7513755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUtEU.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7513755/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1575494844, "creation_date": 1575494844, "answer_id": 59184896, "question_id": 59184847, "link": "https://stackoverflow.com/questions/59184847/how-do-i-count-number-of-occurrences-per-minute-in-a-pandas-data-frame/59184896#59184896", "title": "How do I count number of occurrences per minute in a pandas data frame", "body": "<p>This will work:</p>\n\n<pre><code>df.groupby(['timestamp', 'status']).size().unstack(level=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 2, "last_activity_date": 1575497137, "last_edit_date": 1575497137, "creation_date": 1575495072, "answer_id": 59184928, "question_id": 59184847, "link": "https://stackoverflow.com/questions/59184847/how-do-i-count-number-of-occurrences-per-minute-in-a-pandas-data-frame/59184928#59184928", "title": "How do I count number of occurrences per minute in a pandas data frame", "body": "<p><strong>method 1:</strong></p>\n\n<pre><code>pd.crosstab(df['timestamp'],df['status'])\n\nstatus               FAILED  PASSED  UNKNOWN\ntimestamp                                   \n2019-01-01-09:00:00       2       2        1\n2019-01-01-09:01:00       1       1        0\n</code></pre>\n\n<hr>\n\n<p>If you want timestamp like a column :</p>\n\n<pre><code>pd.crosstab(df['timestamp'],df['status'],colnames=[None]).reset_index()\n\n             timestamp  FAILED  PASSED  UNKNOWN\n0  2019-01-01-09:00:00       2       2        1\n1  2019-01-01-09:01:00       1       1        0\n</code></pre>\n\n<p><strong>method 2:</strong></p>\n\n<pre><code>df.groupby(['timestamp','status']).size().unstack(fill_value=0)\n</code></pre>\n\n<hr>\n\n<p><strong>time comparision:</strong></p>\n\n<p>it seems that method 2 is the fastest.</p>\n\n<pre><code>%%timeit\nnew_df=pd.crosstab(df['timestamp'],df['status'])\n21 ms \u00b1 759 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n\n<hr>\n\n<pre><code>%%timeit\nnew_df=df.groupby(['timestamp','status']).size().unstack(fill_value=0)\n4.65 ms \u00b1 290 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<hr>\n\n<pre><code>%%timeit\ndf2 = (\n    df\n    .groupby(df['timestamp'].map(lambda x: x.replace(second=0)))['status']\n    .value_counts()\n    .unstack()\n    .fillna(0)\n    .astype(int)\n    .reset_index()\n)\n\n8.5 ms \u00b1 1.52 ms per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1575496505, "post_id": 59185017, "comment_id": 104590655, "body": "I think unstack has option <code>fill_value</code> which eases you from <code>fillna().astype()</code>."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1575496606, "post_id": 59185017, "comment_id": 104590691, "body": "And generally, <code>groupby().value_count().unstack()</code> has better performance than other approaches. +1"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1575497432, "post_id": 59185017, "comment_id": 104590941, "body": "in general that is the same as grouping for both columns, see my second method @Quang Hoang"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575497557, "post_id": 59185017, "comment_id": 104590982, "body": "@ansev in my experience, that\u2019s not true if you have a lot of combination on two columns."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 1, "creation_date": 1575497622, "post_id": 59185017, "comment_id": 104590994, "body": "@ansev How many rows does your sample dataframe contain.  Just the 7 in the toy example? Also, I don&#39;t believe your method accounts for grouping on minutes where the timestamps contain seconds."}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575498093, "post_id": 59185017, "comment_id": 104591122, "body": "yes, it is true that for data frames of more than 400,000 rows, it may be more optimal value _counts, if this solution is improved, otherwise it will be even much slower"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575498695, "post_id": 59185017, "comment_id": 104591301, "body": "@ansev Try your timings with more variation in your timestamp column on the larger sample dataframe, e.g. <code>df_ = pd.concat([df] * 100000)</code> and then <code>df_[&#39;timestamp&#39;] = pd.date_range(df_.timestamp.iat[0], periods=len(df_), freq=&#39;1min&#39;)</code>"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1575498815, "post_id": 59185017, "comment_id": 104591346, "body": "As I said I agree that for large sizes and optimizing this solution (without it this solution worsens with the size of the data frame) value_counts is better"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 1, "creation_date": 1575499093, "post_id": 59185017, "comment_id": 104591427, "body": "What do you mean &quot;worsens the size of the dataframe&quot;?"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1575499648, "last_edit_date": 1575499648, "creation_date": 1575495526, "answer_id": 59185017, "question_id": 59184847, "link": "https://stackoverflow.com/questions/59184847/how-do-i-count-number-of-occurrences-per-minute-in-a-pandas-data-frame/59185017#59185017", "title": "How do I count number of occurrences per minute in a pandas data frame", "body": "<p>In the event that the timestamps have seconds, you can first remove them to group on whole minutes.</p>\n\n<pre><code>df2 = (\n    df\n    .groupby(df['timestamp'].map(lambda x: x.replace(second=0)))['status']\n    .value_counts()\n    .unstack(fill_value=0)\n    .reset_index()\n)\n&gt;&gt;&gt; df2\nstatus           timestamp  FAILED  PASSED  UNKNOWN\n0      2019-01-01 09:00:00       2       2        1\n1      2019-01-01 09:01:00       1       1        0\n</code></pre>\n\n<p>You may also wish to fill in every minute in the range.  Same code as above, but don't reset the index at the end.  Then:</p>\n\n<pre><code>df2 = df2.reindex(pd.date_range(df2.index[0], df2.index[-1], freq='1min'), fill_value=0)\n</code></pre>\n\n<p><strong>Timings</strong></p>\n\n<p>Timings will certainly vary based on the datasets (small vs large, heterogeneous data vs. homogenous, etc.).  Given that the dataset is basically a log, one would expect a lot of data with high variation in the timestamp.  To create a more suitable test data, lets make the sample dataframe 100k times larger and then make the timestamps unique (one each minute).</p>\n\n<pre><code>df_ = pd.concat([df] * 100000)\ndf_['timestamp'] = pd.date_range(df_.timestamp.iat[0], periods=len(df_), freq='1min')\n</code></pre>\n\n<p>And here are the new timings:</p>\n\n<pre><code>%timeit pd.crosstab(df_['timestamp'],df['status'])\n# 4.27 s \u00b1 150 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%timeit df_.groupby(['timestamp','status']).size().unstack(fill_value=0)\n# 567 ms \u00b1 34.9 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%%timeit\n(\n    df_\n    .groupby(['timestamp', 'status'])\n    .size()\n    .unstack(fill_value=0)\n    .reset_index()\n)\n# 614 ms \u00b1 27.6 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%%timeit\n(\n    df_\n    .groupby(df['timestamp'].map(lambda x: x.replace(second=0)))['status']\n    .value_counts()\n    .unstack(fill_value=0)\n    .reset_index()\n)\n# 147 ms \u00b1 6.66 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 12482302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-asHXS3PwCoo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdXXJvdVWqVoUPL3mkqj0htg2OB_g/photo.jpg?sz=128", "display_name": "charemma", "link": "https://stackoverflow.com/users/12482302/charemma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 1, "closed_date": 1575496963, "accepted_answer_id": 59184928, "answer_count": 3, "score": 3, "last_activity_date": 1575499648, "creation_date": 1575494564, "question_id": 59184847, "link": "https://stackoverflow.com/questions/59184847/how-do-i-count-number-of-occurrences-per-minute-in-a-pandas-data-frame", "closed_reason": "Duplicate", "title": "How do I count number of occurrences per minute in a pandas data frame", "body": "<p>I have a pandas data frame like this:</p>\n\n<pre><code>timestamp           status  \n2019-01-01 09:00:00 FAILED\n2019-01-01 09:00:00 FAILED\n2019-01-01 09:00:00 UNKNOWN\n2019-01-01 09:00:00 PASSED\n2019-01-01 09:00:00 PASSED\n2019-01-01 09:01:00 PASSED\n2019-01-01 09:01:00 FAILED \n</code></pre>\n\n<p>How can I group the data per minute and count the number of each status per minute to get this data frame:</p>\n\n<pre><code>timestamp           PASSED FAILED UNKNOWN   \n2019-01-01 09:00:00 2      2      1\n2019-01-01 09:01:00 1      1      0\n</code></pre>\n"}, {"tags": ["python", "pyqt5", "qgraphicsview", "qgraphicsscene", "qtwidgets"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575495269, "post_id": 59184791, "comment_id": 104590293, "body": "share the .ui...., 1) change <code>self.view = self.graphicsView.setScene(self.scene)</code> to <code>self.view = self.graphicsView.setScene(self.scene)</code>, 2) change <code>pim = Image.open(str(filepath))             qim = ImageQt.ImageQt(pim)             pix = QtGui.QPixmap.fromImage(qim)</code> to <code>pix = QtGui.QPixmap(qim)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575495418, "post_id": 59184791, "comment_id": 104590336, "body": "It is also better to run the code in the console/CMD since you will get better error information since many IDEs do not handle these types of errors."}, {"owner": {"reputation": 13, "user_id": 10863464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bErDXvYdcwQ/AAAAAAAAAAI/AAAAAAAAAPI/GCNFfzDhW54/photo.jpg?sz=128", "display_name": "Javid Shiriyev", "link": "https://stackoverflow.com/users/10863464/javid-shiriyev"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575495854, "post_id": 59184791, "comment_id": 104590462, "body": "shared Widget.py as well"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575495971, "post_id": 59184791, "comment_id": 104590503, "body": "Your code works for me correctly in ArchLinux, what I suspect is that it is a PIL bug in your environment (VirtualBox + Ubuntu). So my recommendation is that you eliminate the use of PIL since so far I do not understand its need if QPixmap can be loaded using the filename."}, {"owner": {"reputation": 13, "user_id": 10863464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bErDXvYdcwQ/AAAAAAAAAAI/AAAAAAAAAPI/GCNFfzDhW54/photo.jpg?sz=128", "display_name": "Javid Shiriyev", "link": "https://stackoverflow.com/users/10863464/javid-shiriyev"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1575496816, "post_id": 59184791, "comment_id": 104590772, "body": "Yes, you are right. I removed PIL and opened imaged directly with QPixmap and it worked. I appreciate your time. Thanks :)"}], "owner": {"reputation": 13, "user_id": 10863464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bErDXvYdcwQ/AAAAAAAAAAI/AAAAAAAAAPI/GCNFfzDhW54/photo.jpg?sz=128", "display_name": "Javid Shiriyev", "link": "https://stackoverflow.com/users/10863464/javid-shiriyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575495680, "creation_date": 1575494200, "last_edit_date": 1575495680, "question_id": 59184791, "link": "https://stackoverflow.com/questions/59184791/command-terminated-when-using-pyqt5-qtwidgets-qgraphicsscene", "title": "&quot;Command terminated&quot; when using PyQt5 QtWidgets QGraphicsScene()", "body": "<p>I am trying to open an image with PyQt5 QtWidgets QGraphicsView and using QGraphicsScene from the same module. When I am calling QtWidgets.QGraphicsScene.addPixmap(pix) the app closes with the output Command terminated. Below is the code:</p>\n\n<pre><code>import os, sys\n\nfrom PyQt5 import QtGui, QtCore, QtWidgets\n\nsys.path.insert(0,os.getcwd()+'/'+'gui')\nsys.path.insert(0,os.getcwd()+'/'+'src')\n\nfrom Widget import Ui_MainWindow\n\nfrom PIL import Image, ImageQt\n\nclass Window(QtWidgets.QMainWindow,Ui_MainWindow):\n\n    def __init__(self):\n        super(Window,self).__init__()\n        self.setupUi(self)\n\n        self.actionOpen.setShortcut(\"Ctrl+O\")\n        self.actionOpen.setStatusTip(\"open an image\")\n        self.actionOpen.triggered.connect(self.file_open)\n\n        self.show()\n\n    def file_open(self):\n\n        filepath,_ = QtWidgets.QFileDialog.getOpenFileName(self,'Open File')\n\n        if filepath:\n            pim = Image.open(str(filepath))\n            qim = ImageQt.ImageQt(pim)\n            pix = QtGui.QPixmap.fromImage(qim)\n\n            self.scene = QtWidgets.QGraphicsScene()\n            self.scene.addPixmap(pix)\n            self.view = self.graphicsView.setScene(self.scene)\n        else:\n            pass\n\nif __name__ == \"__main__\":\n    app = QtWidgets.QApplication(sys.argv)\n    window = Window()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Additional Info: I used Qt Designer to create Widget.ui file and converted to Widget.py. My  machine host is windows and I am running Ubuntu 18.04 in virtualbox. My python version is 2.7. I would really appreciate any help (I spent more than a day on this problem) and can provide any missing info. Thanks</p>\n\n<p>and below is my ui converted to py:</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\n# Form implementation generated from reading ui file 'Widget.ui'\n#\n# Created by: PyQt5 UI code generator 5.10.1\n#\n# WARNING! All changes made in this file will be lost!\n\nfrom PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_MainWindow(object):\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.resize(1115, 689)\n        self.centralwidget = QtWidgets.QWidget(MainWindow)\n        self.centralwidget.setObjectName(\"centralwidget\")\n        self.horizontalLayoutWidget_2 = QtWidgets.QWidget(self.centralwidget)\n        self.horizontalLayoutWidget_2.setGeometry(QtCore.QRect(6, 10, 1091, 601))\n        self.horizontalLayoutWidget_2.setObjectName(\"horizontalLayoutWidget_2\")\n        self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_2)\n        self.horizontalLayout_2.setContentsMargins(0, 0, 0, 0)\n        self.horizontalLayout_2.setObjectName(\"horizontalLayout_2\")\n        self.verticalLayout = QtWidgets.QVBoxLayout()\n        self.verticalLayout.setObjectName(\"verticalLayout\")\n        self.treeView = QtWidgets.QTreeView(self.horizontalLayoutWidget_2)\n        self.treeView.setObjectName(\"treeView\")\n        self.verticalLayout.addWidget(self.treeView)\n        self.verticalLayout_3 = QtWidgets.QVBoxLayout()\n        self.verticalLayout_3.setObjectName(\"verticalLayout_3\")\n        self.gridLayout_2 = QtWidgets.QGridLayout()\n        self.gridLayout_2.setObjectName(\"gridLayout_2\")\n        self.pushButton_4 = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton_4.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton_4.setObjectName(\"pushButton_4\")\n        self.gridLayout_2.addWidget(self.pushButton_4, 0, 1, 1, 1)\n        self.pushButton_2 = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton_2.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton_2.setObjectName(\"pushButton_2\")\n        self.gridLayout_2.addWidget(self.pushButton_2, 1, 0, 1, 1)\n        self.pushButton_5 = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton_5.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton_5.setObjectName(\"pushButton_5\")\n        self.gridLayout_2.addWidget(self.pushButton_5, 1, 1, 1, 1)\n        self.pushButton = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton.setObjectName(\"pushButton\")\n        self.gridLayout_2.addWidget(self.pushButton, 0, 0, 1, 1)\n        self.pushButton_3 = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton_3.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton_3.setObjectName(\"pushButton_3\")\n        self.gridLayout_2.addWidget(self.pushButton_3, 0, 2, 1, 1)\n        self.pushButton_6 = QtWidgets.QPushButton(self.horizontalLayoutWidget_2)\n        self.pushButton_6.setMinimumSize(QtCore.QSize(90, 20))\n        self.pushButton_6.setObjectName(\"pushButton_6\")\n        self.gridLayout_2.addWidget(self.pushButton_6, 1, 2, 1, 1)\n        self.verticalLayout_3.addLayout(self.gridLayout_2)\n        self.horizontalLayout = QtWidgets.QHBoxLayout()\n        self.horizontalLayout.setObjectName(\"horizontalLayout\")\n        spacerItem = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Minimum)\n        self.horizontalLayout.addItem(spacerItem)\n        self.label = QtWidgets.QLabel(self.horizontalLayoutWidget_2)\n        self.label.setLayoutDirection(QtCore.Qt.LeftToRight)\n        self.label.setObjectName(\"label\")\n        self.horizontalLayout.addWidget(self.label)\n        self.rotation = QtWidgets.QDoubleSpinBox(self.horizontalLayoutWidget_2)\n        self.rotation.setMinimumSize(QtCore.QSize(100, 20))\n        self.rotation.setObjectName(\"rotation\")\n        self.horizontalLayout.addWidget(self.rotation)\n        self.verticalLayout_3.addLayout(self.horizontalLayout)\n        self.verticalLayout.addLayout(self.verticalLayout_3)\n        self.logRun = QtWidgets.QPlainTextEdit(self.horizontalLayoutWidget_2)\n        self.logRun.setObjectName(\"logRun\")\n        self.verticalLayout.addWidget(self.logRun)\n        self.horizontalLayout_2.addLayout(self.verticalLayout)\n        self.graphicsView = QtWidgets.QGraphicsView(self.horizontalLayoutWidget_2)\n        self.graphicsView.setMinimumSize(QtCore.QSize(500, 0))\n        self.graphicsView.setObjectName(\"graphicsView\")\n        self.horizontalLayout_2.addWidget(self.graphicsView)\n        self.verticalLayout_2 = QtWidgets.QVBoxLayout()\n        self.verticalLayout_2.setObjectName(\"verticalLayout_2\")\n        self.tabWidget = QtWidgets.QTabWidget(self.horizontalLayoutWidget_2)\n        self.tabWidget.setObjectName(\"tabWidget\")\n        self.tab = QtWidgets.QWidget()\n        self.tab.setObjectName(\"tab\")\n        self.tabWidget.addTab(self.tab, \"\")\n        self.tab_2 = QtWidgets.QWidget()\n        self.tab_2.setObjectName(\"tab_2\")\n        self.tabWidget.addTab(self.tab_2, \"\")\n        self.verticalLayout_2.addWidget(self.tabWidget)\n        self.extractedText = QtWidgets.QPlainTextEdit(self.horizontalLayoutWidget_2)\n        self.extractedText.setObjectName(\"extractedText\")\n        self.verticalLayout_2.addWidget(self.extractedText)\n        self.horizontalLayout_2.addLayout(self.verticalLayout_2)\n        MainWindow.setCentralWidget(self.centralwidget)\n        self.menubar = QtWidgets.QMenuBar(MainWindow)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 1115, 21))\n        self.menubar.setObjectName(\"menubar\")\n        self.menuFile = QtWidgets.QMenu(self.menubar)\n        self.menuFile.setObjectName(\"menuFile\")\n        MainWindow.setMenuBar(self.menubar)\n        self.statusbar = QtWidgets.QStatusBar(MainWindow)\n        self.statusbar.setObjectName(\"statusbar\")\n        MainWindow.setStatusBar(self.statusbar)\n        self.actionOpen = QtWidgets.QAction(MainWindow)\n        self.actionOpen.setObjectName(\"actionOpen\")\n        self.actionCtrl_S = QtWidgets.QAction(MainWindow)\n        self.actionCtrl_S.setObjectName(\"actionCtrl_S\")\n        self.actionSave_3 = QtWidgets.QAction(MainWindow)\n        self.actionSave_3.setObjectName(\"actionSave_3\")\n        self.actionExit = QtWidgets.QAction(MainWindow)\n        self.actionExit.setObjectName(\"actionExit\")\n        self.menuFile.addAction(self.actionOpen)\n        self.menuFile.addAction(self.actionSave_3)\n        self.menuFile.addSeparator()\n        self.menuFile.addAction(self.actionExit)\n        self.menubar.addAction(self.menuFile.menuAction())\n\n        self.retranslateUi(MainWindow)\n        self.tabWidget.setCurrentIndex(0)\n        QtCore.QMetaObject.connectSlotsByName(MainWindow)\n        MainWindow.setTabOrder(self.logRun, self.extractedText)\n\n    def retranslateUi(self, MainWindow):\n        _translate = QtCore.QCoreApplication.translate\n        MainWindow.setWindowTitle(_translate(\"MainWindow\", \"MainWindow\"))\n        self.pushButton_4.setText(_translate(\"MainWindow\", \"PushButton\"))\n        self.pushButton_2.setText(_translate(\"MainWindow\", \"remove black\"))\n        self.pushButton_5.setText(_translate(\"MainWindow\", \"PushButton\"))\n        self.pushButton.setText(_translate(\"MainWindow\", \"whiten\"))\n        self.pushButton_3.setText(_translate(\"MainWindow\", \"PushButton\"))\n        self.pushButton_6.setText(_translate(\"MainWindow\", \"PushButton\"))\n        self.label.setText(_translate(\"MainWindow\", \"Rotation\"))\n        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab), _translate(\"MainWindow\", \"Tab 1\"))\n        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_2), _translate(\"MainWindow\", \"Tab 2\"))\n        self.menuFile.setTitle(_translate(\"MainWindow\", \"File\"))\n        self.actionOpen.setText(_translate(\"MainWindow\", \"Open\"))\n        self.actionCtrl_S.setText(_translate(\"MainWindow\", \"Ctrl+S\"))\n        self.actionSave_3.setText(_translate(\"MainWindow\", \"Save\"))\n        self.actionExit.setText(_translate(\"MainWindow\", \"Exit\"))\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    MainWindow = QtWidgets.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n\n</code></pre>\n"}, {"tags": ["python", "sockets", "networking"], "comments": [{"owner": {"reputation": 58, "user_id": 11606747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de532c53a24aa0b5df56da935c371d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11606747/mike"}, "edited": false, "score": 0, "creation_date": 1575494839, "post_id": 59184767, "comment_id": 104590119, "body": "Yes it is possible"}, {"owner": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "reply_to_user": {"reputation": 58, "user_id": 11606747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de532c53a24aa0b5df56da935c371d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11606747/mike"}, "edited": false, "score": 0, "creation_date": 1575494883, "post_id": 59184767, "comment_id": 104590139, "body": "@Mike Does this require any special methods, or can I create a socket as normal?"}, {"owner": {"reputation": 58, "user_id": 11606747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de532c53a24aa0b5df56da935c371d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11606747/mike"}, "edited": false, "score": 0, "creation_date": 1575494965, "post_id": 59184767, "comment_id": 104590178, "body": "No it does not require any special methods but you would need a module called &quot;socket&quot; You will also need other info like Ports and IPs"}], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 0, "creation_date": 1575531416, "post_id": 59187323, "comment_id": 104599808, "body": "I have a local port from one Python process with an existing connection to a remote service. Is it possible for a second process to also send data to the remote over the same connection, or does this fall under the low-level part of what you\u2019re saying?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 1, "creation_date": 1575565225, "post_id": 59187323, "comment_id": 104617727, "body": "You could modify your Python process to act as a sort of proxy and forward the information to and/or from a second TCP connection to the other process.  If you wanted to do it without modifying your Python process, that would require low-level hackery.   (it might be simpler to just have the second process connect to the remote service directly, the same way the first process does, if that&#39;s an option)"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1575512846, "creation_date": 1575512846, "answer_id": 59187323, "question_id": 59184767, "link": "https://stackoverflow.com/questions/59184767/join-existing-socket-in-python/59187323#59187323", "title": "&quot;Join&quot; existing socket in Python", "body": "<p>It is possible for a Python process to create a listening socket, <code>bind()</code> it to a port, and <code>listen()</code>s for incoming TCP connections on that port, and then at some point after that, another Python process can <code>connect()</code> to that port, at which point the first process can <code>accept()</code> the incoming TCP connection and the two processes can send data to each other over it.  So if that is what you are asking about, the Python <a href=\"https://docs.python.org/3/library/socket.html\" rel=\"nofollow noreferrer\">socket</a> module has the APIs you are looking for.</p>\n\n<p>If OTOH you are asking about splicing a third party in as a middleman between two existing processes that are already communicating with each other over TCP, that is not possible without some serious low-level hackery, since TCP was designed as a 1-to-1 communications mechanism only.</p>\n"}], "owner": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575512846, "creation_date": 1575494084, "question_id": 59184767, "link": "https://stackoverflow.com/questions/59184767/join-existing-socket-in-python", "title": "&quot;Join&quot; existing socket in Python", "body": "<p>Is it possible to create a socket connection (from either Python or a <code>nc</code> based listener), and then 'join' it from another Python process, sending data from the same socket to the same remote, and vice versa?</p>\n"}, {"tags": ["python", "numpy", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 3224, "user_id": 10396469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e00e8124a1819da370101aa8e2144eb?s=128&d=identicon&r=PG", "display_name": "Poe Dator", "link": "https://stackoverflow.com/users/10396469/poe-dator"}, "edited": false, "score": 0, "creation_date": 1575494462, "post_id": 59184700, "comment_id": 104590003, "body": "You may need just 4D as input. It will become 5D after first convolution layer. for 3 to 4 D conversion you stack images or use tf.expand_dims is using single image per batch."}, {"owner": {"reputation": 565, "user_id": 12397093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0dc69de0742143820bc55f9eebf24a2?s=128&d=identicon&r=PG&f=1", "display_name": "code-lukas", "link": "https://stackoverflow.com/users/12397093/code-lukas"}, "edited": false, "score": 0, "creation_date": 1575498540, "post_id": 59184700, "comment_id": 104591258, "body": "If you read 3D volumes with <code>imageio</code> consider using <code>volread</code> instead of <code>imread</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1575496640, "creation_date": 1575496640, "answer_id": 59185204, "question_id": 59184700, "link": "https://stackoverflow.com/questions/59184700/tensorflow-get-input-batch-from-numpy-array-for-3d-cnn/59185204#59185204", "title": "TensorFlow: Get input batch from numpy array for 3D CNN", "body": "<p>With your approach, you have to load all data at once into memory and also you have to take care of all dimensions. I would suggest using Keras <code>flow_from_directory</code> and <code>generators</code>. Keras has this <code>ImageDataGenerator</code> class which allows the users to perform image collection from directories, change all images to any size you want, shuffle them, ... . You can find the documentation <a href=\"https://keras.io/preprocessing/image/\" rel=\"nofollow noreferrer\">here</a> at their website. </p>\n\n<blockquote>\n  <p>Download the train dataset and test dataset, extract them into 2 different folders named as \u201ctrain\u201d and \u201ctest\u201d. The train folder should contain \u2018n\u2019 folders each containing images of respective classes. For example, In the Dog vs Cats data set, the train folder should have 2 folders, namely \u201cDog\u201d and \u201cCats\u201d containing respective images inside them.</p>\n</blockquote>\n\n<p>This is an example on how to create a dataset for your model's input: </p>\n\n<pre><code>train_generator = train_datagen.flow_from_directory(\n    directory=r\"C:/Users/myname/Documents/Projects/Segmentation/DeepLearning/L-net/data/\",\n    target_size=(224, 224), # the size of your input images\n    color_mode=\"rgb\", # could be grayscale or rgb\n    batch_size=32, # Number of images in each batsh\n    class_mode=\"categorical\",\n    shuffle=True, # Whether to shuffle the images or not\n    seed=42 # Random seed for applying random image augmentation\n)\n</code></pre>\n\n<p>You can perform training like this: </p>\n\n<pre><code>STEP_SIZE_TRAIN=train_generator.n//train_generator.batch_size\nSTEP_SIZE_VALID=valid_generator.n//valid_generator.batch_size\nmodel.fit_generator(generator=train_generator,\n                    steps_per_epoch=STEP_SIZE_TRAIN,\n                    validation_data=valid_generator,\n                    validation_steps=STEP_SIZE_VALID,\n                    epochs=10\n)\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10905928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc64aeea2237a3aad81bc0f001e193a?s=128&d=identicon&r=PG&f=1", "display_name": "sreekanthkura7", "link": "https://stackoverflow.com/users/10905928/sreekanthkura7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575496640, "creation_date": 1575493695, "question_id": 59184700, "link": "https://stackoverflow.com/questions/59184700/tensorflow-get-input-batch-from-numpy-array-for-3d-cnn", "title": "TensorFlow: Get input batch from numpy array for 3D CNN", "body": "<p>I have 3D image(tiff) data and each volume inside a folder. I want to read the data and make batch tensor for convolution network. I can read the data as numpy array but I don't how to make batch tensor input for CNN. Here is the code I have</p>\n\n<pre><code>import os\nimport tensorflow as tf\nimport numpy as np\nfrom skimage import io\nfrom matplotlib import pyplot as plt\nfrom pathlib import Path\ndata_dir = 'C:/Users/myname/Documents/Projects/Segmentation/DeepLearning/L-net/data/'\ndata_folders = os.listdir(data_dir)\ntrain_input = []\ntrain_output = []\ntest_input = []\ntest_output = []\n\nfor idx, folder in enumerate(data_folders):\n        im = io.imread(data_dir+folder+'/f0.tiff')\n        im = im/im.max()\n        train_input.append(tf.convert_to_tensor(im, dtype=tf.float32))\n        im = io.imread(data_dir+folder+'/g0.tiff')\n        im = im/im.max()\n        train_output.append(tf.convert_to_tensor(im, dtype=tf.float32))\n</code></pre>\n\n<p>Since I am using 3D filters for CNN, input should 5D tesnor. Can someone help me with this? Thanks.</p>\n"}, {"tags": ["python", "geolocation", "azure-cosmosdb", "geospatial", "azure-cosmosdb-sqlapi"], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "is_accepted": true, "score": 1, "last_activity_date": 1575530400, "creation_date": 1575530400, "answer_id": 59190081, "question_id": 59184694, "link": "https://stackoverflow.com/questions/59184694/geospatial-data-with-azure-cosmos-db-sql-api-using-python/59190081#59190081", "title": "Geospatial data with azure cosmos db SQL API using python", "body": "<p>You could test your sql in the azure cosmos portal first.I tested your code,please refer to my test:</p>\n\n<pre><code>import pydocumentdb.document_client as document_client\n\nconfig = {\n    'ENDPOINT': 'https://***.documents.azure.com:443/',\n    'MASTERKEY': '***'\n};\n\n# Initialize the Python DocumentDB client\nclient = document_client.DocumentClient(config['ENDPOINT'], {'masterKey': config['MASTERKEY']})\n\n# use a SQL based query to get a bunch of documents\nquery = { 'query': \"SELECT a.id FROM a WHERE ST_WITHIN(a.location, {'type': 'Polygon','coordinates': [[[-90.0280152, 30.265521],[-90.0335083,30.26315],[-90.0032959,29.3532687],[-89.1930542,29.3460904],[-89.2067871,30.267892],[-90.0280152,30.265521]]]})\" }\n\noptions = {}\noptions['enableCrossPartitionQuery'] = True\n\nresult_iterable = client.QueryDocuments('dbs/db/colls/coll', query, options)\n\nresults = list(result_iterable);\n\nprint(results)\n</code></pre>\n\n<p>My sample document:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O1zVv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1zVv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2kth2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2kth2.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 597, "user_id": 10565052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gbuce.jpg?s=128&g=1", "display_name": "J.C Guzman", "link": "https://stackoverflow.com/users/10565052/j-c-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 59190081, "answer_count": 1, "score": 1, "last_activity_date": 1575530400, "creation_date": 1575493662, "question_id": 59184694, "link": "https://stackoverflow.com/questions/59184694/geospatial-data-with-azure-cosmos-db-sql-api-using-python", "title": "Geospatial data with azure cosmos db SQL API using python", "body": "<p>I have 2 million records in azure cosmos db,\u00a1.</p>\n\n<p>I am using it with SQL API with python.</p>\n\n<p>I have adapted this records to be geospatial data like this sample:</p>\n\n<pre><code>{\n\"\n\"street\": \"Palmdale Station\", \n\"year\": \"2015\", \n\"incidentid\": \"D01DA82AE23D128799924FCF82B72908\", \n\"id\": \"501\", \n\"\n\"latitude\": 34.58986, \n\n\"country\": \"United States\", \n\"longitude\": -89.61238680302355, \n\"_attachments\": \"attachments/\", \n\"incidenttype\": \"Train Accident\", \n\"_etag\": \"\\\"0900f6f1-0000-0100-0000-5dd6cf150000\\\"\"\n}\n{\n\"_self\": \"dbs/QwR-AA==/colls/QwR-AIt6sYk=/docs/QwR-AIt6sYnYUx0AAAAAAA==/\", \n\"street\": \"Palmdale Station\", \n\"year\": 2015, \n\"incidentid\": \"D01DA82AE23D128799924FCF82B72908\", \n\"id\": \"501\", \n\"notifyrule\": \"Use Perimeter\", \n\"city\": \"Palmdale\", \n\"infoquality\": \"Media\", \n\"severity\": \"Minor\", \n\"incidentcategory\": \"Transportation\", \n\"location\": {\n\"type\": \"Point\", \n\"coordinates\": [\n-89.61238680302355, \n29.568987477308124\n]\n}, \n\"latitude\": 29.568987477308124, \n\"infosource\": \"Media\", \n\"description\": \"One person was struck by an Antelope Valley Line Train near the Palmdale Station, located in the area of Clock Tower Plaza Dr E and Transportation Dr. AV Line tracks between Palmdale and Lancaster remain closed. This incident is closed.\", \n\"_ts\": 1575425976, \n\"activitystatus\": \"CLOSED\", \n\"postal\": \"93550\", \n\"createddated\": \"2015-12-30 21:46:00 EST\", \n\"country\": \"United States\", \n\"longitude\": -118.1194, \n\"_attachments\": \"attachments/\", \n\"incidenttype\": \"Train Accident\", \n\"_etag\": \"\\\"13002b74-0000-0100-0000-5de717b80000\\\"\"\n}\nresults_fake[0]['location'] = {'type': 'Point','coordinates':[results_fake[0]['longitude'],results_fake[0]['latitude']] }\n</code></pre>\n\n<p>As you can see I have created an adicional key called <code>location</code>, where I have wrote <code>type</code> and coordinates: longitude and latitude as it is explained in microsoft azure documentation: <a href=\"https://docs.microsoft.com/bs-latn-ba/azure/cosmos-db/geospatial\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>I am trying now to query some data, but I am not obtaining any result, I want to obtain the points within a polygon like this:</p>\n\n<pre><code>query =\"\"\" SELECT a.id FROM \" + container_id + \" a\nWHERE ST_WITHIN(a.location, {\"type\": \"Polygon\",\"coordinates\": [\n[[-90.0280152, 30.265521],\n[-90.0335083,30.26315],\n[-90.0032959,29.3532687],\n[-89.1930542,29.3460904],\n[-89.2067871,30.267892],\n[-90.0280152,30.265521]]]})\"\"\"\n\nfor item in client.client_connection.QueryItems(\"dbs/\" + database_id + \"/colls/\" + container_id,\n                            query,\n                            {'enableCrossPartitionQuery': True}):\n\n    print(json.dumps(item, indent=True))\n</code></pre>\n\n<p>But I am not getting any results, what I am doing wrong?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1575493911, "post_id": 59184688, "comment_id": 104589836, "body": "Presumably you meant to use the <i>variable name</i> csv_file as the base filename, not the literal string <code>&#39;csv_file&#39;</code>."}, {"owner": {"reputation": 364, "user_id": 2996966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4c97c88bd17542f361c9f0a5e2356bc?s=128&d=identicon&r=PG&f=1", "display_name": "Dan White", "link": "https://stackoverflow.com/users/2996966/dan-white"}, "edited": false, "score": 0, "creation_date": 1575494471, "post_id": 59184688, "comment_id": 104590007, "body": "When I started, I didn&#39;t realize that I needed to specify the entire path to the file. You&#39;ll need something like <code>&#39;C:&#47;Users&#47;Iwan&#47;...&#47;csv_file.csv&#39;</code>"}, {"owner": {"reputation": 396, "user_id": 8582381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdab05a261e69e17563b23edf6f35bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Kieran Moynihan", "link": "https://stackoverflow.com/users/8582381/kieran-moynihan"}, "reply_to_user": {"reputation": 364, "user_id": 2996966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4c97c88bd17542f361c9f0a5e2356bc?s=128&d=identicon&r=PG&f=1", "display_name": "Dan White", "link": "https://stackoverflow.com/users/2996966/dan-white"}, "edited": false, "score": 0, "creation_date": 1575494645, "post_id": 59184688, "comment_id": 104590061, "body": "@DanWhite That is not <i>necessarily</i> the case, but it would be a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12482182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d96e2df79a7ed850a8568fb954639fb?s=128&d=identicon&r=PG&f=1", "display_name": "Iw4n", "link": "https://stackoverflow.com/users/12482182/iw4n"}, "edited": false, "score": 0, "creation_date": 1575495288, "post_id": 59184857, "comment_id": 104590299, "body": "In fact the date format I&#39;m getting with current code is : YYYY-MM-DD which seems to be fine to me. I also appreciate your detailed explanation on the issue."}], "tags": [], "owner": {"reputation": 396, "user_id": 8582381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdab05a261e69e17563b23edf6f35bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Kieran Moynihan", "link": "https://stackoverflow.com/users/8582381/kieran-moynihan"}, "is_accepted": true, "score": 0, "last_activity_date": 1575494595, "creation_date": 1575494595, "answer_id": 59184857, "question_id": 59184688, "link": "https://stackoverflow.com/questions/59184688/how-to-open-a-file-that-everyday-has-a-different-name-due-to-date-change/59184857#59184857", "title": "How to open a file that everyday has a different name due to date change", "body": "<p>There are two changes that will have to be made that are jumping out at me right away.</p>\n\n<p>First of all, you're trying to open the file with the name defined by your variable <code>csv_file</code>, but you wrapped the variable name in quotes in your <code>open()</code> statement:</p>\n\n<pre><code>with open('csv_file' +'.csv', 'r') as csvfile:\n</code></pre>\n\n<p>Remove the quotes around <code>csv_file</code>, so that it uses the value of the variable <code>csv_file</code>, rather than just the literal string <code>'csv_file'</code>:</p>\n\n<pre><code>with open(csv_file + '.csv', 'r') as csvfile:\n</code></pre>\n\n<p>Second, you'll almost certainly want to change the way the <code>datetime</code> string gets formatted, because <code>yesterday</code> is just a <code>datetime.datetime</code> object, so it's string representation will look something hideous like <code>'2019-12-04 16:21:36.731000'</code>, which isn't a very good string to put in a filename.</p>\n\n<p>I'm going to take a guess that your filename will want dates formatted something like <code>YYYYMMDD</code>, but since you haven't given us that information there's not much to go on. Assuming that case, you could change the way you get your value for <code>yesterday</code> to be a string formatted from the <code>datetime.datetime</code> object, using <code>datetime.datetime.strftime()</code>:</p>\n\n<pre><code>yesterday = (today - timedelta(days = 1)).strftime('%Y%m%d')\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12482182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d96e2df79a7ed850a8568fb954639fb?s=128&d=identicon&r=PG&f=1", "display_name": "Iw4n", "link": "https://stackoverflow.com/users/12482182/iw4n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59184857, "answer_count": 1, "score": -2, "last_activity_date": 1575496438, "creation_date": 1575493585, "last_edit_date": 1575493828, "question_id": 59184688, "link": "https://stackoverflow.com/questions/59184688/how-to-open-a-file-that-everyday-has-a-different-name-due-to-date-change", "title": "How to open a file that everyday has a different name due to date change", "body": "<p>I am working on an automation of reporting to my collaborators. </p>\n\n<p>I am pulling the report though API with the following code:</p>\n\n<p><strong><em>code</em></strong></p>\n\n<pre><code>import requests\nfrom datetime import date, timedelta\n\ntoday = date.today()\nyesterday = today - timedelta(days = 1)\n\napp_id = 'myappid'\nreport_type = 'daily_report'\n\nparams = {\n  'api_token': 'api_token',\n  'from': yesterday,\n  'to': yesterday\n}\n\nrequest_url = 'https://domainxyz.com/export/{}/{}/v5'.format(app_id, report_type)\n\nres = requests.request('GET', request_url, params=params)\n\nif res.status_code != 200:\n  if res.status_code == 404:\n    print('There is a problem with the request URL. Make sure that it is correct')\n  else:\n    print('There was a problem retrieving data: ', res.text)\nelse:\n  f = open('{}-{}-{}-to-{}.csv'.format(app_id, report_type, params['from'], params['to']), 'w', newline='', encoding=\"utf-8\")\n  f.write(res.text)\n  f.close()\n</code></pre>\n\n<p>and the code saves the file as 'myappid-daily_report-yesterdayDate-to-yesterdayDate.csv</p>\n\n<p>and this is working just great.\nOnce I do have the data for yesterday, I would like to open the csv file and do some modifications with Pandas but before this, I need to open the CSV file which has kind of a dynamic name on daily basis.</p>\n\n<p>I would open the file with the following </p>\n\n<pre><code>import csv\nfrom datetime import date, timedelta\n\ntoday = date.today()\nyesterday = today - timedelta(days = 1)\n\napp_id = 'myappid'\nreport_type = 'daily_report'\n\nparams = {\n\n  'from': yesterday,\n  'to': yesterday\n}\n\n\ncsv_file = ('{}-{}-{}-to-{}'.format(app_id, report_type, params['from'], params['to']))\nprint (csv_file)\n\nwith open('csv_file' +'.csv', 'r') as csvfile:\n</code></pre>\n\n<p>The print function returns proper name but I am getting an error which says :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"C:/Users/Iwan/PycharmProjects/Learning/csv_mods.py\", line 20, in &lt;module&gt;\n    with open('csv_file' +'.csv', 'r') as csvfile:\nFileNotFoundError: [Errno 2] No such file or directory: 'csv_file.csv'\n</code></pre>\n\n<p>So I wonder how can I inject the *.csv on daily basis instead of manually typing csv file name. </p>\n\n<p>If I have made any mistake in this post or question please point it out and I will do my best to avoid this in the future.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 1, "creation_date": 1575493817, "post_id": 59184634, "comment_id": 104589803, "body": "Please post the actual traceback you get."}, {"owner": {"reputation": 2093, "user_id": 3817456, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/yaB2T.png?s=128&g=1", "display_name": "jeremy_rutman", "link": "https://stackoverflow.com/users/3817456/jeremy-rutman"}, "edited": false, "score": 0, "creation_date": 1575495598, "post_id": 59184634, "comment_id": 104590387, "body": "weights (a 4x1 vector) isnt the same size as mean_returns (a length 22-tuple pd.Series) .  What is weights supposed to do? Maybe add some comments in your code as to what the goal is ."}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1575503599, "post_id": 59184634, "comment_id": 104592667, "body": "Ok, I&#39;ll fiddle around with it some more and figure out some kind of solution.  Thanks."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1581124571, "post_id": 59184634, "comment_id": 106337333, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/24560298/python-numpy-valueerror-operands-could-not-be-broadcast-together-with-shapes\">python numpy ValueError: operands could not be broadcast together with shapes</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1581124824, "post_id": 59185085, "comment_id": 106337371, "body": "Yes, yes, I got it working with your help.  Thanks so much!!"}, {"owner": {"reputation": 2093, "user_id": 3817456, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/yaB2T.png?s=128&g=1", "display_name": "jeremy_rutman", "link": "https://stackoverflow.com/users/3817456/jeremy-rutman"}, "reply_to_user": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1581170853, "post_id": 59185085, "comment_id": 106345165, "body": "if that was the fix you were after, i invite you to mark it as the correct answer"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3817456, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/yaB2T.png?s=128&g=1", "display_name": "jeremy_rutman", "link": "https://stackoverflow.com/users/3817456/jeremy-rutman"}, "is_accepted": true, "score": 1, "last_activity_date": 1575496844, "last_edit_date": 1575496844, "creation_date": 1575495934, "answer_id": 59185085, "question_id": 59184634, "link": "https://stackoverflow.com/questions/59184634/python-errors-out-on-portfolio-management-exercise/59185085#59185085", "title": "Python errors out on portfolio management exercise", "body": "<p>I'm not 100% sure this is what you were after, but editing this line in <code>random_portfolios</code> allows the program to complete: </p>\n\n<pre><code>weights = np.random.random(len(mean_returns))\n</code></pre>\n\n<p>A bunch of allocation and volatility info is produced and the program exits without error. </p>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59185085, "answer_count": 1, "score": -1, "last_activity_date": 1575496844, "creation_date": 1575493277, "last_edit_date": 1575494573, "question_id": 59184634, "link": "https://stackoverflow.com/questions/59184634/python-errors-out-on-portfolio-management-exercise", "title": "Python errors out on portfolio management exercise", "body": "<p>When I try to run the chunk of code below I get some weird errors.  </p>\n\n<p>Here is the traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;input&gt;\", line 91, in display_simulated_ef_with_random\n  File \"&lt;input&gt;\", line 71, in random_portfolios\n  File \"&lt;input&gt;\", line 59, in portfolio_annualised_performance\n  File \"C:\\Users\\rms\\PycharmProjects\\untitled2\\venv\\lib\\site-packages\\pandas\\core\\ops.py\", line 1583, in wrapper\n    result = safe_na_op(lvalues, rvalues)\n  File \"C:\\Users\\rms\\PycharmProjects\\untitled2\\venv\\lib\\site-packages\\pandas\\core\\ops.py\", line 1529, in safe_na_op\n    return na_op(lvalues, rvalues)\n  File \"C:\\Users\\rms\\PycharmProjects\\untitled2\\venv\\lib\\site-packages\\pandas\\core\\ops.py\", line 1505, in na_op\n    result = expressions.evaluate(op, str_rep, x, y, **eval_kwargs)\n  File \"C:\\Users\\rms\\PycharmProjects\\untitled2\\venv\\lib\\site-packages\\pandas\\core\\computation\\expressions.py\", line 208, in evaluate\n    return _evaluate(op, op_str, a, b, **eval_kwargs)\n  File \"C:\\Users\\rms\\PycharmProjects\\untitled2\\venv\\lib\\site-packages\\pandas\\core\\computation\\expressions.py\", line 68, in _evaluate_standard\n    return op(a, b)\nValueError: operands could not be broadcast together with shapes (22,) (4,) \n</code></pre>\n\n<p>I think I am missing something somewhat simple, but I'm not sure what the issue really is.  Any thoughts?</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom pandas_datareader import data, wb\nimport datetime\nimport scipy.optimize as sco\nfrom scipy import stats\nfrom datetime import datetime, date, time\nimport matplotlib.pyplot as plt\n\npd.set_option('display.max_columns', None)\n\ntickers = ['AAPL',\n'BA',\n'CAT',\n'CSCO',\n'CVX',\n'XOM',\n'GS',\n'HD',\n'IBM',\n'INTC',\n'JNJ',\n'KO',\n'JPM',\n'MCD',\n'MMM',\n'MRK',\n'MSFT',\n'NKE',\n'PFE',\n'PG',\n'VZ',\n'DIS']\nstart = date(2019, 1, 1)\nend = date(2019, 7, 16)\n\ndf = pd.DataFrame([data.DataReader(ticker, 'yahoo', start, end)['Adj Close'] for ticker in tickers]).T\ndf.columns = tickers\n\nprint(df)\n\n\n\nplt.figure(figsize=(10, 5))\nfor c in df.columns.values:\n    plt.plot(df.index, df[c], lw=3, alpha=0.8,label=c)\nplt.legend(loc='upper left', fontsize=12)\nplt.ylabel('price in $')\n\nreturns = df.pct_change()\nplt.figure(figsize=(10, 5))\nfor c in returns.columns.values:\n    plt.plot(returns.index, returns[c], lw=3, alpha=0.8,label=c)\nplt.legend(loc='upper right', fontsize=12)\nplt.ylabel('daily returns')\n\n\ndef portfolio_annualised_performance(weights, mean_returns, cov_matrix):\n    returns = np.sum(mean_returns * weights) * 252\n    std = np.sqrt(np.dot(weights.T, np.dot(cov_matrix, weights))) * np.sqrt(252)\n    return std, returns\n\n\ndef random_portfolios(num_portfolios, mean_returns, cov_matrix, risk_free_rate):\n    results = np.zeros((3, num_portfolios))\n    weights_record = []\n    for i in range(num_portfolios):\n        weights = np.random.random(4)\n        weights /= np.sum(weights)\n        weights_record.append(weights)\n        portfolio_std_dev, portfolio_return = portfolio_annualised_performance(weights, mean_returns, cov_matrix)\n        results[0, i] = portfolio_std_dev\n        results[1, i] = portfolio_return\n        results[2, i] = (portfolio_return - risk_free_rate) / portfolio_std_dev\n    return results, weights_record\n\n\n# calculate sharpe ratio\nreturns = df.pct_change()\nmean_returns = returns.mean()\ncov_matrix = returns.cov()\nnum_portfolios = 250\nrisk_free_rate = 0.015\n\n\n# generate random portfolio and gets the results (portfolio returns, portfolio volatility, portfolio Sharpe ratio)\n# and weights for the corresponding result. Then by locating the one with the highest Sharpe ratio portfolio,\n# it displays maximum Sharpe ratio portfolio as red star sign. And does similar steps for minimum volatility portfolio,\n# and displays it as a green star on the plot.\ndef display_simulated_ef_with_random(mean_returns, cov_matrix, num_portfolios, risk_free_rate):\n    results, weights = random_portfolios(num_portfolios, mean_returns, cov_matrix, risk_free_rate)\n\n    max_sharpe_idx = np.argmax(results[2])\n    sdp, rp = results[0, max_sharpe_idx], results[1, max_sharpe_idx]\n    max_sharpe_allocation = pd.DataFrame(weights[max_sharpe_idx], index=df.columns, columns=['allocation'])\n    max_sharpe_allocation.allocation = [round(i * 100, 2) for i in max_sharpe_allocation.allocation]\n    max_sharpe_allocation = max_sharpe_allocation.T\n\n\n    min_vol_idx = np.argmin(results[0])\n    sdp_min, rp_min = results[0, min_vol_idx], results[1, min_vol_idx]\n    min_vol_allocation = pd.DataFrame(weights[min_vol_idx], index=df.columns, columns=['allocation'])\n    min_vol_allocation.allocation = [round(i * 100, 2) for i in min_vol_allocation.allocation]\n    min_vol_allocation = min_vol_allocation.T\n\n    print(\"-\" * 80)\n    print(\"Maximum Sharpe Ratio Portfolio Allocation\\n\")\n    print(\"Annualised Return:\", round(rp, 2))\n    print(\"Annualised Volatility:\", round(sdp, 2))\n    print(\"\\n\")\n    print(max_sharpe_allocation)\n    print(\"-\" * 80)\n    print(\"Minimum Volatility Portfolio Allocation\\n\")\n    print(\"Annualised Return:\", round(rp_min, 2))\n    print(\"Annualised Volatility:\", round(sdp_min, 2))\n    print(\"\\n\")\n    print(min_vol_allocation)\n\n    plt.figure(figsize=(10, 7))\n    plt.scatter(results[0, :], results[1, :], c=results[2, :], cmap='YlGnBu', marker='o', s=10, alpha=0.3)\n    plt.colorbar()\n    plt.scatter(sdp, rp, marker='*', color='r', s=500, label='Maximum Sharpe ratio')\n    plt.scatter(sdp_min, rp_min, marker='*', color='g', s=500, label='Minimum volatility')\n    plt.title('Simulated Portfolio Optimization based on Efficient Frontier')\n    plt.xlabel('annualised volatility')\n    plt.ylabel('annualised returns')\n    plt.legend(labelspacing=0.8)\n\n\ndisplay_simulated_ef_with_random(mean_returns, cov_matrix, num_portfolios, risk_free_rate)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "multithreading"], "comments": [{"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "edited": false, "score": 0, "creation_date": 1575493465, "post_id": 59184581, "comment_id": 104589680, "body": "Also look at this     <a href=\"https://stackoverflow.com/questions/37975904/how-to-use-python-to-query-database-in-parallel\" title=\"how to use python to query database in parallel\">stackoverflow.com/questions/37975904/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10281, "user_id": 470583, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Nfmz4.jpg?s=128&g=1", "display_name": "Tagar", "link": "https://stackoverflow.com/users/470583/tagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1575931856, "last_edit_date": 1575931856, "creation_date": 1575493367, "answer_id": 59184653, "question_id": 59184581, "link": "https://stackoverflow.com/questions/59184581/python-multiprocessing-restraint-limited-to-only-3-connections-to-database/59184653#59184653", "title": "Python Multiprocessing restraint. limited to only 3 connections to database", "body": "<p>You can use SQLAlchemy Python package that has database connection pooling as a standard functionality.</p>\n\n<p>It does work with Postgres and many other database backends.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>engine = create_engine('postgresql://me@localhost/mydb',\n                       pool_size=3, max_overflow=0)\n</code></pre>\n\n<p><code>pool_size</code> max number of connections to the database. You can set it to 3.</p>\n\n<p>This page has some examples how to use that with Postgres -</p>\n\n<p><a href=\"https://docs.sqlalchemy.org/en/13/core/pooling.html\" rel=\"nofollow noreferrer\">https://docs.sqlalchemy.org/en/13/core/pooling.html</a></p>\n\n<p>Based on your use case you might be also interested in\n<code>SingletonThreadPool</code></p>\n\n<p><a href=\"https://docs.sqlalchemy.org/en/13/core/pooling.html#sqlalchemy.pool.SingletonThreadPool\" rel=\"nofollow noreferrer\">https://docs.sqlalchemy.org/en/13/core/pooling.html#sqlalchemy.pool.SingletonThreadPool</a></p>\n\n<p>A Pool that maintains one connection per thread.</p>\n"}, {"tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": true, "score": 1, "last_activity_date": 1575495200, "creation_date": 1575495200, "answer_id": 59184956, "question_id": 59184581, "link": "https://stackoverflow.com/questions/59184581/python-multiprocessing-restraint-limited-to-only-3-connections-to-database/59184956#59184956", "title": "Python Multiprocessing restraint. limited to only 3 connections to database", "body": "<p>It appears you only briefly need your database connection, with the bulk on the script's time spent processing the data. If this is the case you may wish to pull the data out once and then write the data to disk. You can then load this data fresh from disk in each new instance of your program, without having to worry about your connection limit to the database.</p>\n\n<p>If you want to look into connection pooling, you way wish to use <a href=\"http://www.pgbouncer.org/\" rel=\"nofollow noreferrer\">pgbouncer</a>. This is a separate program that sits between your main program and the database, pooling the number of connections you give it. You are then free to write your script as a single-threaded program, and you can spawn as many instances as your machine can cope with. </p>\n\n<p>It's hard to tell why your program is misbehaving as the indentation is appears to be wrong. But at a guess it would seem like you do not create an use your pool in side a <code>__main__</code> guard. Which, on certain OSes could lead to all sorts of weird issues.</p>\n\n<p>You would expect well behaving code to look something like:</p>\n\n<pre><code>from multiprocessing import Pool\n\ndef double(x):\n    return x * 2\n\nif __name__ == '__main__':\n    # means pool only gets created in the main parent process and not in the child pool processes\n    with Pool(3) as pool:\n        result = pool.map(double, range(5))\n    assert result == [0, 2, 4, 6, 8, 10]\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 12482224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vRSDOpjNnTc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfk9sYD7onR0-xqOQ0O9GR-t0NXTg/photo.jpg?sz=128", "display_name": "Geoffrey Jennings", "link": "https://stackoverflow.com/users/12482224/geoffrey-jennings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 59184956, "answer_count": 2, "score": 1, "last_activity_date": 1575931856, "creation_date": 1575492973, "question_id": 59184581, "link": "https://stackoverflow.com/questions/59184581/python-multiprocessing-restraint-limited-to-only-3-connections-to-database", "title": "Python Multiprocessing restraint. limited to only 3 connections to database", "body": "<p>I am using Python 3.6.8 and have a function that needs to run 77 times. I am passing in data that is pulling data out of PostgreSQL and doing a statistical analysis and then putting back into the database. I can only run 3 processes at the same time due to one at a time takes way to long (about 10 min for each function call) and me only being able to have 3 DB connections open at one time. I am trying to use the Poll library of Multiprocessing and it is trying to start all of them at once which is causing a too many connections error. Am i using the poll method correctly, if not what should i use to limit to ONLY 3 functions starting and finishing at the same time.</p>\n\n<pre><code>\ndef AnalysisOf3Years(data):\n    FUNCTION RAN HERE\n######START OF THE PROGRAM######\nprint(\"StartTime ((FINAL 77)): \", datetime.now())\ncon = psycopg2.connect(host=\"XXX.XXX.XXX.XXX\", port=\"XXXX\", user=\"USERNAME\", password=\"PASSWORD\", dbname=\"DATABASE\")\ncur = con.cursor()\ndate = datetime.today()\ncur.execute(\"SELECT Value FROM table\")\nArray = cur.fetchall()\nData = []\ncon.close()\nfor value in Array:\n    Data.append([value,date])\np = Pool(3)\np.map(AnalysisOf3Years,Data)\nprint(\"EndTime ((FINAL 77)): \", datetime.now())\n</code></pre>\n"}, {"tags": ["python", "airflow", "apache-airflow-xcom"], "answers": [{"tags": [], "owner": {"reputation": 260, "user_id": 3792263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32bece4226c46b26508721d42786a8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Clarke", "link": "https://stackoverflow.com/users/3792263/liam-clarke"}, "is_accepted": true, "score": 3, "last_activity_date": 1575499093, "creation_date": 1575499093, "answer_id": 59185595, "question_id": 59184577, "link": "https://stackoverflow.com/questions/59184577/how-do-you-push-an-xcom-variable-to-an-existing-dag-id/59185595#59185595", "title": "How do you push an xcom variable to an existing dag id?", "body": "<p>Looking at the source code for <a href=\"https://github.com/apache/airflow/blob/master/airflow/models/taskinstance.py#L1292\" rel=\"nofollow noreferrer\">TaskInstance</a> it looks like you could copy what it does under the hood directly, and specify your desired DAG id. </p>\n\n<pre><code>        XCom.set(\n            key=key,\n            value=value,\n            task_id=self.task_id,\n            dag_id=self.dag_id,\n            execution_date=execution_date or self.execution_date)\n</code></pre>\n\n<p>However, the <code>xcom_pull</code> API directly supports pulling from another DAG's xcom so perhaps you could have the DAG you want to modify pull from the other instead?</p>\n\n<pre><code>    def xcom_pull(\n            self,\n            task_ids: Optional[Union[str, Iterable[str]]] = None,\n            dag_id: Optional[str] = None,\n            key: str = XCOM_RETURN_KEY,\n            include_prior_dates: bool = False) -&gt; Any\n</code></pre>\n"}], "owner": {"reputation": 1659, "user_id": 8652920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/424fc9eef2ec4e556d087276249f136b?s=128&d=identicon&r=PG&f=1", "display_name": "notacorn", "link": "https://stackoverflow.com/users/8652920/notacorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 59185595, "answer_count": 1, "score": 2, "last_activity_date": 1575499093, "creation_date": 1575492956, "question_id": 59184577, "link": "https://stackoverflow.com/questions/59184577/how-do-you-push-an-xcom-variable-to-an-existing-dag-id", "title": "How do you push an xcom variable to an existing dag id?", "body": "<p>I currently have a DAG in Airflow with a Python Operator and associated python callable like such:</p>\n\n<pre><code>def push_xcom(**kwargs):\n    ti = kwargs[\"ti\"]\n\n    ti.xcom_push(key=key, value=value)\n\nxcom_opr = PythonOperator(\n        task_id='xcom_opr',\n        python_callable=push_xcom,\n        dag=dag\n    )\n</code></pre>\n\n<p>The goal of this dag is to update other DAG's xcom variables defined in Airflow. Is this not possible? I couldn't find any source code for <code>xcom_push</code>, but maybe something like a <code>dag_id</code> argument?</p>\n"}, {"tags": ["python", "genetic-algorithm", "genetic-programming", "deap"], "answers": [{"comments": [{"owner": {"reputation": 2290, "user_id": 5468953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FWcKeItq2a4/AAAAAAAAAAI/AAAAAAAAAEE/WQokFUs5ZIg/photo.jpg?sz=128", "display_name": "Izaak van Dongen", "link": "https://stackoverflow.com/users/5468953/izaak-van-dongen"}, "edited": false, "score": 0, "creation_date": 1579096591, "post_id": 59750752, "comment_id": 105651972, "body": "This does not really answer the question. If you have a different question, you can ask it by clicking <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a>. You can also <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">add a bounty</a> to draw more attention to this question. - <a href=\"/review/low-quality-posts/25099519\">From Review</a>"}, {"owner": {"reputation": 157, "user_id": 4717717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff2bf28d137413dede37f14a433dfff?s=128&d=identicon&r=PG&f=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/4717717/philip"}, "reply_to_user": {"reputation": 2290, "user_id": 5468953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FWcKeItq2a4/AAAAAAAAAAI/AAAAAAAAAEE/WQokFUs5ZIg/photo.jpg?sz=128", "display_name": "Izaak van Dongen", "link": "https://stackoverflow.com/users/5468953/izaak-van-dongen"}, "edited": false, "score": 0, "creation_date": 1579183047, "post_id": 59750752, "comment_id": 105686056, "body": "Ahh apologies wasn&#39;t 100% sure on process and just wanted to save anyone looking into it some time. Can delete if this is not the place"}], "tags": [], "owner": {"reputation": 157, "user_id": 4717717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff2bf28d137413dede37f14a433dfff?s=128&d=identicon&r=PG&f=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/4717717/philip"}, "is_accepted": false, "score": 0, "last_activity_date": 1579101980, "last_edit_date": 1579101980, "creation_date": 1579088688, "answer_id": 59750752, "question_id": 59184561, "link": "https://stackoverflow.com/questions/59184561/deap-genetic-program-crossover-failed-incomplete-tree/59750752#59750752", "title": "DEAP genetic program - crossover failed (incomplete tree)", "body": "<p>Having the same problem and sadly getting more confused as dig into it.</p>\n\n<p>When I replicate the code from <a href=\"http://pydoc.net/deap/1.0.1/deap.gp/\" rel=\"nofollow noreferrer\">here</a> that raises the error:</p>\n\n<pre><code>for node in val[1:]:\n    total += node.arity - 1\nif total != 0:\n    raise ValueError(\"Invalid slice assignation : insertion of\"\n        \" an incomplete subtree is not allowed in PrimitiveTree.\"\n        \" A tree is defined as incomplete when some nodes cannot\"\n        \" be mapped to any position in the tree, considering the\"\n        \" primitives' arity. For instance, the tree [sub, 4, 5,\"\n        \" 6] is incomplete if the arity of sub is 2, because it\"\n        \" would produce an orphan node (the 6).\")\n</code></pre>\n\n<p>And just run on the tress for crossover individually, both trees have arity scores of 0.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10637762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0mD7wQ5v48E/AAAAAAAAAAI/AAAAAAAAABQ/Qex3PPnFFFg/photo.jpg?sz=128", "display_name": "Krux99", "link": "https://stackoverflow.com/users/10637762/krux99"}, "reply_to_user": {"reputation": 2330, "user_id": 12708583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9hXo.jpg?s=128&g=1", "display_name": "10 Rep", "link": "https://stackoverflow.com/users/12708583/10-rep"}, "edited": false, "score": 0, "creation_date": 1590294795, "post_id": 61960863, "comment_id": 109624410, "body": "@TheMaker If you look at the mate function in the question, he is using the cxOnePoint function from tools. This doesn&#39;t take into account genetic programming, and so it fails. To fix it, all you have to do is replace <code>toolbox.register(&quot;mate&quot;, tools.cxOnePoint)</code> in the above code with <code>toolbox.register(&quot;mate&quot;, gp.cxOnePoint)</code>"}, {"owner": {"reputation": 2330, "user_id": 12708583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9hXo.jpg?s=128&g=1", "display_name": "10 Rep", "link": "https://stackoverflow.com/users/12708583/10-rep"}, "edited": false, "score": 0, "creation_date": 1590341582, "post_id": 61960863, "comment_id": 109638422, "body": "Ok, you could include this explanation in the answer, couldn&#39;t you?"}], "tags": [], "owner": {"reputation": 1, "user_id": 10637762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0mD7wQ5v48E/AAAAAAAAAAI/AAAAAAAAABQ/Qex3PPnFFFg/photo.jpg?sz=128", "display_name": "Krux99", "link": "https://stackoverflow.com/users/10637762/krux99"}, "is_accepted": false, "score": 0, "last_activity_date": 1590169490, "creation_date": 1590169490, "answer_id": 61960863, "question_id": 59184561, "link": "https://stackoverflow.com/questions/59184561/deap-genetic-program-crossover-failed-incomplete-tree/61960863#61960863", "title": "DEAP genetic program - crossover failed (incomplete tree)", "body": "<p>You are using tools.cxOnePoint, you should be using gp.cxOnePoint</p>\n"}], "owner": {"reputation": 11, "user_id": 12482198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a505fe40fa3e59e2a22f655019b845?s=128&d=identicon&r=PG&f=1", "display_name": "jingting", "link": "https://stackoverflow.com/users/12482198/jingting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1590169490, "creation_date": 1575492894, "question_id": 59184561, "link": "https://stackoverflow.com/questions/59184561/deap-genetic-program-crossover-failed-incomplete-tree", "title": "DEAP genetic program - crossover failed (incomplete tree)", "body": "<p>I use deep to do the genetic programming. My individual is expression tree. I add some customized operator with arity 1 and 2.</p>\n\n<pre><code>pset = gp.PrimitiveSet(\"MAIN\", 7)\npset.addPrimitive(operator.add, 2)\npset.addPrimitive(operator.sub, 2)\npset.addPrimitive(operator.mul, 2)\npset.addPrimitive(cop.delay10, 1)\npset.addPrimitive(cop.arg_max, 1)\npset.addPrimitive(cop.arg_min, 1)\npset.addPrimitive(cop.rank, 1)\npset.addPrimitive(cop.ma_n, 1)\npset.addPrimitive(cop.std_n, 1)\npset.addPrimitive(cop.max_diff, 1)\npset.addPrimitive(cop.min_diff, 1)\npset.addPrimitive(cop.factor_cov, 2)\npset.addPrimitive(cop.factor_corr, 2)\n\npset.renameArguments(ARG0=\"open\")\npset.renameArguments(ARG1=\"high\")\npset.renameArguments(ARG2=\"low\")\npset.renameArguments(ARG3=\"close\")\npset.renameArguments(ARG4=\"volume\")\npset.renameArguments(ARG5=\"turn\")\npset.renameArguments(ARG6=\"re_turn\")\n\n# Creators\ncreator.create(\"FitnessMax\", base.Fitness, weights=(1.0,)) \ncreator.create(\"Individual\", gp.PrimitiveTree, fitness=creator.FitnessMax)\n\n# Create Individuals\ntoolbox = base.Toolbox()\ntoolbox.register(\"expr\", gp.genHalfAndHalf, pset=pset, min_=2, max_=5)  \ntoolbox.register(\"individual\", tools.initIterate, creator.Individual, toolbox.expr)\n\n# Create initial population\nN_POP = 4 \ntoolbox.register('population', tools.initRepeat, list, toolbox.individual)\ntoolbox.register(\"compile\", gp.compile, pset=pset)\n\ndef evaluate_fit():\n... # the part I customize my fitness score calculation function\n\ntoolbox.register(\"evaluate\", evaluate_fit, stock_map=stock_dict, mkt=mkt_value, daily_return=wap_return)\ntoolbox.register(\"select\", tools.selTournament, tournsize=3)\ntoolbox.register(\"mate\", tools.cxOnePoint)\ntoolbox.register(\"expr_mut\", gp.genFull, min_=0, max_=2)\ntoolbox.register(\"mutate\", gp.mutUniform, expr=toolbox.expr_mut, pset=pset)\n\ntoolbox.decorate(\"mate\", gp.staticLimit(key=operator.attrgetter(\"height\"), max_value=17))\ntoolbox.decorate(\"mutate\", gp.staticLimit(key=operator.attrgetter(\"height\"), max_value=17))\n\npop = toolbox.population(n=N_POP)\nhof = tools.HallOfFame(2)\n\npop = algorithms.eaSimple(pop, toolbox, 0.5, 0.1, 2,\n                          halloffame=hof, verbose=False)\n</code></pre>\n\n<p>Most of my parameters' setting is very similar to the offical example :<a href=\"https://github.com/DEAP/deap/blob/454b4f65a9c944ea2c90b38a75d384cddf524220/examples/gp/symbreg.py\" rel=\"nofollow noreferrer\">https://github.com/DEAP/deap/blob/454b4f65a9c944ea2c90b38a75d384cddf524220/examples/gp/symbreg.py</a>\nI use same crossover method:csOnePoint, all the other setting of my program is same as this example.\nI think the only different between my program and this example is the customized operator and evaluation method. But I don't know why it always have error when I do crossover step, I have this error:</p>\n\n<p><em>ValueError: Invalid slice assignation : insertion of an incomplete subtree is not allowed in PrimitiveTree. A tree is defined as incomplete when some nodes cannot be mapped to any position in the tree, considering the primitives' arity. For instance, the tree [sub, 4, 5, 6] is incomplete if the arity of sub is 2, because it would produce an orphan node (the 6).</em></p>\n\n<p>I understand this may means the tree after crossover is not fulfill the arity requirement, but I don't know why I have this problem. When I try the symberg.py example, I don't encounter this problem.</p>\n"}, {"tags": ["python", "airflow"], "comments": [{"owner": {"reputation": 260, "user_id": 3792263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32bece4226c46b26508721d42786a8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Clarke", "link": "https://stackoverflow.com/users/3792263/liam-clarke"}, "edited": false, "score": 1, "creation_date": 1575500196, "post_id": 59184551, "comment_id": 104591784, "body": "I presume this &quot;Is there a way to run DockerOperator with xcom_push=True and auto_remove=False at the same time?&quot; was meant to be &quot;Is there a way to run DockerOperator with xcom_push=True and auto_remove=True at the same time?&quot;  ?"}, {"owner": {"reputation": 567, "user_id": 3504684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f229b5fc33c3586eaeb90ac1d43df9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alechan", "link": "https://stackoverflow.com/users/3504684/alechan"}, "reply_to_user": {"reputation": 260, "user_id": 3792263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32bece4226c46b26508721d42786a8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Clarke", "link": "https://stackoverflow.com/users/3792263/liam-clarke"}, "edited": false, "score": 0, "creation_date": 1575549635, "post_id": 59184551, "comment_id": 104608945, "body": "You&#39;re right, fixed"}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 3504684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f229b5fc33c3586eaeb90ac1d43df9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alechan", "link": "https://stackoverflow.com/users/3504684/alechan"}, "edited": false, "score": 0, "creation_date": 1575549835, "post_id": 59185827, "comment_id": 104609047, "body": "That was what I feared ... What method do you recommend of &quot;cleaning by hand&quot; the container created?"}, {"owner": {"reputation": 260, "user_id": 3792263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32bece4226c46b26508721d42786a8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Clarke", "link": "https://stackoverflow.com/users/3792263/liam-clarke"}, "reply_to_user": {"reputation": 567, "user_id": 3504684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f229b5fc33c3586eaeb90ac1d43df9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alechan", "link": "https://stackoverflow.com/users/3504684/alechan"}, "edited": false, "score": 1, "creation_date": 1575579854, "post_id": 59185827, "comment_id": 104624362, "body": "@Alechan personally I would create my own subclass of the DockerOperator, and override <a href=\"https://github.com/apache/airflow/blob/master/airflow/operators/docker_operator.py#L210\" rel=\"nofollow noreferrer\">_run_image</a> to <code>xcom_push</code> the created container id with a specific key, then later use a <code>PythonOperator</code> that <code>xcom_pull</code>s that id and then uses <code>DockerHook</code> to manually remove the container.   Clunky I know, but probably the best you can do if you need both the last line of output, and to clean up the container."}], "tags": [], "owner": {"reputation": 260, "user_id": 3792263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32bece4226c46b26508721d42786a8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Clarke", "link": "https://stackoverflow.com/users/3792263/liam-clarke"}, "is_accepted": true, "score": 1, "last_activity_date": 1575500508, "creation_date": 1575500508, "answer_id": 59185827, "question_id": 59184551, "link": "https://stackoverflow.com/questions/59184551/how-to-use-xcom-push-true-and-auto-remove-true-at-the-same-time-when-using-docke/59185827#59185827", "title": "How to use xcom_push=True and auto_remove=True at the same time when using DockerOperator?", "body": "<p>Reading the <a href=\"https://github.com/apache/airflow/blob/master/airflow/operators/docker_operator.py\" rel=\"nofollow noreferrer\">Docker operator source</a>, I don't think so. It calls the Docker API clients <code>wait</code> <a href=\"https://docker-py.readthedocs.io/en/stable/api.html#docker.api.container.ContainerApiMixin.wait\" rel=\"nofollow noreferrer\">method</a> and then calls the <code>logs</code> <a href=\"https://docker-py.readthedocs.io/en/stable/api.html#docker.api.container.ContainerApiMixin.logs\" rel=\"nofollow noreferrer\">method</a> afterwards.</p>\n\n<p>However, <a href=\"https://docker-py.readthedocs.io/en/stable/api.html#docker.api.container.ContainerApiMixin.create_host_config\" rel=\"nofollow noreferrer\">the documentation</a> for <code>auto_remove</code> states: </p>\n\n<blockquote>\n  <p>enable auto-removal of the container on daemon side when the container\u2019s process exits.</p>\n</blockquote>\n\n<p>So as soon as the operator's call to <code>wait</code> completes, the container will be removed and you won't be able to retrieve the logs for it. </p>\n"}, {"comments": [{"owner": {"reputation": 13713, "user_id": 393077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bc10e70561cc2d008009822c4fe152aa?s=128&d=identicon&r=PG", "display_name": "Mike Caron", "link": "https://stackoverflow.com/users/393077/mike-caron"}, "edited": false, "score": 1, "creation_date": 1598370303, "post_id": 61511481, "comment_id": 112434189, "body": "Also, make sure <code>auto_remove</code> is <code>False</code>, or else the container will be long gone before this code runs"}], "tags": [], "owner": {"reputation": 4561, "user_id": 771055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791c148e8ab7f17733ff31dd380459fe?s=128&d=identicon&r=PG", "display_name": "Radim", "link": "https://stackoverflow.com/users/771055/radim"}, "is_accepted": false, "score": 3, "last_activity_date": 1588193644, "creation_date": 1588193644, "answer_id": 61511481, "question_id": 59184551, "link": "https://stackoverflow.com/questions/59184551/how-to-use-xcom-push-true-and-auto-remove-true-at-the-same-time-when-using-docke/61511481#61511481", "title": "How to use xcom_push=True and auto_remove=True at the same time when using DockerOperator?", "body": "<p>You can subclass <code>DockerOperator</code> and remove the container in <code>post_execute</code>. Like this:</p>\n\n<pre><code>class XComDockerOperator(DockerOperator):\n    def post_execute(self, context, result=None):\n        if self.cli is not None:\n            self.log.info('Removing Docker container')\n            self.cli.remove_container(self.container['Id'])\n        super().post_execute(context, result)\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 3504684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f229b5fc33c3586eaeb90ac1d43df9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alechan", "link": "https://stackoverflow.com/users/3504684/alechan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 1, "accepted_answer_id": 59185827, "answer_count": 2, "score": 2, "last_activity_date": 1588193644, "creation_date": 1575492837, "last_edit_date": 1575549622, "question_id": 59184551, "link": "https://stackoverflow.com/questions/59184551/how-to-use-xcom-push-true-and-auto-remove-true-at-the-same-time-when-using-docke", "title": "How to use xcom_push=True and auto_remove=True at the same time when using DockerOperator?", "body": "<h1>Problem</h1>\n\n<p>When running <code>DockerOperator</code> with <code>xcom_push=True</code>, <code>xcom_all=True</code> and <code>auto_remove=True</code>, the task raises an error as if the container is deleted before reading its <code>STDOUT</code>. </p>\n\n<h1>Example</h1>\n\n<p>Consider the following DAG as an example:</p>\n\n<pre><code>from datetime import datetime, timedelta\n\nfrom airflow import DAG\nfrom airflow.operators.docker_operator import DockerOperator\nfrom airflow.operators.python_operator import PythonOperator\n\n\n# Default (but overridable) arguments for Operators instantiations\ndefault_args = {\n    'owner': 'Satan',\n    'depends_on_past': False,\n    'start_date': datetime(2019, 11, 28),\n    'retry_delay': timedelta(seconds=2),\n}\n\n\n# DAG definition\n\n\ndef createDockerOperatorTask(xcom_all, auto_remove, id_suffix):\n    return DockerOperator(\n        # Default args\n        task_id=\"docker_operator\" + id_suffix,\n        image='centos:latest',\n        container_name=\"container\" + id_suffix,\n        api_version='auto',\n        command=\"echo 'FALSE';\",\n        docker_url=\"unix://var/run/docker.sock\",\n        network_mode=\"bridge\",\n        xcom_push=True,\n        xcom_all=xcom_all,\n        auto_remove=auto_remove,\n    )\n\n\n# Use dag as python context so all tasks are \"automagically\" linked (in no specific order) to it\nwith DAG('docker_operator_xcom', default_args=default_args, schedule_interval=timedelta(days=1)) as dag:\n    t1 = createDockerOperatorTask(xcom_all=True, auto_remove=True, id_suffix=\"_1\")\n\n    t2 = createDockerOperatorTask(xcom_all=True, auto_remove=False, id_suffix=\"_2\")\n\n    t3 = createDockerOperatorTask(xcom_all=False, auto_remove=True, id_suffix=\"_3\")\n\n\n    # Set tasks precedence\n    dag &gt;&gt; t1\n    dag &gt;&gt; t2\n    dag &gt;&gt; t3\n</code></pre>\n\n<p>If we run it, the first task fails and the other 2 succeed. Nevertheless, the only one that runs \"correctly\" is <code>docker_container_3</code> because it sets the <code>xcom_value</code> correctly while <code>docker_container_2</code> doesn't. This gives me the feeling that it \"tries\" to read the <code>STDOUT</code> and when it can't, it doesn't fail (as it should, as <code>docker_container_1</code>).</p>\n\n<h2>Run status per task</h2>\n\n<p><a href=\"https://i.stack.imgur.com/gXIDH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXIDH.png\" alt=\"dag run status\"></a></p>\n\n<h2>Log of task <code>dock_operator_1</code> with <code>xcom_push=True</code>, <code>xcom_all=True</code> and <code>auto_remove=True</code></h2>\n\n<pre><code>*** Log file does not exist: /usr/local/airflow/logs/docker_operator_xcom/docker_operator_1/2019-12-04T20:24:21.180209+00:00/1.log\n*** Fetching from: http://5df603088df3:8793/log/docker_operator_xcom/docker_operator_1/2019-12-04T20:24:21.180209+00:00/1.log\n\n[2019-12-04 20:24:24,959] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_1 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:24,984] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_1 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:24,984] {{taskinstance.py:841}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:24,984] {{taskinstance.py:842}} INFO - Starting attempt 1 of 1\n[2019-12-04 20:24:24,985] {{taskinstance.py:843}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:24,998] {{taskinstance.py:862}} INFO - Executing &lt;Task(DockerOperator): docker_operator_1&gt; on 2019-12-04T20:24:21.180209+00:00\n[2019-12-04 20:24:24,998] {{base_task_runner.py:133}} INFO - Running: ['airflow', 'run', 'docker_operator_xcom', 'docker_operator_1', '2019-12-04T20:24:21.180209+00:00', '--job_id', '72', '--pool', 'default_pool', '--raw', '-sd', 'DAGS_FOLDER/qm_operators/exp_5_prueba.py', '--cfg_path', '/tmp/tmp4_eb_wcg']\n[2019-12-04 20:24:25,987] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 [2019-12-04 20:24:25,986] {{settings.py:252}} INFO - settings.configure_orm(): Using pool settings. pool_size=5, max_overflow=10, pool_recycle=1800, pid=1037\n[2019-12-04 20:24:26,006] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 /usr/local/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n[2019-12-04 20:24:26,006] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   \"\"\")\n[2019-12-04 20:24:26,838] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 [2019-12-04 20:24:26,838] {{__init__.py:51}} INFO - Using executor CeleryExecutor\n[2019-12-04 20:24:26,841] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 [2019-12-04 20:24:26,838] {{dagbag.py:92}} INFO - Filling up the DagBag from /usr/local/airflow/dags/qm_operators/exp_5_prueba.py\n[2019-12-04 20:24:26,982] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 [2019-12-04 20:24:26,982] {{cli.py:545}} INFO - Running &lt;TaskInstance: docker_operator_xcom.docker_operator_1 2019-12-04T20:24:21.180209+00:00 [running]&gt; on host 5df603088df3\n[2019-12-04 20:24:27,001] {{docker_operator.py:201}} INFO - Starting docker container from image centos:latest\n[2019-12-04 20:24:27,519] {{logging_mixin.py:112}} INFO - Attachs:  []\n[2019-12-04 20:24:27,575] {{taskinstance.py:1058}} ERROR - 404 Client Error: Not Found (\"No such container: 635f096a834e1fa20f4252287161f7a4765eed0f2aec706c1e5859e6c50dbdbe\")\nTraceback (most recent call last):\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 261, in _raise_for_status\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.7/site-packages/requests/models.py\", line 940, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 404 Client Error: Not Found for url: http+docker://localhost/v1.39/containers/635f096a834e1fa20f4252287161f7a4765eed0f2aec706c1e5859e6c50dbdbe/json\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/airflow/models/taskinstance.py\", line 930, in _run_raw_task\n    result = task_copy.execute(context=context)\n  File \"/usr/local/lib/python3.7/site-packages/airflow/operators/docker_operator.py\", line 264, in execute\n    if self.xcom_all else str(line)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n    return f(self, resource_id, *args, **kwargs)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/container.py\", line 855, in logs\n    output = self._get_result(container, stream, res)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 451, in _get_result\n    return self._get_result_tty(stream, res, self._check_is_tty(container))\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n    return f(self, resource_id, *args, **kwargs)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 447, in _check_is_tty\n    cont = self.inspect_container(container)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n    return f(self, resource_id, *args, **kwargs)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/container.py\", line 758, in inspect_container\n    self._get(self._url(\"/containers/{0}/json\", container)), True\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 267, in _result\n    self._raise_for_status(response)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 263, in _raise_for_status\n    raise create_api_error_from_http_exception(e)\n  File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation)\ndocker.errors.NotFound: 404 Client Error: Not Found (\"No such container: 635f096a834e1fa20f4252287161f7a4765eed0f2aec706c1e5859e6c50dbdbe\")\n[2019-12-04 20:24:27,583] {{taskinstance.py:1089}} INFO - Marking task as FAILED.\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 Traceback (most recent call last):\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 261, in _raise_for_status\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     response.raise_for_status()\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/requests/models.py\", line 940, in raise_for_status\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     raise HTTPError(http_error_msg, response=self)\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 requests.exceptions.HTTPError: 404 Client Error: Not Found for url: http+docker://localhost/v1.39/containers/635f096a834e1fa20f4252287161f7a4765eed0f2aec706c1e5859e6c50dbdbe/json\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 \n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 During handling of the above exception, another exception occurred:\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 \n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 Traceback (most recent call last):\n[2019-12-04 20:24:27,639] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/bin/airflow\", line 37, in &lt;module&gt;\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     args.func(args)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/utils/cli.py\", line 74, in wrapper\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return f(*args, **kwargs)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/bin/cli.py\", line 551, in run\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     _run(args, dag, ti)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/bin/cli.py\", line 469, in _run\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     pool=args.pool,\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/utils/db.py\", line 74, in wrapper\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return func(*args, **kwargs)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/models/taskinstance.py\", line 930, in _run_raw_task\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     result = task_copy.execute(context=context)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/lib/python3.7/site-packages/airflow/operators/docker_operator.py\", line 264, in execute\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     if self.xcom_all else str(line)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return f(self, resource_id, *args, **kwargs)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/container.py\", line 855, in logs\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     output = self._get_result(container, stream, res)\n[2019-12-04 20:24:27,640] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 451, in _get_result\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return self._get_result_tty(stream, res, self._check_is_tty(container))\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return f(self, resource_id, *args, **kwargs)\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 447, in _check_is_tty\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     cont = self.inspect_container(container)\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     return f(self, resource_id, *args, **kwargs)\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/container.py\", line 758, in inspect_container\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     self._get(self._url(\"/containers/{0}/json\", container)), True\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 267, in _result\n[2019-12-04 20:24:27,641] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     self._raise_for_status(response)\n[2019-12-04 20:24:27,649] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/api/client.py\", line 263, in _raise_for_status\n[2019-12-04 20:24:27,649] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     raise create_api_error_from_http_exception(e)\n[2019-12-04 20:24:27,649] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1   File \"/usr/local/airflow/.local/lib/python3.7/site-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\n[2019-12-04 20:24:27,649] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1     raise cls(e, response=response, explanation=explanation)\n[2019-12-04 20:24:27,649] {{base_task_runner.py:115}} INFO - Job 72: Subtask docker_operator_1 docker.errors.NotFound: 404 Client Error: Not Found (\"No such container: 635f096a834e1fa20f4252287161f7a4765eed0f2aec706c1e5859e6c50dbdbe\")\n[2019-12-04 20:24:29,953] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:29,952] {{local_task_job.py:124}} WARNING - Time since last heartbeat(0.01 s) &lt; heartrate(5.0 s), sleeping for 4.989579 s\n[2019-12-04 20:24:34,948] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:34,947] {{local_task_job.py:103}} INFO - Task exited with return code 1\n</code></pre>\n\n<h2>Log of task <code>docker_operator_2</code> with <code>xcom_push=True</code>, <code>xcom_all=True</code> and <code>auto_remove=False</code></h2>\n\n<pre><code>*** Log file does not exist: /usr/local/airflow/logs/docker_operator_xcom/docker_operator_2/2019-12-04T20:24:21.180209+00:00/1.log\n*** Fetching from: http://5df603088df3:8793/log/docker_operator_xcom/docker_operator_2/2019-12-04T20:24:21.180209+00:00/1.log\n\n[2019-12-04 20:24:24,794] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_2 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:24,829] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_2 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:24,829] {{taskinstance.py:841}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:24,829] {{taskinstance.py:842}} INFO - Starting attempt 1 of 1\n[2019-12-04 20:24:24,829] {{taskinstance.py:843}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:24,842] {{taskinstance.py:862}} INFO - Executing &lt;Task(DockerOperator): docker_operator_2&gt; on 2019-12-04T20:24:21.180209+00:00\n[2019-12-04 20:24:24,843] {{base_task_runner.py:133}} INFO - Running: ['airflow', 'run', 'docker_operator_xcom', 'docker_operator_2', '2019-12-04T20:24:21.180209+00:00', '--job_id', '71', '--pool', 'default_pool', '--raw', '-sd', 'DAGS_FOLDER/qm_operators/exp_5_prueba.py', '--cfg_path', '/tmp/tmpeq9uc4kw']\n[2019-12-04 20:24:26,174] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2 [2019-12-04 20:24:26,173] {{settings.py:252}} INFO - settings.configure_orm(): Using pool settings. pool_size=5, max_overflow=10, pool_recycle=1800, pid=1035\n[2019-12-04 20:24:26,226] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2 /usr/local/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n[2019-12-04 20:24:26,226] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2   \"\"\")\n[2019-12-04 20:24:27,685] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2 [2019-12-04 20:24:27,678] {{__init__.py:51}} INFO - Using executor CeleryExecutor\n[2019-12-04 20:24:27,685] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2 [2019-12-04 20:24:27,678] {{dagbag.py:92}} INFO - Filling up the DagBag from /usr/local/airflow/dags/qm_operators/exp_5_prueba.py\n[2019-12-04 20:24:27,973] {{base_task_runner.py:115}} INFO - Job 71: Subtask docker_operator_2 [2019-12-04 20:24:27,971] {{cli.py:545}} INFO - Running &lt;TaskInstance: docker_operator_xcom.docker_operator_2 2019-12-04T20:24:21.180209+00:00 [running]&gt; on host 5df603088df3\n[2019-12-04 20:24:28,017] {{docker_operator.py:201}} INFO - Starting docker container from image centos:latest\n[2019-12-04 20:24:28,643] {{logging_mixin.py:112}} INFO - Attachs:  []\n[2019-12-04 20:24:29,783] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:29,782] {{local_task_job.py:124}} WARNING - Time since last heartbeat(0.01 s) &lt; heartrate(5.0 s), sleeping for 4.989846 s\n[2019-12-04 20:24:34,780] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:34,779] {{local_task_job.py:103}} INFO - Task exited with return code 0\n</code></pre>\n\n<h2>Log of task <code>docker_operator_3</code> with <code>xcom_push=True</code>, <code>xcom_all=False</code> and <code>auto_remove=True</code></h2>\n\n<pre><code>*** Log file does not exist: /usr/local/airflow/logs/docker_operator_xcom/docker_operator_3/2019-12-04T20:24:21.180209+00:00/1.log\n*** Fetching from: http://5df603088df3:8793/log/docker_operator_xcom/docker_operator_3/2019-12-04T20:24:21.180209+00:00/1.log\n\n[2019-12-04 20:24:24,992] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_3 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:25,031] {{taskinstance.py:630}} INFO - Dependencies all met for &lt;TaskInstance: docker_operator_xcom.docker_operator_3 2019-12-04T20:24:21.180209+00:00 [queued]&gt;\n[2019-12-04 20:24:25,032] {{taskinstance.py:841}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:25,032] {{taskinstance.py:842}} INFO - Starting attempt 1 of 1\n[2019-12-04 20:24:25,032] {{taskinstance.py:843}} INFO - \n--------------------------------------------------------------------------------\n[2019-12-04 20:24:25,054] {{taskinstance.py:862}} INFO - Executing &lt;Task(DockerOperator): docker_operator_3&gt; on 2019-12-04T20:24:21.180209+00:00\n[2019-12-04 20:24:25,055] {{base_task_runner.py:133}} INFO - Running: ['airflow', 'run', 'docker_operator_xcom', 'docker_operator_3', '2019-12-04T20:24:21.180209+00:00', '--job_id', '73', '--pool', 'default_pool', '--raw', '-sd', 'DAGS_FOLDER/qm_operators/exp_5_prueba.py', '--cfg_path', '/tmp/tmp94dzo8w7']\n[2019-12-04 20:24:26,219] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3 [2019-12-04 20:24:26,219] {{settings.py:252}} INFO - settings.configure_orm(): Using pool settings. pool_size=5, max_overflow=10, pool_recycle=1800, pid=1039\n[2019-12-04 20:24:26,294] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3 /usr/local/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n[2019-12-04 20:24:26,294] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3   \"\"\")\n[2019-12-04 20:24:27,549] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3 [2019-12-04 20:24:27,548] {{__init__.py:51}} INFO - Using executor CeleryExecutor\n[2019-12-04 20:24:27,549] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3 [2019-12-04 20:24:27,549] {{dagbag.py:92}} INFO - Filling up the DagBag from /usr/local/airflow/dags/qm_operators/exp_5_prueba.py\n[2019-12-04 20:24:27,722] {{base_task_runner.py:115}} INFO - Job 73: Subtask docker_operator_3 [2019-12-04 20:24:27,721] {{cli.py:545}} INFO - Running &lt;TaskInstance: docker_operator_xcom.docker_operator_3 2019-12-04T20:24:21.180209+00:00 [running]&gt; on host 5df603088df3\n[2019-12-04 20:24:27,754] {{docker_operator.py:201}} INFO - Starting docker container from image centos:latest\n[2019-12-04 20:24:28,329] {{logging_mixin.py:112}} INFO - Attachs:  []\n[2019-12-04 20:24:29,979] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:29,979] {{local_task_job.py:124}} WARNING - Time since last heartbeat(0.01 s) &lt; heartrate(5.0 s), sleeping for 4.989138 s\n[2019-12-04 20:24:34,974] {{logging_mixin.py:112}} INFO - [2019-12-04 20:24:34,974] {{local_task_job.py:103}} INFO - Task exited with return code 0\n</code></pre>\n\n<h2>XComs of <code>docker_operator_2</code></h2>\n\n<p><a href=\"https://i.stack.imgur.com/lrMOk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lrMOk.png\" alt=\"xcoms docker_operator 3\"></a></p>\n\n<h2>XComs of <code>docker_operator_3</code></h2>\n\n<p><a href=\"https://i.stack.imgur.com/Yz53l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yz53l.png\" alt=\"xcoms docker_operator 3\"></a></p>\n\n<h1>Workaround</h1>\n\n<p>Even though setting <code>auto_remove=False</code>, as in <code>docker_container_2</code>, makes the task succeed and sets the XCom correctly, the container is never removed and future runs of the DAG will fail as the container of the old run will conflict with the container of the new runs.</p>\n\n<p>A workaround for this is to add a task downstream that deletes the container, but it's not \"clean\".</p>\n\n<p>Is there a way to run DockerOperator with <code>xcom_push=True</code> and <code>auto_remove=True</code> at the same time?</p>\n"}, {"tags": ["python", "opencv", "matplotlib"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1575493201, "post_id": 59184546, "comment_id": 104589593, "body": "You should add <code>cv2.waitKey(1)</code> after imshow."}, {"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 3, "creation_date": 1575496133, "post_id": 59184546, "comment_id": 104590557, "body": "Currently your program is displaying the image correctly but its immediately being closed. Add <code>cv2.waitKey()</code> where the parameter is the duration to keep the window open in ms. Add <code>0</code> for the parameter to keep the window up indefinitely until there is a key press"}], "owner": {"reputation": 83, "user_id": 10460447, "user_type": "registered", "profile_image": "https://graph.facebook.com/2427729507267196/picture?type=large", "display_name": "Mounir Ouki", "link": "https://stackoverflow.com/users/10460447/mounir-ouki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575492809, "creation_date": 1575492809, "question_id": 59184546, "link": "https://stackoverflow.com/questions/59184546/plot-and-display-images-as-animation-as-a-video-in-the-same-window", "title": "plot and display images as animation (as a video, in the same window)", "body": "<p>I want to display the sequence as a video, it doesn't work</p>\n\n<pre><code>for k in range(2,totalFrames+1):\n    image_path='img'+str(k)+'.jpg'\n    img = cv2.imread(image_path,0)\n    cv2.namedWindow('win')\n    cv2.imshow('win',img)\n</code></pre>\n\n<p>I can accept a solution with matplotlib too</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1101, "user_id": 6460856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348ceb4cfb329409b99e1805cef9e382?s=128&d=identicon&r=PG&f=1", "display_name": "Swetank Poddar", "link": "https://stackoverflow.com/users/6460856/swetank-poddar"}, "edited": false, "score": 0, "creation_date": 1575493269, "post_id": 59184510, "comment_id": 104589613, "body": "It looks like a syntax error.  it should be &quot;except ValueError as e&quot;. try replacing the comma with a &quot;as&quot;"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1575493289, "post_id": 59184510, "comment_id": 104589620, "body": "<code>except ValueError, e</code> is valid Python 2 syntax, but not for Python 3.  Is there a Python 3 specific version of the package you&#39;re trying to install?"}, {"owner": {"reputation": 1, "user_id": 12482236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDNAP40YyExp3Jzk2ERBQwE3HVfR8do8QadYg8cGg=k-s128", "display_name": "Felipe Vera Loza", "link": "https://stackoverflow.com/users/12482236/felipe-vera-loza"}, "edited": false, "score": 0, "creation_date": 1575493880, "post_id": 59184510, "comment_id": 104589829, "body": "I use python 3.7 and I am trying to do this: github.com/inkjet/flask-aws-tutorial but I get stuck on the requirements install par"}, {"owner": {"reputation": 101, "user_id": 7919773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceeafd78a3b4da7ffb6b3f7f9607b5a6?s=128&d=identicon&r=PG&f=1", "display_name": "iampotential", "link": "https://stackoverflow.com/users/7919773/iampotential"}, "edited": false, "score": 0, "creation_date": 1575495950, "post_id": 59184510, "comment_id": 104590495, "body": "for starters Flask-SQLAlchemy==2.0 supports up to Python 3.4. Most likely you are trying to install many things that are not compatible with your current version of python. The requirements.txt file is from May of 2015. You likely would want to start in a different place or you may want to use a previous version of python but you&#39;d want to check what requirements are compatible with first."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 7919773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceeafd78a3b4da7ffb6b3f7f9607b5a6?s=128&d=identicon&r=PG&f=1", "display_name": "iampotential", "link": "https://stackoverflow.com/users/7919773/iampotential"}, "edited": false, "score": 0, "creation_date": 1575493699, "post_id": 59184647, "comment_id": 104589757, "body": "what version of python are you using and what are you trying to install...? need more details"}, {"owner": {"reputation": 1, "user_id": 12482236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDNAP40YyExp3Jzk2ERBQwE3HVfR8do8QadYg8cGg=k-s128", "display_name": "Felipe Vera Loza", "link": "https://stackoverflow.com/users/12482236/felipe-vera-loza"}, "edited": false, "score": 0, "creation_date": 1575493837, "post_id": 59184647, "comment_id": 104589810, "body": "I use python 3.7 and I am trying to do this: <a href=\"https://github.com/inkjet/flask-aws-tutorial\" rel=\"nofollow noreferrer\">github.com/inkjet/flask-aws-tutorial</a> but I get stuck on the requirements install part."}, {"owner": {"reputation": 107, "user_id": 1022275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0990f5614bed86f671dce726b92ca311?s=128&d=identicon&r=PG", "display_name": "Christopher", "link": "https://stackoverflow.com/users/1022275/christopher"}, "edited": false, "score": 0, "creation_date": 1575494038, "post_id": 59184647, "comment_id": 104589868, "body": "What is your OS (windows, Mac...) ?"}, {"owner": {"reputation": 1, "user_id": 12482236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDNAP40YyExp3Jzk2ERBQwE3HVfR8do8QadYg8cGg=k-s128", "display_name": "Felipe Vera Loza", "link": "https://stackoverflow.com/users/12482236/felipe-vera-loza"}, "edited": false, "score": 0, "creation_date": 1575494071, "post_id": 59184647, "comment_id": 104589882, "body": "Mac running Catalina"}, {"owner": {"reputation": 107, "user_id": 1022275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0990f5614bed86f671dce726b92ca311?s=128&d=identicon&r=PG", "display_name": "Christopher", "link": "https://stackoverflow.com/users/1022275/christopher"}, "edited": false, "score": 0, "creation_date": 1575494257, "post_id": 59184647, "comment_id": 104589935, "body": "Can you try ``` $ pip3 install -r requirements.txt```"}], "tags": [], "owner": {"reputation": 107, "user_id": 1022275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0990f5614bed86f671dce726b92ca311?s=128&d=identicon&r=PG", "display_name": "Christopher", "link": "https://stackoverflow.com/users/1022275/christopher"}, "is_accepted": false, "score": 0, "last_activity_date": 1575493331, "creation_date": 1575493331, "answer_id": 59184647, "question_id": 59184510, "link": "https://stackoverflow.com/questions/59184510/im-trying-to-install-r-requirements-txt-from-a-flask-app-from-github/59184647#59184647", "title": "I&#39;m trying to install -r requirements.txt from a flask app from github", "body": "<p>Did you try?</p>\n\n<pre><code>$ pip install -r requirements.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7919773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceeafd78a3b4da7ffb6b3f7f9607b5a6?s=128&d=identicon&r=PG&f=1", "display_name": "iampotential", "link": "https://stackoverflow.com/users/7919773/iampotential"}, "is_accepted": false, "score": 0, "last_activity_date": 1575494313, "creation_date": 1575494313, "answer_id": 59184807, "question_id": 59184510, "link": "https://stackoverflow.com/questions/59184510/im-trying-to-install-r-requirements-txt-from-a-flask-app-from-github/59184807#59184807", "title": "I&#39;m trying to install -r requirements.txt from a flask app from github", "body": "<p>I would specify the version of Pip you are using. Mac is defaulted to python 2.7... in your case i would run the command as \"pip3\" so in your case... </p>\n\n<pre><code>pip3 install -r requirements.txt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12482236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDNAP40YyExp3Jzk2ERBQwE3HVfR8do8QadYg8cGg=k-s128", "display_name": "Felipe Vera Loza", "link": "https://stackoverflow.com/users/12482236/felipe-vera-loza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1575497075, "creation_date": 1575492614, "last_edit_date": 1575497075, "question_id": 59184510, "link": "https://stackoverflow.com/questions/59184510/im-trying-to-install-r-requirements-txt-from-a-flask-app-from-github", "title": "I&#39;m trying to install -r requirements.txt from a flask app from github", "body": "<p>I keep getting the following error:</p>\n\n<pre><code>ERROR: Command errored out with exit status 1:\n command: /Users/felipeveraloza/Desktop/flask-aws-tutorial/flask-aws/bin/python -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/setup.py'\"'\"'; __file__='\"'\"'/private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base /private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/pip-egg-info\n     cwd: /private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/\nComplete output (10 lines):\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/setuptools/__init__.py\", line 2, in &lt;module&gt;\n    from setuptools.extension import Extension, Library\n  File \"/private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/setuptools/extension.py\", line 2, in &lt;module&gt;\n    from setuptools.dist import _get_unpatched\n  File \"/private/var/folders/_d/tpx546q90svbs7y84bgplfpm0000gn/T/pip-install-qql4powj/distribute/setuptools/dist.py\", line 103\n    except ValueError, e:\n                     ^\nSyntaxError: invalid syntax\n----------------------------------------\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dataframe", "teradata", "teradata-sql-assistant"], "comments": [{"owner": {"reputation": 1203, "user_id": 11552426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f2774ccb05225f1a9b5ebac9dc971d?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11552426/fred"}, "edited": false, "score": 2, "creation_date": 1575496206, "post_id": 59184468, "comment_id": 104590581, "body": "Not Teradata-specific, more of an implementation difference between most database interfaces and <i>numpy</i>. For example, see <a href=\"https://stackoverflow.com/questions/14162723/replacing-pandas-or-numpy-nan-with-a-none-to-use-with-mysqldb\">Replacing pandas or numpy NaN with None for MySQL</a>"}, {"owner": {"reputation": 840, "user_id": 2865368, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wtH9t.jpg?s=128&g=1", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2865368/jonathan-lam"}, "reply_to_user": {"reputation": 1203, "user_id": 11552426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f2774ccb05225f1a9b5ebac9dc971d?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11552426/fred"}, "edited": false, "score": 0, "creation_date": 1575498164, "post_id": 59184468, "comment_id": 104591148, "body": "You helped. It works now. Thank you @Fred"}], "answers": [{"tags": [], "owner": {"reputation": 840, "user_id": 2865368, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wtH9t.jpg?s=128&g=1", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2865368/jonathan-lam"}, "is_accepted": true, "score": 2, "last_activity_date": 1575561797, "creation_date": 1575561797, "answer_id": 59199021, "question_id": 59184468, "link": "https://stackoverflow.com/questions/59184468/how-to-insert-null-value-in-database-using-teradatasql-on-a-smallint-numeric-ov/59199021#59199021", "title": "How to insert Null Value in database using teradatasql on a SMALLINT, Numeric overflow occurred during computation", "body": "<p>As Fred suggested, use the function <code>pandas.notnull</code> to replace <code>NaN</code> to <code>None</code></p>\n\n<p>Initially when you insert a <code>None</code> object to <strong>pandas</strong>, it replaces it with <code>NaN</code>. If you want to insert into a database you need to convert those <code>NaN</code> to <code>None</code>. This is because the database will think you are inserting a string, especially on integer data type fields. Below is the code to convert <code>NaN</code> to any specific value. In my scenario it should be <code>None</code>.</p>\n\n<pre><code>cNoneDtframe = parsedDtframe.where((pandas.notnull(parsedDtframe)), None)\n</code></pre>\n"}], "owner": {"reputation": 840, "user_id": 2865368, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wtH9t.jpg?s=128&g=1", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2865368/jonathan-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 59199021, "answer_count": 1, "score": 2, "last_activity_date": 1575561797, "creation_date": 1575492415, "last_edit_date": 1575493623, "question_id": 59184468, "link": "https://stackoverflow.com/questions/59184468/how-to-insert-null-value-in-database-using-teradatasql-on-a-smallint-numeric-ov", "title": "How to insert Null Value in database using teradatasql on a SMALLINT, Numeric overflow occurred during computation", "body": "<p>So I use the <code>None</code> object to define null values in pandas dataframe. \nThis is an example of the row in the dataframe with the <code>NaN</code> and <code>None</code></p>\n\n<pre><code>27     XXX         None        41.0          NaN           1.0        50.0          NaN           1.0        71.0          3.0  0.9826382611          162.0             3.0  0.9952958893        MTD\n</code></pre>\n\n<p>When I insert <code>None</code> in dataframe it becomes <code>NaN</code> which then when inserted into a small integer field in <strong>Teradata</strong>, I get an insert error. How can I tell teradata to insert those <code>NaN</code> to null values in teradata using python?</p>\n\n<blockquote>\n  <p>Numeric overflow occurred during computation.</p>\n</blockquote>\n\n<p>In the below example, parameter 8 is <code>NaN</code></p>\n\n<pre><code>Insert Exception in function insertDtframe, activated rollback: [Version 16.20.0.54] [Session 2258656] [Teradata SQL Driver] [Error 502] Batch row 3 bound parameter 8 type VARCHAR (448) differs from batch row 1 type FLOAT (480)\n at gosqldriver/teradatasql.(*teradataConnection).makeDriverErrorCode TeradataConnection.go:1074\n at gosqldriver/teradatasql.(*TeradataRows).validateBatchValues TeradataRows.go:947\n at gosqldriver/teradatasql.newTeradataRows TeradataRows.go:361\n at gosqldriver/teradatasql.(*teradataStatement).QueryContext TeradataStatement.go:122\n at gosqldriver/teradatasql.(*teradataConnection).QueryContext TeradataConnection.go:2036\n at database/sql.ctxDriverQuery ctxutil.go:48\n at database/sql.(*DB).queryDC.func1 sql.go:1464\n at database/sql.withLock sql.go:3032\n at database/sql.(*DB).queryDC sql.go:1459\n at database/sql.(*Conn).QueryContext sql.go:1701\n at main.goCreateRows goside.go:599\n at main._cgoexpwrap_e6e101e164fa_goCreateRows _cgo_gotypes.go:331\n at runtime.call64 asm_amd64.s:574\n at runtime.cgocallbackg1 cgocall.go:316\n at runtime.cgocallbackg cgocall.go:194\n at runtime.cgocallback_gofunc asm_amd64.s:826\n at runtime.goexit asm_amd64.s:2361\nCompleted Time: 2019-12-04 15:41:06.967610\n</code></pre>\n"}, {"tags": ["python", "cross-validation", "confusion-matrix", "automl", "tpot"], "comments": [{"owner": {"reputation": 2127, "user_id": 9377366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e8773aad4c9408787bfe8329b663f?s=128&d=identicon&r=PG&f=1", "display_name": "fsl", "link": "https://stackoverflow.com/users/9377366/fsl"}, "edited": false, "score": 2, "creation_date": 1575494656, "post_id": 59184461, "comment_id": 104590066, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/40057049/using-confusion-matrix-as-scoring-metric-in-cross-validation-in-scikit-learn\">using confusion matrix as scoring metric in cross validation in scikit learn</a>"}, {"owner": {"reputation": 6533, "user_id": 2119941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XA1Jr.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/2119941/harvey"}, "edited": false, "score": 0, "creation_date": 1576212841, "post_id": 59184461, "comment_id": 104833744, "body": "You can do it like <a href=\"https://stackoverflow.com/a/59316264/2119941\">this</a>"}], "owner": {"reputation": 340, "user_id": 11788255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70759c60db20f81d61ef565cd29cd6d?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Borges", "link": "https://stackoverflow.com/users/11788255/jane-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575492393, "creation_date": 1575492393, "question_id": 59184461, "link": "https://stackoverflow.com/questions/59184461/how-to-generate-the-confusion-matrix-through-cross-validation-in-python", "title": "how to generate the confusion matrix through cross validation in python?", "body": "<p>I am using the iris flower dataset to do the sorting. I need to make a confusion matrix through cross validation (fold = 10) but I don't know how to do it. I generated the confusion matrix of only one round.</p>\n\n<pre><code>      # I am using TPOT autoML library for python\n\n      import numpy as np\n      import pandas as pd\n\n      from sklearn.model_selection import train_test_split\n      from sklearn.naive_bayes import GaussianNB, MultinomialNB\n      from sklearn.pipeline import make_pipeline, make_union\n      from tpot.builtins import StackingEstimator\n\n      from sklearn.preprocessing import LabelEncoder\n\n      tpot_data = pd.read_csv('iris.csv')\n\n      tpot_data = tpot_data.apply(LabelEncoder().fit_transform)  \n\n      features = tpot_data.drop('species', axis=1).values\n\n      training_features, testing_features, training_target, testing_target = \\\n                           train_test_split(features, tpot_data['species'].values, random_state=10)\n\n      exported_pipeline = make_pipeline(StackingEstimator(estimator=GaussianNB()),\n                                        MultinomialNB(alpha=0.01, fit_prior=False)\n      )\n\n\n       exported_pipeline.fit(training_features, training_target)\n\n       results = exported_pipeline.predict(testing_features)\n\n        from sklearn import metrics\n        print(\"Accuracy:\", metrics.accuracy_score(testing_target, results))\n\n\n       pd.crosstab(testing_target, results, rownames=['Actual Class'], colnames=['Predicted Class'])\n\n\n        from sklearn.model_selection import cross_val_score\n\n        array_cross_val_score = cross_val_score(estimator=exported_pipeline, X=training_features, \n                                    y=training_target, cv=10, scoring='accuracy')\n\n        # I would like the confusion matrix to be based on the average cross-validation\n        np.mean(array_cross_val_score)\n</code></pre>\n"}, {"tags": ["python", "python-3.7"], "comments": [{"owner": {"reputation": 12181, "user_id": 1803777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kY7IS.jpg?s=128&g=1", "display_name": "Ulugbek Umirov", "link": "https://stackoverflow.com/users/1803777/ulugbek-umirov"}, "edited": false, "score": 3, "creation_date": 1575492747, "post_id": 59184459, "comment_id": 104589412, "body": "when you open infile, specify &#39;rb&#39;"}, {"owner": {"reputation": 805, "user_id": 10397775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817d4a66c9313f00aed2bb54c69a8b19?s=128&d=identicon&r=PG&f=1", "display_name": "marke", "link": "https://stackoverflow.com/users/10397775/marke"}, "edited": false, "score": 0, "creation_date": 1575494091, "post_id": 59184459, "comment_id": 104589886, "body": "If you don&#39;t give the &#39;b&#39; (or &#39;rb&#39; or &#39;wb&#39;) parameter to open function it will try to decode the file. You can set the codec (for write/read operations) but if you don&#39;t (and that&#39;s you case) the default codec will be used, and that is utf-8 in your case."}], "owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1575492383, "creation_date": 1575492383, "question_id": 59184459, "link": "https://stackoverflow.com/questions/59184459/python-3-combining-files-gives-unicodedecodeerror-utf-8-codec-cant-decode", "title": "Python 3: Combining files gives &quot;UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0x83 in position 1: invalid start byte&quot;", "body": "<p>I have a binary file that was split in 7 pieces (for a CTF I am doing) and have to reorder them</p>\n\n<pre><code>from itertools import permutations\nlst = [\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\"]\nfor combo in permutations(lst, 7):  # 2 for pairs, 3 for triplets, etc\n    a = ''.join(combo)\n    with open('/home/bitnami/fragmented/output/'+a, 'wb') as outfile:\n        for fname in combo:\n            with open('frag_'+fname) as infile:\n                outfile.write(infile.read())\n</code></pre>\n\n<p>However I get the error:</p>\n\n<blockquote>\n  <p>UnicodeDecodeError: 'utf-8' codec can't decode byte 0x83 in position\n  1: invalid start byte</p>\n</blockquote>\n\n<p>Any advice without comprising the integrity of the files?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "scipy", "zero", "scipy-optimize", "bisect"], "comments": [{"owner": {"reputation": 3541, "user_id": 5625497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f200aaa56fa9cba9baa9170c514fb125?s=128&d=identicon&r=PG&f=1", "display_name": "Mstaino", "link": "https://stackoverflow.com/users/5625497/mstaino"}, "edited": false, "score": 0, "creation_date": 1575641839, "post_id": 59184389, "comment_id": 104645614, "body": "In order to get better answers, in addition to your error, share your code so far"}], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": false, "score": 1, "last_activity_date": 1575496169, "creation_date": 1575496169, "answer_id": 59185131, "question_id": 59184389, "link": "https://stackoverflow.com/questions/59184389/find-zeroes-of-function-with-simpy-optimize-bisect-with-a-complex-function/59185131#59185131", "title": "Find zeroes of function with simpy.optimize.bisect, with a complex function", "body": "<p>The question is not clear, you should share your code and the title should say scipy, not simpy, if I am correct.</p>\n\n<p>Apart from this, I do not get the same plot of the function, can you check if it is correct?</p>\n\n<p>If you want to use the bisection method you should do something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom scipy.optimize import bisect\n\ndef fun(x, D, h, l):\n    return D * np.sin(x) * np.cos(x) + l * np.cos(x) * np.sin(x) * 2 - l * np.cos(x) - h * np.sin(x)\n\nD = 220\nh = 1040\nl = 1420\n\nprint(bisect(lambda x: fun(x, D, h, l), 0, 2*np.pi))\n</code></pre>\n\n<p>Note that the bisection method only finds one zero, and this does not work at all because the two extremes of the function have the same sign. For this particular function, you could run the bisect in the intervals (0, pi) and (pi, 2pi) to find both zeros.</p>\n"}], "owner": {"reputation": 11, "user_id": 12482121, "user_type": "registered", "profile_image": "https://graph.facebook.com/2852650544769287/picture?type=large", "display_name": "Wyvern", "link": "https://stackoverflow.com/users/12482121/wyvern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575496169, "creation_date": 1575492089, "question_id": 59184389, "link": "https://stackoverflow.com/questions/59184389/find-zeroes-of-function-with-simpy-optimize-bisect-with-a-complex-function", "title": "Find zeroes of function with simpy.optimize.bisect, with a complex function", "body": "<p>I'm a student of mechanical engineering, and this is the first year I've met with the Python environment, or the distribution of it Anaconda.\nI was given a task to find the zeroes of this function:</p>\n\n<blockquote>\n  <p><code>\ud835\udc37\u22c5sin(\ud835\udefc)cos(\ud835\udefc)+\ud835\udc59\u22c5cos(\ud835\udefc)sin(\ud835\udefc)2\u2212\ud835\udc59\u22c5cos(\ud835\udefc)\u2212\u210e\u22c5sin(\ud835\udefc)=0</code></p>\n</blockquote>\n\n<p>With the parameters:</p>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<pre><code>D = 220mm,\nh = 1040mm,\nl = 1420mm,where\nn = 81\n</code></pre>\n\n<p>is the number of equally distanced points on the function\nand the function is limited to :</p>\n\n<blockquote>\n  <p>\ud835\udefc\u2208[0,2\ud835\udf0b] where \ud835\udefc is a np.array.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/OB5NT.png\" rel=\"nofollow noreferrer\">plotted function</a>\nThe issue is, when I try to insert the function in <code>bisect(fun, a, b)</code>, the error says </p>\n\n<blockquote>\n  <p>'numpy.ndarray' object is not callable</p>\n</blockquote>\n\n<p>Can someone aid a noob programer ? Thanks.</p>\n"}, {"tags": ["python", "emacs", "formatting", "pep8"], "comments": [{"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575494317, "post_id": 59184373, "comment_id": 104589959, "body": "you&#39;re probably aware, but the py-autopep8.el library interfaces with autopep8. There are plenty of non-python related alternatives, eg. <code>fill-paragraph</code>, which will follow the same max-column (the value of <code>fill-column</code>) constrains"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1575495050, "post_id": 59184373, "comment_id": 104590212, "body": "What&#39;s wrong with one element per line?"}, {"owner": {"reputation": 2729, "user_id": 830841, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/TzZIB.jpg?s=128&g=1", "display_name": "James Shapiro", "link": "https://stackoverflow.com/users/830841/james-shapiro"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1575495121, "post_id": 59184373, "comment_id": 104590243, "body": "@chepner that would explode the line count, I&#39;d prefer something more terse."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1575495181, "post_id": 59184373, "comment_id": 104590263, "body": "What&#39;s wrong with exploding the line count? (Arguably, if the list is <i>that</i> big, reading it from a configuration file at runtime, or importing it from a separate module, is probably preferable.)"}, {"owner": {"reputation": 2729, "user_id": 830841, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/TzZIB.jpg?s=128&g=1", "display_name": "James Shapiro", "link": "https://stackoverflow.com/users/830841/james-shapiro"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1575495313, "post_id": 59184373, "comment_id": 104590306, "body": "@chepner honestly that might be the best approach, especially if you need to add, delete, or edit terms. Other things being equal I have a bias towards minimizing line count as it makes the file easier to scan through at a glance."}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575495544, "post_id": 59184373, "comment_id": 104590372, "body": "I tend to agree, although you can always use code-folding.  It&#39;s also nice to have a function that converts between long (exploded lines) and short form (justified list)"}, {"owner": {"reputation": 2729, "user_id": 830841, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/TzZIB.jpg?s=128&g=1", "display_name": "James Shapiro", "link": "https://stackoverflow.com/users/830841/james-shapiro"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575495713, "post_id": 59184373, "comment_id": 104590420, "body": "@picklerick do you have any recommendations on enabling code-folding and exploding/compressing lists in Emacs?"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575496476, "post_id": 59184373, "comment_id": 104590647, "body": "yea, but with the question closed, I can&#39;t really answer.  I use modified versions of <code>fill-region</code>, <code>fill-paragraph</code> (python.el defined <code>python-fill-paragraph</code> although I don&#39;t think it works well in this case), and a custom fill/unfill list function -- although none of these currently work very well with lists of strings (something I&#39;ve been meaning to hack).  For code-folding I use built-in hideshow.el mostly"}], "owner": {"reputation": 2729, "user_id": 830841, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/TzZIB.jpg?s=128&g=1", "display_name": "James Shapiro", "link": "https://stackoverflow.com/users/830841/james-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575502253, "creation_date": 1575492025, "last_edit_date": 1575494921, "question_id": 59184373, "link": "https://stackoverflow.com/questions/59184373/best-pep8-compliant-way-to-format-a-long-list-of-lengthy-terms-in-python", "title": "Best PEP8 compliant way to format a long list of lengthy terms in Python", "body": "<p>I have a long list of Python terms that looks something like the following:</p>\n\n<pre><code>wwwwwwww_wwwww = [\n    'wwwwwwww wwwwwww', 'w ww w', 'wwww ww wwwwwww',\n    'wwww ww wwwwwww wwwwwwwwwww', 'wwww ww wwwwwww wwwwwww wwwww',\n    'wwww ww wwwwwww wwwwwww wwww ww wwwwwww', 'wwww ww wwwwwwww wwww',\n    'wwww ww wwwwwwww', 'wwww ww www wwww', 'www wwww',\n    'wwww ww wwwwwwww wwwwwww', 'www ww', 'www wwwwwww wwwwwww', 'www www',\n    'www wwwwww wwwww wwwwwwwwww', 'www wwwwww wwww wwwwwwww wwwwwwwwwww',\n    'www wwww wwwwwwwww wwwwwww', 'www wwww wwwwwwwww wwwwwww', 'wwwww',\n    'www wwwwwwwww wwww', 'www wwwwww', 'wwww wwwwwwwwww', 'wwww wwwwwwwwwwww',\n    'wwwwwwww wwww', 'ww wwwww', 'wwwwww wwwww', 'www wwwww wwwwwwwwww',\n    'wwwwww wwww', 'wwwwww wwwwwww wwwwwwww', 'ww wwwwww', 'w w wwwwww',\n    'wwww wwwwww', 'www wwwwwwwwwww wwwwwww', 'wwwwww wwwww', 'wwwwwww wwww',\n    'wwwwwww wwwww', 'wwwwwww wwwww wwwwww wwwwwwwwww',\n    'wwwwwww wwwwww wwwwww wwwwww w wwwww', 'wwwwwww wwwww', 'wwwwww wwwwwwwww',\n    'wwwwwww wwwwwwwwwwwww', 'wwwwww wwwwww wwwwww wwwwwwww',\n    'wwwwww wwwwwww wwwwwwww', 'wwww wwwww', 'ww wwwww', 'wwwww wwwww'\n]\n</code></pre>\n\n<p>(Note: the top term is not indented at all.)</p>\n\n<p>I believe the above is PEP8 compliant. Each line is under 80 characters horizontally. But it looks a bit ugly due to the jaggedness. Is there a more aesthetic way to format this?</p>\n\n<p>And are there any tools available in Emacs for automatically reformatting it?</p>\n"}, {"tags": ["python", "google-app-engine", "app-engine-ndb"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 1209986, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6504005259d2af22c6802e4ced59d895?s=128&d=identicon&r=PG", "display_name": "Yanone", "link": "https://stackoverflow.com/users/1209986/yanone"}, "edited": false, "score": 0, "creation_date": 1575495306, "post_id": 59184493, "comment_id": 104590303, "body": "This is embarrassing. You&#39;re right. I was saving a reference to another entity into the User object, but that other entity wasn&#39;t saved yet and therefore didn&#39;t have a key yet. (Added that situation in the code) I was mislead, because the traceback isn&#39;t very descriptive."}], "tags": [], "owner": {"reputation": 4450, "user_id": 4458510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GZUMI.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4458510/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1575492527, "creation_date": 1575492527, "answer_id": 59184493, "question_id": 59184365, "link": "https://stackoverflow.com/questions/59184365/google-app-engine-ndb-badvalueerror-expected-key-got-none-for-saving-perfec/59184493#59184493", "title": "Google App Engine/NDB: &quot;BadValueError: Expected Key, got None&quot; for saving perfectly fine entity", "body": "<p>I dont think this entity's primary key is the problem. It's probably another Key field on the object.</p>\n\n<p>Whats the schema for the rest of you User object?</p>\n"}], "owner": {"reputation": 103, "user_id": 1209986, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6504005259d2af22c6802e4ced59d895?s=128&d=identicon&r=PG", "display_name": "Yanone", "link": "https://stackoverflow.com/users/1209986/yanone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 59184493, "answer_count": 1, "score": 0, "last_activity_date": 1575497108, "creation_date": 1575492001, "last_edit_date": 1575497108, "question_id": 59184365, "link": "https://stackoverflow.com/questions/59184365/google-app-engine-ndb-badvalueerror-expected-key-got-none-for-saving-perfec", "title": "Google App Engine/NDB: &quot;BadValueError: Expected Key, got None&quot; for saving perfectly fine entity", "body": "<p>I'm currently porting a web app to Google App Engine, Python 3, Standard Environment. (So I'm new to GAE and NDB).</p>\n\n<p>I have a bug here that I don't understand. I obtain an entity like so, the adjust properties, then save.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>sourceUsers = User.query().filter(User.email == request.form.get('sourceUserEmail')).fetch(1)\nif sourceUsers:\n    sourceUser = sourceUsers[0]\n    # manipulation:\n    sourceUser.sentInvitationSubscriptionKeys.append(subscription.key)\n    # verify key:\n    assert sourceUser.key != None\n    sourceUser.put()\n</code></pre>\n\n<p>But the saving triggers the following traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 2463, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 2449, in wsgi_app\n    response = self.handle_exception(e)\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 1866, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/usr/local/lib/python3.7/site-packages/flask/_compat.py\", line 39, in reraise\n    raise value\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 2446, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 1951, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 1820, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/usr/local/lib/python3.7/site-packages/flask/_compat.py\", line 39, in reraise\n    raise value\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 1949, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/usr/local/lib/python3.7/site-packages/flask/app.py\", line 1935, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/Users/yanone/Code/Google App Engine/typeworldappengine/main.py\", line 500, in api\n    sourceUser.put()\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/_options.py\", line 89, in wrapper\n    return wrapped(*pass_args, **kwargs)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/utils.py\", line 78, in wrapper\n    return wrapped(*args, **new_kwargs)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/utils.py\", line 109, in positional_wrapper\n    return wrapped(*args, **kwds)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 4914, in _put\n    return self._put_async(_options=kwargs[\"_options\"]).result()\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/tasklets.py\", line 190, in result\n    self.check_success()\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/tasklets.py\", line 137, in check_success\n    raise self._exception\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/tasklets.py\", line 312, in _advance_tasklet\n    yielded = self.generator.send(send_value)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 4974, in put\n    ds_entity = _entity_to_ds_entity(self)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 722, in _entity_to_ds_entity\n    names = prop._to_datastore(entity, data)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 2063, in _to_datastore\n    value = self._get_base_value_unwrapped_as_list(entity)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1551, in _get_base_value_unwrapped_as_list\n    wrapped = self._get_base_value(entity)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1537, in _get_base_value\n    return self._apply_to_values(entity, self._opt_call_to_base_type)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1834, in _apply_to_values\n    value[:] = map(function, value)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1612, in _opt_call_to_base_type\n    value = _BaseValue(self._call_to_base_type(value))\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1671, in _call_to_base_type\n    return call(value)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 1801, in call\n    new_value = method(self, value)\n  File \"/usr/local/lib/python3.7/site-packages/google/cloud/ndb/model.py\", line 3344, in _validate\n    \"Expected Key, got {!r}\".format(value)\ngoogle.cloud.ndb.exceptions.BadValueError: Expected Key, got None\n</code></pre>\n\n<p>In the debugging, I even made sure that the entity has a key (<code>assert sourceUser.key != None</code>). So I really don't get it. What am I doing wrong?</p>\n\n<p>Mind you, all other entities save fine. Just this one doesn't.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3753, "user_id": 1718575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f36e2abcb1e57219a4b58d32c5bc6d?s=128&d=identicon&r=PG", "display_name": "NicholasM", "link": "https://stackoverflow.com/users/1718575/nicholasm"}, "edited": false, "score": 1, "creation_date": 1575492218, "post_id": 59184362, "comment_id": 104589189, "body": "The names for these approaches are &quot;dummy&quot; or &quot;indicator&quot; variables in the first case, and a categorical variable in the second.  See <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.get_dummies.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.get_dummies()</code></a>, for example, which performs the conversion in the opposite direction (categorical to dummies)."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1575493153, "post_id": 59184362, "comment_id": 104589575, "body": "only need to add df.eq(\u2018yes&#39;)"}], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 5, "last_activity_date": 1575492131, "creation_date": 1575492131, "answer_id": 59184401, "question_id": 59184362, "link": "https://stackoverflow.com/questions/59184362/converting-multiple-dummy-variables-into-one-column/59184401#59184401", "title": "Converting Multiple Dummy Variables into one Column", "body": "<p>If each row has exactly one 'yes', you can do</p>\n\n<pre><code>df.eq('Yes') @ df.columns\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Thing 1    Green\nThing 2     Blue\nThing 3     Blue\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": true, "score": 5, "last_activity_date": 1575492136, "creation_date": 1575492136, "answer_id": 59184403, "question_id": 59184362, "link": "https://stackoverflow.com/questions/59184362/converting-multiple-dummy-variables-into-one-column/59184403#59184403", "title": "Converting Multiple Dummy Variables into one Column", "body": "<p>Just use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.idxmax.html\" rel=\"noreferrer\">idxmax</a>:</p>\n\n<pre><code>df.eq('Yes').idxmax(axis=1)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Thing 1    Green\nThing 2     Blue\nThing 3     Blue\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 1, "last_activity_date": 1575493368, "last_edit_date": 1575493368, "creation_date": 1575492234, "answer_id": 59184424, "question_id": 59184362, "link": "https://stackoverflow.com/questions/59184362/converting-multiple-dummy-variables-into-one-column/59184424#59184424", "title": "Converting Multiple Dummy Variables into one Column", "body": "<p>Use:</p>\n\n<pre><code>df.where(df.eq('Yes')).stack().reset_index(level=1)['level_1']\n\nThing 1    Green\nThing 2     Blue\nThing 3     Blue\nName: level_1, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 4989, "user_id": 3633487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/pVoco.jpg?s=128&g=1", "display_name": "The Nightman", "link": "https://stackoverflow.com/users/3633487/the-nightman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "closed_date": 1575493127, "accepted_answer_id": 59184403, "answer_count": 3, "score": 3, "last_activity_date": 1575536815, "creation_date": 1575491985, "last_edit_date": 1575536815, "question_id": 59184362, "link": "https://stackoverflow.com/questions/59184362/converting-multiple-dummy-variables-into-one-column", "closed_reason": "Duplicate", "title": "Converting Multiple Dummy Variables into one Column", "body": "<p>I would like to convert a table that looks like this:</p>\n\n<pre><code>            Blue    Green    Red\nThing 1     No      Yes      No\nThing 2     Yes     No       No\nThing 3     Yes     No       No\n</code></pre>\n\n<p>Into this style:</p>\n\n<pre><code>            Color\nThing 1     Green\nThing 2     Blue\nThing 3     Blue\n</code></pre>\n\n<p>Is there a nice way to do this in python or pandas? And do these table styles have names?</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11953526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36eafd5913644b93ebee083cf1be77b5?s=128&d=identicon&r=PG&f=1", "display_name": "Alkimia", "link": "https://stackoverflow.com/users/11953526/alkimia"}, "edited": false, "score": 0, "creation_date": 1575492435, "post_id": 59184418, "comment_id": 104589293, "body": "Thanks! that was the issue. I&#39;ll accept this as the answer when I can"}], "tags": [], "owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "is_accepted": true, "score": 1, "last_activity_date": 1575492202, "creation_date": 1575492202, "answer_id": 59184418, "question_id": 59184311, "link": "https://stackoverflow.com/questions/59184311/keras-shape-mismatch-between-predict-and-fit/59184418#59184418", "title": "keras shape mismatch between predict and fit", "body": "<p>Yes, it is a few simple issues with your code. The output of your model needs to have at least rank 2 (in this case <code>(None,1)</code>) (My 2 cents is that optimizer complains when it's not). This is done using <code>keepdims=True</code>. Then you have to add one dimension to <code>y</code> too.</p>\n\n<pre><code>inputs = Input(shape=(20,), name=\"inputs\")\nembedding = Embedding(69, 100, name=\"embeddings\")(inputs)\nout = Reshape((2000,), name='reshape_embeddings')(embedding)\nout = Lambda(lambda x: K.sum(x, axis=1, keepdims=True), name='sum_embeddings')(out)\nmodel = Model(inputs, out)\nmodel.compile('adam', 'mean_squared_error')\nprint(model.summary())\n\nx = np.random.randint(69, size=(500,20))\ny = np.random.uniform(0, 1, size=(500,1))\n\npreds = model.predict(x)\nprint(preds.shape == y.shape)\n\nmodel.fit(x, y, batch_size=50, verbose=1)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11953526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36eafd5913644b93ebee083cf1be77b5?s=128&d=identicon&r=PG&f=1", "display_name": "Alkimia", "link": "https://stackoverflow.com/users/11953526/alkimia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 59184418, "answer_count": 1, "score": 1, "last_activity_date": 1575492234, "creation_date": 1575491753, "last_edit_date": 1575492234, "question_id": 59184311, "link": "https://stackoverflow.com/questions/59184311/keras-shape-mismatch-between-predict-and-fit", "title": "keras shape mismatch between predict and fit", "body": "<p>I have a simple model that flattens sequence embeddings and then sums them. When I run predict I get no errors and the output shape that I expect but when I try to train I get a shape mismatch error</p>\n\n<p>Here is the model:</p>\n\n<pre><code>import numpy as np\nfrom keras import backend as K\nfrom keras.models import Model\nfrom keras.layers.embeddings import Embedding\nfrom keras.layers import Reshape, Lambda\n\ninputs = Input(shape=(20,), name=\"inputs\")\nembedding = Embedding(69, 100, name=\"embeddings\")(inputs)\nout = Reshape((2000,), name='reshape_embeddings')(embedding)\nout = Lambda(lambda x: K.sum(x, axis=1), name='sum_embeddings')(out)\nmodel = Model(inputs, out)\nmodel.compile('adam', 'mean_squared_error')\nprint(model.summary())\n\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\ninputs (InputLayer)          (None, 20)                0         \n_________________________________________________________________\nembeddings (Embedding)       (None, 20, 100)           6900      \n_________________________________________________________________\nreshape_embeddings (Reshape) (None, 2000)              0         \n_________________________________________________________________\nsum_embeddings (Lambda)      (None,)                   0         \n=================================================================\nTotal params: 6,900\nTrainable params: 6,900\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>Here I build a random x,y sample:</p>\n\n<pre><code>x = np.random.randint(69, size=(500,20))\ny = np.random.uniform(0, 1, size=(500,))\n</code></pre>\n\n<p>When I predict x I get the correct output shape</p>\n\n<pre><code>preds = model.predict(x)\nprint(preds.shape == y.shape)\n</code></pre>\n\n<p>When I fit the model I get the following error:</p>\n\n<pre><code>model.fit(x, y, batch_size=50, verbose=1)\n</code></pre>\n\n<blockquote>\n  <p>ValueError: Error when checking target: expected sum_embeddings to\n  have 1 dimensions, but got array with shape (500, 1)</p>\n</blockquote>\n\n<p>It feels like I am missing something really simple. Any suggestions would be greatly appreciated</p>\n"}, {"tags": ["python", "sqlalchemy", "null"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1575494419, "post_id": 59184298, "comment_id": 104589989, "body": "Could you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I guess the pieces in your post can be put together to possibly replicate your results, but it&#39;ll raise your odds of getting answers, if you remove that initial stepping stone by providing a pretty much &quot;copy&amp;paste&quot; example in the question."}, {"owner": {"reputation": 4904, "user_id": 192390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vHSfV.gif?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/192390/ivan"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1575556881, "post_id": 59184298, "comment_id": 104613102, "body": "@IljaEveril&#228; Thank you for your suggestion. I have already found a solution, and will self-answer as soon as I can."}], "owner": {"reputation": 4904, "user_id": 192390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vHSfV.gif?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/192390/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577122894, "creation_date": 1575491688, "last_edit_date": 1577122894, "question_id": 59184298, "link": "https://stackoverflow.com/questions/59184298/sqlalchemy-bindparam-substitutes-a-null-while-another-value-is-bound", "title": "SQLAlchemy bindparam substitutes a NULL while another value is bound", "body": "<p>I have the following expression</p>\n\n<pre><code>func.ST_Simplify(\n  func.ST_Transform(column('route_segment'), 3857),\n  bindparam('dist')/10\n  True\n),\n</code></pre>\n\n<p>which for some reason gets rendered into</p>\n\n<pre><code>ST_Simplify(ST_Transform(route_segment, 3857), NULL / 10, TRUE)\n</code></pre>\n\n<p>This seems wrong because when I set <code>dist</code> in <code>.params</code> and do a <code>.compile(engine, compile_kwargs={\"literal_binds\": True})</code>, everywhere else it is rendered as the set value.</p>\n\n<p>Why can this be happening?</p>\n"}, {"tags": ["python", "html", "django", "bootstrap-4"], "answers": [{"tags": [], "owner": {"reputation": 3185, "user_id": 9733868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul3IR.jpg?s=128&g=1", "display_name": "Pedram Parsian", "link": "https://stackoverflow.com/users/9733868/pedram-parsian"}, "is_accepted": true, "score": 1, "last_activity_date": 1575491533, "creation_date": 1575491533, "answer_id": 59184258, "question_id": 59184229, "link": "https://stackoverflow.com/questions/59184229/change-bootstrap4-button-search-text/59184258#59184258", "title": "Change bootstrap4 button &quot;search&quot; text", "body": "<p>If you want to change the url, simply edit your <code>urls.py</code> file:</p>\n\n<pre><code>urlpatterns = [\n    path('my_search/', SearchResultsView.as_view(), name='search_results'),\n    ...\n</code></pre>\n\n<p>keep in mind that as you are using <strong>nameed</strong> urls, instead of hard coding them, you don't need to change your html templates.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11234816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03dc9e5781f53d9acbd586eb179310d8?s=128&d=identicon&r=PG&f=1", "display_name": "nevriye g&#252;l", "link": "https://stackoverflow.com/users/11234816/nevriye-g%c3%bcl"}, "is_accepted": false, "score": 1, "last_activity_date": 1575492961, "creation_date": 1575492961, "answer_id": 59184580, "question_id": 59184229, "link": "https://stackoverflow.com/questions/59184229/change-bootstrap4-button-search-text/59184580#59184580", "title": "Change bootstrap4 button &quot;search&quot; text", "body": "<pre><code>path('my_search/', SearchResultsView.as_view(), name='search_results')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12322808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bLlrpSkI-6Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBq0eeYvyoQEiTYfhwKRM_Z2dvfA/photo.jpg?sz=128", "display_name": "S&#252;meyye Ayd\u0131n", "link": "https://stackoverflow.com/users/12322808/s%c3%bcmeyye-ayd%c4%b1n"}, "is_accepted": false, "score": 3, "last_activity_date": 1575493060, "creation_date": 1575493060, "answer_id": 59184596, "question_id": 59184229, "link": "https://stackoverflow.com/questions/59184229/change-bootstrap4-button-search-text/59184596#59184596", "title": "Change bootstrap4 button &quot;search&quot; text", "body": "<p>you should change your slug;</p>\n\n<pre><code>urlpatterns = [\npath('my_search/', SearchResultsView.as_view(), name='search_results'),\n</code></pre>\n\n<p>next this you have to do makemigrations and migrate</p>\n"}], "owner": {"reputation": 319, "user_id": 11419848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4428c8e99c5afac796cb10dbfa165a3?s=128&d=identicon&r=PG&f=1", "display_name": "alcoder", "link": "https://stackoverflow.com/users/11419848/alcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59184258, "answer_count": 3, "score": 0, "last_activity_date": 1575493060, "creation_date": 1575491407, "question_id": 59184229, "link": "https://stackoverflow.com/questions/59184229/change-bootstrap4-button-search-text", "title": "Change bootstrap4 button &quot;search&quot; text", "body": "<p>When I click to \"Search\" button on my site <a href=\"http://junjob.ru/\" rel=\"nofollow noreferrer\">http://junjob.ru/</a>\nI go to <a href=\"http://junjob.ru/search/?q=&amp;q2=ALL\" rel=\"nofollow noreferrer\">http://junjob.ru/search/?q=&amp;q2=ALL</a></p>\n\n<p><strong>How can I change text \"search\" to \"my_search\" in this link?</strong>\nI need <a href=\"http://junjob.ru/my_search/?q=&amp;q2=ALL\" rel=\"nofollow noreferrer\">http://junjob.ru/my_search/?q=&amp;q2=ALL</a></p>\n\n<p>I am using django web-framework. And fix should support queries from form</p>\n\n<p><strong>My code</strong></p>\n\n<p><strong>vacancy_list.html</strong></p>\n\n<pre><code>&lt;div class=\"container\" style=\"margin-top: 40px; font-size: 2rem; padding-left: 0px;\"&gt;\n        &lt;form action=\"{% url 'search_results' %}\" method=\"get\"&gt;\n            &lt;div class=\"row\"&gt;\n                 &lt;div class=\"col-lg-8 col-md-6 col-xs-12\"&gt;\n                     &lt;input name=\"q\" type=\"text\" placeholder=\"Search...\" class=\"form-control\"&gt;\n                 &lt;/div&gt;\n                 &lt;div class=\"col-lg-3 col-md-4 col-xs-12\"&gt;\n                    &lt;select name=\"q2\" class=\"form-control\" id=\"exampleFormControlSelect1\"&gt;\n                         &lt;option&gt;Other&lt;/option&gt;\n                    &lt;/select&gt;\n                 &lt;/div&gt;\n                 &lt;div class=\"col-lg-1 col-md-2 col-xs-12\" style=\"padding-left: 0px;\"&gt;\n\n                     &lt;button  class=\"btn btn-primary\"&gt;Search&lt;/button&gt; &lt;!-- BUTTON --&gt;\n                 &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class HomePageView(ListView):\n    model = Vacancy\n    template_name = 'vacancy_list/vacancy_list.html'\n    paginate_by = 5\n    page_kwarg = 'vacancy'\n    context_object_name = 'vacancies'\n    queryset = Vacancy.objects.order_by('-published_date')\n\n    def paginate_queryset(self, queryset, page_size):\n        \"\"\"Paginate the queryset, if needed.\"\"\"\n        paginator = self.get_paginator(\n            queryset, page_size, orphans=self.get_paginate_orphans(),\n            allow_empty_first_page=self.get_allow_empty())\n        page_kwarg = self.page_kwarg\n        page = self.kwargs.get(page_kwarg) or self.request.GET.get(page_kwarg) or 1\n        try:\n            page_number = int(page)\n        except ValueError:\n            if page == 'last':\n                page_number = paginator.num_pages\n            else:\n                raise Http404(_('Page is not \u201clast\u201d, nor can it be converted to an int.'))\n        try:\n            page = paginator.page(page_number)\n            return (paginator, page, page.object_list, page.has_other_pages())\n        except InvalidPage as e:\n            raise Http404(_('Invalid page (%(page_number)s): %(message)s') % {\n                'page_number': page_number,\n                'message': str(e)\n            })\n\n\ndef vacancy_detail(request, pk):\n    vacancy = get_object_or_404(Vacancy, pk=pk)\n    print(\"ZZZZZZ: {};{};VACANCY;{};\\n\".format(datetime.now().strftime('%Y-%m-%d %H:%M:%S'), request.user, pk))\n    log_to_file(\"{};{};VACANCY;{};\\n\".format(datetime.now().strftime('%Y-%m-%d %H:%M:%S'), request.user, pk))\n    return render(request, 'vacancy_list/vacancy_detail.html', {'vacancy': vacancy})\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>urlpatterns = [\n    path('', HomePageView.as_view(), name='vacancy_list'),\n    path('search/', SearchResultsView.as_view(), name='search_results'),\n    path('vacancy/&lt;int:pk&gt;/', views.vacancy_detail, name='vacancy_detail'),\n    path('company/&lt;int:pk&gt;', views.company_detail, name='company_detail'),\n    path('vacancy/&lt;int:pk&gt;/request', contact_us, name='contact_us'),\n    ...\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 2, "creation_date": 1575491361, "post_id": 59184199, "comment_id": 104588860, "body": "<code>np.where(df)</code>? Otherwise you should provide a sample data and expected output."}], "answers": [{"tags": [], "owner": {"reputation": 3224, "user_id": 10396469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e00e8124a1819da370101aa8e2144eb?s=128&d=identicon&r=PG", "display_name": "Poe Dator", "link": "https://stackoverflow.com/users/10396469/poe-dator"}, "is_accepted": false, "score": 0, "last_activity_date": 1575492448, "last_edit_date": 1575492448, "creation_date": 1575492004, "answer_id": 59184368, "question_id": 59184199, "link": "https://stackoverflow.com/questions/59184199/get-row-and-column-pandas-boolean-dataframe/59184368#59184368", "title": "Get row and column pandas boolean dataframe", "body": "<p>use <code>[np.where(row)[0] for  index, row in df.iterrows()]</code>\nit will produce a list of numpy arrays with indices of <code>True</code> values in each row. Add <code>.tolist()</code> for list of lists.</p>\n\n<p>Stacking the resulting arrays is not possible because they may have various length.</p>\n\n<p>Example:</p>\n\n<pre><code>df = pd.DataFrame([[True, False],[False,True],[True,True], [False,False]])\n[np.where(row)[0].tolist() for  _, row in df.iterrows()]\n\n[[0], [1], [0, 1], []]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12481897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c3522a5ac0b911d7ff4872385b8f89?s=128&d=identicon&r=PG&f=1", "display_name": "Raza_Loba", "link": "https://stackoverflow.com/users/12481897/raza-loba"}, "is_accepted": false, "score": 0, "last_activity_date": 1575493926, "creation_date": 1575493926, "answer_id": 59184738, "question_id": 59184199, "link": "https://stackoverflow.com/questions/59184199/get-row-and-column-pandas-boolean-dataframe/59184738#59184738", "title": "Get row and column pandas boolean dataframe", "body": "<p>Thank you all for your answers.</p>\n\n<p>I managed to solve it with a loop for</p>\n\n<p>Here is the code:</p>\n\n<pre><code>chbay = {}\nfor item in levels:\n    baychan = convs[convs[item] == True]\n    chbay[item] = baych[item]\n</code></pre>\n\n<p>Were convs is the name of the dataset and levels is a list of the column names of the dataset.</p>\n\n<p>I am new in Python so probably my solution is not very tidy. I will try some of the ideas you have provide so I can learn new ways to do it.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1575496671, "creation_date": 1575496671, "answer_id": 59185212, "question_id": 59184199, "link": "https://stackoverflow.com/questions/59184199/get-row-and-column-pandas-boolean-dataframe/59185212#59185212", "title": "Get row and column pandas boolean dataframe", "body": "<p>You can try this, it drops all rows without a True match:</p>\n\n<pre><code>df.replace(False, np.NaN).dropna(how='all').replace(1.0, True).replace(np.NaN, False)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>     date  Amount   line   bool\n4    True   False  False  False\n8   False    True  False  False\n9   False    True  False  False\n11  False    True  False  False\n12  False    True  False  False\n13  False    True  False  False\n14  False    True  False  False\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12481897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c3522a5ac0b911d7ff4872385b8f89?s=128&d=identicon&r=PG&f=1", "display_name": "Raza_Loba", "link": "https://stackoverflow.com/users/12481897/raza-loba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 502, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1575518904, "creation_date": 1575491279, "last_edit_date": 1575518904, "question_id": 59184199, "link": "https://stackoverflow.com/questions/59184199/get-row-and-column-pandas-boolean-dataframe", "title": "Get row and column pandas boolean dataframe", "body": "<p>I have a boolean <code>Pandas</code> dataframe (all the values are either <code>True</code> or <code>False</code>) and I need to get for each row the columns where the value is <code>True</code>. </p>\n\n<p>Any idea how can I do it?</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1575491757, "post_id": 59184171, "comment_id": 104589026, "body": "What if the list includes something like <code>&#39;Othello&#39;</code>? Should that be a match for <code>&#39;hello&#39;</code>, or do you want only whole words? And what about case-sensitivity?"}], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 4695453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c126a2e8cc0dd2feea773cf6d60ad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "swaggy p", "link": "https://stackoverflow.com/users/4695453/swaggy-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1575491265, "creation_date": 1575491265, "answer_id": 59184191, "question_id": 59184171, "link": "https://stackoverflow.com/questions/59184171/find-a-part-of-an-element-of-a-list/59184191#59184191", "title": "Find a part of an element of a list", "body": "<p>quick and easy way is to iterate over each string in the list, and then check if that string contains the word <code>hello</code></p>\n\n<pre><code>for string in list:\n    if 'hello' in string:\n        #do something\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12482097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24efa7755fe7e92432bcc5bc29747b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Mombelli", "link": "https://stackoverflow.com/users/12482097/diego-mombelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1575491586, "answer_count": 1, "score": 0, "last_activity_date": 1575491663, "creation_date": 1575491142, "question_id": 59184171, "link": "https://stackoverflow.com/questions/59184171/find-a-part-of-an-element-of-a-list", "closed_reason": "Duplicate", "title": "Find a part of an element of a list", "body": "<p>Do you please know if it's possible in Python 3.7 to find in a list a certain word?\nFor example, in a list <code>list = ['hello world', 'hello everyone', 'Freddy Krueger']</code> to make the program do an action only for the element with the word 'hello' inside of them.\nSorry for my bad english, I hope you will help me finding a solution.\nHave a nice evening!</p>\n"}, {"tags": ["python", "ctypes"], "comments": [{"owner": {"reputation": 2539, "user_id": 3492512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HEzl.jpg?s=128&g=1", "display_name": "Gael Lorieul", "link": "https://stackoverflow.com/users/3492512/gael-lorieul"}, "edited": false, "score": 0, "creation_date": 1575551530, "post_id": 59184157, "comment_id": 104610029, "body": "Actually answer <a href=\"https://stackoverflow.com/questions/1228158/python-ctype-recursive-structures\">here</a> makes the code run without errors, but the Python attributes are not bound with the C attributes. Hence it does not answer my question. Also, since then I found another solution that does not break the binding and which I would like to post as an answer here."}, {"owner": {"reputation": 6531, "user_id": 507028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150b5324471a76f6f2fa9dd2380ad611?s=128&d=identicon&r=PG", "display_name": "Neitsa", "link": "https://stackoverflow.com/users/507028/neitsa"}, "edited": false, "score": 0, "creation_date": 1575565568, "post_id": 59184157, "comment_id": 104617894, "body": "This is explained in the <a href=\"https://docs.python.org/3/library/ctypes.html#incomplete-types\" rel=\"nofollow noreferrer\">ctypes documentation</a>. If you look closely at the example, you can see that the forward definition does <b>not</b> define the <code>_fields_</code> attribute and is just a class that has the <code>pass</code> statement."}], "owner": {"reputation": 2539, "user_id": 3492512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HEzl.jpg?s=128&g=1", "display_name": "Gael Lorieul", "link": "https://stackoverflow.com/users/3492512/gael-lorieul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1575491849, "answer_count": 0, "score": 0, "last_activity_date": 1575491071, "creation_date": 1575491071, "question_id": 59184157, "link": "https://stackoverflow.com/questions/59184157/ctypes-how-to-define-a-ctypes-structure-for-a-c-struct-that-references-itself", "closed_reason": "Duplicate", "title": "ctypes: how to define a ctypes.Structure for a C struct that references itself?", "body": "<p>In C, it is allowed to define a struct that embeds pointers to objects of the same struct that is being defined. For example, the following <code>node</code> struct implementation for nodes of a list</p>\n\n<pre><code>typedef struct node{\n    void *val;\n    struct node *next;\n    struct node *prev;\n} node;\n</code></pre>\n\n<p>embeds pointers <code>next</code> and <code>prev</code> that are of type <code>node*</code>.</p>\n\n<p>Translating this na\u00efvely into a Python <code>ctypes.Structure</code> class yields:</p>\n\n<pre><code>class NODE(Structure):\n    _fields_ = [ (\"val\", c_void_p),\n                 (\"next\", POINTER(NODE)),\n                 (\"prev\", POINTER(NODE)) ]\n</code></pre>\n\n<p>However, python does not allow to make reference to a class (in this example, <code>NODE</code>) within its own definition (<code>NameError: name 'NODE' is not defined</code>).</p>\n\n<p>How can I work around this?</p>\n\n<p>PS: I attempted defining the <code>_fields_</code> attribute <em>after</em> the class definition</p>\n\n<pre><code>class NODE(Structure):\n    _fields_ = []\nNODE._fields_ = [ (\"val\", c_void_p),\n                  (\"next\", POINTER(NODE)),\n                  (\"prev\", POINTER(NODE)) ]\n</code></pre>\n\n<p>but this is not allowed because <code>_fields_</code> is tagged (?) as <code>final</code> in the ctypes.Structure base-class.  (<code>AttributeError: _fields_ is final</code>)</p>\n"}, {"tags": ["python", "pandas", "sum", "multiple-columns"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 2, "creation_date": 1575491125, "post_id": 59184148, "comment_id": 104588775, "body": "<code>df.groupby([&#39;Year&#39;,&#39;Sex&#39;]).sum()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 2, "last_activity_date": 1575491118, "creation_date": 1575491118, "answer_id": 59184167, "question_id": 59184148, "link": "https://stackoverflow.com/questions/59184148/pandas-dataframe-summing-rows-by-multiple-column-values/59184167#59184167", "title": "Pandas DataFrame - summing rows by multiple column values", "body": "<p>Use :</p>\n\n<pre><code>df.groupby(['Year','Sex'],as_index=False).sum()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9085653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e66e14120dad10a152b067b38cf136c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakubjalu", "link": "https://stackoverflow.com/users/9085653/jakubjalu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575491118, "creation_date": 1575491039, "last_edit_date": 1575491107, "question_id": 59184148, "link": "https://stackoverflow.com/questions/59184148/pandas-dataframe-summing-rows-by-multiple-column-values", "title": "Pandas DataFrame - summing rows by multiple column values", "body": "<p>I am working on a Pandas dataframe in Python, i would like to do following rearrangement of the dataset :</p>\n\n<p><img src=\"https://i.stack.imgur.com/GS7rg.png\" alt=\"img\"></p>\n\n<p>I tried using for loops, but I wonder if there is any simpler solution using Pandas - i couldn't find anything more elegant.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 9475909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1803e2fc029dd7d276794975ce8be6?s=128&d=identicon&r=PG&f=1", "display_name": "MonkeyMonkey", "link": "https://stackoverflow.com/users/9475909/monkeymonkey"}, "edited": false, "score": 0, "creation_date": 1575492299, "post_id": 59184342, "comment_id": 104589225, "body": "My problem is I have to use that <code>reportdate</code> from that file. This is what it looks like in Excel <code>2019-12-02  07:19:08</code>. I then read that value in using <code>reportdate = pd.read_excel(file, header=None,  nrows= 1, use_cols = &#39;A:B&#39;).dropna(axis=1, how=&#39;all&#39;).loc[0,1]</code>. Then, I create a new column using<code>df[&#39;ReportDate&#39;] = reportdate&#39; </code> and then  <code>df[&#39;ReportDate&#39;] = pd.to_datetime(df[&#39;ReportDate&#39;], errors=&#39;coerece&#39;)</code>. I get that <code>TypeError</code> when I try to subtract the dates."}, {"owner": {"reputation": 106, "user_id": 9475909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1803e2fc029dd7d276794975ce8be6?s=128&d=identicon&r=PG&f=1", "display_name": "MonkeyMonkey", "link": "https://stackoverflow.com/users/9475909/monkeymonkey"}, "edited": false, "score": 0, "creation_date": 1575493094, "post_id": 59184342, "comment_id": 104589547, "body": "That did it! Thank you! If you update your answer, I&#39;ll mark it as the answer!"}], "tags": [], "owner": {"reputation": 95, "user_id": 11903814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDLdCsW6UVvrx6SFYQJlnO8Xo7xJlYD-L_Y-ayqBA=k-s128", "display_name": "Chen-CN", "link": "https://stackoverflow.com/users/11903814/chen-cn"}, "is_accepted": true, "score": 1, "last_activity_date": 1575493544, "last_edit_date": 1575493544, "creation_date": 1575491896, "answer_id": 59184342, "question_id": 59184133, "link": "https://stackoverflow.com/questions/59184133/python-datetime-type-days-difference/59184342#59184342", "title": "Python DateTime Type Days Difference", "body": "<p>The problem is caused by errors='coerce'. I searched and someone said 'coerce' is a leftover from old-version python. Try to remove it.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'CN ON': ['WD-D5','JF-04','P5'],\n                   'Date Range': ['10/05/2019 - 11/06/2019','09/05/2019 - 12/15/2019','05/09/2019 - 10/25/2019']\n        })\n\n\ndf['End Date'] = df['Date Range'].str[-10:]\ndf['End Date'] = pd.to_datetime(df['End Date'])\n\ndf['ReportDate'] = '2019-12-02 07:19:08'\ndf['ReportDate'] = pd.to_datetime(df['ReportDate'])\ndf['Days'] = df['End Date'] - df['ReportDate']\n\nprint(df)\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 9475909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1803e2fc029dd7d276794975ce8be6?s=128&d=identicon&r=PG&f=1", "display_name": "MonkeyMonkey", "link": "https://stackoverflow.com/users/9475909/monkeymonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59184342, "answer_count": 1, "score": 0, "last_activity_date": 1575493544, "creation_date": 1575490948, "question_id": 59184133, "link": "https://stackoverflow.com/questions/59184133/python-datetime-type-days-difference", "title": "Python DateTime Type Days Difference", "body": "<p><strong>Data</strong></p>\n\n<p>I import a date from an Excel workbook and store it in a variable called <code>reportdate</code>. </p>\n\n<pre><code>reportdate = pd.read_excel(file, header=None,  nrows= 1, use_cols = 'A:B').dropna(axis=1, how='all').loc[0,1]\n</code></pre>\n\n<p>I then convert <code>reportdate</code> to a DataFrame using <code>rdf = pd.DataFrame({'Date':[reportdate]})</code>.</p>\n\n<p><code>type(reportdate)</code> returns <code>pandas._libs.tslibs.timestamps.Timestamp</code>. \n<code>reportdate</code> returns <code>Timestamp('2019-12-02 07:19:07.703000')</code>.</p>\n\n<p>I don't know how to recreate <code>reportdate</code> to be that exact format and timestamp format.</p>\n\n<p>Here is a sample data set.</p>\n\n<pre><code>df = pd.DataFrame({'CN ON': ['WD-D5','JF-04','P5'],\n                   'Date Range': ['10/05/2019 - 11/06/2019','09/05/2019 - 12/15/2019','05/09/2019 - 10/25/2019']                   \n        })\n</code></pre>\n\n<p><strong>What I do</strong></p>\n\n<p>I then parse apart <code>Date Range</code> to get the last date in the range and convert it to a <code>datetime</code> type.</p>\n\n<pre><code>df['End Date'] = df['Date Range'].str[-10:]\ndf['End Date'] = pd.to_datetime(df['End Date'], errors='coerce')\n</code></pre>\n\n<p>I need to calculate the day difference between <code>reportdate</code> and <code>End Date</code>.</p>\n\n<p><strong>What I try</strong></p>\n\n<p>Here is what I try.</p>\n\n<pre><code>df['ReportDate'] = reportdate\ndf['ReportDate'] = pd.to_datetime(df['ReportDate'], errors='coerece')\ndf['Days'] = df['End Date'] - df['ReportDate']\n</code></pre>\n\n<p>Then I check the types.\n<code>df.dtypes</code> returns <code>datetime64[ns]</code> for both <code>ReportDate</code> and <code>End Date</code>.</p>\n\n<p><strong>What I need</strong></p>\n\n<p>I need the difference in days to be an integer or float because I need to check if those days are between certain values.</p>\n\n<p>I keep getting the following error <code>TypeError: ufunc subtract cannot use operands with types dtype('&lt;U10') and dtype('&lt;M8[ns]')</code>.</p>\n\n<p>Any guidance on how I can get the days difference between the dates in a number (int, float, etc.) format would be greatly appreciated. I don't know where my <code>TypeError</code> is throwing. </p>\n"}, {"tags": ["python", "django", "django-users", "python-social-auth", "django-custom-user"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1575491281, "post_id": 59184131, "comment_id": 104588837, "body": "The error message in the post title doesn&#39;t match the error message on the dpaste link."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1575491316, "post_id": 59184131, "comment_id": 104588850, "body": "Also, it&#39;s much better to provide the error traceback as plain text in the post, instead of linking to an external site."}, {"owner": {"reputation": 23, "user_id": 7287504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a730214a5c9076b59d0b89d5dcc8933f?s=128&d=identicon&r=PG&f=1", "display_name": "dataatallured", "link": "https://stackoverflow.com/users/7287504/dataatallured"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1575495419, "post_id": 59184131, "comment_id": 104590337, "body": "My mistake, I updated my post. I&#39;ll keep that in mind for the future."}, {"owner": {"reputation": 168, "user_id": 10231700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84206c4a130d74a758245db8b1a593?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/10231700/charles"}, "edited": false, "score": 0, "creation_date": 1597849140, "post_id": 59184131, "comment_id": 112268759, "body": "Hey, did you eventually fix this issue?"}], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 6808714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15b3cab88d9d5a4c25e71ba08a9af4a?s=128&d=identicon&r=PG", "display_name": "Mahrez BenHamad", "link": "https://stackoverflow.com/users/6808714/mahrez-benhamad"}, "is_accepted": false, "score": 0, "last_activity_date": 1575625726, "last_edit_date": 1575625726, "creation_date": 1575491668, "answer_id": 59184295, "question_id": 59184131, "link": "https://stackoverflow.com/questions/59184131/django-social-auth-google-attributeerror-nonetype-object-has-no-attribute/59184295#59184295", "title": "Django Social Auth - Google: AttributeError: &#39;NoneType&#39; object has no attribute &#39;provider&#39;", "body": "<p>The error on the link doesn't match what you mention in the title.\nFor the traceback, the solution is just to add this:</p>\n\n<pre><code>SESSION_COOKIE_SECURE = False\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7287504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a730214a5c9076b59d0b89d5dcc8933f?s=128&d=identicon&r=PG&f=1", "display_name": "dataatallured", "link": "https://stackoverflow.com/users/7287504/dataatallured"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 721, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575625726, "creation_date": 1575490944, "last_edit_date": 1575495362, "question_id": 59184131, "link": "https://stackoverflow.com/questions/59184131/django-social-auth-google-attributeerror-nonetype-object-has-no-attribute", "title": "Django Social Auth - Google: AttributeError: &#39;NoneType&#39; object has no attribute &#39;provider&#39;", "body": "<p>I am receiving this error when trying to login via google, I've tried just about everything I can think of and similar issues on SO don't seem to help. I have a custom user model setup as such:</p>\n\n<h1>models.py</h1>\n\n<pre><code>from django.contrib.auth.models import AbstractUser\nfrom django.db import models\nclass Departments(models.Model):\n    name = models.CharField(max_length=255, unique=True)\n    def __str__(self):\n        return self.name\n\nclass AlluredUser(AbstractUser):\n    departments = models.ManyToManyField(Departments)\n    def __str__(self):\n        return self.username  \n</code></pre>\n\n<h1>forms.py</h1>\n\n<pre><code>from django import forms\nfrom django.contrib.auth.forms import UserCreationForm, UserChangeForm\nfrom .models import AlluredUser\n\nclass CustomUserCreationForm(UserCreationForm):\n\n    class Meta:\n        model = AlluredUser\n        fields = ('username', 'email')\n\nclass CustomUserChangeForm(UserChangeForm):\n\n    class Meta:\n        model = AlluredUser\n        fields = ('username', 'email')\n</code></pre>\n\n<h1>Social Auth Pipeline</h1>\n\n<pre><code>SOCIAL_AUTH_PIPELINE = (\n    'social_core.pipeline.social_auth.social_details',\n    'social_core.pipeline.social_auth.social_uid',\n    'social_core.pipeline.social_auth.auth_allowed',\n    'social_core.pipeline.social_auth.social_user',\n    'social_core.pipeline.user.get_username',\n    'social_core.pipeline.social_auth.associate_by_email',\n    'social_core.pipeline.user.create_user',\n    'social_core.pipeline.social_auth.associate_user',\n    'social_core.pipeline.social_auth.load_extra_data',\n    'social_core.pipeline.user.user_details'\n)\n</code></pre>\n\n<h1>Error Traceback</h1>\n\n<pre><code>AttributeError at /auth/complete/google-oauth2/\n'NoneType' object has no attribute 'provider'\n\nEnvironment:\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/auth/complete/google-oauth2/?state=8XLcbxz6sPSPOwJfOIXWOud88UJ5YtL2&amp;code=4/twHRVLHTMzBV99K-VvektvJfjGuJYGBvqi254dWTuA2dLmbNFw3fIp8l5pdYSqKK89ONPGrxInG39pH8Wf-fpas&amp;scope=email%20profile%20https://www.googleapis.com/auth/userinfo.profile%20https://www.googleapis.com/auth/userinfo.email%20openid&amp;authuser=0&amp;hd=allured.com&amp;session_state=2403f8348307b18b8ab460026d3c88b1b18d759f..5dbb&amp;prompt=none\n\nDjango Version: 2.2.4\nPython Version: 3.7.4\nInstalled Applications:\n['user.apps.UserConfig',\n 'issue_tracker.apps.IssueTrackerConfig',\n 'ytd_reports.apps.YtdReportsConfig',\n 'stats.apps.StatsConfig',\n 'scheduler.apps.SchedulerConfig',\n 'submissions.apps.SubmissionsConfig',\n 'dash_app.apps.DashAppConfig',\n 'contact.apps.ContactConfig',\n 'django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.humanize',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'social_django']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n 'social_django.middleware.SocialAuthExceptionMiddleware',\n 'dashboard.middleware.loginRequired.LoginRequiredMiddleware']\n\n\n\nTraceback:\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\django\\core\\handlers\\exception.py\" in inner\n  34.             response = get_response(request)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n  115.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n  113.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\django\\views\\decorators\\cache.py\" in _wrapped_view_func\n  44.         response = view_func(request, *args, **kwargs)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\django\\views\\decorators\\csrf.py\" in wrapped_view\n  54.         return view_func(*args, **kwargs)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\social_django\\utils.py\" in wrapper\n  49.             return func(request, backend, *args, **kwargs)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\social_django\\views.py\" in complete\n  33.                        *args, **kwargs)\n\nFile \"C:\\Users\\jsarko\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\social_core\\actions.py\" in do_complete\n  71.                                          social_user.provider)\n\nException Type: AttributeError at /auth/complete/google-oauth2/\nException Value: 'NoneType' object has no attribute 'provider'\n</code></pre>\n\n<p>I'm guessing it has something to do with the custom user model I created since I didn't have this problem beforehand. Any help would be much appreciated.</p>\n"}, {"tags": ["python", "sympy"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1575491181, "post_id": 59184115, "comment_id": 104588799, "body": "&quot;My personal problem is that I don&#39;t know the way I could solve it with Laplace&quot; - in my opinion, you should write out the math first because, if you don&#39;t know what you want to write, Python, or any other programming language, will only get in the way"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1575491957, "post_id": 59184115, "comment_id": 104589088, "body": "You also need to be <i>much</i> more specific about the problem you are encountering when asking questions here \u2014 i.e. saying &quot;It doesnt really give me the desired result&quot; to way too vague."}, {"owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "edited": false, "score": 0, "creation_date": 1575492753, "post_id": 59184115, "comment_id": 104589415, "body": "I would recommend using <code>dsolve</code> to solve ODEs rather than Laplace transforms."}, {"owner": {"reputation": 1640, "user_id": 11751294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a563bc7b08c9996e6a9b0977adf686a2?s=128&d=identicon&r=PG&f=1", "display_name": "P&#233;ter Le&#233;h", "link": "https://stackoverflow.com/users/11751294/p%c3%a9ter-le%c3%a9h"}, "edited": false, "score": 0, "creation_date": 1575881183, "post_id": 59184115, "comment_id": 104700701, "body": "I think you shouldn&#39;t try to do the math symbollically. A numerical approach is much more sutiable. Actually the matplotlib docs have something like this. Take a look at <a href=\"https://matplotlib.org/3.1.1/gallery/animation/double_pendulum_sgskip.html\" rel=\"nofollow noreferrer\">this page</a>."}, {"owner": {"reputation": 4421, "user_id": 774575, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/I2J58.png?s=128&g=1", "display_name": "mins", "link": "https://stackoverflow.com/users/774575/mins"}, "edited": false, "score": 0, "creation_date": 1606067800, "post_id": 59184115, "comment_id": 114841127, "body": "At least this question was helpful, I&#39;m reading a (good) book where the derivative substitution routine (<code>laplace_transform_derivatives</code>) is bugged, yours is exact and solved my problem."}], "owner": {"reputation": 11, "user_id": 9626958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1071fe3ca7deb98d1177bb6b2afc736?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Szab&#243;", "link": "https://stackoverflow.com/users/9626958/bal%c3%a1zs-szab%c3%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575491723, "creation_date": 1575490850, "last_edit_date": 1575491723, "question_id": 59184115, "link": "https://stackoverflow.com/questions/59184115/solve-double-pendulum-problem-with-laplace-transformation", "title": "Solve double pendulum problem with Laplace transformation", "body": "<p>I have a problem that exceeds my limits, and I would appreciate if some of you could help me.\nThe problem is the following:I need to visualize the movement of a double-pendulum. We know the equation of the pendulums, and we also have the information that if the two angles are really small, then they will be in a form such as on the picture below(sin,cos). So I have to transform the original equation knowing that the sin and cos will get those values.\nI have to solve the final equation system with Laplace-transformation, knowing that m1=3,m2=1,l1=l2=16, \u03b81(0) = 1, \u03b82(0) = \u22121, \u03b8'1(0)=0, \u03b8'2(0)=0.\nMy personal problem is that I dont know the way I could solve it with Laplace.</p>\n\n<p>Equation</p>\n\n<p><img src=\"https://i.stack.imgur.com/7QCyo.png\" alt=\"\"></p>\n\n<p>Sin and cos values</p>\n\n<p><img src=\"https://i.stack.imgur.com/nOGpq.png\" alt=\"\"></p>\n\n<p>This is how far I got so far(It doesnt really give me the desired result):</p>\n\n<pre><code>import sympy as sympy\nimport numpy as np\nfrom sympy.integrals.transforms import laplace_transform\nfrom sympy.integrals.transforms import inverse_laplace_transform\nimport matplotlib.pyplot as plt\n\ndef laplace_transform_derivatives(e):\n    if isinstance(e, (sympy.Add, sympy.Mul)):\n        t = type(e)\n        return t(*[laplace_transform_derivatives(arg) for arg in e.args])\n    if isinstance(e, sympy.LaplaceTransform):\n\n        if isinstance(e.args[0], sympy.Derivative):\n            d, t, s = e.args\n            n = d.args[1][1]\n            return ((s**n) * sympy.LaplaceTransform(d.args[0], t, s) - \n                    sum([s**(n-i) * sympy.diff(d.args[0], t, i-1).subs(t, 0)\n                         for i in range(1, n+1)]))\n\n\n    return e\ndef Laplace():\n    m1=3\n    m2=1\n    l1=16\n    l2=16\n    g=9.8\n    s, F= sympy.symbols(\"s, F\", real=True)  \n    t = sympy.symbols(\"t\", positive=True)\n    y1 = sympy.Function(\"y1\")\n    y2 = sympy.Function(\"y2\")\n    ode = (m1+m2)*(l1**2)*sympy.diff(y1(t), t, 2) + m2*l1*l2*sympy.diff(y2(t), t, 2)+m2*l1*l2*(sympy.diff(y2(t), t, 1)**2)+(m1+m2)*l1*g*y1(t)\n    sympy.Eq(ode)\n    L_y = sympy.laplace_transform(y2(t), t, s) \n    L_ode = sympy.laplace_transform(ode, t, s, noconds=True)\n    sympy.Eq(L_ode)\n    L_ode_2 = laplace_transform_derivatives(L_ode)\n    sympy.Eq(L_ode_2)\n    L_ode_3 = L_ode_2.subs(L_y, F)\n    sympy.Eq(L_ode_3)\n    kf = {y2(0): 1, y2(t).diff(t).subs(t, 0): 0}\n    L_ode_4 = L_ode_3.subs(kf)\n    sympy.Eq(L_ode_4)\n    Y_sol = sympy.solve(L_ode_4, F) #kiszamitja az F-t\n    y_sol = sympy.inverse_laplace_transform(Y_sol[0], s, t)\n    sympy.simplify(y_sol)\n    print(y_sol)\n    return y_sol\ndef Laplace2():\n    m2=1\n    l1=16\n    l2=16\n    g=9.8\n    s, F= sympy.symbols(\"s, F\", real=True)  \n    t = sympy.symbols(\"t\", positive=True)\n    y1 = sympy.Function(\"y1\")\n    y2 = sympy.Function(\"y2\")\n    ode = m2*(l2**2)*sympy.diff(y2(t), t, 2) + m2*l1*l2*sympy.diff(y1(t), t, 2) + m2*l2*g*y2(t)\n    sympy.Eq(ode)\n\n    L_y = sympy.laplace_transform(y2(t), t, s)\n    L_y2 = sympy.laplace_transform(y1(t), t, s) \n    L_ode = sympy.laplace_transform(ode, t, s, noconds=True)\n    sympy.Eq(L_ode)\n\n\n    L_ode_2 = laplace_transform_derivatives(L_ode)\n    sympy.Eq(L_ode_2)\n\n    L_ode_3 = L_ode_2.subs(L_y, F)\n    sympy.Eq(L_ode_3)\n    #print(\"L_ode_3\",L_ode_3)\n\n    kf = {y2(0): -1, y2(t).diff(t).subs(t, 0): 0}\n    L_ode_4 = L_ode_3.subs(kf)\n    sympy.Eq(L_ode_4)\n    #print(\"L_ode_4\",L_ode_4)\n    Y_sol = sympy.solve(L_ode_4, F) #kiszamitja az F-t\n    #print(\"Y_sol=\", Y_sol)\n    y_sol = sympy.inverse_laplace_transform(Y_sol[0], s, t)\n    sympy.simplify(y_sol)\n    print(y_sol)\n    return y_sol\n\ny_sol1=Laplace()\ny_sol2=Laplace2()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "plot"], "comments": [{"owner": {"reputation": 4188, "user_id": 4008657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8b49537eb0980ab5b9551b99ff0f5ce?s=128&d=identicon&r=PG", "display_name": "Ruthger Righart", "link": "https://stackoverflow.com/users/4008657/ruthger-righart"}, "edited": false, "score": 0, "creation_date": 1575490933, "post_id": 59184072, "comment_id": 104588683, "body": "I think you can use the following command: <code>pd.DataFrame(TopCustomers.sort_values().tail(10))</code>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1575490935, "post_id": 59184072, "comment_id": 104588685, "body": "<code>Top10Customers.to_frame()</code>?"}, {"owner": {"reputation": 464, "user_id": 8334724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6m6i.png?s=128&g=1", "display_name": "Dasphillipbrau", "link": "https://stackoverflow.com/users/8334724/dasphillipbrau"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1575491505, "post_id": 59184072, "comment_id": 104588913, "body": "@QuangHoang I think that method is not aligning the columns properly, maybe its just visual but Im noticing that by using that, the &#39;Total Records&#39; is position way above the &#39;companies&#39; column. I used <code>Top10CustomersDF = pandas.DataFrame({&#39;Customers&#39;:Top10Customers.index, &#39;Total Records&#39;:Top10Customers.values})</code> and it got aligned"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1575491569, "post_id": 59184072, "comment_id": 104588949, "body": "That&#39;s because <code>companies</code> is currently the index. If so, what you want is <code>Top10Customers.reset_index()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 21097, "user_id": 10908375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7f8w.jpg?s=128&g=1", "display_name": "Nicolas Gervais", "link": "https://stackoverflow.com/users/10908375/nicolas-gervais"}, "is_accepted": false, "score": 0, "last_activity_date": 1575490948, "creation_date": 1575490948, "answer_id": 59184132, "question_id": 59184072, "link": "https://stackoverflow.com/questions/59184072/how-to-convert-a-pandas-series-into-a-dataframe/59184132#59184132", "title": "How to convert a Pandas series into a dataframe", "body": "<p>You can use the <code>.to_frame()</code> method and it will turn it into a <code>pd.DataFrame</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4188, "user_id": 4008657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8b49537eb0980ab5b9551b99ff0f5ce?s=128&d=identicon&r=PG", "display_name": "Ruthger Righart", "link": "https://stackoverflow.com/users/4008657/ruthger-righart"}, "is_accepted": false, "score": 1, "last_activity_date": 1575492385, "last_edit_date": 1575492385, "creation_date": 1575491676, "answer_id": 59184296, "question_id": 59184072, "link": "https://stackoverflow.com/questions/59184072/how-to-convert-a-pandas-series-into-a-dataframe/59184296#59184296", "title": "How to convert a Pandas series into a dataframe", "body": "<p>Here a small example with data:</p>\n\n<pre><code>import pandas as pd\nraw_data = pd.DataFrame({'Company':['A', 'A','B', 'B', 'C', 'C'], 'Total Records':[2,3,6,4,5,10]})\nTopCustomers = raw_data.groupby(raw_data['Company'])['Total Records'].sum()\n</code></pre>\n\n<p>Indeed <code>type(TopCustomers)</code> is pandas.core.series.Series\nThe following turns it in a DataFrame:</p>\n\n<pre><code>pd.DataFrame(TopCustomers)\n</code></pre>\n\n<p>Otherwise <code>.to_frame()</code> works equally well as indicated above.</p>\n"}], "owner": {"reputation": 464, "user_id": 8334724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6m6i.png?s=128&g=1", "display_name": "Dasphillipbrau", "link": "https://stackoverflow.com/users/8334724/dasphillipbrau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1575492385, "creation_date": 1575490663, "question_id": 59184072, "link": "https://stackoverflow.com/questions/59184072/how-to-convert-a-pandas-series-into-a-dataframe", "title": "How to convert a Pandas series into a dataframe", "body": "<p>I've been running some groupings on a dataframe that I have and saving the results in variables. However, I just noticed that the variables are actually being saved as series rather than dataframes.</p>\n\n<p>I've seen tutorials/docs on how to convert a series to a dataframe, but all of them show only static data (by manually typing each of the values into an array), and this isn't an option for me, because I have over 2 million rows in my data frame.</p>\n\n<p>So if I have </p>\n\n<pre><code>TopCustomers = raw_data.groupby(raw_data['Company'])['Total Records'].sum()\nTop10Customers = TopCustomers.sort_values().tail(10)\n</code></pre>\n\n<p>How can I turn Top10Customers into a dataframe? I need it because not all plots work with series.</p>\n\n<p>The syntax <code>frame = { 'Col 1': series1, 'Col 2': series2 }</code> doesn't work because I only have 1 series</p>\n"}, {"tags": ["python", "slots", "python-descriptors"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1575491026, "creation_date": 1575491026, "answer_id": 59184145, "question_id": 59184064, "link": "https://stackoverflow.com/questions/59184064/why-the-introduction-of-slots-was-made-possible-with-descriptors/59184145#59184145", "title": "Why the introduction of __slots__ was made possible with descriptors?", "body": "<p>Consider a simple class:</p>\n\n<pre><code>class A:\n    __slots__ = ('a',)\n</code></pre>\n\n<p>What is <code>a</code>? It's a descriptor:</p>\n\n<pre><code>&gt;&gt;&gt; type(A.a)\n&lt;class 'member_descriptor'&gt;\n</code></pre>\n\n<p>Each string in the value of <code>__slots__</code> is used to create a class attribute by that name with a <code>member_descriptor</code> value.</p>\n\n<p>That means you can (try to) access it via <code>A.a.__get__</code></p>\n\n<pre><code>&gt;&gt;&gt; a = A()\n&gt;&gt;&gt; a.a\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: a\n</code></pre>\n\n<p>assign to it with <code>A.a.__set__</code></p>\n\n<pre><code>&gt;&gt;&gt; a.a = 7\n</code></pre>\n\n<p>and try to access it again :)</p>\n\n<pre><code>&gt;&gt;&gt; a.a\n7\n</code></pre>\n\n<p>What you <em>can't</em> do is try to assign to any other attribute on the instance:</p>\n\n<pre><code>&gt;&gt;&gt; A.b\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: type object 'A' has no attribute 'b'\n&gt;&gt;&gt; a.b\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'A' object has no attribute 'b'\n&gt;&gt;&gt; a.b = 0\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'A' object has no attribute 'b'\n</code></pre>\n\n<p>The presence of <code>__slots__</code> not only creates the requested class attributes, but <em>prevents</em> the creation of any additional attributes on an instance.</p>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 3, "last_activity_date": 1575493447, "last_edit_date": 1575493447, "creation_date": 1575491273, "answer_id": 59184195, "question_id": 59184064, "link": "https://stackoverflow.com/questions/59184064/why-the-introduction-of-slots-was-made-possible-with-descriptors/59184195#59184195", "title": "Why the introduction of __slots__ was made possible with descriptors?", "body": "<p>The statements don't contradict themselves. The attributes defined by <code>__slots__</code> are descriptors on the created class <strong>and</strong> the implementation of that descriptor is written in C (assuming CPython).</p>\n\n<p>The descriptor class is called <code>member_descriptor</code> as can be seen by this example code:</p>\n\n<pre><code>import inspect\n\nclass Test:\n    __slots__ = 'a',\n    def __init__(self, a):\n        self.a = a\n\ntype(Test.a)                        # member_descriptor\ninspect.isdatadescriptor(Test.a)    # True\ninspect.ismemberdescriptor(Test.a)  # True\n</code></pre>\n\n<p>And a quick search on the CPython repository on GitHub revealed <a href=\"https://github.com/python/cpython/blob/v3.8.0/Objects/descrobject.c#L736-L771\" rel=\"nofollow noreferrer\">the C implementation of it (Link for CPython version 3.8.0)</a>.</p>\n\n<hr>\n\n<p>To go into a bit more detail:</p>\n\n<p>A Python class is essentially a <code>dict</code> with (a lot of) bells and whistles. On the other hand there are Python-C-classes that use a C-<code>struct</code> to implement a Python class. Such a C-struct is faster and requires (significantly) less memory than a dictionary even if it only contains Python objects (which is basically a C-array containing references to Python objects).</p>\n\n<p>To make it possible that \"normal\" Python classes could benefit from the faster access and the reduced memory footprint <code>__slots__</code> was introduced. A class with <code>__slots__</code> will be translated essentially to a C-struct. However to make it possible that the attribute lookup/setting/deletion map to the corresponding <code>struct</code> member some sort of translation layer (descriptors) is required. That translation layer for members defined in <code>__slots__</code> is <code>member_descriptor</code>. </p>\n\n<p>So when you look up the attribute on an instance of a <code>__slots__</code>-class you'll get a <code>member_descriptor</code> and that <code>member_descriptor</code> will know how to get/set/delete the member of the underlying C-<code>struct</code>.</p>\n"}], "owner": {"reputation": 1056, "user_id": 9652640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZGNE.png?s=128&g=1", "display_name": "Min-Soo Pipefeet", "link": "https://stackoverflow.com/users/9652640/min-soo-pipefeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 59184195, "answer_count": 2, "score": -1, "last_activity_date": 1575493447, "creation_date": 1575490638, "question_id": 59184064, "link": "https://stackoverflow.com/questions/59184064/why-the-introduction-of-slots-was-made-possible-with-descriptors", "title": "Why the introduction of __slots__ was made possible with descriptors?", "body": "<p>In <a href=\"http://python-history.blogspot.com/2010/06/inside-story-on-new-style-classes.html\" rel=\"nofollow noreferrer\">this blog post</a> from the series \"The History of Python\", Guido van Rossum states:</p>\n\n<blockquote>\n  <p>Another enhancement made possible with descriptors was the introduction of the __slots__ attribute on classes.</p>\n</blockquote>\n\n<p>I understand this sentence as: under the hood __slots__ is implemented by descriptors.</p>\n\n<p>But contrary to this my interpretation, Guido van Rossum writes a few lines later:</p>\n\n<blockquote>\n  <p>Underneath the covers, the implementation of this feature is done entirely in C and is highly efficient.</p>\n</blockquote>\n\n<p>So, __slots__ is not implemented by descriptors?</p>\n\n<p>But two sentences later, again he writes:</p>\n\n<blockquote>\n  <p>Not only was __slots__ an interesting application of descriptors, ...</p>\n</blockquote>\n\n<p>So, what's actually the case with __slots__ and descriptors?</p>\n\n<p>Is __slots__ implemented by descriptors or not? And if yes: how?</p>\n"}, {"tags": ["python", "pandas", "jupyter-notebook", "window"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7120148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab2683faedf970fdaed143bb893729b?s=128&d=identicon&r=PG&f=1", "display_name": "LeopoldButtersCrotch", "link": "https://stackoverflow.com/users/7120148/leopoldbutterscrotch"}, "edited": false, "score": 0, "creation_date": 1575494998, "post_id": 59184321, "comment_id": 104590190, "body": "<code>df = pd.DataFrame({&#39;Person&#39;: [&#39;Bob&#39;,&#39;Bob&#39;,&#39;Bob&#39;,&#39;Bob&#39;,&#39;Alvin&#39;,&#39;Steve&#39;,&#39;Steve&#39;,&#39;Steve&#39;,&#39;St&zwnj;&#8203;eve&#39;,&#39;Steve&#39;,&#39;Steve&#39;&zwnj;&#8203;,&#39;Steve&#39;]                      ,&#39;Time&#39;: [0,2,2,4,6,0,1,2,4,5,8,9]                      ,&#39;DesiredResult&#39;: [0,0,0,1,0,0,0,0,1,1,2,2]})  def fn(grp):     t0 = grp.iloc[0].Time     return (grp.Time &gt; t0 + 2).cumsum()  df[&#39;DesiredResult2&#39;] = df.groupby(&#39;Person&#39;).apply(fn).reset_index(level=0, drop=True)  df</code>  In this case each record for an individual person will increment once the 2 second window has been exceeded. This <i>almost</i>  works, thanks for your response"}], "tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 1, "last_activity_date": 1575491796, "creation_date": 1575491796, "answer_id": 59184321, "question_id": 59184062, "link": "https://stackoverflow.com/questions/59184062/increment-count-in-pandas-dataframe-when-values-change-and-when-time-exceeds-con/59184321#59184321", "title": "Increment count in Pandas dataframe when values change and when time exceeds condition", "body": "<p>I assume that you have not <em>DesiredResult</em> column.</p>\n\n<p>To create it, define the following function:</p>\n\n<pre><code>def fn(grp):\n    t0 = grp.iloc[0].Time\n    return (grp.Time &gt; t0 + 2).cumsum()\n</code></pre>\n\n<p>Then run:</p>\n\n<pre><code>df['DesiredResult'] = df.groupby('Person').apply(fn).reset_index(level=0, drop=True)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7120148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab2683faedf970fdaed143bb893729b?s=128&d=identicon&r=PG&f=1", "display_name": "LeopoldButtersCrotch", "link": "https://stackoverflow.com/users/7120148/leopoldbutterscrotch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1596318232, "creation_date": 1575490633, "last_edit_date": 1596318232, "question_id": 59184062, "link": "https://stackoverflow.com/questions/59184062/increment-count-in-pandas-dataframe-when-values-change-and-when-time-exceeds-con", "title": "Increment count in Pandas dataframe when values change and when time exceeds condition", "body": "<p>Each time the value of Person changes, reset count to 0. Increment count each time the time is more than 2 from the initial increment.</p>\n<pre><code>Person Time DesiredResult\nB      0    0\nB      2    0\nB      2    0\nB      4    1\nA      0    0\nS      0    0\nS      1    0\nS      2    0\nS      4    1\nS      8    2\n</code></pre>\n<p>code to generate the data frame:</p>\n<pre><code>df = pd.DataFrame({'Person': ['Bob','Bob','Bob','Bob','Alvin','Steve','Steve','Steve','Steve','Steve']\n                     ,'Time': [0,2,2,4,0,0,1,2,4,8]\n                     ,'DesiredResult': [0,0,0,1,0,0,0,0,1,2]})\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/45egh.png\" rel=\"nofollow noreferrer\">Image</a> attached at the link below</p>\n<p><img src=\"https://i.stack.imgur.com/45egh.png\" alt=\"https://i.stack.imgur.com/45egh.png\" /></p>\n"}, {"tags": ["python", "osmnx"], "owner": {"reputation": 442, "user_id": 5152718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-hmmQeDx5aGc/AAAAAAAAAAI/AAAAAAAAAYs/B7UM8FxXRqk/photo.jpg?sz=128", "display_name": "Awais Mushtaq", "link": "https://stackoverflow.com/users/5152718/awais-mushtaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575493272, "creation_date": 1575490568, "last_edit_date": 1575493272, "question_id": 59184047, "link": "https://stackoverflow.com/questions/59184047/osmnx-simplify-graph-does-not-remove-all-nodes-that-are-not-intersections", "title": "osmnx simplify_graph does not remove all nodes that are not intersections", "body": "<p>I am using Osmnx to simply my graph. I have tried with both strict True and false, but my graph still has intermediate nodes which are not interactions.</p>\n\n<pre><code>G3 = ox.graph_from_file( osm_simplified_file, bidirectional=False,simplify=False, retain_all=False, name='unnamed')\nG3 = ox.simplify_graph(G3, strict=False)\nG3 = ox.remove_isolated_nodes(G3);\nG3 = ox.get_largest_component(G3,strongly=True);\nox.plot_graph(G3,......)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/O2y0n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O2y0n.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/kpJcZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kpJcZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The road network after simplification still contains nodes with degree two (two neighbors).\nHow can I completely remove all intermediate nodes which have no intersections? </p>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1575493814, "post_id": 59184044, "comment_id": 104589801, "body": "Requests to improve working code belong on codereview.stackexchange.com. That said, not every task benefits from OOP. Also, nothing you are doing in this script will raise a <code>SyntaxError</code> that you can catch at run time in Python 3, and if you are using Python 2, you should be using <code>raw_input</code>, not <code>input</code>."}], "answers": [{"tags": [], "owner": {"reputation": 262, "user_id": 3068285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7cc08dd37aebe656b4ef08e0c2ad4ac?s=128&d=identicon&r=PG&f=1", "display_name": "WeRelic", "link": "https://stackoverflow.com/users/3068285/werelic"}, "is_accepted": false, "score": 0, "last_activity_date": 1575494361, "creation_date": 1575494361, "answer_id": 59184818, "question_id": 59184044, "link": "https://stackoverflow.com/questions/59184044/how-can-i-utilize-oop-with-this-basic-calculation-script/59184818#59184818", "title": "How can I utilize OOP with this basic calculation script?", "body": "<p>I don't think this program will benefit from using OOP.</p>\n\n<p>That said; I do have a few notes on style and lack of defensive programming.</p>\n\n<p>First; You do not need to wrap an <code>input</code> call with <code>str</code>, since it returns a string by default.</p>\n\n<p>Second; You have wrapped a couple of your <code>input</code> calls with <code>int</code>, which is perfectly fine, but these need to be wrapped in <code>try</code> blocks as any input that cannot be converted to an integer will raise a <code>ValueError</code>.</p>\n\n<p>Third; You should NEVER be handling a syntax error in that way. If you're getting syntax errors, fix the code, don't try to wrap it with a bandaid. </p>\n\n<p>Fourth; You do not need to write that many <code>print</code> statements. </p>\n\n<p>The entire print block could be rewritten as follows:</p>\n\n<pre><code>print('*****\\nPercentage Difference = ' + str(perc_difference) + 'Minutes Passed = ' + str(time_difference.total_seconds() / 60)) + \"\\n100% to 0% in ~' + str(round(discharge, 2)) + ' hours.\\n' +\n*****')\n</code></pre>\n\n<p>Or, in my opinion; the much more readable <a href=\"https://realpython.com/python-f-strings/\" rel=\"nofollow noreferrer\">fstring</a> variant:</p>\n\n<pre><code>msg = f\"*****\\nPercentage Difference = {perc_difference}\\nMinutes Passed = {time_difference.total_seconds() / 60}\\n100% to 0% in ~{round(discharge,2)} hours.\\n\"\n\nprint( msg )\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12482051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bc0370cf5738eba26d87fe62ea3c194?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Learner", "link": "https://stackoverflow.com/users/12482051/eric-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575494361, "creation_date": 1575490566, "last_edit_date": 1575492116, "question_id": 59184044, "link": "https://stackoverflow.com/questions/59184044/how-can-i-utilize-oop-with-this-basic-calculation-script", "title": "How can I utilize OOP with this basic calculation script?", "body": "<p>I am trying to write a simple calculator to calculate how fast my battery will drain from 100% to 0% by taking a time and percentage for start and subtracting it from the finish time and percentage. </p>\n\n<p>I was able to make a quick and dirty script to accomplish this, but I am learning OOP, and I would like some feedback on how to improve my code and implement OOP for this task. I added in some verbose print statements to make it easier for me to remember what everything is when I run it, and I intend to wrap it up into a simple bash script or maybe implement tkinter for GUI. </p>\n\n<p>Any thoughts or suggestions will help! My main environment is python 3, but I added the error handling for those who run with python2 because it doesn't like a preceding 0 in the time number.</p>\n\n<pre><code>from datetime import timedelta\n\n# Getting inputs for time and percentage\n\ntry:\n    start_time = str(input('What is the starting time in 24 hour time? Format: HHMM &gt;&gt; '))\n    start_time_hr = start_time[:2]\n    start_time_min = start_time[2:]\nexcept SyntaxError:\n    print('Try entering the time again without the preceding 0. \\n')\n    start_time = str(input('What is the starting time in 24 hour time? Format: HHMM &gt;&gt; '))\n    start_time_hr = start_time[0]\n    start_time_min = start_time[1:]\n\nstart_perc = int(input('What is the starting battery percentage? &gt;&gt; '))\n\ntry:\n    end_time = str(input('What is the finish time in 24 hour time? Format: HHMM &gt;&gt; '))\n    end_time_hr = end_time[:2]\n    end_time_min = end_time[2:]\nexcept SyntaxError:\n    print('Try entering the time again without the preceding 0. \\n')\n    end_time = str(input('What is the finish time in 24 hour time? Format: HHMM &gt;&gt; '))\n    end_time_hr = end_time[0]\n    end_time_min = end_time[1:]\n\nend_perc = int(input('What is the ending battery percentage? &gt;&gt; '))\n\n# Turning numbers into times for calculation\n\nstart = timedelta(hours=int(start_time_hr), minutes=int(start_time_min))\nend = timedelta(hours=int(end_time_hr), minutes=int(end_time_min))\n\n# Calculating and printing the results\n\nperc_difference = float(-(end_perc - start_perc))\ntime_difference = end - start\ntime_difference_minute = time_difference.total_seconds() / 60\ndischarge = (100.0 * time_difference_minute / perc_difference) / 60\n\nprint()\nprint()\nprint('*****')\nprint('Percentage Difference = ' + str(perc_difference))\nprint('Minutes Passed = ' + str(time_difference.total_seconds() / 60))\nprint('100% to 0% in ~' + str(round(discharge, 2)) + ' hours.')\nprint('*****')\nprint()\nprint()\nprint()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dictionary"], "comments": [{"owner": {"reputation": 371, "user_id": 1749032, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/10c89b7b22f075da9d893243748fd099?s=128&d=identicon&r=PG", "display_name": "outflanker", "link": "https://stackoverflow.com/users/1749032/outflanker"}, "edited": false, "score": 1, "creation_date": 1575490624, "post_id": 59184011, "comment_id": 104588548, "body": "Duplicate of: <a href=\"https://stackoverflow.com/questions/17839973/constructing-pandas-dataframe-from-values-in-variables-gives-valueerror-if-usi\">this</a>"}], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 10306927, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M6QXiUYrhIY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNY57u8tKElcddgL_AlKmFTI1H7hQ/mo/photo.jpg?sz=128", "display_name": "top bantz", "link": "https://stackoverflow.com/users/10306927/top-bantz"}, "edited": false, "score": 0, "creation_date": 1575490822, "post_id": 59184059, "comment_id": 104588631, "body": "That works perfectly thanks mate, why does adding the index stop the error? Why can&#39;t it just have set the index to 0 to begin with? Thanks again"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "reply_to_user": {"reputation": 507, "user_id": 10306927, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M6QXiUYrhIY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNY57u8tKElcddgL_AlKmFTI1H7hQ/mo/photo.jpg?sz=128", "display_name": "top bantz", "link": "https://stackoverflow.com/users/10306927/top-bantz"}, "edited": false, "score": 1, "creation_date": 1575491093, "post_id": 59184059, "comment_id": 104588751, "body": "@topbantz I believe is an implementation decision, can&#39;t say for sure."}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": true, "score": 3, "last_activity_date": 1575490610, "creation_date": 1575490610, "answer_id": 59184059, "question_id": 59184011, "link": "https://stackoverflow.com/questions/59184011/valueerror-when-trying-to-convert-dictionary-to-dataframe-pandas/59184059#59184059", "title": "ValueError when trying to convert Dictionary to DataFrame Pandas", "body": "<p>As the error message says you need to specify the index, so you can do the following:</p>\n\n<pre><code>import pandas as pd\n\nd = {'6DEC19': 0.61, '13DEC19': 0.58, '27DEC19': 0.63, '31JAN20': 0.66, '27MAR20': 0.69, '26JUN20': 0.71}\ndf = pd.DataFrame(d, index=[pd.Timestamp.now().floor('60min')])\n\nprint(df)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>                     6DEC19  13DEC19  27DEC19  31JAN20  27MAR20  26JUN20\n2019-12-04 17:00:00    0.61     0.58     0.63     0.66     0.69     0.71\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11903814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDLdCsW6UVvrx6SFYQJlnO8Xo7xJlYD-L_Y-ayqBA=k-s128", "display_name": "Chen-CN", "link": "https://stackoverflow.com/users/11903814/chen-cn"}, "is_accepted": false, "score": 1, "last_activity_date": 1575490969, "creation_date": 1575490969, "answer_id": 59184139, "question_id": 59184011, "link": "https://stackoverflow.com/questions/59184011/valueerror-when-trying-to-convert-dictionary-to-dataframe-pandas/59184139#59184139", "title": "ValueError when trying to convert Dictionary to DataFrame Pandas", "body": "<p>try this:</p>\n\n<pre><code>import pandas as pd\n\na = {'6DEC19': [0.61], '13DEC19': [0.58], '27DEC19': [0.6], '31JAN20': [0.66], '27MAR20': [0.69], '26JUN20': [0.71]}\n\ndf = pd.DataFrame.from_dict(a)\n\nprint(df)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14617220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgbBXiHZ2Vpoy6x6awMCO4I3ImCQmgWZsZImAur=k-s128", "display_name": "YzHan", "link": "https://stackoverflow.com/users/14617220/yzhan"}, "is_accepted": false, "score": -1, "last_activity_date": 1605073350, "creation_date": 1605073350, "answer_id": 64781080, "question_id": 59184011, "link": "https://stackoverflow.com/questions/59184011/valueerror-when-trying-to-convert-dictionary-to-dataframe-pandas/64781080#64781080", "title": "ValueError when trying to convert Dictionary to DataFrame Pandas", "body": "<p>try this</p>\n<pre><code>newDF = pd.DataFrame(yourDictionary.items())\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 10306927, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M6QXiUYrhIY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNY57u8tKElcddgL_AlKmFTI1H7hQ/mo/photo.jpg?sz=128", "display_name": "top bantz", "link": "https://stackoverflow.com/users/10306927/top-bantz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 59184059, "answer_count": 3, "score": 1, "last_activity_date": 1605073350, "creation_date": 1575490415, "question_id": 59184011, "link": "https://stackoverflow.com/questions/59184011/valueerror-when-trying-to-convert-dictionary-to-dataframe-pandas", "title": "ValueError when trying to convert Dictionary to DataFrame Pandas", "body": "<p>I have a dictionary like this:</p>\n\n<pre><code>{'6DEC19': 0.61, '13DEC19': 0.58, '27DEC19': 0.63, '31JAN20': 0.66, '27MAR20': 0.69, '26JUN20': 0.71}\n</code></pre>\n\n<p>I'm very simply trying to turn this in to a DataFrame with the columns being <code>6DEC19</code>, <code>13DEC19</code> etc, with the index then being set to the current date and hour, the code for which I would use as <code>pd.Timestamp.now().floor('60min')</code>.</p>\n\n<p>With the resulting <code>df</code> looking like this:</p>\n\n<pre><code>                    6DEC19  13DEC19  27DEC19  31JAN20  27MAR20  26JUN20\n2019-12-04 20:00:00 0.61    0.58     0.63     0.66     0.69     0.71\n</code></pre>\n\n<p>My first step would just be to turn the dict in to a dataframe and as far as I'm concerned this code should do the trick:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(dict)\n</code></pre>\n\n<p>But I get this error message: <code>ValueError: If using all scalar values, you must pass an index</code>.</p>\n\n<p>I really have no idea what the problem is here? Any suggestions would be great, and if anyone can fit the problem of changing the index in to the bargin so much the better. Cheers</p>\n"}, {"tags": ["python", "pysimplegui"], "comments": [{"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1575521616, "post_id": 59184005, "comment_id": 104596610, "body": "Why not use the code-point notation instead of using the names?  Have you tried to access the characters using that approach?  Or paste in the character themselves into the string?"}, {"owner": {"reputation": 107, "user_id": 9679438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd6a87ec3fda744c67d355ece26f29a?s=128&d=identicon&r=PG&f=1", "display_name": "Layla", "link": "https://stackoverflow.com/users/9679438/layla"}, "reply_to_user": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1575523609, "post_id": 59184005, "comment_id": 104597131, "body": "@MikeyB I tried both it does not work. Or I did it in a wrong way. Idk"}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1575585999, "post_id": 59184005, "comment_id": 104626605, "body": "They are not part of the Unicode definition from what I&#39;ve been able to find."}, {"owner": {"reputation": 107, "user_id": 9679438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd6a87ec3fda744c67d355ece26f29a?s=128&d=identicon&r=PG&f=1", "display_name": "Layla", "link": "https://stackoverflow.com/users/9679438/layla"}, "reply_to_user": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1575613690, "post_id": 59184005, "comment_id": 104633129, "body": "@MikeyB Yes it seems that way. Then is a there way to insert an image instead of text ?"}], "owner": {"reputation": 107, "user_id": 9679438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd6a87ec3fda744c67d355ece26f29a?s=128&d=identicon&r=PG&f=1", "display_name": "Layla", "link": "https://stackoverflow.com/users/9679438/layla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575490645, "creation_date": 1575490400, "last_edit_date": 1575490645, "question_id": 59184005, "link": "https://stackoverflow.com/questions/59184005/subscript-problem-for-greek-letters-in-python-print-function", "title": "Subscript problem for greek letters in python print function", "body": "<p>I am trying to create a GUI for a phyiscs project and I need subscripts of these things.\n<code>H_0</code>,\n<code>Omega_b</code>,\n<code>Omega_dm</code>,\n<code>Omega_\\Lambda</code>\n<code>Omega_r</code> \nin the form of latex </p>\n\n<p>My code is something like this </p>\n\n<pre><code>   import PySimpleGUI as sg\n\nsg.change_look_and_feel('Topanga')      \n\nlayout = [\n    [sg.Text('Enter the Parameters')],\n    [sg.Text(\"H\\N{SUBSCRIPT ZERO}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{LATIN SUBSCRIPT SMALL LETTER B}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{LATIN SUBSCRIPT SMALL LETTER R}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{GREEK SUBSCRIPT SMALL LETTER LAMDA}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{LATIN SUBSCRIPT SMALL LETTER DM}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"z\", size=(15, 1)), sg.InputText()],\n    [sg.Submit(), sg.Cancel()]\n]\n\nwindow = sg.Window('Simple data entry window', layout)\nevent, values = window.read()\nwindow.close()\nprint(event, values[0], values[1], values[2], values[3], values[4], values[5])  \n</code></pre>\n\n<p>The most interesting thing is that it can print letters such as <code>M</code> or <code>R</code> but it cannot print <code>B</code> ?? Or It can print <code>phi</code> but it cannot print <code>lambda</code> ? </p>\n\n<p>You can try this to see that this combination works.</p>\n\n<pre><code>import PySimpleGUI as sg\n\nsg.change_look_and_feel('Topanga')      \n\nlayout = [\n    [sg.Text('Enter the Parameters')],\n    [sg.Text(\"H\\N{SUBSCRIPT ZERO}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{LATIN SUBSCRIPT SMALL LETTER M}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{LATIN SUBSCRIPT SMALL LETTER R}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"\\N{GREEK CAPITAL LETTER OMEGA}\\N{GREEK SUBSCRIPT SMALL LETTER PHI}\", size=(15, 1)), sg.InputText()],\n    [sg.Text(\"z\", size=(15, 1)), sg.InputText()],\n    [sg.Submit(), sg.Cancel()]\n]\n\nwindow = sg.Window('Simple data entry window', layout)\nevent, values = window.read()\nwindow.close()\nprint(event, values[0], values[1], values[2], values[3], values[4], values[5])  \n</code></pre>\n\n<p>Please help,\nThanks</p>\n"}, {"tags": ["python", "pandas", "window-functions", "rolling-computation"], "comments": [{"owner": {"reputation": 1, "user_id": 12481860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e9OeUbjIt1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reFztoG1IpCWGVFMDu66f_lJbnTLA/photo.jpg?sz=128", "display_name": "Faizaan Ali", "link": "https://stackoverflow.com/users/12481860/faizaan-ali"}, "edited": false, "score": 0, "creation_date": 1575572108, "post_id": 59183946, "comment_id": 104620927, "body": "I think this somewhat approaching the right direction.   &lt;br/&gt; Would love any feedback!  &lt;br/&gt;       <code>newcol = df.groupby(&#39;userId&#39;)[&#39;value&#39;].rolling(20,1).apply(lambda x: np.partition(x,10).mean())</code>   <code>df[&#39;roll&#39;] = newcol.reset_index(level=0, drop=True)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12481860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e9OeUbjIt1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reFztoG1IpCWGVFMDu66f_lJbnTLA/photo.jpg?sz=128", "display_name": "Faizaan Ali", "link": "https://stackoverflow.com/users/12481860/faizaan-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1575656977, "creation_date": 1575656977, "answer_id": 59218511, "question_id": 59183946, "link": "https://stackoverflow.com/questions/59183946/find-moving-average-of-the-smallest-n-values-in-m-sized-window/59218511#59218511", "title": "Find moving average of the smallest n values in m sized window", "body": "<p>Figured it out. Posting in case anyone else is in a similar situation. I defined my own function and then simply used rolling.apply(). Ended up being fairly straightforward.</p>\n\n<p>First, I defined the function that would perform the behaviour described in the post above.</p>\n\n<pre><code>def gm(arr):\n    if (arr.size &gt; 10):\n        x = np.partition(arr, 9).mean()\n    else:\n        x = arr.mean()\n    return x\n</code></pre>\n\n<p>Then, rolling.apply() worked its magic:</p>\n\n<pre><code>newcol = df.groupby('userId')['value'].rolling(20,1).apply(lambda x: gm(x), raw=True)\ndf['roll'] = newcol.reset_index(level=0, drop=True)\n</code></pre>\n\n<p>I am still not sure about the indexing at the end but the results seem to be what I want.</p>\n"}], "owner": {"reputation": 1, "user_id": 12481860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e9OeUbjIt1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reFztoG1IpCWGVFMDu66f_lJbnTLA/photo.jpg?sz=128", "display_name": "Faizaan Ali", "link": "https://stackoverflow.com/users/12481860/faizaan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1575656977, "creation_date": 1575490134, "last_edit_date": 1575490226, "question_id": 59183946, "link": "https://stackoverflow.com/questions/59183946/find-moving-average-of-the-smallest-n-values-in-m-sized-window", "title": "Find moving average of the smallest n values in m sized window", "body": "<p>I have data on the values of personal stocks like this:</p>\n\n<pre><code>UserId Stock Value    Time\n1        APL  20  '2019-01-01'\n1        MCR  40  '2019-01-01'\n1        ADX  60  '2019-01-01'\n3        AGL  10  '2019-01-01'\n...\n</code></pre>\n\n<p>I have to group by users and for each stock x, I have to find the average of the value the 10 most valuable stocks in that user's 20 most recent stocks before stock x. Thus, I first group by the userId, then iterate through each stock x doing the following: select the user's 20 most recent stocks before stock x, further select the 10 most valuable stocks from that window, take the average and add it on in a new column for stock x. My dataset would look something like this after:</p>\n\n<pre><code>UserId Stock Value    Time    MovingAverage\n1        APL  20  '2019-01-01'     20\n1        MCR  40  '2019-01-01'     30\n1        ADX  60  '2019-01-01'     40\n3        AGL  10  '2019-01-01'     10\n...\n</code></pre>\n\n<p>So far, I have been trying to use rolling in Python as follows:</p>\n\n<pre><code>df = df.sort_values(['userId','time'], ascending=['true','false']) \ndf['roll'] = df.groupby('userId')['Value'].transform(lambda x: x.rolling(20,1).mean())\n</code></pre>\n\n<p>I can't figure out how to get the mean of the 10 highest values in a window! I am not against using another technique than rolling, it was just what seemed like the most popular method. </p>\n\n<p>Another issue is that some stocks will have less than 20 stocks before them, but I think using rolling(20,1) mitigates that issue. However, in the case that there are less than 10 stocks e.g 8 stocks, I need to just get the average of the last 8 stocks.</p>\n"}, {"tags": ["python", "python-3.x", "pygame"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575490464, "post_id": 59183941, "comment_id": 104588467, "body": "2 tiles are equal, if they have the same image. In your code 2 equal tiles share the same image object. Compare the <code>.image</code> attribute of the tiles. e.g. if there is a <code>tileA</code> and a <code>tileB</code>, then they are equal <code>if tileA.image == tileB.image:</code>"}, {"owner": {"reputation": 59, "user_id": 12465390, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AFZnDFsH9w4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDfLesqeUTfgMHFYhc-TMVnuQ6Fw/photo.jpg?sz=128", "display_name": "Hu Jack", "link": "https://stackoverflow.com/users/12465390/hu-jack"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575490699, "post_id": 59183941, "comment_id": 104588577, "body": "what should tileA.image and tileB.image equal to?"}, {"owner": {"reputation": 59, "user_id": 12465390, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AFZnDFsH9w4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDfLesqeUTfgMHFYhc-TMVnuQ6Fw/photo.jpg?sz=128", "display_name": "Hu Jack", "link": "https://stackoverflow.com/users/12465390/hu-jack"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575491990, "post_id": 59183941, "comment_id": 104589099, "body": "Ummmmmmm hello?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1616924423, "post_id": 59183941, "comment_id": 118150045, "body": "Is the issue solved?"}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1575494104, "last_edit_date": 1575494104, "creation_date": 1575492538, "answer_id": 59184495, "question_id": 59183941, "link": "https://stackoverflow.com/questions/59183941/count-images-number-and-compared-the-similarity/59184495#59184495", "title": "Count images number and compared the similarity", "body": "<p>Remove the attribute <code>self.count</code> from  the class <code>Tile</code>. It is not needed:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Tile:\n  # [...]\n\n  def draw(self):\n      x, y, i = 0, 0, 0\n      if self.flip == False:\n         screen.blit(pygame.image.load('./images/bg.jpg'),(self.pos_x,self.pos_y))\n      elif self.flip == True:\n         screen.blit(self.image,(self.pos_x,self.pos_y))\n</code></pre>\n\n<hr>\n\n<p>2 tiles are equal, if they have the same image. In your code 2 equal tiles share the same image object. Compare the <code>.image</code> attribute of the tiles. e.g. if there is a <code>tileA</code> and a <code>tileB</code>, then they are equal if <code>tileA.image == tileB.image</code>.</p>\n\n<p>Add a list of the flipped tiles to the class <code>Game</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Game:\n\n   def __init__(self, surface):\n      # [...]\n\n      self.flipped = []\n</code></pre>\n\n<p>If the mouse button is pressed, then find the tile which was \"clicked\" and add it to to flipped tiles:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>elif event.type == pygame.MOUSEBUTTONUP:\n\n    for row in self.grid:\n        for tile in row:\n            if tile.rect.collidepoint(event.pos) and not tile.flip:\n                tile.flip = True\n                self.flipped.append(tile)\n</code></pre>\n\n<p>If the number of tile in <code>self.flipped</code> is even (<code>len(self.flipped) % 2 == 0</code>), then compare the last 2 tiles in the list (<code>self.flipped[-1], self.flipped[-2]</code>). Keep equal tiles. If the tiles are not equal (<code>tileA.image != tileB.image</code>), then remove them from <code>self.flipped</code> and flip them back:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if len(self.flipped) &gt; 0 and len(self.flipped) % 2 == 0:\n    tileA = self.flipped[-1]\n    tileB = self.flipped[-2] \n    if tileA.image != tileB.image:\n        tileA.flip = False\n        tileB.flip = False\n        self.flipped = self.flipped[:-2]\n</code></pre>\n\n<p>That all can be applied to <code>handle_events</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Game:\n\n   def __init__(self, surface):\n      # [...]\n\n      self.flipped = []\n\n\n  # [...]\n\n  def handle_events(self):\n         events = pygame.event.get()\n         for event in events:\n            if event.type == pygame.QUIT:\n               self.close_clicked = True\n\n            elif event.type == pygame.MOUSEBUTTONUP:\n\n               if len(self.flipped) &gt; 0 and len(self.flipped) % 2 == 0:\n                  tileA = self.flipped[-1]\n                  tileB = self.flipped[-2] \n                  if tileA.image != tileB.image:\n                     tileA.flip = False\n                     tileB.flip = False\n                     self.flipped = self.flipped[:-2]\n\n               for row in self.grid:\n                  for tile in row:\n                     if tile.rect.collidepoint(event.pos) and not tile.flip:\n                        tile.flip = True\n                        self.flipped.append(tile)\n</code></pre>\n\n<p>Note, the tiles do not flip back after a time span, but the flip back when on a new tile is clicked.</p>\n\n<hr>\n\n<p>If you want that the tiles automatically flip back after a time span (e.g. 2 seconds), then I recommend to use a timer <a href=\"https://www.pygame.org/docs/ref/event.html\" rel=\"nofollow noreferrer\">event</a>.<br>\nA timer can be started by <a href=\"https://www.pygame.org/docs/ref/time.html#pygame.time.set_timer\" rel=\"nofollow noreferrer\"><code>pygame.time.set_timer()</code></a>. It can be stopped by passing time 0 to <code>pygame.time.set_timer()</code>. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Game:\n   def __init__(self, surface):\n      # [...]\n      self.flipped = []\n\n   def handle_events(self):\n         timer_id = pygame.USEREVENT + 1\n\n         events = pygame.event.get()\n         for event in events:\n            if event.type == pygame.QUIT:\n               self.close_clicked = True\n            elif event.type == timer_id:\n               pygame.time.set_timer(timer_id, 0)\n               if len(self.flipped) &gt; 0 and len(self.flipped) % 2 == 0:\n                  tileA, tileB = self.flipped[-1], self.flipped[-2] \n                  if tileA.image != tileB.image:\n                     tileA.flip, tileB.flip = False, False\n                     self.flipped = self.flipped[:-2]\n\n            elif event.type == pygame.MOUSEBUTTONUP:\n               if len(self.flipped) &gt; 0 and len(self.flipped) % 2 == 0:\n                  tileA, tileB = self.flipped[-1], self.flipped[-2] \n                  if tileA.image != tileB.image:\n                     tileA.flip, tileB.flip = False, False\n                     self.flipped = self.flipped[:-2]           \n               for row in self.grid:\n                  for tile in row:\n                     if tile.rect.collidepoint(event.pos) and not tile.flip:\n                        tile.flip = True\n                        self.flipped.append(tile)\n\n               if len(self.flipped) &gt; 0 and len(self.flipped) % 2 == 0:\n                  pygame.time.set_timer(timer_id, 2000) # 2 seconds\n               else:\n                  pygame.time.set_timer(timer_id, 0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/WEdJR.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WEdJR.gif\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 59, "user_id": 12465390, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AFZnDFsH9w4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDfLesqeUTfgMHFYhc-TMVnuQ6Fw/photo.jpg?sz=128", "display_name": "Hu Jack", "link": "https://stackoverflow.com/users/12465390/hu-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1616924431, "creation_date": 1575490099, "last_edit_date": 1616924431, "question_id": 59183941, "link": "https://stackoverflow.com/questions/59183941/count-images-number-and-compared-the-similarity", "title": "Count images number and compared the similarity", "body": "<p>I am coding a game called \"Memory\", which contains 8 pairs of images (16 images) in random order. When the game started, 16 of them have to show the same background images. After players click any tile, the tile flip from background images to foreground images. If two foreground images are the same, they stay. If two foreground images are different, they vanish in a few seconds.\nFor now, I have no idea how to check their similarities. I try to use self.count to count the flipped images number, but cannot work. Please help me. Thank you very very much!</p>\n\n<pre><code>import pygame\nimport random\nimport time\n\nscreen = pygame.display.set_mode((525, 435))\n\ndef main():\n   pygame.init()\n   pygame.display.set_mode((535, 435))\n   pygame.display.set_caption('Memory')\n   w_surface = pygame.display.get_surface() \n   game = Game(w_surface)\n   game.play()\n   pygame.quit()\n\nclass Game:\n\n   def __init__(self, surface):\n      self.surface = surface\n      self.bg_color = pygame.Color('black')\n      self.FPS = 10\n      self.game_Clock = pygame.time.Clock()\n      self.close_clicked = False\n      self.continue_game = True\n      Tile.set_surface(self.surface)\n      self.grid_size = 4\n      self.grid = []\n      self.score = 0\n      imgnames = ['./images/' + str(i) + '.jpg' for i in range(1,9)]\n      self.images = [pygame.image.load(name) for name in imgnames]\n      self.shuffle = self.images + self.images\n      random.shuffle(self.shuffle)\n      self.create_grid(self.grid_size)\n\n   def create_grid(self, grid_size):\n      for row_num in range(grid_size):\n         new_row = self.create_row(row_num, grid_size)\n         self.grid.append(new_row)     \n\n   def create_row(self, row_num, size):\n      tile_height = self.surface.get_height() // size\n      tile_width = self.surface.get_width() // (size+1)\n      one_row = [ ]\n      for col_num in range(size):\n         y = row_num * tile_height + 5\n         x = col_num * tile_width + 5\n         i = col_num*size + row_num\n         one_tile = Tile(x, y, tile_width, tile_height, self.shuffle[i], self.surface)\n         one_row.append(one_tile)\n      return one_row\n\n   def play(self):\n      while not self.close_clicked:\n         self.handle_events()\n         self.draw()\n         if self.continue_game:\n            self.update()\n            self.decide_continue()\n         self.game_Clock.tick(self.FPS)\n\n   def handle_events(self):\n         events = pygame.event.get()\n         for event in events:\n            if event.type == pygame.QUIT:\n               self.close_clicked = True\n            elif event.type == pygame.MOUSEBUTTONUP:\n               position = event.pos\n               for row in self.grid:\n                  for tile in row:\n                     if tile.rect.collidepoint(position):\n                        tile.flip = True\n\n   def draw(self):\n      self.surface.fill(self.bg_color)\n      self.draw_score()\n      for row in self.grid:\n         for tile in row:\n            tile.draw()\n      pygame.display.update()\n\n   def update(self):\n      self.score = pygame.time.get_ticks() // 1000\n\n   def decide_continue(self):\n      pass\n\n   def draw_score(self):\n      score_string = str(self.score)    \n      score_font = pygame.font.SysFont('', 48)\n      score_fg_color = pygame.Color('white')\n      score_image = score_font.render(score_string, True, score_fg_color)\n      self.surface.blit(score_image, (430,10))\n\nclass Tile:\n   def __init__(self, pos_x, pos_y, tile_numx, tile_numy, image, surface):\n      self.pos_x = pos_x\n      self.pos_y = pos_y\n      self.numx = tile_numx\n      self.numy = tile_numy\n      self.image = image\n      self.surface = surface\n      self.flip = False\n      self.count = 0\n      self.rect = self.image.get_rect(topleft = (self.pos_x,self.pos_y))\n\n   @classmethod\n   def set_surface(cls, surface):\n      cls.surface = surface   \n\n   def draw(self):\n      x = 0\n      y = 0\n      i = 0\n      if self.flip == False:\n         screen.blit(pygame.image.load('./images/bg.jpg'),(self.pos_x,self.pos_y))\n      elif self.flip == True:\n         while self.count &lt; 2:\n            screen.blit(self.image,(self.pos_x,self.pos_y))\n            self.count + 1\n\n\n\nmain()\n</code></pre>\n"}]