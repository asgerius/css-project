[{"tags": ["python", "animation", "recursion", "tkinter", "scheduling"], "answers": [{"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 1, "last_activity_date": 1495670836, "creation_date": 1495670836, "answer_id": 44170304, "question_id": 44170232, "link": "https://stackoverflow.com/questions/44170232/what-are-the-limits-on-recursive-tkinter-calls/44170304#44170304", "title": "What are the limits on recursive tkinter calls?", "body": "<p>There is no limit in doing it ths way -\nit is not quite \"recursive\" - you just crete one single event to call the same function, each time the function runs.</p>\n\n<p>If the function where actually calling itself directly, without resort to scheduing using the Tkinter (ir other framework) event system - then you'd be limited to the default recursion limit of cPython which is 1000 calls. \nBut in this way, after the call to  <code>root.after</code> resolves, yoru functina ctually ends, (and return an implicit \"None\") - it is the tkinter event loop which will make the next call to it, not the function itself.</p>\n"}, {"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 2, "last_activity_date": 1495672507, "creation_date": 1495672507, "answer_id": 44170511, "question_id": 44170232, "link": "https://stackoverflow.com/questions/44170232/what-are-the-limits-on-recursive-tkinter-calls/44170511#44170511", "title": "What are the limits on recursive tkinter calls?", "body": "<p>Using after this way isn't recursion. You're simply pushing jobs onto a queue. There is no limit because you're only adding one item to the queue for each item that is pulled off of the queue. Assuming this is the only place you do this, and you only start it once, the queue never grows bigger than one. </p>\n"}], "owner": {"reputation": 881, "user_id": 6167478, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0122aabb2f64de9319393752a50f9284?s=128&d=identicon&r=PG", "display_name": "Victor Domingos", "link": "https://stackoverflow.com/users/6167478/victor-domingos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 44170511, "answer_count": 2, "score": 0, "last_activity_date": 1495672507, "creation_date": 1495670207, "question_id": 44170232, "link": "https://stackoverflow.com/questions/44170232/what-are-the-limits-on-recursive-tkinter-calls", "title": "What are the limits on recursive tkinter calls?", "body": "<p>On my quest to learn Python and tkinter, I have found sometimes a pattern like this, which I have just extracted from a book on tkinter:</p>\n\n<pre><code>def manage_periodic_updates_during_play(self):\n    self.update_clock()\n    self.update_seek_bar()\n    self.root.after(1000, self.manage_periodic_updates_during_play)\n</code></pre>\n\n<p>I understand that this is a way to repeat some steps in a recursive way, after a specified time, and I have even used before this kind of pattern in a project. But I wonder if there a limit to the number of times this recursive calls can be made. I mean, probably Python is keeping some kind of reference about which function or method called wich. So, maybe in a few hundred or a few thousand cycles we could hit that limit. </p>\n\n<p>Is there such a limit we should tace into consideration in cases like this? If so, what would be considered a good practice? How can we know how many recursive calls will be allowed and how to avoid the app becoming unresponsive or returning some error?</p>\n"}, {"tags": ["python", "arrays", "numpy", "functional-programming"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495670319, "post_id": 44170231, "comment_id": 75356258, "body": "&quot;I&#39;d really like to adopt a more functional approach and define a function at the element level that I can vectorise (using <code>np.vectorize</code>)&quot; - no, no, no! <code>np.vectorize</code> is not efficient. It only gets you the behavior, not the speed. It&#39;s basically a wrapper around a <code>for</code> loop."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1495670405, "post_id": 44170231, "comment_id": 75356287, "body": "People keep falling into that trap because they hear &quot;you should vectorize your code&quot;, see <code>np.vectorize</code>, and think, &quot;hey, that sounds like it solves my problem!&quot; They don&#39;t get far enough into the docs to see &quot;The vectorize function is provided primarily for convenience, not for performance. The implementation is essentially a for loop.&quot;"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495670479, "post_id": 44170231, "comment_id": 75356310, "body": "When people say you should vectorize your code, they mean something completely different, something that unfortunately doesn&#39;t appear in the first few Google hits for <code>numpy vectorize</code>."}, {"owner": {"reputation": 7546, "user_id": 4137061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-B5hWEFGNVeM/AAAAAAAAAAI/AAAAAAAAG10/u9gOJE-KuHg/photo.jpg?sz=128", "display_name": "Thomas Kimber", "link": "https://stackoverflow.com/users/4137061/thomas-kimber"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1495670668, "post_id": 44170231, "comment_id": 75356342, "body": ":) ahh I see - that sounds very familiar indeed - ok, so that helps put some of my misunderstandings into context - so thankyou for that - can you recommend any deeper and more appropriate approaches?"}, {"owner": {"reputation": 7546, "user_id": 4137061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-B5hWEFGNVeM/AAAAAAAAAAI/AAAAAAAAG10/u9gOJE-KuHg/photo.jpg?sz=128", "display_name": "Thomas Kimber", "link": "https://stackoverflow.com/users/4137061/thomas-kimber"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495671041, "post_id": 44170231, "comment_id": 75356438, "body": "Having taken your advice and googling further, I find reference to <code>ufuncs</code> which might be promising - as per here: <a href=\"https://docs.scipy.org/doc/numpy/reference/ufuncs.html#methods\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/ufuncs.html#methods</a> ) - I&#39;ll research a little further and attach onto here for reference."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495671243, "post_id": 44170231, "comment_id": 75356476, "body": "Look for operations that take entire arrays and operate elementwise or along specified axes. For example, <code>sum</code> can compute all sums along an axis of an array in one call, avoiding the overhead of a Python loop."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1495674175, "post_id": 44170538, "comment_id": 75357201, "body": "The <code>keepdims</code> parameter will let you skip the reshape."}], "tags": [], "owner": {"reputation": 423, "user_id": 7782213, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RaQQ_6Zx4LY/AAAAAAAAAAI/AAAAAAAAAAo/C_wAEa046d4/photo.jpg?sz=128", "display_name": "Efron Licht", "link": "https://stackoverflow.com/users/7782213/efron-licht"}, "is_accepted": true, "score": 4, "last_activity_date": 1495673342, "last_edit_date": 1495673342, "creation_date": 1495672697, "answer_id": 44170538, "question_id": 44170231, "link": "https://stackoverflow.com/questions/44170231/functional-programming-numpy-vectorizable-function-to-create-an-expected-values/44170538#44170538", "title": "Functional Programming: Numpy Vectorizable Function to Create an Expected Values Array", "body": "<p>You can do this with numpy built-ins using <a href=\"https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">broadcasting.</a>  Broadcasting allows you to add together two arrays of different shapes without making excessive copies or looping excessively.  </p>\n\n<p>We can solve your problem by creating two vectors representing the row and column sums respectively,  and 'multiplying' them together, which will broadcast them into a correctly sized and shaped array.</p>\n\n<p>The best introduction to this topic I know of is the talk <a href=\"https://www.youtube.com/watch?v=EEUXKG97YRw\" rel=\"nofollow noreferrer\">Losing Your Loops: Fast Numerical Computation with Numpy by Jake Vanderplass.</a> It contains visual examples that I find essential for wrapping your head around broadcasting.</p>\n\n<p>Here's a simple example:</p>\n\n<p>IN</p>\n\n<pre><code>import numpy as np\na = np.arange(3)\nb = np.reshape(np.arange(3), [3, 1])\nprint('a = ', a)\nprint('b = ')\nprint(b)\nprint('a+b = ')\nprint(a+b)\n</code></pre>\n\n<p>OUT:</p>\n\n<pre><code>a = [0 1 2]\nb =\n[[0]\n [1]\n [2]]\na+b =\n[[0 1 2]\n [1 2 3]\n [2 3 4]]\n</code></pre>\n\n<p>We can solve your problem by creating two vectors representing the row and column sums respectively 'multiplying' them together, broadcasting them into a correctly sized and shaped array.</p>\n\n<pre><code>import numpy as np\ndef gen_expected(array: np.ndarray):\n    col_sums = (np.sum(array, axis=0))\n    row_sums = np.sum(array, axis=1)\n    np.reshape(row_sums, [len(row_sums), 1])\n    return (col_sums * row_sums)  / np.sum(array)\n# NOTE: this result might be transposed! Check it yourself!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 2, "last_activity_date": 1495688789, "last_edit_date": 1495688789, "creation_date": 1495688420, "answer_id": 44172599, "question_id": 44170231, "link": "https://stackoverflow.com/questions/44170231/functional-programming-numpy-vectorizable-function-to-create-an-expected-values/44172599#44172599", "title": "Functional Programming: Numpy Vectorizable Function to Create an Expected Values Array", "body": "<p>The function <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chi2_contingency.html\" rel=\"nofollow noreferrer\"><code>scipy.stats.chi2_contingency</code></a> will compute the <code>expected</code> array for you. For example,</p>\n\n<pre><code>In [303]: from scipy.stats import chi2_contingency\n\nIn [304]: a = np.array([[3, 5, 10], [2, 4, 16]])\n\nIn [305]: chi2, p, dof, expected = chi2_contingency(a)\n\nIn [306]: expected\nOut[306]: \narray([[  2.25,   4.05,  11.7 ],\n       [  2.75,   4.95,  14.3 ]])\n</code></pre>\n\n<p>If you only want the <code>expected</code> array, you can use <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.contingency.expected_freq.html\" rel=\"nofollow noreferrer\"><code>scipy.stats.contingency.expected_freq</code></a>:</p>\n\n<pre><code>In [307]: from scipy.stats.contingency import expected_freq\n\nIn [308]: expected_freq(a)\nOut[308]: \narray([[  2.25,   4.05,  11.7 ],\n       [  2.75,   4.95,  14.3 ]])\n</code></pre>\n\n<p>To see how <code>expected_freq</code> computes the result, you can see the source code here: <a href=\"https://github.com/scipy/scipy/blob/master/scipy/stats/contingency.py\" rel=\"nofollow noreferrer\">https://github.com/scipy/scipy/blob/master/scipy/stats/contingency.py</a></p>\n\n<p>You'll see that the code is vectorized; the only explicit loop is over the number of dimensions of the input array (in the function <code>margins(a)</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1495699167, "last_edit_date": 1495699167, "creation_date": 1495698761, "answer_id": 44175211, "question_id": 44170231, "link": "https://stackoverflow.com/questions/44170231/functional-programming-numpy-vectorizable-function-to-create-an-expected-values/44175211#44175211", "title": "Functional Programming: Numpy Vectorizable Function to Create an Expected Values Array", "body": "<p>So with a sample array:</p>\n\n<pre><code>In [147]: arr = np.arange(16).reshape(4,4)\n</code></pre>\n\n<p>and your code:</p>\n\n<pre><code>In [148]: def gen_expected(a_array):\n     ...:     new_array = np.zeros(a_array.shape,dtype=float)\n     ...:     for ri,r in enumerate(a_array):\n     ...:         for ci,c in enumerate(a_array.T):\n     ...:             new_array[ri,ci]=(c.sum()*r.sum()/a_array.sum())\n     ...:     return new_array\n     ...: \nIn [149]: gen_expected(arr)\nOut[149]: \narray([[  1.2       ,   1.4       ,   1.6       ,   1.8       ],\n       [  4.4       ,   5.13333333,   5.86666667,   6.6       ],\n       [  7.6       ,   8.86666667,  10.13333333,  11.4       ],\n       [ 10.8       ,  12.6       ,  14.4       ,  16.2       ]])\n</code></pre>\n\n<p>The only element level, or scalar, step in your function is a 3 term product and division:</p>\n\n<pre><code>In [151]: def chi0(csum, rsum, asum):\n     ...:     return csum*rsum/asum\n</code></pre>\n\n<p>which we can 'wrap' in vectorize:</p>\n\n<pre><code>In [152]: fchi0 = np.vectorize(chi0, otypes=[float])\n</code></pre>\n\n<p><code>vectorize</code> does a nice job of broadcasting arrays against each other, and feeding the results to your function.  In effect it can perform the row and column enumerations.  We just need to take the relevant sums:</p>\n\n<pre><code>In [153]: fchi0(arr.sum(axis=1,keepdims=True), arr.sum(axis=0,keepdims=True), arr.sum())\nOut[153]: \narray([[  1.2       ,   1.4       ,   1.6       ,   1.8       ],\n       [  4.4       ,   5.13333333,   5.86666667,   6.6       ],\n       [  7.6       ,   8.86666667,  10.13333333,  11.4       ],\n       [ 10.8       ,  12.6       ,  14.4       ,  16.2       ]])\n</code></pre>\n\n<p>But with those 3 sums, I don't need to use the <code>vectorize</code> intermediary:</p>\n\n<pre><code>In [154]: arr.sum(axis=1,keepdims=True)* arr.sum(axis=0,keepdims=True) / arr.sum()\n\nOut[154]: \narray([[  1.2       ,   1.4       ,   1.6       ,   1.8       ],\n       [  4.4       ,   5.13333333,   5.86666667,   6.6       ],\n       [  7.6       ,   8.86666667,  10.13333333,  11.4       ],\n       [ 10.8       ,  12.6       ,  14.4       ,  16.2       ]])\n\nIn [155]: arr.sum(axis=1,keepdims=True), arr.sum(axis=0,keepdims=True), arr.sum()\nOut[155]: \n(array([[ 6],\n        [22],\n        [38],\n        [54]]), \n array([[24, 28, 32, 36]]), \n 120)\n</code></pre>\n\n<p>The key to the broadcasting is creating a column vector, a row vector, and total sum (scalar).  One is (4,1) in shape, the other (1,4).  The <code>keepdims</code> parameter keeps the 2d shape.  Without it we'd have to add a dimension to the first.  (4,) broadcasts to (1,4), but to (4,1) requires explicit ok.</p>\n\n<p>When generating indices, e.g. <code>np.arange(4)</code>, <code>np.ix_</code> is a handy tool</p>\n\n<pre><code>In [156]: np.ix_(arr.sum(axis=1), arr.sum(axis=0))\nOut[156]: \n(array([[ 6],\n        [22],\n        [38],\n        [54]]), array([[24, 28, 32, 36]]))\n</code></pre>\n\n<p>And before <code>keepdims</code> was added, adding dimensions with <code>np.newaxis</code> was - and still is - a favorite:</p>\n\n<pre><code>In [157]: arr.sum(axis=1)[:,None] * arr.sum(axis=0) / arr.sum()\nOut[157]: \narray([[  1.2       ,   1.4       ,   1.6       ,   1.8       ],\n       [  4.4       ,   5.13333333,   5.86666667,   6.6       ],\n       [  7.6       ,   8.86666667,  10.13333333,  11.4       ],\n       [ 10.8       ,  12.6       ,  14.4       ,  16.2       ]])\n</code></pre>\n\n<p>More generally <code>ix_</code> is recommended when generating indices from ranges; </p>\n\n<pre><code>In [160]: I,J = np.ix_(range(10,40,10), range(1,5))\nIn [161]: I+J\nOut[161]: \narray([[11, 12, 13, 14],\n       [21, 22, 23, 24],\n       [31, 32, 33, 34]])\n</code></pre>\n"}], "owner": {"reputation": 7546, "user_id": 4137061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-B5hWEFGNVeM/AAAAAAAAAAI/AAAAAAAAG10/u9gOJE-KuHg/photo.jpg?sz=128", "display_name": "Thomas Kimber", "link": "https://stackoverflow.com/users/4137061/thomas-kimber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 44170538, "answer_count": 3, "score": 0, "last_activity_date": 1495699167, "creation_date": 1495670189, "question_id": 44170231, "link": "https://stackoverflow.com/questions/44170231/functional-programming-numpy-vectorizable-function-to-create-an-expected-values", "title": "Functional Programming: Numpy Vectorizable Function to Create an Expected Values Array", "body": "<p>I want to run a chi-squared statistical test against some categorical data counts - but to do that, I need to calculate the expected values for each cell of an array matching my observed results array. </p>\n\n<p>The pseudo code for the content of a each element e in the array is</p>\n\n<pre><code>e = column_sum * row_sum / total_sum\n</code></pre>\n\n<p>I've written a function that will convert an array into its expected-values counterpart:</p>\n\n<pre><code>def gen_expected(a_array):\n    new_array = np.zeros(a_array.shape,dtype=float)\n    for ri,r in enumerate(a_array):\n        for ci,c in enumerate(a_array.T):\n            new_array[ri,ci]=(c.sum()*r.sum()/a_array.sum())\n    return new_array\n</code></pre>\n\n<p>This works well enough, but I'd really like to adopt a more functional approach and define a function at the element level that I can vectorise (using <code>np.vectorize</code>) and apply without performing any potentially expensive loops in code. </p>\n\n<p>My problem is that the information required at element level isn't enough to generate the required output - I'm trying to figure out how to access the aggregate sum values from within the (presumably) element-level function - is this simply not possible, or is there a functional pattern I'm not yet aware of that fits this type of aggregate-reliant condition? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1495670247, "post_id": 44170157, "comment_id": 75356244, "body": "Color me clueless, but what module is <code>core</code> from?"}, {"owner": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "reply_to_user": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1495670432, "post_id": 44170157, "comment_id": 75356296, "body": "A module made by me. It is in the same directory as <code>__main__.py</code>"}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 7841702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e52286b7ac99dacd19701f81f38e76d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Chen", "link": "https://stackoverflow.com/users/7841702/jason-chen"}, "reply_to_user": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "edited": false, "score": 0, "creation_date": 1495670257, "post_id": 44170196, "comment_id": 75356248, "body": "Could you fix the indentation in your question please?"}, {"owner": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "edited": false, "score": 0, "creation_date": 1495672293, "post_id": 44170196, "comment_id": 75356761, "body": "Edited and fixed."}, {"owner": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "edited": false, "score": 0, "creation_date": 1495672703, "post_id": 44170196, "comment_id": 75356860, "body": "The reason your code work fine because you&#39;re not using the Discord library and creating the actual application part that block the code."}], "tags": [], "owner": {"reputation": 174, "user_id": 7841702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e52286b7ac99dacd19701f81f38e76d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Chen", "link": "https://stackoverflow.com/users/7841702/jason-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1495670707, "last_edit_date": 1495670707, "creation_date": 1495669872, "answer_id": 44170196, "question_id": 44170157, "link": "https://stackoverflow.com/questions/44170157/python-function-is-not-running/44170196#44170196", "title": "Python function is not running", "body": "<p>This should really be a comment but I can't do that yet. Is your indentation in <code>commander.py</code> correct? Everything after <code>def addCommand(...)</code> should be indented. Unless you just wrote it wrong in your question.</p>\n\n<p>Edit: I failed to reproduce this error. It runs on my machine just fine. Instead of importing discord from your own file, why not get it from pip? That's probably the only difference between your scripts and mine.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "edited": false, "score": 0, "creation_date": 1495672255, "post_id": 44170282, "comment_id": 75356755, "body": "Nope, nothing get printed. As I stated I almost 100% sure this is a blocking problem."}], "tags": [], "owner": {"reputation": 2334, "user_id": 3374785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6s7hE.jpg?s=128&g=1", "display_name": "Andrei Cioara", "link": "https://stackoverflow.com/users/3374785/andrei-cioara"}, "is_accepted": false, "score": 0, "last_activity_date": 1495670725, "creation_date": 1495670725, "answer_id": 44170282, "question_id": 44170157, "link": "https://stackoverflow.com/questions/44170157/python-function-is-not-running/44170282#44170282", "title": "Python function is not running", "body": "<p>I believe the problem is with Putty. Your code actually does not call into <code>discord</code> at all. It is possible that your stdout buffer is not being flushed. Try one of these two approaches.</p>\n\n<p>Use <code>-u</code> argument in python </p>\n\n<pre><code>python -u __main__.py\n</code></pre>\n\n<p>Add flushes after print statements</p>\n\n<pre><code>print('Whatever')\nimport sys; sys.stdout.flush()\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7788494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871575e1df33f2ed65dcde4f31856076?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/7788494/kurieita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495673941, "creation_date": 1495669487, "last_edit_date": 1495673941, "question_id": 44170157, "link": "https://stackoverflow.com/questions/44170157/python-function-is-not-running", "title": "Python function is not running", "body": "<p>After about 5 years of not using Python I decided to get back into it. I started recoding my Discord bot in Python from NodeJS and it was doing alright but then I started getting this strange bug. </p>\n\n<p>My problem is quite simple. I have two files: <code>__main__.py</code> and <code>commander.py</code></p>\n\n<p><strong>main</strong>.py</p>\n\n<pre><code>from core.utility import parser, discord\nfrom core.admin import commander\n\ndef ping(arguments, flags, options):\n    print(\"PONG\")\n\ncommander.addCommand(\"ping\", \"A ping pong request.\", None, None, ping)\nprint('a')\n</code></pre>\n\n<p>commander.py</p>\n\n<pre><code>list = []\n\ndef addCommand(name, description, usage, permissions, callback):\n    command = {}\n    command[\"name\"] = name\n    command[\"description\"] = description\n    command[\"usage\"] = usage\n    command[\"permissions\"] = permissions\n    command[\"callback\"] = callback\n    print(\"Command added: \", name)\n    list.append(command)\n</code></pre>\n\n<p>When I call <code>commander.addCommand</code> inside of <code>__main__.py</code> the print statment doesn't print. I also noticed that <code>print('a')</code> is also not printing which lead me to believe that the application is being block by the Discord library I am using, which is <a href=\"https://github.com/Rapptz/discord.py\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>Also noticed that when I press ctrl + c to stop the process in Putty the print statement within <code>commander.addCommand</code> actually print so I am almost certain the application is being block but I don't know how to run it as async.</p>\n\n<p>Any suggestions on how I can achieve my goal?</p>\n"}, {"tags": ["python", "selenium", "web-scraping", "splinter", "web-scripting"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6100520"}, "is_accepted": false, "score": 0, "last_activity_date": 1495671750, "creation_date": 1495671750, "answer_id": 44170412, "question_id": 44170135, "link": "https://stackoverflow.com/questions/44170135/unable-to-fill-form-using-splinter/44170412#44170412", "title": "Unable to fill form using splinter", "body": "<p>Probably page didn't fully load when selenium trying to access element.\nAs option you could use sleep function.</p>\n\n<pre><code>import time\ntime.sleep(5) # delay for 5 seconds\n</code></pre>\n\n<p>Also you can check this for Selenium</p>\n\n<p><a href=\"http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-and-implicit-waits\" rel=\"nofollow noreferrer\">http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-and-implicit-waits</a></p>\n"}], "owner": {"reputation": 464, "user_id": 7387488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10210077619809114/picture?type=large", "display_name": "sn3jd3r", "link": "https://stackoverflow.com/users/7387488/sn3jd3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495672191, "creation_date": 1495669260, "last_edit_date": 1495672191, "question_id": 44170135, "link": "https://stackoverflow.com/questions/44170135/unable-to-fill-form-using-splinter", "title": "Unable to fill form using splinter", "body": "<p>I am trying to fill out a login form on <a href=\"https://login.alibaba.com/?spm=a2700.8293689.0.0.EKYnH1&amp;tracelog=hd_signin\" rel=\"nofollow noreferrer\">https://login.alibaba.com/?spm=a2700.8293689.0.0.EKYnH1&amp;tracelog=hd_signin</a>. However i am unable to fill out the login form. Here is my current code.</p>\n\n<pre><code>executable_path = \n{'executable_path':'path/to/chrome/on/my/pc'}\n\nbrowser = Browser('chrome', **executable_path)\nbrowser.visit('https://alibaba.com')\n\n\nmy_acc = browser.find_link_by_partial_text(\"My Account\")\nfor i in my_acc:\n    browser.visit(i['href'])\n\nbrowser.find_by_name('loginId').first.type('Steve Jobs')\n</code></pre>\n\n<p>I have checked the html code, and there is clearly an element with the name i am looking for, however i get the following error: </p>\n\n<pre><code>splinter.exceptions.ElementDoesNotExist: no elements could be found with name \"loginId\"\n</code></pre>\n"}, {"tags": ["python", "pandas", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1495673348, "post_id": 44170156, "comment_id": 75356994, "body": "Plus one from me. Also, need to include df index in constructor otherwise will fail if df has non default"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1495682190, "post_id": 44170156, "comment_id": 75358854, "body": "@piRSquared, thanks:) I did test it by changing the index of df and it returned all NaNs in a and b. You are awesome!"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 3, "last_activity_date": 1495682280, "last_edit_date": 1495682280, "creation_date": 1495669486, "answer_id": 44170156, "question_id": 44170132, "link": "https://stackoverflow.com/questions/44170132/add-lists-inside-dictionary-to-dataframe-as-new-columns/44170156#44170156", "title": "Add lists inside dictionary to DataFrame as new columns", "body": "<p>You can use join(). And as @piRsquared mentioned in the comment, pass index as follows.</p>\n\n<pre><code>df = df.join(pd.DataFrame(d, index = df.index))\n\n    x   y   z   a   b\n0   0   3   6   10  100\n1   1   4   7   10  100\n2   2   5   8   10  100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 8062039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d552d7ede0ce5f79591c8cc200ef061?s=128&d=identicon&r=PG&f=1", "display_name": "pauloaap", "link": "https://stackoverflow.com/users/8062039/pauloaap"}, "is_accepted": false, "score": 2, "last_activity_date": 1495669859, "creation_date": 1495669859, "answer_id": 44170193, "question_id": 44170132, "link": "https://stackoverflow.com/questions/44170132/add-lists-inside-dictionary-to-dataframe-as-new-columns/44170193#44170193", "title": "Add lists inside dictionary to DataFrame as new columns", "body": "<p>One way would be to do this:</p>\n\n<pre><code>dataframe_dict = pd.DataFrame.to_dict(orient='dict')\nd = {'a': [10, 10, 10], 'b': [100, 100, 100]}\n\nnew_dict = dict(dataframe_dict.items() + d.items())\n</code></pre>\n\n<p>BTW, I never used DataFrames, but here: <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_dict.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_dict.html</a>, it says you can convert a dataframe to dict, so i just converted it, and created a new dict with the other items included.</p>\n"}, {"comments": [{"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1495673695, "post_id": 44170559, "comment_id": 75357071, "body": "What does <code>**d</code> mean / do?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1495674378, "post_id": 44170559, "comment_id": 75357264, "body": "The ** unpacks the dictionary and passes it as keyword arguments to assign. That is precisely what is needed to add the extra columns"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1495672843, "creation_date": 1495672843, "answer_id": 44170559, "question_id": 44170132, "link": "https://stackoverflow.com/questions/44170132/add-lists-inside-dictionary-to-dataframe-as-new-columns/44170559#44170559", "title": "Add lists inside dictionary to DataFrame as new columns", "body": "<p>Use <code>assign</code> with dictionary unpacking </p>\n\n<pre><code>df.assign(**d)\n\n    x   y   z   a   b\n0   0   3   6   10  100\n1   1   4   7   10  100\n2   2   5   8   10  100\n</code></pre>\n\n<p>Note that with <code>assign</code> as long as the length of the lists is consistent with the dataframe, then the indices are taken care of. </p>\n"}, {"comments": [{"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1495740398, "post_id": 44181695, "comment_id": 75390512, "body": "While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value. - <a href=\"https://stackoverflow.com/review/low-quality-posts/16231518\">From Review</a>"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1495718521, "creation_date": 1495718521, "answer_id": 44181695, "question_id": 44170132, "link": "https://stackoverflow.com/questions/44170132/add-lists-inside-dictionary-to-dataframe-as-new-columns/44181695#44181695", "title": "Add lists inside dictionary to DataFrame as new columns", "body": "<pre><code>#merge existing data with the new dict and re-construct a DF.\npd.DataFrame(dict(df.to_dict(orient='list'),**d))\nOut[186]: \n    a    b  x  y  z\n0  10  100  0  3  6\n1  10  100  1  4  7\n2  10  100  2  5  8\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 44170559, "answer_count": 4, "score": 3, "last_activity_date": 1495718521, "creation_date": 1495669238, "question_id": 44170132, "link": "https://stackoverflow.com/questions/44170132/add-lists-inside-dictionary-to-dataframe-as-new-columns", "title": "Add lists inside dictionary to DataFrame as new columns", "body": "<p>Let's say I have the following pandas DataFrame:</p>\n\n<pre><code>df = pd.DataFrame({'x': [0, 1, 2], 'y': [3, 4, 5], 'z': [6, 7, 8]})\n     x   y   z\n 0   0   3   6\n 1   1   4   7\n 2   2   5   8\n</code></pre>\n\n<p>And the following dictionary:</p>\n\n<pre><code>d = {'a': [10, 10, 10], 'b': [100, 100, 100]}\n</code></pre>\n\n<p>What's the best way to add the dictionary to the DataFrame to get the following:</p>\n\n<pre><code>     x   y   z    a    b\n 0   0   3   6   10  100\n 1   1   4   7   10  100\n 2   2   5   8   10  100\n</code></pre>\n\n<p>This is what I've come up with so far but I feel like there has to be a better way:</p>\n\n<pre><code>df_bigger = pd.concat([df, pd.DataFrame(d)], axis=1)\n</code></pre>\n"}, {"tags": ["python", "variables", "turtle-graphics"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1495669266, "post_id": 44170114, "comment_id": 75356015, "body": "Could you also post the errors"}, {"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1495669508, "post_id": 44170114, "comment_id": 75356057, "body": "Cool looking at it right now"}, {"owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "reply_to_user": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1495669538, "post_id": 44170114, "comment_id": 75356062, "body": "Appreciate it!!"}, {"owner": {"reputation": 171, "user_id": 5971855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UAKeO.jpg?s=128&g=1", "display_name": "ryugie", "link": "https://stackoverflow.com/users/5971855/ryugie"}, "edited": false, "score": 2, "creation_date": 1495669603, "post_id": 44170114, "comment_id": 75356082, "body": "the fact that the assignment asks that you name mangle to &#39;make the data private&#39; is mind boggling"}, {"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495669657, "post_id": 44170114, "comment_id": 75356090, "body": "It&#39;s either pasting your code here and formatting problem or your Python code is not properly formatted at all."}, {"owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "reply_to_user": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1495669934, "post_id": 44170114, "comment_id": 75356166, "body": "I added the python file at the bottom of the post if it helps any @thesonyman101@ryugie @errata"}, {"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495670435, "post_id": 44170114, "comment_id": 75356297, "body": "@PhillipWard FYI, mentioning multiple users with &quot;@&quot; will trigger the message only for the first mentioned user, not the others ;)"}, {"owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "edited": false, "score": 0, "creation_date": 1495670914, "post_id": 44170114, "comment_id": 75356410, "body": "Oh yikes! sorry yall!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "edited": false, "score": 1, "creation_date": 1495670239, "post_id": 44170221, "comment_id": 75356242, "body": "Thanks for the input! I think the indentation was just a formatting error, but I posted the download link for the file at the bottom of the post if you wouldn&#39;t mind taking a look."}, {"owner": {"reputation": 61, "user_id": 7852176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXEnv.jpg?s=128&g=1", "display_name": "schaabs", "link": "https://stackoverflow.com/users/7852176/schaabs"}, "reply_to_user": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "edited": false, "score": 0, "creation_date": 1495670516, "post_id": 44170221, "comment_id": 75356319, "body": "the code you pasted above isn&#39;t the same as the code in the file"}, {"owner": {"reputation": 61, "user_id": 7852176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXEnv.jpg?s=128&g=1", "display_name": "schaabs", "link": "https://stackoverflow.com/users/7852176/schaabs"}, "reply_to_user": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "edited": false, "score": 0, "creation_date": 1495670549, "post_id": 44170221, "comment_id": 75356324, "body": "in the file your first call has no args:     for i in [phil, macie, sashi, roxie, darla, sammy]:         mr.setColor()         mr.setX(xy)"}, {"owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "edited": false, "score": 0, "creation_date": 1495670888, "post_id": 44170221, "comment_id": 75356400, "body": "I changed it to &quot;mr.setColor(c)&quot;. I need to call the &quot;draw&quot; function from line 53ish under the for loop. However I get this error:  mr.draw(self,turtle) NameError: name &#39;self&#39; is not defined"}], "tags": [], "owner": {"reputation": 61, "user_id": 7852176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXEnv.jpg?s=128&g=1", "display_name": "schaabs", "link": "https://stackoverflow.com/users/7852176/schaabs"}, "is_accepted": false, "score": -1, "last_activity_date": 1495670800, "last_edit_date": 1495670800, "creation_date": 1495670115, "answer_id": 44170221, "question_id": 44170114, "link": "https://stackoverflow.com/questions/44170114/python-turtle-drawing-assignment-trouble-with-assigning-variables/44170221#44170221", "title": "Python Turtle Drawing Assignment - Trouble with assigning variables", "body": "<p>The problem is the code you pasted in the post is not the same as in the file you list.  In the file you have an error on line 92 where you don't supply any args to setColor:</p>\n\n<pre><code>for i in [phil, macie, sashi, roxie, darla, sammy]:\n    mr.setColor()\n    mr.setX(xy)\n    mr.setY(xy)\n    mr.setWidth(wh)\n    mr.setHeight(wh)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1495680414, "creation_date": 1495680414, "answer_id": 44171478, "question_id": 44170114, "link": "https://stackoverflow.com/questions/44170114/python-turtle-drawing-assignment-trouble-with-assigning-variables/44171478#44171478", "title": "Python Turtle Drawing Assignment - Trouble with assigning variables", "body": "<p>Your testing code is a mess, you don't need multiple turtles, just one, something along the lines:</p>\n\n<pre><code>def main():\n\n    listofcolors = (\"blue\", \"red\", \"yellow\", \"orange\", \"pink\", \"green\")\n    wn = turtle.Screen()\n    mr = myRectangle(0, 0, 100, 100, \"blue\")\n    phil = turtle.Turtle()\n\n    for _ in range(6):\n        x = random.randint(-200, 200)\n        print(x)\n        y = random.randint(-200, 200)\n        print(y)\n        w = random.randint(1, 150)\n        print(w)\n        h = random.randint(1, 150)\n        print(h)\n        c = random.choice(listofcolors)\n        print(c)\n\n        mr.setX(x)\n        mr.setY(y)\n        mr.setWidth(w)\n        mr.setHeight(h)\n        mr.setColor(c)\n\n        mr.draw(phil)\n\n    wn.mainloop()\n\nmain()\n</code></pre>\n\n<p>This should bring you to step 7 in your instructions.</p>\n\n<p>I don't know what your <code>__var__()</code> function is supposed to do, it seems like a lengthy no-op.  Your <code>draw()</code> function slightly tweaked:</p>\n\n<pre><code>    def draw(self, turtle):\n        turtle.penup()\n        turtle.goto(self.getX(), self.getY())\n        turtle.setheading(0)\n        turtle.color(self.getColor())  # set both pen &amp; fill color\n        turtle.pendown()\n        turtle.begin_fill()\n        turtle.forward(self.__width)\n        turtle.left(90)\n        turtle.forward(self.__height)\n        turtle.left(90)\n        turtle.forward(self.__width)\n        turtle.left(90)\n        turtle.forward(self.__height)\n        turtle.left(90)\n        turtle.end_fill()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6410050, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154844274973776/picture?type=large", "display_name": "Phillip Ward", "link": "https://stackoverflow.com/users/6410050/phillip-ward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1495680414, "creation_date": 1495669092, "last_edit_date": 1495669882, "question_id": 44170114, "link": "https://stackoverflow.com/questions/44170114/python-turtle-drawing-assignment-trouble-with-assigning-variables", "title": "Python Turtle Drawing Assignment - Trouble with assigning variables", "body": "<p>I have an assignment due in a few hours and I'm stuck as to what to do. \nI am using python 3.</p>\n\n<p>I keep trying to run the code, but I get errors. At this point I figured I'd ask for help.</p>\n\n<p>Thank you in Advance!</p>\n\n<p>Instructions: <a href=\"http://people.uncw.edu/cferner/Classes/csc231/Assignment1.html\" rel=\"nofollow noreferrer\">http://people.uncw.edu/cferner/Classes/csc231/Assignment1.html</a></p>\n\n<pre><code> import turtle\n import random\n\n\nclass myRectangle:\n\ndef __var__(self):\n    self.__x\n    self.__y\n    self.__width\n    self.__height\n    self.__color\n\ndef __init__(self, x, y, width, height, color):\n    self.__x = x\n    self.__y = y\n    self.__width = width\n    self.__height = height\n    self.__color = color\n\ndef getX(self):\n    return self.__x\n\ndef setX(self, x):\n    self.__x = x\n\ndef getY(self):\n    return self.__y\n\ndef setY(self, y):\n    self.__y = y\n\ndef getWidth(self):\n    return self.__width\n\ndef setWidth(self, width):\n    self.__width = width\n\ndef getHeight(self):\n    return self.__height\n\ndef setHeight(self, height):\n    self.__height = height\n\ndef getColor(self):\n    return self.__color\n\ndef setColor(self, color):\n    self.__color = color\n\ndef draw(self, turtle):\n    turtle.penup()\n    turtle.goto(self.getX(), self.getY())\n    turtle.heading(0)\n    turtle.pencolor(\"blue\")\n    turtle.pendown()\n    turtle.begin_fill()\n    turtle.forward(self.__width())\n    turtle.left(90)\n    turtle.forward(self.__height())\n    turtle.left(90)\n    turtle.forward(self.__width())\n    turtle.left(90)\n    turtle.forward(self.__height())\n    turtle.left(90)\n    turtle.end_fill()\n\n\ndef main():\n\nwn = turtle.TurtleScreen\nmr = myRectangle\nphil = turtle.Turtle()\nmacie = turtle.Turtle()\nsashi = turtle.Turtle()\nroxie = turtle.Turtle()\ndarla = turtle.Turtle()\nsammy = turtle.Turtle()\n\nphil.pencolor(\"blue\")\nphil.pensize(7)\n\nlistofcolors = (\"blue\", \"red\", \"yellow\", \"orange\", \"pink\", \"green\")\nc = random.choice(listofcolors)\n\nxy = random.randrange(-200, 201)\nwh = random.randrange(1, 151)\n\nfor i in [phil, macie, sashi, roxie, darla, sammy]:\n    mr.setColor(c)\n    mr.setX(xy)\n    mr.setY(xy)\n    mr.setWidth(wh)\n    mr.setHeight(wh)\n\n\n\n\n\nmain()\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>     /Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6 \n    \"/Users/Desktop/OneDrive - UNC-Wilmington/UNCW Files/Summer \n      2017/CSC 231/Assignment 1/turtleRectangle.py\"\n    Traceback (most recent call last):\n    File \"/Users/Desktop/OneDrive - UNC-Wilmington/UNCW Files/Summer \n   2017/CSC 231/Assignment 1/turtleRectangle.py\", line 102, in &lt;module&gt;\n    main()\n     File \"/Users/Desktop/OneDrive - UNC-Wilmington/UNCW Files/Summer \n  2017/CSC 231/Assignment 1/turtleRectangle.py\", line 92, in main\n   mr.setColor()\n   TypeError: setColor() missing 2 required positional arguments: \n  'self' and 'color'\n\n   Process finished with exit code 1\n</code></pre>\n\n<p><a href=\"https://uncw4-my.sharepoint.com/personal/pjw5785_uncw_edu/_layouts/15/guestaccess.aspx?docid=070aedc7e9e02402faab2436d359025ef&amp;authkey=AWhH1vXMjR0VaDYwefibLuQ\" rel=\"nofollow noreferrer\">Download link for Python file</a></p>\n"}, {"tags": ["python", "pandas", "quandl", "pandas-datareader"], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "edited": false, "score": 0, "creation_date": 1495669242, "post_id": 44170115, "comment_id": 75356010, "body": "Hi errata, sorry, not quite sure what you&#39;re saying. Any code would be easier for me to read. Try the code yourself, just make sure you have a quandl account set up, and can get your authtoken from your quandl account setting."}, {"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "reply_to_user": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "edited": false, "score": 0, "creation_date": 1495669487, "post_id": 44170115, "comment_id": 75356052, "body": "@MichaelRSF Updated my answer. I don&#39;t have Quandl account anymore but I was using it briefly a while ago..."}, {"owner": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "edited": false, "score": 0, "creation_date": 1495669719, "post_id": 44170115, "comment_id": 75356111, "body": "Thank you very much errata, my bad. I should have read your message properly. With pandas_datareader using &quot;yahoo&quot;, it would have been <code>stk.replace(&quot;.&quot;, &quot;-&quot;)</code>. I&#39;m using quandl because I need the adjusted closing prices, and pandas_datareader with &quot;google&quot; only gives the closing prices, which is less accurate because adjusted closing prices take into account all transaction costs, dividends, etc."}, {"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "reply_to_user": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "edited": false, "score": 0, "creation_date": 1495670579, "post_id": 44170115, "comment_id": 75356331, "body": "@MichaelRSF I didn&#39;t quite understand did replacing with underscore helped or not? :) I remember I had to do something similar, but cannot quite remember what exactly and whether was it with stock ticker in the first place :/"}], "tags": [], "owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "is_accepted": true, "score": 2, "last_activity_date": 1495669397, "last_edit_date": 1495669397, "creation_date": 1495669097, "answer_id": 44170115, "question_id": 44170082, "link": "https://stackoverflow.com/questions/44170082/how-to-grab-stock-data-from-quandl-with-tickers-that-have-a-full-stop-python/44170115#44170115", "title": "How to grab stock data from Quandl with tickers that have a full stop? Python", "body": "<p>Did you try to replace it with underscore maybe?</p>\n\n<pre><code>\"WIKI/{}\".format(stk.replace(\".\", \"_\"))  # replacing . with _ instead of -\n</code></pre>\n\n<p>If I remember correctly, dot is used to slice the specific column from data.</p>\n"}], "owner": {"reputation": 674, "user_id": 7776559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/545c390116f106c6f69592cac77de5e3?s=128&d=identicon&r=PG", "display_name": "MichaelRSF", "link": "https://stackoverflow.com/users/7776559/michaelrsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2548, "favorite_count": 1, "accepted_answer_id": 44170115, "answer_count": 1, "score": 1, "last_activity_date": 1527799282, "creation_date": 1495668781, "question_id": 44170082, "link": "https://stackoverflow.com/questions/44170082/how-to-grab-stock-data-from-quandl-with-tickers-that-have-a-full-stop-python", "title": "How to grab stock data from Quandl with tickers that have a full stop? Python", "body": "<p>Due to Python's pandas_datareader API no longer being able to extract Yahoo finance stock data, I'm using quandl. This requires setting up an account and doing a 'pip install quandl' in the command terminal.\nIf I have an unusual stock ticker, like say BRK.B, using the pandas_datareader API to extract stock data from Google works perfectly fine.</p>\n\n<pre><code> import pandas as pd\n import datetime\n from pandas_datareader import data, wb\n start = datetime.datetime(2016, 1, 1)\n end = datetime.datetime(2017, 1, 1)\n brk = data.DataReader(\"BRK.B\", \"google\", start, end)[\"Close\"]\n brk\n</code></pre>\n\n<p>However, this won't work with quandl due to the stock ticker, BRK.B having a full-stop inside it.</p>\n\n<pre><code> import quandl\n brk = [\"BRK.B\"]\n for stk in brk:\n     b = quandl.get(\"WIKI/{}\".format(stk),\n         authtoken = \"Mixture of numbers, and lower/upper case letters\",\n         start, end)[\"Adj. Close\"]\n</code></pre>\n\n<p>This causes the code to break. However, if I swap [\"BRK.B\"] for any normal stock ticker, say [\"AAPL\"], it works perfectly fine.\nI'd like to extract all 505 stock from the S&amp;P 500 using the quandl API, however, because some stock tickers have a \".\" in them, it won't work.\nI've tried <code>format(stk.replace(\".\", \"-\"))</code> and that didn't work either.</p>\n\n<p>Any help would be greatly appreciated. BTW, for those who don't know. You have to set up a quandl account, then get your API key code from your quandl account settings, then copy and paste it as your authtoken.</p>\n"}, {"tags": ["python", "opencv", "opencv3.0", "template-matching"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1495674681, "post_id": 44170065, "comment_id": 75357334, "body": "Do you want to simply shift the image and overlap, or do you want to warp it (with possible scaling, rotation, and perspective distortion)?"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1495711095, "post_id": 44170065, "comment_id": 75372439, "body": "You may refer to this [post](<a href=\"http://www.pyimagesearch.com/2016/01/11/opencv-panorama-stitching/\" rel=\"nofollow noreferrer\">pyimagesearch.com/2016/01/11/opencv-panorama-stitchin&zwnj;&#8203;g</a>"}, {"owner": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1495712231, "post_id": 44170065, "comment_id": 75373129, "body": "@AlexanderReynolds I&#39;m capturing images through a glass screen using a handheld camera/scanner pressed against the screen, so I&#39;m assuming that shift and rotation are the only differences between my images."}, {"owner": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "reply_to_user": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1495712496, "post_id": 44170065, "comment_id": 75373273, "body": "@ZdaR Thanks for the link, unfortunately that was the original approach that I mentioned in my OP using SIFT and feature detection. Do you have any resources for a template-based approach for image alignment/stitching?"}], "answers": [{"comments": [{"owner": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "edited": false, "score": 0, "creation_date": 1495805814, "post_id": 44186640, "comment_id": 75418652, "body": "Thanks a lot for your detailed comment and the offer to compare notes. I&#39;ll give your approach a shot and supply some images for comparison once I have a working solution. Were you able to write your routine in Python or did you write it in C++?"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "edited": false, "score": 0, "creation_date": 1495829247, "post_id": 44186640, "comment_id": 75431308, "body": "Python. Also Matlab separately. I cannot share it as I developed it at a job, but you can find many implementations online. Check out <a href=\"https://github.com/menpo/menpofit\" rel=\"nofollow noreferrer\">menpofit</a> which has multiple variants of the Lucas-Kanade algorithm, programmed nicely. The Inverse Compositional method is the fastest. But I think the feature based methods should work perfectly for you if you write your own feature selector."}, {"owner": {"reputation": 312, "user_id": 8932411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1462212680553448/picture?type=large", "display_name": "M. D. P", "link": "https://stackoverflow.com/users/8932411/m-d-p"}, "reply_to_user": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "edited": false, "score": 0, "creation_date": 1553067450, "post_id": 44186640, "comment_id": 97242966, "body": "@Jason do you have python code for this ???? or any one can please add the code as answer as well."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 312, "user_id": 8932411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1462212680553448/picture?type=large", "display_name": "M. D. P", "link": "https://stackoverflow.com/users/8932411/m-d-p"}, "edited": false, "score": 0, "creation_date": 1553103237, "post_id": 44186640, "comment_id": 97265120, "body": "@M.D.P see <a href=\"https://docs.opencv.org/3.4/d7/dff/tutorial_feature_homography.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4/d7/dff/tutorial_feature_homography.html</a> and <a href=\"https://docs.opencv.org/3.4.0/d9/dab/tutorial_homography.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4.0/d9/dab/tutorial_homography.html</a> and search online for &quot;opencv homography&quot; and &quot;opencv alignment&quot;---there are a lot of tutorials out there. Open up a new question if you have trouble implementing those tutorials."}], "tags": [], "owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "is_accepted": true, "score": 3, "last_activity_date": 1495734642, "last_edit_date": 1495734642, "creation_date": 1495734103, "answer_id": 44186640, "question_id": 44170065, "link": "https://stackoverflow.com/questions/44170065/how-to-align-two-images-based-on-a-common-feature-with-matchtemplate/44186640#44186640", "title": "How to align two images based on a common feature with matchTemplate", "body": "<p>Your choices with the OpenCV library is to use any number of methods to select a few points, and create the transformation between those points in the image by using a function like <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#getaffinetransform\" rel=\"nofollow noreferrer\"><code>getAffineTransform</code></a> or <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform\" rel=\"nofollow noreferrer\"><code>getPerspectiveTransform</code></a>. Note that functions like these take <em>points</em> as arguments, <em>not</em> luminosity values (images). You'll want to find points of interest in the first image (say, those marker spots); and you'll want to find those same points in the second image, and pass <em>those</em> pixel locations to a function like <code>getAffineTransform</code> or <code>getPerspectiveTransform</code>. Then, once you have that transformation matrix, you can use <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#warpaffine\" rel=\"nofollow noreferrer\"><code>warpAffine</code></a> or <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#warpperspective\" rel=\"nofollow noreferrer\"><code>warpPerspective</code></a> to warp the second image into the coordinates of the first (or vice versa).</p>\n\n<p><em>Affine</em> transformations include translation, rotation, scaling, and shearing. <em>Perspective</em> transformations include everything from affine transformations, as well as perspective distortion in the <code>x</code> and <code>y</code> directions. For <code>getAffineTransform</code> you need to send three pairs of points from the first image, and where those three same pixels are located in the second image. For <code>getPerspectiveTransform</code>, you will send four pixel pairs from each image. If you want to use all of your marker points, you can use <a href=\"http://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findhomography\" rel=\"nofollow noreferrer\"><code>findHomography</code></a> instead which will allow you to place <em>more</em> than four points and it will compute an optimal homography between all of your matched points.</p>\n\n<p>When you use feature detection and matching to align images, it's using these functions in the background. The difference is it finds the features for you. But if that's not working, simply use manual methods to find the features to your liking, and then use these methods on those feature points. E.g., you could find the template locations as you already have and define that as a region of interest (ROI), and then break the marker points into smaller template pieces and find those locations inside your ROI. Then you have corresponding pairs of points from both images; you can input their locations into <code>findHomography</code> or just pick three to use with <code>getAffineTransform</code> or four with <code>getPerspectiveTransform</code> and you'll get your image transformation which you can then apply.</p>\n\n<hr>\n\n<p>Otherwise you'll need to use something like the <a href=\"http://docs.opencv.org/2.4/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=opticalflowpyrlk#cv.CalcOpticalFlowPyrLK\" rel=\"nofollow noreferrer\">Lukas-Kanade optical flow algorithm</a> which can do direct image matching if you don't want to use feature-based methods, but these are incredibly slow comparatively to selecting a few feature points and finding homographies that way if you use the whole image. However if you only have to do it for a few images, it's not such a huge deal. To be more accurate and have it converge much faster, it'll help if you can provide it a starting homography that at least translates it roughly to the right position (e.g. you do your feature detection, see that the feature is roughly <code>(x', y')</code> pixels in the second image from the first, and create an homography with that translation).</p>\n\n<p>You can also likely find some Python routines for homography estimation from the Lucas-Kanade inverse compositional algorithm or the like online if you want to try that. I have my own custom routine for that algorithm as well, but I can't share it, however, I could run the algorithm on your images if you share the originals without the bounding boxes, to maybe provide you with some estimated homographies to compare with.</p>\n"}], "owner": {"reputation": 3295, "user_id": 2694260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/682390870aadf0e0b11c0ec4ededc22d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/2694260/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10020, "favorite_count": 0, "accepted_answer_id": 44186640, "answer_count": 1, "score": 3, "last_activity_date": 1495734642, "creation_date": 1495668663, "question_id": 44170065, "link": "https://stackoverflow.com/questions/44170065/how-to-align-two-images-based-on-a-common-feature-with-matchtemplate", "title": "How to align two images based on a common feature with matchTemplate", "body": "<p>I have two images which overlap. I'd like to align these two images. My current approach is to find a common feature (a marking) in both images. I'd then like to align these two images according to the place where the feature overlaps.</p>\n\n<p>The images aren't perfect, so I'm looking for some way that will align based the 'best' fit (most overlap). Originally I tried to align the images using feature matching through SIFT but the features matches were often incorrect/too few.</p>\n\n<p>Here's the code I used to find the <a href=\"https://imgur.com/reOGJh7\" rel=\"nofollow noreferrer\">template</a>:</p>\n\n<pre><code>template = cv2.imread('template.png', 0)\ntemplate = template - cv2.erode(template, None)\n\nimage1 = cv2.imread('Image to align1.png')\nimage2 = cv2.imread('Image to align2.png')\nimage = image2\nimg2 = image[:,:,2]\nimg2 = img2 - cv2.erode(img2, None)\n\nccnorm = cv2.matchTemplate(img2, template, cv2.TM_CCORR_NORMED)\nprint(ccnorm.max())\nloc = np.where(ccnorm == ccnorm.max())\nprint(loc)\nthreshold = 0.1\nth, tw = template.shape[:2]\nfor pt in zip(*loc[::-1]):\n    if ccnorm[pt[::-1]] &lt; threshold:\n        continue\n    cv2.rectangle(image, pt, (pt[0] + tw, pt[1] + th),\n                 (0, 0, 255), 2)\n</code></pre>\n\n<p>Here are the matched features, <a href=\"https://imgur.com/VGe01Hp\" rel=\"nofollow noreferrer\">1</a> and <a href=\"https://imgur.com/NbmM2zv\" rel=\"nofollow noreferrer\">2</a>.\nThanks in advance.</p>\n"}, {"tags": ["python", "class", "inheritance", "base"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1495669670, "post_id": 44170017, "comment_id": 75356094, "body": "Why does <code>Solution</code> inherit from <code>Grid</code>, and why does it take an existing <code>Grid</code> as an argument instead of <code>r</code>, <code>z</code>, and <code>t</code>?"}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1495683331, "post_id": 44170017, "comment_id": 75359113, "body": "what&#39;s the difference between <code>r</code> in <code>Grid.__init__</code> and in <code>Solution.__init__</code>? it seems like last one should be named <code>zones</code>"}, {"owner": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "edited": false, "score": 0, "creation_date": 1495743671, "post_id": 44170017, "comment_id": 75392160, "body": "You can have a class variable <code>done_long_computation</code> which you&#39;d set the first time <code>__init__</code> is executed, and <code>__init__</code> checks if <code>done_long_computation</code> is set."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1495669034, "creation_date": 1495669034, "answer_id": 44170107, "question_id": 44170017, "link": "https://stackoverflow.com/questions/44170017/how-to-avoid-repeated-calls-to-init-when-passing-a-subclass-to-inherit-in-python/44170107#44170107", "title": "how to avoid repeated calls to init when passing a subclass to inherit in python", "body": "<p>The quick, dirty way would be to add a \"new\" parameter to the initialization:</p>\n\n<pre><code>def long_computation(r, t, z):\n    print \"Oh, the despair of wasted time!\", r, t, z\n\nclass Grid():\n    def __init__(self,r,z,t, new_grid=True):\n        self.rgrid = r\n        self.zgrid = z\n        self.tgrid = t\n        if new_grid:\n            self.otherstuff = long_computation(r,t,z)\n\nclass Solution(Grid):\n    def __init__(self,r,g):\n        self.zones = r\n        Grid.__init__(self, g.rgrid, g.zgrid, g.tgrid, False)\n        # Inherit long computation from parent.\n        self.otherstuff = g.otherstuff\n\nmy_r = 77\nmy_z = 18\nmy_t = 6.2\nr = 0.333\n\ng = Grid(my_r,my_z,my_t)\nsol = Solution(r,g)\n</code></pre>\n\n<p>Another possibility is to memoize <code>longcomputation</code>.</p>\n\n<p>Does that help at all?  I know it's not aesthetically satisfying, but it gets the job done.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 2016632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e7ef12d3fad7dcc18ab17f763a6a6da3?s=128&d=identicon&r=PG", "display_name": "Tunneller", "link": "https://stackoverflow.com/users/2016632/tunneller"}, "edited": false, "score": 0, "creation_date": 1495677449, "post_id": 44170237, "comment_id": 75357974, "body": "Hi, is there a way to for Solution to know if otherstuff has been created already? Sometimes I will want to use Grid and have it run the long-computation without calling it as part of Solution. Sometimes I will want to call Grid without calling Solution. Maybe subclass() ... hm. I just saw <b>dict</b>.keys()"}, {"owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "reply_to_user": {"reputation": 71, "user_id": 2016632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e7ef12d3fad7dcc18ab17f763a6a6da3?s=128&d=identicon&r=PG", "display_name": "Tunneller", "link": "https://stackoverflow.com/users/2016632/tunneller"}, "edited": false, "score": 0, "creation_date": 1495695321, "post_id": 44170237, "comment_id": 75363330, "body": "You can use self.__dict__ to see if the attribute exists for the class and calculate if necessary."}], "tags": [], "owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "is_accepted": false, "score": 1, "last_activity_date": 1495675396, "last_edit_date": 1495675396, "creation_date": 1495670249, "answer_id": 44170237, "question_id": 44170017, "link": "https://stackoverflow.com/questions/44170017/how-to-avoid-repeated-calls-to-init-when-passing-a-subclass-to-inherit-in-python/44170237#44170237", "title": "how to avoid repeated calls to init when passing a subclass to inherit in python", "body": "<p>You can have a method to perform calculation in parent class. Using this you can call the method and compute the stuff which takes long time when you want to calculate it.</p>\n\n<pre><code>class Grid():\n    def __init__(self,r,z,t):\n        self.rgrid = r\n        self.zgrid = z\n        self.tgrid = t\n\n    def start_long_computation(self):\n        self.otherstuff = long_computation(self.rgrid,self.tgrid,self.zgrid)\n</code></pre>\n\n<p>call the <code>start_long_computation</code> in Solution instance</p>\n\n<pre><code>class Solution(Grid):\n    def __init__(self,r,my_r ,my_z ,my_t):\n        self.zones = r\n        Grid.__init__(self, my_r ,my_z ,my_t)\n        Grid.start_long_computation(self)\n</code></pre>\n\n<p>You can now access <code>otherstuff</code> using <code>self.otherstuff</code> in Solution instance</p>\n\n<p>or</p>\n\n<pre><code>class Grid():\n    def __init__(self,r,z,t):\n        self.rgrid = r\n        self.zgrid = z\n        self.tgrid = t\n\n    def start_long_computation(self):\n        return long_computation(self.rgrid,self.tgrid,self.zgrid)\n\nclass Solution():\n    def __init__(self,r,g):\n        self.zones = r\n        self.otherstuff = g.start_long_computation()\n\ng = Grid(my_r,my_z,my_t)\nsol = Solution(r,g)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2016632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e7ef12d3fad7dcc18ab17f763a6a6da3?s=128&d=identicon&r=PG", "display_name": "Tunneller", "link": "https://stackoverflow.com/users/2016632/tunneller"}, "is_accepted": false, "score": 0, "last_activity_date": 1495728522, "last_edit_date": 1495728522, "creation_date": 1495680264, "answer_id": 44171457, "question_id": 44170017, "link": "https://stackoverflow.com/questions/44170017/how-to-avoid-repeated-calls-to-init-when-passing-a-subclass-to-inherit-in-python/44171457#44171457", "title": "how to avoid repeated calls to init when passing a subclass to inherit in python", "body": "<p>Hm, this looks pretty ugly but builds on the above:</p>\n\n<pre><code>class Grid(object):\n    def __init__(self,r,z,t):    \n        self.rgrid = r\n        self.zgrid = z\n        self.tgrid = t       \n\n        if \"otherstuff\" not  in self.__dict__.keys(): \n            self.otherstuff = self.long_computation(r,t,z)\n        else:\n            print \"No Need to Call\"\n\n    def long_computation(ggg,r, t, z):\n        return 123456\n\nclass Solution(Grid):\n    def __init__(self,r,g):\n        self.zones = r\n\n    if \"otherstuff\" in g.__dict__.keys(): \n       self.otherstuff = g.otherstuff\n\n    super(Solution, self).__init__(g.rgrid,g.zgrid,g.tgrid)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 2016632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e7ef12d3fad7dcc18ab17f763a6a6da3?s=128&d=identicon&r=PG", "display_name": "Tunneller", "link": "https://stackoverflow.com/users/2016632/tunneller"}, "edited": false, "score": 0, "creation_date": 1495724430, "post_id": 44171991, "comment_id": 75381367, "body": "Thanks, for pointing me to super() ... and then discovering mysteries of old-style classes vs new. The classmethod device is also new to me and will be useful.  In some more detail, my &quot;otherstuff&quot; is more like two dozen values: grid.o1, grid.o2, grid.o3, grid.o4, grid.o5,..... etc. I don&#39;t want to have to type all of those in the main code each time. But I can use the classmethod to keep the main code clean. Appreciate the update."}], "tags": [], "owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1495724587, "last_edit_date": 1495724587, "creation_date": 1495684377, "answer_id": 44171991, "question_id": 44170017, "link": "https://stackoverflow.com/questions/44170017/how-to-avoid-repeated-calls-to-init-when-passing-a-subclass-to-inherit-in-python/44171991#44171991", "title": "how to avoid repeated calls to init when passing a subclass to inherit in python", "body": "<ul>\n<li><p>IMO you should avoid any computations inside of <code>__init__</code> and only do attributes assigning, so if you wanna do <code>long_computation</code> once and use its result you can do it outside of <code>__init__</code> and pass as argument.</p></li>\n<li><p>If you are not using <em>Python 3</em> you probably should inherit you base class <code>Grid</code> from <a href=\"https://docs.python.org/2/library/functions.html#object\" rel=\"nofollow noreferrer\"><code>object</code></a> type (in <em>Python 3</em> all classes are inherited from <code>object</code> <a href=\"https://stackoverflow.com/a/1238632/5997596\">by default</a>). And there is function named <a href=\"https://docs.python.org/2/library/functions.html#super\" rel=\"nofollow noreferrer\"><code>super</code></a> and you <a href=\"https://stackoverflow.com/questions/222877/what-does-super-do-in-python\">probably should use it</a> like <code>super(Solution, self).__init__</code> (or just <code>super().__init__</code> in <em>Python 3</em>) instead of writing <code>Grid.__init__</code>.</p></li>\n<li><p>Passing <code>Grid</code> instance to initialize <code>Solution</code> object looks ugly, why not passing required <code>Grid</code> attributes? Also your example will not work since <code>Grid</code> objects doesn't have <code>r</code>, <code>z</code>, <code>t</code> fields, but <code>rgrid</code>, <code>zgrid</code>, <code>tgrid</code>. If you need to construct <code>Solution</code> instance from <code>Grid</code> you can write custom constructor (e.g. there are many of them in <a href=\"https://docs.python.org/2/library/datetime.html#datetime-objects\" rel=\"nofollow noreferrer\"><code>datetime.datetime</code></a> type).</p></li>\n</ul>\n\n<p>Considering all this remarks</p>\n\n<pre><code>class Grid(object):\n    def __init__(self, r, t, z, otherstuff):\n        self.rgrid = r\n        self.tgrid = t\n        self.zgrid = z\n        self.otherstuff = otherstuff\n\n\nclass Solution(Grid):\n    def __init__(self, zones, r, t, z, otherstuff):\n        self.zones = zones\n        super(Solution, self).__init__(r, t, z, otherstuff)\n\n    @classmethod\n    def from_grid(cls, zones, grid):\n        return cls(zones, grid.rgrid, grid.tgrid, grid.zgrid, grid.otherstuff)\n\n\notherstuff = long_computation(my_r, my_t, my_z)\ng = Grid(my_r, my_t, my_z, otherstuff)\nsol = Solution.from_grid(r, g)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2016632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e7ef12d3fad7dcc18ab17f763a6a6da3?s=128&d=identicon&r=PG", "display_name": "Tunneller", "link": "https://stackoverflow.com/users/2016632/tunneller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1495728522, "creation_date": 1495668419, "question_id": 44170017, "link": "https://stackoverflow.com/questions/44170017/how-to-avoid-repeated-calls-to-init-when-passing-a-subclass-to-inherit-in-python", "title": "how to avoid repeated calls to init when passing a subclass to inherit in python", "body": "<p>consider class</p>\n\n<pre><code>class Grid():\n    def __init__(self,r,z,t):\n        self.rgrid = r\n        self.zgrid = z\n        self.tgrid = t\n        self.otherstuff = long_computation(r,t,z)\n\nclass Solution(Grid):\n    def __init__(self,r,g):\n        self.zones = r\n        Grid.__init__(self,g.r,g.z,g.t)\n\ng = Grid(my_r,my_z,my_t)\nsol = Solution(r,g)\n</code></pre>\n\n<p>This creates what I want, except the \"long_computation\" is done twice. What would be a clean way to structure the classes that would work whether I called just Grid, or whether I also did the Solution step?</p>\n\n<p>Thanks, J.</p>\n"}, {"tags": ["python", "virtualenv"], "comments": [{"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495668426, "post_id": 44169982, "comment_id": 75355794, "body": "Might be a silly question, but you did install modules <i>after</i> activating virutalenv?"}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 7841702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e52286b7ac99dacd19701f81f38e76d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Chen", "link": "https://stackoverflow.com/users/7841702/jason-chen"}, "is_accepted": true, "score": 1, "last_activity_date": 1495668550, "creation_date": 1495668550, "answer_id": 44170041, "question_id": 44169982, "link": "https://stackoverflow.com/questions/44169982/python-virtual-environment-cannot-find-python-modules/44170041#44170041", "title": "Python virtual environment cannot find python modules", "body": "<p><code>virtualenv</code> by default will ignore system packages. When you're creating the environment, do</p>\n\n<pre><code>$ virtualenv my_project --system-site-packages\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 3586954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100000823014846/picture?type=large", "display_name": "Gabriel Belini", "link": "https://stackoverflow.com/users/3586954/gabriel-belini"}, "is_accepted": false, "score": 1, "last_activity_date": 1495669066, "creation_date": 1495669066, "answer_id": 44170111, "question_id": 44169982, "link": "https://stackoverflow.com/questions/44169982/python-virtual-environment-cannot-find-python-modules/44170111#44170111", "title": "Python virtual environment cannot find python modules", "body": "<p>Working on several projects in the same machine might cause conflicts between some Python Packages that are used in a project but aren't in other ones.</p>\n\n<p>Thats the main reason people use virtualenvs.</p>\n\n<p>What happens is, you create one environment for each one of your projects and install the dependencies only inside that environment, doing this will avoid package conflicts and this is also a very good way of keeping track of which packages each one of your project needs to run, so if someone else (or even you) wants to run a project in another computer, its very easy to install all needed packages (and nothing more) to run it.</p>\n\n<p>To answer your question, if you want to install all of your global packages inside a virtual environment do the following:</p>\n\n<ol>\n<li>Open a terminal (deactivate virtualenv if you're inside one);</li>\n<li>Execute: <code>pip freeze &gt; requirements.txt</code> (this will create a .txt file with all of your global python packages);</li>\n<li>Activate the environment that you want to install your packages;</li>\n<li>Execute <code>pip install -r requirements.txt</code> (make sure you're in the same folder as requirements.txt.</li>\n</ol>\n\n<p>I hope that I didn't confuse you too much, if you have any questions feel free to ask.</p>\n"}], "owner": {"reputation": 2419, "user_id": 5171213, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0aaed7bfc17efce0ded2b6f35fb32fea?s=128&d=identicon&r=PG&f=1", "display_name": "StatsSorceress", "link": "https://stackoverflow.com/users/5171213/statssorceress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2281, "favorite_count": 0, "accepted_answer_id": 44170041, "answer_count": 2, "score": 1, "last_activity_date": 1495669066, "creation_date": 1495668174, "question_id": 44169982, "link": "https://stackoverflow.com/questions/44169982/python-virtual-environment-cannot-find-python-modules", "title": "Python virtual environment cannot find python modules", "body": "<p>I have both Canopy and Anaconda installed. My default is Canopy, but when I launch <code>screen</code> I get Anaconda. That's useful for me most of the time, but this time I need to use Canopy in <code>screen</code>. </p>\n\n<p>I think the solution is to create a virtual environment, and I did so like this:</p>\n\n<pre><code>cd /path/to/project\nvirtualenv my_project\n</code></pre>\n\n<p>Problem: the virtualenv cannot see my installed Python modules, like numpy.</p>\n\n<p>Here's the rest of my process:</p>\n\n<pre><code>user@GPU5:~/path/to/my_project$ screen\nuser@GPU5:~/path/to/my_project$ source activate lstm_project\n(lstm_project) user@GPU5:~/path/to/my_project$ python\n\nEnthought Canopy Python 2.7.6 | 64-bit | (default, Sep 15 2014, 17:36:10) \n[GCC 4.1.2 20080704 (Red Hat 4.1.2-54)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n&gt;&gt;&gt; import numpy\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named numpy\n</code></pre>\n\n<p>Here is the output of sys.path:</p>\n\n<pre><code>&gt;&gt;&gt; print sys.path\n\n['', '/user/path/to/my_project', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python27.zip', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python2.7', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python2.7/plat-linux2', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python2.7/lib-tk', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python2.7/lib-old', \n'/opt/enthought/canopy-1.5.1/appdata/canopy-1.5.1.2730.rh5-x86_64/lib/python2.7/lib-dynload', \n'/user/path/to/my_project/lib/python2.7/site-packages']\n</code></pre>\n\n<p>How can I get my virtualenv to recognize the packages I have installed globally?</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": false, "score": 1, "last_activity_date": 1495668459, "creation_date": 1495668459, "answer_id": 44170023, "question_id": 44169968, "link": "https://stackoverflow.com/questions/44169968/counting-up-and-down-sequentially-using-loop/44170023#44170023", "title": "Counting up and down sequentially using loop", "body": "<p>One way is to use <a href=\"https://docs.python.org/2/library/itertools.html#itertools.chain\" rel=\"nofollow noreferrer\"><code>itertools.chain()</code></a> like:</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>import itertools as it\n\nexampleList = [5, 10, 60, 9, 3]\nforward_back = it.chain(exampleList, reversed(exampleList))\n\nfor i, list_value in enumerate(forward_back):\n    print i, list_value\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code>0 5\n1 10\n2 60\n3 9\n4 3\n5 3\n6 9\n7 60\n8 10\n9 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1495672779, "creation_date": 1495672779, "answer_id": 44170548, "question_id": 44169968, "link": "https://stackoverflow.com/questions/44169968/counting-up-and-down-sequentially-using-loop/44170548#44170548", "title": "Counting up and down sequentially using loop", "body": "<p>Another option is to append the reversed list when iterating:</p>\n\n<pre><code>for i, list_value in enumerate(exampleList + exampleList[::-1]):\n</code></pre>\n"}], "owner": {"reputation": 330, "user_id": 6372456, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c91c7dd915c811fd8ae0ea887fe8f99a?s=128&d=identicon&r=PG&f=1", "display_name": "nichollsg", "link": "https://stackoverflow.com/users/6372456/nichollsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 44170548, "answer_count": 2, "score": 2, "last_activity_date": 1495672779, "creation_date": 1495668079, "last_edit_date": 1495668604, "question_id": 44169968, "link": "https://stackoverflow.com/questions/44169968/counting-up-and-down-sequentially-using-loop", "title": "Counting up and down sequentially using loop", "body": "<p>I am writing a test that needs to plug in values from a list to a peripheral going forwards then backwards sequentially without breaking the loop. here is the structure I need to modify:</p>\n\n<pre><code>exampleList = [5 10 60 9 3]\n\nfor i, listValue in enumerate(exampleList):\n    self.log += 'Status: iteration {0}, sending {1}\\n'.format(i, listValue)\n    self.device.writeToPeripheral(listValue)\n    ...\n</code></pre>\n\n<p>I am trying to essentially write <code>[5 10 60 9 3 3 9 60 10 5]</code> (single or extra middle value doesn't matter) to an external device. Changing the list contents will mess up critical objects elsewhere in the environment for different tests. Is there a creative way in python to structure the loop to iterate going up the list, then back down immediately after? I could simply put this in a function and reverse the list after the first call, but I would like to avoid this approach if possible.</p>\n"}, {"tags": ["python", "url", "config"], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1495668903, "post_id": 44170003, "comment_id": 75355928, "body": "You need a &#39;?&#39; before the parameters."}], "tags": [], "owner": {"reputation": 668, "user_id": 2004343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7df5130097502eef3eabc2ec9de96ad?s=128&d=identicon&r=PG", "display_name": "Sevy", "link": "https://stackoverflow.com/users/2004343/sevy"}, "is_accepted": false, "score": 1, "last_activity_date": 1495669109, "last_edit_date": 1495669109, "creation_date": 1495668305, "answer_id": 44170003, "question_id": 44169949, "link": "https://stackoverflow.com/questions/44169949/python-dynamically-create-string-based-on-input/44170003#44170003", "title": "Python Dynamically Create String Based on Input", "body": "<p>One way to do this, if you're a fan of list comprehensions like I am:</p>\n\n<pre><code>params = [param1,param2,param3]\n\nquery_array = ['query%d=%s'%(ii+1,param) for ii,param in enumerate(params) if param]\nurl += '?'+'&amp;'.join(query_array)\n</code></pre>\n\n<p>This will eliminate the need to check all the params individually to see if they exist</p>\n"}, {"comments": [{"owner": {"reputation": 1229, "user_id": 2297299, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/15e68675eca887dc61ae08814905cdc4?s=128&d=identicon&r=PG", "display_name": "HectorOfTroy407", "link": "https://stackoverflow.com/users/2297299/hectoroftroy407"}, "edited": false, "score": 0, "creation_date": 1495670036, "post_id": 44170006, "comment_id": 75356186, "body": "Thanks I think I personally prefer this way. Cheers."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1495668338, "creation_date": 1495668338, "answer_id": 44170006, "question_id": 44169949, "link": "https://stackoverflow.com/questions/44169949/python-dynamically-create-string-based-on-input/44170006#44170006", "title": "Python Dynamically Create String Based on Input", "body": "<p>Store the fields in a dictionary as \"key:value\" pairs (you can read the file as dictionary using CSV reader) and append them to the base URL if needed:</p>\n\n<pre><code>fields = {'query1' : 'value1', 'query2' : '', 'query3' : 5, ...}\nif fields: # Avoid null fields\n    url += '?' + '&amp;'.join('{}={}'.format(k,v) for k,v in fields.items() if v)\n# '...?query1=value1&amp;query3=5'\n</code></pre>\n"}], "owner": {"reputation": 1229, "user_id": 2297299, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/15e68675eca887dc61ae08814905cdc4?s=128&d=identicon&r=PG", "display_name": "HectorOfTroy407", "link": "https://stackoverflow.com/users/2297299/hectoroftroy407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 44170006, "answer_count": 2, "score": 0, "last_activity_date": 1495669109, "creation_date": 1495667920, "question_id": 44169949, "link": "https://stackoverflow.com/questions/44169949/python-dynamically-create-string-based-on-input", "title": "Python Dynamically Create String Based on Input", "body": "<p>Looking for an elegant way to create a URL by reading in values from a config file.</p>\n\n<p>If I have the following three fields in a config file:</p>\n\n<pre><code>query1=\nquery2=\nquery3=\n</code></pre>\n\n<p>And I want to add them to a BASE_URL if they exist, what is an elegant way to do this?</p>\n\n<p>I know there is an ugly answer like:</p>\n\n<pre><code>url +='?query1={}'.format(param1) if param1 and Not param2 or param3\nurl +='?query1={}&amp;query2={}'.format(param1,param2) if param1 and param2 and Not param3\netc...\n</code></pre>\n\n<p>Is there an elegant pythonic solution to this? A way to abstract this idea? Thank you.</p>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "is_accepted": true, "score": 1, "last_activity_date": 1495668122, "creation_date": 1495668122, "answer_id": 44169976, "question_id": 44169933, "link": "https://stackoverflow.com/questions/44169933/flask-loading-screen-while-generating-a-pdf/44169976#44169976", "title": "Flask Loading Screen while generating a PDF", "body": "<p>Instead of routing user on a different URL after button is clicked, use JavaScript AJAX to call the download route and display some loader until your AJAX doesn't return something useful, whatever you return to it from your <code>download</code> route.</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 6890611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63f016d64cb5c3920f6332d746a19c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/6890611/julio"}, "is_accepted": false, "score": 0, "last_activity_date": 1495668222, "creation_date": 1495668222, "answer_id": 44169992, "question_id": 44169933, "link": "https://stackoverflow.com/questions/44169933/flask-loading-screen-while-generating-a-pdf/44169992#44169992", "title": "Flask Loading Screen while generating a PDF", "body": "<p>Flask is a server side framework. It can just communicate to your client using requests. What you need is a way to communicate to the server in a asynchronous way (using AJAX). You will send a request to the server asking for the PDF and while it waits for the response it will show the loading page or symbol. You can do this using JQuery (or something like that) on your client side code</p>\n"}], "owner": {"reputation": 1028, "user_id": 4778441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aec1041c8f9dbb419364f4612d33e323?s=128&d=identicon&r=PG&f=1", "display_name": "Jessi", "link": "https://stackoverflow.com/users/4778441/jessi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 44169976, "answer_count": 2, "score": 0, "last_activity_date": 1495668222, "creation_date": 1495667813, "question_id": 44169933, "link": "https://stackoverflow.com/questions/44169933/flask-loading-screen-while-generating-a-pdf", "title": "Flask Loading Screen while generating a PDF", "body": "<p>I'm trying to figure out a way where I can provide users with a loading screen.\nWhen users clicks a button (not submit), it will talk to the server and generates a PDF on-fly. This process takes about 3.2 seconds and I want to provide loading screen during that time. The problem that I am facing is that, a lot of available solutions for loading screen requires a page to reload ('post' in this case) to turn off the loading gif and this is giving me a trouble.\nBelow is my downloading PDF view function.\nI am looking for a solution where a loading screen will be provided upon clicking PDF download button and the loading screen will go away right before a PDF file is downloaded.</p>\n\n<pre><code>@post_user_blueprint.route('/download_pdf/&lt;string:test_id&gt;/&lt;string:created_on&gt;/&lt;string:test_type&gt;', methods=['GET', 'POST'])\n@login_required\n@human_readable_log('Downloaded a PDF')\ndef download(test_id, created_on, test_type):\n    from app.views.utility import PDFSystem\n\n    pdf_system = PDFSystem(test_id=test_id, created_on=created_on, test_type=test_type)\n    pdf = pdf_system.create_pdf('dynamic_pdf_template.html')\n    _filename = test_type +'_'+ test_id\n    response = make_response(pdf)\n    response.headers['Content-Type'] = 'application/pdf'\n    response.headers['Content-Disposition'] = 'attachment; filename=' + _filename\n\n    return response\n</code></pre>\n"}, {"tags": ["python", "date", "pandas", "dataframe", "merge"], "comments": [{"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 2, "creation_date": 1495668393, "post_id": 44169926, "comment_id": 75355783, "body": "In your merge pass the parameter how = &#39;outer&#39;. Default is inner"}, {"owner": {"reputation": 1, "user_id": 4199736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f3Fa8fzdTME/AAAAAAAAAAI/AAAAAAAAA0w/2xPifhUqocY/photo.jpg?sz=128", "display_name": "Enrique Martinez", "link": "https://stackoverflow.com/users/4199736/enrique-martinez"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1496162036, "post_id": 44169926, "comment_id": 75543139, "body": "it works like a charm, thank you"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1496164055, "post_id": 44169926, "comment_id": 75544229, "body": "Glad that it worked, you were almost there on your own so did&#39;t post it as an answer:)"}], "answers": [{"tags": [], "owner": {"reputation": 2503, "user_id": 1259561, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2Guia.jpg?s=128&g=1", "display_name": "THN", "link": "https://stackoverflow.com/users/1259561/thn"}, "is_accepted": false, "score": 0, "last_activity_date": 1495702226, "creation_date": 1495702226, "answer_id": 44176245, "question_id": 44169926, "link": "https://stackoverflow.com/questions/44169926/python-pandas-merge-three-dataframes-with-a-common-date-column-without-loosing/44176245#44176245", "title": "Python Pandas: Merge three DataFrames with a common date column without loosing any row on the final result", "body": "<p>How about:</p>\n\n<pre><code>result = first_dataframe \\\n         .merge(second_dataframe, on='DATE', how='outer') \\\n         .merge(thir_dataframe, on='DATE', how='outer')\n</code></pre>\n\n<p>Shorter code and the keyword is 'outer'.</p>\n"}], "owner": {"reputation": 1, "user_id": 4199736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f3Fa8fzdTME/AAAAAAAAAAI/AAAAAAAAA0w/2xPifhUqocY/photo.jpg?sz=128", "display_name": "Enrique Martinez", "link": "https://stackoverflow.com/users/4199736/enrique-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495702226, "creation_date": 1495667774, "question_id": 44169926, "link": "https://stackoverflow.com/questions/44169926/python-pandas-merge-three-dataframes-with-a-common-date-column-without-loosing", "title": "Python Pandas: Merge three DataFrames with a common date column without loosing any row on the final result", "body": "<p>I'm trying to merge 3 dataframes that have a common date column (used as index)</p>\n\n<p><strong>The first dataframe contains some values of air pollutans and precipitation:</strong></p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 DATE       \u2551 PRECIPITATION \u2551 PM 10   \u2551 PM 2.5  \u2551 NO2 \u2551 SO2     \u2551 CO  \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-01 \u2551 0.0           \u2551 129.2   \u2551 49.3    \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-02 \u2551 -9999.0       \u2551 -9999.0 \u2551 -9999.0 \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-03 \u2551 -9999.0       \u2551 NaN     \u2551 -9999.0 \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-04 \u2551 -9999.0       \u2551 -9999.0 \u2551 -9999.0 \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-05 \u2551 NaN           \u2551 NaN     \u2551 NaN     \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-06 \u2551 -9999.0       \u2551 -9999.0 \u2551 -9999.0 \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-07 \u2551 2.7           \u2551 78.1    \u2551 24.4    \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-08 \u2551 5.3           \u2551 99.9    \u2551 31.1    \u2551 NaN \u2551 NaN     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-09 \u2551 0.1           \u2551 116.5   \u2551 36.3    \u2551 NaN \u2551 -9999.0 \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-10 \u2551 0.0           \u2551 100.2   \u2551 30.8    \u2551 NaN \u2551 5.0     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-11 \u2551 0.0           \u2551 113.3   \u2551 34.5    \u2551 NaN \u2551 4.4     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-12 \u2551 0.0           \u2551 85.4    \u2551 28.6    \u2551 NaN \u2551 3.2     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-13 \u2551 0.0           \u2551 55.7    \u2551 16.6    \u2551 NaN \u2551 2.7     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-14 \u2551 5.0           \u2551 89.6    \u2551 27.4    \u2551 NaN \u2551 3.8     \u2551 NaN \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-15 \u2551 1.0           \u2551 109.9   \u2551 32.2    \u2551 NaN \u2551 4.6     \u2551 NaN \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p>...and the date continues until 2009-12-31</p>\n\n<p><strong>The second dataframe contains max, min and avg temperature values:</strong></p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 DATE       \u2551 min     \u2551 max  \u2551 avg      \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-01 \u2551 10.1    \u2551 13.1 \u2551 11.47    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-02 \u2551 13.3    \u2551 18.7 \u2551 16.38    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-03 \u2551 -9999.0 \u2551 13.1 \u2551 -2490.10 \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-04 \u2551 NaN     \u2551 NaN  \u2551 NaN      \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-05 \u2551 -9999.0 \u2551 20.8 \u2551 -698.73  \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-06 \u2551 11.4    \u2551 17.9 \u2551 14.64    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-07 \u2551 11.2    \u2551 18.9 \u2551 14.60    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-08 \u2551 10.2    \u2551 19.1 \u2551 14.65    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-09 \u2551 9.4     \u2551 18.4 \u2551 14.05    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-10 \u2551 9.2     \u2551 20.7 \u2551 13.85    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-11 \u2551 9.7     \u2551 17.8 \u2551 14.32    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-12 \u2551 12.4    \u2551 17.8 \u2551 14.83    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-13 \u2551 12.4    \u2551 17.1 \u2551 14.51    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-14 \u2551 7.0     \u2551 19.7 \u2551 13.77    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-01-15 \u2551 10.5    \u2551 17.0 \u2551 13.93    \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p><strong>And the third one contains number of ERA Outcomes:</strong></p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 DATE       \u2551 NUMBER OF CASES \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-01 \u2551 63.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-02 \u2551 38.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-03 \u2551 33.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-04 \u2551 161.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-05 \u2551 192.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-06 \u2551 164.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-07 \u2551 149.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-08 \u2551 159.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-09 \u2551 42.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-10 \u2551 44.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-11 \u2551 154.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-12 \u2551 143.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-13 \u2551 165.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-14 \u2551 166.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-15 \u2551 153.0           \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p>What I'm trying to do is to merge the three dataframes and generate one with all the data indexed by the same date.</p>\n\n<p>My code used is as follows:</p>\n\n<pre><code>import pandas.io.sql as psql\nimport pandas as pd\n\nconnection_first_second_dataf = pg.connect(\"dbname=db_1 user=postgres\")\nconnection_third_dataf = pg.connect(\"dbname=db_2 user=postgres\")\n\nfirst_dataframe = psql.read_sql(\"SELECT * FROM \\\"VIEW_1\\\"\", connection_first_second_dataf)\n\nsecond_dataframe = psql.read_sql(\"SELECT * FROM \\\"VIEW_2\\\"\", connection_first_second_dataf)\n\nthir_dataframe = psql.read_sql(\"SELECT * FROM \\\"VIEW_3\\\"\", connection_third_dataf)\n\n\ndataframe_result = pd.merge(first_dataframe,\n                           second_dataframe, \n                           on='DATE')\n\ndataframe_result = pd.merge(dataframe_result,\n                           thir_dataframe, \n                           on='DATE')\n</code></pre>\n\n<p>And the final result is as follows:</p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 DATE       \u2551 PRECIPITATION \u2551 PM 10 \u2551 PM 2.5 \u2551 NO2 \u2551 SO2 \u2551 CO      \u2551 min  \u2551 max  \u2551 avg   \u2551 NUMBER OF CASES \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-01 \u2551 4.0           \u2551 79.2  \u2551 31.2   \u2551 NaN \u2551 6.7 \u2551 0.5     \u2551 10.4 \u2551 17.2 \u2551 14.34 \u2551 63.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-02 \u2551 0.0           \u2551 82.2  \u2551 28.9   \u2551 NaN \u2551 7.3 \u2551 0.4     \u2551 12.5 \u2551 17.4 \u2551 14.76 \u2551 38.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-03 \u2551 0.2           \u2551 77.1  \u2551 23.0   \u2551 NaN \u2551 4.1 \u2551 0.4     \u2551 11.9 \u2551 16.4 \u2551 14.05 \u2551 33.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-04 \u2551 0.6           \u2551 53.8  \u2551 13.7   \u2551 NaN \u2551 2.3 \u2551 -9999.0 \u2551 11.4 \u2551 15.9 \u2551 13.35 \u2551 161.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-05 \u2551 0.7           \u2551 50.4  \u2551 17.0   \u2551 NaN \u2551 2.5 \u2551 -9999.0 \u2551 12.5 \u2551 18.6 \u2551 14.89 \u2551 192.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-06 \u2551 0.0           \u2551 76.1  \u2551 23.8   \u2551 NaN \u2551 5.1 \u2551 -9999.0 \u2551 11.8 \u2551 17.4 \u2551 14.43 \u2551 164.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-07 \u2551 0.3           \u2551 97.7  \u2551 34.0   \u2551 NaN \u2551 9.6 \u2551 -9999.0 \u2551 13.2 \u2551 20.6 \u2551 15.82 \u2551 149.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-08 \u2551 0.2           \u2551 69.6  \u2551 20.3   \u2551 NaN \u2551 5.5 \u2551 -9999.0 \u2551 11.6 \u2551 20.4 \u2551 15.49 \u2551 159.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-09 \u2551 0.0           \u2551 87.4  \u2551 26.3   \u2551 NaN \u2551 5.2 \u2551 -9999.0 \u2551 12.9 \u2551 19.4 \u2551 15.69 \u2551 42.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-10 \u2551 0.0           \u2551 74.6  \u2551 19.9   \u2551 NaN \u2551 3.6 \u2551 0.3     \u2551 12.8 \u2551 19.0 \u2551 15.52 \u2551 44.0            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-11 \u2551 0.6           \u2551 57.6  \u2551 17.1   \u2551 NaN \u2551 3.6 \u2551 -9999.0 \u2551 12.5 \u2551 20.2 \u2551 15.48 \u2551 154.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-12 \u2551 0.0           \u2551 63.7  \u2551 19.5   \u2551 NaN \u2551 4.7 \u2551 -9999.0 \u2551 9.9  \u2551 20.0 \u2551 14.97 \u2551 143.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-13 \u2551 0.0           \u2551 95.4  \u2551 27.6   \u2551 NaN \u2551 6.4 \u2551 -9999.0 \u2551 12.6 \u2551 20.8 \u2551 15.45 \u2551 165.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-14 \u2551 0.0           \u2551 101.7 \u2551 29.1   \u2551 NaN \u2551 5.0 \u2551 0.5     \u2551 11.7 \u2551 19.6 \u2551 14.94 \u2551 166.0           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 2009-05-15 \u2551 0.0           \u2551 112.5 \u2551 40.1   \u2551 NaN \u2551 8.0 \u2551 0.9     \u2551 11.7 \u2551 19.1 \u2551 14.81 \u2551 153.0           \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p>As we can see, first and second dataframe starts at 2009-01-01 and the third one at 2009-05-01, when I tried to merge the three dataframes into one, the final dataframe starts at 2009-05-01.</p>\n\n<p>My question is, how can I force to my final dataframe to start with the values at 2009-01-01? (no matter if 'Number of Cases' column has NaN values from 2009-01-01 until 2009-04-31, I know that I don't have any data for these dates).</p>\n\n<p>I have read the documentation of pandas, however I do not find any solution for what I need, sorry for my english too,</p>\n\n<p>thank you.</p>\n"}, {"tags": ["python", "arrays", "performance", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 2, "creation_date": 1495668173, "post_id": 44169879, "comment_id": 75355726, "body": "Your remarks also apply to <code>arr[::2]</code>. This is slower due to extra work parsing the index."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1495667459, "creation_date": 1495667459, "answer_id": 44169879, "question_id": 44169853, "link": "https://stackoverflow.com/questions/44169853/markedly-faster-to-access-a-numpy-array-arr-than-arr/44169879#44169879", "title": "Markedly faster to access a numpy array &#39;arr&#39; than &#39;arr[:]&#39;", "body": "<p>Neither <code>arr</code> nor <code>arr[:]</code> actually <em>access</em> the array's buffer. <code>arr</code> merely loads a reference to the array, while <code>arr[:]</code> constructs a new object backed by the same buffer. <code>arr[:]</code> is much more expensive, what with the object creation, but it still doesn't actually do anything with the backing buffer.</p>\n"}], "owner": {"reputation": 25119, "user_id": 2166823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/daI9F.jpg?s=128&g=1", "display_name": "joelostblom", "link": "https://stackoverflow.com/users/2166823/joelostblom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 44169879, "answer_count": 1, "score": 0, "last_activity_date": 1495667459, "creation_date": 1495667304, "question_id": 44169853, "link": "https://stackoverflow.com/questions/44169853/markedly-faster-to-access-a-numpy-array-arr-than-arr", "title": "Markedly faster to access a numpy array &#39;arr&#39; than &#39;arr[:]&#39;", "body": "<p>In the following scenario, why is it notably faster to access <code>arr</code> than <code>arr[:]</code> or <code>arr[::]</code>.</p>\n\n<pre><code>In [1]: import numpy as np\n\nIn [2]: arr = np.random.randint(0, 255, (512, 512))\n\nIn [3]: %timeit arr\n30.8 ns \u00b1 2.43 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\n\nIn [4]: %timeit arr[:]\n204 ns \u00b1 0.588 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [5]: %timeit arr[::]\n204 ns \u00b1 1.35 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [8]: np.all(arr == arr[:])\nOut[8]: True\n\nIn [9]: np.all(arr == arr[::])\nOut[9]: True\n</code></pre>\n\n<p>Aren't all the above approaches accessing a continuous block of elements in memory? Accessing a discontinuous block in memory <code>arr[::2]</code> is slower than <code>arr[:]</code>, but only marginally so compared to the differences between <code>a</code> and <code>a[:]</code>. </p>\n\n<pre><code>In [10]: %timeit arr[::2]\n221 ns \u00b1 2.96 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n</code></pre>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1495667934, "post_id": 44169891, "comment_id": 75355659, "body": "Just a note on the last one - set intersection will destroy the order of words found, so if the order is important the first example (list comprehension) should be used - after turning the dictionary into a set, of course."}, {"owner": {"reputation": 88, "user_id": 7670674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840425d7f6b1bb0076fb564c1a10820b?s=128&d=identicon&r=PG&f=1", "display_name": "RebornCodeLover", "link": "https://stackoverflow.com/users/7670674/reborncodelover"}, "edited": false, "score": 1, "creation_date": 1495671910, "post_id": 44169891, "comment_id": 75356641, "body": "Thank you Dekel for the solutions. Unfortunately, list comprehension took the same amount of time. But guess what, the set solution you had given is super fast."}], "tags": [], "owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "is_accepted": true, "score": 5, "last_activity_date": 1495667523, "creation_date": 1495667523, "answer_id": 44169891, "question_id": 44169836, "link": "https://stackoverflow.com/questions/44169836/how-to-speed-up-string-match-against-a-list-of-strings/44169891#44169891", "title": "How to speed up string match against a list of strings?", "body": "<p>Instead of creating a string and extend it you can use list comprehension for that:</p>\n\n<pre><code>matching_words = [x for x in all_strings if x in english_dict]\n</code></pre>\n\n<p>Now you can make a string from that list using <code>\", \".join(matching_sords)</code>.</p>\n\n<p>Another option - using two sets you can use the <code>&amp;</code> operator:</p>\n\n<pre><code>set(all_strings) &amp; set(english_dict)\n</code></pre>\n\n<p>The result here will be a set with the items you have in both lists.</p>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 7670674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840425d7f6b1bb0076fb564c1a10820b?s=128&d=identicon&r=PG&f=1", "display_name": "RebornCodeLover", "link": "https://stackoverflow.com/users/7670674/reborncodelover"}, "edited": false, "score": 0, "creation_date": 1495672185, "post_id": 44169892, "comment_id": 75356732, "body": "Zwer. Thanks for your help. I could solve the performance issue with set solution. Now it is wicked fast!!! Actually, my English dict is very small (just ~15k entries) whereas max(all_strings) is 3,628,800. Now with sets it is taking just less than a second."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 88, "user_id": 7670674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840425d7f6b1bb0076fb564c1a10820b?s=128&d=identicon&r=PG&f=1", "display_name": "RebornCodeLover", "link": "https://stackoverflow.com/users/7670674/reborncodelover"}, "edited": false, "score": 0, "creation_date": 1495672466, "post_id": 44169892, "comment_id": 75356807, "body": "If <code>all_strings</code> is that big, and you don&#39;t need to preserve the order, then definitely turn both <code>all_strings</code> and <code>english_dict</code> into sets (or even better - load them as sets) and use <code>all_strings.intersection(english_dict)</code> instead."}, {"owner": {"reputation": 88, "user_id": 7670674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840425d7f6b1bb0076fb564c1a10820b?s=128&d=identicon&r=PG&f=1", "display_name": "RebornCodeLover", "link": "https://stackoverflow.com/users/7670674/reborncodelover"}, "edited": false, "score": 0, "creation_date": 1495672620, "post_id": 44169892, "comment_id": 75356845, "body": "Yes, that is what I ended up doing. for w in set(all_strings) &amp; set(english_dict) is amazingly fast."}], "tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": false, "score": 5, "last_activity_date": 1495667525, "creation_date": 1495667525, "answer_id": 44169892, "question_id": 44169836, "link": "https://stackoverflow.com/questions/44169836/how-to-speed-up-string-match-against-a-list-of-strings/44169892#44169892", "title": "How to speed up string match against a list of strings?", "body": "<p>Provided you don't have issues with memory, turn your <code>english_dict</code> to <code>set</code> (if you do have memory issues, load your dictionary as a <code>set</code> to begin with): <code>english_dict = set(english_dict)</code>  (prior to the loop, of course)</p>\n\n<p>That should <strong>significantly</strong> speed up the look-up. If that's not enough, you'll have to resort to creating search trees and similar search optimizations.</p>\n"}], "owner": {"reputation": 88, "user_id": 7670674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840425d7f6b1bb0076fb564c1a10820b?s=128&d=identicon&r=PG&f=1", "display_name": "RebornCodeLover", "link": "https://stackoverflow.com/users/7670674/reborncodelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 44169891, "answer_count": 2, "score": 4, "last_activity_date": 1495667525, "creation_date": 1495667202, "question_id": 44169836, "link": "https://stackoverflow.com/questions/44169836/how-to-speed-up-string-match-against-a-list-of-strings", "title": "How to speed up string match against a list of strings?", "body": "<p>I have a list of strings. I am trying to find if any of these strings in the list appear in the english dictionary stored as another list. </p>\n\n<p>I observed the time it takes to find a match grows linearly. However, it becomes way too long when the original list has a few thousand strings.</p>\n\n<p>On my development EC2 instance, it takes ~2 seconds for 100 strings, ~15 seconds for 700 strings, ~100 seconds for 5000 strings, and ~800 seconds for 40000 strings!   </p>\n\n<p>Is there a way to speed this up? Thanks in advance.</p>\n\n<pre><code>    matching_word = \"\"\n    for w in all_strings:\n            if w in english_dict:\n                    if matching_word: # More than one possible word\n                            matching_word = matching_word + \",  \" + w\n                    else:\n                            matching_word = w\n</code></pre>\n"}, {"tags": ["python", "opencv", "orb"], "comments": [{"owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "edited": false, "score": 0, "creation_date": 1496142097, "post_id": 44169826, "comment_id": 75528653, "body": "Please read this <a href=\"http://stackoverflow.com/help/someone-answers\">&quot;What should I do when someone answers my question?&quot;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "is_accepted": true, "score": 1, "last_activity_date": 1495698973, "creation_date": 1495698973, "answer_id": 44175276, "question_id": 44169826, "link": "https://stackoverflow.com/questions/44169826/opencv-cant-draw-keypoints/44175276#44175276", "title": "OpenCV can&#39;t draw keypoints", "body": "<p>It's the syntax of the <code>cv2.drawKeypoints()</code> function, at least for <code>OpenCV 3.x</code>.</p>\n\n<p>If you execute <code>help(cv2.drawKeypoints)</code> after <code>import cv2</code>, you will get below which is self-explanatory.</p>\n\n<pre><code>Help on built-in function drawKeypoints:\n\ndrawKeypoints(...)\n    drawKeypoints(image, keypoints, outImage[, color[, flags]]) -&gt; outImage\n</code></pre>\n\n<p>The <code>pos(3)</code> is the output image, <code>outImage</code>, to be returned.</p>\n"}], "owner": {"reputation": 23, "user_id": 8062116, "user_type": "registered", "profile_image": "https://graph.facebook.com/688386528014251/picture?type=large", "display_name": "Miguel MG", "link": "https://stackoverflow.com/users/8062116/miguel-mg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6002, "favorite_count": 0, "accepted_answer_id": 44175276, "answer_count": 1, "score": 2, "last_activity_date": 1495698973, "creation_date": 1495667122, "last_edit_date": 1495698134, "question_id": 44169826, "link": "https://stackoverflow.com/questions/44169826/opencv-cant-draw-keypoints", "title": "OpenCV can&#39;t draw keypoints", "body": "<p>I tried to run the example code shown for <code>ORB</code> in the <code>openCV</code> page. First I had to figure out the problem of <code>cv2.ORB()</code> (changed to <code>cv2.ORB_create()</code>, the after this error, appeared this:</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"orb.py\", line 17, in &lt;module&gt;\n    img2 =cv2.drawKeypoints(img,kp,color=(0,255,0), flags=0)\nTypeError: Required argument 'outImage' (pos 3) not found\n</code></pre>\n\n<p>After doing a lot of things shown in blogs and manuals, I decided to add <code>img</code> to this function <code>img2 =cv2.drawKeypoints(img,kp,img,color=(0,255,0), flags=0)</code> because of the error in <code>pos (3)</code>. It finally worked good, but I'd like to know why only runs like this and no the way the official page states.</p>\n\n<p>BR.</p>\n"}, {"tags": ["python", "dictionary", "isinstance"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 5, "creation_date": 1495667052, "post_id": 44169797, "comment_id": 75355409, "body": "It&#39;s the other way around: <code>dict</code> is a subclass of <code>MutableMapping</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495667180, "post_id": 44169797, "comment_id": 75355440, "body": "Not all mutable mappings are dicts. It wouldn&#39;t make sense to have <code>MutableMapping</code> inherit from <code>dict</code>, let alone be an instance of it."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1495667257, "post_id": 44169797, "comment_id": 75355473, "body": "<code>dict</code> is <b>not</b> in the <code>__mro__</code> of <b>MutableMapping</b>."}], "owner": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1801, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1495666893, "creation_date": 1495666893, "question_id": 44169797, "link": "https://stackoverflow.com/questions/44169797/why-mutablemapping-is-not-instance-of-dict", "title": "Why MutableMapping is not instance of dict?", "body": "<p>I would like to create a dictionary-like object as recommended <a href=\"https://stackoverflow.com/questions/21361106/how-would-i-implement-a-dict-with-abstract-base-classes-in-python\">here</a>. Here is my example:</p>\n\n<pre><code>import collections\n\n\nclass DictLike(collections.MutableMapping):\n    def __init__(self, *args, **kwargs):\n        self.store = dict()\n        self.update(dict(*args, **kwargs))\n\n    def __getitem__(self, key):\n        return self.store[key]\n\n    def __setitem__(self, key, value):\n        self.store[key] = value\n\n    def __delitem__(self, key):\n        del self.store[key]\n\n    def __iter__(self):\n        return iter(self.store)\n\n    def __len__(self):\n        return len(self.store)\n\n\nprint(isinstance(dict(), collections.MutableMapping))\n# &gt;&gt; True\nprint(isinstance(DictLike(), dict))\n# &gt;&gt; False\n</code></pre>\n\n<p>For some reason, <code>isinstance</code> of the instance of my class <code>DictLike</code> is <code>False</code>. Why is this so? I expected that inheriting and implementing <code>MutableMapping</code> would be pretty much the same as normal dictionary.</p>\n\n<p>I believe it is possible to override <code>__instancecheck__</code> method as described <a href=\"https://docs.python.org/2/reference/datamodel.html#customizing-instance-and-subclass-checks\" rel=\"nofollow noreferrer\">here</a>, but I don't know if it is a good idea and would be pythonic way?</p>\n"}, {"tags": ["python", "python-2.7", "conda", "pymatgen"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1495667088, "post_id": 44169769, "comment_id": 75355414, "body": "I think this guide may help <a href=\"https://conda.io/docs/py2or3.html#use-a-different-version-of-python\" rel=\"nofollow noreferrer\">conda.io/docs/py2or3.html#use-a-different-version-of-python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "edited": false, "score": 1, "creation_date": 1495673594, "post_id": 44169925, "comment_id": 75357049, "body": "Please read this <a href=\"http://stackoverflow.com/help/how-to-answer\">how-to-answer</a> for providing quality answer."}], "tags": [], "owner": {"reputation": 21, "user_id": 9636650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d40de1877877960ea8cf05255fbfe999?s=128&d=identicon&r=PG&f=1", "display_name": "Emad M", "link": "https://stackoverflow.com/users/9636650/emad-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1507259449, "last_edit_date": 1507259449, "creation_date": 1495667772, "answer_id": 44169925, "question_id": 44169769, "link": "https://stackoverflow.com/questions/44169769/how-to-install-pymatgen-for-python-2-7-x-and-not-3-6/44169925#44169925", "title": "How to install pymatgen for Python 2.7.x and not 3.6", "body": "<p>Have you tried pip ?</p>\n\n<p>But first install <code>NumPy</code> as they mentioned <a href=\"http://pymatgen.org/#pip\" rel=\"nofollow noreferrer\">Here</a></p>\n\n<p>then use : <code>pip install pymatgen</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9190998, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fea95fe8de2811bee27c1a578298dc66?s=128&d=identicon&r=PG", "display_name": "Gemechis Degaga", "link": "https://stackoverflow.com/users/9190998/gemechis-degaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1515472448, "last_edit_date": 1515472448, "creation_date": 1515471108, "answer_id": 48161327, "question_id": 44169769, "link": "https://stackoverflow.com/questions/44169769/how-to-install-pymatgen-for-python-2-7-x-and-not-3-6/48161327#48161327", "title": "How to install pymatgen for Python 2.7.x and not 3.6", "body": "<p>Restarted from running Miniconda3-latest-MacOSX-x86_64.sh, instead of  Miniconda2-latest-MacOSX-x86_64.sh.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10375424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67423f0ce021f95ee2d5230acd524123?s=128&d=identicon&r=PG", "display_name": "Shyue Ping Ong", "link": "https://stackoverflow.com/users/10375424/shyue-ping-ong"}, "is_accepted": false, "score": 0, "last_activity_date": 1537192904, "creation_date": 1537192904, "answer_id": 52369560, "question_id": 44169769, "link": "https://stackoverflow.com/questions/44169769/how-to-install-pymatgen-for-python-2-7-x-and-not-3-6/52369560#52369560", "title": "How to install pymatgen for Python 2.7.x and not 3.6", "body": "<p>Whatever conda you installed, you can create a specific Python 2.7 environment using</p>\n\n<pre><code>conda create --name py27 python=2.7\n</code></pre>\n\n<p>You should then be able to follow all the steps for Python 2.7 install.</p>\n"}], "owner": {"reputation": 11, "user_id": 8062090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc12475088fb42eba3f7f8ddea0c00ee?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8062090/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1537192904, "creation_date": 1495666681, "last_edit_date": 1495680563, "question_id": 44169769, "link": "https://stackoverflow.com/questions/44169769/how-to-install-pymatgen-for-python-2-7-x-and-not-3-6", "title": "How to install pymatgen for Python 2.7.x and not 3.6", "body": "<p>The pymatgen module is supposed to work for Python 2.7.x or 3.  Files for both are available (<a href=\"https://anaconda.org/matsci/pymatgen/files\" rel=\"nofollow noreferrer\">https://anaconda.org/matsci/pymatgen/files</a>).  My Python (sys.version) is 2.7.11.</p>\n\n<p>I tried installing with standard: <code>\"conda install -c mastic pymatgen\"</code>, but it returns an error:</p>\n\n<pre><code>\"Fetching package metadata ...........                                                                       \nSolving package specifications: .                                                                           \n\nUnsatisfiableError: The following specifications were found to be in conflict:                              \n  - pymatgen -&gt; python 3.6*                                                                                 \n  - python 3.5*                                                                                             \nUse \"conda info &lt;package&gt;\" to see the dependencies for each package.\"\n</code></pre>\n\n<p>It looks like it is trying to install the pymatgen module for Python 3 and I am a version short. </p>\n\n<p>I want to install the 2.7.x compatible version, but can't find instructions on how to force the conda install to do that.</p>\n\n<p>I can't upgrade to 3.6 for other reasons.</p>\n"}, {"tags": ["python", "python-3.x", "loops", "dictionary", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": true, "score": 18, "last_activity_date": 1495666996, "creation_date": 1495666996, "answer_id": 44169811, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/44169811#44169811", "title": "Implement a group_by_owners dictionary", "body": "<p>Holly molly, that's a lot of code for something so simple:</p>\n\n<pre><code>def group_by_owners(files):\n    result = {}\n    for file, owner in files.items():  # use files.iteritems() on Python 2.x\n        result[owner] = result.get(owner, []) + [file]  # you can use setdefault(), too\n    return result\n\nfiles = {\n    'Input.txt': 'Randy',\n    'Code.py': 'Stan',\n    'Output.txt': 'Randy'\n}\n\nprint(group_by_owners(files))\n# {'Stan': ['Code.py'], 'Randy': ['Output.txt', 'Input.txt']}\n</code></pre>\n\n<p>You can simplify it even further by using <code>collections.defaultdict</code> for <code>result</code> and initializing all its keys to <code>list</code> - then you don't even need to do the acrobatics of creating a new list if it's not already there before appending to it.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4089610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0690124b804f9ce6a4961cc404abd3df?s=128&d=identicon&r=PG&f=1", "display_name": "Sridutt", "link": "https://stackoverflow.com/users/4089610/sridutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1533428183, "last_edit_date": 1533428183, "creation_date": 1533426831, "answer_id": 51690427, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/51690427#51690427", "title": "Implement a group_by_owners dictionary", "body": "<p>I just started learning and I am a noob at python too but used 2.7. So spare me the parentheses for prints.</p>\n\n<p>I like your idea of dummy list and append. Something similar but may be a little cleaner:</p>\n\n<pre><code>files = {\n    'Input.txt': 'Randy',\n    'Code.py': 'Stan',\n    'Output.txt': 'Randy'\n}\nowners=[]\nfilenames=files.keys()\nfor key in files:\n    if files[key] not in owners:\n        owners.append(files[key])\nprint owners\nprint filenames\n\nresult={}\nfor i in owners:\n    resultvalues=[]\n    for key in files:\n        if files[key]==i: \n            resultvalues.append(key)\n            print resultvalues\n            result[i]=resultvalues\nprint result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6835799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d203f4fd098c4a42a59fb2d30bb4d6?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/6835799/santhosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1536927926, "creation_date": 1536927926, "answer_id": 52331980, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/52331980#52331980", "title": "Implement a group_by_owners dictionary", "body": "<p>here I mentioning easily understandable solution,</p>\n\n<pre><code>owner = []\nfor i in dict1.keys():\nif j not in owner:\n    owner.append(j)\nresults = {}\nfor i in owner:\n    result = []\n    for j in dict1.keys():\n        if dict1.get(j) == i:\n            result.append(j)\n        results[i] = result\nprint results\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 1, "creation_date": 1537229056, "post_id": 52376827, "comment_id": 91698925, "body": "An explanation to the code will make for better answer"}], "tags": [], "owner": {"reputation": 1, "user_id": 10377510, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Ahts36LVZ4/AAAAAAAAAAI/AAAAAAAACFQ/WB3UG3a6or8/photo.jpg?sz=128", "display_name": "Andrej Kratofil", "link": "https://stackoverflow.com/users/10377510/andrej-kratofil"}, "is_accepted": false, "score": 0, "last_activity_date": 1537226016, "creation_date": 1537226016, "answer_id": 52376827, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/52376827#52376827", "title": "Implement a group_by_owners dictionary", "body": "<pre><code>def group_by_owners(files):    \n    values = []\n    dic = {}\n\n    for k,v in files.items():\n        values.append(v)\n\n    s_values = set(values)\n    l_values = list(s_values)\n\n    for i in l_values:\n        keys=[] \n        for k,v in files.items():\n            if v == i:\n             keys.append(k)\n        dic[i]=keys            \n\n    return dic\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 777, "user_id": 8520303, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-fH1VenuRdI8/AAAAAAAAAAI/AAAAAAAAABQ/1llqNGZTiVY/photo.jpg?sz=128", "display_name": "sudhir tataraju", "link": "https://stackoverflow.com/users/8520303/sudhir-tataraju"}, "is_accepted": false, "score": 0, "last_activity_date": 1537419982, "creation_date": 1537419982, "answer_id": 52417937, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/52417937#52417937", "title": "Implement a group_by_owners dictionary", "body": "<p>You all seems better I took 3.5 hours to get answer with lot of try and error as am new to python and weak in thinking focused, thanks to @zwer for teaching something new.</p>\n\n<pre><code>dic={'apple':['green','red'], 'power': ['voltage'],'banana': ['green','red'],'current':['voltage'],'grass':['green'],'tiger':['lion']}\n\n\ni = 0\nadic = {}\nwhile i &lt; len(dic):\n    key = list(dic)[i]\n    for key2 in list(dic):\n        if key2 != key:\n            j = 0\n            while j &lt; len(dic[key]):\n                if dic[key][j] in dic[key2]:\n                    color = dic[key][j]\n                    if dic[key][j] in adic:\n                        if key not in adic[color]:\n                            adic[dic[key][j]].append(key)\n\n                    else:\n                        mdic = {dic[key][j]: [key]}\n                        adic.update(mdic)\n                else:\n                    if dic[key][j] not in adic:\n                        mdic = {dic[key][j]: [key]}\n                        adic.update(mdic)\n                j = j + 1\n    i = i + 1\nprint(adic)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 2, "creation_date": 1539059632, "post_id": 52712465, "comment_id": 92352454, "body": "While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value."}], "tags": [], "owner": {"reputation": 1, "user_id": 10476060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6a9426f29188d9707a68bd1399a626?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit\u30c4", "link": "https://stackoverflow.com/users/10476060/sumit%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1539051716, "creation_date": 1539051716, "answer_id": 52712465, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/52712465#52712465", "title": "Implement a group_by_owners dictionary", "body": "<pre><code>class FileOwners:\n    def group_by_owners(files):\n    temp=[]\n\n    for i in files:\n        if files[i] not in temp:\n            temp.append (files[i])\n        result={}\n\n    for j in temp:\n        temp1=[]\n        for i in files:\n            if files[i]==j: \n                temp1.append(i)\n                result[j]=temp1\n    return (result)\n\nfiles = {'Input.txt': 'Randy',\n        'Code.py': 'Stan',\n        'Output.txt': 'Randy'}\n\nprint(FileOwners.group_by_owners(files))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7378608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nkKrdYzNYRo/AAAAAAAAAAI/AAAAAAAABag/HrNyIyeK8Ow/photo.jpg?sz=128", "display_name": "SURENDER MOHAN", "link": "https://stackoverflow.com/users/7378608/surender-mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1539847707, "last_edit_date": 1539847707, "creation_date": 1539847564, "answer_id": 52868988, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/52868988#52868988", "title": "Implement a group_by_owners dictionary", "body": "<p>You have to iterate Dictionary into Dictionary and compare values and append keys in a new list. Take output in a new Dictionary.</p>\n\n<pre><code>class FileOwners:\n\n    @staticmethod\n\n    def group_by_owners(files):\n        new_dic = {}\n\n        for key,val in files.items():\n            key_list = []\n            for k,v in files.items():\n\n                if v == val:\n                    #print(v)\n                    key_list.append(k)\n                    new_dic[v]= key_list\n\n        return new_dic\n        #print(new_dic)\nfiles = {\n    'Input.txt': 'Randy',\n    'Code.py': 'Stan',\n    'Output.txt': 'Randy'\n}\nprint(FileOwners.group_by_owners(files))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 11483337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581496a27a8c6cebe71e5c808c348ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben", "link": "https://stackoverflow.com/users/11483337/ruben"}, "is_accepted": false, "score": 7, "last_activity_date": 1557526058, "creation_date": 1557526058, "answer_id": 56085377, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/56085377#56085377", "title": "Implement a group_by_owners dictionary", "body": "<p>I personally found the upvoted answer hard to understand and some others a bit bulky. Here is my version: </p>\n\n<pre><code>def group_by_owners(files):\n\nownerdict = {}\n\nfor key, value in files.items():\n    if value in ownerdict:\n        ownerdict[value].append(key)\n    else:\n        ownerdict[value] = [key]\nreturn ownerdict\n\n\nfiles = {\n    'Input.txt': 'Randy',\n    'Code.py': 'Stan',\n    'Output.txt': 'Randy'\n}\nprint(group_by_owners(files))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 1, "creation_date": 1559112384, "post_id": 56354332, "comment_id": 99313332, "body": "While this code snippet may be the solution, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-%E2%80%8C%E2%80%8Bcode-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 1, "user_id": 10551047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db85863c6547cef994362e76db6529a8?s=128&d=identicon&r=PG&f=1", "display_name": "Prajwal", "link": "https://stackoverflow.com/users/10551047/prajwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1559687225, "last_edit_date": 1559687225, "creation_date": 1559111308, "answer_id": 56354332, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/56354332#56354332", "title": "Implement a group_by_owners dictionary", "body": "<p>I made a dict of owners and their associated list of filenames. To do that i firstly created the dictionary with the values of the passed dictionary <code>files</code> as keys and empty list as values. Then looped through <code>files</code> and appended the empty list with the keys of <code>files</code></p>\n\n<pre><code>def group_by_owners(files):\n    return_dict = {}\n    owner_files = files.keys()\n    for f in owner_files:\n        return_dict[files[f]] = []\n    for f, n in files.items():\n        return_dict[n].append(f)\n    return return_dict\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7079842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EyA5V411Vcc/AAAAAAAAAAI/AAAAAAAABJc/EAa8V1zkZug/photo.jpg?sz=128", "display_name": "Poornima Tom", "link": "https://stackoverflow.com/users/7079842/poornima-tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1569131302, "creation_date": 1569131302, "answer_id": 58046393, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/58046393#58046393", "title": "Implement a group_by_owners dictionary", "body": "<p>I started learning Python yesterday and came across this question on testdome. Here's my answer :</p>\n\n<pre><code>def group_by_owners(files):\n    f = files.values()\n    s = set(f)\n    newdict={}\n    fileOwners = list(s)\n    for owner in fileOwners:\n        l=[]\n        for file in files:\n            if owner == files[file]:\n                l.append(file)\n        newdict[owner]=l\n    return newdict\n\n\nfiles = {\n    'Input.txt': 'Randy',\n    'Code.py': 'Stan',\n    'Output.txt': 'Randy'\n}   \nprint(group_by_owners(files))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12472612, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c72bb87a0f2e8ca0eed4ade2a5f7dad1?s=128&d=identicon&r=PG", "display_name": "Sandermerv", "link": "https://stackoverflow.com/users/12472612/sandermerv"}, "is_accepted": false, "score": 0, "last_activity_date": 1575362008, "last_edit_date": 1575362008, "creation_date": 1575360020, "answer_id": 59152515, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/59152515#59152515", "title": "Implement a group_by_owners dictionary", "body": "<ol>\n<li>This is some complex code to understand.</li>\n<li><p>but is one of the solutions.</p>\n\n<pre><code>    files={\n      'input.txt':'randy',\n      'output.txt':'randy',\n      'code.py':'stan'\n      }\n  k=files.keys()\n  newfiles={value:key for key,value in files.items()}\n  emptylist=[]\n  for key in k:\n      if key not in newfiles.values():\n          missfile=key\n          valuetoadd=files[missfile]\n  emptylist.append(newfiles[valuetoadd])\n  emptylist.append(missfile)\n  newfiles[valuetoadd]=emptylist\n  print(newfiles)\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5825931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d49e7dec61b614ae35b75151e9baba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh tripathi", "link": "https://stackoverflow.com/users/5825931/rakesh-tripathi"}, "is_accepted": false, "score": 1, "last_activity_date": 1579614531, "creation_date": 1579614531, "answer_id": 59842585, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/59842585#59842585", "title": "Implement a group_by_owners dictionary", "body": "<p>This worked for me. I believe this would be more efficient and simpler one.</p>\n\n<pre><code># Input dictionary.\nfiles = {\n        'Input.txt': 'Randy',\n        'Code.py': 'Stan',\n        'Output.txt': 'Randy'\n    }   \n# Function to group the files.   \ndef group_by_owners(files):\n\n    # Dictionary object to hold the result.\n    result = {}\n\n    for key, value in files.items():\n\n        if value not in result.keys():\n\n            # Insert the values into the resulting dictionary\n            # by interchanging the key, values.\n            result[value] = [key]\n        else:\n\n            # Append the othet file name if the owner is same.\n            result[value].append(key)\n\n    return result\n\nprint(group_by_owners(files))\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>{'Randy': ['Input.txt', 'Output.txt'], 'Stan': ['Code.py']}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14270127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b92cfc76abcd997f1dc2804a3774bd9?s=128&d=identicon&r=PG&f=1", "display_name": "Warld", "link": "https://stackoverflow.com/users/14270127/warld"}, "is_accepted": false, "score": 0, "last_activity_date": 1610459865, "last_edit_date": 1610459865, "creation_date": 1600006267, "answer_id": 63871748, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary/63871748#63871748", "title": "Implement a group_by_owners dictionary", "body": "<p>Here is my answer with defaultdict:</p>\n<pre><code>    from collections import defaultdict\n    \n    d = defaultdict(list)\n\n    def group_by_owners(files):\n        for k,v in files.items():\n            d[v].append(k)\n        return dict(d.items())\n\n    if __name__ == &quot;__main__&quot;:    \n        files = {\n            'Input.txt': 'Randy',\n            'Code.py': 'Stan',\n            'Output.txt': 'Randy'\n        }   \n        print(group_by_owners(files))\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3539697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wLNyB.jpg?s=128&g=1", "display_name": "4mAstro", "link": "https://stackoverflow.com/users/3539697/4mastro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13223, "favorite_count": 2, "closed_date": 1607545345, "accepted_answer_id": 44169811, "answer_count": 13, "score": 3, "last_activity_date": 1610459865, "creation_date": 1495666401, "question_id": 44169735, "link": "https://stackoverflow.com/questions/44169735/implement-a-group-by-owners-dictionary", "closed_reason": "Needs more focus", "title": "Implement a group_by_owners dictionary", "body": "<p>I made a successful attempt on the TestDome.com Fileowners problem and wanted to see if anyone had suggestions to simplify my answer.  The online IDE uses Python 3.5.1.  If you are trying to do the problem yourself and are just looking for an answer, here's one.  I am by know means a Python expert so this took me quite a while to produce with lots of tinkering.  Any comments at all would be helpful even if its about syntax or general cleanliness.   THANKS!</p>\n\n<p>Implement a group_by_owners function that:</p>\n\n<p>Accepts a dictionary containing the file owner name for each file name.\nReturns a dictionary containing a list of file names for each owner name, in any order.\nFor example, for dictionary {'Input.txt': 'Randy', 'Code.py': 'Stan', 'Output.txt': 'Randy'} the group_by_owners function should return {'Randy': ['Input.txt', 'Output.txt'], 'Stan': ['Code.py']}.</p>\n\n<pre><code>class FileOwners:\n\n@staticmethod\ndef group_by_owners(files):\n    val = (list(files.values()))                    #get values from dict\n    val = set(val)                                  #make values a set to remove duplicates\n    val = list(val)                                 #make set a list so we can work with it\n    keyst = (list(files.keys()))                    #get keys from dict\n    result = {}                                     #creat empty dict for output\n    for i in range(len(val)):                       #loop over values(owners)\n        for j in range(len(keyst)):                 #loop over keys(files)\n            if val[i]==list(files.values())[j]:     #boolean to pick out files for current owner loop\n                dummylist = [keyst[j]]              #make string pulled from dict a list so we can add it to the output in the correct format\n                if val[i] in result:                #if the owner is already in the output add the new file to the existing dictionary entry\n                    result[val[i]].append(keyst[j]) #add the new file\n                else:                               #if the owner is NOT already in the output make a new entry \n                    result[val[i]] = dummylist      #make a new entry\n    return result\n\nfiles = {\n'Input.txt': 'Randy',\n'Code.py': 'Stan',\n'Output.txt': 'Randy'\n}\n\nprint(FileOwners.group_by_owners(files))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'Stan': ['Code.py'], 'Randy': ['Output.txt', 'Input.txt']} \n</code></pre>\n"}, {"tags": ["python", "api-design", "library-design"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1495666406, "post_id": 44169706, "comment_id": 75355229, "body": "If you don&#39;t implement it, what happens?"}, {"owner": {"reputation": 3449, "user_id": 412772, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/065e54c048ddfbfd67cc6fbd8421324a?s=128&d=identicon&r=PG", "display_name": "viblo", "link": "https://stackoverflow.com/users/412772/viblo"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1495702070, "post_id": 44169706, "comment_id": 75367032, "body": "Its just a matter of style, so if I dont implement it then a user of the library that want a copy have to use the <code>copy.deepcopy</code> method."}], "owner": {"reputation": 3449, "user_id": 412772, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/065e54c048ddfbfd67cc6fbd8421324a?s=128&d=identicon&r=PG", "display_name": "viblo", "link": "https://stackoverflow.com/users/412772/viblo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495666158, "creation_date": 1495666158, "question_id": 44169706, "link": "https://stackoverflow.com/questions/44169706/python-api-design-add-copy-method-to-object-or-defer-to-copy-library", "title": "Python api design, add copy method to object or defer to copy library", "body": "<p>I have a library (pymunk) Im maintaining. Should I add my own <code>copy()</code> method on all the relevant classes or let the users of the library use the standard library copy.deepcopy method when they want a copy?</p>\n\n<p>Recently a user asked about a method to copy a world object. At that time the library did not support any way to do this. However, now I have added support for pickle, so as a consequence copy.deepcopy automatically works. </p>\n\n<p>The question is if its best to have a copy method on the objects provided by the library or just defer to the copy.deepcopy in the standard library. Some other libraries provides their own copy method, such as numpy array copy and pandas dataframe copy. </p>\n\n<p>Adding a extra copy method is not very complicated since I can just call deepcopy, like this:</p>\n\n<pre><code>import copy\n\nclass A():\n  def copy(self):\n    return copy.deepcopy(self)\n</code></pre>\n\n<p>My concern is about clarity and ease of use. (the python zen \"There should be one\u2014and preferably only one\u2014obvious way to do it.\")</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495666003, "post_id": 44169672, "comment_id": 75355097, "body": "<code>input_list</code> is already a list, you don&#39;t need to put it in brackets."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1495666029, "post_id": 44169672, "comment_id": 75355104, "body": "You need to indent the function body."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1495666136, "post_id": 44169672, "comment_id": 75355138, "body": "I don&#39;t see a question anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8038568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcQYw.png?s=128&g=1", "display_name": "RBU", "link": "https://stackoverflow.com/users/8038568/rbu"}, "edited": false, "score": 0, "creation_date": 1495666358, "post_id": 44169690, "comment_id": 75355212, "body": "thanks for pointing out my stupidity. Am  a beginner here. Thanks a ton. Greatly appreciate. Cheers"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495666495, "post_id": 44169690, "comment_id": 75355255, "body": "Not stupidity, merely ignorance -- and we all start there."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1495666055, "creation_date": 1495666055, "answer_id": 44169690, "question_id": 44169672, "link": "https://stackoverflow.com/questions/44169672/unable-to-create-a-list-function-python/44169690#44169690", "title": "Unable to create a list function--Python", "body": "<p>Don't wrap your input in another layer of <code>list</code>.</p>\n\n<pre><code>sorted_list= sorted([input_list], reverse=True)\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>sorted_list = sorted(input_list, reverse=True)\n</code></pre>\n\n<p>or it's just sorting a one-item <code>list</code> (containing the whole of the <code>list</code> provided).</p>\n\n<p>Side-note: For real world code, just <a href=\"https://docs.python.org/3/library/heapq.html#heapq.nlargest\" rel=\"nofollow noreferrer\">use <code>heapq.nlargest</code></a>, which scales to large inputs and small numbers of items to select better than a global sort and slice:</p>\n\n<pre><code>import heapq\n\ndef top_three(input_list):\n    return heapq.nlargest(3, input_list)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8038568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcQYw.png?s=128&g=1", "display_name": "RBU", "link": "https://stackoverflow.com/users/8038568/rbu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 44169690, "answer_count": 1, "score": -2, "last_activity_date": 1527218013, "creation_date": 1495665936, "last_edit_date": 1495666109, "question_id": 44169672, "link": "https://stackoverflow.com/questions/44169672/unable-to-create-a-list-function-python", "title": "Unable to create a list function--Python", "body": "<p>Write a function, top_three, that takes a list as its argument, and returns a list of the three largest elements. For example, <code>top_three([2,3,5,6,8,4,2,1]) == [8, 6, 5]</code>. My attempt:</p>\n\n<pre><code>def top_three(input_list):\n\nsorted_list= sorted([input_list], reverse=True)\n\ntop_three = sorted_list[ :2]\n\nreturn top_three\n</code></pre>\n"}, {"tags": ["python", "anaconda", "py2app"], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 4174811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3befeba71e2e9d01dc84a6648c23c5fd?s=128&d=identicon&r=PG&f=1", "display_name": "Babak Hashemi", "link": "https://stackoverflow.com/users/4174811/babak-hashemi"}, "is_accepted": false, "score": 4, "last_activity_date": 1508061798, "creation_date": 1508061798, "answer_id": 46753819, "question_id": 44169646, "link": "https://stackoverflow.com/questions/44169646/py2app-failing-with-anaconda-python-3/46753819#46753819", "title": "py2app failing with Anaconda Python 3", "body": "<p>I had same problem with miniconda and py2app. I could fix it by creating a symlink!</p>\n\n<pre><code> ln -s /path/to/lib/libpython3.5m.dylib /path/to/lib/libpython3.5.dylib\n</code></pre>\n"}], "owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508061798, "creation_date": 1495665819, "question_id": 44169646, "link": "https://stackoverflow.com/questions/44169646/py2app-failing-with-anaconda-python-3", "title": "py2app failing with Anaconda Python 3", "body": "<p>I am trying to build my wxPython application with Python 3 using py2app.  Before I updated my code to Python 3, I was able to do this successfully in Python 2.</p>\n\n<p>After fixing a few initial problems (had to <code>sys.setrecursionlimit(2000)</code> and downgrade to Python 3.5), I got stuck here:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"setup_pmag_gui.py\", line 23, in &lt;module&gt;\n    setup_requires=['py2app'],\n  File \"/Users/****/anaconda/lib/python3.5/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/Users/****/anaconda/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/Users/****/anaconda/lib/python3.5/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Users/****/my_project/.eggs/py2app-0.13-py3.5.egg/py2app/build_app.py\", line 757, in run\n    self._run()\n  File \"/Users/****/my_project/.eggs/py2app-0.13-py3.5.egg/py2app/build_app.py\", line 967, in _run\n    self.run_normal()\n  File \"/Users/****/my_project/.eggs/py2app-0.13-py3.5.egg/py2app/build_app.py\", line 1075, in run_normal\n    self.create_binaries(py_files, pkgdirs, extensions, loader_files)\n  File \"/Users/****/my_project/.eggs/py2app-0.13-py3.5.egg/py2app/build_app.py\", line 1385, in create_binaries\n    mm.mm.run_file(runtime)\n  File \"/Users/****/my_project/.eggs/macholib-1.8-py3.5.egg/macholib/MachOGraph.py\", line 83, in run_file\nValueError: '/Users/****/anaconda/lib/libpython3.5.dylib' does not exist\n</code></pre>\n\n<p>/Users/****/anaconda/lib/libpython3.5m.dylib does exist, though.  Is there a way to tell MachOGraph how to find this?</p>\n\n<p>I am on OS X 10.12.4, using Anaconda Python 3.5.  My version of py2app is 0.13.</p>\n\n<p>This is what my setup.py file looks like:</p>\n\n<pre><code>from setuptools import setup\nimport sys\nimport os\ndirectory = os.getcwd()\nsys.setrecursionlimit(3000)\n\nAPP = ['programs/pmag_gui.py']\nDATA_FILES = [('', ['dialogs/help_files', 'pmagpy/data_model', 'programs/images'])]\nOPTIONS = {'argv_emulation': False,\n       'iconfile': os.path.join(directory, 'programs', 'images', 'text_x_xslfo.icns')}\n\nsetup(\n    app=APP,\n    data_files=DATA_FILES,\n    options={'py2app': OPTIONS},\n    setup_requires=['py2app'],\n\n)\n</code></pre>\n\n<p>After reading the <a href=\"https://py2app.readthedocs.io/en/latest/tweaking.html\" rel=\"nofollow noreferrer\">Tweaking your Info.plist py2app documentation</a>, and <a href=\"https://stackoverflow.com/questions/39379155/how-do-i-use-py2app-with-anaconda-python\">this question</a>, I tried adding to OPTIONS:</p>\n\n<pre><code>'plist': dict(PyRuntimeLocations=['/Users/****/anaconda/lib/libpython3.5m.dylib'])\n</code></pre>\n\n<p>But I get the same exact error message as before.  </p>\n\n<p>Any suggestions on how to solve this, or what documentation to look at?</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1495665919, "post_id": 44169612, "comment_id": 75355081, "body": "&quot;...but breaks when a bold or italicized line is present...&quot; Please show the code that breaks, and the error message, if any."}, {"owner": {"reputation": 35, "user_id": 7788366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ca518b4dd0c4713659a0ccc768cd95?s=128&d=identicon&r=PG&f=1", "display_name": "schustda", "link": "https://stackoverflow.com/users/7788366/schustda"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1495666680, "post_id": 44169612, "comment_id": 75355311, "body": "Apologies, &#39;break&#39;, was the wrong word choice. It just does not provide the full result that others pages provide. I added my code as wells as sample pages..."}, {"owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "edited": false, "score": 0, "creation_date": 1495667290, "post_id": 44169612, "comment_id": 75355476, "body": "That webite is chaotic... Can you clarify what part of those websites you&#39;re trying to get, there might be a better tag to go off of?"}, {"owner": {"reputation": 35, "user_id": 7788366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ca518b4dd0c4713659a0ccc768cd95?s=128&d=identicon&r=PG&f=1", "display_name": "schustda", "link": "https://stackoverflow.com/users/7788366/schustda"}, "edited": false, "score": 0, "creation_date": 1495667470, "post_id": 44169612, "comment_id": 75355514, "body": "Yeah, it is pretty messy... just looking to get the table towards the bottom of the page with like post number, subject, username, date..."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7788366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ca518b4dd0c4713659a0ccc768cd95?s=128&d=identicon&r=PG&f=1", "display_name": "schustda", "link": "https://stackoverflow.com/users/7788366/schustda"}, "edited": false, "score": 0, "creation_date": 1495668635, "post_id": 44169981, "comment_id": 75355855, "body": "Looks like that did it. Thank you! I tend to have a bad habbit of always defaulting to html.parser."}], "tags": [], "owner": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "is_accepted": true, "score": 1, "last_activity_date": 1495668165, "creation_date": 1495668165, "answer_id": 44169981, "question_id": 44169612, "link": "https://stackoverflow.com/questions/44169612/removing-tags-from-a-beautifulsoup-object/44169981#44169981", "title": "Removing tags from a BeautifulSoup object", "body": "<p>As you've already noticed that <code>&lt;b&gt;&lt;i&gt;..&lt;/b&gt;&lt;/i&gt;</code> is out of order, and hence malformed HTML. <code>html.parser</code> couldn't handle the job. I've tried <code>lxml</code> against your test cases, and it works.</p>\n\n<pre><code>soup = BeautifulSoup(content, \"lxml\")\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7788366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ca518b4dd0c4713659a0ccc768cd95?s=128&d=identicon&r=PG&f=1", "display_name": "schustda", "link": "https://stackoverflow.com/users/7788366/schustda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 1, "accepted_answer_id": 44169981, "answer_count": 1, "score": 1, "last_activity_date": 1495668165, "creation_date": 1495665655, "last_edit_date": 1495666797, "question_id": 44169612, "link": "https://stackoverflow.com/questions/44169612/removing-tags-from-a-beautifulsoup-object", "title": "Removing tags from a BeautifulSoup object", "body": "<p>I am having some difficulty scraping a table from a forum website (with 50 lines per page). My code, as written, works for 95% of the content but adds a table break when a bold or italicized line is present and I do not get the full results</p>\n\n<p>The majority of the pages have the tags like this:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;td&gt;\n    content_1\n  &lt;/td&gt;&lt;td&gt;\n    content_2\n  &lt;/td&gt;&lt;td&gt;\n    content_3\n  &lt;/td&gt;\n  ...\n&lt;/table&gt;\n</code></pre>\n\n<p>Though when a bold or italicized phrase is present, for whatever reason a random  tag is added and I only end up with the number of elements up until the tag.</p>\n\n<pre><code>&lt;table&gt;\n  &lt;td&gt;\n    content_1\n  &lt;/td&gt;&lt;td&gt;\n      &lt;b&gt;&lt;i&gt;content_2&lt;/b&gt;&lt;/i&gt; *&lt;/table&gt;*\n  &lt;/td&gt;&lt;td&gt;\n    content_3\n  &lt;/td&gt;\n...\n&lt;/table&gt;\n</code></pre>\n\n<p>I am not sure why this tag shows up (it does not appear when I inspect the element on the webpage).</p>\n\n<p>Does anyone have any suggestions on how to deal with this? I have a few ideas but none of them have worked out yet.</p>\n\n<ul>\n<li><p>Convert the beautifulsoup object to string then remove the tag and convert back to beautifulsoup - has not quite worked yet, but seems a little excessive and will slow down the program...</p></li>\n<li><p>Just skip soup and use pd.read_html - haven't gotten it to work yet.</p></li>\n</ul>\n\n<p>Or if anyone has suggestions to an alternative approach, that would be appreciated as well. Thanks!</p>\n\n<p>edit - figured it would help if I just added my code. If main block has three examples. First provides no results, second has partial results, and the third is full results.</p>\n\n<pre><code>def get_page(URL):\n    '''\n    INPUT: url\n    OUTPUT: pandas dataframe with message board info\n    '''\n    content = requests.get(URL).content\n    soup = BeautifulSoup(content, \"html.parser\")\n    rows = list(soup.find('table', id=\"ctl00_CP1_gv\"))\n    table_lst = []\n    for row in rows[2:-2]:\n      cell_lst = [cell for cell in list(row)[1:5]]\n      table_lst.append(cell_lst)\n    return pd.DataFrame(table_lst)\n\nif __name__ == '__main__':\n    url1 = \"https://investorshub.advfn.com/Cal-Bay-International-Inc-CBYI-5520/?NextStart=35092\"\n    url2 = \"https://investorshub.advfn.com/Cal-Bay-International-Inc-CBYI-5520/?NextStart=35099\"\n    url3 = \"https://investorshub.advfn.com/Cal-Bay-International-Inc-CBYI-5520/?NextStart=1000\"\n    df1 = get_page(url1)\n    df2 = get_page(url2)\n    df3 = get_page(url3)\n</code></pre>\n"}, {"tags": ["python", "scrape"], "comments": [{"owner": {"reputation": 2030, "user_id": 4052057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--CVrGWRHGBQ/AAAAAAAAAAI/AAAAAAAAKOo/68GVhnxPMqw/photo.jpg?sz=128", "display_name": "oshaiken", "link": "https://stackoverflow.com/users/4052057/oshaiken"}, "edited": false, "score": 0, "creation_date": 1495666160, "post_id": 44169605, "comment_id": 75355144, "body": "Whats the status code?"}, {"owner": {"reputation": 157, "user_id": 8062053, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/633f7777a83d3bf86cf48f312def3bd8?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8062053/john-smith"}, "reply_to_user": {"reputation": 2030, "user_id": 4052057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--CVrGWRHGBQ/AAAAAAAAAAI/AAAAAAAAKOo/68GVhnxPMqw/photo.jpg?sz=128", "display_name": "oshaiken", "link": "https://stackoverflow.com/users/4052057/oshaiken"}, "edited": false, "score": 0, "creation_date": 1495666279, "post_id": 44169605, "comment_id": 75355188, "body": "r.status_code = 200"}], "answers": [{"tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 0, "last_activity_date": 1495667320, "creation_date": 1495667320, "answer_id": 44169857, "question_id": 44169605, "link": "https://stackoverflow.com/questions/44169605/unable-to-get-response-from-post-request/44169857#44169857", "title": "Unable to get response from post request", "body": "<p>If you use <code>simplejson</code> you can convert the payload to JSON. Of course, you still need to worry about the content type in the headers, so I've added that as well:</p>\n\n<pre><code>&gt;&gt;&gt; import requests\n&gt;&gt;&gt; from simplejson import dumps as D\n&gt;&gt;&gt; payload = {'t': '13555 SW Jenkins Rd, Beaverton, OR 97005', 'l': [-79.55213, 40.3322]}\n&gt;&gt;&gt; headers = {'content-type': 'application/json'}\n&gt;&gt;&gt; r = requests.post(\"https://www.apartments.com/services/geography/search/\",\n...                    data=D(payload),\n...                    headers=headers)\n&gt;&gt;&gt; \n&gt;&gt;&gt; print r.status_code\n200\n&gt;&gt;&gt; print r.text\n[{\"ID\":\"mp0jdmj\",\"Display\":\"13555 SW Jenkins Rd, Beaverton, OR 97005\",\"GeographyType\":8,\"Address\":{\"City\":\"Beaverton\",\"State\":\"OR\",\"StreetName\":\"13555 SW Jenkins Rd\"},\"Location\":{\"Latitude\":45.50167,\"Longitude\":-122.81654}}]\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 8062053, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/633f7777a83d3bf86cf48f312def3bd8?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8062053/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 44169857, "answer_count": 1, "score": 0, "last_activity_date": 1495667320, "creation_date": 1495665629, "last_edit_date": 1495666002, "question_id": 44169605, "link": "https://stackoverflow.com/questions/44169605/unable-to-get-response-from-post-request", "title": "Unable to get response from post request", "body": "<p>I am trying to make a POST request to <a href=\"https://www.apartments.com\" rel=\"nofollow noreferrer\">https://www.apartments.com</a>, but I am not able to get any response back. Here is what I have written so far:</p>\n\n<pre><code>import requests\npayload = {'t': '13555 SW Jenkins Rd, Beaverton, OR 97005', 'l': [-79.55213, 40.3322]}\nr = requests.post(\"https://www.apartments.com/services/geography/search/\", data=payload)\n\nprint r.status_code\nprint r.text  # return null\n</code></pre>\n"}, {"tags": ["python", "data-fitting", "statistics-bootstrap"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495665773, "post_id": 44169548, "comment_id": 75355030, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.   We should be able to paste your posted code into a text file and reproduce the problem you described.  Your partial error message doesn&#39;t match the code you posted, and the code is hardly minimal."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1495665876, "creation_date": 1495665876, "answer_id": 44169656, "question_id": 44169548, "link": "https://stackoverflow.com/questions/44169548/bootstrap-fitting-in-python/44169656#44169656", "title": "Bootstrap fitting in python", "body": "<p>The error text strong suggests that you have invalid values in that line.  In particular, I believe that you'll find that <code>x + p1</code> is negative, and <code>p2</code> is not an integer.  Try debugging with a few simple <code>print</code> statements to trace execution and data flow.</p>\n"}], "owner": {"reputation": 159, "user_id": 4462846, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/267f4d0c4f3b6ccb7db85ede2f78b6d0?s=128&d=identicon&r=PG&f=1", "display_name": "david clarck", "link": "https://stackoverflow.com/users/4462846/david-clarck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1600631820, "creation_date": 1495665311, "last_edit_date": 1600631820, "question_id": 44169548, "link": "https://stackoverflow.com/questions/44169548/bootstrap-fitting-in-python", "title": "Bootstrap fitting in python", "body": "<p>I'm a beginner in python and I'm having some difficulty in fit a function in python using a bootstrap technique. I can't understand some of the problems I've been having.</p>\n<p>I try to fit my function through the methodology described <a href=\"https://stackoverflow.com/questions/14581358/getting-standard-errors-on-fitted-parameters-using-the-optimize-leastsq-method-i\">here</a>, however I'm getting the following error:</p>\n<pre><code>Warning (from warnings module):\n  File &quot;/home/desktop/Documents/tests/script.py&quot;, line 26\n    return p0/(x*((x + p1)**p2) )\nRuntimeWarning: invalid value encountered in power\n</code></pre>\n<p>The script is:</p>\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nfrom astropy.io import ascii\nfrom scipy import optimize\nimport os\nimport math \n\nx=np.array([0.003,0.004,0.005,0.006,0.007,0.008,0.009,0.01,0.011,0.012,0.013,0.014,0.015,0.016,0.017,0.018,0.019,0.02,0.021,0.022,0.023,0.024,0.025,0.026,0.027,0.028,0.029,0.03,0.031,0.032,0.033,0.034,0.035,0.036,0.037,0.038,0.039,0.04,0.041,0.042,0.043,0.044,0.045,0.046,0.047,0.048,0.049,0.05,0.051,0.052,0.053,0.054,0.055,0.056,0.057,0.058,0.059,0.06,0.061,0.062,0.063,0.064,0.065,0.066,0.067,0.068,0.069,0.07,0.071,0.072,0.073,0.074,0.075,0.076,0.077,0.078,0.079,0.08,0.081,0.082,0.083,0.084,0.085,0.086,0.087,0.088,0.089,0.09,0.091,0.092,0.093,0.094,0.095,0.096,0.097,0.098,0.099,0.1,0.101,0.102,0.103,0.104,0.105,0.106,0.107,0.108,0.109,0.11,0.111,0.112,0.113,0.114,0.115,0.116,0.117,0.118,0.119,0.12,0.121,0.122,0.123,0.124,0.125,0.126,0.127,0.128,0.129,0.13,0.131,0.132,0.133,0.134,0.135,0.136,0.137,0.138,0.139,0.14,0.141,0.142,0.143,0.144,0.145,0.146,0.147,0.148,0.149,0.15,0.151,0.152,0.153,0.154,0.155,0.156,0.157,0.158,0.159,0.16,0.161,0.162,0.163,0.164,0.165,0.166,0.167,0.168,0.169,0.17,0.171,0.172,0.173,0.174,0.175,0.176,0.177,0.178,0.179,0.18,0.181,0.182,0.183,0.184,0.185,0.186,0.187,0.188,0.189,0.19,0.191,0.192,0.193,0.194,0.195,0.196,0.197,0.198,0.199,0.2,0.201,0.202,0.203,0.204,0.205,0.206,0.207,0.208,0.209,0.21,0.211,0.212,0.213,0.214,0.215,0.216,0.217,0.218,0.219,0.22,0.221,0.222,0.223,0.224,0.225,0.226,0.227,0.228,0.229,0.23,0.231,0.232,0.233,0.234,0.235,0.236,0.237,0.238,0.239,0.24,0.241,0.242,0.243,0.244,0.245,0.246,0.247,0.248,0.249,0.25,0.251,0.252,0.253,0.254,0.255,0.256,0.257,0.258,0.259,0.26,0.261,0.262,0.263,0.264,0.265,0.266,0.267,0.268,0.269,0.27,0.271,0.272,0.273,0.274,0.275,0.276,0.277,0.278,0.279,0.28,0.281,0.282,0.283,0.284,0.285,0.286,0.287,0.288,0.289,0.29,0.291,0.292,0.293,0.294,0.295,0.296,0.297,0.298,0.299,0.3,0.301,0.302,0.303,0.304,0.305,0.306,0.307,0.308,0.309,0.31,0.311,0.312,0.313,0.314,0.315,0.316,0.317,0.318,0.319,0.32,0.321,0.322,0.323,0.324,0.325,0.326,0.327,0.328,0.329,0.33,0.331,0.332,0.333,0.334,0.335,0.336,0.337,0.338,0.339,0.34,0.341,0.342,0.343,0.344,0.345,0.346,0.347,0.348,0.349,0.35,0.351,0.352,0.353,0.354,0.355,0.356,0.357,0.358,0.359,0.36,0.361,0.362,0.363,0.364,0.365,0.366,0.367,0.368,0.369,0.37,0.371,0.372,0.373,0.374,0.375,0.376,0.377,0.378,0.379,0.38,0.381,0.382,0.383,0.384,0.385,0.386,0.387,0.388,0.389,0.39,0.391,0.392,0.393,0.394,0.395,0.396,0.397,0.398,0.399,0.4,0.401,0.402,0.403,0.404,0.405,0.406,0.407,0.408,0.409,0.41,0.411,0.412,0.413,0.414,0.415,0.416])\n\ny=np.array([133129.8,132171.4,131439,130849.8,130359.6,129942.2,129580.6,129263.1,128981.5,128729.6,128498.8,128281.9,128075.8,127878.4,127687.7,127502.7,127322.7,127146.5,126973.2,126802.1,126633.3,126467.2,126303.2,126140.8,125979.4,125810.1,125624.4,125421.6,125201.5,124964.2,124714.1,124455.8,124189.3,123914.4,123631.3,123344.3,123057.8,122772,122486.6,122201.4,121912.2,121614.8,121309,120994.6,120671.7,120342.6,120009.5,119672.4,119331.4,118986.2,118633.9,118271.9,117899.8,117517.8,117125.6,116722.6,116307.9,115881.4,115443.2,114993.2,114532.4,114061.5,113580.5,113089.6,112588.5,112077.1,111554.7,111021.5,110477.4,109922.4,109357.6,108783.8,108201.2,107609.6,107009.2,106400.9,105785.7,105163.6,104534.7,103898.9,103256.2,102606.4,101949.6,101285.7,100614.8,99936.8,99251.7,98559.5,97860.2,97153.8,96441.3,95723.7,95001,94273.3,93540.4,92804.5,92067.2,91328.6,90588.8,89847.8,89106.5,88365.8,87625.7,86886.3,86147.6,85412.2,84682.6,83958.8,83240.9,82528.8,81821,81116,80413.8,79714.3,79017.5,78324.4,77635.7,76951.3,76271.4,75596,74925.8,74261.6,73603.4,72951.2,72305.1,71665.8,71034,70409.8,69793.2,69184,68581,67983,67389.9,66801.6,66218.1,65636.9,65055.4,64473.7,63891.5,63309.1,62727.6,62148.3,61571.3,60996.6,60424,59853.1,59283.2,58714.4,58146.6,57579.9,57014.7,56451.7,55891,55332.4,54776,54222.4,53672.1,53125,52581.2,52040.7,51504,50971.7,50443.6,49919.8,49400.3,48885.7,48376.2,47872.1,47373.2,46879.6,46392.7,45914.1,45443.7,44981.5,44527.5,44081.2,43641.9,43209.7,42784.4,42366.2,41954.4,41548.4,41148.3,40754,40365.4,39982.1,39603.5,39229.4,38860,38495.1,38135.3,37780.6,37431.3,37087.3,36748.5,36415.3,36088,35766.6,35451.1,35141.4,34837,34537.3,34242.3,33952,33666.4,33385.7,33110.1,32839.8,32574.7,32314.7,32059.4,31808,31560.6,31317.2,31077.8,30843.4,30615.1,30392.8,30176.5,29966.4,29762.4,29564.9,29373.9,29189.3,29011.1,28839.1,28673.2,28513.2,28359.2,28211.2,28068.6,27930.7,27797.7,27669.3,27545.7,27425.5,27307.3,27191.1,27077,26964.8,26854.8,26747.1,26641.5,26538.2,26437.2,26339.2,26245.1,26154.8,26068.5,25985.9,25906.6,25829.9,25755.9,25684.4,25615.5,25548.9,25484.4,25421.9,25361.4,25302.9,25246.1,25190.8,25136.8,25084.3,25033.1,24982.7,24932.5,24882.3,24832.3,24782.3,24732.8,24684.1,24636.1,24588.8,24542.3,24496.1,24450.1,24404.1,24358.2,24312.3,24266.1,24219.3,24171.8,24123.6,24074.8,24025.3,23974.9,23923.8,23871.9,23819.2,23765.9,23712.3,23658.3,23603.9,23549.2,23494.1,23438.3,23382,23325.1,23267.7,23210.1,23152.9,23096,23039.5,22983.3,22926.7,22869.1,22810.3,22750.4,22689.5,22627.5,22564.7,22501,22436.4,22371,22305,22238.9,22172.7,22106.3,22039.8,21973.6,21907.8,21842.6,21777.9,21713.8,21650,21586.3,21522.6,21459.1,21395.6,21332.5,21270,21208.2,21147.1,21086.5,21026.9,20968.5,20911.2,20855,20800,20746.2,20693.4,20641.7,20591.1,20541.6,20492.8,20444.6,20396.8,20349.5,20302.7,20256.2,20210.1,20164.3,20118.8,20073.6,20028.9,19984.8,19941.3,19898.4,19856.2,19814.6,19773.9,19734.1,19695.1,19657,19619.8,19583.6,19548.5,19514.4,19481.3,19449.4,19418.6,19389,19360.6,19333.4,19307.3,19282.6,19259.1,19236.8,19215.8,19195.8,19176.7,19158.5,19141,19124.4,19108.6,19093.7,19079.5,19066.2,19053.7,19042,19031.1,19020.9,19011.4,19002.7,18994.7,18987.4,18980.7,18974.6,18969.2,18964.4,18960,18956,18952.5,18949.4,18946.7,18944.5,18942.7,18941.3,18940.3,18939.8,18939.8,18940.1,18940.9])\n\n\n# functions\n    \ndef ob(x, p0, p1, p2):\n    return p0/(x*((x + p1)**p2) )\n        \ndef ff(x,p):\n     return ob(x,*p)\n        \n    # initial values:\n        \n pstart=[\n    100,\n    0.1,\n    1.0\n       ]\n\n####### Trying fit by Bootstrap (script obtained through link above)\n\ndef fit_bootstrap(p0, datax, datay, function, yerr_systematic=0.0):\n\n    errfunc = lambda p, x, y: function(x,p) - y\n\n    # Fit first time\n    pfit, perr = optimize.leastsq(errfunc, p0, args=(datax, datay), full_output=0)\n\n\n    # Get the stdev of the residuals\n    residuals = errfunc(pfit, datax, datay)\n    sigma_res = np.std(residuals)\n\n    sigma_err_total = np.sqrt(sigma_res**2 + yerr_systematic**2)\n\n    # 100 random data sets are generated and fitted\n    ps = []\n    for i in range(100):\n\n        randomDelta = np.random.normal(0., sigma_err_total, len(datay))\n        randomdataY = datay + randomDelta\n\n        randomfit, randomcov = \\\n            optimize.leastsq(errfunc, p0, args=(datax, randomdataY),\\\n                             full_output=0)\n\n        ps.append(randomfit) \n\n    ps = np.array(ps)\n    mean_pfit = np.mean(ps,0)\n\n    # You can choose the confidence interval that you want for your\n    # parameter estimates: \n    Nsigma = 1. # 1sigma gets approximately the same as methods above\n                # 1sigma corresponds to 68.3% confidence interval\n                # 2sigma corresponds to 95.44% confidence interval\n    err_pfit = Nsigma * np.std(ps,0) \n\n    pfit_bootstrap = mean_pfit\n    perr_bootstrap = err_pfit\n    return pfit_bootstrap, perr_bootstrap \n\npfit, perr = fit_bootstrap(pstart, x, ob, ff)\n\nprint(&quot;\\nFit parameters and parameter errors from bootstrap method :&quot;)\nprint(&quot;pfit = &quot;, pfit)\nprint(&quot;perr = &quot;, perr) \n</code></pre>\n<p>After that, the outputs are:</p>\n<pre><code>Warning (from warnings module):\n      File &quot;/home/desktop/Documents/tests/script.py&quot;, line 26\n        return p0/(x*((x + p1)**p2) )\n    RuntimeWarning: invalid value encountered in power\n</code></pre>\n<p>and</p>\n<pre><code>Fit parameters and parameter errors from bootstrap method :\n('pfit = ', array([  1.00000000e+02,   1.00000000e-01,   1.00000000e+00]))\n('perr = ', array([  0.00000000e+00,   1.94289029e-16,   0.00000000e+00]))\n</code></pre>\n<p>That is, the parameters estimated are, practically the same values given in the <code>pstart</code></p>\n<p>Unfortunally, I can't change the equation for fitting, because the model says that the data following this equation, function <code>ob</code>.</p>\n<p>I'd like to know if someone can help me in this question ?</p>\n<p>Thanks in advanced</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1495665190, "post_id": 44169471, "comment_id": 75354875, "body": "@downshift No, he&#39;s assing how to pass data to the program&#39;s standard input."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1495665226, "post_id": 44169471, "comment_id": 75354891, "body": "Use the <code>subprocess</code> module, with the <code>stdin=subprocess.PIPE</code> option."}, {"owner": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "edited": false, "score": 0, "creation_date": 1495665260, "post_id": 44169471, "comment_id": 75354895, "body": "This has already been answered I think, try this link: <a href=\"https://stackoverflow.com/a/5405460/2241241\">stackoverflow.com/a/5405460/2241241</a>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1495666486, "post_id": 44169471, "comment_id": 75355251, "body": "So, what exactly is wrong with the example in your question? When the program says, &quot;Enter your input here:&quot;, you would normally type the input. What do you want to do instead?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1495666729, "post_id": 44169471, "comment_id": 75355320, "body": "@DYZ His question is clear (to me): &quot;How can I pass it what I want?&quot;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "edited": false, "score": 0, "creation_date": 1495666781, "post_id": 44169471, "comment_id": 75355334, "body": "@fbence He&#39;s not asking how to read input. He&#39;s asking how to provide input to a shell command that he executes from the script."}, {"owner": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "edited": false, "score": 0, "creation_date": 1495666928, "post_id": 44169471, "comment_id": 75355370, "body": "oh, sure, yeah, in that case your subprocess solutions seems to be the way to go"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495666945, "post_id": 44169471, "comment_id": 75355377, "body": "@Barmar If that&#39;s what he asks, then he should use shell redirection from a file, as in <code>program_name &lt; data</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1495667181, "post_id": 44169471, "comment_id": 75355441, "body": "@DYZ The question doesn&#39;t say anything about a file. He probably wants to provide the input from Python variables."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495667232, "post_id": 44169471, "comment_id": 75355464, "body": "@Barmar That&#39;s why I believe neither you nor I understand the question well enough to give a qualified answer. Perhaps you are right."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1495667730, "post_id": 44169471, "comment_id": 75355598, "body": "@DYZ I don&#39;t think it&#39;s necessary to answer. There are other questions that explain how to give input to a program from Python, just vote to close it as a duplicate."}], "owner": {"reputation": 23, "user_id": 6282278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cca3fc20301ecad3d5f93ba9f29331a?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Baker", "link": "https://stackoverflow.com/users/6282278/ian-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1495667938, "answer_count": 0, "score": 0, "last_activity_date": 1495664832, "creation_date": 1495664832, "question_id": 44169471, "link": "https://stackoverflow.com/questions/44169471/pass-an-argument-to-a-program-in-terminal-that-takes-input-after-you-start-it", "closed_reason": "Duplicate", "title": "Pass an argument to a program in terminal that takes input after you start it", "body": "<p>I have a program that I am using which takes input in terminal after you start the program. It will not take the input by adding it after the process name. How can I pass it what I want? I know I could use virtual keypresses, but that seems inefficient and non-pythonic, so it will be my last resort. </p>\n\n<p>Below is an example of what I type and get when using the terminal, because I feel that I did not explain as well as I would have liked.</p>\n\n<pre><code>user:~ $ program_name\nEnter your input here:\n</code></pre>\n"}, {"tags": ["jquery", "python", "django", "twitter-bootstrap", "modal-dialog"], "comments": [{"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495664971, "post_id": 44169450, "comment_id": 75354810, "body": "I would suggest you to put your JavaScript in a separate file and load that file in your parent (layout) template after you load jQuery (all before closing body tag)."}, {"owner": {"reputation": 10207, "user_id": 5113242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eead101dcb134792a08d0e4d21e40ebf?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5113242/anonymous"}, "edited": false, "score": 0, "creation_date": 1495669464, "post_id": 44169450, "comment_id": 75356049, "body": "Based on the block name, I&#39;m guessing that code appears in the <code>&lt;head&gt;</code> section? Visible content can&#39;t go there. Keep the js snippet there and move the modal div inside the <code>&lt;body&gt;</code>."}, {"owner": {"reputation": 137, "user_id": 8041521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af4857d4cc38145f3d4b8839a771fd9b?s=128&d=identicon&r=PG&f=1", "display_name": "iFengo", "link": "https://stackoverflow.com/users/8041521/ifengo"}, "edited": false, "score": 0, "creation_date": 1495681381, "post_id": 44169450, "comment_id": 75358687, "body": "The block goes in the body but that small segment within head-extras goes in the head"}], "owner": {"reputation": 137, "user_id": 8041521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af4857d4cc38145f3d4b8839a771fd9b?s=128&d=identicon&r=PG&f=1", "display_name": "iFengo", "link": "https://stackoverflow.com/users/8041521/ifengo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495664751, "creation_date": 1495664751, "question_id": 44169450, "link": "https://stackoverflow.com/questions/44169450/django-bootstrap-modal-wont-appear-on-page-load", "title": "Django/Bootstrap modal won&#39;t appear on page load", "body": "<p>I'm trying to make a modal pop up when my page loads and nothing is appearing. I have tested this code outside of the {% if request.GET.logout %} and it still does not work. I am also certain that these blocks are being executed.</p>\n\n<pre><code>    {% if request.GET.logout %}\n    {% block head-extras %}\n    &lt;script type=\"text/javascript\"&gt;\n      $(document).ready(function(){\n        $('#logout-modal').modal('show');\n      });\n    &lt;/script&gt;\n    {% endblock %}\n    &lt;div class=\"modal\" id=\"logout-modal\"&gt;\n      &lt;div class=\"modal-dialog\" role=\"document\"&gt;\n        &lt;div class=\"modal-content\"&gt;\n          &lt;div class=\"modal-header\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;\n              &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;\n            &lt;/button&gt;\n          &lt;/div&gt;\n          &lt;div class=\"modal-body\"&gt;\n            &lt;p&gt;Modal body text goes here.&lt;/p&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    {% endif %}\n</code></pre>\n\n<p>Edit: This only works if I put </p>\n\n<pre><code>&lt;script src=\"{% static 'js/jquery-3.2.1.slim.min.js' %}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>above the script for the $(document).ready. Is there a way to not have to do this? Bootstrap recommends that I should load the jquery before the closing body tag.</p>\n"}, {"tags": ["python", "image", "pyqt", "pixmap"], "comments": [{"owner": {"reputation": 33, "user_id": 3335196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Hgb0g.jpg?s=128&g=1", "display_name": "cjaxx", "link": "https://stackoverflow.com/users/3335196/cjaxx"}, "edited": false, "score": 0, "creation_date": 1495670662, "post_id": 44169391, "comment_id": 75356338, "body": "Thanks for cleaning it up eyllanesc."}, {"owner": {"reputation": 5266, "user_id": 1965288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c4aa96c142bef1e4aff1c8d38ef52ae?s=128&d=identicon&r=PG&f=1", "display_name": "justengel", "link": "https://stackoverflow.com/users/1965288/justengel"}, "edited": false, "score": 1, "creation_date": 1495671708, "post_id": 44169391, "comment_id": 75356588, "body": "Don&#39;t create a new QPixmap each time. Create all 100 QPixmaps at startup then just <code>self.QLabel.setPixMap(self.pixmap_list[0])</code>. That should help some. You probably don&#39;t need to change the pixmap with every slight mouse movement either. You probably want to put some limits in."}, {"owner": {"reputation": 33, "user_id": 3335196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Hgb0g.jpg?s=128&g=1", "display_name": "cjaxx", "link": "https://stackoverflow.com/users/3335196/cjaxx"}, "reply_to_user": {"reputation": 5266, "user_id": 1965288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c4aa96c142bef1e4aff1c8d38ef52ae?s=128&d=identicon&r=PG&f=1", "display_name": "justengel", "link": "https://stackoverflow.com/users/1965288/justengel"}, "edited": false, "score": 0, "creation_date": 1495674621, "post_id": 44169391, "comment_id": 75357315, "body": "Creating all the pixmaps speeds it up nicely when scrubbing the only bad thing is the application locks up when it creates the 100 pixmaps. Taking around 30seconds."}, {"owner": {"reputation": 33, "user_id": 3335196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Hgb0g.jpg?s=128&g=1", "display_name": "cjaxx", "link": "https://stackoverflow.com/users/3335196/cjaxx"}, "reply_to_user": {"reputation": 5266, "user_id": 1965288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c4aa96c142bef1e4aff1c8d38ef52ae?s=128&d=identicon&r=PG&f=1", "display_name": "justengel", "link": "https://stackoverflow.com/users/1965288/justengel"}, "edited": false, "score": 0, "creation_date": 1495675211, "post_id": 44169391, "comment_id": 75357467, "body": "I read something about repaint is that something I should be using instead?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1495729347, "post_id": 44169391, "comment_id": 75384449, "body": "@cjaxx. The bottleneck is reading the image data from the storage device. It sounds like the image files must be quite large if it takes 30 seconds to read 100 of them - either that, or the read-speed of the storage device is somewhat slow. If the images were stored on an SSD, you could use multi-threading to read the files in parallel. But that is not a viable option with hard-disks - serial reading is the best that can be done. Maybe you should experiment with using lower-quality images, so that there is less data to read on start-up."}, {"owner": {"reputation": 33, "user_id": 3335196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Hgb0g.jpg?s=128&g=1", "display_name": "cjaxx", "link": "https://stackoverflow.com/users/3335196/cjaxx"}, "edited": false, "score": 0, "creation_date": 1495738003, "post_id": 44169391, "comment_id": 75389283, "body": "Yes I noticed lower quality images are much faster"}], "owner": {"reputation": 33, "user_id": 3335196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Hgb0g.jpg?s=128&g=1", "display_name": "cjaxx", "link": "https://stackoverflow.com/users/3335196/cjaxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 969, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495670250, "creation_date": 1495664398, "last_edit_date": 1495670250, "question_id": 44169391, "link": "https://stackoverflow.com/questions/44169391/pyqt-qlabel-updating-a-pixmap-to-slow", "title": "Pyqt qlabel updating a pixmap to slow", "body": "<p>Basically I have a qlabel that I set an img.</p>\n\n<pre><code>self.QLabel.setPixMap(QtGui.QPixmap(image.jpg))\n</code></pre>\n\n<p>I enabled set mouse tracking and a mouse move event so I can get the coordinates of my mouse when I hover over the images.</p>\n\n<pre><code>self.QLabel.setMouseTracking(True)\nself.QLabel.mouseMoveEvent = self.hoverFunction\n</code></pre>\n\n<p>In the hover Function I get the x coordinate of my mouse over the image. </p>\n\n<pre><code>posX=e.x()\n</code></pre>\n\n<p>The image being displayed is part of a list of 100. I am then using the posX to pick a new image in the list of 100 and update the pixmap in the hover function. </p>\n\n<pre><code>self.QLabel.setPixMap(QtGui.QPixmap(newImage.jpg))\n</code></pre>\n\n<p>As of right now this is working but it is very slow. I want to be able to change the image fast as I move my mouse. Giving the illusion of scrubbing a video. But right now it skips around and updates slowly. Any tips?</p>\n"}, {"tags": ["python", "descriptor"], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 3159288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7335243e7af52d914229e19648f1b711?s=128&d=identicon&r=PG", "display_name": "rmorshea", "link": "https://stackoverflow.com/users/3159288/rmorshea"}, "edited": false, "score": 0, "creation_date": 1495668440, "post_id": 44169805, "comment_id": 75355800, "body": "Great description. To my knowledge there isn&#39;t a specification for this, but I could be wrong about that. Regardless of the lookup method though, the inconsistency here doesn&#39;t seem inappropriate."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1495666947, "creation_date": 1495666947, "answer_id": 44169805, "question_id": 44169370, "link": "https://stackoverflow.com/questions/44169370/strange-descriptor-behavior/44169805#44169805", "title": "Strange Descriptor Behavior", "body": "<p>The relevant parts of the CPython internals just weren't implemented consistently. This may be considered a bug, although I don't know what promises Python makes about proper descriptor handling for this case.</p>\n\n<p>I can explain exactly what happens internally, but since there are multiple layers of descriptor handling here, things are going to get confusing.</p>\n\n<hr>\n\n<p>For a <code>__set__</code> or <code>__delete__</code> implemented in Python, the CPython internals use <a href=\"https://github.com/python/cpython/blob/3.6/Objects/typeobject.c#L6381\" rel=\"nofollow noreferrer\"><code>slot_tp_descr_set</code></a> to wrap it at the C level. (Yes, one C function for both of those methods.)</p>\n\n<pre><code>static int\nslot_tp_descr_set(PyObject *self, PyObject *target, PyObject *value)\n{\n    PyObject *res;\n    _Py_IDENTIFIER(__delete__);\n    _Py_IDENTIFIER(__set__);\n\n    if (value == NULL)\n        res = call_method(self, &amp;PyId___delete__, \"(O)\", target);\n    else\n        res = call_method(self, &amp;PyId___set__, \"(OO)\", target, value);\n    if (res == NULL)\n        return -1;\n    Py_DECREF(res);\n    return 0;\n}\n</code></pre>\n\n<p>This uses <code>call_method</code>, which bypasses <code>__getattribute__</code>, <code>__getattr__</code>, and the instance dict, but performs descriptor handling like a normal attribute lookup.</p>\n\n<p>Note that there are two levels of descriptor handling here - we're in the middle of handling the <code>MyClass.d</code> descriptor, but now we need to consider whether the <code>__set__</code> or <code>__delete__</code> methods of the <code>MyClass.d</code> descriptor are themselves descriptors. They're not, but if they were implemented with regular Python functions, they would have been descriptors, and descriptor handling for Python functions would have bound the <code>Descriptor</code> instance as the first argument to its <code>__set__</code> or <code>__delete__</code> method.</p>\n\n<hr>\n\n<p>For a <code>__get__</code> implemented in Python, the CPython internals use <a href=\"https://github.com/python/cpython/blob/3.6/Objects/typeobject.c#L6359\" rel=\"nofollow noreferrer\"><code>slot_tp_descr_get</code></a>, which performs special method lookup differently.</p>\n\n<pre><code>static PyObject *\nslot_tp_descr_get(PyObject *self, PyObject *obj, PyObject *type)\n{\n    PyTypeObject *tp = Py_TYPE(self);\n    PyObject *get;\n    _Py_IDENTIFIER(__get__);\n\n    get = _PyType_LookupId(tp, &amp;PyId___get__);\n    if (get == NULL) {\n        /* Avoid further slowdowns */\n        if (tp-&gt;tp_descr_get == slot_tp_descr_get)\n            tp-&gt;tp_descr_get = NULL;\n        Py_INCREF(self);\n        return self;\n    }\n    if (obj == NULL)\n        obj = Py_None;\n    if (type == NULL)\n        type = Py_None;\n    return PyObject_CallFunctionObjArgs(get, self, obj, type, NULL);\n}\n</code></pre>\n\n<p>Here, CPython uses <code>_PyType_LookupId</code> to look up <code>__get__</code> on <code>type(mc)</code>, instead of using <code>call_method</code> to look it up on <code>mc</code>.</p>\n\n<p>Unlike <code>call_method</code>, <code>_PyType_LookupId</code> does no descriptor handling. Python assumes <em>without checking</em> that since it skipped descriptor handling, it needs to bind <code>self</code> manually. It explicitly passes <code>self</code> (which is the <code>Descriptor</code> instance) to the <code>__get__</code> method in <code>PyObject_CallFunctionObjArgs(get, self, obj, type, NULL)</code>.</p>\n\n<hr>\n\n<p><code>__get__</code> sees the <code>Descriptor</code> instance as <code>first</code> because Python uses a bad shortcut for second-level descriptor handling internally when calling <code>__get__</code>, but not when calling <code>__set__</code> or <code>__delete__</code>.</p>\n"}], "owner": {"reputation": 670, "user_id": 3159288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7335243e7af52d914229e19648f1b711?s=128&d=identicon&r=PG", "display_name": "rmorshea", "link": "https://stackoverflow.com/users/3159288/rmorshea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 2, "accepted_answer_id": 44169805, "answer_count": 1, "score": 4, "last_activity_date": 1495666947, "creation_date": 1495664281, "last_edit_date": 1495665045, "question_id": 44169370, "link": "https://stackoverflow.com/questions/44169370/strange-descriptor-behavior", "title": "Strange Descriptor Behavior", "body": "<p>When the <code>__get__</code>, <code>__set__</code>, or <code>__delete__</code> attribute of a descriptor is not a method, and is instead a generic callable, the first argument of that callable is inconsistent:</p>\n\n<hr>\n\n<pre><code>class Callable(object):\n\n    def __call__(self, first, *args, **kwargs):\n        print(first)\n\n\nclass Descriptor(object):\n\n    __set__ = Callable()\n    __delete__ = Callable()\n    __get__ = Callable()\n\n\nclass MyClass(object):\n\n    d = Descriptor()\n\n\nmc = MyClass()\nmc.d = 1\ndel mc.d\nmc.d\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;__main__.MyClass object at 0x10854cda0&gt;\n&lt;__main__.MyClass object at 0x10854cda0&gt;\n&lt;__main__.Descriptor object at 0x10855f240&gt;\n</code></pre>\n\n<hr>\n\n<p>Why is the owner descriptor passed to the first argument of <code>__get__</code> callable when this attribute is not technically a \"method\"? And perhaps more importantly, why is this behavior not consistent across all the descriptor attributes?</p>\n\n<p>What's going on here?</p>\n"}, {"tags": ["python", "django", "background-image", "jinja2", "python-sphinx"], "comments": [{"owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495665245, "post_id": 44169369, "comment_id": 75354894, "body": "How are you adding the image? Does it appear in your build folder? Are you sure that path in CSS is correct?"}, {"owner": {"reputation": 303, "user_id": 4224710, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wPjvP.jpg?s=128&g=1", "display_name": "DuyguKeskek", "link": "https://stackoverflow.com/users/4224710/duygukeskek"}, "reply_to_user": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "edited": false, "score": 0, "creation_date": 1495666046, "post_id": 44169369, "comment_id": 75355109, "body": "@errata Hi, I could manage adding it in CSS, but I want to actually add it as a static image. I&#39;m using JinJa2 templating engine and I&#39;m not sure if adding the static images directly to CSS is a correct way. I try to find a way to add it as a static img."}, {"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1495673737, "post_id": 44169369, "comment_id": 75357082, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14622698/customize-sphinxdoc-theme\" title=\"customize sphinxdoc theme\">stackoverflow.com/questions/14622698/customize-sphinxdoc-the&zwnj;&#8203;me</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4649, "user_id": 175793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hta4E.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/175793/errata"}, "is_accepted": true, "score": 1, "last_activity_date": 1495666632, "creation_date": 1495666632, "answer_id": 44169764, "question_id": 44169369, "link": "https://stackoverflow.com/questions/44169369/sphinx-adding-background-image/44169764#44169764", "title": "Sphinx adding background image", "body": "<p>If you want to add image you can use <a href=\"http://docutils.sourceforge.net/docs/ref/rst/directives.html#image\" rel=\"nofollow noreferrer\"><code>image</code> directive</a>, for example:</p>\n\n<pre><code>.. image:: _static/path/to/your/image.png\n   :scale: 10 %\n   :align: left\n   :class: intro-logo\n</code></pre>\n\n<p>Since you can add <code>class</code> to it, you can modify your style directly in CSS.</p>\n\n<p>Also, be sure that you defined your static folder in <code>conf.py</code>:</p>\n\n<pre><code>html_static_path = ['_static']\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4224710, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wPjvP.jpg?s=128&g=1", "display_name": "DuyguKeskek", "link": "https://stackoverflow.com/users/4224710/duygukeskek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 44169764, "answer_count": 1, "score": 1, "last_activity_date": 1495666632, "creation_date": 1495664277, "question_id": 44169369, "link": "https://stackoverflow.com/questions/44169369/sphinx-adding-background-image", "title": "Sphinx adding background image", "body": "<p>I'm new to Sphinx docs generator and I want to add a background image to the website. How can I handle that ? I tried to put the bg image to the static folder and tried adding it to the css but it still doesn't appear.</p>\n"}, {"tags": ["python", "list", "loops", "if-statement", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 19743, "user_id": 1709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6223c8e4cf28dd5a28b6b8c24c9c6b5?s=128&d=identicon&r=PG", "display_name": "Anders Sandvig", "link": "https://stackoverflow.com/users/1709/anders-sandvig"}, "is_accepted": true, "score": 2, "last_activity_date": 1495712100, "last_edit_date": 1495712100, "creation_date": 1495711758, "answer_id": 44179483, "question_id": 44169353, "link": "https://stackoverflow.com/questions/44169353/for-loop-outputting-duplicates/44179483#44179483", "title": "For loop outputting duplicates", "body": "<p>Not sure why you are doing the regexp replace since you are checking if the first name/full name is present with <code>in</code>. Also not sure what the <code>fuzz.ratio(item, item)</code> thing in case 3 is supposed to do, but here's how you can do the simple/naive replacement:</p>\n\n<pre><code>#!/usr/bin/python\nimport re\n\ndef replace_names(authors, com):\n    res = []\n    for post_id, comments in com.items():\n        for comment in comments:\n            for author_id, author in authors.items():\n                first_name, last_name = author[0], author[1]\n                full_name = first_name + ' ' + last_name\n                if full_name in comment:\n                    comment = comment.replace(full_name, author_id)\n                    break\n                elif first_name in comment:\n                    comment = comment.replace(first_name, author_id)\n                    break\n            res.append({'post_id': post_id, 'comment': comment})\n    return res\n\na = {'1330': ('John', 'Gold', '1330'), \"0001\":('Matt', 'Wade', '0001'), '2112': ('Bob', 'Smith', '2112')}\ncom = {'6':['John Gold, getting no points', 'Matt played in this game? Didn\\'t notice him','Love this shot!']}\nfor comment in replace_names(a, com):\n    print comment\n</code></pre>\n\n<p>Which produces this output:</p>\n\n<pre><code>{'comment': '1330, getting no points', 'post_id': '6'}\n{'comment': \"0001 played in this game? Didn't notice him\", 'post_id': '6'}\n{'comment': 'Love this shot!', 'post_id': '6'}\n</code></pre>\n\n<p>It's a bit tricky to understand what your intention is with the original code, but (one of) the reason(s) you are getting duplicates is that <em>you are processing authors in the outher loop, which means you will process each comment one time for each author</em>. By swapping the loop you ensure that each comment is processed only once. </p>\n\n<p>You may also have intended to have a <code>break</code> where you have the <code>continue</code>, but I'm not entirely sure I understand how your original code is supposed to work.</p>\n\n<p>The use of global variables is also a bit confusing.</p>\n"}], "owner": {"reputation": 29, "user_id": 6744678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3cbb2ef6d274e1267ba9acda79ae718d?s=128&d=identicon&r=PG&f=1", "display_name": "wolverinejohn", "link": "https://stackoverflow.com/users/6744678/wolverinejohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 44179483, "answer_count": 1, "score": 0, "last_activity_date": 1495712100, "creation_date": 1495664216, "last_edit_date": 1495708089, "question_id": 44169353, "link": "https://stackoverflow.com/questions/44169353/for-loop-outputting-duplicates", "title": "For loop outputting duplicates", "body": "<pre><code>a = {'1330': ('John', 'Gold', '1330'), \"0001\":('Matt', 'Wade', '0001'), '2112': ('Bob', 'Smith', '2112')}\ncom = {'6':['John Gold, getting no points', 'Matt played in this game? Didn\\'t notice him','Love this shot!']}\ncomments_table = []\n</code></pre>\n\n<p>What I am trying to achieve with this replacer function is replace people's names in the strings found in com(dict) with the a code unique to them which is found in a(dict) via regex. Replacing the name with the code works, but adding that new string with the code instead of the name is where I am going wrong.</p>\n\n<pre><code>def replace_first_name():\nfor k,v in a.items():\n    for z, y in com.items():\n        for item in y:\n            firstname = a[k][0]\n            lastname = a[k][1]\n            full_name = firstname + ' ' + lastname\n            if firstname in item:\n                if full_name in item:\n                    t = re.compile(re.escape(full_name), re.IGNORECASE)\n                    comment = t.sub(a[k][2], item)\n                    print ('1')\n                    comments_table.append({\n                        'post_id': z, 'comment': comment\n                    })\n                    continue\n\n                else:\n\n                    t = re.compile(re.escape(firstname), re.IGNORECASE)\n                    comment = t.sub(a[k][2], item)\n                    print ('2')\n                    comments_table.append({\n                        'post_id':z, 'comment':comment\n                    })\n            else:\n                print ('3')\n                if fuzz.ratio(item,item) &gt; 90:\n                    comments_table.append({\n                        'post_id': z, 'comment': item\n                    })\n                else:\n                    pass\n</code></pre>\n\n<p>The problem is with the output as seen below:</p>\n\n<pre><code>[{'comment': '1330, getting no points', 'post_id': '6'}, {'comment': \"Matt played in this game? Didn't notice him\", 'post_id': '6'}, {'comment': 'Love this shot!', 'post_id': '6'}, {'comment': 'John Gold, getting no points', 'post_id': '6'}, {'comment': \"Matt played in this game? Didn't notice him\", 'post_id': '6'}, {'comment': 'Love this shot!', 'post_id': '6'}, {'comment': 'John Gold, getting no points', 'post_id': '6'}, {'comment': \"0001 played in this game? Didn't notice him\", 'post_id': '6'}, {'comment': 'Love this shot!', 'post_id': '6'}]\n</code></pre>\n\n<p>I don't want comments that already have their name replaced with the number to make their way into the final list. Therefore, I want my expected output to look like this:</p>\n\n<pre><code>[{'comment': '1330, getting no points', 'post_id': '6'},{'comment': '0001,played in this game? Didn\\'t notice him', 'post_id': '6', {'comment':'Love this shot', 'post_id':'6'}]\n</code></pre>\n\n<p>I have looked into using an iterator by making y an iter_list, but I didn't get anywhere. Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["python", "python-2.7", "dictionary", "iterable-unpacking", "functools"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495664076, "post_id": 44169302, "comment_id": 75354503, "body": "<code>functools.reduce</code> has pretty much nothing to do with the operation you&#39;re trying to perform."}], "answers": [{"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 3, "last_activity_date": 1495664148, "creation_date": 1495664148, "answer_id": 44169339, "question_id": 44169302, "link": "https://stackoverflow.com/questions/44169302/how-to-reduce-the-sets-in-dict-values-using-comprehension/44169339#44169339", "title": "How to reduce the sets in dict values using comprehension?", "body": "<p>In my opinion, the most readable option would be to use <code>next</code> and <code>iter</code>. <strike>Unpacking might also not be of much use since it is more of an assignment operation.</strike> (See user2357112's answer)</p>\n\n<p>How about simply: </p>\n\n<pre><code>&gt;&gt;&gt; {k: next(iter(v)) for k, v in x.items()}\n{'a': 1, 'c': 3, 'b': 2}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1495664332, "post_id": 44169349, "comment_id": 75354590, "body": "This will produce an <code>AttributeError</code> within <code>Python 3.5.2</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 2, "creation_date": 1495664350, "post_id": 44169349, "comment_id": 75354593, "body": "@ChihebNexus: Indeed it will, but the question is tagged 2.7."}, {"owner": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "edited": false, "score": 0, "creation_date": 1495668192, "post_id": 44169349, "comment_id": 75355729, "body": "Thanks for this. That&#39;s what I wanted. Just to mention for other, unpacking also performs the validation that there is only one element in set which is the case here. unpacking on elements with more than one elements will give an error."}, {"owner": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "edited": false, "score": 0, "creation_date": 1495668432, "post_id": 44169349, "comment_id": 75355795, "body": "<code>{k: item for k, [item] in x.items()}</code> would be the way to do it someone is looking for the version compatible with Python 2 as well as 3. <code>items</code> is inefficient in Python 2 but for small lists shouldn&#39;t matter much."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1495664303, "last_edit_date": 1495664303, "creation_date": 1495664197, "answer_id": 44169349, "question_id": 44169302, "link": "https://stackoverflow.com/questions/44169302/how-to-reduce-the-sets-in-dict-values-using-comprehension/44169349#44169349", "title": "How to reduce the sets in dict values using comprehension?", "body": "<p>If you want to do this with an unpacking, that'd be</p>\n\n<pre><code>{k: item for k, [item] in x.iteritems()}\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 44169349, "answer_count": 2, "score": 2, "last_activity_date": 1495664303, "creation_date": 1495663904, "last_edit_date": 1495664056, "question_id": 44169302, "link": "https://stackoverflow.com/questions/44169302/how-to-reduce-the-sets-in-dict-values-using-comprehension", "title": "How to reduce the sets in dict values using comprehension?", "body": "<p>I have </p>\n\n<pre><code>x = {'a':set([1]) , 'b':set([2]), 'c':set([3]) }\n</code></pre>\n\n<p>It is guaranteed that there is only one element in the set. I need to convert this to </p>\n\n<pre><code>{'a': 1, 'c': 3, 'b': 2}\n</code></pre>\n\n<p>Following works:</p>\n\n<pre><code>x1 = {k:x[k].pop() for k in x.keys()}  OR\nx1 = {k:next(iter(x[k])) for k in x.keys()}\n</code></pre>\n\n<p>but I am not liking it as <code>pop()</code> here is modifying the original collection. I need help on following. </p>\n\n<ul>\n<li>How can I use unpacking as <a href=\"https://stackoverflow.com/a/22693614/2373278\">mentioned here</a>  within comprehension.</li>\n<li>Is there any way, I can use <code>functools.reduce</code> for this.</li>\n<li>What can be a better or Pythonic way of doing this overall? </li>\n</ul>\n"}, {"tags": ["python", "python-2.7", "numpy", "cumsum"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1495665198, "post_id": 44169294, "comment_id": 75354878, "body": "Shouldn&#39;t that be first three rows for the first split, because we need 300?"}, {"owner": {"reputation": 1621, "user_id": 552380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6xTn.jpg?s=128&g=1", "display_name": "Pjl", "link": "https://stackoverflow.com/users/552380/pjl"}, "edited": false, "score": 0, "creation_date": 1495665529, "post_id": 44169294, "comment_id": 75354971, "body": "Divakar, you right, i change the logic, read below"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1495665681, "post_id": 44169294, "comment_id": 75355006, "body": "Also, shouldn&#39;t the second split have three <code>100s</code>  on the third col corresponding to the rows 4,5,6 from B and two <code>50s</code> from rows 7, 8?"}], "answers": [{"tags": [], "owner": {"reputation": 1621, "user_id": 552380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6xTn.jpg?s=128&g=1", "display_name": "Pjl", "link": "https://stackoverflow.com/users/552380/pjl"}, "is_accepted": false, "score": 0, "last_activity_date": 1495665381, "creation_date": 1495665381, "answer_id": 44169554, "question_id": 44169294, "link": "https://stackoverflow.com/questions/44169294/numpy-cumsum-condition-over-loop-between-two-arrays/44169554#44169554", "title": "Numpy Cumsum Condition over Loop Between Two Arrays", "body": "<p>Do not bother guys, found my answer, i change the logic of the filter to get the element's on b by a negative mask. </p>\n\n<pre><code>mask_b = b[:,2].cumsum() &gt; a[1] \nreached = b[~mask_b]\n</code></pre>\n\n<p>This changes give me all the \"False\", cumsum lower than a[1].</p>\n\n<p>Output</p>\n\n<pre><code>5338 300 [False False False  True  True  True]\n[[349154   5338    100]\n [349155   5338    100]\n [349156   5338    100]]\n\n4970 400 [False False False False False False False False  True  True  True]\n[[349159   4970     50]\n [349160   4970     50]\n [349179   4970     50]\n [349181   4970     50]\n [349192   4970     50]\n [349113   4970     50]\n [349124   4970     50]\n [349135   4970     50]]\n\n5339 150 [False False False  True  True]\n[[449124   5339     50]\n [549135   5339     50]\n [649146   5339     50]]\n</code></pre>\n"}], "owner": {"reputation": 1621, "user_id": 552380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6xTn.jpg?s=128&g=1", "display_name": "Pjl", "link": "https://stackoverflow.com/users/552380/pjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495666024, "creation_date": 1495663856, "last_edit_date": 1495666024, "question_id": 44169294, "link": "https://stackoverflow.com/questions/44169294/numpy-cumsum-condition-over-loop-between-two-arrays", "title": "Numpy Cumsum Condition over Loop Between Two Arrays", "body": "<p>Solved, read <a href=\"https://stackoverflow.com/a/44169554/552380\">this</a>  </p>\n\n<p>Need some help to understand this strange behavior in numpy</p>\n\n<p>I have this two arrays.</p>\n\n<pre><code>A = np.array([   [5338, 300],   \n                 [4970, 400],\n                 [5339, 150],  \n        ])\n\nB = np.array([\n    [349154, 5338, 100], \n    [349155, 5338, 100],\n    [349156, 5338, 100], \n    [349157, 5338, 100], \n    [349158, 5338, 100],\n    [349159, 5338, 100],           \n    [349159, 4970, 50],\n    [349160, 4970, 50],\n    [349179, 4970, 50],\n    [349181, 4970, 50],\n    [349192, 4970, 50],\n    [349113, 4970, 50],\n    [349124, 4970, 50],\n    [349135, 4970, 50],\n    [349146, 4970, 50],\n    [349157, 4970, 50],\n    [349178, 4970, 50],\n    [449124, 5339, 50],\n    [549135, 5339, 50],\n    [649146, 5339, 50],\n    [749157, 5339, 50],\n    [849178, 5339, 50]\n])\nbpallets = []\n#We iterate array A\nfor a in A:\n    #create a mask to get values from array B where B index 1 equal's to a index 0\n    mask = B[:,1] == a[0]\n    #retrieve the values\n    b = B[mask]\n    #filter array b by conditioning cumsum to stop when it reaches the value of Array \"A\" index 2\n    reached = b[np.where(b[:,2].cumsum() &gt;= a[1] )]\n    bpallets.append(reached)\n</code></pre>\n\n<p>The idea is to stop the cumsum when reached the value in array \"A\" index column 2, for some reason in the second row of\nA, the condition fails. :(</p>\n\n<p>This is my output.</p>\n\n<pre><code>#FIRST LOOP, OK :)\n5338 300\n[[349156   5338    100]\n [349157   5338    100]\n [349158   5338    100]\n [349159   5338    100]]\n#SECOND LOOP, FAIL :(\n4970 400\n[[349135   4970     50]\n [349146   4970     50]\n [349157   4970     50]\n [349178   4970     50]] this is 200, not 400\n#LAST LOOP. OK :)\n5339 150\n[[649146   5339     50]\n [749157   5339     50]\n [849178   5339     50]]\n</code></pre>\n\n<p>Tks in advance!!!</p>\n"}, {"tags": ["python", "json", "yelp", "yelp-fusion-api"], "comments": [{"owner": {"reputation": 1876, "user_id": 5129275, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1472284439753986/picture?type=large", "display_name": "Vladimir Shevyakov", "link": "https://stackoverflow.com/users/5129275/vladimir-shevyakov"}, "edited": false, "score": 0, "creation_date": 1495664731, "post_id": 44169258, "comment_id": 75354725, "body": "Just a note - that isn&#39;t actually a JSON object. It&#39;s a dictionary - which, as you&#39;re discovering, is slightly different."}], "answers": [{"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 0, "last_activity_date": 1495663792, "creation_date": 1495663792, "answer_id": 44169285, "question_id": 44169258, "link": "https://stackoverflow.com/questions/44169258/printing-json-elements/44169285#44169285", "title": "Printing JSON elements", "body": "<p>Because those keys do not exist at that hierarchy within the JSON. They exist within the dictionary against the <code>\"location\"</code> key. You'd want to use:</p>\n\n<pre><code>print i[\"name\"][\"location\"][\"address1\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2292, "user_id": 6754140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7bd518bf683e48b801f3005f0ac9f17b?s=128&d=identicon&r=PG&f=1", "display_name": "dizzyf", "link": "https://stackoverflow.com/users/6754140/dizzyf"}, "is_accepted": false, "score": 0, "last_activity_date": 1495663864, "creation_date": 1495663864, "answer_id": 44169297, "question_id": 44169258, "link": "https://stackoverflow.com/questions/44169258/printing-json-elements/44169297#44169297", "title": "Printing JSON elements", "body": "<p>Because those exist in the \"location\" sub-dictionary. You would need something like this:</p>\n\n<p><code>print i[\"name\"][\"location\"][\"address1\"]</code> </p>\n\n<p>to access the data.</p>\n"}, {"tags": [], "owner": {"reputation": 3851, "user_id": 4652358, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh6.googleusercontent.com/-kT5qFfxGmcg/AAAAAAAAAAI/AAAAAAAAAWY/vVkJXBMAmko/photo.jpg?sz=128", "display_name": "Francesco Mantovani", "link": "https://stackoverflow.com/users/4652358/francesco-mantovani"}, "is_accepted": true, "score": 0, "last_activity_date": 1495701681, "last_edit_date": 1495701681, "creation_date": 1495699499, "answer_id": 44175416, "question_id": 44169258, "link": "https://stackoverflow.com/questions/44169258/printing-json-elements/44175416#44175416", "title": "Printing JSON elements", "body": "<p>The answer was:</p>\n\n<pre><code>for element in response_data['businesses']:\n    id = element['id']\n    name = element['name']\n    city = element['location']['city']\n    zip_code = element['location']['zip_code']\n    state = element['location']['state']\n    display_address = element['location']['display_address']\n    latitude = element['coordinates']['latitude']\n    longitude = element['coordinates']['longitude']\n    phone = element['phone']\n\n    print id, name,  city, zip_code, state, display_address, latitude, longitude, phone\n</code></pre>\n"}], "owner": {"reputation": 3851, "user_id": 4652358, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh6.googleusercontent.com/-kT5qFfxGmcg/AAAAAAAAAAI/AAAAAAAAAWY/vVkJXBMAmko/photo.jpg?sz=128", "display_name": "Francesco Mantovani", "link": "https://stackoverflow.com/users/4652358/francesco-mantovani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9082, "favorite_count": 0, "accepted_answer_id": 44175416, "answer_count": 3, "score": -1, "last_activity_date": 1551450215, "creation_date": 1495663663, "last_edit_date": 1551450215, "question_id": 44169258, "link": "https://stackoverflow.com/questions/44169258/printing-json-elements", "title": "Printing JSON elements", "body": "<p>There is something I don't understand about how to print a JSON element. With Yelp, thanks to this query \"<a href=\"https://api.yelp.com/v3/businesses/search?cc=FR&amp;location=Toulouse&amp;categories=movietheaters&amp;limit=1\" rel=\"nofollow noreferrer\">https://api.yelp.com/v3/businesses/search?cc=FR&amp;location=Toulouse&amp;categories=movietheaters&amp;limit=1</a>\" I can retrieve this JSON:</p>\n\n<pre><code>{\n  \"businesses\": [\n    {\n      \"id\": \"gaumont-wilson-toulouse-2\",\n      \"name\": \"Gaumont Wilson\",\n      \"image_url\": \"https://s3-media1.fl.yelpcdn.com/bphoto/dYJc874NnEJ9-jX2amrLvw/o.jpg\",\n      \"is_closed\": false,\n      \"url\": \"https://www.yelp.com/biz/gaumont-wilson-toulouse-2?adjust_creative=Xi9rQmCT871UpMvNRzAfuw&amp;utm_campaign=yelp_api_v3&amp;utm_medium=api_v3_business_search&amp;utm_source=Xi9rQmCT871UpMvNRzAfuw\",\n      \"review_count\": 165,\n      \"categories\": [\n        {\n          \"alias\": \"movietheaters\",\n          \"title\": \"Cinema\"\n        }\n      ],\n      \"rating\": 4,\n      \"coordinates\": {\n        \"latitude\": 43.6044154,\n        \"longitude\": 1.4475916\n      },\n      \"transactions\": [],\n      \"location\": {\n        \"address1\": \"3 place du Pr\u00e9sident Thomas Wilson\",\n        \"address2\": null,\n        \"address3\": null,\n        \"city\": \"Toulouse\",\n        \"zip_code\": \"31000\",\n        \"country\": \"FR\",\n        \"state\": \"31\",\n        \"display_address\": [\n          \"3 place du Pr\u00e9sident Thomas Wilson\",\n          \"31000 Toulouse\",\n          \"France\"\n        ]\n      },\n      \"phone\": \"+33534445050\",\n      \"display_phone\": \"+33 5 34 44 50 50\",\n      \"distance\": 451.43923036020004\n    }\n  ],\n  \"total\": 11,\n  \"region\": {\n    \"center\": {\n      \"latitude\": 43.602510035320684,\n      \"longitude\": 1.4426422119140625\n    }\n  }\n}\n</code></pre>\n\n<p>then I look into JSON this way:</p>\n\n<pre><code>response_data = response.json()\nfor i in response_data['businesses']:\n    print i['name']\n</code></pre>\n\n<p>but the <code>'name'</code> is the only thing I can print! </p>\n\n<p>I cannot print <code>'address1'</code>, <code>'city'</code> or <code>'zip_code'</code>. </p>\n\n<p>Why?</p>\n"}, {"tags": ["python", "ubuntu", "gtk", "runtime-error", "glade"], "answers": [{"tags": [], "owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "is_accepted": true, "score": 1, "last_activity_date": 1495668085, "creation_date": 1495668085, "answer_id": 44169970, "question_id": 44169237, "link": "https://stackoverflow.com/questions/44169237/runtime-error-when-importing-gtk-glade-ubuntu/44169970#44169970", "title": "Runtime error when importing gtk.glade Ubuntu", "body": "<p>You shouldn't be using libglade or pygtk as they are dead projects. Use modern PyGObject, Gtk3, and GtkBuilder: <a href=\"https://lazka.github.io/pgi-docs/#Gtk-3.0/classes/Builder.html\" rel=\"nofollow noreferrer\">https://lazka.github.io/pgi-docs/#Gtk-3.0/classes/Builder.html</a></p>\n"}], "owner": {"reputation": 431, "user_id": 6876488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/715213d30bdd9993802694d09be0c378?s=128&d=identicon&r=PG", "display_name": "Daniel Copley", "link": "https://stackoverflow.com/users/6876488/daniel-copley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 44169970, "answer_count": 1, "score": 0, "last_activity_date": 1495668085, "creation_date": 1495663550, "question_id": 44169237, "link": "https://stackoverflow.com/questions/44169237/runtime-error-when-importing-gtk-glade-ubuntu", "title": "Runtime error when importing gtk.glade Ubuntu", "body": "<p>While importing gtk.glade in Ubuntu 17.01 it throws a RuntimeError: sys.path must be a list of directory names. Any ideas? Maybe I am missing a dependency or something.</p>\n"}, {"tags": ["python", "matlab", "performance", "python-2.7", "numpy"], "comments": [{"owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 1, "creation_date": 1495665577, "post_id": 44169233, "comment_id": 75354982, "body": "Is there a chance you could use <a href=\"http://dask.pydata.org/en/latest/\" rel=\"nofollow noreferrer\">dask</a> with <a href=\"http://www.h5py.org/\" rel=\"nofollow noreferrer\">h5py</a>. Last year I did some massive simulations with millions of particles using these two packages."}, {"owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 1, "creation_date": 1495665744, "post_id": 44169233, "comment_id": 75355022, "body": "Also have a look <a href=\"https://stackoverflow.com/questions/14245094/how-to-read-part-of-binary-file-with-numpy\">here</a>"}, {"owner": {"reputation": 43, "user_id": 5828062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce020bca1573d1c9b99ed24d5d160ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin K.", "link": "https://stackoverflow.com/users/5828062/dustin-k"}, "reply_to_user": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 0, "creation_date": 1495666995, "post_id": 44169233, "comment_id": 75355389, "body": "@romeric I am not sure dask would work as i&#39;m using &quot;.bin&quot; files and a conversion to something like h5py would be counterproductive for the usecase. The data file format is something i currently don&#39;t have control of unfortunately. The second post seems to just be using a f.seek command in combo with np.fromfile. the issue i see there is i could go to the right location, but it would read the rest of the file into the numpy array which would overload memory in my usecase."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1495674645, "post_id": 44169233, "comment_id": 75357323, "body": "Doesn&#39;t <code>fromfile</code> have a count or size parameter?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1495674977, "post_id": 44169233, "comment_id": 75357413, "body": "It might help if you could separate out the times for <code>read</code>, <code>unpack</code> and <code>array</code> steps."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5828062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce020bca1573d1c9b99ed24d5d160ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin K.", "link": "https://stackoverflow.com/users/5828062/dustin-k"}, "edited": false, "score": 0, "creation_date": 1495723492, "post_id": 44173372, "comment_id": 75380704, "body": "i was not able to get the combo of f.seek + np.fromfile to work, but the alternative you provided worked! Using the np.frombuffer (which i had never heard of before) i was able to get python down to 24 us / chunk which is about ~2 times faster than the matlab equivalent. Cheers."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1495692481, "last_edit_date": 1495692481, "creation_date": 1495692135, "answer_id": 44173372, "question_id": 44169233, "link": "https://stackoverflow.com/questions/44169233/fastest-way-to-read-in-and-slice-binary-data-files-in-python/44173372#44173372", "title": "Fastest way to read in and slice binary data files in Python", "body": "<p>Write a chunk to a file:</p>\n\n<pre><code>In [117]: dat = np.random.randint(0,1028,80*80).astype(np.uint16)\nIn [118]: dat.tofile('test.dat')\nIn [119]: dat\nOut[119]: array([266, 776, 458, ..., 519,  38, 840], dtype=uint16)\n</code></pre>\n\n<p>Import it your way:</p>\n\n<pre><code>In [120]: import struct\nIn [121]: with open('test.dat','rb') as f:\n     ...:     frame = np.array(struct.unpack(\"H\"*6400,f.read(12800)))\n     ...:     \nIn [122]: frame\nOut[122]: array([266, 776, 458, ..., 519,  38, 840])\n</code></pre>\n\n<p>Import with <code>fromfile</code></p>\n\n<pre><code>In [124]: np.fromfile('test.dat',count=6400,dtype=np.uint16)\nOut[124]: array([266, 776, 458, ..., 519,  38, 840], dtype=uint16)\n</code></pre>\n\n<p>Compare times:</p>\n\n<pre><code>In [125]: %%timeit\n     ...:  with open('test.dat','rb') as f:\n     ...:      ...:     frame = np.array(struct.unpack(\"H\"*6400,f.read(12800)))\n     ...: \n1000 loops, best of 3: 898 \u00b5s per loop\n\nIn [126]: timeit np.fromfile('test.dat',count=6400,dtype=np.uint16)\nThe slowest run took 5.41 times longe....\n10000 loops, best of 3: 36.6 \u00b5s per loop\n</code></pre>\n\n<p><code>fromfile</code> is much faster.</p>\n\n<p>Time for the <code>struct.unpack</code>, without <code>np.array</code> is 266 \u00b5s; for just the <code>f.read</code>, 23.  So it's the <code>unpack</code> plus the more general and robust <code>np.array</code> that take so much longer.  File read, itself, is not a problem.  (<code>np.array</code> can handle many kinds of input, lists of lists, lists of objects, etc, so has to spend more time parsing and evaluating the inputs.)</p>\n\n<p>A slightly faster variant on <code>fromfile</code> is your read plus <code>frombuffer</code>:</p>\n\n<pre><code>In [133]: with open('test.dat','rb') as f:\n     ...:      frame3 = np.frombuffer(f.read(12800),dtype=np.uint16)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5828062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce020bca1573d1c9b99ed24d5d160ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin K.", "link": "https://stackoverflow.com/users/5828062/dustin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1294, "favorite_count": 1, "accepted_answer_id": 44173372, "answer_count": 1, "score": 4, "last_activity_date": 1495692481, "creation_date": 1495663529, "question_id": 44169233, "link": "https://stackoverflow.com/questions/44169233/fastest-way-to-read-in-and-slice-binary-data-files-in-python", "title": "Fastest way to read in and slice binary data files in Python", "body": "<p>I have a processing script that is designed to pull in binary data files of type \"uint16\" and do various processing in chunks of 6400 at a time. The code was originally written in Matlab, but because the analysis codes are written in Python we wanted to streamline the process by having everything done in Python. The problem is i've noticed that my Python code is sufficiently slower than Matlab's fread function. </p>\n\n<p>Simply put the Matlab code is thus:</p>\n\n<pre><code>fid = fopen(filename); \nframe = reshape(fread(fid,80*80,'uint16'),80,80);  \n</code></pre>\n\n<p>While my Python code is simply:</p>\n\n<pre><code>with open(filename, 'rb') as f: \n    frame = np.array(unpack(\"H\"*6400, f.read(12800))).reshape(80, 80).astype('float64')\n</code></pre>\n\n<p>The file size varies heavily from 500 MB -> 400 GB so i believe finding a faster way of parsing the data in Python could pay dividends on the larger files. A 500 MB typically has ~50000 chunks and this number increases linearly with file size. The speed difference i am seeing is roughly:</p>\n\n<pre><code>Python = 4 x 10^-4 seconds / chunk\n\nMatlab = 6.5 x 10^-5 seconds / chunk\n</code></pre>\n\n<p>The processing shows over time Matlab is ~5x faster than Python's method i've implemented. I have explored methods such as numpy.fromfile and numpy.memmap, but because these methods require opening the entire file into memory at some point, it limits the use case as my binary files are quite large. Is there some pythonic method for doing this that i am missing? I would have thought Python would be exceptionally fast at opening + reading binary files. Any advice is greatly appreciated. </p>\n"}, {"tags": ["python", "opencv", "numpy", "hsv"], "answers": [{"comments": [{"owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495664577, "post_id": 44169348, "comment_id": 75354674, "body": "Thanks, yes I am new to numpy and did not know what to search for. Much appreciated :)"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495664633, "post_id": 44169348, "comment_id": 75354694, "body": "@sphere Should have mentioned <code>bincount</code> is super fast. So, be prepared to be blown away :)"}, {"owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495664725, "post_id": 44169348, "comment_id": 75354723, "body": "Indeed, as everything with numpy. Even after reading the docs for <code>bincount</code> I would not have known that it can be used like this..."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1495664195, "creation_date": 1495664195, "answer_id": 44169348, "question_id": 44169214, "link": "https://stackoverflow.com/questions/44169214/calculate-color-visibility-from-hue-values-respecting-saturation-and-value-in-im/44169348#44169348", "title": "Calculate color visibility from hue values respecting saturation and value in image numpy array", "body": "<p>The magic you are looking for is in <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html\" rel=\"nofollow noreferrer\"><code>np.bincount</code></a>, as it translates pretty straight-forwardly to the loopy version using the <code>h</code> values as the bins -</p>\n\n<pre><code>H,S,V = pixels.T\nd_arr = np.bincount(H, ((S/255.0) * (V/255.0))**0.5 )\n</code></pre>\n\n<p>Note that the resultant array might have elements have zero valued counts</p>\n"}], "owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1155, "favorite_count": 0, "accepted_answer_id": 44169348, "answer_count": 1, "score": 2, "last_activity_date": 1495664195, "creation_date": 1495663433, "question_id": 44169214, "link": "https://stackoverflow.com/questions/44169214/calculate-color-visibility-from-hue-values-respecting-saturation-and-value-in-im", "title": "Calculate color visibility from hue values respecting saturation and value in image numpy array", "body": "<p>For a fun project I want to analyze a few images, especially which colors (hue) are more visible than others. As I want to take the \"visibility\" of the colors in account, just counting the hue of pixels is not enough (e.g. perfect black would count as red as its hue is 0\u00b0). I came up with a formula which is IMO good enough for my project.</p>\n\n<p>Currently I do the following:</p>\n\n<ul>\n<li>Read the image with opencv (results in BGR numpy array)</li>\n<li>Translate the image to HSV</li>\n<li>For each pixel, calculate the visibility of its hue (from saturation and value) and sum it in a dict of hues.</li>\n</ul>\n\n<p>The formula is <code>color_visibility = sqrt(saturation * value)</code>. So a full-red <code>RGB=255,0,0; HSV=0,1,1</code> would result in <code>1</code> while e.g. a light-red <code>RGB=255,128,128; HSV=0,0.5,1</code> would result in <code>0.70</code>.</p>\n\n<p>Here is the (full working) code I use:</p>\n\n<pre><code>import urllib\nimport cv2\nimport numpy as np\n\nurl = 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Leuchtturm_in_Westerheversand_crop.jpg/299px-Leuchtturm_in_Westerheversand_crop.jpg'\nimage = np.asarray(bytearray(urllib.urlopen(url).read()), dtype=\"uint8\")\nimage = cv2.imdecode(image, cv2.IMREAD_COLOR)\n\nd = {}\nhsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)\npixels = hsv.reshape((hsv.shape[0] * hsv.shape[1], 3))\nfor h,s,v in pixels:\n    d[h] = d.get(h, 0.) + (s/255. * v/255.) ** 0.5\n</code></pre>\n\n<p>As you might guess, the code gets really slow when the image have more pixels.</p>\n\n<p>My question is, how can I do the calculation of my formula without the dict and for-loop? Maybe directly with numpy?</p>\n"}, {"tags": ["python", "file-io"], "answers": [{"tags": [], "owner": {"reputation": 565, "user_id": 4386191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe783e04644862c30823614f31b9a996?s=128&d=identicon&r=PG", "display_name": "Zev Averbach", "link": "https://stackoverflow.com/users/4386191/zev-averbach"}, "is_accepted": true, "score": 2, "last_activity_date": 1495663959, "creation_date": 1495663959, "answer_id": 44169309, "question_id": 44169108, "link": "https://stackoverflow.com/questions/44169108/how-to-put-output-data-into-directory-specified-in-path1/44169309#44169309", "title": "How to put output data into directory specified in path1?", "body": "<p>There's an error in forming the output path:</p>\n\n<p>Instead of </p>\n\n<pre><code>with open(path1.join(name_output).format(index1), 'w') as output1:\n</code></pre>\n\n<p>you want</p>\n\n<pre><code>with open(os.path.join(path1, name_output), 'w') as output1:\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5930749, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a66b97be4dcbf8c02435250183b3ea15?s=128&d=identicon&r=PG&f=1", "display_name": "D.Fig", "link": "https://stackoverflow.com/users/5930749/d-fig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 44169309, "answer_count": 1, "score": 0, "last_activity_date": 1495663959, "creation_date": 1495662950, "question_id": 44169108, "link": "https://stackoverflow.com/questions/44169108/how-to-put-output-data-into-directory-specified-in-path1", "title": "How to put output data into directory specified in path1?", "body": "<p>I want to write my output files into directory added to path1. But when I try to do that error occurs. </p>\n\n<pre><code>import os\nimport sys\n\npath = 'ODOGS/LAB'\npath1= 'ODOGS/lab_res_voiced'\n\nfor file in os.listdir(path):\n    current = os.path.join(path, file)\n    name_output=file #name of the current file must be the same for the output file\n\n\n    index_list_B = []\n    line_list_B = []\n    line_list_linije = []\n\n    with open(current) as f1:\n         for index1, line1 in enumerate(f1):\n            strings_B = (\"p\",\"P\",\"t\",\"T\") #find lines which contain this str\n            line_list_B.append(line1) #put the line in line_list_B\n            if any(s in line1 for s in strings_B):\n                line_list_linije.append(line1)\n                print(line_list_linije)\n                index_list_B.append(index1) #positions of lines\n\n    with open(path1.join(name_output).format(index1), 'w') as output1:\n             for index1 in index_list_B:\n                 print(line_list_B[index1])                \n                 output1.writelines([line_list_B[index11],\n                                     line_list_B[index1],','])\n</code></pre>\n\n<p>This code goes trough the text files in <code>'ODOGS/LAB'</code> directory and searches if there are lines that contain ceratain strings. After it finds all lines which match the condition, it needs to write them in new file but with the same name as input file. That part of a code works just fine. </p>\n\n<p>I want to put all of output files into another directory <code>path1</code> but the part of \n<code>with</code> statement doesn't work.</p>\n\n<p>I get an error:</p>\n\n<pre><code>FileNotFoundError: [Errno 2] No such file or directory: 'sODOGS/lab_res_voicedzODOGS...\n</code></pre>\n\n<p>It works when the <code>with</code> statement is:</p>\n\n<pre><code>with open(name_output.format(index1), 'w') as output1:\n</code></pre>\n\n<p>but then I get all the files in the root folder which I don't want.\nMy question is how can I put my output files into directory in <code>path1</code>?</p>\n"}, {"tags": ["python", "scipy", "filtering", "signal-processing"], "comments": [{"owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1495669692, "post_id": 44169072, "comment_id": 75356104, "body": "the code,  data  to reproduce the problem is expected"}, {"owner": {"reputation": 1307, "user_id": 1549736, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/LBwQu.jpg?s=128&g=1", "display_name": "dbanas", "link": "https://stackoverflow.com/users/1549736/dbanas"}, "reply_to_user": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1495674162, "post_id": 44169072, "comment_id": 75357199, "body": "Code, and output, added, as requested by @f5r5e5d."}, {"owner": {"reputation": 1307, "user_id": 1549736, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/LBwQu.jpg?s=128&g=1", "display_name": "dbanas", "link": "https://stackoverflow.com/users/1549736/dbanas"}, "reply_to_user": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1495674272, "post_id": 44169072, "comment_id": 75357234, "body": "The second plot above, which uses freqs(), is correct."}], "owner": {"reputation": 1307, "user_id": 1549736, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/LBwQu.jpg?s=128&g=1", "display_name": "dbanas", "link": "https://stackoverflow.com/users/1549736/dbanas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495674038, "creation_date": 1495662755, "last_edit_date": 1495674038, "question_id": 44169072, "link": "https://stackoverflow.com/questions/44169072/why-do-invres-and-invresz-give-me-identical-results-but-freqs-and-freqz-give-co", "title": "Why do invres and invresz give me identical results, but freqs and freqz give completely different results?", "body": "<p>I'm using <em>scipy.signal.invresz</em>() to generate a digital filter from a pole/residue specification. I notice that using the <em>invres</em>() function gives me the same result. However, using <em>freqz</em> vs. <em>freqs</em> to generate the plotting data give me drastically different plots; why?</p>\n\n<pre><code>%matplotlib inline\n\nimport random\nimport numpy        as np\nimport scipy.signal as sig\n\nfrom matplotlib import pyplot as plt\n\n# Simulation configuration\nn_bits        = 128\nsamps_per_bit = 32\nsymbols       = [1, -1]\npeaking_mag   = 12         # (dB)\n\n# Generate the oversampled random symbol stream.\nu = np.array([random.choice(symbols) for i in xrange(n_bits)]).repeat(samps_per_bit)\n\n# Generate the peaking filter (i.e. - CTLE).\np1 = -1. / samps_per_bit\np2 = -2. / samps_per_bit\nz  = p1 / pow(10., peaking_mag / 20.)\nr1 = (z - p1) / (p2 - p1)\nr2 = 1. - r1\n\n# I get the same values for 'b' and 'a', whether I use invres, or invresz.\nb, a = sig.invresz([r1, r2], [p1, p2], [])\nprint b, a\nb, a = sig.invres([r1, r2], [p1, p2], [])\nprint b, a\n\n# But, I get drastically different plots, depending upon my use of freqz vs. freqs.\n# I was expecting to get similar plots, as long as I was consistent in my choice of S vs. Z domain.\n# That is: use invresz/freqz, or invres/freqs.\nw, h = sig.freqz(b, a)\nplt.plot(w, abs(h))\nplt.figure()\nw, h = sig.freqs(b, a)\nplt.plot(w, abs(h))\n</code></pre>\n\n<p>[ 1.          0.00784965] [ 1.          0.09375     0.00195312]<br>\n[ 1.          0.00784965] [ 1.          0.09375     0.00195312]</p>\n\n<p>Out[16]:\n<a href=\"https://i.stack.imgur.com/SUpf8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SUpf8.png\" alt=\"Showing plot difference, freqz vs. frees.\"></a></p>\n"}, {"tags": ["python", "append", "rename"], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495665514, "post_id": 44169148, "comment_id": 75354966, "body": "Is <code>file</code> still a string?  Try <code>print type(file) just ahead of the </code>rename` command.  On my Python, <code>listdir</code> returns a list of strings."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495666185, "post_id": 44169148, "comment_id": 75355148, "body": "That is seriously strange: <code>file</code> is a generic <i>type</i>??  I can&#39;t reproduce this with your code.  I&#39;ve tried my solution in my local directory, and it works as expected, giving <code>&lt;type &#39;str&gt;</code> for the variable type.  What Python?  Did you cut &amp; paste this code back into your environment to ensure we&#39;re running the same stuff?  All I did was to replace your path with &quot;.&quot; and disable the <code>rename</code> command."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495668238, "post_id": 44169148, "comment_id": 75355746, "body": "<code>fname</code> is defined in the <code>for</code> statement."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495668432, "post_id": 44169148, "comment_id": 75355796, "body": "Where are you stuck?  That error message looks quite specific."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495671391, "post_id": 44169148, "comment_id": 75356512, "body": "So remove it.  If it&#39;s at the end, just grab the slice up until then with <code>name[:-3]</code>.  If it&#39;s in the middle, use <code>name.replace(&quot;.TIF&quot;, &quot;&quot;)</code> -- which works in either case."}, {"owner": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495671786, "post_id": 44169148, "comment_id": 75356610, "body": "Nearly there, sorry to be such a newb. Now I get NameError: name &#39;name&#39; is not defined"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "edited": false, "score": 0, "creation_date": 1495673481, "post_id": 44169148, "comment_id": 75357027, "body": "Use whatever variable is holding the file name."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1495670416, "last_edit_date": 1495670416, "creation_date": 1495663093, "answer_id": 44169148, "question_id": 44169055, "link": "https://stackoverflow.com/questions/44169055/batch-rename-files-in-python-2-7/44169148#44169148", "title": "Batch rename files in Python 2.7", "body": "<p>Simply by writing that concatenation expression.  If I understand your details correctly, your new loop body would be</p>\n\n<pre><code>new_name = file + \" 17-\" + str(i) + \".TIF\"\nos.rename(os.path.join(path, file), \n          os.path.join(path, new_name) )\ni += 1\n</code></pre>\n\n<p>This would change file \"ABC\" into file \"ABC 17-151.TIF\"; the next would contain \"17-152\", and so on.</p>\n\n<p><strong>FACEPALM</strong></p>\n\n<p><code>file</code> is a built-in type.  Change the loop index.</p>\n\n<pre><code>for fname in files:\n    new_name = fname + \" 17-\" + str(i) + \".TIF\"\n    os.rename(os.path.join(path, fname), new_name)\n    i += 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "is_accepted": false, "score": 0, "last_activity_date": 1495680023, "creation_date": 1495680023, "answer_id": 44171423, "question_id": 44169055, "link": "https://stackoverflow.com/questions/44169055/batch-rename-files-in-python-2-7/44171423#44171423", "title": "Batch rename files in Python 2.7", "body": "<p>If I understand Prune's suggestion above, which I obviously don't, it would look like:</p>\n\n<pre><code>import os\npath = 'C:\\Users\\dcs\\Desktop\\Test direct'\nfiles = os.listdir(path)\ni = 151\n\n#The part that I want to strip the extensions from\nfor file in files:\n    new_name = file[:-3]\n\n#The part that words correctly (thanks Prune)\nfor fname in files:\n    new_name = fname + \" 17-\" + str(i) + \".TIF\"\n    os.rename(os.path.join(path, fname), new_name)\n    i += 1\n</code></pre>\n\n<p>However the first part, meant to strip the file of it's extension isn't working. </p>\n"}], "owner": {"reputation": 1, "user_id": 5661423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153422480269833/picture?type=large", "display_name": "Harley", "link": "https://stackoverflow.com/users/5661423/harley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495680023, "creation_date": 1495662654, "last_edit_date": 1495664731, "question_id": 44169055, "link": "https://stackoverflow.com/questions/44169055/batch-rename-files-in-python-2-7", "title": "Batch rename files in Python 2.7", "body": "<p>I'm trying to rename files in a directory so that it the new name is the original name followed by a space + \"17-\" + an incrementally increasing number.</p>\n\n<p>The code below is just renaming files from 151, upward. How do I keep the original name, adding the text \"17-\" and the numbers?</p>\n\n<pre><code>import os\npath = 'C:\\Users\\dcs\\Desktop\\Test direct'\nfiles = os.listdir(path)\ni = 151\n\nfor file in files:\n    os.rename(os.path.join(path, file), os.path.join(path, str(i)+'.TIF'))\n    i = i+1\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "csv", "multiprocessing"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495663389, "post_id": 44169045, "comment_id": 75354287, "body": "What is <code>row</code> at that point?  How many previous lines have you processed?  Also, can you post <i>minimal</i> code (per the posting guidelines), or is the file reading a seminal part of the problem?"}, {"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495663878, "post_id": 44169045, "comment_id": 75354441, "body": "The file reading isn&#39;t really the issue. It&#39;s more about how to do this efficiently. What more code do you need?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495664008, "post_id": 44169045, "comment_id": 75354484, "body": "Not more code ... <i>less</i>.  However, I think I spotted it without being able to run the code."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1495666407, "post_id": 44169045, "comment_id": 75355230, "body": "When I run your code with the sample input files, I get a <code>KeyError: &#39;parent_category&#39;</code> on the line <code>&#39;parent_category&#39;: item[&#39;parent_category&#39;],</code> in the <code>find_part()</code> function \u2014 so am unable to reproduce the &quot;incorrect index error&quot; problem mentioned."}, {"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1495717609, "post_id": 44169045, "comment_id": 75376550, "body": "@martineau Sorry! I am using a key that I forgot to include in the json sample. It&#39;s missing <code>parent_category</code>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1495721365, "post_id": 44169045, "comment_id": 75379223, "body": "@RyanScottCady: OK, but now I&#39;m getting <code>NameError: name &#39;reader&#39; is not defined</code> in the <code>find_part()</code> function."}, {"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495721819, "post_id": 44169045, "comment_id": 75379555, "body": "That&#39;s odd. You may try placing the reader assignment above the definition of <code>find_part()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495718149, "post_id": 44169310, "comment_id": 75376956, "body": "Thanks for your input! Where would I add this snippet to my code?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495724649, "post_id": 44169310, "comment_id": 75381533, "body": "You insert that when you want to go back to the start of the file.  Where does that fit in your control and data flow?"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1495663960, "creation_date": 1495663960, "answer_id": 44169310, "question_id": 44169045, "link": "https://stackoverflow.com/questions/44169045/compare-two-large-files-and-combine-matching-information/44169310#44169310", "title": "Compare two large files and combine matching information", "body": "<p>I think I found it.  Your CSV reader is like many other file access methods: you read the file sequentially, and then hit EOF.  When you try to do the same with the second part, the file is already at EOF, and the first <code>read</code> attempt returns a null result; this has no second element.</p>\n\n<p>If you want to access all of the records again, you need to reset the file bookmark.  The easiest way is to seek back to byte 0 with</p>\n\n<pre><code>partfile.seek(0)\n</code></pre>\n\n<p>Another way is to close and reopen the file.</p>\n\n<p>Does that get you moving?</p>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495717785, "post_id": 44169566, "comment_id": 75376683, "body": "Thanks for your answer. What is the difference between using <code>with open()</code> vs just using something like: <code>file = open(&#39;file&#39;, &#39;r&#39;)</code>?"}, {"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495717957, "post_id": 44169566, "comment_id": 75376816, "body": "Also, I received an error with your code: <code>ValueError: too many values to unpack (expected 2)</code> I&#39;m guessing this is due to the fact that the files are so big. The CSV has 650,000 lines and the JSON file 185,000"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "reply_to_user": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495722105, "post_id": 44169566, "comment_id": 75379732, "body": "It&#39;s probably caused by some line in partfile.csv with multiple <code>|</code> in it. This is just example code, so I make some assumption about consistent input data. In production code, you would have to handle malformed input."}], "tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": false, "score": 0, "last_activity_date": 1495665457, "creation_date": 1495665457, "answer_id": 44169566, "question_id": 44169045, "link": "https://stackoverflow.com/questions/44169045/compare-two-large-files-and-combine-matching-information/44169566#44169566", "title": "Compare two large files and combine matching information", "body": "<p>This should work as long as all the part numbers exist in the csv.</p>\n\n<pre><code>import json\n\n# read part codes into a dictionary\nwith open('partfile.csv') as fp:\n    partcodes = {}\n    for line in fp:\n        code, number = line.strip().split('|')\n        partcodes[number] = code\n\nwith open('catparts.json') as fp:\n    catparts = json.load(fp)\n\n# modify the part numbers/codes \nfor cat in catparts:\n    cat['part_numbers'] = [partcodes[n] + n for n in cat['part_numbers']]\n\n# output\nwith open('output.json', 'w') as fp:\n    json.dump(catparts, fp)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495723938, "post_id": 44182946, "comment_id": 75381016, "body": "Would this answer cause issues with multiple processes trying to open the file?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495724208, "post_id": 44182946, "comment_id": 75381209, "body": "@RyanScottCady: No, it will not cause a problem since the processes are all just trying to read the file. Is <code>partfile.csv</code> very big?"}, {"owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495724464, "post_id": 44182946, "comment_id": 75381392, "body": "<code>partfile.csv</code> is 650k lines. So it&#39;s not super large. I am wondering if there is an issue to just read its contents into a dictionary haha. I tried your solution though and it is working!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "edited": false, "score": 0, "creation_date": 1495724934, "post_id": 44182946, "comment_id": 75381733, "body": "Ryan: That&#39;s not very big by today&#39;s standards, so you could read it into memory and pass it to each process. There will be some overhead introduced in doing that, though  \u2014 it needs to be pickled and unpickled for each process, which might not be much faster. I&#39;m looking into a solution for that and will update my answer accordingly\u2014if it proves viable that is..."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1495728483, "last_edit_date": 1495728483, "creation_date": 1495722184, "answer_id": 44182946, "question_id": 44169045, "link": "https://stackoverflow.com/questions/44169045/compare-two-large-files-and-combine-matching-information/44182946#44182946", "title": "Compare two large files and combine matching information", "body": "<p>As I said in a comment, your code (now) gives me a <code>NameError: name 'reader'</code> is not defined in the <code>find_part()</code> function. The fix was to move the creation of the <code>csv.reader</code> into the function. I also changed how the file was being opened to use a <code>with</code> context manager and a <code>newline</code> argument. This also solves the problem of a bunch of separate tasks all trying to read the same csv file at the same time. </p>\n\n<p>Your approach is very inefficient because it reads the entire <code>'partfile.csv'</code> file for every part in <code>item['part_numbers']</code>. Nevertheless, the following seems to work:</p>\n\n<pre><code>import csv\nimport json\nfrom multiprocessing import Pool\n\ndef find_part(item):\n    data = {\n        'parent_category': item['parent_category'],\n        'category': item['category'],\n        'part_numbers': []\n    }\n\n    for part in item['part_numbers']:\n        with open('partfile.csv', newline='') as partfile:  # open csv in Py 3.x\n            for row in csv.reader(partfile, delimiter='|'):\n                if part.rstrip() == row[1]:\n                    data['part_numbers'].append(row[0] + row[1])\n\n    with open('output.json', 'a') as outfile:\n        outfile.write('    ')\n        json.dump(data, outfile)\n        outfile.write(',\\n')\n\nif __name__ == '__main__':\n    catparts = json.load(open('carparts.json', 'r'))\n\n    with open('output.json', 'w+') as outfile:\n        outfile.write('[\\n')\n\n    p = Pool(50)\n    p.map(find_part, catparts)\n\n    with open('output.json', 'a') as outfile:\n        outfile.write(']')\n</code></pre>\n\n<p>Here's a significantly more efficient version that only reads the entire <code>'partfile.csv'</code> file <strong>once</strong> per subprocess:</p>\n\n<pre><code>import csv\nimport json\nfrom multiprocessing import Pool\n\ndef find_part(item):\n    data = {\n        'parent_category': item['parent_category'],\n        'category': item['category'],\n        'part_numbers': []\n    }\n\n    with open('partfile.csv', newline='') as partfile:  # open csv for reading in Py 3.x\n        partlist = [row for row in csv.reader(partfile, delimiter='|')]\n\n    for part in item['part_numbers']:\n        part = part.rstrip()\n        for row in partlist:\n            if row[1] == part:\n                data['part_numbers'].append(row[0] + row[1])\n\n    with open('output.json', 'a') as outfile:\n        outfile.write('    ')\n        json.dump(data, outfile)\n        outfile.write(',\\n')\n\nif __name__ == '__main__':\n    catparts = json.load(open('carparts.json', 'r'))\n\n    with open('output.json', 'w+') as outfile:\n        outfile.write('[\\n')\n\n    p = Pool(50)\n    p.map(find_part, catparts)\n\n    with open('output.json', 'a') as outfile:\n        outfile.write(']')\n</code></pre>\n\n<p>While you could read the <code>'partfile.csv'</code> data into memory in the main task and pass it as an argument to the <code>find_part()</code> subtasks, doing so would just mean that the data would have to be pickled and unpickled for every process. You would need to run some timing tests to determine if that would be faster than using the <code>csv</code> module to explicitly read it, as shown above.</p>\n\n<p>Also note that it would also be more efficient to preprocess the data load from the <code>'carparts.json'</code> file and strip trailing whitespace from the first elem in every row before submitting tasks to the <code>Pool</code> because then you wouldn't need to do the <code>part = part.rstrip()</code> in <code>find_part()</code> over and over. Again, I don't know if doing so would be worth the effort or not\u2014and only timing tests can determine the answer.</p>\n"}], "owner": {"reputation": 333, "user_id": 4590442, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153063888639323/picture?type=large", "display_name": "Ryan Cady", "link": "https://stackoverflow.com/users/4590442/ryan-cady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 44182946, "answer_count": 3, "score": 2, "last_activity_date": 1495728483, "creation_date": 1495662586, "last_edit_date": 1495718119, "question_id": 44169045, "link": "https://stackoverflow.com/questions/44169045/compare-two-large-files-and-combine-matching-information", "title": "Compare two large files and combine matching information", "body": "<p>I have two fairly hefty files, JSON (185,000 Lines) and CSV (650,000). I need to iterate through each dict in the JSON file then within that iterate through each part in <code>part_numbers</code> and compare it to get the first three letters from where that part is found in the CSV.</p>\n\n<p>For some reason I'm having a hard time doing this properly. The first version of my script was way too slow, so I'm trying to speed it up</p>\n\n<p>JSON Example:</p>\n\n<pre><code>[\n    {\"category\": \"Dryer Parts\", \"part_numbers\": [\"ABC\", \"DEF\", \"GHI\", \"JKL\", \"MNO\", \"PQR\"], \"parent_category\": \"Dryers\"},\n    {\"category\": \"Washer Parts\", \"part_numbers\": [\"ABC\", \"DEF\", \"GHI\", \"JKL\", \"MNO\", \"PQR\"], \"parent_category\": \"Washers\"},\n    {\"category\": \"Sink Parts\", \"part_numbers\": [\"ABC\", \"DEF\", \"GHI\", \"JKL\", \"MNO\", \"PQR\"], \"parent_category\": \"Sinks\"},\n    {\"category\": \"Other Parts\", \"part_numbers\": [\"ABC\", \"DEF\", \"GHI\", \"JKL\", \"MNO\", \"PQR\"], \"parent_category\": \"Others\"}\n]\n</code></pre>\n\n<p>The CSV:</p>\n\n<pre><code>WCI|ABC\nWPL|DEF\nBSH|GHI\nWCI|JKL\n</code></pre>\n\n<p>The end dict would look like below:</p>\n\n<pre><code>{\"category\": \"Other Parts\",\n \"part_numbers\": [\"WCIABC\",\"WPLDEF\",\"BSHGHI\",\"JKLWCI\"...]}\n</code></pre>\n\n<p>Here's an example of what I've made so far although, it returns <code>IndexError: list index out of range</code> at <code>if (part.rstrip() == row[1]):</code>:</p>\n\n<pre><code>import csv\nimport json\nfrom multiprocessing import Pool\n\ndef find_part(item):\n    data = {\n        'parent_category': item['parent_category'],\n        'category': item['category'],\n        'part_numbers': []\n    }\n\n    for part in item['part_numbers']:\n        for row in reader:\n            if (part.rstrip() == row[1]):\n                data['part_numbers'].append(row[0] + row[1])\n\n    with open('output.json', 'a') as outfile:\n        outfile.write('    ')\n        json.dump(data, outfile)\n        outfile.write(',\\n')\n\n\nif __name__ == '__main__':\n    catparts = json.load(open('catparts.json', 'r'))\n    partfile = open('partfile.csv', 'r')\n    reader = csv.reader(partfile, delimiter='|')\n\n\n    with open('output.json', 'w+') as outfile:\n        outfile.write('[\\n')\n\n    p = Pool(50)\n    p.map(find_part, catparts)\n\n    with open('output.json', 'a') as outfile:\n        outfile.write('\\n]')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1495662498, "post_id": 44169007, "comment_id": 75353997, "body": "You meant to append, not extend."}], "answers": [{"tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": true, "score": 3, "last_activity_date": 1495663119, "creation_date": 1495663119, "answer_id": 44169153, "question_id": 44169007, "link": "https://stackoverflow.com/questions/44169007/python-store-string-to-array-not-characters/44169153#44169153", "title": "python store string to array not characters", "body": "<p><code>a.extend(b)</code> is for extending list <code>a</code> by <strong>concatenating another sequence</strong> <code>b</code> onto it.   When <code>b</code> is a string, and you force it to be interpreted as a sequence, it is interpreted as a sequence of individual characters.  A simple example of this is:</p>\n\n<pre><code>&gt;&gt;&gt; b = 'Hello'\n&gt;&gt;&gt; list(b)\n['H', 'e', 'l', 'l', 'o']\n</code></pre>\n\n<p>Instead, you clearly want to do <code>a.append(b)</code>,  i.e. insert the entire string <code>b</code> as a single new item at the end of <code>a</code>.</p>\n"}], "owner": {"reputation": 3983, "user_id": 468587, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/037ec7248e183d5617cc899acb71dfcc?s=128&d=identicon&r=PG", "display_name": "user468587", "link": "https://stackoverflow.com/users/468587/user468587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3887, "favorite_count": 0, "closed_date": 1496053058, "accepted_answer_id": 44169153, "answer_count": 1, "score": 1, "last_activity_date": 1495663119, "creation_date": 1495662432, "question_id": 44169007, "link": "https://stackoverflow.com/questions/44169007/python-store-string-to-array-not-characters", "closed_reason": "Duplicate", "title": "python store string to array not characters", "body": "<p>I'm new to python. I tried to store bunch of strings to an array and at the end print out the array, however it print out as a long list of characters. here is my code:</p>\n\n<pre><code>user_with_no_records = [\"\"]\nfor user_test_docs in json_data['results']:\n   ... do something here ...\n   user_with_no_records.extend(user_test_docs['userId'].replace(\"'\", '\"'))\n...\npprint(user_with_no_records)\n</code></pre>\n\n<p>instead of print out :</p>\n\n<pre><code>\"1234-4a20-47c0-b23c-a35a\", \"53dd-4120-4249-b4f6-ebe2\"\n</code></pre>\n\n<p>it print out</p>\n\n<pre><code>\"1\",\"2\",\"3\",\"4\",\"-\",\"a\",\"2\",\"0\"....\n</code></pre>\n"}, {"tags": ["python", "azure", "active-directory"], "comments": [{"owner": {"reputation": 3035, "user_id": 4074838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gS08_lyG7s/AAAAAAAAAAI/AAAAAAAAHqA/rU0O1y51fto/photo.jpg?sz=128", "display_name": "Laurent Mazuel", "link": "https://stackoverflow.com/users/4074838/laurent-mazuel"}, "edited": false, "score": 0, "creation_date": 1495670782, "post_id": 44168974, "comment_id": 75356373, "body": "Are you talking about CLI 2.0? Because it&#39;s based in this exact SDK. I don&#39;t see any reason for your behavior :/"}, {"owner": {"reputation": 249, "user_id": 1836323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e10b94ae5fe53a447c0d80ebe3b12cf?s=128&d=identicon&r=PG", "display_name": "Gudda Bhoota", "link": "https://stackoverflow.com/users/1836323/gudda-bhoota"}, "reply_to_user": {"reputation": 3035, "user_id": 4074838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gS08_lyG7s/AAAAAAAAAAI/AAAAAAAAHqA/rU0O1y51fto/photo.jpg?sz=128", "display_name": "Laurent Mazuel", "link": "https://stackoverflow.com/users/4074838/laurent-mazuel"}, "edited": false, "score": 0, "creation_date": 1495672516, "post_id": 44168974, "comment_id": 75356817, "body": "Yes, CLI 2.0. Me neither. Should I register another app in AAD and check if that reports all the subscriptions?"}, {"owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1495679846, "post_id": 44168974, "comment_id": 75358364, "body": "@SanjayKulkarni Based on my knowledge, subscriptions are stored in local cache. You could use <code>az account clear</code> (az logout) then <code>az login</code> again."}, {"owner": {"reputation": 249, "user_id": 1836323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e10b94ae5fe53a447c0d80ebe3b12cf?s=128&d=identicon&r=PG", "display_name": "Gudda Bhoota", "link": "https://stackoverflow.com/users/1836323/gudda-bhoota"}, "reply_to_user": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1495680599, "post_id": 44168974, "comment_id": 75358525, "body": "@Walter-MSFT, CLI worked fine after logging out and logging in. The problem is about fetching it using python apis."}], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 2, "last_activity_date": 1495708258, "creation_date": 1495708258, "answer_id": 44178256, "question_id": 44168974, "link": "https://stackoverflow.com/questions/44168974/new-azure-subscriptions-are-not-listed-with-azure-python-sdk/44178256#44178256", "title": "New Azure Subscriptions are not listed with azure python sdk", "body": "<p>I tried to reproduce your issue successfully, which was caused by your client registed on Azure AD that have no permission to retrieve the information of these subscriptions. So the solution is to add permission for each subsription via add role like <code>Owner</code> for your client, as the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ge2Cm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ge2Cm.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then your code works fine, but I know the solution is not perfect for you. I'm looking for a better one.</p>\n"}], "owner": {"reputation": 249, "user_id": 1836323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e10b94ae5fe53a447c0d80ebe3b12cf?s=128&d=identicon&r=PG", "display_name": "Gudda Bhoota", "link": "https://stackoverflow.com/users/1836323/gudda-bhoota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 1, "accepted_answer_id": 44178256, "answer_count": 1, "score": 1, "last_activity_date": 1495708258, "creation_date": 1495662289, "question_id": 44168974, "link": "https://stackoverflow.com/questions/44168974/new-azure-subscriptions-are-not-listed-with-azure-python-sdk", "title": "New Azure Subscriptions are not listed with azure python sdk", "body": "<p>I created 2 new subscriptions from Azure Portal, but I've not been able to list those newly created subscriptions using the python SDK. It lists the old subscriptions fine. </p>\n\n<pre><code>from azure.mgmt.resource import SubscriptionClient\n...\nsubscriptionClient = SubscriptionClient(credentials)\nfor subscription in subscriptionClient.subscriptions.list():\n    print subscription\n...\n</code></pre>\n\n<p>I was having the same problem with CLI as well, but logging out and logging back in resolved the issue.</p>\n\n<p>I don't see any other subscriptions operations to scan and refresh the subscriptions. Is there something I need to under Azure Active Directory to manage new subscriptions?</p>\n"}, {"tags": ["python", "signals", "signal-processing", "pitch-tracking"], "comments": [{"owner": {"reputation": 2946, "user_id": 6659511, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-cl0nfkTWr20/AAAAAAAAAAI/AAAAAAAABi4/PFJScYlYuao/photo.jpg?sz=128", "display_name": "ma3oun", "link": "https://stackoverflow.com/users/6659511/ma3oun"}, "edited": false, "score": 0, "creation_date": 1496324394, "post_id": 44168945, "comment_id": 75623571, "body": "A bit of theory: The smallest the signal segment you use, the less accuracy you&#39;ll get when detecting high frequencies. Indeed, when you work on a signal segment, you basically multiply the full signal by a time window. In the frequency domain, this corresponds to a convolution of the signal&#39;s spectrum by a sinc function ((sin x)/x). The spectrum&#39;s elements are &quot;averaged&quot; with their neighbours. The smaller your time window, the broader the sinc convolution will be, and the more &quot;averaging&quot; you&#39;ll get. Averaging acts like a low-pass filter: high frequencies tend to fade..."}], "answers": [{"tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": false, "score": 0, "last_activity_date": 1496181842, "creation_date": 1496181842, "answer_id": 44272671, "question_id": 44168945, "link": "https://stackoverflow.com/questions/44168945/autocorrelation-code-in-python-produces-errors-guitar-pitch-detection/44272671#44272671", "title": "Autocorrelation code in Python produces errors (guitar pitch detection)", "body": "<p>The autocorrelation method is not always right.  You may want to implement a more sophisticated method like YIN:</p>\n\n<p><a href=\"http://audition.ens.fr/adc/pdf/2002_JASA_YIN.pdf\" rel=\"nofollow noreferrer\">http://audition.ens.fr/adc/pdf/2002_JASA_YIN.pdf</a></p>\n\n<p>or MPM:</p>\n\n<p><a href=\"http://www.cs.otago.ac.nz/tartini/papers/A_Smarter_Way_to_Find_Pitch.pdf\" rel=\"nofollow noreferrer\">http://www.cs.otago.ac.nz/tartini/papers/A_Smarter_Way_to_Find_Pitch.pdf</a></p>\n\n<p>Both of the above papers are good reads.</p>\n"}, {"comments": [{"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1496342123, "post_id": 44276840, "comment_id": 75635069, "body": "That is indeed an improvement. However, I sometimes get this error: <code>i_peak = peakutils.indexes(corr, thres=0.8, min_dist=5)[0] IndexError: index 0 is out of bounds for axis 0 with size 0</code> as <code>indexes</code> does not find anything with that threshold."}, {"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1496411931, "post_id": 44276840, "comment_id": 75665422, "body": "Fixed it with: <a href=\"https://pastebin.com/2yVVWsAJ\" rel=\"nofollow noreferrer\">pastebin.com/2yVVWsAJ</a>. Thanks a lot. Any other tips?"}], "tags": [], "owner": {"reputation": 4011, "user_id": 3083138, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/49aa5e800a75588e6bd1b0e73209312b?s=128&d=identicon&r=PG", "display_name": "stachyra", "link": "https://stackoverflow.com/users/3083138/stachyra"}, "is_accepted": true, "score": 3, "last_activity_date": 1496210616, "creation_date": 1496210616, "answer_id": 44276840, "question_id": 44168945, "link": "https://stackoverflow.com/questions/44168945/autocorrelation-code-in-python-produces-errors-guitar-pitch-detection/44276840#44276840", "title": "Autocorrelation code in Python produces errors (guitar pitch detection)", "body": "<p>The autocorrelation function in the code snippet that you linked is not particularly robust.  In order to get the correct result, it needs to locate the first peak on the left hand side of the autocorrelation curve.  The method that the other developer used (calling the <code>numpy.argmax()</code> function) does not always find the correct value.</p>\n\n<p>I've implemented a slightly more robust version, using the <a href=\"https://pypi.python.org/pypi/PeakUtils\" rel=\"nofollow noreferrer\">peakutils</a> package.  I don't promise that it's perfectly robust either, but in any case it achieves a better result than the version of the <code>freq_from_autocorr()</code> function that you were previously using.</p>\n\n<p>My example solution is listed below:</p>\n\n<pre><code>import librosa\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.signal import fftconvolve\nfrom pprint import pprint\nimport peakutils\n\ndef freq_from_autocorr(signal, fs):\n    # Calculate autocorrelation (same thing as convolution, but with one input\n    # reversed in time), and throw away the negative lags\n    signal -= np.mean(signal)  # Remove DC offset\n    corr = fftconvolve(signal, signal[::-1], mode='full')\n    corr = corr[len(corr)//2:]\n\n    # Find the first peak on the left\n    i_peak = peakutils.indexes(corr, thres=0.8, min_dist=5)[0]\n    i_interp = parabolic(corr, i_peak)[0]\n\n    return fs / i_interp, corr, i_interp\n\ndef parabolic(f, x):\n    \"\"\"\n    Quadratic interpolation for estimating the true position of an\n    inter-sample maximum when nearby samples are known.\n\n    f is a vector and x is an index for that vector.\n\n    Returns (vx, vy), the coordinates of the vertex of a parabola that goes\n    through point x and its two neighbors.\n\n    Example:\n    Defining a vector f with a local maximum at index 3 (= 6), find local\n    maximum if points 2, 3, and 4 actually defined a parabola.\n\n    In [3]: f = [2, 3, 1, 6, 4, 2, 3, 1]\n\n    In [4]: parabolic(f, argmax(f))\n    Out[4]: (3.2142857142857144, 6.1607142857142856)\n    \"\"\"\n    xv = 1/2. * (f[x-1] - f[x+1]) / (f[x-1] - 2 * f[x] + f[x+1]) + x\n    yv = f[x] - 1/4. * (f[x-1] - f[x+1]) * (xv - x)\n    return (xv, yv)\n\n# Time window after initial onset (in units of seconds)\nwindow = 0.1\n\n# Open the file and obtain the sampling rate\ny, sr = librosa.core.load(\"./Vocaroo_s1A26VqpKgT0.mp3\")\nidx = np.arange(len(y))\n\n# Set the window size in terms of number of samples\nwinsamp = int(window * sr)\n\n# Calcualte the onset frames in the usual way\nonset_frames = librosa.onset.onset_detect(y=y, sr=sr)\nonstm = librosa.frames_to_time(onset_frames, sr=sr)\n\nfqlist = [] # List of estimated frequencies, one per note\ncrlist = [] # List of autocorrelation arrays, one array per note\niplist = [] # List of peak interpolated peak indices, one per note\nfor tm in onstm:\n    startidx = int(tm * sr)\n    freq, corr, ip = freq_from_autocorr(y[startidx:startidx+winsamp], sr)\n    fqlist.append(freq)\n    crlist.append(corr)\n    iplist.append(ip)    \n\npprint(fqlist)\n\n# Choose which notes to plot (it's set to show all 8 notes in this case)\nplidx = [0, 1, 2, 3, 4, 5, 6, 7]\n\n# Plot amplitude curves of all notes in the plidx list \nfgwin = plt.figure(figsize=[8, 10])\nfgwin.subplots_adjust(bottom=0.0, top=0.98, hspace=0.3)\naxwin = []\nii = 1\nfor tm in onstm[plidx]:\n    axwin.append(fgwin.add_subplot(len(plidx)+1, 1, ii))\n    startidx = int(tm * sr)\n    axwin[-1].plot(np.arange(startidx, startidx+winsamp), y[startidx:startidx+winsamp])\n    ii += 1\naxwin[-1].set_xlabel('Sample ID Number', fontsize=18)\nfgwin.show()\n\n# Plot autocorrelation function of all notes in the plidx list\nfgcorr = plt.figure(figsize=[8,10])\nfgcorr.subplots_adjust(bottom=0.0, top=0.98, hspace=0.3)\naxcorr = []\nii = 1\nfor cr, ip in zip([crlist[ii] for ii in plidx], [iplist[ij] for ij in plidx]):\n    if ii == 1:\n        shax = None\n    else:\n        shax = axcorr[0]\n    axcorr.append(fgcorr.add_subplot(len(plidx)+1, 1, ii, sharex=shax))\n    axcorr[-1].plot(np.arange(500), cr[0:500])\n    # Plot the location of the leftmost peak\n    axcorr[-1].axvline(ip, color='r')\n    ii += 1\naxcorr[-1].set_xlabel('Time Lag Index (Zoomed)', fontsize=18)\nfgcorr.show()\n</code></pre>\n\n<p>The printed output looks like:</p>\n\n<pre><code>In [1]: %run autocorr.py\n[325.81996740236065,\n 346.43374761017725,\n 367.12435233192753,\n 390.17291696559079,\n 412.9358117076161,\n 436.04054933498134,\n 465.38986619237039,\n 490.34120132405866]\n</code></pre>\n\n<p>The first figure produced by my code sample depicts the amplitude curves for the next 0.1 seconds following each detected onset time:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vx1DK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vx1DK.png\" alt=\"Guitar note amplitudes\"></a></p>\n\n<p>The second figure produced by the code shows the autocorrelation curves, as computed inside of the <code>freq_from_autocorr()</code> function.  The vertical red lines depict the location of the first peak on the left for each curve, as estimated by the peakutils package.  The method used by the other developer was getting incorrect results for some of these red lines; that's why his version of that function was occasionally returning the wrong frequencies.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6rrMi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6rrMi.png\" alt=\"Guitar note autocorrelation curves\"></a></p>\n\n<p>My suggestion would be to test the revised version of the <code>freq_from_autocorr()</code> function on other recordings, see if you can find more challenging examples where even the improved version still gives incorrect results, and then get creative and try to develop an even more robust peak finding algorithm that never, ever mis-fires.</p>\n"}], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 1, "accepted_answer_id": 44276840, "answer_count": 2, "score": 2, "last_activity_date": 1496210616, "creation_date": 1495662182, "last_edit_date": 1495734653, "question_id": 44168945, "link": "https://stackoverflow.com/questions/44168945/autocorrelation-code-in-python-produces-errors-guitar-pitch-detection", "title": "Autocorrelation code in Python produces errors (guitar pitch detection)", "body": "<p><a href=\"https://github.com/endolith/waveform-analyzer/blob/master/frequency_estimator.py\" rel=\"nofollow noreferrer\">This link</a> provides code for an autocorrelation-based pitch detection algorithm. I am using it to detect pitches in simple guitar melodies.</p>\n\n<p>In general, it produces very good results. For example, for the melody C4, C#4, D4, D#4, E4 it outputs:</p>\n\n<pre><code>262.743653536\n272.144441273\n290.826273006\n310.431336809\n327.094621169\n</code></pre>\n\n<p>Which correlates to the correct notes.</p>\n\n<p>However, in some cases like <a href=\"http://vocaroo.com/i/s1A26VqpKgT0\" rel=\"nofollow noreferrer\">this</a> audio file (E4, F4, F#4, G4, G#4, A4, A#4, B4) it produces errors:</p>\n\n<pre><code>325.861452246\n13381.6439242\n367.518651703\n391.479384923\n414.604661221\n218.345286173\n466.503751322\n244.994090035\n</code></pre>\n\n<p>More specifically, there are three errors here: <strong>13381Hz</strong> is wrongly detected instead of F4 (~350Hz) (weird error), and also 218Hz instead of A4 (440Hz) and 244Hz instead of B4 (~493Hz), which are octave errors.</p>\n\n<p>I assume the two errors are caused by something different? Here is the code:</p>\n\n<pre><code>slices = segment_signal(y, sr)\nfor segment in slices:\n  pitch = freq_from_autocorr(segment, sr)\n  print pitch\n\ndef segment_signal(y, sr, onset_frames=None, offset=0.1):\n  if (onset_frames == None):\n    onset_frames = remove_dense_onsets(librosa.onset.onset_detect(y=y, sr=sr))\n\n  offset_samples = int(librosa.time_to_samples(offset, sr))\n\n  print onset_frames\n\n  slices = np.array([y[i : i + offset_samples] for i\n    in librosa.frames_to_samples(onset_frames)])\n\n  return slices\n</code></pre>\n\n<p>You can see the <code>freq_from_autocorr</code> function in the first link above.</p>\n\n<p>The only think that I have changed is this line:</p>\n\n<pre><code>corr = corr[len(corr)/2:]\n</code></pre>\n\n<p>Which I have replaced with:</p>\n\n<pre><code>corr = corr[int(len(corr)/2):]\n</code></pre>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>I noticed the smallest the <code>offset</code> I use (the smallest the signal segment I use to detect each pitch), the more high-frequency (10000+ Hz) errors I get.</p>\n\n<p>Specifically, I noticed that the part that goes differently in those cases (10000+ Hz) is the calculation of the <code>i_peak</code> value. When in cases with no error it is in the range of 50-150, in the case of the error it is 3-5.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 0, "creation_date": 1495661830, "post_id": 44168831, "comment_id": 75353734, "body": "You can use a list comprehension, but that would be too compact for my taste. Instead, use a <a href=\"https://wiki.python.org/moin/Generators\" rel=\"nofollow noreferrer\">generator function</a>. That will get rid of <code>out</code> and <code>flag</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1495662781, "post_id": 44169009, "comment_id": 75354109, "body": "Thanks. I guess <code>all</code> was all I need!"}], "tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": true, "score": 1, "last_activity_date": 1495662440, "creation_date": 1495662440, "answer_id": 44169009, "question_id": 44168831, "link": "https://stackoverflow.com/questions/44168831/selecting-items-from-list-of-objects-based-on-values-of-generic-object-attribute/44169009#44169009", "title": "Selecting items from list of objects based on values of generic object attributes", "body": "<p>Something like:</p>\n\n<pre><code>def keys_with(all_keys, **kwargs):\n    def matches(info):\n        \"\"\"\n        Iterates over all `kwargs` outside and returns True \n        only if all the key/values within kwargs are present in info.\n        \"\"\"\n        return all(getattr(info, x) == y for x, y in kwargs.items())\n\n    return [info for info in all_keys if matches(info)]\n</code></pre>\n"}], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44169009, "answer_count": 1, "score": 2, "last_activity_date": 1495663206, "creation_date": 1495661612, "question_id": 44168831, "link": "https://stackoverflow.com/questions/44168831/selecting-items-from-list-of-objects-based-on-values-of-generic-object-attribute", "title": "Selecting items from list of objects based on values of generic object attributes", "body": "<h2><strong>Background</strong></h2>\n\n<p>Let's say I have some class <code>Info</code> which stores bunch of attributes defined by user such as:</p>\n\n<pre><code>class Info:    \n    def __init__(self, **kwargs):\n        for key, value in kwargs.items():\n            setattr(self, key, value)\n\n    def __getitem__(self, key):\n        return getattr(self, key)\n</code></pre>\n\n<p>and I have a list of <code>Info</code> instances, let's say:</p>\n\n<pre><code>all_keys = [Info(a=1, b='y', c=0),\n            Info(a=2, b='y', c=1),\n            Info(a=3, b='n', c=2),\n            Info(a=2, b='y', c=3)]\n</code></pre>\n\n<p>I want to select from the list <code>all_keys</code> items based on some criteria on <code>a</code>, <code>b</code>, <code>c</code>. I made the following function:</p>\n\n<pre><code>def keys_with(all_keys, **kwargs):\n    out = []\n    for info in all_keys:\n        flag = 1\n        for k, v in kwargs.items():\n            if info[k] != v:\n               flag = 0\n               break\n        if flag:\n            out.append(info)\n    return out\n</code></pre>\n\n<h2><strong>Expected usage and output</strong></h2>\n\n<p>I want to do something like: <code>my_keys = keys_with(all_keys, a=2, b='y')</code> . The current function <code>keys_with</code> given the desired output:</p>\n\n<pre><code>[Info(c=1, a=2, b=y), Info(c=3, a=2, b=y)]\n</code></pre>\n\n<h2>Question</h2>\n\n<p>The function <code>keys_with()</code> is ugly for something so simple: it uses a flag, nested loops, and looks very non-pythonic. I am sure there is a much better way to write it more compactly and more pythonically. I appreciate any help or hints!</p>\n"}, {"tags": ["python", "python-2.7", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 10874, "user_id": 36656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a29caa1a66ae5e3772ed976f6b63527?s=128&d=identicon&r=PG", "display_name": "Adam Byrtek", "link": "https://stackoverflow.com/users/36656/adam-byrtek"}, "is_accepted": false, "score": 0, "last_activity_date": 1495750040, "creation_date": 1495750040, "answer_id": 44190538, "question_id": 44168820, "link": "https://stackoverflow.com/questions/44168820/populate-sqlalchemy-from-request-form-without-wtforms/44190538#44190538", "title": "populate sqlalchemy from request.form without wtforms", "body": "<p>You could use <code>getattr</code> to achieve that:</p>\n\n<pre><code>for head in header:\n    setattr(u, head.name, request.form[head.name])\n</code></pre>\n\n<p>This allows you to dynamically set any attribute on an object.</p>\n"}], "owner": {"reputation": 346, "user_id": 7942553, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4cd16733e11d3626fb9e6504fe7458e?s=128&d=identicon&r=PG&f=1", "display_name": "new to python", "link": "https://stackoverflow.com/users/7942553/new-to-python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495750040, "creation_date": 1495661588, "question_id": 44168820, "link": "https://stackoverflow.com/questions/44168820/populate-sqlalchemy-from-request-form-without-wtforms", "title": "populate sqlalchemy from request.form without wtforms", "body": "<p>Say I pull data from sqlalchemy via the following:</p>\n\n<pre><code>u=Mobility.query.filter_by(username=request.form.get('user')).first()\n</code></pre>\n\n<p>The Mobility class has 3 entries username(string), letter(string), date(datetime). My request.form will have as part of it's dictionary </p>\n\n<pre><code>request.form=ImmutableMultiDict([('letter', u'values'), ('date', u'2017-05-24'), ('user',u'someone'),('stuff',u'stuffvalue')])\n</code></pre>\n\n<p>I have a header built like the following:</p>\n\n<pre><code>header=[]\nfor head in Mobility.__table__.columns:\n header.append(head)\n</code></pre>\n\n<p>I want to do the following:</p>\n\n<pre><code>for head in header:\n u[head.name]=request.form[head.name]\n\ndb.session.commit()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "slack-api", "slack"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495667678, "post_id": 44169431, "comment_id": 75355579, "body": "Hi, Thank you for your response. The first half of this works correctly. Its more of the linking into the second portion if you could shed some light on that it might resolve it."}, {"owner": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495672042, "post_id": 44169431, "comment_id": 75356684, "body": "Thanks for the comments lol sorry for late response I was playing with these suggestions and got lost until you posted this code. I&#39;m working with the changes right now. unfortunately though now it stops working after the first time it responds (&quot;Please input your username&quot;)"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495672190, "post_id": 44169431, "comment_id": 75356735, "body": "So you need it to work forever? That I didn&#39;t understand, I thought it&#39;s a one off task. Ok, then let&#39;s me restore the first <code>while True</code> back into the code."}, {"owner": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495672299, "post_id": 44169431, "comment_id": 75356763, "body": "well in this instance its for a person to essentially log in. so really I just want them to say @bot login and it asks for username, repeats back to them and then confirms. that way I can save that as a variable"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495672497, "post_id": 44169431, "comment_id": 75356809, "body": "Well, you get the idea, the rest is up to you. I&#39;m sure you can adapt the code as you want \u2014 one time or infiite loop, or whatever. Good luck!"}, {"owner": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "edited": false, "score": 0, "creation_date": 1495672788, "post_id": 44169431, "comment_id": 75356875, "body": "Thank you going to play with it more. Appreciate the help"}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 0, "last_activity_date": 1495672407, "last_edit_date": 1495672407, "creation_date": 1495664677, "answer_id": 44169431, "question_id": 44168733, "link": "https://stackoverflow.com/questions/44168733/slack-bot-not-pausing-in-while-loop-instead-restarting-at-while-true-statement/44169431#44169431", "title": "Slack bot not pausing in while loop instead restarting at while true statement", "body": "<p><code>while True</code> is being executed indefinitle in a loop; you have to exit it somehow using either <code>break</code> or <code>return</code>. But both <code>break</code> and <code>return</code> will ignore your <code>else</code> after <code>while</code> so you have to refactor your code significantly. Something like this:</p>\n\n<pre><code>while True:\n    for slack_message in slack_client.rtm_read():\n        message = slack_message.get(\"text\")\n        user = slack_message.get(\"user\")\n        if not message or not user:\n            continue\n        slack_client.rtm_send_message(\u2026)\n        break\n# and no else here\nprint(\u2026)\n</code></pre>\n\n<p>And I don't think you need first <code>while True</code> at all. Let me rewrite the code this way:</p>\n\n<pre><code>while True:\n    command = ??? # slack_client.rtm_read() perhaps?\n    if command.startswith(LOG):\n        slack_client.rtm_send_message(channel, \"Please input your username:\")\n        for slack_message in slack_client.rtm_read():\n            message = slack_message.get(\"text\")\n            user = slack_message.get(\"user\")\n            if not message or not user:\n                continue\n            slack_client.rtm_send_message(channel, \"You Wrote :  \" + message +  \"\\n is that your correct email?\")\n\n        while True:\n            respond = slack_message.get(\"text\")\n            if respond is 'yes' or 'Yes':##would this to true already, push in regex\n                continue\n            break\n        slack_client.rtm_send_message(channel, \"Got it, your username is :\" + message)#possibly grabbing newest text and not variable of message\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4781483, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/y2TKf.jpg?s=128&g=1", "display_name": "Max Uland", "link": "https://stackoverflow.com/users/4781483/max-uland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495672407, "creation_date": 1495661219, "last_edit_date": 1495661421, "question_id": 44168733, "link": "https://stackoverflow.com/questions/44168733/slack-bot-not-pausing-in-while-loop-instead-restarting-at-while-true-statement", "title": "Slack bot not pausing in while loop instead restarting at while true statement", "body": "<p>I'm working on a bot for slack. What my issue is, I want that when a person pings the bot with certain text (@bot log) that it asks for a email address, then repeats the email back and asks for confirmation. </p>\n\n<p>This all works and where my troubles begin. When you respond to the confirmation it repeats back what you just said again and does not move forward to saying the \"got it your username is\".</p>\n\n<pre><code>if command.startswith(LOG):\n    slack_client.rtm_send_message(channel, \"Please input your username:\")\n    while True:\n        for slack_message in slack_client.rtm_read():\n\n            message = slack_message.get(\"text\")\n            user = slack_message.get(\"user\")\n            if not message or not user:\n                continue\n            slack_client.rtm_send_message(channel, \"You Wrote :  \" + message +  \"\\n is that your correct email?\")\n    else:\n        print(\"That didnt work\")\n            #break  ##ask for confirmation, maybe the text in this line can reference in a different way\n            #while True:\n        respond = slack_message.get(\"text\")\n        while respond is 'yes' or 'Yes':##would this to true already, push in regex\n                continue\n        slack_client.rtm_send_message(channel, \"Got it, your username is :\" + message)#possibly grabbing newest text and not variable of message\n                #if respond != 'yes' or 'Yes':#push from regex above\n                    #slack_client.rtm_send_message(channel, \"sorry!\")                   \n        time.sleep(.1)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "som"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8083183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8jFQoMv1MHk/AAAAAAAAAAI/AAAAAAAAuXY/iEzJiSQapLU/photo.jpg?sz=128", "display_name": "Dan Wilkinson", "link": "https://stackoverflow.com/users/8083183/dan-wilkinson"}, "is_accepted": false, "score": 1, "last_activity_date": 1496132165, "creation_date": 1496132165, "answer_id": 44256986, "question_id": 44168709, "link": "https://stackoverflow.com/questions/44168709/error-argument-must-be-a-dense-tensor-range2-3-got-shape-1-but-wanted/44256986#44256986", "title": "Error: Argument must be a dense tensor: range(2, 3) - got shape [1], but wanted []", "body": "<p>I am having the same problem. I changed the </p>\n\n<pre><code>self.diff_sum = tf.reduce_sum( self.diff_sq, reduction_indices=range(2,2+len(self.input_shape)) )    \n</code></pre>\n\n<p>to</p>\n\n<pre><code>self.diff_sum = tf.reduce_sum( self.diff_sq,2 )\n</code></pre>\n\n<p>to just try to get it to run. This was the result after 400 iterations: \n<a href=\"https://i.stack.imgur.com/1scE5.png\" rel=\"nofollow noreferrer\">Kohonen_SOM_Colors_reduce_sum_bug</a></p>\n"}], "owner": {"reputation": 407, "user_id": 5757867, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0454d348e6c5b7ebdf846235afb14dc3?s=128&d=identicon&r=PG", "display_name": "Szpaqn", "link": "https://stackoverflow.com/users/5757867/szpaqn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3755, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496132165, "creation_date": 1495661120, "question_id": 44168709, "link": "https://stackoverflow.com/questions/44168709/error-argument-must-be-a-dense-tensor-range2-3-got-shape-1-but-wanted", "title": "Error: Argument must be a dense tensor: range(2, 3) - got shape [1], but wanted []", "body": "<p>I am trying to run an a code in Python for self-organizing map (SOM), which uses TensorFlow. I got the code from <a href=\"https://github.com/spiglerg/Kohonen_SOM_Tensorflow/blob/master/som.py\" rel=\"nofollow noreferrer\">here</a>, but when I run it, I get an error:</p>\n\n<blockquote>\n  <p>Error: Argument must be a dense tensor: range(2, 3) - got shape <a href=\"https://github.com/spiglerg/Kohonen_SOM_Tensorflow/blob/master/som.py\" rel=\"nofollow noreferrer\">1</a>,\n  but wanted []</p>\n</blockquote>\n\n<p>I think the code relevant is:</p>\n\n<pre><code>s = SOM( (3,), 30, num_training, sess )\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>class SOM:\n    def __init__(self, input_shape, map_size_n, num_expected_iterations, session):\n    input_shape = tuple([i for i in input_shape if i is not None])\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>def initialize_graph(self):\n    self.weights = tf.Variable( tf.random_uniform((self.n*self.n, )+self.input_shape, 0.0, 1.0) ) \n\n    self.input_placeholder = tf.placeholder(tf.float32, (None,)+self.input_shape)\n    self.current_iteration = tf.placeholder(tf.float32)\n\n    ## Compute the current iteration's neighborhood sigma and learning rate alpha:\n    self.sigma_tmp = self.sigma * tf.exp( - self.current_iteration/self.timeconst_sigma  )\n    self.sigma2 = 2.0*tf.multiply(self.sigma_tmp, self.sigma_tmp)\n\n    self.alpha_tmp = self.alpha * tf.exp( - self.current_iteration/self.timeconst_alpha  )\n\n\n    self.input_placeholder_ = tf.expand_dims(self.input_placeholder, 1)\n    self.input_placeholder_ = tf.tile(self.input_placeholder_, (1,self.n*self.n,1) )\n\n    self.diff = self.input_placeholder_ - self.weights\n    self.diff_sq = tf.square(self.diff)\n    self.diff_sum = tf.reduce_sum( self.diff_sq, axis=range(2, 2+len(self.input_shape)) )\n\n    # Get the index of the best matching unit\n    self.bmu_index = tf.argmin(self.diff_sum, 1)\n\n    self.bmu_dist = tf.reduce_min(self.diff_sum, 1)\n    self.bmu_activity = tf.exp( -self.bmu_dist/self.sigma_act )\n\n    self.diff = tf.squeeze(self.diff)\n\n    self.diff_2 = tf.placeholder(tf.float32, (self.n*self.n,)+self.input_shape)\n    self.dist_sliced = tf.placeholder(tf.float32, (self.n*self.n,))\n\n    self.distances = tf.exp(-self.dist_sliced / self.sigma2 )\n    self.lr_times_neigh = tf.multiply( self.alpha_tmp, self.distances )\n    for i in range(len(self.input_shape)):\n        self.lr_times_neigh = tf.expand_dims(self.lr_times_neigh, -1)\n    self.lr_times_neigh = tf.tile(self.lr_times_neigh, (1,)+self.input_shape )\n\n    self.delta_w = self.lr_times_neigh * self.diff_2\n\n    self.update_weights = tf.assign_add(self.weights, self.delta_w)\n</code></pre>\n\n<p>The whole error message is:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\",\n  line 491, in apply_op\n      preferred_dtype=default_dtype)   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\",\n  line 704, in internal_convert_to_tensor\n      ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 113, in _constant_tensor_conversion_function\n      return constant(v, dtype=dtype, name=name)   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 102, in constant\n      tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\",\n  line 379, in make_tensor_proto\n      _GetDenseDimensions(values))) ValueError: Argument must be a dense tensor: range(2, 3) - got shape <a href=\"https://github.com/spiglerg/Kohonen_SOM_Tensorflow/blob/master/som.py\" rel=\"nofollow noreferrer\">1</a>, but wanted [].</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n  \n  <p>Traceback (most recent call last):   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\",\n  line 505, in apply_op\n      values, as_ref=input_arg.is_ref).dtype.name   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\",\n  line 704, in internal_convert_to_tensor\n      ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 113, in _constant_tensor_conversion_function\n      return constant(v, dtype=dtype, name=name)   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 102, in constant\n      tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\",\n  line 379, in make_tensor_proto\n      _GetDenseDimensions(values))) ValueError: Argument must be a dense tensor: range(2, 3) - got shape <a href=\"https://github.com/spiglerg/Kohonen_SOM_Tensorflow/blob/master/som.py\" rel=\"nofollow noreferrer\">1</a>, but wanted [].</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n  \n  <p>Traceback (most recent call last):   File\n  \"C:\\Users\\jakub\\OneDrive\\UTP\\SztucznaInteligencja\\SOM\\SOM2.py\", line\n  148, in \n      s = SOM( (3,), 30, num_training, sess )   File \"C:\\Users\\jakub\\OneDrive\\UTP\\SztucznaInteligencja\\SOM\\SOM2.py\", line\n  51, in <strong>init</strong>\n      self.initialize_graph()   File \"C:\\Users\\jakub\\OneDrive\\UTP\\SztucznaInteligencja\\SOM\\SOM2.py\", line\n  76, in initialize_graph\n      self.diff_sum = tf.reduce_sum( self.diff_sq, axis=range(2, 2+len(self.input_shape)) )   File\n  \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\",\n  line 1236, in reduce_sum\n      name=name)   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\ops\\gen_math_ops.py\",\n  line 2656, in _sum\n      keep_dims=keep_dims, name=name)   File \"C:\\Users\\jakub\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\",\n  line 509, in apply_op\n      (input_name, err)) ValueError: Tried to convert 'reduction_indices' to a tensor and failed. Error: Argument must be a\n  dense tensor: range(2, 3) - got shape <a href=\"https://github.com/spiglerg/Kohonen_SOM_Tensorflow/blob/master/som.py\" rel=\"nofollow noreferrer\">1</a>, but wanted [].</p>\n</blockquote>\n\n<p>Does anyone know why am I getting this error?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 2, "creation_date": 1495661145, "post_id": 44168642, "comment_id": 75353453, "body": "Are you sure totalpoints are integers? The ordering would be correct if &quot;70&quot;, &quot;540&quot; and &quot;200&quot; are strings, which are sorted lexicographically. If that&#39;s not the case, you have to show us your code. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1419, "user_id": 2080764, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/79TpD.png?s=128&g=1", "display_name": "MatejMecka", "link": "https://stackoverflow.com/users/2080764/matejmecka"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1495662054, "post_id": 44168642, "comment_id": 75353831, "body": "I changed the question a little check it now"}], "answers": [{"tags": [], "owner": {"reputation": 7276, "user_id": 400691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24aa1542372e04f5d658974692ef6b89?s=128&d=identicon&r=PG", "display_name": "meshy", "link": "https://stackoverflow.com/users/400691/meshy"}, "is_accepted": false, "score": 1, "last_activity_date": 1495662264, "last_edit_date": 1495662264, "creation_date": 1495661171, "answer_id": 44168720, "question_id": 44168642, "link": "https://stackoverflow.com/questions/44168642/django-ordering-by-descending-order-is-glitched/44168720#44168720", "title": "Django Ordering by Descending Order is glitched", "body": "<p>You must be storing your <code>totalpoints</code> as a string instead of an integer. This will mean you're seeing the numbers ordered \"alphabetically\" (in reverse, because of the <code>-</code>).</p>\n\n<p>If you store the <code>totalpoints</code> field in an <code>IntegerField</code>, you should have a better result.</p>\n"}, {"comments": [{"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 1, "creation_date": 1495661329, "post_id": 44168728, "comment_id": 75353524, "body": "Good eye! You could add to this answer that, if this is the case, OP should either make the field an <code>IntegerField</code> or use this trick: <a href=\"https://stackoverflow.com/questions/8941962/ordering-query-result-by-numeric-strings-in-django-postgres-backend\" title=\"ordering query result by numeric strings in django postgres backend\">stackoverflow.com/questions/8941962/&hellip;</a>"}], "tags": [], "owner": {"reputation": 320805, "user_id": 14343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/75e9a11371cbe1566607180863efdf4c?s=128&d=identicon&r=PG", "display_name": "Ned Batchelder", "link": "https://stackoverflow.com/users/14343/ned-batchelder"}, "is_accepted": true, "score": 1, "last_activity_date": 1495661197, "creation_date": 1495661197, "answer_id": 44168728, "question_id": 44168642, "link": "https://stackoverflow.com/questions/44168642/django-ordering-by-descending-order-is-glitched/44168728#44168728", "title": "Django Ordering by Descending Order is glitched", "body": "<p>You haven't shown any code, so it's hard to say for sure, but this looks like a case of sorting numeric strings. Your totalpoints data isn't numbers, it's strings.</p>\n\n<p>If you sort a list of strings which happen to look like numbers, they don't sort like numbers.  The first digit is the most significant, and will determine the sort order:</p>\n\n<pre><code>&gt;&gt;&gt; sorted(['200', '70', '540'], reverse=True)\n['70', '540', '200']\n</code></pre>\n\n<p>If you sort them as numbers, they work correctly:</p>\n\n<pre><code>&gt;&gt;&gt; sorted([200, 70, 540], reverse=True)\n[70, 200, 540]\n</code></pre>\n"}], "owner": {"reputation": 1419, "user_id": 2080764, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/79TpD.png?s=128&g=1", "display_name": "MatejMecka", "link": "https://stackoverflow.com/users/2080764/matejmecka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 44168728, "answer_count": 2, "score": 0, "last_activity_date": 1495662264, "creation_date": 1495660816, "last_edit_date": 1495661778, "question_id": 44168642, "link": "https://stackoverflow.com/questions/44168642/django-ordering-by-descending-order-is-glitched", "title": "Django Ordering by Descending Order is glitched", "body": "<p>So I have made a leaderboard in Django. It does most stuff Great except something it's drunk. </p>\n\n<p><a href=\"https://i.stack.imgur.com/6gieH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6gieH.png\" alt=\"enter image description here\"></a></p>\n\n<p>That's not normal! 70 Is higher than 540 and 200! It should be in 3rd Place not 1st! Why is that happening and how can I fix it. </p>\n\n<p>I'm ordering the leaderboard using the Total or <code>totalpoints</code> in Descending order using this: <code>participants = Participant.objects.order_by('-totalpoints')</code></p>\n\n<p>This didn't happen when 70 was missing. Now when it's there it glitches. Also the Total points is added from all the challenges and if there was a problem eithher an ASCII or something else it would have crashed. </p>\n\n<p>Any Help is going to be appreciated thank you!</p>\n\n<p>EDIT: Replaced the last field as an IntegerField and now it's in Ascending Order...</p>\n\n<p>EDIT EDIT: When the challenge 1,2,3,4 are combined they are in CharFields later converted to integers. So it was an Integer put into a field. Except when the totalpoints is now replaced with an IntegerField the leaderboard is ordering the emptry ones first.</p>\n"}, {"tags": ["python", "python-3.x", "codacy"], "owner": {"reputation": 4713, "user_id": 1187968, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/55c10b3b35dba52324314052e9cf84dc?s=128&d=identicon&r=PG", "display_name": "user1187968", "link": "https://stackoverflow.com/users/1187968/user1187968"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "closed_date": 1495672350, "answer_count": 0, "score": 4, "last_activity_date": 1496691499, "creation_date": 1495660715, "last_edit_date": 1496691499, "question_id": 44168623, "link": "https://stackoverflow.com/questions/44168623/python-codacy-standard-pseudo-random-generators-are-not-suitable-for-security", "closed_reason": "Duplicate", "title": "Python/Codacy - Standard pseudo-random generators are not suitable for security/cryptographic purposes", "body": "<p>I have the following code</p>\n\n<pre><code>def get_random_date(year_start, year_end):\n    return \"%s-%s\" % (random.randrange(year_start, year_end), random.randrange(1, 12))\n</code></pre>\n\n<p>and I'm getting the warning from <a href=\"https://www.codacy.com/\" rel=\"nofollow noreferrer\">Codacy</a>: Standard pseudo-random generators are not suitable for security/cryptographic purposes.</p>\n\n<p>What's should I rewrite this function to avoid such warning. </p>\n"}, {"tags": ["python", "python-3.x", "numpy", "nlp"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1495727663, "post_id": 44168533, "comment_id": 75383479, "body": "Whenever you report a Python error, always include the <i>complete</i> traceback (i.e. the complete error message).  It shows exactly which line triggered the error.  In this case, the question title makes it clear that the error occurs when you call <code>svd</code>, but it is still useful to see it."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1495727776, "post_id": 44168533, "comment_id": 75383555, "body": "Have you looked at <code>X</code> just before calling <code>svd</code>?  A print statement or two might clarify things.  Try <code>print(X.dtype, X.shape)</code>.  Is the output what you expect?"}], "owner": {"reputation": 11, "user_id": 7304556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617fff663821ab89e726afb390983b73?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/7304556/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495661568, "creation_date": 1495660258, "last_edit_date": 1495661568, "question_id": 44168533, "link": "https://stackoverflow.com/questions/44168533/linalgerror-when-doing-singular-value-decomposition-on-sklean-vectorizer-matrix", "title": "LinalgError, when doing singular value decomposition on sklean vectorizer matrix", "body": "<p>I'm trying to vectorize a corpus of texts, so i can then represent the proximity of terms to each other in 2d space (a graph). First i create a co-occurence matrix, and then do SVD on it, as follows:</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\nimport numpy\n\ndocs = ['...', '...' a list of strings, e.g. sentences]\ncount_model = CountVectorizer(ngram_range=(1,1))\nX = count_model.fit_transform(docs)\nU, s, Vh = numpy.linalg.svd(X, full_matrices = False)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>LinAlgError: 0-dimensional array given. Array must be at least two-dimensional\n</code></pre>\n\n<p>What's odd is that my routine has only just started giving me an error message. I've had numpy's linalg svd function working fine, and am trying to figure out what i've changed to create the error. I'd be grateful if someone could explain the error message, and suggest what i can do. Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1495660222, "post_id": 44168499, "comment_id": 75353016, "body": "What &quot;format&quot; is the text file using? Is it &quot;Python&quot; or some other / home-brew &quot;format&quot;? The easiest solution would probably be to use <i>actual</i> JSON.."}, {"owner": {"reputation": 427, "user_id": 2792609, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/227034108d1c0e3e43d19c4d33b1906c?s=128&d=identicon&r=PG&f=1", "display_name": "RugerSR9", "link": "https://stackoverflow.com/users/2792609/rugersr9"}, "edited": false, "score": 1, "creation_date": 1495660267, "post_id": 44168499, "comment_id": 75353042, "body": "Your .txt file is not json, first of all."}], "owner": {"reputation": 1, "user_id": 8061808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d0kC5JN0Guw/AAAAAAAAAAI/AAAAAAAAADc/BgcyhQ_BTMw/photo.jpg?sz=128", "display_name": "Toxicator09", "link": "https://stackoverflow.com/users/8061808/toxicator09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1495660468, "answer_count": 0, "score": 0, "last_activity_date": 1495660469, "creation_date": 1495660114, "last_edit_date": 1495660416, "question_id": 44168499, "link": "https://stackoverflow.com/questions/44168499/how-do-i-turn-an-imported-list-from-txt-that-is-a-string-into-an-actual-list", "closed_reason": "Duplicate", "title": "How do i turn an imported list from txt that is a string into an actual list?", "body": "<p>I have this code</p>\n\n<pre><code>f= open('data\\\\party.txt', 'r')\nmy_party = f.read()\nf.close\nmy_party = json.loads(my_party)\n</code></pre>\n\n<p>party.txt contains the following</p>\n\n<pre><code>[None, None, None, None, None]\n</code></pre>\n\n<p>I want this to be imported as the list it is. But it get turned into a string.</p>\n"}, {"tags": ["python", "html", "apache", "nginx"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3067647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292d448fcbdc9f77ef508c14eda02ca2?s=128&d=identicon&r=PG&f=1", "display_name": "stets", "link": "https://stackoverflow.com/users/3067647/stets"}, "edited": false, "score": 0, "creation_date": 1495716229, "post_id": 44175812, "comment_id": 75375712, "body": "I&#39;m aware of these tools...I&#39;d like to do this myself for fun"}, {"owner": {"reputation": 92, "user_id": 6248887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa203209cea5d56b4862a0ce39c96bb?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylas", "link": "https://stackoverflow.com/users/6248887/kaylas"}, "reply_to_user": {"reputation": 101, "user_id": 3067647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292d448fcbdc9f77ef508c14eda02ca2?s=128&d=identicon&r=PG&f=1", "display_name": "stets", "link": "https://stackoverflow.com/users/3067647/stets"}, "edited": false, "score": 0, "creation_date": 1495720666, "post_id": 44175812, "comment_id": 75378726, "body": "ok then you need to devel it, i suggest you to use python for to do that"}, {"owner": {"reputation": 101, "user_id": 3067647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292d448fcbdc9f77ef508c14eda02ca2?s=128&d=identicon&r=PG&f=1", "display_name": "stets", "link": "https://stackoverflow.com/users/3067647/stets"}, "edited": false, "score": 0, "creation_date": 1495726679, "post_id": 44175812, "comment_id": 75382895, "body": "I know it can be done in python and that is a good start. I&#39;m interested in the entire stack. I am thinking something like flask/django with nosql."}], "tags": [], "owner": {"reputation": 92, "user_id": 6248887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa203209cea5d56b4862a0ce39c96bb?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylas", "link": "https://stackoverflow.com/users/6248887/kaylas"}, "is_accepted": false, "score": 0, "last_activity_date": 1495700814, "creation_date": 1495700814, "answer_id": 44175812, "question_id": 44168482, "link": "https://stackoverflow.com/questions/44168482/how-do-i-serve-dynamic-content-in-a-dashboard/44175812#44175812", "title": "How do I serve dynamic content in a dashboard?", "body": "<p>I suggest you to use monitoring tools for do that.\nIf you need alerting use tool like nagios or zabbix.\nIf you don't need alerting you can setup tool like munin o cacti.</p>\n"}], "owner": {"reputation": 101, "user_id": 3067647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292d448fcbdc9f77ef508c14eda02ca2?s=128&d=identicon&r=PG&f=1", "display_name": "stets", "link": "https://stackoverflow.com/users/3067647/stets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495700814, "creation_date": 1495660052, "question_id": 44168482, "link": "https://stackoverflow.com/questions/44168482/how-do-i-serve-dynamic-content-in-a-dashboard", "title": "How do I serve dynamic content in a dashboard?", "body": "<p>I'd like to poll servers/network devices via SNMP/ICMP/SSH and serve up content about each device in a web browser to a user. Things like uptime, CPU usage, etc. What's a good way to do this?</p>\n\n<p>Would I store the data in a db and then present it the framework of my choosing?</p>\n"}, {"tags": ["python", "opencv", "canny-operator"], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 7681552, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d99f0e12766c6fe1b5895bed3d80aefd?s=128&d=identicon&r=PG&f=1", "display_name": "Ebya", "link": "https://stackoverflow.com/users/7681552/ebya"}, "is_accepted": false, "score": 1, "last_activity_date": 1501208656, "last_edit_date": 1501208656, "creation_date": 1501207462, "answer_id": 45363717, "question_id": 44168439, "link": "https://stackoverflow.com/questions/44168439/how-to-create-steerable-edge-detection-filters-using-python-or-discard-edges-tha/45363717#45363717", "title": "How to create steerable Edge Detection filters using Python or discard edges that don&#39;t conform to desired angle", "body": "<p>Its an old question but here is the process you should use.</p>\n\n<p>1]Start by filter your source image (back-ground subtract/color/etc)</p>\n\n<p>2]Apply a generic Edge detector or a steerable filter or (if you want to get some really good result &amp; are doing it for research purposes look for <a href=\"https://en.wikipedia.org/wiki/Phase_stretch_transform\" rel=\"nofollow noreferrer\">Phase Strectch Transform Algorithm</a></p>\n\n<p>3]Save those line in a vector/whatever</p>\n\n<p>4]Create a circle drawing algorithm (here is the main idea)</p>\n\n<p>Your circle drawing algorithm (CDA further) will take every point returned by your edge filter.</p>\n\n<p>For each point it will build  circles of a variable diameter [Dmin;Dmax] based on the max/min distance you can accept for two points be considered on the same line.</p>\n\n<p>If no next-pixel are present in the circle octant corresponding to your angle, simply dismiss it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qVj9Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qVj9Q.png\" alt=\"CDA Octant representation\"></a></p>\n\n<p>Once you have your lines that match your angle you can sort them by length to dismiss line probably due to noise.</p>\n\n<p>You should also note that there is other methods, this method as some good aspect:</p>\n\n<p>1- Its robust against noise &amp; low quality images/video</p>\n\n<p>2- Its CUDA compliant (i.e. easy to push in parallel processing).</p>\n\n<p>3-Its fast and roughly more accurate than most <em>basic</em> line detectors.</p>\n"}], "owner": {"reputation": 197, "user_id": 3213094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b3833fd885dd54658920afa79e7b917?s=128&d=identicon&r=PG&f=1", "display_name": "tpubbsGIS", "link": "https://stackoverflow.com/users/3213094/tpubbsgis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501208656, "creation_date": 1495659890, "question_id": 44168439, "link": "https://stackoverflow.com/questions/44168439/how-to-create-steerable-edge-detection-filters-using-python-or-discard-edges-tha", "title": "How to create steerable Edge Detection filters using Python or discard edges that don&#39;t conform to desired angle", "body": "<p>I know how to do basic Canny edge detection using OpenCV. However I need to discard all edges that do not fall within 15 degrees of a predetermined angle.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "performance", "pandas", "numpy", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 1829, "user_id": 5378132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/arUcg.png?s=128&g=1", "display_name": "Riley Hun", "link": "https://stackoverflow.com/users/5378132/riley-hun"}, "is_accepted": false, "score": 1, "last_activity_date": 1495696962, "creation_date": 1495696962, "answer_id": 44174643, "question_id": 44168422, "link": "https://stackoverflow.com/questions/44168422/speeding-up-the-insertion-of-null-rows-into-a-large-pandas-dataframe/44174643#44174643", "title": "Speeding up the insertion of null rows into a large Pandas DataFrame?", "body": "<p>I am not sure if my way is faster than the way that you set up, but here goes: </p>\n\n<pre><code>df = pd.DataFrame({'Date': ['1/1/2016', '1/5/2016', '1/2/2016', '1/4/2016', '1/10/2016'],\n                   'Attribute A': ['A', 'A', 'B', 'B', 'B'],\n                   'Attribute B': [1, 1, 1, 1, 1],\n                   'Value': [50, 60, 59, 90, 84]})\n\nunique_attributes = df['Attribute A'].unique()\n\ngroups = []\nfor i in unique_attributes:\n    subset = df[df['Attribute A'] ==i]\n    dates = subset['Date'].tolist()\n    Dates = pd.date_range(dates[0], dates[-1])\n    subset.set_index('Date', inplace=True)\n    subset.index = pd.DatetimeIndex(subset.index)\n    subset = subset.reindex(Dates)\n    subset['Attribute A'].fillna(method='ffill', inplace=True)\n    subset['Attribute B'].fillna(method='ffill', inplace=True)\n    subset['Value'].fillna(0, inplace=True)\n    groups.append(subset)\n\nresult = pd.concat(groups)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8584, "user_id": 890242, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a002dc8cd51a7d25e31e1bf4662b1b85?s=128&d=identicon&r=PG", "display_name": "miraculixx", "link": "https://stackoverflow.com/users/890242/miraculixx"}, "is_accepted": false, "score": 2, "last_activity_date": 1495699674, "creation_date": 1495699674, "answer_id": 44175470, "question_id": 44168422, "link": "https://stackoverflow.com/questions/44168422/speeding-up-the-insertion-of-null-rows-into-a-large-pandas-dataframe/44175470#44175470", "title": "Speeding up the insertion of null rows into a large Pandas DataFrame?", "body": "<blockquote>\n  <p>This runs insanely slow, and I'm looking for a way to speed it up.\n  Suggestions?</p>\n</blockquote>\n\n<p>I don't have a ready solution, however this is how I suggest you approach the problem:</p>\n\n<ol>\n<li>Understand what makes this slow</li>\n<li>Find ways to make the critical parts faster</li>\n<li>Or, alternatively, find a new approach</li>\n</ol>\n\n<p>Here's the analysis of your code using <a href=\"https://github.com/rkern/line_profiler\" rel=\"nofollow noreferrer\">line profiler</a>:</p>\n\n<pre><code>Timer unit: 1e-06 s\n\nTotal time: 0.028074 s\nFile: &lt;ipython-input-54-ad49822d490b&gt;\nFunction: foo at line 1\n\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n     1                                           def foo():\n     2         1          875    875.0      3.1      final = pd.DataFrame()\n     3         1          302    302.0      1.1      max_date = df['Date'].max()\n     4         3         3343   1114.3     11.9      for name, group in df.groupby(['Attribute_A','Attribute_B']):\n     5         2          836    418.0      3.0          idx = pd.date_range(group['Date'].min(),\n     6         2         3601   1800.5     12.8                              max_date)\n     7                                           \n     8         2         6713   3356.5     23.9          temp = group.set_index('Date').reindex(idx, fill_value=0)\n     9         2         1961    980.5      7.0          coeff_var = temp['Value'].std()/temp['Value'].mean()\n    10         2        10443   5221.5     37.2          final = pd.concat([final, pd.DataFrame({'Attribute_A':[name[0]], 'Attribute_B':[name[1]],'Coeff_Var':[coeff_var]})])\n</code></pre>\n\n<p>In conclusion, the <code>.reindex</code> and <code>concat</code> statements take 60% of the time. </p>\n\n<p>A first approach that saves 42% of time in my measurement is to collect the data for the <code>final</code> data frame as a list of rows, and create the dataframe as the very last step. Like so:</p>\n\n<pre><code>newdata = []\nmax_date = df['Date'].max()\nfor name, group in df.groupby(['Attribute_A','Attribute_B']):\n    idx = pd.date_range(group['Date'].min(),\n                        max_date)\n    temp = group.set_index('Date').reindex(idx, fill_value=0)\n    coeff_var = temp['Value'].std()/temp['Value'].mean()\n    newdata.append({'Attribute_A': name[0], 'Attribute_B': name[1],'Coeff_Var':coeff_var})\nfinal = pd.DataFrame.from_records(newdata)\n</code></pre>\n\n<p>Using timeit to measure best execution times I get</p>\n\n<ul>\n<li>your solution: <code>100 loops, best of 3: 11.5 ms per loop</code></li>\n<li>improved concat: <code>100 loops, best of 3: 6.67 ms per loop</code></li>\n</ul>\n\n<p>Details see this <a href=\"https://gist.github.com/miraculixx/61dcd3678beb3e814613c4ddc0ac2036\" rel=\"nofollow noreferrer\">ipython notebook</a></p>\n\n<p>Note: Your mileage may vary - I used the sample data provided in the original post. You should run the line profiler on a subset of your real data - the dominating factor in regards to time use may well be something else then.</p>\n"}], "owner": {"reputation": 1686, "user_id": 1566200, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5123ca9217a405695f6cb56e4645d84f?s=128&d=identicon&r=PG", "display_name": "user1566200", "link": "https://stackoverflow.com/users/1566200/user1566200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495699674, "creation_date": 1495659823, "last_edit_date": 1495661143, "question_id": 44168422, "link": "https://stackoverflow.com/questions/44168422/speeding-up-the-insertion-of-null-rows-into-a-large-pandas-dataframe", "title": "Speeding up the insertion of null rows into a large Pandas DataFrame?", "body": "<p>I have a Pandas data frame with hundreds of millions of rows that looks like this:</p>\n\n<pre><code>Date      Attribute A    Attribute B    Value\n01/01/16  A              1              50\n01/05/16  A              1              60\n01/02/16  B              1              59\n01/04/16  B              1              90\n01/10/16  B              1              84\n</code></pre>\n\n<p>For each unique combination (call it <code>b</code>) of <code>Attribute A</code> x <code>Attribute B</code>, I need to fill in empty dates starting from the oldest date for that unique group <code>b</code> to the maximum date in the entire dataframe <code>df</code>. That is, so it looks like this:</p>\n\n<pre><code>Date      Attribute A    Attribute B    Value\n01/01/16  A              1              50\n01/02/16  A              1              0\n01/03/16  A              1              0\n01/04/16  A              1              0\n01/05/16  A              1              60\n01/02/16  B              1              59\n01/03/16  B              1              0\n01/04/16  B              1              90\n01/05/16  B              1              0\n01/06/16  B              1              0\n01/07/16  B              1              0\n01/08/16  B              1              84\n</code></pre>\n\n<p>and then calculate the coefficient of variation (standard deviation/mean) for each unique combination's values (after inserting 0s). My code is this:</p>\n\n<pre><code>final = pd.DataFrame()\nmax_date = df['Date'].max()\nfor name, group in df.groupby(['Attribute_A','Attribute_B']):\n    idx = pd.date_range(group['Date'].min(),\n                        max_date)\n\n    temp = group.set_index('Date').reindex(idx, fill_value=0)\n    coeff_var = temp['Value'].std()/temp['Value'].mean()\n    final = pd.concat([final, pd.DataFrame({'Attribute_A':[name[0]], 'Attribute_B':[name[1]],'Coeff_Var':[coeff_var]})])\n</code></pre>\n\n<p>This runs insanely slow, and I'm looking for a way to speed it up.</p>\n\n<p>Suggestions?</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 2, "creation_date": 1495661124, "post_id": 44168415, "comment_id": 75353442, "body": "The error doesn&#39;t seem to be related to the python script but rather the rc.local, check your syntax there."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7605075, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b066d20a8d1d033de958336cf07e498c?s=128&d=identicon&r=PG&f=1", "display_name": "saintshenanigans", "link": "https://stackoverflow.com/users/7605075/saintshenanigans"}, "is_accepted": false, "score": 1, "last_activity_date": 1495727539, "creation_date": 1495727539, "answer_id": 44184741, "question_id": 44168415, "link": "https://stackoverflow.com/questions/44168415/raspbian-python-script-eof-error-at-startup/44184741#44184741", "title": "raspbian python script EOF error at startup", "body": "<p>Pedro was right, I was able to get it running by changing how I loaded it. It's running just fine now that I removed it from rc.local and added it to .bashrc</p>\n\n<p>booted rpi to cli</p>\n\n<pre><code>sudo nano /home/pi/.bashrc\n</code></pre>\n\n<p>last line</p>\n\n<pre><code>echo Running at boot\nsudo python3 /home/pi/filename.py\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7605075, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b066d20a8d1d033de958336cf07e498c?s=128&d=identicon&r=PG&f=1", "display_name": "saintshenanigans", "link": "https://stackoverflow.com/users/7605075/saintshenanigans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495727539, "creation_date": 1495659794, "last_edit_date": 1495695789, "question_id": 44168415, "link": "https://stackoverflow.com/questions/44168415/raspbian-python-script-eof-error-at-startup", "title": "raspbian python script EOF error at startup", "body": "<p>I'm trying to set up a pretty simple script to handle playing training videos through vlc on a raspberry pi 3 model B.</p>\n\n<p>I can boot to CLI and run the program fine, but if I add it to rc.local, I get an error at line 60, EOFError: EOF when reading a line\ncan anyone help me figure this out?</p>\n\n<p>line 60 is <code>\"entry = input(\"\\nVideo to play: \")\"</code> towards the bottom of this exerpt, beyond that point, the code is pretty much the same.</p>\n\n<pre><code>import os,subprocess\nentry = \" \"           #variable to hold input on the main menu\nentry2 = \" \"          #variable to hold input on the VERVE menu\nlooping = False       #variable that decides if videos should loop\nlastinput = \" \"       #variable holds last input on the main menu\n\nwhile entry != \"0\":\n\n    if entry == \"1\":\n        lastinput = \"Camco Chemical Safety Training\"\n    elif entry ==\"2\":\n        lastinput = \"[ENG] Forklift Operator Safety Training\"\n    elif entry ==\"3\":\n        lastinput = \"[ESP] Forklift Operator Safety Training\"\n    elif entry ==\"4\":\n        lastinput = \"[ENG] The New Hazard Communication Mandate\"\n    elif entry ==\"5\":\n        lastinput = \"[ESP] The New Hazard Communication Mandate\"\n    elif entry ==\"6\":\n        lastinput = \"Forklift Training (1 of 2)\"\n    elif entry ==\"7\":\n        lastinput = \"Forklift Training - Accidents (2 of 2)\"\n\n        #open main menu\n    os.system(\"printf '\\033c'\") #These lines are what wipe out the text from the last screen\n    if looping == True:\n        print(\"VIDEOS ARE CURRENTLY LOOPING\")\n    print(\"Last video watched: \" + lastinput)\n    print(\"\\n1. Camco Chemical Safety Training\")\n    print(\"2. [ENG] Forklift Operator Safety Training\")\n    print(\"3. [ESP] Forklift Operator Safety Training\")\n    print(\"4. [ENG] The New Hazard Communication Mandate\")\n    print(\"5. [ESP] The New Hazard Communication Mandate\")\n    print(\"6. Forklift Training (1 of 2)\")\n    print(\"7. Forklift Training - Accidents (2 of 2)\")\n    print(\"8. VERST DHL\")\n\n    print(\"\\n9. TOGGLE VIDEO LOOP\")\n    print(\"0. Close Program\")\n\n    print(\"\\nPress 0 at any time during a video to close it.\")\n\n    entry = input(\"\\nVideo to play: \")\n    if entry == \"1\":\n        #open Camco Chemical Safety Training - if looping is off, play once, if it's on, play forever.\n        if looping == False:\n            subprocess.call(['vlc', \"/home/pi/Desktop/Training/Camco_Training/Camco.mp4\", '-Idummy --play-and-exit'])\n        elif looping == True:\n            subprocess.call(['vlc', \"/home/pi/Desktop/Training/Camco_Training/Camco.mp4\", '-Idummy --loop'])\n        continue\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "tensorflow", "feed-forward"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1495660408, "post_id": 44168353, "comment_id": 75353090, "body": "labels - predict is not a valid error, maybe you meant tf.reduce_mean((labels - predict)**2) ?"}], "answers": [{"tags": [], "owner": {"reputation": 3803, "user_id": 5707705, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a4c4e6d28e81c9a76eeb64c7a4ff677?s=128&d=identicon&r=PG&f=1", "display_name": "CAFEBABE", "link": "https://stackoverflow.com/users/5707705/cafebabe"}, "is_accepted": true, "score": 2, "last_activity_date": 1495748945, "creation_date": 1495748945, "answer_id": 44190349, "question_id": 44168353, "link": "https://stackoverflow.com/questions/44168353/single-neuron-feed-forward-network-in-tensorflow/44190349#44190349", "title": "single neuron feed forward network in tensorflow", "body": "<p>you had two mistakes </p>\n\n<p>(a) your original error function optimises the wrong objective</p>\n\n<p>(b) your target vector was transposed \n     The following line makes it visible\n    <code>print(sess.run(predict-label,\n              feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]],\n              labels: [0, 1, 1, 0]})}))</code></p>\n\n<p>the result is a 4x4 matrix.</p>\n\n<p>You can achieved the desired result using the following code</p>\n\n<pre><code>import tensorflow as tf\n\nfeatures = tf.placeholder(tf.float32, [None, 3])\nlabels = tf.placeholder(tf.float32, [None,1])\n\n#Random weights\nW = tf.Variable([[10.0], [000.0], [0.200]], tf.float32)\ninit = tf.initialize_all_variables()\nwith tf.Session() as sess:\n    sess.run(init)\n\n    predict = tf.nn.sigmoid(tf.matmul(features, W))\n\n    print(sess.run(predict, feed_dict={features:[[0, 1, 1]]}))\n\n    lbls= [[0], [1], [1], [0]]\n    print(sess.run(predict,\n                 feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]], labels:lbls}))\n\n\n    #    error = labels - predict\n    error = tf.reduce_mean((labels - predict)**2) \n    # Training\n    optimizer = tf.train.GradientDescentOptimizer(10)\n    train = optimizer.minimize(error)\n\n    for i in range(100):\n        sess.run(train,\n        feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]], labels: lbls})\n        training_cost = sess.run(error,\n                             feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]],\n                                        labels: lbls})\n        classe = sess.run((labels-predict),\n                             feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]],\n                                        labels: lbls})\n        print('Training cost = ', training_cost, 'W = ', classe)\n\n    print(sess.run(predict,\n                 feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]]}))\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 6288172, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d9cb072975c5dc5a5ee485a63eb354b?s=128&d=identicon&r=PG&f=1", "display_name": "Paramdeep Singh Obheroi", "link": "https://stackoverflow.com/users/6288172/paramdeep-singh-obheroi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 44190349, "answer_count": 1, "score": 2, "last_activity_date": 1495748945, "creation_date": 1495659542, "last_edit_date": 1495661873, "question_id": 44168353, "link": "https://stackoverflow.com/questions/44168353/single-neuron-feed-forward-network-in-tensorflow", "title": "single neuron feed forward network in tensorflow", "body": "<p>I made a feed forward single neuron network. The prediction prints 0.5 while it should print 0.0. I'm very new to tensorflow. Please help me. This is my code:</p>\n\n<pre><code>\"\"\"\nO---(w1)-\\\n          \\\nO---(w2)--&gt;Sum ---&gt; Sigmoid ---&gt; O  3 inputs and 1 output\n          /\nO---(w3)-/\n\n          |   Input     | Output\nExample 1 | 0   0   1   |   0   \nExample 2 | 1   1   1   |   1\nExample 3 | 1   0   1   |   1\nExmaple 4 | 0   1   1   |   0\n\n\"\"\"\n\nimport tensorflow as tf\n\nfeatures = tf.placeholder(tf.float32, [None, 3])\nlabels = tf.placeholder(tf.float32, [None])\n\n#Random weights\nW = tf.Variable([[-0.16595599], [0.44064899], [-0.99977125]], tf.float32)\n\ninit = tf.initialize_all_variables()\nsess = tf.Session()\nsess.run(init)\n\npredict = tf.nn.sigmoid(tf.matmul(features, W))\n\nerror = labels - predict\n\n# Training\noptimizer = tf.train.GradientDescentOptimizer(0.01)\ntrain = optimizer.minimize(error)\n\nfor i in range(10000):\n    sess.run(train, feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]], labels: [0, 1, 1, 0]})\n\ntraining_cost = sess.run(error, feed_dict={features: [[0, 1, 1], [1, 1, 1], [1, 0, 1], [0, 1, 1]], labels: [0, 1, 1, 0]})\nprint('Training cost = ', training_cost, 'W = ', sess.run(W))\n\nprint(sess.run(predict, feed_dict={features:[[0, 1, 1]]}))\n</code></pre>\n\n<p>I've also manually made this model using only numpy which works well.</p>\n\n<p>Edit: I've tried all types of cost function including\u200b tf.reduce_mean(predict-labels)**2)</p>\n"}, {"tags": ["python", "bioinformatics", "biopython", "bios"], "comments": [{"owner": {"reputation": 31593, "user_id": 58082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61200477cf8983809ec152f484750204?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/58082/pierre"}, "edited": false, "score": 0, "creation_date": 1495710314, "post_id": 44168351, "comment_id": 75371927, "body": "you should ask <a href=\"http://biostars.org\" rel=\"nofollow noreferrer\">biostars.org</a>"}, {"owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "edited": false, "score": 0, "creation_date": 1496049603, "post_id": 44168351, "comment_id": 75487015, "body": "Can you add sample data?"}, {"owner": {"reputation": 1469, "user_id": 344850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/871426dddc1a9f702316c1ca03a33d9b?s=128&d=identicon&r=PG", "display_name": "peterjc", "link": "https://stackoverflow.com/users/344850/peterjc"}, "edited": false, "score": 0, "creation_date": 1499958776, "post_id": 44168351, "comment_id": 77141871, "body": "You need to provide more information - where is the input data (i.e. <code>record</code>) coming from? Also, your example as written can be shortened to <code>SeqIO.write(record, &quot;test.gb&quot;, &quot;genbank&quot;)</code>"}], "owner": {"reputation": 307, "user_id": 5921058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-n6K8Jm2kqgk/AAAAAAAAAAI/AAAAAAAAAJ4/jAODC21sYSM/photo.jpg?sz=128", "display_name": "James Hennessy", "link": "https://stackoverflow.com/users/5921058/james-hennessy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495659529, "creation_date": 1495659529, "question_id": 44168351, "link": "https://stackoverflow.com/questions/44168351/biopython-genbank-file-by-plasmid", "title": "Biopython: genbank file by plasmid", "body": "<p>So I want to make a genbank file in biopython , but I want it done by each plasmid in a cluster, as opposed to one big cluster  genbank file .  This is my code now :</p>\n\n<pre><code>  gbfile_name=\"test.gb\"\n  output_file = open(os.path.join(\"\", gbfile_name), \"w\")\n  SeqIO.write(record, output_file, 'genbank')\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["python", "scipy", "aws-lambda"], "comments": [{"owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1495662464, "post_id": 44168336, "comment_id": 75353988, "body": "<code>from scipy.signal import spectrogram</code>  ?"}, {"owner": {"reputation": 2226, "user_id": 744520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee4e3d76ce243beec82b15d9d93e0fb?s=128&d=identicon&r=PG", "display_name": "Jacques Kvam", "link": "https://stackoverflow.com/users/744520/jacques-kvam"}, "reply_to_user": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1495835935, "post_id": 44168336, "comment_id": 75433704, "body": "Even though I&#39;m just importing spectrogram, in my virtualenv I still carry around the entire scipy install."}], "answers": [{"comments": [{"owner": {"reputation": 2226, "user_id": 744520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee4e3d76ce243beec82b15d9d93e0fb?s=128&d=identicon&r=PG", "display_name": "Jacques Kvam", "link": "https://stackoverflow.com/users/744520/jacques-kvam"}, "edited": false, "score": 0, "creation_date": 1495835858, "post_id": 44195826, "comment_id": 75433686, "body": "Thanks! For anyone else who finds this, I ended up using matplotlib&#39;s implementation to drop my scipy dependency."}], "tags": [], "owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "is_accepted": true, "score": 1, "last_activity_date": 1495783110, "creation_date": 1495783110, "answer_id": 44195826, "question_id": 44168336, "link": "https://stackoverflow.com/questions/44168336/modular-scipy-install-to-fit-on-space-constrained-environment/44195826#44195826", "title": "modular scipy install to fit on space constrained environment", "body": "<p>There is no supported way of doing it. You may try removing manually some parts which you do not use. However, you're on your own if you go down this route.</p>\n"}], "owner": {"reputation": 2226, "user_id": 744520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee4e3d76ce243beec82b15d9d93e0fb?s=128&d=identicon&r=PG", "display_name": "Jacques Kvam", "link": "https://stackoverflow.com/users/744520/jacques-kvam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 44195826, "answer_count": 1, "score": 0, "last_activity_date": 1495783110, "creation_date": 1495659476, "question_id": 44168336, "link": "https://stackoverflow.com/questions/44168336/modular-scipy-install-to-fit-on-space-constrained-environment", "title": "modular scipy install to fit on space constrained environment", "body": "<p>Is it possible to only install part of a python package such as scipy to reduce the total size. The latest version (0.19.0) appears to be using 174MB, I'm only using it for its spectrogram feature. I'm putting this on AWS Lambda and I'm over the 512MB storage limit.</p>\n\n<p>I realize there are other options I could take, e.g. using another spectrogram implementation, manually removing scipy files, etc. I'm wondering if there is any automated way to do this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "edited": false, "score": 0, "creation_date": 1495659817, "post_id": 44168328, "comment_id": 75352855, "body": "Can I ask why are you down voting this question?!"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1495659912, "post_id": 44168328, "comment_id": 75352902, "body": "<code>global phase</code> is an entire statement.  You cannot combine this with either reading or writing the value of the variable."}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1495659927, "post_id": 44168328, "comment_id": 75352910, "body": "What is your <i>exact and specific</i> question?"}, {"owner": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "edited": false, "score": 0, "creation_date": 1495659987, "post_id": 44168328, "comment_id": 75352934, "body": "as i said I can not get access to updated phase on click"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 1, "creation_date": 1495661357, "post_id": 44168328, "comment_id": 75353543, "body": "SO users downvote because you shown absolutely no understanding of python&#39;s <code>global</code> syntax, and that your question does not have a clear problem statement (&quot;this is not working&quot; doesn&#39;t count). If you done a simple Google search on &quot;how to use global in python&quot;, your question could&#39;ve been much better."}], "answers": [{"comments": [{"owner": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "edited": false, "score": 0, "creation_date": 1495660427, "post_id": 44168514, "comment_id": 75353100, "body": "Thanks t.m.adam, I still do not understand why some people vote questions down instead of hinting like what you did!"}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "reply_to_user": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "edited": false, "score": 0, "creation_date": 1495660668, "post_id": 44168514, "comment_id": 75353215, "body": "I don&#39;t know, it is a well written question, maybe they think it&#39;s too easy. Don&#39;t mind the downvoters.."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "edited": false, "score": 0, "creation_date": 1495664262, "post_id": 44168514, "comment_id": 75354562, "body": "@Suffii People often downvote questions that show that you don&#39;t know the basic syntax of the language. SO is not supposed to be a tutoring service."}], "tags": [], "owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "is_accepted": true, "score": 2, "last_activity_date": 1495662885, "last_edit_date": 1495662885, "creation_date": 1495660183, "answer_id": 44168514, "question_id": 44168328, "link": "https://stackoverflow.com/questions/44168328/issue-on-updating-global-variable-between-classes-in-python/44168514#44168514", "title": "Issue on Updating Global Variable Between Classes in Python", "body": "<p>As @jasonharper said <code>global phase</code> is a statement on its own.<br>\nIf you want to access <code>phase</code> you don't have to use <code>global</code> eg :  </p>\n\n<pre><code>print phase\n</code></pre>\n\n<p>If you want to modify <code>phase</code> use :  </p>\n\n<pre><code>global phase\nphase = selection\n</code></pre>\n"}], "owner": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 44168514, "answer_count": 1, "score": -4, "last_activity_date": 1495662885, "creation_date": 1495659457, "question_id": 44168328, "link": "https://stackoverflow.com/questions/44168328/issue-on-updating-global-variable-between-classes-in-python", "title": "Issue on Updating Global Variable Between Classes in Python", "body": "<p>Using ArcGIS Python Addin I need to update a global variable called <code>phase</code> between classes. Here what I want to do is updating the <code>phase</code> variable by changing the <code>ComboBoxClass1</code> and accessing to it by click on <code>ButtonClass3</code>.</p>\n\n<p>As you can see I tried to pass <code>global phase = selection</code> on</p>\n\n<pre><code>    def onSelChange(self, selection):\n        global phase = selection\n</code></pre>\n\n<p>but looks like this is not working!</p>\n\n<pre><code>import arcpy\nimport pythonaddins\nimport os\n\nphase = \"\"\n\nclass ButtonClass3(object):\n    \"\"\"Implementation for Trace_addin.button (Button)\"\"\"\n    def __init__(self):\n        self.enabled = True\n        self.checked = False\n    def onClick(self):\n        print global phase\n\nclass ComboBoxClass1(object):\n    \"\"\"Implementation for Trace_addin.combobox (ComboBox)\"\"\"\n    def __init__(self):\n        self.items = [\"Phase A\", \"Phase B\", \"Phase C\"]\n        self.editable = True\n        self.enabled = True\n        self.dropdownWidth = 'WWWWWWWWWWWWWWWWW'\n        self.width = 'WWWWWWWWWWWWWWWWW'\n    def onSelChange(self, selection):\n        global phase = selection\n    def onEditChange(self, text):\n        pass\n    def onFocus(self, focused):\n        pass\n    def onEnter(self):\n        pass\n    def refresh(self):\n        pass\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas", "merge"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1495660238, "post_id": 44168300, "comment_id": 75353027, "body": "What is the problem you&#39;re running into?"}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1495660733, "post_id": 44168300, "comment_id": 75353239, "body": "@pvg Updated the question .. with change in code and error"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1495660880, "post_id": 44168300, "comment_id": 75353321, "body": "That doesn&#39;t really have anything to do with pandas or headers. Seems like you want to glob that pattern and then iterate over the filenames it generates. You should look up how to do that since the way you&#39;re trying it is very much not it."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1495660974, "post_id": 44168300, "comment_id": 75353373, "body": "See <a href=\"https://stackoverflow.com/questions/3964681/find-all-files-in-a-directory-with-extension-txt-in-python\" title=\"find all files in a directory with extension txt in python\">stackoverflow.com/questions/3964681/&hellip;</a>  and many other similar answers."}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 0, "creation_date": 1495662316, "post_id": 44168952, "comment_id": 75353932, "body": "Wen concat is used all the headers also taken..  I need headers only 1 time in the csv after merging"}, {"owner": {"reputation": 2716, "user_id": 7491646, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IKeHB.jpg?s=128&g=1", "display_name": "Spandan Brahmbhatt", "link": "https://stackoverflow.com/users/7491646/spandan-brahmbhatt"}, "reply_to_user": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 0, "creation_date": 1495662432, "post_id": 44168952, "comment_id": 75353979, "body": "<code>pd.concat</code> would not give you multiple headers. My understanding is each file has its own header. Correct me if I am wrong. If the files have no header , let me know so I can modify the code accordingly."}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 0, "creation_date": 1495662511, "post_id": 44168952, "comment_id": 75354002, "body": "Each file has same headers..  And i want to merge all those file to one big file for future process.."}, {"owner": {"reputation": 2716, "user_id": 7491646, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IKeHB.jpg?s=128&g=1", "display_name": "Spandan Brahmbhatt", "link": "https://stackoverflow.com/users/7491646/spandan-brahmbhatt"}, "reply_to_user": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 1, "creation_date": 1495662601, "post_id": 44168952, "comment_id": 75354028, "body": "This should work. You will have only 1 row (top row) as header. Rest all the rows will be your data."}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 0, "creation_date": 1495664008, "post_id": 44168952, "comment_id": 75354483, "body": "Looks like I have some error rows and that is giving me error for merging.. I used <code>error_bad_line=False</code> but that also gives error."}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "edited": false, "score": 0, "creation_date": 1495741465, "post_id": 44168952, "comment_id": 75391063, "body": "The number of files are 76,600 K,  they have &#39;n&#39; number of columns but due to noise in the data they have n+1 or n+2 columns and when such situation occurs the merging stops with an error,  usually in pandas we can &quot;error_bad_lines=False&#39; but in this case I cannot use that and hence I am not able to get Complete merging done.."}], "tags": [], "owner": {"reputation": 2716, "user_id": 7491646, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IKeHB.jpg?s=128&g=1", "display_name": "Spandan Brahmbhatt", "link": "https://stackoverflow.com/users/7491646/spandan-brahmbhatt"}, "is_accepted": true, "score": 1, "last_activity_date": 1495662209, "creation_date": 1495662209, "answer_id": 44168952, "question_id": 44168300, "link": "https://stackoverflow.com/questions/44168300/merge-write-output-of-60k-csv-to-one-csv/44168952#44168952", "title": "Merge &amp; write output of 60K csv to one csv", "body": "<p>Your issue seems to be in the <code>for loop</code>. The syntax is incorrect.</p>\n\n<p>Try this :</p>\n\n<pre><code>from glob import glob\nall_df = []\nfor f in glob('path/*.csv'):\n    temp_df = pd.read_csv(f)\n    all_df.append(temp_df)\nfinal_df = pd.concat(all_df)\n</code></pre>\n"}], "owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 44168952, "answer_count": 1, "score": -3, "last_activity_date": 1496034586, "creation_date": 1495659358, "last_edit_date": 1496034586, "question_id": 44168300, "link": "https://stackoverflow.com/questions/44168300/merge-write-output-of-60k-csv-to-one-csv", "title": "Merge &amp; write output of 60K csv to one csv", "body": "<p>I am trying to merge 30K csvs in a directory with same headers  and I want to merge them to one file. with the below code I can only merge but with same headers and I do not want to repeat the headers after where the new files is added. </p>\n\n<pre><code>import pandas as pd\nf = r'path/*.csv\ncombined_csv = pd.concat([ pd.read_csv(f) for f in filenames ])\n\ncombined_csv.to_csv('output.csv', index=False, header=True)\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"merg_csv.py\", line 4, in &lt;module&gt;\n    combined_csv = pd.concat([ pd.read_csv(f) for f in filenames ])\nNameError: name 'filenames' is not defined\n</code></pre>\n\n<p><strong>Edit</strong>: The Solution provided in the answer below works but after sometime the memory is used and the program freezes and also freezes my screen. </p>\n\n<pre><code>import glob\nimport pandas as pd \n\nall_data = pd.dataFrame()\n\ndfs = []\n\nfor f in glob.glob(\"*.csv\"):\n    df = pd.read_csv(f, error_bad_lines=False)\n\n    dfs.append(df)\n\nall_data = pd.concat(dfs, ignore_index=True)\n\nall_data.to_csv(\"00_final.csv\", index=None, header=True)\n</code></pre>\n\n<p>How can I merge and write into the output file at same time so that I will not face the low memory error. The size of the inputs is about 1.5gb and the number of files are more than 60K </p>\n\n<p>Thank in advance !!</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495664709, "post_id": 44168292, "comment_id": 75354715, "body": "What does <b>Changing &quot;cur.fetchone&quot; to &quot;cur.fetchone&quot;</b> mean? Did you mean <code>cur.fetchall</code>?"}, {"owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495689193, "post_id": 44168292, "comment_id": 75360794, "body": "Oops. Of course &quot;cur.fetchall&quot;, thank`s."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495726478, "post_id": 44169482, "comment_id": 75382737, "body": "Sorry, didn&#39;t know <code>numpy</code> uses a different method to get array size. It has <code>.shape</code> property that returns a tuple of all the array dimensions."}, {"owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495726851, "post_id": 44169482, "comment_id": 75383010, "body": "When I input you solution i get Typeerror: object of type &#39;numpy.int64&#39; has no len(). For some strange reason type(number_row) is &#39;numpy.int64&#39;. I added  line &quot;number_row = int(number_row)&quot; and all works good."}, {"owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495727760, "post_id": 44169482, "comment_id": 75383540, "body": "Hmm, I trying use fixed variants and get &quot;IndexError: tuple index out of range&quot; in line &quot;if number_row.shape[0] &gt; 0:&quot;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495727943, "post_id": 44169482, "comment_id": 75383664, "body": "I added a check for <code>number_row.ndim &gt; 0</code>."}, {"owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495728799, "post_id": 44169482, "comment_id": 75384142, "body": "&#39;number_row.ndim &gt; 0&#39; is False for any values and &#39;number_row.shape[0]&gt; 0&#39; stay return &quot;IndexError: tuple index out of range&quot;."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495728917, "post_id": 44169482, "comment_id": 75384207, "body": "OK, I give up. Someone who actually knows Numpy will have to resolve this. I tried reading blogs and documentation, but I guess I didn&#39;t get it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495728975, "post_id": 44169482, "comment_id": 75384250, "body": "I&#39;m just trying to make sure it doesn&#39;t go into this block if <code>np.searchsorted()</code> doesn&#39;t find anything."}, {"owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "edited": false, "score": 0, "creation_date": 1495729729, "post_id": 44169482, "comment_id": 75384668, "body": "Well, I think I should read more about Numpy. For now, I keep in reserve &quot;number_row = int(number_row)&quot;."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1495727925, "last_edit_date": 1495727925, "creation_date": 1495664892, "answer_id": 44169482, "question_id": 44168292, "link": "https://stackoverflow.com/questions/44168292/how-to-correctly-make-a-sql-request-with-option/44169482#44169482", "title": "How to correctly make a SQL-request with option?", "body": "<p><code>np.searchsorted</code> returns an array of indices, so it's returning <code>[2]</code> rather than <code>2</code>. You need to extract the element to use it in the query.</p>\n\n<pre><code>if number_row.ndim &gt; 0 and number_row.shape[0] &gt; 0:\n    id = number_row[0]\n    cur = con.cursor()\n    cur.execute(\"SELECT VARIANTS from P_steel_3_2 WHERE ID=?\", (id,))\n    pressure_variants = cur.fetchone()\n    print(pressure_variants)\n    cur.close()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4952386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5c73d64e2bbdd9b88d205724ef6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Lomil", "link": "https://stackoverflow.com/users/4952386/lomil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1495730731, "creation_date": 1495659321, "last_edit_date": 1495730731, "question_id": 44168292, "link": "https://stackoverflow.com/questions/44168292/how-to-correctly-make-a-sql-request-with-option", "title": "How to correctly make a SQL-request with option?", "body": "<p>Currently <code>cur.fetchone</code> returns \"None\". But if change <code>ID=?, (number_row,)</code> for <code>Id=2</code> (or other number) all works as planned. Changing \"cur.fetchone\" to \"cur.fetchone\" is returning the empty tuple. Where I have I gone wrong?</p>\n\n<pre><code>import sqlite3\nimport numpy as np\ncon = sqlite3.connect('database_all.db')\npower_list = np.array([-70, 200, 300, 400, 480, 520, 600])\ntemperature = 90\nnumber_row = np.searchsorted(power_list, temperature, side='right')\nprint(number_row)\ncur = con.cursor()\ncur.execute(\"SELECT VARIANTS from P_steel_3_2 WHERE ID=?\", (number_row,))\npressure_variants = cur.fetchone()\nprint(pressure_variants)\ncur.close()\n</code></pre>\n\n<p>And my table (generated in DB Browser for SQLite)</p>\n\n<pre><code>BEGIN TRANSACTION;\nCREATE TABLE \"P_steel_3_2\" (\n    `ID`    INTEGER,\n    `TEMPERATURE`   REAL,\n    `VARIANTS`  REAL\n);\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (0,'-70_200','0.1, 0.25, 0.4, 0.6 ,1 ,1.6, 2.5 ,4, 6.4, 10, 16');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (1,'200-300','0.09, 0.22, 0.36, 0.56, 0.9, 1.4, 2.2, 3.6, 5.6, 9, 14');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (2,'300-400','0.08, 0.2, 0.32, 0.5, 0.8, 1.25, 2, 3.2, 5, 8, 12.5');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (3,'400-480','0.07, 0.18, 0.28, 0.45, 0.7, 1.1, 1.8, 2.8, 4.5, 7.1, 10.2');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (5,'520-600','0.05, 0.11, 0.18, 0.28, 0.45, 0.7, 1.1, 1.8, 2.8, 4.5, 7.1');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (6,'600-700','0, 0.06, 0.09, 0.15, 0.22, 0.36, 0.56, 0.9, 1.4, 2.2, 3.6');\nINSERT INTO `P_steel_3_2` (ID,TEMPERATURE,VARIANTS) VALUES (4,'480-520','0.06, 0.16, 0.25, 0.4, 0.64, 1, 1.6, 2.5, 4, 6.4, 10');\nCOMMIT;\n</code></pre>\n"}, {"tags": ["python", "sockets", "elasticsearch", "logstash", "python-sockets"], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 2297299, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/15e68675eca887dc61ae08814905cdc4?s=128&d=identicon&r=PG", "display_name": "HectorOfTroy407", "link": "https://stackoverflow.com/users/2297299/hectoroftroy407"}, "is_accepted": false, "score": 0, "last_activity_date": 1495660756, "creation_date": 1495660756, "answer_id": 44168632, "question_id": 44168288, "link": "https://stackoverflow.com/questions/44168288/python-iterate-and-send-data-over-socket-logstash-elasticsearch/44168632#44168632", "title": "Python Iterate and Send Data Over Socket (Logstash/Elasticsearch)", "body": "<p>So turns out by delimiting on the \"\\n\", I was getting rid of what LogStash needs to see to know a log event is terminated.</p>\n\n<p>By adding:</p>\n\n<pre><code>r = requests.get(URL, headers=AUTH, stream=True)\nfor d in r.iter_lines(delimiter=\"\\n\"):\n    d += \"\\n\"\n    sock.send(d)\n</code></pre>\n\n<p>Everything works! Logstash basically didn't know how to recognize one event ended and one event started.</p>\n"}], "owner": {"reputation": 1229, "user_id": 2297299, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/15e68675eca887dc61ae08814905cdc4?s=128&d=identicon&r=PG", "display_name": "HectorOfTroy407", "link": "https://stackoverflow.com/users/2297299/hectoroftroy407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1076, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495660756, "creation_date": 1495659296, "question_id": 44168288, "link": "https://stackoverflow.com/questions/44168288/python-iterate-and-send-data-over-socket-logstash-elasticsearch", "title": "Python Iterate and Send Data Over Socket (Logstash/Elasticsearch)", "body": "<p>I am attempting to stream JSON data and feed each individual JSON event (delimited by '\\n') into a TCP socket that communicates with LogStash (localhost 5000). However, I can only seem to populate the last json object in Elasticsearch via LogStash. I can validate the API call works and should contain about 70 individual events. Only the final one ends up in Elasticsearch via this LogStash entry point. I have also validated the stream and delimiter in the requests call is working and returns a single JSON event. Each iteration of iter_lines will print a single JSON object as expected. I want to send each json object over this socket individually, but it not working. Any ideas? Do I need to tear down and build up the socket for each json object?</p>\n\n<pre><code>HOST = 'localhost'\nPORT = 5000\n\ntry:\n  sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nexcept socket.error, msg:\n  sys.stderr.write(\"[ERROR] %s\\n\" % msg[1])\n  sys.exit(1)\n\ntry:\n  sock.connect((HOST, PORT))\nexcept socket.error, msg:\n  sys.stderr.write(\"[ERROR] %s\\n\" % msg[1])\n  sys.exit(2)\n\n#make web request\nAUTH = {\n    \"Key\" : key,\n    \"Email\" : email\n}\nURL = \"https://LOGAPIENDPOINT/{}/logs/requests?start={}\".format(zone, start)\ncounter=0\nr = requests.get(URL, headers=AUTH, stream=True)\nfor d in r.iter_lines(delimiter=\"\\n\"):\n    print d\n    sock.send()\n\nprint \"Closing Socket\"\nsock.close()\nsys.exit(0)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1495660120, "post_id": 44168286, "comment_id": 75352977, "body": "In general, you are probably doing something wrong if you call <code>read</code> without an argument."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 2, "creation_date": 1495660295, "post_id": 44168286, "comment_id": 75353053, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38105507/python-when-should-i-ever-use-file-read-or-file-readlines\">Python: When should I ever use file.read() or file.readlines()?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1495660054, "post_id": 44168346, "comment_id": 75352955, "body": "Also, <code>file_object.read()</code> returns a single string, whose iterator returns a single character at a time, where as a <code>file</code> iterator actually returns a line at a time."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1495660290, "post_id": 44168346, "comment_id": 75353049, "body": "This answer is incorrect, the <code>with</code> has nothing to do with it. Open the file any other way and the loop will behave the same."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1495660904, "post_id": 44168346, "comment_id": 75353339, "body": "I don&#39;t think it&#39;s wrong, just unclearly worded. <code>with open ... as</code> certainly opens the file (specifically, the call to <code>open</code> does; the <code>with</code> statement merely ensures it will be closed as well), although it is the resulting <code>file</code> object (or whatever <code>open</code> ends up returning in Python 3) which produces the iterator used by the <code>for</code> loop to actually read from the file."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1495661769, "post_id": 44168346, "comment_id": 75353704, "body": "I&#39;d say it&#39;s misleading, at a minimum. It&#39;s hard to read it as <i>not</i> saying, incorrectly, that the <code>with</code> plays a role."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495662710, "post_id": 44168346, "comment_id": 75354078, "body": "I was keeping the explanation very intro-level, but you guys are right: it&#39;s technically misleading, and I need to edit it."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1495662857, "last_edit_date": 1495662857, "creation_date": 1495659519, "answer_id": 44168346, "question_id": 44168286, "link": "https://stackoverflow.com/questions/44168286/reading-files-in-python-with-for-loop/44168346#44168346", "title": "Reading files in Python with for loop", "body": "<p>The <code>open</code> command in your <code>with</code> statement handles the reading implicitly.  It creates a generator that yields the file a record at a time (the <code>read</code> is hidden within the generator).  For a text file, each line is one record.</p>\n\n<p>Note that the <code>read</code> command in your second example reads the <em>entire</em> file into a string; this consumes more memory than the line-at-a-time example.</p>\n"}, {"tags": [], "owner": {"reputation": 1595, "user_id": 3542457, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/oLP4Y.jpg?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/3542457/greg"}, "is_accepted": false, "score": 3, "last_activity_date": 1495660137, "creation_date": 1495660137, "answer_id": 44168502, "question_id": 44168286, "link": "https://stackoverflow.com/questions/44168286/reading-files-in-python-with-for-loop/44168502#44168502", "title": "Reading files in Python with for loop", "body": "<p>This is because the file_object class has an \"iter\" method built in that states how the file will interact with an iterative statement, like a for loop.</p>\n\n<p>In other words, when you say <code>for line in file_object</code> the file object is referencing its <code>__iter__</code> method, and returning a list where each index contains a line of the file.</p>\n"}, {"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 0, "last_activity_date": 1495661848, "last_edit_date": 1495661848, "creation_date": 1495660234, "answer_id": 44168524, "question_id": 44168286, "link": "https://stackoverflow.com/questions/44168286/reading-files-in-python-with-for-loop/44168524#44168524", "title": "Reading files in Python with for loop", "body": "<p>Python file objects define special behavior when you iterate over them, in this case with the <code>for</code> loop. Every time you hit the top of the loop it implicitly calls <code>readline()</code>. That's all there is to it.</p>\n\n<p>Note that the code you are \"used to\" will actually iterate character by character, not line by line! That's because you will be iterating over a string (the result of the <code>read()</code>), and when Python iterates over strings, it goes character by character. </p>\n"}], "owner": {"reputation": 31, "user_id": 5612996, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJygRzEmBJs/AAAAAAAAAAI/AAAAAAAAAGk/q_lQULTuurk/photo.jpg?sz=128", "display_name": "reza", "link": "https://stackoverflow.com/users/5612996/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2383, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1495662857, "creation_date": 1495659287, "last_edit_date": 1495659754, "question_id": 44168286, "link": "https://stackoverflow.com/questions/44168286/reading-files-in-python-with-for-loop", "title": "Reading files in Python with for loop", "body": "<p>To read a file in Python, the file must be first opened, and then a <code>read()</code> function is needed.  Why is that when we use a <code>for</code> loop to read lines of a file, no <code>read()</code> function is necessary?</p>\n\n<pre><code>filename = 'pi_digits.txt'\nwith open(filename,) as file_object:\n    for line in file_object:\n        print(line)\n</code></pre>\n\n<p>I'm used to the code below, showing the <code>read</code> requirement.</p>\n\n<pre><code>for line in file_object.read():\n</code></pre>\n"}, {"tags": ["python", "bamboo"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 6124668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3caa0c652c012d2133ffb698015ce338?s=128&d=identicon&r=PG&f=1", "display_name": "Raju", "link": "https://stackoverflow.com/users/6124668/raju"}, "is_accepted": false, "score": 0, "last_activity_date": 1512983888, "creation_date": 1512983888, "answer_id": 47749579, "question_id": 44168277, "link": "https://stackoverflow.com/questions/44168277/invoke-bamboo-plan-variables-in-a-python-script-under-script-task/47749579#47749579", "title": "Invoke bamboo plan variables in a python script under script task", "body": "<p>I am looking into a solution where we can run the python code from inside bamboo. The error that you are pointing, looks to be syntax error. Try this.</p>\n\n<p><code>/usr/bin/python &lt;&lt;EOF\nprint(\"Hello World\")\nEOF</code></p>\n"}], "owner": {"reputation": 715, "user_id": 5953419, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b9ba666bb6a068574b1ed7ccb17326?s=128&d=identicon&r=PG", "display_name": "Ashley", "link": "https://stackoverflow.com/users/5953419/ashley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 876, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512983888, "creation_date": 1495659263, "last_edit_date": 1502483513, "question_id": 44168277, "link": "https://stackoverflow.com/questions/44168277/invoke-bamboo-plan-variables-in-a-python-script-under-script-task", "title": "Invoke bamboo plan variables in a python script under script task", "body": "<p>I have a simple script task added to my Bamboo plan which is inline Python script.</p>\n\n<pre><code>/usr/bin/python &lt;&lt;EOF\nprint \"Hello\"\nEOF\n</code></pre>\n\n<p>It works just fine.</p>\n\n<p>Now I want to just pass Hello as a plan specific variable so I configured a variable called pythontest within bamboo plan variables and provided it the value Hello.</p>\n\n<p>When I switch the script to:-</p>\n\n<pre><code>/usr/bin/python &lt;&lt;EOF\nprint \"$bamboo_pythontest\"\nEOF\n</code></pre>\n\n<p>It does nothing.</p>\n\n<p>After going through below post:-</p>\n\n<p><a href=\"https://community.atlassian.com/t5/Bamboo-questions/How-I-can-access-global-and-or-plan-specific-variables-from/qaq-p/162809\" rel=\"nofollow noreferrer\">https://community.atlassian.com/t5/Bamboo-questions/How-I-can-access-global-and-or-plan-specific-variables-from/qaq-p/162809</a></p>\n\n<pre><code>/usr/bin/python &lt;&lt;EOF\nimport os\nprint os.environ['bamboo_pythontest]\nEOF\n</code></pre>\n\n<p>I get error</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 3, in &lt;module&gt;\nFile \"/usr/lib64/python2.6/UserDict.py\", line 22, in __getitem__\nraise KeyError(key)\nKeyError: ''\n</code></pre>\n\n<p>Is there a way to successfully invoke Bamboo plan variables within a Python inline script just like it works for a shell or batch script.\nAny help here would be greatly appreciated.</p>\n\n<p>Cheers,</p>\n\n<p>Ashley</p>\n"}, {"tags": ["python", "django", "datetime", "datetime-format"], "comments": [{"owner": {"reputation": 884, "user_id": 1344526, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/oeUcE.jpg?s=128&g=1", "display_name": "Kostas Livieratos", "link": "https://stackoverflow.com/users/1344526/kostas-livieratos"}, "edited": false, "score": 0, "creation_date": 1495670024, "post_id": 44168255, "comment_id": 75356183, "body": "That&#39;s not possible only using the client&#39;s language, you need to know client&#39;s timezone as well. In that case, you&#39;ll save the datetime object as datetime-naive object, and you&#39;ll apply datetime localization using <code>from django.utils.timezone import activate</code> like this <code>activate(user_timezone_str)</code>."}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "reply_to_user": {"reputation": 884, "user_id": 1344526, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/oeUcE.jpg?s=128&g=1", "display_name": "Kostas Livieratos", "link": "https://stackoverflow.com/users/1344526/kostas-livieratos"}, "edited": false, "score": 0, "creation_date": 1495695630, "post_id": 44168255, "comment_id": 75363489, "body": "@KostasLivieratos I may not be clear enough, so i&#39;ve edited my question, I&#39;m very sorry for that, I hope it&#39;s better now."}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1495701157, "post_id": 44168255, "comment_id": 75366520, "body": "It&#39;s not the case that &quot;Django itself activates the timezone of the client&#39;s browser&quot;. See <a href=\"https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#selecting-the-current-time-zone\" rel=\"nofollow noreferrer\">Selecting the current time zone</a>: &quot;The current time zone is the equivalent of the current locale for translations. However, there\u2019s no equivalent of the <code>Accept-Language</code> HTTP header that Django could use to determine the user\u2019s time zone automatically. Instead, Django provides time zone selection functions. Use them to build the time zone selection logic that makes sense for you.&quot;"}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1495705645, "post_id": 44168255, "comment_id": 75369098, "body": "So if I understand what you say, I should use the current locale (nevermind how I&#39;ve set it up (including <code>settings.py</code>)) and use <code>make_aware()</code> before sending my answer to the client? If so, may I ask you to answer so I can check your answer as valid, and I&#39;ll think about how to handle this &quot;properly&quot;. Thank you very much"}], "owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1495695650, "creation_date": 1495659188, "last_edit_date": 1495695650, "question_id": 44168255, "link": "https://stackoverflow.com/questions/44168255/datetime-and-timezone-utc-conversion-am-i-doing-it-right", "title": "datetime and timezone: utc conversion. Am I doing it right?", "body": "<p>I'm in France. <code>UTC+02:00</code>\nIf I try on my PC :</p>\n\n<pre><code>print(timezone.now())\nprint(make_aware(datetime.now()))\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>2017-05-24 20:46:02.426011+00:00\n2017-05-24 22:46:02.426011+02:00\n</code></pre>\n\n<p>In which format should I write the datetime?\nHere's my mixin I wrote for all my forms and I'm not sure if I did the right thing. The idea behind this is: I 'convert' all datetimes I get to \n<code>UTC+00:00</code> (== <code>UTC</code>) and I write them, and when I have to display them, I call <code>make_aware()</code> so it takes the language of the client browser and use the <code>UTC+xx:xx</code> of the browser.</p>\n\n<pre><code># from django.utils.datetime_safe import datetime as datetime_safe\n\nclass DateUtilsMixin(object):\n\n    @staticmethod\n    def make_date_aware(d):\n        # make d \"aware\"\n        if type(d) is str:\n            return make_aware(\n                datetime_safe.combine(parse_date(d),\n                                      time(0, 0, 0)),\n                timezone=pytz.timezone('UTC'))\n        elif type(d) is datetime_date:\n            return make_aware(\n                datetime_safe.combine(d, time(0, 0, 0)),\n                timezone=pytz.timezone('UTC'))\n        return d\n</code></pre>\n\n<p>Django itself activates the timezone of the client's browser (which is great) so I'm asking if my code seems \"logical\" and do/should adapt itself to various client's timezones. For example the Django app would work the same way if I'm in China and if I'm at Tahiti and if I'm in Australia (with the server in France)</p>\n\n<p>Am I doing the right stuff, and if not, what should I change to be sure to display the date time to the right timezone, using the client's language?</p>\n"}, {"tags": ["python", "scipy", "interpolation", "curve-fitting", "smoothing"], "answers": [{"tags": [], "owner": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "is_accepted": false, "score": 1, "last_activity_date": 1495662366, "creation_date": 1495662366, "answer_id": 44168989, "question_id": 44168238, "link": "https://stackoverflow.com/questions/44168238/how-to-choose-an-appropriate-smoothing-factor-for-scipy-interpolate-univariatesp/44168989#44168989", "title": "How to choose an appropriate smoothing factor for scipy.interpolate.UnivariateSpline", "body": "<p>Scipy itself uses this heuristic (from the docs):</p>\n\n<blockquote>\n  <p>Positive smoothing factor used to choose the number of knots. Number of knots will be increased until the smoothing condition is\n  satisfied:</p>\n\n<pre><code>sum((w[i] * (y[i]-spl(x[i])))**2, axis=0) &lt;= s\n</code></pre>\n  \n  <p>If None (default), s = len(w) which should be a good value if 1/w[i] is an estimate of the standard deviation of y[i]. If 0, spline\n  will interpolate through all data points.</p>\n</blockquote>\n\n<p>In my experience, when you are using spline, you are going for the looks and not trying to fit a function you actually want to use later, so you'll probably have to check by hand if it actually does look good. I'd probably just take a look at the data and then make 3-4 versions with a for loop and check which one I find prettier :)</p>\n"}], "owner": {"reputation": 1, "user_id": 6467425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4506e899d467e035b97509b07a461d66?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Ye", "link": "https://stackoverflow.com/users/6467425/dennis-ye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495662366, "creation_date": 1495659124, "question_id": 44168238, "link": "https://stackoverflow.com/questions/44168238/how-to-choose-an-appropriate-smoothing-factor-for-scipy-interpolate-univariatesp", "title": "How to choose an appropriate smoothing factor for scipy.interpolate.UnivariateSpline", "body": "<p>I'm trying to create cubic spline curves using <code>scipy.interpolate.UnivariateSpline</code> but I'm having trouble finding an appropriate value for <code>s</code>, the smoothing factor.</p>\n\n<p>At <code>s=0</code>, each datapoint becomes a knot and the curve goes through every point. On the other hand, a high value for <code>s</code> returns a curve with 2 knots.</p>\n\n<p>Ideally, I would like a curve with more than 2 knots for a better fit and I definitely do not want a curve that goes through every point. I believe that a curve with around 5 knots would be a good balance between goodness of fit and smoothness.</p>\n\n<p>Currently, I am making curves with <code>UnivariateSpline</code> and adjusting the smoothness until the number of knots was around 5. Obviously, this is not the best process.</p>\n\n<p>Is there a better computational or statistical method for determining the smoothness factor based on a set of data?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495659030, "post_id": 44168202, "comment_id": 75352453, "body": "Your indentation doesn&#39;t look right. All the statements in a <code>while</code> should be at the same indentation."}, {"owner": {"reputation": 342, "user_id": 6381439, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cpv2O5u7Xv4/AAAAAAAAAAI/AAAAAAAAAV4/wpwrRwppfUc/photo.jpg?sz=128", "display_name": "Benjamin Commet", "link": "https://stackoverflow.com/users/6381439/benjamin-commet"}, "edited": false, "score": 0, "creation_date": 1495659442, "post_id": 44168202, "comment_id": 75352658, "body": "Just calling <code>global pulse_start</code> one time immediately prior to the first while loop should work for you."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1495659460, "post_id": 44168202, "comment_id": 75352672, "body": "If your input pin is 1 to start with, then your first loop never executes, and therefore never initializes <code>pulse_start</code>."}], "owner": {"reputation": 133, "user_id": 7566677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-vSQ04VcQES8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3fWtSNai_5YSuHdIJD0i43gYjlw/mo/photo.jpg?sz=128", "display_name": "Abhi", "link": "https://stackoverflow.com/users/7566677/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1495659797, "creation_date": 1495658956, "last_edit_date": 1495659797, "question_id": 44168202, "link": "https://stackoverflow.com/questions/44168202/nameerror-global-name-pulse-start-is-not-defined", "title": "NameError: global name &#39;pulse_start&#39; is not defined", "body": "<p>In the second while loop i cannot access pulse_start ,i also declared pulse_start as global in first while loop.</p>\n\n<pre><code>while GPIO.input(ECHO)==0:\n       global pulse_start\n       pulse_start = time.time()\n       while GPIO.input(ECHO)==1:\n                       pulse_end = time.time()\n                       pulse_duration = pulse_end - pulse_start\n                       distance = pulse_duration * 17150\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 2779795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32f53bb24e3e7fb1ef1935a5576540a?s=128&d=identicon&r=PG&f=1", "display_name": "huck_cussler", "link": "https://stackoverflow.com/users/2779795/huck-cussler"}, "edited": false, "score": 1, "creation_date": 1495658840, "post_id": 44168161, "comment_id": 75352382, "body": "Only note I might add is that it&#39;s not clear whether OP wants to include space characters."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 6, "last_activity_date": 1495658902, "last_edit_date": 1495658902, "creation_date": 1495658771, "answer_id": 44168161, "question_id": 44168111, "link": "https://stackoverflow.com/questions/44168111/check-if-a-dictionary-is-subset-of-another-dictionary/44168161#44168161", "title": "Check if a dictionary is subset of another dictionary", "body": "<p>If I understand your problem correctly, you don't need to compare dictionaries, but sets:</p>\n\n<pre><code>&gt;&gt;&gt; x = 'NJITZU THE HANDS OF TIME'\n&gt;&gt;&gt; y = 'NinjaGo Masters of Spinjitzu The Hands of Time'\n&gt;&gt;&gt; set(x).issubset(set(y))\nFalse\n</code></pre>\n\n<p>And if you want a case-insensitive compare, you can call <code>lower()</code> on both strings:</p>\n\n<pre><code>&gt;&gt;&gt; set(x.lower()).issubset(set(y.lower()))\nTrue\n</code></pre>\n\n<p>You could also compare whole words by using <code>split()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; set(x.lower().split())\nset(['of', 'the', 'time', 'njitzu', 'hands'])\n&gt;&gt;&gt; set(x.lower().split()).issubset(set(y.lower().split()))\nFalse\n&gt;&gt;&gt; set('SPINJITZU THE HANDS OF TIME'.lower().split()).issubset(set(y.lower().split()))\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 8054875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3beb69261cbbe7905f051f83f308329?s=128&d=identicon&r=PG", "display_name": "Nathaniel Rivera Saul", "link": "https://stackoverflow.com/users/8054875/nathaniel-rivera-saul"}, "is_accepted": false, "score": 2, "last_activity_date": 1495659778, "last_edit_date": 1495659778, "creation_date": 1495658890, "answer_id": 44168185, "question_id": 44168111, "link": "https://stackoverflow.com/questions/44168111/check-if-a-dictionary-is-subset-of-another-dictionary/44168185#44168185", "title": "Check if a dictionary is subset of another dictionary", "body": "<p>I would use the <code>set</code> object. <a href=\"https://docs.python.org/3.6/library/stdtypes.html?highlight=set#set\" rel=\"nofollow noreferrer\">Documentation can be found here.</a></p>\n\n<pre><code>x = 'NJITZU THE HANDS OF TIME'\ny = 'NinjaGo Masters of Spinjitzu The Hands of Time'\nif set(x.lower()) &lt;= set(y.lower()):\n    print('Yes')\nelse:\n    print('No')\n</code></pre>\n\n<p>The <code>&lt;</code> operator is overloaded to be <code>is_subset</code>.  To get the answer to print \"Yes\", I've also converted the strings to lowercase.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1495659141, "post_id": 44168208, "comment_id": 75352496, "body": "This works fine and is pretty readable. It&#39;s much less efficient than using sets, though."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1495659474, "post_id": 44168208, "comment_id": 75352679, "body": "The problem is that you have to call <code>character in y</code> for each <code>character in x</code>, and it&#39;s expensive to parse the whole <code>y</code> string again and again. Using another <code>all()</code> shouldn&#39;t change the <code>O(n*m)</code> complexity. With sets, complexity should be <code>O(n+m)</code>."}, {"owner": {"reputation": 1707, "user_id": 1088415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8rZdp.jpg?s=128&g=1", "display_name": "Metropolis", "link": "https://stackoverflow.com/users/1088415/metropolis"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1495659599, "post_id": 44168208, "comment_id": 75352748, "body": "That ... should have been obvious to me. Thanks."}], "tags": [], "owner": {"reputation": 1707, "user_id": 1088415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8rZdp.jpg?s=128&g=1", "display_name": "Metropolis", "link": "https://stackoverflow.com/users/1088415/metropolis"}, "is_accepted": false, "score": 1, "last_activity_date": 1495658976, "creation_date": 1495658976, "answer_id": 44168208, "question_id": 44168111, "link": "https://stackoverflow.com/questions/44168111/check-if-a-dictionary-is-subset-of-another-dictionary/44168208#44168208", "title": "Check if a dictionary is subset of another dictionary", "body": "<p>You can use the builtin <a href=\"https://docs.python.org/3/library/functions.html#all\" rel=\"nofollow noreferrer\">all</a> function for this. </p>\n\n<pre><code>all(character in y for character in x)\n</code></pre>\n\n<p>all() will return true if every element is true and false otherwise. We use <code>in</code> to check if a character is in the string <code>y</code> and we will do this for every <code>character in x</code>.</p>\n"}], "owner": {"reputation": 259, "user_id": 5096003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae58bfe93e163cc06b0d37ee766cb3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kandarp Gandhi", "link": "https://stackoverflow.com/users/5096003/kandarp-gandhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 44168161, "answer_count": 3, "score": 3, "last_activity_date": 1495664728, "creation_date": 1495658524, "last_edit_date": 1495664728, "question_id": 44168111, "link": "https://stackoverflow.com/questions/44168111/check-if-a-dictionary-is-subset-of-another-dictionary", "title": "Check if a dictionary is subset of another dictionary", "body": "<p>I am trying to compare 2 Strings and check if all characters in String <code>a</code> are present in String <code>b</code>. I am currently using the following method by converting the string into a dictionary and comparing it with the other. But there are many chances that it gives a false positive.</p>\n\n<pre><code>x = 'NJITZU THE HANDS OF TIME'\ny = 'NinjaGo Masters of Spinjitzu The Hands of Time'\nif Counter(x) &lt; Counter(y):\n    print 'Yes'\nelse:\n    print 'No'\n</code></pre>\n\n<p>Please suggest any better way to do this</p>\n"}, {"tags": ["python", "machine-learning", "svm"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495659379, "post_id": 44168095, "comment_id": 75352626, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 117, "user_id": 5286301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a4b20c0b019fc1c33ec14313162fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Mills", "link": "https://stackoverflow.com/users/5286301/alan-mills"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495660043, "post_id": 44168095, "comment_id": 75352950, "body": "@Prune, this is an exact copy and complete copy of my code, with the exception of the classifiers I am using (as I didn&#39;t feel they would have much bearing on the subject of cross validation etc), however I will edit and add those in now."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1495660155, "post_id": 44168095, "comment_id": 75352994, "body": "The main problem I see with the example would be <code>&#39;four_During_1000.csv&#39;: file not found</code>, or some similar message."}, {"owner": {"reputation": 117, "user_id": 5286301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a4b20c0b019fc1c33ec14313162fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Mills", "link": "https://stackoverflow.com/users/5286301/alan-mills"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495660807, "post_id": 44168095, "comment_id": 75353277, "body": "@Prune, that is the .csv file I am using that holds my dataset... These can simply be swapped out with a sklearn library, such as the iris dataset or pama dataset. But those are very small sets, however are I believe loaded into sklearn."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495662648, "post_id": 44168095, "comment_id": 75354053, "body": "Ah!  Okay, if SKLearn people can reproduce the problem with <i>any</i> data set, I&#39;m fine with the code.  I can&#39;t handle this with my current facilities and faculties, but wanted to make sure that your question is ready to use for those who can."}, {"owner": {"reputation": 117, "user_id": 5286301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a4b20c0b019fc1c33ec14313162fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Mills", "link": "https://stackoverflow.com/users/5286301/alan-mills"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1495663100, "post_id": 44168095, "comment_id": 75354199, "body": "@Prune, no worries, I have added in a link to a codeshare site which has the contents of my .csv file in it, so all people need to do is copy, paste and save to have a 100% replication of my data... Seems the most accurate way to test, as mentioned I think an sklearn dataset will just be too small."}], "owner": {"reputation": 117, "user_id": 5286301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a4b20c0b019fc1c33ec14313162fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Mills", "link": "https://stackoverflow.com/users/5286301/alan-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1495661195, "creation_date": 1495658439, "last_edit_date": 1495661195, "question_id": 44168095, "link": "https://stackoverflow.com/questions/44168095/python-machine-learning-multi-class-testing-script", "title": "Python Machine Learning - Multi Class Testing Script", "body": "<p>I'm quite new to machine learning, and I am currently building / running a script to test a dataset against multiple classifiers to find out which one offers the best fit / highest accuracy and then use that classifier to make my predictions.</p>\n\n<p>So far when ever I run the script I am getting very high scores, around 98% - 99%. I just want to make sure that these high scores aren't due an error on my part. I <strong><em>think</em></strong> I have covered all bases, I'm using cross validation, checking it against a confusion matrix etc. But as I say, I am new to this.</p>\n\n<p>My code is below;    </p>\n\n<pre><code>import csv\nimport pandas\nimport numpy as np\nimport sklearn.ensemble as ske\nimport operator\nfrom sklearn import model_selection, tree, linear_model, svm\nfrom sklearn.metrics import classification_report\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.feature_selection import SelectFromModel\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.naive_bayes import GaussianNB\n\n\n# Load dataset\nurl = 'four_During_1000.csv'\ndataset = pandas.read_csv(url)\n#dataset.set_index('Name', inplace = True)\ndataset.drop('Name', axis = 1, inplace=True)\n\n# Split-out validation dataset\nX = dataset.drop(['Legitimate'], axis=1).values\nY = dataset['Legitimate'].values\nseed = 7\nscoring = 'accuracy'\n\n\nprint('Researching important feature based on %i total features\\n' % X.shape[1])\n\n# Feature selection using Trees Classifier\nfsel = ske.ExtraTreesClassifier().fit(X, Y)\nmdl = SelectFromModel(fsel, prefit=True)\nX_new = mdl.transform(X)\nnb_features = X_new.shape[1]\n\nfeatures = []\n\nprint('%i features identified as important:' % nb_features)\n\nindices = np.argsort(fsel.feature_importances_)[::-1][:nb_features]\nfor f in range(nb_features):\n    print(\"%d. feature %s (%f)\" % (f + 1, dataset.columns[2+indices[f]],\n                                   fsel.feature_importances_[indices[f]]))\n\n# XXX : take care of the feature order\nfor f in sorted(np.argsort(fsel.feature_importances_)[::-1][:nb_features]):\n    features.append(dataset.columns[2+f])\nprint(\"\\n\")\n\nX_train, X_validation, Y_train, Y_validation = model_selection.train_test_split(\n    X_new, Y ,test_size=0.2, random_state=seed)\n\n# create dict for models\nmodels = {\n    \"LR\" : linear_model.LogisticRegression(),\n    \"KNN\": KNeighborsClassifier(),\n    \"DecisionTree\": tree.DecisionTreeClassifier(),\n    \"RandomForest\": ske.RandomForestClassifier(),\n    \"GradientBoosting\": ske.GradientBoostingClassifier(),\n    \"AdaBoost\": ske.AdaBoostClassifier(),\n    \"GNB\": GaussianNB(),\n    \"SVC\": svm.SVC(),\n    \"SVM\": svm.OneClassSVM(),\n    }\n\n# evaluate each model in turn\nresults = []\nscore = {}\nfor name in models:\n        clf = models[name]        \n        kfold = model_selection.KFold(n_splits=10, random_state=seed)\n        cv_results = model_selection.cross_val_score(clf, X_train,\n                                                     Y_train, cv=kfold, scoring=scoring)\n        results.append(cv_results)\n        msg = \"%s: %f (%f)\" % (name, cv_results.mean(), cv_results.std())\n        score[name] = cv_results.mean()\n        print(msg)\nprint(\"\\n\")\n\nwinner = max(score, key=score.get)\nprint('\\nWinner algorithm is %s with a %f %% success' % (winner, score[winner]*100))\nprint(\"\\n\")\n\n# Make predictions on validation dataset\nclf = models[winner]\nclf.fit(X_train, Y_train)\n#score1 = clf.score(X_validation, Y_validation)\npredictions = clf.predict(X_validation)\nprint(accuracy_score(Y_validation, predictions))\nprint(classification_report(Y_validation, predictions))\nmt = confusion_matrix(Y_validation, predictions)\nprint(\"False positive rate : %f %%\" % ((mt[0][1] / float(sum(mt[0])))*100))\nprint('False negative rate : %f %%' % ( (mt[1][0] / float(sum(mt[1]))*100)))\n</code></pre>\n\n<p>My question is, anyone can see what I might be doing wrong, or what I could do better? As a side note, my data samples are fairly small at the moment (1000), however I am working to increase the size of my datasets at the moment.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The following link contains the data held in my .csv file (included above)</p>\n\n<p><a href=\"https://codeshare.io/5ZQkRe\" rel=\"nofollow noreferrer\">https://codeshare.io/5ZQkRe</a></p>\n"}, {"tags": ["python", "turtle-graphics", "attributeerror", "traceback", "canvasvg"], "comments": [{"owner": {"reputation": 6116, "user_id": 2162893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5SkG.jpg?s=128&g=1", "display_name": "AP.", "link": "https://stackoverflow.com/users/2162893/ap"}, "edited": false, "score": 0, "creation_date": 1495658673, "post_id": 44168079, "comment_id": 75352304, "body": "Avoid using images for Errors and code, as it makes it very hard to replicate your issue!"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 6116, "user_id": 2162893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5SkG.jpg?s=128&g=1", "display_name": "AP.", "link": "https://stackoverflow.com/users/2162893/ap"}, "edited": false, "score": 1, "creation_date": 1495665339, "post_id": 44168079, "comment_id": 75354926, "body": "@AP., I did an online OCR of the error messages and code and hand cleaned it up -- any typos are likely mine.  Mostly I was curious how well online OCR worked."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1495665205, "last_edit_date": 1495665205, "creation_date": 1495663375, "answer_id": 44169203, "question_id": 44168079, "link": "https://stackoverflow.com/questions/44168079/canvasvg-module-error/44169203#44169203", "title": "Canvasvg module error", "body": "<p>My guess is your issues come from these lines:</p>\n\n<pre><code>namesav = name + \".jpg\"\n\nts = turtle.getscreen().getcanvas()\n\ncanvasvg.saveall(ts, namesav)\n</code></pre>\n\n<p>I see two issues.  The first issue is the <code>saveall()</code> methods takes its arguments in the opposite order than you gave them:</p>\n\n<pre><code>saveall(filename, canvas, items=None, margin=10, tounicode=None)\n</code></pre>\n\n<p>The second issue is that you used the extension <code>\".jpg\"</code> when this code will be giving you back a <code>\".svg\"</code> file.  The canvasvg module is used to <a href=\"https://pypi.python.org/pypi/canvasvg/1.0.5\" rel=\"nofollow noreferrer\">Save Tkinter Canvas in SVG file</a></p>\n\n<p>Additionally, I believe one of your calls to <code>runChk()</code> is indented incorrectly.  The reworked code:</p>\n\n<pre><code>def saveImg():\n    print(\"Done.\")\n\n    save = input(\"Would you like to save this? Y/N: \")\n\n    if save.upper() == \"Y\":\n        Red.hideturtle()\n        Blue.hideturtle()\n        name = input(\"File Name: \")\n        namesav = name + \".svg\"\n        ts = turtle.getscreen().getcanvas()\n        canvasvg.saveall(namesav, ts)\n    elif save.upper() == \"N\":\n        def runChk():\n            runAgain = input(\"Would you like to run again? Y/N (N will Exit): \")\n\n            if runAgain.upper() == \"Y\":\n                print(\"Running\")\n                main()\n            elif runAgain.upper() == \"N\":\n                print(\"Exiting...\")\n                exit()\n            else:\n                print(\"Invalid response.\")\n                runChk()\n        runChk()\n    else:\n        print(\"Invalid Response.\")\n        saveImg()\n</code></pre>\n\n<p>I also have an issue with your recursive error handling but that's programming style and not something affecting your code's behavior.</p>\n"}], "owner": {"reputation": 1, "user_id": 8061631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a54e07726489007d7a585e58c43ecec?s=128&d=identicon&r=PG&f=1", "display_name": "JackZieBeast", "link": "https://stackoverflow.com/users/8061631/jackziebeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495665205, "creation_date": 1495658343, "last_edit_date": 1495664517, "question_id": 44168079, "link": "https://stackoverflow.com/questions/44168079/canvasvg-module-error", "title": "Canvasvg module error", "body": "<p>I'm writing code to save and combine images made with the turtle module, however when I go to save the image an error keeps appearing; I think in relation to the Canvasvg module itself? Could it have been installed incorrectly, and if so how can I do it correctly?</p>\n\n<p>Error code:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"D:\\Python Program\\lib\\idlelib\\run.py\", line 137, in main\n    seq, request = rpc.request_queue.get(block=True, timeout=0.05)\n  File \"D:\\Python Program\\lib\\queue.py\", line 172, in get\n    raise Empty\nqueue.Empty\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Python Program\\lib\\tkinter\\__init__.py\", line 1699, in __call__\n    return self.func(*args)\n  File \"D:\\Python Program\\lib\\turtle.py', line 686, in eventfun\n    fun()\n  File \"C:\\Users\\garla\\Desktop\\tst.py\", line 75, in saveImg\n    canvasvg.saveall(ts , namesav)\n  File \"D:\\Python Program\\lib\\canvasvg\\canvasvg.py', line 337, in saveall\n    for element in convert(doc, canvas, items, tounicode):\n  File \"D:\\Python Program\\lib\\canvasvg\\canvasvg.py\", line 84, in convert\n    tk = canvas.tk\nAttributeError: 'str' object has no attribute 'tk'\n</code></pre>\n\n<p>Here's the code which uses canvasvg :</p>\n\n<pre><code>def saveImg() :\n    print(\"Done.\")\n    save = input(\"Would you like to save this ? Y/N \\n\")\n    if save.upper() == \"Y\" :\n        Red.hideturtle()\n        Blue.hideturtle()\n        name = input(\"File Name :\")\n        namesav = name + \" .jpg\"\n        ts = turtle.getscreen() .getcanvas()\n        canvasvg.saveall(ts , namesav)\n    elif save.upper() == \"N\" :\n        def runChk() :\n            runAgain = input(\"Would you like to run again? Y?N (N will Exit)\")\n            if runAgain.upper() == \"Y\" :\n                print(\"Running\")\n                main()\n            elif runAgain.upper() == \"N\" :\n                print (\"Exiting...\")\n                exit()\n            else :\n                print(\"Invalid response.\")\n                runChk()\n            runChk()\n    else :\n        print(\"Invalid Response.\")\n        saveImg()\n</code></pre>\n\n<p>All help is appreciated. </p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1495658925, "post_id": 44168068, "comment_id": 75352411, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1495666689, "last_edit_date": 1495666689, "creation_date": 1495659241, "answer_id": 44168272, "question_id": 44168068, "link": "https://stackoverflow.com/questions/44168068/unboundlocalerror-local-variable-display-referenced-before-assignment-in-pyth/44168272#44168272", "title": "UnboundLocalError: local variable &#39;display&#39; referenced before assignment in python", "body": "<p>The problem appears to be here:</p>\n\n<pre><code>def set():\n    display = display + str(a)\n</code></pre>\n\n<p>Since you didn't declare <code>display</code> to be global, this is a local variable.  It's uninitialized.  I'm not 100% certain, since you didn't include the full error message, but this line will certainly elicit a fatal error.</p>\n\n<p>You can reference a global variable without the declaration, but you can't change its value.</p>\n\n<p>Note: you also have a definition problem with <code>a</code> in the <code>set</code> function: there's no such variable here.</p>\n"}], "owner": {"reputation": 17, "user_id": 7307959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c94ae96d2cc8f97650beb7f6ef75190?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Kanwar", "link": "https://stackoverflow.com/users/7307959/vishal-kanwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "closed_date": 1496053146, "answer_count": 1, "score": 0, "last_activity_date": 1495666991, "creation_date": 1495658282, "last_edit_date": 1495666991, "question_id": 44168068, "link": "https://stackoverflow.com/questions/44168068/unboundlocalerror-local-variable-display-referenced-before-assignment-in-pyth", "closed_reason": "Duplicate", "title": "UnboundLocalError: local variable &#39;display&#39; referenced before assignment in python", "body": "<p>I'm a beginner in python, and was trying to create a basic GUI calculator using Tkinter module. My code gives me an error UnboundLocalError: local variable 'display' referenced before assignment even when I've assigned the value to the variable in the beginning of the code. Here is my code, any help will be appriciated.</p>\n\n<pre><code>display = \"\"\nflag = 0\n\ndef set():\n    display = display + str(a)\n    if flag == 0:\n        calc1 = float(display)\n    elif flag == 1:\n        calc2 = float(display[len(str(calc1)) - 1:END])\n    label.config(text = display)\n    print (calc1)\n    print (calc2)\n    print (display)\n\ndef set0():\n    a=0\n    set()\n\n# similar functions for values 1-9\n\nset0()\n</code></pre>\n"}, {"tags": ["python", "django", "unit-testing", "django-testing"], "comments": [{"owner": {"reputation": 1230, "user_id": 1937033, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fcdbe.png?s=128&g=1", "display_name": "ThePhi", "link": "https://stackoverflow.com/users/1937033/thephi"}, "edited": false, "score": 0, "creation_date": 1540534461, "post_id": 44167970, "comment_id": 92908996, "body": "I&#39;ve got the same problem: <a href=\"https://stackoverflow.com/questions/52982653/anonymoususer-with-django-test-client-login\" title=\"anonymoususer with django test client login\">stackoverflow.com/questions/52982653/&hellip;</a> Did you find a solution for this since?"}], "answers": [{"comments": [{"owner": {"reputation": 8316, "user_id": 4759209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff821860933d0565fe62aed9fe2132f7?s=128&d=identicon&r=PG&f=1", "display_name": "farhawa", "link": "https://stackoverflow.com/users/4759209/farhawa"}, "edited": false, "score": 0, "creation_date": 1495665562, "post_id": 44168913, "comment_id": 75354977, "body": "Thank you for your answer @Alasdair but I got this error: <code>Save with update_fields did not affect any rows.</code>"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 8316, "user_id": 4759209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff821860933d0565fe62aed9fe2132f7?s=128&d=identicon&r=PG&f=1", "display_name": "farhawa", "link": "https://stackoverflow.com/users/4759209/farhawa"}, "edited": false, "score": 1, "creation_date": 1495668195, "post_id": 44168913, "comment_id": 75355731, "body": "I&#39;m not sure what would cause that error. It might be because you have used <code>__init__</code> instead of <code>setUp</code>. If changing that doesn&#39;t fix the problem, then you&#39;ll need to provide more info, including the full traceback."}, {"owner": {"reputation": 1230, "user_id": 1937033, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fcdbe.png?s=128&g=1", "display_name": "ThePhi", "link": "https://stackoverflow.com/users/1937033/thephi"}, "edited": false, "score": 0, "creation_date": 1540536441, "post_id": 44168913, "comment_id": 92909803, "body": "I&#39;ve got the same problem: <a href=\"https://stackoverflow.com/questions/52982653/anonymoususer-with-django-test-client-login\" title=\"anonymoususer with django test client login\">stackoverflow.com/questions/52982653/&hellip;</a> <code>force_login</code> instead of <code>login</code> gives the same result (with no errors whatsoever)"}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": false, "score": 1, "last_activity_date": 1495668004, "last_edit_date": 1495668004, "creation_date": 1495662020, "answer_id": 44168913, "question_id": 44167970, "link": "https://stackoverflow.com/questions/44167970/django-test-client-is-logged-in-but-passed-as-anonymoususer-in-views/44168913#44168913", "title": "Django test.Client is logged in but passed as AnonymousUser in views", "body": "<p>Firstly, there is no need to create a new client with <code>self.c = Client()</code> - just use <code>self.client</code>. You should not access the database in the <code>__init__</code> method. Instead, you should set the user in either the <code>setUp</code> or <a href=\"https://docs.djangoproject.com/en/1.11/topics/testing/tools/#django.test.Client.force_login\" rel=\"nofollow noreferrer\"><code>setupTestData</code></a>  method. </p>\n\n<pre><code>def setUp(self, *args, **kwargs):\n    self.user = MyCustomEmailUser.objects.all()[0]\n</code></pre>\n\n<p>If you want to check whether the client login worked, you should check the value of <code>self.client.login(...)</code>. There is no point checking <code>self.user.is_authenticated()</code>, because it will always return <code>True</code>.</p>\n\n<p>Your login in not working, because <code>self.user.password</code> is the hashed password, not the actual password. </p>\n\n<p>You can use <a href=\"https://docs.djangoproject.com/en/1.11/topics/testing/tools/#django.test.TestCase.setUpTestData\" rel=\"nofollow noreferrer\"><code>force_login</code></a> instead.</p>\n\n<pre><code>self.client.force_login(self.user)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "is_accepted": false, "score": 0, "last_activity_date": 1556343543, "creation_date": 1556343543, "answer_id": 55877610, "question_id": 44167970, "link": "https://stackoverflow.com/questions/44167970/django-test-client-is-logged-in-but-passed-as-anonymoususer-in-views/55877610#55877610", "title": "Django test.Client is logged in but passed as AnonymousUser in views", "body": "<p>Short version: \"It's your fixtures, maybe.\"</p>\n\n<hr>\n\n<p>Long version...</p>\n\n<p>I ran into this after upgrading to 1.11. Took me a minute to figure out, but when you upgrade versions, Django upgrades how many iterations the backend password hasher uses to test passwords. </p>\n\n<p>The result of this is that in your tests you may have a fixture with a line like:</p>\n\n<pre><code>\"password\": \"sha1$6efc0$f93efe9fd7542f25a7be94871ea45aa95de57161\",\n</code></pre>\n\n<p>And in your test you might have something like:</p>\n\n<pre><code>self.client.login(username='pandora', password='password')\n</code></pre>\n\n<p>Turns out that when you bumped your Django version and got those extra hashes, that old fixture no longer works because the new Django hashes the password provided by the test code more times than the value that you had in your fixture.</p>\n\n<p>The solution:</p>\n\n<ol>\n<li>On your dev machine, create a user with the password you want in your fixture.</li>\n<li>Find the admin page for that user.</li>\n<li>Copy that user into your fixture where it was failing. </li>\n</ol>\n\n<p>Alternatively, here's a hashed value you can use in your fixtures that works for the password \"password\":</p>\n\n<pre><code>\"password\": \"pbkdf2_sha256$36000$OIQCpvIXZil8$y7qUtb3Y0imzu1ATn4vQZeVtu7MuPg0zUqX5oBUL2zM=\",\n</code></pre>\n\n<p>Fun stuff. Sorry, not fun. Dumb.</p>\n"}], "owner": {"reputation": 8316, "user_id": 4759209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff821860933d0565fe62aed9fe2132f7?s=128&d=identicon&r=PG&f=1", "display_name": "farhawa", "link": "https://stackoverflow.com/users/4759209/farhawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1336, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1556343543, "creation_date": 1495657897, "question_id": 44167970, "link": "https://stackoverflow.com/questions/44167970/django-test-client-is-logged-in-but-passed-as-anonymoususer-in-views", "title": "Django test.Client is logged in but passed as AnonymousUser in views", "body": "<p>I have a weird problem here...</p>\n\n<p>I am trying to test a @login_required views so I wrote this code:</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.test import TestCase\nfrom django.test import Client\nfrom .models import SiteEcommerce\nfrom .models import Client as TestDbClient\nfrom .models import MyCustomEmailUser\n\n\nclass DataBaseTestCase(TestCase):\n    def __init__(self, *args, **kwargs):\n        super(DataBaseTestCase, self).__init__(*args, **kwargs)\n        self.c = Client()  # instantiate the Django test client\n        self.user = MyCustomEmailUser.objects.all()[0]\n\n    def test_method(self):\n        \"\"\"\n        Test of the settings page.\n        \"\"\"\n        self.c.login(username=self.user.email, password=self.user.password)\n        print self.user.is_authenticated()\n        response = self.client.get('/main/settings/%s' % self.website.idsite)\n        self.assertEqual(response.status_code, 200)\n</code></pre>\n\n<p>The view called <code>settings_view</code> where I am printing the <code>request.user</code></p>\n\n<p>The problem is that in the test <code>print self.user.is_authenticated()</code> give <code>True</code> BUT the <code>request.user</code> in the view return <code>AnonymousUser</code></p>\n"}, {"tags": ["python", "excel"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495658149, "post_id": 44167972, "comment_id": 75352066, "body": "I am new to python. Could you please let me know more about row, col indexes. or any example i could refer to."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495658192, "post_id": 44167972, "comment_id": 75352088, "body": "@Santosh sure, I&#39;ve linked the method documentation that explains how to use the method and the meaning of the arguments."}, {"owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495658448, "post_id": 44167972, "comment_id": 75352204, "body": "Thanks. It worked! But need to write a whole set of records. So i think i need to put them in a loop."}, {"owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495658900, "post_id": 44167972, "comment_id": 75352403, "body": "When i tried to print &quot;record&quot; it gave me a whole set of records. But its writing only one record to the file. What else is missing? Please let me know"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495658961, "post_id": 44167972, "comment_id": 75352423, "body": "@Santosh make sure you write records in a loop. If you have further difficulties, don&#39;t hesitate to ask in a separate question. Thanks!"}, {"owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "edited": false, "score": 0, "creation_date": 1495730654, "post_id": 44167972, "comment_id": 75385174, "body": "Thanks. I added a new question. Please look into it."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 0, "last_activity_date": 1495657900, "creation_date": 1495657900, "answer_id": 44167972, "question_id": 44167920, "link": "https://stackoverflow.com/questions/44167920/python-attributeerror-str-object-has-no-attribute-font/44167972#44167972", "title": "Python: AttributeError: &#39;str&#39; object has no attribute &#39;font&#39;", "body": "<p>You are not using <a href=\"http://xlwt.readthedocs.io/en/latest/api.html#xlwt.Worksheet.Worksheet.write\" rel=\"nofollow noreferrer\"><code>.write()</code></a> method correctly. Provide row and column indexes followed by the data you want to write into a cell:</p>\n\n<pre><code>record = (Image, Name, Width)\n\nfor col_index, item in enumerate(record):\n    sheet1.write(i, col_index, item)\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3349, "favorite_count": 0, "accepted_answer_id": 44167972, "answer_count": 1, "score": 0, "last_activity_date": 1495657900, "creation_date": 1495657665, "question_id": 44167920, "link": "https://stackoverflow.com/questions/44167920/python-attributeerror-str-object-has-no-attribute-font", "title": "Python: AttributeError: &#39;str&#39; object has no attribute &#39;font&#39;", "body": "<p>I am using the following code to write to an excel file. Please correct me.\nI am parsing an HTML page in this context. My aim is to find the table elements and write it into columns.</p>\n\n<pre><code>for row in table.findAll('tr', { \"class\" : \"product-row\" }):\ncol = row.findAll('td')\n\ni=1\nImage = col[0].a.img['src']\nName = col[1].a.text\nWidth = col[3].text\n\nrecord = (Image,Name,Width)\n\nbook = xlwt.Workbook(encoding=\"utf-8\")\nsheet1 = book.add_sheet(\"Sheet 1\")\n\nsheet1.write(i, Image, Name, Width)\n\nbook.save(\"trial.xls\")\n</code></pre>\n\n<p>It shows the following error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-179-1d146cb8794d&gt; in &lt;module&gt;()\n     14     sheet1 = book.add_sheet(\"Sheet 1\")\n     15 \n---&gt; 16     sheet1.write(i, Image, Name, Width)\n     17 \n     18     book.save(\"trial.xls\")\n\nC:\\Users\\Santosh\\Anaconda3\\lib\\site-packages\\xlwt\\Worksheet.py in \nwrite(self, r, c, label, style)\n   1086            :class:`~xlwt.Style.XFStyle` object.\n   1087         \"\"\"\n-&gt; 1088         self.row(r).write(c, label, style)\n   1089 \n   1090     def write_rich_text(self, r, c, rich_text_list, \nstyle=Style.default_style):\n\nC:\\Users\\Santosh\\Anaconda3\\lib\\site-packages\\xlwt\\Row.py in write(self, col, \nlabel, style)\n    233 \n    234     def write(self, col, label, style=Style.default_style):\n--&gt; 235         self.__adjust_height(style)\n    236         self.__adjust_bound_col_idx(col)\n    237         style_index = self.__parent_wb.add_style(style)\n\nC:\\Users\\Santosh\\Anaconda3\\lib\\site-packages\\xlwt\\Row.py in \n__adjust_height(self, style)\n     63 \n     64     def __adjust_height(self, style):\n---&gt; 65         twips = style.font.height\n     66         points = float(twips)/20.0\n     67         # Cell height in pixels can be calcuted by following approx. \nformula:\n\nAttributeError: 'str' object has no attribute 'font\n</code></pre>\n"}, {"tags": ["python", "graph", "visualization", "bokeh", "chord-diagram"], "answers": [{"tags": [], "owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "is_accepted": true, "score": 0, "last_activity_date": 1495882017, "last_edit_date": 1495882017, "creation_date": 1495881580, "answer_id": 44215840, "question_id": 44167907, "link": "https://stackoverflow.com/questions/44167907/change-palette-for-chord-diagram-in-bokeh/44215840#44215840", "title": "Change palette for Chord Diagram in Bokeh", "body": "<p>Chord doesn't use palette, it use color wheel like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jPUq2.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jPUq2.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11084712, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/4ac918fa051a7fb83164d4843c419e30?s=128&d=identicon&r=PG", "display_name": "solaris9", "link": "https://stackoverflow.com/users/11084712/solaris9"}, "is_accepted": false, "score": 0, "last_activity_date": 1550594273, "last_edit_date": 1550594273, "creation_date": 1550585409, "answer_id": 54768227, "question_id": 44167907, "link": "https://stackoverflow.com/questions/44167907/change-palette-for-chord-diagram-in-bokeh/54768227#54768227", "title": "Change palette for Chord Diagram in Bokeh", "body": "<p>The accepted answer is a bit outdated as <code>bokeh.charts</code> has been deprecated (<a href=\"https://stackoverflow.com/questions/48170086/what-to-use-instead-of-bokeh-charts\">What to use instead of bokeh.charts</a>), instead you can use Holoviews which use colormaps, as described here: <a href=\"http://holoviews.org/user_guide/Colormaps.html\" rel=\"nofollow noreferrer\">http://holoviews.org/user_guide/Colormaps.html</a></p>\n"}], "owner": {"reputation": 533, "user_id": 5705270, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/SMqJC.jpg?s=128&g=1", "display_name": "Flow Nuwen", "link": "https://stackoverflow.com/users/5705270/flow-nuwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 44215840, "answer_count": 2, "score": 0, "last_activity_date": 1550594273, "creation_date": 1495657646, "last_edit_date": 1495661261, "question_id": 44167907, "link": "https://stackoverflow.com/questions/44167907/change-palette-for-chord-diagram-in-bokeh", "title": "Change palette for Chord Diagram in Bokeh", "body": "<p>I am using the Bokeh library to generate a chord diagram. The diagram itself generates more-or-less just fine, but I'm having difficulty figuring out how to change the palette. As far as I can gather, most charts in Bokeh can have an optional <code>palette</code> argument, but adding this doesn't change the palette. Am I missing something? </p>\n\n<pre><code>import bokeh\nfrom bokeh.charts import Chord\nfrom bokeh.io import show, output_file\nfrom bokeh.palettes import inferno\n\nchord_diagram = Chord(forchord, source='nameA', target='nameB', palette= inferno(256))\nshow(chord_diagram)\n</code></pre>\n\n<p>If some data would help:</p>\n\n<pre><code>nameA_lst = ['Creb5','Creb5','JDP2(var.2)','JDP2(var.2)',\n             'Creb5','JDP2(var.2)','ATF7','ATF','ATF7','Creb5']\nnameB_lst = ['STAT3','STAT1','STAT3','STAT1','Stat4',\n             'Stat4','STAT3','STAT1','Stat4','Stat5a::Stat5b']\nforchord = pd.DataFrame({'nameA': nameA_lst, 'nameB': nameB_lst})\nforchord.head()\n    nameA   nameB\n0   Creb5   STAT3\n1   Creb5   STAT1\n2   JDP2(var.2) STAT3\n3   JDP2(var.2) STAT1\n4   Creb5   Stat4\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "edited": false, "score": 0, "creation_date": 1495657692, "post_id": 44167881, "comment_id": 75351871, "body": "Thanks much! It worked!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1495657564, "creation_date": 1495657564, "answer_id": 44167881, "question_id": 44167842, "link": "https://stackoverflow.com/questions/44167842/how-can-i-run-python-script-as-linux-command/44167881#44167881", "title": "How can I run python script as linux command", "body": "<p>Yes, rename it to <code>/usr/bin/doxypy</code></p>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "is_accepted": false, "score": 1, "last_activity_date": 1495657642, "creation_date": 1495657642, "answer_id": 44167906, "question_id": 44167842, "link": "https://stackoverflow.com/questions/44167842/how-can-i-run-python-script-as-linux-command/44167906#44167906", "title": "How can I run python script as linux command", "body": "<p>Rename the file to <code>doxpy</code> and put it in a folder of <code>$PATH</code>, e.g. <code>/usr/bin</code></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "edited": false, "score": 0, "creation_date": 1495658689, "post_id": 44167912, "comment_id": 75352310, "body": "Thanks for the correction! Appreciate your answer."}], "tags": [], "owner": {"reputation": 3747, "user_id": 2597213, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8e7907344803baaa139d4beeb43bf92b?s=128&d=identicon&r=PG", "display_name": "efirvida", "link": "https://stackoverflow.com/users/2597213/efirvida"}, "is_accepted": false, "score": 1, "last_activity_date": 1495658282, "last_edit_date": 1495658282, "creation_date": 1495657648, "answer_id": 44167912, "question_id": 44167842, "link": "https://stackoverflow.com/questions/44167842/how-can-i-run-python-script-as-linux-command/44167912#44167912", "title": "How can I run python script as linux command", "body": "<p>remove the <strong>.py</strong> in the name and add this in the first line of the file</p>\n\n<pre><code>#!/usr/bin/env python\n</code></pre>\n\n<p>then give the run permission with</p>\n\n<pre><code>sudo chmod +x /usr/bin/doxypy\n</code></pre>\n\n<p>Its not a good practice, give all permissions to a file because any user can edit it, so just add the execution access right</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "closed_date": 1495657768, "accepted_answer_id": 44167881, "answer_count": 3, "score": 2, "last_activity_date": 1495658282, "creation_date": 1495657457, "question_id": 44167842, "link": "https://stackoverflow.com/questions/44167842/how-can-i-run-python-script-as-linux-command", "closed_reason": "Duplicate", "title": "How can I run python script as linux command", "body": "<p>I have a python script: <code>/usr/bin/doxypy.py</code></p>\n\n<p>I have added <code>#!/usr/local/bin/python</code> as first line and given full permission to script with <code>chmod 777 /usr/bin/doxypy.py</code>.</p>\n\n<p>If I want to run it as a linux command, let's say, I want to run it with only <code>doxypy</code>, is there any way to achieve this?</p>\n"}, {"tags": ["python", "django", "string", "url", "django-templates"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1495657650, "post_id": 44167813, "comment_id": 75351843, "body": "Try <code>if logout in request.GET</code>, it it does not work try to add a value to the logout parameter (<code>?logout=1</code>) and then <code>if request.GET.logout</code> in the template. The <code>request</code> object should be available if the view uses a RequestContext (default if you are calling <code>render</code> or inheriting from a class based view)"}, {"owner": {"reputation": 137, "user_id": 8041521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af4857d4cc38145f3d4b8839a771fd9b?s=128&d=identicon&r=PG&f=1", "display_name": "iFengo", "link": "https://stackoverflow.com/users/8041521/ifengo"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1495658225, "post_id": 44167813, "comment_id": 75352105, "body": "The latter worked, thanks!"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1495659925, "post_id": 44167813, "comment_id": 75352908, "body": "Django has this functionality built in. It&#39;s called &quot;messenges&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "is_accepted": false, "score": 0, "last_activity_date": 1495658541, "last_edit_date": 1495658541, "creation_date": 1495658215, "answer_id": 44168046, "question_id": 44167813, "link": "https://stackoverflow.com/questions/44167813/django-checking-for-a-query-string/44168046#44168046", "title": "Django checking for a query string", "body": "<p>Referring to <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/default/\" rel=\"nofollow noreferrer\">this document</a>, I believe what you are looking for is this</p>\n\n<pre><code>{% if not request.user.is_authenticated %}\n    &lt;p&gt;You are logged out!&lt;/p&gt;\n{% endif %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 7625715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBK2m.jpg?s=128&g=1", "display_name": "Paul Andrei", "link": "https://stackoverflow.com/users/7625715/paul-andrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1495658254, "creation_date": 1495658254, "answer_id": 44168055, "question_id": 44167813, "link": "https://stackoverflow.com/questions/44167813/django-checking-for-a-query-string/44168055#44168055", "title": "Django checking for a query string", "body": "<p>Well, you can simply use the built-in Django messaging feature!</p>\n\n<p>Here's a simple example:</p>\n\n<pre><code># views.py\n\nfrom django.contrib import messages\n\ndef register(request):\n  # Logic\n  # ...\n\n  messages.success(request, 'Registered successfully!')\n\n  # ...\n  # More logic\n</code></pre>\n\n<p>-</p>\n\n<pre><code># example.html\n{% if messages %}\n  &lt;ul class=\"messages\"&gt;\n    {% for message in messages %}\n      &lt;li class=\"{{ message.tags }}\"&gt;\n        {{ message|safe }}\n          &lt;a href=\"\" class=\"close\"&gt;X&lt;/a&gt;\n      &lt;/li&gt;\n    {% endfor %}\n  &lt;/ul&gt;\n{% endif %}\n</code></pre>\n\n<p>There's a more in-depth documentation available on Django's official docs website: <a href=\"https://docs.djangoproject.com/en/1.11/ref/contrib/messages/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.11/ref/contrib/messages/</a></p>\n"}], "owner": {"reputation": 137, "user_id": 8041521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af4857d4cc38145f3d4b8839a771fd9b?s=128&d=identicon&r=PG&f=1", "display_name": "iFengo", "link": "https://stackoverflow.com/users/8041521/ifengo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495658541, "creation_date": 1495657357, "question_id": 44167813, "link": "https://stackoverflow.com/questions/44167813/django-checking-for-a-query-string", "title": "Django checking for a query string", "body": "<p>When someone clicks on my site's logout link, I want them to be redirected to the login page but I want a message to pop up saying that they were successfully logged out. However, I don't want this behaviour to occur when someone normally visits the login page.</p>\n\n<p>I decided to pass in a query string so now when someone hits logout they are redirected to <code>users/login/?logout</code>. How can I check for this in my template though? I want to do something like:</p>\n\n<pre><code>{% if ______ %}\n*Message box appears*\n{% endif %}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 2, "creation_date": 1495657586, "post_id": 44167801, "comment_id": 75351812, "body": "Why do you want to use processes instead of threads?"}, {"owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1495657864, "post_id": 44167801, "comment_id": 75351932, "body": "I agree with @Blender. Processes are best when you are doing many calculations, and threading for sharing information between threads and handling I/O. <a href=\"https://stackoverflow.com/questions/3044580/multiprocessing-vs-threading-python\">Here</a> is a pretty good explanation"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8050195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0eef0cd829733d802b2dd48cb445ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Sir_Arag0n", "link": "https://stackoverflow.com/users/8050195/sir-arag0n"}, "edited": false, "score": 0, "creation_date": 1495720934, "post_id": 44168223, "comment_id": 75378932, "body": "Thanks a lot! I know my code is very sloppy, but i didnt have the testing code i wrote on hand, so i just threw together everything i still had in my mind. But anyway thanks a lot for your reply, and i think ill switch over to threading."}], "tags": [], "owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "is_accepted": true, "score": 0, "last_activity_date": 1495659051, "creation_date": 1495659051, "answer_id": 44168223, "question_id": 44167801, "link": "https://stackoverflow.com/questions/44167801/create-reference-to-a-process-in-python/44168223#44168223", "title": "Create reference to a process in Python", "body": "<p>I left a comment on why I think you should use the Threading module instead of Multiprocessing, but if you want to stick to multiprocessing here is what I think your problem is:\nFirst of all, you should switch up the variable names so that they're not the same as your class.</p>\n\n<pre><code>bot_process = botProcess()\n</code></pre>\n\n<p>Using good variable names not only helps other people read your code, but also avoids any unexpected run time and syntax errors.\nSecond, doing this:</p>\n\n<pre><code>botProcess = botProcess()\nguiProcess = guiProcess()\nbotProcess.guiProcess = guiProcess\nguiProcess.botProcess = botProcess\n\nbotProcess = botProcess()\nguiProcess = guiProcess()\nbotProcess.guiProcess = guiProcess\nguiProcess.botProcess = botProcess\n</code></pre>\n\n<p>Is redundant. You're just assigning the same variables to the same things twice.</p>\n\n<p>Third, and probably what you actually want is that what you have in your classes are not members which is what you probably intended. Here is what you should have: </p>\n\n<pre><code>class guiProcess(multiprocessing.Process):\n\n    def __init__(self):\n        self.other_bot_process = None\n\n    def run(self):\n        # Display GUI\n        self.other_bot_process.someOtherMethod();\n</code></pre>\n\n<p>(likewise in the other class)\nThen in your main file:</p>\n\n<pre><code>bot_process = botProcess()\ngui_process = guiProcess()\nbot_process.other_gui_process = gui_process\ngui_process.other_bot_process = bot_process\n</code></pre>\n\n<p>Now, other_gui_process and other_bot_process are members of the class and instances of them can be accessed. Before they were just local variables which were only usable inside of the class where they were defined. </p>\n"}], "owner": {"reputation": 13, "user_id": 8050195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0eef0cd829733d802b2dd48cb445ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Sir_Arag0n", "link": "https://stackoverflow.com/users/8050195/sir-arag0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 44168223, "answer_count": 1, "score": 1, "last_activity_date": 1495659051, "creation_date": 1495657302, "question_id": 44167801, "link": "https://stackoverflow.com/questions/44167801/create-reference-to-a-process-in-python", "title": "Create reference to a process in Python", "body": "<p>Im planning to create a chatbot for Twitch.tv in Python. Id like to use multiple processes for the different main functionalities (one for the bot itself, and one for the GUI). Every process should have a reference to the other processes in form of a variable inside them. I havent started coding the bot itself, but i tested the multiprocessing with a small example. </p>\n\n<p>Main file:</p>\n\n<pre><code>from BotProcess import botProcess\nfrom GuiProcess import guiProcess\n\nbotProcess = botProcess()\nguiProcess = guiProcess()\nbotProcess.guiProcess = guiProcess\nguiProcess.botProcess = botProcess\n\nbotProcess = botProcess()\nguiProcess = guiProcess()\nbotProcess.guiProcess = guiProcess\nguiProcess.botProcess = botProcess\n\nbotProcess.start()\nguiProcess.start()\n</code></pre>\n\n<p>BotProcess file:</p>\n\n<pre><code>class botProcess(multiprocessing.Process):\n\n    guiProcess = \"\"\n\n    def run(self):\n        # Run Bot\n\n    def someOtherMethod(self):\n        # doSomething\n</code></pre>\n\n<p>GuiProcess file:</p>\n\n<pre><code>class guiProcess(multiprocessing.Process):\n\n    botProcess = \"\"\n\n    def run(self):\n        # Display GUI\n        botProcess.someOtherMethod();\n</code></pre>\n\n<p>Everytime i try to run a method on another process i get this error message:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'someOtherMethod'\n</code></pre>\n\n<p>Is there an easy way to fix this? Or should i just try something else (for example Threading) instead of Multiprocessing? </p>\n"}, {"tags": ["python", "parent-child", "python-multiprocessing", "multiprocessing-manager"], "comments": [{"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1495658314, "post_id": 44167790, "comment_id": 75352143, "body": "Could you make your simplified version of your code actually run and reproduce the problem?   That would be helpful."}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1495658806, "post_id": 44167790, "comment_id": 75352367, "body": "At least <code>fd = open(file)</code> seems to be wrong. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be preferable."}, {"owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "edited": false, "score": 0, "creation_date": 1495661041, "post_id": 44167790, "comment_id": 75353401, "body": "Yeah I&#39;ll try to make a more working version."}, {"owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "edited": false, "score": 0, "creation_date": 1495662024, "post_id": 44167790, "comment_id": 75353817, "body": "Unfortunately, I don&#39;t think I can make a complete verifiable example because this error occurs rarely."}, {"owner": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "edited": false, "score": 0, "creation_date": 1495662886, "post_id": 44167790, "comment_id": 75354143, "body": "Hmm, but you could make a version that could be run, right? Because this seems to be missing some details, and it might be there where your possible error source is. So just make an example, that produces the &quot;bad&quot; result for you. And we could potentially run it on our own videos."}, {"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1495662899, "post_id": 44167790, "comment_id": 75354147, "body": "Can you find out the process state when you see that he&#39;s iddle? (ps command). To know if it&#39;s a zombie or what."}, {"owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "edited": false, "score": 0, "creation_date": 1495663685, "post_id": 44167790, "comment_id": 75354393, "body": "The process state is not zombie. It is &quot;Sl&quot;"}, {"owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "edited": false, "score": 0, "creation_date": 1495735033, "post_id": 44167790, "comment_id": 75387541, "body": "The code should be working, but I can&#39;t seem to find a file that breaks it for now. Will update when I find one."}, {"owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "edited": false, "score": 0, "creation_date": 1495824713, "post_id": 44167790, "comment_id": 75429264, "body": "I have determined that the crash is not determined by the video. I ran it on a video and it idled, then ran it again at a later time and it worked...I&#39;m honestly pretty lost right now."}], "owner": {"reputation": 53, "user_id": 4849090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---3RDYYdHT8/AAAAAAAAAAI/AAAAAAAAAMI/85ciswGOPKI/photo.jpg?sz=128", "display_name": "Nytrox", "link": "https://stackoverflow.com/users/4849090/nytrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495666302, "creation_date": 1495657272, "last_edit_date": 1495666302, "question_id": 44167790, "link": "https://stackoverflow.com/questions/44167790/python-multiprocessing-process-causes-parent-to-idle", "title": "Python Multiprocessing Process causes Parent to idle", "body": "<p>My question is very similar to <a href=\"https://stackoverflow.com/questions/15536295/python-multiprocessing-process-crashes-silently\">this question here</a>, except the solution with catching didn't quite work for me.</p>\n\n<p>Problem: I'm using multiprocessing to handle a file in parallel. Around 97%, it works. However, sometimes, the parent process will idle forever and CPU usage shows 0.</p>\n\n<p>Here is a simplified version of my code</p>\n\n<pre><code>from PIL import Image\nimport imageio\nfrom multiprocessing import Process, Manager\n\ndef split_ranges(min_n, max_n, chunks=4):\n    chunksize = ((max_n - min_n) / chunks) + 1\n    return [range(x, min(max_n-1, x+chunksize)) for x in range(min_n, max_n, chunksize)]\n\ndef handle_file(file_list, vid, main_array):\n    for index in file_list:\n        try:\n            #Do Stuff\n            valid_frame = Image.fromarray(vid.get_data(index))\n            main_array[index] = 1\n        except:\n            main_array[index] = 0\n\ndef main(file_path):\n    mp_manager = Manager()\n    vid = imageio.get_reader(file_path, 'ffmpeg')\n    num_frames = vid._meta['nframes'] - 1\n\n    list_collector = mp_manager.list(range(num_frames)) #initialize a list as the size of number of frames in the video\n\n    total_list = split_ranges(10, min(200, num_frames), 4) #some arbitrary numbers between 0 and num_frames of video\n\n    processes = []\n    file_readers = []\n\n    for split_list in total_list:\n        video = imageio.get_reader(file_path, 'ffmpeg')\n        proc = Process(target=handle_file, args=(split_list, video, list_collector))\n        print \"Started Process\" #Always gets printed\n        proc.Daemon = False\n        proc.start()\n        processes.append(proc)\n        file_readers.append(video)\n\n    for i, proc in enumerate(processes):\n        proc.join()\n        print \"Join Process \" + str(i) #Doesn't get printed\n        fd = file_readers[i]\n        fd.close()\n\n    return list_collector\n</code></pre>\n\n<p>The issue is that I can see the processes starting and I can see that all of the items are being handled. However, sometimes, the processes don't rejoin. When I check back, only the parent process is there but it's idling as if it's waiting for something. None of the child processes are there, but I don't think join is called because my print statement doesn't show up.</p>\n\n<p>My hypothesis is that this happens to videos with a lot of broken frames. However, it's a bit hard to reproduce this error because it rarely occurs.</p>\n\n<p><strong>EDIT:</strong> Code should be valid now. Trying to find a file that can reproduce this error.</p>\n"}, {"tags": ["python", "python-2.7", "mmap", "dbm"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1495657649, "post_id": 44167764, "comment_id": 75351840, "body": "are you on python 2.7?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1495658876, "post_id": 44167764, "comment_id": 75352393, "body": "@RomanPerekhrest: yes"}, {"owner": {"reputation": 983, "user_id": 7018504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268a8a29fca7ea8527389dbbaf562587?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Haible", "link": "https://stackoverflow.com/users/7018504/bruno-haible"}, "edited": false, "score": 0, "creation_date": 1495749147, "post_id": 44167764, "comment_id": 75394674, "body": "munmap by itself should be fast, since the VMAs in the kernel are managed in a red-black tree. An easy way to understand what the process is doing is to use the &quot;poor man&#39;s profiler&quot;: Attach gdb while it is running, and use the <code>where</code> command to see the stack trace. Then <code>detach</code> it again. Do this 10 times."}], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495744439, "creation_date": 1495657178, "last_edit_date": 1495744439, "question_id": 44167764, "link": "https://stackoverflow.com/questions/44167764/process-takes-a-long-time-to-terminate-stuck-in-a-stream-of-munmap", "title": "Process takes a long time to terminate, stuck in a stream of munmap", "body": "<p>I have a Python 2.7 process (started by <code>cron</code>) on a Linux box that takes a <em>very</em> long time (10s of <em>minutes</em>) to terminate.\nWhile it is running, it uses a lot of memory (25GB) and it appears to take a lot of time releasing it.</p>\n\n<p><code>strace</code> reports an endless stream of</p>\n\n<pre><code>munmap(0x7fd5cd411000, 262144)          = 0\nmunmap(0x7fd5cb5d1000, 262144)          = 0\nmunmap(0x7fd5cb591000, 262144)          = 0\nmunmap(0x7fd5cb611000, 262144)          = 0\nmunmap(0x7fd5cb551000, 262144)          = 0\nmunmap(0x7fd5ccb11000, 262144)          = 0\nmunmap(0x7fd5cc991000, 262144)          = 0\nmunmap(0x7fd5cc951000, 262144)          = 0\nmunmap(0x7fd5cc591000, 262144)          = 0\nmunmap(0x7fd5ccb91000, 262144)          = 0\nmunmap(0x7fd5ccb51000, 262144)          = 0\nmunmap(0x7fd5cc291000, 262144)          = 0\nmunmap(0x7fd5cc251000, 262144)          = 0\nmunmap(0x7fd5cc211000, 262144)          = 0\nmunmap(0x7fd5cc1d1000, 262144)          = 0\nmunmap(0x7fd5cda11000, 262144)          = 0\nmunmap(0x7fd5cd111000, 262144)          = 0\nmunmap(0x7fd5cd0d1000, 262144)          = 0\nmunmap(0x7fd5cc4d1000, 262144)          = 0\nmunmap(0x7fd5cc411000, 262144)          = 0\nmunmap(0x7fd5cc151000, 262144)          = 0\nmunmap(0x7fd5cc091000, 262144)          = 0\nmunmap(0x7fd5cb911000, 262144)          = 0\nmunmap(0x7fd5cb8d1000, 262144)          = 0\nmunmap(0x7fd5cb891000, 262144)          = 0\nmunmap(0x7fd5cb451000, 262144)          = 0\nmunmap(0x7fd5cb391000, 262144)          = 0\nmunmap(0x7fd5cb3d1000, 262144)          = 0\nmunmap(0x7fd5cb351000, 262144)          = 0\nmunmap(0x7fd5cd5d1000, 262144)          = 0\n</code></pre>\n\n<p><code>ltrace</code> reports nothing.</p>\n\n<p>While it was alive, it used a GDBM database, but have been closed long ago. The open file descriptors are:</p>\n\n<pre><code>0 lr-x------ 1 sds sds 64 May 24 20:05 0 -&gt; pipe:[36989242]\n0 l-wx------ 1 sds sds 64 May 24 20:05 1 -&gt; pipe:[36989243]\n0 l-wx------ 1 sds sds 64 May 24 20:05 2 -&gt; pipe:[36989243]\n0 l-wx------ 1 sds sds 64 May 24 20:05 3 -&gt; /home/sds/my/path/file.log\n0 lr-x------ 1 sds sds 64 May 24 20:05 9 -&gt; /dev/urandom\n</code></pre>\n\n<p>It will not write anything to the log file.</p>\n\n<p>What is going on here? Is that an artifact of <a href=\"https://stackoverflow.com/q/15455048/850781\">Python GC</a>? GDBM?</p>\n\n<p>Is there anything I can do (besides <code>kill</code>)?</p>\n"}, {"tags": ["c#", "python", "sorting"], "comments": [{"owner": {"reputation": 14263, "user_id": 1255873, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dZChN.jpg?s=128&g=1", "display_name": "Abion47", "link": "https://stackoverflow.com/users/1255873/abion47"}, "edited": false, "score": 3, "creation_date": 1495657217, "post_id": 44167728, "comment_id": 75351630, "body": "Solve your homework with a <a href=\"https://www.toptal.com/developers/sorting-algorithms/bubble-sort\" rel=\"nofollow noreferrer\">Bubble Sort</a> or <a href=\"https://www.toptal.com/developers/sorting-algorithms/insertion-sort\" rel=\"nofollow noreferrer\">Insertion Sort</a>."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1495658188, "post_id": 44167728, "comment_id": 75352083, "body": "Is it guaranteed that the items in your array implement the <code>IComparable</code> interface?"}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1495659316, "post_id": 44167728, "comment_id": 75352588, "body": "Is this a C# or a python question? Don&#39;t tag spam. Also, this question really has no place being on SO. We don&#39;t enable laziness by doing homework for people."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1495659938, "post_id": 44167728, "comment_id": 75352916, "body": "...and while &quot;laziness&quot; may sound derogatory, it really means we want you to actually <i>learn</i> something, and become the best you can be, which won&#39;t happen if you don&#39;t try some things yourself first. Then come back here when you get stuck and you&#39;ll be greeted with open arms."}], "answers": [{"comments": [{"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1495659766, "post_id": 44167849, "comment_id": 75352835, "body": "Technically, I don&#39;t think Quicksort meets the &quot;only using swap operations&quot; requirement."}], "tags": [], "owner": {"reputation": 212, "user_id": 6500489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-V4ZlLB9qjbE/AAAAAAAAAAI/AAAAAAAABPc/DPGoAr399R8/photo.jpg?sz=128", "display_name": "umnikos", "link": "https://stackoverflow.com/users/6500489/umnikos"}, "is_accepted": false, "score": 0, "last_activity_date": 1495657783, "last_edit_date": 1495657783, "creation_date": 1495657468, "answer_id": 44167849, "question_id": 44167728, "link": "https://stackoverflow.com/questions/44167728/sort-a-list-by-only-the-swapping-of-its-elements/44167849#44167849", "title": "Sort a list by only the swapping of it&#39;s elements", "body": "<p>What you're searching for is a sorting algorithm. </p>\n\n<p><a href=\"https://brilliant.org/wiki/sorting-algorithms/\" rel=\"nofollow noreferrer\">https://brilliant.org/wiki/sorting-algorithms/</a></p>\n\n<p>A good one is \"QuickSort\" combined with a simpler sorting algorithm like \"BubbleSort\"</p>\n\n<p>Ted-Ed also have a good video on the topic:\n<a href=\"https://www.youtube.com/watch?v=WaNLJf8xzC4\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=WaNLJf8xzC4</a></p>\n"}, {"tags": [], "owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1495661197, "creation_date": 1495661197, "answer_id": 44168727, "question_id": 44167728, "link": "https://stackoverflow.com/questions/44167728/sort-a-list-by-only-the-swapping-of-its-elements/44168727#44168727", "title": "Sort a list by only the swapping of it&#39;s elements", "body": "<p>Probably the best way to find the answer to this question is to open your favorite search engine and put the title to your question there. You will find many results, including:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm\" rel=\"nofollow noreferrer\">Sorting algorithm - Wikipedia</a> (which includes a section on <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm#Popular_sorting_algorithms\" rel=\"nofollow noreferrer\">Popular sorting algorithms</a>)</li>\n<li><a href=\"http://anh.cs.luc.edu/170/notes/CSharpHtml/sorting.html\" rel=\"nofollow noreferrer\">10.4. Sorting Algorithms - Introductory Programming in C#</a></li>\n</ul>\n\n<p>Read through these and find the algorithms that only use the swapping of elements to do the sorting (since that is your requirement). You can also read about the performance of the algorithms as well (since that was another part of the requirement). </p>\n\n<p>Note that some will perform faster than others depending on how large and how sorted the array is.</p>\n\n<hr>\n\n<p>Another way to figure this out is to ask yourself, \"What do the professionals do?\". Which will likely lead you to reading the documentation for the <a href=\"https://msdn.microsoft.com/en-us/library/6tf1f0bc(v=vs.110).aspx\" rel=\"nofollow noreferrer\">Array.Sort Method</a>, which is the built-in mechanism that most of us use if we need to quickly sort an array. Here you will find the following information:</p>\n\n<blockquote>\n  <p><strong>Remarks</strong></p>\n  \n  <blockquote>\n    <p>This method uses the introspective sort (introsort) algorithm as follows: </p>\n    \n    <ul>\n    <li>If the partition size is fewer than 16 elements, it uses an <a href=\"http://en.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\">insertion sort</a> algorithm. </li>\n    <li>If the number of partitions exceeds 2 * LogN, where N is the range of the input array, it uses a <a href=\"http://en.wikipedia.org/wiki/Heapsort\" rel=\"nofollow noreferrer\">Heapsort algorithm</a>.</li>\n    <li>Otherwise, it uses a <a href=\"http://en.wikipedia.org/wiki/Quicksort\" rel=\"nofollow noreferrer\">Quicksort algorithm</a>. </li>\n    </ul>\n  </blockquote>\n</blockquote>\n\n<p>So now we see that, for small partitions (like your example with 15 elements), the pros use <a href=\"http://en.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\">insertion sort</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 6448, "user_id": 568249, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/de1c1bf8393206415463491920067f8b?s=128&d=identicon&r=PG", "display_name": "Berk U.", "link": "https://stackoverflow.com/users/568249/berk-u"}, "edited": false, "score": 0, "creation_date": 1578339547, "post_id": 44169057, "comment_id": 105399345, "body": "Thanks for this! I&#39;m wondering if you could explain what &quot;sort <code>I</code> in terms of <code>A</code>&quot; means. Does it just mean that for all <code>A[i] == A[I[i]]</code> for all <code>i</code>? I am trying to implement a generic solution in Python so I don&#39;t quite understand what the <code>std::sort(I, I+n, [&amp;A](int i, int j){return A[i] &lt; A[j];});</code> is doing."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 6448, "user_id": 568249, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/de1c1bf8393206415463491920067f8b?s=128&d=identicon&r=PG", "display_name": "Berk U.", "link": "https://stackoverflow.com/users/568249/berk-u"}, "edited": false, "score": 0, "creation_date": 1578354742, "post_id": 44169057, "comment_id": 105404319, "body": "@BerkU. - &quot;sort I[] according to A[]&quot; means that after sorting I[] according to A[], then for i = 1 to n-1, A[I[i-1]] &lt;= A[I[i]]. After sorting I[] according to A[], a sorted copy of A[] could be made using for i = 0 to n-1, B[i] = A[I[i]]."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 0, "last_activity_date": 1495678963, "last_edit_date": 1495678963, "creation_date": 1495662657, "answer_id": 44169057, "question_id": 44167728, "link": "https://stackoverflow.com/questions/44167728/sort-a-list-by-only-the-swapping-of-its-elements/44169057#44169057", "title": "Sort a list by only the swapping of it&#39;s elements", "body": "<p>Assuming the values are 0 to n-1 for an array of size n, here is a an algorithm with O(n) time complexity, and it should be the optimal algorithm for minimizing swaps. Every swap will place at least one value (sometimes both) in it's proper location.</p>\n\n<pre><code>// the values of A[] range from 0 to n-1\nvoid sort(int A[], int n)\n{\n    for(int i = 0; i &lt; n; i++)\n        while(A[i] != i)\n            swap(A[i], A[A[i]]);\n}\n</code></pre>\n\n<p>For a more generic solution and assuming that only the swaps used to sort the original array are counted, generate an array of indices to the array to be sorted, sort the array of indices according to the array to be sorted (using any sort algorithm), then use the above algorithm to sort the original array and the array of indices at the same time. Using C++ to describe this, and using a lambda compare for this example:</p>\n\n<pre><code>void sort(int A[], int n)\n{\n    // generate indices I[]\n    int *I = new int[n];\n    for(int i = 0; i &lt; n; i++)\n        I[i] = i;\n    // sort I according to A\n    std::sort(I, I+n,\n        [&amp;A](int i, int j)\n          {return A[i] &lt; A[j];});\n    // sort A and I according to I using swaps\n    for(int i = 0; i &lt; n; i++){\n        while(I[i] != i){\n            std::swap(I[i], I[I[i]]);\n            std::swap(A[i], A[A[i]]);   // only this swap is counted\n        }\n    }\n    delete[] I;\n}\n</code></pre>\n\n<p>For languages without the equivalent of a lambda commpare, a custom sort function can be used. Sorting is accomplished undoing the \"cycles\" in the array with O(n) time complexity. Every permutation of an array can be considered as a series of cycles. Value is really the order for the element, but in this case the ordering and value are the same:</p>\n\n<pre><code>index  0 1 2 3 4 5 6 7\nvalue  6 3 1 2 4 0 7 5\n</code></pre>\n\n<p>The cycles are the \"paths\" to follow a chain of values, start with index 0, which has a value of 6, then go to index 6 which has a value of 7 and repeat the process until the cycle completes back at index 0. Repeat for the rest of the array. For this example, the cycles are:</p>\n\n<pre><code>0-&gt;6  6-&gt;7  7-&gt;5  5-&gt;0\n1-&gt;3  3-&gt;2  2-&gt;1\n4-&gt;4\n</code></pre>\n\n<p>Following the algorithm shown above the swaps are:</p>\n\n<pre><code>swap(a[0],a[6])  // puts 6 into place\nswap(a[0],a[7])  // puts 7 into place\nswap(a[0],a[5])  // puts 0 and 5 into place\nswap(a[1],a[3])  // puts 3 into place\nswap(a[1],a[2])  // puts 1 and 2 into place\n                 // done\n</code></pre>\n\n<p>Link to the more practical example of sorting multiple arrays according to one of them. In this example, the cycles are done using a series of moves instead of swaps:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/44027808/sorting-two-arrays-based-on-one-with-standard-library-copy-steps-avoided/44030600#44030600\">Sorting two arrays based on one with standard library (copy steps avoided)</a></p>\n"}], "owner": {"reputation": 53, "user_id": 4927945, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W6B1Z.jpg?s=128&g=1", "display_name": "Dewyer", "link": "https://stackoverflow.com/users/4927945/dewyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "accepted_answer_id": 44169057, "answer_count": 3, "score": -1, "last_activity_date": 1495678963, "creation_date": 1495657061, "question_id": 44167728, "link": "https://stackoverflow.com/questions/44167728/sort-a-list-by-only-the-swapping-of-its-elements", "title": "Sort a list by only the swapping of it&#39;s elements", "body": "<p>What would be the optimal solution to the following problem :\nGiven a list of values (fe : numbers ranging from 0-14) how would you sort them by using only swap operations (fe : swapping the 0-th and the 9-th element in the list) your goal is to find the solution with the least swaps.</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1495657159, "post_id": 44167709, "comment_id": 75351614, "body": "can you post the examples of invalid inputs?"}, {"owner": {"reputation": 597, "user_id": 3776749, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d5f12213cd9e39fc7cd1af05f292be6b?s=128&d=identicon&r=PG&f=1", "display_name": "user3776749", "link": "https://stackoverflow.com/users/3776749/user3776749"}, "reply_to_user": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1495657514, "post_id": 44167709, "comment_id": 75351784, "body": "@RomanPerekhrest for the listed example, any string that doesn&#39;t have at least one J, K, and L. So &quot;JK&quot;, &quot;KLLKK&quot;, and &quot;JJLLLJL&quot; would all get rejected."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1495657916, "post_id": 44167709, "comment_id": 75351950, "body": "The lookahead regex answer will probably be slower than looping with a string find function for each array character. They both do the same thing (i.e. start from the string beginning), however the regex has some overhead states ( like assertion groups and negated classes ) that would make it slower."}, {"owner": {"reputation": 597, "user_id": 3776749, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d5f12213cd9e39fc7cd1af05f292be6b?s=128&d=identicon&r=PG&f=1", "display_name": "user3776749", "link": "https://stackoverflow.com/users/3776749/user3776749"}, "edited": false, "score": 0, "creation_date": 1495658115, "post_id": 44167709, "comment_id": 75352052, "body": "@sln thanks for the tip. This project is primarily for experimenting with RegEx, but I will keep that in mind in the future."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 2, "creation_date": 1495658189, "post_id": 44167709, "comment_id": 75352085, "body": "If you just want to mess around with regex and looking for a different than assertions approach, use the new <i>regex</i> module and try this on it <code>(?:.*?(?:((?(1)(?!))j)|((?(2)(?!))k)|((?(3)(?!))l))){3}</code> Because assertions aren&#39;t really experimenting are they? Try and <a href=\"http://www.regexformat.com\" rel=\"nofollow noreferrer\">benchmark</a> experiments, you may be surprised at what you find."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 3776749, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d5f12213cd9e39fc7cd1af05f292be6b?s=128&d=identicon&r=PG&f=1", "display_name": "user3776749", "link": "https://stackoverflow.com/users/3776749/user3776749"}, "edited": false, "score": 0, "creation_date": 1495657708, "post_id": 44167753, "comment_id": 75351877, "body": "Perfect. I had seen look ahead before, but it wasn&#39;t in my &quot;mental toolbox&quot; when thinking through problems."}], "tags": [], "owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "is_accepted": true, "score": 6, "last_activity_date": 1495657155, "creation_date": 1495657155, "answer_id": 44167753, "question_id": 44167709, "link": "https://stackoverflow.com/questions/44167709/finding-a-simpler-python-regex-for-a-string-that-contains-each-character-at-leas/44167753#44167753", "title": "Finding a simpler Python RegEx for a string that contains each character at least once", "body": "<p>This is a typical use-case for a lookahead. You can simply use <code>^(?=[^J]*J)(?=[^K]*K)(?=[^L]*L)</code> to check all your conditions. If your string also must contain only these characters, you can append <code>[JKL]+$</code> to it.</p>\n"}, {"tags": [], "owner": {"reputation": 7711, "user_id": 1150961, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/TOcu2.jpg?s=128&g=1", "display_name": "Till Hoffmann", "link": "https://stackoverflow.com/users/1150961/till-hoffmann"}, "is_accepted": false, "score": 3, "last_activity_date": 1495657564, "creation_date": 1495657564, "answer_id": 44167880, "question_id": 44167709, "link": "https://stackoverflow.com/questions/44167709/finding-a-simpler-python-regex-for-a-string-that-contains-each-character-at-leas/44167880#44167880", "title": "Finding a simpler Python RegEx for a string that contains each character at least once", "body": "<p>If using regex is not a requirement you could also check for the characters individually:</p>\n\n<pre><code>text = ...\nalphabet = 'JKL'\nassert all([character in text for character in alphabet])\n</code></pre>\n\n<p>Or if you do not want to allow characters that are not in the alphabet:</p>\n\n<pre><code>assert set(alphabet) == set(text)\n</code></pre>\n"}], "owner": {"reputation": 597, "user_id": 3776749, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d5f12213cd9e39fc7cd1af05f292be6b?s=128&d=identicon&r=PG&f=1", "display_name": "user3776749", "link": "https://stackoverflow.com/users/3776749/user3776749"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 44167753, "answer_count": 2, "score": 1, "last_activity_date": 1495657564, "creation_date": 1495656989, "question_id": 44167709, "link": "https://stackoverflow.com/questions/44167709/finding-a-simpler-python-regex-for-a-string-that-contains-each-character-at-leas", "title": "Finding a simpler Python RegEx for a string that contains each character at least once", "body": "<p>I'm working on a small project and have need for Regular Expressions that accept strings that contain each character in a given alphabet <em>at least once</em>. </p>\n\n<p>So for the alphabet <code>{J, K, L}</code> I would need a RegEx that accepts strings containing <code>J</code> one or more times AND <code>K</code> one or more times, AND <code>L</code> one or more times, in any order, with any amount of duplicate characters before, after, or in-between.</p>\n\n<p>I'm pretty inexperienced with RegEx and so have trouble finding \"lateral thinking\" solutions to many problems. My first approach to this was therefore pretty brute-force: I took each possible \"base\" string, for example, </p>\n\n<p><code>JKL, JLK, KJL, KLJ, LKJ, LJK</code></p>\n\n<p>and allow for any string  that could be built up from one of those starting points. However the resulting regular expression* (despite working) ends up being  very long and containing a lot of redundancy. Not to mention this approach becomes completely untenable once the alphabet has more than a handful of characters.</p>\n\n<p>I spent a few hours trying to find a more elegant approach, but I have yet to find one that still accepts every possible string. Is there a method or technique I could be using to get this done in a way that's more elegant and scalable (to larger alphabets)?</p>\n\n<p>*For reference, my regular expression for the listed example:</p>\n\n<pre><code>((J|K|L)*J(J|K|L)*K(J|K|L)*L(J|K|L)*)|\n((J|K|L)*J(J|K|L)*L(J|K|L)*K(J|K|L)*)|\n((J|K|L)*K(J|K|L)*J(J|K|L)*L(J|K|L)*)|\n((J|K|L)*K(J|K|L)*L(J|K|L)*J(J|K|L)*)|\n((J|K|L)*L(J|K|L)*J(J|K|L)*K(J|K|L)*)|\n((J|K|L)*L(J|K|L)*K(J|K|L)*J(J|K|L)*)\n</code></pre>\n"}, {"tags": ["python", "string", "pandas", "concatenation"], "comments": [{"owner": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 2, "creation_date": 1495657090, "post_id": 44167704, "comment_id": 75351582, "body": "try changing  <code>lambda x: &#39;, &#39;.join(x)</code> to <code>lambda x: &#39;, &#39;.join(str(x))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 2523817, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e5813edf47aec03308bcebc826908ce4?s=128&d=identicon&r=PG", "display_name": "Sagar Waghmode", "link": "https://stackoverflow.com/users/2523817/sagar-waghmode"}, "is_accepted": false, "score": 1, "last_activity_date": 1495657406, "creation_date": 1495657406, "answer_id": 44167830, "question_id": 44167704, "link": "https://stackoverflow.com/questions/44167704/python-pandas-concatenate-strings-and-numbers-into-one-string/44167830#44167830", "title": "Python Pandas concatenate strings and numbers into one string", "body": "<p>You have to convert column types to strings.</p>\n\n<pre><code>import pandas as pd\ndf2 = pd.DataFrame({'Col1': ['a', 'b', 1], 'Col2': ['a', 'b', 1]})\ndf2.apply(lambda x: ', '.join(x.astype('str')), axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1495657581, "creation_date": 1495657581, "answer_id": 44167886, "question_id": 44167704, "link": "https://stackoverflow.com/questions/44167704/python-pandas-concatenate-strings-and-numbers-into-one-string/44167886#44167886", "title": "Python Pandas concatenate strings and numbers into one string", "body": "<pre><code>In [75]: df2\nOut[75]:\n  Col1 Col2 Col3\n0    a    a    x\n1    b    b    y\n2    1    1    2\n\nIn [76]: df2.astype(str).add(', ').sum(1).str[:-2]\nOut[76]:\n0    a, a, x\n1    b, b, y\n2    1, 1, 2\ndtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "edited": false, "score": 0, "creation_date": 1495657987, "post_id": 44167891, "comment_id": 75351976, "body": "This is great! Thank you"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1495657595, "creation_date": 1495657595, "answer_id": 44167891, "question_id": 44167704, "link": "https://stackoverflow.com/questions/44167704/python-pandas-concatenate-strings-and-numbers-into-one-string/44167891#44167891", "title": "Python Pandas concatenate strings and numbers into one string", "body": "<p>Consider the dataframe <code>df</code></p>\n\n<pre><code>np.random.seed([3,1415])\ndf = pd.DataFrame(\n    np.random.randint(10, size=(3, 3)),\n    columns=list('abc')\n)\n\nprint(df)\n\n   a  b  c\n0  0  2  7\n1  3  8  7\n2  0  6  8\n</code></pre>\n\n<hr>\n\n<p>You can use <code>astype(str)</code> ahead of the <code>lambda</code></p>\n\n<pre><code>df.astype(str).apply(', '.join, 1)\n\n0    0, 2, 7\n1    3, 8, 7\n2    0, 6, 8\ndtype: object\n</code></pre>\n\n<hr>\n\n<p>Using a comprehension</p>\n\n<pre><code>pd.Series([', '.join(l) for l in df.values.astype(str).tolist()], df.index)\n\n0    0, 2, 7\n1    3, 8, 7\n2    0, 6, 8\ndtype: object\n</code></pre>\n"}], "owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3001, "favorite_count": 0, "accepted_answer_id": 44167891, "answer_count": 3, "score": 1, "last_activity_date": 1495657740, "creation_date": 1495656973, "last_edit_date": 1495657740, "question_id": 44167704, "link": "https://stackoverflow.com/questions/44167704/python-pandas-concatenate-strings-and-numbers-into-one-string", "title": "Python Pandas concatenate strings and numbers into one string", "body": "<p>I am working with a pandas dataframe and trying to concatenate multiple string and numbers into one string. </p>\n\n<p>This works</p>\n\n<pre><code>df1 = pd.DataFrame({'Col1': ['a', 'b', 'c'], 'Col2': ['a', 'b', 'c']})\ndf1.apply(lambda x: ', '.join(x), axis=1)\n\n0    a, a\n1    b, b\n2    c, c\n</code></pre>\n\n<p>How can I make this work just like df1?</p>\n\n<pre><code>df2 = pd.DataFrame({'Col1': ['a', 'b', 1], 'Col2': ['a', 'b', 1]})\ndf2.apply(lambda x: ', '.join(x), axis=1)\n\nTypeError: ('sequence item 0: expected str instance, int found', 'occurred at index 2')\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1495659185, "post_id": 44167979, "comment_id": 75352514, "body": "Actually that&#39;s not true.  I would go with approach (1) <b><i>if</i></b> you forced me to use <code>reload</code> as part of the solution, but on general principles of maintainability/comprehensibility  I would avoid doing that in the first place.  Instead I would make the process of refreshing-and-returning-<code>MAPPINGS</code> a function in module <code>a</code>."}], "tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": true, "score": 1, "last_activity_date": 1495662495, "last_edit_date": 1495662495, "creation_date": 1495657922, "answer_id": 44167979, "question_id": 44167686, "link": "https://stackoverflow.com/questions/44167686/python-can-you-reload-from-x-import-y-from-another-module-z/44167979#44167979", "title": "Python can you reload `from x import y` from another module z?", "body": "<p>If things are structured exactly the way you've written your example in the question body (but not in your title), then for me in Python 2.7  a simple <code>reload(a)</code> in <code>c.py</code> works as you want:</p>\n\n<pre><code># a.by\nimport time\nMAPPINGS = {time.strftime('%Y-%m-%d %H:%M:%S'):''}\n\n\n# b.py\nimport a\ndef dowork():\n    for key,value in a.MAPPINGS.iteritems():\n        print key\n\n\n# c.py\nimport a\ndef manage_mapping():\n    reload(a)\n\nif __name__ == '__main__':\n    import time\n    from b import dowork\n    dowork()\n    time.sleep(2)\n    manage_mapping()\n    dowork()\n</code></pre>\n\n<p>If I do</p>\n\n<pre><code>$ python c.py\n</code></pre>\n\n<p>then I get:</p>\n\n<pre><code>2017-05-24 16:31:31\n2017-05-24 16:31:33\n</code></pre>\n\n<p>which indicates <code>c</code> has successfully refreshed <code>a.MAPPINGS</code> from <code>b</code>'s point of view.</p>\n\n<p>Now, if <code>b.py</code> contained <code>from a import MAPPINGS</code> (as in your <em>title</em>) followed by a reference to <code>MAPPINGS</code>,  instead of <code>import a</code> followed by a reference to <code>a.MAPPINGS</code>,  then that's different:</p>\n\n<pre><code># b.py\nfrom a import MAPPINGS\ndef dowork():\n    for key,value in MAPPINGS.iteritems():\n        print key\n</code></pre>\n\n<p>In this case, <code>b.py</code> creates its own association between the name <code>'MAPPINGS'</code> and the <strong>original</strong> <code>dict</code> created in module <code>a</code>.  If <code>a.py</code> is re-run, it creates a new <code>dict</code> but module <code>b</code> still contains, and uses, its own reference to the old one. So now you'll get two timestamps the same.   There are two potential fixes:  (1) change to <code>import a</code> + <code>a.MAPPINGS</code> as above, instead of <code>from a import MAPPINGS</code> + <code>MAPPINGS</code>,  or (2) move the import down into <code>dowork()</code> so the refreshed <code>MAPPINGS</code> is re-imported locally every time you want to use it:</p>\n\n<pre><code># b.py\ndef dowork():\n    from a import MAPPINGS\n    for key,value in MAPPINGS.iteritems():\n        print key\n</code></pre>\n\n<p>I would go with approach (1).</p>\n"}], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 44167979, "answer_count": 1, "score": 0, "last_activity_date": 1495662495, "creation_date": 1495656903, "question_id": 44167686, "link": "https://stackoverflow.com/questions/44167686/python-can-you-reload-from-x-import-y-from-another-module-z", "title": "Python can you reload `from x import y` from another module z?", "body": "<p>I am working on some legacy code and I will need to refresh some imported variable for another module. Eg.</p>\n\n<p>module a:</p>\n\n<pre><code># load from database\nMAPPINGS = {...}\n</code></pre>\n\n<p>module b:</p>\n\n<pre><code>import a\n\ndef dowork():\n    for key,value in a.MAPPINGS.iteritems():\n        print key\n</code></pre>\n\n<p>module c:</p>\n\n<pre><code># admin section\ndef manage_mapping():\n    ....\n    # refresh a.MAPPINGS\n</code></pre>\n\n<p>Lets assume a.MAPPINGS gets imported in other modules <code>e, f, g</code> etc, is it possible to reload module a.MAPPINGS and all other modules gets a new <code>a.MAPPINGS</code>?</p>\n\n<p>Ref: I looked at <a href=\"https://stackoverflow.com/questions/14015405/reloading-module-which-has-been-imported-to-another-module\">this</a> but it's more like refreshing in module b.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3747, "user_id": 2597213, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8e7907344803baaa139d4beeb43bf92b?s=128&d=identicon&r=PG", "display_name": "efirvida", "link": "https://stackoverflow.com/users/2597213/efirvida"}, "edited": false, "score": 0, "creation_date": 1495658083, "post_id": 44167682, "comment_id": 75352035, "body": "take a look here: <a href=\"https://stackoverflow.com/questions/517970/how-to-clear-the-interpreter-console\" title=\"how to clear the interpreter console\">stackoverflow.com/questions/517970/&hellip;</a>"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1495658241, "post_id": 44167682, "comment_id": 75352115, "body": "What IDE is that?  Any such capability is going to be a feature of the IDE&#39;s text display, not anything built into Python.  There&#39;s no guarantee that the feature is accessible from Python at all."}, {"owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "edited": false, "score": 0, "creation_date": 1495658313, "post_id": 44167682, "comment_id": 75352141, "body": "That doesn&#39;t look like the default python interpreter. It&#39;s likely one in an IDE in which case the os.system() call probably won&#39;t work. Re-word your question with the IDE you are using and maybe someone on here can help you."}], "owner": {"reputation": 5242, "user_id": 1066197, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3719518c2c8046b8f70c85d72b4d7348?s=128&d=identicon&r=PG&f=1", "display_name": "Suffii", "link": "https://stackoverflow.com/users/1066197/suffii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495657941, "creation_date": 1495656898, "question_id": 44167682, "link": "https://stackoverflow.com/questions/44167682/facing-issue-on-clearing-python-interpreter", "title": "Facing Issue on Clearing Python Interpreter", "body": "<p>Using Python 2.7.10 on Windows Machine I tried all of following to clear the <code>interpreter</code></p>\n\n<pre><code>import os\nos.system('cls')\nclear()\ncls()\ncls\nclear\n</code></pre>\n\n<p>but I am not able to clear the interpreter by code while the <code>Clear All</code> option is already in R-click. Can you please let me know how to do this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/YahDS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YahDS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 1456477, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0b2782e20d8741e2c3e139639a71f0f7?s=128&d=identicon&r=PG", "display_name": "p.koch", "link": "https://stackoverflow.com/users/1456477/p-koch"}, "is_accepted": false, "score": 3, "last_activity_date": 1495663722, "last_edit_date": 1495663722, "creation_date": 1495661603, "answer_id": 44168826, "question_id": 44167676, "link": "https://stackoverflow.com/questions/44167676/what-python-types-does-tensorflow-accept-for-attrs-of-type-tensor/44168826#44168826", "title": "What Python types does TensorFlow accept for Attr&#39;s of type &quot;tensor&quot;?", "body": "<p>After much more hunting, I found <code>tf.contrib.util.make_tensor_proto</code>, a function that converts a python scalar, python list, numpy ndarray, or numpy scalar into a <code>tf.TensorProto</code> object. The following works:</p>\n\n<pre><code>A = tf.contrib.util.make_tensor_proto([[1.0, 2.0, 3.0],[4.0, 5.0, 6.0]])\nX = tf.Variable(tf.constant(1.0))\n\nY = dostufflib.do_stuff(X, A)\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 1456477, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0b2782e20d8741e2c3e139639a71f0f7?s=128&d=identicon&r=PG", "display_name": "p.koch", "link": "https://stackoverflow.com/users/1456477/p-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495663739, "creation_date": 1495656884, "last_edit_date": 1495663739, "question_id": 44167676, "link": "https://stackoverflow.com/questions/44167676/what-python-types-does-tensorflow-accept-for-attrs-of-type-tensor", "title": "What Python types does TensorFlow accept for Attr&#39;s of type &quot;tensor&quot;?", "body": "<p>I am defining a new Op in C++ which takes in a single attribute of type <code>tensor</code>, roughly following <a href=\"https://www.tensorflow.org/extend/adding_an_op#op_registration\" rel=\"nofollow noreferrer\">these instructions</a>. A stripped version of the Op code is below:</p>\n\n<pre><code>#include \"tensorflow/core/framework/op.h\"\n#include \"tensorflow/core/framework/op_kernel.h\"\n\nusing namespace tensorflow;\n\nREGISTER_OP(\"DoStuff\")\n    .Attr(\"attr: tensor = { dtype: DT_FLOAT }\")\n    .Input(\"in: float\")\n    .Output(\"out: float\");\n\nclass DoStuffOp : public OpKernel {\npublic:\n    explicit DoStuffOp(OpKernelConstruction *context) : OpKernel(context) {\n        OP_REQUIRES_OK(context, context-&gt;GetAttr(\"attr\", &amp;attr_));\n        // ...\n    }\n\n    void Compute(OpKernelContext *context) override {\n        // ...\n    }\n\nprivate:\n    Tensor attr_;\n};\n\nREGISTER_KERNEL_BUILDER(Name(\"DoStuff\").Device(DEVICE_CPU), DoStuffOp);\n</code></pre>\n\n<p>I can compile the Op into a <code>.so</code> file fine. However, I can't figure out how to successfully pass in a value for <code>attr</code>. When I run the following in Python:</p>\n\n<pre><code>import tensorflow as tf\ndostufflib = tf.load_op_library('build/do_stuff.so')\nsess = tf.InteractiveSession()\n\nA = [[1.0, 2.0, 3.0],\n     [4.0, 5.0, 6.0]]\nX = tf.Variable(tf.constant(1.0))\n\nY = dostufflib.do_stuff(X, A)\n</code></pre>\n\n<p>I get <code>TypeError: Don't know how to convert [[1.0, 2.0, 3.0], [4.0, 5.0, 6.0]] to a TensorProto for argument 'attr'</code>. Nothing I do seems to satisfy the type conversion: <code>list</code>, <code>numpy</code> array, <code>tf.Tensor</code>, <code>tf.Variable</code>, etc. How do you pass Python variables into an Op as tensor attributes?</p>\n"}, {"tags": ["python", "selenium", "phantomjs"], "answers": [{"tags": [], "owner": {"reputation": 1829, "user_id": 5378132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/arUcg.png?s=128&g=1", "display_name": "Riley Hun", "link": "https://stackoverflow.com/users/5378132/riley-hun"}, "is_accepted": true, "score": 1, "last_activity_date": 1495664902, "last_edit_date": 1495664902, "creation_date": 1495664751, "answer_id": 44169449, "question_id": 44167633, "link": "https://stackoverflow.com/questions/44167633/downloading-with-pythonphantomjs-by-emulating-a-click/44169449#44169449", "title": "Downloading with Python+PhantomJS by emulating a click", "body": "<p>Here is what I came up with. You just need to swap out the file location to where your phantomJS executable file is located. You can also modify the file location where you store the downloaded files on the last line: </p>\n\n<pre><code>def Download_PDF():\n    phantomJSdriver = r'C:\\Program Files\\PhantomJS\\bin\\phantomjs.exe'\n    meff_data_download_url = \"http://www.meff.com/aspx/DerEnergia/DescargaFicheros.aspx?id=esp\"\n    main_link = \"http://www.meff.com\"\n\n    driver = webdriver.PhantomJS(phantomJSdriver) # webdriver.PhantomJS() if not Windows\n\n    driver.get(meff_data_download_url)\n\n    links = driver.find_elements_by_css_selector(\"a[href*='/docs/Ficheros/Descarga/dME']\")\n\n    thelinks = [main_link + str(link.get_attribute('href')).split(\"javascript:sacaVentana('\")[1].split(\"')\")[0]\n                for link in links]\n\n    for i in range(0, len(thelinks)):\n        urllib.request.urlretrieve(thelinks[i], str(i)+'.zip')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 3803345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dc9b03ee8a1bb3737e906390d062bb3?s=128&d=identicon&r=PG", "display_name": "NanoMage", "link": "https://stackoverflow.com/users/3803345/nanomage"}, "is_accepted": false, "score": 0, "last_activity_date": 1495670043, "creation_date": 1495670043, "answer_id": 44170213, "question_id": 44167633, "link": "https://stackoverflow.com/questions/44167633/downloading-with-pythonphantomjs-by-emulating-a-click/44170213#44170213", "title": "Downloading with Python+PhantomJS by emulating a click", "body": "<p>Currently, PhantomJS does not support downloads.  Here is the tracking ticket on their side for the feature: <a href=\"https://github.com/ariya/phantomjs/issues/10052\" rel=\"nofollow noreferrer\">https://github.com/ariya/phantomjs/issues/10052</a></p>\n\n<p>You can try using the new headless version of chrome, should work nicely with your current implementation.\n<a href=\"https://intoli.com/blog/running-selenium-with-headless-chrome/\" rel=\"nofollow noreferrer\">https://intoli.com/blog/running-selenium-with-headless-chrome/</a></p>\n\n<p>Alternatively, you can use PhantomJS to grab what you need, when you have the element, extract the href out, and use python-requests or urllib to retrieve the file.</p>\n"}], "owner": {"reputation": 11288, "user_id": 808091, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd2db0e008011b4748b8e641cbb6c4d7?s=128&d=identicon&r=PG", "display_name": "Roman Rdgz", "link": "https://stackoverflow.com/users/808091/roman-rdgz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 44169449, "answer_count": 2, "score": 0, "last_activity_date": 1495670043, "creation_date": 1495656696, "question_id": 44167633, "link": "https://stackoverflow.com/questions/44167633/downloading-with-pythonphantomjs-by-emulating-a-click", "title": "Downloading with Python+PhantomJS by emulating a click", "body": "<p>I'm trying to write a script which downloads a zip file from a website, but the file is served with a javascript call and not with a known URL, so I'm trying to emulate a click over the element to download the file:</p>\n\n<pre><code>#! /usr/bin/env python\n# -*- coding: utf-8 -*\nfrom selenium import webdriver\n\n\nmeff_data_download_url = \"http://www.meff.com/aspx/DerEnergia/DescargaFicheros.aspx?id=esp\"\nzip_file_javascript_call = \"sacaVentana('/docs/Ficheros/Descarga/dME/ME170523.zip')\"\n\nif __name__ == '__main__':\n    browser = webdriver.PhantomJS()\n    browser.get(meff_data_download_url)        \n    browser.find_elements_by_class_name('zip')[0].click()\n</code></pre>\n\n<p>The program script ends without errors, but no file is downloaded. I saw examples in other SO questions and they did not do any other additional thing to actually store the downloaded file, which seems strange, but I don't known if that's the problem.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["python", "automation", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 7892502, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/819edf7de44ac11cc887f3975ea65568?s=128&d=identicon&r=PG&f=1", "display_name": "NatNat", "link": "https://stackoverflow.com/users/7892502/natnat"}, "is_accepted": false, "score": 0, "last_activity_date": 1495666674, "creation_date": 1495666674, "answer_id": 44169768, "question_id": 44167616, "link": "https://stackoverflow.com/questions/44167616/automation-process-for-uploading-image-to-the-web-site-from-computer-folder-in-p/44169768#44169768", "title": "Automation process for uploading image to the web site from computer folder in Python", "body": "<p>I was calling a wrong thing :)\nThat worked:</p>\n\n<pre><code>    path = \"/home/nataliya/Desktop/cat.jpg\"\n    editPhoto = self.driver.find_element_by_xpath('//*[@id=\"easSettingAvatarUpload\"]')\n    time.sleep(2)\n    editPhoto.send_keys(path)\n    time.sleep(2)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7892502, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/819edf7de44ac11cc887f3975ea65568?s=128&d=identicon&r=PG&f=1", "display_name": "NatNat", "link": "https://stackoverflow.com/users/7892502/natnat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495666674, "creation_date": 1495656618, "last_edit_date": 1495660657, "question_id": 44167616, "link": "https://stackoverflow.com/questions/44167616/automation-process-for-uploading-image-to-the-web-site-from-computer-folder-in-p", "title": "Automation process for uploading image to the web site from computer folder in Python", "body": "<p>I am trying to upload image from the folder on my PC, and the problem is- I cannot use send_keys as it should be uploaded from the list of images from the folder. Please see attached photo and code:</p>\n\n<pre><code>def picture(self):\n  path = \"/home/nataliya/Desktop/dog.png\"\n  editPhoto = self.driver.find_element_by_xpath('//* [@id=\"easSettingAvatarUpload\"]')\n  editPhoto.click()\n  time.sleep(2)\n  editPhoto.send_keys(path)\n  editPhoto.submit()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Kgn8L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kgn8L.png\" alt=\"screenshot for the folder\"></a></p>\n\n<p>Error I get: AttributeError: 'NoneType' object has no attribute 'send_keys'</p>\n"}, {"tags": ["python", "visual-studio-code"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1495657372, "post_id": 44167597, "comment_id": 75351714, "body": "You might find using option 1 in the docs easier and safer and just setting the interpreter path explicitly for your workspace. Also are you sure you&#39;re actually running python3 in the first place? All of these look like invocations of the system python which is a python 2."}, {"owner": {"reputation": 607, "user_id": 2551817, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0iBTu.jpg?s=128&g=1", "display_name": "sofend", "link": "https://stackoverflow.com/users/2551817/sofend"}, "edited": false, "score": 0, "creation_date": 1585939015, "post_id": 44167597, "comment_id": 107951219, "body": "Did you instead try: <code>python3 -m pip install pylint</code>"}], "answers": [{"comments": [{"owner": {"reputation": 834, "user_id": 5994373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sso6B.png?s=128&g=1", "display_name": "Gabriel Amazonas Mesquita", "link": "https://stackoverflow.com/users/5994373/gabriel-amazonas-mesquita"}, "edited": false, "score": 0, "creation_date": 1531972457, "post_id": 45562956, "comment_id": 89799517, "body": "This has nothing to do with the virtualenv question"}], "tags": [], "owner": {"reputation": 480, "user_id": 7208045, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/g0zUb.png?s=128&g=1", "display_name": "Tuxedo Joe", "link": "https://stackoverflow.com/users/7208045/tuxedo-joe"}, "is_accepted": false, "score": -3, "last_activity_date": 1502180332, "creation_date": 1502180332, "answer_id": 45562956, "question_id": 44167597, "link": "https://stackoverflow.com/questions/44167597/pythonvscode-venv-and-pylint/45562956#45562956", "title": "pythonVSCode, venv and pylint", "body": "<p>Solved the same problem on ubuntu with </p>\n\n<pre><code>sudo apt-get install python-pip\n</code></pre>\n\n<p>Seems like you need to install pip for python. Found <a href=\"https://github.com/k4m4/kickthemout/issues/107\" rel=\"nofollow noreferrer\">this</a> thread for mac:</p>\n\n<pre><code>sudo port install py27-pip\n</code></pre>\n\n<p>Then update your PATH to include py27-pip bin directory (you can add this in ~/.bash_profile \n  \"PATH=/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin:$PATH\"</p>\n"}, {"tags": [], "owner": {"reputation": 2147, "user_id": 9462253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xC3eo.jpg?s=128&g=1", "display_name": "Braca", "link": "https://stackoverflow.com/users/9462253/braca"}, "is_accepted": false, "score": 7, "last_activity_date": 1528675531, "last_edit_date": 1528675531, "creation_date": 1528674272, "answer_id": 50788992, "question_id": 44167597, "link": "https://stackoverflow.com/questions/44167597/pythonvscode-venv-and-pylint/50788992#50788992", "title": "pythonVSCode, venv and pylint", "body": "<p>You are right, it's about paths. You should have something like this in your\n<em>settings.json</em> file:</p>\n\n<pre><code>{\n  \"python.pythonPath\": \"your_project_path/your_venv/Scripts/python\",\n  \"python.linting.pylintPath\": \"your_project_path/your_venv/Scripts/pylint\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 546, "user_id": 4301060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-2ctNiDaI8uU/AAAAAAAAAAI/AAAAAAAAA74/zldCR1aA92Y/photo.jpg?sz=128", "display_name": "Ole Aldric", "link": "https://stackoverflow.com/users/4301060/ole-aldric"}, "edited": false, "score": 1, "creation_date": 1549326518, "post_id": 51414085, "comment_id": 95854751, "body": "I did exactly what you said here, but it did not work."}, {"owner": {"reputation": 400, "user_id": 3357517, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VGNVR.jpg?s=128&g=1", "display_name": "mrGreenBrown", "link": "https://stackoverflow.com/users/3357517/mrgreenbrown"}, "edited": false, "score": 0, "creation_date": 1593509093, "post_id": 51414085, "comment_id": 110799525, "body": "I did exactly what you said and it worked. Thanks a lot."}], "tags": [], "owner": {"reputation": 834, "user_id": 5994373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sso6B.png?s=128&g=1", "display_name": "Gabriel Amazonas Mesquita", "link": "https://stackoverflow.com/users/5994373/gabriel-amazonas-mesquita"}, "is_accepted": true, "score": 4, "last_activity_date": 1531972371, "creation_date": 1531972371, "answer_id": 51414085, "question_id": 44167597, "link": "https://stackoverflow.com/questions/44167597/pythonvscode-venv-and-pylint/51414085#51414085", "title": "pythonVSCode, venv and pylint", "body": "<p>I had the same problem as of 07/2018.</p>\n\n<p>Solution:\nactivate your virtualenv:</p>\n\n<pre><code>source yourenv/bin/activate\n</code></pre>\n\n<p>in the terminal with the active virtualenv, do the following:</p>\n\n<p>Install pylint in your virtualenv:</p>\n\n<pre><code> (yourenv) user@machine/your/env/folder$ pip install pylint\n</code></pre>\n\n<p>Open VSCODE from the terminal, inside your virtualenv, using the \"code\" command. Let open only the new VSCode instance.</p>\n\n<pre><code>(yourenv) user@machine/your/env/folder$ code\n</code></pre>\n\n<p>Have fun coding using pylint.</p>\n"}], "owner": {"reputation": 107, "user_id": 3246477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671231235253bf910ad12f8fd4e1acc1?s=128&d=identicon&r=PG&f=1", "display_name": "Radoslav", "link": "https://stackoverflow.com/users/3246477/radoslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5858, "favorite_count": 2, "accepted_answer_id": 51414085, "answer_count": 3, "score": 6, "last_activity_date": 1531972371, "creation_date": 1495656551, "last_edit_date": 1495657064, "question_id": 44167597, "link": "https://stackoverflow.com/questions/44167597/pythonvscode-venv-and-pylint", "title": "pythonVSCode, venv and pylint", "body": "<p>A newbie question. I am trying to get pythonVSCode working with a venv virtual environment for Python 3.6 on a Mac.</p>\n\n<p>Following <a href=\"https://github.com/DonJayamanne/pythonVSCode/wiki/Python-Path-and-Version#option-2-activate-the-virtual-environment-from-your-terminalcommand-window-and-then-launch-vs-code\" rel=\"noreferrer\">the documentation</a>, I activated the virtual environment and launched VSCode from the terminal.</p>\n\n<p>When VSCode suggested installing pylint, I tried using the pythonVSCode's \"Install\" button that came with the suggestion, but that threw an error in VSCode's terminal:</p>\n\n<pre><code>/usr/bin/python -m pip install pylint\n$ /usr/bin/python -m pip install pylint\n/usr/bin/python: No module named pip\n</code></pre>\n\n<p>I then installed pylint via the system (not VSCode's) terminal and within the virtual environment:</p>\n\n<pre><code>(venv) $ pip install pylint\n</code></pre>\n\n<p>... and re-launched VSCode from the terminal.</p>\n\n<p>VSCode still suggests installing pylint.</p>\n\n<p>I suspect this has something to do with paths. I expected launching VSCode from within the virtual environment will load that environment's interpreter including pylint in VSCode, but it seems not to be the case.</p>\n"}, {"tags": ["python", "pygame", "collision", "pong"], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 7024472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fe1d3bf739164d90aebe566c8ee0132?s=128&d=identicon&r=PG&f=1", "display_name": "Nex_Lite", "link": "https://stackoverflow.com/users/7024472/nex-lite"}, "edited": false, "score": 0, "creation_date": 1495658658, "post_id": 44167902, "comment_id": 75352300, "body": "you were right that was the problem it&#39;s too bad now i have to add extra code to fix it."}, {"owner": {"reputation": 549, "user_id": 8061390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69b5f6b73baf4ec252839bf3fb1d28d?s=128&d=identicon&r=PG&f=1", "display_name": "njoosse", "link": "https://stackoverflow.com/users/8061390/njoosse"}, "reply_to_user": {"reputation": 328, "user_id": 7024472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fe1d3bf739164d90aebe566c8ee0132?s=128&d=identicon&r=PG&f=1", "display_name": "Nex_Lite", "link": "https://stackoverflow.com/users/7024472/nex-lite"}, "edited": false, "score": 0, "creation_date": 1495662884, "post_id": 44167902, "comment_id": 75354142, "body": "If it is only the additional loop, the code should be 1 additional line, 2 operations overall (both of the if statements), which could be reduced to 1 if an elif is used."}], "tags": [], "owner": {"reputation": 549, "user_id": 8061390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69b5f6b73baf4ec252839bf3fb1d28d?s=128&d=identicon&r=PG&f=1", "display_name": "njoosse", "link": "https://stackoverflow.com/users/8061390/njoosse"}, "is_accepted": true, "score": 1, "last_activity_date": 1495657638, "creation_date": 1495657638, "answer_id": 44167902, "question_id": 44167564, "link": "https://stackoverflow.com/questions/44167564/adding-points-to-player-when-pong-reaches-screen-boundry/44167902#44167902", "title": "adding points to player when pong reaches screen boundry", "body": "<p>Since you have the <code>for paddle in paddles:</code>, if the ball goes out of bounds it gets reset before it has iterated through both of the paddles, my guess would be that the left paddle is the first in the set of paddles.</p>\n\n<p>One method to fix this would be to iterate through the paddles when you have determined that the ball is out of bounds to ensure that both paddles are evaluated.</p>\n"}], "owner": {"reputation": 328, "user_id": 7024472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fe1d3bf739164d90aebe566c8ee0132?s=128&d=identicon&r=PG&f=1", "display_name": "Nex_Lite", "link": "https://stackoverflow.com/users/7024472/nex-lite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 44167902, "answer_count": 1, "score": 0, "last_activity_date": 1495657638, "creation_date": 1495656396, "last_edit_date": 1495657365, "question_id": 44167564, "link": "https://stackoverflow.com/questions/44167564/adding-points-to-player-when-pong-reaches-screen-boundry", "title": "adding points to player when pong reaches screen boundry", "body": "<pre><code>def pong_collision(paddles, pong, size):\n    ''' paddles and pong out of bounds collison '''\n\n    for paddle in paddles:\n        ends = [0, size[0] - paddle.rect.width]\n\n        # pong|paddle collision\n        if paddle.rect.colliderect(pong.rect):\n            pong.vel.x = -pong.vel.x\n            pong.music.sound.play(loops=0, maxtime=0, fade_ms=0)\n\n\n        if (ends[1] &lt;= pong.rect.x or pong.rect.x &lt;= ends[0]):\n        # pong out of bounds collision\n\n            if pong.rect.x &lt;= ends[0]:\n                # add point to right paddle if pong is &lt; 0\n                if paddle.side == 'right':\n                    paddle.text.value += 1\n\n            if pong.rect.x &gt;= ends[1]:\n                # add poitn to left paddle if pong is &gt; screen size\n                if paddle.side == 'left':\n                    paddle.text.value += 1\n\n\n            # freezes ball until user starts game\n            pong.state = False\n\n            # resets pong position to initial\n            pong.rect.topleft = [\n                (size[0]-pong.rect.width)/2,\n                (size[1]-pong.rect.height)/2\n            ]\n</code></pre>\n\n<p>So i have this pong collision detection above that detects when the ping pong ball reaches the screen's boundary. What's suppose to happen is the player than scores the point gets a point. Then, the ball is paused and reset to the middle of the screen. Everything works fine except for one thing, when the right player scores a point, the point is not added.</p>\n\n<p>I'm confused as to why this happens, clearly the collision detection is the same for both paddles, so why is one not working?</p>\n"}, {"tags": ["python", "sql-server", "macos", "pyodbc", "freetds"], "comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1495661253, "post_id": 44167524, "comment_id": 75353491, "body": "Check <code>tsql -C</code> to ensure that you are looking at the same freetds.conf directory that FreeTDS is using. Also, your <code>tsql</code> command is using the <code>servername</code> defined in freetds.conf, not a DSN name defined in odbc.ini, correct?"}, {"owner": {"reputation": 229, "user_id": 2434834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c39323bfc3f62cb62266394f5faf111d?s=128&d=identicon&r=PG", "display_name": "Sc-python-leaner", "link": "https://stackoverflow.com/users/2434834/sc-python-leaner"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1495760655, "post_id": 44167524, "comment_id": 75397963, "body": "Awesome Gord Thompson, that was the problem.  Why does this have to be so confusing?  Well I am just learning this so.... Thank you again Gord Thompson"}], "owner": {"reputation": 229, "user_id": 2434834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c39323bfc3f62cb62266394f5faf111d?s=128&d=identicon&r=PG", "display_name": "Sc-python-leaner", "link": "https://stackoverflow.com/users/2434834/sc-python-leaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495656209, "creation_date": 1495656209, "question_id": 44167524, "link": "https://stackoverflow.com/questions/44167524/pyodbc-on-mac-connection-issues", "title": "Pyodbc on Mac connection issues", "body": "<p>I have FreeTDS, unixODBC in my python 3.6.1 installation\nI'm trying to get pyodbc connected to my sql server (local VM) . I have tried the following to test configuration of freetds</p>\n\n<p>tsql -S servername -U pydata</p>\n\n<p>I get the following message</p>\n\n<p>Error 20012 (severity 2):\n    Server name not found in configuration files.\nlocale is \"en_US.UTF-8\"\nlocale charset is \"UTF-8\"\nusing default charset \"UTF-8\"\nError 20013 (severity 2):\n    Unknown host machine name.\nThere was a problem connecting to the server</p>\n\n<p>however if I use tsql -S 10.0.0.123 -U pydata -P password\ni connect just fine with no issues.  I have triple checked the Freetds.conf file as well as the odbc.ini and odbcinst.ini files.   </p>\n\n<p>Anyone have any ideas why my entry for the server is not working?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 2523817, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e5813edf47aec03308bcebc826908ce4?s=128&d=identicon&r=PG", "display_name": "Sagar Waghmode", "link": "https://stackoverflow.com/users/2523817/sagar-waghmode"}, "is_accepted": false, "score": 0, "last_activity_date": 1495658256, "creation_date": 1495658256, "answer_id": 44168057, "question_id": 44167497, "link": "https://stackoverflow.com/questions/44167497/dropping-different-possible-combination-of-values-from-a-column-in-pandas-datafr/44168057#44168057", "title": "Dropping different possible combination of values from a column in pandas dataframe iteratively", "body": "<p>This is not a great solution but will probably help you achieve what you are looking for:</p>\n\n<pre><code>import pandas as pd \nData = pd.DataFrame({'L1': [1,2,3,4,5], 'L2': [6,7,3,5,6], 'output':[10,11,12,13,14]})\nnum_iterations = 1\nnum_values = 3\nfor i in range(0, num_iterations):\n    tmp_data = Data.copy()\n    tmp_data.loc[i*num_values:num_values*(i+1)-1, 'output'] = ''\n    print tmp_data\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1495659394, "creation_date": 1495659394, "answer_id": 44168311, "question_id": 44167497, "link": "https://stackoverflow.com/questions/44167497/dropping-different-possible-combination-of-values-from-a-column-in-pandas-datafr/44168311#44168311", "title": "Dropping different possible combination of values from a column in pandas dataframe iteratively", "body": "<p>This gives you a concatenated dataframe with every combination using <code>pd.concat</code> and <code>itertools.combinations</code></p>\n\n<pre><code>from itertools import combinations\nimport pandas as pd\n\ndef mask(df, col, idx):\n    d = df.copy()\n    d.loc[list(idx), col] = ''\n    return d\n\nn = 2\npd.concat({c: mask(Data, 'ouptput', c) for c in combinations(Data.index, n)})\n\n       L1  L2 ouptput\n0 1 0   1   6        \n    1   2   7        \n    2   3   3      12\n    3   4   5      13\n    4   5   6      14\n  2 0   1   6        \n    1   2   7      11\n    2   3   3        \n    3   4   5      13\n    4   5   6      14\n  3 0   1   6        \n    1   2   7      11\n    2   3   3      12\n    3   4   5        \n    4   5   6      14\n  4 0   1   6        \n    1   2   7      11\n    2   3   3      12\n    3   4   5      13\n    4   5   6        \n1 2 0   1   6      10\n    1   2   7        \n    2   3   3        \n    3   4   5      13\n    4   5   6      14\n  3 0   1   6      10\n    1   2   7        \n    2   3   3      12\n    3   4   5        \n    4   5   6      14\n  4 0   1   6      10\n    1   2   7        \n    2   3   3      12\n    3   4   5      13\n    4   5   6        \n2 3 0   1   6      10\n    1   2   7      11\n    2   3   3        \n    3   4   5        \n    4   5   6      14\n  4 0   1   6      10\n    1   2   7      11\n    2   3   3        \n    3   4   5      13\n    4   5   6        \n3 4 0   1   6      10\n    1   2   7      11\n    2   3   3      12\n    3   4   5        \n    4   5   6        \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7512732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b21c2dadf1d50bc234b0fd88232e57?s=128&d=identicon&r=PG&f=1", "display_name": "Senthamilaruvi", "link": "https://stackoverflow.com/users/7512732/senthamilaruvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1495659394, "creation_date": 1495656124, "question_id": 44167497, "link": "https://stackoverflow.com/questions/44167497/dropping-different-possible-combination-of-values-from-a-column-in-pandas-datafr", "title": "Dropping different possible combination of values from a column in pandas dataframe iteratively", "body": "<p>I have a data frame as shown below:</p>\n\n<pre><code>import pandas as pd \nData = pd.DataFrame({'L1': [1,2,3,4,5], 'L2': [6,7,3,5,6], 'ouptput':[10,11,12,13,14]})\nData\n</code></pre>\n\n<p>Yields,</p>\n\n<pre><code>    L1  L2  ouptput\n0   1   6   10\n1   2   7   11\n2   3   3   12\n3   4   5   13\n4   5   6   14\n</code></pre>\n\n<p>I want to loop through the data to remove n number of values from the column 'output' in above Data, where n = [1,2,3,4] and assign it to a new data frame 'Test_Data'. For example if I assign n = 2 the function should produce</p>\n\n<p>Test_Data - iteration 1  as </p>\n\n<pre><code>       L1   L2  ouptput\n    0   1   6   \n    1   2   7   \n    2   3   3   12\n    3   4   5   13\n    4   5   6   14\n</code></pre>\n\n<p>Test_Data - iteration 2  as </p>\n\n<pre><code>       L1   L2  ouptput\n    0   1   6   10\n    1   2   7   11\n    2   3   3   \n    3   4   5   \n    4   5   6   14\n</code></pre>\n\n<p>like wise it should produce a data frame with 2 values removed from the 'output' column in data frame. It should produce a new output (new combination) everytime. No output should be repeated. Also I should have control over the number of iterations. Eample 5c3 has 10 possible combinations. But I should be able to stop it at 8 iterations.</p>\n"}, {"tags": ["python", "python-2.7", "generator"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1495656093, "post_id": 44167465, "comment_id": 75351072, "body": "The answer is yes, why not?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 1, "creation_date": 1495656651, "post_id": 44167465, "comment_id": 75351378, "body": "Depends on your semantics, do you want to keep running code until data is available, then you may need to look at an event loop, e.g. <code>asyncio</code>."}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1495656764, "post_id": 44167465, "comment_id": 75351435, "body": "Please refer to updated question, I tried to explain where I think there is the problem."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1495657224, "post_id": 44167465, "comment_id": 75351638, "body": "<code>We can&#39;t know when data will arrive, so we can&#39;t just call</code> Why not? I assume that <code>serial_port.read()</code> will block until there&#39;s data. What&#39;s wrong with that?"}], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495657154, "creation_date": 1495655994, "last_edit_date": 1495657154, "question_id": 44167465, "link": "https://stackoverflow.com/questions/44167465/python-generator-for-streaming-data", "title": "Python Generator for streaming data", "body": "<p>As far as I understand, generators are useful when you want to generate a value on the fly and don't want to have saved all values to memory prior to that. </p>\n\n<p>Can Generator be applied to data that is being streamed? Like for the data that is being <code>read()</code> from a <code>serial_port</code>?</p>\n\n<p>My problem is how the function that generates the data ,<code>serial_port.read()</code>, should be enclosed in a function <code>f_encloses_serial_read()</code> that returns the generator. We can't know when data will arrive, so we can't just call <code>f_encloses_serial_read()</code>  to <code>yield</code> new data. It might not have one now, but maybe later it will have new one.</p>\n"}, {"tags": ["python", "django", "django-models", "django-templates", "django-views"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1495656181, "post_id": 44167420, "comment_id": 75351116, "body": "I guess this <code>urls.py</code> is the one for your &quot;courses&quot; app. What is in your main <code>urls.py</code> file?"}, {"owner": {"reputation": 179, "user_id": 7418764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-ANqF7SABuyY/AAAAAAAAAAI/AAAAAAAAINY/Rq8c1SQ4_wM/photo.jpg?sz=128", "display_name": "electro7912", "link": "https://stackoverflow.com/users/7418764/electro7912"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1495656272, "post_id": 44167420, "comment_id": 75351168, "body": "Just added my main urls.py file"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1495656453, "post_id": 44167420, "comment_id": 75351270, "body": "There! The problem is that your main <code>urls.py</code> is not including the <code>urls.py</code> from the application, it is just resolving every path starting with <code>courses&#47;</code> to the <code>course_list</code> view. I will add an answer."}, {"owner": {"reputation": 389, "user_id": 6412073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3777715f290e4338fc3cd9cb5ebef141?s=128&d=identicon&r=PG", "display_name": "rhys_gbs", "link": "https://stackoverflow.com/users/6412073/rhys-gbs"}, "edited": false, "score": 0, "creation_date": 1495656666, "post_id": 44167420, "comment_id": 75351388, "body": "Have you tried adding a / at the end of the URL in the browser? And add courses/ in your urls.py for the detail view before the pk"}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 2468325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52043875f68011d2441d06d6ad3d4fdb?s=128&d=identicon&r=PG", "display_name": "Naseer-shaik", "link": "https://stackoverflow.com/users/2468325/naseer-shaik"}, "is_accepted": false, "score": 1, "last_activity_date": 1495656840, "creation_date": 1495656840, "answer_id": 44167668, "question_id": 44167420, "link": "https://stackoverflow.com/questions/44167420/detailview-template-not-displaying-its-data/44167668#44167668", "title": "DetailView template not displaying it&#39;s data", "body": "<p>I think the you need these url mappings..! This should do the trick.</p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^applicationName/$', views.ListView.as_view(), name='courses'),\n    url(r'^applicationName/(?P&lt;pk&gt;\\d+)$', views.CourseDetailView.as_view(), name='course-detail'),\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 7418764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-ANqF7SABuyY/AAAAAAAAAAI/AAAAAAAAINY/Rq8c1SQ4_wM/photo.jpg?sz=128", "display_name": "electro7912", "link": "https://stackoverflow.com/users/7418764/electro7912"}, "edited": false, "score": 0, "creation_date": 1495657225, "post_id": 44167671, "comment_id": 75351639, "body": "Brilliant. This seems to work. Thanks for all you&#39;re help"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 179, "user_id": 7418764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-ANqF7SABuyY/AAAAAAAAAAI/AAAAAAAAINY/Rq8c1SQ4_wM/photo.jpg?sz=128", "display_name": "electro7912", "link": "https://stackoverflow.com/users/7418764/electro7912"}, "edited": false, "score": 0, "creation_date": 1495657317, "post_id": 44167671, "comment_id": 75351691, "body": "Welcome to stackoverflow, a good question is half the answer."}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": true, "score": 0, "last_activity_date": 1495656856, "creation_date": 1495656856, "answer_id": 44167671, "question_id": 44167420, "link": "https://stackoverflow.com/questions/44167420/detailview-template-not-displaying-its-data/44167671#44167671", "title": "DetailView template not displaying it&#39;s data", "body": "<p>The problem is in your main <code>urls.py</code> file - this line makes any URL path starting with 'courses/' resolve to the <code>course_list</code> view:</p>\n\n<pre><code>url(r'^courses/', course_list),\n</code></pre>\n\n<p>So Django will never reach the <code>course_detail</code> view. Instead, you must \"include\" the application-specific URLs:</p>\n\n<pre><code>url(r'^courses/', include('myproject.myapp.urls'),\n</code></pre>\n\n<p>Where <code>myproject</code> is your main project name, and <code>myapp</code> is your app name (make sure you also registered your application under <code>INSTALLED_APPS</code> at your <code>settings.py</code> file). </p>\n"}], "owner": {"reputation": 179, "user_id": 7418764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-ANqF7SABuyY/AAAAAAAAAAI/AAAAAAAAINY/Rq8c1SQ4_wM/photo.jpg?sz=128", "display_name": "electro7912", "link": "https://stackoverflow.com/users/7418764/electro7912"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 44167671, "answer_count": 2, "score": 1, "last_activity_date": 1495656856, "creation_date": 1495655822, "last_edit_date": 1495656258, "question_id": 44167420, "link": "https://stackoverflow.com/questions/44167420/detailview-template-not-displaying-its-data", "title": "DetailView template not displaying it&#39;s data", "body": "<p>within an app I have two models, named Course and Step. Every Step belongs to a Course and each Course has many steps. However, I'm having problem creating a detailview for Steps. For example when i go to the url '<a href=\"http://127.0.0.1:8000/courses/1\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/courses/1</a>' it should display steps for <code>course.objects.get(pk=1)</code>. However what i get back is just the page for course, i.e, <a href=\"http://127.0.0.1:8000/courses\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/courses</a>'. </p>\n\n<p>Model </p>\n\n<pre><code>from django.db import models\n\n# Create your models here.\nclass Course(models.Model):\n    created_at = models.DateTimeField(auto_now_add=True)\n    title = models.CharField(max_length= 255)\n    description = models.TextField()\n\n    def __str__(self):\n        return self.title\n\nclass Step(models.Model):\n    title = models.CharField(max_length = 255)\n    description = models.TextField()\n    order = models.IntegerField()\n    course = models.ForeignKey(Course)\n\n    def __str__(self):\n        return self.title\n</code></pre>\n\n<p>Url</p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\n\n\nurlpatterns = [\n    url(r'^$', views.course_list),\n    url(r'(?P&lt;pk&gt;\\d+)/$', views.course_detail)\n]\n</code></pre>\n\n<p>View</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.http import HttpResponse\n# Create your views here.\nfrom .models import Course, Step\n\ndef course_list(request):\n    courses = Course.objects.all()\n    return render(request, 'courses/course_list.html', {'courses': courses})\n\ndef course_detail(request, pk):\n    course = Course.objects.get(pk=pk)\n    return render(request, 'courses/course_detail.html', {'course': course})\n</code></pre>\n\n<p>course_detail.html</p>\n\n<pre><code>{% extends 'layout.html' %}\n{% block title %}{{course.title}}{% endblock %}\n{% block content %}\n&lt;article&gt;\n    &lt;h2&gt;{{ course.title }} %&lt;/h2&gt;\n    {{course.description}}\n    &lt;section&gt;\n        {% for step in course.step_set.all %}\n        &lt;h3&gt;{{ step.title }}&lt;/h3&gt;\n        {{step.description}}\n        {% endfor %}\n    &lt;/section&gt;\n&lt;/article&gt;\n{% endblock %}\n</code></pre>\n\n<p>Main Urls</p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\nfrom courses.views import course_list\nfrom django.conf import settings\nfrom django.conf.urls.static import static\nfrom . import views\n\nurlpatterns = [\n    url(r'^courses/', course_list),\n    url(r'^admin/', admin.site.urls),\n    url(r'^$', views.hello_world),\n]\nif settings.DEBUG:\n    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\n</code></pre>\n\n<p>I just can't seem to recognize where i went wrong</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1495656076, "creation_date": 1495656076, "answer_id": 44167486, "question_id": 44167418, "link": "https://stackoverflow.com/questions/44167418/expand-category-in-a-column-to-column-name-in-pandas/44167486#44167486", "title": "Expand category in a column to column name in pandas", "body": "<p>Let's try using <code>set_index</code>, <code>stack</code>, <code>unstack</code> then mapping that multiindex columns to a signle level using <code>map</code> and <code>join</code>:</p>\n\n<pre><code>df.set_index(['name','day']).stack().unstack([2,1])\ndf_1.columns = df_1.columns.map('_'.join)\nprint(df_1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       apple_a  oranges_a  apple_b  oranges_b\nname                                         \njohn         5         10        4         23\nlouis        1         15        3          5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 2, "last_activity_date": 1495656373, "creation_date": 1495656373, "answer_id": 44167558, "question_id": 44167418, "link": "https://stackoverflow.com/questions/44167418/expand-category-in-a-column-to-column-name-in-pandas/44167558#44167558", "title": "Expand category in a column to column name in pandas", "body": "<p>You have already got the desired output, you need to format the column names</p>\n\n<pre><code>df = df.pivot('name', columns='day')\ndf.columns = ['_'.join(col).strip() for col in df.columns.values]\ndf = df.reset_index()\n\n    name    apple_a apple_b oranges_a   oranges_b\n0   john    5       4       10          23\n1   louis   1       3       15          5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1495721946, "post_id": 44182477, "comment_id": 75379631, "body": "Why not take the best from both solutions?  +1"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1495727009, "post_id": 44182477, "comment_id": 75383092, "body": "Great that it worked for you, don&#39;t forget to accept an answer. @ScottBoston&#39;s solution of mapping multiindex columns to single level is far superior so I would go with that."}], "tags": [], "owner": {"reputation": 281, "user_id": 2548084, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c60dce2dd00ef6ca8cc549c630c78465?s=128&d=identicon&r=PG", "display_name": "Rhenan Bartels", "link": "https://stackoverflow.com/users/2548084/rhenan-bartels"}, "is_accepted": false, "score": 1, "last_activity_date": 1495720827, "creation_date": 1495720827, "answer_id": 44182477, "question_id": 44167418, "link": "https://stackoverflow.com/questions/44167418/expand-category-in-a-column-to-column-name-in-pandas/44182477#44182477", "title": "Expand category in a column to column name in pandas", "body": "<p>thank you all very much!\nBased on your answers I've got a code that does the trick:</p>\n\n<pre><code>n_df = df.pivot('name', columns='day')\nn_df.columns = n_df.columns.map('_'.join)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       apple_a  apple_b  oranges_a  oranges_b\n  name\n  john       5        4         10         23\n  louis      1        3         15          5\n</code></pre>\n\n<p>Thanks again!</p>\n"}], "owner": {"reputation": 281, "user_id": 2548084, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c60dce2dd00ef6ca8cc549c630c78465?s=128&d=identicon&r=PG", "display_name": "Rhenan Bartels", "link": "https://stackoverflow.com/users/2548084/rhenan-bartels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 44167558, "answer_count": 3, "score": 2, "last_activity_date": 1495720827, "creation_date": 1495655820, "question_id": 44167418, "link": "https://stackoverflow.com/questions/44167418/expand-category-in-a-column-to-column-name-in-pandas", "title": "Expand category in a column to column name in pandas", "body": "<p>I'm trying to expand (not sure if it is the right word) some categorical \ndata into columns using pandas.</p>\n\n<p>Let's say I have the following data frame:</p>\n\n<pre><code>df = pandas.DataFrame({'name': ['john', 'john', 'louis', 'louis'], \n                       'day':['a', 'b', 'a', 'b'], 'oranges':[10, 23, 15, 5],\n                       'apple': [5, 4, 1, 3]})\n</code></pre>\n\n<p>Which produces this table:</p>\n\n<pre><code>       apple day   name  oranges\n    0       5  a   john       10\n    1       4  b   john       23\n    2       1  a   louis      15\n    3       3  b   louis       5\n</code></pre>\n\n<p>I would like to use some pandas method to produce a table like this:</p>\n\n<pre><code>   apple_a apple_b name  oranges_a  oranges_b\n 0       5       4  john         10         23\n 1       1       3  louis        15          5\n</code></pre>\n\n<p>So far I've tried:</p>\n\n<pre><code>df.pivot('name', columns='day')\n\n       apple        oranges\n   day        a  b        a   b\n   name\n   john       5  4        10  23\n   louis      1  3        15   5\n</code></pre>\n\n<p>My question is: how can I split my data and create more columns based on a categorical information using Pandas?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Rhenan</p>\n"}, {"tags": ["python", "django", "postgresql", "django-migrations"], "comments": [{"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1495659630, "post_id": 44167386, "comment_id": 75352771, "body": "Precisely what kind of migration is this?  The dirty work of adding a new column/field with a default value should happen on the db backend, not within the django process running the migration.  Did you modify the migration script?"}], "answers": [{"comments": [{"owner": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "edited": false, "score": 0, "creation_date": 1495656561, "post_id": 44167568, "comment_id": 75351327, "body": "But is it possible to make a migration use this?"}, {"owner": {"reputation": 2655, "user_id": 3727348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cVZF9.png?s=128&g=1", "display_name": "Taras Matsyk", "link": "https://stackoverflow.com/users/3727348/taras-matsyk"}, "reply_to_user": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "edited": false, "score": 0, "creation_date": 1495656764, "post_id": 44167568, "comment_id": 75351436, "body": "what kind of migration are you talking about? Adding a row? Changing a format of data?"}, {"owner": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "edited": false, "score": 0, "creation_date": 1495657037, "post_id": 44167568, "comment_id": 75351561, "body": "adding fields to the model"}, {"owner": {"reputation": 2655, "user_id": 3727348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cVZF9.png?s=128&g=1", "display_name": "Taras Matsyk", "link": "https://stackoverflow.com/users/3727348/taras-matsyk"}, "reply_to_user": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "edited": false, "score": 0, "creation_date": 1495657566, "post_id": 44167568, "comment_id": 75351798, "body": "I&#39;ve updated the answer. Hope, you get at least an idea of where to go."}, {"owner": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "edited": false, "score": 0, "creation_date": 1496068640, "post_id": 44167568, "comment_id": 75498867, "body": "Unfortunately  this didn&#39;t help as much as I would hoped, it certainly seems to be a limitation of Postgres like you said and instead I added more storage to my staging server and move the data directory of Postgres on production to give it access to a bigger drive. I will accept this answer as it provides some usual information still. Much appreciated."}], "tags": [], "owner": {"reputation": 2655, "user_id": 3727348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cVZF9.png?s=128&g=1", "display_name": "Taras Matsyk", "link": "https://stackoverflow.com/users/3727348/taras-matsyk"}, "is_accepted": true, "score": 5, "last_activity_date": 1495657416, "last_edit_date": 1495657416, "creation_date": 1495656409, "answer_id": 44167568, "question_id": 44167386, "link": "https://stackoverflow.com/questions/44167386/django-migration-11-million-rows-need-to-break-it-down/44167568#44167568", "title": "Django migration 11 million rows, need to break it down", "body": "<p>The issue comes from a Postgresql which rewrites each row on adding a new column (field).</p>\n\n<p>What you would need to do is to write your own data migration in the following way:</p>\n\n<ol>\n<li>Add a new column with <code>null=True</code>. In this case data will not be\nrewritten and migration will finish pretty fast. </li>\n<li>Migrate it </li>\n<li>Add a default value </li>\n<li>Migrate it again.</li>\n</ol>\n\n<p>That is basically a simple pattern on how to deal with adding a new row in a huge postgres database.</p>\n"}], "owner": {"reputation": 1601, "user_id": 2848524, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1368923984/picture?type=large", "display_name": "Sam Buckingham", "link": "https://stackoverflow.com/users/2848524/sam-buckingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 2, "accepted_answer_id": 44167568, "answer_count": 1, "score": 5, "last_activity_date": 1495657416, "creation_date": 1495655707, "question_id": 44167386, "link": "https://stackoverflow.com/questions/44167386/django-migration-11-million-rows-need-to-break-it-down", "title": "Django migration 11 million rows, need to break it down", "body": "<p>I have a table which I am working on and it contains 11 million rows there abouts... I need to run a migration on this table but since Django trys to store it all in cache I run out of ram or disk space which ever comes first and it comes to abrupt halt.</p>\n\n<p>I'm curious to know if anyone has faced this issue and has come up with a solution to essentially \"paginate\" migrations maybe into blocks of 10-20k rows at a time?</p>\n\n<p>Just to give a bit of background I am using Django 1.10 and Postgres 9.4 and I want to keep this automated still if possible (which I still think it can be)</p>\n\n<p>Thanks\nSam</p>\n"}, {"tags": ["python", "list", "python-3.x", "append"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495655575, "post_id": 44167306, "comment_id": 75350825, "body": "What does <code>self.query(*i)</code> do? What are you <i>trying to accomplish</i>, it isn&#39;t clear from your code, and indeed, your code includes a lot of stuff that we have no idea. You need to provide reproducible examples if you want help. And ideally, a well-specified problem statement."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495655718, "post_id": 44167306, "comment_id": 75350881, "body": "I suspect your problem comes from the use of <code>rem = all_users.index(i)</code>, which will <i>always give you the first matching index</i>. Instead, you shuold iterate over the index <i>and the element</i> using <code>enumerate</code> like so: <code>for i, e in  enumerate(all_users): do_stuff_with_index(i); do_stuff_with_element(e)</code>"}, {"owner": {"reputation": 21, "user_id": 6742101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7dad8a9f861b743765035258e631cc5?s=128&d=identicon&r=PG&f=1", "display_name": "hub_phoenix", "link": "https://stackoverflow.com/users/6742101/hub-phoenix"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495656093, "post_id": 44167306, "comment_id": 75351071, "body": "it returns a boolean value, if it returns false, for a list in all_user, the index of the list should be inserted."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495656245, "post_id": 44167306, "comment_id": 75351154, "body": "Right, so you should do what I said above. Also, <code>if self.query(*i) == True:</code> should be <code>if self.query(*i):</code>, and <code>print(list(idx))</code> has a redundant call to <code>list</code>, because <code>idx</code> is <i>already a list</i>, unless you meant to create and throw-away a copy for no reason."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495656183, "post_id": 44167493, "comment_id": 75351117, "body": "You should really just use <code>enumerate</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495656276, "post_id": 44167493, "comment_id": 75351173, "body": "Also, this is tagged Python 3, so this will throw a <code>NameError</code>, since <code>xrange</code> will not be defined. You just need <code>range</code>, but again, you <i>really want enumerate</i>."}, {"owner": {"reputation": 21, "user_id": 6742101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7dad8a9f861b743765035258e631cc5?s=128&d=identicon&r=PG&f=1", "display_name": "hub_phoenix", "link": "https://stackoverflow.com/users/6742101/hub-phoenix"}, "edited": false, "score": 0, "creation_date": 1495657779, "post_id": 44167493, "comment_id": 75351905, "body": "so if i have an empty list in all_users, and i dont want to pass it to the query function, how do i append that in idx?"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1495699937, "post_id": 44167493, "comment_id": 75365812, "body": "I don&#39;t know what you query function does, but if you want to check if the <code>list</code> is empty you can use <code>if all_users[i]: #pass to func</code> <code>else: #append index to idx</code>"}], "tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": true, "score": 0, "last_activity_date": 1495656314, "last_edit_date": 1495656314, "creation_date": 1495656108, "answer_id": 44167493, "question_id": 44167306, "link": "https://stackoverflow.com/questions/44167306/how-to-insert-duplicate-index-in-list/44167493#44167493", "title": "how to insert duplicate index in list", "body": "<p>I suggest you <code>loop</code> in a <code>range</code> of <code>all_users</code> length so you keep track of <code>index</code>, like:</p>\n\n<pre><code>idx = []\nfor i in range(len(all_users)):\n\n   self.query(*all_users[i])\n   if self.query(*all_users[i]) == True:\n       print(\"yes\")\n   else:\n       print(\"No\")\n       idx.append(i)\n\nprint(list(idx))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6742101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7dad8a9f861b743765035258e631cc5?s=128&d=identicon&r=PG&f=1", "display_name": "hub_phoenix", "link": "https://stackoverflow.com/users/6742101/hub-phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 44167493, "answer_count": 1, "score": 0, "last_activity_date": 1495660588, "creation_date": 1495655369, "last_edit_date": 1495660588, "question_id": 44167306, "link": "https://stackoverflow.com/questions/44167306/how-to-insert-duplicate-index-in-list", "title": "how to insert duplicate index in list", "body": "<pre><code>idx = []\nfor i in all_users:\n\n   self.query(*i)\n   if self.query(*i) == True:\n       print(\"yes\")\n   else:\n       print(\"No\")\n       rem = all_users.index(i)\n       idx.append(rem)\n\nprint(list(idx))\n</code></pre>\n\n<p>so this works, but the problem is when there is a duplicate value in all_users and for which self.query is false, it inserts the first index of the value.</p>\n\n<pre><code>e.g, all_users = [[2,5,7,9,4], [17,18], [4], [17,18], [5]]\nidx = [1,2,1]\n\nidx = [1,2,3] #correct\n</code></pre>\n\n<p>so if i have an empty list in all_users, and i dont want to pass it to the query function, how do i append that in idx? #edited</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 1877, "user_id": 3760481, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/666e3cfce938d9e908d98d96d88600ef?s=128&d=identicon&r=PG&f=1", "display_name": "michael-mammut", "link": "https://stackoverflow.com/users/3760481/michael-mammut"}, "edited": false, "score": 0, "creation_date": 1495657253, "post_id": 44167404, "comment_id": 75351657, "body": "Thank you for your very fast reply, An error occurse and turns me to the following question: I get an error to change the <code>urls.py</code> entry to ` url(r&#39;^movements/&#39;, views.MovementDirection.as_view({&#39;get&#39;: &#39;on&#39;})),` and remove annotation.   The annotaiton error was <code>NameError: name &#39;list_route&#39; is not defined</code>. And the other error was <code>TypeError: The </code>actions` argument must be provided when calling <code>.as_view()</code> on a ViewSet. For example <code>.as_view({&#39;get&#39;: &#39;list&#39;})</code>"}, {"owner": {"reputation": 1877, "user_id": 3760481, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/666e3cfce938d9e908d98d96d88600ef?s=128&d=identicon&r=PG&f=1", "display_name": "michael-mammut", "link": "https://stackoverflow.com/users/3760481/michael-mammut"}, "edited": false, "score": 0, "creation_date": 1495657631, "post_id": 44167404, "comment_id": 75351830, "body": "Annotation Error --&gt; checked ;) --&gt; import was missing"}, {"owner": {"reputation": 2655, "user_id": 3727348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cVZF9.png?s=128&g=1", "display_name": "Taras Matsyk", "link": "https://stackoverflow.com/users/3727348/taras-matsyk"}, "reply_to_user": {"reputation": 1877, "user_id": 3760481, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/666e3cfce938d9e908d98d96d88600ef?s=128&d=identicon&r=PG&f=1", "display_name": "michael-mammut", "link": "https://stackoverflow.com/users/3760481/michael-mammut"}, "edited": false, "score": 0, "creation_date": 1495657655, "post_id": 44167404, "comment_id": 75351846, "body": "You have to import a <code>list_route</code> from <code>rest_framework.decorators</code>. I am not sure if that works on a <code>ViewSet</code>, maybe I misled you with my answer."}, {"owner": {"reputation": 1877, "user_id": 3760481, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/666e3cfce938d9e908d98d96d88600ef?s=128&d=identicon&r=PG&f=1", "display_name": "michael-mammut", "link": "https://stackoverflow.com/users/3760481/michael-mammut"}, "edited": false, "score": 1, "creation_date": 1495660252, "post_id": 44167404, "comment_id": 75353034, "body": "well.. to complete this issue there are my steps.  <code>url(r&#39;^movements&#47;on&#47;$&#39;, views.MovementDirection.as_view({&#39;get&#39;:&#39;on&#39;})),     url(r&#39;^movements&#47;off&#47;$&#39;, views.MovementDirection.as_view({&#39;get&#39;:&#39;off&#39;})),</code> I define the URL for each subURL, and I add the method to each annotation  <code>@detail_route(methods=[&#39;get&#39;])</code> in the <code>views.py</code> file"}], "tags": [], "owner": {"reputation": 2655, "user_id": 3727348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cVZF9.png?s=128&g=1", "display_name": "Taras Matsyk", "link": "https://stackoverflow.com/users/3727348/taras-matsyk"}, "is_accepted": true, "score": 5, "last_activity_date": 1495656119, "last_edit_date": 1495656119, "creation_date": 1495655780, "answer_id": 44167404, "question_id": 44167279, "link": "https://stackoverflow.com/questions/44167279/is-there-a-better-way-to-create-a-django-rest-web-service/44167404#44167404", "title": "Is there a better way to create a Django REST Web Service?", "body": "<p>Nope, you do not have to create a new class for a new url, what you need is a new action in your viewset.</p>\n\n<pre><code>url(r'^movements/$', views.MovementDirection.as_view()),\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>class MovementDirection(ModelViewSet): # please notice the class\n    @list_route\n    def register(self, request):\n        # you can make it on a whole endpoint\n        # or on a single instance by using @detail_route\n</code></pre>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/30410432/django-rest-framework-using-detail-route-and-detail-list\">this question</a> for more info on @detail_route vs @list_route</p>\n\n<p>Then you can call it by a request to <code>movements/register</code></p>\n"}], "owner": {"reputation": 1877, "user_id": 3760481, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/666e3cfce938d9e908d98d96d88600ef?s=128&d=identicon&r=PG&f=1", "display_name": "michael-mammut", "link": "https://stackoverflow.com/users/3760481/michael-mammut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 44167404, "answer_count": 1, "score": 1, "last_activity_date": 1495656119, "creation_date": 1495655277, "question_id": 44167279, "link": "https://stackoverflow.com/questions/44167279/is-there-a-better-way-to-create-a-django-rest-web-service", "title": "Is there a better way to create a Django REST Web Service?", "body": "<p>I'm new to Python Django - further to my question.</p>\n\n<p>I create a REST Web Service but I'm totaly unhappy with my code, but i can not find ab better solution.  Is it really  necessary to create new classes for each new URL part? If not, how can I find a better way for this issue?</p>\n\n<p><strong>urls.py</strong></p>\n\n<p>urlpatterns</p>\n\n<pre><code> = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^movement/$', views.MovementDirection.as_view()),\n    url(r'^movement/on/$', views.On.as_view()),\n    url(r'^movement/off/$', views.Off.as_view()),\n    url(r'^movement/stop/$', views.Stop.as_view()),\n    url(r'^movement/forward/$', views.Forward.as_view()),\n    url(r'^movement/backwards/$', views.Backward.as_view()),\n]\n\nurlpatterns = format_suffix_patterns(urlpatterns)\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>...\n#movement/forward\nclass Forward(APIView):\n    def get(self, request):\n        print(\"FORWARD\")\n        # engine control\n        return Response(\"Forward\")\n\n#movement/backwards\nclass Backward(APIView):\n    def get(self, request):\n        print(\"BACKWARD\")\n        # engine control\n        return Response(\"Backward\")\n...\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1853, "user_id": 6232665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eeea507e28cddc2bc1efc3b2b73c45?s=128&d=identicon&r=PG&f=1", "display_name": "zenwraight", "link": "https://stackoverflow.com/users/6232665/zenwraight"}, "edited": false, "score": 0, "creation_date": 1495655200, "post_id": 44167232, "comment_id": 75350665, "body": "You can create a script in either php or some other language of your choice, query the first table, manipulate your data as you want in the new table and then run the insert queries on the new row data"}], "answers": [{"comments": [{"owner": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495660432, "post_id": 44167307, "comment_id": 75353101, "body": "this is exactly what i needed! thank you! but why groupby(level=0)?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495660539, "post_id": 44167307, "comment_id": 75353144, "body": "If you remove the groupby level=0 you will get multiple group1 and group2, so I group all like index values and sum.  Just comment that line out and execute you&#39;ll see the results."}, {"owner": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495663239, "post_id": 44167307, "comment_id": 75354239, "body": "okay so then the column group 1 group 2 etc will be distinct/unique values rather than repeats, am i understanding correctly?"}, {"owner": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495663306, "post_id": 44167307, "comment_id": 75354263, "body": "also, why level = 0? i am reading this page here: <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a> not so much info on the numbers you can set the level to. so what if it&#39;s level 1?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495663333, "post_id": 44167307, "comment_id": 75354271, "body": "Yes, that is correct.  And, then we sum those values associated with group1 and group2 together."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495663406, "post_id": 44167307, "comment_id": 75354294, "body": "level=0 refers to the index, this is a single level index and it starts with zero.  If it were a multiindex, could group on any level."}, {"owner": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "edited": false, "score": 0, "creation_date": 1495670876, "post_id": 44167307, "comment_id": 75356394, "body": "Thank you so much for answering all my questions!! Really appreciate it"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1495655370, "creation_date": 1495655370, "answer_id": 44167307, "question_id": 44167232, "link": "https://stackoverflow.com/questions/44167232/how-to-create-true-false-table-with-given-two-columns/44167307#44167307", "title": "how to create true/false table with given two columns?", "body": "<h1>One way:</h1>\n\n<pre><code> df.set_index('group')['user'].str.get_dummies().groupby(level=0).sum()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         user A  user B  user C\ngroup                          \ngroup 1       1       1       1\ngroup 2       0       1       1\n</code></pre>\n\n<h1>Second way:</h1>\n\n<pre><code>df.groupby(['group','user'])['user'].count().unstack()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> user     user A  user B  user C\ngroup                          \ngroup 1     1.0     1.0     1.0\ngroup 2     NaN     1.0     1.0\n</code></pre>\n"}], "owner": {"reputation": 1307, "user_id": 5688999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rLiLO.jpg?s=128&g=1", "display_name": "alwaysaskingquestions", "link": "https://stackoverflow.com/users/5688999/alwaysaskingquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 44167307, "answer_count": 1, "score": 0, "last_activity_date": 1495655370, "creation_date": 1495655104, "question_id": 44167232, "link": "https://stackoverflow.com/questions/44167232/how-to-create-true-false-table-with-given-two-columns", "title": "how to create true/false table with given two columns?", "body": "<p>i have a pandas dataframe with two columns like this:</p>\n\n<pre><code>group             user\ngroup 1           user A\ngroup 1           user B\ngroup 1           user C\ngroup 2           user B\ngroup 2           user C\n</code></pre>\n\n<p>now i want to make it into a wide table. basically have a 1/0 value to indicate whether a user belongs to a group the desired outcome should look like (or have user as row and group as column):</p>\n\n<pre><code>            User A     User B     User C     User D\ngroup 1        1         1         1           0\ngroup 2        0         1         0           1\n</code></pre>\n\n<p>How can I do this? I tried looking up long table to wide, but seems like there requires a \"value\" but I dont have one. \nAny help is greatly appreciated!</p>\n"}]