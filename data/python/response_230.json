[{"tags": ["python", "class-method", "class-attributes"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1559779377, "post_id": 56469454, "comment_id": 99530169, "body": "It would just be <code>a</code> at that scope. But, is that what you actually want? Because it won&#39;t change with the class attribute, that is, if you mutate <code>X.a</code> then the default to <code>my_method</code> will still be <code>&#39;hello&#39;</code>"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1559779730, "post_id": 56469454, "comment_id": 99530223, "body": "One way to do it. Set the default of <code>c</code> to <code>None</code> and in the function body assign <code>c = X.a</code> if <code>c</code> is <code>None</code>. <a href=\"https://ideone.com/stTvoM\" rel=\"nofollow noreferrer\">example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": true, "score": 3, "last_activity_date": 1559788647, "last_edit_date": 1559788647, "creation_date": 1559780945, "answer_id": 56469611, "question_id": 56469454, "link": "https://stackoverflow.com/questions/56469454/how-can-i-use-a-python-class-attribute-as-a-default-value-for-a-classmethod/56469611#56469611", "title": "How can I use a Python Class attribute as a default value for a @Classmethod?", "body": "<p>It really depends what you want, but one way to get what you seem to want is to do it like this.</p>\n\n<pre><code>class X:\n    a = 'hello'\n    def __init__(self, b):\n        self.b = b\n    @classmethod\n    def my_method(cls, c=None):\n        if c is None:\n            c = X.a\n        print('cls.a = {}'.format(cls.a))\n        print('c = {}'.format(c))\n\nX.my_method()\n</code></pre>\n\n<p>Make the default <code>None</code> and check for <code>None</code> in the function body, assigning to <code>c</code> if it is found to be <code>None</code>.  If you ever wanted <code>None</code> to be a valid argument for the function then it wouldn't work, but that doesn't seem likely.</p>\n\n<p>This idiom is often used in python to avoid the pitfalls mutable default argument, but here it delays the assignment from <code>X.a</code> until after <code>X</code> has actually been defined.</p>\n\n<p>It also means that if you change <code>X.a</code> then <code>my_method</code> will pick up the new value. You may or may not want that.</p>\n"}], "owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 56469611, "answer_count": 1, "score": 0, "last_activity_date": 1559788647, "creation_date": 1559779192, "question_id": 56469454, "link": "https://stackoverflow.com/questions/56469454/how-can-i-use-a-python-class-attribute-as-a-default-value-for-a-classmethod", "title": "How can I use a Python Class attribute as a default value for a @Classmethod?", "body": "<p>Take a look at the code below.</p>\n\n<p>I want to use the value of <code>a</code> as the default value for argument <code>c</code> in the declaration of the classmethod <code>my_method()</code>. </p>\n\n<p>How can I do it? The example below fails.</p>\n\n<pre><code>&gt;&gt;&gt; class X:\n...     a = 'hello'\n...     def __init__(self, b):\n...         self.b = b\n...     @classmethod\n...     def my_method(cls, c=X.a):\n...         print 'cls.a = {}'.format(cls.a)\n...         print 'c = {}'.format(c)\n...\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;stdin&gt;\", line 6, in X\nNameError: name 'X' is not defined\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1559836998, "post_id": 56469492, "comment_id": 99552958, "body": "Yes it does, since it overrides <code>__getitem__</code> of the meta class that generates <code>Enum</code> class instances."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1560204412, "post_id": 56469492, "comment_id": 99651303, "body": "I&#39;ve updated my answer with a solution to override <code>__getitem__</code> of just one specific class then."}, {"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 1, "creation_date": 1560204891, "post_id": 56469492, "comment_id": 99651399, "body": "Fantastic work. I personally wouldn&#39;t trade my workaround for this amount of complexity, but others might."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1560232916, "post_id": 56469492, "comment_id": 99656774, "body": "The complexity of creating modified copies the <code>EnumMeta</code> and <code>Enum</code> classes can be hidden into a separate module if the goal is to make your user-facing subclass <code>Level</code> as clean as possible."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1563478460, "post_id": 56469492, "comment_id": 100724030, "body": "While I don&#39;t encourage <a href=\"https://stackoverflow.com/q/43730305/208880\">subclassing <code>EnumMeta</code></a>, it is much easier to do that than what you are doing here."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1563484753, "post_id": 56469492, "comment_id": 100726470, "body": "@EthanFurman Thanks for your input. Subclassing <code>EnumMeta</code> was actually the first thing that came to my mind, but upon further inspection I realized that it would not be a viable approach because <code>Enum</code> specifically uses <code>EnumMeta</code> as a metaclass, which means that one would have to write a new <code>Enum</code> class to be able to use this new subclass of <code>EnumMeta</code> as a metaclass. Furthermore, the <code>EnumMeta._get_mixins</code> method has a validation check of <code>if not issubclass(base, Enum):</code> that hard-codes <code>Enum</code> as a required base class, so using a new <code>Enum</code> class would fail at this validation."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1563485060, "post_id": 56469492, "comment_id": 100726586, "body": "@EthanFurman ...which is why I had to parse the source and modify the AST in order to make these hard-coded names to the names of the new classes. Please feel free to try implementing such a subclass yourself and let me know if you find a way to do it without having to modify the source or a copy of the AST."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1563497382, "post_id": 56469492, "comment_id": 100729192, "body": "<a href=\"https://stackoverflow.com/q/43730305/208880\">Dynamic member creation</a>;  <a href=\"https://stackoverflow.com/q/54274002/208880\">Preventing attribute assignment</a>;  <a href=\"https://stackoverflow.com/q/56131308/208880\">Making an Abstract Enum</a>."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 1, "creation_date": 1563499083, "post_id": 56469492, "comment_id": 100729472, "body": "As you&#39;ll notice from the above examples, creating a new <code>Enum</code> with a subclassed <code>EnumMeta</code> is as simple as <code>class MyEnum(Enum, metaclass=MyNewMetaclass)</code>"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1563555267, "post_id": 56469492, "comment_id": 100752047, "body": "@EthanFurman Thanks. I did consider subclassing <code>Enum</code> with <code>metaclass</code> pointing to the new subclass of <code>EnumMeta</code> as well but did not actually try it only because I wrongly thought that it would result in this new subclass of <code>Enum</code> becoming just a class of enumerated constants. I&#39;ve rewritten my answer as suggested. Thanks again."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1563555385, "last_edit_date": 1563555385, "creation_date": 1559779518, "answer_id": 56469492, "question_id": 56469362, "link": "https://stackoverflow.com/questions/56469362/how-to-create-an-indexable-and-sliceable-enum-with-string-values-in-python/56469492#56469492", "title": "How to create an indexable and sliceable enum with string values in Python?", "body": "<p>You can subclass <code>EnumMeta</code> to override the <code>__getitem__</code> method with additional conditions to return a list of <code>Enum</code> values or a specific <code>Enum</code> value based on the given index, and create a subclass of <code>Enum</code> with the aforementioned subclass of <code>EnumMeta</code> as the metaclass, so that any subclass of this new subclass of <code>Enum</code> can be indexed as desired:</p>\n\n<pre><code>from itertools import islice\nfrom enum import Enum, EnumMeta\n\nclass IndexableEnumMeta(EnumMeta):\n    def __getitem__(cls, index):\n        if isinstance(index, slice):\n            return [cls._member_map_[i] for i in islice(cls._member_map_, index.start, index.stop, index.step)]\n        if isinstance(index, int):\n            return cls._member_map_[next(islice(cls._member_map_, index, index + 1))]\n        return cls._member_map_[index]\n\nclass IndexableEnum(Enum, metaclass=IndexableEnumMeta):\n    pass\n\nclass Level(IndexableEnum):\n    DATA_CHECK = \"data check\"\n    DESIGN_CHECK = \"design check\"\n    ALERT = \"alert\"\n</code></pre>\n\n<p>so that <code>Level[1:3]</code> returns:</p>\n\n<pre><code>[&lt;Level.DESIGN_CHECK: 'design check'&gt;, &lt;Level.ALERT: 'alert'&gt;]\n</code></pre>\n\n<p>and <code>Level[1]</code> returns:</p>\n\n<pre><code>Level.DESIGN_CHECK\n</code></pre>\n\n<p>(Credit goes to @EthanFurman for pointing out the viability of subclassing <code>EnumMeta</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": -1, "last_activity_date": 1560268942, "last_edit_date": 1560268942, "creation_date": 1560233616, "answer_id": 56537536, "question_id": 56469362, "link": "https://stackoverflow.com/questions/56469362/how-to-create-an-indexable-and-sliceable-enum-with-string-values-in-python/56537536#56537536", "title": "How to create an indexable and sliceable enum with string values in Python?", "body": "<p>A possible alternative to achieve the same result in terms of usage would be to use <code>collections.namedtuple</code> instead:</p>\n\n<pre><code>from collections import namedtuple\nLevelSequence = namedtuple('Level', ('DATA_CHECK', 'DESIGN_CHECK', 'ALERT'))\nLevel = LevelSequence('data check', 'design check', 'alert')\n</code></pre>\n\n<p>So that:</p>\n\n<ul>\n<li><code>Level.DESIGN_CHECK</code> and <code>Level[1]</code> both return <code>'design check'</code>, and</li>\n<li><code>Level[1:3]</code> returns <code>('design check', 'alert')</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563500785, "post_id": 57101446, "comment_id": 100729756, "body": "Level values are used as field values in an ORM and are returned from an API, so they shouldn&#39;t be integers. You can only create (an instance with) a design check level when there is (an instance with) a data check level, hence <code>Level.DESIGN_CHECK.prerequisite == Level.DATA_CHECK and Level.DATA_CHECK.dependent == Level.DESIGN_CHECK</code>."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563817203, "post_id": 57101446, "comment_id": 100817434, "body": "@l0b0:  Ah, okay.  Updated my answer to better match your question."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563839401, "post_id": 57101446, "comment_id": 100825179, "body": "@l0b0: Woops -- add <code>, name</code> into the <code>__init__</code>."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563841892, "post_id": 57101446, "comment_id": 100825638, "body": "@l0b0: Did a little trimming -- updated the <code>_generate_next_value_</code> and removed the <code>__new__</code> method."}, {"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563843256, "post_id": 57101446, "comment_id": 100825824, "body": "This might be asking too much, but why does <code>_generate_next_value_</code> not have <code>self</code> as the first argument? This breaks flake8 linting: &quot;N805 first argument of a method should be named &#39;self&#39;&quot;. Also, <code>mypy</code> seems to think <code>self.__class__._member_map_</code> has type <code>Level</code>."}, {"owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1563896850, "post_id": 57101446, "comment_id": 100849369, "body": "@l0b0: <code>_generate_next_value_</code> is a static method -- when it&#39;s called <code>self</code> doesn&#39;t yet exist; try decorating it with <code>@staticmethod</code>.  Not sure what&#39;s up with <code>mypy</code> -- try asking a question about that, and/or filing an issue on <a href=\"https://github.com/python/mypy/issues\" rel=\"nofollow noreferrer\"><code>mypy</code>s issue tracker</a>."}], "tags": [], "owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": true, "score": 1, "last_activity_date": 1563841894, "last_edit_date": 1563841894, "creation_date": 1563477966, "answer_id": 57101446, "question_id": 56469362, "link": "https://stackoverflow.com/questions/56469362/how-to-create-an-indexable-and-sliceable-enum-with-string-values-in-python/57101446#57101446", "title": "How to create an indexable and sliceable enum with string values in Python?", "body": "<pre><code>class Level(Enum):\n\n    prerequisite_level: Optional[\"Level\"]\n    dependent_level: Optional[\"Level\"]\n    lower_priority_levels: List[\"Level\"]\n    greater_priority_levels: List[\"Level\"]\n\n    DATA_CHECK = \"data check\"\n    DESIGN_CHECK = \"design check\"\n    ALERT = \"alert\"\n</code></pre>\n\n<p>I'm having a hard time understanding the above: ... [comments clarified that the first four should be attributes, and <code>prequisite</code> and <code>dependent</code> are the previous and following members, respectively].</p>\n\n<p>The solution is to modify previous members as the current member is being initialized (the trick being that the current member isn't added to the parent <code>Enum</code> until after the member's creation and initialization).  Here is the solution using the stdlib's <code>Enum</code><sup>1</sup> (Python 3.6 and later):</p>\n\n<pre><code>from enum import Enum, auto\n\nclass Level(str, Enum):\n    #\n    def __init__(self, name):\n        # create priority level lists\n        self.lower_priority_levels = list(self.__class__._member_map_.values())\n        self.greater_priority_levels = []\n        # update previous members' greater priority list\n        for member in self.lower_priority_levels:\n            member.greater_priority_levels.append(self)\n        # and link prereq and dependent\n        self.prerequisite = None\n        self.dependent = None\n        if self.lower_priority_levels:\n            self.prerequisite = self.lower_priority_levels[-1]\n            self.prerequisite.dependent = self\n    #\n    def _generate_next_value_(name, start, count, last_values, *args, **kwds):\n        return (name.lower().replace('_',' '), ) + args\n    #\n    DATA_CHECK = auto()\n    DESIGN_CHECK = auto()\n    ALERT = auto()\n</code></pre>\n\n<p>and in use:</p>\n\n<pre><code>&gt;&gt;&gt; list(Level)\n[&lt;Level.DATA_CHECK: 'data check'&gt;, &lt;Level.DESIGN_CHECK: 'design check'&gt;, &lt;Level.ALERT: 'alert'&gt;]\n\n&gt;&gt;&gt; Level.DATA_CHECK.prerequisite\nNone\n\n&gt;&gt;&gt; Level.DATA_CHECK.dependent\n&lt;Level.DESIGN_CHECK: 'design check'&gt;\n\n&gt;&gt;&gt; Level.DESIGN_CHECK.prerequisite\n&lt;Level.DATA_CHECK: 'data check'&gt;\n\n&gt;&gt;&gt; Level.DESIGN_CHECK.dependent\n&lt;Level.ALERT: 'alert'&gt;\n\n&gt;&gt;&gt; Level.ALERT.prerequisite\n&lt;Level.DESIGN_CHECK: 'design check'&gt;\n\n&gt;&gt;&gt; Level.ALERT.dependent\nNone\n</code></pre>\n\n<p>Note:  If you don't want to see the name twice, a custom <code>__repr__</code> can show just the enum and member names:</p>\n\n<pre><code>    def __repr__(self):\n        return '&lt;%s.%s&gt;' % (self.__class__.__name__, self.name)\n</code></pre>\n\n<p>then you'll see:</p>\n\n<pre><code>&gt;&gt;&gt; Level.DESIGN_CHECK\n&lt;Level.DESIGN_CHECK&gt;\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup>If using Python 3.5 or older you need to use <a href=\"https://pypi.python.org/pypi/aenum\" rel=\"nofollow noreferrer\"><code>aenum</code></a><sup>2</sup>.</p>\n\n<p><sup>2</sup> Disclosure:  I am the author of the <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\">Python stdlib <code>Enum</code></a>, the <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow noreferrer\"><code>enum34</code> backport</a>, and the <a href=\"https://pypi.python.org/pypi/aenum\" rel=\"nofollow noreferrer\">Advanced Enumeration (<code>aenum</code>)</a>  library.</p>\n"}], "owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 57101446, "answer_count": 3, "score": 3, "last_activity_date": 1563841894, "creation_date": 1559778171, "last_edit_date": 1559779589, "question_id": 56469362, "link": "https://stackoverflow.com/questions/56469362/how-to-create-an-indexable-and-sliceable-enum-with-string-values-in-python", "title": "How to create an indexable and sliceable enum with string values in Python?", "body": "<p>I've got a file like this:</p>\n\n<pre><code>class Level(Enum):\n    prerequisite_level: Optional[\"Level\"]\n    dependent_level: Optional[\"Level\"]\n    lower_priority_levels: List[\"Level\"]\n    greater_priority_levels: List[\"Level\"]\n\n    DATA_CHECK = \"data check\"\n    DESIGN_CHECK = \"design check\"\n    ALERT = \"alert\"\n</code></pre>\n\n<p>The enum values are in a specific order, and based on each of those levels I need to be able to get the previous one, the next one, and all the previous and next ones. I believe I need to be able to index the levels numerically to get these values, so I've added a constant to be able to do this:</p>\n\n<pre><code>INCREASING_PRIORITY_LEVELS: List[Level] = list(Level)\n\nfor priority_level_index, threshold_level in enumerate(Level):\n    if priority_level_index &gt; 0:\n        threshold_level.prerequisite_level = Level[priority_level_index - 1]\n    else:\n        threshold_level.prerequisite_level = None\n\n    if priority_level_index &lt; len(Level) - 1:\n        threshold_level.dependent_level = Level[priority_level_index + 1]\n    else:\n        threshold_level.dependent_level = None\n\n    threshold_level.lower_priority_levels = Level[:priority_level_index]\n    threshold_level.greater_priority_levels = Level[priority_level_index + 1:]\n</code></pre>\n\n<p>This is clunky, and I'd like to get rid of this constant. Do I need to implement <code>__getitem__</code> or something to make this possible?</p>\n"}, {"tags": ["python", "tensorflow", "amazon-sagemaker"], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 1877527, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88242d9819aafe7774287cc5cd240d00?s=128&d=identicon&r=PG", "display_name": "Philip Kahn", "link": "https://stackoverflow.com/users/1877527/philip-kahn"}, "is_accepted": true, "score": 1, "last_activity_date": 1571867961, "last_edit_date": 1571867961, "creation_date": 1560534456, "answer_id": 56602995, "question_id": 56469341, "link": "https://stackoverflow.com/questions/56469341/adding-a-serve-metagraph-to-existing-tensorflow-model/56602995#56602995", "title": "Adding a {serve} metagraph to existing Tensorflow model", "body": "<p>Finally solved it. This contains some S3 specific code and S3 instance calls (the <code>!</code> commands) but you should pretty much be able to slice that out to run this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!python3\n\"\"\"\nAssumes we've defined:\n\n- A directory for our working files to live in, CONTAINER_DIR\n- an arbitrary integer VERSION_INT\n- We have established local and S3 paths for our model and their labels as variables, particularly `modelLabel` and `modelPath`\n\"\"\"\n\n# Create a versioned path for the models to live in\n# See https://stackoverflow.com/a/54014480/1877527\nexportDir = os.path.join(CONTAINER_DIR, VERSION_INT)\nif os.path.exists(exportDir):\n    shutil.rmtree(exportDir)\nos.mkdir(exportDir)\nimport tensorflow as tf\ndef load_graph(model_file, returnElements= None):\n    \"\"\"\n    Code from v1.6.0 of Tensorflow's label_image.py example\n    \"\"\"\n    graph = tf.Graph()\n    graph_def = tf.GraphDef()\n    with open(model_file, \"rb\") as f:\n        graph_def.ParseFromString(f.read())\n    returns = None\n    with graph.as_default():\n        returns = tf.import_graph_def(graph_def, return_elements= returnElements)\n    if returnElements is None:\n        return graph\n    return graph, returns\n\n# Add the serving metagraph tag\n# We need the inputLayerName; in Inception we're feeding the resized tensor\n# corresponding to resized_input_tensor_name\n# May be able to get away with auto-determining this if not using Inception,\n# but for Inception this is the 11th layer\ninputLayerName = \"Mul:0\"\n# Load the graph\nif inputLayerName is None:\n    graph = load_graph(modelPath)\n    inputTensor = None\nelse:\n    graph, returns = load_graph(modelPath, returnElements= [inputLayerName])\n    inputTensor = returns[0]\nwith tf.Session(graph= graph) as sess:\n    # Read the layers\n    try:\n        from tensorflow.compat.v1.saved_model import simple_save\n    except (ModuleNotFoundError, ImportError):\n        from tensorflow.saved_model import simple_save\n    with graph.as_default():\n        layers = [n.name for n in graph.as_graph_def().node]\n        outName = layers.pop() + \":0\"\n        if inputLayerName is None:\n            inputLayerName = layers.pop(0) + \":0\"\n    print(\"Checking outlayer\", outName)\n    outLayer = tf.get_default_graph().get_tensor_by_name(outName)\n    if inputTensor is None:\n        print(\"Checking inlayer\", inputLayerName)\n        inputTensor = tf.get_default_graph().get_tensor_by_name(inputLayerName)\n    inputs = {\n        inputLayerName: inputTensor\n    }\n    outputs = {\n        outName: outLayer\n    }\n    simple_save(sess, exportDir, inputs, outputs)\nprint(\"Built a SavedModel\")\n# Put the model label into the artifact dir\nmodelLabelDest = os.path.join(exportDir, \"saved_model.txt\")\n!cp {modelLabel} {modelLabelDest}\n# Prep for serving\nimport datetime as dt\nmodelArtifact = f\"livemodel_{dt.datetime.now().timestamp()}.tar.gz\"\n# Copy the version directory here to package\n!cp -R {exportDir} ./\n# gziptar it\n!tar -czvf {modelArtifact} {VERSION_INT}\n# Shove it back to S3 for serving\n!aws s3 cp {modelArtifact} {bucketPath}\nshutil.rmtree(VERSION_INT) # Cleanup\nshutil.rmtree(exportDir) # Cleanup\n</code></pre>\n\n<p>This model is then deployable as a Sagemaker endpoint (and any other Tensorflow serving environment)</p>\n"}], "owner": {"reputation": 490, "user_id": 1877527, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88242d9819aafe7774287cc5cd240d00?s=128&d=identicon&r=PG", "display_name": "Philip Kahn", "link": "https://stackoverflow.com/users/1877527/philip-kahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 56602995, "answer_count": 1, "score": 2, "last_activity_date": 1571867961, "creation_date": 1559778036, "question_id": 56469341, "link": "https://stackoverflow.com/questions/56469341/adding-a-serve-metagraph-to-existing-tensorflow-model", "title": "Adding a {serve} metagraph to existing Tensorflow model", "body": "<p>The situation:</p>\n\n<p>I've already created several models, trained over several days each, that we're ready to move from local testing to a serving environment.</p>\n\n<p>The models were saved using the function</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def save_graph_to_file(sess, graph, graph_file_name):\n    \"\"\"Saves an graph to file, creating a valid quantized one if necessary.\"\"\"\n    output_graph_def = graph_util.convert_variables_to_constants(sess, graph.as_graph_def(), [final_tensor_name])\n    with gfile.FastGFile(graph_file_name, 'wb') as f:\n        f.write(output_graph_def.SerializeToString())\n</code></pre>\n\n<p>Now when attempting to deploy to a serving environment (Sagemaker, using a correct directory structure and file naming convention), the system returns</p>\n\n<pre><code>2019-06-04 22:38:53.794056: I external/org_tensorflow/tensorflow/cc/saved_model/reader.cc:54] Reading meta graph with tags { serve }\n2019-06-04 22:38:53.798096: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:259] SavedModel load for tags { serve }; Status: fail. Took 83297 microseconds.\n2019-06-04 22:38:53.798132: E tensorflow_serving/util/retrier.cc:37] Loading servable: {name: model version: 1} failed: Not found: Could not find meta graph def matching supplied tags: { serve }. To inspect available tag-sets in the SavedModel, please use the SavedModel CLI: `saved_model_cli`\n</code></pre>\n\n<p>All I have are the <code>*.pb</code> files and their label textfiles. These work lovely across multiple computers in local environments. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def load_graph(model_file):\n    \"\"\"\n    Code from v1.6.0 of Tensorflow's label_image.py example\n    \"\"\"\n    graph = tf.Graph()\n    graph_def = tf.GraphDef()\n    with open(model_file, \"rb\") as f:\n        graph_def.ParseFromString(f.read())\n    with graph.as_default():\n        tf.import_graph_def(graph_def)\n    return graph\n\ninputLayer = \"Mul\"\noutputLayer = \"final_result\"\ninputName = \"import/\" + inputLayer\noutputName = \"import/\" + outputLayer\ngraph = load_graph(modelPath)\ninputOperation = graph.get_operation_by_name(inputName)\noutputOperation = graph.get_operation_by_name(outputName)\nwith tf.Session(graph= graph) as sess:\n    # ... make a tensor t\n    results = sess.run(outputOperation.outputs[0], {\n        inputOperation.outputs[0]: t\n    })\n    # lovely functional results here\n</code></pre>\n\n<p>All I want to do is to take these existing files, add the \"serve\" tag needed, and re-save them, but everything I see seems to be related to doing this from scratch.</p>\n\n<p>I tried to use the builder to append a graph to a model like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Load the graph\ngraph = load_graph(modelPath)\nimport shutil\nif os.path.exists(exportDir):\n    shutil.rmtree(exportDir)\n# Add the serving metagraph tag\nbuilder = tf.saved_model.builder.SavedModelBuilder(exportDir)\nfrom tensorflow.saved_model import tag_constants\nwith tf.Session(graph= graph) as sess:\n    builder.add_meta_graph_and_variables(sess, [tag_constants.SERVING, tag_constants.GPU], strip_default_attrs= True)\nbuilder.save()\nprint(\"Built a SavedModel\")\n</code></pre>\n\n<p>but got the same error.</p>\n"}, {"tags": ["python", "sorting"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1559779174, "post_id": 56469327, "comment_id": 99530137, "body": "The duplicate I used is for nested lists (somewhat like a 2D array), but the principle is the same.  The answers below summarize the usage well enough for your 1-D case."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1559782556, "post_id": 56469327, "comment_id": 99530621, "body": "@Prune I believe the vectorized numpy solution is a good addition to the question and is not in the linked dupe"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1559836082, "post_id": 56469327, "comment_id": 99552536, "body": "Agreed; voting to reopen.  I saw the <code>argsort</code> solution while I was looking for dupes, but don&#39;t find it now.  If it&#39;s not trivial to find, let&#39;s make this another reference."}], "answers": [{"comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1559778499, "post_id": 56469365, "comment_id": 99530033, "body": "<code>numpy</code> is definitely an improvement over base Python for certain manipulations (+1)"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 2, "last_activity_date": 1559778190, "creation_date": 1559778190, "answer_id": 56469365, "question_id": 56469327, "link": "https://stackoverflow.com/questions/56469327/arrange-an-array-based-on-sorting-re-arrangement-of-another/56469365#56469365", "title": "Arrange an array based on sorting re-arrangement of another", "body": "<p>Using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html\" rel=\"nofollow noreferrer\"><code>numpy</code></a></p>\n\n<pre><code>names[np.argsort(scores)]\n</code></pre>\n\n<p>assuming <code>names</code> is a numpy array. If not, just make it</p>\n\n<pre><code>names = np.array(names)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1559778207, "creation_date": 1559778207, "answer_id": 56469367, "question_id": 56469327, "link": "https://stackoverflow.com/questions/56469327/arrange-an-array-based-on-sorting-re-arrangement-of-another/56469367#56469367", "title": "Arrange an array based on sorting re-arrangement of another", "body": "<p>Could use:</p>\n\n<pre><code>[name for score,name in sorted(zip(scores,names))]\n</code></pre>\n\n<p>Logically, this is similar to the double-conversion approach you describe, but the use of <code>zip</code> and comprehensions achieves it in one line with no explicit looping.</p>\n"}], "owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 56469365, "answer_count": 2, "score": 0, "last_activity_date": 1559836026, "creation_date": 1559777888, "last_edit_date": 1559778522, "question_id": 56469327, "link": "https://stackoverflow.com/questions/56469327/arrange-an-array-based-on-sorting-re-arrangement-of-another", "title": "Arrange an array based on sorting re-arrangement of another", "body": "<p>I have two arrays <code>names</code> and <code>scores</code>. Every index in <code>names</code> correspond to an index in <code>scores</code>. How do I arrange <code>names</code> in the order that corresponds to sorted <code>scores</code>?</p>\n\n<p>E.g from</p>\n\n<pre><code>names = [\"Jo\", \"Mary\", \"Luke\"]\nscores = [9, 4, 8]\n</code></pre>\n\n<p>we get</p>\n\n<pre><code>scores = [4, 8, 9]\nnames = [\"Mary\", \"Luke\", \"Jo\"]\n</code></pre>\n\n<p>I have only one ugly idea is to first convert 2 arrays into array of tuples and then use standard python sort and then convert back into two arrays.\nAre there any nice way without ugly for loops and double conversion?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "google-app-engine", "flask", "google-cloud-platform", "gunicorn"], "comments": [{"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 1, "creation_date": 1559778506, "post_id": 56469312, "comment_id": 99530034, "body": "What&#39;s the error you&#39;re getting?"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 1, "creation_date": 1559781989, "post_id": 56469312, "comment_id": 99530550, "body": "Dustin&#39;s comment plus include your requirements.txt file which should have at a minimum the line &quot;Flask==1.0.3&quot;. Also, add your <code>gcloud app deploy</code> command."}], "answers": [{"tags": [], "owner": {"reputation": 1728, "user_id": 4967694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bb32e6094783ec9fc40f63e24ef2b1?s=128&d=identicon&r=PG", "display_name": "djnz", "link": "https://stackoverflow.com/users/4967694/djnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1559828776, "last_edit_date": 1559828776, "creation_date": 1559778950, "answer_id": 56469434, "question_id": 56469312, "link": "https://stackoverflow.com/questions/56469312/what-http-server-should-i-use-with-python/56469434#56469434", "title": "What HTTP Server should I use with python?", "body": "<p>This is a typo: <code>pythom_version</code>, it should be: <code>python_version</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11606527, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jH-YXPcfxAg/AAAAAAAAAAI/AAAAAAAAAG8/ub25uLG_9c0/photo.jpg?sz=128", "display_name": "JE Technology Innovations", "link": "https://stackoverflow.com/users/11606527/je-technology-innovations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1559828776, "creation_date": 1559777736, "last_edit_date": 1559805108, "question_id": 56469312, "link": "https://stackoverflow.com/questions/56469312/what-http-server-should-i-use-with-python", "title": "What HTTP Server should I use with python?", "body": "<p>I'm trying to set up a HTTP sever on Google Cloud. I've run this with python and flask with no problems at all. When I go to the cloud console, create the app and deploy, with pure python and flask, an error occurs. Meanwhile, I tried using gunicorn but I get the same type of error. </p>\n\n<p>My main.py file:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask, jsonify\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef hello():\n    return jsonify({\"about\": \"Hello World\"})\n\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>APP.YAML</p>\n\n<pre><code>env: flex\nruntime: python\nruntime_config: \n  pythom_version: 3\n</code></pre>\n\n<p>I expect to receive a string in JSON format like the following:</p>\n\n<pre><code>{\n  \"about\": \"Hello World\"\n}\n</code></pre>\n"}, {"tags": ["python", "parameter-passing", "psycopg2"], "comments": [{"owner": {"reputation": 364, "user_id": 11420978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjqxG.jpg?s=128&g=1", "display_name": "Hildeberto", "link": "https://stackoverflow.com/users/11420978/hildeberto"}, "edited": false, "score": 1, "creation_date": 1559779129, "post_id": 56469302, "comment_id": 99530132, "body": "Test without the * in the parameter name."}, {"owner": {"reputation": 457, "user_id": 11424363, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1hcC_boAkWI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd8KmCEPVNq1DBafPCHRRiJdxpc6A/mo/photo.jpg?sz=128", "display_name": "ThiagoL", "link": "https://stackoverflow.com/users/11424363/thiagol"}, "reply_to_user": {"reputation": 364, "user_id": 11420978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjqxG.jpg?s=128&g=1", "display_name": "Hildeberto", "link": "https://stackoverflow.com/users/11420978/hildeberto"}, "edited": false, "score": 0, "creation_date": 1559781457, "post_id": 56469302, "comment_id": 99530468, "body": "It worked.  Thanks! Please write the answer, that way I can accept"}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 8103207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c210559b7bccc6fdf9441e91c0df97ee?s=128&d=identicon&r=PG", "display_name": "YHoffman", "link": "https://stackoverflow.com/users/8103207/yhoffman"}, "is_accepted": false, "score": 2, "last_activity_date": 1559784463, "creation_date": 1559784463, "answer_id": 56469886, "question_id": 56469302, "link": "https://stackoverflow.com/questions/56469302/how-to-pass-a-list-in-an-arg-function-for-being-readable-in-sql/56469886#56469886", "title": "How to pass a list in an arg function for being readable in SQL?", "body": "<p>As mentioned in the comments, the <code>*</code> in python is an <em>unpacking</em> operator, i.e. it unpacks a sequence, if set as a function parameter it effectively allows you to pass an unpacked sequence (i.e. numerous variables and they will all be made available in the function body as the name defined.), however when passed to a function as an argument it unpacks the sequence and passes it to the function as each item individually.</p>\n\n<pre><code>In [1]: def starred(*args): \n   ...:     print(type(args)) \n   ...:     print(args) \n   ...:                                                                         \n\nIn [2]: def pass_starred(arg1, arg2, arg3): \n   ...:     print(arg1, arg2, arg3) \n   ...:                                                                         \n\nIn [3]: data = [1, 2, 3]                                                        \n\nIn [4]: starred(data)                                                           \n&lt;class 'tuple'&gt;\n([1, 2, 3],)\n\nIn [5]: pass_starred(*data)                                                     \n1 2 3\n</code></pre>\n\n<p>(btw, if you look at the <code>print</code> function, this is how it can print any number of arguments, effectively it gets all non-named arguments as a starred variable and it iterates and prints them.)</p>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 11420978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjqxG.jpg?s=128&g=1", "display_name": "Hildeberto", "link": "https://stackoverflow.com/users/11420978/hildeberto"}, "is_accepted": true, "score": 1, "last_activity_date": 1559834249, "creation_date": 1559834249, "answer_id": 56480569, "question_id": 56469302, "link": "https://stackoverflow.com/questions/56469302/how-to-pass-a-list-in-an-arg-function-for-being-readable-in-sql/56480569#56480569", "title": "How to pass a list in an arg function for being readable in SQL?", "body": "<p>The \"*\" is an unpacking operator in Python.</p>\n\n<p>You don't need unpacking a parameter, if this parameter is a list. </p>\n\n<p>Just remove the \"*\" before the parameter's name.</p>\n"}], "owner": {"reputation": 457, "user_id": 11424363, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1hcC_boAkWI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd8KmCEPVNq1DBafPCHRRiJdxpc6A/mo/photo.jpg?sz=128", "display_name": "ThiagoL", "link": "https://stackoverflow.com/users/11424363/thiagol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56480569, "answer_count": 2, "score": 1, "last_activity_date": 1559834249, "creation_date": 1559777653, "question_id": 56469302, "link": "https://stackoverflow.com/questions/56469302/how-to-pass-a-list-in-an-arg-function-for-being-readable-in-sql", "title": "How to pass a list in an arg function for being readable in SQL?", "body": "<p>I using SQL module in psycopg2 and I'm trying to pass a list as arg a function. </p>\n\n<pre><code>def getSomething(*args):\n\n query = sql.SQL(\"select col1 from tb1 where col1 in ({})\").format(\n        sql.SQL(', ').join([sql.Literal(ar) for ar in args])\n    )\n print query.as_string(Connection())\n</code></pre>\n\n<p>Tried in different ways but without success. One of them was, I received a unicode type via POST.</p>\n\n<pre><code>data = request.form['data']\nd_array = data.split(',')\nprint getsomething(d_array)\n</code></pre>\n\n<p>output d_array <code>[u'66626', u'66635']</code></p>\n\n<pre><code>InvalidTextRepresentation('invalid input syntax for integer: \"66626,66635\"\\nLINE 9:     WHERE col1 in (\\'66626,66635\\')\\n                               ^\\n',)\n</code></pre>\n\n<p>If I pass these values separated <code>getSomething('66626','66635')</code> works! </p>\n\n<p>My question is about unpack this list in separate values and them put in function as arg or is there another thing to do it?</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "is_accepted": true, "score": 1, "last_activity_date": 1559802563, "last_edit_date": 1559802563, "creation_date": 1559802250, "answer_id": 56471904, "question_id": 56469284, "link": "https://stackoverflow.com/questions/56469284/align-scanned-documents-based-on-a-reference-point-using-opencv/56471904#56471904", "title": "Align scanned documents based on a reference point, using openCV", "body": "<p>Step 1:  canny, it give you perfect long edge. If this is the only part you dont understand, here is the answer. You can adjust the parameter to get the best result. The first will be idea for both line and pie circle. But if you only keen to find pie. change the parameter accordingly to get my 2nd image </p>\n\n<p><a href=\"https://i.stack.imgur.com/Ahwob.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ahwob.png\" alt=\"enter image description here\"></a></p>\n\n<p>The red denotes the doted line. sample from opencv directly</p>\n\n<p><a href=\"https://i.stack.imgur.com/dedvM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dedvM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 2: local area enhancement/segmentation to find both circles (from image 1 parameter with houghcircle param2 set to 110)</p>\n\n<p><a href=\"https://i.stack.imgur.com/ycYV4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ycYV4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 3: Segment the pie out(all the way to the edge of image) and find the median line</p>\n\n<p>Step 4: OCR on the test image pies and find the distance of none-background color along the median line. </p>\n\n<p>Step 5: generate list out and send to csv or sth</p>\n"}], "owner": {"reputation": 273, "user_id": 10797415, "user_type": "registered", "profile_image": "https://graph.facebook.com/2220901717940895/picture?type=large", "display_name": "Frederik Vanclooster", "link": "https://stackoverflow.com/users/10797415/frederik-vanclooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 56471904, "answer_count": 1, "score": 1, "last_activity_date": 1561696601, "creation_date": 1559777420, "last_edit_date": 1561696601, "question_id": 56469284, "link": "https://stackoverflow.com/questions/56469284/align-scanned-documents-based-on-a-reference-point-using-opencv", "title": "Align scanned documents based on a reference point, using openCV", "body": "<p>I'm currently trying to write a program that can automatically extract data from some graphs in multiple scanned documents. Mainly by using opencv I would like to detect some features of the graphs in order to convert them into usable data. In the left graph I'm looking for the height of the circle sectors and in the right graph the distance from the center to the points where the dotted lines intersect with the gray area. In both cases I would like to convert these values into numeric data for further usage. </p>\n\n<p><a href=\"https://i.stack.imgur.com/VVjhB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VVjhB.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What follows is a step by step plan of how I think my algorithm will work:</p>\n\n<ol>\n<li><p>Align the image based on the big dotted lines. This way I can ensure that the graphs in all the scanned images will have the exact same positions. After all, it is possible that some images will be slightly tilted or moved in comparison with other images, due to the manual scanning process. Basically I want the coordinate of a pixel in one image to correspond to the exact same pixel in another image.</p></li>\n<li><p>We now know that the coordinates of the graph centers and the angles for the circle sectors are identical for all images now. For each circle sector, filter the darker pixels from the lighter ones. This is done using the openCV <code>inRange</code> function.</p></li>\n<li><p>Search for the best fitting segment over the darker pixels in the left graph and search for the best fitting triangle in the right graph. This is done by global optimization.</p></li>\n<li><p>Return the radius of the optimal segment and return the edge lengths of the optimal triangle. Now we have values that we can use as data.</p></li>\n</ol>\n\n<p>I have more or less figured out how to do every step, except the first one. I have no clue on how I would go about aligning my images. Does someone might have an idea or a strategy on how to achieve this alignment? </p>\n"}, {"tags": ["python", "input", "qr-code", "barcode-scanner"], "comments": [{"owner": {"reputation": 2943, "user_id": 9014308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6e0464313ca63c239f5d973213daf9?s=128&d=identicon&r=PG&f=1", "display_name": "kunif", "link": "https://stackoverflow.com/users/9014308/kunif"}, "edited": false, "score": 0, "creation_date": 1559949176, "post_id": 56469264, "comment_id": 99593143, "body": "QR scanners usually report decoded text data, not image data that can be handled by OpenCV. It is the camera device that notifies image data. You need to understand the characteristics of the device. If the vendor and model information of the device you are going to use is added, it will be easy to get an answer."}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 8869589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac8daf30a15ce5e9a83c0b348bad3d2f?s=128&d=identicon&r=PG&f=1", "display_name": "shn", "link": "https://stackoverflow.com/users/8869589/shn"}, "is_accepted": false, "score": 0, "last_activity_date": 1559777541, "creation_date": 1559777541, "answer_id": 56469292, "question_id": 56469264, "link": "https://stackoverflow.com/questions/56469264/how-to-use-python-with-qr-scanner-devices/56469292#56469292", "title": "How to use python with qr scanner devices?", "body": "<p>Typically a barcode scanner automatically outputs to the screen, <strong>just like a keyboard</strong> (except really quickly), and there is an end of line character at the end (like and enter). <br/>\nUsing a python script all you need to do is start the script, connect a scanner, scan something, and get the input (<strong>STDIN</strong>) of the script. If you built a script that was just always receiving input and storing or processing them, you could do whatever you please with the data. </p>\n\n<p>A QR code is read in the same way that a barcode scanner works, immediately outputting the encoded data as text. Just collect this <strong>using the STDIN of a python script and you're good to go!</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 11606514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J_MMYhjNDOM/AAAAAAAAAAI/AAAAAAAAABY/w4ABURd9pl0/photo.jpg?sz=128", "display_name": "RaB", "link": "https://stackoverflow.com/users/11606514/rab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559777541, "creation_date": 1559777238, "question_id": 56469264, "link": "https://stackoverflow.com/questions/56469264/how-to-use-python-with-qr-scanner-devices", "title": "How to use python with qr scanner devices?", "body": "<p>I want to create a program that can read and store the data from a qr scanning device but i don't know how to get the input from the barcode scanner as an image or save it in a variable to read it after with openCV</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 2, "creation_date": 1559777365, "post_id": 56469261, "comment_id": 99529839, "body": "That&#39;s how it is supposed to work <a href=\"https://stackoverflow.com/questions/37205793/django-values-list-vs-values\" title=\"django values list vs values\">stackoverflow.com/questions/37205793/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "is_accepted": true, "score": 2, "last_activity_date": 1559778108, "creation_date": 1559778108, "answer_id": 56469352, "question_id": 56469261, "link": "https://stackoverflow.com/questions/56469261/values-list-with-flat-true-still-showing-queryset/56469352#56469352", "title": "Values_list with flat=true still showing &lt;QuerySet [..]&gt;", "body": "<p>Simply use the <code>list()</code> function:</p>\n\n<pre><code>def resum(request):\n    usuari=Usuari.objects.order_by('usuari_id').values_list('usuari_id', flat=True)\n\n    print(list(usuari))\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10212321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b04b0ce167943374851f7972c0fc8c36?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Mango", "link": "https://stackoverflow.com/users/10212321/billy-mango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 56469352, "answer_count": 1, "score": 0, "last_activity_date": 1559778108, "creation_date": 1559777209, "question_id": 56469261, "link": "https://stackoverflow.com/questions/56469261/values-list-with-flat-true-still-showing-queryset", "title": "Values_list with flat=true still showing &lt;QuerySet [..]&gt;", "body": "<p>I'm trying to print some query with values_list but for some reason it is still printing  and I need  to be gone and only have the list inside the square brackets...</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def resum(request):\n    usuari=Usuari.objects.order_by('usuari_id').values_list('usuari_id', flat=True)\n    print(usuari)\n</code></pre>\n\n<p>and what i get printed is:</p>\n\n<pre><code>&lt;QuerySet [1, 2, 3, 4, 5, 6, 50, 51]&gt;\n[06/Jun/2019 01:21:04] \"GET /resum/ HTTP/1.1\" 200 2102\n</code></pre>\n\n<p>Any idea??</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1559777345, "post_id": 56469224, "comment_id": 99529836, "body": "Could you post some example content of <code>items</code>, and/or <code>items[0]</code>, enough that it can be copied and pasted into a working example? If it&#39;s JSON-like, there&#39;s probably a neat way to convert it to a pandas DataFrame and getting the desired output without explicit for-looping and handwritten logic."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9236891"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1559778963, "post_id": 56469224, "comment_id": 99530111, "body": "I have added a part of dataset. Please check it out @PeterLeimbigler"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9236891"}, "edited": false, "score": 0, "creation_date": 1559779502, "post_id": 56469338, "comment_id": 99530189, "body": "You are right! would you please tell me if the same thing is happening when I am adding runs as well?"}, {"owner": {"reputation": 59, "user_id": 6362065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1091828827544250/picture?type=large", "display_name": "Ionu\u021b Zamfir", "link": "https://stackoverflow.com/users/6362065/ionu%c8%9b-zamfir"}, "edited": false, "score": 0, "creation_date": 1559847917, "post_id": 56469338, "comment_id": 99557532, "body": "No, the .loc function does the job in place"}], "tags": [], "owner": {"reputation": 59, "user_id": 6362065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1091828827544250/picture?type=large", "display_name": "Ionu\u021b Zamfir", "link": "https://stackoverflow.com/users/6362065/ionu%c8%9b-zamfir"}, "is_accepted": true, "score": 0, "last_activity_date": 1559778374, "last_edit_date": 1559778374, "creation_date": 1559778004, "answer_id": 56469338, "question_id": 56469224, "link": "https://stackoverflow.com/questions/56469224/rows-not-appending-to-dataframe-while-on-loop/56469338#56469338", "title": "Rows not appending to dataframe while on loop", "body": "<p>Hei,</p>\n\n<p>Appending to a dataframe doesn't happen in place. The append function will only return the new dataframe which contains the appended value, and will not modify the original dataframe</p>\n\n<p>So,</p>\n\n<pre><code>batsman.append(pd.Series(data, index = index), ignore_index=True)\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>batsman = batsman.append(pd.Series(data, index = index), ignore_index=True)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9236891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56469338, "answer_count": 1, "score": 0, "last_activity_date": 1559778929, "creation_date": 1559776882, "last_edit_date": 1559778929, "question_id": 56469224, "link": "https://stackoverflow.com/questions/56469224/rows-not-appending-to-dataframe-while-on-loop", "title": "Rows not appending to dataframe while on loop", "body": "<p>I was working through a database and creating a dataframe of selected information. The database can be found at <a href=\"https://cricsheet.org\" rel=\"nofollow noreferrer\">www.cricsheet.org</a>.\nThe code for the same is: </p>\n\n<pre><code>bat = {'Name' : [], 'Runs' : [], 'Balls' : [], 'StrikeR' : []}\nbatsman = pd.DataFrame(bat)\nbatsman.head()\nindex = ['Name','Runs','Balls','StrikeR']\n\ndata = []\ncount = 0\nfor i in items[0][\"1st innings\"][\"deliveries\"]:\n    name = list(i.values())[0][\"batsman\"]\n    run = list(i.values())[0][\"runs\"][\"batsman\"]\n    if name in list(batsman['Name']):\n        batsman.loc[batsman.Name == name].Runs += run\n        batsman.loc[batsman.Name == name].Balls += 1\n        batsman.loc[batsman.Name == name].StrikeR = batsman.loc[batsman.Name == name].Runs/batsman.loc[batsman.Name == name].Balls\n    else:\n        data = [name,run,1,run]\n        print(b)\n        batsman.append(pd.Series(data, index = index), ignore_index=True)\n</code></pre>\n\n<p>To give a context the array <code>data</code> is of type:</p>\n\n<pre><code>['GC Smith', 0, 1, 0]\n['HH Dippenaar', 0, 1, 0]\n['HH Dippenaar', 0, 1, 0]\n['HH Dippenaar', 2, 1, 2]\n['HH Dippenaar', 0, 1, 0]\n</code></pre>\n\n<p>I was hoping to update this data in a pandas dataframe, However the data is not appending to the dataframe. Can anyone tell me why and what is the solution to it?</p>\n\n<p>Edit: I am adding a part of items[0] dataset.</p>\n\n<pre><code>{'1st innings': {'team': 'South Africa', 'deliveries': [{0.1: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}, {0.2: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}, {0.3: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}, {0.4: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}, {0.5: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}, {0.6: {'batsman': 'GC Smith', 'bowler': 'WPUJC Vaas', 'non_striker': 'HH Dippenaar', 'runs': {'batsman': 0, 'extras': 0, 'total': 0}}}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1559776782, "post_id": 56469171, "comment_id": 99529725, "body": "How did you even get an array like that? The solution is likely to change something about the code that got you to this point."}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "edited": false, "score": 0, "creation_date": 1559777405, "post_id": 56469203, "comment_id": 99529848, "body": "it did not work. the error : ValueError: invalid literal for int() with base 10: b&#39;true&#39;"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "edited": false, "score": 2, "creation_date": 1559777485, "post_id": 56469203, "comment_id": 99529860, "body": "I am almost certain that you copied the code in my answer incorrectly."}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 4, "last_activity_date": 1559776716, "creation_date": 1559776716, "answer_id": 56469203, "question_id": 56469171, "link": "https://stackoverflow.com/questions/56469171/convert-byte-type-into-float/56469203#56469203", "title": "Convert Byte type into float", "body": "<p>They are not byte values, they are binary strings. Try something like</p>\n\n<pre><code>&gt;&gt;&gt; [int(b == b'true') for b in Boolval]\n[0, 1, 0, 0, 0, 0, 0, 0, 0]\n</code></pre>\n\n<p>This will check if the item is equal to <code>b'true'</code> and convert the truth value (<code>True</code> or <code>False</code>) to an <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1559785667, "creation_date": 1559785667, "answer_id": 56470001, "question_id": 56469171, "link": "https://stackoverflow.com/questions/56469171/convert-byte-type-into-float/56470001#56470001", "title": "Convert Byte type into float", "body": "<pre><code>In [253]: Boolval = np.where([0,1,0,0,1,0,1],b'true',b'false')                                         \nIn [254]: Boolval                             # the repr display                                                         \nOut[254]: \narray([b'false', b'true', b'false', b'false', b'true', b'false', b'true'],\n      dtype='|S5')\nIn [255]: print(Boolval)                 # the str display                                                              \n[b'false' b'true' b'false' b'false' b'true' b'false' b'true']\n\nIn [256]: Boolval!=b'false'                                                                            \nOut[256]: array([False,  True, False, False,  True, False,  True])\nIn [257]: Boolval==b'true'                                                                             \nOut[257]: array([False,  True, False, False,  True, False,  True])\n</code></pre>\n\n<p>We can convert it to boolean array with a comparison to a bytestring:</p>\n\n<pre><code>In [256]: Boolval!=b'false'                                                                            \nOut[256]: array([False,  True, False, False,  True, False,  True])\nIn [257]: Boolval==b'true'                                                                             \nOut[257]: array([False,  True, False, False,  True, False,  True])\n</code></pre>\n\n<p>and to an integer array with a <code>astype</code> conversion:</p>\n\n<pre><code>In [258]: (Boolval!=b'false').astype(int)                                                              \nOut[258]: array([0, 1, 0, 0, 1, 0, 1])\n\nIn [259]: np.where(Boolval==b'true')                                                                   \nOut[259]: (array([1, 4, 6]),)\n</code></pre>\n\n<p>And the list comprehension approach:</p>\n\n<pre><code>In [260]: [int(b == b'true') for b in Boolval]                                                         \nOut[260]: [0, 1, 0, 0, 1, 0, 1]\n</code></pre>\n\n<p>If we start with a list, the list comprehension is often faster.  But starting with an array it is likely to be slower.  Though here the sample is small, and the string equality test isn't nearly as fast as numeric operations.</p>\n"}], "owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 56469203, "answer_count": 2, "score": 1, "last_activity_date": 1559785667, "creation_date": 1559776409, "last_edit_date": 1559785277, "question_id": 56469171, "link": "https://stackoverflow.com/questions/56469171/convert-byte-type-into-float", "title": "Convert Byte type into float", "body": "<p>I have a <code>numpy</code> array:</p>\n\n<pre><code>import numpy as np\nBoolval = np.array([b'false',b'true',b'false',b'false',b'false',b'false',b'false',b'false'])\n</code></pre>\n\n<p>I am trying to convert each value into the entire array with value 0 or 1 (e.g. <code>[0, 1, 0, 0, 0, 0, 0]</code>). </p>\n\n<p>I tried the following:</p>\n\n<pre><code>import struct\nprint(struct.unpack('f',Boolval))\n</code></pre>\n\n<p>It throws an error: <code>struct.error: unpack requires a buffer of 4 bytes</code></p>\n\n<p>I tried with just one value, </p>\n\n<pre><code>print(struct.unpack(\"f\", Boolval[1]))\n</code></pre>\n\n<p>It gives the value of <code>(7.24431922380234e+22,)</code>. Not 1 or 0. </p>\n"}, {"tags": ["python", "optimization", "gekko"], "answers": [{"tags": [], "owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "is_accepted": false, "score": 1, "last_activity_date": 1559788200, "creation_date": 1559788200, "answer_id": 56470222, "question_id": 56469145, "link": "https://stackoverflow.com/questions/56469145/how-to-re-initialize-optimization-in-python-gekko-from-prior-solution/56470222#56470222", "title": "How to re-initialize optimization in Python Gekko from prior solution", "body": "<p>For steady state solutions (IMODE=1 or 3), Gekko uses the prior <code>x1.value</code> and <code>x2.value</code> until they are changed. The <code>.value</code> has two properties: <code>.value</code> and <code>.change</code>. There are multiple ways to signal that they have changed including:</p>\n\n<ol>\n<li>Set the values from the prior solution with:</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>x1.value = x1.value.value  # = 2.8284271334\nx2.value = x2.value.value  # = 1.4142135667\n</code></pre>\n\n<ol start=\"2\">\n<li>Signal that the initial guess value should change to the new value with:</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>x1.value.change = True\nx2.value.change = True\n</code></pre>\n\n<p>This is easy with two variables but it is more challenging with many variables. If you want to automate this for all of your variables, you could use the built-in list of variables in a loop with <code>vi in m._variables</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from gekko import GEKKO\nm = GEKKO() # Initialize gekko\n# Initialize variables\nx1 = m.Var(value=1,lb=1,ub=5)\nx2 = m.Var(value=5,lb=1,ub=5)\n# Equations\nm.Equation(x1==x2*2)\nm.Equation(x1**2+x2**2==10)\nm.Obj(x1*x2) # Objective\nm.options.solver=1\n\nm.solve(disp=False) # Solve\nprint('Iterations: ' + str(m.options.iterations))\nprint(x1.value[0], x2.value[0])\nprint('Objective: ' + str(m.options.objfcnval))\n\nfor vi in m._variables:\n    vi.value.change = True\n\nm.solve(disp=False) # Solve again\nprint('Iterations: ' + str(m.options.iterations))\nprint(x1.value[0], x2.value[0])\nprint('Objective: ' + str(m.options.objfcnval))\n</code></pre>\n\n<p>The second time it solves the problem, the solver finishes in 1 iteration instead of 5 iterations. It is using the prior solution as the starting point.</p>\n\n<pre><code>  Iterations: 5\n  2.8284271334 1.4142135667\n  Objective: 4.0000000245\n  Iterations: 1\n  2.8284271247 1.4142135624\n  Objective: 4.0\n</code></pre>\n"}], "owner": {"reputation": 290, "user_id": 11605538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1POEz.jpg?s=128&g=1", "display_name": "Eric Hedengren", "link": "https://stackoverflow.com/users/11605538/eric-hedengren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559788200, "creation_date": 1559776195, "question_id": 56469145, "link": "https://stackoverflow.com/questions/56469145/how-to-re-initialize-optimization-in-python-gekko-from-prior-solution", "title": "How to re-initialize optimization in Python Gekko from prior solution", "body": "<p>I'm solving a non-linear optimization problem with Gekko in a loop and want to use the prior solution to initialize the next solution. I've created a simplified the problem with the code below to show the issue.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from gekko import GEKKO\nm = GEKKO() # Initialize gekko\n# Initialize variables\nx1 = m.Var(value=1,lb=1,ub=5)\nx2 = m.Var(value=5,lb=1,ub=5)\n# Equations\nm.Equation(x1==x2*2)\nm.Equation(x1**2+x2**2==10)\nm.Obj(x1*x2) # Objective\nm.options.solver=1\n\nm.solve(disp=False) # Solve\nprint('Iterations: ' + str(m.options.iterations))\nprint(x1.value[0], x2.value[0])\nprint('Objective: ' + str(m.options.objfcnval))\n\nm.solve(disp=False) # Solve again\nprint('Iterations: ' + str(m.options.iterations))\nprint(x1.value[0], x2.value[0])\nprint('Objective: ' + str(m.options.objfcnval))\n</code></pre>\n\n<p>The console prints:</p>\n\n<pre><code>  Iterations: 5\n  2.8284271334 1.4142135667\n  Objective: 4.0000000245\n  Iterations: 5\n  2.8284271334 1.4142135667\n  Objective: 4.0000000245\n</code></pre>\n\n<p>The values of <code>x1</code> and <code>x2</code> return to the initial guesses of 1 and 5 before the \"Solve again\" attempt. I tried <code>x1.value = x1.value</code> but this returns <code>RecursionError: maximum recursion depth exceeded</code>. What is the right way to initialize values from a prior solution in Gekko?</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559776329, "creation_date": 1559776329, "answer_id": 56469160, "question_id": 56469102, "link": "https://stackoverflow.com/questions/56469102/finding-the-maximum-number-of-columns-in-a-file-or-csv-using-python/56469160#56469160", "title": "finding the maximum number of columns in a file or csv using Python", "body": "<p>First use <code>str.replace</code> to remove <code>States:</code> from your column. Then use <a href=\"https://stackoverflow.com/a/51752361/9081267\">this</a> function to unnest your values to rows:</p>\n\n<pre><code>df['State'] = df['State'].str.replace('States:', '')\n\ndf = explode_str(df, 'State', ',').reset_index(drop=True)\n</code></pre>\n\n<hr>\n\n<pre><code>          Date     Times Severity     Source   Machine         State\n0  18-May-2019  16:28:18        I  StatesLog  Off-Line        IALT-1\n1  18-May-2019  16:28:19        I  StatesLog  Off-Line     TdALclr-0\n2  18-May-2019  16:28:19        I  StatesLog  Off-Line      S722a1-0\n3  18-May-2019  16:28:19        I  StatesLog  Off-Line      S722a2-0\n4  18-May-2019  16:28:19        I  StatesLog  Off-Line   S722ascon-0\n5  18-May-2019  16:28:19        I  StatesLog  Off-Line     !S722a1-1\n6  18-May-2019  16:28:19        I  StatesLog  Off-Line   S722(OFF)-0\n7  18-May-2019  16:28:19        I  StatesLog  Off-Line     !S722a2-1\n</code></pre>\n\n<p>If you want to remove the other columns perse:</p>\n\n<pre><code>explode_str(df, 'State', ',')[['Date', 'State']].reset_index(drop=True)\n</code></pre>\n\n<hr>\n\n<pre><code>          Date         State\n0  18-May-2019        IALT-1\n1  18-May-2019     TdALclr-0\n2  18-May-2019      S722a1-0\n3  18-May-2019      S722a2-0\n4  18-May-2019   S722ascon-0\n5  18-May-2019     !S722a1-1\n6  18-May-2019   S722(OFF)-0\n7  18-May-2019     !S722a2-1\n</code></pre>\n\n<hr>\n\n<p>Function used from other answer:</p>\n\n<pre><code>def explode_str(df, col, sep):\n    s = df[col]\n    i = np.arange(len(s)).repeat(s.str.count(sep) + 1)\n    return df.iloc[i].assign(**{col: sep.join(s).split(sep)})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11600098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EZkyJUdwOvw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKNRxw8kCIT_NnhdYhzrOjhOzCkw/mo/photo.jpg?sz=128", "display_name": "PM77", "link": "https://stackoverflow.com/users/11600098/pm77"}, "is_accepted": false, "score": 0, "last_activity_date": 1560068454, "creation_date": 1560068454, "answer_id": 56513031, "question_id": 56469102, "link": "https://stackoverflow.com/questions/56469102/finding-the-maximum-number-of-columns-in-a-file-or-csv-using-python/56513031#56513031", "title": "finding the maximum number of columns in a file or csv using Python", "body": "<p>I managed to work out the columns part from trial and error.  I'm fairly new to python so although this works it probably isn't the best or cleanest way of doing things.  It does take a loooooong time work out which row has the most columns for large data.  </p>\n\n<p>This does stop Erfan's code from working though</p>\n\n<pre><code>import numpy as np\nimport csv\nimport os\n\n\nwith open('test.txt', 'r') as oldfile, open('newtest.txt', 'w') as newfile:\n    for line in oldfile:\n        newfile.write(line)  # Leave original file untouched and save a copy to modify\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()                       # remove the \",\" from the data part and replace with ' '\n    f.write(content.replace(',', ' ')) # all info now has ' ' seperator\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace(' ', ',')) # replace seperator with ','\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace(',,,,', ',')) # try to remove extra ,'s\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace(',,,', ',')) # try to remove extra ,'s\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace(',,', ',')) # try to remove extra ,'s\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace(',,', ',')) # try to remove extra ,'s  Still left one column with ,, not sure why?\n\nwith open('newtest.txt', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace('States:', '')) # remove 'States:'\n\n\n\nnum_lines = sum(1 for line in open('newtest.txt')) #Find how many lines is in the data\nx = num_lines - 10 # subtract 10 as we don't need the header file\ny = 10  # 10 lines in the header\nmax_col=0\n\n\nwhile x &gt; 1:\n    a = pd.read_csv('newtest.txt', header=None, skiprows=y, nrows = 1,)\n    max_col_ln = a.shape[1]\n\n\n#    print(x) # --- used for testing to see how many lines left\n\n    if max_col_ln &gt; max_col:    # read entire file and find what is the largest column number needed\n        max_col = max_col_ln    # as it probably won't be on line 1\n    x = x - 1\n    y = y + 1\n\n\n\nz = 0\n\nwith open('newtest2.txt', 'w') as tempfile:\n    while max_col &gt; 0:\n        tempfile.write('Column' + str(z) +',') # Create ColumnX, ColumnY etc for the maximum number of columns\n        max_col = max_col-1\n        z = z + 1\n\nwith open('newtest2.txt', 'r') as temphead:\n    headers = temphead.read().replace('\\n', '') #Load headers as an index for columns\n\nwith open('newtest.txt', 'r+') as oldfile, open ('newtest3.txt', 'w') as tempdata:\n    tempdata.write(headers) # write headers at the top of the new temp file\n    for line in oldfile:\n        if '*' not in line:\n           tempdata.write(line) #write all the data but remove the * at the start of data\n\n\nnewdata = pd.read_table('newtest3.txt') # read the txt as a table\nnewdata.to_csv('data.csv', quoting=csv.QUOTE_NONE, escapechar='*', index=False) #write to csv using * as escape char and no index \n\ndf = pd.read_csv('data.csv')\ndf['Time'] = df[\"Column0*\"] + ' ' + df['Column1*'] # combine first 2 columns to make a \"Time\" column\ncols= list(df.columns)\ncols = [cols[-1]] + cols[:-1] \ndf = df[cols] # swap \"time\" and Column0 around\ndf = df.drop(['Column0*', 'Column1*', 'Column2*', 'Column3*', 'Column4*', 'Column5*'], axis=1).to_csv('data.csv', index=False) #remove columns I don't require from the data\n\nwith open('data.csv', 'r+')as f:\n    content = f.read()\n    f.seek(0)\n    f.truncate()\n    f.write(content.replace('*', '')) # remove the * escape char from earlier and write back to the csv.\n\n\n\nos.remove('newtest.txt')\nos.remove('newtest2.txt')\nos.remove('newtest3.txt') # bit of house keeping after all the changes\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "is_accepted": false, "score": 0, "last_activity_date": 1581887586, "last_edit_date": 1581887586, "creation_date": 1581885803, "answer_id": 60253015, "question_id": 56469102, "link": "https://stackoverflow.com/questions/56469102/finding-the-maximum-number-of-columns-in-a-file-or-csv-using-python/60253015#60253015", "title": "finding the maximum number of columns in a file or csv using Python", "body": "<p>I am new to python. But you can call Bash scripts to get what you want.</p>\n\n<pre><code>import os\nfilename=\"test.txt\"\ncmd = \"awk '{print NF}' \" + filename + \" |sort -unk 1,1 | tail -n 1\"\nmax = os.system(cmd)\ncmd = \"awk '{print NF}' \" + filename + \" |sort -unk 1,1 | head -n 1\"\nmin = os.system(cmd)\nprint(min, max)\n</code></pre>\n\n<p>if the separator in your file is not space/TAB, you can add -F ',' (for csv file).</p>\n"}], "owner": {"reputation": 1, "user_id": 11600098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EZkyJUdwOvw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKNRxw8kCIT_NnhdYhzrOjhOzCkw/mo/photo.jpg?sz=128", "display_name": "PM77", "link": "https://stackoverflow.com/users/11600098/pm77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1581887586, "creation_date": 1559775823, "question_id": 56469102, "link": "https://stackoverflow.com/questions/56469102/finding-the-maximum-number-of-columns-in-a-file-or-csv-using-python", "title": "finding the maximum number of columns in a file or csv using Python", "body": "<p>I am trying to evaluate some data using Python.  A sample of the data is as follows</p>\n\n<pre><code>****************************************************************\n*                       SAMPLE DATA                            *\n****************************************************************\n* Date      Times    Severity  Source  Machine     State   \n18-May-2019 16:28:18    I   StatesLog   Off-Line   States: IALT-1\n18-May-2019 16:28:19    I   StatesLog   Off-Line   States: TdALclr-0\n18-May-2019 16:28:19    I   StatesLog   Off-Line   States: S722a1-0, S722a2-0, S722ascon-0\n18-May-2019 16:28:19    I   StatesLog   Off-Line   States: !S722a1-1, S722(OFF)-0, !S722a2-1\n</code></pre>\n\n<p>What I'm after (eventually) is</p>\n\n<pre><code>Time                    Data\n18-May-2019 16:28:18    IALT-1\n18-May-2019 16:28:19    TdALclr-0\n18-May-2019 16:28:19    S722a1-0, \n18-May-2019 16:28:19    S722a2-0, \n18-May-2019 16:28:19    S722ascon-0\n18-May-2019 16:28:19    !S722a1-1, \n18-May-2019 16:28:19    S722(OFF)-0, \n18-May-2019 16:28:19    !S722a2-1\n</code></pre>\n\n<p>With data this short I can manually adjust the amount of columns I need, but as some of the data is over 100Mb in size I have no idea of how many columns I'll need to put it into a DataFrame.</p>\n\n<p>I have tried the code below to remove the large header</p>\n\n<pre><code>import pandas as pd\n\nwith open('test.txt') as oldfile, open('newtest.txt', 'w') as newfile:\n    newfile.write('Date      Times    Severity  Source  Machine State  Data Data1 Data2')\n    for line in oldfile:\n        if '*' not in line:\n            newfile.write(line)\n\ndf = pd.read_table('newtest.txt', sep ='\\s+', engine = 'python') \ndf[['Date', 'Times', 'Data', 'Data1', 'Data2']].to_csv('trial.csv')\n</code></pre>\n\n<p>Which has worked up to a point but after a while with the normal data I get the a parse error that there were too many fields in the line from the \"read_table\" command \"Expected X fields in line Z, saw Y\".  I presume this is because the number of columns is taken from the top line?</p>\n\n<p>I need a way to read file to know the maximum amount of columns to pass somehow to pandas to eleviate the error.  The column names don't matter for now as I can always adjust them later in the code.</p>\n\n<p>Then hopefully the bottom part of my code will give me the results I'm after</p>\n\n<pre><code>df['Time'] = df['Date'].astype(str) + ' ' +df['Times']\na = df.set_index('Time').stack()\ndf = a[a !=0].reset_index(drop=True, level=1).reset_index(name='Data').to_csv('output.csv')\n</code></pre>\n"}, {"tags": ["python", "aws-lambda"], "comments": [{"owner": {"reputation": 76, "user_id": 5978106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ht_gtOw4nec/AAAAAAAAAAI/AAAAAAAAAA0/i-PS9fWzyew/photo.jpg?sz=128", "display_name": "Joseph King", "link": "https://stackoverflow.com/users/5978106/joseph-king"}, "edited": false, "score": 0, "creation_date": 1559776313, "post_id": 56469095, "comment_id": 99529639, "body": "What&#39;s the size of the download going into the /tmp folder?"}, {"owner": {"reputation": 116, "user_id": 6856154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d520d2182035d976d1dd45b4f29eb68?s=128&d=identicon&r=PG&f=1", "display_name": "ITnotIT", "link": "https://stackoverflow.com/users/6856154/itnotit"}, "reply_to_user": {"reputation": 76, "user_id": 5978106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ht_gtOw4nec/AAAAAAAAAAI/AAAAAAAAAA0/i-PS9fWzyew/photo.jpg?sz=128", "display_name": "Joseph King", "link": "https://stackoverflow.com/users/5978106/joseph-king"}, "edited": false, "score": 0, "creation_date": 1559776807, "post_id": 56469095, "comment_id": 99529728, "body": "So there are 2 zips, for each one I download and extract it then remove the zip. After extracting they are a bit smaller than 250 MB total."}, {"owner": {"reputation": 76, "user_id": 5978106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ht_gtOw4nec/AAAAAAAAAAI/AAAAAAAAAA0/i-PS9fWzyew/photo.jpg?sz=128", "display_name": "Joseph King", "link": "https://stackoverflow.com/users/5978106/joseph-king"}, "edited": false, "score": 0, "creation_date": 1559777382, "post_id": 56469095, "comment_id": 99529843, "body": "This is interesting, we&#39;ve seen a case where the logs stopped showing up due to the tmp folder running out of memory which created some hairy issues, but it doesn&#39;t appear you&#39;re up against that limit, though you did mention you&#39;re using layers, and not 100% sure that that doesn&#39;t eat into that limit.  How much memory does the lambda have to work with?  Have you throttled that up to see if that could be causing some of this?"}, {"owner": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "edited": false, "score": 0, "creation_date": 1559777822, "post_id": 56469095, "comment_id": 99529919, "body": "Do you use any asynchronous mechanism in the <code>download_deps()</code>? For examples, <code>multithreading</code>, <code>greenlet</code>, <code>gevent</code>, or <code>asyncio</code>."}, {"owner": {"reputation": 116, "user_id": 6856154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d520d2182035d976d1dd45b4f29eb68?s=128&d=identicon&r=PG&f=1", "display_name": "ITnotIT", "link": "https://stackoverflow.com/users/6856154/itnotit"}, "reply_to_user": {"reputation": 76, "user_id": 5978106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ht_gtOw4nec/AAAAAAAAAAI/AAAAAAAAAA0/i-PS9fWzyew/photo.jpg?sz=128", "display_name": "Joseph King", "link": "https://stackoverflow.com/users/5978106/joseph-king"}, "edited": false, "score": 0, "creation_date": 1559778016, "post_id": 56469095, "comment_id": 99529959, "body": "@JosephKing Yeah I suspected some kind of disk space issue, but according to my understanding I am within limits. I have seen a Lambda run out of disk space before but the error was logged. The Lambda is given 1024 MB of memory currently."}, {"owner": {"reputation": 116, "user_id": 6856154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d520d2182035d976d1dd45b4f29eb68?s=128&d=identicon&r=PG&f=1", "display_name": "ITnotIT", "link": "https://stackoverflow.com/users/6856154/itnotit"}, "reply_to_user": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "edited": false, "score": 0, "creation_date": 1559778281, "post_id": 56469095, "comment_id": 99530000, "body": "@PhilipTzou The download_deps() downloads the zip file from S3 and runs zipfile.extractAll on it. Doesn&#39;t use any of the things you listed."}, {"owner": {"reputation": 76, "user_id": 5978106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ht_gtOw4nec/AAAAAAAAAAI/AAAAAAAAAA0/i-PS9fWzyew/photo.jpg?sz=128", "display_name": "Joseph King", "link": "https://stackoverflow.com/users/5978106/joseph-king"}, "edited": false, "score": 0, "creation_date": 1559778520, "post_id": 56469095, "comment_id": 99530037, "body": "@ITnotIT could you boost that to the max, just to rule out any sort of resource limitations?  That&#39;s definitely a pretty large project for a lambda, sounds interesting."}], "answers": [{"comments": [{"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "edited": false, "score": 0, "creation_date": 1600535956, "post_id": 56486500, "comment_id": 113121517, "body": "It could be that the second cold-start is coming from a concurrent Lambda instance. Once AWS Lambda notices that the requests are too many to handle by the existing pool of allocated instances, it adds instances to the pool (up to a maximum of 1000, IIRC)."}], "tags": [], "owner": {"reputation": 116, "user_id": 6856154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d520d2182035d976d1dd45b4f29eb68?s=128&d=identicon&r=PG&f=1", "display_name": "ITnotIT", "link": "https://stackoverflow.com/users/6856154/itnotit"}, "is_accepted": false, "score": 0, "last_activity_date": 1559866095, "creation_date": 1559866095, "answer_id": 56486500, "question_id": 56469095, "link": "https://stackoverflow.com/questions/56469095/aws-lambda-initialization-code-python-mystery/56486500#56486500", "title": "AWS Lambda initialization code (Python) mystery", "body": "<p>I noticed the two 'Cold start's were always ~10 seconds apart. It looks like if the initialization code takes more than ~10 seconds, it is restarted. Also, based on the duration reported in the logs, the time taken by the second initialization is included in the billed duration.</p>\n\n<p>To solve my problem I moved download_deps() inside the handler, making sure that it only does anything if it needs to.</p>\n"}], "owner": {"reputation": 116, "user_id": 6856154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d520d2182035d976d1dd45b4f29eb68?s=128&d=identicon&r=PG&f=1", "display_name": "ITnotIT", "link": "https://stackoverflow.com/users/6856154/itnotit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 826, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559866095, "creation_date": 1559775748, "question_id": 56469095, "link": "https://stackoverflow.com/questions/56469095/aws-lambda-initialization-code-python-mystery", "title": "AWS Lambda initialization code (Python) mystery", "body": "<p>I have a Python 3.6 Lambda function that needs to download dependencies into /tmp (I use layers as well, but /tmp is needed due to size limitations) and import them. I have the code that does the download-zip-and-extract-to-temp part before the handler with the expectation that it only needs to be downloaded on cold start. Say it looks like below (pseudocode):</p>\n\n<pre><code>log('Cold start')\ndownload_deps() # has some log statements of its own\nlog('init end')\n\ndef handler(event, context):\n...\n</code></pre>\n\n<p>Most of the time it works fine. However, every now and then the logs stop showing up somewhere during initialization. (For e.g. it says \"Cold start\", but not \"init end\"; it 'dies' somewhere in download_deps).  I have exception handling in there and log everything, but nothing shows up. When the handler runs next time it runs into ImportError. </p>\n\n<p>While trying to fix this, I noticed something peculiar. The initialization code is running twice on a single invocation of the Lambda. Given the above pseudocode, the logs look like:</p>\n\n<pre><code>Cold start\n&lt;logs from download_deps that indicate it downloaded things into /tmp&gt;\nSTART &lt;RequestId&gt; ...\n\n&lt;RequestId&gt; Cold start\n&lt;logs from download_deps that indicate it skipped download because /tmp was already populated by deps&gt;\ninit end\nEND &lt;RequestId&gt;\n</code></pre>\n\n<p>The \"init end\" part doesn't show up the first time, so logs somehow vanish again. Since it skips download the second time (/tmp is preserved), I know it's not 2 actual cold starts happening. The second time it logs 'Cold start' it includes the RequestId, but not the first time; almost as if the first initialization wasn't caused by a request, even though timing of the request on API gateway matches the timing of the first \"Cold start\". What is going on here?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 6, "creation_date": 1559775681, "post_id": 56469068, "comment_id": 99529528, "body": "The error trace you showed points to a line that is not shown in the code you have provided.  However, the error is generated when you enter in an option that is not between 1 and 4.  You should add this check in once you read in the number from the user."}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1559777190, "post_id": 56469068, "comment_id": 99529804, "body": "In Python we usually <a href=\"https://www.python.org/dev/peps/pep-0008/#function-and-variable-names\" rel=\"nofollow noreferrer\">name variables</a> using <code>lowercase_with_underscores</code>, the style of <code>CapitalLetters</code> is used for class definitions."}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1559777251, "post_id": 56469068, "comment_id": 99529820, "body": "You don&#39;t need to pass the empty string to print, <code>print()</code> on its own will do what you want."}], "answers": [{"tags": [], "owner": {"reputation": 2389, "user_id": 9453926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3faa500658bbb2d2e88c5463a75c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "politinsa", "link": "https://stackoverflow.com/users/9453926/politinsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1559777003, "creation_date": 1559777003, "answer_id": 56469241, "question_id": 56469068, "link": "https://stackoverflow.com/questions/56469068/how-to-repeat-an-input-for-an-input/56469241#56469241", "title": "How to repeat an input for an input", "body": "<p>What is the problem ? This code works perfectly.</p>\n\n<pre><code>#Create a list for when they select the computer they want\nComputerList = [\"(1)Home Basic $900\", \"(2)Office $1200\", \"(3)Gamer $1500\", \"(4)Studio $2200\", \"test (5)\"]\n#Ask them what they want and repeat if left blank\nwhile True:\n    print(ComputerList)\n    ComputerChoice = input(\"What computer would you like to buy?(Use the number beside it 1-%s): \" % len(ComputerList))\n    try:\n        ComputerChoice_int = int(ComputerChoice) - 1\n        if not -1 &lt; ComputerChoice_int &lt; len(ComputerList):\n            raise ValueError\n        print(\"ok\")\n        break\n    except ValueError:\n        print(\"Something went bad :/\\n\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 282, "user_id": 11588396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vDkmR.png?s=128&g=1", "display_name": "Aero Blue", "link": "https://stackoverflow.com/users/11588396/aero-blue"}, "is_accepted": false, "score": 0, "last_activity_date": 1559777080, "creation_date": 1559777080, "answer_id": 56469249, "question_id": 56469068, "link": "https://stackoverflow.com/questions/56469068/how-to-repeat-an-input-for-an-input/56469249#56469249", "title": "How to repeat an input for an input", "body": "<p>You could do something like this, using <code>int(input())</code> makes everything a lot nicer + you don't have to except errors.</p>\n\n<pre><code>ComputerList = [\"(1)Home Basic $900\", \"(2)Office $1200\", \"(3)Gamer $1500\", \"(4)Studio $2200\"]\n\nwhile True:\n    ComputerChoice = int(input(\"What computer would you like to buy?(Use the number beside it 1-4): \"))\n\n    if ComputerChoice not in range(1,5):\n        print(\"invalid input\")\n    else:\n        print(\"You selected {}\".format(ComputerList[ComputerChoice-1]))\n        # Do whatever here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1559777371, "post_id": 56469275, "comment_id": 99529840, "body": "What if <code>Choice</code> is 0 or negative?  Also, adding in a sentinel flag is unnecessary.  You can just use <code>break</code> when needed and let the loop go on forever until a valid input is used (i.e. <code>while True</code>)."}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1559777838, "post_id": 56469275, "comment_id": 99529923, "body": "Edited in how you would deal with it being 0 or negative. And like always there are many ways to do something, and like stated im trying to keep it very obvious whats going on."}], "tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": false, "score": 0, "last_activity_date": 1559777684, "last_edit_date": 1559777684, "creation_date": 1559777332, "answer_id": 56469275, "question_id": 56469068, "link": "https://stackoverflow.com/questions/56469068/how-to-repeat-an-input-for-an-input/56469275#56469275", "title": "How to repeat an input for an input", "body": "<p>Its crashing because you have no clause to catch input greater than 4. Its only raising an error if the field is not convertible to an integer. Now you could hardcode the 4 in, but a more reliable method is to use the length of the list. This makes your code more easy to update if you add or remove computers. </p>\n\n<p>Heres what I would do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ComputerList = [\"(1)Home Basic $900\", \"(2)Office $1200\", \"(3)Gamer $1500\", \"(4)Studio $2200\"]\n\nmax_integer = len(ComputerList)\nstatus = False \nwhile status == False:\n   try:\n      Choice = int(input(\"enter your choice\"))\n      if 0 &lt; Choice &lt;= max_integer:\n         status = True\n   except ValueError:\n      print('input is invalid')\n      pass\n</code></pre>\n\n<p>This can be shortened up but I drew it out a bit so you understand whats happening    </p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 8622384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c2be1a8c95107b847ebe1a8b7117049?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Araujo", "link": "https://stackoverflow.com/users/8622384/rafael-araujo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559778137, "creation_date": 1559778137, "answer_id": 56469356, "question_id": 56469068, "link": "https://stackoverflow.com/questions/56469068/how-to-repeat-an-input-for-an-input/56469356#56469356", "title": "How to repeat an input for an input", "body": "<p>What is happening is that you are catching just ValueError like strings or empty values. The number 4 is not an error because 4 is an integer. If you want to handle with ValueError and IndexError you need to do it:</p>\n\n<pre><code>#Create a list for when they select the computer they want\nComputerList = [\"(1)Home Basic $900\", \"(2)Office $1200\", \"(3)Gamer $1500\", \"(4)Studio $2200\"]\n#Ask them what they want and repeat if left blank\nwhile True:\n    ComputerChoice = input(\"What computer would you like to buy?(Use the number beside it 1-4): \")\n    print(\"\")\n    try:\n        ComputerChoice_int = int(ComputerChoice)\n        Computer = ComputerList[ComputerChoice_int -1]\n    except Exception as e:\n        if e.__class__.__name__ == \"ValueError\":\n            print(\"You can not leave this blank '%s', try again\" % (ComputerChoice,))\n            print(\"\")\n        elif e.__class__.__name__ == \"IndexError\":\n            print(\"You can not input numbers bigger than {}, try again\".format(len(ComputerList)))\n            print(\"\")\n    else:\n        break\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11606474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c955baf46870be29886cea97e8a831c?s=128&d=identicon&r=PG&f=1", "display_name": "Somestuckkid", "link": "https://stackoverflow.com/users/11606474/somestuckkid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1559778137, "creation_date": 1559775532, "last_edit_date": 1559775650, "question_id": 56469068, "link": "https://stackoverflow.com/questions/56469068/how-to-repeat-an-input-for-an-input", "title": "How to repeat an input for an input", "body": "<p>I have been trying to get my code to repeat for a list it works if it is left blank but if the input is above 4 in breaks, I'm still trying to get the hang of python</p>\n\n<p>I've tried finding a solutions for this but can't figure out what needs to be where it should go</p>\n\n<pre><code>#Create a list for when they select the computer they want\nComputerList = [\"(1)Home Basic $900\", \"(2)Office $1200\", \"(3)Gamer $1500\", \"(4)Studio $2200\"]\n#Ask them what they want and repeat if left blank\nwhile True:\n    ComputerChoice = input(\"What computer would you like to buy?(Use the number beside it 1-4): \")\n    print(\"\")\n    try:\n        ComputerChoice_int = int(ComputerChoice)\n    except ValueError:\n        print(\"You can not leave this blank '%s', try again\" % (ComputerChoice,))\n        print(\"\")\n    else:\n        break\n</code></pre>\n\n<p>I expected it to repeat but it comes up with </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"\\\\hnhs-fs01\\StudentUsers$\\17031\\Documents\\11 DTG\\1.7\\Assement\\Assessment computer.py\", line 69, in &lt;module&gt;\n    Computer = ComputerList[ComputerChoice_int -1]\nIndexError: list index out of range\n</code></pre>\n"}, {"tags": ["python", "django", "authentication", "heroku"], "comments": [{"owner": {"reputation": 859, "user_id": 7986808, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9c7c2b8e8a67a276bbc476d48a102b?s=128&d=identicon&r=PG&f=1", "display_name": "khashashin", "link": "https://stackoverflow.com/users/7986808/khashashin"}, "edited": false, "score": 1, "creation_date": 1559778494, "post_id": 56469009, "comment_id": 99530032, "body": "I assume you did migrations on heroku as well and create superuser?"}, {"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 1, "creation_date": 1559785657, "post_id": 56469009, "comment_id": 99531158, "body": "A bit more explanation of the previous comment: your local database and your Heroku database are entirely separate. Deploying to Heroku doesn&#39;t copy your database; you need to create your schema (<code>heroku run python manage.py migrate</code>) and create data (probably starting with <code>heroku run python manage.py createsuperuser</code>)."}, {"owner": {"reputation": 394, "user_id": 2762270, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/KKNtD.jpg?s=128&g=1", "display_name": "jjonesdesign", "link": "https://stackoverflow.com/users/2762270/jjonesdesign"}, "edited": false, "score": 0, "creation_date": 1559795590, "post_id": 56469009, "comment_id": 99532765, "body": "Sorry fellas, my mistake was with the RDS security, my ingress was being blocked since the wizard used my personal IP. The solution was to unblock ingress IP. Thank you for your time though."}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 2762270, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/KKNtD.jpg?s=128&g=1", "display_name": "jjonesdesign", "link": "https://stackoverflow.com/users/2762270/jjonesdesign"}, "is_accepted": false, "score": 0, "last_activity_date": 1559795721, "creation_date": 1559795721, "answer_id": 56470943, "question_id": 56469009, "link": "https://stackoverflow.com/questions/56469009/unable-to-log-in-with-provided-credentials-on-heroku-but-not-localhost/56470943#56470943", "title": "&quot;Unable to log in with provided credentials&quot; on HEROKU but not LOCALHOST", "body": "<p>The problem was with my AWS security.</p>\n\n<p>Ingress access was limited to my personal IP address by default, I simply had to remove this limitation and the system starts working just fine.</p>\n\n<p>If you are able to access your RDS from localhost, but not on Heroku, this will solve your problem since AWS uses your IP address during the setup wizard to block all other connections.</p>\n"}], "owner": {"reputation": 394, "user_id": 2762270, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/KKNtD.jpg?s=128&g=1", "display_name": "jjonesdesign", "link": "https://stackoverflow.com/users/2762270/jjonesdesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559795721, "creation_date": 1559775059, "question_id": 56469009, "link": "https://stackoverflow.com/questions/56469009/unable-to-log-in-with-provided-credentials-on-heroku-but-not-localhost", "title": "&quot;Unable to log in with provided credentials&quot; on HEROKU but not LOCALHOST", "body": "<p>I have been working on a Django app on localhost and got the site where I was ready to push to Heroku.</p>\n\n<p>While running the site on localhost, I am able to successfully get an Auth Token from my internal API, and log the user in successfully.</p>\n\n<p>The moment I try to do this same action on the Heroku site, I get the error</p>\n\n<pre><code>\"Unable to log in with provided credentials.\"\n</code></pre>\n\n<p>I am not sure why this is happening, maybe there is something specific to Heroku?</p>\n\n<pre><code>INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n\n    'widget_tweaks',\n    'django_filters',\n    'rest_framework',\n    'rest_framework.authtoken',\n\n    'admin_settings',\n    'customer_settings',\n    'user',\n]\n\nREST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': (\n        'rest_framework.authentication.TokenAuthentication',\n    )\n}\n\nAUTH_USER_MODEL = 'admin_settings.User'\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n\n]\n\nROOT_URLCONF = 'app.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n</code></pre>\n"}, {"tags": ["python", "tkinter", "raspberry-pi", "raspberry-pi3", "gpio"], "comments": [{"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1559803812, "post_id": 56468967, "comment_id": 99535114, "body": "Did you try adding parameter <code>smth=1</code> to <code>start()</code> function like <code>def start(smth=1):</code>."}, {"owner": {"reputation": 37, "user_id": 7787255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172ace8321f50214cdb7d4c7e485469f?s=128&d=identicon&r=PG&f=1", "display_name": "definho", "link": "https://stackoverflow.com/users/7787255/definho"}, "reply_to_user": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1559816243, "post_id": 56468967, "comment_id": 99541278, "body": "yes, did not write it here, I tried but it doesn&#39;t help..."}, {"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1559831027, "post_id": 56468967, "comment_id": 99549764, "body": "Is there any error shown in console when start() is triggered by GPIO?"}, {"owner": {"reputation": 37, "user_id": 7787255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172ace8321f50214cdb7d4c7e485469f?s=128&d=identicon&r=PG&f=1", "display_name": "definho", "link": "https://stackoverflow.com/users/7787255/definho"}, "reply_to_user": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1560007177, "post_id": 56468967, "comment_id": 99602637, "body": "no, there&#39;s not a single error, it gives error if I press the button without parameter smth, as you said in previous comment - def start(smth=1):"}, {"owner": {"reputation": 6602, "user_id": 1188632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22595b273d782f47d5c21b9c557b67b6?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1188632/jeff"}, "edited": false, "score": 0, "creation_date": 1563998024, "post_id": 56468967, "comment_id": 100890463, "body": "Can you show how your buttons are wired to the GPIOs?"}], "owner": {"reputation": 37, "user_id": 7787255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172ace8321f50214cdb7d4c7e485469f?s=128&d=identicon&r=PG&f=1", "display_name": "definho", "link": "https://stackoverflow.com/users/7787255/definho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559774633, "creation_date": 1559774633, "question_id": 56468967, "link": "https://stackoverflow.com/questions/56468967/rpi-program-not-working-when-started-with-gpio-button", "title": "RPI program not working when started with GPIO button", "body": "<p>So I'm making simple sports semaphore to display results and time. I use TkInter for GUI and GPIO (physical buttons) to add scores, pause/reset scores etc...\nWhen I start timer/program with the GPIO button other GPIO buttons don't work anymore and I can't figure why. I can't add scores, or pause timer...\nIf I start program with GUI button it works normally and I can add scores, pause timer with other GUI buttons. Here is the code and I think there is some problem with passing the \"root\".\nAlso, when there's GPIO button pressed it passes argument so I had to use that \"smth\" for functions, and when you press GUI button there's nothing to pass to functions.\nSo all in all, when I press GUI button to call start() it all works, when I start with GPIO button adding scores and other GPIO buttons don't work</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import RPi.GPIO as GPIO\nimport Tkinter as tk\nimport time\n\n\nGPIO.setmode(GPIO.BCM)\n\nGPIO.setup(4, GPIO.IN, pull_up_down=GPIO.PUD_UP)\nGPIO.setup(18, GPIO.IN, pull_up_down=GPIO.PUD_UP)\nGPIO.setup(17, GPIO.IN, pull_up_down=GPIO.PUD_UP) \nGPIO.setup(27, GPIO.IN, pull_up_down=GPIO.PUD_UP) \nGPIO.setup(22, GPIO.IN, pull_up_down=GPIO.PUD_UP)\nGPIO.setup(23, GPIO.IN, pull_up_down=GPIO.PUD_UP)\nGPIO.setup(24, GPIO.IN, pull_up_down=GPIO.PUD_UP) \n\n\ndef fun_score1(smth):\n    global score1\n    score1 += 1\n    label_team1['text'] = 'Team 1: ' + str(score1)\n\ndef fun_score2(smth):\n    global score2\n    score2 += 1\n    label_team2['text'] = 'Team 2: ' + str(score2)\n\ndef start():\n    global count_flag, count\n    count_flag = True\n\n    while True: \n        if count_flag == False:\n            break\n        # put the count value into the label\n        label_time['text'] = str(count)\n        # wait for 0.1 seconds\n        time.sleep(0.1)\n        # needed with time.sleep()\n        root.update()\n        # increase count\n        count += 0.1\n\ndef stop(smth=1):\n    global count_flag, count, score1, score2\n    count_flag = False\n    count = 0.0\n    score1 = 0\n    score2 = 0\n    label_time['text'] = str(count)\n    label_team1['text'] = 'Team 1: ' + str(score1)\n    label_team2['text'] = 'Team 2: ' + str(score2)\n\ndef pause(smth=1):\n    global count_flag\n    count_flag = False\n\ncount = 0.0\nscore1 = 0\nscore2 = 0\n\nroot = tk.Tk()\n# this will be a global flag\ncount_flag = True\n\n# create needed widgets\nlabel_time = tk.Label(root, text='0.0')\nlabel_team1 = tk.Label(root, text='Team 1: ' + str(score1))\nlabel_team2 = tk.Label(root, text='Team 2: ' + str(score2))\n\n#btn_pause = tk.Button(root, text='Pause', command=pause)\nbtn_start = tk.Button(root, text='Start', command=start)\n#btn_stop = tk.Button(root, text='Reset', command=stop)\n\nbtn_start.grid(row=1, column=0, padx=5, pady=5)\n#btn_stop.grid(row=1, column=2, padx=5)\n#btn_pause.grid(row=1, column=1, padx=5)\n\nlabel_time.grid(row=0, column=0, columnspan=2)\nlabel_team1.grid(row=2, column=0, padx=5, pady=5)\nlabel_team2.grid(row=2, column=3, padx=5, pady=5)\n\nGPIO.add_event_detect(22, GPIO.RISING, callback=start, bouncetime=300)\nGPIO.add_event_detect(24, GPIO.RISING, callback=stop, bouncetime=300)\nGPIO.add_event_detect(23, GPIO.RISING, callback=pause, bouncetime=300)\nGPIO.add_event_detect(4, GPIO.RISING, callback=fun_score1, bouncetime=300)\nGPIO.add_event_detect(17, GPIO.RISING, callback=fun_score2, bouncetime=300)\n\n\n# start the event loop\nroot.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GTPil.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GTPil.png\" alt=\"Program GUI\"></a></p>\n"}, {"tags": ["python", "numpy-stl"], "owner": {"reputation": 510, "user_id": 6031421, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10209087723699302/picture?type=large", "display_name": "Umar Dastgir", "link": "https://stackoverflow.com/users/6031421/umar-dastgir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559774471, "creation_date": 1559774471, "question_id": 56468947, "link": "https://stackoverflow.com/questions/56468947/scale-an-stl-file-using-python-script", "title": "Scale an .stl file using python script", "body": "<p>I have an .stl file and I want to write a python script to scale if. So for example, if I have a file with a cube of dimensions 2x2x2mm, and I have my scale set to 10, the script should spit out an stl file with a cube of dimensions 20x20x20mm. </p>\n\n<p>I searched and found numpy-stl library for modifying stl files. However, I can't seem to find any function that scales an .stl. Can someone point me in the right direction as what to use?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1559774897, "creation_date": 1559774897, "answer_id": 56468993, "question_id": 56468897, "link": "https://stackoverflow.com/questions/56468897/return-top-n-largest-values-per-group-using-pandas/56468993#56468993", "title": "Return top N largest values per group using pandas", "body": "<p>IIUC, one option is <code>sort_values</code> and <code>GroupBy.head</code> with n=2:</p>\n\n<pre><code>df.sort_values('Value', ascending=False).groupby('MASTER', sort=False).head(2)\n\n     MASTER    SLAVE   Value\n0  Master_1  Slave_1  657879\n2  Master_1  Slave_3  453313\n8  Master_3  Slave_1   65765\n3  Master_2  Slave_1   56667\n9  Master_3  Slave_2   23431\n7  Master_2  Slave_5   22235\n</code></pre>\n\n<hr>\n\n<p>Another is using <code>set_index</code> and <code>GroupBy.nlargest</code> with n=2:</p>\n\n<pre><code>df.set_index('SLAVE').groupby('MASTER')['Value'].nlargest(2).reset_index()\n\n     MASTER    SLAVE   Value\n0  Master_1  Slave_1  657879\n1  Master_1  Slave_3  453313\n2  Master_2  Slave_1   56667\n3  Master_2  Slave_5   22235\n4  Master_3  Slave_1   65765\n5  Master_3  Slave_2   23431\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 699, "user_id": 5878756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ec8f82796e290513bdf571b7022a59?s=128&d=identicon&r=PG&f=1", "display_name": "deckard", "link": "https://stackoverflow.com/users/5878756/deckard"}, "is_accepted": false, "score": 0, "last_activity_date": 1559776042, "creation_date": 1559776042, "answer_id": 56469129, "question_id": 56468897, "link": "https://stackoverflow.com/questions/56468897/return-top-n-largest-values-per-group-using-pandas/56469129#56469129", "title": "Return top N largest values per group using pandas", "body": "<p>You can use a combination of sort and groupby:</p>\n\n<pre><code>df.sort_values(['MASTER', 'Value'], ascending=[True, False], inplace=True)\ngrp = df.groupby('MASTER')['SLAVE'].indices\nslaves = {k: df.loc[k][:2]['SLAVE'].values  for k in grp.keys()}\n</code></pre>\n\n<p>Will output:</p>\n\n<pre><code>{'Master_1': array(['Slave_1', 'Slave_3'], dtype=object),\n 'Master_2': array(['Slave_1', 'Slave_5'], dtype=object),\n 'Master_3': array(['Slave_1', 'Slave_2'], dtype=object)}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7624246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba3a5db40bda8245ebc2bc26ade8e92?s=128&d=identicon&r=PG&f=1", "display_name": "Gara", "link": "https://stackoverflow.com/users/7624246/gara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 56468993, "answer_count": 2, "score": 0, "last_activity_date": 1559866210, "creation_date": 1559774015, "last_edit_date": 1559866210, "question_id": 56468897, "link": "https://stackoverflow.com/questions/56468897/return-top-n-largest-values-per-group-using-pandas", "title": "Return top N largest values per group using pandas", "body": "<p>I am trying to find maximum values in number of series each grouped by name of the column it was extracted from.</p>\n\n<p>I have a dataframe as such:</p>\n\n<pre><code>MASTER      SLAVE       Value\n\nMaster_1    Slave_1     657879\nMaster_1    Slave_2     34343\nMaster_1    Slave_3     453313\n\nMaster_2    Slave_1     56667\nMaster_2    Slave_2     6879\nMaster_2    Slave_3     12333\nMaster_2    Slave_4     789\nMaster_2    Slave_5     22235\n\nMaster_3    Slave_1     65765\nMaster_3    Slave_2     23431\nMaster_3    Slave_3     445\nMaster_3    Slave_4     567\n</code></pre>\n\n<p>I need to find maximum values of first two slaves of each master.</p>\n\n<p>This is so far I've gotten yet:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.groupby('MASTER')['SLAVE'].unique()\n</code></pre>\n\n<p>It output series 'Slaves' values for each 'MASTER':</p>\n\n<pre><code>Master_1    [657879, 34343, 453313]\nMaster_2    [56667, 6879, 12333, 789, 22235]\nMaster_3    [65765, 23431, 445, 789, 567]\n</code></pre>\n\n<p>But I fail to understand what type of data I'm dealing with after this input. And how I can sort those values.</p>\n"}, {"tags": ["python", "nlp", "gensim", "word2vec", "word-embedding"], "comments": [{"owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "edited": false, "score": 1, "creation_date": 1559779298, "post_id": 56468865, "comment_id": 99530153, "body": "What do you mean &quot;does not work for me&quot;? (Is there an error? Unsatisfactory results?) What is the initial format of your data? (Many examples assume, and work best, if you can create a plain-text file where each &quot;document&quot; is on its own line.) While using an iterator that works from giant files on disk is a good idea if you have a giant corpus, just 40K docs isn&#39;t very large \u2013 quite small for Word2Vec/Doc2Vec \u2013 and probably fits in memory as a list just fine. That is, you <b>can</b> &quot;pass thousands and thousands of sentences&quot;."}, {"owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "edited": false, "score": 1, "creation_date": 1559779541, "post_id": 56468865, "comment_id": 99530193, "body": "(For your second &quot;is it better&quot; question, it isn&#39;t completely clear what 2 options you&#39;re considering. If you have enough of your own data, the resulting word-embeddings will typically be better than those imported from elsewhere \u2013 you&#39;ll be sure to have vectors for all of <b>your</b> words, and in their domain-specific senses. But depending on subtleties of your data &amp; ultimate goals, vectors from elsewhere might help \u2013 there&#39;s no &quot;generally better&quot; for all situations.)"}, {"owner": {"reputation": 1661, "user_id": 7168098, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10211116238159507/picture?type=large", "display_name": "JFerro", "link": "https://stackoverflow.com/users/7168098/jferro"}, "reply_to_user": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "edited": false, "score": 0, "creation_date": 1559804138, "post_id": 56468865, "comment_id": 99535258, "body": "a) even if I could the code should work for others as well who might have around 250000 docs, x 50 pages x 30 lines= 25x10^6 sentences. 26 million sentences list... I will try it. But as far as I can understand passing sentence to sentence might allow me to create the words embedding bit a bit. But you are right I might try to it brute force and pass all in one chunk. Generating a list in memory with 26 million sentences might take a while (generating sentences out of the bunch of docs is quite time consuming; sentence segmentation with NLTK and spacy needs a lot of tweaks to avoid errors)"}, {"owner": {"reputation": 1661, "user_id": 7168098, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10211116238159507/picture?type=large", "display_name": "JFerro", "link": "https://stackoverflow.com/users/7168098/jferro"}, "reply_to_user": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "edited": false, "score": 0, "creation_date": 1559804766, "post_id": 56468865, "comment_id": 99535548, "body": "b) The two options are, getting my 40000 docs and create the word vectors myself (embeddings) OR b) using the word vectors of Glovec or Word2vec."}, {"owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "edited": false, "score": 0, "creation_date": 1559841659, "post_id": 56468865, "comment_id": 99554982, "body": "Yes, if you have 26 million sentences, an iterator from disk files is a better solution, and should work fine as in the many online examples of doing it that way. So if you continue to have problems, clearly state what errors/failures you&#39;re encountering, and the format of your source data \u2013 and the problems should be easy to resolve."}], "answers": [{"tags": [], "owner": {"reputation": 1175, "user_id": 10184783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/us95B.png?s=128&g=1", "display_name": "Abhi25t", "link": "https://stackoverflow.com/users/10184783/abhi25t"}, "is_accepted": true, "score": 2, "last_activity_date": 1603177154, "creation_date": 1603177154, "answer_id": 64440004, "question_id": 56468865, "link": "https://stackoverflow.com/questions/56468865/sentence-iterator-to-pass-to-gensim-language-model/64440004#64440004", "title": "Sentence iterator to pass to Gensim language model", "body": "<p>Your illustrated class <code>MySentences</code> assumes one sentence per line. That might not be the case for your data.</p>\n<p>One thing to note is - calling Word2Vec(sentences, iter=1) will run two passes over the sentences iterator (or, in general iter+1 passes; default iter=5). The first pass collects words and their frequencies to build an internal dictionary tree structure. The second and subsequent passes train the neural model. These two (or, iter+1) passes can also be initiated manually, in case your input stream is non-repeatable (you can only afford one pass), and you\u2019re able to initialize the vocabulary some other way:</p>\n<pre><code>model = gensim.models.Word2Vec(iter=1)  # an empty model, no training yet\nmodel.build_vocab(some_sentences)  # can be a non-repeatable, 1-pass generator\nmodel.train(other_sentences)  # can be a non-repeatable, 1-pass generator\n</code></pre>\n<p>For example, if you are trying to read dataset stored in a database, your generator function to stream text directly from a database, will throw TypeError:</p>\n<pre><code>TypeError: You can't pass a generator as the sentences argument. Try an iterator.\n</code></pre>\n<p>A generator can be consumed only once and then it\u2019s forgotten. So, you can write a wrapper which has an iterator interface but uses the generator under the hood.</p>\n<pre><code>class SentencesIterator():\n    def __init__(self, generator_function):\n        self.generator_function = generator_function\n        self.generator = self.generator_function()\n\n    def __iter__(self):\n        # reset the generator\n        self.generator = self.generator_function()\n        return self\n\n    def __next__(self):\n        result = next(self.generator)\n        if result is None:\n            raise StopIteration\n        else:\n            return result\n</code></pre>\n<p>The generator function is stored as well so it can reset and be used in Gensim like this:</p>\n<pre><code>from gensim.models import FastText\n\nsentences = SentencesIterator(tokens_generator)\nmodel = FastText(sentences) \n</code></pre>\n"}], "owner": {"reputation": 1661, "user_id": 7168098, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10211116238159507/picture?type=large", "display_name": "JFerro", "link": "https://stackoverflow.com/users/7168098/jferro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 64440004, "answer_count": 1, "score": 2, "last_activity_date": 1603177154, "creation_date": 1559773789, "question_id": 56468865, "link": "https://stackoverflow.com/questions/56468865/sentence-iterator-to-pass-to-gensim-language-model", "title": "Sentence iterator to pass to Gensim language model", "body": "<p>I am relatively new to NLP and I am trying to create my own words embeddings trained in my personal corpus of docs.</p>\n\n<p>I am trying to implement the following code to create my own wordembedings:</p>\n\n<pre><code>model = gensim.models.Word2Vec(sentences)\n</code></pre>\n\n<p>with sentences being a list of sentences.\nSince I can not pass thousands and thousands of sentences I need an iterator</p>\n\n<pre><code># with mini batch_dir a directory with the text files\n# MySentences is a class iterating over sentences.\nsentences = MySentences(minibatch_dir) # a memory-friendly iterator\n</code></pre>\n\n<p>I found this solution by the creator of gensim:</p>\n\n<pre><code>class MySentences(object):\n    def __init__(self, dirname):\n        self.dirname = dirname\n\n    def __iter__(self):\n        for fname in os.listdir(self.dirname):\n            for line in open(os.path.join(self.dirname, fname)):\n                yield line.split()\n</code></pre>\n\n<p>It does not work for me.\nHow can I create an iterator if I know how to get the list of sentences from every document?</p>\n\n<p>And second very related question:\nIf I am aiming to compare documents similarity in a particular corpus, is always better to create from scratch word embeddings with all the documents of that particular corpus than using GloVec or word2vec? \nThe amount of docs is around 40000.</p>\n\n<p>cheers</p>\n\n<p>More pre</p>\n"}, {"tags": ["python", "html", "python-requests"], "comments": [{"owner": {"reputation": 282, "user_id": 11588396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vDkmR.png?s=128&g=1", "display_name": "Aero Blue", "link": "https://stackoverflow.com/users/11588396/aero-blue"}, "edited": false, "score": 5, "creation_date": 1559774300, "post_id": 56468863, "comment_id": 99529251, "body": "Requests does not support <code>javascript</code> as your browser does. If you wish to load the entire page, please look into something like <code>selenium</code>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1559778022, "post_id": 56468863, "comment_id": 99529960, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17608572/web-scraping-dynamic-content-with-python\">web scraping dynamic content with python</a>"}, {"owner": {"reputation": 151, "user_id": 5120709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c3230ef89b3ef89ee3d8afd709e090?s=128&d=identicon&r=PG&f=1", "display_name": "Ying Zhou", "link": "https://stackoverflow.com/users/5120709/ying-zhou"}, "reply_to_user": {"reputation": 282, "user_id": 11588396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vDkmR.png?s=128&g=1", "display_name": "Aero Blue", "link": "https://stackoverflow.com/users/11588396/aero-blue"}, "edited": false, "score": 0, "creation_date": 1559859099, "post_id": 56468863, "comment_id": 99561449, "body": "@AeroBlue Thanks! I&#39;m doing that."}], "owner": {"reputation": 151, "user_id": 5120709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c3230ef89b3ef89ee3d8afd709e090?s=128&d=identicon&r=PG&f=1", "display_name": "Ying Zhou", "link": "https://stackoverflow.com/users/5120709/ying-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559850017, "creation_date": 1559773787, "question_id": 56468863, "link": "https://stackoverflow.com/questions/56468863/why-cant-requests-obtain-the-same-page-i-obtained-by-manually-downloading-it", "title": "Why can&#39;t requests obtain the same page I obtained by manually downloading it?", "body": "<p>Here is an url: </p>\n\n<blockquote>\n  <p><a href=\"https://resumes.indeed.com/resume/064aa30c029ff32e?s=l%3D%26q%3Dcat%2520sitter%26searchFields%3Djt\" rel=\"nofollow noreferrer\">https://resumes.indeed.com/resume/064aa30c029ff32e?s=l%3D%26q%3Dcat%2520sitter%26searchFields%3Djt</a></p>\n</blockquote>\n\n<p>This is what I got from <code>requests</code>:</p>\n\n<pre><code>&lt;!DOCTYPE doctype html&gt;\n\n&lt;html&gt;&lt;head&gt;&lt;script src=\"//cdn.optimizely.com/js/7275028.js\"&gt;&lt;/script&gt;&lt;meta content=\"text/html;charset=utf-8\" http-equiv=\"Content-Type\"/&gt;&lt;title&gt;Indeed Resume Search&lt;/title&gt;&lt;meta content=\"Find millions of resumes today on Indeed Resume. Fast, simple resume search.\" name=\"description\"/&gt;&lt;meta content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" name=\"viewport\"/&gt;&lt;meta content=\"115882278440564\" property=\"fb:app_id\"/&gt;&lt;meta content=\"indeedjobs:indeed_resume\" property=\"og:type\"/&gt;&lt;meta content=\"noindex,nofollow\" name=\"robots\"/&gt;&lt;meta content=\"I'm one of the thousands of employers already using Indeed to access millions of resumes. Fast, simple resume search.\" property=\"og:description\"/&gt;&lt;meta content=\"https://www.indeed.com/resumes\" property=\"og:url\"/&gt;&lt;meta content=\"http://labkit.indeed.com/static/indeed_fb.png\" property=\"og:image\"/&gt;&lt;meta content=\"Indeed.com\" property=\"og:site_name\"/&gt;&lt;meta content=\"noindex,nofollow\" name=\"robots\"/&gt;&lt;link href=\"/resumes/s/b16dcef/serp-compiled.css\" media=\"all\" rel=\"stylesheet\" type=\"text/css\"/&gt;&lt;script type=\"text/javascript\"&gt;window.__JSERROR__=[];window.onerror=function() { window.__JSERROR__.push(arguments)}&lt;/script&gt;&lt;script type=\"text/javascript\"&gt;var googleAnalyticsDomains = ['indeed.com','indeed.com.au','indeed.com.br','indeed.ca','indeed.ch','indeed.cl','indeed.com.co','indeed.de','indeed.es','indeed.fr','indeed.co.uk','indeed.hk','indeed.ie','indeed.co.in','indeed.jp','indeed.com.mx','indeed.nl','indeed.com.sg','indeed.co.za','indeed.ae','indeed.fi','indeed.lu','indeed.com.my','indeed.com.pe','indeed.com.ph','indeed.com.pk','indeed.pt','indeed.co.ve'];\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n            ga('create', 'UA-90780-1', 'auto', {\n              'allowLinker': true\n            });\n            ga('require', 'linkid');\n            ga('require', 'linker');\n            ga('linker:autoLink', googleAnalyticsDomains, false, true);\n            ga('send', 'pageview');\n        &lt;/script&gt;\n&lt;script&gt;\n        !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n        n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;\n        n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;\n        t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,\n        document,'script','https://connect.facebook.net/en_US/fbevents.js');\n\n        fbq('init', '579216298929618');\n        fbq('track', \"PageView\");\n    &lt;/script&gt;\n&lt;noscript&gt;\n&lt;img height=\"1\" src=\"https://www.facebook.com/tr?id=579216298929618&amp;amp;ev=PageView&amp;amp;noscript=1\" style=\"display:none\" width=\"1\"/&gt;\n&lt;/noscript&gt;\n&lt;script type=\"text/javascript\"&gt;var _sift = _sift || []; _sift.push(['_setAccount', 'fb21e9c129']); _sift.push(['_setUserId', '1dckrv14p3cr4800']); _sift.push(['_trackPageview']);\n                (function() {\n                    function loadSift() {\n                        var sift = document.createElement('script');\n                        sift.type = 'text/javascript';\n                        sift.async = true;\n                        sift.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dtlilztwypawv.cloudfront.net/s.js';\n                        var s = document.getElementsByTagName('script')[0];\n                        s.parentNode.insertBefore(sift, s);\n                    }\n                    if (window.attachEvent) {\n                        window.attachEvent('onload', loadSift);\n                    } else {\n                        window.addEventListener('load', loadSift, false);\n                    }\n                })();\n            &lt;/script&gt;&lt;/head&gt;&lt;body class=\"rexstyletst-newStyle\" data-tn-application=\"rex\" data-tn-olth=\"0329d6a20d4392f3e4aedce788f9a038\" data-tn-originlogid=\"1dckrv1ce1daj000\" data-tn-originlogtype=\"rexIndexPage\"&gt;&lt;link href=\"/resumes/static/css/icons.css\" rel=\"stylesheet\" type=\"text/css\"/&gt;&lt;script type=\"text/javascript\"&gt;\n                function dismissLegalNotice() {\n                    document.getElementById('legalNoticeContainer').setAttribute(\"style\",\"display:none\");\n                    var d = new Date();\n                    d.setTime(d.getTime() + (30*24*60*60*1000));\n                    var expires = 'expires='+d.toUTCString();\n                    document.cookie = 'LNFI=1; ' + expires;\n                }\n            &lt;/script&gt;&lt;div id=\"legalNoticeContainer\" style=\"display:none;\"&gt;&lt;/div&gt;&lt;div class=\"no-margin-bottom\" data-tn-section=\"global-nav\" id=\"g_nav\"&gt;&lt;table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td nowrap=\"\"&gt;&lt;div data-tn-component=\"left-nav\" id=\"p_nav\"&gt;&lt;span class=\"navBi\"&gt;&lt;a data-tn-element=\"jobs-link\" data-tn-link=\"\" href=\"https://www.indeed.com?hl=en\" id=\"jobsLink\" title=\"Find Jobs\"&gt;Find Jobs&lt;/a&gt;&lt;/span&gt;&lt;span class=\"navBi\"&gt;&lt;a class=\"selected\" data-tn-element=\"find-resume-link\" data-tn-link=\"\" href=\"/resumes\" id=\"rezLink\"&gt;Find Resumes&lt;/a&gt;&lt;/span&gt;&lt;span class=\"navBi\"&gt;&lt;a data-tn-element=\"employers-link\" data-tn-link=\"\" href=\"https://ads.indeed.com?hl=en&amp;amp;cc=US\" id=\"empLink\" onclick=\"if (!this.href.match('&amp;amp;isid=rezsearch&amp;amp;ikw=')) this.href += '&amp;amp;isid=rezsearch&amp;amp;ikw=rezglobalnav';\"&gt;Employers&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td align=\"right\" nowrap=\"\"&gt;&lt;div data-tn-component=\"right-nav\" id=\"u_nav\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n                            function isUserOptionsOpen() {\n                                    return document.getElementById('userOptions').className == 'open';\n                            }\n\n                            function hideUserOptions(label,options) {\n                                    options.className = '';\n                                    label.className = 'navBi';\n                            }\n\n                            function toggleUserOptions(e) {\n                                    var options = document.getElementById('userOptions');\n                                    var label = document.getElementById('userOptionsLabel');\n                                    if ( isUserOptionsOpen() ) {\n                                            hideUserOptions( label, options );\n                                            if ( !e.keyCode ) {\n                                                    label.blur();\n                                            }\n                                    } else {\n                                            options.className = 'open';\n                                            label.className = 'navBi active';\n                                            document.onclick = function() { hideUserOptions(label,options); document.onclick = function() { }; };\n                                            if (e.keyCode &amp;&amp; e.keyCode == 13) {\n                                                    var fL = gbid('userOptions').getElementsByTagName('a')[0];\n                                                    if (fL) { fL.focus(); }\n                                            }\n                                            else {\n                                                    label.blur();\n                                            }\n                                    }\n                                    stopPropagation(e);\n\n                            }\n\n                            function stopPropagation(e) {\n                                    var e = e || window.event;\n                                    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;\n                            }\n                    &lt;/script&gt;\n&lt;span class=\"navBi\" id=\"navpromo\"&gt;&lt;a class=\"promo_link\" href=\"https://ads.indeed.com/?hl=en&amp;amp;co=US\" onclick=\"if (!this.href.match('&amp;amp;isid=rezsearch&amp;amp;ikw=')) this.href += '&amp;amp;isid=rezsearch&amp;amp;ikw=reznav';\"&gt;Post a Job&lt;/a&gt;&lt;/span&gt; &lt;span class=\"navBi\"&gt;&lt;a data-tn-element=\"sign-in\" data-tn-link=\"\" href=\"/resumes/account/login?dest=%2Fresumes\" id=\"userOptionsLabel\" rel=\"nofollow\"&gt;Sign in&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div class=\"index\" id=\"page_frame\"&gt;&lt;div id=\"page_content\"&gt;&lt;div id=\"serp\"&gt;&lt;div id=\"content\"&gt;&lt;div data-tn-section=\"serp-search-header\" id=\"search_header\"&gt;&lt;a data-tn-element=\"serp-logo\" data-tn-link=\"\" href=\"/resumes\" id=\"logo_link\"&gt;&lt;img alt=\"Indeed Resume\" id=\"indeed_logo\" src=\"/resumes/static/images/indeed_resume_header.png\"/&gt;&lt;/a&gt;&lt;form action=\"/resumes\" autocomplete=\"off\" data-tn-component=\"serp-search-form\" id=\"rezsearch\" method=\"get\"&gt;&lt;table id=\"search_table\"&gt;&lt;tr&gt;&lt;td&gt;&lt;label for=\"query\" id=\"query_label\"&gt;what&lt;/label&gt;&lt;/td&gt;&lt;td&gt;&lt;label for=\"location\" id=\"location_label\"&gt;where&lt;/label&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=\"input_container\" id=\"query_input_container\"&gt;&lt;input autocomplete=\"off\" class=\"query instant\" disabled=\"disabled\" id=\"query_instant\" onfocus=\"document.getElementById('query').focus()\" type=\"text\"/&gt;&lt;input autofocus=\"\" class=\"query input\" id=\"query\" name=\"q\" placeholder=\"job title, skills, or company\" type=\"text\" value=\"\"/&gt;&lt;span class=\"input_clear\" data-tn-action-click=\"\" data-tn-element=\"what-query-clear\" id=\"query_clear\"&gt;\u00d7&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div class=\"input_container\" id=\"location_input_container\"&gt;&lt;input autocomplete=\"off\" class=\"location instant\" disabled=\"disabled\" id=\"location_instant\" onfocus=\"document.getElementById('location').focus()\" type=\"text\"/&gt;&lt;input class=\"location input\" id=\"location\" name=\"l\" placeholder=\"city, state, or zip\" type=\"text\" value=\"Seattle, WA\"/&gt;&lt;span class=\"input_clear\" data-tn-action-click=\"\" data-tn-element=\"where-query-clear\" id=\"location_clear\"&gt;\u00d7&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div id=\"hidden_inputs\"&gt;&lt;/div&gt;&lt;button class=\"input_submit\" data-tn-element=\"find-resumes-button\" data-tn-link=\"\" id=\"submit\" type=\"submit\"&gt;&lt;span class=\"input-submit-text\"&gt;Find Resumes&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td id=\"query_ac_td\"&gt;&lt;div id=\"query_ac_container\"&gt;&lt;/div&gt;&lt;div id=\"query_required_prompt\"&gt;&lt;/div&gt;&lt;/td&gt;&lt;td id=\"location_ac_td\"&gt;&lt;div id=\"location_ac_container\"&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan=\"2\"&gt;&lt;fieldset class=\"search-checkbox-group\"&gt;&lt;label&gt;Limit search to: &lt;/label&gt;&lt;label class=\"search-checkbox\"&gt;&lt;input checked=\"\" class=\"search-checkbox\" data-tn-link=\"\" name=\"cb\" type=\"checkbox\" value=\"jt\"/&gt;Job Titles&lt;/label&gt;&lt;label class=\"search-checkbox\"&gt;&lt;input class=\"search-checkbox\" data-tn-link=\"\" name=\"cb\" type=\"checkbox\" value=\"skills\"/&gt;Skills&lt;/label&gt;&lt;label class=\"search-checkbox\"&gt;&lt;input class=\"search-checkbox\" data-tn-link=\"\" name=\"cb\" type=\"checkbox\" value=\"company\"/&gt;Companies&lt;/label&gt;&lt;label class=\"search-checkbox\"&gt;&lt;input class=\"search-checkbox\" data-tn-link=\"\" name=\"cb\" type=\"checkbox\" value=\"fos\"/&gt;Field of Study&lt;/label&gt;&lt;/fieldset&gt;&lt;/td&gt;&lt;td id=\"advanced_container\"&gt;&lt;a class=\"sl\" data-tn-element=\"advanced-search\" data-tn-link=\"\" href=\"/resumes/advanced?co=US\" id=\"advanced_search\"&gt;Advanced Search&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;div id=\"result_count\"&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/form&gt;&lt;/div&gt;&lt;div id=\"result_content\"&gt;&lt;div id=\"banner_loc\"&gt;&lt;/div&gt;&lt;div class=\"message-banner-info\" data-tn-section=\"banner-privacy\"&gt;&lt;table&gt;&lt;tr&gt;&lt;td align=\"left\" width=\"30\"&gt;&lt;img height=\"22\" src=\"/resumes/static/images/info.gif\" width=\"22\"/&gt;&lt;/td&gt;&lt;td&gt;&lt;p style=\"font-weight:bold;font-size:14px\"&gt;To help ensure jobseeker privacy, some information has been hidden.&lt;/p&gt;To see full resume details, log in to your Indeed account or create an account for free.&lt;div style=\"margin-top:5px\"&gt;&lt;a data-tn-element=\"banner-log-in\" data-tn-link=\"redirect\" href=\"/resumes/account/login?dest=%2Fresumes\" id=\"signInFromBanner\" rel=\"nofollow\"&gt;Sign in&lt;/a&gt;   &lt;a data-tn-element=\"banner-sign-in\" data-tn-link=\"redirect\" href=\"/resumes/account/register?dest=%2Fresumes\" id=\"registerFromBanner\" rel=\"nofollow\"&gt;Create an account&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div id=\"results_header\"&gt;&lt;/div&gt;&lt;ol class=\"resultsList\" data-tn-section=\"resume-search-results\" id=\"results\"&gt;&lt;/ol&gt;&lt;/div&gt;&lt;div data-tn-section=\"content-footer\" id=\"content_footer\"&gt;&lt;div class=\"promo index\" id=\"tagline\"&gt;Fast, simple resume search.&lt;/div&gt;&lt;div id=\"index-page-footer\"&gt;&lt;div class=\"recent-searches-footer\" data-tn-component=\"recent-searches-footer\" id=\"recent-searches-footer\"&gt;&lt;/div&gt;&lt;div data-tn-component=\"rec-resumes-footer\" id=\"rec-resumes-footer\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;p class=\"promo index\"&gt;&lt;a data-tn-element=\"post-a-job\" data-tn-link=\"\" href=\"https://ads.indeed.com/?hl=en&amp;amp;co=US\" onclick=\"if (!this.href.match('&amp;amp;isid=rezsearch&amp;amp;ikw=')) this.href += '&amp;amp;isid=rezsearch&amp;amp;ikw=rezhp';\" rel=\"nofollow\"&gt;Post a Job&lt;/a&gt;&lt;span class=\"delimiter\"&gt;-&lt;/span&gt;Reach 250 million job seekers*&lt;/p&gt;&lt;div id=\"langPicker\"&gt;Indeed also offered in: &lt;a href=\"https://www.indeed.com/resumes?hl=es\" rel=\"nofollow\"&gt;espa\u00f1ol&lt;/a&gt;&lt;/div&gt;&lt;div class=\"index\" data-tn-section=\"footer\" id=\"footer\"&gt;&lt;p class=\"footer_nav\" data-tn-component=\"countries\" id=\"footer_nav_sec\"&gt;Find resumes in: &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=AR\" rel=\"nofollow\"&gt;Argentina&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=AU\" rel=\"nofollow\"&gt;Australia&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=BE\" rel=\"nofollow\"&gt;Belgi\u00eb&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=BR\" rel=\"nofollow\"&gt;Brasil&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=CA\" rel=\"nofollow\"&gt;Canada&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=CO\" rel=\"nofollow\"&gt;Colombia&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=ES\" rel=\"nofollow\"&gt;Espa\u00f1a&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=FR\" rel=\"nofollow\"&gt;France&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=IN\" rel=\"nofollow\"&gt;India&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=IE\" rel=\"nofollow\"&gt;Ireland&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=IT\" rel=\"nofollow\"&gt;Italia&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=MX\" rel=\"nofollow\"&gt;M\u00e9xico&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=NL\" rel=\"nofollow\"&gt;Nederland&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=NZ\" rel=\"nofollow\"&gt;New Zealand&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=SG\" rel=\"nofollow\"&gt;Singapore&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=ZA\" rel=\"nofollow\"&gt;South Africa&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=AE\" rel=\"nofollow\"&gt;United Arab Emirates&lt;/a&gt; - &lt;a data-tn-element=\"country[]\" data-tn-link=\"\" href=\"/resumes?co=GB\" rel=\"nofollow\"&gt;United Kingdom&lt;/a&gt; - &lt;span class=\"bold\"&gt;United States&lt;/span&gt;&lt;/p&gt;&lt;p class=\"footer_nav\" data-tn-component=\"footer-nav\" id=\"footer_nav\"&gt;&lt;a data-tn-element=\"feedback\" data-tn-link=\"redirect\" href=\"//go.indeed.com/resumefeedback\" rel=\"nofollow\" target=\"_blank\"&gt;Feedback&lt;/a&gt; - &lt;a data-tn-element=\"about\" data-tn-link=\"redirect\" href=\"https://www.indeed.com/intl/en/about.html\"&gt;About&lt;/a&gt; - &lt;a data-tn-element=\"contact\" data-tn-link=\"\" href=\"https://ads.indeed.com/contact_indeed?hl=en&amp;amp;cc=US\"&gt;Contact&lt;/a&gt;&lt;/p&gt;&lt;p data-tn-component=\"index-footer-promo\" id=\"footer_promo\"&gt;Job Seekers: &lt;a data-tn-element=\"footer-promo\" data-tn-link=\"redirect\" href=\"https://www.indeed.com/promo/resume\" id=\"hp_resume_promo\"&gt;Post your resume&lt;/a&gt; - it only takes a few seconds&lt;/p&gt;&lt;p id=\"copyright\"&gt;&lt;div class=\"legal-footer\"&gt;\u00a92019 Indeed - &lt;a href=\"http://www.indeed.com/legal?hl=en\"&gt;Cookies, Privacy and Terms&lt;/a&gt;&lt;/div&gt;&lt;/p&gt;&lt;div id=\"cookieNoticeContainer\" style=\"display:none;\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;span id=\"footer_citation\"&gt;*Google Analytics, Unique Visitors, September 2016&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=\"sidebar\"&gt;&lt;div data-tn-section=\"sidebar\" id=\"lhs\"&gt;&lt;div id=\"refinements\"&gt;&lt;h1 id=\"search_title\"&gt;&lt;/h1&gt;&lt;p class=\"refine_title\"&gt;Last Updated&lt;/p&gt;&lt;form action=\"?co=US\" data-tn-element=\"last-updated\" id=\"lmd_form\" method=\"get\"&gt;&lt;input data-tn-link=\"\" name=\"co\" type=\"hidden\" value=\"US\"/&gt;&lt;select id=\"lmd_selector\" name=\"lmd\"&gt;&lt;option value=\"day\"&gt;within last day&lt;/option&gt;&lt;option value=\"week\"&gt;within last week&lt;/option&gt;&lt;option value=\"month\"&gt;within last month&lt;/option&gt;&lt;option selected=\"selected\" value=\"all\"&gt;show all resumes&lt;/option&gt;&lt;/select&gt;&lt;noscript&gt;&lt;input id=\"r_up\" type=\"submit\" value=\"Go\"/&gt;&lt;/noscript&gt;&lt;/form&gt;&lt;div data-tn-componenet=\"recent-searches\" id=\"recent-searches\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=\"right-sidebar\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;script src=\"/resumes/s/c02049b/en_US.js\" type=\"text/javascript\"&gt;&lt;/script&gt;&lt;script src=\"/resumes/s/bfb11e0/serp-compiled.js\" type=\"text/javascript\"&gt;&lt;/script&gt;&lt;!-- Start of DoubleClick Floodlight Tag: Please do not remove Activity name of this tag: Resume Search (Desktop) URL of the webpage where the tag is expected to be placed: https://www.indeed.com/resumes This tag must be placed between the &lt;body&gt; and &lt;/body&gt; tags, as close as possible to the opening tag. Creation Date: 06/06/2017 --&gt;&lt;script type=\"text/javascript\"&gt;var axel = Math.random() + \"\"; var a = axel * 10000000000000; document.write('&lt;iframe src=\"https://6927552.fls.doubleclick.net/activityi;src=6927552;type=dradi0;cat=resum0;u1=;u2=;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + a + '?\" width=\"1\" height=\"1\" frameborder=\"0\" style=\"display:none\"&gt;&lt;/iframe&gt;');&lt;/script&gt;&lt;noscript&gt;&lt;iframe frameborder=\"0\" height=\"1\" src=\"https://6927552.fls.doubleclick.net/activityi;src=6927552;type=dradi0;cat=resum0;u1=;u2=;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1?\" style=\"display:none\" width=\"1\"&gt;&lt;/iframe&gt;&lt;/noscript&gt;&lt;!-- End of DoubleClick Floodlight Tag: Please do not remove --&gt;&lt;script type=\"text/javascript\"&gt;var ijData = {site: {\"baseIndeedUrl\":\"https:\\u002F\\u002Fwww.indeed.com\", \"inspectletWebsiteId\":\"1728953977\", \"baseResumeUrl\":\"https:\\u002F\\u002Fwww.indeed.com\", \"changePasswordUrl\":\"https:\\u002F\\u002Fwww.indeed.com\\u002Fresumes\\u002Faccount\\u002Fchangeemail\", \"baseBillingUrl\":\"https:\\u002F\\u002Fbilling.indeed.com\", \"resumeSearchCrawlEnabled\":true, \"siftApiKey\":\"fb21e9c129\", \"crashTestModel\":{\"crashTestInjectablesCss\":[], \"crashTestInjectablesJs\":[]}, \"baseMyIndeedUrl\":\"https:\\u002F\\u002Fmy.indeed.com\", \"baseGoUrl\":\"https:\\u002F\\u002Fgo.indeed.com\", \"defaultRadius\":25, \"baseEmployersUrl\":\"https:\\u002F\\u002Femployers.indeed.com\", \"countryContext\":\"US\", \"resumeSearchEnabled\":true, \"baseAdsUrl\":\"https:\\u002F\\u002Fads.indeed.com\", \"baseCanonicalUrl\":\"https:\\u002F\\u002Fwww.indeed.com\", \"radiusUnit\":\"mi\", \"baseSecureUrl\":\"https:\\u002F\\u002Fsecure.indeed.com\", \"googleAnalyticsDomains\":[\"indeed.com\",\"indeed.com.au\",\"indeed.com.br\",\"indeed.ca\",\"indeed.ch\",\"indeed.cl\",\"indeed.com.co\",\"indeed.de\",\"indeed.es\",\"indeed.fr\",\"indeed.co.uk\",\"indeed.hk\",\"indeed.ie\",\"indeed.co.in\",\"indeed.jp\",\"indeed.com.mx\",\"indeed.nl\",\"indeed.com.sg\",\"indeed.co.za\",\"indeed.ae\",\"indeed.fi\",\"indeed.lu\",\"indeed.com.my\",\"indeed.com.pe\",\"indeed.com.ph\",\"indeed.com.pk\",\"indeed.pt\",\"indeed.co.ve\"], \"statistics\":{\"numberOfCountries\":\"60\", \"monthlyJobSearches\":\"3\", \"numberOfLanguages\":\"28\", \"monthlyUniqueVisitors\":\"250\"}}, session: {\"ecosystem\":{\"mindyAvailable\":true, \"employerServiceAvailable\":true, \"proctorAvailable\":true, \"acmeAvailable\":true, \"userServiceAvailable\":true, \"autocompleteAvailable\":true, \"narcissusAvailable\":true}, \"lastPage\":true, \"alertsAvailable\":false, \"alternateLanguages\":[{\"code\":\"en\", \"name\":\"English\"},{\"code\":\"es\", \"name\":\"espa\u00f1ol\"}], \"compiledCSSUrl\":\"\\u002Fresumes\\u002Fs\\u002Fb16dcef\\u002Fserp-compiled.css\", \"language\":\"en\", \"showDownloadPdf\":true, \"userAgent\":{\"app\":false, \"tablet\":false, \"androidApp\":false, \"phone\":false, \"smartPhone\":false, \"mobile\":false, \"geoLoc\":false, \"mobileApp\":false}, \"useCompiledCSS\":true, \"locale\":\"en_US\", \"useCompiledJavaScript\":true, \"autocompleteDisabled\":false, \"compiledJavaScriptUrl\":\"\\u002Fresumes\\u002Fs\\u002Fbfb11e0\\u002Fserp-compiled.js\", \"firstPage\":true, \"showShareByEmail\":true, \"trackingKey\":\"\", \"tk\":\"1dckrv1ce1daj000\", \"useVersionizedI18nLocale\":true, \"versionizedI18nLocaleUrl\":\"\\u002Fresumes\\u002Fs\\u002Fc02049b\\u002Fen_US.js\", \"compiledJanusCSSUrl\":\"\\u002Fresumesnull\", \"supportsPostalCodes\":true, \"currentPage\":1}, request: {\"logType\":\"rexIndexPage\", \"refineBy\":\"\", \"lastSearchLocation\":\"\", \"internalUrl\":\"\\u002Fresumes\", \"csrfParam\":\"indeedcsrftoken\", \"trackingParams\":{\"tkkey\": \"tk\", \"tkval\": \"1dckrv1ce1daj000\"}, \"radiusParams\":\"co=US\", \"sortParams\":\"co=US\", \"ie6\":false, \"lastModifiedDateParams\":\"co=US\", \"key\":\"7d7f26e0e34712f3994376f26822ee3804c719a7e2485290d1987ffe4924fce727e9bccd29f2f8fc\", \"timestamp\":0, \"currentUrl\":\"\\u002Fresumes\", \"externalUrl\":\"\\u002Fresumes\", \"paginationParams\":\"co=US\", \"turnstileUrl\":\"\\u002F\\u002Ft.indeed.com\\u002Fs\\u002Fb18c1fb\\u002Fturnstile-compiled.js\", \"canonicalUrl\":\"\\u002Fresumes\", \"queryString\":\"\", \"logTypeHash\":\"0329d6a20d4392f3e4aedce788f9a038\", \"undoRefinementsParams\":\"co=US\", \"csrfToken\":\"JAyBqutIu96OaLHKmJdHjY4k1h1tof3z\", \"removeJobKeyUrl\":\"\\u002Fresumes?rmjk=1\", \"paramList\":[{\"value\":\"US\", \"key\":\"co\"}], \"parameters\":{}}, viewer: {\"siftAccountKey\":\"1dckrv14p3cr4800\", \"vanityName\":\"\", \"resumePublicUrlDisplay\":\"\", \"masquerading\":false, \"outOfCountry\":false, \"groups\":{\"rexconfirmcontact\": 4, \"rexhidejobseekernametst\": 1, \"rex_serp_crash_tst\": 0, \"rexshareprivacyorforcesignintst\": 1, \"indcorpaddrtog\": 1, \"rexsearchbysectiontst\": 2, \"rexfacebookpixeltst\": 1, \"rezshowskillexptog\": 1, \"rexsimilarsearches2tst\": 0, \"rexssltst\": 1, \"jasxacmelinkheadertst\": 2, \"advw_homepagenoresume\": 1, \"rextopnavlinkedacctstog\": 1, \"rexnursingrefinementsmodalbuttontst\": 0, \"rexbottog\": 1, \"rexdownloadpdfredirecttst\": 0, \"recrezclickinputtst\": 1, \"rexsearchwaitingfeedbacktst\": 1, \"rex_view_resume_crash_tst\": 0, \"rexresumeforwardtog\": 0, \"rexstyletst\": 1, \"rexperfaudtst\": 1, \"gzip\": 1, \"rozrollout\": 2, \"rexnursingrefinementsmodaltst\": 1, \"rexpreviewheadertst\": 2, \"rexsiftsciencebeacontst\": 1}, \"hasDradisJob\":false, \"confirmed\":false, \"accountKey\":\"\", \"privileged\":false, \"geoLocation\":\"Seattle, WA\", \"jobseeker\":false, \"resumePublicUrl\":\"\", \"loggedIn\":false, \"searchEnabledCountries\":[{\"countryCode\":\"AR\", \"displayName\":\"Argentina\"},{\"countryCode\":\"AU\", \"displayName\":\"Australia\"},{\"countryCode\":\"BE\", \"displayName\":\"Belgi\u00eb\"},{\"countryCode\":\"BR\", \"displayName\":\"Brasil\"},{\"countryCode\":\"CA\", \"displayName\":\"Canada\"},{\"countryCode\":\"CO\", \"displayName\":\"Colombia\"},{\"countryCode\":\"ES\", \"displayName\":\"Espa\u00f1a\"},{\"countryCode\":\"FR\", \"displayName\":\"France\"},{\"countryCode\":\"IN\", \"displayName\":\"India\"},{\"countryCode\":\"IE\", \"displayName\":\"Ireland\"},{\"countryCode\":\"IT\", \"displayName\":\"Italia\"},{\"countryCode\":\"MX\", \"displayName\":\"M\u00e9xico\"},{\"countryCode\":\"NL\", \"displayName\":\"Nederland\"},{\"countryCode\":\"NZ\", \"displayName\":\"New Zealand\"},{\"countryCode\":\"SG\", \"displayName\":\"Singapore\"},{\"countryCode\":\"ZA\", \"displayName\":\"South Africa\"},{\"countryCode\":\"AE\", \"displayName\":\"United Arab Emirates\"},{\"countryCode\":\"GB\", \"displayName\":\"United Kingdom\"},{\"countryCode\":\"US\", \"displayName\":\"United States\"}], \"obfuscatedId\":\"\", \"defaultLocation\":\"Seattle, WA\", \"email\":\"\"}, employer: {serpContactingEnabled: 'false'}, resultSet: {hashId: '-3142269110792043337', alertId: '', numPageResults: 0, query: '', location: '', enabledModal: 'NONE', enabledModalButton: 'NONE', enabledSidebarPromo: 'NONE', numResults: 0}, serpUI: {numResultsString: '0', rozStandPricing: '', rozProPricing: ''}}; var opts = {disableAutocomplete: false, disableSignin: false, html5History: true, instantCharacterThres: 6};opts.geoLoc = 'Seattle, WA';var s = new Serp(ijData, opts);&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n                                (function() {\n                                        window._pa = window._pa || {};\n                                        var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;\n                                        pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + \"//tag.perfectaudience.com/serve/511a70a55342880002000432.js\";\n                                        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);\n                                })();\n                        &lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n/* &lt;![CDATA[ */\nvar google_conversion_id = 1023315433;\nvar google_custom_params = window.google_tag_params;\nvar google_remarketing_only = true;\n/* ]]&gt; */\n&lt;/script&gt;\n&lt;script src=\"//www.googleadservices.com/pagead/conversion.js\" type=\"text/javascript\"&gt;\n&lt;/script&gt;\n&lt;noscript&gt;\n&lt;div style=\"display:inline;\"&gt;\n&lt;img alt=\"\" height=\"1\" src=\"//googleads.g.doubleclick.net/pagead/viewthroughconversion/1023315433/?value=0&amp;amp;guid=ON&amp;amp;script=0\" style=\"border-style:none;\" width=\"1\"/&gt;\n&lt;/div&gt;\n&lt;/noscript&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>Almost none of the contents is present in the html file. On the other hand when I download the page I do obtain the contents. What caused this phenomenon and how can I obtain the contents without downloading the page manually?</p>\n"}, {"tags": ["python", "numerical-integration"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 0, "creation_date": 1559780095, "post_id": 56469330, "comment_id": 99530287, "body": "Thanks for the answer, using the trapezoidal rule sounds quite tempting as I have always been struggling with the speed limitations of quad. However, I tried to implement it <code>x_values = np.linspace(0.1, 10000, 10000) [np.trapz(_gauss_log(x_values, x0, mu, sigma, mu_log, sigma_log)) for x0 in x]</code>. This however did not work at all, is my implementation wrong?"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 0, "creation_date": 1559780494, "post_id": 56469330, "comment_id": 99530336, "body": "Did you fix your integral transformation to :&quot;INT_0^1 F(x, s/(1-s))/(1-s)^2 ds&quot;, as noted above? in particular _gauss_log implementation is incorrect, as you have written it in your question."}, {"owner": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 0, "creation_date": 1559782331, "post_id": 56469330, "comment_id": 99530590, "body": "I updated the question so that it reflects your answer, as you can see the change of variables has helped the problem, but did not solve it. I have not yet found time to understand why the version where I compute the integral using np.trapz as mentioned in my last comment does not work."}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 1, "creation_date": 1559782345, "post_id": 56469330, "comment_id": 99530594, "body": "When using np.trapz, if you are going to apply it to _gauss_log, you need to specify either the grid x or the grid spacing dx, since the default is to use dx =1 which is too coarse for integration in [0,1] (basically, just two points in your grid!) <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.trapz.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/numpy.trapz.htm&zwnj;&#8203;l</a>."}, {"owner": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 0, "creation_date": 1559782649, "post_id": 56469330, "comment_id": 99530643, "body": "Oh yes of course! However, when I put : <code>def gauss_log(x,  mu, sigma, mu_log, sigma_log):     x_values = np.linspace(0.001, 1, 10000)     return  [np.trapz(_gauss_log(x_values, x0, mu, sigma, mu_log, sigma_log), dx=x_values[1]-x_values[0]) for x0 in x]</code> it still returns an array of nans (assuming the x from the question above...)"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 1, "creation_date": 1559783151, "post_id": 56469330, "comment_id": 99530731, "body": "For which values does it return nan? Since the trapezoidal rule is basically just addition and subtraction, i would imagine the problem lies with the evaluation of _gauss_log  at those points (division by 0 and such). Try testing for this. I would just work with the untransformed integral by truncating the integral at [-a,a] and applying trapezoidal rule there."}, {"owner": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "edited": false, "score": 0, "creation_date": 1559783508, "post_id": 56469330, "comment_id": 99530789, "body": "super cool, yes now I found my bug. Using the trapz works perfectly now, thanks!"}], "tags": [], "owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "is_accepted": true, "score": 1, "last_activity_date": 1559779009, "last_edit_date": 1559779009, "creation_date": 1559777924, "answer_id": 56469330, "question_id": 56468843, "link": "https://stackoverflow.com/questions/56468843/numerically-computing-convolution-when-one-function-is-zero-over-large-part-of-d/56469330#56469330", "title": "numerically computing convolution when one function is zero over large part of domain", "body": "<p>Your statement:\n<code>PDF(x) = INT_0^inf F(x,t)dt = INT_0^1 F(x, s) (1+s)^2 ds</code>\nis not quite right, since you need to substitute t as a function of s inside F(x,t). Note that </p>\n\n<p><code>t = 1/(1-s) - 1 = s/(1-s)</code> therefore</p>\n\n<pre><code>dt = 1/(1-s)^2 ds\n</code></pre>\n\n<p>and so your transformed integral should be</p>\n\n<p><code>INT_0^1 F(x, s/(1-s))/(1-s)^2 ds</code></p>\n\n<p>The quad function is quite powerful, but since it basically tries a bunch of different numerical integration techniques it can lack transparency. What if you use the trapezoidal rule to compute the integral from -a to a of lognormal(x-t)gauss(t) by dividing [-a,a] into a uniform grid of N points? Since the gaussian distribution decays superexponentially  You have a lot of control over the error caused by restricting the interval to [-a,a], and similarly you can control how large you want N to be by looking at the error formula (scales quadratically, and you can bound the second derivative of the gaussian*lognormal).\n<a href=\"https://en.wikipedia.org/wiki/Trapezoidal_rule#Uniform_grid\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Trapezoidal_rule#Uniform_grid</a>\nThis is going to be handwavy, but the trapezoidal rule can have really nice behaviour on rapidly decaying functions, see <a href=\"https://www.ams.org/journals/mcom/1964-18-087/S0025-5718-1964-0185804-1/S0025-5718-1964-0185804-1.pdf\" rel=\"nofollow noreferrer\">https://www.ams.org/journals/mcom/1964-18-087/S0025-5718-1964-0185804-1/S0025-5718-1964-0185804-1.pdf</a> for example.</p>\n"}], "owner": {"reputation": 667, "user_id": 5528581, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f8f78f8de2dc3187866313ab952cfba3?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiano1991", "link": "https://stackoverflow.com/users/5528581/sebastiano1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 56469330, "answer_count": 1, "score": 0, "last_activity_date": 1559782798, "creation_date": 1559773648, "last_edit_date": 1559782798, "question_id": 56468843, "link": "https://stackoverflow.com/questions/56468843/numerically-computing-convolution-when-one-function-is-zero-over-large-part-of-d", "title": "numerically computing convolution when one function is zero over large part of domain", "body": "<p>I am trying to compute the Probability Density Function of a Gaussian convoluted with a LogNormal. The width of the Gaussian is very small compared to the width of the LogNormal, thus the Gaussian is ~0 for much of the integration domain (0, np.inf).</p>\n\n<pre><code>from scipy.integrate import quad\nimport numpy as np\ndef _gaussian(x, mu, sigma):\n    return 1/np.sqrt(2*np.pi*sigma**2)*np.exp(-1*(x - mu)**2/(2*sigma**2))\ndef _lognormal(x, mu_log, sigma_log):\n    return 1/(x*sigma_log)*1/np.sqrt(2*np.pi)*np.exp(-1*(np.log(x) - mu_log)**2/(2*sigma_log**2)  )\ndef _gauss_log(t, x0, mu, sigma, mu_log, sigma_log):\n    return  _lognormal(t, mu_log, sigma_log) * _gaussian(x0-t, mu, sigma)\n\ndef gauss_log(x,  mu, sigma, mu_log, sigma_log):\n        return  [quad(_gauss_log, 0, np.inf, args=(x0, mu, sigma, mu_log, sigma_log))[0] for x0 in x]\n\nx = [ 0.06898463,  0.12137053,  0.21353749,  0.37569469,  0.66099163,\n        1.16293883,  2.04605725,  3.59980263,  6.33343911, 11.14295839,\n       19.60475495]\ny = [0.00000000e+00, 8.31638354e-02, 1.65440428e-01, 4.02998983e-01,\n        5.42100908e-01, 4.16612321e-01, 1.72662493e-01, 5.60788435e-02,\n        1.43433519e-02, 5.43498669e-03, 2.57428324e-04]\nx00 = np.linspace(0.01, 20, 100)\n\nplt.loglog(x, y, 'o')\nplt.ylim([0.0001, 10])\nplt.plot(x00, gauss_log(x00, 0, 0.05, 0.1, 0.9))\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aSzr3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aSzr3.png\" alt=\"Proper Convolution Integral\"></a></p>\n\n<p>As you can see the integral jumps from a properly computed value to ~0 for some parts where the Gaussian(x) ~ 0. Reading this: <a href=\"https://stackoverflow.com/questions/24003694/discontinuity-in-results-when-using-scipy-integrate-quad\">Discontinuity in results when using scipy.integrate.quad</a> my thought was that I help the numerical integration by mapping the integration domain from (0, 1) instead of (0, inf) by changing the variable <code>t</code>. </p>\n\n<p>------ <strong>EDIT: The original problem was caused by a mistake in my math.</strong> -----</p>\n\n<p>The convolution integral therefore has to be changed to:\n<code>\nPDF(x) = INT_0^inf F(x,t)dt = INT_0^1 F(x, s/(1-s)) /(1-s)^2 ds\n</code>\nwhere <code>F(x,t)</code> is the convolution integrand, c.f @Juan Carlos Ramirez answer.</p>\n\n<p>The function <code>_gauss_log</code> becomes:</p>\n\n<pre><code>def _gauss_log(t, x0, mu, sigma, mu_log, sigma_log):\n    return  _lognormal(s/(s-1), mu_log, sigma_log) * _gaussian(x0 - s/(s-1), mu, sigma)/(1-s)**2\n</code></pre>\n\n<p>This fix improves the situation (see picture below: top image not-transformed boundaries, bottom image with transformation), however, the integration still is not satisfactory. How can I solve this issue?</p>\n\n<p><a href=\"https://i.stack.imgur.com/irTAU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/irTAU.png\" alt=\"transformed integration boundaries vs. open integral\"></a></p>\n"}, {"tags": ["python", "amazon-web-services", "swagger", "aws-api-gateway", "boto3"], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 462075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79514699f0d0c047453a8b34736fb8eb?s=128&d=identicon&r=PG", "display_name": "Jmoney38", "link": "https://stackoverflow.com/users/462075/jmoney38"}, "is_accepted": false, "score": 0, "last_activity_date": 1567529077, "creation_date": 1567529077, "answer_id": 57775798, "question_id": 56468838, "link": "https://stackoverflow.com/questions/56468838/boto3-ignores-the-basepath-parameter-when-i-try-to-import-or-update-a-swagger-de/57775798#57775798", "title": "boto3 ignores the basePath parameter when I try to import or update a swagger description to api gateway", "body": "<p>The URL parameter may be case sensitive. Please try \"basepath\" as documented <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-import-api-basePath.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 126, "user_id": 5692463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2LP5F.jpg?s=128&g=1", "display_name": "Hernan C. Vazquez", "link": "https://stackoverflow.com/users/5692463/hernan-c-vazquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567529077, "creation_date": 1559773603, "question_id": 56468838, "link": "https://stackoverflow.com/questions/56468838/boto3-ignores-the-basepath-parameter-when-i-try-to-import-or-update-a-swagger-de", "title": "boto3 ignores the basePath parameter when I try to import or update a swagger description to api gateway", "body": "<p>I need to import and then update rest-apis via swagger 2.0 definition in aws api-gateway using boto3 (version 1.9.139) in a python 3.7 script. The problem is that api-gateway ignores the base path parameter.</p>\n\n<p>I understand that it is the \"default\" behavior (from boto3 docs, basePath=ignore). Then regarding the documentation, I need to set basePath=prepend.</p>\n\n<p>My code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\napiClient = boto3.client('apigateway', awsregion)\napi_response = apiClient.put_rest_api(\n    restApiId= api_id,\n    mode='overwrite',\n    failOnWarnings=True,\n    parameters={\n        'basePath': 'prepend',\n        'endpointConfigurationTypes': 'REGIONAL'\n    },\n    body=open('swagger-def.yaml', 'rb').read()\n)\n</code></pre>\n\n<p>My basePath in swagger-def.yaml:</p>\n\n<pre><code>basePath: /dev/v1\n</code></pre>\n\n<p>The api_response is ok, there are no warnings or errors. The api-gateway is updated succefully, but the basePath is ignored.</p>\n\n<p>Any ideas are appreciated.</p>\n"}, {"tags": ["python", "kivy", "openstreetmap"], "comments": [{"owner": {"reputation": 1001, "user_id": 8864220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ceb09abc594623aa31ac02b014f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8864220/erik"}, "edited": false, "score": 0, "creation_date": 1559835169, "post_id": 56468821, "comment_id": 99552031, "body": "I&#39;ve been using a MapView for a project for the past couple months. Has been working great. All of a sudden it&#39;s no longer working and I&#39;ve been getting this error too."}, {"owner": {"reputation": 1001, "user_id": 8864220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ceb09abc594623aa31ac02b014f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8864220/erik"}, "edited": false, "score": 0, "creation_date": 1559835481, "post_id": 56468821, "comment_id": 99552203, "body": "is this the first time you&#39;ve tried to use a MapView? If that&#39;s the case, perhaps there is something wrong with OpenStreetMap rather than on our end."}, {"owner": {"reputation": 17760, "user_id": 1340631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=128&d=identicon&r=PG", "display_name": "scai", "link": "https://stackoverflow.com/users/1340631/scai"}, "edited": false, "score": 0, "creation_date": 1560241843, "post_id": 56468821, "comment_id": 99660830, "body": "Wrong or no user-agent set? Please see <a href=\"https://operations.osmfoundation.org/policies/tiles/\" rel=\"nofollow noreferrer\">OSM&#39;s tile usage policy</a>."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11205546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0e2b2f01c3251fdfb9250ecaa573076?s=128&d=identicon&r=PG&f=1", "display_name": "Jeferson Vin&#237;cius", "link": "https://stackoverflow.com/users/11205546/jeferson-vin%c3%adcius"}, "is_accepted": false, "score": 0, "last_activity_date": 1561517215, "creation_date": 1561517215, "answer_id": 56764486, "question_id": 56468821, "link": "https://stackoverflow.com/questions/56468821/kivy-im-trying-to-use-mapview-and-i-get-the-following-error-downloader-error/56764486#56764486", "title": "Kivy: I&#39;m trying to use MapView and I get the following error: &quot;Downloader error: HTTPError(&#39;403 Client Error: Forbidden for url:...)&quot;", "body": "<p>I was able to solve this problem uninstalling mapview module with <code>garden uninstall mapview</code> and ago installed again: <code>garden install mapview</code>.\nIf your target platform is android try clear cache: <code>buildozer android clean</code> and ago rebuild your APK.</p>\n"}], "owner": {"reputation": 31, "user_id": 11304536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4decc05d3522961ba9f9339414756c?s=128&d=identicon&r=PG&f=1", "display_name": "AlinaC", "link": "https://stackoverflow.com/users/11304536/alinac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561517215, "creation_date": 1559773428, "last_edit_date": 1559849341, "question_id": 56468821, "link": "https://stackoverflow.com/questions/56468821/kivy-im-trying-to-use-mapview-and-i-get-the-following-error-downloader-error", "title": "Kivy: I&#39;m trying to use MapView and I get the following error: &quot;Downloader error: HTTPError(&#39;403 Client Error: Forbidden for url:...)&quot;", "body": "<p>I'm trying to integrate MapView in a python-kivy application.</p>\n\n<p>Just for test I run the following code:</p>\n\n<pre><code>from kivy.garden.mapview import MapView\nfrom kivy.app import App\n\nclass MapViewApp(App):\n    def build(self):\n        mapview = MapView(zoom=11, lat=50.6394, lon=3.057)\n        return mapview\n\nMapViewApp().run()\n</code></pre>\n\n<p>But I receive the error: <code>Downloader error: HTTPError('403 Client Error: Forbidden for url: http://b.tile.openstreetmap.org/11/1039/687.png',)</code></p>\n\n<p>I really cannot find why this doesn't work.</p>\n\n<p>If anyone can help me I'll be extremely thankful. </p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559773694, "post_id": 56468817, "comment_id": 99529109, "body": "Can you share the entire traceback? you error is not related but I&#39;m curious. Actually it may be related, but you also have other buggy-stuff."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 2, "creation_date": 1559773750, "post_id": 56468817, "comment_id": 99529129, "body": "That code does not produce that error.  Does your actual code perhaps say <code>requests.open</code> somewhere?"}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "is_accepted": false, "score": 0, "last_activity_date": 1559773776, "creation_date": 1559773776, "answer_id": 56468858, "question_id": 56468817, "link": "https://stackoverflow.com/questions/56468817/attributeerror-module-requests-has-no-attribute-open/56468858#56468858", "title": "AttributeError: module &#39;requests&#39; has no attribute &#39;open&#39;", "body": "<p>The built-in Python function <a href=\"https://docs.python.org/3/library/functions.html#open\" rel=\"nofollow noreferrer\">open</a>\nreturns a file object, while the <code>data</code> parameter in requests.post is expecting a dictionary, or at least something other than a file object. The endpoint will be expecting a JSON-encoded object, but I don't think the error you'd see for sending text would show up as a Python AttributeError.<br>\nYou could try something like <code>data=data.read()</code> and see if that resolves your issue.</p>\n\n<p>...but that's not related to the error you mention, so I might be missing some information. </p>\n"}, {"tags": [], "owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "is_accepted": false, "score": -1, "last_activity_date": 1559773923, "creation_date": 1559773923, "answer_id": 56468887, "question_id": 56468817, "link": "https://stackoverflow.com/questions/56468817/attributeerror-module-requests-has-no-attribute-open/56468887#56468887", "title": "AttributeError: module &#39;requests&#39; has no attribute &#39;open&#39;", "body": "<pre><code>import requests\nimport json\n\nheaders = {\n    'Content-Type': 'application/json',\n}\n\nparams = (\n    ('key', 'mykeyhere'),\n)\n\nwith open('request.json') as file:\n    data = json.load(file) # Now you have proper json instead of an io object \n\nresponse = requests.post('https://www.googleapis.com/qpxExpress/v1/trips/search', headers=headers, params=params, data=data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 805869, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f78d7b4b27f8e0c29cdc59a8e059259f?s=128&d=identicon&r=PG", "display_name": "IT-Fan", "link": "https://stackoverflow.com/users/805869/it-fan"}, "is_accepted": false, "score": 0, "last_activity_date": 1561248696, "creation_date": 1561248696, "answer_id": 56720065, "question_id": 56468817, "link": "https://stackoverflow.com/questions/56468817/attributeerror-module-requests-has-no-attribute-open/56720065#56720065", "title": "AttributeError: module &#39;requests&#39; has no attribute &#39;open&#39;", "body": "<p>I got error because I  named the file requests.py. After changing the filename, there is no more error.</p>\n"}], "owner": {"reputation": 313, "user_id": 805869, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f78d7b4b27f8e0c29cdc59a8e059259f?s=128&d=identicon&r=PG", "display_name": "IT-Fan", "link": "https://stackoverflow.com/users/805869/it-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1561248696, "creation_date": 1559773399, "question_id": 56468817, "link": "https://stackoverflow.com/questions/56468817/attributeerror-module-requests-has-no-attribute-open", "title": "AttributeError: module &#39;requests&#39; has no attribute &#39;open&#39;", "body": "<p>I got this error </p>\n\n<blockquote>\n  <p>AttributeError: module 'requests' has no attribute 'open'</p>\n</blockquote>\n\n<p>when tried running the script below :</p>\n\n<pre><code>import requests\n\nheaders = {\n    'Content-Type': 'application/json',\n}\n\nparams = (\n    ('key', 'mykeyhere'),\n)\n\ndata = open('request.json')\nresponse = requests.post('https://www.googleapis.com/qpxExpress/v1/trips/search', headers=headers, params=params, data=data)\n</code></pre>\n\n<p>Am I missing something ?</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 11580689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad5e074974fe9db51b1437b42b7a443?s=128&d=identicon&r=PG&f=1", "display_name": "foxpal", "link": "https://stackoverflow.com/users/11580689/foxpal"}, "is_accepted": false, "score": 1, "last_activity_date": 1559773663, "creation_date": 1559773663, "answer_id": 56468844, "question_id": 56468810, "link": "https://stackoverflow.com/questions/56468810/how-to-approximate-the-roots-of-a-discrete-numpy-array/56468844#56468844", "title": "How to approximate the root(s) of a discrete numpy array?", "body": "<p>The simplest method - you could <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html\" rel=\"nofollow noreferrer\">interpolate</a> your data in x and y to make it \"more\" continuous. Then see where the minimum between 0 and y occurs.</p>\n"}], "owner": {"reputation": 47, "user_id": 11584457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad6531f96bfa28ac8190d2484e443a9?s=128&d=identicon&r=PG&f=1", "display_name": "mneedham", "link": "https://stackoverflow.com/users/11584457/mneedham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1559773761, "answer_count": 1, "score": 1, "last_activity_date": 1559773663, "creation_date": 1559773361, "question_id": 56468810, "link": "https://stackoverflow.com/questions/56468810/how-to-approximate-the-roots-of-a-discrete-numpy-array", "closed_reason": "Duplicate", "title": "How to approximate the root(s) of a discrete numpy array?", "body": "<p>I'm trying to find the point where my data passes through some critical value (e.g. passes through zero), and I want to numerically approximate where that critical value occurs. I can do it 'by hand' for one case but need to generalize so that I can quickly repeat the process a few dozen times across all of my data.</p>\n\n<p>I've thought about using <code>scipy.optimize</code> but I'm using real discrete data that doesn't follow an analytic function that I can use to call <code>fsolve</code>.</p>\n\n<p>Here's some code and a pyplot image showing what I mean. If this were my data, I would want to estimate where the red circle occurs, knowing that it will not occur directly on top of my discrete points.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = np.arange(0, 2,.2)\nf = 3-x**2-x\n\nplt.scatter(x,f,marker='v')\nplt.plot(x,f)\nplt.hlines(0,0,2)\nplt.scatter(1.3,0,color='r',zorder=10)\n</code></pre>\n\n<p><a href=\"https://i.imgur.com/lbIjzpj.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/lbIjzpj.png</a></p>\n"}, {"tags": ["python", "json"], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 5327161, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-IxjuDTVEuws/AAAAAAAAAAI/AAAAAAAACeo/OtRCDRMxzEE/photo.jpg?sz=128", "display_name": "Vineet Patel", "link": "https://stackoverflow.com/users/5327161/vineet-patel"}, "edited": false, "score": 0, "creation_date": 1559780508, "post_id": 56469266, "comment_id": 99530339, "body": "I am trying to get the values in the json file to be attributes in the order object. The python active resource API makes an http request and then uses the json from the response to create the active resource object with the attributes coming from the json in the response. I am trying to emulate that."}, {"owner": {"reputation": 139, "user_id": 3988681, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003381103576/picture?type=large", "display_name": "Piotr Kowalczyk", "link": "https://stackoverflow.com/users/3988681/piotr-kowalczyk"}, "reply_to_user": {"reputation": 335, "user_id": 5327161, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-IxjuDTVEuws/AAAAAAAAAAI/AAAAAAAACeo/OtRCDRMxzEE/photo.jpg?sz=128", "display_name": "Vineet Patel", "link": "https://stackoverflow.com/users/5327161/vineet-patel"}, "edited": false, "score": 1, "creation_date": 1559907989, "post_id": 56469266, "comment_id": 99576110, "body": "You wrote &quot;If am not mistaken x should be a dictionary, which is an appropriate parameter for the _update() function.&quot;.  It is true but not whole true. I has to be dictionary with specific data in it (to cooperate with REST serer). _update function is protected, so it not supposed to be used directly. This is probably the reason, why details of that function are not in documentation."}, {"owner": {"reputation": 335, "user_id": 5327161, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-IxjuDTVEuws/AAAAAAAAAAI/AAAAAAAACeo/OtRCDRMxzEE/photo.jpg?sz=128", "display_name": "Vineet Patel", "link": "https://stackoverflow.com/users/5327161/vineet-patel"}, "edited": false, "score": 0, "creation_date": 1559918277, "post_id": 56469266, "comment_id": 99581724, "body": "Yeah I understand. I ended up writing my own function to add attributes from json file. Thanks for your help!"}], "tags": [], "owner": {"reputation": 139, "user_id": 3988681, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003381103576/picture?type=large", "display_name": "Piotr Kowalczyk", "link": "https://stackoverflow.com/users/3988681/piotr-kowalczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1559777254, "creation_date": 1559777254, "answer_id": 56469266, "question_id": 56468796, "link": "https://stackoverflow.com/questions/56468796/creating-python-active-resource-object-from-json-file/56469266#56469266", "title": "Creating Python Active Resource object from json file", "body": "<p>It seems You are worried if x has correct format.  Print it, and check.</p>\n\n<p>Btw: And use </p>\n\n<pre><code>x = json.load(json_file)\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>x = json.loads(json_file.read())\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 5327161, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-IxjuDTVEuws/AAAAAAAAAAI/AAAAAAAACeo/OtRCDRMxzEE/photo.jpg?sz=128", "display_name": "Vineet Patel", "link": "https://stackoverflow.com/users/5327161/vineet-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559777254, "creation_date": 1559773272, "last_edit_date": 1559773579, "question_id": 56468796, "link": "https://stackoverflow.com/questions/56468796/creating-python-active-resource-object-from-json-file", "title": "Creating Python Active Resource object from json file", "body": "<p>So for testing purposes, I am trying to create a python ActiveResource object from a json file (I want the object to have attributes from the json file). More specifically I am using the ShopifyResource from (<a href=\"https://github.com/Shopify/shopify_python_api\" rel=\"nofollow noreferrer\">https://github.com/Shopify/shopify_python_api</a>), which extends the ActiveResource object. </p>\n\n<p>I looked through the source code and found some functions that I thought would be of some use: \n(<a href=\"https://github.com/Shopify/shopify_python_api/blob/master/shopify/base.py\" rel=\"nofollow noreferrer\">https://github.com/Shopify/shopify_python_api/blob/master/shopify/base.py</a>)</p>\n\n<pre><code>from pyactiveresource.activeresource import ActiveResource\nimport shopify.mixins as mixins\n\nclass ShopifyResource(ActiveResource, mixins.Countable):\n    _format = formats.JSONFormat\n\n    def _load_attributes_from_response(self, response):\n        if response.body.strip():\n            self._update(self.__class__.format.decode(response.body))\n</code></pre>\n\n<p>where _update is from ActiveResource (<a href=\"https://github.com/Shopify/pyactiveresource/blob/master/pyactiveresource/activeresource.py\" rel=\"nofollow noreferrer\">https://github.com/Shopify/pyactiveresource/blob/master/pyactiveresource/activeresource.py</a>)</p>\n\n<pre><code>    def _update(self, attributes):\n        \"\"\"Update the object with the given attributes.\n\n        Args:\n            attributes: A dictionary of attributes.\n        Returns:\n            None\n        \"\"\"\n        if not isinstance(attributes, dict):\n            return\n        for key, value in six.iteritems(attributes):\n            if isinstance(value, dict):\n                klass = self._find_class_for(key)\n                attr = klass(value)\n            elif isinstance(value, list):\n                klass = None\n                attr = []\n                for child in value:\n                    if isinstance(child, dict):\n                        if klass is None:\n                            klass = self._find_class_for_collection(key)\n                        attr.append(klass(child))\n                    else:\n                        attr.append(child)\n            else:\n                attr = value\n            # Store the actual value in the attributes dictionary\n            self.attributes[key] = attr\n</code></pre>\n\n<p>So then I tried to do the following: </p>\n\n<pre><code>order = Order()\nwith open(\"file.json\")) as json_file:\n    x = json.loads(json_file.read())\n    order._update(x)\n</code></pre>\n\n<p>Where Order extends ShopifyResource (which extends ActiveResource). If am not mistaken x should be a dictionary, which is an approriate parameter for the _update() function.</p>\n\n<p>Yet I get the following output: </p>\n\n<pre><code>raceback (most recent call last):\n  File \"/home/vineet/Documents/project/tests/test_sync.py\", line 137, in testSaveOrder1\n    self.getOrder()\n  File \"/home/vineet/Documents/project/tests/tests/test_sync.py\", line 113, in getOrder\n    order._update(x)\n  File \"/home/vineet/Documents/project/venv/lib/python3.6/site-packages/pyactiveresource/activeresource.py\", line 962, in _update\n    attr.append(klass(child))\n  File \"/home/vineet/Documents/project/venv/lib/python3.6/site-packages/shopify/base.py\", line 126, in __init__\n    prefix_options, attributes = self.__class__._split_options(attributes)\n  File \"/home/vineet/Documents/project/venv/lib/python3.6/site-packages/pyactiveresource/activeresource.py\", line 466, in _split_options\n    if key in cls._prefix_parameters():\n  File \"/home/vineet/Documents/project/venv/lib/python3.6/site-packages/pyactiveresource/activeresource.py\", line 720, in _prefix_parameters\n    for match in template.pattern.finditer(path):\nTypeError: cannot use a string pattern on a bytes-like object\n\n</code></pre>\n\n<p>I even tried the following: </p>\n\n<pre><code> order._update(order._format.decode(json_file.read()))\n</code></pre>\n\n<p>But that didn't work since 'str' object has no attribute 'decode'.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1559773329, "post_id": 56468788, "comment_id": 99529024, "body": "have you tried anything yet?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1559773631, "post_id": 56468788, "comment_id": 99529092, "body": "it is not clear to me exactly what you are trying to achieve. Can you give example input/output?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1559777097, "post_id": 56468788, "comment_id": 99529786, "body": "What&#39;s <code>p</code>?  A list of <code>Point</code> instances?  Be clear."}], "answers": [{"tags": [], "owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "is_accepted": true, "score": 1, "last_activity_date": 1559788783, "creation_date": 1559788783, "answer_id": 56470283, "question_id": 56468788, "link": "https://stackoverflow.com/questions/56468788/list-of-custom-class-converted-to-numpy-array/56470283#56470283", "title": "list of custom class converted to numpy array", "body": "<p>You can define the <code>__len__</code> and <code>__getitem__</code> method:</p>\n\n<pre><code>class Point:\n    def __init__(self, x,y,z):\n        self.x = x\n        self.y = y\n        self.z = z\n\n    def __len__(self):\n        return 3\n\n    def __getitem__(self, idx):\n        return (self.x, self.y, self.z)[idx]\n</code></pre>\n"}], "owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 56470283, "answer_count": 1, "score": 0, "last_activity_date": 1559788783, "creation_date": 1559773233, "last_edit_date": 1559781250, "question_id": 56468788, "link": "https://stackoverflow.com/questions/56468788/list-of-custom-class-converted-to-numpy-array", "title": "list of custom class converted to numpy array", "body": "<p>I have such a class</p>\n\n<pre><code>class Point:\n    def __init__(self, x,y,z):\n        self.x = x\n        self.y = y\n        self.z = z\n</code></pre>\n\n<p>where x,y,z are <code>float</code></p>\n\n<p>and I want to do this:</p>\n\n<pre><code>p = Point(0,0,0)\narr_p = np.array(p)\narr_pts = np.array([p])\n\n</code></pre>\n\n<p>what I expect:</p>\n\n<pre><code>&gt;&gt;&gt; arr_p\narray([0., 0., 0.])\n&gt;&gt;&gt; arr_pts\narray([[0., 0., 0.]])\n\n</code></pre>\n\n<p>and both have <code>dtype=np.float64</code></p>\n\n<p>How can I customize my class to achieve this? </p>\n\n<p>What I've tried:\nI saw some comments in numpy.array</p>\n\n<pre><code>        object : array_like\n            An array, any object exposing the array interface, an object whose\n            __array__ method returns an array, or any (nested) sequence.\n</code></pre>\n\n<p>so I simply added </p>\n\n<pre><code>    def __array__(self):\n        return [self.x, self.y, self.z]\n</code></pre>\n\n<p>But it doesn't work....I don't know what does it mean by <code>array</code>, is it C level thing that we need to manage the memory layout?</p>\n"}, {"tags": ["python", "docx", "python-docx"], "comments": [{"owner": {"reputation": 1728, "user_id": 4967694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bb32e6094783ec9fc40f63e24ef2b1?s=128&d=identicon&r=PG", "display_name": "djnz", "link": "https://stackoverflow.com/users/4967694/djnz"}, "edited": false, "score": 0, "creation_date": 1559774728, "post_id": 56468738, "comment_id": 99529349, "body": "I&#39;d suggest Page Break (<a href=\"https://python-docx.readthedocs.io/en/latest/dev/analysis/features/text/breaks.html\" rel=\"nofollow noreferrer\">docs</a>) may help"}, {"owner": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "edited": false, "score": 0, "creation_date": 1559776098, "post_id": 56468738, "comment_id": 99529600, "body": "No can do. Word decides that in the running application based on the current printing environment and doesn&#39;t write &quot;soft&quot; page-breaks to the file. The only way I know of that could be determined is using the Microsoft API on a running instance of Word."}], "owner": {"reputation": 1, "user_id": 8277599, "user_type": "registered", "profile_image": "https://graph.facebook.com/823588001142665/picture?type=large", "display_name": "KyRillos BoshRa", "link": "https://stackoverflow.com/users/8277599/kyrillos-boshra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559772836, "creation_date": 1559772836, "question_id": 56468738, "link": "https://stackoverflow.com/questions/56468738/python-docx-identify-page-endings", "title": "python-docx identify page endings", "body": "<p>I'm trying to detect page endings using python-docx but I can't figure out how to do it, I searched so solutions but they don't work, like finding  in the saved xml.\nbtw I'm using linux if this is gonna make any difference..</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 3, "creation_date": 1559773032, "post_id": 56468724, "comment_id": 99528941, "body": "You&#39;re not calling the <code>processEvent</code> function at that point, just passing a &quot;pointer&quot; to it to <code>Session</code>. The <code>Session</code> object presumably will call it, passing the appropriate parameters."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1559773215, "post_id": 56468724, "comment_id": 99528999, "body": "Note that this isn&#39;t &quot;functional programming&quot; in the technical sense of the words."}, {"owner": {"reputation": 1579, "user_id": 220675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b281794c649b75707774832b72ecff4?s=128&d=identicon&r=PG", "display_name": "arturro", "link": "https://stackoverflow.com/users/220675/arturro"}, "edited": false, "score": 0, "creation_date": 1559774132, "post_id": 56468724, "comment_id": 99529219, "body": "You are probably missing the fact that startAsync call will spawn additional thread in your app. This thread will be generating events and calling your processEvent function which you passed when creating Session. In this case your main thread will be looping on bEnd==false condition when at the same time in parallel the session object will be      generating events and calling your handling function. Read about multi threading apps and object oriented Observer pattern to understand it fully."}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 1, "last_activity_date": 1559774972, "last_edit_date": 1559774972, "creation_date": 1559773316, "answer_id": 56468803, "question_id": 56468724, "link": "https://stackoverflow.com/questions/56468724/attempting-to-understand-functional-arguments/56468803#56468803", "title": "Attempting to Understand Functional Arguments", "body": "<pre><code>session = blpapi.Session(sessionOptions, eventHandler.processEvent)\n</code></pre>\n\n<p>Note that <code>processEvent</code> here lacks parentheses <code>()</code> after it. This means you are passing the function itself as a parameter to the <code>Session</code> class. This class will later call <code>processEvent</code> with appropriate parameters.</p>\n\n<p><strong>Side Note:</strong></p>\n\n<blockquote>\n  <p>I'm still having trouble understanding functional programming</p>\n</blockquote>\n\n<p>\"Functional programming\" has a very specific definition and this example isn't it. If you are interested, you can google \"functional programming\" or read the Wikipedia article to find out more. However, this isn't really important at this stage in your learning process.</p>\n"}], "owner": {"reputation": 1747, "user_id": 2088886, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/4254f4feeee792a65ea10391f8a4e74f?s=128&d=identicon&r=PG", "display_name": "David Yang", "link": "https://stackoverflow.com/users/2088886/david-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56468803, "answer_count": 1, "score": 0, "last_activity_date": 1559774972, "creation_date": 1559772754, "question_id": 56468724, "link": "https://stackoverflow.com/questions/56468724/attempting-to-understand-functional-arguments", "title": "Attempting to Understand Functional Arguments", "body": "<p>I recognize this may be a very 101 type question, but I'm still having trouble understanding functional programming in general, and have a particular code snippet that I can't make sense of:</p>\n\n<p>Full code, but leaving out most of the function definitions:</p>\n\n<pre><code>import blpapi\nimport sys\n\nSESSION_STARTED         = blpapi.Name(\"SessionStarted\")\nSESSION_STARTUP_FAILURE = blpapi.Name(\"SessionStartupFailure\")\nSERVICE_OPENED          = blpapi.Name(\"ServiceOpened\")\nSERVICE_OPEN_FAILURE    = blpapi.Name(\"ServiceOpenFailure\")\nERROR_INFO              = blpapi.Name(\"ErrorInfo\")\nGET_FILLS_RESPONSE      = blpapi.Name(\"GetFillsResponse\")\n\nd_service=\"//blp/emsx.history\"\nd_host=\"localhost\"\nd_port=8194\nbEnd=False\n\nclass SessionEventHandler():\n\n    def processEvent(self, event, session):\n        try:\n            if event.eventType() == blpapi.Event.SESSION_STATUS:\n                self.processSessionStatusEvent(event,session)\n\n            elif event.eventType() == blpapi.Event.SERVICE_STATUS:\n                self.processServiceStatusEvent(event,session)\n\n            elif event.eventType() == blpapi.Event.RESPONSE:\n                self.processResponseEvent(event)\n\n            else:\n                self.processMiscEvents(event)\n\n        except:\n            print (\"Exception:  %s\" % sys.exc_info()[0])\n\n        return False\n\n\n    def processSessionStatusEvent(self,event,session):\n        print (\"Processing SESSION_STATUS event\")\n\n        for msg in event:\n            pass\n\n    def processServiceStatusEvent(self,event,session):\n        print (\"Processing SERVICE_STATUS event\")\n\n        for msg in event:\n            pass\n\n    def processResponseEvent(self, event):\n        print (\"Processing RESPONSE event\")\n\n        for msg in event:\n\n            global bEnd\n            bEnd = True\n\n    def processMiscEvents(self, event):\n\n        print (\"Processing \" + event.eventType() + \" event\")\n\n        for msg in event:\n\n            print (\"MESSAGE: %s\" % (msg.tostring()))\n\n\ndef main():\n\n    sessionOptions = blpapi.SessionOptions()\n    sessionOptions.setServerHost(d_host)\n    sessionOptions.setServerPort(d_port)\n\n    print (\"Connecting to %s:%d\" % (d_host,d_port))\n\n    eventHandler = SessionEventHandler()\n\n    session = blpapi.Session(sessionOptions, eventHandler.processEvent)\n\n    if not session.startAsync():\n        print (\"Failed to start session.\")\n        return\n\n    global bEnd\n    while bEnd==False:\n        pass\n\n    session.stop()\n</code></pre>\n\n<p>I can follow the code up to here:</p>\n\n<pre><code>session = blpapi.Session(sessionOptions, eventHandler.processEvent)\n</code></pre>\n\n<p>Here, I see I'm calling \"Session\" from the blpapi library, and passing it some options as well as my eventHandler.processEvent. Here is where I get lost. I look at that particular function, and see:</p>\n\n<pre><code>def processEvent(self, event, session):\n    try:\n        if event.eventType() == blpapi.Event.SESSION_STATUS:\n            self.processSessionStatusEvent(event,session)\n\n        elif event.eventType() == blpapi.Event.SERVICE_STATUS:\n            self.processServiceStatusEvent(event,session)\n\n        elif event.eventType() == blpapi.Event.RESPONSE:\n            self.processResponseEvent(event)\n\n        else:\n            self.processMiscEvents(event)\n\n    except:\n        print (\"Exception:  %s\" % sys.exc_info()[0])\n\n    return False\n</code></pre>\n\n<p>I see that the function is attempting to discern what type of event has been passed in, and will execute a different function within the class depending on that event type. The trouble is, I can't figure out where the event is ever specified! Where does \"event\" come from? I see it as an argument in that particular function, but no event argument was passed to:</p>\n\n<pre><code>session = blpapi.Session(sessionOptions, eventHandler.processEvent)\n</code></pre>\n\n<p>So how does it know what to do at this point? How did this \"event\" object magically appear?</p>\n\n<p>Thanks for entertaining my dumb questions</p>\n"}, {"tags": ["python", "virtualenv"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 11580689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad5e074974fe9db51b1437b42b7a443?s=128&d=identicon&r=PG&f=1", "display_name": "foxpal", "link": "https://stackoverflow.com/users/11580689/foxpal"}, "is_accepted": false, "score": -1, "last_activity_date": 1559772736, "creation_date": 1559772736, "answer_id": 56468719, "question_id": 56468695, "link": "https://stackoverflow.com/questions/56468695/how-to-package-python-into-virtualenv/56468719#56468719", "title": "How to package python into virtualenv?", "body": "<p>You might need to install python in some location you have the permissions to do so.</p>\n"}, {"tags": [], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "is_accepted": false, "score": 1, "last_activity_date": 1559774012, "creation_date": 1559774012, "answer_id": 56468896, "question_id": 56468695, "link": "https://stackoverflow.com/questions/56468695/how-to-package-python-into-virtualenv/56468896#56468896", "title": "How to package python into virtualenv?", "body": "<p>When setting up the <code>virtualenv</code> (this can also be done if it already set up) simply do: </p>\n\n<pre><code>python -m virtualenv -p python env\n</code></pre>\n\n<p>And Python will be added to the <code>virtualenv</code>, and will become the default python of it.</p>\n\n<p>The version of Python can also be passed, as <code>python</code> uses the first version found in the PATH. </p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 6543759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b607e9f979320306e16dc63043711c?s=128&d=identicon&r=PG&f=1", "display_name": "overflo", "link": "https://stackoverflow.com/users/6543759/overflo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559775507, "last_edit_date": 1559775507, "creation_date": 1559774811, "answer_id": 56468982, "question_id": 56468695, "link": "https://stackoverflow.com/questions/56468695/how-to-package-python-into-virtualenv/56468982#56468982", "title": "How to package python into virtualenv?", "body": "<p>You haven't specified the Operating System you are using.</p>\n\n<p>In case you're using Windows, you don't use virtualenv for this. Instead you:</p>\n\n<ol>\n<li>Download the <a href=\"https://www.python.org/ftp/python/3.7.3/python-3.7.3-embed-amd64.zip\" rel=\"nofollow noreferrer\">Python embeddable package</a></li>\n<li>Unpack it</li>\n<li>Uncomment <code>import site</code> in the <code>python37._pth</code> file (only if you want to add additional packages)</li>\n<li>Manually copy your additional packages (the ones you usually install with pip) to <code>Lib\\site-packages</code> (you need to create that directory first, of course)</li>\n</ol>\n\n<p>Such a python installation is configured in such a way that it can be moved and run from any location.</p>\n\n<p>You only have to ensure the Microsoft C Runtime is installed on the system (but it almost always already is). See the <a href=\"https://docs.python.org/3.7/using/windows.html#the-embeddable-package\" rel=\"nofollow noreferrer\">documentation note</a>:</p>\n\n<blockquote>\n  <p>Note The embedded distribution does not include the Microsoft C Runtime and it is the responsibility of the application installer to provide this. The runtime may have already been installed on a user\u2019s system previously or automatically via Windows Update, and can be detected by finding ucrtbase.dll in the system directory.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 17342, "user_id": 763269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0c27474bcff67974d6a9fcb43cb7ba4e?s=128&d=identicon&r=PG", "display_name": "Chris Johnson", "link": "https://stackoverflow.com/users/763269/chris-johnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1559779193, "creation_date": 1559779193, "answer_id": 56469455, "question_id": 56468695, "link": "https://stackoverflow.com/questions/56468695/how-to-package-python-into-virtualenv/56469455#56469455", "title": "How to package python into virtualenv?", "body": "<p><code>virtualenv</code> makes it convenient to use multiple python versions in different projects on the same machine, and isolate the <code>pip install</code> libraries installed by each project. It doesn\u2019t install or manage the overall python environment. Python must be installed on the machine before you can install or configure the <code>virtualenv</code> tool itself or switch into a virtual environment.</p>\n\n<p>Side note, consider using <code>virtualenvwrapper</code> \u2014 great helper for <code>virtualenv</code>. </p>\n"}], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1559779193, "creation_date": 1559772590, "last_edit_date": 1559772763, "question_id": 56468695, "link": "https://stackoverflow.com/questions/56468695/how-to-package-python-into-virtualenv", "title": "How to package python into virtualenv?", "body": "<p>How to package Python itself into <code>virtualenv</code>? Is this even possible? </p>\n\n<p>I'm trying to run python on a machine which it is not installed on, and I thought <code>virtualenv</code> made this possible. It activates, but can't run any Python.</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1559773129, "post_id": 56468638, "comment_id": 99528971, "body": "<i>&quot;I want these requests to run in parallel to download data faster&quot;</i> Leaving aside your issues with getting the multiprocessing framework to do what it says on the tin, why do you think this is going to work? Do you hope for more throughput (only going to work in special cases)? Or are trying to reduce serial latency (better chance on this, though still no guarantee)?"}, {"owner": {"reputation": 582, "user_id": 4332492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVx5d.jpg?s=128&g=1", "display_name": "Mohammadreza Mirhajianmoghadam", "link": "https://stackoverflow.com/users/4332492/mohammadreza-mirhajianmoghadam"}, "edited": false, "score": 0, "creation_date": 1559773663, "post_id": 56468638, "comment_id": 99529100, "body": "remove  <code>if __name__ == &#39;__main__&#39;:</code>"}, {"owner": {"reputation": 1, "user_id": 11600935, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BwhDfyMoG6s/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jpGfPYddwMpxPjjrMGmmHb_QNV7g/mo/photo.jpg?sz=128", "display_name": "Carlos Ortega", "link": "https://stackoverflow.com/users/11600935/carlos-ortega"}, "edited": false, "score": 0, "creation_date": 1559773718, "post_id": 56468638, "comment_id": 99529120, "body": "I am downloading large video files. If I do it with the second method, it would take 30 seconds to download the first file, and then it would begin to download the second one. The purpose of doing it in parallel is that it would download them all at the same time and significantly reduce latency. There are ways of working around the problem, although I am interested in hearing a method of solving it as I have just learned python today and am trying to get a better feel for the language."}, {"owner": {"reputation": 1, "user_id": 11600935, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BwhDfyMoG6s/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jpGfPYddwMpxPjjrMGmmHb_QNV7g/mo/photo.jpg?sz=128", "display_name": "Carlos Ortega", "link": "https://stackoverflow.com/users/11600935/carlos-ortega"}, "edited": false, "score": 0, "creation_date": 1559773771, "post_id": 56468638, "comment_id": 99529136, "body": "Removing      if <b><i>name == &#39;</i>_main</b>&#39;:      did not work."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1559774571, "post_id": 56468638, "comment_id": 99529312, "body": "How much of those half-minute downloads are <i>latency</i> (waiting on responses from remote sites) instead of your pipe just taking a lot of time to move the actual bytes?  Depending on this-n-that you might very well be looking at a possible gain of a few percent for all your trouble."}], "answers": [{"tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": false, "score": 0, "last_activity_date": 1559775792, "creation_date": 1559775792, "answer_id": 56469098, "question_id": 56468638, "link": "https://stackoverflow.com/questions/56468638/running-multiprocessing-inside-a-function-doesnt-work/56469098#56469098", "title": "Running multiprocessing inside a function doesn&#39;t work", "body": "<p>You can try to use threading. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import threading\n\ndef your_function():\n    ###whatever your downloader is\nt1 = threading.Thread(target=your_function)\nt2 = threading.Thread(target=your_function)\n\nt1.start()\nt2.start()\nt1.join()\nt2.join()\n</code></pre>\n\n<p>Ive had success using this to speed up requests a lot. This may or may not save you anytime but its worth a try. </p>\n\n<p>Would be helpful to see more of your code as well.</p>\n"}], "owner": {"reputation": 1, "user_id": 11600935, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BwhDfyMoG6s/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jpGfPYddwMpxPjjrMGmmHb_QNV7g/mo/photo.jpg?sz=128", "display_name": "Carlos Ortega", "link": "https://stackoverflow.com/users/11600935/carlos-ortega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559878934, "creation_date": 1559772230, "last_edit_date": 1559878934, "question_id": 56468638, "link": "https://stackoverflow.com/questions/56468638/running-multiprocessing-inside-a-function-doesnt-work", "title": "Running multiprocessing inside a function doesn&#39;t work", "body": "<p>In my program I'm making requests to a server. I want these requests to run in parallel to download data faster, so I used multiprocessing. At first the program worked, but then I wanted to turn the entire project into a function. I isolated the problem at the multiprocessing, and realized that the function works without it. </p>\n\n<p>I tried removing multiprocessing, and the function worked perfectly. When I tried multiprocessing again, the function failed. I want to have the multiprocessing run my function inside the function in parallel instead of having the functions run in series.</p>\n\n<p>Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># This doesn't work    \ndef download():\n    data = [name1, name2, name3, name4]\n    if __name__ == '__main__':\n        pool = multiprocessing.Pool()\n        result = pool.map(randomFunction, data)\n\n# This works\ndef download():\n    data=[name1, name2, name3, name4]\n    randomFunction(data[0])\n    randomFunction(data[0])\n    randomFunction(data[0])\n    randomFunction(data[0])\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 190, "user_id": 7006385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ee3ecda37b1ad30811578818ff2c76?s=128&d=identicon&r=PG&f=1", "display_name": "oste-popp", "link": "https://stackoverflow.com/users/7006385/oste-popp"}, "edited": false, "score": 0, "creation_date": 1559772819, "post_id": 56468636, "comment_id": 99528877, "body": "how do you want to call the script? are you mistaken sys.argv with input() ?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1559778033, "post_id": 56468636, "comment_id": 99529963, "body": "Which line caused the error?  Often we check if <code>sys.argv[1:]</code> is not empty, before trying use <code>sys.argv[1]</code>."}], "owner": {"reputation": 47, "user_id": 11513470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78a5e42115dca5200cfb4a6d9fdc3e61?s=128&d=identicon&r=PG&f=1", "display_name": "zmrdim", "link": "https://stackoverflow.com/users/11513470/zmrdim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1559772733, "answer_count": 0, "score": 0, "last_activity_date": 1559772672, "creation_date": 1559772209, "question_id": 56468636, "link": "https://stackoverflow.com/questions/56468636/convert-string-to-hex-from-command-line-argument-to-a-file", "closed_reason": "Duplicate", "title": "convert string to hex from command line argument to a file", "body": "<p>I am trying to send my string via command line argument and then store to my file , but when I try to do this . I got this </p>\n\n<blockquote>\n  <p>IndexError: list index out of range</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>import binascii, os, sys\n\nf = sys.argv[1]\nbytes = f.read()\nf.close()\n\n\nsc = \"\"\nfor b in bytes:\n    sc += binascii.hexlify(b)\n    sc += \" \"\n\nf = open(\"output.txt\", \"w\")\nf.write(sc)\nf.close()\n\n</code></pre>\n"}, {"tags": ["python", "multithreading", "pygame"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559772749, "post_id": 56468634, "comment_id": 99528858, "body": "I&#39;m a student for only some month and don&#39;t know how you pratice double buffering, can you give a code explain ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559773095, "post_id": 56468634, "comment_id": 99528959, "body": "[cont.] Are you sure that painting is the one that brings problems? pygame and the GUIs optimize that part so it should not be a problem. Have not you thought that another part of your code does not generate the problem?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559773453, "post_id": 56468634, "comment_id": 99529054, "body": "No, I really think it this part cause I recreate a new python file with only this and the main thread. Yeah, during the load of the picture, the windows freeze a few time ( depend of the size of the picture ) and I would add a animation on this screen. So I got the idea to make the animation part in the thread to make it smoothly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559773565, "post_id": 56468634, "comment_id": 99529078, "body": "So why I said optimization cause it a lagggy animation that I will ( if this problem is solve ) make smoother"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1559774159, "post_id": 56468634, "comment_id": 99529225, "body": "Wait I think I said something ( sorry, my english is not good as you ). Let me try to explain from a another point of view : first time I got my program wihout any class of threads that load any picture with pygame.image.load, pictures after pictures. At each load of a picture, the program stop until the picture is loaded... That I would change cause if I put the animation inside the main thread, I will be pretty ugly to see. You said me I can&#39;t make it with a thread, so, we are searching a simple solution"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1559774361, "post_id": 56468634, "comment_id": 99529268, "body": "You have a <a href=\"https://meta.stackexchange.com/questions/66377\">XY problem</a>, that is, you are asking for a possible solution that no one guarantees works against the underlying problem. Your question should be: How to load a large image without blocking the GUI? and then say that you have tried multithreading and it fails. And if the correct solution does not use multithreading?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559774687, "post_id": 56468634, "comment_id": 99529337, "body": "Rightly, I don&#39;t know what the correct solution use, so, I try with the tools I knwo... Unfortunately the double buffering look to be pretty difficul no ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559775169, "post_id": 56468634, "comment_id": 99529428, "body": "I&#39;ve edited it :)"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1559776006, "post_id": 56468634, "comment_id": 99529582, "body": "As a general advice, try to not use <code>threading</code> to do different pygame related stuff, high chance to fail. How big are these pictures you want to load? How long does it take to load one? (just to have an idea of the times involved)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "edited": false, "score": 0, "creation_date": 1559776400, "post_id": 56468634, "comment_id": 99529653, "body": "Depend of the picture, it&#39;can be very fast or go to 1~2 second freeze that make to the animation &#39;laggy&#39; because there is something like 50 pictures to load"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1559782790, "post_id": 56468634, "comment_id": 99530668, "body": "By the way, could you show the code where the Booting instance is called too? It may be useful."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1559841421, "post_id": 56468634, "comment_id": 99554854, "body": "@Edhyjox Do it the other way around. Load the images in a  separated thread. Meanwhile you can do anything you want in the main thread. When the thread is finished and all images are loaded (<a href=\"https://docs.python.org/3/library/threading.html#threading.Thread.join\" rel=\"nofollow noreferrer\">.join()</a>) the main application can start."}], "owner": {"user_type": "does_not_exist", "display_name": "user10620375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559775347, "creation_date": 1559772199, "last_edit_date": 1559775347, "question_id": 56468634, "link": "https://stackoverflow.com/questions/56468634/how-to-make-a-smooth-animation-while-loading-the-image-without-freezing-the-wind", "title": "How to make a smooth animation while loading the image without freezing the window?", "body": "<p>I create a little loading screen that show a animation during the load of any picture.</p>\n\n<p>I've tried to add a smooth animation with Thread.\nBasically, I create a class Booting for a nice loading screen.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nclass Booting(Thread):\n    \"\"\"Thread to boot up the program\"\"\"\n\n    def __init__(self):\n        super(Booting, self).__init__()\n        self.loop = True\n\n    def run(self):\n        if debug == True :\n            self.begin = time.time()\n        while self.loop:\n            pygame.draw.rect(screen, (16, 16, 16), (0, 0, 1920, 1080)\n            try:\n                screen.blit(icon_big, (0, 0))\n                screen.blit(animation[current], (0,0))\n                current = current + 1\n                if current == 9 :\n                    current = 0\n            except:\n                pass\n\n            pygame.display.update()\n\n</code></pre>\n\n<p>As you can see, I put the <code>pygame.display.update</code> in the thread</p>\n\n<p>And... when I run it there is no pictures at all ! ( it work when I put it back ). So the Thread seems to be not able to solve my problem.</p>\n\n<p>Someone can help me to find something that could help ?\nIt will be better if it something simple :)</p>\n"}, {"tags": ["python", "pandas", "csv"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1559772296, "post_id": 56468601, "comment_id": 99528732, "body": "Can you provide the traceback please"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 3, "creation_date": 1559772398, "post_id": 56468601, "comment_id": 99528748, "body": "Your issue may be in that you have the extra brackets around <code>[data[[&#39;Call Number&#39;]]]</code> it should probably be <code>data[&#39;Call Number&#39;]</code>"}, {"owner": {"reputation": 43, "user_id": 11596053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea3c7930f2a15b6ab3f3ae15c9c3012?s=128&d=identicon&r=PG&f=1", "display_name": "Hoosier", "link": "https://stackoverflow.com/users/11596053/hoosier"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1559772558, "post_id": 56468601, "comment_id": 99528803, "body": "Yes sir. I added the traceback"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1559772730, "post_id": 56468601, "comment_id": 99528848, "body": "What does this csv look like btw?"}, {"owner": {"reputation": 43, "user_id": 11596053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea3c7930f2a15b6ab3f3ae15c9c3012?s=128&d=identicon&r=PG&f=1", "display_name": "Hoosier", "link": "https://stackoverflow.com/users/11596053/hoosier"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1559772860, "post_id": 56468601, "comment_id": 99528890, "body": "@jab taking the double brackets and the external brackets out ended up fixing the problem! (I had previously tried one or the other to no avail.) Thank you, sir."}], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 11580689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad5e074974fe9db51b1437b42b7a443?s=128&d=identicon&r=PG&f=1", "display_name": "foxpal", "link": "https://stackoverflow.com/users/11580689/foxpal"}, "is_accepted": false, "score": 0, "last_activity_date": 1559772233, "creation_date": 1559772233, "answer_id": 56468641, "question_id": 56468601, "link": "https://stackoverflow.com/questions/56468601/how-to-read-a-csv-column-as-a-string-in-python/56468641#56468641", "title": "How to read a CSV column as a string in Python", "body": "<pre><code>data['Call Number'] = data['Call Number'].astype(str)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11596053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea3c7930f2a15b6ab3f3ae15c9c3012?s=128&d=identicon&r=PG&f=1", "display_name": "Hoosier", "link": "https://stackoverflow.com/users/11596053/hoosier"}, "edited": false, "score": 0, "creation_date": 1559772904, "post_id": 56468648, "comment_id": 99528903, "body": "That combined with removing the double brackets fixed my issue. Thanks!"}, {"owner": {"reputation": 374, "user_id": 4593791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ad5b1e05adc9710e519a3b5a075d88?s=128&d=identicon&r=PG", "display_name": "spassador", "link": "https://stackoverflow.com/users/4593791/spassador"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1559772960, "post_id": 56468648, "comment_id": 99528923, "body": "@Jab this was the soluzion to the problem, so it was the answer. We are here to help people, not to gain points."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1559775234, "post_id": 56468648, "comment_id": 99529439, "body": "In that case you should have written a comment and voted to close the question as a typographical error (or flag for closure in comments)."}], "tags": [], "owner": {"reputation": 374, "user_id": 4593791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ad5b1e05adc9710e519a3b5a075d88?s=128&d=identicon&r=PG", "display_name": "spassador", "link": "https://stackoverflow.com/users/4593791/spassador"}, "is_accepted": false, "score": 0, "last_activity_date": 1559772290, "creation_date": 1559772290, "answer_id": 56468648, "question_id": 56468601, "link": "https://stackoverflow.com/questions/56468601/how-to-read-a-csv-column-as-a-string-in-python/56468648#56468648", "title": "How to read a CSV column as a string in Python", "body": "<p>I think the first thing you should do is to remove the external square brakets when declaring s.</p>\n\n<p>So, obtaining something like:</p>\n\n<pre><code>a = data[['something']]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11596053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea3c7930f2a15b6ab3f3ae15c9c3012?s=128&d=identicon&r=PG&f=1", "display_name": "Hoosier", "link": "https://stackoverflow.com/users/11596053/hoosier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 687, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1559773784, "creation_date": 1559772024, "last_edit_date": 1559773784, "question_id": 56468601, "link": "https://stackoverflow.com/questions/56468601/how-to-read-a-csv-column-as-a-string-in-python", "title": "How to read a CSV column as a string in Python", "body": "<p>I wrote code with pandas in order to pass in a CSV and retrieve a column, and then I have more code that is supposed to split the data using the re library, but it throws an error stating \"TypeError: expected string or bytes-like object.\"</p>\n\n<p>I believe I just need to convert the CSV into a string before running re on it, but I can't figure out how.</p>\n\n<p>The column in the CSV has data which look like: 'HB1.A1D62no.0016, HB31.N33NO.89, HB 54 .N338'</p>\n\n<pre><code>import pandas as pd\n\ndata = pd.read_csv('HB_Lib.csv', delimiter = ',')\ns = [data[['Call Number']]]\n\nimport re\n\npattern = r\"(^[a-z]+)\\s*(\\d+(?:\\.\\d+)?)\"\nprint(list(map(\"\".join, [re.findall(pattern, part, flags=re.I)[0] for part in s])))\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"C:/Python/test2.py\", line 8, in &lt;module&gt;\n    print(list(map(\"\".join, [re.findall(pattern, part, flags=re.I)[0] for part in s])))\n\n  File \"C:/Python/test2.py\", line 8, in &lt;listcomp&gt;\n    print(list(map(\"\".join, [re.findall(pattern, part, flags=re.I)[0] for part in s])))\n\n  File \"C:\\Python37\\lib\\re.py\", line 223, in findall\n    return _compile(pattern, flags).findall(string)\n\nTypeError: expected string or bytes-like object\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "edited": false, "score": 0, "creation_date": 1559771945, "post_id": 56468547, "comment_id": 99528623, "body": "You said &quot;similar&quot; and not &quot;same&quot;. So if <code>d1 = {1: {&#39;a&#39;:10,&#39;b&#39;:20,&#39;c&#39;:10}} d2 = {1: {&#39;a&#39;:30,&#39;b&#39;:40,&#39;c&#39;:10}}</code> was <code>d1 = {1: {&#39;a&#39;:10,&#39;b&#39;:20,&#39;c&#39;:10}} d2 = {1: {&#39;a&#39;:30,&#39;b&#39;:40,}}</code>, would this still work? Just want to clarify."}, {"owner": {"reputation": 374, "user_id": 4593791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ad5b1e05adc9710e519a3b5a075d88?s=128&d=identicon&r=PG", "display_name": "spassador", "link": "https://stackoverflow.com/users/4593791/spassador"}, "edited": false, "score": 0, "creation_date": 1559772575, "post_id": 56468547, "comment_id": 99528811, "body": "What Is the output you have got right now"}, {"owner": {"reputation": 195, "user_id": 7893438, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211311083147127/picture?type=large", "display_name": "John Holmes", "link": "https://stackoverflow.com/users/7893438/john-holmes"}, "edited": false, "score": 0, "creation_date": 1559780889, "post_id": 56468547, "comment_id": 99530387, "body": "To clarify the dict would be the same all except the nested values in lower level dictionary.    The dict comprehension complains about the assignment of (d2_value-d1_value)  to the d2_key  throwing a TypeError"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 7893438, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211311083147127/picture?type=large", "display_name": "John Holmes", "link": "https://stackoverflow.com/users/7893438/john-holmes"}, "edited": false, "score": 0, "creation_date": 1560038916, "post_id": 56468712, "comment_id": 99608876, "body": "What i noticed about this solution is that if all the nest values are equal it still returns a dictionary with the higher level key and an empty values.  How can the function simply return None if all values are equal?"}, {"owner": {"reputation": 195, "user_id": 7893438, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211311083147127/picture?type=large", "display_name": "John Holmes", "link": "https://stackoverflow.com/users/7893438/john-holmes"}, "edited": false, "score": 0, "creation_date": 1560053952, "post_id": 56468712, "comment_id": 99610448, "body": "replaced the return statement with return {key:val for key, val in diffs.items() if val}"}], "tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1559772709, "creation_date": 1559772709, "answer_id": 56468712, "question_id": 56468547, "link": "https://stackoverflow.com/questions/56468547/performing-calculations-on-multiple-nested-python-dictionaries/56468712#56468712", "title": "Performing calculations on multiple nested python dictionaries", "body": "<p>Your variable <code>matchkeys</code> only holds the keys on the first level of the dicts. You need to to get the keys of each level as you move into the dictionaries. It might be easier to think of this as a recursive function. Then you can just pass the nested dicts back into the function.</p>\n\n<p>Something like:</p>\n\n<pre><code>d1 = {1: {'a':10,'b':20,'c':10}}\nd2 = {1: {'a':30,'b':40,'c':10}}\n\ndef filterDifs(d1, d2):\n    d = {}\n    matchKeys = d1.keys() &amp; d2.keys()\n    for k in matchKeys:\n        if isinstance(d1[k], dict) and isinstance(d2[k], dict):\n            d[k] = filterDifs(d1[k], d2[k])\n        else:\n            try:\n                if d1[k] - d2[k] != 0:\n                    d[k] = d1[k] - d2[k]\n            except TypeError:\n                pass\n    return d\n\nfilterDifs(d1, d2)\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>{1: {'b': -20, 'a': -20}}\n</code></pre>\n\n<p>This will ignore attempts to subtract incompatible types, but if you wanted to add some sort of value in those cases you could in the <code>except</code> block:</p>\n\n<pre><code>except TypeError:\n    d[k] = \"Some error value\"\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 7893438, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10211311083147127/picture?type=large", "display_name": "John Holmes", "link": "https://stackoverflow.com/users/7893438/john-holmes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 56468712, "answer_count": 1, "score": 0, "last_activity_date": 1559772709, "creation_date": 1559771679, "question_id": 56468547, "link": "https://stackoverflow.com/questions/56468547/performing-calculations-on-multiple-nested-python-dictionaries", "title": "Performing calculations on multiple nested python dictionaries", "body": "<p>Trying to create a dict comprehension by comparing two nested dictionaries of similar size and subtracting the last value of the lowest nested dictionary.  Only values != 0 will be included in the dictionary.  </p>\n\n<pre><code>d1 = {1: {'a':10,'b':20,'c':10}}\nd2 = {1: {'a':30,'b':40,'c':10}}\n</code></pre>\n\n<p>matchKeys = d1.keys() &amp; d2.keys()</p>\n\n<pre><code>new = {}\nfor k in matching_keys:\n    if not d1[k] == d2[k]:\n        for d1_key, d1_value in d1[k].items():\n            for d2_key, d2_value  in d2[k].items():\n                new[k][d2_key] = (d2_value-d1_value)\n</code></pre>\n\n<p>also tried:</p>\n\n<pre><code>d3 = {k: {d2_key:(d2_value-d1_value) for d2_key, d2_value in d2.items()} for d1_key, d1_value in d1[k].items() for k in matching_keys if not d1[k] == d2[k]}\n</code></pre>\n\n<p>I'm expecting:</p>\n\n<pre><code>d3 = {1: {'a':20,'b':20}}\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1559771819, "post_id": 56468538, "comment_id": 99528585, "body": "You did not <i>call</i> <code>get_queryset</code> in <code>return super(PostVoteCountManager, self).get_queryset.annotate(..)</code>, it should be <code>return super(PostVoteCountManager, self).get_queryset().annotate(...)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1559771956, "creation_date": 1559771956, "answer_id": 56468586, "question_id": 56468538, "link": "https://stackoverflow.com/questions/56468538/using-models-manager-to-count-the-number-of-votes/56468586#56468586", "title": "using models.manager to count the number of votes", "body": "<p>You wrote the function as <s><code>get_query_set</code></s>, but the name is <a href=\"https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-a-manager-s-initial-queryset\" rel=\"nofollow noreferrer\"><strong><code>get_queryset</code></strong> [Django-doc]</a>. Furthermore, you forgot to <em>call</em> the <code>get_queryset(..)</code> function here:</p>\n\n<pre><code>class PostVoteCountManager(models.Manager):\n\n    def <b>get_queryset</b>(self):\n        return super(PostVoteCountManager, self).<b>get_queryset()</b>.annotate(\n            votes=Count('vote')).order_by(&quot;-votes&quot;)</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 11524931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e0708da5c9ee94447a24181c14e1ff2?s=128&d=identicon&r=PG&f=1", "display_name": "rosababy", "link": "https://stackoverflow.com/users/11524931/rosababy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 56468586, "answer_count": 1, "score": 1, "last_activity_date": 1559771956, "creation_date": 1559771627, "question_id": 56468538, "link": "https://stackoverflow.com/questions/56468538/using-models-manager-to-count-the-number-of-votes", "title": "using models.manager to count the number of votes", "body": "<p>I'm using models.manager to count the number of votes but I don't understand why the number of vote isn't showing off. the voting system works(checked with admin) but the manager isn't working.</p>\n\n<p>models.py</p>\n\n<pre><code>class PostVoteCountManager(models.Manager):\n    def get_query_set(self):\n        return super(PostVoteCountManager, self).get_query_set.annotate(\n            votes=Count('vote')).order_by(\"-votes\")\n\nclass Post(models.Model):\n    rank_score = models.FloatField(default=0.0)\n    with_votes = PostVoteCountManager()\n\nclass Vote(models.Model):\n    voter = models.ForeignKey(User, on_delete=models.CASCADE)\n    post = models.ForeignKey(Post, on_delete=models.CASCADE)\n\n    def __str__(self):\n        return \"%s voted %s\" %(self.voter.username, self.post.title)\n</code></pre>\n\n<p>my views.py</p>\n\n<pre><code>class PostListView(ListView):\n    model = Post\n    template_name = 'community/home.html'  # &lt;app&gt;/&lt;model&gt;_&lt;viewtype&gt;.html\n    context_object_name = 'posts'\n    #ordering = ['-date_posted']\n    queryset = Post.with_votes.all()\n\n    def get_context_data(self, **kwargs):\n        context = super(PostListView, self).get_context_data(**kwargs)\n        if self.request.user.is_authenticated:\n            voted = Vote.objects.filter(voter=self.request.user)\n            posts_in_page = [post.id for post in context[\"object_list\"]]\n            voted = voted.filter(post_id__in=posts_in_page)\n            voted = voted.values_list('post_id', flat=True)\n            context[\"voted\"] = voted\n        return context  \n</code></pre>\n\n<p>In html I do </p>\n\n<pre><code>    {% for post in posts %}\n&lt;form method=\"post\" action=\"{% url 'vote' %}\" class=\"vote_form\"&gt;\n  &lt;li&gt; [{{ post.votes }}]\n    {{post}}\n    {% csrf_token %}\n    &lt;input type=\"hidden\" id=\"id_post\" name=\"post\" class=\"hidden_id\" value=\"{{ post.pk }}\" /&gt;\n    &lt;input type=\"hidden\" id=\"id_voter\" name=\"voter\" class=\"hidden_id\" value=\"{{ user.pk }}\" /&gt;\n    {% if not user.is_authenticated %}\n    &lt;button disabled title=\"Please login to vote\"&gt;+&lt;/button&gt;\n    {% elif post.pk not in voted %}\n    &lt;button&gt;+&lt;/button&gt;\n    {% else %}\n    &lt;button&gt;-&lt;/button&gt;\n    {% endif %}\n      &lt;/form&gt;\n{% endform%}\n</code></pre>\n"}, {"tags": ["python", "django", "django-queryset"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559792388, "post_id": 56469562, "comment_id": 99532228, "body": "thanks when I execute the code that you indicate me, it gives me the following error:cannot unpack non-iterable int object"}, {"owner": {"reputation": 859, "user_id": 7986808, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9c7c2b8e8a67a276bbc476d48a102b?s=128&d=identicon&r=PG&f=1", "display_name": "khashashin", "link": "https://stackoverflow.com/users/7986808/khashashin"}, "reply_to_user": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559811840, "post_id": 56469562, "comment_id": 99538905, "body": "I have tested it locally should work now, try again ;)"}, {"owner": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559846628, "post_id": 56469562, "comment_id": 99557022, "body": "i have this error: Traceback (most recent call last):   File &quot;&lt;console&gt;&quot;, line 2, in &lt;module&gt; TypeError: &#39;int&#39; object is not subscriptable,  I think the problem and what I would like to know from the beginning the id that the query generates results  [(6, Decimal (&#39;133.22&#39;), Decimal (&#39;6.40&#39;), Decimal (&#39;2.59&#39;))... corresponds to the id of the objects of the &quot;Tarifa_Sem&quot; model and to save in my model Calculadora_isr, it should have the ID 1,2,3,4 ..."}, {"owner": {"reputation": 859, "user_id": 7986808, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9c7c2b8e8a67a276bbc476d48a102b?s=128&d=identicon&r=PG&f=1", "display_name": "khashashin", "link": "https://stackoverflow.com/users/7986808/khashashin"}, "reply_to_user": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559848719, "post_id": 56469562, "comment_id": 99557861, "body": "Oh, you&#39;re right we need here id of <code>Calculadora_isr</code> and not of <code>Tarifa_Sem</code>. I&#39;ve updated my answer but this is not the best solution, since there are too many lists inside the lists."}], "tags": [], "owner": {"reputation": 859, "user_id": 7986808, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9c7c2b8e8a67a276bbc476d48a102b?s=128&d=identicon&r=PG&f=1", "display_name": "khashashin", "link": "https://stackoverflow.com/users/7986808/khashashin"}, "is_accepted": false, "score": 0, "last_activity_date": 1559848558, "last_edit_date": 1559848558, "creation_date": 1559780365, "answer_id": 56469562, "question_id": 56468480, "link": "https://stackoverflow.com/questions/56468480/how-to-save-or-update-values-of-a-list-in-my-model-correctly/56469562#56469562", "title": "How to Save or Update values \u200bof a list in my model correctly?", "body": "<p>during the creation of the <code>results</code> list add also the pk's of the instances and later use it to update the instance.</p>\n\n<pre><code>results = [\n    [obj.id, Tarifa_Sem.objects.filter(limite_superior__gte = obj.base_gravada)\n    .values_list('limite_inferior_isr', 'cuota_fija_t', 'percentage_sobre_excedente')] for obj in Calculadora_isr.objects.all ()\n]\n</code></pre>\n\n<hr>\n\n<pre><code>for t in results:\n    instance = Calculadora_isr.objects.get(t[0])\n    instance.limite_inf_calculo = t[1][0][0]\n    instance.percentage_excendente_li = t[1][0][2]\n    instance.cuota_fija = t[1][0][1]\n    instance.save()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559800868, "post_id": 56471050, "comment_id": 99534028, "body": "this code return the next error: &quot;Choices are: %s&quot; % (name, &quot;, &quot;.join(names))) django.core.exceptions.FieldError: Cannot resolve keyword &#39;percentage_sobre_excedente&#39; Thanks for your help"}, {"owner": {"reputation": 1107, "user_id": 11519577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bGBcb.jpg?s=128&g=1", "display_name": "gachdavit", "link": "https://stackoverflow.com/users/11519577/gachdavit"}, "reply_to_user": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559848154, "post_id": 56471050, "comment_id": 99557632, "body": "Change <code>percentage_sobre_excedente</code> with <code>percentage_over_excess</code>."}, {"owner": {"reputation": 1107, "user_id": 11519577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bGBcb.jpg?s=128&g=1", "display_name": "gachdavit", "link": "https://stackoverflow.com/users/11519577/gachdavit"}, "reply_to_user": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "edited": false, "score": 0, "creation_date": 1559848207, "post_id": 56471050, "comment_id": 99557654, "body": "Your <code>values_list()</code> method was with wrong fields, in your question. Correct it."}], "tags": [], "owner": {"reputation": 1107, "user_id": 11519577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bGBcb.jpg?s=128&g=1", "display_name": "gachdavit", "link": "https://stackoverflow.com/users/11519577/gachdavit"}, "is_accepted": false, "score": 0, "last_activity_date": 1559796702, "creation_date": 1559796702, "answer_id": 56471050, "question_id": 56468480, "link": "https://stackoverflow.com/questions/56468480/how-to-save-or-update-values-of-a-list-in-my-model-correctly/56471050#56471050", "title": "How to Save or Update values \u200bof a list in my model correctly?", "body": "<p>Your question is a little bit unclear for me,,, But try something like this.</p>\n\n<pre><code># create list of dicts, to make association between PK's and values (Which represents QuerySet)\nresults = [\n    {obj.pk: Tarifa_Sem.objects.filter (limite_superior__gte=obj.base_gravada).values_list ('limite_inferior_isr', 'cuota_fija_t', 'percentage_sobre_excedente').first()}\n    for obj in Calculadora_isr.objects.all ()\n]\n# iterate over results and find row based on dict key, and update associated row based on dict value\nfor result in results:\n    for k, v in result.items():    \n        try:\n            get_instance = Calculadora_isr.objects.get(pk=k)   #limite_inf_calculo =t[0],percentage_excendente_li=t[2], cuota_fija=t[1])\n            # if model found\n            get_instance.limite_inf_calculo = v[0]\n            get_instance.percentage_excent_li = v[2]\n            get_instance.fixed_quota = v[1]\n            get_instance.save()\n        except Calculadora_isr.DoesNotExist:\n            pass \n</code></pre>\n\n<p>Also,,, <code>first()</code> means that first in <code>QuerySet</code> collection, and not first in Database (based on row id). It's better, use <code>earliest('pk')</code> instead of <code>first()</code> (IMHO). Both are <code>QuerySet</code> methods.</p>\n\n<p>Hope, it helps you.</p>\n"}], "owner": {"reputation": 13, "user_id": 11564667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FLhiTYZ-1c/AAAAAAAAAAI/AAAAAAAAAHQ/RXAQRPjLBvg/photo.jpg?sz=128", "display_name": "Alfredo Godinez", "link": "https://stackoverflow.com/users/11564667/alfredo-godinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559856062, "creation_date": 1559771370, "last_edit_date": 1559856062, "question_id": 56468480, "link": "https://stackoverflow.com/questions/56468480/how-to-save-or-update-values-of-a-list-in-my-model-correctly", "title": "How to Save or Update values \u200bof a list in my model correctly?", "body": "<p>I have the following models:</p>\n\n<pre><code>class Tarifa_Sem (models.Model):\n\u00a0\u00a0\u00a0\u00a0limit_inferior_isr = models.DecimalField (max_digits = 10, decimal_places = 2)\n\u00a0\u00a0\u00a0\u00a0limit_superior = models.DecimalField (max_digits = 10, decimal_places = 2)\n\u00a0\u00a0\u00a0\u00a0cuota_fija_t = models.DecimalField (max_digits = 10, decimal_places = 2, blank = True)\n\u00a0\u00a0\u00a0\u00a0percentage_over_excess = models.DecimalField (max_digits = 10, decimal_places = 2)\n\u00a0\nclass Calculator_isr (models.Model):\n\u00a0\u00a0\u00a0\u00a0rate = models.ForeignKey (Rate_Sem, on_delete = models.CASCADE, null = True, blank = True, related_name = 'calculators')\n\u00a0\u00a0\u00a0\u00a0base_gravada = models.DecimalField (max_digits = 10, decimal_places = 2, null = True, blank = True)\n\u00a0\u00a0\u00a0\u00a0limite_inf_calculo = models.DecimalField (max_digits = 10, decimal_places = 2, null = True, blank = True)\n\u00a0\u00a0\u00a0\u00a0percentage_excent_li = models.DecimalField (max_digits = 10, decimal_places = 2, null = True, blank = True)\n\u00a0\u00a0\u00a0\u00a0fixed_ quota = models.DecimalField (max_digits = 10, decimal_places = 2, null = True, blank = True)\n</code></pre>\n\n<p>I make a query by iterating my values \u200b\u200bof the base_gravada field.</p>\n\n<pre><code>    results = [\n    \u00a0\u00a0\u00a0\u00a0Tarifa_Sem.objects.filter (limite_superior__gte = obj.base_gravada)\n        .values_list ('limite_inferior_isr', 'cuota_fija_t', 'percentage_over_excess')\n        . First ()\n        for obj in Calculadora_isr.objects.all ()\n    ]\n</code></pre>\n\n<p>This query returns this list:</p>\n\n<pre><code>[(Decimal ('133.22'), Decimal ('2.59'), Decimal ('6.40')),\n(Decimal ('8790.96'), Decimal ('1649.34'), Decimal ('30 .00 ')), \n(Decimal ( '2765.43'), Decimal ('292.88'), Decimal ('21 .36 ')), \n(Decimal (' 8790.96 '), Decimal (' 1649.34 '), Decimal ('30 .00'))]\n</code></pre>\n\n<p>To save use the create() method:</p>\n\n<pre><code>\u00a0\n\nfor t in results:\n    ... Calculadora_isr.objects.create (limite_inf_calculo = t [0],\n     percentage_excent_li = t [2], fixed_ quota = t [1]). Save ()\n</code></pre>\n\n<p>Where I indicate the field and the index of the list to keep, the problem is that it does not save them inside the IDs with the initial values \u200b\u200bof base_gravated, if not that I create new values:</p>\n\n<pre><code>+------------------------------------------------------------------------------------+\n|                            Model Calculadora_isr                                   |\n+--------------------------------------+----------------------+----------------------+\n|id |base_gravada| limite_inf_calculo  |       fixed_ quota   |  percentage_excent   |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|1  |  1000.00   |                     |                      |                      |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|2  | 10000.00   |                     |                      |                      |\n+---+------------+---------------------+----------------------+ ---------------------+\n|3  |  5000.00   |                     |                      |                      |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|4  | 10000.00   |                     |                      |                      |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|5  |            |        133.22       |         2.59         |          6.40        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|6  |            |       8790.96       |      1649.34         |         30.00        |\n+---+------------+---------------------+----------------------+ ---------------------+\n|7  |            |       2765.43       |       292.88         |         21.36        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|8  |            |       8790.96       |      1649.34         |         30.00        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n</code></pre>\n\n<p>What I need is to be able to save the values \u200b\u200bin my Calculadora_isr model, which looks like this:</p>\n\n<pre><code>+------------------------------------------------------------------------------------+\n|                            Model Calculadora_isr                                   |\n+--------------------------------------+----------------------+----------------------+\n|id |base_gravada| limite_inf_calculo  |       fixed_ quota   |  percentage_excent   |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|1  |  1000.00   |       133.22        |           2.59       |          6.40        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|2  | 10000.00   |      8790.96        |        1649.34       |         30.00        |\n+---+------------+---------------------+----------------------+ ---------------------+\n|3  |  5000.00   |      2765.43        |         292.88       |         21.36        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n|4  | 10000.00   |      8790.96        |        1649.34       |         30.00        |\n+---+------------+---------------------+ ---------------------+ ---------------------+\n</code></pre>\n\n<p>I need help with this thank you</p>\n"}, {"tags": ["python"], "owner": {"reputation": 21, "user_id": 11529442, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6OEzGpGldpM/AAAAAAAAAAI/AAAAAAAAA7Q/IlXTidSEWBY/photo.jpg?sz=128", "display_name": "bubalis", "link": "https://stackoverflow.com/users/11529442/bubalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559771171, "creation_date": 1559771171, "question_id": 56468443, "link": "https://stackoverflow.com/questions/56468443/python-wos-search-function-typeerror-expected-string-or-bytes-like-object", "title": "Python WOS search function TypeError: expected string or bytes-like object", "body": "<p>Trying to conduct automated downloads from Web of Science with python wos library. \nThrows an error that seems to be coming from the wos package, but I'm unsure. </p>\n\n<p>Have tried messing around in the underlying library, but this seems like bad practice. </p>\n\n<pre><code>x='my query'\n\nwith WosClient( lite=True) as client:\n    client.connect()\n    wos.utils.query(client, str(x))\n\n\nAuthenticated (SID: 6CZsG4iKOFMUq2UCu9N)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-8-093a8e409039&gt; in &lt;module&gt;\n      1 with WosClient( lite=True) as client:\n      2     client.connect()\n----&gt; 3     wos.utils.query(client, str(x))\n\n~\\Anaconda3\\lib\\site-packages\\wos\\utils.py in query(wosclient, wos_query, xml_query, count, offset, limit)\n     22     \"\"\"Query Web of Science and XML query results with multiple requests.\"\"\"\n     23     results = [single(wosclient, wos_query, xml_query, min(limit, count-x+1), x)\n---&gt; 24                for x in range(offset, count+1, limit)]\n     25     if xml_query:\n     26         return [el for res in results for el in res]\n\n~\\Anaconda3\\lib\\site-packages\\wos\\utils.py in &lt;listcomp&gt;(.0)\n     22     \"\"\"Query Web of Science and XML query results with multiple requests.\"\"\"\n     23     results = [single(wosclient, wos_query, xml_query, min(limit, count-x+1), x)\n---&gt; 24                for x in range(offset, count+1, limit)]\n     25     if xml_query:\n     26         return [el for res in results for el in res]\n\n~\\Anaconda3\\lib\\site-packages\\wos\\utils.py in single(wosclient, wos_query, xml_query, count, offset)\n     11     \"\"\"Perform a single Web of Science query and then XML query the results.\"\"\"\n     12     result = wosclient.search(wos_query, count, offset)\n---&gt; 13     xml = _re.sub(' xmlns=\"[^\"]+\"', '', result.records, count=1).encode('utf-8')\n     14     if xml_query:\n     15         xml = _ET.fromstring(xml)\n\n~\\Anaconda3\\lib\\re.py in sub(pattern, repl, string, count, flags)\n    190     a callable, it's passed the Match object and must return\n    191     a replacement string to be used.\"\"\"\n--&gt; 192     return _compile(pattern, flags).sub(repl, string, count)\n    193 \n    194 def subn(pattern, repl, string, count=0, flags=0):\n\nTypeError: expected string or bytes-like object\n</code></pre>\n"}, {"tags": ["python", "function", "arguments", "parameter-passing", "signature"], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 1497385, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/480aa1bfbfe38b0baf3a48159b82d726?s=128&d=identicon&r=PG&f=1", "display_name": "Ark-kun", "link": "https://stackoverflow.com/users/1497385/ark-kun"}, "is_accepted": false, "score": 1, "last_activity_date": 1559771049, "creation_date": 1559771049, "answer_id": 56468428, "question_id": 56468427, "link": "https://stackoverflow.com/questions/56468427/where-is-the-source-of-the-python-code-that-checks-the-function-arguments/56468428#56468428", "title": "Where is the source of the python code that checks the function arguments?", "body": "<p>In CPython implementation, the checks in question are performed by the \n<a href=\"https://github.com/python/cpython/blob/9ddb77741e041966d64739353393bcba33cc3bdd/Python/ceval.c#L4045\" rel=\"nofollow noreferrer\">_PyEval_EvalCodeWithName</a> function. For example here is the <a href=\"https://github.com/python/cpython/blob/9ddb77741e041966d64739353393bcba33cc3bdd/Python/ceval.c#L4185\" rel=\"nofollow noreferrer\">check for the number of positional arguments</a></p>\n\n<p>Here is a part of the reference graph:</p>\n\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/9ddb77741e041966d64739353393bcba33cc3bdd/Python/ceval.c#L4045\" rel=\"nofollow noreferrer\">_PyEval_EvalCodeWithName</a></li>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/9ddb77741e041966d64739353393bcba33cc3bdd/Python/ceval.c#L4321\" rel=\"nofollow noreferrer\">PyEval_EvalCodeEx</a></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/9ddb77741e041966d64739353393bcba33cc3bdd/Python/ceval.c#L716\" rel=\"nofollow noreferrer\">PyEval_EvalCode</a></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/44bfff2ec220f2e0291150a776d4d77af7c821ef/Python/pythonrun.c#L1096\" rel=\"nofollow noreferrer\">run_eval_code_obj</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/44bfff2ec220f2e0291150a776d4d77af7c821ef/Python/pythonrun.c#L1127\" rel=\"nofollow noreferrer\">run_mod</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/44bfff2ec220f2e0291150a776d4d77af7c821ef/Python/pythonrun.c#L1147\" rel=\"nofollow noreferrer\">run_pyc_file</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/44bfff2ec220f2e0291150a776d4d77af7c821ef/Python/pythonrun.c#L374\" rel=\"nofollow noreferrer\">PyRun_SimpleFileExFlags</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/0fd2c300c2a85b3b227a907b2a39ef79fa86d850/Python/import.c#L976\" rel=\"nofollow noreferrer\">exec_code_in_module</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/fb9423fd0a85f06affb8c3a8f25dd598a649aa42/Objects/call.c#L299\" rel=\"nofollow noreferrer\">_PyFunction_FastCallDict</a></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/530f506ac91338b55cf2be71b1cdf50cb077512f/Objects/funcobject.c#L626\" rel=\"nofollow noreferrer\">function_call</a></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/530f506ac91338b55cf2be71b1cdf50cb077512f/Objects/funcobject.c#L647\" rel=\"nofollow noreferrer\">PyFunction_Type</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/530f506ac91338b55cf2be71b1cdf50cb077512f/Objects/funcobject.c#L13\" rel=\"nofollow noreferrer\">PyFunction_NewWithQualName</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/530f506ac91338b55cf2be71b1cdf50cb077512f/Objects/funcobject.c#L78\" rel=\"nofollow noreferrer\">PyFunction_New</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/530f506ac91338b55cf2be71b1cdf50cb077512f/Objects/funcobject.c#L500\" rel=\"nofollow noreferrer\">func_new_impl</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><a href=\"https://github.com/python/cpython/blob/3191391515824fa7f3c573d807f1034c6a28fab3/Objects/clinic/funcobject.c.h#L27\" rel=\"nofollow noreferrer\">func_new</a></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 5397, "user_id": 1497385, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/480aa1bfbfe38b0baf3a48159b82d726?s=128&d=identicon&r=PG&f=1", "display_name": "Ark-kun", "link": "https://stackoverflow.com/users/1497385/ark-kun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573006429, "creation_date": 1559771049, "last_edit_date": 1573006429, "question_id": 56468427, "link": "https://stackoverflow.com/questions/56468427/where-is-the-source-of-the-python-code-that-checks-the-function-arguments", "title": "Where is the source of the python code that checks the function arguments?", "body": "<p>When you call python function, it checks the arguments and raises <code>TypeError</code>s if you pass something that does not correspond to the function signature:</p>\n\n<ul>\n<li><code>A takes from X to Y positional arguments but Z were given</code></li>\n<li><code>got multiple values for argument X</code></li>\n<li><code>got an unexpected keyword argument</code></li>\n</ul>\n\n<p>etc.</p>\n\n<p>I want to see the code that performs those checks, so that I better understand how and when python performs them.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1559770667, "post_id": 56468341, "comment_id": 99528169, "body": "This seems like more of an HTML/CSS question than anything to do with python.."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1559770792, "post_id": 56468341, "comment_id": 99528227, "body": "Or even a Confluence question."}, {"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "edited": false, "score": 0, "creation_date": 1559771030, "post_id": 56468341, "comment_id": 99528328, "body": "As both have said above it seems like this question may need to be asked elsewhere. But to add, you may need to determine if you want inline CSS or external CSS. There are many reasons why to choose each, but I would suggest using a separate CSS file. It makes things much easier. Best of luck getting your answer!"}, {"owner": {"reputation": 500, "user_id": 1017466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73d62289ed695b520ad2a3ae80c45277?s=128&d=identicon&r=PG", "display_name": "bluethundr", "link": "https://stackoverflow.com/users/1017466/bluethundr"}, "edited": false, "score": 0, "creation_date": 1559771120, "post_id": 56468341, "comment_id": 99528354, "body": "OK thanks guys! I still have to get familiar with CSS. I will work on that. Thanks again!"}, {"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "edited": false, "score": 0, "creation_date": 1559771274, "post_id": 56468341, "comment_id": 99528408, "body": "If you get to repost the question feel free to tag me. It should be a quick fix."}], "owner": {"reputation": 500, "user_id": 1017466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73d62289ed695b520ad2a3ae80c45277?s=128&d=identicon&r=PG", "display_name": "bluethundr", "link": "https://stackoverflow.com/users/1017466/bluethundr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559770544, "creation_date": 1559770544, "question_id": 56468341, "link": "https://stackoverflow.com/questions/56468341/format-html-font-and-colors-in-python", "title": "Format HTML font and colors in python", "body": "<p>I have a function that I wrote that creates a web page in confluence that lists all the AWS Ec2 instances in our accounts. It looks good.</p>\n\n<p>Except that the background is all grey and the font is bold everywhere.</p>\n\n<p>This is my function:</p>\n\n<pre><code>def convert_csv_to_html_table(output_file, today):\n    output_dir = \"../output_files/aws_instance_list/html/\"\n    htmlfile = output_dir + 'aws-master-list-' + today +'.html'\n    count = 0\n    html = ''\n    with open(output_file,'r') as CSVFILE:\n        reader = csv.reader(CSVFILE)\n        html += \"&lt;table&gt;&lt;tbody&gt;\"\n        for row in reader:\n            html += \"&lt;tr&gt;\"\n            # Process the headers\n            if count == 0:\n                for column in row:\n                    html += \"&lt;th&gt;%s&lt;/th&gt;\" % column\n                html += \"&lt;/tr&gt;\"\n            else:\n                # Process the data\n                for column in row:\n                    html += \"&lt;td&gt;%s&lt;/td&gt;\" % column\n                html += \"&lt;/tr&gt;\"\n                count += 1\n        html += \"&lt;/tbody&gt;&lt;/table&gt;\"\n    with open(htmlfile,'w+') as HTMLFILE:\n        HTMLFILE.write(html)\n    return htmlfile\n</code></pre>\n\n<p>How can I get the result that only the header has a grey background? And the rest of the page has a white background? Also how do I specify a font and font size in the above code?</p>\n"}, {"tags": ["python", "bash", "git"], "comments": [{"owner": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 1, "creation_date": 1559770792, "post_id": 56468340, "comment_id": 99528228, "body": "just checkout the project twice."}, {"owner": {"reputation": 4212, "user_id": 4426072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b201e405f47e947422e0c33dff8c31?s=128&d=identicon&r=PG&f=1", "display_name": "DannyMoshe", "link": "https://stackoverflow.com/users/4426072/dannymoshe"}, "reply_to_user": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 1, "creation_date": 1559771070, "post_id": 56468340, "comment_id": 99528336, "body": "I don&#39;t think there will be any consequences since python precompiles (as long as you start the test prior to switching). However if you run into an exception the reported line numbers could be wrong. Anyway, i suggest you take @JimmyEngelbrecht&#39;s approach."}, {"owner": {"reputation": 3, "user_id": 9640491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb97344d4eefd7b3c071a53840ad5141?s=128&d=identicon&r=PG", "display_name": "aids", "link": "https://stackoverflow.com/users/9640491/aids"}, "reply_to_user": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 0, "creation_date": 1559771264, "post_id": 56468340, "comment_id": 99528402, "body": "@JimmyEngelbrecht do you mean I should duplicate the repository and checkout the branch again on the duplicate?"}], "answers": [{"tags": [], "owner": {"reputation": 28098, "user_id": 86072, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dd41ab60469c4ee32c957c97fc101b9d?s=128&d=identicon&r=PG", "display_name": "LeGEC", "link": "https://stackoverflow.com/users/86072/legec"}, "is_accepted": true, "score": 1, "last_activity_date": 1559772747, "creation_date": 1559772747, "answer_id": 56468723, "question_id": 56468340, "link": "https://stackoverflow.com/questions/56468340/checking-out-a-different-branch-while-a-script-is-running/56468723#56468723", "title": "Checking out a different branch while a script is running?", "body": "<p>Have a look at <a href=\"https://git-scm.com/docs/git-worktree\" rel=\"nofollow noreferrer\"><code>git worktree</code></a> : this command allows you to have two  checkouts on your disk (in two different folders) from the same git repo.</p>\n\n<p>Another solution is : setup a CI server, which can run such tasks on another station.</p>\n"}], "owner": {"reputation": 3, "user_id": 9640491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb97344d4eefd7b3c071a53840ad5141?s=128&d=identicon&r=PG", "display_name": "aids", "link": "https://stackoverflow.com/users/9640491/aids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56468723, "answer_count": 1, "score": 0, "last_activity_date": 1559772747, "creation_date": 1559770539, "question_id": 56468340, "link": "https://stackoverflow.com/questions/56468340/checking-out-a-different-branch-while-a-script-is-running", "title": "Checking out a different branch while a script is running?", "body": "<p>I'm using git for version control of my project. I'm working on a feature on a new branch of my project that requires a very long test to be performed, like ~5 hours for the test to be completed. I've written a python script as part of this branch in order to test the feature. </p>\n\n<p>Suppose that I want to work on a different feature, on a different branch, while this test is running. Is it safe for me to open up a new terminal window and checkout the other branch to work on the other feature while the test is running on this branch?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "edited": false, "score": 1, "creation_date": 1559771365, "post_id": 56468324, "comment_id": 99528441, "body": "Just for clarification, are you essentially trying to one-hot encode? I see you&#39;ve tagged as machine learning, why is why I&#39;m asking."}, {"owner": {"reputation": 3, "user_id": 7385579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779797457973119eacafcce648584d9?s=128&d=identicon&r=PG&f=1", "display_name": "Del-m10", "link": "https://stackoverflow.com/users/7385579/del-m10"}, "reply_to_user": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "edited": false, "score": 0, "creation_date": 1559896442, "post_id": 56468324, "comment_id": 99570461, "body": "yeah trying to one-hot encode"}], "answers": [{"tags": [], "owner": {"reputation": 6204, "user_id": 189418, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/77c9e732921aac0466d328b60c41c0e3?s=128&d=identicon&r=PG", "display_name": "foglerit", "link": "https://stackoverflow.com/users/189418/foglerit"}, "is_accepted": false, "score": 2, "last_activity_date": 1559771358, "creation_date": 1559771358, "answer_id": 56468479, "question_id": 56468324, "link": "https://stackoverflow.com/questions/56468324/how-to-change-dummy-variable-from-1-to-value/56468479#56468479", "title": "How to change dummy variable from 1 to value?", "body": "<p>You can do that with <code>pivot_table</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({\n    \"number\": [10, 7, 14],\n    \"player\": [\"Messi\", \"Ronaldo\", \"Henry\"]\n})\ndf[\"value\"] = df.number\ndf[\"number\"] = df.number.astype(str)\ndf.pivot_table(values=\"value\", columns=\"player\", index=\"number\").fillna(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZJUDg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJUDg.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1559772243, "creation_date": 1559772243, "answer_id": 56468644, "question_id": 56468324, "link": "https://stackoverflow.com/questions/56468324/how-to-change-dummy-variable-from-1-to-value/56468644#56468644", "title": "How to change dummy variable from 1 to value?", "body": "<p>You can use <code>str.get_dummies</code>:</p>\n\n<pre><code>df = df.set_index('number')\ndf_out = (df['Player'].str.get_dummies()*df.index).reset_index()\ndf_out\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   number  Henry  Messi  Ronaldo\n0      10      0      7        0\n1       7      0      0       14\n2      14     10      0        0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "is_accepted": true, "score": 0, "last_activity_date": 1559773792, "creation_date": 1559773792, "answer_id": 56468867, "question_id": 56468324, "link": "https://stackoverflow.com/questions/56468324/how-to-change-dummy-variable-from-1-to-value/56468867#56468867", "title": "How to change dummy variable from 1 to value?", "body": "<pre><code>result = df[[\"number\"]].join(pd.get_dummies(df[\"player\"]).mul(df[\"number\"], axis=0))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7385579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779797457973119eacafcce648584d9?s=128&d=identicon&r=PG&f=1", "display_name": "Del-m10", "link": "https://stackoverflow.com/users/7385579/del-m10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56468867, "answer_count": 3, "score": -2, "last_activity_date": 1559816338, "creation_date": 1559770467, "last_edit_date": 1559816338, "question_id": 56468324, "link": "https://stackoverflow.com/questions/56468324/how-to-change-dummy-variable-from-1-to-value", "title": "How to change dummy variable from 1 to value?", "body": "<p>I have a dataframe df, df.head(3) looks like...</p>\n\n<pre><code>  number|Player\n  - - - - - - - \n   10   | Messi\n   7    | Ronaldo\n   14   | Henry\n</code></pre>\n\n<p>Want to get it to look like this...</p>\n\n<pre><code>Number|Messi|Ronaldo|Henry\n--------------------------\n10    |10   |0      |0\n7     |0    |7      |0\n14    |0    |0      |14\n</code></pre>\n\n<p>I've tried using map, apply and get_dummies() but the later has 1 instead of the values.</p>\n"}, {"tags": ["python", "django", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1559772497, "post_id": 56468488, "comment_id": 99528774, "body": "Thanks Tomasz. Atomic is the default for views isn&#39;t it? I want the view to read the entire file and keep track of errors it finds, if any. If there is no error, then I want to commit the INSERT(s), if there are errors, I want to roll back and include the list of errors in the response. I don&#39;t want to read the whole file into memory and do one huge bulk_create, which would be the other approach. as this file is 50K rows and another similar exercise will be 120K rows."}, {"owner": {"reputation": 15252, "user_id": 176186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a97589645d0606dc4aefc4c40301c429?s=128&d=identicon&r=PG", "display_name": "Tomasz Zieli\u0144ski", "link": "https://stackoverflow.com/users/176186/tomasz-zieli%c5%84ski"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1559772761, "post_id": 56468488, "comment_id": 99528864, "body": "@Deepstop Autocommit is the default unless you use the <code>ATOMIC_REQUESTS=True</code> setting. Based on what you say, the <code>with atomic():</code> way will do exactly what you need--the DB transaction will &quot;accumulate&quot; all your <code>INSERT</code>s and if there&#39;s no error they will be commited as soon as the atomic block exits. And if there&#39;s an error the whole transaction will be rolled back."}, {"owner": {"reputation": 15252, "user_id": 176186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a97589645d0606dc4aefc4c40301c429?s=128&d=identicon&r=PG", "display_name": "Tomasz Zieli\u0144ski", "link": "https://stackoverflow.com/users/176186/tomasz-zieli%c5%84ski"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1559773124, "post_id": 56468488, "comment_id": 99528967, "body": "By the way - even if you set <code>ATOMIC_REQUESTS=True</code>, <code>atomic()</code> would help as it would then create a savepoint which would work in a similar way (the major difference would be that a commited savepoint can still be rolled back, e.g. when the whole transaction is rolled back)."}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1559777751, "post_id": 56468488, "comment_id": 99529905, "body": "It&#39;s a little convoluted, but it works. The whole processing loop is in the with block, and at the end of the loop if the errs list is populated I just raise a generic exception and catch it outside the with block. While I have to say I like the explicit commit and rollback better, thank you for pointing me to a working solution!"}, {"owner": {"reputation": 15252, "user_id": 176186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a97589645d0606dc4aefc4c40301c429?s=128&d=identicon&r=PG", "display_name": "Tomasz Zieli\u0144ski", "link": "https://stackoverflow.com/users/176186/tomasz-zieli%c5%84ski"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1559825007, "post_id": 56468488, "comment_id": 99545977, "body": "@Deepstop I&#39;m glad that it works now! I would say that managing transactions manually is much more tricky, comparing to the &quot;magic&quot; of <code>atomic()</code>. The whole point of <code>atomic()</code> is that it <i>always</i> does the correct thing and so it&#39;s very hard to accidentally introduce a bug. Whereas the manual way is error-prone, as you need to cover each&amp;every possible scenario. Also, multiple nested <code>atomic()</code> blocks interact properly, with the outermost handling the transaction and the inner ones handling the savepoint(s)."}], "tags": [], "owner": {"reputation": 15252, "user_id": 176186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a97589645d0606dc4aefc4c40301c429?s=128&d=identicon&r=PG", "display_name": "Tomasz Zieli\u0144ski", "link": "https://stackoverflow.com/users/176186/tomasz-zieli%c5%84ski"}, "is_accepted": true, "score": 1, "last_activity_date": 1559771417, "creation_date": 1559771417, "answer_id": 56468488, "question_id": 56468315, "link": "https://stackoverflow.com/questions/56468315/replacing-django-decorator-commit-manually-with-non-atomic-requests/56468488#56468488", "title": "Replacing django decorator commit_manually with non_atomic_requests", "body": "<p>I think that the <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/transactions/#django.db.transaction.atomic\" rel=\"nofollow noreferrer\"><code>atomic()</code></a> \ndecorator/context manager provides exactly what you need\n--it commits the transaction if the underlying code succeeds and rolls back\nwhen there's an exception.</p>\n\n<p>So in your case I would just do:</p>\n\n<pre><code>with atomic():\n  process_xls_files()\n</code></pre>\n\n<p>You shouldn't need to call <code>transaction.set_autocommit()</code> and similar low-level methods manually,\nunless you have very specific needs and the \"normal\" transaction handling is not enough.</p>\n"}], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 56468488, "answer_count": 1, "score": 2, "last_activity_date": 1559771417, "creation_date": 1559770421, "question_id": 56468315, "link": "https://stackoverflow.com/questions/56468315/replacing-django-decorator-commit-manually-with-non-atomic-requests", "title": "Replacing django decorator commit_manually with non_atomic_requests", "body": "<p>I have a Django view which imports an Excel file, and if exceptions occur I would like to catch them and report them all, and roll back any saves. I'm getting a TransactionManagementError even though I have used the non_atomic_requests decorator.</p>\n\n<ol>\n<li><p>As I'm also using the login_required decorator I thought they might be interfering with each other. First I reversed the order then I removed the login required. No change.</p></li>\n<li><p>I've tried disabling automatic transactions globally. Maybe I didn't do it right but it's not the solution I want anyway.</p></li>\n<li><p>I removed the offending line of code (see below) but the same error occurred when I tried to rollback</p></li>\n</ol>\n\n<p>It is running on Python 3.7.3 with the latest Django and using SQLlite. I'm running it as a unit test right now, although perhaps I'm abusing the term. Suffice to say it's running as a Django TestCase.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@transaction.non_atomic_requests\n@login_required(login_url='/accounts/login/?next=/finance/gl_upload/')\ndef gl_upload(request):\n    transaction.set_autocommit(False)\n    if upriv(request.user, ['admin', 'finance']) == 'admin':\n        if request.method == 'POST':\n\n... file processing here ...\n\n                except Exception as e:\n                    errs.append(format('Exception \"{1}\" at row {0}\\n'.format(p['rownum'], e)))\n                if errs:\n                    transaction.rollback()\n                    rows_deleted = 0\n                    rows_inserted = 0\n                    print(''.join('Error: {0}\\n'.format(e) for e in errs))\n                else:\n                    transaction.commit()\n                    rows_deleted = Gldata.objects.filter(item='Actual', period_gte=older, period_lte=newest).delete()\n                    rows_inserted = Gldata.objects.filter(item=temp_item).update(item='Actual')\n                transaction.set_autocommit(True)\n                print('Deleted: {0}, inserted: {1}'.format(rows_delete, rows_inserted))\n                return render(request, 'gl_upload.html', {'inserted': rows_inserted, 'removed': rows_deleted, 'errors': errs})\n            else:\n                return render(request, 'gl_upload.html', {'form': form})\n        else:\n            form = uploadForm()\n            return render(request, 'gl_upload.html', {'form': form})\n\n</code></pre>\n\n<p>I receive a TransactionManagementError on the set_autocommit indicating that an atomic block is active even though I understood that the decorator would disable it. A few years back I used the old commit_manually decorator which worked just fine.</p>\n\n<p>File \"C:\\Users\\csullivan\\responsive\\finance\\views.py\", line 25, in gl_upload\n    transaction.set_autocommit(False)\n  File \"C:\\Users\\csullivan\\responsive\\env\\lib\\site-packages\\django\\db\\transaction.py\", line 30, in set_autocommit\n    return get_connection(using).set_autocommit(autocommit)\n  File \"C:\\Users\\csullivan\\responsive\\env\\lib\\site-packages\\django\\db\\backends\\base\\base.py\", line 394, in set_autocommit\n    self.validate_no_atomic_block()\n  File \"C:\\Users\\csullivan\\responsive\\env\\lib\\site-packages\\django\\db\\backends\\base\\base.py\", line 433, in validate_no_atomic_block\n    \"This is forbidden when an 'atomic' block is active.\")\ndjango.db.transaction.TransactionManagementError: This is forbidden when an 'atomic' block is active.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 4, "creation_date": 1559770482, "post_id": 56468289, "comment_id": 99528101, "body": "<code>\\b</code> matches the boundary between a word character and a non-word character.  <code>&lt;</code> is a non-word character, as is the space before it in your string, so <code>\\b</code> does&#39;t match there."}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 1, "creation_date": 1559770588, "post_id": 56468289, "comment_id": 99528134, "body": "cleanAttend75Case is not defined"}], "answers": [{"tags": [], "owner": {"reputation": 674, "user_id": 11443248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd00135ccb2cd2cd510a706b1932a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Willmon", "link": "https://stackoverflow.com/users/11443248/kyle-willmon"}, "is_accepted": true, "score": 1, "last_activity_date": 1559770882, "creation_date": 1559770882, "answer_id": 56468401, "question_id": 56468289, "link": "https://stackoverflow.com/questions/56468289/string-replace-problem-with-inferior-symbol/56468401#56468401", "title": "String replace problem with inferior symbol", "body": "<p>As mentioned in the comments, the issue is that <code>\\b</code> only matches the boundary between a word and non-word character. From <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>\\b</p>\n  \n  <p>Matches the empty string, but only at the beginning or end of a word.\n  A word is defined as a sequence of word characters. Note that\n  formally, \\b is defined as the boundary between a \\w and a \\W\n  character (or vice versa), or between \\w and the beginning/end of the\n  string</p>\n</blockquote>\n\n<p>In the string you gave, the space character (<code></code>) and the less than character (<code>&lt;</code>) are both non-word characters. So <code>\\b</code> does not match the empty space between them.</p>\n\n<p>For an alternate way to solve this problem, consider using <code>split()</code> to split the string into words and comparing each word against the replacement patterns like so:</p>\n\n<pre><code>replacements = {'toot': 'titi-',\n                '&lt;75%': 'NONE'}\n\ndef clean75Case(text_page):\n    words = text_page.split()\n    return ' '.join(replacements.get(w, w) for w in words)\n\nif __name__ == '__main__':\n    print(clean75Case(\"toot iiii &lt;75%\"))\n</code></pre>\n"}], "owner": {"reputation": 1119, "user_id": 2350719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XOKNf.jpg?s=128&g=1", "display_name": "L. Quastana", "link": "https://stackoverflow.com/users/2350719/l-quastana"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1559772275, "accepted_answer_id": 56468401, "answer_count": 1, "score": -1, "last_activity_date": 1559771012, "creation_date": 1559770295, "last_edit_date": 1559771012, "question_id": 56468289, "link": "https://stackoverflow.com/questions/56468289/string-replace-problem-with-inferior-symbol", "closed_reason": "Duplicate", "title": "String replace problem with inferior symbol", "body": "<p>I would like to replace the string \"&lt;75%\" by \"NONE\".\nI have write this function but it doesnt match :( </p>\n\n<pre><code>replacements = {'toot': 'titi-',\n                '&lt;75%': 'NONE'}\n\ndef replace(match):\n\n    return replacements[match.group(0)]\n\ndef clean75Case(text_page):\n    return re.sub('|'.join(r'\\b%s\\b' % re.escape(s) for s in replacements),\n           replace, text_page)\n\nif __name__ == '__main__':\n    print(clean75Case(\"toot iiii &lt;75%\"))\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1559771555, "post_id": 56468269, "comment_id": 99528495, "body": "&quot;I want to call this variable, from a function inside this class, which is a staticmethod. I can&#39;t seem to find the right way to do this.&quot; You cannot access state from a static method, that is the <i>defining feature</i> of a staticmethod. Just use an instance method. staticmethods are practically pointless in Python, mostly just for organizational purposes"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 3, "creation_date": 1559771639, "post_id": 56468269, "comment_id": 99528531, "body": "<i>Which</i> <code>myvariable</code> do you intend to access?  <code>__init__()</code> is called to initialize each instance of a class, and there can be any number of instances - and a <code>@staticmethod</code> has no connection to any particular instance.  (Note that you&#39;d have to assign to <code>self.myvariable</code> for that to apply - as you&#39;ve currently written it, <code>myvariable</code> is a local, and doesn&#39;t even exist after <code>__init__()</code> is finished.)"}, {"owner": {"reputation": 310, "user_id": 7543250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3uDj4.jpg?s=128&g=1", "display_name": "Daichi Jameson", "link": "https://stackoverflow.com/users/7543250/daichi-jameson"}, "edited": false, "score": 1, "creation_date": 1559774377, "post_id": 56468269, "comment_id": 99529274, "body": "This might be an instance of an <a href=\"https://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY Problem</a>. What exactly are you trying to accomplish with the static variable?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9990443"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1560026189, "post_id": 56468269, "comment_id": 99606805, "body": "@jasonharper I am trying to access the variable in the <b>init</b>, because I may have different instances of that class, so each one may be pointing at a different working directory.  I assumed that since I create myclass.myvariable in the <b>init</b>, that is also creating an instance at class/instance level, not just at the function level, but from your comment, it seems that the only way to do so is to create a variable in the class header, before the <b>init</b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9990443"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560026655, "post_id": 56468269, "comment_id": 99606926, "body": "@juanpa.arrivillaga not sure why you say that static methods are pointless in python. If I need just a function and not the whole class, and I don&#39;t want to make functions outside a class. I can change it as instance method; but my class may have another 40 functions in it; so wouldn&#39;t that impact performances?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9990443"}, "reply_to_user": {"reputation": 310, "user_id": 7543250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3uDj4.jpg?s=128&g=1", "display_name": "Daichi Jameson", "link": "https://stackoverflow.com/users/7543250/daichi-jameson"}, "edited": false, "score": 0, "creation_date": 1560026798, "post_id": 56468269, "comment_id": 99606965, "body": "@DaichiJameson not really an xy problem; I can create a variable and access it in a class method, but can&#39;t do the same with a static method, so I was asking how you do that. If that can&#39;t be done; and there is a motivation about that; then I will just change my code.Saying that it is an XY problem may imply that the question was not clearly understood, and as such, it has to be clarified further"}], "answers": [{"tags": [], "owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "is_accepted": false, "score": 0, "last_activity_date": 1559774139, "last_edit_date": 1559774139, "creation_date": 1559774037, "answer_id": 56468898, "question_id": 56468269, "link": "https://stackoverflow.com/questions/56468269/use-variables-created-in-the-init-of-a-class-into-staticmethod-functions/56468898#56468898", "title": "use variables created in the init of a class, into staticmethod functions", "body": "<p>myVariable is only a temporary variable in this case, that only is visible in the <code>__init__</code> method, not even in other methods of the class. You could use myclass.myvariable also in the <code>__init__</code> method.</p>\n\n<p>You can do it as follows. I also added an instance counter:</p>\n\n<pre><code>class myclass:\n    counter= 0\n    def __init__(self):\n        myclass.myvariable = os.cwd()\n        myclass.counter+= 1\n\n    @staticmethod\n    def myfunction(someparameter):\n        print(myclass.myvariable)\n        print(myclass.counter)\n        print(someparameter)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9990443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559774139, "creation_date": 1559770151, "last_edit_date": 1559770210, "question_id": 56468269, "link": "https://stackoverflow.com/questions/56468269/use-variables-created-in-the-init-of-a-class-into-staticmethod-functions", "title": "use variables created in the init of a class, into staticmethod functions", "body": "<p>I have a class; which in its constructor, is assigning a variable.</p>\n\n<p>I want to call this variable, from a function inside this class, which is a staticmethod. I can't seem to find the right way to do this.</p>\n\n<pre><code>class myclass:\n    def __init__(self):\n        myvariable = os.cwd()\n\n    @staticmethod\n    def myfunction(someparameter)\n\n        print(myclass.myvariable)\n        print(someparameter)\n</code></pre>\n\n<p>When I run the class from python, I get an error that <code>myvariable</code> does not exist</p>\n\n<pre><code>mytestclass = myclass\nmyclass.myfunction(\"foo\")\n</code></pre>\n\n<p>I tried to use both <code>self.myvariable</code> and <code>myvariable</code>, but it does not make any difference. I didn't use <code>@classmethod</code> because if I would call <code>cls.myvariable</code>, I would not get that specific instance of myclass; and if I have multiple instances I may end up with issues.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 0, "creation_date": 1559770165, "post_id": 56468217, "comment_id": 99528001, "body": "what is the desired output in your example ?"}, {"owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "reply_to_user": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 0, "creation_date": 1559770277, "post_id": 56468217, "comment_id": 99528035, "body": "print all of the tuples from A for each item in B, which exists in B"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1559770299, "post_id": 56468217, "comment_id": 99528045, "body": "What does it mean for <code>[&quot;is&quot;, &quot;a&quot;]</code> to exist in a string? Do the words have to appear in that order? Can there be other words between them? Can they be inside other words, e.g. &quot;is&quot; within &quot;this&quot;?"}, {"owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "edited": false, "score": 0, "creation_date": 1559770349, "post_id": 56468217, "comment_id": 99528061, "body": "Have to be in the same order, with no words in between. Also not within other words"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1559770587, "post_id": 56468217, "comment_id": 99528133, "body": "To amplify @AlexHall <code>&#39;a&#39;</code> is <code>in</code> <code>&quot;Adam is going to school&quot;</code> -- it&#39;s the third letter. You&#39;ll need to tokenize the words if you only want to match words."}, {"owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "edited": false, "score": 0, "creation_date": 1559770950, "post_id": 56468217, "comment_id": 99528291, "body": "I have updated another approach which works, but can it be made more optimal"}, {"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1559771823, "post_id": 56468217, "comment_id": 99528586, "body": "<code>all([word in &quot;This is a bat&quot; for word in [&quot;is&quot;, &quot;a&quot;]])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "edited": false, "score": 0, "creation_date": 1559771593, "post_id": 56468379, "comment_id": 99528515, "body": "Can it be optimized, it takes long on larger lists"}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1559771760, "last_edit_date": 1559771760, "creation_date": 1559770790, "answer_id": 56468379, "question_id": 56468217, "link": "https://stackoverflow.com/questions/56468217/how-to-check-if-any-tuples-exists-for-a-list-of-strings/56468379#56468379", "title": "How to check if any tuples exists for a list of strings", "body": "<pre><code>import re\n\nA = [[\"is\", \"a\"], [\"is\", \"going\"], [\"to\", \"the\"]]\njoined_A = [\" \".join(a) for a in A]\n\nB = [\"This is...a bat!\", \"Adam is going to the school\"]\n\nfor s in B:\n    print(s)\n    normalised = \" \".join(re.findall(r\"\\b\\w+\\b\", s))\n\n    for a, joined in zip(A, joined_A):\n        if joined in normalised:\n            print(a)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>This is...a bat!\n['is', 'a']\nAdam is going to the school\n['is', 'going']\n['to', 'the']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "edited": false, "score": 0, "creation_date": 1559771587, "post_id": 56468417, "comment_id": 99528507, "body": "Can it be optimized, it takes long on larger lists"}], "tags": [], "owner": {"reputation": 190, "user_id": 7006385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ee3ecda37b1ad30811578818ff2c76?s=128&d=identicon&r=PG&f=1", "display_name": "oste-popp", "link": "https://stackoverflow.com/users/7006385/oste-popp"}, "is_accepted": false, "score": 0, "last_activity_date": 1559770981, "creation_date": 1559770981, "answer_id": 56468417, "question_id": 56468217, "link": "https://stackoverflow.com/questions/56468217/how-to-check-if-any-tuples-exists-for-a-list-of-strings/56468417#56468417", "title": "How to check if any tuples exists for a list of strings", "body": "<p>You could use ' '.join() to merge the list from A, then see if it is in the string in B:</p>\n\n<pre><code>from collections import defaultdict\n\nmatches = defaultdict(list)\nfor match_string in A:\n    for string in B:\n        if ' '.join(match_string) in string:\n            matches[string].append(match_string)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n    'Adam is going to the school': [['is', 'going'], ['to', 'the']],\n    'This is a bat': [['is', 'a']]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "is_accepted": false, "score": 0, "last_activity_date": 1559773023, "last_edit_date": 1559773023, "creation_date": 1559772413, "answer_id": 56468666, "question_id": 56468217, "link": "https://stackoverflow.com/questions/56468217/how-to-check-if-any-tuples-exists-for-a-list-of-strings/56468666#56468666", "title": "How to check if any tuples exists for a list of strings", "body": "<p><strong>Code:</strong></p>\n\n<pre><code>from re import search\n\nA = [[\"is\", \"a\"], [\"is\", \"going\"], [\"to\", \"the\"]]\nB = [\"This is a bat\", \"Adam is going to the school\"]\n\np_A = [\"\\\\s\".join(i) for i in A]\nmatches = [(s, [A[i] for i, e in enumerate(p_A) if search(e, s)]) for s in B]\nfor string, patterns in matches:\n    print(\"%s exists in \\\"%s\\\"\" % (\" and \".join(\"[%s]\" % \", \".join(\"\\\"%s\\\"\" % s for s in p) for p in patterns), string))\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[\"is\", \"a\"] exists in \"This is a bat\"\n[\"is\", \"going\"] and [\"to\", \"the\"] exists in \"Adam is going to the school\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": false, "score": 0, "last_activity_date": 1559775706, "creation_date": 1559775706, "answer_id": 56469090, "question_id": 56468217, "link": "https://stackoverflow.com/questions/56468217/how-to-check-if-any-tuples-exists-for-a-list-of-strings/56469090#56469090", "title": "How to check if any tuples exists for a list of strings", "body": "<pre><code>from sklearn.feature_extraction.text import CountVectorizer\nfrom io import StringIO\n\nA = [[\"is\", \"a\"], [\"is\", \"going\"], [\"to\", \"the\"]]\njoined_A = [\" \".join(a) for a in A]\n\nB = [\"This is a bat\", \"Adam is going to the school\"]\n\ndef tokenizer(text):\n    return text.split()\n\nvec = CountVectorizer(ngram_range = (1,2), tokenizer = tokenizer)\n\nfor string in B:\n    vec.fit_transform(StringIO(string))\n    wordlist = []\n    for word, prev in zip(joined_A, A):\n        if word in vec.get_feature_names():\n            wordlist.append(prev)\n    print(f\"{wordlist} exists in {string}\")\n\n\n#Output\n[['is', 'a']] exists in This is a bat\n[['is', 'going'], ['to', 'the']] exists in Adam is going to the school\n</code></pre>\n\n<p>I'm using sklearns CountVectorizer to create lists of all words in the string, then check whether our words are there or not.</p>\n\n<p>I used @Alex Hall joining of words in A since you wanted them to be considered a pair.</p>\n\n<p>We normally wouldn't have to define the function tokenizer, but since sklearns CountVectorizer automatically removes some words like \"a\" even with stop words turned off we needed to define it here.</p>\n\n<p>ngram_range in our count vectorizer changes how many consecutive words are considered unique. If we left it at 1, it would only be 1 word. 1,2 makes it a most 2 words. You will have to increase the number 2 to be as large as your longest list in A. If all your combos of A are 2 words then you will want to set it to (2,2) to increase speed.</p>\n\n<p>Finally we just loop around the strings. We use <code>get_feature_names</code> to pull all the different strings from B, then check if A is there or not. Then finally print the answer.</p>\n"}], "owner": {"reputation": 19, "user_id": 3623843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1591f84fc9e88ddd674bae0266a63e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3623843", "link": "https://stackoverflow.com/users/3623843/user3623843"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1559775706, "creation_date": 1559769895, "last_edit_date": 1559770917, "question_id": 56468217, "link": "https://stackoverflow.com/questions/56468217/how-to-check-if-any-tuples-exists-for-a-list-of-strings", "title": "How to check if any tuples exists for a list of strings", "body": "<p>I'm trying to check how many tuples from a list of tuples exists in another list of string and I want all of the tuples associated to the particular string as well.</p>\n\n<p>Example:</p>\n\n<pre><code>A = [[\"is\", \"a\"],[\"is\", \"going\"],[\"to\", \"the\"]]\n\nB = [\"This is a bat\", \"Adam is going to the school\"]\n</code></pre>\n\n<p>I want the result in terms of which tuple exist in which string.\n<strong>DESIRED OUTPUT</strong></p>\n\n<pre><code>[\"is\", \"a\"] exists in \"This is a bat\"\n\n[\"is\", \"going\"] and [\"to\", \"the\"] exists in \"Adam is going to the school\"\n</code></pre>\n\n<p>I have tried the below code, but it only gives all of the tuples which exists in list B</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>A = [[\"is\", \"a\"],[\"is\", \"going\"],[\"to\", \"the\"]]\nB = [\"This is a bat\", \"Adam is going to the school\"]\nmatching = [s for s in B if any(x in s for x in A)]\n</code></pre>\n\n<p><strong>EDIT:</strong>\nAnother approach tried</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>A = [[\"is\", \"a\"],[\"is\", \"going\"],[\"to\", \"the\"]]\nB = [\"This is a bat\", \"Adam is going to the school\"]\n    for i in range(len(B)):\n        flag = False\n        keywords = \"\"\n        for a in A:\n            if a[0]+\" \"+a[1] in B[i]:\n                if(keywords == \"\"):\n                    keywords = a[0]+\" \"+a[1] \n                else:\n                    keywords = keywords + \", \" + a[0]+\" \"+a[1] \n        print(keywords)\n</code></pre>\n\n<p>This approach works fine, can it be more optimized ?</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 11569999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BEz7L.png?s=128&g=1", "display_name": "moski", "link": "https://stackoverflow.com/users/11569999/moski"}, "edited": false, "score": 0, "creation_date": 1559814456, "post_id": 56468446, "comment_id": 99540297, "body": "It is only producing 1 element of 14"}], "tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": false, "score": 1, "last_activity_date": 1559771191, "creation_date": 1559771191, "answer_id": 56468446, "question_id": 56468212, "link": "https://stackoverflow.com/questions/56468212/beautifulsoup-elements-output-to-list/56468446#56468446", "title": "BeautifulSoup elements output to list", "body": "<pre class=\"lang-py prettyprint-override\"><code>new = []\ncount = 1\nfor attraction in attraction_place:\n    while count &lt; 15:\n        text = attraction.text\n        new.append(text)\n        count += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 11569999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BEz7L.png?s=128&g=1", "display_name": "moski", "link": "https://stackoverflow.com/users/11569999/moski"}, "edited": false, "score": 0, "creation_date": 1559814594, "post_id": 56468542, "comment_id": 99540371, "body": "Excellent! You made my day QHarr."}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 1, "last_activity_date": 1559775043, "last_edit_date": 1559775043, "creation_date": 1559771643, "answer_id": 56468542, "question_id": 56468212, "link": "https://stackoverflow.com/questions/56468212/beautifulsoup-elements-output-to-list/56468542#56468542", "title": "BeautifulSoup elements output to list", "body": "<p>A nice easy way is to take the <code>alt</code> attribute of the photos. This gets clean text output and only 14 without any need for slicing/indexing.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nr = requests.get('https://www.planetware.com/tourist-attractions-/oslo-n-osl-oslo.htm')\nsoup = bs(r.content, 'lxml')\nattractions = [item['alt'] for item in soup.select('.photo [alt]')]\nprint(attractions)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 7296225, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GYYA_NToEt4/AAAAAAAAAAI/AAAAAAAAAEc/MDyrtJDvZkA/photo.jpg?sz=128", "display_name": "Ourik gruzdev", "link": "https://stackoverflow.com/users/7296225/ourik-gruzdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1559772014, "creation_date": 1559772014, "answer_id": 56468599, "question_id": 56468212, "link": "https://stackoverflow.com/questions/56468212/beautifulsoup-elements-output-to-list/56468599#56468599", "title": "BeautifulSoup elements output to list", "body": "<p>You can use slice.</p>\n\n<pre><code>for attraction in attraction_place[:14]:\n    print(attraction.text)\n    type(attraction)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11569999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BEz7L.png?s=128&g=1", "display_name": "moski", "link": "https://stackoverflow.com/users/11569999/moski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 56468542, "answer_count": 3, "score": 1, "last_activity_date": 1559775043, "creation_date": 1559769870, "last_edit_date": 1559771657, "question_id": 56468212, "link": "https://stackoverflow.com/questions/56468212/beautifulsoup-elements-output-to-list", "title": "BeautifulSoup elements output to list", "body": "<p>I have an output using BeautifulSoup. </p>\n\n<ol>\n<li><p>I need to convert the output from <em>'type' 'bs4.element.Tag'</em> to a list and export the list into a DataFrame column, named  <em>COLUMN_A</em></p></li>\n<li><p>I want my output to stop at the 14th element <em>(the last three <code>h2</code> are useless)</em></p></li>\n</ol>\n\n<p>My code:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\n\nurl = 'https://www.planetware.com/tourist-attractions-/oslo-n-osl-oslo.htm'\nurl_get = requests.get(url)\nsoup = BeautifulSoup(url_get.content, 'html.parser')\nattraction_place=soup.find_all('h2', class_=\"sitename\")    \n\nfor attraction in attraction_place:\n    print(attraction.text)\n    type(attraction)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1  Vigeland Sculpture Park\n2  Akershus Fortress\n3  Viking Ship Museum\n4  The National Museum\n5  Munch Museum\n6  Royal Palace\n7  The Museum of Cultural History\n8  Fram Museum\n9  Holmenkollen Ski Jump and Museum\n10  Oslo Cathedral\n11  City Hall (R\u00e5dhuset)\n12  Aker Brygge\n13  Natural History Museum &amp; Botanical Gardens\n14  Oslo Opera House and Annual Music Festivals\nWhere to Stay in Oslo for Sightseeing\nTips and Tours: How to Make the Most of Your Visit to Oslo\nMore Related Articles on PlanetWare.com\n</code></pre>\n\n<p>I expect a list like: </p>\n\n<pre><code>attraction=[Vigeland Sculpture Park, Akershus Fortress, ......]\n</code></pre>\n\n<p>Thank you very much in advance.</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1559770194, "post_id": 56468166, "comment_id": 99528008, "body": "<code>handler.namer = lambda name: name + &#39;.log&#39;</code>"}, {"owner": {"reputation": 428, "user_id": 7881582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wVa2.png?s=128&g=1", "display_name": "Vikto", "link": "https://stackoverflow.com/users/7881582/vikto"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1559817303, "post_id": 56468166, "comment_id": 99541814, "body": "@hoefling it works! Thanks. But do you know how to get <code>backupCount</code> back? It stopped working so log files are created unstoppably."}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 7881582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wVa2.png?s=128&g=1", "display_name": "Vikto", "link": "https://stackoverflow.com/users/7881582/vikto"}, "edited": false, "score": 1, "creation_date": 1559787010, "post_id": 56469106, "comment_id": 99531386, "body": "I do not want to consider this solution because it will manually open and write my logs. Besides, I would need an entire script to control log purge and creation of log files based on current date. However, thanks for providing a solution."}], "tags": [], "owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "is_accepted": false, "score": 0, "last_activity_date": 1559775856, "creation_date": 1559775856, "answer_id": 56469106, "question_id": 56468166, "link": "https://stackoverflow.com/questions/56468166/how-to-add-current-date-as-prefix-in-log-file-using-logging-from-python/56469106#56469106", "title": "How to add current date as prefix in log file using logging from Python", "body": "<p>I'd suggest this:</p>\n\n<pre><code>from datetime import date\n\nlog_file = \"../Path/To/Logs/Folder/log-\" + date.today() + \".log\"\nlogger = open(log_file, \"w+\")\nlogger.close() # Do this to make sure python let's go of the file.\n</code></pre>\n\n<p>What this does is create a log file named <code>log-year-month-date.log</code> in the path which you chose, as long as the file is not there. However, python holds onto the file, so you need to <code>close()</code> it before you start logging to it.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 428, "user_id": 7881582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wVa2.png?s=128&g=1", "display_name": "Vikto", "link": "https://stackoverflow.com/users/7881582/vikto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559786693, "creation_date": 1559769592, "last_edit_date": 1559786693, "question_id": 56468166, "link": "https://stackoverflow.com/questions/56468166/how-to-add-current-date-as-prefix-in-log-file-using-logging-from-python", "title": "How to add current date as prefix in log file using logging from Python", "body": "<p>I would like to name log files based on the current date using Python's <code>logging</code> library such as the following example:</p>\n\n<pre><code>log/ \n\n    06-06-2019.log\n    07-06-2019.log\n    08-06-2019.log\n\n</code></pre>\n\n<p>However, the code I was able to write...</p>\n\n<pre><code>handler = TimedRotatingFileHandler(\n        'log/log',\n        when = 'midnight',\n        interval = 1,\n        utc = True,\n        backupCount = 9\n)\n</code></pre>\n\n<p>... produces these log files:</p>\n\n<pre><code>log/\n\n   log\n   log.2019-06-06\n   log.2019-06-07\n   log.2019-06-08\n</code></pre>\n\n<p>Is there any event to calculate file name? I have read many SO questions and the official docs but have found nothing useful to this problem.</p>\n\n<p>How do I solve this? If possible, I would like a solution using <code>logging</code>library.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["python", "python-3.x", "datetime", "datetime-format", "python-datetime"], "comments": [{"owner": {"reputation": 10332, "user_id": 302343, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RrFm0.png?s=128&g=1", "display_name": "Timur", "link": "https://stackoverflow.com/users/302343/timur"}, "edited": false, "score": 0, "creation_date": 1559773077, "post_id": 56468152, "comment_id": 99528951, "body": "Is it correct to assume that this value is a &quot;unix timestamp&quot;  - time since the epoch? Is it actually in microseconds, not in milliseconds?"}], "answers": [{"tags": [], "owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "is_accepted": false, "score": 2, "last_activity_date": 1559770444, "last_edit_date": 1559770444, "creation_date": 1559769659, "answer_id": 56468180, "question_id": 56468152, "link": "https://stackoverflow.com/questions/56468152/how-to-convert-milliseconds-to-date-and-time-format/56468180#56468180", "title": "How to convert milliseconds to date and time format?", "body": "<p>To convert <a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow noreferrer\">unix timestamp</a> to datetime, you can use <a href=\"https://docs.python.org/3/library/datetime.html#datetime.date.fromtimestamp\" rel=\"nofollow noreferrer\"><code>datetime.fromtimestamp()</code></a>. The only problem, that your timestamp is in miliseconds, but function expect timestamp in seconds. To cut miliseconds you can divide timestamp to 1000.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>from datetime import datetime\n\na = 1557975599999\ndate = datetime.fromtimestamp(a // 1000)\nprint(date)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>2019-05-16 05:59:59\n</code></pre>\n\n<hr>\n\n<p><strong>Upd.</strong></p>\n\n<p><a href=\"https://stackoverflow.com/users/3555845/daniel\">@Daniel</a> in comments noticed that <code>fromtimestamp()</code> accept floats, so we can save miliseconds from original timestamp. All we need is just to remove one symbol :D</p>\n\n<pre><code>date = datetime.fromtimestamp(a / 1000)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2076, "user_id": 7359176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FqgFb.jpg?s=128&g=1", "display_name": "Niels Henkens", "link": "https://stackoverflow.com/users/7359176/niels-henkens"}, "is_accepted": false, "score": 0, "last_activity_date": 1559814765, "last_edit_date": 1559814765, "creation_date": 1559770002, "answer_id": 56468238, "question_id": 56468152, "link": "https://stackoverflow.com/questions/56468152/how-to-convert-milliseconds-to-date-and-time-format/56468238#56468238", "title": "How to convert milliseconds to date and time format?", "body": "<p>With Pandas\u2019 <code>to_datetime()</code></p>\n\n<pre><code>import pandas as pd\n\npd.to_datetime(a, unit='ms')\n\n# Or with a dataframe(column):\ndf['date'] = pd.to_datetime(df['Millisecond_time'], unit='ms')\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 11606256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15764764c14c54949c6fd8947eda526f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Harris", "link": "https://stackoverflow.com/users/11606256/paul-harris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2200, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1559814765, "creation_date": 1559769516, "last_edit_date": 1559772957, "question_id": 56468152, "link": "https://stackoverflow.com/questions/56468152/how-to-convert-milliseconds-to-date-and-time-format", "title": "How to convert milliseconds to date and time format?", "body": "<p>I have a value in milliseconds in a Python program. For example: <code>1557975599999</code></p>\n\n<p>And I would like to convert it to a string with days and hours, minutes, seconds. How can I do this?</p>\n"}, {"tags": ["python", "django", "postgresql", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 464, "user_id": 784831, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5cb215fabc8c127a447835ebd99c2882?s=128&d=identicon&r=PG", "display_name": "Noi Sek", "link": "https://stackoverflow.com/users/784831/noi-sek"}, "edited": false, "score": 0, "creation_date": 1559773142, "post_id": 56468312, "comment_id": 99528979, "body": "I wouldn&#39;t expect DRF to optimize the query, the curious thing here is that DRF actively worsens query performance depending on how it&#39;s served. I would expect all DRF view types to perform equivalently under normal conditions."}], "tags": [], "owner": {"reputation": 597, "user_id": 6682340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dff15138e7ba49740faa9368b0bff6d?s=128&d=identicon&r=PG", "display_name": "Krukas", "link": "https://stackoverflow.com/users/6682340/krukas"}, "is_accepted": false, "score": -1, "last_activity_date": 1559770409, "creation_date": 1559770409, "answer_id": 56468312, "question_id": 56468148, "link": "https://stackoverflow.com/questions/56468148/what-causes-drf-viewsets-to-perform-inefficient-sql-queries/56468312#56468312", "title": "What causes DRF Viewsets to perform inefficient SQL queries?", "body": "<p>Take look at this answer <a href=\"https://stackoverflow.com/questions/26593312/optimizing-database-queries-in-django-rest-framework\">Optimizing database queries in Django REST framework</a>. DRf does not automatically optimize you query, you still need to do this yourself.</p>\n\n<p>And if you want a little bit more performance improvement take a look at this app <a href=\"https://github.com/K0Te/drf-serializer-cache\" rel=\"nofollow noreferrer\">https://github.com/K0Te/drf-serializer-cache</a></p>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 784831, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5cb215fabc8c127a447835ebd99c2882?s=128&d=identicon&r=PG", "display_name": "Noi Sek", "link": "https://stackoverflow.com/users/784831/noi-sek"}, "is_accepted": true, "score": 2, "last_activity_date": 1559844521, "creation_date": 1559844521, "answer_id": 56482947, "question_id": 56468148, "link": "https://stackoverflow.com/questions/56468148/what-causes-drf-viewsets-to-perform-inefficient-sql-queries/56482947#56482947", "title": "What causes DRF Viewsets to perform inefficient SQL queries?", "body": "<p>The stats here are a misnomer, this happens because the DRF browsable API performs an extra request for each method the endpoint accepts.</p>\n\n<p>Correspondingly, if you were to perform a GET only <code>@apiview</code> at 1x reference speed, an endpoint with GET, PUT, PATCH, DELETE, would appear to perform 4x slower due to performing 3 additional requests.</p>\n\n<p>DRF's browsable API obscures the true speed / querycount when more than one request method is available on an endpoint, and in order to see the real performance of an endpoint you should request it programmatically or use <code>?format=json</code>.</p>\n\n<p>I discovered this when I realized through profiling that the permissions class was being hit 6 times:</p>\n\n<p><a href=\"https://stackoverflow.com/a/52731612/784831\">https://stackoverflow.com/a/52731612/784831</a></p>\n"}], "owner": {"reputation": 464, "user_id": 784831, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5cb215fabc8c127a447835ebd99c2882?s=128&d=identicon&r=PG", "display_name": "Noi Sek", "link": "https://stackoverflow.com/users/784831/noi-sek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 56482947, "answer_count": 2, "score": 0, "last_activity_date": 1559844521, "creation_date": 1559769499, "last_edit_date": 1559769824, "question_id": 56468148, "link": "https://stackoverflow.com/questions/56468148/what-causes-drf-viewsets-to-perform-inefficient-sql-queries", "title": "What causes DRF Viewsets to perform inefficient SQL queries?", "body": "<p>Environment:</p>\n\n<pre><code>Django==\"2.2\"\nPython==\"3.6.8\"\ndebug_toolbar==\"1.11\"\nrest_framework==\"3.8.2\"\n</code></pre>\n\n<p>Background: </p>\n\n<p>In switching away from function based DRF endpoints to class-based views / viewsets I am finding that class-based views perform slightly better without nested relations and much worse with nested relations.</p>\n\n<p>Pseudocode Model Context:</p>\n\n<pre><code>Creator:\n  ForeignKey.Shipments[]\n\nUnit:\n  ForeignKey.Shipments[]\n\nShipment:\n  ForeignKey.Addresses[]\n  ForeignKey.Creator\n  ForeignKey.Unit\n\nAddress:\n  Street\n  City\n  State\n</code></pre>\n\n<p>Noteworthy Serializer Context:</p>\n\n<pre><code>Unit:\n  Meta:\n    Depth = 1\n\nCreator:\n  Meta:\n    Depth = Infinite\n</code></pre>\n\n<p>When comparing Viewsets of the above structure to the equivalent <code>@apiview</code>, I'm finding:</p>\n\n<ul>\n<li><code>/addresses</code> performs slightly better on SQL querycount (0.9x), with 1.1x CPU overhead (expected)</li>\n<li><code>/creators</code> performs slightly worse on SQL querycount (1.1x), with 3.9x CPU overhead (expected)</li>\n<li><code>/creators/1</code> with a Read-Only Viewset performs slightly better on SQL querycount (0.9x), with 3.4x CPU overhead (unexpected)</li>\n<li><code>/creators/1</code> with a Writeable Viewset performs significantly worse on SQL querycount (3.3x), with significant 5.9x CPU overhead (unexpected)</li>\n<li><code>/units/1</code> with a Writeable Viewset performs profoundly worse on SQL querycount (4.4x), with a massive 7.9x CPU overhead (VERY unexpected)</li>\n<li>Both forms of viewsets do not benefit from / disregard <code>prefetch_related</code> usage from <code>get_queryset</code> entirely (VERY unexpected)</li>\n</ul>\n\n<p>Breakdown of retrieve against <code>@apiview</code>:</p>\n\n<p><code>(240 queries including 235 similar and 120 duplicates)</code></p>\n\n<p>Breakdown of retrieve against <code>viewsets.ReadOnlyModelViewSet</code>:</p>\n\n<p><code>(208 queries including 200 similar and 78 duplicates )</code></p>\n\n<p>Breakdown of retrieve against <code>viewsets.ModelViewSet</code>:</p>\n\n<p><code>(803 queries including 801 similar and 801 duplicates )</code></p>\n\n<p>All of this seems very unintuitive.</p>\n\n<p>How is it possible for two types of endpoints using the exact same serializer to perform so much differently? </p>\n\n<p>In comparison to Function based views it seems that Classviews and Viewsets incur a <em>massive</em> CPU and SQL performance hit where foreignkeys are involved for no real reason that I can find. </p>\n\n<p>I expect N+1 queries to perform poorly, what I don't expect is for them to perform <strong>more</strong> poorly depending on which style of DRF endpoint serves them.</p>\n\n<p>Is there an explanation for why this happens?</p>\n"}, {"tags": ["python", "pandas", "vectorization"], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559771393, "post_id": 56468354, "comment_id": 99528445, "body": "Is that on df1 or df2? Ideally, should be df1. df2 is really an intermediate step."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1559770669, "creation_date": 1559770669, "answer_id": 56468354, "question_id": 56468112, "link": "https://stackoverflow.com/questions/56468112/pandas-dataframe-slicing-and-manipulation/56468354#56468354", "title": "Pandas dataframe slicing and manipulation", "body": "<p>You can try do with </p>\n\n<pre><code>g=df.groupby(['Location','Key'])\n(g.first()-g.last().groupby('Location').shift()).mean(level=0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559773192, "post_id": 56468569, "comment_id": 99528993, "body": "Please specify which df you mean, df1 or df2"}, {"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559773331, "post_id": 56468569, "comment_id": 99529026, "body": "This also gives TypeError: unsupported operand type(s) for -: &#39;str&#39; and &#39;str&#39;"}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559773532, "post_id": 56468569, "comment_id": 99529070, "body": "df1, and your error is because either your key or you date columns are strings (whichever one you tried). Use <code>df[&#39;Date&#39;] = pd.to_datetime(df[&#39;Date&#39;])</code> to change your date column to the datetime64[ns] , or<code>df[&#39;key&#39;] = df[&#39;key&#39;].astype(&#39;int&#39;)</code> to change your key column to int."}, {"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559774548, "post_id": 56468569, "comment_id": 99529308, "body": "I changed to datetime but still I get a traceback. See EDIT."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559774748, "post_id": 56468569, "comment_id": 99529352, "body": "please check <code>df1.dtypes</code> and tell me the output."}, {"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559776083, "post_id": 56468569, "comment_id": 99529595, "body": "Location: object, Date: datetime64pns], Key: int32"}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1559776294, "post_id": 56468569, "comment_id": 99529636, "body": "I&#39;m not sure how else to help you, the error is on the diff() with strings. diff is called on both the Date and Key column. As long as they are datetime64[ns] and int it should fine. So you must be doing something else to it to change the dtype before you call my code, or not changing it properly."}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": false, "score": 0, "last_activity_date": 1559771830, "creation_date": 1559771830, "answer_id": 56468569, "question_id": 56468112, "link": "https://stackoverflow.com/questions/56468112/pandas-dataframe-slicing-and-manipulation/56468569#56468569", "title": "Pandas dataframe slicing and manipulation", "body": "<p><code>s = df.groupby('Location').apply(lambda x: x[x['Key'].diff().ne(0)]['Date'].diff().mean())</code></p>\n\n<p>Is this what you mean? It averages the time delta of date when the key value changes per location. If you meant the average of change of 'Key' just change 'Date' to 'Key'.</p>\n"}, {"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1559780415, "last_edit_date": 1559780415, "creation_date": 1559779159, "answer_id": 56469448, "question_id": 56468112, "link": "https://stackoverflow.com/questions/56468112/pandas-dataframe-slicing-and-manipulation/56469448#56469448", "title": "Pandas dataframe slicing and manipulation", "body": "<p>You can try:</p>\n\n<pre><code># obviously we will group by Location\ngroups = df1.groupby('Location')\n\n# we record the changes and mark the unchanged with nan\ndf1['changes'] = groups.Key.diff().replace({0:np.nan})\n\n# average the changes by location\n# ignore all the nan's (unchanges)\ngroups.changes.mean()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Location\na    1.0\nb    1.5\nc    NaN\nd    NaN\nName: changes, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1559780415, "creation_date": 1559769294, "last_edit_date": 1559774615, "question_id": 56468112, "link": "https://stackoverflow.com/questions/56468112/pandas-dataframe-slicing-and-manipulation", "title": "Pandas dataframe slicing and manipulation", "body": "<p>I have dataframe <code>df1</code> as follows</p>\n\n<pre><code>+------+----------+-----+\n| Date | Location | Key |\n+------+----------+-----+\n|      | a        |   1 |\n|      | a        |   2 |\n|      | b        |   3 |\n|      | b        |   3 |\n|      | b        |   3 |\n|      | c        |   4 |\n|      | c        |   4 |\n|      | b        |   5 |\n|      | b        |   6 |\n|      | d        |   7 |\n|      | b        |   8 |\n|      | b        |   8 |\n|      | b        |   8 |\n|      | b        |   9 |\n+------+----------+-----+\n</code></pre>\n\n<p>and <code>df2</code> below is sliced from that.</p>\n\n<pre><code>+------+----------+-----+\n| Date | Location | Key |\n+------+----------+-----+\n|      | b        |   3 |\n|      | b        |   3 |\n|      | b        |   3 |\n|      | b        |   5 |\n|      | b        |   6 |\n|      | b        |   8 |\n|      | b        |   8 |\n|      | b        |   9 |\n|      | b        |   9 |\n+------+----------+-----+\n</code></pre>\n\n<p>The goal is to find the time difference between the <code>Key</code> changes in <code>df2</code>(like from the last 3 to 5, 5 to 6, 6 to the first 8, last 8 to first 9 and so on), add them up, repeat this for every <code>Location</code> item and average them. </p>\n\n<p>Can this process be vectorized or we need to slice the dataframe for every machine and manually compute the average? </p>\n\n<p>[EDIT]: </p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"&lt;ipython-input-1142-b85a122735aa&gt;\", line 1, in &lt;module&gt;\n    s = temp.groupby('SSCM_ Location').apply(lambda x: x[x['Key'].diff().ne(0)]['Execution Date'].diff().mean())\n\n  File \"C:\\Users\\dbhadra\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\groupby\\groupby.py\", line 930, in apply\n    return self._python_apply_general(f)\n\n  File \"C:\\Users\\dbhadra\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\groupby\\groupby.py\", line 936, in _python_apply_general\n    self.axis)\n\n  File \"C:\\Users\\dbhadra\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\groupby\\groupby.py\", line 2273, in apply\n    res = f(group)\n\n  File \"&lt;ipython-input-1142-b85a122735aa&gt;\", line 1, in &lt;lambda&gt;\n    s = temp.groupby('SSCM_ Location').apply(lambda x: x[x['Key'].diff().ne(0)]['Execution Date'].diff().mean())\n\n  File \"C:\\Users\\dbhadra\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\series.py\", line 1995, in diff\n    result = algorithms.diff(com._values_from_object(self), periods)\n\n  File \"C:\\Users\\dbhadra\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\algorithms.py\", line 1823, in diff\n    out_arr[res_indexer] = arr[res_indexer] - arr[lag_indexer]\n\nTypeError: unsupported operand type(s) for -: 'str' and 'str'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "graph", "networkx"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1559770128, "post_id": 56468101, "comment_id": 99527985, "body": "Either check if the edge is in the graph before removing it or randomly choose from edges that are in the graph <b>at the time of choosing</b>."}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1559770208, "creation_date": 1559770208, "answer_id": 56468279, "question_id": 56468101, "link": "https://stackoverflow.com/questions/56468101/random-deletion-of-edges-in-graph/56468279#56468279", "title": "Random deletion of edges in graph", "body": "<p>You get the set of edges before the for loop starts. You need to remove the edges from this set as they are removed from the graph so that they aren't chosen again during a later iteration.</p>\n\n<p>Alternatively, get the set of edges from the graph on each iteration just before you choose the one to remove.</p>\n"}, {"tags": [], "owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "is_accepted": false, "score": 0, "last_activity_date": 1559783599, "creation_date": 1559783599, "answer_id": 56469820, "question_id": 56468101, "link": "https://stackoverflow.com/questions/56468101/random-deletion-of-edges-in-graph/56469820#56469820", "title": "Random deletion of edges in graph", "body": "<p>A solution may be the following.<br>\nAt each iteration you consider the current percentage <code>p</code> and remove <code>p*number_of_remaining_edges</code> edges.</p>\n\n<pre><code>import random\nimport networkx as nx\n\ng = nx.fast_gnp_random_graph(20,0.3)\np_values = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9]\n\nfor p in p_values:\n    g.remove_edges_from(random.sample(g.edges(),k=int(p*g.number_of_edges())))\n</code></pre>\n"}], "owner": {"reputation": 2031, "user_id": 8660280, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e55c666d520a7858d53707429f785ead?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu_noob", "link": "https://stackoverflow.com/users/8660280/ubuntu-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559783599, "creation_date": 1559769226, "last_edit_date": 1559769916, "question_id": 56468101, "link": "https://stackoverflow.com/questions/56468101/random-deletion-of-edges-in-graph", "title": "Random deletion of edges in graph", "body": "<p>I am trying to delete edges in a random process in a graph as a function of p where p is from 0 to 1. In the first iteration 0.1 or 10% of the nodes are deleted randomly from the graph. In the second iteration 20% of the remaining edges are deleted and so on.\nMy error is occurring when the edges which have been deleted come up in the random function again.</p>\n\n<p>My attempt:</p>\n\n<pre><code>import networkx as nx\nimport random\nimport numpy as np\ngraph = nx.fast_gnp_random_graph(20,0.3)\n\n\n\np_values = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9]\n\n\nfor i in p_values:\n    print(i)\n\nfor i in p_values:\n\n    array=[]    \n\n    n=nx.number_of_edges(graph)\n    edges = list(graph.edges)\n\n    no_edges_del = int(n*i)\n    print(no_edges_del)\n\n    for j in range(no_edges_del):\n        chosen_edge = random.choice(edges)\n        print(chosen_edge)\n        print(chosen_edge[0])\n        graph.remove_edge(chosen_edge[0], chosen_edge[1])\n\n        GC = nx.number_of_nodes(max(nx.connected_component_subgraphs(graph), key=len))\n\n        array.append(GC/n)      \n</code></pre>\n\n<p>error-</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"1.py\", line 26, in &lt;module&gt;\n    graph.remove_edge(chosen_edge[0], chosen_edge[1])\n  File \"D:\\anaconda\\lib\\site-packages\\networkx\\classes\\graph.py\", line 1011, in remove_edge\n    raise NetworkXError(\"The edge %s-%s is not in the graph\" % (u, v))\nnetworkx.exception.NetworkXError: The edge 14-15 is not in the graph\n</code></pre>\n"}, {"tags": ["python", "json", "http"], "answers": [{"comments": [{"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1559772030, "post_id": 56468452, "comment_id": 99528652, "body": "got it. I have two urls for which I need to call and parse their json respone. can I combine everything in one hosts variable? updated my question for more clarity."}, {"owner": {"reputation": 367, "user_id": 11172505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89823a8300075dcd2a507ee65fa95d7c?s=128&d=identicon&r=PG&f=1", "display_name": "hwaring", "link": "https://stackoverflow.com/users/11172505/hwaring"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1559772264, "post_id": 56468452, "comment_id": 99528726, "body": "You should be able to simply add the lists together via <code>master_list = hosts_a + hosts_b</code>"}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1559772923, "post_id": 56468452, "comment_id": 99528912, "body": "got it. And this hosts variable is a list right in python?"}, {"owner": {"reputation": 2565, "user_id": 1368703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ccb92e85b56e1b19b7a1262efd06cf?s=128&d=identicon&r=PG", "display_name": "Wyrmwood", "link": "https://stackoverflow.com/users/1368703/wyrmwood"}, "edited": false, "score": 0, "creation_date": 1559772951, "post_id": 56468452, "comment_id": 99528921, "body": "Or instead of j_a and j_b, just  <code>data = json.loads([a response]...</code> followed by  <code>data.update(json.loads([b response])...</code>"}, {"owner": {"reputation": 367, "user_id": 11172505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89823a8300075dcd2a507ee65fa95d7c?s=128&d=identicon&r=PG&f=1", "display_name": "hwaring", "link": "https://stackoverflow.com/users/11172505/hwaring"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1559773061, "post_id": 56468452, "comment_id": 99528947, "body": "@flash yes hosts is a list."}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "reply_to_user": {"reputation": 2565, "user_id": 1368703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ccb92e85b56e1b19b7a1262efd06cf?s=128&d=identicon&r=PG", "display_name": "Wyrmwood", "link": "https://stackoverflow.com/users/1368703/wyrmwood"}, "edited": false, "score": 0, "creation_date": 1559773276, "post_id": 56468452, "comment_id": 99529011, "body": "@Wyrmwood are you sure it works? I tried but it&#39;s only showing servers for b response. <code>import json import requests  responsea = requests.get(&quot;service-url-a&quot;) responseb = requests.get(&quot;service-url-b&quot;) json_data = json.loads(responsea.text) json_data.update(json.loads(responseb.text)) hosts = [value for value_set in json_data.values() for value in value_set] print hosts</code>"}, {"owner": {"reputation": 2565, "user_id": 1368703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ccb92e85b56e1b19b7a1262efd06cf?s=128&d=identicon&r=PG", "display_name": "Wyrmwood", "link": "https://stackoverflow.com/users/1368703/wyrmwood"}, "edited": false, "score": 0, "creation_date": 1559775453, "post_id": 56468452, "comment_id": 99529484, "body": "No. You&#39;re keys are the same so the update will overwrite them."}], "tags": [], "owner": {"reputation": 367, "user_id": 11172505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89823a8300075dcd2a507ee65fa95d7c?s=128&d=identicon&r=PG&f=1", "display_name": "hwaring", "link": "https://stackoverflow.com/users/11172505/hwaring"}, "is_accepted": true, "score": 1, "last_activity_date": 1559771226, "creation_date": 1559771226, "answer_id": 56468452, "question_id": 56468093, "link": "https://stackoverflow.com/questions/56468093/extract-all-the-servers-by-parsing-json-response-using-python/56468452#56468452", "title": "extract all the servers by parsing json response using python?", "body": "<p>You want to flatten your array. With something like the following:</p>\n\n<p><code>hosts = [value for value_set in json_data.values() for value in value_set]</code></p>\n\n<p>This will give you a list of all the hosts. You can then proceed with the rest of your task from there.</p>\n"}, {"tags": [], "owner": {"reputation": 2565, "user_id": 1368703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ccb92e85b56e1b19b7a1262efd06cf?s=128&d=identicon&r=PG", "display_name": "Wyrmwood", "link": "https://stackoverflow.com/users/1368703/wyrmwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1559775433, "creation_date": 1559775433, "answer_id": 56469054, "question_id": 56468093, "link": "https://stackoverflow.com/questions/56468093/extract-all-the-servers-by-parsing-json-response-using-python/56469054#56469054", "title": "extract all the servers by parsing json response using python?", "body": "<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; a = \"\"\"{\n...     \"abc\": [\"goldy11.abc.host.com\", \"goldy12.abc.host.com\"],\n...     \"pqr\": [\"goldy21.pqr.host.com\", \"goldy22.pqr.host.com\"],\n...     \"def\": [\"goldy31.def.host.com\", \"goldy32.def.host.com\"],\n...     \"jhk\": [\"goldy41.jhk.host.com\", \"goldy42.jhk.host.com\"]\n... }\"\"\"\n\n&gt;&gt;&gt; b = \"\"\"{\n...     \"abc\": [\"goldy81.abc.host.com\", \"goldy82.abc.host.com\"],\n...     \"pqr\": [\"goldy91.pqr.host.com\", \"goldy92.pqr.host.com\"],\n...     \"def\": [\"goldy71.def.host.com\", \"goldy72.def.host.com\"],\n...     \"jhk\": [\"goldy51.jhk.host.com\", \"goldy52.jhk.host.com\"]\n... }\"\"\"\n&gt;&gt;&gt; data_a = json.loads(a)\n&gt;&gt;&gt; data_b = json.loads(b)\n&gt;&gt;&gt; print(json.dumps([value for values in list(data_a.values()) + list(data_b.values()) for value in values], indent=True))\n[\n \"goldy21.pqr.host.com\",\n \"goldy22.pqr.host.com\",\n \"goldy11.abc.host.com\",\n \"goldy12.abc.host.com\",\n \"goldy41.jhk.host.com\",\n \"goldy42.jhk.host.com\",\n \"goldy31.def.host.com\",\n \"goldy32.def.host.com\",\n \"goldy91.pqr.host.com\",\n \"goldy92.pqr.host.com\",\n \"goldy81.abc.host.com\",\n \"goldy82.abc.host.com\",\n \"goldy51.jhk.host.com\",\n \"goldy52.jhk.host.com\",\n \"goldy71.def.host.com\",\n \"goldy72.def.host.com\"\n]\n</code></pre>\n"}], "owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 56468452, "answer_count": 2, "score": 0, "last_activity_date": 1559775433, "creation_date": 1559769167, "last_edit_date": 1559772843, "question_id": 56468093, "link": "https://stackoverflow.com/questions/56468093/extract-all-the-servers-by-parsing-json-response-using-python", "title": "extract all the servers by parsing json response using python?", "body": "<p>I have a service urlA that if I call gives me below json response which has list of servers in it keyed by datacenter. In future, I can have more keys and more servers for each keys.</p>\n\n<pre><code>{\n    \"abc\": [\"goldy11.abc.host.com\", \"goldy12.abc.host.com\"],\n    \"pqr\": [\"goldy21.pqr.host.com\", \"goldy22.pqr.host.com\"],\n    \"def\": [\"goldy31.def.host.com\", \"goldy32.def.host.com\"],\n    \"jhk\": [\"goldy41.jhk.host.com\", \"goldy42.jhk.host.com\"]\n}\n</code></pre>\n\n<p>Similarly I have another service urlB which gives similar response but different set of servers:</p>\n\n<pre><code>{\n    \"abc\": [\"goldy81.abc.host.com\", \"goldy82.abc.host.com\"],\n    \"pqr\": [\"goldy91.pqr.host.com\", \"goldy92.pqr.host.com\"],\n    \"def\": [\"goldy71.def.host.com\", \"goldy72.def.host.com\"],\n    \"jhk\": [\"goldy51.jhk.host.com\", \"goldy52.jhk.host.com\"]\n}\n</code></pre>\n\n<p>I want to extract all the server names from the above json response from both the url's which will be like this:</p>\n\n<pre><code>goldy11.abc.host.com\ngoldy12.abc.host.com\ngoldy21.pqr.host.com\ngoldy22.pqr.host.com\ngoldy31.def.host.com\ngoldy32.def.host.com\ngoldy41.jhk.host.com\ngoldy42.jhk.host.com\ngoldy81.abc.host.com\ngoldy82.abc.host.com\ngoldy91.pqr.host.com\ngoldy92.pqr.host.com\ngoldy71.def.host.com\ngoldy72.def.host.com\ngoldy51.jhk.host.com\ngoldy52.jhk.host.com\n</code></pre>\n\n<p>So I started off like this but I am kinda confuse on how to extract all the servers by parsing json response from both the service url without specifying any key in hardcoded way?</p>\n\n<pre><code>import json\nimport requests\n\nresponsea = requests.get(\"service-url-a\")\nresponseb = requests.get(\"service-url-b\")\njson_data_a = json.loads(responsea.text)\njson_data_b = json.loads(responseb.text)\n# how can I combine both json_data_a and json_data_b response in the hosts list\nhosts = [value for value_set in json_data_a.values() for value in value_set]\nprint hosts\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 16, "creation_date": 1559769395, "post_id": 56468082, "comment_id": 99527715, "body": "Only thing that comes to mind is <code>def f(a, deprecated_b=None, **kwargs):</code> - if <code>deprecated_b</code> is not None, give your warning, otherwise look for <code>kwargs[&#39;b&#39;]</code>."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1559769647, "post_id": 56468082, "comment_id": 99527812, "body": "not recommending this, but parsing dis output might be an option, e.g. <code>&#39;CALL_FUNCTION_KW&#39; in {x.opname for x in dis.get_instructions((&#39;f(1,b=2)&#39;))}</code>"}, {"owner": {"reputation": 494, "user_id": 2560672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea02d15f6c8ed6a5d843bb1eb0f7515?s=128&d=identicon&r=PG", "display_name": "leezu", "link": "https://stackoverflow.com/users/2560672/leezu"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1559802143, "post_id": 56468082, "comment_id": 99534467, "body": "@jasonharper that&#39;s a great suggestion. If you post it as answer I&#39;d be happy to accept it."}], "answers": [{"comments": [{"owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 5, "creation_date": 1559772914, "post_id": 56468286, "comment_id": 99528910, "body": "Regarding the <code>== None</code>: <a href=\"https://stackoverflow.com/questions/14247373/python-none-comparison-should-i-use-is-or\">Python None comparison: should I use \u201cis\u201d or ==?</a> Also, instead of <code>if b is None</code>, wouldn&#39;t it be better to use <code>if c is not None</code>? Your way, you wouldn&#39;t be able to distinguish if someone called the function deliberately with <code>b=None</code>."}, {"owner": {"reputation": 39, "user_id": 11547739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KxK8gXF8xwU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0KjvSkqJnT9WXgeQefD5i_3glHg/mo/photo.jpg?sz=128", "display_name": "Ben Vizena", "link": "https://stackoverflow.com/users/11547739/ben-vizena"}, "reply_to_user": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 0, "creation_date": 1559773619, "post_id": 56468286, "comment_id": 99529085, "body": "@finefoot  I was checking b to try to force the user to pass a value for b (instead of only passing one argument).  I wasn&#39;t considering that None could be the value of the passed argument, but you are right, it could, which would result in unwanted behavior in my implementation. (and thanks for the link!)"}, {"owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 0, "creation_date": 1577634273, "post_id": 56468286, "comment_id": 105212613, "body": "You might want to edit your answer to fix the mentioned issues, so I&#39;ll remove my comment. Others who stumble upon this thread will have it easier this way. See jasonharper&#39;s comment to the question above for inspiration."}], "tags": [], "owner": {"reputation": 39, "user_id": 11547739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KxK8gXF8xwU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0KjvSkqJnT9WXgeQefD5i_3glHg/mo/photo.jpg?sz=128", "display_name": "Ben Vizena", "link": "https://stackoverflow.com/users/11547739/ben-vizena"}, "is_accepted": false, "score": 2, "last_activity_date": 1559770284, "creation_date": 1559770284, "answer_id": 56468286, "question_id": 56468082, "link": "https://stackoverflow.com/questions/56468082/inspect-if-an-argument-was-passed-positionally-or-via-keyword/56468286#56468286", "title": "Inspect if an argument was passed positionally or via keyword", "body": "<p>Here is a pretty hacky solution:</p>\n\n<pre><code>def f(a, c=None, b=None):\n    if (b == None):\n        print(\"do not do that\")\n    else:\n        print(\"good\")\n</code></pre>\n\n<p>where intput:\n<code>f(1, b=2)</code> prints <code>good</code> and <code>f(1, 2)</code> prints <code>do not do that</code></p>\n"}, {"tags": [], "owner": {"reputation": 4473, "user_id": 4912229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66da1c914df22112a754b1229d9e46e9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Werth", "link": "https://stackoverflow.com/users/4912229/nathan-werth"}, "is_accepted": false, "score": 4, "last_activity_date": 1560188514, "creation_date": 1560188514, "answer_id": 56531089, "question_id": 56468082, "link": "https://stackoverflow.com/questions/56468082/inspect-if-an-argument-was-passed-positionally-or-via-keyword/56531089#56531089", "title": "Inspect if an argument was passed positionally or via keyword", "body": "<p>You can use a wrapper to add an extra step between the user and the function. In that step, you can examine the arguments before the names matter. Note that this depends on the fact that <code>b</code> doesn't have a default value and always must be given as an arg.</p>\n\n<p><code>functools.wraps</code> is used to make the decorated function resemble the original in a bunch of ways.</p>\n\n<pre><code>import functools\nimport warnings\n\ndef deprecate_positional(fun):\n    @functools.wraps(fun)\n    def wrapper(*args, **kwargs):\n        if 'b' not in kwargs:\n            warnings.warn(\n                'b will soon be keyword-only',\n                DeprecationWarning,\n                stacklevel=2\n                )\n        return fun(*args, **kwargs)\n    return wrapper\n\n@deprecate_positional\ndef f(a, b):\n    return a + b\n</code></pre>\n\n<pre><code>&gt;&gt;&gt; f(1, b=2)\n3\n&gt;&gt;&gt; f(1, 2)\nWarning (from warnings module):\n  File \"C:/Users/nwerth/Desktop/deprecate_positional.py\", line 36\n    print(f(1, 2))\nDeprecationWarning: b will soon be keyword-only\n3\n</code></pre>\n"}], "owner": {"reputation": 494, "user_id": 2560672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea02d15f6c8ed6a5d843bb1eb0f7515?s=128&d=identicon&r=PG", "display_name": "leezu", "link": "https://stackoverflow.com/users/2560672/leezu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 5, "answer_count": 2, "score": 15, "last_activity_date": 1560188514, "creation_date": 1559769098, "last_edit_date": 1559769401, "question_id": 56468082, "link": "https://stackoverflow.com/questions/56468082/inspect-if-an-argument-was-passed-positionally-or-via-keyword", "title": "Inspect if an argument was passed positionally or via keyword", "body": "<p>Consider a function with signature <code>f(a, b)</code>. In future, I would like to change the signature to <code>f(a, *, b)</code>, disallowing b to be passed as positional argument.\nTo reduce the impact of the change, I want to first deprecate specifying b positionally, warning users that do so.</p>\n\n<p>For that I would like to write something like:</p>\n\n<pre><code>def f(a, b):\n    frame = inspect.currentframe()\n    if b in frame.specified_as_positional:\n        print('Do not do that')\n    else:\n        print('Good')\n</code></pre>\n\n<p>The result would be that </p>\n\n<pre><code>&gt;&gt;&gt; f(1, 2)\n'Do not do that'\n&gt;&gt;&gt; f(1, b=2)\n'Good'\n</code></pre>\n\n<p><code>inspect.getargvalues(frame)</code> does not seem to be sufficient. The ArgInfo object just provides</p>\n\n<pre><code>&gt;&gt;&gt; f(1,b=2)\nArgInfo(args=['a', 'b'], varargs=None, keywords=None, locals={'a': 1, 'b': 2})\n</code></pre>\n\n<p>Is such inspection even possible in Python? Conceptually the interpreter does not seem to be required to remember if a argument was specified positionally or as keyword.</p>\n\n<p>Python 2 support would be nice to have but is not strictly required.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "edited": false, "score": 0, "creation_date": 1559770406, "post_id": 56468187, "comment_id": 99528075, "body": "Question: I did mine a little differently. Using your code, I&#39;m finding that <code>.any()</code> executes a lot faster than <code>.agg(any)</code>. I thought they were comparable under the hood. Any thoughts as to why?"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 3, "last_activity_date": 1559769707, "creation_date": 1559769707, "answer_id": 56468187, "question_id": 56468055, "link": "https://stackoverflow.com/questions/56468055/anything-faster-than-groupby-for-iterating-through-groups/56468187#56468187", "title": "Anything faster than groupby for iterating through groups?", "body": "<p>Using <code>filter</code> with a lambda function here is slowing you down a lot.  You can speed things up by removing that.</p>\n\n<hr>\n\n<pre><code>u = coinc.groupby('id')\nm = u.temp1.any() &amp; u.temp2.any()\nres = df.loc[coinc.id.isin(m[m].index), ['id']]\n</code></pre>\n\n<hr>\n\n<p>Comparing this to your approach on a larger frame.</p>\n\n<pre><code>a = np.random.randint(1, 1000, 100_000)\nb = np.random.randint(0, 2, 100_000, dtype=bool)\nc = ~b\n\ncoinc = pd.DataFrame({'id': a, 'temp1': b, 'temp2': c})\n\nIn [295]: %%timeit\n     ...: u = coinc.groupby('id')\n     ...: m = u.temp1.any() &amp; u.temp2.any()\n     ...: res = coinc.loc[coinc.id.isin(m[m].index), ['id']]\n     ...:\n13.5 ms \u00b1 476 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\nIn [296]: %%timeit\n     ...: grouped = coinc.groupby('id')\n     ...: final = grouped.filter(lambda x: ( x['temp2'].any() and x['temp1'].any()))\n     ...: lanif = final.drop(['temp1','temp2'],axis = 1 )\n     ...:\n527 ms \u00b1 7.91 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<hr>\n\n<pre><code>np.array_equal(res.values, lanif.values)\n</code></pre>\n\n<p></p>\n\n<pre><code>True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "edited": false, "score": 0, "creation_date": 1559769879, "post_id": 56468201, "comment_id": 99527904, "body": "Disclaimer: I didn&#39;t test this code because I didn&#39;t have an easy way to enter sample data."}], "tags": [], "owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "is_accepted": false, "score": 0, "last_activity_date": 1559770702, "last_edit_date": 1559770702, "creation_date": 1559769817, "answer_id": 56468201, "question_id": 56468055, "link": "https://stackoverflow.com/questions/56468055/anything-faster-than-groupby-for-iterating-through-groups/56468201#56468201", "title": "Anything faster than groupby for iterating through groups?", "body": "<p>The problem isn't the groupby it's the lambda. Lambda operations are not vectorized*. You can get the same result faster using agg. I'd do:</p>\n\n<pre><code> groupdf = coinc.groupby('id').agg(any)\n # Selects instance where both contain at least one true statement\n mask = maskdf[['temp1','temp2']].all(axis=1) \n lanif = groupdf[mask].drop(['temp1','temp2'],axis = 1 )\n</code></pre>\n\n<p>*This is a pretty nuanced issue that I'm waaaay oversimplifying, sorry.</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1559770728, "last_edit_date": 1559770728, "creation_date": 1559769919, "answer_id": 56468228, "question_id": 56468055, "link": "https://stackoverflow.com/questions/56468055/anything-faster-than-groupby-for-iterating-through-groups/56468228#56468228", "title": "Anything faster than groupby for iterating through groups?", "body": "<pre><code>i, u = pd.factorize(coinc.id)\nt = np.zeros((len(u), 2), bool)\nc = np.column_stack([coinc.temp1.to_numpy(), coinc.temp2.to_numpy()])\n\nnp.logical_or.at(t, i, c)\n\nfinal = coinc.loc[t.all(1)[i], ['id']]\n\nfinal\n\n      id\n9   10.0\n10  10.0\n11  10.0\n12  10.0\n33  27.0\n34  27.0\n35  27.0\n36  27.0\n40  31.0\n41  31.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "is_accepted": false, "score": 0, "last_activity_date": 1559771877, "creation_date": 1559771877, "answer_id": 56468574, "question_id": 56468055, "link": "https://stackoverflow.com/questions/56468055/anything-faster-than-groupby-for-iterating-through-groups/56468574#56468574", "title": "Anything faster than groupby for iterating through groups?", "body": "<p>Here is another alternative solution</p>\n\n<pre><code>f = coinc.groupby('id').transform('any')\nresult = coinc.loc[f['temp1'] &amp; f['temp2'], coinc.columns.drop(['temp1', 'temp2'])]\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6068850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t33MK-AmJ3o/AAAAAAAAAAI/AAAAAAAAAF4/FkKVkGj-O8g/photo.jpg?sz=128", "display_name": "Matteo Mcdonnell", "link": "https://stackoverflow.com/users/6068850/matteo-mcdonnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 56468187, "answer_count": 4, "score": 1, "last_activity_date": 1559771877, "creation_date": 1559768956, "question_id": 56468055, "link": "https://stackoverflow.com/questions/56468055/anything-faster-than-groupby-for-iterating-through-groups", "title": "Anything faster than groupby for iterating through groups?", "body": "<p>So I've narrowed down a previous problem down to this: I have a DataFrame that looks like this</p>\n\n<pre><code>              id  temp1  temp2\n    9       10.0   True  False\n    10      10.0   True  False\n    11      10.0  False   True\n    12      10.0  False   True\n    17      15.0   True  False\n    18      15.0   True  False\n    19      15.0   True  False\n    20      15.0   True  False\n    21      15.0  False  False\n    33      27.0   True  False\n    34      27.0   True  False\n    35      27.0  False   True\n    36      27.0  False  False\n    40      31.0   True  False\n    41      31.0  False   True \n               .\n               .\n               .\n</code></pre>\n\n<p>and in reality, it's a few million lines long (and has a few other columns). </p>\n\n<p>What I have it currently doing is </p>\n\n<pre><code>    grouped = coinc.groupby('id')\n    final = grouped.filter(lambda x: ( x['temp2'].any() and x['temp1'].any()))\n    lanif = final.drop(['temp1','temp2'],axis = 1 )\n</code></pre>\n\n<p>(coinc is the name of the dataframe)</p>\n\n<p>which only keeps rows (grouped by id) if there is a true in both temp1 and temp2 for some rows with the same id. For example, with the above dataframe, it would get rid of rows with id 15, but keep everything else.</p>\n\n<p>This, however, is deathly slow and I was wondering if there was a faster way to do this.</p>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup"], "comments": [{"owner": {"reputation": 3907, "user_id": 8306666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2f20237f2695cc2f6951fb562493cd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazim Kerimbekov", "link": "https://stackoverflow.com/users/8306666/nazim-kerimbekov"}, "edited": false, "score": 0, "creation_date": 1559810055, "post_id": 56468041, "comment_id": 99538032, "body": "I can&#39;t find <code>Zabaglia, Niccola</code> anywhere on the website, could you please upload a screenshot where you see it."}, {"owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "edited": false, "score": 0, "creation_date": 1559815050, "post_id": 56468041, "comment_id": 99540637, "body": "The first issue I see here is you are using a <code>soup</code> variable as your stored object, when you have in fact stored it as <code>web_soup</code>. The second issue is the class is <code>&#39;cbx x-refine__multi-select-checkbox &#39;</code>, not <code>&#39;cbx x-refine__multi-select-checkbox&#39;</code>. A very subtle difference, but the way as is, would not find any elements. The third issue is it will not find any <code>&lt;a&gt;</code> tags as the page is dynamic and would need to be rendered first (can use Selenium to do that). But my suggestion is, since you are following the tutorial and learning, find a webpage that is not rendered dynamically."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11605992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e23d370b306bec608a15c3d0e1271c?s=128&d=identicon&r=PG&f=1", "display_name": "lifelesskoka", "link": "https://stackoverflow.com/users/11605992/lifelesskoka"}, "edited": false, "score": 0, "creation_date": 1560086385, "post_id": 56475176, "comment_id": 99615683, "body": "thank you for this sample and i apologize for my code having multiple errors hopefully next time it wil be better"}, {"owner": {"reputation": 2227, "user_id": 2437141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PmnfV.jpg?s=128&g=1", "display_name": "Maaz", "link": "https://stackoverflow.com/users/2437141/maaz"}, "reply_to_user": {"reputation": 13, "user_id": 11605992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e23d370b306bec608a15c3d0e1271c?s=128&d=identicon&r=PG&f=1", "display_name": "lifelesskoka", "link": "https://stackoverflow.com/users/11605992/lifelesskoka"}, "edited": false, "score": 0, "creation_date": 1560235897, "post_id": 56475176, "comment_id": 99658047, "body": "@lifelesskoka No problem, if it&#39;s help you maybe you can upvote and accept the answer :-)"}], "tags": [], "owner": {"reputation": 2227, "user_id": 2437141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PmnfV.jpg?s=128&g=1", "display_name": "Maaz", "link": "https://stackoverflow.com/users/2437141/maaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1559815087, "creation_date": 1559815087, "answer_id": 56475176, "question_id": 56468041, "link": "https://stackoverflow.com/questions/56468041/how-to-fix-attributeerror-htmlparsertreebuilder-object-has-no-attribute-init/56475176#56475176", "title": "how to fix AttributeError: &#39;HTMLParserTreeBuilder&#39; object has no attribute &#39;initialize_soup&#39;", "body": "<p>First, your <code>soup.find(class_='cbx x-refine__multi-select-checkbox')</code> is selecting actually only the first element with the class <code>cbx x-refine__multi-select-checkbox</code></p>\n\n<p>So to get the url to the \"M Size Shirt\", you could do the following:</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as soup\n\nweb_page = requests.get('https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=m570.l1313&amp;_nkw=mens+shirt&amp;_sacat=0')\nweb_soup = soup(web_page.text, 'html.parser')\nlinks = web_soup.find_all('a', {'class':'cbx x-refine__multi-select-link'})\nfor l in links:\n    checkbox = l.find('input',{'class':'cbx x-refine__multi-select-checkbox '})\n    if checkbox and 'M' == checkbox.get('aria-label'):\n        #FOUND\n        print(l.get('href'))\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>https://www.ebay.com/sch/i.html?_from=R40&amp;_nkw=mens+shirt&amp;_sacat=0&amp;rt=nc&amp;Size%2520%2528Men%2527s%2529=M&amp;_dcat=185100\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11605992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e23d370b306bec608a15c3d0e1271c?s=128&d=identicon&r=PG&f=1", "display_name": "lifelesskoka", "link": "https://stackoverflow.com/users/11605992/lifelesskoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 56475176, "answer_count": 1, "score": 1, "last_activity_date": 1559815087, "creation_date": 1559768882, "last_edit_date": 1559810024, "question_id": 56468041, "link": "https://stackoverflow.com/questions/56468041/how-to-fix-attributeerror-htmlparsertreebuilder-object-has-no-attribute-init", "title": "how to fix AttributeError: &#39;HTMLParserTreeBuilder&#39; object has no attribute &#39;initialize_soup&#39;", "body": "<p>I am getting the following error:</p>\n\n<pre><code>AttributeError: 'HTMLParserTreeBuilder' object has no attribute 'initialize_soup'\n</code></pre>\n\n<p>I was trying to find the xpath for the checkbox of M in eBay (<a href=\"https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=m570.l1313&amp;_nkw=mens%20shirt&amp;_sacat=0\" rel=\"nofollow noreferrer\">link</a>)</p>\n\n<p>I am using spyder and I have imported bs4 everywhere I can. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nfrom bs4 import BeautifulSoup\n\nweb_page = requests.get('https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=m570.l1313&amp;_nkw=mens+shirt&amp;_sacat=0')\nweb_soup = BeautifulSoup(web_page.text, 'html.parser')\ncheckbox = soup.find(class_='cbx x-refine__multi-select-checkbox')\ncheckbox_names = checkbox.find_all('a')\n\nfor check in checkbox_names:\n    print(check.prettify())\n</code></pre>\n\n<p>I was expecting an output like this</p>\n\n<pre><code>&lt;a href=\"/web/20121007172955/https://www.nga.gov/cgi-bin/tsearch?artistid=11630\"&gt;\n Zabaglia, Niccola\n&lt;/a&gt;\n</code></pre>\n\n<p>I was following <a href=\"https://www.digitalocean.com/community/tutorials/how-to-scrape-web-pages-with-beautiful-soup-and-python-3\" rel=\"nofollow noreferrer\">this tutorial</a> to help me with my code.</p>\n"}, {"tags": ["python", "html", "css", "django"], "comments": [{"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559769558, "post_id": 56468026, "comment_id": 99527777, "body": "Can you show your relevant settings? static root and static url"}, {"owner": {"reputation": 378, "user_id": 1592994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hO1Yy.jpg?s=128&g=1", "display_name": "c0x6a", "link": "https://stackoverflow.com/users/1592994/c0x6a"}, "edited": false, "score": 0, "creation_date": 1559769607, "post_id": 56468026, "comment_id": 99527797, "body": "Show your <code>settings</code> file"}, {"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559769817, "post_id": 56468026, "comment_id": 99527871, "body": "Is debug on or off?"}, {"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "reply_to_user": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559769830, "post_id": 56468026, "comment_id": 99527878, "body": "@I\u015f\u0131kKaplan debug is on."}, {"owner": {"reputation": 119, "user_id": 1745901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13af3a7b5866a274154c26d22672230?s=128&d=identicon&r=PG", "display_name": "Paula C", "link": "https://stackoverflow.com/users/1745901/paula-c"}, "edited": false, "score": 0, "creation_date": 1559770203, "post_id": 56468026, "comment_id": 99528011, "body": "Would you mind posting what you put in the staticfiles_dirs field?"}, {"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559770702, "post_id": 56468026, "comment_id": 99528185, "body": "Mind running <code>python manage.py findstatic --verbosity 2 home&#47;styles.css</code> and share the output"}, {"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "reply_to_user": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559770961, "post_id": 56468026, "comment_id": 99528294, "body": "@I\u015f\u0131kKaplan No matching file found for &#39;home/styles.css&#39;.  Looking in the following locations:   C:\\Users\\Alice\\AppData\\Local\\Programs\\Python\\Python37-32\\lib&zwnj;&#8203;\\site-packages\\djang&zwnj;&#8203;o\\contrib\\admin\\stat&zwnj;&#8203;ic"}, {"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "reply_to_user": {"reputation": 119, "user_id": 1745901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13af3a7b5866a274154c26d22672230?s=128&d=identicon&r=PG", "display_name": "Paula C", "link": "https://stackoverflow.com/users/1745901/paula-c"}, "edited": false, "score": 0, "creation_date": 1559771029, "post_id": 56468026, "comment_id": 99528327, "body": "@PaulaC I don&#39;t have a STATICFILES_DIRS field right now."}, {"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559771133, "post_id": 56468026, "comment_id": 99528359, "body": "Okay this one is a bit unlikely but, you do have staticfiles app installed right? <code>&#39;django.contrib.staticfiles&#39;</code> because by default  it should look for app directories too"}, {"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "reply_to_user": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559773944, "post_id": 56468026, "comment_id": 99529176, "body": "@I\u015f\u0131kKaplan I have added my installed apps to the post. I believe it is right."}, {"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "edited": false, "score": 0, "creation_date": 1559774207, "post_id": 56468026, "comment_id": 99529236, "body": "Is that the entire installed apps?"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 11521157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CarZh.png?s=128&g=1", "display_name": "CodingChap", "link": "https://stackoverflow.com/users/11521157/codingchap"}, "edited": false, "score": 0, "creation_date": 1559769642, "post_id": 56468060, "comment_id": 99527810, "body": "For the js file, you should keep that link at the bottom of the body tag."}, {"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "edited": false, "score": 0, "creation_date": 1559769799, "post_id": 56468060, "comment_id": 99527863, "body": "@Walucas [05/Jun/2019 14:22:51] &quot;GET /home/ HTTP/1.1&quot; 200 1021 [05/Jun/2019 14:22:51] &quot;GET /static/home/main.js HTTP/1.1&quot; 404 1660 [05/Jun/2019 14:22:51] &quot;GET /static/home/styles.css HTTP/1.1&quot; 404 1669"}], "tags": [], "owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1559769492, "last_edit_date": 1559769492, "creation_date": 1559769005, "answer_id": 56468060, "question_id": 56468026, "link": "https://stackoverflow.com/questions/56468026/html-is-not-applying-css/56468060#56468060", "title": "HTML is not applying CSS", "body": "<p>change your <code>../</code> like this:</p>\n\n<pre><code> &lt;link rel=\"stylesheet\" href=\"{% static 'home/styles.css' %}\"&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "edited": false, "score": 0, "creation_date": 1559774660, "post_id": 56468936, "comment_id": 99529331, "body": "that has seemed to solve it! such a rookie mistake! thanks so much!"}, {"owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "reply_to_user": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "edited": false, "score": 0, "creation_date": 1559774750, "post_id": 56468936, "comment_id": 99529353, "body": "Happens to best of us. Glad I could help!"}], "tags": [], "owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "is_accepted": true, "score": 1, "last_activity_date": 1559774325, "creation_date": 1559774325, "answer_id": 56468936, "question_id": 56468026, "link": "https://stackoverflow.com/questions/56468026/html-is-not-applying-css/56468936#56468936", "title": "HTML is not applying CSS", "body": "<pre><code>INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre>\n\n<p>If this is your entire installed apps, it looks like you haven't installed your own app, and that means staticfiles apps doesn't check that directory since it is not an installed app.Adding your app here would add it to the searched paths and django-dev-server would serve the statics. </p>\n"}], "owner": {"reputation": 37, "user_id": 11127985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d84b59b08c7008396136b94c38b44a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/11127985/alice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 56468936, "answer_count": 2, "score": 2, "last_activity_date": 1559774325, "creation_date": 1559768817, "last_edit_date": 1559773986, "question_id": 56468026, "link": "https://stackoverflow.com/questions/56468026/html-is-not-applying-css", "title": "HTML is not applying CSS", "body": "<p>I am very new to HTML and CSS. I am trying to link my CSS and JS file to my HTML file, but it is not working. I have looked at many other Stack Overflow questions &amp; answers on this problem, and none of the solutions seemed to have worked. Is there some sort of typo/problem that I am overlooking?</p>\n\n<pre><code>    website\n    |home\n        |_static\n            |_home\n                |_styles.css\n                |_main.js\n        |_templates\n            |_home\n                |_base.html\n</code></pre>\n\n<p>This is the top of my <code>base.html</code> file</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  &lt;head&gt;\r\n        {% load static %}\r\n        &lt;link rel=\"stylesheet\" href=\"{% static '../home/styles.css' %}\"&gt;\r\n        &lt;script src=\"{% static 'home/main.js' %}\"&gt;&lt;/script&gt;\r\n        &lt;link href=\"https://fonts.googleapis.com/css?family=Poppins&amp;display=swap\" rel=\"stylesheet\"&gt;\r\n        &lt;meta charset=\"UTF-8\"&gt;\r\n        &lt;title&gt;Title&lt;/title&gt;\r\n    &lt;/head&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the relevant code from settings:</p>\n\n<pre><code>INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre>\n\n<p>and later </p>\n\n<pre><code>STATIC_URL = '/static/'\n</code></pre>\n\n<p>Here are the error messages in Command Prompt:</p>\n\n<pre><code>[05/Jun/2019 13:58:15] \"GET /home/ HTTP/1.1\" 200 1014\nNot Found: /home/styles.css\n[05/Jun/2019 13:58:15] \"GET /static/home/main.js HTTP/1.1\" 404 1660\n[05/Jun/2019 13:58:15] \"GET /home/styles.css HTTP/1.1\" 404 2304\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "module"], "comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1559769151, "post_id": 56468002, "comment_id": 99527628, "body": "you could increment the module version number at each change and then check the version numbers, e.g. <code>foo.__version__</code>?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1559769168, "post_id": 56468002, "comment_id": 99527634, "body": "For modules you have control over \u2014 which sounds like it&#39;s the case here \u2014 couldn&#39;t you just have some kind of version attribute into them and check that?"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1559770852, "post_id": 56468002, "comment_id": 99528251, "body": "@martineau &quot;When a module (or package) includes a version number, the version SHOULD be available in the <code>__version__</code> attribute.&quot; <a href=\"https://www.python.org/dev/peps/pep-0396/\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0396</a>"}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "is_accepted": false, "score": 0, "last_activity_date": 1559770201, "creation_date": 1559770201, "answer_id": 56468278, "question_id": 56468002, "link": "https://stackoverflow.com/questions/56468002/keeping-track-of-when-python-modules-are-imported/56468278#56468278", "title": "Keeping track of when Python modules are imported", "body": "<p>I don't think there's any way to get around how hacky this is, but how about something like this every time you import? (I don't know exactly how you're importing):</p>\n\n<pre><code>import time\nfrom types import ModuleType\n\n# create a dictionary to keep track\n# filter globals to exclude things that aren't modules and aren't builtins \nMODULE_TIMES = {k:None for k,v in globals().items() if not k.startswith(\"__\") and not k.endswith(\"__\") and type(v) == ModuleType}\n\n\nfor module_name in user_module_list:\n    MODULE_TIMES[module_name] = time.time()\n    eval(\"import {0}\".format(module_name))\n</code></pre>\n\n<p>And then you can reference this dictionary in a similar way later. </p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 2, "last_activity_date": 1604683366, "last_edit_date": 1604683366, "creation_date": 1559777407, "answer_id": 56469282, "question_id": 56468002, "link": "https://stackoverflow.com/questions/56468002/keeping-track-of-when-python-modules-are-imported/56469282#56469282", "title": "Keeping track of when Python modules are imported", "body": "<p>Here's a way to automatically have an attribute (named <code>_loadtime</code> in the example code below) added to modules when they're imported. The code is based on Recipe 10.12 titled &quot;Patching Modules on Import&quot; in the book <em>Python Cookbook</em>, by David Beazley and Brian Jones, O'Reilly, 2013, which shows a technique that I adapted to do what you want.</p>\n<p>For testing purposes I created this trivial <code>target_module.py</code> file:</p>\n<pre><code>print('in target_module')\n</code></pre>\n<p>Here's the example code:</p>\n<pre><code>import importlib\nimport sys\nimport time\n\n\nclass PostImportFinder:\n    def __init__(self):\n        self._skip = set()  # To prevent recursion.\n\n    def find_module(self, fullname, path=None):\n        if fullname in self._skip:  # Prevent recursion\n            return None\n        self._skip.add(fullname)\n        return PostImportLoader(self)\n\n\nclass PostImportLoader:\n    def __init__(self, finder):\n        self._finder = finder\n\n    def load_module(self, fullname):\n        importlib.import_module(fullname)\n        module = sys.modules[fullname]\n\n        # Add a custom attribute to the module object.\n        module._loadtime = time.time()\n\n        self._finder._skip.remove(fullname)\n        return module\n\n\nsys.meta_path.insert(0, PostImportFinder())\n\nif __name__ == '__main__':\n\n    import time\n\n    try:\n        print('importing target_module')\n        import target_module\n    except Exception as e:\n        print('Import failed:', e)\n        raise\n\n    loadtime = time.localtime(target_module._loadtime)\n    print('module loadtime: {} ({})'.format(\n            target_module._loadtime,\n            time.strftime('%Y-%b-%d %H:%M:%S', loadtime)))\n</code></pre>\n<p>Sample output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>importing target_module\nin target_module\nmodule loadtime: 1604683023.2491636 (2020-Nov-06 09:17:03)\n</code></pre>\n"}], "owner": {"reputation": 89167, "user_id": 3571, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b1d6ed6863a3b4aab3565f1f9625f156?s=128&d=identicon&r=PG", "display_name": "codeape", "link": "https://stackoverflow.com/users/3571/codeape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1604683366, "creation_date": 1559768687, "question_id": 56468002, "link": "https://stackoverflow.com/questions/56468002/keeping-track-of-when-python-modules-are-imported", "title": "Keeping track of when Python modules are imported", "body": "<p>Does the interpreter somehow keep a timestamp of when a module is imported? Or is there an easy way of hooking into the import machinery to do this?</p>\n\n<p>The scenario is a long-running Python process that at various points imports user-provided modules. I would like the process to be able to check \"should I restart to load the latest code changes?\" by checking the module file's timestamps against the time the module was imported.</p>\n"}, {"tags": ["python", "graphql", "amazon-cognito", "aws-appsync"], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 423560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b254d7fff4430d8dda03a85aaeb79ac7?s=128&d=identicon&r=PG", "display_name": "Samantha Atkins", "link": "https://stackoverflow.com/users/423560/samantha-atkins"}, "edited": false, "score": 1, "creation_date": 1576614029, "post_id": 56470757, "comment_id": 104954995, "body": "What are the implications of changing the auth mode? Mine is AWS_IAM I am not sure what would break if I changed it on the fly. The original question seems to be for that auth mode as well.  If so and if this switch is not problem free then this is not a real answer."}, {"owner": {"reputation": 43630, "user_id": 75033, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/yqUcc.jpg?s=128&g=1", "display_name": "John Mee", "link": "https://stackoverflow.com/users/75033/john-mee"}, "edited": false, "score": 0, "creation_date": 1582072983, "post_id": 56470757, "comment_id": 106648652, "body": "I can&#39;t get past 403 &quot;Missing authentication token&quot; :-("}, {"owner": {"reputation": 521, "user_id": 5532302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc8b88a1dcf334525f32d49c5eca1d?s=128&d=identicon&r=PG&f=1", "display_name": "OneLiner", "link": "https://stackoverflow.com/users/5532302/oneliner"}, "edited": false, "score": 0, "creation_date": 1592431201, "post_id": 56470757, "comment_id": 110427104, "body": "OP asked specifically for how to auth using cognito. &quot;Change your API to use key authentication&quot; isn&#39;t a valid answer to the original question."}], "tags": [], "owner": {"reputation": 1484, "user_id": 7550592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxJaL.png?s=128&g=1", "display_name": "Yik San Chan", "link": "https://stackoverflow.com/users/7550592/yik-san-chan"}, "is_accepted": true, "score": 4, "last_activity_date": 1559832083, "last_edit_date": 1559832083, "creation_date": 1559793917, "answer_id": 56470757, "question_id": 56467994, "link": "https://stackoverflow.com/questions/56467994/how-to-call-an-appsync-mutation-with-cognito-authentication-using-python/56470757#56470757", "title": "How to call an AppSync mutation with Cognito authentication using python?", "body": "<p>You can turn your API auth mode to be \"API KEY\" and call an AppSync mutation with http.</p>\n\n<p>For example.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nimport json\n\nAPPSYNC_API_KEY = 'da2-xxxxxxxxxxxxx'\nAPPSYNC_API_ENDPOINT_URL = 'https://xxxxxxxxxxxxx.appsync-api.us-west-2.amazonaws.com/graphql'\n\nheaders = {\n    'Content-Type': \"application/graphql\",\n    'x-api-key': APPSYNC_API_KEY,\n    'cache-control': \"no-cache\",\n}\n\ndef execute_gql(query):\n    payload_obj = {\"query\": query}\n    payload = json.dumps(payload_obj)\n    response = requests.request(\"POST\", APPSYNC_API_ENDPOINT_URL, data=payload, headers=headers)\n    return response\n</code></pre>\n\n<p>Imagine you have a model called <code>Items</code> and you can easily make query like below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if __name__ == '__main__':\n    print(execute_gql(\"query { listItems { items { id name } } }\").json())\n</code></pre>\n\n<p>Simply replace the string with the mutation operation.</p>\n"}], "owner": {"reputation": 2097, "user_id": 1216288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CCZZy.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/1216288/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 1, "accepted_answer_id": 56470757, "answer_count": 1, "score": 2, "last_activity_date": 1559832083, "creation_date": 1559768659, "question_id": 56467994, "link": "https://stackoverflow.com/questions/56467994/how-to-call-an-appsync-mutation-with-cognito-authentication-using-python", "title": "How to call an AppSync mutation with Cognito authentication using python?", "body": "<p>Is it possible to calling an AppSync mutation with Cognito authentication using Python? How?</p>\n\n<p>I am trying to use boto3, but I don't found a way to execute graphql operations.</p>\n\n<p><a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/appsync.html\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/appsync.html</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 2, "creation_date": 1559769000, "post_id": 56467976, "comment_id": 99527558, "body": "<code>df.groupby(df[&#39;Date&#39;].dt.year)[&#39;Mean&#39;].agg(&#39;mean&#39;)</code> if I understand you correctly."}, {"owner": {"reputation": 61, "user_id": 10837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa55d2280e047a2d375aad5ba6b9a891?s=128&d=identicon&r=PG&f=1", "display_name": "Harp", "link": "https://stackoverflow.com/users/10837518/harp"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1559771611, "post_id": 56467976, "comment_id": 99528523, "body": "This works but doesn&#39;t return a proper pandas dataframe.  how do I change that?"}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 1, "creation_date": 1559771896, "post_id": 56467976, "comment_id": 99528610, "body": "add a <code>.reset_index()</code> to the end."}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 8732658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ebcadd80fb79db8f12ff35d267d388?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/8732658/luca"}, "is_accepted": false, "score": 0, "last_activity_date": 1559769589, "creation_date": 1559769589, "answer_id": 56468163, "question_id": 56467976, "link": "https://stackoverflow.com/questions/56467976/combining-data-in-in-a-dataframe/56468163#56468163", "title": "Combining data in in a dataframe", "body": "<p>This should work: first you get the years and after you can get the average based on a search.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nds = pd.DataFrame([['2019-01-1', 1], ['2019-02-1' , 2], ['2018-01-1', 3], \n                   ['2018-02-1' , 4]], columns=['data', 'mean'])\n\n\n#get year\nd = ds.data.tolist()\n\nyears = [x.split('-')[0] for x in d]\nds['year'] = years #add the year to the dataset\n\n#get the mean\nds2 = pd.DataFrame(None, columns=['year', 'mean'])\nfor y in set(years):\n    avg = np.average(ds[ds.year == y]['mean'])\n    row = pd.DataFrame([[y, avg]], columns=['year', 'mean'])\n    ds2 = ds2.append(row)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa55d2280e047a2d375aad5ba6b9a891?s=128&d=identicon&r=PG&f=1", "display_name": "Harp", "link": "https://stackoverflow.com/users/10837518/harp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559769589, "creation_date": 1559768592, "question_id": 56467976, "link": "https://stackoverflow.com/questions/56467976/combining-data-in-in-a-dataframe", "title": "Combining data in in a dataframe", "body": "<p>I have a pandas dataframe:</p>\n\n<p>I want to take the Mean column values for the year, add them then take the average. eg I would combine indexes 0-5 </p>\n\n<p>(175.05+195.15+198.43+183.594+170.9+155.5)/6\nand so on for each year.  In the end there would be as many rows as there are years left (from 2019, 2018, 2017, 2016, 2015, 2014.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DdxeU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DdxeU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Resulting dataframe would look like...</p>\n\n<p><a href=\"https://i.stack.imgur.com/pdm8a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pdm8a.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1559768455, "post_id": 56467918, "comment_id": 99527361, "body": "So they are always <code>n_steps=3</code> away?"}, {"owner": {"reputation": 25, "user_id": 1993923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87c685afe3f0396fc73e5d649c8e05c?s=128&d=identicon&r=PG", "display_name": "JoseGzz", "link": "https://stackoverflow.com/users/1993923/josegzz"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1559768601, "post_id": 56467918, "comment_id": 99527414, "body": "Yes, it is always the case."}], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768646, "creation_date": 1559768646, "answer_id": 56467990, "question_id": 56467918, "link": "https://stackoverflow.com/questions/56467918/pct-change-between-non-adjacent-pairs/56467990#56467990", "title": "pct_change between non-adjacent pairs", "body": "<p>Try this:</p>\n\n<pre><code>s = pd.Series(np.arange(1,10))\nn_steps = 3\n\ns.groupby(np.arange(len(s))%n_steps).pct_change()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0     NaN\n1     NaN\n2     NaN\n3    3.00\n4    1.50\n5    1.00\n6    0.75\n7    0.60\n8    0.50\ndtype: float64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1559768955, "last_edit_date": 1559768955, "creation_date": 1559768907, "answer_id": 56468045, "question_id": 56467918, "link": "https://stackoverflow.com/questions/56467918/pct-change-between-non-adjacent-pairs/56468045#56468045", "title": "pct_change between non-adjacent pairs", "body": "<p>Use <code>periods</code> parameter in <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.pct_change.html#pandas-series-pct-change\" rel=\"nofollow noreferrer\"><code>pd.Series.pct_change</code></a>:</p>\n\n<pre><code>s.pct_change(periods=3)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0     NaN\n1     NaN\n2     NaN\n3    3.00\n4    1.50\n5    1.00\n6    0.75\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1993923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87c685afe3f0396fc73e5d649c8e05c?s=128&d=identicon&r=PG", "display_name": "JoseGzz", "link": "https://stackoverflow.com/users/1993923/josegzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 56468045, "answer_count": 2, "score": 2, "last_activity_date": 1559769227, "creation_date": 1559768308, "last_edit_date": 1559769227, "question_id": 56467918, "link": "https://stackoverflow.com/questions/56467918/pct-change-between-non-adjacent-pairs", "title": "pct_change between non-adjacent pairs", "body": "<p>I'm trying to calculate the pct_change in a Pandas series but not in the regular way in which changes are calculated between adjacent elements, but within elements two places apart.</p>\n\n<p>For instance: </p>\n\n<pre><code>pd.Series([1, 2, 3, 4, 5, 6, 7])\n\n0    1\n1    2\n2    3\n3    4\n4    5\n5    6\n6    7\ndtype: int64\n</code></pre>\n\n<p>Compare <code>1</code> with <code>4</code>, <code>2</code> with <code>5</code>, <code>3</code> with <code>6</code> and <code>4</code> with <code>7</code> (strides of 3).</p>\n"}, {"tags": ["python", "keras"], "answers": [{"tags": [], "owner": {"reputation": 1022, "user_id": 9571777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98786057346c3043da8d183457d4161?s=128&d=identicon&r=PG&f=1", "display_name": "TheLoneDeranger", "link": "https://stackoverflow.com/users/9571777/thelonederanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1559784905, "creation_date": 1559784905, "answer_id": 56469920, "question_id": 56467912, "link": "https://stackoverflow.com/questions/56467912/keras-prints-out-result-of-every-batch-in-a-single-epoch-why-is-that/56469920#56469920", "title": "Keras prints out result of every batch in a single epoch, why is that?", "body": "<p>That looks like an interaction with a notebook/kernel environment.</p>\n\n<p>You may prefer the results if you change <code>verbose=1</code> to <code>verbose=2</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 2092888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04a0e6881825d56aef2c7cff747af51?s=128&d=identicon&r=PG", "display_name": "user2092888", "link": "https://stackoverflow.com/users/2092888/user2092888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 502, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1559784905, "creation_date": 1559768298, "question_id": 56467912, "link": "https://stackoverflow.com/questions/56467912/keras-prints-out-result-of-every-batch-in-a-single-epoch-why-is-that", "title": "Keras prints out result of every batch in a single epoch, why is that?", "body": "<p>As described in Keras documentation, the verbose=1 asks the keras to print out results in a progress bar. But sometimes keras prints out the results of every batch, which makes a very messy printout report (see below). I wonder why is that? I mean, the only setup is the parameter of verbose, isn't it?</p>\n\n<p>My code is simple:</p>\n\n<blockquote>\n  <p>history = model.fit(X_shuffle, y_scores_one_hot, \n                      validation_split=0.2, verbose = 1,\n                      epochs = 100, batch_size = 50) </p>\n</blockquote>\n\n<p>Wrong printout:</p>\n\n<blockquote>\n  <p>Epoch 1/100\n  5750/8107 [====================>.........] - ETA: 5:03 - loss: 1.3690 - acc: 0.520 - ETA: 1:42 - loss: 1.3600 - acc: 0.533 - ETA: 1:02 - loss: 1.3994 - acc: 0.500 - ETA: 39s - loss: 1.4173 - acc: 0.482 - ETA: 29s - loss: 1.4189 - acc: 0.47 - ETA: 23s - loss: 1.4320 - acc: 0.46 - ETA: 19s - loss: 1.4432 - acc: 0.46 - ETA: 16s - loss: 1.4373 - acc: 0.46 - ETA: 14s - loss: 1.4318 - acc: 0.46 - ETA: 12s - loss: 1.4322 - acc: 0.46 - ETA: 11s - loss: 1.4314 - acc: 0.46 - ETA: 10s - loss: 1.4342 - acc: 0.46 - ETA: 10s - loss: 1.4386 - acc: 0.45 - ETA: 9s - loss: 1.4399 - acc: 0.4557 - ETA: 8s - loss: 1.4373 - acc: 0.458 - ETA: 7s - loss: 1.4418 - acc: 0.453 - ETA: 7s - loss: 1.4419 - acc: 0.454 - ETA: 6s - loss: 1.4435 - acc: 0.453 - ETA: 6s - loss: 1.4421 - acc: 0.453 - ETA: 6s - loss: 1.4439 - acc: 0.451 - ETA: 5s - loss: 1.4437 - acc: 0.452 - ETA: 5s - loss: 1.4388 - acc: 0.456 - ETA: 5s - loss: 1.4430 - acc: 0.453 - ETA: 4s - loss: 1.4440 - acc: 0.452 - ETA: 4s - loss: 1.4428 - acc: 0.452 - ETA: 4s - loss: 1.4469 - acc: 0.449 - ETA: 4s - loss: 1.4471 - acc: 0.450 - ETA: 3s - loss: 1.4517 - acc: 0.445 - ETA: 3s - loss: 1.4489</p>\n</blockquote>\n\n<p>I expected something like:</p>\n\n<blockquote>\n  <p>Epoch 1/100\n  3009/3009 [==============================] - 30s 10ms/step - loss: 1.5875 - acc: 0.2795 - val_loss: 1.5542 - val_acc: 0.4130</p>\n  \n  <p>Epoch 2/100\n  3009/3009 [==============================] - 27s 9ms/step - loss: 1.5049 - acc: 0.4403 - val_loss: 1.4963 - val_acc: 0.4130</p>\n</blockquote>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qpropertyanimation"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559768532, "post_id": 56467904, "comment_id": 99527391, "body": "From what I understand that you put 100000 to indicate that there is a flicker when you resize the widget when the animation is still active, am I correct?"}, {"owner": {"reputation": 1094, "user_id": 2983568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OBk5Y.jpg?s=128&g=1", "display_name": "evilmandarine", "link": "https://stackoverflow.com/users/2983568/evilmandarine"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559809064, "post_id": 56467904, "comment_id": 99537542, "body": "@eyllanesc 1. yes, sorry that was a bad copy paste. 2. Not quite, it&#39;s more to check that the &quot;flicker&quot; is directly related to the animation, because when I resize, the animation seems to restart. The animation stops. Then when I resize, it seems to restart and cause the flickering while resizing."}, {"owner": {"reputation": 1094, "user_id": 2983568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OBk5Y.jpg?s=128&g=1", "display_name": "evilmandarine", "link": "https://stackoverflow.com/users/2983568/evilmandarine"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559810152, "post_id": 56467904, "comment_id": 99538083, "body": "@eyllanesc simplified the question and added a working full example. Seems the issue is resizing causes repaint and repaint causes the animation to run again."}], "owner": {"reputation": 1094, "user_id": 2983568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OBk5Y.jpg?s=128&g=1", "display_name": "evilmandarine", "link": "https://stackoverflow.com/users/2983568/evilmandarine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559812813, "creation_date": 1559768254, "last_edit_date": 1559812813, "question_id": 56467904, "link": "https://stackoverflow.com/questions/56467904/qpropertyanimation-on-widget-opacity-restarts-on-resize-causing-the-window-to-bl", "title": "QPropertyAnimation on widget opacity restarts on resize causing the window to blink/flicker", "body": "<p>I have this code as follows:</p>\n\n<pre><code>import sys\n\nfrom PyQt5.QtCore    import *\nfrom PyQt5.QtGui     import *\nfrom PyQt5.QtWidgets import *\n\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n\n    w    = QWidget()\n    eff  = QGraphicsOpacityEffect(w)\n    anim = QPropertyAnimation(eff, b\"opacity\")\n    btn  = QPushButton(\"Button\", w)\n    btn.clicked.connect(w.close)\n\n    eff.setOpacity(0)\n    w.setAutoFillBackground(True)\n    w.setGraphicsEffect(eff)\n    w.show()\n\n    anim.setDuration(10000)\n    anim.setStartValue(0)\n    anim.setEndValue(1)\n    anim.start()\n\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>It works fine (fade in effect). However, when I resize the window, the animation restarts, causing the window to blink/flicker during resize. If I remove the call to animate after the call to show, no more blink (but no more fade in).</p>\n\n<p>Moreover, after some time, resizing to a much bigger size causes a white rectangle over a black background to be displayed.</p>\n\n<p>Is there something I am missing?</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This is the behavior I am looking for (background remains white, i.e. opacity=1, after the animation run once). Works with the following code but does not look like best practice to do it like this.</p>\n\n<pre><code>import sys, time\n\nfrom PyQt5.QtCore    import *\nfrom PyQt5.QtGui     import *\nfrom PyQt5.QtWidgets import *\n\n\nclass MyWidget(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.w = QWidget()\n        self.w.setMinimumSize(400,400)\n        self.w.resizeEvent = self.selfOnResize # added this\n\n    def animate(self):\n        self.eff  = QGraphicsOpacityEffect(self.w)\n        self.anim = QPropertyAnimation(self.eff, b\"opacity\")\n        self.btn  = QPushButton(\"Button\", self.w)\n        self.btn.clicked.connect(self.w.close)\n\n        self.eff.setOpacity(0)\n        self.w.setAutoFillBackground(True)\n        self.w.setGraphicsEffect(self.eff)\n        self.w.show()\n\n        self.anim.setDuration(100000)\n        self.anim.setStartValue(0)\n        self.anim.setEndValue(1)\n        self.anim.start()\n\n    # this fixes the issue but looks like a dirty hack\n    def selfOnResize(self, event):\n        self.eff.setOpacity(1) \n        # print(event)\n\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    w = MyWidget()\n    w.animate()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "opencv", "computer-vision", "snapshot", "roi"], "comments": [{"owner": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 0, "creation_date": 1559769593, "post_id": 56467902, "comment_id": 99527789, "body": "Do you want to select the ROI using the mouse?"}, {"owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "reply_to_user": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 0, "creation_date": 1559769714, "post_id": 56467902, "comment_id": 99527832, "body": "Thanks! Yes!, like the method used on the link."}, {"owner": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 0, "creation_date": 1559769837, "post_id": 56467902, "comment_id": 99527881, "body": "Take a look at the opencv mouse callback function: <a href=\"https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_gui/py_mouse_handling/py_mouse_handling.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.0-beta/doc/py_tutorials/py_gui/&hellip;</a>"}, {"owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "reply_to_user": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 1, "creation_date": 1559770622, "post_id": 56467902, "comment_id": 99528154, "body": "@StephenMeschke Thanks! I&#39;m going to read this."}], "answers": [{"comments": [{"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1559802618, "post_id": 56470904, "comment_id": 99534641, "body": "how you put video inside? I couldn`t figure out"}, {"owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "reply_to_user": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1559834310, "post_id": 56470904, "comment_id": 99551557, "body": "@DrYuanShenghai On the line 5, only change &#39;fedex.mp4&#39; for your video. For use the webcam, I&#39;m put the lines: <code>self.capture = cv2.VideoCapture(0)</code>"}, {"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1559834516, "post_id": 56470904, "comment_id": 99551674, "body": "sry I mean how to put video in stackoverflow post?"}, {"owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "edited": false, "score": 0, "creation_date": 1559834612, "post_id": 56470904, "comment_id": 99551724, "body": "@nathancy Thank u very much!, I&#39;m try to use on a live video, without stop, because I need that the screenshots have the same dimension."}, {"owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "reply_to_user": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1559835085, "post_id": 56470904, "comment_id": 99551995, "body": "@DrYuanShenghai Oh!, that&#39;s not a video is a .gif, the code is the same for an image, for example for the image above  is <code>![](https:&#47;&#47;i.stack.imgur.com&#47;GRKut.gif)</code>. You can also covert any video to a gif."}, {"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "reply_to_user": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "edited": false, "score": 0, "creation_date": 1559849907, "post_id": 56470904, "comment_id": 99558357, "body": "@AugustoMeneses You can modify the code to allow it to take ROIs on live video but you may not get the exact frame capture since its moving so fast. Consider accepting the answer to let others know your problem has been solved :)"}], "tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": true, "score": 5, "last_activity_date": 1559795365, "creation_date": 1559795365, "answer_id": 56470904, "question_id": 56467902, "link": "https://stackoverflow.com/questions/56467902/select-a-static-roi-on-webcam-video-on-python-opencv/56470904#56470904", "title": "Select a static ROI on webcam video on python openCV", "body": "<p><a href=\"https://i.stack.imgur.com/GRKut.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GRKut.gif\" alt=\"enter image description here\"></a></p>\n\n<p>Here's a widget to select static ROIs from a video frame. Essentially the idea is to use <code>cv2.setMouseCallback()</code> and event handlers to detect if the mouse has been clicked or released. For this implementation, you can extract coordinates by holding down the left mouse button and dragging to select the desired ROI. You can reset the ROI using the right mouse button. To use the widget, press <code>c</code> to pause the video and start cropping. Then you are free to select the ROI. Once you have selected your ROI, press <code>c</code> again to crop the desired section. To resume the video, press <code>r</code>.</p>\n\n<pre><code>import cv2\n\nclass staticROI(object):\n    def __init__(self):\n        self.capture = cv2.VideoCapture('fedex.mp4')\n\n        # Bounding box reference points and boolean if we are extracting coordinates\n        self.image_coordinates = []\n        self.extract = False\n        self.selected_ROI = False\n\n        self.update()\n\n    def update(self):\n        while True:\n            if self.capture.isOpened():\n                # Read frame\n                (self.status, self.frame) = self.capture.read()\n                cv2.imshow('image', self.frame)\n                key = cv2.waitKey(2)\n\n                # Crop image\n                if key == ord('c'):\n                    self.clone = self.frame.copy()\n                    cv2.namedWindow('image')\n                    cv2.setMouseCallback('image', self.extract_coordinates)\n                    while True:\n                        key = cv2.waitKey(2)\n                        cv2.imshow('image', self.clone)\n\n                        # Crop and display cropped image\n                        if key == ord('c'):\n                            self.crop_ROI()\n                            self.show_cropped_ROI()\n\n                        # Resume video\n                        if key == ord('r'):\n                            break\n                # Close program with keyboard 'q'\n                if key == ord('q'):\n                    cv2.destroyAllWindows()\n                    exit(1)\n            else:\n                pass\n\n    def extract_coordinates(self, event, x, y, flags, parameters):\n        # Record starting (x,y) coordinates on left mouse button click\n        if event == cv2.EVENT_LBUTTONDOWN:\n            self.image_coordinates = [(x,y)]\n            self.extract = True\n\n        # Record ending (x,y) coordintes on left mouse bottom release\n        elif event == cv2.EVENT_LBUTTONUP:\n            self.image_coordinates.append((x,y))\n            self.extract = False\n\n            self.selected_ROI = True\n\n            # Draw rectangle around ROI\n            cv2.rectangle(self.clone, self.image_coordinates[0], self.image_coordinates[1], (0,255,0), 2)\n\n        # Clear drawing boxes on right mouse button click\n        elif event == cv2.EVENT_RBUTTONDOWN:\n            self.clone = self.frame.copy()\n            self.selected_ROI = False\n\n    def crop_ROI(self):\n        if self.selected_ROI:\n            self.cropped_image = self.frame.copy()\n\n            x1 = self.image_coordinates[0][0]\n            y1 = self.image_coordinates[0][1]\n            x2 = self.image_coordinates[1][0]\n            y2 = self.image_coordinates[1][1]\n\n            self.cropped_image = self.cropped_image[y1:y2, x1:x2]\n\n            print('Cropped image: {} {}'.format(self.image_coordinates[0], self.image_coordinates[1]))\n        else:\n            print('Select ROI to crop before cropping')\n\n    def show_cropped_ROI(self):\n        cv2.imshow('cropped image', self.cropped_image)\n\nif __name__ == '__main__':\n    static_ROI = staticROI()\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8544360, "user_type": "registered", "profile_image": "https://graph.facebook.com/968290703236234/picture?type=large", "display_name": "Augusto Meneses", "link": "https://stackoverflow.com/users/8544360/augusto-meneses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5975, "favorite_count": 1, "accepted_answer_id": 56470904, "answer_count": 1, "score": 2, "last_activity_date": 1582583390, "creation_date": 1559768253, "last_edit_date": 1582583390, "question_id": 56467902, "link": "https://stackoverflow.com/questions/56467902/select-a-static-roi-on-webcam-video-on-python-opencv", "title": "Select a static ROI on webcam video on python openCV", "body": "<p>I need to selec a ROI (region of interest), or work area, on a live video from my webcam and take a snapshot of ONLY this work area or ROI, but I can't found how to do this.</p>\n\n<p>In this page <a href=\"https://www.learnopencv.com/how-to-select-a-bounding-box-roi-in-opencv-cpp-python/\" rel=\"nofollow noreferrer\">https://www.learnopencv.com/how-to-select-a-bounding-box-roi-in-opencv-cpp-python/</a> have a code for draw a ROI but only with images, not a live video. </p>\n\n<pre><code>import cv2\ncam = cv2.VideoCapture(0)\ncam.set(cv2.CAP_PROP_FRAME_WIDTH, 1280)\ncam.set(cv2.CAP_PROP_FRAME_HEIGHT, 720)\ncv2.namedWindow(\"test\")\n\nimg_counter = 0\n\nwhile True:\n    ret, frame = cam.read()\n    cv2.imshow(\"test\", frame)\n    if not ret:\n        break\n    k = cv2.waitKey(1)\n\n    if k % 256 == 27:\n        # ESC pressed\n        print(\"Escape hit, closing...\")\n        break\n    elif k % 256 == 32:\n        # SPACE pressed\n        img_name = \"opencv_frame_{}.png\".format(img_counter)\n        cv2.imwrite(img_name, frame)\n        print(\"{} written!\".format(img_name))\n        img_counter += 1\n\ncam.release()\n\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>This code take a snapshot with space key but not draw a ROI area. \nThanks in advance!</p>\n"}, {"tags": ["python", "mysql", "mysql-workbench"], "comments": [{"owner": {"reputation": 1221, "user_id": 5003873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e25015ad7062a1768c514e31c0cf3?s=128&d=identicon&r=PG&f=1", "display_name": "Rashid &#39;Lee&#39; Ibrahim", "link": "https://stackoverflow.com/users/5003873/rashid-lee-ibrahim"}, "edited": false, "score": 0, "creation_date": 1559768460, "post_id": 56467895, "comment_id": 99527365, "body": "Why are you using contains instead of days = {}?"}, {"owner": {"reputation": 131, "user_id": 11506931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SfuNVJ4YlhE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIb4yqCxYZhV7H1oPiFlEVbT8geQ/mo/photo.jpg?sz=128", "display_name": "Daniel C Jacobs", "link": "https://stackoverflow.com/users/11506931/daniel-c-jacobs"}, "reply_to_user": {"reputation": 1221, "user_id": 5003873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e25015ad7062a1768c514e31c0cf3?s=128&d=identicon&r=PG&f=1", "display_name": "Rashid &#39;Lee&#39; Ibrahim", "link": "https://stackoverflow.com/users/5003873/rashid-lee-ibrahim"}, "edited": false, "score": 0, "creation_date": 1559768678, "post_id": 56467895, "comment_id": 99527441, "body": "Because days could contain all the possible days I wan&#39;t to execute the event on, so if the event is done every day, days would be &quot;1234567&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 5345050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJo3x.jpg?s=128&g=1", "display_name": "dolgom", "link": "https://stackoverflow.com/users/5345050/dolgom"}, "is_accepted": true, "score": 0, "last_activity_date": 1559770473, "creation_date": 1559770473, "answer_id": 56468325, "question_id": 56467895, "link": "https://stackoverflow.com/questions/56467895/how-can-i-check-for-a-digit-or-character-in-an-sql-table-column/56468325#56468325", "title": "How can I check for a digit or character in an SQL table column?", "body": "<p>Do you use MySQL?</p>\n\n<p>MySQL doesn't have 'CONTAINS' operator, use 'LIKE' operator.</p>\n\n<pre><code>\"SELECT * FROM schedule WHERE days LIKE '%{}%'\".format(day)\n</code></pre>\n\n<p><code>%</code> is the wildcard character that can be any characters.</p>\n"}, {"tags": [], "owner": {"reputation": 1221, "user_id": 5003873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e25015ad7062a1768c514e31c0cf3?s=128&d=identicon&r=PG&f=1", "display_name": "Rashid &#39;Lee&#39; Ibrahim", "link": "https://stackoverflow.com/users/5003873/rashid-lee-ibrahim"}, "is_accepted": false, "score": 0, "last_activity_date": 1559783317, "creation_date": 1559783317, "answer_id": 56469797, "question_id": 56467895, "link": "https://stackoverflow.com/questions/56467895/how-can-i-check-for-a-digit-or-character-in-an-sql-table-column/56469797#56469797", "title": "How can I check for a digit or character in an SQL table column?", "body": "<p>So if you take your string of days and split them so that you get a list and then you can use the IN statement to select for any of the values.</p>\n\n<p>So let's say you have:</p>\n\n<pre><code>days = '1234567'\n</code></pre>\n\n<p>Convert this to a list.</p>\n\n<pre><code>days = days.split('')  # Split on an empty string to split each character.\n</code></pre>\n\n<p>Then your SQL looks like this:</p>\n\n<pre><code>\"SELECT * FROM schedule WHERE days in ({})\".format(days)\n</code></pre>\n\n<p>The select will search for any values in a given array. The format is just inserting the python array. Also this will work even if the original value of days is only one day. i.e. days = '1'</p>\n"}], "owner": {"reputation": 131, "user_id": 11506931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SfuNVJ4YlhE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIb4yqCxYZhV7H1oPiFlEVbT8geQ/mo/photo.jpg?sz=128", "display_name": "Daniel C Jacobs", "link": "https://stackoverflow.com/users/11506931/daniel-c-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 56468325, "answer_count": 2, "score": 0, "last_activity_date": 1559783317, "creation_date": 1559768224, "last_edit_date": 1559768756, "question_id": 56467895, "link": "https://stackoverflow.com/questions/56467895/how-can-i-check-for-a-digit-or-character-in-an-sql-table-column", "title": "How can I check for a digit or character in an SQL table column?", "body": "<p>I feel like this question has to have been answered somewhere, but I read through tons of posts and tried many variations of solutions and I can't get this to work.  </p>\n\n<p>I have a database table called <code>schedule</code> and I simply want to select the rows that contain a specific digit from the <code>days</code> column using python.  The days column contains some combination of numbers from 1 to 7 each representing a day of the week.  It could be a single day, or a combination of days(\"1\", \"135\", \"1234567\", etc). </p>\n\n<p>Given a specific day index (e.g. 3), I want to select all the rows from schedule that have a 3 in the days column.</p>\n\n<p>I made the column type VARCHAR, because I figured it would be easier to check a string than an integer value.</p>\n\n<p>This is my current statement, where day is the index (e.g. 3) of the selected day:</p>\n\n<pre><code>\"SELECT * FROM schedule WHERE CONTAINS(days, '{}')\".format(day)\n</code></pre>\n\n<p>I continually get this error:</p>\n\n<pre><code>You have an error in your SQL syntax; check the manual that corresponds to \nyour MySQL server version for the right syntax to use near '(days, '3')'\n</code></pre>\n\n<p>What can I fix to make this work?</p>\n"}, {"tags": ["python", "pandas", "numpy", "profiling"], "comments": [{"owner": {"reputation": 260, "user_id": 11098911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QV0dW.jpg?s=128&g=1", "display_name": "Mr. Snrub", "link": "https://stackoverflow.com/users/11098911/mr-snrub"}, "edited": false, "score": 0, "creation_date": 1559854710, "post_id": 56467882, "comment_id": 99560153, "body": "Partial answer to my own question, or at least some introductory info. In my code I was iterating through the DataFrame (using <code>iterrows()</code>) in many places because I thought there was no good way to do it otherwise. Then I found the excellent tutorial <a href=\"https://engineering.upside.com/a-beginners-guide-to-optimizing-pandas-code-for-speed-c09ef2c6a4d6\" rel=\"nofollow noreferrer\">A Beginner\u2019s Guide to Optimizing Pandas Code for Speed</a>, which taught me that 1) if you must iterate, there are better ways to do it, and 2) avoiding iteration (i.e. vectorizing the operations) might be easier than you think."}, {"owner": {"reputation": 720, "user_id": 1136018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/156a4257f3fce1e40f89b42f1ea3522d?s=128&d=identicon&r=PG", "display_name": "Jack Valmadre", "link": "https://stackoverflow.com/users/1136018/jack-valmadre"}, "edited": false, "score": 0, "creation_date": 1592998465, "post_id": 56467882, "comment_id": 110624193, "body": "To find where these functions are being called, you can use the <code>callers</code> property in <code>cProfile</code> or <code>pstats</code>"}], "owner": {"reputation": 260, "user_id": 11098911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QV0dW.jpg?s=128&g=1", "display_name": "Mr. Snrub", "link": "https://stackoverflow.com/users/11098911/mr-snrub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559768155, "creation_date": 1559768155, "question_id": 56467882, "link": "https://stackoverflow.com/questions/56467882/how-to-extract-useful-info-from-cprofile-with-pandas-and-numpy", "title": "How to extract useful info from cProfile with Pandas and Numpy?", "body": "<p>I have some Python code that is generating a large data set via numerical simulation. The code is using Numpy for a lot of the calculations and Pandas for a lot of the top-level data. The data sets are large so the code is running slowly, and now I'm trying to see if I can use cProfile to find and fix some hot spots.</p>\n\n<p>The trouble is that cProfile is identifying a lot of the hot spots as pieces of code within Pandas, within Numpy, and/or Python builtins. Here are the cProfile statistics sorted by 'tottime' (total time within the function itself). Note that I'm obscuring project name and file names since the code itself is not owned by me and I don't have permission to share details.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foo.sort_stats('tottime').print_stats(50)\nWed Jun  5 13:18:28 2019    c:\\localwork\\xxxxxx\\profile_data\n\n         297514385 function calls (291105230 primitive calls) in 306.898 seconds\n\n   Ordered by: internal time\n   List reduced from 4141 to 50 due to restriction &lt;50&gt;\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   281307   31.918    0.000   34.731    0.000 {pandas._libs.lib.infer_dtype}\n      800   31.443    0.039   31.476    0.039 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\numpy\\lib\\function_base.py:4703(delete)\n   109668   23.837    0.000   23.837    0.000 {method 'clear' of 'dict' objects}\n   153481   19.369    0.000   19.369    0.000 {method 'ravel' of 'numpy.ndarray' objects}\n  5861614   14.182    0.000   78.492    0.000 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\indexes\\base.py:3090(get_value)\n  5861614    8.891    0.000    8.891    0.000 {method 'get_value' of 'pandas._libs.index.IndexEngine' objects}\n  5861614    8.376    0.000   99.084    0.000 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\series.py:764(__getitem__)\n 26840695    7.032    0.000   11.009    0.000 {built-in method builtins.isinstance}\n 26489324    6.547    0.000   14.410    0.000 {built-in method builtins.getattr}\n 11846279    6.177    0.000   19.809    0.000 {pandas._libs.lib.values_from_object}\n[...]\n</code></pre>\n\n<p>Is there a sensible way for me to figure out which parts of my code are excessively leaning on these library functions and built-ins? I anticipate one answer would be \"look at the cumulative time statistics, that will probably indicate where these costly calls are originating\". The cumulative times give a little bit of insight:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foo.sort_stats('cumulative').print_stats(50)\nWed Jun  5 13:18:28 2019    c:\\localwork\\xxxxxx\\profile_data\n\n         297514385 function calls (291105230 primitive calls) in 306.898 seconds\n\n   Ordered by: cumulative time\n   List reduced from 4141 to 50 due to restriction &lt;50&gt;\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n    643/1    0.007    0.000  307.043  307.043 {built-in method builtins.exec}\n        1    0.000    0.000  307.043  307.043 xxxxxx.py:1(&lt;module&gt;)\n        1    0.002    0.002  306.014  306.014 xxxxxx.py:264(write_xxx_data)\n        1    0.187    0.187  305.991  305.991 xxxxxx.py:256(write_yyyy_data)\n        1    0.077    0.077  305.797  305.797 xxxxxx.py:250(make_zzzzzzz)\n        1    0.108    0.108  187.845  187.845 xxxxxx.py:224(generate_xyzxyz)\n   108223    1.977    0.000  142.816    0.001 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\indexing.py:298(_setitem_with_indexer)\n        1    0.799    0.799  126.733  126.733 xxxxxx.py:63(populate_abcabc_data)\n        1    0.030    0.030  117.874  117.874 xxxxxx.py:253(&lt;listcomp&gt;)\n     7201    0.077    0.000  116.612    0.016 C:\\LocalWork\\xxxxxx\\yyyyyyyyyyyy.py:234(xxx_yyyyyy)\n   108021    0.497    0.000  112.908    0.001 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\indexing.py:182(__setitem__)\n  5861614    8.376    0.000   99.084    0.000 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\series.py:764(__getitem__)\n   110024    0.917    0.000   81.210    0.001 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\internals.py:3500(apply)\n   108021    0.185    0.000   80.685    0.001 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\internals.py:3692(setitem)\n  5861614   14.182    0.000   78.492    0.000 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\indexes\\base.py:3090(get_value)\n   108021    1.887    0.000   73.064    0.001 C:\\LocalWork\\WPy-3710\\python-3.7.1.amd64\\lib\\site-packages\\pandas\\core\\internals.py:819(setitem)\n[...]\n</code></pre>\n\n<p>Is there a good way to pin down the hot spots -- better than \"crawl through xxxxxx.py and search for all places where Pandas might be inferring a dataype, and where Numpy might be deleting objects\"...?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "is_accepted": true, "score": 2, "last_activity_date": 1559768366, "creation_date": 1559768366, "answer_id": 56467927, "question_id": 56467871, "link": "https://stackoverflow.com/questions/56467871/how-to-set-the-thousands-place-separator-in-pandas-read-csv/56467927#56467927", "title": "How to set the thousands place separator in pandas read_csv?", "body": "<p>There is a <code>thousands</code> parameter for this. Try,</p>\n\n<pre><code>arq_pedido = pd.read_csv('Pedido.csv', delimiter=\";\", encoding = \"ISO-8859-1\", thousands=\".\")\n</code></pre>\n\n<p>You may also wish to set <code>decimal=\",\"</code> to handle decimal numbers correcltly.</p>\n"}, {"tags": [], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768801, "creation_date": 1559768801, "answer_id": 56468022, "question_id": 56467871, "link": "https://stackoverflow.com/questions/56467871/how-to-set-the-thousands-place-separator-in-pandas-read-csv/56468022#56468022", "title": "How to set the thousands place separator in pandas read_csv?", "body": "<p>The <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\" rel=\"nofollow noreferrer\"><code>read_csv</code></a> method has parameters for just about every conceivable scenario.  You're probably interested in the <code>thousands</code> parameter for the thousands place separator, the <code>decimal</code> parameter for the decimal point, and the <code>sep</code> parameter for the column separator.</p>\n\n<pre><code>import pandas as pd\nimport io\nfoobar = io.StringIO(\"foo;bar \\n 1,000; 2.0\")\npd.read_csv(foobar, thousands=\",\", decimal=\".\", sep=\";\")\n#    foo  bar \n#0  1000   2.0\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9505825, "user_type": "registered", "profile_image": "https://graph.facebook.com/1856660561064164/picture?type=large", "display_name": "Matheus Rocha", "link": "https://stackoverflow.com/users/9505825/matheus-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 56467927, "answer_count": 2, "score": 1, "last_activity_date": 1559768877, "creation_date": 1559768121, "last_edit_date": 1559768877, "question_id": 56467871, "link": "https://stackoverflow.com/questions/56467871/how-to-set-the-thousands-place-separator-in-pandas-read-csv", "title": "How to set the thousands place separator in pandas read_csv?", "body": "<p>I'm reading a csv file like this:</p>\n\n<pre><code>import pandas as pd\n\narq_pedido = pd.read_csv('Pedido.csv',delimiter=\";\", encoding = \"ISO-8859-1\")\n</code></pre>\n\n<p>I have a ID column (this column is supposed to be an INT column, but in Brazil (Portuguese), thousand's numbers is represented like this: 1.000 instead of 1000.\nSo, my ID column is <code>dfloat64</code> at the moment.</p>\n\n<p>I have one ID who is <code>1.908 (1908)</code>, and this number shows <code>1.9080000000000001.</code> How can I transform dfloat64 to int? Or, how can I replace dots (.) for comma (,), to turned that numbers in thousands ones?</p>\n"}, {"tags": ["python", "indentation"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 4, "creation_date": 1559768095, "post_id": 56467846, "comment_id": 99527236, "body": "You might have mixed tabs and spaces."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1559768179, "post_id": 56467846, "comment_id": 99527263, "body": "Is there a way to check if I have?"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1559768343, "post_id": 56467846, "comment_id": 99527320, "body": "Every good IDE or editor would show you. (Yes, there&#39;s a hidden message in the sentence.)"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1559768376, "post_id": 56467846, "comment_id": 99527337, "body": "This exact code doesn&#39;t appear to mix tabs and spaces, and works for me when I use dummy data for <code>rows</code>. Check the line above this code."}, {"owner": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "edited": false, "score": 0, "creation_date": 1559768743, "post_id": 56467846, "comment_id": 99527461, "body": "If you copy and paste exactly what you have here back into your project do you get the same error still?"}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "edited": false, "score": 0, "creation_date": 1559768838, "post_id": 56467846, "comment_id": 99527493, "body": "This code is the first part a function. And yes it is indented correctly."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "reply_to_user": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "edited": false, "score": 1, "creation_date": 1559768910, "post_id": 56467846, "comment_id": 99527526, "body": "@silver it still throws the error code at me"}, {"owner": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "edited": false, "score": 0, "creation_date": 1559769187, "post_id": 56467846, "comment_id": 99527641, "body": "@Justin is could you give us more context, like values for  <code>rows</code> and <code>output</code>? or maybe the rest of the function? I can&#39;t seem to replicate your issue."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "reply_to_user": {"reputation": 316, "user_id": 6709958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f04af48f08452961acd44941337f6c?s=128&d=identicon&r=PG&f=1", "display_name": "silver", "link": "https://stackoverflow.com/users/6709958/silver"}, "edited": false, "score": 0, "creation_date": 1559770462, "post_id": 56467846, "comment_id": 99528095, "body": "@silver I updated the question with more context. It is part of a program I am building to solve sudoku puzzles. square_interpreter() is a function that determines which numbers are in each 3 by 3 square of the puzzle using the numbers in each row."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "edited": false, "score": 0, "creation_date": 1559771341, "post_id": 56467846, "comment_id": 99528432, "body": "<code>output </code> is just a temporary storage container for a list. It&#39;s initialized with an empty list."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "edited": false, "score": 0, "creation_date": 1559777083, "post_id": 56467846, "comment_id": 99529784, "body": "I&#39;ve just coded the function differently so it doesn&#39;t give the error! There are more details at the end of the question. Thanks, for your help :)"}], "answers": [{"comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1559768231, "post_id": 56467891, "comment_id": 99527278, "body": "That wouldn&#39;t cause an indent error in my experience."}, {"owner": {"reputation": 1, "user_id": 11601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e6a35b2730f5ec16950b10218a486?s=128&d=identicon&r=PG&f=1", "display_name": "VertigoLol", "link": "https://stackoverflow.com/users/11601555/vertigolol"}, "edited": false, "score": 0, "creation_date": 1559768386, "post_id": 56467891, "comment_id": 99527338, "body": "Ahh, what IDE do you use by the way? Just curious."}, {"owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "edited": false, "score": 0, "creation_date": 1559768509, "post_id": 56467891, "comment_id": 99527389, "body": "I use the IDLE (Python 3.7 32-bit) one that installed when i installed python on my laptop."}], "tags": [], "owner": {"reputation": 1, "user_id": 11601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e6a35b2730f5ec16950b10218a486?s=128&d=identicon&r=PG&f=1", "display_name": "VertigoLol", "link": "https://stackoverflow.com/users/11601555/vertigolol"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768424, "last_edit_date": 1559768424, "creation_date": 1559768206, "answer_id": 56467891, "question_id": 56467846, "link": "https://stackoverflow.com/questions/56467846/why-do-i-keep-getting-expected-an-indented-block-error/56467891#56467891", "title": "Why do I keep getting &quot;expected an indented block&quot; error?", "body": "<pre class=\"lang-py prettyprint-override\"><code>for x in range(9):\n    output = []\n    if x in [0,1,2]:\n        for n in range(3):\n            if x == 0:\n                for i in range(3):\n                    output.append(rows[n][i])\n            elif x == 1:\n                for i in range(3,6):\n                    output.append(rows[n][i])\n            elif x == 2:\n                for i in range(6,9):\n                    output.append(rows[n][i])\n</code></pre>\n\n<p>Your issues seems to be on line 2. output = [] is indented a tab too far.</p>\n\n<p>Edit: Apparently not, but either way at least thats fixed now :D</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f3286367c3fafa17e0e54bdde6ed6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gsatya", "link": "https://stackoverflow.com/users/11585465/gsatya"}, "is_accepted": false, "score": 0, "last_activity_date": 1559774335, "creation_date": 1559774335, "answer_id": 56468937, "question_id": 56467846, "link": "https://stackoverflow.com/questions/56467846/why-do-i-keep-getting-expected-an-indented-block-error/56468937#56468937", "title": "Why do I keep getting &quot;expected an indented block&quot; error?", "body": "<pre><code>rows=[[1,2,3,4,5,6,7,8,9],[2,3,2,4,5,3,5,3,2],[2,3,2,4,5,8,9,2,1]]\noutput = []\nfor x in range(9):\n    if x in [0,1,2]:\n        for n in range(3):\n            if x == 0:\n                for i in range(3):\n                    output.append(rows[n][i])\n            elif x == 1:\n                for i in range(3,6):\n                    output.append(rows[n][i])\n            elif x == 2:\n                for i in range(6,9):\n                    output.append(rows[n][i])\nprint(output)\n</code></pre>\n\n<p>Above is corrected version of your previously posted code<br>\nI am using a dummy rows array<br>\noutput array should be defined outside the for loop<br>\nThis does not give any error.<br>\nI hope it helps         </p>\n"}], "owner": {"reputation": 1, "user_id": 11606029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pm0o3uWQ-P8/AAAAAAAAAAI/AAAAAAAAADw/ZF4R8wbY2L8/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/11606029/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1559776904, "creation_date": 1559767991, "last_edit_date": 1559776904, "question_id": 56467846, "link": "https://stackoverflow.com/questions/56467846/why-do-i-keep-getting-expected-an-indented-block-error", "title": "Why do I keep getting &quot;expected an indented block&quot; error?", "body": "<p>I have a bunch of if... elif statements iterating in a for loop. I am getting a \"expected an indented block\" error in the middle of an elif. I can't figure out why. </p>\n\n<p>I am running my code in python 3.7.2 IDLE on Windows. I've looked through other threads, but none of them helped me find the issue.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>rows = [[],[],[],[],[],[],[],[],[]] # rows is a list of 9 lists of nine integers each between 0 and 9 (inclusive)\nsquares = [] # Where square_interpreter() .append()'s the lists of integers\n\ndef square_interpreter(): # Determines the 9 values in each 3 by 3 square in a Sudoku puzzle\n    for x in range(9):\n        output = []\n        if x in [0,1,2]:\n            for n in range(3):\n                if x == 0:\n                    for i in range(3):\n                        output.append(rows[n][i])\n                elif x == 1:\n                    for i in range(3,6):\n                        output.append(rows[n][i])\n                elif x == 2:\n                    for i in range(6,9):\n                        output.append(rows[n][i])\n        elif x in [3,4,5]:\n            for n in range(3,6):\n                if x == 3:\n                    for i in range(3):\n                        output.append(rows[n][i])\n                elif x == 4:\n                    for i in range(3,6):\n                        output.append(rows[n][i])\n                elif x == 5:\n                    for i in range(6,9):\n                        output.append(rows[n][i])\n        else:\n            for n in range(6,9):\n                if x == 6:\n                    for i in range(3):\n                        output.append(rows[n][i])\n                elif x == 7:\n                    for i in range(3,6):\n                        output.append(rows[n][i])\n                elif x == 8:\n                    for i in range(6,9):\n                        output.append(rows[n][i])\n        squares.append(output)\n</code></pre>\n\n<p>The error occurs on line 12. The message highlights the space between elif and x == 1:</p>\n\n<p>Conclusion of the matter:\nI've figured out an entirely different way to do the same thing so that it doesn't give me the error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def square_interpreter():\n    keys_in_square = [[l + n for l in 'ABC' for n in '123'],\n                      [l + n for l in 'ABC' for n in '456'],\n                      [l + n for l in 'ABC' for n in '789'],\n                      [l + n for l in 'DEF' for n in '123'],\n                      [l + n for l in 'DEF' for n in '456'],\n                      [l + n for l in 'DEF' for n in '789'],\n                      [l + n for l in 'GHI' for n in '123'],\n                      [l + n for l in 'GHI' for n in '456'],\n                      [l + n for l in 'GHI' for n in '789']]\n    for index in range(9):\n        output = []\n        for key in keys_in_square[index]:\n            output.append(values[key])\n        squares.append(output)\n</code></pre>\n\n<p>I know this looks a lot different and it probably doesn't make any sense without the context, but it does the same thing. It's actually a lot shorter than the old version. Thanks for all your kind help :)</p>\n"}, {"tags": ["python", "pandas", "for-loop", "filenames", "export-to-excel"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 11369868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s34Za.jpg?s=128&g=1", "display_name": "BenG", "link": "https://stackoverflow.com/users/11369868/beng"}, "edited": false, "score": 0, "creation_date": 1559773651, "post_id": 56468303, "comment_id": 99529097, "body": "Thank you very much for the thorough response. Your method creates the dynamic filenames as requested, but each file contains all states. Print(x) returns all the data, and print(grouped.groups) returns: {&#39;AK&#39;: Int64Index([1, 2], dtype=&#39;int64&#39;), &#39;TX&#39;: Int64Index([0, 3, 4, 5, 6, 7, 8, 9, 10, 12, 16, 17, 18], dtype=&#39;int64&#39;), &#39;WA&#39;: Int64Index([11, 13, 14, 15, 19], dtype=&#39;int64&#39;)}. So that seems to be the right groups, but am I doing something wrong with groupby?"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 106, "user_id": 11369868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s34Za.jpg?s=128&g=1", "display_name": "BenG", "link": "https://stackoverflow.com/users/11369868/beng"}, "edited": false, "score": 1, "creation_date": 1559774881, "post_id": 56468303, "comment_id": 99529379, "body": "@BenG I have edited my answer to something that <i>may</i> be suitable for you. I haven&#39;t used <code>.groupby()</code> before though, so I would simply be doing the googling for you if I were to try to help further."}, {"owner": {"reputation": 106, "user_id": 11369868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s34Za.jpg?s=128&g=1", "display_name": "BenG", "link": "https://stackoverflow.com/users/11369868/beng"}, "edited": false, "score": 0, "creation_date": 1559775209, "post_id": 56468303, "comment_id": 99529434, "body": "That&#39;s ok, I&#39;ll figure it out eventually. Thanks for your help!"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 1, "last_activity_date": 1559774165, "last_edit_date": 1559774165, "creation_date": 1559770369, "answer_id": 56468303, "question_id": 56467820, "link": "https://stackoverflow.com/questions/56467820/how-to-write-to-excel-dynamic-filename-in-for-loop-based-on-groupby-field-in-pan/56468303#56468303", "title": "How to write to_excel dynamic filename in for loop based on groupby field in PANDAS?", "body": "<p>The error is telling you a very straightforward explanation of why it is not working -> <code>x</code> <em>is a <strong>tuple</strong> and <strong>not</strong> a <strong>string</em></strong>! Personally I would try printing it and verifying that it is indeed what I want:</p>\n\n<pre><code>for x in grouped:\n    print(x)\n</code></pre>\n\n<p>This will show you something like <code>(item0, item1, item2, ..., itemN)</code></p>\n\n<p>Now you can either select which item is the string you are looking for like:</p>\n\n<pre><code>for x in grouped:\n    df.to_excel('test files/ranking_{}.xlsx'.format(x[0]), index=False)\n</code></pre>\n\n<p>Where the <code>x[0]</code> will tell it to get <code>item0</code> (ideally a string, but you can also cast it to one as shown below). Alternatively you can create a filename like <code>test files/ranking_(item0, item1, item2, ..., itemN).xlsx</code> (using the string representation of the tuple) with something such as:</p>\n\n<pre><code>for x in grouped:\n    df.to_excel('test files/ranking_{}.xlsx'.format(x), index=False)\n</code></pre>\n\n<p>It should be noted that the <code>.format()</code> method is implicitly calling the <code>str()</code> function when it is needed though (since <a href=\"https://www.geeksforgeeks.org/python-format-function/\" rel=\"nofollow noreferrer\"><code>.format()</code> is different than concatenation and is usually a lot cleaner to read, faster to run, and just generally better</a> than concatenation). If you realllllllly want to use concatenation you would just have to make it a string yourself:</p>\n\n<pre><code>for x in grouped:\n    df.to_excel('test files/ranking_' + str(x) + '.xlsx', index=False)\n</code></pre>\n\n<p>But please, transition to <code>.format()</code>!! If you have a newer version of python you can even skip to the latest and greatest <a href=\"https://realpython.com/python-f-strings/\" rel=\"nofollow noreferrer\"><em>f strings</em></a></p>\n\n<p>It also seems you should review <a href=\"https://www.tutorialspoint.com/python_pandas/python_pandas_groupby.htm\" rel=\"nofollow noreferrer\"><code>pandas</code> groupby function</a></p>\n\n<p>Their example leads me to believe you need:</p>\n\n<pre><code>for name, group in grouped:\n    group.to_excel('test files/ranking_{}.xlsx'.format(name), index=False)\n</code></pre>\n\n<p>However, I am not an <code>pandas</code> expert and have not tested this to be accurate.</p>\n"}], "owner": {"reputation": 106, "user_id": 11369868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s34Za.jpg?s=128&g=1", "display_name": "BenG", "link": "https://stackoverflow.com/users/11369868/beng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 1, "accepted_answer_id": 56468303, "answer_count": 1, "score": 1, "last_activity_date": 1559838985, "creation_date": 1559767814, "last_edit_date": 1559838985, "question_id": 56467820, "link": "https://stackoverflow.com/questions/56467820/how-to-write-to-excel-dynamic-filename-in-for-loop-based-on-groupby-field-in-pan", "title": "How to write to_excel dynamic filename in for loop based on groupby field in PANDAS?", "body": "<p>I have a dataset of schools in each state. I want to group the schools by state, run some calculations to create a ranking, and then export each ranking to separate .xlsx files named \"state.xlsx\". For example, AK school data into ranking_alaska.xlsx, TX schools into ranking_texas.xlsx, etc. </p>\n\n<p>Example data here: <a href=\"https://docs.google.com/spreadsheets/d/1-wdmIz_-AILcBqzvpwAFGZfXqhq8oDRrYFVVdkjZ10o/edit?usp=sharing\" rel=\"nofollow noreferrer\">https://docs.google.com/spreadsheets/d/1-wdmIz_-AILcBqzvpwAFGZfXqhq8oDRrYFVVdkjZ10o/edit?usp=sharing</a></p>\n\n<p>I've tried concatenating the state field onto the filename, but I get TypeError: can only concatenate str (not \"tuple\") to str. When I run the code with a static file name, it creates a file just for the state in the first row of data.</p>\n\n<pre><code>\ndf = pd.read_excel(\"ranker_test.xlsx\", sheet_name='DATA')\n\ngrouped = df.groupby('state')\n\nfor x in grouped:\n    df.to_excel('test files/ranking_' + x + '.xlsx', index=False)\n</code></pre>\n\n<p>I'd like to add the rest of the code into the for loop and make the file names dynamic so that 50 state ranking excel files are produced when ran, each named after the respective state.</p>\n\n<p>EDIT:\nI've used Reedinator's input to create the file names, but having trouble exporting each group to excel. It either returns the whole dataframe of all groups to each file or fails to execute. This is my code:</p>\n\n<pre><code>for group in grouped:\n    group.to_frame().to_excel('test files/ranking_{}.xlsx'.format(group[0]), index=False)\n</code></pre>\n\n<p>But I get AttributeError: 'tuple' object has no attribute 'to_frame'</p>\n\n<p>How can I convert the tuple into a DataFrame to send to excel?</p>\n"}, {"tags": ["python", "linux", "usb", "pyserial"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8538376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DE8U4.jpg?s=128&g=1", "display_name": "Vincenzo S.", "link": "https://stackoverflow.com/users/8538376/vincenzo-s"}, "edited": false, "score": 0, "creation_date": 1559770580, "post_id": 56467913, "comment_id": 99528129, "body": "I tried as you suggested writing <code>&#39;AT\\r\\n&#39;</code> and also with  <code>&#39;AT\\r&#39;</code> and  <code>&#39;AT\\n&#39;</code>. Unfortunately doesn&#39;t change the results. Thank you for the advice about the receiving code, I&#39;ll improve it after I&#39;ve resolved the communication problem."}, {"owner": {"reputation": 3, "user_id": 6741971, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-82cpgVZsHCA/AAAAAAAAAAI/AAAAAAAABUw/aUMl6sb4AaY/photo.jpg?sz=128", "display_name": "Jairo Mejia", "link": "https://stackoverflow.com/users/6741971/jairo-mejia"}, "reply_to_user": {"reputation": 1, "user_id": 8538376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DE8U4.jpg?s=128&g=1", "display_name": "Vincenzo S.", "link": "https://stackoverflow.com/users/8538376/vincenzo-s"}, "edited": false, "score": 0, "creation_date": 1559771276, "post_id": 56467913, "comment_id": 99528409, "body": "What are you using to send the information between your computer and your module? Have you tested also the baud rate? Maybe you are using a higher baud rate for the device"}], "tags": [], "owner": {"reputation": 3, "user_id": 6741971, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-82cpgVZsHCA/AAAAAAAAAAI/AAAAAAAABUw/aUMl6sb4AaY/photo.jpg?sz=128", "display_name": "Jairo Mejia", "link": "https://stackoverflow.com/users/6741971/jairo-mejia"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768299, "creation_date": 1559768299, "answer_id": 56467913, "question_id": 56467815, "link": "https://stackoverflow.com/questions/56467815/sending-at-command-to-usb-gsm-modem-return-empty-string-in-python/56467913#56467913", "title": "Sending &#39;AT&#39; command to usb GSM modem return empty string in Python", "body": "<p>The AT Commands work according to a specific sintaxis. In this case, I would say that the problem is that you are sending the <code>AT</code> without the ending lines. It is necessary that you send all the <strong>AT Commands</strong> at the end with the carrier and end line character. So in this case would be <code>AT\\r\\n</code>, and all your commands to communicate with the device should be finished in the same way. </p>\n\n<pre><code>if __name__ == '__main__' :\nser = initSerial()          # Setup initial variables and configurations\nwrite_cmd(ser,'AT\\r\\n')     # Write a command to the serial pipe\nprint(read_until(ser))      # Read from the serial pipe until \nser.close()\n</code></pre>\n\n<p>The response of every AT Command changes depends which command you are using. I suggest that you use another code more elaborate to receive the RX Signal.</p>\n"}, {"tags": [], "owner": {"reputation": 2561, "user_id": 11476836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c679da3a7b9adc6f980fb698e3f46b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos G.", "link": "https://stackoverflow.com/users/11476836/marcos-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1559844674, "creation_date": 1559844674, "answer_id": 56482981, "question_id": 56467815, "link": "https://stackoverflow.com/questions/56467815/sending-at-command-to-usb-gsm-modem-return-empty-string-in-python/56482981#56482981", "title": "Sending &#39;AT&#39; command to usb GSM modem return empty string in Python", "body": "<p>It seems that something is preventing your code returning with an error.</p>\n\n<p>For Python 3.x <code>serial.read()</code> returns bytes so where you do:</p>\n\n<pre><code>resp += tmp\n</code></pre>\n\n<p>You should get an error (I got it when I run your code connecting two serial ports together in my laptop).</p>\n\n<p>Change that line to:</p>\n\n<pre><code>resp += tmp.decode()\n</code></pre>\n\n<p>See here for more details: <a href=\"https://stackoverflow.com/questions/26523342/why-does-pyserial-for-python3k-return-bytes-while-python2k-returns-strings\">Why does pyserial for python3k return bytes while python2k returns strings?</a></p>\n\n<p>The only reason I can think of for you not to get this type conversion error is because you're not receiving anything at all on your port (your code jumps that line on an empty reading from the port). If that's the case I guess you would have to check your settings because your Python code works just fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 8538376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DE8U4.jpg?s=128&g=1", "display_name": "Vincenzo S.", "link": "https://stackoverflow.com/users/8538376/vincenzo-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 900, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569983800, "creation_date": 1559767805, "last_edit_date": 1559770707, "question_id": 56467815, "link": "https://stackoverflow.com/questions/56467815/sending-at-command-to-usb-gsm-modem-return-empty-string-in-python", "title": "Sending &#39;AT&#39; command to usb GSM modem return empty string in Python", "body": "<h3>The Problem</h3>\n\n<p>I'm setting up a script in python to communicate with my USB GSM Modem through AT commands.<br>\nSo to test the communication is working correctly I first try to send a simple <code>AT</code> expecting to receive an <code>OK</code>, but instead with every <code>read</code> request I still receive only empty strings.<br>\nI'm following the AT standard as explained here: <a href=\"https://www.engineersgarage.com/tutorials/at-commands\" rel=\"nofollow noreferrer\">AT Commands</a>  </p>\n\n<h3>So far</h3>\n\n<p>Working on Linux Mint 18.<br>\nI found more information about my GSM with <a href=\"https://www.freedesktop.org/software/ModemManager/man/1.0.0/mmcli.8.html\" rel=\"nofollow noreferrer\">mmcli</a>.<br>\nLaunching <code>mmcli -L</code> result in: \n</p>\n\n<pre><code>$ mmcli -L\n    /org/freedesktop/ModemManager1/Modem/0 [D-Link,Inc  ] D-Link DWM-157\n</code></pre>\n\n<p>and then the informations:\n</p>\n\n<pre><code>$ mmcli -m /org/freedesktop/ModemManager1/Modem/0 \n  --------------------------\n  General  |      dbus path: /org/freedesktop/ModemManager1/Modem/0\n           |      device id: 741cce5b5eb40d9ac1c9a1dc0dfa2356f0abe3e7\n  --------------------------\n  Hardware |   manufacturer: D-Link,Inc  \n           |          model: D-Link DWM-157\n           |       revision: MOLY.WR8.W1231.DC.WG.MP.V3\n           |   h/w revision: MTK2\n           |      supported: gsm-umts\n           |        current: gsm-umts\n           |   equipment id: 355620059754511\n  --------------------------\n  System   |         device: /sys/devices/pci0000:00/0000:00:1d.7/usb1/1-5\n           |        drivers: cdc_mbim, option1\n           |         plugin: Generic\n           |   primary port: cdc-wdm2\n           |          ports: ttyUSB0 (at), wwp0s29f7u5 (net), ttyUSB1 (at), \n           |                 cdc-wdm2 (mbim)\n  --------------------------\n  Numbers  |            own: 393515383117\n  --------------------------\n  Status   | unlock retries: unknown (0)\n           |          state: registered\n           |    power state: on\n           |    access tech: hsdpa, hsupa\n           | signal quality: 0% (cached)\n  --------------------------\n  Modes    |      supported: allowed: 2g, 3g; preferred: none\n           |        current: allowed: 2g, 3g; preferred: none\n  --------------------------\n  IP       |      supported: ipv4, ipv6, ipv4v6\n  --------------------------\n  3GPP     |           imei: 355620059754511\n           |  enabled locks: net-pers, net-sub-pers, provider-pers, corp-pers\n           |    operator id: 22250\n           |  operator name: 22250\n           |   registration: home\n  --------------------------\n  SIM      |      dbus path: /org/freedesktop/ModemManager1/SIM/0\n\n</code></pre>\n\n<p>So to check my GSM is able to respond to <code>AT</code> i used <a href=\"https://linux.die.net/man/1/socat\" rel=\"nofollow noreferrer\">socat</a>:<br>\n</p>\n\n<pre><code>$ sudo socat - /dev/ttyUSB0\nAT\n\nOK\n</code></pre>\n\n<h3>Final Goal</h3>\n\n<p>I'm aiming to create a script that allows me to send multiple SMS to a list of numbers.</p>\n\n<h3>Complete Script</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>import serial, time\n\ndef initSerial() :\n    print ('initialize...', end='')\n    ser = serial.Serial()\n    ser.port = \"/dev/ttyUSB0\"\n    ser.baudrate = 115200\n    ser.timeout = 5                     #timeout block read\n    ser.writeTimeout = 2\n    ser.bytesize = serial.EIGHTBITS     #number of bits per bytes\n    ser.parity = serial.PARITY_NONE     #set parity check: no parity\n    ser.stopbits = serial.STOPBITS_ONE  #number of stop bits\n    ser.xonxoff = False                 #disable software flow control\n    ser.rtscts = False                  #disable hardware (RTS/CTS) flow control\n    ser.dsrdtr = False                  #disable hardware (DSR/DTR) flow control\n    ser.open()\n    print('done')\n    return ser\n\n\ndef write_cmd(ser,cmd) :\n    if ser.isOpen() :   \n        print('writing: \" {} \" in {}'.format(cmd, ser.name))\n        ser.write(cmd.encode('utf-8'))  # Write the 'cmd' encoded with utf-8\n\n\ndef read_until(ser,terminator='\\n'):\n    print ('reading {}...'.format(ser.name))\n    resp = ''\n    while not ( resp.endswith(terminator) or resp.endswith('\\r') ) : # If the string is not terminated\n        tmp = ser.read(1)   # Read and store in a temp variable\n        if not tmp : return resp # timeout occured\n        resp += tmp\n    return resp  \n\n\nif __name__ == '__main__' :\n    ser = initSerial()          # Setup initial variables and configurations\n    write_cmd(ser,'AT\\r\\n')         # Write a command to the serial pipe\n    print(read_until(ser))      # Read from the serial pipe until \n    ser.close()\n</code></pre>\n\n<p>This is the output:\n</p>\n\n<pre><code>$ sudo python3 main.py \n  initialize...done\n  writing: \" AT \" in /dev/ttyUSB0\n  reading /dev/ttyUSB0...\n\n</code></pre>\n\n<p>There is a blank line there.</p>\n"}, {"tags": ["python", "web-scraping", "robobrowser"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1559772121, "post_id": 56467811, "comment_id": 99528686, "body": "what does doesn&#39;t work mean? Is there an error? Also, can you share the url?"}, {"owner": {"reputation": 10332, "user_id": 302343, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RrFm0.png?s=128&g=1", "display_name": "Timur", "link": "https://stackoverflow.com/users/302343/timur"}, "edited": false, "score": 0, "creation_date": 1559772250, "post_id": 56467811, "comment_id": 99528721, "body": "Please, share the snippet or a sample HTML that you want to scrap, and explain what is the expected result. It is otherwise hard to understand based on the sample code only."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "edited": false, "score": 0, "creation_date": 1559827802, "post_id": 56468611, "comment_id": 99547660, "body": "Sorry guys, it is my first time using Stack Overflow. Everything is new to me. Anyway here are some more details.  This is the original URL that I want to scrape:  <a href=\"https://www.yelp.com/search?cflt=restaurants&amp;find_loc=Memphis%2C%20TN&amp;sortby=rating&amp;attrs=RestaurantsPriceRange2.3%2CRestaurantsPriceRange2.4\" rel=\"nofollow noreferrer\">yelp.com/&hellip;</a>  Expected result:  1. Flight Restaurant &amp; Wine Bar 4.5 ratings 914 reviews American (new), Wine Bars, Venues &amp; Events Spaces  2.McEwan&#39;s Memphis 4.5 rating etc..."}, {"owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "edited": false, "score": 0, "creation_date": 1559829498, "post_id": 56468611, "comment_id": 99548803, "body": "your code works, but it returns a whole list of &#39;aria-label&#39;s for all restaurants i.e. [4.5 star rating, 4.5 star rating, 4.0 star rating, 4.0 star rating etc....] I want them separated and shown one each for each restaurant. Can you help?"}, {"owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "edited": false, "score": 0, "creation_date": 1559831839, "post_id": 56468611, "comment_id": 99550166, "body": "yup <a href=\"https://www.yelp.com/search?cflt=restaurants&amp;find_loc=Memphis%2C%20TN&amp;sortby=rating&amp;attrs=RestaurantsPriceRange2.3%2CRestaurantsPriceRange2.4\" rel=\"nofollow noreferrer\">yelp.com/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "edited": false, "score": 1, "creation_date": 1559835495, "post_id": 56468611, "comment_id": 99552212, "body": "Awesome! Kudos for you!"}, {"owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "edited": false, "score": 0, "creation_date": 1559855340, "post_id": 56468611, "comment_id": 99560340, "body": "can you help me on this further? I got stuck again... plz see the follow-up question below."}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 0, "last_activity_date": 1559832559, "last_edit_date": 1559832559, "creation_date": 1559772087, "answer_id": 56468611, "question_id": 56467811, "link": "https://stackoverflow.com/questions/56467811/how-to-scrape-aria-label-with-robobrowser/56468611#56468611", "title": "How to scrape &#39;aria-label&#39; with robobrowser", "body": "<p>You could dump content from robobrowser into bs4. Then with bs4 4.7.1 use :has and :contains to target required items.</p>\n\n<pre><code>from bs4 import BeautifulSoup\n#...your code\nsoup = browser.parsed\ndata = [(item.select_one('[class*=businessName]').text.replace('\\xa0',''), item.select_one('[class*=\"i-stars\"]')['aria-label']) for item in soup.select('li:has(h3:contains(\"All Results\")) ~ li:has([class*=businessName])')]\nprint(data)\n</code></pre>\n\n<p>Sample of results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FytsI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FytsI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 11606147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b668b5905b2436a37b6c8f9bfa50a686?s=128&d=identicon&r=PG&f=1", "display_name": "Donghee Lee", "link": "https://stackoverflow.com/users/11606147/donghee-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 56468611, "answer_count": 1, "score": 0, "last_activity_date": 1559855223, "creation_date": 1559767755, "last_edit_date": 1559772103, "question_id": 56467811, "link": "https://stackoverflow.com/questions/56467811/how-to-scrape-aria-label-with-robobrowser", "title": "How to scrape &#39;aria-label&#39; with robobrowser", "body": "<p>I'm new to web scraping and currently using robobrowser to scrape a webpage.\nI'm trying to scrape the value of 'aria-label' under a certain class, but don't know how to do.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>from robobrowser import RoboBrowser\nbrowser = RoboBrowser(history=True, parser='html.parser')\nbrowser.open('https://www.scrapingwebsite.com')\nlinks = browser.find_all(class_='searchResult__373c0__1yggB')\nfor link in links:\n    print(link.find(class_='big_braket_class').text)\n    problem_part = link.find(class_='subsidiary_class')\n    print(problem_part.get('aria-label'))\n</code></pre>\n\n<p>It simply doesn't work. Is there any way to make it work?\nThx</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559768191, "post_id": 56467835, "comment_id": 99527267, "body": "No because that would not take into account that there might be a subgroup with less than 3 &quot;area&quot; but which is still the max with respect to &quot;day_time_counter&quot;. I should get what I have shown as the output."}, {"owner": {"reputation": 202, "user_id": 6063482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a204c92571d46ccabc3416f91ef658cf?s=128&d=identicon&r=PG&f=1", "display_name": "masasa", "link": "https://stackoverflow.com/users/6063482/masasa"}, "reply_to_user": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559768251, "post_id": 56467835, "comment_id": 99527286, "body": "then df[df.area == 3].groupby([&#39;area&#39;, &#39;date&#39;, &#39;day_time&#39;]).max()"}, {"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559768348, "post_id": 56467835, "comment_id": 99527323, "body": "I mean the 3 different possible &quot;area&quot; values (1,2,3), no that area=3. I will try to make my question more clear, but it is not straight forward."}, {"owner": {"reputation": 202, "user_id": 6063482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a204c92571d46ccabc3416f91ef658cf?s=128&d=identicon&r=PG&f=1", "display_name": "masasa", "link": "https://stackoverflow.com/users/6063482/masasa"}, "reply_to_user": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559768403, "post_id": 56467835, "comment_id": 99527344, "body": "you can as many conditions you want , i did not understand the output you wish, you can do the following:   df[(df.area == 3) &amp; (more conditions) &amp; (more conditons)].groupby([&#39;area&#39;, &#39;date&#39;, &#39;day_time&#39;]).max()"}, {"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559769423, "post_id": 56467835, "comment_id": 99527728, "body": "Hi, I edited to show the df&#39;s as tables, maybe it is more clear like that. I do not want to filter for a specific area number, I do want the subgroups which contain the three rows of the three different &quot;area&quot; values."}, {"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559805760, "post_id": 56467835, "comment_id": 99535993, "body": "Hi, I ran your code and it says <code>AttributeError: &#39;function&#39; object has no attribute &#39;index&#39;</code>. The code seems too convoluted, not sure if it is the best approach. But thanks anyway!"}], "tags": [], "owner": {"reputation": 202, "user_id": 6063482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a204c92571d46ccabc3416f91ef658cf?s=128&d=identicon&r=PG&f=1", "display_name": "masasa", "link": "https://stackoverflow.com/users/6063482/masasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1559773222, "last_edit_date": 1559773222, "creation_date": 1559767925, "answer_id": 56467835, "question_id": 56467764, "link": "https://stackoverflow.com/questions/56467764/how-to-filter-pandas-data-frame-by-subgroups-with-a-condition-in-another-column/56467835#56467835", "title": "How to filter pandas data frame by subgroups with a condition in another column value", "body": "<p>i think your wanted output should be different (evening have day time 3)\nso i think my code is correct:</p>\n\n<p>choseing the max that has all 3 areas:</p>\n\n<pre><code>m = df.groupby(['date', 'day_time', 'day_time_counter']).area\nnew_df = []\nfor k , _ in m:\n    if len(set( _ )) != 3:\n        continue\n    new_df.append(df[(df.date == k[0]) &amp; (df.day_time == k[1]) &amp; (df.day_time_counter == k[2])])\nnew_df = pd.concat(new_df, join='outer')\n</code></pre>\n\n<p>filtering the max daytimes :</p>\n\n<pre><code>g = new_df.groupby(['date', 'day_time'])\ng.filter(lambda x: len(set(x.area)) == 3)\ng = g.day_time_counter.max()\n</code></pre>\n\n<p>and wrapping up:</p>\n\n<pre><code>itr = [df[(df.date == idx[0]) &amp; (df.day_time == idx[1]) &amp; (df.day_time_counter == value)] for idx, value in zip(g.index, g)]\nnew_df = pd.concat(itr, join='outer')\nnew_df\n</code></pre>\n\n<p>tell me if this is what you wanted</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559769275, "post_id": 56467897, "comment_id": 99527669, "body": "Hi, thanks but that gives a completely different output of what is needed."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559769300, "post_id": 56467897, "comment_id": 99527678, "body": "What output is needed?"}, {"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559769502, "post_id": 56467897, "comment_id": 99527756, "body": "I included as a table in the question."}, {"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559806724, "post_id": 56467897, "comment_id": 99536419, "body": "Hi, looks like it nows solves the problem. Thanks a lot. However I chose the another answer because it is more compact and straightforward."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1559771404, "last_edit_date": 1559771404, "creation_date": 1559768231, "answer_id": 56467897, "question_id": 56467764, "link": "https://stackoverflow.com/questions/56467764/how-to-filter-pandas-data-frame-by-subgroups-with-a-condition-in-another-column/56467897#56467897", "title": "How to filter pandas data frame by subgroups with a condition in another column value", "body": "<p>IIUC:</p>\n\n<pre><code>df['group'] = df['area'].eq(1).cumsum()\n\ndf_out = df.groupby(['date','day_time','group'])[['area','day_time_counter']]\\\n           .agg({'area':lambda x: x.nunique()==3,'day_time_counter':'sum'})\n\ndf_out.loc[df_out['area'], 'day_time_counter']\\\n      .rank(ascending=False, method='dense').eq(1).loc[lambda x: x]\\\n      .to_frame()\\\n      .merge(df, on=['date','day_time','group'], suffixes=('_',''))[df.columns]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   area        date day_time  day_time_counter  group\n0     1  2019-06-05  evening                 2      5\n1     2  2019-06-05  evening                 2      5\n2     3  2019-06-05  evening                 2      5\n3     1  2019-06-05  morning                 2      2\n4     2  2019-06-05  morning                 2      2\n5     3  2019-06-05  morning                 2      2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "edited": false, "score": 0, "creation_date": 1559806644, "post_id": 56468445, "comment_id": 99536392, "body": "Thanks, this solves it! And is not as horrible as I though it would be :)"}], "tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": true, "score": 1, "last_activity_date": 1559771173, "creation_date": 1559771173, "answer_id": 56468445, "question_id": 56467764, "link": "https://stackoverflow.com/questions/56467764/how-to-filter-pandas-data-frame-by-subgroups-with-a-condition-in-another-column/56468445#56468445", "title": "How to filter pandas data frame by subgroups with a condition in another column value", "body": "<p>The following will produce what you're looking for:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>area_grp_cols = [\"date\", \"day_time\", \"day_time_counter\"]\ncounter_grp_cols = [\"date\", \"day_time\"]\nresult = (\n    df.assign(area_count=lambda df: df.groupby(area_grp_cols)['area']\n                                      .transform(\"count\"))\n      .loc[lambda df: df[\"area_count\"] == 3]\n      .drop(columns=[\"area_count\"])\n      .loc[lambda df: df[\"day_time_counter\"]\n                      == df.groupby(counter_grp_cols)[\"day_time_counter\"]\n                           .transform(\"max\")]\n)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>          date day_time  day_time_counter  area\n3   2019-06-05  morning                 2     1\n4   2019-06-05  morning                 2     2\n5   2019-06-05  morning                 2     3\n10  2019-06-05  evening                 2     1\n11  2019-06-05  evening                 2     2\n12  2019-06-05  evening                 2     3\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 8345152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd0rx.jpg?s=128&g=1", "display_name": "Juan M. Grados", "link": "https://stackoverflow.com/users/8345152/juan-m-grados"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 56468445, "answer_count": 3, "score": 0, "last_activity_date": 1559823562, "creation_date": 1559767519, "last_edit_date": 1559823562, "question_id": 56467764, "link": "https://stackoverflow.com/questions/56467764/how-to-filter-pandas-data-frame-by-subgroups-with-a-condition-in-another-column", "title": "How to filter pandas data frame by subgroups with a condition in another column value", "body": "<p>I am struggling finding a solution, here is the problem.</p>\n\n<p>I have a dataframe of the form:</p>\n\n<pre><code>date         day_time   day_time_counter  area\n\n2019-06-05   morning    1                 1\n2019-06-05   morning    1                 2\n2019-06-05   morning    1                 3\n\n2019-06-05   morning    2                 1\n2019-06-05   morning    2                 2\n2019-06-05   morning    2                 3\n\n2019-06-05   morning    3                 1\n2019-06-05   morning    3                 3\n\n2019-06-05   evening    1                 1\n2019-06-05   evening    1                 2\n\n2019-06-05   evening    2                 1\n2019-06-05   evening    2                 2\n2019-06-05   evening    2                 3\n</code></pre>\n\n<p>There are some subgroups per \"date\", \"date_time\" and \"day_time_counter\" (which I separated them with a blank line to make them more visible).\nEach sub group can have one, two or three \"area\".</p>\n\n<p>What I want is to filter the df in order to get only one subgroup per \"date\" and \"day_time\" which has the largest \"day_time_counter\" AND contain the 3 different \"area\" values (1, 2, 3), i.e. the selected subgroups should contain 3 rows, one per \"area\" value.</p>\n\n<p>Meaning, after filtering the df above, I should get as OUTPUT:</p>\n\n<pre><code>date         day_time   day_time_counter  area\n\n2019-06-05   morning    2                 1\n2019-06-05   morning    2                 2\n2019-06-05   morning    2                 3\n\n2019-06-05   evening    2                 1\n2019-06-05   evening    2                 2\n2019-06-05   evening    2                 3\n</code></pre>\n\n<p>So far I only managed to filter by getting the subgroup with the largest \"day_time_counter\" but I do not know how to include the condition of being a complete subgroup with the 3 \"area\".</p>\n\n<pre><code>df_new = df.sort_values('day_time_counter', ascending=False).drop_duplicates(['area', 'date', 'day_time'])\n</code></pre>\n\n<p>Thanks a lot for your help!</p>\n"}, {"tags": ["python", "python-3.x", "mupdf", "pymupdf"], "comments": [{"owner": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "edited": false, "score": 0, "creation_date": 1559769600, "post_id": 56467667, "comment_id": 99527792, "body": "I don&#39;t think you should have installed fitz, &quot;Modern Nipype Workflow Management&quot;. (<a href=\"https://github.com/kastman/fitz\" rel=\"nofollow noreferrer\">github.com/kastman/fitz</a>), i would uninstall fitz. I see these instructions for installing PymuPDF on ubuntu: <a href=\"https://github.com/pymupdf/PyMuPDF/wiki/Ubuntu-Installation-Experience\" rel=\"nofollow noreferrer\">github.com/pymupdf/PyMuPDF/wiki/Ubuntu-Installation-Experien&zwnj;&#8203;ce</a>"}, {"owner": {"reputation": 301, "user_id": 7967955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ceda515f4f9b66544d77c662a6e4713?s=128&d=identicon&r=PG&f=1", "display_name": "Waqar", "link": "https://stackoverflow.com/users/7967955/waqar"}, "reply_to_user": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "edited": false, "score": 0, "creation_date": 1559770587, "post_id": 56467667, "comment_id": 99528132, "body": "I am basically trying to use fitz module, PyMuPDF and mupdf they doesn&#39;t have some filters like unsupported filter /DCTDecode pypdf2 and few others"}], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 10579182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-REr0C83noM0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCzdt2MIbsfAV4VdClxa-MBRlZ-9g/mo/photo.jpg?sz=128", "display_name": "venkatttaknev", "link": "https://stackoverflow.com/users/10579182/venkatttaknev"}, "reply_to_user": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1578938083, "post_id": 57664670, "comment_id": 105593975, "body": "@Ryan  I tried this solution but still the error persists. I also noticed that in the <i>init</i>.py file, the print function looks more like python 2.7 version . Could the error be cause of that ?"}], "tags": [], "owner": {"reputation": 21, "user_id": 11980664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906eeaffeb6c67d7a8c70427a02eb45a?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/11980664/julien"}, "is_accepted": false, "score": 2, "last_activity_date": 1566858014, "last_edit_date": 1566858014, "creation_date": 1566852003, "answer_id": 57664670, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/57664670#57664670", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>In file <code>/home/waqar/anaconda3/envs/retinanet/lib/python3.6/site-packages/fitz/__init__.py</code> </p>\n\n<p>change </p>\n\n<p><code>from frontend</code> to <code>from fitz.frontend</code></p>\n"}, {"tags": [], "owner": {"reputation": 660, "user_id": 2316519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/170329be1ce84bc56624b97cc6812f58?s=128&d=identicon&r=PG", "display_name": "Ronin", "link": "https://stackoverflow.com/users/2316519/ronin"}, "is_accepted": true, "score": 43, "last_activity_date": 1570793085, "last_edit_date": 1570793085, "creation_date": 1570792667, "answer_id": 58340138, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/58340138#58340138", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>I've solved it by:</p>\n\n<pre><code>pip install PyMuPDF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 557, "user_id": 4474869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee8ace86ab31b311c4f9367bafb11d1?s=128&d=identicon&r=PG", "display_name": "Jorj McKie", "link": "https://stackoverflow.com/users/4474869/jorj-mckie"}, "is_accepted": false, "score": 4, "last_activity_date": 1591906781, "creation_date": 1591906781, "answer_id": 62332877, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/62332877#62332877", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>There is a package named <code>fitz</code> on PyPI. Because PyMuPDF uses the same name, <code>fitz</code>, as its top-level text, both packages cannot co-exist in the same Python - except with the aforementioned change.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 4640611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tsCjh7RJ0S0/AAAAAAAAAAI/AAAAAAAABsA/WsjpT7hgH-s/photo.jpg?sz=128", "display_name": "Ammar Shah", "link": "https://stackoverflow.com/users/4640611/ammar-shah"}, "edited": false, "score": 0, "creation_date": 1614768927, "post_id": 63842725, "comment_id": 117483999, "body": "This actually fixed the issue. Thanks a lot!"}], "tags": [], "owner": {"reputation": 126, "user_id": 12382444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_WFXft8lHpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUsTfDuTaIIn5FMAQTgnMe3lgcfA/photo.jpg?sz=128", "display_name": "anil kumar", "link": "https://stackoverflow.com/users/12382444/anil-kumar"}, "is_accepted": false, "score": 7, "last_activity_date": 1599809924, "creation_date": 1599809924, "answer_id": 63842725, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/63842725#63842725", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>I tried the above solution of <code>pip install PyMuPDF</code>.\nBut it did not work out of the box.</p>\n<p>So, I have used the previous version of PyMuPDF. It worked perfectly for me.</p>\n<pre><code>pip install PyMuPDF==1.16.14\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 545, "user_id": 7784017, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13973c6d641075e245e260220d9ff2d6?s=128&d=identicon&r=PG&f=1", "display_name": "Shayan", "link": "https://stackoverflow.com/users/7784017/shayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1602427315, "creation_date": 1602427315, "answer_id": 64305273, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/64305273#64305273", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>Calling python on your script should solve the issue:</p>\n<pre><code>python script.py\n</code></pre>\n<p>If you don't use the keyword python, you might get the error.</p>\n<p>In my case I was getting:</p>\n<pre><code>ModuleNotFoundError: No module named 'fitz'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 9280355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164e5fb26983e94ffd4a1878ff6561ff?s=128&d=identicon&r=PG&f=1", "display_name": "m.borhan", "link": "https://stackoverflow.com/users/9280355/m-borhan"}, "is_accepted": false, "score": -1, "last_activity_date": 1609890960, "creation_date": 1609890960, "answer_id": 65588268, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/65588268#65588268", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>You could have used pdfplumber. If the following code returns &quot;None&quot;, it's a scanned pdf otherwise it's searchable.</p>\n<pre><code>with pdfplumber.open(file_name) as pdf:\n    page = pdf.pages[0]\n    text = page.extract_text()\n    print(text)\n</code></pre>\n<p>To extract text from scanned pdf, you can use OCRmyPDF. Easy package</p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 9265663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2WCb.jpg?s=128&g=1", "display_name": "W. Dan", "link": "https://stackoverflow.com/users/9265663/w-dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1617674422, "creation_date": 1617674422, "answer_id": 66961820, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message/66961820#66961820", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p><strong>Python3</strong> and you have already installed <strong>PyMuPDF</strong> module.</p>\n<pre><code>pip install --upgrade pip\npip install -U PyMuPDF\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 7967955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ceda515f4f9b66544d77c662a6e4713?s=128&d=identicon&r=PG&f=1", "display_name": "Waqar", "link": "https://stackoverflow.com/users/7967955/waqar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17548, "favorite_count": 1, "accepted_answer_id": 58340138, "answer_count": 7, "score": 17, "last_activity_date": 1617674422, "creation_date": 1559767042, "last_edit_date": 1598880690, "question_id": 56467667, "link": "https://stackoverflow.com/questions/56467667/how-do-i-resolve-no-module-named-frontend-error-message", "title": "How do I resolve &quot;No module named &#39;frontend&#39;&quot; error message?", "body": "<p>I have installed PymuPDF/fitz because am trying to extract images from PDF files.  However, upon running the code below, I am seeing <code>No module named 'frontend'</code>.</p>\n<pre class=\"lang-py prettyprint-override\"><code>    doc = fitz.open(pdf_path)\n            for i in range(len(doc)):\n                for img in doc.getPageImageList(i):\n                    xref = img[0]\n                    pix = fitz.Pixmap(doc, xref)\n                    if pix.n &lt; 5:  # this is GRAY or RGB\n                        pix.writePNG(&quot;p%s-%s.png&quot; % (i, xref))\n                    else:  # CMYK: convert to RGB first\n                        pix1 = fitz.Pixmap(fitz.csRGB, pix)\n                        pix1.writePNG(&quot;p%s-%s.png&quot; % (i, xref))\n                        pix1 = None\n                    pix = None\n</code></pre>\n<p>I have searched but there isn't single report of this kind of error. I have installed PyMuPDF, muPDF and fitz modules</p>\n<p>Here is the error in full:</p>\n<pre><code>    Traceback (most recent call last):\n      File &quot;/home/waqar/PycharmProjects/predator/ExtractFileImage.py&quot;, line 1, in &lt;module&gt;\n        import fitz\n      File &quot;/home/waqar/anaconda3/envs/retinanet/lib/python3.6/site-packages/fitz/__init__.py&quot;, line 1, in &lt;module&gt;\n        from frontend import *\n    ModuleNotFoundError: No module named 'frontend'\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1559768223, "post_id": 56467665, "comment_id": 99527275, "body": "By &quot;doesn&#39;t have data&quot; do you mean it&#39;s 0, or is the check just on the date really?"}, {"owner": {"reputation": 37, "user_id": 11360604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff1c28f2d11251d5e2cd82f901d5409?s=128&d=identicon&r=PG&f=1", "display_name": "nclmteo", "link": "https://stackoverflow.com/users/11360604/nclmteo"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1559769678, "post_id": 56467665, "comment_id": 99527819, "body": "The check is just on the date"}], "answers": [{"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 0, "last_activity_date": 1559768159, "last_edit_date": 1592644375, "creation_date": 1559768159, "answer_id": 56467885, "question_id": 56467665, "link": "https://stackoverflow.com/questions/56467665/project-last-value-in-a-series-to-future-cells-in-python/56467885#56467885", "title": "Project last value in a series to future cells in Python", "body": "<h3><code>where</code> + <code>ffill</code></h3>\n<pre><code>df['Date'] = pd.to_datetime(df.Date)\ndf['Projection'] = df.Actuals.where(df.Date.lt('2019-05-05')).ffill().astype(int)\n\n        Date  Actuals  Projection\n0 2019-05-01        2           2\n1 2019-05-02        7           7\n2 2019-05-03        8           8\n3 2019-05-04        4           4\n4 2019-05-05        1           4\n5 2019-05-06        0           4\n6 2019-05-07        0           4\n7 2019-05-08        0           4\n8 2019-05-09        0           4\n9 2019-05-10        0           4\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11360604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff1c28f2d11251d5e2cd82f901d5409?s=128&d=identicon&r=PG&f=1", "display_name": "nclmteo", "link": "https://stackoverflow.com/users/11360604/nclmteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56467885, "answer_count": 1, "score": 1, "last_activity_date": 1559768159, "creation_date": 1559767030, "question_id": 56467665, "link": "https://stackoverflow.com/questions/56467665/project-last-value-in-a-series-to-future-cells-in-python", "title": "Project last value in a series to future cells in Python", "body": "<p>I have a 2-column dataframe that has 365 rows for every date of the year. This dataframe gets populated as data comes in every day. I want to create another column that outputs 1) historical data for any row that actually has data, i.e. date &lt; today; and 2) yesterday's data for any row that doesn't have actual data, i.e. date >= today.</p>\n\n<p>Say today's date is May 5, 2019:</p>\n\n<pre><code>Date           Actuals     Projection\n05/01/2019     2           2\n05/02/2019     7           7\n05/03/2019     8           8\n05/04/2019     4           4\n05/05/2019     1           4\n05/06/2019     0           4\n05/07/2019     0           4 \n05/08/2019     0           4\n05/09/2019     0           4\n05/10/2019     0           4\n</code></pre>\n\n<p>I've tried a convoluted combination of <code>where</code> and <code>loc</code> but it's not working as expected:</p>\n\n<pre><code>df['Projection'] = where(df['Date'] &lt; date.today(),df['Actuals'],df.loc[df['Date'] == date.today() - timedelta(days=1),['Actuals']])\n</code></pre>\n\n<p>Any idea how I could go about this?</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1559767715, "post_id": 56467656, "comment_id": 99527103, "body": "Please help us understand your expected result. Thanks."}, {"owner": {"reputation": 282, "user_id": 11588396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vDkmR.png?s=128&g=1", "display_name": "Aero Blue", "link": "https://stackoverflow.com/users/11588396/aero-blue"}, "edited": false, "score": 0, "creation_date": 1559767867, "post_id": 56467656, "comment_id": 99527159, "body": "Have you tried the <code>findChildren()</code> function yet? You could just check for empty <code>list</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10441165"}, "reply_to_user": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1559768207, "post_id": 56467656, "comment_id": 99527271, "body": "@&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c I am expecting to obtain all the paragraphs of an article (the content of the article) and add it to a dictionary. However, I don&#39;t want to include all the &quot;junk&quot; such as unnecessary &lt;a&gt; tags that are part of some paragraphs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10441165"}, "reply_to_user": {"reputation": 282, "user_id": 11588396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vDkmR.png?s=128&g=1", "display_name": "Aero Blue", "link": "https://stackoverflow.com/users/11588396/aero-blue"}, "edited": false, "score": 0, "creation_date": 1559768313, "post_id": 56467656, "comment_id": 99527308, "body": "@AeroBlue I&#39;ve already tried that but it wasn&#39;t working"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1559768618, "post_id": 56467656, "comment_id": 99527419, "body": "show the expected text to be returned"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10441165"}, "reply_to_user": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1559768774, "post_id": 56467656, "comment_id": 99527474, "body": "@QHarr That&#39;s the output I aim to get. If I could also remove the tags, it would be even better. &lt;p&gt; In as name to here them deny wise this. As rapid woody my he me which. &lt;/p&gt;&lt;p&gt; Performed suspicion in certainty so frankness by attention pretended.       Newspaper or in tolerably education enjoyment. &lt;/p&gt;&lt;p&gt; When be draw drew ye. Defective in do recommend       suffering. House it seven in spoil tiled court. Sister others marked        fat missed did out use.&lt;/p&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "is_accepted": true, "score": 0, "last_activity_date": 1559768847, "creation_date": 1559768847, "answer_id": 56468036, "question_id": 56467656, "link": "https://stackoverflow.com/questions/56467656/how-to-exclude-tags-from-scraping-that-have-a-specific-tag-as-a-child/56468036#56468036", "title": "How to exclude tags from scraping that have a specific tag as a child", "body": "<p>Use the function get_text(). It will extract the text from paragraphs. Reference: <a href=\"https://www.pythonforbeginners.com/beautifulsoup/beautifulsoup-4-python\" rel=\"nofollow noreferrer\">https://www.pythonforbeginners.com/beautifulsoup/beautifulsoup-4-python</a></p>\n\n<pre><code>from bs4 import BeautifulSoup\ncontents = \"\"\"&lt;div class=\"entry-content clearfix\"&gt;\n  &lt;div class=\"entry-thumbnail&gt;\n  &lt;p&gt; In as name to here them deny wise this. As rapid woody my he me which. &lt;/p&gt;\n  &lt;p&gt; &lt;a href=\"https://blabla\"/&gt; &lt;/p&gt; \n  &lt;p&gt; Performed suspicion in certainty so frankness by attention pretended.\n      Newspaper or in tolerably education enjoyment. &lt;/p&gt;\n  &lt;p&gt; &lt;a href=\"https://blabla\"/&gt; When be draw drew ye. Defective in do recommend\n      suffering. House it seven in spoil tiled court. Sister others marked \n      fat missed did out use.&lt;/p&gt;\n&lt;/div&gt;\"\"\"\nsoup = BeautifulSoup(contents, \"lxml\")\nprint(soup.get_text()) \n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Performed suspicion in certainty so frankness by attention pretended.\n      Newspaper or in tolerably education enjoyment. \n  When be draw drew ye. Defective in do recommend\n      suffering. House it seven in spoil tiled court. Sister others marked \n      fat missed did out use.\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10441165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 56468036, "answer_count": 1, "score": 0, "last_activity_date": 1559768847, "creation_date": 1559766992, "question_id": 56467656, "link": "https://stackoverflow.com/questions/56467656/how-to-exclude-tags-from-scraping-that-have-a-specific-tag-as-a-child", "title": "How to exclude tags from scraping that have a specific tag as a child", "body": "<p>I am trying to get all the paragraphs of an article using BeautifulSoup and exclude the paragraph tags that instead of the paragraph have another tag, such as an  tag in them or if they do have an  tag as a child only get the text of the paragraph. </p>\n\n<p>This is a part of the HTML</p>\n\n<pre><code>&lt;div class=\"entry-content clearfix\"&gt;\n  &lt;div class=\"entry-thumbnail&gt;\n  &lt;p&gt; In as name to here them deny wise this. As rapid woody my he me which. &lt;/p&gt;\n  &lt;p&gt; &lt;a href=\"https://blabla\"/&gt; &lt;/p&gt; \n  &lt;p&gt; Performed suspicion in certainty so frankness by attention pretended.\n      Newspaper or in tolerably education enjoyment. &lt;/p&gt;\n  &lt;p&gt; &lt;a href=\"https://blabla\"/&gt; When be draw drew ye. Defective in do recommend\n      suffering. House it seven in spoil tiled court. Sister others marked \n      fat missed did out use.&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and this is what I have done till now</p>\n\n<pre><code> contents = []\n content = soup.find('div', { \"class\": \"entry-content clearfix\"}).find_all(\"p\")\n    for p in content:\n        if not (p.find(findChildren(\"a\"))):\n            contents[p] = content\n    if (content):\n        dic['content'] = content\n    else: \n        print(\"ARTICLE:\", i, \"HAS NO content\")\n        dic['body'] = \"No content\"\n</code></pre>\n"}, {"tags": ["python", "string", "list", "boolean"], "answers": [{"comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 2, "creation_date": 1559768596, "post_id": 56467711, "comment_id": 99527413, "body": "<code>list(literal_eval(my_string))</code> might be neater"}, {"owner": {"reputation": 339, "user_id": 11224792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e21b1062a1dce63ff7d5499412f4b6c?s=128&d=identicon&r=PG&f=1", "display_name": "yeye", "link": "https://stackoverflow.com/users/11224792/yeye"}, "edited": false, "score": 1, "creation_date": 1559769411, "post_id": 56467711, "comment_id": 99527721, "body": "Your solution works perfectly in the example I&#39;ve provided, but in my case, I have sometimes only one string &quot; &#39;T1&#39; &quot; in my main string in which case the list(literal_eval(my_string)) doesn&#39;t work for my needs."}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": true, "score": 1, "last_activity_date": 1559768879, "last_edit_date": 1559768879, "creation_date": 1559767231, "answer_id": 56467711, "question_id": 56467647, "link": "https://stackoverflow.com/questions/56467647/python-convert-string-of-string-and-bool-to-list/56467711#56467711", "title": "Python Convert String of String and Bool To List", "body": "<p>You can use <code>ast.literal_eval</code> to <a href=\"https://stackoverflow.com/questions/1894269/convert-string-representation-of-list-to-list\">turn a string representation of a list into a list</a>. To make your string a representation of a list, you need to add opening and closing brackets.</p>\n\n<pre><code>from ast import literal_eval\nmy_string = \"'T1', 'T2', 'T3', 'T4', True, False\"\nmy_list = literal_eval(\"[\" + my_string + \"]\")\nprint(my_list)\n#['T1', 'T2', 'T3', 'T4', True, False]\n</code></pre>\n\n<p>You can see the types of the last two elements are <code>bool</code>:</p>\n\n<pre><code>print([type(x) for x in my_list])\n#[str, str, str, str, bool, bool]\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>A neater solution as proposed by <a href=\"https://stackoverflow.com/users/6260170/chris-rands\">@Chris_Rands</a></p>\n\n<pre><code>my_list = list(literal_eval(my_string))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 11224792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e21b1062a1dce63ff7d5499412f4b6c?s=128&d=identicon&r=PG&f=1", "display_name": "yeye", "link": "https://stackoverflow.com/users/11224792/yeye"}, "edited": false, "score": 0, "creation_date": 1559768355, "post_id": 56467747, "comment_id": 99527326, "body": "Thank you as well, a bit longer than Pault&#39;s answer as you mentionned, and worked for my needs so I&#39;ll stick with his :)"}], "tags": [], "owner": {"reputation": 597, "user_id": 6682340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dff15138e7ba49740faa9368b0bff6d?s=128&d=identicon&r=PG", "display_name": "Krukas", "link": "https://stackoverflow.com/users/6682340/krukas"}, "is_accepted": false, "score": 0, "last_activity_date": 1559767447, "creation_date": 1559767447, "answer_id": 56467747, "question_id": 56467647, "link": "https://stackoverflow.com/questions/56467647/python-convert-string-of-string-and-bool-to-list/56467747#56467747", "title": "Python Convert String of String and Bool To List", "body": "<p>A quick way to do it, is with list comprehension:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[\n  value.strip() if value.strip().startswith(\"'\") else value == 'True' \n  for value in string.split(',')\n]\n</code></pre>\n\n<p><strong>pault</strong> answer looks nicer :)</p>\n"}, {"tags": [], "owner": {"reputation": 30, "user_id": 11580152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5872b379a5e7eb76727b55d81e112bb9?s=128&d=identicon&r=PG&f=1", "display_name": "Dave748", "link": "https://stackoverflow.com/users/11580152/dave748"}, "is_accepted": false, "score": 0, "last_activity_date": 1559769569, "last_edit_date": 1559769569, "creation_date": 1559768431, "answer_id": 56467938, "question_id": 56467647, "link": "https://stackoverflow.com/questions/56467647/python-convert-string-of-string-and-bool-to-list/56467938#56467938", "title": "Python Convert String of String and Bool To List", "body": "<p>So your really close and actually have half of the solution, all you need to do now is iterate over the list and convert the string \"True\" to the bool True.  Below is the full solution:</p>\n\n<pre><code>string = \"'T1', 'T2', 'T3', 'T4', True, False\"\nlist = string.split(', ') #Split string into list\n\nnumber = 0   #create a number so you can track what element of the list you are at\n\nfor i in list: #For each item in the list\n    if i.upper() == 'TRUE':\n        list[number] = True #Replace any 'True' with bool True\n        number += 1 #Move number to next item in list\n    elif i.upper() == 'FALSE':\n        list[number] = False\n        number += 1\n    else:\n        number += 1 #If item is not 'True' or 'False' go to to next item\nprint(list)\n</code></pre>\n\n<p>There are more compact and elegant ways of doing this but I've kept it simple so it's easy to understand.  The .upper after the i means any way you type True or TRue or TrUe or TRUE etc will be converted to a bool True which the other two solutions won't.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 339, "user_id": 11224792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e21b1062a1dce63ff7d5499412f4b6c?s=128&d=identicon&r=PG&f=1", "display_name": "yeye", "link": "https://stackoverflow.com/users/11224792/yeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 56467711, "answer_count": 3, "score": 1, "last_activity_date": 1559769569, "creation_date": 1559766937, "last_edit_date": 1559767596, "question_id": 56467647, "link": "https://stackoverflow.com/questions/56467647/python-convert-string-of-string-and-bool-to-list", "title": "Python Convert String of String and Bool To List", "body": "<p>I have a string:</p>\n\n<pre><code>my_string = \"'T1', 'T2', 'T3', 'T4', True, False\"\n</code></pre>\n\n<p>I would like to convert to a list like this </p>\n\n<pre><code>my_list = ['T1', 'T2', 'T3', True, False]\n</code></pre>\n\n<p>I've tried to do <code>my_string.split(', ')</code> but it converts the <code>True</code> and <code>False</code> into <code>str</code>, which I don't want.</p>\n\n<p>I could write a function but I feel there is something pythonic and very easy to do this.</p>\n\n<p>What would be the best way to do it ?</p>\n"}, {"tags": ["python", "image", "list"], "comments": [{"owner": {"reputation": 90, "user_id": 10666991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8ed2aa590dc61c12f19caaa731db61?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir", "link": "https://stackoverflow.com/users/10666991/ofir"}, "reply_to_user": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1559767188, "post_id": 56467632, "comment_id": 99526867, "body": "@Masoud Please notice that I don&#39;t want to save it as pixels, but just as numbers."}, {"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1559767491, "post_id": 56467632, "comment_id": 99527009, "body": "Ok. I think this will help: <a href=\"https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.pyplot.text.html\" rel=\"nofollow noreferrer\">matplotlib.org/3.1.0/api/_as_gen/matplotlib.pyplot.text.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1559768657, "last_edit_date": 1559768657, "creation_date": 1559768157, "answer_id": 56467883, "question_id": 56467632, "link": "https://stackoverflow.com/questions/56467632/saving-2d-list-as-an-image/56467883#56467883", "title": "Saving 2d-list as an image", "body": "<p>I am not quite sure whether this is what you're asking, but one way to achieve it by using <a href=\"https://pillow.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\"><code>Pillow</code></a>, a Python Image Library that provides you with functionality to write text to an image. So, in order to store your list of number on an image, you can use the following code, provided that you have <code>Pillow</code> installed:</p>\n\n<pre><code>from PIL import Image\nfrom PIL import ImageFont\nfrom PIL import ImageDraw \n\nL =  [[1, 2, 3],\n     [4, 5, 6],\n     [7, 8, 9]]\n\nsize = 300\nimg = Image.new(\"RGB\", (size,size), 'white')\ndraw = ImageDraw.Draw(img)\nfont = ImageFont.truetype(\"arial.ttf\", 48)\nfor i in range(0,size,size//3):\n    for j in range(0,size,size//3):\n        print(i//100,j//100)\n        draw.text((i+size//9, j+size//9), str(L[i//100][j//100]), (0,0,0), font=font)\nimg.save('numbers.jpg')\n</code></pre>\n\n<p>The result image will be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dJQiJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dJQiJ.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 90, "user_id": 10666991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8ed2aa590dc61c12f19caaa731db61?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir", "link": "https://stackoverflow.com/users/10666991/ofir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 56467883, "answer_count": 1, "score": 0, "last_activity_date": 1559768657, "creation_date": 1559766894, "last_edit_date": 1559768219, "question_id": 56467632, "link": "https://stackoverflow.com/questions/56467632/saving-2d-list-as-an-image", "title": "Saving 2d-list as an image", "body": "<p>I have 2d-list that each element is an Integer number, and I want to save its data as an image. \nPlease notice that I don't want to save it as pixels, but just as numbers.</p>\n\n<p>For example:</p>\n\n<pre><code>L =  1 2 3\n     4 5 6\n     7 8 9\n</code></pre>\n\n<p>Then, I want to save it as a picture that contains these numbers (not as colors, etc..). \nHow can I achieve this?<br>\nThanks in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1559766896, "post_id": 56467621, "comment_id": 99526741, "body": "Where is the function that you think you need <code>subprocess</code> to call it?"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 2, "creation_date": 1559767040, "post_id": 56467621, "comment_id": 99526794, "body": "Send the debug messages to a log file instead of stdout."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1559768907, "post_id": 56467621, "comment_id": 99527523, "body": "Can you not use the <code>multiprocessing</code> module instead to call the function more directly? Anyway, if you have to use <code>subprocess</code> and <code>print</code> to stdout, then write your result to stderr or a file."}], "owner": {"reputation": 802, "user_id": 4058164, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2bb494657f9f76beb745e7782cfce588?s=128&d=identicon&r=PG&f=1", "display_name": "asaf", "link": "https://stackoverflow.com/users/4058164/asaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559766869, "creation_date": 1559766869, "question_id": 56467621, "link": "https://stackoverflow.com/questions/56467621/get-the-return-value-of-a-function-when-calling-to-it-with-subprocess", "title": "get the return value of a function when calling to it with subprocess", "body": "<p>I have a function that return a string.</p>\n\n<p>I want to call it using subprocess.</p>\n\n<p>The function also prints debug messages using print.</p>\n\n<p>How do I get the function return string (i can't read stdout since i have debug messages there also)</p>\n"}, {"tags": ["python", "django-models"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1559767254, "post_id": 56467605, "comment_id": 99526905, "body": "You have a circular import. You would need to have these in the same file. But note that you <i>do not want to do this at all</i>, you should just use the automatic primary key which will already be auto-incrementing. Doing all this is pointless. Especially as a validator is for validating, not for creating new values anyway"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1559768475, "creation_date": 1559768475, "answer_id": 56467951, "question_id": 56467605, "link": "https://stackoverflow.com/questions/56467605/import-error-for-models-in-django-while-importing-model-in-validators-file/56467951#56467951", "title": "Import Error for models in Django while importing model in validators file", "body": "<p><strong>Short answer</strong>: use <strong><code>AutoField</code></strong> instead, or do not specify a primary key at all: Django will automatically construct one named <code>id</code>.</p>\n\n<p>You make a <em>circular import</em> here: your <code>models</code> module depends on your <code>validators</code>, and vice versa.</p>\n\n<p>You can however lazily load the <code>models</code> module, by importing it in the <code>increment_id</code>:</p>\n\n<pre><code># app/validators.py\n\nfrom django.core.exceptions import ValidationError\n\ndef increment_id():\n    <b>from .models import Branch</b>\n    last_branch_id = Branch.objects.all().order_by(<b>'BranchId'</b>).last().<b>BranchId</b>\n    new_branch_id = last_branch_id + 1\n    return new_branch_id</code></pre>\n\n<p>In your models, you can then work with:</p>\n\n<pre><code># app/models.py\n\nclass Branch(models.Model):\n    branchID = models.PositiveSmallIntegerField(primary_key=True, serialize=True, <b>default=increment_id</b>)</code></pre>\n\n<p>Note however that this is <em>not</em> a validator, you here have a default value. Furthermore you should <em>not</em> have to write that: Django has an <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#autofield\" rel=\"nofollow noreferrer\"><strong><code>AutoField</code></strong> [Django-doc]</a>, that:</p>\n\n<blockquote>\n  <p>An IntegerField that <strong>automatically increments</strong> according to\n  available IDs. You <strong>usually won't need to use this directly</strong>; a\n  primary key field will automatically be added to your model if you\n  don\u2019t specify otherwise. See Automatic primary key fields.</p>\n</blockquote>\n\n<p>You can thus better define this as:</p>\n\n<pre><code>class Branch(models.Model):\n    <b>branch_id</b> = <b>models.AutoField(primary_key=True)</b>\n    # ...</code></pre>\n\n<p>According to the <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\"><em>PEP-8 Style Guidelines</em></a> it is furthermore advisable to name attributes with <em><code>lowercase_with_underscores</code></em>, so <code>branch_id</code> instead of <s><code>branchId</code></s>.</p>\n\n<p>Furthermore it makes typically no sense to name the primary key something else than <code>id</code>. By prefixing it with <code>branch_id</code>, you can make less use of <em>duck typing</em>. So it might be better to omit that field completly, as the <a href=\"https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields\" rel=\"nofollow noreferrer\">documentation on <em>Automatic primary key fields</em> says</a>:</p>\n\n<blockquote>\n  <p>By default, <strong>Django gives each model the following field</strong>:</p>\n\n<pre><code>id = models.AutoField(primary_key=True)\n</code></pre>\n  \n  <p>This is an auto-incrementing primary key.</p>\n  \n  <p>If you\u2019d like to specify a custom primary key, just specify\n  <code>primary_key=True</code> on one of your fields. If Django sees <strong>you've\n  explicitly set <code>Field.primary_key</code></strong>, it <strong>won't add the automatic\n  <code>id</code> column</strong>.</p>\n</blockquote>\n\n<p>So unless you have a good reason to specify one yourself, you can just list the data columns:</p>\n\n<pre><code>class Branch(models.Model):\n    # ...\n    # other non-pk fields</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11605934, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yyHPLgmZ_yo/AAAAAAAAAAI/AAAAAAAAJiA/xfo0_L02CmM/photo.jpg?sz=128", "display_name": "Rituja", "link": "https://stackoverflow.com/users/11605934/rituja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 56467951, "answer_count": 1, "score": 1, "last_activity_date": 1559768475, "creation_date": 1559766773, "question_id": 56467605, "link": "https://stackoverflow.com/questions/56467605/import-error-for-models-in-django-while-importing-model-in-validators-file", "title": "Import Error for models in Django while importing model in validators file", "body": "<p>I am getting an error\nFile \"D:\\DjangoProjects\\StudentExam\\website\\Student\\validators.py\", line 2, in  from .models import Branch</p>\n\n<p>ImportError: cannot import name 'Branch' from 'Student.models' (D:\\DjangoProjects\\StudentExam\\website\\Student\\models.py)</p>\n\n<p>For the statement  \u201c from .models import Branch \u201c , written in validators.py file.\nEven when these both files are in the same app it's giving an error. I don\u2019t understand what\u2019s going wrong.</p>\n\n<p>I even tried \u201cfrom Student.models/website.models import branch\u201d but then it is showing unresolved reference Branch.</p>\n\n<p>Directory Structure is as follows:-</p>\n\n<pre><code>StudentExam\n  -venv\n  -website\n     -Student\n        -migrations\n        -__init__.py\n        -admin.py\n        -apps.py\n        -models.py\n        -tests.py\n        -urls.py\n        -validators.py\n        -views.py\n     -website\n        -__init__.py\n        -settings.py\n        -urls.py\n        -wsgi.py\n     -db.sqlite3\n     -manage.py\n</code></pre>\n\n<p>validators.py :-</p>\n\n<pre><code>from django.core.exceptions import ValidationError\nfrom .models import Branch\n\ndef increment_id():\n    last_branch_id = Branch.objects.all().order_by('id').last()\n    new_branch_id = last_branch_id + 1\n    return new_branch_id\n</code></pre>\n\n<p>models.py :-</p>\n\n<pre><code>from django.db import models\nfrom .validators import validate_sem,cie_out_of,ese_out_of,increment_id\n\nclass Branch(models.Model):\n    branchID = models.PositiveSmallIntegerField(primary_key = True, serialize = True, validators = increment_id())\n    branchName = models.CharField(max_length = 30)\n\n    objects = models.Manager()\n\n    def __str__(self):\n        return ', '.join('{} = {}'.format(key, value) for key, value in self.__dict__.items() if key != \"_state\")\n</code></pre>\n"}, {"tags": ["python", "rasa-nlu", "rasa-core"], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 3001665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5b34c488b68dbad0e83ee7e86a1439c?s=128&d=identicon&r=PG&f=1", "display_name": "dragster", "link": "https://stackoverflow.com/users/3001665/dragster"}, "is_accepted": true, "score": 1, "last_activity_date": 1560785348, "creation_date": 1560785348, "answer_id": 56634456, "question_id": 56467543, "link": "https://stackoverflow.com/questions/56467543/how-to-edit-or-process-the-message-from-the-user-before-being-classified-whic/56634456#56634456", "title": "How to (edit or process ) the message from the user before being classified which intent by rasa-nlu model?", "body": "<p>Rasa already comes with a few pre-processing <strong>components</strong> like <a href=\"https://rasa.com/docs/rasa/nlu/components/#tokenizers\" rel=\"nofollow noreferrer\">Tokenizers</a> and you can <a href=\"https://rasa.com/docs/rasa/nlu/choosing-a-pipeline/\" rel=\"nofollow noreferrer\">include them in your configuration file of the NLU pipeline</a></p>\n\n<p>For tasks like stemming and spell-checker, they are currently out of scope of Rasa NLU. The developer has to pre-process the input and pass the processed text as a string to NLU pipeline for parsing.</p>\n\n<p>Nevertheless here are a few resources you can checkout -</p>\n\n<ul>\n<li><a href=\"https://stackabuse.com/python-for-nlp-tokenization-stemming-and-lemmatization-with-spacy-library/\" rel=\"nofollow noreferrer\">Tutorial</a> on common pre-processing tasks with python and spacy.</li>\n<li><a href=\"https://github.com/tokestermw/spacy_hunspell\" rel=\"nofollow noreferrer\">Hunspell</a> spell checker and integration with Spacy</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 10112054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r5aY3q3Yaec/AAAAAAAAAAI/AAAAAAAAAIU/bZjsTQ9VXGE/photo.jpg?sz=128", "display_name": "Bishoy Faheem ", "link": "https://stackoverflow.com/users/10112054/bishoy-faheem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 56634456, "answer_count": 1, "score": 1, "last_activity_date": 1560785348, "creation_date": 1559766475, "last_edit_date": 1559766780, "question_id": 56467543, "link": "https://stackoverflow.com/questions/56467543/how-to-edit-or-process-the-message-from-the-user-before-being-classified-whic", "title": "How to (edit or process ) the message from the user before being classified which intent by rasa-nlu model?", "body": "<p>I am new to RASA.. I read the last updated documentation Rasa 1.0\nbut I don't know how to process the message of the user before nlu-model<br>\nI would like to do things like stemming spellchecking words etc ...</p>\n\n<p>I appreciate any code example with spaCy library :)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1559766195, "post_id": 56467474, "comment_id": 99526446, "body": "Dictionaries aren&#39;t really ordered data structures."}, {"owner": {"reputation": 202, "user_id": 6063482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a204c92571d46ccabc3416f91ef658cf?s=128&d=identicon&r=PG&f=1", "display_name": "masasa", "link": "https://stackoverflow.com/users/6063482/masasa"}, "edited": false, "score": 0, "creation_date": 1559766308, "post_id": 56467474, "comment_id": 99526488, "body": "you can use ordereddict from collections (stl), the order of that dictonary type is the order you create them, or bulit a class with mapping between 2 lists, or 1 lists of tuples, i can give an example if you would like"}, {"owner": {"reputation": 571, "user_id": 1520091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e1f0f856f262912274e9a74883e3754?s=128&d=identicon&r=PG", "display_name": "checkThisOut", "link": "https://stackoverflow.com/users/1520091/checkthisout"}, "edited": false, "score": 0, "creation_date": 1559766706, "post_id": 56467474, "comment_id": 99526656, "body": "from python 3.7 dicts are ordered structures: <a href=\"https://github.com/naftaliharris/tauthon/issues/86\" rel=\"nofollow noreferrer\">github.com/naftaliharris/tauthon/issues/86</a>"}, {"owner": {"reputation": 1949, "user_id": 2261950, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8c44aebbff7a2e5e4a75fc9e7341970d?s=128&d=identicon&r=PG", "display_name": "AlexW", "link": "https://stackoverflow.com/users/2261950/alexw"}, "edited": false, "score": 0, "creation_date": 1559767318, "post_id": 56467474, "comment_id": 99526935, "body": "im using python 3.6"}], "answers": [{"comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1559766936, "post_id": 56467615, "comment_id": 99526755, "body": "I took <code>across all devices</code> to mean we should also consider the <code>&quot;INT-GW-01&quot;</code> key."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1559767005, "post_id": 56467615, "comment_id": 99526782, "body": "Ah, missed that key entirely, you&#39;re probably right. I&#39;ll make an edit"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1559767107, "post_id": 56467615, "comment_id": 99526835, "body": "In python 3.7 you don&#39;t need to use an <code>OrderedDict</code>. That being said the OPs version is unknown so I would use an <code>OrderedDict</code> but you may want to add that disclaimer."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 1, "creation_date": 1559767209, "post_id": 56467615, "comment_id": 99526874, "body": "@Error-SyntacticalRemorse True, I can add the disclaimer, but had OrderedDict at first since it&#39;s the most portable"}], "tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 2, "last_activity_date": 1559767136, "last_edit_date": 1559767136, "creation_date": 1559766847, "answer_id": 56467615, "question_id": 56467474, "link": "https://stackoverflow.com/questions/56467474/python-sorting-nested-dictionaries-by-total-amount-of-items-in-nest/56467615#56467615", "title": "python - sorting nested dictionaries by total amount of items in nest?", "body": "<p>As @masasa suggested, you could use <code>OrderedDict</code> from the collections module:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import OrderedDict\n\n# You can use sorted to get the keys of the dict based on the len of all devices\n# and reverse=True will order from longest to shortest\nsorted_keys = sorted([(k, sum(len(dev) for name, dev in v.items())) for k,v in y.items()], key=lambda x: x[1], reverse=True)\n# [('Manchester', 3), ('Edinburgh', 2), ('London', 1)]\n\n# So to put this into OrderedDict\nz = OrderedDict((k, y[k]) for k, _ in sorted_keys)\n\nz.keys()\nodict_keys(['Manchester', 'Edinburgh', 'London'])\n</code></pre>\n\n<p>For python3.7, you can just use a standard <code>dict</code> as @buran has answered and others have commented</p>\n"}, {"tags": [], "owner": {"reputation": 7749, "user_id": 4046632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e6a87a176719c607a2a73ce6728d88?s=128&d=identicon&r=PG&f=1", "display_name": "buran", "link": "https://stackoverflow.com/users/4046632/buran"}, "is_accepted": false, "score": 0, "last_activity_date": 1559767108, "creation_date": 1559767108, "answer_id": 56467681, "question_id": 56467474, "link": "https://stackoverflow.com/questions/56467474/python-sorting-nested-dictionaries-by-total-amount-of-items-in-nest/56467681#56467681", "title": "python - sorting nested dictionaries by total amount of items in nest?", "body": "<pre><code>import json\nspam = json.loads(\"\"\"{\n    ...\n}\"\"\")\n\neggs = dict(sorted(spam.items(), key=lambda item: sum(len(value2) for value2 in item[1].values()), reverse=True))\nprint(eggs)\n</code></pre>\n\n<p>note that what you have is not valid dict (e.g. there are values like <code>null</code>, <code>true</code>), it is obviously json.</p>\n\n<p>my solution assumes python3.7+ where dicts are ordered. if this is not the case eggs should be instance of collections.OrderedDict</p>\n"}], "owner": {"reputation": 1949, "user_id": 2261950, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8c44aebbff7a2e5e4a75fc9e7341970d?s=128&d=identicon&r=PG", "display_name": "AlexW", "link": "https://stackoverflow.com/users/2261950/alexw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 56467615, "answer_count": 2, "score": 0, "last_activity_date": 1559767308, "creation_date": 1559766121, "last_edit_date": 1559767308, "question_id": 56467474, "link": "https://stackoverflow.com/questions/56467474/python-sorting-nested-dictionaries-by-total-amount-of-items-in-nest", "title": "python - sorting nested dictionaries by total amount of items in nest?", "body": "<p>I have a dictionary that I would like to sort/reorder the parent dictionaries based on the total amount of sessions across all devices in child dictionary lists</p>\n\n<p><strong>EDIT</strong> im using python 3.6</p>\n\n<p>With the below sample data, I would like the order</p>\n\n<ol>\n<li>Manchester...</li>\n<li>Edinburgh...</li>\n<li>London...</li>\n</ol>\n\n<p>How would I achieve this ordering, is it possible with this data structure?</p>\n\n<pre><code>{\n    \"London\": {\n        \"EDGE-01\": [\n            {\n                \"bgp_peer_as\": \"1\",\n                \"bgp_session\": \"3:35\",\n                \"bgp_routes\": \"0\",\n                \"service_status\": \"Down\",\n                \"circuit_name\": \"MPLS\",\n                \"subnet_name\": null,\n                \"last_updated\": \"2019-05-08 17:45:43\",\n                \"time_error\": true,\n                \"service_name\": \"MPLS\"\n            }\n        ]\n    },\n    \"Manchester\": {\n        \"EDGE-01\": [\n            {\n                \"bgp_peer_as\": \"1\",\n                \"bgp_session\": \"1w1d\",\n                \"bgp_routes\": \"2\",\n                \"service_status\": \"Up\",\n                \"circuit_name\": null,\n                \"subnet_name\": \"Live \",\n                \"last_updated\": \"2019-05-08 17:45:13\",\n                \"time_error\": true,\n                \"service_name\": \"Live Primary\"\n            },\n            {\n                \"bgp_peer_as\": \"2\",\n                \"bgp_session\": \"1w6d\",\n                \"bgp_routes\": \"140\",\n                \"service_status\": \"Up\",\n                \"circuit_name\": null,\n                \"subnet_name\": \"Dev Primary\",\n                \"last_updated\": \"2019-05-08 17:45:08\",\n                \"time_error\": true,\n                \"service_name\": \"Dev Primary\"\n            }\n        ],\n        \"INT-GW-01\": [\n            {\n                \"bgp_peer_as\": \"10\",\n                \"bgp_session\": \"1d2h\",\n                \"bgp_routes\": \"10\",\n                \"service_status\": \"Up\",\n                \"circuit_name\": null,\n                \"subnet_name\": \"PUBLIC\",\n                \"last_updated\": \"2019-05-08 17:41:58\",\n                \"time_error\": true,\n                \"service_name\": \"PUBLIC\"\n            }\n        ]\n    },\n    \"Edinburgh\": {\n        \"EDGE-01\": [\n            {\n                \"bgp_peer_as\": \"1\",\n                \"bgp_session\": \"3:35\",\n                \"bgp_routes\": \"0\",\n                \"service_status\": \"Down\",\n                \"circuit_name\": \"MPLS\",\n                \"subnet_name\": null,\n                \"last_updated\": \"2019-05-08 17:45:43\",\n                \"time_error\": true,\n                \"service_name\": \"MPLS\"\n            },\n            {\n                \"bgp_peer_as\": \"65001\",\n                \"bgp_session\": \"1w6d\",\n                \"bgp_routes\": \"140\",\n                \"service_status\": \"Up\",\n                \"circuit_name\": null,\n                \"subnet_name\": \"SV Primary\",\n                \"last_updated\": \"2019-05-08 17:45:08\",\n                \"time_error\": true,\n                \"service_name\": \"SV Primary\"\n            }\n        ]\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "azure", "version", "conda", "databricks"], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 0, "last_activity_date": 1559897568, "creation_date": 1559897568, "answer_id": 56491048, "question_id": 56467436, "link": "https://stackoverflow.com/questions/56467436/specify-python-version-in-azureml-image/56491048#56491048", "title": "specify python version in azureml image", "body": "<p>It sounds like you want to use <code>Python 3.5.2</code> to create a <code>CondaDependencies</code> object, but seems that your current Python version is <code>3.6.8</code>.</p>\n\n<p>Just according to your description, I don't know what your environment is and how to do. However, I assumed that you followed the offical document <a href=\"https://docs.microsoft.com/en-us/azure/machine-learning/service/quickstart-run-local-notebook\" rel=\"nofollow noreferrer\"><code>Quickstart: Use your own notebook server to get started with Azure Machine Learning</code></a> to do, so the first thing is to make sure that you have installed the Python runtime <code>3.5.2</code> in your Anaconda environment. For that, you can refer to the Anaconda FAQ topic <a href=\"https://docs.anaconda.com/anaconda/user-guide/faq/#anaconda-faq-35\" rel=\"nofollow noreferrer\"><code>How do I get Anaconda with Python 3.5 or 3.6?</code></a> as the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/j1fk5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j1fk5.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>$ conda install python=3.5\n</code></pre>\n\n<p>Or download and install Anaconda <a href=\"https://repo.anaconda.com/archive/\" rel=\"nofollow noreferrer\"><code>4.2.0</code></a> instead of your current one.</p>\n\n<p>Then, you can create a virutal env with Python 3.5.2.</p>\n\n<pre><code>$ conda create -n &lt;your env name&gt; -y Python=3.5  \n$ conda activate &lt;your env name&gt;\n$ conda install nb_conda  \n$ pip install azureml-sdk[notebooks]  \n$ jupyter notebook\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11215090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ezu9.jpg?s=128&g=1", "display_name": "Susanta sethy", "link": "https://stackoverflow.com/users/11215090/susanta-sethy"}, "is_accepted": false, "score": 0, "last_activity_date": 1600796834, "creation_date": 1600796834, "answer_id": 64015128, "question_id": 56467436, "link": "https://stackoverflow.com/questions/56467436/specify-python-version-in-azureml-image/64015128#64015128", "title": "specify python version in azureml image", "body": "<p>You can use <strong>set_python_version</strong> method available in azureml.core.conda_dependencies class to set your desired python version. As you have already created an object myenv of the same class, you can set the version as below</p>\n<pre><code>    myenv.set_python_version('3.5.2')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1257, "user_id": 787267, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3270f948f2b18a4dfb4e057389b9435c?s=128&d=identicon&r=PG", "display_name": "user787267", "link": "https://stackoverflow.com/users/787267/user787267"}, "is_accepted": false, "score": 0, "last_activity_date": 1601454368, "creation_date": 1601454368, "answer_id": 64133704, "question_id": 56467436, "link": "https://stackoverflow.com/questions/56467436/specify-python-version-in-azureml-image/64133704#64133704", "title": "specify python version in azureml image", "body": "<p>You can define a CondaDependencies instance that you pass to a RunConfiguration instance when you initialize it. See details here: <a href=\"https://stackoverflow.com/a/64133648/787267\">https://stackoverflow.com/a/64133648/787267</a></p>\n"}], "owner": {"reputation": 687, "user_id": 6249001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/q0y7B.jpg?s=128&g=1", "display_name": "Daniel Zapata", "link": "https://stackoverflow.com/users/6249001/daniel-zapata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 56491048, "answer_count": 3, "score": 0, "last_activity_date": 1601454368, "creation_date": 1559765973, "question_id": 56467436, "link": "https://stackoverflow.com/questions/56467436/specify-python-version-in-azureml-image", "title": "specify python version in azureml image", "body": "<p>I'm deploying a model using azureml. The databricks environment uses python 3.5.2 and the deployed image 3.6.8 and causes the model to crash. When creating the image, I define my conda_environment like this:</p>\n\n<pre><code>myenv = CondaDependencies.create(python_version='3.5.2',\n                                 pip_packages=['azureml-core==1.0.41',\n                                               'numpy==1.16.3','scikit-learn==0.20.3'])\n</code></pre>\n\n<p>However when I deploy the image, I print the python version and the image has 3.6.8. Is there any other way I could get the image to use 3.5.2?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "pytorch", "amazon-sagemaker"], "answers": [{"comments": [{"owner": {"reputation": 1625, "user_id": 569313, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1bb9d681c73d4e543ce7dbee55241665?s=128&d=identicon&r=PG", "display_name": "B_Miner", "link": "https://stackoverflow.com/users/569313/b-miner"}, "edited": false, "score": 0, "creation_date": 1559789288, "post_id": 56469672, "comment_id": 99531728, "body": "What does payload.encode(&#39;utf-8&#39;) do? Does it make a byte array which is what invoke_endpoint expects? But if you use predictor.predict it expects a numpy array?"}, {"owner": {"reputation": 2233, "user_id": 5331834, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153673777846460/picture?type=large", "display_name": "Olivier Cruchant", "link": "https://stackoverflow.com/users/5331834/olivier-cruchant"}, "reply_to_user": {"reputation": 1625, "user_id": 569313, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1bb9d681c73d4e543ce7dbee55241665?s=128&d=identicon&r=PG", "display_name": "B_Miner", "link": "https://stackoverflow.com/users/569313/b-miner"}, "edited": false, "score": 0, "creation_date": 1559806366, "post_id": 56469672, "comment_id": 99536259, "body": "the predictor from python SDK is high-level, and does the serialization from numpy or other on your behalf! in boto3, you have to decide which serialization to use and do it yourself"}], "tags": [], "owner": {"reputation": 2233, "user_id": 5331834, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153673777846460/picture?type=large", "display_name": "Olivier Cruchant", "link": "https://stackoverflow.com/users/5331834/olivier-cruchant"}, "is_accepted": true, "score": 2, "last_activity_date": 1559781766, "creation_date": 1559781766, "answer_id": 56469672, "question_id": 56467434, "link": "https://stackoverflow.com/questions/56467434/making-a-prediction-sagemaker-pytorch/56469672#56469672", "title": "Making a Prediction Sagemaker Pytorch", "body": "<p>Yes you are on the right track. You can send csv-serialized input to the endpoint without using the <code>predictor</code> from the SageMaker SDK, and using other SDKs such as <code>boto3</code> which is installed in lambda:</p>\n\n<pre><code>import boto3\nruntime = boto3.client('sagemaker-runtime')\n\npayload = '0.12787057,  1.0612601,  -1.1081504'\n\nresponse = runtime.invoke_endpoint(\n    EndpointName=ENDPOINT_NAME,\n    ContentType='text/csv',\n    Body=payload.encode('utf-8'))\n\nresult = json.loads(response['Body'].read().decode()) \n</code></pre>\n\n<p>This will pass to the endpoint a csv-formatted input, that you may need to reshape back in the <code>input_fn</code> to put in the appropriate dimension expected by the model.</p>\n\n<p>for example:</p>\n\n<pre><code>def input_fn(request_body, request_content_type):\n    if request_content_type == 'text/csv':\n        return torch.from_numpy(\n            np.genfromtxt(StringIO(request_body), delimiter=',').reshape(1,3))\n</code></pre>\n\n<p><strong>Note</strong>: I wasn't able to test the specific <code>input_fn</code> above with your input content and shape but I used the approach on Sklearn RandomForest couple times, and looking at the <a href=\"https://sagemaker.readthedocs.io/en/stable/using_pytorch.html#model-serving\" rel=\"nofollow noreferrer\">Pytorch SageMaker serving doc</a> the above rationale should work.</p>\n\n<p>Don't hesitate to use endpoint logs in Cloudwatch to diagnose any inference error (available from the endpoint UI in the console), those logs are usually <strong>much more verbose</strong> that the high-level logs returned by the inference SDKs</p>\n"}], "owner": {"reputation": 1625, "user_id": 569313, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1bb9d681c73d4e543ce7dbee55241665?s=128&d=identicon&r=PG", "display_name": "B_Miner", "link": "https://stackoverflow.com/users/569313/b-miner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2065, "favorite_count": 1, "accepted_answer_id": 56469672, "answer_count": 1, "score": 1, "last_activity_date": 1559781766, "creation_date": 1559765963, "question_id": 56467434, "link": "https://stackoverflow.com/questions/56467434/making-a-prediction-sagemaker-pytorch", "title": "Making a Prediction Sagemaker Pytorch", "body": "<p>I have trained and deployed a model in Pytorch with Sagemaker. I am able to call the endpoint and get a prediction. I am using the default input_fn() function (i.e. not defined in my serve.py).</p>\n\n<pre><code>model = PyTorchModel(model_data=trained_model_location,\n                     role=role,\n                     framework_version='1.0.0',\n                     entry_point='serve.py',\n                     source_dir='source')\npredictor = model.deploy(initial_instance_count=1, instance_type='ml.m4.xlarge')\n</code></pre>\n\n<p>A prediction can be made as follows:</p>\n\n<pre><code>input =\"0.12787057,  1.0612601,  -1.1081504\"\npredictor.predict(np.genfromtxt(StringIO(input), delimiter=\",\").reshape(1,3) )\n</code></pre>\n\n<p>I want to be able to serve the model with REST API and am HTTP POST using lambda and API gateway. I was able to use invoke_endpoint() for this with an XGBOOST model in Sagemaker this way. I am not sure what to send into the body for Pytorch.</p>\n\n<pre><code>client = boto3.client('sagemaker-runtime')\nresponse = client.invoke_endpoint(EndpointName=ENDPOINT  ,\nContentType='text/csv',\nBody=???)\n</code></pre>\n\n<p>I believe I need to understand how to write the customer input_fn to accept and process the type of data I am able to send through invoke_client. Am I on the right track and if so, how could the input_fn be written to accept a csv from invoke_endpoint?</p>\n"}, {"tags": ["python", "matplotlib", "geopandas"], "answers": [{"comments": [{"owner": {"reputation": 598, "user_id": 8678015, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524861204259227/picture?type=large", "display_name": "Philipe Riskalla Leal", "link": "https://stackoverflow.com/users/8678015/philipe-riskalla-leal"}, "edited": false, "score": 0, "creation_date": 1559774799, "post_id": 56467941, "comment_id": 99529360, "body": "Dear martinfleis, could you add a code example of how I can do it? I tried here in my machine, and I resulted only in message errors."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 598, "user_id": 8678015, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524861204259227/picture?type=large", "display_name": "Philipe Riskalla Leal", "link": "https://stackoverflow.com/users/8678015/philipe-riskalla-leal"}, "edited": false, "score": 2, "creation_date": 1559801042, "post_id": 56467941, "comment_id": 99534074, "body": "@PhilipeRiskallaLeal your question should first contain an MRE: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}], "tags": [], "owner": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768443, "creation_date": 1559768443, "answer_id": 56467941, "question_id": 56467418, "link": "https://stackoverflow.com/questions/56467418/is-it-possible-to-add-a-column-scale-to-geopandas-plot/56467941#56467941", "title": "Is it possible to add a column scale to geopandas plot?", "body": "<p>You can use <code>scheme</code> keyword. It will allow you to set desired classification (binning) of your values. Geopandas 0.5.0 support all schemes provided by <code>mapclassify</code> so you can use one of them or define your own via <code>mapclassify.User_Defined</code>. That should also adjust legend.</p>\n\n<pre><code>gdf.plot(column='colname', scheme='headtail_breaks')\n\nbins = [20, 30] # upper bounds of your bins\ngdf.plot(column='colname', scheme='user_defined', bins=bins)\n</code></pre>\n\n<p>Alternatively you can make another column with log values and classify map based on that, but I understand that it might not be desirable method.</p>\n\n<p>For description of classification methods see <a href=\"https://mapclassify.readthedocs.io/en/latest/api.html\" rel=\"nofollow noreferrer\">https://mapclassify.readthedocs.io/en/latest/api.html</a> and for example of its implementation in Geopandas see <a href=\"http://geopandas.org/mapping.html?highlight=mapclassify#choosing-colors\" rel=\"nofollow noreferrer\">http://geopandas.org/mapping.html?highlight=mapclassify#choosing-colors</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 8678015, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524861204259227/picture?type=large", "display_name": "Philipe Riskalla Leal", "link": "https://stackoverflow.com/users/8678015/philipe-riskalla-leal"}, "is_accepted": false, "score": 0, "last_activity_date": 1560813127, "creation_date": 1560813127, "answer_id": 56639898, "question_id": 56467418, "link": "https://stackoverflow.com/questions/56467418/is-it-possible-to-add-a-column-scale-to-geopandas-plot/56639898#56639898", "title": "Is it possible to add a column scale to geopandas plot?", "body": "<p>I finally found a way to apply a classifier over geopandas using the mapclassify library over geopandas geodataframe. Here I post a simple class containing a staticmethod which allows to evaluate and retrieve the classification object from a pandas/geopandas Series. </p>\n\n<p>The classification object contains some attributes which can be passed to the plotting function of one's geopandas geodataframe.</p>\n\n<p>The classification can also be altered, since there are several options solely in mapclassify library.</p>\n\n<p>Here is a code snippet:</p>\n\n<pre><code>import geopandas as gpd\nimport cartopy.crs as ccrs\nimport matplotlib.pyplot as plt  \nimport numpy as np\n\n\nclass matplotlib_custom_schemer(object):\n\n    @ staticmethod\n\n    def get_bins_for_transformed_data(series, transformation='log', \n                               mc_classifier='Fisher_Jenks_Sampled' , \n                               k=5, **kwd_for_mc_classifier):\n\n        if not callable(transformation):\n            import numpy as np\n            if hasattr(np, transformation):\n                transformation = getattr(np, transformation)\n            else:\n                print(\"User must supply a transformation function or a numpy function for it to work\")\n\n        series = transformation(series)\n\n        import mapclassify as mc\n        classifier = getattr(mc, mc_classifier)\n\n        e = classifier(y=series, k=k, **kwd_for_mc_classifier)\n\n        return e\n\n\n\n\n\n\n# Getting classification bins\n\ne = matplotlib_custom_schemer.get_bins_for_transformed_data(Temp[column].values, k=6)\n\nei = e.bins.tolist()\n\n# Plotting with classified bins\n\n\nProjection = ccrs.PlateCarree()\n\nfig, ax = plt.subplots(3,4, figsize=(width, height), sharex=False, sharey=False, subplot_kw={'projection':Projection})\n\n\nminx, miny, maxx, maxy = GeoDataFrame.total_bounds\n\nGeoDataFrame.plot(ax=ax, \n          column='my_column_with_numerical_data', \n          legend=True, \n          markersize = 0.01,\n          categorical=False,\n          scheme='user_defined',\n          classification_kwds={'bins':ei},\n          linewidth=0.02,\n          edgecolor='k',\n          facecolor='white',\n          legend_kwds={'loc': (1.05, 0.25), \n                       'bbox_transform':ax.transAxes,\n                       'frameon': True , \n                       'markerscale':0.4,\n                       'markersize':10,\n                       'handletextpad':0.2,\n                       'handlelength':0.15,\n                       'labelspacing':0.2,\n                       'fontsize':7.5} )\n\n\nax.set_extent((minx,  maxx, miny, maxy))\n\nfig.show()\n</code></pre>\n\n<p>Feel free to update it.</p>\n\n<p>Sincerely yours,</p>\n\n<p>Philipe R. Leal</p>\n"}], "owner": {"reputation": 598, "user_id": 8678015, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524861204259227/picture?type=large", "display_name": "Philipe Riskalla Leal", "link": "https://stackoverflow.com/users/8678015/philipe-riskalla-leal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560813127, "creation_date": 1559765901, "last_edit_date": 1559801086, "question_id": 56467418, "link": "https://stackoverflow.com/questions/56467418/is-it-possible-to-add-a-column-scale-to-geopandas-plot", "title": "Is it possible to add a column scale to geopandas plot?", "body": "<p>I was wondering whether a method or a parameter in a geopandas geodataframe plot exists so that its column attribute (once given) could be scaled according to some function (i.e.: log) during Map creation.</p>\n\n<p>In problems regarding pandas plot, there are logx and logy attributes in the Pandas Plot that allow that kind of configuration. Once logy is set to True, even the colorbar follows the scaling factor (log). If possible, I would like similar behavior with the geopandas plot.</p>\n"}, {"tags": ["python", "image", "loops"], "comments": [{"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1559766694, "post_id": 56467395, "comment_id": 99526653, "body": "use glob module: <a href=\"https://pymotw.com/2/glob/\" rel=\"nofollow noreferrer\">pymotw.com/2/glob</a>"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10338625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d705f82fcc28510cd341f4612673a10?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Andy", "link": "https://stackoverflow.com/users/10338625/andy-andy"}, "edited": false, "score": 0, "creation_date": 1559769061, "post_id": 56467630, "comment_id": 99527586, "body": "Thank you. Do i need to add the folder path?"}, {"owner": {"reputation": 121, "user_id": 10338625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d705f82fcc28510cd341f4612673a10?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Andy", "link": "https://stackoverflow.com/users/10338625/andy-andy"}, "edited": false, "score": 0, "creation_date": 1559839952, "post_id": 56467630, "comment_id": 99554274, "body": "Thanks, but I still don&#39;t understand, where do I place my path?"}], "tags": [], "owner": {"reputation": 225, "user_id": 8586651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209618129469600/picture?type=large", "display_name": "Kent Martin", "link": "https://stackoverflow.com/users/8586651/kent-martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1559772319, "last_edit_date": 1559772319, "creation_date": 1559766893, "answer_id": 56467630, "question_id": 56467395, "link": "https://stackoverflow.com/questions/56467395/how-to-loop-images-sequence/56467630#56467630", "title": "How to loop images sequence?", "body": "<p>See if this works. I'm sure there is an easier way, but this is what I could think of. </p>\n\n<pre><code>from os import listdir\nfrom os.path import isfile, join, abspath\nimport time\nimport subprocess\n\nmypath = abspath(__file__)\nfiles_in_folder = [f for f in listdir() if isfile(join(mypath, f))]\n\n# get images\nimgs = []\nfor f in files_in_folder:\n    _, file_extension = os.path.splitext(f)\n    if file_extension = \".jpg\"\n    imgs.append(f)\n\n# run loop until keyboard interrupt\ntry:\n    while True:\n        for img in imgs:\n            viewer = subprocess.Popen(['some_viewer', img])\n            viewer.terminate()\n            time.sleep(3)\n            viewer.kill()\nexcept KeyboardInterrupt:\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16015, "user_id": 13552470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4LvQt.png?s=128&g=1", "display_name": "Ann Zen", "link": "https://stackoverflow.com/users/13552470/ann-zen"}, "is_accepted": false, "score": 0, "last_activity_date": 1593871849, "creation_date": 1593871849, "answer_id": 62730160, "question_id": 56467395, "link": "https://stackoverflow.com/questions/56467395/how-to-loop-images-sequence/62730160#62730160", "title": "How to loop images sequence?", "body": "<p>Here is how you can use the <code>glob</code> module:</p>\n<pre><code>import Image\nfrom glob import glob\n\npath = 'C:\\\\Users\\\\User\\\\Desktop\\\\Folder'\n#images = []\n\nfor ing in glob(path+'\\\\*.jpg'):\n    image = Image.open('image1.jpg')\n    #images.append(image)\n    image.show()\n</code></pre>\n<p>The commented lines of code are for if you want to be able to access the images later in the code.</p>\n"}], "owner": {"reputation": 121, "user_id": 10338625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d705f82fcc28510cd341f4612673a10?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Andy", "link": "https://stackoverflow.com/users/10338625/andy-andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1593871849, "creation_date": 1559765789, "question_id": 56467395, "link": "https://stackoverflow.com/questions/56467395/how-to-loop-images-sequence", "title": "How to loop images sequence?", "body": "<p>I want to continusly loop image gallery (folder) until I press a key.\nSo I have a folder with 3 images 1,2,3. I want to display them in order and then to repeat.</p>\n\n<p>I've used while but I didn't manage to make it work.</p>\n\n<pre><code>import Image\n\nimage1 = Image.open('image1.jpg')\nimage.show()\nimage2 = Image.open('image2.jpg')\nimage.show()\nimage3 = Image.open('image3.jpg')\nimage.show()\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 2549, "user_id": 245915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4132dc8568480af19f032a5b9b2bc?s=128&d=identicon&r=PG", "display_name": "nofinator", "link": "https://stackoverflow.com/users/245915/nofinator"}, "edited": false, "score": 0, "creation_date": 1559765853, "post_id": 56467379, "comment_id": 99526300, "body": "Are you using <code>from datetime import datetime</code>? If so, I think you want <code>from datetime import datetime, timedelta</code> and then just call <code>timedelta(...)</code> in your code."}, {"owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 0, "creation_date": 1559765875, "post_id": 56467379, "comment_id": 99526317, "body": "you should do <code>import datetime</code> and then <code>datetime.timedelta</code> and NOT <code>from datetime import datetime </code>"}, {"owner": {"reputation": 147, "user_id": 10531379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83ce3ada746c4a8177750c64ef53423?s=128&d=identicon&r=PG&f=1", "display_name": "W.R", "link": "https://stackoverflow.com/users/10531379/w-r"}, "edited": false, "score": 0, "creation_date": 1559765879, "post_id": 56467379, "comment_id": 99526319, "body": "Yes, it wasn&#39;t showing in the original post for some reason"}, {"owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 3, "creation_date": 1559765941, "post_id": 56467379, "comment_id": 99526341, "body": "as per your code, you only need to do <code>timedelta(days=10*i)</code> and NOT <code>datetime.timedelta(days=10*i)</code>"}, {"owner": {"reputation": 147, "user_id": 10531379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83ce3ada746c4a8177750c64ef53423?s=128&d=identicon&r=PG&f=1", "display_name": "W.R", "link": "https://stackoverflow.com/users/10531379/w-r"}, "edited": false, "score": 0, "creation_date": 1559766634, "post_id": 56467379, "comment_id": 99526627, "body": "Yes, this works"}, {"owner": {"reputation": 532, "user_id": 4478556, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cb11dcc25f6916eb0cc2433e0e3ca5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Robertson", "link": "https://stackoverflow.com/users/4478556/cole-robertson"}, "edited": false, "score": 0, "creation_date": 1559766642, "post_id": 56467379, "comment_id": 99526634, "body": "I won&#39;t chime in on the solution as the comments above are right, but it would make it easier for people to answer your question if you made your code reproducible, i.e. created a toy dataframe <code>returns</code>, which exhibited the salient characteristics of the dataframe you&#39;re trying to work with."}], "owner": {"reputation": 147, "user_id": 10531379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83ce3ada746c4a8177750c64ef53423?s=128&d=identicon&r=PG&f=1", "display_name": "W.R", "link": "https://stackoverflow.com/users/10531379/w-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559765868, "creation_date": 1559765718, "last_edit_date": 1559765868, "question_id": 56467379, "link": "https://stackoverflow.com/questions/56467379/how-to-solve-attributeerror-type-object-datetime-datetime-has-no-attribute", "title": "How to solve &quot;AttributeError: type object &#39;datetime.datetime&#39; has no attribute &#39;timedelta&#39;&quot;", "body": "<p>I have searched several answers to this question, however, they do not solve my problem.</p>\n\n<p>My current code is:</p>\n\n<pre><code>from datetime import datetime, timedelta\n\nstartDate = '2018-02-01'\nendDate = '2018-03-01'\n\nstartDate = datetime.strptime(endDate, '%Y-%m-%d')\nendDate = datetime.strptime(endDate, '%Y-%m-%d')\n\nfor i in range(2,10):\n   returns.loc[startDate+datetime.timedelta(days=10*i):endDate+(10*i)+datetime.timedelta(days=10*i)]\n</code></pre>\n\n<p>which gives:\nAttributeError: type object 'datetime.datetime' has no attribute 'timedelta'</p>\n"}, {"tags": ["python", "pyqt", "self"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1559773661, "post_id": 56467363, "comment_id": 99529099, "body": "It\u2019s very hazy what you want here, but presumably you want to pass (a reference to) the <code>MainWindow</code> when creating the <code>Window</code>."}, {"owner": {"reputation": 31, "user_id": 11605920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Izh5sYFnwNk/AAAAAAAAAAI/AAAAAAAAAAo/kH3nJ6SWiyQ/photo.jpg?sz=128", "display_name": "Haileyyy", "link": "https://stackoverflow.com/users/11605920/haileyyy"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1560365044, "post_id": 56467363, "comment_id": 99716228, "body": "@DavisHerring yes that was my complicated way of saying just what you referred to. But thankfully I figured it out!"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11605920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Izh5sYFnwNk/AAAAAAAAAAI/AAAAAAAAAAo/kH3nJ6SWiyQ/photo.jpg?sz=128", "display_name": "Haileyyy", "link": "https://stackoverflow.com/users/11605920/haileyyy"}, "is_accepted": false, "score": 1, "last_activity_date": 1560365291, "creation_date": 1560365291, "answer_id": 56568604, "question_id": 56467363, "link": "https://stackoverflow.com/questions/56467363/how-to-use-self-variables-from-one-class-in-another-class/56568604#56568604", "title": "How to use self variables from one class in another class", "body": "<p>I figured it out on my own.\nLets say in my Main Window I have: <strong>self.variable</strong></p>\n\n<p>If I want to use this in another class, from the first class I would call the new class like this: <strong>NewWindow(self.variable)</strong></p>\n\n<p>Then, the NewWindow <strong>init</strong> method would look like this:</p>\n\n<p><strong>def __init__(self,variable):</strong></p>\n\n<p><strong>super().__init__()</strong></p>\n\n<p><strong>self.variable = variable</strong></p>\n\n<p>Then you should be able to refer to this variable in the new class and have it change <strong>self.variable</strong> for the old class as well.</p>\n"}], "owner": {"reputation": 31, "user_id": 11605920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Izh5sYFnwNk/AAAAAAAAAAI/AAAAAAAAAAo/kH3nJ6SWiyQ/photo.jpg?sz=128", "display_name": "Haileyyy", "link": "https://stackoverflow.com/users/11605920/haileyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "closed_date": 1560374385, "answer_count": 1, "score": 1, "last_activity_date": 1560365291, "creation_date": 1559765634, "question_id": 56467363, "link": "https://stackoverflow.com/questions/56467363/how-to-use-self-variables-from-one-class-in-another-class", "closed_reason": "Duplicate", "title": "How to use self variables from one class in another class", "body": "<p>I am somewhat new to both python and pyqt5, and I am basically trying to create one window, have that window open another window from a button, and have that new window be able to communicate with values from the old window (like self.variable defined lists or dictionaries, etc).</p>\n\n<p>I was hoping to use two separate classes in order to keep my code organized, however, I'm finding the use of self with these two classes difficult. I tried calling the method I am interested in from the other class, but I need a self.variable found in the <strong>init</strong> method in order to complete the code (which makes sense). I created two windows from two classes, and the second window opens when the push button from window 1 is pressed.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\nimport sys\nimport time\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtGui import *\nfrom functools import partial\n\nclass Window(QWidget):\n\n    def __init__(self):\n        super().__init__()\n        self.title = \"Window\"\n        self.left = 500\n        self.top = 500\n        self.width = 200\n        self.height = 150\n\n        self.initUI()\n\n    def initUI(self):\n        self.setWindowTitle(self.title)\n        self.setGeometry(self.left,self.top,self.width,self.height)\n        self.setFixedSize(self.width,self.height)\n\n        layout2 = QGridLayout()\n        label2 = QLineEdit()\n        layout2.addWidget(label2)\n        self.button2 = QPushButton(\"Enter\")\n        layout2.addWidget(self.button2)\n\n        self.setLayout(layout2)\n        self.show()\n        self.Button()\n\n    def Button(self):\n        self.button2.clicked.connect()\n\nclass MainWindow(QWidget):\n\n    def __init__(self):\n        super().__init__()\n        self.title = \"Main Window\"\n        self.left = 300\n        self.top = 300\n        self.width = 400\n        self.height = 300\n\n        self.initUI()\n\n    def initUI(self):\n        self.setWindowTitle(self.title)\n        self.setGeometry(self.left,self.top,self.width,self.height)\n        self.setFixedSize(self.width,self.height)\n        #self.setFixedWidth(self.width)\n\n        layout1 = QGridLayout()\n        label1 = QLineEdit()\n        layout1.addWidget(label1)\n        self.button1 = QPushButton(\"Push\")\n        layout1.addWidget(self.button1)\n\n        self.button1.clicked.connect(self.onClick1)\n\n        self.setLayout(layout1)\n        self.show()\n\n    def onClick1(self):\n        Window()\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    ex = MainWindow()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>I'm wondering if I need to play with inheritance or something to get these to work? The only problem is I already have basically all of my classes inheriting from some pyqt5 class. I also noticed that I needed the \"Buttons\" method in \"Window\" in order for the second window to stay up. I don't know if this is necessarily what I want, but it works for now. Could someone help me figure out the best way to transfer data between two windows in two classes. I was debating using QDialog, or working on inheritance. But if you have other suggestions I am all ears. In this example, maybe help me find a way to type something in the second window line edit, and have it appear on the other one. Or something similar.</p>\n"}, {"tags": ["python", "excel", "dataframe", "jupyter"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559766274, "post_id": 56467400, "comment_id": 99526470, "body": "I have 8000 lines of data to retrieve so i don&#39;t think I will be able to iterate through the excel file?"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559766515, "post_id": 56467400, "comment_id": 99526575, "body": "If all of your data follows the same format as the stuff you posted this can easily be done. If there is a pattern to the data you can iterate easily. What excel library are you using?"}, {"owner": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559766956, "post_id": 56467400, "comment_id": 99526767, "body": "not sure what library, this is simply a simple excel file"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559767292, "post_id": 56467400, "comment_id": 99526922, "body": "You need a library to open and save the excel files. Read the docs on openpyxl and that should get you going."}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559767514, "post_id": 56467400, "comment_id": 99527024, "body": "Does all of your data follow this same pattern? If so i can help you get started"}, {"owner": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559768109, "post_id": 56467400, "comment_id": 99527241, "body": "yes, i think so. but some have certain data some don&#39;t have certain data."}, {"owner": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559768134, "post_id": 56467400, "comment_id": 99527248, "body": "but the header for the new table should just be the same"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "edited": false, "score": 0, "creation_date": 1559768759, "post_id": 56467400, "comment_id": 99527466, "body": "Thats not a problem. Start off by reading this: <a href=\"https://automatetheboringstuff.com/chapter12/\" rel=\"nofollow noreferrer\">automatetheboringstuff.com/chapter12</a> that will get you going in the right direction. As problems arise just google them or post here and you will find your answers. Your looking at a good chunk of code here. And you havent really given much for me to help you with besides your end goal, and it wouldnt really be fair if i just wrote this for you."}], "tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": false, "score": 0, "last_activity_date": 1559765809, "creation_date": 1559765809, "answer_id": 56467400, "question_id": 56467318, "link": "https://stackoverflow.com/questions/56467318/is-there-any-ways-to-tidy-up-or-parse-messy-data-in-excel/56467400#56467400", "title": "is there any ways to tidy up or parse messy data in excel", "body": "<p>Since exec seems to be the constant, I would iterate through the excel and create a dictionary with the exec as the key and another dictionary as a value. Inside that dictionary I would define each category. </p>\n\n<p>ex. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dictionary = {John Smith:{Bus:123,Fax:sdfas,Res:adsf}, Adam Smith:{Bus:123,Fax:sdfas,Res:adsf}}\n</code></pre>\n\n<p>Then you simply write something to take data from the dictionary and put it in excel in your chosen format. </p>\n"}], "owner": {"reputation": 21, "user_id": 8817453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e188c56798217f9e09e478a8c4fd6e8b?s=128&d=identicon&r=PG&f=1", "display_name": "dodobirdie98", "link": "https://stackoverflow.com/users/8817453/dodobirdie98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1559765809, "creation_date": 1559765369, "question_id": 56467318, "link": "https://stackoverflow.com/questions/56467318/is-there-any-ways-to-tidy-up-or-parse-messy-data-in-excel", "title": "is there any ways to tidy up or parse messy data in excel", "body": "<p>I am trying to parse data from excel into a new table to tidy up the data.</p>\n\n<p>I have already tried to parse them manually but there is too many data</p>\n\n<p>This is the original data from excel</p>\n\n<p><a href=\"https://imgur.com/a/I1mraVr\" rel=\"nofollow noreferrer\">https://imgur.com/a/I1mraVr</a> </p>\n\n<p>I am trying to get this</p>\n\n<p><a href=\"https://imgur.com/a/GsdRu9u\" rel=\"nofollow noreferrer\">https://imgur.com/a/GsdRu9u</a></p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 597, "user_id": 6682340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dff15138e7ba49740faa9368b0bff6d?s=128&d=identicon&r=PG", "display_name": "Krukas", "link": "https://stackoverflow.com/users/6682340/krukas"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768488, "creation_date": 1559768488, "answer_id": 56467955, "question_id": 56467314, "link": "https://stackoverflow.com/questions/56467314/how-to-change-boolean-value-given-in-generics-view/56467955#56467955", "title": "how to change boolean value given in generics view?", "body": "<p>If you look at the ListCreateAPIView class it will call the list function on the get (<a href=\"https://github.com/encode/django-rest-framework/blob/master/rest_framework/generics.py#L238\" rel=\"nofollow noreferrer\">https://github.com/encode/django-rest-framework/blob/master/rest_framework/generics.py#L238</a>). And if you then look at the list (<a href=\"https://github.com/encode/django-rest-framework/blob/master/rest_framework/mixins.py#L37\" rel=\"nofollow noreferrer\">https://github.com/encode/django-rest-framework/blob/master/rest_framework/mixins.py#L37</a>) function it will filter the queryset with filter_queryset, so you can extends this function and update the isRead for all objects in the queryset.</p>\n\n<p>Maybe not the nicest place for on update, but it's an easy hook in.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def filter_queryset(self, *args, **kwargs):\n  queryset = super().filter_queryset(*args, **kwargs)\n\n  # Do your update on queryset\n\n  return queryset\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 9246855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FwIL8.jpg?s=128&g=1", "display_name": "DEEPAK KUMAR", "link": "https://stackoverflow.com/users/9246855/deepak-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1559816682, "creation_date": 1559816682, "answer_id": 56475641, "question_id": 56467314, "link": "https://stackoverflow.com/questions/56467314/how-to-change-boolean-value-given-in-generics-view/56475641#56475641", "title": "how to change boolean value given in generics view?", "body": "<pre><code>class ReadMessageView(APIView):\n      def post(self, request, *args,**kewargs):\n           message_id = self.kwargs.get('pk')\n           mess_obj = Message.objects.get(pk = message_id)\n           mess_obj.isRead = True\n           mess_obj.save()\n           return Response('seen')\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4712699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29f15cd19a91dce7b759ef0c0e6a393?s=128&d=identicon&r=PG&f=1", "display_name": "Ben ", "link": "https://stackoverflow.com/users/4712699/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1559816682, "creation_date": 1559765359, "last_edit_date": 1559767456, "question_id": 56467314, "link": "https://stackoverflow.com/questions/56467314/how-to-change-boolean-value-given-in-generics-view", "title": "how to change boolean value given in generics view?", "body": "<p>I want to change the default value(false) to true when the url is triggered \nwhen the user enter '<a href=\"http://127.0.0.1:8000/api/message/read/2\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/api/message/read/2</a>'\nI want that the message with id 2 will be change its isRead value to True.</p>\n\n<p>Model</p>\n\n<pre><code>class Message(models.Model):\n    message = models.TextField(max_length=5000)\n    isRead = models.BooleanField('read status', default=False)\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>path('message/read/&lt;int:pk&gt;/', ReadMessageView.as_view(), name='read_already'),\n</code></pre>\n\n<p>views.py- (not sure what to do here...)</p>\n\n<pre><code>class ReadMessageView(ListCreateAPIView):\n    serializer_class = MessageReadSerializer\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6247864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ca790e46de465cb1ea6ea2c6e95657?s=128&d=identicon&r=PG&f=1", "display_name": "yokielove", "link": "https://stackoverflow.com/users/6247864/yokielove"}, "edited": false, "score": 0, "creation_date": 1559832730, "post_id": 56468017, "comment_id": 99550679, "body": "Thank you so much for this! I edit it a little bit and it works perfectly! I will keep that in mind for future use. It is good learning!"}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 0, "last_activity_date": 1559768783, "creation_date": 1559768783, "answer_id": 56468017, "question_id": 56467275, "link": "https://stackoverflow.com/questions/56467275/forward-fill-row-with-first-non-missing-value/56468017#56468017", "title": "Forward fill row with first non-missing value", "body": "\n\n<p>Assuming that those blanks are actually <code>null</code>s*, you can use <a href=\"http://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.DataFrame.coalesce\" rel=\"nofollow noreferrer\"><code>pyspark.sql.functions.coalesce</code></a>.</p>\n\n<p>Enumerate your columns and <code>coalesce</code> the values of every column before and including the current column. This will return the first non-null value in that row.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from pyspark.sql.functions import coalesce\n\nfill_cols = df.columns[1:]  # exclude the student_id\n\ndf.select(\n    \"student_id\",\n    *[coalesce(*fill_cols[:i+1]).alias(c) for i, c in enumerate(fill_cols)]\n).show()\n#+----------+------+------+------+------+------+------+------+\n#|student_id|2016Q1|2016Q2|2016Q3|2016Q4|2017Q1|2017Q2|2017Q3|\n#+----------+------+------+------+------+------+------+------+\n#|         1|  null|     1|     1|     1|     1|     1|     1|\n#|         2|     1|     1|     1|     1|     1|     1|     1|\n#|         3|  null|  null|     1|     1|     1|     1|     1|\n#|         4|  null|  null|  null|  null|     1|     1|     1|\n#|         5|  null|  null|  null|  null|     1|     1|     1|\n#|         6|  null|  null|  null|  null|  null|     1|     1|\n#|         7|  null|  null|  null|  null|     1|     1|     1|\n#+----------+------+------+------+------+------+------+------+\n</code></pre>\n\n<p>*If not, first <a href=\"https://stackoverflow.com/questions/33287886/replace-empty-strings-with-none-null-values-in-dataframe\">replace blanks with null</a>.</p>\n"}], "owner": {"reputation": 129, "user_id": 6247864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ca790e46de465cb1ea6ea2c6e95657?s=128&d=identicon&r=PG&f=1", "display_name": "yokielove", "link": "https://stackoverflow.com/users/6247864/yokielove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559838793, "creation_date": 1559765186, "last_edit_date": 1559838793, "question_id": 56467275, "link": "https://stackoverflow.com/questions/56467275/forward-fill-row-with-first-non-missing-value", "title": "Forward fill row with first non-missing value", "body": "<p>I have a table and after the first number shows up, the number needs to be repeated fill in all the column after</p>\n\n<p>here is a table example:</p>\n\n<pre><code>student_id    2016Q1   2016Q2   2016Q3 2016Q4  2017Q1 2017Q2 2017Q3\n1                        1\n2                 1\n3                                 1\n4                                                1\n5                                                1\n6                                                        1\n7                                                 1\n\n</code></pre>\n\n<p>I am using pyspark and Python. I try to do it manually in excel, but that is too much manual editing. I wonder if there any function in pyspark or pyspark.sql are able to generate the following table. Thanks!</p>\n\n<p>I expect the result to look like the following table</p>\n\n<pre><code>student_id    2016Q1   2016Q2   2016Q3 2016Q4  2017Q1 2017Q2 2017Q3\n1                        1        1       1       1     1      1\n2                 1      1        1       1       1     1      1\n3                                 1       1       1     1      1\n4                                                 1     1      1\n5                                                 1     1      1\n6                                                       1      1\n7                                                 1     1      1\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "raspberry-pi3", "python-module"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765193, "post_id": 56467258, "comment_id": 99526036, "body": "Typo: change <code>from Google_Images_Search import GoogleImagesSearch</code> to <code>from google_images_search import GoogleImagesSearch</code>. You must read the docs, the package name does not necessarily match the way you import"}, {"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765309, "post_id": 56467258, "comment_id": 99526087, "body": "@eyllanesc Sorry I&#39;ve put the last try I&#39;ve done, but yeah the first one was without caps, and still not work"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765493, "post_id": 56467258, "comment_id": 99526139, "body": "pip points to python2 in rpi, you must use pip3: <code>pip3 install Google-Images-Search</code>"}, {"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765561, "post_id": 56467258, "comment_id": 99526166, "body": "When I use pip3, I&#39;ve got the same message telling me that requirement already satisfied"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765605, "post_id": 56467258, "comment_id": 99526190, "body": "what is the output of <code>pip3 list</code>?"}, {"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1559765756, "post_id": 56467258, "comment_id": 99526256, "body": "A long list which contains  Google-Images-Search 0.3.7"}, {"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 1, "creation_date": 1559766138, "post_id": 56467258, "comment_id": 99526414, "body": "check the version of python pip install module for: <code>pip --version</code>. Then try to strictly specify python version, for example: <code>python3.6 test.py</code>. If you have Conda installed, your default python will be that."}, {"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "reply_to_user": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 1, "creation_date": 1559767863, "post_id": 56467258, "comment_id": 99527158, "body": "@Masoud Thanks ! That&#39;s solve the problem ! I just had to launch the program with python3.5 index.py !"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "edited": false, "score": 0, "creation_date": 1559765491, "post_id": 56467292, "comment_id": 99526136, "body": "Same problem without caps"}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1559765262, "creation_date": 1559765262, "answer_id": 56467292, "question_id": 56467258, "link": "https://stackoverflow.com/questions/56467258/module-installed-but-not-found-when-import/56467292#56467292", "title": "Module installed but not found when import", "body": "<p><a href=\"https://pypi.org/project/Google-Images-Search/\" rel=\"nofollow noreferrer\">The documentation</a> states that the name of the module that the project installs is <code>google_images_search</code>, all lowercase, not <code>Google_Images_Search</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "edited": false, "score": 0, "creation_date": 1559765481, "post_id": 56467325, "comment_id": 99526132, "body": "Same problem without caps"}], "tags": [], "owner": {"reputation": 1, "user_id": 11606015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9qqWqd4cTOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcILNSw8vGWCjZLohDS8Geu5z7q0w/mo/photo.jpg?sz=128", "display_name": "TheNumberOneD", "link": "https://stackoverflow.com/users/11606015/thenumberoned"}, "is_accepted": false, "score": 0, "last_activity_date": 1559765421, "creation_date": 1559765421, "answer_id": 56467325, "question_id": 56467258, "link": "https://stackoverflow.com/questions/56467258/module-installed-but-not-found-when-import/56467325#56467325", "title": "Module installed but not found when import", "body": "<p>try changing your import, </p>\n\n<pre><code>from google_images_search import GoogleImagesSearch\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8084970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cfa6216341a1a02efc9f61212b1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Call Me Audric", "link": "https://stackoverflow.com/users/8084970/call-me-audric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1559765426, "creation_date": 1559765111, "last_edit_date": 1559765426, "question_id": 56467258, "link": "https://stackoverflow.com/questions/56467258/module-installed-but-not-found-when-import", "title": "Module installed but not found when import", "body": "<p>I've got a documentation of the package named 'Google-Images-Search'</p>\n\n<p><a href=\"https://pypi.org/project/Google-Images-Search/\" rel=\"nofollow noreferrer\">https://pypi.org/project/Google-Images-Search/</a></p>\n\n<p>I've read and tyr to reproduce what's needed, so I installed it with this commandline :</p>\n\n<pre><code>pip install Google-Images-Search\n</code></pre>\n\n<p>Now when I'm trying to do it again, I've got the message like \"Requirement already satisfying\" for all dependencies and nothing append after.</p>\n\n<p>So I've develop the file index.py with this inside</p>\n\n<pre><code>from google_images_search import GoogleImagesSearch\n\ngis = GoogleImagesSearch('test1', 'test2')\n</code></pre>\n\n<p>But when I execute this, I've got</p>\n\n<p><strong>No module named Google_Images_Search</strong></p>\n\n<p>I already try to put in my code</p>\n\n<pre><code>help(\"modules\")\n</code></pre>\n\n<p>But Google_Images_Search is not here at all</p>\n\n<p>That more than 2 hours I'm on it, I've try to uninstall pip, pip3, use pip or pip3, reinstall, use python -m pip install ... But nothing work...</p>\n\n<p>Please I don't understand, and I'm beginner with Python and a little with Raspberry and the Linux environment.</p>\n"}, {"tags": ["python", "xmlhttprequest", "web-crawler"], "comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 1, "creation_date": 1559765621, "post_id": 56467183, "comment_id": 99526197, "body": "I think you would need to include more information such as how you got the initial list of 200,000 authors previously. You could also include multiple examples (like 2-3) so we can know if the <code>item_id</code> and <code>group_id</code> are expected to be the same for all requests, or should be dynamically determined. Would it be possible to include your original code that was working previously?"}, {"owner": {"reputation": 1, "user_id": 11605883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L0pDCSiPcWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrksO9nXfjSgOFDf1gBEvOq41aCg/mo/photo.jpg?sz=128", "display_name": "Sophia Z", "link": "https://stackoverflow.com/users/11605883/sophia-z"}, "reply_to_user": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1559779745, "post_id": 56467183, "comment_id": 99530226, "body": "Thank you @Reedinationer, I have already updated."}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1559860336, "post_id": 56467183, "comment_id": 99561804, "body": "Yeah that&#39;s more likely to get people to help answer it. I don&#39;t really have any experience with XHR inside browsers, but perhaps <a href=\"https://stackoverflow.com/a/26947063/10924296\">this post</a> would be useful!"}], "owner": {"reputation": 1, "user_id": 11605883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L0pDCSiPcWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrksO9nXfjSgOFDf1gBEvOq41aCg/mo/photo.jpg?sz=128", "display_name": "Sophia Z", "link": "https://stackoverflow.com/users/11605883/sophia-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559789810, "creation_date": 1559764716, "last_edit_date": 1559789810, "question_id": 56467183, "link": "https://stackoverflow.com/questions/56467183/how-to-fetch-query-string-parameter-to-constitute-a-url-for-web-crawling", "title": "How to fetch query string parameter to constitute a URL for web crawling?", "body": "<p>I'm doing a Web Crawling project, which needs to collect user's comments from each of the 200,000 authors' videos on a video website. Recently, this website updated its URL, create a new parameter(_signature) into their API URL. Is there any suggestion to fetch this new parameter?</p>\n\n<p>The example web API URLs &amp; URL are as below: <a href=\"https://www.ixigua.com/api/comment_module/video_comment?_signature=vhm.AAgEAy3U9zpQ3OMV74fpuAAOL1&amp;item_id=6698972531753222663&amp;group_id=6698972531753222663&amp;offset=10\" rel=\"nofollow noreferrer\">https://www.ixigua.com/api/comment_module/video_comment?_signature=vhm.AAgEAy3U9zpQ3OMV74fpuAAOL1&amp;item_id=6698972531753222663&amp;group_id=6698972531753222663&amp;offset=10</a>\nrefers to: <a href=\"https://www.ixigua.com/i6698972531753222663/\" rel=\"nofollow noreferrer\">https://www.ixigua.com/i6698972531753222663/</a></p>\n\n<p><a href=\"https://www.ixigua.com/api/comment_module/video_comment?_signature=Xs6IHAAgEABXgvIJnklsal7OiAAAAI3&amp;item_id=6699046583612211720&amp;group_id=6699046583612211720&amp;offset=10\" rel=\"nofollow noreferrer\">https://www.ixigua.com/api/comment_module/video_comment?_signature=Xs6IHAAgEABXgvIJnklsal7OiAAAAI3&amp;item_id=6699046583612211720&amp;group_id=6699046583612211720&amp;offset=10</a>\nrefers to: <a href=\"https://www.ixigua.com/i6699046583612211720/\" rel=\"nofollow noreferrer\">https://www.ixigua.com/i6699046583612211720/</a></p>\n\n<p>What I had to reach the original 200,000 authors is a list of their item_id/group_id(I stored them in Amazon A3, you may find it in my code below). Plus, item_id is the same as the group_id. So to move on, all I need is the _signature.</p>\n\n<p>For different author, this website assign a unique _signature for them. In the example API URL, <strong>First author's _signature is: vh-m.AAgEAy3U9zpQ3OMV74fpuAAOL1. Second is Xs6IHAAgEABXgvIJnklsal7OiAAAAI3</strong> </p>\n\n<p>This is what i am meeting trouble with. I went through the website and found it under XHR as a part of query string parameter but have no idea how to fetch it. Before this update, the API URL doesn't include the  _signature. My original code went smoothly as below:</p>\n\n<pre><code>class Id1Spider(scrapy.Spider):\n    name = 'id1'\n    allowed_domains = ['www.ixigua.com']\n    df = pd.read_csv('https://s3.amazonaws.com/xiguaid/group_id.csv')\n    df = df.iloc[32640:189680,1] \n\n    list_id = df.unique().tolist()\n    i = 0\n    start_urls = [\"https://www.ixigua.com/api/comment/list/?group_id=\"+ str(list_id[i]) +\"&amp;item_id=\"+ str(list_id[i]) +\"&amp;offset=0&amp;count=20\"]\n    user_agent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'\n    offset = 0\n    count = 20\n\n    def parse(self, response):\n        data = json.loads(response.body)\n        comments = data['data']['comments']\n        total = data['data']['total']\n\n\n        for ele in list(comments):\n            try:\n                comments_id=ele['user']['user_id']\n                comments_text=ele['text']\n                reply_count=ele['reply_count']\n                digg_count=ele['digg_count']\n                create_time=ele['create_time']              \n\n            except:\n                pass\n\n            item = {\n                    'comments_id':comments_id,\n                    'comments_text':comments_text,\n                    'reply_count':reply_count,\n                    'digg_count':digg_count,\n                    'create_time':create_time,\n                    'item_id': self.list_id[self.i]\n                } \n            yield item\n\n        if data['data']['has_more']:\n            self.offset += 20\n            if self.offset &gt; total:\n                self.offset = total\n            elif self.offset &lt;= total: \n                self.offset = self.offset\n\n            next_page_url = \"https://www.ixigua.com/api/comment/list/?group_id=\"+ str(self.list_id[self.i]) +\"&amp;item_id=\"+ str(self.list_id[self.i]) +\"&amp;offset=\" + str(self.offset)+\"&amp;count=\" + str(self.count)\n            yield scrapy.Request(url = next_page_url, callback = self.parse)\n\n        else: \n            self.offset = 0\n            self.count = 20\n            self.i = self.i + 1\n            try:\n                next_page_url = \"https://www.ixigua.com/api/comment/list/?group_id=\"+ str(self.list_id[self.i]) +\"&amp;item_id=\"+ str(self.list_id[self.i]) +\"&amp;offset=\" + str(self.offset)+\"&amp;count=\" + str(self.count)\n                yield scrapy.Request(url = next_page_url, callback = self.parse)\n            except:  \n                pass\n</code></pre>\n\n<p>Thanks in advance for any suggestions!!! Please do let me know if I miss any information for solving this problem since this is my first post.</p>\n"}, {"tags": ["python", "factory", "multiple-inheritance", "type-hinting"], "comments": [{"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1559764874, "post_id": 56467144, "comment_id": 99525905, "body": "For <code>class_factory</code>, since it returns the result of a <code>type()</code> call, probably would be <code>type</code>. And for <code>result_class</code>, ...also <code>type</code>, apparently. You can try creating a dummy class on a python command prompt and doing <code>type(dummy_class)</code> to see what type classes return as, and you can do the same for the result of the <code>type()</code> function"}, {"owner": {"reputation": 31, "user_id": 10445026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce09f465046cd9c54ad65f1c4f026afe?s=128&d=identicon&r=PG&f=1", "display_name": "vhle", "link": "https://stackoverflow.com/users/10445026/vhle"}, "reply_to_user": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1559765382, "post_id": 56467144, "comment_id": 99526105, "body": "It&#39;s true that type(result_class)=type, but it would be interesting to express that result_class is a subtype of both Subject and class_T."}, {"owner": {"reputation": 40179, "user_id": 646543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a6xF2.jpg?s=128&g=1", "display_name": "Michael0x2a", "link": "https://stackoverflow.com/users/646543/michael0x2a"}, "edited": false, "score": 2, "creation_date": 1559765875, "post_id": 56467144, "comment_id": 99526316, "body": "I think you are looking for <a href=\"https://github.com/python/typing/issues/213\" rel=\"nofollow noreferrer\">intersection types</a>, which unfortunately do not exist yet."}], "owner": {"reputation": 31, "user_id": 10445026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce09f465046cd9c54ad65f1c4f026afe?s=128&d=identicon&r=PG&f=1", "display_name": "vhle", "link": "https://stackoverflow.com/users/10445026/vhle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1559764541, "creation_date": 1559764541, "question_id": 56467144, "link": "https://stackoverflow.com/questions/56467144/what-is-the-correct-type-hint-for-class-factory-with-multiple-inheritance", "title": "What is the correct type hint for class factory with multiple inheritance?", "body": "<p>What is the correct return type of the following function?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import typing\n\nT = typing.TypeVar['T']\nU = typing.TypeVar['U']\n\n\ndef class_factory(class_T: typing.Type[T], class_U: typing.Type[U]) -&gt; ???:\n    return type(class_T.__name__ + '_x_' + class_U.__name__,\n                (class_T, class_U), {})\n\n</code></pre>\n\n<p>Background: I am trying to convert a normal python class T to Subject class (Subject as in the observer pattern). My idea is to create class SubjectT inheriting from both T and Subject:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import typing\nT = typing.TypeVar('T')\n\ndef create_subject(class_T: typing.Type[T]) -&gt; ???:\n    class result_class(Subject, class_T):\n        def __setattr__(self, name, value):\n            super().__setattr__(name, value)\n            self.notify()   # notify observers of all changes\n    return result_class  \n</code></pre>\n\n<p>This works, but my IDE does not offer any code auto-completion for <code>result_class</code>.</p>\n"}, {"tags": ["python", "python-requests", "wget", "python-os"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1559764801, "post_id": 56467141, "comment_id": 99525862, "body": "note that there is a python <code>wget</code> package..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 8, "creation_date": 1559764847, "post_id": 56467141, "comment_id": 99525894, "body": "you should drop os.system and use subprocess.run. Also pass arguments as list. In your case it&#39;s very possible that <code>zip_file_url</code> contains strange characters which make your command line fail"}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1559765025, "post_id": 56467141, "comment_id": 99525967, "body": "Such as the <code>&amp;</code> character in URL query strings."}, {"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559767264, "post_id": 56467141, "comment_id": 99526910, "body": "The string is: <a href=\"http://mediafile.cloud/b34b4f6720a31f73?pt=VEZGV1VrNVFXVEZPUWpsYVRHeFVhM0ZtYUdOUFFUMDlPdnJCa20rVzVvZnYrZ1kxQXdraGgvWT0%3D\" rel=\"nofollow noreferrer\">mediafile.cloud/&hellip;</a> , It shouldn&#39;t create any complications. Regex returns the same result."}, {"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559767278, "post_id": 56467141, "comment_id": 99526914, "body": "And the wget package returns 403 error."}, {"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559767714, "post_id": 56467141, "comment_id": 99527102, "body": "Edit: The wget module doesn&#39;t do anything, it does not download any files and the script keeps continuing on."}, {"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559779465, "post_id": 56467141, "comment_id": 99530181, "body": "Okay I tried launching the script in my CMD, it responds with wget is not recognized as an internal or external command, why is that? wget works in cmd as well as python?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559767093, "post_id": 56467248, "comment_id": 99526825, "body": "I did try that, but sadly it did not work :(, regex is working correctly."}], "tags": [], "owner": {"reputation": 1335, "user_id": 11434751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HHKCz781MhA/AAAAAAAAAAI/AAAAAAAAAbs/U7_Zg8vv9zQ/photo.jpg?sz=128", "display_name": "Jason K Lai", "link": "https://stackoverflow.com/users/11434751/jason-k-lai"}, "is_accepted": false, "score": 1, "last_activity_date": 1559765043, "creation_date": 1559765043, "answer_id": 56467248, "question_id": 56467141, "link": "https://stackoverflow.com/questions/56467141/why-doest-os-module-run-wget-cmd-command/56467248#56467248", "title": "Why does&#39;t os module run wget cmd command?", "body": "<p>There are a few things that may help here (it may or may not solve your problem, because it is dependent on the your machine's setup and configuration). First, one thing I would suggest is to be more specific on the paths. You can use absolute paths in the wget line like so: </p>\n\n<pre><code>\"wget -O {0} {1}\".format('/path/to/output/dir/CreatureFinalZTL.zip', zip_file_url)\n</code></pre>\n\n<p>This is usually helpful in case the Python environment does not operate in a directory you are expecting. Alternatively, you can force the directory with the following python command:</p>\n\n<pre><code>os.chdir( path )\n</code></pre>\n\n<p>Then, you can operate with relative paths without worry. A second thing I would suggest is to confirm that the url is what you are expecting. Just print it out like so:</p>\n\n<pre><code>print( zip_file_url )\n</code></pre>\n\n<p>It might sound silly, but it is important to confirm that your regex is operating correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "edited": false, "score": 0, "creation_date": 1559767222, "post_id": 56467528, "comment_id": 99526881, "body": "I tried it, but it says FileNotFoundError: [WinError 2] The system cannot find the file specifie, is there something I&#39;m doing wrong?"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1559766511, "last_edit_date": 1559766511, "creation_date": 1559766410, "answer_id": 56467528, "question_id": 56467141, "link": "https://stackoverflow.com/questions/56467141/why-doest-os-module-run-wget-cmd-command/56467528#56467528", "title": "Why does&#39;t os module run wget cmd command?", "body": "<p>Use <code>subprocess</code> instead.</p>\n\n<pre><code>import subprocess\n\n...\n\nsubprocess.run([\"wget\",  \"-O\", 'CreatureFinalZTL.zip', zip_file_url])\n</code></pre>\n\n<p>This avoids any shell involvement with the command you wish to run.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "is_accepted": false, "score": 0, "last_activity_date": 1559810821, "creation_date": 1559810821, "answer_id": 56473968, "question_id": 56467141, "link": "https://stackoverflow.com/questions/56467141/why-doest-os-module-run-wget-cmd-command/56473968#56473968", "title": "Why does&#39;t os module run wget cmd command?", "body": "<p>Fixed, had to re-add wget to PATHS on windows.</p>\n"}], "owner": {"reputation": 37, "user_id": 8447577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75c835cca2a97835009c6875ebde9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Steb", "link": "https://stackoverflow.com/users/8447577/steb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1559810821, "creation_date": 1559764519, "question_id": 56467141, "link": "https://stackoverflow.com/questions/56467141/why-doest-os-module-run-wget-cmd-command", "title": "Why does&#39;t os module run wget cmd command?", "body": "<p>I'm trying to download a zip file off the web and trying to download it by console command using wget -O fileName urlLink, but when trying the code, CMD opens for a second then closes and I canno't find the file anywhere.</p>\n\n<p>I've tried using other ways of getting the file downloaded, but they return ERROR 403. Using wget in CMD downloads the right file, but not in the python code.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def gotoDownload(link):\n    try:\n        with requests.Session().get(link) as download:\n            if isUrlOnline(download):\n                soup = BeautifulSoup(download.content, 'html.parser')\n                filtered = soup.find_all('script')\n                zip_file_url = re.search(r\"('http.*?')\", filtered[17].text).group().replace(\"'\", \"\")\n\n                os.system(\"wget -O {0} {1}\".format('CreatureFinalZTL.zip', zip_file_url))\n</code></pre>\n\n<p>Expect the file to download\nInstead doesn't download anything.</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 0, "creation_date": 1559765517, "post_id": 56467132, "comment_id": 99526144, "body": "Your example in not a complete Minimal, Reproducible Example. As there is both code and input data missing. See here: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>    However i would guess that <code>question.find(&#39;span&#39;, {&#39;itemprop&#39;: &#39;telephone&#39;})</code> returns None in some iteration, but i don&#39;t know what you are iterating over since i don&#39;t know what <b>questions</b> contains."}, {"owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "reply_to_user": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 0, "creation_date": 1559765858, "post_id": 56467132, "comment_id": 99526303, "body": "Sorry, it said nnot to paste the full code, i have edited the code to the full page :D"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559765651, "post_id": 56467296, "comment_id": 99526210, "body": "That worked to strip the span yet it still gives the same error. <code>01430 422826  Traceback (most recent call last):   File &quot;webscraper2.py&quot;, line 20, in &lt;module&gt;     busnumber = question.select_one(&#39;.business--telephoneNumber&#39;).get_text() AttributeError: &#39;NoneType&#39; object has no attribute &#39;get_text&#39; </code>"}, {"owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559768895, "post_id": 56467296, "comment_id": 99527518, "body": "it still gives the same error for some reason although it is removing the span tag? <code>0113 286 6060  0113 256 9027  0113 281 3009  01430 422826  Traceback (most recent call last):   File &quot;webscraper2.py&quot;, line 16, in &lt;module&gt;     busnumber = question.select_one(&#39;span.business--telephoneNumber&#39;).text AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39; </code>"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559768990, "post_id": 56467296, "comment_id": 99527554, "body": "One moment then"}, {"owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559769057, "post_id": 56467296, "comment_id": 99527583, "body": "i have uploaded the full new code at the bottom of the original question if that helps? am i doing something else wwrong maybe? thank you for your help aswell :D"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559769103, "post_id": 56467296, "comment_id": 99527605, "body": "I&#39;ve edited to select for only those listings with a telephone number It is using bs4 4.7.1."}, {"owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "edited": false, "score": 0, "creation_date": 1559769230, "post_id": 56467296, "comment_id": 99527657, "body": "yes it does work, it seems to be something after that? why would that number not save to the csv? im lost now haha"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 1, "last_activity_date": 1559769256, "last_edit_date": 1559769256, "creation_date": 1559765288, "answer_id": 56467296, "question_id": 56467132, "link": "https://stackoverflow.com/questions/56467132/is-get-text-from-bs4-different-for-span-tags-cant-remove-span-tags/56467296#56467296", "title": "is get_text() from bs4 different for span tags? Cant remove span tags", "body": "<p>You need to get a different parent in order to select the appropriate child and change your selector for the child as shown below:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nurl = 'https://www.yell.com/ucs/UcsSearchAction.do?keywords=farmer&amp;location=leeds'\nheaders = {\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\n    }\nsite = requests.get(url, headers=headers, timeout=5)\nsoup = bs(site.content, 'lxml')\nquestions = soup.select('.businessCapsule--mainContent:has(span.business--telephoneNumber)')\nfor question in questions:\n    print(question.select_one('span.business--telephoneNumber').text)\n</code></pre>\n\n<p>If you check this different parent selector you will see it selects the entire box with info in so you can then select your various children</p>\n\n<p><a href=\"https://i.stack.imgur.com/qKEE1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qKEE1.png\" alt=\"enter image description here\"></a></p>\n\n<p>If that is too retrictive you can test if tel was present</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nurl = 'https://www.yell.com/ucs/UcsSearchAction.do?keywords=farmer&amp;location=leeds'\nheaders = {\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\n    }\nsite = requests.get(url, headers=headers, timeout=5)\nsoup = bs(site.content, 'lxml')\nquestions = soup.select('.businessCapsule--mainContent')\nfor question in questions:\n    tel = question.select_one('span.business--telephoneNumber')\n    if tel is None:\n        tel = 'Not present'\n    else:\n        tel = tel.text\n    print(tel)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5418392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0V2ylTUJ5j0/AAAAAAAAAAI/AAAAAAAAA20/2jIkMkN1ePw/photo.jpg?sz=128", "display_name": "Patrick Kenneally", "link": "https://stackoverflow.com/users/5418392/patrick-kenneally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 56467296, "answer_count": 1, "score": 1, "last_activity_date": 1559769256, "creation_date": 1559764466, "last_edit_date": 1559769004, "question_id": 56467132, "link": "https://stackoverflow.com/questions/56467132/is-get-text-from-bs4-different-for-span-tags-cant-remove-span-tags", "title": "is get_text() from bs4 different for span tags? Cant remove span tags", "body": "<p>Whilst making a web scraper i am able to find an scrape the data available.\non 2 fields of data i am able to use the beautifulsoup get_text() to reomve html from the data</p>\n\n<p>but the 3rd fields will not work when i use get_text(). I can get it to give me the whole span tag just not the text inside it.</p>\n\n<p>i have tried different iterations of getting the data all the same, it will give me the whole span tag ie. stuff</p>\n\n<p>Trying to set busnumber to the phone number inside this span tag</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;span class=\"business--telephoneNumber\" itemprop=\"telephone\"&gt;01430 422826 &lt;/span&gt;\n</code></pre>\n\n<p>ive tried</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nimport requests\nimport csv\n\ndata_list=[]\nurl = 'https://www.yell.com/ucs/UcsSearchAction.do?keywords=farmer&amp;location=leeds'\nheaders = {\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\n    }\nsite = requests.get(url, headers=headers, timeout=5);\nif site.status_code is 200:\n    content = BeautifulSoup(site.content, 'html.parser')\n    #print(content)\n    questions = content.find_all(class_='businessCapsule') \nfor question in questions:\n        busname = question.find(class_='businessCapsule--name').get_text()\n        bustype =   question.find(class_='businessCapsule--classification').get_text()\n        busnum = question.find('span', {'itemprop': 'telephone'})\n        print(busnum)\n        busnumber = busnum.get_text()\n        new_data = {\"busname\": busname, \"bustype\": bustype, \"busnumber\": busnumber}\n        data_list.append(new_data)\n    with open ('selector.csv','w') as file:\n        writer = csv.DictWriter(file, fieldnames = [\"busname\", \"bustype\", \"busnumber\"], delimiter = ';')\n        writer.writeheader()\n        for row in data_list:\n            writer.writerow(row)\n</code></pre>\n\n<p>as well as</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nimport requests\nimport csv\n\ndata_list=[]\nurl = 'https://www.yell.com/ucs/UcsSearchAction.do?keywords=farmer&amp;location=leeds'\nheaders = {\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\n    }\nsite = requests.get(url, headers=headers, timeout=5);\nif site.status_code is 200:\n    content = BeautifulSoup(site.content, 'html.parser')\n    #print(content)\n    questions = content.find_all(class_='businessCapsule')\n    for question in questions:\n        busname = question.find(class_='businessCapsule--name').get_text()\n        bustype =   question.find(class_='businessCapsule--classification').get_text()\n        busnumber = question.find('span', {'itemprop': 'telephone'}).get_text()\n        new_data = {\"busname\": busname, \"bustype\": bustype, \"busnumber\": busnumber}\n        data_list.append(new_data)\n    with open ('selector.csv','w') as file:\n        writer = csv.DictWriter(file, fieldnames = [\"busname\", \"bustype\", \"busnumber\"], delimiter = ';')\n        writer.writeheader()\n        for row in data_list:\n            writer.writerow(row)\n</code></pre>\n\n<p>on both cases the get_text() gives this error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"webscraper2.py\", line 22, in &lt;module&gt;\n    busnumber = busnum.get_text()\nAttributeError: 'NoneType' object has no attribute 'get_text'\n</code></pre>\n\n<p>if get_text is removed it will give the whole tag</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;span class=\"business--telephoneNumber\" itemprop=\"telephone\"&gt;01430 422826 &lt;/span&gt;\n</code></pre>\n\n<p>i only need the insed phone number.</p>\n\n<p>update - latest code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup as bs\nimport requests\nimport csv\n\ndata_list=[]\nurl = 'https://www.yell.com/ucs/UcsSearchAction.do?keywords=farmer&amp;location=leeds'\nheaders = {\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\n    }\nsite = requests.get(url, headers=headers, timeout=5)\nsoup = bs(site.content, 'html.parser')\nquestions = soup.select('.businessCapsule--mainContent')\nfor question in questions:\n    busname = question.find(class_='businessCapsule--name').get_text()\n    bustype =   question.find(class_='businessCapsule--classification').get_text()\n    busnumber = question.select_one('span.business--telephoneNumber').text\n    print(busnumber)\n    new_data = {\"busname\": busname, \"bustype\": bustype, \"busnumber\": busnumber}\n    data_list.append(new_data)\nwith open ('selector.csv','w') as file:\n    writer = csv.DictWriter(file, fieldnames = [\"busname\", \"bustype\", \"busnumber\"], delimiter = ';')\n    writer.writeheader()\n    for row in data_list:\n        writer.writerow(row)\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "edited": false, "score": 0, "creation_date": 1559764524, "post_id": 56467113, "comment_id": 99525735, "body": "not sure I get it right, are you trying to change the name of the column? are you using pandas?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1559764530, "post_id": 56467113, "comment_id": 99525737, "body": "The values <i>in</i> the dataframe are mutable, but the indices and column names are not. To change column names, you&#39;ll have to add a new column with that name and drop the old one"}, {"owner": {"reputation": 11, "user_id": 11534192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7785505e0d16be22e290897d13a7057c?s=128&d=identicon&r=PG&f=1", "display_name": "WON_Eric", "link": "https://stackoverflow.com/users/11534192/won-eric"}, "edited": false, "score": 0, "creation_date": 1559764741, "post_id": 56467113, "comment_id": 99525826, "body": "I&#39;m trying to change the name of a column. The actual code is a for loop, where I am trying to rename a particular column each type the loop executes. I get the same error so I showed the simple example."}], "answers": [{"tags": [], "owner": {"reputation": 815, "user_id": 3806464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19a5a9cde04aba20047a9f508a530c28?s=128&d=identicon&r=PG&f=1", "display_name": "krflol", "link": "https://stackoverflow.com/users/3806464/krflol"}, "is_accepted": false, "score": 4, "last_activity_date": 1559765150, "last_edit_date": 1559765150, "creation_date": 1559764624, "answer_id": 56467162, "question_id": 56467113, "link": "https://stackoverflow.com/questions/56467113/how-to-change-an-element-of-a-list/56467162#56467162", "title": "How to change an element of a list", "body": "<p>The answer to your question. Columns are an index, and they are immutable. You can, however do something like this:</p>\n\n<pre><code>test = df.columns.values\ntest[1] = 'Fred'\ndf.columns = test\n</code></pre>\n\n<p>Or use the dedicated method <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.rename()</code></a> like this:</p>\n\n<pre><code>df.rename(columns={df.columns[1]: \"Fred\"}, inplace=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 8761261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b338bda0208dffb298eba655ea25abf4?s=128&d=identicon&r=PG&f=1", "display_name": "M. Shen", "link": "https://stackoverflow.com/users/8761261/m-shen"}, "is_accepted": true, "score": 0, "last_activity_date": 1559764762, "creation_date": 1559764762, "answer_id": 56467193, "question_id": 56467113, "link": "https://stackoverflow.com/questions/56467113/how-to-change-an-element-of-a-list/56467193#56467193", "title": "How to change an element of a list", "body": "<p>Try the following:</p>\n\n<pre><code>Object1 = df.columns.values\nObject1[1]='Fred'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11534192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7785505e0d16be22e290897d13a7057c?s=128&d=identicon&r=PG&f=1", "display_name": "WON_Eric", "link": "https://stackoverflow.com/users/11534192/won-eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1559765240, "accepted_answer_id": 56467193, "answer_count": 2, "score": -1, "last_activity_date": 1559765150, "creation_date": 1559764360, "last_edit_date": 1559764439, "question_id": 56467113, "link": "https://stackoverflow.com/questions/56467113/how-to-change-an-element-of-a-list", "closed_reason": "Duplicate", "title": "How to change an element of a list", "body": "<p>I assign the column index of a dataframe to an object.</p>\n\n<pre><code>Object1 = df.columns\n</code></pre>\n\n<p>Next, I try to change the 2nd element of this list.</p>\n\n<pre><code>Object1[1]='Fred'\n</code></pre>\n\n<p>I am getting the following error when I attempt to change the element of a list.</p>\n\n<pre><code>'TypeError: Index does not support mutable operations'\n</code></pre>\n\n<p>I simply expect the second element (column) name to be \"Fred\".</p>\n"}, {"tags": ["python", "selenium", "xpath", "css-selectors", "webdriverwait"], "comments": [{"owner": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "edited": false, "score": 1, "creation_date": 1559764785, "post_id": 56467104, "comment_id": 99525853, "body": "yes, but i don&#39;t know if its possible without using the xpath functions in selenium. The following would find a pre that contains &quot;Text is here.&quot;:  <code>driver.find_element_by_xpath(&quot;&#47;&#47;pre[contains(., &#39;Text is here.&#39;)]&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559828541, "post_id": 56467532, "comment_id": 99548192, "body": "Thank you for your response. It worked for me. The only thing is the release notes that I am validating is too long and if I validate for a failure of test with a wrong keyword that does not exist then it throws timeout exception. And I am not sure if there are ways to speed up the search process to give a failure. Also just to confirm the solution that you gave is checking if the expected text is contained in the release notes? that is validate partial text match?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559828666, "post_id": 56467532, "comment_id": 99548285, "body": "@nd23 <a href=\"https://stackoverflow.com/help/why-vote\">Upvote</a> the answer if this/any answer is/was helpful to you for the benefit of the future readers."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559828796, "post_id": 56467532, "comment_id": 99548354, "body": "@nd23 You can always replace the string <code>Text is here</code> with a variable containing a smaller/larger text."}, {"owner": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559829529, "post_id": 56467532, "comment_id": 99548825, "body": "Sorry I didn&#39;t quite understand this comment. In my solution I am using this: <code>element = WebDriverWait(driver, 20).until(EC.text_to_be_present_in_element((By.CSS_SELECTOR, &quot;div.ui-dialog-content.ui-widget-content#dialog&gt;pre&quot;), &quot;Text&quot;))</code>  to validate that it is contained within &quot;Text is here&quot;. What I meant was if I check for a test failure it takes too long is there a way to make the search faster?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559830152, "post_id": 56467532, "comment_id": 99549184, "body": "@nd23 Checkout the updated answer and let me know if you have further queries."}, {"owner": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "edited": false, "score": 0, "creation_date": 1559831766, "post_id": 56467532, "comment_id": 99550133, "body": "Thank you. This is not exactly what I though could be alternate solution in selenium but I can use this to get rid of timeout exception."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 0, "last_activity_date": 1559830102, "last_edit_date": 1559830102, "creation_date": 1559766427, "answer_id": 56467532, "question_id": 56467104, "link": "https://stackoverflow.com/questions/56467104/assert-if-text-within-an-element-contains-specific-partial-text/56467532#56467532", "title": "Assert if text within an element contains specific partial text", "body": "<p>To validate the presence of the desired text within any element you need to use a <code>try-catch{}</code> block inducing <em>WebDriverWait</em> for <code>text_to_be_present_in_element()</code> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>try:\n    WebDriverWait(driver, 20).until(EC.text_to_be_present_in_element((By.CSS_SELECTOR, \"div.ui-dialog-content.ui-widget-content#dialog&gt;pre\"), \"Text is here\"))\n    print(\"Desired text was present\")\nexcept TimeoutException:\n    print(\"Desired text was not present\")\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>try:\n    WebDriverWait(driver, 20).until(EC.text_to_be_present_in_element((By.XPATH, \"//div[@class='ui-dialog-content ui-widget-content' and @id='dialog']/pre\"), \"Text is here\"))\n    print(\"Desired text was present\")\nexcept TimeoutException:\n    print(\"Desired text was not present\")\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 73, "user_id": 6357190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XEbbFqFA1bc/AAAAAAAAAAI/AAAAAAAAABY/smCGzk29jK8/photo.jpg?sz=128", "display_name": "nd23", "link": "https://stackoverflow.com/users/6357190/nd23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 56467532, "answer_count": 1, "score": -2, "last_activity_date": 1559830102, "creation_date": 1559764313, "last_edit_date": 1559766401, "question_id": 56467104, "link": "https://stackoverflow.com/questions/56467104/assert-if-text-within-an-element-contains-specific-partial-text", "title": "Assert if text within an element contains specific partial text", "body": "<p>I have an element within  tag that has release notes. I have to validate if it contains specific text. I am able to extract the text using following code:</p>\n\n<p><code>WebDriverWait(self.driver, 10).until(EC.visibility_of_element_located((By.XPATH, ManageSoftware.release_notes_xpath))).get_attribute(\"innerHTML\")</code></p>\n\n<p>How do I assert if it contain a specific text, say \"abc\". Is there any function like contains() or isPresent() that I can use here?</p>\n\n<p>The code that I am working on is:</p>\n\n<pre><code>&lt;div id=\"dialog\" class=\"ui-dialog-content ui-widget-content\" style=\"width: auto; min-height: 0px; max-height: none; height: 483px;\"&gt;\n&lt;pre&gt; \nText is here.\n&lt;/pre&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "gdal", "geopandas", "ogr", "grass"], "answers": [{"tags": [], "owner": {"reputation": 853, "user_id": 1013346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Vjcwz.png?s=128&g=1", "display_name": "epifanio", "link": "https://stackoverflow.com/users/1013346/epifanio"}, "is_accepted": true, "score": 1, "last_activity_date": 1559834296, "creation_date": 1559834296, "answer_id": 56480584, "question_id": 56467081, "link": "https://stackoverflow.com/questions/56467081/read-grass-vector-datasources-in-python-using-geopandas/56480584#56480584", "title": "Read GRASS vector datasources in Python using GeoPandas", "body": "<p>I just got a reply from the  <a href=\"https://github.com/Toblerity/Fiona/issues/756\" rel=\"nofollow noreferrer\">Issue I opened on GitHub</a>, problem solved by enabling the <code>OGR_GRASS</code> driver in <code>Fiona</code>, the code below works just fine:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import fiona\nimport geopandas as gpd\n\nfiona.supported_drivers[\"OGR_GRASS\"] = \"r\" \ngdf = gpd.read_file('/GRASSDB/LOCATION_NAME/MAPSET/vector/layername/head')\n</code></pre>\n"}], "owner": {"reputation": 853, "user_id": 1013346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Vjcwz.png?s=128&g=1", "display_name": "epifanio", "link": "https://stackoverflow.com/users/1013346/epifanio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 56480584, "answer_count": 1, "score": 1, "last_activity_date": 1559834296, "creation_date": 1559764159, "question_id": 56467081, "link": "https://stackoverflow.com/questions/56467081/read-grass-vector-datasources-in-python-using-geopandas", "title": "Read GRASS vector datasources in Python using GeoPandas", "body": "<p>I am trying to read a <code>GRASS GIS</code> vector layer into a <code>GeoPandas Dataframe</code>. </p>\n\n<p>As I was not able to enable the <code>GRASS GIS</code> (read-only) drivers in <code>Fiona</code> <a href=\"https://github.com/Toblerity/Fiona/issues/756\" rel=\"nofollow noreferrer\">see related issue</a></p>\n\n<p>I made a \"hackish\" method (which works) to read a <code>GRASS GIS</code> vector layer into a <code>GeoPandas Dataframe</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport os\nfrom osgeo import ogr\nimport pandas as pd\nfrom shapely import wkt\nimport geopandas as gpd\n\n\ndef grass2gpd(layername, grassdb, location_name, mapset):\n    datafile = os.path.join(GRASSDB, LOCATION_NAME, MAPSET, 'vector', layername, 'head')\n    driver = ogr.GetDriverByName('GRASS')\n    # here the data is read in readonly mode, but also the GDAL GRASS driver has no write capabilities\n    # I am not sure at the end of the method on how to properly close the datasource (and, actually, if I have to ... )  \n    dataSource = driver.Open(datafile, 0)     \n    layer = dataSource.GetLayer() \n    srs = layer.GetSpatialRef().ExportToWkt()\n    lyrDefn = layer.GetLayerDefn() \n    fieldnames = []\n    for i in range( lyrDefn.GetFieldCount() ):  \n        fieldnames.append(lyrDefn.GetFieldDefn(i).GetName() )\n    # hack to avoid to call `layer.ResetReading()` and iterate again over the features\n    #\n    # I first build a list of dictionaries\n    # each element of the list is of the form:\n    # {geom: WKT_Geometry\n    #  attr: {field_1: val, field_2: val, ..., field_N: val}}\n    # So the attr key is a dictionary itself\n    # the nested loop first get the feature then create a dictionary of attributes looping over the list of fields\n    # \n    wktgeom = [{'geom':feature.GetGeometryRef().ExportToWkt(), \n                'attr':{i:feature.GetField(i) for i in fieldnames}} for feature in layer] \n    # At this point I should close or unlink the datasource, but I can't find the right method to do it\n    #\n    # Create a dataframe from the list of dictionaries\n    #\n    df = pd.DataFrame(wktgeom)\n    # convert the WKT string to a shapely WKT object\n    # concatenate a Geometry dataframe with an attribute dataframe \n    df_geom = pd.concat([df['geom'].apply(wkt.loads),  \n                        pd.DataFrame(list(df['attr'].values))], \n                       axis=1, sort=False)\n    # transform the pandas dataframe into a geopandas dataframe\n    gdf = gpd.GeoDataFrame(df_geom, geometry='geom', crs=srs)\n    return gdf\n</code></pre>\n\n<p>Running it e.g.:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nGRASSDB=\"/home/epinux/Data/grassdata\"\nLOCATION_NAME=\"lonlat\"\nMAPSET=\"PERMANENT\"\n\nlayername=\"img_left_filteredBS\"\n\ngdf = grass2gpd(layername=layername, \n                grassdb=GRASSDB, \n                location_name=LOCATION_NAME, \n                 mapset=MAPSET)\ntype(gdf)\n\n# returns\n# geopandas.geodataframe.GeoDataFrame\n\n</code></pre>\n\n<p>The method will return a <code>geopandas.geodataframe.GeoDataFrame</code>, as I wanted but ...</p>\n\n<p>I was wondering if exist a way to pass directly into <code>GeoPandas</code> an OGR data source read by the <code>GDAL-OGR Python</code> interface. If no, do you have any suggestion to improve the \"hackish method\" I made? I added some inline comments in the code trying to explain my concerns.</p>\n"}, {"tags": ["python", "azure"], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "edited": false, "score": 0, "creation_date": 1559869834, "post_id": 56470159, "comment_id": 99563404, "body": "I have been working with the class you mentioned but I do not have the parameters and I don&#39;t know where to get them, I am very frustrated and azure documentation does not help. I try import just like this: from azure.mgmt.compute.v2019_03_01.operations import VirtualMachineImagesOperations  and i pass the compute_client and others args like this: vmio = VirtualMachineImagesOperations(compute_client,{},None,None)"}, {"owner": {"reputation": 23089, "user_id": 9773937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUlzf.jpg?s=128&g=1", "display_name": "Charles Xu", "link": "https://stackoverflow.com/users/9773937/charles-xu"}, "reply_to_user": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "edited": false, "score": 0, "creation_date": 1559869996, "post_id": 56470159, "comment_id": 99563432, "body": "@AbelOlguinChavez The parameters just like the things that you provide in the question, the publisher, offer and sku. Choose the method and use things of them as the need."}, {"owner": {"reputation": 23089, "user_id": 9773937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUlzf.jpg?s=128&g=1", "display_name": "Charles Xu", "link": "https://stackoverflow.com/users/9773937/charles-xu"}, "reply_to_user": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "edited": false, "score": 0, "creation_date": 1559870266, "post_id": 56470159, "comment_id": 99563484, "body": "@AbelOlguinChavez I update the answer to give an example. Hope it helps you."}, {"owner": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "edited": false, "score": 0, "creation_date": 1559870836, "post_id": 56470159, "comment_id": 99563591, "body": "that&#39;s it! I didn&#39;t know that was the publisher parameter, you are the crack, thanks a lot"}, {"owner": {"reputation": 23089, "user_id": 9773937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUlzf.jpg?s=128&g=1", "display_name": "Charles Xu", "link": "https://stackoverflow.com/users/9773937/charles-xu"}, "reply_to_user": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "edited": false, "score": 0, "creation_date": 1559870935, "post_id": 56470159, "comment_id": 99563603, "body": "@AbelOlguinChavez I&#39;m glad it helps you and you can mark it as the answer."}], "tags": [], "owner": {"reputation": 23089, "user_id": 9773937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUlzf.jpg?s=128&g=1", "display_name": "Charles Xu", "link": "https://stackoverflow.com/users/9773937/charles-xu"}, "is_accepted": true, "score": 2, "last_activity_date": 1559870233, "last_edit_date": 1559870233, "creation_date": 1559787487, "answer_id": 56470159, "question_id": 56467045, "link": "https://stackoverflow.com/questions/56467045/azure-python-sdk-list-of-os/56470159#56470159", "title": "Azure python sdk list of OS", "body": "<p>I think you want to get the VM images in the Azure marketplace. For this, you can take a look at the <a href=\"https://docs.microsoft.com/en-us/python/api/azure-mgmt-compute/azure.mgmt.compute.v2019_03_01.operations.virtualmachineimagesoperations?view=azure-python\" rel=\"nofollow noreferrer\">VirtualMachineImagesOperations</a> class, use the methods in it, then you can get the VM images which available with special requirements in the Azure marketplace.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here is an example that gets the images in the Azure marketplace:</p>\n\n<pre><code>from azure.mgmt.compute import ComputeManagementClient\nfrom azure.common.credentials import ServicePrincipalCredentials\n\nSubscription_Id = \"xxxxxx\"\nTenant_Id = \"xxxxxx\"\nClient_Id = \"xxxxxx\"\nSecret = \"xxxxxx\"\n\ncredential = ServicePrincipalCredentials(\n        client_id=Client_Id,\n        secret=Secret,\n        tenant=Tenant_Id\n        )\n\ncompute_client = ComputeManagementClient(credential, Subscription_Id)\nimages = compute_client.virtual_machine_images.list_offers('eastus', 'Canonical')\nfor image in images:\n    print(image.name)\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 4310155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100004871822797/picture?type=large", "display_name": "Abel Olguin Chavez", "link": "https://stackoverflow.com/users/4310155/abel-olguin-chavez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 56470159, "answer_count": 1, "score": 2, "last_activity_date": 1559870233, "creation_date": 1559764022, "question_id": 56467045, "link": "https://stackoverflow.com/questions/56467045/azure-python-sdk-list-of-os", "title": "Azure python sdk list of OS", "body": "<p>I try to get a list of all or most popular operating systems in azure (like ubuntu, centos, windows, etc.) using python sdk, all this to make a new virtual machine, in this example: <a href=\"https://docs.microsoft.com/en-us/python/api/overview/azure/virtualmachines?view=azure-python\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/python/api/overview/azure/virtualmachines?view=azure-python</a> for make a new virtual machine you need a storage_profile:</p>\n\n<pre><code>'storage_profile': {\n            'image_reference': {\n                'publisher': 'Canonical',\n                'offer': 'UbuntuServer',\n                'sku': '16.04.0-LTS',\n                'version': 'latest'\n            },\n        },\n</code></pre>\n\n<p>How can i get a list of this storage profiles or image references in python azure sdk? i try to use <strong>azure.mgmt.compute ComputeManagementClient</strong> but no has methods to get a list of storage profiles or image references, \nthe official documentation of azure is very confusing.</p>\n"}]