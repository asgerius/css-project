[{"tags": ["python", "variables"], "comments": [{"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 2, "creation_date": 1446681128, "post_id": 33534289, "comment_id": 54850018, "body": "<code>d = {s: Class(s) for s in l}</code>. don&#39;t name your list <code>list</code> (it shadows the <code>list</code> name) and don&#39;t name your class <code>Class</code> as it&#39;s too generic. and the first part is a dictionary comprehension if you want to read more on it."}, {"owner": {"reputation": 21, "user_id": 4726581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7e37b6039914feb2d21259baaddf2c6?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur", "link": "https://stackoverflow.com/users/4726581/arthur"}, "reply_to_user": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1446681351, "post_id": 33534289, "comment_id": 54850089, "body": "Am I correct in saying that produces a dictionary d which has {&#39;x&#39;: &#39;Class(x)&#39;, &#39;y&#39;: &#39;Class(y)&#39;, &#39;z&#39;: &#39;Class(z)&#39;} and, if so, how do I then instantiate x to be Class(x)? And apologies, &#39;list&#39; and &#39;Class&#39; were just example names."}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 1, "creation_date": 1446681483, "post_id": 33534289, "comment_id": 54850133, "body": "cool, no prob. and yes, it produces a dictionary. you almost never want to do what you are trying, it indicates something else is wrong with the code. however, if you really want to do it, you can do <code>locals().update(d)</code>"}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1446681517, "post_id": 33534289, "comment_id": 54850144, "body": "but think about it, how are you going to create the variables programmatically but then access them statically in your code? and why?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1446681652, "post_id": 33534289, "comment_id": 54850174, "body": "What are you trying to achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681602, "creation_date": 1446681602, "answer_id": 33534387, "question_id": 33534289, "link": "https://stackoverflow.com/questions/33534289/variables-from-a-list-with-further-usage-python/33534387#33534387", "title": "Variables from a list with further usage (Python)", "body": "<pre><code>lst = ['x','y','z']\nfor k in lst:\n    exec(k + \" = Class('\" + k + \"')\")\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4726581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7e37b6039914feb2d21259baaddf2c6?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur", "link": "https://stackoverflow.com/users/4726581/arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446681602, "creation_date": 1446680992, "question_id": 33534289, "link": "https://stackoverflow.com/questions/33534289/variables-from-a-list-with-further-usage-python", "title": "Variables from a list with further usage (Python)", "body": "<p>I have a list of strings like the following:</p>\n\n<pre><code>list = ['x','y','z']\n</code></pre>\n\n<p>For each of these, I need call a class within the Python file with these values as both the variable name and the object to be passed to the class, as follows:</p>\n\n<pre><code>x = Class('x')\ny = Class('y')\nz = Class('z')\n</code></pre>\n\n<p>This is all done within a class in a Python file and not at the command line. I have tried exec however I need to have access to these variables later and I don't know what the scope of exec is. Furthermore, exec is pretty nasty from what I have heard.</p>\n\n<p>I would really appreciate some help with this. I have tried looking on Stack Overflow for answers but a lot of the solutions didn't make sense to me.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pyqt5"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446681734, "post_id": 33534274, "comment_id": 54850201, "body": "Well, <code>object1</code> is new instance of <code>App()</code>, so obviously its line-edit will be empty."}, {"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446682818, "post_id": 33534274, "comment_id": 54850506, "body": "@ekhumoro oh... how shall I call it then?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1446689971, "post_id": 33534274, "comment_id": 54852413, "body": "Please <a href=\"http://stackoverflow.com/posts/33534274/edit\">edit your question</a> and add the code there. You should also explain more clearly what you are trying to do."}, {"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446748438, "post_id": 33534274, "comment_id": 54883877, "body": "@ekhumoro I tried creating another class which inherits from the LoginApp class and run the function through that, but no luck. Perhaps, running the function internally as self and then setting that as some global variable?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446760623, "post_id": 33534274, "comment_id": 54890890, "body": "Still waiting for you to action my previous request ;-)"}, {"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446761638, "post_id": 33534274, "comment_id": 54891379, "body": "@ekhumoro Terribly sorry, I somehow missed that first part. Have now edited the question to be more clear with all required code."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "edited": false, "score": 0, "creation_date": 1446768986, "post_id": 33557109, "comment_id": 54894099, "body": "It is currently still printing an empty string. What I have done: Replaced my class code with yours, tried with no-argument version also, tried defining a print function in my other script and then calling that print function in <code>some_function()</code>."}, {"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "edited": false, "score": 0, "creation_date": 1446812240, "post_id": 33557109, "comment_id": 54911107, "body": "Perfect! I have next to no idea what&#39;s happening but that&#39;s something I can work on. Thanks for sticking through the problem with me."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "edited": false, "score": 1, "creation_date": 1446825072, "post_id": 33557109, "comment_id": 54919168, "body": "@Prof. It is quite tricky. The script which starts an application doesn&#39;t get added to <code>sys.modules</code>. So if you explicitly import it again later on, all its code will be <i>re-executed</i>. This is different to all other modules, which will only ever be executed <i>once</i>. If they are imported again later on, python will re-use the module object that&#39;s stored in <code>sys.modules</code>. This has implications for any global variables that are set when a module is first executed. For start-up scripts that are re-imported, the global variables will not be the same."}, {"owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "edited": false, "score": 0, "creation_date": 1447506043, "post_id": 33557109, "comment_id": 55188892, "body": "Could I trouble you with another <a href=\"http://stackoverflow.com/questions/33701243/pyqt-thread-still-running-after-window-closed\">question</a>, I feel like it&#39;s linked to this one in that it is a problem with initialising/executing."}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1446779135, "last_edit_date": 1446779135, "creation_date": 1446767985, "answer_id": 33557109, "question_id": 33534274, "link": "https://stackoverflow.com/questions/33534274/pyqt-lineedit-is-empty-when-called-from-another-script/33557109#33557109", "title": "PyQt lineEdit is empty when called from another script", "body": "<p><strong>EDIT</strong>:</p>\n\n<p>On second thoughts, the right approach depends on how <code>mainscript</code> is used. If it is used as the start-up script, it will not be initially imported, which then complicates things when it comes to accessing its globals later on.</p>\n\n<p>A better approach is to have a very simple start-up script that only has this in it:</p>\n\n<pre><code># mainscript\nif __name__ == '__main__':\n    from mainmodule import main\n    main()\n</code></pre>\n\n<p>The <code>mainmodule</code> would then look like this:</p>\n\n<pre><code># mainmodule\nimport sys\nfrom PyQt5 import QtWidgets\nimport uifile\n\nclass App(QtWidgets.QMainWindow, uifile.Ui_MyWindow):\n    def __init__(self):\n        super().__init__()\n        self.setupUi(self)\n        self.btn_clickMe.clicked.connect(self.some_function)\n    def some_function(self):\n        import othermodule\n        othermodule.print_user()\n    def input_user(self):\n        user = self.lineEdit_username.text()\n        return user\n\nform = None\n\ndef main_window():\n    return form\n\ndef main():\n    global form\n    app = QtWidgets.QApplication(sys.argv)\n    form = App()\n    form.show()\n    app.exec_()\n</code></pre>\n\n<p>And <code>othermodule</code> would look like this:</p>\n\n<pre><code># othermodule\nimport mainmodule\n\ndef print_user():\n    print(\"user input: \" + mainmodule.main_window().input_user())\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 5437165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d61e805b0253e70e3b756333f5d2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/5437165/prof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 33557109, "answer_count": 1, "score": 1, "last_activity_date": 1446779135, "creation_date": 1446680907, "last_edit_date": 1446761578, "question_id": 33534274, "link": "https://stackoverflow.com/questions/33534274/pyqt-lineedit-is-empty-when-called-from-another-script", "title": "PyQt lineEdit is empty when called from another script", "body": "<p>This is my mainscript which calls some generated UI and defines a few functions:</p>\n\n<pre><code>import uifile\n\nfrom PyQt5 import QtWidgets\nimport sys\n\nclass App(QtWidgets.QMainWindow, uifile.Ui_MyWindow):\n    def __init__(self):\n        super(self.__class__, self).__init__()\n        self.setupUi(self)\n        self.btn_clickMe.clicked.connect(self.some_function)\n        return\n    def some_function(self):\n        import otherpyscript\n    def input_user(self):\n        user = self.lineEdit_username.text()\n        return user\n\ndef main():\n    app = QtWidgets.QApplication(sys.argv)\n    form = App()\n    form.show()\n    app.exec_()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>This is the other script where I call the function from mainscript:</p>\n\n<pre><code>...\nimport mainscript\n\nprint(\"The user input from your other script is: \" + mainscript.App().input_user())\n</code></pre>\n\n<p>I'm trying to get <code>mainscript.App().input_user()</code> to not show up as empty (the default for PyQt).</p>\n"}, {"tags": ["python", "ruby", "oop", "smalltalk"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1446689770, "post_id": 33534264, "comment_id": 54852365, "body": "<i>hah</i>, at the part where she says: &quot;Don&#39;t make a gem, don&#39;t put this on GitHub?&quot; Sorry, I already did that over 6 years before she said it :-D <a href=\"https://joergwmittag.github.io/b001e/\" rel=\"nofollow noreferrer\">joergwmittag.github.io/b001e</a>"}, {"owner": {"reputation": 3870, "user_id": 2336725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a0b96a26cf233d752469445595f872?s=128&d=identicon&r=PG", "display_name": "Teepeemm", "link": "https://stackoverflow.com/users/2336725/teepeemm"}, "edited": false, "score": 1, "creation_date": 1447983140, "post_id": 33534264, "comment_id": 55400791, "body": "Most of the answers boil down to: &quot;sending messages&quot; in Smalltalk is &quot;calling a method&quot; in most other OO languages."}], "answers": [{"comments": [{"owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1446683860, "post_id": 33534614, "comment_id": 54850785, "body": "In Smalltalk this message would have been <code>&#39;  12&#39; trim</code> and its answer <code>&#39;12&#39;</code>."}, {"owner": {"reputation": 318, "user_id": 2713818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0654d2e4432a98256e00963420635e?s=128&d=identicon&r=PG&f=1", "display_name": "rkedge", "link": "https://stackoverflow.com/users/2713818/rkedge"}, "reply_to_user": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1575304957, "post_id": 33534614, "comment_id": 104512818, "body": "@LeandroCaniglia, in Python it becomes <code>&#39; 12&#39;.strip()</code>. The other constructions are for more general cases. I suppose you could write <code>&#39; 12&#39;.send(trim)</code> or something like that in Ruby."}], "tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 2, "last_activity_date": 1446684284, "last_edit_date": 1446684284, "creation_date": 1446683145, "answer_id": 33534614, "question_id": 33534264, "link": "https://stackoverflow.com/questions/33534264/what-would-be-a-good-example-of-sending-messages-to-objects-within-python/33534614#33534614", "title": "What would be a good example of &quot;sending messages to objects&quot; within Python?", "body": "<p>The core idea is called <a href=\"https://en.wikipedia.org/wiki/Message_passing\" rel=\"nofollow\">Message passing</a>.</p>\n\n<p>In python you normally send messages by the standard notation:</p>\n\n<pre><code>obj.methodname(args)\n</code></pre>\n\n<p>If the method name is dynamic, you can do this:</p>\n\n<pre><code>getattr(obj, methodname)(args)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; getattr(\"  12\", \"strip\")()\n'12'\n</code></pre>\n\n<p>Even though we usually use the standard notation, behind the scenes there's a request for the attribute which you can observe by intercepting the call:</p>\n\n<pre><code>class Test(object):\n    def __getattribute__(self, name):\n        print \"requesting attr:\", name\n        return object.__getattribute__(self, name)\n    def test(self):\n        print \"Hello\"\n\n&gt;&gt;&gt; Test().test()\nrequesting attr: test\nHello\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "edited": false, "score": 2, "creation_date": 1446691111, "post_id": 33534723, "comment_id": 54852696, "body": "Epiphany-inducing blurb: &quot;an object is essentially a dict of values, and a class is a dict of functions&quot;"}, {"owner": {"reputation": 1038, "user_id": 1970590, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/owv5n.png?s=128&g=1", "display_name": "Euan M", "link": "https://stackoverflow.com/users/1970590/euan-m"}, "edited": false, "score": 0, "creation_date": 1447037495, "post_id": 33534723, "comment_id": 54978971, "body": "Addressing the comment, &quot;In Python object-oriented data abstraction is achieved via convention as opposed to being a builtin language feature (e.g. Smalltalk, Ruby)&quot;:  It is actually purely a convention in Smalltalk too. It&#39;s entirely possible to make assignment statements to instance variables in Smalltalk. But the convention is to write accessors (getters and setters) for every instance variable, and then to always use those accessor methods by sending accessing messages."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "edited": false, "score": 1, "creation_date": 1477203363, "post_id": 33534723, "comment_id": 67665476, "body": "@wTyeRogers correction, an object id&#39;s essentially a dict with a potential inheritence chain, and a Class is a function that constructs the object and it&#39;s potential inheritence chain."}, {"owner": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "edited": false, "score": 1, "creation_date": 1509896506, "post_id": 33534723, "comment_id": 81196664, "body": "2 years later, all of this is finally sinking in."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "edited": false, "score": 1, "creation_date": 1509917729, "post_id": 33534723, "comment_id": 81203906, "body": "@wTyeRogers: It took Nygaard, Dahl, Kay, et al. decades to figure it out, I think 2 years is pretty darn good :-D"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 11, "last_activity_date": 1446685345, "last_edit_date": 1446685345, "creation_date": 1446683861, "answer_id": 33534723, "question_id": 33534264, "link": "https://stackoverflow.com/questions/33534264/what-would-be-a-good-example-of-sending-messages-to-objects-within-python/33534723#33534723", "title": "What would be a good example of &quot;sending messages to objects&quot; within Python?", "body": "<p>Python uses a slightly different terminology. It is called \"calling a method\". But it's the same thing. (C++ calls it \"calling a virtual function\". Again, same difference.)</p>\n\n<p>Personally, I don't like that terminology, it focuses too much on the implementation detail and loses much of the metaphoric power of the \"message sending\" terminology.</p>\n\n<p>There are other differences with Python, some of the most important ones being:</p>\n\n<ul>\n<li>object-oriented data abstraction is achieved via convention as opposed to being a builtin language feature (e.g. Smalltalk, Ruby), or Design Pattern (Scheme, ECMAScript)</li>\n<li>not all subroutines are methods</li>\n</ul>\n\n<p>The fundamental idea of OO is messaging: you send a message to an object, the object responds. Just like in real life, you have no idea what the object does with the message. All you can observe is the reply. The object might process the message itself, it might employ the help of others, it might blindly forward the message without actually doing any work itself.</p>\n\n<p>Since you can't know what the object does with the message and all you can observe is the object's response, all you know about the object is its <em>protocol</em> (the messages it understands and how it responds to them). You don't know its implementation, you don't know its representation. That's how OO achieves Data Abstraction, Information Hiding, Data Hiding, Encapsulation.</p>\n\n<p>Also, since each object decides independently how to respond to a message, you get Polymorphism.</p>\n\n<p><em>One</em> typical way of responding to a message, is executing a method corresponding to that message. But that is an implementation mechanism, which is why I don't like that terminology. As a metaphor, it carries none of the connotations I mentioned above.</p>\n\n<p><a href=\"http://www.purl.org/stefan_ram/pub/doc_kay_oop_en\" rel=\"noreferrer\">Alan Kay has said that OO is about three things, Messaging, Data Abstraction, and Polymorphism</a>:</p>\n\n<blockquote>\n  <p>OOP to me means only messaging, local retention and protection and hiding of state-process, and extreme late-binding of all things.</p>\n</blockquote>\n\n<p>He later clarified that <a href=\"http://lists.squeakfoundation.org/pipermail/squeak-dev/1998-October/017019.html\" rel=\"noreferrer\">the Big Thing is Messaging</a>:</p>\n\n<blockquote>\n  <p>Just a gentle reminder that I took some pains at the last OOPSLA to try to remind everyone that Smalltalk is not only NOT its syntax or the class library, it is not even about classes. I'm sorry that I long ago coined the term \"objects\" for this topic because it gets many people to focus on the lesser idea.</p>\n  \n  <p>The big idea is \"messaging\" -- that is what the kernal of Smalltalk/Squeak is all about (and it's something that was never quite completed in our Xerox PARC phase). The Japanese have a small word -- ma -- for \"that which is in between\" -- perhaps the nearest English equivalent is \"interstitial\". The key in making great and growable systems is much more to design how its modules communicate rather than what their internal properties and behaviors should be. Think of the internet -- to live, it (a) has to allow many different kinds of ideas and realizations that are beyond any single standard and (b) to allow varying degrees of safe interoperability between these ideas.</p>\n</blockquote>\n\n<p>And in fact, as I laid out above, the other two are just consequences of Messaging, in my opinion.</p>\n\n<p>When Alan Kay came up with the term \"Object Orientation\", he was heavily inspired by what would later become the ARPANet and then the Internet: independent machines (\"objects\") with their own private memory (\"instance variables\") that communicate with each other by sending messages.</p>\n\n<p>Similar points are also made in <a href=\"http://CS.UTexas.Edu/~wcook/Drafts/2009/essay.pdf\" rel=\"noreferrer\"><em>On Understanding Data Abstraction, Revisited</em></a> by <a href=\"http://WCook.BlogSpot.Com/\" rel=\"noreferrer\">William R. Cook</a> and also his <a href=\"http://WCook.BlogSpot.Com/2012/07/proposal-for-simplified-modern.html\" rel=\"noreferrer\"><em>Proposal for Simplified, Modern Definitions of \"Object\" and \"Object Oriented\"</em></a>.</p>\n\n<blockquote>\n  <p>Dynamic dispatch of operations is the essential characteristic of objects. It means that the operation to be invoked is a dynamic property of the object itself. Operations cannot be identified statically, and there is no way in general to exactly what operation will executed in response to a given request, except by running it. This is exactly the same as with first-class functions, which are always dynamically dispatched.</p>\n</blockquote>\n\n<p>Python's object system is a bit different from other languages. Python was originally a procedural language, the object system was added later on, with the goal of making the absolut minimal amount of changes to the language as possible. The major data structure in Python were <code>dict</code>s (maps / hash tables), and all behavior was in functions. Even before Python's OO features, this minimalism shows itself, e.g. local and global variables are actually just keys in a <code>dict</code>. And so, it was natural to make objects and classes much like <code>dict</code>s and reuse that concept, an object is essentially a <code>dict</code> of values, and a class is a <code>dict</code> of functions. There is no separate idea of \"method\", rather, you have functions which take the receiver as their first argument. (In most other OO languages, the receiver is a \"hidden\" zeroth argument and available using a special keyword such as <code>self</code>, <code>this</code>, or <code>me</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 5, "creation_date": 1446684975, "post_id": 33534789, "comment_id": 54851138, "body": "<a href=\"http://selflanguage.org/\" rel=\"nofollow noreferrer\">Self</a> and <a href=\"http://newspeaklanguage.org/\" rel=\"nofollow noreferrer\">Newspeak</a> are also very nice for learning OO. Self because it really drives home the idea that it&#39;s all about the objects and their interactions (there is nothing else in the system <i>but</i> objects), and Newspeak because of its absolutely fanatical adherence to messaging: there are no instance variables, only getter and setter methods, there are no class variables, only getter and setter methods of the metaclass, there aren&#39;t even local variable variables, only getter and setter methods of <code>LexicalScope</code> objects."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1446684983, "post_id": 33534789, "comment_id": 54851139, "body": "Even superclass lookup is a message send!"}], "tags": [], "owner": {"reputation": 12054, "user_id": 982238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7540d351654e7a702370dcd2da7b7a43?s=128&d=identicon&r=PG", "display_name": "Uko", "link": "https://stackoverflow.com/users/982238/uko"}, "is_accepted": false, "score": 7, "last_activity_date": 1446684259, "creation_date": 1446684259, "answer_id": 33534789, "question_id": 33534264, "link": "https://stackoverflow.com/questions/33534264/what-would-be-a-good-example-of-sending-messages-to-objects-within-python/33534789#33534789", "title": "What would be a good example of &quot;sending messages to objects&quot; within Python?", "body": "<p>Essentially \"sending a message\" is called in most of OO languages as calling a method. The key difference is that in dynamic languages you don't know if the object knows a method or not. So if you do <code>var.jump()</code> you have no idea what the <code>var</code> is. Maybe it's a rabbit and it can jump, or maybe it is a rock and it doesn't know how to do that (the Rock class does not implement the  <code>jump()</code> method). So from conceptual point of view sending a message is asking some object to do something (maybe it does not know what you are asking), while invoking a method is making that object you know do what you want.</p>\n\n<p>In Smalltalk and Ruby it's really easy to send messages with another message, so that if you use <code>1.send(:to_s)</code> it's the same as <code>1.to_s</code>. And <code>1.send(:to_s)</code> itself is a message <code>send</code> that is sent to <code>1</code> with parameter <code>:to_s</code>. So you can also expend this to <code>1.send(:send, :to_s)</code>.</p>\n\n<p>In Python meta programming is a real pain in the ass. So if you want to do the same <code>1.send(:to_s)</code> you have to use something like getattr(1, \"to_s\")(). Here you obtain the <code>to_s</code> \"method\" itself using <code>getattr</code> and invoke it with <code>()</code>. <em>This is also a good example of the bad Python design. How do you do something like <code>1.send(:send, :to_s)</code> in Python? In Ruby <code>send</code> is a method on a code Object. So you can also send it via itself. In Python getattr is an external standalone function.</em></p>\n\n<p>If you really want to learn the concept of OO programming I suggest you to play with Smalltalk because I find it to have the best design. (also it's not influenced by C++ or other stuff because in 70s they were not around). There is a nice book <a href=\"http://pharobyexample.org\">Pharo by Example</a> that teaches you to program in <a href=\"/questions/tagged/pharo\" class=\"post-tag\" title=\"show questions tagged &#39;pharo&#39;\" rel=\"tag\">pharo</a>. Also there is a <a href=\"https://ci.inria.fr/pharo-contribution/view/Books/job/UpdatedPharoByExample/lastSuccessfulBuild/artifact/book-result/UpdatedPharoByExample.pdf\">work in progress version</a> updated for the new releases of the environment.</p>\n"}, {"tags": [], "owner": {"reputation": 1038, "user_id": 1970590, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/owv5n.png?s=128&g=1", "display_name": "Euan M", "link": "https://stackoverflow.com/users/1970590/euan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1447288448, "last_edit_date": 1447288448, "creation_date": 1446867189, "answer_id": 33578849, "question_id": 33534264, "link": "https://stackoverflow.com/questions/33534264/what-would-be-a-good-example-of-sending-messages-to-objects-within-python/33578849#33578849", "title": "What would be a good example of &quot;sending messages to objects&quot; within Python?", "body": "<p>What started as \"sending a message\" in Smalltalk in the early 1970s, is now more generally known as \"<code>calling a method</code>\"</p>\n\n<p>Sending a message is making a polite request to an object to respond.  It will respond politely if it understands the message it receives, and has a method of responding. i.e. if the message is in the <code>protocol</code> of the <code>receiver</code>.  </p>\n\n<p>The protocol is the list of messages it has methods of responding to. Nowadays, we would call the protocol the receiver's <code>API</code>.</p>\n\n<p>Alan Kay, the father of Smalltalk, felt that messaging, rather than inheritance, was the important aspect of what became known as object-oriented programming.</p>\n"}], "owner": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2565, "favorite_count": 2, "accepted_answer_id": 33534723, "answer_count": 4, "score": 6, "last_activity_date": 1447288448, "creation_date": 1446680860, "question_id": 33534264, "link": "https://stackoverflow.com/questions/33534264/what-would-be-a-good-example-of-sending-messages-to-objects-within-python", "title": "What would be a good example of &quot;sending messages to objects&quot; within Python?", "body": "<p>I recently watched <a href=\"https://www.youtube.com/watch?v=9mLK_8hKii8\"><em>Nothing is Something</em></a> by Sandi Metz, and in her talk she uses the idea of <strong>sending messages to objects</strong> and goes over how that's done in Ruby. The <a href=\"https://www.youtube.com/watch?v=9mLK_8hKii8&amp;t=250\">4:10</a>-7:30 section would be a good entry point where she begins on the topic (it's a building block that then permeates over half the talk).</p>\n\n<p>Now, for some background: I don't have a lot of experience with writing programs in Ruby, and zero experience with smalltalk. My OO experience is somewhat limited and <em>very</em> stale. I also looked up <code>send object message python</code> in Google, and all I saw was relating to sending messages over sockets and email, which isn't quite what I had in mind.</p>\n\n<p><strong>I'm not sure how to interpret this concept in Python, or how to implement it.</strong> Any ideas? :)</p>\n\n<hr>\n\n<p><em>Side note: She mentions her OO-views are derived from experience with smalltalk, so I'm adding that as a tag to this question.</em></p>\n"}, {"tags": ["python", "list", "loops", "for-loop"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1446680801, "post_id": 33534226, "comment_id": 54849929, "body": "Hum... this is not PHP, I don&#39;t think <code>mylist1[]</code> is idiomatic in Python."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1446681068, "post_id": 33534226, "comment_id": 54850005, "body": "among other issues you need to indent <code>final_list.append(return_val)</code> in once."}], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1446680854, "creation_date": 1446680854, "answer_id": 33534261, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f/33534261#33534261", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<p>Because you've set <code>num1 = mylist1[]</code> (I didn't know that was valid Python). You should be keeping track of an index, and using the same index to index both lists.</p>\n\n<p>I.e.:</p>\n\n<pre><code>for i in range(len(mylist)):\n    if mylist[i] == mylist1[i]:\n        # stuff\n    else:\n        # other stuff\n</code></pre>\n\n<p>Even better, use an enumeration</p>\n\n<pre><code>for i, val in enumerate(mylist):\n    if val == mylist1[i]:\n        # stuff\n    else:\n        # other stuff\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 2, "creation_date": 1446680931, "post_id": 33534267, "comment_id": 54849971, "body": "Have to use <code>!=</code> instead of <code>==</code>"}], "tags": [], "owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "is_accepted": false, "score": 1, "last_activity_date": 1446681142, "last_edit_date": 1446681142, "creation_date": 1446680870, "answer_id": 33534267, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f/33534267#33534267", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<p>One liner:</p>\n\n<pre><code>[ int(i != j) for i,j in zip(mylist, mylist1)]\n</code></pre>\n\n<p>But if you can't figure out why this works, then I still think you are not going to do well in the class.</p>\n"}, {"tags": [], "owner": {"reputation": 3467, "user_id": 2958455, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4bf81a9aa9aa3619f1197c901f079268?s=128&d=identicon&r=PG", "display_name": "Jared Mackey", "link": "https://stackoverflow.com/users/2958455/jared-mackey"}, "is_accepted": false, "score": 2, "last_activity_date": 1446680938, "creation_date": 1446680938, "answer_id": 33534283, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f/33534283#33534283", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<p>A much easier and PEP 8 compliant way to do it.</p>\n\n<pre><code>def main():\n    my_list = [5, 7, 7, 8]\n    my_list_1 = [5, 6, 7, 8]\n    return [0 if x == y else 1 for x, y in zip(mylist, my_list_1)]\n\n\nprint(main())\n</code></pre>\n\n<p>Plus you might get some extra points for using list comprehensions and ternary operators. ;)</p>\n"}, {"tags": [], "owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681310, "creation_date": 1446681310, "answer_id": 33534341, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f/33534341#33534341", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<p>I belive you can make it like this:    </p>\n\n<pre><code>    mylist = [5,7,7,8]\n    mylist1 = [5,6,7,8]\n    return_val = 0\n    final_list = [0]\n    num1 = mylist1\n    for num,num1 in zip(mylist,mylist1):\n        if num == num1:\n            return_val = 0\n        else:\n            return_val = 1\n        final_list.append(return_val)\n\n    print final_list\n</code></pre>\n\n<p>Be aware that python is sensible to indentation and therefore in your code     <code>final_list.append(return_val)</code> is wrongly placed. Besides you need to iterate both arrays and not only one. so your test <code>num == num1</code> does not make sense.</p>\n"}, {"tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681381, "creation_date": 1446681381, "answer_id": 33534353, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f/33534353#33534353", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<pre><code>SAME, DIFFERENT = 0, 1\n\ndef get_list(prompt, dtype=lambda s:s):\n    return [dtype(s) for s in input(prompt).split()]\n\ndef main():\n    list1 = get_list(\"Please enter a space-separated list of integers: \", int)\n    list2 = get_list(\"And again: \", int)\n    differences = [SAME if a==b else DIFFERENT for a,b in zip(list1, list2)]\n    print(differences)\n\nif __name__==\"__main__\":\n    main()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5464743, "user_type": "registered", "profile_image": "https://graph.facebook.com/813994232050445/picture?type=large", "display_name": "Terriyon Veasy", "link": "https://stackoverflow.com/users/5464743/terriyon-veasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1446681403, "creation_date": 1446680615, "last_edit_date": 1446680751, "question_id": 33534226, "link": "https://stackoverflow.com/questions/33534226/using-python-to-compare-two-lists-why-python-compares-the-first-number-of-the-f", "title": "Using python to compare two lists. Why Python compares the first number of the first list with all the numbers of the second list?", "body": "<p>Here is the mission of the program: </p>\n\n<blockquote>\n  <p>Write a program, listcomp1.py, that compares two lists of equal length entered by the user. A third list composed of 0's and 1's should be created to keep track of the differences between the lists. A 0 at index i in the differences list indicates that the items at index i in the the two list being compared are the same. A 1 at index i in the differences list indicates that the items at index i in the list being compared are different.</p>\n</blockquote>\n\n<p>input: two lists entered by the user, one at a time output: a list composed of 0's and 1's showing where items in the two lists being compared are the same or different</p>\n\n<pre><code>def main():\n    mylist = [5,7,7,8]\n    mylist1 = [5,6,7,8]\n    return_val = 0\n    final_list = [0]\n    num1 = mylist1[]\n    for num in mylist:\n        if num == num1:\n            return_val = 0\n        else:\n            return_val = 1\n    final_list.append(return_val)\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "edited": false, "score": 7, "creation_date": 1446684667, "post_id": 33534219, "comment_id": 54851050, "body": "this is fixed in master in forthcoming 0.17.1; it doesn&#39;t affect anything."}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "edited": false, "score": 2, "creation_date": 1446690176, "post_id": 33534219, "comment_id": 54852470, "body": "For more info if you&#39;re interested <a href=\"https://github.com/pydata/pandas/issues/8537\" rel=\"nofollow noreferrer\">#8537</a>"}, {"owner": {"reputation": 2271, "user_id": 5431734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c7553e033ed67ebfe0fbc8dda2cacd5?s=128&d=identicon&r=PG&f=1", "display_name": "Aenaon", "link": "https://stackoverflow.com/users/5431734/aenaon"}, "edited": false, "score": 0, "creation_date": 1446718512, "post_id": 33534219, "comment_id": 54863974, "body": "Ok, thanks guys for clarifying this."}, {"owner": {"reputation": 3637, "user_id": 3127764, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/htQno.png?s=128&g=1", "display_name": "HaPsantran", "link": "https://stackoverflow.com/users/3127764/hapsantran"}, "edited": false, "score": 0, "creation_date": 1450713043, "post_id": 33534219, "comment_id": 56540326, "body": "What I found most disturbing about this issue was that the warnings module suppressed the warning (rather than erroring) when I tried warnings.filterwarnings(&#39;error&#39;, &#39;*&#39;, FutureWarning). No harm done as I see it&#39;s addressed in the upgrade, but would like to know what was going on."}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 1, "creation_date": 1492224012, "post_id": 33534219, "comment_id": 73902144, "body": "Voting to close as this problem can no longer be reproduced in the current version of pandas."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1618668719, "post_id": 33534219, "comment_id": 118674501, "body": "I\u2019m voting to close this question because fixed in later versions of pandas."}], "owner": {"reputation": 2271, "user_id": 5431734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c7553e033ed67ebfe0fbc8dda2cacd5?s=128&d=identicon&r=PG&f=1", "display_name": "Aenaon", "link": "https://stackoverflow.com/users/5431734/aenaon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1137, "favorite_count": 0, "answer_count": 0, "score": 8, "last_activity_date": 1446680558, "creation_date": 1446680558, "question_id": 33534219, "link": "https://stackoverflow.com/questions/33534219/futurewarning-when-unstacking-a-pandas-v-0-17-dataframe", "title": "FutureWarning when unstacking a pandas (v 0.17) dataframe", "body": "<p>I have recently upgraded to pandas <code>0.17.0</code> (numpy: <code>1.10.1</code>, Python: 2.7.10) and I receive the warning shown in the block below when i try to reshape a dataframe with an unstack operation. The warning <strong>appears only the very first time</strong> the code is run on a fresh ipython notebook. A rerun on the same notebook does not throw any messages at all for some reason(!!). A similar unstack exists somewhere in the code of a bigger application written with the Pycharm editor. In that case the warning pops out everytime the application is run.</p>\n\n<p>The result of the unstack call looks to be fine, its just the warning that puzzles me and whether it is expected behaviour. Also passing and argument when unstack is called looks to prevent the warning from appearing.</p>\n\n<p>Last note: I was previously using pandas <code>0.15.2</code> and the code run smoothly.</p>\n\n<p>Many thanks</p>\n\n<pre><code>In [1]:\n\nimport pandas as pd\ndf = pd.DataFrame([['Maths', 'Student1', 20],['Physics', 'Student2', 21],['Chemistry', 'Student3', 22]], columns=('Subject','Name','Mark'))\ndf = df.set_index(['Subject','Name'])\ndf.unstack()\n\n/Users/Name/anaconda/lib/python2.7/site-packages/pandas/core/index.py:\n4281: FutureWarning: elementwise comparison failed; returning scalar instead,\nbut in the future will perform elementwise comparison\n  return np.sum(name == np.asarray(self.names)) &gt; 1\n\n\nOut[1]:\n           Mark\nName       Student1  Student2   Student3\nSubject         \nChemistry  NaN       NaN        22\nMaths      20        NaN        NaN\nPhysics    NaN       21         NaN\n</code></pre>\n"}, {"tags": ["python", "linux", "django", "gunicorn"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446680718, "post_id": 33534213, "comment_id": 54849907, "body": "A good IDE like PyCharm helps a lot."}, {"owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446682006, "post_id": 33534213, "comment_id": 54850279, "body": "I am using intellij but have no troubles locally"}, {"owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446682017, "post_id": 33534213, "comment_id": 54850281, "body": "The issue is in a productive server"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1446745139, "post_id": 33534213, "comment_id": 54881962, "body": "PyCharm Professional has remote debugging through SSH (and a 30 day full evaluation)."}], "answers": [{"tags": [], "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1447691416, "creation_date": 1447691416, "answer_id": 33740144, "question_id": 33534213, "link": "https://stackoverflow.com/questions/33534213/a-silent-timeout-when-accessing-a-gunicorn-powered-service-how-to-debug/33740144#33740144", "title": "A silent timeout when accessing a gunicorn-powered service. How to debug?", "body": "<p>I found the answer as follows:</p>\n\n<ol>\n<li>Run it as <code>runserver</code> in the server. If it takes a lot to start, then you have a somewhat heavy initialization code (perhaps a service, models meta-instantiation, ... it is up to you to see the code in your application). Usually this will suck in your local environment as well, but if it doesn't (and you have the same database engine) check whether you have a local unversioned file in the server, and analyze its content.</li>\n<li>If a <code>runserver</code> command runs well but takes a lot to serve a single request (or at least the first request) you should check whether your views or middlewares (custom middlewares, if any) are executing one-time initialization code.</li>\n<li>If you have no problem running <code>runserver</code>, then check whether the application runs well by WSGI. You can emulate this by running an interactive interpreter in the same virtualenv and current directory and run the code <code>from myproject.wsgi import application</code>. Perhaps you'll find a time bottleneck as I did. Sometimes django WSGI apps take some time to bootstrap and they do that in the first request they receive (actually, each time gunicorn needs to create a new worker).</li>\n</ol>\n\n<p>In my case, I was at scenario 3. I noticed that adding --timeout=45 (or perhaps 60) to a gunicorn launch configuration I'd give more time to the workers to process a request. Otherwise, a worker is created, takes more than 30 seconds to load, it is killed, it is restarted, tries the same request, takes more than 30 seconds... and an endless loop you get here.</p>\n"}], "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447691416, "creation_date": 1446680541, "question_id": 33534213, "link": "https://stackoverflow.com/questions/33534213/a-silent-timeout-when-accessing-a-gunicorn-powered-service-how-to-debug", "title": "A silent timeout when accessing a gunicorn-powered service. How to debug?", "body": "<p>I have this file:</p>\n\n<pre><code>cd /opt/webapps/deployed/landing-pages\n# 1. Activate the virtualenv\nsource /home/ec2-user/.virtualenvs/landing-pages/bin/activate\n# 2. Start gunicorn process as daemon\ngunicorn trescloud_landing.wsgi:application --daemon --bind=127.0.0.1:8888 --pid=/opt/webapps/pid/landing-pages.pid --access-logfile=/opt/webapps/log/landing-pages.access.log --error-logfile=/opt/webapps/log/landing-pages.error.log\n# 3. Deactivate the virtualenv\ndeactivate\n</code></pre>\n\n<p>When I run this file, I can find the trescloud_landing/wsgi.py file (i.e. I'm in the project's base directory: files like manage.py are in the directory <code>pwd</code>).</p>\n\n<p>I have permission to write both the .access.log and .error.log files, and the .pid file. When I run it, two processes are created:</p>\n\n<blockquote>\n  <p>ec2-user 17171  0.3  0.5 214916 11740 ?        S    23:28   0:00 /home/ec2-user/.virtualenvs/landing-pages/bin/python2.7 /home/ec2-user/.virtualenvs/landing-pages/bin/gunicorn trescloud_landing.wsgi:application --daemon --bind=127.0.0.1:8888 --pid=/opt/webapps/pid/landing-pages.pid --access-logfile=/opt/webapps/log/landing-pages.access.log --error-logfile=/opt/webapps/log/landing-pages.error.log  </p>\n  \n  <p>ec2-user 17176  4.8  1.0 235144 20556 ?        R    23:28   0:00 /home/ec2-user/.virtualenvs/landing-pages/bin/python2.7 /home/ec2-user/.virtualenvs/landing-pages/bin/gunicorn trescloud_landing.wsgi:application --daemon --bind=127.0.0.1:8888 --pid=/opt/webapps/pid/landing-pages.pid --access-logfile=/opt/webapps/log/landing-pages.access.log --error-logfile=/opt/webapps/log/landing-pages.error.log</p>\n</blockquote>\n\n<p>And when I consult netstat (<code>sudo netstat -anp | grep 8888</code>) I get something like this:</p>\n\n<blockquote>\n  <p>tcp        0      0 127.0.0.1:8888              0.0.0.0:*                   LISTEN      17171/python2.7   </p>\n</blockquote>\n\n<p>Which appears to tell me that the server is up.</p>\n\n<p><strong>However</strong> when I hit curl (and/or browser, but since it is behind nginx, additional stuff appears which does not appear to give me any additional information) with <code>curl http://127.0.0.1:8888/</code> the request processing seems to be halted (i.e. never returns. no error is raised. no partial response is generated - it becomes blank and eternal). Naturally, when I hit the url with nginx in middle (i.e. by external link) I get a 504 response (since nginx handles timeouts as any decent proxy should).</p>\n\n<p>By peeking in the error log, I get no significative information (only a [CRITICAL] WORKER TIMEOUT if I access via nginx). Stuff like this is what I see:</p>\n\n<blockquote>\n  <p>2015-11-04 23:35:07 [17171] [CRITICAL] WORKER TIMEOUT (pid:17319)<br>\n  2015-11-04 23:35:07 [17171] [INFO] 1 workers<br>\n  2015-11-04 23:35:08 [17319] [INFO] Worker exiting (pid: 17319)<br>\n  2015-11-04 23:35:08 [17171] [INFO] 1 workers<br>\n  2015-11-04 23:35:08 [17326] [INFO] Booting worker with pid: 17326<br>\n  2015-11-04 23:35:08 [17171] [INFO] 1 workers<br>\n  2015-11-04 23:35:08 [17171] [INFO] 1 workers</p>\n</blockquote>\n\n<p><strong>Question</strong>:</p>\n\n<p>What can be the cause of the error? How can I debug this server? Where do I check?</p>\n\n<p><code>pip freeze</code>:</p>\n\n<blockquote>\n  <p>dateutils==0.6.6<br>\n  Django==1.8.4<br>\n  django-cors-headers==1.1.0<br>\n  django-xmail-ritual==0.0.11 (*)<br>\n  djangorestframework==3.2.3 (*)<br>\n  future==0.15.0<br>\n  gunicorn==19.1.0<br>\n  psycopg2==2.6.1<br>\n  python-cantrips==0.7.1 (*)<br>\n  python-dateutil==2.4.2<br>\n  pytz==2015.4<br>\n  six==1.9.0<br>\n  wheel==0.24.0</p>\n</blockquote>\n\n<p>(*) These packages work since I use them in other productive environments without timeout. This application used to work and these requirements were never changed.</p>\n\n<p>Thanks :D.</p>\n"}, {"tags": ["python", "aes", "amazon-redshift", "user-defined-functions", "skein"], "comments": [{"owner": {"reputation": 898, "user_id": 4194964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdafddf072058ab6457e6aaf3eb1581?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/4194964/brian-cain"}, "edited": false, "score": 0, "creation_date": 1446681676, "post_id": 33534177, "comment_id": 54850183, "body": "It is generally a bad idea to implement any encryption function.  Encryption has been shown to be hard to implement, and even the experts get it wrong.  Would you be able to take a different approach and use some of the built in encryption features that Redshift provides?  For example, I know Redshift provides a whole database encryption to protect the data at rest."}, {"owner": {"reputation": 151, "user_id": 1119905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0b0236b98189085e7bfc90fdfc413875?s=128&d=identicon&r=PG", "display_name": "Pasha", "link": "https://stackoverflow.com/users/1119905/pasha"}, "reply_to_user": {"reputation": 898, "user_id": 4194964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdafddf072058ab6457e6aaf3eb1581?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/4194964/brian-cain"}, "edited": false, "score": 1, "creation_date": 1446740470, "post_id": 33534177, "comment_id": 54878908, "body": "@BrianCain - thanks for your comment.  I understand that Redshift has hardware encryption of the entire database; however, certain US regulations require certain data to be encrypted on the field/cell level; thus, despite understanding the potential limitations of implementing encryption, I have to do it."}], "owner": {"reputation": 151, "user_id": 1119905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0b0236b98189085e7bfc90fdfc413875?s=128&d=identicon&r=PG", "display_name": "Pasha", "link": "https://stackoverflow.com/users/1119905/pasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1329, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573160577, "creation_date": 1446680373, "last_edit_date": 1573160577, "question_id": 33534177, "link": "https://stackoverflow.com/questions/33534177/redshift-aes-decrypt-udf", "title": "Redshift AES Decrypt UDF", "body": "<p>I need to load some encrypted data into AWS Redshift table (well, a few fields with encrypted data) and already have a Java Decrypt function that I'll need to port to Python UDF.</p>\n\n<p>I'm using AES-256, and Skein hash function (<a href=\"https://en.wikipedia.org/wiki/Skein_%28hash_function%29\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Skein_%28hash_function%29</a>). Has anyone successfully implemented an encryption/decryption UDF like that? Is it even possible in Redshift?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "plone", "newrelic", "zope"], "comments": [{"owner": {"reputation": 1256, "user_id": 646005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac961a02b5774f5554f77c2ca545752?s=128&d=identicon&r=PG", "display_name": "alepisa", "link": "https://stackoverflow.com/users/646005/alepisa"}, "edited": false, "score": 0, "creation_date": 1446706621, "post_id": 33534108, "comment_id": 54857502, "body": "Have you tried upgrading some of your packages. I suspect setuptools, buildout or zc.recipe.egg!"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 3557095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a1f6152fe6ac7ff5f3804d656580a5?s=128&d=identicon&r=PG", "display_name": "henriquechehad", "link": "https://stackoverflow.com/users/3557095/henriquechehad"}, "is_accepted": true, "score": 2, "last_activity_date": 1446751112, "creation_date": 1446751112, "answer_id": 33552977, "question_id": 33534108, "link": "https://stackoverflow.com/questions/33534108/error-with-newrelic-and-zope/33552977#33552977", "title": "Error with newrelic and zope", "body": "<p>I solved adding the below code in a __init__.py from application:</p>\n\n<pre><code>import newrelic.agent\nnewrelic.agent.initialize('path/of/newrelic.ini')\n</code></pre>\n\n<p>And execute the application without the command \"newrelic-admin run-python\".</p>\n\n<p>Newrelic worked but with limitations because don't have official support yet.</p>\n"}], "owner": {"reputation": 71, "user_id": 3557095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a1f6152fe6ac7ff5f3804d656580a5?s=128&d=identicon&r=PG", "display_name": "henriquechehad", "link": "https://stackoverflow.com/users/3557095/henriquechehad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 33552977, "answer_count": 1, "score": 3, "last_activity_date": 1446751112, "creation_date": 1446679940, "question_id": 33534108, "link": "https://stackoverflow.com/questions/33534108/error-with-newrelic-and-zope", "title": "Error with newrelic and zope", "body": "<p>I'm trying to configure newrelic with zope but it is returning the error:</p>\n\n<p># bin/newrelic-admin run-python bin/zeoserver fg</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"bin/zeoserver\", line 22, in &lt;module&gt;\nimport plone.recipe.zeoserver.ctl\n  File \"/opt/bitnami/apps/plone/buildout-cache/eggs/plone.recipe.zeoserver-1.2.6-py2.7.egg/plone/recipe/zeoserver/__init__.py\", line 9, in &lt;module&gt;\n    import zc.recipe.egg\n  File \"/opt/bitnami/apps/plone/buildout-cache/eggs/zc.recipe.egg-1.3.2-py2.7.egg/zc/recipe/egg/__init__.py\", line 1, in &lt;module&gt;\n    from zc.recipe.egg.egg import Egg, Scripts, Eggs\n  File \"/opt/bitnami/apps/plone/buildout-cache/eggs/zc.recipe.egg-1.3.2-py2.7.egg/zc/recipe/egg/egg.py\", line 21, in &lt;module&gt;\n    import zc.buildout.easy_install\n  File \"/opt/bitnami/apps/plone/buildout-cache/eggs/zc.buildout-2.2.5-py2.7.egg/zc/buildout/easy_install.py\", line 81, in &lt;module&gt;\n    pkg_resources.Requirement.parse('zc.buildout')).location,\nAttributeError: 'NoneType' object has no attribute 'location'\n</code></pre>\n\n<p>Does anyone know what can it be pls?</p>\n"}, {"tags": ["python", "python-2.7", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 2, "creation_date": 1446710318, "post_id": 33534062, "comment_id": 54859213, "body": "This is a known issue with 2.3.0 and has been fixed in <a href=\"https://bitbucket.org/openpyxl/openpyxl/pull-requests/88/\" rel=\"nofollow noreferrer\">bitbucket.org/openpyxl/openpyxl/pull-requests/88</a>"}, {"owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1446740509, "post_id": 33534062, "comment_id": 54878942, "body": "Charlie, I&#39;m having the same issue with print titles (after using add_print_title) not being retained on subsequent loads. Would you be able to point to where in the source I might be able to fix that? Thanks."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 1, "creation_date": 1446748612, "post_id": 33534062, "comment_id": 54883989, "body": "Print titles are a whole different item as they are stored as constants. Currently we drop them with a warning. The whole definedName code is scheduled for a rewrite to be more reliable."}], "owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2143, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1446681923, "creation_date": 1446679730, "last_edit_date": 1446681923, "question_id": 33534062, "link": "https://stackoverflow.com/questions/33534062/preserving-page-margins-in-openpyxl", "title": "Preserving page margins in openpyxl", "body": "<p>I am able to set page margins on a worksheet and then, say, export it to a pdf with the proper page margins. The page margins are properly saved and show up as expected in Excel. However, if I re-open the workbook with openpyxl, the page margins revert to their defaults. Is there a way to preserve the existing page margins when loading a workbook?</p>\n\n<p>What I've done:</p>\n\n<pre><code>import openpyxl\nf = 'Test.xlsx'\nwb = openpyxl.load_workbook(f)\nws = wb.get_sheet_by_name('Sheet1')\n\nws.page_margins.left = 3\nprint ws.page_margins.left\n\nwb.save(f)\n\nwb = openpyxl.load_workbook(f)\nws = wb.get_sheet_by_name('Sheet1')\nprint ws.page_margins.left\n</code></pre>\n\n<p>This code from above prints:</p>\n\n<pre><code>3.0\n0.75\n</code></pre>\n\n<p>when I'm expecting to see:</p>\n\n<pre><code>3.0\n3.0\n</code></pre>\n"}, {"tags": ["python", "html", "apache", "csv"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1446680076, "post_id": 33534046, "comment_id": 54849665, "body": "Can you show some code? How exactly are you using apache and python?"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1446680238, "post_id": 33534046, "comment_id": 54849723, "body": "Where is the .csv file stored? It may be in a location that is accessible to your userid, but not to the apache userid."}, {"owner": {"reputation": 3467, "user_id": 2958455, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4bf81a9aa9aa3619f1197c901f079268?s=128&d=identicon&r=PG", "display_name": "Jared Mackey", "link": "https://stackoverflow.com/users/2958455/jared-mackey"}, "edited": false, "score": 0, "creation_date": 1446680586, "post_id": 33534046, "comment_id": 54849844, "body": "You can probably tail the syslog and see some exceptions"}, {"owner": {"reputation": 53, "user_id": 5526931, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/da54222bfad72ca0b415978dda556b76?s=128&d=identicon&r=PG&f=1", "display_name": "MHR", "link": "https://stackoverflow.com/users/5526931/mhr"}, "edited": false, "score": 0, "creation_date": 1446825310, "post_id": 33534046, "comment_id": 54919311, "body": "Hi guys, I tried everything.. No luck! Is it possible to look again  the description above ? Thanks"}], "owner": {"reputation": 53, "user_id": 5526931, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/da54222bfad72ca0b415978dda556b76?s=128&d=identicon&r=PG&f=1", "display_name": "MHR", "link": "https://stackoverflow.com/users/5526931/mhr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446777626, "creation_date": 1446679640, "last_edit_date": 1446777626, "question_id": 33534046, "link": "https://stackoverflow.com/questions/33534046/python-apache-csv-file", "title": "python + apache + csv file", "body": "<p>I am trying to access a <code>csv</code> file through <code>python</code> in <code>apache2</code>. It is giving an internal server error. I don't see the actual error in <code>error.log</code> file. </p>\n\n<p>If I run the <code>python</code> file in command line without <code>apache2</code>, it works fine and I can access the <code>csv</code> file to display <code>html</code> page in browser. Any idea what could be the error?</p>\n\n<p>Thanks guys!   My Python project is in Apache htdocs. Apache runs my Python file as usual and everything works perfectly, eg: PostgreSQL.   CSV file is in static folder of my Python project.   For example:  Project:  Server.py </p>\n\n<pre><code>app.route('/access_page') \ndef page():      \nOpen with ('static\\\\file.csv', 'r') as inFile: \n\n\n\nreader = csv.reader(inFile)\n</code></pre>\n\n<p><code>File  = [row for row in reader]</code>\n<code>return render_template('access_page.html', File = File)</code><br>\nRead function: \n<code>def readFile(aFile):</code><br>\n <code>with open(aFile , 'r') as inFile:'\n</code>reader = csv.reader(inFile)<code>\n</code>anyFile = [row for row in reader]<code>\n</code>return anyFile`<br>\nFlask template in html page:</p>\n\n<pre><code> &lt;table&gt; {% for line in File %} &lt;tr&gt; {% for item in line%} &lt;td&gt; {{item}} &lt;/td&gt; {% endfor %} &lt;/tr&gt; {% endfor %} &lt;/table&gt;\n</code></pre>\n"}, {"tags": ["python", "forms"], "comments": [{"owner": {"reputation": 3763, "user_id": 4120036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bf418d56d27dc52240878bf83d484a?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s P&#233;rez-Albela H.", "link": "https://stackoverflow.com/users/4120036/andr%c3%a9s-p%c3%a9rez-albela-h"}, "edited": false, "score": 0, "creation_date": 1446680352, "post_id": 33534008, "comment_id": 54849755, "body": "Could you please provide a more detailed example? It is also important to show what you have tried and where did you get stuck."}, {"owner": {"reputation": 85, "user_id": 962043, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/675490622/picture?type=large", "display_name": "hiiambo", "link": "https://stackoverflow.com/users/962043/hiiambo"}, "reply_to_user": {"reputation": 3763, "user_id": 4120036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bf418d56d27dc52240878bf83d484a?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s P&#233;rez-Albela H.", "link": "https://stackoverflow.com/users/4120036/andr%c3%a9s-p%c3%a9rez-albela-h"}, "edited": false, "score": 0, "creation_date": 1446681864, "post_id": 33534008, "comment_id": 54850233, "body": "I&#39;ve tried doing a general post, but I&#39;m sure I&#39;m doing it wrong. Here&#39;s the code I&#39;ve tried:  <code>import re import urllib.parse  import requests from lxml import etree  @hook.command(&quot;addquote&quot;) def addquote(text, bot):     &quot;&quot;&quot;&lt;query&gt; -- adds a quote to the qdb.&quot;&quot;&quot;     url = &#39;http:&#47;&#47;example.com&#47;?add&#39;     values = {&#39;addquote&#39; : text}     data = urllib.urlencode(values)     req = urllib2.Request(url, data)     response = urllib2.urlopen(req)      the_page = response.read() </code> Basically what I want is to have a trigger with some text to be passed to the form and submitted."}, {"owner": {"reputation": 960, "user_id": 2323274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62fedfdf7661b3ba3621ede1265ede0?s=128&d=identicon&r=PG", "display_name": "Azad", "link": "https://stackoverflow.com/users/2323274/azad"}, "edited": false, "score": 0, "creation_date": 1446994445, "post_id": 33534008, "comment_id": 54965490, "body": "replace the last 3 line with <code>f = urllib.urlopen(url, data)</code> and <code>the_page = f.read()</code>"}, {"owner": {"reputation": 2468, "user_id": 3336062, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S7T0N.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/3336062/rahul"}, "edited": false, "score": 3, "creation_date": 1447096412, "post_id": 33534008, "comment_id": 55007172, "body": "Didn&#39;t understood your question. Can you please elaborate ? Do you want something like a program that enters all the value of the form and submit it on it&#39;s own without clicking the submit button ? If yes then you should take a look at <code>Selenium</code> . Or do you want to send a request to a url using <code>GET</code> or <code>POST</code> method with predefined values ?"}], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 0, "last_activity_date": 1447285732, "last_edit_date": 1447285732, "creation_date": 1447285157, "answer_id": 33661921, "question_id": 33534008, "link": "https://stackoverflow.com/questions/33534008/posting-user-input-to-web-form-via-python/33661921#33661921", "title": "Posting user input to web form via Python", "body": "<p>Here's an example using HTTP POST. If your web form uses PUT just change the method. It outputs the page that is returned (which probably isn't needed unless you want to check for success) and the HTTP status code and reason. This is Python 3, only small changes are needed for older versions:</p>\n\n<pre><code>import urllib.parse, urllib.request\nurl=\"http://hskhsk.pythonanywhere.com/cidian\"\nparams={\"q\":\"apple\",\"secondparam\":\"ignored\"}\nencoded=urllib.parse.urlencode(params) \ndata=bytes(encoded, 'utf-8')\nreq = urllib.request.Request(url=url, data=data, method=\"POST\")\nwith urllib.request.urlopen(req) as f:\n    print(f.read().decode('utf-8'))\nprint(f.status)\nprint(f.reason)\n</code></pre>\n\n<p>The web form that it calls is a simple English-Chinese dictionary that accepts HTTP GET or POST requests. The text to search for (apple) is the <code>q</code> parameter and the other parameter is ignored.</p>\n"}, {"tags": [], "owner": {"reputation": 1052, "user_id": 608071, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3dfc4f6f1c20d940339e1d4d9e625f1f?s=128&d=identicon&r=PG", "display_name": "RJR", "link": "https://stackoverflow.com/users/608071/rjr"}, "is_accepted": false, "score": 0, "last_activity_date": 1447405117, "creation_date": 1447405117, "answer_id": 33688971, "question_id": 33534008, "link": "https://stackoverflow.com/questions/33534008/posting-user-input-to-web-form-via-python/33688971#33688971", "title": "Posting user input to web form via Python", "body": "<p>I would recommend reading this book <a href=\"http://learnpythonthehardway.org/book/ex51.html\" rel=\"nofollow\">http://learnpythonthehardway.org/book/ex51.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1964351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f8b704192cfa68a9006cb00426a097?s=128&d=identicon&r=PG", "display_name": "Ashot Ogoltsov", "link": "https://stackoverflow.com/users/1964351/ashot-ogoltsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1447410408, "creation_date": 1447410408, "answer_id": 33690584, "question_id": 33534008, "link": "https://stackoverflow.com/questions/33534008/posting-user-input-to-web-form-via-python/33690584#33690584", "title": "Posting user input to web form via Python", "body": "<p>Here is a very simple example, using Grablib:</p>\n\n<pre><code># we will use GrabLib (http://docs.grablib.org/en/latest/)\nfrom grab import Grab\ng = Grab()\n\ng.go ('someurl.com')\n\ng.set_input ('form name', 'text to be inputted')\ng.submit\n</code></pre>\n\n<p>Thats all)</p>\n"}], "owner": {"reputation": 85, "user_id": 962043, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/675490622/picture?type=large", "display_name": "hiiambo", "link": "https://stackoverflow.com/users/962043/hiiambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1447410408, "creation_date": 1446679378, "last_edit_date": 1446682737, "question_id": 33534008, "link": "https://stackoverflow.com/questions/33534008/posting-user-input-to-web-form-via-python", "title": "Posting user input to web form via Python", "body": "<p>I have a web form that I would like to be filled out via users through a python bot. Everything that I can find regarding this pulls all of the data from a pre-defined payload via request or mechanize, however my situation differs in that I'd like users to be able to trigger this with their own text (for example - .submit Ticket #1234 - Blah blah blah).</p>\n\n<p>The page they are submitting to is a simple form - 1 text area and 1 submit button.</p>\n\n<p>Could anyone shine some light on some tutorials or how I'd go about this?</p>\n\n<p>Here's my attempt:</p>\n\n<pre><code>import re\nimport urllib.parse\nimport requests\n\nfrom lxml import etree\n\n@hook.command(\"addquote\")\ndef addquote(text, bot):\n    \"\"\"&lt;query&gt; -- adds a quote to the qdb.\"\"\"\n    url = 'example.com/?add';\n    values = {'addquote' : text}\n    data = urllib.urlencode(values)\n    req = urllib2.Request(url, data)\n    response = urllib2.urlopen(req)\n    the_page = response.read()\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "arrays", "properties"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1446679872, "post_id": 33533966, "comment_id": 54849582, "body": "I cannot reproduce that error from your current example code."}, {"owner": {"reputation": 1908, "user_id": 5511504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccffc967339e7fa5a3406a6aee147103?s=128&d=identicon&r=PG", "display_name": "Mart&#237;n Mu&#241;oz del R&#237;o", "link": "https://stackoverflow.com/users/5511504/mart%c3%adn-mu%c3%b1oz-del-r%c3%ado"}, "edited": false, "score": 0, "creation_date": 1446679907, "post_id": 33533966, "comment_id": 54849593, "body": "I can not replicate your error, can you be more clear?"}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1446680597, "post_id": 33533966, "comment_id": 54849850, "body": "Typo on line <code>count += np.sum(self.matrix[i])</code>? Should that be <code>_matrix</code>?  Also, why not just initialilze <code>_matrix</code> during <code>__init__</code> and be done with it?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1446681475, "post_id": 33533966, "comment_id": 54850129, "body": "@RobertB. Using <code>_matrix</code> would defeat the whole purpose of the computed property - so definitely not a typo."}, {"owner": {"reputation": 53, "user_id": 3271585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce69a71c586e43b90f9db9002c02e731?s=128&d=identicon&r=PG", "display_name": "user23112", "link": "https://stackoverflow.com/users/3271585/user23112"}, "edited": false, "score": 0, "creation_date": 1446695609, "post_id": 33533966, "comment_id": 54853837, "body": "Sorry about that, you&#39;re right this code seems to run fine. I&#39;ll need to investigate further the cause of the indexing error."}], "owner": {"reputation": 53, "user_id": 3271585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce69a71c586e43b90f9db9002c02e731?s=128&d=identicon&r=PG", "display_name": "user23112", "link": "https://stackoverflow.com/users/3271585/user23112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446679218, "creation_date": 1446679218, "question_id": 33533966, "link": "https://stackoverflow.com/questions/33533966/python-indexing-error-on-only-first-call-of-class-property", "title": "Python: Indexing error on only first call of class property", "body": "<p>I have a class which generates a 2D array for a certain property on the first call of that property, the saves the matrix for later calls. The first time I call it I'd like to already be indexing the first dimension of the array. However, I get the following indexing error:</p>\n\n<p>IndexError: 0-d arrays can't be indexed</p>\n\n<p>Here's some sample code:</p>\n\n<pre><code>import numpy as np\n\nclass rand_matrix:\n\n    _matrix = None\n    _xsize = 5\n\n    @property\n    def matrix(self):\n        if self._matrix is None:\n            self._matrix = np.random.normal(0, 1, (self._xsize, 100))\n\n        return self._matrix\n\n    def sum_matrix(self):\n        count = 0.0\n        for i in range(self._xsize):\n            count += np.sum(self.matrix[i])\n        return count\n</code></pre>\n\n<p>Clearly this isn't the most straight forward way to sum a matrix, so please don't concentrate on that. If I were to call <code>sum_matrix</code> before calling <code>matrix</code>, then <code>_matrix</code> would be <code>None</code>, get generated and returned by <code>matrix</code> as an array. But (I think) since the instance that is generating <code>_matrix</code> as an array from <code>None</code> is the same that indexes that array, I am getting this indexing error. If I then go call <code>sum_matrix</code> again it works.</p>\n\n<p>Is there some way to get this to work the first time?</p>\n\n<p>Thanks very much for any advice.</p>\n"}, {"tags": ["python", "json", "list", "recursion", "json-normalize"], "answers": [{"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1598916553, "last_edit_date": 1598916553, "creation_date": 1572459797, "answer_id": 58631594, "question_id": 33533881, "link": "https://stackoverflow.com/questions/33533881/how-to-flatten-a-json-array-with-python/58631594#58631594", "title": "How to flatten a JSON array with python", "body": "<h2>Use <a href=\"https://pandas.pydata.org\" rel=\"nofollow noreferrer\"><code>pandas</code></a> &amp; <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\"><code>json_normalize</code></a>:</h2>\n<ul>\n<li><code>record_path</code> is the parameter for the main <code>key</code> to flatten</li>\n<li><code>meta</code> is the parameter for additional <code>keys</code> to flatten</li>\n<li><code>json_normalize</code> creates column names that include all <code>keys</code> to the desired <code>key</code>, hence the long column names (e.g. <code>RoomRateDetailsList.RoomRateDetails.roomTypeCode</code>)</li>\n<li>Long column names need to be renamed to shorter versions</li>\n<li>A <code>dict</code> comprehension is used to create a <code>rename</code> <code>dict</code>.</li>\n<li>The following code takes advantage of the <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"nofollow noreferrer\"><code>pathlib</code></a> library</li>\n<li><code>.open</code> is a method of <code>pathlib</code></li>\n<li>Works with non-Windows paths too</li>\n</ul>\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport json\nfrom pathlib import Path\n\n\n# path to file\np = Path(r'c:\\some_path_to_file\\test.json')\n\n# read json file\nwith p.open('r', encoding='utf-8') as f:\n    data = json.loads(f.read())\n\n# create dataframe\ndf = pd.json_normalize(data,\n                    record_path=['data1', 'HotelListResponse', 'HotelList', 'HotelSummary'],\n                    meta=[['data1', 'HotelListResponse', 'customerSessionId'],\n                          ['data1', 'HotelListResponse', 'numberOfRoomsRequested'],\n                          ['data1', 'HotelListResponse', 'moreResultsAvailable'],\n                          ['data1', 'HotelListResponse', 'cacheKey'],\n                          ['data1', 'HotelListResponse', 'cacheLocation'],\n                          ['data1', 'HotelListResponse', 'HotelList', '@size'],\n                          ['data1', 'HotelListResponse', 'HotelList', '@activePropertyCount']])\n\n# rename columns:\nrename = {value: value.split('.')[-1].replace('@', '') for value in df.columns}\ndf.rename(columns=rename, inplace=True)\n\n# dataframe view\n hotelId       city  highRate  lowRate rateCurrencyCode  roomTypeCode  rateCode             roomDescription  promo  averageBaseRate  averageRate currencyCode  nightlyRateTotal  surchargeTotal   total                     customerSessionId numberOfRoomsRequested moreResultsAvailable                     cacheKey       cacheLocation size activePropertyCount\n  132684    Seattle     159.0    159.0              USD         10351     10351  Standard Room, 1 Queen Bed  False            159.0        159.0          USD             159.0           26.81  185.81  0AB29024-F6D4-3915-0862-DB3FD1904C5A                      1                 True  -705f6d43:15086db3fd1:-4c58  10.178.144.36:7300    2                   2\n  263664  Las Vegas     135.0     94.5              USD        373685   1238953   Standard Room, 1 King Bed   True            135.0         94.5          USD              94.5            9.45  103.95  0AB29024-F6D4-3915-0862-DB3FD1904C5A                      1                 True  -705f6d43:15086db3fd1:-4c58  10.178.144.36:7300    2                   2\n\n# save to JSON\ndf.to_json('out.json', orient='records')\n</code></pre>\n<h2>Final JSON Output:</h2>\n<pre><code>[{\n        &quot;hotelId&quot;: 132684,\n        &quot;city&quot;: &quot;Seattle&quot;,\n        &quot;highRate&quot;: 159.0,\n        &quot;lowRate&quot;: 159.0,\n        &quot;rateCurrencyCode&quot;: &quot;USD&quot;,\n        &quot;roomTypeCode&quot;: 10351,\n        &quot;rateCode&quot;: 10351,\n        &quot;roomDescription&quot;: &quot;Standard Room, 1 Queen Bed&quot;,\n        &quot;promo&quot;: false,\n        &quot;averageBaseRate&quot;: 159.0,\n        &quot;averageRate&quot;: 159.0,\n        &quot;currencyCode&quot;: &quot;USD&quot;,\n        &quot;nightlyRateTotal&quot;: 159.0,\n        &quot;surchargeTotal&quot;: 26.81,\n        &quot;total&quot;: 185.81,\n        &quot;customerSessionId&quot;: &quot;0AB29024-F6D4-3915-0862-DB3FD1904C5A&quot;,\n        &quot;numberOfRoomsRequested&quot;: 1,\n        &quot;moreResultsAvailable&quot;: true,\n        &quot;cacheKey&quot;: &quot;-705f6d43:15086db3fd1:-4c58&quot;,\n        &quot;cacheLocation&quot;: &quot;10.178.144.36:7300&quot;,\n        &quot;size&quot;: 2,\n        &quot;activePropertyCount&quot;: 2\n    }, {\n        &quot;hotelId&quot;: 263664,\n        &quot;city&quot;: &quot;Las Vegas&quot;,\n        &quot;highRate&quot;: 135.0,\n        &quot;lowRate&quot;: 94.5,\n        &quot;rateCurrencyCode&quot;: &quot;USD&quot;,\n        &quot;roomTypeCode&quot;: 373685,\n        &quot;rateCode&quot;: 1238953,\n        &quot;roomDescription&quot;: &quot;Standard Room, 1 King Bed&quot;,\n        &quot;promo&quot;: true,\n        &quot;averageBaseRate&quot;: 135.0,\n        &quot;averageRate&quot;: 94.5,\n        &quot;currencyCode&quot;: &quot;USD&quot;,\n        &quot;nightlyRateTotal&quot;: 94.5,\n        &quot;surchargeTotal&quot;: 9.45,\n        &quot;total&quot;: 103.95,\n        &quot;customerSessionId&quot;: &quot;0AB29024-F6D4-3915-0862-DB3FD1904C5A&quot;,\n        &quot;numberOfRoomsRequested&quot;: 1,\n        &quot;moreResultsAvailable&quot;: true,\n        &quot;cacheKey&quot;: &quot;-705f6d43:15086db3fd1:-4c58&quot;,\n        &quot;cacheLocation&quot;: &quot;10.178.144.36:7300&quot;,\n        &quot;size&quot;: 2,\n        &quot;activePropertyCount&quot;: 2\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5095408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8d81c6b3939546f72422f2a51d6e3c?s=128&d=identicon&r=PG&f=1", "display_name": "Veera", "link": "https://stackoverflow.com/users/5095408/veera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1072, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1614812993, "creation_date": 1446678826, "last_edit_date": 1614812993, "question_id": 33533881, "link": "https://stackoverflow.com/questions/33533881/how-to-flatten-a-json-array-with-python", "title": "How to flatten a JSON array with python", "body": "<p>I'm dealing with a JSON structure, which is output as follows:</p>\n\n<pre><code>{\n    \"time\": \"2015-10-20T20:15:00.847Z\",\n    \"name\": \"meta.response.ean\",\n    \"level\": \"info\",\n    \"data1\": {\n        \"HotelListResponse\": {\n            \"customerSessionId\": \"0AB29024-F6D4-3915-0862-DB3FD1904C5A\",\n            \"numberOfRoomsRequested\": 1,\n            \"moreResultsAvailable\": true,\n            \"cacheKey\": \"-705f6d43:15086db3fd1:-4c58\",\n            \"cacheLocation\": \"10.178.144.36:7300\",\n            \"HotelList\": {\n                \"@size\": 2,\n                \"@activePropertyCount\": 2,\n                \"HotelSummary\": [{\n                        \"hotelId\": 132684,\n                        \"city\": \"Seattle\",\n                        \"highRate\": 159.0,\n                        \"lowRate\": 159.0,\n                        \"rateCurrencyCode\": \"USD\",\n                        \"RoomRateDetailsList\": {\n                            \"RoomRateDetails\": {\n                                \"roomTypeCode\": 10351,\n                                \"rateCode\": 10351,\n                                \"roomDescription\": \"Standard Room, 1 Queen Bed\",\n                                \"RateInfos\": {\n                                    \"RateInfo\": {\n                                        \"@promo\": false,\n                                        \"ChargeableRateInfo\": {\n                                            \"@averageBaseRate\": 159.0,\n                                            \"@averageRate\": 159.0,\n                                            \"@currencyCode\": \"USD\",\n                                            \"@nightlyRateTotal\": 159.0,\n                                            \"@surchargeTotal\": 26.81,\n                                            \"@total\": 185.81\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }, {\n                        \"hotelId\": 263664,\n                        \"city\": \"Las Vegas\",\n                        \"highRate\": 135.0,\n                        \"lowRate\": 94.5,\n                        \"rateCurrencyCode\": \"USD\",\n                        \"RoomRateDetailsList\": {\n                            \"RoomRateDetails\": {\n                                \"roomTypeCode\": 373685,\n                                \"rateCode\": 1238953,\n                                \"roomDescription\": \"Standard Room, 1 King Bed\",\n                                \"RateInfos\": {\n                                    \"RateInfo\": {\n                                        \"@promo\": true,\n                                        \"ChargeableRateInfo\": {\n                                            \"@averageBaseRate\": 135.0,\n                                            \"@averageRate\": 94.5,\n                                            \"@currencyCode\": \"USD\",\n                                            \"@nightlyRateTotal\": 94.5,\n                                            \"@surchargeTotal\": 9.45,\n                                            \"@total\": 103.95\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    },\n    \"context\": {\n        \"X-Request-Id\": \"dca47992-b6cc-4b87-956c-90523c0bf3bb\",\n        \"host\": \"getaways-search-app2\",\n        \"thread\": \"http-nio-80-exec-12\"\n    }\n}\n</code></pre>\n\n<p>As you can see, these are nested arrays. There is much discussion about flattening these recursively. I am unable to flatten the arrays under <code>HotelSummary</code>. Any ideas?</p>\n\n<ul>\n<li>I want to flatten parts of the JSON into the following form:</li>\n</ul>\n\n<pre><code>{  \n   \"customerSessionId\":\"0AB29024-F6D4-3915-0862-DB3FD1904C5A\",\n   \"numberOfRoomsRequested\":1,\n   \"moreResultsAvailable\":\"true\",\n   \"cacheKey\":\"-705f6d43:15086db3fd1:-4c58\",\n   \"cacheLocation\":\"10.178.144.36:7300\",\n   \"size\":2,\n   \"activePropertyCount\":2,\n   \"hotelId\":132684,\n   \"city\":\"Seattle\",\n   \"highRate\":159.0,\n   \"lowRate\":159.0,\n   \"rateCurrencyCode\":\"USD\",\n   \"roomTypeCode\":10351,\n   \"rateCode\":10351,\n   \"roomDescription\":\"Standard Room, 1 Queen Bed\",\n   \"promo\":\"false\",\n   \"averageBaseRate\":159.0,\n   \"averageRate\":159.0,\n   \"currencyCode\":\"USD\",\n   \"nightlyRateTotal\":159.0,\n   \"surchargeTotal\":26.81,\n   \"total\":185.81\n}\n\n\n{  \n   \"customerSessionId\":\"0AB29024-F6D4-3915-0862-DB3FD1904C5A\",\n   \"numberOfRoomsRequested\":1,\n   \"moreResultsAvailable\":\"true\",\n   \"cacheKey\":\"-705f6d43:15086db3fd1:-4c58\",\n   \"cacheLocation\":\"10.178.144.36:7300\",\n   \"size\":2,\n   \"activePropertyCount\":2,\n   \"hotelId\":263664,\n   \"city\":\"Las Vegas\",\n   \"highRate\":135.0,\n   \"lowRate\":94.5,\n   \"rateCurrencyCode\":\"USD\",\n   \"roomTypeCode\":373685,\n   \"rateCode\":1238953,\n   \"roomDescription\":\"Standard Room, 1 King Bed\",\n   \"promo\":\"true\",\n   \"averageBaseRate\":135.0,\n   \"averageRate\":94.5,\n   \"currencyCode\":\"USD\",\n   \"nightlyRateTotal\":94.5,\n   \"surchargeTotal\":9.45,\n   \"total\":103.95\n}\n</code></pre>\n\n<ul>\n<li>I have tried using <code>flattenDict</code> class. I am not getting the output in the desired format.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>def flattenDict(d, result=None):\n    if result is None:\n        result = {}\n    for key in d:\n        value = d[key]\n        if isinstance(value, dict):\n            value1 = {}\n            for keyIn in value:\n                value1[\".\".join([key,keyIn])]=value[keyIn]\n            flattenDict(value1, result)\n        elif isinstance(value, (list, tuple)):   \n            for indexB, element in enumerate(value):\n                if isinstance(element, dict):\n                    value1 = {}\n                    index = 0\n                    for keyIn in element:\n                        newkey = \".\".join([key,keyIn])        \n                        value1[\".\".join([key,keyIn])]=value[indexB][keyIn]\n                        index += 1\n                    for keyA in value1:\n                        flattenDict(value1, result)   \n        else:\n            result[key]=value\n    return result\n</code></pre>\n"}, {"tags": ["python", "django", "apache", "csrf"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1446679575, "post_id": 33533866, "comment_id": 54849480, "body": "Did you create your own html template for accessing the admin page?"}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "edited": false, "score": 1, "creation_date": 1446679901, "post_id": 33533866, "comment_id": 54849590, "body": "@shenk, since you deleted your last question after I&#39;d answered it, you should note that you must restart Apache to reload your code! When you make a change, remember to restart Apache to test. Also, enable DEBUG in your settings so that you don&#39;t have to rely on Apache Error Logs."}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446679905, "post_id": 33533866, "comment_id": 54849592, "body": "No just using the built in admin module"}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "edited": false, "score": 1, "creation_date": 1446680016, "post_id": 33533866, "comment_id": 54849635, "body": "Is admin the only page that&#39;s affected?"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446680077, "post_id": 33533866, "comment_id": 54849666, "body": "Yes seems to be. But I don&#39;t have any other pages that use CSRF for logging in to check that. My forms aren&#39;t even completely finished so I can&#39;t check those."}], "answers": [{"comments": [{"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446680726, "post_id": 33534232, "comment_id": 54849909, "body": "Tried to remove it but it didn&#39;t seem to make a difference.  Is there something I should replace it with?"}, {"owner": {"reputation": 2613, "user_id": 1161025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f46695e938ad86e7a59ae990ea2479?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/1161025/maciek"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1446680789, "post_id": 33534232, "comment_id": 54849926, "body": "Name of your production domain. If you leave it with &quot;None&quot; it will also work, as it is default value for this setting."}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446680891, "post_id": 33534232, "comment_id": 54849959, "body": "I had commented it out. So if my production domain is cshenkan.com I should set it to <code>CSRF_COOKIE_DOMAIN = &#39;cshenkan.com&#39;</code> ?  I tried that and I still got the same error.  Also tried setting it to <code>&#39;&#39;</code> and <code>None</code> After I do these changes, do I need to reset Apache in between testing?  Or as I expect, does it not make a difference?"}, {"owner": {"reputation": 2613, "user_id": 1161025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f46695e938ad86e7a59ae990ea2479?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/1161025/maciek"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1446681212, "post_id": 33534232, "comment_id": 54850053, "body": "No, in standard case you should not set this setting at all, leave it as default <code>None</code>. Yup, you should restart your Apache. This setting can allow performing POST requests from another subdomains, which is not a standard case. See <a href=\"https://docs.djangoproject.com/en/1.8/ref/settings/#csrf-cookie-domain\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.8/ref/settings/#csrf-cookie-doma&zwnj;&#8203;in</a>"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446681298, "post_id": 33534232, "comment_id": 54850077, "body": "Okay so I will set it back to None.  Since that is the default, can&#39;t I just remove the setting completely?  As I said though, when set to None the problem still occurs."}, {"owner": {"reputation": 2613, "user_id": 1161025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f46695e938ad86e7a59ae990ea2479?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/1161025/maciek"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1446681329, "post_id": 33534232, "comment_id": 54850085, "body": "Yes, you definitely can."}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1446681397, "post_id": 33534232, "comment_id": 54850103, "body": "Well by removing it, and then restarting apache it works now so thanks a ton.  Looks like restarting apache in between is required, I had assumed it wasn&#39;t since they were Django changes but seems like it was."}, {"owner": {"reputation": 2613, "user_id": 1161025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f46695e938ad86e7a59ae990ea2479?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/1161025/maciek"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1446681401, "post_id": 33534232, "comment_id": 54850109, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94259/discussion-between-maciek-and-shenk\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2613, "user_id": 1161025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f46695e938ad86e7a59ae990ea2479?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/1161025/maciek"}, "is_accepted": true, "score": 1, "last_activity_date": 1449246344, "last_edit_date": 1449246344, "creation_date": 1446680665, "answer_id": 33534232, "question_id": 33533866, "link": "https://stackoverflow.com/questions/33533866/django-on-apache-with-mod-wsgi-csrf-verification-failed/33534232#33534232", "title": "Django on Apache with mod_wsgi CSRF Verification Failed", "body": "<p>You should remove <code>CSRF_COOKIE_DOMAIN = \"127.0.0.1\"</code> from your settings.</p>\n\n<p>Django is looking for CSRF token cookie with your production domain, but won't find it because your application sets <code>127.0.0.1</code> as cookie domain due to your settings. So it returns HTTP 403 and logs that cookie is not set.</p>\n"}], "owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 1, "accepted_answer_id": 33534232, "answer_count": 1, "score": 1, "last_activity_date": 1452901136, "creation_date": 1446678759, "last_edit_date": 1452901136, "question_id": 33533866, "link": "https://stackoverflow.com/questions/33533866/django-on-apache-with-mod-wsgi-csrf-verification-failed", "title": "Django on Apache with mod_wsgi CSRF Verification Failed", "body": "<p>I have a Django site on Apache with mod_wsgi.  At first the admin page would return a 500 error, it started working after restarting Apache and such. But now when I go to log in I get a 403 with this message:</p>\n\n<pre><code>CSRF verification failed. Request aborted.\nYou are seeing this message because this site requires a CSRF cookie when submitting forms. This cookie is required for security reasons, to ensure that your browser is not being hijacked by third parties.\nIf you have configured your browser to disable cookies, please re-enable them, at least for this site, or for 'same-origin' requests.\n</code></pre>\n\n<p>The only option for CSRF I have in my settings is CSRF_COOKIE_DOMAIN = \"127.0.0.1\"</p>\n\n<p>CSSRF_SECURE_DOMAIN isn't set so it defaults to False.  I am not using https at all currently as the site is still in development.</p>\n\n<p>But I need to be able to access the admin interface.</p>\n\n<p>How can I fix this error?  Everything worked fine on local development servers but once pushed up to a web server I ran into these types of issues.</p>\n\n<p>So does anyone have any suggestions on how to fix this CSRF validation error I am having?  And does anyone know how it will change if I got to implement SSL on the site?</p>\n\n<p>All requests/responses are from the same server. Appreciate any help provided.</p>\n\n<p>EDIT:</p>\n\n<p>In my Django logger file output I get this line:</p>\n\n<pre><code>[04/Nov/2015 18:13:20] WARNING [django.request:98] Forbidden (CSRF cookie not set.): /sa-admin/login/\n</code></pre>\n\n<p>Saying that the CSRF cookie is not set at all.  But I am using the default contrib.admin to handle all of this so I am perplexed as to the problem.  Only suit has been added to the admin.  But that is just a skin really.</p>\n"}, {"tags": ["python", "module", "path", "traceback"], "answers": [{"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 0, "last_activity_date": 1446682312, "creation_date": 1446682312, "answer_id": 33534491, "question_id": 33533748, "link": "https://stackoverflow.com/questions/33533748/python-getting-calling-modules-path-via-traceback-problems/33534491#33534491", "title": "Python - Getting calling module&#39;s path via traceback, problems?", "body": "<p>To find the location of a module, function, or class, use the <code>inspect</code> module:</p>\n\n<pre><code>import inspect\nprint(inspect.getsourcefile(some_module))\n</code></pre>\n\n<p>You can use this to find the location of the code units you are interested in. If you put this in a library, just wrap it in a function that takes an argument. </p>\n\n<p>Actually you could do the same with <code>__file__</code>, if necessary: Just pass it as the argument to a function that will do the rest.</p>\n"}], "owner": {"reputation": 89, "user_id": 2547864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6335b7027586891ae4784a90b75358be?s=128&d=identicon&r=PG", "display_name": "agd", "link": "https://stackoverflow.com/users/2547864/agd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450221515, "creation_date": 1446678239, "last_edit_date": 1450221515, "question_id": 33533748, "link": "https://stackoverflow.com/questions/33533748/python-getting-calling-modules-path-via-traceback-problems", "title": "Python - Getting calling module&#39;s path via traceback, problems?", "body": "<p>In python, I often find myself loading package resources through calls such as the following:</p>\n\n<pre><code>import os\nfp = open(os.path.join(os.path.dirname(os.path.realpath(__file__)),\n                       \"resource.json\"), \"r\")\n</code></pre>\n\n<p>I've been considering using a library function such as the following to eliminate this ugliness. The issue is that the function would live in a library, not the file that I want to get the directory of. I can get around this with the traceback package, such as with the following:</p>\n\n<pre><code>import os, traceback\ndef with_module_directory(filename):\n    return os.path.join(os.path.dirname(traceback.extract_stack()[-2][0]),\n                        filename)\n</code></pre>\n\n<p>Now if <code>with_module_directory()</code> lives in <code>/home/user1/mylibs/utils.py</code>, when a module in <code>/home/user1/myscripts</code> makes the call <code>with_module_directory(\"resource.json\")</code>, the result will be <code>\"/home/user1/myscripts/resource.json\"</code>, as desired.</p>\n\n<p>I'm worried however that doing this is in some way dangerous. Manually looking at the stack trace feels like a generally bad thing, like I'm breaking encapsulation. But I can't think of any concrete issues, so I pose the question: Can anyone think of a problem that could be created by doing this? Is it bad practice for any specific reason?</p>\n\n<p>Note: I realize I could just force the user to make a call like <code>with_module_path(\"resource.json\", __file__)</code>, but if there's no actual reason to avoid the simpler interface then I'd prefer to use it.</p>\n"}, {"tags": ["python", "subprocess"], "answers": [{"tags": [], "owner": {"reputation": 3467, "user_id": 2958455, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4bf81a9aa9aa3619f1197c901f079268?s=128&d=identicon&r=PG", "display_name": "Jared Mackey", "link": "https://stackoverflow.com/users/2958455/jared-mackey"}, "is_accepted": true, "score": 0, "last_activity_date": 1446678694, "creation_date": 1446678694, "answer_id": 33533848, "question_id": 33533704, "link": "https://stackoverflow.com/questions/33533704/how-do-i-do-sub-processes-properly-with-python/33533848#33533848", "title": "How do i do sub processes properly with Python", "body": "<p>If you are trying to change the working directory in python that can be accomplished simply by <code>os</code> module. You can find that documentation <a href=\"https://docs.python.org/2/library/os.html\" rel=\"nofollow\">here</a>. I would suggest only using <code>subprocess.call</code> to call a script or another program that isn't trying to modify stuff based on the current environment.</p>\n"}, {"tags": [], "owner": {"reputation": 40487, "user_id": 322806, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/TDQGm.jpg?s=128&g=1", "display_name": "Winston Ewert", "link": "https://stackoverflow.com/users/322806/winston-ewert"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679137, "creation_date": 1446679137, "answer_id": 33533950, "question_id": 33533704, "link": "https://stackoverflow.com/questions/33533704/how-do-i-do-sub-processes-properly-with-python/33533950#33533950", "title": "How do i do sub processes properly with Python", "body": "<p>When you run a subprocess with <code>shell=True</code>, python starts up a new shell to run the command in. It is basically the same as if python start up a new command prompt, entered in the command, and then closed the command prompt.</p>\n\n<p>The consequence is that any action which only affects the shell is lost when the shell is closed. So you can create files and you'll see that because the hard drive is changed. But if you change the current directory of the shell that change will be lost.</p>\n\n<p>You might wonder about the output of the program. Basically, the default is for the output of the program to be copied to the output of the calling program. (You can override this.)</p>\n\n<p>If you want to change the current directory you want <code>os.chdir</code>. In general, you should avoid calling subprocesses and prefer python's tools. For example, instead of <code>dir</code> use <code>os.listdir</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 1, "last_activity_date": 1446679144, "creation_date": 1446679144, "answer_id": 33533952, "question_id": 33533704, "link": "https://stackoverflow.com/questions/33533704/how-do-i-do-sub-processes-properly-with-python/33533952#33533952", "title": "How do i do sub processes properly with Python", "body": "<p>The general rule is that children cannot affect the parent's environment.</p>\n\n<p><code>subprocess.call</code> creates a child process.  The child process can do many things.  But, any changes it makes to the current working directory or to environment variables only last for the duration of the subprocess call.  After the call completes and control returns to the parent, the parent's environment is restored unchanged.</p>\n\n<p>If you want the <code>cd</code> to affect the next <code>dir</code> command, you need to have both in the <em>same</em> child.  For example:</p>\n\n<pre><code>subprocess.call('cd ..; dir', shell=True)\n</code></pre>\n\n<p>You probably asked this question for more general purposes.  But, for the specific examples that you provided, note that those actions might be better performed with the <code>os</code> module, rather than the <code>subprocess</code> module: listing files in the current directory can be done with <code>os.listdir</code> and changing the current working directory can be done with <code>os.chdir</code></p>\n"}], "owner": {"reputation": 3, "user_id": 5174620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15a4799061e101f4947081ef8ba6a74?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Somerset", "link": "https://stackoverflow.com/users/5174620/kyle-somerset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 33533848, "answer_count": 3, "score": 0, "last_activity_date": 1446679144, "creation_date": 1446678043, "last_edit_date": 1446678413, "question_id": 33533704, "link": "https://stackoverflow.com/questions/33533704/how-do-i-do-sub-processes-properly-with-python", "title": "How do i do sub processes properly with Python", "body": "<p>I am new to python so I'm in the early stages of learning it. I was wondering if anyone knows how to run a system command after another. It's hard to explain:</p>\n\n<pre><code>subprocess.call('dir',shell=True)\nsubprocess.call('cd ..',shell=True)\nsubprocess.call('dir',shell=True)\n</code></pre>\n\n<p>When I run the command I expect to see the directory which the file is run. Which was fine.</p>\n\n<p>Then the second process I expect to go up a directory.</p>\n\n<p>Then the third command I expected to see the higher directory. Which I didn't I just saw the first directory.</p>\n\n<p>Could some one explain why it isn't working as I expected and what I should do to correct it. </p>\n"}, {"tags": ["python", "python-2.7", "wxpython", "wxwidgets"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4348954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5W0j.png?s=128&g=1", "display_name": "bobZBy", "link": "https://stackoverflow.com/users/4348954/bobzby"}, "edited": false, "score": 0, "creation_date": 1447370017, "post_id": 33557522, "comment_id": 55139355, "body": "you receive the event.Text from wx.EVT_LIST_ITEM_SELECTED, i need to find the event attributes for more events like EVT_LIST_INSERT_ITEM (etc...), where can I find the documentation for other event.[attributes]? Ive tried event.GetItemText and many other methods and events(wx.EVT&#39;s) from the documentation hoping through trial and error something would work which is no way to program. I guess Im looking for documentation that has code examples to understand the documentation of wxPython. Or at least what event.attr are available for each wx.EVT?"}], "tags": [], "owner": {"reputation": 3460, "user_id": 2216870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wiK4i.jpg?s=128&g=1", "display_name": "Yoriz", "link": "https://stackoverflow.com/users/2216870/yoriz"}, "is_accepted": true, "score": 0, "last_activity_date": 1446770443, "creation_date": 1446770443, "answer_id": 33557522, "question_id": 33533677, "link": "https://stackoverflow.com/questions/33533677/wx-python-bind-event-to-editablelistbox-list-items/33557522#33557522", "title": "wx.python bind event to editableListBox list item&#39;s", "body": "<p>EditableListBox actually contains a ListCtrl, to gain access to the control use <em>self.myEitableListBox.ListCtrl</em>, by using the returned object you can Bind events.</p>\n\n<p>The following example of your code with a few lines added will on selecting an item in the EditableListBox, add it to the richtext control.</p>\n\n<pre><code>import wx\nimport wx.richtext\nimport wx.gizmos\n\ndef create(parent):\n        return myFrame(parent)\n\n[wxID_MYFRAME, wxID_MYFRAMEMYEITABLELISTBOX, wxID_MYFRAMEMYFRAME_PANEL, \n wxID_MYFRAMERICHTEXTCTRL1, \n] = [wx.NewId() for _init_ctrls in range(4)]\n\nclass myFrame(wx.Frame):\n    def _init_ctrls(self, prnt):\n\n        wx.Frame.__init__(self, id=wxID_MYFRAME, name=u'myFrame', parent=prnt,\n          pos=wx.Point(551, 188), size=wx.Size(500, 500),\n          style=wx.DEFAULT_FRAME_STYLE, title=u'myPanel')\n        self.SetClientSize(wx.Size(498, 466))\n        self.SetInitialSize(wx.Size(500, 500))\n\n        self.myFrame_panel = wx.Panel(id=wxID_MYFRAMEMYFRAME_PANEL,\n              name=u'myFrame_panel', parent=self, pos=wx.Point(0, 0),\n              size=wx.Size(498, 466), style=wx.TAB_TRAVERSAL)\n\n        self.myEitableListBox = wx.gizmos.EditableListBox(id=wxID_MYFRAMEMYEITABLELISTBOX,\n              label=u'myEitableListBox', name=u'myEitableListBox',\n              parent=self.myFrame_panel, pos=wx.Point(8, 56), size=wx.Size(200,\n          248))\n        self.myEitableListBox.SetStrings(['this', 'that', 'other'])\n\n        self.richTextCtrl1 =    wx.richtext.RichTextCtrl(id=wxID_MYFRAMERICHTEXTCTRL1,\n              parent=self.myFrame_panel, pos=wx.Point(224, 64),\n              size=wx.Size(248, 240), style=wx.richtext.RE_MULTILINE,\n              value=u'')\n        self.richTextCtrl1.SetLabel(u'')\n\n        self.myEitableListBox.ListCtrl.Bind(\n            wx.EVT_LIST_ITEM_SELECTED, self.on_listbox)\n\n    def __init__(self, parent):\n        self._init_ctrls(parent)\n\n    def on_listbox(self, event):\n        text = '{}\\n'.format(event.Text)\n        self.richTextCtrl1.AppendText(text)\n\n\nif __name__ == '__main__':\n    app = wx.App()\n    frame = create(None)\n    frame.Show()\n\n    app.MainLoop()\n</code></pre>\n\n<p>There was an error because the depreciated PySimpleApp was used, use App instead which i have also changed in the above code.</p>\n"}], "owner": {"reputation": 39, "user_id": 4348954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5W0j.png?s=128&g=1", "display_name": "bobZBy", "link": "https://stackoverflow.com/users/4348954/bobzby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 33557522, "answer_count": 1, "score": 1, "last_activity_date": 1446770443, "creation_date": 1446677864, "last_edit_date": 1446678839, "question_id": 33533677, "link": "https://stackoverflow.com/questions/33533677/wx-python-bind-event-to-editablelistbox-list-items", "title": "wx.python bind event to editableListBox list item&#39;s", "body": "<p>Im looking for a way to bind a function to an event triggered from the selection of a list item inside the wx.gizmos editableListBox. I want the selection to populate the richTextCtrl1 with a string that can be edited by the user.  </p>\n\n<p>Below is a quick mock up of the UI design without event bindings or functions for clarity as my actual application is much larger.</p>\n\n<pre><code>import wx\nimport wx.richtext\nimport wx.gizmos\n\ndef create(parent):\n        return myFrame(parent)\n\n[wxID_MYFRAME, wxID_MYFRAMEMYEITABLELISTBOX, wxID_MYFRAMEMYFRAME_PANEL, \n wxID_MYFRAMERICHTEXTCTRL1, \n] = [wx.NewId() for _init_ctrls in range(4)]\n\nclass myFrame(wx.Frame):\n    def _init_ctrls(self, prnt):\n\n        wx.Frame.__init__(self, id=wxID_MYFRAME, name=u'myFrame', parent=prnt,\n          pos=wx.Point(551, 188), size=wx.Size(500, 500),\n          style=wx.DEFAULT_FRAME_STYLE, title=u'myPanel')\n        self.SetClientSize(wx.Size(498, 466))\n        self.SetInitialSize(wx.Size(500, 500))\n\n        self.myFrame_panel = wx.Panel(id=wxID_MYFRAMEMYFRAME_PANEL,\n              name=u'myFrame_panel', parent=self, pos=wx.Point(0, 0),\n              size=wx.Size(498, 466), style=wx.TAB_TRAVERSAL)\n\n        self.myEitableListBox = wx.gizmos.EditableListBox(id=wxID_MYFRAMEMYEITABLELISTBOX,\n              label=u'myEitableListBox', name=u'myEitableListBox',\n              parent=self.myFrame_panel, pos=wx.Point(8, 56), size=wx.Size(200,\n          248))\n        self.myEitableListBox.SetStrings(['this', 'that', 'other'])\n\n        self.richTextCtrl1 =    wx.richtext.RichTextCtrl(id=wxID_MYFRAMERICHTEXTCTRL1,\n              parent=self.myFrame_panel, pos=wx.Point(224, 64),\n              size=wx.Size(248, 240), style=wx.richtext.RE_MULTILINE,\n              value=u'')\n        self.richTextCtrl1.SetLabel(u'')\n\n    def __init__(self, parent):\n        self._init_ctrls(parent)\n\nif __name__ == '__main__':\n    app = wx.PySimpleApp()\n    frame = create(None)\n    frame.Show()\n\n    app.MainLoop()\n</code></pre>\n\n<p>I couldn't find a solution looking at the wx.python demo examples. Google hasn't helped much either. I have tried Boa Constructor and bound some events to the editable list box. Here are the bindings I have tried although none have worked:</p>\n\n<pre><code>self.myEitableListBox.Bind(wx.EVT_SYS_COLOUR_CHANGED,\n          self.OnmyEitableListBoxSysColourChanged)\nself.myEitableListBox.Bind(wx.EVT_SET_FOCUS, self.OnmyEitableListBoxSetFocus)\nself.myEitableListBox.Bind(wx.EVT_LEFT_DOWN, self.OnmyEitableListBoxLeftDown)\n\ndef OnmyEitableListBoxSysColourChanged(self, event):\n    print self.myEitableListBox.GetSelection()\n    print \"fired\"\n    event.Skip()\n\ndef OnmyEitableListBoxSetFocus(self, event):\n    print self.myEitableListBox.GetSelection(self)\n    print \"fired\"\n    event.Skip()\n\ndef OnmyEitableListBoxLeftDown(self, event):\n    print self.myEitableListBox.GetSelection()\n    lb = event.GetEventObject()\n    data = lb.GetClientData(lb.GetSelection())\n    print \"fired\", data\n    event.Skip()\n</code></pre>\n\n<p>I have been reading the docs and trying to find tuts for wx.python. Nothing I have found yet has helped me understand how I can get the selected list item. If I could get the selected list item I think I could make the function that populates the ritchTextFeild. I should not that the GetSelection()'s and things are me trying and failing to understand what is going on. Also there are no errors generated in the console when run so I really dont know where to go from here. </p>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "data-structures"], "comments": [{"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1446677901, "post_id": 33533649, "comment_id": 54848927, "body": "Would a <a href=\"https://docs.python.org/2/library/collections.html#collections.namedtuple\" rel=\"nofollow noreferrer\"><code>namedtuple</code></a> fit your needs?"}, {"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "edited": false, "score": 3, "creation_date": 1446677904, "post_id": 33533649, "comment_id": 54848928, "body": "Why not this then? <code>data = {&#39;entry1&#39;: {&#39;name&#39;: &#39;test-name&#39;, &#39;url&#39;: &#39;http:&#47;&#47;example.com&#39;, &#39;currYear&#39;: &#39;2015&#39;, &#39;availYears&#39;: &#39;2015,2014&#39;}}</code>"}, {"owner": {"reputation": 10664, "user_id": 475229, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0952c4a2c08421aecb397d3a81545f6e?s=128&d=identicon&r=PG", "display_name": "jgritty", "link": "https://stackoverflow.com/users/475229/jgritty"}, "edited": false, "score": 1, "creation_date": 1446678042, "post_id": 33533649, "comment_id": 54848975, "body": "Are the names unique? If so, you could use that as the key: <code>data = {&#39;test-name&#39;: {&#39;url&#39;: &#39;http:&#47;&#47;example.com&#39;, &#39;currYear&#39;: &#39;2015&#39;, &#39;availYears&#39;: &#39;2015,2014&#39;}}</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "edited": false, "score": 0, "creation_date": 1446678045, "post_id": 33533649, "comment_id": 54848977, "body": "As @metatoaster suggested, you should use a dict whose values are dicts."}, {"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1446678120, "post_id": 33533649, "comment_id": 54849004, "body": "You can take a look at Python&#39;s Pandas lib."}], "answers": [{"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 1, "last_activity_date": 1446678382, "last_edit_date": 1446678382, "creation_date": 1446678080, "answer_id": 33533713, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python/33533713#33533713", "title": "Looking for a better data structure in python", "body": "<p>The most light-weight solution for what you want is probably a <code>namedtuple</code>.</p>\n\n<pre><code>&gt;&gt;&gt; from collections import namedtuple\n&gt;&gt;&gt; mytuple = namedtuple(\"mytuple\", field_names=\"url currYear availYears\")\n&gt;&gt;&gt; data = [ 'test-name': mytuple('http://example.com', '2015', '2015,2014'), ...\n    ... ]\n&gt;&gt;&gt; print(data['test-name'])\nmytuple(url='http://example.com', currYear='2015', availYears='2015,2014')\n</code></pre>\n\n<p>You can access members by numerical index or by name:</p>\n\n<pre><code>&gt;&gt;&gt; x = data['test-name']\n&gt;&gt;&gt; print(x.currYear)\n2015\n&gt;&gt;&gt; print(x[1])\n2015\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1446680501, "post_id": 33533755, "comment_id": 54849816, "body": "This is clear and easy to use, but note that each dict adds something like 500 bytes of overhead; a namedtuple takes no extra memory."}], "tags": [], "owner": {"reputation": 10664, "user_id": 475229, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0952c4a2c08421aecb397d3a81545f6e?s=128&d=identicon&r=PG", "display_name": "jgritty", "link": "https://stackoverflow.com/users/475229/jgritty"}, "is_accepted": false, "score": 3, "last_activity_date": 1446678303, "creation_date": 1446678303, "answer_id": 33533755, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python/33533755#33533755", "title": "Looking for a better data structure in python", "body": "<p>Use the names as the keys in a dictionary:</p>\n\n<pre><code>data = {'test-name': \n           {'url': 'http://example.com', \n            'currYear': '2015', \n            'availYears': '2015,2014'\n           }\n       }\n</code></pre>\n\n<p>Access like so:</p>\n\n<pre><code>data['test-data']['url']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 857, "user_id": 2540382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b8d58e8cf9458d18a08b9532ce5bd6?s=128&d=identicon&r=PG", "display_name": "Ken Geis", "link": "https://stackoverflow.com/users/2540382/ken-geis"}, "is_accepted": false, "score": 0, "last_activity_date": 1446678314, "creation_date": 1446678314, "answer_id": 33533758, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python/33533758#33533758", "title": "Looking for a better data structure in python", "body": "<pre><code>data = [\n    {'name': 'test-name', 'url': 'http://example.com', 'currYear': '2015', 'availYears': '2015,2014'},\n    {'name': 'next-name', 'url': 'http://example.org', 'currYear': '1999', 'availYears': '1999'}\n]\nfor each in data:\n    name = each['name']\n    url = each['url']\n    currYear = each['currYear']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "edited": false, "score": 0, "creation_date": 1446680418, "post_id": 33533784, "comment_id": 54849777, "body": "There are a lot of perfectly valid solutions to the OP&#39;s problem, but this one is the simplest and most straightforward for a beginner."}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": false, "score": 2, "last_activity_date": 1446678432, "creation_date": 1446678432, "answer_id": 33533784, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python/33533784#33533784", "title": "Looking for a better data structure in python", "body": "<p>You seem to have needlessly complicated things with the list-in-list solution. If you keep it a little flatter, you can just unpack the rows into variables:</p>\n\n<pre><code>data = [\n    ['test-name', 'http://example.com', '2015', '2015,2014'],\n    ['next-name', 'http://example.org', '1999', '1999']\n]\n\nfor name, url, currYear, availYears in data:\n    ....\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "edited": false, "score": 0, "creation_date": 1446680469, "post_id": 33533942, "comment_id": 54849800, "body": "All the answers submitted here are perfectly valid and will get the job done, but this one would best prepare the OP for expanding his coding skillset."}], "tags": [], "owner": {"reputation": 1577, "user_id": 4065182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3e28abd04df5a6679c79907d42ba91?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC73", "link": "https://stackoverflow.com/users/4065182/chrisc73"}, "is_accepted": true, "score": 3, "last_activity_date": 1446679110, "creation_date": 1446679110, "answer_id": 33533942, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python/33533942#33533942", "title": "Looking for a better data structure in python", "body": "<p>A class may make this easier to use: eg:</p>\n\n<pre><code>    class Entry(object):\n        def __init__(self, name, url, currYear, availYears):\n            self.name = name\n            self.url = url\n            self.currYear = currYear\n            self.availYears = availYears\n\n    entry1 = Entry('test-name', 'http://example.com', '2015', '2015,2014')\n    entry2 = Entry('next-name', 'http://example.org', '1999', '1999')\n\n    data = [entry1, entry2]\n\n    for entry in data:\n        print entry.name\n        print entry.url \n        print entry.currYear \n        print entry.availYears\n        print\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5419964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pNcTI.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5419964/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33533942, "answer_count": 5, "score": 1, "last_activity_date": 1446742451, "creation_date": 1446677740, "last_edit_date": 1446742451, "question_id": 33533649, "link": "https://stackoverflow.com/questions/33533649/looking-for-a-better-data-structure-in-python", "title": "Looking for a better data structure in python", "body": "<p>I have some basic data that I want to store and I'm looking for a better solution then what I've come up with.\nI have multiple entries of data with 4 fields per entry, name, url, currYear, availYears</p>\n\n<p>I can solve this with a simple array of arrays like so:</p>\n\n<pre><code>data = [\n    ['test-name', ['http://example.com', '2015', '2015,2014']]\n    ['next-name', ['http://example.org', '1999', '1999']]\n]\n</code></pre>\n\n<p>But this gets messy when trying to access data in each array. I end up with a for loop like this</p>\n\n<pre><code>for each in data:\n    name = each[0]\n    url = each[1][0]\n    currYear = each[1][1]\n</code></pre>\n\n<p>I'd prefer to do something similar to a dict where I can reference what I want by a key name. This isn't valid syntax, but hopefully it gets the point across.</p>\n\n<pre><code>data = {'entry1': {'name': 'test-name'}, {'url': 'http://example.com'}, {'currYear': '2015'}, {'availYears': '2015,2014'}}\n</code></pre>\n\n<p>Then I could pull the url data for entryX.</p>\n\n<p>EDIT:\nSeveral good responses. I decided to go with creating a class since 1) it satisfies my need 2) helps clean up the code by segregating functionality and 3) learn how packages, modules and classes work compared to Java (which I'm more familiar with). \nIn addition to creating the class, I also created getters and setters.</p>\n\n<pre><code>class SchoolSiteData(object):\n    def __init__(self, name, url, currYear, availYears):\n        self.name = name\n        self.url = url\n        self.currYear = currYear\n        self.availYears = availYears\n\n    def getName(self):\n        return self.name\n    def getURL(self):\n        return self.url\n    def getCurrYear(self):\n        return self.currYear\n    def getAvailYears(self):\n        return self.availYears\n\n    def setName(self, name):\n        self.name = name\n    def setURL(self, url):\n        self.url = url\n    def setCurrYear(self, currYear):\n        self.currYear = currYear\n    def setAvailYears(self, availYears):\n        self.availYears = availYears\n</code></pre>\n"}, {"tags": ["python", "function", "parameter-passing"], "comments": [{"owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "edited": false, "score": 0, "creation_date": 1446680740, "post_id": 33533646, "comment_id": 54849917, "body": "Generally, I would not recommend writing such versatile functions. I still do it myself, but it gets me into trouble sometimes. You should just be prepared to structure the rest of your code in a way that complies with a function that takes a tuple/list of two numbers or with a function that takes two arguments. This will force the rest of your code to be standardized and therefore easier to follow."}], "answers": [{"tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1446678084, "creation_date": 1446678084, "answer_id": 33533714, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of/33533714#33533714", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>If your function takes a specific number of arguments, then the most pythonic way to do this is to <strong>not</strong> do it. Rather if the user has a tuple with the arguments, you make them unpack them when they call the function. E.g.</p>\n\n<pre><code>def add(a, b):\n   return a + b\n</code></pre>\n\n<p>Then the caller can do</p>\n\n<pre><code>add(1,2)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>t = (1,2)\nadd(*t)\n</code></pre>\n\n<p>The only time you want to accept either a sequence of params or individual params is when you can have any arbitrary (non-zero) number of arguments (e.g. the <code>max</code> and <code>min</code> builtin functions) in which case you'd just use <code>*args</code></p>\n"}, {"tags": [], "owner": {"reputation": 7622, "user_id": 4752656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZLby.png?s=128&g=1", "display_name": "BlivetWidget", "link": "https://stackoverflow.com/users/4752656/blivetwidget"}, "is_accepted": false, "score": 1, "last_activity_date": 1446678154, "creation_date": 1446678154, "answer_id": 33533729, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of/33533729#33533729", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>If you can only take a finite number of arguments, it makes more sense to ask for those specifically.  If you can accept an arbitrary number of arguments, then the <code>*args</code> paradigm works well if you loop through it.  Mixing and matching those two aren't very elegant.</p>\n\n<pre><code>def add(*args):\n    total = 0\n    for i in args:\n        total += i\n    return total\n\n&gt;&gt;&gt; add(1, 2, 3)\n6\n</code></pre>\n\n<p>(I know we could just use <code>sum()</code> there, but I'm trying to make it look a bit more general)</p>\n"}, {"comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1446678834, "post_id": 33533736, "comment_id": 54849256, "body": "I think you meant <code>is not</code> there, rather than <code>=</code> (which is a syntax error)."}], "tags": [], "owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "is_accepted": false, "score": 3, "last_activity_date": 1446679241, "last_edit_date": 1446679241, "creation_date": 1446678172, "answer_id": 33533736, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of/33533736#33533736", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>I dont know if this is the most \"pythonic\" way but it will do what you want:</p>\n\n<pre><code>def add(a, b=None):\n    return a+b if b is not None else sum(a)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": false, "score": 1, "last_activity_date": 1446679502, "creation_date": 1446679502, "answer_id": 33534028, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of/33534028#33534028", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>In the spirit of python duck typing, if you see 1 argument, assume its something that expands to 2 arguments. If its then 2, assume its two things that add together. If it violates your rules, raise an exception like python would do on a function call.</p>\n\n<pre><code>def add(*args):\n    if len(args) == 1:\n        args = args[0]\n    if len(args) != 2:\n        raise TypeError(\"add takes 2 arguments or a tuple of 2 arguments\")\n    return args[0] + args[1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 970, "user_id": 3622232, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2390a7d67be15222432449603c3bcfd6?s=128&d=identicon&r=PG&f=1", "display_name": "uzumaki", "link": "https://stackoverflow.com/users/3622232/uzumaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1464582983, "creation_date": 1464582983, "answer_id": 37517691, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of/37517691#37517691", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>A decorator would be best suited for this job.</p>\n\n<pre><code>from functools import wraps\n\ndef tupled_arguments(f):\n    @wraps(f)  # keeps name, docstring etc. of f\n    def accepts_tuple(tup, *args):\n        if not args:  # only one argument given\n            return f(*tup)\n        return f(tup, *args)\n    return accepts_tuple\n\n@tupled_arguments\ndef add(a, b):\n    return a + b\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5037959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qXvjQ.png?s=128&g=1", "display_name": "The Turtle", "link": "https://stackoverflow.com/users/5037959/the-turtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 0, "accepted_answer_id": 33533714, "answer_count": 5, "score": 2, "last_activity_date": 1464582983, "creation_date": 1446677729, "question_id": 33533646, "link": "https://stackoverflow.com/questions/33533646/most-pythonic-way-to-write-a-function-to-either-pass-in-arguments-or-a-tuple-of", "title": "Most pythonic way to write a function to either pass in arguments or a tuple of arguments", "body": "<p>What is a most pythonic way to write a function to either pass in arguments or a tuple/list of arguments?</p>\n\n<p>For example, a function <code>add</code> could either take in an argument of <code>add(1, 2)</code> or <code>add((1, 2))</code> and both output <code>3</code>.</p>\n\n<p>What I have so far: (it works, but does not look nice)</p>\n\n<pre><code>def add(*args):\n    if len(args) == 1:\n        return (args[0][0] + args[0][1])\n    if len(args) == 2:\n        return args[0] + args[1]\n    else:\n        print \"error: add takes in one or two arguments\"\n</code></pre>\n\n<p>What I don't like about it is:</p>\n\n<ol>\n<li>I have to print the error about passing in one or two arguments</li>\n<li>The <code>args[0][0]</code> looks very unreadable</li>\n<li>This way, it is hard to tell what the arguments passed in represent (they don't have names)</li>\n</ol>\n"}, {"tags": ["python", "return"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1446677883, "post_id": 33533644, "comment_id": 54848920, "body": "Do you mean <code>return false</code> or <code>return False</code>? Also -- how can <code>data</code> be None? It seems like you either return something or return False"}, {"owner": {"reputation": 1389, "user_id": 5438896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/791f5034decb47f407cc8eb5207c9e0b?s=128&d=identicon&r=PG&f=1", "display_name": "John Kaff", "link": "https://stackoverflow.com/users/5438896/john-kaff"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1446678211, "post_id": 33533644, "comment_id": 54849042, "body": "@JohnColeman None will be rturned if for some reaosn postcall timeout and there is no data there"}, {"owner": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "edited": false, "score": 0, "creation_date": 1446678381, "post_id": 33533644, "comment_id": 54849109, "body": "@JohnKaff if doPost() returns None, then the ifs will fail with AttributeErrors (since None will not have a result attribute)"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "edited": false, "score": 0, "creation_date": 1446678467, "post_id": 33533644, "comment_id": 54849136, "body": "@Sebastian My thought exactly -- <code>data</code> is being <i>used</i> -- it can&#39;t be None"}, {"owner": {"reputation": 1389, "user_id": 5438896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/791f5034decb47f407cc8eb5207c9e0b?s=128&d=identicon&r=PG&f=1", "display_name": "John Kaff", "link": "https://stackoverflow.com/users/5438896/john-kaff"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1446678561, "post_id": 33533644, "comment_id": 54849170, "body": "@JohnColeman i will be using .d.get() so that i don&#39;t get error . but it may also happen that result is something other than success or fail .Won&#39;t happen but in some cases"}], "answers": [{"comments": [{"owner": {"reputation": 1389, "user_id": 5438896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/791f5034decb47f407cc8eb5207c9e0b?s=128&d=identicon&r=PG&f=1", "display_name": "John Kaff", "link": "https://stackoverflow.com/users/5438896/john-kaff"}, "edited": false, "score": 0, "creation_date": 1446678252, "post_id": 33533700, "comment_id": 54849059, "body": "Whats difference using if but not elif ."}, {"owner": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "reply_to_user": {"reputation": 1389, "user_id": 5438896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/791f5034decb47f407cc8eb5207c9e0b?s=128&d=identicon&r=PG&f=1", "display_name": "John Kaff", "link": "https://stackoverflow.com/users/5438896/john-kaff"}, "edited": false, "score": 1, "creation_date": 1446678520, "post_id": 33533700, "comment_id": 54849156, "body": "@JohnKaff if you are returning in each if, then the overall behavior will be the same. However, IMHO it&#39;s better style to use elifs since they describe the reasoning in the code more closely (i.e. the fact that they are mutually exclusive outcomes)"}, {"owner": {"reputation": 924, "user_id": 1747771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d888ee34839d4b6d55ba80741ea7437d?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1747771/tom"}, "edited": false, "score": 0, "creation_date": 1446681606, "post_id": 33533700, "comment_id": 54850167, "body": "John, I wanted to clarify that the if vs. elif is irrelevant to your original question. Notice how Tigerhawk&#39;s first example is explicitly checking whether ret is None, or False, or something else. In his second example, None, False, and 0 would all be considered the same."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 3, "last_activity_date": 1446678011, "creation_date": 1446678011, "answer_id": 33533700, "question_id": 33533644, "link": "https://stackoverflow.com/questions/33533644/python-function-returning-false-and-none/33533700#33533700", "title": "Python function, returning False and None", "body": "<p>If you check for <code>None</code> and <code>False</code> explicitly, then no, they will not get combined.</p>\n\n<pre><code>if ret is None: # entered only on None\n    pass\nelif ret == False: # entered only on False or 0\n    pass\nelse:\n    pass\n</code></pre>\n\n<p>If you just checked for truthy/falsey values, they would get combined:</p>\n\n<pre><code>if ret:\n    pass\nelse: # entered on None or False\n    pass\n</code></pre>\n"}], "owner": {"reputation": 1389, "user_id": 5438896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/791f5034decb47f407cc8eb5207c9e0b?s=128&d=identicon&r=PG&f=1", "display_name": "John Kaff", "link": "https://stackoverflow.com/users/5438896/john-kaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446678011, "creation_date": 1446677726, "question_id": 33533644, "link": "https://stackoverflow.com/questions/33533644/python-function-returning-false-and-none", "title": "Python function, returning False and None", "body": "<p>I have this function</p>\n\n<pre><code>def postData():\n    data = doPOst()\n    if data.result == \"success\":\n       return data\n    if data.result == \"fail\":\n       return false\n</code></pre>\n\n<p>Then i based on return i have to do something like</p>\n\n<pre><code>if ret is None:\n   pass # 1\nif ret is False:\n   pass # 2\nelse:\n   normal\n</code></pre>\n\n<p>I want to know that will None and False get mixed</p>\n"}, {"tags": ["python", "uwsgi"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3200625, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003840465700/picture?type=large", "display_name": "Emamul Andalib", "link": "https://stackoverflow.com/users/3200625/emamul-andalib"}, "edited": false, "score": 0, "creation_date": 1446699477, "post_id": 33536933, "comment_id": 54854943, "body": "Done! But no luck. Can you give me a demo of uwsgi.conf from /etc/ini ?"}, {"owner": {"reputation": 102, "user_id": 826669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adcd5fe9b236dc1e0b23556e13d7523b?s=128&d=identicon&r=PG", "display_name": "Aniruddha Adhikary", "link": "https://stackoverflow.com/users/826669/aniruddha-adhikary"}, "reply_to_user": {"reputation": 177, "user_id": 3200625, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003840465700/picture?type=large", "display_name": "Emamul Andalib", "link": "https://stackoverflow.com/users/3200625/emamul-andalib"}, "edited": false, "score": 0, "creation_date": 1446699735, "post_id": 33536933, "comment_id": 54855036, "body": "It seems to work fine! Did you try connecting nginx? You can ignore the warnings now."}, {"owner": {"reputation": 177, "user_id": 3200625, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003840465700/picture?type=large", "display_name": "Emamul Andalib", "link": "https://stackoverflow.com/users/3200625/emamul-andalib"}, "edited": false, "score": 0, "creation_date": 1446700357, "post_id": 33536933, "comment_id": 54855239, "body": "Yes I have tried. The socket file is not creating. So 502 Bad Gateway."}, {"owner": {"reputation": 177, "user_id": 3200625, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003840465700/picture?type=large", "display_name": "Emamul Andalib", "link": "https://stackoverflow.com/users/3200625/emamul-andalib"}, "edited": false, "score": 0, "creation_date": 1446701929, "post_id": 33536933, "comment_id": 54855791, "body": "Thanks bro. Problem solved. It&#39;s elementary OS pantheon problem. I have tried on cloud. I am success with that. Now I have to fix my local. Thanks again"}], "tags": [], "owner": {"reputation": 102, "user_id": 826669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adcd5fe9b236dc1e0b23556e13d7523b?s=128&d=identicon&r=PG", "display_name": "Aniruddha Adhikary", "link": "https://stackoverflow.com/users/826669/aniruddha-adhikary"}, "is_accepted": true, "score": 0, "last_activity_date": 1446699719, "last_edit_date": 1446699719, "creation_date": 1446699092, "answer_id": 33536933, "question_id": 33533580, "link": "https://stackoverflow.com/questions/33533580/uwsgi-not-running-django-project/33536933#33536933", "title": "UWSGI not running Django project", "body": "<p>It seems to work fine! Did you try connecting nginx? You can ignore the warnings now.</p>\n"}], "owner": {"reputation": 177, "user_id": 3200625, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003840465700/picture?type=large", "display_name": "Emamul Andalib", "link": "https://stackoverflow.com/users/3200625/emamul-andalib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2278, "favorite_count": 0, "accepted_answer_id": 33536933, "answer_count": 1, "score": 0, "last_activity_date": 1446699719, "creation_date": 1446677395, "last_edit_date": 1446677697, "question_id": 33533580, "link": "https://stackoverflow.com/questions/33533580/uwsgi-not-running-django-project", "title": "UWSGI not running Django project", "body": "<p>I am trying to run this code </p>\n\n<blockquote>\n  <p>uwsgi --emperor /etc/uwsgi/vassals --uid www-data --gid www-data</p>\n</blockquote>\n\n<p>I am following <a href=\"http://uwsgi-docs.readthedocs.org/en/latest/tutorials/Django_and_nginx.html\" rel=\"nofollow\">this tutorial.</a> But I am getting the below output.</p>\n\n<pre><code>*** Starting uWSGI 2.0.11.2 (64bit) on [Thu Nov  5 04:42:12 2015] ***\ncompiled with version: 4.8.4 on 04 November 2015 16:32:43\nos: Linux-3.16.0-52-generic #71~14.04.1-Ubuntu SMP Fri Oct 23 17:24:53 UTC 2015\nnodename: myproject\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 2\ncurrent working directory: /var/www/myproject\ndetected binary path: /usr/local/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\nsetgid() to 33\nsetuid() to 33\n*** WARNING: you are running uWSGI without its master process manager ***\nyour processes number limit is 15305\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\n*** starting uWSGI Emperor ***\n</code></pre>\n\n<p>This is my .ini file</p>\n\n<pre><code>plugins = python\nchdir           = /var/www/myproject/\nmodule          = myproject.wsgi:application\nhome            = /var/www/\nmaster          = true\nprocesses       = 10\nsocket          = /var/www/myproject/uwsgi.sock\nchmod-socket    = 666\nvacuum          = true\n</code></pre>\n\n<p>My code is working with this </p>\n\n<pre><code>uwsgi --ini myproject.ini\n</code></pre>\n\n<p>Please help me to solve this puzzle thank you.</p>\n"}, {"tags": ["python", "simplexmlrpcserver"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1446678920, "post_id": 33533578, "comment_id": 54849282, "body": "Aside: Thanks for including a complete, concise <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 311467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7004de662bb463a494b22742be2dc76c?s=128&d=identicon&r=PG", "display_name": "thechao", "link": "https://stackoverflow.com/users/311467/thechao"}, "edited": false, "score": 0, "creation_date": 1446685474, "post_id": 33533874, "comment_id": 54851295, "body": "You are correct, but it isn&#39;t clear to me from the python documents <i>why</i> you&#39;re correct---would you care to elaborate? Thanks! Is it due to the &#39;eval&#39; part of <code>input()</code>?"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1446678802, "creation_date": 1446678802, "answer_id": 33533874, "question_id": 33533578, "link": "https://stackoverflow.com/questions/33533578/python-input-interfering-with-simplexmlrpcserver/33533874#33533874", "title": "Python input interfering with SimpleXMLRPCServer", "body": "<p>You are using <a href=\"https://docs.python.org/2/library/functions.html#input\" rel=\"nofollow\"><code>input()</code></a> where you ought to use <a href=\"https://docs.python.org/2/library/functions.html#raw_input\" rel=\"nofollow\"><code>raw_input()</code></a>. Try this:</p>\n\n<pre><code>return raw_input(\"Allow? \").lower() in ['y', 'yes']\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 311467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7004de662bb463a494b22742be2dc76c?s=128&d=identicon&r=PG", "display_name": "thechao", "link": "https://stackoverflow.com/users/311467/thechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 33533874, "answer_count": 1, "score": 1, "last_activity_date": 1446678802, "creation_date": 1446677384, "last_edit_date": 1495540317, "question_id": 33533578, "link": "https://stackoverflow.com/questions/33533578/python-input-interfering-with-simplexmlrpcserver", "title": "Python input interfering with SimpleXMLRPCServer", "body": "<p>I have a server along these lines:</p>\n\n<pre><code>from SimpleXMLRPCServer import SimpleXMLRPCServer\ndef ack(msg):\n    return input(\"Allow? \").lower() in ['y', 'yes']\nserver = SimpleXMLRPCServer((\"localhost\", 8080))\nserver.register_function(ack, \"ack\")\nserver.serve_forever()\n</code></pre>\n\n<p>And a client along these lines:</p>\n\n<pre><code>import xmlrpclib\nproxy = xmlrpclib.ServerProxy(\"http://localhost:8080\")\n\nwith open(myfile) as mfd:\n    for line in mfd.readlines():\n        if proxy.ack(line):\n            print line\n</code></pre>\n\n<p>This results in a fault being sent to the client. The fault code &amp; string are:</p>\n\n<pre><code>1\n&lt;type 'exceptions.NameError'&gt;:name 'y' is not defined\n</code></pre>\n\n<p>My assumption is the consumption of <code>input</code> over on the server side is killing the POST XML-RPC goodness.</p>\n\n<p>I'd prefer not to have to code up some method with <a href=\"https://stackoverflow.com/questions/29262766/client-server-role-reversal-with-simplexmlrpcserver-in-python\">two clients and a server</a>\u2014I kind of like the simple 1:1 setup I have going.</p>\n\n<p>Really, I'm open to any alternate (python) solution.</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "is_accepted": false, "score": 1, "last_activity_date": 1446681343, "last_edit_date": 1446681343, "creation_date": 1446680891, "answer_id": 33534271, "question_id": 33533523, "link": "https://stackoverflow.com/questions/33533523/getting-values-from-generic-foreign-key-in-django/33534271#33534271", "title": "Getting values from generic foreign key in Django", "body": "<p>According to the docs for <a href=\"https://docs.djangoproject.com/en/1.8/ref/contrib/contenttypes/#django.contrib.contenttypes.fields.GenericForeignKey\" rel=\"nofollow\">the contenttypes framework</a>:</p>\n\n<blockquote>\n  <p>Due to the way <code>GenericForeignKey</code> is implemented, you cannot use such fields directly with filters (<code>filter()</code> and <code>exclude()</code>, for example) via the database API.</p>\n</blockquote>\n\n<p>Since <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/aggregation/#values\" rel=\"nofollow\"><code>values()</code></a> is a part of this API and is listed just two sections below <code>filter()</code>/<code>exclude()</code> in the docs for <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/aggregation/#aggregations-and-other-queryset-clauses\" rel=\"nofollow\">Aggregations and other QuerySet clauses</a>, my guess is that is why your approach fails.</p>\n\n<p>I would recommend this instead:</p>\n\n<pre><code>status_list = Status.objects.all()\nstatuses = [{'request__name': status.request.name} for status in status_list]\n</code></pre>\n\n<p>Of course, the dict keys in the  list comprehension can be whatever you'd like. I left them as <code>'request__name'</code>, since that is what you would've gotten if your approach had worked properly.</p>\n"}, {"comments": [{"owner": {"reputation": 1694, "user_id": 2282638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/mMfpw.jpg?s=128&g=1", "display_name": "Sandeep Balagopal", "link": "https://stackoverflow.com/users/2282638/sandeep-balagopal"}, "edited": false, "score": 0, "creation_date": 1569054478, "post_id": 33571422, "comment_id": 102478111, "body": "statuses = Status.objects.all().values(&#39;request__name&#39;) is returning other objects too, as None."}], "tags": [], "owner": {"reputation": 440, "user_id": 1470196, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d9c694e2ab1355a2bf0c204a04be1e0d?s=128&d=identicon&r=PG", "display_name": "mingle", "link": "https://stackoverflow.com/users/1470196/mingle"}, "is_accepted": false, "score": 2, "last_activity_date": 1469819008, "last_edit_date": 1469819008, "creation_date": 1446827667, "answer_id": 33571422, "question_id": 33533523, "link": "https://stackoverflow.com/questions/33533523/getting-values-from-generic-foreign-key-in-django/33571422#33571422", "title": "Getting values from generic foreign key in Django", "body": "<p>I figured it out.</p>\n\n<p>You must define your object with names like this:</p>\n\n<pre><code>class Status(BaseRequestStatus):\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = GenericForeignKey('content_type', 'object_id')\n    ... more data\n</code></pre>\n\n<p>Then in the object you would like to filter on you must create a reverse generic relationship:</p>\n\n<pre><code>class Request(models.Model):\n    statuses = GenericRelation(Status, related_query_name='request')\n    ... other data\n</code></pre>\n\n<p>Then finally you can do fun stuff like</p>\n\n<pre><code>statuses = Status.objects.all().values('request__name')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Status.objects.filter(request__name__contains=\"stack overflow\")\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 1470196, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d9c694e2ab1355a2bf0c204a04be1e0d?s=128&d=identicon&r=PG", "display_name": "mingle", "link": "https://stackoverflow.com/users/1470196/mingle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1469819008, "creation_date": 1446677117, "last_edit_date": 1469817813, "question_id": 33533523, "link": "https://stackoverflow.com/questions/33533523/getting-values-from-generic-foreign-key-in-django", "title": "Getting values from generic foreign key in Django", "body": "<p>I have a model defined with a generic foreign key like this:</p>\n\n<pre><code>class Status(models.Model):\n    request_type = models.ForeignKey(ContentType)\n    request_id = models.PositiveIntegerField()\n    request = GenericForeignKey('request_type', 'request_id')\n</code></pre>\n\n<p>When I grab the relations with a normal queryset it works fine.</p>\n\n<pre><code>statuses = Status.objects.all()\nfor status in statuses:\n    print status.request.name\n</code></pre>\n\n<p>This prints all the names normally.</p>\n\n<p>However I am using Django eztables which relies on grabbing the values like</p>\n\n<pre><code>statuses = Status.objects.all().values('request__name')\n</code></pre>\n\n<p>However when I try this I get:</p>\n\n<pre><code>FieldError: Cannot resolve keyword 'request' into field. Choices are: request_id, request_type, request_type_id\n</code></pre>\n\n<p>Is there a way to achieve this in Django?</p>\n"}, {"tags": ["javascript", "python", "flask", "wtforms"], "comments": [{"owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "edited": false, "score": 0, "creation_date": 1446699796, "post_id": 33533432, "comment_id": 54855062, "body": "This looks like a duplicate of the above question - if it doesn&#39;t answer your question in its entirety, just edit your question and ping me here by @mentioning me in the comments and I&#39;ll vote to re-open.  Welcome to Stack Overflow!"}], "owner": {"reputation": 91, "user_id": 5420807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pxIbgAeHdTQ/AAAAAAAAAAI/AAAAAAAAADI/fFkSyr0Vhg8/photo.jpg?sz=128", "display_name": "JRCPython", "link": "https://stackoverflow.com/users/5420807/jrcpython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "closed_date": 1446699707, "answer_count": 0, "score": 1, "last_activity_date": 1446736414, "creation_date": 1446676756, "last_edit_date": 1446736414, "question_id": 33533432, "link": "https://stackoverflow.com/questions/33533432/flask-wtforms-with-javascript-forms", "closed_reason": "Duplicate", "title": "Flask WTForms with JavaScript Forms", "body": "<p>General question on how those working with Flask and WTForms handle dynamic form creation normally done in javascript  I did see some of the dynamic form examples in the WTForms documentation but this seems to focus on iterating on back end data to present a dynamic number of fields.  Here is what I am wondering how to achieve:</p>\n\n<ul>\n<li>Simple form -- name,address,city,state,zip.  Typically I see a javascript that has a + sign that dynamically adds a set of fields for each person you want to fill out fields for.  Then when done you submit.  This is all done client-side.  </li>\n</ul>\n\n<p>@Sean Viera\nNow I understand the advantages of server-side form creation/validation but not sure how I can achieve a similar affect.  With javascript I look at the DOM event for the + being clicked and then render another set of fields.  Not sure how I can achieve similar with WTForms?</p>\n\n<p>Is this possible?  Or is there another approach (write the form in javascript and then validate the fields on the server-side when they are submitted..)</p>\n\n<p>Thank you for pointing me to the other article -- it does help, but I could use a little more basic description as I think the poster was a few steps ahead of me.</p>\n\n<p>So - it appears I have to use FieldList.  This is my basic understanding but I think I can use a little bit more specific guidance if it wouldn't be too much trouble:</p>\n\n<ol>\n<li>Create a form with ALL of your potential fields</li>\n<li>Create another form referencing the first Form via the FieldList function</li>\n<li>In Jinja2 somehow render</li>\n<li>On the client side write a script that iterates through the form based on user input</li>\n</ol>\n\n<p>I'm a bit confused on 3/4.  Is it possible to post a simplified pseudo-code example?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "lda", "apache-spark-mllib"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "edited": false, "score": 0, "creation_date": 1446679721, "post_id": 33533885, "comment_id": 54849537, "body": "So I should update my Spark to 1.5.0? How do I do that? I&#39;m running it on an EC2 by following these instructions: <a href=\"https://d396qusza40orc.cloudfront.net/cloudapplications/tutorials/week1/W1_AWS%20Tutorial.pdf\" rel=\"nofollow noreferrer\">d396qusza40orc.cloudfront.net/cloudapplications/tutorials/we&zwnj;&#8203;ek1/&hellip;</a> and <a href=\"https://d396qusza40orc.cloudfront.net/cloudapplications/tutorials/week2/W2_SparkMR%20Tutorial.pdf\" rel=\"nofollow noreferrer\">d396qusza40orc.cloudfront.net/cloudapplications/tutorials/we&zwnj;&#8203;ek2/&hellip;</a>"}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "reply_to_user": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "edited": false, "score": 0, "creation_date": 1446680825, "post_id": 33533885, "comment_id": 54849942, "body": "If you want to use LDA with PySpark yes, but to be honest Python interface is rather limited. I wouldn&#39;t bother with it for now."}, {"owner": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "edited": false, "score": 0, "creation_date": 1446689389, "post_id": 33533885, "comment_id": 54852278, "body": "Hmm ok thanks for the information. I should use Java then? Can LDA work in Spark 1.3.1 for Java?"}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "reply_to_user": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "edited": false, "score": 0, "creation_date": 1446689975, "post_id": 33533885, "comment_id": 54852415, "body": "Scala (or Java) if you want to use 1.3 but honestly if all you want is learn/test I would recommend 1.5, In standalone mode Spark requires very little configuration to work on small or medium datasets."}, {"owner": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "edited": false, "score": 0, "creation_date": 1446690538, "post_id": 33533885, "comment_id": 54852560, "body": "Actually I need to analyze a quite large data set, which is why I had to switch over to Spark. I guess with Spark 1.3 I&#39;m going to switch to Java."}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 1, "last_activity_date": 1446678844, "creation_date": 1446678844, "answer_id": 33533885, "question_id": 33533429, "link": "https://stackoverflow.com/questions/33533429/cannot-import-name-lda-mllib-in-spark/33533885#33533885", "title": "Cannot import name LDA MLlib in Spark", "body": "<p>PySpark wrapper for LDA has been introduced in Spark 1.5.0. Assuming your installation hasn't been corrupted you probably use Spark &lt;= 1.4.x.</p>\n"}], "owner": {"reputation": 303, "user_id": 1569341, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af6917404b23436da64d26dabdc14cb?s=128&d=identicon&r=PG", "display_name": "user1569341", "link": "https://stackoverflow.com/users/1569341/user1569341"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 33533885, "answer_count": 1, "score": 1, "last_activity_date": 1461580523, "creation_date": 1446676723, "last_edit_date": 1461580523, "question_id": 33533429, "link": "https://stackoverflow.com/questions/33533429/cannot-import-name-lda-mllib-in-spark", "title": "Cannot import name LDA MLlib in Spark", "body": "<p>I'm trying to implement LDA using Spark and got this error. I'm totally new to Spark, so any help is appreciated.</p>\n\n<pre><code>[root@sandbox ~]# spark-submit ./lda.py\nTraceback (most recent call last):\n  File \"/root/./lda.py\", line 3, in &lt;module&gt;\n    from pyspark.mllib.clustering import LDA, LDAModel\nImportError: cannot import name LDA\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>from pyspark.sql import SQLContext\nfrom pyspark import SparkContext\nfrom pyspark.mllib.clustering import LDA, LDAModel\nfrom pyspark.mllib.linalg import Vectors\nimport numpy\nsc = SparkContext(appName=\"PythonLDA\")\ndata = sc.textFile(\"/tutorial/input/askreddit20150801.txt\")\nparsedData = data.map(lambda line: Vectors.dense([float(x) for x in line.strip().split(' ')]))\n# Index documents with unique IDs\ncorpus = parsedData.zipWithIndex().map(lambda x: [x[1], x[0]]).cache()\n\n# Cluster the documents into three topics using LDA\nldaModel = LDA.train(corpus, k=3)\n\n# Output topics. Each is a distribution over words (matching word count vectors)\nprint(\"Learned topics (as distributions over vocab of \" + str(ldaModel.vocabSize()) + \" words):\")\ntopics = ldaModel.topicsMatrix()\nfor topic in range(3):\n    print(\"Topic \" + str(topic) + \":\")\n    for word in range(0, ldaModel.vocabSize()):\n        print(\" \" + str(topics[word][topic]))\n\n# Save and load model\nmodel.save(sc, \"myModelPath\")\nsameModel = LDAModel.load(sc, \"myModelPath\")\n</code></pre>\n\n<p>When I tried to install pyspark.mllib.clustering:</p>\n\n<pre><code>[root@sandbox ~]# pip install spark.mllib.clustering\nCollecting spark.mllib.clustering\n/usr/lib/python2.6/site-packages/pip/_vendor/requests/packages/urllib3/util/ssl_.py:90: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n  Could not find a version that satisfies the requirement spark.mllib.clustering (from versions: )\nNo matching distribution found for spark.mllib.clustering\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 2, "creation_date": 1446676715, "post_id": 33533393, "comment_id": 54848462, "body": "If thats SVG path, there are SVG tools for python that I would use for this..."}, {"owner": {"reputation": 26700, "user_id": 353852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da9b13b377af5b704c14d2928037fd64?s=128&d=identicon&r=PG", "display_name": "krock", "link": "https://stackoverflow.com/users/353852/krock"}, "edited": false, "score": 1, "creation_date": 1446676810, "post_id": 33533393, "comment_id": 54848514, "body": "<code>pathD</code> is a string then (so the value should be surrounded by quotes to be valid python syntax)?  you say it is a list, but perform a regex on it like it is a string."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5526798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c36098eb2bd9daa1b13e5a64c2f370?s=128&d=identicon&r=PG&f=1", "display_name": "Blikpils", "link": "https://stackoverflow.com/users/5526798/blikpils"}, "edited": false, "score": 0, "creation_date": 1446677622, "post_id": 33533570, "comment_id": 54848829, "body": "Thank you! That is almost what i want but how come it surpasses everything between the &quot;c&quot; and the &quot;s&quot;?"}, {"owner": {"reputation": 4384, "user_id": 5171169, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/903cb5f31300e0ce8b9843fa4e273b41?s=128&d=identicon&r=PG&f=1", "display_name": "LetzerWille", "link": "https://stackoverflow.com/users/5171169/letzerwille"}, "reply_to_user": {"reputation": 25, "user_id": 5526798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c36098eb2bd9daa1b13e5a64c2f370?s=128&d=identicon&r=PG&f=1", "display_name": "Blikpils", "link": "https://stackoverflow.com/users/5526798/blikpils"}, "edited": false, "score": 0, "creation_date": 1446677805, "post_id": 33533570, "comment_id": 54848891, "body": "@Blikpils fixed. Update now"}, {"owner": {"reputation": 1891, "user_id": 4721115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jBli3.png?s=128&g=1", "display_name": "Pythonic", "link": "https://stackoverflow.com/users/4721115/pythonic"}, "edited": false, "score": 0, "creation_date": 1546083973, "post_id": 33533570, "comment_id": 94775998, "body": "How do I modify the answer above to also keep symbols like &#39;$&#39;?"}, {"owner": {"reputation": 1891, "user_id": 4721115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jBli3.png?s=128&g=1", "display_name": "Pythonic", "link": "https://stackoverflow.com/users/4721115/pythonic"}, "edited": false, "score": 0, "creation_date": 1546085136, "post_id": 33533570, "comment_id": 94776258, "body": "Answering my own question above, check this SO post: <a href=\"https://stackoverflow.com/questions/53969284/split-string-into-letters-and-numbers-keep-symbols/53969322\" title=\"split string into letters and numbers keep symbols\">stackoverflow.com/questions/53969284/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4384, "user_id": 5171169, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/903cb5f31300e0ce8b9843fa4e273b41?s=128&d=identicon&r=PG&f=1", "display_name": "LetzerWille", "link": "https://stackoverflow.com/users/5171169/letzerwille"}, "is_accepted": true, "score": 3, "last_activity_date": 1446677987, "last_edit_date": 1446677987, "creation_date": 1446677337, "answer_id": 33533570, "question_id": 33533393, "link": "https://stackoverflow.com/questions/33533393/split-string-into-letters-and-numbers/33533570#33533570", "title": "Split string into letters and numbers", "body": "<pre><code>import re\n\npathD = \"M30,50.1c0,0,25,100,42,75s10.3-63.2,36.1-44.5s33.5,48.9,33.5,48.9l24.5-26.3\"\n\nprint(re.findall(r'[A-Za-z]|-?\\d+\\.\\d+|\\d+',pathD))\n\n['M', '30', '50.1', 'c', '0', '0', '25', '100', '42', '75', 's', '10.3', '-63.2', '36.1', '-44.5', 's', '33.5', '48.9', '33.5', '48.9', 'l', '24.5', '-26.3']\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5526798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c36098eb2bd9daa1b13e5a64c2f370?s=128&d=identicon&r=PG&f=1", "display_name": "Blikpils", "link": "https://stackoverflow.com/users/5526798/blikpils"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2504, "favorite_count": 1, "accepted_answer_id": 33533570, "answer_count": 1, "score": 2, "last_activity_date": 1446677987, "creation_date": 1446676510, "last_edit_date": 1446676948, "question_id": 33533393, "link": "https://stackoverflow.com/questions/33533393/split-string-into-letters-and-numbers", "title": "Split string into letters and numbers", "body": "<p>I have a *string of letters and (negative)numbers and want to separate them into a array with python. </p>\n\n<pre><code>pathD = \"M30,50.1c0,0,25,100,42,75s10.3-63.2,36.1-44.5s33.5,48.9,33.5,48.9l24.5-26.3\"\n\nsplitS = re.split('(\\d+)',pathD)\n</code></pre>\n\n<p>this does not work because it splits the dots and the dashes in one lined mess :</p>\n\n<pre><code>['M', '30', ',', '50', '.', '1', 'c', '0', ',', '0', ',', '25', ',', '100', ',', '42', ',', '75', 's', '10', '.', '3', '-', '63', '.', '2', ',', '36', '.', '1', '-', '44', '.', '5', 's', '33', '.', '5', ',', '48', '.', '9', ',', '33', '.', '5', ',', '48', '.', '9', 'l', '24', '.', '5', '-', '26', '.', '3', '']\n</code></pre>\n\n<p>i would like to see something like this:</p>\n\n<pre><code> [M, 30, 50.1, c, 0, 0, 25, 100, 42, 75, s, 10.3, -63.2, 36.1, -44.5, s, 33.5, 48.9, 33.5, 48.9, l, 24.5, -26.3]\n</code></pre>\n\n<p>I am not sure if i am on the right path with this one or should approach it differently. </p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1446680461, "post_id": 33533380, "comment_id": 54849797, "body": "Perhaps could ask at stackoverflow-Portuguese, since the messages are localized on that language. This makes the question a bit too localized for this site since few people here understands Portuguese."}, {"owner": {"reputation": 1934, "user_id": 5472966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A2Ver.png?s=128&g=1", "display_name": "McGlothlin", "link": "https://stackoverflow.com/users/5472966/mcglothlin"}, "edited": false, "score": 1, "creation_date": 1446684085, "post_id": 33533380, "comment_id": 54850866, "body": "Google Translate botched that error message. Could you translate for us?"}, {"owner": {"reputation": 184, "user_id": 4904472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0476f8b1ca09635bb87f6337c80c07?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Henrique Peixoto", "link": "https://stackoverflow.com/users/4904472/bruno-henrique-peixoto"}, "edited": false, "score": 0, "creation_date": 1446753318, "post_id": 33533380, "comment_id": 54886651, "body": "Sorry. The right translation is &quot;The thread in execution is corrupted&quot;."}], "owner": {"reputation": 184, "user_id": 4904472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0476f8b1ca09635bb87f6337c80c07?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Henrique Peixoto", "link": "https://stackoverflow.com/users/4904472/bruno-henrique-peixoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446690511, "creation_date": 1446676482, "last_edit_date": 1446690511, "question_id": 33533380, "link": "https://stackoverflow.com/questions/33533380/dll-load-failed-error", "title": "DLL load failed error", "body": "<p>I'm trying to run simple code to test the plot library. For some reason I'm seeing the following error: </p>\n\n<pre><code>Traceback (most recent call last):\n\n    File \"POCplot2.py\", line 1, in &lt;module&gt;\n\n    from numpy import *\n\n    File \"C:\\Users\\BPeixoto\\Miniconda3\\lib\\site-packages\\numpy\\__init__.py\", line 172, in &lt;module&gt;\n    from . import add_newdocs\n    File \"C:\\Users\\BPeixoto\\Miniconda3\\lib\\site-packages\\numpy\\add_newdocs.py\", line 13, in &lt;module&gt;\n    from numpy.lib import add_newdoc\n\n    File \"C:\\Users\\BPeixoto\\Miniconda3\\lib\\site-packages\\numpy\\lib\\__init__.py\", line 8, in &lt;module&gt;\n    from .type_check import *\n\n    File \"C:\\Users\\BPeixoto\\Miniconda3\\lib\\site-packages\\numpy\\lib\\type_check.py\", line 11, in &lt;module&gt;\n    import numpy.core.numeric as _nx\n\n    File \"C:\\Users\\BPeixoto\\Miniconda3\\lib\\site-packages\\numpy\\core\\__init__.py\", line 6, in &lt;module&gt;\n    from . import multiarray\n\n    ImportError: DLL load failed: A pilha de ativa\u00e7\u00e3o do contexto de ativa\u00e7\u00e3o para o\n     thread em execu\u00e7\u00e3o est\u00e1 corrompida.\n</code></pre>\n\n<p>At the moment I have no clue how to fix it. Could you help me to solve it?</p>\n\n<p>Best regards</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "svm"], "answers": [{"tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": false, "score": 1, "last_activity_date": 1446929536, "last_edit_date": 1446929536, "creation_date": 1446914396, "answer_id": 33585117, "question_id": 33533295, "link": "https://stackoverflow.com/questions/33533295/refitting-svm-using-scikit-learn/33585117#33585117", "title": "Refitting SVM using scikit-learn", "body": "<p>In short - no. \nScikit-learn does not support incremental training (which in scikit-learn is called <code>.partial_fit</code>) for SVMs (unless you want to use linear SVM, and train it with SGD <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html\" rel=\"nofollow\">http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html</a> ). In general it is quite complex to traing kernelized SVM in incremental fashion.</p>\n"}], "owner": {"reputation": 31, "user_id": 2000878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2278f4ac275ffb64e550714e60ea96fc?s=128&d=identicon&r=PG", "display_name": "user2000878", "link": "https://stackoverflow.com/users/2000878/user2000878"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446929536, "creation_date": 1446676096, "last_edit_date": 1446929510, "question_id": 33533295, "link": "https://stackoverflow.com/questions/33533295/refitting-svm-using-scikit-learn", "title": "Refitting SVM using scikit-learn", "body": "<p>I'm trying to implement an incremental learning algorithm based on scikit-learn and Support Vector Machines.</p>\n\n<p>But it seems like everytime I call the fit(x,y) function a new model is constructed and not added to. Is there a way to achieve this?</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>from sklearn import svm\n\nclf=svm.SVM()\nfor i in range(0,10)\nclf.fit([[0,i],[i,0]],[0,1])\n</code></pre>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["python", "multithreading", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 3389859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwI3c.png?s=128&g=1", "display_name": "s4w3d0ff", "link": "https://stackoverflow.com/users/3389859/s4w3d0ff"}, "edited": false, "score": 0, "creation_date": 1446750654, "post_id": 33533335, "comment_id": 54885111, "body": "So if I wanted to pass an &quot;argument&quot; to the thread before execution I would have to declare the variable beforehand  <code>endless_loop1.args = x </code> then <code>target=endless_loop1</code> instead of <code>target=endless_loop1(x)</code>?"}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 799, "user_id": 3389859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwI3c.png?s=128&g=1", "display_name": "s4w3d0ff", "link": "https://stackoverflow.com/users/3389859/s4w3d0ff"}, "edited": false, "score": 1, "creation_date": 1446752456, "post_id": 33533335, "comment_id": 54886142, "body": "@s4w3d0ff no, the <code>Thread</code> constructor has an <code>args</code> parameter for that, so you can just say: <code>Thread(name=&#39;t1&#39;, target=endless_loop1, args=(x,))</code>"}], "tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 6, "last_activity_date": 1446676235, "creation_date": 1446676235, "answer_id": 33533335, "question_id": 33533251, "link": "https://stackoverflow.com/questions/33533251/threading-an-endless-while-loop-in-python-2/33533335#33533335", "title": "Threading an endless while loop in Python 2", "body": "<p>You need to give <code>target=</code> a <em>callable object</em>.</p>\n\n<pre><code>target=endless_loop1()\n</code></pre>\n\n<p>Here you're <em>actually calling</em> <code>endless_loop1()</code>, so it gets executed in your main thread right away. What you want to do is:</p>\n\n<pre><code>target=endless_loop1\n</code></pre>\n\n<p>which passes your <code>Thread</code> the function object so it can call it itself.</p>\n\n<p>Also, <code>daemon</code> isn't actually an init parameter, you need to set it separately before calling <code>start</code>:</p>\n\n<pre><code>t1 = threading.Thread(name='t1', target=endless_loop1)\nt1.daemon = True\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 3389859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwI3c.png?s=128&g=1", "display_name": "s4w3d0ff", "link": "https://stackoverflow.com/users/3389859/s4w3d0ff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 1, "accepted_answer_id": 33533335, "answer_count": 1, "score": 1, "last_activity_date": 1446676235, "creation_date": 1446675896, "question_id": 33533251, "link": "https://stackoverflow.com/questions/33533251/threading-an-endless-while-loop-in-python-2", "title": "Threading an endless while loop in Python 2", "body": "<p>I'm not sure why this does not work. The thread starts as soon as it is defined and seems to not be in an actual thread... Maybe I'm missing something.</p>\n\n<pre><code>import threading\nimport time\n\ndef endless_loop1():\n    while True:\n        print('EndlessLoop1:'+str(time.time()))\n        time.sleep(2)\n\ndef endless_loop2():\n    while True:\n        print('EndlessLoop2:'+str(time.time()))\n        time.sleep(1)\n\nprint('Here1')\nt1 = threading.Thread(name='t1', target=endless_loop1(), daemon=True)\nprint('Here2')\nt2 = threading.Thread(name='t2', target=endless_loop2(), daemon=True)\nprint('Here3')\nt1.start()\nprint('Here4')\nt2.start()\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Here1\nEndlessLoop1:1446675282.8\nEndlessLoop1:1446675284.8\nEndlessLoop1:1446675286.81\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "reflection"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 3, "creation_date": 1446676261, "post_id": 33533211, "comment_id": 54848257, "body": "Short answer: no, there is not, not without extensive AST parsing and analysis of the sourcecode for the calling frame so you can guess what name was used to produce the call."}, {"owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1446676363, "post_id": 33533211, "comment_id": 54848301, "body": "@MartijnPieters, AST? Is that Abstract Syntax Tree?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1446676503, "post_id": 33533211, "comment_id": 54848357, "body": "Yes, you&#39;d have to load the source code, then analyse how the call was made and what name the callable object had. Note that you can create other references that not necessarily have a name; <code>callables = [fargs, debug], then </code>callables[0]()` uses references to function objects in a list."}, {"owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1446676669, "post_id": 33533211, "comment_id": 54848436, "body": "@MartijnPieters, As stated in start I&#39;m aiming for the simple aliasing, so if someone breaks this functionality by using something like your <code>callables</code> then they are on their own! :-)"}, {"owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1446676673, "post_id": 33533211, "comment_id": 54848438, "body": "@MartijnPieters, As I have a partial code context, can I try words from this and check if they evaluate to one of my two methods? (Using a lookup in some dict... )"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1446676786, "post_id": 33533211, "comment_id": 54848499, "body": "You could try, but it&#39;ll be fragile. Calls can span multiple physical lines, for example, I don&#39;t think your code context takes that into account."}, {"owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1446676812, "post_id": 33533211, "comment_id": 54848516, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94253/discussion-between-holroy-and-martijn-pieters\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1446806857, "last_edit_date": 1495539871, "creation_date": 1446803706, "answer_id": 33563978, "question_id": 33533211, "link": "https://stackoverflow.com/questions/33533211/unalias-an-imported-function-in-python/33563978#33563978", "title": "Unalias an imported function in Python?", "body": "<p>It turns out that finding out which alias has been defined for <code>debug_print</code> or <code>format_args</code> is rather hard, but fortunately I do have the code context and could do the reverse operation of locating which part of my code context is actually one my functions.</p>\n\n<p>The following train of thoughts leading to this solution was partly inspired by the comments made by <a href=\"https://stackoverflow.com/users/100297/martijn-pieters\">Martijn Pieters</a> related to abstract syntax trees, and partly by a hint given by <a href=\"https://stackoverflow.com/users/4374739/superbiasedman\">SuperBiasedMan</a> related to doing a <code>help(fargs)</code>:</p>\n\n<ul>\n<li><code>help(fargs)</code> actually listed the <code>format_args</code> function</li>\n<li>Within IPython, using <code>help??</code>, I found a hint that it uses <code>pydoc.help</code></li>\n<li>A source code of pydoc.py was found <a href=\"https://hg.python.org/cpython/file/25298e2d9025/Lib/pydoc.py\" rel=\"nofollow noreferrer\">here</a></li>\n<li>Found the call sequence: <em>help</em> > <em>doc</em> > <em>render_doc</em> > <em>resolve</em> > <em><code>name = getattr(thing, '__name__', None)</code></em></li>\n<li>Tried <code>getattr(fargs, '__name__', None)</code> in my test code, and it worked</li>\n<li>Tried <code>getattr('fargs', ...)</code>, and it failed</li>\n<li>After some searching found that <code>globals()['fargs']</code> did return the function object</li>\n<li>Extracted tokens from my <code>code_context</code>, and wrote some code to do the various lookups</li>\n</ul>\n\n<p>All this resulted in the following working code:</p>\n\n<pre><code>def _log_args(*args):\n    \"\"\"Uses reflection to returning passing argument code with values.\"\"\"\n\n    prev_frame = inspect.currentframe().f_back\n    func_name = prev_frame.f_code.co_name\n    code_context = inspect.getframeinfo(prev_frame.f_back).code_context[0].strip()\n\n    # Do some magic, which does work _unless_ func_name is aliased :-)\n    print('code context     : {}'.format(code_context))\n    print('func_name        : {}'.format(func_name))\n\n    # Get globals from the calling frame\n    globals_copy = prev_frame.f_back.f_globals\n\n    tokens = re.compile('[_a-zA-Z][a-zA-Z_0-9]*').findall(code_context)\n    for token in tokens:\n        print( '  Checking token : {}'.format(token))\n\n        # Check if token is found as an object in globals()        \n        code_object = globals_copy.get(token, None)\n        if not code_object:\n            continue\n\n        # Check if code_object is one of my userdefined functions\n        if inspect.isfunction(code_object):\n            code_func_name = getattr(code_object, '__name__', None)\n        else:\n            continue\n\n        # Check if expanded token is actually an alias (or equal) to func_name\n        if code_func_name == func_name:\n            func_name = token\n            break\n    else:\n        # For-loop went through all tokens, and didn't find anything\n        func_name = None\n\n    if func_name:\n        print('Calling function : {}'.format(func_name))\n    else:\n        print('Didn\\'t find a calling function?!')\n\n    return ', '.join(str(arg) for arg in args)\n</code></pre>\n\n<p>I do know that this depends upon the calling function being present in the code context, and if you break the code over several lines it would break this method. Another caveat is if someone calls the function via a list or dict. However as this is mainly for debugging purposes, and it can be documented that they shouldn't do stuff like that. </p>\n\n<p>The output is now:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>== Unaliased ==\ncode context     : test_text = format_args(a, b)\nfunc_name        : format_args\nCalling function : format_args\n('text', (12, 13))\ncode context     : debug_print(a, b)\nfunc_name        : debug_print\nCalling function : debug_print\n('text', (12, 13))\n\n== Aliased ==\ncode context     : test_text = fargs(a, b)\nfunc_name        : format_args\nCalling function : fargs\n('text', (12, 13))\ncode context     : debug(a, b)\nfunc_name        : debug_print\nCalling function : debug\n('text', (12, 13)\n</code></pre>\n\n<p>This output does now enable to proceed on my quest for making a nice <code>debug_print()</code>. Please comment (or answer), if you see improvements or flaws in this design.</p>\n"}], "owner": {"reputation": 2712, "user_id": 1548472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1Xbe4.png?s=128&g=1", "display_name": "holroy", "link": "https://stackoverflow.com/users/1548472/holroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1446806857, "creation_date": 1446675735, "last_edit_date": 1495540314, "question_id": 33533211, "link": "https://stackoverflow.com/questions/33533211/unalias-an-imported-function-in-python", "title": "Unalias an imported function in Python?", "body": "<p>In a utility function displaying both the argument and values of a calling function, I need to know the original name of an possibly aliased function imported from another module. Is this possibly for the simple case when aliasing on import?</p>\n\n<p>Here is a simplified use case, where I first present some code from the <code>utilities.py</code> module:</p>\n\n<pre><code>import inspect\n\nDEBUG_FLAG = True\n\ndef _log_args(*args):\n    \"\"\"Uses reflection to returning passing argument code with values.\"\"\"\n\n    prev_frame = inspect.currentframe().f_back\n    func_name = prev_frame.f_code.co_name\n    code_context = inspect.getframeinfo(prev_frame.f_back).code_context[0].strip()\n\n    # Do some magic, which does work _unless_ func_name is aliased :-)\n    print('code context: {}'.format(code_context))\n    print('func_name   : {}'.format(func_name))\n    return ', '.join(str(arg) for arg in args)\n\ndef format_args(*args):\n    \"\"\"Returns string with name of arguments with values.\"\"\"\n    return _log_args(args)\n\ndef debug_print(*args):\n    \"\"\"Prints name of arguments with values.\"\"\"\n    if DEBUG_FLAG:\n        print _log_args(args)\n</code></pre>\n\n<p>And here is some code accessing these functions first by original name, and then by the aliases:</p>\n\n<pre><code>from utilities import debug_print, format_args, debug_print as debug, format_args as fargs\n\ndef main():\n    a, b = \"text\", (12, 13)\n\n    print \"== Unaliased ==\"\n    test_text = format_args(a, b)\n    print test_text   # Returns \n    debug_print(a, b)\n\n    print \"\\n== Aliased ==\"\n    test_text = fargs(a, b)\n    print test_text\n    debug(a, b)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>The output from this is: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>== Unaliased ==\ncode context: test_text = format_args(a, b)\nfunc_name   : format_args\n('text', (12, 13))\ncode context: debug_print(a, b)\nfunc_name   : debug_print\n('text', (12, 13))\n\n== Aliased ==\ncode context: test_text = fargs(a, b)\nfunc_name   : format_args\n('text', (12, 13))\ncode context: debug(a, b)\nfunc_name   : debug_print\n('text', (12, 13))\n</code></pre>\n\n<p>As can be seen I've found the correct code context, and I found the name of the calling function, but alas the first reports the alias name and the latter reports the actual name. So my question is whether <em>it is possible to reverse the operation so that I can know that <code>format_args</code> has been aliased to <code>fargs</code>, and <code>debug_print</code> has been aliased to <code>debug</code>?</em> </p>\n\n<p>Some related issues, which do <em>not</em> address this reversal of aliasing:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/11547095/aliased-name-of-a-function-in-python\">Aliased name of a Function in Python</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29642822/find-name-of-dynamic-method-in-python\">Find name of dynamic method in Python</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1095543/get-name-of-calling-functions-module-in-python\">Get __name__ of calling function&#39;s module in Python</a></li>\n<li><a href=\"https://stackoverflow.com/questions/33113739/print-name-and-value-of-python-function-arguments\">Print name and value of Python function arguments</a></li>\n</ul>\n"}, {"tags": ["python", "wpf", "numpy", "visual-studio-2013"], "owner": {"reputation": 203, "user_id": 1770539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f28a4a75d7d59515ccf78e156d6f45?s=128&d=identicon&r=PG", "display_name": "jss", "link": "https://stackoverflow.com/users/1770539/jss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446817422, "creation_date": 1446675734, "last_edit_date": 1446817422, "question_id": 33533210, "link": "https://stackoverflow.com/questions/33533210/how-can-i-use-numpy-in-visual-studio-2013", "title": "How can I use numpy in Visual Studio 2013?", "body": "<p>I have VS 2013 update 5, and installed Anaconda2-2.4.0-Windows-x86_64, canopy-1.5.5-win-64, IronPython-2.7.5. \nI create a new <code>IronPyton WPF Application</code>, and tested as generated by VS, running OK.\nI added <code>Enthought Canopy 2.7 64 bits</code> and <code>IronPyton 2.7</code> as environments.\n<code>numpy</code>, <code>matplotlib</code>, etc. are shown in <code>Enthought Canopy (2.7 64 bits)</code> when expanding <em>Python Environment</em> of the project.</p>\n\n<p>After inserting the line <code>import numpy as np</code>, problem started (unabled to resolve <code>numpy</code>).</p>\n\n<p>I looked for every posts and solutions for using numpy with VS, but no one solve mine. Here is my code, mainly as generated by VS, I only added the environments and the line <code>import numpy</code>.</p>\n\n<pre><code>import wpf\n\nfrom System.Windows import Application, Window\nimport numpy as np  # inserted by me\n\nclass MyWindow(Window):\n    def __init__(self):\n        wpf.LoadComponent(self, 'WpfIpyApplication1.xaml')\n\n\nif __name__ == '__main__':\n    Application().Run(MyWindow())\n</code></pre>\n"}, {"tags": ["python", "pycharm", "pyephem"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 5350360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btINb.jpg?s=128&g=1", "display_name": "Paul Everitt", "link": "https://stackoverflow.com/users/5350360/paul-everitt"}, "is_accepted": false, "score": 0, "last_activity_date": 1446730510, "creation_date": 1446730510, "answer_id": 33545939, "question_id": 33533162, "link": "https://stackoverflow.com/questions/33533162/some-members-of-package-not-visible-pycharm/33545939#33545939", "title": "Some members of package not visible - Pycharm", "body": "<p>Does PyEphem show up when you go to Preferences -> Project -> Project Interpreter?</p>\n\n<p>If you make a Run Configuration to execute that module from the PyCharm runner (making sure the run configuration points to the project's Python interpreter), does it give an import error?</p>\n"}, {"comments": [{"owner": {"reputation": 771, "user_id": 5166143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a8f2f913a68d1ca1361d7238283add45?s=128&d=identicon&r=PG&f=1", "display_name": "DorianOlympia", "link": "https://stackoverflow.com/users/5166143/dorianolympia"}, "edited": false, "score": 0, "creation_date": 1446739945, "post_id": 33548533, "comment_id": 54878577, "body": "Thank you for the answer! I will post an issue on GitHub then :)"}], "tags": [], "owner": {"reputation": 69000, "user_id": 85360, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=128&d=identicon&r=PG", "display_name": "Brandon Rhodes", "link": "https://stackoverflow.com/users/85360/brandon-rhodes"}, "is_accepted": true, "score": 1, "last_activity_date": 1446737256, "creation_date": 1446737256, "answer_id": 33548533, "question_id": 33533162, "link": "https://stackoverflow.com/questions/33533162/some-members-of-package-not-visible-pycharm/33548533#33548533", "title": "Some members of package not visible - Pycharm", "body": "<p>The problem is that PyEphem does not list objects like Uranus literally in the text of its <code>__init__.py</code> file, but instead loads them dynamically by scanning a table inside of the C library \"libastro\" that PyEphem is a mere wrapper around. Since it cannot see the name <code>Uranus</code> anywhere in the text of the Python module, PyCharm does not know that it will be there at runtime.</p>\n\n<p>If you open an Issue on GitHub, I will get this fixed in the next version by pivoting away from the table-driven code and toward a literal list of planets!</p>\n"}], "owner": {"reputation": 771, "user_id": 5166143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a8f2f913a68d1ca1361d7238283add45?s=128&d=identicon&r=PG&f=1", "display_name": "DorianOlympia", "link": "https://stackoverflow.com/users/5166143/dorianolympia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 33548533, "answer_count": 2, "score": 1, "last_activity_date": 1446737256, "creation_date": 1446675532, "question_id": 33533162, "link": "https://stackoverflow.com/questions/33533162/some-members-of-package-not-visible-pycharm", "title": "Some members of package not visible - Pycharm", "body": "<p>I have a relative simple problem with Pycharm. It seems to ignore some members of packages such as Pygame or PyEphem. For instance, when I type ephem + dot, Pycharm shows me just a few classes and functions avaliable for this package, ignoring many classes such as Uranus (I can make an assignment x = ephem.Uranus() without any errors, but Pycharm doesnt show me any avaliable methods for x). I use standard syntax:</p>\n\n<pre><code>import ephem\n</code></pre>\n\n<p>I always work on fresh virtualenv. I have checked interpreter paths. PyEphem is obviously installed for my environment. What may cause the problem here?</p>\n"}, {"tags": ["python", "python-3.x", "pycharm", "typing", "python-3.5"], "answers": [{"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 16, "last_activity_date": 1595939726, "last_edit_date": 1595939726, "creation_date": 1446677041, "answer_id": 33533505, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/33533505#33533505", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>The name 'Position' is not avalilable at the time the class body itself is parsed. I don't know how you are using the type declarations, but Python's PEP 484 - which is what most mode should use if using these typing hints say that you can simply put the name as a string at this point:</p>\n<pre><code>def __add__(self, other: 'Position') -&gt; 'Position':\n    return Position(self.x + other.x, self.y + other.y)\n</code></pre>\n<p>Check <a href=\"https://www.python.org/dev/peps/pep-0484/#forward-references\" rel=\"nofollow noreferrer\">https://www.python.org/dev/peps/pep-0484/#forward-references</a> - tools conforming to that will know to unwrap the class name from there and make use of it.(It is always important to have in mind that the Python language itself does nothing of these annotations - they are usually meant for static-code analysis, or one could have a library/framework for type checking in run-time - but you have to explicitly set that).</p>\n<p><strong>update</strong> Also, as of Python 3.7, check <a href=\"https://www.python.org/dev/peps/pep-0563/\" rel=\"nofollow noreferrer\">pep-563</a> - as of Python 3.8 it is possible to write <code>from __future__ import annotations</code> to defer the evaluation of annotations - forward referencing classes should work straightforward.</p>\n"}, {"comments": [{"owner": {"reputation": 541, "user_id": 5350360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btINb.jpg?s=128&g=1", "display_name": "Paul Everitt", "link": "https://stackoverflow.com/users/5350360/paul-everitt"}, "edited": false, "score": 4, "creation_date": 1446730615, "post_id": 33533514, "comment_id": 54871581, "body": "Right, this is less a PyCharm issue and more a Python 3.5 PEP 484 issue. I suspect you&#39;d get the same warning if you ran it through the mypy type tool."}, {"owner": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "edited": false, "score": 55, "creation_date": 1563976289, "post_id": 33533514, "comment_id": 100879570, "body": "&gt; if you are using Python 4.0 it just works by the way, have you seen Sarah Connor? :)"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 3201, "user_id": 5986907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0521ce05a7fcb2580e4f513990a5a8c8?s=128&d=identicon&r=PG&f=1", "display_name": "joel", "link": "https://stackoverflow.com/users/5986907/joel"}, "edited": false, "score": 0, "creation_date": 1566317275, "post_id": 33533514, "comment_id": 101615383, "body": "@JoelBerkeley I just tested it and type parameters worked for me on 3.6, just don&#39;t forget to import from <code>typing</code> as any type you use must be in scope when the string is evaluated."}, {"owner": {"reputation": 3201, "user_id": 5986907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0521ce05a7fcb2580e4f513990a5a8c8?s=128&d=identicon&r=PG&f=1", "display_name": "joel", "link": "https://stackoverflow.com/users/5986907/joel"}, "edited": false, "score": 0, "creation_date": 1566320268, "post_id": 33533514, "comment_id": 101616724, "body": "ah, my mistake, i was only putting <code>&#39;&#39;</code> round the class, not the type parameters"}, {"owner": {"reputation": 733, "user_id": 5743194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7344d297f310b4819502761ed213c?s=128&d=identicon&r=PG&f=1", "display_name": "Artur", "link": "https://stackoverflow.com/users/5743194/artur"}, "edited": false, "score": 12, "creation_date": 1573128374, "post_id": 33533514, "comment_id": 103785247, "body": "Important note to anyone using <code>from __future__ import annotations</code> - this must be imported before all other imports."}, {"owner": {"reputation": 1690, "user_id": 3010334, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7976d97593c7674b528cbcad45629af8?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bull", "link": "https://stackoverflow.com/users/3010334/sam-bull"}, "edited": false, "score": 0, "creation_date": 1591541814, "post_id": 33533514, "comment_id": 110089351, "body": "This answer fixes the NameError, but produces bad behaviour. The code in the question (and therefore the answer) always returns an instance of <code>Position</code>, when it should probably return an instance of the current class (which might be a subclass). See the answer from @vbraun for type annotations when implementing this correctly."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1598363810, "post_id": 33533514, "comment_id": 112430464, "body": "According to <a href=\"https://www.python.org/dev/peps/pep-0563/#id5\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0563/#id5</a> the new annotation behaviour activates in Python 3.10, not Python 4."}, {"owner": {"reputation": 91, "user_id": 3182021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CYFvK.png?s=128&g=1", "display_name": "Damien Mattei", "link": "https://stackoverflow.com/users/3182021/damien-mattei"}, "edited": false, "score": 0, "creation_date": 1598517801, "post_id": 33533514, "comment_id": 112486740, "body": "none of those solutions works if the type is used in a decorator argument before the function declaration, i had to use a string and change the behavior of my personal overload decorator implementation."}, {"owner": {"reputation": 7892, "user_id": 3310334, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/BTb0z.jpg?s=128&g=1", "display_name": "theonlygusti", "link": "https://stackoverflow.com/users/3310334/theonlygusti"}, "edited": false, "score": 0, "creation_date": 1603011722, "post_id": 33533514, "comment_id": 113896418, "body": "You said that <code>typing</code> is one of the slowest core modules. Is it possible to use any <code>__future__</code> module (now, in Python 3.7+) to replace <code>typing</code>&#39;s &quot;subscriptable&quot; <code>List, Set</code> etc.?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 7892, "user_id": 3310334, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/BTb0z.jpg?s=128&g=1", "display_name": "theonlygusti", "link": "https://stackoverflow.com/users/3310334/theonlygusti"}, "edited": false, "score": 0, "creation_date": 1607703382, "post_id": 33533514, "comment_id": 115364118, "body": "@theonlygusti: <code>__future__</code> features aren&#39;t &quot;modules&quot;, and they&#39;re only used to enable changes in syntax that can&#39;t be fixed by modules. You seem to have missed that <code>typing</code> is already <i>much</i> faster in 3.7, no need to do anything to get the speedup aside from &quot;use 3.7 or higher&quot;. If you want to avoid the <code>typing</code> subscriptable types like <code>List</code> <i>entirely</i>, you&#39;ll need to go to 3.9, where <a href=\"https://docs.python.org/3/whatsnew/3.9.html#type-hinting-generics-in-standard-collections\" rel=\"nofollow noreferrer\">the standard types (e.g. <code>list</code>) can be subscripted for annotations (e.g. <code>x: list[int]</code>)</a> w/o importing <code>typing</code>."}, {"owner": {"reputation": 2081, "user_id": 2426679, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ae42083756ea100bc8b06658725b4493?s=128&d=identicon&r=PG", "display_name": "user2426679", "link": "https://stackoverflow.com/users/2426679/user2426679"}, "edited": false, "score": 0, "creation_date": 1609007873, "post_id": 33533514, "comment_id": 115729646, "body": "The answer from @vbraun solves the problem of inheritance, but it does this be issuing a <i>new instance</i> of the current class.   <a href=\"https://stackoverflow.com/a/64938978\">This answer</a> solves the inheritance problem dynamically, returning the class of the current instance -- <i>not</i> a new instance."}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1618600629, "post_id": 33533514, "comment_id": 118660449, "body": "Is there a way to specify that the return type of a function is the current class, whatever that may be? e.g., <code>@classmethod def f(cls) -&gt; CurrentClass:</code> where <code>CurrentClass</code> evaluates to whatever <code>cls</code> would be at runtime? So that if <code>A</code> and <code>B</code> inherit from the class that implements <code>f</code>, then <code>A.f() -&gt; A</code> and <code>B.f() -&gt; B</code>?"}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": true, "score": 906, "last_activity_date": 1617558529, "last_edit_date": 1617558529, "creation_date": 1446677073, "answer_id": 33533514, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/33533514#33533514", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p><strong>TL;DR</strong>: If you are using Python 3.10 or later, it just works. As of today (2019), in 3.7+ you must turn this feature on using a future statement (<code>from __future__ import annotations</code>). In Python 3.6 or below, use a string.</p>\n<p>I guess you got this exception:</p>\n<pre><code>NameError: name 'Position' is not defined\n</code></pre>\n<p>This is because <code>Position</code> must be defined before you can use it in an annotation unless you are using Python 3.10 or later.</p>\n<h2>Python 3.7+: <code>from __future__ import annotations</code></h2>\n<p>Python 3.7 introduces <a href=\"https://www.python.org/dev/peps/pep-0563/\" rel=\"noreferrer\">PEP 563: postponed evaluation of annotations</a>. A module that uses the future statement <code>from __future__ import annotations</code> will store annotations as strings automatically:</p>\n<pre><code>from __future__ import annotations\n\nclass Position:\n    def __add__(self, other: Position) -&gt; Position:\n        ...\n</code></pre>\n<p>This is scheduled to become the default in Python 3.10. Since Python still is a dynamically typed language so no type checking is done at runtime, typing annotations should have no performance impact, right? Wrong! Before python 3.7 the typing module used to be <a href=\"https://www.python.org/dev/peps/pep-0560/#performance\" rel=\"noreferrer\">one of the slowest python modules in core</a> so <strong>if you <code>import typing</code> you will see <a href=\"https://docs.python.org/3.7/whatsnew/3.7.html#pep-560-core-support-for-typing-module-and-generic-types\" rel=\"noreferrer\">up to 7 times increase in performance</a> when you upgrade to 3.7.</strong></p>\n<h2>Python &lt;3.7: use a string</h2>\n<p><a href=\"https://www.python.org/dev/peps/pep-0484/#forward-references\" rel=\"noreferrer\">According to PEP 484</a>, you should use a string instead of the class itself:</p>\n<pre><code>class Position:\n    ...\n    def __add__(self, other: 'Position') -&gt; 'Position':\n       ...\n</code></pre>\n<p>If you use the Django framework this may be familiar as Django models also use strings for forward references (foreign key definitions where the foreign model is <code>self</code> or is not declared yet). This should work with Pycharm and other tools.</p>\n<h2>Sources</h2>\n<p>The relevant parts of PEP 484 and PEP 563, to spare you the trip:</p>\n<blockquote>\n<h1><a href=\"https://www.python.org/dev/peps/pep-0484/#forward-references\" rel=\"noreferrer\">Forward references</a></h1>\n<p>When a type hint contains names that have not been defined yet, that definition may be expressed as a string literal, to be resolved later.</p>\n<p>A situation where this occurs commonly is the definition of a container class, where the class being defined occurs in the signature of some of the methods. For example, the following code (the start of a simple binary tree implementation) does not work:</p>\n<pre><code>class Tree:\n    def __init__(self, left: Tree, right: Tree):\n        self.left = left\n        self.right = right\n</code></pre>\n<p>To address this, we write:</p>\n<pre><code>class Tree:\n    def __init__(self, left: 'Tree', right: 'Tree'):\n        self.left = left\n        self.right = right\n</code></pre>\n<p>The string literal should contain a valid Python expression (i.e., compile(lit, '', 'eval') should be a valid code object) and it should evaluate without errors once the module has been fully loaded. The local and global namespace in which it is evaluated should be the same namespaces in which default arguments to the same function would be evaluated.</p>\n</blockquote>\n<p>and PEP 563:</p>\n<blockquote>\n<h1><a href=\"https://www.python.org/dev/peps/pep-0563/#implementation\" rel=\"noreferrer\">Implementation</a></h1>\n<p>In Python 3.10, function and variable annotations will no longer be evaluated at definition time. Instead, a string form will be preserved in the respective\u00a0<code>__annotations__</code>\u00a0dictionary. Static type checkers will see no difference in behavior, whereas tools using annotations at runtime will have to perform postponed evaluation.</p>\n<p>...</p>\n<h2><a href=\"https://www.python.org/dev/peps/pep-0563/#enabling-the-future-behavior-in-python-3-7\" rel=\"noreferrer\">Enabling the future behavior in Python 3.7</a></h2>\n<p>The functionality described above can be enabled starting from Python 3.7 using the following special import:</p>\n<pre><code>from __future__ import annotations\n</code></pre>\n</blockquote>\n<h2>Things that you may be tempted to do instead</h2>\n<h3>A. Define a dummy <code>Position</code></h3>\n<p>Before the class definition, place a dummy definition:</p>\n<pre><code>class Position(object):\n    pass\n\n\nclass Position(object):\n    ...\n</code></pre>\n<p>This will get rid of the <code>NameError</code> and may even look OK:</p>\n<pre><code>&gt;&gt;&gt; Position.__add__.__annotations__\n{'other': __main__.Position, 'return': __main__.Position}\n</code></pre>\n<p>But is it?</p>\n<pre><code>&gt;&gt;&gt; for k, v in Position.__add__.__annotations__.items():\n...     print(k, 'is Position:', v is Position)                                                                                                                                                                                                                  \nreturn is Position: False\nother is Position: False\n</code></pre>\n<h3>B. Monkey-patch in order to add the annotations:</h3>\n<p>You may want to try some Python meta programming magic and write a decorator\nto monkey-patch the class definition in order to add annotations:</p>\n<pre><code>class Position:\n    ...\n    def __add__(self, other):\n        return self.__class__(self.x + other.x, self.y + other.y)\n</code></pre>\n<p>The decorator should be responsible for the equivalent of this:</p>\n<pre><code>Position.__add__.__annotations__['return'] = Position\nPosition.__add__.__annotations__['other'] = Position\n</code></pre>\n<p>At least it seems right:</p>\n<pre><code>&gt;&gt;&gt; for k, v in Position.__add__.__annotations__.items():\n...     print(k, 'is Position:', v is Position)                                                                                                                                                                                                                  \nreturn is Position: True\nother is Position: True\n</code></pre>\n<p>Probably too much trouble.</p>\n"}, {"comments": [{"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 19, "creation_date": 1552666094, "post_id": 48735697, "comment_id": 97111160, "body": "I wish Python had a <code>typing.Self</code> to specify this explicitly."}, {"owner": {"reputation": 830, "user_id": 3846121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hdMx.jpg?s=128&g=1", "display_name": "Scott P.", "link": "https://stackoverflow.com/users/3846121/scott-p"}, "edited": false, "score": 2, "creation_date": 1552841818, "post_id": 48735697, "comment_id": 97155140, "body": "I came here looking to see if something like your <code>typing.Self</code> existed.  Returning a hard coded string fails to return the correct type when leveraging polymorphism.  In my case I wanted to implement a <b>deserialize</b> classmethod.  I settled on returning a dict (kwargs) and calling <code>some_class(**some_class.deserialize(raw_data))</code>."}, {"owner": {"reputation": 1690, "user_id": 3010334, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7976d97593c7674b528cbcad45629af8?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bull", "link": "https://stackoverflow.com/users/3010334/sam-bull"}, "edited": false, "score": 1, "creation_date": 1591542081, "post_id": 48735697, "comment_id": 110089442, "body": "The type annotations used here are appropriate when implementing this correctly to use subclasses. However, the implementation returns <code>Position</code>, and not the class, so the example above is technically incorrect. The implementation should replace <code>Position(</code> with something like <code>self.__class__(</code>."}, {"owner": {"reputation": 1690, "user_id": 3010334, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7976d97593c7674b528cbcad45629af8?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bull", "link": "https://stackoverflow.com/users/3010334/sam-bull"}, "edited": false, "score": 1, "creation_date": 1591542304, "post_id": 48735697, "comment_id": 110089533, "body": "Additionally, the annotations say that the return type depends on <code>other</code>, but most probably it actually depends on <code>self</code>. So, you would need to put the annotation on <code>self</code> to describe the correct behaviour (and maybe <code>other</code> should just be <code>Position</code> to show that it&#39;s not tied to the return type).  This can also be used for cases when you are only working with <code>self</code>. e.g. <code>def __aenter__(self: T) -&gt; T:</code>"}, {"owner": {"reputation": 2475, "user_id": 428542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ea782142fad1e4dc36c39405538675?s=128&d=identicon&r=PG", "display_name": "MacFreek", "link": "https://stackoverflow.com/users/428542/macfreek"}, "edited": false, "score": 0, "creation_date": 1596489206, "post_id": 48735697, "comment_id": 111822395, "body": "The current implementation does not return a <code>T</code> (subclass of Position), but a <code>Position</code> (base class). So the type hint <code>-&gt; T</code> is incorrect. You can of course <code>return type(self)(self.x + other.x, self.y + other.y)</code>"}, {"owner": {"reputation": 2475, "user_id": 428542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ea782142fad1e4dc36c39405538675?s=128&d=identicon&r=PG", "display_name": "MacFreek", "link": "https://stackoverflow.com/users/428542/macfreek"}, "reply_to_user": {"reputation": 830, "user_id": 3846121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hdMx.jpg?s=128&g=1", "display_name": "Scott P.", "link": "https://stackoverflow.com/users/3846121/scott-p"}, "edited": false, "score": 0, "creation_date": 1596490507, "post_id": 48735697, "comment_id": 111822777, "body": "@ScottP., @AlexanderHuszagh: There is no need for a <code>typing.Self</code>. Use e.g. <code>def __add__(self: T, other: Position) -&gt; T</code>. You comments prompted me to write an answer."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1597921713, "post_id": 48735697, "comment_id": 112293055, "body": "Not only is this answer&#39;s <code>T</code> suggestion incorrect, the proposed fixes in the comments are incorrect too - they return an object of <code>self</code>&#39;s type, but the annotation says to return <code>other</code>&#39;s type. There are ways around that, but this fundamentally doesn&#39;t seem like a case where the code should even try for that kind of implicit return type adjustment. Just use <code>&#39;Position&#39;</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1597922018, "post_id": 48735697, "comment_id": 112293185, "body": "If you really hate writing out the type name that much, you&#39;ll be able to write <code>T: TypeAlias = &#39;Position&#39;</code> and then use <code>T</code> as an annotation <a href=\"https://www.python.org/dev/peps/pep-0613/\" rel=\"nofollow noreferrer\">some time soon</a>. <code>TypeAlias</code> recently got added to <code>typing_extensions</code>, and it should be in <code>typing</code> eventually."}], "tags": [], "owner": {"reputation": 1006, "user_id": 2692003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6fd4ec37d3314df14e38d3770a4010d?s=128&d=identicon&r=PG", "display_name": "vbraun", "link": "https://stackoverflow.com/users/2692003/vbraun"}, "is_accepted": false, "score": 21, "last_activity_date": 1518378308, "creation_date": 1518378308, "answer_id": 48735697, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/48735697#48735697", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>Specifying the type as string is fine, but always grates me a bit that we are basically circumventing the parser. So you better not misspell any one of these literal strings:</p>\n\n<pre><code>def __add__(self, other: 'Position') -&gt; 'Position':\n    return Position(self.x + other.x, self.y + other.y)\n</code></pre>\n\n<p>A slight variation is to use a bound typevar, at least then you have to write the string only once when declaring the typevar:</p>\n\n<pre><code>from typing import TypeVar\n\nT = TypeVar('T', bound='Position')\n\nclass Position:\n\n    def __init__(self, x: int, y: int):\n        self.x = x\n        self.y = y\n\n    def __add__(self, other: T) -&gt; T:\n        return Position(self.x + other.x, self.y + other.y)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7517, "user_id": 857390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7549ae4abf6f58a804e8c257190ed436?s=128&d=identicon&r=PG", "display_name": "Florian Brucker", "link": "https://stackoverflow.com/users/857390/florian-brucker"}, "edited": false, "score": 5, "creation_date": 1576588084, "post_id": 58789374, "comment_id": 104942114, "body": "This is especially useful because it does not hardcode the class name, so it keeps working in subclasses."}, {"owner": {"reputation": 7517, "user_id": 857390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7549ae4abf6f58a804e8c257190ed436?s=128&d=identicon&r=PG", "display_name": "Florian Brucker", "link": "https://stackoverflow.com/users/857390/florian-brucker"}, "edited": false, "score": 0, "creation_date": 1576590333, "post_id": 58789374, "comment_id": 104943433, "body": "I&#39;m not sure whether this will work with the postponed evaluation of annotations (PEP 563), so I&#39;ve <a href=\"https://stackoverflow.com/q/59375599/857390\">asked a question for that</a>."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1594112446, "post_id": 58789374, "comment_id": 111004572, "body": "Note that this is not a valid annotation as far as <code>mypy</code> is concerned."}, {"owner": {"reputation": 2081, "user_id": 2426679, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ae42083756ea100bc8b06658725b4493?s=128&d=identicon&r=PG", "display_name": "user2426679", "link": "https://stackoverflow.com/users/2426679/user2426679"}, "edited": false, "score": 0, "creation_date": 1605923481, "post_id": 58789374, "comment_id": 114810267, "body": "<a href=\"https://stackoverflow.com/a/64938978\">this solution</a> fixes the hardcoding in a different manner"}], "tags": [], "owner": {"reputation": 139, "user_id": 11556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e550492861610fbb353452aec57d0?s=128&d=identicon&r=PG", "display_name": "Yvon DUTAPIS", "link": "https://stackoverflow.com/users/11556083/yvon-dutapis"}, "is_accepted": false, "score": 13, "last_activity_date": 1577131225, "last_edit_date": 1577131225, "creation_date": 1573394372, "answer_id": 58789374, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/58789374#58789374", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>When a string-based type hint is acceptable, the <code>__qualname__</code> item can also be used. It holds the name of the class, and it is available in the body of the class definition.</p>\n\n<pre><code>class MyClass:\n    @classmethod\n    def make_new(cls) -&gt; __qualname__:\n        return cls()\n</code></pre>\n\n<p>By doing this, renaming the class does not imply modifying the type hints. But I personally would not expect smart code editors to handle this form well.</p>\n"}, {"comments": [{"owner": {"reputation": 2475, "user_id": 428542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ea782142fad1e4dc36c39405538675?s=128&d=identicon&r=PG", "display_name": "MacFreek", "link": "https://stackoverflow.com/users/428542/macfreek"}, "reply_to_user": {"reputation": 20068, "user_id": 84237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f4Ipf.png?s=128&g=1", "display_name": "Arjan", "link": "https://stackoverflow.com/users/84237/arjan"}, "edited": false, "score": 1, "creation_date": 1601145598, "post_id": 63237226, "comment_id": 113316899, "body": "@Arjan. you are right. I&#39;m so accustomed to <code>from __future__ import annotations</code> that I probably forgot. Thanks for pointing this out. I fixed it in the answer."}, {"owner": {"reputation": 4291, "user_id": 1346690, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15f1dff2f166af89e03328e0da7dbaa7?s=128&d=identicon&r=PG", "display_name": "Heetola", "link": "https://stackoverflow.com/users/1346690/heetola"}, "edited": false, "score": 0, "creation_date": 1605778475, "post_id": 63237226, "comment_id": 114758227, "body": "what is the letter  &#39; T &#39; ?"}, {"owner": {"reputation": 2475, "user_id": 428542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ea782142fad1e4dc36c39405538675?s=128&d=identicon&r=PG", "display_name": "MacFreek", "link": "https://stackoverflow.com/users/428542/macfreek"}, "reply_to_user": {"reputation": 4291, "user_id": 1346690, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15f1dff2f166af89e03328e0da7dbaa7?s=128&d=identicon&r=PG", "display_name": "Heetola", "link": "https://stackoverflow.com/users/1346690/heetola"}, "edited": false, "score": 0, "creation_date": 1605902015, "post_id": 63237226, "comment_id": 114805111, "body": "@Eildosa: &quot;T&quot; is defined as a TypeVar. Think of it as &quot;any type&quot;. In the defintion <code>copy(self: T) -&gt; T</code> this means that whatever object you throw at <code>copy()</code>, <code>copy()</code> will always return an object of the same type. In this case, T is a TypeVar &quot;bound&quot; to Postion, which means &quot;any type that is either <code>Position</code>, or a subclass of <code>Position</code>&quot;. Search for TypeVar to learn more about it."}, {"owner": {"reputation": 467, "user_id": 7771076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/035048bc359d1dbdf81f3a04ae5dd295?s=128&d=identicon&r=PG&f=1", "display_name": "ofo", "link": "https://stackoverflow.com/users/7771076/ofo"}, "edited": false, "score": 0, "creation_date": 1618116089, "post_id": 63237226, "comment_id": 118501998, "body": "Are there any clever tricks to have a generic <code>Self</code> that can be reused?"}], "tags": [], "owner": {"reputation": 2475, "user_id": 428542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ea782142fad1e4dc36c39405538675?s=128&d=identicon&r=PG", "display_name": "MacFreek", "link": "https://stackoverflow.com/users/428542/macfreek"}, "is_accepted": false, "score": 8, "last_activity_date": 1601145538, "last_edit_date": 1601145538, "creation_date": 1596490349, "answer_id": 63237226, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/63237226#63237226", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>If you only care about fixing the <code>NameError: name 'Position' is not defined</code>, you can either specify the class name as a string:</p>\n<pre><code>def __add__(self, other: 'Position') -&gt; 'Position':\n</code></pre>\n<p>Or if you use Python 3.7 or higher, add the following line to the top of your code (just before the other imports)</p>\n<pre><code>from __future__ import annotations\n</code></pre>\n<p>However, if you also want this to work for subclasses, and return the specific subclass, you need to use a <code>Generic</code> class, by define a <code>TypeVar</code>.</p>\n<p>What is slightly uncommon is that the <code>TypeVar</code> is bound to the type of <code>self</code>. Basically, this typing hinting tells the type checker that the return type of <code>__add__()</code> and <code>copy()</code> are the same type as <code>self</code>.</p>\n<pre><code>from __future__ import annotations\n\nfrom typing import TypeVar\n\nT = TypeVar('T', bound=Position)\n\nclass Position:\n    \n    def __init__(self, x: int, y: int):\n        self.x = x\n        self.y = y\n    \n    def __add__(self: T, other: Position) -&gt; T:\n        return type(self)(self.x + other.x, self.y + other.y)\n    \n    def copy(self: T) -&gt; T:\n        return type(self)(self.x, self.y)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2081, "user_id": 2426679, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ae42083756ea100bc8b06658725b4493?s=128&d=identicon&r=PG", "display_name": "user2426679", "link": "https://stackoverflow.com/users/2426679/user2426679"}, "is_accepted": false, "score": 2, "last_activity_date": 1609007357, "last_edit_date": 1609007357, "creation_date": 1605922383, "answer_id": 64938978, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class/64938978#64938978", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>I \u2764\ufe0f <a href=\"https://stackoverflow.com/a/33533514\">Paulo's answer</a></p>\n<p>However, there's a point to be made about type hint inheritance in relation to self, which is that if you type hint by using a literal copy paste of the class name as a string, then your type hint won't inherit in a correct or consistent way.</p>\n<p>The solution to this is to provide return type hint by putting the type hint on the return in the function itself.</p>\n<p>\u2705 For example, do this:</p>\n<pre><code>class DynamicParent:\n  def func(self):\n    # roundabout way of returning self in order to have inherited type hints of the return\n    # https://stackoverflow.com/a/64938978\n    _self:self.__class__ = self\n    return _self\n</code></pre>\n<p>\u274c <em>Instead</em> of doing this:</p>\n<pre><code>class StaticParent:\n  def func(self) -&gt; 'StaticParent':\n    return self\n</code></pre>\n<p>Below is the reason why you want to do the type hint via the roundabout \u2705 way shown above</p>\n<pre><code>class StaticChild(StaticParent):\n  pass\n\nclass DynamicChild(DynamicParent):\n  pass\n\nstatic_child = StaticChild()\ndynamic_child = DynamicChild()\n</code></pre>\n<p>\u2705 <code>dynamic_child</code> screenshot shows that type hinting works correctly when referencing the self:</p>\n<p><a href=\"https://i.stack.imgur.com/BkfUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BkfUW.png\" alt=\"enter image description here\" /></a></p>\n<p>\u274c <code>static_child</code> screenshot shows that type hinting is mistakenly pointing at the parent class, i.e. the type hint does not change correctly with inheritance; it is <code>static</code> because it will always point at the parent even when it should point at the child</p>\n<p><a href=\"https://i.stack.imgur.com/IFOLK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IFOLK.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 6421, "user_id": 4665133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a1a2069f18e1e1430b86dada1bcc85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael van Gerwen", "link": "https://stackoverflow.com/users/4665133/michael-van-gerwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98241, "favorite_count": 129, "accepted_answer_id": 33533514, "answer_count": 6, "score": 629, "last_activity_date": 1617558529, "creation_date": 1446675474, "last_edit_date": 1600265718, "question_id": 33533148, "link": "https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class", "title": "How do I type hint a method with the type of the enclosing class?", "body": "<p>I have the following code in python 3:</p>\n\n<pre><code>class Position:\n\n    def __init__(self, x: int, y: int):\n        self.x = x\n        self.y = y\n\n    def __add__(self, other: Position) -&gt; Position:\n        return Position(self.x + other.x, self.y + other.y)\n</code></pre>\n\n<p>But my editor (PyCharm) says that the reference Position can not be resolved (in the <code>__add__</code> method). How should I specify that I expect the return type to be of type <code>Position</code>?</p>\n\n<p>Edit: I think this is actually a PyCharm issue. It actually uses the information in its warnings, and code completion</p>\n\n<p><img src=\"https://i.imgur.com/yjjCWw3.png\" alt=\"\"></p>\n\n<p>But correct me if I'm wrong, and need to use some other syntax.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1446675467, "post_id": 33533126, "comment_id": 54847875, "body": "Your indentation is all off. That matters a lot in python."}], "answers": [{"tags": [], "owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "is_accepted": true, "score": 2, "last_activity_date": 1446675470, "creation_date": 1446675470, "answer_id": 33533147, "question_id": 33533126, "link": "https://stackoverflow.com/questions/33533126/undefined-function-confusing/33533147#33533147", "title": "Undefined Function confusing", "body": "<p>You need to prefix <code>total_with_tax</code> with <code>self</code>, like this:</p>\n\n<pre><code> print(\"$%d\" % self.total_with_tax())\n</code></pre>\n"}], "owner": {"reputation": 1127, "user_id": 5526785, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2db8f18eaa10b107363b11b3f793a976?s=128&d=identicon&r=PG&f=1", "display_name": "katie1245", "link": "https://stackoverflow.com/users/5526785/katie1245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33533147, "answer_count": 1, "score": -3, "last_activity_date": 1446675470, "creation_date": 1446675394, "question_id": 33533126, "link": "https://stackoverflow.com/questions/33533126/undefined-function-confusing", "title": "Undefined Function confusing", "body": "<p>I have this bit of code here, and I was wondering why I was getting \"total_with_tax is undefined\"</p>\n\n<p>This happens when I do:</p>\n\n<pre><code>c = Customer()\nc.print_bill() --&gt; this is where I get the error\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>class Customer:\ndef __init__(self):\n    self.total = 0\n    self.items_ordered = str(\"\")\n\ndef add_to_order(self, NameOfItem, CostOfItem):\n    self.total += CostOfItem\n    self.items_ordered = self.items_ordered + (str(NameOfItem) + \", \")\n\ndef total_with_tax(self):\n    return ((self.total * 0.13) + self.total)\n\ndef print_bill(self):\n    print(\"----------------------------------------------\")\n    print(self.items_ordered)\n    print(\"$%d\" %(self.total))\n    print(\"$%d\" %(total_with_tax()))\n    print(\"----------------------------------------------\")\n</code></pre>\n"}, {"tags": ["python", "django", "pycharm"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1446675691, "post_id": 33533105, "comment_id": 54847988, "body": "It&#39;s the first time I saw this. Can you use <code>{% include %}</code> to include javascript files in django? Is there any reference that explained this?"}, {"owner": {"reputation": 951, "user_id": 1869253, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f482ee795baad9e311c14e0ac25bf4b8?s=128&d=identicon&r=PG", "display_name": "Dusty", "link": "https://stackoverflow.com/users/1869253/dusty"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1446680446, "post_id": 33533105, "comment_id": 54849788, "body": "It works for me, because these <code>.js</code> files are in the templates directory, but PyCharm has trouble knowing which variables get used. This article (<a href=\"https://www.jetbrains.com/pycharm/help/configuring-template-languages.html\" rel=\"nofollow noreferrer\">jetbrains.com/pycharm/help/configuring-template-languages.h&zwnj;&#8203;tml</a>) shows you how to add JavaScript as a template file type. This stops the template tag errors."}], "answers": [{"comments": [{"owner": {"reputation": 12386, "user_id": 673991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TqC4v.jpg?s=128&g=1", "display_name": "Bob Stein", "link": "https://stackoverflow.com/users/673991/bob-stein"}, "edited": false, "score": 0, "creation_date": 1495485089, "post_id": 33551724, "comment_id": 75262567, "body": "You can suppress PyCharm warnings with e.g. <code>&#47;&#47;noinspection JSUnusedGlobalSymbols</code>. I do this in my .js files that are included via <code>&lt;script&gt;</code>. Wish there was a more glamorous way."}], "tags": [], "owner": {"reputation": 951, "user_id": 1869253, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f482ee795baad9e311c14e0ac25bf4b8?s=128&d=identicon&r=PG", "display_name": "Dusty", "link": "https://stackoverflow.com/users/1869253/dusty"}, "is_accepted": false, "score": 0, "last_activity_date": 1510770392, "last_edit_date": 1510770392, "creation_date": 1446746799, "answer_id": 33551724, "question_id": 33533105, "link": "https://stackoverflow.com/questions/33533105/in-pycharm-unused-local-variable-using-multiple-javascript-template-files/33551724#33551724", "title": "In PyCharm: &quot;Unused local variable...&quot; using multiple JavaScript template files", "body": "<p>So what generated this question was me trying to modularize my JavaScript code, but it looks like I might have to just deal with the PyCharm warnings. Even when I add JavaScript as a template file type, PyCharm's JavaScript interpreter still gives me warnings (not Django template tag warnings) when I do something like this:</p>\n\n<pre><code>{% if something %}\n    var my_var = \"a\";\n{% else %}\n    var my_var = \"b\";\n{% endif %}\n</code></pre>\n\n<p>It'll say <code>Duplicate declaration</code>. And when I reference a variable not in the current template file or when I don't use a variable declared in the current template, PyCharm complains.</p>\n\n<p>So in summary, you can do this, but PyCharm will complain and the <code>CTRL + clicking</code> to jump to declarations doesn't work.</p>\n\n<p>One of my follow-up questions would be, if you can tolerate the PyCharm warnings, is <code>including</code> JavaScript files better performing than multiple external JavaScript files (). I would think <code>including</code> would perform better most of the time (except if most of your traffic is returning visitors where you could use external JavaScript files and leverage caching).</p>\n"}], "owner": {"reputation": 951, "user_id": 1869253, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f482ee795baad9e311c14e0ac25bf4b8?s=128&d=identicon&r=PG", "display_name": "Dusty", "link": "https://stackoverflow.com/users/1869253/dusty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510770392, "creation_date": 1446675303, "question_id": 33533105, "link": "https://stackoverflow.com/questions/33533105/in-pycharm-unused-local-variable-using-multiple-javascript-template-files", "title": "In PyCharm: &quot;Unused local variable...&quot; using multiple JavaScript template files", "body": "<p>I'm using PyCharm for my Django project and In my file <code>product_header_js.html</code>:</p>\n\n<pre><code>&lt;script&gt;\n    {% include 'global_variables.js' %}\n    {% include 'update_scene_function.js' %}\n    ...\n    // I may use variables in here or in update_scene_function.js\n&lt;/script&gt;\n</code></pre>\n\n<p>I would like to use variables in <code>global_variables.js</code> in my <code>update_scene_function.js</code> file and <code>product_header_js.html</code> file. PyCharm lets me do this, but gives me the error <code>Unused local variable...</code> in <code>global_variables.js</code> and all my variables are greyed out because PyCharm doesn't think they are being used. Is there anyway to fix PyCharm?</p>\n"}, {"tags": ["python", "django", "database", "routing"], "answers": [{"tags": [], "owner": {"reputation": 425, "user_id": 5506813, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pghnyeYUcK0/AAAAAAAAAAI/AAAAAAAAAEQ/H7bhib73mRY/photo.jpg?sz=128", "display_name": "Dariusz B\u0105czkowski", "link": "https://stackoverflow.com/users/5506813/dariusz-b%c4%85czkowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1446683467, "creation_date": 1446683467, "answer_id": 33534661, "question_id": 33533088, "link": "https://stackoverflow.com/questions/33533088/route-single-model-to-alternate-database-in-django/33534661#33534661", "title": "Route single model to alternate database in django", "body": "<p>The easiest way is to select database manually.\nFrom <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/multi-db/#manually-selecting-a-database\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/topics/db/multi-db/#manually-selecting-a-database</a></p>\n\n<pre><code>&gt;&gt;&gt; # This will run on the 'default' database.\n&gt;&gt;&gt; Author.objects.all()\n\n&gt;&gt;&gt; # So will this.\n&gt;&gt;&gt; Author.objects.using('default').all()\n\n&gt;&gt;&gt; # This will run on the 'other' database.\n&gt;&gt;&gt; Author.objects.using('other').all()\n\n&gt;&gt;&gt; my_object.save(using='legacy_users')\n</code></pre>\n\n<p>Documentation has also other options, check: <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/multi-db/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/topics/db/multi-db/</a></p>\n"}], "owner": {"reputation": 1504, "user_id": 672229, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4lHr6.jpg?s=128&g=1", "display_name": "Steven Rogers", "link": "https://stackoverflow.com/users/672229/steven-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33534661, "answer_count": 1, "score": 1, "last_activity_date": 1446683467, "creation_date": 1446675219, "question_id": 33533088, "link": "https://stackoverflow.com/questions/33533088/route-single-model-to-alternate-database-in-django", "title": "Route single model to alternate database in django", "body": "<p>I have two databases set up in my settings folder of my project</p>\n\n<pre><code>'default': {\n    'ENGINE': 'django.db.backends.sqlite3',\n    'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n},\n'foo': {\n    'NAME': 'bar',\n    'ENGINE': 'django.db.backends.mysql',\n    'HOST': 'some.site.com',\n    'USER': 'xxxxxx',\n    'PASSWORD': 'xxxxxxxx'\n}\n</code></pre>\n\n<p>I also have models set up, one of them was created with </p>\n\n<pre><code>python manage.py inspectdb --database foo &gt; tmp.py\n</code></pre>\n\n<p>That created some models I already had in foo, so I copied it over into my models folder. However, django is trying to use the existing default database for that model, when instead I want it to route to the foo database instead.</p>\n\n<p>When looking online for how to get this done. Posts recommend using 'database-routing', but I cannot find documentation or an example that works for me or that I understand.</p>\n\n<p>So please, what is the right way to set up a single model to use an external database?</p>\n"}, {"tags": ["python", "plot", "contour", "bokeh"], "comments": [{"owner": {"reputation": 960, "user_id": 2323274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62fedfdf7661b3ba3621ede1265ede0?s=128&d=identicon&r=PG", "display_name": "Azad", "link": "https://stackoverflow.com/users/2323274/azad"}, "edited": false, "score": 0, "creation_date": 1446675495, "post_id": 33533047, "comment_id": 54847890, "body": "use <code>matplotlib</code> for examples see <a href=\"http://matplotlib.org/examples/pylab_examples/contour_demo.html\" rel=\"nofollow noreferrer\">matplotlib.org/examples/pylab_examples/contour_demo.html</a> and <a href=\"http://matplotlib.org/examples/pylab_examples/contour_image.html\" rel=\"nofollow noreferrer\">matplotlib.org/examples/pylab_examples/contour_image.html</a>"}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 2, "creation_date": 1446677734, "post_id": 33533047, "comment_id": 54848865, "body": "A high level canned contour plot <code>bokeh.charts.Contour</code> is still an open feature request as of Bokeh 0.10 but will hopefully be in one of the next few releases. It would be a nice project for a new contributor, if you are interested in helping please stop by the Bokeh mailing list or GH tracker."}, {"owner": {"reputation": 1887, "user_id": 4958717, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/tYTOb.png?s=128&g=1", "display_name": "dsalaj", "link": "https://stackoverflow.com/users/4958717/dsalaj"}, "reply_to_user": {"reputation": 960, "user_id": 2323274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62fedfdf7661b3ba3621ede1265ede0?s=128&d=identicon&r=PG", "display_name": "Azad", "link": "https://stackoverflow.com/users/2323274/azad"}, "edited": false, "score": 1, "creation_date": 1446705142, "post_id": 33533047, "comment_id": 54856928, "body": "@Azad I am not aware that matpotlib allows for interactive/animated web previews, am I wrong?"}, {"owner": {"reputation": 1887, "user_id": 4958717, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/tYTOb.png?s=128&g=1", "display_name": "dsalaj", "link": "https://stackoverflow.com/users/4958717/dsalaj"}, "reply_to_user": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1446705178, "post_id": 33533047, "comment_id": 54856940, "body": "@bigreddot Thanks for the great suggestion."}, {"owner": {"reputation": 960, "user_id": 2323274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62fedfdf7661b3ba3621ede1265ede0?s=128&d=identicon&r=PG", "display_name": "Azad", "link": "https://stackoverflow.com/users/2323274/azad"}, "edited": false, "score": 0, "creation_date": 1446715116, "post_id": 33533047, "comment_id": 54861841, "body": "I don&#39;t know about web either but it allows for interactive plotting."}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "edited": false, "score": 0, "creation_date": 1446827716, "post_id": 33533047, "comment_id": 54920805, "body": "Bokeh does allow presenting matplotlib figures in a web application. I don&#39;t know if it handles contours, but you should try. <a href=\"http://bokeh.pydata.org/en/0.10.0/docs/user_guide/compat.html#overview\" rel=\"nofollow noreferrer\">bokeh.pydata.org/en/0.10.0/docs/user_guide/compat.html#overv&zwnj;&#8203;iew</a>"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 1561393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec0e732d1830c4bb0cdef078a6e506b?s=128&d=identicon&r=PG", "display_name": "user1561393", "link": "https://stackoverflow.com/users/1561393/user1561393"}, "is_accepted": true, "score": 5, "last_activity_date": 1456122829, "creation_date": 1456122829, "answer_id": 35547169, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs/35547169#35547169", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>Plotly has supported contour plots in Python for the past year:</p>\n\n<p><a href=\"https://plot.ly/python/contour-plots/\" rel=\"noreferrer\">https://plot.ly/python/contour-plots/</a></p>\n\n<p><a href=\"https://plot.ly/pandas/contour-plots/\" rel=\"noreferrer\">https://plot.ly/pandas/contour-plots/</a></p>\n\n<p>Density plots (contour plots with adjacent histograms):</p>\n\n<p><a href=\"https://plot.ly/python/2d-density-plots/\" rel=\"noreferrer\">https://plot.ly/python/2d-density-plots/</a></p>\n\n<p><a href=\"https://plot.ly/pandas/2d-density-plots/\" rel=\"noreferrer\">https://plot.ly/pandas/2d-density-plots/</a></p>\n\n<p>The Plotly Python library is on pip, 100% free and open-source.</p>\n\n<p><a href=\"https://i.stack.imgur.com/skB7S.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/skB7S.png\" alt=\"python-contour-plot\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2692, "user_id": 2929207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DxLMZ.png?s=128&g=1", "display_name": "Pablo Reyes", "link": "https://stackoverflow.com/users/2929207/pablo-reyes"}, "is_accepted": false, "score": 3, "last_activity_date": 1501114362, "last_edit_date": 1501114362, "creation_date": 1456376599, "answer_id": 35618769, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs/35618769#35618769", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>By choosing a palette with 10 values, like in the example you provide, one can use image (see <a href=\"http://bokeh.pydata.org/en/latest/docs/gallery/image.html\" rel=\"nofollow noreferrer\">Bokeh image example</a>) in bokeh to simulate a contour plot. The black contour lines and the numbers are missing, but the boundaries between the colors are actually the contour lines. Also, as far as I know Bokeh does not provide a color bar, but you can code it as another image <strong>(UPDATE: Latests versions of Bokeh do provide colorbar. )</strong>:</p>\n\n<pre><code>from bokeh.io import output_file\nfrom bokeh.plotting import gridplot,figure, show\nfrom bokeh.models import ColumnDataSource,FixedTicker\nimport numpy as np\nfrom matplotlib import cm,colors\n\noutput_file(\"contour.html\")\ncmap = cm.get_cmap(\"jet\") #choose any matplotlib colormap here\nnum_slabs = 10 # number of color steps\njet_10 = [colors.rgb2hex(m) for m in cmap(np.arange(0,cmap.N,cmap.N/(num_slabs-1)))]\nvmin = 0\nvmax = 1550\nN = 200\nx = np.linspace(0, 10, N)\ny = np.linspace(0, 10, N)\nxx, yy = np.meshgrid(x, y)\nd = vmax * (1. + np.sin(xx)*np.cos(yy))\n\nsource = ColumnDataSource(data={'d': [d], 'xx': [x], 'yy': [y]})\np = figure(plot_width=400,plot_height=400,x_range=[0, 10], y_range=[0, 10],min_border_right=10)\np.image(image=\"d\", x=[0], y=[0], dw=[10], dh=[10], palette=jet_10,source=source)\n\n# The following code is for the colorbar:\npcb = figure(plot_width=80,plot_height=400,x_range=[0, 1], y_range=[0, vmax],min_border_right=10)\npcb.image(image=[np.linspace(vmin,vmax,100).reshape(100,1)],x=[0],y=[0],dw=[1],dh=[vmax-vmin], palette=jet_10)\npcb.xaxis.major_label_text_color = None\npcb.xaxis.major_tick_line_color = None\npcb.xaxis.minor_tick_line_color = None\npcb.yaxis[0].ticker=FixedTicker(ticks=np.linspace(vmin,vmax,num_slabs+1)) # 11 ticks\npgrid = gridplot([[p,pcb]])  # this places the colorbar next to the image\nshow(pgrid)\n</code></pre>\n\n<p>The output will look like:\n<a href=\"https://i.stack.imgur.com/CaEre.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CaEre.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 149506, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/oFFtb.jpg?s=128&g=1", "display_name": "darda", "link": "https://stackoverflow.com/users/149506/darda"}, "edited": false, "score": 0, "creation_date": 1606338605, "post_id": 37633519, "comment_id": 114938108, "body": "Love this solution, since Bokeh&#39;s contour plotting abilities continue to seem hacky to this day."}], "tags": [], "owner": {"reputation": 320, "user_id": 5158031, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d1b6565638e6cbee87bcbef78791c62d?s=128&d=identicon&r=PG&f=1", "display_name": "BR123", "link": "https://stackoverflow.com/users/5158031/br123"}, "is_accepted": false, "score": 7, "last_activity_date": 1465064002, "creation_date": 1465064002, "answer_id": 37633519, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs/37633519#37633519", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>You can also use matplotlibs contour plot for calculation of the contour data and then plot the contours using bokehs multi_line. I'm also plotting text labels (which are unfortunately a bit ugly).</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.io import output_file\nfrom bokeh.plotting import gridplot,figure, show\n\ndef get_contour_data(X, Y, Z):\n    cs = plt.contour(X, Y, Z)\n    xs = []\n    ys = []\n    xt = []\n    yt = []\n    col = []\n    text = []\n    isolevelid = 0\n    for isolevel in cs.collections:\n        isocol = isolevel.get_color()[0]\n        thecol = 3 * [None]\n        theiso = str(cs.get_array()[isolevelid])\n        isolevelid += 1\n        for i in range(3):\n            thecol[i] = int(255 * isocol[i])\n        thecol = '#%02x%02x%02x' % (thecol[0], thecol[1], thecol[2])\n\n        for path in isolevel.get_paths():\n            v = path.vertices\n            x = v[:, 0]\n            y = v[:, 1]\n            xs.append(x.tolist())\n            ys.append(y.tolist())\n            xt.append(x[len(x) / 2])\n            yt.append(y[len(y) / 2])\n            text.append(theiso)\n            col.append(thecol)\n\n    source = ColumnDataSource(data={'xs': xs, 'ys': ys, 'line_color': col,'xt':xt,'yt':yt,'text':text})\n    return source\n\n\noutput_file(\"contour.html\")\n\nN = 400\nx = np.linspace(-1, 1, N)\ny = np.linspace(-1, 1, N)\nX, Y = np.meshgrid(x, y)\nZ = X**2 + Y**2\n\nsource = get_contour_data(X,Y,Z)\nplot = figure(plot_width=400,plot_height=400,x_range=[-1,1], y_range=[-1,1])\nplot.multi_line(xs='xs', ys='ys', line_color='line_color', source=source)\nplot.text(x='xt',y='yt',text='text',source=source,text_baseline='middle',text_align='center')\nshow(plot)\n</code></pre>\n\n<p>this is the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QOUUa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QOUUa.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2793333, "user_type": "registered", "profile_image": "https://graph.facebook.com/908433/picture?type=large", "display_name": "Asher Pembroke", "link": "https://stackoverflow.com/users/2793333/asher-pembroke"}, "is_accepted": false, "score": 7, "last_activity_date": 1465245984, "creation_date": 1465245984, "answer_id": 37666618, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs/37666618#37666618", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>I wrote a filled contour tool based on matplotlib output:</p>\n\n<p><a href=\"https://github.com/asher-pembroke/bokeh-tools\" rel=\"noreferrer\">https://github.com/asher-pembroke/bokeh-tools</a></p>\n"}, {"comments": [{"owner": {"reputation": 2692, "user_id": 2929207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DxLMZ.png?s=128&g=1", "display_name": "Pablo Reyes", "link": "https://stackoverflow.com/users/2929207/pablo-reyes"}, "edited": false, "score": 0, "creation_date": 1550178082, "post_id": 54681316, "comment_id": 96184877, "body": "Great idea using <code>measure</code> from <code>skimage</code>. And yes, adding the line labels is still missing in bokeh I think."}], "tags": [], "owner": {"reputation": 370, "user_id": 5827921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f77c8aba87e924cc8ec14f3b62e36a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Helliwell", "link": "https://stackoverflow.com/users/5827921/dustin-helliwell"}, "is_accepted": false, "score": 4, "last_activity_date": 1550102611, "creation_date": 1550102611, "answer_id": 54681316, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs/54681316#54681316", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>Thanks Pablo your answer really helped me.  </p>\n\n<p>Using your example I made a similar plot that adds the contour lines by using the skimage library.  I also turned on the hover tool as in the <a href=\"https://bokeh.pydata.org/en/latest/docs/gallery/image.html\" rel=\"nofollow noreferrer\">Bokeh image example</a> that you referenced.  Hopefully someone else comes along and adds the line labels.   </p>\n\n<p>Note that the following code is meant to run in Jupyter Notebook.</p>\n\n<pre><code>from skimage import measure\nimport numpy as np\n\nfrom bokeh.plotting import figure, show, output_notebook\nfrom bokeh.models import (ColorBar,\n                          FixedTicker, \n                          LinearColorMapper, \n                          PrintfTickFormatter)\n\noutput_notebook()\n\nN = 500\nx = np.linspace(0, 10, N)\ny = np.linspace(0, 10, N)\nxx, yy = np.meshgrid(x, y)\nd = np.sin(xx)*np.cos(yy)\n\nmapper = LinearColorMapper(palette='Spectral11', low=-1, high=1)\n\np = figure(x_range=(0, 10), y_range=(0, 10),\n           tooltips=[(\"x\", \"$x\"), (\"y\", \"$y\"), (\"value\", \"@image\")])\n\n# must give a vector of image data for image parameter\np.image(image=[d], x=0, y=0, dw=10, dh=10, palette='Spectral11')\n\nlevels = np.linspace(-1, 1, 12)\ncolor_bar = ColorBar(color_mapper=mapper, \n                     major_label_text_font_size=\"8pt\",\n                     ticker=FixedTicker(ticks=levels),\n                     formatter=PrintfTickFormatter(format='%.2f'),\n                     label_standoff=6, \n                     border_line_color=None, \n                     location=(0, 0))\n\np.add_layout(color_bar, 'right')\n\nfor level in levels:\n  contours = measure.find_contours(d, level)\n  for contour in contours:\n    x = contour[:,1]/50\n    y = contour[:,0]/50\n    p.line(x, y, color='grey', line_width=2)\n\nshow(p)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BUhQK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BUhQK.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1887, "user_id": 4958717, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/tYTOb.png?s=128&g=1", "display_name": "dsalaj", "link": "https://stackoverflow.com/users/4958717/dsalaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13049, "favorite_count": 5, "accepted_answer_id": 35547169, "answer_count": 5, "score": 5, "last_activity_date": 1550102611, "creation_date": 1446675064, "question_id": 33533047, "link": "https://stackoverflow.com/questions/33533047/how-to-make-a-contour-plot-in-python-using-bokeh-or-other-libs", "title": "How to make a contour plot in python using Bokeh (or other libs)?", "body": "<p>I am interested in making a contour plot in Bokeh. I have not been able to find anything on the net so far.</p>\n\n<p>As a reminder, this is contour plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tjOQZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tjOQZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any help would be appreciated. I would also welcome suggestions to other libraries but with prerequisite of allowing for interactive/animated plots, and not only rendering static output (images).</p>\n"}, {"tags": ["python", "list", "loops", "for-loop", "recursion"], "comments": [{"owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "edited": false, "score": 1, "creation_date": 1446675058, "post_id": 33533034, "comment_id": 54847671, "body": "Loops... aren&#39;t recursive..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 2, "creation_date": 1446675125, "post_id": 33533034, "comment_id": 54847696, "body": "&quot; I know it is able to produce the results I need since I&#39;ve already checked that by printing the results.&quot; Then, what is the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1446675214, "creation_date": 1446675214, "answer_id": 33533086, "question_id": 33533034, "link": "https://stackoverflow.com/questions/33533034/python-create-list-from-recursive-loop/33533086#33533086", "title": "Python - Create List from Recursive Loop", "body": "<p>Your <code>return</code> is overly indented. You want to defer the return until after the <code>for</code> loop has finished:</p>\n\n<pre><code>def move_forward_occurences(occurrences, firstListDt):\n    listingResults = []\n    for x in range(0, occurrences):\n        firstListDt = firstListDt + relativedelta(bdays=+2)\n        listingResults.extend(firstListDt)\n    return listingResults\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5526729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b981b8764c2433a6a91331ed37df2e8c?s=128&d=identicon&r=PG&f=1", "display_name": "PalDel", "link": "https://stackoverflow.com/users/5526729/paldel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1446675214, "creation_date": 1446674989, "question_id": 33533034, "link": "https://stackoverflow.com/questions/33533034/python-create-list-from-recursive-loop", "title": "Python - Create List from Recursive Loop", "body": "<p>I'm trying to create a list from my recursive loop. I know it is able to produce the results I need since I've already checked that by printing the results.</p>\n\n<p>Here's my recursive loop:</p>\n\n<pre><code>def move_forward_occurences(occurrences, firstListDt):\n    listingResults = []\n    for x in range(0, occurrences):\n        firstListDt = firstListDt + relativedelta(bdays=+2)\n        listingResults.extend(firstListDt)\n        return listingResults\n</code></pre>\n\n<p>Alternatively, the problem could be that I'm not checking it correctly:</p>\n\n<pre><code>if occurrences != 0:\n    listingResult = move_forward_occurences(occurrences, firstListDt)\n    for result in listingResult:\n        print(result)\n</code></pre>\n\n<p>An explanation of parameters if needed (they're pretty self explanatory already):\noccurrences = number of times to produce result\nfirstListDt = start date</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "parsing", "python-3.x", "function"], "comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446674853, "post_id": 33532957, "comment_id": 54847570, "body": "What happens when ou try it with multiple numbers in the second file?"}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "reply_to_user": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446675545, "post_id": 33532957, "comment_id": 54847916, "body": "I get the error `    line = int(line)  ValueError: invalid literal for int() with base 10: &#39;104\\n88\\n99\\n9988&#39;``"}, {"owner": {"reputation": 5410, "user_id": 1390022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29e994a1301613f40c4cc99909edb0?s=128&d=identicon&r=PG", "display_name": "derricw", "link": "https://stackoverflow.com/users/1390022/derricw"}, "edited": false, "score": 0, "creation_date": 1446675658, "post_id": 33532957, "comment_id": 54847979, "body": "What do you want to happen when there are multiple numbers in the second file?  Does it generate a sequence for each number?  Or does it pick the highest? Or what?"}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446675708, "post_id": 33532957, "comment_id": 54847998, "body": "Oh it should generate output as many times as there are numbers"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1446675731, "post_id": 33532957, "comment_id": 54848008, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> applies here.  We cannot effectively help you until you post your code and accurately describe the problem.  In this case, specifically include the tracing output from your problem run <i>and</i> the full error (text and stack trace)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446679591, "post_id": 33533976, "comment_id": 54849489, "body": "Thanks! But where we are reading the thresholds, we arent allowed to use list comprehensions."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446680082, "post_id": 33533976, "comment_id": 54849667, "body": "Added a version using a loop."}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446680453, "post_id": 33533976, "comment_id": 54849792, "body": "Ok I edited my code as yo suggested(Look in the question, I made an edit) but its still giving me an error <code>OSError: [Errno 9] Bad file descriptor </code>"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446708687, "post_id": 33533976, "comment_id": 54858418, "body": "Are you using the most current version, i.e. the one with <code>with open(filename)</code> in it?"}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446730994, "post_id": 33533976, "comment_id": 54871834, "body": "Yes I am. The code which you see in the question is what I am using. I updated it with your code but it&#39;s still not working....."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446734443, "post_id": 33533976, "comment_id": 54874448, "body": "I put the full function <code>process_file()</code> in my answer. It is a bit different than yours."}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446735680, "post_id": 33533976, "comment_id": 54875339, "body": "Ok, I just tried. Its printing the data from both the files but not the output as replaced by the special characters."}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446735936, "post_id": 33533976, "comment_id": 54875537, "body": "I changed the code in my question as per you suggested so you can have a look at it."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446740455, "post_id": 33533976, "comment_id": 54878897, "body": "The printing of the output was missing. Added: <code>for line in lines: print(line)</code> at the end of <code>process_file()</code>."}, {"owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1446741911, "post_id": 33533976, "comment_id": 54879895, "body": "Ok everything else works. Can we tweak the code in such a manner that it only prints the first file contents only once and then prints the output for as many times as there are numbers in the second file."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "edited": false, "score": 0, "creation_date": 1448136459, "post_id": 33533976, "comment_id": 55460635, "body": "Does it solve your problem? If yes, consider accepting this answer or my second one. <a href=\"http://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a>"}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1446740495, "last_edit_date": 1446740495, "creation_date": 1446679254, "answer_id": 33533976, "question_id": 33532957, "link": "https://stackoverflow.com/questions/33532957/parsing-two-text-files-in-python-for-a-combined-result/33533976#33533976", "title": "Parsing two text files in Python for a combined result", "body": "<p>Read all thresholds:</p>\n\n<pre><code>def get_thresholds(filename):\n    with open(filename) as fobj :\n        return [int(line) for line in fobj if line.strip()]\n</code></pre>\n\n<p>Alternative implementation without the list comprehension:</p>\n\n<pre><code>def get_thresholds(filename):\n    thresholds = []\n    with open(filename) as fobj:\n        for line in fobj:\n            if line.strip():\n               thresholds.append(int(line))\n    return thresholds\n</code></pre>\n\n<p>Modify your function a bit:</p>\n\n<pre><code>def process_file(data_file, threshold):\n    lines = []\n\n    print('Original data:')\n    with open(data_file) as f:\n        for line in f:\n            line = line.strip()\n            print(line)\n\n            replaced_line = '   '.join(\n                replace(chunck, threshold) for chunck in line.split())\n            lines.append(replaced_line)\n\n    print('\\nData replaced with threshold', threshold)\n    for line in lines:\n        print(line)\n</code></pre>\n\n<p>Go through all thresholds:</p>\n\n<pre><code>for threshold in get_thresholds('days.txt'):\n    process_file('candies.txt', threshold)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1446937834, "creation_date": 1446937834, "answer_id": 33588896, "question_id": 33532957, "link": "https://stackoverflow.com/questions/33532957/parsing-two-text-files-in-python-for-a-combined-result/33588896#33588896", "title": "Parsing two text files in Python for a combined result", "body": "<p>This is a re-write of my previous answer. Due to to the long discussion and the many changes it seems clearer to another answer. I chopped the task into smaller sub-tasks and defined a function for each. All functions have docstrings. This is highly recommended. </p>\n\n<pre><code>\"\"\"\nA chocolate company has decided to offer discount on the candy products\nwhich are produced 30 days of more before the current date.\n\nMore story here ...\n\"\"\"\n\n\ndef read_thresholds(filename):\n    \"\"\"Read values for thresholds from file.\n    \"\"\"\n    thresholds = []\n    with open(filename) as fobj:\n        for line in fobj:\n            if line.strip():\n                thresholds.append(int(line))\n    return thresholds\n\n\ndef read_costs(filename):\n    \"\"\"Read the cost from file.\n    \"\"\"\n    lines = []\n    with open(filename) as fobj:\n        for line in fobj:\n            lines.append(line.strip())\n    return lines\n\n\ndef replace(word, threshold):\n    \"\"\"Replace value below threshold with `$`, above threshold with ` `,\n       non-numbers with `?`, and keep the value if it equals the\n       threshold.\n    \"\"\"\n    try:\n        value = int(word)\n    except ValueError:\n        return '?'\n    if value &lt; threshold:\n        return '$'\n    if value &gt; threshold:\n        return ' '\n    return word\n\n\ndef process_costs(costs, threshold):\n    \"\"\"Replace the cost for given threshold and print results.\n    \"\"\"\n    res = []\n    for line in costs:\n        replaced_line = '   '.join(\n            replace(chunck, threshold) for chunck in line.split())\n        res.append(replaced_line)\n\n    print('\\nData replaced with threshold', threshold)\n    for line in res:\n        print(line)\n\n\ndef show_orig(costs):\n    \"\"\"Show original costs.\n    \"\"\"\n    print('Original data:')\n    for line in costs:\n        print(line)\n\n\ndef main(costs_filename, threshold_filename):\n    \"\"\"Replace costs for all thresholds and display results.\n    \"\"\"\n    costs = read_costs(costs_filename)\n    show_orig(costs)\n    for threshold in read_thresholds(threshold_filename):\n        process_costs(costs, threshold)\n\n\nif __name__ == '__main__':\n    main('candies.txt', 'days.txt')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5504983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7529278f0e83eeb0b3cb611ba35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Madelyn Shroeder", "link": "https://stackoverflow.com/users/5504983/madelyn-shroeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446937834, "creation_date": 1446674712, "last_edit_date": 1446735905, "question_id": 33532957, "link": "https://stackoverflow.com/questions/33532957/parsing-two-text-files-in-python-for-a-combined-result", "title": "Parsing two text files in Python for a combined result", "body": "<p>A chocolate company has decided to offer discount on the candy products which are produced 30 days of more before the current date. I have to have a matrix as a print result where the program reads through 2 files, one being the the cost of the different candies of different sizes, and another being the threshold number of days after which the discount is offered. So in this question the two text files look something like this</p>\n\n<p>candies.txt</p>\n\n<pre><code>31 32 19 11 15 30 35 37\n12 34 39 45 66 78 12 7\n76 32 8 2 3 5 18 32 48\n99 102 3 46 88 22 25 21\nfd zz er 23 44 56 77 99 \n44 33 22 55 er ee df 22\n</code></pre>\n\n<p>and the second file days.txt</p>\n\n<pre><code>30\n</code></pre>\n\n<p>But it can have more than one number. It can look something like</p>\n\n<pre><code>30\n\n40\n\n36\n</code></pre>\n\n<p>The desired output is</p>\n\n<pre><code>Discount at days = 30\n\n      $  $  $         \n$                $  $ \n      $ $ $ $  $      \n       $       $  $  $ \n?  ?  ? $       \n      $     ?  ?  ?   $      \n\nDiscount at days = 40\n\nAnd then execute the output accordingly\n</code></pre>\n\n<p>So basically, everywhere the number is under the number given in days.txt it should print a <code>\"$\"</code> sign and everywhere it is more than the number(30 in our case) it should just print spaces in their place. We also have an anomally, where we have the english alphabets in the candies.txt matrix and since we are looking for numbers to check the price and not letters, it should print a <code>\"?\"</code> sign in their place as it is not recognized. </p>\n\n<p>Here's my code</p>\n\n<pre><code>def replace(word, threshold):\n\n    try:\n        value = int(word)\n    except ValueError:\n        return '?'\n    if value &lt; threshold:\n        return '$'\n    if value &gt; threshold:\n        return ' '\n    return word\n\ndef get_threshold(filename):\n    thresholds = []\n    with open(filename) as fobj:\n        for line in fobj:\n            if line.strip():\n               thresholds.append(int(line))\n    return thresholds\n\ndef process_file(data_file, threshold):\n    lines = []\n\n    print('Original data:')\n    with open(data_file) as f:\n        for line in f:\n            line = line.strip()\n            print(line)\n\n            replaced_line = '   '.join(\n                replace(chunck, threshold) for chunck in line.split())\n            lines.append(replaced_line)\n\n    print('\\nData replaced with threshold', threshold)\nfor threshold in get_threshold('days.txt'):\n    process_file('demo.txt', threshold )\n</code></pre>\n\n<p>My question is that my code works when there is only one number in the second file, days.txt but it doesn't work when there are more than one number in the second file. I want it to work when there are multiple numbers in each newline of the second text file. I don't know what I am doing wrong.</p>\n"}, {"tags": ["python", "c", "sockets", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675041, "post_id": 33532942, "comment_id": 54847657, "body": "You are overwriting the name of the string module. Do not use <code>string</code> as identifier. And you seem to be using Python3. Read about the difference of <code>str</code> and <code>bytes</code>/<code>bytearray</code>"}, {"owner": {"reputation": 5410, "user_id": 1390022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29e994a1301613f40c4cc99909edb0?s=128&d=identicon&r=PG", "display_name": "derricw", "link": "https://stackoverflow.com/users/1390022/derricw"}, "edited": false, "score": 0, "creation_date": 1446675353, "post_id": 33532942, "comment_id": 54847811, "body": "Could you post the exact string that you are sending that is not working?"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1446675459, "creation_date": 1446675459, "answer_id": 33533145, "question_id": 33532942, "link": "https://stackoverflow.com/questions/33532942/server-cant-decode-c-string/33533145#33533145", "title": "Server can&#39;t decode c string", "body": "<p>You are sending too much data. This line:</p>\n\n<pre><code>send(client_socket, &amp;message, sizeof(message), 0);\n</code></pre>\n\n<p>sends the entire <code>message</code> buffer. That's not what you want.</p>\n\n<p>Instead, try this:</p>\n\n<pre><code>send(client_socket, message, strlen(message), 0);\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 5522118, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065693576782846/picture?type=large", "display_name": "Uifalean Sergiu Mihai", "link": "https://stackoverflow.com/users/5522118/uifalean-sergiu-mihai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 33533145, "answer_count": 1, "score": 1, "last_activity_date": 1446676699, "creation_date": 1446674673, "last_edit_date": 1592644375, "question_id": 33532942, "link": "https://stackoverflow.com/questions/33532942/server-cant-decode-c-string", "title": "Server can&#39;t decode c string", "body": "<p>i have yet another compatibility between python and c at basic computer networks.</p>\n<p>server.py</p>\n<pre><code>import socket\nimport threading\nthreads=[]\nglobal c\nc=0\ndef client_thread(client_socket):\n    global c\n    count=c\n    try:\n        message=client_socket.recv(1010)\n        \n    except socket.error as error:\n        print('error t recv:',error)\n        exit(1)\n    print('Client #',count,' sent:',message.decode('utf-8'))\n    c=c-1\n    client_socket.close()\ndef main():\n    server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n    try:\n        server.bind((str(socket.INADDR_ANY),1234))\n    except socket.error as error:\n        print('binding error:',error)\n        exit(1)\n    server.listen(5)\n    print('Server running')\n    while(1):\n        client_socket, _ =server.accept()\n        print('Client connected.')\n        th= threading.Thread(target=client_thread,args=(client_socket,))\n        threads.append(th)\n        global c\n        c=c+1\n        th.start()\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p>My server should receive a string from the client and then print it,it's just a simplified way for me to check the error.</p>\n<p>client.c</p>\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\nint main(int argc, char* argv[]){\n    int client_socket = socket(AF_INET, SOCK_STREAM, 0);\n    if (client_socket &lt; 0){\n        perror(&quot;Error at creating socket\\n&quot;);\n        exit(1);\n    }\n    struct sockaddr_in server_address;\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_port= ntohs(1234);\n    server_address.sin_family=AF_INET;\n    server_address.sin_addr.s_addr= inet_addr(&quot;127.0.0.1&quot;);\n    if (connect(client_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address)) &lt; 0){\n        perror(&quot;Can not connect to server\\n&quot;);\n        exit(1);\n    }\n    printf(&quot;Give String:&quot;);\n    char message[1000];\n    \n    scanf(&quot;%s&quot;,message);\n    send(client_socket, message, strlen(message), 0);\n    return 0;\n}\n</code></pre>\n<p>The client connects,i read the string,everything ok,but my server gives me the following error:</p>\n<blockquote>\n<p>print('Client #',count,' sent:',message.decode('utf-8'))</p>\n<p>UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position\n3: invalid start byte</p>\n</blockquote>\n<p>Mentioning that i tried a bunch of encoding for the decode,nothing seems to work.</p>\n<p>Is there any way to make it work other than sending the characters one by one?Any information you can direct me to would be helpful.</p>\n"}, {"tags": ["python", "matplotlib-basemap"], "answers": [{"tags": [], "owner": {"reputation": 1243, "user_id": 2383070, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/T6XwS.jpg?s=128&g=1", "display_name": "blaylockbk", "link": "https://stackoverflow.com/users/2383070/blaylockbk"}, "is_accepted": true, "score": 6, "last_activity_date": 1448083244, "creation_date": 1448083244, "answer_id": 33840002, "question_id": 33532925, "link": "https://stackoverflow.com/questions/33532925/python-basemap-plot-coastlines-but-dont-plot-small-features/33840002#33840002", "title": "Python Basemap: Plot coastlines but dont plot small features", "body": "<p>Awh, figured it out...When creating the map you can specify the \"area_thresh\" so set that to a large number and it wont outline the small lakes. <a href=\"http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap\" rel=\"noreferrer\">See Basemap documentation here.</a> </p>\n\n<pre><code>m = Basemap(resolution='i',area_thresh=10000.,projection='lcc',\\\nlat_0=38.5,lon_0=-97.5,lat_1=38.5,\\ lat_2=38.5,\\ \nllcrnrlon=bot_left_lon,llcrnrlat=bot_left_lat,\\ \nurcrnrlon=top_right_lon,urcrnrlat=top_right_lat,) \n</code></pre>\n"}], "owner": {"reputation": 1243, "user_id": 2383070, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/T6XwS.jpg?s=128&g=1", "display_name": "blaylockbk", "link": "https://stackoverflow.com/users/2383070/blaylockbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 1, "accepted_answer_id": 33840002, "answer_count": 1, "score": 0, "last_activity_date": 1448083244, "creation_date": 1446674613, "question_id": 33532925, "link": "https://stackoverflow.com/questions/33532925/python-basemap-plot-coastlines-but-dont-plot-small-features", "title": "Python Basemap: Plot coastlines but dont plot small features", "body": "<p>I am using python basemap to draw the coastline around the United States the the Great Lakes. When I increase the resolution of the map drawn to 'i' for intermediate, it draws lots of small water features. Is there a way to only draw the coastlines around the oceans and great lakes, and not all small water features?</p>\n\n<p>I have this...\n<a href=\"https://i.stack.imgur.com/D0aJ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D0aJ5.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I want this... No small lakes, but want the coastline and states drawn at higher resolution.\n<a href=\"https://i.stack.imgur.com/ORqwN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ORqwN.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "hex", "xor"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5004994, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b6823e0ff892907659fd28b63e496f7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aero", "link": "https://stackoverflow.com/users/5004994/aero"}, "edited": false, "score": 0, "creation_date": 1446674693, "post_id": 33532932, "comment_id": 54847458, "body": "I&#39;ve done that, but now I get this error: invalid literal for int() with base 16:"}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446674783, "post_id": 33532932, "comment_id": 54847518, "body": "<code>invalid literal for int() with base 16:</code> what?"}, {"owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "edited": false, "score": 0, "creation_date": 1446674793, "post_id": 33532932, "comment_id": 54847527, "body": "Could you paste here the particular string that gives that error?"}, {"owner": {"reputation": 77, "user_id": 5004994, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b6823e0ff892907659fd28b63e496f7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aero", "link": "https://stackoverflow.com/users/5004994/aero"}, "edited": false, "score": 0, "creation_date": 1446674826, "post_id": 33532932, "comment_id": 54847547, "body": "packet = &quot;27750001120007023e12a4f67b12482fb389f8f4a575f4e686fe6305d89&zwnj;&#8203;2d5dda87045864462bf7&zwnj;&#8203;8cfb03f7ce511259a299&zwnj;&#8203;97d9d7a994db56d13503&zwnj;&#8203;e643f0dfb3d4e5c7b5b1&zwnj;&#8203;2f0296e26316ff2be400&zwnj;&#8203;9dd9e935d1357fa49f1a&zwnj;&#8203;f49df7edd6594c2a62b0&zwnj;&#8203;d786c6b3ccecf8619355&zwnj;&#8203;b4710c3af163afcf2e63&zwnj;&#8203;51de55ae9fdd80fae985&zwnj;&#8203;5952edbd220958c42925&zwnj;&#8203;82476e29adeb95a63400&zwnj;&#8203;8d6fdd966a147584d8e0&zwnj;&#8203;646c6bb4292a6847577a&zwnj;&#8203;1b4a7114848eb1d7b93a&zwnj;&#8203;12f7a935e9277e14905f&zwnj;&#8203;25a24677511922f23069&zwnj;&#8203;73bda16d26f03c78efda&zwnj;&#8203;934070a693e532d9e7e0&zwnj;&#8203;9d822597836b911a557d&zwnj;&#8203;55e7d3540a1aa3579389&zwnj;&#8203;90c6fbeb81f63393c85b&zwnj;&#8203;ff1e50e9893b4db54715&zwnj;&#8203;2e4bedfb8ddbddb0ae1e&zwnj;&#8203;b314c70608ead310db4c&zwnj;&#8203;c6f&quot;.decode(&quot;hex&quot;)"}], "tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1446675088, "last_edit_date": 1446675088, "creation_date": 1446674645, "answer_id": 33532932, "question_id": 33532900, "link": "https://stackoverflow.com/questions/33532900/xor-operand-on-two-strings-in-python/33532932#33532932", "title": "XOR operand on two strings in python?", "body": "<p><code>int(\"ff048deadbeef\", 16)</code> converts from hex to int.</p>\n\n<p>Edit: seems like OP intended to use <code>x.decode(codec)</code> before converting.</p>\n"}], "owner": {"reputation": 77, "user_id": 5004994, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b6823e0ff892907659fd28b63e496f7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aero", "link": "https://stackoverflow.com/users/5004994/aero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 33532932, "answer_count": 1, "score": 0, "last_activity_date": 1446675088, "creation_date": 1446674473, "question_id": 33532900, "link": "https://stackoverflow.com/questions/33532900/xor-operand-on-two-strings-in-python", "title": "XOR operand on two strings in python?", "body": "<p>I am trying to use the XOR operation using two strings in python.</p>\n\n<p>Here is my script:</p>\n\n<pre><code>packet = \"277500011200\".decode(\"hex\")\nxor = codecs.decode(xor, 'hex')\n\nprint packet ^ xor\n</code></pre>\n\n<p>the xor variable is supposed to be basically a key, where if I xor them together they will decode the packet. However, it is telling me that they are both strings. How do I change the type to hex so that they can work properly?</p>\n"}, {"tags": ["python", "excel", "validation", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1446710098, "post_id": 33532851, "comment_id": 54859102, "body": "It&#39;s worth noting that openpyxl doesn&#39;t actually impose a limit."}], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 5517926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cb3f11c5ab7130fa6bca33a0747118?s=128&d=identicon&r=PG", "display_name": "Kris B", "link": "https://stackoverflow.com/users/5517926/kris-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1446674822, "creation_date": 1446674822, "answer_id": 33532984, "question_id": 33532851, "link": "https://stackoverflow.com/questions/33532851/working-around-formula-256-character-limit-in-data-validation-in-openpyxl-module/33532984#33532984", "title": "Working around formula 256 character limit in data validation in openpyxl module", "body": "<p>Instead of hard coding data validation as a list of strings.\nEG: item1,item2,item3,item4,etc</p>\n\n<p>Try doing the following:</p>\n\n<p>1) Load item1,item2,item3,item4,etc into Column A of say 'Sheet3' in excel.</p>\n\n<p>2) When selecting 'List' for Data Validation, use a formula.</p>\n\n<p>a) Use a static formula like '=A1:A1000'. Where 1000 is your last element if your list is a fixed number of elements.</p>\n\n<p>b) Use a dynamic formula if you don't know the number of elements and never want to re-adjust the data validation:</p>\n\n<pre><code>=OFFSET('Sheet3'!$A$1,0,0,COUNTA('Sheet3'!$A:$A) - 0,1)\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 2419182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eRRxJ.jpg?s=128&g=1", "display_name": "human", "link": "https://stackoverflow.com/users/2419182/human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 33532984, "answer_count": 1, "score": 0, "last_activity_date": 1446674822, "creation_date": 1446674321, "question_id": 33532851, "link": "https://stackoverflow.com/questions/33532851/working-around-formula-256-character-limit-in-data-validation-in-openpyxl-module", "title": "Working around formula 256 character limit in data validation in openpyxl module", "body": "<p>I am trying to add data validation to a cell from a list of prepared strings in an openpyxl module for python. </p>\n\n<p>The problem is, all the strings together take more than 256 characters limit, so data validation can't be created.</p>\n\n<p>Does anyone know a way around this?</p>\n"}, {"tags": ["python", "python-3.4"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 3, "creation_date": 1446673905, "post_id": 33532737, "comment_id": 54847020, "body": "This should be on code review."}, {"owner": {"reputation": 80892, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1446679578, "post_id": 33532737, "comment_id": 54849481, "body": "I&#39;m voting to close this question as off-topic because It belongs on <a href=\"https://codereview.stackexchange.com\">Code Review</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 1, "last_activity_date": 1446679821, "creation_date": 1446679821, "answer_id": 33534088, "question_id": 33532737, "link": "https://stackoverflow.com/questions/33532737/is-this-code-simplified-should-i-use-more-functions/33534088#33534088", "title": "Is this code simplified? Should I use more functions?", "body": "<p>Some problems to be aware of:</p>\n\n<ul>\n<li><p>the construct</p>\n\n<pre><code>for i in range(len(studentList)):\n    alist = studentList[i]\n    printGender(alist)\n</code></pre>\n\n<p>is pretty nasty; if you actually need <code>i</code> you should use</p>\n\n<pre><code>for i, student in enumerate(student_list):\n    print_gender(student)\n</code></pre>\n\n<p>otherwise</p>\n\n<pre><code>for student in student_list:\n    print_gender(student)\n</code></pre></li>\n<li><p>Your functions are poorly named; they don't do what they say they do! <code>printGender</code> prints female students, <code>printMale</code> prints students from 2010, etc. Similarly, your variable names are poorly chosen; <code>alist</code> is <em>not</em> a list of students, it is a single student.</p></li>\n<li><p>You seem to have a text string per student, at a guess something like <code>2009, 176915, Jones, Susan, Female, CSC</code>; but you make no attempt to separate out fields. This will lead to annoying problems with students like <code>2009, 292010, Male, Jill, Female, RCSCA</code> who will be reported as a student in both 2009 and 2010 (false match on student number), and both female and male (false match on last name), and in CSC (false match on course name). You really need to use a better data format - whether .csv or .json or a database, anything which returns named fields - to solve this problem.</p></li>\n<li><p>Your search options are non-orthogonal and limited to pre-coded options; you have no way of searching, for example, for all CSC students in 2007 without rewriting your program.</p></li>\n</ul>\n\n<p>Fixing these problems leads you to something like</p>\n\n<pre><code>import json\n\ndef record_print_format(record):\n    return \"{Year:4} {Id:6} {Gender:6} {Firstname:&gt;20} {Lastname:&lt;20} {Course:6}\".format(**record)\n\ndef show_records(records, format_fn=record_print_format):\n    for r in records:\n        print(format_fn(r))\n    num = len(records)\n    print(\"{} records:\".format(num))\n\ndef filter_records(records, field, value):\n    return [r for r in records if r[field] == value]\n\ndef match_year(records, year):\n    return filter_records(records, \"Year\", year)\n\ndef match_gender(records, gender):\n    return filter_records(records, \"Gender\", gender)\n\ndef match_course(records, course):\n    return filter_records(records, \"Course\", course)\n\ndef main():\n    with open(\"student_list.json\") as studentfile:\n        all_students = json.load(studentfile)\n        records = all_students\n\n    while True:\n        print(\"1: Filter by year\")\n        print(\"2: Filter by gender\")\n        print(\"3: Filter by course\")\n        print(\"8: Show results\")\n        print(\"9: Clear filters\")\n        print(\"0: Exit\")\n\n        option = input(\"Please pick an option: \").strip()\n\n        if option == \"1\":\n            year = input(\"Which year? \").strip()\n            records = match_year(records, year)\n        elif option == \"2\":\n            gender = input(\"Which gender? [Male|Female] \").strip()\n            records = match_gender(records, gender)\n        elif option == \"3\":\n            course = input(\"Which course? \").strip()\n            records = match_course(records, course)\n        elif option == \"8\":\n            show_records(records)\n        elif option == \"9\":\n            records = all_students\n        elif option == \"0\":\n            print(\"Goodbye!\")\n            break\n        else:\n            print(\"I don't recognize that option.\")\n\nif __name__==\"__main__\":\n    main()\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5521577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1d6cd3ce9a0d944a289ceed1ee005f?s=128&d=identicon&r=PG&f=1", "display_name": "trippt02", "link": "https://stackoverflow.com/users/5521577/trippt02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33534088, "answer_count": 1, "score": -1, "last_activity_date": 1446679821, "creation_date": 1446673870, "last_edit_date": 1446674476, "question_id": 33532737, "link": "https://stackoverflow.com/questions/33532737/is-this-code-simplified-should-i-use-more-functions", "title": "Is this code simplified? Should I use more functions?", "body": "<p>So I'm working on this program that opens an external file and then runs through it to see if it contains specific information. Is there a way to simplify it or is the way it is now the most efficient way write this?</p>\n\n<pre><code>def printGender(alist):\n    if \"Female\" in alist:\n        print(alist)\n        print(\"Female Students\")\n\ndef maleInfo(blist):\n    if \"2010\" in blist:\n        print(blist)\n        print(\"Students who enrolled in 2010\")\n\ndef csc2010(clist):\n   if \"CSC\" in clist and \"2010\" in clist and \"Female\" in clist:\n        print(clist)\n        print(\"Female students who registered in CSC in 2010\")\n\ndef main():\n    ref = open(\"file1.txt\",\"r\")\n\n    studentList = ref.readlines()\n    ask = 10\n    while ask != 0:\n    print(\"1) print all female info\")\n    print(\"2) display all male info from 2010\")\n    print(\"3) display female students who registered for CSC in 2010\")\n    ask = int(input(\"Enter option 1, 2, 3 or 0 to quit: \"))\n    if ask == 1:\n        for i in range(len(studentList)):\n            alist = studentList[i]\n            printGender(alist)\n    elif ask == 2:\n        for i in range(len(studentList)):\n            blist = studentList[i]\n            maleInfo(blist)\n    elif ask == 3:\n        for i in range(len(studentList)):\n            clist = studentList[i]\n            csc2010(clist)\n    elif ask == 0:\n        print(\"You chose to quit\")\n        break\n    else:\n        print(\"Not a Valid input\")\n        continue\n\n    ref.close()\n\nmain()\n</code></pre>\n\n<p>Is there a way to simplify this code so that I don't create three seperate list in the main function.</p>\n\n<pre><code>    if ask == 1:\n        for i in range(len(studentList)):\n            alist = studentList[i]\n            printGender(alist)\n    elif ask == 2:\n        for i in range(len(studentList)):\n            blist = studentList[i]\n            maleInfo(blist)\n    elif ask == 3:\n        for i in range(len(studentList)):\n            clist = studentList[i]\n            csc2010(clist)\n    elif ask == 0:\n        print(\"You chose to quit\")\n        break\n    else:\n    ect...\n</code></pre>\n\n<p>I was curious to see if there was a shorter way to get the same result. Maybe using a function that runns that section of code but I'm not sure how to do that.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1446674214, "post_id": 33532709, "comment_id": 54847192, "body": "I don&#39;t understand the transformation you&#39;re going for. Can you describe step by step how to start with what you have and end up with what you want? Not only will it probably get you better help, it might even &#39;click&#39; how to do it yourself."}, {"owner": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1446674611, "post_id": 33532709, "comment_id": 54847414, "body": "Just treat the initial list as two separate lists. And you will be fine."}, {"owner": {"reputation": 1801, "user_id": 4833034, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4ef57cadd8c900c5be4096eb319c99c9?s=128&d=identicon&r=PG&f=1", "display_name": "Gilaztdinov Rustam", "link": "https://stackoverflow.com/users/4833034/gilaztdinov-rustam"}, "reply_to_user": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1446674882, "post_id": 33532709, "comment_id": 54847590, "body": "@sobolevn I can&#39;t treat initial list, because this is synthetic data, for settings a way, real list have a lot of keys and I can&#39;t do it manually."}], "answers": [{"tags": [], "owner": {"reputation": 513, "user_id": 5490634, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/40fb5ac8f3fce5c4056c2a762a040b88?s=128&d=identicon&r=PG&f=1", "display_name": "Vadim", "link": "https://stackoverflow.com/users/5490634/vadim"}, "is_accepted": true, "score": 1, "last_activity_date": 1446678114, "creation_date": 1446678114, "answer_id": 33533722, "question_id": 33532709, "link": "https://stackoverflow.com/questions/33532709/python-list-of-dictionary-append-value-to-different-keys/33533722#33533722", "title": "Python list of dictionary append value to different keys", "body": "<p>Step 1 - Split the dictionary first, otherwise, it is not clear what is the logic to split them automatically. \nStep 2 - iterate through list of dictionaries and apply some if statements.\nHere is what I think it should look like.  Hope I have got the logic behind thise right:</p>\n\n<pre><code>d = [{0: ['1', '2'], 1: '3', 2: '4'},\n     {0: ['1', '2'], 1: '6', 2: '7'},\n     {0: ['1111', '2222'], 1: '6', 2: '7'},\n     {0: ['1111', '2222'], 1: '66', 2: '77'}\n    ]\n\n   #step 1\n    def splitList(l, n):\n        \"\"\"\n        takes list and positions to take from the list    \n        \"\"\"\n        output = []\n        for p in n:\n            output.append(l[p])\n        return output\n\n    #step 2\n    def orgDict(d):\n        \"\"\"\n        modifies list of dictionaries into 1\n        \"\"\"\n        d_output = {}    \n        for d_ind in d:                \n            for d_ind2 in d_ind:\n                if (d_output.get(d_ind2) == None):\n                    if (type(d_ind[d_ind2]) == list):\n                        d_output[d_ind2] = d_ind[d_ind2]\n                    else:\n                        d_output[d_ind2] = [d_ind[d_ind2]]\n                else:\n                    if ((d_ind[d_ind2] not in d_output[d_ind2]) and (d_ind[d_ind2] != d_output[d_ind2])):\n                        d_output[d_ind2].append(d_ind[d_ind2])\n        return d_output\n\n#tests\n#expected output:\n#{0: ['1', '2'], 1: ['3', '6'], 2: ['4', '7']}\nprint orgDict(splitList(d,[0,1]))\n\n#expected output:\n#{0: ['1111', '2222'], 1: ['6', '66'], 2: ['7', '77']}\nprint orgDict(splitList(d,[2,3]))\n</code></pre>\n"}], "owner": {"reputation": 1801, "user_id": 4833034, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4ef57cadd8c900c5be4096eb319c99c9?s=128&d=identicon&r=PG&f=1", "display_name": "Gilaztdinov Rustam", "link": "https://stackoverflow.com/users/4833034/gilaztdinov-rustam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33533722, "answer_count": 1, "score": -2, "last_activity_date": 1446678114, "creation_date": 1446673781, "last_edit_date": 1446675445, "question_id": 33532709, "link": "https://stackoverflow.com/questions/33532709/python-list-of-dictionary-append-value-to-different-keys", "title": "Python list of dictionary append value to different keys", "body": "<p>Suppose I have this list with dictionaries:</p>\n\n<pre><code>In [5]: m\n\nOut[5]: [{0: ['a', 'b'], 1: '1', 2: '2'},\n         {0: ['a', 'b'], 1: '3', 2: '4'},\n         {0: ['xx', 'yy'], 1: '100', 2: '200'},\n         {0: ['xx', 'yy'], 1: '300', 2: '400'}]\n</code></pre>\n\n<p>I do this:</p>\n\n<pre><code>In [6]: r = defaultdict(list)\n\nIn [7]: for k, v in ((k, v) for row in m for k, v in row.iteritems()):\n            r[k].append(v)\n</code></pre>\n\n<p>And it return:</p>\n\n<pre><code>In [8]: r\nOut[8]: defaultdict(list,\n        {0: [['a', 'b'], ['a', 'b'], ['xx', 'yy'], ['xx', 'yy']],\n         1: ['1', '3', '100', '300'],\n         2: ['2', '4', '200', '400']})\n</code></pre>\n\n<p>But I want other thing, like this:</p>\n\n<pre><code>        {0: ['a', 'b'],\n         1: ['1', '3'],\n         2: ['2', '4']}, \n\n        {0: ['xx', 'yy'],\n         1: ['100', '300'],\n         2: ['200', '400']}\n</code></pre>\n\n<p>How can i do this? I want to take the same value in the key 0 and collect them all other values found in other keys.</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "odbc", "pyodbc", "advantage-database-server"], "answers": [{"tags": [], "owner": {"reputation": 13704, "user_id": 426242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CEL49.jpg?s=128&g=1", "display_name": "Jens M&#252;hlenhoff", "link": "https://stackoverflow.com/users/426242/jens-m%c3%bchlenhoff"}, "is_accepted": true, "score": 3, "last_activity_date": 1457180419, "last_edit_date": 1457180419, "creation_date": 1446725226, "answer_id": 33544131, "question_id": 33532699, "link": "https://stackoverflow.com/questions/33532699/how-can-i-connect-to-local-advantage-database-using-pyodbc-in-python/33544131#33544131", "title": "How can i connect to local advantage database using pyodbc in python?", "body": "<p>The name of the driver is <code>Advantage StreamlineSQL ODBC</code>, so the bare minimum connect string is:</p>\n\n<pre><code>DRIVER={Advantage StreamlineSQL ODBC};DataDirectory=D:\\Temp\n</code></pre>\n\n<p>Other optinal options are:</p>\n\n<pre><code>DefaultType=Advantage\nUser ID=xxx\nPassword=xxx\nServerTypes=2\nAdvantageLocking=ON\nCharSet=ANSI\nLanguage=ANSI\nDescription=My ADS connection\nLocking=Record\nMaxTableCloseCache=25\nMemoBlockSize=64\nRows=False\nCompression=Internet\nCommType=TCP_IP\nTLSCertificate=     \nTLSCommonName=\nTLSCiphers=\nDDPassword=Dictionary Password\nEncryptionType=\nFIPS=False\nTrimTrailingSpaces=True\nSQLTimeout=600\nRightsChecking=OFF    \n</code></pre>\n\n<p>If you want to use the Local Server you have to pass <code>ServerTypes=1</code> like you already have in your original string.</p>\n\n<p>For more options and documentation see also:</p>\n\n<ul>\n<li><a href=\"http://devzone.advantagedatabase.com/dz/webhelp/Advantage11.1/odbc_odbc_data_source_keys.htm\" rel=\"nofollow\">The official documentation</a> </li>\n<li><a href=\"https://www.connectionstrings.com/sybase-advantage/\" rel=\"nofollow\">ConnectionStrings.com</a></li>\n</ul>\n"}], "owner": {"reputation": 83, "user_id": 1639752, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d41c604bdb6f8ffe984395079cf67e37?s=128&d=identicon&r=PG", "display_name": "enovacreations", "link": "https://stackoverflow.com/users/1639752/enovacreations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1633, "favorite_count": 0, "accepted_answer_id": 33544131, "answer_count": 1, "score": 1, "last_activity_date": 1457180419, "creation_date": 1446673738, "question_id": 33532699, "link": "https://stackoverflow.com/questions/33532699/how-can-i-connect-to-local-advantage-database-using-pyodbc-in-python", "title": "How can i connect to local advantage database using pyodbc in python?", "body": "<p>As far as i can understand to use pyodbc you have to </p>\n\n<pre><code> cnxn = pyodbc.connect('DRIVER={Advantage ODBC Driver};SERVER=local;DataDirectory=\\\\AltaDemo\\Demo\\AltaPoint.add;DATABASE=AltaPoint;UID=admin;PWD=admin;ServerTypes=1;')\n cursor = cnxn.cursor()\n</code></pre>\n\n<p>This is the error i get from the console when i run this\nError: ('IM002', '[IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified (0) (SQLDriverConnect)')</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 2771, "user_id": 400026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/db027d152eff5e662f1bd743acb363d0?s=128&d=identicon&r=PG", "display_name": "Daniel Voina", "link": "https://stackoverflow.com/users/400026/daniel-voina"}, "edited": false, "score": 0, "creation_date": 1446674372, "post_id": 33532697, "comment_id": 54847294, "body": "Isn&#39;t NavigableString helping? You can retrieve the string in a tag as described here: <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigablestring\" rel=\"nofollow noreferrer\">crummy.com/software/BeautifulSoup/bs4/doc/#navigablestring</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "edited": false, "score": 0, "creation_date": 1446675904, "post_id": 33532910, "comment_id": 54848080, "body": "The question is how to get <code>I linked to</code> without <code>example.com</code>."}, {"owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446767272, "post_id": 33532910, "comment_id": 54893555, "body": "Yes. In this case, I don&#39;t want example.com"}], "tags": [], "owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674511, "creation_date": 1446674511, "answer_id": 33532910, "question_id": 33532697, "link": "https://stackoverflow.com/questions/33532697/extract-content-with-beautifulsoup-and-python/33532910#33532910", "title": "Extract content with BeautifulSoup and Python", "body": "<p>BeautifulSoup has a <code>get_text</code> method. <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text\" rel=\"nofollow\">Maybe this is what you want.</a></p>\n\n<p>From their documentation:</p>\n\n<pre><code>markup = '&lt;a href=\"http://example.com/\"&gt;\\nI linked to &lt;i&gt;example.com&lt;/i&gt;\\n&lt;/a&gt;'\nsoup = BeautifulSoup(markup)\n\nsoup.get_text()\nu'\\nI linked to example.com\\n'\nsoup.i.get_text()\nu'example.com'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "edited": false, "score": 0, "creation_date": 1446676023, "post_id": 33533008, "comment_id": 54848141, "body": "Often the wanted text contains some useful tags like <code>em</code> and <code>strong</code>."}, {"owner": {"reputation": 608, "user_id": 2415512, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490105729/picture?type=large", "display_name": "Marco Tompitak", "link": "https://stackoverflow.com/users/2415512/marco-tompitak"}, "reply_to_user": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "edited": false, "score": 0, "creation_date": 1446676146, "post_id": 33533008, "comment_id": 54848197, "body": "You have to find some kind of structure or pattern to the information you want to parse. There&#39;s no way Beautiful Soup can help you otherwise. You&#39;ll need to have a distinction between tags you want to keep and tags you want to throw away."}], "tags": [], "owner": {"reputation": 608, "user_id": 2415512, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490105729/picture?type=large", "display_name": "Marco Tompitak", "link": "https://stackoverflow.com/users/2415512/marco-tompitak"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674903, "creation_date": 1446674903, "answer_id": 33533008, "question_id": 33532697, "link": "https://stackoverflow.com/questions/33532697/extract-content-with-beautifulsoup-and-python/33533008#33533008", "title": "Extract content with BeautifulSoup and Python", "body": "<p>If the text you want is never within any additional tags, as in your example, you can use <code>extract()</code> to get rid of all the tags and their contents:</p>\n\n<pre><code>html = '&lt;div class=\"content\"&gt;\\\n    &lt;blockquote&gt;\\\n        &lt;div&gt;\\\n            &lt;cite&gt;User write:&lt;/cite&gt;\\\n               I DO NOT WANT THIS  &lt;img class=\"smilies\" alt=\":116:\" title=\"116\"&gt;\\\n        &lt;/div&gt;\\\n    &lt;/blockquote&gt;\\\n    &lt;br/&gt;\\\n    THIS IS THE COMMENT THAT I NEED!\\\n&lt;/div&gt;'\n\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(html, 'lxml')\ndiv = soup.find('div', class_='content')\ntags = div.findAll(recursive=False)\nfor tag in tags:\n  tag.extract()\ntext = div.get_text(strip=True)\nprint(text)\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>THIS IS THE COMMENT THAT I NEED!\n</code></pre>\n\n<p>To deal with emoticons, you'll have to do something more complicated. You'll probably have to define a list of emoticons to recognize yourself, and then parse the text to look for them.</p>\n"}, {"comments": [{"owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446766912, "post_id": 33533037, "comment_id": 54893423, "body": "Thank you sooo much! That was exactaly what I needed! But I&#39;m still having problems with some comments.  For example:   &lt;div class=&quot;content&quot;&gt;&lt;blockquote&gt;&lt;div&gt;&lt;cite&gt;USER:&lt;/cite&gt;I DON&#39;T THIS  &lt;img class=&quot;smilies&quot; src=&quot;./images/smilies/1arriba.gif&quot; alt=&quot;:arriba:&quot; title=&quot;Arriba&quot; /&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br /&gt;I WANT THIS&lt;/div&gt;   But the ouput with your code is: USER: I DON&#39;T WANT THIS     I WANT THIS"}, {"owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446767222, "post_id": 33533037, "comment_id": 54893540, "body": "Hahaha you&#39;re right! I don&#39;t use this forum very often, just for search questions."}, {"owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "reply_to_user": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446767258, "post_id": 33533037, "comment_id": 54893551, "body": "So you need &#39;All text in the class .content but after blockquote&#39;?"}, {"owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446767812, "post_id": 33533037, "comment_id": 54893751, "body": "Hmm... Supose you&#39;re in a typical forum web page. I write a comment, with emoticons, bold font, etc. A few minutes later you cite my comment (with the emoticons, bold font, etc) and you add you own emoticons, bold and italic font. Well, I need just YOUR comment, with no emoticon but the text, no matter if it&#39;s in bold, italic or regular font."}, {"owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "reply_to_user": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1446768887, "post_id": 33533037, "comment_id": 54894078, "body": "@nikolat328: Updated the answer... If you have additional questions it&#39;s okay to open a new one."}], "tags": [], "owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "is_accepted": true, "score": 1, "last_activity_date": 1446768806, "last_edit_date": 1446768806, "creation_date": 1446675014, "answer_id": 33533037, "question_id": 33532697, "link": "https://stackoverflow.com/questions/33532697/extract-content-with-beautifulsoup-and-python/33533037#33533037", "title": "Extract content with BeautifulSoup and Python", "body": "<p>Use <code>decompose</code> <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#decompose\" rel=\"nofollow\">http://www.crummy.com/software/BeautifulSoup/bs4/doc/#decompose</a></p>\n\n<p>Decompose extracts tags that you don't want. In your case:</p>\n\n<pre><code>soup.blockquote.decompose()\n</code></pre>\n\n<p>or all unwanted tags:</p>\n\n<pre><code>for tag in ['blockquote', 'img', ... ]:\n    soup.find(tag).decompose()\n</code></pre>\n\n<p>Your example:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n&gt;&gt;&gt; html = \"\"\"&lt;div class=\"content\"&gt;\n...     &lt;blockquote&gt;\n...         &lt;div&gt;\n...             &lt;cite&gt;User write:&lt;/cite&gt;\n...                I DO NOT WANT THIS  &lt;img class=\"smilies\" alt=\":116:\"    title=\"116\"&gt;\n...         &lt;/div&gt;\n...     &lt;/blockquote&gt;\n...     &lt;br/&gt;\n...     THIS IS THE COMMENT THAT I NEED!\n... &lt;/div&gt;\"\"\"\n&gt;&gt;&gt; soup = BeautifulSoup(html, 'html.parser')\n&gt;&gt;&gt; soup.find('blockquote').decompose()\n&gt;&gt;&gt; soup.find(\"div\", {\"class\" : \"content\"}).text.strip()\nu'THIS IS THE COMMENT THAT I NEED!'\n</code></pre>\n\n<h2>Update</h2>\n\n<p>Sometimes all you have is a tag starting point but you are actually interested in the content <em>before</em> or <em>after</em> that starting point. You can use <code>.next_sibling</code> and <code>.previous_sibling</code> to navigate between page elements that are on the same level of the parse tree:</p>\n\n<pre><code>&gt;&gt;&gt; html = \"\"\"&lt;div&gt;No&lt;blockquote&gt;No&lt;/blockquote&gt;Yes.&lt;em&gt;Yes!&lt;/em&gt;Yes?&lt;/div&gt;No!\"\"\"\n&gt;&gt;&gt; soup = BeautifulSoup(html, 'html.parser')\n&gt;&gt;&gt; elm = soup.blockquote.next_sibling\n&gt;&gt;&gt; txt = \"\"\n&gt;&gt;&gt; while elm:\n...    txt += elm.string\n...    elm = elm.next_sibling\n... \n&gt;&gt;&gt; print(txt)\nu'Yes.Yes!Yes?'\n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2063, "favorite_count": 1, "accepted_answer_id": 33533037, "answer_count": 3, "score": 0, "last_activity_date": 1446768806, "creation_date": 1446673731, "question_id": 33532697, "link": "https://stackoverflow.com/questions/33532697/extract-content-with-beautifulsoup-and-python", "title": "Extract content with BeautifulSoup and Python", "body": "<p>I'm trying to scrap a forum but I can't deal with the comments, because the users use emoticons, and bold font, and cite previous messages, and and and...</p>\n\n<p>For example, here's one of the comments that I have a problem with:</p>\n\n<pre><code>&lt;div class=\"content\"&gt;\n    &lt;blockquote&gt;\n        &lt;div&gt;\n            &lt;cite&gt;User write:&lt;/cite&gt;\n               I DO NOT WANT THIS  &lt;img class=\"smilies\" alt=\":116:\" title=\"116\"&gt;\n        &lt;/div&gt;\n    &lt;/blockquote&gt;\n    &lt;br/&gt;\n    THIS IS THE COMMENT THAT I NEED!\n&lt;/div&gt;\n</code></pre>\n\n<p>I searching for help for the last 4 days and I couldn't find anything, so I decided to ask here.</p>\n\n<p>This is the code that I'm using:</p>\n\n<pre><code>def make_soup(url):\n    html = urlopen(url).read()\n    return BeautifulSoup(html, \"lxml\")\n\ndef get_messages(url):\n    soup = make_soup(url)\n\n    msg = soup.find(\"div\", {\"class\" : \"content\"})\n\n    # I get in msg the hole message, exactly as I wrote previously\n    print msg\n\n    # Here I get:\n    # 1. &lt;blockquote&gt; ... &lt;/blockquote&gt;\n    # 2. &lt;br/&gt;\n    # 3. THIS IS THE COMMENT THAT I NEED!\n    for item in msg.children:\n        print item\n</code></pre>\n\n<p>I'm looking for a way to deal with messages in a general way, no matter how they are. Sometimes they put emoticons between the text and I need to remove them and get the hole message (in this situation, bsp will put each part of the message (first part, emoticon, second part) in different items).</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 0, "creation_date": 1526670163, "post_id": 35283818, "comment_id": 87851114, "body": "If you are getting a label printed for CSRF token, then see the comment over on this answer: <a href=\"https://stackoverflow.com/a/34520821/999943\">stackoverflow.com/a/34520821/999943</a>"}], "tags": [], "owner": {"reputation": 2417, "user_id": 1493069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSt3N.jpg?s=128&g=1", "display_name": "Bob Jordan", "link": "https://stackoverflow.com/users/1493069/bob-jordan"}, "is_accepted": true, "score": 4, "last_activity_date": 1454991635, "creation_date": 1454991635, "answer_id": 35283818, "question_id": 33532696, "link": "https://stackoverflow.com/questions/33532696/using-csrf-protection-with-wtforms-alchemy/35283818#35283818", "title": "Using CSRF protection with WTForms-Alchemy", "body": "<p>What worked for me was mixing in Form from flask_wtf package. </p>\n\n<pre><code>from flask_wtf import Form\n\nclass YourForm(ModelForm, Form):\n</code></pre>\n\n<p>Results in also have a valid hidden CSRF token.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9307464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vOFJ7I1tIcE/AAAAAAAAAAI/AAAAAAAAGDw/d5nHKVj6rlY/photo.jpg?sz=128", "display_name": "Yoel Tixe", "link": "https://stackoverflow.com/users/9307464/yoel-tixe"}, "is_accepted": false, "score": 0, "last_activity_date": 1517614974, "creation_date": 1517614974, "answer_id": 48592420, "question_id": 33532696, "link": "https://stackoverflow.com/questions/33532696/using-csrf-protection-with-wtforms-alchemy/48592420#48592420", "title": "Using CSRF protection with WTForms-Alchemy", "body": "<p>What worked for me was mixing in configure flask_wtf.csrf from flask_wtf package.</p>\n\n<p>py</p>\n\n<pre><code>from flask_wtf.csrf import CSRFProtect\n....\ncsrf = CSRFProtect(app)\n\nclass UserForm(ModelForm):\n    class Meta:\n       model = User\n....\n\nuserform = UserForm()\n</code></pre>\n\n<p>html</p>\n\n<pre><code>&lt;form method=\"post\"&gt;\n  {{ userform.csrf_token }}\n  {{ userform.userform }}\n  &lt;input type=\"submit\" name=\"submit\"&gt;   \n&lt;/form&gt;\n</code></pre>\n\n<p>Results in also have a valid hidden CSRF token.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 35283818, "answer_count": 2, "score": 4, "last_activity_date": 1517614974, "creation_date": 1446673728, "question_id": 33532696, "link": "https://stackoverflow.com/questions/33532696/using-csrf-protection-with-wtforms-alchemy", "title": "Using CSRF protection with WTForms-Alchemy", "body": "<p>I have a web application with 3 forms. 2 inherit from flask_wtf.form.Form which by itself inhertis from WTForms SecureForm. This means these forms have automatic CSRF protection.</p>\n\n<p>The 3rd form inherits its properties from a model object and as such inherits from wtforms_alchemy.ModelForm which by itself inherits from wtforms.Form.</p>\n\n<p>How can I add CSRF protection to this last form?</p>\n"}, {"tags": ["python", "tree", "rule", "orange"], "answers": [{"comments": [{"owner": {"reputation": 2161, "user_id": 777593, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/02511922ff332247dc8b41a14dcdcbc6?s=128&d=identicon&r=PG", "display_name": "Khurram Majeed", "link": "https://stackoverflow.com/users/777593/khurram-majeed"}, "edited": false, "score": 0, "creation_date": 1539600307, "post_id": 33563226, "comment_id": 92547216, "body": "Has there been any update since your reply. Can I convert the Tree from Orange 3 to rules or a function?"}], "tags": [], "owner": {"reputation": 448, "user_id": 4152679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhLTG.jpg?s=128&g=1", "display_name": "JanezD", "link": "https://stackoverflow.com/users/4152679/janezd"}, "is_accepted": false, "score": 0, "last_activity_date": 1446801379, "creation_date": 1446801379, "answer_id": 33563226, "question_id": 33532691, "link": "https://stackoverflow.com/questions/33532691/how-to-translate-a-decision-tree-in-orange-to-rules-and-print-out-the-rules/33563226#33563226", "title": "How to translate a Decision Tree in Orange to rules and print out the rules?", "body": "<p>See <a href=\"http://docs.orange.biolab.si/reference/rst/Orange.classification.tree.html\" rel=\"nofollow\">http://docs.orange.biolab.si/reference/rst/Orange.classification.tree.html</a>.</p>\n\n<p>This is for Orange 2. Orange 3 cannot yet print the trees in the same way since it currently relies on sklearn's trees. Printing like in Orange 2 will be supported when we replace them with a better implementation.</p>\n"}], "owner": {"reputation": 225, "user_id": 4949935, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2e8168ba3ec42db24af517a3fa00af2c?s=128&d=identicon&r=PG&f=1", "display_name": "machine_learner", "link": "https://stackoverflow.com/users/4949935/machine-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1446801379, "creation_date": 1446673712, "question_id": 33532691, "link": "https://stackoverflow.com/questions/33532691/how-to-translate-a-decision-tree-in-orange-to-rules-and-print-out-the-rules", "title": "How to translate a Decision Tree in Orange to rules and print out the rules?", "body": "<p>I am wondering if anyone knows how to translate a Decision Tree in Orange to rules and print out the rules. The Orange Classification Trees document only shows how to print out a tree. A sample code to do this is greatly helpful. Thank you very much!</p>\n"}, {"tags": ["python", "c++", "fann"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446674250, "post_id": 33532623, "comment_id": 54847217, "body": "Fun with external links: 404! Provide <b>all required</b> information in your question!"}, {"owner": {"reputation": 41, "user_id": 4736670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9TU4.png?s=128&g=1", "display_name": "G. Mizael Mtz Hdz", "link": "https://stackoverflow.com/users/4736670/g-mizael-mtz-hdz"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446696934, "post_id": 33532623, "comment_id": 54854182, "body": "I&#39;m sorry, it&#39;s correct now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446724975, "post_id": 33532623, "comment_id": 54867942, "body": "What did you not understand with &quot;Provide all required information <b>in</b> your question!&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 3075683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8511982af88fbe27c1df387513fa681f?s=128&d=identicon&r=PG&f=1", "display_name": "RPM", "link": "https://stackoverflow.com/users/3075683/rpm"}, "is_accepted": true, "score": 0, "last_activity_date": 1446677018, "last_edit_date": 1446677018, "creation_date": 1446675703, "answer_id": 33533205, "question_id": 33532623, "link": "https://stackoverflow.com/questions/33532623/what-is-the-range-of-error-fann/33533205#33533205", "title": "What is the range of error [FANN]?", "body": "<p>The error is actually the mean square error. For each input record, fann calculates the difference between the target value and the observed value, squares it, sums them all together and divides through by the number of records. It is not a ratio or anything, so values larger than one are possible, particularly if your output values are larger than one.</p>\n\n<p>I would try normalising your input so that it falls in the <code>[-1, 1]</code> range. Neural networks tend to like that more than a range of 0 to 10000.</p>\n"}], "owner": {"reputation": 41, "user_id": 4736670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9TU4.png?s=128&g=1", "display_name": "G. Mizael Mtz Hdz", "link": "https://stackoverflow.com/users/4736670/g-mizael-mtz-hdz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 33533205, "answer_count": 1, "score": -2, "last_activity_date": 1446696603, "creation_date": 1446673519, "last_edit_date": 1446696603, "question_id": 33532623, "link": "https://stackoverflow.com/questions/33532623/what-is-the-range-of-error-fann", "title": "What is the range of error [FANN]?", "body": "<p>I use library FANN <a href=\"http://leenissen.dk/fann/html/files/fann_cpp-h.html\" rel=\"nofollow\">http://leenissen.dk/fann/html/files/fann_cpp-h.html</a>. The values of ANN: </p>\n\n<p>i)activation_function_hidden: SIGMOID_SYMMETRIC_STEPWISE\nii)activation_function_output: LINEAR</p>\n\n<p>My ANN(Artificial neural network), range of input: [0 - 10000]\nRange or output: [0-26]</p>\n\n<p>But the error sometimes is > 1.0, is it possible?, What is the range of error?</p>\n\n<p>*Error in training</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 4342, "user_id": 1879010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c078ef7744a1a430138a654d8d673956?s=128&d=identicon&r=PG", "display_name": "Dietrich", "link": "https://stackoverflow.com/users/1879010/dietrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674491, "creation_date": 1446674491, "answer_id": 33532903, "question_id": 33532609, "link": "https://stackoverflow.com/questions/33532609/trying-to-create-a-labeled-numpy-array/33532903#33532903", "title": "Trying to create a labeled numpy array", "body": "<p>Since with 20 variables, memory is not an issue, you could keep on using dictionaries:</p>\n\n<pre><code>from collections import OrderedDict  # Dictionary that remembers insertion order\nimport numpy as np\n\ndd = OrderedDict()\ndd[\"Var1\"] = 10\ndd[\"Var2\"] = 20\ndd[\"Var3\"] = 30\n\n# make numpy array from dict:\nxx = np.array([v for v in dd.values()])  \n\n# make dict() from array:\nxx2 = 2*xx\ndd2 = OrderedDict((k, v) for (k,v) in zip(dd.keys(), xx2))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1811, "user_id": 3004041, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e9c675dd9408721a8e8e1106774a9d11?s=128&d=identicon&r=PG&f=1", "display_name": "covfefe", "link": "https://stackoverflow.com/users/3004041/covfefe"}, "edited": false, "score": 0, "creation_date": 1455426294, "post_id": 33533016, "comment_id": 58481263, "body": "Thanks, I went with your first approach and did something like: <code>keyValues = [(&#39;A&#39;,0), (&#39;R&#39;,0), (&#39;N&#39;,0)]</code>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 5, "last_activity_date": 1446675263, "last_edit_date": 1446675263, "creation_date": 1446674931, "answer_id": 33533016, "question_id": 33532609, "link": "https://stackoverflow.com/questions/33532609/trying-to-create-a-labeled-numpy-array/33533016#33533016", "title": "Trying to create a labeled numpy array", "body": "<p>The correct way to create a structured array, with values, is with a list of tuples:</p>\n\n<pre><code>In [55]: X\nOut[55]: \narray([(3,)], \n      dtype=[('label1', '&lt;i4')])\n\nIn [56]: X=np.array([(3,4)],dtype=[('label1',int),('label2',int)])\n\nIn [57]: X\nOut[57]: \narray([(3, 4)], \n      dtype=[('label1', '&lt;i4'), ('label2', '&lt;i4')])\n</code></pre>\n\n<p>But I should caution you that such array is not 2d (or matrix), it is 1d with fields:</p>\n\n<pre><code>In [58]: X.shape\nOut[58]: (1,)\n\nIn [59]: X.dtype\nOut[59]: dtype([('label1', '&lt;i4'), ('label2', '&lt;i4')])\n</code></pre>\n\n<p>And you can't do math across fields; <code>X*2</code> and <code>X.sum()</code> will produce errors.  Using <code>X</code> in an equation like <code>y = X*b + error</code> will be hopeless.</p>\n\n<p>You are probably better off working with real 2d numeric arrays, and do the mapping between labels and column numbers in your head, or with a dictionary.</p>\n\n<p>Or use Pandas.</p>\n"}], "owner": {"reputation": 1811, "user_id": 3004041, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e9c675dd9408721a8e8e1106774a9d11?s=128&d=identicon&r=PG&f=1", "display_name": "covfefe", "link": "https://stackoverflow.com/users/3004041/covfefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3608, "favorite_count": 0, "accepted_answer_id": 33533016, "answer_count": 2, "score": 4, "last_activity_date": 1446675783, "creation_date": 1446673469, "last_edit_date": 1446675783, "question_id": 33532609, "link": "https://stackoverflow.com/questions/33532609/trying-to-create-a-labeled-numpy-array", "title": "Trying to create a labeled numpy array", "body": "<p>I want to have a numpy array with values and corresponding labels for each value. I am using this array for linear regression and it will be my <code>X</code> data vector in the equation <code>y = Xb + error</code>.</p>\n\n<p>My <code>X</code> vector consists of about 20 variables, each of which I would like to be able to reference by name like so <code>X['variable1']</code>. I was initially using a dictionary to do this but realized that the scikit library for linear regression requires a numpy matrix, so I am trying to build a numpy array that is labeled.</p>\n\n<p>I keep getting an error stating: </p>\n\n<pre><code>TypeError: a bytes-like object is required, not 'int'.\n</code></pre>\n\n<p>This is what I'm doing:</p>\n\n<pre><code>X = np.array([3],dtype=[('label1','int')])\n</code></pre>\n\n<p>I eventually want to have 20 labeled values, something like this:</p>\n\n<pre><code>X = np.array([3,40,7,2,...],\n             dtype=[('label1',int'),('label2','int'),('label3','int')...])\n</code></pre>\n\n<p>Would really appreciate any help on the syntax here. Thanks!</p>\n"}, {"tags": ["python", "django", "django-grappelli", "django-filebrowser"], "comments": [{"owner": {"reputation": 2595, "user_id": 948323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/17ee588df0028235baecf8f5eff73cac?s=128&d=identicon&r=PG", "display_name": "Sander van Leeuwen", "link": "https://stackoverflow.com/users/948323/sander-van-leeuwen"}, "edited": false, "score": 0, "creation_date": 1446720366, "post_id": 33532604, "comment_id": 54865154, "body": "does media\\uploads\\img.jpg have a file size?"}, {"owner": {"reputation": 69, "user_id": 5454823, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ca3a70da29a17948b5c153857962be98?s=128&d=identicon&r=PG&f=1", "display_name": "Swallow", "link": "https://stackoverflow.com/users/5454823/swallow"}, "reply_to_user": {"reputation": 2595, "user_id": 948323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/17ee588df0028235baecf8f5eff73cac?s=128&d=identicon&r=PG", "display_name": "Sander van Leeuwen", "link": "https://stackoverflow.com/users/948323/sander-van-leeuwen"}, "edited": false, "score": 0, "creation_date": 1446738573, "post_id": 33532604, "comment_id": 54877551, "body": "Yes, 176 kb as original image"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 5859080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f026a8e496216512836326ec01ccbb24?s=128&d=identicon&r=PG&f=1", "display_name": "mda-python", "link": "https://stackoverflow.com/users/5859080/mda-python"}, "is_accepted": true, "score": 0, "last_activity_date": 1454103716, "last_edit_date": 1454103716, "creation_date": 1454099886, "answer_id": 35093627, "question_id": 33532604, "link": "https://stackoverflow.com/questions/33532604/django-filebrowser-and-uploading-images/35093627#35093627", "title": "Django-Filebrowser and uploading images", "body": "<p>in your projects urls.py:</p>\n\n<pre><code>from django import views\n....\n\n\nurlpatterns = [\n\n...\n\nurl(r'^media/(?P&lt;path&gt;.*)$', views.static.serve, {\n        'document_root': settings.MEDIA_ROOT})\n...\n\n]\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5454823, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ca3a70da29a17948b5c153857962be98?s=128&d=identicon&r=PG&f=1", "display_name": "Swallow", "link": "https://stackoverflow.com/users/5454823/swallow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 35093627, "answer_count": 1, "score": 0, "last_activity_date": 1454103716, "creation_date": 1446673449, "question_id": 33532604, "link": "https://stackoverflow.com/questions/33532604/django-filebrowser-and-uploading-images", "title": "Django-Filebrowser and uploading images", "body": "<p>I have Django Grappelli == 2.6.5 with Filebrowser and Tinymce. I use Django ==1.7.5.\nI have problem with uploading images. Image uploads in the browser, appears in the folder <em>\\media\\uploads</em> but Filebrowser doesn't see it and throws an error: <strong>'media\\uploads\\img.jpg' could not be found</strong>\nHere is my settings:</p>\n\n<pre><code>STATIC_URL = \"/static/\"\nSTATIC_ROOT = os.path.join(PROJECT_ROOT, STATIC_URL.strip(\"/\"))\nMEDIA_URL = STATIC_URL + \"media/\"\nMEDIA_ROOT = os.path.join(PROJECT_ROOT, *MEDIA_URL.strip(\"/\").split(\"/\"))\nDIRECTORY = getattr(settings, \"FILEBROWSER_DIRECTORY\", 'uploads/')\n</code></pre>\n\n<p>In the pyhon shell I did following:</p>\n\n<pre><code>from django.conf import settings \nimport filebrowser.settings\nfilebrowser.settings.MEDIA_ROOT\nC:\\\\mysite\\\\static\\\\media\nfilebrowser.settings.DIRECTORY\nuploads/\n</code></pre>\n\n<p>Why is this happened? How can I set the right upload directory to Django-Filebrowser? I've read documentation and searched for answears in google. But I don't understand how fix it and I'm confused. Can you help me please.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1446673487, "post_id": 33532477, "comment_id": 54846805, "body": "Aside: you&#39;ve tagged this with python2.7, but AFAIK, metaclasses only work on new-style classes (which you don&#39;t have since you haven&#39;t derived <code>Executor</code> from <code>object</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 2, "last_activity_date": 1446673309, "creation_date": 1446673309, "answer_id": 33532569, "question_id": 33532477, "link": "https://stackoverflow.com/questions/33532477/call-functions-that-have-an-attribute-characteristic/33532569#33532569", "title": "Call functions that have an attribute/characteristic", "body": "<p>I would define <code>before_execute</code> more explicitly:</p>\n\n<pre><code>class Executor(object):\n    __metaclass__ = ABCMeta\n\n    def before_execute(self):\n        #call each function in the list\n        return self.get_script() and self.get_input()\n</code></pre>\n\n<p>Now if the user wants to add more actions, they can override <code>before_execute</code> calling the superclass's method as necessary:</p>\n\n<pre><code>class MyExecutor(Executor):\n    def before_execute(self):\n        result = super(MyExecutor, self).before_execute()\n        return result and self.my_other_function()\n</code></pre>\n\n<p>The only thing you lose with this approach is the ability to re-order the execution of the various functions in the chain.  What you <em>gain</em> is the ability for the various functions to have different signatures (since you're calling them explicitly).  Additionally, this paradigm seems to be more typical/expected which would lead to greater readability (IMHO).</p>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "is_accepted": false, "score": 1, "last_activity_date": 1446673633, "creation_date": 1446673633, "answer_id": 33532667, "question_id": 33532477, "link": "https://stackoverflow.com/questions/33532477/call-functions-that-have-an-attribute-characteristic/33532667#33532667", "title": "Call functions that have an attribute/characteristic", "body": "<p>You could do something like this:</p>\n\n<pre><code>#!/usr/bin/python\n\nrun_before = []\n\ndef append_to_before_fns(func):\n   global run_before\n   run_before.append(func)\n\n@append_to_before_fns\ndef hello():\n    print 'hello '\n\n@append_to_before_fns\ndef world():\n    print 'world'\n\ndef run():\n    global run_before\n    for f in run_before:\n        f()\n\n\nif __name__=='__main__':\n\n    run()\n</code></pre>\n\n<p>would output</p>\n\n<pre><code>hello\nworld\n</code></pre>\n\n<p>Declare the decorator in your Executor class, then you can call it in your children classes.</p>\n"}], "owner": {"reputation": 5002, "user_id": 2620746, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xItNy.jpg?s=128&g=1", "display_name": "mickzer", "link": "https://stackoverflow.com/users/2620746/mickzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 33532569, "answer_count": 2, "score": 0, "last_activity_date": 1446673633, "creation_date": 1446672977, "question_id": 33532477, "link": "https://stackoverflow.com/questions/33532477/call-functions-that-have-an-attribute-characteristic", "title": "Call functions that have an attribute/characteristic", "body": "<p>I've run into a problem while designing an abstract base class for something I'm building.</p>\n\n<p>My class defines an <code>Executor</code> which I want to create children of and add more functionality to. </p>\n\n<p>On paper I want my Executor to have 2 steps of operation:</p>\n\n<ol>\n<li>Before-Execute Stage</li>\n<li>Execute Stage</li>\n</ol>\n\n<p>The <code>run</code> function runs these steps in order.</p>\n\n<p>With regards to the <code>Before-Execute</code> stage, this can consist of calling multiple functions on the object -> some abstract functions and some other additional functions in derived classes.</p>\n\n<p>I've been trying to figure out a way to be able to have functions called in the <code>Before-Execute</code> stage without having to redefine the <code>before_execute</code> function in each derived class.</p>\n\n<p>The way I've achieved this (which I don't really like) is by defining a member list <code>before_execute_functions</code> which contains the names of all the functions I want called in the <code>Before-Execute</code> stage. </p>\n\n<p>The <code>before_execute</code> function traverses the list and calls each function sequentially. In derived classes, I can add the names of any other functions I want called in the <code>Before-Execute</code> stage to the list.</p>\n\n<p>The code looks like this:</p>\n\n<pre><code>class Executor:\n    __metaclass__ = ABCMeta\n\n    def __init__(self):\n        self.before_execute_functions = ['get_script', 'get_input']\n\n    @abc.abstractmethod\n    def get_script(self):\n        pass\n\n    @abc.abstractmethod\n    def get_input(self):\n        pass\n\n    def before_execute(self):\n        #call each function in the list\n        for f in self.before_execute_functions:\n            if not getattr(self, f)():\n                return False\n        return True\n\n    @abc.abstractmethod\n    def execute(self):\n        pass\n\n    def run(self):\n          self.before_execute()\n          self.execute()\n</code></pre>\n\n<p>Which I can use like:</p>\n\n<pre><code>class MyExecutor(Executor):\n\n    def __init__(self):\n        Executor.__init__(self)\n        self.before_execute_functions.append('my_other_function')\n\n    def get_script(self):\n        #do stuff\n        pass\n\n    def get_input(self):\n        #do stuff\n        pass\n\n    #An additional function I want called \n    #during the Before-Execute stage\n    def my_other_function():\n        #do stuff\n        pass\n\n    def execute(self):\n       #do stuff\n        pass\n</code></pre>\n\n<p>But I don't like the solution I've come up with and I'm wondering if there is any way to add an attribute or tag to a function. So then in my <code>before_execute</code> function I could just call all the functions with the eg. <code>before</code> attribute/tag. This would save me having to manage a member list.</p>\n\n<p>Is anything like this possible? Or can anyone think of a better way to achieve this? And also, please don't hesitate tell me if I'm being an idiot! Thanks in advance! :)</p>\n"}, {"tags": ["python", "arrays", "matlab", "numpy"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1446673420, "post_id": 33532472, "comment_id": 54846771, "body": "<code>Splot</code> is a <code>N&#47;2 + 1 x 1</code> 2D matrix, yet you are trying to squeeze 101 elements into a single element in this matrix.  That doesn&#39;t work.  Have you considered using <b>lists</b> instead?  These better reflect cell array behaviour in Python.  <a href=\"http://effbot.org/zone/python-list.htm\" rel=\"nofollow noreferrer\">effbot.org/zone/python-list.htm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4710081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/551ba66b87d36dd2234791c4a984d825?s=128&d=identicon&r=PG&f=1", "display_name": "arabhi manachra", "link": "https://stackoverflow.com/users/4710081/arabhi-manachra"}, "edited": false, "score": 0, "creation_date": 1446674980, "post_id": 33532939, "comment_id": 54847634, "body": "Thanks for your input"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1446676159, "last_edit_date": 1446676159, "creation_date": 1446674668, "answer_id": 33532939, "question_id": 33532472, "link": "https://stackoverflow.com/questions/33532472/having-much-trouble-with-preallocating-cell-arrays-in-python/33532939#33532939", "title": "Having much trouble with &#39;preallocating cell arrays&#39; in Python", "body": "<p>Before trying to fully understand your code, let me observe that constructs like:</p>\n\n<pre><code>S = np.array(np.zeros((N/2+1,1)), dtype = 'object')\n</code></pre>\n\n<p>are not good <code>numpy</code>.</p>\n\n<p>You are probably imitating the MATLAB cell arrays.  Python had 'cells' long before MATLAB.  Python lists can hold are diverse set of values, strings, numbers, other lists, arrays, etc.</p>\n\n<p><code>numpy</code> arrays with <code>dtype=object</code> are just glorified lists.  They may be convenient if you want 2d collections, but as with MATLAB you can't do math across elements of such arrays.  At best you can iterate over them, just as you would with lists.</p>\n\n<p>It's possible that your error has nothing to do with that, but I'll have to dig a bit to be sure.</p>\n\n<hr>\n\n<pre><code>Splot=np.array(np.zeros((4,1)),dtype=object)\n</code></pre>\n\n<p>produces a <code>(4,1)</code> array, with dtype=object.  <code>np.array</code> tries to create as high a dimensional array as it can from the inputs.  </p>\n\n<p>From \n    for alpha in range(0,(N/2+1)):\n        Splot[alpha] = np.zeros((len1,1))</p>\n\n<p>it looks like you wanted to preallocate an an array with these <code>N/2+1</code> slots, and fill each with a 2d array.  It's a little tricky with <code>dtype=object</code>.</p>\n\n<pre><code>Splot = [np.zeros((len1,1)) for alpha in range(M)]\n</code></pre>\n\n<p>would produce a list with M arrays, each of the same length.</p>\n\n<p>e.g.</p>\n\n<pre><code>In [67]: Splot=[np.zeros((4,1)) for alpha in range(3)]\n\nIn [68]: Splot\nOut[68]: \n[array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]]),\n array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]]),\n array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]])]\n</code></pre>\n\n<p>Note that I wrap this list of 2d arrays in an array, I get a 3d array:</p>\n\n<pre><code>In [69]: np.array(Splot)\nOut[69]: \narray([[[ 0.],\n        [ 0.],\n        [ 0.],\n        [ 0.]],\n\n       [[ 0.],\n        [ 0.],\n        [ 0.],\n        [ 0.]],\n\n       [[ 0.],\n        [ 0.],\n        [ 0.],\n        [ 0.]]])\n\nIn [70]: _.shape\nOut[70]: (3, 4, 1)\n</code></pre>\n\n<p>It is possible to make an array of arrays with this strategy.</p>\n\n<p>Make an object array of the right size (<code>np.empty</code> will fill it with <code>None</code>).</p>\n\n<pre><code>In [72]: Splot\nOut[72]: array([0, 0, 0], dtype=object)\n</code></pre>\n\n<p>Then iterate to replace each <code>0</code> with a new object.</p>\n\n<pre><code>In [73]: for i in range(3):\n   ....:     Splot[i] = np.zeros((4,1))\n   ....:     \n\nIn [74]: Splot\nOut[74]: \narray([array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]]),\n       array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]]),\n       array([[ 0.],\n       [ 0.],\n       [ 0.],\n       [ 0.]])], dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4710081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/551ba66b87d36dd2234791c4a984d825?s=128&d=identicon&r=PG&f=1", "display_name": "arabhi manachra", "link": "https://stackoverflow.com/users/4710081/arabhi-manachra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 33532939, "answer_count": 1, "score": 0, "last_activity_date": 1446676159, "creation_date": 1446672966, "question_id": 33532472, "link": "https://stackoverflow.com/questions/33532472/having-much-trouble-with-preallocating-cell-arrays-in-python", "title": "Having much trouble with &#39;preallocating cell arrays&#39; in Python", "body": "<p>I have recently switched from programming heavily in MATLAB to programming in Python. Hence I am having some issues running the Python code that I have written. I am using numPy and SciPy to integrate an arbitrary set of ordinary differential equations, with method <strong>vode</strong>. I have generalized the system of ODEs for any number 'N' of them, but run into problems with preallocating and using arrays. </p>\n\n<p>It is especially frustrating for me because I have TWO versions of fully functional MATLAB code, but need to convert it to Python for optimized results. And I am having trouble. Especially with the following lines:</p>\n\n<pre><code>S = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nKS = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nPS = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nKSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nPSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy import integrate\n\nN = 10\nK00 = np.logspace(0,3,101,10)\nlen1 = len(K00)\nepsilon = 0.01\ny0 = [0]*(3*N/2+3)\nu1 = 0\nu2 = 0\nu3 = 0\nKplot = np.zeros((len1,1))\nPplot = np.zeros((len1,1))\nS = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nKS = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nPS = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nKSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\nPSplot = np.array(np.zeros((N/2+1,1)), dtype = 'object')\n\nfor alpha in range(0,(N/2+1)):\n    Splot[alpha] = np.zeros((len1,1))\nfor beta in range((N/2)+1,N+1):\n    KSplot[beta-N/2-1] = np.zeros((len1,1))\nfor gamma in range(N+1,3*N/2+1):\n    PSplot[gamma-N] = np.zeros((len1,1))\n\nfor series in range(0,len1):\n    K0 = K00[series]\n    Q = 10\n    r1 = 0.0001\n    r2 = 0.001\n    a = 0.001\n    d = 0.001\n    k = 0.999\n    S10 = 1e5\n    P0 = 1\n\n    def f(y, t):\n        for alpha in range(0,(N/2+1)):\n            S[alpha] = y[alpha]\n        for beta in range((N/2)+1,N+1):\n            KS[beta-N/2-1] = y[beta]\n        for gamma in range(N+1,3*N/2+1):\n            PS[gamma-N] = y[gamma]\n        K = y[3*N/2+1]\n        P = y[3*N/2+2]\n\n        ydot = np.zeros((3*N/2+3,1))\n        B = range((N/2)+1,N+1)\n        G = range(N+1,3*N/2+1)\n        runsumPS = 0\n        runsum1 = 0\n        runsumKS = 0 \n        runsum2 = 0\n\n        for m in range(0,N/2):\n            runsumPS = runsumPS + PS[m+1]\n            runsum1 = runsum1 + S[m+1]\n            runsumKS = runsumKS + KS[m]\n            runsum2 = runsum2 + S[m]    \n            ydot[B[m]] = a*K*S[m]-(d+k+r1)*KS[m]\n\n        for i in range(0,N/2-1):\n            ydot[G[i]] = a*P*S[i+1]-(d+k+r1)*PS[i+1]\n\n        for p in range(1,N/2):\n            ydot[p] = -S[p]*(r1+a*K+a*P)+k*KS[p-1]+ \\\n                      d*(PS[p]+KS[p])\n\n        ydot[0] = Q-(r1+a*K)*S[0]+d*KS[0]+k*runsumPS\n        ydot[N/2] = k*KS[N/2-1]-(r2+a*P)*S[N/2]+ \\\n                    d*PS[N/2]\n        ydot[G[N/2-1]] = a*P*S[N/2]-(d+k+r2)*PS[N/2]\n        ydot[3*N/2+1] = (d+k+r1)*runsumKS-a*K*runsum2\n        ydot[3*N/2+2] = (d+k+r1)*(runsumPS-PS[N/2])- \\\n                        a*P*runsum1+(d+k+r2)*PS[N/2]\n\n        for j in range(0,3*N/2+3):\n            return ydot[j] \n\n    if __name__ == '__main__':\n\n        r = integrate.ode(f).set_integrator('vode', method='bdf')  \n        t_start = 0.0\n        t_final = 1e10\n        delta_t = t_final/(len1-1)\n        num_steps = np.floor((t_final - t_start)/delta_t) + 1\n\n        y0[0] = S10\n        for i in range(1,3*N/2+1):\n            y0[i] = 0\n        y0[3*N/2+1] = K0\n        y0[3*N/2+2] = P0\n        r.set_initial_value(y0, t_start)\n\n        t = np.zeros((num_steps, 1))\n        soln = np.array(np.zeros((num_steps, 1))*(3*N/2+3))\n        t[0] = t_start\n        for i in range(0,3*N/2+3):\n            soln[i] = y0[i]\n\n        k = 1\n        while r.successful() and k &lt; num_steps:\n            r.integrate(r.t + delta_t)\n\n            t[k] = r.t\n            for jj in range(0,3*N/2+3):\n                soln[k] = r.y[jj]\n            k += 1\n</code></pre>\n\n<p>The error message is below:</p>\n\n<pre><code>ValueError                                Traceback (most recent call last)\nC:\\Users\\dis_YO_boi\\Documents\\Programming\\Python\\ArrayMod.py in &lt;module&gt;()\n     21 \n     22 for alpha in range(0,(N/2+1)):\n---&gt; 23     Splot[alpha] = np.zeros((len1,1))\n     24 for beta in range((N/2)+1,N+1):\n     25     KSplot[beta-N/2-1] = np.zeros((len1,1))\n\nValueError: could not broadcast input array from shape (101,1) into shape (1)\n</code></pre>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["python", "performance", "timezone", "pytz"], "comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1446685233, "post_id": 33532457, "comment_id": 54851219, "body": "It seems most of the time is in <code>localize()</code> function that is complex in general case. You could simplify it greatly for America/New_York zone for a known date range."}, {"owner": {"reputation": 1307, "user_id": 1411449, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3021db078efdb29029776cca16148a39?s=128&d=identicon&r=PG", "display_name": "fivelements", "link": "https://stackoverflow.com/users/1411449/fivelements"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1446691501, "post_id": 33532457, "comment_id": 54852778, "body": "the datetime range from 2009-01-01 to current time. There are items in the database that happen on DST change days, like the past Sunday, this will create some issue if I fixed the offset on certain days. That&#39;s why I opt to let the underlying pytz do all the jobs on calculating the correct offset, especially on DST switch days."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1446728055, "post_id": 33532457, "comment_id": 54869838, "body": "did I say that you should ignore DST? -- No. Look at <a href=\"http://bazaar.launchpad.net/~stub/pytz/devel/view/head:/src/pytz/tzinfo.py\" rel=\"nofollow noreferrer\">the <code>localize()</code> source</a>: you don&#39;t need all the complexity there (at worse, a simple binary search over <code>_utc_transition_times</code> should suffice), to compute two UTC offsets for your input."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 1, "creation_date": 1446728827, "post_id": 33532457, "comment_id": 54870338, "body": "On CentOS: <code>os.environ[&#39;TZ&#39;]=src_tz.zone; time.tzset();</code> ... <code>datetime.fromtimestamp(time.mktime(dt.timetuple()), dest_tz)</code> -- compare performance with <code>conv_tz()</code> (call tzset() once, not a million times)"}, {"owner": {"reputation": 1307, "user_id": 1411449, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3021db078efdb29029776cca16148a39?s=128&d=identicon&r=PG", "display_name": "fivelements", "link": "https://stackoverflow.com/users/1411449/fivelements"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1447078464, "post_id": 33532457, "comment_id": 54996321, "body": "Thank you!  datetime.fromtimestamp() really does the trick!"}], "answers": [{"tags": [], "owner": {"reputation": 1307, "user_id": 1411449, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3021db078efdb29029776cca16148a39?s=128&d=identicon&r=PG", "display_name": "fivelements", "link": "https://stackoverflow.com/users/1411449/fivelements"}, "is_accepted": true, "score": 2, "last_activity_date": 1447078980, "creation_date": 1447078980, "answer_id": 33611232, "question_id": 33532457, "link": "https://stackoverflow.com/questions/33532457/pytz-timezone-conversion-performance/33611232#33611232", "title": "pytz timezone conversion performance", "body": "<p>Thanks for J.F. Sebastian comment! Here is what I decide to use, assuming the default timezone for these datatime objects are consistent with the OS timezone:</p>\n\n<pre><code>def conv_tz2(dt, dest_tz):\n    if not dt: return None\n    return datetime.fromtimestamp(dt.timestamp(), dest_tz)\n</code></pre>\n\n<p>And it runs a small fraction of the original conv_tz. Here is a test based on half million conversion:</p>\n\n<pre><code>ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n567669    0.664    0.000   23.354    0.000 ../test/test_tz.py:17(conv_tz)\n567669    4.831    0.000   18.732    0.000 /app/python/lib/python3.4/site-packages/pytz/tzinfo.py:244(localize)\n567669    0.472    0.000    5.786    0.000 ../test/test_tz.py:22(conv_tz2)\n</code></pre>\n"}], "owner": {"reputation": 1307, "user_id": 1411449, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3021db078efdb29029776cca16148a39?s=128&d=identicon&r=PG", "display_name": "fivelements", "link": "https://stackoverflow.com/users/1411449/fivelements"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 1, "accepted_answer_id": 33611232, "answer_count": 1, "score": 1, "last_activity_date": 1447078980, "creation_date": 1446672916, "question_id": 33532457, "link": "https://stackoverflow.com/questions/33532457/pytz-timezone-conversion-performance", "title": "pytz timezone conversion performance", "body": "<p>I have more than 1 million datetime object from database, and I want to convert each of them to timezone-aware datetime objects. Here is my helper funcion conv_tz:</p>\n\n<pre><code># dt is python datetime object, src_tz and dest_tz and pytz.timezone objects\ndef conv_tz(dt, src_tz, dest_tz):\n    if not dt: return None\n    sdt = src_tz.localize(dt)\n    return sdt.astimezone(dest_tz)\n</code></pre>\n\n<p>Here is the result from the profiler:</p>\n\n<pre><code>ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n1101475    1.166    0.000   44.440    0.000 ../release/python/lib/dtutil.py:128(conv_tz)\n1101475    9.092    0.000   35.656    0.000 /app/python/lib/python3.4/site-packages/pytz/tzinfo.py:244(localize)\n</code></pre>\n\n<p>Question 1: Is there anyway to make it run faster? Each datetime object from the database is assumed to be in pytz.timezone('America/New_York'), and the destination timezone varies by each datetime object (or each row in the database)</p>\n\n<p>In fact, after I get the timezone-aware datetime object, what I really want to achieve is to convert these datetime object to matlab time (which is not timezone aware.) So here is the to_mat function I use:</p>\n\n<pre><code>def to_mat(dt):\n    if not dt:  return None\n    val = dt.toordinal() + 366\n    t = dt.time()\n    return val + (((t.hour * 60) + t.minute) * 60 + t.second) / float(_seconds_day) + t.microsecond / 1.0e6 / _seconds_day\n</code></pre>\n\n<p>I am calling these 2 functions together for more than 1million datetime objects:</p>\n\n<pre><code>matdt = dtutil.to_mat(dtutil.conv_tz(dt, pytz.timezone('America/New_York'), dst_tz))\n</code></pre>\n\n<p>Question2: Maybe there is a better way to do these conversions together? Here is the profiler of to_mat, which seems less time consuming than conv_tz:</p>\n\n<pre><code>3304425    5.067    0.000    5.662    0.000 ../release/python/lib/dtutil.py:8(to_mat)\n</code></pre>\n\n<p>Environment: CentOS6 x64 + Python3.4.3 x64</p>\n"}, {"tags": ["python", "xml", "nested", "boolean", "pyparsing"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5526536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeea8d50d87928020d86582979e9abb5?s=128&d=identicon&r=PG&f=1", "display_name": "R.Roscoe", "link": "https://stackoverflow.com/users/5526536/r-roscoe"}, "edited": false, "score": 0, "creation_date": 1446752366, "post_id": 33539404, "comment_id": 54886094, "body": "I really appreciate the help. This definitely got me farther but I&#39;m still not there. I&#39;ve tried to implement a recursive grammar.. I&#39;ve added some additional info to my initial question with what I&#39;ve tried in addition to your solution."}], "tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": false, "score": 0, "last_activity_date": 1446710886, "creation_date": 1446710886, "answer_id": 33539404, "question_id": 33532451, "link": "https://stackoverflow.com/questions/33532451/pyparsing-python-binary-boolean-expression-to-xml-nesting-issue-2-7-10/33539404#33539404", "title": "Pyparsing/Python Binary Boolean Expression to XML Nesting Issue (2.7.10)", "body": "<p>Here is your code with just a few changes:</p>\n\n<ul>\n<li>change \"AND\", \"OR\", and \"NOT\" to Keyword expressions, with results name of \"operator\", so that they will get wrapped in <code>&lt;operator&gt;</code> tags</li>\n<li>hack a results name for the internal expression of the <code>expr</code> created by <code>operatorPrecedence</code> (which is recently renamed to <code>infixNotation</code>)</li>\n<li>extraction of the 0'th element from the single-item list returned from parseString</li>\n<li>add an outermost tag name in the call to asXML</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>operator = pp.oneOf(\"&gt;= &lt;= != &gt; &lt; =\")(\"Operator\")\nnumber = pp.Regex(r\"[+-]?\\d+(:?\\.\\d*)?(:?[eE][+-]?\\d+)?\")(\"SecondExpression\")\nidentifier = pp.Word(pp.alphas, pp.alphanums + \"_\" + \".\")(\"FirstExpression\")\ncomparison_term = identifier | number\ncondition = pp.Group(comparison_term + operator + comparison_term)(\"MainBody\")\n\n# define AND, OR, and NOT as keywords, with \"operator\" results names\nAND_ = pp.Keyword(\"AND\")(\"operator\")\nOR_ = pp.Keyword(\"OR\")(\"operator\")\nNOT_ = pp.Keyword(\"NOT\")(\"operator\")\n\nexpr = pp.operatorPrecedence(condition,[\n                            (NOT_, 1, pp.opAssoc.RIGHT, ),\n                            (AND_, 2, pp.opAssoc.LEFT, ),\n                            (OR_, 2, pp.opAssoc.LEFT, ),\n                            ])\n\n# undocumented hack to assign a results name to (expr) - RED FLAG\nexpr.expr.resultsName = \"group\"\n\nexpression2 =  \"((Param1 = 1 AND Param2 = 1 ) \\\n                OR (Param3 = 1 AND Param4 = 1)) \\\n                AND \\\n                (((Param5 = 0 AND Param6 = 1 )  \\\n                OR(Param7 = 0 AND Param8 = 1)) \\\n                AND \\\n                ((Param9 = 0 AND Param10 = 1 )  \\\n                OR(Param11 = 0 AND Param12 = 1)))\"\n\n\n\nout = expr.parseString(expression2)[0] # extract item 0 from single-item list\ntext = out.asXML(\"expression\") # add tag for outermost element\nprint text\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>&lt;expression&gt;\n  &lt;group&gt;\n    &lt;group&gt;\n      &lt;MainBody&gt;\n        &lt;FirstExpression&gt;Param1&lt;/FirstExpression&gt;\n        &lt;Operator&gt;=&lt;/Operator&gt;\n        &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n      &lt;/MainBody&gt;\n      &lt;operator&gt;AND&lt;/operator&gt;\n      &lt;MainBody&gt;\n        &lt;FirstExpression&gt;Param2&lt;/FirstExpression&gt;\n        &lt;Operator&gt;=&lt;/Operator&gt;\n        &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n      &lt;/MainBody&gt;\n    &lt;/group&gt;\n    &lt;operator&gt;OR&lt;/operator&gt;\n    &lt;group&gt;\n      &lt;MainBody&gt;\n        &lt;FirstExpression&gt;Param3&lt;/FirstExpression&gt;\n        &lt;Operator&gt;=&lt;/Operator&gt;\n        &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n      &lt;/MainBody&gt;\n      &lt;operator&gt;AND&lt;/operator&gt;\n      &lt;MainBody&gt;\n        &lt;FirstExpression&gt;Param4&lt;/FirstExpression&gt;\n        &lt;Operator&gt;=&lt;/Operator&gt;\n        &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n      &lt;/MainBody&gt;\n    &lt;/group&gt;\n  &lt;/group&gt;\n  &lt;operator&gt;AND&lt;/operator&gt;\n  &lt;group&gt;\n    &lt;group&gt;\n      &lt;group&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param5&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;operator&gt;AND&lt;/operator&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param6&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/group&gt;\n      &lt;operator&gt;OR&lt;/operator&gt;\n      &lt;group&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param7&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;operator&gt;AND&lt;/operator&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param8&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/group&gt;\n    &lt;/group&gt;\n    &lt;operator&gt;AND&lt;/operator&gt;\n    &lt;group&gt;\n      &lt;group&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param9&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;operator&gt;AND&lt;/operator&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param10&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/group&gt;\n      &lt;operator&gt;OR&lt;/operator&gt;\n      &lt;group&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param11&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;operator&gt;AND&lt;/operator&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param12&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/group&gt;\n    &lt;/group&gt;\n  &lt;/group&gt;\n&lt;/expression&gt;\n</code></pre>\n\n<p>So you were definitely on the right track, as far as this goes, but I think the fact that we have to hack a results name into an internal undocumented member variable of <code>expr</code> is something of a red flag, and that more than likely, you will soon reach the limit of what you can do with <code>operatorPrecedence</code>. </p>\n\n<p>You will probably have to implement your own recursive parser to full control over how all the elements and sub-elements get named.  You may even need to implement your own version of <code>asXML()</code> to control whether or not you get intermediate levels, such as the <code>&lt;group&gt;</code> tags shown above.</p>\n"}], "owner": {"reputation": 11, "user_id": 5526536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeea8d50d87928020d86582979e9abb5?s=128&d=identicon&r=PG&f=1", "display_name": "R.Roscoe", "link": "https://stackoverflow.com/users/5526536/r-roscoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446753375, "creation_date": 1446672890, "last_edit_date": 1446753375, "question_id": 33532451, "link": "https://stackoverflow.com/questions/33532451/pyparsing-python-binary-boolean-expression-to-xml-nesting-issue-2-7-10", "title": "Pyparsing/Python Binary Boolean Expression to XML Nesting Issue (2.7.10)", "body": "<p>I need to parse nested binary boolean expressions into an XML tree. For example take the expression</p>\n\n<pre><code>expression2 =  \"((Param1 = 1 AND Param2 = 1 ) \\\n            OR (Param3 = 1 AND Param4 = 1)) \\\n            AND \\\n            (((Param5 = 0 AND Param6 = 1 )  \\\n            OR(Param7 = 0 AND Param8 = 1)) \\\n            AND \\\n            ((Param9 = 0 AND Param10 = 1 )  \\\n            OR(Param11 = 0 AND Param12 = 1)))\"\n</code></pre>\n\n<p>which is essentially a combination of <code>(Expression) (Operator) (Expression)</code> terms.</p>\n\n<p>I need the output to be a combination of these expressions with proper tags in XML.  aka </p>\n\n<pre><code>&lt;MainBody&gt;\n          &lt;FirstExpression&gt;\n            Parameter\n          &lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;\n            1\n          &lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n</code></pre>\n\n<p>where firstexpression can be a parameter or a mainbody (here is the nesting), operator is always =, &lt;, >, AND, OR, and secondexpression is either an integer or a mainbody</p>\n\n<p>There will always be groups of three - aka the smallest discrete object will consist of the firstexpression the operator and the second expression.</p>\n\n<p>The code I've come up with (This is my first time using python) gets me somewhat there.</p>\n\n<pre><code>import pyparsing as pp\nimport xml.etree.ElementTree as ET\n\n\noperator = pp.Regex(\"&gt;=|&lt;=|!=|&gt;|&lt;|=\").setName(\"operator\").setResultsName(\"Operator\")\nnumber = pp.Regex(r\"[+-]?\\d+(:?\\.\\d*)?(:?[eE][+-]?\\d+)?\").setResultsName(\"SecondExpression\")\nidentifier = pp.Word(pp.alphas, pp.alphanums + \"_\" + \".\").setName(\"FirstExpression\").setResultsName(\"FirstExpression\")\ncomparison_term = identifier | number\ncondition = pp.Group(comparison_term + operator + comparison_term).setResultsName(\"MainBody\")\n\n\nexpr = pp.operatorPrecedence(condition,[\n                            (\"NOT\", 1, pp.opAssoc.RIGHT, ),\n                            (\"AND\", 2, pp.opAssoc.LEFT, ),\n                            (\"OR\", 2, pp.opAssoc.LEFT, ),\n                            ])\n\n\nexpression2 =  \"((Param1 = 1 AND Param2 = 1 ) \\\n                OR (Param3 = 1 AND Param4 = 1)) \\\n                AND \\\n                (((Param5 = 0 AND Param6 = 1 )  \\\n                OR(Param7 = 0 AND Param8 = 1)) \\\n                AND \\\n                ((Param9 = 0 AND Param10 = 1 )  \\\n                OR(Param11 = 0 AND Param12 = 1)))\"\n\n\n\nout = expr.parseString(expression2)\ntext = out.asXML()\n\nf = open('rules.xml','w+')\nf.write(text) \nf.close()\n\nroot = ET.parse(\"rules.xml\").getroot()\n\nprint ET.tostring(root)\n</code></pre>\n\n<p>This outputs XML of this form:</p>\n\n<pre><code>&lt;ITEM&gt;\n  &lt;ITEM&gt;\n    &lt;ITEM&gt;\n      &lt;MainBody&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param1&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;ITEM&gt;AND&lt;/ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param2&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/MainBody&gt;\n      &lt;ITEM&gt;OR&lt;/ITEM&gt;\n      &lt;MainBody&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param3&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n        &lt;ITEM&gt;AND&lt;/ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;FirstExpression&gt;Param4&lt;/FirstExpression&gt;\n          &lt;Operator&gt;=&lt;/Operator&gt;\n          &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n        &lt;/MainBody&gt;\n      &lt;/MainBody&gt;\n    &lt;/ITEM&gt;\n    &lt;ITEM&gt;AND&lt;/ITEM&gt;\n    &lt;ITEM&gt;\n      &lt;ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param5&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n          &lt;ITEM&gt;AND&lt;/ITEM&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param6&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n        &lt;/MainBody&gt;\n        &lt;ITEM&gt;OR&lt;/ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param7&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n          &lt;ITEM&gt;AND&lt;/ITEM&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param8&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n        &lt;/MainBody&gt;\n      &lt;/ITEM&gt;\n      &lt;ITEM&gt;AND&lt;/ITEM&gt;\n      &lt;ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param9&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n          &lt;ITEM&gt;AND&lt;/ITEM&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param10&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n        &lt;/MainBody&gt;\n        &lt;ITEM&gt;OR&lt;/ITEM&gt;\n        &lt;MainBody&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param11&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;0&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n          &lt;ITEM&gt;AND&lt;/ITEM&gt;\n          &lt;MainBody&gt;\n            &lt;FirstExpression&gt;Param12&lt;/FirstExpression&gt;\n            &lt;Operator&gt;=&lt;/Operator&gt;\n            &lt;SecondExpression&gt;1&lt;/SecondExpression&gt;\n          &lt;/MainBody&gt;\n        &lt;/MainBody&gt;\n      &lt;/ITEM&gt;\n    &lt;/ITEM&gt;\n  &lt;/ITEM&gt;\n&lt;/ITEM&gt;\n</code></pre>\n\n<p>Obviously this isn't want I want as the only objects with tags are at the deepest level. I need it to be as deep as necessary for much larger rules than this - essentially a binary tree with collections of Mainbody, FirstExpression, Operator, and Second Expression. </p>\n\n<p>I also need to place integer values inside  tags which is another thing I haven't figure out how to do.</p>\n\n<p>I think that pyparsing should be able to do this with groups somehow but I can't figure it out. </p>\n\n<p>Can anyone offer a suggestion on how to achieve this?</p>\n\n<p>Thanks</p>\n\n<p>EDIT 11/5/15:</p>\n\n<p>Building off of what Paul wrote I've arrived at this code with an (well intended to be) recursive grammar:</p>\n\n<pre><code>   import pyparsing as pp\n\n\noperator = pp.oneOf(\"&gt;= &lt;= != &gt; &lt; =\")(\"operator\")\ninteger = pp.Regex(r\"[+-]?\\d+(:?\\.\\d*)?(:?[eE][+-]?\\d+)?\")(\"integer\")\nparameter = pp.Word(pp.alphas, pp.alphanums + \"_\" + \".\" + \"-\")(\"parameter\")\ncomparison_term = parameter | integer\n\nfirstExpression = pp.Forward()\nsecondExpression = pp.Forward()\n\nmainbody = pp.Group(firstExpression + operator + secondExpression)(\"Mainbody\")\n\nfirstExpression &lt;&lt;  pp.Group(parameter | pp.Optional(mainbody))(\"FirstExpression\")\nsecondExpression &lt;&lt; pp.Group(integer | pp.Optional(mainbody))(\"SecondExpression\")\n\nAND_ = pp.Keyword(\"AND\")(\"operator\")\nOR_ = pp.Keyword(\"OR\")(\"operator\")\nNOT_ = pp.Keyword(\"NOT\")(\"operator\")\n\nexpr = pp.operatorPrecedence(mainbody,[\n                            (NOT_, 1, pp.opAssoc.RIGHT, ),\n                            (AND_, 2, pp.opAssoc.LEFT, ),\n                            (OR_, 2, pp.opAssoc.LEFT, ),\n                            ])\n\n# undocumented hack to assign a results name to (expr) - RED FLAG\nexpr.expr.resultsName = \"Mainbody\"\n\nexpression1 = \"((Param1 = 1) \\\n                OR  (Param2 = 1))\"\n\nout = expr.parseString(expression1)[0] # extract item 0 from single-item list\ntext = out.asXML(\"Mainbody\") # add tag for outermost element\nprint text\n</code></pre>\n\n<p>Will infinity recurse. Changing the | to + in the firstExpression and secondExpression lines fixes this but I believe it causes the parser to never look for the mainbody to group.</p>\n\n<p>I've included a simplified rule so I can show the exact output I'm trying to get. </p>\n\n<p>This code generates: </p>\n\n<pre><code> &lt;Mainbody&gt;\n  &lt;Mainbody&gt;\n    &lt;FirstExpression&gt;\n      &lt;parameter&gt;Param1&lt;/parameter&gt;\n    &lt;/FirstExpression&gt;\n    &lt;operator&gt;=&lt;/operator&gt;\n    &lt;SecondExpression&gt;\n      &lt;integer&gt;1&lt;/integer&gt;\n    &lt;/SecondExpression&gt;\n  &lt;/Mainbody&gt;\n  &lt;operator&gt;OR&lt;/operator&gt;\n  &lt;Mainbody&gt;\n    &lt;FirstExpression&gt;\n      &lt;parameter&gt;Param2&lt;/parameter&gt;\n    &lt;/FirstExpression&gt;\n    &lt;operator&gt;=&lt;/operator&gt;\n    &lt;SecondExpression&gt;\n      &lt;integer&gt;1&lt;/integer&gt;\n    &lt;/SecondExpression&gt;\n  &lt;/Mainbody&gt;\n&lt;/Mainbody&gt;\n</code></pre>\n\n<p>What I'm trying to get</p>\n\n<pre><code>  &lt;Mainbody&gt;\n    &lt;FirstExpression&gt;\n     &lt;Mainbody&gt;\n      &lt;FirstExpression&gt;\n       &lt;parameter&gt;Param1&lt;/parameter&gt;\n      &lt;/FirstExpression&gt;\n      &lt;operator&gt;=&lt;/operator&gt;\n      &lt;SecondExpression&gt;\n       &lt;integer&gt;1&lt;/integer&gt;\n      &lt;/SecondExpression&gt;\n     &lt;/Mainbody&gt;\n    &lt;/FirstExpression&gt;\n    &lt;operator&gt;OR&lt;/operator&gt;\n    &lt;SecondExpression&gt; \n     &lt;Mainbody&gt;\n      &lt;FirstExpression&gt;\n       &lt;parameter&gt;Param2&lt;/parameter&gt;\n      &lt;/FirstExpression&gt;\n      &lt;operator&gt;=&lt;/operator&gt;\n      &lt;SecondExpression&gt;\n       &lt;integer&gt;1&lt;/integer&gt;\n      &lt;/SecondExpression&gt;\n    &lt;/Mainbody&gt;\n   &lt;/SecondExpression&gt;\n  &lt;/Mainbody&gt;\n</code></pre>\n\n<p>It looks the the issue I'm seeing is the parser isn't properly tagging/recognizing/grouping a mainbody as FirstExpression or SecondExpression. I've tried adjusting the grammar and often times get infinite recursion so I have a feeling something is wrong at my grammar definition. I need this to work for any number of binary grouped (PARAMETER = INTEGER) by AND/OR.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "syntax-error"], "comments": [{"owner": {"reputation": 1035, "user_id": 1767938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad1721754c58030fe7e9cab48a4f331?s=128&d=identicon&r=PG", "display_name": "Michael Kruglos", "link": "https://stackoverflow.com/users/1767938/michael-kruglos"}, "edited": false, "score": 1, "creation_date": 1446672938, "post_id": 33532434, "comment_id": 54846526, "body": "Please, post the exact error message and the lines where you get them"}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1446673286, "post_id": 33532434, "comment_id": 54846708, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1565855989, "post_id": 33532434, "comment_id": 101481071, "body": "<a href=\"https://stackoverflow.com/questions/19472645/syntaxerror-invalid-syntax-on-valid-statement\" title=\"syntaxerror invalid syntax on valid statement\">stackoverflow.com/questions/19472645/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1446675278, "post_id": 33532480, "comment_id": 54847768, "body": "When I read your answer, I was expecting it to end with something like &quot;in other words, you&#39;re missing a parenthesis on a preceding line&quot;. While the answer accurately describes the situation, it may be a bit vague for the type of person who would ask this type of question. You might want to strengthen the answer by giving some practical advice, such as looking for a missing parenthesis, bracket or quote on a previous line."}], "tags": [], "owner": {"reputation": 9845, "user_id": 279858, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/05fd26fbba26ef18da572bbc02400ef6?s=128&d=identicon&r=PG", "display_name": "Bill Cheatham", "link": "https://stackoverflow.com/users/279858/bill-cheatham"}, "is_accepted": false, "score": 5, "last_activity_date": 1446673293, "last_edit_date": 1495539871, "creation_date": 1446672990, "answer_id": 33532480, "question_id": 33532434, "link": "https://stackoverflow.com/questions/33532434/python-invalid-syntax-everytime/33532480#33532480", "title": "python invalid syntax everytime", "body": "<p>It's hard to know without seeing the whole code. However, be aware that  python has <a href=\"https://stackoverflow.com/a/53180/279858\">implied line continuation</a> with parentheses and other brackets. </p>\n\n<p>This can mean that errors can be <em>reported</em> on a different to that on which the true mistake has been made.</p>\n\n<p>For example:</p>\n\n<pre><code>a = (3 * 4) + (3 * 2\nprint \"Hello\"\n</code></pre>\n\n<p>...gives the error:</p>\n\n<pre><code> File \"&lt;ipython-input-1-53e17eda21df&gt;\", line 2\n    print \"Hello\"\n        ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>What is happening is that Python expects the first line to continue, e.g like:</p>\n\n<pre><code>a = (3 * 4) + (3 * 2\n    + 100)\n</code></pre>\n\n<p>...which is completely valid syntax. However, it finds <code>print \"Hello\"</code> instead, which isn't a valid continuation of the statement inside the brackets.</p>\n"}], "owner": {"reputation": 183, "user_id": 2254468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2a1db0dd1e9e568077af1fe6b59623f5?s=128&d=identicon&r=PG&f=1", "display_name": "uhuuyouneverknow", "link": "https://stackoverflow.com/users/2254468/uhuuyouneverknow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446673293, "creation_date": 1446672831, "question_id": 33532434, "link": "https://stackoverflow.com/questions/33532434/python-invalid-syntax-everytime", "title": "python invalid syntax everytime", "body": "<p>My code always gives invalid syntax errors in different lines. I mean it is giving an error at line 143. Then when I clear that line. It gives the same error at another line. Even I get invalid syntax error at a line like:</p>\n\n<pre><code>print(\"======================================================================\")\n</code></pre>\n\n<p>How can this be possible? Any ideas?\nThank you ^^</p>\n"}, {"tags": ["python", "bash", "mercurial", "virtualenv"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1446698801, "post_id": 33532382, "comment_id": 54854716, "body": "Where do you expect the virtualenv to be activated? It&#39;s only going to be active for the duration of the subshell which doesn&#39;t seem to do anything."}, {"owner": {"reputation": 5402, "user_id": 2611159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYt6w.jpg?s=128&g=1", "display_name": "planetmaker", "link": "https://stackoverflow.com/users/2611159/planetmaker"}, "edited": false, "score": 0, "creation_date": 1446717363, "post_id": 33532382, "comment_id": 54863243, "body": "Hm, that seems more tricky. Not sure there&#39;s a satisfying solution to that. In my answer to your other question I didn&#39;t consider that the virtualenv is only transient to the shell it is generated in. Does your IDE have an API which allows to modify / interact with the shell it offers? <a href=\"http://stackoverflow.com/questions/13122137/how-to-source-virtualenv-activate-in-a-bash-script\" title=\"how to source virtualenv activate in a bash script\">stackoverflow.com/questions/13122137/&hellip;</a> maybe has some half-answer and help"}], "answers": [{"tags": [], "owner": {"reputation": 7807, "user_id": 1480466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEOKr.png?s=128&g=1", "display_name": "Reimer Behrends", "link": "https://stackoverflow.com/users/1480466/reimer-behrends"}, "is_accepted": true, "score": 1, "last_activity_date": 1446733874, "creation_date": 1446733874, "answer_id": 33547187, "question_id": 33532382, "link": "https://stackoverflow.com/questions/33532382/mercurial-update-hook-not-activating-python-virtual-environment/33547187#33547187", "title": "Mercurial update hook not activating Python virtual environment", "body": "<p>Your problem is that when you invoke a shell script, any changes to the environment variables do not get exported to the calling shell (hence why you need to call <code>source activate</code> from the surrounding shell).</p>\n\n<p>The good news is that you don't strictly <em>need</em> to call <code>activate</code> in order to access a virtual environment. What <code>activate</code> will do is:</p>\n\n<ol>\n<li>Add the virtualenv's <code>bin</code> directory to <code>$PATH</code>.</li>\n<li>Set the <code>VIRTUAL_ENV</code> environment variable.</li>\n<li>Modify your prompt.</li>\n</ol>\n\n<p>None of this is necessary in order to use the virtualenv, and you can execute the <code>python</code> binary in the virtualenv without ever using the script; the prompt is likely not relevant for your use case, you can add the directory (or just the <code>python</code> executable) to your path by symlinking it, and you need the <code>VIRTUAL_ENV</code> environment variable only for software that for some reason needs to be aware of the virtualenv it's running in. If necessary, you can figure it out from <code>sys.executable</code>. For example:</p>\n\n<pre><code>import sys, os\n\ndef find_venv():\n  python = sys.executable\n  for i in xrange(10):\n    if not os.path.islink(python):\n      break\n    python = os.path.realpath(python)\n  return os.path.dirname(os.path.dirname(python))\n\nif not os.environ.has_key(\"VIRTUAL_ENV\"):\n  os.environ[\"VIRTUAL_ENV\"] = find_venv()\n</code></pre>\n"}], "owner": {"reputation": 3058, "user_id": 845598, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a47936ffe7698a3f25a50d66a6e41180?s=128&d=identicon&r=PG", "display_name": "Anconia", "link": "https://stackoverflow.com/users/845598/anconia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 33547187, "answer_count": 1, "score": 0, "last_activity_date": 1446733874, "creation_date": 1446672632, "last_edit_date": 1495540314, "question_id": 33532382, "link": "https://stackoverflow.com/questions/33532382/mercurial-update-hook-not-activating-python-virtual-environment", "title": "Mercurial update hook not activating Python virtual environment", "body": "<p>I have a bash script that I'm trying to execute anytime an <code>hg update</code> occurs. The goal of this bash script is to switch to the correct virtualenv. For the sake of simplicity, this script is called <code>.test</code> - shown as follows:</p>\n\n<pre><code>#!/bin/bash\necho 'testing hg update hook'\nsource ~/.virtualenvs/myvirtualenv/bin/activate\n</code></pre>\n\n<p>Whenever I call this script from my shell using <code>source .test</code> everythying works properly; I can see the results of echo and my shell changes to reflect the activated virtualenv</p>\n\n<p>However,when I do an <code>hg update</code>, the virtualenv is not being activated. The script is firing as I can see the echo result; however, my shell is not updated to reflect the activated virtualenv. Below is the hook setup in my <code>.hg/hgrc</code> file is below. Any ideas why my virtualenv isn't being activated in this hook?</p>\n\n<pre><code>[hooks]\n# Update to the correct virtualenv when switching branches (hg update branchname)\nupdate = source .test\n</code></pre>\n\n<p><strong>UPDATE 1:</strong> Per this <a href=\"https://stackoverflow.com/questions/7369145/activating-a-virtualenv-using-a-shell-script-doesnt-seem-to-work\">answer</a>, I don't believe the <code>hg update</code> hook is firing in my current shell; which is why the virtualenv activates when I run the script manually but fails from the hook</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446672619, "post_id": 33532278, "comment_id": 54846364, "body": "Why are you using <code>pygame.key.get_pressed()</code> instead of the event queue?"}, {"owner": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "reply_to_user": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446672673, "post_id": 33532278, "comment_id": 54846393, "body": "@ppperry To be honest, I don&#39;t know. I&#39;ve followed a tutorial to get to this point and so far it has worked."}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446672811, "post_id": 33532278, "comment_id": 54846462, "body": "What tutorial are you following?"}, {"owner": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "reply_to_user": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1446673062, "post_id": 33532278, "comment_id": 54846592, "body": "It&#39;s a video series I&#39;ve followed and adapted the code to make another game. <a href=\"https://www.youtube.com/playlist?list=PLsk-HSGFjnaH5yghzu7PcOzm9NhsW0Urw\" rel=\"nofollow noreferrer\">youtube.com/playlist?list=PLsk-HSGFjnaH5yghzu7PcOzm9NhsW0Urw</a>"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "edited": false, "score": 0, "creation_date": 1446676014, "post_id": 33533158, "comment_id": 54848138, "body": "That didn&#39;t seem to work, now when up or down is pressed the character skips from the top of the move-able area to the bottom and so on."}, {"owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "reply_to_user": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "edited": false, "score": 0, "creation_date": 1446677868, "post_id": 33533158, "comment_id": 54848914, "body": "Might want to try adding some debugging print statements on the update (e.g.,, add a <code>print self.lane</code> after each of the <code>self.lane =</code> assignments). If your game loop is running very quickly, it may just be moving from 0 to 1 to 2 etc. too quickly for you to see the intermediate steps."}, {"owner": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "edited": false, "score": 0, "creation_date": 1446739847, "post_id": 33533158, "comment_id": 54878508, "body": "I&#39;ve done this and it seems the player continues to move through the entire list. I just want it to move to the next item in the list whether it is up or down. I&#39;ll include the full code in the post to clarify any details."}], "tags": [], "owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "is_accepted": false, "score": 0, "last_activity_date": 1446675525, "creation_date": 1446675525, "answer_id": 33533158, "question_id": 33532278, "link": "https://stackoverflow.com/questions/33532278/selecting-items-in-a-list-with-key-presses/33533158#33533158", "title": "selecting items in a list with key presses", "body": "<p>You may want to keep separate track of which lane they're currently in and just set the location based on that. For example, if they start in the first lane, you might initialize <code>self.lane = 0</code>. Then, to keep the lane number in the proper range with a lookup of the actual y position at the end, your update might look like the following:</p>\n\n<pre><code>if keystate[pygame.K_UP]:\n    self.lane = max(0, self.lane-1)\n\nif keystate[pygame.K_DOWN]:\n    self.lane = min(self.lane+1, len(lanes)-1)\n\nself.rect.y = lanes[self.lane]\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 2766423, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8cfcd541dbe1c22d3ed1f79c644fd74?s=128&d=identicon&r=PG&f=1", "display_name": "user2766423", "link": "https://stackoverflow.com/users/2766423/user2766423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446740051, "creation_date": 1446672256, "last_edit_date": 1446740051, "question_id": 33532278, "link": "https://stackoverflow.com/questions/33532278/selecting-items-in-a-list-with-key-presses", "title": "selecting items in a list with key presses", "body": "<p>I'm trying to create \"lanes\" in a game. So far what I've done is made a list of pixel amounts for elements to line up at.</p>\n\n<pre><code>lanes = [HEIGHT - 300, HEIGHT - 240, HEIGHT - 180, HEIGHT - 120, HEIGHT - 60]\n</code></pre>\n\n<p>I have a player I want to move from lane to lane base on if the user hits up or down on the keyboard.</p>\n\n<pre><code>keystate = pygame.key.get_pressed()\n    if keystate[pygame.K_UP]:\n        # I'm not sure what to do right here...\n        self.rect.y -= lanes\n\n    if keystate[pygame.K_DOWN]:\n        # I'm not sure what to do right here...\n        self.rect.y += lanes\n</code></pre>\n\n<p>How can I effectively cycle through the list items incrementally based on input? If there is a better way to do this, I am all ears. I'm a python beginner.</p>\n\n<p>EDIT: Including a link to the full code in case there are details I am forgetting are important: <a href=\"http://pastebin.com/guAJMXzP\" rel=\"nofollow\">http://pastebin.com/guAJMXzP</a></p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1446691651, "post_id": 33532718, "comment_id": 54852813, "body": "I suppose I picked too symmetric an example, as IRL my compound dataset does have different types. However, I would expect vectors of C-style structs to be just as fast as multiple arrays, so why is numpy different?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1446693005, "post_id": 33532718, "comment_id": 54853143, "body": "It doesn&#39;t use <code>c</code> structs, at least not directly.  The data storage may be as compact (a simple array of bytes) but it still has to move the data in and out of Python objects (including tuples).  My guess is that with a more general dtype, more of the processing has to be at the Python level, and less in compiled code."}, {"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1446732416, "post_id": 33532718, "comment_id": 54872872, "body": "Hmm, well it looks like <code>numpy.dtype</code> has some support for specifying byte offsets . . . I&#39;ll give that a try  . . ."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1446743984, "post_id": 33532718, "comment_id": 54881265, "body": "I explored offsets a bit my answer to: <a href=\"http://stackoverflow.com/questions/26349116/no-binary-operators-for-structured-arrays-in-numpy\" title=\"no binary operators for structured arrays in numpy\">stackoverflow.com/questions/26349116/&hellip;</a>"}, {"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1447362217, "post_id": 33532718, "comment_id": 55135637, "body": "I have attempted to specify byte-offsets in a hail-mary attempt to improve speed. No dice. I guess I&#39;ll just have to use separated vectors . . ."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1446674263, "last_edit_date": 1446674263, "creation_date": 1446673814, "answer_id": 33532718, "question_id": 33532249, "link": "https://stackoverflow.com/questions/33532249/populating-values-in-numpy-compound-dataset-is-slow-why/33532718#33532718", "title": "Populating values in numpy compound dataset is slow; why?", "body": "<p>Yes working element by element with structured arrays will be slower.  Which means you should try to perform array operations where possible:</p>\n\n<pre><code>v=np.empty(10,dtype=ymytype)\nv['x']=np.random.random(10)\nv['y']=np.random.random(10)\nv['z']=np.random.random(10)\n</code></pre>\n\n<p>Will be faster than your <code>i</code> by <code>i</code> iteration.  But it will still be slower than the 2d array equivalent:</p>\n\n<pre><code>v = np.random.random((10,3))\n</code></pre>\n\n<p>You can also assign or access values record by record:</p>\n\n<pre><code>for i in range(10):\n    v[i] = np.random.random(3)\n</code></pre>\n\n<p>But if the number rows is much more than the number of fields (a typical case), it is better to assign values by field.</p>\n\n<p>If you want fast operations on arrays, and all values are of the same type, stick with the nd arrays.  Structured arrays are more useful when the field types differ, such as a mix of strings, ints and floats.  </p>\n\n<p>If all the elements of the structured array are of the same dtype (as in your case, all floats) it is possible to map back and forth between structured dtype and the 2d array, giving the best of both worlds.  I've discussed that in other SO questions.</p>\n"}], "owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 33532718, "answer_count": 1, "score": 1, "last_activity_date": 1447365890, "creation_date": 1446672156, "last_edit_date": 1447365890, "question_id": 33532249, "link": "https://stackoverflow.com/questions/33532249/populating-values-in-numpy-compound-dataset-is-slow-why", "title": "Populating values in numpy compound dataset is slow; why?", "body": "<p>I have the following numpy compound datatype:</p>\n\n<pre><code>mytype = numpy.dtype([('x', 'f8'),\n                      ('y', 'f8'),\n                      ('z', 'f8'))])\n</code></pre>\n\n<p>However, when I try to fill a vector of this type, it 60x slower than three separate arrays:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport time\nimport random\nimport numpy\n\nmytype = numpy.dtype([('x', 'f8'),\n                      ('y', 'f8'),\n                      ('z', 'f8')])\n\nsize = 1000000\nv = numpy.empty(shape=(size,), dtype=mytype)\n\nprint(\"Start inserting into compound type:\")\nstart = time.time()\nfor i in range(size):\n    v[i]['x'] = random.random()\n    v[i]['y'] = random.random()\n    v[i]['z'] = random.random()\n\nend = time.time()\nprint(\"Done inserting into compound type: Time elapsed: {}.\\n\".format(end - start))\n\n\nx = numpy.empty(shape=(size,), dtype='f8')\ny = numpy.empty(shape=(size,), dtype='f8')\nz = numpy.empty(shape=(size,), dtype='f8')\n\nprint(\"Inserting into three arrays:\")\nstart = time.time()\nfor i in range(size):\n    x[i] = random.random()\n    y[i] = random.random()\n    z[i] = random.random()\nend = time.time()\nprint(\"Done inserting into three arrays. Time elapsed: {}\".format(end - start))\n\nprint(\"Reading from compound type:\")\n\nstart = time.time()\nfor i in range(size):\n    x1 = v[i]['x']\n    y1 = v[i]['y']\n    z1 = v[i]['z']\n\nend = time.time()\nprint(\"Done reading compound type: Time elapsed: {}.\\n\".format(end -start))\n\nprint(\"Reading from three arrays:\")\nstart = time.time()\nfor i in range(size):\n    x1 = x[i]\n    y1 = y[i]\n    z1 = z[i]\nend = time.time()\nprint(\"Done reading three arrays. Time elapsed: {}.\\n\".format(end - start))\n</code></pre>\n\n<p>In addition, I find that reading numpy compound datatypes 70x slower than the corresponding separated datatypes. How I can increase the performance of numpy compound datatypes?</p>\n\n<p>Edit: After cloning numpy from master, this performance bug went away.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "edited": false, "score": 0, "creation_date": 1446672481, "post_id": 33532216, "comment_id": 54846295, "body": "You need to add more detail. Do they have the same index? if so then <code>data2[&#39;columnF&#39;] = data1[&#39;columnF&#39;]</code> would work. Are the same shape? Do they have some common index? <code>pd.concat</code> is probably what you want to use but until we know what the indices and shape are we can&#39;t tell you exactly how to use it."}], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1446673572, "post_id": 33532381, "comment_id": 54846844, "body": "thank you! i think i understand your code but the data and data1 are 2 files that i have read in using pd.read_csv and pd.read_excel, instead of the simple tables i put up there (wanted to make everything look clean here), and when i assign io.StringIO(data) and io.StringIO(data1) the error message gave &quot;initial_value must be str or None, not DataFrame&quot;  , do you know how i should fix this? thanks"}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "reply_to_user": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1446676247, "post_id": 33532381, "comment_id": 54848249, "body": "The <code>io.StringIO()</code> are just a way to create your sample data. You should use <code>read_csv</code> and <code>read_excel</code> as you have. The main part is <code>df[&#39;columnF&#39;] = pd.Series(df1[&#39;columnF&#39;])</code>"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1446731060, "post_id": 33532381, "comment_id": 54871878, "body": "thanks that worked.  if i want to insert that  &#39;columnF&#39; from df1 to the column after &#39;columnA&#39; in df, would i do something like <code>df[&#39;columnA&#39;+1] = df[&#39;columnF&#39;]</code> ?"}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "reply_to_user": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1446734159, "post_id": 33532381, "comment_id": 54874247, "body": "That won&#39;t work. You&#39;ll need <code>insert</code> for that. <code>df.insert(1,&#39;columnF&#39;,df1[&#39;columnF&#39;])</code>"}], "tags": [], "owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "is_accepted": true, "score": 8, "last_activity_date": 1446672631, "creation_date": 1446672631, "answer_id": 33532381, "question_id": 33532216, "link": "https://stackoverflow.com/questions/33532216/adding-columns-from-one-dataframe-to-another-python-pandas/33532381#33532381", "title": "Adding column(s) from one dataframe to another python pandas", "body": "<pre><code>import pandas as pd\nimport io\n\ndata = \"\"\"\nColumnA    columnB    columnC   columnD\n  A          B          C          D\n  A          B          C          D\n  A          B          C          D\n    \"\"\"\ndata1 = \"\"\"\nColumnE    columnF    columnG\n  E          F          G\n  E          F          G\n  E          F          G\n    \"\"\"\n\ndf = pd.read_csv(io.StringIO(data), delimiter='\\s+')\ndf1 = pd.read_csv(io.StringIO(data1), delimiter='\\s+')\n\ndf['columnF'] = pd.Series(df1['columnF'])\n\nprint(df)\n</code></pre>\n\n<p>Will give you:</p>\n\n<pre><code>  ColumnA columnB columnC columnD columnF\n0       A       B       C       D       F\n1       A       B       C       D       F\n2       A       B       C       D       F\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 12455221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KXHQe9u9fFo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rctrdMCKhTW4fMNTEmgjeNuyH7k9Q/photo.jpg?sz=128", "display_name": "Nisarg Nikhil", "link": "https://stackoverflow.com/users/12455221/nisarg-nikhil"}, "is_accepted": false, "score": 5, "last_activity_date": 1575014517, "last_edit_date": 1575014517, "creation_date": 1575010563, "answer_id": 59100087, "question_id": 33532216, "link": "https://stackoverflow.com/questions/33532216/adding-columns-from-one-dataframe-to-another-python-pandas/59100087#59100087", "title": "Adding column(s) from one dataframe to another python pandas", "body": "<pre><code>import pandas as pd\nf_column = data2[\"columnF\"]\ndata1 = pd.concat([data1,f_column], axis = 1)\ndata1\n</code></pre>\n\n<pre><code>     columnA      columnB     columnC     columnF\n0       a            b            c         f\n1       a            b            c         f\n2       a            b            c         f\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21338, "favorite_count": 0, "accepted_answer_id": 33532381, "answer_count": 2, "score": 9, "last_activity_date": 1575014599, "creation_date": 1446672036, "last_edit_date": 1446674940, "question_id": 33532216, "link": "https://stackoverflow.com/questions/33532216/adding-columns-from-one-dataframe-to-another-python-pandas", "title": "Adding column(s) from one dataframe to another python pandas", "body": "<p>I have been searching online and found similar questions but still couldn't find the answer to what I'm looking for. \nI have 2 excel files:</p>\n\n<p>data1 </p>\n\n<pre><code>ColumnA    columnB    columnC   columnD\n  A          B          C          D\n  A          B          C          D\n  A          B          C          D\n</code></pre>\n\n<p>data2</p>\n\n<pre><code>ColumnE    columnF    columnG   \n  E          F          G          \n  E          F          G          \n  E          F          G    \n</code></pre>\n\n<p>I want to add the column F from data2 to data1:</p>\n\n<pre><code>ColumnA    columnB    columnC   columnD  columnF \n  A          B          C          D       F\n  A          B          C          D       F\n  A          B          C          D       F\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>data2['columnF'] = data1['columnF']  #doesn't work\n</code></pre>\n\n<p>also tried</p>\n\n<pre><code>data1['columnF'] = ''   #adding a columnF to data1\nmerg_left = pd.merge(left=data1,right=data2, how='left',      \nleft_on='columnF', right_on='columnF')  \n#gave me a weird output file \n</code></pre>\n"}, {"tags": ["python", "python-2.7", "bottle"], "comments": [{"owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "edited": false, "score": 0, "creation_date": 1446708389, "post_id": 33532214, "comment_id": 54858282, "body": "Do you have a file or directory, in your current directory, named <code>bottle</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 3426752, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7c1f31c93c0c872cbec21929868799fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3426752", "link": "https://stackoverflow.com/users/3426752/user3426752"}, "is_accepted": false, "score": 0, "last_activity_date": 1446684474, "creation_date": 1446684474, "answer_id": 33534817, "question_id": 33532214, "link": "https://stackoverflow.com/questions/33532214/cant-get-bottle-to-import-route/33534817#33534817", "title": "Can&#39;t get bottle to import route", "body": "<p>Ok, I think I figured it out. I into another directory and ran </p>\n\n<p>python -c \"import bottle\"</p>\n\n<p>And then moved the script into that directory and it worked. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8095220, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5546755bbfa326833ded3e8093d509ad?s=128&d=identicon&r=PG", "display_name": "kishore", "link": "https://stackoverflow.com/users/8095220/kishore"}, "is_accepted": false, "score": -1, "last_activity_date": 1496284575, "creation_date": 1496284575, "answer_id": 44297600, "question_id": 33532214, "link": "https://stackoverflow.com/questions/33532214/cant-get-bottle-to-import-route/44297600#44297600", "title": "Can&#39;t get bottle to import route", "body": "<p>rename the file to mybottle.py and try again</p>\n"}], "owner": {"reputation": 335, "user_id": 3426752, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7c1f31c93c0c872cbec21929868799fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3426752", "link": "https://stackoverflow.com/users/3426752/user3426752"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 847, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496284575, "creation_date": 1446672031, "last_edit_date": 1446674588, "question_id": 33532214, "link": "https://stackoverflow.com/questions/33532214/cant-get-bottle-to-import-route", "title": "Can&#39;t get bottle to import route", "body": "<p>I am trying to get bottle to run the simple python script that bottle makes available on its download site on a Mac running El Capitan. I have imported bottle with pip install in my directory /Users/michaelreinhard$. I am running Python 2.7. </p>\n\n<p>bottle seems to install with no problems but when I try to run the script provided on the bottle website: </p>\n\n<pre><code>from bottle import route, run\n\n@route('/hello')\ndef hello():\n    return \"Hello World!\"\n\nrun(host='localhost', port=8080, debug=True)\n</code></pre>\n\n<p>I get the error message: </p>\n\n<pre><code>ImportError: cannot import name route\n</code></pre>\n\n<p>I have no idea what I am doing wrong. </p>\n\n<p>I found a similar question from about three years ago where a guy ran into the same problem running things from a virtual environment. The answer in his case was to change the name of the file from bottle.py to mybottle.py but that didn't work for me. </p>\n\n<p>UPDATE: </p>\n\n<p>I don't know if this is relevant but I saw on the MongoDB tutorial that the bottle package was installed in the /usr/local/bin/ directory. I checked on my own system and saw that bottle was not installed in that directory. So, I tried to install it there, running pip install from that /usr/local/bin/ directory and got back the message: </p>\n\n<p>Requirement already satisfied (use --upgrade to upgrade): bottle in /Users/michaelreinhard/anaconda/lib/python2.7/site-packages</p>\n\n<p>I guess that it installed it in the anaconda library. I don't know if that is part of the problem or not but I thought I would mention it. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7758, "user_id": 221794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1f02cce059c0fc8ca0f4012900bd00f0?s=128&d=identicon&r=PG", "display_name": "Dyno Fu", "link": "https://stackoverflow.com/users/221794/dyno-fu"}, "edited": false, "score": 0, "creation_date": 1446672129, "post_id": 33532213, "comment_id": 54846124, "body": "read the doc <a href=\"https://docs.python.org/2/library/urllib.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/urllib.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "is_accepted": true, "score": 0, "last_activity_date": 1446672254, "creation_date": 1446672254, "answer_id": 33532277, "question_id": 33532213, "link": "https://stackoverflow.com/questions/33532213/what-are-the-attributes-of-urlretrieve-function-in-python/33532277#33532277", "title": "What are the attributes of &#39;urlretrieve&#39; function in Python?", "body": "<p>If we take a look at the <a href=\"https://docs.python.org/2/library/urllib.html#urllib.urlretrieve\" rel=\"nofollow\">official Python documentation for <code>urllib.urlretrieve</code></a>, we get a nice explanation:</p>\n\n<blockquote>\n  <p>Copy a network object denoted by a URL to a local file, if necessary.\n  If the URL points to a local file, or a valid cached copy of the\n  object exists, the object is not copied. Return a tuple <code>(filename,\n  headers)</code> where <code>filename</code> is the local file name under which the object\n  can be found, and <code>headers</code> is whatever the <code>info()</code> method of the object\n  returned by <code>urlopen()</code> returned (for a remote object, possibly cached).\n  Exceptions are the same as for <code>urlopen()</code>.</p>\n  \n  <p>The second argument, if present, specifies the file location to copy\n  to (if absent, the location will be a tempfile with a generated name).\n  The third argument, if present, is a hook function that will be called\n  once on establishment of the network connection and once after each\n  block read thereafter. The hook will be passed three arguments; a\n  count of blocks transferred so far, a block size in bytes, and the\n  total size of the file. The third argument may be -1 on older FTP\n  servers which do not return a file size in response to a retrieval\n  request.</p>\n  \n  <p>If the url uses the http: scheme identifier, the optional data\n  argument may be given to specify a <code>POST</code> request (normally the request\n  type is <code>GET</code>). The data argument must in standard\n  application/x-www-form-urlencoded format; see the <code>urlencode()</code> function\n  below.</p>\n  \n  <p>Changed in version 2.5: <code>urlretrieve()</code> will raise <code>ContentTooShortError</code>\n  when it detects that the amount of data available was less than the\n  expected amount (which is the size reported by a Content-Length\n  header). This can occur, for example, when the download is\n  interrupted.</p>\n  \n  <p>The Content-Length is treated as a lower bound: if there\u2019s more data\n  to read, <code>urlretrieve()</code> reads more data, but if less data is available,\n  it raises the exception.</p>\n  \n  <p>You can still retrieve the downloaded data in this case, it is stored\n  in the content attribute of the exception instance.</p>\n  \n  <p>If no Content-Length header was supplied, <code>urlretrieve()</code> can not check\n  the size of the data it has downloaded, and just returns it. In this\n  case you just have to assume that the download was successful.</p>\n</blockquote>\n\n<p>By the way, they're called arguments or parameters, not attributes.</p>\n"}], "owner": {"reputation": 7, "user_id": 5310305, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xnH56o6eKMU/AAAAAAAAAAI/AAAAAAAAAXk/5Spy1TDJCFg/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/5310305/abhishek-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "accepted_answer_id": 33532277, "answer_count": 1, "score": -5, "last_activity_date": 1446672254, "creation_date": 1446672022, "question_id": 33532213, "link": "https://stackoverflow.com/questions/33532213/what-are-the-attributes-of-urlretrieve-function-in-python", "title": "What are the attributes of &#39;urlretrieve&#39; function in Python?", "body": "<p>I want to write a Python program to automatically fill web forms. On searching a lot, i found this code.</p>\n\n<p><code>import urllib\nurllib.urlretrieve(\"http://www.google.com/\", \"somefile.html\", lambda x,y,z:0, urllib.urlencode({\"username\": \"xxx\", \"password\": \"pass\"}))</code></p>\n\n<p>This function takes a lot of arguments. Can you please explain what each argument means?</p>\n"}, {"tags": ["python", "list", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 2841, "user_id": 1016864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e20e5342f4ab1fc7a5d257e9d0b25a06?s=128&d=identicon&r=PG", "display_name": "igon", "link": "https://stackoverflow.com/users/1016864/igon"}, "edited": false, "score": 0, "creation_date": 1446672408, "post_id": 33532202, "comment_id": 54846258, "body": "What&#39;s &quot;outer_key&quot; ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3439895"}, "reply_to_user": {"reputation": 2841, "user_id": 1016864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e20e5342f4ab1fc7a5d257e9d0b25a06?s=128&d=identicon&r=PG", "display_name": "igon", "link": "https://stackoverflow.com/users/1016864/igon"}, "edited": false, "score": 0, "creation_date": 1446672645, "post_id": 33532202, "comment_id": 54846376, "body": "outer_key is a fixed key and it&#39;s value is list of dictionary."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3439895"}, "reply_to_user": {"reputation": 2841, "user_id": 1016864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e20e5342f4ab1fc7a5d257e9d0b25a06?s=128&d=identicon&r=PG", "display_name": "igon", "link": "https://stackoverflow.com/users/1016864/igon"}, "edited": false, "score": 0, "creation_date": 1446672761, "post_id": 33532202, "comment_id": 54846434, "body": "Added the information in the question."}], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 3154314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51a481af927708d875a0f2b9f496082b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3154314/aaron"}, "is_accepted": true, "score": 3, "last_activity_date": 1446672794, "creation_date": 1446672794, "answer_id": 33532424, "question_id": 33532202, "link": "https://stackoverflow.com/questions/33532202/iterate-over-multiple-list-and-use-it-as-a-value-growing-dictionary/33532424#33532424", "title": "iterate over multiple list and use it as a value growing dictionary", "body": "<p>You are replacing the list with each iteration of the loop. Instead instantiate the list outside the loop and append to it inside. </p>\n\n<pre><code>import itertools\nlist1 = ['event1','event2']   #up to event-n\nlist2 = ['desc1', 'desc2']    #up to desc-n\npayload = {\n   \"outer_key\" : []\n}\nfor f, b in itertools.izip(list1, list2):\n     payload[\"outer_key\"].append({\"key1\" : f, \"key2\" : b})\nprint payload\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3439895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 33532424, "answer_count": 1, "score": 1, "last_activity_date": 1446672794, "creation_date": 1446671968, "last_edit_date": 1446672741, "question_id": 33532202, "link": "https://stackoverflow.com/questions/33532202/iterate-over-multiple-list-and-use-it-as-a-value-growing-dictionary", "title": "iterate over multiple list and use it as a value growing dictionary", "body": "<p>I have 2 lists of the same size:</p>\n\n<pre><code>list1 = ['event1','event2']   #up to event-n\nlist2 = ['desc1', 'desc2']    #up to desc-n\n</code></pre>\n\n<p>I want to iterate over 2 lists and put their data as a <strong>value</strong> in to a dictionary in a dynamic way.  </p>\n\n<p><strong>Expected output:</strong>  </p>\n\n<pre><code>payload={\n  \"outer_key\" : [ {\n    \"key1\" : event1,\n    \"key2\" : desc1 \n  },\n  {\n    \"key1\" : event2,\n    \"key2\" : desc2 \n  }\n ]}   \n</code></pre>\n\n<p>Since there are \"n\" number of <strong>events</strong> and <strong>desc</strong> , is there a way to make a flexible dictionary, which will grow according to list size?  </p>\n\n<p>Note:  each dictionary inside a list is of fixed size.<br>\ni.e. each dictionary have only 2 keys- key1 and key2.  </p>\n\n<p>My attempt :  </p>\n\n<pre><code>import itertools\nlist1 = ['event1','event2']   #up to event-n\nlist2 = ['desc1', 'desc2']    #up to desc-n\nfor f, b in itertools.izip(list1, list2):\n     payload={\n     \"outer_key\" : [ {\n     \"key1\" : f,\n     \"key2\" : b\n     }]}\nprint payload  \n</code></pre>\n\n<p>Obvious and <strong>actual output</strong>: </p>\n\n<pre><code>payload= {'outer_key': [{'key1': 'event2', 'key2':'desc2'}]}\n</code></pre>\n\n<p>What is the best way to dynamically grow <strong>key1</strong> and <strong>key2</strong> as per the list size ? </p>\n\n<p>Edit 1: Assume that there is only 1 \"outer_key\" and it has only 1 value- which is a list. And list has \"n\" number of dictionaries.      </p>\n"}, {"tags": ["python", "video", "matplotlib", "pygame", "psychopy"], "comments": [{"owner": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 2, "creation_date": 1446693273, "post_id": 33532199, "comment_id": 54853205, "body": "The code you posted is for generating a new full-screen movie, containing both of the smaller movie stimuli. What happens when you simply attempt to play both movies? You don&#39;t explain what &quot;I cannot, however, figure out how to play two at the same time&quot; means. The code above (minus <code>.getMovieFrame()</code> and replacing <code>win.update()</code> with <code>win.flip()</code>) <i>should</i> do what you want directly."}, {"owner": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 0, "creation_date": 1446693416, "post_id": 33532199, "comment_id": 54853244, "body": "Also, what version of PsychoPy are you using? The latest version (containing movie3.py) should have greatly improved ability, by using a different backend for movie playing."}, {"owner": {"reputation": 664, "user_id": 4721576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-TxIPPdz_3RE/AAAAAAAAAAI/AAAAAAAAAe4/QPS04K_fb3Y/photo.jpg?sz=128", "display_name": "Patrick Williams", "link": "https://stackoverflow.com/users/4721576/patrick-williams"}, "reply_to_user": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 0, "creation_date": 1446698304, "post_id": 33532199, "comment_id": 54854582, "body": "What I meant was that I cannot figure out how to play two movies simultaneously using pygame, which is one of the avenues I&#39;m exploring to solve this problem.  The psychopy solution is confounded by a need for pymedia, which itself requires the following libraries: libogg-dev, libvorbis-dev, libfaad-dev, libasound2-dev, and libmp3lame-dev. All of which I have installed, but the pymedia installer won&#39;t see them. Perhaps that could be another question.  I will try your suggestions, after updating to the latest version of psychopy. Currently I am running whichever version came out last month."}, {"owner": {"reputation": 664, "user_id": 4721576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-TxIPPdz_3RE/AAAAAAAAAAI/AAAAAAAAAe4/QPS04K_fb3Y/photo.jpg?sz=128", "display_name": "Patrick Williams", "link": "https://stackoverflow.com/users/4721576/patrick-williams"}, "reply_to_user": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 0, "creation_date": 1446698807, "post_id": 33532199, "comment_id": 54854720, "body": "Sorry for leaving out one very important detail. My goal is to save the output as a new (single) movie, not just to view the stimuli within a python created window."}, {"owner": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 0, "creation_date": 1446768606, "post_id": 33532199, "comment_id": 54893988, "body": "Ahh, OK. Seems this is a longstanding problem: <a href=\"https://groups.google.com/forum/#!msg/psychopy-users/ZU6mjvr7ZYo/tugSMCPOBFMJ\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!msg/psychopy-users/ZU6mjvr7ZYo/&hellip;</a> Can you try <code>win.saveMovieFrames(&#39;movie.png&#39;)</code> to output individual frames instead of a movie file? This is the approach needed on OS X (i.e. other software has to be used to stitch the resulting frame series into a movie)."}, {"owner": {"reputation": 664, "user_id": 4721576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-TxIPPdz_3RE/AAAAAAAAAAI/AAAAAAAAAe4/QPS04K_fb3Y/photo.jpg?sz=128", "display_name": "Patrick Williams", "link": "https://stackoverflow.com/users/4721576/patrick-williams"}, "reply_to_user": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "edited": false, "score": 0, "creation_date": 1446918679, "post_id": 33532199, "comment_id": 54947856, "body": "I ended up using Final Cut Pro."}], "owner": {"reputation": 664, "user_id": 4721576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-TxIPPdz_3RE/AAAAAAAAAAI/AAAAAAAAAe4/QPS04K_fb3Y/photo.jpg?sz=128", "display_name": "Patrick Williams", "link": "https://stackoverflow.com/users/4721576/patrick-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446699232, "creation_date": 1446671959, "last_edit_date": 1495535237, "question_id": 33532199, "link": "https://stackoverflow.com/questions/33532199/is-it-possible-with-pygame-to-play-two-movies-simultaneously-and-save-them-as-a", "title": "Is it possible with pygame to play two movies simultaneously and save them as a single movie?", "body": "<p>Edit: I am running python 2.7.6, on Ubuntu 14.04</p>\n\n<p>Edit: <strong>My ultimate goal is to output a single movie file of the output of this script</strong></p>\n\n<p>I've read all the tutorials and stackoverflow question/answers I can find on this topic and can fairly easily play a single movie, or two movies back-to-back, using pygame (using some variation of the script found <a href=\"https://stackoverflow.com/questions/21356439/how-to-load-and-play-a-video-in-pygame\">here</a>. I cannot, however, figure out how to play two at the same time. My intention is to play a movie that I have created with a different script (from <a href=\"https://stackoverflow.com/questions/33181699/matplotlib-animation-not-saving-properly\">this question</a> I asked before), underneath a film clip of the same duration, and to save this product as a new video.</p>\n\n<p>I understand the best way to do this would probably be to both create the movie and play it in the same script, but I am new to Python and am looking for a quick solution until I figure out the better (but more complicated) solutions. So I am just looking to play two movies that are imported into a single script, stacked one above the other.</p>\n\n<p>I have been able to do this with the toolbox psychopy, but the toolbox they use to output movies (pymedia) apparently isn't in use anymore. Here is the code I used for that, which does just what I want it to, but without the ability to output the video file:</p>\n\n<p>from psychopy import visual, core, event</p>\n\n<pre><code>movie01 = '/home/pbwilliams/Documents/movie01.mpg'\nmovie02 = '/home/pbwilliams/Documents/movie02.mp4'\nwin = visual.Window([800,600])\nmov1 = visual.MovieStim(win, movie01, size=[320,240],pos=[0, 100])\nmov2 = visual.MovieStim(win, movie02, size=[320,120],pos=[0, -100],)\n\nglobalClock = core.Clock()\n\nwhile globalClock.getTime()&lt;(mov.duration+0.5):\n    mov1.draw()\n    mov2.draw()\n    win.update()\n    win.getMovieFrame()\n\nwin.saveMovieFrames('testmovie.mpg')\n\ncore.quit()\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Patrick</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1446671737, "post_id": 33532090, "comment_id": 54845899, "body": "please walk through what you think <code>get_translations</code> does because i doubt it does what you expect it to."}], "answers": [{"tags": [], "owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671713, "creation_date": 1446671713, "answer_id": 33532143, "question_id": 33532090, "link": "https://stackoverflow.com/questions/33532090/how-to-read-in-a-text-file-create-a-dictionary-read-in-another-text-file-and-t/33532143#33532143", "title": "How to read in a text file, create a dictionary, read in another text file and translate it with said dictionary and write it into a new file", "body": "<p>If I understand your question correctly, you want to be looping through the dictionary like this in order to obtain the key and the value of each item:</p>\n\n<pre><code>for key, value in dictionary.items():\n    # Do something with the key or the value here.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1446672097, "post_id": 33532170, "comment_id": 54846105, "body": "You probably don&#39;t want to use dict as a variable name as it will stop on the built-in type."}], "tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1446671802, "creation_date": 1446671802, "answer_id": 33532170, "question_id": 33532090, "link": "https://stackoverflow.com/questions/33532090/how-to-read-in-a-text-file-create-a-dictionary-read-in-another-text-file-and-t/33532170#33532170", "title": "How to read in a text file, create a dictionary, read in another text file and translate it with said dictionary and write it into a new file", "body": "<p>You have to specify if there's punctuation or stuff.</p>\n\n<p>I'm going to assume just spaces and words.</p>\n\n<pre><code>def translate(dict, text1, trnsl):\n    with open(\"text1.txt\") as text1, open(\"trnsl.txt\", \"w\") as trnsl:\n        for line in text1: # parse each line\n            words = line.split() # break line into words, do more stuff here if punctuation\n            for word in words:\n                if word in dict: # check if translatable\n                    trnsl.write(dict[word]) # get translation\n                else:\n                    trnsl.write(word)\n                trnsl.write(' ') # re-add spaces between words\n            trnsl.write('\\n') # re-add endlines between lines\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5522059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c1726d4ba383a3baaf77371385466e?s=128&d=identicon&r=PG&f=1", "display_name": "Juls", "link": "https://stackoverflow.com/users/5522059/juls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 33532170, "answer_count": 2, "score": -3, "last_activity_date": 1446671802, "creation_date": 1446671492, "last_edit_date": 1446671534, "question_id": 33532090, "link": "https://stackoverflow.com/questions/33532090/how-to-read-in-a-text-file-create-a-dictionary-read-in-another-text-file-and-t", "title": "How to read in a text file, create a dictionary, read in another text file and translate it with said dictionary and write it into a new file", "body": "<p>hey guys so I'm working on a (for me) complicated code and I'm kinda stuck. The task is that I should write a programm which <strong>reads in a dictionary</strong> (file.txt is given), and <strong>translate another text</strong> with this dictionary (also given so it must be read in too) and then <strong>save the translated</strong> text into a new file (which I gotta create). </p>\n\n<p>I think I got it so far that the dictionary is read in but then I'm pretty much lost. I was trying to do an if loop conditional (if the key is in the text I gotta translate, it should be replaced by the value) but I can't go on from there.</p>\n\n<p>So here's what I got so far:</p>\n\n<pre><code>dictionary = {}\n\nwith open(\"dict.txt\") as dict:\n    for line in dict:\n        wordPair = line.split()\n        dictionary[wordPair[0]] = wordPair[1]\n\ndef get_translations(dict):\n    dict = get_translations(\"dict.txt\")\n    return get_translations(dict)\n\ndef translate(dict, text1, trnsl):\n    with open(\"text1.txt\") as text1, open(\"trnsl.txt\", \"w\") as trnsl:\n        for wordPair in dict:\n            if wordPair == True: #that's where I can't figure it out.\n</code></pre>\n\n<p>Sidenote: if any word can't be translated from the given dictionary (because it's not part of the dictionary), it should be indicated by these \"&lt;>\". I guess a simple else: print word + \"&lt;>\" would do? </p>\n\n<p>Thanks for ANY suggestions! </p>\n"}, {"tags": ["python", "file-io"], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671036, "creation_date": 1446671036, "answer_id": 33531972, "question_id": 33531903, "link": "https://stackoverflow.com/questions/33531903/how-to-format-output-data-in-python/33531972#33531972", "title": "How to format output data in python", "body": "<p>You can pad to a certain width:</p>\n\n<pre><code>input=open(\"input.txt\",\"r\")\noutput=open(\"output.txt\",\"w\")\n\nfor line in input:\n    line=input.readlines()\n    if '[OFFSET]' in line:\n        line=line.replace('[OFFSET]',register[i]['offset'] + (' ' * (30 - len(register[i]['offset']))))\n\n    if '[NAME]' in line:\n        line=line.replace('[OFFSET]',register[i]['name'] + (' ' * (40 - len(register[i]['name'])))\n\n    if '[DESCRIPTION]' in line:\n        line=line.replace('[DESCRIPTION]',register[i]['description'])  \n\n    output.write(line)\n</code></pre>\n\n<p>Don't need to pad the last section though.\nFeel free to edit the numbers as you see fit.</p>\n"}, {"tags": [], "owner": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1446671205, "creation_date": 1446671205, "answer_id": 33532012, "question_id": 33531903, "link": "https://stackoverflow.com/questions/33531903/how-to-format-output-data-in-python/33532012#33532012", "title": "How to format output data in python", "body": "<p>You have two options for string formatting in Python: the <code>%</code> operator and the (preferred) <code>.format()</code> method.</p>\n\n<p>These will allow you to format the text considering number precision, number and string padding and alignment (which is what you seem to need).</p>\n\n<p>Check out the documentation at: </p>\n\n<p><a href=\"https://docs.python.org/2/library/string.html\" rel=\"nofollow\">https://docs.python.org/2/library/string.html</a> (Python 2)</p>\n\n<p><a href=\"https://docs.python.org/3/library/string.html\" rel=\"nofollow\">https://docs.python.org/3/library/string.html</a> (Python 3)</p>\n\n<p>These examples from those docs are relevant:</p>\n\n<pre><code>&gt;&gt;&gt; '{:&lt;30}'.format('left aligned')\n'left aligned                  '\n&gt;&gt;&gt; '{:&gt;30}'.format('right aligned')\n'                 right aligned'\n&gt;&gt;&gt; '{:^30}'.format('centered')\n'           centered           '\n&gt;&gt;&gt; '{:*^30}'.format('centered')  # use '*' as a fill char\n'***********centered***********'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671317, "creation_date": 1446671317, "answer_id": 33532047, "question_id": 33531903, "link": "https://stackoverflow.com/questions/33531903/how-to-format-output-data-in-python/33532047#33532047", "title": "How to format output data in python", "body": "<p>You should use the .format() syntax like so:</p>\n\n<pre><code>line=line.replace('[OFFSET]', '{0:&lt;40}'.format(register[i]['offset']))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4081, "user_id": 1068629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efc4f203b924017e538e7c3c84e2e6df?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/1068629/luke"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671338, "creation_date": 1446671338, "answer_id": 33532052, "question_id": 33531903, "link": "https://stackoverflow.com/questions/33531903/how-to-format-output-data-in-python/33532052#33532052", "title": "How to format output data in python", "body": "<p>Sounds like you want each column to be the same number of characters (e.g. 20 characters), so you need to pad your string with spaces to make it 20 characters total. The ljust function of a string can do this:</p>\n\n<pre><code>\"hello\".ljust(20,' ')\n&gt;&gt;&gt;'hello               '\n</code></pre>\n\n<p>Applied to your code, you can do something like this:</p>\n\n<pre><code>line=line.replace('[OFFSET]',register[i]['offset'].ljust(20,' '))\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 3757208, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f93b1c3fd0fa9b0e13ddce715f8ff2a?s=128&d=identicon&r=PG&f=1", "display_name": "GoldenEagle", "link": "https://stackoverflow.com/users/3757208/goldeneagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1446671338, "creation_date": 1446670778, "question_id": 33531903, "link": "https://stackoverflow.com/questions/33531903/how-to-format-output-data-in-python", "title": "How to format output data in python", "body": "<p>I am outputting a file, by populating it with values in certain locations. Any of the names inside the [] brackets are being populated with actual values. But since the values are different in length the format is mess up, how can I do this?</p>\n\n<p>Thank you!</p>\n\n<p>Input file</p>\n\n<pre><code> type xga_control_type is record\n      [NAME]                     : std_logic;              -- [OFFSET]     : [DESCRIPTOIN]\n\nend record xga_control_type;  \n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>input=open(\"input.txt\",\"r\")\noutput=open(\"output.txt\",\"w\")\n\nfor line in input:\n    line=input.readlines()\n    if '[OFFSET]' in line:\n        line=line.replace('[OFFSET]',register[i]['offset'])\n\n    if '[NAME]' in line:\n        line=line.replace('[OFFSET]',register[i]['name'])\n\n    if '[DESCRIPTION]' in line:\n        line=line.replace('[DESCRIPTION]',register[i]['description'])  \n\n    output.write(line)\n</code></pre>\n\n<p>Current output</p>\n\n<pre><code>type xga_control_type is record\n      reserved        : std_logic;                      -- 31..27     : \n      force_all_fault_clear        : std_logic;                      -- 26     : Rising edge forces all fault registers to clear\n      force_warning        : std_logic;                      -- 25     : Forces AC2 to report a Master Warning\n      force_error        : std_logic;                      -- 24     : Forces AC2 to report a Master Error\n      reserved        : std_logic;                      -- 23..22     : \n      ref_delay_cnt        : std_logic;                      -- 21..20     : Number of reference commands to delay output by.  Counts in 4us increments\n\nend record xga_control_type;\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code> type xga_control_type is record\n      reserved                     : std_logic;                      -- 31..27     : \n      force_all_fault_clear        : std_logic;                      -- 26         : Rising edge forces all fault registers to clear\n      force_warning                : std_logic;                      -- 25         : Forces AC2 to report a Master Warning\n      force_error                  : std_logic;                      -- 24         : Forces AC2 to report a Master Error\n      reserved                     : std_logic;                      -- 23..22     : \n      ref_delay_cnt                : std_logic;                      -- 21..20     : Number of reference commands to delay output by.  Counts in 4us increments     \nend record xga_control_type;\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5374593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4657d6b73a3aeb10dba07915baf25?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Roberson", "link": "https://stackoverflow.com/users/5374593/bill-roberson"}, "edited": false, "score": 0, "creation_date": 1446766282, "post_id": 33531908, "comment_id": 54893226, "body": "Thank you, this answer helped me a lot"}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 0, "last_activity_date": 1446670804, "creation_date": 1446670804, "answer_id": 33531908, "question_id": 33531851, "link": "https://stackoverflow.com/questions/33531851/analyzing-pixel-rgb-values-with-pil/33531908#33531908", "title": "Analyzing pixel RGB values with PIL", "body": "<pre><code>from PIL import Image\nimg = Image.open(\"filename.png\")\npixels = img.load()\n\n#get the B value of the pixel at x=23, y=42\nprint pixels[23, 42][2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 3237810, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2dd47ba3517e7a65ba2b4d8f0fd5ccc4?s=128&d=identicon&r=PG&f=1", "display_name": "DorinPopescu", "link": "https://stackoverflow.com/users/3237810/dorinpopescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671188, "creation_date": 1446671188, "answer_id": 33532001, "question_id": 33531851, "link": "https://stackoverflow.com/questions/33531851/analyzing-pixel-rgb-values-with-pil/33532001#33532001", "title": "Analyzing pixel RGB values with PIL", "body": "<p>The previous answer is a good solution but just suggesting another way which is one line:</p>\n\n<pre><code>from scipy import misc;\n\nimgData = misc.imread('./image.png');\n</code></pre>\n\n<p>You can then easily get the colors at every pixels you need.</p>\n"}, {"tags": [], "owner": {"reputation": 2145, "user_id": 2403000, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2303300fa4b29197c3a11eea331afdbf?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2403000/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671710, "creation_date": 1446671710, "answer_id": 33532142, "question_id": 33531851, "link": "https://stackoverflow.com/questions/33531851/analyzing-pixel-rgb-values-with-pil/33532142#33532142", "title": "Analyzing pixel RGB values with PIL", "body": "<p>Kevin got it pretty much spot on, you can also use <code>getdata()</code> to return a list of tuples. </p>\n\n<p>I may have got this totally wrong, but <code>load()</code> might work better if you need particular pixels, and <code>getdata()</code> if you need all of them. Also, it's a good idea to convert to RGB if it's just a normal image, I've had errors before by not doing that.</p>\n\n<pre><code>image = Image.open('filename').convert('RGB')\nwidth, height = image.size\n\n#Get pixels in a list of tuples\npixels = image_input.getdata()\n\n#If you need a flat list containing all the colours\nbytes = [j for i in pixels for j in i]\n</code></pre>\n\n<p>If you needed to do stuff to the pixels and rebuild the image after, that's where the image size comes in useful.</p>\n"}], "owner": {"reputation": 3, "user_id": 5374593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae4657d6b73a3aeb10dba07915baf25?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Roberson", "link": "https://stackoverflow.com/users/5374593/bill-roberson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 33531908, "answer_count": 3, "score": 0, "last_activity_date": 1446671710, "creation_date": 1446670602, "question_id": 33531851, "link": "https://stackoverflow.com/questions/33531851/analyzing-pixel-rgb-values-with-pil", "title": "Analyzing pixel RGB values with PIL", "body": "<p>I'm working on a project where I need to find the RGB values of each pixel in a picture. How could I do this using PIL? I know that Pillow is better, but since I only need to do this one thing I thought I could just use PIL. If this won't work as well please tell me.</p>\n"}, {"tags": ["python", "csv", "dictionary", "matrix", "multidimensional-array"], "comments": [{"owner": {"reputation": 1164, "user_id": 3704291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4765f40b9788ab42e575036273910fe7?s=128&d=identicon&r=PG&f=1", "display_name": "gkusner", "link": "https://stackoverflow.com/users/3704291/gkusner"}, "edited": false, "score": 0, "creation_date": 1446670766, "post_id": 33531842, "comment_id": 54845365, "body": "you are telling it to create a list (append) instead of setting a key to a dict, the assignment should be matrixDict[x] = y, how ever the loop isnt quite right either since you are not handling the column header in the key"}, {"owner": {"reputation": 770, "user_id": 2338089, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4803ef48161c24d8ef58edfaff009d50?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/2338089/adam"}, "reply_to_user": {"reputation": 1164, "user_id": 3704291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4765f40b9788ab42e575036273910fe7?s=128&d=identicon&r=PG&f=1", "display_name": "gkusner", "link": "https://stackoverflow.com/users/3704291/gkusner"}, "edited": false, "score": 0, "creation_date": 1446736425, "post_id": 33531842, "comment_id": 54875910, "body": "that&#39;s helpful (I&#39;ll edit the question to reflect the correct assignment). But I still can&#39;t figure out how to handle the column header."}], "answers": [{"comments": [{"owner": {"reputation": 770, "user_id": 2338089, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4803ef48161c24d8ef58edfaff009d50?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/2338089/adam"}, "edited": false, "score": 0, "creation_date": 1446737208, "post_id": 33532618, "comment_id": 54876509, "body": "This works great. I added in some explanation of the second <code>for</code> loop as a sanity check for myself. If any of that is wrong feel free to change.  Thanks!"}], "tags": [], "owner": {"reputation": 1908, "user_id": 5511504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccffc967339e7fa5a3406a6aee147103?s=128&d=identicon&r=PG", "display_name": "Mart&#237;n Mu&#241;oz del R&#237;o", "link": "https://stackoverflow.com/users/5511504/mart%c3%adn-mu%c3%b1oz-del-r%c3%ado"}, "is_accepted": true, "score": 1, "last_activity_date": 1446673505, "creation_date": 1446673505, "answer_id": 33532618, "question_id": 33531842, "link": "https://stackoverflow.com/questions/33531842/create-a-dict-or-list-from-a-matrixcsv-in-python-using-standard-libraries-modu/33532618#33532618", "title": "create a dict or list from a matrix(csv) in python using standard libraries/modules", "body": "<p>Try:</p>\n\n<pre><code>import csv\nfrom collections import defaultdict\n\nmatrixDict=defaultdict(list)\nwith open(\"m.csv\", \"r\") as confusion_data:\n    reader = csv.reader(confusion_data, dialect = csv.excel, delimiter = ',')\n    headers = reader.next()\n\n    for row in reader:\n        for i in range(1,len(headers)):\n            matrixDict[headers[i]+row[0]] = row[i]\n\nprint matrixDict\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": false, "score": 0, "last_activity_date": 1446673565, "creation_date": 1446673565, "answer_id": 33532640, "question_id": 33531842, "link": "https://stackoverflow.com/questions/33531842/create-a-dict-or-list-from-a-matrixcsv-in-python-using-standard-libraries-modu/33532640#33532640", "title": "create a dict or list from a matrix(csv) in python using standard libraries/modules", "body": "<p>Try this:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport csv\n\nmatrixDict = dict()\nwith open('csv', 'r') as confusion_data:\n    reader = csv.reader(confusion_data, dialect=csv.excel, delimiter=',')\n    headers = reader.next()\n    for row in reader:\n        header_index = 1\n        for col in row[1:]:\n            key = headers[header_index] + row[0]\n            matrixDict[key] = col\n            header_index += 1\n\nprint matrixDict\n</code></pre>\n\n<p>For the given input as a file named \"csv\" it outputs</p>\n\n<pre><code>{'AA': '1', 'AC': '3', 'AB': '6', 'BA': '9', 'BB': '3', 'BC': '8', 'CC': '8', 'CB': '5', 'CA': '3'}\n</code></pre>\n"}], "owner": {"reputation": 770, "user_id": 2338089, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4803ef48161c24d8ef58edfaff009d50?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/2338089/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 33532618, "answer_count": 2, "score": 1, "last_activity_date": 1446736531, "creation_date": 1446670577, "last_edit_date": 1446736531, "question_id": 33531842, "link": "https://stackoverflow.com/questions/33531842/create-a-dict-or-list-from-a-matrixcsv-in-python-using-standard-libraries-modu", "title": "create a dict or list from a matrix(csv) in python using standard libraries/modules", "body": "<p>I have a matrix in csv format that I'm trying to read in and create a k:v dict from, where the x/y headers are the key and value is the cell that they map to.\nI'm unable to use any non-standard libraries or modules.</p>\n\n<p>The csv looks like this:</p>\n\n<pre><code> ,A,B,C\nA,1,9,3\nB,6,3,5\nC,3,8,8\n</code></pre>\n\n<p>and I want the dict to look like this:</p>\n\n<pre><code>{AA:1,BA:9,CA:3,AB:6,BB:3,CB:5,AC:3,BC:8,CC:8}\n</code></pre>\n\n<p>what I have so far:</p>\n\n<pre><code>matrixDict=defaultdict(list)\nwith open(\"/path/to/substitutionMatrix.csv\", \"rb\") as confusion_data:\n    reader = csv.reader(confusion_data, dialect = csv.excel, delimiter = ',')\n    headers = reader.next()\n    i,j=1,1\n    for row in reader:\n        x=row[0]+headers[i]+(row[j])\n        for y in row:\n             matrixDict[x]=y\n</code></pre>\n\n<p>but this isn't working, it gives me a key with a list, instead of the cell's value that the key is supposed to map to.</p>\n"}, {"tags": ["python", "telnet", "telnetlib"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1446670865, "post_id": 33531769, "comment_id": 54845417, "body": "<code>&quot;root@ &quot;</code> should that final space be there?"}, {"owner": {"reputation": 1, "user_id": 5526486, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CEh79o-V_lM/AAAAAAAAAAI/AAAAAAAAF44/6hEi8DryBG8/photo.jpg?sz=128", "display_name": "strawilka", "link": "https://stackoverflow.com/users/5526486/strawilka"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1446733644, "post_id": 33531769, "comment_id": 54873864, "body": "Removing spaces is helped. I don&#39;t really understand why because I&#39;ve changed only login_as_root() and before that script works ok. Thank you!"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1446738630, "post_id": 33531769, "comment_id": 54877598, "body": "<code>launch_update</code> expects that the session prompt will start with &quot;root@ &quot;. If that used to work, then it could be that the old <code>login_as_root</code> set the <code>PS1</code> environment variable which controls what the prompt looks like. That&#39;s all just a guess!"}], "owner": {"reputation": 1, "user_id": 5526486, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CEh79o-V_lM/AAAAAAAAAAI/AAAAAAAAF44/6hEi8DryBG8/photo.jpg?sz=128", "display_name": "strawilka", "link": "https://stackoverflow.com/users/5526486/strawilka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446909595, "creation_date": 1446670292, "last_edit_date": 1446909595, "question_id": 33531769, "link": "https://stackoverflow.com/questions/33531769/various-connection-via-telnet-with-without-password", "title": "Various connection via telnet with/without password", "body": "<pre><code>import telnetlib\nimport os\nimport re\n\ncurrent_dir = os.getcwd()\nIP = &lt;IP&gt;\n\ndef login_as_root():\n\n    print \"logging in as root...\"\n    tn.read_until(\"login: \")\n    tn.write(\"root\\r\")\n    response = tn.expect([re.compile(b\"Password:\"),b\"root@\",])\n    if \"Password:\" in response[2]:\n        send_msg(\"root\", \"root@\")\n    else:\n        print \"logging without passwd\"\n\ndef send_msg(msg, wait_str, print_msg=0):\n    if print_msg:\n        print msg\n    tn.write(\"%s\\n\" % msg)\n    return tn.read_until(wait_str)\n\ndef launch_update():\n    try:\n        print send_msg(\"mount -o remount,rw /\", \"root@ \", print_msg=1)\n    except:\n        Exception(\"Update configuring is failed\")\n\ndef main():\n    global tn\n    try:\n        tn = telnetlib.Telnet(IP)\n        login_as_root()\n    except:\n        raise Exception(\"Connect failed\")\n\n    launch_update()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Need help with login_as_root(). There are 2 cases to login as root: with password and without any password. I have to connect correctly to host and then launch several commands in launch_update(). Script stucks after mount command.</p>\n"}, {"tags": ["python", "logging", "queue", "gevent"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5906963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba8f423838e0cff73914249c32f22b5?s=128&d=identicon&r=PG", "display_name": "DaR", "link": "https://stackoverflow.com/users/5906963/dar"}, "is_accepted": false, "score": 1, "last_activity_date": 1455088986, "creation_date": 1455088986, "answer_id": 35309125, "question_id": 33531745, "link": "https://stackoverflow.com/questions/33531745/python-gevent-shared-queue-listener-process/35309125#35309125", "title": "Python Gevent Shared Queue (Listener Process)", "body": "<p>The first problem is that your listener is never yielding if the queue is initially empty.  The first task you spawn is your listener.  When it starts, there's a <code>while True:</code>, the q will be empty, so you go to the else branch, which just continues, looping back to the start of the while loop, and then the q is still empty.  So you just sit in the first thread constantly checking the q is empty.   </p>\n\n<p>The key thing here is that gevent does not use \"native\" threads or processes.  Unlike \"real\" threads, which can be switched to at any time by something behind the scenes (like your OS scheduler), gevent uses 'greenlets', which require that you do something to \"yield control\" to another task.  That something is whatever gevent thinks would block, such as read from the network, disk, or use one of the blocking gevent operations.</p>\n\n<p>One crude fix would be to start your listener when <code>pid == 9</code> rather than 0.  By making it spawn last, there will be items in the q, and it will go into the main if branch.   The downside is that this doesn't fix the logic problem, so the first time the queue is empty, you'll get stuck in your infinite loop again.</p>\n\n<p>A more correct fix would be to put <code>gevent.sleep()</code> instead of <code>continue</code>.  sleep is a blocking operation, so your other tasks will get a chance to run.  Without arguments, it waits for no time, but still gives gevent the chance to decide to switch to another task if it is ready to run.   This still isn't very efficient, though, as if the Queue is empty, it's going to spend a lot of pointless time checking that over and over and asking to run again as soon as it can.  sleep'ing for longer than the default of 0 will be more efficient, but would delay processing your log messages.</p>\n\n<p>However, you can instead take advantage of the fact that many of gevent's types, such as Queue, can be used in more Pythonic ways and make your code a lot simpler and easier to understand, as well as more efficient.</p>\n\n<pre><code>import gevent\nfrom gevent.queue import Queue\n\ndef listener(q):\n    for msg in q:\n        print \"the number is %d\" % msg\n\ndef worker(pid,q):\n    gevent.sleep(random.randint(0,2)*0.001)\n    num = random.randint(1,100)\n    q.put(num)\n\ndef main():\n    q = Queue()\n    listener_task = gevent.spawn(listener, q)\n    worker_tasks = [gevent.spawn(worker, pid, q) for pid in xrange(1, 10)]\n    gevent.wait(worker_tasks)\n    q.put(StopIteration)\n    gevent.join(listener_task)\n</code></pre>\n\n<p>Here, <code>Queue</code> can operate as an iterator in a <code>for</code> loop.  As long as there are messages, it will get an item, run the loop, and then wait for another item.  If there are no items, it will just block and hang around until the next one arrives.   Since it blocks, though, gevent will switch to one of your other tasks to run, avoiding the infinite loop problem your example code has.</p>\n\n<p>Because this version is using the <code>Queue</code> as a for loop iterator, there's also automatically a nice sentinel value we can put in the queue to make the listener task quit.  If a for loop gets <code>StopIteration</code> from its iterator, it will exit cleanly.  So when our for loop that's reading from q gets <code>StopIteration</code> from the q, it exits, and then the function exits, and the spawned task is finished.</p>\n"}], "owner": {"reputation": 2779, "user_id": 3403428, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3fb1fae9a6a4388a14ddd0411f072b42?s=128&d=identicon&r=PG&f=1", "display_name": "DJMcCarthy12", "link": "https://stackoverflow.com/users/3403428/djmccarthy12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1455088986, "creation_date": 1446670217, "question_id": 33531745, "link": "https://stackoverflow.com/questions/33531745/python-gevent-shared-queue-listener-process", "title": "Python Gevent Shared Queue (Listener Process)", "body": "<p>I am trying to get some code working where I can implement logging into a multi-threaded program using gevent. What I'd like to do is set up custom logging handlers to put log events into a Queue, while a listener process is continuously watching for new log events to handle appropriately. I have done this in the past with Multiprocessing, but never with Gevent.</p>\n\n<p>I'm having an issue where the program is getting caught up in the infinite loop (listener process), and not allowing the other threads to \"do work\"...</p>\n\n<p>Ideally, after the worker processes have finished, I can pass an arbitrary value to the listener process to tell it to break the loop, and then join all the processes together. Here's what I have so far:</p>\n\n<pre><code>import gevent\nfrom gevent.pool import Pool\nimport Queue\nimport random\nimport time\n\ndef listener(q):\n    while True:\n        if not q.empty():\n            num = q.get()\n            print \"The number is: %s\" % num\n            if num &lt;= 100:\n                print q.get()\n            # got passed 101, break out\n            else:\n                break\n        else:\n            continue\ndef worker(pid,q):\n    if pid == 0:\n        listener(q)\n    else:\n        gevent.sleep(random.randint(0,2)*0.001)\n        num = random.randint(1,100)\n        q.put(num)\n\ndef main():\n    q = Queue.Queue()\n    all_threads = []\n    all_threads = [gevent.spawn(worker, pid,q) for pid in xrange(10)]\n    gevent.wait(all_threads[1:])\n    q.put(101)\n    gevent.joinall(all_threads)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>As I said, the program seems to be getting hung up on that first process and does not allow the other workers to do their thing. I have also tried spawning the listener process completely separately itself (which is actually how I would rather do it), but that didn't seem to work either so I tried this way.</p>\n\n<p>Any help would be appreciated, feel like I am probably just missing something obvious about gevent's back end.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "list", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1446670563, "post_id": 33531706, "comment_id": 54845247, "body": "You should use the Python Pandas lib to create the type of data frame you&#39;re showing in your post."}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446670843, "post_id": 33531706, "comment_id": 54845400, "body": "Where do I start with that? Any methods I should be looking at?"}, {"owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "edited": false, "score": 0, "creation_date": 1446671135, "post_id": 33531706, "comment_id": 54845553, "body": "Making a variable named <code>dict</code> will make the builtin <code>dict</code> function inaccessible. You should rename it to something else. Also it&#39;s not a dict, it&#39;s a list of tuples of strings and dicts."}], "answers": [{"comments": [{"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446670818, "post_id": 33531788, "comment_id": 54845388, "body": "I get the following error: <code>TypeError: string indices must be integers, not str</code> with that. I can&#39;t use the word itself to index"}, {"owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446670929, "post_id": 33531788, "comment_id": 54845448, "body": "Are you running the code with the same data that I am? The only place that could be failing is on <code>document[1][word]</code>, and all of the keys in <code>document[1]</code> are strings in the provided data. Shouldn&#39;t fail. Edit: on second thought that error means your trying to access an element of a string with another string. Does your <code>frequencies</code> contain any raw strings?"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671278, "post_id": 33531788, "comment_id": 54845638, "body": "I don&#39;t think so. It literally looks like that, although much more simplified from the actual data I&#39;m using.. It follows the exact same syntactic structure, but <code>frequencies</code> is just way easier to talk about"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671440, "post_id": 33531788, "comment_id": 54845722, "body": "Yeah, the code without <code>&quot;count&quot;:document[1][word]</code> words fine."}, {"owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671517, "post_id": 33531788, "comment_id": 54845770, "body": "run this: <code>[x for x in frequencies if type(x[1]) is str]</code> and see if anything shows up"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671679, "post_id": 33531788, "comment_id": 54845871, "body": "I get back <code>[&#39;document1&#39;,&#39;document2&#39;,document3&#39;]</code>"}, {"owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671785, "post_id": 33531788, "comment_id": 54845929, "body": "You do have some raw strings in there somewhere. Search through your data for those strings and check if they&#39;re different from the rest of your data. (I would literally just cmd-f &#39;document1&#39; and see what happens.)"}, {"owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1446671907, "post_id": 33531788, "comment_id": 54845989, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94250/discussion-between-jephron-and-gbr24\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670392, "creation_date": 1446670392, "answer_id": 33531788, "question_id": 33531706, "link": "https://stackoverflow.com/questions/33531706/iterating-through-multiple-values-in-a-dictionary/33531788#33531788", "title": "Iterating through multiple values in a dictionary?", "body": "<p>How about something like this?</p>\n\n<pre><code>word_list = [\"it's\",\"they're\",\"there's\",\"he's\"]\n\nfrequencies = [('document1',{\"it's\": 0,\"they're\": 2,\"there's\": 5,\"he's\": 1}),\n('document2',{\"it's\": 4,\"they're\": 2,\"there's\": 3,\"he's\": 0}),\n('document3',{\"it's\": 7,\"they're\": 0,\"there's\": 4,\"he's\": 1})]\n\nresult = []\nfor document in frequencies:\n    for word in word_list:\n        result.append({\"file\":document[0], \"word\":word,\"count\":document[1][word]})\n\nprint result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1446677079, "post_id": 33532206, "comment_id": 54848611, "body": "Great answer. One question: the <code>d.sort([&#39;File&#39;,&#39;Count&#39;], ascending=[1,1])</code> also changes the index. Any particular reason why you wanted to do that?"}, {"owner": {"reputation": 2485, "user_id": 5012922, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86b4022c5d3c7a62d0726bead1e03fd6?s=128&d=identicon&r=PG&f=1", "display_name": "SirParselot", "link": "https://stackoverflow.com/users/5012922/sirparselot"}, "reply_to_user": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1446728577, "post_id": 33532206, "comment_id": 54870170, "body": "@JoeR I just changed it so the files where in order from low to high and then the counts where set to do the same. It&#39;s not necessary but I thought it looked a little better."}], "tags": [], "owner": {"reputation": 2485, "user_id": 5012922, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86b4022c5d3c7a62d0726bead1e03fd6?s=128&d=identicon&r=PG&f=1", "display_name": "SirParselot", "link": "https://stackoverflow.com/users/5012922/sirparselot"}, "is_accepted": true, "score": 2, "last_activity_date": 1446834983, "last_edit_date": 1446834983, "creation_date": 1446671985, "answer_id": 33532206, "question_id": 33531706, "link": "https://stackoverflow.com/questions/33531706/iterating-through-multiple-values-in-a-dictionary/33532206#33532206", "title": "Iterating through multiple values in a dictionary?", "body": "<p>Ok first things first, your dict is not a dict and should be built as one like so</p>\n\n<pre><code>d = {'document1':{\"it's\": 0,\"they're\": 2,\"there's\": 5,\"he's\": 1},\n    'document2':{\"it's\": 4,\"they're\": 2,\"there's\": 3,\"he's\": 0},\n    'document3':{\"it's\": 7,\"they're\": 0,\"there's\": 4,\"he's\": 1}}\n</code></pre>\n\n<p>now that we actually have a dictionary we can use pandas to build a dataframe but in order to get it the way you want we will have to build a list of lists out of the dictionary. Then we will create a dataframe and label the columns and then sort</p>\n\n<pre><code>import collections\nimport pandas as pd\n\nd = {'document1':{\"it's\": 0,\"they're\": 2,\"there's\": 5,\"he's\": 1},\n    'document2':{\"it's\": 4,\"they're\": 2,\"there's\": 3,\"he's\": 0},\n    'document3':{\"it's\": 7,\"they're\": 0,\"there's\": 4,\"he's\": 1}}\n\nd = pd.DataFrame([[k,k1,v1] for k,v in d.items() for k1,v1 in v.items()], columns = ['File','Words','Count'])\nprint d.sort(['File','Count'], ascending=[1,1])\n\n         File    Words  Count\n1   document1     it's      0\n0   document1     he's      1\n3   document1  they're      2\n2   document1  there's      5\n4   document2     he's      0\n7   document2  they're      2\n6   document2  there's      3\n5   document2     it's      4\n11  document3  they're      0\n8   document3     he's      1\n10  document3  there's      4\n9   document3     it's      7\n</code></pre>\n\n<p>If you want the top n occurrences then you can use <code>groupby()</code> and then either <code>head() or tail()</code> when sorting</p>\n\n<pre><code>d = d.sort(['File','Count'], ascending=[1,1]).groupby('File').head(2)\n\n         File    Words  Count\n1   document1     it's      0\n0   document1     he's      1\n4   document2     he's      0\n7   document2  they're      2\n11  document3  they're      0\n8   document3     he's      1\n</code></pre>\n\n<p>the list comprehension returns a list of lists that looks like this</p>\n\n<pre><code>d = [['document1', \"he's\", 1], ['document1', \"it's\", 0], ['document1', \"there's\", 5], ['document1', \"they're\", 2], ['document2', \"he's\", 0], ['document2', \"it's\", 4], ['document2', \"there's\", 3], ['document2', \"they're\", 2], ['document3', \"he's\", 1], ['document3', \"it's\", 7], ['document3', \"there's\", 4], ['document3', \"they're\", 0]]\n</code></pre>\n\n<p>in order to build the dictionary properly you would just use something along the lines of</p>\n\n<pre><code>d['document1']['it\\'s'] = 1\n</code></pre>\n\n<p>If for some reason you are dead set on using the list of tuples of str's and dicts you can use this list comprehension instead</p>\n\n<pre><code>[[i[0],k1,v1] for i in d for k1,v1 in i[1].items()]\n</code></pre>\n"}], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 33532206, "answer_count": 2, "score": 0, "last_activity_date": 1446834983, "creation_date": 1446670077, "question_id": 33531706, "link": "https://stackoverflow.com/questions/33531706/iterating-through-multiple-values-in-a-dictionary", "title": "Iterating through multiple values in a dictionary?", "body": "<p>I have a list and dictionary of words:</p>\n\n<pre><code>word_list = [\"it's\",\"they're\",\"there's\",\"he's\"]\n</code></pre>\n\n<p>And a dictionary containing information as to how frequently the words in <code>words_list</code> appear in several documents:</p>\n\n<pre><code>dict = [('document1',{\"it's\": 0,\"they're\": 2,\"there's\": 5,\"he's\": 1}),\n('document2',{\"it's\": 4,\"they're\": 2,\"there's\": 3,\"he's\": 0}),\n('document3',{\"it's\": 7,\"they're\": 0,\"there's\": 4,\"he's\": 1})]\n</code></pre>\n\n<p>I want to develop a data structure (data frame, perhaps?) that looks like the following:</p>\n\n<pre><code>file       word       count\ndocument1  it's        0\ndocument1  they're     2\ndocument1  there's     5\ndocument1  he's        1\ndocument2  it's        4\ndocument2  they're     2\ndocument2  there's     3\ndocument2  he's        0\ndocument3  it's        7\ndocument3  they're     0\ndocument3  there's     4\ndocument3  he's        1\n</code></pre>\n\n<p>I'm trying to find the <code>words</code> used most often in these documents. I have more than 900 documents.</p>\n\n<p>I'm thinking of something like the following:</p>\n\n<pre><code>res = {}\nfor i in words_list:\n    count = 0\n    for j in dict.items():\n         if i == j:\n              count = count + 1\n              res[i,j] = count\n</code></pre>\n\n<p>Where can I go from here?</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1446670370, "post_id": 33531671, "comment_id": 54845139, "body": "This can&#39;t possibly be the real code. <code>Test</code> has no attribute <code>warn</code>. <code>self.warn(&#39;Hello World!&#39;)</code> would fail."}, {"owner": {"reputation": 18893, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1446670425, "post_id": 33531671, "comment_id": 54845167, "body": "@PeterWood my mistake :("}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1446670514, "post_id": 33531671, "comment_id": 54845224, "body": "I created a wrapper module for the logging module that provides my own getLogger function that checks &quot;if not logger.handlers&quot; and adds a console handler. So your suggested solution should work."}, {"owner": {"reputation": 18893, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1446670840, "post_id": 33531671, "comment_id": 54845398, "body": "@DavidCullen It should yes, but I am wondering if this is the proper solution. Adding logging capabilities to Python modules should be a very common need which would correspond to a well known design pattern. I am actually looking for it"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1446671325, "post_id": 33531671, "comment_id": 54845659, "body": "This question shows what happens when module writers add logging to their modules: <a href=\"http://stackoverflow.com/questions/11029717/how-do-i-disable-log-messages-from-the-requests-library\" title=\"how do i disable log messages from the requests library\">stackoverflow.com/questions/11029717/&hellip;</a>. People immediately start looking for ways to turn off the logging. So it might not be as common as you think."}, {"owner": {"reputation": 18893, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1446671827, "post_id": 33531671, "comment_id": 54845950, "body": "Interesting. This would advise me to disable the logger by default which is not a bad idea :)"}], "answers": [{"tags": [], "owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "is_accepted": true, "score": 1, "last_activity_date": 1446673658, "creation_date": 1446673658, "answer_id": 33532676, "question_id": 33531671, "link": "https://stackoverflow.com/questions/33531671/how-to-add-a-logger-to-a-module-in-python/33532676#33532676", "title": "How to add a logger to a module in Python?", "body": "<p>This is what I use in one of my projects.</p>\n\n<pre><code>def get_logger(log_level,log_name='YourNameGoesHere'):\n    logger = logging.getLogger(log_name)\n    if not logger.handlers:\n        logger.setLevel(log_level)\n        ch = logging.StreamHandler()\n        ch.setLevel(log_level)\n        ch.setFormatter(logging.Formatter(\n            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n        ))\n        logger.addHandler(ch)\n        logger.propagate = 0\n    return logger\n</code></pre>\n"}], "owner": {"reputation": 18893, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 33532676, "answer_count": 1, "score": 0, "last_activity_date": 1446673658, "creation_date": 1446669927, "last_edit_date": 1446670406, "question_id": 33531671, "link": "https://stackoverflow.com/questions/33531671/how-to-add-a-logger-to-a-module-in-python", "title": "How to add a logger to a module in Python?", "body": "<p>I am discovering <code>logging</code> and I would like to integrate it inside a class for external usage. It means, the user can either choose to ignore the logging feature or bind an handler to it. </p>\n\n<p>I currently have this in my test module: </p>\n\n<pre><code>import logging\nclass Test:\n   def __init__(self):\n      self.logger = logging.getlogger(__module__ + '.Test')\n\n   def hello(self):\n      self.logger.warn('Hello World!')\n\n\ntest = Test()\ntest.hello()\n</code></pre>\n\n<p>With this I get the error</p>\n\n<pre><code>No handlers could be found for logger\n</code></pre>\n\n<p>I precisely don't want to bind a handler to this logger otherwise I may override the choice of the parent. I thought the default handler was <code>Nullhandler</code>. </p>\n\n<p>What would be the correct pattern to integrate a logging feature inside an independant module?</p>\n\n<p>Of course one solution would be to check if no handlers are binded to it:</p>\n\n<pre><code>if not len(self.logger): l.addHandler(logging.NullHandler())\n</code></pre>\n"}, {"tags": ["python", "find"], "comments": [{"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "edited": false, "score": 0, "creation_date": 1446670050, "post_id": 33531669, "comment_id": 54844937, "body": "Are you sure you want to return -1 in find function?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446670119, "post_id": 33531669, "comment_id": 54844984, "body": "The bodies of your functions need to be indented. You can&#39;t be sloppy in python indentation."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446670197, "post_id": 33531669, "comment_id": 54845033, "body": "Your <code>find</code> function doesn&#39;t make use of <code>start</code> and <code>end</code>, it always searches from the beginning."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446670255, "post_id": 33531669, "comment_id": 54845077, "body": "Instead of returning a comma-separated string, you should return a list."}, {"owner": {"reputation": 5613, "user_id": 2339708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dL2a0.jpg?s=128&g=1", "display_name": "Eli Rose", "link": "https://stackoverflow.com/users/2339708/eli-rose"}, "edited": false, "score": 0, "creation_date": 1446670363, "post_id": 33531669, "comment_id": 54845136, "body": "The reason this file doesn&#39;t give any output when run is that <b>all you do is define two functions</b>. You never call any of them. Print out the result of that example call you provided --  <code>print multifind(&quot;Ni! Ni! Ni! Ni!&quot;, &quot;Ni&quot;, 0, 20)</code> at the bottom of your code, and the program will display output."}, {"owner": {"reputation": 137, "user_id": 4488286, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/500ae0446c507f2ae530d06aa902a8af?s=128&d=identicon&r=PG&f=1", "display_name": "prance", "link": "https://stackoverflow.com/users/4488286/prance"}, "edited": false, "score": 0, "creation_date": 1446670457, "post_id": 33531669, "comment_id": 54845188, "body": "tried print, still just runs with nothing returned"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446670575, "post_id": 33531669, "comment_id": 54845256, "body": "Since <code>find</code> ignores the <code>start</code> and <code>end</code> arguments, you have an infinite loop because it keeps finding the first match every time through the <code>while</code> loop."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446670904, "post_id": 33531669, "comment_id": 54845432, "body": "Fix your <code>find</code> function and then <code>multifind</code> will work correctly."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446672084, "post_id": 33531973, "comment_id": 54846097, "body": "You&#39;re using <code>start</code>, but not <code>end</code>."}, {"owner": {"reputation": 1908, "user_id": 5511504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccffc967339e7fa5a3406a6aee147103?s=128&d=identicon&r=PG", "display_name": "Mart&#237;n Mu&#241;oz del R&#237;o", "link": "https://stackoverflow.com/users/5511504/mart%c3%adn-mu%c3%b1oz-del-r%c3%ado"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446672308, "post_id": 33531973, "comment_id": 54846214, "body": "@Barmar I made the correction, delete end, I think it is not necesary."}, {"owner": {"reputation": 137, "user_id": 4488286, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/500ae0446c507f2ae530d06aa902a8af?s=128&d=identicon&r=PG&f=1", "display_name": "prance", "link": "https://stackoverflow.com/users/4488286/prance"}, "edited": false, "score": 0, "creation_date": 1446673306, "post_id": 33531973, "comment_id": 54846717, "body": "thanks, but unfortunately the end value needs to be in there...but i guess since you removed it, that would mean the function wasn&#39;t really ever using it?"}, {"owner": {"reputation": 1908, "user_id": 5511504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccffc967339e7fa5a3406a6aee147103?s=128&d=identicon&r=PG", "display_name": "Mart&#237;n Mu&#241;oz del R&#237;o", "link": "https://stackoverflow.com/users/5511504/mart%c3%adn-mu%c3%b1oz-del-r%c3%ado"}, "edited": false, "score": 0, "creation_date": 1446673843, "post_id": 33531973, "comment_id": 54846981, "body": "Is unnecessary, because you can get the end using start and len function."}], "tags": [], "owner": {"reputation": 1908, "user_id": 5511504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccffc967339e7fa5a3406a6aee147103?s=128&d=identicon&r=PG", "display_name": "Mart&#237;n Mu&#241;oz del R&#237;o", "link": "https://stackoverflow.com/users/5511504/mart%c3%adn-mu%c3%b1oz-del-r%c3%ado"}, "is_accepted": false, "score": 0, "last_activity_date": 1446672208, "last_edit_date": 1446672208, "creation_date": 1446671044, "answer_id": 33531973, "question_id": 33531669, "link": "https://stackoverflow.com/questions/33531669/home-made-find-function-runs-but-returns-nothing/33531973#33531973", "title": "Home made find function runs but returns nothing", "body": "<p>You are not using start in find, try:</p>\n\n<pre><code>def find(input_string, substring, start):\n\n    x = (len(substring))\n\n    for i in range(start, len(input_string)):\n        if input_string[i:(i+x)] == substring:\n            return i\n        else:\n            i += 1\n\n    return -1\n\n\ndef multi_find(input_string, substring, start):\n\n    loop = True\n    nulist = \"\"\n    r = start - 1\n    while loop:\n        r = find(input_string,substring, r + 1)\n        if r != -1:\n            if nulist == \"\":\n                nulist += str(r)\n            else:\n                nulist += \",\" + str(r)\n        else:\n            loop = False\n    return nulist\n\nprint multi_find(\"Ni! Ni! Ni! Ni!\", \"Ni\", 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446672359, "post_id": 33532286, "comment_id": 54846236, "body": "He&#39;s trying to learn how to implement these functions himself. Using the built-in functions defeats the purpose."}, {"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446672675, "post_id": 33532286, "comment_id": 54846394, "body": "I don&#39;t think learning Python means write Python while thinking of C++ or Java code. The first think of learning Python is start thinking like Python developer. Personal opinion."}, {"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446672897, "post_id": 33532286, "comment_id": 54846504, "body": "Touch&#233;. I agree with you I must have been distracted while reading the problem and understanding the needs. Anyway I will leave this for curious people :)"}], "tags": [], "owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1513014861, "last_edit_date": 1513014861, "creation_date": 1446672272, "answer_id": 33532286, "question_id": 33531669, "link": "https://stackoverflow.com/questions/33531669/home-made-find-function-runs-but-returns-nothing/33532286#33532286", "title": "Home made find function runs but returns nothing", "body": "<p>I know this is not precisely what you want but I will post the one liner function for this using regular expresions</p>\n\n<pre><code>def multifind(input_string, substring):\n    return [m.start() for m in re.finditer(input_string, substring)]\n</code></pre>\n\n<p>This finds all <em>input_string</em> first index matches in <em>substring</em> and returns it as list.</p>\n"}], "owner": {"reputation": 137, "user_id": 4488286, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/500ae0446c507f2ae530d06aa902a8af?s=128&d=identicon&r=PG&f=1", "display_name": "prance", "link": "https://stackoverflow.com/users/4488286/prance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513014861, "creation_date": 1446669923, "last_edit_date": 1446670160, "question_id": 33531669, "link": "https://stackoverflow.com/questions/33531669/home-made-find-function-runs-but-returns-nothing", "title": "Home made find function runs but returns nothing", "body": "<p>I'm new to python and have been working on problems to try and learn some programming.  My problem is in the second function of this program. What I want the program to return is each position that the substring to look for is at in the input_string. </p>\n\n<p>i.e. </p>\n\n<pre><code>multifind(\"Ni! Ni! Ni! Ni!\", \"Ni\", 0, 20) \n</code></pre>\n\n<p>should return <code>\"0,4,8,12\"</code></p>\n\n<p>However, when I run this in my IDE, the program runs but returns nothing.  I am wondering if anyone could show me where/what in the program that is causing this?\nPreferably in a manner that a beginner could understand.</p>\n\n<pre><code>def find(input_string, substring, start, end):\n\n    x = (len(substring))\n\n    for i in range(0, len(input_string)):\n        if input_string[i:(i+x)] == substring:\n            return i\n        else:\n            i += 1\n    return -1\n\n\ndef multi_find(input_string, substring, start, end):\n\n    loop = True\n    nulist = \"\"\n    r = start - 1\n    while loop:\n        r = find(input_string,substring, r + 1, end)\n        if r != -1:\n            if nulist == \"\":\n                nulist += str(r)\n            else:\n                nulist += \",\" + str(r)\n        else:\n            loop = False\n    return nulist\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1446669791, "post_id": 33531585, "comment_id": 54844790, "body": "You should avoid modifying a list while iterating over it. Perhaps a list comprehension?"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446669836, "post_id": 33531585, "comment_id": 54844818, "body": "<code>f.append(someelement)</code> will add an element to a list. @PauloScardine, as long as he is using indexes then its fine"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1446669874, "post_id": 33531585, "comment_id": 54844837, "body": "@RNar not if he deletes an element, for example... That is why it is frowned upon in Python."}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1446669926, "post_id": 33531585, "comment_id": 54844871, "body": "oh i thought you meant that it would cause an error such as <code>for i in l: l.append(x)</code> would"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446670163, "post_id": 33531585, "comment_id": 54845010, "body": "Of course you are right, if he is careful he can port &quot;pointer arithmetic&quot; algorithms from C to Python arrays, but it is not idiomatic."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1446671022, "post_id": 33531585, "comment_id": 54845501, "body": "This question may suffer form the X,Y problem, that is, when the OP wants to solve problem X, but instead of asking about X he is asking about his devised solution Y. Perhaps if you update it to shed more light on the original problem we can point a more idiomatic solution."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5526498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a1470d1036f1ff4b6ac6015eb9b384?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_Rose", "link": "https://stackoverflow.com/users/5526498/joe-rose"}, "edited": false, "score": 0, "creation_date": 1446671617, "post_id": 33531771, "comment_id": 54845833, "body": "What i want is to leave x unknown and make the list go on like [1, 1-x, x-x**2/2, .....]. is that possible?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5526498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a1470d1036f1ff4b6ac6015eb9b384?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_Rose", "link": "https://stackoverflow.com/users/5526498/joe-rose"}, "edited": false, "score": 0, "creation_date": 1446672042, "post_id": 33531771, "comment_id": 54846066, "body": "Then please finish your posting to reflect the actual problem.  See <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> and <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a>.  If you&#39;re trying to do symbolic representations, you&#39;ll need a domain-specific string processor in <b>simplify</b>, and your list will need to hold strings, not numeric values."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 1, "user_id": 5526498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a1470d1036f1ff4b6ac6015eb9b384?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_Rose", "link": "https://stackoverflow.com/users/5526498/joe-rose"}, "edited": false, "score": 0, "creation_date": 1446672972, "post_id": 33531771, "comment_id": 54846542, "body": "@Joe_Rose I&#39;m not sure I understood what you want. How about posting the equivalent solution in C++ so the question is less ambiguous?"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1446672448, "last_edit_date": 1446672448, "creation_date": 1446670305, "answer_id": 33531771, "question_id": 33531585, "link": "https://stackoverflow.com/questions/33531585/is-the-any-way-to-use-numbers-on-list-to-perform-operations/33531771#33531771", "title": "Is the any way to use numbers on list to perform operations?", "body": "<p>Is this the effect you want?  It extends the list, f, one element on each iteration.  I removed the <strong>simplify</strong> call, because I expect that it doesn't really affect your <em>Python</em> mechanics question.</p>\n\n<pre><code>x = 0.4\n\nf = [1, 1-x]\nfor n in range(1,5):\n    f.append((x*f[n-1]) / n)\n\nprint(f)\n</code></pre>\n\n<p>The output from this is</p>\n\n<pre><code>[1, 0.6, 0.4, 0.12, 0.053333333333333344, 0.012]\n</code></pre>\n\n<hr>\n\n<p>Now that you've clarified a little, here's a starting point for your string processing.</p>\n\n<pre><code>def simplify(expr):\n    return expr\n\nf = [\"1\", \"1-x\"]\nfor n in range(1, 5):\n    f.append(simplify(\"x*(\" + f[n-1] + \")/n\"))\n    print(f[n])\n</code></pre>\n\n<p>The output from this is</p>\n\n<pre><code>1-x\nx*(1)/n\nx*(1-x)/n\nx*(x*(1)/n)/n\n</code></pre>\n\n<p>This leaves you with a reduced programming problem to attack: how to reduce things such as \"x*(x*\" to \"x**2\".  You're tackling a bit of a parsing problem here: you'll likely have to specify a grammar and make a reasonable attack on your coding to get to the next point where we can help.</p>\n"}], "owner": {"reputation": 1, "user_id": 5526498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a1470d1036f1ff4b6ac6015eb9b384?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_Rose", "link": "https://stackoverflow.com/users/5526498/joe-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446672448, "creation_date": 1446669674, "question_id": 33531585, "link": "https://stackoverflow.com/questions/33531585/is-the-any-way-to-use-numbers-on-list-to-perform-operations", "title": "Is the any way to use numbers on list to perform operations?", "body": "<p>For a newcomer to python from c++\nIn python for example, is there a way to get this to substitute in the element in list position f[n-1], perform mathematical operations, and add it to the next element on the list?</p>\n\n<pre><code>f = [1, 1-x]\nfor n in range (1,5):\n    f[n+1] = simplify((x*f[n-1])/n)\n    print(f[n])\n</code></pre>\n"}, {"tags": ["python", "ipv6"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1446670231, "post_id": 33531561, "comment_id": 54845060, "body": "FYI, the IPv6 address range reserved for documentation, which you should use for things like this question, is `2001:DB8::/32&#39;. You were so close..."}, {"owner": {"reputation": 427, "user_id": 2912843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e426abe22ad7c8a53f22fdc0f09131e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2912843/mark"}, "reply_to_user": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1446671758, "post_id": 33531561, "comment_id": 54845914, "body": "reserved for documentation?"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1446671992, "post_id": 33531561, "comment_id": 54846039, "body": "See <a href=\"https://tools.ietf.org/html/rfc3849\" rel=\"nofollow noreferrer\">RFC 3849, IPv6 Address Prefix Reserved for Documentation</a>. This range is not allowed to be routed, and should be used for various purposes, including things like demonstrating something where you don&#39;t want to use a valid IPv6 address."}], "answers": [{"tags": [], "owner": {"reputation": 8333, "user_id": 813192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee82a22b9a73f459fe180128811e4c1?s=128&d=identicon&r=PG", "display_name": "Sander Steffann", "link": "https://stackoverflow.com/users/813192/sander-steffann"}, "is_accepted": false, "score": 2, "last_activity_date": 1446674187, "creation_date": 1446674187, "answer_id": 33532821, "question_id": 33531561, "link": "https://stackoverflow.com/questions/33531561/python-ipaddr-library-netmask-ipv6/33532821#33532821", "title": "python ipaddr library netmask IPv6", "body": "<p>IPv6 doesn't use net masks anymore, always CIDR notation. CIDR notation is also very common with IPv4 as it is much easier to deal with than those clumsy netmasks :)</p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 1252194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762692d3f4a23d9a52b315c95f1f64b9?s=128&d=identicon&r=PG", "display_name": "x539", "link": "https://stackoverflow.com/users/1252194/x539"}, "is_accepted": true, "score": 3, "last_activity_date": 1446676908, "last_edit_date": 1446676908, "creation_date": 1446674899, "answer_id": 33533007, "question_id": 33531561, "link": "https://stackoverflow.com/questions/33531561/python-ipaddr-library-netmask-ipv6/33533007#33533007", "title": "python ipaddr library netmask IPv6", "body": "<p>CIDR is the only official way specify a subnet in IPv6.</p>\n\n<p>So there are probably no libraries supporting this.</p>\n\n<p>But you can count bits and convert it to CIDR with the bit-count as the suffix.</p>\n\n<pre><code>mask = \"ffff:fff0::\"\nbitCount = [0, 0x8000, 0xc000, 0xe000, 0xf000, 0xf800, 0xfc00, 0xfe00, 0xff00, 0xff80, 0xffc0, 0xffe0, 0xfff0, 0xfff8, 0xfffc, 0xfffe, 0xffff]\n\ncount = 0\ntry:\n  for w in mask.split(':'):\n    if not w or int(w, 16) == 0: break\n    count += bitCount.index(int(w, 16))\nexcept:\n  raise SyntaxError('Bad NetMask')\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 2912843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e426abe22ad7c8a53f22fdc0f09131e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2912843/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 33533007, "answer_count": 2, "score": 0, "last_activity_date": 1446676908, "creation_date": 1446669569, "question_id": 33531561, "link": "https://stackoverflow.com/questions/33531561/python-ipaddr-library-netmask-ipv6", "title": "python ipaddr library netmask IPv6", "body": "<p>I'm using the python-ipaddr library.</p>\n\n<p>I'm not able to specify the netmask for <code>IPv6</code> addresses.It only needs a <code>CIDR</code> notation.</p>\n\n<pre><code>&gt;&gt;&gt; ipaddr.IPv6Network('2001:db00::0/24')\nIPv6Network('2001:db00::/24')\n&gt;&gt;&gt; ipaddr.IPv6Network('2001:db00::0/ffff:ff00::')\nTraceback (most recent call last):\n File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n File \"/usr/lib/python2.6/site-packages/ipaddr.py\", line 1925, in __init__\n   raise NetmaskValueError(addr[1])\nipaddr.NetmaskValueError: ffff:ff00::\n</code></pre>\n\n<p>Is there a way to use <code>netmask</code> for IPv6 addresses instead of <code>CIDR</code>?<br>\nIf not, are there any python libraries that support this?<br>\nWhat's the most pythonic way of converting <code>netmask</code> to <code>CIDR</code> for <code>IPv6</code></p>\n\n<p>TIA</p>\n"}, {"tags": ["python", "numpy", "memory", "memory-management"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1446669864, "post_id": 33531553, "comment_id": 54844831, "body": "Even if you chunk this, you&#39;re still trying to compute several terabytes of values. That&#39;s going to be slow. Are you sure this is the best way to do what you&#39;re trying to do?"}, {"owner": {"reputation": 1686, "user_id": 1566200, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5123ca9217a405695f6cb56e4645d84f?s=128&d=identicon&r=PG", "display_name": "user1566200", "link": "https://stackoverflow.com/users/1566200/user1566200"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1446669903, "post_id": 33531553, "comment_id": 54844856, "body": "I&#39;m trying to find where these matrices overlap within a certain tolerance. This was my original question: <a href=\"https://stackoverflow.com/questions/33513204/finding-intersection-of-two-matrices-in-python-within-a-tolerance/33514917#33514917\" title=\"finding intersection of two matrices in python within a tolerance\">stackoverflow.com/questions/33513204/&hellip;</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1446670276, "post_id": 33531553, "comment_id": 54845089, "body": "The answer you got just makes the loops faster by pushing them into C code. It doesn&#39;t help with the algorithmic inefficiency. You may want to consider tools like sorting or kd-trees to reduce the number of points that need to be compared with each other."}], "owner": {"reputation": 1686, "user_id": 1566200, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5123ca9217a405695f6cb56e4645d84f?s=128&d=identicon&r=PG", "display_name": "user1566200", "link": "https://stackoverflow.com/users/1566200/user1566200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446669526, "creation_date": 1446669526, "question_id": 33531553, "link": "https://stackoverflow.com/questions/33531553/splitting-a-single-python-process-into-chunks-for-memory-isses", "title": "Splitting a single Python process into chunks for memory isses?", "body": "<p>Per an answer to another question I've posted, I'm running the following Python code:</p>\n\n<pre><code>diff = np.abs(mat0[:,None]-mat1)\n</code></pre>\n\n<p>Where <code>mat0</code> is a 866,000 x 3 matrix, and <code>mat1</code> is a 925,000 x 3 size matrix.</p>\n\n<p>I have ~74 GB of RAM, and still get an out of memory error. </p>\n\n<p>I don't know how broadcasting works in Numpy, but is there a way to split this process up into chunks so that it doesn't run out of memory?</p>\n"}, {"tags": ["python", "dns", "server"], "comments": [{"owner": {"reputation": 677, "user_id": 3237810, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2dd47ba3517e7a65ba2b4d8f0fd5ccc4?s=128&d=identicon&r=PG&f=1", "display_name": "DorinPopescu", "link": "https://stackoverflow.com/users/3237810/dorinpopescu"}, "edited": false, "score": 1, "creation_date": 1446670233, "post_id": 33531551, "comment_id": 54845062, "body": "try the dnslib module"}], "answers": [{"tags": [], "owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "is_accepted": false, "score": 13, "last_activity_date": 1597104586, "last_edit_date": 1597104586, "creation_date": 1446670257, "answer_id": 33531753, "question_id": 33531551, "link": "https://stackoverflow.com/questions/33531551/how-to-create-a-very-simple-dns-server-using-python/33531753#33531753", "title": "How to create a very simple DNS server using Python?", "body": "<p>Take a look at the dnslib module, specifically, <a href=\"http://pydoc.net/Python/dnslib/0.9.3/dnslib.server/\" rel=\"nofollow noreferrer\">dnslib.server</a>.</p>\n<pre><code>class TestResolver:\n     def resolve(self,request,handler):\n         reply = request.reply()\n         reply.add_answer(*RR.fromZone(&quot;abc.def. 60 A 1.2.3.4&quot;))\n         return reply\nresolver = TestResolver()\nserver = DNSServer(resolver,port=8053,address=&quot;localhost&quot;,logger=logger,tcp=True)\nserver.start_thread()\na = q.send(&quot;localhost&quot;,8053,tcp=True)\n    Request: [...] (tcp) / 'abc.def.' (A)\n    Reply: [...] (tcp) / 'abc.def.' (A) / RRs: A\nprint(DNSRecord.parse(a))\n    ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: ...\n    ;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0\n    ;; QUESTION SECTION:\n    ;abc.def.                       IN      A\n    ;; ANSWER SECTION:\n    abc.def.                60      IN      A       1.2.3.4\nserver.stop()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5526492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016afdce22a25ba741d2a5eaa4fa2295?s=128&d=identicon&r=PG&f=1", "display_name": "Larry Valdes", "link": "https://stackoverflow.com/users/5526492/larry-valdes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15396, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1597104586, "creation_date": 1446669521, "question_id": 33531551, "link": "https://stackoverflow.com/questions/33531551/how-to-create-a-very-simple-dns-server-using-python", "title": "How to create a very simple DNS server using Python?", "body": "<p>I just want to create a DNS Server who listen to requests and always return the same specific ip. I'm using Python....</p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1446675325, "post_id": 33531526, "comment_id": 54847795, "body": "It seems to be an issue of insuficcient write permissions, take a look at the build.py to understand where the directory should be created and modify the permissions or try starting the python.exe with administrative permission."}], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 4672774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf84abb82f8368ef0b3c7948de161eb?s=128&d=identicon&r=PG", "display_name": "H.S.Xu", "link": "https://stackoverflow.com/users/4672774/h-s-xu"}, "is_accepted": true, "score": 3, "last_activity_date": 1447319664, "creation_date": 1447319664, "answer_id": 33667878, "question_id": 33531526, "link": "https://stackoverflow.com/questions/33531526/install-matlab-engine-for-python-when-trial-version-of-matlab-is-installed-in-wi/33667878#33667878", "title": "Install matlab engine for Python when trial version of MATLAB is installed in Windows", "body": "<p>I've met the same problem just like you, and my solution is right clicking the icon of powershell then choose Run ISE with admin, then do what you do before, and you can install matlab engine successfully. </p>\n"}], "owner": {"reputation": 25, "user_id": 4515898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cde2f69cfe686d0b74686bd22b6b7120?s=128&d=identicon&r=PG&f=1", "display_name": "Zaman", "link": "https://stackoverflow.com/users/4515898/zaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 1, "accepted_answer_id": 33667878, "answer_count": 1, "score": 2, "last_activity_date": 1447319664, "creation_date": 1446669428, "last_edit_date": 1446670173, "question_id": 33531526, "link": "https://stackoverflow.com/questions/33531526/install-matlab-engine-for-python-when-trial-version-of-matlab-is-installed-in-wi", "title": "Install matlab engine for Python when trial version of MATLAB is installed in Windows", "body": "<p>How to install matlab engine for Python when trial version of MATLAB is installed in Windows? I tried with the following in command window:</p>\n\n<pre><code>cd C:\\....\\extern\\engine\\python\npython setup.py install\n</code></pre>\n\n<p>But command window shows an error:</p>\n\n<pre><code>running install\nrunning build\nrunning build.py\ncreating build\nerror: Could not create 'build': Access is denied.\n</code></pre>\n\n<p>Is it happening because of the trial version? I use a trial version of MATLAB 2015b which connects to internet and asks for password during start of MATLAB in MATLAB GUI. I am using Python (x,y) 2.7. How to install matlab engine with this trial version of MATLAB 2015b?</p>\n"}, {"tags": ["python", "c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "edited": false, "score": 1, "creation_date": 1446678615, "post_id": 33533746, "comment_id": 54849189, "body": "There is a way to open a CASA MS file in C? Are you sure?"}, {"owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "reply_to_user": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "edited": false, "score": 0, "creation_date": 1446680118, "post_id": 33533746, "comment_id": 54849679, "body": "Maybe I assumed it wrongly because CASA is bundled under c++ tools. Still you can call python functions from C as long you are using python 2.x or 3.x i think."}], "tags": [], "owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "is_accepted": false, "score": 0, "last_activity_date": 1446678237, "creation_date": 1446678237, "answer_id": 33533746, "question_id": 33531523, "link": "https://stackoverflow.com/questions/33531523/call-python-function-from-c-pass-some-float-arrays-and-store-data-on-them/33533746#33533746", "title": "call python function from c, pass some float arrays and store data on them", "body": "<p>Yes it is,</p>\n\n<p><a href=\"https://docs.python.org/2.5/ext/callingPython.html\" rel=\"nofollow\">https://docs.python.org/2.5/ext/callingPython.html</a></p>\n\n<p>Still, why do it in python? You can do it in C as well! </p>\n"}], "owner": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446678237, "creation_date": 1446669423, "last_edit_date": 1446674842, "question_id": 33531523, "link": "https://stackoverflow.com/questions/33531523/call-python-function-from-c-pass-some-float-arrays-and-store-data-on-them", "title": "call python function from c, pass some float arrays and store data on them", "body": "<p>I'm working in an astronomical app. I need to read an CASA MS File which is easy to read from python.</p>\n\n<p>The thing is that I'm working with CUDA and I need to save the file data as u,v coordinates, real and imaginary visibilities and weights, in host arrays.</p>\n\n<p>Is it possible to call a python function from C pass the arrays and the name of the file and fill them in the python function?</p>\n\n<p>How can be done?</p>\n\n<p>And there is an special way to compile the file?</p>\n\n<p>Thanks in advanced.</p>\n"}, {"tags": ["python", "python-2.7", "for-loop", "indexing"], "comments": [{"owner": {"reputation": 1611, "user_id": 3810466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JUvyo.png?s=128&g=1", "display_name": "ricky3350", "link": "https://stackoverflow.com/users/3810466/ricky3350"}, "edited": false, "score": 0, "creation_date": 1446669589, "post_id": 33531518, "comment_id": 54844671, "body": "Have you considered <a href=\"https://docs.python.org/2/tutorial/errors.html#handling-exceptions\" rel=\"nofollow noreferrer\"><code>try-except</code></a>?"}], "answers": [{"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1446669710, "creation_date": 1446669710, "answer_id": 33531597, "question_id": 33531518, "link": "https://stackoverflow.com/questions/33531518/skipping-over-indexerror-in-for-loop/33531597#33531597", "title": "skipping over IndexError in for loop", "body": "<p>You should check for valid indexes:</p>\n\n<pre><code>for i in my_items:\n  position = bisect(thelist, i)\n  if position &lt; len(thelist):\n    found_list.append(thelist[position])\n    found_values.append(thevalues[position])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 1596875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f10af72198305f5315a72bf1cd72abb2?s=128&d=identicon&r=PG", "display_name": "Derek Peterson", "link": "https://stackoverflow.com/users/1596875/derek-peterson"}, "is_accepted": false, "score": 0, "last_activity_date": 1446670797, "creation_date": 1446670797, "answer_id": 33531907, "question_id": 33531518, "link": "https://stackoverflow.com/questions/33531518/skipping-over-indexerror-in-for-loop/33531907#33531907", "title": "skipping over IndexError in for loop", "body": "<p>You're looking for <code>try-except</code> here. It's a way to manage control-flow that allows you to attempt to perform an action that might throw an error (such as <code>IndexError</code>) and do some cleanup. It would look like this:</p>\n\n<pre><code>for i in my_items:\n    try:\n        position = bisect(thelist, i)\n        found_list.append(thelist[position])\n        found_values.append(thevalues[position])\n    except IndexError:\n        print('{0} is not in thelist'.format(position))\n</code></pre>\n\n<p>As a side-benefit, this is actually very Pythonic. If you're interested in learning more about using <code>try-except</code> to manage control-flow, check out <a href=\"https://www.jeffknupp.com/blog/2013/02/06/write-cleaner-python-use-exceptions/\" rel=\"nofollow\">this blog-post</a>.</p>\n"}], "owner": {"reputation": 289, "user_id": 2483176, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/55c645540affc36af7dcb9bcfd8ca40a?s=128&d=identicon&r=PG", "display_name": "user2483176", "link": "https://stackoverflow.com/users/2483176/user2483176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446670797, "creation_date": 1446669407, "question_id": 33531518, "link": "https://stackoverflow.com/questions/33531518/skipping-over-indexerror-in-for-loop", "title": "skipping over IndexError in for loop", "body": "<p>How can I skip over the error \"IndexError: list index out of range\" and proceed with the remaining for loop?  For example I have:</p>\n\n<pre><code>from bisect import bisect\n\nthelist = [1, 2, 3, 6, 7, 8, 9]\nthevalues = [.1, .2, .3, .6, .7, .8, .9]\n\nmy_items = [10, 1, 9, 4, 3]\n\nfound_list = []\nfound_values = []\n\nfor i in my_items:\n    position = bisect(thelist, i)\n    found_list.append(thelist[position])\n    found_values.append(thevalues[position])\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>found_list = [1, 9, 3]\nfound_values = [.1, .9, .3]\n</code></pre>\n\n<p>But since 10 is not in 'thelist' I get an error first time through the loop.  Even if there are values in 'my_items' that aren't in 'thelist', can I skip over these (in a time efficient way and without having to change my_list) and just get the found values?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 3, "creation_date": 1446669503, "post_id": 33531503, "comment_id": 54844624, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15638650/is-there-a-standard-solution-for-gauss-elimination-in-python\">Is there a standard solution for Gauss elimination in Python?</a>"}, {"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "reply_to_user": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 2, "creation_date": 1446673881, "post_id": 33531503, "comment_id": 54847005, "body": "this is not a duplicate... I am asking about gaussian elimination in mod 2!"}], "answers": [{"comments": [{"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502097073, "post_id": 45527097, "comment_id": 78046200, "body": "this is probably the best answer I ever had on here. Thank you very much :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 1, "creation_date": 1502104479, "post_id": 45527097, "comment_id": 78050570, "body": "I am glad that you are satisfied from my answer, but sorry that I didn&#39;t notice your question earlier, because this question had to wait 1 year and 9 months, about almost 2 years, until it received a single and satisfying answer."}, {"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502110329, "post_id": 45527097, "comment_id": 78054202, "body": "that is fine. It would have been very useful 2 years ago :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502133067, "post_id": 45527097, "comment_id": 78068101, "body": "At least another visitors in the future will benefit from my answer if they have same question as you had 2 years ago :) By the way that 2 years ago I started my studies in college and I learnt guassian elimination in linear algebra course and I also learnt the galois field 2, i.e. GF(2), but I learnt this in hebrew. I didn&#39;t know how it is called in english until today! That&#39;s funny for me."}, {"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502137930, "post_id": 45527097, "comment_id": 78070503, "body": "haha. I had a similar story, I got into a very good university for an MSc two years ago. Did fantastically and did very well since then. Maths and programming are very worth learning. But you need only to learn enough to be &quot;dangerous&quot;. To actually be able to do something with it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502138364, "post_id": 45527097, "comment_id": 78070688, "body": "What do you mean by &quot;dangerous&quot;?"}, {"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502138494, "post_id": 45527097, "comment_id": 78070723, "body": "So that you can make a proof of concept of your idea. Once you have that you can get someone else to finish it for you. I am taking here more about making money from your mathematical and programming knowledge :) There are tons and tons of people who are much better than you or me :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502138940, "post_id": 45527097, "comment_id": 78070927, "body": "That&#39;s I know already. I just want one day to prove that P=NP in computational complexity theory. I want to write C++ application with textbox that you can input any boolean formula in it as text string and it prints either &quot;Yes&quot; or &quot;No&quot; as output on the window, whether or not the given boolean formula is satisfiable or not. The answer will be returned after few minutes for very large and long boolean formula. Boolean Satisfiability is indeed NP-Complete and it&#39;s really difficult problem to find an efficient algorithm to solve. I am doing my best to find method to simplify the formula, but not"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502138960, "post_id": 45527097, "comment_id": 78070943, "body": "found yet. I am using all of my knowledge in computer science and mathematics to do this proof, but no success until now. I am planning to use my knowledge in physics too to do this proof."}, {"owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502139680, "post_id": 45527097, "comment_id": 78071272, "body": "Nice one! All the best of luck!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "reply_to_user": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "edited": false, "score": 0, "creation_date": 1502142192, "post_id": 45527097, "comment_id": 78072322, "body": "Thank you! i squared - Keep it Real! I appreciate it very much!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2133061"}, "is_accepted": true, "score": 2, "last_activity_date": 1501976861, "last_edit_date": 1501976861, "creation_date": 1501974072, "answer_id": 45527097, "question_id": 33531503, "link": "https://stackoverflow.com/questions/33531503/gaussian-elimination-in-modulo-2-python-code/45527097#45527097", "title": "Gaussian Elimination in modulo 2 python code", "body": "<p>The pseudo code of the algorithm you are looking for exists and is:</p>\n\n<pre><code>    // A is n by m binary matrix\n    i := 1 // row and column index\n    for i := 1 to m do // for every column\n      // find non-zero element in column i, starting in row i:\n      maxi := i\n      for k := i to n do\n        if A[k,i] = 1 then maxi := k\n      end for\n      if A[maxi,i] = 1 then\n        swap rows i and maxi in A and b, but do not change the value of i\n        Now A[i,i] will contain the old value of A[maxi,i], that is 1\n        for u := i+1 to m do\n          Add A[u,i] * row i to row u, do this for BOTH, matrix A and RHS vector b\n          Now A[u,i] will be 0\n        end for\n     else\n       declare error \u2013 more than one solution exist\n     end if\n   end for\n   if n&gt;m and if you can find zero row in A with nonzero RHS element, then\n     declare error \u2013 no solution.\n   end if\n   // now, matrix A is in upper triangular form and solution can be found\n   use back substitution to find vector x\n</code></pre>\n\n<p>Taken from this <a href=\"http://dde.binghamton.edu/filler/mct/hw/1/assignment.pdf\" rel=\"nofollow noreferrer\">pdf</a></p>\n\n<p>Binary arithmetic means arithmetic in modulo 2, which is what you are looking for in your question, if I am not wrong.</p>\n\n<p>Unfortunately I don't code in Python, but if you are familiar with Python, you can simply translate the pseudo code above to Python line by line in your own way for your convenience, and this task should be <strong>neither</strong> difficult <strong>nor</strong> long.</p>\n\n<p>I googled \"gaussian elimination modulo 2 python\", but didn't find the python code you are looking for, but I think that this is for good, because during the translation you may understand the algorithm and the method better.</p>\n\n<p>EDIT 1: If you are also familiar with C# and it's not effort for you to translate C# to Python, then Michael Anderson's answer to this <a href=\"https://stackoverflow.com/questions/11483925/how-to-implementing-gaussian-elimination-for-binary-equations\">question</a> may also help you.</p>\n\n<p>EDIT 2: After posting the answer, I continued the search and found <a href=\"https://www.nayuki.io/page/gauss-jordan-elimination-over-any-field\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>\"over any field\" implies \"over modulo 2\" and even \"over modulo k\" for any k&ge;2.</p>\n\n<p>It contains Source Code for Java Version and <strong>Python</strong> version too.</p>\n\n<p>According to the last link I gave you for the Python version <strong>fieldmath.py</strong> includes the class <strong>BinaryField</strong> which suppose to be the <strong>modulo 2</strong> as you wish.</p>\n\n<p>Enjoy!</p>\n\n<p>I just hope that <strong>Gauss-Jordan elimination</strong> and <strong>Gaussian Elimination</strong> are not two different things.</p>\n\n<p>EDIT 3: If you are also familiar with VC++ and translating VC++ to Python is<strong>n't</strong> effort for you then you can also try <a href=\"http://forum.notebookreview.com/threads/gaussian-elimination-in-modulo-2-vc-with-code.558239/\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>I hope this well answers your question.</p>\n"}], "owner": {"reputation": 1784, "user_id": 2812237, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/B27re.png?s=128&g=1", "display_name": "Naz", "link": "https://stackoverflow.com/users/2812237/naz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2893, "favorite_count": 1, "accepted_answer_id": 45527097, "answer_count": 1, "score": 5, "last_activity_date": 1501976861, "creation_date": 1446669357, "last_edit_date": 1446673932, "question_id": 33531503, "link": "https://stackoverflow.com/questions/33531503/gaussian-elimination-in-modulo-2-python-code", "title": "Gaussian Elimination in modulo 2 python code", "body": "<p>I was wondering whether Gaussian elimination in modulo 2 (or even generally in modulo k for that purpose) has ever been implemented somewhere, so that I do not have to reinvent the wheel and just use the available resources?</p>\n"}, {"tags": ["python", "ajax", "django", "dynamic-list"], "answers": [{"comments": [{"owner": {"reputation": 1925, "user_id": 5131575, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-lCuzOQ0Q5AA/AAAAAAAAAAI/AAAAAAAAACU/aXATmoKbkrQ/photo.jpg?sz=128", "display_name": "Kyle Truong", "link": "https://stackoverflow.com/users/5131575/kyle-truong"}, "edited": false, "score": 0, "creation_date": 1446671110, "post_id": 33531818, "comment_id": 54845543, "body": "I guess what I&#39;m confused about is the url part from :  $.ajax({  type: &#39;get&#39; url: &#39;/api/orders&#39; ....  If I make the url go to my local server, it automatically has access to all the database stuff in there?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 1925, "user_id": 5131575, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-lCuzOQ0Q5AA/AAAAAAAAAAI/AAAAAAAAACU/aXATmoKbkrQ/photo.jpg?sz=128", "display_name": "Kyle Truong", "link": "https://stackoverflow.com/users/5131575/kyle-truong"}, "edited": false, "score": 0, "creation_date": 1446671359, "post_id": 33531818, "comment_id": 54845676, "body": "Yes. The URL goes to a Django view, which works in exactly the same way as any other Django view."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670501, "creation_date": 1446670501, "answer_id": 33531818, "question_id": 33531502, "link": "https://stackoverflow.com/questions/33531502/how-can-ajax-work-with-a-dynamic-django-dropdown-list/33531818#33531818", "title": "How can Ajax work with a dynamic Django dropdown list?", "body": "<p>I'm not sure what you're confused about. Why would you put every car into a page? When you build a normal non-Ajax page, you pass some data - eg the slug or ID of a database object - via the URL, you query the database for that specific object, and return its data via an HTML template. </p>\n\n<p>The exact same logic applies for Ajax, except that you probably don't want an HTML template; you can just return JSON, which is easy for JS to understand.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 2667704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9vxo.jpg?s=128&g=1", "display_name": "ElGranBarta", "link": "https://stackoverflow.com/users/2667704/elgranbarta"}, "edited": false, "score": 0, "creation_date": 1446672575, "post_id": 33532194, "comment_id": 54846345, "body": "BTW, i recommend to have a separate Model for car makers. That way you can get and filter the models and makers in the database (using Django queries) and avoid all the expensive array processing."}], "tags": [], "owner": {"reputation": 81, "user_id": 2667704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9vxo.jpg?s=128&g=1", "display_name": "ElGranBarta", "link": "https://stackoverflow.com/users/2667704/elgranbarta"}, "is_accepted": true, "score": 3, "last_activity_date": 1446672657, "last_edit_date": 1446672657, "creation_date": 1446671940, "answer_id": 33532194, "question_id": 33531502, "link": "https://stackoverflow.com/questions/33531502/how-can-ajax-work-with-a-dynamic-django-dropdown-list/33532194#33532194", "title": "How can Ajax work with a dynamic Django dropdown list?", "body": "<p>I would go for a REST service, like <a href=\"http://www.django-rest-framework.org/\" rel=\"nofollow\">Django Rest Framework</a>, and then use jquery to autopopulate the dropdowns.</p>\n\n<p>If installing a REST service is a hassle, you could write a couple of views to get the data in json format...</p>\n\n<p>For instance, if you have a REST service in /myapp/api, you could populate the Cars like this:</p>\n\n<pre><code>$.ajax({\n    url: \"/myapp/api/cars?format=json\",\n    dataType: \"json\",\n    success: function( data ) {\n        var makes=[];  \n        for (var i in data) {\n            car = data[i];\n            if (makes.indexOf(car.make) &lt; 0){ // avoid duplicate brands\n                makes.push(car.make);\n                $('#makeselect').append($('&lt;option&gt;', {\n                    value: car.id,\n                    text: car.make\n                }));\n            }\n        }\n    }\n});\n</code></pre>\n\n<p>Then, attach a handler when the \"make\" selector has changed, and populate the model and year accordingly using another REST call, like <code>/myapp/api/cars?make=Ford</code></p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 7321599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bb8134dcc0da59d8d2091bb7c3345d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tanmay D", "link": "https://stackoverflow.com/users/7321599/tanmay-d"}, "is_accepted": false, "score": 8, "last_activity_date": 1523315045, "creation_date": 1523315045, "answer_id": 49742935, "question_id": 33531502, "link": "https://stackoverflow.com/questions/33531502/how-can-ajax-work-with-a-dynamic-django-dropdown-list/49742935#49742935", "title": "How can Ajax work with a dynamic Django dropdown list?", "body": "<p>Suppose you have to populate a static list of all the brand names in a  drop-down and the second  dropdown is supposed to be populated based on the selection in first.</p>\n\n<p>Assuming two simple Django models defining <em>Brands</em> and <em>Showrooms.</em></p>\n\n<p><strong>Views.py</strong></p>\n\n<pre><code>class YourView(TemplateView):\n    template_name = 'template.html'\n\n    def get_context_data(self, **kwargs):\n        brands = Brands.objects.all()\n        context = super(YourView, self).get_context_data(**kwargs)\n        context.update({'brands': brands})\n        return context\n\ndef get_showrooms(request, **kwargs):\n    brand = Brands.objects.get(id=kwargs['brand_id'])\n    showroom_list = list(brand.showrooms.values('id', 'name'))\n\n    return HttpResponse(simplejson.dumps(showroom_list), content_type=\"application/json\"\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;label&gt;Select Brand&lt;/label&gt;\n      &lt;select id=\"brands\" name=\"brands\" class=\"form-control\"&gt;\n        &lt;option value=\"\"&gt;Select Brand&lt;/option&gt;                    \n        {% for brand in brands %}\n          &lt;option id=\"{{ brand.id }}\" value=\"{{ brand.id }}\"&gt;\n                {{ brand.name }}\n          &lt;/option&gt;\n        {% endfor %}\n       &lt;/select&gt;\n\n&lt;label&gt;Select Showrroom&lt;/label&gt;\n    &lt;div id=\"showroom_list\"&gt;\n      &lt;select name=\"showrooms\"  class=\"form-control\"&gt;\n      &lt;/select&gt;\n    &lt;/div\n</code></pre>\n\n<p><strong>Ajax</strong></p>\n\n<pre><code>$('select[name=brands]').change(function(){\n    brand_id = $(this).val();\n    request_url = '/sales/get_showrooms/' + brand_id + '/';\n        $.ajax({\n            url: request_url,\n            success: function(data){\n            $.each(data, function(index, text){\n                $('select[name=showrooms]').append(\n                $('&lt;option&gt;&lt;/option&gt;').val(index).html(text)\n                );\n              };\n           });\n</code></pre>\n\n<p>You can make the RESTful calls in request_url.</p>\n\n<p>You can further populate the third dropdown based on the selection in second and so on. Also, you can access the selected option and perform the further stuff.\nThe <a href=\"https://harvesthq.github.io/chosen/\" rel=\"noreferrer\">chosen plugin</a> can help you in optimizing your dropdowns.</p>\n"}], "owner": {"reputation": 1925, "user_id": 5131575, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-lCuzOQ0Q5AA/AAAAAAAAAAI/AAAAAAAAACU/aXATmoKbkrQ/photo.jpg?sz=128", "display_name": "Kyle Truong", "link": "https://stackoverflow.com/users/5131575/kyle-truong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8754, "favorite_count": 2, "accepted_answer_id": 33532194, "answer_count": 3, "score": 2, "last_activity_date": 1523315045, "creation_date": 1446669356, "last_edit_date": 1495540719, "question_id": 33531502, "link": "https://stackoverflow.com/questions/33531502/how-can-ajax-work-with-a-dynamic-django-dropdown-list", "title": "How can Ajax work with a dynamic Django dropdown list?", "body": "<p>I'm making this little web app that takes 2 addresses, calculates the distance using google maps, and calculates the gas cost based on the vehicles mpg rating. Everything is complete except for this last part that I believe would work best with AJAX.</p>\n\n<p>I have 3 lists (year, make, model), and I need the list of car models to be restricted based on the year and make of the car. After selecting, I have a button that once clicked, will verify if it is a valid vehicle in the database and pull the vehicle's mpg rating to do some basic math on it. </p>\n\n<p>The problem is I don't really know how to approach this problem. I've searched some inquiries the past few hours and I'm getting a lot of things related to model forms and Django choice fields which I don't want to get into if I don't have to. My idea is to just change the innerText/value, and check it against my django database.</p>\n\n<p>I also came across this answer from SO:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20306981/how-do-i-integrate-ajax-with-django-applications\">How do I integrate Ajax with Django applications?</a></p>\n\n<p>and am a bit confused by it. If I understand correctly, the AJAX GET request will extract data in javascript objects the same as if I visited that url as a user. Does this mean I could just create another html template and post every vehicle in the database onto that page from which I can extract info and create my dynamic lists from?</p>\n\n<p>Looking for the most straightforward way to dynamically generate my lists with ajax and verify the year, make, and model with my database which will then return the car's mpg.</p>\n\n<p>models.py:</p>\n\n<pre><code>class Car(models.Model):\n    year = models.IntegerField(default=0)\n    make = models.CharField(max_length=60)\n    model = models.CharField(max_length=60)\n    mpg = models.IntegerField(default=0)\n\n\n    def __str__(self):\n        return (\"{0} {1} {2}\".format(self.year, self.make, self.model))\n</code></pre>\n\n<p>views.py: (right now, it just lists every vehicle and has no way to verify the vehicle on the spot)</p>\n\n<pre><code>def index(request):\n\n    context_dic = {}\n    car_list = Car.objects.order_by('make')\n    car_list_model = Car.objects.order_by('model')\n    context_dic['car_list'] = car_list\n    context_dic['years'] = []\n    context_dic['makes'] = []\n    context_dic['models'] = []\n\n    for year in range(1995, 2016):\n        context_dic['years'].append(year)\n\n    for make in car_list:\n        if make.make not in context_dic['makes']:\n            context_dic['makes'].append(make.make)\n        else:\n            continue\n\n    for model in car_list_model:\n        if model.model not in context_dic['models']:\n            context_dic['models'].append(model.model)\n        else:\n            continue\n\n    return render(request, 'ConverterApp/index.html', context_dic)\n</code></pre>\n\n<p>html: (x3 for the make and model)</p>\n\n<pre><code>&lt;div id=\"specifics\"&gt;\n    &lt;div class=\"dropdown\" id=\"year-dropdown\"&gt;\n      &lt;button class=\"btn btn-default dropdown-toggle\" type=\"button\"\n      id=\"dropdownMenu1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"&gt;\n        Year\n    &lt;span class=\"caret\"&gt;&lt;/span&gt;\n  &lt;/button&gt;\n  &lt;ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\"&gt;\n    {% for year in years %}\n      &lt;li&gt;&lt;a href=\"#\"&gt;{{ year }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n  &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>javascript: (just shows the value right now, but can't verify with the database)</p>\n\n<pre><code>  $('#calculate').on('click', function ()\n  {\n    $(this).siblings()[0].textContent = (\n      document.getElementById(\"dropdownMenu1\").textContent\n      + \" \" + document.getElementById(\"dropdownMenu2\").textContent\n       + \" \" + document.getElementById(\"dropdownMenu3\").textContent\n       + \" \" + document.getElementById(\"specifics-gas\").value\n    )\n  });\n});\n\n  //this part changes the year, make, model to what the user selects //from the list\n  $('li').on('click', function () {\n    $(this).parent().siblings()[0].innerHTML = this.innerHTML\n    //console.log(this.textContent)\n  });\n</code></pre>\n"}, {"tags": ["python", "r", "csv"], "comments": [{"owner": {"reputation": 63221, "user_id": 1191259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FShQs.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/1191259/frank"}, "edited": false, "score": 0, "creation_date": 1446669496, "post_id": 33531408, "comment_id": 54844614, "body": "This is what I did (though not in R): read it in; generate a <code>DF$tab &lt;- cumsum(grepl(&quot;^Interest&quot;, DF$V1))</code> or similar to identify the several subtables; work in turn with the subset where <code>tab==1</code> and where <code>tab==2</code> and so on. The data has date ranges, not dates, so I don&#39;t know why you&#39;re showing the latter here..."}, {"owner": {"reputation": 26666, "user_id": 4564247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ig4ew.jpg?s=128&g=1", "display_name": "Pierre L", "link": "https://stackoverflow.com/users/4564247/pierre-l"}, "edited": false, "score": 0, "creation_date": 1446669901, "post_id": 33531408, "comment_id": 54844855, "body": "Your output as displayed is not standard R output. Instead of manually entering the first few lines use <code>dput(head(mydata))</code>"}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 0, "creation_date": 1446670016, "post_id": 33531408, "comment_id": 54844923, "body": "Is this the file that we are looking at?"}, {"owner": {"reputation": 1176, "user_id": 2725751, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4d4a9657b904b2b282b1f0fc5a214ea2?s=128&d=identicon&r=PG&f=1", "display_name": "ATMA", "link": "https://stackoverflow.com/users/2725751/atma"}, "reply_to_user": {"reputation": 26666, "user_id": 4564247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ig4ew.jpg?s=128&g=1", "display_name": "Pierre L", "link": "https://stackoverflow.com/users/4564247/pierre-l"}, "edited": false, "score": 0, "creation_date": 1446670313, "post_id": 33531408, "comment_id": 54845111, "body": "@Pierre Yes, it&#39;s non-standard. With that said, using fread on the google trends csv output does select the first table, so that is a solution."}, {"owner": {"reputation": 1176, "user_id": 2725751, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4d4a9657b904b2b282b1f0fc5a214ea2?s=128&d=identicon&r=PG&f=1", "display_name": "ATMA", "link": "https://stackoverflow.com/users/2725751/atma"}, "reply_to_user": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 0, "creation_date": 1446670361, "post_id": 33531408, "comment_id": 54845133, "body": "@Richard, Yes, googel trends returns a csv with about four table on one sheet. Each is one top of each other with a few rows of separation."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1446699102, "post_id": 33531408, "comment_id": 54854816, "body": "This isn&#39;t a cvs file so using python&#39;s CSI reader would only get in the way. You could realizes until you see a line that starts with &quot;Day&quot; then read and process the lines with dates and break out of it when you see a blank line."}], "answers": [{"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 1, "last_activity_date": 1446699085, "creation_date": 1446699085, "answer_id": 33536932, "question_id": 33531408, "link": "https://stackoverflow.com/questions/33531408/selecting-all-rows-with-dates-in-a-unstructured-csv/33536932#33536932", "title": "Selecting all rows with dates in a unstructured csv", "body": "<p>Consider this Python solution to read in raw csv and convert first column to date. <code>Try/Except</code> is used to skip rows that do not convert properly to date format.</p>\n\n<pre><code>import csv\nfrom datetime import datetime\n\nwith open('Unstructured.csv', 'rt') as csvfile:\n    csvReader = csv.reader(csvfile)\n    data = []\n\n    for row in csvReader:\n        try:\n            data.append([datetime.strptime(row[0], \"%m/%d/%Y\").strftime(\"%Y-%m-%d\"), row[1]])\n        except ValueError:\n            continue\n\n    for i in data:\n        print(i)\n</code></pre>\n\n<p><strong>Output</strong> <em>(data list)</em></p>\n\n<pre><code>['2015-08-07', '70']\n['2015-08-08', '82']\n['2015-08-09', '91']\n['2015-08-10', '84']\n['2015-11-03', '']\n['2015-11-05', '']\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 2725751, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4d4a9657b904b2b282b1f0fc5a214ea2?s=128&d=identicon&r=PG&f=1", "display_name": "ATMA", "link": "https://stackoverflow.com/users/2725751/atma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33536932, "answer_count": 1, "score": 0, "last_activity_date": 1446699085, "creation_date": 1446669000, "last_edit_date": 1446670763, "question_id": 33531408, "link": "https://stackoverflow.com/questions/33531408/selecting-all-rows-with-dates-in-a-unstructured-csv", "title": "Selecting all rows with dates in a unstructured csv", "body": "<p>So I have the output of a Google Trends query. It contains several tables on one sheet. The first part of the sheet looks like:</p>\n\n<pre><code>Web Search interest: nespresso  \nUnited States; date_range:(today 90-d)  \n\nInterest over time  \nDay nespresso\n8/7/2015    70\n8/8/2015    82\n8/9/2015    91\n8/10/2015   84\n</code></pre>\n\n<p>So here's what I'd like to do. Disregard the first few rows and select any rows with a date. (weekly data from have date as 8/7/2015-8/14/2015). Sure, there's nrow and skip in read.csv, but I was wondering if there was a systematic way to do this.</p>\n\n<p>Also, bear in mind that the data from Google trends includes data after the dates.</p>\n\n<pre><code>11/3/2015    \n11/4/2015    \n\n\nTop subregions for nes  \nSubregion   nes\nNew York    100\nMassachusetts   83\n</code></pre>\n\n<p>Looking for Python or R solution</p>\n"}, {"tags": ["python", "django", "http", "nginx", "uwsgi"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 2667704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9vxo.jpg?s=128&g=1", "display_name": "ElGranBarta", "link": "https://stackoverflow.com/users/2667704/elgranbarta"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1446955867, "post_id": 33532473, "comment_id": 54957015, "body": "I think it does. If he increases the processes to 4 he will get an answer from the uwsgi server while the other 2 long processes run."}], "tags": [], "owner": {"reputation": 81, "user_id": 2667704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9vxo.jpg?s=128&g=1", "display_name": "ElGranBarta", "link": "https://stackoverflow.com/users/2667704/elgranbarta"}, "is_accepted": false, "score": 0, "last_activity_date": 1447027790, "last_edit_date": 1447027790, "creation_date": 1446672972, "answer_id": 33532473, "question_id": 33531406, "link": "https://stackoverflow.com/questions/33531406/uwsgi-procces-blocks-request/33532473#33532473", "title": "Uwsgi procces blocks request", "body": "<p>You have a uwsgi server configured to spawn 2 processes. Then you run 2 long requests. Those 2 processes are busy with the long requests, so new requests must wait until the long requests finish.</p>\n\n<p>If you want to send new reqeusts to the server while the long requests run, increase the processes to more than 2 (ie --processes 4)</p>\n"}], "owner": {"reputation": 903, "user_id": 3976409, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/24ff4bde7c40bb0020ca95574063f3ee?s=128&d=identicon&r=PG", "display_name": "sweet_sugar", "link": "https://stackoverflow.com/users/3976409/sweet-sugar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447027790, "creation_date": 1446668992, "question_id": 33531406, "link": "https://stackoverflow.com/questions/33531406/uwsgi-procces-blocks-request", "title": "Uwsgi procces blocks request", "body": "<p>While testing nginx server with uwsgi and django I am having problem with uwsgi process. I am sending two posts, which are taking a lot of time. Meanwhile server processing I am sending get request from webrowser and I must wait till this two post finished. I am starting uwsgi with this command:</p>\n\n<pre><code>cd /home/pi/cukierek &amp;&amp; uwsgi -\n-max-requests=5000 \n--socket /tmp/cukierek.sock \n--module config.wsgi  \n--master-fifo /tmp/cukierek.fifo \n--chmod-socket=777 --processes 2 \n--daemonize /home/pi/cukierek/wsgi.log \n--enable-threads\n</code></pre>\n\n<p>It is possible to get answer from browser while this two post are beeing in progress ? I am using default nginx settings.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 677, "user_id": 3237810, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2dd47ba3517e7a65ba2b4d8f0fd5ccc4?s=128&d=identicon&r=PG&f=1", "display_name": "DorinPopescu", "link": "https://stackoverflow.com/users/3237810/dorinpopescu"}, "edited": false, "score": 0, "creation_date": 1446669467, "post_id": 33531401, "comment_id": 54844597, "body": "so basically you need a new subfolder (with the next version number) created in the main folder each time you run the script?"}], "answers": [{"tags": [], "owner": {"reputation": 677, "user_id": 3237810, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2dd47ba3517e7a65ba2b4d8f0fd5ccc4?s=128&d=identicon&r=PG&f=1", "display_name": "DorinPopescu", "link": "https://stackoverflow.com/users/3237810/dorinpopescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1446669834, "creation_date": 1446669834, "answer_id": 33531637, "question_id": 33531401, "link": "https://stackoverflow.com/questions/33531401/create-a-folder-and-subfolders-with-increase-version-numbers/33531637#33531637", "title": "Create a folder and subfolders with increase version numbers", "body": "<p>If I got it right this is what you can do:</p>\n\n<pre><code>from glob import glob;\nfrom os import mkdir;\nfrom os.path import curdir, join;\n\nsubfolders = glob( join(curdir, 'mainFolder', '*version*') );\nsubfolers.sort();\ncurrentVersion = subfolers[-1].split('version')[1];\nnextVersion  = int(currentVersion ) + 1;\n\nmkdir( join(curdir, 'mainFolder', '20151104_version%d' % nextVersion) )\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5193989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d4db848f2cf2fabc6c16ef6923483?s=128&d=identicon&r=PG&f=1", "display_name": "intelceptor", "link": "https://stackoverflow.com/users/5193989/intelceptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448462741, "creation_date": 1446668963, "last_edit_date": 1446670239, "question_id": 33531401, "link": "https://stackoverflow.com/questions/33531401/create-a-folder-and-subfolders-with-increase-version-numbers", "title": "Create a folder and subfolders with increase version numbers", "body": "<p>I'm creating a folder with Python. Main folder name is 20151104 (YMMDD) and I'm creating subfolder 20151104_version1 (YMMDD_version1).</p>\n\n<pre><code>20151104 (mainfolder)\n|-&gt;20151104_version1 (subfolders)\n|-&gt;20151104_version2\n|-&gt;20151104_version3\n|-&gt;20151104_version4\n|-&gt;20151104_version5\n.........\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PL09e.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PL09e.jpg\" alt=\"example\"></a></p>\n\n<p>When I restart the Python program, it must create another subfolder and subfolder 20151104_version number must increase. How can I do this?</p>\n"}, {"tags": ["python", "python-2.7", "scipy", "statistics", "combinations"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1446669208, "creation_date": 1446669208, "answer_id": 33531457, "question_id": 33531304, "link": "https://stackoverflow.com/questions/33531304/bayesian-updating-on-binomial-process/33531457#33531457", "title": "Bayesian updating on binomial process", "body": "<p>If you mathematically simplify the likelihood ratio expression, you'll find that <code>comb(n, result)</code> cancels out. You don't need to include it at all.</p>\n"}], "owner": {"reputation": 3, "user_id": 4013689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4336426383c338ffdd3607114857e0d4?s=128&d=identicon&r=PG", "display_name": "catbasket", "link": "https://stackoverflow.com/users/4013689/catbasket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 33531457, "answer_count": 1, "score": 0, "last_activity_date": 1446669208, "creation_date": 1446668599, "question_id": 33531304, "link": "https://stackoverflow.com/questions/33531304/bayesian-updating-on-binomial-process", "title": "Bayesian updating on binomial process", "body": "<p>I'm running a simulation in which agents update beliefs based on the results of a binomial(n, p) process. That part goes something like</p>\n\n<pre><code>from numpy.random import binomial, random\nfrom scipy.misc import comb\nimport math\n\neps = 0.01\nbelief = random()\nn = 1100\nresult = binomial(n, 0.5 + eps)\n\nprob2 = comb(n, result)*math.pow(0.5 + eps, result)*math.pow(.5 - eps, n - result)\nprob1 = comb(n, result)*math.pow(0.5 - eps, result)*math.pow(.5 + eps, n - result)\nbottom = prob2*belief + prob1*(1 - belief)\ntop = prob2*belief\n\nbayes = top/bottom\n</code></pre>\n\n<p>The problem is, if n is greater than about 1000, the result of comb(n, result) is \"inf\", so the rest of the calculation stops working. </p>\n"}, {"tags": ["python", "login"], "comments": [{"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 1, "creation_date": 1446668610, "post_id": 33531278, "comment_id": 54844121, "body": "That&#39;s nice.  Oh did you have a question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5134772"}, "reply_to_user": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1446668709, "post_id": 33531278, "comment_id": 54844170, "body": "yes i want to add a piece of code that checks to see if the variables user and passwrd are in the file and if they are print &quot;correct&quot; or &quot;incorrect&quot;"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1446668859, "post_id": 33531278, "comment_id": 54844250, "body": "change <code>for user,passwrd</code> to <code>if [user,passwrd]</code> if you want to check whether the inputs are in credentials list"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5134772"}, "edited": false, "score": 0, "creation_date": 1446668967, "post_id": 33531278, "comment_id": 54844316, "body": "Yes it&#39;s working now thank you verry helpfull"}], "answers": [{"comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446669172, "post_id": 33531382, "comment_id": 54844429, "body": "you might want to <code>break</code>/<code>return</code> if there is a match, since I doubt there will another line with the same combination"}], "tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1446669069, "last_edit_date": 1446669069, "creation_date": 1446668894, "answer_id": 33531382, "question_id": 33531278, "link": "https://stackoverflow.com/questions/33531278/python-login-script-using-dictionary/33531382#33531382", "title": "Python login script using dictionary", "body": "<p>You just check to see if they match.  Note that you need to make the variable names different:</p>\n\n<pre><code>for user2,passwrd2 in credentials:\n    if (user == user2 and passwrd == passwrd2):\n       print (\"Passed\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 5521715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3720815e6e44a5e2c3f2ef9d518526ca?s=128&d=identicon&r=PG&f=1", "display_name": "James Harrison", "link": "https://stackoverflow.com/users/5521715/james-harrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670451, "creation_date": 1446670451, "answer_id": 33531805, "question_id": 33531278, "link": "https://stackoverflow.com/questions/33531278/python-login-script-using-dictionary/33531805#33531805", "title": "Python login script using dictionary", "body": "<p>If you make credentials a dict, then you can do:</p>\n\n<pre><code>if user in credentials and credentials[user] == password:\n   //success\nelse:\n   //failure\n</code></pre>\n\n<p>This should work for making credentials be a dict </p>\n\n<pre><code>with open('users.txt') as f:\n   credentials = dict([x.strip().split(':') for x in f.readlines()])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5134772"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446670451, "creation_date": 1446668500, "last_edit_date": 1446669052, "question_id": 33531278, "link": "https://stackoverflow.com/questions/33531278/python-login-script-using-dictionary", "title": "Python login script using dictionary", "body": "<p>I am making a login script for python and it will create passwords and write them to a text file like (username:password). But I want to add a login script that will check to see if the username and password is in the text file.</p>\n\n<pre><code>def reg():\n    print('Creating new text file') \n    name = input('Username: ')\n    passwrd = input('Password: ')\n    with open(\"users.txt\", \"r+\") as f:\n     old = f.read()\n     f.seek(0)\n     f.write(name + \":\" + passwrd + \"\\n\" + old)\n    f.close()\ndef login():\n    user = input(\"username: \")\n    passwrd = input(\"password: \")\n\n    with open('users.txt') as f:\n       credentials = [x.strip().split(':') for x in f.readlines()]\n\n    for user,passwrd in credentials:\n    (This is where i want to add the code)\n\nreg()\nlogin()\n</code></pre>\n\n<p>I think it would be something like.</p>\n\n<pre><code>for user,passwrd in credentials:\n    print(\"found\")\nelse:\n    print(\"not found\")\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1446667978, "post_id": 33531095, "comment_id": 54843775, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2835559/parsing-values-from-a-json-file-in-python\">Parsing values from a JSON file in Python</a>"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1446668191, "post_id": 33531095, "comment_id": 54843893, "body": "SO isn&#39;t a code writing service. Please read up on the relevant subjects, make an attempt, and provide a MVE when you run into trouble."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1446668584, "post_id": 33531095, "comment_id": 54844106, "body": "SO on the other hand, <i>is</i> a question-and-answer web site. I observe that this post has no question. S.Pandit, do you have a specific question to ask?"}, {"owner": {"reputation": 955, "user_id": 3875230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZ7le.png?s=128&g=1", "display_name": "mugabits", "link": "https://stackoverflow.com/users/3875230/mugabits"}, "edited": false, "score": 0, "creation_date": 1446668887, "post_id": 33531095, "comment_id": 54844269, "body": "You can access what you want by looping and using the correct dictionary keys. What have you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1446680281, "last_edit_date": 1446680281, "creation_date": 1446668173, "answer_id": 33531192, "question_id": 33531095, "link": "https://stackoverflow.com/questions/33531095/extracting-data-from-a-nested-json-structure-in-python/33531192#33531192", "title": "Extracting data from a nested json structure in python", "body": "<p>Python has a json parsing library, see <a href=\"https://docs.python.org/2/library/json.html\" rel=\"nofollow\">https://docs.python.org/2/library/json.html</a> for details.</p>\n\n<p>Usage:</p>\n\n<pre><code>import json\ntext = open(\"file.txt\", \"r\").read()\nobj = json.loads(text)\n</code></pre>\n\n<p>where obj is a python native dict object with nested arrays and dicts.</p>\n\n<p>Edit:</p>\n\n<p>This is the code you want.</p>\n\n<pre><code>import json\nnumbers=set()\ninput_file=open('filename.json', 'r')\njson_decode=json.load(input_file)\nfor item in json_decode[\"07/01/2015-08/01/2015\"][\"ABC\"]:\n    numbers.add(item[0])\nprint \" \".join(str(x) for x in numbers)\n</code></pre>\n\n<p>You iterated through each item (the two strings) and added the first letter of each string, hence 1 and 2. Next time, please provide the output you got.</p>\n\n<p>Also, you should attempt to debug your code first. I added a <code>print</code> at the beginning of each loop, and that made the problem pretty clear.</p>\n"}], "owner": {"reputation": 27, "user_id": 5526422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad023b2044fd69eab75c6afc42f6dc0b?s=128&d=identicon&r=PG&f=1", "display_name": "S.Pandit", "link": "https://stackoverflow.com/users/5526422/s-pandit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "accepted_answer_id": 33531192, "answer_count": 1, "score": 0, "last_activity_date": 1446680281, "creation_date": 1446667856, "last_edit_date": 1446679227, "question_id": 33531095, "link": "https://stackoverflow.com/questions/33531095/extracting-data-from-a-nested-json-structure-in-python", "title": "Extracting data from a nested json structure in python", "body": "<p>My json file looks like this:</p>\n\n<pre><code>{\"07/01/2015-08/01/2015\": \n    {\"ABC\": [\n              [\"12015618727\", \"2015-07-29 02:32:01\"], \n              [\"12024079732\", \"2015-07-24 13:04:01\"], \n              [\"12024700142\", \"2015-07-02 00:00:00\"]\n             ]\n    }\n}\n</code></pre>\n\n<p>I want to extract the numbers 12015618727, 12024079732, 12024700142 from here in python.</p>\n\n<p>I wrote this code:</p>\n\n<pre><code>import json\nnumbers=set()\ninput_file=open('filename', 'r')\njson_decode=json.load(input_file)\nfor item in json_decode[\"07/01/2015-08/01/2015\"][\"ABC\"]:\n    for j in item:\n        numbers.add(j[0])\nprint \" \".join(str(x) for x in numbers)\n</code></pre>\n\n<p>But this doesn't print the numbers.</p>\n"}, {"tags": ["python", "sql", "sql-server", "sqlalchemy"], "comments": [{"owner": {"reputation": 2512, "user_id": 838693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a750b4c128af0910dca8e82446cbcfa?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/838693/max"}, "edited": false, "score": 0, "creation_date": 1446669574, "post_id": 33530937, "comment_id": 54844662, "body": "It&#39;s strange situation when you need to perform a query to a server within a connection to a different server. Why you can&#39;t just have two separate connections?"}, {"owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "reply_to_user": {"reputation": 2512, "user_id": 838693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a750b4c128af0910dca8e82446cbcfa?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/838693/max"}, "edited": false, "score": 0, "creation_date": 1446669736, "post_id": 33530937, "comment_id": 54844759, "body": "It is. The actual query is doing an <code>INSERT INTO</code>, as well as bunch of gymnastics like truncating the table first, and using <code>TABLOCKX</code>. Needs to be done with one connection."}], "answers": [{"comments": [{"owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "edited": false, "score": 0, "creation_date": 1446671090, "post_id": 33531875, "comment_id": 54845534, "body": "Yes. The servers are linked. I can run the query fine from within SQL Server."}], "tags": [], "owner": {"reputation": 2512, "user_id": 838693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a750b4c128af0910dca8e82446cbcfa?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/838693/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1446670690, "creation_date": 1446670690, "answer_id": 33531875, "question_id": 33530937, "link": "https://stackoverflow.com/questions/33530937/cross-server-select-in-sqlalchemy/33531875#33531875", "title": "Cross Server Select In SQLAlchemy", "body": "<p>It's quite complicated if you suppose to alter different servers through one connection.\nBut if you need to perform a query to a different server under different credentials you should add linked server first with <a href=\"https://msdn.microsoft.com/en-us/library/ms190479.aspx\" rel=\"nofollow\"><code>sp_addlinkedserver</code></a>. Then it should be added credentials to the linked server with <a href=\"https://msdn.microsoft.com/en-us/library/ms189811.aspx\" rel=\"nofollow\"><code>sp_addlinkedsrvlogin</code></a>. Have you tried this?</p>\n"}, {"tags": [], "owner": {"reputation": 89167, "user_id": 3571, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b1d6ed6863a3b4aab3565f1f9625f156?s=128&d=identicon&r=PG", "display_name": "codeape", "link": "https://stackoverflow.com/users/3571/codeape"}, "is_accepted": false, "score": 1, "last_activity_date": 1446677437, "creation_date": 1446677437, "answer_id": 33533590, "question_id": 33530937, "link": "https://stackoverflow.com/questions/33530937/cross-server-select-in-sqlalchemy/33533590#33533590", "title": "Cross Server Select In SQLAlchemy", "body": "<p>Looks like there's an issue with how you authenticate to SQL server.</p>\n\n<p>I believe you can connect using the current Windows user, the URI syntax is then <code>mssql+pyodbc://SERVER/Database?trusted_connection=yes</code> (I have never tested this, but give it a try).</p>\n\n<p>Another option is to create a SQL server login (ie. a username/password that is defined within SQL server, NOT a Windows user) and use the SQL server login when you connect.</p>\n\n<p>The database URI then becomes: <code>mssql+pyodbc://username:password@SERVER/Database</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "is_accepted": true, "score": 0, "last_activity_date": 1446762974, "creation_date": 1446762974, "answer_id": 33556096, "question_id": 33530937, "link": "https://stackoverflow.com/questions/33530937/cross-server-select-in-sqlalchemy/33556096#33556096", "title": "Cross Server Select In SQLAlchemy", "body": "<p><code>mssql+pyodbc://SERVER/Database?trusted_connection=yes</code> threw an error when I tried to it. It did point me in the right direction though.</p>\n\n<pre><code>from sqlalchemy import create_engine, sql\nimport urllib\n\nstring = \"DRIVER={SQL SERVER};SERVER=server;DATABASE=db;TRUSTED_CONNECTION=YES\"\nparams = urllib.quote_plus(string)\nengine = create_engine('mssql+pyodbc:///?odbc_connect={0}'.format(params))\n\n\nquery = sql.text('SELECT TOP 10 * FROM [CrossServer].[datbase].[dbo].[Table]')\n\nwith engine.begin() as connection:\n    data = connection.execute(query).fetchall()\n</code></pre>\n"}], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 33556096, "answer_count": 3, "score": 1, "last_activity_date": 1446762974, "creation_date": 1446667184, "question_id": 33530937, "link": "https://stackoverflow.com/questions/33530937/cross-server-select-in-sqlalchemy", "title": "Cross Server Select In SQLAlchemy", "body": "<p>Is it possible to make SQLAlchemy do cross server joins?</p>\n\n<p>If I try to run something like </p>\n\n<pre><code>engine = create_engine('mssql+pyodbc://SERVER/Database')\n\nquery = sql.text('SELECT TOP 10 * FROM [dbo].[Table]')\n\nwith engine.begin() as connection:\n    data = connection.execute(query).fetchall()\n</code></pre>\n\n<p>It works as I'd expect. If I change the query to select from <code>[OtherServer].[OtherDatabase].[dbo].[Table]</code> I get an error message <code>\"Login failed for user 'NT AUTHORITY\\\\ANONYMOUS LOGON\"</code></p>\n"}, {"tags": ["python", "macos", "pip", "macports", "weasyprint"], "comments": [{"owner": {"reputation": 1389, "user_id": 1957136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g510i.jpg?s=128&g=1", "display_name": "Anurag", "link": "https://stackoverflow.com/users/1957136/anurag"}, "edited": false, "score": 0, "creation_date": 1474706247, "post_id": 33530911, "comment_id": 66649191, "body": "Check this link, I managed to solve this without disabling SIP <a href=\"http://stackoverflow.com/a/39674220/1957136\">stackoverflow.com/a/39674220/1957136</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1389, "user_id": 1957136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g510i.jpg?s=128&g=1", "display_name": "Anurag", "link": "https://stackoverflow.com/users/1957136/anurag"}, "edited": false, "score": 1, "creation_date": 1474706283, "post_id": 33549120, "comment_id": 66649202, "body": "Check this link, I managed to solve this without disabling SIP <a href=\"http://stackoverflow.com/a/39674220/1957136\">stackoverflow.com/a/39674220/1957136</a>"}], "tags": [], "owner": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "is_accepted": true, "score": 1, "last_activity_date": 1446738874, "creation_date": 1446738874, "answer_id": 33549120, "question_id": 33530911, "link": "https://stackoverflow.com/questions/33530911/trouble-running-weasyprint-after-installing-el-capitan-osx-10-11/33549120#33549120", "title": "Trouble running WeasyPrint after installing El Capitan (OSX 10.11)", "body": "<p>Ok so I found a solution (without changing any of the original weasyprint or cairocffi files). Apparently OS X 10.11 introduces SIP which disables the use of DYLD path variables. To get around this I disabled SIP. The instructions to do so are <a href=\"http://www.macworld.com/article/2986118/security/how-to-modify-system-integrity-protection-in-el-capitan.html\" rel=\"nofollow\">here</a>. Basically hold command + r when booting up. Click utilities at the top and go into the terminal. type in csrutil disable then reboot and that should fix it.</p>\n"}], "owner": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "accepted_answer_id": 33549120, "answer_count": 1, "score": 0, "last_activity_date": 1446738874, "creation_date": 1446667105, "last_edit_date": 1446667842, "question_id": 33530911, "link": "https://stackoverflow.com/questions/33530911/trouble-running-weasyprint-after-installing-el-capitan-osx-10-11", "title": "Trouble running WeasyPrint after installing El Capitan (OSX 10.11)", "body": "<p>I recently updated my OS on my mac to El Capitan and since then have been running into issues trying to run WeasyPrint. I have updated macports, uninstalled and reinstalled all of the macport dependencies. I've also uninstalled and reinstalled WeasyPrint via pip with no issues, but still it doesn't run. I also have the export DYLD_FALLBACK_LIBRARY_PATH=\"/opt/local/lib\" in my ~/.profile which helped solve the import errors and allowed WeasyPrint to run before I had El Capitan installed. \nWhen i type weasyprint --help into the terminal i get the following output/error:</p>\n\n<pre><code>File \"main.py\", line 14, in &lt;module&gt;\n    import nextline_webapp.quotes                   # pylint: disable=unused-import\n  File \"/Users/joshsacks/NextLine/nextline_webapp/quotes.py\", line 8, in &lt;module&gt;\n    from flask_weasyprint import HTML, render_pdf\n  File \"/Library/Python/2.7/site-packages/flask_weasyprint/__init__.py\", line 13, in &lt;module&gt;\n    import weasyprint\n  File \"/Library/Python/2.7/site-packages/weasyprint/__init__.py\", line 336, in &lt;module&gt;\n    from .css import PARSER, preprocess_stylesheet\n  File \"/Library/Python/2.7/site-packages/weasyprint/css/__init__.py\", line 30, in &lt;module&gt;\n    from . import computed_values\n  File \"/Library/Python/2.7/site-packages/weasyprint/css/computed_values.py\", line 18, in &lt;module&gt;\n    from .. import text\n  File \"/Library/Python/2.7/site-packages/weasyprint/text.py\", line 18, in &lt;module&gt;\n    import cairocffi as cairo\n  File \"/Library/Python/2.7/site-packages/cairocffi/__init__.py\", line 46, in &lt;module&gt;\n    cairo = dlopen(ffi, 'cairo', 'cairo-2')\n  File \"/Library/Python/2.7/site-packages/cairocffi/__init__.py\", line 43, in dlopen\n    raise OSError(\"dlopen() failed to load a library: %s\" % ' / '.join(names))\nOSError: dlopen() failed to load a library: cairo / cairo-2\n</code></pre>\n\n<p>It looks like a path problem, but I've tried everything i can think of. Any suggestions?</p>\n"}, {"tags": ["python", "xml", "excel"], "comments": [{"owner": {"reputation": 2097, "user_id": 4402759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0d2b1f35b8f999526905db3f4b0fefcd?s=128&d=identicon&r=PG&f=1", "display_name": "nbayly", "link": "https://stackoverflow.com/users/4402759/nbayly"}, "edited": false, "score": 1, "creation_date": 1446668095, "post_id": 33530869, "comment_id": 54843844, "body": "What about using Excel&#39;s native XML reader and then just save as .xls? Try doing one manually and use Macro Recorder to view what commands it involves. Then just scale it so it handles a whole folder or however you have your XMLs stored."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1446668755, "post_id": 33530869, "comment_id": 54844191, "body": "<a href=\"http://blogs.sas.com/content/sasdummy/2012/02/11/export-excel-methods/\" rel=\"nofollow noreferrer\">How do I export from SAS to Excel files: Let me count the ways</a>"}, {"owner": {"reputation": 1, "user_id": 5517221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1829ce0f8c237cb8fa5976ba2641d39f?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/5517221/momo"}, "edited": false, "score": 0, "creation_date": 1446668999, "post_id": 33530869, "comment_id": 54844336, "body": "We use the excel xp tagset in SAS so it comes out as a formatted XML file."}, {"owner": {"reputation": 35496, "user_id": 4965549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2fd3fbe1a522cea4792ee16c718872?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/4965549/tom"}, "edited": false, "score": 0, "creation_date": 1446684738, "post_id": 33530869, "comment_id": 54851070, "body": "Why not use ODS EXCEL instead of ODS TAGSETS EXCELXP?"}, {"owner": {"reputation": 1, "user_id": 5517221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1829ce0f8c237cb8fa5976ba2641d39f?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/5517221/momo"}, "reply_to_user": {"reputation": 2097, "user_id": 4402759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0d2b1f35b8f999526905db3f4b0fefcd?s=128&d=identicon&r=PG&f=1", "display_name": "nbayly", "link": "https://stackoverflow.com/users/4402759/nbayly"}, "edited": false, "score": 0, "creation_date": 1446733147, "post_id": 33530869, "comment_id": 54873428, "body": "@nbayly that&#39;s brilliant, I didn&#39;t even think of an excel macro.  Thanks."}, {"owner": {"reputation": 2097, "user_id": 4402759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0d2b1f35b8f999526905db3f4b0fefcd?s=128&d=identicon&r=PG&f=1", "display_name": "nbayly", "link": "https://stackoverflow.com/users/4402759/nbayly"}, "edited": false, "score": 0, "creation_date": 1446826075, "post_id": 33530869, "comment_id": 54919777, "body": "@momo Glad I could help. Send my best to Appa :p"}], "owner": {"reputation": 1, "user_id": 5517221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1829ce0f8c237cb8fa5976ba2641d39f?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/5517221/momo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446669897, "creation_date": 1446666958, "last_edit_date": 1446669897, "question_id": 33530869, "link": "https://stackoverflow.com/questions/33530869/large-folder-of-xml-files-needs-to-become-large-folder-of-excel-workbooks", "title": "Large folder of XML files needs to become large folder of Excel workbooks", "body": "<p>I use SAS to generate dozens of reports in XML format which I then have to save as Excel workbooks.  Unfortunately I don't see a way to programmatically do that in SAS.  Ideally I would like a script that can just eat up all the .XML files and spit out .XLS.  I've parsed out the XML using:</p>\n\n<pre><code>import os, sys\nimport openpyxl\nimport xml.etree.ElementTree as ET\n\npath = 'C:\\\\Users\\\\me\\\\Desktop\\\\xml'\nfor filename in os.listdir(path):\n    if not filename.endswith('.xml'): continue\n    fullname = os.path.join(path, filename)\n    tree = ET.parse(fullname)\n</code></pre>\n\n<p>And am trying to use openpyxl to save as .XLS in the same path while keeping the .XML files.  </p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["python", "image", "urllib"], "answers": [{"comments": [{"owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "edited": false, "score": 0, "creation_date": 1446753746, "post_id": 33531205, "comment_id": 54886880, "body": "Thanks for the trouble of running and testing my code! It pointed me in the right direction. I have edited my question with the correct solution.  Thanks a lot!"}], "tags": [], "owner": {"reputation": 2312, "user_id": 1124622, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d7b4bcff8e4dbb327bf4586c1a39f50e?s=128&d=identicon&r=PG", "display_name": "Jephron", "link": "https://stackoverflow.com/users/1124622/jephron"}, "is_accepted": true, "score": 2, "last_activity_date": 1446668216, "creation_date": 1446668216, "answer_id": 33531205, "question_id": 33530841, "link": "https://stackoverflow.com/questions/33530841/urlretrieve-seems-to-corrupt-image-file/33531205#33531205", "title": "urlretrieve seems to corrupt image file", "body": "<p>I ran your code and took a look at the \"image\" that it downloads. Turns out that the contents of the file you save out is actually the entire HTML of the site. Try opening it in a text editor and see for yourself. </p>\n\n<p>To fix this, notice that the argument you pass to urlretrieve is actually the url for the web page your scraping. If you join the image url to the page url, you get the correct url:</p>\n\n<pre><code>def get_images(url, soup):\n    #this makes a list of bs4 element tags\n    print 'URL: ', url\n    n = 0\n    images = [img for img in soup.findAll('img')]\n\n    #compile our unicode list of image links\n    image_links = [each.get('src') for each in images]\n    for each in image_links:\n        print \"maybe an image\"\n        print each\n        n = n + 1\n        path = urlparse.urlparse(each).path\n        fn = (os.path.split(path)[1]).strip()\n        ext = (os.path.splitext(fn)[1]).strip().lower()\n        if (fn == '' or ext == ''):\n            continue\n\n        fn = os.path.join (\"images\", fn)\n\n        print 'Each&gt; ', each\n\n        result = urllib.urlretrieve(os.path.join(url, each), fn)\n        print result\n\n    return n\n</code></pre>\n"}], "owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 1, "accepted_answer_id": 33531205, "answer_count": 1, "score": 1, "last_activity_date": 1446753505, "creation_date": 1446666856, "last_edit_date": 1446753505, "question_id": 33530841, "link": "https://stackoverflow.com/questions/33530841/urlretrieve-seems-to-corrupt-image-file", "title": "urlretrieve seems to corrupt image file", "body": "<p>I use urlretrieve to scrape images from a web site. That works well except for one, not so minor detail. The files are not readable. I tried several websites but the result is the same. I wondered whether I should indicate it is a binary download but could not find any hint in the documentation. Searched the web, found some alternative with the requests library but again same results. The Windows Photo Viewer, Paint and Gimp all report that the file is corrupted or unreadable. I am pretty sure I am making some dumb mistake. Any help will be greatly appreciated!</p>\n\n<pre><code>def get_images(url, soup):\n    #this makes a list of bs4 element tags\n    print 'URL: ', url\n    n = 0\n    images = [img for img in soup.findAll('img')]\n\n    #compile our unicode list of image links\n    image_links = [each.get('src') for each in images]\n    for each in image_links:\n        n = n + 1\n        path = urlparse.urlparse(each).path\n        fn = (os.path.split(path)[1]).strip()\n        ext = (os.path.splitext(fn)[1]).strip().lower()\n        if (fn == '' or ext == ''):\n            continue\n\n        fn = os.path.join (\"images\", fn)\n\n#        print 'From: ', url\n        print 'Each&gt; ', each\n#        print 'File&lt; ', fn\n#        avatar = open(fn, 'wb')\n#        avatar.write(requests.get(url).content)\n#        avatar.close()\n        result = urllib.urlretrieve(url, fn)\n        print result\n\n    return n\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Jephron pointed me to the right direction, I did not correctly combine the url with the image path. His solution works by using <code>urlparse.urljoin(url, each)</code> while using <code>os.path.join</code> as I did initially, may result in suddenly having backslashed in a url on a windows system. Quite annoying. I added a test for relative and absolute url paths and the final code is shown below.</p>\n\n<pre><code>def get_images(url, soup):\n    #this makes a list of bs4 element tags\n    print ' '\n    print 'URL: ', url\n    n = 0\n    images = [img for img in soup.findAll('img')]\n\n    #compile our unicode list of image links\n    image_links = [each.get('src') for each in images]\n\n    for each in image_links:\n        path = urlparse.urlparse(each).path\n        fn = (os.path.split(path)[1]).strip()\n        ext = (os.path.splitext(fn)[1]).strip().lower()\n        if (fn == '' or ext == ''):\n            continue\n\n        fn = os.path.join (\"images\", fn)\n        if (not (each.startswith ('http:') or each.startswith('https:'))):\n            image_link = urlparse.urljoin(url, each)\n        else:\n            image_link = each\n\n        print 'Found: ', fn\n\n        try:\n            urllib.urlretrieve(image_link, fn)\n            n = n + 1\n        except:\n            continue\n\n    return n\n</code></pre>\n\n<p>Be aware however, that 3/4 of the .png's are still unreadable. I have to find out why, but there might still be a hidden snag. </p>\n"}, {"tags": ["python", "redis", "rabbitmq", "celery", "django-celery"], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 4719092, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh4.googleusercontent.com/-qMqSvtGluLU/AAAAAAAAAAI/AAAAAAAAABU/7JjCBdRxWzc/photo.jpg?sz=128", "display_name": "Jide Koso", "link": "https://stackoverflow.com/users/4719092/jide-koso"}, "is_accepted": false, "score": 0, "last_activity_date": 1446731990, "creation_date": 1446731990, "answer_id": 33546505, "question_id": 33530781, "link": "https://stackoverflow.com/questions/33530781/redis-loosing-connection-when-used-with-celery-groups-or-chain-throwing-error/33546505#33546505", "title": "Redis loosing connection when used with Celery groups or chain - throwing ERROR/MainProcess] Connection to Redis lost: Retry (0/20) now", "body": "<p>I finally figured it out with help from IRC and Greg from <a href=\"https://groups.google.com/forum/#!topic/redis-db/zhx6wA4Tku0\" rel=\"nofollow\">redis user groups</a></p>\n\n<p>By changing the limit of opened files on my Mac OSX Yosemite to 65536 the problem was solved.</p>\n\n<p>I hope this helps someone someday.</p>\n"}], "owner": {"reputation": 405, "user_id": 4719092, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh4.googleusercontent.com/-qMqSvtGluLU/AAAAAAAAAAI/AAAAAAAAABU/7JjCBdRxWzc/photo.jpg?sz=128", "display_name": "Jide Koso", "link": "https://stackoverflow.com/users/4719092/jide-koso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1380, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446731990, "creation_date": 1446666650, "last_edit_date": 1446667020, "question_id": 33530781, "link": "https://stackoverflow.com/questions/33530781/redis-loosing-connection-when-used-with-celery-groups-or-chain-throwing-error", "title": "Redis loosing connection when used with Celery groups or chain - throwing ERROR/MainProcess] Connection to Redis lost: Retry (0/20) now", "body": "<p>My problem is with redis showing the following error in terminal when i start my worker using celery task.</p>\n\n<p>I am lucky to have reproduce the error using a modified version of chord in <a href=\"http://docs.celeryproject.org/en/latest/userguide/canvas.html#chords\" rel=\"nofollow\">celery documentation</a>. It seems the problem happens with chord or where I have too many groups running in parallel i.e <code>chord(add.s(i, i) for i in range(1, num))(list_add.s())</code>  or <code>group(add.s(i, i) for i in range(1, num))()</code></p>\n\n<p>Below is my code sample</p>\n\n<pre><code>@task\ndef add(x, y):\n    return [x, y, x + y, \"Next\"]\n\n@task\ndef list_add(nums):\n    numbers = []\n    count = 1\n    for i in nums:\n        print(\"{}). {}\".format(count, i))\n        numbers.extend(i)\n        count += 1\n    print(numbers)\n    return numbers\n\n@task\ndef foo(num):\n    return chord(add.s(i, i) for i in range(1, num))(list_add.s())\n</code></pre>\n\n<p><strong>Below is part of my terminal output with traceback.</strong></p>\n\n<pre><code>    [2015-11-04 20:36:14,912: INFO/MainProcess] Received task: b2b.tasks.add[b87fdc44-e759-4224-bce4-11f9468d12b3]\n[2015-11-04 20:36:14,913: INFO/MainProcess] Received task: b2b.tasks.add[120f5bf2-b962-4424-894b-d6f0ca56102b]\n[2015-11-04 20:36:14,914: INFO/MainProcess] Task b2b.tasks.bar[9dc93c75-6404-4db3-a685-ff91460e1adb] succeeded in 1.00830382s: &lt;AsyncResult: c891df3e-aa5c-4c9f-ad3f-30abe3b3ccc1&gt;\n\n    [2015-11-04 19:44:34,922: ERROR/MainProcess] Connection to Redis lost: Retry (0/20) now.\n    [2015-11-04 19:44:34,922: ERROR/MainProcess] Connection to Redis lost: Retry (1/20) in 1.00 second.\n    ...\n    /Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/app/trace.py:365: RuntimeWarning: Exception raised outside body: ConnectionError('Error 8 connecting to localhost:6379. nodename nor servname provided, or not known.',):\n    Traceback (most recent call last):\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/app/trace.py\", line 235, in trace_task\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/backends/base.py\", line 256, in store_result\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/backends/base.py\", line 490, in _store_result\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/backends/redis.py\", line 160, in set\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/backends/redis.py\", line 149, in ensure\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/kombu/utils/__init__.py\", line 243, in retry_over_time\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/celery/backends/redis.py\", line 169, in _set\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/redis/client.py\", line 2593, in execute\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/redis/client.py\", line 2447, in _execute_transaction\n      File \"/Users/Me/.virtualenvs/djangoscrape/lib/python2.7/site-packages/redis/connection.py\", line 532, in send_packed_command\n      File \"/Users/Michael/.virtualenvs/djangoscrape/lib/python2.7/site-packages/redis/connection.py\", line 436, in connect\n    ConnectionError: Error 8 connecting to localhost:6379. nodename nor servname provided, or not known.\n</code></pre>\n\n<p>This is the command i use to start my worker in terminal\ncelery -A scraper worker -P eventlet -c 1000 -l info</p>\n\n<blockquote>\n  <p>It works fine when foo() is passed 20 but with 1000 or greater the\n  error shows up.</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; a = foo.delay(20)     # works \n&gt;&gt;&gt; a = foo.delay(1000)   # fails\n</code></pre>\n\n<p>Please, kindly suggest how this can be solved if you have an idea and thanks in advance.</p>\n"}, {"tags": ["python", "arrays", "numpy", "pandas"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 4, "creation_date": 1446667226, "post_id": 33530753, "comment_id": 54843317, "body": "relevant discussion on the numpy github tracker: <a href=\"https://github.com/numpy/numpy/issues/5604\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/issues/5604</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1446667522, "post_id": 33530753, "comment_id": 54843498, "body": "The situations described as false positives seem to be when an operation that &quot;creates a copy&quot; actually returns a view of a copy. If this is to be considered &quot;not a view&quot;, you might try checking the refcount of the array&#39;s <code>base</code> to see whether there are any other references to it, but that won&#39;t be perfect. I don&#39;t think it&#39;s possible to reliably detect this kind of thing."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 7, "creation_date": 1446667900, "post_id": 33530753, "comment_id": 54843728, "body": "Also see this recent SO question, <a href=\"http://stackoverflow.com/questions/33467477/how-to-find-all-variables-with-identical-id\" title=\"how to find all variables with identical id\">stackoverflow.com/questions/33467477/&hellip;</a>.  It mentions a new function, <code>np.shares_memory</code>.  But I streesed there that it&#39;s one thing to compare 2 known variables, quite another to ask is an array shares the data buffer with any other array."}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 1, "creation_date": 1453113476, "post_id": 33530753, "comment_id": 57444900, "body": "How about an numpy array a view onto which is created later, how do you want to treat that original array?"}, {"owner": {"reputation": 2653, "user_id": 2302819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf5893f02bececafb9e38ab618b0c91e?s=128&d=identicon&r=PG", "display_name": "nick_eu", "link": "https://stackoverflow.com/users/2302819/nick-eu"}, "edited": false, "score": 1, "creation_date": 1453319296, "post_id": 33530753, "comment_id": 57554075, "body": "For my purposes, original is ok to treat as &quot;not a view&quot;."}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 0, "creation_date": 1458911641, "post_id": 33530753, "comment_id": 60072594, "body": "My five cents: it is pointless to have a view with offset zero, default strides and a size computed from shape and itemsize that&#39;s equal to the size of the buffer. So anything having zero offset, default strides and a shape that matches the buffer is probably no view. Default strides given by:\t \t\t\tstrides = [itemsize]; \t\t\tfor dim in reversed (shape [1 : ]): \t\t\t\tstrides.insert (0, strides [0] * dim)"}], "answers": [{"tags": [], "owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1465251163, "creation_date": 1465251163, "answer_id": 37667661, "question_id": 33530753, "link": "https://stackoverflow.com/questions/33530753/numpy-reliable-non-conservative-indicator-if-numpy-array-is-view/37667661#37667661", "title": "numpy: Reliable (non-conservative) indicator if numpy array is view", "body": "<p>Depending on your usages, <code>flags['OWNDATA']</code> would do the job. \nIn fact, there's no problem with your link. <strong>It does not fail in some cases</strong>. It will always do what it's supposed to do. </p>\n\n<p>According to <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.require.html\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.require.html</a>: the flag \"ensure an array that owns its own data\". </p>\n\n<p>In your \"counterexample\", they use the code: </p>\n\n<pre><code>print (b.flags['OWNDATA'])  #False -- apparently this is a view\ne = np.ravel(b[:, 2])\nprint (e.flags['OWNDATA'])  #True -- Apparently this is a new numpy object.\n</code></pre>\n\n<p>But, it's the normal behaviour to be True in the second case. </p>\n\n<p>It comes from the definition of <code>ravel</code> (from <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.ravel.html\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.ravel.html</a>). </p>\n\n<blockquote>\n  <p>Return a contiguous flattened array.\n  A 1-D array, containing the elements of the input, is returned. A copy is made only if needed.</p>\n</blockquote>\n\n<p>Here, a copy is needed, so a copy is made. So, the variable e really owns its own data. It's not a \"view of b\", \"a reference to b\", \"an alias to a part of b\". It's a real new array that contains a copy of some elements of b. </p>\n\n<p>So, <strong>I think that it's impossible without tracking the entire origin of the data to detect that kind of behaviour</strong>. I believe you should be able to build your program with that flag. </p>\n"}], "owner": {"reputation": 2653, "user_id": 2302819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf5893f02bececafb9e38ab618b0c91e?s=128&d=identicon&r=PG", "display_name": "nick_eu", "link": "https://stackoverflow.com/users/2302819/nick-eu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 3, "answer_count": 1, "score": 46, "last_activity_date": 1465251163, "creation_date": 1446666538, "last_edit_date": 1495540491, "question_id": 33530753, "link": "https://stackoverflow.com/questions/33530753/numpy-reliable-non-conservative-indicator-if-numpy-array-is-view", "title": "numpy: Reliable (non-conservative) indicator if numpy array is view", "body": "<p>Looking for a way to reliably identify if a numpy object is a view. </p>\n\n<p>Related questions have come up many times before (<a href=\"https://stackoverflow.com/questions/11286864/is-there-a-way-to-check-if-numpy-arrays-share-the-same-data\">here</a>, <a href=\"https://stackoverflow.com/questions/10747748/how-do-i-check-that-two-slices-of-numpy-arrays-are-the-same-or-overlapping\">here</a>, <a href=\"https://stackoverflow.com/questions/28886731/numpy-reshape-on-view\">here</a>), and people have offered some solutions, but all seem to have problems:</p>\n\n<ul>\n<li>The test used in <code>pandas</code> now is to call something a view if <code>my_array.base is not None</code>. This seems to always catch views, but also offers lots of false positives (situations where it reports something is a view even if it isn't). </li>\n<li><code>numpy.may_share_memory()</code> will check for two specific arrays, but won't answer generically \n\n<ul>\n<li>(@RobertKurn says was best tool as of 2012 -- any changes?)</li>\n</ul></li>\n<li><code>flags['OWNDATA'])</code> is <a href=\"https://stackoverflow.com/questions/11524664/how-can-i-tell-if-numpy-creates-a-view-or-a-copy\">reported (third comment first answer)</a> to fail in some cases. </li>\n</ul>\n\n<p>(The reason for my interest is that I'm working on implementing copy-on-write for pandas, and a conservative indicator is leading to over-copying.)</p>\n"}, {"tags": ["python", "sorting"], "comments": [{"owner": {"reputation": 2614, "user_id": 907714, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/zi5h3.gif?s=128&g=1", "display_name": "postelrich", "link": "https://stackoverflow.com/users/907714/postelrich"}, "edited": false, "score": 0, "creation_date": 1446667784, "post_id": 33530725, "comment_id": 54843647, "body": "can you add a sample output showing what you want vs what you&#39;re getting?"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446667809, "post_id": 33530725, "comment_id": 54843669, "body": "can you please describe the problem a bit better? You mention two sets... where are they? What are they?"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446667981, "post_id": 33530725, "comment_id": 54843778, "body": "do you mean in &quot;xxxx-yyyy.jpg&quot; the x&#39;s and the y&#39;s form the two &quot;sets&quot; with which you want to sort? (I&#39;d call them keys). I assume the two keys must have be sorted in a different order or the second one (y&#39;s) must be sorted first, otherwise a simple ordering would do"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446668752, "post_id": 33530725, "comment_id": 54844189, "body": "it&#39;s still far from clear. Please provide an EXAMPLE. Read <a href=\"http://stackoverflow.com/help/mcve\">this</a>"}, {"owner": {"reputation": 31, "user_id": 5520613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851996f4934ad7a31aeabdd5821970b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom.H", "link": "https://stackoverflow.com/users/5520613/tom-h"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446669683, "post_id": 33530725, "comment_id": 54844723, "body": "@Pynchia I misunderstood the goal, I was operating under the assumption that both set of keys in each URL need to be alphabetized, but am now realizing this is not possible. So my next thought was, it must be the second set of keys that need to be alphabetized for this to work."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1446675589, "post_id": 33530725, "comment_id": 54847939, "body": "alright, see if my updated answer works"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5520613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851996f4934ad7a31aeabdd5821970b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom.H", "link": "https://stackoverflow.com/users/5520613/tom-h"}, "edited": false, "score": 1, "creation_date": 1446733782, "post_id": 33531265, "comment_id": 54873969, "body": "This is exactly what I needed, thank you for the assistance."}], "tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": true, "score": 1, "last_activity_date": 1446676354, "last_edit_date": 1446676354, "creation_date": 1446668447, "answer_id": 33531265, "question_id": 33530725, "link": "https://stackoverflow.com/questions/33530725/alphabetically-sorting-urls-to-download-image/33531265#33531265", "title": "Alphabetically sorting URLs to Download Image", "body": "<p>Given the urls end in the format \n<code>xxxx-yyyy.jpg</code></p>\n\n<p>and you want to sort the urls based on the second key, i.e. <code>yyyy</code></p>\n\n<pre><code>def read_urls(filename):\n    with open(filename) as f:\n        s = {el.rstrip() for el in f if 'puzzle' in el}\n    return sorted(s, key=lambda u: u[-8:-4]) # u[-13:-9] if need to sort on the first key\n</code></pre>\n\n<p>For example, with an input file containing</p>\n\n<pre><code>http://localhost/p-xxxx-yyyy.jpg\nhttp://code.google.com/edu/languages/google-python-class/images/puzzle/p-babf-bbac.jpg\nhttp://code.google.com/edu/languages/google-python-class/images/puzzle/p-babh-bajc.jpg\nhttp://localhost/p-xxxx-yyyy.jpg\n</code></pre>\n\n<p>it produces the list</p>\n\n<pre><code>['http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babh-bajc.jpg',\n 'http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babf-bbac.jpg']\n</code></pre>\n\n<p>i.e. <code>bajc</code> comes before <code>bbac</code>.</p>\n\n<p>See the comment in the code, in case you want to sort by the first key (<code>xxxx</code>)</p>\n"}], "owner": {"reputation": 31, "user_id": 5520613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851996f4934ad7a31aeabdd5821970b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom.H", "link": "https://stackoverflow.com/users/5520613/tom-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 1, "accepted_answer_id": 33531265, "answer_count": 1, "score": 2, "last_activity_date": 1446676354, "creation_date": 1446666445, "last_edit_date": 1446669533, "question_id": 33530725, "link": "https://stackoverflow.com/questions/33530725/alphabetically-sorting-urls-to-download-image", "title": "Alphabetically sorting URLs to Download Image", "body": "<p>Having an issue with the sorting of urls. The .jpg files end in \"xxxx-xxxx.jpg\". The second set of keys need to be sorted in alphabetical order. Thus far I've only been able to sort the first set of characters alphabetically (which is not necessary).</p>\n\n<p>For instance:</p>\n\n<p><a href=\"http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babf-bbac.jpg\" rel=\"nofollow\">http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babf-bbac.jpg</a></p>\n\n<p>is proceeding</p>\n\n<p><a href=\"http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babh-bajc.jpg\" rel=\"nofollow\">http://code.google.com/edu/languages/google-python-class/images/puzzle/p-babh-bajc.jpg</a></p>\n\n<p>when </p>\n\n<pre><code>#!/usr/bin/python\n# Copyright 2010 Google Inc.\n# Licensed under the Apache License, Version 2.0\n# http://www.apache.org/licenses/LICENSE-2.0\n\n# Google's Python Class\n# http://code.google.com/edu/languages/google-python-class/\n\nimport os\nimport re\nimport sys\nimport requests\n\n\"\"\"Logpuzzle exercise\nGiven an apache logfile, find the puzzle urls and download the images.\n\nHere's what a puzzle url looks like:\n10.254.254.28 - - [06/Aug/2007:00:13:48 -0700] \"GET /~foo/puzzle-bar-aaab.jpg HTTP/1.0\" 302 528 \"-\" \"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\"\n\"\"\"\n\ndef url_sort_key(url):\n    print url [-8:]\n#Extract the puzzle urls from inside a logfile\ndef read_urls(filename):\n    \"\"\"Returns a list of the puzzle urls from the given log file,\n    extracting the hostname from the filename itself.\n    Screens out duplicate urls and returns the urls sorted into\n    increasing order.\"\"\"\n    # +++your code here+++\n\n\n\n# Use open function to search fort the urls containing \"puzzle/p\"\n# Use a line split to pick out the 6th section of the filename\n# Sort out all repeated urls, and return sorted list\n    with open(filename) as f:\n        out = set()\n        for line in f:\n            if re.search(\"puzzle/p\", line):\n                url = \"http://code.google.com\" + line.split(\" \")[6]\n                print line.split(\" \")\n                out.add(url)\n    return sorted(list(out))\n\n\n\n# Complete the download_images function, which takes a sorted\n# list of urls and a directory\ndef download_images(img_urls, dest_dir):\n    \"\"\"Given the urls already in the correct order, downloads\n    each image into the given directory.\n    Gives the images local filenames img0, img1, and so on.\n    Creates an index.html in the directory\n    with an img tag to show each local image file.\n    Creates the directory if necessary.\n    \"\"\"\n    # ++your code here++\n    if not os.path.exists(dest_dir):\n        os.makedirs(dest_dir)\n\n    # Create an index\n    index = file(os.path.join(dest_dir, 'index.html'), 'w')\n    index.write('&lt;html&gt;&lt;body&gt;\\n')\n\n    i = 0\n    for img_url in img_urls:\n        i += 1\n        local_name = 'img%d' %i\n        print \"Retrieving...\", local_name\n        print local_name \n        print dest_dir\n        print img_url\n\n        response = requests.get(img_url)\n        if response.status_code == 200:\n            f = open(os.path.join(dest_dir,local_name + \".jpg\"), 'wb')\n            f.write(response.content)\n            f.close()\n\n        index.write ('&lt;img src=\"%s\"&gt;' % (local_name + \".jpg\"))\n\n\n    index.write('\\n&lt;/body&gt;&lt;/html&gt;\\n')\n    index.close()\n\ndef main():\n    args = sys.argv[1:]\n\n    print args\n    if not args:\n        print ('usage: [--todir dir] logfile ')\n        sys.exit(1)\n\n    todir = None\n    if args[0] == '--todir':\n        todir = args[1]\n        del args[0:2]\n\n\n    img_urls = read_urls(args[0])\n\n    if todir:\n        download_images(img_urls, todir)\n    else:\n        print ('\\n'.join(img_urls))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I think the error lies in the return for the read_urls function, but am not positive. </p>\n"}, {"tags": ["python", "pandas", "dataframe", "multi-index"], "answers": [{"comments": [{"owner": {"reputation": 2844, "user_id": 2831598, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9241f712f491b60d728824909e205cda?s=128&d=identicon&r=PG", "display_name": "tlnagy", "link": "https://stackoverflow.com/users/2831598/tlnagy"}, "edited": false, "score": 0, "creation_date": 1446780927, "post_id": 33540705, "comment_id": 54897232, "body": "This is convoluted, but it works, which was all I needed. Hopefully they make this simpler in the future."}], "tags": [], "owner": {"reputation": 4194, "user_id": 3026131, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/h5dWI.png?s=128&g=1", "display_name": "Nader Hisham", "link": "https://stackoverflow.com/users/3026131/nader-hisham"}, "is_accepted": true, "score": 1, "last_activity_date": 1446715332, "creation_date": 1446715332, "answer_id": 33540705, "question_id": 33530688, "link": "https://stackoverflow.com/questions/33530688/creating-multiple-new-columns-in-a-multiindexed-pandas-dataframe/33540705#33540705", "title": "Creating multiple new columns in a multiindexed pandas dataframe", "body": "<pre><code>In [270]:\ndf_to_add = pd.DataFrame(np.random.randn(3,2) , columns=[['bar2' , 'bar2'] , ['one' , 'two']] , index = [1 , 2 , 3])\ndf_to_add\nOut[270]:\n           bar2\n         one    two\n1   0.119730    -0.265579\n2   1.777329    -1.178128\n3   -2.700409   0.457430\n\nIn [271]:    \npd.concat([df , df_to_add] , axis = 1)\n</code></pre>\n"}], "owner": {"reputation": 2844, "user_id": 2831598, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9241f712f491b60d728824909e205cda?s=128&d=identicon&r=PG", "display_name": "tlnagy", "link": "https://stackoverflow.com/users/2831598/tlnagy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 33540705, "answer_count": 1, "score": 3, "last_activity_date": 1446718636, "creation_date": 1446666366, "last_edit_date": 1446718636, "question_id": 33530688, "link": "https://stackoverflow.com/questions/33530688/creating-multiple-new-columns-in-a-multiindexed-pandas-dataframe", "title": "Creating multiple new columns in a multiindexed pandas dataframe", "body": "<p>Is it possible to create more than one new column in Pandas when a dataframe is multiindexed? I would like to add a two new columns <code>one</code> and <code>two</code> under the <code>bar2</code> supercolumn. Like so...</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\narrays = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo'], \n          ['one', 'two', 'one', 'two', 'one', 'two']]   \n\nindex = pd.MultiIndex.from_arrays(arrays, names=['first', 'second'])\ndf = pd.DataFrame(np.random.randn(3, 6), index=[1, 2, 3], columns=index)\n\ndf[\"bar2\", [\"one\", \"two\"]] = np.random.randn(3, 2)\n</code></pre>\n\n<p>I know I can create them one by one using</p>\n\n<pre><code>df[\"bar2\", \"one\"] = np.random.randn(3,1)\ndf[\"bar2\", \"two\"] = np.random.randn(3,1)\n</code></pre>\n\n<p>Is there a quicker way of doing both at the same time?</p>\n"}, {"tags": ["python", "linux", "multithreading", "asynchronous", "tornado"], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 3168679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2krsP.png?s=128&g=1", "display_name": "ErezK", "link": "https://stackoverflow.com/users/3168679/erezk"}, "edited": false, "score": 0, "creation_date": 1446698757, "post_id": 33535454, "comment_id": 54854696, "body": "Thank you, Ben. That was a the kind of answer I was seeking."}], "tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": true, "score": 4, "last_activity_date": 1446689177, "creation_date": 1446689177, "answer_id": 33535454, "question_id": 33530673, "link": "https://stackoverflow.com/questions/33530673/logging-in-an-asynchronous-tornado-python-server/33535454#33535454", "title": "Logging in an asynchronous Tornado (python) server", "body": "<p>For \"normal\" logging (a few lines per request), I've always found logging directly to a file to be good enough. That may not be true if you're logging all the traffic to the server. The one time I've needed to do something like that I just captured the traffic externally with <code>tcpdump</code> instead of modifying my server.</p>\n\n<p>If you want to capture it in the process, start by just writing to a file from the main thread. As always, measure things in your own environment before taking drastic action (<code>IOLoop.set_blocking_log_threshold</code> is useful for determining if your logging is a problem).</p>\n\n<p>If writing from the main thread blocks for too long, you can either write to a queue that is processed by another thread, or write asynchronously to a pipe or socket to another process (syslog?). </p>\n"}, {"tags": [], "owner": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1583214686, "creation_date": 1583214686, "answer_id": 60500844, "question_id": 33530673, "link": "https://stackoverflow.com/questions/33530673/logging-in-an-asynchronous-tornado-python-server/60500844#60500844", "title": "Logging in an asynchronous Tornado (python) server", "body": "<blockquote>\n  <p>\" write asynchronously to a pipe or socket to another process\n  (syslog?\"</p>\n</blockquote>\n\n<p>How can it be? <code>log_request</code>is a normal function - not a coroutine and all default python handlers are not driven by asyncio event loop so they are not truly asynchronous. This is imho one of the factors that make Tornado less performant than ie. aiohttp. Writing to the memory or using udp is fast but it is not async anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 16763, "user_id": 2072035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e664749fc4faf8c7964ce44729a9cc?s=128&d=identicon&r=PG", "display_name": "saaj", "link": "https://stackoverflow.com/users/2072035/saaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1606079748, "last_edit_date": 1606079748, "creation_date": 1603917864, "answer_id": 64581015, "question_id": 33530673, "link": "https://stackoverflow.com/questions/33530673/logging-in-an-asynchronous-tornado-python-server/64581015#64581015", "title": "Logging in an asynchronous Tornado (python) server", "body": "<h2>Historic reference</h2>\n<p>I have ops experience from the time of the question circa 2016 with a Python 3.4 Tornado 4 application running on a decent bare-metal machine. The application interacted with few 3rd-party HTTP APIs, and logged some of the interactions for potential troubleshooting in the future (which is similar to OP's requirements). The machine had a RAID of HDDs. As far as I can recall the application wasn't high-traffic.</p>\n<p>Tornado 4 had its own IO loop implementation (Tornado 5+ uses <code>asyncio</code>'s now), and there was an interesting code instrumentation, controlled by <a href=\"https://www.tornadoweb.org/en/branch4.5/ioloop.html#tornado.ioloop.IOLoop.set_blocking_log_threshold\" rel=\"nofollow noreferrer\"><code>IOLoop.set_blocking_log_threshold</code></a>. Basically it logged a <code>WARNING</code> record with the stack trace whenever the loop was blocked longer than the <code>threshold</code> seconds. I can find a couple of screenshots from that time from the Sentry timeline for the very warning where the threshold was set to 1 second.</p>\n<p><a href=\"https://i.stack.imgur.com/ArEmH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ArEmH.png\" alt=\"before\" /></a></p>\n<p>Most of the warnings had stack traces ending on the logging file handler's flush.  It was a rotating and gzipping file handler. The later may explain what might take longer that a second, but anyway for the application it was desired to keep full responsibility over logging. The solution was the stdlib pair of <a href=\"https://docs.python.org/3/library/logging.handlers.html#queuehandler\" rel=\"nofollow noreferrer\"><code>logging.handlers.QueueHandler</code></a> and <a href=\"https://docs.python.org/3/library/logging.handlers.html#logging.handlers.QueueListener\" rel=\"nofollow noreferrer\"><code>logging.handlers.QueueListener</code></a>.</p>\n<p><a href=\"https://i.stack.imgur.com/ujlEl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ujlEl.png\" alt=\"after\" /></a></p>\n<h2>Logging queue</h2>\n<p>Python logging cookbook has a dedicated section on <a href=\"https://docs.python.org/3/howto/logging-cookbook.html#dealing-with-handlers-that-block\" rel=\"nofollow noreferrer\">Dealing with handlers that block</a>. Here's the example from it (where <code>listener.start</code> starts a thread that read off the queue and delegates the records to the <code>handler</code>):</p>\n<pre class=\"lang-py prettyprint-override\"><code>que = queue.Queue(-1)  # no limit on size\nqueue_handler = QueueHandler(que)\nhandler = logging.StreamHandler()\nlistener = QueueListener(que, handler)\nroot = logging.getLogger()\nroot.addHandler(queue_handler)\nformatter = logging.Formatter('%(threadName)s: %(message)s')\nhandler.setFormatter(formatter)\nlistener.start()\n# The log output will display the thread which generated\n# the event (the main thread) rather than the internal\n# thread which monitors the internal queue. This is what\n# you want to happen.\nroot.warning('Look out!')\nlistener.stop()\n</code></pre>\n<p>For a real-world reference of a <code>QueueHanlder</code> implementation that covers the edge cases, <a href=\"https://heptapod.host/saajns/chronologer/-/blob/25307aec/chronologer/client.py#L16\" rel=\"nofollow noreferrer\"><code>chronologer.client.QueueProxyHandler</code></a> can be used.</p>\n<h2><code>asyncio</code> instrumentation</h2>\n<p><code>asyncio</code> has a <a href=\"https://docs.python.org/3/library/asyncio-dev.html#asyncio-debug-mode\" rel=\"nofollow noreferrer\">debug mode</a>.</p>\n<blockquote>\n<p>By default asyncio runs in production mode. In order to ease the development asyncio has a debug mode. [...] When the debug mode is enabled:</p>\n<ul>\n<li>asyncio checks for coroutines that were not awaited and logs them; this\nmitigates the \u201cforgotten await\u201d pitfall.</li>\n<li>Many non-threadsafe asyncio APIs (such as <code>loop.call_soon()</code> and\n<code>loop.call_at() methods</code>) raise an exception if they are called from a\nwrong thread.</li>\n<li>The execution time of the I/O selector is logged if it takes too long to\nperform an I/O operation.</li>\n<li>Callbacks taking longer than 100ms are logged. The\n<code>loop.slow_callback_duration</code> attribute can be used to set the minimum\nexecution duration in seconds that is considered \u201cslow\u201d.</li>\n</ul>\n</blockquote>\n<p>It may look richer than what Tornado 4 had, but in fact it's not. First, it's not intended for production (and a pretty important metric is missing). Moreover, it's <a href=\"https://github.com/python/cpython/blob/41733209/Lib/asyncio/base_events.py#L1885\" rel=\"nofollow noreferrer\">an after the fact warning</a> without a stack trace, whereas Tornado's implementation was based on <code>signal.SIGALRM</code> and provided <a href=\"https://github.com/tornadoweb/tornado/blob/8e9e7550/tornado/ioloop.py#L348\" rel=\"nofollow noreferrer\">the stack trace at the threshold hit</a>.</p>\n<h2>For the curious</h2>\n<p>Have you noticed that the warnings didn't go away completely? But I can assure you that the logging issue was fixed. What caused these rare issues, to my surprise, was <a href=\"https://docs.python.org/3/library/uuid.html#uuid.uuid4\" rel=\"nofollow noreferrer\"><code>uuid.uuid4</code></a>, which can be blocking on a machine with empty entropy pool, but that's a another story.</p>\n<h2>Further reading</h2>\n<ul>\n<li><a href=\"https://groups.google.com/forum/#!topic/python-tulip/KTvZiJKvJnQ\" rel=\"nofollow noreferrer\">Python-tulip group discussion</a> between <code>asyncio</code> maintainers about\nasynchronous file IO, logging and <code>aiofiles</code> library</li>\n<li><a href=\"https://trio.readthedocs.io/en/latest/reference-io.html#asynchronous-filesystem-i-o\" rel=\"nofollow noreferrer\">A section in Trio documentation</a> that explains the theory and\ntrafeoffs behind async file I/O</li>\n</ul>\n"}], "owner": {"reputation": 512, "user_id": 3168679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2krsP.png?s=128&g=1", "display_name": "ErezK", "link": "https://stackoverflow.com/users/3168679/erezk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 33535454, "answer_count": 3, "score": 4, "last_activity_date": 1606079748, "creation_date": 1446666306, "question_id": 33530673, "link": "https://stackoverflow.com/questions/33530673/logging-in-an-asynchronous-tornado-python-server", "title": "Logging in an asynchronous Tornado (python) server", "body": "<p>I am working on an application in which I may potentially need to log the entire traffic reaching the server. This feature may be turned on or off, or may be used when exceptions are caught. </p>\n\n<p>In any case, I am concerned about the blocking nature of disk I/O operations and their impact on the performance of the server. The business logic that is applied when a request is handled (mostly POST http requests), is asynchronous in such that every network or db calls are asynchronously executed.</p>\n\n<p>On the other hand, I am concerned about the delay to the thread while it is waiting for the disk IO operation to complete. The logged messages can be a few bytes to a few KBs but in some cases a few MBs. There is no real need for the thread to pause while data is written to disk, the http request can definitely complete at that point and there is no reason that the ioloop thread not to work on another task while data is written to disk.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>am I over-worried about this issue? is logging to standard output\nand    later redirecting it to a file \"good enough\"?  </li>\n<li>what is the    common    approach, or the one you found most practical for logging    in    tornado-based applications? even for simple logging and not    the    (extreme) case I outlined above? </li>\n<li>is this basically an ideal case for    queuing the logging messages and consume them from a  dedicated    thread?  </li>\n<li>Say I do offload the logging to a different thread (like    Homer Simpson's \"Can't Someone Else Do It?\"), if the thread that    performs the disk logging is waiting for the disk io operation to    complete, does the linux kernel takes that point as an opportunity a    context switch?</li>\n</ol>\n\n<p>Any comments or suggestion are much appreciated, </p>\n\n<p>Erez </p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 6071, "user_id": 775523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6365b9820d16fa36ecb585cdaca5e3d9?s=128&d=identicon&r=PG", "display_name": "dbf", "link": "https://stackoverflow.com/users/775523/dbf"}, "edited": false, "score": 1, "creation_date": 1446669413, "post_id": 33531332, "comment_id": 54844560, "body": "thanks for you suggestions. I understand that it could be a lot of items to fix and already resolved a set of issues. But this one is a bit tricky because no debug output is provided."}, {"owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "reply_to_user": {"reputation": 6071, "user_id": 775523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6365b9820d16fa36ecb585cdaca5e3d9?s=128&d=identicon&r=PG", "display_name": "dbf", "link": "https://stackoverflow.com/users/775523/dbf"}, "edited": false, "score": 0, "creation_date": 1446669562, "post_id": 33531332, "comment_id": 54844654, "body": "@dbf Is the app that is causing the problem available for us to look at?"}, {"owner": {"reputation": 6071, "user_id": 775523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6365b9820d16fa36ecb585cdaca5e3d9?s=128&d=identicon&r=PG", "display_name": "dbf", "link": "https://stackoverflow.com/users/775523/dbf"}, "edited": false, "score": 1, "creation_date": 1446671162, "post_id": 33531332, "comment_id": 54845569, "body": "looks liek I solved this issue. It was an import (indirect) of the files where it was a setup for running as standalone script (with django.setup() call) - I used it for testing and forgot to remove it. It was fine for django 1.4 (where is was setup_environ), hang at 1.8 and error in 1.6 (that&#39;s how I found it). Thanks again for your suggestions!"}], "tags": [], "owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "is_accepted": true, "score": 1, "last_activity_date": 1446668722, "creation_date": 1446668722, "answer_id": 33531332, "question_id": 33530629, "link": "https://stackoverflow.com/questions/33530629/after-upgrade-to-django-1-8-runserver-hangs-at-startup/33531332#33531332", "title": "After upgrade to django 1.8 runserver hangs at startup", "body": "<p>Obviously, a lot has changed between those versions, so I doubt there is a simple change required. Here are some suggestions for making the upgrade path easier:</p>\n\n<ul>\n<li><p>Try running your app w/ intermediate versions to see when it starts hanging. That might give you a clue as to what needs to be changed. Also, you should start getting deprecation warnings as you increment versions.</p></li>\n<li><p>Try <a href=\"http://django-extensions.readthedocs.org/en/latest/runserver_plus.html\" rel=\"nofollow\"><code>runserver_plus</code></a> from <a href=\"https://github.com/django-extensions/django-extensions\" rel=\"nofollow\"><code>django-extensions</code></a> to potentially get some more feedback.</p></li>\n<li><p>Take a look at <a href=\"https://www.seedinvest.com/labs/backend/upgrading-from-django-1-4-to-django-1-7/\" rel=\"nofollow\">this post</a> about upgrading from 1.4 to 1.7.</p></li>\n<li><p><a href=\"https://openedx.atlassian.net/wiki/display/TNL/Django+Upgrade+1.4+to+1.8\" rel=\"nofollow\">Here</a> are some extensive notes from <a href=\"https://github.com/edx/edx-platform\" rel=\"nofollow\">the Open edX group</a> currently in the process of upgrading several apps from 1.4 to 1.8.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 970168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3ac8de0cdba5c5ea309275e3483c40?s=128&d=identicon&r=PG", "display_name": "victor", "link": "https://stackoverflow.com/users/970168/victor"}, "is_accepted": false, "score": 1, "last_activity_date": 1474363997, "creation_date": 1474363997, "answer_id": 39590556, "question_id": 33530629, "link": "https://stackoverflow.com/questions/33530629/after-upgrade-to-django-1-8-runserver-hangs-at-startup/39590556#39590556", "title": "After upgrade to django 1.8 runserver hangs at startup", "body": "<p>I had this issue. What solved it for me was:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': ':memory:',\n    },\n}\n</code></pre>\n\n<p>Kind regards.</p>\n"}], "owner": {"reputation": 6071, "user_id": 775523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6365b9820d16fa36ecb585cdaca5e3d9?s=128&d=identicon&r=PG", "display_name": "dbf", "link": "https://stackoverflow.com/users/775523/dbf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "accepted_answer_id": 33531332, "answer_count": 2, "score": 2, "last_activity_date": 1474363997, "creation_date": 1446666162, "question_id": 33530629, "link": "https://stackoverflow.com/questions/33530629/after-upgrade-to-django-1-8-runserver-hangs-at-startup", "title": "After upgrade to django 1.8 runserver hangs at startup", "body": "<p>I'm upgrading to django 1.8 from 1.4. After upgrade runserver works fine without my applications. But when I adds one of them to installed_apps it just hangs at startup.\nCommand:</p>\n\n<pre><code>C:\\Programs\\Python27\\python.exe C:/Projects/prj/django/django_projects/manage.py runserver localhost:8080 --verbosity=3\n</code></pre>\n\n<p>and no output is provided (even when I use verbosity=3). \nHere is a screenshot of procmon set up for python.exe <a href=\"http://clip2net.com/s/3pQPHSb\" rel=\"nofollow\">http://clip2net.com/s/3pQPHSb</a>\nIs there any ways to debug why it hangs?</p>\n\n<pre><code>10:39:23.9166574 PM python.exe  7420    QueryDirectory  C:\\Programs\\Python27\\Lib\\site-packages\\django\\db\\backends\\logging   NO SUCH FILE    Filter: logging\n10:39:23.9168061 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\db\\backends\\logging.pyd   NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:23.9169126 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\db\\backends\\logging.py    NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:23.9170179 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\db\\backends\\logging.pyw   NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:23.9171225 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\db\\backends\\logging.pyc   NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.0008918 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n10:39:24.0009480 PM python.exe  7420    QueryBasicInformationFile   C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS CreationTime: 3/21/2015 12:21:25 PM, LastAccessTime: 3/21/2015 12:21:26 PM, LastWriteTime: 3/21/2015 12:21:26 PM, ChangeTime: 3/21/2015 12:21:26 PM, FileAttributes: D\n10:39:24.0009873 PM python.exe  7420    CloseFile   C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS \n10:39:24.0201031 PM python.exe  7420    CreateFile  C:\\programs\\python27\\lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info\\namespace_packages.txt   NAME NOT FOUND  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a\n10:39:24.0612018 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n10:39:24.0612568 PM python.exe  7420    QueryBasicInformationFile   C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS CreationTime: 3/21/2015 12:21:25 PM, LastAccessTime: 3/21/2015 12:21:26 PM, LastWriteTime: 3/21/2015 12:21:26 PM, ChangeTime: 3/21/2015 12:21:26 PM, FileAttributes: D\n10:39:24.0612878 PM python.exe  7420    CloseFile   C:\\Programs\\Python27\\Lib\\site-packages\\django_loginas-0.1.5-py2.7.egg-info  SUCCESS \n10:39:24.3178297 PM python.exe  7420    CloseFile   C:\\Programs\\Python27\\Lib\\site-packages\\django\\utils\\log.py  SUCCESS \n10:39:24.3292991 PM python.exe  7420    QueryDirectory  C:\\Programs\\Python27\\Lib\\site-packages\\django\\middleware\\logging    NO SUCH FILE    Filter: logging\n10:39:24.3294485 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\middleware\\logging.pyd    NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.3295557 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\middleware\\logging.py NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.3296610 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\middleware\\logging.pyw    NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.3297664 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\middleware\\logging.pyc    NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.5965679 PM python.exe  7420    QueryDirectory  C:\\Programs\\Python27\\Lib\\site-packages\\django\\contrib\\sessions\\backends\\logging NO SUCH FILE    Filter: logging\n10:39:24.5967232 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\contrib\\sessions\\backends\\logging.pyd NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.5968351 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\contrib\\sessions\\backends\\logging.py  NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.5969426 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\contrib\\sessions\\backends\\logging.pyw NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n10:39:24.5970523 PM python.exe  7420    CreateFile  C:\\Programs\\Python27\\lib\\site-packages\\django\\contrib\\sessions\\backends\\logging.pyc NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n</code></pre>\n"}, {"tags": ["python", "csv", "numpy"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1446666488, "post_id": 33530608, "comment_id": 54842914, "body": "Are you asking &quot;How can I now write this into a new CSV file, &#39;newtable.csv&#39;?&quot; or are you asking &quot;Do I have to re-write the entire thing?&quot;  If the former, this is a duplicate of <a href=\"http://stackoverflow.com/questions/6081008/dump-a-numpy-array-into-a-csv-file\" title=\"dump a numpy array into a csv file\">stackoverflow.com/questions/6081008/&hellip;</a>. If the latter, the answer is &quot;yes&quot;."}, {"owner": {"reputation": 355, "user_id": 2962397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94e44603e7690e17038ca30256ae11a1?s=128&d=identicon&r=PG&f=1", "display_name": "user2962397", "link": "https://stackoverflow.com/users/2962397/user2962397"}, "edited": false, "score": 1, "creation_date": 1446666556, "post_id": 33530608, "comment_id": 54842950, "body": "I don&#39;t use numpy for csv read/write operations often but it&#39;s very simple to use pandas for this kind of thing. Consider using pandas for CSV read/write and tabular data manipulation."}, {"owner": {"reputation": 429, "user_id": 4797818, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4bd82f72740c09a1d896fde05777e6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JianguoHisiang", "link": "https://stackoverflow.com/users/4797818/jianguohisiang"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1446667004, "post_id": 33530608, "comment_id": 54843189, "body": "@Rob\u1d69 For the former, see my edit above."}, {"owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "edited": false, "score": 0, "creation_date": 1446671222, "post_id": 33530608, "comment_id": 54845608, "body": "Are you manipulating row-by-row of the CSV file, or the columns of the CSV? If row-by-row, you could just process/manipulate each row while reading the CSV, and write to a new file as you are done with each row. <code>Pandas</code> is definitely a great way to go - you could convert the 2D <code>numpy array</code> to a <code>DataFrame</code> and just go <code>.to_csv()</code>(see <a href=\"http://stackoverflow.com/questions/21938932/how-do-i-convert-a-numpy-array-into-a-pandas-dataframe\" title=\"how do i convert a numpy array into a pandas dataframe\">stackoverflow.com/questions/21938932/&hellip;</a> for converting to <code>DataFrame</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "is_accepted": true, "score": 2, "last_activity_date": 1446760283, "last_edit_date": 1446760283, "creation_date": 1446666598, "answer_id": 33530765, "question_id": 33530608, "link": "https://stackoverflow.com/questions/33530608/re-writing-a-csv-file-using-csv/33530765#33530765", "title": "Re-writing a CSV file using csv", "body": "<p>Yes, unless you are just appending to the end of the existing file, you will have to re-write the whole file for any changes you made to the contents.</p>\n\n<p><strong>Response after EDIT2:</strong></p>\n\n<p>For writing a 2D numpy array to CSV file, you can do the following.</p>\n\n<p>Let's say the 2D array you manipulated is now called <code>result_edited</code></p>\n\n<pre><code>with open('new_file.csv', 'wb') as toWrite:\n    writer = csv.writer(toWrite) # if the delimiter is ',', you don't need to specify\n\n    for row in result_edited:\n        writer.writerow(row)\n</code></pre>\n\n<p>You were mostly there!</p>\n\n<p>Alternatively, if each row is independent of each other when you manipulate, you can just read and write row-by-row. See below.</p>\n\n<pre><code>file_name_in = 'numeric_table.csv'\nfile_name_out = 'new_file.csv'\n\nwith open(file_name_in, 'rb') as f_in:\n    reader = csv.reader(f_in)\n\n    with open(file_name_out, 'wb') as f_out:\n        writer = csv.writer(f_out)\n\n        for row in reader:\n\n            # manipulate row, change numbers, etc.\n\n            writer.writerow(row) # Write row to new file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "is_accepted": false, "score": 0, "last_activity_date": 1446763129, "creation_date": 1446763129, "answer_id": 33556141, "question_id": 33530608, "link": "https://stackoverflow.com/questions/33530608/re-writing-a-csv-file-using-csv/33556141#33556141", "title": "Re-writing a CSV file using csv", "body": "<p>Convert the numpy array with result.tolist(). This outputs a Python list. After that, you can write the rows.</p>\n\n<pre><code>with open(\"new_file.csv\", \"w\") as toWrite:\n    writer = csv.writer(toWrite, delimiter=\",\")\n    resultList = result.tolist()\n    writer.writerows(resultList)\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 4797818, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4bd82f72740c09a1d896fde05777e6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JianguoHisiang", "link": "https://stackoverflow.com/users/4797818/jianguohisiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 33530765, "answer_count": 2, "score": 0, "last_activity_date": 1446763129, "creation_date": 1446666094, "last_edit_date": 1446667676, "question_id": 33530608, "link": "https://stackoverflow.com/questions/33530608/re-writing-a-csv-file-using-csv", "title": "Re-writing a CSV file using csv", "body": "<p>I opened as CSV file, converted the contents to a numpy array, and then manipulated the arrays. How can I now write this into a new CSV file, 'newtable.csv'?</p>\n\n<pre><code>file_name = \"table.csv\" \n\nimport numpy as np\n\nreader=csv.reader(open(\"table.csv\",\"rb\"),delimiter=',')\nx=list(reader)\nresult=np.array(x).astype('str') # convert to numpy array\n</code></pre>\n\n<p>I somehow should use</p>\n\n<pre><code>writer = csv.writer(open('newtable.csv', 'wb'), delimiter=',')\n</code></pre>\n\n<p>However, I did not change the overall structure of the CSV file; I still use the same sizes of columns and rows. (I only changed a few numbers) Do I have to re-write the entire thing? </p>\n\n<p>EDIT: In the case of a numpy array, how would I re-write the entire thing? The problem with <code>np.savetxt(\"foo.csv\", result, delimiter=\",\")</code> is that it is not the correct format. One must work with a format specifier somehow.</p>\n\n<p>EDIT2: I should somehow use <code>writerow()</code> but I'm not sure the best way to do this. I have a numpy array shaped (700,12), so that's 12 \"columns\" of 700 row entries, and the \"title\" already exists.</p>\n\n<pre><code>with open(\"new_file.csv\", \"w\") as toWrite:\n    writer = csv.writer(toWrite, delimiter=\",\")\n    writer.writerow([.....])\n</code></pre>\n"}]