[{"tags": ["python", "unit-testing", "mocking"], "answers": [{"tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": true, "score": 1, "last_activity_date": 1497488019, "last_edit_date": 1497488019, "creation_date": 1497487053, "answer_id": 44556766, "question_id": 44556468, "link": "https://stackoverflow.com/questions/44556468/python-mocks-in-unittests/44556766#44556766", "title": "Python: mocks in unittests", "body": "<p>There are two main problems that you are facing here. The primary issue that is raising the current problem you are experiencing is because of <em>how</em> you are actually mocking. Now, since you are actually patching the <code>object</code> for <code>ConcreteClient</code>, you want to make sure that you are still using the <em>real</em> ConcreteClient but <em>mocking</em> the attributes of the <em>instance</em> that you want to mock when testing. You can actually see this illustration in the documentation. Unfortunately there is no explicit anchor for the exact line, but if you follow this link: </p>\n\n<p><a href=\"https://docs.python.org/3/library/unittest.mock-examples.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/unittest.mock-examples.html</a></p>\n\n<p>The section that states:</p>\n\n<blockquote>\n  <p>Where you use patch() to create a mock for you, you can get a\n  reference to the mock using the \u201cas\u201d form of the with statement:</p>\n</blockquote>\n\n<p>The code in reference is: </p>\n\n<pre><code>class ProductionClass:\n    def method(self):\n        pass\n\nwith patch.object(ProductionClass, 'method') as mock_method:\n    mock_method.return_value = None\n    real = ProductionClass()\n    real.method(1, 2, 3)\n\nmock_method.assert_called_with(1, 2, 3)\n</code></pre>\n\n<p>The critical item to notice here is how the everything is being called. Notice that the real instance of the class is created. In your example, when you are doing this: </p>\n\n<pre><code>self.client = Mock(ConcreteClient)\n</code></pre>\n\n<p>You are creating a <code>Mock</code> object that is <em>specced</em> on ConcreteClient. So, ultimately this is just a <code>Mock</code> object that holds the attributes for your <code>ConcreteClient</code>. You will not actually be holding the <em>real</em> instance of <code>ConcreteClient</code>. </p>\n\n<p>To solve this problem. simply create a <em>real</em> instance after you patch your object. Also, to make your life easier so you don't have to manually start/stop your patch.object, use the context manager, it will save you a lot of hassle.</p>\n\n<p>Finally, your second problem, is your <code>return_value</code>. Your <code>return_value</code> is actually returning the <em>uncalled</em> <code>my_fake_data</code> function. You actually want the data itself, so it needs to be the <em>return</em> of that function. You could just put the data itself as your <code>return_value</code>. </p>\n\n<p>With these two corrections in mind, your test should now just look like this: </p>\n\n<pre><code>class ConcreteClientTest(unittest.TestCase):\n\n    def test_calculate(self):\n\n        with patch.object(ConcreteClient, 'get_some_basic_data',\n                     return_value=[{\"key1\": \"val1\"}, {\"key2\": \"val2\"}]):\n\n            concrete_client = ConcreteClient(Mock())\n            result = concrete_client.calculate()\n\n        self.assertEqual(\n            result,\n            [{\"key1\": \"val1\"}, {\"key2\": \"val2\"}]\n        )\n</code></pre>\n\n<p>I took the liberty of actually returning the result of <code>get_some_basic_data</code> in <code>calculate</code> just to have something to compare to. I'm not sure what your <em>real</em> code looks like. But, ultimately, the structure of your test in how you should be doing this, is illustrated above. </p>\n"}], "owner": {"reputation": 1537, "user_id": 7335432, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/70ec944d7d27c980c772c78b4df4c26f?s=128&d=identicon&r=PG&f=1", "display_name": "smart", "link": "https://stackoverflow.com/users/7335432/smart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 44556766, "answer_count": 1, "score": 1, "last_activity_date": 1497488019, "creation_date": 1497484700, "question_id": 44556468, "link": "https://stackoverflow.com/questions/44556468/python-mocks-in-unittests", "title": "Python: mocks in unittests", "body": "<p>I have situation similar to:</p>\n\n<pre><code>class BaseClient(object):\n    def __init__(self, api_key):\n        self.api_key = api_key\n        # Doing some staff.\n\nclass ConcreteClient(BaseClient):\n    def get_some_basic_data(self):\n        # Doing something.\n\n    def calculate(self):\n        # some staff here\n        self.get_some_basic_data(param)\n        # some calculations\n</code></pre>\n\n<p>Then I want to test <code>calculate</code> function using mocking of <code>get_some_basic_data</code> function.</p>\n\n<p>I'm doing something like this:</p>\n\n<pre><code>import unittest\nfrom my_module import ConcreteClient\n\ndef my_fake_data(param):\n    return [{\"key1\": \"val1\"}, {\"key2\": \"val2\"}]\n\nclass ConcreteClientTest(unittest.TestCase):\n    def setUp(self):\n        self.client = Mock(ConcreteClient)\n\n    def test_calculate(self):\n\n        patch.object(ConcreteClient, 'get_some_basic_data',\n                     return_value=my_fake_data).start()\n        result = self.client.calculate(42)\n</code></pre>\n\n<p>But it doesn't work as I expect.. As I thought, <code>self.get_some_basic_data(param)</code> returns my list from <code>my_fake_data</code> function, but it looks like it's still an Mock object, which is not expected for me.</p>\n\n<p>What is wrong here?</p>\n"}, {"tags": ["python", "numpy", "generator", "keras", "reshape"], "comments": [{"owner": {"reputation": 3102, "user_id": 5212031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbccafc3ff04779a5e90bac1c4d29ea9?s=128&d=identicon&r=PG", "display_name": "Uvar", "link": "https://stackoverflow.com/users/5212031/uvar"}, "edited": false, "score": 0, "creation_date": 1498757649, "post_id": 44556463, "comment_id": 76643646, "body": "The expensive duct tape is to flatten. in1_x = in1_x.flatten() etc. as your encoder seems to return a 2D array."}, {"owner": {"reputation": 1058, "user_id": 1721793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BnuBU.png?s=128&g=1", "display_name": "sashimi", "link": "https://stackoverflow.com/users/1721793/sashimi"}, "edited": false, "score": 0, "creation_date": 1499348190, "post_id": 44556463, "comment_id": 76876017, "body": "We are facing the same problem. To flatten does not make a difference - it provides the same shape as without flattening. From our experience, we invoke the generator and evaluate shapes, and receive the expected one: x, y = my_generator.next() print(&quot;next[x]: {}&quot;.format(x.shape))#shape is (517,) in our case, but when feeding, we get the error &quot;expected main_input to have shape (None, 517) but got array with shape (517, 1)&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1058, "user_id": 1721793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BnuBU.png?s=128&g=1", "display_name": "sashimi", "link": "https://stackoverflow.com/users/1721793/sashimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1499350706, "creation_date": 1499350706, "answer_id": 44951533, "question_id": 44556463, "link": "https://stackoverflow.com/questions/44556463/shape-issue-with-keras-fit-generator/44951533#44951533", "title": "Shape issue with keras `fit_generator()`", "body": "<p>We found a response to this issue. Please check the explanation and comments at the following PR: <a href=\"https://github.com/fchollet/keras/issues/4641\" rel=\"nofollow noreferrer\">https://github.com/fchollet/keras/issues/4641</a>\nProviding a 2D array solved the issue for us.</p>\n"}], "owner": {"reputation": 3032, "user_id": 1486196, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/208f40e089107b8150bc72cad744ce7c?s=128&d=identicon&r=PG", "display_name": "chase", "link": "https://stackoverflow.com/users/1486196/chase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 1, "accepted_answer_id": 44951533, "answer_count": 1, "score": 1, "last_activity_date": 1499350706, "creation_date": 1497484651, "question_id": 44556463, "link": "https://stackoverflow.com/questions/44556463/shape-issue-with-keras-fit-generator", "title": "Shape issue with keras `fit_generator()`", "body": "<p>I am having a seemingly simple issue with the shape of the numpy arrays returned from a custom generator function I am using within keras's <code>fit_generator</code> function.</p>\n\n<p>The generator function is similar to this:</p>\n\n<pre><code>def data_generator(full_data, encoder):\n    for s in full_data:\n        in1_X = encoder.encode(s[:,0])\n        in2_X = encoder.encode(s[:,1])\n        out1_y = encoder.encode(s[:,2])\n        out2_y = encoder.encode(s[:,3])\n        X = [in1_X, in2_X]\n        y = [out1_y, out2_y]\n        yield (X,y)\n</code></pre>\n\n<p>I can get the shape returned from in1_X by using a for loop and printing the shape, which simply returns <code>(60,)</code></p>\n\n<p>However, when calling this using the <code>fit_generator()</code> function, it fails:</p>\n\n<pre><code>train_data_gen = data_generator(full_data, encoder)\n\n\nmain_in = Input(shape=(seq_len,), name='main_input')\n\n# ...\n# define model\n# ...\n\njoint_model.fit_generator(train_data_gen, steps_per_epoch=2000, epochs=2)\n</code></pre>\n\n<p>from which the output is this:</p>\n\n<pre><code>Error when checking input: \nexpected main_input to have shape (None, 60) but got array with shape (60, 1)\n</code></pre>\n\n<p>How can I get this to not change the numpy array from shape <code>(60,)</code> to shape <code>(60, 1)</code>?  Has anyone else had this issue?</p>\n"}, {"tags": ["python", "email", "datetime", "python-3.6"], "comments": [{"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1497485247, "post_id": 44556428, "comment_id": 76103483, "body": "What do you want to happen? That date is set to <code>None</code>? Or something else?"}, {"owner": {"reputation": 5446, "user_id": 4193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8c76a3f7c799c8b9d7c3967e5e374331?s=128&d=identicon&r=PG", "display_name": "TimB", "link": "https://stackoverflow.com/users/4193/timb"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1497488506, "post_id": 44556428, "comment_id": 76104144, "body": "Yes, I&#39;d expect parsedate_to_datetime to return <code>None</code>, which would then be stored as the <code>datetime</code> attribute on the UniqueDateHeader object."}, {"owner": {"reputation": 5446, "user_id": 4193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8c76a3f7c799c8b9d7c3967e5e374331?s=128&d=identicon&r=PG", "display_name": "TimB", "link": "https://stackoverflow.com/users/4193/timb"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1497489241, "post_id": 44556428, "comment_id": 76104287, "body": "Also, the <code>DateHeader</code> class would need to modified slightly to register a defect, and not then try to further process the value returned from parsedate_to_datetime (since it would be <code>None</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 5446, "user_id": 4193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8c76a3f7c799c8b9d7c3967e5e374331?s=128&d=identicon&r=PG", "display_name": "TimB", "link": "https://stackoverflow.com/users/4193/timb"}, "is_accepted": false, "score": 0, "last_activity_date": 1497503526, "creation_date": 1497503526, "answer_id": 44559023, "question_id": 44556428, "link": "https://stackoverflow.com/questions/44556428/email-with-invalid-hour-in-date-header-throws-exception/44559023#44559023", "title": "Email with invalid hour in date header throws exception", "body": "<p>Here's the workaround I've gone with for now:</p>\n\n<pre><code>from email import policy\nfrom email import errors\nfrom email import _header_value_parser as parser\nfrom email.headerregistry import HeaderRegistry, DateHeader\n\n\nclass DateHeaderRobust(DateHeader):\n    \"\"\"\n    Copied and updated from email/headerregistry.py to handle\n    ValueError returned by parsedate_to_datetime when a date header\n    has an invalid hour value (outside 0..23)\n    \"\"\"\n\n    @classmethod\n    def parse(cls, value, kwds):\n        try:\n            super().parse(value, kwds)\n        except ValueError:\n            kwds['defects'].append(\n                errors.InvalidHeaderDefect('Invalid value in date'))\n            kwds['datetime'] = None\n            kwds['decoded'] = value\n            kwds['parse_tree'] = parser.TokenList()\n\n\nclass UniqueDateHeader(DateHeaderRobust):\n    max_count = 1\n\n\nheader_factory = HeaderRegistry()\nheader_factory.map_to_type('date', UniqueDateHeader)\n\nemail_policy = policy.default.clone(header_factory=header_factory)\n</code></pre>\n\n<p>And then when reading a message (e.g. with <code>email.message_from_binary_file)</code>, using <code>policy=email_policy</code> as a kwarg.</p>\n"}], "owner": {"reputation": 5446, "user_id": 4193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8c76a3f7c799c8b9d7c3967e5e374331?s=128&d=identicon&r=PG", "display_name": "TimB", "link": "https://stackoverflow.com/users/4193/timb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497568522, "creation_date": 1497484469, "last_edit_date": 1497568522, "question_id": 44556428, "link": "https://stackoverflow.com/questions/44556428/email-with-invalid-hour-in-date-header-throws-exception", "title": "Email with invalid hour in date header throws exception", "body": "<p>Using Python 3.5 or 3.6, after loading an email with an invalid hour in the date header with the <code>email</code> package, attempting to access the <code>date</code> header throws a <code>ValueError</code> exception:</p>\n\n<pre><code>&gt;&gt;&gt; import email\n&gt;&gt;&gt; from email import policy\n&gt;&gt;&gt; m = email.message_from_binary_file(open('bad_date.txt', 'rb'), policy=policy.default)\n&gt;&gt;&gt; m['date']\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python3.6/email/message.py\", line 391, in __getitem__\n    return self.get(name)\n  File \"/usr/lib/python3.6/email/message.py\", line 471, in get\n    return self.policy.header_fetch_parse(k, v)\n  File \"/usr/lib/python3.6/email/policy.py\", line 162, in header_fetch_parse\n    return self.header_factory(name, value)\n  File \"/usr/lib/python3.6/email/headerregistry.py\", line 586, in __call__\n    return self[name](name, value)\n  File \"/usr/lib/python3.6/email/headerregistry.py\", line 197, in __new__\n    cls.parse(value, kwds)\n  File \"/usr/lib/python3.6/email/headerregistry.py\", line 303, in parse\n    value = utils.parsedate_to_datetime(value)\n  File \"/usr/lib/python3.6/email/utils.py\", line 214, in parsedate_to_datetime\n    tzinfo=datetime.timezone(datetime.timedelta(seconds=tz)))\nValueError: hour must be in 0..23\n</code></pre>\n\n<p>This is the header from the email:</p>\n\n<pre><code>Date: Tue, 06 Jun 2017 27:39:33 +0600\n</code></pre>\n\n<p>(I'm analysing spam emails, and someone's spam sending program doesn't seem to understand how timezone conversions work. I've also seen negative hours...)</p>\n\n<p>The <code>email</code> package is designed to cope with issues encountered while parsing emails by registering them as defects, so in this case, throwing an exception seems to be the wrong outcome.</p>\n\n<p>I could try to update the default <code>header_factory</code> that's part of the <code>default</code> policy to deal with this situation, but it seems more like a bug in Python that <code>parsedate_to_datetime</code> behaves this way. (Apparently this behaviour is <a href=\"https://bugs.python.org/msg170558\" rel=\"nofollow noreferrer\">on purpose</a>.)</p>\n\n<p>UPDATE: I've raised this as a <a href=\"https://bugs.python.org/issue30681\" rel=\"nofollow noreferrer\">Python bug</a></p>\n"}, {"tags": ["python", "scipy"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1497484001, "post_id": 44556307, "comment_id": 76103199, "body": "So you just copied the command and put into a script, then ran it? Does it consistently return the same output for each way?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1497484266, "post_id": 44556307, "comment_id": 76103270, "body": "I checked the <a href=\"https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.optimize.linprog.html\" rel=\"nofollow noreferrer\">docs</a>, and the output listed there matches the output you say you got, not the output you say is in the docs. What docs are you looking at?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1497484375, "post_id": 44556307, "comment_id": 76103301, "body": "Going back to an <a href=\"https://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.optimize.linprog.html\" rel=\"nofollow noreferrer\">older version of the docs</a> shows the output you say is in the docs. This is probably a documentation error that got fixed."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7944728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40cdf857e493160b6b36273aa4e37d9c?s=128&d=identicon&r=PG&f=1", "display_name": "RandoDoe", "link": "https://stackoverflow.com/users/7944728/randodoe"}, "edited": false, "score": 0, "creation_date": 1497492695, "post_id": 44556426, "comment_id": 76105033, "body": "Thanks!  much obliged"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1497484458, "creation_date": 1497484458, "answer_id": 44556426, "question_id": 44556307, "link": "https://stackoverflow.com/questions/44556307/scipy-linprog-output-does-not-match-docs/44556426#44556426", "title": "scipy linprog output does not match docs", "body": "<p>This is a documentation error that <a href=\"https://github.com/scipy/scipy/issues/4438\" rel=\"nofollow noreferrer\">got fixed</a>. (It needs a bit more fixing, because they forgot to update the value in the note under the code example.)</p>\n"}], "owner": {"reputation": 15, "user_id": 7944728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40cdf857e493160b6b36273aa4e37d9c?s=128&d=identicon&r=PG&f=1", "display_name": "RandoDoe", "link": "https://stackoverflow.com/users/7944728/randodoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 44556426, "answer_count": 1, "score": 0, "last_activity_date": 1497484458, "creation_date": 1497483610, "question_id": 44556307, "link": "https://stackoverflow.com/questions/44556307/scipy-linprog-output-does-not-match-docs", "title": "scipy linprog output does not match docs", "body": "<p>I tried reproducing the <code>scipy.optimize.linprog</code> example code, pasted below from the docs:</p>\n\n<pre><code>&gt;&gt;&gt; c = [-1, 4]\n&gt;&gt;&gt; A = [[-3, 1], [1, 2]]\n&gt;&gt;&gt; b = [6, 4]\n&gt;&gt;&gt; x0_bounds = (None, None)\n&gt;&gt;&gt; x1_bounds = (-3, None)\n&gt;&gt;&gt; res = linprog(c, A_ub=A, b_ub=b, bounds=(x0_bounds, x1_bounds),\n...               options={\"disp\": True})\n&gt;&gt;&gt; print(res)\nOptimization terminated successfully.\n     Current function value: -11.428571\n     Iterations: 2\nstatus: 0\nsuccess: True\nfun: -11.428571428571429\nx: array([-1.14285714,  2.57142857])\nmessage: 'Optimization terminated successfully.'\nnit: 2\n</code></pre>\n\n<p>However, I actually get the following output when I run this:</p>\n\n<pre><code>Optimization terminated successfully.\n         Current function value: -22.000000  \n         Iterations: 1\n     fun: -22.0\n message: 'Optimization terminated successfully.'\n     nit: 1\n   slack: array([ 39.,   0.])\n  status: 0\n success: True\n       x: array([ 10.,  -3.])\n</code></pre>\n\n<p>The solution on my computer seems correct, so I am wondering why the divergence. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1497483994, "last_edit_date": 1497483994, "creation_date": 1497483832, "answer_id": 44556337, "question_id": 44556300, "link": "https://stackoverflow.com/questions/44556300/shortening-my-and-or-code-using-parentheses/44556337#44556337", "title": "shortening my &#39;and/or&#39; code using parentheses", "body": "<p>You are correct.</p>\n\n<p>In mathematical notation, the following equation would hold:</p>\n\n<pre><code>(A \u2227 B) \u2228 (A \u2227 C) \u2228 (A \u2227 D) = A \u2227 (B \u2228 C \u2228 D)\n</code></pre>\n\n<p>That is usually called normalization as CNF or DNF form.</p>\n"}, {"comments": [{"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497489499, "post_id": 44556362, "comment_id": 76104351, "body": "Actually, in programming, it is mostly better to do the maths than to brute force correlations."}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 1, "creation_date": 1497530819, "post_id": 44556362, "comment_id": 76124339, "body": "@Uriel ok, then how do you prove you&#39;re doing the math correctly <b>and</b> that your language implements it correctly ?"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497531369, "post_id": 44556362, "comment_id": 76124733, "body": "A language implements maths correctly (considered it is defined to), because a language is just a bunch of rules and syntax. If you&#39;re doubting whether the CPython implementation (that&#39;s what you use) implements is correctly, rest assured, that&#39;s an open source one maintained by expert devs, mathmaticians and people that messed with compilers and interpreters for years. If I question them for that stuff, I might as well reinvent the wheel."}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1497531432, "post_id": 44556362, "comment_id": 76124766, "body": "I&#39;d say that working out the better formulation is &quot;doing the math&quot;"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1497531522, "post_id": 44556362, "comment_id": 76124822, "body": "@Baldrickk work it out using boolean logic <a href=\"https://en.wikipedia.org/wiki/Conjunctive_normal_form\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Conjunctive_normal_form</a>"}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1497531546, "post_id": 44556362, "comment_id": 76124835, "body": "and that&#39;s not math?"}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497531602, "post_id": 44556362, "comment_id": 76124871, "body": "@Uriel ok, let&#39;s admit cpython is perfect. It still does not prove you doing the math correctly. Only a truth table proves it. Plus it is so easy to built it using the language."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497531669, "post_id": 44556362, "comment_id": 76124913, "body": "I did. Go into the wikipedia I posted, section <code>Conversion into CNF</code>."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497531724, "post_id": 44556362, "comment_id": 76124952, "body": "And just for your reference, in python you can just <code>all((a, b, c, d, (a and b) or (a and c) or (a and d) == a and (b or c or d)) for a, b, c, d in itertools.product([True, False], repeat=4))</code> instead of fancy formatting"}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497532009, "post_id": 44556362, "comment_id": 76125182, "body": "@Uriel, one can state anything on wikipedia. CNF has been proven, with truth table."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497532115, "post_id": 44556362, "comment_id": 76125258, "body": "&quot;CNF has been proven&quot; what does that mean? cpython implements boolean logics, not otherwise. CNF is just a form, it can&#39;t be proven and dont need to be."}, {"owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1497538991, "post_id": 44556362, "comment_id": 76130571, "body": "@Uriel, you&#39;re right, reading <a href=\"https://en.wikipedia.org/wiki/Boolean_algebra_%28structure%29#Definition\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> and other articles, distributivity in Boolean algebra is an axiom and not a theorem. And thus, has not to be proven. The truth table I proposed just proves that python implementation is correct. Sorry for that."}], "tags": [], "owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "is_accepted": false, "score": 0, "last_activity_date": 1497531056, "last_edit_date": 1497531056, "creation_date": 1497484002, "answer_id": 44556362, "question_id": 44556300, "link": "https://stackoverflow.com/questions/44556300/shortening-my-and-or-code-using-parentheses/44556362#44556362", "title": "shortening my &#39;and/or&#39; code using parentheses", "body": "<p>Boolean logic  says it is equivalent. \nBut a better approach would be \"test driven development\" : first write tests of all possible results. Then run them against your first implementation and then against your refactored implementation. </p>\n\n<p>Update, based on Cireo's answer :</p>\n\n<pre><code>import itertools\nfor a, b, c, d in itertools.product([True, False], repeat=4):\n    print('%5s | %5s | %5s | %5s || %5s || %5s') % (a, b, c, d, (a and b) or (a and c) or (a and d), a and (b or c or d))\n\n True |  True |  True |  True ||  True ||  True\n True |  True |  True | False ||  True ||  True\n True |  True | False |  True ||  True ||  True\n True |  True | False | False ||  True ||  True\n True | False |  True |  True ||  True ||  True\n True | False |  True | False ||  True ||  True\n True | False | False |  True ||  True ||  True\n True | False | False | False || False || False\nFalse |  True |  True |  True || False || False\nFalse |  True |  True | False || False || False\nFalse |  True | False |  True || False || False\nFalse |  True | False | False || False || False\nFalse | False |  True |  True || False || False\nFalse | False |  True | False || False || False\nFalse | False | False |  True || False || False\nFalse | False | False | False || False || False\n</code></pre>\n\n<p>There it is proved that the two statements are equivalent for all values of all variables.</p>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 0, "last_activity_date": 1497484050, "creation_date": 1497484050, "answer_id": 44556376, "question_id": 44556300, "link": "https://stackoverflow.com/questions/44556300/shortening-my-and-or-code-using-parentheses/44556376#44556376", "title": "shortening my &#39;and/or&#39; code using parentheses", "body": "<p>Yes!  As Uriel mentions, this is mathematically sound. Furthermore, you have already noticed that the notation is supported in python.  The below truth table shows that it is also evaluated as expected:</p>\n\n<pre><code>&gt;&gt;&gt; for a, b, c in itertools.product([True, False], repeat=3):\n...   print('%5s | %5s | %5s || %5s') % (a, b, c, (a or b or c))\n... \n True |  True |  True ||  True\n True |  True | False ||  True\n True | False |  True ||  True\n True | False | False ||  True\nFalse |  True |  True ||  True\nFalse |  True | False ||  True\nFalse | False |  True ||  True\nFalse | False | False || False\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8158526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc839cdd9221144d519804333854cbab?s=128&d=identicon&r=PG&f=1", "display_name": "user8158526", "link": "https://stackoverflow.com/users/8158526/user8158526"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1510681872, "creation_date": 1497483556, "last_edit_date": 1510681872, "question_id": 44556300, "link": "https://stackoverflow.com/questions/44556300/shortening-my-and-or-code-using-parentheses", "title": "shortening my &#39;and/or&#39; code using parentheses", "body": "<p>I want to shorten this code:</p>\n\n<pre><code>if (a+b+c == 1000 and a**2 + b**2 == c**2) or (a+b+c == 1000 and a**2 + c**2 == b**2) or (a+b+c == 1000 and b**2 + c**2 == a**2)\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>if a+b+c == 1000 and (a**2 + b**2 == c**2 or a**2 + c**2 == b**2 or b**2 + c**2 == a**2)\n</code></pre>\n\n<p>or to be more simple:</p>\n\n<pre><code>(A and B) or (A and C) or (A and D) &lt;=&gt; A and (B or C or D)\n</code></pre>\n\n<p>Is this reasonable? It seems to work when I run the code, but I'm not sure it's the proper way. Is there a better way to shorten this?</p>\n"}, {"tags": ["python", "forms", "google-app-engine", "session"], "comments": [{"owner": {"reputation": 402, "user_id": 2539116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KTlYg.jpg?s=128&g=1", "display_name": "Rad Apdal", "link": "https://stackoverflow.com/users/2539116/rad-apdal"}, "edited": false, "score": 0, "creation_date": 1497489266, "post_id": 44556282, "comment_id": 76104294, "body": "You are saving variables as sessions, redirecting the page, then retrieving the session for another function. This is not the best architecture for just passing variables. Try searching for Python HTTP Requests and Promises."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6490442, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/94c60890a82cdd53251315f6de857053?s=128&d=identicon&r=PG&f=1", "display_name": "MATTEO DRUSIANI", "link": "https://stackoverflow.com/users/6490442/matteo-drusiani"}, "edited": false, "score": 0, "creation_date": 1497543562, "post_id": 44557052, "comment_id": 76133493, "body": "I&#39;ve used since now Session in the way is described in this documentation: <a href=\"http://webapp2.readthedocs.io/en/latest/api/webapp2_extras/sessions.html\" rel=\"nofollow noreferrer\">webapp2.readthedocs.io/en/latest/api/webapp2_extras/&hellip;</a>. I haven&#39;t had any problem except that. When I do the login the app store the info about login inside the session (in the same way I did for SaleAnnCheck) and it works. I can read all the infos about login everywhere. The Login is handled by another class, in another python module. So why it works?"}], "tags": [], "owner": {"reputation": 402, "user_id": 2539116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KTlYg.jpg?s=128&g=1", "display_name": "Rad Apdal", "link": "https://stackoverflow.com/users/2539116/rad-apdal"}, "is_accepted": false, "score": 0, "last_activity_date": 1497489559, "creation_date": 1497489559, "answer_id": 44557052, "question_id": 44556282, "link": "https://stackoverflow.com/questions/44556282/python-self-session-doesnt-save-data-correctly/44557052#44557052", "title": "python self.session doesn&#39;t save data correctly", "body": "<p>This is because 'self.session' is not a Session, it's just a class variable and will not be readable outside the class. If you really want to use persistent sessions for storing variables, try something like this:</p>\n\n<p>From the docs:\n<a href=\"http://docs.python-requests.org/en/master/user/advanced/\" rel=\"nofollow noreferrer\">http://docs.python-requests.org/en/master/user/advanced/</a></p>\n\n<pre><code>s = requests.Session()\n\ns.get('http://httpbin.org/cookies/set/sessioncookie/123456789')\nr = s.get('http://httpbin.org/cookies') \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6490442, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/94c60890a82cdd53251315f6de857053?s=128&d=identicon&r=PG&f=1", "display_name": "MATTEO DRUSIANI", "link": "https://stackoverflow.com/users/6490442/matteo-drusiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497489559, "creation_date": 1497483463, "question_id": 44556282, "link": "https://stackoverflow.com/questions/44556282/python-self-session-doesnt-save-data-correctly", "title": "python self.session doesn&#39;t save data correctly", "body": "<p>I'm developing a webapp using Google App Engine and Python.\nI'm facing a strange problem and i don't know how to solve it and what causes it.\nWhen I fill a form I send the data for checking them. If they aren't complete and some fields are missed the server send the form back with an advice \"FILL ALL THE FIELDS!\".</p>\n\n<p>That's work pretty well.</p>\n\n<p>What I'm trying to do is sending the form back with the \"description\" and \"title\" fields filled with what the user has written before submitting the form, so he must to fill only the unfilled fields (and he doesn't need to rewrite everything from the beginning).</p>\n\n<p>That's the code:</p>\n\n<pre><code>class SaleAnnCheck(BaseHandler):\n  def post(self):\n    title = self.request.POST.get('title')\n    cat = self.request.POST.get('cat')\n    description = self.request.POST.get('description')\n    AcqOpt = self.request.POST.get('AcqOpt')\n    lat = self.request.POST.get('lat')\n    lng = self.request.POST.get('lng')\n    image1 = self.request.POST.get(\"file1\", None)\n    image2 = self.request.POST.get(\"file2\", None)\n    image3 = self.request.POST.get(\"file3\", None)\n    logging.info(\"info sale announcment\")\n    logging.info(title)\n    logging.info(cat)\n    logging.info(description)\n    logging.info(AcqOpt)\n    logging.info(lat)\n    logging.info(lng)\n    logging.info(image1)\n    logging.info(image2)\n    logging.info(image3)\n    self.session[\"ECommerceUser\"][\"description\"]=description\n    self.session[\"ECommerceUser\"][\"title\"]=title\n    logging.info('session')\n    logging.info(self.session[\"ECommerceUser\"])\n    if title == '' or cat == None or description == '' or AcqOpt == None or lat == '' or lng == '':\n      error = 'empty'\n      urlR='/CreateSaleAnn?'+urllib.urlencode({'error':'empty'})\n      self.redirect(urlR)\n\n\nclass Create(BaseHandler):\n  def get(self):\n    error = self.request.get('error')\n    if error == 'empty':\n      logging.info('sbagliato')\n      logging.info(self.session[\"ECommerceUser\"])\n      template = JINJA_ENVIRONMENT.get_template('templates/CreateAnnouncement.html')\n      w = self.response.write\n      w(template.render({'error':'FILL ALL THE MANDATORY FIELDS!', 'description': self.session[\"ECommerceUser\"][\"description\"], 'title':  self.session[\"ECommerceUser\"][\"title\"]}))\n    else:\n      logging.info('giusto')    \n      logging.info(self.session[\"ECommerceUser\"])   \n      template = JINJA_ENVIRONMENT.get_template('templates/CreateAnnouncement.html')\n      w = self.response.write\n      w(template.render({'description': self.session[\"ECommerceUser\"][\"description\"], 'title':  self.session[\"ECommerceUser\"][\"title\"]}))\n</code></pre>\n\n<p>When I submit the form the content is checked by making an HTTP post request to a certain URL, handled by SaleAnnCheck. </p>\n\n<p>Description and Title are saved in the session correctly (i checked it by printing the content of self.session[\"ECommerceUser\"] in the logs). Then, if a field isn't filled, the server redirect again to the form page, by a GET request to a related URL.</p>\n\n<p>The requests to that URL is handled by Create. But when i try to render the HTML template of the form (using jinja2) with the previous typed values of Description and Title the related text areas are not filled with that values.\nIt happens because self.session[\"ECommerceUser\"][\"description\"] and self.session[\"ECommerceUser\"][\"title\"] are empty, but they weren't when i checked them before (in SaleAnnCheck).</p>\n\n<p>Why it happens? Any explanation? It's a weird problem and there aren't any tips or suggestion about on internet</p>\n"}, {"tags": ["python", "shell", "terminal", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7811762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f530fa4d15d80a12c11574a1d404b496?s=128&d=identicon&r=PG&f=1", "display_name": "Groid", "link": "https://stackoverflow.com/users/7811762/groid"}, "is_accepted": false, "score": 1, "last_activity_date": 1525358973, "creation_date": 1525358973, "answer_id": 50157946, "question_id": 44556275, "link": "https://stackoverflow.com/questions/44556275/how-do-i-enable-the-terminal-plugin-for-pycharm-edu-3-5-1/50157946#50157946", "title": "How do I enable the Terminal plugin for Pycharm Edu 3.5.1?", "body": "<p>You need to download the terminal plugin and install it </p>\n\n<p>Download link:\n<a href=\"https://plugins.jetbrains.com/plugin/9966-native-terminal-plugin\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/9966-native-terminal-plugin</a></p>\n\n<p>After that, open your pycharm and go to the following page:\nFile | Settings | Plugins |\nclick the [Install plugin from disk..] button and install your previous downladed plugin. \nA small black button will appear on the tool bar.</p>\n\n<p>If you did not enable the tool bar, here is the trick: \nView | toolbar<br>\ncheck this toolbar option and the cmd button will be shown on the bar</p>\n\n<p>Hope this will help </p>\n"}], "owner": {"reputation": 39, "user_id": 4496588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a75b99107e19f5cb4ab5214e5598900f?s=128&d=identicon&r=PG&f=1", "display_name": "Shehzaan", "link": "https://stackoverflow.com/users/4496588/shehzaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525358973, "creation_date": 1497483404, "question_id": 44556275, "link": "https://stackoverflow.com/questions/44556275/how-do-i-enable-the-terminal-plugin-for-pycharm-edu-3-5-1", "title": "How do I enable the Terminal plugin for Pycharm Edu 3.5.1?", "body": "<p>Upon visiting JetBrains, they say to enable Terminal plugin but I don't see it in my Pycharm. Its no where to be seen and I am really stuck for a project where I need to use the Terminal.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497483194, "post_id": 44556225, "comment_id": 76102981, "body": "Are you referring to <code>&#39;\\r&#39;</code> and <code>&#39;\\n&#39;</code>?  CR is <code>&#39;\\r&#39;</code> and LF (aka NL) is <code>&#39;\\n&#39;</code>.  The <code>&#39;\\L&#39;</code> and <code>&#39;\\C&#39;</code> is not a standard notation, AFAIK."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1497483339, "post_id": 44556225, "comment_id": 76103010, "body": "Please incorporate the text in the image into the question.  Copy&#39;n&#39;paste the material into the edit box, ignoring the preview.  Make sure it looks correct and there are no tabs in the data.  Then select it and use the <b><code>{}</code></b> button above the edit box to indent it as code.  For the icing on the cake, add an unindented line all on its own saying <code>&lt;!-- language: lang-none --&gt;</code> above the example."}, {"owner": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "edited": false, "score": 0, "creation_date": 1497483414, "post_id": 44556225, "comment_id": 76103027, "body": "this will do ? <code>re.sub(&#39;\\s*\\n*&#39;, &#39;&#39;, open(&#39;file.csv&#39;).read(), re.MULTILINE)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "edited": false, "score": 0, "creation_date": 1497483786, "post_id": 44556225, "comment_id": 76103144, "body": "@Skycc: does <code>\\s</code> include carriage return?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497483828, "post_id": 44556225, "comment_id": 76103152, "body": "@Jonathan: It may be difficult/impossible for the OP to embed a file into their question that contains a mixture of both <code>&quot;\\n&quot;</code> and <code>&quot;\\r\\n&quot;</code> characters and have it display in a meaningful way. Perhaps adding a link to a copy of it for downloading would be more appropriate (<a href=\"https://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin</a> might work)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1497484079, "post_id": 44556225, "comment_id": 76103222, "body": "Does your file literally have backslash, capital c, capital r in it?"}, {"owner": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497484209, "post_id": 44556225, "comment_id": 76103258, "body": "@Jonathan Leffler , good point, maybe <code>re.sub(r&#39;\\s*(?&lt;!\\r)\\n+&#39;, &#39;&#39;, open(&#39;file.csv&#39;).read(), re.MULTILINE)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1498365951, "creation_date": 1498365951, "answer_id": 44743270, "question_id": 44556225, "link": "https://stackoverflow.com/questions/44556225/append-lines-with-lf-into-one-line-until-finds-cr-lf/44743270#44743270", "title": "append lines with &quot;\\LF&quot; into one line, until finds &quot;\\CR\\LF&quot;?", "body": "<p>Two possible solutions are:</p>\n\n<pre><code>import re\n\nfile_content = '''\\\n\"A\",B,\"C\",\"D\"\\r\\n\\\n\"E\",F,\"G\",\"H\"\\r\\n\\\n\"I\",J\\n\\\n       \\n\\\n             ,\"K\",    \\n\\\n\\n\\\n\"L\"\\r\\n\\\n\"O\",P,\"Q\",\"R\"\\r\\n\\\n\"S\",T,\"U\",\"V\"\\r\\n\\\n'''\n\nprint \"Original:\\n\", file_content\n\nreplace1 = re.sub(\"(?&lt;!\\r) *\\n *\", '', file_content)\nprint \"Replace1:\\n\", replace1\n\nreplace2 = re.sub(\"([^\\r])( *\\n *)+\", '\\\\1', file_content)\nprint \"Replace2:\\n\", replace2\n</code></pre>\n\n<p>The output from that Python 2 script is:</p>\n\n<pre><code>Original:\n\"A\",B,\"C\",\"D\"\n\"E\",F,\"G\",\"H\"\n\"I\",J\n\n             ,\"K\",    \n\n\"L\"\n\"O\",P,\"Q\",\"R\"\n\"S\",T,\"U\",\"V\"\n\nReplace1:\n\"A\",B,\"C\",\"D\"\n\"E\",F,\"G\",\"H\"\n\"I\",J,\"K\",\"L\"\n\"O\",P,\"Q\",\"R\"\n\"S\",T,\"U\",\"V\"\n\nReplace2:\n\"A\",B,\"C\",\"D\"\n\"E\",F,\"G\",\"H\"\n\"I\",J,\"K\",\"L\"\n\"O\",P,\"Q\",\"R\"\n\"S\",T,\"U\",\"V\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3677256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2a1b6c656e1bb83f9cb259a262aea8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3677256", "link": "https://stackoverflow.com/users/3677256/user3677256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498365951, "creation_date": 1497483011, "last_edit_date": 1497485153, "question_id": 44556225, "link": "https://stackoverflow.com/questions/44556225/append-lines-with-lf-into-one-line-until-finds-cr-lf", "title": "append lines with &quot;\\LF&quot; into one line, until finds &quot;\\CR\\LF&quot;?", "body": "<p>I'm looking for a solution to this case, it's a file cleanup.\nI have a file \"*.csv\" that contains several lines, all lines have at the end \"\\CR\\LF\", sometimes the file comes with broken lines, so at the end only comes \"\\LF\", missing the \"\\CR\". I need to put all those lines with only \"\\LF\" together in one single line, without any empty spaces, that also have \"\\CR\\LF\" at the end.</p>\n\n<p>For example, </p>\n\n<p><img src=\"https://i.stack.imgur.com/TPNPe.png\" alt=\"\"></p>\n\n<p>Here's a Python representation of the file's content:</p>\n\n<pre><code>file_content = '''\\\n\"A\",B,\"C\",\"D\"\\r\\n\\\n\"E\",F,\"G\",\"H\"\\r\\n\\\n\"I\",J\\n\\\n       \\n\\\n             ,\"K\",    \\n\\\n\\n\\\n\"L\"\\r\\n\\\n\"O\",P,\"Q\",\"R\"\\r\\n\\\n\"S\",T,\"U\",\"V\"\\r\\n\\\n'''\n</code></pre>\n"}, {"tags": ["python", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "edited": false, "score": 0, "creation_date": 1497484512, "post_id": 44556356, "comment_id": 76103336, "body": "I was going to uncover this later today once that code got written up but launched a preemptive Q. Good to know I&#39;ll have to tuck the pandas index away. Nice <code>add</code> syntax too, I wasn&#39;t familiar with that capability."}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": true, "score": 4, "last_activity_date": 1497483961, "creation_date": 1497483961, "answer_id": 44556356, "question_id": 44556208, "link": "https://stackoverflow.com/questions/44556208/what-is-the-source-of-the-index-in-a-columndatasource-created-from-a-pandas-data/44556356#44556356", "title": "What is the source of the index in a ColumnDataSource created from a pandas DataFrame?", "body": "<p>The special variable <code>$index</code> simply displays the row index of the column data source (it can't be a pandas index in general, because although CDS <em>may</em> be created from data frames, they do not <em>have to</em>). If you want to include the pandas dataframe index you can add it:</p>\n\n<pre><code>In [5]: d = pd.DataFrame(dict(a=[1,2,3], b=[2,3,4]))\n\nIn [6]: d.index\nOut[6]: RangeIndex(start=0, stop=3, step=1)\n\nIn [7]: source = ColumnDataSource(d)\n\nIn [8]: source.add(d.index, 'index')\n</code></pre>\n\n<p>This field can be accessed in a hover tool with the standard and general <code>@colname</code> syntax for any standard CDS column (so in this specific case: <code>@index</code>)</p>\n"}], "owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 1, "accepted_answer_id": 44556356, "answer_count": 1, "score": 1, "last_activity_date": 1497483961, "creation_date": 1497482871, "question_id": 44556208, "link": "https://stackoverflow.com/questions/44556208/what-is-the-source-of-the-index-in-a-columndatasource-created-from-a-pandas-data", "title": "What is the source of the index in a ColumnDataSource created from a pandas DataFrame?", "body": "<p>Dataframes naturally come with an index, i.e. those set of row headers we can think of them as. When I construct a ColumnDataSource in bokeh to capture the information in that dataframe for plotting and annotating in a HoverTool I see that the hover tool has a built in <code>( \"index\" , \"$index\" )</code> tooltip available. Will this index be identical to my dataframe's index or is it simply the row index in the ColumnDataSource</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 831, "user_id": 3606232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMGCJ.jpg?s=128&g=1", "display_name": "lukess", "link": "https://stackoverflow.com/users/3606232/lukess"}, "edited": false, "score": 0, "creation_date": 1497483369, "post_id": 44556198, "comment_id": 76103016, "body": "what is the expected outcome?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497484807, "post_id": 44556198, "comment_id": 76103407, "body": "What you&#39;ve presented is not consistent with anything I can think of unless you have dictionaries in your dataframe cells.  Please include your data and read this to get a better idea of how to ask questions <a href=\"http://stackoverflow.com/help/mcve\"><b>MCVE</b></a> and <a href=\"http://stackoverflow.com/help/how-to-ask\"><b>HowToAsk</b></a>"}], "answers": [{"tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1497485158, "creation_date": 1497485158, "answer_id": 44556517, "question_id": 44556198, "link": "https://stackoverflow.com/questions/44556198/pandas-access-to-cell-value/44556517#44556517", "title": "Pandas: Access to cell value", "body": "<p>Looks like you might have a multindex on your columns, I think you need a further level of indexing i.e.:</p>\n\n<pre><code>df[df.Equipment==key].InstImoNoTrim.dailyaverage\n</code></pre>\n"}], "owner": {"reputation": 1174, "user_id": 1799528, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/747c51a740580d642568e803ecb3b1ad?s=128&d=identicon&r=PG", "display_name": "gabi", "link": "https://stackoverflow.com/users/1799528/gabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497485158, "creation_date": 1497482815, "last_edit_date": 1497483817, "question_id": 44556198, "link": "https://stackoverflow.com/questions/44556198/pandas-access-to-cell-value", "title": "Pandas: Access to cell value", "body": "<p>I am trying to add my dataframes cell value to a dictionary but the outcome is not what I'm expecting to get.</p>\n\n<p>Am I querying the pandas in a wrong way ? </p>\n\n<pre><code>df[df.Equipment==key].InstImoNoTrim.iloc[0]\n\n{'GB': 50    0.0\n Name: dailyaverage, dtype: float64}\n</code></pre>\n\n<p>While the expected result is :</p>\n\n<pre><code>{'GB':  0.0}\n</code></pre>\n"}, {"tags": ["python", "arrays", "while-loop"], "comments": [{"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497482911, "post_id": 44556176, "comment_id": 76102897, "body": "Have you independently tested your code for telling whether a year is with 29 days in February?"}, {"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 1, "creation_date": 1497483045, "post_id": 44556176, "comment_id": 76102935, "body": "You are including both years 1900 as well as 2000. I think that only one belongs to the 20th century."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1497483215, "post_id": 44556176, "comment_id": 76102986, "body": "The 20th century starts at 1901 and ends at 2000 (both included)"}, {"owner": {"reputation": 89, "user_id": 6706357, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/O0RZz.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6706357/luke"}, "reply_to_user": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1497483338, "post_id": 44556176, "comment_id": 76103009, "body": "@chapelo My mistake, testing it again now"}, {"owner": {"reputation": 89, "user_id": 6706357, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/O0RZz.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6706357/luke"}, "reply_to_user": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1497483652, "post_id": 44556176, "comment_id": 76103108, "body": "@chapelo You were correct, that was my mistake"}, {"owner": {"reputation": 89, "user_id": 6706357, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/O0RZz.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6706357/luke"}, "edited": false, "score": 0, "creation_date": 1497483666, "post_id": 44556176, "comment_id": 76103111, "body": "@ Willem Van Onsem ^"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 1, "creation_date": 1497483683, "post_id": 44556176, "comment_id": 76103117, "body": "@Luke not entirely, <code>1 Jan 1901 to 31 Dec 2000</code>, 2000 is included"}], "answers": [{"tags": [], "owner": {"reputation": 1030, "user_id": 7774795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e663c3a9d1a8e7ce625035b1c28587?s=128&d=identicon&r=PG&f=1", "display_name": "Ben J", "link": "https://stackoverflow.com/users/7774795/ben-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1497969506, "creation_date": 1497969506, "answer_id": 44656094, "question_id": 44556176, "link": "https://stackoverflow.com/questions/44556176/python-while-loops-to-find-sundays-on-first-of-the-month/44656094#44656094", "title": "Python while loops to find Sundays on first of the month", "body": "<p>It works if you change the code to start counting at Jan 1st, 1901.  You just need to change the loop at the end that marks each of the Sundays.</p>\n\n<pre><code>sunCnt = 6;\n# Skip the year 1900\n# Adding 364 will get to 1901 without messing up the day of the week\nsunCnt += 364;\n\nwhile sunCnt &lt;= len(days):\n    days[sunCnt] += 1;\n    sunCnt += 7;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6706357, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/O0RZz.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6706357/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1497969506, "creation_date": 1497482627, "question_id": 44556176, "link": "https://stackoverflow.com/questions/44556176/python-while-loops-to-find-sundays-on-first-of-the-month", "title": "Python while loops to find Sundays on first of the month", "body": "<p>I'm working on a solution to Problem 19 of Project Euler</p>\n\n<p><a href=\"https://projecteuler.net/problem=19\" rel=\"nofollow noreferrer\">https://projecteuler.net/problem=19</a></p>\n\n<p>The goal is to find the number of Sundays that fell on the first of the month in the 20th century. I'm attempting to complete the problem using only loops (not using datetime).</p>\n\n<p>Here is my code right now:</p>\n\n<pre><code>days  = []\n\nyearCnt = 1900;\ndayCnt = 1;\n\nJan = 31;\nMar = 31;\nApr = 30;\nMay = 31;\nJun = 30;\nJul = 31;\nAug = 31;\nSep = 30;\nOct = 31;\nNov = 30;\nDec = 31;\n\nwhile yearCnt &lt; 2001:\n    if yearCnt == 1900:\n        Feb = 28;\n    elif yearCnt%4 == 0:\n        Feb = 29;\n    else:\n        Feb = 28;\n    days.append(1);\n    while dayCnt &lt; Jan:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Feb:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Mar:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Apr:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; May:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Jun:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Jul:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Aug:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Sep:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Oct:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Nov:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    days.append(1);\n    while dayCnt &lt; Dec:\n        days.append(0);\n        dayCnt += 1;\n    dayCnt = 1;\n    yearCnt += 1;\n\nsunCnt = 6;\n\nwhile sunCnt &lt;= len(days):\n    days[sunCnt] += 1;\n    sunCnt += 7;\n\nprint(days.count(2));\n</code></pre>\n\n<p>The idea is to create an array of all the days with the positions of the first of the month marked with 1s.  Then another while loop goes through that array and adds 1 to mark all the Sundays.  In theory, the number of 2s should mark the number of Sundays on the first of the month.</p>\n\n<p>It currently gives the answer 173.  I know the answer is 171 but I'd like to find out where I'm going wrong.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497482629, "post_id": 44556135, "comment_id": 76102832, "body": "There are about a million questions on this exact same topic. You should do some research before posting a new question."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497482679, "post_id": 44556135, "comment_id": 76102844, "body": "Add <code>global p1point</code> to <code>p1turn_part_2</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497482688, "post_id": 44556135, "comment_id": 76102847, "body": "Here is your issue: <code>p1point = p1point + 1</code>"}, {"owner": {"reputation": 23, "user_id": 7960269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be38ad01abab9e3c138787cc17832acd?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Martin", "link": "https://stackoverflow.com/users/7960269/luke-martin"}, "edited": false, "score": 0, "creation_date": 1497482692, "post_id": 44556135, "comment_id": 76102849, "body": "see the thing is, I did do research and found some options which I either executed poorly or didn&#39;t work, and it was probably a mix of both"}, {"owner": {"reputation": 23, "user_id": 7960269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be38ad01abab9e3c138787cc17832acd?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Martin", "link": "https://stackoverflow.com/users/7960269/luke-martin"}, "edited": false, "score": 0, "creation_date": 1497482870, "post_id": 44556135, "comment_id": 76102885, "body": "Thanks, but now It&#39;s an infinite loop. oops."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497482883, "post_id": 44556135, "comment_id": 76102888, "body": "@DaniSpringer No it&#39;s not. Primarily because Python does not have variable declarations. But regardless, that is the source of the error in that function (<code>p1turn_part_2</code>), and the solution is as Barmar said."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483143, "post_id": 44556135, "comment_id": 76102961, "body": "@DaniSpringer No, <i>look in the function</i>. The variable <code>p1point</code> is <b>never assigned to</b> before <code>p1point = p1point + 1</code>. The latter expression is then evaluated with the compiler having marked <code>p1point</code> as a local variable, and then it tries to reference itself in the right-hand side of the statement, and the error is thrown. This is a very common beginner&#39;s mistake. Like I stated, there are probably thousands of questions on the python tag asking the same thing. See the linked duplicate for more info."}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483304, "post_id": 44556135, "comment_id": 76102999, "body": "I see <code>global p1point     p1point = 0</code> before <code>p1point = p1point + 1</code>. Don&#39;t you?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483418, "post_id": 44556135, "comment_id": 76103030, "body": "@DaniSpringer Yes, in <code>p2turn</code>, <b>not</b> in <code>p1turn_part_2</code> where the error is being thrown, i.e. where it matters."}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 1, "creation_date": 1497483517, "post_id": 44556135, "comment_id": 76103060, "body": "Got you now. I <i>am</i> new to Python and stuff, but I did learn my scopes, so was quite confused. :D Thanks"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483637, "post_id": 44556135, "comment_id": 76103107, "body": "@DaniSpringer Python is a simple language, but certain things don&#39;t work exactly like in other languages, but once you learn how it works, it&#39;s pretty simple to remember. But basically, as far as scope, outside of the global scope, if a variable is <i>assigned to ever</i> it is considered <i>local</i> <b>unless</b> you use the <code>global</code> directive. If you <i>really</i> want to go down the rabbit hole, check out <a href=\"https://stackoverflow.com/questions/42451827/python-local-variable-compile-principle\">this</a> question."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483706, "post_id": 44556135, "comment_id": 76103124, "body": "@DaniSpringer so basically <code>def func(): x = x + 1</code> <i>will always</i> throw an error, even if a global <code>x</code> exists, unless you put <code>global x</code> inside <code>func</code>"}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1497483987, "post_id": 44556135, "comment_id": 76103196, "body": "Right. By the way (though this may make look stupid, who cares), Python is my first language. :)"}, {"owner": {"reputation": 23, "user_id": 7960269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be38ad01abab9e3c138787cc17832acd?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Martin", "link": "https://stackoverflow.com/users/7960269/luke-martin"}, "edited": false, "score": 0, "creation_date": 1497484083, "post_id": 44556135, "comment_id": 76103223, "body": "Just another question (hehe... :( ) Why does an infinite loop come afterwards?"}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497484108, "post_id": 44556135, "comment_id": 76103228, "body": "@juanpa.arrivillaga I read it. A rabbit hole indeed! Goodness..."}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 1, "creation_date": 1497484128, "post_id": 44556135, "comment_id": 76103237, "body": "@LukeMartin check this out: <a href=\"http://pythontutor.com\" rel=\"nofollow noreferrer\">pythontutor.com</a>"}, {"owner": {"reputation": 23, "user_id": 7960269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be38ad01abab9e3c138787cc17832acd?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Martin", "link": "https://stackoverflow.com/users/7960269/luke-martin"}, "edited": false, "score": 0, "creation_date": 1497484255, "post_id": 44556135, "comment_id": 76103267, "body": "It dosen&#39;t appear to work..."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1497482838, "creation_date": 1497482838, "answer_id": 44556201, "question_id": 44556135, "link": "https://stackoverflow.com/questions/44556135/local-variables-are-being-used-before-assignment-but-are-assigned-before-used/44556201#44556201", "title": "Local variables are being used before assignment, but are assigned before used", "body": "<p><code>p1turn_part_2</code> contains the following statement:</p>\n\n<pre><code>p1point = p1point + 1\n</code></pre>\n\n<p>In order to set the new value of <code>p1point</code>, it needs to use the old value. But the variable has never been set before, so it gets an error when trying to add 1 to the old value.</p>\n\n<p>I assume this is supposed to be using the value that was set in <code>p1turn_part_1</code>. That function has:</p>\n\n<pre><code>global p1point\n</code></pre>\n\n<p>so it's setting the global variable. But since <code>p1turn_part_2</code> has no such statement, it tries to use a local variable, not the global variable. Add the same <code>global</code> statement to <code>p1turn_part_2</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7960269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be38ad01abab9e3c138787cc17832acd?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Martin", "link": "https://stackoverflow.com/users/7960269/luke-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "closed_date": 1497482983, "accepted_answer_id": 44556201, "answer_count": 1, "score": 0, "last_activity_date": 1497482838, "creation_date": 1497482401, "last_edit_date": 1497482526, "question_id": 44556135, "link": "https://stackoverflow.com/questions/44556135/local-variables-are-being-used-before-assignment-but-are-assigned-before-used", "closed_reason": "Duplicate", "title": "Local variables are being used before assignment, but are assigned before used", "body": "<p>I am getting this error message:</p>\n\n<blockquote>\n<pre><code>   Traceback (most recent call last):\n      File \"python\", line 256, in &lt;module&gt;\n      File \"python\", line 11, in questions\n      File \"python\", line 190, in instructions\n      File \"python\", line 27, in names\n      File \"python\", line 45, in p1turn_part_1\n      File \"python\", line 137, in p2turn\n      File \"python\", line 86, in p1turn_part_2\n    UnboundLocalError: local variable 'p1point' referenced before assignment\n</code></pre>\n</blockquote>\n\n<p>from <a href=\"https://repl.it/I8nh/111\" rel=\"nofollow noreferrer\">This Website</a>.\nThe code is:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import time\r\nimport random\r\n\r\n\r\n###########\r\n#Functions#\r\n###########\r\ndef questions():\r\n  instruction_or_skip = input('Type \\'instructions\\' to learn how to play. If you don\\' want to learn, type \\'skip\\'')\r\n  if instruction_or_skip == 'instructions':\r\n      instructions()\r\n  elif instruction_or_skip == 'skip':\r\n      names()\r\n  else:\r\n      print('\\nSorry, I didn\\'t get that.\\n')\r\n      questions()\r\n\r\n#--starting screen--#\r\ndef startScreen():\r\n    loadingScreen()\r\n    \r\ndef names():\r\n  global p1name\r\n  p1name = input('What is the first player\\'s name?')\r\n  global p2name\r\n  p2name = input('What is the second player\\'s name?')\r\n  p1turn_part_1()\r\n    \r\ndef p1turn_part_1():\r\n    global rounds\r\n    print('\\nHow many rounds?')\r\n    rounds = input(':&gt;')\r\n    rounds = int(rounds)\r\n    global p1point\r\n    p1point = 0\r\n    p1 = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36']\r\n    p1 = (random.choice(p1))\r\n    print p1\r\n    if p1 == '1' or '2' or '3' or '4' or '5' or '6' or '7' or '8' or '9':\r\n      p1point = p1point + 1\r\n      time.sleep(1)\r\n      global rounds\r\n      rounds = rounds - 1\r\n      print(p1name + ' gets a point!')\r\n      p2turn()\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n    else:\r\n      time.sleep(1)\r\n      print(p1name + ' gets no points...')\r\n      p2turn()\r\n      global rounds\r\n      rounds = rounds - 1\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n      else:\r\n        p2turn()\r\n        \r\ndef p1turn_part_2():\r\n  #1-9 are divisble by 4\r\n  #10-27 are divisble by 2\r\n    p1 = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36']\r\n    p1 = (random.choice(p1))\r\n    print p1\r\n    if p1 == '1' or '2' or '3' or '4' or '5' or '6' or '7' or '8' or '9':\r\n      p1point = p1point + 1\r\n      time.sleep(1)\r\n      global rounds\r\n      rounds = rounds - 1\r\n      print(p1name + ' gets a point!')\r\n      p2turn()\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n    else:\r\n      time.sleep(1)\r\n      print(p1name + ' gets no points...')\r\n      global rounds\r\n      rounds = rounds - 1\r\n      p2turn()\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n      else:\r\n        p2turn()\r\n      \r\ndef p2turn():\r\n    global p2point\r\n    p2point = 0\r\n    p2 = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36']\r\n    p2 = (random.choice(p2))\r\n    print p2\r\n    if p2 == '10' or '11' or '12' or '13' or '14' or '15' or '16' or '17' or '18' or '19' or '20' or '21' or '22' or '23' or '24' or '25' or '26' or '27':\r\n      global p2point\r\n      p2point = p2point + 1\r\n      time.sleep(1)\r\n      global rounds\r\n      rounds = rounds - 1\r\n      print(p2name + ' gets a point!')\r\n      p1turn_part_2()\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n    else:\r\n      time.sleep(1)\r\n      global rounds\r\n      rounds = rounds - 1\r\n      print(p2name + ' gets no points...')\r\n      p1turn_part_2()\r\n      if rounds &lt; 0:\r\n        print p1point\r\n        print p2point\r\n        if p1point &lt; p2point:\r\n          print('\\nPlayer 2 wins!')\r\n          exit(0)\r\n        elif p2point &lt; p1point:\r\n          print('\\nPlayer 1 wins')\r\n          exit(0)\r\n        else:\r\n          print('It\\'s a tie!')\r\n          exit(0)\r\n      else:\r\n        p1turn_part_2()\r\n\r\n\r\n\r\n\r\n      \r\n\r\n#--the instructions--#\r\ndef instructions():\r\n    print('''             ##########################\r\n             #########DIE ROLL######### \r\n             ##########################''')\r\n    print('\\nRules:')\r\n    print('\\n1.)Follow all prompts on screen')\r\n    print('2.)Do not modify the script under ANY curcumstances')\r\n    print('3.)You do not need to write down any scores or round numbers,')\r\n    print('   They will be recorded for you.')\r\n    print('4.)P1 needs to get any number divisable by 4')\r\n    print('5.)P2 needs to get any number divisable by 2')\r\n    print('6.)P3 needs to get any number divisable by 3')\r\n    print('7.)P4 needs to get any number divisable by 5')\r\n    names()\r\n#--for looks only--#\r\ndef loadingScreen():\r\n    print('\\n' * 100)\r\n    print('\\nLoading...')\r\n    print('\\n')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading.')\r\n    print('\\n-')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading..')\r\n    print('\\n-')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading...')\r\n    print('\\n--')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading.')\r\n    print('\\n--')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading..')\r\n    print('\\n---')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading...')\r\n    print('\\n---')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading.')\r\n    print('\\n----')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading..')\r\n    print('\\n----')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading...')\r\n    print('\\n-----')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading.')\r\n    print('\\n-----')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading..')\r\n    print('\\n------')\r\n    time.sleep(0.5)\r\n    print('\\n' * 100)\r\n    print('\\nLoading...')\r\n    print('\\n------')\r\n    time.sleep(0.5)\r\n    \r\n    \r\n\r\n    \r\n    \r\n    \r\n############\r\n####GAME####\r\n############\r\nprint('test complete')\r\nstartScreen()\r\nquestions()\r\nglobal rounds\r\nprint('\\nHow many rounds?')\r\nrounds = input(':&gt;')\r\nrounds = int(rounds)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Does anyone know what the problem is? (this also applies to the p2point and rounds variables.)(test on previous site.)</p>\n\n<p>Side questions:</p>\n\n<ol>\n<li>Why does player 1 get a point no matter what number is taken?</li>\n<li>Will an infinite loop be created by this program?</li>\n</ol>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 4, "last_activity_date": 1497482614, "creation_date": 1497482614, "answer_id": 44556173, "question_id": 44556132, "link": "https://stackoverflow.com/questions/44556132/how-to-split-string-everywhere-a-letter-appears/44556173#44556173", "title": "How to split string everywhere a letter appears?", "body": "<pre><code>&gt;&gt;&gt; my_string = '12345A6789B12345C'\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.findall('\\d*\\w', my_string)\n['12345A', '6789B', '12345C']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": false, "score": 1, "last_activity_date": 1497483089, "creation_date": 1497483089, "answer_id": 44556244, "question_id": 44556132, "link": "https://stackoverflow.com/questions/44556132/how-to-split-string-everywhere-a-letter-appears/44556244#44556244", "title": "How to split string everywhere a letter appears?", "body": "<p>For the sake of completeness, non-regex solution:</p>\n\n<pre><code>data = \"12345A6789B12345C\"\n\nresult = [\"\"]\nfor char in data:\n    result[-1] += char\n    if char.isalpha():\n        result.append(\"\")\nif not result[-1]:\n    result.pop()\n\nprint(result)\n# ['12345A', '6789B', '12345C']\n</code></pre>\n\n<p>Should be faster for smaller strings, but if you're working with huge data go with regex as once compiled and warmed up, the search separation happens on the 'fast' C side.</p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1497483704, "creation_date": 1497483704, "answer_id": 44556317, "question_id": 44556132, "link": "https://stackoverflow.com/questions/44556132/how-to-split-string-everywhere-a-letter-appears/44556317#44556317", "title": "How to split string everywhere a letter appears?", "body": "<p>You could build this with a generator, too. The approach below keeps track of start and end indices of each slice, yielding a generator of strings. You'll have to cast it to list to use it as one, though (<code>splitonalpha(some_string)[-1]</code> will fail, since generators aren't indexable)</p>\n\n<pre><code>def splitonalpha(s):\n    start = 0\n    for end, ch in enumerate(s, start=1):\n        if ch.isalpha:\n            yield s[start:end]\n            start = end\n\nlist(splitonalpha(\"12345A6789B12345C\"))\n# ['12345A', '6789B', '12345C']\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 4798514, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-70dIleEtzQM/AAAAAAAAAAI/AAAAAAAAABA/5Cxq5ABNjY8/photo.jpg?sz=128", "display_name": "fpolig01", "link": "https://stackoverflow.com/users/4798514/fpolig01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 44556173, "answer_count": 3, "score": 1, "last_activity_date": 1497483704, "creation_date": 1497482390, "last_edit_date": 1497483013, "question_id": 44556132, "link": "https://stackoverflow.com/questions/44556132/how-to-split-string-everywhere-a-letter-appears", "title": "How to split string everywhere a letter appears?", "body": "<p>I have a string containing letters and numbers like this - </p>\n\n<pre><code>12345A6789B12345C\n</code></pre>\n\n<p>How can I get a list that looks like this</p>\n\n<p>[12345A, 6789B, 12345C]</p>\n"}, {"tags": ["python", "pandas", "group-by", "xlsxwriter"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497483405, "post_id": 44556235, "comment_id": 76103025, "body": "@priRSquared thank you very much for the reponse so quickly. This worked as you showed, I will vote this as a complete answer, however I forgot to clarify in the original question that I need to sum both values and show them in the new df. Also, I need to show the classification code (a company will always have the classification code). Again thank you SO much."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497483485, "post_id": 44556235, "comment_id": 76103046, "body": "No problem, if you could edit your question to include what you expect the output to look like, I can show you exactly how to get it."}, {"owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497483776, "post_id": 44556235, "comment_id": 76103139, "body": "I just edited the question with my desired output - thank you again"}, {"owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497484963, "post_id": 44556235, "comment_id": 76103434, "body": "Two last pieces (I will upvote your answer for this help) that I need assistance with. 1) It seems to be printing/exporting the &#39;Classication&#39; into the last column, instead of the 1st. 2) For both of these options the &#39;Value&#39; numbers are not actually summing, it seems that they are concatenating, could this mean my values aren&#39;t int?"}, {"owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497486929, "post_id": 44556235, "comment_id": 76103858, "body": "That worked perfect, thanks again! I am about to mark this question as answered. Since you know so much though I have one more question. When creating my final df (shown above) I use a parameter of &#39;Value1&#39; &gt; 0 on the previous df, however negative values are still inserted. Do you know why this might be? Thanks again, marking the question as answered but I thought I would just ask."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497487297, "post_id": 44556235, "comment_id": 76103932, "body": "@ls101 When you say that you used the parameter <code>&#39;Value 1&#39; &gt; 0</code>... that is too ambiguous.  It would be better to ask a new question where you can clarify exactly what you mean."}, {"owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "edited": false, "score": 0, "creation_date": 1497490109, "post_id": 44556235, "comment_id": 76104465, "body": "here is the link to the new question I asked, in case you have a moment. <a href=\"https://stackoverflow.com/questions/44556966/function-to-insert-only-positive-values-into-pandas-dataframe-results-in-negativ\" title=\"function to insert only positive values into pandas dataframe results in negativ\">stackoverflow.com/questions/44556966/&hellip;</a>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 5, "last_activity_date": 1497485479, "last_edit_date": 1497485479, "creation_date": 1497483040, "answer_id": 44556235, "question_id": 44556129, "link": "https://stackoverflow.com/questions/44556129/python-pandas-group-dataframe-by-column-sum-integer-column-by-string-column/44556235#44556235", "title": "Python Pandas Group Dataframe by Column / Sum Integer Column by String Column", "body": "<p><strong>Option 1</strong><br>\n<em><code>set_index</code> then <code>groupby</code></em><br>\nThis assumes that the <code>'Classification'</code> column is the same across <code>Company</code></p>\n\n<pre><code>df.set_index('Classification', append=True) \\\n    .groupby(level=[0, 1]).sum().reset_index(1)\n\n                  Classification  Value 1  Value 2\nName                                              \nCompany 1  Classification Code 1    11000    10000\nCompany 2  Classification Code 1     3000     7500\nCompany 3  Classification Code 2    35000    42000\nCompany 4  Classification Code 3    14500    11500\n</code></pre>\n\n<p><strong>Option 2</strong><br>\n<em><code>groupby</code> then <code>agg</code></em><br>\nThis doesn't make any assumptions about uniqueness of <code>'Classification'</code> across <code>'Company'</code> but will just grab the first <code>'Classification'</code> per <code>'Company'</code></p>\n\n<pre><code>df.groupby(level=0).agg(\n    {'Classification': 'first', 'Value 1': 'sum', 'Value 2': 'sum'})\n\n                  Classification  Value 1  Value 2\nName                                              \nCompany 1  Classification Code 1    11000    10000\nCompany 2  Classification Code 1     3000     7500\nCompany 3  Classification Code 2    35000    42000\nCompany 4  Classification Code 3    14500    11500\n</code></pre>\n\n<hr>\n\n<p><strong>Response to Comments</strong><br>\n<em>In regards to concatenation</em><br>\nCheck <code>dtypes</code> with <code>df.dtypes</code>.  If you see <code>object</code> instead of <code>int</code> then yes, you need to convert to <code>numeric</code>.  </p>\n\n<p>You can do this simply with</p>\n\n<pre><code>df.apply(pd.to_numeric, errors='ignore').groupby(level=0).agg(\n    {'Classification': 'first', 'Value 1': 'sum', 'Value 2': 'sum'})\n</code></pre>\n\n<p>Or more manually </p>\n\n<pre><code>df['Value 1'] = df['Value 1'].astype(int)\ndf['Value 2'] = df['Value 2'].astype(int)\n</code></pre>\n\n<p>Then proceed to prior suggestions.</p>\n\n<p><em>In regards to placement of columns</em><br>\nYou can always reorder your columns</p>\n\n<pre><code>d1 = df.apply(pd.to_numeric, errors='ignore').groupby(level=0).agg(\n    {'Classification': 'first', 'Value 1': 'sum', 'Value 2': 'sum'})\n\nd1[df.columns]\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>d1 = df.apply(pd.to_numeric, errors='ignore').groupby(level=0).agg(\n    {'Classification': 'first', 'Value 1': 'sum', 'Value 2': 'sum'})\n\nd1.reindex_axis(df.columns, 1)\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 7406672, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4c2fe57afcc2cf6cf09482eab38587bc?s=128&d=identicon&r=PG&f=1", "display_name": "ls101", "link": "https://stackoverflow.com/users/7406672/ls101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4128, "favorite_count": 1, "accepted_answer_id": 44556235, "answer_count": 1, "score": 2, "last_activity_date": 1497485479, "creation_date": 1497482375, "last_edit_date": 1497483756, "question_id": 44556129, "link": "https://stackoverflow.com/questions/44556129/python-pandas-group-dataframe-by-column-sum-integer-column-by-string-column", "title": "Python Pandas Group Dataframe by Column / Sum Integer Column by String Column", "body": "<p>I have been stuck all day and have been through numerous SO articles and am still stuck on my last final piece. I imported a CSV into a massive dataframe, then eventually got the smaller dataframe below: (Note: My df is indexed on 'Name' right now, which is what I need to base the group or sum off of)</p>\n\n<pre><code>  Name          Classification       Value 1     Value 2\nCompany 1   Classification Code 1      5000       8000      \nCompany 1   Classification Code 1      6000       2000\nCompany 2   Classification Code 1      2000       3000    \nCompany 2   Classification Code 1      1000       4500     \nCompany 3   Classification Code 2      15000      10000      \nCompany 3   Classification Code 2      20000      32000     \nCompany 4   Classification Code 3      7500       10000    \nCompany 4   Classification Code 3      7000       1500     \n</code></pre>\n\n<p>What I am struggling with now is how to sum the two values based on the company (I have mainly been using groupby and sum() but have been stuck for hours. I know there are a lot of SO articles talking about summing things in pandas but I have had no luck for hours. ANY help would be greatly appreciated. Thanks so much.</p>\n\n<p>Edit:\nThe output I am looking for is the following</p>\n\n<pre><code>Company 1    Classification Code 1    11,000    10,000\nCompany 2    Classification Code 1    3,000      7,500\nCompany 3    Classification Code 2    35,000    42,000\nCompany 4    Classification Code 3    14,500    11,500\n</code></pre>\n"}, {"tags": ["python", "random", "hashlib"], "comments": [{"owner": {"reputation": 17342, "user_id": 763269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0c27474bcff67974d6a9fcb43cb7ba4e?s=128&d=identicon&r=PG", "display_name": "Chris Johnson", "link": "https://stackoverflow.com/users/763269/chris-johnson"}, "edited": false, "score": 0, "creation_date": 1498076850, "post_id": 44556105, "comment_id": 76355462, "body": "Actually your question is not different from &quot;convert an integer to a random but deterministically repeatable choice&quot; -- once you&#39;ve converted your string to an integer equivalent via hashing, it is exactly the same problem."}, {"owner": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "reply_to_user": {"reputation": 17342, "user_id": 763269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0c27474bcff67974d6a9fcb43cb7ba4e?s=128&d=identicon&r=PG", "display_name": "Chris Johnson", "link": "https://stackoverflow.com/users/763269/chris-johnson"}, "edited": false, "score": 0, "creation_date": 1498177673, "post_id": 44556105, "comment_id": 76405348, "body": "@ChrisJohnson Okay, but the answer is meaningfully different. One uses modulus, the other doesn&#39;t. Having said that, I think the use of modulus can be entirely avoided in the other answer -- by instead linearly scaling the hash value to the number of available choices."}], "answers": [{"comments": [{"owner": {"reputation": 900, "user_id": 2988908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c037bb4c77aafbfd5fd242e587ed02e7?s=128&d=identicon&r=PG", "display_name": "VoNWooDSoN", "link": "https://stackoverflow.com/users/2988908/vonwoodson"}, "edited": false, "score": 3, "creation_date": 1497984491, "post_id": 44556106, "comment_id": 76307113, "body": "I agree with the hashlib solution.  Especially since SHA512 is going to be implemented on multiple platforms.  SHA is used for encryption, and therefore will be the closest to being random-yet-repeatable you&#39;re going to get.  Although you could look into other encryption schemes, and most importantly, you should never-ever-ever implement your own."}, {"owner": {"reputation": 35566, "user_id": 108741, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b3a383cf256d50683dfb00512e28f693?s=128&d=identicon&r=PG", "display_name": "SpliFF", "link": "https://stackoverflow.com/users/108741/spliff"}, "edited": false, "score": 1, "creation_date": 1498182436, "post_id": 44556106, "comment_id": 76406306, "body": "This answer assumes Python 3. In python 2 you need to cast one of the inputs to a float to get a float division."}], "tags": [], "owner": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "is_accepted": true, "score": 20, "last_activity_date": 1611087686, "last_edit_date": 1611087686, "creation_date": 1497482165, "answer_id": 44556106, "question_id": 44556105, "link": "https://stackoverflow.com/questions/44556105/convert-string-to-random-but-deterministically-repeatable-uniform-probability/44556106#44556106", "title": "Convert string to random but deterministically repeatable uniform probability", "body": "<h3>Using hash</h3>\n<p>A cryptographic hash is assumably a uniformly distributed integer in the range [0, MAX_HASH]. Accordingly, it can be scaled to a floating-point number in the range [0, 1) by dividing it by MAX_HASH + 1.</p>\n<pre><code>import hashlib\n\nHash = hashlib.sha512\nMAX_HASH_PLUS_ONE = 2**(Hash().digest_size * 8)\n\ndef str_to_probability(in_str):\n    &quot;&quot;&quot;Return a reproducible uniformly random float in the interval [0, 1) for the given string.&quot;&quot;&quot;\n    seed = in_str.encode()\n    hash_digest = Hash(seed).digest()\n    hash_int = int.from_bytes(hash_digest, 'big')  # Uses explicit byteorder for system-agnostic reproducibility\n    return hash_int / MAX_HASH_PLUS_ONE  # Float division\n\n&gt;&gt;&gt; str_to_probability('a3b2Foobar')\n0.3659629991207491\n</code></pre>\n<p>Here is a real world <a href=\"https://github.com/impredicative/irc-rss-feed-bot/blob/5bcae4a/ircrssfeedbot/util/hashlib.py\" rel=\"nofollow noreferrer\">usage example</a>.</p>\n<p>Notes:</p>\n<ul>\n<li>The built-in\n<a href=\"https://docs.python.org/3/reference/datamodel.html#object.__hash__\" rel=\"nofollow noreferrer\"><code>hash</code></a>\nmethod must not be used because it can preserve the input's\ndistribution, e.g. with <code>hash(123)</code>. Alternatively, it can return values that differ when Python is restarted, e.g. with <code>hash('123')</code>.</li>\n<li>Using modulo is not necessary as float division is sufficient.</li>\n</ul>\n<h3>Using random</h3>\n<p>The <a href=\"https://docs.python.org/library/random.html\" rel=\"nofollow noreferrer\"><code>random</code></a> module can be used with <code>in_str</code> as its seed, while addressing concerns surrounding both <a href=\"https://stackoverflow.com/questions/10021882/how-do-i-make-randint-threadsafe-in-python\">thread safety</a> and continuity.</p>\n<p>With this approach, not only is cross-language reproducibility a concern, but reproducibility across multiple future versions of Python could also be a concern. It is therefore not recommended.</p>\n<pre><code>import random\n\ndef str_to_probability(in_str):\n    &quot;&quot;&quot;Return a reproducible uniformly random float in the interval [0, 1) for the given seed.&quot;&quot;&quot;\n    return random.Random(in_str).random()\n\n&gt;&gt;&gt; str_to_probability('a3b2Foobar')\n0.4662507245848473\n</code></pre>\n"}], "owner": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1598, "favorite_count": 2, "accepted_answer_id": 44556106, "answer_count": 1, "score": 8, "last_activity_date": 1611087686, "creation_date": 1497482165, "last_edit_date": 1498177873, "question_id": 44556105, "link": "https://stackoverflow.com/questions/44556105/convert-string-to-random-but-deterministically-repeatable-uniform-probability", "title": "Convert string to random but deterministically repeatable uniform probability", "body": "<p>How do I convert a string, e.g. a user ID plus salt, to a random looking but actually a deterministically repeatable uniform probability in the semi-open range [0.0, 1.0)? This <a href=\"https://en.wikipedia.org/wiki/Interval_(mathematics)#Terminology\" rel=\"nofollow noreferrer\">means</a> that the output is \u2265 0.0 and &lt; 1.0. The output distribution must be uniform irrespective of the input distribution. For example, if the input string is 'a3b2Foobar', the output probability could repeatably be 0.40341504.</p>\n\n<p>Cross-language and cross-platform algorithmic reproducibility is desirable. I'm inclined to use a hash function unless there is a better way. Here is what I have:</p>\n\n<pre><code>&gt;&gt;&gt; in_str = 'a3b2Foobar'\n&gt;&gt;&gt; (int(hashlib.sha256(in_str.encode()).hexdigest(), 16) % 1e8) / 1e8\n0.40341504\n</code></pre>\n\n<p>I'm using the latest stable Python 3. Please note that this question is similar but not exactly identical to the related question to <a href=\"https://stackoverflow.com/questions/41255711/convert-integer-to-a-random-but-deterministically-repeatable-choice\">convert an integer to a random but deterministically repeatable choice</a>.</p>\n"}, {"tags": ["python", "excel", "openpyxl", "xlwings"], "comments": [{"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1497511345, "post_id": 44556079, "comment_id": 76111321, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44489950/writing-and-modifying-an-existing-workbook-using-python\">Writing and modifying an existing workbook using Python</a>"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1497630877, "post_id": 44556079, "comment_id": 76175849, "body": "how does pandas.DataFrame.append help?  I have the data frame I want.  I am having trouble overwriting existing data from my excel file with the data frame I have.  I am still confused how I get the data to an existing workbook"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1497631930, "post_id": 44556079, "comment_id": 76176422, "body": "I don&#39;t think I am able to update an existing workbook with those functions.  I have searched online and don&#39;t think it is possible to do it with these functions.  It is hard to find a function that will modify an existing workplace and replace the data in it. Thank you for your help and suggestions."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1497679576, "post_id": 44596841, "comment_id": 76190433, "body": "When I use this code, it is able to put data into an existing workbook file.  However, it overwrites the entire workbook.  I am sorry I was not very clear, but I only want to overwrite certain cells in the existing workbook, not remove all the data from the workbook.  Do you know if this is possible?  Replacing specific cells with the panda data frame I want?  For example I would want to replace cells M6 to M30 in a sheet called data with the data frame created."}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1497801267, "post_id": 44596841, "comment_id": 76219741, "body": "Yes that is exactly what I want to do without erasing or removing any of the existing data in that spreadsheet.  Thank you so much!"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1498011499, "post_id": 44596841, "comment_id": 76316858, "body": "Thanks for the great code!  I still ran into an unexpected error which I don&#39;t understand.  For some reason it is giving me a Value Error.  The error states:   ValueError: Values Type Error: Values have to be &quot;list&quot;: values=&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;.  This makes no sense to me since we convert the dataframe to a list, but I could be looking at it wrong.  Thank you for all your help.  If you could give me some more advice I would really appreciate it! Thanks again"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1498132310, "post_id": 44596841, "comment_id": 76379914, "body": "Sorry I don&#39;t know how to format my text in the comments"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1498173544, "post_id": 44596841, "comment_id": 76404382, "body": "Thank you for your help you have been amazing!!! I have few more questions, does this code allow me to choose what sheet in the workbook, I want to put the data in?  Also, do you know how I can convert my data from exponentials (for example, 10e9 to 10 billion) to a unit of billions or millions?  Is there an easy way to get rid of the exponentials?"}, {"owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1498193905, "post_id": 44596841, "comment_id": 76409058, "body": "Thank you for your help! I really appreciate it all the work you did"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "reply_to_user": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "edited": false, "score": 0, "creation_date": 1498202151, "post_id": 44596841, "comment_id": 76412808, "body": "@vdub32: What do you think what the Parameter <code>worksheet=1</code> is for? Do a Search on SO <code>[python] float format</code>, there are plenty of Answers about this."}], "tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": true, "score": 0, "last_activity_date": 1498142717, "last_edit_date": 1498142717, "creation_date": 1497642090, "answer_id": 44596841, "question_id": 44556079, "link": "https://stackoverflow.com/questions/44556079/overwriting-data-to-an-existing-workbook-using-python/44596841#44596841", "title": "Overwriting data to an existing workbook using Python", "body": "<blockquote>\n  <p><strong>Comments</strong>: You have a <strong>Dict</strong> of <code>pandas.DataFrame</code>.  </p>\n</blockquote>\n\n<p>Selecting from a Dict using <code>list(fd_frames.values())[0]</code> does lead to <strong>unpredictable</strong> Results. Show the Keys of the Dict and choose the one you interested off using these Key, e.g.:</p>\n\n<pre><code> print(fd_frames.keys())\n &gt;&gt;&gt; dict_keys(['key_1', 'key_2', 'key_n']\n df_2 = fd_frames['key_2']\n</code></pre>\n\n<p>Beside this, neither of the Dimension in your <code>pandas.DataFrame</code> does match <code>M6:M30</code> = 25. There are only <strong>8 columns</strong> with <strong>20 Values</strong>. Therfore you have to align your Worksheet Range to <strong>20 Rows</strong>. To write Column 2017 to the Worksheet, e.g.:</p>\n\n<pre><code>wb['M6:M25'] = df_2['2017'].values\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong>: I have updated the code below to accept <code>numpy.ndarray</code> also.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><strong>Question</strong>: ... the goal is to pull the data and put it into an existing excel file</p>\n</blockquote>\n\n<p>Update a Workbooks Worksheet Range with List Values.<br>\n<strong>Using: OpenPyXL</strong>: <a href=\"http://openpyxl.readthedocs.io/en/default/\" rel=\"nofollow noreferrer\">A Python library to read/write Excel 2010 xlsx/xlsm files</a></p>\n\n<blockquote>\n  <p><strong>Note</strong>: Observe how the List Values have to be arranged!<br>\n  <strong>param values: List: *[row 1(col1, ... ,coln), ..., row n(col1, ... ,coln)]`</strong>  </p>\n</blockquote>\n\n<pre><code>from openpyxl import Workbook, load_workbook\n\nclass UpdateWorkbook(object):\n    def __init__(self, fname, worksheet=0):\n        self.fname = fname\n        self.wb = load_workbook(fname)\n        self.ws = self.wb.worksheets[worksheet]\n\n    def save(self):\n        self.wb.save(self.fname)\n\n    def __setitem__(self, _range, values):\n        \"\"\"\n         Assign Values to a Worksheet Range\n        :param _range:  String e.g ['M6:M30']\n        :param values: List: [row 1(col1, ... ,coln), ..., row n(col1, ... ,coln)]\n        :return: None\n        \"\"\"\n\n        def _gen_value():\n            for value in values:\n                yield value\n\n            if not isinstance(values, (list, numpy.ndarray)):\n                raise ValueError('Values Type Error: Values have to be \"list\": values={}'.\n                                  format(type(values)))\n            if isinstance(values, numpy.ndarray) and values.ndim &gt; 1:\n                raise ValueError('Values Type Error: Values of Type numpy.ndarray must have ndim=1; values.ndim={}'.\n                                  format(values.ndim))\n\n        from openpyxl.utils import range_boundaries\n        min_col, min_row, max_col, max_row = range_boundaries(_range)\n        cols = ((max_col - min_col)+1)\n        rows = ((max_row - min_row)+1)\n        if cols * rows != len(values):\n            raise ValueError('Number of List Values:{} does not match Range({}):{}'.\n                             format(len(values), _range, cols * rows))\n\n        value = _gen_value()\n        for row_cells in self.ws.iter_rows(min_col=min_col, min_row=min_row,\n                                           max_col=max_col, max_row=max_row):\n            for cell in row_cells:\n                cell.value = value.__next__()\n</code></pre>\n\n<blockquote>\n  <p><strong>Usage</strong>  </p>\n\n<pre><code>wb = UpdateWorkbook(r'C:\\Users\\vince\\Project\\Spreadsheet.xlsx', worksheet=1)\ndf_2 = fd_frames['key_2']\nwb['M6:M25'] = df_2['2017'].values\nwb.save()\n</code></pre>\n</blockquote>\n\n<p><strong><em>Tested with Python:3.4.2 - openpyxl:2.4.1 - LibreOffice:4.3.3.2</em></strong></p>\n"}, {"tags": [], "owner": {"reputation": 2693, "user_id": 4487782, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/502966757/picture?type=large", "display_name": "Arthur D. Howland", "link": "https://stackoverflow.com/users/4487782/arthur-d-howland"}, "is_accepted": false, "score": 0, "last_activity_date": 1556129291, "last_edit_date": 1556129291, "creation_date": 1556128931, "answer_id": 55836043, "question_id": 44556079, "link": "https://stackoverflow.com/questions/44556079/overwriting-data-to-an-existing-workbook-using-python/55836043#55836043", "title": "Overwriting data to an existing workbook using Python", "body": "<p>Here's how I do a similar procedure for other Stack explorers:</p>\n\n<pre><code>import pandas as pd\nfrom openpyxl import load_workbook\nfrom openpyxl.utils.dataframe import dataframe_to_rows\n\n... create your pandas dataframe df...\n\n# Writing from pandas back to an existing EXCEL workbook\n# Load workbook\nwb = load_workbook(filename=target, read_only=False, keep_vba=True)\nws = wb['Sheet1']\n\n# Overwrite Existing data in sheet with a dataframe.\nrows = dataframe_to_rows(df, index=False, header=True)\n\nfor r_idx, row in enumerate(rows, 1):\n    for c_idx, value in enumerate(row, 1):\n         ws.cell(row=r_idx, column=c_idx, value=value)\n\n# Save file\nwb.save('outfile.xlsm')\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 8038664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8b620ec147ff7cc70218f87da22c962?s=128&d=identicon&r=PG&f=1", "display_name": "vdub32", "link": "https://stackoverflow.com/users/8038664/vdub32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5591, "favorite_count": 0, "accepted_answer_id": 44596841, "answer_count": 2, "score": 0, "last_activity_date": 1556129291, "creation_date": 1497481971, "last_edit_date": 1498474491, "question_id": 44556079, "link": "https://stackoverflow.com/questions/44556079/overwriting-data-to-an-existing-workbook-using-python", "title": "Overwriting data to an existing workbook using Python", "body": "<p>I am new to Python and working on a project that I could use some help on. So I am trying to modify an existing excel workbook in order to compare stock data. Luckily, there was a program online that retrieved all the data I need and I have successful been able to pull the data and write the data into a new excel file. However, the goal is to pull the data and put it into an existing excel file. Furthermore, I need to overwrite the cell values in the existing file. I believe xlwings is able to do this and I think my code is on the right track, but I ran into an unexpected error. The error I get is:</p>\n\n<pre><code>TypeError: Objects of type 'Period' can not be converted to a COM VARIANT (but obtaining the buffer() of this object could)\n</code></pre>\n\n<p>I was wondering if anyone knew why this error came up? Also, does anyone know how to fix it? Is it fixable? Is my code wrong? Any help or guidance is appreciated. Thank you.</p>\n\n<pre><code>import good_morning as gm\nimport pandas as pd\nimport xlwings as xw\n\n#import income statement, balance sheet, and cash flow of AAPL\nfd = gm.FinancialsDownloader()\nfd_frames = fd.download('AAPL')\n\n#Creates a DataFrame for only the balance sheet\ndf1 = pd.DataFrame(list(fd_frames.values())[0])\n\n#connects to workbook I want to modify \nwb = xw.Book(r'C:\\Users\\vince\\Project\\Spreadsheet.xlsm')\n\n#sheet I would like to modify\nsht = wb.sheets[1]\n\n#modifies &amp; overwrites values in my spreadsheet(this is where I get the type_error)\nsht.range('M6').value = df1\n</code></pre>\n\n<p><strong>Data Types</strong>:  </p>\n\n<pre><code>type(fd_frames)\n&gt;&gt;&gt; &lt;class 'dict'&gt;\nfd_frames.values())[0].info()\n&gt;&gt;&gt; &lt;class 'pandas.core.frame.DataFrame'&gt; \nRangeIndex: 22 entries, 0 to 21 \nData columns (total 8 columns): \nparent_index 22 non-null int64 \ntitle 22 non-null object \n2012 19 non-null float64 \n2013 20 non-null float64 \n2014 20 non-null float64 \n2015 20 non-null float64 \n2016 20 non-null float64 \n2017 20 non-null float64 \ndtypes: float64(6), int64(1), object(1) \nmemory usage: 1.5+ KB\n</code></pre>\n"}, {"tags": ["python", "anki"], "comments": [{"owner": {"reputation": 821, "user_id": 4459923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SVEeL.jpg?s=128&g=1", "display_name": "Giorgian Borca-Tasciuc", "link": "https://stackoverflow.com/users/4459923/giorgian-borca-tasciuc"}, "edited": false, "score": 0, "creation_date": 1497645798, "post_id": 44556065, "comment_id": 76183706, "body": "Same problem, it&#39;s really frustrating."}, {"owner": {"reputation": 821, "user_id": 4459923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SVEeL.jpg?s=128&g=1", "display_name": "Giorgian Borca-Tasciuc", "link": "https://stackoverflow.com/users/4459923/giorgian-borca-tasciuc"}, "edited": false, "score": 0, "creation_date": 1498007762, "post_id": 44556065, "comment_id": 76316006, "body": "Hey, did my answer solve your problem? If so, could you mark my solution as the correct one? Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 4459923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SVEeL.jpg?s=128&g=1", "display_name": "Giorgian Borca-Tasciuc", "link": "https://stackoverflow.com/users/4459923/giorgian-borca-tasciuc"}, "is_accepted": false, "score": 3, "last_activity_date": 1497977322, "last_edit_date": 1592644375, "creation_date": 1497962751, "answer_id": 44653483, "question_id": 44556065, "link": "https://stackoverflow.com/questions/44556065/shipping-part-of-python-standard-library/44653483#44653483", "title": "Shipping part of Python standard library", "body": "<p>From the Anki doc:</p>\n<blockquote>\n<p>For a simple one-file add-on, you can upload the .py file. For multi-file add-ons, please create a subfolder that acts as a Python package, and create a small .py file that imports that package. Using the Japanese support add-on as an example, the structure looks like:</p>\n<pre><code>japanese/file1.py\njapanese/file2.py\njapanese/__init__.py # can be empty; marks the folder as a package\njapanese/&lt;binary support files&gt;\njp.py\n</code></pre>\n<p>To upload a multi-file add-on, please zip up the folder and the loader .py file and upload the zip.</p>\n</blockquote>\n<p>The <code>&lt;binary support files&gt;</code> can be the modules you want.</p>\n<p>Checkout <a href=\"https://github.com/glutanimate/html-cleaner\" rel=\"nofollow noreferrer\">html_cleaner</a> and <a href=\"https://github.com/glutanimate/image-occlusion-enhanced\" rel=\"nofollow noreferrer\">image-occlusion-enhanced\n</a> on Github if you want to see how others do it.</p>\n"}, {"tags": [], "owner": {"reputation": 28, "user_id": 4781072, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ytwR8AYYvXo/AAAAAAAAAAI/AAAAAAAAAc0/97O7wFJerAU/photo.jpg?sz=128", "display_name": "Sam Maynard", "link": "https://stackoverflow.com/users/4781072/sam-maynard"}, "is_accepted": false, "score": 0, "last_activity_date": 1591848867, "creation_date": 1591848867, "answer_id": 62316955, "question_id": 44556065, "link": "https://stackoverflow.com/questions/44556065/shipping-part-of-python-standard-library/62316955#62316955", "title": "Shipping part of Python standard library", "body": "<p>For anybody else who is wondering how to import a .so file (I was using a library that tried to <code>import parser</code> and discovered that <code>parser.__file__</code> was a .so file) the answer is it's the same as a .py file:</p>\n\n<p>Create a directory (<code>mkdir parser</code>), copy the .so file into that directory (<code>cp parser.cpython-37m-x86_64-linux-gnu.so parser/</code>) and then add an <code>__init__.py</code> to the directory (<code>touch parser/__init__.py</code>).</p>\n\n<p>This is almost certainly <em>not</em> cross platform, but it worked for my needs.</p>\n"}], "owner": {"reputation": 982, "user_id": 4371768, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/35ef19c8ab7750ce267350350c7e98dc?s=128&d=identicon&r=PG&f=1", "display_name": "julka", "link": "https://stackoverflow.com/users/4371768/julka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1591848867, "creation_date": 1497481799, "last_edit_date": 1497508099, "question_id": 44556065, "link": "https://stackoverflow.com/questions/44556065/shipping-part-of-python-standard-library", "title": "Shipping part of Python standard library", "body": "<p>How do I ship some standard modules from Python together with my code?</p>\n\n<p>I'm writing an add-on for Anki, for which I need <code>Queue</code> and <code>threading</code> modules from <code>Python2.7</code> standard library.</p>\n\n<p>When I try launching Anki, I get <code>ImportError: No module named Queue</code>. I assume that is because Anki does not ship with full Python interpreter and if I am missing any standard modules, I am to bundle them myself.</p>\n\n<p>From Anki <a href=\"https://apps.ankiweb.net/docs/addons.html#standard-modules\" rel=\"nofollow noreferrer\">docs on addons</a>:</p>\n\n<blockquote>\n  <p>Standard Modules</p>\n  \n  <p>Anki ships with only the standard modules necessary to run the program\n  - a full copy of Python is not included. For that reason, if you need to use a standard module that is not included with Anki, you\u2019ll need\n  to bundle it with your add-on.</p>\n</blockquote>\n\n<p>So my question is: what steps do I take to bundle standard Python modules <code>threading</code> and <code>Queue</code> together with my add-on?</p>\n\n<p>Note that add-ons in Anki are just Python scripts that have certain extra modules available.</p>\n"}, {"tags": ["python", "windows", "python-2.7", "batch-file"], "comments": [{"owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1497492404, "post_id": 44556025, "comment_id": 76104983, "body": "<code>where python3</code> returns <code>INFO: Could not find files for the given pattern(s).</code> I&#39;d use <code>py.exe</code> as <code>py -3 \\\\Myserver\\Pythonstuff\\myscript.py</code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1497508241, "post_id": 44556025, "comment_id": 76109567, "body": "Python 3 from python.org doesn&#39;t install a <code>python3</code> command, so does &quot;python3.exe&quot; exist (could be a copy, link, or symlink; doesn&#39;t matter), or is that a &quot;python3.lnk&quot; shell shortcut or &quot;python3.bat&quot; batch script? If it&#39;s actually &quot;python3.exe&quot;, try using the fully-qualified path."}, {"owner": {"reputation": 703, "user_id": 7564393, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e4fbdb9b38a8450b00833f60f4cc1077?s=128&d=identicon&r=PG&f=1", "display_name": "AGH_TORN", "link": "https://stackoverflow.com/users/7564393/agh-torn"}, "edited": false, "score": 0, "creation_date": 1497534061, "post_id": 44556025, "comment_id": 76126817, "body": "I made a copy of Python.exe in my Python27 and Python35 folders and created an environment variable. So I can just call Python2/3 in cmd and it&#39;ll open the respective shell."}], "owner": {"reputation": 703, "user_id": 7564393, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e4fbdb9b38a8450b00833f60f4cc1077?s=128&d=identicon&r=PG&f=1", "display_name": "AGH_TORN", "link": "https://stackoverflow.com/users/7564393/agh-torn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497481415, "creation_date": 1497481415, "question_id": 44556025, "link": "https://stackoverflow.com/questions/44556025/scheduling-python-script-with-two-versions-of-python", "title": "Scheduling Python Script with two versions of Python", "body": "<p>I've got two versions of Python installed (2.7 and 3.5) via ArcGIS (Desktop 10.4 and Pro). I have multiple scripts that must run daily. The Python 2 scripts all run perfectly via Windows Task Scheduler, however, my Python 3 scripts simply refuse to run via the task scheduler. </p>\n\n<p>I originally had them set to run from .bat files which works fine when operated manually.</p>\n\n<pre><code>@echo off\npython3 \\\\Myserver\\Pythonstuff\\myscript.py\n</code></pre>\n\n<p>These .bat files will not operate via the task scheduler. Some things I've tried:</p>\n\n<ul>\n<li>set python3.exe as the program/script and add in the script location as the argument</li>\n<li>set cmd as the program/script and add python3 \\Myserver\\Pythonstuff\\myscript.py as the argument</li>\n</ul>\n\n<p>Nothing seems to work here. I need the other scripts to run in Python 2 and I can't mess everything up with them so I'd like to maintain their Python2/3 integrity between the scripts. Any ideas?</p>\n"}, {"tags": ["python", "pandas", "lifetime", "outliers"], "comments": [{"owner": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1497482894, "post_id": 44556004, "comment_id": 76102892, "body": "<i>absolute delta value of 0.20 different to the average of the 3 prior columns</i> is taking the average of three consecutive columns, subtracting it from the following columns, and then looking for values that stand out. This is called <i>de-trending</i> and is a common technique in <i>outlier detection</i>. There are many different ways to do it, it&#39;s hard to say which one is best in your case. I&#39;d plot the values, try different ways to de-trend, and see what works. This looks like a good start: <a href=\"https://bugra.github.io/work/notes/2014-03-31/outlier-detection-in-time-series-signals-fft-median-filtering/\" rel=\"nofollow noreferrer\">bugra.github.io/work/notes/2014-03-31/&hellip;</a>"}, {"owner": {"reputation": 2449, "user_id": 2386086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Nf1gl.jpg?s=128&g=1", "display_name": "IcemanBerlin", "link": "https://stackoverflow.com/users/2386086/icemanberlin"}, "reply_to_user": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1497483325, "post_id": 44556004, "comment_id": 76103004, "body": "Thanks @AleksanderLidtke. I wasn&#39;t sure on the terminologies, I will check that page out."}, {"owner": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1497493153, "post_id": 44556004, "comment_id": 76105118, "body": "no worries, hope it works. I&#39;ve done such stuff before so, if you have any problems or want to discuss something, drop me a message. Section 2.4 of my paper from a few years ago might also be useful (2.3 as well, but it&#39;s a bit more involved and application-specific): <a href=\"https://eprints.soton.ac.uk/390088/1/Lidtke.pdf\" rel=\"nofollow noreferrer\">eprints.soton.ac.uk/390088/1/Lidtke.pdf</a>"}], "owner": {"reputation": 2449, "user_id": 2386086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Nf1gl.jpg?s=128&g=1", "display_name": "IcemanBerlin", "link": "https://stackoverflow.com/users/2386086/icemanberlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497490759, "creation_date": 1497481236, "last_edit_date": 1497490759, "question_id": 44556004, "link": "https://stackoverflow.com/questions/44556004/pandas-python-lifetime-curves-how-to-remove-outliers-from-the-curves", "title": "Pandas Python Lifetime Curves, How to remove outliers from the curves", "body": "<p>I have some lifetime data of subscriptions that shows the % of billings of a week vs the first week the subscription was created. So if there were 1000 subs created and in \"Billed Week5\" there is still 0.3166 remaining (i.e.316.6 of those billed).</p>\n\n<p>I want to clean out \"bad data\". Sometimes we don't bill for some weeks due to technical issues and then do catch up billings. this screws up my retention curves when using it for other predictions. </p>\n\n<p>How can I clear out some of those technical error related retention % rates so I don't use them in my model.</p>\n\n<p>I was thinking some logic like. If current value of the retention rate(% difference between column X and column X -1) is a Absolute delta value of 0.20 different to the average of the 3 prior columns then remove the value. i.e. in the last table below, I would want to get rid of values in row 1 column %Billed Week4 and %Billed Week5. I think my rule would kill %Billed Week6 as well(even though the actual rate in the corresponding table of 0.1990 looks fine.</p>\n\n<p>I tried doing a lambda like this but got the error \"TypeError: 'float' object is not subscriptable\" If I could get that working I could loop through the columns.</p>\n\n<pre><code>df['%BilledWeek5']= df['%BilledWeek5'].apply(lambda x: x if (((x['%BilledWeek4'] + x['%BilledWeek3'] + x['%BilledWeek2'])/3)/x-1).abs() &lt;0.2 else '')\n</code></pre>\n\n<p>Maybe I am completely going about this the wrong way. There is probably some statistical functions to use too.</p>\n\n<pre><code>import pandas as pd\n\nsubscriptionlifetime = [{'Country':'DE','Product':'Cable','Created Week':'cWeek1','Billed Week1':0.2430,'Billed Week2':0.2240,'Billed Week3':0.2207,'Billed Week4':0.0934,\n'Billed Week5':0.3166,'Billed Week6':0.1990,'Billed Week7':0.1889,'Billed Week8':0.1816},\n         {'Country':'DE','Product':'Cable','Created Week':'cWeek2','Billed Week1':0.2411,'Billed Week2':0.2407,\n         'Billed Week3':0.2234,'Billed Week4':0.2222,'Billed Week5':0.0917,'Billed Week6':0.3206,'Billed Week7':0.2006,'Billed Week8':0.1909},\n         {'Country':'AU','Product':'Satelite','Created Week':'cWeek1','Billed Week1':0.3019,'Billed Week2':0.2884,\n         'Billed Week3':0.2884,'Billed Week4':0.2682,'Billed Week5':0.2657,'Billed Week6':0.1076,'Billed Week7':0.3856,'Billed Week8':0.2403},\n         {'Country':'AU','Product':'Satelite','Created Week':'cWeek2','Billed Week1':0.2864,'Billed Week2':0.2748,\n         'Billed Week3':0.2623,'Billed Week4':0.2453,'Billed Week5':0.2420,'Billed Week6':0.0963,'Billed Week7':0.3539,'Billed Week8':0.2216}]\n\ndf = pd.DataFrame(subscriptionlifetime)\n\ndf = df[['Country','Product','Created Week', 'Billed Week1', 'Billed Week2', 'Billed Week3', 'Billed Week4', 'Billed Week5','Billed Week6' , 'Billed Week7', 'Billed Week8']]         \n\nprint(df)\n\n  Country   Product Created Week  Billed Week1  Billed Week2  Billed Week3  \\\n0      DE     Cable       cWeek1        0.2430        0.2240        0.2207   \n1      DE     Cable       cWeek2        0.2411        0.2407        0.2234   \n2      AU  Satelite       cWeek1        0.3019        0.2884        0.2884   \n3      AU  Satelite       cWeek2        0.2864        0.2748        0.2623   \n\n   Billed Week4  Billed Week5  Billed Week6  Billed Week7  Billed Week8  \n0        0.0934        0.3166        0.1990        0.1889        0.1816  \n1        0.2222        0.0917        0.3206        0.2006        0.1909  \n2        0.2682        0.2657        0.1076        0.3856        0.2403  \n3        0.2453        0.2420        0.0963        0.3539        0.2216  \n\n\nfor x in range(2,8):\n\n    df['%BilledWeek'+str(x)] = df['Billed Week'+str(x)]/df['Billed Week'+str(x-1)]\n    print (x)\n\nprint(df)\n\n\n  Country   Product Created Week  Billed Week1  Billed Week2  Billed Week3  \\\n0      DE     Cable       cWeek1        0.2430        0.2240        0.2207   \n1      DE     Cable       cWeek2        0.2411        0.2407        0.2234   \n2      AU  Satelite       cWeek1        0.3019        0.2884        0.2884   \n3      AU  Satelite       cWeek2        0.2864        0.2748        0.2623   \n\n   Billed Week4  Billed Week5  Billed Week6  Billed Week7  Billed Week8  \\\n0        0.0934        0.3166        0.1990        0.1889        0.1816   \n1        0.2222        0.0917        0.3206        0.2006        0.1909   \n2        0.2682        0.2657        0.1076        0.3856        0.2403   \n3        0.2453        0.2420        0.0963        0.3539        0.2216   \n\n   %BilledWeek2  %BilledWeek3  %BilledWeek4  %BilledWeek5  %BilledWeek6  \\\n0      0.921811      0.985268      0.423199      3.389722      0.628553   \n1      0.998341      0.928126      0.994628      0.412691      3.496183   \n2      0.955283      1.000000      0.929958      0.990679      0.404968   \n3      0.959497      0.954512      0.935189      0.986547      0.397934   \n\n   %BilledWeek7  \n0      0.949246  \n1      0.625702  \n2      3.583643  \n3      3.674974  \n</code></pre>\n"}, {"tags": ["python", "linux", "unix"], "comments": [{"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1497482163, "post_id": 44555995, "comment_id": 76102719, "body": "Not a solution to the problem, but <code>chmod 777</code> is (almost) never the right thing to do. Set only the privileges you actually need. In this case that&#39;s most likely <code>755</code> (you get read/write/execute, others get read/execute)"}, {"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1497482461, "post_id": 44555995, "comment_id": 76102798, "body": "Have you checked that you can run the script using the path you&#39;re providing? Instead of <code>python sample.py</code>, can you run <code>&#47;the&#47;full&#47;path&#47;from&#47;shbang sample.py</code>? If yes, then the problem is likely with the formatting of the first line. If no, then either you&#39;re pointing at the wrong python binary, or the python installation is broken."}, {"owner": {"reputation": 590, "user_id": 2868465, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1083102857/picture?type=large", "display_name": "rrlamichhane", "link": "https://stackoverflow.com/users/2868465/rrlamichhane"}, "reply_to_user": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1497482838, "post_id": 44555995, "comment_id": 76102877, "body": "@viraptor, yes I can run the script using the path from shebang, I also added this to my edit above. The formatting is correct, I double checked, and the python installation cannot be broken because I can run scripts using both &#39;python&#39; command and &#39;/path/from/shebang/&#39; command."}, {"owner": {"reputation": 171, "user_id": 6412102, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GV1BQjUwDiw/AAAAAAAAAAI/AAAAAAAAAMQ/Bl1UYkv3PF0/photo.jpg?sz=128", "display_name": "Borko Jandras", "link": "https://stackoverflow.com/users/6412102/borko-jandras"}, "edited": false, "score": 0, "creation_date": 1497483283, "post_id": 44555995, "comment_id": 76102996, "body": "Any spaces or characters that would need quoting in paths?"}, {"owner": {"reputation": 590, "user_id": 2868465, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1083102857/picture?type=large", "display_name": "rrlamichhane", "link": "https://stackoverflow.com/users/2868465/rrlamichhane"}, "reply_to_user": {"reputation": 171, "user_id": 6412102, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GV1BQjUwDiw/AAAAAAAAAAI/AAAAAAAAAMQ/Bl1UYkv3PF0/photo.jpg?sz=128", "display_name": "Borko Jandras", "link": "https://stackoverflow.com/users/6412102/borko-jandras"}, "edited": false, "score": 0, "creation_date": 1497483507, "post_id": 44555995, "comment_id": 76103055, "body": "@BorkoJandras, the path is basically this: <code>&#47;abc&#47;xyz&#47;disks&#47;ab.xyz.123&#47;myname&#47;bin&#47;python&#47;Python-3.6.1&#47;pyt&zwnj;&#8203;hon</code>. The only odd thing I see is periods and hyphens. The full path of the python file is also very similar to this."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 2868465, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1083102857/picture?type=large", "display_name": "rrlamichhane", "link": "https://stackoverflow.com/users/2868465/rrlamichhane"}, "edited": false, "score": 0, "creation_date": 1497481952, "post_id": 44556058, "comment_id": 76102659, "body": "Thanks for the response. I tried that but it doesn&#39;t work. Please look at my edit for more detail."}], "tags": [], "owner": {"reputation": 395, "user_id": 2649657, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/675782742/picture?type=large", "display_name": "Alex Barry", "link": "https://stackoverflow.com/users/2649657/alex-barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1497481694, "creation_date": 1497481694, "answer_id": 44556058, "question_id": 44555995, "link": "https://stackoverflow.com/questions/44555995/executable-py-file-with-shebang-path-to-which-python-gives-error-command-not-f/44556058#44556058", "title": "Executable .py file with shebang path to which python gives error, command not found", "body": "<p>Try using <code>#!/usr/bin/env python</code> as described in <a href=\"https://stackoverflow.com/questions/17846908/proper-shebang-for-python-script\">this post</a>. Let the OS do the work.</p>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 2868465, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1083102857/picture?type=large", "display_name": "rrlamichhane", "link": "https://stackoverflow.com/users/2868465/rrlamichhane"}, "edited": false, "score": 0, "creation_date": 1497561954, "post_id": 44556361, "comment_id": 76143232, "body": "You&#39;re a lifesaver. That&#39;s it. Goddammit! I ran <code>dos2unix sample.py</code> and now it runs fine. Thanks a lot!"}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 2, "last_activity_date": 1497483997, "creation_date": 1497483997, "answer_id": 44556361, "question_id": 44555995, "link": "https://stackoverflow.com/questions/44555995/executable-py-file-with-shebang-path-to-which-python-gives-error-command-not-f/44556361#44556361", "title": "Executable .py file with shebang path to which python gives error, command not found", "body": "<p>Your file has DOS line endings (CR+LF). It works if you run <code>python sample.py</code> but doesn't work if you run <code>./sample.py</code>. Recode the file so it has Unix line endings (pure LF at the end of every line).</p>\n"}], "owner": {"reputation": 590, "user_id": 2868465, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1083102857/picture?type=large", "display_name": "rrlamichhane", "link": "https://stackoverflow.com/users/2868465/rrlamichhane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "accepted_answer_id": 44556361, "answer_count": 2, "score": 1, "last_activity_date": 1497483997, "creation_date": 1497481189, "last_edit_date": 1497482736, "question_id": 44555995, "link": "https://stackoverflow.com/questions/44555995/executable-py-file-with-shebang-path-to-which-python-gives-error-command-not-f", "title": "Executable .py file with shebang path to which python gives error, command not found", "body": "<p>I have a self-installed python in my user directory in a corporate UNIX SUSE computer (no sudo privilege):</p>\n\n<p><code>which python\n&lt;user&gt;/bin/python/Python-3.6.1/python</code></p>\n\n<p>I have an executable (chmod 777) sample.py file with this line at the top of the file:</p>\n\n<p><code>#!&lt;user&gt;/bin/python/Python-3.6.1/python</code></p>\n\n<p>I can execute the file like this:</p>\n\n<p><code>python sample.py</code></p>\n\n<p>But when I run it by itself I get an error:</p>\n\n<p><code>/full/path/sample.py\n /full/path/sample.py: Command not found</code></p>\n\n<p>I have no idea why it's not working. I'm discombobulated as what might be going wrong since the file is executable, the python path is correct, and the file executes if I put a python command in the front. What am I missing?</p>\n\n<p>EDIT:\nI tried putting this on top of the file:</p>\n\n<p><code>#!/usr/bin/env python</code></p>\n\n<p>Now, I get this error:</p>\n\n<p><code>: No such file or directory</code></p>\n\n<p>I tried this to make sure my env is correct</p>\n\n<p><code>which env\n /usr/bin/env</code></p>\n\n<p>EDIT2:\nYes, I can run the script fine using the shebang command like this:\n<code>&lt;user&gt;/bin/python/Python-3.6.1/python /full/path/sample.py</code></p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 2, "creation_date": 1497481104, "post_id": 44555973, "comment_id": 76102390, "body": "It&#39;s entirely up to the implementor. Do you want peeps to be able to pass <code>--option</code> or not. There is no difference between them in practice. <code>argparse</code> has the machinery to handle either input."}, {"owner": {"reputation": 20333, "user_id": 774078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/seSXR.png?s=128&g=1", "display_name": "Sterling Archer", "link": "https://stackoverflow.com/users/774078/sterling-archer"}, "edited": false, "score": 3, "creation_date": 1497481121, "post_id": 44555973, "comment_id": 76102391, "body": "<a href=\"https://askubuntu.com/questions/492544/what-are-the-differences-between-and-in-commands\" title=\"what are the differences between and in commands\">askubuntu.com/questions/492544/&hellip;</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1497487395, "post_id": 44555973, "comment_id": 76103954, "body": "<code>argparse</code> is following POSIX (linux) conventions for short and long option flags.  While there are some detailed differences in how they are handled, they are basically synonyms.  And you can use more than these two."}], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1497482311, "creation_date": 1497482311, "answer_id": 44556122, "question_id": 44555973, "link": "https://stackoverflow.com/questions/44555973/python-argparse-diiference-between-o-and-option/44556122#44556122", "title": "Python argparse: diiference between -o and --option", "body": "<p>Sometimes it might be easier to use long option names, especially with vague names or when the short options are hard to come by, and sometimes it's just the opposite. If you think that might be the situation, you can put in both forms of options, and let the user choose his favorite.</p>\n\n<p>Would you prefer <code>script.py -r1000</code> or <code>script.py --repeat 1000</code>? I'd say it's all about taste, and if you're dealing with a lot of people using it, you might want to consider theirs.</p>\n\n<blockquote>\n  <p>What is the difference between <code>-a</code> and <code>--argument</code> when adding an argument?</p>\n</blockquote>\n\n<p>As long as you add them both in the <code>add_argument</code> function, the answer is - with <code>-a</code> you can stick the values (if there are any) right after the <code>-a</code>, no space required, like the example in the second paragraph. That's aside, none.</p>\n"}, {"tags": [], "owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "is_accepted": false, "score": 2, "last_activity_date": 1497484294, "last_edit_date": 1497484294, "creation_date": 1497483305, "answer_id": 44556265, "question_id": 44555973, "link": "https://stackoverflow.com/questions/44555973/python-argparse-diiference-between-o-and-option/44556265#44556265", "title": "Python argparse: diiference between -o and --option", "body": "<p>If both are specified, then argparse will store the value in the long form ('argument') rather than the short form ('a'). It will infer the destination, so \"--foo-bar\" will be stored in <code>foo_bar</code>.</p>\n\n<p>You can mash together short forms and use a single hyphen (<code>-af</code>) but unlike some *NIX commands, order is important: If your argument requires a value (<code>-f filename</code>) then the argument <em>must</em> appear as the final argument of the group of short-form arguments:</p>\n\n<pre><code>cmd -af my_file   # works\ncmd -fa my_file   # does not work\n</code></pre>\n\n<p>Compare this with the monster <code>tar(1)</code> which allows <code>tar -cfC myfile.tar ./directory</code> and will correctly sort it out as logically equivalent to <code>tar -c -f myfile.tar -C ./directory</code>. Also, some long forms allow the use of '=' when specifying the option <code>tar -cf myfile.tar</code>, versus <code>tar -c --file=myfile.tar</code>. You cannot use '=' on short forms.</p>\n\n<p>Fortunately, python argparse doesn't care about '='. Use it or not, with short form or long form.</p>\n\n<pre><code># All equivalent:\n  cmd -af=my_file\n  cmd -a -f my_file\n  cmd -a -fmy_file\n  cmd -afmy_file\n  cmd --file my_file -a\n  cmd --file=my_file -a\n</code></pre>\n\n<p>Does it matter? As another answer suggests, the long form can help with readability. Short form can make your power-users happier.</p>\n"}, {"tags": [], "owner": {"reputation": 7571, "user_id": 462923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0a4af46708dcb9ac3741df76df8d3ec?s=128&d=identicon&r=PG", "display_name": "Ajeet Ganga", "link": "https://stackoverflow.com/users/462923/ajeet-ganga"}, "is_accepted": false, "score": 1, "last_activity_date": 1497485203, "creation_date": 1497485203, "answer_id": 44556527, "question_id": 44555973, "link": "https://stackoverflow.com/questions/44555973/python-argparse-diiference-between-o-and-option/44556527#44556527", "title": "Python argparse: diiference between -o and --option", "body": "<p>Trying to capture the spirit of the '-' vs '--'.</p>\n\n<p>Just to be succinct, both the type of parameters are equally capable. I can't think of anything that you can do in one type but not in another (except mashing single chars with single hyphen which usually python programmers don't do.).</p>\n\n<ul>\n<li><p><code>-</code></p>\n\n<ul>\n<li>Known as short-form parameter.</li>\n<li>E.g. <code>-f filename</code></li>\n<li>Use this for parameters that will be either always used or easily understood by the user of your program.</li>\n<li>Usually this is always present.</li>\n</ul></li>\n<li><p><code>--</code></p>\n\n<ul>\n<li>Known as long-form parameter name.</li>\n<li>E.g. <code>--directory /root/foobar</code></li>\n<li>This format is usually used only when you have multiple competing single characters for the parameter. E.g. if your code accepts <code>d</code>irectory and <code>d</code>ate, then better mention the long form options for both.</li>\n<li>This type is not always present (unless you have a mild OCD about providing short and long form always.)</li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 8316, "user_id": 4759209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff821860933d0565fe62aed9fe2132f7?s=128&d=identicon&r=PG&f=1", "display_name": "farhawa", "link": "https://stackoverflow.com/users/4759209/farhawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 2, "answer_count": 3, "score": 5, "last_activity_date": 1497485203, "creation_date": 1497481020, "question_id": 44555973, "link": "https://stackoverflow.com/questions/44555973/python-argparse-diiference-between-o-and-option", "title": "Python argparse: diiference between -o and --option", "body": "<p>I am trying to understand the <code>argparse</code> package and I really can't find an answer to this very simple question:</p>\n\n<ul>\n<li>What is the difference between <code>-a</code> and <code>--argument</code> when adding an argument?</li>\n</ul>\n\n<p>Sometimes, I find both in one <code>add_argument()</code> like here:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>parser.add_argument(\n        \"-f\", \"--file\",\n        help=\"file path\"\n        )\n</code></pre>\n"}, {"tags": ["python", "excel", "python-2.7"], "comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1497480833, "post_id": 44555928, "comment_id": 76102302, "body": "Welcome to SO: Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your question is far too broad for this forum and you likely won&#39;t get all the answers you need. You can always hire some help. I&#39;ll write your code for $5 and some beer :)"}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 870223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b720389e213a91146f82585c536833e2?s=128&d=identicon&r=PG&f=1", "display_name": "Biyau", "link": "https://stackoverflow.com/users/870223/biyau"}, "is_accepted": false, "score": 0, "last_activity_date": 1497492773, "last_edit_date": 1592644375, "creation_date": 1497492425, "answer_id": 44557395, "question_id": 44555928, "link": "https://stackoverflow.com/questions/44555928/find-headings-from-multiple-text-files-in-one-location-and-add-to-xlsx-document/44557395#44557395", "title": "find headings from multiple text files in one location and add to xlsx document with same headings", "body": "<p>I'm still a beginner myself, but I thought this seemed easy enough. Its more of a starting point for you to build on and customize. I only choose to do one column (Person), I'm pretty sure everything you need to do what you want is in this example. You'll have to install the 2 required python libraries needed to access spreadsheets by running the next 2 commands (assuming you're using some type of linux, you didn't provide enough info):</p>\n<blockquote>\n<p>pip install xlrd</p>\n<p>pip install xlutils</p>\n</blockquote>\n<p>Here's the example, the comments roughly explain what each line does.</p>\n<pre><code>#!/usr/bin/env python\n\n''' Required to install these libraries to access spreadsheets\npip install xlrd\npip install xlutils\n'''\n\nimport os, re, string\n\nfrom xlutils.copy import copy    \nfrom xlrd import open_workbook\n\nbook_ro = open_workbook(&quot;spreadsheet.xls&quot;)\n\n# creates a writeable copy\nbook = copy(book_ro)\n\n# Select first sheet\nsheet1 = book.get_sheet(0)\n\n# Create list to hold people, otherwise we have to figure out the next empty column in spreadsheet\npeopleList = []\n\n# Get list of files in current folder and filter only the txt files\nfor root, dirs, docs in os.walk('.', topdown=True):            \n\n    for filename in docs:\n            if (filename.endswith(&quot;.txt&quot;)) or (filename.endswith(&quot;.TXT&quot;)):\n                filepath=(os.path.join(root, name))\n\n                # Open file read only\n                TxtFile = open(filepath,&quot;r&quot;)\n\n                # Read all the lines at once in variable\n                lines = TxtFile.readlines()\n                \n                # Finished reading, close file\n                TxtFile.close()\n\n                # Convert file to big string so it can be searched with re.findall\n                lines = '\\n'.join(lines)\n\n                # Find all occurences of &quot;person:&quot; and capture rest of line\n                people = re.findall(r'person: (.*)',lines)\n\n                # Remove delimeters/special character separating each name\n                people = map(lambda x: x.strip(), people)\n\n                # If file has more than 1 person, add each one individually\n                for person in people:\n                    peopleList.append(person)\n\nrow = 0\ncolumn = 0\n\n# Sort the list and remove duplicates (set(sort)), then step thru list and write to spreadsheet\nfor person in set(sorted(peopleList)):\n    sheet1.write(row, column, person)\n    row += 1\n\n# This will overwrite the original spreadsheet if one existed\nbook.save(&quot;spreadsheet.xls&quot;)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8163116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/871dcfd530a71d0b6bd23d1bb24083d3?s=128&d=identicon&r=PG&f=1", "display_name": "smget_1", "link": "https://stackoverflow.com/users/8163116/smget-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497492773, "creation_date": 1497480721, "question_id": 44555928, "link": "https://stackoverflow.com/questions/44555928/find-headings-from-multiple-text-files-in-one-location-and-add-to-xlsx-document", "title": "find headings from multiple text files in one location and add to xlsx document with same headings", "body": "<p>I need to create a Python program that will read through multiple .txt files in a set directory, then look for specific headings from within the text files and store the data found under the headings from the searched text in a .xlsx document</p>\n\n<p><em>An example of a .txt file</em></p>\n\n<pre><code>person:         Vyacheslav Danik\naddress:        Ukraine, Kharkov\nphone:          +380675746805\naddress:        Ukraine, Kharkiv\naddress:        Pavlova st., 319\n</code></pre>\n\n<p>I need 5 Headers in the excel spreadsheet; number, organization, role, name, and address. And for the python program to put information under these headings in the spreadsheet from each file scanned.</p>\n\n<p>Any help would be appreciated, as I'm struggling a bit with this. Thanks</p>\n"}, {"tags": ["python", "python-imaging-library", "pillow"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8364016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743844892295887/picture?type=large", "display_name": "Anna ", "link": "https://stackoverflow.com/users/8364016/anna"}, "is_accepted": false, "score": 0, "last_activity_date": 1510059437, "last_edit_date": 1510059437, "creation_date": 1510058965, "answer_id": 47158451, "question_id": 44555907, "link": "https://stackoverflow.com/questions/44555907/save-coordinates-of-transformed-pasted-image/47158451#47158451", "title": "Save coordinates of transformed pasted image", "body": "<p>To get coordinates of transformed points you can do the following:</p>\n\n<p>After getting transformation matrix:</p>\n\n<pre><code>transformed_img = cv2.warpPerspective(source_img, m, image_shape)\n</code></pre>\n\n<p>You apply it to image:</p>\n\n<pre><code>transformed_img = cv2.warpPerspective(source_img, m, image_shape)\n</code></pre>\n\n<p>and transformed image contains result with coordinates which you want to calculate and some black region.</p>\n\n<p>So, the solution for each of 4 points' coordinates (if there are no 0 coordinates) is the following:</p>\n\n<pre><code>point = np.array([w, h]) #width and hight of the source point (before transform)\nhomg_point = [point[0], point[1], 1] # homogeneous coords\ntransf_homg_point = m.dot(homg_point) # transform\ntransf_homg_point /= transf_homg_point1[2] # scale\ntransf_point = transf_homg_point[:2] # remove Cartesian coords\nprint(transf_point) #check the result\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/O9KMx.png\" alt=\"tranformation coordinates\"></p>\n"}], "owner": {"reputation": 199, "user_id": 3422527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5ddbfa79c7231ea36913573de3d2359?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3422527/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510059437, "creation_date": 1497480579, "question_id": 44555907, "link": "https://stackoverflow.com/questions/44555907/save-coordinates-of-transformed-pasted-image", "title": "Save coordinates of transformed pasted image", "body": "<p>I'm pasting a randomly generated barcode on a background image.</p>\n\n<p>This barcode has been randomly rotated, skewed, and scaled.</p>\n\n<p>Then, this barcode is randomly placed onto the background image.</p>\n\n<p>I'm trying to find out the coordinates of the actual barcode, ignoring the expanded black mask.</p>\n\n<p>I'm a beginner in matrices and image manipulation so any help, especially in the math, would be appreciated.</p>\n\n<p>This is where I generate the barcode, using pdf417gen library, along with the coordinates of the barcode.</p>\n\n<pre><code>import numpy as np\nimport os\nimport random\nimport sys\n\nfrom pdf417gen import encode, render_image\nfrom PIL import Image\n\ndef generate_barcode(self):\n    barcode = encode(\"random text data\", columns=5, security_level=5)\n    scale = 5\n    ratio = 3\n    padding = 5\n\n    barcode_image = render_image(barcode, scale=scale, ratio=ratio, padding=padding)\n    barcode_coords = np.array([\n        [(barcode_image.width - padding) / float(barcode_image.width), (barcode_image.height - padding) / float(barcode_image.height)],\n        [padding / float(barcode_image.width), (barcode_image.height - padding) / float(barcode_image.height)],\n        [padding / float(barcode_image.width), padding / float(barcode_image.height)],\n        [(barcode_image.width - padding) / float(barcode_image.width), padding / float(barcode_image.height)]\n    ])\n\n    return (barcode_coords, barcode_image)\n</code></pre>\n\n<p>Once I have the barcode's image and coordinate, I do the following. </p>\n\n<ol>\n<li>transform the barcode's image</li>\n<li>attempt to match the coordinates with the image's transformation</li>\n<li>paste the image onto a background image</li>\n<li>then draw a red outline using the coordinates</li>\n</ol>\n\n<p>The red outline should outline the barcode's image.</p>\n\n<p>Here's where I transform the barcode image and paste it to the background image.</p>\n\n<pre><code>def composite_images(self, background_image, barcode_coords, barcode_image):\n    coords = barcode_coords\n    barcode = barcode_image\n\n    # instantiating the transformation variables\n    scale = random.randrange(4, 50) / 100.0\n    size = int( min(background_image.size) * scale) # background_image.size returns (width, height)\n    barcode = barcode.resize((int(size * 2.625), size)) # width:height ratio is 2.625:1\n    rotation = random.randrange(0, 360)\n    xstretch = random.randrange(0, 100) / 100.0\n    ystretch = random.randrange(0, 100) / 100.0\n    xshear = random.randrange(0, 100) / 100.0\n    yshear = random.randrange(0, 100) / 100.0\n\n    # set affine transform on the barcode coordinates\n    affine_transform = get_affine_transform(rotation, xstretch, ystretch, xshear, yshear)\n    coords = transform_coords(coords, affine_transform, True)\n    expand_mask = transform_coords(np.array([  # shifts expand mask based on transformation\n        [0.0, 0.0],\n        [float(size * 2.625), 0.0],\n        [float(size * 2.625), float(size)],\n        [0.0, float(size)]\n    ]), mat, False)\n\n    minx = min(expand_mask[:,0])\n    maxx = max(expand_mask[:,0])\n    miny = min(expand_mask[:,1])\n    maxy = max(expand_mask[:,1])\n\n    mat_inv = np.linalg.inv(np.array([  # the inverse matrix\n        [mat[0,0], mat[0,1], -minx],\n        [mat[1,0], mat[1,1], -miny],\n        [0,0,1.0]\n    ]))\n    image_matrix = (mat_inv[0,0], mat_inv[0,1], mat_inv[0,2], \n        mat_inv[1,0], mat_inv[1,1], mat_inv[1,2])\n    new_size = (int(maxx-minx), int(maxy-miny))\n\n    # set affine transform on the barcode image using data from coordinates affine transformation\n    barcode = barcode.transform(new_size, method=Image.AFFINE, data=image_matrix)\n\n    # paste the barcode image onto a random position on background image\n    region_x = random.randrange(0, background_image.width - size)\n    region_y = random.randrange(0, background_image.height - size)\n    background_image.paste(barcode, (region_x, region_y))\n\n    coords *= scale\n    coords += [region_x / float(background_image.width), region_y / float(background_image.height)]\n\n    return(coords, background_image)\n\ndef get_affine_transform(self, rotation, xstretch, ystretch, xshear, yshear):\n    theta = -(rotation / 180.0) * np.pi\n    return np.array([\n        [np.cos(theta) * xstretch, -np.sin(theta) * xshear],\n        [np.sin(theta) * ystretch, np.cos(theta) * yshear]\n    ])\n\ndef transform_coords(self, coords, affine_transform, center):\n    if center:\n        coords -= (.5, .5) # center on origin\n    coords = np.dot(coords, affine_transform.T)\n    if center:\n        coords += (.5, .5) # reset centering\n    return coords\n</code></pre>\n\n<p>Now I draw the red outline using the coords and image (with pasted barcode) returned from <code>composite_images()</code>.</p>\n\n<pre><code>def draw_red_outline(self, box_coords, image):\n    outline = box_coords * [image.width, image.height]\n    outline = outline.astype(int)\n    outline = tuple(map(tuple, outline))\n\n    draw = ImageDraw.Draw(image)\n    draw.poly(outline, outline=(255,0,0,0))\n    del draw\n\n    image.show()\n</code></pre>\n\n<p>I'm unsure as to where my math is going wrong.</p>\n"}, {"tags": ["python", "windows", "memory", "popen"], "owner": {"reputation": 11, "user_id": 5032420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/322f5bf5b2aa1d34b825af333aced1ec?s=128&d=identicon&r=PG&f=1", "display_name": "eggeggegg", "link": "https://stackoverflow.com/users/5032420/eggeggegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1497481946, "answer_count": 0, "score": 1, "last_activity_date": 1497480567, "creation_date": 1497480567, "question_id": 44555903, "link": "https://stackoverflow.com/questions/44555903/open-an-external-program-from-python-and-examine-its-memory", "closed_reason": "Duplicate", "title": "Open an external program from python and examine its memory", "body": "<p>I want to run an external program from python (using popen for example) and be able to look at its memory while it's running.</p>\n\n<p>Cheatengine and other similar applications are able to do this but I want to do it from python because I want use the memory I'm reading in my python application.</p>\n\n<p>One way to do it is to run gdb from python and interact with it but it's not a really clean method and has a lot of dependencies on Windows.</p>\n\n<p>What's a nice and clean way to do this?</p>\n\n<p>Thanks for your answers.  </p>\n"}, {"tags": ["python", "time"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1497480248, "post_id": 44555836, "comment_id": 76102144, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1497480309, "post_id": 44555836, "comment_id": 76102160, "body": "<code>x = int(input(&#39;:&#39;))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "edited": false, "score": 0, "creation_date": 1497480536, "post_id": 44555860, "comment_id": 76102215, "body": "im still getting an error called &#39;TypeError: &#39;&gt;&#39; not supported between instances of &#39;str&#39; and &#39;int&#39;&#39;"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "edited": false, "score": 1, "creation_date": 1497480617, "post_id": 44555860, "comment_id": 76102243, "body": "@J.D See Willem&#39;s comment on your question."}], "tags": [], "owner": {"reputation": 17500, "user_id": 3113477, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TWIEk.jpg?s=128&g=1", "display_name": "A.J. Uppal", "link": "https://stackoverflow.com/users/3113477/a-j-uppal"}, "is_accepted": false, "score": 0, "last_activity_date": 1497480363, "creation_date": 1497480363, "answer_id": 44555860, "question_id": 44555836, "link": "https://stackoverflow.com/questions/44555836/i-want-a-countdown-that-accepts-a-custom-input/44555860#44555860", "title": "I Want A Countdown That Accepts A Custom Input", "body": "<p>You never do anything to <code>x1</code>. Perhaps you meant <code>x-1</code>:</p>\n\n<pre><code>while x&gt; 0:\n    print (x)\n    print (\"\")\n    time.sleep(1)\n    x = x-1 #here \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "edited": false, "score": 0, "creation_date": 1497481027, "post_id": 44555947, "comment_id": 76102360, "body": "thanks for this but now ive got an error that says &#39;raw_input&#39; is not defined"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "edited": false, "score": 0, "creation_date": 1497481123, "post_id": 44555947, "comment_id": 76102392, "body": "@J.D - continue using <code>input</code> instead of <code>raw_input</code> - <code>raw_input</code> is only for Python 2.x."}, {"owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "edited": false, "score": 0, "creation_date": 1497481155, "post_id": 44555947, "comment_id": 76102402, "body": "You&#39;re right. And I&#39;m using Python 2.7. If you&#39;re using Python 3, change raw_input to input."}, {"owner": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "edited": false, "score": 0, "creation_date": 1497481587, "post_id": 44555947, "comment_id": 76102552, "body": "thank you so much your a life saver"}], "tags": [], "owner": {"reputation": 778, "user_id": 7637879, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_pnIQaQJU1c/AAAAAAAAAAI/AAAAAAAAADM/HAnzeUNr9to/photo.jpg?sz=128", "display_name": "Alan Leuthard", "link": "https://stackoverflow.com/users/7637879/alan-leuthard"}, "is_accepted": true, "score": 0, "last_activity_date": 1497482470, "last_edit_date": 1497482470, "creation_date": 1497480848, "answer_id": 44555947, "question_id": 44555836, "link": "https://stackoverflow.com/questions/44555836/i-want-a-countdown-that-accepts-a-custom-input/44555947#44555947", "title": "I Want A Countdown That Accepts A Custom Input", "body": "<p>Several issues that I won't list, but here are the fixes to help. Maybe.  If you're using Python 3, change the raw_input to input.</p>\n\n<pre><code>import time\n\ndef countdown(x) :\n    while x &gt; 0:\n        print (x)\n        print (\"\")\n        time.sleep(1)\n        x = x - 1\n    print(\"BLAST OFF!\")\n\ncountdownyn = raw_input ('Would You like To Start A Countdown? Y/N (CASE SENSITIVE): ')\nif countdownyn == ('Y'):\n    x = raw_input ('Please Enter Your Designated Time To Countdown From: ')\n    countdown(int(x))\n</code></pre>\n\n<p>Output with the required pauses:</p>\n\n<pre><code>Would You like To Start A Countdown? Y/N (CASE SENSITIVE): Y\nPlease Enter Your Designated Time To Countdown From: 10\n10\n\n9\n\n8\n\n7\n\n6\n\n5\n\n4\n\n3\n\n2\n\n1\n\nBLAST OFF!\n</code></pre>\n\n<p>****EDIT****</p>\n\n<p>To get you going further...:</p>\n\n<pre><code>import time\n\ndef countdown(ticks) :\n    for tick in range(ticks, 0, -1):\n        print (tick)\n        print (\"\")\n        time.sleep(1)\n    print(\"BLAST OFF!\")\n\n\n\nwhile True:\n    countdownyn = raw_input('Would You like To Start A Countdown? Y/N (CASE SENSITIVE): ')\n    if countdownyn == 'Y':\n        x = raw_input('Please Enter Your Designated Time To Countdown From: ')\n        try:\n            countdown(int(x))\n        except ValueError:\n            print(\"Please enter a valid integer\")\n            continue\n    elif countdownyn == 'N':\n        print(\"Goodbye!\")\n        break\n    else:\n        print(\"Please enter only Y or N\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8116968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d806914085d5ff58bb5849a204f28c3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.D", "link": "https://stackoverflow.com/users/8116968/j-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "closed_date": 1497481197, "accepted_answer_id": 44555947, "answer_count": 2, "score": -2, "last_activity_date": 1497482470, "creation_date": 1497480156, "question_id": 44555836, "link": "https://stackoverflow.com/questions/44555836/i-want-a-countdown-that-accepts-a-custom-input", "closed_reason": "Needs details or clarity", "title": "I Want A Countdown That Accepts A Custom Input", "body": "<p>So i have tried my absolute hardest to try and get my code to work what i want is a input responsive countdown can anyone help?</p>\n\n<pre><code>    print (\"Would You like To Start A Countdown? Y/N (CASE SENSITIVE)\")\ncountdownyn = input (':')\nif countdownyn == ('Y'):\n    print (\"Please Enter Your Designated Time To Countdown From\")\nx = input (':')\ndef countdown(x) :\n    while x&gt; 0:\n        print (x)\n        print (\"\")\n        time.sleep(1)\n        x = x1\n    if x ==0:\n        print(\"BLAST OFF!\")\ncountdown(x)\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497480811, "post_id": 44555885, "comment_id": 76102297, "body": "Can you elaborate on this? I didn&#39;t get it! Why are we checking for less than zero?"}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497480835, "post_id": 44555885, "comment_id": 76102304, "body": "I need something like this. I need to check the current row. If every column in current row is less than corresponding column values in precious row, I need a &#39;1&#39; in the new column. Else a &#39;0&#39;"}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497480855, "post_id": 44555885, "comment_id": 76102307, "body": "Column 1\tColumn 2\tOutput 20\t40\tNULL 30\t80\t1 40\t20\t0"}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497481788, "post_id": 44555885, "comment_id": 76102601, "body": "Thank you so much for taking the time to explain!"}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497482995, "post_id": 44555885, "comment_id": 76102918, "body": "Thanks! Further extending this, in case I need to check if in the current row, all columns of current row are less than previous corresponding columns (all previous rows appearing before current row), is it possible? The difference is that earlier only the previous row was considered to check,now I want all previous rows to be considered. Thanks for your time!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497483105, "post_id": 44555885, "comment_id": 76102951, "body": "@Harikrishna that would make a perfect new question."}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497483502, "post_id": 44555885, "comment_id": 76103053, "body": "unable to post one for 90 mins!"}, {"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497507508, "post_id": 44555885, "comment_id": 76109245, "body": "Quick question! This works good but I need a small alteration. I want this checking to be done from column 3 to the end but ignore the data in column 2. Because column 2 has the date and should be ignored for this logic.Thanks!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497508088, "post_id": 44555885, "comment_id": 76109496, "body": "@Harikrishna you can easily alter this logic by subsetting the dataframe with <code>df.assign(New=df[mycols].diff().lt(0).all(1).astype(int))</code> where <code>mycols</code> is a list of the columns you care to evaluate for this purpose.  Or you can limit the columns by position with <code>iloc</code> to restrict it from the 2nd column onward with <code>df.assign(New=df.iloc[:, 1:].diff().lt(0).all(1).astype(int))</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 6, "last_activity_date": 1497481819, "last_edit_date": 1497481819, "creation_date": 1497480456, "answer_id": 44555885, "question_id": 44555832, "link": "https://stackoverflow.com/questions/44555832/check-if-all-column-values-in-current-row-is-lesser-than-previous-row-in-pandas/44555885#44555885", "title": "Check if all column values in current row is lesser than previous row in pandas dataframe", "body": "<p>Consider the dataframe <code>df</code></p>\n\n<pre><code>np.random.seed([3,1415])\ndf = pd.DataFrame(np.random.rand(10, 4), columns=list('ABCD'))\n\n          A         B         C         D\n0  0.444939  0.407554  0.460148  0.465239\n1  0.462691  0.016545  0.850445  0.817744\n2  0.777962  0.757983  0.934829  0.831104\n3  0.879891  0.926879  0.721535  0.117642\n4  0.145906  0.199844  0.437564  0.100702\n5  0.278735  0.609862  0.085823  0.836997\n6  0.739635  0.866059  0.691271  0.377185\n7  0.225146  0.435280  0.700900  0.700946\n8  0.796487  0.018688  0.700566  0.900749\n9  0.764869  0.253200  0.548054  0.778883\n</code></pre>\n\n<p><strong>Option 1</strong><br>\n<em><code>shift</code></em>  </p>\n\n<pre><code>df.assign(New=(df &lt; df.shift()).all(1).astype(int))\n\n          A         B         C         D  New\n0  0.444939  0.407554  0.460148  0.465239    0\n1  0.462691  0.016545  0.850445  0.817744    0\n2  0.777962  0.757983  0.934829  0.831104    0\n3  0.879891  0.926879  0.721535  0.117642    0\n4  0.145906  0.199844  0.437564  0.100702    1\n5  0.278735  0.609862  0.085823  0.836997    0\n6  0.739635  0.866059  0.691271  0.377185    0\n7  0.225146  0.435280  0.700900  0.700946    0\n8  0.796487  0.018688  0.700566  0.900749    0\n9  0.764869  0.253200  0.548054  0.778883    0\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\n<em><code>numpy</code></em><br>\nSame concept as Option 1</p>\n\n<pre><code>v = df.values\ndf.assign(New=np.append(False, (v[1:] &lt; v[:-1]).all(1).astype(int)))\n\n          A         B         C         D  New\n0  0.444939  0.407554  0.460148  0.465239    0\n1  0.462691  0.016545  0.850445  0.817744    0\n2  0.777962  0.757983  0.934829  0.831104    0\n3  0.879891  0.926879  0.721535  0.117642    0\n4  0.145906  0.199844  0.437564  0.100702    1\n5  0.278735  0.609862  0.085823  0.836997    0\n6  0.739635  0.866059  0.691271  0.377185    0\n7  0.225146  0.435280  0.700900  0.700946    0\n8  0.796487  0.018688  0.700566  0.900749    0\n9  0.764869  0.253200  0.548054  0.778883    0\n</code></pre>\n\n<p><strong>Option 3</strong><br>\n<em><code>diff</code></em><br>\nUse <code>diff</code> to compare one row with the next and see if it is less than zero.  Then use <code>all</code> to determine if its <code>True</code> for the entire row.</p>\n\n<pre><code>df.assign(New=df.diff().lt(0).all(1).astype(int))\n\n          A         B         C         D  New\n0  0.444939  0.407554  0.460148  0.465239    0\n1  0.462691  0.016545  0.850445  0.817744    0\n2  0.777962  0.757983  0.934829  0.831104    0\n3  0.879891  0.926879  0.721535  0.117642    0\n4  0.145906  0.199844  0.437564  0.100702    1\n5  0.278735  0.609862  0.085823  0.836997    0\n6  0.739635  0.866059  0.691271  0.377185    0\n7  0.225146  0.435280  0.700900  0.700946    0\n8  0.796487  0.018688  0.700566  0.900749    0\n9  0.764869  0.253200  0.548054  0.778883    0\n</code></pre>\n\n<hr>\n\n<p><strong>Timing</strong></p>\n\n<pre><code>%timeit df.assign(New=df.diff().lt(0).all(1).astype(int))\n%timeit df.assign(New=(df &lt; df.shift()).all(1).astype(int))\n\n1000 loops, best of 3: 579 \u00b5s per loop\n1000 loops, best of 3: 1.56 ms per loop\n\n%%timeit\nv = df.values\ndf.assign(New=np.append(False, (v[1:] &lt; v[:-1]).all(1).astype(int)))\n\n1000 loops, best of 3: 322 \u00b5s per loop\n</code></pre>\n\n<hr>\n\n<p><strong>How <code>diff</code> Works</strong>  </p>\n\n<blockquote>\n  <p>check if all the column values in the current row is less than the corresponding column values in previous row</p>\n</blockquote>\n\n<p>This is what prompted me to use <code>diff</code>.  <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.diff.html\" rel=\"noreferrer\"><strong><code>pandas.DataFrame.diff</code></strong></a> by default calculates the diff array for every column.  Meaning, for each row, we have the difference of that row relative to the previous row.  For the condition the OP presented to be <code>True</code>, we need this difference to be less than zero.</p>\n\n<pre><code>df.diff()\n\n          A         B         C         D\n0       NaN       NaN       NaN       NaN\n1  0.017752 -0.391009  0.390297  0.352505\n2  0.315271  0.741438  0.084384  0.013360\n3  0.101929  0.168895 -0.213294 -0.713463\n4 -0.733985 -0.727035 -0.283971 -0.016940\n5  0.132829  0.410018 -0.351741  0.736296\n6  0.460900  0.256197  0.605448 -0.459812\n7 -0.514489 -0.430779  0.009629  0.323761\n8  0.571340 -0.416592 -0.000334  0.199803\n9 -0.031618  0.234512 -0.152512 -0.121866\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>df.diff() &lt; 0\n\n       A      B      C      D\n0  False  False  False  False\n1  False   True  False  False\n2  False  False  False  False\n3  False  False   True   True\n4   True   True   True   True\n5  False  False   True  False\n6  False  False  False   True\n7   True   True  False  False\n8  False   True   True  False\n9   True  False   True   True\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>(df.diff() &lt; 0).all(1)\n\n0    False\n1    False\n2    False\n3    False\n4     True\n5    False\n6    False\n7    False\n8    False\n9    False\ndtype: bool\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3397, "favorite_count": 1, "accepted_answer_id": 44555885, "answer_count": 1, "score": 3, "last_activity_date": 1497482235, "creation_date": 1497480118, "last_edit_date": 1497482235, "question_id": 44555832, "link": "https://stackoverflow.com/questions/44555832/check-if-all-column-values-in-current-row-is-lesser-than-previous-row-in-pandas", "title": "Check if all column values in current row is lesser than previous row in pandas dataframe", "body": "<p>Is there a way to check if all the column values in the current row is less than the corresponding column values in previous row in a pandas dataframe (throughout entire dataframe) and create a new column with a value of 1 or 0 accoringly?</p>\n"}, {"tags": ["python", "multithreading", "matplotlib", "tkinter"], "comments": [{"owner": {"reputation": 765, "user_id": 7246614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eccd212e4687fc66e13aad21796b0b?s=128&d=identicon&r=PG", "display_name": "timotree", "link": "https://stackoverflow.com/users/7246614/timotree"}, "edited": false, "score": 0, "creation_date": 1497672035, "post_id": 44555787, "comment_id": 76189130, "body": "It may be easier for people to debug this if you provide a more minimal example that still has this problem. See <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 765, "user_id": 7246614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eccd212e4687fc66e13aad21796b0b?s=128&d=identicon&r=PG", "display_name": "timotree", "link": "https://stackoverflow.com/users/7246614/timotree"}, "edited": false, "score": 0, "creation_date": 1497673545, "post_id": 44555787, "comment_id": 76189331, "body": "When I put this code in python I get the error: <code>AttributeError: type object &#39;listner&#39; has no attribute &#39;listner&#39;</code> because of this line: <code>listner_thread = listner.listner(port)</code> Are you sure the code you provided is the code which works until the user hits a key?"}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "reply_to_user": {"reputation": 765, "user_id": 7246614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eccd212e4687fc66e13aad21796b0b?s=128&d=identicon&r=PG", "display_name": "timotree", "link": "https://stackoverflow.com/users/7246614/timotree"}, "edited": false, "score": 0, "creation_date": 1497894665, "post_id": 44555787, "comment_id": 76259712, "body": "I updated the code. This is fully working and reproduce the problem."}], "answers": [{"comments": [{"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1502129284, "post_id": 44725215, "comment_id": 78066130, "body": "Thanks for info. I guess something is wrong with <code>Tkinter</code>. I ran the same code on another machine which used a <code>MPL WebAgg</code> GUI framework and it ran smoothly. It opens the graph in browser however which was not desirable."}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 1, "creation_date": 1502136345, "post_id": 44725215, "comment_id": 78069741, "body": "@dandikain Insert this line &#39;matplotlib.use(&#39;Agg&#39;)&#39; before you import pyplot  to avoid a window opening  - <a href=\"http://matplotlib.org/1.4.2/faq/howto_faq.html#howto-batch\" rel=\"nofollow noreferrer\">Source</a> Also recommended to save your chart before show() too e.g. plt.savefig(&#39;fig&#39;)"}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1502143447, "post_id": 44725215, "comment_id": 78072778, "body": "Tried that and put it the very start, but it doesn&#39;t take effect and warns that I should put it before calling plot!(which I do, I called it before everything.)"}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1502144018, "post_id": 44725215, "comment_id": 78072960, "body": "According to the code above, it should be line 4, and then import pyplot. (As opposed to putting the line at the very start). Did you try that?"}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1502144889, "post_id": 44725215, "comment_id": 78073223, "body": "Yes I did that. It warned with following: <code>c:\\Python27\\lib\\site-packages\\matplotlib\\__init__.py:1405: UserWarning: This call to matplotlib.use() has no effect because the backend has already been chosen; matplotlib.use() must be called *before* pylab, matplotlib.pyplot, or matplotlib.backends is imported for the first time.</code>"}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 1, "creation_date": 1502145748, "post_id": 44725215, "comment_id": 78073492, "body": "@dandikain can you not debug your code to find WHERE it is being imported for the first time then (as evidently it has being imported before this piece of code)... and insert the line there? Other than that I&#39;m out of suggestions. Hope you resolve the issue. Glad it&#39;s partially resolved."}], "tags": [], "owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "is_accepted": true, "score": 2, "last_activity_date": 1498232091, "creation_date": 1498232091, "answer_id": 44725215, "question_id": 44555787, "link": "https://stackoverflow.com/questions/44555787/running-a-thread-with-matplotlib-cause-python-crash/44725215#44725215", "title": "Running a thread with matplotlib cause python crash", "body": "<p>The first error, \"Fatal Python Error:GC object Already Tracked\" was closed in 2013 with a status of \"CLOSED WONTFIX\" See the <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=993263\" rel=\"nofollow noreferrer\">bug report</a> on Bugzilla</p>\n\n<p>It seems the interim fix when it was raised again in 2015 [in relation to dask] was to <a href=\"https://github.com/dask/dask/issues/860\" rel=\"nofollow noreferrer\">use a single thread</a> using this code:</p>\n\n<pre><code>   import dask\n   dask.set_options(get=dask.async.get_sync)\n</code></pre>\n\n<p>but that the problem actually lay with <code>dataframe.read_csv</code> problems.</p>\n\n<p>The problem was <a href=\"https://github.com/dask/dask/issues/1039\" rel=\"nofollow noreferrer\">eventually solved</a> in a later version of pandas. If you upgrade your version of matplotlib, the problem will most likely be resolved also with a similar fix. </p>\n\n<p>Hope this helps </p>\n"}], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 44725215, "answer_count": 1, "score": 3, "last_activity_date": 1512479427, "creation_date": 1497479882, "last_edit_date": 1497894702, "question_id": 44555787, "link": "https://stackoverflow.com/questions/44555787/running-a-thread-with-matplotlib-cause-python-crash", "title": "Running a thread with matplotlib cause python crash", "body": "<p>I have a program that has 2 very simple threads:</p>\n\n<ul>\n<li>One for listening to serial port</li>\n<li>One for a text UI</li>\n</ul>\n\n<p>I also have a <code>matplotlib</code> <code>animation</code> running in my <code>main()</code>. It has a <code>scope</code> class that is the example from <a href=\"https://matplotlib.org/examples/animation/strip_chart_demo.html\" rel=\"nofollow noreferrer\">matplotlib</a>.</p>\n\n<p>When the program starts to run, it shows the plot and everything is OK. The problem is that as soon as the user enters a key, the program crashes and python exits with a fatal error.</p>\n\n<p>The <code>ui</code> thread has nothing to do with <code>matplotlib</code> and <code>scope</code> class. If I delete the code that creates the plots, the <code>ui</code> thread has no problem and program runs smoothly. I also notice <code>matplotlib</code> on my system uses <code>tkinter</code> for creating windows.</p>\n\n<p>Do you have any hints or experiences with why the <code>matplotlib</code> <code>animation</code> causes problem? Can't a thread be used with a <code>matplotlib</code> <code>plot</code>? </p>\n\n<p>I am running this in a command line window in <code>Windows7</code> with <code>Python 2.7</code>.</p>\n\n<p><code>matplotlib</code> version : 2.0.2\n<code>Tkinter</code> version : 8.5</p>\n\n<p>Error:\n</p>\n\n<pre><code>Fatal Python error: GC object already tracked\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n</code></pre>\n\n<p>Or this error:\n</p>\n\n<pre><code>TclStackFree: incorrect freePtr. Call out of sequence?\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>    import threading\nimport serial\nfrom matplotlib.lines import Line2D\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nclass listner(threading.Thread):\n\n        def __init__(self,port):\n            threading.Thread.__init__(self)\n            self.sport=None\n            self.is_running=True\n            self.init_port(port)\n\n        def run(self):\n            print ' Reading from Port'\n            while self.is_running:\n                try:\n                    self.sport.read(1)\n                except:\n                    print 'Error reading port'\n\n        def init_port(self,port):\n            print '1'\n            if self.sport==None or not self.sport.is_open :\n                try:\n\n                    self.sport = serial.Serial(port,115200)\n                    self.sport.timeout = 1\n                    self.sport.reset_input_buffer()\n                    self.sport.reset_output_buffer()\n                    self.port_open=True\n                except:\n                    print \"    Port error Listener Initing\\n\",self.port_open,'\\n',self.sport\n            else:\n                pass\n\n        def process(self):\n            pass\n\n\nclass ui(threading.Thread):\n\n        def __init__(self):\n            threading.Thread.__init__(self)     \n            self.running = True\n\n        def run(self):\n\n            print 'Starting UI:\\n'\n            while self.running:\n                print ' Enter input ''S'':\\n'\n                user = raw_input()\n\n\n\ndef main(port):\n\n        listner_thread = None\n        try:\n            listner_thread = listner(port)\n            listner_thread.start();\n        except:\n            print \"Listener Thread Failed To Start\"\n            return\n\n        ui_thread=None\n        try:\n            ui_thread = ui()\n            ui_thread.start()          \n        except:\n            print \"UI Thread Failed To Start\"\n            return\n\n        run_charts()\n\n\n\ndef run_charts():\n        fig, (ax1, ax2) = plt.subplots(2, 1)\n\n        scope1 = Scope(ax1)\n        ani1 = animation.FuncAnimation(fig, scope1.update, emit_ch1, interval=10,blit=True)\n\n        scope2 = Scope(ax2)\n        ani2 = animation.FuncAnimation(fig, scope2.update, emit_ch2, interval=10,blit=True)\n\n        plt.show()\n\ndef emit_ch1():\n    yield 0.001\n\ndef emit_ch2():\n    yield -0.001\n\nclass Scope(object):\n        def __init__(self, ax, maxt=2, dt=0.02):\n            self.ax = ax\n            self.dt = dt\n            self.maxt = maxt\n            self.tdata = [0]\n            self.ydata = [0]\n            self.line = Line2D(self.tdata, self.ydata)\n            self.ax.add_line(self.line)\n            self.ax.set_ylim(-.009, 0.009)\n            self.ax.set_xlim(0, self.maxt)\n\n        def update(self, y):\n            t = self.tdata[-1] + self.dt\n            self.tdata.append(t)\n            self.ydata.append(y)\n            self.line.set_data(self.tdata, self.ydata)\n            return self.line,\n\n\n\nif __name__ == '__main__':\n        main('COM11')\n</code></pre>\n"}, {"tags": ["python", "regex", "csv", "numbers", "data-processing"], "comments": [{"owner": {"reputation": 2901, "user_id": 3682217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364ca137bf3408012e52bc943eb675ec?s=128&d=identicon&r=PG&f=1", "display_name": "Shammel Lee", "link": "https://stackoverflow.com/users/3682217/shammel-lee"}, "edited": false, "score": 0, "creation_date": 1497480045, "post_id": 44555769, "comment_id": 76102076, "body": "Do you want the units (<code>cm</code>) as well or just the numerical value?"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1497480134, "post_id": 44555769, "comment_id": 76102104, "body": "Are those only value examples you can encounter, or these can be mixed with other data? e.g. does your string always begin with a number and doesn&#39;t contain anything else but dimensions such as these?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1497481262, "post_id": 44555769, "comment_id": 76102436, "body": "Why is this <code>43 1&#47;2</code> different from the rest ? Or just <code>^(?:(?!cm).)+</code>"}, {"owner": {"reputation": 1419, "user_id": 3788493, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/eLdB2.jpg?s=128&g=1", "display_name": "jeanluc", "link": "https://stackoverflow.com/users/3788493/jeanluc"}, "edited": false, "score": 0, "creation_date": 1497481325, "post_id": 44555769, "comment_id": 76102458, "body": "These seem to be the only variations in the data set. @sln the 1/2 means 43.5. Unfortunately the person that gave me the data didn&#39;t really care about formatting it."}, {"owner": {"reputation": 1419, "user_id": 3788493, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/eLdB2.jpg?s=128&g=1", "display_name": "jeanluc", "link": "https://stackoverflow.com/users/3788493/jeanluc"}, "reply_to_user": {"reputation": 2901, "user_id": 3682217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364ca137bf3408012e52bc943eb675ec?s=128&d=identicon&r=PG&f=1", "display_name": "Shammel Lee", "link": "https://stackoverflow.com/users/3682217/shammel-lee"}, "edited": false, "score": 0, "creation_date": 1497481706, "post_id": 44555769, "comment_id": 76102584, "body": "@ShammelLee just the numerical value"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 7953603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vDnBrMl09-Q/AAAAAAAAAAI/AAAAAAAAecg/fCXR160HpM8/photo.jpg?sz=128", "display_name": "Vape Waves", "link": "https://stackoverflow.com/users/7953603/vape-waves"}, "is_accepted": false, "score": 0, "last_activity_date": 1497480545, "creation_date": 1497480545, "answer_id": 44555899, "question_id": 44555769, "link": "https://stackoverflow.com/questions/44555769/regular-expression-extracting-number-dimension/44555899#44555899", "title": "Regular expression extracting number dimension", "body": "<p>Here's a sample of how to do it from a text file.\nIt works for the provided data.      </p>\n\n<pre><code>     f = open(\"textfile.txt\",r')\n\n     for line in f :\n         if 'x'in line:\n             iposition = line.find('x')\n             print(line[:iposition])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "is_accepted": true, "score": 1, "last_activity_date": 1497482439, "last_edit_date": 1497482439, "creation_date": 1497482135, "answer_id": 44556101, "question_id": 44555769, "link": "https://stackoverflow.com/questions/44555769/regular-expression-extracting-number-dimension/44556101#44556101", "title": "Regular expression extracting number dimension", "body": "<p>try regex below, it will capture 1st digits and optional fractional come after it before the 1st 'cm'</p>\n\n<pre><code>import re\nregex = re.compile('(\\d+.*?)\\s?cm') # this will works for all your example data\n# or\n# this asserted whatever come after the 1st digit group must be fractional number only\nregex = re.compile('(\\d+(?:\\s+\\d+\\/\\d+)?)\\s?cm') \n\n\n&gt;&gt;&gt; regex.match('23 cm').group(1)\n&gt;&gt;&gt; '23' \n&gt;&gt;&gt; regex.match('43 1/2 cm').group(1)\n&gt;&gt;&gt; '43 1/2'\n&gt;&gt;&gt; regex.match('20cm').group(1)\n&gt;&gt;&gt; '20'\n&gt;&gt;&gt; regex.match('15 cm x 30 cm').group(1)\n&gt;&gt;&gt; '15'\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/FTZOIb/1\" rel=\"nofollow noreferrer\">regex101 demo</a> </p>\n"}, {"tags": [], "owner": {"reputation": 2901, "user_id": 3682217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364ca137bf3408012e52bc943eb675ec?s=128&d=identicon&r=PG&f=1", "display_name": "Shammel Lee", "link": "https://stackoverflow.com/users/3682217/shammel-lee"}, "is_accepted": false, "score": 1, "last_activity_date": 1497483810, "creation_date": 1497483810, "answer_id": 44556334, "question_id": 44555769, "link": "https://stackoverflow.com/questions/44555769/regular-expression-extracting-number-dimension/44556334#44556334", "title": "Regular expression extracting number dimension", "body": "<p>This regex should work (<a href=\"https://regex101.com/r/LhJl2V/1\" rel=\"nofollow noreferrer\">Live Demo</a>)</p>\n\n<pre><code>^(\\d+)(?:\\s*cm\\s+[xX])\n</code></pre>\n\n<h1>Explanation</h1>\n\n<ul>\n<li><code>^(\\d+)</code> - capture at least one digit at the beginning of the line</li>\n<li><code>(?:</code> - start non-capturing group</li>\n<li><code>\\s*</code> - followed by at least zero whitespace characters</li>\n<li><code>cm</code> - followed by a literal <code>c</code> and <code>m</code></li>\n<li><code>\\s+</code> - followed by at least one whitespace character</li>\n<li><code>[xX]</code> - followed by a literal <code>x</code> or <code>X</code></li>\n<li><code>)</code> - end non-capturing group</li>\n</ul>\n\n<p>You shouldn't need to bother matching the rest of the line.</p>\n"}], "owner": {"reputation": 1419, "user_id": 3788493, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/eLdB2.jpg?s=128&g=1", "display_name": "jeanluc", "link": "https://stackoverflow.com/users/3788493/jeanluc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 44556101, "answer_count": 3, "score": 1, "last_activity_date": 1497483810, "creation_date": 1497479759, "last_edit_date": 1497481395, "question_id": 44555769, "link": "https://stackoverflow.com/questions/44555769/regular-expression-extracting-number-dimension", "title": "Regular expression extracting number dimension", "body": "<p>I'm using python regular expressions to extract dimensional information from a database. The entries in that column look like this:</p>\n\n<pre><code>23 cm\n43 1/2 cm\n\n20cm\n15 cm x 30 cm\n</code></pre>\n\n<p>What I need from this is only the width of the entry (so for the entries with an 'x', only the first number), but as you can see the values are all over the place.</p>\n\n<p>From what I understood in the <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\" title=\"documentation\">documentation</a>, you can access the groups in a match using their position, so I was thinking I could determine the type of the entry based on how many groups are returned and what is found at each index.</p>\n\n<p>The expression I used so far is <code>^(\\d{2})\\s?(x\\s?(\\d{2}))?(\\d+/\\d+)?$</code>, however it's not perfect and it returns a number of useless groups. Is there something more efficient and appropriate?</p>\n\n<p><strong>Edit</strong>: I need the number from every line. When there is only one number, it is implied that only the width was measured (including any fractional components such as line 2). When there are two numbers, the height was also measured, but I only need the width which is the first number (such as in the last line)</p>\n"}, {"tags": ["python", "pandas", "dataframe", "linear-algebra"], "comments": [{"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1497479899, "post_id": 44555763, "comment_id": 76102040, "body": "You should be able to achieve what you need with <code>numpy</code> and this post: <a href=\"https://stackoverflow.com/questions/28816627/how-to-find-linearly-independent-rows-from-a-matrix\" title=\"how to find linearly independent rows from a matrix\">stackoverflow.com/questions/28816627/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 9, "last_activity_date": 1497483032, "last_edit_date": 1497483032, "creation_date": 1497481336, "answer_id": 44556014, "question_id": 44555763, "link": "https://stackoverflow.com/questions/44555763/is-there-a-way-to-check-for-linearly-dependent-columns-in-a-dataframe/44556014#44556014", "title": "Is there a way to check for linearly dependent columns in a dataframe?", "body": "<p>If you have <code>SymPy</code> you could use the <a href=\"https://en.wikipedia.org/wiki/Row_echelon_form\" rel=\"noreferrer\">\"reduced row echelon form\"</a> via <a href=\"http://docs.sympy.org/dev/tutorial/matrices.html#rref\" rel=\"noreferrer\"><code>sympy.matrix.rref</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; import sympy \n&gt;&gt;&gt; reduced_form, inds = sympy.Matrix(df.values).rref()\n&gt;&gt;&gt; reduced_form\nMatrix([\n[1.0, 2.0,   0],\n[  0,   0, 1.0],\n[  0,   0,   0],\n[  0,   0,   0]])\n\n&gt;&gt;&gt; inds\n[0, 2]\n</code></pre>\n\n<p>The pivot columns (stored as <code>inds</code>) represent the \"column numbers\" that are linear independent, and you could simply \"slice away\" the other ones:</p>\n\n<pre><code>&gt;&gt;&gt; df.iloc[:, inds]\n   A  C\n0  0  8\n1  2  3\n2  3  5\n3  4  4\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 5495860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa95f820b1a5864b435455548e0dca8c?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Perrin", "link": "https://stackoverflow.com/users/5495860/geoff-perrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5508, "favorite_count": 2, "accepted_answer_id": 44556014, "answer_count": 1, "score": 7, "last_activity_date": 1497483032, "creation_date": 1497479703, "last_edit_date": 1497482644, "question_id": 44555763, "link": "https://stackoverflow.com/questions/44555763/is-there-a-way-to-check-for-linearly-dependent-columns-in-a-dataframe", "title": "Is there a way to check for linearly dependent columns in a dataframe?", "body": "<p>Is there a way to check for linear dependency for columns in a pandas dataframe? For example:</p>\n\n<pre><code>columns = ['A','B', 'C']\ndf = pd.DataFrame(columns=columns)\ndf.A = [0,2,3,4]\ndf.B = df.A*2\ndf.C = [8,3,5,4]\nprint(df)\n\n   A  B  C\n0  0  0  8\n1  2  4  3\n2  3  6  5\n3  4  8  4\n</code></pre>\n\n<p>Is there a way to show that column <code>B</code> is a linear combination of <code>A</code>, but <code>C</code> is an independent column? My ultimate goal is to run a poisson regression on a dataset, but I keep getting a <code>LinAlgError: Singular matrix</code> error, meaning no inverse exists of my dataframe and thus it contains dependent columns. </p>\n\n<p>I would like to come up with a programmatic way to check each feature and ensure there are no dependent columns.</p>\n"}, {"tags": ["python", "regex", "functional-programming", "iterator", "generator"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497479682, "post_id": 44555746, "comment_id": 76101972, "body": "You <i>are</i> only manipulating iterators here, are you just looking for a one-liner?"}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1497479726, "post_id": 44555746, "comment_id": 76101987, "body": "<code>matches = [m[0] for m in (re.findall(r&#39;wh(at)ever&#39;, line) for line in lines) if m]</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1497479995, "post_id": 44555746, "comment_id": 76102065, "body": "You can <code>from functools import partial</code> and <code>from operator import itemgetter</code> and have the very functional <code>list(map(itemgetter(0), filter(None, map(partial(re.findall, r&#39;wh(at)ever&#39;), lines))))</code> ... but I still think your original construction is more elegant."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1497483964, "post_id": 44555746, "comment_id": 76103189, "body": "Why do you use <code>re.findall</code> if you only want the first item?"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1497485115, "post_id": 44555746, "comment_id": 76103462, "body": "@CasimiretHippolyte Is there a better alternative? If so please tell me :)"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1497486656, "post_id": 44555746, "comment_id": 76103793, "body": "@Ren&#233;G: with <code>re.search</code> that returns (and stops at) the first result: <code>[m.group(1) for m in (re.search(r&#39;wh(at)ever&#39;, line) for line in lines) if m]</code>"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497489062, "post_id": 44555746, "comment_id": 76104246, "body": "@casmirethippolyte That will throw an exception of any strings don&#39;t match. You still have to check for None."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1497516898, "post_id": 44555746, "comment_id": 76114993, "body": "@Ren&#233;G: no it doesn&#39;t, since <code>m</code> is tested with <code>if m</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497480154, "post_id": 44555809, "comment_id": 76102113, "body": "one line &gt;&gt;&gt;&gt;&gt;&gt; two lines"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480158, "post_id": 44555809, "comment_id": 76102116, "body": "I think you can do simply <code>None</code> instead of <code>lambda x:x</code> for <code>filter</code>, it&#39;s beeen ages since I&#39;ve actually use filter instead of a comprehension though"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480185, "post_id": 44555809, "comment_id": 76102124, "body": "One line is often worse than two-lines. This is a great example."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497480220, "post_id": 44555809, "comment_id": 76102134, "body": "@Coldspeed Also, this doesn&#39;t work. The result will be a list of singleton lists of strings, not a list of strings."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480227, "post_id": 44555809, "comment_id": 76102136, "body": "You&#39;re forgetting the last map: grab the first item from <code>findall</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480235, "post_id": 44555809, "comment_id": 76102139, "body": "@juanpa.arrivillaga Agreed, that&#39;s why I&#39;ve added what OP&#39;s doing is good enough. :-)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480283, "post_id": 44555809, "comment_id": 76102155, "body": "Without <code>lambda</code>s: <code>list(map(itemgetter(0), filter(None, map(partial(re.findall, r&#39;wh(at)ever&#39;), lines))))</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497480294, "post_id": 44555809, "comment_id": 76102158, "body": "@Ren&#233;G You do NOT want to use this solution if you&#39;re working with python2."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497480299, "post_id": 44555809, "comment_id": 76102159, "body": "So this is basically what I&#39;m doing, just in one line instead of across two. Is there any way to truly do it more elegantly?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480378, "post_id": 44555809, "comment_id": 76102181, "body": "@juanpa.arrivillaga That&#39;s another great alternative. I&#39;ve added your solution to my answer but let me know if you want me to take it out."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480406, "post_id": 44555809, "comment_id": 76102190, "body": "Nah, that&#39;s fine."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497480435, "post_id": 44555809, "comment_id": 76102195, "body": "@juanpa.arrivillaga Quick question... what does the <code>partial(...)</code> do here?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1497480528, "post_id": 44555809, "comment_id": 76102213, "body": "It <a href=\"https://docs.python.org/3/library/functools.html#functools.partial\" rel=\"nofollow noreferrer\">partially applies the function</a>. But yes, it is all going to be basically the same way. Just dressed up differently, and made less readable than your original version in all likelyhood."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1497480609, "last_edit_date": 1497480609, "creation_date": 1497480010, "answer_id": 44555809, "question_id": 44555746, "link": "https://stackoverflow.com/questions/44555746/list-comprehension-for-extracting-re-findall-matches/44555809#44555809", "title": "List comprehension for extracting re.findall matches", "body": "<p>You can use maps and filters. Here's one way.</p>\n\n<pre><code>matches = map(lambda x: x[0], filter(None, map(lambda x: re.findall(r'wh(at)ever', x), lines)))\n</code></pre>\n\n<p>If you're using python3, don't forget to tack on a <code>list(...)</code> at the end.</p>\n\n<p>However, I don't see much of a need for more \"elegance\" here. What you're doing is perfectly fine.</p>\n\n<hr>\n\n<p>An alternative courtesy @juanpa.arrivillaga:</p>\n\n<pre><code>from functools import partial\nlist(map(itemgetter(0), filter(None, map(partial(re.findall, r'wh(at)ever'), lines))))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1497546895, "post_id": 44563861, "comment_id": 76135306, "body": "I said &quot;maps, filters, and comprehensions&quot; :) I like this one best! I would put <code>m.group(1)</code> on one line, <code>for m in ()</code> on the next, and <code>if m</code> on a third."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 1, "last_activity_date": 1497519222, "last_edit_date": 1497519222, "creation_date": 1497518880, "answer_id": 44563861, "question_id": 44555746, "link": "https://stackoverflow.com/questions/44555746/list-comprehension-for-extracting-re-findall-matches/44563861#44563861", "title": "List comprehension for extracting re.findall matches", "body": "<p>There's no real advantage obfuscating your code with map, filter, or other functional tricks since a list comprehension is fast, simple and clear:</p>\n\n<pre><code>import re\n\nlines = ['wh1atever wh1btever', 'wh2atever', '', 'wh4atever wh4btever wh4ctever']\n\n'''Since you only want the first item for each line,\n   using re.findall is a waste of time, re.search is more appropriate'''\n\npat1 = re.compile(r'wh(..)tever')\nres1 = [ m.group(1) for m in (pat1.search(line) for line in lines) if m ]\n\nprint(res1)\n'''['1a', '2a', '4a']'''\n\n\n'''or if there are few lines, you can join them and use re.findall this time,\n   with a pattern that consumes the end of the line'''\n\npat2 = re.compile(r'wh(..)tever.*')\nres2 = pat2.findall(\"\\n\".join(lines))\n\nprint(res2)\n'''['1a', '2a', '4a']'''\n</code></pre>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2479, "favorite_count": 0, "accepted_answer_id": 44563861, "answer_count": 2, "score": 0, "last_activity_date": 1497519222, "creation_date": 1497479548, "last_edit_date": 1497479560, "question_id": 44555746, "link": "https://stackoverflow.com/questions/44555746/list-comprehension-for-extracting-re-findall-matches", "title": "List comprehension for extracting re.findall matches", "body": "<p>I have a regular expression with a single group, and I want to use it to map a list of strings to a filtered list of matches for strings that match. Currently, I'm using the following:</p>\n\n<pre><code>matches = (re.findall(r'wh(at)ever', line) for line in lines)\nmatches = [m[0] for m in matches if m]\n</code></pre>\n\n<p>How can I do this more elegantly, using only filters, maps, and comprehensions? Obviously, I could use a for loop, but I wonder if it can be done purely by manipulating iterators.</p>\n"}, {"tags": ["python", "automation"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497479517, "post_id": 44555719, "comment_id": 76101920, "body": "If the same instance is serving multiple clients, you can use synchronisation directives for the file."}, {"owner": {"reputation": 258, "user_id": 8029724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97540bcb60aa9b89c50dd116e44f3277?s=128&d=identicon&r=PG&f=1", "display_name": "Nalaurien", "link": "https://stackoverflow.com/users/8029724/nalaurien"}, "edited": false, "score": 0, "creation_date": 1497479697, "post_id": 44555719, "comment_id": 76101977, "body": "Is there some reason you don&#39;t want to use a database? a mysql instance for example. Then your python script could just check this database for new entries and process each via a cron job or something. that way you aren&#39;t <code>shell_exec()</code>ing either. You could also combine .py 1 and .py 2 into one script and output to another table for retrieval."}, {"owner": {"reputation": 315, "user_id": 8151415, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1b25501e2ea2dbc217d731d781a51245?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8151415/john"}, "reply_to_user": {"reputation": 258, "user_id": 8029724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97540bcb60aa9b89c50dd116e44f3277?s=128&d=identicon&r=PG&f=1", "display_name": "Nalaurien", "link": "https://stackoverflow.com/users/8029724/nalaurien"}, "edited": false, "score": 0, "creation_date": 1497482482, "post_id": 44555719, "comment_id": 76102805, "body": "@Nalaurien I dont know much about mysql so i avoided it, Is there another alternative ?"}, {"owner": {"reputation": 258, "user_id": 8029724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97540bcb60aa9b89c50dd116e44f3277?s=128&d=identicon&r=PG&f=1", "display_name": "Nalaurien", "link": "https://stackoverflow.com/users/8029724/nalaurien"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497482927, "post_id": 44555719, "comment_id": 76102899, "body": "yes, you can use other data solutions like the method mentioned by @Coldspeed above, or other flavors of databases out there. But if you have a day or two to dive into it, I&#39;d really recommend becoming familiar with sql. Its safer than what you do here, its faster, is meant for multiuser handling and its really easy once you get the hang of it! There&#39;s literally thousands of tutorials about it. Any problem you come across is most likely already answered somewhere. If you still get stuck there are many more people here that can answer a question about it than python script file handling."}], "owner": {"reputation": 315, "user_id": 8151415, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1b25501e2ea2dbc217d731d781a51245?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8151415/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497482332, "creation_date": 1497479415, "last_edit_date": 1497482332, "question_id": 44555719, "link": "https://stackoverflow.com/questions/44555719/automation-using-an-intermediate-file", "title": "Automation using an intermediate file", "body": "<p>Here is the skeleton of what I am doing</p>\n\n<pre><code>#Code PHP\nshell_exec(\"file1.py $args\")\n\n#code file1.py\nvar=sys.argv\n..processing..\nsave to a file.txt\n\n#code file2.py\nread from file.txt\n..processing..\nfinal output\n</code></pre>\n\n<p>This is working fine, but my concern is if multiple people access the web page simultaneously the intermediate file may be over written. \nAlso, Both python files cannot be merged into one.\nThe data is generated dynamically and needs to be stored somewhere.\nIs there a way to prevent over writing or some other way to pass data ?\nI tried importing the variable but it doesn't work</p>\n"}, {"tags": ["python", "django", "notifications", "functional-programming", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 7174587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10209847048706578/picture?type=large", "display_name": "Sneaky Toes", "link": "https://stackoverflow.com/users/7174587/sneaky-toes"}, "is_accepted": true, "score": 0, "last_activity_date": 1497890722, "creation_date": 1497890722, "answer_id": 44635900, "question_id": 44555676, "link": "https://stackoverflow.com/questions/44555676/django-making-a-notification-engine/44635900#44635900", "title": "Django: Making a Notification Engine", "body": "<p>For anybody who may want to find a solution to this, I ended up doing:</p>\n\n<pre><code>class Subscription(models.Model):\n    \"\"\"\n    Model for subscribing to object changes.\n\n    Can be subscribed to any object or any model type.\n    Subcriptions:\n    model - if any object changes of this type that belongs to the company, update\n    object - if that specific object changes, update\n\n    To create:\n    Either give a content_object or a content_type. Content object is a model instance. Content type is a ContentType (i.e. Study, Product, etc.)\n\n    If it is created wrong, will just be lost in database forever (unless you know it's there, then delete it.)\n    \"\"\"\n    people = models.ManyToManyField(Person)\n    groups = models.ManyToManyField(Group)\n    trigger = models.CharField(max_length=50)\n\n    APP_LABELS = [apps to limit the available choices]\n\n    # for object subscription\n    # mandatory fields for generic relation\n    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)\n    object_id = models.PositiveIntegerField(null=True)\n    content_object = GenericForeignKey('content_type', 'object_id')\n\n    def save(self, *args, **kwargs):\n        '''\n        Save logic to validate the Subscription model. This is run after the native create() method.\n        '''\n        # check if no content_object, then content_type must be defined by user\n        # probably not necessary since it will fail at creation if content_type isn't an instance of a ContentType, but good to double check\n        if not self.content_object:\n            if self.content_type.__class__ != ContentType:\n                if type(self.content_type) == str:\n                    # if content_type is a string designating a model\n                    self.content_type = ContentType.objects.get(model=self.content_type)\n                else:\n                    # if content_type is a model class\n                    self.content_type = ContentType.objects.get_for_model(Study)\n\n        apps = ', '.join(map(str, self.APP_LABELS))\n\n        # check if content_type in our defined apps\n        if self.content_type.app_label not in apps:\n            raise ValidationError('Please select a content_object or content_type in apps: {0}'.format(apps))\n\n        super(Subscription, self).save(*args, **kwargs)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7174587, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10209847048706578/picture?type=large", "display_name": "Sneaky Toes", "link": "https://stackoverflow.com/users/7174587/sneaky-toes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 44635900, "answer_count": 1, "score": 0, "last_activity_date": 1497890722, "creation_date": 1497479218, "last_edit_date": 1497486247, "question_id": 44555676, "link": "https://stackoverflow.com/questions/44555676/django-making-a-notification-engine", "title": "Django: Making a Notification Engine", "body": "<p>I've been building a email/sms notification engine. A person or group can be subscribed to an object and if the object gets updated, the people/groups will be notified of the change by email/sms.</p>\n\n<p>Currently, I've implemented it as below:</p>\n\n<h1>models.py</h1>\n\n<pre><code>class Subscription(models.Model):\n    # subscribers\n    people  = models.ManyToManyField(Person)\n    groups  = models.ManyToManyField(Group)\n\n    # mandatory fields for generic relation\n    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)\n    object_id = models.PositiveIntegerField()\n    content_object = GenericForeignKey()\n</code></pre>\n\n<h1>mixins.py</h1>\n\n<pre><code>class NotificationMixin(object):\n\n    def perform_update(self, serializer):\n        model_name = str.lower(serializer.Meta.model)\n        old_obj = model.objects.get(id=serializer.data['id'])\n        obj = serializer.save()\n        self.notify(model_name, old_obj, obj)\n\n    def notify(self, model_name, old_obj, obj):\n        # All models have a GenericRelation field for reverse searching\n        subscriptions = Subscription.objects.filter(**{ model_name: obj })\n\n        // *rest of logic to iterate over subscriptions and email people/groups\n</code></pre>\n\n<p>Using django's ContentType generic relations, I can subscribe a person/group to any object.</p>\n\n<p>I want to add the capability to create global subscriptions using the same Subscription model so that they are all stored in the same table. A global subscription will not have an object that it is tracking, but when any object of a specific model is triggered, emails will be sent.</p>\n\n<p>I'm having trouble generalizing my subscription model to be able to accept a model instance or the model for triggering a response. </p>\n\n<p>The functionality I want:</p>\n\n<ol>\n<li><p>Global Subscriptions</p>\n\n<ul>\n<li>People/Groups updated by if any object of the model X is changed</li>\n</ul></li>\n<li><p>Object Level Subscriptions</p>\n\n<ul>\n<li>People/Groups updated if specific object is updated</li>\n</ul></li>\n</ol>\n\n<p>Is the current model/architecture that I have a good way to go about this problem, or should I approach this differently?</p>\n\n<p><strong>Note</strong> The frontend is in AngularJs, so this is exclusively interacting with our django api.</p>\n"}, {"tags": ["python", "pandas", "dask"], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 2, "last_activity_date": 1497493158, "creation_date": 1497493158, "answer_id": 44557478, "question_id": 44555659, "link": "https://stackoverflow.com/questions/44555659/understanding-dask-distributed-behavior-with-regards-to-dataframe-operations/44557478#44557478", "title": "Understanding Dask Distributed behavior with regards to DataFrame operations", "body": "<p>Yes, when you create a Client it registers itself as the default global scheduler.  You can avoid this behavior with the <code>set_as_default=</code> keyword</p>\n\n<pre><code>client = Client(..., set_as_default=False)\n</code></pre>\n\n<p>Regarding the exception you've run into I suspect that it is a version mismatch.  You might want to upgrade with either <code>conda</code> or <code>pip</code>.</p>\n\n<pre><code>conda install dask distributed\n</code></pre>\n\n<p>or </p>\n\n<pre><code>pip install dask distributed\n</code></pre>\n"}], "owner": {"reputation": 1338, "user_id": 3407994, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/vHAwE.jpg?s=128&g=1", "display_name": "kuanb", "link": "https://stackoverflow.com/users/3407994/kuanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 44557478, "answer_count": 1, "score": 1, "last_activity_date": 1497493158, "creation_date": 1497479110, "question_id": 44555659, "link": "https://stackoverflow.com/questions/44555659/understanding-dask-distributed-behavior-with-regards-to-dataframe-operations", "title": "Understanding Dask Distributed behavior with regards to DataFrame operations", "body": "<p>I would like to better understand how <code>dask.distributed</code> works. I have a simple csv I read into a Dask dataframe as in the below. This operation executes fine and returns some integer value representing the length of the dataframe, which is the behavior I would expect.</p>\n\n<pre><code>import dask.dataframe as dd\ngdf = dd.read_csv(filepath)\nlen(gdf)\n# returns some int value\n</code></pre>\n\n<p>But once I introduce an instance of <code>Client</code> from <code>dask.distributed</code>, I recieve the following error:</p>\n\n<pre><code>distributed.utils - ERROR - 'LocalFileSystem' object has no attribute 'cwd'\n</code></pre>\n\n<p>Here is an example code block:</p>\n\n<pre><code>from dask.distributed import Client\nimport dask.dataframe as dd\nclient_db = Client(remote_addr)\ngdf = dd.read_csv(filepath)\nlen(gdf)\n# throws the above error\n</code></pre>\n\n<p>I'm confused - does <code>Client</code> \"inject itself\" into all Dask operations once it has been instantiated. I thought I would need to do something like <code>gdf = client_db.persist(gdf)</code> to ask that <code>Client</code> connection to manage operations on that dataframe. </p>\n\n<p>Some context on what's happening here would be much appreciated! I can see from the traceback it has to do with Tornado, which is a web framework in Py that allows for web sockets, long polling, etc. I assume that it is attempting to store something... somewhere... But my familiarity drops off here.</p>\n\n<p>If needed, the traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/distributed/utils.py\", line 223, in f\n    result[0] = yield make_coro()\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/tornado/gen.py\", line 1015, in run\n    value = future.result()\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/tornado/concurrent.py\", line 237, in result\n    raise_exc_info(self._exc_info)\n  File \"&lt;string&gt;\", line 3, in raise_exc_info\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/tornado/gen.py\", line 1021, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/distributed/client.py\", line 1156, in _gather\n    traceback)\n  File \"/.../geopandas_opt/venv/lib/python3.6/site-packages/six.py\", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \"/usr/local/lib/python3.5/site-packages/dask/bytes/core.py\", line 212, in read_block_from_file\n  File \"/usr/local/lib/python3.5/site-packages/dask/bytes/core.py\", line 314, in __enter__\n  File \"/usr/local/lib/python3.5/site-packages/dask/bytes/local.py\", line 64, in open\n  File \"/usr/local/lib/python3.5/site-packages/dask/bytes/local.py\", line 36, in _trim_filename\nAttributeError: 'LocalFileSystem' object has no attribute 'cwd'\n</code></pre>\n"}, {"tags": ["python", "parsing", "console", "ipython"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1497499745, "post_id": 44555637, "comment_id": 76106542, "body": "It&#39;s hard to implement new syntax with Python.  The <code>ipython</code> <code>%run</code> magic can pass commandline arguments to the script (after parsing it&#39;s own arguments like <code>-n</code>.  So if your &#39;parser&#39; can be called from an OS shell, it can be called from <code>%run</code>.  <code>ipython</code> uses <code>argparse</code> to parse it&#39;s own commandline, and to handle the magic parameters."}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1497559970, "post_id": 44555637, "comment_id": 76142368, "body": "will try that ... in general that is the idea I want to pass the whole line to the external parser and print back whatever the parser prints out. The problem with %run is that will become too much typing i.e. &gt;%run script.py text&lt;"}], "answers": [{"tags": [], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "is_accepted": true, "score": 0, "last_activity_date": 1497563643, "creation_date": 1497563643, "answer_id": 44577637, "question_id": 44555637, "link": "https://stackoverflow.com/questions/44555637/ipython-python-console-with-my-own-parser-processor/44577637#44577637", "title": "ipython/python console with my own parser/processor?", "body": "<p>I made it work as extension :</p>\n\n<pre><code>from __future__ import print_function\nfrom IPython.core.magic import (Magics, magics_class, line_magic, cell_magic, line_cell_magic)\nfrom bi_lang import *\n\n@magics_class\nclass BiMagics(Magics):\n\n    def __init__(self, shell):\n        super(BiMagics, self).__init__(shell)\n        self.bi = BiLang()\n\n    @line_magic\n    def do(self, line):\n        rv = self.bi.run(line)\n        return rv\n\nip = get_ipython()\nmagics = BiMagics(ip)\nip.register_magics(magics)\n</code></pre>\n\n<p>Then :</p>\n\n<pre><code> In [3]: %reload_ext ipython_extension\n In [4]: %do 5 + 6 \n ===== return ast =====\n Value\n +- val 11\n `- vtype 'num'\n</code></pre>\n\n<p>If you need more info, look here : \n<a href=\"http://ipython.readthedocs.io/en/stable/config/custommagics.html#defining-magics\" rel=\"nofollow noreferrer\">http://ipython.readthedocs.io/en/stable/config/custommagics.html#defining-magics</a></p>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 44577637, "answer_count": 1, "score": 0, "last_activity_date": 1497563643, "creation_date": 1497478976, "last_edit_date": 1497561961, "question_id": 44555637, "link": "https://stackoverflow.com/questions/44555637/ipython-python-console-with-my-own-parser-processor", "title": "ipython/python console with my own parser/processor?", "body": "<p>Is there an easy way to make ipython console redirect the cmd-line towards external parser and then output the result in the current session.</p>\n\n<p>Say for example I have parser that calculates expressions (just for the sake of the example).\nThen I want when the cmd-line starts with \"calc:\" to pass it to this external parser ... here is hypothetical example :</p>\n\n<pre><code>In[XX]: calc: 5 + 5\n  external calc: 5 + 5 = 10\n</code></pre>\n\n<p>and so on, you get the idea..</p>\n\n<hr>\n\n<p>this is the closest I found so far :\nfirst create a shell script :</p>\n\n<pre><code> #!/bin/sh\n echo $1\n</code></pre>\n\n<p>then in ipython :</p>\n\n<pre><code> In [473]: !./x 123\n 123\n</code></pre>\n\n<p>if it is in system path then even shorter :</p>\n\n<pre><code> In [475]: !x 123\n 123\n</code></pre>\n\n<p>Now if I can share state across invocations.</p>\n"}, {"tags": ["python", "telegram"], "comments": [{"owner": {"reputation": 3757, "user_id": 5033247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcqj4.jpg?s=128&g=1", "display_name": "Smart Manoj", "link": "https://stackoverflow.com/users/5033247/smart-manoj"}, "edited": false, "score": 0, "creation_date": 1560912273, "post_id": 44555613, "comment_id": 99888217, "body": "<a href=\"https://docs.telethon.dev/en/latest/modules/client.html#telethon.client.messages.MessageMethods.delete_messages\" rel=\"nofollow noreferrer\">docs.telethon.dev/en/latest/modules/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9656, "user_id": 3769451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1", "display_name": "apadana", "link": "https://stackoverflow.com/users/3769451/apadana"}, "is_accepted": true, "score": 2, "last_activity_date": 1497485222, "creation_date": 1497485222, "answer_id": 44556530, "question_id": 44555613, "link": "https://stackoverflow.com/questions/44555613/telethon-delete-a-message/44556530#44556530", "title": "Telethon: delete a message", "body": "<p>Using the other delete from channels package I was able to get the delete message working, but I am still curious to know how to get the delete from <strong>messages.delete_messages</strong> working. </p>\n\n<pre><code>from telethon.tl.functions.channels.delete_messages import DeleteMessagesRequest\n\nchannel = InputPeerChannel(channel_id, access_hash)\nresult = client.invoke(DeleteMessagesRequest(channel, [msg.id]))\n</code></pre>\n\n<p>and it will delete the message from the channel. </p>\n"}], "owner": {"reputation": 9656, "user_id": 3769451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1", "display_name": "apadana", "link": "https://stackoverflow.com/users/3769451/apadana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2683, "favorite_count": 0, "accepted_answer_id": 44556530, "answer_count": 1, "score": 2, "last_activity_date": 1497485222, "creation_date": 1497478822, "last_edit_date": 1497479138, "question_id": 44555613, "link": "https://stackoverflow.com/questions/44555613/telethon-delete-a-message", "title": "Telethon: delete a message", "body": "<p>I am trying to delete a message using telegram API and <a href=\"https://lonamiwebs.github.io/Telethon/\" rel=\"nofollow noreferrer\">Telethon</a>. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>from telethon import InteractiveTelegramClient\nfrom telethon.tl.types.input_peer_channel import InputPeerChannel\nfrom telethon.tl.functions.messages.delete_messages import DeleteMessagesRequest\n\n#...\ntotal_count, messages, senders = client.get_message_history(\n                        chat, limit=1)\nmsg = messages[0]\n\nresult = client.invoke(DeleteMessagesRequest([msg.id]))\n</code></pre>\n\n<p>But first of all nothing happens, and second, it doesn't look right, since msg.id is like 5 or 220 and it doesn't look like a unique number. </p>\n\n<p>Here is the message: </p>\n\n<pre><code>msg: (message (ID: 0xc09bexxx) = (out=None, mentioned=None, media_unread=None, silent=None, post=True, id=5, from_id=None, to_id=(peerChannel (ID: 0xbdddexxx) = (channel_id=1234)), fwd_from=None, via_bot_id=None, reply_to_msg_id=None, date=2017-06-14 14:39:23, message=test33, media=None, reply_markup=None, entities=None, views=1, edit_date=None))\n</code></pre>\n\n<p>I also tried with the hex number 0xc09bexxx but that gives an exception. </p>\n\n<p>So how can I delete a message in a channel? </p>\n\n<p>So far I looked at this <a href=\"https://github.com/LonamiWebs/Telethon/issues/20\" rel=\"nofollow noreferrer\">github issue</a> to get started with the delete message. My guess is that maybe the following import is not the right one and I should import the version in the Channels package, which gets a channel id and a message id? </p>\n\n<pre><code>from telethon.tl.functions.messages.delete_messages import DeleteMessagesRequest\n</code></pre>\n"}, {"tags": ["python", "pandas", "anaconda", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 8163004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e770af1c355bd403898a9dbd2cf0520?s=128&d=identicon&r=PG&f=1", "display_name": "ebrithilotho", "link": "https://stackoverflow.com/users/8163004/ebrithilotho"}, "edited": false, "score": 0, "creation_date": 1497495098, "post_id": 44555644, "comment_id": 76105481, "body": "Copying your code, it runs fine and as required. However, I have issues with creating the dataframe from the file using this method. The actual csv is approximately 10,000 x 500, which is a smaller version of 600,000 x 500 (so I can&#39;t read in as text in quotes). This is my current read line: df0=pd.read_csv(&#39;exampledb.csv&#39;, low_memory=False, encoding=&#39;iso8859_15&#39;) Any idea how I can change your code to work for that? Trying to specify the columns &#39;market_id&#39; and &#39;product_id&#39;as indexes after creating a dataframe results in an indexing a multi-index error"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 112, "user_id": 8163004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e770af1c355bd403898a9dbd2cf0520?s=128&d=identicon&r=PG&f=1", "display_name": "ebrithilotho", "link": "https://stackoverflow.com/users/8163004/ebrithilotho"}, "edited": false, "score": 0, "creation_date": 1497548589, "post_id": 44555644, "comment_id": 76136245, "body": "@ebrithilotho My <code>sales</code> object is what I believe you should have in your <code>df_sales</code>... I just used my <code>pd.read_csv</code> to show how I got to that point because you didn&#39;t provide adequate data.  You should be able to run my code on your <code>df_sales</code>."}, {"owner": {"reputation": 112, "user_id": 8163004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e770af1c355bd403898a9dbd2cf0520?s=128&d=identicon&r=PG&f=1", "display_name": "ebrithilotho", "link": "https://stackoverflow.com/users/8163004/ebrithilotho"}, "edited": false, "score": 0, "creation_date": 1497549403, "post_id": 44555644, "comment_id": 76136682, "body": "Using this line: <code>df_sales.loc[df_sales.groupby(level=0).idxmax()].reset_index&zwnj;&#8203;(name=&#39;max_sales&#39;</code> is where I&#39;m having issues. Using my read line, it presents: <code>ValueError: Cannot index with multidimensional key</code>. If I change my read line to add <code>index_col=[&#39;market_id&#39;,&#39;product_id&#39;]</code> it causes the same error. They aren&#39;t columns 0,1 in the table (they are mixed in with 500 other variables) so I would like to be able to reference them by name. I know your code works on it&#39;s own but I&#39;m struggling to apply it to my file. If I didn&#39;t give adequate data is there anything other info that could help?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1497479487, "last_edit_date": 1497479487, "creation_date": 1497479028, "answer_id": 44555644, "question_id": 44555579, "link": "https://stackoverflow.com/questions/44555579/get-the-max-of-each-group-when-using-groupby-on-two-columns-python/44555644#44555644", "title": "Get the max of each group when using groupby() on two columns ~Python", "body": "<p>Use <code>idxmax</code> within a <code>groupby</code></p>\n\n<p><strong>Setup</strong>  </p>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\n\ntxt = \"\"\"market_id  product_id         Sales\n1006174    1132679             2789\n1006174    1382460             4586\n1006174    1382691               49\n1006174    1383020        269138089\n1006638    1132679          5143156\n1006638    1382460           387250\n1006638    1383020        204456809\n10002899   1132679              630\n10002899   1382464              220\"\"\"\n\n\nsales = pd.read_csv(StringIO(txt), delim_whitespace=True, index_col=[0, 1], squeeze=True)\n</code></pre>\n\n<p><strong>Solution</strong>  </p>\n\n<pre><code>sales.loc[sales.groupby(level=0).idxmax()]\n\nmarket_id  product_id\n1006174    1383020       269138089\n1006638    1383020       204456809\n10002899   1132679             630\nName: Sales, dtype: int64\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>sales.loc[sales.groupby(level=0).idxmax()].reset_index(name='max_sales')\n\n   market_id  product_id  max_sales\n0    1006174     1383020  269138089\n1    1006638     1383020  204456809\n2   10002899     1132679        630\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 8163004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e770af1c355bd403898a9dbd2cf0520?s=128&d=identicon&r=PG&f=1", "display_name": "ebrithilotho", "link": "https://stackoverflow.com/users/8163004/ebrithilotho"}, "is_accepted": false, "score": 0, "last_activity_date": 1497557941, "creation_date": 1497557941, "answer_id": 44576340, "question_id": 44555579, "link": "https://stackoverflow.com/questions/44555579/get-the-max-of-each-group-when-using-groupby-on-two-columns-python/44576340#44576340", "title": "Get the max of each group when using groupby() on two columns ~Python", "body": "<p>Somehow managed to get this - I'm not sure if its the best way to do it but it works with my data:</p>\n\n<pre><code>df0=pd.read_csv('test.csv', low_memory=False, encoding='iso8859_15')\n\n#Rank all items in each market by total sales\ndf_sales=df0[['Sales', 'market_id', 'product_id']] # int, int, int\n\n# groups sales by market and product and sums product sales\ngr_sales = df_sales.groupby(['market_id', 'product_id'], as_index = False).sum()\n\n# gets the product sales in each market and sorts in order of decreasing sales\ngr_sales = gr_sales.groupby('market_id').apply(pd.DataFrame.sort_values, 'Sales', ascending = False)\n\n# Finds the product id with the maximum sales in each market\nmax_sales = gr_sales.groupby('market_id').max() \n</code></pre>\n\n<p>Giving me:</p>\n\n<pre><code>In[621]: max_sales\nOut[621]: \n    market_id  product_id       Sales\n0     1006174     1383020   269138089\n1     1006638     1383020  1330070614\n2     1006678     1383020    58548417\n3     1006684     1383020   215858049\n4     1006692     1383020    21799689\n5     1006732     1383020    58548417\n6     1006733     1383020    58548417\n7     1006739     1383020   215858049\n8     1006819     1383020   605951504\n9     1006820     1383020    59083807\n10    1006821     1383020    25116872\n11    1050511     1382672     6201692\n12    1050512     1382672     5468317\n13   10001493     1383020    21799689\n14   10001516     1383020   204456809\n15   10002899     1383020    62413425\n</code></pre>\n\n<p>and (shortened example):</p>\n\n<pre><code>In[624]: gr_sales\nOut[624]: \n               market_id  product_id       Sales\nmarket_id                                       \n1006174   11     1006174     1383020   269138089\n          9      1006174     1382672     5070111\n          5      1006174     1382536     2442639\n          7      1006174     1382602     1108361\n          6      1006174     1382557      158488\n          8      1006174     1382651       17214\n          1      1006174     1382460        4586\n          0      1006174     1132679        2789\n          3      1006174     1382490         799\n          2      1006174     1382464         105\n          10     1006174     1382691          49\n          4      1006174     1382522          16\n1006638   28     1006638     1383020  1330070614\n          25     1006638     1382672   109679596\n          12     1006638     1132679     5143156\n          17     1006638     1382536     4885278\n          22     1006638     1382620     2668948\n          21     1006638     1382602     2216722\n          18     1006638     1382538      992228\n          13     1006638     1382460      387250\n          19     1006638     1382557      316976\n          23     1006638     1382651       39616\n          26     1006638     1382674       22388\n          20     1006638     1382573        7412\n          15     1006638     1382490        1598\n          14     1006638     1382464         758\n          24     1006638     1382665         120\n          27     1006638     1382691          98\n          16     1006638     1382522          32\n1006678   32     1006678     1383020    58548417\n                 ...         ...         ...\n\n[117 rows x 3 columns]\n</code></pre>\n\n<p>I'm not sure how to remove the arbitrary index from the gr_sales output though (right in the middle like that is a bit annoying), or from the max_sales table</p>\n"}], "owner": {"reputation": 112, "user_id": 8163004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e770af1c355bd403898a9dbd2cf0520?s=128&d=identicon&r=PG&f=1", "display_name": "ebrithilotho", "link": "https://stackoverflow.com/users/8163004/ebrithilotho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2151, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1497557941, "creation_date": 1497478581, "last_edit_date": 1497549461, "question_id": 44555579, "link": "https://stackoverflow.com/questions/44555579/get-the-max-of-each-group-when-using-groupby-on-two-columns-python", "title": "Get the max of each group when using groupby() on two columns ~Python", "body": "<p>Using a csv in a similar format (total csv is ~500 x ~600,000), so there are columns missing:</p>\n\n<pre><code>       Sales  market_id  product_id\n\n0         38   10001516     1132679\n1         49   10001516     1138767\n2          6   10001516     1132679\n     ...        ...         ...\n9969  245732    1002123     1383020\n9970  247093    1006821     1383020\n</code></pre>\n\n<p>etc\nand reading it in like so:\n<code>df0=pd.read_csv('all_final_decomps2_small.csv', low_memory=False, encoding='iso8859_15')</code></p>\n\n<p>I'm trying to find the product_id per each market_id with the maximum sales. To do this I need to sum the sales as the same product_id and market_id can appear in multiple rows.</p>\n\n<p>I have tried this which yields the sum of products within each market:</p>\n\n<pre><code>df_sales=df0[['Sales','market_id','product_id']] \ndf_sales.groupby(['market_id', 'product_id'])['Sales'].sum()\n</code></pre>\n\n<p>As so (shortened):</p>\n\n<pre><code>market_id  product_id\n1006174    1132679             2789\n           1382460             4586\n           1382691               49\n           1383020        269138089\n1006638    1132679          5143156\n           1382460           387250\n           1383020        204456809\n10002899   1132679              630\n           1382464              220\n</code></pre>\n\n<p>using:</p>\n\n<pre><code>df_sales.groupby(['market_id', 'product_id'])['Sales'].sum().max()\n</code></pre>\n\n<p>returns the maximum value of the sums and nothing else, so in this instance it would return 269138089. I would like to return something like this:</p>\n\n<pre><code>market_id  product_id      max_sales\n1006174    1383020        269138089\n1006638    1383020        204456809\n10002899   1132679              630\n</code></pre>\n\n<p>I've tried a lot of different things but I can't seem to get anything to work for this example, so I'd appreciate any help (and sorry if it seems like it's been asked before).</p>\n\n<p>I am using:\nPython 3.6.1 :: Anaconda 4.4.0 (64-bit)</p>\n"}, {"tags": ["python", "django", "factory-boy"], "answers": [{"comments": [{"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497905503, "post_id": 44633292, "comment_id": 76265417, "body": "Hey @dan_kaufhold, unfortunately using the <code>_prepare</code> method does not work for my problem. The method is triggered when I create a new factory, but the value of <code>kwargs</code> is not equal to the original arguments passed in. It contains all of the arguments - for instance, in your example, calling <code>UserFactory(password=&#39;apple&#39;)</code> would give me a <code>kwargs</code> of <code>{&quot;email&quot;: &quot;user0@example.com&quot;, &quot;password&quot;: &quot;test123&quot;}</code>. I&#39;m trying to determine whether or not a required field was input manually by the user, or generated via factory boy. In your example, I can&#39;t detect if <code>email</code> was user or machine made."}, {"owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "reply_to_user": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497942857, "post_id": 44633292, "comment_id": 76277582, "body": "@mjkaufer Take a closer look. The password is only set to <code>test123</code> if there&#39;s no other password already in the <code>kwargs</code>. When you actually check what the <code>kwargs</code> are in the first code example where I commented, you will see that it&#39;s the exact <code>kwargs</code> you put in. In the UserFactory example, I do exactly that. I check if the password is given in <code>kwargs</code> and manipulate it."}, {"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497964339, "post_id": 44633292, "comment_id": 76293334, "body": "But in my code I want to see if an existing field is being overridden. In your example, if password was a field in UserFactory, you&#39;d be unable to distinguish if the password <code>kwarg</code> was manually entered or if the computer generated it, based off of the <code>_prepare</code> method."}, {"owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "reply_to_user": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497977363, "post_id": 44633292, "comment_id": 76302933, "body": "@mjkaufer I see what you mean. Updated my answer. The <code>__call__</code> method includes only the kwargs, that you put in, not the ones, that are declared by fields."}, {"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497988587, "post_id": 44633292, "comment_id": 76309459, "body": "I tried <code>__call__</code> a while back but to no avail - it didn&#39;t even fire the method. What version of <code>factory_boy</code>/<code>django</code> are you using? I&#39;m running <code>django</code> version <code>1.11.2</code> and <code>factory_boy</code> version <code>2.8.1</code>"}, {"owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "reply_to_user": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1497992418, "post_id": 44633292, "comment_id": 76311488, "body": "Using the exact same versions. The <code>__call__</code> method is always called by the <code>FactoryMetaClass</code> to determine whether to execute the build, create or stub strategy. So since this seems to be a very central part of the factory, I would assume, that it must always be called, no matter what factory you create. The simple example above is definitely working in a new Django project."}, {"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1498009120, "post_id": 44633292, "comment_id": 76316311, "body": "Have you tried running your example, because it&#39;s definitely not working on my end"}, {"owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "reply_to_user": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1498025986, "post_id": 44633292, "comment_id": 76321164, "body": "Sure, the output and code is directly copied from my test."}, {"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1498054877, "post_id": 44633292, "comment_id": 76341599, "body": "That&#39;s really weird, <code>__call__</code> isn&#39;t firing on my end - what version of python are you running, I&#39;m running <code>3.5.2</code>"}, {"owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "reply_to_user": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 0, "creation_date": 1498070775, "post_id": 44633292, "comment_id": 76352043, "body": "Okay, no idea why this doesn&#39;t fire, let&#39;s move it one step further up in the call stack and go for the <code>create</code> class method. I updated the example."}, {"owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "edited": false, "score": 1, "creation_date": 1498071254, "post_id": 44633292, "comment_id": 76352304, "body": "Beautiful, that works perfectly. Thanks for all of your help!"}], "tags": [], "owner": {"reputation": 567, "user_id": 1444373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Y1og.jpg?s=128&g=1", "display_name": "dan_kaufhold", "link": "https://stackoverflow.com/users/1444373/dan-kaufhold"}, "is_accepted": true, "score": 3, "last_activity_date": 1498080095, "last_edit_date": 1498080095, "creation_date": 1497882579, "answer_id": 44633292, "question_id": 44555506, "link": "https://stackoverflow.com/questions/44555506/factory-boy-extract-original-kwargs/44633292#44633292", "title": "factory_boy extract original kwargs", "body": "<p>You can override the <code>create</code> method to only get the user kwargs.</p>\n\n<p>A full example would be something like this:</p>\n\n<pre><code>from django.contrib.auth.models import User\nimport factory\n\n\nclass UserFactory(factory.DjangoModelFactory):\n    username = factory.Sequence(\n        lambda n: 'test'\n    )\n    email = factory.Sequence(lambda n: 'user{0}@example.com'.format(n))\n\n    class Meta:\n        model = User\n\n    @classmethod\n    def create(cls, **kwargs):\n\n        # here you'll only have the kwargs that were entered manually\n\n        print(str(kwargs))\n\n        return super(UserFactory, cls).create(**kwargs)\n</code></pre>\n\n<p>So when I call it:</p>\n\n<pre><code>In [2]: UserFactory(username='foobar')\n{'username': 'foobar'}\nOut[2]: &lt;User: foobar&gt;\n</code></pre>\n\n<p>If you want to catch kwargs for other build strategies than <code>create</code>, you would also need to do this for the <code>stub</code> and <code>build</code> method.</p>\n"}], "owner": {"reputation": 3291, "user_id": 2009336, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b3686d192de55109f7fc65c3aadee8cd?s=128&d=identicon&r=PG&f=1", "display_name": "mjkaufer", "link": "https://stackoverflow.com/users/2009336/mjkaufer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 44633292, "answer_count": 1, "score": 4, "last_activity_date": 1498080095, "creation_date": 1497478137, "last_edit_date": 1498054910, "question_id": 44555506, "link": "https://stackoverflow.com/questions/44555506/factory-boy-extract-original-kwargs", "title": "factory_boy extract original kwargs", "body": "<p>I'm building a factory with <code>factory_boy</code> that generates a django model. I would like to see what arguments the user inputs inline. My factory itself looks like this</p>\n\n<pre><code>class SomeFactory(factory.django.DjangoModelFactory):\n\n    name = factory.Sequence(lambda n: 'Instance #{}'.format(n))\n    some_other_thing = factory.SubFactory(SomeOtherFactory)\n\n    class Meta:\n        model = SomeModel\n</code></pre>\n\n<p>Now the user could say <code>s = SomeFactory()</code> and it would work fine, but I want to detect if the user input their own argument. For instance, to tell if the user passed in their own name, as in <code>s = SomeFactory(name='Matt')</code></p>\n\n<p>What I've tried so far is</p>\n\n<ul>\n<li>Writing my own <code>__init__</code> function in the <code>SomeFactory</code> class\n\n<ul>\n<li>This gets mysteriously overwritten and is neither called when I call <code>s = SomeFactory()</code>, nor when I call <code>s.__init__()</code></li>\n</ul></li>\n<li>Same goes for overwriting the <code>__new__</code> method</li>\n<li>Overwriting the poorly named <code>_adjust_kwargs</code>\n\n<ul>\n<li>This gives me all fields as <code>kwargs</code>, not just the ones the user defined. For instance, calling <code>s = SomeFactory(name='Matt')</code>, I would get a <code>kwargs</code> dict with keys for <code>name</code> and <code>some_other_thing</code>, which makes it impossible to tell input their own argument or not</li>\n</ul></li>\n<li>Overwriting <code>_create</code>\n\n<ul>\n<li>Still encounter the same problem with overwriting <code>_adjust_kwargs</code>, in that <code>kwargs</code> doesn't contain the original <code>kwargs</code>, but rather all of the arguments</li>\n</ul></li>\n</ul>\n\n<p>I think a lot of the functionality I'm after is black-boxed inside of <code>factory_boy</code>'s <code>StepBuilder</code> (I suspect it's in the <code>instantiate</code> method) but I have no idea how to modify it to do what I want.</p>\n\n<p>Does anyone have any thoughts on how to figure out which <code>kwargs</code> were set originally in the call to <code>s = SomeFactory()</code>? I.e. determine that if I said <code>s = SomeFactory(name='Matt')</code>, that the user manually set the name? </p>\n\n<p>Thanks!</p>\n\n<p>Update: I'm running <code>django</code> version <code>1.11.2</code>, <code>factory_boy</code> version <code>2.8.1</code>, and <code>python</code> version <code>3.5.2</code></p>\n"}, {"tags": ["python", "pytest", "fixtures"], "comments": [{"owner": {"reputation": 417, "user_id": 3858507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ca563f94fafcc592c15591e9134314?s=128&d=identicon&r=PG&f=1", "display_name": "nitzpo", "link": "https://stackoverflow.com/users/3858507/nitzpo"}, "edited": false, "score": 0, "creation_date": 1497546348, "post_id": 44555504, "comment_id": 76134985, "body": "I&#39;m not sure I understood the question. Why not just inline the arrays in the python file?"}, {"owner": {"reputation": 507, "user_id": 562934, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/12b0dfe4c1f958d38b661b66f47060e2?s=128&d=identicon&r=PG&f=1", "display_name": "arkottke", "link": "https://stackoverflow.com/users/562934/arkottke"}, "reply_to_user": {"reputation": 417, "user_id": 3858507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ca563f94fafcc592c15591e9134314?s=128&d=identicon&r=PG&f=1", "display_name": "nitzpo", "link": "https://stackoverflow.com/users/3858507/nitzpo"}, "edited": false, "score": 0, "creation_date": 1497642135, "post_id": 44555504, "comment_id": 76181910, "body": "Because the data in the Python file is pretty complex"}, {"owner": {"reputation": 417, "user_id": 3858507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ca563f94fafcc592c15591e9134314?s=128&d=identicon&r=PG&f=1", "display_name": "nitzpo", "link": "https://stackoverflow.com/users/3858507/nitzpo"}, "edited": false, "score": 0, "creation_date": 1497654584, "post_id": 44555504, "comment_id": 76186469, "body": "You mean the JSON file? If yes, and you have to keep the data in JSON files, then this is pretty much it. You can make slight improvements to this code by for example using the <code>pytest_generate_tests</code> hook to scan the directory and run tests for every file there. That way you when you create a new JSON file it will be added to the tests automatically."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 4790975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4QrGv.jpg?s=128&g=1", "display_name": "ANDgineer", "link": "https://stackoverflow.com/users/4790975/andgineer"}, "edited": false, "score": 0, "creation_date": 1497674308, "post_id": 44600813, "comment_id": 76189442, "body": "But in fact it won&#39;t improve anything.. Could you clarify why exactly you want &#39;better way&#39;, what&#39;s wrong with your approach?"}, {"owner": {"reputation": 507, "user_id": 562934, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/12b0dfe4c1f958d38b661b66f47060e2?s=128&d=identicon&r=PG&f=1", "display_name": "arkottke", "link": "https://stackoverflow.com/users/562934/arkottke"}, "edited": false, "score": 0, "creation_date": 1497899064, "post_id": 44600813, "comment_id": 76262116, "body": "I was only looking for ways to improve my approach/style. I couldn&#39;t find any documentation regarding generating multiple tests like I am, so I thought I might be thinking about the problem incorrectly."}], "tags": [], "owner": {"reputation": 421, "user_id": 4790975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4QrGv.jpg?s=128&g=1", "display_name": "ANDgineer", "link": "https://stackoverflow.com/users/4790975/andgineer"}, "is_accepted": false, "score": 0, "last_activity_date": 1497674301, "creation_date": 1497674301, "answer_id": 44600813, "question_id": 44555504, "link": "https://stackoverflow.com/questions/44555504/producing-multiple-pytest-fixtures/44600813#44600813", "title": "Producing multiple pytest fixtures", "body": "<p>You can use <a href=\"https://docs.pytest.org/en/latest/parametrize.html#basic-pytest-generate-tests-example\" rel=\"nofollow noreferrer\">pytest_generate_tests</a>.</p>\n\n<pre><code>def pytest_generate_tests(metafunc):\n    if 'test_case' in metafunc.fixturenames:\n        fpath = pathlib.Path(__file__).parent\n        fpath /= 'test_data' / 'test_cases.json'\n        test_cases = json.load(fpath.open())\n        metafunc.fixturenames.append('test_case')\n        metafunc.parametrize(\n            'test_case',\n            test_cases)\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 562934, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/12b0dfe4c1f958d38b661b66f47060e2?s=128&d=identicon&r=PG&f=1", "display_name": "arkottke", "link": "https://stackoverflow.com/users/562934/arkottke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497674301, "creation_date": 1497478133, "question_id": 44555504, "link": "https://stackoverflow.com/questions/44555504/producing-multiple-pytest-fixtures", "title": "Producing multiple pytest fixtures", "body": "<p>I am testing some engineering equations with several parameters that return arrays of floats. To test all of the cases, I would like to use a number of fixtures. I currently, store the test cases in a simple file, load them, and then return the test case of interest. Is there a better way to do this?</p>\n\n<pre><code>@pytest.fixture(params=[0, 1, 2])\ndef test_case(request):\n    fpath = pathlib.Path(__file__).parent\n    fpath /= 'test_data' / 'test_cases.json'\n    test_cases = json.load(fpath.open())\n    return test_cases[request.param]\n\ndef test_function(test_case):\n    # Run the test\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1497478398, "post_id": 44555500, "comment_id": 76101587, "body": "what&#39;s in functional_test.py?"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1497478745, "post_id": 44555500, "comment_id": 76101693, "body": "Sorry, I edited the question to show it."}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 3098, "user_id": 1728790, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eENW3.jpg?s=128&g=1", "display_name": "demouser123", "link": "https://stackoverflow.com/users/1728790/demouser123"}, "edited": false, "score": 0, "creation_date": 1497547535, "post_id": 44555500, "comment_id": 76135637, "body": "Thank  you very much @demouser123"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497507309, "creation_date": 1497478123, "last_edit_date": 1497507309, "question_id": 44555500, "link": "https://stackoverflow.com/questions/44555500/python-and-selenium", "title": "Python and Selenium", "body": "<p>I had the same problem that in <a href=\"https://stackoverflow.com/questions/40208051/selenium-using-python-geckodriver-executable-needs-to-be-in-path\">this question</a> and I applied what's recommended in the answers but what I got is another error.</p>\n\n<p>This is the python script <code>functional_test.py</code></p>\n\n<pre><code>from selenium import webdriver\n\nbrowser=webdriver.Firefox()\nbrowser.get('http://localhost:8000')\n\nassert 'Django' in browser.title\n</code></pre>\n\n<p>And this is the error that I get:</p>\n\n<pre><code>MacBook-Pro-de-Hugo:Code hvillalobos$ python3 functional_test.py\nTraceback (most recent call last):\n  File \"functional_test.py\", line 3, in &lt;module&gt;\n    browser=webdriver.Firefox()File \n\"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-\npackages/selenium/webdriver/firefox/webdriver.py\", line 142, in __init__\n\n    self.service.start()\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/selenium/webdriver/common/service.py\",\nline 74, in start\nstdout=self.log_file, stderr=self.log_file)\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py\", line 707, in __init__\nrestore_signals, start_new_session)\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py\", line 1326, in _execute_child\nraise child_exception_type(errno_num, err_msg)\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "csv", "salesforce"], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497537577, "post_id": 44556972, "comment_id": 76129533, "body": "Since I am trying to run from Linux server, that was the stopping point. Data Loader can be run from Windows machine, but not from Linux. I am looking into what Salesforce REST API is all about."}, {"owner": {"reputation": 938, "user_id": 7034312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f463acdcd9ae6ecb3683aa4b395034f3?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Jordan", "link": "https://stackoverflow.com/users/7034312/gareth-jordan"}, "reply_to_user": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497538938, "post_id": 44556972, "comment_id": 76130532, "body": "I think you can just use the jar file associated with the loader and if u have Java installed you could run it from the command line"}, {"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497539257, "post_id": 44556972, "comment_id": 76130743, "body": "You are referring to Data Loader, correct? I was referred to this site <a href=\"https://github.com/forcedotcom/dataloader\" rel=\"nofollow noreferrer\">github.com/forcedotcom/dataloader</a>  Is this what we are talking about?"}, {"owner": {"reputation": 938, "user_id": 7034312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f463acdcd9ae6ecb3683aa4b395034f3?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Jordan", "link": "https://stackoverflow.com/users/7034312/gareth-jordan"}, "reply_to_user": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497540217, "post_id": 44556972, "comment_id": 76131448, "body": "Yes, from that repo you could build for linux.  But if you just want to get the data into salesforce quickly I would still recommend using the Data Import Wizard in the setup area in salesforce.  If you want to do an automated script/application from your linux server, you can go ahead with building from this repo, or try using one of the language toolkits <a href=\"https://developer.salesforce.com/page/Tools\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497540642, "post_id": 44556972, "comment_id": 76131760, "body": "I am trying to do the daily run on Linux server. So, I am guessing Data Loader is the option, not Data Import Wizard, correct?. I am just little bit overwhelmed with how to get it working using command lines.  Out of tool kits, which one should I try/use?"}, {"owner": {"reputation": 938, "user_id": 7034312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f463acdcd9ae6ecb3683aa4b395034f3?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Jordan", "link": "https://stackoverflow.com/users/7034312/gareth-jordan"}, "reply_to_user": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1497541700, "post_id": 44556972, "comment_id": 76132455, "body": "that would depend on your comfort level with  particular language.  You initially posted in python, so I assume you are comfortable with that language. So from my original answer see <a href=\"https://www.youtube.com/watch?v=uXvJdHqnLcw\" rel=\"nofollow noreferrer\">this</a> talk on how to use the python sdk."}], "tags": [], "owner": {"reputation": 938, "user_id": 7034312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f463acdcd9ae6ecb3683aa4b395034f3?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Jordan", "link": "https://stackoverflow.com/users/7034312/gareth-jordan"}, "is_accepted": false, "score": 1, "last_activity_date": 1497488856, "creation_date": 1497488856, "answer_id": 44556972, "question_id": 44555497, "link": "https://stackoverflow.com/questions/44555497/reading-data-from-csv-file-and-insert-into-salesforce/44556972#44556972", "title": "Reading data from CSV file and insert into Salesforce", "body": "<p>Not too sure what your requirements are, but if you are not integrating two systems why not just import the data directly using tools provided by salesforce like the data import wizard or Salesforce DataLoader?  If you are integrating systems then you should look into using the Salesforce REST API, or by using the Salesforce python sdk</p>\n\n<blockquote>\n  <p>pip install salesforce-python-sdk</p>\n</blockquote>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6823397"}, "is_accepted": false, "score": 0, "last_activity_date": 1497894182, "creation_date": 1497894182, "answer_id": 44636808, "question_id": 44555497, "link": "https://stackoverflow.com/questions/44555497/reading-data-from-csv-file-and-insert-into-salesforce/44636808#44636808", "title": "Reading data from CSV file and insert into Salesforce", "body": "<p>You are currently in the same position I was about 8 months ago. I have successfully integrated a MySQL Database into Salesforce. Basically a customer will register a product on our website, then I have python pull the data from the database, format it all in a xlsx file and then send that data into salesforce using simple-salesforce package which works great. Below is a code snippet which should help you get started. Let me know if you have any questions.</p>\n\n<pre><code>import os\nimport sys\nimport xlrd\nimport xlwt\nimport time\nimport base64\nimport smtplib\nimport MySQLdb\nimport logging\nimport datetime\nimport collections\nfrom xlrd.sheet import ctype_text\nfrom collections import OrderedDict\nfrom simple_salesforce import SFType\nfrom simple_salesforce import Salesforce\nfrom xlsxwriter.workbook import Workbook\nfrom MySQLdb import OperationalError\nfrom mysql.connector import MySQLConnection, Error\n\nlogger = logging.getLogger('view_rows')\nhdlr = logging.FileHandler('C:\\Users\\Chris\\Documents\\Email Logs\\myapp.log')\nformatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')\nhdlr.setFormatter(formatter)\nlogger.addHandler(hdlr) \nlogger.setLevel(logging.WARNING)\n# MySQL Database Credentials\nur = 'user_name' # your username\npd = 'my_password' # your password\nht = 'localhost' # your host\npt = 3306\ndb = 'my_database' # database where your table is stored\ncon = MySQLdb.connect(user=ur, passwd=pd, host=ht, port=pt, db=db)\ncursor = con.cursor()\ncon.autocommit(True)\n# Salesforce Credentials\nsf = Salesforce(username='my_Salesforce_Email@mail.com', password='my_SF_password', security_token='my_Generated_token_from_Salesforce', client_id='This does not really matter')\norderedDict = collections.OrderedDict()\n# Gets the new customers that have created an account on the Warranty Portal\ndef GetNewContact():\n        # Creates a xlsx file\n    workbook = Workbook('outfile.xlsx')\n    sheet = workbook.add_worksheet(\"Warranty Info\")\n    query = \"SELECT RC.cus_id, RC.cus_username, RC.cus_subsc FROM my_database.rma_customer RC INNER JOIN my_database.rma_customer_address CA ON RC.cus_id=CA.cus_id WHERE CA.cus_address_type=0 AND CA.cus_updated=1\"\n    query0 = \"SELECT RCD.cus_firstname, RCD.cus_lastname, RCD.cus_cell_phone FROM my_database.rma_customer_details RCD INNER JOIN my_database.rma_customer_address CA ON RCD.cus_id=CA.cus_id WHERE CA.cus_address_type=0 AND CA.cus_updated=1\"\n    query1 = \"SELECT CA.cus_address_1, CA.cus_address_2, CA.cus_city, CA.cus_postcode FROM my_database.rma_customer_address CA LEFT JOIN my_database.rma_customer RC ON CA.cus_id=RC.cus_id WHERE CA.cus_address_type=0 AND CA.cus_updated=1\"\n    cursor.execute(query)\n    headers = ['ID', 'Email', 'Newsletter', 'FirstName', 'LastName', 'Phone', 'Street', 'APT', 'City', 'Postal']\n    for i, header in enumerate(headers):\n        sheet.write(0, i, header)\n    for r, row in enumerate(cursor.fetchall()):\n        r = r + 1\n        for c, col in enumerate(row):\n            sheet.write(r, c, col)              \n    cursor.execute(query0)  \n    for r, row in enumerate(cursor.fetchall()):\n        r = r + 1\n        for c, col in enumerate(row):\n            sheet.write(r, c+3, col)        \n    cursor.execute(query1)  \n    for r, row in enumerate(cursor.fetchall()):\n        r = r + 1\n        for c, col in enumerate(row):\n            sheet.write(r, c+6, col)\n     #Updates the database after it has grabbed the needed info to create a contact in salesforce so that it does not get that same data again\n    workbook.close()\ndef CreateContact():\n    # Knows what file to look into for the information to create a contact\n    path = 'outfile.xlsx'\n    workbook = xlrd.open_workbook(path, on_demand = True)\n    sheet = workbook.sheet_by_index(0)\n    for rowx in xrange(1, sheet.nrows):\n        try:\n            Id = sheet.row_values(rowx, start_colx=0, end_colx=None)[0]\n            Email1 = sheet.row_values(rowx, start_colx=1, end_colx=None)[0]\n            Newsletter = sheet.row_values(rowx, start_colx=2, end_colx=None)[0]\n            First = sheet.row_values(rowx, start_colx=3, end_colx=None)[0]\n            Last = sheet.row_values(rowx, start_colx=4, end_colx=None)[0]\n            Phone = sheet.row_values(rowx, start_colx=5, end_colx=None)[0]\n            Street = sheet.row_values(rowx, start_colx=6, end_colx=None)[0]\n            Apt = sheet.row_values(rowx, start_colx=7, end_colx=None)[0]\n            City = sheet.row_values(rowx, start_colx=8, end_colx=None)[0]\n            Postal = sheet.row_values(rowx, start_colx=9, end_colx=None)[0]\n            d = sf.query(\"SELECT Id FROM Contact WHERE Phone ='%s' OR Email='%s'\" % (Phone, Email1))\n            # d = returns more than just a case number so data = will specifically only get the case number \n            data = [e[\"Id\"] for e in d[\"records\"]]\n            sf.Contact.update(data[0],{'OwnerId' : \"005U0000005jwPH\", 'Phone' : Phone, 'Email' : Email1, 'Newsletter__c' : Newsletter, 'MailingStreet' : Street+\" \"+Apt, 'MailingCity' : City, 'MailingPostalCode' : Postal, 'AccountId' : \"001U000001ZEB89\"})\n            cursor.execute(\"UPDATE rma_customer AS RC INNER JOIN rma_customer_address CA ON RC.cus_id = CA.cus_id SET RC.SF_created=1 WHERE RC.cus_id='%s'\" % Id)   \n            cursor.execute(\"UPDATE rma_customer_address AS CA INNER JOIN rma_customer RC ON CA.cus_id = RC.cus_id  SET CA.SF_created=1 WHERE CA.cus_id='%s'\" % Id)\n            cursor.execute(\"UPDATE rma_customer_address AS CA INNER JOIN rma_customer RC ON CA.cus_id = RC.cus_id SET CA.cus_updated=0 WHERE CA.cus_id='%s'\" % Id)\n            cursor.execute(\"UPDATE rma_customer_details AS RCD INNER JOIN rma_customer RC ON RCD.cus_id = RC.cus_id SET RCD.SF_created=1 WHERE RCD.cus_id='%s'\" % Id)\n        # If Contact exists, skips and goes to next customer in excel sheet.\n        except Exception, e:\n            #print \"Exception %s\"%str(e)\n            Id = sheet.row_values(rowx, start_colx=0, end_colx=None)[0]\n            Email1 = sheet.row_values(rowx, start_colx=1, end_colx=None)[0]\n            Newsletter = sheet.row_values(rowx, start_colx=2, end_colx=None)[0]\n            First = sheet.row_values(rowx, start_colx=3, end_colx=None)[0]\n            Last = sheet.row_values(rowx, start_colx=4, end_colx=None)[0]\n            Phone = sheet.row_values(rowx, start_colx=5, end_colx=None)[0]\n            Street = sheet.row_values(rowx, start_colx=6, end_colx=None)[0]\n            Apt = sheet.row_values(rowx, start_colx=7, end_colx=None)[0]\n            City = sheet.row_values(rowx, start_colx=8, end_colx=None)[0]\n            Postal = sheet.row_values(rowx, start_colx=9, end_colx=None)[0]\n            logger.error(\"Unable to Create Contact: \"+Email1+\" \"+Phone)\n            logger.error(e)\n            sf.Contact.create({'FirstName' : First, 'LastName' : Last, 'Newsletter__c' : Newsletter, 'Email' : Email1, 'Phone' : Phone, 'MailingStreet' : Street+\" \"+Apt, 'MailingCity' : City, 'MailingPostalCode' : Postal, 'AccountId' : \"001U000001ZEB89\"})\n            #print \"Contact Not Found. Created New Contact!\"\n            cursor.execute(\"UPDATE rma_customer AS RC INNER JOIN rma_customer_address CA ON RC.cus_id = CA.cus_id SET RC.SF_created=1 WHERE RC.cus_id='%s'\" % Id)   \n            cursor.execute(\"UPDATE rma_customer_address AS CA INNER JOIN rma_customer RC ON CA.cus_id = RC.cus_id  SET CA.SF_created=1 WHERE CA.cus_id='%s'\" % Id)\n            cursor.execute(\"UPDATE rma_customer_address AS CA INNER JOIN rma_customer RC ON CA.cus_id = RC.cus_id SET CA.cus_updated=0 WHERE CA.cus_id='%s'\" % Id)\n            cursor.execute(\"UPDATE rma_customer_details AS RCD INNER JOIN rma_customer RC ON RCD.cus_id = RC.cus_id SET RCD.SF_created=1 WHERE RCD.cus_id='%s'\" % Id)\n            #time.sleep(10)\n        # Sleep for 30 seconds to allow Salesforce to catch up before creating the cases to ensure they are correctly associated\n    workbook.release_resources()\n    time.sleep(5)\n\nGetNewContact()\nCreateContact()\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1497894182, "creation_date": 1497478060, "last_edit_date": 1497478993, "question_id": 44555497, "link": "https://stackoverflow.com/questions/44555497/reading-data-from-csv-file-and-insert-into-salesforce", "title": "Reading data from CSV file and insert into Salesforce", "body": "<p>I am trying to read data from a csv file and insert/upsert (depending on existent of UniqueId) into Salesforce using Python.</p>\n\n<p>I know I have to use iterator to read data from a cvs file, put them into List, but I am not sure how to fetch the data from that List and put (insert or upsert) data in Salesforce.</p>\n\n<p>Each csv file contains two fields (UniqueId, Selection).</p>\n\n<p>Do I use <code>enumerate</code>?</p>\n\n<p>Here is what I have so far (where action taking place):</p>\n\n<p>How do I fetch the data into Salesforce?</p>\n\n<pre><code>InFiles = glob.glob(inputFolderName + '/SurveySelection*.csv')\n\nInFileslist = []       ##List to put file name\nfor InFile in InFiles:\n    thenStamp = os.path.getmtime(InFile)\n\n    if (thenStamp &gt;= unix_time(dt1)) and (thenStamp &gt;= unix_time(dt2)):\n       InFileslist.append(InFile)  ## Expression to append files in certain time range\n\nfor filename in InFileslist:\n    file = open(filename, 'r')\n    lines = file.readlines()\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "multiprocessing", "pyspark", "cluster-computing"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1497478136, "post_id": 44555485, "comment_id": 76101487, "body": "Spark supports streaming data, which sklearn does not. In addition to this, it has a much more powerfu and robust distributed computing framework than just multiprocessing + sklearn."}, {"owner": {"reputation": 51, "user_id": 5703554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LNrMHG74WZ4/AAAAAAAAAAI/AAAAAAAAMuw/UljL420gUtI/photo.jpg?sz=128", "display_name": "JPiter", "link": "https://stackoverflow.com/users/5703554/jpiter"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497538511, "post_id": 44555485, "comment_id": 76130199, "body": "What about Dask that is included in Anaconda distribution? Is it still inferior distributed framework to pyspark?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497539577, "post_id": 44555485, "comment_id": 76130976, "body": "Sorry, I have no knowledge about that framework..."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11441536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RZ8QW63BCvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf1jxv86mKbU5Z58dVhmnFV7nkz5Q/mo/photo.jpg?sz=128", "display_name": "Grigoropoulos Stathis", "link": "https://stackoverflow.com/users/11441536/grigoropoulos-stathis"}, "is_accepted": false, "score": 1, "last_activity_date": 1556798281, "creation_date": 1556798281, "answer_id": 55951963, "question_id": 44555485, "link": "https://stackoverflow.com/questions/44555485/python-multiprocessing-tool-vs-pyspark/55951963#55951963", "title": "Python multiprocessing tool vs Py(Spark)", "body": "<p>True, Spark does have the limitations you have mentioned, that is you are bounded in the functional spark world (spark mllib, dataframes etc). However, what it provides vs other multiprocessing tools/libraries is the automatic distribution, partition and rescaling of parallel tasks. Scaling and scheduling spark code becomes an easier task than having to program your custom multiprocessing code to respond to larger amounts of data + computations.  </p>\n"}], "owner": {"reputation": 51, "user_id": 5703554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LNrMHG74WZ4/AAAAAAAAAAI/AAAAAAAAMuw/UljL420gUtI/photo.jpg?sz=128", "display_name": "JPiter", "link": "https://stackoverflow.com/users/5703554/jpiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1860, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1556800549, "creation_date": 1497478003, "question_id": 44555485, "link": "https://stackoverflow.com/questions/44555485/python-multiprocessing-tool-vs-pyspark", "title": "Python multiprocessing tool vs Py(Spark)", "body": "<p>A newbie question, as I get increasingly confused with pyspark. I want to scale an existing python data preprocessing and data analysis pipeline. I realize if I partition my data with pyspark, I can't treat each partition as a standalone pandas data frame anymore, and need to learn to manipulate with pyspark.sql row/column functions, and change a lot of existing code, plus I am bound to spark mllib libraries and can't take full advantage of more mature scikit-learn package. Then why would I ever need to use Spark if I can use multiprocessing tools for cluster computing and parallelize tasks on existing dataframe?</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1497478248, "post_id": 44555469, "comment_id": 76101534, "body": "<code>query = &#39;UPDATE product SET name=?,price,=? WHERE name=? AND price =?&#39;</code> and <code>query =&#39;INSERT INTO product  VALUES (NULL,?,?)&#39;</code> seem to be the most likely culprits here."}, {"owner": {"reputation": 3, "user_id": 8159480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb2c896ce4d54de63770d696b9e0a50?s=128&d=identicon&r=PG", "display_name": "user8159480", "link": "https://stackoverflow.com/users/8159480/user8159480"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1497480789, "post_id": 44555469, "comment_id": 76102289, "body": "@JacobIRR the def editing_records is where every the error comes up from. before that im good. since youre saying those are the issues how showed i change them."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8159480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb2c896ce4d54de63770d696b9e0a50?s=128&d=identicon&r=PG", "display_name": "user8159480", "link": "https://stackoverflow.com/users/8159480/user8159480"}, "edited": false, "score": 0, "creation_date": 1497508545, "post_id": 44558937, "comment_id": 76109719, "body": "you are my hero"}], "tags": [], "owner": {"reputation": 7264, "user_id": 3134251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/053ef2ca2163afe33977f37371043067?s=128&d=identicon&r=PG&f=1", "display_name": "Lafexlos", "link": "https://stackoverflow.com/users/3134251/lafexlos"}, "is_accepted": true, "score": 4, "last_activity_date": 1497503050, "creation_date": 1497503050, "answer_id": 44558937, "question_id": 44555469, "link": "https://stackoverflow.com/questions/44555469/python-sqlite3-operationalerror-near-syntax-error/44558937#44558937", "title": "python- sqlite3.OperationalError: near &quot;,&quot;: syntax error&quot;", "body": "<p>As your error says, you have a typo.</p>\n\n<pre><code>query = 'UPDATE product SET name=?,price,=? WHERE name=? AND price =?'\n                                        ^ extra comma here\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8159480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb2c896ce4d54de63770d696b9e0a50?s=128&d=identicon&r=PG", "display_name": "user8159480", "link": "https://stackoverflow.com/users/8159480/user8159480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4433, "favorite_count": 1, "accepted_answer_id": 44558937, "answer_count": 1, "score": 0, "last_activity_date": 1497503083, "creation_date": 1497477936, "last_edit_date": 1497503083, "question_id": 44555469, "link": "https://stackoverflow.com/questions/44555469/python-sqlite3-operationalerror-near-syntax-error", "title": "python- sqlite3.OperationalError: near &quot;,&quot;: syntax error&quot;", "body": "<p>This isn't my code; I got it from <a href=\"https://www.youtube.com/channel/UC4KX0hatvRrOVy_D0nPlusg\" rel=\"nofollow noreferrer\">https://www.youtube.com/channel/UC4KX0hatvRrOVy_D0nPlusg</a>. The author didn't have the source code so I just had to type it up from the video. His worked fine but I kept getting this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>File \"D:\\ProgramDevelopment\\Python\\Project\\Python_GUI_IDEL\\PythonDatabaseYoutube.py\", line 45, in run_query\nquery_result= cursor.execute(query,parameters)\nsqlite3.OperationalError: near \",\": syntax error\" \n</code></pre>\n\n<p>Link in github: <a href=\"https://github.com/ahmed-aya/Python_database/blob/master/Python_Database\" rel=\"nofollow noreferrer\">https://github.com/ahmed-aya/Python_database/blob/master/Python_Database</a></p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\nimport sqlite3\n\nclass Product(object):\n\n  def __init__(self,wind):\n    self.wind=wind\n    self.wind.title('IT products')\n\n    frame = LabelFrame (self.wind,text= 'Add new record')\n    frame.grid (row=0,column=1)\n\n    Label(frame,text='Name:').grid(row=1,column=1)\n    self.name =Entry(frame)\n    self.name.grid(row=1,column=2)\n\n    Label(frame,text='Price:').grid(row=2,column=1)\n    self.price =Entry(frame)\n    self.price.grid(row=2,column=2)\n\n    ttk.Button(frame,text='Add record',command=self.adding).grid(row=3,column=2)\n    self.message=Label(text='',fg='red')\n    self.message.grid(row=3,column=0)\n\n    self.tree=ttk.Treeview(height=10,column=2)\n    self.tree.grid(row=4,column=0,columnspan=2)\n    self.tree.heading('#0',text='Name',anchor=W)\n    self.tree.heading(2,text='Price',anchor=W)\n\n    ttk.Button(text='Delete record',command=self.deleting).grid(row=5,column=0)\n    ttk.Button(text='Edit record',command=self.editing).grid(row=5,column=1)\n\n    self.viewing_records()\n\n  def run_query (self, query, parameters=()):\n    with sqlite3.connect('database.db') as conn:\n        cursor = conn.cursor()\n        query_result= cursor.execute(query,parameters)\n        conn.commit()\n    return query_result\n\n  def viewing_records(self):\n    records = self.tree.get_children()\n    for element in records:\n        self.tree.delete(element)\n    query ='SELECT * FROM product ORDER BY name DESC'\n    db_rows = self.run_query (query)\n    for row in db_rows:\n        self.tree.insert('',0,text=row[1], values = row[2])\n\n  def validation (self):\n    return len (self.name.get()) !=0 and len (self.price.get()) !=0\n\n  def adding (self):\n    if self.validation():\n        query ='INSERT INTO product  VALUES (NULL,?,?)'\n        parameters =(self.name.get(),self.price.get())\n        self.run_query(query,parameters)\n        self.message ['text'] = 'Record {} added'.format (self.name.get())\n        self.name.delete(0,END)\n        self.price.delete(0,END)\n    else:\n        self.message['text']='name field or price is empty'\n    self.viewing_records()\n\n  def deleting (self):\n    self.message['text']=''\n    try:\n        self.tree.item (self.tree.selection())['text']\n    except IndexError as e:\n        self.message['text']='Please, select recoard'\n        return\n\n    self.message['text']=''\n    name=self.tree.item (self.tree.selection())['text']\n    query='DELETE FROM product WHERE name=?'\n    self.run_query(query,(name,))\n    self.message['text']='Record {} deleted.'.format(name)\n    self.viewing_records()\n\n  def editing(self):\n    self.message['text']=\"\"\n    try:\n        self.tree.item (self.tree.selection())['values'][0]\n    except IndexError as e:\n        self.message['text']='Please select record'\n        return\n    name = self.tree.item (self.tree.selection())['text']\n    old_price = self.tree.item (self.tree.selection())['values'][0]\n\n    self.edit_wind= Toplevel()\n    self.edit_wind.title('Edit Window')\n\n    Label (self.edit_wind,text='Old name: ').grid(row=0,column=1)\n    Entry (self.edit_wind,textvariable=StringVar(self.edit_wind,value=name),state='readonly').grid(row=0,column=2)\n    Label (self.edit_wind,text='New name: ').grid(row=1,column=1)\n    new_name = Entry(self.edit_wind)\n    new_name.grid(row=1,column=2)\n\n    Label (self.edit_wind,text='Old price: ').grid(row=2,column=1)\n    Entry (self.edit_wind,textvariable = DoubleVar(self.edit_wind,value=old_price),state='readonly').grid(row=2,column=2)\n    Label (self.edit_wind,text='New price: ').grid(row=3,column=1)\n    new_price=Entry(self.edit_wind)\n    new_price.grid(row=3,column=2)\n\n    Button(self.edit_wind,text='save changes', command=lambda:self.edit_records(new_name.get(),name,new_price.get(),old_price)).grid(row=4,column=2,sticky=W)\n    self.edit_wind.mainloop()\n\n  def edit_records(self, new_name,name,new_price,old_price):\n    query = 'UPDATE product SET name=?,price,=? WHERE name=? AND price =?'\n    parameters = (new_name,new_price,name,old_price)\n    self.run_query (query,parameters)\n    self.edit_wind.destroy()\n    self.message['text']='Record {} changed.'.format(name)\n    self.viewing_records()\n\nif __name__== '__main__':\n    wind=Tk()\n    application = Product(wind)\n    wind.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1497477425, "post_id": 44555302, "comment_id": 76101206, "body": "Python 2.6 doesn&#39;t have dict comprehensions, so class C isn&#39;t going to even compile in 2.6."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1497479838, "post_id": 44555302, "comment_id": 76102021, "body": "BTW, even if you can&#39;t avoid using Python 2 for some reason, you probably shouldn&#39;t be using old-style classes."}], "owner": {"reputation": 543, "user_id": 3742167, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6e5cf9050b188cdd0f3da7365f7faf90?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaf", "link": "https://stackoverflow.com/users/3742167/dimaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1497477127, "answer_count": 0, "score": 0, "last_activity_date": 1497479338, "creation_date": 1497477049, "last_edit_date": 1497479338, "question_id": 44555302, "link": "https://stackoverflow.com/questions/44555302/why-is-there-a-nameerror-in-this-list-comprehension", "closed_reason": "Duplicate", "title": "Why is there a NameError in this list comprehension?", "body": "<p>Could you please explain, why this code works in Python 3.6</p>\n\n<pre><code>class B:\n    a = 'a_val'\n    b = {'a': 'a_val: {val}'.format(val=a)}\n</code></pre>\n\n<p>but this doesn't work?</p>\n\n<pre><code>class C:\n    a = 'a_val'\n    b = {i: 'a_val: {val}'.format(val=a) for i in range(0,2)}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>NameError: name 'a' is not defined\n</code></pre>\n\n<p>and both classes work in Python 2.6.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1497477793, "post_id": 44555293, "comment_id": 76101362, "body": "IIRC, the <code>all</code> method on NumPy arrays actually either doesn&#39;t short-circuit or only short-circuits after processing a complete chunk of the array, for some fairly substantial (default) chunk size."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1497498762, "post_id": 44555293, "comment_id": 76106298, "body": "We&#39;ve found in other SO questions that selected operations do short circuit, such as <code>min&#47;max</code> involving <code>nan</code>.  But my guess is that most, if not all, <code>ufunc</code> use a generic iterator to perform <code>accumulate</code>.  That would be especially true when working along one axis.  Short circuiting in your column case would require stopping at different rows for each column."}], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 2, "creation_date": 1497483318, "post_id": 44555397, "comment_id": 76103003, "body": "<code>a.cumprod(0, dtype=bool)</code> is a much fairer comparison, which is essentially the same speed. Using <code>astype</code> incurs a copy"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497497675, "post_id": 44555397, "comment_id": 76106064, "body": "Better question is why don&#39;t you post that as an answer?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1497498802, "post_id": 44555397, "comment_id": 76106306, "body": "<code>np.minimum.accumulate(a, axis=0)</code> also works (same speed)."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 13, "last_activity_date": 1497478386, "last_edit_date": 1497478386, "creation_date": 1497477586, "answer_id": 44555397, "question_id": 44555293, "link": "https://stackoverflow.com/questions/44555293/how-to-do-a-cumulative-all/44555397#44555397", "title": "How to do a cumulative &quot;all&quot;", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy-1.12.0/reference/ufuncs.html#methods\" rel=\"noreferrer\">All ufuncs have 5 methods</a>: <code>reduce</code>, <code>accumulate</code>, <code>reduceat</code>, <code>outer</code>, and <code>at</code>. In this case, use <code>accumulate</code> since it returns the result of cumulative applications of the ufunc:</p>\n\n<pre><code>In [41]: np.logical_and.accumulate(a, axis=0)\nOut[50]: \narray([[ True, False,  True, False,  True,  True, False,  True],\n       [False, False, False, False,  True, False, False,  True],\n       [False, False, False, False,  True, False, False,  True],\n       [False, False, False, False,  True, False, False, False]], dtype=bool)\n</code></pre>\n\n<hr>\n\n<pre><code>In [60]: np.random.seed([3,1415])\n\nIn [61]: a = np.random.choice([True, False], (400, 80))\n\nIn [57]: %timeit np.logical_and.accumulate(a, axis=0)\n10000 loops, best of 3: 85.6 \u00b5s per loop\n\nIn [59]: %timeit a.cumprod(0).astype(bool)\n10000 loops, best of 3: 138 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 2, "accepted_answer_id": 44555397, "answer_count": 1, "score": 10, "last_activity_date": 1497479487, "creation_date": 1497476981, "last_edit_date": 1497479487, "question_id": 44555293, "link": "https://stackoverflow.com/questions/44555293/how-to-do-a-cumulative-all", "title": "How to do a cumulative &quot;all&quot;", "body": "<p><strong>Setup</strong><br>\nConsider the numpy array <code>a</code></p>\n\n<pre><code>&gt;&gt;&gt; np.random.seed([3,1415])\n&gt;&gt;&gt; a = np.random.choice([True, False], (4, 8))\n\n&gt;&gt;&gt; a\narray([[ True, False,  True, False,  True,  True, False,  True],\n       [False, False, False, False,  True, False, False,  True],\n       [False,  True,  True,  True,  True,  True,  True,  True],\n       [ True,  True,  True, False,  True, False, False, False]], dtype=bool)\n</code></pre>\n\n<p><strong>Question</strong><br>\nFor each column, I want to determine the cumulative equivalent for all.</p>\n\n<p>The result should look like this:</p>\n\n<pre><code>array([[ True, False,  True, False,  True,  True, False,  True],\n       [False, False, False, False,  True, False, False,  True],\n       [False, False, False, False,  True, False, False,  True],\n       [False, False, False, False,  True, False, False, False]], dtype=bool)\n</code></pre>\n\n<p>Take the first column</p>\n\n<pre><code>a[: 0]\n\n# Original First Column\narray([ True, False, False,  True], dtype=bool)\n# So far so good\n#        \\     False from here on\n#         |    /---------------\\\narray([ True, False, False, False], dtype=bool)\n# Cumulative all\n</code></pre>\n\n<p>So basically, cumulative all is <code>True</code> as long as we have <code>True</code> and turns <code>False</code> from then on at the first <code>False</code></p>\n\n<hr>\n\n<p><strong>What I have tried</strong><br>\nI can get the result with</p>\n\n<pre><code>a.cumprod(0).astype(bool)\n</code></pre>\n\n<p>But, I can't help but wonder if its necessary to perform each and every multiplication when I know everything will be <code>False</code> from the first <code>False</code> I see.</p>\n\n<p>Consider the larger 1-D array</p>\n\n<pre><code>b = np.array(list('111111111110010101010101010101010101010011001010101010101')).astype(int).astype(bool)\n</code></pre>\n\n<p>I contend that these two produce the same answer</p>\n\n<pre><code>bool(b.prod())\n</code></pre>\n\n<p>and</p>\n\n<pre><code>b.all()\n</code></pre>\n\n<p>But <code>b.all()</code> can short circuit while <code>b.prod()</code> does not.  If I time them:</p>\n\n<pre><code>%timeit bool(b.prod())\n%timeit b.all()\n\n100000 loops, best of 3: 2.05 \u00b5s per loop\n1000000 loops, best of 3: 1.45 \u00b5s per loop\n</code></pre>\n\n<p><code>b.all()</code> is quicker.  This implies that there must me a way to conduct a cumulative all that is quicker that my <code>a.cumprod(0).astype(bool)</code></p>\n"}, {"tags": ["python", "c++", "multithreading", "locking", "mutex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1497477056, "post_id": 44555289, "comment_id": 76101022, "body": "Having a lock in a destructor is a definite no-no."}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "edited": false, "score": 0, "creation_date": 1497477337, "post_id": 44555289, "comment_id": 76101162, "body": "@CaptainObvlious, so you&#39;re saying the mutex object is being destroyed as it&#39;s being locked? If I shouldn&#39;t use a lock in the destructor, then should I clean up the queue without a lock? Or is there a different approach to cleaning up the queue?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497477722, "post_id": 44555289, "comment_id": 76101331, "body": "You are creating a completely new lock in the destructor, then you lock it and unlock it. What on earth is this supposed to achieve (that is useful)?"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497477842, "post_id": 44555289, "comment_id": 76101385, "body": "@JesperJuhl Nothing, I was just trying simplify the code as much as possible to focus on where the problem is. In reality, the mutex is a member of the class and there are actual operations between the lock and unlock."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1497477963, "post_id": 44555289, "comment_id": 76101433, "body": "@SFBA26 then perhaps you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that we have an actual chance of helping you with your problem. Just posting code snippets that don&#39;t do anything and that we can&#39;t compile/run/test is fairly useless."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497478288, "post_id": 44555289, "comment_id": 76101547, "body": "&quot;why would it be different when I exit()&quot; - <code>exit()</code> doesn&#39;t call destructors of local objects (amongst other things). It&#39;s a rather brutal way of terminating a program compared to returning from <code>main</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497478451, "post_id": 44555289, "comment_id": 76101597, "body": "Why are you locking anything in the destructor?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1497478457, "post_id": 44555289, "comment_id": 76101602, "body": "Doing kernel calls during dll shutdown is not supported behaviour.  There was a series of post on &quot;The Old New Thing&quot; blog regarding this very issue.  Will try and find them ... Here&#39;s one. <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20100122-00/?p=15193\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20100122-00/?p=15193</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497478553, "post_id": 44555289, "comment_id": 76101634, "body": "Are you locking the queue from within the object you are deleting from the queue?"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497479017, "post_id": 44555289, "comment_id": 76101780, "body": "@Galik, no, the the queue handler locks the queue, which contains &quot;job&quot; objects. Part of the question was whether I need to lock the queue in the destructor, and it appears the answer is no."}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1497479293, "post_id": 44555289, "comment_id": 76101850, "body": "@RichardCritten thanks for the info!"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497554153, "post_id": 44555289, "comment_id": 76139327, "body": "@JesperJuhl, you&#39;re right. I added a MVCE. Sorry I didn&#39;t add it originally."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 1, "creation_date": 1518373643, "post_id": 44555289, "comment_id": 84469031, "body": "@NeilButterworth Nothing wrong with locking in destructors. This is something <code>operator delete</code> already does. Any third party allocator needs this too. The issue here is with broken <code>std::mutex</code> implementation which gets worse due to broken module deinitialization on Windows."}], "answers": [{"tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": false, "score": 1, "last_activity_date": 1518375527, "last_edit_date": 1518375527, "creation_date": 1518373441, "answer_id": 48734890, "question_id": 44555289, "link": "https://stackoverflow.com/questions/44555289/mutex-lock-in-c-destructor-causes-exception-when-exit-called-in-python/48734890#48734890", "title": "Mutex lock in C++ destructor causes exception when exit() called in Python", "body": "<blockquote>\n  <p>Some people, when confronted with a problem, think, \"I know, I'll use\n  lazy initialization.\" Now they have two problems.</p>\n</blockquote>\n\n<p>This is a bug in MSVC implementation of <code>std::mutex</code>. Before MSVC14 <code>std::mutex</code> and <code>std::condition_variable</code> would perform some internal initializations lazily. This alone is <em>bad</em>, but becomes even worse due to <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040127-00/?p=40873/\" rel=\"nofollow noreferrer\">how modules are deinitialized on Windows</a>.</p>\n\n<p>The bug was fixed in MSVC14 (Visual Studio 2015) - <code>std::mutex</code> was rewritten to use <code>SRWLock</code> internally. <code>SRWLock</code> is a simple primitive without additional dependencies. It relies only on atomic instructions and <a href=\"http://locklessinc.com/articles/keyed_events/\" rel=\"nofollow noreferrer\">Keyed Events</a> syscalls. As the kernel is isolated from the userspace, <code>SRWLock</code>'s should work seemlessly regardless of where they are used.</p>\n\n<p>Seems like you are using MSVC12 (Visual Studio 2013). You should switch to MSVC14 (Visual Studio 2015) or use Boost.Thread instead.</p>\n\n<p>There are actually many issues with <code>std::mutex</code> on MSVC12 and earlier. Some are related to the actual implementation used in CRT, others (as I heard) are caused by bugs in Windows 7 and were fixed in Windows 8.</p>\n"}], "owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1518375527, "creation_date": 1497476967, "last_edit_date": 1497554078, "question_id": 44555289, "link": "https://stackoverflow.com/questions/44555289/mutex-lock-in-c-destructor-causes-exception-when-exit-called-in-python", "title": "Mutex lock in C++ destructor causes exception when exit() called in Python", "body": "<p>I have an application that loads a DLL with a class that handles jobs in a queue. In order to keep it thread safe, a mutex is locked whenever the queue is modified. When the application exits and the destructor is called, the mutex is locked in order to clear the queue.</p>\n\n<p>However, when I load this DLL in Python, create an instance of the object, and call <code>exit()</code> (in Python) an exception is thrown when the mutex tries to lock:</p>\n\n<blockquote>\n  <p>Microsoft Visual Studio C Runtime Library has detected a fatal error in python.exe.</p>\n</blockquote>\n\n<p>I have simplified the destructor down to just creating a mutex locally and trying to lock it, and can still reproduce the issue:</p>\n\n<pre><code>QueueHandler::~QueueHandler(void)\n{\n    mutex mut; // in reality, this is a member of the class and there are actual operations between lock and unlock\n    mut.lock(); // exception here\n    mut.unlock();\n}\n</code></pre>\n\n<p>If I take my unmodified code and simply remove the lock around the queue operation, it works fine. </p>\n\n<p>Here is the seemingly relevant section of the call stack:</p>\n\n<pre><code>KernelBase.dll!RaiseException() Unknown\nmsvcr120.dll!_CxxThrowException(void * pExceptionObject, const _s__ThrowInfo * pThrowInfo) Line 154 C++\nmsvcr120.dll!Concurrency::details::SchedulerBase::SchedulerBase(const Concurrency::SchedulerPolicy &amp; policy) Line 149   C++\nmsvcr120.dll!Concurrency::details:: SchedulerBase::CreateWithoutInitializing(const Concurrency::SchedulerPolicy &amp; policy) Line 285  C++\nmsvcr120.dll!Concurrency::details:: SchedulerBase::CreateContextFromDefaultScheduler() Line 571 C++\nmsvcr120.dll!Concurrency::details::SchedulerBase::CurrentContext() Line 404 C++\n[Inline Frame] msvcr120.dll!Concurrency::details::LockQueueNode::{ctor (unsigned int) Line 619  C++\nmsvcr120.dll!Concurrency::critical_section::lock() Line 1031    C++\nmsvcp120.dll!mtx_do_lock(_Mtx_internal_imp_t * * mtx, const xtime * target) Line 67 C++\n--&gt; MyApplication.dll!QueueHandler::~QueueHandler() Line 106    C++\nMyApplication.dll!_CRT_INIT(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 416  C\nMyApplication.dll!__DllMainCRTStartup(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 522    C\nntdll.dll!LdrShutdownProcess()  Unknown\nntdll.dll!RtlExitUserProcess()  Unknown\nmsvcr100.dll!doexit(int code, int quick, int retcaller) Line 621    C\npython27.dll!000000001e13be65() Unknown\n...\npython27.dll!000000001e043494() Unknown\npython.exe!000000001d00119e()   Unknown\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>If this code works when I exit my app normally (close the GUI), why would it be different when I <code>exit()</code> from Pyton?</li>\n<li>Is there a \"more correct\" way to exit from Python?</li>\n<li>Could this be related to the type of mutex/lock being used?</li>\n<li>Do I even need to lock the section with the queue operations in my destructor? Or is it okay to delete the objects in the queue without a lock?</li>\n</ol>\n\n<p>Edit:\n<strong>MCVE:</strong> <a href=\"https://www.dropbox.com/s/ftyb3oyfw7zn2vw/QueueHandlerApp.zip?dl=0\" rel=\"nofollow noreferrer\">QueueHandlerApp</a> - Run the app or run script.py to demonstrate the issue.</p>\n"}, {"tags": ["python", "python-2.7", "multiprocessing", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 1824, "user_id": 389976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Vmt2p.jpg?s=128&g=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/389976/erik"}, "is_accepted": true, "score": 1, "last_activity_date": 1502386118, "creation_date": 1502386118, "answer_id": 45620044, "question_id": 44555210, "link": "https://stackoverflow.com/questions/44555210/multiprocessing-pool-job-output/45620044#45620044", "title": "Multiprocessing Pool Job output", "body": "<p>It would appear that Jupyter Notebook doesn't play well with this type of code.. but it turned out to be an issue with my computer environment underneath.. had to build <code>numpy</code> from source with stuff enabled</p>\n\n<p><a href=\"https://github.com/numpy/numpy/issues/9254\" rel=\"nofollow noreferrer\">https://github.com/numpy/numpy/issues/9254</a></p>\n\n<p>What's important is.. if you crash in jupyter notebook, and the crass occurred in a thread inside a pool.. there's no way to see the trace AFAIK.. and the work around is to just run the code straight in the notebook or switch to non-iPython</p>\n"}], "owner": {"reputation": 1824, "user_id": 389976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Vmt2p.jpg?s=128&g=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/389976/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 45620044, "answer_count": 1, "score": 0, "last_activity_date": 1503399005, "creation_date": 1497476597, "question_id": 44555210, "link": "https://stackoverflow.com/questions/44555210/multiprocessing-pool-job-output", "title": "Multiprocessing Pool Job output", "body": "<p>I am using an open source project for fun, but not getting past it's utilization of BH-TSNE via multiprocessing pool.</p>\n\n<p>Github Source : </p>\n\n<p><a href=\"https://github.com/kylemcdonald/AudioNotebooks/blob/master/Fingerprints%20to%20t-SNE.ipynb\" rel=\"nofollow noreferrer\">https://github.com/kylemcdonald/AudioNotebooks/blob/master/Fingerprints%20to%20t-SNE.ipynb</a></p>\n\n<p>specific error : </p>\n\n<pre><code>data = data.astype(np.float64)\ndef job(params):\n    start = time()\n    tsne(data, data_root, mode, initial_dims=params[0], perplexity=params[1])\n    print 'initial_dims={}, perplexity={}, {} seconds'.format(params[0], params[1], time() - start)\nparams = list(itertools.product(initial_dims, perplexities))\npool = Pool()\npool.map(job, params)\n\nutils/bhtsne.py:129: ComplexWarning: Casting complex values to real discards the imaginary part\n  for sample in samples:\n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n&lt;ipython-input-22-0350579d447b&gt; in &lt;module&gt;()\n      7 params = list(itertools.product(initial_dims, perplexities))\n      8 pool = Pool()\n----&gt; 9 pool.map(job, params)\n\n/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/pool.pyc in map(self, func, iterable, chunksize)\n    249         '''\n    250         assert self._state == RUN\n--&gt; 251         return self.map_async(func, iterable, chunksize).get()\n    252 \n    253     def imap(self, func, iterable, chunksize=1):\n\n/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/pool.pyc in get(self, timeout)\n    565             return self._value\n    566         else:\n--&gt; 567             raise self._value\n    568 \n    569     def _set(self, i, obj):\n\nAssertionError: ERROR: Call to bh_tsne exited with a non-zero return code exit status, please refer to the bh_tsne output for further details\n</code></pre>\n\n<p>I have the <code>bh_tsne</code> wrapper, the binary too.. </p>\n\n<p>Wrapper Source : <a href=\"https://github.com/lvdmaaten/bhtsne\" rel=\"nofollow noreferrer\">https://github.com/lvdmaaten/bhtsne</a></p>\n\n<p>but unclear how I watch that subprocesses output.</p>\n\n<p>Looked at a few google searches, turned on Verbose mode in the wrapper to default.. but no output seems to appear either in the DIR or Jupyter Notebook</p>\n"}, {"tags": ["python", "dictionary", "file-io", "key"], "comments": [{"owner": {"reputation": 1421, "user_id": 7299505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLVAy.jpg?s=128&g=1", "display_name": "cosinepenguin", "link": "https://stackoverflow.com/users/7299505/cosinepenguin"}, "edited": false, "score": 1, "creation_date": 1497476731, "post_id": 44555195, "comment_id": 76100867, "body": "Sorry, what is the expected outcome? Right now you are assigning variables <code>last, first, ids</code> for every line in lines, and only using the last one, because you reinitialize the variables for every line."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1497479876, "post_id": 44555195, "comment_id": 76102034, "body": "That looks like a CSV format file, so you should consider using the <code>csv</code> module to read it."}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1497476844, "creation_date": 1497476844, "answer_id": 44555257, "question_id": 44555195, "link": "https://stackoverflow.com/questions/44555195/read-in-file-and-print-dictionary/44555257#44555257", "title": "Read in file and print dictionary", "body": "<p>You are close. However, you don't need a second loop. You can add all the names inside the first one.</p>\n\n<pre><code>roster = {}\ninput_file = open(\"cs371598roster\", \"r\")\nwhole_thing = input_file.read()\nlines = whole_thing.split(\"\\n\")\n\nfor line in lines:\n    last, first, ids = line.split(\", \")\n    roster[ids] = first + last\n\nprint(roster)\n</code></pre>\n\n<p>Your earlier solution was breaking down your names and ids of the LAST line into single characters and adding those, probably not what you wanted.</p>\n"}, {"comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1497477174, "post_id": 44555298, "comment_id": 76101085, "body": "Why do you use the method call to <code>readlines()</code>? A file is iterable, so <code>for line in f:</code> is enough."}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 0, "last_activity_date": 1497477245, "last_edit_date": 1497477245, "creation_date": 1497477024, "answer_id": 44555298, "question_id": 44555195, "link": "https://stackoverflow.com/questions/44555195/read-in-file-and-print-dictionary/44555298#44555298", "title": "Read in file and print dictionary", "body": "<p>You should use <code>with | as</code> and set the id to a value of the first and last names joined by a space. This works:</p>\n\n<pre><code>roster = {}\ninput_file = open(\"cs371598roster\", \"r\")\nwith input_file as f:\n    for line in f:\n        last, first, ids = line.split(\", \")\n        roster[ids.strip()] = ' '.join([first, last])\n\nprint(roster)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8100471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08672326b871a889d748a6d9fde38653?s=128&d=identicon&r=PG&f=1", "display_name": "Greg W", "link": "https://stackoverflow.com/users/8100471/greg-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 44555298, "answer_count": 2, "score": -1, "last_activity_date": 1497479613, "creation_date": 1497476545, "last_edit_date": 1497479613, "question_id": 44555195, "link": "https://stackoverflow.com/questions/44555195/read-in-file-and-print-dictionary", "title": "Read in file and print dictionary", "body": "<p>Here is my input file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Drew, Matthew J., s1058828\nHowerth, Chloe E., s1002240\nKarolewicz, Michael J., s0995867\nPerzely, Connor J., s0958005\nTanenbaum, Roberto, s1124377\nGuan, Tiffany, s1103462\nJaligama, Vishnu Praneeth, s1143667\nJin, Ailan, s1152308\n</code></pre>\n\n<p>I am new to Python and my task is to take roster files and get them into dictionaries and \"for now\" print the key: values. I feel like I'm close with this.</p>\n\n<pre><code>roster = {}\ninput_file = open(\"cs371598roster\", \"r\")\nwhole_thing = input_file.read()\nlines = whole_thing.split(\"\\n\")\n\nfor line in lines:\n    last,first,ids = line.split(\", \")\n\nfor i in range(len(last)):\n    key = ids[i]\n    val = first[i] + \" \" + last[i]\n    roster[key] = val\n\nprint(roster)\n</code></pre>\n"}, {"tags": ["python", "flask", "http-post", "werkzeug"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 8162726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59efc4c64a9fb02364fa0b5920204374?s=128&d=identicon&r=PG&f=1", "display_name": "dagda88", "link": "https://stackoverflow.com/users/8162726/dagda88"}, "is_accepted": false, "score": 1, "last_activity_date": 1497534487, "creation_date": 1497534487, "answer_id": 44569250, "question_id": 44555184, "link": "https://stackoverflow.com/questions/44555184/in-a-connexion-flask-app-how-can-i-fake-post-requests-with-parameters-in-body-f/44569250#44569250", "title": "In a connexion/flask app, how can I fake post requests with parameters in body for endpoint?", "body": "<p>Okay so I think I figured it out. Reading the answer <a href=\"https://stackoverflow.com/questions/41653058/flask-testing-a-put-request-with-custom-headers\">here by Martjin</a>, I was able to get it to work by doing the following: </p>\n\n<pre><code>response = client.post('/models', data=json.dumps(job), headers=headers)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 697, "user_id": 9631728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKSkl.jpg?s=128&g=1", "display_name": "Shirantha Madusanka", "link": "https://stackoverflow.com/users/9631728/shirantha-madusanka"}, "is_accepted": false, "score": 0, "last_activity_date": 1586522506, "creation_date": 1586522506, "answer_id": 61140473, "question_id": 44555184, "link": "https://stackoverflow.com/questions/44555184/in-a-connexion-flask-app-how-can-i-fake-post-requests-with-parameters-in-body-f/61140473#61140473", "title": "In a connexion/flask app, how can I fake post requests with parameters in body for endpoint?", "body": "<pre><code>@pytest.fixture\ndef app():\n    app = App(__name__, specification_dir=SWAGGER_PATH)\n    app.app.json_encoder = JSONEncoder\n    app.add_api(\"swagger.yaml\")\n    app_client = app.app.test_client()\n    return app_client\n\n\ndef test_post_foo(app) -&gt; None:\n    \"\"\"\n    :except:201\n    \"\"\"\n\n    response = app.post(\"/api/all\", \n    content_type='application/json',\n    data=json.dumps(foo_data))\n    assert response.status_code == 201\n\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8162726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59efc4c64a9fb02364fa0b5920204374?s=128&d=identicon&r=PG&f=1", "display_name": "dagda88", "link": "https://stackoverflow.com/users/8162726/dagda88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1586522506, "creation_date": 1497476472, "question_id": 44555184, "link": "https://stackoverflow.com/questions/44555184/in-a-connexion-flask-app-how-can-i-fake-post-requests-with-parameters-in-body-f", "title": "In a connexion/flask app, how can I fake post requests with parameters in body for endpoint?", "body": "<p>I'm trying to test my connexion app, I've followed the link <a href=\"https://stackoverflow.com/questions/42934525/how-to-test-a-connexion-flask-app\">here</a>, </p>\n\n<p>And the get requests seem to be working fine. Now I'm trying to test post requests, but the endpoint method takes in parameters as arguments. My set up is very similar to the one linked above, and I followed the advice listed <a href=\"https://stackoverflow.com/questions/7428124/how-can-i-fake-request-post-and-get-params-for-unit-testing-in-flask\">here</a>, but it doesn't seem to work. In my tests I have tried something like: </p>\n\n<pre><code>response = client.post('/path-to-request', data=dict(var1='data1', var2='data2'))\n</code></pre>\n\n<p>Where <em>client</em> is the same as the one defined by <a href=\"https://stackoverflow.com/questions/42934525/how-to-test-a-connexion-flask-app\">ksindi here</a>. I'll have this path mapped to a python method in my swagger file and want to retrieve the data packaged in the post as the argument to that method. Example snippet in a swaggerfile: </p>\n\n<pre><code>paths: \n    ... \n    /models:\n        post: \n            operationId: bar.foo\n\n...\n</code></pre>\n\n<p>And then in bar.py I'll have a method foo: </p>\n\n<pre><code>foo(data_here): \n    &lt;code&gt;\n</code></pre>\n\n<p>The attempt I mentioned above seems to not work, I will get through to the method and the code will execute but \"data_here\" will be None, I want it to be the dict(var1='data1', var2='data2') that is packaged with the post request. Any help is appreciated thanks! </p>\n"}, {"tags": ["python", "lxml"], "comments": [{"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "edited": false, "score": 1, "creation_date": 1497478020, "post_id": 44555171, "comment_id": 76101447, "body": "you could also skip a step and just <code>tree = html.parse(&#39;http:&#47;&#47;...</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1497477836, "post_id": 44555406, "comment_id": 76101382, "body": "this  works, +1 !  I grabbed the same xpath as OP by Google Chrome Developer Tools, can you explain why no tbody?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 1, "creation_date": 1497478027, "post_id": 44555406, "comment_id": 76101452, "body": "if you <code>print page.content</code> you notice there is no <code>tbody</code> in there. <code>tbody</code> is generated by the inspector, which is why it gives you an inaccurate path,"}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 1, "creation_date": 1497478562, "post_id": 44555406, "comment_id": 76101638, "body": "If you use the network tab and look at the document returned it will give you the original state before whoever messes with the DOM. @HaifengZhang"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1497478657, "post_id": 44555406, "comment_id": 76101661, "body": "@All Thank you all, now I get it!"}, {"owner": {"reputation": 39, "user_id": 5415946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59346b7686002fdc8862dec88895e184?s=128&d=identicon&r=PG&f=1", "display_name": "Matnagra", "link": "https://stackoverflow.com/users/5415946/matnagra"}, "edited": false, "score": 0, "creation_date": 1497478907, "post_id": 44555406, "comment_id": 76101748, "body": "Thanks!!!, it actually works!. (I would rank this answer as &quot;Usefull&quot; but I don&#39;t have enough reputation)"}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 39, "user_id": 5415946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59346b7686002fdc8862dec88895e184?s=128&d=identicon&r=PG&f=1", "display_name": "Matnagra", "link": "https://stackoverflow.com/users/5415946/matnagra"}, "edited": false, "score": 0, "creation_date": 1497478983, "post_id": 44555406, "comment_id": 76101768, "body": "why not select it as the answer? @Matnagra"}, {"owner": {"reputation": 39, "user_id": 5415946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59346b7686002fdc8862dec88895e184?s=128&d=identicon&r=PG&f=1", "display_name": "Matnagra", "link": "https://stackoverflow.com/users/5415946/matnagra"}, "edited": false, "score": 0, "creation_date": 1497481179, "post_id": 44555406, "comment_id": 76102409, "body": "@All , Done! sorry guys. I am new in this forum and I forgot about it. Thanks again!"}], "tags": [], "owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "is_accepted": true, "score": 3, "last_activity_date": 1497479226, "last_edit_date": 1497479226, "creation_date": 1497477653, "answer_id": 44555406, "question_id": 44555171, "link": "https://stackoverflow.com/questions/44555171/lxml-returns-empty-list/44555406#44555406", "title": "lxml returns empty list", "body": "<p>Change xpath argument to:</p>\n\n<pre><code>'//*[@id=\"outerbody\"]/tr/td/b[2]/text()'\n</code></pre>\n\n<p><strong>Edit:</strong> </p>\n\n<p>Thanks to the comments, I just realized why OP encountered the problem.</p>\n\n<p>You can print <code>page.content</code> to see the original html. (via <a href=\"https://stackoverflow.com/questions/44555171/lxml-returns-empty-list/44555406?noredirect=1#comment76101452_44555406\">@JacobIRR</a>)</p>\n\n<p>Or, in Firefox, Tools - Web Developer - Page Source.</p>\n\n<p>In Google Chrome Developer Tools, as is quoted from <a href=\"https://stackoverflow.com/questions/44555171/lxml-returns-empty-list/44555406?noredirect=1#comment76101638_44555406\">@corn3lius</a>: </p>\n\n<blockquote>\n  <p>If you use the network tab and look at the document returned it will\n  give you the original state before whoever messes with the DOM.</p>\n</blockquote>\n"}], "owner": {"reputation": 39, "user_id": 5415946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59346b7686002fdc8862dec88895e184?s=128&d=identicon&r=PG&f=1", "display_name": "Matnagra", "link": "https://stackoverflow.com/users/5415946/matnagra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 44555406, "answer_count": 1, "score": 1, "last_activity_date": 1497479226, "creation_date": 1497476393, "question_id": 44555171, "link": "https://stackoverflow.com/questions/44555171/lxml-returns-empty-list", "title": "lxml returns empty list", "body": "<p>I have seen many solutions on the internet, but non of them seem to work.</p>\n\n<p>I have this code to retrieve information from a user in Imdb:</p>\n\n<pre><code>from lxml import html\nimport requests\n\npage = requests.get('http://www.imdb.com/user/ur6447592/comments-expanded?start=0&amp;order=alpha')\ntree = html.fromstring(page.content)\n\nresult = tree.xpath('//*[@id=\"outerbody\"]/tbody/tr/td/b[2]/text()')\n\nprint(result)\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre><code>[\"Little flesh and all bones\"]\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "graph", "axis-labels"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8121470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5a6e267dff0b87b235b9657de858056?s=128&d=identicon&r=PG&f=1", "display_name": "Alia Hamdan", "link": "https://stackoverflow.com/users/8121470/alia-hamdan"}, "edited": false, "score": 0, "creation_date": 1497549784, "post_id": 44557533, "comment_id": 76136913, "body": "Thank you this was super helpful. IM not really sure what you did to make the graph though. what is plt.gca()?"}, {"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "reply_to_user": {"reputation": 9, "user_id": 8121470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5a6e267dff0b87b235b9657de858056?s=128&d=identicon&r=PG&f=1", "display_name": "Alia Hamdan", "link": "https://stackoverflow.com/users/8121470/alia-hamdan"}, "edited": false, "score": 0, "creation_date": 1497549974, "post_id": 44557533, "comment_id": 76137005, "body": "As described in the <a href=\"https://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.gca\" rel=\"nofollow noreferrer\">document</a>, it is to &quot;Get the current Axes instance on the current figure&quot;. I used it to give myself access to <code>xscale</code> and <code>ylim</code>."}, {"owner": {"reputation": 9, "user_id": 8121470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5a6e267dff0b87b235b9657de858056?s=128&d=identicon&r=PG&f=1", "display_name": "Alia Hamdan", "link": "https://stackoverflow.com/users/8121470/alia-hamdan"}, "edited": false, "score": 0, "creation_date": 1497551172, "post_id": 44557533, "comment_id": 76137658, "body": "Thank you. Im also trying to graph the percentage error as a log function. i kept most of the above nut tried changing the y axis with the percentage . Here is what i did got after the initial midpoint function.  i added perc=log((abs(f - r)/(r)))  plt.plot(n,perc). however im not sure how to make it a log and it keeps making an error."}], "tags": [], "owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "is_accepted": true, "score": 0, "last_activity_date": 1497493497, "creation_date": 1497493497, "answer_id": 44557533, "question_id": 44555129, "link": "https://stackoverflow.com/questions/44555129/covergence-test-for-a-numerical-integration/44557533#44557533", "title": "Covergence test for a numerical integration", "body": "<p>I assume you want to plot the approximation rather than error vs interval. Key changes to make are:</p>\n\n<p>1) <code>n</code> and <code>m</code> should be array or list;\n2) Since the exact result is a constant which corresponds to a horizontal line, it should be plotted from <code>(xmin, r)</code> to <code>(xmax, r)</code>;\n3) Use <code>ax.set_xscale('log')</code> to get log scaled x axis.</p>\n\n<p>The complete code is as follow. I made a few more changes, trying to use <code>numpy</code> to increase readability.</p>\n\n<pre><code>from math import exp,pi\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef midpoint(f,a,b,n):\n    h = float((b - a) / n)\n    result = 0\n    for i in range(n):\n        result += f((a + h / 2.0) + i * h)\n    result *= h\n    return result\n\ng = lambda y: ((exp(-y) * y ** 3) / (1 - exp(-y)))\na = 0\nb = 1000\nn = 2 ** np.arange(1, 20)\nf = np.vectorize(midpoint)\nm = f(g, a, b, n)\nr = (pi**4/15)\n\nplt.plot(n, m, label=\"numberical\")\nax = plt.gca()\nax.set_xscale('log')\nax.set_ylim(auto=False)\nxmin, xmax = plt.xlim()\nplt.plot([xmin, xmax], [r, r], label=\"analytical\")\nplt.xlabel('n')\nplt.ylabel('intergral')\nplt.legend()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/N1mOU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N1mOU.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 9, "user_id": 8121470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5a6e267dff0b87b235b9657de858056?s=128&d=identicon&r=PG&f=1", "display_name": "Alia Hamdan", "link": "https://stackoverflow.com/users/8121470/alia-hamdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 44557533, "answer_count": 1, "score": 0, "last_activity_date": 1497493497, "creation_date": 1497476146, "last_edit_date": 1497478614, "question_id": 44555129, "link": "https://stackoverflow.com/questions/44555129/covergence-test-for-a-numerical-integration", "title": "Covergence test for a numerical integration", "body": "<p>I'm trying to check for convergence using the midpoint method as a numerical method. I can get a table of data but I'm not sure how to graph it or add a log scale. Here is my code so far. Any help is much appreciated.</p>\n\n<pre><code> from math import exp,pi\n import numpy as np\n import matplotlib.pyplot as plt\n\n def midpoint(f,a,b,n):\n     h=float( (b-a)/n)\n     result=0\n    for i in range(n):\n       result+=f((a+ h/2.0)+ i*h)\n     result*= h\n     return result\n\n #g= lambda y: (y**3)/(exp(y)-1)\n g=lambda y: ((exp(-y)*y**3)/(1-exp(-y)))\n a=0\n b=1000\n print(    'n             midpoint')\n for i in range(1,20):\n     n=2**i\n     m=midpoint(g,a,b,n)\n     print('%7d  %.16f' %(n,m))\n\n \"\"\"r=(pi**4/15)\nplt.plot(n,m,label=\"numberical\")\nplt.plot(n,r,label=\"analytical\")\nplt.xlabel('n')\nplt.ylabel('intergral')\nplt.legend()\nplt.show()\"\"\"\n\n \"\"\"plt.semilogx(n,m)\n  plt.show()\"\"\"\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1497476272, "post_id": 44555114, "comment_id": 76100656, "body": "Yes, of course, because you are <i>appending to the same list</i>, that is, you are appending to the list you defined in your class as <code>messages = []</code>, which is a <i>class level attribute</i> shared by <i>all instances</i>."}], "answers": [{"tags": [], "owner": {"reputation": 1421, "user_id": 7299505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLVAy.jpg?s=128&g=1", "display_name": "cosinepenguin", "link": "https://stackoverflow.com/users/7299505/cosinepenguin"}, "is_accepted": false, "score": 1, "last_activity_date": 1497477072, "last_edit_date": 1497477072, "creation_date": 1497476287, "answer_id": 44555151, "question_id": 44555114, "link": "https://stackoverflow.com/questions/44555114/replacing-a-single-dict-element-in-python/44555151#44555151", "title": "Replacing a single dict element in Python", "body": "<p>Try putting <code>messages = []</code> in your init:</p>\n\n<pre><code>class Person:\n\n    def __init__(self, p):\n        self.name = p\n        self.messages = []\n\n    def add_message(self, m_text):\n        self.messages.append(m_text)\n</code></pre>\n\n<p>This worked for me!</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 2267345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0661b2b1d074d4fae357b6d2c70448aa?s=128&d=identicon&r=PG", "display_name": "Lemx", "link": "https://stackoverflow.com/users/2267345/lemx"}, "is_accepted": true, "score": 3, "last_activity_date": 1497476404, "creation_date": 1497476404, "answer_id": 44555172, "question_id": 44555114, "link": "https://stackoverflow.com/questions/44555114/replacing-a-single-dict-element-in-python/44555172#44555172", "title": "Replacing a single dict element in Python", "body": "<p>Initialize <code>messages</code> field inside the <code>__init__</code> of <code>Person</code>, i.e. <code>self.messages = []</code> to make it an instance field.<br>\nRight now it's a class-level field, so all instances share the same list.</p>\n"}], "owner": {"reputation": 13, "user_id": 6426601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7240cd3966b4ef4e684b5bb5a13242b6?s=128&d=identicon&r=PG", "display_name": "sjorsng", "link": "https://stackoverflow.com/users/6426601/sjorsng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1497476469, "accepted_answer_id": 44555172, "answer_count": 2, "score": 0, "last_activity_date": 1497477072, "creation_date": 1497476097, "question_id": 44555114, "link": "https://stackoverflow.com/questions/44555114/replacing-a-single-dict-element-in-python", "closed_reason": "Duplicate", "title": "Replacing a single dict element in Python", "body": "<p>I am trying to fill a dict of objects with each having a list of strings, all from a given list of strings. The problem is that when I want to replace a single element of the dict, every element changes. </p>\n\n<p>Person class:</p>\n\n<pre><code>class Person:\n\n    messages = []\n\n    def __init__(self, p):\n        self.name = p\n\n    def add_message(self, m_text):\n        self.messages.append(m_text)\n</code></pre>\n\n<p>Main code:</p>\n\n<pre><code>chat_messages_list = [\"Eva: Eva's first text\", \"Eva: Eva's second text\", \"Eva: Eva's third text\",\n                      \"Harry: Harry's first text\", \"Harry: Harry's second text\", \"Harry: Harry's third text\",\n                      \"Ellis: Ellis' first text\", \"Ellis: Ellis' second text\", \"Ellis: Ellis' third text\"]\ndict_persons = {}\n\nfor element in chat_messages_list:\n\n    split_messages = element.split(\": \")\n    name = split_messages[0]\n    message_text = split_messages[1]\n\n    # Create Person in list if not already exists\n    if name not in dict_persons:\n        dict_persons[name] = Person(name)\n\n    person = dict_persons[name]\n\n    # THE PROBLEM: Following line will add message_text to EVERY Person in dict_persons\n    person.add_message(message_text)\n\nfor key, value in dict_persons.items():\n    print(\"{0}: {1}\".format(key, value.messages))\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Eva: [\"Eva's first text\", \"Eva's second text\", \"Eva's third text\"]\nHarry: [\"Harry's first text\", \"Harry's second text\", \"Harry's third text\"]\nEllis: [\"Ellis' first text\", \"Ellis' second text\", \"Ellis' third text\"]\n</code></pre>\n\n<p>Actual result:</p>\n\n<pre><code>Eva: [\"Eva's first text\", \"Eva's second text\", \"Eva's third text\", \"Harry's first text\", \"Harry's second text\", \"Harry's third text\", \"Ellis' first text\", \"Ellis' second text\", \"Ellis' third text\"]\nEllis: [\"Eva's first text\", \"Eva's second text\", \"Eva's third text\", \"Harry's first text\", \"Harry's second text\", \"Harry's third text\", \"Ellis' first text\", \"Ellis' second text\", \"Ellis' third text\"]\nHarry: [\"Eva's first text\", \"Eva's second text\", \"Eva's third text\", \"Harry's first text\", \"Harry's second text\", \"Harry's third text\", \"Ellis' first text\", \"Ellis' second text\", \"Ellis' third text\"]\n</code></pre>\n\n<p>Wy are the strings being added to ALL the objects in the dict, instead of just the desired one?</p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt4", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1497477143, "post_id": 44555064, "comment_id": 76101070, "body": "You could explain better or show an image of what you want."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1497477557, "post_id": 44555064, "comment_id": 76101263, "body": "I do not notice the difference, you could point with an arrow or something similar please."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 2, "creation_date": 1497516253, "post_id": 44555064, "comment_id": 76114498, "body": "I think the <a href=\"http://doc.qt.io/qt-5/qframe.html#properties\" rel=\"nofollow noreferrer\"><code>QFrame</code> properties</a> are what you&#39;re looking for.  Specifically <code>frameShape</code> and <code>frameShadow</code>."}], "answers": [{"comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1497629480, "post_id": 44591500, "comment_id": 76175163, "body": "This won&#39;t work for all styles. The borders of the tree-widget and label may not look the same, even if exactly the same frame settings are applied to both. Some styles just draw the borders differently for certain widgets. This seems to be the case for the Plastique style and the Windows style (which the OP appears to be using). By contrast, the default Fusion style draws them the same, as do the Cleanlooks and GTK2 styles. (I tested this using the preview mode in Qt Designer)."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1497641911, "post_id": 44591500, "comment_id": 76181797, "body": "@ekhumoro What you say is true but... it&#39;s also in the nature of styles as implemented in <code>Qt</code> -- some features/changes will work with certain styles but not with others.  Personally, I generally leave the style stuff alone -- the user should choose a style and it&#39;s not up to me to interfere with it :-)"}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1497622469, "creation_date": 1497622469, "answer_id": 44591500, "question_id": 44555064, "link": "https://stackoverflow.com/questions/44555064/how-to-make-border-of-qlabel-look-like-border-of-other-widgets-like-qtreewidget/44591500#44591500", "title": "How to make border of QLabel look like border of other widgets like QTreeWidget?", "body": "<p>You may have found the answer to this already but just in case...</p>\n\n<p>The following should provide you with what you want...</p>\n\n<pre><code>label = QLabel(self)\nlabel.setFrameShape(QFrame.Panel)\nlabel.setFrameShadow(QFrame.Sunken)\nlabel.setLineWidth(3)\n</code></pre>\n\n<p>Where I've just hardwired the line width.  Note that the \"border: 1px\" specifier <em>must</em> be removed from the style sheet otherwise it will be used in preference to the specified line width.  The complete code would be...</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\n\nclass widget(QWidget):\n    def __init__(self):\n        super().__init__()\n        treewidget = QTreeWidget(self)\n        label = QLabel(self)\n        label.setStyleSheet(\"background-color: white; inset grey; min-height: 200px;\")\n        label.setFrameShape(QFrame.Panel)\n        label.setFrameShadow(QFrame.Sunken)\n        label.setLineWidth(3)\n        grid = QGridLayout()\n        grid.setSpacing(10)\n        grid.addWidget(treewidget, 1, 0)\n        grid.addWidget(label, 2, 0)\n        self.setLayout(grid)\n        self.show()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    f = widget()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10143, "favorite_count": 1, "accepted_answer_id": 44591500, "answer_count": 1, "score": 2, "last_activity_date": 1497622469, "creation_date": 1497475921, "last_edit_date": 1497480416, "question_id": 44555064, "link": "https://stackoverflow.com/questions/44555064/how-to-make-border-of-qlabel-look-like-border-of-other-widgets-like-qtreewidget", "title": "How to make border of QLabel look like border of other widgets like QTreeWidget?", "body": "<p>I noticed different border styles for QTreeWidget and QLabel - even if I try to adjust the stylesheet. Of course, I could change the stylesheet for both, but ideally I'd like to keep the QTreeWidget's border style. How can I make the border of QLabel look like the border of QTreeWidget?</p>\n\n<hr>\n\n<p><strong>MCVE snippet:</strong></p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\n\nclass widget(QWidget):\n    def __init__(self):\n        super().__init__()\n        treewidget = QTreeWidget(self)\n        label = QLabel(self)\n        label.setStyleSheet(\"background-color: white; border: 1px inset grey; min-height: 200px;\")\n        grid = QGridLayout()\n        grid.setSpacing(10)\n        grid.addWidget(treewidget, 1, 0)\n        grid.addWidget(label, 2, 0)\n        self.setLayout(grid)\n        self.show()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    f = widget()\n    sys.exit(app.exec_())\n</code></pre>\n\n<hr>\n\n<p><strong>Without stylesheet:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Dv67R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dv67R.png\" alt=\"window default\"></a></p>\n\n<hr>\n\n<p><strong>Screenshot of resulting window for MCVE snippet:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/5lU7q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5lU7q.png\" alt=\"window as is\"></a></p>\n\n<hr>\n\n<p><strong>What I want the window to look like:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/AJhuT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AJhuT.png\" alt=\"window as desired\"></a></p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497475775, "post_id": 44555006, "comment_id": 76100437, "body": "You&#39;d have to rebuild the dictionary every time, and only end up with two keys; the first version is more readable and likely to be more efficient."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1497475776, "post_id": 44555006, "comment_id": 76100440, "body": "A dictionary maps keys to values. Unless you know the value of <code>x</code> is somehow constrained to some enumerable set of values, then you cannot build a dictionary that will be equivalent to your <code>if-else</code> statement. Regardless, you should just stick to the <code>if-else</code> construction. Which expresses the intent plainly and efficiently."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 2, "creation_date": 1497476187, "post_id": 44555006, "comment_id": 76100621, "body": "BTW, you can&#39;t do <code>else if</code> in Python. The correct syntax is <code>elif</code>. OTOH, there&#39;s also the ternary expression, eg <code>score = 1 if x &gt; 5 else 2</code>."}, {"owner": {"reputation": 663, "user_id": 5580002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37e92cff78866f285fc482c706533647?s=128&d=identicon&r=PG&f=1", "display_name": "suvy", "link": "https://stackoverflow.com/users/5580002/suvy"}, "edited": false, "score": 0, "creation_date": 1497477104, "post_id": 44555006, "comment_id": 76101053, "body": "it looks like a job for <code>filter</code> function"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1497476168, "creation_date": 1497476168, "answer_id": 44555133, "question_id": 44555006, "link": "https://stackoverflow.com/questions/44555006/logical-expression-in-key-of-dictionary-in-python/44555133#44555133", "title": "Logical expression in key of dictionary in Python", "body": "<p>Instead of a dictionary, you can use a list of tuples, where one item is a function and the other is a value. You loop through the list, calling each function; when the function returns a truthy value you return the corresponding value.</p>\n\n<pre><code>def greater_than_5(x):\n    return x &gt; 5\ndef less_or_equal_5(x):\n    return x &lt;= 5\n\nscores = [(greater_than_5, 1), (less_or_equal_5, 2)]\nfor f, val in scores:\n    if f(x):\n        score = val\n        break\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8162885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c889d4ea8c009ff1c93d52a37067d5?s=128&d=identicon&r=PG&f=1", "display_name": "Kristina", "link": "https://stackoverflow.com/users/8162885/kristina"}, "edited": false, "score": 0, "creation_date": 1497563064, "post_id": 44555167, "comment_id": 76143759, "body": "Thanks! I&#39;ll just stick with the if-else as you suggested."}], "tags": [], "owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "is_accepted": true, "score": 0, "last_activity_date": 1497477114, "last_edit_date": 1497477114, "creation_date": 1497476373, "answer_id": 44555167, "question_id": 44555006, "link": "https://stackoverflow.com/questions/44555006/logical-expression-in-key-of-dictionary-in-python/44555167#44555167", "title": "Logical expression in key of dictionary in Python", "body": "<p>Using if-else will be the most readable solution. Also it avoids the problem that you would need an infinite amount of values to express something like <code>x &gt; 5</code> with a dictionary (as it will map all number starting from 6).</p>\n\n<p>Only if you know that the domain is limited (e.g., x is always less than 1000), it will work. The simple if statement will most likely be faster.</p>\n\n<p>To express ranges, you can use this short notation:</p>\n\n<pre><code>if 4 &lt;= x &lt;= 10:\n  ...\n</code></pre>\n\n<p>If you have a very complicate formula (lots of if-else statements), and a limited number of values, using a precomputed table makes sense, though. This is what compilers also do if they have to translate complicated switch-case statements in C like languages when the values are dense. They implement it as a lookup table.</p>\n\n<p>I would still recommend to start with writing the formula as if-else statements, and then use a function that computes the dictionary based on the if-else code and the range of possible values. To fill the dictionary, iterate over the range of possible values:</p>\n\n<pre><code>def score(x):\n  if x &gt; 5:\n    return 1\n  elif x &lt;= 5:\n    return 2\n  ...\n\nd = dict((i,foo(i)) for i in range(1,100))\nd[x]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8162885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c889d4ea8c009ff1c93d52a37067d5?s=128&d=identicon&r=PG&f=1", "display_name": "Kristina", "link": "https://stackoverflow.com/users/8162885/kristina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 0, "accepted_answer_id": 44555167, "answer_count": 2, "score": 0, "last_activity_date": 1497477114, "creation_date": 1497475671, "question_id": 44555006, "link": "https://stackoverflow.com/questions/44555006/logical-expression-in-key-of-dictionary-in-python", "title": "Logical expression in key of dictionary in Python", "body": "<p>As a simplified example, say I have the following if statement</p>\n\n<pre><code>if x &gt; 5:\n    score = 1\nelse if x &lt;= 5\n    score = 2\n</code></pre>\n\n<p>How can I replace this with a dictionary? I want something like</p>\n\n<pre><code>score = {x &gt; 5: 1, x &lt;= 5: 2}[x]\n</code></pre>\n\n<p>My actual if statement is quite long, so I'd like to use this condensed construct.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1497475613, "post_id": 44554971, "comment_id": 76100363, "body": "so the content between the headings is formatted with spaces. For every line?"}, {"owner": {"reputation": 15, "user_id": 8003959, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HhjBibw60zY/AAAAAAAAAAI/AAAAAAAABI4/Np-Ktg0uoAY/photo.jpg?sz=128", "display_name": "Stanley Parable", "link": "https://stackoverflow.com/users/8003959/stanley-parable"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1497475834, "post_id": 44554971, "comment_id": 76100463, "body": "yes, it has a small indent (1 space) for the text between the headings."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 6442439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103363315994699/picture?type=large", "display_name": "Jeremy Freeman", "link": "https://stackoverflow.com/users/6442439/jeremy-freeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1497475885, "creation_date": 1497475885, "answer_id": 44555057, "question_id": 44554971, "link": "https://stackoverflow.com/questions/44554971/how-to-read-text-between-two-headings-and-return-the-heading-name-for-certain-p/44555057#44555057", "title": "How to read Text between two headings, and return the Heading name for certain pattern matches in the text under that heading", "body": "<p>I would suggest building a simple loop that iterates over the text line by line.  I'm not sure if the format matches what you posted, but you can do something like the following</p>\n\n<pre><code>fname = \"file.txt\"\nwith open(fname) as f:\n   for line in f:\n      if not line.startswith( ' ' ):\n         print line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 7953603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vDnBrMl09-Q/AAAAAAAAAAI/AAAAAAAAecg/fCXR160HpM8/photo.jpg?sz=128", "display_name": "Vape Waves", "link": "https://stackoverflow.com/users/7953603/vape-waves"}, "is_accepted": false, "score": 0, "last_activity_date": 1497479595, "creation_date": 1497479595, "answer_id": 44555754, "question_id": 44554971, "link": "https://stackoverflow.com/questions/44554971/how-to-read-text-between-two-headings-and-return-the-heading-name-for-certain-p/44555754#44555754", "title": "How to read Text between two headings, and return the Heading name for certain pattern matches in the text under that heading", "body": "<p>this worked for me.</p>\n\n<pre><code>    f = open(\"file.txt\",'r')\n    headings= []\n    headingsCount = 0\n    positionOFValueYesNever = []\n\n    for line in f:\n\n       if not line.startswith(' '):\n             headings.append(line)\n             headingsCount+=1\n\n       elif line.find('value yes never') == True:\n             positionOFValueYesNever.append(headingsCount-1)    \n\n    for  i in positionOFValueYesNever:\n       print(headings[i])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 3245953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcbc891e765d0ce45e8781054740c0e6?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/3245953/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1497480092, "creation_date": 1497480092, "answer_id": 44555828, "question_id": 44554971, "link": "https://stackoverflow.com/questions/44554971/how-to-read-text-between-two-headings-and-return-the-heading-name-for-certain-p/44555828#44555828", "title": "How to read Text between two headings, and return the Heading name for certain pattern matches in the text under that heading", "body": "<p>The following code will print out what you want:</p>\n\n<pre><code>fname = \"file.txt\"\nwith open(fname) as f:\n    headings = []\n    for line in f:\n        if not line.startswith(' '):\n            current_heading = line.strip()\n        else:\n            if 'value yes never' in line:\n                headings.append(current_heading)\n\nprint(headings)\n</code></pre>\n\n<p>If you expect the text \"value yes never\" to occur on multiple lines between each heading, then you can either deduplicate at the end:</p>\n\n<pre><code>print(set(headings))\n</code></pre>\n\n<p>or add a check before appending:</p>\n\n<pre><code>if current_heading not in headings:\n    headings.append(current_heading)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "is_accepted": false, "score": 0, "last_activity_date": 1497481281, "last_edit_date": 1497481281, "creation_date": 1497480965, "answer_id": 44555967, "question_id": 44554971, "link": "https://stackoverflow.com/questions/44554971/how-to-read-text-between-two-headings-and-return-the-heading-name-for-certain-p/44555967#44555967", "title": "How to read Text between two headings, and return the Heading name for certain pattern matches in the text under that heading", "body": "<p>You can use <code>groupby</code> from <code>itertools</code> module in order to group the lines within the condition if it starts with a space or not. Then group the result again by two.</p>\n\n<p>This is an example:</p>\n\n<pre><code>from itertools import groupby\n# Assuming your input file is called: input.txt\nwith open('input.txt', 'r') as f:\n    data = f.read().splitlines()\n\nsub = []\nfor _, v in groupby(data, lambda x: x.startswith(' ')):\n    sub.append([j.strip() for j in list(v)])\n\nfinal = [sub[k:k+2] for k in range(0, len(sub), 2)]\nprint(final)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\n [['heading 1'], ['abad askjd asdfj dk skldfj', 'askdja ajsdk a ajksdj ajsdk a ajksd', '**value yes never** dont care about this', 'asdj aksjd sd asda sda', 'alsdk skldfj sd asda sda']], \n  [['heading 2'], ['asd asd dfgfd dk a ajksdj','asdasasd asd sd asda sda', 'asdas asdasd dk a ajksdj', 'value 123 456 dk a ajksdj', 'asdasd asdasd']], \n  [['heading 3'], ['asd asda sda jsdk a ajksdj','dsfgd dfgd g dk a aj', 'dfgfdg dfgfd dk skldfj', '**value yes never**dont care about this', 'asdasd asdasd gd dfgd g dk']]\n]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8003959, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HhjBibw60zY/AAAAAAAAAAI/AAAAAAAABI4/Np-Ktg0uoAY/photo.jpg?sz=128", "display_name": "Stanley Parable", "link": "https://stackoverflow.com/users/8003959/stanley-parable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 44555828, "answer_count": 4, "score": 1, "last_activity_date": 1497481281, "creation_date": 1497475536, "last_edit_date": 1497475932, "question_id": 44554971, "link": "https://stackoverflow.com/questions/44554971/how-to-read-text-between-two-headings-and-return-the-heading-name-for-certain-p", "title": "How to read Text between two headings, and return the Heading name for certain pattern matches in the text under that heading", "body": "<p>i have a txt file like this :</p>\n\n<pre><code>heading 1\n abad askjd asdfj dk skldfj\n askdja ajsdk a ajksdj ajsdk a ajksd\n value yes never dont care about this\n asdj aksjd sd asda sda\n alsdk skldfj sd asda sda\nheading 2\n asd asd dfgfd dk a ajksdj\n asdas asd asd sd asda sda\n asdas asdasd dk a ajksdj\n value 123 456 dk a ajksdj\n asdasd asdasd\nheading 3\n asd asda sda jsdk a ajksdj\n dsfgd dfgd g dk a aj\n dfgfdg dfgfd dk skldfj\n value yes never dont care about this\n asdasd asdasd gd dfgd g dk \n</code></pre>\n\n<p>So in the above file, i want to get all the headings which have the text \"value yes never\", so the output with the current file should be :</p>\n\n<p>heading 1\nheading 3</p>\n\n<p>How do i go about this in python ?</p>\n"}, {"tags": ["python", "macos", "delphi", "ctypes", "lazarus"], "answers": [{"comments": [{"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "edited": false, "score": 0, "creation_date": 1497477368, "post_id": 44555022, "comment_id": 76101180, "body": "Hi Rob, thanks for that answer. I did recompile the library and ensured that the &quot;-Px86_64&quot; flag was shown in the options, however I still get the same error. On running <code>lipo -info</code> on the recompiled library, I do not see any change in the output, i.e. I still get the architecture as i386. Any idea what is going on?"}, {"owner": {"reputation": 1706, "user_id": 2906189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f346585e5c2b436ad98d6317256bc38?s=128&d=identicon&r=PG", "display_name": "William McBrine", "link": "https://stackoverflow.com/users/2906189/william-mcbrine"}, "edited": false, "score": 1, "creation_date": 1497483681, "post_id": 44555022, "comment_id": 76103116, "body": "Try the other solution at that link -- &quot;Run ppcx64 directly instead of fpc&quot;?"}], "tags": [], "owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "is_accepted": true, "score": 3, "last_activity_date": 1497476046, "last_edit_date": 1497476046, "creation_date": 1497475717, "answer_id": 44555022, "question_id": 44554926, "link": "https://stackoverflow.com/questions/44554926/lazarus-library-using-ctypes-in-python-for-osx/44555022#44555022", "title": "Lazarus library using ctypes in Python for OSX", "body": "<p>Miniconda is evidently a 64-bit version of Python. Your library is 32 bits. (An architecture of i386 is 32-bit; you should see x86_64 for a 64-bit library.) Thus, Python correctly reports \"wrong architecture.\"</p>\n\n<p><a href=\"https://stackoverflow.com/q/2403662/33732\">Recompile your library as a 64-bit binary</a> and try again.</p>\n"}], "owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 44555022, "answer_count": 1, "score": 1, "last_activity_date": 1497476046, "creation_date": 1497475309, "question_id": 44554926, "link": "https://stackoverflow.com/questions/44554926/lazarus-library-using-ctypes-in-python-for-osx", "title": "Lazarus library using ctypes in Python for OSX", "body": "<p>I have a very small library in Lazarus and I'm unable to use it with ctypes on my Mac. I don't really understand what I'm doing incorrectly, and I was hoping someone can point me in the right direction.</p>\n\n<p>This is the code that I have in Lazarus. When compiling on a Linux machine (Ubuntu VM), everything works fine. I can create a Linux .so file, and using ctypes, I can call into the shared library.</p>\n\n<pre><code>library project1;\n\n{$mode delphi}{$H+}\n\n{$IFDEF Darwin}\n{$linkframework CoreFoundation}\n{$linkframework Carbon}\n{$ENDIF}\n\nfunction SubStr(CString: PChar;FromPos,ToPos: Longint): PChar; cdecl;\n\nvar\n  Length: Integer;\n\nbegin\n  Length := StrLen(CString);\n  SubStr := CString + Length;\n  if (FromPos &gt; 0) and (ToPos &gt;= FromPos) then\n  begin\n    if Length &gt;= FromPos then\n      SubStr := CString + FromPos - 1;\n    if Length &gt; ToPos then\n    CString[ToPos] := #0;\n  end;\nend;\n\nexports\n  SubStr;\n\nend.\n</code></pre>\n\n<p>The Python code for this is below.</p>\n\n<pre><code>import ctypes\n\nlib = ctypes.CDLL('./libproject1.so')\n\n\nlib.SubStr.argtypes = (ctypes.c_char_p, ctypes.c_int64, ctypes.c_int64)\nlib.SubStr.restype = ctypes.c_char_p\n\nlib.SubStr('HelloWorld', 1, 5)\n# The output is 'Hello' as expected\n</code></pre>\n\n<p>However, when I test the same thing on my Mac, I get the following error.</p>\n\n<pre><code>---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n&lt;ipython-input-44-37971b70da86&gt; in &lt;module&gt;()\n      1 import ctypes\n      2 \n----&gt; 3 ctypes.CDLL('./libproject1.dylib')\n\n/Users/$USER/miniconda2/lib/python2.7/ctypes/__init__.pyc in __init__(self, name, mode, handle, use_errno, use_last_error)\n    360 \n    361         if handle is None:\n--&gt; 362             self._handle = _dlopen(self._name, mode)\n    363         else:\n    364             self._handle = handle\n\nOSError: dlopen(./libproject1.dylib, 6): no suitable image found.  Did find:\n    ./libproject1.dylib: mach-o, but wrong architecture\n</code></pre>\n\n<p>I've created a new project on the mac and tried the same thing to no avail.</p>\n\n<p>On using lipo on this dylib, I get the following output.</p>\n\n<pre><code>$ lipo -info libproject1.dylib\nNon-fat file: libproject1.dylib is architecture: i386\n</code></pre>\n\n<p>I believe this is what I'm supposed to get. Anyone have any suggestions on how to go about figuring this out?</p>\n"}, {"tags": ["python", "windows", "network-programming", "psutil"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1497487015, "post_id": 44554909, "comment_id": 76103873, "body": "The <a href=\"https://github.com/giampaolo/psutil/blob/release-5.2.2/psutil/_psutil_windows.c#L2285\" rel=\"nofollow noreferrer\">counts from psutil</a> include unicast, broadcast, and multicast bytes sent and received (i.e. <code>OutOctets</code> and <code>InOctets</code>). The connection status dialog only shows the unicast counts (i.e. <code>OutUcastOctets</code> and <code>InUcastOctets</code>). If you want this specific information, you&#39;ll need to use ctypes or a C extension to query the <a href=\"https://msdn.microsoft.com/en-us/library/aa814491\" rel=\"nofollow noreferrer\"><code>MIB_IF_ROW2</code></a> info for the interface."}], "owner": {"reputation": 99, "user_id": 3673055, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ezSVV.jpg?s=128&g=1", "display_name": "elti", "link": "https://stackoverflow.com/users/3673055/elti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 657, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497475251, "creation_date": 1497475251, "question_id": 44554909, "link": "https://stackoverflow.com/questions/44554909/get-psutil-net-io-counters-to-match-values-in-network-connection-status", "title": "Get psutil net_io_counters to match values in Network Connection Status", "body": "<p>I'm using psutil to query the number of bytes sent and received over ethernet on Windows 10. </p>\n\n<p>I can use <code>psutil.net_io_counters(pernic=True)</code> to get the values. However, when I parse the values I need, they are slightly higher than the byte count that I view in the system UI.</p>\n\n<pre><code>import psutil\n\nnetwork_stats = psutil.net_io_counters(pernic=True)['Ethernet']\nbytes_sent = getattr(network_stats, 'bytes_sent')\nbytes_recv = getattr(network_stats, 'bytes_recv')\n\nprint \"Bytes Sent = {0} | Bytes Received = {1}\".format(bytes_sent, bytes_recv)\n</code></pre>\n\n<p>My issue is, the number of bytes returned from this script is <em>always</em> higher than the byte count displayed in the Network Connections -> Ethernet Status UI. However, the difference is relatively small.</p>\n\n<p><img src=\"https://i.stack.imgur.com/CzTVO.jpg\" alt=\"Ethernet Status - Network Activity\"></p>\n\n<p>Is it possible to use psutil to get the sent/received values to match the Ethernet Status Activity in the screenshot above? And why are the values returned slightly different in the first place? </p>\n"}, {"tags": ["python", "pip", "cython", "setup.py"], "answers": [{"comments": [{"owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "edited": false, "score": 0, "creation_date": 1497476406, "post_id": 44555127, "comment_id": 76100723, "body": "What&#39;s weird is a great many projects use code as I wrote it.  A quick search on GitHub reveals tons of them.  Has no one tested their code on a fresh install? <a href=\"https://github.com/search?utf8=%E2%9C%93&amp;q=install_requires+cython&amp;type=Code\" rel=\"nofollow noreferrer\">github.com/&hellip;</a>"}, {"owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "reply_to_user": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "edited": false, "score": 0, "creation_date": 1497477095, "post_id": 44555127, "comment_id": 76101043, "body": "It&#39;s not super convenient to do so. Large support packages (e.g. <code>cython</code>, <code>lxml</code>, <code>pandas</code>) often become insidious expectations. Many test on Travis CI, or locally with virtual environments, <code>tox</code>, etc. But these build environments get <i>custom install procedures</i> that aren&#39;t present just running the setup manually from scratch. It&#39;s easy to have gloriously running tests--auto-builds across a dozen different Python versions, with 100% coverage--that don&#39;t properly install from scratch from <code>setup.py</code> alone. Been there, done that. Embarrassing, annoying, and all too easy."}], "tags": [], "owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "is_accepted": false, "score": 1, "last_activity_date": 1497476146, "creation_date": 1497476146, "answer_id": 44555127, "question_id": 44554882, "link": "https://stackoverflow.com/questions/44554882/in-a-setup-py-involving-cython-if-install-requires-then-how-can-from-library-i/44555127#44555127", "title": "In a setup.py involving Cython, if install_requires, then how can from library import something?", "body": "<p>It doesn't make sense in general. It is, as you suspect, an attempt to use something that (possibly) has yet to be installed. If tested on a system that already has the dependency installed, you might not notice this defect. But run it on a system where your dependency is absent, and you will certainly notice.</p>\n\n<p>There is another <code>setup()</code> keyword argument, <code>setup_requires</code>, that can appear to be parallel in form and use to <code>install_requires</code>, but this is an illusion. Whereas <code>install_requires</code> triggers a lovely ballet of automatic installation in environments that lack the dependencies it names, <code>setup_requires</code> is more documentation than automation. It won't auto-install, and certainly not magically jump back in time to auto-install modules that have already been called for in <code>import</code> statements.</p>\n\n<p>There's more on this at <a href=\"http://setuptools.readthedocs.io/en/latest/setuptools.html\" rel=\"nofollow noreferrer\">the setuptools docs</a>, but the quick answer is that you're right to be confused by a module that is trying to auto-install its own <em>setup</em> pre-requisites.</p>\n\n<p>For a practical workaround, try installing <code>cython</code> separately, and then run this setup. While it won't fix the metaphysical illusions of this setup script, it will resolve the requirements and let you move on. </p>\n"}, {"comments": [{"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 2, "creation_date": 1497544387, "post_id": 44570864, "comment_id": 76133940, "body": "This is the best answer and <a href=\"http://docs.cython.org/en/latest/src/reference/compilation.html#distributing-cython-modules\" rel=\"nofollow noreferrer\">is what is recommended by Cython documentation as well</a>. In general, pyx files do not need to be re-evaluated at install time, only if their source code changes. So for distributable packages only the Cython generated C/C++ files need to be distributed and built by setup.py."}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": false, "score": 3, "last_activity_date": 1497545607, "last_edit_date": 1497545607, "creation_date": 1497538906, "answer_id": 44570864, "question_id": 44554882, "link": "https://stackoverflow.com/questions/44554882/in-a-setup-py-involving-cython-if-install-requires-then-how-can-from-library-i/44570864#44570864", "title": "In a setup.py involving Cython, if install_requires, then how can from library import something?", "body": "<p>One solution to this is to not make Cython a build requirement, and instead distribute the Cython generated <code>C</code> files with your package.  I'm sure there is a simpler example somewhere, but this is what <code>pandas</code> does - it conditionally imports Cython, and if not present can be built from the c files. </p>\n\n<p><a href=\"https://github.com/pandas-dev/pandas/blob/3ff845b4e81d4dde403c29908f5a9bbfe4a87788/setup.py#L433\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/blob/3ff845b4e81d4dde403c29908f5a9bbfe4a87788/setup.py#L433</a></p>\n\n<p>Edit:  The doc link from @danny has an easier to follow example.\n<a href=\"http://docs.cython.org/en/latest/src/reference/compilation.html#distributing-cython-modules\" rel=\"nofollow noreferrer\">http://docs.cython.org/en/latest/src/reference/compilation.html#distributing-cython-modules</a></p>\n"}, {"tags": [], "owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "is_accepted": false, "score": 9, "last_activity_date": 1548149396, "last_edit_date": 1548149396, "creation_date": 1548148208, "answer_id": 54304732, "question_id": 44554882, "link": "https://stackoverflow.com/questions/44554882/in-a-setup-py-involving-cython-if-install-requires-then-how-can-from-library-i/54304732#54304732", "title": "In a setup.py involving Cython, if install_requires, then how can from library import something?", "body": "<p>As I understand it, this is where <a href=\"https://www.python.org/dev/peps/pep-0518/\" rel=\"noreferrer\">PEP 518</a> comes in - also see <a href=\"https://snarky.ca/clarifying-pep-518/\" rel=\"noreferrer\">some clarifications</a> by one of its authors.</p>\n\n<p>The idea is that you add yet another file to your Python project / package: <code>pyproject.toml</code>. It is supposed to contain information on build environment dependencies (among other stuff, long term). <code>pip</code> (or just any other package manager) could look into this file and <em>before running setup.py</em> (or any other build script) install the required build environment. A <code>pyproject.toml</code> could therefore look like this:</p>\n\n<pre><code>[build-system]\nrequires = [\"setuptools\", \"wheel\", \"Cython\"]\n</code></pre>\n\n<p>It is a fairly recent development and, as of yet (January 2019), it is not finalized / approved by the Python community, though (limited) <a href=\"https://github.com/pypa/pip/pull/4144\" rel=\"noreferrer\">support was added to pip</a> in May 2017 / the 10.0 release.</p>\n"}, {"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": false, "score": 2, "last_activity_date": 1548176059, "creation_date": 1548176059, "answer_id": 54312974, "question_id": 44554882, "link": "https://stackoverflow.com/questions/44554882/in-a-setup-py-involving-cython-if-install-requires-then-how-can-from-library-i/54312974#54312974", "title": "In a setup.py involving Cython, if install_requires, then how can from library import something?", "body": "<p>When you use setuptool, you should add <code>cython</code> to <code>setup_requires</code> (and also to <code>install_requires</code> if cython is used by installation), i.e.</p>\n\n<pre><code># don't import cython, it isn't yet there\nfrom setuptools import setup, Extension\n\n# use Extension, rather than cythonize (it is not yet available)\ncy_extension = Extension(name=\"mylib_proxy\", sources=[\"mylib_proxy.pyx\"])\n\nsetup(\n    name='mylib',\n    ...\n    ext_modules = [cy_extension],\n    setup_requires=[\"cython\"],\n    ...\n)\n</code></pre>\n\n<p><code>Cython</code> isn't imported (it is not yet available when <code>setup.py</code>starts), but <code>setuptools.Extension</code> is used  instead of <code>cythonize</code> to add cython-extension to the setup.</p>\n\n<p>It should work now. The reason: <a href=\"https://github.com/pypa/setuptools/blob/a94ccbf404a79d56f9b171024dee361de9a948da/setuptools/command/build_ext.py#L15\" rel=\"nofollow noreferrer\"><code>setuptools</code> will try to import cython</a>, after <code>setup_requires</code> are fulfilled:</p>\n\n<pre><code>...\ntry:\n    # Attempt to use Cython for building extensions, if available\n    from Cython.Distutils.build_ext import build_ext as _build_ext\n    # Additionally, assert that the compiler module will load\n    # also. Ref #1229.\n    __import__('Cython.Compiler.Main')\nexcept ImportError:\n    _build_ext = _du_build_ext\n...\n</code></pre>\n\n<p>It becomes more complicated, if your Cython-extension uses <code>numpy</code>, but also this is possible - see <a href=\"https://stackoverflow.com/q/54117786/5769463\">this SO post</a>.</p>\n"}], "owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1649, "favorite_count": 1, "answer_count": 4, "score": 9, "last_activity_date": 1548176059, "creation_date": 1497475122, "last_edit_date": 1548151793, "question_id": 44554882, "link": "https://stackoverflow.com/questions/44554882/in-a-setup-py-involving-cython-if-install-requires-then-how-can-from-library-i", "title": "In a setup.py involving Cython, if install_requires, then how can from library import something?", "body": "<p>This doesn't make sense to me. How can I use the setup.py to install Cython and then also use the setup.py to compile a library proxy?</p>\n\n<pre><code>import sys, imp, os, glob\nfrom setuptools import setup\nfrom Cython.Build import cythonize # this isn't installed yet\n\nsetup(\n    name='mylib',\n    version='1.0',\n    package_dir={'mylib': 'mylib', 'mylib.tests': 'tests'},\n    packages=['mylib', 'mylib.tests'],\n    ext_modules = cythonize(\"mylib_proxy.pyx\"), #how can we call cythonize here?\n    install_requires=['cython'],\n    test_suite='tests',\n)\n</code></pre>\n\n<p>Later:\npython setup.py build</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"setup.py\", line 3, in &lt;module&gt;\n    from Cython.Build import cythonize\nImportError: No module named Cython.Build\n</code></pre>\n\n<p>It's because cython isn't installed yet.</p>\n\n<p>What's odd is that a great many projects are written this way.  A quick github search reveals as much: <a href=\"https://github.com/search?utf8=%E2%9C%93&amp;q=install_requires+cython&amp;type=Code\" rel=\"nofollow noreferrer\">https://github.com/search?utf8=%E2%9C%93&amp;q=install_requires+cython&amp;type=Code</a></p>\n"}, {"tags": ["python", "django", "database"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8111468, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a04b2670a33699592b7ffb812c62a7af?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Covaci", "link": "https://stackoverflow.com/users/8111468/adrian-covaci"}, "edited": false, "score": 0, "creation_date": 1497536182, "post_id": 44555779, "comment_id": 76128446, "body": "It actually connects to the databases, and shows me all of the classes in the console. Should I just copy-paste it into models.py? :D"}, {"owner": {"reputation": 436, "user_id": 8122640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c717b33057cb67dfcf0451b3801c43d2?s=128&d=identicon&r=PG&f=1", "display_name": "jgmh", "link": "https://stackoverflow.com/users/8122640/jgmh"}, "reply_to_user": {"reputation": 67, "user_id": 8111468, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a04b2670a33699592b7ffb812c62a7af?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Covaci", "link": "https://stackoverflow.com/users/8111468/adrian-covaci"}, "edited": false, "score": 0, "creation_date": 1497540624, "post_id": 44555779, "comment_id": 76131742, "body": "Yes, do it.  Maybe it is not the best solution, but it actually lets you test the models.  Be careful with the indentation."}, {"owner": {"reputation": 436, "user_id": 8122640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c717b33057cb67dfcf0451b3801c43d2?s=128&d=identicon&r=PG&f=1", "display_name": "jgmh", "link": "https://stackoverflow.com/users/8122640/jgmh"}, "reply_to_user": {"reputation": 67, "user_id": 8111468, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a04b2670a33699592b7ffb812c62a7af?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Covaci", "link": "https://stackoverflow.com/users/8111468/adrian-covaci"}, "edited": false, "score": 0, "creation_date": 1497541550, "post_id": 44555779, "comment_id": 76132356, "body": "Are you using windows?"}], "tags": [], "owner": {"reputation": 436, "user_id": 8122640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c717b33057cb67dfcf0451b3801c43d2?s=128&d=identicon&r=PG&f=1", "display_name": "jgmh", "link": "https://stackoverflow.com/users/8122640/jgmh"}, "is_accepted": false, "score": 0, "last_activity_date": 1497479813, "creation_date": 1497479813, "answer_id": 44555779, "question_id": 44554864, "link": "https://stackoverflow.com/questions/44554864/django-import-models-from-legacy-databasei/44555779#44555779", "title": "django - Import models from legacy databaseI", "body": "<p>Something is wrong with the command.  Did you already test <code>python manage inspectdb</code> without the trailing <code>&gt; models.py</code>?\nThat way you can get the model to standard output and check if it constructs the models or if there is no connection with the database.</p>\n"}], "owner": {"reputation": 67, "user_id": 8111468, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a04b2670a33699592b7ffb812c62a7af?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Covaci", "link": "https://stackoverflow.com/users/8111468/adrian-covaci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497479813, "creation_date": 1497475031, "question_id": 44554864, "link": "https://stackoverflow.com/questions/44554864/django-import-models-from-legacy-databasei", "title": "django - Import models from legacy databaseI", "body": "<p>I already have a database that I would like to use in my new Django project. I used the <code>inspectdb &gt; models.py</code> command to get the models from my old database, but I get the following error:</p>\n\n<pre><code>from django.db import models\n# Unable to inspect table '&gt;'\n# The error was: (1146, \"Table 'colta.&gt;' doesn't exist\")\n# Unable to inspect table 'Grupa/models.py'\n# The error was: (1146, \"Table 'colta.grupa/models.py' doesn't exist\")\n</code></pre>\n"}, {"tags": ["python", "button", "pyqt", "pyside", "qfiledialog"], "answers": [{"comments": [{"owner": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 1, "creation_date": 1497476391, "post_id": 44554961, "comment_id": 76100709, "body": "Awesome. Any recommendation on how to get the variable <code>filePath</code> out of <code>selectFile</code>?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 1, "creation_date": 1497476502, "post_id": 44554961, "comment_id": 76100771, "body": "You could create an attribute of the class and access through it. <code>self.filepath = {}</code> and then <code>{value} = self.filepath</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 1, "creation_date": 1497476618, "post_id": 44554961, "comment_id": 76100819, "body": "You should realize that getOpenFileName returns a tuple containing the path and the filter, in your case only the first one is necessary"}, {"owner": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 1, "creation_date": 1497476946, "post_id": 44554961, "comment_id": 76100972, "body": "Do you mean <code>self.filepath = {value}</code>?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 1, "creation_date": 1497477016, "post_id": 44554961, "comment_id": 76100999, "body": "You could change: <code>filePath = QtGui.QFileDialog.getOpenFileName()</code> to <code>self.filePath = QtGui.QFileDialog.getOpenFileName()</code>"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1497476214, "last_edit_date": 1497476214, "creation_date": 1497475477, "answer_id": 44554961, "question_id": 44554862, "link": "https://stackoverflow.com/questions/44554862/pyside-why-is-file-browser-coming-up-automatically-not-after-button-press/44554961#44554961", "title": "PySide: Why is File Browser coming up automatically, not after button press?", "body": "<ol>\n<li>The problem is generated by the wrong connection. The way of connection is as follows:</li>\n</ol>\n\n<hr>\n\n<pre><code>{sender}.{your_signal}.connect({your_slot})\n</code></pre>\n\n<p>In your case it should be <code>self.pushButton.clicked.connect(self.selectFile)</code>, for this you must change:</p>\n\n<pre><code>def myChanges(self, MainWindow):\n    self.pushButton.connect(self.selectFile())\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>def myChanges(self, MainWindow):\n    self.pushButton.clicked.connect(self.selectFile)\n</code></pre>\n\n<ol start=\"2\">\n<li>According to the documentation:</li>\n</ol>\n\n<blockquote>\n  <p><strong>void QAbstractButton::toggled(bool checked)</strong> </p>\n  \n  <p>This signal is emitted\n  whenever a checkable button changes its state. checked is true if the\n  button is checked, or false if the button is unchecked.</p>\n  \n  <p><strong>void QAbstractButton::clicked(bool checked = false)</strong></p>\n  \n  <p>This signal is\n  emitted when the button is activated (i.e., pressed down then released\n  while the mouse cursor is inside the button), when the shortcut key is\n  typed, or when click() or animateClick() is called. Notably, this\n  signal is not emitted if you call setDown(), setChecked() or toggle().</p>\n</blockquote>\n\n<p>In the first case you must enable the checkeable with:</p>\n\n<pre><code>self.pushButton.setCheckable(True)\n</code></pre>\n\n<p>In the case of toggled this gives you a more called isChecked attribute that is alternating between True and False. For your problem it is not necessary.</p>\n\n<ol start=\"3\">\n<li>It is not necessary to pass the parameter MainWindow but you will use it. In your case you could change it to:</li>\n</ol>\n\n<hr>\n\n<pre><code>def selectFile(self):\n    filePath = QtGui.QFileDialog.getOpenFileName()\n    print(filePath)\n\ndef myChanges(self):\n    self.pushButton.clicked.connect(self.selectFile)\n</code></pre>\n"}], "owner": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 44554961, "answer_count": 1, "score": 1, "last_activity_date": 1497476214, "creation_date": 1497475014, "last_edit_date": 1497475527, "question_id": 44554862, "link": "https://stackoverflow.com/questions/44554862/pyside-why-is-file-browser-coming-up-automatically-not-after-button-press", "title": "PySide: Why is File Browser coming up automatically, not after button press?", "body": "<p>I'm trying to implement a file browser by <strong>clicking</strong> on a button. My current problem is that when I run this code, the file browser automatically comes up. </p>\n\n<p>The relevant parts are:</p>\n\n<pre><code>def myChanges(self, MainWindow):\n    self.pushButton.connect(self.selectFile())\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def selectFile(self):\n    filePath = QtGui.QFileDialog.getOpenFileName()\n    print(filePath)\n</code></pre>\n\n<p>My Questions are:</p>\n\n<ol>\n<li>How do you make it so that the file dialog only comes up after clicking on the button?</li>\n<li>Does <code>self.pushButton.toggled.connect(self.selectFile())</code> or <code>self.pushButton.clicked.connect(self.selectFile())</code> do anything differently?</li>\n<li>Does passing <code>MainWindow</code> into <code>selectFile</code> do anything differently?</li>\n</ol>\n\n<p>Full code:</p>\n\n<pre><code>from PySide import QtCore, QtGui\n\nclass Ui_MainWindow(object):\n    def selectFile(self, MainWindow):\n        filePath = QtGui.QFileDialog.getOpenFileName()\n        print(filePath)\n\n    def myChanges(self, MainWindow):\n        self.pushButton.connect(self.selectFile())\n\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.resize(800, 600)\n        self.centralwidget = QtGui.QWidget(MainWindow)\n        self.centralwidget.setObjectName(\"centralwidget\")\n        self.pushButton = QtGui.QPushButton(self.centralwidget)\n        self.pushButton.setGeometry(QtCore.QRect(30, 40, 75, 23))\n        self.pushButton.setObjectName(\"pushButton\")\n        MainWindow.setCentralWidget(self.centralwidget)\n        self.menubar = QtGui.QMenuBar(MainWindow)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))\n        self.menubar.setObjectName(\"menubar\")\n        MainWindow.setMenuBar(self.menubar)\n        self.statusbar = QtGui.QStatusBar(MainWindow)\n        self.statusbar.setObjectName(\"statusbar\")\n        MainWindow.setStatusBar(self.statusbar)\n\n        self.retranslateUi(MainWindow)\n        QtCore.QMetaObject.connectSlotsByName(MainWindow)\n\n        self.myChanges(MainWindow)\n\n    def retranslateUi(self, MainWindow):\n        MainWindow.setWindowTitle(QtGui.QApplication.translate(\"MainWindow\", \"MainWindow\", None, QtGui.QApplication.UnicodeUTF8))\n        self.pushButton.setText(QtGui.QApplication.translate(\"MainWindow\", \"PushButton\", None, QtGui.QApplication.UnicodeUTF8))\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    MainWindow = QtGui.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 731, "user_id": 7521949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thsDQ.jpg?s=128&g=1", "display_name": "RompePC", "link": "https://stackoverflow.com/users/7521949/rompepc"}, "is_accepted": false, "score": 0, "last_activity_date": 1497475360, "creation_date": 1497475360, "answer_id": 44554937, "question_id": 44554860, "link": "https://stackoverflow.com/questions/44554860/checking-to-see-if-multiple-env-variables-exist/44554937#44554937", "title": "Checking to see if multiple ENV variables exist", "body": "<p>You could always use a loop with a three items list:</p>\n\n<pre><code>for data in [\n    [\"USERNAME\", \"username\", CustomException],\n    [\"PASSWORD\", \"password\", CustomException]\n]:\n    env_var = os.environ.get(data[0])\n\n\n    if env_var:\n        setattr(self, data[1], env_var)\n    else:\n        # Should work, cannot check due to not having actually Python installed.\n        raise data[2](\"Environment variable %s not set\" % data[0])\n</code></pre>\n\n<p>If you don't like using indexes, you could replace the items by dicts like this to have a more consistent access if you change order:</p>\n\n<pre><code>{\"env_var_name\": \"USERNAME\", \"attr\": \"username\", \"exception_cls\": CustomException}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 7943201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73cfd7a76b33c5a51bb19d14f9012b30?s=128&d=identicon&r=PG&f=1", "display_name": "EthanB", "link": "https://stackoverflow.com/users/7943201/ethanb"}, "edited": false, "score": 0, "creation_date": 1497477054, "post_id": 44554956, "comment_id": 76101020, "body": "If neither are set, it shows &quot;USERNAME&quot; as not set."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 129, "user_id": 7943201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73cfd7a76b33c5a51bb19d14f9012b30?s=128&d=identicon&r=PG&f=1", "display_name": "EthanB", "link": "https://stackoverflow.com/users/7943201/ethanb"}, "edited": false, "score": 0, "creation_date": 1497478232, "post_id": 44554956, "comment_id": 76101524, "body": "@EthanB Well, yeah. That&#39;s the same thing your code does."}, {"owner": {"reputation": 129, "user_id": 7943201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73cfd7a76b33c5a51bb19d14f9012b30?s=128&d=identicon&r=PG&f=1", "display_name": "EthanB", "link": "https://stackoverflow.com/users/7943201/ethanb"}, "edited": false, "score": 0, "creation_date": 1497478586, "post_id": 44554956, "comment_id": 76101644, "body": "What I am trying to avoid is creating a match statement for each ENV variable.  I have ~10 total.  But if more than one does not exist, I want all the non-present entries to be shown in the exception."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 0, "last_activity_date": 1497475462, "creation_date": 1497475462, "answer_id": 44554956, "question_id": 44554860, "link": "https://stackoverflow.com/questions/44554860/checking-to-see-if-multiple-env-variables-exist/44554956#44554956", "title": "Checking to see if multiple ENV variables exist", "body": "<p>Just put all the environment lookups in a <code>try:</code> block:</p>\n\n<pre><code>try:\n    self.username= os.environ['USERNAME']\n    self.password= os.environ['PASSWORD']\nexcept KeyError as e:\n    raise CustomException('Environment variable {} not set'.format(e.args[0]))\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 7943201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73cfd7a76b33c5a51bb19d14f9012b30?s=128&d=identicon&r=PG&f=1", "display_name": "EthanB", "link": "https://stackoverflow.com/users/7943201/ethanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1624, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497475462, "creation_date": 1497475010, "question_id": 44554860, "link": "https://stackoverflow.com/questions/44554860/checking-to-see-if-multiple-env-variables-exist", "title": "Checking to see if multiple ENV variables exist", "body": "<p>Is there a more optimal way I can check to see if multiple ENV variables exist with customized exceptions?  Perhaps a way to match a group of EVN variables, and then have the exception self-reference the variable name in its output?</p>\n\n<pre><code>if os.environ.get('USERNAME') is not None:\n    self.username = os.environ.get('USERNAME')\nelse:\n    raise CustomException('Environment variable USERNAME not set')  \nif os.environ.get('PASSWORD') is not None:\n    self.password = os.environ.get('PASSWORD')\nelse:\n    raise CustomException('Environment variable PASSWORD not set')  \n</code></pre>\n\n<p>I am using Python 2.7.  Thanks!</p>\n"}, {"tags": ["python", "pandas", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1497475509, "post_id": 44554872, "comment_id": 76100315, "body": "Nice solution, josh.  +1"}], "tags": [], "owner": {"reputation": 3674, "user_id": 4049396, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/HFySR.jpg?s=128&g=1", "display_name": "Little Bobby Tables", "link": "https://stackoverflow.com/users/4049396/little-bobby-tables"}, "is_accepted": true, "score": 11, "last_activity_date": 1497475444, "last_edit_date": 1497475444, "creation_date": 1497475085, "answer_id": 44554872, "question_id": 44554848, "link": "https://stackoverflow.com/questions/44554848/python-pandas-flag-duplicate-rows/44554872#44554872", "title": "Python pandas: flag duplicate rows", "body": "<p>As per the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html\" rel=\"noreferrer\">docs</a> use the <code>keep</code> argument and set as <code>False</code>. As you can see it defaults to <code>first</code>.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'Column_A': ['AAA', 'AAB', 'AAB', 'AAC']})\ndf['duplicate'] = df.duplicated(keep=False)\n\nprint(df)\n\n     Column_A  duplicate\n0    'AAA'     False\n1    'AAB'     True\n2    'AAB'     True\n3    'AAC'     False\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 5, "last_activity_date": 1497475686, "creation_date": 1497475686, "answer_id": 44555014, "question_id": 44554848, "link": "https://stackoverflow.com/questions/44554848/python-pandas-flag-duplicate-rows/44555014#44555014", "title": "Python pandas: flag duplicate rows", "body": "<p>I imagine myself lost in the wilderness and all I have to survive is <code>pd.factorize</code> and <code>np.bincount</code><br>\n<em>Please, don't accept this answer</em>  </p>\n\n<pre><code>f, u = pd.factorize(df.Column_A.values)\ndf.assign(duplicate=np.bincount(f)[f] &gt; 1)\n\n  Column_A  duplicate\n0      AAA      False\n1      ABC       True\n2      ABC       True\n</code></pre>\n"}], "owner": {"reputation": 3248, "user_id": 5187157, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/grcf9.jpg?s=128&g=1", "display_name": "jeangelj", "link": "https://stackoverflow.com/users/5187157/jeangelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 0, "accepted_answer_id": 44554872, "answer_count": 2, "score": 3, "last_activity_date": 1497475686, "creation_date": 1497474914, "question_id": 44554848, "link": "https://stackoverflow.com/questions/44554848/python-pandas-flag-duplicate-rows", "title": "Python pandas: flag duplicate rows", "body": "<p>I am using the following code to denote duplicate rows</p>\n\n<pre><code>df['duplicate']=df.Column_A.duplicated()\n</code></pre>\n\n<p>However, when I look at the df, I see the following:</p>\n\n<pre><code>Column_A | duplicate\nAAA        False\nABC        False\nABC        True\n</code></pre>\n\n<p>I need row 2 to also be True, so that I can filter the row \"duplicate\" easily. How can I accomplish that? </p>\n"}, {"tags": ["python", "python-3.6"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497475080, "post_id": 44554830, "comment_id": 76100127, "body": "Have you tried cloning the github distribution into your local repo and running <code>python setup.py install</code>?"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497888684, "post_id": 44554830, "comment_id": 76256274, "body": "Yes. Same problem"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497889025, "post_id": 44554830, "comment_id": 76256474, "body": "You possibly are installing for the wrong Python version. Check to see if you have multiple versions on your comp and install it for the right one."}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497889302, "post_id": 44554830, "comment_id": 76256644, "body": "I uninstalled every version of python and reinstalled only the Anaconda distribution version. Still no results. I beleive I have ONLY python 3.6 from anaconda. But just to be sure, how can I rapidly check for the versions?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497890174, "post_id": 44554830, "comment_id": 76257106, "body": "you can open an interpreter, type: import sys; sys.version"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497890299, "post_id": 44554830, "comment_id": 76257190, "body": "3.6.1 Anaconda 64-bits. And I found this <a href=\"https://github.com/mrjbq7/ta-lib#troubleshooting\" rel=\"nofollow noreferrer\">github.com/mrjbq7/ta-lib#troubleshooting</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497891691, "post_id": 44554830, "comment_id": 76258040, "body": "Did it work? If it did, consider writing a small answer with your quick fix and marking it to help future readers. :)"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497893260, "post_id": 44554830, "comment_id": 76258924, "body": "Hum... Some what yes. I will write a small answer. Thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "is_accepted": true, "score": 2, "last_activity_date": 1497893579, "creation_date": 1497893579, "answer_id": 44636637, "question_id": 44554830, "link": "https://stackoverflow.com/questions/44554830/could-not-import-cufflinks/44636637#44636637", "title": "Could not import cufflinks", "body": "<p>From this link: <a href=\"http://github.com/mrjbq7/ta-lib#troubleshooting\" rel=\"nofollow noreferrer\">github.com/mrjbq7/ta-lib#troubleshooting</a></p>\n\n<h2>Troubleshooting</h2>\n\n<p>Sometimes installation will produce build errors like this:</p>\n\n<pre><code>func.c:256:28: fatal error: ta-lib/ta_libc.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>This typically means that it can't find the underlying TA-Lib library, a dependency which needs to be installed. On Windows, this could be caused by installing the 32-bit binary distribution of the underlying TA-Lib library, but trying to use it with 64-bit Python.</p>\n\n<h2>Windows</h2>\n\n<p>Download ta-lib-0.4.0-msvc.zip and unzip to C:\\ta-lib</p>\n\n<p>This is a 32-bit release. If you want to use 64-bit Python, you will need to build a 64-bit version of the library.</p>\n\n<h2>My Fix</h2>\n\n<p>So, for windows, we need a 64-bit version of the library? Luckly I found a lot of modules built for 32 and 64 bits python:</p>\n\n<p><a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p>\n\n<p>search for \"ta-lib\" and click on the module you need (In my case cp36 64 bits).</p>\n\n<p>Then, open the command prompt.</p>\n\n<p>Change to where you downloaded the file: <code>cd path/to/file</code> </p>\n\n<p>Type: <code>pip install NameOfFile</code> (in my case <code>pip install TA_Lib\u20110.4.10\u2011cp36\u2011cp36m\u2011win_amd64.whl</code> )</p>\n\n<p>Now the 64-bits Ta-Lib module should be installed in your machine. I tested the previous line of codes and it worked!</p>\n\n<p>Thanks for the help :)</p>\n"}, {"tags": [], "owner": {"reputation": 711, "user_id": 4493062, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--rKS26QMI3g/AAAAAAAAAAI/AAAAAAAABUk/qt799nuzi1w/photo.jpg?sz=128", "display_name": "khuang834", "link": "https://stackoverflow.com/users/4493062/khuang834"}, "is_accepted": false, "score": 3, "last_activity_date": 1498698288, "creation_date": 1498698288, "answer_id": 44814787, "question_id": 44554830, "link": "https://stackoverflow.com/questions/44554830/could-not-import-cufflinks/44814787#44814787", "title": "Could not import cufflinks", "body": "<p>try installing this version of cufflinks, it eliminated the error for me.</p>\n\n<p>pip install cufflinks==0.8.2</p>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 2635214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uuq6.png?s=128&g=1", "display_name": "jorge.santos", "link": "https://stackoverflow.com/users/2635214/jorge-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1499349720, "creation_date": 1499349720, "answer_id": 44951127, "question_id": 44554830, "link": "https://stackoverflow.com/questions/44554830/could-not-import-cufflinks/44951127#44951127", "title": "Could not import cufflinks", "body": "<p>I have now removed all dependencies on talib. All studies are pure python based now and you should not face any of this errors. </p>\n"}], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7852, "favorite_count": 0, "accepted_answer_id": 44636637, "answer_count": 3, "score": 3, "last_activity_date": 1532803453, "creation_date": 1497474828, "question_id": 44554830, "link": "https://stackoverflow.com/questions/44554830/could-not-import-cufflinks", "title": "Could not import cufflinks", "body": "<h2>Problem</h2>\n\n<p>I am trying to install both <em>plotly</em> and <em>cufflinks</em>. However I had a problem.</p>\n\n<p>The installation of both <em>plotly</em> and <em>cufflinks</em> were successful. Although, I can't import cufflinks.</p>\n\n<p>Below is a picture of the problem. It seems to be a dependency error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AT9oC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AT9oC.png\" alt=\"*Error in Jupyter Notebook*\"></a></p>\n\n<p>I tried manually downloading and installing \"talib\" but I keep getting failures. (Shown below).</p>\n\n<pre><code>talib\\common.c(240): fatal error C1083: Cannot open include file: 'ta_libc.h': No such file or directory\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\BIN\\\\x86_amd64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>Any Ideas? I tried re-installing both modules and Anaconda. Nothing So far.</p>\n\n<h2>Other infos:</h2>\n\n<ol>\n<li>Cufflinks version: 0.11.0</li>\n<li>Plotly version: 2.0.10</li>\n<li>Anaconda version: 3-4.4.0 (But I don't think it have anything to do with it)</li>\n<li>Python version: 3.6.1</li>\n</ol>\n"}, {"tags": ["python", "scrapy", "web-crawler", "scrapy-spider"], "comments": [{"owner": {"reputation": 1638, "user_id": 4478278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4df74d62fc25b8dd7f969cabf0f427d?s=128&d=identicon&r=PG", "display_name": "etemple1", "link": "https://stackoverflow.com/users/4478278/etemple1"}, "edited": false, "score": 1, "creation_date": 1497475269, "post_id": 44554790, "comment_id": 76100216, "body": "I don&#39;t think it&#39;s built into <code>scrapy</code>, but considering that the article urls <i>should</i> be in the format <code>&#47;2017&#47;06&#47;14&#47;politics&#47;two-arrested-brawl-turkish-embassy&#47;inde&zwnj;&#8203;x.html</code> have you thought about parsing the date from the url and comparing it?"}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "reply_to_user": {"reputation": 1638, "user_id": 4478278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4df74d62fc25b8dd7f969cabf0f427d?s=128&d=identicon&r=PG", "display_name": "etemple1", "link": "https://stackoverflow.com/users/4478278/etemple1"}, "edited": false, "score": 0, "creation_date": 1497475450, "post_id": 44554790, "comment_id": 76100297, "body": "@etemple1 Unfortunately, in this case <code>cnn.com</code> is just an example site and not the site I would like to scrape. Most of the sites I would like to scrape do not include the date in the URL"}, {"owner": {"reputation": 1638, "user_id": 4478278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4df74d62fc25b8dd7f969cabf0f427d?s=128&d=identicon&r=PG", "display_name": "etemple1", "link": "https://stackoverflow.com/users/4478278/etemple1"}, "edited": false, "score": 0, "creation_date": 1497475560, "post_id": 44554790, "comment_id": 76100340, "body": "Ah, ok. So how do you know the &quot;date associated&quot; with a link?"}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "reply_to_user": {"reputation": 1638, "user_id": 4478278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4df74d62fc25b8dd7f969cabf0f427d?s=128&d=identicon&r=PG", "display_name": "etemple1", "link": "https://stackoverflow.com/users/4478278/etemple1"}, "edited": false, "score": 0, "creation_date": 1497475779, "post_id": 44554790, "comment_id": 76100442, "body": "@etemple1 Well, some sites with an article list page have the date of the article listed in the article preview. Of course, with sites that don&#39;t, I would actually have to make the request, and then pull the date information from the article.... After which, if the article was a previous date void saving the article information and stop all further requests by closing the spider?"}], "answers": [{"comments": [{"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1497547381, "post_id": 44558211, "comment_id": 76135573, "body": "Thanks, but I want to see if I can use an approach without <code>deltafetch</code> as mentioned in the question but also as it uses <code>Berkeley DB</code> and I&#39;m not sure if its compatible with the <code>MongoDB</code> I want to use"}], "tags": [], "owner": {"reputation": 77, "user_id": 8112572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f5ddc5fb8c649b3d2a0642aede00ca?s=128&d=identicon&r=PG&f=1", "display_name": "graph", "link": "https://stackoverflow.com/users/8112572/graph"}, "is_accepted": false, "score": 2, "last_activity_date": 1497498622, "creation_date": 1497498622, "answer_id": 44558211, "question_id": 44554790, "link": "https://stackoverflow.com/questions/44554790/scrapy-scraping-links-by-date/44558211#44558211", "title": "Scrapy - Scraping links by date", "body": "<p>You can use a custom delta-fetch_key which checks the date and the title as the fingerprint.</p>\n\n<pre><code>from w3lib.url import url_query_parameter\n\n...\n\ndef parse(self, response):\n    ...\n    for product_url in response.css('a.product_listing'):\n        yield Request(\n            product_url,\n            meta={'deltafetch_key': url_query_parameter(product_url, 'id')},\n            callback=self.parse_product_page\n        )\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1497566166, "post_id": 44566887, "comment_id": 76144909, "body": "Thank you!! Just wondering, do you use a <code>CrawlSpider</code> when implementing this? Given that articles are in a list with the newest appearing at the top of the page, I simply wanted to close the spider when I hit the first &quot;previous&quot; date. But <code>CrawlSpider</code> doesn&#39;t parse the article links from top to bottom, meaning that it skips around the page, and I cannot stop requesting immediately. I&#39;m trying to avoid having to request all articles on the page... but given that <code>CrawlSpider</code> doesn&#39;t go in order, is that impossible?"}], "tags": [], "owner": {"reputation": 116, "user_id": 3929789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c36b4b4445798541c66e78423f89b9?s=128&d=identicon&r=PG", "display_name": "RabidCicada", "link": "https://stackoverflow.com/users/3929789/rabidcicada"}, "is_accepted": true, "score": 1, "last_activity_date": 1497527837, "creation_date": 1497527837, "answer_id": 44566887, "question_id": 44554790, "link": "https://stackoverflow.com/questions/44554790/scrapy-scraping-links-by-date/44566887#44566887", "title": "Scrapy - Scraping links by date", "body": "<p>I compose a date using <code>datetime.strptime(Item['dateinfo'], \"%b-%d-%Y\")</code> from cobbled together information on the item of interest.</p>\n\n<p>After that I just check it against a configured age in my settings, which can be overridden per invocation.  You can issue a closespider exception when you find an age that is too old or you can set a finished flag and act on that in any of your other code.</p>\n\n<p>No need for remembering stuff.  I use this on a spider that I run daily and I simply set a 24hr age limit.</p>\n"}], "owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "accepted_answer_id": 44566887, "answer_count": 2, "score": 1, "last_activity_date": 1497527837, "creation_date": 1497474600, "last_edit_date": 1497475338, "question_id": 44554790, "link": "https://stackoverflow.com/questions/44554790/scrapy-scraping-links-by-date", "title": "Scrapy - Scraping links by date", "body": "<p>Is it possible to scrape links by the date associated with them? I'm trying to implement a daily run spider that saves article information to a database, but I don't want to re-scrape articles that I have already scraped before-- i.e yesterday's articles. I ran across <a href=\"https://stackoverflow.com/questions/13245910/scrapy-how-to-scrape-daily-for-new-pages\">this</a> SO post asking the same thing and the <a href=\"https://github.com/scrapy-plugins/scrapy-deltafetch\" rel=\"nofollow noreferrer\">scrapy-deltafetch plugin</a> was suggested.</p>\n\n<p>However, this relies on checking new requests against previously saved <a href=\"https://github.com/scrapy/scrapy/blob/master/scrapy/utils/request.py#L19\" rel=\"nofollow noreferrer\">request fingerprints</a> stored in a database. I'm assuming that if the daily scraping went on for a while, there would be a need for significant memory overhead on the database to store request fingerprints that have already been scraped. </p>\n\n<p>So given a list of articles on  a site like <a href=\"http://www.cnn.com/specials/last-50-stories\" rel=\"nofollow noreferrer\">cnn.com</a>, I want to scrape all the articles that have been published today 6/14/17, but once the scraper hits later articles with a date listed as 6/13/17, I want to close the spider and stop scraping. Is this kind of approach possible with scrapy? Given a page of articles, will a <code>CrawlSpider</code> start at the top of the page and scrape articles in order? </p>\n\n<p>Just new to <code>Scrapy</code>, so not sure what to try. Any help would be greatly appreciated, thank you! </p>\n"}, {"tags": ["python", "python-3.x", "syntax", "runtime-error", "interpreter"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1497474839, "post_id": 44554778, "comment_id": 76100016, "body": "Try <code>print(str(2 + 2))</code>"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1497474842, "post_id": 44554778, "comment_id": 76100018, "body": "it responded but didn&#39;t display on console"}, {"owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475428, "post_id": 44554778, "comment_id": 76100285, "body": "It works, thanks guys!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475163, "post_id": 44554833, "comment_id": 76100169, "body": "Mhm, I am beginner so I didn&#39;t know that. In python shell 3.6 only 2+2 gives result, without print or using variables. Thank you!"}], "tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": false, "score": 1, "last_activity_date": 1497474834, "creation_date": 1497474834, "answer_id": 44554833, "question_id": 44554778, "link": "https://stackoverflow.com/questions/44554778/python-in-sublime-text-3-wont-respond-on-simple-operations/44554833#44554833", "title": "Python in Sublime Text 3 won&#39;t respond on simple operations", "body": "<p>This is normal behaviour. When running a script file, you have to use <code>print</code> to display any outputs. For example:</p>\n\n<pre><code>x = 2 + 2\nprint(x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475045, "post_id": 44554839, "comment_id": 76100111, "body": "Yea this works fine but in python shell 3.6 only : 2+2 result is 4. Thanks!"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "reply_to_user": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475128, "post_id": 44554839, "comment_id": 76100150, "body": "@thecaptainjera when you interactive with shell, it shows you the result but when you put your code in file, it only display the printing/logging lines in the terminal"}, {"owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475960, "post_id": 44554839, "comment_id": 76100520, "body": "Yea I got it, also i have problem with input : input(&quot;name:&quot;)+input(&quot;lastname:&quot;) it only shows name input and can&#39;t go on lastname?"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 2, "last_activity_date": 1497474885, "creation_date": 1497474885, "answer_id": 44554839, "question_id": 44554778, "link": "https://stackoverflow.com/questions/44554778/python-in-sublime-text-3-wont-respond-on-simple-operations/44554839#44554839", "title": "Python in Sublime Text 3 won&#39;t respond on simple operations", "body": "<p>I just didn't display on console. You can use <code>print(2+2)</code> to print out the result </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475344, "post_id": 44554854, "comment_id": 76100248, "body": "Thank you! This is very helpful as beginner in coding."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "edited": false, "score": 0, "creation_date": 1497475577, "post_id": 44554854, "comment_id": 76100348, "body": "@thecaptainjera No problem. Happy to help."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1497474953, "creation_date": 1497474953, "answer_id": 44554854, "question_id": 44554778, "link": "https://stackoverflow.com/questions/44554778/python-in-sublime-text-3-wont-respond-on-simple-operations/44554854#44554854", "title": "Python in Sublime Text 3 won&#39;t respond on simple operations", "body": "<blockquote>\n  <p>my editor Sublime Text 3 don't respond on code\n  like: 2+2</p>\n</blockquote>\n\n<p>If you want this behaviour you need to fire up a python interpreter. Sublime Text 3 does not interpret your code. It just executes your scripts.</p>\n\n<p>If you want to display output, you'll need to <code>print</code> it.</p>\n"}], "owner": {"reputation": 3, "user_id": 8162853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dfc66395465532a35e8292cbe5e9c7?s=128&d=identicon&r=PG&f=1", "display_name": "thecaptainjera", "link": "https://stackoverflow.com/users/8162853/thecaptainjera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 44554854, "answer_count": 3, "score": 0, "last_activity_date": 1497474999, "creation_date": 1497474543, "last_edit_date": 1497474999, "question_id": 44554778, "link": "https://stackoverflow.com/questions/44554778/python-in-sublime-text-3-wont-respond-on-simple-operations", "title": "Python in Sublime Text 3 won&#39;t respond on simple operations", "body": "<p>My editor Sublime Text 3 don't respond on code like: <code>2+2</code></p>\n\n<p>Here is the case\n<a href=\"https://i.stack.imgur.com/HX2h4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HX2h4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Every other code like: <code>print(\"Hello World\")</code> , works perfectly. Is there any solution or I need to change editor?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7318650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A6FZ2qUQWeU/AAAAAAAAAAI/AAAAAAAABos/JPzuolgAC4k/photo.jpg?sz=128", "display_name": "upliftedLemur", "link": "https://stackoverflow.com/users/7318650/upliftedlemur"}, "edited": false, "score": 0, "creation_date": 1497637325, "post_id": 44583967, "comment_id": 76179375, "body": "I need it per product, so the first row every group.  Your first proposal is gold.  Thank you, this is so much faster.  It was starring me in the face the whole time."}, {"owner": {"reputation": 101, "user_id": 8014573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5507cb202a9f43c25d216086b96bec4?s=128&d=identicon&r=PG&f=1", "display_name": "Milouga", "link": "https://stackoverflow.com/users/8014573/milouga"}, "reply_to_user": {"reputation": 13, "user_id": 7318650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A6FZ2qUQWeU/AAAAAAAAAAI/AAAAAAAABos/JPzuolgAC4k/photo.jpg?sz=128", "display_name": "upliftedLemur", "link": "https://stackoverflow.com/users/7318650/upliftedlemur"}, "edited": false, "score": 0, "creation_date": 1497728539, "post_id": 44583967, "comment_id": 76204300, "body": "Sorry, I wasn&#39;t clear enough. Both of my codes produce the same output (although the second should be faster). In the second code, since I used diff on the whole dataset, the first row of every group is the difference between the first row of the group and the last row of the last group, so I need to filter those out.  Also please consider accepting my answer since this is what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 101, "user_id": 8014573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5507cb202a9f43c25d216086b96bec4?s=128&d=identicon&r=PG&f=1", "display_name": "Milouga", "link": "https://stackoverflow.com/users/8014573/milouga"}, "is_accepted": true, "score": 0, "last_activity_date": 1497605091, "last_edit_date": 1497605091, "creation_date": 1497600086, "answer_id": 44583967, "question_id": 44554623, "link": "https://stackoverflow.com/questions/44554623/pandas-time-series-difference-in-time-units-with-apply-and-groupby/44583967#44583967", "title": "Pandas time series difference in time units with apply and groupby", "body": "<p>Groupby is quite slow when using apply. You should use functions implemented with the groupby object i.e. : </p>\n\n<pre><code>df['diff'] = df.groupby('Order ID')['Edit Date'].diff() / np.timedelta64(1, 'D')\ndf['sum'] = df.groupby('Order ID')['diff'].cumsum()\n</code></pre>\n\n<p><strong>Edit :</strong> \nIf this is not enough, you could also apply the diff on the whole dataset and not take the first row of every group. This should also be faster than the previous approach.</p>\n\n<pre><code>idx_wo_first = df.index.difference(df.groupby('Order ID').head(1).index)\ndf.loc[idx_wo_first, 'diff'] = df['Edit Date'].diff().loc[idx_wo_first] / np.timedelta64(1, 'D')\ndf['sum'] = df.groupby('Order ID')['diff'].cumsum()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7318650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A6FZ2qUQWeU/AAAAAAAAAAI/AAAAAAAABos/JPzuolgAC4k/photo.jpg?sz=128", "display_name": "upliftedLemur", "link": "https://stackoverflow.com/users/7318650/upliftedlemur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 44583967, "answer_count": 1, "score": 0, "last_activity_date": 1497605091, "creation_date": 1497473875, "last_edit_date": 1497474560, "question_id": 44554623, "link": "https://stackoverflow.com/questions/44554623/pandas-time-series-difference-in-time-units-with-apply-and-groupby", "title": "Pandas time series difference in time units with apply and groupby", "body": "<p>I have a product which has steps the product passes through.<br>\ni.e. data structure as:\nproduct ID, Order ID, new value, old value, edit date.</p>\n\n<p>I want the time difference and cumulative sum of time in days for product transitioning through our system.  i.e. total cycle time and inter step cycle time.</p>\n\n<p>I wrote the following code which works well, but is still slow.  I am hoping someone might provide a faster solution, as it currently takes hours to process a YTD data set with 400 million process steps.</p>\n\n<pre><code>def f(df):\n    df['diff'] = (df['Edit Date'].diff())/ np.timedelta64(1, 'D')\n    df['sum'] = df['diff'].cumsum()\n    print  len(df)\n    return df\n\nif __name__ == '__main__':\n    df = pd.read_csv('May 2017.csv')\n    df['Edit Date'] = pd.to_datetime(df['Edit Date'], format='%m/%d/%Y')\n    df.sort_values(by=['Order ID','Edit Date',]  ,kind = 'mergesort', ascending=[1,1], inplace=True)\n    df= df.groupby(['Order ID'])\n    timediffference = df.apply(f)\n</code></pre>\n\n<p>This gives me what I want, but it's slow on large data sets, which typically exceed 20 million rows on a slow month.  Wondering if there is a way to do this faster against the entire date column per order group of steps, versus trying to utilize apply.  I tried using multicore, but found that a dead end.</p>\n"}, {"tags": ["python", "comparison", "eval"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1497473962, "post_id": 44554614, "comment_id": 76099578, "body": "You could use eval or, better, a mapping to operator functions. Did you try anything? What happened?"}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474381, "post_id": 44554614, "comment_id": 76099787, "body": "but doesn&#39;t this mean that I have to convert it to string... and then I have other type of more complex classes to compare."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474452, "post_id": 44554614, "comment_id": 76099829, "body": "Convert what to string? E.g. <code>&quot;==&quot;</code> is <i>already a string</i>. And what <i>&quot;more complex classes&quot;</i> ; don&#39;t they implement <code>__eq__</code>?"}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474540, "post_id": 44554614, "comment_id": 76099878, "body": "(6,&quot;==&quot;, 7) ==&gt; &quot;6 == 7&quot;"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474625, "post_id": 44554614, "comment_id": 76099915, "body": "Oh, I see. You do to use <code>eval</code>, that&#39;s one of the reasons I said the second suggestion was better."}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474873, "post_id": 44554614, "comment_id": 76100031, "body": "and I can&#39;t convert (BlahX, &quot;==&quot;, BooY)  ==&gt; &quot;BlahX == BooY&quot;, won&#39;t work."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497474931, "post_id": 44554614, "comment_id": 76100057, "body": "If they have a working <code>__repr__</code> you can make a string that evaluates just fine with little effort, but again <i>building a mapping is better</i>. Did you do <i>any</i> research? For example <a href=\"https://stackoverflow.com/questions/18591778/how-to-pass-an-operator-to-a-python-function\" title=\"how to pass an operator to a python function\">stackoverflow.com/questions/18591778/&hellip;</a>"}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1497475860, "post_id": 44554614, "comment_id": 76100478, "body": "thanks for the link , one of the answers worked out"}], "answers": [{"comments": [{"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "edited": false, "score": 0, "creation_date": 1497478397, "post_id": 44555336, "comment_id": 76101586, "body": "as I mentioned in the comments this is the working version"}], "tags": [], "owner": {"reputation": 1104, "user_id": 7852289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00fc09e091b6b2fede915c806717d228?s=128&d=identicon&r=PG&f=1", "display_name": "Micky Loo", "link": "https://stackoverflow.com/users/7852289/micky-loo"}, "is_accepted": true, "score": 7, "last_activity_date": 1497477245, "creation_date": 1497477245, "answer_id": 44555336, "question_id": 44554614, "link": "https://stackoverflow.com/questions/44554614/eval-string-cmp-operator/44555336#44555336", "title": "eval String-cmp-operator?", "body": "<p>You should avoid using eval, use operator module instead.</p>\n\n<pre><code>import operator\nops = {\n    '&lt;': operator.lt,\n    '&lt;=': operator.le,\n    '==': operator.eq,\n    '!=': operator.ne,\n    '&gt;=': operator.ge,\n    '&gt;': operator.gt\n}\n\ndef cmp(arg1, op, arg2):\n    operation = ops.get(op)\n    return operation(arg1, arg2)\n</code></pre>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 44555336, "answer_count": 1, "score": -2, "last_activity_date": 1497477245, "creation_date": 1497473824, "last_edit_date": 1497474018, "question_id": 44554614, "link": "https://stackoverflow.com/questions/44554614/eval-string-cmp-operator", "title": "eval String-cmp-operator?", "body": "<p>Is there a way to eval the comparison where the comparison operator is passed as string. without doing alot of if-else's. F.e.</p>\n\n<pre><code> def cmp(arg1, op, arg2) : ......\n</code></pre>\n\n<p>and then :</p>\n\n<pre><code> cmp(5, \"==\", 6)\n cmp(7, \"&gt;\", 6)\n cmp(12, \"&lt;=\", 34)\n cmp(\"abc\", \"==\", \"bad\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2780, "user_id": 7992467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uhwP2.jpg?s=128&g=1", "display_name": "cookiedough", "link": "https://stackoverflow.com/users/7992467/cookiedough"}, "edited": false, "score": 0, "creation_date": 1497474573, "post_id": 44554603, "comment_id": 76099891, "body": "How about a dictionary? Check out this link <a href=\"https://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow noreferrer\">link</a> for more info."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497481028, "post_id": 44555117, "comment_id": 76102362, "body": "Is this a standalone code or i should incorporate it with mine?"}, {"owner": {"reputation": 282, "user_id": 4332130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e44cd8c4aeab640b795f205ed6f8e3be?s=128&d=identicon&r=PG&f=1", "display_name": "jsmiao", "link": "https://stackoverflow.com/users/4332130/jsmiao"}, "reply_to_user": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497491129, "post_id": 44555117, "comment_id": 76104668, "body": "I made a change to the code. You can incorporate it into yours."}, {"owner": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497527683, "post_id": 44555117, "comment_id": 76122191, "body": "Can you give me an idea of exactly how I will incorporate this into my current code."}, {"owner": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497531061, "post_id": 44555117, "comment_id": 76124510, "body": "I attempted to use your code by pasting it in and see the result I get. Nothing happens. Not even your results"}, {"owner": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497538429, "post_id": 44555117, "comment_id": 76130155, "body": "File &quot;C:/Users/cqt7wny/PycharmProjects/testapp/read.py&quot;, line 27, in &lt;module&gt;     x, y = line.split(&#39;=&#39;) ValueError: not enough values to unpack (expected 2, got 1)"}, {"owner": {"reputation": 282, "user_id": 4332130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e44cd8c4aeab640b795f205ed6f8e3be?s=128&d=identicon&r=PG&f=1", "display_name": "jsmiao", "link": "https://stackoverflow.com/users/4332130/jsmiao"}, "reply_to_user": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "edited": false, "score": 0, "creation_date": 1497555647, "post_id": 44555117, "comment_id": 76140095, "body": "What was the text it was trying to parse that resulted in the error? You could put a print statement before it. <code>print line</code>"}], "tags": [], "owner": {"reputation": 282, "user_id": 4332130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e44cd8c4aeab640b795f205ed6f8e3be?s=128&d=identicon&r=PG&f=1", "display_name": "jsmiao", "link": "https://stackoverflow.com/users/4332130/jsmiao"}, "is_accepted": false, "score": 0, "last_activity_date": 1497491080, "last_edit_date": 1497491080, "creation_date": 1497476101, "answer_id": 44555117, "question_id": 44554603, "link": "https://stackoverflow.com/questions/44554603/multidimensional-list-to-pair-similar-data-by-time/44555117#44555117", "title": "Multidimensional list to pair similar data by time", "body": "<p>This seems to work with dictionaries:</p>\n\n<pre><code>d = {}\ncount = 0\n\nfor line in file:\n    if '==' in line:\n        continue\n\n    if 'STARTED' in line:\n        start_time = line.split(' ')[-1]\n        d[count] = {'start_time': start_time}\n        continue\n\n    if 'COMPLETED' in line:\n        end_time = line.split(' ')[-1]\n        d[count].update({'end_time': end_time})\n        count += 1\n        continue\n\n    x, y = line.split('=')\n\n    x = x.strip()\n    y = y.strip()\n\n    d[count].update({x:y})\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{0: {'ADDR FOUND': '3169',\n     'ADDR NOT FND': '0',\n     'CALLS': '82',\n     'ELIG   SYS': '3762',\n     'INELIG SYS': '7',\n     'REC READ': '265',\n     'REC WRITTEN': '265',\n     'SHPR FOUND': '69',\n     'SHPR NOT FND': '3',\n     'end_time': '2017-06-07-14.35.56.067879',\n     'start_time': '2017-06-07-14.31.34.827086'},\n 1: {'ADDR FOUND': '31369',\n     'ADDR NOT FND': '10',\n     'CALLS': '32',\n     'ELIG   SYS': '762',\n     'INELIG SYS': '471',\n     'REC READ': '165',\n     'REC WRITTEN': '235',\n     'SHPR FOUND': '649',\n     'SHPR NOT FND': '23',\n     'end_time': '2017-06-07-14.35.56.067879',\n     'start_time': '2017-06-07-14.31.34.827086'}}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8162739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh4.googleusercontent.com/-8MY7LHB-neI/AAAAAAAAAAI/AAAAAAAAACI/oHobr-t9LvE/photo.jpg?sz=128", "display_name": "iNeed2LearnToEat", "link": "https://stackoverflow.com/users/8162739/ineed2learntoeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497491080, "creation_date": 1497473791, "question_id": 44554603, "link": "https://stackoverflow.com/questions/44554603/multidimensional-list-to-pair-similar-data-by-time", "title": "Multidimensional list to pair similar data by time", "body": "<p><strong>Figure A</strong> - Data given in .txt file</p>\n\n<p><strong>Figure B</strong> - My attempt to solve it. What I have been able to accomplish so far is checking the .txt and storing the appropriate records into different list. My goal is to pair each record to the time It was run/completed and transfer it into an Access database. I'm thinking about maybe taking a multidimensional list approach but completely lost on where to begin. </p>\n\n<pre><code>program1 STARTED AT 2017-06-07-14.31.34.827086\nREC READ     =   265\nREC WRITTEN  =   265\nCALLS        =     82\nSHPR FOUND   =     69\nSHPR NOT FND =         3\nADDR FOUND   =     3169\nADDR NOT FND =           0\nINELIG SYS   =           7\nELIG   SYS   =     3762\nprogram1 COMPLETED AT 2017-06-07-14.35.56.067879\n=========================================================\nprogram1 STARTED AT 2017-06-07-14.31.34.827086\nREC READ     =   165\nREC WRITTEN  =   235\nCALLS        =     32\nSHPR FOUND   =     649\nSHPR NOT FND =         23\nADDR FOUND   =     31369\nADDR NOT FND =           10\nINELIG SYS   =           471\nELIG   SYS   =     762\nprogram1 COMPLETED AT 2017-06-07-14.35.56.067879\n</code></pre>\n\n<p>My current code below (Figure B)</p>\n\n<pre><code>file = open(r\"C:\\Users\\Desktop\\joblogs.txt\", \"r\")\n\nrec_read = []\nrec_written = []\ncalls = []\nshpr_found = []\nshpr_nf = []\naddr_found = []\naddr_nf = []\ninelig_sys = []\nelig_sys = []\n\nfor line in file:\n   line = line.strip()\n   if \"REC READ\" in line:\n       line = (line.split()[-1])\n       rec_read.append(line)\n   if \"REC WRITTEN\" in line:\n       line = (line.split()[-1])\n       rec_written.append(line)\n   if \"CC01 CALLS\" in line:\n       line = (line.split()[-1])\n       calls.append(line)\n   if \"SHPR FOUND\" in line:\n       line = (line.split()[-1])\n       shpr_found.append(line)\n   if \"SHPR NOT FND\" in line:\n       line = (line.split()[-1])\n       shpr_nf.append(line)\n   if \"ADDR FOUND\" in line:\n       line = (line.split()[-1])\n       addr_found.append(line)\n   if \"ADDR NOT FND\" in line:\n       line = (line.split()[-1])\n       addr_nf.append(line)\n   if \"INELIG SYS\" in line:\n       line = (line.split()[-1])\n       inelig_sys.append(line)\n   if \"ELIG   SYS\" in line:\n       line = (line.split()[-1])\n       elig_sys.append(line)\n\n\nprint(rec_read)\nprint(rec_written)\nprint(calls)\nprint(shpr_found)\nprint(shpr_nf)\nprint(addr_found)\nprint(addr_nf)\nprint(inelig_sys)\nprint(elig_sys)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1497473219, "post_id": 44554444, "comment_id": 76099196, "body": "Shouldn&#39;t the answer be <code>[thing,thing2]</code>?"}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 1, "creation_date": 1497473261, "post_id": 44554444, "comment_id": 76099221, "body": "<code>Class</code> is invalid syntax. It should be <code>class</code>."}, {"owner": {"reputation": 455, "user_id": 5438045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb60547b3150b54bf3b0210bf1e31314?s=128&d=identicon&r=PG&f=1", "display_name": "Pear", "link": "https://stackoverflow.com/users/5438045/pear"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1497473480, "post_id": 44554444, "comment_id": 76099342, "body": "@WillemVanOnsem I want to delete the duplicated ones, the filter part was a bit confusing so I changed that"}], "answers": [{"comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1497473521, "post_id": 44554500, "comment_id": 76099374, "body": "Or, if you don&#39;t want to overwrite, do <code>unique.setdefault(x.b, x)</code>"}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1497473361, "creation_date": 1497473361, "answer_id": 44554500, "question_id": 44554444, "link": "https://stackoverflow.com/questions/44554444/python-how-to-filter-out-duplicates-in-lists-by-object-attributes/44554500#44554500", "title": "Python: how to filter out duplicates in lists by object attributes?", "body": "<p>Use a dictionary to map objects by their <code>b</code> attribute. Since the dict can contain no <code>b</code> twice, the dict's values will be your unique elements.</p>\n\n<pre><code>&gt;&gt;&gt; unique = {}\n&gt;&gt;&gt; for x in lst:\n...     unique[x.b] = x\n...\n&gt;&gt;&gt; list(unique.values())\n[&lt;__main__.a object at 0xb724cfcc&gt;, &lt;__main__.a object at 0xb724cfec&gt;]\n</code></pre>\n\n<p>Depending on whether you want to keep the first or the last unique item, either overwrite existing values (as in above code) or add a <code>if x.b not in unique</code> check before adding the items.</p>\n"}, {"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1497474880, "post_id": 44554773, "comment_id": 76100037, "body": "Try the same with <code>thing2.b = 2</code> instead of <code>thing3.b = 2</code>. This only works if elements with the same <code>key</code> value are adjacent to each other."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1497475573, "post_id": 44554773, "comment_id": 76100345, "body": "@tobias_k Good point! So here in this case i need to sort <code>lst</code> based also on its object&#39;s b value. See my last update."}], "tags": [], "owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "is_accepted": false, "score": 0, "last_activity_date": 1497475240, "last_edit_date": 1497475240, "creation_date": 1497474521, "answer_id": 44554773, "question_id": 44554444, "link": "https://stackoverflow.com/questions/44554444/python-how-to-filter-out-duplicates-in-lists-by-object-attributes/44554773#44554773", "title": "Python: how to filter out duplicates in lists by object attributes?", "body": "<p>You can use, also, <code>groupby</code> from <code>itertools</code> module, like this example:</p>\n\n<pre><code>from itertools import groupby \n\nclass A:\n    b = 1\n\nthing = A()\nthing2 = A()\nthing3 = A()\nthing3.b = 2\nlst = [thing, thing2, thing3]\n# For testing purpose\ndct_id = {id(thing): \"thing\", id(thing2): \"thing2\", id(thing3): \"thing3\"}\n# groupping based on each object's b value\nsub = [list(v)[-1] for _, v in groupby(lst, lambda x: x.b)]\n# check the groupped objects by their id\nfor k in sub:\n    print(dct_id[id(k)])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>thing2\nthing3\n</code></pre>\n\n<p><strong>Edit:</strong> Thanks to @ tobias_k's comment</p>\n\n<p>If we have this kind of objects:</p>\n\n<pre><code>thing = A()\nthing2 = A()\nthing3 = A()\nthing2.b = 2\nlst = [thing, thing2, thing3]\n</code></pre>\n\n<p>To avoid bad results, we need to <code>sort lst</code> by its object's b value. So <code>sub</code> will become:</p>\n\n<pre><code>sub = [list(v)[-1] for _, v in groupby(sorted(lst, key=lambda x: x.b), lambda x: x.b)]\n</code></pre>\n\n<p>And repeating the same test we'll have:</p>\n\n<pre><code>thing3\nthing2\n</code></pre>\n\n<p><strong>Ps:</strong> it's better to sort <code>sub</code> list in any case to avoid bad results.</p>\n"}], "owner": {"reputation": 455, "user_id": 5438045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb60547b3150b54bf3b0210bf1e31314?s=128&d=identicon&r=PG&f=1", "display_name": "Pear", "link": "https://stackoverflow.com/users/5438045/pear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 44554500, "answer_count": 2, "score": 1, "last_activity_date": 1497475240, "creation_date": 1497473108, "last_edit_date": 1497473420, "question_id": 44554444, "link": "https://stackoverflow.com/questions/44554444/python-how-to-filter-out-duplicates-in-lists-by-object-attributes", "title": "Python: how to filter out duplicates in lists by object attributes?", "body": "<p>Say I have</p>\n\n<pre><code>class a:\n    b = 1\nthing = a()\nthing2 = a()\nthing3 = a()\nthing3.b = 2\nlst = [thing,thing2,thing3]\n</code></pre>\n\n<p>And I want something like this:</p>\n\n<pre><code>lst = filter_out(obj.b==obj2.b,lst)\n</code></pre>\n\n<p>result(the objects with same attribute is filtered so that there's only one left):</p>\n\n<p><code>[thing2,thing3]</code></p>\n\n<p>How can this be achieved? As far as I know, the lambda filter wouldn't work for comparing two objects in a list.</p>\n"}, {"tags": ["python", "django", "performance", "loops", "dictionary"], "comments": [{"owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "edited": false, "score": 0, "creation_date": 1497473138, "post_id": 44554399, "comment_id": 76099149, "body": "You could try using <code>Blog.objects.values(&#39;id&#39;, &#39;name&#39;)</code> Check: <a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/dev/ref/models/querysets/&hellip;</a>"}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 1, "creation_date": 1497473200, "post_id": 44554399, "comment_id": 76099182, "body": "Can you add an overview of your data ?"}], "owner": {"reputation": 1279, "user_id": 114306, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4cb99a1d6bde3b346cb106e34e638c32?s=128&d=identicon&r=PG", "display_name": "heri0n", "link": "https://stackoverflow.com/users/114306/heri0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497472938, "creation_date": 1497472938, "question_id": 44554399, "link": "https://stackoverflow.com/questions/44554399/creating-a-dictionary-with-list-values-from-a-queryset-efficiently", "title": "Creating a dictionary with list values from a queryset efficiently", "body": "<p>Given a set of objects returned from a queryset how can I construct a dictionary with one of the objects attributes as the key and and the object itself as the value?</p>\n\n<p>The current code:</p>\n\n<pre><code>questions = Questions.objects.all()\nparent_question = defaultdict(list)\nsection_question = defaultdict(list)\n\nfor question in questions:\n    parent_question[question.parent_id].append(question)\n    section_question[question.section_id].append(question)\n</code></pre>\n\n<p>Can I improve the efficiency somehow by remove the loop? Using map or something? Or maybe modifying the query?  Or do I have to live with this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1497473020, "post_id": 44554398, "comment_id": 76099065, "body": "What do you intend the backslashes to accomplish?"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1497473104, "post_id": 44554398, "comment_id": 76099124, "body": "The \\ is interpreted as a &quot;line continuation character&quot; and can be used to split up overly long lines, hence, nothing should come after it. Did you mean / instead?"}, {"owner": {"reputation": 1, "user_id": 8162772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2959a0065862fed3856bea799a96ba91?s=128&d=identicon&r=PG&f=1", "display_name": "MTK003", "link": "https://stackoverflow.com/users/8162772/mtk003"}, "edited": false, "score": 0, "creation_date": 1497483366, "post_id": 44554398, "comment_id": 76103014, "body": "i believe I figured it out, thanks for the feedback."}], "answers": [{"tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": false, "score": 1, "last_activity_date": 1497688420, "last_edit_date": 1497688420, "creation_date": 1497473385, "answer_id": 44554508, "question_id": 44554398, "link": "https://stackoverflow.com/questions/44554398/python-error-code-unexpected-character/44554508#44554508", "title": "Python error code: unexpected character", "body": "<p>This line:</p>\n\n<pre><code>r=spi.xfer2([4\\2\\(channel&gt;&gt;2),(channel&amp;3)&lt;&lt;6,0])\n</code></pre>\n\n<p>isn't valid Python. The Python interpreter thinks the first <code>\\</code> character is a line continuation character and it should not have anything after it except a newline.</p>\n\n<p>If you are using <code>\\</code> to mean integer division (a la VB) then you need to change it to the Python equivalent, <code>//</code>.</p>\n\n<pre><code>r=spi.xfer2([4 // 2 // (channel &gt;&gt; 2),(channel &amp; 3) &lt;&lt; 6,0])\n</code></pre>\n\n<p>If not, then I think you need to explain what this code is supposed to do.</p>\n"}], "owner": {"reputation": 1, "user_id": 8162772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2959a0065862fed3856bea799a96ba91?s=128&d=identicon&r=PG&f=1", "display_name": "MTK003", "link": "https://stackoverflow.com/users/8162772/mtk003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497688420, "creation_date": 1497472933, "last_edit_date": 1497472985, "question_id": 44554398, "link": "https://stackoverflow.com/questions/44554398/python-error-code-unexpected-character", "title": "Python error code: unexpected character", "body": "<p>Can anyone help me figure out why I keep getting the error \"unexpected character after line continuation character\" with this line of code...</p>\n\n<pre><code>r=spi.xfer2([4\\2\\(channel&gt;&gt;2),(channel&amp;3)&lt;&lt;6,0])\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "linux", "docker", "installation", "boot2docker"], "owner": {"reputation": 1054, "user_id": 6227035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17b635f507d4c3334d4fd3849ae842a1?s=128&d=identicon&r=PG&f=1", "display_name": "Sim81", "link": "https://stackoverflow.com/users/6227035/sim81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497472816, "creation_date": 1497472816, "question_id": 44554354, "link": "https://stackoverflow.com/questions/44554354/extra-package-installation-in-boot2docker", "title": "Extra package installation in boot2docker", "body": "<p>I am running a virtual machine using boot2docker. I have to install extra packages (e.g Python library). I read I should use the command <code>tce-load</code> command for the installation, but when I enter this command I get already the error: <code>tce-load: command not found</code>.\nAny idea about how this can be fixed?</p>\n\n<p>Thank you very much for your help!</p>\n"}, {"tags": ["python", "web-scraping", "scrapy", "web-crawler", "scrapy-spider"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1497473785, "post_id": 44554320, "comment_id": 76099499, "body": "You will need <a href=\"https://doc.scrapy.org/en/latest/topics/item-pipeline.html#write-items-to-a-json-file\" rel=\"nofollow noreferrer\"><b>a pipeline</b></a>"}, {"owner": {"reputation": 3744, "user_id": 155726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f1d7a745c72603aceff041bae2fe5b17?s=128&d=identicon&r=PG", "display_name": "GobiasKoffi", "link": "https://stackoverflow.com/users/155726/gobiaskoffi"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1497474337, "post_id": 44554320, "comment_id": 76099757, "body": "@Jan Thanks for your input. I&#39;m still ramping up on Scrapy, so knowing what to look at in the documentation is helpful. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3744, "user_id": 155726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f1d7a745c72603aceff041bae2fe5b17?s=128&d=identicon&r=PG", "display_name": "GobiasKoffi", "link": "https://stackoverflow.com/users/155726/gobiaskoffi"}, "edited": false, "score": 0, "creation_date": 1497474354, "post_id": 44554601, "comment_id": 76099771, "body": "Thanks for your input. I&#39;ll take a peek at Feed Exports in the Scrapy Documentation."}], "tags": [], "owner": {"reputation": 41, "user_id": 7785511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c5cadc39892c5bf5d0d9571d826dde?s=128&d=identicon&r=PG&f=1", "display_name": "supernl", "link": "https://stackoverflow.com/users/7785511/supernl"}, "is_accepted": false, "score": -1, "last_activity_date": 1497473770, "creation_date": 1497473770, "answer_id": 44554601, "question_id": 44554320, "link": "https://stackoverflow.com/questions/44554320/python-scrapy-web-crawling-and-scraping/44554601#44554601", "title": "Python Scrapy web-crawling and scraping", "body": "<p>Scrapy provides this functionality out of the box with the Feed Exports, which allows you to generate a feed with the scraped items, using multiple serialization formats and storage backends.</p>\n\n<pre><code>scrapy crawl WorldSpider -o name.json -t json \n</code></pre>\n\n<p>will save the parsed items. </p>\n"}, {"tags": [], "owner": {"reputation": 6118, "user_id": 7550472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/5iSxd.jpg?s=128&g=1", "display_name": "Kaushik NP", "link": "https://stackoverflow.com/users/7550472/kaushik-np"}, "is_accepted": true, "score": 1, "last_activity_date": 1497501349, "last_edit_date": 1497501349, "creation_date": 1497500702, "answer_id": 44558530, "question_id": 44554320, "link": "https://stackoverflow.com/questions/44554320/python-scrapy-web-crawling-and-scraping/44558530#44558530", "title": "Python Scrapy web-crawling and scraping", "body": "<p>Storing data in files can be done in two ways. First is as @Jan mentioned, using the <a href=\"https://doc.scrapy.org/en/latest/topics/item-pipeline.html#write-items-to-a-json-file\" rel=\"nofollow noreferrer\">JsonWritePipeline</a>, where such method is recommended when the scrapy spider is run many times and is used to append to the file each time.</p>\n\n<p>Following is an example of such execution: </p>\n\n<pre><code>with open(filename, 'a') as f:\n          f.write(response.body)\nself.log('Saved file %s' % filename)\n</code></pre>\n\n<p>Though the simplest method is to use the <a href=\"https://doc.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-exports\" rel=\"nofollow noreferrer\">Feed Export</a> options that allows for easier implementation.</p>\n\n<blockquote>\n  <p>Feed Exports which allows you to generate a feed with the scraped items, using multiple serialization formats and storage backends.\n  For serializing the scraped data, the feed exports use the Item \n  exporters. These formats are supported out of the box:</p>\n\n<pre><code>    JSON\n    JSON lines\n    CSV\n    XML\n</code></pre>\n</blockquote>\n\n<p>Following is an example of using FileExport to store data as a JSON file:</p>\n\n<pre><code>$scrapy crawl myExample -o output.json\n</code></pre>\n\n<blockquote>\n  <p><strong>Note :</strong>  Scrapy appends to a given file instead of overwriting its contents. If\n  you run this command twice without removing the file before the second\n  time, you\u2019ll end up with a broken JSON file.</p>\n</blockquote>\n\n<p>As for the <strong>structure</strong> of data in JSON, I prefer working with <a href=\"https://doc.scrapy.org/en/latest/topics/items.html\" rel=\"nofollow noreferrer\">Item</a> as it provides you with a very clear structure in mind and with many depth JSONs is preferable for verifying the structure.</p>\n\n<p>For your implementation, the structure should be declared as :</p>\n\n<pre><code>import scrapy\n\nclass Address(scrapy.Item):\n    title = scrapy.Field()\n    latitude = scrapy.Field()\n    longitude = scrapy.Field()\n\nclass Place(scrapy.Item):\n    country = scrapy.Field()         #object of Address\n\nclass Continents(scrapy.Item):\n    name = scrapy.Field()             #array of Place\n</code></pre>\n\n<p>I'll let you figure out how to implement that ;-)</p>\n"}], "owner": {"reputation": 3744, "user_id": 155726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f1d7a745c72603aceff041bae2fe5b17?s=128&d=identicon&r=PG", "display_name": "GobiasKoffi", "link": "https://stackoverflow.com/users/155726/gobiaskoffi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 1, "accepted_answer_id": 44558530, "answer_count": 2, "score": 2, "last_activity_date": 1497501349, "creation_date": 1497472704, "question_id": 44554320, "link": "https://stackoverflow.com/questions/44554320/python-scrapy-web-crawling-and-scraping", "title": "Python Scrapy web-crawling and scraping", "body": "<p>I'm writing a Scrapy Spider to traverse through a travel website. The structure of the website is the following:</p>\n\n<pre><code>Continents\n    North America\n        USA\n            lat: 123\n            long: 456\n        Canada\n            lat: 123\n            long: 456\n    South America\n        Brazil\n            lat: 456\n            long: 789\n        Peru\n            lat: 123\n            long: 456\n</code></pre>\n\n<p>I have figured out how to crawl to each country page and grab lat/long info using the script below but what I'm having difficulty with is storing the information. </p>\n\n<pre><code>import scrapy\n\n\nclass WorldSpider(scrapy.Spider):\n    name = \"world\"\n\n    def start_requests(self):\n        urls = [\n            'www.world.com'\n        ]\n        for url in urls:\n            # yield scrapy.Request(url=url, callback=self.parse)\n            yield scrapy.Request(url=url, callback=self.parse_region)\n\n    def parse(self, response):\n        for link in response.css(CONTINENT_SELECTOR):\n            continent = link.css('a::attr(href)').extract_first()\n            if continent is not None:\n                continent = response.urljoin(continent)\n                yield response.follow(continent, callback=self.parse_continent)\n\n    def parse_continent(self, continent_response):\n        country_urls = continent_response.css(COUNTRY_SELECTOR)\n        if len(country_urls) == 0:\n            # This if-statement is entered when the Spider is at a country web page (e.g. USA, Canada, etc.).\n            # TODO figure out how to store this to text file or append to JSON object\n            yield {\n                'country': continent_response.css(TITLE_SELECTOR).extract_first(),\n                'latitude' : continent_response.css(LATITUDE_SELECTOR).extract_first(),\n                'longitude' : continent_response.css(LONGITUDE_SELECTOR).extract_first()\n            }\n\n        for link in country_urls:\n            country = link.css('a::attr(href)').extract_first()\n            if area is not None:\n                yield continent_response.follow(continent_response.urljoin(area), callback=self.parse_continent)\n</code></pre>\n\n<p>How do I write this information to a file or to a JSON object? I would ideally like the structure of the data to capture the structure of the website. </p>\n\n<p>example:</p>\n\n<pre><code>{\n    \"continents\": [\n        {\"North America\" : [\n            {\"country\" : {\"title\": \"USA\", \"latitude\" : 123, \"longitude\" : 456}},\n            {\"country\" : {\"title\": \"Canada\", \"latitude\" : 123, \"longitude\" : 456}}\n        ]},\n        {\"South America\" : [\n            {\"country\" : {\"title\": \"Brazil\", \"latitude\" : 456, \"longitude\" : 789}},\n            {\"Peru\" : {\"title\": \"Peru\", \"latitude\" : 123, \"longitude\" : 456}}\n        ]}          \n    ]\n}\n</code></pre>\n\n<p>How should I modify my Spider to achieve this above goal? </p>\n"}, {"tags": ["python", "while-loop", "raspbian", "raspberry-pi3"], "comments": [{"owner": {"reputation": 649, "user_id": 6843900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tAcBr.png?s=128&g=1", "display_name": "Tamar", "link": "https://stackoverflow.com/users/6843900/tamar"}, "edited": false, "score": 0, "creation_date": 1497472729, "post_id": 44554308, "comment_id": 76098905, "body": "replace the &quot;while True&quot; with while somevar, and change this variable to False when you want to exit the loop"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1497472805, "post_id": 44554308, "comment_id": 76098939, "body": "There is no need for things like &quot;Disclaimer: Absolute noob attempting to explain a question.&quot;. The onus of asking a proper question is on you regardless of status, and trust me when I say noobishness will show if it&#39;s there. No need to apologize for it, just take the time to listen and learn."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497473771, "post_id": 44554348, "comment_id": 76099492, "body": "Thank you. However, when I implement your solution, ctrl+c does nothing. The while loop keeps going."}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "reply_to_user": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497474875, "post_id": 44554348, "comment_id": 76100035, "body": "You need this code <i>instead</i>  of the signal handler stuff."}, {"owner": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497475781, "post_id": 44554348, "comment_id": 76100443, "body": "If I use this code instead, I get the error mentioned in the problem description."}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "reply_to_user": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497477682, "post_id": 44554348, "comment_id": 76101316, "body": "Ah, this needs to be <b>within</b> the <code>with picamera.PiCamera() as camera</code> block. I suspect recording stops automatically when you leave that block."}, {"owner": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497478875, "post_id": 44554348, "comment_id": 76101735, "body": "It is fixed. It was an indentation problem. I needed to use 4 spaces instead of tabs, because I am modifying the code using nano (I think that is the reason, don&#39;t know for sure). Thank you."}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "reply_to_user": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497495563, "post_id": 44554348, "comment_id": 76105578, "body": "A common problem! In a terminal, many will recommend vi or emacs for coding, and of course there are many IDEs that will help you avoid such problems."}], "tags": [], "owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "is_accepted": true, "score": 4, "last_activity_date": 1497472807, "creation_date": 1497472807, "answer_id": 44554348, "question_id": 44554308, "link": "https://stackoverflow.com/questions/44554308/python-how-can-i-stop-an-infinite-while-loop-and-continue-with-rest-of-code/44554348#44554348", "title": "python How can I stop an infinite while loop and continue with rest of code?", "body": "<p>This would do it:</p>\n\n<pre><code>while True:\n    try:\n        sleep(0.5)\n        print(\"still recording\")\n    except KeyboardInterrupt:\n        print(\"Ctrl+C pressed\")\n        camera.stop_recording()\n        break\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497474581, "post_id": 44554503, "comment_id": 76099897, "body": "When I try this it gives an error, which I added to the question description."}, {"owner": {"reputation": 9, "user_id": 7953603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vDnBrMl09-Q/AAAAAAAAAAI/AAAAAAAAecg/fCXR160HpM8/photo.jpg?sz=128", "display_name": "Vape Waves", "link": "https://stackoverflow.com/users/7953603/vape-waves"}, "reply_to_user": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "edited": false, "score": 0, "creation_date": 1497475102, "post_id": 44554503, "comment_id": 76100138, "body": "The code provided by @mdurant works perfectly for me, try it again and see that your indentation is correct."}], "tags": [], "owner": {"reputation": 9, "user_id": 7953603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vDnBrMl09-Q/AAAAAAAAAAI/AAAAAAAAecg/fCXR160HpM8/photo.jpg?sz=128", "display_name": "Vape Waves", "link": "https://stackoverflow.com/users/7953603/vape-waves"}, "is_accepted": false, "score": -1, "last_activity_date": 1497477065, "last_edit_date": 1497477065, "creation_date": 1497473368, "answer_id": 44554503, "question_id": 44554308, "link": "https://stackoverflow.com/questions/44554308/python-how-can-i-stop-an-infinite-while-loop-and-continue-with-rest-of-code/44554503#44554503", "title": "python How can I stop an infinite while loop and continue with rest of code?", "body": "<p><a href=\"https://i.stack.imgur.com/qvdCC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qvdCC.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see it works perfectly with @mdurant's code.</p>\n"}], "owner": {"reputation": 23, "user_id": 8007994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6fead1eb7fd288abe82832c27ca8ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Pytrik", "link": "https://stackoverflow.com/users/8007994/pytrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1396, "favorite_count": 0, "accepted_answer_id": 44554348, "answer_count": 2, "score": 2, "last_activity_date": 1497477065, "creation_date": 1497472647, "last_edit_date": 1497475844, "question_id": 44554308, "link": "https://stackoverflow.com/questions/44554308/python-how-can-i-stop-an-infinite-while-loop-and-continue-with-rest-of-code", "title": "python How can I stop an infinite while loop and continue with rest of code?", "body": "<p>The problem is that I can not exit the while loop without stopping the entire program.</p>\n\n<p>When I execute the code on my Raspberry Pi, the camera starts recording, but when I want to end the video and press Ctrl+c, the entire program stops instead of continuing after the while loop. I thought the signal handler would catch the keyboard interrupt but it does not.</p>\n\n<p>My code:</p>\n\n<pre><code>import picamera\nimport signal\nfrom time import sleep\nfrom subprocess import call\n\ndef signal_handler(signal, frame):\n        global interrupted\n        interrupted = True\n\nsignal.signal(signal.SIGINT, signal_handler)\n\ninterrupted = False\n\n# Setup the camera\nwith picamera.PiCamera() as camera:\n    camera.resolution = (1640, 922)\n    camera.framerate = 30\n\n    # Start recording\n    camera.start_recording(\"pythonVideo.h264\")\n\nwhile True:\n        sleep(0.5)\n        print(\"still recording\")\n\n        if interrupted:\n                print(\"Ctrl+C pressed\")\n                camera.stop_recording()\n                break\n\n# Stop recording\n#camera.stop_recording()\n\n# The camera is now closed.\n\nprint(\"We are going to convert the video.\")\n# Define the command we want to execute.\ncommand = \"MP4Box -add pythonVideo.h264 convertedVideo.mp4 -fps 30\"\n#Execute command.\ncall([command], shell=True)\n# Video converted.\nprint(\"Video converted.\")\n</code></pre>\n\n<p>What I tried:</p>\n\n<pre><code>bflag = True\nwhile bflag ==True:\n        sleep(0.5)\n        print(\"still recording\")\n\n        if interrupted:\n                print(\"Ctrl+C pressed\")\n                camera.stop_recording()\n                bflag = False\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>pi@raspberrypi:~/Documents/useThisFolder $ python cookieVideo.py \nstill recording\nstill recording\nstill recording\nstill recording\nstill recording\n^Cstill recording\nCtrl+C pressed\nTraceback (most recent call last):\n  File \"cookieVideo.py\", line 29, in &lt;module&gt;\n    camera.stop_recording()\n  File \"/usr/lib/python2.7/dist-packages/picamera/camera.py\", line 1193, in stop_recording\n'port %d' % splitter_port)\npicamera.exc.PiCameraNotRecording: There is no recording in progress on port 1\n</code></pre>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 8112572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f5ddc5fb8c649b3d2a0642aede00ca?s=128&d=identicon&r=PG&f=1", "display_name": "graph", "link": "https://stackoverflow.com/users/8112572/graph"}, "is_accepted": false, "score": 0, "last_activity_date": 1497499012, "creation_date": 1497499012, "answer_id": 44558275, "question_id": 44554306, "link": "https://stackoverflow.com/questions/44554306/scrapy-how-can-i-extract-text-with-hyperlink-together/44558275#44558275", "title": "Scrapy: how can I extract text with hyperlink together", "body": "<p>You can use <a href=\"https://github.com/aaronsw/html2text\" rel=\"nofollow noreferrer\">html2text</a>.</p>\n\n<pre><code>sample = response.xpath(\"//div[@class=\"group\"]//p/text()\")\nconverter = html2text.HTML2Text()\nconverter.ignore_links = True\nconverter.handle(sample)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 4454219, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0fe8957afedd73a043dd7cffe88c3493?s=128&d=identicon&r=PG&f=1", "display_name": "Verz1Lka", "link": "https://stackoverflow.com/users/4454219/verz1lka"}, "is_accepted": false, "score": 0, "last_activity_date": 1497596149, "creation_date": 1497596149, "answer_id": 44582736, "question_id": 44554306, "link": "https://stackoverflow.com/questions/44554306/scrapy-how-can-i-extract-text-with-hyperlink-together/44582736#44582736", "title": "Scrapy: how can I extract text with hyperlink together", "body": "<p>Try this:</p>\n\n<pre><code>'//div[@class=\"group\"]/p//text()[normalize-space(.)]'\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7811515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/03ea355f893a3fcea9e03a1b01acd9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/7811515/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497596149, "creation_date": 1497472644, "last_edit_date": 1497474200, "question_id": 44554306, "link": "https://stackoverflow.com/questions/44554306/scrapy-how-can-i-extract-text-with-hyperlink-together", "title": "Scrapy: how can I extract text with hyperlink together", "body": "<p>I'm crawling a professor's <a href=\"http://www.ucl.ac.uk/esps/people/academic-staff-permanent/kristin-bakke\" rel=\"nofollow noreferrer\">webpage</a>.</p>\n\n<p>Under her research description, there are two hyperlinks, which are \" TEDx UCL\" and \"here\". </p>\n\n<p>I use xpath like <code>'//div[@class=\"group\"]//p/text()'</code>\nto get the first 3 paragraphs. </p>\n\n<p>And <code>'//div[@class=\"group\"]/text()'</code> to get the last paragraph with some newlines. But these can be cleaned easily.</p>\n\n<p>The problem is the last paragraph contains only text. The hyperlinks are lost. Though I can extract them separately, it is tedious to put them back to their corresponding position.</p>\n\n<p>How can I get all the text and keep the hyperlinks?</p>\n"}, {"tags": ["python", "unix", "jupyter-notebook"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497472528, "post_id": 44554253, "comment_id": 76098796, "body": "Is <code>cat</code> available on windows?"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2822737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e78b787b4ce9ae71ff3a4c19ace12262?s=128&d=identicon&r=PG&f=1", "display_name": "medz91", "link": "https://stackoverflow.com/users/2822737/medz91"}, "edited": false, "score": 0, "creation_date": 1497473996, "post_id": 44554302, "comment_id": 76099599, "body": "Finally got it working. I thought installing Git did the job but it seems it did not but Cygwin did it for me."}, {"owner": {"reputation": 48, "user_id": 13336388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BOcYB.png?s=128&g=1", "display_name": "Aminur Rahman Ashik", "link": "https://stackoverflow.com/users/13336388/aminur-rahman-ashik"}, "edited": false, "score": 0, "creation_date": 1594030211, "post_id": 44554302, "comment_id": 110973151, "body": "how do I install it for linux?"}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 1, "last_activity_date": 1497472628, "creation_date": 1497472628, "answer_id": 44554302, "question_id": 44554253, "link": "https://stackoverflow.com/questions/44554253/unable-to-use-unix-shell-commands-in-jupyter-notebook/44554302#44554302", "title": "Unable to use unix shell commands in Jupyter notebook", "body": "<p>Windows 10 commandline does not have a <code>cat</code> command.</p>\n\n<p>You can either use the Windows 10 equivalent, ie <code>type</code>, or install a package like <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">Cygwin</a> which provides Unix-equivalent commands.</p>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 5800794, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Jvvds3CxOE/AAAAAAAAAAI/AAAAAAAAD3k/15mRgzVINlk/photo.jpg?sz=128", "display_name": "Lov Verma", "link": "https://stackoverflow.com/users/5800794/lov-verma"}, "is_accepted": false, "score": 1, "last_activity_date": 1498763797, "creation_date": 1498763797, "answer_id": 44833279, "question_id": 44554253, "link": "https://stackoverflow.com/questions/44554253/unable-to-use-unix-shell-commands-in-jupyter-notebook/44833279#44833279", "title": "Unable to use unix shell commands in Jupyter notebook", "body": "<p>There is no problem in git and Anaconda and it doesn't have to do anything with your operating version. Jupyter does not recognise all the UNIX commands instead you can use their windows equivalent and that will solve the problem.\nFor example: In place of <code>ls</code> you can use its windows equivalent i.e. <code>dir</code>\n             which will give you the same result.</p>\n\n<p>Hope this may help you!!</p>\n"}, {"tags": [], "owner": {"reputation": 2447, "user_id": 8517062, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-auUZUiM9dfU/AAAAAAAAAAI/AAAAAAAAERU/c_rkvjApznc/photo.jpg?sz=128", "display_name": "Kane Chew", "link": "https://stackoverflow.com/users/8517062/kane-chew"}, "is_accepted": false, "score": 1, "last_activity_date": 1504819514, "creation_date": 1504819514, "answer_id": 46105329, "question_id": 44554253, "link": "https://stackoverflow.com/questions/44554253/unable-to-use-unix-shell-commands-in-jupyter-notebook/46105329#46105329", "title": "Unable to use unix shell commands in Jupyter notebook", "body": "<p>I used the following command</p>\n\n<p><em>!type</em></p>\n\n<p>in place of </p>\n\n<p><em>!cat</em> </p>\n\n<p>in Windows 10 Jupyter Notebook and it worked.</p>\n"}], "owner": {"reputation": 105, "user_id": 2822737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e78b787b4ce9ae71ff3a4c19ace12262?s=128&d=identicon&r=PG&f=1", "display_name": "medz91", "link": "https://stackoverflow.com/users/2822737/medz91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3207, "favorite_count": 0, "accepted_answer_id": 44554302, "answer_count": 3, "score": 0, "last_activity_date": 1504819514, "creation_date": 1497472425, "question_id": 44554253, "link": "https://stackoverflow.com/questions/44554253/unable-to-use-unix-shell-commands-in-jupyter-notebook", "title": "Unable to use unix shell commands in Jupyter notebook", "body": "<p>I have installed Jupyter notebook and python using Anaconda. However, I have a problem when I try running any UNIX shell commands like 'cat' for example. I get the following error</p>\n\n<pre><code>'cat' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n\n<p>I tried re-installing Git and Anaconda but I still face the same issue. I am using Windows 10 by the way.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1497472356, "post_id": 44554166, "comment_id": 76098705, "body": "You should really really consider what you are doing to give you <code>df</code>. It&#39;s a huge red-flag if you have a <code>pd.DataFrame</code> that has <i>other</i> containers inside of it, especially something like a list of dicts."}, {"owner": {"reputation": 3930, "user_id": 3346095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1e61a9cdad491274a80239dcc5a1643b?s=128&d=identicon&r=PG&f=1", "display_name": "Hatshepsut", "link": "https://stackoverflow.com/users/3346095/hatshepsut"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497472487, "post_id": 44554166, "comment_id": 76098771, "body": "@juanpa.arrivillaga Nested json is the source of this. I don&#39;t know how to make <code>normalize_json()</code> solve this either."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1497472599, "post_id": 44554166, "comment_id": 76098831, "body": "@Hatshepsut, i agree with  juanpa.arrivillaga. Try to ask a new question and put there your source nested JSON file."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "edited": false, "score": 0, "creation_date": 1497472687, "post_id": 44554166, "comment_id": 76098877, "body": "@OldGeeksGuide have you tried to see what <code>df</code> contains? Hint, it&#39;s shape is <code>(2,2)</code>..."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497472711, "post_id": 44554166, "comment_id": 76098894, "body": "<code>pd.concat({k: pd.DataFrame(v) for k, v in zip(df.id, df.list_of_dicts)})</code>"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497472723, "post_id": 44554166, "comment_id": 76098901, "body": "<code>df.set_index(&#39;id&#39;).list_of_dicts.apply(pd.Series).stack().ap&zwnj;&#8203;ply(pd.Series)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1497472723, "post_id": 44554166, "comment_id": 76098902, "body": "@MaxU the column is even called <code>list_of_dicts</code>"}, {"owner": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "edited": false, "score": 0, "creation_date": 1497472734, "post_id": 44554166, "comment_id": 76098910, "body": "My bad, comment deleted."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1497472739, "post_id": 44554166, "comment_id": 76098911, "body": "Those are ugly inefficient answers.  You don&#39;t want those.  Follow @MaxU&#39;s advice and post the source and maybe we get your end goal in a better way."}, {"owner": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497475668, "post_id": 44554166, "comment_id": 76100386, "body": "@piRSquared - Agreed, not beautiful.  Changed to a more &#39;pandamic&#39; style, is that better?"}], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1497475796, "post_id": 44554476, "comment_id": 76100449, "body": "PlusOne from me.  But to be a pain... get that <code>id</code> column as the first :-)"}], "tags": [], "owner": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "is_accepted": true, "score": 1, "last_activity_date": 1497478470, "last_edit_date": 1497478470, "creation_date": 1497473268, "answer_id": 44554476, "question_id": 44554166, "link": "https://stackoverflow.com/questions/44554166/keeping-additional-column-when-normalizing-list-of-dicts/44554476#44554476", "title": "Keeping additional column when normalizing list of dicts", "body": "<p>How about something like this:</p>\n\n<pre><code>d = {\n    'list_of_dicts': [[{'a': 1, 'b': 2}, {'a': 11, 'b': 22}],\n                     [{'a': 3, 'b': 4}, {'a': 33, 'b': 44}]],\n    'id': [100, 200]\n}\n\ndf = pd.DataFrame([pd.Series(x) for ld in d['list_of_dicts'] for x in ld])\nid = [[x]*len(l) for l,x in zip(d['list_of_dicts'],d['id'])]\ndf['id'] = pd.Series([x for l in id for x in l])\n</code></pre>\n\n<p>EDIT - Here's a simpler  version</p>\n\n<pre><code>t = [[('id', i)]+list(l.items()) for i in d['id'] for ll in d['list_of_dicts'] for l in ll]\n\ndf = pd.DataFrame([dict(x) for x in t])\n</code></pre>\n\n<p>And, if you really want the <code>id</code> column first, you can change <code>dict</code> to <code>OrderedDict</code> from the <code>collections</code> module.</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1497473357, "creation_date": 1497473357, "answer_id": 44554498, "question_id": 44554166, "link": "https://stackoverflow.com/questions/44554166/keeping-additional-column-when-normalizing-list-of-dicts/44554498#44554498", "title": "Keeping additional column when normalizing list of dicts", "body": "<p>This is what I call an incomprehension</p>\n\n<pre><code>pd.DataFrame(\n    *list(map(list, zip(\n        *[(d, i) for i, l in zip(df.id, df.list_of_dicts) for d in l]\n    )))\n).rename_axis('id').reset_index()\n\n    id   a   b\n0  100   1   2\n1  100  11  22\n2  200   3   4\n3  200  33  44\n</code></pre>\n"}], "owner": {"reputation": 3930, "user_id": 3346095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1e61a9cdad491274a80239dcc5a1643b?s=128&d=identicon&r=PG&f=1", "display_name": "Hatshepsut", "link": "https://stackoverflow.com/users/3346095/hatshepsut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44554476, "answer_count": 2, "score": 0, "last_activity_date": 1497478470, "creation_date": 1497472076, "question_id": 44554166, "link": "https://stackoverflow.com/questions/44554166/keeping-additional-column-when-normalizing-list-of-dicts", "title": "Keeping additional column when normalizing list of dicts", "body": "<p>I have a dataframe containing <code>id</code> and list of dicts: </p>\n\n<pre><code>df = pd.DataFrame({\n    'list_of_dicts': [[{'a': 1, 'b': 2}, {'a': 11, 'b': 22}],\n                      [{'a': 3, 'b': 4}, {'a': 33, 'b': 44}]],\n    'id': [100, 200]\n})\n</code></pre>\n\n<p>and I want to normalize it like this:</p>\n\n<pre><code>    id   a   b\n0  100   1   2\n0  100   3   4\n1  200  11  22\n1  200  33  44\n</code></pre>\n\n<p>This gets most of the way:</p>\n\n<pre><code>pd.concat([\n    pd.DataFrame.from_dict(item)\n    for item in df.list_of_dicts\n])\n</code></pre>\n\n<p>but is missing the <code>id</code> column.</p>\n\n<p>I'm most interested in readability.</p>\n"}, {"tags": ["python", "import", "blender", "modeling", ".obj"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5500512, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510018725984961/picture?type=large", "display_name": "Vladimir Von Martel", "link": "https://stackoverflow.com/users/5500512/vladimir-von-martel"}, "edited": false, "score": 0, "creation_date": 1497533521, "post_id": 44554598, "comment_id": 76126396, "body": "That&#39;s the thing I copied the exact path in my research folder"}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "reply_to_user": {"reputation": 27, "user_id": 5500512, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510018725984961/picture?type=large", "display_name": "Vladimir Von Martel", "link": "https://stackoverflow.com/users/5500512/vladimir-von-martel"}, "edited": false, "score": 0, "creation_date": 1497560835, "post_id": 44554598, "comment_id": 76142747, "body": "Well, if you did it, it won&#39;t work inside a Python string, because (for example) <code>Data\\full_mesh</code> does not mean what you pasted in, but <code>Data&lt;formfeed&gt;ull_mesh</code>. That is because <code>\\f</code> has a special meaning in a Pyton string. I suppose I don&#39;t need to explain that you can&#39;t have a formfeed character in a Windows filename. Either use <code>os.path.join</code> as shown in the response, or, if you want to put an entire Windows path in a Python string literal, use a raw string: r&#39;Users\\vincent.martel\\Documents\\Data\\full_mesh&#39;"}], "tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": true, "score": 2, "last_activity_date": 1497473758, "creation_date": 1497473758, "answer_id": 44554598, "question_id": 44554157, "link": "https://stackoverflow.com/questions/44554157/i-want-to-import-obj-files-in-blender/44554598#44554598", "title": "I want to import obj files in blender", "body": "<p>Print out the value of your variable <code>path_to_objdir</code> and copy/paste it into a <code>dir</code> statement at the Windows console. Does it work? If not, then fix the value so that it does work. I don't have your system so I can't verify this, but the first thing I would try is</p>\n\n<pre><code>path_to_objdir = os.path.join('C:','Users','vincent.martel','Documents','Data','full_mesh')\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5500512, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510018725984961/picture?type=large", "display_name": "Vladimir Von Martel", "link": "https://stackoverflow.com/users/5500512/vladimir-von-martel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "accepted_answer_id": 44554598, "answer_count": 1, "score": 2, "last_activity_date": 1497473758, "creation_date": 1497472045, "last_edit_date": 1497472846, "question_id": 44554157, "link": "https://stackoverflow.com/questions/44554157/i-want-to-import-obj-files-in-blender", "title": "I want to import obj files in blender", "body": "<p>Right now my code is as follow:</p>\n\n<pre><code>import os\nimport bpy\n\npath_to_objdir = os.path.join('C:\\\\','Users\\vincent.martel\\Documents\\Data\\full_mesh')\nfile_list = sorted(os.listdir(path_to_objdir))\nobj_list = [item for item in file_list if item.endswith('.obj')]\nfor item in obj_list:\n    path_to_file = os.path.join(path_to_objdir, item)\n    bpy.ops.import_scene.obj(filepath = path_to_file, split_mode = \"OFF\")\n</code></pre>\n\n<p>When I run this code, the console outputs an error and highlights the line where I initialize my file_list but does not say anything else (blender console does not even name the error).</p>\n\n<p>Can anyone find a fix?</p>\n"}, {"tags": ["python", "mysql", "mysql-connector-python"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1497535577, "post_id": 44554147, "comment_id": 76127968, "body": "This seems to be using the official <a href=\"https://dev.mysql.com/doc/connector-python/en/\" rel=\"nofollow noreferrer\">mysql.connector</a> package, not SQLAlchemy."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 8121607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1MgaT.png?s=128&g=1", "display_name": "JoshKopen", "link": "https://stackoverflow.com/users/8121607/joshkopen"}, "is_accepted": true, "score": 0, "last_activity_date": 1497472291, "creation_date": 1497472291, "answer_id": 44554221, "question_id": 44554147, "link": "https://stackoverflow.com/questions/44554147/python-how-to-access-mysql-db-table-using-sqlalchemy/44554221#44554221", "title": "Python: How to access MySQL DB table using SQLAlchemy", "body": "<p>The following code should work at fetching a single value. If you realize later you need to fetch more than one value you can change fetchone() to fetchall() </p>\n\n<pre><code>try:\n\n    sql = '''\n        SELECT ticket_status FROM tickets WHERE ticket_id = 123\n                '''\n    c.execute(sql)\n    result = c.fetchone()\nexcept Exception as e:\n    raise Exception(e)\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8162642, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef82cac13b6babc06cd4f1b5960458c?s=128&d=identicon&r=PG&f=1", "display_name": "iadducchio3", "link": "https://stackoverflow.com/users/8162642/iadducchio3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 44554221, "answer_count": 1, "score": 0, "last_activity_date": 1497535644, "creation_date": 1497472003, "last_edit_date": 1497535644, "question_id": 44554147, "link": "https://stackoverflow.com/questions/44554147/python-how-to-access-mysql-db-table-using-sqlalchemy", "title": "Python: How to access MySQL DB table using SQLAlchemy", "body": "<p>I am making a python GUI that will look up the the status of a helpdesk ticket in a MySQL database. I connected python to an existing MySQL database with SQLAlchemy using the code below. </p>\n\n<pre><code>conn = mysql.connector.connect(user='root',\n                               password='stuff',host='127.0.0.1',\n                               database='mydb')\nc = conn.cursor()\n</code></pre>\n\n<p>I only need access to one of the columns, <code>ticket_id</code>,  in a table called <code>tickets</code>. Basically I want to do this: </p>\n\n<pre><code>SELECT ticket_status FROM  tickets WHERE ticket_id = 123; \n</code></pre>\n\n<p>What would be simplest way to do this?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 1415, "user_id": 8034149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8494340f27a5deedab7e35f956df63e1?s=128&d=identicon&r=PG&f=1", "display_name": "victor", "link": "https://stackoverflow.com/users/8034149/victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1497472333, "creation_date": 1497472333, "answer_id": 44554231, "question_id": 44554135, "link": "https://stackoverflow.com/questions/44554135/import-a-column-from-excel-into-python-and-run-autocorrelation-on-it/44554231#44554231", "title": "Import a column from excel into python and run autocorrelation on it", "body": "<p>You can use Pandas to import a CSV file with the <code>pd.read_csv</code> function.</p>\n"}], "owner": {"reputation": 11, "user_id": 8162710, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209147113890722/picture?type=large", "display_name": "Piyush Sharda", "link": "https://stackoverflow.com/users/8162710/piyush-sharda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497502867, "creation_date": 1497471944, "last_edit_date": 1497502867, "question_id": 44554135, "link": "https://stackoverflow.com/questions/44554135/import-a-column-from-excel-into-python-and-run-autocorrelation-on-it", "title": "Import a column from excel into python and run autocorrelation on it", "body": "<p>I have a 1 column excel file. I want to import all the values it has in a variable x (something like <code>x=[1,2,3,4.5,-6.....]</code>), then use this variable to run <code>numpy.correlate(x,x,mode='full')</code> to get autocorrelation, after I <code>import numpy</code>.</p>\n\n<p>When I manually enter <code>x=[1,2,3...]</code>, it does the job fine, but when I try to copy paste all the values in <code>x=[]</code>, it gives me a NameError: name 'NO' is not defined.</p>\n\n<p>Can someone tell me how to go around doing this?</p>\n"}, {"tags": ["python", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1497480693, "post_id": 44554215, "comment_id": 76102266, "body": "I think your first method is more or less what I was looking for (and I would probably just call it as SomeString.encode(&#39;utf-8&#39;).encode(&#39;raw_Unicode_escape&#39;).  Unfortunately, I&#39;m running Python 3, and this appears to only work in Python 2.  Specifically, in 3 it complains &quot;&#39;bytes&#39; object has no attribute &#39;encode&#39;&quot; at the second step (the step using encode(&#39;raw_unicode_escape&#39;).  I&#39;ll play with this a bit and see if I can come to grips with this diff between P2 and 3..."}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1497481343, "post_id": 44554215, "comment_id": 76102464, "body": "Turned out to be simple to fix for Python 3: just use decode() in the second step, rather than encode().  For instance (and leaving out the error testing) sString.encode(&#39;utf-8&#39;).decode(&#39;raw_unicode_escape&#39;)."}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1497481439, "post_id": 44554215, "comment_id": 76102494, "body": "I&#39;ll mark this as the solution (of the type I wanted, i.e. using built-in Python conversion, rather than parsing the string).  For anyone coming here later: See Artyer&#39;s version for Python 2, or my tiny revision for Python 3."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "reply_to_user": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1497521105, "post_id": 44554215, "comment_id": 76117914, "body": "@MikeMaxwell Oops. It was meant to be <code>decode</code>. It was just a typo. In Python2, you can just <code>decode</code> it straight away."}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": true, "score": 3, "last_activity_date": 1497521122, "last_edit_date": 1497521122, "creation_date": 1497472274, "answer_id": 44554215, "question_id": 44554126, "link": "https://stackoverflow.com/questions/44554126/converting-unicode-code-point-numbers-to-unicode-characters/44554215#44554215", "title": "converting Unicode code point numbers to Unicode characters", "body": "<p>What you may want to look at is the <code>raw_unicode_escape</code> encoding.</p>\n\n<pre><code>&gt;&gt;&gt; len(b'\\\\uffff')\n6\n&gt;&gt;&gt; b'\\\\uffff'.decode('raw_unicode_escape')\n'\\uffff'\n&gt;&gt;&gt; len(b'\\\\uffff'.decode('raw_unicode_escape'))\n1\n</code></pre>\n\n<p>So, the function would be:</p>\n\n<pre><code>def ParseString2Unicode(sInString):\n    try:\n        decoded = sInString.encode('utf-8')\n        return decoded.decode('raw_unicode_escape')\n    except UnicodeError:\n        return sInString\n</code></pre>\n\n<p>This, however, also matches other unicode escape sequences, like <code>\\Uxxxxxxxx</code>. If you just want to match <code>\\uxxxx</code>, use a regex, like so:</p>\n\n<pre><code>import re\n\nescape_sequence_re = re.compile(r'\\\\u[0-9a-fA-F]{4}')\n\ndef _escape_sequence_to_char(match):\n    return chr(int(match[0][2:], 16))\n\ndef ParseString2Unicode(sInString):\n    return re.sub(escape_sequence_re, _escape_sequence_to_char, sInString)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1497478530, "post_id": 44554245, "comment_id": 76101627, "body": "Thanks--I figured there were more concise methods of writing the function, and yours is certainly that!  I left it non-concise for clarity (and because I was lazy).  But what I&#39;m really after is a way to avoid rolling my own parser--I felt like I was missing some automagic way of doing this that didn&#39;t require writing a parser at all."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1497472391, "creation_date": 1497472391, "answer_id": 44554245, "question_id": 44554126, "link": "https://stackoverflow.com/questions/44554126/converting-unicode-code-point-numbers-to-unicode-characters/44554245#44554245", "title": "converting Unicode code point numbers to Unicode characters", "body": "<p>A concise, flexible way of handling this would be to use a regular expression:</p>\n\n<pre><code>return re.sub(\n    r\"\\\\u([0-9A-Fa-f]{4})\",\n    lambda m: chr(int(m[1], 16)),\n    sInString\n)\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 44554215, "answer_count": 2, "score": 2, "last_activity_date": 1497521122, "creation_date": 1497471903, "question_id": 44554126, "link": "https://stackoverflow.com/questions/44554126/converting-unicode-code-point-numbers-to-unicode-characters", "title": "converting Unicode code point numbers to Unicode characters", "body": "<p>I'm using the argparse library in Python 3 to read in Unicode strings from a command line parameter.  Often those strings contain \"ordinary\" Unicode characters (extended Latin, etc.), but sometimes--particularly when the characters belong to a right-to-left script--it's easier to encode the strings as Unicode code points, like \\u0644.  But argparse treats these designators as a sequence of characters, and does not convert them into the character they designate.  For instance, if a command line parameter is</p>\n\n<pre><code>... -a \"abc\\06d2d\" ...\n</code></pre>\n\n<p>then what I get in the argparse variable is</p>\n\n<pre><code>\"abc\\06d2d\"\n</code></pre>\n\n<p>rather than the expected</p>\n\n<pre><code>\"abc\u06d2d\"\n</code></pre>\n\n<p>(the character between the 'c' and 'd' is the yeh baree).  Of course both outcomes are logical, it's just that the second one is the one I want.</p>\n\n<p>I tried to reproduce this in an interpreter, but under most circumstances Python3 automagically converts a string like \"abc\\06d2d\" into \"abc\u06d2d\".  Not so when I read the string using argparse...</p>\n\n<p>I came up with a function to do the conversion, see below.  But I feel like I'm missing something much simpler.  Is there an easier way to do this conversion?  (Obviously I could use str.startswith(), or regex's to match the entire thing, rather than going character by character, but the code below is really just an illustration.  It seems like I shouldn't have to create my own function to do this at all, especially since in some circumstances it seems to happen automatically.)</p>\n\n<p>---------My code to do this follows---------</p>\n\n<pre><code>def ParseString2Unicode(sInString):\n  \"\"\"Return a version of sInString in which any Unicode code points of the form \n        \\uXXXX (X = hex digit)  \n     have been converted into their corresponding Unicode characters.\n     Example:\n         \"\\u0064b\\u0065\" \n     becomes\n         \"dbe\"\n  \"\"\"\n  sOutString = \"\"\n  while sInString:\n      if len(sInString) &gt;= 6 and \\\n         sInString[0] == \"\\\\\" and \\\n         sInString[1] == \"u\" and \\\n         sInString[2] in \"0123456789ABCDEF\" and \\\n         sInString[3] in \"0123456789ABCDEF\" and \\\n         sInString[4] in \"0123456789ABCDEF\" and \\\n         sInString[5] in \"0123456789ABCDEF\":\n          #If we get here, the first 6 characters of sInString represent\n          # a Unicode code point, like \"\\u0065\"; convert it into a char:\n          sOutString += chr(int(sInString[2:6], 16))\n          sInString = sInString[6:]\n      else:\n          #Strip a single char:\n          sOutString += sInString[0]\n          sInString = sInString[1:]\n  return sOutString        \n</code></pre>\n"}, {"tags": ["python", "opencv", "image-processing", "computer-vision"], "answers": [{"comments": [{"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 1, "creation_date": 1541978476, "post_id": 44554763, "comment_id": 93392981, "body": "This works but I can&#39;t help but feel like there&#39;s a more elegant solution involving simply specifying the cmap"}, {"owner": {"reputation": 11661, "user_id": 277267, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/F0Dwz.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/277267/daniel-f"}, "reply_to_user": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 1, "creation_date": 1610352785, "post_id": 44554763, "comment_id": 116095429, "body": "@information_interchange tbh the readability of this solution makes it very elegant."}], "tags": [], "owner": {"reputation": 2049, "user_id": 1833963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47192a89d0942a618a8f0d6008fe48c1?s=128&d=identicon&r=PG", "display_name": "Pedro Boechat", "link": "https://stackoverflow.com/users/1833963/pedro-boechat"}, "is_accepted": true, "score": 41, "last_activity_date": 1497474494, "creation_date": 1497474494, "answer_id": 44554763, "question_id": 44554125, "link": "https://stackoverflow.com/questions/44554125/python-want-to-display-red-channel-only-in-opencv/44554763#44554763", "title": "python: want to display red channel only in opencv", "body": "<p>You can just make a copy of the original image and set some channels to 0.</p>\n\n<pre><code>import cv2\n\nimage = cv2.imread('download.jpg')\n\nb = image.copy()\n# set green and red channels to 0\nb[:, :, 1] = 0\nb[:, :, 2] = 0\n\n\ng = image.copy()\n# set blue and red channels to 0\ng[:, :, 0] = 0\ng[:, :, 2] = 0\n\nr = image.copy()\n# set blue and green channels to 0\nr[:, :, 0] = 0\nr[:, :, 1] = 0\n\n\n# RGB - Blue\ncv2.imshow('B-RGB', b)\n\n# RGB - Green\ncv2.imshow('G-RGB', g)\n\n# RGB - Red\ncv2.imshow('R-RGB', r)\n\ncv2.waitKey(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 5193319, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6RZnrXKioj4/AAAAAAAAAAI/AAAAAAAAD2k/vEzMo2hPKcw/photo.jpg?sz=128", "display_name": "John Forbes", "link": "https://stackoverflow.com/users/5193319/john-forbes"}, "is_accepted": false, "score": 2, "last_activity_date": 1575264794, "creation_date": 1575264794, "answer_id": 59133167, "question_id": 44554125, "link": "https://stackoverflow.com/questions/44554125/python-want-to-display-red-channel-only-in-opencv/59133167#59133167", "title": "python: want to display red channel only in opencv", "body": "<pre><code>import cv2\nimport numpy as np\n\nchannel_initials = list('BGR')\n\nimage = cv2.imread('download.jpg')\n\nfor channel_index in range(3):\n    channel = np.zeros(shape=image.shape, dtype=np.uint8)\n    channel[:,:,channel_index] = image[:,:,channel_index]\n    cv2.imshow(f'{channel_initials[channel_index]}-RGB', channel)\ncv2.waitKey(0)\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 8036801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpbhB.jpg?s=128&g=1", "display_name": "Abeer Yosef", "link": "https://stackoverflow.com/users/8036801/abeer-yosef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54814, "favorite_count": 9, "accepted_answer_id": 44554763, "answer_count": 2, "score": 27, "last_activity_date": 1575264794, "creation_date": 1497471902, "last_edit_date": 1537227022, "question_id": 44554125, "link": "https://stackoverflow.com/questions/44554125/python-want-to-display-red-channel-only-in-opencv", "title": "python: want to display red channel only in opencv", "body": "<p>I am beginner in image processing. I am showing image in many color space the below code show the image in the 3 channels R G B however the image displayed in the gray layout. i need to display three images one with red channel as red image, another as blue, and the last one as green. thanks in advance.</p>\n\n<pre><code># cspace.py\nimport cv2\nimport numpy as np\n\nimage = cv2.imread('download.jpg')\n\n# Convert BGR to HSV\nhsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)\nhsl = cv2.cvtColor(image, cv2.COLOR_BGR2HLS) # equal to HSL\nluv = cv2.cvtColor(image, cv2.COLOR_BGR2LUV)\n\n\n#RGB - Blue\ncv2.imshow('B-RGB.jpg',image[:, :, 0])\ncv2.imwrite('B-RGB.jpg',image[:, :, 0])\n\n# RGB - Green\ncv2.imshow('G-RGB',image[:, :, 1])\ncv2.imwrite('G-RGB.jpg',image[:, :, 1])\n\n# RGB Red\ncv2.imshow('R-RGB',image[:, :, 2])\ncv2.imwrite('R-RGB.jpg',image[:, :, 2])\n\n\ncv2.waitKey(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bmMIR.jpg\" rel=\"noreferrer\">Blue image as displayed currently</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/bo2Ma.png\" rel=\"noreferrer\">i need to display blue channel like this image</a></p>\n"}, {"tags": ["python", "itertools"], "answers": [{"tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": true, "score": 5, "last_activity_date": 1497472263, "last_edit_date": 1497472263, "creation_date": 1497472174, "answer_id": 44554191, "question_id": 44554124, "link": "https://stackoverflow.com/questions/44554124/python-how-to-generate-full-factorial-combinations/44554191#44554191", "title": "Python: How to generate Full Factorial Combinations?", "body": "<p>This is called the Cartesian product as implemented by <a href=\"https://docs.python.org/3.6/library/itertools.html#itertools.product\" rel=\"nofollow noreferrer\"><code>itertools.product</code></a>.</p>\n\n<pre><code>itertools.product(X1, X2, X3, X4, X5)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 5025086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a4ea7f070c2537b63c3f259956272f0?s=128&d=identicon&r=PG&f=1", "display_name": "Divyanshu", "link": "https://stackoverflow.com/users/5025086/divyanshu"}, "is_accepted": false, "score": 4, "last_activity_date": 1497472859, "creation_date": 1497472859, "answer_id": 44554372, "question_id": 44554124, "link": "https://stackoverflow.com/questions/44554124/python-how-to-generate-full-factorial-combinations/44554372#44554372", "title": "Python: How to generate Full Factorial Combinations?", "body": "<p>Here's working code:</p>\n\n<pre><code>import itertools\nX1 = [\"L1\", \"L2\"]\nX2 = [\"L1\", \"L2\", \"L3\"]\nX3 = [\"L1\", \"L2\"]\nX4 = [\"L1\", \"L2\"]\nX5 = [\"L1\", \"L2\", \"L3\"]\nnumber=1\nfor combination in itertools.product(X1,X2,X3,X4,X5):\n    print number, combination\n    number+=1\n</code></pre>\n\n<p>You can easily modify above code to perform the required task.</p>\n"}], "owner": {"reputation": 364, "user_id": 4355232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Xm5C3.png?s=128&g=1", "display_name": "Kardo Paska", "link": "https://stackoverflow.com/users/4355232/kardo-paska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2203, "favorite_count": 0, "accepted_answer_id": 44554191, "answer_count": 2, "score": 2, "last_activity_date": 1497472859, "creation_date": 1497471899, "last_edit_date": 1497472243, "question_id": 44554124, "link": "https://stackoverflow.com/questions/44554124/python-how-to-generate-full-factorial-combinations", "title": "Python: How to generate Full Factorial Combinations?", "body": "<p>How can I use python to generate a full factorial of combinations?  Is there a fancy <code>itertools</code> function that generates a full factorial? </p>\n\n<p>I'm drawing a blank and can't think of another way to describe this other than \"full factorial of combinations\", so my search efforts have turned up with nothing relevant. What's the right terminology here? Search has turned up with combinations of certain lengths, but that's not what I'm after. The length is fixed by the number of factors. </p>\n\n<p><em>Bonus: how to exclude certain combinations? how to do for arbitrary number of factors with arbitrary number of levels with the condition that the \"levels\" are not necessarily strings but any python object?</em></p>\n\n<p>Let's say I have 5 factors, each with two or more levels.  In this case I have 3 two-level factors and 2 three-level factors.  The full factorial of combinations would have (2^3)*(3^2) = 8*9 = 72 combinations.  Keep in mind that <code>\"L1\"</code> in <code>X1</code> is different than <code>\"L1\"</code> in <code>X2</code>.</p>\n\n<p><strong>Input:</strong></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>X1 = [\"L1\", \"L2\"]\nX2 = [\"L1\", \"L2\", \"L3\"]\nX3 = [\"L1\", \"L2\"]\nX4 = [\"L1\", \"L2\"]\nX5 = [\"L1\", \"L2\", \"L3\"]\n\nfull_factorial_combinations = itertools.fancyfunction(X1, X2, X3, X4, X5)\nfull_factorial_combinations #optionally produces a generator instead of list of tuples shown here\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>[(\"L1\", \"L1\", \"L1\", \"L1\", \"L1\"),\n(\"L1\", \"L1\", \"L1\", \"L1\", \"L2\"),\n(\"L1\", \"L1\", \"L1\", \"L1\", \"L3\"),\n(\"L1\", \"L1\", \"L1\", \"L2\", \"L1\"),\n(\"L1\", \"L1\", \"L1\", \"L2\", \"L2\"),\n(\"L1\", \"L1\", \"L1\", \"L2\", \"L3\"),\n(\"L1\", \"L1\", \"L2\", \"L1\", \"L1\"),\n(\"L1\", \"L1\", \"L2\", \"L1\", \"L2\"),\n(\"L1\", \"L1\", \"L2\", \"L1\", \"L3\"),\n(\"L1\", \"L1\", \"L2\", \"L2\", \"L1\"),\n(\"L1\", \"L1\", \"L2\", \"L2\", \"L2\"),\n(\"L1\", \"L1\", \"L2\", \"L2\", \"L3\"),\n(\"L1\", \"L2\", \"L1\", \"L1\", \"L1\"),\n(\"L1\", \"L2\", \"L1\", \"L1\", \"L2\"),\n(\"L1\", \"L2\", \"L1\", \"L1\", \"L3\"),\n(\"L1\", \"L2\", \"L1\", \"L2\", \"L1\"),\n(\"L1\", \"L2\", \"L1\", \"L2\", \"L2\"),\n(\"L1\", \"L2\", \"L1\", \"L2\", \"L3\"),\n(\"L1\", \"L2\", \"L2\", \"L1\", \"L1\"),\n(\"L1\", \"L2\", \"L2\", \"L1\", \"L2\"),\n(\"L1\", \"L2\", \"L2\", \"L1\", \"L3\"),\n(\"L1\", \"L2\", \"L2\", \"L2\", \"L1\"),\n(\"L1\", \"L2\", \"L2\", \"L2\", \"L2\"),\n(\"L1\", \"L2\", \"L2\", \"L2\", \"L3\"),\n(\"L1\", \"L3\", \"L1\", \"L1\", \"L1\"),\n(\"L1\", \"L3\", \"L1\", \"L1\", \"L2\"),\n(\"L1\", \"L3\", \"L1\", \"L1\", \"L3\"),\n(\"L1\", \"L3\", \"L1\", \"L2\", \"L1\"),\n(\"L1\", \"L3\", \"L1\", \"L2\", \"L2\"),\n(\"L1\", \"L3\", \"L1\", \"L2\", \"L3\"),\n(\"L1\", \"L3\", \"L2\", \"L1\", \"L1\"),\n(\"L1\", \"L3\", \"L2\", \"L1\", \"L2\"),\n(\"L1\", \"L3\", \"L2\", \"L1\", \"L3\"),\n(\"L1\", \"L3\", \"L2\", \"L2\", \"L1\"),\n(\"L1\", \"L3\", \"L2\", \"L2\", \"L2\"),\n(\"L1\", \"L3\", \"L2\", \"L2\", \"L3\"),\n(\"L2\", \"L1\", \"L1\", \"L1\", \"L1\"),\n(\"L2\", \"L1\", \"L1\", \"L1\", \"L2\"),\n(\"L2\", \"L1\", \"L1\", \"L1\", \"L3\"),\n(\"L2\", \"L1\", \"L1\", \"L2\", \"L1\"),\n(\"L2\", \"L1\", \"L1\", \"L2\", \"L2\"),\n(\"L2\", \"L1\", \"L1\", \"L2\", \"L3\"),\n(\"L2\", \"L1\", \"L2\", \"L1\", \"L1\"),\n(\"L2\", \"L1\", \"L2\", \"L1\", \"L2\"),\n(\"L2\", \"L1\", \"L2\", \"L1\", \"L3\"),\n(\"L2\", \"L1\", \"L2\", \"L2\", \"L1\"),\n(\"L2\", \"L1\", \"L2\", \"L2\", \"L2\"),\n(\"L2\", \"L1\", \"L2\", \"L2\", \"L3\"),\n(\"L2\", \"L2\", \"L1\", \"L1\", \"L1\"),\n(\"L2\", \"L2\", \"L1\", \"L1\", \"L2\"),\n(\"L2\", \"L2\", \"L1\", \"L1\", \"L3\"),\n(\"L2\", \"L2\", \"L1\", \"L2\", \"L1\"),\n(\"L2\", \"L2\", \"L1\", \"L2\", \"L2\"),\n(\"L2\", \"L2\", \"L1\", \"L2\", \"L3\"),\n(\"L2\", \"L2\", \"L2\", \"L1\", \"L1\"),\n(\"L2\", \"L2\", \"L2\", \"L1\", \"L2\"),\n(\"L2\", \"L2\", \"L2\", \"L1\", \"L3\"),\n(\"L2\", \"L2\", \"L2\", \"L2\", \"L1\"),\n(\"L2\", \"L2\", \"L2\", \"L2\", \"L2\"),\n(\"L2\", \"L2\", \"L2\", \"L2\", \"L3\"),\n(\"L2\", \"L3\", \"L1\", \"L1\", \"L1\"),\n(\"L2\", \"L3\", \"L1\", \"L1\", \"L2\"),\n(\"L2\", \"L3\", \"L1\", \"L1\", \"L3\"),\n(\"L2\", \"L3\", \"L1\", \"L2\", \"L1\"),\n(\"L2\", \"L3\", \"L1\", \"L2\", \"L2\"),\n(\"L2\", \"L3\", \"L1\", \"L2\", \"L3\"),\n(\"L2\", \"L3\", \"L2\", \"L1\", \"L1\"),\n(\"L2\", \"L3\", \"L2\", \"L1\", \"L2\"),\n(\"L2\", \"L3\", \"L2\", \"L1\", \"L3\"),\n(\"L2\", \"L3\", \"L2\", \"L2\", \"L1\"),\n(\"L2\", \"L3\", \"L2\", \"L2\", \"L2\"),\n(\"L2\", \"L3\", \"L2\", \"L2\", \"L3\")]\n</code></pre>\n"}, {"tags": ["python", "regex", "string", "replace"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1497471752, "post_id": 44554046, "comment_id": 76098424, "body": "There is no simple way to detect if <code>hel lo</code> is one word or 2. You should probably trawl some corpuses and build a dict/set of valid words, and then assume that any invalid word you encounter is actually a single word broken into two by a space."}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 3, "creation_date": 1497471896, "post_id": 44554046, "comment_id": 76098498, "body": "It&#39;s really hard to know what a valid word is, unless you build a dictionary. For instance <code>to get her</code> is a valid set of 3 words, or an invalid set of one word (<code>together</code>) with two spaces... see the problem?"}, {"owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497471936, "post_id": 44554046, "comment_id": 76098517, "body": "@Coldspeed That would be a huge amount of work since I&#39;m parsing these lists from word documents. I was hoping there&#39;s a reasonably simple way to use regular expressions maybe. If there&#39;s not, I can live with that."}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1497472189, "post_id": 44554046, "comment_id": 76098642, "body": "I&#39;d suggest you fix your parsing so it doesn&#39;t put spaces between words that shouldn&#39;t be there"}, {"owner": {"reputation": 38493, "user_id": 2270475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ajhT1.jpg?s=128&g=1", "display_name": "Moody_Mudskipper", "link": "https://stackoverflow.com/users/2270475/moody-mudskipper"}, "edited": false, "score": 0, "creation_date": 1497472495, "post_id": 44554046, "comment_id": 76098776, "body": "I had the same issue when doing text mining from ocred PDFs. Lots of extra spaces. What I did was extract all 2-grams, then if one of the two sides was not in my dictionary (list of inflected words) AND the concatenation was, then they&#39;re proposed for manual review. I didn&#39;t do it in English though. If you find a good list of inflected English words I think I can give you a satisfying solution tomorrow"}, {"owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "reply_to_user": {"reputation": 38493, "user_id": 2270475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ajhT1.jpg?s=128&g=1", "display_name": "Moody_Mudskipper", "link": "https://stackoverflow.com/users/2270475/moody-mudskipper"}, "edited": false, "score": 0, "creation_date": 1497474133, "post_id": 44554046, "comment_id": 76099661, "body": "@Moody_Mudskipper I appreciate the offer. At this point, now that I understand the issue better ,I don&#39;t think it&#39;s worth pursuing. It&#39;s more superficial for the purpose that I&#39;m doing, so I don&#39;t think it&#39;s worth the extra effort and time."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497474287, "post_id": 44554046, "comment_id": 76099739, "body": "@ProfessionalNameForDisplayHere It is a monumental task yes, but if you are willing to make some adjustments, there are ways to do it. You should consider taking a look at my answer."}], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 8162459, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3989979d3c367e7a0768a7766c126025?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/8162459/darren"}, "is_accepted": false, "score": 0, "last_activity_date": 1497472175, "creation_date": 1497472175, "answer_id": 44554192, "question_id": 44554046, "link": "https://stackoverflow.com/questions/44554046/replace-extra-spaces-in-word-inside-string/44554192#44554192", "title": "Replace extra spaces in word inside string", "body": "<p>Try <code>\\s\\s</code> to match double spaces between two words</p>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1497474394, "last_edit_date": 1497474394, "creation_date": 1497472271, "answer_id": 44554213, "question_id": 44554046, "link": "https://stackoverflow.com/questions/44554046/replace-extra-spaces-in-word-inside-string/44554213#44554213", "title": "Replace extra spaces in word inside string", "body": "<p>Okay, the first of your issues is easily resolved. All you need to do is use regex to remove double spaces between words.</p>\n\n<pre><code>import re\nyour_text = ... # some text here\n\nyour_text_without_extra_spaces = re.sub('[\\s]+', ' ', your_text, flags=re.M)\n</code></pre>\n\n<p>The second problem isn't as simple. However, one approach you <em>could</em> do is to look for some huge english language corpuses and build a set/dict out of them. </p>\n\n<p>Or, you could use the NLTK package, and check for synsets of words in your string.</p>\n\n<pre><code>from nltk.corpus import wordnet\n\nprocessed_text = ''\ni = 0\nwords = your_text_without_extra_spaces.split()\nwhile i &lt; len(words):\n    if not wordnet.synsets(words[i]) and i &lt; len(words) - 1 and not wordnet.synsets(words[i + 1]):\n        processed_text += words[i] + words[i + 1] + ' '\n        i += 2\n    else:\n        processed_text += words[i] + ' '\n        i += 1\n</code></pre>\n\n<p>You should refer to <a href=\"http://www.velvetcache.org/2010/03/01/looking-up-words-in-a-dictionary-using-python\" rel=\"nofollow noreferrer\">this article</a> if you have trouble installing wordnet or want to try other approaches.</p>\n"}], "owner": {"reputation": 51, "user_id": 8126322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76b5d27ab667cdc8a564b593e61873cf?s=128&d=identicon&r=PG&f=1", "display_name": "ProfessionalNameForDisplayHere", "link": "https://stackoverflow.com/users/8126322/professionalnamefordisplayhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1497474394, "creation_date": 1497471619, "last_edit_date": 1592644375, "question_id": 44554046, "link": "https://stackoverflow.com/questions/44554046/replace-extra-spaces-in-word-inside-string", "title": "Replace extra spaces in word inside string", "body": "<p>I have a huge list of strings that I am iterating through to create a dictionary. I don't know what will be in each string, because it is parsed out of a document filled with tables.</p>\n<p>Sometimes a string will have extra spaces in it, or a space in the middle of a word where it didn't have that in the word document.</p>\n<p>Is there a way to detect extra spaces between a word, and extra spaces between words.</p>\n<p><strong>Example</strong></p>\n<pre><code>myString = 'I have  N o other way to get here'\nmyString = detectedDoubleSpace_After_Have_AndSpace_In_Middle_Of_No(myString.replace(stuff))\n</code></pre>\n<p>I am aware of regular expressions, the replace function, strip, lstrip, rstrip.\nBut, I don't know how I can specifically look for double spaces or spaces in the middle of a word.</p>\n<h1>Edit</h1>\n<h1>Aparently this is a monumental task since detecting what is and isn't a word is an issue, which I hadn't considered.</h1>\n"}, {"tags": ["python", "list", "elementtree"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8128039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63465e467940f90d0045ccec1b116197?s=128&d=identicon&r=PG&f=1", "display_name": "zeuscortes", "link": "https://stackoverflow.com/users/8128039/zeuscortes"}, "edited": false, "score": 0, "creation_date": 1497476098, "post_id": 44554208, "comment_id": 76100576, "body": "Thank you so much, I appreciate your help."}], "tags": [], "owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "is_accepted": true, "score": 2, "last_activity_date": 1497472244, "creation_date": 1497472244, "answer_id": 44554208, "question_id": 44554040, "link": "https://stackoverflow.com/questions/44554040/how-do-make-a-list-in-which-the-subelements-are-joined-in-python-element-tree/44554208#44554208", "title": "How do make a list in which the subelements are joined in (Python Element tree)", "body": "<p>Using find and iterating each matching element:</p>\n\n<pre><code>In [35]: from xml.etree import ElementTree\nIn [36]: xml_string = \"\"\"\n    ...: &lt;pathway&gt;\n    ...:     &lt;relation entry1=\"62\" entry2=\"64\" type=\"PPrel\"&gt;\n    ...:         &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n    ...:     &lt;/relation&gt;\n    ...:     &lt;relation entry1=\"54\" entry2=\"55\" type=\"PPrel\"&gt;\n    ...:         &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n    ...:         &lt;subtype name=\"phosphorylation\" value=\"+p\"/&gt;\n    ...:     &lt;/relation&gt;\n    ...:     &lt;relation entry1=\"55\" entry2=\"82\" type=\"PPrel\"&gt;\n    ...:         &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n    ...:         &lt;subtype name=\"phosphorylation\" value=\"+p\"/&gt;\n    ...:     &lt;/relation&gt;\n    ...: &lt;/pathway&gt;\"\"\"\n\nIn [37]: p_element = ElementTree.fromstring(xml_string)\n\nIn [38]: result = []\n\nIn [39]: for relation in p_element.findall('.//relation'):\n    ...:    result.append(';'.join(x.attrib['name'] for x in relation.findall('.//subtype')))\n    ...:\n\nIn [40]: result\nOut[40]: ['activation', 'activation;phosphorylation', 'activation;phosphorylation']\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8128039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63465e467940f90d0045ccec1b116197?s=128&d=identicon&r=PG&f=1", "display_name": "zeuscortes", "link": "https://stackoverflow.com/users/8128039/zeuscortes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 44554208, "answer_count": 1, "score": 2, "last_activity_date": 1497472244, "creation_date": 1497471594, "question_id": 44554040, "link": "https://stackoverflow.com/questions/44554040/how-do-make-a-list-in-which-the-subelements-are-joined-in-python-element-tree", "title": "How do make a list in which the subelements are joined in (Python Element tree)", "body": "<p>I have this sample XML code</p>\n\n<pre><code>&lt;pathway&gt;\n    &lt;relation entry1=\"62\" entry2=\"64\" type=\"PPrel\"&gt;\n        &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n    &lt;/relation&gt;\n    &lt;relation entry1=\"54\" entry2=\"55\" type=\"PPrel\"&gt;\n        &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n        &lt;subtype name=\"phosphorylation\" value=\"+p\"/&gt;\n    &lt;/relation&gt;\n    &lt;relation entry1=\"55\" entry2=\"82\" type=\"PPrel\"&gt;\n        &lt;subtype name=\"activation\" value=\"--&amp;gt;\"/&gt;\n        &lt;subtype name=\"phosphorylation\" value=\"+p\"/&gt;\n    &lt;/relation&gt;\n&lt;/pathway&gt;\n</code></pre>\n\n<p>I'm trying to sort the subtypes into a list, but if the entry has multiple subtypes, to combine them into one string</p>\n\n<p>Example output: \n['activation', 'activation; phosphorylation', 'activation; phosphorylation']</p>\n\n<p>My current code is</p>\n\n<pre><code>tree= ET.parse('file.xml')\nroot= tree.getroot()\nrelation = []\nfor son in root:\n    for step_son in son:\n        if len(son.getchildren()) &gt; 1:\n            relation.append(step_son.get('name'))\n        if len(son.getchildren()) &lt; 2:\n            relation.append(step_son.get('name'))\n</code></pre>\n\n<p>and my output for relation is:</p>\n\n<p>['activation', 'activation', 'phosphorylation', 'activation', phosphorylation']</p>\n\n<p>Any help would be amazing, thank you!</p>\n"}, {"tags": ["python", "python-3.x", "telegram"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 8078549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDYCV.jpg?s=128&g=1", "display_name": "Splinxyy", "link": "https://stackoverflow.com/users/8078549/splinxyy"}, "edited": false, "score": 0, "creation_date": 1497508979, "post_id": 44554424, "comment_id": 76109939, "body": "Any way of doing it without an api? I am trying to not use an API."}, {"owner": {"reputation": 2780, "user_id": 7992467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uhwP2.jpg?s=128&g=1", "display_name": "cookiedough", "link": "https://stackoverflow.com/users/7992467/cookiedough"}, "reply_to_user": {"reputation": 399, "user_id": 8078549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDYCV.jpg?s=128&g=1", "display_name": "Splinxyy", "link": "https://stackoverflow.com/users/8078549/splinxyy"}, "edited": false, "score": 0, "creation_date": 1497539906, "post_id": 44554424, "comment_id": 76131207, "body": "I added some code, check it out, see if it solves your issue."}, {"owner": {"reputation": 399, "user_id": 8078549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDYCV.jpg?s=128&g=1", "display_name": "Splinxyy", "link": "https://stackoverflow.com/users/8078549/splinxyy"}, "edited": false, "score": 0, "creation_date": 1497540040, "post_id": 44554424, "comment_id": 76131322, "body": "So, shortened, I send it in a <code>reply_markup</code> parameter to the sendmessage?"}], "tags": [], "owner": {"reputation": 2780, "user_id": 7992467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uhwP2.jpg?s=128&g=1", "display_name": "cookiedough", "link": "https://stackoverflow.com/users/7992467/cookiedough"}, "is_accepted": false, "score": 0, "last_activity_date": 1497539876, "last_edit_date": 1497539876, "creation_date": 1497473021, "answer_id": 44554424, "question_id": 44553999, "link": "https://stackoverflow.com/questions/44553999/python-button-options/44554424#44554424", "title": "Python Button Options", "body": "<p>You can simply send a custom keyboard. First you need the <code>telegram</code> <a href=\"https://github.com/python-telegram-bot\" rel=\"nofollow noreferrer\">api</a>. You can always use the <code>ReplyKeyboardMarkup</code> <a href=\"https://core.telegram.org/bots/api#replykeyboardmarkup\" rel=\"nofollow noreferrer\">command</a>. It will look something like this:</p>\n\n<pre><code>keyboard = [[\"key1\", \"key2\"], [\"return\"]]\nreply_markup = ReplyKeyboardMarkup.create(keyboard)\nbot.send_message(user_id, 'testing keyboard', reply_markup=reply_markup)\n</code></pre>\n\n<p>If you DON'T want to import anything additional (which actually would give you a lot of tools to work with if you do!) you can use the following function:</p>\n\n<pre><code>def send_keyboard(token, chat_id, text, keyboard=[], one_time=True, resize=True):\n\n    if text is None or len(text) &lt;= 0:\n        return None\n\n    post_data = {\n        \"chat_id\": chat_id,\n        \"text\": text\n    }\n\n    if len(keyboard) == 0:\n        return None\n\n    post_data[\"reply_markup\"] = {\n        \"keyboard\": keyboard,\n        \"one_time_keyboard\": one_time,\n        \"resize_keyboard\": resize\n    }\n\n    headers = {\n        \"Content-Type\": \"application/json\",\n        \"Content-Length\": len(json.dumps(post_data))\n    }\n\n    url = TELEGRAM_HOSTNAME + \"/bot\" + token + \"/sendMessage\"\n    try:\n        response = requests.post(url, headers=headers, data=json.dumps(post_data))\n    except:\n        return None\n\n    if response.status_code &gt;= 400:\n        return None\n\n    return response\n</code></pre>\n\n<p>And you just got to give it the chat_id, the token, the message text and the keys for the keyboard.</p>\n"}], "owner": {"reputation": 399, "user_id": 8078549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDYCV.jpg?s=128&g=1", "display_name": "Splinxyy", "link": "https://stackoverflow.com/users/8078549/splinxyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497539876, "creation_date": 1497471451, "last_edit_date": 1497502223, "question_id": 44553999, "link": "https://stackoverflow.com/questions/44553999/python-button-options", "title": "Python Button Options", "body": "<p>I would like to add custom buttons like the following into my telegram bot message, but I have no idea how to embed them into my message with Python</p>\n\n<p><a href=\"https://i.stack.imgur.com/nCzbm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nCzbm.png\" alt=\"\"></a></p>\n\n<p>I would like to embed it into this message</p>\n\n<pre><code>def run(results, index, msgText):\n# The message below this!\n    msg = '&lt;b&gt;Hello there, ' + results[index]['message']['from']['username'] + '!&lt;/b&gt; I am &lt;b&gt;Makuna Hattata&lt;/b&gt;, a spin-off bot of the original &lt;b&gt;Hakuna Mattata&lt;/b&gt; bot \ud83d\ude01 \\n\\nI am a semi-smart bot capable of understanding basic commands, which you can see by pressing the button below!' \n    try:\n        sendMessage(index, results, msg, '&amp;parse_mode=html')\n        logWorked(results[index]['message']['from']['username'], results[index]['message']['from']['id'], \"/start message sent\")\n    except Exception as err:\n        logError(results[index  ]['message']['from']['username'], results[index]['message']['from']['id'], \"/start message sent\", err)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1497471484, "post_id": 44553978, "comment_id": 76098290, "body": "your code has lots of issues....<code>f==1</code> won&#39;t work because <code>f</code> is a string, how are you passing <code>t</code> to <code>test2()</code> when it isn&#39;t defined in <code>main()</code>"}, {"owner": {"reputation": 1365, "user_id": 7610883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d5b2f292c46f7ef87ab8a0adb47154fa?s=128&d=identicon&r=PG&f=1", "display_name": "cmdLP", "link": "https://stackoverflow.com/users/7610883/cmdlp"}, "edited": false, "score": 0, "creation_date": 1497471589, "post_id": 44553978, "comment_id": 76098348, "body": "Use <code>global t</code> as the first line (after the doc) of the function-block, where you want to access the global variable <code>t</code>. (It is only needed if you change it. =&gt; in function <code>test()</code>)          OR           You should <code>return t</code> from test and assign the value to t in <code>main()</code>."}, {"owner": {"reputation": 1, "user_id": 7799935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bec55b37f417f6c13d6a146dead864?s=128&d=identicon&r=PG&f=1", "display_name": "Collingpc", "link": "https://stackoverflow.com/users/7799935/collingpc"}, "edited": false, "score": 0, "creation_date": 1497471715, "post_id": 44553978, "comment_id": 76098410, "body": "the string part was my bad during the testing, but the passing t is what I am trying to figure out for my problem. Could you please explain how to do that?"}, {"owner": {"reputation": 876, "user_id": 7678562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450343c85f46f6a25274b3cdae135dbb?s=128&d=identicon&r=PG&f=1", "display_name": "DatHydroGuy", "link": "https://stackoverflow.com/users/7678562/dathydroguy"}, "edited": false, "score": 0, "creation_date": 1497472321, "post_id": 44553978, "comment_id": 76098688, "body": "@Collingpc you need to add the line <code>return t</code> to the end of your <code>test()</code> function, as pointed out in the answer by @paperazzo79  This allows the value of <code>t</code> to be returned to your <code>main()</code> function.  But in order to use that value of <code>t</code> in the <code>main()</code> function, you also need to change the first line of <code>main()</code> to <code>t=test()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 876, "user_id": 7678562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450343c85f46f6a25274b3cdae135dbb?s=128&d=identicon&r=PG&f=1", "display_name": "DatHydroGuy", "link": "https://stackoverflow.com/users/7678562/dathydroguy"}, "edited": false, "score": 0, "creation_date": 1497471781, "post_id": 44554062, "comment_id": 76098444, "body": "Don&#39;t forget to update your <code>if</code> statements to check for string values as well. They should be <code>if f == &#39;1&#39;:</code> and <code>if f == &#39;2&#39;:</code>"}, {"owner": {"reputation": 1, "user_id": 7799935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bec55b37f417f6c13d6a146dead864?s=128&d=identicon&r=PG&f=1", "display_name": "Collingpc", "link": "https://stackoverflow.com/users/7799935/collingpc"}, "edited": false, "score": 0, "creation_date": 1497471903, "post_id": 44554062, "comment_id": 76098502, "body": "I change that and the int/string problem someone else pointed out but it still give the same error"}], "tags": [], "owner": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "is_accepted": false, "score": 1, "last_activity_date": 1497473187, "last_edit_date": 1497473187, "creation_date": 1497471664, "answer_id": 44554062, "question_id": 44553978, "link": "https://stackoverflow.com/questions/44553978/assignment-statement-not-carrying-over-functions-python-3-1/44554062#44554062", "title": "Assignment statement not carrying over functions python 3.1", "body": "<p>You have to return \"t\" in order to use it in test2:</p>\n\n<pre><code>def test():\n    \"\"\" takes input \"\"\"\n    f = input(\"1 or 2? \")\n    if f == '1':\n        t = \"wow\"\n    if f == '2':\n        t = \"woah\"\n    return t  # This returns the value of t to main()\n\ndef test2(t):\n    \"\"\" Uses input \"\"\"\n    print(t)\n\ndef main():\n    t = test()  # This is where the returned value of t is stored\n    test2(t)    # This is where the returned value of t is passed into test2()\n\nmain()\ninput(\"\\n\\nPress enter to exit\" )\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7799935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bec55b37f417f6c13d6a146dead864?s=128&d=identicon&r=PG&f=1", "display_name": "Collingpc", "link": "https://stackoverflow.com/users/7799935/collingpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497473187, "creation_date": 1497471358, "question_id": 44553978, "link": "https://stackoverflow.com/questions/44553978/assignment-statement-not-carrying-over-functions-python-3-1", "title": "Assignment statement not carrying over functions python 3.1", "body": "<p>I am using python 3.1 on a windows 10 device and I have ran into a problem.</p>\n\n<p>When I go to use a assignment that was defined in another function that I made, the assignment does not work. My problem is in a long line of code but I made a smaller version to help explain what is happening.</p>\n\n<pre><code>def test():\n    \"\"\" takes input \"\"\"\n    f = input(\"1 or 2? \")\n    if f == 1:\n        t = \"wow\"\n    if f == 2:\n        t = \"woah\"\n\ndef test2(t):\n    \"\"\" Uses input \"\"\"\n    print(t)\n\ndef main():\n    test()\n    test2(t)\n\nmain()\ninput(\"\\n\\nPress enter to exit\" )\n</code></pre>\n\n<p>I am not sure why the program wont use the assignment \"t\" after it selects an input.</p>\n\n<p>My goal is to use the input from the 1st function to change the outcome of the second function. of course my original program is more complicated that a simple print function but this demonstration is what I know is messing up my program. My original program deals with opening .txt files and the input is choosing which file to open.</p>\n\n<p>Any help would be greatly appreciated. </p>\n"}, {"tags": ["python", "image", "button", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1497472969, "post_id": 44554232, "comment_id": 76099038, "body": "Thank you for updating your answer with a clarification. Note the OP still has an option to create their own button if they want to use canvas for everything."}, {"owner": {"reputation": 21, "user_id": 8162568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cb4f7de4be3ea1f55febac89e4affb?s=128&d=identicon&r=PG&f=1", "display_name": "Krob Ow", "link": "https://stackoverflow.com/users/8162568/krob-ow"}, "edited": false, "score": 0, "creation_date": 1497473056, "post_id": 44554232, "comment_id": 76099085, "body": "Is there really no way to make the image transparent?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 21, "user_id": 8162568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cb4f7de4be3ea1f55febac89e4affb?s=128&d=identicon&r=PG&f=1", "display_name": "Krob Ow", "link": "https://stackoverflow.com/users/8162568/krob-ow"}, "edited": false, "score": 0, "creation_date": 1497473598, "post_id": 44554232, "comment_id": 76099412, "body": "@Krob Ow: Not using tkinter buttons. Shivam Pandya is correct about this. However there is some interesting workaround using canvas but it is a bit complicated."}], "tags": [], "owner": {"reputation": 232, "user_id": 7676362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GEd4.jpg?s=128&g=1", "display_name": "Shivam Pandya", "link": "https://stackoverflow.com/users/7676362/shivam-pandya"}, "is_accepted": true, "score": 2, "last_activity_date": 1497472794, "last_edit_date": 1497472794, "creation_date": 1497472338, "answer_id": 44554232, "question_id": 44553939, "link": "https://stackoverflow.com/questions/44553939/how-do-you-customize-tkinter-buttons/44554232#44554232", "title": "How do you customize Tkinter buttons", "body": "<p>You have to set border width to 0 to remove that rectangle \"border\". </p>\n\n<pre><code>btn = Button(window, borderwidth= 0)\n</code></pre>\n\n<p>It will do the job.</p>\n\n<p>To remove the background, you can use software like GIMP (Free and open source) or Photoshop.</p>\n\n<p>However you will. not be able to remove the button background because <em>tkinter does not support transparency</em> best practice for customized button is to make them rectangular</p>\n"}], "owner": {"reputation": 21, "user_id": 8162568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cb4f7de4be3ea1f55febac89e4affb?s=128&d=identicon&r=PG&f=1", "display_name": "Krob Ow", "link": "https://stackoverflow.com/users/8162568/krob-ow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 0, "accepted_answer_id": 44554232, "answer_count": 1, "score": 1, "last_activity_date": 1497472794, "creation_date": 1497471213, "question_id": 44553939, "link": "https://stackoverflow.com/questions/44553939/how-do-you-customize-tkinter-buttons", "title": "How do you customize Tkinter buttons", "body": "<p>there is a simple code to use an image as button, but this doesn't really do what I want...</p>\n\n<p>CODE:</p>\n\n<pre><code>from Tkinter import *\nwindow = Tk()\n\nbtn = Button(window)\npic = PhotoImage(file=\"submit.png\")\n\nbtn.config(image = pic)\nbtn.pack()\n\nwindow.configure(background = \"#29746f\")\nwindow.geometry(\"{}x{}\".format(150,100))\n\nmainloop()\n</code></pre>\n\n<p>have a look on these screenshots please:</p>\n\n<p>EXEPTATION:\n <a href=\"https://i.stack.imgur.com/joYIc.png\" rel=\"nofollow noreferrer\">what I want</a></p>\n\n<p>REALITY: \n<a href=\"https://i.stack.imgur.com/BUJaD.png\" rel=\"nofollow noreferrer\">what happens</a></p>\n\n<p>So, how to make my image transparent and how to remove the rectangle border from my button ? \nThanks.</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497471715, "post_id": 44553937, "comment_id": 76098409, "body": "My current thought is to make a pivot table..."}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497472090, "post_id": 44554120, "comment_id": 76098599, "body": "That creates an individual graph for each &#39;Speaker&#39;... I already passed a groupby argument in line 4 of my code...the main problem is getting the different colors and a legend containing the speaker&#39;s name...thanks"}, {"owner": {"reputation": 2216, "user_id": 3861108, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c8c2dd0d2bc8b5183de9530c1d8c5b3f?s=128&d=identicon&r=PG&f=1", "display_name": "Dimgold", "link": "https://stackoverflow.com/users/3861108/dimgold"}, "reply_to_user": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497472386, "post_id": 44554120, "comment_id": 76098725, "body": "Yes, thats adds a level of comlexity to your graph. Personally I would prefer to use seaborn, as shown <a href=\"http://seaborn.pydata.org/examples/timeseries_from_dataframe.html\" rel=\"nofollow noreferrer\">here</a> but I&#39;ll be happy to see a built in elegant pandas solution as well"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1497473482, "post_id": 44554120, "comment_id": 76099344, "body": "Seaborn is a great package.  You don&#39;t need to do the data manipulate as you do with pandas plot."}], "tags": [], "owner": {"reputation": 2216, "user_id": 3861108, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c8c2dd0d2bc8b5183de9530c1d8c5b3f?s=128&d=identicon&r=PG&f=1", "display_name": "Dimgold", "link": "https://stackoverflow.com/users/3861108/dimgold"}, "is_accepted": false, "score": 1, "last_activity_date": 1497471888, "creation_date": 1497471888, "answer_id": 44554120, "question_id": 44553937, "link": "https://stackoverflow.com/questions/44553937/creating-legend-for-graph-with-multiple-lines-representing-a-group/44554120#44554120", "title": "Creating legend for graph with multiple lines representing a &#39;group&#39;", "body": "<p>Try to <code>groupby</code> by speaker and then plot as described <a href=\"http://pandas.pydata.org/pandas-docs/version/0.16.2/generated/pandas.core.groupby.DataFrameGroupBy.plot.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497472479, "post_id": 44554194, "comment_id": 76098766, "body": "Yup, that does it -- thanks! One follow up question: how do you move the location of the legend? (I can also google it :p) Thanks again!"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497472625, "post_id": 44554194, "comment_id": 76098848, "body": "<a href=\"https://stackoverflow.com/questions/11348183/pandas-bar-plot-with-specific-colors-and-legend-location?answertab=oldest#tab-top\" title=\"pandas bar plot with specific colors and legend location\">stackoverflow.com/questions/11348183/&hellip;</a>"}, {"owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497473204, "post_id": 44554194, "comment_id": 76099187, "body": "Thanks, I&#39;m still working on it but this is really helpful :)"}, {"owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "edited": false, "score": 0, "creation_date": 1497473397, "post_id": 44554194, "comment_id": 76099305, "body": "Got it now! Thanks!!"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1497472183, "creation_date": 1497472183, "answer_id": 44554194, "question_id": 44553937, "link": "https://stackoverflow.com/questions/44553937/creating-legend-for-graph-with-multiple-lines-representing-a-group/44554194#44554194", "title": "Creating legend for graph with multiple lines representing a &#39;group&#39;", "body": "<p>Let's try something like this:</p>\n\n<pre><code>df.pivot_table(values='Flesch',index='Date',columns='Speaker').reset_index().plot(x='Date',colormap= cm.cubehelix)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6qd7Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6qd7Z.png\" alt=\"enter image description here\"></a></p>\n\n<p>(I just added that marker to show those single points in your test data.)</p>\n"}], "owner": {"reputation": 767, "user_id": 7799888, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1952677131618556/picture?type=large", "display_name": "Graham Streich", "link": "https://stackoverflow.com/users/7799888/graham-streich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 44554194, "answer_count": 2, "score": 2, "last_activity_date": 1497472183, "creation_date": 1497471210, "last_edit_date": 1497471408, "question_id": 44553937, "link": "https://stackoverflow.com/questions/44553937/creating-legend-for-graph-with-multiple-lines-representing-a-group", "title": "Creating legend for graph with multiple lines representing a &#39;group&#39;", "body": "<p>From a dataframe in pandas 'g' I have the following data:</p>\n\n<pre><code>index    Speaker          Date        ARI     Flesch    Kincaid  \n0        Alan Greenspan   1996  15.234878  34.669383  14.533217   \n1        Alan Greenspan   1997  16.235605  31.415163  15.335869    \n11       Alan S. Blinder  2002  14.299481  41.847836  13.681203         \n12       Alan S. Blinder  2003        NaN        NaN        NaN     \n14       Alice M. Rivlin  1996  15.828971  33.394999  15.211662  \n</code></pre>\n\n<p>With the code below I have been able to produce the following graph:</p>\n\n<pre><code>s = data\ns['Date'] =  pd.to_datetime(s['Date'], format='%Y-%m-%d %H:%M:%S')\ns = s.set_index(['Date'])\ngrouped = s.groupby('Speaker').resample('AS').mean()\ngrouped = grouped.reset_index()\ng = grouped.reset_index()\ng[\"Date\"] = g[\"Date\"].dt.year\ng.plot(x='Date', y='Flesch', colormap = cm.cubehelix, legend=True, \ntitle=\"Auto\", figsize=(12,10))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SRalt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SRalt.png\" alt=\"My current graph\"></a></p>\n\n<p>I would like the graph to include different colors for each line and place a legend that notes which \"Speaker\" is associated with each line. Any help would be appreciated!</p>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 4, "creation_date": 1497471341, "post_id": 44553929, "comment_id": 76098229, "body": "Please don&#39;t post code and errors as images. They are text so paste them in the question and format accordingly."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1497471456, "post_id": 44553929, "comment_id": 76098284, "body": "How do you mean? Length of the value? Is it the number of digits? Please be clear and format your question accordingly."}, {"owner": {"reputation": 485, "user_id": 7813242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e24d95f2782513437fe63ffaf8ee19?s=128&d=identicon&r=PG&f=1", "display_name": "wpedrak", "link": "https://stackoverflow.com/users/7813242/wpedrak"}, "edited": false, "score": 0, "creation_date": 1497471707, "post_id": 44553929, "comment_id": 76098405, "body": "Please, tell us how map1 looks."}, {"owner": {"reputation": 3063, "user_id": 5075720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNyMGvaELDs/AAAAAAAAAAI/AAAAAAAAVnw/P1Rt8TFE2gc/photo.jpg?sz=128", "display_name": "PaSTE", "link": "https://stackoverflow.com/users/5075720/paste"}, "edited": false, "score": 1, "creation_date": 1497471754, "post_id": 44553929, "comment_id": 76098425, "body": "Welcome to StackOverflow, @Eno!  Could you please post a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a> to help identify the source of the error?  The image you posted does not contain enough information to tell us whence the values of the dict come."}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 6363222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3_HHQ6ORxk/AAAAAAAAAAI/AAAAAAAABQc/MMH-yLibatA/photo.jpg?sz=128", "display_name": "PhoenixFireFlite", "link": "https://stackoverflow.com/users/6363222/phoenixfireflite"}, "is_accepted": false, "score": 2, "last_activity_date": 1497471411, "creation_date": 1497471411, "answer_id": 44553993, "question_id": 44553929, "link": "https://stackoverflow.com/questions/44553929/why-numpy-int64-object-is-not-callable-here/44553993#44553993", "title": "Why &#39;numpy.int64&#39; object is not callable here", "body": "<p>You are trying to get the length of an integer, which you can't do in Python. You should do print(len(str(val))) if you really want to find the length of an integer.</p>\n"}], "owner": {"reputation": 1, "user_id": 8162670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259c810f42a3f3397a88640f8331975c?s=128&d=identicon&r=PG&f=1", "display_name": "Eno", "link": "https://stackoverflow.com/users/8162670/eno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2640, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1497479283, "creation_date": 1497471185, "last_edit_date": 1497479283, "question_id": 44553929, "link": "https://stackoverflow.com/questions/44553929/why-numpy-int64-object-is-not-callable-here", "title": "Why &#39;numpy.int64&#39; object is not callable here", "body": "<p>I would like to print the length of the value, but how there is such a error? Thx!</p>\n\n<pre><code>index = 1\nfor key in map1.keys():\n    val = map1[key]\n    if(index == 1):\n\n        print(len(val))\n    index = index+1\n</code></pre>\n\n<blockquote>\n  <p>'numpy.int64'\n   object is not callable</p>\n</blockquote>\n\n<p><img src=\"https://i.stack.imgur.com/kF16O.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1497471238, "post_id": 44553925, "comment_id": 76098159, "body": "But it emits 5 items, it does not emit tuples of five elements?"}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1497471337, "post_id": 44553925, "comment_id": 76098225, "body": "can you show what exactly batch generator is returning"}, {"owner": {"reputation": 1307, "user_id": 1810854, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d0cf43e5ce140187294075dd02796cc?s=128&d=identicon&r=PG", "display_name": "Jess", "link": "https://stackoverflow.com/users/1810854/jess"}, "edited": false, "score": 0, "creation_date": 1497471352, "post_id": 44553925, "comment_id": 76098242, "body": "I&#39;m not sure what you mean -- is there a difference? My yield statement looks like <code>yield a, b, c, d, e</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1307, "user_id": 1810854, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d0cf43e5ce140187294075dd02796cc?s=128&d=identicon&r=PG", "display_name": "Jess", "link": "https://stackoverflow.com/users/1810854/jess"}, "edited": false, "score": 0, "creation_date": 1497471570, "post_id": 44553990, "comment_id": 76098335, "body": "Ah, what a simple fix I overlooked -- thanks so much for the clear explanation!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 5, "last_activity_date": 1497472638, "last_edit_date": 1497472638, "creation_date": 1497471399, "answer_id": 44553990, "question_id": 44553925, "link": "https://stackoverflow.com/questions/44553925/looping-through-a-generator-that-returns-multiple-values/44553990#44553990", "title": "Looping through a generator that returns multiple values", "body": "<blockquote>\n  <p>My yield statement looks like <code>yield a, b, c, d, e</code></p>\n</blockquote>\n\n<p>Based on that comment, the generator seems to emit a sequence of 5-tuples.</p>\n\n<p>You can then simply use:</p>\n\n<pre><code>for a, b, c, d, e in batch_generator:\n    #                ^ no next(..)\n    pass\n</code></pre>\n\n<p>So you should <strong>not use <code>next(..)</code>. Next simply returns the next <code>yield</code></strong>. Now since that is a tuple, the <code>for</code> loop will <strong>iterate over the tuple</strong>, instead of the generator.</p>\n\n<p>The <code>for</code> loop will iterate over the tuples the generator <code>batch_generator</code> emits, until the generator is exhausted (or there is a <code>break</code>/<code>return</code> statement in the <code>for</code> loop that is activated.</p>\n\n<p>Mind that a <code>for</code> loop works like:</p>\n\n<pre><code>for &lt;pattern&gt; in &lt;expression&gt;:\n    # ...\n</code></pre>\n\n<p>The <code>&lt;expression&gt;</code> should be an iterable (generator, tuple, list,...) and the <code>&lt;pattern&gt;</code> is used to assign to. If you iterate over the tuple, you thus iterate over the <em>elements</em> of that tuple, not the tuple in full.</p>\n"}], "owner": {"reputation": 1307, "user_id": 1810854, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d0cf43e5ce140187294075dd02796cc?s=128&d=identicon&r=PG", "display_name": "Jess", "link": "https://stackoverflow.com/users/1810854/jess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 0, "accepted_answer_id": 44553990, "answer_count": 1, "score": 4, "last_activity_date": 1497472638, "creation_date": 1497471172, "question_id": 44553925, "link": "https://stackoverflow.com/questions/44553925/looping-through-a-generator-that-returns-multiple-values", "title": "Looping through a generator that returns multiple values", "body": "<p>My generator (<code>batch_generator</code>) returns 5 values, but I can't seem to figure out how to loop through the values.</p>\n\n<p>Things I've tried:</p>\n\n<p>1) Unpack directly in the for loop definition (<code>ValueError: too many values to unpack (expected 5)</code>)</p>\n\n<pre><code>for a, b, c, d, e in next(batch_generator):\n    # do something with a-e\n</code></pre>\n\n<p>2) Unpack within the for loop (<code>ValueError: too many values to unpack (expected 5)</code> on the line where I unpack <code>item</code>)</p>\n\n<pre><code>for item in next(batch_generator):\n    a, b, c, d, e = item\n    # do stuff\n</code></pre>\n\n<p>3) Zip it and unpack in the for loop definition (<code>ValueError: not enough values to unpack (expected 5, got 1)</code>)</p>\n\n<pre><code>for a, b, c, d, e in zip(next(batch_generator)):\n    # do stuff\n</code></pre>\n\n<p>4) Zip it and unpack within the for loop (<code>ValueError: not enough values to unpack (expected 5, got 1)</code> on the line where I unpack <code>item</code>, I think it's just wrapped in another tuple now)</p>\n\n<pre><code>for item in zip(next(batch_generator)):\n     a, b, c, d, e = item\n</code></pre>\n\n<p>Any explanation of what's really going on with the tuples/generator would be appreciated!</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 5596, "user_id": 1781026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ebdc7f1a4ea10ca2025fb96e4a00577?s=128&d=identicon&r=PG", "display_name": "chrki", "link": "https://stackoverflow.com/users/1781026/chrki"}, "is_accepted": false, "score": 1, "last_activity_date": 1497473757, "creation_date": 1497473757, "answer_id": 44554597, "question_id": 44553924, "link": "https://stackoverflow.com/questions/44553924/python-check-for-last-html-tag/44554597#44554597", "title": "Python: check for last html tag", "body": "<p><code>pagelinkrow.find_all(\"li\")</code> returns an array of <code>li</code> elements. You can get the last item of that array by using index <code>-1</code>:</p>\n\n<pre><code>pagelinkrow.find_all(\"li\")[-1]\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8054634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9551b06e8fc5778700ee538c24556124?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/8054634/santosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497525766, "creation_date": 1497471168, "last_edit_date": 1497525766, "question_id": 44553924, "link": "https://stackoverflow.com/questions/44553924/python-check-for-last-html-tag", "title": "Python: check for last html tag", "body": "<p>I would like to know if it is possible to check for the last html tag in a beautifulsoup object. Here is the code.</p>\n\n<pre><code>try:\n    f = urllib.request.urlopen('http://www.taylor-enviro.com' + link)\n    soup = BeautifulSoup(f)\nexcept Exception as e:\n    print (e)\n\nif len(soup.find_all(\"td\",{\"class\":\"pages\"})) &gt; 0:\n    print('pages true')\n    pagelinkrow = soup.find(\"td\",{\"class\":\"pages\"})\n    if len(pagelinkrow.find_all(\"li\")) &gt; 0:\n        print('litrue')\n        for pagelinkrow1 in pagelinkrow.findAll('li'):\n            try:\n                print('intry')\n                pagelink = pagelinkrow1.a['href']\n                if pagelink not in linklist:\n                    linklist.append(pagelink)\n                    print (pagelink)\n                return pagelink\n\n                found = 'done'\n            except Exception as e:\n                        print(e)\n</code></pre>\n\n<p>I would like to check for last 'li'. </p>\n"}, {"tags": ["python", "pandas", "global-variables", "glade"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1497471196, "post_id": 44553909, "comment_id": 76098140, "body": "A global <code>Thresholds</code> won&#39;t exist until <code>on_filechooserbutton1_file_set</code> is run at least once."}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "edited": false, "score": 1, "creation_date": 1497471307, "post_id": 44553909, "comment_id": 76098208, "body": "If you think it needs to be global, reconsider your design.  From the way you describe the problem, it sounds like you can simply do self.Thresholds"}, {"owner": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "edited": false, "score": 0, "creation_date": 1497531567, "post_id": 44553909, "comment_id": 76124851, "body": "I have done this, but I will be filtering that file and will be using that information for other parts of the UI I am building."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "edited": false, "score": 0, "creation_date": 1497531506, "post_id": 44553962, "comment_id": 76124810, "body": "I have tried this and when I go to print my thresholds dataframe I get None as an output"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5244399"}, "reply_to_user": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "edited": false, "score": 0, "creation_date": 1497624545, "post_id": 44553962, "comment_id": 76172022, "body": "@mdicrist which <code>print</code> are you talking about?  the one in main script or the one in handler?"}, {"owner": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "edited": false, "score": 0, "creation_date": 1497641319, "post_id": 44553962, "comment_id": 76181469, "body": "I need the main script to print out in the handler. No worries though I&#39;ve found a way to make it work. The global statement worked. I had to change my <code>with self.Thresholds as a:</code> line to <code>with open (self.Thresholds) as a:</code>. Thank you for your help though!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5244399"}, "is_accepted": false, "score": 1, "last_activity_date": 1497471297, "creation_date": 1497471297, "answer_id": 44553962, "question_id": 44553909, "link": "https://stackoverflow.com/questions/44553909/calling-a-global-variable-from-a-method-python/44553962#44553962", "title": "Calling a global variable from a method (Python)", "body": "<p>You should create the global variable first:</p>\n\n<pre><code>Thresholds = None\n\nclass Handler:\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "is_accepted": false, "score": 0, "last_activity_date": 1497641513, "creation_date": 1497641513, "answer_id": 44596702, "question_id": 44553909, "link": "https://stackoverflow.com/questions/44553909/calling-a-global-variable-from-a-method-python/44596702#44596702", "title": "Calling a global variable from a method (Python)", "body": "<p>It turns out that my syntax to open up the file was wrong. To print the Thresholds file both when the button is clicked and in the main script, the following code works:</p>\n\n<pre><code>class Handler:\n\n    def on_filechooserbutton1_file_set(self, widget):\n        self.Thresholds = widget.get_filename()\n        with open (self.Thresholds) as a:\n            global Thresholds\n            Thresholds = pd.read_table(a, sep=',')\n\n    def on_RUN_clicked(self, widget):\n        print Thresholds\n\n    def onDeleteWindow(self, *args):\n        Gtk.main_quit(*args)\n\n\nbuilder = Gtk.Builder()\nbuilder.add_from_file(\"DataAPP.glade\")\nbuilder.connect_signals(Handler())\n\nwindow = builder.get_object(\"MainWindow\")\nwindow.show_all()\n\nGtk.main()\n\nprint Thresholds\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 7999501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3296dd46ee1f83103805af58161a47cf?s=128&d=identicon&r=PG&f=1", "display_name": "mdicrist", "link": "https://stackoverflow.com/users/7999501/mdicrist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497641513, "creation_date": 1497471094, "last_edit_date": 1497531477, "question_id": 44553909, "link": "https://stackoverflow.com/questions/44553909/calling-a-global-variable-from-a-method-python", "title": "Calling a global variable from a method (Python)", "body": "<p>I was wondering if it is possible to declare a global variable inside of a method so it can be called and used inside of another UI method. The code I have written below is supposed to take the theresholds file that the user chooses and then is supposed to print it out when the run button is clicked.  </p>\n\n<pre><code>class Handler:\n\n    def on_filechooserbutton1_file_set(self, widget):\n        self.Thresholds = widget.get_filename()\n        with self.Thresholds as a:\n            global Thresholds\n            Thresholds = pd.read_table(a, sep=',')\n\n    def on_RUN_clicked(self, widget):\n        print Thresholds\n\n    def onDeleteWindow(self, *args):\n        Gtk.main_quit(*args)\n\n\nbuilder = Gtk.Builder()\nbuilder.add_from_file(\"DataAPP.glade\")\nbuilder.connect_signals(Handler())\n\nwindow = builder.get_object(\"MainWindow\")\nwindow.show_all()\n\nGtk.main()\n\nprint Thresholds\n</code></pre>\n\n<p>The thresholds variable contains a dataframe and has previously been defined, but whenever I try to call the threshold variable outside of its method I get an error stating: </p>\n\n<pre><code>NameError: global name 'Thresholds' is not defined\n</code></pre>\n\n<p>Any suggenestions on how to go about doing this properly?</p>\n"}, {"tags": ["python", "pandas", "outer-join"], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "edited": false, "score": 0, "creation_date": 1497471615, "post_id": 44553961, "comment_id": 76098358, "body": "Thank you! Just what I was looking for!"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1497471295, "creation_date": 1497471295, "answer_id": 44553961, "question_id": 44553905, "link": "https://stackoverflow.com/questions/44553905/joining-multiple-dataframes-on-a-common-column/44553961#44553961", "title": "Joining multiple dataframes on a common column", "body": "<p><code>set_index</code> and use <code>pd.concat</code>:</p>\n\n<pre><code>pd.concat([i.set_index('A') for i in [df1,df2,df3]],axis=1, join='outer')\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 7788430, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/6430488baa728d00826e8b385cf0698e?s=128&d=identicon&r=PG&f=1", "display_name": "Harikrishna", "link": "https://stackoverflow.com/users/7788430/harikrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 44553961, "answer_count": 1, "score": 1, "last_activity_date": 1497471295, "creation_date": 1497471081, "question_id": 44553905, "link": "https://stackoverflow.com/questions/44553905/joining-multiple-dataframes-on-a-common-column", "title": "Joining multiple dataframes on a common column", "body": "<p>I have multiple dataframes (total of 6). I have a common column in all the dataframes. Is there a way to join all the columns in all the dataframe on the common column? I know merge command, but it seems to work on only 2 dataframes at a time. Is there a way we can write a single statement to perform this? I do not want any data loss so I believe outer join is the best.</p>\n"}, {"tags": ["python", "keras", "convolution"], "answers": [{"comments": [{"owner": {"reputation": 1021, "user_id": 3551700, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1114701970/picture?type=large", "display_name": "Primoz", "link": "https://stackoverflow.com/users/3551700/primoz"}, "edited": false, "score": 1, "creation_date": 1497511549, "post_id": 44554718, "comment_id": 76111460, "body": "Thank you. I was looking at <a href=\"https://keras.io/regularizers/\" rel=\"nofollow noreferrer\">keras.io/regularizers</a> where it is not mentioned."}], "tags": [], "owner": {"reputation": 6689, "user_id": 7117003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HaW1a.png?s=128&g=1", "display_name": "petezurich", "link": "https://stackoverflow.com/users/7117003/petezurich"}, "is_accepted": true, "score": 2, "last_activity_date": 1497474312, "creation_date": 1497474312, "answer_id": 44554718, "question_id": 44553898, "link": "https://stackoverflow.com/questions/44553898/are-weight-and-kernel-regulalizer-same/44554718#44554718", "title": "Are weight and kernel regulalizer same?", "body": "<p>This is right. See this line here from the Keras Convolutional Layer documentation: </p>\n\n<blockquote>\n  <p>kernel_regularizer: Regularizer function applied to the kernel weights\n  matrix (see regularizer).</p>\n</blockquote>\n\n<p><a href=\"https://keras.io/layers/convolutional/\" rel=\"nofollow noreferrer\">https://keras.io/layers/convolutional/</a></p>\n"}], "owner": {"reputation": 1021, "user_id": 3551700, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1114701970/picture?type=large", "display_name": "Primoz", "link": "https://stackoverflow.com/users/3551700/primoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 44554718, "answer_count": 1, "score": 2, "last_activity_date": 1558631655, "creation_date": 1497471060, "last_edit_date": 1558631655, "question_id": 44553898, "link": "https://stackoverflow.com/questions/44553898/are-weight-and-kernel-regulalizer-same", "title": "Are weight and kernel regulalizer same?", "body": "<p>All around the web I read about <code>weight regularizer</code> in Keras but I can not find it in specifications. I can see only kernel regularizer there. I assume that it is same since kernels are some kind of weights. Am I right?</p>\n"}, {"tags": ["python", "node.js"], "comments": [{"owner": {"reputation": 3038, "user_id": 2394022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Yeg4.jpg?s=128&g=1", "display_name": "Omri Luzon", "link": "https://stackoverflow.com/users/2394022/omri-luzon"}, "edited": false, "score": 0, "creation_date": 1497471218, "post_id": 44553892, "comment_id": 76098151, "body": "Is the nodeJS process already running? because you can&#39;t call it if it doesn&#39;t already running or executed as child process."}, {"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1497471312, "post_id": 44553892, "comment_id": 76098209, "body": "You could host v8 directly in Python.  Good luck with that."}], "owner": {"user_type": "does_not_exist", "display_name": "user8088117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497471035, "creation_date": 1497471035, "question_id": 44553892, "link": "https://stackoverflow.com/questions/44553892/calling-nodejs-function-from-python-without-spawning-child-process", "title": "Calling NodeJS function from Python without spawning child process", "body": "<p>Is it possible to call a NodeJS function:</p>\n\n<pre><code>function someFunc(object) {\n  console.log(object);\n}\n</code></pre>\n\n<p>with python:</p>\n\n<pre><code>someFunc({});\n</code></pre>\n\n<p>?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "html", "selenium", "xpath"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8162621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktRNO.jpg?s=128&g=1", "display_name": "Idiris Mohamed", "link": "https://stackoverflow.com/users/8162621/idiris-mohamed"}, "edited": false, "score": 0, "creation_date": 1497472640, "post_id": 44554005, "comment_id": 76098853, "body": "Thank you, but now I&#39;m getting a no such frame exception?"}, {"owner": {"reputation": 542, "user_id": 7880461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11d6f2ae864d2bddcf26aadc9fbc45b1?s=128&d=identicon&r=PG&f=1", "display_name": "Dean W.", "link": "https://stackoverflow.com/users/7880461/dean-w"}, "reply_to_user": {"reputation": 21, "user_id": 8162621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktRNO.jpg?s=128&g=1", "display_name": "Idiris Mohamed", "link": "https://stackoverflow.com/users/8162621/idiris-mohamed"}, "edited": false, "score": 0, "creation_date": 1497473096, "post_id": 44554005, "comment_id": 76099118, "body": "It works for me on icloud.com, if you&#39;re on a different page the iframe&#39;s id may be different. Or Selenium may be looking for the iframe before it exists."}, {"owner": {"reputation": 21, "user_id": 8162621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktRNO.jpg?s=128&g=1", "display_name": "Idiris Mohamed", "link": "https://stackoverflow.com/users/8162621/idiris-mohamed"}, "edited": false, "score": 0, "creation_date": 1497474499, "post_id": 44554005, "comment_id": 76099853, "body": "You&#39;re right, I just forgot to wait. I made it wait now until the frame was available, but then I had to wait again for the login field to be available, so I set it to an arbitrary wait time. I&#39;ve tried to make it wait until it was present, but for some reason that doesn&#39;t work (i.e. login = WebDriverWait(browser, 10).until(EC.presence_of_element_located(By.XPATH, &#39;loginXPath&#39;)))...I keep getting the error that __init___() takes 2 positional arguments but 3 were given. But this is the way I&#39;ve seen it all over the Internet so what elements should I put inside?"}, {"owner": {"reputation": 21, "user_id": 8162621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktRNO.jpg?s=128&g=1", "display_name": "Idiris Mohamed", "link": "https://stackoverflow.com/users/8162621/idiris-mohamed"}, "edited": false, "score": 0, "creation_date": 1497476107, "post_id": 44554005, "comment_id": 76100581, "body": "Never mind, an extra pair of parentheses fixed the problem. Thank you!"}], "tags": [], "owner": {"reputation": 542, "user_id": 7880461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11d6f2ae864d2bddcf26aadc9fbc45b1?s=128&d=identicon&r=PG&f=1", "display_name": "Dean W.", "link": "https://stackoverflow.com/users/7880461/dean-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1497471470, "creation_date": 1497471470, "answer_id": 44554005, "question_id": 44553860, "link": "https://stackoverflow.com/questions/44553860/icloud-website-nosuchelementexception-unable-to-locate-element/44554005#44554005", "title": "iCloud Website - NoSuchElementException: Unable to Locate Element", "body": "<p>It's within an iframe so you need to have Selenium switch to it.</p>\n\n<p><code>driver.switch_to.frame('auth-frame')</code></p>\n\n<p>Once you do that you should be able to locate it by id or xpath. </p>\n"}], "owner": {"reputation": 21, "user_id": 8162621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktRNO.jpg?s=128&g=1", "display_name": "Idiris Mohamed", "link": "https://stackoverflow.com/users/8162621/idiris-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497502538, "creation_date": 1497470931, "last_edit_date": 1497502538, "question_id": 44553860, "link": "https://stackoverflow.com/questions/44553860/icloud-website-nosuchelementexception-unable-to-locate-element", "title": "iCloud Website - NoSuchElementException: Unable to Locate Element", "body": "<p>I'm new to Python and I'm trying to make a program that involves me logging into Gmail and iCloud, using Selenium. I've completed the Gmail part, so I know I'm not completely off track, but I can't seem to surmount the error that occurs when I try to locate the login/password fields on the iCloud website. I keep getting: </p>\n\n<blockquote>\n  <p>NoSuchElementException: Message: no such element: Unable to locate\n  element: {\"method\":\"xpath\",\"selector\":\"//*[@id=\"appleId\"]\"}</p>\n</blockquote>\n\n<p>I've attempted to use <code>WebDriverWait</code>, and I've done waits for like 30 seconds just to see if timing was the issue, but I keep getting the same error even if I try to locate the login/password fields using Xpath, ID name, CSS selector, etc. </p>\n"}, {"tags": ["python", "hadoop", "scikit-learn", "pearson-correlation", "bigdata"], "comments": [{"owner": {"reputation": 4912, "user_id": 4974175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ixCeF.jpg?s=128&g=1", "display_name": "rll", "link": "https://stackoverflow.com/users/4974175/rll"}, "edited": false, "score": 0, "creation_date": 1497879681, "post_id": 44553858, "comment_id": 76249737, "body": "I would try Intel&#39;s Python distribution and MPI for Python. You can have a glance of it in this <a href=\"https://goparallel.sourceforge.net/wp-content/uploads/2016/07/intel-parallel-universe-issue-25.compressed.pdf\" rel=\"nofollow noreferrer\">GoParallel issue</a>."}, {"owner": {"reputation": 2999, "user_id": 8071126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550f1700622fccf1b6980580222c8d80?s=128&d=identicon&r=PG", "display_name": "glegoux", "link": "https://stackoverflow.com/users/8071126/glegoux"}, "edited": false, "score": 0, "creation_date": 1498165059, "post_id": 44553858, "comment_id": 76401413, "body": "What is the size of your data.csv file (number of lines, MB ...) ?"}, {"owner": {"reputation": 2305, "user_id": 858981, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e510ce5e7145a2681429e0f5bfc254?s=128&d=identicon&r=PG&f=1", "display_name": "Eugenio", "link": "https://stackoverflow.com/users/858981/eugenio"}, "reply_to_user": {"reputation": 2999, "user_id": 8071126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550f1700622fccf1b6980580222c8d80?s=128&d=identicon&r=PG", "display_name": "glegoux", "link": "https://stackoverflow.com/users/8071126/glegoux"}, "edited": false, "score": 0, "creation_date": 1498198682, "post_id": 44553858, "comment_id": 76410978, "body": "@glegoux the problem is not the size of the CSV file now, but the possibility to scale in the future"}, {"owner": {"reputation": 2999, "user_id": 8071126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550f1700622fccf1b6980580222c8d80?s=128&d=identicon&r=PG", "display_name": "glegoux", "link": "https://stackoverflow.com/users/8071126/glegoux"}, "edited": false, "score": 0, "creation_date": 1498200391, "post_id": 44553858, "comment_id": 76411857, "body": "But it is important to have a visibility to answer ? What is the size for the future ? The order of magnitude is GB or TB or 100TB ... ?"}, {"owner": {"reputation": 2305, "user_id": 858981, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e510ce5e7145a2681429e0f5bfc254?s=128&d=identicon&r=PG&f=1", "display_name": "Eugenio", "link": "https://stackoverflow.com/users/858981/eugenio"}, "edited": false, "score": 0, "creation_date": 1498203384, "post_id": 44553858, "comment_id": 76413554, "body": "for sure we are talking at least about TB but I really don&#39;t know"}], "answers": [{"comments": [{"owner": {"reputation": 2305, "user_id": 858981, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e510ce5e7145a2681429e0f5bfc254?s=128&d=identicon&r=PG&f=1", "display_name": "Eugenio", "link": "https://stackoverflow.com/users/858981/eugenio"}, "edited": false, "score": 1, "creation_date": 1498294782, "post_id": 44709505, "comment_id": 76451145, "body": "As far as I&#39;ve seen, there isn&#39;t a simple method in spark to just compute distances (which was my question); your answer, however, is pointing me toward the right direction so I decided to accept it anyway."}], "tags": [], "owner": {"reputation": 2999, "user_id": 8071126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550f1700622fccf1b6980580222c8d80?s=128&d=identicon&r=PG", "display_name": "glegoux", "link": "https://stackoverflow.com/users/8071126/glegoux"}, "is_accepted": true, "score": 0, "last_activity_date": 1498166080, "creation_date": 1498166080, "answer_id": 44709505, "question_id": 44553858, "link": "https://stackoverflow.com/questions/44553858/compute-a-pairwise-distance-matrix-is-a-scalable-big-data-ready-approach-avail/44709505#44709505", "title": "Compute a Pairwise Distance Matrix: is a scalable, big-data-ready approach available in Python?", "body": "<p><strong>To prototype:</strong></p>\n\n<p>I suggest you to use <a href=\"https://github.com/irmen/Pyro4\" rel=\"nofollow noreferrer\">Pyro4</a> and to implement that with <code>divide and conquer</code> paradigm, a master node and several slave nodes. </p>\n\n<p>If you have <code>n</code> items you have <code>n(n-1)/2</code> pairs, you use sklearn pairwise distances with maximum of jobs (n_jobs parameter) on each node. </p>\n\n<p>You split your set of pairs in <code>a</code> tasks and execute that on <code>b</code> nodes and regroup result on your master node.</p>\n\n<p><strong>For production:</strong></p>\n\n<p>I advice you <a href=\"https://spark.apache.org/docs/latest/api/python/index.html\" rel=\"nofollow noreferrer\">PySpark 2.1.1</a>. Map Reduce becomes deprecated.</p>\n"}], "owner": {"reputation": 2305, "user_id": 858981, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e510ce5e7145a2681429e0f5bfc254?s=128&d=identicon&r=PG&f=1", "display_name": "Eugenio", "link": "https://stackoverflow.com/users/858981/eugenio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 1, "accepted_answer_id": 44709505, "answer_count": 1, "score": 6, "last_activity_date": 1505522221, "creation_date": 1497470915, "last_edit_date": 1506102531, "question_id": 44553858, "link": "https://stackoverflow.com/questions/44553858/compute-a-pairwise-distance-matrix-is-a-scalable-big-data-ready-approach-avail", "title": "Compute a Pairwise Distance Matrix: is a scalable, big-data-ready approach available in Python?", "body": "<p>I have a CSV file containing feature values for items: each row is a triple (id_item, id_feature, value) representing the value of a specific feature for a specific item. The data is very sparse.</p>\n\n<p>I need to compute two item distance matrixes, one using Pearson correlation as metric and the other using the Jaccard index.</p>\n\n<p>At the moment I implemented an in-memory solution and I do something like this:</p>\n\n<pre><code>import numpy as np\nfrom numpy import genfromtxt\nfrom scipy.sparse import coo_matrix\nfrom scipy.sparse import csr_matrix\nfrom scipy.stats.stats import pearsonr\nimport sklearn.metrics.pairwise\nimport scipy.spatial.distance as ds\nimport scipy.sparse as sp\n\n# read the data\nmy_data = genfromtxt('file.csv', delimiter=',')\ni,j,value=my_data.T\n\n# create a sparse matrix\nm=coo_matrix( (value,(i,j)) )\n\n# convert in a numpy array\nm = np.array(m.todense())\n\n# create the distance matrix using pdist\nd = ds.pdist(m.T, 'correlation')\n\nd= ds.squareform(d)\n</code></pre>\n\n<p>it works well and it's pretty fast but it is not scalable horizontally. I would like to be able to increase the performances just by adding nodes to a cluster and that everything could work even in a big data scenario, again just by adding nodes. I don't care if the process takes hours; distances need to be updated once a day.</p>\n\n<p>What's the best approach?</p>\n\n<p>1) Sklearn pairwise_distances has a n_jobs parameter that allows to take advantage of parallel computing (<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html\" rel=\"noreferrer\">http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html</a>) but as far as I know it supports multiple cores on the same machine and not cluster computing.\nThis is a related question <a href=\"https://stackoverflow.com/questions/38601026/easy-way-to-use-parallel-options-of-scikit-learn-functions-on-hpc\">Easy way to use parallel options of scikit-learn functions on HPC</a> but I didn't get what is the best solution in my specific case and if Joblib actually has issues. </p>\n\n<p>Also, the part that reads in memory the CSV would still be a bottleneck: I can store the CSV in HDFS and read it doing something like:</p>\n\n<pre><code>import subprocess\ncat = subprocess.Popen([\"hadoop\", \"fs\", \"-cat\", \"data.csv\"], stdout=subprocess.PIPE)\n</code></pre>\n\n<p>and then loop through cat.stdout:</p>\n\n<pre><code>for line in cat.stdout:\n    ....\n</code></pre>\n\n<p>but I am not sure it is a good solution.</p>\n\n<p>2) Store data in HDFS, implement computation in a map reduce fashion and run the job via mrjob</p>\n\n<p>3) Store data in HDFS, implement the computation in a SQL-like fashion (I don't know if it is easy and feasible, I have to think about it) and run it using PyHive</p>\n\n<p>Of course I would like to keep as much as possible the current code, so a variant of the solution 1) is the best one for me.</p>\n"}, {"tags": ["python", "pandas", "numpy", "slice"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1497470822, "creation_date": 1497470822, "answer_id": 44553828, "question_id": 44553805, "link": "https://stackoverflow.com/questions/44553805/converting-the-dtype-of-columns-in-pandas-without-column-names/44553828#44553828", "title": "Converting the dtype of columns in pandas without column names", "body": "<pre><code>df.iloc[:, :1000] = df.iloc[:, :1000].astype(int)\n</code></pre>\n"}], "owner": {"reputation": 792, "user_id": 1965985, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/5f8o2.jpg?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/1965985/gizmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 44553828, "answer_count": 1, "score": 0, "last_activity_date": 1497470822, "creation_date": 1497470733, "question_id": 44553805, "link": "https://stackoverflow.com/questions/44553805/converting-the-dtype-of-columns-in-pandas-without-column-names", "title": "Converting the dtype of columns in pandas without column names", "body": "<p>I am working with data imported from a huge CSV. Pandas changed some columns to float, so now the numbers in these columns get displayed as floating points! However, I need them to be integers. I found some solutions, but all used the column names to change the dtypes.</p>\n\n<p>Is there a way to change the data type for example for the first one thousand columns without addressing them separately by their names?</p>\n"}, {"tags": ["python", "parsing", "beautifulsoup"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1497471076, "post_id": 44553778, "comment_id": 76098089, "body": "There is absolutely no way to answer this question. The URL to get the data for a particular site will depend entirely on how that site is written."}, {"owner": {"reputation": 811, "user_id": 6318046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z_LSAaiCmLk/AAAAAAAAAAI/AAAAAAAAAMs/_fdJiBDikHo/photo.jpg?sz=128", "display_name": "Tare Gaskin", "link": "https://stackoverflow.com/users/6318046/tare-gaskin"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1497502219, "post_id": 44553778, "comment_id": 76107213, "body": "@Padraic_Cunningham  I&#39;d appreciate it if you could take a look at my post."}], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "is_accepted": false, "score": 0, "last_activity_date": 1497484646, "last_edit_date": 1592644375, "creation_date": 1497484646, "answer_id": 44556462, "question_id": 44553778, "link": "https://stackoverflow.com/questions/44553778/how-to-find-a-request-url-for-the-data-you-are-looking-for/44556462#44556462", "title": "How to find a request URL for the data you are looking for?", "body": "<pre><code>from bs4 import BeautifulSoup\n\nimport requests\n\nurl = &quot;http://example.com&quot; \n#var that stores url \n \nrequest_it = requests.get(url).text \n#using the .get method from the requests module to get the page \n\nsoup = BeautifulSoup(request_it, 'html.parser') \n# args ( the html markup, parser ) as parser most common : html.parser, lxml\ntable = soup.find('table') \n#this will for example find one table tag and includes all tags within\none_tablerow = table.find('tr')\n# it will find only one table row, we can use .findAll('tr') if we want ALL\nprint(one_tablerow.text) #This will only print the text, sometimes we use .string if error\n</code></pre>\n<p>The basics:</p>\n<ol>\n<li><p>Use requests module to download the HTML-markup of the page</p>\n</li>\n<li><p>Use BeautifulSoup to go through tags and get certain elements</p>\n<p>a) The most common practice is to go through the tree example:\n<code>soup.find('tag').h.p.a.text</code> for instance this will first find 'tag' then the <code>.h</code> tag within then the child of that <code>.p</code> then the child of that tag <code>.a</code> e.g. <code>&lt;a href&gt;</code> and then extract the text from that tag.</p>\n</li>\n</ol>\n<p>It's also important to know the basics of <strong>HTML</strong> like the tree terminology and tags, root, child and parent.</p>\n<p>One more thing, this is a broad question, you said you're using these modules that you mentioned e.g. <code>requests, BeautifulSoup</code> but you're not really using them since you're asking these questions, therefore, I'd highly suggest that you at least watch 1hour of content of each since that is easier than going through docs. However, I posted because I'm hoping that this code can get you acquainted at least with the terminology and when you run this code that you'll be exploring, more...</p>\n"}], "owner": {"reputation": 811, "user_id": 6318046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z_LSAaiCmLk/AAAAAAAAAAI/AAAAAAAAAMs/_fdJiBDikHo/photo.jpg?sz=128", "display_name": "Tare Gaskin", "link": "https://stackoverflow.com/users/6318046/tare-gaskin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497502013, "creation_date": 1497470625, "last_edit_date": 1497502013, "question_id": 44553778, "link": "https://stackoverflow.com/questions/44553778/how-to-find-a-request-url-for-the-data-you-are-looking-for", "title": "How to find a request URL for the data you are looking for?", "body": "<p>I'm experiencing a similar problem as the guy from <a href=\"https://stackoverflow.com/questions/39065492/dryscrape-click-load-more-button\">this</a> post. I want to create a function that takes the url of a professor at ratemyprofessor.com, and gets all the text from all the comments. By default though, the page only shows the first 20 comments, then you have to load more in, in bunches of 20s. Okay, so now, I need to create a function that loads comments in the maximum number of times and then gets the comment data. After looking through the post I referenced in my first sentence though, I realized I could actually just get all the comment from some request url. </p>\n\n<p>I don't know much about making requests though, I've tried to connect the dots using the referenced post.  I've used chrome dev tools to try to look for calls involving comments, but I haven't been able to find the url to send the request to, or really what to pass to it to get what I want (all comments for a particular professor).</p>\n\n<p>Instead of just asking for the answer, I'd like to generalize this post by also asking for best practices when trying to find a request url and getting the particular data you want from it. </p>\n\n<p><strong>1. What is the Request URL I'm looking for?</strong></p>\n\n<p><strong>2. How do I navigate getting my comment data?</strong></p>\n\n<p><strong>3. What could I have done to discover this myself?</strong></p>\n\n<p>I'm using python, bs4 and requests, as recommended by the referenced post. </p>\n\n<p>----- Edit -----</p>\n\n<p>I'm sorry if I was unclear, I know how to parse HTML with bs4. Here is my code: </p>\n\n<pre><code>with requests.Session() as s:\n    s.headers.update({\"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64)\"})\n    soup = BeautifulSoup(s.get(\"http://www.ratemyprofessors.com/ShowRatings.jsp?tid=433738\").content)\n    yes = soup.find_all('p','commentsParagraph')\n</code></pre>\n\n<p>The variable <code>yes</code> contains all the comments on the page, which is good, but not all of what I want. There is a script that builds and formats all the comment blocks, and passes comments into the block. These comments are requested from somewhere, and I believe (based on the referenced post) that I can send a request to that address, and get all the comments. I'm asking for the address, and the code (possible query of sorts) that goes along with it to get all the comments. </p>\n"}, {"tags": ["python", "vba"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "edited": false, "score": 0, "creation_date": 1497475611, "post_id": 44554727, "comment_id": 76100360, "body": "Sorry, the error is as follows:TypeError: open() got an unexpected keyword argument &#39;filename&#39;"}, {"owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "edited": false, "score": 0, "creation_date": 1497475663, "post_id": 44554727, "comment_id": 76100385, "body": "Are you saying to have the code read like this?: xl.Workbooks.open(filename=r&quot;C:\\Users\\my\\full\\path\\Apartment&zwnj;&#8203;s.xlsx&quot;, ReadOnly=1)"}], "tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": false, "score": 0, "last_activity_date": 1497474340, "creation_date": 1497474340, "answer_id": 44554727, "question_id": 44553731, "link": "https://stackoverflow.com/questions/44553731/executing-visual-basic-macro-from-personal-macro-workbook-in-python/44554727#44554727", "title": "Executing Visual Basic Macro (from personal macro workbook) in Python", "body": "<p>It would help if you said what error you are getting, and I know that this path</p>\n\n<pre><code>\"C:\\Users\\my\\full\\path\\Apartments.xlsx\"\n</code></pre>\n\n<p>is not really what is in your code. But <code>\\</code> inside a string has a special meaning in Python (for example <code>\\n</code> is a newline and <code>\\f</code> is a formfeed). Whether your <code>\\</code> is interpreted as you intend depends on the character that comes after it. When you use Windows paths in Python it's generally less error-prone to use a raw string.</p>\n\n<pre><code>r\"C:\\Users\\my\\full\\path\\Apartments.xlsx\"\n</code></pre>\n\n<p>When you get that line to work, if the next line gives trouble, then post that as a separate question.</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "is_accepted": false, "score": 0, "last_activity_date": 1497542473, "creation_date": 1497542473, "answer_id": 44572087, "question_id": 44553731, "link": "https://stackoverflow.com/questions/44553731/executing-visual-basic-macro-from-personal-macro-workbook-in-python/44572087#44572087", "title": "Executing Visual Basic Macro (from personal macro workbook) in Python", "body": "<p>I got the first part of the code to work simply running the code as follows:</p>\n\n<pre><code>xl.workbooks.open(\"C:\\Users\\my\\full\\path\\Apartments.xlsx\")\n</code></pre>\n\n<p>Posted a separate question to get the macro to work correctly.</p>\n"}], "owner": {"reputation": 123, "user_id": 7001927, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10211095859817467/picture?type=large", "display_name": "Josh Dautel", "link": "https://stackoverflow.com/users/7001927/josh-dautel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497542473, "creation_date": 1497470474, "question_id": 44553731, "link": "https://stackoverflow.com/questions/44553731/executing-visual-basic-macro-from-personal-macro-workbook-in-python", "title": "Executing Visual Basic Macro (from personal macro workbook) in Python", "body": "<p>I'm trying to execute a visual basic script that is located in my personal macro workbook on an excel file that I'm creating. Here's what I have so far:</p>\n\n<pre><code>import os\nimport win32com.client\ndf2.to_excel(\"Apartments.xlsx\")\nxl=win32com.client.Dispatch(\"Excel.Application\")\nxl.Workbooks.open(filename=\"C:\\Users\\my\\full\\path\\Apartments.xlsx\", ReadOnly=1)\nxl.Application.Run(\"Apartments.xlsx!create_chart.create_chart_proc\")\n</code></pre>\n\n<p>It's throwing an error when opening the excel file on line 5, I have a feeling line 6 won't work either because it comes from my personal macro book. Anyone have ideas on how to get it to function?</p>\n\n<p>PS. my module name is \"create_chart\" and my macro name is \"create_chart_proc\"</p>\n"}]