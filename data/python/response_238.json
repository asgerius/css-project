[{"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1564617690, "post_id": 57300227, "comment_id": 101094084, "body": "You should consider editing your question so your code examples are valid python: <code>list1 = [&#39;cat&#39;, &#39;dog&#39;]</code> <code>list2 = [2, 1, 0, 3]</code> etc. It makes it much easier to understand your questions and easier to help you."}, {"owner": {"reputation": 457, "user_id": 9821289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sgillen", "link": "https://stackoverflow.com/users/9821289/sgillen"}, "edited": false, "score": 0, "creation_date": 1564618092, "post_id": 57300227, "comment_id": 101094145, "body": "I fear this may be an &quot;XY&quot; problem. Can you maybe tell us what problem you are trying to solve? I suspect that what you actually want to do is put &#39;cat&#39; &#39;dog&#39; etc into a dictionary, but it really depends on the context here."}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1564618530, "post_id": 57300227, "comment_id": 101094228, "body": "If you&#39;re using NumPy, just do <code>array1[array2]</code>."}, {"owner": {"reputation": 127, "user_id": 11861166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7C3qsTEuRS0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiguuHFw9pHAzZ-b4f5iQ55NGLhw/photo.jpg?sz=128", "display_name": "user11861166", "link": "https://stackoverflow.com/users/11861166/user11861166"}, "edited": false, "score": 0, "creation_date": 1564618862, "post_id": 57300227, "comment_id": 101094284, "body": "This is part of a larger question in my programming assignment. I have 2 (75,5) arrays that are set up the same 4 columns of floats and the last column is string of names. I am limited to only a numpy import  so I broke the arrays into 2 (75,4) and 2 (75,1) arrays. I am not essentially taking larger array index(not the element) to see where it is in the (75,1) as the indices will be out of order due functions being ran."}], "owner": {"reputation": 127, "user_id": 11861166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7C3qsTEuRS0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiguuHFw9pHAzZ-b4f5iQ55NGLhw/photo.jpg?sz=128", "display_name": "user11861166", "link": "https://stackoverflow.com/users/11861166/user11861166"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1564713552, "answer_count": 0, "score": 0, "last_activity_date": 1564617728, "creation_date": 1564617550, "question_id": 57300227, "link": "https://stackoverflow.com/questions/57300227/compare-index-number-and-return-element-result-when-comparing-2-numpy-arrays", "closed_reason": "Duplicate", "title": "Compare index number and return element result when comparing 2 numpy arrays", "body": "<p>I have 2 arrays where I would like to compare the index number not the element against another array's elements that would correspond to that index number and return the element.</p>\n\n<pre><code>array 1\nindex 0 = [cat]\nindex 1 = [dog]\nindex 2 = [bird]\nindex 3 = [mouse]\n\narray 2\n [2]\n [1]\n [0]\n [3]\nexpected result:\n\n[bird]\n[dog]\n[cat]\n[mouse]\n</code></pre>\n\n<p>Expected results:\narray 1:index 0 = cat ,index 1 = dog,index 2 = bird,index 3 = mouse</p>\n\n<p>array 2: 2, 1, 0, 3</p>\n\n<p>expected result: bird,dog,cat,mouse</p>\n"}, {"tags": ["python", "tensorflow", "jupyter"], "owner": {"reputation": 163, "user_id": 5370186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76db534328a7c739f3cb8e93ac5093b?s=128&d=identicon&r=PG&f=1", "display_name": "gkennos", "link": "https://stackoverflow.com/users/5370186/gkennos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569710260, "creation_date": 1564617426, "last_edit_date": 1564626068, "question_id": 57300218, "link": "https://stackoverflow.com/questions/57300218/how-to-change-tensor-definition-without-getting-a-new-name-assigned-in-the-graph", "title": "How to change tensor definition without getting a new name assigned in the graph", "body": "<p>I am loading some previously saved models and running through a series of tests.  The previously saved models each have a tensor called 'embedding', however the embedding tensor is a different shape in each model.</p>\n\n<p>When I try to load the second model sequentially, I re-declare the embedding tensor with the new expected shape, but when I try to load the model it is still trying to use the previous definition.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for embed_dim, embed_path in zip(modeldims, modelpaths):\n    embedding = tf.Variable(tf.random_uniform((n_vocab, embed_dim), -1, 1, name='embedding_layer')\n\n    with tf.Session(config=config) as sess:\n        saver = tf.train.Saver()\n        saver.restore(sess, modelpaths[0])\n        valid_embedding = tf.nn.embedding_lookup(embedding, valid_dataset)\n        embedding_result = valid_embedding.eval()\n\n        # do some stuff with the embedding result\n</code></pre>\n\n<p>This works on the first iteration, but on the second iteration, I get the error:</p>\n\n<pre><code>NotFoundError: Key embedding_layer_1 not found in checkpoint\n</code></pre>\n\n<p>And when I accidentally declare the embedding tensor incorrectly and go back to correct it by redeclaring, then it still uses the old definition of embedding_layer (i.e. the corrected version is being declared as embedding_layer_1 so it still doesn't match)</p>\n\n<pre><code>InvalidArgumentError: Assign requires shapes of both tensors to match.  \nlhs shape= [156786,50], rhs shape= [156786,100]\n</code></pre>\n\n<p>Is there a way to reuse tensors in this way?  At the moment I am restarting the kernel for each model load - feels like there must be a better option?</p>\n"}, {"tags": ["python", "statsmodels"], "answers": [{"comments": [{"owner": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "edited": false, "score": 0, "creation_date": 1564756509, "post_id": 57316141, "comment_id": 101147244, "body": "Thanks @cfulton for this informative answer! Just wondering, how do you set the prior in statsmodels with the same strategy as bsts? I tried doing <code>model.fit(start_params=[0, 1, 1])</code> but it didn&#39;t change results. Also, is there some metric we could use, such as AIC, to further explain each model and compare results?"}, {"owner": {"reputation": 1746, "user_id": 603962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1d231a4365ce0efcfdaa543a11edb7?s=128&d=identicon&r=PG", "display_name": "cfulton", "link": "https://stackoverflow.com/users/603962/cfulton"}, "reply_to_user": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "edited": false, "score": 0, "creation_date": 1564783146, "post_id": 57316141, "comment_id": 101157499, "body": "Unfortunately it is not straightforward at the moment to modify the prior for <code>UnobservedComponents</code>."}, {"owner": {"reputation": 1746, "user_id": 603962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1d231a4365ce0efcfdaa543a11edb7?s=128&d=identicon&r=PG", "display_name": "cfulton", "link": "https://stackoverflow.com/users/603962/cfulton"}, "reply_to_user": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "edited": false, "score": 1, "creation_date": 1564783265, "post_id": 57316141, "comment_id": 101157526, "body": "Because the estimation paradigms are different (classical estimation vs Bayesian estimation), there is not a consistent framework with which to evaluate the results from the different models.  In Statsmodels, we are maximizing the likelihood function whereas that is not what bsts is doing. For that reason, you will always find that our estimates will lead to higher log-likelihood values and smaller AIC values than the models generated by the parameters estimated by bsts."}, {"owner": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "edited": false, "score": 0, "creation_date": 1565187631, "post_id": 57316141, "comment_id": 101274851, "body": "Hi Chad, thanks for your help! We&#39;ll update our library adding the information we learned in this answer :)!"}], "tags": [], "owner": {"reputation": 1746, "user_id": 603962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1d231a4365ce0efcfdaa543a11edb7?s=128&d=identicon&r=PG", "display_name": "cfulton", "link": "https://stackoverflow.com/users/603962/cfulton"}, "is_accepted": true, "score": 2, "last_activity_date": 1564689248, "creation_date": 1564689248, "answer_id": 57316141, "question_id": 57300211, "link": "https://stackoverflow.com/questions/57300211/local-level-model-not-fully-optimizing-irregular-state/57316141#57316141", "title": "Local Level Model Not Fully Optimizing Irregular State", "body": "<p>This is an interesting question and comparison between the two packages. The difference is apparently coming from the different estimation methods: maximum likelihood in Statsmodels and Bayesian MCMC in bsts. It is not surprising that a difference would show up in a case like this, since the time series is so short.</p>\n\n<p>The reason I say this is that, given <code>sigma.obs</code>, <code>sigma.level</code>, and <code>coefficients</code> from the bsts output, for any iteration of their MCMC algorithm, I can replicate their one.step.prediction_errors and log.likelihood for that iteration by applying the Kalman filter to the local level + exog model using the parameter values from that iteration.</p>\n\n<p>They do have one difference from Statsmodels, which is that they set the prior for the unobserved state based on the first observation of the dataset and the variance of the dataset, which is probably not optimal (but shouldn't be causing any major problems). Statsmodels instead uses a diffuse prior, which again shouldn't cause any major discrepancies. As I mentioned above, when I use their prior, I can match their filtering output.</p>\n\n<p>So the difference must be in the estimation method, and this could have to do with the details of their MCMC algorithm and the priors that they set. You could follow up with them to see if they have any intuition about how their setup might be affecting results.</p>\n\n<p><strong>Discussion of residuals and loglikelihood computation</strong></p>\n\n<blockquote>\n  <p>We decided then to compute the loglikelihood of the residuals while ignoring the level component (as its variance is relatively low) to see what would be the most appropriate value for irregular, like so:</p>\n\n<pre><code>residuals = data['Basque'] - fm.params[-1] * data['another']\n</code></pre>\n  \n  <p>And then we computed loglikelihood for both standard deviations (5e-6 for statsmodels, 0.38 for R), like so:</p>\n\n<pre><code>stats.norm.logpdf(residuals, 0, scale=5e-6).sum() # statsmodels sd\n-&gt; -39342125822.669464\n\nstats.norm.logpdf(residuals, 0, scale=0.38).sum() # bsts sd\n-&gt; -5.789754559185148\n</code></pre>\n</blockquote>\n\n<p>The problem with this is that the estimate of the variance of the irregular component is not the same as the variance of the residuals in a model where the state is not a constant. Instead, the model is:</p>\n\n<p>y_t = x_t \\beta + \\alpha_t + \\varepsilon_t</p>\n\n<p>and Var(y_t - x_t \\beta | t-1) = Var(\\alpha_t | t-1) + Var(\\varepsilon_t | t-1)</p>\n\n<p>Since Var(\\alpha_t | t-1) = sigma2.level and Var(\\varepsilon_t | t-1) = sigma2.irregular, the appropriate variance is sigma2.level + sigma2.irregular = 0.00403. If you do:</p>\n\n<pre><code>stats.norm.logpdf(residuals, 0, scale=0.00403).sum() # statsmodels sd\n-&gt; -205.4612464569425\n</code></pre>\n\n<p>Okay, so that's still smaller than the one from your original post computed by <code>bsts</code>, but this is because the state is not a constant, and so <code>residuals</code> does not contain the actual relevant residual for the loglikelihood computation. The actual loglikelihood computation is done using <code>fm.forecasts_error</code> with variances from <code>fm.forecasts_error_cov</code>.</p>\n"}], "owner": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "accepted_answer_id": 57316141, "answer_count": 1, "score": 2, "last_activity_date": 1564689248, "creation_date": 1564617375, "question_id": 57300211, "link": "https://stackoverflow.com/questions/57300211/local-level-model-not-fully-optimizing-irregular-state", "title": "Local Level Model Not Fully Optimizing Irregular State", "body": "<p>We used a local level model to fit this data:</p>\n\n<pre><code>import pandas as pd\nfrom scipy import stats\nfrom statsmodels.tsa.statespace.structural import UnobservedComponents\n\n\ndata = {\n    'Basque': [3.85318463, 3.9456583, 4.03356173, 4.0234219, 4.01378197, 4.2859184, 4.5743361, 4.89895735, 5.19701498, 5.33890298, 5.46515301, 5.54591563, 5.61489573, 5.85218493, 6.08140542, 6.17009424, 6.2836334, 6.5555554, 6.81076856, 7.1051843, 7.37789168],\n    'another': [3.54662963, 3.69044557, 3.826835, 3.87567838, 3.92173673, 4.2417882, 4.57533548, 4.83804641, 5.0813341, 5.15809788, 5.22365053, 5.33247651, 5.42944892, 5.67437885, 5.91552394, 6.06683787, 6.22764921, 6.53906013, 6.83797506, 6.98736082, 7.12489303]\n}\n\ndata = pd.DataFrame(data)\n\nmodel = UnobservedComponents(data['Basque'], level='llevel', exog=data['another'])\nfm = model.fit()\n</code></pre>\n\n<p>Which yields the following converged parameters:</p>\n\n<pre><code>sigma2.irregular    2.365834e-11\nsigma2.level        4.032277e-03\nbeta.another        9.704585e-01\ndtype: float64\n</code></pre>\n\n<p>But then we compared same results with <code>bsts</code> package from R and got basically same values for level and beta whereas irregular it was quite different: <code>0.16</code> for variance (0.38 for standard deviation).</p>\n\n<p>We decided then to compute the loglikelihood of the residuals while ignoring the level component (as its variance is relatively low) to see what would be the most appropriate value for irregular, like so:</p>\n\n<pre><code>residuals = data['Basque'] - fm.params[-1] * data['another']\n</code></pre>\n\n<p>And then we computed loglikelihood for both standard deviations (5e-6 for statsmodels, 0.38 for R), like so:</p>\n\n<pre><code>stats.norm.logpdf(residuals, 0, scale=5e-6).sum() # statsmodels sd\n-&gt; -39342125822.669464\n\nstats.norm.logpdf(residuals, 0, scale=0.38).sum() # bsts sd\n-&gt; -5.789754559185148\n</code></pre>\n\n<p>As it turns out, it's due this difference that we are observing conflicting results from both packages so I'd like to ask for help to understand why the <code>irregular</code> component is yielding values that doesn't seem to fully optimize loglikelihood for fitting the data.</p>\n\n<p>For what it seems, statsmodels finds optimum values for the statespace by maximizing the <a href=\"https://github.com/statsmodels/statsmodels/blob/master/statsmodels/base/model.py#L874\" rel=\"nofollow noreferrer\">loglikehood</a> of observed data; this being the case, shouldn't the final state converge to standard deviation of 0.38 as it further improves the objective cost?</p>\n\n<p>As reference, <a href=\"https://github.com/dafiti/causalimpact/issues/37\" rel=\"nofollow noreferrer\">this issue</a> was opened on our library developed on top of statsmodels; it's a quite interesting problem related to causal impact inference and the irregular component is letting the Python package conclude with certainty that there's causal impact whereas R's concludes the contrary.</p>\n\n<p>We tested with all stable versions of statsmodels but got same <code>irregular</code> sd results.</p>\n"}, {"tags": ["python", "arrays", "while-loop"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1564617578, "post_id": 57300210, "comment_id": 101094071, "body": "<code>incheck</code> and <code>outcheck</code> only control the <code>while</code> loops. Setting them doesn&#39;t break out of the <code>for</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 11370915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jFyn.jpg?s=128&g=1", "display_name": "Andrii Kozytskyi", "link": "https://stackoverflow.com/users/11370915/andrii-kozytskyi"}, "edited": false, "score": 0, "creation_date": 1564618555, "post_id": 57300242, "comment_id": 101094232, "body": "hmm, when I put a <code>break</code> statement after the <code>incheck = True</code> it just gets stuck in an endless loop printing the same <code>shape.shape</code>. What am I not seeing?"}, {"owner": {"reputation": 347, "user_id": 10049496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0258f25acc37f733273ecf7254e90f5d?s=128&d=identicon&r=PG&f=1", "display_name": "alex87", "link": "https://stackoverflow.com/users/10049496/alex87"}, "reply_to_user": {"reputation": 57, "user_id": 11370915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jFyn.jpg?s=128&g=1", "display_name": "Andrii Kozytskyi", "link": "https://stackoverflow.com/users/11370915/andrii-kozytskyi"}, "edited": false, "score": 0, "creation_date": 1564619592, "post_id": 57300242, "comment_id": 101094412, "body": "@AndriiKozytskyi because <code>outcheck</code> still equals <code>False</code>. Delete the <code>break</code> you aadded after your last <code>elif</code> statement put <code>if outcheck == True and incheck == true break</code>"}], "tags": [], "owner": {"reputation": 347, "user_id": 10049496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0258f25acc37f733273ecf7254e90f5d?s=128&d=identicon&r=PG&f=1", "display_name": "alex87", "link": "https://stackoverflow.com/users/10049496/alex87"}, "is_accepted": true, "score": 0, "last_activity_date": 1564617627, "creation_date": 1564617627, "answer_id": 57300242, "question_id": 57300210, "link": "https://stackoverflow.com/questions/57300210/double-while-loop-keeps-running-after-breaking-line/57300242#57300242", "title": "Double while loop keeps running after breaking line", "body": "<p>You need to <code>break</code> out of the <code>for</code> loop after you set <code>incheck = True</code></p>\n"}], "owner": {"reputation": 57, "user_id": 11370915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jFyn.jpg?s=128&g=1", "display_name": "Andrii Kozytskyi", "link": "https://stackoverflow.com/users/11370915/andrii-kozytskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57300242, "answer_count": 1, "score": 0, "last_activity_date": 1564617627, "creation_date": 1564617363, "question_id": 57300210, "link": "https://stackoverflow.com/questions/57300210/double-while-loop-keeps-running-after-breaking-line", "title": "Double while loop keeps running after breaking line", "body": "<p>I'm trying to write a function that crops certain shapes from a 2D numpy array. I've only finished half the code yet, right now it's supposed to strip vertical lines of data that contain a shape, but it keeps throwing errors at me. Here's the code thus far:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def shapes(array, thresh):\n    shapes = {}\n    thresharray = array\n    thresharray[thresharray  &lt; thresh] = 0\n    thresharray[thresharray &gt;= thresh] = 1\n    count  = 0\n    outcheck = False\n    while outcheck == False:\n        incheck = False\n        ind     = False\n        while incheck == False:\n            shape = np.zeros((thresharray.shape[0], 1))\n            for i in range(thresharray.shape[1]):\n                if   all(thresharray[:, [i]] == 0):\n                    print(shape.shape)\n                    if ind ==  True:\n                        shape = np.delete(shape, 0, 1)\n                        shapes[count] = shape\n                        incheck = True\n                    if i   == range(thresharray.shape[1])[-1]:\n                        outcheck = True\n                elif any(thresharray[:, [i]]  &gt; 0):\n                    shape = np.hstack((shape, thresharray[:, [i]]))\n                    thresharray[:, [i]] = 0\n                    print(shape.shape)\n                    if ind == False:\n                        ind = True\n                    if i   == range(thresharray.shape[1])[-1]:\n                        outcheck = True\n    return shapes\n</code></pre>\n\n<p>It does stack the arrays correctly, but then when it reaches the <code>incheck = True</code> part it just keeps going for some reason and erases the strip one line at a time instead of resetting the <code>shape</code>. Here's the console output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(121, 1)\n(121, 1)\n(121, 2)\n(121, 3)\n(121, 4)\n(121, 5)\n(121, 6)\n(121, 7)\n(121, 8)\n(121, 9)\n(121, 10)\n(121, 11)\n(121, 12)\n(121, 13)\n(121, 14)\n(121, 15)\n(121, 15)\n(121, 14)\n(121, 13)\n(121, 12)\n(121, 11)\n(121, 10)\n(121, 9)\n(121, 8)\n(121, 7)\n(121, 6)\n(121, 5)\n(121, 4)\n(121, 3)\n(121, 2)\n(121, 1)\n(121, 0)\nTraceback (most recent call last):\n  File \"/home/kit/Desktop/Python/407/407.py\", line 162, in &lt;module&gt;\n    print(len(shapes(radinterp, 0.7)))\n  File \"/home/kit/Desktop/Python/407/407.py\", line 33, in shapes\n    shape = np.delete(shape, 0, 1)\n  File \"/var/data/python/lib/python3.7/site-packages/numpy/lib/function_base.py\", line 4376, in delete\n    \"size %i\" % (obj, axis, N))\nIndexError: index 0 is out of bounds for axis 1 with size 0\n</code></pre>\n"}, {"tags": ["python", "pytest", "exit-code"], "answers": [{"tags": [], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "is_accepted": true, "score": 2, "last_activity_date": 1564616971, "creation_date": 1564616971, "answer_id": 57300175, "question_id": 57300169, "link": "https://stackoverflow.com/questions/57300169/checking-the-exit-code-of-a-cli-in-a-test/57300175#57300175", "title": "Checking the exit code of a CLI in a test", "body": "<p>You need to check <code>value.code</code>, like this:</p>\n\n<pre><code>assert e.value.code != 0\n</code></pre>\n"}], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 57300175, "answer_count": 1, "score": 2, "last_activity_date": 1564617111, "creation_date": 1564616907, "last_edit_date": 1564617111, "question_id": 57300169, "link": "https://stackoverflow.com/questions/57300169/checking-the-exit-code-of-a-cli-in-a-test", "title": "Checking the exit code of a CLI in a test", "body": "<p>I am writing automated tests for a command line tool.  Essentially, I want to invoke the CLI with various options and test the exit code and/or output.</p>\n\n<p>My test looks like this:</p>\n\n<pre><code>from mymodule.cli_tool import main\n\ndef test_args(capfd):\n    with pytest.raises(SystemExit) as e:\n        main(args=['--junk_option'])\n    # check the exit code to make sure it is non-zero\n    ???\n</code></pre>\n\n<p>How do I check the exit code?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11866506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cg6_4OX2Bp8/AAAAAAAAAAI/AAAAAAAAAYk/unyLUTWX2cs/photo.jpg?sz=128", "display_name": "OpBanana", "link": "https://stackoverflow.com/users/11866506/opbanana"}, "edited": false, "score": 0, "creation_date": 1564617404, "post_id": 57300185, "comment_id": 101094037, "body": "Didn&#39;t know you can use {} like that, thanks!"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "reply_to_user": {"reputation": 53, "user_id": 11866506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cg6_4OX2Bp8/AAAAAAAAAAI/AAAAAAAAAYk/unyLUTWX2cs/photo.jpg?sz=128", "display_name": "OpBanana", "link": "https://stackoverflow.com/users/11866506/opbanana"}, "edited": false, "score": 0, "creation_date": 1564617468, "post_id": 57300185, "comment_id": 101094050, "body": "@OpBanana that and more. Python has lots of <a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\">string functionality</a>"}], "tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1564617052, "creation_date": 1564617052, "answer_id": 57300185, "question_id": 57300161, "link": "https://stackoverflow.com/questions/57300161/how-do-i-print-out-a-certain-number-of-letters-based-on-what-the-user-inputs/57300185#57300185", "title": "How do I print out a certain number of letters, based on what the user inputs?", "body": "<p>You are close. You can multiply strings in python so:</p>\n\n<pre><code>'_' * 4\n</code></pre>\n\n<p>gives you:</p>\n\n<pre><code>'____'\n</code></pre>\n\n<p>With that you only need a slight change to your code:</p>\n\n<pre><code>n = int(input(\"Enter a number: \"))\nprint(\"^\" + '_' * n  + \"^\")\n\n# or maybe cleaner:\nprint(\"^{}^\".format(\"_\" * n))\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11866506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cg6_4OX2Bp8/AAAAAAAAAAI/AAAAAAAAAYk/unyLUTWX2cs/photo.jpg?sz=128", "display_name": "OpBanana", "link": "https://stackoverflow.com/users/11866506/opbanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1564647925, "accepted_answer_id": 57300185, "answer_count": 1, "score": -3, "last_activity_date": 1564617109, "creation_date": 1564616841, "last_edit_date": 1564616930, "question_id": 57300161, "link": "https://stackoverflow.com/questions/57300161/how-do-i-print-out-a-certain-number-of-letters-based-on-what-the-user-inputs", "closed_reason": "Duplicate", "title": "How do I print out a certain number of letters, based on what the user inputs?", "body": "<p>Something like this </p>\n\n<pre><code>Underscores = int(input(\"Enter a number: \"))\nprint(\"^\" + Underscores + \"^\")\n</code></pre>\n\n<p>That's what I tried to do but it's not working, you might understand what I'm trying to do from that code. Basically, the user inputs how many \"<em>\" They want in a \"^</em>^\" emoji, such as if the input is 4, it prints out \"^____^\". If the input is 10, it prints out \"^__________^\" etc, thanks!</p>\n\n<p>I've only tried this code so far, and looking through other sources online</p>\n"}, {"tags": ["python", "xml", "database", "tcp", "export-to-csv"], "comments": [{"owner": {"reputation": 1, "user_id": 10524161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468834d6e5cffcdf600b927f5745cd75?s=128&d=identicon&r=PG&f=1", "display_name": "Pork Py", "link": "https://stackoverflow.com/users/10524161/pork-py"}, "edited": false, "score": 0, "creation_date": 1564617096, "post_id": 57300131, "comment_id": 101093980, "body": "There is an existing field in the xml file called timestamp, but that is the one that starts from zero each time. Would it be possible to overwrite this field with the new timestamp thus avoiding the need to add a new key to the dictionary?"}, {"owner": {"reputation": 1, "user_id": 10524161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468834d6e5cffcdf600b927f5745cd75?s=128&d=identicon&r=PG&f=1", "display_name": "Pork Py", "link": "https://stackoverflow.com/users/10524161/pork-py"}, "edited": false, "score": 0, "creation_date": 1564693259, "post_id": 57300131, "comment_id": 101125397, "body": "I think I may be able to interrogate the robot controller to return only the system timestamp. In the same script, I could get the Unix timestamp from the pc. Now I will have three csv files. One with system timestamp, one with Unix timestamp and one with both system and Unix only. I should then be able to combine my csv files using this third file as a synchronisation key. Watch this space!"}], "owner": {"reputation": 1, "user_id": 10524161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468834d6e5cffcdf600b927f5745cd75?s=128&d=identicon&r=PG&f=1", "display_name": "Pork Py", "link": "https://stackoverflow.com/users/10524161/pork-py"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564616497, "creation_date": 1564616497, "question_id": 57300131, "link": "https://stackoverflow.com/questions/57300131/how-to-add-unix-timestamp-to-incoming-universal-robots-data-in-python", "title": "How to add Unix timestamp to incoming Universal-Robots data in Python", "body": "<p>I'm having problems while attempting to collect robot data using python over tcp socket.</p>\n\n<p>Problems:\nI can get robot tool position data from Universal Robots'(UR) Real Time Data Exchange (RTDE), using TCP/IP socket. But I can't get this data via Robot Operating System (ROS).</p>\n\n<p>I can get 'Robotiq' force/torque data via ROS but not from RTDE.\nTherefore I must collect data separately and join data together.</p>\n\n<p>ROS uses Unix timestamp but the UR robot controller initiates its timestamp at zero on startup. </p>\n\n<p>Therefore, how is one expected to merge these data?\nWhy would anyone initialise their timestamp at zero?</p>\n\n<p>What I would like to know is; can I add my own system timestamp to this data by adding something like 'time.time()' somewhere in the provided python code? </p>\n\n<p>www.universal-robots.com/how-tos-and-faqs/how-to/ur-how-tos/real-time-data-exchange-rtde-guide-22229/</p>\n\n<p>At the bottom of the page on the above link, there is a package download for some example python code which demonstrates how RTDE parses and converts the incoming UR data into a .csv file.</p>\n\n<p>The code uses dictionaries for the incoming data whose keys are in an xml file included in the package.</p>\n\n<p>Everything I do it throws up an error because each piece of code seems to be expecting a certain number of args and I dont know enough about python to understant what's happening.\nThe script I was trying to alter in the package was 'record.py, see below. I imported time, then tried adding time.time() to various places to see what would happen. I got a lot of errors. </p>\n\n<p>I've spent a whole day trying to work this out. Half of which was on trying to work out why UR had such a strange timestamp that didn't seem to match anything.</p>\n\n<p>In case you don't want to open the package for yourself, below is the script 'record.py' that I think I should be able to add a timestamp to, but where???</p>\n\n<pre><code>#!/usr/bin/env/ python\nimport argparse\nimport logging\nimport sys\nsys.path.append('..')\nimport rtde.rtde as rtde\nimport rtde.rtde_config as rtde_config\nimport rtde.csv_writer as csv_writer\n\n#parameters\nparser = argparse.ArgumentParser()\nparser.add_argument('--host', default='localhost', help='name of host to connect to (localhost)')\nparser.add_argument('--port', type=int, default=30004, help='port number (30004)')\nparser.add_argument('--samples', type=int, default=0, help='number of samples to record')\nparser.add_argument('--frequency', type=int, default=125, help='the sampling frequency in Herz')\nparser.add_argument('--config', default='record_configuration.xml', help='data configuration file to use (record_configuration.xml)')\nparser.add_argument('--output', default='robot_data.csv', help='data output file to write to (robot_data.csv)')\nparser.add_argument(\"--verbose\", help=\"increase output verbosity\", action=\"store_true\")\nargs = parser.parse_args()\n\nif args.verbose:\n    logging.basicConfig(level=logging.INFO)\n\nconf = rtde_config.ConfigFile(args.config)\noutput_names, output_types = conf.get_recipe('out')\n\ncon = rtde.RTDE(args.host, args.port)\ncon.connect()\n\n# get controller version\ncon.get_controller_version()\n\n# setup recipes\nif not con.send_output_setup(output_names, output_types, frequency = args.frequency):\n    logging.error('Unable to configure output')\n    sys.exit()\n\n#start data synchronization\nif not con.send_start():\n    logging.error('Unable to start synchronization')\n    sys.exit()\n\nwith open(args.output, 'w') as csvfile:\n    writer = csv_writer.CSVWriter(csvfile, output_names, output_types)\n    writer.writeheader()\n\n    i = 1\n    keep_running = True\n    while keep_running:\n\n        if i%args.frequency == 0:\n            if args.samples &gt; 0:\n                sys.stdout.write(\"\\r\")\n                sys.stdout.write(\"{:.2%} done.\".format(float(i)/float(args.samples))) \n                sys.stdout.flush()\n            else:\n                sys.stdout.write(\"\\r\")\n                sys.stdout.write(\"{:3d} samples.\".format(i)) \n                sys.stdout.flush()\n        if args.samples &gt; 0 and i &gt;= args.samples:\n            keep_running = False\n        try:\n            state = con.receive()\n            if state is not None:\n                writer.writerow(state)\n            else:\n                sys.exit()\n        except KeyboardInterrupt:\n            keep_running = False\n        i += 1\n\nsys.stdout.write(\"\\rComplete!            \\n\")\n\ncon.send_pause()\ncon.disconnect()\n</code></pre>\n\n<p>After altering the code I was expecting to get a .csv file with a new first column called Timestamp populated with Unix timestamps per data entry.  </p>\n\n<p>What I got was garbage, no matter what I did. </p>\n\n<p>Many thanks for your help.</p>\n"}, {"tags": ["python", "loops", "numpy", "opencv"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 5, "creation_date": 1564617047, "post_id": 57300101, "comment_id": 101093970, "body": "<code>imgblur = np.where(img == 255, imggray, imgblur)</code>?"}, {"owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1564617610, "post_id": 57300101, "comment_id": 101094073, "body": "Hell yeah, you got it"}], "answers": [{"tags": [], "owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "is_accepted": true, "score": 0, "last_activity_date": 1564617989, "creation_date": 1564617989, "answer_id": 57300278, "question_id": 57300101, "link": "https://stackoverflow.com/questions/57300101/how-to-optimize-this-code-double-loop-in-python/57300278#57300278", "title": "how to optimize this code (Double loop in python)?", "body": "<p>Try <code>np.where()</code> which says: </p>\n\n<p><code>if img==255 then imgblur = imgray\n             else imgblur = imgblur</code></p>\n\n<pre><code>nx, ny = 5, 10\nimg = np.random.randint(255, size=(nx, ny))\nimgblur = np.random.uniform(0,1.0,size=(nx, ny))\nimggray = np.random.uniform(0,1.0,size=(nx, ny))\n\nimgblur =   np.where(img==255,imggray,imgblur)\nimgblur\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 713, "user_id": 7371707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ffd4213f87a6f6ea4d9c6ac0d179978?s=128&d=identicon&r=PG&f=1", "display_name": "ToughMind", "link": "https://stackoverflow.com/users/7371707/toughmind"}, "is_accepted": false, "score": 0, "last_activity_date": 1564620529, "last_edit_date": 1564620529, "creation_date": 1564620058, "answer_id": 57300475, "question_id": 57300101, "link": "https://stackoverflow.com/questions/57300101/how-to-optimize-this-code-double-loop-in-python/57300475#57300475", "title": "how to optimize this code (Double loop in python)?", "body": "<p>you can just try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>imgblur[imggray==255]=255\n</code></pre>\n\n<p>example code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import cv2\nimport numpy as np\n\nimg = cv2.imread('imgs/car1.jpg')\n\nimggray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n\nimgblur = np.zeros_like(imggray)\nimgblur[imggray &gt; 200] = 255\n\ncv2.imshow('imggray', imggray)\ncv2.imshow('imgblur', imgblur)\n\ncv2.waitKey(0)\n</code></pre>\n\n<p>imggray:<br>\n<a href=\"https://i.stack.imgur.com/OzzFV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OzzFV.jpg\" alt=\"imggray\"></a></p>\n\n<p>imgblur:<br>\n<a href=\"https://i.stack.imgur.com/1RRbp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1RRbp.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57300278, "answer_count": 2, "score": 1, "last_activity_date": 1564620529, "creation_date": 1564616233, "question_id": 57300101, "link": "https://stackoverflow.com/questions/57300101/how-to-optimize-this-code-double-loop-in-python", "title": "how to optimize this code (Double loop in python)?", "body": "<p>I had this code:</p>\n\n<pre><code>for x in range(len(img)):\n    for y in range(len(img[0])):\n        if img[x][y]==255 :\n            imgblur[x][y]=imggray[x][y]\n</code></pre>\n\n<p>I improved with this:</p>\n\n<pre><code>i, j = np.where(img == 255)\nfor x in range(i.shape[0]):\n    imgblur[i[x]][j[x]]=imggray[i[x]][j[x]]\n</code></pre>\n\n<p>Is there a way to improve more (Faster loop)?</p>\n"}, {"tags": ["python", "google-drive-api", "google-sheets-api"], "comments": [{"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 1, "creation_date": 1564617269, "post_id": 57300096, "comment_id": 101094010, "body": "About <code>I&#39;ve been able to read from the first tab</code>, can you provide your script? If you can do, please add it to your question. By this, we can know about your method for accessing to Spreadsheet. Of course, please remove your personal information."}, {"owner": {"reputation": 39, "user_id": 11088194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XLmpFl__Thk/AAAAAAAAAAI/AAAAAAAAAbU/PqyRHbeibXg/photo.jpg?sz=128", "display_name": "Atharva Gupta", "link": "https://stackoverflow.com/users/11088194/atharva-gupta"}, "reply_to_user": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 0, "creation_date": 1564619805, "post_id": 57300096, "comment_id": 101094444, "body": "@Tanaike I&#39;ve done that now. Thank you!"}, {"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 0, "creation_date": 1564620446, "post_id": 57300096, "comment_id": 101094562, "body": "Thank you for replying and adding the information. I proposed a modified script as an answer. Could you please confirm it? If I misunderstood your question and that was not the result you want, I apologize."}], "answers": [{"comments": [{"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "reply_to_user": {"reputation": 39, "user_id": 11088194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XLmpFl__Thk/AAAAAAAAAAI/AAAAAAAAAbU/PqyRHbeibXg/photo.jpg?sz=128", "display_name": "Atharva Gupta", "link": "https://stackoverflow.com/users/11088194/atharva-gupta"}, "edited": false, "score": 0, "creation_date": 1564626040, "post_id": 57300522, "comment_id": 101095560, "body": "@Atharva Gupta I&#39;m glad your issue was resolved. Thank you for replying."}], "tags": [], "owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "is_accepted": true, "score": 1, "last_activity_date": 1564620441, "creation_date": 1564620441, "answer_id": 57300522, "question_id": 57300096, "link": "https://stackoverflow.com/questions/57300096/how-do-i-access-different-tabs-in-a-google-sheets-via-the-google-sheets-api/57300522#57300522", "title": "How do I access different tabs in a Google Sheets via the Google Sheets API?", "body": "<ul>\n<li>You want to get values from sheets except for the sheet of the 1st index.</li>\n<li>You want to achieve this using gspread.</li>\n<li>You have already been able to get and put values for your Spreadsheet.</li>\n</ul>\n\n<p>If my understanding is correct, how about this modification?</p>\n\n<h3>From:</h3>\n\n<pre><code>sheet = client.open(\"Resume Data\").sheet1\n</code></pre>\n\n<h3>To:</h3>\n\n<pre><code>spreadsheetName = \"Resume Data\"\nsheetName = \"###\"  # &lt;--- please set the sheet name here.\nspreadsheet = client.open(spreadsheetName)\nsheet = spreadsheet.worksheet(sheetName)\n</code></pre>\n\n<h3>Note:</h3>\n\n<ul>\n<li>If you want to select the sheet using the index, please use <code>sheet = spreadsheet.get_worksheet(1)</code>. This means to select the sheet of 2nd index.</li>\n</ul>\n\n<h3>Reference:</h3>\n\n<ul>\n<li><a href=\"https://gspread.readthedocs.io/en/latest/user-guide.html#selecting-a-worksheet\" rel=\"nofollow noreferrer\">Selecting a Worksheet</a></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 11088194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XLmpFl__Thk/AAAAAAAAAAI/AAAAAAAAAbU/PqyRHbeibXg/photo.jpg?sz=128", "display_name": "Atharva Gupta", "link": "https://stackoverflow.com/users/11088194/atharva-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 1, "accepted_answer_id": 57300522, "answer_count": 1, "score": 0, "last_activity_date": 1564620441, "creation_date": 1564616211, "last_edit_date": 1564619686, "question_id": 57300096, "link": "https://stackoverflow.com/questions/57300096/how-do-i-access-different-tabs-in-a-google-sheets-via-the-google-sheets-api", "title": "How do I access different tabs in a Google Sheets via the Google Sheets API?", "body": "<p>I am trying to read a sheet from Google Drive using the Google Drive/Sheets API. I was wondering how to navigate between different tabs.</p>\n\n<p><img src=\"https://zapier.cachefly.net/storage/photos/b044a661dd7bab5251e312b9b3cabfc6.png\" alt=\"The tab is the circled part, (ignore the other stuff)\">\n(Ignore the other stuff, this is a random picture demonstrating what a tab is.)</p>\n\n<p>Essentially, what I want to do is be able to access the other tabs and read the text that is there as well. Each tab is in the same format. I've been able to read from the first tab and would like to do the same for the others as well.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import gspread\nfrom oauth2client.service_account import ServiceAccountCredentials\nimport pprint\n\n\n# Use credentials to interact with the Google Drive API\nscope = ['https://spreadsheets.google.com/feeds',\n         'https://www.googleapis.com/auth/drive']\ncredentials = ServiceAccountCredentials.from_json_keyfile_name(\n    'foo', scope)\nclient = gspread.authorize(credentials)\n\n# Opening the first sheet\nsheet = client.open(\"Resume Data\").sheet1\n\n# Prints the code in a nicer format\npp = pprint.PrettyPrinter()\n\n\n# Extract and print all of the values\nlist_of_resumes = sheet.get_all_records()\n\n# Printing\npp.pprint(list_of_resumes)\n</code></pre>\n"}, {"tags": ["python", "pandas", "loops", "dataframe", "nested"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1564616176, "post_id": 57300070, "comment_id": 101093793, "body": "You should add a small example dataset which can be copied by us. And based on that example, what your expected output is."}, {"owner": {"reputation": 519, "user_id": 3280613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db4b5d31e0ebc164c39247495b9251bf?s=128&d=identicon&r=PG&f=1", "display_name": "Celso", "link": "https://stackoverflow.com/users/3280613/celso"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1564654903, "post_id": 57300070, "comment_id": 101106176, "body": "@Erfan, thanks for the reminder. Just did that."}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1564616334, "creation_date": 1564616334, "answer_id": 57300111, "question_id": 57300070, "link": "https://stackoverflow.com/questions/57300070/avoid-nested-loops-when-iterating-over-pandas-dataframe-with-condition-over-item/57300111#57300111", "title": "Avoid nested loops when iterating over Pandas DataFrame with condition over items", "body": "<p>Here is one way <code>mask</code> the value of whole df then <code>stack</code> </p>\n\n<pre><code>df.where(df.abs()&gt;0.5).stack().reset_index().values.tolist()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 3280613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db4b5d31e0ebc164c39247495b9251bf?s=128&d=identicon&r=PG&f=1", "display_name": "Celso", "link": "https://stackoverflow.com/users/3280613/celso"}, "edited": false, "score": 0, "creation_date": 1564655451, "post_id": 57300173, "comment_id": 101106474, "body": "The problem is: (1) only gets items &gt;= 0.5 (and not items whose absolute values are &gt;= 0.5), but I believe this can be fixed by changing &quot;A &gt;= 0.5&quot; to &quot;np.abs(A) &gt;= 0.5&quot;; and (2) it doesn&#39;t get column and row names."}, {"owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "reply_to_user": {"reputation": 519, "user_id": 3280613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db4b5d31e0ebc164c39247495b9251bf?s=128&d=identicon&r=PG&f=1", "display_name": "Celso", "link": "https://stackoverflow.com/users/3280613/celso"}, "edited": false, "score": 0, "creation_date": 1564669806, "post_id": 57300173, "comment_id": 101114893, "body": "Point (2) is easy: when we have the correct output in numpy we can cast it into the pandas data frame back again."}, {"owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "reply_to_user": {"reputation": 519, "user_id": 3280613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db4b5d31e0ebc164c39247495b9251bf?s=128&d=identicon&r=PG&f=1", "display_name": "Celso", "link": "https://stackoverflow.com/users/3280613/celso"}, "edited": false, "score": 0, "creation_date": 1564670471, "post_id": 57300173, "comment_id": 101115312, "body": "In the mean time you have obviously added a prefered output to the question, which is fine, then it is very different to what I&#39;ve got out from the question without it. (I dont know, where the down vote is from. But at least we try to work with and for you)"}], "tags": [], "owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "is_accepted": false, "score": -1, "last_activity_date": 1564616924, "creation_date": 1564616924, "answer_id": 57300173, "question_id": 57300070, "link": "https://stackoverflow.com/questions/57300070/avoid-nested-loops-when-iterating-over-pandas-dataframe-with-condition-over-item/57300173#57300173", "title": "Avoid nested loops when iterating over Pandas DataFrame with condition over items", "body": "<p>Use numpy. Transform the values of the pandas Data frame to numpy with:</p>\n\n<pre><code>import numpy as np\n\nA = df.to_numpy()  \n</code></pre>\n\n<p>For having data I generate them first with random and then I pick out the data greater than 0.5:</p>\n\n<pre><code>A = np.random.randn(3, 6)\nB = A[A&gt;=0.5]\nB\n\narray([0.87244799, 1.35438111, 1.18743473, 0.65015131, 0.71182848,\n       0.85945553, 2.02416415, 0.53008776])\n</code></pre>\n"}], "owner": {"reputation": 519, "user_id": 3280613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db4b5d31e0ebc164c39247495b9251bf?s=128&d=identicon&r=PG&f=1", "display_name": "Celso", "link": "https://stackoverflow.com/users/3280613/celso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564654875, "creation_date": 1564616080, "last_edit_date": 1564654875, "question_id": 57300070, "link": "https://stackoverflow.com/questions/57300070/avoid-nested-loops-when-iterating-over-pandas-dataframe-with-condition-over-item", "title": "Avoid nested loops when iterating over Pandas DataFrame with condition over items", "body": "<p>The folllowing code iterates through each member of a Pandas DataFrame, asking whether the item's absolute value is >= 0.5 and, if yes, appends its value to a list together with corresponding column and row names:</p>\n\n<pre><code>record = []\nfor i in range(df.shape[0]):\n    for j in range(df.shape[1]):\n        if abs(df.iloc[i, j]) &gt;= 0.5:\n            record.append([df.columns[j], df.index[i], df.iloc[i, j]])\n</code></pre>\n\n<p>Of course it can take some time depending on the dataframe size, as it is quite inefficient to do those nested loops...</p>\n\n<p>Is there a better, quicker, more pythonic way to do this?</p>\n\n<p>Sample input:</p>\n\n<pre><code>      colA  colB  colC  colD\nrow1  -0.7   0.3   0.6  -0.2\nrow2   0.4  -0.3   0.8  -0.9\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>[['colA', 'row1', -0.7],\n ['colC', 'row1', 0.6],\n ['colC', 'row2', 0.8],\n ['colD', 'row2', -0.9]]\n</code></pre>\n"}, {"tags": ["python", "postgresql", "flask"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 0, "creation_date": 1564633350, "post_id": 57300084, "comment_id": 101096790, "body": "How should I pass the <code>user.id</code> to the route? do i have to pass in as an argument like <code>{(url_for=&#39;index&#39;, user.id = user.id)}</code> upon login? thanks for taking the time to troubleshoot together.."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 1, "creation_date": 1564633788, "post_id": 57300084, "comment_id": 101096869, "body": "You can do that, or you can simply use the <code>username</code> to perform an extra <code>SELECT</code> on the <code>users</code> table."}, {"owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 0, "creation_date": 1564634376, "post_id": 57300084, "comment_id": 101097014, "body": "I tried getting id by putting <code>id= session.get(&quot;id&quot;)</code> just like how I successfully got the username. But no luck..."}, {"owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 0, "creation_date": 1564634447, "post_id": 57300084, "comment_id": 101097029, "body": "why is getting session <code>username</code> works but for <code>id</code> it doesnt?"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 0, "creation_date": 1564634674, "post_id": 57300084, "comment_id": 101097104, "body": "I can&#39;t comment on this because I don&#39;t know how you handle user logins. Are you using a third party package or did you implement your own authentication method? The session does not get populated magically, some mechanism should store the data there after login."}, {"owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "edited": false, "score": 0, "creation_date": 1564635172, "post_id": 57300084, "comment_id": 101097218, "body": "im just using flask session."}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1564616152, "creation_date": 1564616152, "answer_id": 57300084, "question_id": 57300026, "link": "https://stackoverflow.com/questions/57300026/building-flask-app-sqlalchemy-exc-integrityerror-psycopg2-errors-foreignkeyv/57300084#57300084", "title": "Building Flask app - sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation)", "body": "<p>You seem to have declared the primary key of <code>reviews</code> table as a foreign key to <code>users</code>, which is not right. You should add a new column, say, <code>user_id</code> to the <code>reviews</code> table and make that a FK to <code>user.id</code> instead.</p>\n\n<p>Then you should find out the current user's id (by looking it up using the <code>users</code> table) and include that id in your <code>INSERT</code> clause, for example:</p>\n\n<pre><code>db.execute(\"INSERT INTO reviews (user_id, username, review, rating, date) VALUES (:user_id, :username, :review, :rating, :date)\", {\"user_id\": user_id, \"date\":date, \"review\":review, \"rating\":rating, \"username\":username})\n</code></pre>\n\n<p>As a side note, the <code>username</code> column is redundant for the <code>reviews</code> table as you already have a FK relation to the <code>users</code> table. If, for example, a <code>username</code> is changed in the <code>users</code> table it will not be automatically reflected to the <code>reviews</code> records for that user. It is recommended to normalise the table by removing that column and looking it up using the relation when needed.</p>\n"}], "owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 0, "accepted_answer_id": 57300084, "answer_count": 1, "score": 0, "last_activity_date": 1564616152, "creation_date": 1564615696, "question_id": 57300026, "link": "https://stackoverflow.com/questions/57300026/building-flask-app-sqlalchemy-exc-integrityerror-psycopg2-errors-foreignkeyv", "title": "Building Flask app - sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation)", "body": "<p>I am doing a project on a tutorial - I am suppose to build a flask app; a book review website. </p>\n\n<p>I have stumbled upon this problem for many hours and I am left clueless. It does seem like I have some lack of understanding under SQL and foreign keys.</p>\n\n<p><strong>The error is throwing this message:</strong><br>\n<code>sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"reviews\" violates foreign key constraint \"reviews_id_fkey\" DETAIL: Key (id)=(1) is not present in table \"users\". [SQL: INSERT INTO reviews (username, review, rating, date) VALUES (%(username)s, %(review)s, %(rating)s, %(date)s)] [parameters: {'username': 'katal90', 'review': 'hello', 'rating': '3', 'date': datetime.datetime(2019, 7, 31, 16, 18, 33, 332614)}] (Background on this error at: http://sqlalche.me/e/gkpj)</code></p>\n\n<p><strong>Here's the route where the issue is happening.</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@app.route('/book/&lt;string:isbn&gt;', methods = ['POST','GET'])\ndef book(isbn):\n    #import columns from database \n    res = db.execute(\"SELECT * FROM books WHERE isbn = :isbn\", {\"isbn\": isbn}).fetchone()\n    #import api from Goodreads (stats) \n    r = requests.get(\"https://www.goodreads.com/book/review_counts.json\", params={\"key\": \"L3FHyOR3IhCo3kctcUz3zg\", \"isbns\": isbn})\n    if r.status_code != 200:\n      raise ValueError\n    reviews_count=r.json()[\"books\"][0][\"reviews_count\"]\n    average_rating=r.json()[\"books\"][0][\"average_rating\"]\n    if request.method == \"POST\":\n        username = session.get(\"username\")\n        review = request.form.get(\"comment\")\n        rating = request.form.get(\"rating\")\n        date = datetime.now()\n        db.execute(\"INSERT INTO reviews (username, review, rating, date) VALUES (:username, :review, :rating, :date)\", {\"date\":date, \"review\":review, \"rating\":rating, \"username\":username})\n        db.commit()\n    return render_template(\"book.html\", reviews_count = reviews_count, average_rating = average_rating)\n</code></pre>\n\n<p><strong>Here's the entire SQL tables. in order for you to see what is happening with the structure; specially foreign keys.</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/4gKDa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4gKDa.png\" alt=\"review table\"></a>\n<a href=\"https://i.stack.imgur.com/SDq4W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SDq4W.png\" alt=\"users table\"></a>\n<a href=\"https://i.stack.imgur.com/8Uxjn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Uxjn.png\" alt=\"book table\"></a></p>\n\n<p>It seems to me that I am having a serious lack of understanding how Foreign Key should work and I would like to ask for some advises on the topic. \nHow should foreign keys relate to each other and why's the error message looking for id?</p>\n"}, {"tags": ["python", "scipy", "statsmodels", "calculus", "probability-density"], "comments": [{"owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1564616199, "post_id": 57299971, "comment_id": 101093798, "body": "Have you tried writing any code?"}, {"owner": {"reputation": 49, "user_id": 9646263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffa8b73debc2c58e28c1b92cf783abb7?s=128&d=identicon&r=PG&f=1", "display_name": "TheCuriouslyCodingFoxah", "link": "https://stackoverflow.com/users/9646263/thecuriouslycodingfoxah"}, "reply_to_user": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1564661839, "post_id": 57299971, "comment_id": 101110057, "body": "@razdi - I haven&#39;t tried to do it manually yet - just looking to see if there might be a method in <code>scipy</code> or <code>statsmodule</code> that might make this easy for me, I haven&#39;t been able to find one myself."}, {"owner": {"reputation": 49, "user_id": 9646263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffa8b73debc2c58e28c1b92cf783abb7?s=128&d=identicon&r=PG&f=1", "display_name": "TheCuriouslyCodingFoxah", "link": "https://stackoverflow.com/users/9646263/thecuriouslycodingfoxah"}, "reply_to_user": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1564666179, "post_id": 57299971, "comment_id": 101112565, "body": "Eureka! It&#39;s the .<code>interval()</code> method for a <code>rv_continuous</code> object in <code>scipy.stats</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "is_accepted": false, "score": 1, "last_activity_date": 1564618452, "creation_date": 1564618452, "answer_id": 57300327, "question_id": 57299971, "link": "https://stackoverflow.com/questions/57299971/finding-the-area-under-the-curve-of-a-probability-distribution-function-in-scipy/57300327#57300327", "title": "Finding the area under the curve of a probability distribution function in SciPy", "body": "<p>Something like this (?):</p>\n\n<pre><code>a = np.array([1, 2, 3, 4, 6, 7, 8, 9])\n\nnp.percentile(a, 50)\n\n5.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "edited": false, "score": 1, "creation_date": 1564671738, "post_id": 57310189, "comment_id": 101116071, "body": "<code>interval()</code> delivers the  &quot;<i>Confidence interval with equal areas around the median</i>&quot;. Why didnt you ask for that ? &quot;<i>Now I want to find the 90th percentile of the distribution</i>&quot; is not exactely the same."}], "tags": [], "owner": {"reputation": 49, "user_id": 9646263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffa8b73debc2c58e28c1b92cf783abb7?s=128&d=identicon&r=PG&f=1", "display_name": "TheCuriouslyCodingFoxah", "link": "https://stackoverflow.com/users/9646263/thecuriouslycodingfoxah"}, "is_accepted": false, "score": 1, "last_activity_date": 1564666238, "creation_date": 1564666238, "answer_id": 57310189, "question_id": 57299971, "link": "https://stackoverflow.com/questions/57299971/finding-the-area-under-the-curve-of-a-probability-distribution-function-in-scipy/57310189#57310189", "title": "Finding the area under the curve of a probability distribution function in SciPy", "body": "<p>Eureka! It's the <code>.interval()</code> method for a rv_continuous object in <code>scipy.stats</code> - just pass in your parameters and it will give you end points that contain that percentage of the distribution.</p>\n"}], "owner": {"reputation": 49, "user_id": 9646263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffa8b73debc2c58e28c1b92cf783abb7?s=128&d=identicon&r=PG&f=1", "display_name": "TheCuriouslyCodingFoxah", "link": "https://stackoverflow.com/users/9646263/thecuriouslycodingfoxah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1564666238, "creation_date": 1564615265, "last_edit_date": 1564618236, "question_id": 57299971, "link": "https://stackoverflow.com/questions/57299971/finding-the-area-under-the-curve-of-a-probability-distribution-function-in-scipy", "title": "Finding the area under the curve of a probability distribution function in SciPy", "body": "<p>I'm working on a univariate problem which involves aggregating payment data on a customer level - so that I have one row per customer, and the total amount they've spent with us.</p>\n\n<p>Using this distribution of payment data, I fit an appropriate probability distribution and calculated the maximum likelihood estimates for the parameters of the pdf. </p>\n\n<p>Now I want to find the 90th percentile of the distribution. If I was to do this by hand I would set .10 equal to the integral from x to infinity of my pdf and then solve for x.</p>\n\n<p>Is there a package in python/scipy/statsmodels that allows me to do this?</p>\n\n<p>Thanks in advance!</p>\n\n<p>Cheers</p>\n"}, {"tags": ["python", "python-3.x", "flask", "mocking", "python-mock"], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 2708233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b60c3b24ff3ac9b7506e67b8d26c8325?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2708233/saurabh"}, "edited": false, "score": 1, "creation_date": 1591602442, "post_id": 57300225, "comment_id": 110107111, "body": "In case you want to configure the mock in tests, store and return the <code>ps.start()</code> from <code>patch</code>."}], "tags": [], "owner": {"reputation": 1676, "user_id": 869764, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cAQKD.jpg?s=128&g=1", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/869764/guillaume"}, "is_accepted": true, "score": 6, "last_activity_date": 1564617512, "creation_date": 1564617512, "answer_id": 57300225, "question_id": 57299968, "link": "https://stackoverflow.com/questions/57299968/python-how-to-reuse-a-mock-to-avoid-writing-mock-patch-multiple-times/57300225#57300225", "title": "Python how to reuse a Mock to avoid writing mock.patch multiple times?", "body": "<p>You could use <a href=\"https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch\" rel=\"noreferrer\">patches</a> and reuse them in a <code>setUp</code> block.</p>\n\n<p>Patches are nice as you can \"unpatch\" things when you are done with the test, meaning you won't leave things mocked forever, as some other tests may require to run on the real code.</p>\n\n<p>On the link above, you will see the following piece of code:</p>\n\n<pre><code>&gt;&gt;&gt; class MyTest(TestCase):\n...     def setUp(self):\n...         patcher = patch('package.module.Class')\n...         self.MockClass = patcher.start()\n...         self.addCleanup(patcher.stop)\n...\n...     def test_something(self):\n...         assert package.module.Class is self.MockClass\n...\n</code></pre>\n\n<p>It works fine, but I don't really like to call <code>patch()</code>, <code>start()</code> and <code>addCleanup()</code> for every patch.</p>\n\n<p>You can easily factor this in a base class that you could reuse in your test classes:</p>\n\n<pre><code>class PatchMixin:\n\n    def patch(self, target, **kwargs):\n        p = mock.patch(target, **kwargs)\n        p.start()\n        self.addCleanup(p.stop)\n\nclass TestBlockingIo(unittest.TestCase, PatchMixin):\n\n    def setUp(self):\n        self.patch('__main__.authorize')\n        self.patch('__main__.BlockingIo.do')\n\n    def test_1(self):\n        r = testapp.get('/1/')\n        self.assertEquals(r.data, b'1')\n\n    def test_2(self):\n        r = testapp.get('/2/')\n        self.assertEquals(r.data, b'2')\n</code></pre>\n"}], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "accepted_answer_id": 57300225, "answer_count": 1, "score": 4, "last_activity_date": 1564617512, "creation_date": 1564615248, "question_id": 57299968, "link": "https://stackoverflow.com/questions/57299968/python-how-to-reuse-a-mock-to-avoid-writing-mock-patch-multiple-times", "title": "Python how to reuse a Mock to avoid writing mock.patch multiple times?", "body": "<p>Given code like the following:</p>\n\n<pre><code>import flask\nimport time\n\napp = flask.Flask(__name__)\n\ndef authorize():\n    print('starting authorize io')\n    time.sleep(1)\n    print('done authorize io')\n\nclass BlockingIo():\n    def __init__(self, n):\n        self.n = n\n    def do(self):\n        print('starting blocking io')\n        time.sleep(1)\n        print('ending blocking io')\n\n@app.route('/', methods=['GET'])\n@app.route('/&lt;int:n&gt;/', methods=['GET'])\ndef foo(n=1):\n    authorize()\n    b = BlockingIo(n)\n    b.do()\n    return str(n), 200\n\n#app.run(port=5000)\n</code></pre>\n\n<p>I want to be able to write several tests for <code>GET /n/</code>, each of which mocks <code>authorize</code> and <code>BlockingIO(n)</code>:</p>\n\n<pre><code>app.testing = True\ntestapp = app.test_client()\n\nimport unittest\nfrom unittest import mock\n\nmock.patch('__main__.authorize')\n\nclass TestBlockingIo(unittest.TestCase):\n    @mock.patch('__main__.authorize')\n    @mock.patch('__main__.BlockingIo.do')\n    def test_1(self, m, m2):\n        r = testapp.get('/1/')\n        self.assertEquals(r.data, b'1')\n    @mock.patch('__main__.authorize')\n    @mock.patch('__main__.BlockingIo.do')\n    def test_2(self, m, m2):\n        r = testapp.get('/2/')\n        self.assertEquals(r.data, b'2')\n\nunittest.main()\n</code></pre>\n\n<p>However, I do not want to write out <code>@mock.patch</code> decorator over and over again.</p>\n\n<p>I know we can use a class decorator, and I can subclass for more reusability:</p>\n\n<pre><code>@mock.patch('__main__.authorize')\n@mock.patch('__main__.BlockingIo.do')\nclass TestBlockingIo(unittest.TestCase):\n    def test_1(self, m, m2):\n        r = testapp.get('/1/')\n        self.assertEquals(r.data, b'1')\n    def test_2(self, m, m2):\n        r = testapp.get('/2/')\n        self.assertEquals(r.data, b'2')\n</code></pre>\n\n<p>But, this forces all the test functions in the class to take one extra argument for each mock. What if I have tests in this class that do not need mocks for <code>BlockingIo</code> or <code>authorize</code>?</p>\n\n<p>I suppose what I would like is a way to do the following:</p>\n\n<pre><code>m = mock.something('__main__.authorize')\nm2 = mock.something('__main__.BlockingIo.do')    \n\nclass TestBlockingIo(unittest.TestCase):\n    def test_1(self):\n        r = testapp.get('/1/')\n        self.assertEquals(r.data, b'1')\n    def test_2(self):\n        r = testapp.get('/2/')\n        self.assertEquals(r.data, b'2')\n</code></pre>\n\n<p>How can I reuse my <code>@mock.patch('__main__.authorize')</code> and <code>@mock.patch('__main__.BlockingIo.do')</code> to avoid repeating myself through the tests?</p>\n"}, {"tags": ["python", "python-3.x", "pycurl"], "answers": [{"tags": [], "owner": {"reputation": 9592, "user_id": 9540925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhOpI.png?s=128&g=1", "display_name": "D. SM", "link": "https://stackoverflow.com/users/9540925/d-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1568953677, "creation_date": 1568953677, "answer_id": 58021778, "question_id": 57299946, "link": "https://stackoverflow.com/questions/57299946/pycurl-fails-to-upload-after-301-redirection-on-python3/58021778#58021778", "title": "Pycurl fails to upload after 301 redirection on Python3", "body": "<p>PycURL has different handling of files in Python 2 and Python 3. It sounds like you are running into this difference. See this manual page for the description of behavior: <a href=\"http://pycurl.io/docs/latest/files.html\" rel=\"nofollow noreferrer\">http://pycurl.io/docs/latest/files.html</a></p>\n\n<p>It sounds like on Python 2, libcurl is able to perform a stat(2) call on the open file description to figure out its size. On Python 3 there is no file descriptor being passed but a function, hence stat(2) approach doesn't work and no file length is calculated for you.</p>\n\n<p>To troubleshoot the Unicode decode error, on Python 2 change the code to use <code>READFUNCTION</code> rather than <code>READDATA</code> and see what error you get. If the server returns an error message in the response which is not valid utf-8, Python 3 may fail in the way you describe.</p>\n"}], "owner": {"reputation": 11, "user_id": 11860919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fwBomaCLr8I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd0QQ_AUCwdHjarxWPb_BBQeSQiVw/photo.jpg?sz=128", "display_name": "Fernando Fernandez", "link": "https://stackoverflow.com/users/11860919/fernando-fernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568953677, "creation_date": 1564615093, "question_id": 57299946, "link": "https://stackoverflow.com/questions/57299946/pycurl-fails-to-upload-after-301-redirection-on-python3", "title": "Pycurl fails to upload after 301 redirection on Python3", "body": "<p>I'm troubleshooting an existing python based Nagios plugin that uses PycURL to test that different actions can be taken on a remote WebDav service (GET,PUT,DELETE). We are having an issue when the service responds with a 301 redirection with the error \"411 Length Required\".</p>\n\n<p>After checking the headers of the PUT requests for both the original service and to the redirected one, the latter is missing the \"Content-Length\" header, which is why this is failing. I haven't been able to find if there is an option that needs to be setup that is maybe needed for this to occur.</p>\n\n<p>I am able to fix this in Python2 by adding the filesize using the option \"INFILESIZE\":</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>c.setopt(c.INFILESIZE, os.path.getsize(filepath))\n</code></pre>\n\n<p>The code looks like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/bin/python2\n\nimport pycurl\nimport os\n\nfilepath = '/tmp/testfile'\n\nc = pycurl.Curl()\nc.setopt(c.URL, 'http://remote_host.com/filename')\n\nc.setopt(c.UPLOAD, 1)\nfile = open(filepath)\nc.setopt(c.READDATA, file)\nc.setopt(c.FOLLOWLOCATION, 1)\nc.setopt(c.INFILESIZE, os.path.getsize(filepath))\n\nc.perform()\nc.close()\n\nfile.close()\n</code></pre>\n\n<p>However on Python3 (I've tried on 3.4, 3.6 and 3.7) the same code exits with error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/lib64/python3.7/codecs.py\", line 322, in decode\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xda in position 2: invalid continuation byte\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\npycurl.error: (42, 'operation aborted by callback')\n</code></pre>\n\n<p>And I'm do not understand if this is an issue of with the reply from the server. But if I remove the INFILESIZE option, then it just fails with the 411 error mentioned above.</p>\n\n<p>If anyone has any clue what I'm doing wrong, it would be greatly appreciated.</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "customization"], "comments": [{"owner": {"reputation": 608, "user_id": 10442615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6874746332a2df959295ed0f607aa84?s=128&d=identicon&r=PG&f=1", "display_name": "Drees", "link": "https://stackoverflow.com/users/10442615/drees"}, "edited": false, "score": 0, "creation_date": 1564622947, "post_id": 57299933, "comment_id": 101095006, "body": "You can create a class or ui using qtdesigner for the single widget and add it to a layout multiple times, as you said. For the blinking LEDs you can create QLabels and add red,yellow, green icons to them and use a QTimer to show/hide the icons imitating a blinking led"}, {"owner": {"reputation": 608, "user_id": 10442615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6874746332a2df959295ed0f607aa84?s=128&d=identicon&r=PG&f=1", "display_name": "Drees", "link": "https://stackoverflow.com/users/10442615/drees"}, "edited": false, "score": 0, "creation_date": 1564626241, "post_id": 57299933, "comment_id": 101095592, "body": "Also you can do something with the QPropertyAnimation.  <a href=\"http://zetcode.com/pyqt/qpropertyanimation/\" rel=\"nofollow noreferrer\">zetcode.com/pyqt/qpropertyanimation</a>"}, {"owner": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "reply_to_user": {"reputation": 608, "user_id": 10442615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6874746332a2df959295ed0f607aa84?s=128&d=identicon&r=PG&f=1", "display_name": "Drees", "link": "https://stackoverflow.com/users/10442615/drees"}, "edited": false, "score": 0, "creation_date": 1565028952, "post_id": 57299933, "comment_id": 101214349, "body": "Hi @Drees, thanks for the suggesstion, I ended up creating a label for each of the LEDs and used <code>self.yellow_led_label.setStyleSheet(&quot;QLabel {background-color : yellow; border-color : black; border-width : 1px; border-style : solid; border-radius : 10px; min-height: 20px; min-width: 20px}&quot;)</code> to create a circular label and set colors for the LEDs. I have not implemented the animation yet, but thanks for that link as well."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "edited": false, "score": 0, "creation_date": 1565028607, "post_id": 57315567, "comment_id": 101214206, "body": "Thanks for the reply and the code snippet to draw the connector. We ended up excluding it due to space considerations. I ended up creating a vertical layout for the blue box, added it to a container widget and set the color on the widget to blue using <code>setStyleSheet</code>. I did this because I have not used <code>QFrame</code> before. Is there a specific reason why you prefer <code>QFrame</code> over Layout in this case? Or was it becuase you wanted to substitute it for the QPainter approach I had posted in the original question?"}, {"owner": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "edited": false, "score": 0, "creation_date": 1565028825, "post_id": 57315567, "comment_id": 101214296, "body": "I am also curious as to how you arrived at the <code>cablePen = QtGui.QColor(77, 122, 194)</code> RBG numbering for the blue? I ended up using that, but would like to find out for future references."}, {"owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "reply_to_user": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "edited": false, "score": 0, "creation_date": 1565108612, "post_id": 57315567, "comment_id": 101245092, "body": "The QFrame was indeed to avoid unnecessary paintEvent override, since only widgets can be used as stylesheet element selectors, not layouts; it could also done by means of a simple QWidget, as long as a correct selector (object name or custom property) is used. I used your source image to get the cable color with a color picker (actually, Qt&#39;s pixeltool); since it&#39;s antialised I just choose the color that matched your example the most."}], "tags": [], "owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "is_accepted": false, "score": 0, "last_activity_date": 1564686395, "creation_date": 1564686395, "answer_id": 57315567, "question_id": 57299933, "link": "https://stackoverflow.com/questions/57299933/creating-a-complex-custom-widget-in-pyqt5-and-adding-it-to-a-qgridlayout/57315567#57315567", "title": "Creating a complex custom widget in PyQt5 and adding it to a QGridlayout", "body": "<p>There's no need to use QPainter for the blue square, as you can use stylesheets for your whole widget, the trick is to use selectors.</p>\n\n<p>I tried to create your widget and used this stylesheet:</p>\n\n<pre><code>    Battery {\n        background-color: white;\n    }\n    QFrame#statusFrame {\n        background-color: rgb(64, 112, 190);\n    }\n    QFrame#statusFrame QLabel {\n        color: white;\n        font-weight: bold;\n        font-size: 24pt;\n    }\n    QLineEdit {\n        border: 1px solid black;\n        font-size: 24pt;\n    }\n    #serialLabel {\n        font-weight: bold;\n        font-size: 16pt;\n    }\n</code></pre>\n\n<p>I created a \"container\" QWidget, the status rectangle is actually a QFrame with its own layout, which I named <code>statusFrame</code> (you can set it in designer, or by means of <code>setObjectName(str)</code>).<br>\nBy using object names and child selectors, I was able to set specific fonts for its labels by using the <code>QFrame#statusFrame QLabel</code> selector (which means \"apply to each QLabel that is a child of a QFrame\"); I also set the <code>serialLabel</code> object name to the s/n label, allowing me to set a different font size.</p>\n\n<p>You can do this from code or using designer, just remember to set the right object names and parent/children hierarchy.</p>\n\n<p>I was able to draw the \"connector\" part too, which requires to set fixed margins to the main widget:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Battery(QtWidgets.QWidget):\n    connPath = QtGui.QPainterPath()\n    connPath.addRect(30, 10, 40, 28)\n    connPath.moveTo(30, 16)\n    connPath.lineTo(45, 16)\n    connPath.moveTo(30, 24)\n    connPath.lineTo(45, 24)\n    connPath.moveTo(30, 32)\n    connPath.lineTo(45, 32)\n    cablePen = QtGui.QColor(77, 122, 194)\n\n    def __init__(self):\n        QtWidgets.QWidget.__init__(self)\n        # the following is only if you create the whole widget from code,\n        # otherwise ensure to set both widget and layout contentsMargins\n        # accordingly in designer\n        self.setContentsMargins(25, 50, 10, 10)\n        layout = QtWidgets.QGridLayout()\n        self.setLayout(layout)\n        layout.setContentsMargins(0, 0, 0, 0)\n        # ...\n\n    def paintEvent(self, event):\n        qp = QtGui.QPainter(self)\n        qp.setRenderHints(qp.Antialiasing)\n        qp.translate(.5, .5)\n        qp.drawPath(self.connPath)\n\n        qp.setPen(self.cablePen)\n        cablePath = QtGui.QPainterPath()\n        cablePath.moveTo(30, 24)\n        top = self.statusFrame.geometry().top()\n        cablePath.quadTo(0, top + 20, 25, top + 40)\n        qp.drawPath(cablePath)\n</code></pre>\n\n<p>As you can see, it's almost the same as yours.</p>\n\n<p><a href=\"https://i.stack.imgur.com/j0k3y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j0k3y.png\" alt=\"screenshot of the result\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "is_accepted": false, "score": 2, "last_activity_date": 1565039433, "last_edit_date": 1565039433, "creation_date": 1565029596, "answer_id": 57364199, "question_id": 57299933, "link": "https://stackoverflow.com/questions/57299933/creating-a-complex-custom-widget-in-pyqt5-and-adding-it-to-a-qgridlayout/57364199#57364199", "title": "Creating a complex custom widget in PyQt5 and adding it to a QGridlayout", "body": "<p>Python code for the custom widget I ended up creating. The widget looks as follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UhfdR.png\" alt=\"custom_widget_screeenshot\"></p>\n\n<pre><code>from PyQt5.QtGui import QPainter, QPen,QBrush,QColor\nfrom PyQt5.QtCore import Qt\nfrom PyQt5.QtWidgets import QApplication, QMainWindow, QWidget, QHBoxLayout,QPushButton, QLineEdit, QLabel, QVBoxLayout, QHBoxLayout, QSizePolicy, QGroupBox\nimport sys\n\nclass BatteryStatusWidget(QWidget):\n    def __init__(self):\n        super(BatteryStatusWidget, self).__init__()\n        #Voltage widgets\n        self.voltage_text = QLineEdit()\n        self.voltage_text.setReadOnly(True)\n        self.voltage_label = QLabel(\"V\")\n        self.voltage_label.setStyleSheet(\"QLabel {color : white}\")\n\n        #Status widgets\n        self.status_text = QLineEdit()\n        self.status_text.setReadOnly(True)\n        self.status_label = QLabel(\"STATUS\")\n        self.status_label_font = QtGui.QFont()\n        self.status_label_font.setPointSize(12)\n        self.status_label.setFont(self.status_label_font)\n        self.status_label.setAlignment(QtCore.Qt.AlignCenter)\n        self.status_label.setStyleSheet(\"QLabel {color : white}\")\n\n        #Serial number\n        self.serial_number_text = QLineEdit()\n        self.serial_number_label = QLabel(\"S/N\")\n\n        #LED widgets\n        self.yellow_led_label = QLabel()\n        self.yellow_led_label.setStyleSheet(\"QLabel {background-color : yellow; border-color : black; border-width : 1px; border-style : solid; border-radius : 10px; min-height: 20px; min-width: 20px}\")\n        self.green_led_label = QLabel()\n        self.green_led_label.setStyleSheet(\"QLabel {background-color : green; border-color : black; border-width : 1px; border-style : solid; border-radius : 10px; min-height: 20px; min-width: 20px}\")\n        self.red_led_label = QLabel()\n        self.red_led_label.setStyleSheet(\"QLabel {background-color : red; border-color : black; border-width : 1px; border-style : solid; border-radius : 10px; min-height: 20px; min-width: 20px}\")\n\n        #Number Identifier Label\n        #This label is for tagging the widget with the same label as on the PCB\n        self.number_label = QLabel(\"Test\")\n        self.number_label.setAlignment(QtCore.Qt.AlignCenter)\n        self.number_label_font = QtGui.QFont()\n        self.number_label_font.setPointSize(12)\n        self.number_label_font.setBold(True)\n        self.number_label.setFont(self.number_label_font)\n\n        #Layouts\n        #voltage layout\n        self.voltage_layout = QHBoxLayout()\n        self.voltage_layout.addWidget(self.voltage_text)\n        self.voltage_layout.addWidget(self.voltage_label)\n\n        #Serial number layout\n        self.serial_num_layout = QHBoxLayout()\n        self.serial_num_layout.addWidget(self.serial_number_label)\n        self.serial_num_layout.addWidget(self.serial_number_text)\n\n        #Voltage and status box layouts\n        self.blue_container = QWidget()\n        self.blue_container.setStyleSheet(\"background-color:rgb(77, 122, 194);\")\n        self.blue_box_layout = QVBoxLayout()\n        self.blue_box_layout.addLayout(self.voltage_layout)\n        self.blue_box_layout.addWidget(self.status_text)\n        self.blue_box_layout.addWidget(self.status_label)\n        self.blue_container.setLayout(self.blue_box_layout)\n\n\n        #Blue box+ serial num layout\n        self.non_led_layout = QVBoxLayout()\n        #self.non_led_layout.addWidget(self.number_label)\n        self.non_led_layout.addWidget(self.blue_container)\n        self.non_led_layout.addLayout(self.serial_num_layout)\n\n        #LED layout\n        self.led_layout = QVBoxLayout()\n        self.led_layout.addWidget(self.yellow_led_label)\n        self.led_layout.addWidget(self.green_led_label)\n        self.led_layout.addWidget(self.red_led_label)\n        self.led_layout.addStretch(1)\n\n        #Main Layout\n        self.main_layout = QHBoxLayout()\n        self.main_layout.addLayout(self.non_led_layout)\n        self.main_layout.addLayout(self.led_layout)\n\n        #Main group box\n        self.main_group_box = QGroupBox()\n        self.main_group_box.setStyleSheet(\"QGroupBox{font-size: 10px}\")\n        self.main_group_box.setTitle(\"Chan #\")\n        self.main_group_box.setLayout(self.main_layout)\n\n        #Outer main layout to accomodate the group box\n        self.outer_main_layout = QVBoxLayout()\n        self.outer_main_layout.addWidget(self.main_group_box)\n\n        #Set the main layout\n        self.setLayout(self.outer_main_layout)\n        self.setWindowTitle(\"Battery Widget\")\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    main_window = BatteryStatusWidget()\n    main_window.show()\n    app.exec_()\n</code></pre>\n\n<p>I was able to easily create 30 instances of the custom widget and add it to a <code>QGridLayout</code> as I posted in my question. The final GUI screen looks as follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/efzKF.png\" alt=\"final_GUI_window_screenshot\"></p>\n"}], "owner": {"reputation": 41, "user_id": 9536456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLQsgS2Ceo8/AAAAAAAAAAI/AAAAAAAAAIc/M5STdQ5yEXM/photo.jpg?sz=128", "display_name": "S Desai", "link": "https://stackoverflow.com/users/9536456/s-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1511, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1565039451, "creation_date": 1564614905, "last_edit_date": 1565039451, "question_id": 57299933, "link": "https://stackoverflow.com/questions/57299933/creating-a-complex-custom-widget-in-pyqt5-and-adding-it-to-a-qgridlayout", "title": "Creating a complex custom widget in PyQt5 and adding it to a QGridlayout", "body": "<p>I have to create a custom widget that looks like the following:</p>\n\n<p>custom_widget_sketch</p>\n\n<p><img src=\"https://i.stack.imgur.com/MUitX.png\" alt=\"\"></p>\n\n<p>Each custom widget is a representation of one LIPO battery, and displays the battery volatge <code>(V)</code>, status text <code>(charging, discharging, etc)</code>, serial number of the battery <code>(S/N)</code> and three status <code>LEDs</code> (yellow, green and red)</p>\n\n<p>After I have created the custom widget I need to add 30 of these in a grid of 6*5. My assumption here is that once I have created that custom widget it should be as simple as adding say a QPushButton in a QGridLayout like so:</p>\n\n<pre><code>custom_layput = QGridLayout()\ncustom_layout.addWidget(custom_widget, 0, 0)\ncustom_layout.addWidget(custom_widget, 0, 1)\n\n.\n.\n.\n\ncustom_layout.addWidget(custom_widget, 6, 5)\n</code></pre>\n\n<p>The final screen would look like this:</p>\n\n<p>main_window_sketch</p>\n\n<p><img src=\"https://i.stack.imgur.com/9vM99.png\" alt=\"\"></p>\n\n<p>Considering all of these requirements I have the following questions:</p>\n\n<ol>\n<li>Will I able able to create such a complex/rich custom widget using PyQt5? Is it doable?</li>\n<li>Is this the correct approach to create the custom widget: first draw a square using QPainter (this is the blue square in the custom_widget_sketch), then add QLineEdits to dispaly the voltage (V) text, serial number (S/N) text and the Status text, add a QLabel for displaying the \"V\", \"S/N\" and \"STATUS\" labels in the custom widget, then draw the three circles: one each for the yellow, green and red <code>LEDs</code>, then use a combination of <code>QVBoxLayout</code> and QHBoxLayout to arrange the <code>QLineEdits</code>, <code>QLabels</code>, the square and the circles (LED indicators)</li>\n<li>How do I package this custom widget such that I can simply add it to a layout like I would add a <code>QPushButton</code> or a <code>QLineEdit</code>?</li>\n</ol>\n\n<p>PS: The custom_widget_sketch also contains a line and a square with three lines inside it in the top left corner. This is to depict the connector for the LIPO battery. It may be too complex to implement that right now. So I would be happy even if I am able to implement everything other than these two elements</p>\n\n<p>I have been through a few SO questions but they all refer to one tutorial, which is not my end goal.</p>\n\n<p>I would appreciate any code snippets, general outline of code/steps to follow or links to any articles/tutorials that create custom widgets similar to the one I wish to create. </p>\n"}, {"tags": ["python", "arrays", "sum", "checksum"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1564615268, "post_id": 57299924, "comment_id": 101093616, "body": "I don&#39;t see the problem. Just calculate each total separately, then add them together. You say you know how to do the first part."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1564615367, "post_id": 57299924, "comment_id": 101093641, "body": "Is there something more complicated about it, like the search strings are dynamic, or the number of alements in the top-level array is variable?"}, {"owner": {"reputation": 548, "user_id": 4047444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-xRHbFjNlojg/AAAAAAAAAAI/AAAAAAAAGU0/vc870Jh0e0I/photo.jpg?sz=128", "display_name": "dreamzboy", "link": "https://stackoverflow.com/users/4047444/dreamzboy"}, "edited": false, "score": 1, "creation_date": 1564615454, "post_id": 57299924, "comment_id": 101093656, "body": "I have no idea how you get 3+2 = 5 in the first place or understand exactly what you&#39;re trying to accomplish.  Please provide more details."}, {"owner": {"reputation": 189, "user_id": 11037723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9caf57adbeffd4816644943f4c22137?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilia", "link": "https://stackoverflow.com/users/11037723/cecilia"}, "reply_to_user": {"reputation": 548, "user_id": 4047444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-xRHbFjNlojg/AAAAAAAAAAI/AAAAAAAAGU0/vc870Jh0e0I/photo.jpg?sz=128", "display_name": "dreamzboy", "link": "https://stackoverflow.com/users/4047444/dreamzboy"}, "edited": false, "score": 0, "creation_date": 1564650590, "post_id": 57299924, "comment_id": 101103801, "body": "HI @dreamzboy in the first 1D array, there are three elements that contain &#39;aaa&#39;, in the second 1D array, there are two elements that contain &#39;bbb&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1564615522, "creation_date": 1564615522, "answer_id": 57300005, "question_id": 57299924, "link": "https://stackoverflow.com/questions/57299924/how-to-calculate-how-many-elements-which-contain-a-certain-string-in-2d-array/57300005#57300005", "title": "How to calculate how many elements which contain a certain string in 2D array?", "body": "<p>For a general solution where you have n prefixes corresponding to n sublists, you can use <code>enumerate</code> to figure out which sublist you are in and lookup the appropriate prefix to use, then sum the tests:</p>\n\n<pre><code>l = [[\"aaa-1-2\", \"aaa-3-4\",\"bbb-y-t\",\"aaa-5-t\"],\n     [\"bbb-1-2\", \"dfs-3-4\", \"bbb-a-9\",\"yui-5-t\"]]\n\nprefix = ['aaa', 'bbb']    \nsum(prefix[i] in s for i, sub in enumerate(l) for s in sub)\n\n# 5\n</code></pre>\n\n<p>If you have more sublists and more stings you can just add to the prefix list.</p>\n"}], "owner": {"reputation": 189, "user_id": 11037723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9caf57adbeffd4816644943f4c22137?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilia", "link": "https://stackoverflow.com/users/11037723/cecilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1565811554, "accepted_answer_id": 57300005, "answer_count": 1, "score": -2, "last_activity_date": 1564617373, "creation_date": 1564614856, "last_edit_date": 1564617373, "question_id": 57299924, "link": "https://stackoverflow.com/questions/57299924/how-to-calculate-how-many-elements-which-contain-a-certain-string-in-2d-array", "closed_reason": "Needs details or clarity", "title": "How to calculate how many elements which contain a certain string in 2D array?", "body": "<p>I have a 2D array like this:</p>\n\n<pre><code>[[aaa-1-2,\n  aaa-3-4,\n  bbb-y-t,\n  aaa-5-t],\n[bbb-1-2,\n  dfs-3-4,\n  bbb-a-9,\n  yui-5-t]]\n</code></pre>\n\n<p>I want to write a function or something to get the sum of the elements which contain 'aaa' (in <code>[aaa-1-2, aaa-3-4, bbb-y-t, aaa-5-t]</code>), and the sum of 'bbb' in <code>[bbb-1-2, dfs-3-4, bbb-a-9, yui-5-t]</code>.</p>\n\n<p>In this example, the sum should be <code>3+2=5</code>, I only know how to calculate the sum of the exact same elements between two arrays, but not sure how to solve this, can someone help me with this? thanks.</p>\n"}, {"tags": ["python", "python-2.7", "process"], "answers": [{"comments": [{"owner": {"reputation": 426, "user_id": 5156790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d11a30004e6f9bb5365e8bb38a49815a?s=128&d=identicon&r=PG&f=1", "display_name": "blindside044", "link": "https://stackoverflow.com/users/5156790/blindside044"}, "edited": false, "score": 0, "creation_date": 1564615403, "post_id": 57299934, "comment_id": 101093647, "body": "CTRL + D did nothing during the script. CTRL + C displayed ^C on my screen but the script continued running. CTRL + \\ seems to have done the trick though. Thank you."}], "tags": [], "owner": {"reputation": 457, "user_id": 9821289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sgillen", "link": "https://stackoverflow.com/users/9821289/sgillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1564614915, "creation_date": 1564614915, "answer_id": 57299934, "question_id": 57299897, "link": "https://stackoverflow.com/questions/57299897/terminating-python2-script-service-with-ctrlz/57299934#57299934", "title": "terminating python2 script &amp; service with CTRL+Z", "body": "<p>SIGSTP is a signal to <em>suspend</em> a process, it sounds like you want to terminate a process. You can try sending Ctrl-C or CTRL-D instead, which should send a SIGINT signal.</p>\n\n<p>I believe you could also try CTRL-\\ which sends SIGQUIT. </p>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 11530809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuCH7.jpg?s=128&g=1", "display_name": "Ben Rauzi", "link": "https://stackoverflow.com/users/11530809/ben-rauzi"}, "edited": false, "score": 0, "creation_date": 1564615508, "post_id": 57299964, "comment_id": 101093670, "body": "Also check out this post: <a href=\"https://stackoverflow.com/questions/19782075/how-to-stop-terminate-a-python-script-from-running\" title=\"how to stop terminate a python script from running\">stackoverflow.com/questions/19782075/&hellip;</a>"}], "tags": [], "owner": {"reputation": 377, "user_id": 11530809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuCH7.jpg?s=128&g=1", "display_name": "Ben Rauzi", "link": "https://stackoverflow.com/users/11530809/ben-rauzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564615217, "creation_date": 1564615217, "answer_id": 57299964, "question_id": 57299897, "link": "https://stackoverflow.com/questions/57299897/terminating-python2-script-service-with-ctrlz/57299964#57299964", "title": "terminating python2 script &amp; service with CTRL+Z", "body": "<p>Use <code>Ctrl + C</code>. <code>SIGTSTP</code> suspends the process, hence why it keeps it open, but does not terminate it.\n(Note: On a Linux terminal use <code>Ctrl + \\</code>, otherwise use <code>Ctrl + C</code> or <code>Ctrl + D</code>)</p>\n\n<p>Or just use <code>sys.exit()</code></p>\n"}], "owner": {"reputation": 426, "user_id": 5156790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d11a30004e6f9bb5365e8bb38a49815a?s=128&d=identicon&r=PG&f=1", "display_name": "blindside044", "link": "https://stackoverflow.com/users/5156790/blindside044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57299934, "answer_count": 2, "score": 0, "last_activity_date": 1564615217, "creation_date": 1564614558, "last_edit_date": 1564614898, "question_id": 57299897, "link": "https://stackoverflow.com/questions/57299897/terminating-python2-script-service-with-ctrlz", "title": "terminating python2 script &amp; service with CTRL+Z", "body": "<p>Currently whenever I press <code>CTRL + Z</code> on a lengthy script I was given, it immediately terminates the script (<code>[1+]</code> stopped(<code>SIGTSTP</code>)  <code>./test.py</code>) which is what I want, but it also leaves the <code>python2</code> process running (when I type ps to look at processes), which forces me to use <code>killall -9 python2</code>, which I do not want to do every time. Is there a way to immediately terminate a script that doesn't leave the python2 process running in the background?</p>\n\n<p>There is no <code>SIGTSTP</code> currently in the code that I see but I did try using the following code with no luck. It didn't even exit the script when I pressed <code>CTRL + Z</code>.</p>\n\n<pre><code>def handler(signum, frame):\n    sys.exit(\"CTRL+Z pressed. Exiting Test\")\n\nsignal.signal(signal.SIGTSTP, handler)\n</code></pre>\n"}, {"tags": ["python", "tweepy"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1564639351, "post_id": 57300611, "comment_id": 101098367, "body": "it works! the startswith and createfriendship part was what i was looking for thanks"}, {"owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1564639481, "post_id": 57300611, "comment_id": 101098399, "body": "just wondering now how to make it smarter, because seems like tweets such as &quot;follow,like and retweet @ plasconuganda timeline to hear more about it #businessbehindfashion @ arapapabysanta  @ plasconuganda  @ ugaman01&quot; make me follow everyone when i should only be wanting to follow @ plasconuganda, which is the person that is relevant"}, {"owner": {"reputation": 159, "user_id": 7870777, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bXP2G2daQwo/AAAAAAAAAAI/AAAAAAAAOuE/88B7dSP9h60/photo.jpg?sz=128", "display_name": "Isin Altinkaya", "link": "https://stackoverflow.com/users/7870777/isin-altinkaya"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1564651860, "post_id": 57300611, "comment_id": 101104526, "body": "You can just modify the code to follow the first person mentioned after the word &quot;follow&quot; then break. And you should split for comma (and anything you think may come after the follow word) too. Or you can search for subtext &quot;follow&quot; in textlist.  Please let me know if you need any help with the modification."}], "tags": [], "owner": {"reputation": 159, "user_id": 7870777, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bXP2G2daQwo/AAAAAAAAAAI/AAAAAAAAOuE/88B7dSP9h60/photo.jpg?sz=128", "display_name": "Isin Altinkaya", "link": "https://stackoverflow.com/users/7870777/isin-altinkaya"}, "is_accepted": true, "score": 2, "last_activity_date": 1564621434, "creation_date": 1564621434, "answer_id": 57300611, "question_id": 57299889, "link": "https://stackoverflow.com/questions/57299889/getting-all-users-mentioned-in-a-tweet-text-and-their-user-ids/57300611#57300611", "title": "Getting all users mentioned in a tweet text and their user ID&#39;s", "body": "<pre><code>text = 'dvffegregre rg ADQEW follow @chad @lee efkneknen'\ntextlist = text.split(' ')\nusers = []\nif 'follow' in textlist:\n    for subtext in textlist:\n        if subtext.startswith('@'):\n            API.create_friendship(subtext.strip('@'))\n</code></pre>\n\n<p>I think this should work for your purpose.</p>\n"}], "owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57300611, "answer_count": 1, "score": 0, "last_activity_date": 1564621981, "creation_date": 1564614492, "last_edit_date": 1564621981, "question_id": 57299889, "link": "https://stackoverflow.com/questions/57299889/getting-all-users-mentioned-in-a-tweet-text-and-their-user-ids", "title": "Getting all users mentioned in a tweet text and their user ID&#39;s", "body": "<p>When I search for a tweet containing certain words, I want to check for users mentioned in those tweets that say specifically 'follow @someoneSo' so I could keep track of them and check out their profiles if they seem like relevant accounts, and hopefully, follow some accounts that I like at the end of it. </p>\n\n<p>Is there something similar to Discord's message.mentions.users where it returns a list of users mentioned in a tweet text?</p>\n\n<p>For example, if a tweet text = 'dvffegregre rg ADQEW follow @chad @lee efkneknen' or tweet text = 'dvffegregre rg ADQEW follow these guys @chad @lee efkneknen', my script would be able to follow @chad and @lee</p>\n"}, {"tags": ["python", "matplotlib", "scatter"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 11422798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271d9058227d783dc55afba2ed89011d?s=128&d=identicon&r=PG&f=1", "display_name": "Mason", "link": "https://stackoverflow.com/users/11422798/mason"}, "edited": false, "score": 0, "creation_date": 1564615262, "post_id": 57299911, "comment_id": 101093613, "body": "Well, if it worked in my example code where there are 3 arguments why shouldn&#39;t it work here as well?"}], "tags": [], "owner": {"reputation": 308, "user_id": 11723581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78c90f03c5143dd0ff887f35c7e5187?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Deasy", "link": "https://stackoverflow.com/users/11723581/jacob-deasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1564614715, "creation_date": 1564614715, "answer_id": 57299911, "question_id": 57299860, "link": "https://stackoverflow.com/questions/57299860/how-to-create-a-scatter-plot-in-python-with-cbar/57299911#57299911", "title": "How to create a scatter plot in Python with cbar", "body": "<p>The <code>scatter</code> function takes in 2 keyword arguments, not the 3 you are passing in within the line:</p>\n\n<pre><code>pareto = plt.scatter(x,y,z, cmap=cm,s=ms)\n</code></pre>\n\n<p>If you need to plot in 3D dimensions you could look into <a href=\"https://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html\" rel=\"nofollow noreferrer\">mplot3d</a>.</p>\n\n<p>To adjust your axis limits you could use:</p>\n\n<pre><code>plt.xlim(x_low, x_high)\nplt.ylim(y_low, y_high)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "is_accepted": true, "score": 1, "last_activity_date": 1564615223, "creation_date": 1564615223, "answer_id": 57299965, "question_id": 57299860, "link": "https://stackoverflow.com/questions/57299860/how-to-create-a-scatter-plot-in-python-with-cbar/57299965#57299965", "title": "How to create a scatter plot in Python with cbar", "body": "<p>You almost had it. You just need to specify that your colors pertain to the <code>z</code> array since <code>scatter</code> plots don't need a 3rd value. Just specify that <code>c=z</code> in your code and your good to go.</p>\n\n<pre><code>cm = plt.cm.get_cmap('YlOrRd')\nx, y, z = np.loadtxt('test.txt', unpack=True) \nms=45\npareto = plt.scatter(x,y,c=z, cmap=cm,s=ms) #change to c=z\ncbar = plt.colorbar()\ncbar.set_label('test')\nplt.savefig('pics/test/test.png', dpi=300)\n</code></pre>\n\n<p>And as noted by Jacob, use <code>plt.xlim()</code> and <code>plt.ylim()</code> to adjust limits.</p>\n"}], "owner": {"reputation": 79, "user_id": 11422798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271d9058227d783dc55afba2ed89011d?s=128&d=identicon&r=PG&f=1", "display_name": "Mason", "link": "https://stackoverflow.com/users/11422798/mason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 57299965, "answer_count": 2, "score": 3, "last_activity_date": 1564615223, "creation_date": 1564614267, "last_edit_date": 1564615162, "question_id": 57299860, "link": "https://stackoverflow.com/questions/57299860/how-to-create-a-scatter-plot-in-python-with-cbar", "title": "How to create a scatter plot in Python with cbar", "body": "<p>I am trying to create a scatter plot with a cbar of my data which I have stored in a .txt file. I found a piece of code here on stackoverflow and tested it to see whether it would work with my data. </p>\n\n<p>The example code is as follows:</p>\n\n<pre><code>for record in range(5):\n    x = rand(50)\n    y = rand(50)\n    c = rand(1)[0] * np.ones(x.shape)\n    X.append(x)\n    Y.append(y)\n    C.append(c)\nX = np.hstack(X)\nY = np.hstack(Y)\nC = np.hstack(C)\nms=45\ns = plt.scatter(X,Y,c=C, cmap=cm,s=ms)\ncbar = plt.colorbar()\ncbar.set_label('test')\nplt.savefig('pics/test/test.png', dpi=300)\n</code></pre>\n\n<p>The above code produces the following scatter plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wgftu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wgftu.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have adapted the above simple code into something like this for my data:</p>\n\n<pre><code>cm = plt.cm.get_cmap('YlOrRd')\nx, y, z = np.loadtxt('test.txt', unpack=True) \nms=45\npareto = plt.scatter(x,y,z, cmap=cm,s=ms)\ncbar = plt.colorbar()\ncbar.set_label('test')\nplt.savefig('pics/test/test.png', dpi=300)\n</code></pre>\n\n<p>However, the above code returns with the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\Mason\\Desktop\\WinPython-64bit-2.7.6.4\\python- \n2.7.6.amd64\\lib\\site- \npackages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 540, in \nrunfile\n    execfile(filename, namespace)\n  File \"F:/Optimisation/Plotting_data.py\", line 28, in \n&lt;module&gt;\n    d = plt.scatter(x,y,z, cmap=cm,s=ms)\nTypeError: scatter() got multiple values for keyword argument 's'\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Also, how could I adjust my axis limits?</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "amazon"], "comments": [{"owner": {"reputation": 4667, "user_id": 616456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/646c0755a76e341c3a3a09b5c391ffed?s=128&d=identicon&r=PG", "display_name": "Teo Klestrup R&#246;ijezon", "link": "https://stackoverflow.com/users/616456/teo-klestrup-r%c3%b6ijezon"}, "edited": false, "score": 0, "creation_date": 1564614623, "post_id": 57299853, "comment_id": 101093493, "body": "People might be more inclined to help you if provide a minimal reproducible example: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>. Your example is not reproducible, since <code>proxyList</code> and <code>userAgentList</code> are never defined, nor minimal since it&#39;s not clear from the description that either is actually relevant to the problem at hand."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564614641, "post_id": 57299853, "comment_id": 101093502, "body": "<code>amazon</code> uses JavaScript to add items but BS don&#39;t run JavaScript. You need Selenium to control web browser which runs JavaScript. Or you can search URL used byt JavaScript to get data from server and use this url with Requests."}, {"owner": {"reputation": 4667, "user_id": 616456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/646c0755a76e341c3a3a09b5c391ffed?s=128&d=identicon&r=PG", "display_name": "Teo Klestrup R&#246;ijezon", "link": "https://stackoverflow.com/users/616456/teo-klestrup-r%c3%b6ijezon"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564614753, "post_id": 57299853, "comment_id": 101093525, "body": "@furas It doesn&#39;t look like it, the page loads fine for me with JS disabled."}, {"owner": {"reputation": 37, "user_id": 11694736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b37448ca116241db051225549e20f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/11694736/thomson"}, "reply_to_user": {"reputation": 4667, "user_id": 616456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/646c0755a76e341c3a3a09b5c391ffed?s=128&d=identicon&r=PG", "display_name": "Teo Klestrup R&#246;ijezon", "link": "https://stackoverflow.com/users/616456/teo-klestrup-r%c3%b6ijezon"}, "edited": false, "score": 0, "creation_date": 1564615005, "post_id": 57299853, "comment_id": 101093568, "body": "@TeoKlestrupR&#246;ijezon: thanks, I think I added the relevant stuff"}, {"owner": {"reputation": 37, "user_id": 11694736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b37448ca116241db051225549e20f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/11694736/thomson"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564615085, "post_id": 57299853, "comment_id": 101093584, "body": "@furas: I can download the full html code with the data that I need with requests.get. That confuses me. I can manually find the div&#39;s that I need."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564617494, "post_id": 57299853, "comment_id": 101094052, "body": "where is code which gives you <code>[]</code> ? I don&#39;t see you use <code>soup.find_all()</code> or similar function."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564617907, "post_id": 57299853, "comment_id": 101094119, "body": "did you check <code>print( pageHTML )</code> ? Sometimes It show interesting information about automated getting data and API. It seems it knows that it is script and blocks it. But sometimes it works - maybe some <code>User-Agents</code> are not correct and then server blocks it. I didn&#39;t use proxy but some proxies can be on amazon&#39;s blacklist and it may blocks them too."}, {"owner": {"reputation": 37, "user_id": 11694736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b37448ca116241db051225549e20f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/11694736/thomson"}, "edited": false, "score": 0, "creation_date": 1564650600, "post_id": 57299853, "comment_id": 101103812, "body": "make_soup_am() gives []. Also  soup.findAll() gives []. The User-Agents are correct -&gt; I can scrape the page, just not make a soup from it."}], "owner": {"reputation": 37, "user_id": 11694736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b37448ca116241db051225549e20f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/11694736/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564648586, "creation_date": 1564614200, "last_edit_date": 1564648586, "question_id": 57299853, "link": "https://stackoverflow.com/questions/57299853/requests-get-returns-code-bs4-gives-empty-list", "title": "Requests.get returns code, bs4 gives empty list", "body": "<p>I try to parse the following page: <a href=\"https://www.amazon.de/s?k=lego+7134&amp;__mk_nl_NL=amazon&amp;ref=nb_sb_noss_1\" rel=\"nofollow noreferrer\">https://www.amazon.de/s?k=lego+7134&amp;__mk_nl_NL=amazon&amp;ref=nb_sb_noss_1</a>.</p>\n\n<p>Requests.get gets me the total code, but when I try to parse it using Beautiful Soup, it returns an empty list [].</p>\n\n<p>I've tried encoding, using chromium, requests-html, different parsers, replacing the beginning of the code, etc. I'm sad to say that nothing seems to work.</p>\n\n<pre><code>from fake_useragent import UserAgent\nfrom lxml import html\nimport requests\nfrom bs4 import BeautifulSoup as soup\n\nurl = \"https://www.amazon.de/s?k=lego+7134&amp;__mk_nl_NL=amazon&amp;ref=nb_sb_noss_1\"\n\nuserAgentList = [\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36',\n    'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.90 Safari/537.36',\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36',\n    'Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1',\n    'Mozilla/5.0 (Windows NT 5.1; rv:36.0) Gecko/20100101 Firefox/36.0',\n]\n\nproxyList = [\n    'xxx.x.x.xxx:8080',\n    'xx.xx.xx.xx:3128',\n]\n\ndef make_soup_am(url):\n    print(url)\n    random.shuffle(proxyList)\n    s = requests.Session()\n    s.proxies = proxyList\n    headers = {'User-Agent': random.choice(userAgentList)}\n    pageHTML = s.get(url, headers=headers).text\n    pageSoup = soup(pageHTML, features='lxml')\n    return pageSoup\n\nmake_soup_am()\n</code></pre>\n\n<p>Anyone has an idea?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Tom</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "is_accepted": false, "score": 0, "last_activity_date": 1564615529, "creation_date": 1564615529, "answer_id": 57300008, "question_id": 57299829, "link": "https://stackoverflow.com/questions/57299829/replace-column2-value-with-dictionary-key-where-column1-condition-is-met/57300008#57300008", "title": "Replace Column2 value with Dictionary Key Where Column1 Condition is met", "body": "<p>Considering your case, you can do like this:</p>\n\n<pre><code>df['Feature Value'].map(dict).fillna(df['Feature Value'])\n</code></pre>\n\n<p>This is Non-Exhaustive Mapping and <code>map()</code> function maps as per the label you have defined in your dictionary and fillna() helps to retain the existing values for non-matches. Also, <code>map()</code> is much faster than <code>repalce()</code> </p>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 0, "last_activity_date": 1564615757, "creation_date": 1564615757, "answer_id": 57300033, "question_id": 57299829, "link": "https://stackoverflow.com/questions/57299829/replace-column2-value-with-dictionary-key-where-column1-condition-is-met/57300033#57300033", "title": "Replace Column2 value with Dictionary Key Where Column1 Condition is met", "body": "<p>You can replace value based on Feature for individual sets of Features/Feature Values. </p>\n\n<p>Note: Since the Feature_Value column is object type, I used as type(int) for the selected values.</p>\n\n<pre><code>df.loc[df['Feature'] == 'Pet', 'Feature_Value']= df.loc[df['Feature'] == 'Pet', 'Feature_Value'].astype(int).replace(d)\n\ndf.loc[df['Feature1'] == 'Pet', 'Feature1_Value']= df.loc[df['Feature1'] == 'Pet', 'Feature1_Value'].astype(int).replace(d)\n\n\n    Feature Feature_Value   Feature1    Feature1_Value\n0   Pet     dog             Thing       1\n1   Person  Steve           Pet         dog\n2   Place   Texas           Place       Virginia\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8570312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564615757, "creation_date": 1564614099, "last_edit_date": 1564614913, "question_id": 57299829, "link": "https://stackoverflow.com/questions/57299829/replace-column2-value-with-dictionary-key-where-column1-condition-is-met", "title": "Replace Column2 value with Dictionary Key Where Column1 Condition is met", "body": "<p>I have a dictionary that relates the numeric label to the categorical label. </p>\n\n<pre><code>dict = {\n0:'cat',\n1:'dog', \n2:'fish\n}\n</code></pre>\n\n<p>My dataframe(df) output looks like:</p>\n\n<pre><code>Feature  | Feature Value | Feature1 |  Feature1 Value\n\nPet        1               Thing       1\nPerson     Steve           Pet         1\nPlace      Texas           Place       Virginia\n</code></pre>\n\n<p>I want to replace the \"1\" with 'dog'. </p>\n\n<p>I tried this.</p>\n\n<pre><code>df.replace({df.loc[df['Feature'] == 'Pet']: dict})\n</code></pre>\n\n<p>However, I know this is only looking at matching the Feature column, but not pulling in the value from Feature value to match in the dictionary. </p>\n\n<p>What my dataframe(df) output should like is:</p>\n\n<pre><code>Feature  | Feature Value | Feature1 |  Feature1 Value\n\nPet        dog             Thing       1\nPerson     Steve           Pet         dog\nPlace      Texas           Place       Virginia\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "xlsx", "xlsxwriter"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8345905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rH5qp.jpg?s=128&g=1", "display_name": "Missyinvisible", "link": "https://stackoverflow.com/users/8345905/missyinvisible"}, "edited": false, "score": 0, "creation_date": 1564616349, "post_id": 57300039, "comment_id": 101093830, "body": "That works just fine, but the problem is I can&#39;t color my cells based on <i>what</i> they contain since that&#39;s random, rather I need to color them based on <i>where</i>  they are. I was thinking something similar to worksheet.set_column() except for just a cells."}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 35, "user_id": 8345905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rH5qp.jpg?s=128&g=1", "display_name": "Missyinvisible", "link": "https://stackoverflow.com/users/8345905/missyinvisible"}, "edited": false, "score": 0, "creation_date": 1564647507, "post_id": 57300039, "comment_id": 101102180, "body": "If you want to colour a cell whatever there is in, you can try <code>&#39;value&#39;:&#39;&#39;</code>. I&#39;m not sure sure to understand what you want to do. Can you edit the question and add a sample of your input and the expected output in order to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\"><i>Minimal, Reproducible Example</i></a>"}, {"owner": {"reputation": 35, "user_id": 8345905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rH5qp.jpg?s=128&g=1", "display_name": "Missyinvisible", "link": "https://stackoverflow.com/users/8345905/missyinvisible"}, "edited": false, "score": 1, "creation_date": 1564670222, "post_id": 57300039, "comment_id": 101115154, "body": "Using <code>&#39;value&#39;: &#39;&#39;</code> did the trick! Thank you so very much, it was driving me crazy. If you update your answer, I will accept it."}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 35, "user_id": 8345905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rH5qp.jpg?s=128&g=1", "display_name": "Missyinvisible", "link": "https://stackoverflow.com/users/8345905/missyinvisible"}, "edited": false, "score": 0, "creation_date": 1564671633, "post_id": 57300039, "comment_id": 101116011, "body": "@Missyinvisible Glad to help you."}], "tags": [], "owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1564671615, "last_edit_date": 1564671615, "creation_date": 1564615791, "answer_id": 57300039, "question_id": 57299804, "link": "https://stackoverflow.com/questions/57299804/is-there-a-way-to-color-cells-containing-text-using-xlsxwriter/57300039#57300039", "title": "Is there a way to color cells containing text using XlsxWriter?", "body": "<p>The error comes from the <code>type</code> and the <code>criteria</code>.</p>\n\n<p><strong>Try</strong>:</p>\n\n<ul>\n<li><code>type</code>: 'text'</li>\n<li><code>criteria</code>: 'containing'</li>\n</ul>\n\n<p><strong>Example</strong>: all cells containing \"C3\" are colored.</p>\n\n<pre><code>worksheet.conditional_format('B3:B5', {'type': 'text',\n                                       'criteria': 'containing',\n                                       'value': '3C',\n                                       'format': shadedFormat})\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TRuas.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TRuas.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>If you want to select a cell what ever there is in, you can use:</p>\n\n<pre><code>worksheet.conditional_format('B3:B5', {'type': 'text',\n                                       'criteria': 'containing',\n                                       'value': '',\n                                       'format': shadedFormat})\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yfNvI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yfNvI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 35, "user_id": 8345905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rH5qp.jpg?s=128&g=1", "display_name": "Missyinvisible", "link": "https://stackoverflow.com/users/8345905/missyinvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 57300039, "answer_count": 1, "score": 1, "last_activity_date": 1564671615, "creation_date": 1564613748, "question_id": 57299804, "link": "https://stackoverflow.com/questions/57299804/is-there-a-way-to-color-cells-containing-text-using-xlsxwriter", "title": "Is there a way to color cells containing text using XlsxWriter?", "body": "<p>I have a pandas dataframe, which I'm exporting to an Excel file using to_excel. All of the cells have pseudorandomly generated strings of length 2 in them (either alphanumeric or just numeric). I want to color the background of some of the cells gray. I always want to color the exact same cells each time I run the .py file, but since the content of the cells is basically random, I can't use some condition on the value in the cells to color them. </p>\n\n<p>I looked at the <a href=\"https://xlsxwriter.readthedocs.io/working_with_conditional_formats.html\" rel=\"nofollow noreferrer\">xlsx writer documentation on conditional formatting</a> and tried to use it in conjunction with the accepted answer on <a href=\"https://stackoverflow.com/questions/44150078/python-using-pandas-to-format-excel-cell\">this question</a>. As a side note, if I just copy paste the first code block of the accepted answer, that runs just fine!</p>\n\n<p>This is my code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({'Col1': ['A1', 'B2', '3C', '4D', 'E5', '6F', 'G7'],\n                   'Col2': ['00', '01', '02', '03', '04', '05', '06']})\nwriter = pd.ExcelWriter('shaded.xlsx', engine='xlsxwriter')\ndf.to_excel(writer, sheet_name='Sheet1')\nworkbook  = writer.book\nworksheet = writer.sheets['Sheet1']\n\nshadedFormat  = workbook.add_format({'bg_color': 'gray'})\n\nworksheet.conditional_format('B3:B5', {'type': 'text',\n                                      'criteria': 'not equal to',\n                                       'value': 'longString',\n                                       'format': shadedFormat})\n\nwriter.save()\n</code></pre>\n\n<p>The python interpreter does not return any errors, but when I go to open the .xlsx file, a pop up window gives \"We found a problem with some content in 'shaded.xlsx'. Do you want us to try to recover as much as we can?\" Upon saying yes, it brings up another windows, which says \"Repaired Part: /xl/worksheets/sheet1.xml part with XML error.  Catastrophic failure Line 2, column 1267.\" and none of the columns are shaded. </p>\n\n<p>I would like to do away with the error and have the specified cells shaded gray.</p>\n\n<p>Thank you for any help/suggestions!</p>\n"}, {"tags": ["python", "matplotlib", "geopandas"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1564615870, "post_id": 57299781, "comment_id": 101093732, "body": "I would rather guess that the data is specified in totally different coordinate systems (similar to how a sine wave is different between radiants and degrees). Mostly, when plotting geo data one would use a transform, but one cannot know if this is missing here, since the example is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1410, "user_id": 9900084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97739535a689b72a0ff9a37db1a1e8df?s=128&d=identicon&r=PG&f=1", "display_name": "steven", "link": "https://stackoverflow.com/users/9900084/steven"}, "edited": false, "score": 0, "creation_date": 1564710372, "post_id": 57299781, "comment_id": 101128952, "body": "I think you should switch longitude and latitude"}], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 11434716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/994cd1a7fb84e54291def3954e1b194b?s=128&d=identicon&r=PG&f=1", "display_name": "nickolasclarke", "link": "https://stackoverflow.com/users/11434716/nickolasclarke"}, "is_accepted": true, "score": 0, "last_activity_date": 1570737662, "creation_date": 1570737662, "answer_id": 58330318, "question_id": 57299781, "link": "https://stackoverflow.com/questions/57299781/cannot-align-subplots-when-plotting-geopandas-dataframes/58330318#58330318", "title": "cannot align subplots when plotting geopandas dataframes", "body": "<p>It was indeed an issue of lat,lons being reversed as well as mismatching CRS. </p>\n"}], "owner": {"reputation": 77, "user_id": 11434716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/994cd1a7fb84e54291def3954e1b194b?s=128&d=identicon&r=PG&f=1", "display_name": "nickolasclarke", "link": "https://stackoverflow.com/users/11434716/nickolasclarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 58330318, "answer_count": 1, "score": 0, "last_activity_date": 1570737662, "creation_date": 1564613562, "last_edit_date": 1564622314, "question_id": 57299781, "link": "https://stackoverflow.com/questions/57299781/cannot-align-subplots-when-plotting-geopandas-dataframes", "title": "cannot align subplots when plotting geopandas dataframes", "body": "<p>I am attempting to plot a geopandas dataframe of bus stops (shapely points over another dataframe of a shape file (polygon). I can plot them individually, but when I attempt to layer them, I cannot get the plots to line up correctly. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Convert the dataframe into a geodataframe\ngdf = gpd.GeoDataFrame(unique_stops.drop(['lat', 'lng'], axis=1), crs={'init': 'esri:102003'}, geometry=[Point(xy) for xy in zip(unique_stops.lat, unique_stops.lng)])\n\n# read in the city shapefile\nbase = gpd.read_file('https://opendata.arcgis.com/datasets/89f1a70c0cf24d7692e2d02fdf8f4e47_0.geojson')\nbase.to_crs(crs={'init': 'esri:102003'}, inplace=True)\n\n# Setup figure and axis with different size\nf, ax = plt.subplots(1)\n\n# Add layer of polygons on the axis\nbase.plot(ax=ax)\ngdf.plot(ax=ax)\n\n# Display\nplt.show()\n\n</code></pre>\n\n<p>I expect the plots to be layered on top of each other. However, the output is currently as follows: </p>\n\n<p><a href=\"https://i.stack.imgur.com/EXqnI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EXqnI.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I believe this may be because the x an y axes of the dataframe geometries might be reversed from each other, but I cannot figured out how to specify that explicitly.</p>\n"}, {"tags": ["python", "discord.py", "youtube-dl"], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 11810415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00282c6876fc1e56bc6bb570920adb67?s=128&d=identicon&r=PG&f=1", "display_name": "Polliog", "link": "https://stackoverflow.com/users/11810415/polliog"}, "edited": false, "score": 0, "creation_date": 1564763031, "post_id": 57304836, "comment_id": 101150525, "body": "edit: conda had not updated the module now it work thx for all"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "anon"}, "is_accepted": true, "score": 2, "last_activity_date": 1564648091, "creation_date": 1564648091, "answer_id": 57304836, "question_id": 57299773, "link": "https://stackoverflow.com/questions/57299773/youtube-dl-title-print/57304836#57304836", "title": "Youtube dl title print _", "body": "<p><code>'_'</code> is the value when youtube-dl cannot determine a title.</p>\n\n<p>If this happened close to July 2019 and with YouTube videos (as opposed to one of the other <a href=\"http://ytdl-org.github.io/youtube-dl/supportedsites.html\" rel=\"nofollow noreferrer\">1000+ supported sites</a> ), the most likely explanation is that your version of youtube-dl is outdated; YouTube changed the format of their video titles on July 30, 2019.</p>\n\n<p>Visit <a href=\"https://yt-dl.org/update\" rel=\"nofollow noreferrer\">https://yt-dl.org/update</a> to learn how to update youtube-dl. Most likely, it's as simple as running <code>youtube-dl -U</code>.</p>\n\n<p>To get more information about problems like this, it is a good idea to show the warnings emitted by youtube-dl on stderr, at least for developers.</p>\n"}], "owner": {"reputation": 54, "user_id": 11810415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00282c6876fc1e56bc6bb570920adb67?s=128&d=identicon&r=PG&f=1", "display_name": "Polliog", "link": "https://stackoverflow.com/users/11810415/polliog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 1, "accepted_answer_id": 57304836, "answer_count": 1, "score": 1, "last_activity_date": 1564648091, "creation_date": 1564613510, "last_edit_date": 1564614074, "question_id": 57299773, "link": "https://stackoverflow.com/questions/57299773/youtube-dl-title-print", "title": "Youtube dl title print _", "body": "<p>I'm creating a music bot and when the user use the command play\nthe bot print an embed with the title and other infos\nbut when the embed print the desc the title of song is <code>_</code>.\nhow can i resolve?</p>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OZB2S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OZB2S.png\" alt=\"screenshot\"></a></p>\n\n<pre><code>async with ctx.typing():\n    try:\n        source = await YTDLSource.create_source(ctx, search, loop=self.bot.loop)\n    except YTDLError as e:\n        await ctx.send('Errore: {}'.format(str(e)))\n    else:\n        song = Song(source)\n        await ctx.voice_state.songs.put(song)\n        ctx.source = source\n        ctx.requester = source.requester\n        print(source)\n        print(source.requester)\n        print(source.title)\n        embed = (discord.Embed(title='Aggiunto alla coda',\n                               description='```css\\n{0.source.title}\\n```'.format(ctx),\n                               color=discord.Color.orange())\n                 .add_field(name='Durata', value=ctx.source.duration)\n                 .add_field(name='Richiesta da', value=ctx.requester.mention)\n                 .set_thumbnail(url=ctx.source.thumbnail))\n        await ctx.send(embed=embed)\n</code></pre>\n\n<p>Maybe is wrong something here?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def __init__(self, ctx: commands.Context, source: discord.FFmpegPCMAudio, *, data: dict, volume: float = 0.5):\n    self.title = data.get('title')\n</code></pre>\n"}, {"tags": ["python", "arrays", "python-3.x", "list"], "comments": [{"owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 1, "creation_date": 1564613384, "post_id": 57299729, "comment_id": 101093264, "body": "what is the issue ?"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 4, "creation_date": 1564613503, "post_id": 57299729, "comment_id": 101093286, "body": "Try <code>mat = [[int(i) for i in input().split()] for x in range(5)]</code>"}, {"owner": {"reputation": 113, "user_id": 10124431, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8FVvwXJr2QY/AAAAAAAAAAI/AAAAAAAAAC0/YXsM1e195C4/photo.jpg?sz=128", "display_name": "Ahmed Usama", "link": "https://stackoverflow.com/users/10124431/ahmed-usama"}, "reply_to_user": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 0, "creation_date": 1564613596, "post_id": 57299729, "comment_id": 101093302, "body": "@Vishal I want the input to be read as 5 space separated values then go to newline and read another 5 and so on , not to read one value at one line"}, {"owner": {"reputation": 113, "user_id": 10124431, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8FVvwXJr2QY/AAAAAAAAAAI/AAAAAAAAAC0/YXsM1e195C4/photo.jpg?sz=128", "display_name": "Ahmed Usama", "link": "https://stackoverflow.com/users/10124431/ahmed-usama"}, "reply_to_user": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1564613755, "post_id": 57299729, "comment_id": 101093330, "body": "@iz_ This exactly what i need thank u very much ^^"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8655468, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iTCS6dumeZ4/AAAAAAAAAAI/AAAAAAAAAKs/ruUJ7mFuUxY/photo.jpg?sz=128", "display_name": "Sakshi Sharma", "link": "https://stackoverflow.com/users/8655468/sakshi-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1570267250, "creation_date": 1570267250, "answer_id": 58246968, "question_id": 57299729, "link": "https://stackoverflow.com/questions/57299729/read-2d-list-as-space-separated-values-in-python/58246968#58246968", "title": "read 2d List as space separated values in python", "body": "<p>May be you can try this:</p>\n\n<pre><code>mat = [list(map(int, input().split())) for y in range(5)]\n</code></pre>\n\n<p>This will take 5 lists line by line to create the matrix.</p>\n"}], "owner": {"reputation": 113, "user_id": 10124431, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8FVvwXJr2QY/AAAAAAAAAAI/AAAAAAAAAC0/YXsM1e195C4/photo.jpg?sz=128", "display_name": "Ahmed Usama", "link": "https://stackoverflow.com/users/10124431/ahmed-usama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570267250, "creation_date": 1564613113, "last_edit_date": 1564634298, "question_id": 57299729, "link": "https://stackoverflow.com/questions/57299729/read-2d-list-as-space-separated-values-in-python", "title": "read 2d List as space separated values in python", "body": "<p>I want to read 2d list from the user as space separated values like this format :</p>\n\n<pre><code>0 0 0 0 0  \n0 0 0 0 1  \n0 0 0 0 0  \n0 0 0 0 0  \n0 0 0 0 0  \n</code></pre>\n\n<p>and here is my code :</p>\n\n<pre><code># Read Matrix of 5X5\nmat = [[int(input()) for x in range(5)] for y in range(5)]\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "xlrd"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8116640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CAnqLVP6Uq4/AAAAAAAAAAI/AAAAAAAAAEk/fqOWcV0MQ5c/photo.jpg?sz=128", "display_name": "Jonathon  T Miller", "link": "https://stackoverflow.com/users/8116640/jonathon-t-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1564616174, "creation_date": 1564616174, "answer_id": 57300092, "question_id": 57299720, "link": "https://stackoverflow.com/questions/57299720/parsing-security-matrix-spreadsheet-nonetype-is-not-iterable/57300092#57300092", "title": "Parsing Security Matrix Spreadsheet - NoneType is not Iterable", "body": "<p>I would still like to know why i couldnt call the append method on that specific yes_no key whos value was a list.</p>\n\n<p>But in the mean time, i made a work around of sorts. I created a set as the key and gave the yes_no as the value. this will allow me to pair many no type values with the keys being a set of the application, port, service, etc.. and then i can search for yes values and create additional dicts out of them for logic.</p>\n\n<p>Any better ideas out there i am all ears.</p>\n\n<pre><code>for rownum in range(0, sh.nrows):\n    #row_val is all the values in the row of cell.index[rownum]  as determined by rownum\n    row_val = sh.row_values(rownum)\n    col_val = sh.col_values(rownum)\n    print rownum, col_val[0], col_val[1: CoR]\n    header.append({col_val[0]: col_val[1: CoR]})\nprint header[0]['Start Port']\n\ndec_tree = {}\ncount = 1\nBase_Sheet = range(5, sh.ncols)\nColumn_Rows = range(1, sh.nrows)\n\nfor colnum in Base_Sheet:\n    Zone_Name = sh.col_values(colnum)[0]\n    Zone_App_Header = {sh.col_values(4)[0]:{}}\n    Zone_Svc_Header = {sh.col_values(3)[0]:{}}\n    Zone_Proto_Header = {sh.col_values(2)[0]:{}}\n    Zone_DestPort_Header = {sh.col_values(1)[0]: {}}\n    Zone_SrcPort_Header = {sh.col_values(0)[0]: {}}\n\n\n    Decision_List = {Zone_Name:{}}\n\n\n    for rows in Column_Rows:\n        app_object   = sh.col_values(4)[rows]\n        svc_object   = sh.col_values(3)[rows]\n        proto_object = sh.col_values(3)[rows]\n        dst_object   = sh.col_values(2)[rows]\n        src_object   = sh.col_values(1)[rows]\n        yes_no       = sh.col_values(colnum)[rows]\n\n\n\n        for rule_name in Decision_List.iterkeys():\n            Decision_List[Zone_Name][(app_object, svc_object, proto_object)]= yes_no\n</code></pre>\n\n<p>Thanks again.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8116640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CAnqLVP6Uq4/AAAAAAAAAAI/AAAAAAAAAEk/fqOWcV0MQ5c/photo.jpg?sz=128", "display_name": "Jonathon  T Miller", "link": "https://stackoverflow.com/users/8116640/jonathon-t-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1564627813, "creation_date": 1564627813, "answer_id": 57301233, "question_id": 57299720, "link": "https://stackoverflow.com/questions/57299720/parsing-security-matrix-spreadsheet-nonetype-is-not-iterable/57301233#57301233", "title": "Parsing Security Matrix Spreadsheet - NoneType is not Iterable", "body": "<p>I think still a better way is to use collections.defaultdict</p>\n\n<p>In this manner it will ensure that i am able to append to the specific yes_no as i had originally intended.</p>\n\n<pre><code>for colnum in Base_Sheet:\n    Zone_Name = sh.col_values(colnum)[0]\n    Zone_App_Header = {sh.col_values(4)[0]:{}}\n    Zone_Svc_Header = {sh.col_values(3)[0]:{}}\n    Zone_Proto_Header = {sh.col_values(2)[0]:{}}\n    Zone_DestPort_Header = {sh.col_values(1)[0]: {}}\n    Zone_SrcPort_Header = {sh.col_values(0)[0]: {}}\n\n\n    Decision_List = {Zone_Name:defaultdict(list)}\n\n\n    for rows in Column_Rows:\n        app_object   = sh.col_values(4)[rows]\n        svc_object   = sh.col_values(3)[rows]\n        proto_object = sh.col_values(2)[rows]\n        dst_object   = sh.col_values(1)[rows]\n        src_object   = sh.col_values(0)[rows]\n        yes_no       = sh.col_values(colnum)[rows]\n\n        if yes_no not in Decision_List[Zone_Name]:\n            Decision_List[Zone_Name][yes_no]= [app_object, svc_object, proto_object, dst_object, src_object]\n        else:\n            Decision_List[Zone_Name][yes_no].append([(app_object, svc_object, proto_object,dst_object, src_object)])\n</code></pre>\n\n<p>This allows me to then set the values as a set and append them as needed</p>\n"}], "owner": {"reputation": 11, "user_id": 8116640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CAnqLVP6Uq4/AAAAAAAAAAI/AAAAAAAAAEk/fqOWcV0MQ5c/photo.jpg?sz=128", "display_name": "Jonathon  T Miller", "link": "https://stackoverflow.com/users/8116640/jonathon-t-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564627813, "creation_date": 1564613063, "last_edit_date": 1564616476, "question_id": 57299720, "link": "https://stackoverflow.com/questions/57299720/parsing-security-matrix-spreadsheet-nonetype-is-not-iterable", "title": "Parsing Security Matrix Spreadsheet - NoneType is not Iterable", "body": "<p>Trying to Nest no's and yes's with their respective applications and services.\nThat way when a request comes in for a specific zone to zone sequence,  a check can be run against this logic to verify accepted requests.</p>\n\n<p>I have tried calling Decision_List[Zone_Name][yes_no].update and i tried ,append when it was a list type and not a dict but there is no update method ?</p>\n\n<pre><code>Base_Sheet = range(5, sh.ncols)\nColumn_Rows = range(1, sh.nrows)\n\nfor colnum in Base_Sheet:\n   Zone_Name = sh.col_values(colnum)[0]\n   Zone_App_Header = {sh.col_values(4)[0]:{}}\n   Zone_Svc_Header = {sh.col_values(3)[0]:{}}\n   Zone_Proto_Header = {sh.col_values(2)[0]:{}}\n Zone_DestPort_Header = {sh.col_values(1)[0]: {}}\n Zone_SrcPort_Header = {sh.col_values(0)[0]: {}}\n\n\nDecision_List = {Zone_Name:{}}\n\n\nfor rows in Column_Rows:\n    app_object   = sh.col_values(4)[rows]\n    svc_object   = sh.col_values(3)[rows]\n    proto_object = sh.col_values(3)[rows]\n    dst_object   = sh.col_values(2)[rows]\n    src_object   = sh.col_values(1)[rows]\n    yes_no       = sh.col_values(colnum)[rows]\n\n    if yes_no not in Decision_List[Zone_Name]:\n        Decision_List[Zone_Name][yes_no] = [app_object]\n    else:\n        Decision_List[Zone_Name]=[yes_no].append(app_object)\n</code></pre>\n\n<p>I would like it present info as follows</p>\n\n<pre><code>Decision_List{Zone_Name:{yes:[ssh, ssl, soap], no: \n                 [web-browsing,facebook]}}\n</code></pre>\n"}, {"tags": ["python", "deep-learning", "pytorch", "lstm", "onnx"], "answers": [{"tags": [], "owner": {"reputation": 1401, "user_id": 598513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e4987226c3be3b081257ba7bfa9dc7?s=128&d=identicon&r=PG", "display_name": "Clemens Tolboom", "link": "https://stackoverflow.com/users/598513/clemens-tolboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1564648458, "creation_date": 1564648458, "answer_id": 57304924, "question_id": 57299674, "link": "https://stackoverflow.com/questions/57299674/trouble-converting-lstm-pytorch-model-to-onnx/57304924#57304924", "title": "Trouble Converting LSTM Pytorch Model to ONNX", "body": "<p>You are not doing anything wrong</p>\n\n<blockquote>\n  <p>RuntimeError: ONNX export failed: Couldn't export operator aten::lstm</p>\n</blockquote>\n\n<p>LSTM is not in the list of supported operators on <a href=\"https://pytorch.org/docs/master/onnx.html#limitations\" rel=\"nofollow noreferrer\">onnx limitations</a></p>\n\n<p>Checking github issue queue for <a href=\"https://github.com/pytorch/pytorch/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20RuntimeError%3A%20ONNX%20export%20failed%3A%20Couldn%27t%20export%20operator%20aten%3A%3A\" rel=\"nofollow noreferrer\">RuntimError on unsupported aten::</a> there are more types not (yet) supported.</p>\n"}, {"comments": [{"owner": {"reputation": 1109, "user_id": 6491230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/757137584429515/picture?type=large", "display_name": "Shawn Zhang", "link": "https://stackoverflow.com/users/6491230/shawn-zhang"}, "edited": false, "score": 0, "creation_date": 1564679692, "post_id": 57310806, "comment_id": 101120018, "body": "How would I get my model to work with batch_first = False? I have transposed my data as <code>data_tensor = data_tensor.permute(1, 0, 2)</code>. However, when running through my model I get the following error: <code>RuntimeError: Expected hidden[0] size (2, 2685, 3), got (5, 2, 3)</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 9903607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d06f6a9e318f70007c28f83295394d?s=128&d=identicon&r=PG&f=1", "display_name": "Jawar Binks", "link": "https://stackoverflow.com/users/9903607/jawar-binks"}, "is_accepted": false, "score": 0, "last_activity_date": 1564667994, "creation_date": 1564667994, "answer_id": 57310806, "question_id": 57299674, "link": "https://stackoverflow.com/questions/57299674/trouble-converting-lstm-pytorch-model-to-onnx/57310806#57310806", "title": "Trouble Converting LSTM Pytorch Model to ONNX", "body": "<p>Try with batch_first=False. It is not supported on True by ONNX. you might need to transpose your datas because you'll have : (timesteps, batch, features) instead of (batch, timesteps, features).</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 13835555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78340a9a0ce658aca2fc79a0c1b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Knagg", "link": "https://stackoverflow.com/users/13835555/oscar-knagg"}, "is_accepted": false, "score": 4, "last_activity_date": 1593447346, "creation_date": 1593447346, "answer_id": 62642361, "question_id": 57299674, "link": "https://stackoverflow.com/questions/57299674/trouble-converting-lstm-pytorch-model-to-onnx/62642361#62642361", "title": "Trouble Converting LSTM Pytorch Model to ONNX", "body": "<p>If you're coming here from Google the previous answers are no longer up to date. ONNX now supports an <a href=\"https://github.com/onnx/onnx/blob/master/docs/Operators.md#LSTM\" rel=\"nofollow noreferrer\">LSTM operator</a>. Take care as exporting from PyTorch will fix the input sequence length by default unless you use the <code>dynamic_axes</code> parameter.</p>\n<p>Below is a minimal LSTM export example I adapted from the <a href=\"https://pytorch.org/docs/stable/onnx.html#frequently-asked-questions\" rel=\"nofollow noreferrer\">torch.onnx FAQ</a></p>\n<pre><code>import torch\nimport onnx\nfrom torch import nn\nimport numpy as np\nimport onnxruntime.backend as backend\nimport numpy as np\n\ntorch.manual_seed(0)\n\nlayer_count = 4\n\nmodel = nn.LSTM(10, 20, num_layers=layer_count, bidirectional=True)\nmodel.eval()\n\nwith torch.no_grad():\n    input = torch.randn(1, 3, 10)\n    h0 = torch.randn(layer_count * 2, 3, 20)\n    c0 = torch.randn(layer_count * 2, 3, 20)\n    output, (hn, cn) = model(input, (h0, c0))\n\n    # default export\n    torch.onnx.export(model, (input, (h0, c0)), 'lstm.onnx')\n    onnx_model = onnx.load('lstm.onnx')\n    # input shape [5, 3, 10]\n    print(onnx_model.graph.input[0])\n\n    # export with `dynamic_axes`\n    torch.onnx.export(model, (input, (h0, c0)), 'lstm.onnx',\n                    input_names=['input', 'h0', 'c0'],\n                    output_names=['output', 'hn', 'cn'],\n                    dynamic_axes={'input': {0: 'sequence'}, 'output': {0: 'sequence'}})\n    onnx_model = onnx.load('lstm.onnx')\n    # input shape ['sequence', 3, 10]\n\n# Check export\ny, (hn, cn) = model(input, (h0, c0))\ny_onnx, hn_onnx, cn_onnx = backend.run(\n    onnx_model, \n    [input.numpy(), h0.numpy(), c0.numpy()],\n    device='CPU'\n)\n\nnp.testing.assert_almost_equal(y_onnx, y.detach(), decimal=5)\nnp.testing.assert_almost_equal(hn_onnx, hn.detach(), decimal=5)\nnp.testing.assert_almost_equal(cn_onnx, cn.detach(), decimal=5)\n</code></pre>\n<p>I've tested this example with:\ntorch==1.4.0,\nonnx=1.7.0</p>\n"}], "owner": {"reputation": 1109, "user_id": 6491230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/757137584429515/picture?type=large", "display_name": "Shawn Zhang", "link": "https://stackoverflow.com/users/6491230/shawn-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1892, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1593447346, "creation_date": 1564612704, "question_id": 57299674, "link": "https://stackoverflow.com/questions/57299674/trouble-converting-lstm-pytorch-model-to-onnx", "title": "Trouble Converting LSTM Pytorch Model to ONNX", "body": "<p>I am trying to export my LSTM Anomally-Detection Pytorch model to ONNX, but I'm experiencing errors. Please take a look at my code below.</p>\n\n<p>Note: My data is shaped as [2685, 5, 6].\nHere is where I define my model:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Model(torch.nn.Module):\n    def __init__(self, input_dim, hidden_dim, layer_dim):\n        super(Model, self).__init__()\n        self.hidden_dim = hidden_dim \n        self.layer_dim = layer_dim\n        self.lstm = nn.LSTM(input_dim, hidden_dim, layer_dim, batch_first=True)\n        self.fc1 = torch.nn.Linear(hidden_dim, hidden_dim)\n        self.fc2 = torch.nn.Linear(hidden_dim, input_dim)   \n    def forward(self, x):\n        h0 = torch.zeros(self.layer_dim, x.size(0), self.hidden_dim).requires_grad_()\n        c0 = torch.zeros(self.layer_dim, x.size(0), self.hidden_dim).requires_grad_()\n        out, (hn, cn) = self.lstm(x, (h0.detach(), c0.detach()))\n        out = self.fc1(out) \n        out = self.fc2(out)\n        return out\n\ninput_dim = 6\nhidden_dim = 3\nlayer_dim = 2\nmodel = Model(input_dim, hidden_dim, layer_dim)\n</code></pre>\n\n<p>I can train it and test with it fine. But the problem comes when exporting:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>model.eval()\nimport torch.onnx\ntorch_out = torch.onnx.export(model, \n                         torch.randn(2685, 5, 6), \n                         \"onnx_model.onnx\", \n                         export_params = True\n                        )\n</code></pre>\n\n<p>But I have the following error:</p>\n\n<pre><code>LSTM(6, 3, num_layers=2, batch_first=True)\nLinear(in_features=3, out_features=3, bias=True)\nLinear(in_features=3, out_features=6, bias=True)\n['input_1', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear', 'l_lstm_LSTM', 'l_fc1_Linear', 'l_fc2_Linear']\n\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/symbolic.py:173: UserWarning: ONNX export failed on RNN/GRU/LSTM because batch_first not supported\n  warnings.warn(\"ONNX export failed on \" + op + \" because \" + msg + \" not supported\")\n\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n&lt;ipython-input-264-28c6c55537ab&gt; in &lt;module&gt;()\n     10                          torch.randn(2685, 5, 6),\n     11                          \"onnx_model.onnx\",\n---&gt; 12                          export_params = True\n     13                         )\n\n~/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/__init__.py in export(*args, **kwargs)\n     23 def export(*args, **kwargs):\n     24     from torch.onnx import utils\n---&gt; 25     return utils.export(*args, **kwargs)\n     26 \n     27 \n\n~/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py in export(model, args, f, export_params, verbose, training, input_names, output_names, aten, export_raw_ir, operator_export_type, opset_version, _retain_param_name, do_constant_folding, strip_doc_string)\n    129             operator_export_type=operator_export_type, opset_version=opset_version,\n    130             _retain_param_name=_retain_param_name, do_constant_folding=do_constant_folding,\n--&gt; 131             strip_doc_string=strip_doc_string)\n    132 \n    133 \n\n~/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py in _export(model, args, f, export_params, verbose, training, input_names, output_names, operator_export_type, export_type, example_outputs, propagate, opset_version, _retain_param_name, do_constant_folding, strip_doc_string)\n    367         if export_params:\n    368             proto, export_map = graph._export_onnx(params_dict, opset_version, defer_weight_export, operator_export_type,\n--&gt; 369                                                    strip_doc_string)\n    370         else:\n    371             proto, export_map = graph._export_onnx({}, opset_version, False, operator_export_type, strip_doc_string)\n\nRuntimeError: ONNX export failed: Couldn't export operator aten::lstm\n\nDefined at:\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/rnn.py(522): forward_impl\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/rnn.py(539): forward_tensor\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/rnn.py(559): forward\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/module.py(481): _slow_forward\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/module.py(491): __call__\n&lt;ipython-input-255-468cef410a2c&gt;(14): forward\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/module.py(481): _slow_forward\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/module.py(491): __call__\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/jit/__init__.py(294): forward\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/nn/modules/module.py(493): __call__\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/jit/__init__.py(231): get_trace_graph\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py(225): _trace_and_get_graph_from_model\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py(266): _model_to_graph\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py(363): _export\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/utils.py(131): export\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/onnx/__init__.py(25): export\n&lt;ipython-input-264-28c6c55537ab&gt;(12): &lt;module&gt;\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/IPython/core/interactiveshell.py(2963): run_code\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/IPython/core/interactiveshell.py(2903): run_ast_nodes\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/IPython/core/interactiveshell.py(2785): _run_cell\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/IPython/core/interactiveshell.py(2662): run_cell\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/zmqshell.py(537): run_cell\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/ipkernel.py(208): do_execute\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/kernelbase.py(399): execute_request\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/kernelbase.py(233): dispatch_shell\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/kernelbase.py(283): dispatcher\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/tornado/stack_context.py(276): null_wrapper\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/zmq/eventloop/zmqstream.py(432): _run_callback\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/zmq/eventloop/zmqstream.py(480): _handle_recv\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/zmq/eventloop/zmqstream.py(450): _handle_events\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/tornado/stack_context.py(276): null_wrapper\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/tornado/platform/asyncio.py(117): _handle_events\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/asyncio/events.py(145): _run\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/asyncio/base_events.py(1432): _run_once\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/asyncio/base_events.py(422): run_forever\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/tornado/platform/asyncio.py(127): start\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/kernelapp.py(486): start\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/traitlets/config/application.py(658): launch_instance\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/ipykernel/__main__.py(3): &lt;module&gt;\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/runpy.py(85): _run_code\n/home/ec2-user/anaconda3/envs/pytorch_p36/lib/python3.6/runpy.py(193): _run_module_as_main\n\n\nGraph we tried to export:\ngraph(%input.1 : Float(2685, 5, 6),\n      %lstm.weight_ih_l0 : Float(12, 6),\n      %lstm.weight_hh_l0 : Float(12, 3),\n      %lstm.bias_ih_l0 : Float(12),\n      %lstm.bias_hh_l0 : Float(12),\n      %lstm.weight_ih_l1 : Float(12, 3),\n      %lstm.weight_hh_l1 : Float(12, 3),\n      %lstm.bias_ih_l1 : Float(12),\n      %lstm.bias_hh_l1 : Float(12),\n      %fc1.weight : Float(3, 3),\n      %fc1.bias : Float(3),\n      %fc2.weight : Float(6, 3),\n      %fc2.bias : Float(6)):\n  %13 : Long() = onnx::Constant[value={0}](), scope: Model\n  %14 : Tensor = onnx::Shape(%input.1), scope: Model\n  %15 : Long() = onnx::Gather[axis=0](%14, %13), scope: Model\n  %16 : Long() = onnx::Constant[value={2}](), scope: Model\n  %17 : Long() = onnx::Constant[value={3}](), scope: Model\n  %18 : Tensor = onnx::Unsqueeze[axes=[0]](%16)\n  %19 : Tensor = onnx::Unsqueeze[axes=[0]](%15)\n  %20 : Tensor = onnx::Unsqueeze[axes=[0]](%17)\n  %21 : Tensor = onnx::Concat[axis=0](%18, %19, %20)\n  %22 : Float(2, 2685, 3) = onnx::ConstantOfShape[value={0}](%21), scope: Model\n  %23 : Long() = onnx::Constant[value={0}](), scope: Model\n  %24 : Tensor = onnx::Shape(%input.1), scope: Model\n  %25 : Long() = onnx::Gather[axis=0](%24, %23), scope: Model\n  %26 : Long() = onnx::Constant[value={2}](), scope: Model\n  %27 : Long() = onnx::Constant[value={3}](), scope: Model\n  %28 : Tensor = onnx::Unsqueeze[axes=[0]](%26)\n  %29 : Tensor = onnx::Unsqueeze[axes=[0]](%25)\n  %30 : Tensor = onnx::Unsqueeze[axes=[0]](%27)\n  %31 : Tensor = onnx::Concat[axis=0](%28, %29, %30)\n  %32 : Float(2, 2685, 3) = onnx::ConstantOfShape[value={0}](%31), scope: Model\n  %33 : Long() = onnx::Constant[value={1}](), scope: Model/LSTM[lstm]\n  %34 : Long() = onnx::Constant[value={2}](), scope: Model/LSTM[lstm]\n  %35 : Double() = onnx::Constant[value={0}](), scope: Model/LSTM[lstm]\n  %36 : Long() = onnx::Constant[value={0}](), scope: Model/LSTM[lstm]\n  %37 : Long() = onnx::Constant[value={0}](), scope: Model/LSTM[lstm]\n  %38 : Long() = onnx::Constant[value={1}](), scope: Model/LSTM[lstm]\n  %input.2 : Float(2685!, 5!, 3), %40 : Float(2, 2685, 3), %41 : Float(2, 2685, 3) = aten::lstm(%input.1, %22, %32, %lstm.weight_ih_l0, %lstm.weight_hh_l0, %lstm.bias_ih_l0, %lstm.bias_hh_l0, %lstm.weight_ih_l1, %lstm.weight_hh_l1, %lstm.bias_ih_l1, %lstm.bias_hh_l1, %33, %34, %35, %36, %37, %38), scope: Model/LSTM[lstm]\n  %42 : Float(3!, 3!) = onnx::Transpose[perm=[1, 0]](%fc1.weight), scope: Model/Linear[fc1]\n  %43 : Float(2685, 5, 3) = onnx::MatMul(%input.2, %42), scope: Model/Linear[fc1]\n  %44 : Float(2685, 5, 3) = onnx::Add(%43, %fc1.bias), scope: Model/Linear[fc1]\n  %45 : Float(3!, 6!) = onnx::Transpose[perm=[1, 0]](%fc2.weight), scope: Model/Linear[fc2]\n  %46 : Float(2685, 5, 6) = onnx::MatMul(%44, %45), scope: Model/Linear[fc2]\n  %47 : Float(2685, 5, 6) = onnx::Add(%46, %fc2.bias), scope: Model/Linear[fc2]\n  return (%47)\n</code></pre>\n\n<p>What does this mean? What should I do to export properly?</p>\n"}, {"tags": ["python", "python-3.x", "opencv", "machine-learning", "numpy-ndarray"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564625726, "post_id": 57299937, "comment_id": 101095507, "body": "Thanks for your answer, Anubhav. I&#39;ve tried what you&#39;ve answered but now I got this warning.  <code>ConvergenceWarning: Liblinear failed to converge, increase the number of iterations</code>. Looking around I found that I have to increase iterations.&#191;What do you think?"}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564626677, "post_id": 57299937, "comment_id": 101095671, "body": "To complement the comment above, I&#39;ve used <code>dual = False</code> in <code>LinearSVC</code> to avoid the warning but the process still abort."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564631057, "post_id": 57299937, "comment_id": 101096370, "body": "But, please tell me one thing what&#39;s in your path : <code>C:\\\\dataset\\\\train</code>. It needs to contain class folder with .jpg files inside it."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564631500, "post_id": 57299937, "comment_id": 101096445, "body": "Try <code>max_iter=10000</code> in <code>LinearSVC</code> model. If that doesn&#39;t work try scaling your data between 0-1 to deal with <code>ConvergenceWarning: Liblinear failed to converge, increase the number of iterations</code>."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564631563, "post_id": 57299937, "comment_id": 101096457, "body": "I think this is completely different matter, more related to number of data files you are using."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564631627, "post_id": 57299937, "comment_id": 101096466, "body": "check this: <a href=\"https://stackoverflow.com/questions/52670012/convergencewarning-liblinear-failed-to-converge-increase-the-number-of-iterati\" title=\"convergencewarning liblinear failed to converge increase the number of iterati\">stackoverflow.com/questions/52670012/&hellip;</a>"}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564664643, "post_id": 57299937, "comment_id": 101111616, "body": "I placed files into subfolders and classified them manually and works fine extracting descriptors. The process aborts at fitting data, launching the warning I&#39;ve described above."}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564664736, "post_id": 57299937, "comment_id": 101111680, "body": "I have this folder structure <code>train --&gt; accepted --&gt; img.jpg</code> Also, I already did <code>StandardScaling()</code> and changing <code>max_iter = 10000000</code> and still got the warning and the process aborted."}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564665174, "post_id": 57299937, "comment_id": 101111955, "body": "<code>train --&gt; accepted --&gt; 11 items</code> <code>train --&gt; wrinkled --&gt; 21 items</code> - <code>test --&gt; accepted --&gt; 18 items</code> <code>test --&gt; wrinkled --&gt; 44 items</code>"}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564666655, "post_id": 57299937, "comment_id": 101112875, "body": "I already mailed you. In the code I tried <code>max_iter = 1000000</code>. It takes a bit to process but ends aborting anyways."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 0, "creation_date": 1564668679, "post_id": 57299937, "comment_id": 101114198, "body": "Just merge both folders inside <code>test_path</code> directory. No need to maintain separate folder during testing. BTW, above code assume you are reading files in <code>test_path</code>, not directory like we were doing during training."}, {"owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "edited": false, "score": 1, "creation_date": 1564670346, "post_id": 57299937, "comment_id": 101115232, "body": "I fixed what you told me about the path in test set. Didn&#39;t realize it wasn&#39;t necessary to contain subfolders in it. Thank you very much."}], "tags": [], "owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1564619010, "last_edit_date": 1564619010, "creation_date": 1564614946, "answer_id": 57299937, "question_id": 57299628, "link": "https://stackoverflow.com/questions/57299628/how-to-get-to-work-reshape-function-over-2d-vectors/57299937#57299937", "title": "How to get to work reshape() function over 2D vectors", "body": "<p>Consider following points:</p>\n\n<ul>\n<li><p>You are getting above error because <code>train_features</code> is [ ](empty list) in line <code>clf_svm.fit(train_features, train_labels)</code>. It should contain atleast <code>1</code> data. It is happening because <code>train_path</code> points to a folder which contains only image files, but above code is assuming that <code>train_path</code> points to a folder having atleast <code>1</code> subfolder (no files). </p>\n\n<pre><code>train \n   - class1_folder[class11.jpg, class12.jpg, ...]\n   - class2_folder[class21.jpg, class22.jpg, ...]\n   - and so on ...\n</code></pre>\n\n<p>Here, your class names of the training data will be <code>[class1, class2, ...]</code></p></li>\n<li><p>Correct line <code>train_features.append(features.reshape(1, -1))[0]</code> to <code>train_features.append(features.reshape(1, -1)[0])</code></p></li>\n<li>Output of <code>clf_svm.predict(features)</code> is a numpy array. So, replace <code>prediction</code> with <code>str(prediction)</code> in <code>cv2.putText</code> function. You can also replace it with <code>prediction[0]</code>.</li>\n</ul>\n\n<p>Try below code:</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport os\nimport glob\nimport mahotas as mt\nfrom sklearn.svm import LinearSVC\n\n# function to extract haralick textures from an image\ndef extract_features(image):\n    # calculate haralick texture features for 4 types of adjacency\n    textures = mt.features.haralick(image)\n\n    # take the mean of it and return it\n    ht_mean = textures.mean(axis = 0).reshape(1, -1)\n    return ht_mean\n\n# load the training dataset\ntrain_path  = \"C:\\\\dataset\\\\train\"\ntrain_names = os.listdir(train_path)\n\n# empty list to hold feature vectors and train labels\ntrain_features = []\ntrain_labels   = []\n\n# loop over the training dataset\nprint (\"[STATUS] Started extracting haralick textures..\")\nfor train_name in train_names:\n    cur_path = train_path + \"\\\\\" + train_name\n    print(cur_path)\n    cur_label = train_name\n    i = 1\n\n    for file in glob.glob(cur_path + \"\\*.jpg\"):\n        print (\"Processing Image - {} in {}\".format(i, cur_label))\n        # read the training image\n        #print(file)\n        image = cv2.imread(file)\n        #print(image)\n\n        # convert the image to grayscale\n        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n        # extract haralick texture from the image\n        features = extract_features(gray)\n        #print(features.reshape(1, -1))\n        # append the feature vector and label\n        train_features.append(features.reshape(1, -1)[0])\n        train_labels.append(cur_label)\n\n        # show loop update\n        i += 1\n\n# have a look at the size of our feature vector and labels\nprint (\"Training features: {}\".format(np.array(train_features).shape))\nprint (\"Training labels: {}\".format(np.array(train_labels).shape))\n\n# create the classifier\nprint (\"[STATUS] Creating the classifier..\")\nclf_svm = LinearSVC(random_state = 9)\n\n# fit the training data and labels\nprint (\"[STATUS] Fitting data/label to model..\")\nprint(train_features)\nclf_svm.fit(train_features, train_labels)\n\n# loop over the test images\ntest_path = \"C:\\\\dataset\\\\test\"\nfor file in glob.glob(test_path + \"\\*.jpg\"): \n    # read the input image\n    image = cv2.imread(file)\n\n    # convert to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n    # extract haralick texture from the image\n    features = extract_features(gray)\n\n    # evaluate the model and predict label\n    prediction = clf_svm.predict(features)\n\n    # show the label\n    cv2.putText(image, str(prediction), (20,30), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0,255,255), 3)\n    print (\"Prediction - {}\".format(prediction))\n\n    # display the output image\n    cv2.imshow(\"Test_Image\", image)\n    cv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 3591580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ZvFbw.jpg?s=128&g=1", "display_name": "Sean Sabe", "link": "https://stackoverflow.com/users/3591580/sean-sabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 57299937, "answer_count": 1, "score": 0, "last_activity_date": 1564625254, "creation_date": 1564612361, "last_edit_date": 1564625254, "question_id": 57299628, "link": "https://stackoverflow.com/questions/57299628/how-to-get-to-work-reshape-function-over-2d-vectors", "title": "How to get to work reshape() function over 2D vectors", "body": "<p>I've reshaped a feature vector and still got this error:</p>\n\n<pre><code>ValueError: Expected 2D array, got 1D array instead: array=[].\nReshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.\n</code></pre>\n\n<p>I've used reshape before the prediction like</p>\n\n<pre><code>features = features.reshape(1, -1)\n</code></pre>\n\n<p>But no luck at all.</p>\n\n<p>This is the code I have</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport os\nimport glob\nimport mahotas as mt\nfrom sklearn.svm import LinearSVC\n\n# function to extract haralick textures from an image\ndef extract_features(image):\n    # calculate haralick texture features for 4 types of adjacency\n    textures = mt.features.haralick(image)\n\n    # take the mean of it and return it\n    ht_mean = textures.mean(axis = 0).reshape(1, -1)\n    return ht_mean\n\n# load the training dataset\ntrain_path  = \"C:/dataset/train\"\ntrain_names = os.listdir(train_path)\n\n# empty list to hold feature vectors and train labels\ntrain_features = []\ntrain_labels   = []\n\n# loop over the training dataset\nprint (\"[STATUS] Started extracting haralick textures..\")\nfor train_name in train_names:\n    cur_path = train_path + \"/\" + train_name\n    cur_label = train_name\n    i = 1\n\n    for file in glob.glob(cur_path + \"/*.jpg\"):\n        print (\"Processing Image - {} in {}\".format(i, cur_label))\n        # read the training image\n        image = cv2.imread(file)\n\n        # convert the image to grayscale\n        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n        # extract haralick texture from the image\n        features = extract_features(gray)\n\n        # append the feature vector and label\n        train_features.append(features.reshape(1, -1))[0]\n        train_labels.append(cur_label)\n\n        # show loop update\n        i += 1\n\n# have a look at the size of our feature vector and labels\nprint (\"Training features: {}\".format(np.array(train_features).shape))\nprint (\"Training labels: {}\".format(np.array(train_labels).shape))\n\n# create the classifier\nprint (\"[STATUS] Creating the classifier..\")\nclf_svm = LinearSVC(random_state = 9)\n\n# fit the training data and labels\nprint (\"[STATUS] Fitting data/label to model..\")\nclf_svm.fit(train_features, train_labels)\n\n# loop over the test images\ntest_path = \"C:/dataset/test\"\nfor file in glob.glob(test_path + \"/*.jpg\"): \n    # read the input image\n    image = cv2.imread(file)\n\n    # convert to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n    # extract haralick texture from the image\n    features = extract_features(gray)\n\n    # evaluate the model and predict label\n    prediction = clf_svm.predict(features)\n\n    # show the label\n    cv2.putText(image, prediction, (20,30), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0,255,255), 3)\n    print (\"Prediction - {}\".format(prediction))\n\n    # display the output image\n    cv2.imshow(\"Test_Image\", image)\n    cv2.waitKey(0)\n</code></pre>\n\n<p>I don't know if I'm using reshape() incorrectly or I'm missing something.</p>\n\n<p>ValueError: Expected 2D array, got 1D array instead: array=[].\n    Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1564614300, "post_id": 57299746, "comment_id": 101093417, "body": "I get <code>AttributeError: &#39;DataFrame&#39; object has no attribute &#39;tolist&#39;</code>"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1564616162, "post_id": 57299746, "comment_id": 101093790, "body": "alright it worked. Thanks! But is there a way to not write cue1, cue2, cue3, cue4, because sometimes it might have 3 cues and sometimes 4, it depends on the dataset and the trees that are generated. Can we make that dynamic?"}, {"owner": {"reputation": 44, "user_id": 8283775, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cwjQ4BHJWjQ/AAAAAAAAAAI/AAAAAAAAIRU/FtmF7ukQyzY/photo.jpg?sz=128", "display_name": "Raviprasad M R", "link": "https://stackoverflow.com/users/8283775/raviprasad-m-r"}, "reply_to_user": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1564616905, "post_id": 57299746, "comment_id": 101093938, "body": "You may need something like this: <code>df3 = pandas.DataFrame(df2.cues.values.tolist(), df2.index).add_prefix(&#39;cues_&#39;)</code>"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1564620134, "post_id": 57299746, "comment_id": 101094498, "body": "where should I write this? can you edit your question?"}], "tags": [], "owner": {"reputation": 44, "user_id": 8283775, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cwjQ4BHJWjQ/AAAAAAAAAAI/AAAAAAAAIRU/FtmF7ukQyzY/photo.jpg?sz=128", "display_name": "Raviprasad M R", "link": "https://stackoverflow.com/users/8283775/raviprasad-m-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1564615251, "last_edit_date": 1564615251, "creation_date": 1564613244, "answer_id": 57299746, "question_id": 57299624, "link": "https://stackoverflow.com/questions/57299624/how-to-name-the-new-columns-when-splitting-by-delimiter-in-pandas/57299746#57299746", "title": "How to name the new columns when splitting by delimiter in pandas", "body": "<p>instead of </p>\n\n<pre><code>df3 = df2['cues'].str.split(';',expand=True)\n</code></pre>\n\n<p>try</p>\n\n<pre><code>df2[['cues1','cues2','cues3','cues4']] = df2['cues'].str.split(';',expand=True)\ndf2 = df2.drop('cues', 1)\n</code></pre>\n\n<p>follow the same approach for others. If you want to have a copy of original DataFrame, use <code>df2_cp = df2.copy()</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57299746, "answer_count": 1, "score": 0, "last_activity_date": 1564615251, "creation_date": 1564612333, "question_id": 57299624, "link": "https://stackoverflow.com/questions/57299624/how-to-name-the-new-columns-when-splitting-by-delimiter-in-pandas", "title": "How to name the new columns when splitting by delimiter in pandas", "body": "<p>I have this dataframe <code>df2</code>:</p>\n\n<pre><code>tree    cues    directions  thresholds  exits\n1   1   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   1;0;1;0.5\n2   2   PLC2hrOGTT;Age;BMI  &gt;;&gt;;&gt;   126;29;29.7 0;1;0.5\n3   3   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   1;0;0;0.5\n4   4   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   1;1;0;0.5\n5   5   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   0;1;0;0.5\n6   6   PLC2hrOGTT;Age;BMI  &gt;;&gt;;&gt;   126;29;29.7 0;0;0.5\n7   7   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   1;1;1;0.5\n8   8   PLC2hrOGTT;Age;BMI;TimesPregnant    &gt;;&gt;;&gt;;&gt; 126;29;29.7;6   0;0;0;0.5\n</code></pre>\n\n<p>and I want to split up [\"cues\", \"exits\", \"directions\", \"thresholds\"] into 4 columns each. </p>\n\n<p>So, I did it like this: </p>\n\n<pre><code>df3 = df2['cues'].str.split(';',expand=True)\ndf4 = df2['directions'].str.split(';',expand=True)\ndf5 = df2['thresholds'].str.split(';',expand=True)\ndf6 = df2['exits'].str.split(';',expand=True)\n\n# Concatinated these dataframes into one. \ndf = pd.concat([df2, df3, df4, df5, df6], axis = 1)\ndf = df.reset_index(drop=True)\n\n# I drop the initial columns that I don't need anymore\ndf.drop(columns =['tree','cues', 'directions', 'thresholds', 'exits'], inplace = True) \n\ndf\n\n    0   1   2   3   0   1   2   3   0   1   2   3   0   1   2   3\n0   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   1   0   1   0.5\n1   PLC2hrOGTT  Age BMI None    &gt;   &gt;   &gt;   None    126 29  29.7    None    0   1   0.5 None\n2   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   1   0   0   0.5\n3   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   1   1   0   0.5\n4   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   0   1   0   0.5\n5   PLC2hrOGTT  Age BMI None    &gt;   &gt;   &gt;   None    126 29  29.7    None    0   0   0.5 None\n6   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   1   1   1   0.5\n7   PLC2hrOGTT  Age BMI TimesPregnant   &gt;   &gt;   &gt;   &gt;   126 29  29.7    6   0   0   0   0.5\n</code></pre>\n\n<p>as you can see now I am left with DataFrame columns which are not unique. Therefore, I wanted to ask how can I give a name to columns when I split so that I have unique columns at the end when I concatenate them into one dataframe?</p>\n"}, {"tags": ["python", "raspberry-pi3", "mfcc"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564614286, "post_id": 57299724, "comment_id": 101093413, "body": "Thank you for your quick response! Do you know why this wouldn&#39;t occur the first 16-17 times? Any suggestions on how we can fix/avoid the problem?"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564614572, "post_id": 57299724, "comment_id": 101093479, "body": "@rkartunova at the moment im not sure how to fix the error but an avenue to take would be this <a href=\"https://stackoverflow.com/questions/40888164/c-program-crashes-with-exit-code-9-sigkill\">one</a>"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564616075, "post_id": 57299724, "comment_id": 101093771, "body": "@rkartunova is your program using too much memory?"}, {"owner": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564616993, "post_id": 57299724, "comment_id": 101093951, "body": "Yes, I think you&#39;re right. Maybe there are sleeping processes that are occuring because our program is only saving a png and txt file in each iteration. If this is the case, do you have any suggestions on how to prevent this sleep process from happening?"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564617577, "post_id": 57299724, "comment_id": 101094070, "body": "@rkartunova its really hard to suggest anything concrete because Im only a beginner but I would suggest you look at how much memory your program is utilizing and try to look more into SIGKILL. I would definitely look into memory issues do you know how to check how much memory a process is using?"}, {"owner": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564618001, "post_id": 57299724, "comment_id": 101094130, "body": "I think that&#39;s a great suggestion, and no I have no idea how to find that out. Do you know where I should look?"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564618643, "post_id": 57299724, "comment_id": 101094254, "body": "Go to menu =&gt; accessories =&gt; task manager and watch if the process uses a lot of memory when its running in the task manager"}, {"owner": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564622381, "post_id": 57299724, "comment_id": 101094901, "body": "SOLVED! Thank you for taking the time to look into the issue @Tyger. So originally our program was running in a computer lab on a school campus. We then ran it off a personal laptop and it is working perfectly fine now. There must be a limit on the school server that we were not aware of."}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "edited": false, "score": 0, "creation_date": 1564622437, "post_id": 57299724, "comment_id": 101094908, "body": "@rkartunova sounds good if you think my answer answered your question feel free to hit the check mark for answered"}], "tags": [], "owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "is_accepted": true, "score": 0, "last_activity_date": 1564613478, "last_edit_date": 1564613478, "creation_date": 1564613082, "answer_id": 57299724, "question_id": 57299536, "link": "https://stackoverflow.com/questions/57299536/how-to-fix-returncode-9-while-extracting-features-from-audio/57299724#57299724", "title": "How to fix (returncode: -9) while extracting features from audio", "body": "<p>returncode: -9 could mean signal <a href=\"https://ss64.com/bash/kill.html\" rel=\"nofollow noreferrer\">9</a> which means </p>\n\n<blockquote>\n  <p>SIGKILL. The SIGKILL signal is sent to a process to cause it to terminate immediately (kill). In contrast to SIGTERM and SIGINT, this signal cannot be caught or ignored, and the receiving process cannot perform any clean-up upon receiving this signal.</p>\n</blockquote>\n\n<p>and that's probably why it's not being caught by the exception.</p>\n"}], "owner": {"reputation": 13, "user_id": 11820389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b566bc737630041768c8cf14bf2b6bf?s=128&d=identicon&r=PG&f=1", "display_name": "rkartunova", "link": "https://stackoverflow.com/users/11820389/rkartunova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57299724, "answer_count": 1, "score": 1, "last_activity_date": 1564613478, "creation_date": 1564611603, "question_id": 57299536, "link": "https://stackoverflow.com/questions/57299536/how-to-fix-returncode-9-while-extracting-features-from-audio", "title": "How to fix (returncode: -9) while extracting features from audio", "body": "<p>We have programmed a device (consisting of a raspberry pi 3) to sit in a room, listen, and characterize the room based on an existing GMM. Our code works successfully until it throws an error around the 17th or 19th iteration. We have narrowed down to where in the code the problem is occurring, but we are unsure of why.</p>\n\n<p>We are beginner programmers, so apologies for the weird formatting...this is all new to us.</p>\n\n<p>Thanks in advance for any help or insight you can provide!</p>\n\n<pre><code>from sklearn import preprocessing\nimport python_speech_features as mfcc\n\ndef calculate_delta(array):\n    \"\"\"Calculate and returns the delta of given feature vector matrix\"\"\"\n\n    rows,cols = array.shape\n    deltas = np.zeros((rows,20))\n    N = 2\n    for i in range(rows):\n        index = []\n        j = 1\n        while j &lt;= N:\n            if i-j &lt; 0:\n                first = 0\n            else:\n                first = i-j\n            if i+j &gt; rows -1:\n                second = rows -1\n            else:\n                second = i+j\n            index.append((second,first))\n            j+=1\n        deltas[i] = ( array[index[0][0]]-array[index[0][1]] + (2 * (array[index[1][0]]-array[index[1][1]])) ) / 10\n    return deltas\n\ndef extract_features(audio,rate):\n\n        try:\n            \"\"\"extract 20 dim mfcc features from an audio, performs CMS and combines \n            delta to make it 40 dim feature vector\"\"\"    \n\n            # audio is audio signal from which to compute features -&gt; should be n*1 array\n            # rate is samplerate of the signal we are working with\n            # 0.025 is the length of the analysis window in seconds (default is 25ms)\n            # 0.01 is the step between successive windows in seconds (default is 10ms)\n            # 20 is number of cepstrum to return (default is 13)\n            # append energy is true if zeroth cepstral coefficient is replaced with log of total frame energy\n            # mfcc() returns a numpy array of size (NUMFRAMES by numcep) containing features, each row holds 1 feature vector \n            # further possible parameters &amp; their defaults can be found at python-speech-features.readthedocs.io/en/latest/\n            mfcc_feat = mfcc.mfcc(audio,rate, 0.025, 0.01, 20, appendEnergy = True)\n\n            # Scale all data onto one scale, eliminating sparsity &amp; following same concept of Normalization &amp; Standardization \n            mfcc_feat = preprocessing.scale(mfcc_feat)\n\n            delta = calculate_delta(mfcc_feat)\n\n            combined = np.hstack((mfcc_feat,delta))\n            print(\"Features extracted\")\n            return combined\n        except Exception as e:\n            print(e)\n            print(\"Extract features failed.\")\n</code></pre>\n\n<p>We believe the problem occurs at this line:</p>\n\n<pre><code> mfcc_feat = mfcc.mfcc(audio,rate, 0.025, 0.01, 20, appendEnergy = True\n</code></pre>\n\n<p>The error it gives us is:</p>\n\n<p>Backend terminated (returncode: -9)</p>\n"}, {"tags": ["python", "python-3.x", "pygame", "pycharm"], "comments": [{"owner": {"reputation": 834, "user_id": 5910968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-htASUfkNknc/AAAAAAAAAAI/AAAAAAAADrU/8PndtnKlxLE/photo.jpg?sz=128", "display_name": "Colin Dickie", "link": "https://stackoverflow.com/users/5910968/colin-dickie"}, "edited": false, "score": 12, "creation_date": 1564611591, "post_id": 57299511, "comment_id": 101092884, "body": "Try: RT = red()"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1564612837, "post_id": 57299511, "comment_id": 101093163, "body": "Document <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP 8 -- Style Guide for Python Code</a>  suggest to use <code>CamelCaseNames</code> for classes - <code>class Red</code> and <code>lower_case_names</code> for variables in functions - <code>rt = Red()</code>. You can see this even in PyGame which has class <code>pygame.Rect()</code> and function <code>pygame.draw.rect()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11362979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07bade056ffc6b77cb2f25b3ba5a71a4?s=128&d=identicon&r=PG&f=1", "display_name": "thecast", "link": "https://stackoverflow.com/users/11362979/thecast"}, "edited": false, "score": 0, "creation_date": 1564650945, "post_id": 57299841, "comment_id": 101103998, "body": "thanks a lot, it worked when i wrote RT = red and red.draw_red_team_one(RT)"}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "reply_to_user": {"reputation": 11, "user_id": 11362979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07bade056ffc6b77cb2f25b3ba5a71a4?s=128&d=identicon&r=PG&f=1", "display_name": "thecast", "link": "https://stackoverflow.com/users/11362979/thecast"}, "edited": false, "score": 0, "creation_date": 1564659948, "post_id": 57299841, "comment_id": 101108968, "body": "Hmm I think you are misusing the class/methods. I also spotted something else that is not correct. It might work at the moment, but your methods have no reference to the object the way you call it."}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "reply_to_user": {"reputation": 11, "user_id": 11362979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07bade056ffc6b77cb2f25b3ba5a71a4?s=128&d=identicon&r=PG&f=1", "display_name": "thecast", "link": "https://stackoverflow.com/users/11362979/thecast"}, "edited": false, "score": 0, "creation_date": 1564660027, "post_id": 57299841, "comment_id": 101109015, "body": "...and by the way, you also never call the <code>__init__</code> method, because you don&#39;t instantiate objects."}], "tags": [], "owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "is_accepted": true, "score": 2, "last_activity_date": 1564660234, "last_edit_date": 1564660234, "creation_date": 1564614148, "answer_id": 57299841, "question_id": 57299511, "link": "https://stackoverflow.com/questions/57299511/how-do-i-call-a-method-properly/57299841#57299841", "title": "How do I call a method properly?", "body": "<p>With <code>RT = red</code> you assigned the class to RT, but <code>draw_red_team_one</code> is an instance method and as such it requires the positional argument <code>self</code> as declared in your method. If you call this method on an instance of class <code>red</code>, the argument is implicitely passed, so you don't notice it, but if you call it using <code>red.draw_red_team_one()</code> you have to pass it yourself, otherwise you get the error message, you mentioned.\nTo put it in another way:</p>\n\n<pre><code>obj.draw_red_team_one()\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>red.draw_red_team_one(obj)\n</code></pre>\n\n<p>The second variant is just what Python implicitly does, when the first variant is executed.</p>\n\n<p>But anyways, you will not need to reference the method in the style of <code>red.draw_red_team_one</code> very often. You normally only need this, if you have to pass the method as callable somewhere. E.g. if you have a class with a method, that returns some info of the objects and you want to use methods like <code>map</code> to get the information for each object in a list. In that case, you would do something like:</p>\n\n<pre><code>map(PersonClass.name, list_of_people)\n</code></pre>\n\n<p>Which is the same as (in the sense that both are iterables returning the same elements):</p>\n\n<pre><code>[person.name() for person in list_of_people]\n</code></pre>\n\n<p>Btw. I think your code should rather look like this (haven't checked if it runs though):</p>\n\n<pre><code>class red:\n    def __init__(self):\n        self.x_y = [130, 290]\n        self.height_width = [10, 3]\n        self.red = [255, 0, 0]\n\n    def draw_salt(self, surface, color, x, y, height, width):\n        pygame.draw.rect(surface, color, ((x, y), (height, width)))\n\n    def draw_red_team_one(self):\n        # you need to add self. to reference the instance variables\n        self.draw_salt(screen, self.red, self.x_y[0], self.x_y[1], self.height_width[0], self.height_width[1])\n\nrunning = True\n\nwhile running:\n    # create an object (this creates an instance and implicitely calls __init__ which performs your initialization code)\n    RT = red()\n    RT.draw_red_team_one()\n    pygame.display.flip()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11362979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07bade056ffc6b77cb2f25b3ba5a71a4?s=128&d=identicon&r=PG&f=1", "display_name": "thecast", "link": "https://stackoverflow.com/users/11362979/thecast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57299841, "answer_count": 1, "score": -1, "last_activity_date": 1564660234, "creation_date": 1564611402, "last_edit_date": 1564612353, "question_id": 57299511, "link": "https://stackoverflow.com/questions/57299511/how-do-i-call-a-method-properly", "title": "How do I call a method properly?", "body": "<p>I am working on a game and have met a problem. I am getting a error when trying to call the <code>draw_red_team_one()</code> method but I can't see the reason why. </p>\n\n<p>It says missing 1 required positional argument: <code>self</code> so I checked it out and found out that I had to write <code>RT = red</code> and then <code>self.draw_red_team_one()</code> so I fixed that but I still get the same error. </p>\n\n<pre><code>class red:\n    def __init__(self):\n        self.x_y = [130, 290]\n        self.height_width = [10, 3]\n        self.red = [255, 0, 0]\n\n    def draw_salt(self, surface, color, x, y, height, width):\n        pygame.draw.rect(surface, color, ((x, y), (height, width)))\n\n    def draw_red_team_one(self):\n        self.draw_salt(screen, red, x_y[0], x_y[1], height_width[0], height_width[1])\nrunning = True\n\nwhile running:\n    RT = red\n    RT.draw_red_team_one()\n    pygame.display.flip()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n</code></pre>\n\n<p>I expect the full program to open a pygame window and print a white horizontal line with a red box on the top left side. The program just throws me a error.</p>\n"}, {"tags": ["python", "string", "selenium", "selenium-webdriver", "formatting"], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1564665422, "post_id": 57300593, "comment_id": 101112116, "body": "This should nail the OP"}], "tags": [], "owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "is_accepted": true, "score": 1, "last_activity_date": 1564621239, "creation_date": 1564621239, "answer_id": 57300593, "question_id": 57299510, "link": "https://stackoverflow.com/questions/57299510/finding-element-with-selenium-using-string-formating/57300593#57300593", "title": "Finding element with selenium using string formating", "body": "<p><code>x.strip()</code> doesn't change x, so you'd need something like x = x.strip().. but that won't work in the loop you have, because changing x still won't change var1, var2.</p>\n\n<p>So, instead, just do something along the lines of:</p>\n\n<pre><code>find_elem = ('{}[class*=\"{}\"]').format(var1.strip(), var2.strip())\n</code></pre>\n\n<p>Quick look at the google homepage, I don't see any divs with class similar to lga, though there is a div with id=lga. So my guess as to why it can't be found is, because it's not there.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6510891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57300593, "answer_count": 1, "score": 0, "last_activity_date": 1564621239, "creation_date": 1564611392, "last_edit_date": 1592644375, "question_id": 57299510, "link": "https://stackoverflow.com/questions/57299510/finding-element-with-selenium-using-string-formating", "title": "Finding element with selenium using string formating", "body": "<p>I am trying to find an element in the DOM/HTML <a href=\"https://stackoverflow.com/questions/18600391/selenium-python-selecting-via-css-selector\">using</a> css selector with selenium and python.</p>\n<p>However I am receiving an error, the syntax appears to be the same but it outputs an error.</p>\n<p>Here is the code:</p>\n<pre><code>def find_element(self):\n        var1, var2 = input(&quot;enter class and div (seperated by comma): &quot;).split(',')\n        var_list = [var1,var2]\n        for x in var_list:\n            x.strip()\n        find_elem = (&quot;{}[class*='{}']&quot;).format(var1, var2)\n        try:\n            if (self.driver.find_element_by_css_selector(&quot;{}[class*='{}']&quot;.format(var1,var2)).is_displayed()):\n                print('Exist')\n            else:\n                print('does not exist')\n        except Exception as e:\n            raise Exception('Not looking for element')\n</code></pre>\n<p>Here is the error:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;/home/gregory/projects/parser/Scraper1/WebGrab.py&quot;, line 55, in find_element\n    if (self.driver.find_element_by_css_selector(&quot;{}[class*='{}']&quot;.format(var1,var2)).is_displayed()):\n  File &quot;/home/gregory/.local/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py&quot;, line 598, in find_element_by_css_selector\n    return self.find_element(by=By.CSS_SELECTOR, value=css_selector)\n  File &quot;/home/gregory/.local/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py&quot;, line 978, in find_element\n    'value': value})['value']\n  File &quot;/home/gregory/.local/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py&quot;, line 321, in execute\n    self.error_handler.check_response(response)\n  File &quot;/home/gregory/.local/lib/python3.6/site-packages/selenium/webdriver/remote/errorhandler.py&quot;, line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.NoSuchElementException: Message: Unable to locate element: div[class*='lga']\n</code></pre>\n<p>I am using google.com landing page as the test case: The element I am looking for is the Google logo. This is the element I have from the inspector. I input &quot;div&quot; and &quot;lga&quot; as div,lga.</p>\n<p>BONUS if you can tell me why the strip function is not working either.</p>\n<p>Thanks!</p>\n"}, {"tags": ["python", "maven", "parsing", "file-writing", "dependency-tree"], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 4066802, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GiiSS_sDEPE/AAAAAAAAAAI/AAAAAAAAAJQ/myPMLHIRehQ/photo.jpg?sz=128", "display_name": "lprakashv", "link": "https://stackoverflow.com/users/4066802/lprakashv"}, "is_accepted": false, "score": 0, "last_activity_date": 1564684748, "creation_date": 1564684748, "answer_id": 57315167, "question_id": 57299506, "link": "https://stackoverflow.com/questions/57299506/python-remove-header-footer-from-mvn-dependency-tree/57315167#57315167", "title": "python - remove header &amp; footer from mvn dependency tree", "body": "<pre><code>import os\n\nmvn_dep_tree_cmd = 'mvn dependency:tree &gt; new.txt'\nos.system(mvn_dep_tree_cmd)\n\nfile_in = open(\"new.txt\", \"r\")\nfile_out = open(\"bulk.txt\", \"w\")\n\n# flag denoting that current line is inside a tree\nin_tree = False\n\nfor line in file_in.readlines():\n    # this condition denotes the start of a tree\n    if line.startswith(\"[INFO] +- \"):\n        in_tree = True\n    if in_tree:\n        # if we are inside a tree the following condition denotes end of the tree\n        if line.strip() == '[INFO]':\n            in_tree = False\n            file_out.write('\\n')\n            file_out.write('\\t&lt;----------------------------------------------&gt;')\n            file_out.write('\\n\\n')\n            print(line)\n        else:\n            # writing to the out file all the contents inside the tree\n            file_out.write(line)\n            print(line)\n\nfile_in.close()\nfile_out.close()\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 10631559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a38500cd182a45dbaea8d6aca79af8?s=128&d=identicon&r=PG&f=1", "display_name": "BeansMama", "link": "https://stackoverflow.com/users/10631559/beansmama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564684748, "creation_date": 1564611373, "last_edit_date": 1564682724, "question_id": 57299506, "link": "https://stackoverflow.com/questions/57299506/python-remove-header-footer-from-mvn-dependency-tree", "title": "python - remove header &amp; footer from mvn dependency tree", "body": "<p>I need to take a maven dependency tree &amp; remove the header &amp; footer so that only the dependency info is left.  An example tree is below.</p>\n\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ----------------------------&lt; brs:libadept &gt;---------------------------\n[INFO] Building libadept 0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]--------------------------------\n[WARNING] The artifact org.apache.commons:commons-io:jar:1.3.2 has been relocated to commons-io:commons-io:jar:1.3.2\n[INFO] \n[INFO] --- maven-dependency-plugin:2.10:tree (default-cli) @ libadept ---\n[WARNING] The artifact org.apache.commons:commons-io:jar:1.3.2 has been relocated to commons-io:commons-io:jar:1.3.2\n[INFO] brs:libadept:jar:0.1-SNAPSHOT\n[INFO] +- org.antlr:antlr4:jar:4.7.1:compile\n[INFO] |  +- org.antlr:antlr4-runtime:jar:4.7.1:compile\n[INFO] |  \\- com.ibm.icu:icu4j:jar:58.2:compile\n[INFO] +- brs:libutil8:jar:1.17.3:compile\n[INFO] |  \\- com.google.code.gson:gson:jar:2.7:compile\n[INFO] \\- org.slf4j:slf4j-log4j12:jar:1.7.25:compile\n[INFO]    \\- org.slf4j:slf4j-api:jar:1.7.25:compile\n[INFO] -----------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] -----------------------------------------------------------------------\n[INFO] Total time:  2.760 s\n[INFO] Finished at: 2019-07-31T14:26:14-07:00\n[INFO] -----------------------------------------------------------------------\n</code></pre>\n\n<hr>\n\n<p>I have tried this so far:</p>\n\n<pre><code>import os\nmyCmd = 'mvn dependency:tree &gt; new.txt'\nos.system(myCmd)\n\nfileObj = open(\"new.txt\", \"r\")\nfileOut = open(\"bulk.txt\", \"w\")\n\n\ndef getBulk(text):\n    for line in text.readlines():\n        if line.startswith(\"[INFO] +- \") or line.startswith(\"[INFO] | \") or line.startswith(\"[INFO] \\\\\\- \") or line.startswith(\"[INFO]    \\\\\\- \"):\n            fileOut.write(line)\n            return fileOut\n\nprint(getBulk(fileObj))\n</code></pre>\n\n<p>I want to be able to just get this info:</p>\n\n<pre><code>[INFO] +- org.antlr:antlr4:jar:4.7.1:compile\n[INFO] |  +- org.antlr:antlr4-runtime:jar:4.7.1:compile\n[INFO] |  \\- com.ibm.icu:icu4j:jar:58.2:compile\n[INFO] +- brs:libutil8:jar:1.17.3:compile\n[INFO] |  \\- com.google.code.gson:gson:jar:2.7:compile\n[INFO] \\- org.slf4j:slf4j-log4j12:jar:1.7.25:compile\n[INFO]    \\- org.slf4j:slf4j-api:jar:1.7.25:compile\n</code></pre>\n\n<p>But I am getting</p>\n\n<pre><code>&lt;_io.TextIOWrapper name='bulk.txt' mode='w' encoding='cp1252'&gt;\n</code></pre>\n\n<p>I have to make sure to take into account that the headers &amp; footers might not always be the same number of lines (eg the lines starting with \"[WARNING]\" might not always be there, so I can't just write the program such that the first ten lines get deleted).\nThanks in advance!</p>\n\n<p>Final answer:</p>\n\n<pre><code>import os\nmyCmd = 'mvn dependency:tree &gt; new.txt'\nos.system(myCmd)\nfileObj = open(\"new.txt\", \"r\").readlines()\nfileOut = open(\"bulk.txt\", \"w\")\n\ndef getBulk(text):\n    for line in text:\n        if line.startswith(\"[INFO] +- \") or line.startswith(\"[INFO] | \") or line.startswith(\"[INFO] \\- \") or line.startswith(\"[INFO]    \\- \"):\n            fileOut.write(line)\n            print(line)\n    return fileOut\n</code></pre>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611461, "post_id": 57299498, "comment_id": 101092855, "body": "So, do you mean clicking the file by running the html script?"}, {"owner": {"reputation": 35, "user_id": 3503773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdc6ae0243dc026735333e3ad40002?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3503773/noobcoder"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611576, "post_id": 57299498, "comment_id": 101092880, "body": "I give an input string , click the submit button, and the python script runs in the bg and gives the frequency of characters. Thats what I want to do. Clicking my python file will open it in gedit, I use the terminal to run codes"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611632, "post_id": 57299498, "comment_id": 101092892, "body": "are you using Python2 or 3? @noobcoder"}, {"owner": {"reputation": 35, "user_id": 3503773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdc6ae0243dc026735333e3ad40002?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3503773/noobcoder"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611791, "post_id": 57299498, "comment_id": 101092925, "body": "I use python3 @Axium"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611854, "post_id": 57299498, "comment_id": 101092941, "body": "try <code>py &quot;filename.py&quot;</code>, of course replacing filename.py with your actual filename"}, {"owner": {"reputation": 35, "user_id": 3503773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdc6ae0243dc026735333e3ad40002?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3503773/noobcoder"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564612087, "post_id": 57299498, "comment_id": 101092989, "body": "In the argument provided to &quot;action&quot; ? Already did that. Just opens up a new tab and says can&#39;t find the file :("}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564612398, "post_id": 57299498, "comment_id": 101093062, "body": "Perhaps this could be of help? <a href=\"https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button\" title=\"how can i execute a python script from an html button\">stackoverflow.com/questions/48552343/&hellip;</a>"}, {"owner": {"reputation": 923, "user_id": 4735706, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/550c63615be76b768e5b8b271f2657e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jibin Mathews", "link": "https://stackoverflow.com/users/4735706/jibin-mathews"}, "edited": false, "score": 0, "creation_date": 1564643915, "post_id": 57299498, "comment_id": 101100235, "body": "Use Ajax , call API use a microframwork in the python script like flask or Falcon"}, {"owner": {"reputation": 35, "user_id": 3503773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdc6ae0243dc026735333e3ad40002?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3503773/noobcoder"}, "reply_to_user": {"reputation": 923, "user_id": 4735706, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/550c63615be76b768e5b8b271f2657e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jibin Mathews", "link": "https://stackoverflow.com/users/4735706/jibin-mathews"}, "edited": false, "score": 0, "creation_date": 1565124680, "post_id": 57299498, "comment_id": 101251786, "body": "Yes, thank you @JibinMathews , I used Flask. Sorry for the late reply."}], "owner": {"reputation": 35, "user_id": 3503773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdc6ae0243dc026735333e3ad40002?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3503773/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564643609, "creation_date": 1564611300, "last_edit_date": 1564643609, "question_id": 57299498, "link": "https://stackoverflow.com/questions/57299498/python-script-opens-in-gedit-when-called-by-my-html-script", "title": "Python script opens in gedit when called by my html script", "body": "<p>I am just trying out a few things in Html, and I am very new to it. I tried to write a Html code that takes in input a string and calls a python script to find the frequency of all unicode characters in string. When I am running my html script, it tries to open gedit and show my python script, instead of running the script. How do I run the script, providing my arguments to it during the process?</p>\n\n<p>This is my python code :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import cgi\nimport cgitb\ncgitb.enable()\n\n#input_str=input(\"Enter the string\\n\")\ndef Frequency_match(input_str):\n    flag=0\n    count=0\n    i=0\n    j=0\n    #print(\"Here\\n\")\n    while i &lt; len(input_str):\n        #print(\"The current value of i is \",i,\"\\n\")\n        count=0\n        j=0\n        while j &lt; len(input_str):\n            if input_str[i]==input_str[j]:\n                if j&lt;i:\n                    flag=1\n                else:\n                    count+=1\n            j+=1\n        if flag==0:\n            print(\"The frequency of \",i,\" \",input_str[i],\"is\",count,\"\\n\")\n        i+=1\n        #print(\"The value of i is \",i,\"\\n\")\n        flag=0\n\nform = cgi.FieldStorage()\ninput_str = form.getvalue('input_str')\n\nFrequency_match(input_str)\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n\r\n&lt;body&gt;\r\n\r\n  &lt;form action=\"./NLP_test.py\" method=\"post\"&gt;\r\n    Input String: &lt;input type=\"text\" name=\"input_str\"&gt;&lt;br&gt;\r\n    &lt;input type=\"submit\" value=\"run_script\" \"/&gt;\r\n&lt;/form&gt;\r\n\r\n&lt;p&gt;Click on the submit button, and the input will be sent to a page on the server called \"/NLP_test.py \".&lt;/p&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When I run the html script, I get asked if I want to open the python file in text editor</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1564612756, "post_id": 57299481, "comment_id": 101093147, "body": "So <code>area</code> corresponds to the area under the curve?  So that means changing the base will change your peak value and the area correct?"}, {"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1564613510, "post_id": 57299481, "comment_id": 101093289, "body": "Please note that your equation must have fairly large area values in order to work. For instance you will not get the desired results when <code>area=2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1564612521, "creation_date": 1564612521, "answer_id": 57299648, "question_id": 57299481, "link": "https://stackoverflow.com/questions/57299481/how-to-shift-the-gaussian-curve-along-y-axis/57299648#57299648", "title": "How to shift the gaussian curve along y-axis?", "body": "<p>You can calculate the curve for a <code>peak</code> of <code>given_peak - base</code>, then shift the graph up by <code>base</code>:</p>\n\n<pre><code>def bell_curve(area, peak, base):\n    x = np.linspace(0, 1440, 1440)\n    sigma = area/(math.sqrt(2*math.pi) * (peak - base))\n    plt.plot(x, area*(stats.norm.pdf(x, mu, sigma)) + base)\n    plt.show()\n</code></pre>\n\n<p>With 10, 900, 5, this gives:</p>\n\n<pre><code>Enter the peak value:10\nEnter the area value:900\nEnter the base value:5\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZtvrL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZtvrL.png\" alt=\"enter image description here\"></a></p>\n\n<p>This will be a shorter, fatter version compared to the original which looked like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nfOTp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nfOTp.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 57299648, "answer_count": 1, "score": 0, "last_activity_date": 1564613321, "creation_date": 1564611162, "question_id": 57299481, "link": "https://stackoverflow.com/questions/57299481/how-to-shift-the-gaussian-curve-along-y-axis", "title": "How to shift the gaussian curve along y-axis?", "body": "<p>I am generating a gaussian curve as follows:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport scipy.stats as stats\nimport math\n\nmu = 840\ndef bell_curve(area, peak, base):\n    x = np.linspace(0, 1440, 1440)\n    sigma = area/(math.sqrt(2*math.pi)*peak)\n    plt.plot(x, area*(stats.norm.pdf(x, mu, sigma)))\n    plt.show()\n\npeak = int(input('Enter the peak value:'))\narea = int(input('Enter the area value:'))\nbase = int(input('Enter the base value:'))\n\n\nbell_curve(area, peak, base)\n</code></pre>\n\n<p>where <code>peak</code> is the maximum value reached by the curve at a <code>mu</code> of 840. <code>Peak</code>, <code>area</code>, <code>base</code> will be the user input value.</p>\n\n<p>Now, when the values are inputted, a general gaussian curve is plotted that starts from 0 on the y-axis. I want to shift this curve by the <code>base</code> value.</p>\n\n<p><strong>For example:</strong></p>\n\n<p>If the user has given the peak value as 10, then the curve, in general, starts at 0, reaches a value of 10 at the value of <code>mu</code> and again comes down to 0. But, when the user gives the <code>base</code> value as, say, 3 then the curve must start at 3, reach to a peak of 10 at the <code>mu</code> and again end at 3.</p>\n\n<p>How can this be done?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "file", "variables", "valueerror", "pypdf2"], "comments": [{"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564611222, "post_id": 57299469, "comment_id": 101092807, "body": "What error are you getting?"}, {"owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611290, "post_id": 57299469, "comment_id": 101092825, "body": "ValueError: embedded null byte  Sorry that was in my question must of accidentally removed when editing.  I&#39;ll put it in. @Axium"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611370, "post_id": 57299469, "comment_id": 101092843, "body": "You could try using an absolute path, unless it&#39;s already like that. @Fletchy1995"}, {"owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564611519, "post_id": 57299469, "comment_id": 101092868, "body": "Tried it, did not work :( @Axium"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564611822, "post_id": 57299469, "comment_id": 101092933, "body": "It seems that the file name has &quot;nulls&quot; in it. This article: <a href=\"http://lucumr.pocoo.org/2010/12/24/common-mistakes-as-web-developer/\" rel=\"nofollow noreferrer\">lucumr.pocoo.org/2010/12/24/common-mistakes-as-web-developer</a> can help fix it. I&#39;m not posting an answer because I don&#39;t know exactly how to fix it."}, {"owner": {"reputation": 2408, "user_id": 7013263, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/41kW6.jpg?s=128&g=1", "display_name": "dejdej", "link": "https://stackoverflow.com/users/7013263/dejdej"}, "edited": false, "score": 0, "creation_date": 1564611906, "post_id": 57299469, "comment_id": 101092949, "body": "You get the error: &quot;ValueError: embedded null byte&quot; because  you attempt to open a filename with nulls in it ."}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564611962, "post_id": 57299469, "comment_id": 101092970, "body": "Also, try using this before <code>objectPDF = open(pdfFileName,&#39;rb&#39;)</code>: <code>pdfFileName = pdfFileName.replace(&#39;\\0&#39;,&#39;&#39;)</code>. I&#39;m not too sure if it&#39;ll work but it&#39;s worth a try."}, {"owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564612185, "post_id": 57299469, "comment_id": 101093012, "body": "Actually your comment worked with the replace method.  Thanks @Axium"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564612210, "post_id": 57299469, "comment_id": 101093015, "body": "I&#39;ll put it as an answer then."}], "answers": [{"tags": [], "owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "is_accepted": true, "score": 1, "last_activity_date": 1564612280, "creation_date": 1564612280, "answer_id": 57299620, "question_id": 57299469, "link": "https://stackoverflow.com/questions/57299469/opening-file-using-a-variable-that-contains-file-name-python/57299620#57299620", "title": "Opening File Using a Variable that Contains File Name Python", "body": "<p>Place this: <code>pdfFileName = pdfFileName.replace('\\0','')</code> before this: <code>objectPDF = open(pdfFileName,'rb')</code></p>\n\n<p>What that code does is that it removes all \"nulls` from the string, which allows everything to run properly.</p>\n"}], "owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 57299620, "answer_count": 1, "score": 2, "last_activity_date": 1566426178, "creation_date": 1564611113, "last_edit_date": 1566426178, "question_id": 57299469, "link": "https://stackoverflow.com/questions/57299469/opening-file-using-a-variable-that-contains-file-name-python", "title": "Opening File Using a Variable that Contains File Name Python", "body": "<p>Trying to read a pdf file thats name may change, however I have a preliminary script that contains the file name.  So I successfully save that file name to a variable however when I try to open a file using that variable I get an error: \"ValueError: embedded null byte\" </p>\n\n<p>I have tried a couple solutions for example I attempted using this <a href=\"https://stackoverflow.com/questions/14622314/python-inserting-variable-string-as-file-name\">solution</a>,  However I receive the same error.  I have identified a work around using glob, since I can predict the file name (I know there will always be one PDF) however if possible I want to try to avoid using this solution in case in the future we have multiple PDFs to handle. </p>\n\n<p>This is what I have:</p>\n\n<pre><code>pdfFileName = pdfFileName[132:220] # File path is correct, I have confirmed\nobjectPDF = open(pdfFileName,'rb')\npdfReader = PyPDF2.PdfFileReader(objectPDF)\npageObj = pdfReader.getPage(0)\nprint(pageObj.extractText())\n</code></pre>\n\n<p>My Error is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"verify.py\", line 48, in &lt;module&gt;\n    objectPDF = open(pdfFileName,'rb')\nValueError: embedded null byte\n\n</code></pre>\n\n<p>What I would like is for the text of the pdf to be output to the console.  The error is certainly with the way I'm reading the file, if I hard type the file path in it works as expected, but not when a variable is used with the exact same value as the string.  </p>\n"}, {"tags": ["python", "django", "square-connect", "square"], "comments": [{"owner": {"reputation": 1305, "user_id": 9352043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4CQH.jpg?s=128&g=1", "display_name": "sjosey", "link": "https://stackoverflow.com/users/9352043/sjosey"}, "edited": false, "score": 0, "creation_date": 1567095743, "post_id": 57299451, "comment_id": 101870551, "body": "OAuth is definitely not required, but authentication errors imply that the access token is incorrect. Are you sure you&#39;re using the access token and not application id?"}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 13675283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0lqs.png?s=128&g=1", "display_name": "advaiyalad", "link": "https://stackoverflow.com/users/13675283/advaiyalad"}, "is_accepted": false, "score": 0, "last_activity_date": 1591802714, "creation_date": 1591802714, "answer_id": 62307249, "question_id": 57299451, "link": "https://stackoverflow.com/questions/57299451/getting-started-with-square-and-django/62307249#62307249", "title": "Getting Started with Square and Django", "body": "<p>You need to set your access token, then your code will work. The location id is also not set, so square sends an error. I had the same problem, and I realized that it was because I forgot to add the access token. Hope that this helps.</p>\n"}], "owner": {"reputation": 359, "user_id": 2977480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8300c9330c9580f5dabcf4ac05b1aa?s=128&d=identicon&r=PG&f=1", "display_name": "shloosh", "link": "https://stackoverflow.com/users/2977480/shloosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1591802714, "creation_date": 1564610961, "question_id": 57299451, "link": "https://stackoverflow.com/questions/57299451/getting-started-with-square-and-django", "title": "Getting Started with Square and Django", "body": "<p>I'm trying to get a simple Square credit card form to work on our Django website. I'm new to using Square, but have used similar API's such as Stripe in the past.</p>\n\n<p>To start, I followed along with their <a href=\"https://developer.squareup.com/docs/payment-form/payment-form-walkthrough\" rel=\"nofollow noreferrer\">Square Payment Form walkthrough</a>. I added their SqPaymentForm library and our own javascript file where I initialized a new SqPaymentForm.</p>\n\n<p>The front-end appears to be working and is generating a unique card nonce every time I enter fake credentials.</p>\n\n<p>Next, I submitted the form to our back-end (including the card nonce, in a hidden nonce field).</p>\n\n<p>On the back-end, I've installed the <a href=\"https://github.com/square/connect-python-sdk\" rel=\"nofollow noreferrer\">Square Connect Python SDK</a>. I copied their \"Charge the card nonce\" example as closely as possible, substituting our sandbox access token and location ID:</p>\n\n<pre><code>import uuid\n\nimport squareconnect\nfrom squareconnect.rest import ApiException\nfrom squareconnect.apis.transactions_api import TransactionsApi\n\n# create an instance of the Transactions API class\napi_instance = TransactionsApi()\n# setup authorization\napi_instance.api_client.configuration.access_token = 'sandbox-access-token'\n\nlocation_id = 'sandbox-location-id'\n\nnonce = request.POST.get('nonce', 'empty')\nif (nonce == 'empty'): print(\"Throw error\")\n# print(nonce)\n\ntry:\n  # Charge\n  idempotency_key = str(uuid.uuid1())\n  amount = {'amount': 100, 'currency': 'USD'}\n  body = {'idempotency_key': idempotency_key, 'card_nonce': nonce, 'amount_money': amount}\n  api_response = api_instance.charge(location_id, body)\n  print (api_response.transaction)\nexcept ApiException as e:\n  print ('Exception when calling TransactionApi-&gt;charge: %s\\n' % e)\n</code></pre>\n\n<p>I've also tried reformatting this code slightly to fit the example demonstrated in Square's <a href=\"https://github.com/square/connect-api-examples/tree/master/connect-examples/v2/python_payment\" rel=\"nofollow noreferrer\">connect-api-examples on GitHub</a>.</p>\n\n<p>But, when I test it in localhost (http), using the different demo credentials provided by Square on their <a href=\"https://developer.squareup.com/docs/testing/test-values\" rel=\"nofollow noreferrer\">test values page</a>, I consistently get an 'Unauthorized' error from the API:</p>\n\n<pre><code>Exception when calling TransactionApi-&gt;charge: (401)\nReason: Unauthorized\nHTTP response headers: HTTPHeaderDict(\n{'Content-Type': 'application/json', 'Vary': 'Origin, Accept-Encoding', 'X-Content-Type-Options': 'nosniff', 'X-Download-Options': 'noopen', 'X-Frame-Options': 'SAMEORIGIN', 'X-Permitted-Cross-Domain-Policies': 'none', 'X-Xss-Protection': '1; mode=block', 'Date': 'Wed, 31 Jul 2019 20:59:10 GMT', 'keep-alive': 'timeout=60', 'Strict-Transport-Security': 'max-age=631152000', 'content-length': '119'})\nHTTP response body: {\"errors\":[{\"category\":\"AUTHENTICATION_ERROR\",\"code\":\"UNAUTHORIZED\",\"detail\":\"This request could not be authorized.\"}]}\n</code></pre>\n\n<p>When I look through the Troubleshooting documentation, it says the likely cause for an <a href=\"https://developer.squareup.com/docs/oauth-api/troubleshooting#unauthorized\" rel=\"nofollow noreferrer\">Unauthorized error</a> is an invalid OAuth token. Yet, none of Square's demos or examples utilize OAuth. I don't understand why OAuth would be necessary for a simple payment form that isn't behind a sign-up page?</p>\n\n<p>I've tried uploading the code to our https website to see if an SSL cert was required, but I get the same error.</p>\n"}, {"tags": ["python", "pandas", "csv", "python-3.7"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564610960, "post_id": 57299399, "comment_id": 101092735, "body": "Usually we read a whole csv file into a data structure like a <code>DataFrame</code>, the do some work on it, and finally write a whole new file.  Remember, a csv file is just a text file, lines of columns.  You can add new lines to the end of the file, but you can&#39;t change or rewrite the file."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5612944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1071215062911474/picture?type=large", "display_name": "\u9ec3\u5cb3\u6db5", "link": "https://stackoverflow.com/users/5612944/%e9%bb%83%e5%b2%b3%e6%b6%b5"}, "edited": false, "score": 0, "creation_date": 1564613081, "post_id": 57299706, "comment_id": 101093205, "body": "To read in a csv file as a Pandas dataframe, use <code>pd.read_csv(&#39;YOUR_FILE_LOCATION&#39;)</code>. In this case, <code>pd.read_csv(&#39;.&#47;file1.csv&#39;)</code>"}, {"owner": {"reputation": 23, "user_id": 11846067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95663505468dda828326f5fa380832f0?s=128&d=identicon&r=PG", "display_name": "user63266", "link": "https://stackoverflow.com/users/11846067/user63266"}, "edited": false, "score": 0, "creation_date": 1564613379, "post_id": 57299706, "comment_id": 101093263, "body": "I&#39;m assuming this would only run until the shorter dataframe is exhausted though, is there a pandas equivalent to <code>.seek()</code>? since I&#39;m trying to read all of the second file with each line of the first file"}, {"owner": {"reputation": 1, "user_id": 5612944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1071215062911474/picture?type=large", "display_name": "\u9ec3\u5cb3\u6db5", "link": "https://stackoverflow.com/users/5612944/%e9%bb%83%e5%b2%b3%e6%b6%b5"}, "reply_to_user": {"reputation": 23, "user_id": 11846067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95663505468dda828326f5fa380832f0?s=128&d=identicon&r=PG", "display_name": "user63266", "link": "https://stackoverflow.com/users/11846067/user63266"}, "edited": false, "score": 0, "creation_date": 1564618016, "post_id": 57299706, "comment_id": 101094134, "body": "<code>[max(np.where(i &gt; df2.A, 1, 0)) for i in df1.A]</code> will give you a binary array which shows if row <code>i</code> in <code>df.A</code> is bigger than any of number in <code>df2.A</code>"}, {"owner": {"reputation": 1, "user_id": 5612944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1071215062911474/picture?type=large", "display_name": "\u9ec3\u5cb3\u6db5", "link": "https://stackoverflow.com/users/5612944/%e9%bb%83%e5%b2%b3%e6%b6%b5"}, "reply_to_user": {"reputation": 23, "user_id": 11846067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95663505468dda828326f5fa380832f0?s=128&d=identicon&r=PG", "display_name": "user63266", "link": "https://stackoverflow.com/users/11846067/user63266"}, "edited": false, "score": 0, "creation_date": 1564618747, "post_id": 57299706, "comment_id": 101094269, "body": "``` import pandas as pd  import numpy as np  df1 = pd.util.testing.makeMixedDataFrame() df2 = pd.util.testing.makeMixedDataFrame()  df3=pd.DataFrame({}) for col in df2.A:     df3[col] = np.where(df1.A &lt; col, 1,0) df3 ```"}], "tags": [], "owner": {"reputation": 1, "user_id": 5612944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1071215062911474/picture?type=large", "display_name": "\u9ec3\u5cb3\u6db5", "link": "https://stackoverflow.com/users/5612944/%e9%bb%83%e5%b2%b3%e6%b6%b5"}, "is_accepted": false, "score": 0, "last_activity_date": 1564619780, "last_edit_date": 1564619780, "creation_date": 1564612965, "answer_id": 57299706, "question_id": 57299399, "link": "https://stackoverflow.com/questions/57299399/reading-and-writing-to-the-same-csv-file-after-comparing-two-csv-files/57299706#57299706", "title": "Reading and writing to the same csv file after comparing two csv files", "body": "<p>You could create two Pandas DataFrame and use <code>np.where()</code> to get the comparison.  </p>\n\n<p>Assume you have 2 files, called <code>df1</code> and <code>df2</code>. There's a <code>score</code> column in each df. Then, you can make the comparison by </p>\n\n<pre><code>result = np.where(df1.score &gt; df2.score, \"WIN\", \"lose\")\n</code></pre>\n\n<p>and the if you type result, it shows the comparison result.</p>\n\n<p>You can use the following code to experiment on your side:</p>\n\n<pre><code>import pandas as pd \nimport numpy as np\ndf1 = pd.util.testing.makeMixedDataFrame()\ndf2 = pd.util.testing.makeMixedDataFrame()\ndf3 = np.where(df1.A &gt; df2.B, 'WIN', 'lose')\ndf3 \n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>import pandas as pd \nimport numpy as np\ndf1 = pd.util.testing.makeMixedDataFrame()\ndf2 = pd.util.testing.makeMixedDataFrame()\ndf3=pd.DataFrame({})\nfor col in df2.A:\n   df3[col] = np.where(df1.A &lt; col, 1,0)\ndf3\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>for i in df1.index: # go through file 1 \n  r1 = df1.iloc[i] # each time choose a row\n  df = df2[df2.D == r1.D] # and choose the rows to compare from file 2, if D matches  \n  c = np.where(df.A &lt;= r1.A, \"Yes\",\"No\") \n\n  for a in c:\n      print (a)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11846067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95663505468dda828326f5fa380832f0?s=128&d=identicon&r=PG", "display_name": "user63266", "link": "https://stackoverflow.com/users/11846067/user63266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564619780, "creation_date": 1564610608, "question_id": 57299399, "link": "https://stackoverflow.com/questions/57299399/reading-and-writing-to-the-same-csv-file-after-comparing-two-csv-files", "title": "Reading and writing to the same csv file after comparing two csv files", "body": "<p>I have two files that I want to compare, I have the for loop to compare them, but I'm unsure of how to continue and make it so that I have data for each line of the first file that met the conditions of the if/else statement.</p>\n\n<pre><code>date_location = 3\nnumeric_location = 4\n\n\nwith open('file1.csv', 'r') as f1:\n    next(f1)\n    with open('file2.csv', 'r') as f2:\n        next(f2)\n        for i in (f1):\n                f1_date = (i.split(',')[date_location])\n                f1_number = (i.split(',')[numeric_location])\n                for j in (f2):\n                        f2_date = (j.split(',')[date_location])\n                        f2_number = (j.split(',')[numeric_location])\n                        if f1_date == f2_date:\n                            if f2_number &gt; f1_number:\n#                                print('WIN')\n                                continue\n                            elif f2_number &lt;= f1_number:\n#                                print('lose')\n                f2.seek(0, 0)\n</code></pre>\n\n<p>This is the code that I currently have. What I want is to show the results of the if loop into <code>file1.csv</code>.Though I'm unable to make it record what I have printed into <code>file1.csv</code>. Is there any way for me to do this preferably in pandas? I tried earlier to make the for loop in pandas but it wouldn't allow me to do that with the dataframes for both files. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "edited": false, "score": 1, "creation_date": 1564610927, "post_id": 57299400, "comment_id": 101092722, "body": "I&#39;ve never used np.where that works a trick and looks very easy to read. Thanks for your help!! Worked a charm!"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 4, "last_activity_date": 1564610620, "creation_date": 1564610620, "answer_id": 57299400, "question_id": 57299343, "link": "https://stackoverflow.com/questions/57299343/pandas-divide-column-data-by-number-if-row-of-next-column-contains-certain-valu/57299400#57299400", "title": "Pandas: Divide column data by number if row of next column contains certain value", "body": "<p>Use <code>np.where</code>:</p>\n\n<pre><code>df['qty_cal'] = np.where(df['unit_of_measure'] == 'nodes', df['qty'], df['qty']/16)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 10104231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WvoM862slBE/AAAAAAAAAAI/AAAAAAAAI0g/AZE5G-stAPY/photo.jpg?sz=128", "display_name": "Prakhar Jhudele", "link": "https://stackoverflow.com/users/10104231/prakhar-jhudele"}, "edited": false, "score": 0, "creation_date": 1590814678, "post_id": 57299445, "comment_id": 109829306, "body": "can you please have a look into my question [<a href=\"https://stackoverflow.com/questions/62083576/pandas-row-filters-and-and-division-from-specific-rows-and-columns]\" title=\"pandas row filters and and division from specific rows and columns%5d\">stackoverflow.com/questions/62083576/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1086, "user_id": 7988497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155370853067558/picture?type=large", "display_name": "MichaelD", "link": "https://stackoverflow.com/users/7988497/michaeld"}, "is_accepted": false, "score": 1, "last_activity_date": 1564610938, "creation_date": 1564610938, "answer_id": 57299445, "question_id": 57299343, "link": "https://stackoverflow.com/questions/57299343/pandas-divide-column-data-by-number-if-row-of-next-column-contains-certain-valu/57299445#57299445", "title": "Pandas: Divide column data by number if row of next column contains certain value", "body": "<p>The statement <code>ppn_df['unit_of_measure']</code> returns a series (a column) with all the values in it, not a single item.  One way to do this is with an <code>apply</code> or a <code>map</code></p>\n\n<p>Try this</p>\n\n<pre><code>ppn_df.qty_cal = ppn_df.apply(lambda x: x['qty'] if x['unit_of_measure'] == 'nodes' else x['qty'] / 16, axis=1)\n</code></pre>\n\n<p>This function will execute the <code>lambda</code> function for each row in the series</p>\n"}], "owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 57299400, "answer_count": 2, "score": 3, "last_activity_date": 1564621867, "creation_date": 1564610208, "last_edit_date": 1564621867, "question_id": 57299343, "link": "https://stackoverflow.com/questions/57299343/pandas-divide-column-data-by-number-if-row-of-next-column-contains-certain-valu", "title": "Pandas: Divide column data by number if row of next column contains certain value", "body": "<p>I have a dataframe that consists of three columns</p>\n\n<pre><code>qty     unit_of_measure     qty_cal\n3          nodes               nan\n4          nodes               nan  \n5          nodes               nan\n6          cores               nan\n7          nodes               nan\n10         cores               nan  \n3          nodes               nan\n</code></pre>\n\n<p>I would like to add a condition to populate <strong>qty_cal</strong>.</p>\n\n<p>The condition is if unit_of_measure is equal to \"nodes\" populate the row value of qty into qty_cal</p>\n\n<p>If it's \"cores\" divide qty value by 16 and populate qty_cal</p>\n\n<p>The code I have tried is,</p>\n\n<pre><code>if ppn_df['unit_of_measure'] == 'Nodes': \n    ppn_df['qty'] \n\nelif ppn_df['unit_of_measure'] =='Cores':\n    ppn_df['qty'] / 16 \n</code></pre>\n\n<p>I'm getting an error of</p>\n\n<p><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().</code></p>\n\n<p>I'm not sure why I'm getting this value error. I don't understand why the if statement is ambiguous.</p>\n\n<p>Can anyone care to explain?</p>\n"}, {"tags": ["python", "tkinter", "label"], "comments": [{"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564610316, "post_id": 57299323, "comment_id": 101092549, "body": "Can you paste the full error?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564610552, "post_id": 57299323, "comment_id": 101092610, "body": "why do you use <code>window</code> in <code>place()</code> ? Probably this gives you error."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1564610774, "post_id": 57299323, "comment_id": 101092674, "body": "Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564611033, "post_id": 57299323, "comment_id": 101092754, "body": "if you use <code>place()</code> without arguments then it may not know where to put label. Use at least <code>place(x=.., y=..)</code> or use other method to put it - <code>grid()</code>, <code>pack()</code>"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1564615853, "post_id": 57299323, "comment_id": 101093726, "body": "Don&#39;t use <code>place()</code> like this. <code>place()</code> has some very specific uses but mostly you will be using <code>grid()</code> and <code>pack()</code> for managing your layout. Personally I like to use <code>grid()</code> for just about everything."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11866253, "user_type": "registered", "profile_image": "https://graph.facebook.com/1265765800262576/picture?type=large", "display_name": "RoastedT", "link": "https://stackoverflow.com/users/11866253/roastedt"}, "edited": false, "score": 0, "creation_date": 1564610861, "post_id": 57299404, "comment_id": 101092709, "body": "If I remove that line of code how would I output the label itself?"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "reply_to_user": {"reputation": 1, "user_id": 11866253, "user_type": "registered", "profile_image": "https://graph.facebook.com/1265765800262576/picture?type=large", "display_name": "RoastedT", "link": "https://stackoverflow.com/users/11866253/roastedt"}, "edited": false, "score": 0, "creation_date": 1564610881, "post_id": 57299404, "comment_id": 101092711, "body": "@RoastedT You would use <code>lblx2.pack()</code>"}], "tags": [], "owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "is_accepted": true, "score": 1, "last_activity_date": 1564610634, "creation_date": 1564610634, "answer_id": 57299404, "question_id": 57299323, "link": "https://stackoverflow.com/questions/57299323/i-cant-output-my-variable-as-a-label-in-tkinter/57299404#57299404", "title": "I can&#39;t output my variable as a label in Tkinter", "body": "<p>I believe the error is that <code>window</code> is not a suitable parameter for a Label object. Instead, it is used to change the location of the element. You could either</p>\n\n<ul>\n<li>turn it into this: <code>lblx2.place(x=whatever,y=whatever)</code> (note: replace whatever with the location)</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Remove the whole line of code entirely as it's unnecessary </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1488, "user_id": 7589255, "user_type": "registered", "profile_image": "https://graph.facebook.com/976575932385292/picture?type=large", "display_name": "Boris Lipschitz", "link": "https://stackoverflow.com/users/7589255/boris-lipschitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610910, "creation_date": 1564610910, "answer_id": 57299440, "question_id": 57299323, "link": "https://stackoverflow.com/questions/57299323/i-cant-output-my-variable-as-a-label-in-tkinter/57299440#57299440", "title": "I can&#39;t output my variable as a label in Tkinter", "body": "<p>Don't see a problem. Please provide a full example, not just pieces of code one cannot simply run. Here is mine, that DOESN'T reproduce the issue, and it really doesn't get much simpler than this:</p>\n\n<pre><code>from tkinter import *\nfrom random import random\n\nx = random()\n\nroot = Tk()\nvar_x = StringVar()\nvar_x.set(x)\nLabel(root, textvariable=var_x).pack()\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11866253, "user_type": "registered", "profile_image": "https://graph.facebook.com/1265765800262576/picture?type=large", "display_name": "RoastedT", "link": "https://stackoverflow.com/users/11866253/roastedt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57299404, "answer_count": 2, "score": -2, "last_activity_date": 1564610910, "creation_date": 1564610092, "last_edit_date": 1564610814, "question_id": 57299323, "link": "https://stackoverflow.com/questions/57299323/i-cant-output-my-variable-as-a-label-in-tkinter", "title": "I can&#39;t output my variable as a label in Tkinter", "body": "<p>I would like to put a variable in a Tkinter label that prints out the value of the variable 'x'.</p>\n\n<p>I tried to follow the example from the Tkinter documentation but it still seems to give me a trace error 'in second_click lblx2.place(window)'</p>\n\n<pre><code>x = max(numbers)\ny = min(numbers)\nz = sum(numbers)\na = float(z / len(numbers))\n\n\nvar_x = StringVar()\nvar_x.set(x)\n\nlblx2 = Label(window, textvariable=var_x, font=('Arial Bold', 15), bg='blue', fg='red')\n\nlblx2.place(window)\n</code></pre>\n\n<p>I expect it to just place the number on my window like regular text but it does not print anything.</p>\n\n<p>The full error:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"REDACTED\", line 1705, in __call__ return self.func(*args)\n  File \"REDACTED\", line 49, in &lt;lambda&gt; btn['command'] = (lambda: second_click())\n  File \"REDACTED\", line 102, in second_click lblx2.place(window)\n  File \"REDACTED\", line 2188, in place_configure \n  File \"REDACTED\", line 1320, in _options cnf = _cnfmerge(cnf)\n  File \"REDACTED\", line 104, in _cnfmerge for c in _flatten(cnfs):\nTypeError: object of type 'Tk' has no len()\n</code></pre>\n\n<p>When I remove (window) from place, it stops giving the errors but still does not put the number on the window</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 1, "last_activity_date": 1564610887, "creation_date": 1564610887, "answer_id": 57299437, "question_id": 57299313, "link": "https://stackoverflow.com/questions/57299313/beautifulsoup-find-all-returns-duplicates/57299437#57299437", "title": "BeautifulSoup find_all returns duplicates", "body": "<p>You're appending the same dictionary (<code>ajph18_dict</code>) every time in your for loop, any changes made to that dictionary will be reflected in every element of the list. The last loop overwrites all previous changes so you just get values from the last loop</p>\n\n<p>You need to put the line <code>ajph18_dict={\"url\":\"NaN\",\"articletype\":\"NaN\", \"title\":\"NaN\"}</code> first thing in the for loop so that a new object is created every loop</p>\n\n<p>For example:</p>\n\n<pre><code>d = {}\nl = []\nfor i in range(3):\n    d['foo'] = i\n    l.append(d)  # This just appends a reference to the same object every time\n</code></pre>\n\n<p><code>l</code> is now a list with 3 elements that are all references to the same dictionary <code>d</code>. <code>d</code> now looks like this <code>{'foo': 2}</code> and <code>l</code> now looks like this <code>[{'foo': 2}, {'foo': 2}, {'foo': 2}]</code></p>\n\n<pre><code>l = []\nfor i in range(3):\n    d = {}  # \"d\" is a new object every loop\n    d['foo'] = i\n    l.append(d)  # every element in \"l\" is a different object\n</code></pre>\n\n<p><code>[{'foo': 0}, {'foo': 1}, {'foo': 2}]</code></p>\n"}], "owner": {"reputation": 45, "user_id": 11649944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OA5Cnp7p5Gw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdYZVNGQk-vhwBHYk3bTBiH8bKT5w/mo/photo.jpg?sz=128", "display_name": "C.K.", "link": "https://stackoverflow.com/users/11649944/c-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 57299437, "answer_count": 1, "score": 0, "last_activity_date": 1564610887, "creation_date": 1564610021, "question_id": 57299313, "link": "https://stackoverflow.com/questions/57299313/beautifulsoup-find-all-returns-duplicates", "title": "BeautifulSoup find_all returns duplicates", "body": "<p>I'm trying to get metadata about journal articles; specifically, which section of the journal each article falls under. I'm using find_all to first get all the tags with the article titles, and then using that to parse the tags with the article section and url info. </p>\n\n<p>When I was testing my code, I had it print all the titles, urls, and article types to the terminal so I could check if my script was grabbing the right data. \nThe correct info was printing (that is, all the unique titles and urls and their article types), so I figured that I was on the right track.</p>\n\n<p>Problem is that when I actually run the code I've pasted below, the output has the correct number of rows for the number of articles in the issue, but each row is a duplicate of the metadata for the last article in that issue, instead of showing the unique data for each article. For instance, if one issue has 42 articles, instead of 42 rows in the output each representing a different article in that issue, I only get the data for the last article in that issue duplicated 42 times in the output.</p>\n\n<p>What am I neglecting to include in my code that would ensure that the output actually has all the unique data for each article in these issues?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import requests\r\nfrom bs4 import BeautifulSoup\r\nimport csv\r\nimport pandas as pd \r\nimport re\r\nfrom lxml.html import fromstring\r\nimport requests\r\nfrom itertools import cycle\r\nimport traceback\r\n\r\ndef get_proxies():\r\n    url = 'https://free-proxy-list.net/'\r\n    response = requests.get(url)\r\n    parser = fromstring(response.text)\r\n    proxies = set()\r\n    for i in parser.xpath('//tbody/tr')[:10]:\r\n        if i.xpath('.//td[7][contains(text(),\"yes\")]'):\r\n            proxy = \":\".join([i.xpath('.//td[1]/text()')[0], i.xpath('.//td[2]/text()')[0]])\r\n            proxies.add(proxy)\r\n    return proxies\r\n\r\n\r\njson_data =[]\r\nbase_url = 'https://ajph.aphapublications.org'\r\n\r\n#Get Health Affairs 2018 issues\r\n\r\najph2018 = ['https://ajph.aphapublications.org/toc/ajph/108/1',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/2',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/3',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/4',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/5',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/6',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/7',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/8',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/9',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/10',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/11',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/12',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S1',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S2',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S3',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S4',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S5',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S6',\r\n            'https://ajph.aphapublications.org/toc/ajph/108/S7']\r\n\r\nfor a in ajph2018:\r\n    issue=requests.get(a)\r\n    soup1=BeautifulSoup(issue.text, 'lxml')\r\n\r\n    \r\n#Get articles data \r\n    ajph18_dict={\"url\":\"NaN\",\"articletype\":\"NaN\", \"title\":\"NaN\"}\r\n    all_titles = soup1.find_all(\"span\", {\"class\":\"hlFld-Title\"})\r\n\r\n    for each in all_titles: \r\n        title = each.text.strip()\r\n        articletype=each.find_previous(\"h2\", {\"class\":\"tocHeading\"}).text.strip()\r\n        doi_tag = each.find_previous(\"a\", {\"class\":\"ref nowrap\", \"href\": True})\r\n        doi = doi_tag[\"href\"]\r\n        url = base_url + doi \r\n               \r\n      \r\n        if url is not None:\r\n            ajph18_dict[\"url\"]=url\r\n\r\n        if title is not None:\r\n            ajph18_dict[\"title\"]=title\r\n\r\n        if articletype is not None:\r\n            ajph18_dict[\"articletype\"]=articletype.text.strip()\r\n    \r\n        \r\n        json_data.append(ajph18_dict)\r\n\r\ndf=pd.DataFrame(json_data)\r\ndf.to_csv(\"ajph_type.csv\")\r\n\r\nprint(\"Saved\")</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "datetime", "variables", "boolean", "schedule"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11866191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fc65a99df296265cc825ea722b3a3d?s=128&d=identicon&r=PG&f=1", "display_name": "user11866191", "link": "https://stackoverflow.com/users/11866191/user11866191"}, "is_accepted": false, "score": 0, "last_activity_date": 1564617643, "creation_date": 1564617643, "answer_id": 57300250, "question_id": 57299307, "link": "https://stackoverflow.com/questions/57299307/scheduling-using-datetime-boolean-values/57300250#57300250", "title": "Scheduling using Datetime &amp; Boolean Values", "body": "<p>I don\u2019t know why I don\u2019t think of these earlier but I simply used the   x = datetime.datetime.now() &amp; y = datetime.date,time,day.(date,time,day) and used if x == y:</p>\n"}], "owner": {"reputation": 1, "user_id": 11866191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fc65a99df296265cc825ea722b3a3d?s=128&d=identicon&r=PG&f=1", "display_name": "user11866191", "link": "https://stackoverflow.com/users/11866191/user11866191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564617643, "creation_date": 1564609995, "last_edit_date": 1564617226, "question_id": 57299307, "link": "https://stackoverflow.com/questions/57299307/scheduling-using-datetime-boolean-values", "title": "Scheduling using Datetime &amp; Boolean Values", "body": "<p>I am working on a project that takes in new data periodically.</p>\n\n<ol>\n<li><p>The initial problem is that function 1 is scheduled to update &amp; aggregate certain variables at a certain time &amp; function 2 is supposed to use the updated variables (but it can\u2019t because variables are local to each function) to make calculations &amp; print at different scheduled time. And I can\u2019t define the the variables in Global because the data will be updated constantly not periodically.</p></li>\n<li><p>So I thought that I could just combine both functions into one function so that the program will see the sets of variable as the same, instead of two different sets of local variables. Then the different \u201cfunctions\u201d (now processes) would be executed using a <code>if date.time1 is True:  process1</code> &amp; <code>elif date.time2 is True: process2</code>.</p></li>\n</ol>\n\n<p>The problem I\u2019m running into here is that it seems that either the simple T/F code that I wrote is incorrect or you can\u2019t use T/F with datetimes. I would really like if someone would please shed some light on my issue(s) and I\u2019m willing to hear a different solution to the first problem or how I can fix the second problem.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4755, "user_id": 8430155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655d1d5c6571635c65c90670361700cf?s=128&d=identicon&r=PG&f=1", "display_name": "Harshal Parekh", "link": "https://stackoverflow.com/users/8430155/harshal-parekh"}, "edited": false, "score": 0, "creation_date": 1564610385, "post_id": 57299296, "comment_id": 101092562, "body": "Whenever you say something like &quot;no duplicates in list&quot; what you actually mean is that you want a set"}], "answers": [{"comments": [{"owner": {"reputation": 4755, "user_id": 8430155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655d1d5c6571635c65c90670361700cf?s=128&d=identicon&r=PG&f=1", "display_name": "Harshal Parekh", "link": "https://stackoverflow.com/users/8430155/harshal-parekh"}, "edited": false, "score": 0, "creation_date": 1564610325, "post_id": 57299358, "comment_id": 101092550, "body": "The resultant column should not have duplicates."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1564610395, "post_id": 57299358, "comment_id": 101092567, "body": "@ScottBoston thanks.  Will correct."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1564610425, "post_id": 57299358, "comment_id": 101092573, "body": "Oh.. that -1 wasn&#39;t me. :)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1564610464, "post_id": 57299358, "comment_id": 101092582, "body": "Oh I figured it wasn&#39;t (-:  No worries."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1564611002, "last_edit_date": 1564611002, "creation_date": 1564610279, "answer_id": 57299358, "question_id": 57299296, "link": "https://stackoverflow.com/questions/57299296/concatenate-two-columns-containing-lists-python/57299358#57299358", "title": "Concatenate two columns containing lists python", "body": "<h3>Crude but succint</h3>\n\n<pre><code>df.sum(1).map(set).map(list).to_frame('_'.join(df))\n\n            A_B\n0  [a, d, b, c]\n1     [s, d, f]\n</code></pre>\n\n<hr>\n\n<h3>Less crude and less succint</h3>\n\n<p>But probably better</p>\n\n<pre><code>pd.DataFrame(\n    {'_'.join(df): [[*set().union(*t)] for t in zip(*map(df.get, df))]},\n    df.index,\n)\n\n            A_B\n0  [a, d, b, c]\n1     [s, d, f]\n</code></pre>\n\n<hr>\n\n<h3>Setup</h3>\n\n<pre><code>df = pd.DataFrame(dict(A=[[*'ab'], [*'sd']], B=[[*'cdab'], [*'df']]))\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 11699115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef63dee533d8e4dd187975aa844db04?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Agrawal", "link": "https://stackoverflow.com/users/11699115/kshitij-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1564646450, "accepted_answer_id": 57299358, "answer_count": 1, "score": 1, "last_activity_date": 1564611002, "creation_date": 1564609935, "question_id": 57299296, "link": "https://stackoverflow.com/questions/57299296/concatenate-two-columns-containing-lists-python", "closed_reason": "Duplicate", "title": "Concatenate two columns containing lists python", "body": "<p>How do I concatenate two columns having lists such that there are no duplicates in the resultant list.</p>\n\n<pre><code>df:\n\nA         B  \n\n[a,b]   [c,d,a,b]\n[s,d]   [d,f]\n</code></pre>\n\n<p>Expected Result in new column:</p>\n\n<pre><code>A_B\n[a,b,c,d]\n[s,d,f]\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "is_accepted": false, "score": 0, "last_activity_date": 1564618471, "creation_date": 1564618471, "answer_id": 57300328, "question_id": 57299264, "link": "https://stackoverflow.com/questions/57299264/create-a-boxplot-with-regression-line-using-matplotlib/57300328#57300328", "title": "Create a boxplot with regression line using matplotlib", "body": "<p>You need to specify the figure axis for the <code>pandas</code> boxplot using <code>ax=ax</code>.</p>\n\n<pre><code>PRISM_FD_A.boxplot(by='year',column='FrostDays',ax=ax,grid=False)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8742864, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214850001148668/picture?type=large", "display_name": "Ryan Lennon", "link": "https://stackoverflow.com/users/8742864/ryan-lennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564618471, "creation_date": 1564609771, "question_id": 57299264, "link": "https://stackoverflow.com/questions/57299264/create-a-boxplot-with-regression-line-using-matplotlib", "title": "Create a boxplot with regression line using matplotlib", "body": "<p>I have a data frame with a column for \"year\" and a column for variable \"FrostDays\", with multiple values for each year.  I want to create a boxplot showing the distribution of values for each year, and add a regression line showing the change in the average number of FrostDays over a 50-year period.</p>\n\n<p>I can create the boxplot and the linear regression plot separately, but I cannot get Python to plot the two simultaneously on the same graph (on the same axis).  The result should have ~50 box plots with the y-axis showing FrostDays and the x-axis showing the year, and a regression line going through the boxplots according to the linear model.</p>\n\n<pre><code># Create the linear model\n\nx = PRISM_FD_A.year\ny = PRISM_FD_A.FrostDays\nstats = linregress(x, y)\nm = stats.slope\nb = stats.intercept\nxmin = min(PRISM_FD_A.year)\nxmax = max(PRISM_FD_A.year)\nymin = min(PRISM_FD_A.FrostDays)\nymax = max(PRISM_FD_A.FrostDays)\nprd = max(PRISM_FD_A.year) - min(PRISM_FD_A.year)\nch = m * prd\nch_FD = ch.astype(int)\nstring = (\"Total Change: %s days over %s years\") % (ch_FD, prd)\nr = stats.rvalue\nr2 = round(((r)**2), 3)\nrstring = \"R-squared: %s\" % r2\n\n# Create the boxplot\n\nax = PRISM_FD_A.boxplot(by='year',\n                       column='FrostDays',\n                       grid=False)\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nplt.show()\n\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/7ngcW.png\" rel=\"nofollow noreferrer\">Boxplot</a></p>\n\n<pre><code># Create the regression line:\n\nfig = plt.figure()\nfig.suptitle('Annual Count of Frost Days \\n Ashokan Basin', fontsize=14, fontweight='bold')\nax = fig.add_subplot(111)\nfig.subplots_adjust(top=0.85, bottom=0.15)\nax.set_title(string, fontsize=10)\nax.set_xlabel(\"year \\n Source:  PRISM\", fontsize=10)\nax.set_ylabel(\"Number of Frost Days\", fontsize=10)\nax.plot(a_x, a_m * a_x + a_b, color=\"red\", linewidth=3)\nfig.text(0.80, 0.015, rstring, color='white', backgroundcolor='royalblue',\n         weight='roman', size='medium')\nax.axis([xmin, xmax, ymin, ymax])\nplt.show()\n\n# Join the two together:\n\nfig = plt.figure()\nfig.suptitle('Annual Count of Frost Days \\n Ashokan Basin', fontsize=14, fontweight='bold')\nax = fig.add_subplot(111)\nfig.subplots_adjust(top=0.85, bottom=0.15)\nax.set_xlabel(\"Year\", fontsize=10)\nax.set_ylabel(\"Number of Frost Days\", fontsize=10)\nPRISM_FD_A.boxplot(by='year',\n                       column='FrostDays',\n                       grid=False)\nax.xaxis.set_major_locator(ticker.MultipleLocator(5))\nax.plot(a_x, a_m * a_x + a_b, color=\"red\", linewidth=3)\nfig.text(0.80, 0.015, a_rstring, color='white', backgroundcolor='royalblue',\n         weight='roman', size='medium')\nax.axis([xmin, xmax, ymin, ymax])\nplt.show()\n</code></pre>\n\n<p>I get a plot with just the regression line and no box plot.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DDQGf.png\" rel=\"nofollow noreferrer\">Regression line</a></p>\n"}, {"tags": ["python", "identity-operator"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1564609577, "post_id": 57299215, "comment_id": 101092358, "body": "<code>is</code> means referential equality, so that both things refer to the <i>same</i> object, two separate lists are <i>not</i> the same object."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1564609587, "post_id": 57299215, "comment_id": 101092362, "body": "No, not at all. Equality is not identity"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1564609624, "post_id": 57299215, "comment_id": 101092376, "body": "Whether a literal produces a new object or refers to an existing object is basically an implementation detail. Don&#39;t use <code>is</code> with literals."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1564609718, "post_id": 57299215, "comment_id": 101092405, "body": "I should say, for <i>immutable</i> values it is an implementation detail. For mutable values, caching a value will cause problems."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564611174, "post_id": 57299215, "comment_id": 101092799, "body": "Not all <code>[]</code> are the same object.  <code>[]</code> is just an empty list, which can be constructed in many ways."}], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "is_accepted": true, "score": 5, "last_activity_date": 1564609589, "creation_date": 1564609589, "answer_id": 57299236, "question_id": 57299215, "link": "https://stackoverflow.com/questions/57299215/python-identity-operators-with-variables-and-datastructures/57299236#57299236", "title": "Python Identity operators with variables and datastructures", "body": "<p>try that:</p>\n\n<pre><code>    a = []\nb = a\n\n\nprint(id(a))\nprint(id(b))\nprint(id([]))\n</code></pre>\n\n<p>And you will see that a and b refers to the same object, while next [] is a different one. Check <code>if b</code> to see if b is not empty list</p>\n"}], "owner": {"reputation": 519, "user_id": 5239781, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1165238156826039/picture?type=large", "display_name": "Nant", "link": "https://stackoverflow.com/users/5239781/nant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57299236, "answer_count": 1, "score": 1, "last_activity_date": 1564609589, "creation_date": 1564609454, "question_id": 57299215, "link": "https://stackoverflow.com/questions/57299215/python-identity-operators-with-variables-and-datastructures", "title": "Python Identity operators with variables and datastructures", "body": "<p>I have the following code:</p>\n\n<pre><code>a = []\nb = a\n</code></pre>\n\n<p>when I compile the following code I get this:</p>\n\n<pre><code>print(b is a) --&gt; True\nprint(b is []) --&gt; False\n</code></pre>\n\n<p>if b = a then shouldn't <code>b is []</code> return <code>True</code>?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "edited": false, "score": 0, "creation_date": 1564609034, "post_id": 57299128, "comment_id": 101092183, "body": "You should have a look at <a href=\"https://pandas.pydata.org/pandas-docs/version/0.24/reference/api/pandas.Series.unique.html\" rel=\"nofollow noreferrer\"><code>unique</code></a>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564609159, "post_id": 57299128, "comment_id": 101092220, "body": "You already have set <code>df1</code> to the columns."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "edited": false, "score": 0, "creation_date": 1564611321, "post_id": 57299216, "comment_id": 101092833, "body": "@Willen Van Onsem, if I wanted to exclude some object columns, how would I specific this in df1=df.select_dtypes(include=[&#39;object&#39;]) ?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1564609454, "creation_date": 1564609454, "answer_id": 57299216, "question_id": 57299128, "link": "https://stackoverflow.com/questions/57299128/errors-for-finding-unique-class-values-within-categorical-dataframe/57299216#57299216", "title": "Errors for finding unique class values within categorical dataframe", "body": "<p>You actually did something wrong with the <code>.select_dtypes</code> line, you already accessed <code>.columns</code>. You should remove that:</p>\n\n<pre><code>df1=df.select_dtypes(include=['object'])  # <i>no</i> .columns</code></pre>\n\n<p>otherwise, the <code>df1</code> is now an <code>Index(['A', 'B'], dtype='object')</code>. We do not want that, since, as the error says, you can not access the <code>.columns</code> of an <code>Index</code> object.</p>\n\n<p>Note that you can simply call <code>.unique()</code> here:</p>\n\n<pre><code>for feature in df1.columns:\n    uniq = df1[feature]<b>.unique()</b>\n    print('{}: {} distinct values -  {}'.format(feature,len(uniq),uniq))</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57299216, "answer_count": 1, "score": 1, "last_activity_date": 1564624609, "creation_date": 1564608788, "last_edit_date": 1564624609, "question_id": 57299128, "link": "https://stackoverflow.com/questions/57299128/errors-for-finding-unique-class-values-within-categorical-dataframe", "title": "Errors for finding unique class values within categorical dataframe", "body": "<p>I have a dataframe which has 4 features.</p>\n\n<pre><code>df\nA|B|C|D\ngreen|big|1.3|4\n</code></pre>\n\n<p>Now, I am putting all object features (A and B)into a new dataframe:</p>\n\n<pre><code>df1=df.select_dtypes(include=['object']).columns\ndf1.dtype\nOut: type('O')\n</code></pre>\n\n<p>The last step is to feed df1 into a function in order to determine unique values per categorical feature.</p>\n\n<pre><code>for feature in df1.columns:\n    uniq = np.unique(df1[feature])\n    print('{}: {} distinct values -  {}'.format(feature,len(uniq),uniq))\n</code></pre>\n\n<p><strong>Error</strong> I get is:</p>\n\n<blockquote>\n  <p>AttributeError: 'Index' object has no attribute 'columns' when I wanted to get this:</p>\n</blockquote>\n\n<p><strong>Expected output</strong>:</p>\n\n<pre><code>A: 2 distinct values -  ['green' 'blue']\nB: 1 distinct values -  ['big]\n</code></pre>\n"}, {"tags": ["python", "reportlab"], "comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1564610554, "post_id": 57299121, "comment_id": 101092613, "body": "Please make sure your code is correct. What are <code>x27</code> and <code>y27</code>? Also, what do you mean this usually works. From looking at the <a href=\"https://github.com/MatthewWilkes/reportlab/blob/ba223fd973db95cdc96839a8024bbf2388a531d5/src/reportlab/pdfgen/pathobject.py#L128\" rel=\"nofollow noreferrer\">source code</a>, it seems like this error will always happen when <code>close()</code> is called."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564611156, "post_id": 57299121, "comment_id": 101092789, "body": "maybe this file <code>svg</code> has mistake or use unusual values and module can&#39;t handle it."}, {"owner": {"reputation": 4271, "user_id": 76024, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9e1426be1e31412216b9ace6edf19ffd?s=128&d=identicon&r=PG", "display_name": "Philipp", "link": "https://stackoverflow.com/users/76024/philipp"}, "edited": false, "score": 1, "creation_date": 1565707870, "post_id": 57299121, "comment_id": 101432194, "body": "Same here. SVG is produced from a matplotlib fig. In the failing case the axes contains no data. Figure is not empty, as there are legends etc. just no data."}], "answers": [{"tags": [], "owner": {"reputation": 4271, "user_id": 76024, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9e1426be1e31412216b9ace6edf19ffd?s=128&d=identicon&r=PG", "display_name": "Philipp", "link": "https://stackoverflow.com/users/76024/philipp"}, "is_accepted": true, "score": 1, "last_activity_date": 1565710361, "creation_date": 1565710361, "answer_id": 57481051, "question_id": 57299121, "link": "https://stackoverflow.com/questions/57299121/reportlab-assertionerror-path-must-start-with-a-moveto-or-rect/57481051#57481051", "title": "ReportLab AssertionError: path must start with a moveto or rect", "body": "<p>It seems the last assert is over-zealous.</p>\n\n<pre><code>File \"/anaconda3/lib/python3.6/site-packages/reportlab/pdfgen/pathobject.py\", line 36, in _init_code_append\n    assert c.endswith(' m') or c.endswith(' re'), 'path must start with a moveto or rect'\n</code></pre>\n\n<p>The actual value of <code>c</code> at this location is \"h\" (as filled in by the call just above in the stack trace). If you just comment out the assert it works fine.</p>\n\n<p>Please also let the nice people at ReportLab know so they can fix in the future.</p>\n"}], "owner": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 57481051, "answer_count": 1, "score": 1, "last_activity_date": 1565710361, "creation_date": 1564608750, "question_id": 57299121, "link": "https://stackoverflow.com/questions/57299121/reportlab-assertionerror-path-must-start-with-a-moveto-or-rect", "title": "ReportLab AssertionError: path must start with a moveto or rect", "body": "<p>I tried this using Python 3.6 and the current reportlab and svg2rlg libraries (as of this posting) and I got the error in the title.:</p>\n\n<pre><code>from reportlab.graphics import renderPDF\nfrom svglib.svglib import svg2rlg\n\nc = Canvas(path+'To Print.pdf')\nimg27 = svg2rlg(path_to_.svg')\nwd27 = img27.width/inch\nht27 = img27.height/inch\nrenderPDF.draw(img27, c, x=x27, y=y27)\n</code></pre>\n\n<p>It usually works just fine and I cannot figure out how to troubleshoot it.\nI've tried searching for this error but cannot find it anywhere.</p>\n\n<p>Here's the complete traceback:</p>\n\n<pre><code>File \"/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py\", line 705, in runfile\n    execfile(filename, namespace)\n\n  File \"/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py\", line 102, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"/Users/Drive/Scripts/PDF.py\", line 604, in &lt;module&gt;\n    renderPDF.draw(img27, c, x=x27, y=y27)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 29, in draw\n    R.draw(renderScaledDrawing(drawing), canvas, x, y, showBoundary=showBoundary)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 201, in draw\n    self.drawNode(drawing)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 282, in drawNodeDispatcher\n    self.drawGroup(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 311, in drawGroup\n    self.drawNode(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 54, in drawNode\n    self.drawNodeDispatcher(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderbase.py\", line 278, in drawNodeDispatcher\n    self.drawPath(node)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/renderPDF.py\", line 183, in drawPath\n    isClosed = _renderPath(path, drawFuncs, forceClose=fill and autoclose=='pdf')\n\n  File \"/anaconda3/lib/python3.6/site-packages/svglib/svglib.py\", line 1075, in patchedRenderPath\n    return original_renderPath(path, drawFuncs, **kwargs)\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/graphics/shapes.py\", line 996, in _renderPath\n    drawFuncs[op](*points[i:j])\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/pdfgen/pathobject.py\", line 127, in close\n    self._code_append('h')\n\n  File \"/anaconda3/lib/python3.6/site-packages/reportlab/pdfgen/pathobject.py\", line 36, in _init_code_append\n    assert c.endswith(' m') or c.endswith(' re'), 'path must start with a moveto or rect'\n\nAssertionError: path must start with a moveto or rect\n</code></pre>\n"}, {"tags": ["python", "json", "pandas", "dataframe", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1564611123, "post_id": 57299426, "comment_id": 101092781, "body": "Almost there, just missing <code>rownum</code>"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1564611728, "post_id": 57299426, "comment_id": 101092910, "body": "@Akaisteph7 To do it in list comprehension, I manage to do it by merging two <code>dict</code>. Maybe some better ideas ?"}, {"owner": {"reputation": 75, "user_id": 11865765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b2eb169493bc9cdaff6b5743a3bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/11865765/ari"}, "edited": false, "score": 1, "creation_date": 1564645228, "post_id": 57299426, "comment_id": 101100948, "body": "Thanks very much! @AlexandreB. it worked out! I wasn&#39;t in need of <code>rownum</code> but didn&#39;t mention it in my question."}], "tags": [], "owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1564611603, "last_edit_date": 1564611603, "creation_date": 1564610773, "answer_id": 57299426, "question_id": 57299101, "link": "https://stackoverflow.com/questions/57299101/how-to-convert-nested-dictionaries-to-a-pandas-dataframe/57299426#57299426", "title": "How to convert nested dictionaries to a pandas DataFrame?", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.from_dict.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.from_dict</code></a> but you need to remove all unnecessary data in your data. Actually, you only want to keep the <code>field</code> value and <code>value</code> per row. You can do it with list comprehension:</p>\n\n<pre><code>data = [{ field[\"field\"]:field[\"value\"] for field in row['values']\n                    } for row in data['result'][\"rows\"]]\nprint(data)\n# [{'querydate': '7/31/2019 3:19 PM', \n#     'issueid': 472683, \n#     'ticker': 'AAPL', \n#     'companyname': 'APPLE INC',\n#     'issuetitle': 'COM',\n#     'filerid': 1089387},\n# {\n#     'querydate': '7/31/2019 3:19 PM',\n#     'issueid': 472683,\n#     'ticker': 'AAPL',\n#     'companyname': 'APPLE INC',\n#     'issuetitle': 'COM',\n#     'filerid': 1086893},\n# {\n#     'querydate': '7/31/2019 3:19 PM', \n#     'issueid': 472683, \n#     'ticker': 'AAPL', \n#     'companyname': 'APPLE INC', \n#     'issuetitle': 'COM', \n#     'filerid': 1085803\n# }]\n</code></pre>\n\n<p>Once you have this dictionary, you can call <code>from_dict</code> method:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(data)\nprint(df)\n#   companyname  filerid  issueid issuetitle          querydate ticker\n# 0   APPLE INC  1089387   472683        COM  7/31/2019 3:19 PM   AAPL\n# 1   APPLE INC  1086893   472683        COM  7/31/2019 3:19 PM   AAPL\n# 2   APPLE INC  1085803   472683        COM  7/31/2019 3:19 PM   AAPL\n</code></pre>\n\n<p>If you want to get the <code>rownum</code> as a column (or index):</p>\n\n<pre><code>data = [{**{field[\"field\"]:field[\"value\"] for field in row['values']}, **{'rownum': row[\"rownum\"]}} for row in data['result'][\"rows\"]]\n\ndf = pd.DataFrame.from_dict(data)\nprint(df)\n#   companyname  filerid  issueid issuetitle          querydate  rownum ticker\n# 0   APPLE INC  1089387   472683        COM  7/31/2019 3:19 PM       1   AAPL\n# 1   APPLE INC  1086893   472683        COM  7/31/2019 3:19 PM       2   AAPL\n# 2   APPLE INC  1085803   472683        COM  7/31/2019 3:19 PM       3   AAPL\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 11865765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b2eb169493bc9cdaff6b5743a3bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/11865765/ari"}, "edited": false, "score": 1, "creation_date": 1564647865, "post_id": 57299507, "comment_id": 101102384, "body": "Your contribution was appreciated! thanks @shash678"}], "tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1564611866, "last_edit_date": 1564611866, "creation_date": 1564611381, "answer_id": 57299507, "question_id": 57299101, "link": "https://stackoverflow.com/questions/57299101/how-to-convert-nested-dictionaries-to-a-pandas-dataframe/57299507#57299507", "title": "How to convert nested dictionaries to a pandas DataFrame?", "body": "<p>Naive nested for loop attempt...</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame([])\n\nfor row in json[\"result\"][\"rows\"]:\n    rownum = row[\"rownum\"]\n    querydate = issueid = ticker = companyname = issuetitle = filerid = None\n    for value_dict in row[\"values\"]:\n        if value_dict[\"field\"] == \"querydate\":\n            querydate = value_dict[\"value\"]\n        elif value_dict[\"field\"] == \"issueid\":\n            issueid = value_dict[\"value\"]\n        elif value_dict[\"field\"] == \"ticker\":\n            ticker = value_dict[\"value\"]\n        elif value_dict[\"field\"] == \"companyname\":\n            companyname = value_dict[\"value\"]\n        elif value_dict[\"field\"] == \"filerid\":\n            filerid = value_dict[\"value\"]\n    df = df.append(pd.DataFrame({\"rownum\": rownum,\n                                 \"querydate\": querydate,\n                                 \"issueid\": issueid,\n                                 \"ticker\": ticker,\n                                 \"companyname\": companyname,\n                                 \"issuetitle\": issuetitle,\n                                 \"filerid\": filerid,\n                                }, index=[0]), ignore_index=True)\n\nprint(df)\n</code></pre>\n\n<p><strong>JSON object:</strong></p>\n\n<pre><code>json = {\n    \"result\": {\n        \"totalrows\": 3,\n        \"rows\": [\n            {\n                \"rownum\": 1,\n                \"values\": [\n                    {\n                        \"field\": \"querydate\",\n                        \"value\": \"7/31/2019 3:19 PM\"\n                    },\n                    {\n                        \"field\": \"issueid\",\n                        \"value\": 472683\n                    },\n                    {\n                        \"field\": \"ticker\",\n                        \"value\": \"AAPL\"\n                    },\n                    {\n                        \"field\": \"companyname\",\n                        \"value\": \"APPLE INC\"\n                    },\n                    {\n                        \"field\": \"issuetitle\",\n                        \"value\": \"COM\"\n                    },\n                    {\n                        \"field\": \"filerid\",\n                        \"value\": 1089387\n                    }\n                ]\n            },\n            {\n                \"rownum\": 2,\n                \"values\": [\n                    {\n                        \"field\": \"querydate\",\n                        \"value\": \"7/31/2019 3:19 PM\"\n                    },\n                    {\n                        \"field\": \"issueid\",\n                        \"value\": 472683\n                    },\n                    {\n                        \"field\": \"ticker\",\n                        \"value\": \"AAPL\"\n                    },\n                    {\n                        \"field\": \"companyname\",\n                        \"value\": \"APPLE INC\"\n                    },\n                    {\n                        \"field\": \"issuetitle\",\n                        \"value\": \"COM\"\n                    },\n                    {\n                        \"field\": \"filerid\",\n                        \"value\": 1086893\n                    }\n                ]\n            },\n            {\n                \"rownum\": 3,\n                \"values\": [\n                    {\n                        \"field\": \"querydate\",\n                        \"value\": \"7/31/2019 3:19 PM\"\n                    },\n                    {\n                        \"field\": \"issueid\",\n                        \"value\": 472683\n                    },\n                    {\n                        \"field\": \"ticker\",\n                        \"value\": \"AAPL\"\n                    },\n                    {\n                        \"field\": \"companyname\",\n                        \"value\": \"APPLE INC\"\n                    },\n                    {\n                        \"field\": \"issuetitle\",\n                        \"value\": \"COM\"\n                    },\n                    {\n                        \"field\": \"filerid\",\n                        \"value\": 1085803\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>   rownum          querydate  issueid ticker companyname issuetitle  filerid\n0       1  7/31/2019 3:19 PM   472683   AAPL   APPLE INC        COM  1089387\n1       2  7/31/2019 3:19 PM   472683   AAPL   APPLE INC        COM  1086893\n2       3  7/31/2019 3:19 PM   472683   AAPL   APPLE INC        COM  1085803\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11865765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b2eb169493bc9cdaff6b5743a3bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/11865765/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 57299426, "answer_count": 2, "score": 4, "last_activity_date": 1564611866, "creation_date": 1564608625, "last_edit_date": 1564610685, "question_id": 57299101, "link": "https://stackoverflow.com/questions/57299101/how-to-convert-nested-dictionaries-to-a-pandas-dataframe", "title": "How to convert nested dictionaries to a pandas DataFrame?", "body": "<p>I want to transform the result of a call from an API to a dataframe.\nThe result of the API call is a nested dictionary, but the produced dataframe is not as I need it.</p>\n\n<p>In addition to json_normalize, I tried pd.DataFrame.from_dict. However, until now had been unsuccessful. I also tried to flatten the dictionary, but nothing.</p>\n\n<p>I used the following call:</p>\n\n<pre><code>[73] results = requests.get(url).json()\nresults\n</code></pre>\n\n<p>And the output was:</p>\n\n<pre><code>{'result': {'totalrows': 3124,\n  'rows': [{'rownum': 1,\n    'values': [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'},\n     {'field': 'issueid', 'value': 472683},\n     {'field': 'ticker', 'value': 'AAPL'},\n     {'field': 'companyname', 'value': 'APPLE INC'},\n     {'field': 'issuetitle', 'value': 'COM'},\n     {'field': 'filerid', 'value': 1089387}]},\n   {'rownum': 2,\n    'values': [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'},\n     {'field': 'issueid', 'value': 472683},\n     {'field': 'ticker', 'value': 'AAPL'},\n     {'field': 'companyname', 'value': 'APPLE INC'},\n     {'field': 'issuetitle', 'value': 'COM'},\n     {'field': 'filerid', 'value': 1086893}]},\n   {'rownum': 3,\n    'values': [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'},\n     {'field': 'issueid', 'value': 472683},\n     {'field': 'ticker', 'value': 'AAPL'},\n     {'field': 'companyname', 'value': 'APPLE INC'},\n     {'field': 'issuetitle', 'value': 'COM'},\n     {'field': 'filerid', 'value': 1085803}]}\n</code></pre>\n\n<p>Then to produce the data frame, I used the following code:</p>\n\n<pre><code>\n[74] Owners = results['result']['rows']\ndf1 = json_normalize(Owners)\ndf1.head()\n</code></pre>\n\n<p>This was the output:</p>\n\n<pre><code>  rownum    values\n0   1      [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'}, \n           {'field': 'issueid', 'value': 472683}, {'field': \n           'ticker', 'value': 'AAPL'}, {'field': 'companyname', \n           'value': 'APPLE INC'}, {'field': 'issuetitle', 'value': \n           'COM'}, {'field': 'filerid', 'value': 1089387} \n\n1   2      [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'}, \n           {'field': 'issueid', 'value': 472683}, {'field': \n           'ticker', 'value': 'AAPL'}, {'field': 'companyname', \n           'value': 'APPLE INC'}, {'field': 'issuetitle', 'value': \n           'COM'}, {'field': 'filerid', 'value': 1086893}\n\n2   3      [{'field': 'querydate', 'value': '7/31/2019 3:19 PM'}, {'field': \n           'issueid', 'value': 472683}, {'field': 'ticker', 'value': 'AAPL'}, \n           {'field': 'companyname', 'value': 'APPLE INC'}, {'field': \n           'issuetitle', 'value': 'COM'}, {'field': 'filerid', 'value': 1085803}\n\n</code></pre>\n\n<p>However, I want to obtain a DataFrame with the following format:</p>\n\n<p><img src=\"https://i.stack.imgur.com/xnC18.png\" alt=\"Desired DataFrame format\"></p>\n"}, {"tags": ["python", "python-3.x", "module"], "comments": [{"owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 2, "creation_date": 1564609018, "post_id": 57299096, "comment_id": 101092180, "body": "This might be relevant: <a href=\"https://www.python.org/dev/peps/pep-0235/\" rel=\"nofollow noreferrer\">PEP 235 -- Import on Case-Insensitive Platforms</a>"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1564609682, "post_id": 57299096, "comment_id": 101092395, "body": "In python in general, <code>&#39;s&#39; != &#39;S&#39;</code> and <code>my_variable != My_Variable</code>. Case is very important."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1564609750, "post_id": 57299096, "comment_id": 101092412, "body": "Python is case sensitive if that&#39;s what you&#39;re asking"}, {"owner": {"reputation": 31, "user_id": 7865044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a526f7a8026e098325107d24e4ea9d6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Amini", "link": "https://stackoverflow.com/users/7865044/a-amini"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1564611714, "post_id": 57299096, "comment_id": 101092907, "body": "That makes sense that python is case sensitive! However diagnostics should be under system package by default but it&#39;s not. I don&#39;t know how to install it. The IDE showing diagnostics under System I think it&#39;s the IDE problem. @juanpa.arrivillaga"}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1564613330, "post_id": 57299096, "comment_id": 101093256, "body": "Main question is: what <code>system</code> package are you talking about? Where does it come from? Do you mean <a href=\"https://pypi.org/project/system/\" rel=\"nofollow noreferrer\">system</a> from pypi (that someone started 4 weeks ago for Python 2!)?"}, {"owner": {"reputation": 31, "user_id": 7865044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a526f7a8026e098325107d24e4ea9d6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Amini", "link": "https://stackoverflow.com/users/7865044/a-amini"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1564616989, "post_id": 57299096, "comment_id": 101093950, "body": "@Matthias It shouldn&#39;t be that new! The code that I&#39;m working on was written by someone else and it was working last year. I&#39;m trying to use process.GetProcessByName but i have trouble importing that module into my code. Right now I&#39;m able to import diagnostics but the error is module process is not under diagnostics."}], "owner": {"reputation": 31, "user_id": 7865044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a526f7a8026e098325107d24e4ea9d6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Amini", "link": "https://stackoverflow.com/users/7865044/a-amini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1564608599, "creation_date": 1564608599, "question_id": 57299096, "link": "https://stackoverflow.com/questions/57299096/does-case-sensitivity-matter-in-importing-modules", "title": "Does case sensitivity matter in importing modules?", "body": "<p>I had a quick question about case sensitivity in module importing. I'm trying to use process function from system module working but I can't get it working. I'm trying to do this as shown below:</p>\n\n<pre><code>from System.Diagnostics import Process\n</code></pre>\n\n<p>however, when I do that it says \"No module named 'System'\" and when I tried to do it like below:</p>\n\n<pre><code>from system.Diagnostics import Process\n</code></pre>\n\n<p>the error is \"No module named 'system.Diagnostics'\".</p>\n\n<p>I've tried these two because my IDE, VS code, shows Diagnostics as a module of System when I type it in but it doesn't show Diagnostics as a module of system. Note that the difference is small s and capital S. And that's an issue because even though Diagnostics is a module of System with capital S based on my IDE, System with capital S is not a module in python.</p>\n"}, {"tags": ["python", "pandas", "indexoutofboundsexception"], "comments": [{"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1564608824, "post_id": 57299095, "comment_id": 101092117, "body": "<a href=\"https://github.com/pandas-dev/pandas/issues/10582\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/10582</a>"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1564609319, "post_id": 57299095, "comment_id": 101092279, "body": "Ran into a similar issue a while back, I had to use SQL instead."}, {"owner": {"reputation": 2737, "user_id": 7384740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H2BbL.png?s=128&g=1", "display_name": "Dodge", "link": "https://stackoverflow.com/users/7384740/dodge"}, "edited": false, "score": 0, "creation_date": 1564609385, "post_id": 57299095, "comment_id": 101092300, "body": "Can you provide a sample data set?"}, {"owner": {"reputation": 228, "user_id": 11069614, "user_type": "registered", "profile_image": "https://graph.facebook.com/314687309394719/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/11069614/ben-smith"}, "reply_to_user": {"reputation": 2737, "user_id": 7384740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H2BbL.png?s=128&g=1", "display_name": "Dodge", "link": "https://stackoverflow.com/users/7384740/dodge"}, "edited": false, "score": 1, "creation_date": 1564781599, "post_id": 57299095, "comment_id": 101157132, "body": "@Dodge I attached an image into the body of my question.  &#39;Dataset&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610966, "creation_date": 1564610966, "answer_id": 57299452, "question_id": 57299095, "link": "https://stackoverflow.com/questions/57299095/indexerrror-out-of-bounds/57299452#57299452", "title": "IndexErrror: out of bounds", "body": "<p>It seems like this is still an open bug <a href=\"https://github.com/pandas-dev/pandas/issues/12210\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/issues/12210</a> and <a href=\"https://github.com/pandas-dev/pandas/issues/10582\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/issues/10582</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 228, "user_id": 11069614, "user_type": "registered", "profile_image": "https://graph.facebook.com/314687309394719/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/11069614/ben-smith"}, "edited": false, "score": 0, "creation_date": 1564781087, "post_id": 57299455, "comment_id": 101157017, "body": "Yeah the original dataset has 1149780 rows.  The userIDs are integers much higher like 640958005 but that doesnt reflect the size of the dataframe.  Maybe if I convert them to strings and then back to integers after the pivot?"}], "tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610975, "creation_date": 1564610975, "answer_id": 57299455, "question_id": 57299095, "link": "https://stackoverflow.com/questions/57299095/indexerrror-out-of-bounds/57299455#57299455", "title": "IndexErrror: out of bounds", "body": "<p>As Tyger pointed out, you are very probably running out of memory because Pandas <code>pivot_table</code> operations are very <a href=\"http://github.com/pandas-dev/pandas/issues/10582\" rel=\"nofollow noreferrer\">memory intensive</a>. </p>\n\n<p>You could probably split up your dataframe, do <code>pivot_table</code> on each block and put them back together. This would be longer but probably work.</p>\n"}], "owner": {"reputation": 228, "user_id": 11069614, "user_type": "registered", "profile_image": "https://graph.facebook.com/314687309394719/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/11069614/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564781515, "creation_date": 1564608593, "last_edit_date": 1564781515, "question_id": 57299095, "link": "https://stackoverflow.com/questions/57299095/indexerrror-out-of-bounds", "title": "IndexErrror: out of bounds", "body": "<p>I'm trying to perform a <code>pivot_table</code> function on a dataset, with 'userID' as the index but it gives an <code>Indexerror: index 640985038 is out of bounds for axis 0 with size 640958005</code> </p>\n\n<p>but the highest 'userID' is only 278854.  I don't understand why this error is coming up at all anyways.</p>\n\n<pre><code>rating_crosstab = combined_books.pivot_table(values='bookRating', index='userID',columns='bookTitle', fill_value=0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yFJDp.png\" rel=\"nofollow noreferrer\">Dataset</a></p>\n"}, {"tags": ["python", "matplotlib", "axes"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564609632, "post_id": 57299094, "comment_id": 101092378, "body": "To just answer the side notes: <code>pos</code> is ignored by most formatters, and so can you; it won&#39;t help here. <code>StrMethodFormatter(&quot;{x:.0f}&quot;)</code> is exactly the same as <code>FormatStrFormatter(&#39;%.0f&#39;)</code>; use whichever you find easier to understand."}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 10103422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ubCcnjNskmQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rvaZ9x5AVyYIVFm8IKo5NEJxxoVg/mo/photo.jpg?sz=128", "display_name": "T Walker", "link": "https://stackoverflow.com/users/10103422/t-walker"}, "edited": false, "score": 0, "creation_date": 1565049049, "post_id": 57299987, "comment_id": 101220507, "body": "Thank you for your solution! Your lambda function implementation worked, and I have posted an update! However, I could use some clarification on why this worked. I&#39;d like to first ask what is meant by &quot;the ticks on the heatmap are at fixed positions and they have fixed labels&quot;? It&#39;s not clear to me what the object <code>ax0.get_xticklabels()</code> holds (I&#39;m hoping for more clairty than matplotlib docs). I ran <code>for label in ax0.get_xticklabels():     print(label)</code> and the output <code>Text(0.5, 0, &#39;0&#39;)</code> looks completely foreign to me. Could someone walk me through the output? thx!"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 184, "user_id": 10103422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ubCcnjNskmQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rvaZ9x5AVyYIVFm8IKo5NEJxxoVg/mo/photo.jpg?sz=128", "display_name": "T Walker", "link": "https://stackoverflow.com/users/10103422/t-walker"}, "edited": false, "score": 0, "creation_date": 1565050651, "post_id": 57299987, "comment_id": 101220752, "body": "First, there is a nice <a href=\"https://matplotlib.org/3.1.1/tutorials/text/text_intro.html#ticks-and-ticklabels\" rel=\"nofollow noreferrer\">tutorial</a> about ticks and ticklabels. It may not answer everything, but probably the question about fixed positions. In the concrete case here, seaborn may e.g. put a tick on the axes at positions 0.5, 30.5, 60.5 etc. Each of those has a ticklabel. But the ticklabel shows something entirely different, namely 0.0, 3.0, 6.0 etc. So what we do here is to get the ticklabels, get their text, e.g. <code>&quot;0.0&quot;</code> convert it to a number, <code>0.0</code>, and then format it back to a string with <code>g</code> format."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1564615351, "creation_date": 1564615351, "answer_id": 57299987, "question_id": 57299094, "link": "https://stackoverflow.com/questions/57299094/understanding-maplotlib-and-how-to-format-matplotlib-axis-with-a-single-digit/57299987#57299987", "title": "Understanding maplotlib and how to format matplotlib axis with a single digit?", "body": "<p>The sad thing is, you didn't do anything wrong. The problem is just that seaborn has a very perculiar way of setting up its heatmap.<br>\nThe ticks on the heatmap are at fixed positions and they have fixed labels. So to change them, those fixed labels need to be changed. An option to do so is to collect the labels, convert them back to numbers, and then set them back.</p>\n\n<pre><code>labels = [label.get_text() for label in ax.get_xticklabels()]\nax.set_xticklabels(map(lambda x: \"{:g}\".format(float(x)), labels))\n\nlabels = [label.get_text() for label in ax.get_yticklabels()]\nax.set_yticklabels(map(lambda x: \"{:g}\".format(float(x)), labels))\n</code></pre>\n\n<p>A word of caution: One should in principle never set the ticklabels without setting the locations as well, but here seaborn is responsible for setting the positions. We just trust it do do so correctly.</p>\n\n<hr>\n\n<p>If you want numeric axes with numeric labels that can be formatted as attempted in the question, one may directly use a matplotlib plot. </p>\n\n<pre><code>import numpy as np\nimport seaborn as sns # seaborn only imported to get its rocket cmap\nimport matplotlib.pyplot as plt\n\nmy_data = np.random.rand(150,150)\nx = (np.linspace(0, my_data.shape[0], my_data.shape[0]+1)-0.5)/10\ny = (np.linspace(0, my_data.shape[1], my_data.shape[1]+1)-0.5)/10\n\n\nfig, ax = plt.subplots()\npc = ax.pcolormesh(x, y, my_data, cmap=\"rocket\")\nfig.colorbar(pc)\nax.set_aspect(\"equal\")\nplt.show()\n</code></pre>\n\n<p>While this already works out of the box, you may still use locators and formatters as attempted in the question.</p>\n"}], "owner": {"reputation": 184, "user_id": 10103422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ubCcnjNskmQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rvaZ9x5AVyYIVFm8IKo5NEJxxoVg/mo/photo.jpg?sz=128", "display_name": "T Walker", "link": "https://stackoverflow.com/users/10103422/t-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 57299987, "answer_count": 1, "score": 3, "last_activity_date": 1565049109, "creation_date": 1564608578, "last_edit_date": 1565049109, "question_id": 57299094, "link": "https://stackoverflow.com/questions/57299094/understanding-maplotlib-and-how-to-format-matplotlib-axis-with-a-single-digit", "title": "Understanding maplotlib and how to format matplotlib axis with a single digit?", "body": "<p>I am having an very hard time getting the ticklabels of a seaborn heatmap to show only single integers (i.e. no floating numbers). I have two lists that form the axes of a data frame that i plot using seaborn.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as tkr\n\nx = np.linspace(0, 15, 151)\ny = np.linspace(0, 15, 151)\n#substitute random data for my_data\ndf_map = pd.DataFrame(my_data, index = y, columns = x) \nplt.figure()\nax = sns.heatmap(df_map, square = True, xticklabels  = 20, yticklabels = 20)\nax.invert_yaxis()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iuVJ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iuVJ7.png\" alt=\"original map\"></a></p>\n\n<p>I've reviewed many answers and the documents. My biggest problem is I have little experience and a very poor understanding of matplotlib and the docs feel like a separate language... Here are the things I've tried. </p>\n\n<p>ATTEMPT 1: A slightly modified version of the solution to <a href=\"https://stackoverflow.com/questions/44187290/matplotlib-ticker\">this question</a>:</p>\n\n<pre><code>fmtr = tkr.StrMethodFormatter('{x:.0f}')\n\nplt.gca().xaxis.set_major_formatter(fmtr)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/U7ydV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U7ydV.png\" alt=\"indices or decimal moving?\"></a></p>\n\n<p>I'm pretty sure <code>tkr.StrMethodFormatter()</code> is displaying every 20th index of the value it encounters in my axis string, which is probably due to my settings in <code>sns.heatmap()</code>. I tried different string inputs to <code>tkr.StrMethodFormatter()</code> without success. I looked at two other questions and tried different combinations of <code>tkr</code> classes that were used in answers for <a href=\"https://stackoverflow.com/questions/46795840/matplotlib-float-values-on-the-axis-instead-of-integers\">here</a> and <a href=\"https://stackoverflow.com/questions/29188757/matplotlib-specify-format-of-floats-for-tick-lables\">here</a>.</p>\n\n<p>ATTEMPT 2:</p>\n\n<pre><code>fmtr = tkr.StrMethodFormatter(\"{x:.0f}\")\nlocator = tkr.MultipleLocator(50)\nfstrform = tkr.FormatStrFormatter('%.0f')\n\nplt.gca().xaxis.set_major_formatter(fmtr)\nplt.gca().xaxis.set_major_locator(locator)\n#plt.gca().xaxis.set_major_formatter(fstrform)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BmCAy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BmCAy.png\" alt=\"last attempt\"></a></p>\n\n<p>And now i'm at a complete loss. I've found out <code>locator</code> changes which nth indices to plot, and both <code>fmtr</code> and <code>fstrform</code> change the number of decimals being displayed, but i cannot for the life of me get the axes to display the integer values that exist in the axes lists! </p>\n\n<p>Please help! I've been struggling for hours. It's probably something simple, and thank you!</p>\n\n<p>As an aside:</p>\n\n<p>Could someone please elaborate on the documentation excerpt in <a href=\"https://stackoverflow.com/questions/44187290/matplotlib-ticker\">that</a> question, specifically:</p>\n\n<blockquote>\n  <p>...and the field used for the position must be labeled pos.</p>\n</blockquote>\n\n<p>Also, could someone please explain the differences between <code>tkr.StrMethodFormatter(\"{x:.0f}\")</code> and <code>tkr.FormatStrFormatter('%.0f')</code>? I find it annoying there are two ways, each with their own syntax, to produce the same result. </p>\n\n<p>UPDATE:</p>\n\n<p>It took me a while to get around to implementing the solution provided by @ImportanceOfBeingErnest. I took an extra precaution and rounded the numbers in the <code>x,y</code> arrays. I'm not sure if this is necessary, but I've produced the result I wanted:</p>\n\n<pre><code>x = np.linspace(0, 15, 151)\ny = np.linspace(0, 15, 151)\n# round float numbers in axes arrays\nx_rounded = [round(i,3) for i in x]\ny_rounded = [round(i,3) for i in y]\n#substitute random data for my_data\ndf_map = pd.DataFrame(my_data, index = y_rounded , columns = x_rounded) \nplt.figure()\nax0 = sns.heatmap(df_map, square = True, xticklabels  = 20)\nax0.invert_yaxis()\n\nlabels = [label.get_text() for label in ax0.get_xticklabels()]\nax0.set_xticklabels(map(lambda x: \"{:g}\".format(float(x)), labels))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MmNL0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MmNL0.png\" alt=\"solved\"></a></p>\n\n<p>Although I'm still not entirely sure why this worked; check the comments between me and them for clarification.</p>\n"}, {"tags": ["python", "arrays", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564608600, "post_id": 57299040, "comment_id": 101092052, "body": "Don&#39;t use the <code>data=np.array([])</code> followed by <code>data=np.append(data,...)</code> approach.  It is hard to get right, and slow.  Initial a list <code>alist=[]</code>, and do <code>alist.append(...)</code> in the loop.  It is faster."}, {"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1564608601, "post_id": 57299040, "comment_id": 101092053, "body": "Have you considered using the <code>datetime</code> library?"}, {"owner": {"reputation": 1, "user_id": 11465278, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5asmcQDM8oo/AAAAAAAAAAI/AAAAAAAAAAc/dDjIhjccsfc/photo.jpg?sz=128", "display_name": "fydil", "link": "https://stackoverflow.com/users/11465278/fydil"}, "reply_to_user": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1564609089, "post_id": 57299040, "comment_id": 101092198, "body": "@BenT  my time datas is come from txt and I am using  this save datas."}, {"owner": {"reputation": 1, "user_id": 11465278, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5asmcQDM8oo/AAAAAAAAAAI/AAAAAAAAAAc/dDjIhjccsfc/photo.jpg?sz=128", "display_name": "fydil", "link": "https://stackoverflow.com/users/11465278/fydil"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564609350, "post_id": 57299040, "comment_id": 101092290, "body": "@hpaulj  thank you for suggestion. Please check for me if i misunderstood, Firstly I use adding like array after convert np.array."}, {"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1564609370, "post_id": 57299040, "comment_id": 101092297, "body": "can you post the full code that starts with you defining and initializing the class object... because  rtcdate = np.array([])     rtchour = np.array([])     rtcminute = np.array([])     rtcsecond = np.array([])     rtctime = np.array([])  should all be defined under def __init__(self): if they are instance variables and you should be writing &#39;self.rtchour&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610221, "creation_date": 1564610221, "answer_id": 57299346, "question_id": 57299040, "link": "https://stackoverflow.com/questions/57299040/how-to-insert-1d-array-from-two-numpy-array-element-by-element/57299346#57299346", "title": "How to insert 1d array from two numpy array element by element", "body": "<p>One option is to convert to a <code>datetime</code> object which <code>matplotlib</code> can use for plotting. You might have to rethink how you structure your code but it would greatly simplify what you are trying to do and make sure that when you plot your data your axis is consistent when transitioning from 59 minutes to 1 hour for example.</p>\n\n<p>Something like this would give you your time list:</p>\n\n<pre><code>import datetime as dt\n\ngraph_data = open(\"DATA.TXT\", \"r\").read()\ndownLines = graph_data.split('\\n')\n\ntimedata = []\nfor line in downLines:\n    if len(line) &gt; 1:\n        timedata.append(dt.datetime.strptime(line,'%d/%m/%Y %H %M %S %f'))\n\n\nprint(timedata)\n#[datetime.datetime(2019, 7, 30, 17, 2, 31, 129000), datetime.datetime(2019, 7, 30, 17, 2, 37,100000), datetime.datetime(2019, 7, 30, 17, 2, 38, 154000), datetime.datetime(2019, 7, 30, 17, 2, 39, 147000)]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11465278, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5asmcQDM8oo/AAAAAAAAAAI/AAAAAAAAAAc/dDjIhjccsfc/photo.jpg?sz=128", "display_name": "fydil", "link": "https://stackoverflow.com/users/11465278/fydil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564611016, "creation_date": 1564608264, "last_edit_date": 1564611016, "question_id": 57299040, "link": "https://stackoverflow.com/questions/57299040/how-to-insert-1d-array-from-two-numpy-array-element-by-element", "title": "How to insert 1d array from two numpy array element by element", "body": "<p>I try plotting. I need x axis as time and I write this method. But i couldnt make result like that\n<code>rtctime = np.array([17.02.31, 17.02 37, 17.02.38])</code>\nHow to combine rtchour,rtcminute,rtcsecond arrays element by element and When I merge arrays, there is no problem on the x axis of the graph.</p>\n\n<pre><code>from matplotlib.backends.backend_qt5agg import (NavigationToolbar2QT as NavigationToolbar)\n\nimport numpy as np\nimport traceback\n\nclass Main(QtWidgets.QMainWindow, Ui_MainWindow):\n    rtcdate = np.array([])\n    rtchour = np.array([])\n    rtcminute = np.array([])\n    rtcsecond = np.array([])\n    rtctime = np.array([])\n\n    data = np.array([])\n  def __init__(self,parent=None):\n        super(Main, self).__init__(parent)\n        self.setupUi(self)\n\n        self.DataReader()\n\n        self.pushButton_data.clicked.connect(self.Graph)\n\n    def DataReader(self):\n\n        graph_data = open(\"DATA.TXT\", \"r\").read()\n        downLines = graph_data.split('\\n')\n\n        for line in downLines:\n            try:\n                if len(line) &gt; 1:\n                 valuedate, valuehour,valueminute, valuesecond,\\\n                 value= line.split(' ')\n\n                 self.rtcdate = np.append(self.rtcdate,valuedate)\n                 self.rtchour = np.append(self.rtchour,valuehour)\n                 self.rtcminute = np.append(self.rtcminute,valueminute)\n                 self.rtcsecond = np.append(self.rtcsecond,valuesecond)\n                 self.data = np.append(self.data,value)\n\n            except:\n             print(\"Error:\")\n             print(traceback.format_exc())\n             continue\n    def EKGDatas(self):\n\n        self.MatplotWidget.canvas.axes.clear()\n        self.MatplotWidget.canvas.axes.plot(self.rtcsecond, self.ekgdata)\n        self.MatplotWidget.canvas.axes.tick_params(axis='x', rotation=70)\n        self.MatplotWidget.canvas.draw()\n       self.window.show()\n\nif __name__== '__main__':\n    import sys\n    App = QtWidgets.QApplication(sys.argv)\n    PrecautionApp = Main()\n    PrecautionApp.show()\n    sys.exit(App.exec())\n</code></pre>\n\n<pre><code># ------------------------------------------------------\n# -------------------- matplotwidget.py --------------------\n# ------------------------------------------------------\nfrom PyQt5.QtWidgets import *\n\n\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\n\nfrom matplotlib.figure import Figure\n\n\nclass MatplotWidget(QWidget):\n\n    def __init__(self, parent=None):\n        QWidget.__init__(self, parent)\n\n        self.canvas = FigureCanvas(Figure())\n\n        vertical_layout = QVBoxLayout()\n        vertical_layout.addWidget(self.canvas)\n\n        self.canvas.axes = self.canvas.figure.add_subplot(111)\n        self.setLayout(vertical_layout)\n</code></pre>\n\n<p>DATA.TXT</p>\n\n<pre><code>30/07/2019 17 02 31 129\n30/07/2019 17 02 37 1\n30/07/2019 17 02 38 154\n30/07/2019 17 02 39 147\n</code></pre>\n\n<p>I am working big project. There are pyqt5 designer code in project.\nMy goal is to draw the data according to the date and time in the data.txt file. After doing this, I will analyze the graph. Therefore, according to my research I have reached the need to convert my series to numpy. I'll merge it into a single array to display it on the x-axis of the graph (hour.minute.second) and send it to the plot function.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1564608424, "post_id": 57298981, "comment_id": 101091994, "body": "<code>dict</code> is a <code>key:value</code> pair.  You have supplied a <code>list</code> as the <code>value</code> of the <code>key</code> 379048997, so the <code>value</code> [&#39;D_Leu&#39;,&#39;Ile&#39;,&#39;Leu&#39;,&#39;Benz&#39;,&#39;Prop&#39;,&#39;D_Phe&#39;] was returned."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1564608035, "creation_date": 1564608035, "answer_id": 57299001, "question_id": 57298981, "link": "https://stackoverflow.com/questions/57298981/how-to-use-a-dictionary-to-output-a-dictionary-key-using-an-asked-input/57299001#57299001", "title": "How to use a dictionary to output a dictionary key using an asked input", "body": "<p>Your dictionary keys are integers. <code>input()</code> returns a string. You need to convert the string to an integer.</p>\n\n<pre><code>PeptideLibrary = {\n    379048997:['D_Leu','Ile','Leu','Benz','Prop','D_Phe'],\n    379050201:['D_Leu','Ile','Leu','Benz','Prop','D_3OHPhe'],\n    379047420:['D_Leu','Ile','Leu','Sar','Prop','D_Phe']\n}\nRFID = int(input( \"What is your RFID? : \"))\nprint(PeptideLibrary.get(RFID))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 3, "last_activity_date": 1564608041, "creation_date": 1564608041, "answer_id": 57299004, "question_id": 57298981, "link": "https://stackoverflow.com/questions/57298981/how-to-use-a-dictionary-to-output-a-dictionary-key-using-an-asked-input/57299004#57299004", "title": "How to use a dictionary to output a dictionary key using an asked input", "body": "<p>Your dictionary keys are <code>int</code> but <code>input</code> returns a <code>str</code> hence you need to cast <code>RFID</code>:</p>\n\n<pre><code>print(PeptideLibrary.get(int(RFID)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11865168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48ae2a6a9c0f05dbc989d2be84dbe110?s=128&d=identicon&r=PG&f=1", "display_name": "pyQueen", "link": "https://stackoverflow.com/users/11865168/pyqueen"}, "is_accepted": false, "score": 1, "last_activity_date": 1564608119, "creation_date": 1564608119, "answer_id": 57299013, "question_id": 57298981, "link": "https://stackoverflow.com/questions/57298981/how-to-use-a-dictionary-to-output-a-dictionary-key-using-an-asked-input/57299013#57299013", "title": "How to use a dictionary to output a dictionary key using an asked input", "body": "<p>Try to use:</p>\n\n<pre><code>RFID = int(input(\"What is your RFID? : \")\n</code></pre>\n\n<p>input returns a string and 379048997 is not the same as \"379048997\".</p>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 10103803, "user_type": "registered", "profile_image": "https://graph.facebook.com/2106886832718024/picture?type=large", "display_name": "marzique", "link": "https://stackoverflow.com/users/10103803/marzique"}, "is_accepted": false, "score": 1, "last_activity_date": 1564608215, "creation_date": 1564608215, "answer_id": 57299032, "question_id": 57298981, "link": "https://stackoverflow.com/questions/57298981/how-to-use-a-dictionary-to-output-a-dictionary-key-using-an-asked-input/57299032#57299032", "title": "How to use a dictionary to output a dictionary key using an asked input", "body": "<p>Because input() function returns string, and your dictionary has numbers as keys\n<a href=\"https://i.stack.imgur.com/oLd7p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oLd7p.png\" alt=\"enter image description here\"></a></p>\n\n<p>just convert RFID variable to int after input:</p>\n\n<pre><code>PeptideLibrary = {\n    379048997:['D_Leu','Ile','Leu','Benz','Prop','D_Phe'],\n    379050201:['D_Leu','Ile','Leu','Benz','Prop','D_3OHPhe'],\n    379047420:['D_Leu','Ile','Leu','Sar','Prop','D_Phe']\n}\nRFID = input( \"What is your RFID? : \")\nRFID = int(RFID)\nprint(PeptideLibrary.get(RFID))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11865897, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ey4ZQG36Ghk/AAAAAAAAAAI/AAAAAAAAADE/d77Xc9KBMdw/photo.jpg?sz=128", "display_name": "Alejandro Cabrera", "link": "https://stackoverflow.com/users/11865897/alejandro-cabrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1564608215, "creation_date": 1564607924, "question_id": 57298981, "link": "https://stackoverflow.com/questions/57298981/how-to-use-a-dictionary-to-output-a-dictionary-key-using-an-asked-input", "title": "How to use a dictionary to output a dictionary key using an asked input", "body": "<p>I'm fairly new to coding so I don't know much of the terminology but I am trying to use this dictionary. I am curious why one version works but not the other. The first code outputs None when I input the first dictionary Key (379048997) but the second outputs the actual value</p>\n\n<pre><code>PeptideLibrary = {\n    379048997:['D_Leu','Ile','Leu','Benz','Prop','D_Phe'],\n    379050201:['D_Leu','Ile','Leu','Benz','Prop','D_3OHPhe'],\n    379047420:['D_Leu','Ile','Leu','Sar','Prop','D_Phe']\n}\nRFID = input( \"What is your RFID? : \")\nprint(PeptideLibrary.get(RFID))\n\n#Input: 379048997\n#Output: None\n\nPeptideLibrary = {\n    379048997:['D_Leu','Ile','Leu','Benz','Prop','D_Phe'],\n    379050201:['D_Leu','Ile','Leu','Benz','Prop','D_3OHPhe'],\n    379047420:['D_Leu','Ile','Leu','Sar','Prop','D_Phe']\n}\n\nprint(PeptideLibrary.get(379048997))\n\n#Output:['D_Leu','Ile','Leu','Benz','Prop','D_Phe']\n</code></pre>\n\n<p>First code, outputs None when I input 379048997\nSecond code, outputs ['D_Leu','Ile','Leu','Benz','Prop','D_Phe'] when explicitly input 379048997 to .get() function</p>\n"}, {"tags": ["python", "python-3.x", "inheritance", "abstract-class", "abstract-methods"], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 1, "last_activity_date": 1564609139, "creation_date": 1564609139, "answer_id": 57299176, "question_id": 57298972, "link": "https://stackoverflow.com/questions/57298972/how-to-overwrite-abstract-method-of-a-child-class-of-a-super-class-from-the-inh/57299176#57299176", "title": "How to overwrite abstract method of a child class of a super class, from the inheriting class?", "body": "<p><code>KAX</code> isn't a child class, it's just a class defined <em>within another class</em>. So, you can subclass it and override its methods:</p>\n\n<pre><code>class KB(KA):\n    class KAX(KA.KAX):\n        def multiply(self):\n            print(\"hello!\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1564613804, "post_id": 57299319, "comment_id": 101093339, "body": "Thank you @Joseph. I tried your and @ForceBru&#39;s solution. But it did not work. See, I need access to the instance of KB as well for certain attributes. For instance, if I need access to KB.B to do something, the error says that I am missing an argument <code>self</code>."}, {"owner": {"reputation": 11, "user_id": 11866219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dca_ymZfrZ4/AAAAAAAAAAI/AAAAAAAAAOc/Sg7Iz8vK95I/photo.jpg?sz=128", "display_name": "Joseph Feld", "link": "https://stackoverflow.com/users/11866219/joseph-feld"}, "reply_to_user": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1564675260, "post_id": 57299319, "comment_id": 101118037, "body": "I think the issue there could be that you&#39;re not instantiating KB.KAX but you&#39;re trying to use it like an instantiated object. If you make a call like kb.KAX.multiply() (where kb is an instance of KB), you&#39;re calling the static method multiply() of KB.KAX. If you want KB.KAX.multiply() to operate on KB objects, you could have it take a KB object as a parameter instead of self."}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1564680647, "post_id": 57299319, "comment_id": 101120424, "body": "Yes, I tried using <code>kb.KAX.multiply(kb)</code> and it works. But, what I would like to do is instantiate <code>kb</code> first, then under <code>kb.KAX</code> access the method <code>multiply()</code> and operate that on some attribute(s) of <code>kb</code>."}, {"owner": {"reputation": 11, "user_id": 11866219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dca_ymZfrZ4/AAAAAAAAAAI/AAAAAAAAAOc/Sg7Iz8vK95I/photo.jpg?sz=128", "display_name": "Joseph Feld", "link": "https://stackoverflow.com/users/11866219/joseph-feld"}, "reply_to_user": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1564966308, "post_id": 57299319, "comment_id": 101190201, "body": "You would need to make KAX an instance of some object instead of a class. Like, you could define a KAX class and then give KB an instance variable kax of type KAX that could run the methods. In the KAX&#39;s <b>init</b>, you could give its parent KB object as a parameter so it knows what to run the multiply operation on"}], "tags": [], "owner": {"reputation": 11, "user_id": 11866219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dca_ymZfrZ4/AAAAAAAAAAI/AAAAAAAAAOc/Sg7Iz8vK95I/photo.jpg?sz=128", "display_name": "Joseph Feld", "link": "https://stackoverflow.com/users/11866219/joseph-feld"}, "is_accepted": false, "score": 1, "last_activity_date": 1564610048, "creation_date": 1564610048, "answer_id": 57299319, "question_id": 57298972, "link": "https://stackoverflow.com/questions/57298972/how-to-overwrite-abstract-method-of-a-child-class-of-a-super-class-from-the-inh/57299319#57299319", "title": "How to overwrite abstract method of a child class of a super class, from the inheriting class?", "body": "<p>Maybe you could try making a new class called KB.KAX that extends KA.KAX and then implementing your method like so:</p>\n\n<pre><code>class KA():\n    class KAX():  \n        @abstractmethod\n        def multiply(self): pass\n\nclass KB(KA):\n    class KAX(KA.KAX):\n        def multiply(self):\n            print(\"doing stuff\")\n</code></pre>\n"}], "owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564610137, "creation_date": 1564607883, "last_edit_date": 1564610137, "question_id": 57298972, "link": "https://stackoverflow.com/questions/57298972/how-to-overwrite-abstract-method-of-a-child-class-of-a-super-class-from-the-inh", "title": "How to overwrite abstract method of a child class of a super class, from the inheriting class?", "body": "<p>I have a <code>class KA</code>, which has two <em>methods</em>, <code>add()</code> and <code>subtract()</code>, and an <em>abstract child</em> <code>class KAX</code>. <code>KAX</code> has an <em>abstract method</em>, <code>multiply()</code>. There is another <code>class KB</code> which <em>inherits</em> <code>KA</code>, and by extension has access to <code>KAX.multiply()</code>. I would like to <strong>overwrite/define</strong> <code>KAX.multiply()</code> from <code>class KB</code>. How to do this?</p>\n\n<p>So far what I could think of is define a private method <code>__multiply()</code> under <code>class KB</code>, and then redefine under <code>KB.__init__()</code> as follows: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>self.KAX.multiply = self.__multiply()\n</code></pre>\n\n<p>This works. However, I am wondering if there is a better way to do what I am trying to achieve here. Thank you.</p>\n\n<p><strong>My current code:</strong>  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from abc import ABC, abstractmethod\n\nclass KA():\n\n    def __init__(self):\n        self.A = 3\n        self.B = 10\n        self.C = self.B**self.A\n\n    @abstractmethod\n    def add(self): pass\n\n    @abstractmethod\n    def subtract(self): pass\n\n    class KAX(ABC):\n\n        @abstractmethod\n        def multiply(self): pass\n\n\nclass KB(KA):\n\n    def __init__(self, A = 3, B = 10):\n        #super(KB, self).__init__()\n        self.A = A\n        self.B = B\n        self.KAX.multiply = self.__multiply\n        self.KAX.multiply()\n        self.C = self.KAX.multiplication\n\n    def add(self):\n        self.addition = self.A + self.B\n\n    def subtract(self):\n        self.subtraction = self.A - self.B\n\n    def __multiply(self):\n        self.KAX.multiplication = self.A*self.B\n\n\nif __name__ == '__main__':\n    kb = KB(A = 4, B = 2)\n    # check values of variables: A, B, C\n    print('Parameters: A, B, C')\n    print(''.join(['kb.{}: {}\\n'.format(vname, getattr(kb,vname)) for vname in ['A', 'B', 'C']]))\n    # apply methods\n    kb.add()\n    kb.subtract()\n    kb.KAX.multiply()\n    # show results\n    result_string = 'Result: \\n\\t addition: {}\\t | subtraction: {}\\t | multiplication: {}'\n    print(result_string.format(kb.addition, kb.subtraction, kb.KAX.multiplication))\n</code></pre>\n\n<p>The output of this code results in:  </p>\n\n<pre><code>\n    Parameters: A, B, C\n    kb.A: 4\n    kb.B: 2\n    kb.C: 1000\n\n    Result: \n         addition: 6     | subtraction: 2    | multiplication: 8\n\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "pip", "gensim", "word2vec"], "comments": [{"owner": {"reputation": 1525, "user_id": 8560167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771a1fbc63e1352dda847582c3e7dba2?s=128&d=identicon&r=PG&f=1", "display_name": "sygneto", "link": "https://stackoverflow.com/users/8560167/sygneto"}, "edited": false, "score": 0, "creation_date": 1564607770, "post_id": 57298877, "comment_id": 101091818, "body": "Try to add python to your system path, and then try install it using pip"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1564608066, "post_id": 57298877, "comment_id": 101091882, "body": "Ignore the previous comment because it&#39;s a terrible idea to manipulate <code>conda</code> installations with <code>pip</code>.  Only use <code>pip</code> for packages that aren&#39;t available with <code>conda</code>.  That said, I&#39;d remove Anaconda and reinstall it, not just the package."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564608081, "post_id": 57298877, "comment_id": 101091886, "body": "I see <code>DLL</code> in error - mayb it needs C/C++ libraries which you have to install manually."}, {"owner": {"reputation": 11, "user_id": 11866120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f3a4171c81aecd60fd4dae7212de46?s=128&d=identicon&r=PG&f=1", "display_name": "NickMichael", "link": "https://stackoverflow.com/users/11866120/nickmichael"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564665539, "post_id": 57298877, "comment_id": 101112188, "body": "@furas what do you recommend to do to fix the issue, if the problem are some c/c++ libs?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11866120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f3a4171c81aecd60fd4dae7212de46?s=128&d=identicon&r=PG&f=1", "display_name": "NickMichael", "link": "https://stackoverflow.com/users/11866120/nickmichael"}, "edited": false, "score": 0, "creation_date": 1564665411, "post_id": 57299527, "comment_id": 101112107, "body": "i tried the code to run on two different ec2 instances: One with conda one without conda (only installed the packages that were needed with pip). Still doenst work. now im reinstalling conda on an ec2 instance. I also dont thnk it is a path issue."}, {"owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "reply_to_user": {"reputation": 11, "user_id": 11866120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f3a4171c81aecd60fd4dae7212de46?s=128&d=identicon&r=PG&f=1", "display_name": "NickMichael", "link": "https://stackoverflow.com/users/11866120/nickmichael"}, "edited": false, "score": 0, "creation_date": 1564678543, "post_id": 57299527, "comment_id": 101119497, "body": "You would need to expand your question with the exact commands you ran, and verbatim output/errors you saw for each step tried, for me or other potential answerers to understand how and why it &quot;doesn&#39;t work&quot; for you."}], "tags": [], "owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564611532, "creation_date": 1564611532, "answer_id": 57299527, "question_id": 57298877, "link": "https://stackoverflow.com/questions/57298877/how-to-install-gensim-and-run-package-in-python/57299527#57299527", "title": "How to install gensim and run package in python?", "body": "<p>That error is actually suggesting some problem in <code>scipy</code>'s installation \u2013 that's the source of the actual line of code where the <code>DLL load failed</code> error arises. You should try:</p>\n\n<p>(1) uninstalling &amp; reinstalling <code>conda</code></p>\n\n<p>(2) ensuring you've activated a \"conda environment\"</p>\n\n<p>(3) manually conda-installing individually required packages, like <code>scipy</code>, and watching the output carefully for any warnings/errors</p>\n\n<p>(4) when finally running your code, still ensuring you've activated the right conda environment</p>\n\n<p>If you still have problems, expand your question with more specific details about how each part was installed, and whether there was reported success or failure at each step.</p>\n\n<p>Notably, <code>conda</code> is usually very helpful in getting these packages working under Windows. But in general, they all get the most development, use, and quality-attention under more Unix/Linux-like systems. So if you have the option to <em>not use Windows</em>, everything may have a better chance of working, and when you hit problems, you'll have a larger body of prior docs/help to draw upon. (It all can still be made to work on Windows, but often requires using secondary or less-preferred installation/configuration options.)</p>\n"}], "owner": {"reputation": 11, "user_id": 11866120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f3a4171c81aecd60fd4dae7212de46?s=128&d=identicon&r=PG&f=1", "display_name": "NickMichael", "link": "https://stackoverflow.com/users/11866120/nickmichael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564611532, "creation_date": 1564607419, "last_edit_date": 1564608143, "question_id": 57298877, "link": "https://stackoverflow.com/questions/57298877/how-to-install-gensim-and-run-package-in-python", "title": "How to install gensim and run package in python?", "body": "<p>i want to do in python 3.7.4:</p>\n\n<p>and getting this Error:</p>\n\n<p>i already tried: </p>\n\n<p>using <code>conda</code> and <code>pip</code></p>\n\n<p>using local windows and windows server </p>\n\n<p>multiple reinstallments of diffenent versions of packages (e.g. <code>numpy</code> and <code>scipy</code>)</p>\n\n<pre><code>from gensim.models import Word2Vec \n</code></pre>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"c:/Users/Administrator/Documents/GitHub/contract-criteria-identifier-on-aws/schnelltest.py\", line 1, in \n      import gensim\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim__init__.py\", line 5, in \n      from gensim import parsing, corpora, matutils, interfaces, models, similarities, summarization, utils  # noqa:F401\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\parsing__init__.py\", line 4, in \n      from .preprocessing import (remove_stopwords, strip_punctuation, strip_punctuation2,  # noqa:F401\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\parsing\\preprocessing.py\", line 42, in \n      from gensim import utils\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\utils.py\", line 40, in \n      import scipy.sparse\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\scipy\\sparse__init__.py\", line 230, in \n      from .csr import *\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\scipy\\sparse\\csr.py\", line 13, in \n      from ._sparsetools import (csr_tocsc, csr_tobsr, csr_count_blocks,\n  ImportError: DLL load failed: The specified module could not be found.\n  PS C:\\Users\\Administrator\\Documents\\GitHub\\contract-criteria-identifier-on-aws> &amp; C:/Users/Administrator/AppData/Local/Programs/Python/Python37/python.exe c:/Users/Administrator/Documents/GitHub/contract-criteria-identifier-on-aws/schnelltest.py\n  Traceback (most recent call last):\n    File \"c:/Users/Administrator/Documents/GitHub/contract-criteria-identifier-on-aws/schnelltest.py\", line 1, in \n      import gensim\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim__init__.py\", line 5, in \n      from gensim import parsing, corpora, matutils, interfaces, models, similarities, summarization, utils  # noqa:F401\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\parsing__init__.py\", line 4, in \n      from .preprocessing import (remove_stopwords, strip_punctuation, strip_punctuation2,  # noqa:F401\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\parsing\\preprocessing.py\", line 42, in \n      from gensim import utils\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\gensim\\utils.py\", line 40, in \n      import scipy.sparse\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\scipy\\sparse__init__.py\", line 230, in \n      from .csr import *\n    File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\scipy\\sparse\\csr.py\", line 13, in \n      from ._sparsetools import (csr_tocsc, csr_tobsr, csr_count_blocks,\n  ImportError: DLL load failed: The specified module could not be found.</p>\n</blockquote>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1564607856, "post_id": 57298873, "comment_id": 101091834, "body": "The <a href=\"https://docs.python.org/3/library/threading.html\" rel=\"nofollow noreferrer\"><code>threading</code> module</a> provides support for multi-threading."}, {"owner": {"reputation": 168, "user_id": 10893983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uUF61kli7PA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY8HxUeeYkkgTas0NceNuWkJeJmbg/mo/photo.jpg?sz=128", "display_name": "Amjasd Masdhash", "link": "https://stackoverflow.com/users/10893983/amjasd-masdhash"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1564608087, "post_id": 57298873, "comment_id": 101091889, "body": "@ForceBru How can I implement this in code please"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1564608265, "post_id": 57298873, "comment_id": 101091941, "body": "Stack Overflow is <i>not</i> a free code-writing service. We do <i>not</i> write code for people, but we help them fix issues in their <i>existing</i> code. If your code doesn&#39;t work, then a question about this code may suit this site. However, if there <i>is</i> no code, and one would like someone to write it for them, we don&#39;t do that here."}, {"owner": {"reputation": 168, "user_id": 10893983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uUF61kli7PA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY8HxUeeYkkgTas0NceNuWkJeJmbg/mo/photo.jpg?sz=128", "display_name": "Amjasd Masdhash", "link": "https://stackoverflow.com/users/10893983/amjasd-masdhash"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1564608425, "post_id": 57298873, "comment_id": 101091996, "body": "@ForceBru I understand but I thought it would be an easy for loop for someone here ( I am new to programming). Also I mentioned in my question that my code works I just want to make it faster by using threading"}], "owner": {"reputation": 168, "user_id": 10893983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uUF61kli7PA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY8HxUeeYkkgTas0NceNuWkJeJmbg/mo/photo.jpg?sz=128", "display_name": "Amjasd Masdhash", "link": "https://stackoverflow.com/users/10893983/amjasd-masdhash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564670062, "creation_date": 1564607401, "question_id": 57298873, "link": "https://stackoverflow.com/questions/57298873/python-threading-to-download-list-of-dictionaries", "title": "python threading to download list of dictionaries", "body": "<p>I have a list of 1000 dictionary each dictionary contains url,file_name</p>\n\n<pre><code>for di in images_to_download:\n    temp = download_image(di['img_url'],di['image_full_name'])\n    if not temp:\n        continue\n    upload_file(temp,t4['id'])\n\n\n\ndef download_image(img_url,image_full_name)\n    try:\n        req = request(img_url, headers=headers)\n        raw_img = urlopen(req).read()\n        try:\n            with open(image_full_name,'wb') as file:\n                file.write(raw_img)\n        except:\n            image_full_name = query+str(random.randint(100000))\n            with open(image_full_name,'wb') as file:\n                file.write(raw_img)\n        return image_full_name\n    except Exception as e:\n        print (\"Download failed: {}\".format(e))\n        return None\n\ndef upload_file(file_name,folder_id):\n    file2 = drive.CreateFile({'parents': [{'id': folder_id}]})\n    file2.SetContentFile(file_name)\n    file2.Upload()\n</code></pre>\n\n<p>This is my code so far it works well, but it is slow (3-6 sec per image), so I would like to thread it How can I do that?</p>\n\n<p>The images are from different websites so I can download them without too fast requests on website.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 11261558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2CvjW-dVkbc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rflQbBgVStNF-1mg_XPFliub3Ahpw/mo/photo.jpg?sz=128", "display_name": "Arc89", "link": "https://stackoverflow.com/users/11261558/arc89"}, "edited": false, "score": 0, "creation_date": 1564666618, "post_id": 57299100, "comment_id": 101112849, "body": "So that would ideally work but I have no control of the vba file which I just update backends for. It is also an xlsm file so I have to use openpyxl and the backend fill starts at row 4...so lots of nuances that I am trying to work around haha"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "reply_to_user": {"reputation": 107, "user_id": 11261558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2CvjW-dVkbc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rflQbBgVStNF-1mg_XPFliub3Ahpw/mo/photo.jpg?sz=128", "display_name": "Arc89", "link": "https://stackoverflow.com/users/11261558/arc89"}, "edited": false, "score": 0, "creation_date": 1564666843, "post_id": 57299100, "comment_id": 101112988, "body": "hmm it&#39;s not clear to me what you want, you want to replace a datasheet in a vba file which is .xlsm ? you can still replace that with your <code>append_df_excel</code> function call?"}], "tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1564608623, "creation_date": 1564608623, "answer_id": 57299100, "question_id": 57298857, "link": "https://stackoverflow.com/questions/57298857/loop-update-existing-excel-template/57299100#57299100", "title": "Loop update existing excel template", "body": "<p>as I don't know VBA and you posted this under the python tag I'll provide my take on this. </p>\n\n<p>assuming your datasheet is called <code>file</code> you could try something like this : </p>\n\n<pre><code>import shutil\nfor city in master_backend.City.unique():\n    df = master_backend.loc[master_backend.City == city]\n    shutil.copy(file,f\"{city}.xlsx\")\n    append_df_excel(f\"{city}.xlsx\", df,sheet_name='Backend')\n</code></pre>\n\n<p>cracking function btw, I would use put some doc strings in it for easy of use : )</p>\n"}, {"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1564611570, "post_id": 57299144, "comment_id": 101092877, "body": "I think the problem of doing this with pure pandas is that it will over write the datasheet and lose all connections and formulas,which is why he has the self defined function above. Nice answer tho, you could use f strings with city go make it more readable imo (:"}], "tags": [], "owner": {"reputation": 1086, "user_id": 7988497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155370853067558/picture?type=large", "display_name": "MichaelD", "link": "https://stackoverflow.com/users/7988497/michaeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1564608894, "creation_date": 1564608894, "answer_id": 57299144, "question_id": 57298857, "link": "https://stackoverflow.com/questions/57298857/loop-update-existing-excel-template/57299144#57299144", "title": "Loop update existing excel template", "body": "<p>I think you can simplify this script significantly by understanding that pandas will create a dataframe for you when you read the excel file.  Then it's just a simple matter of collecting the info you want from the dataframe and re-writting it to a file.  It's unclear what you want in your new file, but suppose you just want to filter the second sheet and keep everything in the first sheet it might look like this.</p>\n\n<pre><code># Open the file, \n# NOTE: when you open the file, if there are multiple sheets \n#   then the result is a dictionary of dataframes keyed on the sheet name\nmaster_data = pd.read_excel(file_path, ....)\n\n# Assuming second sheet name is 'City'\ncity_df=master_data['City']\n\n# Replace 'columnName' with the name of the column (if includes headers) or column number\nfor city in pd.unique(city_df['columnName']):\n    with pd.ExcelWriter(city + '.xlsx') as writer:\n        master_data['Sheet1'].to_excel(writer, sheet_name='Sheet1')\n        city_df[city_df['columnName']==city].to_excel(writer, sheet_name='City')            \n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 11261558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2CvjW-dVkbc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rflQbBgVStNF-1mg_XPFliub3Ahpw/mo/photo.jpg?sz=128", "display_name": "Arc89", "link": "https://stackoverflow.com/users/11261558/arc89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564608894, "creation_date": 1564607332, "last_edit_date": 1564607522, "question_id": 57298857, "link": "https://stackoverflow.com/questions/57298857/loop-update-existing-excel-template", "title": "Loop update existing excel template", "body": "<p>Trying to write a script where I currently have an excel VBA sheet that has two tabs with 1st being a graph and second being a backend file. Backend is updated by a master file. In the master file there is a city column where I want to loop through all the unique city rows write those rows in to the VBA file and save the VBA file with the city's name. </p>\n\n<pre><code>master_backend = pd.read_excel(path)\ncity = master_backend[(master_backend[\"City\"]==\"NY\")] \n\ndef append_df_to_excel(filename, df, sheet_name='Sheet1', startrow=None,\n                      truncate_sheet=False, \n                      **to_excel_kwargs):\n   from openpyxl import load_workbook\n   import pandas as pd\n   if 'engine' in to_excel_kwargs:\n       to_excel_kwargs.pop('engine')\n   writer = pd.ExcelWriter(filename, engine='openpyxl') \n   try:\n       FileNotFoundError\n   except NameError:\n       FileNotFoundError = IOError\n   try:        \n       writer.book = load_workbook(filename, keep_vba = True)\n       if startrow is None and sheet_name in writer.book.sheetnames:\n           startrow = writer.book[sheet_name].max_row\n       if truncate_sheet and sheet_name in writer.book.sheetnames:\n           idx = writer.book.sheetnames.index(sheet_name)\n           writer.book.remove(writer.book.worksheets[idx])\n           writer.book.create_sheet(sheet_name, idx)\n       writer.sheets = {ws.title:ws for ws in writer.book.worksheets}\n   except FileNotFoundError:\n       pass\n   if startrow is None:\n       startrow = 0\n   df.to_excel(writer, sheet_name, startrow=startrow, **to_excel_kwargs)\n   writer.save()\n</code></pre>\n\n<p>Essentially what I want is 5 files since there are 5 cities all named with their city name</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 3, "creation_date": 1564608716, "post_id": 57298854, "comment_id": 101092087, "body": "Look at <code>np.add.at</code> - it does an unbuffer version of <code>+=</code>."}, {"owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564609459, "post_id": 57298854, "comment_id": 101092320, "body": "ok thanks that i was looking for"}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "edited": false, "score": 0, "creation_date": 1564608319, "post_id": 57298975, "comment_id": 101091958, "body": "wait sorry i wanted not that(see modified question)ids = np.array([0,1,2,1])  adds = np.array([1,2,3,4])  for  i, x in enumerate(ids):     arr[x] +=adds[i]"}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 0, "last_activity_date": 1564607896, "creation_date": 1564607896, "answer_id": 57298975, "question_id": 57298854, "link": "https://stackoverflow.com/questions/57298854/how-to-make-atomic-add-with-numpy/57298975#57298975", "title": "How to make atomic add with numpy", "body": "<p>You can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html\" rel=\"nofollow noreferrer\"><code>np.unique</code></a> to return the unique indices together with the index counts. Then you can use the counts to multiply with the r.h.s. of the add operation:</p>\n\n<pre><code>i, n = np.unique(ids, return_counts=True)\narr[i] += n*adds[i]\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564608379, "creation_date": 1564607320, "last_edit_date": 1564608379, "question_id": 57298854, "link": "https://stackoverflow.com/questions/57298854/how-to-make-atomic-add-with-numpy", "title": "How to make atomic add with numpy", "body": "<p>I am searching for a way to make atomic or non-vector addition, or other operations in <code>numpy</code> with one operator, not Python loop</p>\n\n<p>Say i have following <code>numpy</code> array:</p>\n\n<pre><code>import numpy as np \n\n\narr = np.zeros(4)\n\nids = np.array([1,2,1])\n\nadds = np.array([1,2,3,4])\n\narr[ids] +=adds[ids]\n'''\nfor  x in ids:\n    arr[x] +=adds[x]\n '''   \n\nprint(arr )\n</code></pre>\n\n<p>How do I implement the commended out code? The result of this add is not correct, it is like i am adding ti the arr[1] position only once.\nIs there a <code>numpy</code> function to properly perform this operation?</p>\n\n<p>Ok, is it possible also to do that:</p>\n\n<pre><code>ids = np.array([0,1,2,1])\n\nadds = np.array([1,2,3,4])\n\nfor  i, x in enumerate(ids):\n    arr[x] +=adds[i]\n</code></pre>\n\n<p>with one numpy operation? This was the main question.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "csv"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1564607445, "post_id": 57298835, "comment_id": 101091699, "body": "change your encoding to latin-1"}, {"owner": {"reputation": 9, "user_id": 11228769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e761d784efb7bb92e2c9024728d4555f?s=128&d=identicon&r=PG&f=1", "display_name": "ghostofsparta", "link": "https://stackoverflow.com/users/11228769/ghostofsparta"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1564607741, "post_id": 57298835, "comment_id": 101091809, "body": "The input DAT is in UTF-8 so the output DAT also needs to be in UTF-8."}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1564608426, "post_id": 57298835, "comment_id": 101091997, "body": "Oh I see, you need to set the level of quoting in your input and output. I can&#39;t reproduce your example so I can&#39;t post an answer but look at read_csv and to_csv docs on the <code>quoting</code> field"}, {"owner": {"reputation": 9, "user_id": 11228769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e761d784efb7bb92e2c9024728d4555f?s=128&d=identicon&r=PG&f=1", "display_name": "ghostofsparta", "link": "https://stackoverflow.com/users/11228769/ghostofsparta"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1564608555, "post_id": 57298835, "comment_id": 101092039, "body": "Can you please explain what you mean by setting the level of quoting in input and output?"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1564608989, "post_id": 57298835, "comment_id": 101092173, "body": "If you want to keep them in your output just remove <code>quotechar</code> from each of your df calls."}], "answers": [{"tags": [], "owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "is_accepted": true, "score": 0, "last_activity_date": 1564609565, "creation_date": 1564609565, "answer_id": 57299231, "question_id": 57298835, "link": "https://stackoverflow.com/questions/57298835/how-do-i-read-and-write-the-thorn-character-from-a-dat-file-using-quotechar-in-p/57299231#57299231", "title": "How do I read and write the thorn character from a DAT file using quotechar in Pandas?", "body": "<p>Looks like the issue you're facing is that quotes (thorn characters) are not being added because the default quoting discipline is <code>csv.QUOTE_MINIMAL</code>. Looks like you want <code>csv.QUOTE_ALL</code>:</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\n\ndf.to_csv(outputdat, quotechar='\\xfe', sep='\\x14', quoting=csv.QUOTE_ALL,\n          index=False, encoding='UTF-8')\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11228769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e761d784efb7bb92e2c9024728d4555f?s=128&d=identicon&r=PG&f=1", "display_name": "ghostofsparta", "link": "https://stackoverflow.com/users/11228769/ghostofsparta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57299231, "answer_count": 1, "score": 0, "last_activity_date": 1564672472, "creation_date": 1564607171, "last_edit_date": 1564672472, "question_id": 57298835, "link": "https://stackoverflow.com/questions/57298835/how-do-i-read-and-write-the-thorn-character-from-a-dat-file-using-quotechar-in-p", "title": "How do I read and write the thorn character from a DAT file using quotechar in Pandas?", "body": "<p>Please see my code below. The code works as expected but the output DAT file is missing the \u00fe (LATIN SMALL LETTER THORN) character.</p>\n\n<pre><code>import pandas as pd\n\ninputdat = \"C:/Downloads/Python/SAMPLEDATA.dat\"\noutputdat = \"C:/Downloads/Python/Output.dat\"\n\ncolnames = [\"ID\", \"Company\", \"Employee\", \"Salary\", 'Years']\ndf = pd.read_csv(inputdat, names = colnames, header = None, skiprows = 1, encoding='UTF-8', quotechar='\\xfe', sep='\\x14', engine='python')\nfilter = ['UID_001', 'UID_002']\n\ndf.loc[df.ID.isin(filter), ['Salary', 'Years']] = \"\"\n\ndf.to_csv(outputdat, quotechar='\\xfe', sep='\\x14', index=False, encoding='UTF-8')\n</code></pre>\n\n<p>How do I make sure the thorn symbol is included in the output dat? </p>\n\n<p>SAMPLE INPUT: <a href=\"https://imgur.com/vUWCRfF\" rel=\"nofollow noreferrer\">https://imgur.com/vUWCRfF</a></p>\n\n<p>CURRENT OUTPUT: <a href=\"https://imgur.com/sUlsy87\" rel=\"nofollow noreferrer\">https://imgur.com/sUlsy87</a></p>\n\n<p>DESIRED OUTPUT: <a href=\"https://imgur.com/UnX0j43\" rel=\"nofollow noreferrer\">https://imgur.com/UnX0j43</a></p>\n\n<p>Note: I apologize for posting the sample input and outputs in image form. The delimiter and quote characters were not showing up correctly otherwise.</p>\n"}, {"tags": ["python", "qutip"], "comments": [{"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1564608558, "post_id": 57298827, "comment_id": 101092040, "body": "pretty much means you&#39;re going to have to write your own function for the hamiltonian. you can use numpy/scipy for that."}, {"owner": {"reputation": 19, "user_id": 9434761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34b451d8078d2fd735134ce8a349a90?s=128&d=identicon&r=PG&f=1", "display_name": "PaulH", "link": "https://stackoverflow.com/users/9434761/paulh"}, "reply_to_user": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1564666635, "post_id": 57298827, "comment_id": 101112859, "body": "Hi, thank you for the quick reply.  Actually, that is what I&#39;ve understood as well but I don&#39;t know how to implement such a function. I&#39;ve editted what I&#39;ve tried and did not work for different reasons in the main comment. Paul"}], "owner": {"reputation": 19, "user_id": 9434761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34b451d8078d2fd735134ce8a349a90?s=128&d=identicon&r=PG&f=1", "display_name": "PaulH", "link": "https://stackoverflow.com/users/9434761/paulh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564666897, "creation_date": 1564607132, "last_edit_date": 1564666897, "question_id": 57298827, "link": "https://stackoverflow.com/questions/57298827/how-to-call-time-dependent-hamiltonian-with-qutip-python", "title": "How to call time-dependent hamiltonian with qutip/python?", "body": "<p>I am trying to implement some codes to describe the coherent control of a system. The problem is that I want to use an hamiltonian of the form:\n{H}_ij = u(t) * h_ij * exp(omega_ij * t) for the i^th row and j^th column\nwith h_ij = conj(h_ji) and h_ii = 0.\nBecause the time dependence of each terms is different, this hamiltonian cannot be written using the techniques to write a time-dependent hamiltonian with the first three options detailed in the user manual (<a href=\"http://qutip.org/downloads/4.4.0/qutip-doc-4.4.pdf#subsection.3.5.6\" rel=\"nofollow noreferrer\">http://qutip.org/downloads/4.4.0/qutip-doc-4.4.pdf#subsection.3.5.6</a>) more precisely at page 61.</p>\n\n<p>It can however be realized with the fourth (outdated) option:</p>\n\n<blockquote>\n  <p>Finally option #4, expressing the Hamiltonian as a Python function, is\n  the original method for time dependence in QuTiP 1.x. However, this \n  method is somewhat less efficient then the previously mentioned methods. \n  However, in contrast to the other options this method can be used in \n  implementing time-dependent Hamiltonians that cannot be expressed as a \n  function of constant operators with time-dependent coefficients.</p>\n</blockquote>\n\n<p>I think this is exactly what I want but I don't understand how I can implement the Hamiltonian as a python function.\nCan someone show me an example of such \"Hamiltonian as a Python function\"?</p>\n\n<p>EDIT:\nThis is what I've tried so far:</p>\n\n<pre><code>\nimport numpy as np\nimport qutip\n\n\npsi_0 = qutip.ket2dm(qutip.basis(2, 0))\npsi_1 = qutip.ket2dm(qutip.basis(2, 1))\ntime = np.linspace(0, 10)\n\nH_zeros = qutip.Qobj([[0, 0], [0, 0]])\n\n\ndef Hamiltonian_1(t, args):\n    return [[0, np.exp(1j * t)], [np.exp(- 1j * t), 0]]\n\n\ndef Hamiltonian_2(t):\n    return [[0, np.exp(1j * t)], [np.exp(- 1j * t), 0]]\n\n\ndef Hamiltonian_3(t, args):\n    return qutip.Qobj([[0, np.exp(1j * t)], [np.exp(- 1j * t), 0]])\n\n\ndef Hamiltonian_4(t):\n    return qutip.Qobj([[0, np.exp(1j * t)], [np.exp(- 1j * t), 0]])\n\n\n# result = qutip.mesolve(Hamiltonian_1, psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve(Hamiltonian_2, psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve(Hamiltonian_3, psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve(Hamiltonian_4, psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([Hamiltonian_1], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([Hamiltonian_2], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([Hamiltonian_3], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([Hamiltonian_4], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, Hamiltonian_1], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, Hamiltonian_2], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, Hamiltonian_3], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, Hamiltonian_4], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, [H_zeros, Hamiltonian_1]], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, [H_zeros, Hamiltonian_2]], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, [H_zeros, Hamiltonian_3]], psi_0, time, [], [psi_0, psi_1])\n# result = qutip.mesolve([H_zeros, [H_zeros, Hamiltonian_4]], psi_0, time, [], [psi_0, psi_1])\n</code></pre>\n\n<p>I've tried in this simple case with different definitions of the hamiltonian function (Hamiltonian_1 to 4) and I've tried multiple combination of mesolve functions (commented in this code for the moment)... None of them is working.</p>\n\n<p>Thank you,\nPaul</p>\n"}, {"tags": ["python", "sql", "postgresql", "sqlalchemy"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1564606893, "post_id": 57298759, "comment_id": 101091493, "body": "What is the function doing? You may be able to move a lot of the work to the database"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1564606929, "post_id": 57298759, "comment_id": 101091512, "body": "Depends what you are doing. If you properly describe what operation you need to perform, someone might be able to give you the SQL to do it."}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1564606965, "post_id": 57298759, "comment_id": 101091525, "body": "Include your code.  The question is somewhat broad.  <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1106505, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1564606957, "creation_date": 1564606957, "answer_id": 57298793, "question_id": 57298759, "link": "https://stackoverflow.com/questions/57298759/how-to-query-perform-operation-and-then-update-on-entire-table/57298793#57298793", "title": "How to QUERY perform operation and then UPDATE on entire table", "body": "<p>What about an <code>update</code>?</p>\n\n<pre><code>update t\n    set col3 = &lt; some expression here on col1 and col2 &gt;;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11866121, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4mI_ElfJn4U/AAAAAAAAAAI/AAAAAAAAFLI/cRDMCexeFdI/photo.jpg?sz=128", "display_name": "Harrison Knoll", "link": "https://stackoverflow.com/users/11866121/harrison-knoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "closed_date": 1564669102, "answer_count": 1, "score": -2, "last_activity_date": 1564606957, "creation_date": 1564606728, "question_id": 57298759, "link": "https://stackoverflow.com/questions/57298759/how-to-query-perform-operation-and-then-update-on-entire-table", "closed_reason": "Needs more focus", "title": "How to QUERY perform operation and then UPDATE on entire table", "body": "<p>I have a large table with around 10 million rows.  I need to take numbers from 2 columns perform some function and then save the result into a 3rd column.</p>\n\n<p>Is there an efficient way of doing this?  The only way I have been able to do this is to QUERY and save the result into a tuple.  Then in a second for loop iterate through the tuple where the result and unique hash is stored and filter by hash and then update.  </p>\n\n<p>This is very very very slow though!  Is there a better way to do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1564606881, "post_id": 57298753, "comment_id": 101091481, "body": "It seems the problem&#39;s on your side. I&#39;m having no troubles with your script. Else, there&#39;s something important in your actual code you missed in the sample"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 2, "creation_date": 1564606913, "post_id": 57298753, "comment_id": 101091506, "body": "Hint: what does <code>print</code> return? <code>return print(&#39;%0.2f&#39; % laps)</code>"}, {"owner": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 1, "creation_date": 1564606914, "post_id": 57298753, "comment_id": 101091507, "body": "<code>return print(&#39;%0.2f&#39; % laps)</code> see <a href=\"https://stackoverflow.com/questions/750136/how-is-returning-the-output-of-a-function-different-from-printing-it\" title=\"how is returning the output of a function different from printing it\">stackoverflow.com/questions/750136/&hellip;</a>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1564607285, "post_id": 57298753, "comment_id": 101091637, "body": "<i>but if the input is miles_to_laps(1.5) I get ...</i> This makes no sense.  You mean the user literally typed <code>miles_to_laps(1.5)</code> as their input?  Oh, you&#39;re using Python 2.  You want <code>raw_input()</code>, not <code>input()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1564607541, "post_id": 57298859, "comment_id": 101091737, "body": "You tried entering <code>miles_to_laps(1.5)</code> as the input, as he said?"}, {"owner": {"reputation": 19, "user_id": 4898044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3ad2a5adec6b79c99b06c21016cecf?s=128&d=identicon&r=PG&f=1", "display_name": "Clinterific", "link": "https://stackoverflow.com/users/4898044/clinterific"}, "edited": false, "score": 0, "creation_date": 1564613279, "post_id": 57298859, "comment_id": 101093244, "body": "Thank you so much! I returned the variable and moved the print statement down."}], "tags": [], "owner": {"reputation": 11, "user_id": 11486215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98af739c5c40884c05acfb62419a17c?s=128&d=identicon&r=PG&f=1", "display_name": "DoomSkull", "link": "https://stackoverflow.com/users/11486215/doomskull"}, "is_accepted": false, "score": 0, "last_activity_date": 1564607739, "last_edit_date": 1564607739, "creation_date": 1564607345, "answer_id": 57298859, "question_id": 57298753, "link": "https://stackoverflow.com/questions/57298753/how-to-fix-typeerror-unsupported-operand-types-for-nonetype-and-int/57298859#57298859", "title": "How to fix &#39;TypeError: unsupported operand type(s) for -: &#39;NoneType&#39; and &#39;int&#39;&#39;", "body": "<p>it appears the problem is not within the code given, which works perfectly fine by my testing. Maybe it's because whatever function you're trying to use it on does not support a float format</p>\n\n<p>Edit: have just found the problem, you're getting a None value returned from the function, which you cannot subtract from</p>\n\n<p>Fix: return the function into a variable,\nand do such code - \n(float(variable)-6)\nwhich gets you what you wanted where it failed previously</p>\n"}, {"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 0, "last_activity_date": 1564607576, "creation_date": 1564607576, "answer_id": 57298911, "question_id": 57298753, "link": "https://stackoverflow.com/questions/57298753/how-to-fix-typeerror-unsupported-operand-types-for-nonetype-and-int/57298911#57298911", "title": "How to fix &#39;TypeError: unsupported operand type(s) for -: &#39;NoneType&#39; and &#39;int&#39;&#39;", "body": "<p>Your issue is that you're returning <code>None</code> from your function, but some other code expects you to be <code>return</code>ing a number instead.</p>\n\n<p>This line doesn't do what you expect:</p>\n\n<pre><code>return print('%0.2f' % laps)\n</code></pre>\n\n<p>This prints out the number of laps (with two decimal places), but then returns the value returned by <code>print</code>, which is always <code>None</code>. If you want to return the number, you should just do <code>return laps</code>, probably. The caller can handle printing, if that's desired. It may be that you want to both print and return the value, in which case you'll want to use separate statements:</p>\n\n<pre><code>print('%0.2f' % laps)\nreturn laps\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4898044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3ad2a5adec6b79c99b06c21016cecf?s=128&d=identicon&r=PG&f=1", "display_name": "Clinterific", "link": "https://stackoverflow.com/users/4898044/clinterific"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 57298911, "answer_count": 2, "score": -2, "last_activity_date": 1564607954, "creation_date": 1564606710, "last_edit_date": 1564607061, "question_id": 57298753, "link": "https://stackoverflow.com/questions/57298753/how-to-fix-typeerror-unsupported-operand-types-for-nonetype-and-int", "title": "How to fix &#39;TypeError: unsupported operand type(s) for -: &#39;NoneType&#39; and &#39;int&#39;&#39;", "body": "<p>I have been working over an hour and can't get my functions to pass the unit test. My code is as follows:</p>\n\n<pre><code>def miles_to_laps(x):\n  laps = float(x * 4)\n  return print('%0.2f' % laps)\n\nif __name__ == '__main__':\n  user_miles = float(input())\n  miles_to_laps(user_miles)\n</code></pre>\n\n<p>The output is correct but when it performs unit tests I'm getting the correct answer but then it is throwing an error after. I tried this on the next lab as well and it is doing the same thing.. see below.</p>\n\n<p>for example if the input is 2.2\nI get 8.80</p>\n\n<p>but if the input is miles_to_laps(1.5)\nI get</p>\n\n<pre><code>6.00\nTraceback (most recent call last):\n  File \"zyLabsUnitTestRunner.py\", line 10, in &lt;module&gt;\n    passed = test_passed(test_passed_output_file)\n  File \"/home/runner/local/submission/unit_test_student_code/zyLabsUnitTest.py\", line 20, in test_passed\n    diff_amount = student_result - 6\nTypeError: unsupported operand type(s) for -: 'NoneType' and 'int'\n4: Unit test\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1564607361, "post_id": 57298729, "comment_id": 101091667, "body": "So you&#39;re having grayscale and want to convert to RGB? You can use <code>np.repeat(img[..., None], 3, axis=-1)</code>, does that solve your problem? Or do you want something else?"}, {"owner": {"reputation": 2737, "user_id": 7384740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H2BbL.png?s=128&g=1", "display_name": "Dodge", "link": "https://stackoverflow.com/users/7384740/dodge"}, "edited": false, "score": 0, "creation_date": 1564607902, "post_id": 57298729, "comment_id": 101091845, "body": "So you want to save a 2D array as an image? Please elaborate on the constraints of your problem because it is too ambiguous as it stands."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1564607905, "post_id": 57298729, "comment_id": 101091846, "body": "If you have a colormap, say <code>plt.cm.viridis</code> and want to apply it to a normalized array <code>a</code>, you call <code>plt.cm.viridis(a)</code>. If <code>a</code> isn&#39;t normalized yet, you can use <code>norm = plt.Normalize(vmin,vmax)</code> and call <code>plt.cm.viridis(norm(a))</code>."}, {"owner": {"reputation": 51, "user_id": 3458790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b31581f5be66dcfe039fa8f004ec78?s=128&d=identicon&r=PG&f=1", "display_name": "EternaLCompleX", "link": "https://stackoverflow.com/users/3458790/eternalcomplex"}, "edited": false, "score": 0, "creation_date": 1564625657, "post_id": 57298729, "comment_id": 101095491, "body": "Guys, I just edited the question to elaborate my intention of doing this. Please have a look."}, {"owner": {"reputation": 51, "user_id": 3458790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b31581f5be66dcfe039fa8f004ec78?s=128&d=identicon&r=PG&f=1", "display_name": "EternaLCompleX", "link": "https://stackoverflow.com/users/3458790/eternalcomplex"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564627162, "post_id": 57298729, "comment_id": 101095733, "body": "@ImportanceOfBeingErnest The result looks like a float array, how to convert this to RGB image array (with value 0 -&gt; 255)?"}, {"owner": {"reputation": 756, "user_id": 7378795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c23cebd5c33d0c9c6bbadc3ff69c37?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyOnThePage", "link": "https://stackoverflow.com/users/7378795/jimmyonthepage"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564629305, "post_id": 57298729, "comment_id": 101096044, "body": "The float array from @ImportanceOfBeingErnest&#39;s method is constrained between [0,1]. So just multiply the whole array with 255 and convert to int."}, {"owner": {"reputation": 756, "user_id": 7378795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c23cebd5c33d0c9c6bbadc3ff69c37?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyOnThePage", "link": "https://stackoverflow.com/users/7378795/jimmyonthepage"}, "edited": false, "score": 1, "creation_date": 1564629347, "post_id": 57298729, "comment_id": 101096054, "body": "This method will result in a RGBA-mapping though, so you will have to drop the alpha-column manually"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 756, "user_id": 7378795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c23cebd5c33d0c9c6bbadc3ff69c37?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyOnThePage", "link": "https://stackoverflow.com/users/7378795/jimmyonthepage"}, "edited": false, "score": 0, "creation_date": 1564660164, "post_id": 57298729, "comment_id": 101109102, "body": "@JimmyOnThePage I think you need <code>floor(result * 256)</code>, and then replace any occuance of 256 with 255. Else you loose dynamic range; but I&#39;m not 100% sure."}, {"owner": {"reputation": 51, "user_id": 3458790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b31581f5be66dcfe039fa8f004ec78?s=128&d=identicon&r=PG&f=1", "display_name": "EternaLCompleX", "link": "https://stackoverflow.com/users/3458790/eternalcomplex"}, "edited": false, "score": 0, "creation_date": 1564682185, "post_id": 57298729, "comment_id": 101121048, "body": "Thanks guys, the method works nicely :)"}], "owner": {"reputation": 51, "user_id": 3458790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b31581f5be66dcfe039fa8f004ec78?s=128&d=identicon&r=PG&f=1", "display_name": "EternaLCompleX", "link": "https://stackoverflow.com/users/3458790/eternalcomplex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564625601, "creation_date": 1564606552, "last_edit_date": 1564625601, "question_id": 57298729, "link": "https://stackoverflow.com/questions/57298729/matplotlib-direct-mapping-from-2d-array-to-image-rgb-data", "title": "matplotlib direct mapping from 2D array to image RGB data", "body": "<p>I'm looking for away to directly convert my 2D array to the RGB data of matplotlib's matshow() method. What I've acknowledged from the source code is that it uses imshow() method, which sets some hyperparameters and then calls add_image(), in which based on <a href=\"https://github.com/matplotlib/matplotlib/blob/1722bfd6ae4fac707811c8e8dca171138cb5d2a6/lib/matplotlib/axes/_base.py\" rel=\"nofollow noreferrer\">https://github.com/matplotlib/matplotlib/blob/1722bfd6ae4fac707811c8e8dca171138cb5d2a6/lib/matplotlib/axes/_base.py</a> calls append(image). And I'm stuck from this.</p>\n\n<p>So, is there any way to directly map a raw 2D array to image RGB array after matshow() method (with colormap integrated) without calling the plotting?</p>\n\n<p><strong>Edit:</strong> In case that my above explanation is hard to understand, I have a 2D matrix (not a grayscale image array). I'm gonna plot it using matshow() with a certain colormap, and vmin &amp; vmax values. I can extract the image pixel values as a 3D array using fig.canvas.show() and np.fromstring() as in <a href=\"https://stackoverflow.com/questions/35355930/matplotlib-figure-to-image-as-a-numpy-array\">here</a>. However my application has very strict time constraint that plotting the data would take too much time (and also very unstable). So instead of plotting (which sequentially call figure(), subplot(), matshow()...) I want to get the 3D image data directly (through some mapping) from my original 2D matrix. I believe it is possible if I understand how pyplot maps the data, but unfortunately I couldn't find the solution in their source code yet.</p>\n"}, {"tags": ["python", "r", "pandas", "tidyverse"], "answers": [{"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 3, "last_activity_date": 1564607115, "creation_date": 1564607115, "answer_id": 57298824, "question_id": 57298693, "link": "https://stackoverflow.com/questions/57298693/is-there-a-function-workflow-in-r-or-python-to-plot-characters-per-position-for/57298824#57298824", "title": "Is there a function/workflow in R or Python to plot characters per position for word comparisons?", "body": "<p>This can be realized using <code>matplotlib</code> for example. You can obtain the y-coordinates via the builtin <code>ord</code> function. The alphabet can be obtained from <code>string.ascii_lowercase</code> (saves you some typing):</p>\n\n<pre><code>from string import ascii_lowercase\nimport matplotlib.pyplot as plt\n\nwords = ['apples', 'banana', 'orange']\ny_coords = [[ord(c) for c in word] for word in words]\n\nf, ax = plt.subplots()\nfor word, y in zip(words, y_coords):\n    ax.plot(range(len(y)), y, '-o', label=word)\ny_range = [ord('a') - 1, ord('z') + 1]\nax.set_ylim(y_range)\nax.set_yticks(range(*y_range))\nax.set_yticklabels(' ' + ascii_lowercase)\nax.grid()\nax.legend()\nf.savefig('/tmp/example.png', bbox_inches='tight', pad_inches=0)\nplt.show()\n</code></pre>\n\n<p>Which produces the following plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qc4iV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qc4iV.png\" alt=\"Example\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 103366, "user_id": 903061, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMWGQ.jpg?s=128&g=1", "display_name": "Gregor Thomas", "link": "https://stackoverflow.com/users/903061/gregor-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1564607406, "creation_date": 1564607406, "answer_id": 57298874, "question_id": 57298693, "link": "https://stackoverflow.com/questions/57298693/is-there-a-function-workflow-in-r-or-python-to-plot-characters-per-position-for/57298874#57298874", "title": "Is there a function/workflow in R or Python to plot characters per position for word comparisons?", "body": "<p>Here's an R solution. It should work just fine even if the words have different lengths.</p>\n\n<pre><code>x = c(\"apples\", \"banana\", \"orange\")\nd = data.frame(\n  letters = factor(unlist(strsplit(x, \"\")), levels = letters),\n  pos = unlist(lapply(x, function(x) seq(nchar(x)))),\n  word = rep(x, times =  nchar(x))\n)\n\nggplot(d, aes(x = pos, y = letters, color = word)) +\n  geom_line(aes(group = word)) +\n  geom_point() +\n  scale_y_discrete(drop = FALSE)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uoyjk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uoyjk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 29652, "user_id": 7128934, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/oI2SB.jpg?s=128&g=1", "display_name": "d.b", "link": "https://stackoverflow.com/users/7128934/d-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1564608096, "last_edit_date": 1564608096, "creation_date": 1564607475, "answer_id": 57298887, "question_id": 57298693, "link": "https://stackoverflow.com/questions/57298693/is-there-a-function-workflow-in-r-or-python-to-plot-characters-per-position-for/57298887#57298887", "title": "Is there a function/workflow in R or Python to plot characters per position for word comparisons?", "body": "<p>In R</p>\n\n<pre><code>x = c(\"apples\" , \"banana\", \"orange\")\ngraphics.off()\nplot(1, xlim = c(1, max(nchar(x))), ylim = c(1, 26), type = \"n\", yaxt = \"n\")\naxis(2, at = 1:26, labels = letters, las = 2)\ninvisible(sapply(seq_along(x), function(i){\n    s = x[i]\n    lines(x = 1:nchar(s), y = match(unlist(strsplit(s, \"\")), letters),\n           col = i)\n    points(x = 1:nchar(s), y = match(unlist(strsplit(s, \"\")), letters),\n           col = i, pch = 19)\n}))\n#legend(\"topright\", legend = x, pch = 19, col = seq_along(x), lty = 1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/unJyU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/unJyU.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 47, "user_id": 8686783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69db5ef6a2635d56707f9be3e37b489?s=128&d=identicon&r=PG&f=1", "display_name": "bjorndt", "link": "https://stackoverflow.com/users/8686783/bjorndt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 57298874, "answer_count": 3, "score": 1, "last_activity_date": 1564608096, "creation_date": 1564606390, "question_id": 57298693, "link": "https://stackoverflow.com/questions/57298693/is-there-a-function-workflow-in-r-or-python-to-plot-characters-per-position-for", "title": "Is there a function/workflow in R or Python to plot characters per position for word comparisons?", "body": "<p>I have several words of the same length that I'd like to compare at each position.</p>\n\n<h2>Example</h2>\n\n<p>three words \"apples\" , \"banana\", \"orange\"</p>\n\n<h2>Aligned</h2>\n\n<pre><code>apples\nbanana\norange\n</code></pre>\n\n<h2>Plotting</h2>\n\n<p>I'd like to compare these words on an xy-plot, with the y-axis having the entire alphabet along it (A to Z or Z to A) and the x-axis having each position (read from left to right, position 0 to length(word - 1)). A plotted point indicates the character (y-axis) at the given position (x-axis), and these points are connected together by a line.</p>\n\n<p>Can additional information be included in this plot (e.g., coloring of points based on some other category; size/shape of point based on another category)?</p>\n\n<p>Is there a way to prepare this data in Python/R and to display it in the above way?</p>\n\n<hr>\n\n<h2>What I've tried in R</h2>\n\n<p>I've tried making a list that tallies each character per position for each word, however I'm not sure how to iterate over this list to display the characters at each position.</p>\n"}, {"tags": ["python", "python-pptx"], "answers": [{"tags": [], "owner": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "is_accepted": true, "score": 1, "last_activity_date": 1564632097, "creation_date": 1564632097, "answer_id": 57301656, "question_id": 57298690, "link": "https://stackoverflow.com/questions/57298690/is-there-a-way-to-change-the-color-of-all-of-the-cells-in-a-table-in-py-pptx/57301656#57301656", "title": "Is there a way to change the color of all of the cells in a table in py pptx?", "body": "<p>PowerPoint has a notion of \"table-style\" which can be applied to a table by selecting from a gallery in one of the ribbons. A table style allows setting fill color and font-formatting for column-headings and row-headings and allows selection of horizontal banding, vertical banding and cell borders.</p>\n\n<p>There is not yet any API support in <code>python-pptx</code> for applying a table-style to a table. So the approach you mention would probably be the easiest way to accomplish a similar look, at least as far as cell background color is concerned.</p>\n\n<p>Something like:</p>\n\n<pre><code>from pptx.dml.color import RGBColor\n\nfor cell in iter_cells(table):\n    fill = cell.fill\n    fill.solid()\n    fill.fore_color.rgb = RGBColor(255, 0, 0)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11821017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887518df1a18b55bf49421ffa3938907?s=128&d=identicon&r=PG&f=1", "display_name": "KingT753", "link": "https://stackoverflow.com/users/11821017/kingt753"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57301656, "answer_count": 1, "score": 0, "last_activity_date": 1564632097, "creation_date": 1564606369, "question_id": 57298690, "link": "https://stackoverflow.com/questions/57298690/is-there-a-way-to-change-the-color-of-all-of-the-cells-in-a-table-in-py-pptx", "title": "Is there a way to change the color of all of the cells in a table in py pptx?", "body": "<p>I know that there is a way to change the color of one individual cell in a table by naming that cell from that table and then coloring that cell; however I'm looking for a way to change the color of all cells in one table at the same time.</p>\n\n<p>The table is 7x3 and I already asked a question about changing the font size for all cells in the table so I figure the way to change the color of all of the cells is similar to this.</p>\n\n<pre><code>def iter_cells(urbanicity_table):\n    for row in urbanicity_table.rows:\n        for cell in row.cells:\n            yield cell\n\nfor cell in iter_cells(urbanicity_table):\n    for paragraph in cell.text_frame.paragraphs:\n        for run in paragraph.runs:\n            run.font.size = Pt(6)\n\nfor cell in iter_cells(urbanicity_table):\n    for paragraph in cell.text_frame.paragraphs:\n        paragraph.font.size = Pt(6)\n</code></pre>\n\n<p>The table comes pre-colored with a default color scheme of the template PowerPoint used for this slideshow. Please help, thanks!</p>\n"}, {"tags": ["python", "matlab", "numpy"], "comments": [{"owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "edited": false, "score": 0, "creation_date": 1564606634, "post_id": 57298688, "comment_id": 101091387, "body": "Could you add a small example of an <code>A</code> and <code>k</code> input, and the subsequent result that <code>movmin</code> produces?"}, {"owner": {"reputation": 406, "user_id": 11628437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c430b8cec92d1131d5fe965591a84?s=128&d=identicon&r=PG&f=1", "display_name": "desert_ranger", "link": "https://stackoverflow.com/users/11628437/desert-ranger"}, "reply_to_user": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "edited": false, "score": 0, "creation_date": 1564606810, "post_id": 57298688, "comment_id": 101091457, "body": "@Xukrao I will add the change soon."}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1564606863, "post_id": 57298688, "comment_id": 101091472, "body": "Is there any code that you&#39;ve made to attempt to replicate this function? If so, you should that include that, too."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1564607269, "post_id": 57298688, "comment_id": 101091633, "body": "The moving minimum is the <b>erosion</b>. There are image processing toolboxes in Python that implement an erosion. Use those."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11866170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0a80e4a842f7f38484edd3b65428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Zhi Fang", "link": "https://stackoverflow.com/users/11866170/zhi-fang"}, "is_accepted": true, "score": 2, "last_activity_date": 1564673494, "last_edit_date": 1564673494, "creation_date": 1564607652, "answer_id": 57298925, "question_id": 57298688, "link": "https://stackoverflow.com/questions/57298688/python-implementation-of-matlabs-movmin/57298925#57298925", "title": "Python implementation of MATLAB&#39;s movmin", "body": "<p>Code for movMin vector:</p>\n\n<pre><code>def movMin(datas,k):\nresult = np.empty_like(datas)\nstart_pt = 0\nend_pt = int(np.ceil(k/2))\n\nfor i in range(len(datas)):\n    if i &lt; int(np.ceil(k/2)):\n        start_pt = 0\n    if i &gt; len(datas) - int(np.ceil(k/2)):\n        end_pt = len(datas)\n    result[i] = np.min(datas[start_pt:end_pt])\n    start_pt += 1\n    end_pt +=1\nreturn result\n</code></pre>\n\n<p>Test Case:</p>\n\n<pre><code>a = [15,14,11,14,14,4,3,20,4,1]\nmovMin(a,4)\narray([14, 11, 11, 11,  4,  3,  3,  3,  1,  1])\nb = [1,14,11,14,4,11,6,3,20,4,2]\nmovMin(b,11)\narray([1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2])\n</code></pre>\n\n<p>Here's the code and a test case for reference.</p>\n"}, {"tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610266, "last_edit_date": 1564610266, "creation_date": 1564609727, "answer_id": 57299257, "question_id": 57298688, "link": "https://stackoverflow.com/questions/57298688/python-implementation-of-matlabs-movmin/57299257#57299257", "title": "Python implementation of MATLAB&#39;s movmin", "body": "<p>Pandas <a href=\"https://pandas.pydata.org/pandas-docs/stable/getting_started/dsintro.html#dataframe\" rel=\"nofollow noreferrer\">dataframes</a> offer concise, yet powerful, methods for many different types of moving window calculations (or as Pandas calls it: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rolling.html\" rel=\"nofollow noreferrer\">rolling window</a>). Here is a reproduction of the <em>Moving Minimum of Matrix</em> example from MATLAB's <code>movmin</code> documentation: </p>\n\n<pre><code>import pandas as pd\n\nA = pd.DataFrame([[4, 8, 6], [-1, -2, -3], [-1, 3, 4]])\nM = A.rolling(window=3, min_periods=1, center=True, axis=1).min()\n\nprint(M)\n# Output:\n#      0    1    2\n# 0  4.0  4.0  6.0\n# 1 -2.0 -3.0 -3.0\n# 2 -1.0 -1.0  3.0\n</code></pre>\n"}], "owner": {"reputation": 406, "user_id": 11628437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c430b8cec92d1131d5fe965591a84?s=128&d=identicon&r=PG&f=1", "display_name": "desert_ranger", "link": "https://stackoverflow.com/users/11628437/desert-ranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "closed_date": 1565603492, "accepted_answer_id": 57298925, "answer_count": 2, "score": 0, "last_activity_date": 1564673494, "creation_date": 1564606359, "last_edit_date": 1592644375, "question_id": 57298688, "link": "https://stackoverflow.com/questions/57298688/python-implementation-of-matlabs-movmin", "closed_reason": "Duplicate", "title": "Python implementation of MATLAB&#39;s movmin", "body": "<p>I am looking for a Python function that can implement the functionality of <code>movmin</code>. I have included the <a href=\"https://www.mathworks.com/help/matlab/ref/movmin.html\" rel=\"nofollow noreferrer\">Matlab description of <code>movmin</code></a> below.</p>\n<blockquote>\n<p><code>M = movmin(A,k)</code> returns an array of local <code>k</code>-point centered minimum values, where each minimum is calculated over a sliding window of length <code>k</code> across neighboring elements of <code>A</code>. When <code>k</code> is odd, the window is centered about the element in the current position. When <code>k</code> is even, the window is centered about the current and previous elements. The window size is automatically truncated at the endpoints when there are not enough elements to fill the window. When the window is truncated, the minimum is taken over only the elements that fill the window. <code>M</code> is the same size as <code>A</code>.</p>\n<p>If <code>A</code> is a vector, then<code> movmin</code> operates along the length of the vector.</p>\n<p>If <code>A</code> is a multidimensional array, then <code>movmin</code> operates along the first array dimension whose size does not equal 1.</p>\n</blockquote>\n<p>My input is a multi-dimensional array.</p>\n"}, {"tags": ["python", "google-bigquery", "python-bigquery"], "comments": [{"owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "edited": false, "score": 1, "creation_date": 1564606750, "post_id": 57298620, "comment_id": 101091437, "body": "you are missing <code>+</code> after <code>+ cohort_date_str</code> . same for <code>+ table_start_str </code> . etc."}, {"owner": {"reputation": 27, "user_id": 11797002, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d5oFkGvk6Kg/AAAAAAAAAAI/AAAAAAAAAAs/4XGui0aVusg/photo.jpg?sz=128", "display_name": "Akos", "link": "https://stackoverflow.com/users/11797002/akos"}, "reply_to_user": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "edited": false, "score": 0, "creation_date": 1564606936, "post_id": 57298620, "comment_id": 101091515, "body": "Oh, fcuk, thank you, Mikhail!"}, {"owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "edited": false, "score": 0, "creation_date": 1564606989, "post_id": 57298620, "comment_id": 101091535, "body": "no problem. i will move it to answer if this was a case :o)"}], "answers": [{"tags": [], "owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "is_accepted": true, "score": 0, "last_activity_date": 1564607017, "creation_date": 1564607017, "answer_id": 57298807, "question_id": 57298620, "link": "https://stackoverflow.com/questions/57298620/how-to-fix-bigquery-query-in-python-code/57298807#57298807", "title": "How to fix: BigQuery query in Python code", "body": "<p>You are missing <code>+</code> after <code>+ cohort_date_str</code> . same for <code>+ table_start_str</code> . etc.</p>\n"}], "owner": {"reputation": 27, "user_id": 11797002, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d5oFkGvk6Kg/AAAAAAAAAAI/AAAAAAAAAAs/4XGui0aVusg/photo.jpg?sz=128", "display_name": "Akos", "link": "https://stackoverflow.com/users/11797002/akos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "closed_date": 1564643879, "accepted_answer_id": 57298807, "answer_count": 1, "score": 0, "last_activity_date": 1564607017, "creation_date": 1564606032, "last_edit_date": 1564606513, "question_id": 57298620, "link": "https://stackoverflow.com/questions/57298620/how-to-fix-bigquery-query-in-python-code", "closed_reason": "Not suitable for this site", "title": "How to fix: BigQuery query in Python code", "body": "<p>I tried to use variables in a BigQuery query. Syntax error. What could be the problem?</p>\n\n<p>I tried string blocks with ''' but with same result.</p>\n\n<pre><code>\nQUERY = ('WITH activity_data AS ('\n          'SELECT user_pseudo_id, event_timestamp, event_name,' \n          'UNIX_MICROS(TIMESTAMP(\"'+ cohort_date_str'\\\", \"Europe/Budapest\")) AS start_day,'\n          '3600*1000*1000*24*1 AS one_interval_micros'\n          'FROM `events_*`'\n          \"WHERE _table_suffix BETWEEN \\'\"+ table_start_str \"\\' AND \\'\"+ table_end_str1 \"\\'\"  \n          'AND event_name IN (\"z_Added\",\"y_Added\",\"x_Added\")'\n          'AND user_pseudo_id IN ('\n                                    'SELECT user_pseudo_id'\n                                    'FROM `events_*`' \n                                    \"WHERE _table_suffix BETWEEN \\'\"+ table_start_str\"\\' AND \\'\"+ table_end_str2\"\\'\"\n                                    'AND event_name = \"first_open\"'\n                                    'AND event_timestamp BETWEEN UNIX_MICROS(TIMESTAMP(\"'+ cohort_date_str'\", \"Europe/Budapest\"))'\n                                    'AND UNIX_MICROS(TIMESTAMP(\"'+ cohort_date_end_str'\", \"Europe/Budapest\"))'\n\n \"\"\"      \n                                 )\n                                )\n...\n \"\"\"\n\n</code></pre>\n\n<p>Syntax error in line 18:  The little arrow in the Colab points the dash at the end of the line.</p>\n\n<pre><code>LINE 18:\n 'UNIX_MICROS(TIMESTAMP(\"'+ cohort_date_str'\\\", \"Europe/Budapest\")) AS start_day,'\n</code></pre>\n\n<p>Screenshot about the error:\n<a href=\"https://image.prntscr.com/image/rpuNg96iRom9-n7qaTvILA.png\" rel=\"nofollow noreferrer\">https://image.prntscr.com/image/rpuNg96iRom9-n7qaTvILA.png</a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "concatenation", "missing-data"], "comments": [{"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1564607025, "post_id": 57298597, "comment_id": 101091544, "body": "according to the printed output, looks like y and y still are UInt8"}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1564607429, "post_id": 57298597, "comment_id": 101091692, "body": "@Will Are you reading the actual or the expected output?"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1564608470, "post_id": 57298597, "comment_id": 101092013, "body": "It looks to me that they are being reported as being <code>object</code> before the concatenation."}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1564611550, "post_id": 57298597, "comment_id": 101092870, "body": "@Acccumulation If you experiment with commands like <code>t1 = pd.DataFrame(index=[0], data={&#39;x&#39;:[1]}, dtype=&#39;uint8&#39;)</code>, you will see that the type provided is shown next to the line starting with <code>x</code>, and so this is the one specifying the type of <code>x</code>. I am not sure what is the meaning of <code>dtype: object</code> since it is always the same in any DataFrame I have seen. Let us set <code>t3 = pd.concat([t1,t2], join=&#39;outer&#39;, sort=False)</code>, then <code>type(t3.at[0,&#39;x&#39;])</code> is <code>&lt;class &#39;int&#39;&gt;</code> while <code>type(t3.at[1,&#39;x&#39;])</code> is <code>&lt;class &#39;float&#39;&gt;</code> and so <code>t3</code> has elements of different types and that is why the data type is <code>object</code>"}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "edited": false, "score": 0, "creation_date": 1564663032, "post_id": 57298597, "comment_id": 101110762, "body": "Explicit conversion (i.e. <code>pd.concat([t1,t2], join=&#39;outer&#39;, sort=False).astype(&#39;UInt8&#39;).dtypes)</code> does give correct data types. However, on this route, one has to do explicit conversion for each data type of the input DataFrames."}], "owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564607821, "creation_date": 1564605936, "last_edit_date": 1564607821, "question_id": 57298597, "link": "https://stackoverflow.com/questions/57298597/preserving-data-type-while-concatenating-dataframes-with-nullable-integers", "title": "Preserving data type while concatenating DataFrames with nullable integers", "body": "<p>How can one preserve data type while concatenating DataFrames with nullable integers?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># input data\nimport pandas as pd\nt1 = pd.DataFrame(index=[0], data={'x':[1]}, dtype='UInt8')\nt2 = pd.DataFrame(index=[1], data={'y':[1]}, dtype='UInt8')\n\n'''actual result'''\nprint(t1.dtypes)\n# x    UInt8\n# dtype: object\nprint(t2.dtypes)\n# y    UInt8\n# dtype: object\nprint(pd.concat([t1,t2], join='outer', sort=False).dtypes)\n# x    object\n# y    object\n# dtype: object\n</code></pre>\n\n<p>Why are data types of the concatenation result changed to <code>object</code> and how can one make sure that the data types are preserved during concatenation? I.e. I want data types of <code>x</code> and <code>y</code> to remain <code>UInt8</code> after concatenation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>'''expected result'''\nprint(pd.concat([t1,t2], join='outer', sort=False).dtypes)\n# x    UInt8\n# y    UInt8\n# dtype: object\n</code></pre>\n\n<p>Thank you very much for your help!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 3220, "user_id": 11492024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ip64y.png?s=128&g=1", "display_name": "vlemaistre", "link": "https://stackoverflow.com/users/11492024/vlemaistre"}, "is_accepted": false, "score": 2, "last_activity_date": 1570044222, "last_edit_date": 1570044222, "creation_date": 1564607464, "answer_id": 57298885, "question_id": 57298589, "link": "https://stackoverflow.com/questions/57298589/loop-all-columns-for-value-in-any-column/57298885#57298885", "title": "Loop all columns for value in any column", "body": "<p>Here is a way to do it :</p>\n\n<pre><code># First we construct a dictionary linking each feature to its value column\nfeature_value = {'Feature' : 'FeatureValue', 'Feature2' : 'Feature2Value'}\n\n# We iterate over each feature column\nfor feature in feature_value:\n    df.loc[df[feature]=='Cat', feature_value[feature]] = 20\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11864633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6fff0df8afbc52cb5bd18037f11896?s=128&d=identicon&r=PG&f=1", "display_name": "harryhaller", "link": "https://stackoverflow.com/users/11864633/harryhaller"}, "is_accepted": false, "score": 0, "last_activity_date": 1564610131, "last_edit_date": 1564610131, "creation_date": 1564609813, "answer_id": 57299273, "question_id": 57298589, "link": "https://stackoverflow.com/questions/57298589/loop-all-columns-for-value-in-any-column/57299273#57299273", "title": "Loop all columns for value in any column", "body": "<p>You currently have a wide data structure. To solve your problem in an elegant way, you should convert to a long data structure. I don't know what you are doing with your data, but the long form is often much easier to deal with.</p>\n\n<p>You can do it like this</p>\n\n<pre><code>import pandas as np\nfrom itertools import chain\n\n# set up your sample data\ndta = {'Feature': ['Cat', 'Fish'], 'FeatureValue': [1, 2], 'Feature2': ['Dog', 'Cat'], 'Feature2Value': [3, 1]}\ndf = pd.DataFrame(data=dta)\n\n# relabel your columns to be able to apply method `wide_to_long`\n# this is a little ugly here only because your column labels are not wisely chosen\n# if you had [Feature1,FeatureValue1,Feature2,FeatureValue2] as column labels,\n# you could get rid of this part\ncolumns = ['Feature', 'FeatureValue'] * int(len(df.columns)/2)\nidentifier = zip(range(int(len(df.columns)/2)), range(int(len(df.columns)/2)))\nidentifier = list(chain(*identifier))\ncolumns = ['{}{}'.format(i,j) for i, j in zip(columns, identifier)] \ndf.columns = columns\n\n# generate result\ndf['feature'] = df.index\ndf_long = pd.wide_to_long(df, stubnames=['Feature', 'FeatureValue'], i='feature', j='id')\n</code></pre>\n\n<p>Now, you converted your data from</p>\n\n<pre><code>  Feature  FeatureValue Feature2  Feature2Value\n0     Cat             1      Dog              3\n1    Fish             2      Cat              1\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>           Feature  FeatureValue\nfeature id                      \n0       0      Cat             1\n1       0     Fish             2\n0       1      Dog             3\n1       1      Cat             1\n</code></pre>\n\n<p>This allows you to answer your problem in a single line, no loops:</p>\n\n<pre><code>df_long.loc[df_long['Feature'] == 'Cat', 'FeatureValue'] = 20\n</code></pre>\n\n<p>This yields</p>\n\n<pre><code>           Feature  FeatureValue\nfeature id                      \n0       0      Cat            20\n1       0     Fish             2\n0       1      Dog             3\n1       1      Cat            20\n</code></pre>\n\n<p>You can easily go back to your wide format using the same method.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8570312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570044222, "creation_date": 1564605897, "last_edit_date": 1564606063, "question_id": 57298589, "link": "https://stackoverflow.com/questions/57298589/loop-all-columns-for-value-in-any-column", "title": "Loop all columns for value in any column", "body": "<p>I'm trying to loop through all columns in a dataframe to find where a \"Feature\" condition is met in order to alter the FeatureValue. So if my dataframe(df) looks like below:</p>\n\n<pre><code>Feature    FeatureValue    Feature2    Feature2Value\n    Cat               1         Dog                3\n    Fish              2         Cat                1\n</code></pre>\n\n<p>I want to find where Feature=Cat or Feature2=Cat and change FeatureValue and Feature2Value to 20. I tried the below to get started, but am struggling.</p>\n\n<pre><code>for column in df:\n    if df.loc[df[column] == \"Cat\"]:\nprint(column)\n</code></pre>\n\n<p>The solution would look like:</p>\n\n<pre><code>Feature    FeatureValue    Feature2    Feature2Value\n    Cat              20         Dog                3\n    Fish              2         Cat               20\n</code></pre>\n"}, {"tags": ["python", "excel", "excel-formula", "openpyxl"], "comments": [{"owner": {"reputation": 525, "user_id": 11591931, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_bwex08hZkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3YCdJxr49lBvfUaNMzAjQFu_30g/mo/photo.jpg?sz=128", "display_name": "Alex Dana", "link": "https://stackoverflow.com/users/11591931/alex-dana"}, "edited": false, "score": 0, "creation_date": 1564605880, "post_id": 57298554, "comment_id": 101091134, "body": "I already saw this post but don&#39;t understand how to make it work <a href=\"https://stackoverflow.com/questions/52488989/keep-the-nature-of-array-formulas-when-using-openpyxl\" title=\"keep the nature of array formulas when using openpyxl\">stackoverflow.com/questions/52488989/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2412, "user_id": 854600, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc74667b23c2272b40b3db8b564e921d?s=128&d=identicon&r=PG", "display_name": "Vertex", "link": "https://stackoverflow.com/users/854600/vertex"}, "edited": false, "score": 0, "creation_date": 1582293279, "post_id": 57441549, "comment_id": 106737728, "body": "please, can you explain, how the attribute <code>ref</code> work? I&#39;ve put for example a formula <code>ws[&#39;D1&#39;] = &quot;=SUM(A1:A5*B1:B5)&quot;</code> and then <code>ws.formula_attributes[&#39;D1&#39;] = {&#39;t&#39;: &#39;array&#39;, &#39;ref&#39;: &quot;D1:D1&quot;}</code>. This worked, but can I always set <code>ref</code> to the cell&#39;s coordinate?"}, {"owner": {"reputation": 2412, "user_id": 854600, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc74667b23c2272b40b3db8b564e921d?s=128&d=identicon&r=PG", "display_name": "Vertex", "link": "https://stackoverflow.com/users/854600/vertex"}, "edited": false, "score": 0, "creation_date": 1582296248, "post_id": 57441549, "comment_id": 106739383, "body": "I&#39;ve found a description of the <code>ref</code> attribute <a href=\"https://docs.microsoft.com/en-gb/dotnet/api/documentformat.openxml.spreadsheet.cellformula?view=openxml-2.8.1\" rel=\"nofollow noreferrer\">here</a> &quot;Range of cells which the formula applies to.[...]&quot; but this doesn&#39;t helps me so much :)"}], "tags": [], "owner": {"reputation": 493, "user_id": 5860375, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8XQCqFBOgA/AAAAAAAAAAI/AAAAAAAAABE/fRY5lM8WNjA/photo.jpg?sz=128", "display_name": "ConSod", "link": "https://stackoverflow.com/users/5860375/consod"}, "is_accepted": false, "score": 1, "last_activity_date": 1565435080, "creation_date": 1565435080, "answer_id": 57441549, "question_id": 57298554, "link": "https://stackoverflow.com/questions/57298554/how-to-insert-array-formula-in-an-excel-sheet-with-openpyxl/57441549#57441549", "title": "How to insert array formula in an Excel sheet with openpyxl?", "body": "<p>Use the <code>worksheet.formula_attributes</code> to set the array formula. Place the formula in the desired cell, A1 for this example. Then set the <code>formula_attributes</code> to the cell range you want to apply the formula to.</p>\n\n<pre><code>ws[\"A1\"] = \"=B4:B8\"\nws.formula_attributes['A1'] = {'t': 'array', 'ref': \"A1:A5\"}\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 11591931, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_bwex08hZkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3YCdJxr49lBvfUaNMzAjQFu_30g/mo/photo.jpg?sz=128", "display_name": "Alex Dana", "link": "https://stackoverflow.com/users/11591931/alex-dana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1565435080, "creation_date": 1564605759, "question_id": 57298554, "link": "https://stackoverflow.com/questions/57298554/how-to-insert-array-formula-in-an-excel-sheet-with-openpyxl", "title": "How to insert array formula in an Excel sheet with openpyxl?", "body": "<p>I'm using OpenPyxl to create and modify an Excel sheet.\nI have the following formula in Excel :</p>\n\n<pre><code>=(SUM(IF(LEFT(Balances!$B$2:$B$100,LEN($B4))=$B4,Balances!$D$2:$D$100)))\n</code></pre>\n\n<p>This formula which is an \"array formula\" is working but in order to write it by hand, I have to finish with CTRL+SHIFT+ENTER (because it's an array formula).\nThis transform then the formula as follow :</p>\n\n<pre><code>{=(SUM(IF(LEFT(Balances!$B$2:$B$100,LEN($B4))=$B4,Balances!$D$2:$D$100)))}\n</code></pre>\n\n<p>I want to be able to write this formula via OpenPyxl with the following code :</p>\n\n<pre><code>    sheet.cell(row=j, column=i).value = '{=(SUM(IF(LEFT(Balances!$B$2:$B$100,LEN($B4))=$B4,Balances!$D$2:$D$100)))}'\n</code></pre>\n\n<p>However, it doesn't work. OpenPyxl can't manage it. It give me the formula writed but not working.</p>\n\n<p>I could do it with XLSX Writer\n<a href=\"https://xlsxwriter.readthedocs.io/example_array_formula.html\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/example_array_formula.html</a>\nHowever XLSX writer doesn't work with already created files.</p>\n\n<p>I don't see wich path to follow.</p>\n"}, {"tags": ["python", "list", "for-loop", "data-structures", "programming-languages"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1564606267, "post_id": 57298535, "comment_id": 101091274, "body": "<a href=\"https://stackoverflow.com/questions/529424/traverse-a-list-in-reverse-order-in-python\">Traverse a list in reverse order in Python</a>"}, {"owner": {"reputation": 81, "user_id": 11865168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48ae2a6a9c0f05dbc989d2be84dbe110?s=128&d=identicon&r=PG&f=1", "display_name": "pyQueen", "link": "https://stackoverflow.com/users/11865168/pyqueen"}, "edited": false, "score": 0, "creation_date": 1564608289, "post_id": 57298535, "comment_id": 101091952, "body": "Use <code>for val in a: print(a[-1])</code> to get the output you want."}], "owner": {"reputation": 1, "user_id": 8286131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QQLxqVi3RsM/AAAAAAAAAAI/AAAAAAAAAlU/t_7dKGdPYPE/photo.jpg?sz=128", "display_name": "Kirit Bhatt", "link": "https://stackoverflow.com/users/8286131/kirit-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 1, "closed_date": 1564606087, "answer_count": 0, "score": 0, "last_activity_date": 1564607903, "creation_date": 1564605667, "last_edit_date": 1564607903, "question_id": 57298535, "link": "https://stackoverflow.com/questions/57298535/python-code-weird-output-can-anyone-please-give-an-explanation", "closed_reason": "Duplicate", "title": "Python code weird output. Can anyone please give an explanation?", "body": "<pre><code>a=[0,1,2,3]\nfor a[-1] in a: \n    print a[-1]\n</code></pre>\n\n<blockquote>\n  <p>output:-\n  0\n  1\n  2\n  2</p>\n  \n  <p>expected output:-\n  3\n  3\n  3\n  3</p>\n</blockquote>\n\n<p>Such weird output is coming only when the index in the for loop and print statement are same. Whenever they are not matching the returned output is as expected.</p>\n"}, {"tags": ["python", "pygame", "pycharm"], "comments": [{"owner": {"reputation": 347, "user_id": 10704977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gJD8VR5j_g8/AAAAAAAAAAI/AAAAAAAAAHo/vB6gPIaznKw/photo.jpg?sz=128", "display_name": "Steven Barnard", "link": "https://stackoverflow.com/users/10704977/steven-barnard"}, "edited": false, "score": 0, "creation_date": 1564605634, "post_id": 57298465, "comment_id": 101091033, "body": "Check this link out friend: <a href=\"https://stackoverflow.com/questions/28453854/add-pygame-module-in-pycharm-ide\">https://stackoverflow.com/questions/28453854/add-pygame-modu&zwnj;&#8203;le-in-pycharm-ide</a>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1564606950, "post_id": 57298465, "comment_id": 101091520, "body": "you may have two Python installed and <code>pip</code> install it in different Python then you use in Project. In PyCharm in <code>File&gt;Settings&gt;Project:...&gt;Project Interpreter</code> you can see what Python is used in project. There is also list of installed modules, and button <code>+</code> (green plus) to install other modules."}], "owner": {"reputation": 363, "user_id": 1681415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/koyho.jpg?s=128&g=1", "display_name": "Mudkip", "link": "https://stackoverflow.com/users/1681415/mudkip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "closed_date": 1610097687, "answer_count": 0, "score": 0, "last_activity_date": 1610097708, "creation_date": 1564605277, "question_id": 57298465, "link": "https://stackoverflow.com/questions/57298465/problems-on-installing-pygame-on-pycharm", "closed_reason": "Duplicate", "title": "Problems on installing pygame on Pycharm", "body": "<p>I've already tried the both methods (in this case, by using pip or by adding the package directly into the Project Interpreter), but none of them seemed to work. The pip method went well on the CMD (apparently at least), but then I wasn't being able to run my code with \"import pygame\" (and it also wasn't on the Interpreter's list).</p>\n\n<p>Also, when I try to add it through the Interpreter, it is simply not there!</p>\n\n<p>What am I doing wrong? Is there any configuration setup that I am forgetting to set?</p>\n"}, {"tags": ["python", "exception", "solid-principles"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1564605389, "post_id": 57298443, "comment_id": 101090937, "body": "However, <code>try: raise MyCustomException() except KeyError: print(&#39;got it&#39;)</code> will work. Can you see why?"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 1, "creation_date": 1564605404, "post_id": 57298443, "comment_id": 101090945, "body": "<code>MyCustomException </code> inherits from <code>KeyError</code>, not the other way around"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1564606039, "post_id": 57298443, "comment_id": 101091195, "body": "All exceptions ultimately inherit from <code>Exception</code>,  so you can see why it would be problematic if the behaviour worked as you suggest"}, {"owner": {"reputation": 1136, "user_id": 2151387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a1b39201487feb3cbca1cc117aca772?s=128&d=identicon&r=PG", "display_name": "dikkini", "link": "https://stackoverflow.com/users/2151387/dikkini"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1564609638, "post_id": 57298443, "comment_id": 101092384, "body": "@Chris_Rands it is not a problem in Java."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1564612327, "post_id": 57298443, "comment_id": 101093040, "body": "i never mentioned Java"}], "answers": [{"comments": [{"owner": {"reputation": 1136, "user_id": 2151387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a1b39201487feb3cbca1cc117aca772?s=128&d=identicon&r=PG", "display_name": "dikkini", "link": "https://stackoverflow.com/users/2151387/dikkini"}, "edited": false, "score": 0, "creation_date": 1564605390, "post_id": 57298481, "comment_id": 101090938, "body": "it&#39;s a good way, but i want to know about SOLID Liskov principle behaviour"}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "reply_to_user": {"reputation": 1136, "user_id": 2151387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a1b39201487feb3cbca1cc117aca772?s=128&d=identicon&r=PG", "display_name": "dikkini", "link": "https://stackoverflow.com/users/2151387/dikkini"}, "edited": false, "score": 1, "creation_date": 1564605688, "post_id": 57298481, "comment_id": 101091053, "body": "See my edit. I&#39;ve tried to clarify what Liskov Substitution means. Your class doesn&#39;t affect it at all."}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 1, "last_activity_date": 1564605649, "last_edit_date": 1564605649, "creation_date": 1564605350, "answer_id": 57298481, "question_id": 57298443, "link": "https://stackoverflow.com/questions/57298443/solid-in-python/57298481#57298481", "title": "SOLID in Python", "body": "<p>You'll need to explicitly throw your custom exception.</p>\n\n<pre><code>class MyCustomException(KeyError):\n  pass\n\ndef method(d):\n  if not 'name' in d:\n    raise MyCustomException('name not found!')\n  else:\n    return d['name']\n\ntry:\n  d = {\"value\": 1}\n  method(d)\nexcept MyCustomException:\n  print('got it')\n</code></pre>\n\n<p>Liskov Substitution essentially means: If I have a class, and I subclass it, then that subclass should be able to work exactly the same way as the super class, if used as a super class.</p>\n\n<p>In other words, I create a class <code>Baker</code> that can accept white bread and wheat bread. If I subclass <code>Baker</code> into a class <code>ArtisanBaker</code> that only accepts white bread, I've now broken Liskov Substitution. I can no longer use <code>ArtisanBaker</code> simply as a <code>Baker</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 1, "last_activity_date": 1564605913, "creation_date": 1564605913, "answer_id": 57298593, "question_id": 57298443, "link": "https://stackoverflow.com/questions/57298443/solid-in-python/57298593#57298593", "title": "SOLID in Python", "body": "<p>Quote from the docs, <a href=\"https://docs.python.org/3/tutorial/errors.html\" rel=\"nofollow noreferrer\">section 8.3</a>:</p>\n\n<blockquote>\n  <p>A class in an except clause is compatible with an exception if it is the same class or a base class thereof (but not the other way around \u2014 <strong>an except clause listing a derived class is not compatible with a base class</strong>).</p>\n</blockquote>\n\n<p>Yet this code doesn't break the substitution principle as the child class certainly provides the same methods as the base class, if they aren't overridden in a way that deviates from the base class' behavior, but your code doesn't do that.</p>\n\n<p>BTW, you don't have to implement any methods to \"rename\" a class in such a way. You can simply do this:</p>\n\n<pre><code>class MyCustomException(KeyError):\n    ...\n</code></pre>\n"}], "owner": {"reputation": 1136, "user_id": 2151387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a1b39201487feb3cbca1cc117aca772?s=128&d=identicon&r=PG", "display_name": "dikkini", "link": "https://stackoverflow.com/users/2151387/dikkini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1564605913, "creation_date": 1564605173, "last_edit_date": 1564605355, "question_id": 57298443, "link": "https://stackoverflow.com/questions/57298443/solid-in-python", "title": "SOLID in Python", "body": "<p>Sorry if my question bad or wrong, but i want to know.</p>\n\n<pre><code>class MyCustomException(KeyError):\n  def __init__(self, *args):\n    super().__init__(*args)\n\n\ndef method(d):\n  return d['name']\n\ntry:\n  d = {\"value\": 1}\n  method(d)\nexcept MyCustomException:\n  print('got it')\n</code></pre>\n\n<p>Aaaand it does not work! I cant catch exception. Does this behaviour breaks SOLID priciple, Liskov substitution principle?</p>\n"}, {"tags": ["python", "python-requests", "phishing"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1564605212, "post_id": 57298432, "comment_id": 101090873, "body": "By &quot;malicious URL&quot;, do you mean a URL that points to a page with malicious content, a URL that attempts to perform CSRF, or something else?"}, {"owner": {"reputation": 45, "user_id": 11639070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCnTK.jpg?s=128&g=1", "display_name": "Chris Combs", "link": "https://stackoverflow.com/users/11639070/chris-combs"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1564612937, "post_id": 57298432, "comment_id": 101093182, "body": "Any of the above? I&#39;m not really sure what a lot of the malicious links are trying to do. Most of them are just malicious content, but I can&#39;t say for certain there aren&#39;t CSRF attacks or things like that."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11639070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCnTK.jpg?s=128&g=1", "display_name": "Chris Combs", "link": "https://stackoverflow.com/users/11639070/chris-combs"}, "edited": false, "score": 0, "creation_date": 1564673981, "post_id": 57299878, "comment_id": 101117309, "body": "How does the list comprehension statement you&#39;ve made know what to be looping over? I&#39;m not familiar with using the underscore the way that you&#39;ve done it here. BTW for anyone who&#39;s not familiar with this syntax, you can just do: <code>[r.url for r in resp.history]</code>"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 45, "user_id": 11639070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCnTK.jpg?s=128&g=1", "display_name": "Chris Combs", "link": "https://stackoverflow.com/users/11639070/chris-combs"}, "edited": false, "score": 1, "creation_date": 1564674433, "post_id": 57299878, "comment_id": 101117591, "body": "In the shell, <code>_</code> is a shorthand for the last result @ChrisCombs"}], "tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 3, "last_activity_date": 1564674444, "last_edit_date": 1564674444, "creation_date": 1564614362, "answer_id": 57299878, "question_id": 57298432, "link": "https://stackoverflow.com/questions/57298432/safely-handling-potentially-malicious-urls-using-requests/57299878#57299878", "title": "Safely handling potentially malicious URLs using Requests", "body": "<p>You could send a HEAD request with <code>allow_redirects=True</code>:</p>\n\n<pre><code>&gt;&gt;&gt; url = \"http://stackoverflow.com/q/57298432/7954504\"\n&gt;&gt;&gt; resp = requests.request(\n...     \"HEAD\",\n...     url,\n...     allow_redirects=True\n... )\n&gt;&gt;&gt; resp.history\n[&lt;Response [301]&gt;, &lt;Response [302]&gt;]\n&gt;&gt;&gt; [i.url for i in resp.history]\n['http://stackoverflow.com/q/57298432/7954504', 'https://stackoverflow.com/q/57298432/7954504']\n</code></pre>\n\n<p>Not saying this is a cure-all.  Something else to consider is adding some heuristics on the URL itself, in the spirit of \"you know a crappy-looking URL when you see one.\"  (I like <a href=\"https://github.com/aio-libs/yarl/\" rel=\"nofollow noreferrer\"><code>yarl</code></a> for analyzing URLs.)  For instance:</p>\n\n<ul>\n<li>What's the file extension?</li>\n<li>Is the URl using a nonstandard port?</li>\n<li>Is the domain an IPv4/6 address or localhost?</li>\n<li>Are any of the query parameter values themselves valid URLs?</li>\n</ul>\n\n<p>...and so on.</p>\n"}], "owner": {"reputation": 45, "user_id": 11639070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCnTK.jpg?s=128&g=1", "display_name": "Chris Combs", "link": "https://stackoverflow.com/users/11639070/chris-combs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 2, "accepted_answer_id": 57299878, "answer_count": 1, "score": 4, "last_activity_date": 1564674444, "creation_date": 1564605134, "last_edit_date": 1564613220, "question_id": 57298432, "link": "https://stackoverflow.com/questions/57298432/safely-handling-potentially-malicious-urls-using-requests", "title": "Safely handling potentially malicious URLs using Requests", "body": "<p>I'm building a tool for analyzing emails to try to determine if they're phishing or not and I'd like to see if any of the links in the email redirect, and if they do how many times and to where. I'm currently using the requests library to handle all of that stuff and in order to get a link's history you have to call .get(). Is this safe to do on potentially malicious URLs, and if not is there any way I can get the redirect information without putting my computer at risk?</p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1564606941, "post_id": 57298402, "comment_id": 101091516, "body": "This doesn&#39;t answer your question? <a href=\"https://stackoverflow.com/questions/53645882/pandas-merging-101\">stackoverflow.com/questions/53645882/pandas-merging-101</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11639342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214428445925992/picture?type=large", "display_name": "Echhit Joshi", "link": "https://stackoverflow.com/users/11639342/echhit-joshi"}, "edited": false, "score": 0, "creation_date": 1564606265, "post_id": 57298578, "comment_id": 101091273, "body": "Thank you @eva-vw... i will try this solution"}], "tags": [], "owner": {"reputation": 622, "user_id": 10239974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9b732919673bb063492b412a98930a?s=128&d=identicon&r=PG&f=1", "display_name": "eva-vw", "link": "https://stackoverflow.com/users/10239974/eva-vw"}, "is_accepted": false, "score": 0, "last_activity_date": 1564605857, "creation_date": 1564605857, "answer_id": 57298578, "question_id": 57298402, "link": "https://stackoverflow.com/questions/57298402/pandas-merge-multiple-dataframes-on-index-and-column/57298578#57298578", "title": "Pandas Merge multiple dataframes on index and column", "body": "<p>I'm not sure how your dictionaries are set up so you will most likely need to modify this but I'd try something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for sensorDevice in dictOfSensor:\n    df = dictOfSensor[sensorDevice]\n    # set df index to match the main_df index\n    df = df.set_index(['DateTime'])\n    # try join (not merge) when combining on index\n    main_df = main_df.join(df, how='outer')\n</code></pre>\n\n<p>Alternatively, if the <code>id</code> column is very important you can try to first reset your main_df index and then merging.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>main_df = main_df.reset_index()\nfor sensorDevice in dictOfSensor:\n    df = dictOfSensor[sensorDevice]\n    # try to merge on both columns\n    main_df = main_df.merge(df, how='outer', on=['DateTime', 'id])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11639342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214428445925992/picture?type=large", "display_name": "Echhit Joshi", "link": "https://stackoverflow.com/users/11639342/echhit-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564605857, "creation_date": 1564604966, "last_edit_date": 1564605059, "question_id": 57298402, "link": "https://stackoverflow.com/questions/57298402/pandas-merge-multiple-dataframes-on-index-and-column", "title": "Pandas Merge multiple dataframes on index and column", "body": "<p>I am trying to Merge multiple dataframes to one main dataframe using the datetime index and id from main dataframe and datetime and id columns from other dataframes</p>\n\n<h1>Main dataframe</h1>\n\n<pre><code>DateTime | id | data\n(Df.Index)\n---------|----|------\n2017-9-8 |  1 |  a\n2017-9-9 |  2 |  b\n</code></pre>\n\n<h1>df1</h1>\n\n<pre><code>id | data1 | data2 | DateTime\n---|-------|-------|---------\n1  |  a    |   c   | 2017-9-8\n2  |  b    |   d   | 2017-9-9\n5  |  a    |   e   | 2017-9-20\n</code></pre>\n\n<h1>df2</h1>\n\n<pre><code>id | data3 | data4 | DateTime\n---|-------|-------|---------\n1  |  d    |   c   | 2017-9-8\n2  |  e    |   a   | 2017-9-9\n4  |  f    |   h   | 2017-9-20\n</code></pre>\n\n<p>The main dataframe and the other dataframes are in different dictionaries. I want to read from each dictionary and merge when the joining condition (datetime, id) is met</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for sleep in dictOfSleep#MainDataFrame:\n    for sensorDevice in dictOfSensor#OtherDataFrames:\n        try:\n  dictOfSleep[sleep]=pd.merge(dictOfSleep[sleep],dictOfSensor[sensorDevice], how='outer',on=['DateTime','id'])\n\n        except:\n            print('Join could not be done')\n\n</code></pre>\n\n<h1>Desired Output:</h1>\n\n<pre><code>DateTime | id | data | data1 | data2 | data3 | data4\n(Df.Index)\n---------|----|------|-------|-------|-------|-------|\n2017-9-8 |  1 |  a   |  a    |   c   |   d   |   c   |\n2017-9-9 |  2 |  b   |  b    |   d   |   e   |   a   |\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564633888, "post_id": 57298374, "comment_id": 101096891, "body": "Your code works fine for me on OSX when I add just enough code to be able to call your function and then run the code from the command line."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564751952, "post_id": 57298374, "comment_id": 101144520, "body": "@BryanOakley: Hmm. Well, I get the problem when I&#39;m calling this code from within PyCharm, either when running from another script or from using PyCharm&#39;s iPython terminal. If I call python or ipython from the command line and import the containing module, and then call this function, I still get the same problem."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564752926, "post_id": 57298374, "comment_id": 101145100, "body": "Note that importing <code>sys</code> and putting <code>sys.exit()</code> after <code>root.destroy()</code> does make the screen go away; the problem is that this code is called in the middle of a script, and I can&#39;t have Python going away just then!"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564753390, "post_id": 57298374, "comment_id": 101145399, "body": "If the problem only happens in pycharm or only in iPython&#39;s terminal, you need to add those details in your question."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564753702, "post_id": 57298374, "comment_id": 101145554, "body": "@BryanOakley: Well, maybe. What are the exact steps you&#39;re taking that don&#39;t produce the problem?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564753890, "post_id": 57298374, "comment_id": 101145663, "body": "I ran <code>python the_script.py</code> from a terminal after adding just enough code to make it run."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564753997, "post_id": 57298374, "comment_id": 101145722, "body": "So in your case, Python is exiting after you&#39;re done, right? When I exit ipython or python, my tkinter window always goes away. The problem appears to be that, for whatever reason, the code above does not make the tkinter window go away unless I also make Python go away. But making a tkinter window disappear without exiting Python is surely a very common use case."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754202, "post_id": 57298374, "comment_id": 101145847, "body": "It goes away when I run from a terminal. I can also open up a python prompt, import the code, and when I press return the window goes away without having to exit python."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754256, "post_id": 57298374, "comment_id": 101145882, "body": "@BryanOakley: Ok, well, there&#39;s something different in your environment from mine, because it behaves differently for me."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754365, "post_id": 57298374, "comment_id": 101145955, "body": "Part of the problem may be that you haven&#39;t provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so I have to guess at part of the process. It would help if you could create a complete <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which we can run from a command-line prompt without having to edit the code. It would also help to let us know if you&#39;re using the python provided by OSX or whether you&#39;re using some other version of python."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754424, "post_id": 57298374, "comment_id": 101145994, "body": "I have made a couple of changes to the code recently; is it a MWE now?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754493, "post_id": 57298374, "comment_id": 101146035, "body": "You can answer your own question by saving the code from the question to a file, and then run <code>python the_file.py</code>. The answer is &quot;no&quot;."}, {"owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564754891, "post_id": 57298374, "comment_id": 101146292, "body": "Ok, it&#39;s a MWE. I can confirm that if I run <code>python test_username</code>, the window goes away. If I run <code>python</code> and import <code>test_username</code>, the window does not go away."}], "owner": {"reputation": 566, "user_id": 1379830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41a2dab9d5534d4d1fd89b2eb11499?s=128&d=identicon&r=PG", "display_name": "Adrian Keister", "link": "https://stackoverflow.com/users/1379830/adrian-keister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564759490, "creation_date": 1564604836, "last_edit_date": 1564759490, "question_id": 57298374, "link": "https://stackoverflow.com/questions/57298374/get-tkinter-root-to-disappear-on-a-mac", "title": "Get tkinter root to disappear on a Mac", "body": "<p>I'm working with Python 3.7 on a Mac, version 10.14.6. I'm using a simple little tkinter screen to get a username and password so as not to hard-code it. My code is as follows:</p>\n\n<pre><code>import tkinter as tk\n\nusername = ''\npassword = ''\n\n\ndef get_username_and_password() -&gt; list:\n    \"\"\"\n    This function sets the username and password, if either is empty.\n    :return: List as [username, password]\n    \"\"\"\n\n    # GUI code to obtain username and password\n    root = tk.Tk()\n\n    # Prompt for the user to enter the username.\n    username_label = tk.Label(root, text='Username:')\n    username_label.pack()\n\n    # String entry box to get the username.\n    username_string_entry = tk.Entry(root, text='',\n                                     justify=tk.CENTER,\n                                     width=28)\n    username_string_entry.pack()\n\n    # Default will be Adrian Keister.\n    username_string_entry.insert(0, 'm210028')\n\n    # Prompt for the user to enter the password.\n    password_label = tk.Label(root, text='Password:')\n    password_label.pack()\n\n    # String entry box to get the password.\n    password_string_entry = tk.Entry(root, \n                                     text='',\n                                     justify=tk.CENTER,\n                                     width=28, \n                                     show='*')\n    password_string_entry.pack()\n\n    # Make the password string entry box get the focus.\n    password_string_entry.focus_set()\n\n    def on_enter(event=None) -&gt; None:\n        \"\"\"\n        This function gets the string entries, and quits this tiny\n        GUI.\n        :param: event: A throw-away argument, because we want to be\n                       able to call this function on button click or\n                       when the user hits Enter.\n        :return: Nothing.\n        \"\"\"\n        global username\n        global password\n        nonlocal username_string_entry\n        nonlocal password_string_entry\n        nonlocal root\n\n        # Get the strings from the Entry widgets.\n        username = username_string_entry.get()\n        password = password_string_entry.get()\n\n        # Quit the GUI.\n        root.withdraw()\n        root.destroy()\n\n        return None\n\n    # Make sure the KP Enter or Return key locks in the address.\n    root.bind('&lt;Return&gt;', on_enter)\n    root.bind('&lt;KP_Enter&gt;', on_enter)\n    root.title('Please enter your username and password:')\n\n    # Run the little GUI.\n    root.mainloop()\n\n    return [username, password]\n\n\nprint(get_username_and_password())\n</code></pre>\n\n<p>The code definitely gets the username and password, but it's buggy: the screen doesn't disappear when I hit the enter/return key unless I also exit Python. Any idea why this is happening? An additional note: the <code>root.withdraw()</code> does not appear to minimize the tkinter window, either, although that's definitely what it's supposed to do.</p>\n\n<p>A note on OS's: in Windows 10 and Xubuntu Linux 16.04, this problem does not arise. I can run <code>python test_username.py</code> or do <code>import test_username</code> from inside Python, and it works as expected either way - from Windows or Xubuntu Linux.</p>\n"}, {"tags": ["python", "nlp", "nltk", "spacy"], "comments": [{"owner": {"reputation": 5677, "user_id": 1592364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9fRvr.jpg?s=128&g=1", "display_name": "Ankur Sinha", "link": "https://stackoverflow.com/users/1592364/ankur-sinha"}, "edited": false, "score": 0, "creation_date": 1564645369, "post_id": 57298367, "comment_id": 101101042, "body": "An example would be great."}, {"owner": {"reputation": 780, "user_id": 2198727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344bbb6b1aeb3adc0eabee50682483b5?s=128&d=identicon&r=PG", "display_name": "ongenz", "link": "https://stackoverflow.com/users/2198727/ongenz"}, "edited": false, "score": 0, "creation_date": 1564646401, "post_id": 57298367, "comment_id": 101101573, "body": "@acodejdatam do you mean N, V and V, N bi-grams?"}, {"owner": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "reply_to_user": {"reputation": 780, "user_id": 2198727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344bbb6b1aeb3adc0eabee50682483b5?s=128&d=identicon&r=PG", "display_name": "ongenz", "link": "https://stackoverflow.com/users/2198727/ongenz"}, "edited": false, "score": 0, "creation_date": 1564687740, "post_id": 57298367, "comment_id": 101123423, "body": "@ongenz, yes.  I only want noun verbs and verb noun bigrams."}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 11643825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208850a10914ec0e698fac6b17de09d1?s=128&d=identicon&r=PG&f=1", "display_name": "nag", "link": "https://stackoverflow.com/users/11643825/nag"}, "is_accepted": false, "score": 1, "last_activity_date": 1564632048, "creation_date": 1564632048, "answer_id": 57301647, "question_id": 57298367, "link": "https://stackoverflow.com/questions/57298367/generate-bigrams-but-only-noun-and-verb-combinations/57301647#57301647", "title": "Generate bigrams BUT only noun and verb combinations", "body": "<p>You have to first apply pos_tag and then bigrams</p>\n\n<p>You can try like this</p>\n\n<pre><code>import nltk\n\nsent = 'The thieves stole the paintings'\ntoken_sent = nltk.word_tokenize(sent)\ntagged_sent = nltk.pos_tag(token_sent)\n\nword_tag_pairs = nltk.bigrams(tagged_sent)\n\n##Apply conditions according to your requirement to filter the bigrams\n\nprint([(a,b) for a, b in word_tag_pairs if a[1].startswith('N') and b[1].startswith('V')])  \n</code></pre>\n\n<p>It just gives an output of </p>\n\n<pre><code>[(('thieves', 'NNS'), ('stole', 'VBD'))]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "edited": false, "score": 0, "creation_date": 1564752074, "post_id": 57326131, "comment_id": 101144581, "body": "Thanks for the help!  How would I run this over a dataframe column of text with spaCy instead of just a text string?"}, {"owner": {"reputation": 1882, "user_id": 7961860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co2yu.png?s=128&g=1", "display_name": "Sofie VL", "link": "https://stackoverflow.com/users/7961860/sofie-vl"}, "reply_to_user": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "edited": false, "score": 1, "creation_date": 1564758720, "post_id": 57326131, "comment_id": 101148451, "body": "Welcome! To efficiently run <code>spaCy</code> on large volumes of text, use <code>nlp.pipe(texts)</code> - see here: <a href=\"https://spacy.io/usage/processing-pipelines#processing\" rel=\"nofollow noreferrer\">spacy.io/usage/processing-pipelines#processing</a>"}, {"owner": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "edited": false, "score": 0, "creation_date": 1565293742, "post_id": 57326131, "comment_id": 101318840, "body": "Sofie VL can you provide an example of this code with a dataframe.  Say I have one column of my dataframe that is text.  Each row is a sentence.  How do I run this code over that?  I couldn&#39;t figure it out with the documentation."}, {"owner": {"reputation": 1882, "user_id": 7961860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co2yu.png?s=128&g=1", "display_name": "Sofie VL", "link": "https://stackoverflow.com/users/7961860/sofie-vl"}, "reply_to_user": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "edited": false, "score": 1, "creation_date": 1565333863, "post_id": 57326131, "comment_id": 101328097, "body": "You&#39;ll have to extract the text out of your column first, ofcourse. Something like <code>text = df[&quot;message&quot;]</code>. That is not a part of the spaCy library, but preprocessing that needs to happen on your end..."}], "tags": [], "owner": {"reputation": 1882, "user_id": 7961860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co2yu.png?s=128&g=1", "display_name": "Sofie VL", "link": "https://stackoverflow.com/users/7961860/sofie-vl"}, "is_accepted": true, "score": 1, "last_activity_date": 1564747321, "last_edit_date": 1592644375, "creation_date": 1564747321, "answer_id": 57326131, "question_id": 57298367, "link": "https://stackoverflow.com/questions/57298367/generate-bigrams-but-only-noun-and-verb-combinations/57326131#57326131", "title": "Generate bigrams BUT only noun and verb combinations", "body": "<p>With <code>spaCy</code>, you have access to pre-trained <a href=\"https://spacy.io/usage/models\" rel=\"nofollow noreferrer\">models</a> in various languages. You can install them like so: <code>python -m spacy download en_core_web_sm</code></p>\n<p>Then, you can easily run something like this to do custom filtering:</p>\n<pre><code>import spacy\n\ntext = &quot;The sleeping cat thought that sitting in the couch resting would be a great idea.&quot;\nnlp = spacy.load('en_core_web_sm')\ndoc = nlp(text)\nfor i in range(len(doc)):\n    j = i+1\n    if j &lt; len(doc):\n        if (doc[i].pos_ == &quot;NOUN&quot; and doc[j].pos_ == &quot;VERB&quot;) or (doc[i].pos_ == &quot;VERB&quot; and doc[j].pos_ == &quot;NOUN&quot;):\n            print(doc[i].text, doc[j].text, doc[i].pos_, doc[j].pos_)\n</code></pre>\n<p>which will output</p>\n<blockquote>\n<p>sleeping cat VERB NOUN</p>\n<p>cat thought NOUN VERB</p>\n<p>couch resting NOUN VERB</p>\n</blockquote>\n"}], "owner": {"reputation": 488, "user_id": 9463364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7009956ac49f574b6f35f0792cf8141?s=128&d=identicon&r=PG&f=1", "display_name": "acodejdatam", "link": "https://stackoverflow.com/users/9463364/acodejdatam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 57326131, "answer_count": 2, "score": 0, "last_activity_date": 1564747321, "creation_date": 1564604817, "question_id": 57298367, "link": "https://stackoverflow.com/questions/57298367/generate-bigrams-but-only-noun-and-verb-combinations", "title": "Generate bigrams BUT only noun and verb combinations", "body": "<p>I have some code below that generates bigrams for my data frame column.</p>\n\n<pre><code>import nltk\nimport collections\ncounts = collections.Counter()\nfor sent in df[\"message\"]:\n    words = nltk.word_tokenize(sent)\n    counts.update(nltk.bigrams(words))\ncounts = {k: v for k, v in counts.items() if v &gt; 25}\n</code></pre>\n\n<p>This works great for generating my most common bigrams in the 'message' column of my dataframe, BUT, I want to get bigrams that contain one verb and one noun per pair of bigrams only.  </p>\n\n<p>Any help doing this with spaCy or nltk would be appreciated!</p>\n"}, {"tags": ["python", "while-loop", "repeat"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1564604863, "post_id": 57298365, "comment_id": 101090754, "body": "<code>time</code> module will help. <a href=\"https://docs.python.org/3/library/time.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/time.html</a>"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1564605025, "post_id": 57298365, "comment_id": 101090812, "body": "@Poojan: The questioner is already using the <code>time</code> module and the command <code>time.sleep(5)</code> in his code."}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1564605270, "post_id": 57298365, "comment_id": 101090895, "body": "You&#39;re talking about your <code>keep_alive</code> function?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9136069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a664912a81421cd27a8ed49ed4886fe2?s=128&d=identicon&r=PG&f=1", "display_name": "HARROUZ Mouad", "link": "https://stackoverflow.com/users/9136069/harrouz-mouad"}, "is_accepted": false, "score": 0, "last_activity_date": 1564605523, "creation_date": 1564605523, "answer_id": 57298514, "question_id": 57298365, "link": "https://stackoverflow.com/questions/57298365/how-to-run-code-every-x-seconds-inside-while-true-python/57298514#57298514", "title": "How to run code every x seconds inside while true - python", "body": "<p>you can use Bibio TIME \nYou can check it from official python website (<a href=\"https://docs.python.org/3/library/time.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/time.html</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 8291579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4g-AVLw9f7w/AAAAAAAAAAI/AAAAAAAAATE/-79vHu0lWto/photo.jpg?sz=128", "display_name": "Marcus Weinberger", "link": "https://stackoverflow.com/users/8291579/marcus-weinberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1564605774, "creation_date": 1564605774, "answer_id": 57298556, "question_id": 57298365, "link": "https://stackoverflow.com/questions/57298365/how-to-run-code-every-x-seconds-inside-while-true-python/57298556#57298556", "title": "How to run code every x seconds inside while true - python", "body": "<p>Personally, for simple things, I find the <code>_thread</code> library easier. Here's a function that you can run in a thread, and an example of starting that thread:</p>\n\n<pre><code>import _thread\ndef mythread(arg1):\n    while True:\n        time.sleep(arg1)\n        do.whatever()\n_thread.start_new_thread(mythread, (5,))\n</code></pre>\n\n<p>The important thing to note is the second argument I passed to the <code>_thread.start_new_thread</code> function. It <strong>must</strong> be a tuple, which is why there is a comma after the 5. Even if your function doesn't require any arguments, you have to pass a tuple.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 8390223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05c5d131f08698f433712ada9fb12cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Loki", "link": "https://stackoverflow.com/users/8390223/mark-loki"}, "is_accepted": false, "score": 0, "last_activity_date": 1564609556, "last_edit_date": 1564609556, "creation_date": 1564609103, "answer_id": 57299169, "question_id": 57298365, "link": "https://stackoverflow.com/questions/57298365/how-to-run-code-every-x-seconds-inside-while-true-python/57299169#57299169", "title": "How to run code every x seconds inside while true - python", "body": "<p>I am using time module and threading,\nI'v made some changes and it seems to work</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport configparser\nimport logging\nimport threading\nimport time\nimport ts3\nlogging.basicConfig(filename='ts3bot.log',\n                    level=logging.INFO,\n                    format=\"%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s\",\n                    )\nlogging.getLogger().addHandler(logging.StreamHandler())\n\ndef notify_bot(ts3conn):\n    logging.info(\"Start Notify Bot ...\")\n    ts3conn.exec_(\"servernotifyregister\", event=\"server\")\n    while True:\n        event = ts3conn.wait_for_event()\n        try:\n            reasonid_ = event[0][\"reasonid\"]\n        except KeyError:\n            continue\n        if reasonid_ == \"0\":\n            logging.info(\"User joined Lobby:\")\n            logging.info(event[0])\n            servergroups = event[0]['client_servergroups']\n            guestname = event[0]['client_nickname']\n            if not set(servergroups):\n                print(f\"s1 {guestname}\")\n            else:\n                print(f\"s2{guestname}\")\n    return None\ndef keep_alive(ts3conn, time):\n    while True:\n        logging.info(\"Send keep alive!\")\n        ts3conn.send_keepalive()\n        time.sleep(20)\nif __name__ == \"__main__\":\n    logging.info(\"Start TS Bot ...\")\n    config = configparser.ConfigParser()\n    config.sections()\n    config.read(\"settings_test.ini\")\n    logging.info(\"Config loaded!\")\n    HOST = config['server']['url']\n    PORT = config['server']['query_port']\n    USER = config['server']['query_user']\n    PASS = config['server']['query_pw']\n    SID = config['server']['sid']\n    NAME = config['bot']['name']\n\n    logging.info(\"Connecting to query interface ...\")\n    URI = f\"telnet://{USER}:{PASS}@{HOST}:{PORT}\"\n    try:\n        with ts3.query.TS3ServerConnection(URI) as ts3conn:\n            ts3conn.exec_(\"use\", sid=SID)\n\n            ts3conn.query(\"clientupdate\", client_nickname=\"x123d\")\n            logging.info(\"Connected!\")\n            notify_thread = threading.Thread(target=notify_bot, args=(ts3conn,), daemon=True,\n                                             name=\"notify\")\n            keep_alive_thread = threading.Thread(target=keep_alive, args=(ts3conn, time), daemon=True,\n                                                 name=\"keep_alive\")\n            notify_thread.start()\n            keep_alive_thread.start()\n            keep_alive_thread.join()\n            notify_thread.join()\n    except KeyboardInterrupt:\n        logging.INFO(60 * \"=\")\n        logging.info(\"TS Bot terminated by user!\")\n        logging.INFO(60 * \"=\")\n</code></pre>\n\n<p>It looks like ts3conn.send_keepalive() making error, when I delete it, code work fine, when I'v add it, code stop working after send ts3conn.send_keepalive() once</p>\n"}], "owner": {"reputation": 45, "user_id": 8390223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05c5d131f08698f433712ada9fb12cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Loki", "link": "https://stackoverflow.com/users/8390223/mark-loki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1564609556, "creation_date": 1564604815, "question_id": 57298365, "link": "https://stackoverflow.com/questions/57298365/how-to-run-code-every-x-seconds-inside-while-true-python", "title": "How to run code every x seconds inside while true - python", "body": "<p>I need to execute code inside while loop every x seconds without stoping loop work</p>\n\n<p>I have trying threading and lock combinations but it is still not working. I am working on python 3.7.4, pycharm 2019.2</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport configparser\nimport logging\nimport threading\nimport time\n\nimport ts3\n\n__all__ = [\"notify_bot\"]\n\nlogging.basicConfig(filename='ts3bot.log',\n                    level=logging.INFO,\n                    format=\"%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s\",\n                    )\n\nlogging.getLogger().addHandler(logging.StreamHandler())\ndef notify_bot(ts3conn, config, lock):\n    logging.info(\"Start Notify Bot ...\")\n    lock.acquire()\n    ts3conn.exec_(\"servernotifyregister\", event=\"server\")\n    lock.release()\n    while True:\n        event = ts3conn.wait_for_event()\n        try:\n            reasonid_ = event[0][\"reasonid\"]\n        except KeyError:\n            continue\n        if reasonid_ == \"0\":\n            logging.info(\"User joined Lobby:\")\n            logging.info(event[0])\n            servergroups = event[0]['client_servergroups']\n            guestname = event[0]['client_nickname']\n            lock.acquire()\n            if not set(servergroups):\n                print(f\"s1 {guestname}\")\n            else:\n                print(f\"s2{guestname}\")\n            lock.release()\n    return None\ndef keep_alive(ts3conn, lock):\n    while True:\n        logging.info(\"Send keep alive!\")\n        lock.acquire()\n        ts3conn.send_keepalive()\n        lock.release()\n        time.sleep(5)\nif __name__ == \"__main__\":\n    logging.info(\"Start TS Bot ...\")\n    config = configparser.ConfigParser()\n    config.sections()\n    config.read(\"settings_test.ini\")\n    logging.info(\"Config loaded!\")\n    HOST = config['server']['url']\n    PORT = config['server']['query_port']\n    USER = config['server']['query_user']\n    PASS = config['server']['query_pw']\n    SID = config['server']['sid']\n    NAME = config['bot']['name']\n\n    logging.info(\"Connecting to query interface ...\")\n    URI = f\"telnet://{USER}:{PASS}@{HOST}:{PORT}\"\n    try:\n        with ts3.query.TS3ServerConnection(URI) as ts3conn:\n            ts3conn.exec_(\"use\", sid=SID)\n\n            ts3conn.query(\"clientupdate\", client_nickname=\"x123d\")\n            logging.info(\"Connected!\")\n\n            lock = threading.Lock()\n\n            notify_thread = threading.Thread(target=notify_bot, args=(ts3conn, config, lock), daemon=True,\n                                             name=\"notify\")\n            keep_alive_thread = threading.Thread(target=keep_alive, args=(ts3conn, lock), daemon=True,\n                                                 name=\"keep_alive\")\n            notify_thread.start()\n            keep_alive_thread.start()\n            keep_alive_thread.join()\n            notify_thread.join()\n    except KeyboardInterrupt:\n        logging.INFO(60 * \"=\")\n        logging.info(\"TS Bot terminated by user!\")\n        logging.INFO(60 * \"=\")\n</code></pre>\n\n<p>After run work for 1 person who join server and do nothing, dont send keep alive and dont work at all</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 9821289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sgillen", "link": "https://stackoverflow.com/users/9821289/sgillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1564604994, "creation_date": 1564604994, "answer_id": 57298406, "question_id": 57298297, "link": "https://stackoverflow.com/questions/57298297/how-do-i-take-appropriate-action-after-i-detect-an-object-in-my-camera/57298406#57298406", "title": "How do I take appropriate action after i detect an object in my camera?", "body": "<p>It looks to me like you are not really detecting objects yet, you are taking whatever image the camera is seeing and applying a yellow filter to it. But if there were no yellow object the screen would still display. </p>\n\n<p>To get to what you are looking for I suggest looking into \"blob detection\" This is probably the simplest form of object detection. Once you can detect \"blobs\" I recommend setting a threshold for size and deciding if an object if worth reacting to based on that.  </p>\n"}], "owner": {"reputation": 39, "user_id": 11865967, "user_type": "registered", "profile_image": "https://graph.facebook.com/2596423620408772/picture?type=large", "display_name": "Ashiqur Rahman", "link": "https://stackoverflow.com/users/11865967/ashiqur-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57298406, "answer_count": 1, "score": 0, "last_activity_date": 1587833314, "creation_date": 1564604476, "last_edit_date": 1587833314, "question_id": 57298297, "link": "https://stackoverflow.com/questions/57298297/how-do-i-take-appropriate-action-after-i-detect-an-object-in-my-camera", "title": "How do I take appropriate action after i detect an object in my camera?", "body": "<p>I want to run a normal software using object detection, i can detect an object or color with openCV but after that i can not take any action. like i want to push a button whenever camera detect any color or object. </p>\n\n<p>with this code i can detect any yellow color object but i can't take any action after that.</p>\n\n<pre><code>import cv2\nimport numpy as np\n\ncap = cv2.VideoCapture(0)\n\nwhile True:\n    _, frame = cap.read()\n\n    hsv_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)\n\n    #yellow color\n\n    low_yellow = np.array([20,60,200])\n    high_yellow = np.array([60,255,255])\n    yellow_mask = cv2.inRange(hsv_frame, low_yellow, high_yellow)\n    yellow = cv2.bitwise_and(frame, frame, mask=yellow_mask)\n\n    cv2.imshow(\"OUR FRAME\", frame)\n    cv2.imshow(\"YELLOW FRAME\" , yellow)\n\n    key =cv2.waitKey(1)\n    if key ==27:\n        break\n</code></pre>\n"}, {"tags": ["python", "qt", "pyqt", "vtk", "qt-designer"], "comments": [{"owner": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 1, "creation_date": 1564608438, "post_id": 57298291, "comment_id": 101091998, "body": "Okay maybe its just me but it appears as if you have a sort of circular reference going on here -- vtkWidget is dependent upon w-3d which is dependent upon layout_3d which is dependent upon vtkWidget ??  Which could be part of the problem of why its not working as expected.  So which comes first the chicken or the egg?"}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564682267, "post_id": 57298291, "comment_id": 101121103, "body": "@DennisJensen yes but  - in this example they are two seperate windows - but the issue is - i can not handout layout_3d as parent - since it does not accept an object of the class graphicslayout - so i do not know how to work around this issue..."}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564682411, "post_id": 57298291, "comment_id": 101121175, "body": "@DennisJensen i would like anyway to have all widgets in a single window.. :/"}, {"owner": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564686034, "post_id": 57298291, "comment_id": 101122754, "body": "I am sure there is a way to do it but I do not have time to look at it right at this minute.  Still you need to reword your question I think -- at least outlining in a bit more detail what your issue fully is -- because I do not think that circular reference is ever going to work correctly if at all"}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564687363, "post_id": 57298291, "comment_id": 101123289, "body": "@DennisJensen ok i will do it now - because i have been working on it for several days - and i still have no clue - why is not working ...  if i am inserting the widget directly into the layout by layout.addItem(...)  and without bypassing a parent to the vtkwidget - it does not appear at all in the window"}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564694674, "post_id": 57298291, "comment_id": 101125827, "body": "@DennisJensen  i have edited the description"}, {"owner": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564769998, "post_id": 57298291, "comment_id": 101153219, "body": "okay I installed pyqtgraph and tried to run what is supposed to be a Minimal Reproducible Example and get the following <code>Traceback (most recent call last):   File &quot;zzTest06.py&quot;, line 5, in &lt;module&gt;     import pyqtgraph.opengl as gl   File &quot;C:\\Program Files\\Python37\\lib\\site-packages\\pyqtgraph\\opengl\\__init__.p&zwnj;&#8203;y&quot;, line 1, in &lt;module&gt;     from .GLViewWidget import GLViewWidget   File &quot;C:\\Program Files\\Python37\\lib\\site-packages\\pyqtgraph\\opengl\\GLViewWidg&zwnj;&#8203;et.py&quot;, line 2, in &lt;module&gt;     from OpenGL.GL import * ModuleNotFoundError: No module named &#39;OpenGL&#39;</code>"}, {"owner": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564770096, "post_id": 57298291, "comment_id": 101153256, "body": "Further that would not be the only error I would get because you reference within this code <code>QVTKRenderWindowInteractor</code> which was not imported.  If you actually post an MRE let me know and I will take another look."}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564860175, "post_id": 57298291, "comment_id": 101171158, "body": "@DennisJensen thnx for your ongoing effort - i have edited the code - see above thanks in advance"}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1564874603, "post_id": 57298291, "comment_id": 101173667, "body": "@DennisJensen thank you for your efforts and good intentions - i was able to solve it"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 1, "creation_date": 1565013123, "post_id": 57342734, "comment_id": 101206968, "body": "Just a note -- you ought to clean up your Import lines as they are a bit confusing and jumbled.  For instance which Qt library are you actually using as you Import 2 of them under different Namespaces"}, {"owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "reply_to_user": {"reputation": 194, "user_id": 4656159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/716cF.jpg?s=128&g=1", "display_name": "Dennis Jensen", "link": "https://stackoverflow.com/users/4656159/dennis-jensen"}, "edited": false, "score": 0, "creation_date": 1573769770, "post_id": 57342734, "comment_id": 104004003, "body": "@DennisJensen thnx for the hint - I have been starting programming this program and adding and removing things when I came across certain problems, I clearly have to clean the code up.."}], "tags": [], "owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "is_accepted": true, "score": 1, "last_activity_date": 1564874546, "creation_date": 1564874546, "answer_id": 57342734, "question_id": 57298291, "link": "https://stackoverflow.com/questions/57298291/insert-vtk-into-the-right-spot-of-layout/57342734#57342734", "title": "Insert VTK into the right spot of layout", "body": "<p>I was able to solve it - I have replaced the QGraphicsLayout with QGridlayout and removed all proxywidget-wrappers and I found a workaround for adding a viewbox by using the plotwidget.</p>\n\n<p>I just need now to remove the axes - but this is secondary</p>\n\n<pre><code>import pyqtgraph as pg\nimport pyqtgraph.opengl as gl\nfrom pyqtgraph.Qt import QtCore, QtGui, QtWidgets\nfrom PyQt5 import Qt\nfrom vtk.qt.QVTKRenderWindowInteractor import QVTKRenderWindowInteractor\nimport vtk, sys\nimport numpy as np\nfrom PIL import Image\nclass GUI:\n    def __init__(self):\n        self.init_gui() \n\n    def proxyWidget(self, item, width=None, height=None):\n        proxy = QtGui.QGraphicsProxyWidget()\n        if(height != None):\n            height = item.sizeHint().height() if height==None else height\n            item.setMaximumHeight(height)\n        if(width!=None):\n            width = item.sizeHint().width() if width==None else width\n            item.setMaximumWidth(width)\n        proxy.setWidget(item)\n        return proxy\n\n    def init_gui(self, win_height=800, win_width=1800):\n        pg.setConfigOptions(imageAxisOrder='row-major')\n        pg.setConfigOption('background', 'w')\n        pg.setConfigOption('foreground', 'k')\n        self.w = pg.GraphicsWindow(size=(win_width,win_height), border=True)\n        self.img = pg.ImageItem()\n        self.list_imgs       = QtGui.QListWidget()\n        self.btn_Del_Mark    = QtGui.QPushButton('Del Mark')\n        self.btn_MarkPed     = QtGui.QPushButton('Mark ped')\n        self.lbl_list1       = QtGui.QLabel(\"List Images\")\n        self.lbl_list2       = QtGui.QLabel(\"List Markings\")\n        self.list_imgs       = QtGui.QListWidget()\n        self.list_marks      = QtGui.QListWidget()\n        self.layout = QtGui.QGridLayout()\n        self.w.setLayout(self.layout)\n        #self.w_3d = pg.GraphicsWindow()\n\n        self.vtkWidget = QVTKRenderWindowInteractor()\n        #self.w_3d.addItem(self.proxyWidget(self.vtkWidget))\n\n        self.vtkWidget.Initialize()\n        self.vtkWidget.Start()\n        self.ren = vtk.vtkRenderer()\n        self.vtkWidget.GetRenderWindow().AddRenderer(self.ren)\n        self.iren = self.vtkWidget.GetRenderWindow().GetInteractor()\n\n        # Create source\n        source = vtk.vtkSphereSource()\n        source.SetCenter(0, 0, 0)\n        source.SetRadius(5.0)\n\n        # Create a mapper\n        mapper = vtk.vtkPolyDataMapper()\n        mapper.SetInputConnection(source.GetOutputPort())\n\n        # Create an actor\n        actor = vtk.vtkActor()\n        actor.SetMapper(mapper)\n\n        self.ren.AddActor(actor)\n\n        self.ren.ResetCamera()\n        self.iren.Initialize()\n        self.iren.Start()\n        path = \"/home/brain/uni/frustum-pointnets/dataset/KITTI/object/testing/image_2/000000.png\"\n        imgdata = Image.open(path)\n        self.imgArr = np.array(imgdata)\n        #ToDo: undistort Image if neccessary\n\n        self.img.setImage(self.imgArr)\n        #self.vbLayout = self.w.addLayout(row=0,  col=3, rowspan=10,  colspan=20)\n        imageGraph = pg.PlotWidget(name='Signalgraph')\n        self.vb = imageGraph.plotItem.vb\n        self.lbl_list1.setAlignment(QtCore.Qt.AlignCenter)\n        self.lbl_list2.setAlignment(QtCore.Qt.AlignCenter)\n        self.vb.setAspectLocked()\n        self.vb.addItem(self.img)\n        self.vb.invertY(True)\n        self.vb.setMaximumSize(int(7/10.*win_width), int(9/20.*win_height))\n        self.layout.addWidget(imageGraph,                           1 , 3, 10,  20)\n        self.layout.addWidget(self.vtkWidget                      , 11, 3, 10,  20)\n        self.layout.addWidget(self.lbl_list1 ,                                  0, 1, 1, 1)   \n        self.layout.addWidget(self.lbl_list2 ,                                  0, 2, 1, 1)  \n        self.layout.addWidget(self.list_imgs ,                                  1, 1, 20,1)   \n        self.layout.addWidget(self.list_marks,                                  1, 2, 20,1)   \n        sizeHint =  lambda: pg.QtCore.QSize(int(1./10.*win_width), int(0.9/20.*win_height))\n        self.lbl_list1.sizeHint = lambda: pg.QtCore.QSize(int(1./10.*win_width), int(0.9/20.*win_height))\n        self.lbl_list2.sizeHint = lambda: pg.QtCore.QSize(int(1./10.*win_width), int(0.9/20.*win_height))\n        self.list_imgs.sizeHint  = lambda: pg.QtCore.QSize(int(1./10.*win_width), int(18/20.*win_height))\n        self.list_marks.sizeHint = lambda: pg.QtCore.QSize(int(1./10.*win_width), int(18/20.*win_height))\n        self.list_imgs.setMaximumWidth(int(1./10.*win_width))\n        self.list_marks.setMaximumWidth(int(1./10.*win_width))\n\n        self.vtkWidget.show()\n\n\nif __name__ == \"__main__\":\n    app = QtGui.QApplication([])\n    guiobj = GUI()\n\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 5169000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3edb9c5d5bbaa829012d23a526b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Synaps", "link": "https://stackoverflow.com/users/5169000/synaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "accepted_answer_id": 57342734, "answer_count": 1, "score": 0, "last_activity_date": 1564874546, "creation_date": 1564604435, "last_edit_date": 1564860094, "question_id": 57298291, "link": "https://stackoverflow.com/questions/57298291/insert-vtk-into-the-right-spot-of-layout", "title": "Insert VTK into the right spot of layout", "body": "<p>I am trying to put the VTK 3D scene widget into the right spot of pyqtgraphics.GraphicsLayout(). But either the scene does not appear if i am not assigning the window as parent or if I do - the scene does not adapt to the free area, it is just floating in the upper left corner.</p>\n\n<p>I am currently struggling to find a solution to put a viewbox and vtkrenderer into the same window.</p>\n\n<p>One of my attempts was to assign the self.w (see below this paragraph)- which is my main window as a parent to the renderer but then I don't know how to tell the renderer to place itself in the lower right corner of the window instead of floating in the upper left corner - which also leads to overlapping of other elements in the window.</p>\n\n<p>Creating new window and assigning this window as parent</p>\n\n<pre><code>self.vtkWidget = QVTKRenderWindowInteractor(self.w_3d)\n</code></pre>\n\n<p>Using refered window as parent -> leads to floating and overlapping rendered scene</p>\n\n<pre><code>self.vtkWidget = QVTKRenderWindowInteractor(self.w)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3FKXi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3FKXi.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import pyqtgraph as pg\nimport pyqtgraph.opengl as gl\nfrom pyqtgraph.Qt import QtCore, QtGui, QtWidgets\nfrom PyQt5 import Qt\nfrom vtk.qt.QVTKRenderWindowInteractor import QVTKRenderWindowInteractor\nimport vtk, sys\n\nclass GUI:\n    def __init__(self):\n        self.init_gui() \n\n    def proxyWidget(self, item, width=None, height=None):\n        proxy = QtGui.QGraphicsProxyWidget()\n        if(height != None):\n            height = item.sizeHint().height() if height==None else height\n            item.setMaximumHeight(height)\n        if(width!=None):\n            width = item.sizeHint().width() if width==None else width\n            item.setMaximumWidth(width)\n        proxy.setWidget(item)\n        return proxy\n\n    def init_gui(self, win_height=800, win_width=1800):\n        #self.w = self\n        #self.w.scene().sigMouseClicked.connect(self.mousePressEvent) #mouseMoveEvent\n        #self.w.scene().sigMouseMoved.connect(self.mouseMoveEvent)\n        pg.setConfigOptions(imageAxisOrder='row-major')\n        pg.setConfigOption('background', 'w')\n        pg.setConfigOption('foreground', 'k')\n        self.w = pg.GraphicsWindow(size=(win_width,win_height), border=True)\n        self.img = pg.ImageItem()\n        self.list_imgs       = QtGui.QListWidget()\n        self.btn_Del_Mark    = QtGui.QPushButton('Del Mark')\n        self.btn_MarkPed     = QtGui.QPushButton('Mark ped')\n        self.lbl_list1       = QtGui.QLabel(\"List Images\")\n        self.lbl_list2       = QtGui.QLabel(\"List Markings\")\n        self.list_imgs       = QtGui.QListWidget()\n        self.list_marks      = QtGui.QListWidget()\n        self.layout = pg.GraphicsLayout()\n        self.w_3d = pg.GraphicsWindow()\n        self.vb = pg.ViewBox()\n\n\n        self.lbl_list1.setAlignment(QtCore.Qt.AlignCenter)\n        self.lbl_list2.setAlignment(QtCore.Qt.AlignCenter)\n        self.vb.setAspectLocked()\n        self.vb.addItem(self.img)\n        self.vb.invertY(True)\n        self.vtkWidget = QVTKRenderWindowInteractor(self.w_3d)\n        self.w_3d.addItem(self.proxyWidget(self.vtkWidget))\n\n        self.vtkWidget.Initialize()\n        self.vtkWidget.Start()\n        self.ren = vtk.vtkRenderer()\n        self.vtkWidget.GetRenderWindow().AddRenderer(self.ren)\n        self.iren = self.vtkWidget.GetRenderWindow().GetInteractor()\n\n        # Create source\n        source = vtk.vtkSphereSource()\n        source.SetCenter(0, 0, 0)\n        source.SetRadius(5.0)\n\n        # Create a mapper\n        mapper = vtk.vtkPolyDataMapper()\n        mapper.SetInputConnection(source.GetOutputPort())\n\n        # Create an actor\n        actor = vtk.vtkActor()\n        actor.SetMapper(mapper)\n\n        self.ren.AddActor(actor)\n\n        self.ren.ResetCamera()\n        self.iren.Initialize()\n        self.iren.Start()\n        self.vtkWidget.show()\n\n        self.layout.addItem(self.vb                             , 1,  3, 20,  20)\n        self.layout.addItem(self.proxyWidget(self.lbl_list1     , width=(int(1./10.*win_width)), height=(int(0.9/20.*win_height))),  0,1,1,1)   \n        self.layout.addItem(self.proxyWidget(self.lbl_list2     , width=(int(1./10.*win_width)), height=(int(0.9/20.*win_height))),  0,2,1,1)  \n        self.layout.addItem(self.proxyWidget(self.list_imgs     , width=(int(1./10.*win_width))),  1,1,20,1)   \n        self.layout.addItem(self.proxyWidget(self.list_marks    , width=(int(1./10.*win_width))),  1,2,20,1)   \n\n        self.w.addItem(self.layout)\n\nif __name__ == \"__main__\":\n    app = QtGui.QApplication([])\n    guiobj = GUI()\n\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Currently I have solved it by having two windows - after several days of failed attempts. But even this looks crap - since the rendered scene floats in the window without reaction to window resize events...</p>\n\n<p><a href=\"https://i.stack.imgur.com/1zClU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1zClU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to have those two windows - in one:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rlHbt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rlHbt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>One of the failed attempts was as follows - but then pyqt acquires space in the layout without showing the renderer scene in the window... - just empty space:</p>\n\n<pre><code>self.vtkWidget = QVTKRenderWindowInteractor() #No Parent\n#...see rest of code in the section above with exception of the following 2 lines\nself.layout.addItem(self.proxyWidget(self.vtkWidget), 10, 3, 10, 20)\nself.vtkWidget.show()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-requests", "python-unicode"], "comments": [{"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1564604504, "post_id": 57298260, "comment_id": 101090624, "body": "What&#39;s the output of <code>locale</code> at the command prompt at the two machines? Any differences?"}, {"owner": {"reputation": 33, "user_id": 11865942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf88967d7576f79edd96f7dfd0e6d4a9?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/11865942/bill"}, "reply_to_user": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1564604848, "post_id": 57298260, "comment_id": 101090748, "body": "LANG=en_US.UTF-8 LC_CTYPE=&quot;en_US.UTF-8&quot; LC_NUMERIC=ru_RU.UTF-8 LC_TIME=ru_RU.UTF-8 LC_COLLATE=&quot;en_US.UTF-8&quot; LC_MONETARY=ru_RU.UTF-8 LC_MESSAGES=&quot;en_US.UTF-8&quot; LC_PAPER=ru_RU.UTF-8 LC_NAME=ru_RU.UTF-8 LC_ADDRESS=ru_RU.UTF-8 LC_TELEPHONE=ru_RU.UTF-8 LC_MEASUREMENT=ru_RU.UTF-8 LC_IDENTIFICATION=ru_RU.UTF-8 LC_ALL="}, {"owner": {"reputation": 33, "user_id": 11865942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf88967d7576f79edd96f7dfd0e6d4a9?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/11865942/bill"}, "reply_to_user": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1564604880, "post_id": 57298260, "comment_id": 101090761, "body": "these locale are same @Joachim Isaksson"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11865942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf88967d7576f79edd96f7dfd0e6d4a9?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/11865942/bill"}, "edited": false, "score": 0, "creation_date": 1564605776, "post_id": 57298412, "comment_id": 101091095, "body": "thanks, when i added PYTHONUTF8=1, everything started to work"}, {"owner": {"reputation": 353, "user_id": 1386750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9d6a9a0b03197c483acfa0db61a88c?s=128&d=identicon&r=PG", "display_name": "AstroFloyd", "link": "https://stackoverflow.com/users/1386750/astrofloyd"}, "edited": false, "score": 0, "creation_date": 1573306797, "post_id": 57298412, "comment_id": 103843837, "body": "My script worked on the command line, but not in cron.  The solution, found using your directions, was to change <code>LANG=&quot;en_US&quot;</code> to <code>LANG=&quot;en_US.utf8&quot;</code> in my crontab.  Cheers!  :-)"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1587706152, "post_id": 57298412, "comment_id": 108620559, "body": "how to add PYTHONUTF8=1?  Which file do you add this?"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1587706516, "post_id": 57298412, "comment_id": 108620658, "body": "@Nguaial It is an environment variable. How you set this depends on the operating system you&#39;re using."}, {"owner": {"reputation": 6245, "user_id": 465139, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/db39cecc6fcb9588dd972367cc32623d?s=128&d=identicon&r=PG", "display_name": "Laryx Decidua", "link": "https://stackoverflow.com/users/465139/laryx-decidua"}, "reply_to_user": {"reputation": 353, "user_id": 1386750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9d6a9a0b03197c483acfa0db61a88c?s=128&d=identicon&r=PG", "display_name": "AstroFloyd", "link": "https://stackoverflow.com/users/1386750/astrofloyd"}, "edited": false, "score": 0, "creation_date": 1613816244, "post_id": 57298412, "comment_id": 117196704, "body": "@AstroFloyd It may happen that the UTF-8 locale is missing in which case under Linux you would have to generate it first via <code>locale-gen en_US.utf8</code>. You would need admin privileges to run this command."}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1564605020, "creation_date": 1564605020, "answer_id": 57298412, "question_id": 57298260, "link": "https://stackoverflow.com/questions/57298260/how-to-fix-latin-1-codec-cant-encode-characters-in-position-in-requests/57298412#57298412", "title": "How to fix &quot;latin-1 codec can&#39;t encode characters in position&quot; in requests", "body": "<p>If your environment uses the C os POSIX locale, Python 3.7 automatically coerces that to a UTF-8 aware locale, according to pep-538.</p>\n\n<p>So it seems that your PC has an <code>UTF-8</code> or <code>C</code> locale set, while your VPS uses <code>latin-1</code>.</p>\n\n<p>Try running the following in an interactive Python session on both machines:</p>\n\n<pre><code>import sys\nimport locale\n\nprint(sys.getfilesystemencoding())\nprint(locale.getpreferredencoding())\n</code></pre>\n\n<p>It you do not want to change the locale on your VPS, you could set <code>PYTHONUTF8=1</code> in its environment, or you could use the <code>-X utf-8</code> option with Python.</p>\n"}], "owner": {"reputation": 33, "user_id": 11865942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf88967d7576f79edd96f7dfd0e6d4a9?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/11865942/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3911, "favorite_count": 0, "protected_date": 1601849708, "accepted_answer_id": 57298412, "answer_count": 1, "score": 3, "last_activity_date": 1601843683, "creation_date": 1564604246, "last_edit_date": 1564617190, "question_id": 57298260, "link": "https://stackoverflow.com/questions/57298260/how-to-fix-latin-1-codec-cant-encode-characters-in-position-in-requests", "title": "How to fix &quot;latin-1 codec can&#39;t encode characters in position&quot; in requests", "body": "<p>I am having trouble with encoding in python 3.\nWhen I was testing on my PC I get no errors:</p>\n\n<pre><code>Python 3.7.3 (default, Jun 24 2019, 04:54:02) \n[GCC 9.1.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; print(requests.get('https://www.kinopoisk.ru').text)\n\neverything good.\n</code></pre>\n\n<p>But when I ran this code on my VPS a have following error:</p>\n\n<pre><code>Python 3.7.3 (default, Apr  3 2019, 19:16:38) \n[GCC 8.0.1 20180414 (experimental) [trunk revision 259383]] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; print(requests.get('https://www.kinopoisk.ru').text) \n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'latin-1' codec can't encode characters in position 393-401: ordinal not in range(256)\n</code></pre>\n\n<p>The python versions are the same. I don't know what is going on.</p>\n\n<p>How do I fix it?</p>\n"}, {"tags": ["python", "opencv", "cv2"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10899404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lm-vmvXMCVI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ0qDhRuLYsUJJOH3_cElU9DIwkKQ/mo/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/10899404/andreas"}, "edited": false, "score": 0, "creation_date": 1564646724, "post_id": 57298331, "comment_id": 101101756, "body": "I had that in mind, however since this is in a for loop for each frame, I want to keep the start value for next frame as well and not reset it to &#39;none&#39;"}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "reply_to_user": {"reputation": 21, "user_id": 10899404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lm-vmvXMCVI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ0qDhRuLYsUJJOH3_cElU9DIwkKQ/mo/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/10899404/andreas"}, "edited": false, "score": 0, "creation_date": 1564661309, "post_id": 57298331, "comment_id": 101109744, "body": "In that case, move your start variable to before the for loop."}, {"owner": {"reputation": 21, "user_id": 10899404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lm-vmvXMCVI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ0qDhRuLYsUJJOH3_cElU9DIwkKQ/mo/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/10899404/andreas"}, "edited": false, "score": 0, "creation_date": 1564670374, "post_id": 57298331, "comment_id": 101115251, "body": "Hmm.. for each carID in carids[currentcarsindex[i]] i want to assign them a Start value like start[i] or carids[currentcarsindex[i]].start, that can be checked. Therefore I kind of want to create the attribute in the foor loop"}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604609, "creation_date": 1564604609, "answer_id": 57298331, "question_id": 57298257, "link": "https://stackoverflow.com/questions/57298257/set-attribute-for-object-in-for-loop/57298331#57298331", "title": "Set attribute for object in for loop", "body": "<p>You should declare variables at the level of scope they will be used.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if oldcent:  # checks if old centroid exists\n                    # adds radius box from previous centroid to current centroid for visualization\n    xstart = oldcent[0] - maxrad\n    ystart = oldcent[1] - maxrad\n    xwidth = oldcent[0] + maxrad\n    yheight = oldcent[1] + maxrad\n    cv2.rectangle(image, (int(xstart), int(ystart)), (int(xwidth), int(yheight)), (0, 125, 0), 1)\n    start = None\n\n    if oldcent[1] &gt;= lineypos2 and curcent[1] &lt;= lineypos2 and carids[\n            currentcarsindex[i]] not in caridscrossed:\n        ...\n</code></pre>\n\n<p>Now, <code>start</code> should be available to you.</p>\n"}, {"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604641, "creation_date": 1564604641, "answer_id": 57298336, "question_id": 57298257, "link": "https://stackoverflow.com/questions/57298257/set-attribute-for-object-in-for-loop/57298336#57298336", "title": "Set attribute for object in for loop", "body": "<p>You have the following flow in your code</p>\n\n<pre><code>if (condition_1):\n    start = 1\nelif (condition_2):\n    start = 2\n# There is no else clause. If neither condition evaluates as True then \"start\"\n#\u00a0will not have been defined\n\nif (condition_that_uses_start):\n    # Because start is not defined this will cause your error\n    pass\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10899404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lm-vmvXMCVI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ0qDhRuLYsUJJOH3_cElU9DIwkKQ/mo/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/10899404/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564604641, "creation_date": 1564604231, "question_id": 57298257, "link": "https://stackoverflow.com/questions/57298257/set-attribute-for-object-in-for-loop", "title": "Set attribute for object in for loop", "body": "<p>I am trying to set an attribute called \"start\" as either 1 or 2 depending on which line an object crosses first.</p>\n\n<p>The error i get says \"name 'start' is not defined\"</p>\n\n<p>I have tried to search all over the web but can't seem to find any similar problems.</p>\n\n<p>The code is as follows:</p>\n\n<p>I have tried to set it as start[i] = 1 and also start[arids[\n                        currentcarsindex[i]]] = 1</p>\n\n<pre><code>for i in range(currentcars):  # loops through all current car ids on screen\n\n            # grabs centroid of certain carid for current frame\n            curcent = df.iloc[int(framenumber)][str(carids[currentcarsindex[i]])]\n\n            # grabs centroid of certain carid for previous frame\n            oldcent = df.iloc[int(framenumber - 1)][str(carids[currentcarsindex[i]])]\n\n            if curcent:  # if there is a current centroid\n\n                # On-screen text for current centroid\n\n                cv2.drawMarker(image, (int(curcent[0]), int(curcent[1])), (0, 0, 255), cv2.MARKER_STAR, markerSize=5,\n                               thickness=1, line_type=cv2.LINE_AA)\n\n                if oldcent:  # checks if old centroid exists\n                    # adds radius box from previous centroid to current centroid for visualization\n                    xstart = oldcent[0] - maxrad\n                    ystart = oldcent[1] - maxrad\n                    xwidth = oldcent[0] + maxrad\n                    yheight = oldcent[1] + maxrad\n                    cv2.rectangle(image, (int(xstart), int(ystart)), (int(xwidth), int(yheight)), (0, 125, 0), 1)\n\n                    # checks if old centroid is on or below line and curcent is on or above line\n                    # to count cars and that car hasn't been counted yet\n                    if oldcent[1] &gt;= lineypos2 and curcent[1] &lt;= lineypos2 and carids[\n                        currentcarsindex[i]] not in caridscrossed:\n\n                        cv2.line(image, (0, lineypos2), (width, lineypos2), (0, 0, 255), 5)\n                        start = 1\n\n\n                    # checks if old centroid is on or above line and curcent is on or below line\n                    # to count cars and that car hasn't been counted yet\n                    elif oldcent[1] &lt;= lineypos3 and curcent[1] &gt;= lineypos3 and carids[\n                        currentcarsindex[i]] not in caridscrossed:\n\n                        cv2.line(image, (0, lineypos2), (width, lineypos2), (0, 0, 125), 5)\n                        start = 2\n\n\n                    if oldcent[1] &gt;= lineypos3 and curcent[1] &lt;= lineypos3 and start == 1 and carids[\n                        currentcarsindex[i]] not in caridscrossed:\n                        carscrossedup = carscrossedup + 1\n                        caridscrossed.append(\n                            currentcarsindex[i])  # adds car id to list of count cars to prevent double counting\n\n\n                    # checks if old centroid is on or above line and curcent is on or below line\n                    # to count cars and that car hasn't been counted yet\n                    elif oldcent[1] &lt;= lineypos2 and curcent[1] &gt;= lineypos2 and start == 2 and carids[\n                        currentcarsindex[i]] not in caridscrossed:\n                        carscrosseddown = carscrosseddown + 1\n                        caridscrossed.append(\n                            currentcarsindex[i])\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "neural-network", "training-data"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10207374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAEJF.png?s=128&g=1", "display_name": "plexus", "link": "https://stackoverflow.com/users/10207374/plexus"}, "edited": false, "score": 0, "creation_date": 1564607244, "post_id": 57298356, "comment_id": 101091623, "body": "I dont think that my weights are overwritten, since test accuracy follows an expected curve, similar to the other method. Also since i dont set the params you mentioned they always start with their default values, initial_epoch=0, epochs=1. That means that the model is always being trained for just 1 epoch."}], "tags": [], "owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "is_accepted": false, "score": 1, "last_activity_date": 1564604765, "creation_date": 1564604765, "answer_id": 57298356, "question_id": 57298236, "link": "https://stackoverflow.com/questions/57298236/training-with-keras-using-fragments-of-data/57298356#57298356", "title": "Training with keras using fragments of data", "body": "<p>from the documentation, here the crucial model parameters for your question</p>\n\n<blockquote>\n  <p>initial_epoch: Integer. Epoch at which to start training (useful for\n  resuming a previous training run).</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>epochs: Integer. Number of epochs to train the model. An epoch is an\n  iteration over the entire x and y data provided. Note that in\n  conjunction with initial_epoch, epochs is to be understood as \"final\n  epoch\". The model is not trained for a number of iterations given by\n  epochs, but merely until the epoch of index epochs is reached.</p>\n</blockquote>\n\n<p>You are not using these parameters therefore you are overwriting your weights and are not resuming training like you could with the <code>epochs</code> parameter.  That's the reason why your model always performs worse with method B. </p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10207374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAEJF.png?s=128&g=1", "display_name": "plexus", "link": "https://stackoverflow.com/users/10207374/plexus"}, "edited": false, "score": 0, "creation_date": 1564607669, "post_id": 57298371, "comment_id": 101091788, "body": "But isn&#39;t backpropagation performed for each minibatch? The default batch_size is 32. Is backpropagation building up knowledge or just restarting between minibatches?"}], "tags": [], "owner": {"reputation": 347, "user_id": 10704977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gJD8VR5j_g8/AAAAAAAAAAI/AAAAAAAAAHo/vB6gPIaznKw/photo.jpg?sz=128", "display_name": "Steven Barnard", "link": "https://stackoverflow.com/users/10704977/steven-barnard"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604833, "creation_date": 1564604833, "answer_id": 57298371, "question_id": 57298236, "link": "https://stackoverflow.com/questions/57298236/training-with-keras-using-fragments-of-data/57298371#57298371", "title": "Training with keras using fragments of data", "body": "<p>With all the data, the interactions between features and the resultant backpropagation will be more accurate with all present data; this allows for features and the architecture of the model to build upon additional epochs.</p>\n\n<p>When you save and reload you essentially restart this.</p>\n"}], "owner": {"reputation": 43, "user_id": 10207374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAEJF.png?s=128&g=1", "display_name": "plexus", "link": "https://stackoverflow.com/users/10207374/plexus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564604833, "creation_date": 1564604161, "question_id": 57298236, "link": "https://stackoverflow.com/questions/57298236/training-with-keras-using-fragments-of-data", "title": "Training with keras using fragments of data", "body": "<p>I train a sequential model (20 dense layers) in keras (python) using default settings and just 1 epoch.\nAll layers are activated with relu, except the last on that uses sigmoid.</p>\n\n<p><strong>METHOD A:</strong></p>\n\n<p>Feed model with 1,000,000 records of labeled training data.</p>\n\n<p><strong>METHOD B:</strong></p>\n\n<ol>\n<li>Train model with 50,000 records</li>\n<li>Save the model</li>\n<li>Do some stuff</li>\n<li>Load saved model</li>\n<li>Train with another 50,000 records</li>\n<li>Repeat until all 1,000,000 records are used</li>\n</ol>\n\n<p>Why is there a discrepancy between the above 2 methods?</p>\n\n<p>I always get better accuracy using all data at once, than using it in groups.</p>\n\n<p>What is the reason for that?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>model = Sequential()\nmodel.add(Dense(30, input_dim = 27, activation = 'relu'))\n...\nmodel.add(Dense(1, input_dim = 10, activation = 'sigmoid'))\nmodel.compile(loss = 'binary_crossentropy', optimizer = 'sgd', metrics = ['accuracy'])\nmodel.load_weights(PreviousWeightsFile)\nmodel.fit(X, Y, verbose = 0)\nmodel.save_weights(WeightsFile)\n(exit python and do some stuff)\n</code></pre>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1564604603, "post_id": 57298234, "comment_id": 101090663, "body": "Can you provide example URLs where the request fails?"}, {"owner": {"reputation": 19, "user_id": 9792950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2c4de9c15faec4dc5c67b77a6b1448?s=128&d=identicon&r=PG&f=1", "display_name": "FDE", "link": "https://stackoverflow.com/users/9792950/fde"}, "reply_to_user": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1564605302, "post_id": 57298234, "comment_id": 101090905, "body": "@Mark G, I would like to do that, wait I see how I can add a list here..."}, {"owner": {"reputation": 19, "user_id": 9792950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2c4de9c15faec4dc5c67b77a6b1448?s=128&d=identicon&r=PG&f=1", "display_name": "FDE", "link": "https://stackoverflow.com/users/9792950/fde"}, "reply_to_user": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1564606203, "post_id": 57298234, "comment_id": 101091252, "body": "@Mark G, I have added a list above. Thanks for your support."}, {"owner": {"reputation": 19, "user_id": 9792950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2c4de9c15faec4dc5c67b77a6b1448?s=128&d=identicon&r=PG&f=1", "display_name": "FDE", "link": "https://stackoverflow.com/users/9792950/fde"}, "reply_to_user": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1564608489, "post_id": 57298234, "comment_id": 101092021, "body": "HI, I think I found a way around, in case anyone else run into the same issue... I added a time.sleep() of 25 sec. And the programm run through."}], "owner": {"reputation": 19, "user_id": 9792950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2c4de9c15faec4dc5c67b77a6b1448?s=128&d=identicon&r=PG&f=1", "display_name": "FDE", "link": "https://stackoverflow.com/users/9792950/fde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564605683, "creation_date": 1564604143, "last_edit_date": 1564605683, "question_id": 57298234, "link": "https://stackoverflow.com/questions/57298234/ssl-and-newconnectionerror", "title": "SSL and NewConnectionError", "body": "<p>I want to crawl a given list by the Top-1-Million from Alexa, to check which website still offers acces via http:// an do not redirect to https://. \nIf the webpage does not redirect to a https:// Domain, it should be written into a csv file. </p>\n\n<p>The Problem occurs, when I am adding a bunch of multiple URLs. Than I get two errors:</p>\n\n<ol>\n<li>ssl.SSLError: [SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1056</li>\n</ol>\n\n<p>or </p>\n\n<ol start=\"2\">\n<li>requests.exceptions.ConnectionError: HTTPConnectionPool(host='17ok.com', port=80): Max retries exceeded with url: / (Caused by NewConnectionError(': Failed to establish a new connection: [Errno 11001] getaddrinfo failed')</li>\n</ol>\n\n<p>I have tried the opportunities mentioned in the following threads and documentation:</p>\n\n<ol>\n<li><a href=\"https://2.python-requests.org//en/latest/user/advanced/#ssl-cert-verification\" rel=\"nofollow noreferrer\">https://2.python-requests.org//en/latest/user/advanced/#ssl-cert-verification</a>\nEdit: the sample url: <a href=\"https://requestb.in\" rel=\"nofollow noreferrer\">https://requestb.in</a> raises a 404 error actually, probably does not exist even more (?)</li>\n<li><a href=\"https://stackoverflow.com/questions/10667960/python-requests-throwing-sslerror\">Python Requests throwing SSLError</a></li>\n<li><a href=\"https://stackoverflow.com/questions/45576930/python-requests-newconnectionerror\">Python Requests: NewConnectionError</a></li>\n<li><a href=\"https://stackoverflow.com/questions/57292554/requests-exceptions-sslerror-httpsconnectionpool-caused-by-sslerrorsslerror\">requests.exceptions.SSLError: HTTPSConnectionPool: (Caused by SSLError(SSLError(336445449, &#39;[SSL] PEM lib (_ssl.c:3816)&#39;)))</a></li>\n</ol>\n\n<p>and some other delivered solutions. </p>\n\n<p>The option to set verify=False helps, when using it for few URLs, but not when using a List > 10 URLs, the program brakes. I tried my program on a Win10 machine as well as on Ubuntu 16.04. \nAs expected, its the same issue. I also tried the option using Sessions and installed the certificate library as sugested. </p>\n\n<p>If I am just calling three pages like '<a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">http://www.example.com</a>', '<a href=\"https://www.github.com\" rel=\"nofollow noreferrer\">https://www.github.com</a>' and '<a href=\"http://www.python.org\" rel=\"nofollow noreferrer\">http://www.python.org</a>', its not a big deal and the delivered solutions. The Headache starts, when using a bunch of URLs from the Alexa List. </p>\n\n<p>Here is my code, which is working, when using it for only 3-4 urls:</p>\n\n<pre><code>import requests\nfrom requests.utils import urlparse\n\nurls = ['http://www.example.com',\n        'http://bloomberg.com',\n        'http://github.com',\n        'https://requestbin.fullcontact.com/']\n\nwith open('G:\\\\Request_HEADER_Suite/dummy/http.csv', 'w') as f:\n    for url in urls:\n        r = requests.get(url, stream=True, verify=False)\n        parsed_url = urlparse(r.url)\n        print(\"URL: \", url)\n        print(\"Redirected to: \", r.url)\n        print(\"Status Code: \", r.status_code)\n        print(\"Scheme: \", parsed_url.scheme)\n        if parsed_url.scheme == 'http':\n            f.write(url + '\\n')\n</code></pre>\n\n<p>I expect to crawl at least a list with 100 URLs. The code should write URLs which are accessible by http:// and do not redirect to https:// into a csv file or complementary database and ignore all URLs with https://. </p>\n\n<p>Because it is working for few URLs, I would expectd a stable opportunity for a larger scan.</p>\n\n<p>But 2 errors araise and break the program. Is it worthy to try a workaround using pytest? Any other suggestions? Thanks in advance.</p>\n\n<p>EDIT:\nThis is a list, which will raise errors. Only for clarification, this list from a study based on the Alexa-Top-1-Million. </p>\n\n<pre><code>urls = ['http://www.example.com',\n        'http://bloomberg.com',\n        'http://github.com',\n        'https://requestbin.fullcontact.com/',\n        'http://51sole.com',\n        'http://58.com',\n        'http://9gag.com',\n        'http://abs-cbn.com',\n        'http://academia.edu',\n        'http://accuweather.com',\n        'http://addroplet.com',\n        'http://addthis.com',\n        'http://adf.ly',\n        'http://adhoc2.net',\n        'http://adobe.com',\n        'http://1688.com',\n        'http://17ok.com',\n        'http://17track.net',\n        'http://1and1.com',\n        'http://1tv.ru',\n        'http://2ch.net',\n        'http://360.cn',\n        'http://39.net',\n        'http://4chan.org',\n        'http://4pda.ru']\n</code></pre>\n\n<p>I double checked, the last time the errors starts with the url 17.ok.com. But I have also tried different lists with urls. Thanks for your support.</p>\n"}, {"tags": ["python", "sublimetext3", "sublimetext2", "sublime-build"], "comments": [{"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564604226, "post_id": 57298223, "comment_id": 101090531, "body": "are you sure it&#39;s not running a compiler for another language? this really seems like it&#39;s trying to compile c++."}, {"owner": {"reputation": 309, "user_id": 5837840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tXoyA.jpg?s=128&g=1", "display_name": "Hid", "link": "https://stackoverflow.com/users/5837840/hid"}, "edited": false, "score": 0, "creation_date": 1564607067, "post_id": 57298223, "comment_id": 101091563, "body": "How are you running the scripts?"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "reply_to_user": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564621364, "post_id": 57298223, "comment_id": 101094713, "body": "As @Axium mentioned, it looks like you have the wrong build system selected. Check in <code>Tools &gt; Build System</code> and make sure that either ` Python` or <code>Automatic</code> is selected."}], "owner": {"reputation": 53, "user_id": 9592672, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Erin", "link": "https://stackoverflow.com/users/9592672/erin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565027355, "creation_date": 1564604104, "last_edit_date": 1565027355, "question_id": 57298223, "link": "https://stackoverflow.com/questions/57298223/sublime-link-command-error-when-run-python", "title": "Sublime link command error when run python?", "body": "<p>I am having link command error with sublime when I am trying to run python scripts. It used to work fine. </p>\n\n<pre><code>ld: warning: ignoring file /Users/Documents/sideproj/IoT/one_hot_encoding.py, file was built for unsupported file format ( 0x0A 0x69 0x6D 0x70 0x6F 0x72 0x74 0x20 0x74 0x65 0x6E 0x73 0x6F 0x72 0x66 0x6C ) which is not the architecture being linked (x86_64): /Users/Documents/sideproj/IoT/one_hot_encoding.py\nUndefined symbols for architecture x86_64:\n  \"_main\", referenced from:\n     implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n[Finished in 0.1s with exit code 1]\n</code></pre>\n\n<p>EIDT:\nThanks it is because I didn't choose the right mode in the tools->build systems.</p>\n"}, {"tags": ["python", "garbage-collection"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 2, "creation_date": 1564604208, "post_id": 57298197, "comment_id": 101090523, "body": "I&#39;m putting my money on &quot;it depends&quot; ie that&#39;s probably an implementation detail. It depends on how the GC is implemented, but I&#39;d go with &quot;no, it makes no difference&quot; for CPython. Since the GC implements a reference counting, both <code>del big_object</code> and <code>big_object = 1</code> will lower the reference count by one. It is not guaranteed when exactly the GC executes anyway."}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 1, "creation_date": 1564604220, "post_id": 57298197, "comment_id": 101090528, "body": "I don&#39;t see it serving much of a purpose unless you&#39;re running out of space for <code>additional_function_calls()</code>. If <code>additional_function_calls()</code> needs to use the space that <code>big_object</code> otherwise would have, then there is a point to this, not otherwise"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1564604346, "post_id": 57298197, "comment_id": 101090577, "body": "@inspectorG4dget correct me if I&#39;m wrong, but it is not guaranteed that the GC will execute the second that the reference count for <code>big_object</code> hits 0. It may execute a bit later which will render <code>del big_object</code> non-effective in the very short run."}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 1, "creation_date": 1564604512, "post_id": 57298197, "comment_id": 101090627, "body": "Note that, if you&#39;re having memory problems because of this, <a href=\"https://docs.python.org/3/library/gc.html\" rel=\"nofollow noreferrer\">you can invoke the garbage collector manually</a>"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1564604623, "post_id": 57298197, "comment_id": 101090673, "body": "Anyway you could force garbage collection via <a href=\"https://docs.python.org/3/library/gc.html#gc.collect\" rel=\"nofollow noreferrer\"><code>gc.collect</code></a>."}, {"owner": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "edited": false, "score": 0, "creation_date": 1564604744, "post_id": 57298197, "comment_id": 101090719, "body": "What happens when the next iteration hits <code>big_object = memory_heavy_operation(document)</code>? Is the garbage collection done immediately once the reference is over-written?"}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 2, "creation_date": 1564604968, "post_id": 57298197, "comment_id": 101090793, "body": "@DeepSpace: <code>non-effective in the very short run</code> &lt;- you&#39;re absolutely right. However, if you run out of memory entirely, then the GC will (hopefuly) be triggered. That&#39;s why I brought up the whole thing about <code>additional_function_calls</code> having space"}], "answers": [{"tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1564607486, "creation_date": 1564607486, "answer_id": 57298894, "question_id": 57298197, "link": "https://stackoverflow.com/questions/57298197/is-there-any-benefit-to-deleting-a-reference-to-a-large-python-object-before-ove/57298894#57298894", "title": "Is there any benefit to deleting a reference to a large Python object before overwriting that reference?", "body": "<p>As often in these cases; it depends. :-/</p>\n\n<p>I'm assuming we're talking about CPython here.</p>\n\n<p>Using <code>del</code> or re-assigning a name reduces the reference count for an object. Only if that reference could reaches 0 can it be de-allocated. So if you inadvertently stashed a reference to <code>big_object</code> away somewhere, using <code>del</code> won't help.</p>\n\n<p>When garbage collection is triggered depends on the amount of allocations and de-allocations. See the documentation for <a href=\"https://docs.python.org/3/library/gc.html#gc.set_threshold\" rel=\"nofollow noreferrer\"><code>gc.set_threshold()</code></a>. </p>\n\n<p>If you're pretty sure that there are no further references, you could use <a href=\"https://docs.python.org/3/library/gc.html#gc.collect\" rel=\"nofollow noreferrer\"><code>gc.collect()</code></a> to <em>force</em> a garbage collection run. That might help if your code doesn't do a lot of other allocations.</p>\n\n<p>One thing to keep in mind is that if the <code>big_object</code> is created by a <code>C</code> extension module (like e.g. <code>numpy</code>), it could manage its own memory. In that case the garbage collection won't affect it! Also small integers and small strings are pre-allocated and won't be garbage collected. You can use <a href=\"https://docs.python.org/3/library/gc.html#gc.is_tracked\" rel=\"nofollow noreferrer\"><code>gc.is_tracked()</code></a> to check if an object is managed by the garbage collector.</p>\n\n<p>What I would suggest is that you run your program with and without <code>del</code>+<code>gc.collect()</code>, and monitor the amount of RAM used. On UNIX-like systems, look at the <em>resident set size</em>. You could also use <a href=\"https://docs.python.org/3/library/sys.html#sys._debugmallocstats\" rel=\"nofollow noreferrer\"><code>sys._debugmallocstats()</code></a>.</p>\n\n<p>Unless you see the resident set size grow and grow, I wouldn't worry about it.</p>\n"}], "owner": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 57298894, "answer_count": 1, "score": 2, "last_activity_date": 1564607486, "creation_date": 1564603930, "question_id": 57298197, "link": "https://stackoverflow.com/questions/57298197/is-there-any-benefit-to-deleting-a-reference-to-a-large-python-object-before-ove", "title": "Is there any benefit to deleting a reference to a large Python object before overwriting that reference?", "body": "<p>I am running some memory-heavy scripts which iterate over documents in a database, and due to memory constraints on the server I manually delete references to the large object at the conclusion of each iteration:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for document in database:\n    initial_function_calls()\n\n    big_object = memory_heavy_operation(document)\n    save_to_file(big_object)\n\n    del big_object\n\n    additional_function_calls()\n</code></pre>\n\n<p>The <code>initial_function_calls()</code> and <code>additional_function_calls()</code> are each slightly memory-heavy. Do I see any benefit by explicitly deleting the reference to the large object for garbage collection? Alternatively, does leaving it and having it point to a new object in the next iteration suffice?</p>\n"}, {"tags": ["python", "csv", "raspberry-pi3", "i2c", "atlas"], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 9821289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sgillen", "link": "https://stackoverflow.com/users/9821289/sgillen"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604534, "creation_date": 1564604534, "answer_id": 57298313, "question_id": 57298153, "link": "https://stackoverflow.com/questions/57298153/data-logging-from-an-i2c-connected-atlas-scientific-sensor-to-a-csv-file/57298313#57298313", "title": "Data-logging from an i2c-connected Atlas Scientific Sensor to a CSV file", "body": "<p>I'm guessing by \"the polling function\" you are referring to this section of the code:</p>\n\n<pre><code># continuous polling command automatically polls the board\n        elif user_cmd.upper().startswith(\"POLL\"):\n            delaytime = float(string.split(user_cmd, ',')[1])\n\n            # check for polling time being too short, change it to the minimum timeout if too short\n            if delaytime &lt; AtlasI2C.long_timeout:\n                print(\"Polling time is shorter than timeout, setting polling time to %0.2f\" % AtlasI2C.long_timeout)\n                delaytime = AtlasI2C.long_timeout\n\n            # get the information of the board you're polling\n            info = string.split(device.query(\"I\"), \",\")[1]\n            print(\"Polling %s sensor every %0.2f seconds, press ctrl-c to stop polling\" % (info, delaytime))\n\n            try:\n                while True:\n                    print(device.query(\"R\"))\n                    time.sleep(delaytime - AtlasI2C.long_timeout)\n            except KeyboardInterrupt:       # catches the ctrl-c command, which breaks the loop above\n                print(\"Continuous polling stopped\")\n</code></pre>\n\n<p>If this is the case  then if looks like you can recycle most of this code for your use. You can grab the string you are seeing in your console with device.query(\"R\"), instead of printing it, grab the return value and write it to your CSV. </p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 11863755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cbf96ed4b206e0e3e1f1ee5f641656?s=128&d=identicon&r=PG&f=1", "display_name": "Fenrir", "link": "https://stackoverflow.com/users/11863755/fenrir"}, "is_accepted": false, "score": 0, "last_activity_date": 1564606137, "creation_date": 1564606137, "answer_id": 57298640, "question_id": 57298153, "link": "https://stackoverflow.com/questions/57298153/data-logging-from-an-i2c-connected-atlas-scientific-sensor-to-a-csv-file/57298640#57298640", "title": "Data-logging from an i2c-connected Atlas Scientific Sensor to a CSV file", "body": "<p>I think You should add method to AtlasI2C class which will write data to file</p>\n\n<p>Just type under AtlasI2C <strong>init</strong>() this method:</p>\n\n<pre><code>def update_file(self, new_data):\n    with open(self.csv_file, 'a') as data_file:\n        try:\n            data = \"{}\\n\".format(str(new_data))\n            data_file.write(data)\n        except Exception as e:\n            print(e)\n</code></pre>\n\n<p>add to AtlasI2C init statement about csv file name:</p>\n\n<pre><code>self.csv_file = &lt;my_filename&gt;.csv # replace my_filename with ur name\n</code></pre>\n\n<p>and then under line 51 (char_list = list(map(lambda x: chr(ord(x) &amp; ~0x80), list(response[1:]))) add this line:</p>\n\n<pre><code>self.update_file(''.join(char_list))\n</code></pre>\n\n<p>Hope its gonna help You.</p>\n\n<p>Cheers, \nFenrir</p>\n"}], "owner": {"reputation": 1, "user_id": 8936097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxLsgAtkuuA/AAAAAAAAAAI/AAAAAAAAAAc/HrCtPtVU7FE/photo.jpg?sz=128", "display_name": "Hunter N. Parente", "link": "https://stackoverflow.com/users/8936097/hunter-n-parente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564606137, "creation_date": 1564603702, "question_id": 57298153, "link": "https://stackoverflow.com/questions/57298153/data-logging-from-an-i2c-connected-atlas-scientific-sensor-to-a-csv-file", "title": "Data-logging from an i2c-connected Atlas Scientific Sensor to a CSV file", "body": "<p>I am relatively new to Python, and programming as a whole. I am progressively getting the hang of it, however I have been stumped as of late in regards to one of my latest projects. I have a set of Atlas Scientific EZO circuits w/ their corresponding sensors hooked up to my Raspberry Pi 3. I can run the i2c script fine, and the majority of the code makes sense to me. However, I would like to pull data from the sensors and log it with a time stamp in a CSV file, taking data points in timed intervals. I am not quite sure how to pull the data from the sensor, and put it into a CSV. Making CSVs in Python is fairly simple, as is filling them with data, but I cannot seem to understand how I would make the data that goes into the CSV the same as what is displayed in the terminal when one runs the Poll function. Attached is the i2c sample code from Atlas' website. I have annotated it a bit more so as to help me understand it better.</p>\n\n<p>I have already attempted to make sense of the poll function, but am confused in regards to the self.file_write and self.file_read methods used throughout the code. I do believe they would be of use in this instance but I am generally stumped in terms of implementation. Below you will find a link to the Python script (i2c.py) written by Atlas Scientific</p>\n\n<p><a href=\"https://github.com/AtlasScientific/Raspberry-Pi-sample-code/blob/master/i2c.py\" rel=\"nofollow noreferrer\">https://github.com/AtlasScientific/Raspberry-Pi-sample-code/blob/master/i2c.py</a></p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 8, "creation_date": 1564603639, "post_id": 57298133, "comment_id": 101090316, "body": "What are you trying to do in the <code>if</code> statements?"}, {"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 1, "creation_date": 1564603769, "post_id": 57298133, "comment_id": 101090372, "body": "It depends on what will go in your <code>if</code> block."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 11865168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48ae2a6a9c0f05dbc989d2be84dbe110?s=128&d=identicon&r=PG&f=1", "display_name": "pyQueen", "link": "https://stackoverflow.com/users/11865168/pyqueen"}, "is_accepted": false, "score": 0, "last_activity_date": 1564603893, "creation_date": 1564603893, "answer_id": 57298187, "question_id": 57298133, "link": "https://stackoverflow.com/questions/57298133/decrease-the-number-of-needed-if-statements/57298187#57298187", "title": "Decrease the number of needed if statements", "body": "<p>I'm not sure if I'm getting your question right. You want less if-Statements? If that's what you want: It depends on what you're doing in the if-Statements. If you do similar thing, that's no problem. Then you could use something like:</p>\n\n<pre><code>if 'Porsche' in a or 'Google' in a:\n    pass\n</code></pre>\n\n<p>If you're doing different things, you need all of those if statements.</p>\n"}, {"tags": [], "owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604102, "creation_date": 1564604102, "answer_id": 57298222, "question_id": 57298133, "link": "https://stackoverflow.com/questions/57298133/decrease-the-number-of-needed-if-statements/57298222#57298222", "title": "Decrease the number of needed if statements", "body": "<p>If you want less if statements, you could use a for loop running through a list.</p>\n\n<p>Example:</p>\n\n<pre><code>a = [\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\"]\n\n# you can change the values to whatever you want\nb = [\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\"]\n\n\nfor i in range(len(a)):\n    if b[i] in a:\n        pass\n</code></pre>\n\n<p>An added benefit is that it isn't hard coded, so you can change it to anything you want, and add more programmatically.</p>\n"}, {"comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 1, "creation_date": 1564604734, "post_id": 57298226, "comment_id": 101090716, "body": "One alternative can be <code>if len(set(things).intersection(a)) &gt; 0: # do something</code>. This is not the best, just one alternative."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1564605169, "post_id": 57298226, "comment_id": 101090859, "body": "@Poojan That seems like an unnecessarily complicated way of going about it, though."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1564605333, "post_id": 57298226, "comment_id": 101090918, "body": "@Poojan you could further reduce it down to <code>if set(things).intersection(a): # do something</code>, but you lose all of your readability that&#39;s quite well provided by <code>thing in collection</code>"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604116, "creation_date": 1564604116, "answer_id": 57298226, "question_id": 57298133, "link": "https://stackoverflow.com/questions/57298133/decrease-the-number-of-needed-if-statements/57298226#57298226", "title": "Decrease the number of needed if statements", "body": "<p>Assuming that the <code>pass</code> statements all represent the same code, the conditions can be combined using <code>or</code>:</p>\n\n<pre><code>if (\"Porsche\" in a) or (\"Google\" in a) or (\"Facebook\" in a) or (\"Mercedes\" in a) or (\"Audi\" in a) or (\"Twitter\" in a):\n    pass\n</code></pre>\n\n<p>(The parentheses are all optional, but they make the statement much easier to read.)</p>\n\n<p>Simplifying further using a <a href=\"https://www.python.org/dev/peps/pep-0289/\" rel=\"nofollow noreferrer\">generator expression</a>:</p>\n\n<pre><code>if any((x in a) for x in (\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\")):\n    pass\n</code></pre>\n\n<p>(As before, the parentheses around <code>(x in a)</code> are optional but help readability. The other parentheses are required.)</p>\n"}, {"tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604187, "creation_date": 1564604187, "answer_id": 57298246, "question_id": 57298133, "link": "https://stackoverflow.com/questions/57298133/decrease-the-number-of-needed-if-statements/57298246#57298246", "title": "Decrease the number of needed if statements", "body": "<p>Assuming you want to check if something is a member of the list you can use <code>in</code> to reduce the number of <code>if</code> statements:</p>\n\n<pre><code>companies_list = [\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\"]\ncount = 0\nif \"Apple\" in companies_list: # O(n)\n   count += 1\nprint(count)\n</code></pre>\n\n<p>However using <code>in</code> on a list is <code>O(n)</code> i.e. it has to check against every item in the list which is not good if you have a lot of items.</p>\n\n<p>Therefore consider using a set rather than a list, since searching in a set has <code>O(1)</code> look up time:</p>\n\n<pre><code>companies_set = {\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\"}\ncount = 0\nif \"Apple\" in companies_set: # O(1)\n   count += 1\nprint(count)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>0\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11525360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb6863b18170c0a36b4faaa578ef702?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Sanchez", "link": "https://stackoverflow.com/users/11525360/peter-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1564636550, "creation_date": 1564603597, "last_edit_date": 1564636550, "question_id": 57298133, "link": "https://stackoverflow.com/questions/57298133/decrease-the-number-of-needed-if-statements", "title": "Decrease the number of needed if statements", "body": "<p>I have this code using Python:</p>\n\n<pre><code>a = [\"Porsche\", \"Google\", \"Facebook\", \"Mercedes\", \"Audi\", \"Twitter\"]\n\nif \"Porsche\" in a:\n    pass\nif \"Google\" in a:\n    pass\nif \"Facebook\" in a:\n    pass \nif \"Mercedes\" in a:\n    pass\nif \"Audi\" in a:\n    pass\nif \"Twitter\" in a:\n    pass\n</code></pre>\n\n<p>But, with this code, I have no idea how I can decrease the number of needed <code>if</code> statements. Is there a better way using Python to do this?</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["python", "html", "scrapy", "web-crawler", "output"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1564607731, "post_id": 57298091, "comment_id": 101091805, "body": "use <code>print()</code> to check if <code>parse()</code> is executed. You can also use it to check values in variables. Display url to see what url makes problem and try to open it in browser."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9356708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Z0wNy3wBWk/AAAAAAAAAAI/AAAAAAAAAfs/P_B1qvxeDAU/photo.jpg?sz=128", "display_name": "Meredith Abrams", "link": "https://stackoverflow.com/users/9356708/meredith-abrams"}, "edited": false, "score": 0, "creation_date": 1565128995, "post_id": 57317851, "comment_id": 101253162, "body": "I just fixed the code as you recommended, however, this only seems to store the initial html page. I really need all the html files for each page the crawler hits. Is there a way to do that?"}, {"owner": {"reputation": 2231, "user_id": 10884791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82332ed6a6e926a83d6db100243ab986?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiy", "link": "https://stackoverflow.com/users/10884791/georgiy"}, "reply_to_user": {"reputation": 79, "user_id": 9356708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Z0wNy3wBWk/AAAAAAAAAAI/AAAAAAAAAfs/P_B1qvxeDAU/photo.jpg?sz=128", "display_name": "Meredith Abrams", "link": "https://stackoverflow.com/users/9356708/meredith-abrams"}, "edited": false, "score": 0, "creation_date": 1565129564, "post_id": 57317851, "comment_id": 101253304, "body": "can you add/update your question with new changed code?"}], "tags": [], "owner": {"reputation": 2231, "user_id": 10884791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82332ed6a6e926a83d6db100243ab986?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiy", "link": "https://stackoverflow.com/users/10884791/georgiy"}, "is_accepted": true, "score": 1, "last_activity_date": 1565130559, "last_edit_date": 1565130559, "creation_date": 1564699353, "answer_id": 57317851, "question_id": 57298091, "link": "https://stackoverflow.com/questions/57298091/scrapy-spider-not-saving-html-files/57317851#57317851", "title": "Scrapy spider not saving html files", "body": "<p><strong><code>parse</code> method:</strong></p>\n\n<p>According to  <a href=\"https://docs.scrapy.org/en/latest/topics/spiders.html#crawling-rules\" rel=\"nofollow noreferrer\">scrapy docs</a> and <a href=\"https://stackoverflow.com/questions/44620722/scrapy-crawlspider-crawls-nothing\">another stack overflow question</a> it is not recommended to override <code>parse</code> method because crawlspider use it to implement it's logic.<br></p>\n\n<p>If You need to override <code>parse</code> method and in the same time count with </p>\n\n<p><a href=\"https://github.com/scrapy/scrapy/blob/1.6.0/scrapy/spiders/crawl.py#L42-L43\" rel=\"nofollow noreferrer\"><code>Crawlspider.parse</code> original source code</a> - You need to add it's original source to fix <code>parse</code> method:</p>\n\n<pre><code>def parse(self, response):\n    filename = response.url.split(\"/\")[-1] + '.html'\n    with open(filename, 'wb') as f:\n        f.write(response.body)\n    return self._parse_response(response, self.parse_start_url, cb_kwargs={}, follow=True)\n</code></pre>\n\n<p><strong>csv feed:</strong><br>\nThis log line:\n<code>2019-07-23 14:16:41 [scrapy.extensions.feedexport] INFO: Stored csv feed (153 items) in: exampledomainlevel1.csv</code> - means that csv <code>feedexporter</code> enabled (probably in <code>settings.py</code> project settings file.)</p>\n\n<p><strong>UPDATE</strong>\n<br> I observed <code>Crawlspider</code> source code again.\n<br> It looks like <code>parse</code> method called only once at the beginning and it don't cover all web responses.<br>\nIf my theory correct - after adding this function to your spider class should save all html responses:</p>\n\n<pre><code>def _response_downloaded(self, response):\n    filename = response.url.split(\"/\")[-1] + '.html'\n    with open(filename, 'wb') as f:\n        f.write(response.body)    \n    rule = self._rules[response.meta['rule']]\n    return self._parse_response(response, rule.callback, rule.cb_kwargs, rule.follow)\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 9356708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Z0wNy3wBWk/AAAAAAAAAAI/AAAAAAAAAfs/P_B1qvxeDAU/photo.jpg?sz=128", "display_name": "Meredith Abrams", "link": "https://stackoverflow.com/users/9356708/meredith-abrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 57317851, "answer_count": 1, "score": 1, "last_activity_date": 1565130559, "creation_date": 1564603359, "last_edit_date": 1564604974, "question_id": 57298091, "link": "https://stackoverflow.com/questions/57298091/scrapy-spider-not-saving-html-files", "title": "Scrapy spider not saving html files", "body": "<p>I have a Scrapy spider that I've generated. The purpose of the spider is to return network data for the purposes of graphing the network as well as to return the html files for each page the spider reaches.  The spider is achieving the first goal but not the second. It results in a csv file with the tracking information but I cannot see that it is saving the html files.</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom scrapy.selector import HtmlXPathSelector\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.contrib.spiders import CrawlSpider, Rule\nfrom scrapy.utils.url import urljoin_rfc\nfrom sitegraph.items import SitegraphItem\n\n\nclass CrawlSpider(CrawlSpider):\n    name = \"example\"\n    custom_settings = {\n    'DEPTH_LIMIT': '1',\n    }\n    allowed_domains = []\n    start_urls = (\n        'http://exampleurl.com',\n    )\n\n    rules = (\n        Rule(LinkExtractor(allow=r'/'), callback='parse_item', follow=True),\n    )\n\n    def parse_item(self, response):\n        hxs = HtmlXPathSelector(response)\n        i = SitegraphItem()\n        i['url'] = response.url\n        # i['http_status'] = response.status\n        llinks=[]\n        for anchor in hxs.select('//a[@href]'):\n            href=anchor.select('@href').extract()[0]\n            if not href.lower().startswith(\"javascript\"):\n                llinks.append(urljoin_rfc(response.url,href))\n        i['linkedurls'] = llinks\n        return i\n\n    def parse(self, response):\n        filename = response.url.split(\"/\")[-1] + '.html'\n        with open(filename, 'wb') as f:\n            f.write(response.body)\n</code></pre>\n\n<p>The traceback I receive is as follows: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"...\\Anaconda3\\lib\\site-packages\\scrapy\\core\\downloader\\middleware.py\", line 43, in process_request\n    defer.returnValue((yield download_func(request=request,spider=spider)))\ntwisted.internet.error.TCPTimedOutError: TCP connection timed out: 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..\n2019-07-23 14:16:41 [scrapy.downloadermiddlewares.retry] DEBUG: Gave up retrying &lt;GET http://externalurl.com/&gt; (failed 3 times): TCP connection timed out: 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..\n2019-07-23 14:16:41 [scrapy.core.scraper] ERROR: Error downloading &lt;GET http://externalurl.com/&gt;\nTraceback (most recent call last):\n  File \"...\\Anaconda3\\lib\\site-packages\\scrapy\\core\\downloader\\middleware.py\", line 43, in process_request\n    defer.returnValue((yield download_func(request=request,spider=spider)))\ntwisted.internet.error.TCPTimedOutError: TCP connection timed out: 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..\n2019-07-23 14:16:41 [scrapy.core.engine] INFO: Closing spider (finished)\n2019-07-23 14:16:41 [scrapy.extensions.feedexport] INFO: Stored csv feed (153 items) in: exampledomainlevel1.csv\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "xpath", "webdriverwait"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11772794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be5ec0b4327b23b97589e7d26a9b483?s=128&d=identicon&r=PG&f=1", "display_name": "jonpie", "link": "https://stackoverflow.com/users/11772794/jonpie"}, "edited": false, "score": 1, "creation_date": 1564605243, "post_id": 57298202, "comment_id": 101090886, "body": "Awesome! I did not realize a JavaScript element would have to be called like that. I have almost 0 knowledge of html or js. This explains things and got my stuff working! I am curious how you were able to locate that element so easily? I tried so many <code>driver.find_element_by...</code> calls and the Alaska string never did it for me"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1564603948, "creation_date": 1564603948, "answer_id": 57298202, "question_id": 57298077, "link": "https://stackoverflow.com/questions/57298077/copy-xpath-doesnt-provide-correct-xpath/57298202#57298202", "title": "Copy xpath Doesn&#39;t Provide Correct xpath?", "body": "<p>The desired element is a <a href=\"https://www.javascript.com/\" rel=\"nofollow noreferrer\">JavaScript</a> enabled element so to <code>click()</code> on the element you have to induce <em>WebDriverWait</em> for the <code>element_to_be_clickable()</code> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>LINK_TEXT</code>:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.LINK_TEXT, \"Alaska\"))).click()\n</code></pre></li>\n<li><p>Using (logical) <code>XPATH</code> (instead of absolute xpath):</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//a[contains(@onclick, 'toggleDisplay') and text()='Alaska']\"))).click()\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 11772794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be5ec0b4327b23b97589e7d26a9b483?s=128&d=identicon&r=PG&f=1", "display_name": "jonpie", "link": "https://stackoverflow.com/users/11772794/jonpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 57298202, "answer_count": 1, "score": 1, "last_activity_date": 1564603948, "creation_date": 1564603320, "last_edit_date": 1564603918, "question_id": 57298077, "link": "https://stackoverflow.com/questions/57298077/copy-xpath-doesnt-provide-correct-xpath", "title": "Copy xpath Doesn&#39;t Provide Correct xpath?", "body": "<p>I've been trying to click a button using selenium package in python. I've been having trouble figuring out how to identify the button, though. After way too much time, I tried manually copying the <code>xpath</code> from the javascript console, but get a <code>NoSuchElementException</code> when I try to call <code>driver.find_element_from_xpath('&lt;xpath&gt;')</code>. </p>\n\n<p>I'm really not sure how that's possible. The HTML is extremely long - what I'm ultimately trying to locate is nested under multiple table, body, td, tr tags. Here's the element though:</p>\n\n<pre><code>&lt;a href=\"Javascript:void\" onclick=\"javascript:toggleDisplay(this, trAK);return false;\"&gt;Alaska&lt;/a&gt;\n</code></pre>\n\n<p>When I clicked \"Copy Xpath\" in Chrome, it returned this string: <code>//*[@id=\"Form1\"]/table/tbody/tr[3]/td/table/tbody/tr[1]/td/table/tbody/tr/td/table/tbody/tr[2]/td/table/tbody/tr[5]/td/table/tbody/tr[3]/td/table[1]/tbody/tr[1]/td[2]/a</code></p>\n\n<p>I'm pretty new to this so can anyone help me understand why this won't work and/or what I could do to fix it?</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564604742, "post_id": 57298067, "comment_id": 101090717, "body": "did you try it ? Create code to try it and if you get error then come back."}], "answers": [{"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1564612877, "post_id": 57298575, "comment_id": 101093175, "body": "I believe this to be the simplest solution but: if you don&#39;t consider the physical size of your window, you can screw up your aspect ratio, if that&#39;s important to you; because it does a <code>reset()</code>, it undoes some screen properties so I tend to use it early in my programs before setting other screen properties.  I can&#39;t recall what it does about images."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1564613606, "post_id": 57298575, "comment_id": 101093305, "body": "@cdlane this confirms my fears that sometimes it may not be so useful."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 2, "last_activity_date": 1564613546, "last_edit_date": 1564613546, "creation_date": 1564605849, "answer_id": 57298575, "question_id": 57298067, "link": "https://stackoverflow.com/questions/57298067/is-there-a-native-function-in-turtle-that-resizes-an-image-to-fit-the-window/57298575#57298575", "title": "Is there a native function in Turtle that resizes an image to fit the window?", "body": "<p>This example uses <code>setworldcoordinates</code> to slowly change size. </p>\n\n<pre><code>from turtle import *\nimport time\n\nscreen = getscreen()\nscreen.setworldcoordinates(-50,-20, 50, 20)\n\nfor _ in range(8):\n    left(45)\n    fd(4)\n\nx = 2.5 # 50/20\ny = 1\nfor i in range(20):\n    time.sleep(0.1)\n    screen.setworldcoordinates(-50 - x*i, -20 - y*i, 50 + x*i, 20 + y*i)\n\nexitonclick()\n</code></pre>\n\n<p>It seems the simples method to resize all objects but I never used it so I'm wondering if it is really useful.</p>\n"}], "owner": {"reputation": 154, "user_id": 11726426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f4f7afa075c7837a83f0a304bacba5?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Rees", "link": "https://stackoverflow.com/users/11726426/eli-rees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57298575, "answer_count": 1, "score": 1, "last_activity_date": 1564613546, "creation_date": 1564603270, "question_id": 57298067, "link": "https://stackoverflow.com/questions/57298067/is-there-a-native-function-in-turtle-that-resizes-an-image-to-fit-the-window", "title": "Is there a native function in Turtle that resizes an image to fit the window?", "body": "<p>Is there a function native to the Turtle library that would automatically resize the lines/shapes drawn so they all appear within the window (ie. so lo lines are drawn outside the window)? To clarify, I'm not asking about a way to make the window larger, rather, a function that reduces the size of the things the turtle has drawn. </p>\n\n<p>Searching through the Turtle documentation (<a href=\"https://docs.python.org/3.3/library/turtle.html?highlight=turtle\" rel=\"nofollow noreferrer\">https://docs.python.org/3.3/library/turtle.html?highlight=turtle</a>) there appears to be a function called setworldcoordinates(). It looks like it translates the objects already on the screen to a new coordinate system, which I think could be used to shrink things. If this is correct, is this the simplest method?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1564603311, "post_id": 57298052, "comment_id": 101090194, "body": "What do you mean by &quot;doesn&#39;t work&quot; - error message, wrong answer, infinite loop, ...? Also what you show as &quot;raw data&quot; has no commas. So are you looking at it in Excel or something? Can you show the actual raw data?"}, {"owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "edited": false, "score": 1, "creation_date": 1564603343, "post_id": 57298052, "comment_id": 101090203, "body": "Maybe do it in 2 passes? Read the data into a dict keyed by file. Then create the output with one row per file."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "edited": false, "score": 0, "creation_date": 1564605520, "post_id": 57298127, "comment_id": 101090986, "body": "Thank you. This did it. Python is so cool. I cant believe it was a oneliner code"}, {"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "edited": false, "score": 0, "creation_date": 1564605664, "post_id": 57298127, "comment_id": 101091045, "body": "Please can you point me to some useful books, resources for such type of information, so i could refer such information in the future"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "edited": false, "score": 0, "creation_date": 1564648560, "post_id": 57298127, "comment_id": 101102720, "body": "@user3423407, yes, you may start reading &quot;Python for Data Analysis&quot; book and pandas off. documentation"}], "tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": true, "score": 1, "last_activity_date": 1564603572, "creation_date": 1564603572, "answer_id": 57298127, "question_id": 57298052, "link": "https://stackoverflow.com/questions/57298052/how-to-parse-csv-data-to-show-certain-rows-as-columns/57298127#57298127", "title": "How to parse csv data, to show certain rows as columns", "body": "<p>With <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html\" rel=\"nofollow noreferrer\"><code>pandas.pivot_table</code></a> routine:</p>\n\n<pre><code>In [9]: df.pivot_table(index='file', columns='action', values='_time', aggfunc='first')                           \nOut[9]: \naction                           get                           put\nfile                                                              \nabc     2019-07-24T02:01:02.930-0400  2019-07-24T00:30:10.927-0400\ndef     2019-07-24T05:01:02.930-0400  2019-07-24T04:30:10.927-0400\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "is_accepted": false, "score": 0, "last_activity_date": 1564607854, "last_edit_date": 1564607854, "creation_date": 1564603806, "answer_id": 57298169, "question_id": 57298052, "link": "https://stackoverflow.com/questions/57298052/how-to-parse-csv-data-to-show-certain-rows-as-columns/57298169#57298169", "title": "How to parse csv data, to show certain rows as columns", "body": "<p>If you don't have pandas you can do it in pure python with a simple loop:</p>\n\n<pre><code>files = {}\n\nwith open('/tmp/input.csv') as input:\n  reader = csv.reader(input, delimiter=',')\n  for (time, action, file) in reader:\n    files.setdefault(file, {})\n    files[file][action] = time\n\nwith open('/tmp/output.csv', 'w') as output:\n  writer = csv.writer(output, delimiter=',')\n  for (key, val) in files.items():\n    writer.writerow((key, val['get'], val['put']))\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57298127, "answer_count": 2, "score": 1, "last_activity_date": 1564607854, "creation_date": 1564603170, "question_id": 57298052, "link": "https://stackoverflow.com/questions/57298052/how-to-parse-csv-data-to-show-certain-rows-as-columns", "title": "How to parse csv data, to show certain rows as columns", "body": "<p>I want to show the row value as a column for a values in a certain column</p>\n\n<p>Raw data</p>\n\n<pre><code>For eg\n\n_time                         action    file\n2019-07-24T02:01:02.930-0400    get     abc\n2019-07-24T00:30:10.927-0400    put     abc\n2019-07-24T05:01:02.930-0400    get     def\n2019-07-24T04:30:10.927-0400    put     def\n</code></pre>\n\n<p>and so on</p>\n\n<p>I want the output to be</p>\n\n<pre><code>File  put                            get\nabc  2019-07-24T00:30:10.927-0400    2019-07-24T02:01:02.930-0400\ndef  2019-07-24T04:30:10.927-0400    2019-07-24T05:01:02.930-0400\n</code></pre>\n\n<p>I was thinking i can do it in for loop? so</p>\n\n<pre><code>with open('raw.csv','r') as csv_file:\n        csv_reader = csv.reader(csv_file, delimiter=',')\n        for line in csv_reader:\n                if line[0] != \"\":\n                        file = line[0]\n                           if line[1] == \"get\" and file in {file}\n                                   gettime = line[1]\n                           if line[1] == \"put\" and file in {file}\n                                   puttime = line[1]\n                print file,puttime,gettime\n\n</code></pre>\n\n<p>This doesnt work though</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pandas-groupby"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 2, "creation_date": 1564603477, "post_id": 57298048, "comment_id": 101090255, "body": "Honestly, I would read the <code>csv</code> twice, the first just 2 rows, then the second to get all of the data. With the above everything is <code>object</code> so you have to then convert all of the datatypes appropriately, instead of letting <code>pandas</code> do that automatically."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1564603566, "post_id": 57298048, "comment_id": 101090285, "body": "Can you post the first few lines of the csv as formatted text (in a code block) instead of the above image?"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1564603806, "post_id": 57298048, "comment_id": 101090386, "body": "as someone who routinely cleans messy SAP data which comes with n number of header rows mostly crosstabs, I agree with ALollz, read in the df twice or slice it using <code>.loc</code> or <code>.iloc</code> to wrangle your headers."}, {"owner": {"reputation": 161, "user_id": 3374780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46fad08f2c97449b4b72ca9f486b3aa?s=128&d=identicon&r=PG&f=1", "display_name": "SUN", "link": "https://stackoverflow.com/users/3374780/sun"}, "edited": false, "score": 0, "creation_date": 1564604235, "post_id": 57298048, "comment_id": 101090534, "body": "We can read file once, loop it for n rows, concat individual row per column and store in new data frame, populate rest of file data in dataframe as is."}], "answers": [{"tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1564604382, "creation_date": 1564604382, "answer_id": 57298280, "question_id": 57298048, "link": "https://stackoverflow.com/questions/57298048/join-row-contents-element-wise-in-pandas/57298280#57298280", "title": "Join row contents element-wise in pandas", "body": "<p>I usually handle data like this as follows : </p>\n\n<p>just creating some dummy data for you, please prepare this for SO in future, it really helps others answer your question easily. (also incase anyone has a better answer)!</p>\n\n<pre><code>pore_throat = ['(nm)',21638,20542,19431.2,18262.85]\ninjection_pres = ['(psi)',4.93,5.19,5.49,5.82]\ndf = pd.DataFrame({'pore throat radius' : pore_throat,\n             'Injection Pressure' : injection_pres})\n</code></pre>\n\n<p>assuming your data is called file:</p>\n\n<pre><code>df_cols = pd.read_csv(file,nrows=1)\n\ncols = df_cols.columns + ' ' + df_cols.iloc[0]\ndf = pd.read_csv(file,skiprows=1) # skip the string row so the dtypes are numbers/floats.\ndf.columns = cols\nprint(df)\npore throat radius (nm)     Injection Pressure (psi)\n1   21638.00    4.93\n2   20542.00    5.19\n3   19431.20    5.49\n4   18262.85    5.82\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 1198861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47ff20502a68ac696b68b88913f8563?s=128&d=identicon&r=PG", "display_name": "aampere", "link": "https://stackoverflow.com/users/1198861/aampere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57298280, "answer_count": 1, "score": 2, "last_activity_date": 1564604382, "creation_date": 1564603149, "question_id": 57298048, "link": "https://stackoverflow.com/questions/57298048/join-row-contents-element-wise-in-pandas", "title": "Join row contents element-wise in pandas", "body": "<p>Sometimes my csv's have more than one header row, all of which are important. For instance, the second header row might contain the scientific unit of the values in the column. I need to combine the header rows into one header row so that I can do operations and plots on the numerical data. I want to be able to do this for the first n lines in the csv, or rows in the dataframe, where I specify n.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NqLrE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NqLrE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Alternate suggestions on how to deal with this problem welcome. Editing each csv is not viable. pandas beginner here, but not new to programming.</p>\n"}, {"tags": ["python", "error-handling", "python-os"], "comments": [{"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 1, "creation_date": 1564603047, "post_id": 57298013, "comment_id": 101090110, "body": "Maybe try doing it the other way around? <code>saved = False</code> initially, and then <code>saved = True</code> just after <code>os.rename()</code>, before the <code>except</code> block. And put a <code>continue</code> in the <code>except</code> block."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1564603859, "post_id": 57298013, "comment_id": 101090406, "body": "@GreenCloakGuy even more idiomatic in Python, skip the &quot;saved&quot; flag altogether and use just <code>while True</code> breaking the loop when operation succeeds."}], "answers": [{"tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": false, "score": 1, "last_activity_date": 1564604615, "last_edit_date": 1564604615, "creation_date": 1564603702, "answer_id": 57298152, "question_id": 57298013, "link": "https://stackoverflow.com/questions/57298013/python-error-handling-not-working-as-intended/57298152#57298152", "title": "Python error handling not working as intended", "body": "<p>I dare to say almost every <code>while</code> loop in Python that is not <code>while True</code> is a code smell. This is untested but should nudge you in the right direction:</p>\n\n<pre><code>max_retries = 10\nretry_time = 0.1\nretries = 10\n\nwhile True:\n    retries += 1\n    try:\n         os.rename(image_path, save_path)\n    except FileNotFoundError:\n         time.sleep(retry_time)  # lets avoid CPU spikes\n    else:\n         break  # Everything OK, lets move on\n    if retries &gt; max_retries:\n         # We don't want to get stuck if for some reason the file\n         # is deleted before we move it or if it never arrives.\n         msg = f\"Failed to move {image_path} to {save_path} after {retries} times.\"\n         raise Exception(msg)  # or log the event and break the loop\n</code></pre>\n\n<p>There are several options of \"retry\" decorators for Python, try to google \"python retry decorator\".</p>\n"}], "owner": {"reputation": 19, "user_id": 7729258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377c3976f2989ca0b8dd6f2e23fc8f23?s=128&d=identicon&r=PG&f=1", "display_name": "deathwing_destroyer", "link": "https://stackoverflow.com/users/7729258/deathwing-destroyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564604615, "creation_date": 1564602924, "last_edit_date": 1564603714, "question_id": 57298013, "link": "https://stackoverflow.com/questions/57298013/python-error-handling-not-working-as-intended", "title": "Python error handling not working as intended", "body": "<p>The below code is meant to handle an error and keep trying until it succeeds. Very rarely a FileNotFound error will be thrown (I can see them in console) but in these cases it doesn't seem to be trying again, as I do not get a new image when the error trips.</p>\n\n<pre><code>saved = False\nwhile not saved:\n        saved = True\n        try:\n            os.rename(imagePath, savePath)\n        except FileNotFoundError:\n            saved = False\n</code></pre>\n"}, {"tags": ["python", "bash", "amazon-web-services", "aws-lambda"], "comments": [{"owner": {"reputation": 1446, "user_id": 1930817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66Aja.jpg?s=128&g=1", "display_name": "guzmonne", "link": "https://stackoverflow.com/users/1930817/guzmonne"}, "edited": false, "score": 1, "creation_date": 1564606635, "post_id": 57298009, "comment_id": 101091388, "body": "Why don&#39;t you try to create your own &quot;Build Environment&quot; which is basically a Docker container. Check this blog post <a href=\"https://aws.amazon.com/blogs/devops/extending-aws-codebuild-with-custom-build-environments/\" rel=\"nofollow noreferrer\">Extending AWS CodeBuild with Custom Build Environments</a>. If you can make it work on a container in your machine, it should work with CodeBuild and the same &quot;Build Environment&quot;."}, {"owner": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564657778, "post_id": 57298009, "comment_id": 101107756, "body": "The bash script that you show here doesn&#39;t contain the line &quot;Copying Lambdas to S3 Lambda Repository&quot;; please post the correct script."}, {"owner": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 1, "creation_date": 1564657840, "post_id": 57298009, "comment_id": 101107802, "body": "For what it&#39;s worth, the output on the first example looks like it&#39;s coming from zip, so I would suspect that you&#39;re running zip in the background and not all of the files are ready when you start the upload."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3046253"}, "reply_to_user": {"reputation": 1446, "user_id": 1930817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66Aja.jpg?s=128&g=1", "display_name": "guzmonne", "link": "https://stackoverflow.com/users/1930817/guzmonne"}, "edited": false, "score": 0, "creation_date": 1564678385, "post_id": 57298009, "comment_id": 101119421, "body": "Thanks kdgregory &amp; @guzmonne. I was able to resolve using the steps below."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3046253"}, "reply_to_user": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564679038, "post_id": 57298009, "comment_id": 101119747, "body": "@kdgregory - would have been worth a lot if I had seen it before inserting set -x and realizing the issue; but your hunch was spot on. Thank you again."}], "owner": {"user_type": "does_not_exist", "display_name": "user3046253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573136991, "creation_date": 1564602900, "last_edit_date": 1573136991, "question_id": 57298009, "link": "https://stackoverflow.com/questions/57298009/python-lambda-package-deploy-bash", "title": "Python Lambda Package &amp; Deploy Bash", "body": "<p>From my buildspec.yml (within CodeBuild) I execute a bash file (code below), to copy, rename, zip, move, then upload 168 Python lambdas to S3. Average size of Lambda zip is 381KB.</p>\n\n<p>Locally, Mac running Mojave 10.14, the bash executes successfully as expected, every time.</p>\n\n<p>When running in the build container, Linux (Ubuntu 18.04 - aws/codebuild/standard:2.0), the script never fully succeeds, but does not throw an error either. At best, 5 - 9 zip files are uploaded into S3, if the script even gets that far.</p>\n\n<p>I've tried a plethora of corrective actions, from optimizing the bash (e.g. not copying to _staging directory and not moving the zips) to employing copy instead of sync in the S3 upload, to increasing the environment compute power to max.</p>\n\n<p>My only \"clue\" as to the issue is output begins to log when not expected. \ne.g.</p>\n\n<pre><code>Copying Lambdas to S3 Lambda Repository    \nadding: psycopg2/psycopg1.py (deflated 56%) \nadding: psycopg2/__init__.py (deflated 65%)\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>Copying Lambdas to S3 Lambda Repository \nupload: _deploy/beta-forgot-password.zip to s3://beta-com-lambdas/20190731142007/beta-forgot-password.zip\nupload: _deploy/beta-change-password.zip to s3://beta-com-lambdas/20190731142007/beta-change-password.zip\n</code></pre>\n\n<p>Any thoughts appreciated. Thanks in advance.</p>\n\n<pre><code>#!/bin/bash\nBUILD_ENVIRONMENT=$1\nUNIQUE_KEY=$2\necho 'Executing Lambda Package and Deployment for: '$BUILD_ENVIRONMENT' environment';\necho 'Unique Lambda S3 Key: ' $UNIQUE_KEY\necho 'Creating Lambda Staging Directory';\nmkdir ./_staging ;\necho 'Copying Lambdas to Staging Directory' ;\ncp -r ./lambdas/* ./_staging;\necho 'Renaming Lambdas in Staging Directory' ;\ncd _staging\nfor i in */; do mv \"$i\" \"$BUILD_ENVIRONMENT-${i%/}\" ; done\necho 'Zipping Lambdas in Staging Directory' ;\nfor i in */; do (cd \"$i\"; zip -r \"../${i%/}.zip\" .) &amp;&gt; /dev/null ;\necho \"Zipping: ${i%/}.zip\" ; done\necho 'Creating Lambda Deploy Directory' ;\nmkdir ./_deploy ;\necho 'Moving Lambda Deployment Packages' ;\nfind . -name \"*.zip\" -exec mv {} ./_deploy \\;\necho \"Sync Lambdas to S3 Lambda Repository \"\naws sync ./_deploy s3://$BUILD_ENVIRONMENT-smc-com-lambdas/$UNIQUE_KEY/\necho \"Lambda Package and Deployment Completed\"\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "jupyter-notebook", "jupyterhub", "amazon-eks"], "answers": [{"comments": [{"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 1, "creation_date": 1564781840, "post_id": 57333683, "comment_id": 101157196, "body": "At least you figured it out!"}], "tags": [], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "is_accepted": false, "score": 3, "last_activity_date": 1564781620, "creation_date": 1564781620, "answer_id": 57333683, "question_id": 57297987, "link": "https://stackoverflow.com/questions/57297987/jupyterhub-kernel-connection-returns-http504-gateway-timeout/57333683#57333683", "title": "JupyterHub kernel connection returns HTTP504 GATEWAY_TIMEOUT", "body": "<p>The issue was that we switched the proxy-public ELB to listen on http instead of tcp and this broke the kernel endpoint since it uses web sockets </p>\n\n<p>I wish we did not discover this 10 minutes after offering a 100 rep bounty :(</p>\n"}, {"tags": [], "owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "is_accepted": true, "score": 1, "last_activity_date": 1565297980, "last_edit_date": 1565297980, "creation_date": 1565296959, "answer_id": 57420321, "question_id": 57297987, "link": "https://stackoverflow.com/questions/57297987/jupyterhub-kernel-connection-returns-http504-gateway-timeout/57420321#57420321", "title": "JupyterHub kernel connection returns HTTP504 GATEWAY_TIMEOUT", "body": "<p>The issue was that the proxy-public ELB was switched to listen on http instead of tcp and this broke the kernel endpoint since it uses web sockets.</p>\n\n<p>Credit goes to the OP for figuring out their own issue.</p>\n"}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 57420321, "answer_count": 2, "score": 4, "last_activity_date": 1565297980, "creation_date": 1564602744, "last_edit_date": 1565033568, "question_id": 57297987, "link": "https://stackoverflow.com/questions/57297987/jupyterhub-kernel-connection-returns-http504-gateway-timeout", "title": "JupyterHub kernel connection returns HTTP504 GATEWAY_TIMEOUT", "body": "<p>I am deploying <a href=\"https://i.stack.imgur.com/0jCMZ.png\" rel=\"nofollow noreferrer\">JupyterHub</a> 0.8.2 to kubernetes (EKS on AWS, v1.13).</p>\n\n<p>When I deploy the JupyterHub application to EKS via helm, everything deploys and starts fine. However, when I spawn a notebook server and create a python notebook, the kernel hangs when trying to connect. (See screenshots at the bottom)</p>\n\n<p>I saw a similar issue posted here: <a href=\"https://github.com/jupyter/notebook/issues/2664\" rel=\"nofollow noreferrer\">https://github.com/jupyter/notebook/issues/2664</a>, it seems there was a regression in tornado python package. However, I tried downgrading to 5.1.1 and that did not fix the issue...</p>\n\n<p>What are the next troubleshooting steps I can try? Where can I find diagnostic info / logs for python kernel?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ul0i6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ul0i6.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/0jCMZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0jCMZ.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Update:</strong> one of our existing clusters that was running fine for about 2 months, started experiencing this kernel issue just today. This makes me wonder if this is some sort of regression, however how would this affect a jupyterhub deployment that has not been modified? Does jupyterhub update libraries/packages by itself, without consent?</p>\n\n<p><strong>Update 2:</strong> I inspected network traffic in browser, and discovered that the request to <code>https://&lt;&lt;JUPYTERHUB_DOMAIN&gt;&gt;/user/me/api/kernels/&lt;&lt;KERNEL_ID&gt;&gt;/channels?session_id=&lt;&lt;SESSION_ID&gt;&gt;</code> is returning <code>HTTP 504 GATEWAY_TIMEOUT</code></p>\n\n<p>Detailed HTTP request:</p>\n\n<pre><code>GET wss://&lt;&lt;MY_JHUB_DOMAIN&gt;&gt;/user/me/api/kernels/eaf397d3-36da-473c-8342-c4d4d3ad5256/channels?session_id=fa79dc80238648b8b1ea4c3982cb0612 HTTP/1.1\nHost: &lt;&lt;MY_JHUB_DOMAIN&gt;&gt;\nConnection: Upgrade\nPragma: no-cache\nCache-Control: no-cache\nUpgrade: websocket\nOrigin: https://&lt;&lt;MY_JHUB_DOMAIN&gt;&gt;\nSec-WebSocket-Version: 13\nUser-Agent: redacted\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nCookie: redacted\nSec-WebSocket-Key:redacted\nSec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\n</code></pre>\n\n<p>Detailed HTTP response:</p>\n\n<pre><code>HTTP/1.1 504 GATEWAY_TIMEOUT\nContent-Length: 0\nConnection: keep-alive\n\ndata:undefined,\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1564603035, "post_id": 57297979, "comment_id": 101090104, "body": "whats your desired output?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1564603071, "post_id": 57297979, "comment_id": 101090123, "body": "<code>apply(lambda row: ..., axis=1)</code>."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1564603237, "post_id": 57297979, "comment_id": 101090172, "body": "typo in <code>length</code>?  <code>df[&#39;lenght&#39;] = ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1564603525, "creation_date": 1564603525, "answer_id": 57298121, "question_id": 57297979, "link": "https://stackoverflow.com/questions/57297979/adding-white-spaces-after-strings-in-pandas-dataframe-typeerror-string-indices/57298121#57298121", "title": "Adding White Spaces after strings in pandas dataframe: TypeError: string indices must be integers", "body": "<p>We do not need to use apply </p>\n\n<pre><code>df['Fruit']+ df['lenght'].map(lambda x : ' '*x)+df['Color']\nOut[689]: \n0                Apple     Red\n1             Mango     Yellow\n2    Watermelon          Green\ndtype: object\n</code></pre>\n\n<p>Fix your code : 1 type , 2 adding ''</p>\n\n<pre><code>df.apply(lambda row: row['Fruit']+ (' '* row['lenght'])+row['Color'],axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1564603615, "creation_date": 1564603615, "answer_id": 57298136, "question_id": 57297979, "link": "https://stackoverflow.com/questions/57297979/adding-white-spaces-after-strings-in-pandas-dataframe-typeerror-string-indices/57298136#57298136", "title": "Adding White Spaces after strings in pandas dataframe: TypeError: string indices must be integers", "body": "<p>If you really want to use <code>apply</code>:</p>\n\n<pre><code>df['Fruit_color'] = df.apply(lambda x: x['Fruit'] + ' '*x['length'] + x['Color'], axis=1)\n                                                            ^^                       ^^\n</code></pre>\n\n<p>Be careful of quoting column names, else Python will think you're calling a variable. Also be careful of spelling your variable names right, you used both <code>length</code> and <code>lenght</code> </p>\n"}, {"comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1564605073, "post_id": 57298206, "comment_id": 101090819, "body": "Could you care to explain this part  please:<code>*map(df.get, df))</code> ? I almost understand it, but I&#39;m not quite sure what it is doing"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 1, "creation_date": 1564605192, "post_id": 57298206, "comment_id": 101090866, "body": "I added a blurb about it"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1564605162, "last_edit_date": 1564605162, "creation_date": 1564603970, "answer_id": 57298206, "question_id": 57297979, "link": "https://stackoverflow.com/questions/57297979/adding-white-spaces-after-strings-in-pandas-dataframe-typeerror-string-indices/57298206#57298206", "title": "Adding White Spaces after strings in pandas dataframe: TypeError: string indices must be integers", "body": "<h3>Comprehension</h3>\n\n<p><code>zip(*map(df.get, df))</code> is another way to do <code>df.itertuples(index=False)</code></p>\n\n<pre><code>[f'{f}{\" \" * l}{c}' for f, c, l in zip(*map(df.get, df))]\n\n['Apple     Red', 'Mango     Yellow', 'Watermelon          Green']\n</code></pre>\n\n<p>\u200b</p>\n\n<p>As a new column</p>\n\n<pre><code>df.assign(New=[f'{f}{\" \" * l}{c}' for f, c, l in zip(*map(df.get, df))])\n\n        Fruit   Color  length                        New\n0       Apple     Red       5              Apple     Red\n1       Mango  Yellow       5           Mango     Yellow\n2  Watermelon   Green      10  Watermelon          Green\n</code></pre>\n\n<p>Without the need for an intermediate step of assigning <code>length</code></p>\n\n<pre><code>df.assign(New=[f'{f}{\" \" * len(f)}{c}' for f, c in zip(df.Fruit, df.Color)])\n\n        Fruit   Color                        New\n0       Apple     Red              Apple     Red\n1       Mango  Yellow           Mango     Yellow\n2  Watermelon   Green  Watermelon          Green\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 9542169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86709f3e2bbe808861a66fbc853f1939?s=128&d=identicon&r=PG&f=1", "display_name": "Ren Lyke", "link": "https://stackoverflow.com/users/9542169/ren-lyke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 57298121, "answer_count": 3, "score": 1, "last_activity_date": 1565020235, "creation_date": 1564602711, "last_edit_date": 1565020235, "question_id": 57297979, "link": "https://stackoverflow.com/questions/57297979/adding-white-spaces-after-strings-in-pandas-dataframe-typeerror-string-indices", "title": "Adding White Spaces after strings in pandas dataframe: TypeError: string indices must be integers", "body": "<p>I am trying to create a new column based on the length of a string and adding whites spaces to end of the string.</p>\n\n<pre><code>data={ 'Fruit':['Apple','Mango','Watermelon'],\n'Color':['Red','Yellow','Green']\n}\ndf = pd.DataFrame(data)\ndf['length']=df['Fruit'].str.len()\ndf['Fruit_color']=df.apply(lambda row: row['Fruit']+ (' '* row[length])+row['color'])\n</code></pre>\n\n<p>i get the error <code>\u201cTypeError: string indices must be integers\u201d?</code></p>\n\n<p>When i change the code only to this</p>\n\n<pre><code>df['white_space']=df.apply(lambda row:  (' '* row[length])) \ni get KeyError: ('length', 'occurred at index Fruit')\n</code></pre>\n\n<p>How do i avoid these errors to get the desired result</p>\n\n<p>Regards,\nRen.</p>\n"}, {"tags": ["python", "loops", "for-loop"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1564602717, "post_id": 57297967, "comment_id": 101089988, "body": "You have not asked a question."}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564602826, "post_id": 57297967, "comment_id": 101090028, "body": "What is the current output of your code?"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1564603053, "post_id": 57297967, "comment_id": 101090112, "body": "that just means no instance of <code>item.field</code> has value of <code>status</code>."}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 1, "creation_date": 1564603147, "post_id": 57297967, "comment_id": 101090149, "body": "Could you show us what <code>changelog</code> looks like?"}, {"owner": {"reputation": 125, "user_id": 5484958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/366a69261f16042eae86786d1dfc12b2?s=128&d=identicon&r=PG&f=1", "display_name": "Navy Seal", "link": "https://stackoverflow.com/users/5484958/navy-seal"}, "edited": false, "score": 0, "creation_date": 1564603586, "post_id": 57297967, "comment_id": 101090294, "body": "Please see my last two paragraphs"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 5484958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/366a69261f16042eae86786d1dfc12b2?s=128&d=identicon&r=PG&f=1", "display_name": "Navy Seal", "link": "https://stackoverflow.com/users/5484958/navy-seal"}, "edited": false, "score": 0, "creation_date": 1564603360, "post_id": 57298044, "comment_id": 101090209, "body": "Yes, I checked without appending to the list. It has elements for each jira ticket"}], "tags": [], "owner": {"reputation": 81, "user_id": 11865168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48ae2a6a9c0f05dbc989d2be84dbe110?s=128&d=identicon&r=PG&f=1", "display_name": "pyQueen", "link": "https://stackoverflow.com/users/11865168/pyqueen"}, "is_accepted": false, "score": 2, "last_activity_date": 1564603130, "creation_date": 1564603130, "answer_id": 57298044, "question_id": 57297967, "link": "https://stackoverflow.com/questions/57297967/i-am-trying-to-create-a-list-within-a-list/57298044#57298044", "title": "I am trying to create a list within a list", "body": "<p>It seems that t_list is empty. Are you sure, there is an item.field called 'status'?</p>\n"}], "owner": {"reputation": 125, "user_id": 5484958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/366a69261f16042eae86786d1dfc12b2?s=128&d=identicon&r=PG&f=1", "display_name": "Navy Seal", "link": "https://stackoverflow.com/users/5484958/navy-seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564603568, "creation_date": 1564602650, "last_edit_date": 1564603568, "question_id": 57297967, "link": "https://stackoverflow.com/questions/57297967/i-am-trying-to-create-a-list-within-a-list", "title": "I am trying to create a list within a list", "body": "<p>I am trying to loop through all of my jira searches and contain them in a list of list</p>\n\n<pre><code>g_list= []\nt_list= []\nx=0\n\nissues_in_project = jira.search_issues('labels=Reporting', expand='changelog', maxResults=False)\n\nchangelog = issue.changelog\n\nfor history in changelog.histories:\n    for item in history.items:\n        if item.field == 'status':\n            t_list.append('Date:' + history.created + ' From:' + item.fromString + ' To:' + item.toString)\n    g_list.append(t_list[0])\n</code></pre>\n\n<p>What i want is have all the status updates of a particular issue in one list as an element. Something like</p>\n\n<pre><code>[[Date:2019-03-27T10:08:45.997-0400 From:Open To:In Progress,\nDate:2019-04-02T12:33:46.356-0400 From:In Progress To:Closed],\n[Date:2019-03-27T10:08:45.997-0400 From:Open To:In Progress],\n[Date:2019-03-27T10:08:45.997-0400 From:Open To:In Progress]]\n</code></pre>\n\n<p>Currently its giving me an error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n&lt;ipython-input-82-42338ca03d78&gt; in &lt;module&gt;\n     11         if item.field == 'status':\n     12             t_list.append('Date:' + history.created + ' From:' + item.fromString + ' To:' + item.toString)\n---&gt; 13     g_list.append(t_list[0])\n\nIndexError: list index out of range\n</code></pre>\n\n<p>Upon running only changelog- the output looks like this.</p>\n\n<p>Code</p>\n\n<pre><code>for issue in issues_in_project:\n    changelog = issue.changelog\n\nfor history in changelog.histories:\n    for item in history.items:\n        if item.field == 'status':\n            print ('Date:' + history.created + ' From:' + item.fromString + ' To:' + item.toString)\n</code></pre>\n\n<p>Solution</p>\n\n<pre><code>Date:2019-03-27T10:08:45.997-0400 From:Open To:In Progress\nDate:2019-04-02T12:33:46.356-0400 From:In Progress To:Closed\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "aws-lambda", "boto3"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1564611082, "post_id": 57297955, "comment_id": 101092769, "body": "Related: <a href=\"https://stackoverflow.com/questions/52739632/lambda-python-exit-code\" title=\"lambda python exit code\">stackoverflow.com/questions/52739632/lambda-python-exit-code</a> and <a href=\"https://stackoverflow.com/questions/51780706/stop-a-lambda-function-in-python\" title=\"stop a lambda function in python\">stackoverflow.com/questions/51780706/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "is_accepted": true, "score": 2, "last_activity_date": 1564616159, "creation_date": 1564616159, "answer_id": 57300087, "question_id": 57297955, "link": "https://stackoverflow.com/questions/57297955/usage-of-exit-vs-return-in-aws-lambda/57300087#57300087", "title": "Usage of exit vs return in AWS Lambda", "body": "<p>You should use following general syntax structure when creating a handler function in Python:</p>\n\n<pre><code>def handler_name(event, context): \n    ...\n    return some_value\n</code></pre>\n\n<p>If you don't want to return a value then simply <code>return</code> or <code>return None</code>. A return value is optional.</p>\n"}], "owner": {"reputation": 12264, "user_id": 1042646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/be235d7145f1740e8f275b6e6014c822?s=128&d=identicon&r=PG", "display_name": "Punter Vicky", "link": "https://stackoverflow.com/users/1042646/punter-vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2214, "favorite_count": 0, "accepted_answer_id": 57300087, "answer_count": 1, "score": 0, "last_activity_date": 1564616159, "creation_date": 1564602599, "last_edit_date": 1564606120, "question_id": 57297955, "link": "https://stackoverflow.com/questions/57297955/usage-of-exit-vs-return-in-aws-lambda", "title": "Usage of exit vs return in AWS Lambda", "body": "<p>I have an API built using python running on AWS Lambda. This lambda has a logic to determine if a specific condition is met and proceed with rest of the logic only if the condition is met. In this scenario , should I use exit or return if condition is not met to exit the lambda?</p>\n\n<pre><code>    if status != 'PENDING':\n       exit()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    if status != 'PENDING':\n       return\n</code></pre>\n"}, {"tags": ["python", "execution"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564608410, "post_id": 57297948, "comment_id": 101091986, "body": "first check if <code>program.py</code> runs in <code>dirA&#47;dirB&#47;dirC</code> - it could be started in different folder (<code>os.getcwd()</code> - <code>CWD</code> means <code>Current Working Directory</code>) and now your relative path can&#39;t find <code>target.py</code>. It is common problem when you create link on desktop or in system&#39;s menu"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6898991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c172b686f89f7aac8033fac286335a2?s=128&d=identicon&r=PG&f=1", "display_name": "cspecial", "link": "https://stackoverflow.com/users/6898991/cspecial"}, "edited": false, "score": 0, "creation_date": 1564603338, "post_id": 57297993, "comment_id": 101090201, "body": "Thank you for your response. Unfortunately, I need a solution which allows me to close program.py while invoking target.py by using relative paths only"}, {"owner": {"reputation": 69, "user_id": 6898991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c172b686f89f7aac8033fac286335a2?s=128&d=identicon&r=PG&f=1", "display_name": "cspecial", "link": "https://stackoverflow.com/users/6898991/cspecial"}, "edited": false, "score": 0, "creation_date": 1564605830, "post_id": 57297993, "comment_id": 101091117, "body": "I tried it but it did not work. Is there not a possibility to use os.startfile() and access the desired directories by using the relative path method?"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 69, "user_id": 6898991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c172b686f89f7aac8033fac286335a2?s=128&d=identicon&r=PG&f=1", "display_name": "cspecial", "link": "https://stackoverflow.com/users/6898991/cspecial"}, "edited": false, "score": 1, "creation_date": 1564610923, "post_id": 57297993, "comment_id": 101092721, "body": "@cspecial What error do you get when trying <code>Popen</code>?"}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1564611299, "last_edit_date": 1564611299, "creation_date": 1564602783, "answer_id": 57297993, "question_id": 57297948, "link": "https://stackoverflow.com/questions/57297948/how-can-i-start-another-file-within-a-program-using-startfile-and-relative-path/57297993#57297993", "title": "How can I start another file within a program using startfile and relative path?", "body": "<p>Use <code>subprocess.Popen</code>, and invoke it with python.</p>\n\n<pre><code>import subprocess as sp\n\nsp.Popen(['python', r'../target.py'])\n</code></pre>\n\n<p>If you use <code>Popen</code> as the last line that is executed in <code>program.py</code>, the new script will be started and the <code>program.py</code> will exit.</p>\n\n<p>Note that you can use <code>os.path.abspath()</code> to turn a relative path into an absolute path if necessary. </p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 6898991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c172b686f89f7aac8033fac286335a2?s=128&d=identicon&r=PG&f=1", "display_name": "cspecial", "link": "https://stackoverflow.com/users/6898991/cspecial"}, "is_accepted": false, "score": 0, "last_activity_date": 1564658946, "creation_date": 1564658946, "answer_id": 57308016, "question_id": 57297948, "link": "https://stackoverflow.com/questions/57297948/how-can-i-start-another-file-within-a-program-using-startfile-and-relative-path/57308016#57308016", "title": "How can I start another file within a program using startfile and relative path?", "body": "<p>I found a solution using the pathlib-module and os.startfile(). </p>\n\n<p>pathlib.Path(__file__).parent.parent returns the desired directory so that os.startfile(str(pathlib.Path(<strong>file</strong>).parent) + [path]) executes the file.</p>\n"}], "owner": {"reputation": 69, "user_id": 6898991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c172b686f89f7aac8033fac286335a2?s=128&d=identicon&r=PG&f=1", "display_name": "cspecial", "link": "https://stackoverflow.com/users/6898991/cspecial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564658946, "creation_date": 1564602557, "last_edit_date": 1564603403, "question_id": 57297948, "link": "https://stackoverflow.com/questions/57297948/how-can-i-start-another-file-within-a-program-using-startfile-and-relative-path", "title": "How can I start another file within a program using startfile and relative path?", "body": "<p>dirA/dirB/dirC/program.py</p>\n\n<p>dirA/dirD/target.py</p>\n\n<p>How can I initiate the execution of target.py by program.py? I tried to use os.startfile(\".\\.\\.\\dirD\\target.py\") but unfortunately, it does not work. Have not found anything which helped.</p>\n\n<p>Program.py should be closed. Also, it should be based on a relative path since the scripts will be used on multiple machines!</p>\n"}]