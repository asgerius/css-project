[{"tags": ["python"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1421884853, "post_id": 28079097, "comment_id": 44536995, "body": "You mean <code>This is planet Mars</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1421884919, "post_id": 28079154, "comment_id": 44537009, "body": "you might want to make sure i &gt;= 4"}, {"owner": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421884966, "post_id": 28079154, "comment_id": 44537024, "body": "@Kasra eventually I want to edit -4th line. Can I do that by your method? (ofcourse I have to change &#39;r&#39; to &#39;r+&#39; or something). My file actually has 16000 lines with about 110 lines with &quot;configuration&quot; in it"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1421885068, "post_id": 28079154, "comment_id": 44537055, "body": "@user5402 mmm if <code>i&lt;4</code> it chose from end !"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421885276, "post_id": 28079154, "comment_id": 44537129, "body": "@SrinGupta using readlines coudn&#39;t be an efficient way for files with huge lines ! but with this you can edit your line simply !"}, {"owner": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421885425, "post_id": 28079154, "comment_id": 44537171, "body": "@Kasra what is the best way to deal with this in my case of 16000 lines and 110 occurrences?"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421885506, "post_id": 28079154, "comment_id": 44537186, "body": "@SrinGupta im thinking on it :) ... maybe using <code>zip</code> or <code>itertools</code> ! i will edit the answer !"}, {"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1421885510, "post_id": 28079154, "comment_id": 44537188, "body": "@Kasra the code doesn&#39;t crash but is that the behavior that the OP wants?"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1421885566, "post_id": 28079154, "comment_id": 44537203, "body": "@user5402 i mentioned it on answer ! but i think that <code>configuration</code> exist in 4th line to next!"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421886250, "post_id": 28079154, "comment_id": 44537404, "body": "@SrinGupta check out Hugh Bothwell&#39;s answer !"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421887892, "post_id": 28079154, "comment_id": 44537894, "body": "@SrinGupta, 16,000 lines (presumably of less than, say, 100 bytes each on average) is <b>tiny</b> -- there should be absolutely no worry keeping the whole text in memory, it&#39;s less than 2 megabytes!"}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 3, "last_activity_date": 1421885819, "last_edit_date": 1421885819, "creation_date": 1421884778, "answer_id": 28079154, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079154#28079154", "title": "print a previous line based on a condition in python", "body": "<p>If you have a few lines you can use <code>readlines()</code> to save your lines as a list then just use indexing :</p>\n\n<pre><code>my_file = open(\"SFU.txt\",\"r\").readlines()\nfor i,line in enumerate(my_file):\n    if \"configuration\" in line:\n        print file[i-4]\n</code></pre>\n\n<p>But note that if <code>i&lt;4</code> it chose your line from end ! </p>\n"}, {"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": false, "score": 1, "last_activity_date": 1421969636, "last_edit_date": 1421969636, "creation_date": 1421885219, "answer_id": 28079216, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079216#28079216", "title": "print a previous line based on a condition in python", "body": "<p>Maybe try something like this.</p>\n\n<p>As the whole thing is copied to a list, all the text is editable. You can write it back to a file when you are done.</p>\n\n<pre><code>f = open(\"SFU.txt\",\"r\")\n\nlines = [line.strip() for line in f]\nfor i, line in enumerate(lines):\n    if \"configuration\" in line:\n        if i &gt; 4:\n            print lines[i - 4]\n            # edit here\n        else:\n            print 'There is no -4th line'\n\nf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1421886114, "last_edit_date": 1421886114, "creation_date": 1421885700, "answer_id": 28079298, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079298#28079298", "title": "print a previous line based on a condition in python", "body": "<p>Alternatively, you may open the file twice and yield one file to read from 4th line, then compare the next line first, and print the current line, something like this:</p>\n\n<pre><code>with open('SFU.txt', 'r') as f:\n    with open('SFU.txt', 'r') as next_f:\n        [next(next_f) for _ in range(4)] # yield to 4th line first\n        for line in next_f:\n            if 'configuration' in line: # if keyword in next line\n                print next(f) # this is current line from f\n                break\n            next(f) # if not found, yield f to next line\n</code></pre>\n\n<p>Yield result:</p>\n\n<pre><code>This is planet Mars\n</code></pre>\n\n<p><strong>As a side note</strong>: please try not to use <code>file</code> as the namespace as it's a shadow name of Python builtin.</p>\n"}, {"comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1421886214, "post_id": 28079330, "comment_id": 44537391, "body": "nice , this is what i was looking for !"}, {"owner": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "edited": false, "score": 0, "creation_date": 1421886797, "post_id": 28079330, "comment_id": 44537571, "body": "@Hugh Bothwell I want to edit -4th lines, so I should read the whole file into memory to edit it, right?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421928092, "post_id": 28079330, "comment_id": 44553301, "body": "amazing how the answer that does everything the OP wants has less votes than others"}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 5, "last_activity_date": 1421887147, "last_edit_date": 1421887147, "creation_date": 1421885936, "answer_id": 28079330, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079330#28079330", "title": "print a previous line based on a condition in python", "body": "<p>Use <code>tee</code> to run a pair of iterators across <code>inf</code>. This only stores five lines in memory at any given time:</p>\n\n<pre><code>from itertools import tee\n\nwith open(\"SFU.txt\") as inf:\n    # set up iterators\n    cfg,res = tee(inf)\n    # advance cfg by four lines\n    for i in range(4):\n        next(cfg)\n\n    for c,r in zip(cfg, res):\n        if \"configuration\" in c:\n            print(r)\n</code></pre>\n\n<p>and, as expected, results in</p>\n\n<pre><code>This is planet Mars\n</code></pre>\n\n<p><strong>Edit:</strong> if you want to <em>edit</em> the -4th line, I suggest</p>\n\n<pre><code>def edited(r):\n    # make your changes to r\n    return new_r\n\nwith open(\"SFU.txt\") as inf, open(\"edited.txt\", \"w\") as outf:\n    # set up iterators\n    cfg, res = tee(inf)\n    for i in range(4):\n        next(cfg)\n\n    # iterate through in tandem\n    for c, r in zip(cfg, res):\n        if \"configuration\" in c:\n            r = edited(r)\n        outf.write(r)\n\n    # reached end - write out remaining queued values\n    for r in res:\n        outf.write(r)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1005, "user_id": 277524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddda66fe6045967d2011af4a0e9d8fe?s=128&d=identicon&r=PG", "display_name": "canerbalci", "link": "https://stackoverflow.com/users/277524/canerbalci"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421971990, "post_id": 28079509, "comment_id": 44577459, "body": "Thanks @PadraicCunningham. I just removed the &quot;break&quot; statement, and it should work fine for more occurrences. Please note that the asker hadn&#39;t mentioned more occurrences, at the time I wrote this answer."}], "tags": [], "owner": {"reputation": 1005, "user_id": 277524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddda66fe6045967d2011af4a0e9d8fe?s=128&d=identicon&r=PG", "display_name": "canerbalci", "link": "https://stackoverflow.com/users/277524/canerbalci"}, "is_accepted": false, "score": 2, "last_activity_date": 1557127005, "last_edit_date": 1557127005, "creation_date": 1421887133, "answer_id": 28079509, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079509#28079509", "title": "print a previous line based on a condition in python", "body": "<p>If you have a longer file and don't want to read the whole thing into memory, you can use an efficient queue implementation such as <code>collections.deque</code> like:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import collections\n\nmyfile = open(\"SFU.txt\",\"r\")\n\n# This is a fixed length queue, and will hold 4 items at most\nlines = collections.deque(['']*4,4)\n\nfor i, line in enumerate(myfile):\n    if 'configuration' in line:\n        print lines[0]\n    else:\n        # push the new line clearing the 4th previous\n        lines.append(line)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1421888233, "post_id": 28079616, "comment_id": 44537985, "body": "Thanks for nice explain and recommending the <code>deque</code> its actually desire for this problem , !"}], "tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": false, "score": 5, "last_activity_date": 1421887800, "creation_date": 1421887800, "answer_id": 28079616, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python/28079616#28079616", "title": "print a previous line based on a condition in python", "body": "<p>A limited-size <code>deque</code> is a good way to keep a \"ring buffer\" of the last few lines:</p>\n\n<pre><code>import collections\n\nlastfewlines = collections.deque((), 4)\n\nwith open('SFU.txt') as f:\n    for line in f:\n        if 'configuration' in line and len(lastfewlines) == 4:\n            print(lastfewlines[0])\n        lastfewlines.append(line.rstrip())\n</code></pre>\n\n<p>However, while this solves the problem posed in the question, it <strong>doesn't</strong> work for the \"real problem\" the OP mentioned only in a comment -- \"editing\" that line, meaning, presumably, alter the input file \"in place\".</p>\n\n<p>Alas, modern file-systems do <strong>not</strong> allow \"in-place editing\" of files except byte-for-byte overwriting -- unless the \"edited\" line is exactly the same number of bytes as the original one, you can't just overwrite said original line and imagine that all the following lines in the file will shift back or forth as desired!-)</p>\n\n<p>Rather, one has to read the file, alter it, and <strong>rewrite</strong> it (the soundest approach is usually to write a new file then rename it to the old one's name \"as atomically as your operating system and file-system will let you\", to avoid losing data should there be a crash).</p>\n\n<p>The <code>deque</code> approach can be adapted to this -- instead of just conditionally printing <code>lastfewlines[0]</code>, write to the output file either the original or modified version of it (and at the end write what's left in the <code>deque</code> to the output file).  Then, at least on Unix systems and local file-systems, a simple <code>os.rename</code> will do the atomic trick (as long as the output file is on the same mounted disk as the input one).</p>\n\n<p>For all but really huge files, however, reading all lines in memory (with <code>f.readlines()</code>), performing alterations if any on the list of lines, then writing the lot out again, is much simpler.  And since the user mentions 16,000 lines (length not specified but let's assume less than 100 bytes per average line), this tiny file of less than 2 megabytes should be dealt with in the most simple way -- it's orders of magnitude smaller than any file that would cause any \"too big to fit in memory\" worries!-)</p>\n"}], "owner": {"reputation": 471, "user_id": 3931263, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/586564807/picture?type=large", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/3931263/nikhil-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1914, "favorite_count": 1, "accepted_answer_id": 28079330, "answer_count": 6, "score": 0, "last_activity_date": 1557127005, "creation_date": 1421884526, "question_id": 28079097, "link": "https://stackoverflow.com/questions/28079097/print-a-previous-line-based-on-a-condition-in-python", "title": "print a previous line based on a condition in python", "body": "<p>I am trying to print -4th line based on a condition. I have a text file <code>SFU.txt</code> with some content. My objective is: if there is a word <code>configuration</code> in a line, I want to print -4th line. For example if the content of my file is like below:</p>\n\n<pre><code>This is a random text document\nWe are talking about planets here\nThis is planet Mars\nin solarsystem\nsun is the star\nthis is 4th planet\nconfiguration lifeform exists\nbla bla bla\nbla bla bla\n</code></pre>\n\n<p>So, once the compiler hits the line <code>configuration lifeform exists</code> and it sees <code>configuration</code>, I want to print the line <code>This is planet earth</code></p>\n\n<p>My code below:</p>\n\n<pre><code>file = open(\"SFU.txt\",\"r\")\nfor line in file:\n    if \"configuration\" in line:\n        #want to print the -4th line-HOW?\n</code></pre>\n"}, {"tags": ["python", "stdin"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 1, "creation_date": 1421883933, "post_id": 28078950, "comment_id": 44536721, "body": "See <a href=\"http://stackoverflow.com/questions/436220/python-is-there-a-way-to-determine-the-encoding-of-text-file\">this question</a>. Even though it talks about text files, the principle is the same for trying to detect encoding. At some level you need to make an assumption about what the encoding is."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1421884547, "post_id": 28078950, "comment_id": 44536900, "body": "read should just return bytes ... it doesnt usually care about encoding ... write on the other hand ..."}], "owner": {"reputation": 1, "user_id": 4480313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e76c1c0eed8ceee50f8e1ce1fd87048?s=128&d=identicon&r=PG&f=1", "display_name": "jdeo", "link": "https://stackoverflow.com/users/4480313/jdeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1421883633, "creation_date": 1421883633, "question_id": 28078950, "link": "https://stackoverflow.com/questions/28078950/how-do-i-handle-arbitrary-text-input-and-via-stdin-and-output-it-to-stdout", "title": "How do I handle arbitrary [text] input and via stdin and output it to stdout?", "body": "<p>I am trying to read text from stdin, do stuff with that text then send the result to stdout.</p>\n\n<pre><code>char_stream = sys.stdin\ninput_text = char_stream.read()\n\noutput_text=do_stuff_with_text(input_text)\nsys.stdout.write(output_text)\n</code></pre>\n\n<p>If I feed say, utf8 to it, it fails to read the charstream, I assume it expects ASCII. I googled and it appears that I read UTF-8 like this</p>\n\n<pre><code>codecs.getreader(\"utf-8\")(sys.stdin)\n</code></pre>\n\n<p>but then  this will only be compatible with utf8, which is not enough for me since I want to be able to pipe in any text file. Indeed I also need to encode the output as utf8.</p>\n\n<p>What is the common practice here, the one used in, say, grep? I know it is not written in python, but it's still a valid example. I can pipe in text in any format and it never throws an error. How would i implement this in python?</p>\n"}, {"tags": ["python", "sleep", "lcd"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1421883845, "post_id": 28078929, "comment_id": 44536687, "body": "you may have to measure the time that passes and decide to show/clear the message based on how much time has elapsed."}, {"owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "edited": false, "score": 0, "creation_date": 1421884764, "post_id": 28078929, "comment_id": 44536967, "body": "Can you use signals? It would be much easier to use an <code>alarm()</code> call with a handler, if they are available."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4480426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015212a0d9a9eb340371eca8234b642?s=128&d=identicon&r=PG&f=1", "display_name": "quelqu_un", "link": "https://stackoverflow.com/users/4480426/quelqu-un"}, "edited": false, "score": 0, "creation_date": 1421919335, "post_id": 28079036, "comment_id": 44548318, "body": "Thanks, this does exactly what I need."}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 0, "last_activity_date": 1421884206, "creation_date": 1421884206, "answer_id": 28079036, "question_id": 28078929, "link": "https://stackoverflow.com/questions/28078929/execute-code-after-some-time-without-using-sleep-in-python/28079036#28079036", "title": "Execute code after some time without using sleep in Python?", "body": "<p>Split your time into smaller slices; this checks the button every hundredth of a second:</p>\n\n<pre><code>i = 0\nwhile not lcd.is_pressed(LCD.SELECT):\n    i = (i + 1) % 400\n    if i == 0:\n        lcd.message(\"Press Select\")\n    elif i == 200:\n        lcd.clear()\n    sleep(0.01)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 3093739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315f62da00b7cab980b0b429e2005bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Canaryyellow", "link": "https://stackoverflow.com/users/3093739/canaryyellow"}, "is_accepted": false, "score": 0, "last_activity_date": 1421899222, "last_edit_date": 1421899222, "creation_date": 1421898888, "answer_id": 28081027, "question_id": 28078929, "link": "https://stackoverflow.com/questions/28078929/execute-code-after-some-time-without-using-sleep-in-python/28081027#28081027", "title": "Execute code after some time without using sleep in Python?", "body": "<p>try this:</p>\n\n<pre><code>import time\n\ndelayTime=2 #In seconds\ndummyVariable=is_pressed(LCD.Select)\nwhile not dummyVariable:\n    lcd.message('Press Select')\n    dummyVariable=softWait(delayTime)\n    lcd.clear()\n    dummyVariable=softWait(delayTime)\n\ndef softWait(delayTime)\n    t0 = time.time()\n    t1 = time.time()\n    while t0-t1&lt;delayTime:\n        dummyVariable=is_pressed(LCD.Select)\n        t1=time.time()\n        if dummyVariable:\n            return True\n    return False\n</code></pre>\n\n<p>Without knowing how is_pressed operates I can't really test this.  But most likely problem is if is_pressed only registers True if the button is currently clicked where this would fail if the button click is faster than the time that it takes the system to return time.time() or lcd.message() calls.  So really fast. </p>\n"}], "owner": {"reputation": 13, "user_id": 4480426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015212a0d9a9eb340371eca8234b642?s=128&d=identicon&r=PG&f=1", "display_name": "quelqu_un", "link": "https://stackoverflow.com/users/4480426/quelqu-un"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 28079036, "answer_count": 2, "score": 1, "last_activity_date": 1469205591, "creation_date": 1421883541, "last_edit_date": 1469205591, "question_id": 28078929, "link": "https://stackoverflow.com/questions/28078929/execute-code-after-some-time-without-using-sleep-in-python", "title": "Execute code after some time without using sleep in Python?", "body": "<p>I am writing code for an LCD screen using <code>Python</code> and I want it to display a flashing 'Press SELECT' message until a button on the LCD is pressed.</p>\n\n<p>The problem is that while the program is in sleep, it does not register the user pressing the button, meaning that I have to press the button exactly when the message is being printed.</p>\n\n<p>How can I do this without using sleep?</p>\n\n<p>This is the code that I used:</p>\n\n<pre><code>#lcd.is_pressed(LCD.SELECT) - checks if button is pressed\n#lcd.message - prints text on LCD\n#lcd.clear - removes all text from LCD\n\nwhile not lcd.is_pressed(LCD.SELECT):\n      lcd.message ('Press Select')\n      sleep(2)\n      lcd.clear()\n      sleep(2)\n</code></pre>\n"}, {"tags": ["python", "graph", "matplotlib", "legend"], "comments": [{"owner": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "edited": false, "score": 1, "creation_date": 1421896913, "post_id": 28078846, "comment_id": 44540100, "body": "A more complete example code--how to get the legend you don&#39;t want, or including things you&#39;ve tried--would be helfpul. Have you tried <code>ax1.plot(np.NaN, np.NaN, &#39;-&#39;, color=&#39;none&#39;, label=&#39;&#39;)</code>?"}, {"owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "reply_to_user": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "edited": false, "score": 0, "creation_date": 1421898987, "post_id": 28078846, "comment_id": 44540664, "body": "That almost works except for some reason the blank spot that creates is always the first thing on the legend, no matter here I put the plot command. Everything else is in order of call."}, {"owner": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "edited": false, "score": 0, "creation_date": 1421899901, "post_id": 28078846, "comment_id": 44540942, "body": "If you hang onto the line handles you could force the ordering. Again, a more complete example would be helpful."}, {"owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "reply_to_user": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "edited": false, "score": 0, "creation_date": 1421899974, "post_id": 28078846, "comment_id": 44540958, "body": "The lines are being plotted inside a for loop, so hanging onto the handles is not an option."}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 1, "creation_date": 1421900798, "post_id": 28078846, "comment_id": 44541130, "body": "That something is being plotted inside a loop doesn&#39;t mean you can&#39;t hang on to handles any more than that something is being calculated in a loop means you can&#39;t build a list of the results."}, {"owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "edited": false, "score": 0, "creation_date": 1421942959, "post_id": 28078846, "comment_id": 44563017, "body": "Apparently the problem is that the legend generator gets different plot types sequentially, ie all <code>plot</code>, then all <code>errorbar</code>, etc., so the blank entry needs to be the same type to stay in order: <code>ax1.errorbar(np.NaN, np.NaN, yerr=np.NaN, fmt= &#39;-&#39;, c=&#39;w&#39;, label=&#39; &#39;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 520, "user_id": 6361014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15cfe48d41e2a47a21cb779ab5a59855?s=128&d=identicon&r=PG&f=1", "display_name": "Remi Cuingnet", "link": "https://stackoverflow.com/users/6361014/remi-cuingnet"}, "edited": false, "score": 1, "creation_date": 1610529682, "post_id": 28081279, "comment_id": 116159968, "body": "I would rather use <code>matplotlib.lines.Line2D([], [], color=&quot;none&quot;)</code> for the empty line."}], "tags": [], "owner": {"reputation": 1892, "user_id": 1161303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67RQg.jpg?s=128&g=1", "display_name": "mrcl", "link": "https://stackoverflow.com/users/1161303/mrcl"}, "is_accepted": false, "score": 6, "last_activity_date": 1421900686, "creation_date": 1421900686, "answer_id": 28081279, "question_id": 28078846, "link": "https://stackoverflow.com/questions/28078846/is-there-a-way-to-add-an-empty-entry-to-a-legend-in-matplotlib/28081279#28081279", "title": "Is there a way to add an empty entry to a Legend in Matplotlib?", "body": "<p>You can define a fake white line</p>\n\n<pre><code>l = Line2D([0],[0],color=\"w\")\n</code></pre>\n\n<p>Then plot your data and save the line/markers in variables</p>\n\n<pre><code>f = figure()\nax = f.add_subplot(111)\n\nl1, = ax.plot(1*arange(10))\nl2, = ax.plot(2*arange(10))\nl3, = ax.plot(3*arange(10))\nl4, = ax.plot(4*arange(10))\nl5, = ax.plot(5*arange(10))\n</code></pre>\n\n<p>Finally, you call <code>legend</code> as follows</p>\n\n<pre><code>ax.legend((l1,l,l2,l3,l4,l5),(\"label1\",\"\",\"label2\",\"label3\",\"label4\",\"label5\"),\n           loc='upper center',fancybox=True,ncol=3)\n</code></pre>\n\n<p>where for each line/marker is associated with a different label. At the place where you want to have a gap in your legend insert the fake white line <code>l</code> and associate a blank string to it.</p>\n\n<p>Hope it helps.<img src=\"https://i.stack.imgur.com/m7kYV.png\" alt=\"enter image description here\"></p>\n"}, {"tags": [], "owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "is_accepted": true, "score": 4, "last_activity_date": 1424232738, "creation_date": 1424232738, "answer_id": 28575848, "question_id": 28078846, "link": "https://stackoverflow.com/questions/28078846/is-there-a-way-to-add-an-empty-entry-to-a-legend-in-matplotlib/28575848#28575848", "title": "Is there a way to add an empty entry to a Legend in Matplotlib?", "body": "<p>Farenorth's solution (given in the comments to the Op) give the cleanest answer. </p>\n\n<p>Add an additional command in the position that you need the blank spot, using <code>np.NaN</code> for data and setting the color to <code>none</code>. </p>\n\n<pre><code>ax1.plot(np.NaN, np.NaN, '-', color='none', label='')\n</code></pre>\n\n<p>Note that this must be of the same type, as the method used to automatically generate the Legend gets different plot types sequentially, ie all plot, then all errorbar, etc., so the blank entry needs to be the same type to stay in order of the function calls.</p>\n"}], "owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5373, "favorite_count": 2, "accepted_answer_id": 28575848, "answer_count": 2, "score": 6, "last_activity_date": 1424232738, "creation_date": 1421883113, "last_edit_date": 1421900090, "question_id": 28078846, "link": "https://stackoverflow.com/questions/28078846/is-there-a-way-to-add-an-empty-entry-to-a-legend-in-matplotlib", "title": "Is there a way to add an empty entry to a Legend in Matplotlib?", "body": "<p>I wanted to add a blank space to a legend in a matplotib plot in python. I have an odd number of entries in the legend, and it currently looks like:</p>\n\n<pre><code> _________________________________________________________________\n|  handle1  -  label1   handle3  -  label3   handle5  -  label5  |\n|  handle2  -  label2   handle4  -  label4                       |\n</code></pre>\n\n<p>However, the data is logically grouped in pairs with a control, so it would be better if it looked like this:</p>\n\n<pre><code> _________________________________________________________________\n|  handle1  -  label1   handle2  -  label2   handle4  -  label4  |\n|                       handle3  -  label3   handle5  -  label5  |\n</code></pre>\n\n<p>The legend is being generated during automatically running a for loop over the data set:</p>\n\n<pre><code>for [folder1,folder2, label] in folder_list:\n    parse_folder([folder1,folder2])\n    color = next(colorgen)\n    marker = next(markergen)\n    ax1.errorbar(percent[0],percent[1], yerr=per_std, c=color, fmt=marker, label=label)\n    if label == 'Flat Plate':\n        print 'tripped'\n        ax1.plot(np.NaN, np.NaN, '-', color='none', label=' ')\n</code></pre>\n\n<p>and then at the end calling</p>\n\n<pre><code>leg = ax1.legend(loc='lower left',fancybox=True,prop={'size':fontsize-2},ncol=4,bbox_to_anchor=(-0.1, -0.315))\n</code></pre>\n\n<p>Is there a way to insert this blank spot into the legend?</p>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1421883046, "post_id": 28078771, "comment_id": 44536412, "body": "why do you need to rebuild the index?"}, {"owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "reply_to_user": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1421883305, "post_id": 28078771, "comment_id": 44536502, "body": "Apparently because I misunderstood their behavior. I now see that they automatically update the index with each insert."}, {"owner": {"reputation": 57591, "user_id": 1388319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258babf29502a002296bc415851e2395?s=128&d=identicon&r=PG", "display_name": "Stennie", "link": "https://stackoverflow.com/users/1388319/stennie"}, "edited": false, "score": 0, "creation_date": 1421884968, "post_id": 28078771, "comment_id": 44537025, "body": "FYI, you don&#39;t need the first index <code>(&#39;time_stamp&#39;, pymongo.DESCENDING])</code>, as it is a proper subset of your third index: <code>(&#39;time_stamp&#39;, pymongo.DESCENDING, (&#39;raw_value&#39;, pymongo.DESCENDING])</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 0, "creation_date": 1421883264, "post_id": 28078852, "comment_id": 44536490, "body": "okay that makes sense. So does it seem like proper behavior to just build those indexes when a new collection is created?"}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 0, "creation_date": 1421883334, "post_id": 28078852, "comment_id": 44536513, "body": "@clifgray, absolutely right under normal circumstances"}, {"owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 0, "creation_date": 1421883473, "post_id": 28078852, "comment_id": 44536565, "body": "Okay thanks for the quick response. Where is that documentation you pointed me to? I thought I read the whole ensureIndex() page."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 0, "creation_date": 1421883981, "post_id": 28078852, "comment_id": 44536735, "body": "@clifgray, not a problem, we all sometimes get confused at things which are eventually obvious ;)"}], "tags": [], "owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1421883860, "last_edit_date": 1421883860, "creation_date": 1421883128, "answer_id": 28078852, "question_id": 28078771, "link": "https://stackoverflow.com/questions/28078771/when-to-update-mongo-db-indexes/28078852#28078852", "title": "When to update mongo db indexes", "body": "<p>You don't need to rebuild the indexes under normal circumstances, you only need to create the indexes once, read this from <a href=\"http://docs.mongodb.org/manual/faq/indexes/#faq-indexes\" rel=\"nofollow\">MongoDB FAQ</a>:</p>\n\n<blockquote>\n  <h3>Should you run ensureIndex() after every insert?\u00b6</h3>\n  \n  <p>No. You only need to create an index once for a single collection.\n  After initial creation, MongoDB automatically updates the index as\n  data changes.</p>\n  \n  <p>While running ensureIndex() is usually ok, if an index doesn\u2019t exist\n  because of ongoing administrative work, a call to ensureIndex() may\n  disrupt database availability. Running ensureIndex() can render a\n  replica set inaccessible as the index creation is happening. See Build\n  Indexes on Replica Sets.</p>\n</blockquote>\n\n<p>In case of corruption and you need to build the indexes again, use <code>db.collection.reIndex()</code>, you can read more from <a href=\"http://docs.mongodb.org/manual/tutorial/rebuild-indexes/#rebuild-indexes\" rel=\"nofollow\">HERE</a></p>\n"}], "owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28078852, "answer_count": 1, "score": 1, "last_activity_date": 1421883860, "creation_date": 1421882724, "question_id": 28078771, "link": "https://stackoverflow.com/questions/28078771/when-to-update-mongo-db-indexes", "title": "When to update mongo db indexes", "body": "<p>So I am expecting to have around 2000 collections with 10,000-100,000 documents in the near future and I am trying to figure out how to build the indexes. It seems very simple how to do it on a basic level but then when to run the re-indexing is tripping me up. So assume that I have this function and this creates all the indexes I need:</p>\n\n<pre><code>def ensure_indexes(self):\n    collections = get_collections()\n    for coll in collections:\n        coll.ensure_index([('time_stamp', pymongo.DESCENDING])\n        coll.ensure_index([('raw_value', pymongo.DESCENDING])\n        coll.ensure_index([('time_stamp', pymongo.DESCENDING, ('raw_value', pymongo.DESCENDING])\n</code></pre>\n\n<p>There will be a lot of updates to the database during the day and a few people querying it. Should I make a cron job to run the above function during the night while not many people will be inserting new documents in the collections? If people query the database and the collection has been updated but not the index will that query response not include the recently added documents? Or will newly added documents be included in an index?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "is_accepted": false, "score": 0, "last_activity_date": 1421889488, "creation_date": 1421889488, "answer_id": 28079838, "question_id": 28078718, "link": "https://stackoverflow.com/questions/28078718/latitude-and-longitude-query-in-django/28079838#28079838", "title": "latitude and longitude query in django", "body": "<p>Floats can be negative. But you don't get floats from GET strings, you get strings. So convert the strings to floats first.</p>\n"}], "owner": {"reputation": 2006, "user_id": 506784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61c2db4aeb1a664a985601ddd78ff467?s=128&d=identicon&r=PG", "display_name": "Tyler", "link": "https://stackoverflow.com/users/506784/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421889488, "creation_date": 1421882385, "question_id": 28078718, "link": "https://stackoverflow.com/questions/28078718/latitude-and-longitude-query-in-django", "title": "latitude and longitude query in django", "body": "<p>I need a quick fix for simple spatial search in django.\nMy main problem right now is that floats cannot be negative and I'm not sure how to overcome this.</p>\n\n<p>Here is what my model looks like</p>\n\n<pre><code>class CustomEvent(models.Model):\n    lat = models.FloatField(blank=True, null=True)\n    lng = models.FloatField(blank=True, null=True)\n</code></pre>\n\n<p>and this is my really bad query but I need to get it working really quick</p>\n\n<pre><code>lat = float(request.GET['lat'])\nlng = float(request.GET['lng'])\n\nmin_lat = lat - 1 # You have to calculate this offsets based on the user location.\nmax_lat = lat + 1 # Because the distance of one degree varies over the planet.\nmin_lng = lng - 1\nmax_lng = lng + 1 \n\ncustom_events_raw = CustomEvent.objects.filter(lat__gt=min_lat, lat__lt=max_lat, lng__gt=min_lng, lng__lt=max_lng)\n</code></pre>\n\n<p>I know I should do spatial queries with geodjango or something but this just needs to look like its working for now.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 2, "creation_date": 1421977420, "post_id": 28078646, "comment_id": 44578931, "body": "Don&#39;t vandalise your question like that - it&#39;s rude both to the person who gave their time helping you, and future visitors who might find it useful."}], "answers": [{"tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": -1, "last_activity_date": 1421882303, "creation_date": 1421882303, "answer_id": 28078700, "question_id": 28078646, "link": "https://stackoverflow.com/questions/28078646/python-primary-school-arithmetic-quiz-saving-results-to-a-txt-file/28078700#28078700", "title": "python: Primary school Arithmetic quiz- saving results to a .txt file", "body": "<pre><code>with open(\"classCores.txt\",\"a+\") as f:\n    f.write(\"{}:{}\".format(username,correctAnswers))\n</code></pre>\n\n<p>Opened in <code>a+</code> mode for avoid overwriting the file. The problem is in your codes, you forgot to <code>close</code> your file. However, I suggest you use <code>with open()</code> method which is way better than <code>open()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 4, "last_activity_date": 1424640462, "last_edit_date": 1424640462, "creation_date": 1421887799, "answer_id": 28079615, "question_id": 28078646, "link": "https://stackoverflow.com/questions/28078646/python-primary-school-arithmetic-quiz-saving-results-to-a-txt-file/28079615#28079615", "title": "python: Primary school Arithmetic quiz- saving results to a .txt file", "body": "<blockquote>\n<pre><code>my_file = open(\"classScores.txt\", \"a\")\nmy_file.write(\"{}:{}\".format(username,correctAnswers))\n</code></pre>\n  \n  <p>The program seems to work but nothing is stored onto 'classScores.txt'\n  file.</p>\n</blockquote>\n\n<p>Your code will correctly write to the file--but it's good practice to close a file after you are done with it.  As pointed out by Antti Haapala in the comments, you should do this:</p>\n\n<pre><code>with open(\"classScores.txt\", \"a\") as my_file:  #my_file is automatically closed after execution leaves the body of the with statement\n    username = 'Sajjjjid'\n    correct_answers = 3\n\n    my_file.write(\"{}:{}\\n\".format(username,correct_answers))\n</code></pre>\n\n<blockquote>\n  <p>Im quite new to coding</p>\n</blockquote>\n\n<pre><code>eval(str(num1) + operation + str(num2))\n</code></pre>\n\n<p>Typically, the rule for beginners is: </p>\n\n<blockquote>\n  <p>Never, ever use eval().</p>\n</blockquote>\n\n<p>Here are some better alternatives:</p>\n\n<pre><code>def test():\n    num1 = random.randint(1, 10)\n    num2 = random.randint(1, num1)\n\n    def add(x, y):\n        return x+y\n\n    def sub(x, y):\n        return x-y\n\n    def mult(x, y):\n        return x*y\n\n    ops = {\n        '+': add,\n        '-': sub,\n        '*': mult,\n    }\n\n    keys = list(ops.keys()) #=&gt; ['+', '*', '-']\n    rand_key = random.choice(keys)  #e.g. '*' \n    operation = ops[rand_key]  #e.g. mult\n\n    correct_result = operation(num1, num2)\n</code></pre>\n\n<p>If you define a function, then use the function name without the trailing <code>()</code>, then the function is a value, just like the number 1, and the function can be assigned to a variable--just like any other value.  When you want to execute a function stored in a variable, you use the trailing <code>()</code> after the variable name:</p>\n\n<pre><code>def func():\n    print('hello')\n\nmy_var = func\nmy_var()  #=&gt;hello\n</code></pre>\n\n<p>python also lets you create anonymous(unnamed) functions like this:</p>\n\n<pre><code>my_func = lambda x, y: x+y\nresult = my_func(1, 2)\nprint(result) #=&gt;3\n</code></pre>\n\n<p>Why would you ever need to do that?  Well, it can make your code more compact:</p>\n\n<pre><code>def test():\n    num1 = random.randint(1, 10)\n    num2 = random.randint(1, num1)\n\n    ops = {\n        '+': lambda x, y: x + y,  #You can define the function right where you want to use it.\n        '-': lambda x, y: x - y,\n        '*': lambda x, y: x * y,\n    }\n\n    keys = list(ops.keys()) ##=&gt; ['+', '*', '-']\n    rand_key = random.choice(keys)  #e.g. '*' \n    operation = ops[rand_key]  #e.g. lambda x, y: x*y\n\n    correct_result = operation(num1, num2)\n</code></pre>\n\n<p>But, it turns out that python defines all those functions for you--in the <code>operater module</code>.  So, you can make your code even more compact, like this:</p>\n\n<pre><code>import random\nimport math\nimport operator as op\n\ndef test():\n    num1 = random.randint(1, 10)\n    num2 = random.randint(1, num1)\n\n    ops = {\n        '+': op.add,  #Just like the add() functions defined above\n        '-': op.sub,\n        '*': op.mul,\n    }\n\n    keys = list(ops.keys()) #=&gt; ['+', '*', '-']\n    rand_key = random.choice(keys)  #e.g. '-'\n    operation = ops[rand_key]  #e.g. op.sub\n\n    correct_result = operation(num1, num2)\n</code></pre>\n\n<p>Here is a complete example with some other improvements:</p>\n\n<pre><code>import random\nimport math\nimport operator as op\n\ndef test():\n    num1 = random.randint(1, 10)\n    num2 = random.randint(1, num1)\n\n    ops = {\n        '+': op.add,\n        '-': op.sub,\n        '*': op.mul,\n    }\n\n    keys = list(ops.keys()) ##=&gt; ['+', '*', '-']\n    rand_key = random.choice(keys)  #e.g. '+' \n    operation = ops[rand_key]  #e.g. op.add\n\n    correct_result = operation(num1, num2)\n\n    print (\"What is {} {} {}?\".format(num1, rand_key, num2))\n    user_answer= int(input(\"Your answer: \"))\n\n    if user_answer != correct_result:\n        print (\"Incorrect. The right answer is {}\".format(correct_result))\n        return False\n    else:\n        print(\"Correct!\")\n        return True\n\nusername = input(\"What is your name? \")\nprint(\"Hi {}! Welcome to the Arithmetic quiz...\".format(username))\n\ncorrect_answers = 0\nnum_questions = 3\n\nfor i in range(num_questions):\n    if test():\n        correct_answers +=1\n\n\nprint(\"{}: You got {}/{} questions correct.\".format(\n    username, \n    correct_answers, \n    num_questions,\n    #'question' if (correct_answers==1) else 'questions'\n))\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3662550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002604298598/picture?type=large", "display_name": "Sajjjjid", "link": "https://stackoverflow.com/users/3662550/sajjjjid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11495, "favorite_count": 0, "protected_date": 1433245013, "accepted_answer_id": 28079615, "answer_count": 2, "score": -1, "last_activity_date": 1433244686, "creation_date": 1421882035, "last_edit_date": 1421977246, "question_id": 28078646, "link": "https://stackoverflow.com/questions/28078646/python-primary-school-arithmetic-quiz-saving-results-to-a-txt-file", "title": "python: Primary school Arithmetic quiz- saving results to a .txt file", "body": "<p>my task is to create a small quiz for primary school children. It asks them randomly generated questions then outputs their result. The program works perfectly well up until that point. For my task I must store the users 'username' and their 'correctAnswers' onto the a '.txt' file. The program seems to work but nothing is stored onto 'classScores.txt' file. Im quite new to coding so go easy on me. Any help would be appreciated :)</p>\n\n<pre><code>import random\nimport math\n\ndef test():\n    num1=random.randint(1, 10)\n    num2=random.randint(1, num1)\n\n    ops = ['+','-','*']\n    operation = random.choice(ops)\n\n    num3=int(eval(str(num1) + operation + str(num2)))\n\n    print (\"What is {} {} {}?\".format(num1, operation, num2))\n    userAnswer= int(input(\"Your answer:\"))\n    if userAnswer != num3:\n        print (\"Incorrect. The right answer is {}\".format(num3))\n        return False\n    else:\n        print(\"correct\")\n        return True\n\nusername=input(\"What is your name?\")\nprint (\"Welcome {} to the Arithmetic quiz\".format(username))\n\ncorrectAnswers=0\nfor question_number in range(10):\n    if test():\n        correctAnswers +=1\n\nprint(\"{}: You got {} answers correct\".format(username, correctAnswers))\n\nmy_file = open(\"classScores.txt\", \"a\")\nmy_file.write(\"{}:{}\".format(username,correctAnswers))\n</code></pre>\n"}, {"tags": ["python", "sockets", "python-2.7"], "comments": [{"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 0, "creation_date": 1421882800, "post_id": 28078642, "comment_id": 44536326, "body": "you should be able to read the contents of the files and then send them over TCP to the client. You could probably have a length, hash that you can use to verify that you did not lose any bytes in the transfer"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4471850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367530d8aeb662e18d578ab85a1d9b44?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Caldwell", "link": "https://stackoverflow.com/users/4471850/liam-caldwell"}, "edited": false, "score": 0, "creation_date": 1421883428, "post_id": 28078813, "comment_id": 44536550, "body": "what would you suggest to set up the actual server? I&#39;m extremely new to setting up server."}], "tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": true, "score": 3, "last_activity_date": 1421941540, "last_edit_date": 1421941540, "creation_date": 1421882905, "answer_id": 28078813, "question_id": 28078642, "link": "https://stackoverflow.com/questions/28078642/is-it-possible-to-send-a-file-and-or-folder-over-pythons-socket-module/28078813#28078813", "title": "Is it Possible to Send a File And or Folder Over Python&#39;s Socket Module?", "body": "<p>Short answer: Yes.</p>\n\n<p>Long answer:\nThere are probably easier ways to do it if you have control of both ends.  Using sockets directly is a somewhat low-level approach, and to get things working robustly, you would need to design a protocol to specify what file to request, have headers that specify length, etc, etc.</p>\n\n<p>However, transferring files over a network is a problem that's been solved many times over, so there are several python modules to do it for you in much less code using a wide range of already developed protocols.</p>\n\n<p>For example, with HTTP as the backend, the <a href=\"http://docs.python-requests.org/en/latest/\" rel=\"nofollow\">requests module</a> module lets you do things like this:</p>\n\n<pre><code>r = requests.get('http://myserver/somefile.txt')\nf = open('local_file_name.txt', w)\nf.write(r.content)\nf.close()\n</code></pre>\n\n<p>There are also python modules that would allow setting up a very simple HTTP server in very little code.</p>\n\n<p>See here for one example (this actually doesn't require writing any code):\n<a href=\"http://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python\" rel=\"nofollow\">http://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python</a></p>\n\n<p>A simple test combining the two.  Assumes Linux, same basic principle applies on windows.  Open two consoles:</p>\n\n<p><strong>Console 1:</strong></p>\n\n<pre><code>$ cd ~\n$ mkdir http_test_server\n$ cd http_test_server\n$ echo \"Hello World\" &gt; test_file.txt\n$ python -m SimpleHTTPServer 8080 \n</code></pre>\n\n<p><strong>Console 2:</strong></p>\n\n<pre><code>$ python\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; r = requests.get('http://localhost:8080/test_file.txt')\n&gt;&gt;&gt; r.content\n'Hello World\\n'\n</code></pre>\n\n<p>After running commands in Console 2, you should see output like this in console 1:</p>\n\n<pre><code>127.0.0.1 - - [22/Jan/2015 10:42:54] \"GET /test_file.txt HTTP/1.1\" 200 -\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4471850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367530d8aeb662e18d578ab85a1d9b44?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Caldwell", "link": "https://stackoverflow.com/users/4471850/liam-caldwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1320, "favorite_count": 0, "accepted_answer_id": 28078813, "answer_count": 1, "score": 1, "last_activity_date": 1421941540, "creation_date": 1421882011, "question_id": 28078642, "link": "https://stackoverflow.com/questions/28078642/is-it-possible-to-send-a-file-and-or-folder-over-pythons-socket-module", "title": "Is it Possible to Send a File And or Folder Over Python&#39;s Socket Module?", "body": "<p>Essentially I'm making an application, the client checks if it has the needed files, if not it downloads them from the server. I'm wondering if I would be able to do that with Python's socket module, if so, how can I do such things?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421881829, "post_id": 28078591, "comment_id": 44535984, "body": "what you mean <code>last character in python</code> ?"}, {"owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "reply_to_user": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421881964, "post_id": 28078591, "comment_id": 44536037, "body": "@howaboutNO &gt;&gt; print &#39;Hello&#39; the last character is &#39;\\n&#39; in this case"}, {"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1421882013, "post_id": 28078591, "comment_id": 44536053, "body": "If several threads write to the console, what is the last character?"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 2, "creation_date": 1421883110, "post_id": 28078660, "comment_id": 44536439, "body": "however the question was something else, bu it helped indeed, thanks :-)"}], "tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": 0, "last_activity_date": 1421882085, "creation_date": 1421882085, "answer_id": 28078660, "question_id": 28078591, "link": "https://stackoverflow.com/questions/28078591/retrieving-the-last-printed-character-on-console/28078660#28078660", "title": "Retrieving the last printed character on console", "body": "<p>Unless you change <code>end</code> parameter of <code>print</code> function in your program, it'll be always <code>\\n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 0, "creation_date": 1421882359, "post_id": 28078683, "comment_id": 44536171, "body": "the problem is that I&#39;m writing to stdout"}, {"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "reply_to_user": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 0, "creation_date": 1421882389, "post_id": 28078683, "comment_id": 44536186, "body": "This &quot;workaround&quot; <b>works</b> if you&#39;re writing to stdout. That&#39;s why I wrote it :)"}, {"owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 1, "creation_date": 1421882445, "post_id": 28078683, "comment_id": 44536212, "body": "it&#39;s kinda OS depended, isn&#39;t it?"}, {"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "reply_to_user": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 0, "creation_date": 1421882493, "post_id": 28078683, "comment_id": 44536222, "body": "Yes. I should mention it, but this probably has an equivalent in any OS."}, {"owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "edited": false, "score": 0, "creation_date": 1421882676, "post_id": 28078683, "comment_id": 44536283, "body": "Thanks for the help :-)"}], "tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": false, "score": 2, "last_activity_date": 1421882827, "last_edit_date": 1421882827, "creation_date": 1421882219, "answer_id": 28078683, "question_id": 28078591, "link": "https://stackoverflow.com/questions/28078591/retrieving-the-last-printed-character-on-console/28078683#28078683", "title": "Retrieving the last printed character on console", "body": "<p>Depends on where you're writing to. If you're writing to standard output <code>sys.stdout</code> (the usual case) - it's not open for reading. So technically no. What you <strong>could</strong> do is use a pipe the output to someone else and grab it after stdout already flushed it.</p>\n\n<p>This is an example under Ubuntu OS, but there are probably equivalents in any OS:</p>\n\n<p>And example script (<code>p.py</code>):</p>\n\n<pre><code>print \"hello\"\n</code></pre>\n\n<p>Take the first of last <strong>two</strong> characters to skip newline (<code>\\n</code>) from <code>print</code>:</p>\n\n<pre><code>reut@sharabani:~$ python p.py | tail -c2 | head -c1\no\n</code></pre>\n\n<h2>Edit:</h2>\n\n<p>If you do not have access to <code>head</code> and <code>tail</code> it should be simple to do this in python:</p>\n\n<p>write the script <code>take_last_char.py</code>:</p>\n\n<pre><code>import sys\n# read whatever output the previous script piped here\n# but only keep the last line (stripping the newline...)\nfor line in sys.stdin:\n    tmp = line.strip()\n\nprint tmp[-1]\n</code></pre>\n\n<p>And now simply use:</p>\n\n<pre><code>python p.py | python take_last_char.py\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 2566275, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/856181ec20a0476f57880b311596243f?s=128&d=identicon&r=PG", "display_name": "Ahmad Siavosh", "link": "https://stackoverflow.com/users/2566275/ahmad-siavosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2712, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421882827, "creation_date": 1421881758, "last_edit_date": 1421882288, "question_id": 28078591, "link": "https://stackoverflow.com/questions/28078591/retrieving-the-last-printed-character-on-console", "title": "Retrieving the last printed character on console", "body": "<p>I'd like to get the last character written on the console in python.\nFor example I may have several threads which write on the console then in each of the threads I need to know the last character that has been written to the console by other threads. Is there any way?</p>\n\n<p>e.g:\n<code>&gt;&gt; print 'Hello'</code>\nthe last character is '\\n' in this case\nor</p>\n\n<pre><code>Thread A:\n&gt;&gt;&gt; print 'Hello'\nThread B:\n&gt;&gt;&gt; print 'Bye'\nThread C:\n&gt;&gt;&gt; What is the last written character?\n</code></pre>\n\n<p>And it's obvious we can't determine the answer in thread C unless we ask the Console in some way.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 1788, "user_id": 1391376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1J4A1.jpg?s=128&g=1", "display_name": "chiffa", "link": "https://stackoverflow.com/users/1391376/chiffa"}, "edited": false, "score": 0, "creation_date": 1421883373, "post_id": 28078565, "comment_id": 44536524, "body": "it&#39;s better to avoid using <code>os.chdir</code> something like <code>os.path.join(dir, filename)</code> would just get you the file you need without the side-effect of changing the whole working directory to wherever you store your images."}, {"owner": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "reply_to_user": {"reputation": 1788, "user_id": 1391376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1J4A1.jpg?s=128&g=1", "display_name": "chiffa", "link": "https://stackoverflow.com/users/1391376/chiffa"}, "edited": false, "score": 0, "creation_date": 1422030373, "post_id": 28078565, "comment_id": 44602555, "body": "Thanks for the pointer.  Made the change"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "edited": false, "score": 0, "creation_date": 1422029674, "post_id": 28078653, "comment_id": 44602083, "body": "Thanks for the help.  This did indeed get me where I needed.  I was attempting to use the same operation but left out the 3, which would explain why it was telling me that it was the wrong size.  I actually had to switch the size dimensions to get it to display the image correctly, and even then the colors are inverted.  Is the reshape reversing my values?"}], "tags": [], "owner": {"reputation": 4177, "user_id": 1710566, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/46df81dc7409d5ba5b66c0d245c9fb97?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/1710566/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1421882066, "creation_date": 1421882066, "answer_id": 28078653, "question_id": 28078565, "link": "https://stackoverflow.com/questions/28078565/new-to-python-and-working-on-basic-image-processing-but-i-think-np-array-is-arr/28078653#28078653", "title": "New to python and working on basic image processing, but I think np.array is arranging the data in a strange way", "body": "<pre><code>pd = np.array(laura.getdata()).reshape((laura.size[0], laura.size[1]),3)\n</code></pre>\n\n<p>That should do the trick. The 3 is because its an RGB image.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "edited": false, "score": 0, "creation_date": 1422030051, "post_id": 28078961, "comment_id": 44602329, "body": "I&#39;m not totally sure I understand that array format.  Since each of the three values has its own range, does that not imply that it&#39;s fundamentally a 5-d array?  And unfortunately plt.imshow attempts to turn the existing array into a single column image that goes 49k+ pixels down instead of indexing it back into an image.  Re-sizing the array to what I had in my head makes imshow cooperate, but even then my colors are inverted.  It&#39;s extremely bizarre.  It seems almost as though somewhere in the process the values have been read/written backwards"}, {"owner": {"reputation": 1788, "user_id": 1391376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1J4A1.jpg?s=128&g=1", "display_name": "chiffa", "link": "https://stackoverflow.com/users/1391376/chiffa"}, "reply_to_user": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "edited": false, "score": 0, "creation_date": 1422041220, "post_id": 28078961, "comment_id": 44608653, "body": "numpy arrays are basically efficient data container types implemented in C and bound to python for faster operations."}, {"owner": {"reputation": 1788, "user_id": 1391376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1J4A1.jpg?s=128&g=1", "display_name": "chiffa", "link": "https://stackoverflow.com/users/1391376/chiffa"}, "reply_to_user": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "edited": false, "score": 0, "creation_date": 1422041832, "post_id": 28078961, "comment_id": 44608929, "body": "However because they are stored on such a low-level, they are stored as lists, not matrices, which PIL accounts for, taking just one long array instead of a matrix. In addition, to manage colors it adds an additional dimension for 3 RGB colors. If you are having problems with those, try to apply np.rollaxis(your_array, 0) before reshaping it: it might be that your RGB got read differently if your image format is strange (normally never happens with jpg though)"}], "tags": [], "owner": {"reputation": 1788, "user_id": 1391376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1J4A1.jpg?s=128&g=1", "display_name": "chiffa", "link": "https://stackoverflow.com/users/1391376/chiffa"}, "is_accepted": false, "score": 0, "last_activity_date": 1421883686, "creation_date": 1421883686, "answer_id": 28078961, "question_id": 28078565, "link": "https://stackoverflow.com/questions/28078565/new-to-python-and-working-on-basic-image-processing-but-i-think-np-array-is-arr/28078961#28078961", "title": "New to python and working on basic image processing, but I think np.array is arranging the data in a strange way", "body": "<p>The format you are using is an RGB 8-bit file.</p>\n\n<p>The underlying structure of your image is an <code>(814, 611, 3)</code> numpy array, where 3 is a color intensity, one for each channel and <code>(814, 611)</code> are dimensions of your image.</p>\n\n<p>For the simplicity PIL flattens out the first two dimensions (this is anyway how numpy arrays operate on a low level) and then runs indexing operations to render the image once you call imshow.</p>\n"}], "owner": {"reputation": 3, "user_id": 4435399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459a1a7dab5c82bf9daa54c36fe5cee8?s=128&d=identicon&r=PG&f=1", "display_name": "Ninjaginge", "link": "https://stackoverflow.com/users/4435399/ninjaginge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 28078653, "answer_count": 2, "score": 0, "last_activity_date": 1421883686, "creation_date": 1421881657, "question_id": 28078565, "link": "https://stackoverflow.com/questions/28078565/new-to-python-and-working-on-basic-image-processing-but-i-think-np-array-is-arr", "title": "New to python and working on basic image processing, but I think np.array is arranging the data in a strange way", "body": "<p>Working with Spyder, so python 2.7</p>\n\n<p>I'm fairly new to python and learning about image processing for some work I will need to do down the line, but I'm having some trouble working with the arrays python is spitting out at me.  I'm sure that all of my troubles are due to lapses in basic understanding, so I'm hoping that someone can straighten me out.  </p>\n\n<p>Lots of this is just practice for me, so I go through a lot of basic commands to get a better grasp on things.  The problem comes when I attempt to convert the image to an array.  The image is 814x611, but instead of arranging the data like that, np.array decides to give me an array with 497354 rows and 3 columns (RGB values I assume).  I wasn't especially successful at turning that back into an image. </p>\n\n<p>Any attempt I've tried to get the correct output or alter the array it gives back have been unsuccessful or sent back errors. At this point I'm pretty burned out.  I hope someone can help me think about this the right way.</p>\n\n<pre><code>import numpy as np\nfrom PIL import Image as im\nimport matplotlib.pyplot as plt\nimoprt os \n\nos.chdir('c:\\\\users\\\\jan\\\\desktop\\\\pythonstuff')\n\nlaura = im.open(\"laura.jpg\")\nlaura.save(\"laura.jpg\",\"png\")\n\ndimensions = laura.size\nprint dimensions\n\nplt.imshow(laura)\nprint type(laura)\n\n#pd for pixel data\n#tried this with and without the tuple dtype.  no change\npd = np.array(laura.getdata(),dtype=tuple)\nprint pd\n</code></pre>\n\n<p>that gives me </p>\n\n<pre><code>(814, 611)\n&lt;type 'instance'&gt;\n[[93 100 93]\n [94 101 94]\n [97 103 99]\n ..., \n [126 63 82]\n [126 63 82]\n [128 63 83]]\n</code></pre>\n\n<p>and then it properly displays my image below that.  Why would it give me the data in this strange format?  Is there an easy way to convert it to a format that I can conveniently turn BACK into an image?  </p>\n"}, {"tags": ["python", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 30989, "user_id": 3379653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/f97JZ.png?s=128&g=1", "display_name": "qwerty_so", "link": "https://stackoverflow.com/users/3379653/qwerty-so"}, "edited": false, "score": 0, "creation_date": 1421882283, "post_id": 28078555, "comment_id": 44536143, "body": "Hi, this is not the place for such a question. It&#39;s much too broad. Come here if you have a specific coding issue you need help with."}, {"owner": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "edited": false, "score": 0, "creation_date": 1421920633, "post_id": 28078555, "comment_id": 44549066, "body": "Take a look at Convolutional Neural Nets. But OpenCV doesn&#39;t have CNN support, and training a CNN is not straightforward."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4480243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734af0194cc641c9eb29fb41bf658d18?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McClenny", "link": "https://stackoverflow.com/users/4480243/jake-mcclenny"}, "edited": false, "score": 0, "creation_date": 1421882709, "post_id": 28078626, "comment_id": 44536298, "body": "Thanks! The question was meant to be open as I&#39;m just assessing my options for implementing this feature. I appreciate your response."}, {"owner": {"reputation": 43, "user_id": 4480243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734af0194cc641c9eb29fb41bf658d18?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McClenny", "link": "https://stackoverflow.com/users/4480243/jake-mcclenny"}, "edited": false, "score": 0, "creation_date": 1421888251, "post_id": 28078626, "comment_id": 44537995, "body": "Follow up, how well with this run on a microcontroller such as a RasPi? I can tell that making the classifiers can be pretty intensive, but once they are created, how much processing power does it take to use the classifiers to detect the object?"}, {"owner": {"reputation": 4177, "user_id": 1710566, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/46df81dc7409d5ba5b66c0d245c9fb97?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/1710566/chris"}, "reply_to_user": {"reputation": 43, "user_id": 4480243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734af0194cc641c9eb29fb41bf658d18?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McClenny", "link": "https://stackoverflow.com/users/4480243/jake-mcclenny"}, "edited": false, "score": 0, "creation_date": 1421888380, "post_id": 28078626, "comment_id": 44538037, "body": "it should be fine after you have the classifiers, from a quick google there are some demo face detection programs written already for the Pi that run well."}], "tags": [], "owner": {"reputation": 4177, "user_id": 1710566, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/46df81dc7409d5ba5b66c0d245c9fb97?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/1710566/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1421881906, "creation_date": 1421881906, "answer_id": 28078626, "question_id": 28078555, "link": "https://stackoverflow.com/questions/28078555/detecting-similar-objects-using-opencv/28078626#28078626", "title": "Detecting similar objects using OpenCV", "body": "<p>Very open question, but OpenCV is where to be looking. Your best bet would probably be building Haar cascade classifiers. Plenty of reading material on the topic, somewhat overwhelming at first but that is what I would be looking into.</p>\n"}], "owner": {"reputation": 43, "user_id": 4480243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734af0194cc641c9eb29fb41bf658d18?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McClenny", "link": "https://stackoverflow.com/users/4480243/jake-mcclenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421881906, "creation_date": 1421881621, "question_id": 28078555, "link": "https://stackoverflow.com/questions/28078555/detecting-similar-objects-using-opencv", "title": "Detecting similar objects using OpenCV", "body": "<p>I've been looking into this for a while and was wondering the feasibility of using something like feature detection in OpenCV to do the following:</p>\n\n<p>I'm working on a project that requires identifying items within a grocery store that do not have barcodes (i.e. produce). I want to build a local database of the various items to be identified and, using images of the items, compare them to the database and tell what the item is.</p>\n\n<p>This doesn't need to be perfectly accurate (it doesn't need to tell between different types of apples, for example), but I want it to be able to tell between something like a peach and an orange, but still be able to tell a banana is a banana even though its color is slightly different.</p>\n\n<p>My question is, is what I'm trying to do possible using OpenCV? From what I've been reading, identical objects can be tracked with relative ease, but I'm having trouble stumbling upon anything more like what I'm attempting to do.</p>\n\n<p>Any nudges in the right direction would be immensely appreciated.</p>\n"}, {"tags": ["python", "opencv", "image-segmentation", "scikit-image", "image-morphology"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1421881930, "post_id": 28078530, "comment_id": 44536024, "body": "The structuring element you have specified is probably too small.  If you do a 3 x 3, the kernel is too small that it isn&#39;t large enough to connect neighbouring regions together.  Did you try going larger?  What about a 9 x 9 perhaps?  Also, what platform?  I see you have tagged this question as OpenCV, but did not specify which language.  C++ or Python?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1421884486, "post_id": 28078530, "comment_id": 44536881, "body": "Consider dilating to connect all of the gaps together, then use morphological thinning to thin the object down to its minimal representation.  Here&#39;s an algorithm using OpenCV C++: <a href=\"https://opencv-code.com/quick-tips/implementation-of-thinning-algorithm-in-opencv/\" rel=\"nofollow noreferrer\">opencv-code.com/quick-tips/&hellip;</a> - You can easily transcribe this over to Python.  This uses the classic Zhang-Suen algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 8028, "user_id": 2638485, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/Z37mC.jpg?s=128&g=1", "display_name": "Alex Rothberg", "link": "https://stackoverflow.com/users/2638485/alex-rothberg"}, "edited": false, "score": 1, "creation_date": 1421890132, "post_id": 28079714, "comment_id": 44538519, "body": "That solution does not work if the black border around the target image grows. For example using OpenCV: <code>image = cv2.copyMakeBorder(image, 200, 200, 200, 200, cv2.BORDER_CONSTANT)</code>"}, {"owner": {"reputation": 6487, "user_id": 214686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b30b909765488cf4cf9de4a496f9a408?s=128&d=identicon&r=PG", "display_name": "Stefan van der Walt", "link": "https://stackoverflow.com/users/214686/stefan-van-der-walt"}, "reply_to_user": {"reputation": 8028, "user_id": 2638485, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/Z37mC.jpg?s=128&g=1", "display_name": "Alex Rothberg", "link": "https://stackoverflow.com/users/2638485/alex-rothberg"}, "edited": false, "score": 0, "creation_date": 1421975885, "post_id": 28079714, "comment_id": 44578509, "body": "Just play with the threshold.  For that image, 0.01 worked for me."}, {"owner": {"reputation": 8028, "user_id": 2638485, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/Z37mC.jpg?s=128&g=1", "display_name": "Alex Rothberg", "link": "https://stackoverflow.com/users/2638485/alex-rothberg"}, "edited": false, "score": 1, "creation_date": 1421976131, "post_id": 28079714, "comment_id": 44578598, "body": "I was hoping for a solution that is at least robust to changes is black border size."}, {"owner": {"reputation": 6487, "user_id": 214686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b30b909765488cf4cf9de4a496f9a408?s=128&d=identicon&r=PG", "display_name": "Stefan van der Walt", "link": "https://stackoverflow.com/users/214686/stefan-van-der-walt"}, "reply_to_user": {"reputation": 8028, "user_id": 2638485, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/Z37mC.jpg?s=128&g=1", "display_name": "Alex Rothberg", "link": "https://stackoverflow.com/users/2638485/alex-rothberg"}, "edited": false, "score": 3, "creation_date": 1421977584, "post_id": 28079714, "comment_id": 44578964, "body": "Have you even played with the code to see what it does?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1421997099, "post_id": 28079714, "comment_id": 44584169, "body": "This is a good answer. Despite the general concensus, I&#39;ve actually run the code. Looks good!"}], "tags": [], "owner": {"reputation": 6487, "user_id": 214686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b30b909765488cf4cf9de4a496f9a408?s=128&d=identicon&r=PG", "display_name": "Stefan van der Walt", "link": "https://stackoverflow.com/users/214686/stefan-van-der-walt"}, "is_accepted": false, "score": 7, "last_activity_date": 1421888550, "creation_date": 1421888550, "answer_id": 28079714, "question_id": 28078530, "link": "https://stackoverflow.com/questions/28078530/gap-filling-contours-lines/28079714#28079714", "title": "Gap Filling Contours / Lines", "body": "<p>In the following snippet I calculate the distance map of the inverse image.  I threshold it to obtain a large outline of the current object, which I then skeletonize to get the central line.  This may already be enough for your purposes.  But to make it consistent with the line thickness given, I dilate the skeleton and add it to the original, thereby closing any gaps.  I also remove the one remaining object touching the boundary.</p>\n\n<p><img src=\"https://i.stack.imgur.com/uqg77.png\" alt=\"mind the gap\"></p>\n\n<pre><code>from skimage import io, morphology, img_as_bool, segmentation\nfrom scipy import ndimage as ndi\nimport matplotlib.pyplot as plt\n\nimage = img_as_bool(io.imread('/tmp/gaps.png'))\nout = ndi.distance_transform_edt(~image)\nout = out &lt; 0.05 * out.max()\nout = morphology.skeletonize(out)\nout = morphology.binary_dilation(out, morphology.selem.disk(1))\nout = segmentation.clear_border(out)\nout = out | image\n\nplt.imshow(out, cmap='gray')\nplt.imsave('/tmp/gaps_filled.png', out, cmap='gray')\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 10202354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u6OOQIVwuy8/AAAAAAAAAAI/AAAAAAAAWq8/Acacjx3baWo/photo.jpg?sz=128", "display_name": "Steven", "link": "https://stackoverflow.com/users/10202354/steven"}, "is_accepted": false, "score": 1, "last_activity_date": 1612021342, "last_edit_date": 1612021342, "creation_date": 1609520125, "answer_id": 65531714, "question_id": 28078530, "link": "https://stackoverflow.com/questions/28078530/gap-filling-contours-lines/65531714#65531714", "title": "Gap Filling Contours / Lines", "body": "<p>Assuming that in a second step, you want to use these contours for contour detection, I have a solution that is more straight forward. Using Dilation, will enlarge the white areas, thereby closing the gaps:</p>\n<p><a href=\"https://i.stack.imgur.com/PHjdQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PHjdQ.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import cv2\nimport numpy as np\n\nimage = cv2.imread('lineswithgaps.png')\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n# apply dilation on src image\nkernel = np.ones((3,3),np.uint8)\ndilated_img = cv2.dilate(gray, kernel, iterations = 2)\n\ncv2.imshow(&quot;filled gaps for contour detection&quot;, dilated_img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n<p>As a drawback, the Edges become thicker, however, this might not be a problem, if you don't need high accuracy...\nIf you want to detect contours now, just add these lines to the first code snipped:</p>\n<p><a href=\"https://i.stack.imgur.com/bW1Tp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bW1Tp.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>canvas = dilated_img.copy() # Canvas for plotting contours on\ncanvas = cv2.cvtColor(canvas, cv2.COLOR_GRAY2RGB) # create 3 channel image so we can plot contours in color\n\ncontours, hierarchy = cv2.findContours(dilated_img, cv2.RETR_CCOMP, cv2.CHAIN_APPROX_NONE)\n\n# loop through the contours and check through their hierarchy, if they are inner contours\n# more here: https://docs.opencv.org/master/d9/d8b/tutorial_py_contours_hierarchy.html\nfor i,cont in enumerate(contours):\n    # look for hierarchy[i][3]!=-1, ie hole boundaries\n    if ( hierarchy[0][i][3] != -1 ):\n        #cv2.drawContours(canvas, cont, -1, (0, 180, 0), 1) # plot inner contours GREEN\n        cv2.fillPoly(canvas, pts =[cont], color=(0, 180, 0)) # fill inner contours GREEN\n    else:\n        cv2.drawContours(canvas, cont, -1, (255, 0, 0), 1) # plot all others BLUE, for completeness\n\ncv2.imshow(&quot;Contours detected&quot;, canvas)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}], "owner": {"reputation": 8028, "user_id": 2638485, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/Z37mC.jpg?s=128&g=1", "display_name": "Alex Rothberg", "link": "https://stackoverflow.com/users/2638485/alex-rothberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5669, "favorite_count": 6, "answer_count": 2, "score": 5, "last_activity_date": 1612021342, "creation_date": 1421881455, "last_edit_date": 1421883545, "question_id": 28078530, "link": "https://stackoverflow.com/questions/28078530/gap-filling-contours-lines", "title": "Gap Filling Contours / Lines", "body": "<p>I have the following image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/WhGXN.png\" alt=\"Image with gapped contours\"></p>\n\n<p>and I would like to fill in its contours (i.e. I would like to gap fill the lines in this image).</p>\n\n<p>I have tried a morphological closing, but using a rectangular kernel of size <code>3x3</code> with <code>10</code> iterations does not fill in the entire border. I have also tried a <code>21x21</code> kernel with <code>1</code> iteration and also not had luck.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have tried this in OpenCV (Python) using:</p>\n\n<pre><code>cv2.morphologyEx(img, cv2.MORPH_CLOSE, cv2.getStructuringElement(cv2.MORPH_RECT, (21,21)))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>cv2.morphologyEx(img, cv2.MORPH_CLOSE, cv2.getStructuringElement(cv2.MORPH_RECT, (3,3)), iterations=10)\n</code></pre>\n\n<p>and <a href=\"http://scikit-image.org/docs/dev/auto_examples/applications/plot_morphology.html\" rel=\"noreferrer\">scikit-image</a>:</p>\n\n<pre><code>closing(img, square(21))\n</code></pre>\n\n<p>My end goal is to a have a filled version of that entire image without distorting the area covered.</p>\n"}, {"tags": ["python", "mongodb", "twitter-bootstrap", "flask"], "comments": [{"owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 2, "creation_date": 1421883200, "post_id": 28078522, "comment_id": 44536466, "body": "Do you have any experience with HTML? You need to use a &lt;form&gt; (<a href=\"http://www.w3schools.com/htmL/html_forms.asp\" rel=\"nofollow noreferrer\">w3schools.com/htmL/html_forms.asp</a>) and then on the flask side use a request.args.get() if you&#39;re doing a GET request to pull in the data."}, {"owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 1, "creation_date": 1421883394, "post_id": 28078522, "comment_id": 44536532, "body": "Also why do you have thay try-except block when you render the template?"}, {"owner": {"reputation": 101, "user_id": 852127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fec0f93dda9a366035347bbdec21b7eb?s=128&d=identicon&r=PG", "display_name": "FrEaKi", "link": "https://stackoverflow.com/users/852127/freaki"}, "reply_to_user": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "edited": false, "score": 0, "creation_date": 1421936695, "post_id": 28078522, "comment_id": 44558687, "body": "Thank you guys! i&#39;ll try to do it with a get &amp; post method"}], "owner": {"reputation": 101, "user_id": 852127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fec0f93dda9a366035347bbdec21b7eb?s=128&d=identicon&r=PG", "display_name": "FrEaKi", "link": "https://stackoverflow.com/users/852127/freaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 613, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421882835, "creation_date": 1421881423, "last_edit_date": 1421882835, "question_id": 28078522, "link": "https://stackoverflow.com/questions/28078522/trying-to-get-values-back-from-a-flask-template-into-my-python-with-mongodb-as-d", "title": "Trying to get Values back from a Flask template into my Python with MongoDB as Database", "body": "<p>i'm trying to get some data into an Flask application. Please keep in mind that I am new at this. I am trying to make a row of selections. I am using Dropdown boxes and also using Bootstrap.</p>\n\n<p>In my Flask app (index.py) i'm getting some values. My collections in the MongoDB:</p>\n\n<pre><code>coll = db.collection_names()\n\ntry:\n    return flask.render_template('pricHistory.html', title=title, pageType=pageType, coll=coll)\nexcept Exception as e:\n    return str(\"Exception is been handled at Price-History: \", e)\n</code></pre>\n\n<blockquote>\n  <p>on the webpage i use something like this:</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"btn-group first\"&gt;\n    &lt;button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"&gt;\n        Collections &lt;span class=\"caret\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n    &lt;ul class=\"dropdown-menu\" role=\"menu\" onclick&gt;\n        {% for i in coll %}                 \n            {% if i == \"system.indexes\" %}\n\n            {% else %}\n            &lt;li class=\"test\"&gt;&lt;a href=\"#\"&gt;{{ i }}&lt;/a&gt;&lt;/li&gt;\n            {% endif %}\n        {% endfor %}\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How can i catch the selected value and use it in my index.py again to get the second Dropdown. Because the Second Dropdown should have DOCUMENTS in the mongoDB by the Choice of the First Dropdown (COLLECTION).</p>\n\n<blockquote>\n  <p>The second is similar. Example of what i have is:</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"btn-group second\"&gt;\n    &lt;button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"&gt;\n        CPU &lt;span class=\"caret\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n\n    &lt;ul class=\"dropdown-menu\" role=\"menu\" onclick&gt;\n        {% for i in cpu %}\n            &lt;li class=\"test\"&gt;&lt;a href=\"#\"&gt;{{ i }}&lt;/a&gt;&lt;/li&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "maya"], "comments": [{"owner": {"reputation": 2402, "user_id": 2502262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvS8O.jpg?s=128&g=1", "display_name": "kartikg3", "link": "https://stackoverflow.com/users/2502262/kartikg3"}, "edited": false, "score": 0, "creation_date": 1421884880, "post_id": 28078503, "comment_id": 44537000, "body": "Can you share a screenshot of the render settings and point to the settings you want to change using Python?"}, {"owner": {"reputation": 23, "user_id": 4480353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba31be68c6f63e6292a4de127678c7?s=128&d=identicon&r=PG&f=1", "display_name": "Urd", "link": "https://stackoverflow.com/users/4480353/urd"}, "reply_to_user": {"reputation": 2402, "user_id": 2502262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvS8O.jpg?s=128&g=1", "display_name": "kartikg3", "link": "https://stackoverflow.com/users/2502262/kartikg3"}, "edited": false, "score": 0, "creation_date": 1421918927, "post_id": 28078503, "comment_id": 44548054, "body": "Sure!  I wanna change this settings marked in red  <a href=\"http://s3.postimg.org/rz8emph6b/capt.png\" rel=\"nofollow noreferrer\">s3.postimg.org/rz8emph6b/capt.png</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 4480353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba31be68c6f63e6292a4de127678c7?s=128&d=identicon&r=PG&f=1", "display_name": "Urd", "link": "https://stackoverflow.com/users/4480353/urd"}, "is_accepted": false, "score": 1, "last_activity_date": 1422005033, "last_edit_date": 1422005033, "creation_date": 1421923894, "answer_id": 28086940, "question_id": 28078503, "link": "https://stackoverflow.com/questions/28078503/modify-arnold-render-settings-in-python/28086940#28086940", "title": "Modify arnold render settings in python", "body": "<p>I solved it =) </p>\n\n<p>Just in case someone needed</p>\n\n<pre><code>for setting in settingNames:\n    print \"defaultArnoldDriver.%s = %s\" %( setting , cmds.getAttr(\"defaultArnoldDriver.%s\" % setting  ) )\n</code></pre>\n\n<p>to know the settings names</p>\n\n<p>and </p>\n\n<pre><code>cmds.setAttr ('defaultRenderGlobals.outFormatControl', 2 );\n</code></pre>\n\n<p>for the other rendering settings =) </p>\n"}], "owner": {"reputation": 23, "user_id": 4480353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba31be68c6f63e6292a4de127678c7?s=128&d=identicon&r=PG&f=1", "display_name": "Urd", "link": "https://stackoverflow.com/users/4480353/urd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581883909, "creation_date": 1421881348, "question_id": 28078503, "link": "https://stackoverflow.com/questions/28078503/modify-arnold-render-settings-in-python", "title": "Modify arnold render settings in python", "body": "<p>I'm trying to modify the arnold common render settings of maya but I'm at the loss.</p>\n\n<p>There is any function where I can call these arguments such as Image size presets, ratio and so on using python instead of MEL?</p>\n\n<p>Sorry if someone already asked, but I've searched but with no avail.</p>\n\n<p>Thanks!  </p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421881518, "post_id": 28078495, "comment_id": 44535871, "body": "You can, I don&#39;t get <code>self.position = [], []</code>? if you want a list of points, you can define a point <code>class</code> too."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1421881531, "post_id": 28078495, "comment_id": 44535878, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/35988/c-like-structures-in-python\">C-like structures in Python</a>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1421881534, "post_id": 28078495, "comment_id": 44535879, "body": "Right now, <code>particle</code> is defined as a list that contains the value of <code>N</code>, which means it&#39;s a list with one element in it."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421881820, "post_id": 28078495, "comment_id": 44535981, "body": "Yes, a class is like a struct with methods. But your array of structs is not part of the struct in C--why would you make it part of the class in Python? It should be a list of particle objects. The particle objects should just have the same members your struct does."}], "answers": [{"comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1421881863, "post_id": 28078577, "comment_id": 44535993, "body": "A list of dictionaries, eh?  I&#39;m thinking a class is definitely appropriate here."}, {"owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "edited": false, "score": 0, "creation_date": 1421882002, "post_id": 28078577, "comment_id": 44536049, "body": "to class or not to class ... well, that&#39;s a different debate :-)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421882931, "post_id": 28078577, "comment_id": 44536376, "body": "Your proposed change to a dictionary would slow his code down tremendously. Yes, dictionaries are fabulously useful when your need them--but a huge waste of resources when you don&#39;t."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421883431, "post_id": 28078577, "comment_id": 44536551, "body": "@LeeDanielCrocker: In CPython, the attribute lookup uses a dictionary anyway."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1421883455, "post_id": 28078577, "comment_id": 44536560, "body": "The example with <code>class TypeParticle</code> has some serious errors in it: <code>self</code> is missing everywhere."}], "tags": [], "owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "is_accepted": false, "score": 1, "last_activity_date": 1421937780, "last_edit_date": 1421937780, "creation_date": 1421881715, "answer_id": 28078577, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078577#28078577", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>You have two options for this problem. The first is to use a class;</p>\n\n<pre><code>struct type_particle {\n    double mass;\n    double acceleration[3];\n    double position[3][3];\n    double velocity[3][3];\n};\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>class TypeParticle:\n    def __init__(self): #pass any kind of init variable you know as an argument\n        self.mass = None\n        self.acceleration = []\n        self.position = []\n        self.velocity = []\n</code></pre>\n\n<p>However, you should - maybe - look into dictionaries (the single most useful data object in Python - I think). However, this only makes sense if the number of particles is small, for a (large) list of dictionaries is, as was commented on, not something you want. In this case, this would become</p>\n\n<pre><code>type_particle = {\n    'mass' = 0.,\n    'acceleration' = [],\n    'position' = [],\n    'velocity' = []\n}\n</code></pre>\n\n<p>you could then access it with e.g.</p>\n\n<pre><code>type_particle['acceleration']\n</code></pre>\n\n<p>Some explanation: Python <a href=\"http://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">duck-types</a> and dynamically allocates memory. Therefore you do need neither to set the types, nor the exact size of the lists.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421882603, "post_id": 28078644, "comment_id": 44536254, "body": "I don&#39;t see the benefit in using this, what is it?"}, {"owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421883490, "post_id": 28078644, "comment_id": 44536572, "body": "If all is needed is a simple class with some attributes, then it&#39;s simpler to write and read; I feel it&#39;s more pythonic (although you may disagree). It may not be suitable if the OP requires to do different checks etc. when instantiating an object. But, since OP was using a struct, I assumed all OP needs is a container."}, {"owner": {"reputation": 3627, "user_id": 1460849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f8e4125e72fd9a100f62da3324a3635?s=128&d=identicon&r=PG", "display_name": "kalhartt", "link": "https://stackoverflow.com/users/1460849/kalhartt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421885719, "post_id": 28078644, "comment_id": 44537252, "body": "@iharob as for the benefit, namedtuples use less memory because their properties are not stored in a normal dict. It&#39;s essentially the same as your answer, but with <code>__slots__</code> and some other batteries included."}], "tags": [], "owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "is_accepted": false, "score": 3, "last_activity_date": 1421883344, "last_edit_date": 1421883344, "creation_date": 1421882015, "answer_id": 28078644, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078644#28078644", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>What you need is a Python <a href=\"https://docs.python.org/3.4/tutorial/classes.html\" rel=\"nofollow\">class</a>. Since your use-case is quite simple, you can use a <a href=\"https://docs.python.org/3.4/library/collections.html#collections.namedtuple\" rel=\"nofollow\"><code>namedtuple</code></a> which essentially creates a boilerplate class for you:</p>\n\n<pre><code>from collections import namedtuple\n\nParticle = namedtuple('Particle', ['mass', 'acceleration', 'position', 'velocity'])\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>&gt;&gt;&gt; sun_mass = 1.989e30\n&gt;&gt;&gt; sun_acceleration = [1, 2, 3]\n&gt;&gt;&gt; sun_position = [4, 5, 6]\n&gt;&gt;&gt; sun_velocity = [7, 8, 9]\n&gt;&gt;&gt; sun = Particle(sun_mass, sun_acceleration, sun_position, sun_velocity)\n&gt;&gt;&gt; sun\nParticle(mass=1.989e+30, acceleration=[1, 2, 3], position=[4, 5, 6], velocity=[7, 8, 9])\n</code></pre>\n\n<p>Inspired by iharob's answer, you can also have a <code>Vector</code> <a href=\"https://docs.python.org/3.4/library/collections.html#collections.namedtuple\" rel=\"nofollow\">namedtuple</a>:</p>\n\n<pre><code>Vector = namedtuple('Vector', ['x', 'y', 'z'])\n</code></pre>\n\n<p>Even if you were to create your own class for <code>Particle</code> because you want to easily to some checks etc. before initialising it, you should still use a <code>namedtuple</code> for <code>Vector</code> as it is very simple. But, be mindful that <code>namedtuple</code>s are immutable so once initialised you cannot change its attributes. For <code>mass</code>, that is fine because the mass doesn't change. But if you wanted to change the attributes on the <code>Vector</code> then you have to use a <code>list</code> instead, as shown in the first example.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421882261, "creation_date": 1421882261, "answer_id": 28078692, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078692#28078692", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>See this idea</p>\n\n<pre><code>class Vector:\n    def __init__(self, x, y, z):\n        self.x = x\n        self.y = y\n        self.z = z\n\nclass Particle:\n    def __init__(self, mass, acceleration, position, velocity):\n        self.position = [None, position,None]\n        self.velocity = [None, velocity, None]\n        self.acceleration = [None, acceleration, None]\n        self.mass = mass\n\nparticles    = []\nposition     = Vector(-0.002893107099833329, 0, 0)\nvelocity     = Vector(0, 0, 0) # at rest\nmass         = sunMass\nacceleration = initialAcceleration\n\nparticle.append(Particle(mass, acceleration, position, velocity);\n.\n.\n.\nparticle.append(Particle(otherMass, otherAcceleration, otherPosition, otherVelocity);\n</code></pre>\n\n<p>you can use classes this way, and further more, you can add methods to update the values, get the values, print the etc.</p>\n"}], "owner": {"reputation": 41, "user_id": 3650942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eaf2476bec6cc22ab90b6634d5c71a?s=128&d=identicon&r=PG&f=1", "display_name": "user3650942", "link": "https://stackoverflow.com/users/3650942/user3650942"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1421937780, "creation_date": 1421881333, "last_edit_date": 1421881535, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>I wrote a program in C that uses structs to model the motion of planets going around the Sun.  I want to write that same program in Python.  The planets and Sun are treated as particles.</p>\n\n<p>In C I wrote a struct for the data of any particle.  In the 2D arrays, the rows are the x,y,z components and the columns are the old,current,new iterations.  The acceleration of each particle doesn't change so it is an array of x,y,z components. </p>\n\n<pre><code>struct type_particle {\n    double mass;\n    double acceleration[3];\n    double position[3][3];\n    double velocity[3][3];\n};\n</code></pre>\n\n<p>I used this struct variable to access data about specific particles.  Each element in the array is a specific particle where N=9.  For example, particle[0] is the Sun.</p>\n\n<pre><code>static struct type_particle particle[N];\n</code></pre>\n\n<p>I define the initial x-position of the Sun by</p>\n\n<pre><code>particle[0].position[0][0] = -0.002893107099833329;   \n</code></pre>\n\n<p>I want to do the same thing in Python using classes.  I am just using the Sun and one planet so N=2.  So far I have this.     </p>\n\n<pre><code>class type_particle:\n    particle = [N]\n    def __init__(self, position):\n        self.position = [],[]\n</code></pre>\n\n<p>I am not sure if I can define the class variable \"particle\" as a list.  Is this on the right track to creating something that gives the same results as the struct and struct variable I used earlier?  I read that classes can be used like structs but I do not understand how.  My goal is to use a class to access data for a particular particle.  Any help is appreciated.</p>\n"}, {"tags": ["python", "django", "django-models", "django-forms", "django-admin"], "comments": [{"owner": {"reputation": 13704, "user_id": 119071, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jkI85.jpg?s=128&g=1", "display_name": "Serafeim", "link": "https://stackoverflow.com/users/119071/serafeim"}, "edited": false, "score": 0, "creation_date": 1421911501, "post_id": 28078419, "comment_id": 44544498, "body": "I&#39;m not really sure what&#39;s the problem (you haven&#39;t provided a full stacktrace to see where the querying goes bad) however could you try returning your form instance directly from the <code>get_form</code> method and see what happens?"}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 2, "last_activity_date": 1421912730, "creation_date": 1421912730, "answer_id": 28083570, "question_id": 28078419, "link": "https://stackoverflow.com/questions/28078419/django-modeladmin-get-queryset-from-modelform/28083570#28083570", "title": "Django ModelAdmin get queryset from ModelForm", "body": "<p>The trouble is that you are actually instantiating your form in the else clause, whereas the other clause returns the class rather than an instance. Both branches need to return a class.</p>\n\n<p>Unfortunately, there's no easy hook in the ModelAdmin class to provide extra kwargs for a form instantiation: it takes place deep inside the <code>changeform_view</code> method which is much harder to override than it should be. You would need to do something clever to return a class with the user value baked in from get_form.</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 10546155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6af33648321bfb3ed07e141d8a7e12?s=128&d=identicon&r=PG", "display_name": "crazy4linux", "link": "https://stackoverflow.com/users/10546155/crazy4linux"}, "is_accepted": false, "score": 0, "last_activity_date": 1542374253, "last_edit_date": 1542374253, "creation_date": 1542050336, "answer_id": 53268718, "question_id": 28078419, "link": "https://stackoverflow.com/questions/28078419/django-modeladmin-get-queryset-from-modelform/53268718#53268718", "title": "Django ModelAdmin get queryset from ModelForm", "body": "<p>Old question, but I thought I'd offer an alternative for future searches.</p>\n\n<p>You can use a <em>factory function</em> which will capture the <code>HttpRequest</code> object for use in  <code>TestForm</code>, then return the <code>TestForm</code> class back to the calling function (in this case, <code>get_form()</code>. This way you can access the current <code>request.user</code> object in <code>TestForm</code> and filter accordingly:</p>\n\n<p><em>forms.py</em></p>\n\n<pre><code>def _test_form_factory(request):\n\"\"\" Capture request object for use in TestForm, then return the TestForm class. \"\"\"\n\n    class TestForm(ModelForm):\n        def __init__(self, *args, **kwargs):\n            super().__init__(*args,**kwargs)\n            if request.user.is_superuser:\n                return\n            self.fields['controller'].queryset = Controller.objects.filter(user=request.user)\n\n        class Meta:\n            model = Test\n            exclude = ['customer']\n\n    return TestForm\n</code></pre>\n\n<p><em>admin.py</em></p>\n\n<pre><code>def get_form(self, request, obj=None, **kwargs):\n    \"\"\" Capture request object for use in the form. \"\"\"\n    self.form = _test_form_factory(request)\n    return super().get_form(request, obj, **kwargs)\n</code></pre>\n\n<p><em>NOTE:</em> All code logic can be performed in <code>TestForm</code> -- no need for <code>SuTestForm</code>, assuming all it did was pass back the full queryset for the <code>controller</code> form field in it. Even if <code>SuTestForm</code> performs other logic specific to the class, you should find that you can migrate the code to <code>TestForm</code> now, since you have access to the <code>HttpRequest</code> object.</p>\n"}], "owner": {"reputation": 1284, "user_id": 2056681, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0a92cbacc90d155c0c85f535d27aafdf?s=128&d=identicon&r=PG", "display_name": "Caleb Bramwell", "link": "https://stackoverflow.com/users/2056681/caleb-bramwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 0, "accepted_answer_id": 28083570, "answer_count": 2, "score": 4, "last_activity_date": 1542374253, "creation_date": 1421881047, "question_id": 28078419, "link": "https://stackoverflow.com/questions/28078419/django-modeladmin-get-queryset-from-modelform", "title": "Django ModelAdmin get queryset from ModelForm", "body": "<p>Im Using a ModelForm for creating a form from a model for using in various places on my site. The form has a Foreign Key field which needs to be filtered based on the user. I have successfully done this using:</p>\n\n<pre><code>class TestForm(ModelForm):\n    def __init__(self,user,*args,**kwargs):\n        super (TestForm,self ).__init__(*args,**kwargs) # populates the post\n        self.fields['controller'].queryset = Controller.objects.filter(user=user)\n\n    class Meta:\n        model = Test\n        exclude = ['customer']\n</code></pre>\n\n<p>And then in my view using: <code>form = TestForm(user)</code></p>\n\n<p>This is working fine for my forms outside of Django Admin, but my site requires that the model be editable inside Django Admin aswell. So I used this code for my ModelAdmin, based on the <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form\" rel=\"nofollow\">Django Docs</a></p>\n\n<pre><code>class TestAdmin(admin.ModelAdmin):\n    def get_form(self, request, obj=None, **kwargs):\n        if request.user.is_superuser:\n            kwargs['form'] = SuTestForm\n        else:\n            kwargs['form'] = TestForm(request.user)\n        return super(TestAdmin, self).get_form(request, obj, **kwargs)\n</code></pre>\n\n<p>I would think this should work just as is does for my other forms but i am getting this error back from django: <code>invalid literal for int() with base 10: 'TestForm'</code></p>\n\n<p>After a bit of googeling i came across this approach which puts the queryset filtering inside the ModelAdmin:</p>\n\n<pre><code>form = super(TestAdmin, self).get_form(request, obj, **kwargs)\nform.base_fields['controller_fk'].queryset = Controller.objects.filter(custid=cust)\nreturn form\n</code></pre>\n\n<p>This works perfectly fine but it does require me to create multiple copies of my ModelForm which doesn't seem very dry. So i guess does anyone know how to get my ModelForm queryset returned into the ModelAdmin form?</p>\n"}, {"tags": ["python", "reduce", "fractions"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1421880939, "post_id": 28078327, "comment_id": 44535606, "body": "Why do you need to maintain the original numerator and denominator at all? You could simply track those separately, but for the normal usecases of <code>fractions.Fraction()</code> it makes no sense whatsover."}, {"owner": {"reputation": 11, "user_id": 4480278, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Cn7HqFzKLNI/AAAAAAAAAAI/AAAAAAAAAJQ/5MU4yLdFclc/photo.jpg?sz=128", "display_name": "Sumant Murugesh", "link": "https://stackoverflow.com/users/4480278/sumant-murugesh"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1421883484, "post_id": 28078327, "comment_id": 44536568, "body": "It is actually to create a pupil worksheet for Maths activities. It will make more sense for students who want to learn adding fractions, for instance: 1/2 + 1/6 = 8/12. When I do this in Python the answer will be 2/3 instead of 8/12."}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1421884777, "post_id": 28078327, "comment_id": 44536971, "body": "@SumantMurugesh: for something so simple, why don&#39;t you just do the math yourself, or write an ImproperFraction class?"}, {"owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "edited": false, "score": 1, "creation_date": 1421886635, "post_id": 28078327, "comment_id": 44537524, "body": "Further describe the data type you want. What operations do you need to perform on it? Why does a 2-tuple not suffice?"}], "owner": {"reputation": 11, "user_id": 4480278, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Cn7HqFzKLNI/AAAAAAAAAAI/AAAAAAAAAJQ/5MU4yLdFclc/photo.jpg?sz=128", "display_name": "Sumant Murugesh", "link": "https://stackoverflow.com/users/4480278/sumant-murugesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421880699, "creation_date": 1421880699, "question_id": 28078327, "link": "https://stackoverflow.com/questions/28078327/python-how-to-stop-automatic-reduction-of-fractions", "title": "Python How to Stop Automatic Reduction of Fractions", "body": "<p>I was wondering if there is any way I can stop Python doing automatic reduction of fractions when using the fractions module. For example:</p>\n\n<pre><code>&gt;&gt;&gt; import fractions\n&gt;&gt;&gt; fractions.Fraction(8,16)\nFraction(1, 2)\n</code></pre>\n\n<p>I would like to preserve the fraction as Fraction(8,16). Is that possible using a custom class or similar? Any sample code will be much appreciated!</p>\n\n<p>Thank you!\nSumant</p>\n"}, {"tags": ["python", "local-variables"], "comments": [{"owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "edited": false, "score": 0, "creation_date": 1421880793, "post_id": 28078300, "comment_id": 44535541, "body": "why don&#39;t you just store the local variable in a file? The program itself can - as with most other languages - not be changed (at least not easily) like this."}, {"owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "edited": false, "score": 0, "creation_date": 1421881190, "post_id": 28078300, "comment_id": 44535731, "body": "see @howaboutNO&#39;s answer."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1421881194, "post_id": 28078300, "comment_id": 44535734, "body": "Syntax error in your code, the comparison should be <code>==</code> as in <code>if o == &quot;Y&quot;:</code>, not single <code>=</code>"}, {"owner": {"reputation": 1, "user_id": 4480288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b5fa68eae07dbb2ea224bf53cb10f2?s=128&d=identicon&r=PG&f=1", "display_name": "oreo666", "link": "https://stackoverflow.com/users/4480288/oreo666"}, "reply_to_user": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1421881419, "post_id": 28078300, "comment_id": 44535821, "body": "@Anzel thanks, fixed it :)"}], "answers": [{"comments": [{"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421881705, "post_id": 28078354, "comment_id": 44535940, "body": "This will overwrite the file if OP use this again. Also <code>with open()</code> method way better than <code>open()</code>. and you don&#39;t have to use <code>%d</code> , <code>str(number)</code> is ok."}], "tags": [], "owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "is_accepted": false, "score": 0, "last_activity_date": 1421881215, "last_edit_date": 1495542035, "creation_date": 1421880820, "answer_id": 28078354, "question_id": 28078300, "link": "https://stackoverflow.com/questions/28078300/how-to-change-the-value-of-a-local-variable-python-each-time-the-code-loops/28078354#28078354", "title": "How to change the value of a local variable (python) each time the code loops?", "body": "<p>You could pickle your data, read here: <a href=\"https://docs.python.org/2/library/pickle.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/pickle.html</a></p>\n\n<p>Alternatively, since pickle is really more helpful for complex data structures, see this question on SO: <a href=\"https://stackoverflow.com/questions/16131233/python-writing-an-integer-to-a-txt-file\">Python, writing an integer to a &#39;.txt&#39; file</a></p>\n\n<p>Using the example given in that link by Alex:</p>\n\n<pre><code>number = 1337\n\nf = open('filename.txt', 'w')\nf.write('%d' % number)\nf.close()\n</code></pre>\n\n<p>This would mean you'd retrieve the value every time the program starts and save it on exit. </p>\n"}, {"tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": 1, "last_activity_date": 1421881062, "creation_date": 1421881062, "answer_id": 28078424, "question_id": 28078300, "link": "https://stackoverflow.com/questions/28078300/how-to-change-the-value-of-a-local-variable-python-each-time-the-code-loops/28078424#28078424", "title": "How to change the value of a local variable (python) each time the code loops?", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/pickle.html\" rel=\"nofollow\">pickle</a> or you can save your data in to a .txt file;</p>\n\n<pre><code>#codes\n....\nwith open(\"my_database.txt\",\"a+\") as f:\n    f.write(str(bank))\n</code></pre>\n\n<p>So you could keep your <code>bank</code> data in a file. As you see we open the file in <code>a+</code> mode which is not overwriting your file.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4480288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b5fa68eae07dbb2ea224bf53cb10f2?s=128&d=identicon&r=PG&f=1", "display_name": "oreo666", "link": "https://stackoverflow.com/users/4480288/oreo666"}, "edited": false, "score": 0, "creation_date": 1421948763, "post_id": 28078545, "comment_id": 44566531, "body": "@Micheal Wallace Thanks, this worked perfectly :) I moved bank so it became a global variable, and put bank within the def ATM brackets and it works. Anyone know what the words entered into the brackets are called/what the purpose of the brackets is?"}], "tags": [], "owner": {"reputation": 14, "user_id": 4465556, "user_type": "registered", "profile_image": "https://graph.facebook.com/537575281/picture?type=large", "display_name": "Michael Wallace", "link": "https://stackoverflow.com/users/4465556/michael-wallace"}, "is_accepted": true, "score": -1, "last_activity_date": 1421881545, "creation_date": 1421881545, "answer_id": 28078545, "question_id": 28078300, "link": "https://stackoverflow.com/questions/28078300/how-to-change-the-value-of-a-local-variable-python-each-time-the-code-loops/28078545#28078545", "title": "How to change the value of a local variable (python) each time the code loops?", "body": "<p>You have two main options, make a main loop for your program instead of calling the same function, or you can pass arguments.  It looks like you're new to programming, so I will explain them a bit for you:</p>\n\n<p>While loops are basically blocks of code that will repeat over and over, until a certain condition is finished.  They look like this:</p>\n\n<pre><code>exit = False\nwhile exit != True:\n  print \"Hello!\"\n  exit = True\n</code></pre>\n\n<p>This loop in specific will only run once, since we set exit to True in the first iteration.  However, if we took that line away, it would run forever until the program explodes or we close it out manually.  </p>\n\n<p>So one solution could be something like this:</p>\n\n<pre><code>def ATM():\n  exit = False\n  while exit != True:\n    normal logic you are doing\n    if op = 'N':\n      exit = True\n  sys.exit()\n</code></pre>\n\n<p>Another solution would be to pass an argument to ATM().  Passing arguments is basically a way to set up a variable for a function before it runs, which gives you the power to set things in outside functions.  For instance:</p>\n\n<pre><code>def foo():\n    my_var = \"test\"\n    bar(\"test\")\ndef bar(another_var)\n  print another_var\n</code></pre>\n\n<p>This will print \"test\", even though the variable was defined in a function separate from the function which calls print.  We're essentially passing our my_var variable to the bar() function, which sets it up for use for us.  So you can do something like:</p>\n\n<pre><code>my_var = 123\ndef ATM(some_var):\n  do stuff\n  if exit == False:\n    ATM(some_var)\n  else:\n    sys.exit()\n</code></pre>\n\n<p>Play with it first and let me know if you have any questions after.</p>\n"}], "owner": {"reputation": 1, "user_id": 4480288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b5fa68eae07dbb2ea224bf53cb10f2?s=128&d=identicon&r=PG&f=1", "display_name": "oreo666", "link": "https://stackoverflow.com/users/4480288/oreo666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 28078545, "answer_count": 3, "score": -1, "last_activity_date": 1421882351, "creation_date": 1421880598, "last_edit_date": 1421882351, "question_id": 28078300, "link": "https://stackoverflow.com/questions/28078300/how-to-change-the-value-of-a-local-variable-python-each-time-the-code-loops", "title": "How to change the value of a local variable (python) each time the code loops?", "body": "<p>I have to create an ATM style program wherein the code looks something like this:</p>\n\n<pre><code>import sys\ndef ATM():\n    bank = 0\n    coins = int (input (\"Enter coins: \"))\n    bank = coins+bank\n    o = input(\"would you like to take out 20p? Y or N\")\n    if o == \"Y\":\n        bank = bank - 20\n    else:\n        print (\"your balance is {0}\".format(bank))\n    op = input (\"would you like to enter more coins? Y or N\")\n    if op == \"Y\":\n        ATM()\n    else:\n        print (\"goodbye\")\n        sys.exit()\n    ATM()\n</code></pre>\n\n<p>Is there a way to make the local variable bank keep it's value from the end of the program? what would I have to switch bank = 0 for?\nEDIT: Found a solution, thank you all who offered some suggestions</p>\n"}, {"tags": ["python", "tkinter", "syntax-error", "python-imaging-library"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1421880671, "post_id": 28078276, "comment_id": 44535499, "body": "your Image.open :  If the mode argument is given, it must be \u201cr\u201d."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3971381"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1421880796, "post_id": 28078276, "comment_id": 44535543, "body": "@KevinDTimm That is not what is causing this error. Before it even gets to reading the image file. It gives me ht error above."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1421880887, "post_id": 28078276, "comment_id": 44535577, "body": "Correct but it will be your next problem"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1421884091, "post_id": 28078276, "comment_id": 44536776, "body": "This a good illustration why global imports are bad."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3971381"}, "edited": false, "score": 0, "creation_date": 1421880687, "post_id": 28078296, "comment_id": 44535505, "body": "Is there a way to prevent it from doing this.. And that is odd because I have made other GUI&#39;s using TKitner and PIL and I did not get such problem with the PIL Image.open()"}, {"owner": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "edited": false, "score": 0, "creation_date": 1421880751, "post_id": 28078296, "comment_id": 44535525, "body": "I&#39;d just replace <code>from PIL import Image</code> with <code>import PIL.Image</code> and use <code>PIL.Image.Image</code>. Edit: <code>Image.Image</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3971381"}, "edited": false, "score": 0, "creation_date": 1421880873, "post_id": 28078296, "comment_id": 44535572, "body": "I did and I got the following error: <code>AttributeError: &#39;module&#39; object has no attribute &#39;Image&#39;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3971381"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421881078, "post_id": 28078296, "comment_id": 44535673, "body": "@PadraicCunningham Can you write that as a answer because it worked like a charm :)"}], "tags": [], "owner": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "is_accepted": false, "score": 2, "last_activity_date": 1421880998, "last_edit_date": 1421880998, "creation_date": 1421880577, "answer_id": 28078296, "question_id": 28078276, "link": "https://stackoverflow.com/questions/28078276/pil-assistance-python/28078296#28078296", "title": "PIL assistance Python", "body": "<p><code>Image</code> from <code>Tkinter</code> replaces the same from <code>PIL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1421881263, "creation_date": 1421881263, "answer_id": 28078477, "question_id": 28078276, "link": "https://stackoverflow.com/questions/28078276/pil-assistance-python/28078477#28078477", "title": "PIL assistance Python", "body": "<p>You should really avoid <code>from PIL Tkinter import *</code> for obvious reasons but if you must then you can use   <code>from PIL import IMAGE as img</code> to differentiate  from the <code>Tkinter Image</code></p>\n"}, {"tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421882473, "creation_date": 1421882473, "answer_id": 28078726, "question_id": 28078276, "link": "https://stackoverflow.com/questions/28078276/pil-assistance-python/28078726#28078726", "title": "PIL assistance Python", "body": "<p>Use <code>ImageTk</code> instead:</p>\n\n<pre><code>from PIL import ImageTk # add to imports\n\n# later on when loading selected image\n\nphoto = ImageTk.PhotoImage(file = filePath)\nsize = photo.width(), photo.height()\nprint(size)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3971381"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 28078477, "answer_count": 3, "score": 1, "last_activity_date": 1421882473, "creation_date": 1421880447, "question_id": 28078276, "link": "https://stackoverflow.com/questions/28078276/pil-assistance-python", "title": "PIL assistance Python", "body": "<p>I am working on a simple program that lets the user re size a image. But I have come into a problem. When I try to open the image using <code>Image.open()</code> I get the following error:</p>\n\n<p><code>AttributeError: class Image has no attribute 'open'</code></p>\n\n<p>I have researched this and it is from assigning something to <code>Image</code> like making it into a variable. But I can not see in my code that I have done anything that assigns something to <code>Image</code></p>\n\n<p>Here is my code:</p>\n\n<pre><code>from PIL import Image\nfrom Tkinter import *\nimport tkFileDialog\nimport ttk\n\nclass Application(Frame):\n    def __init__(self, parent):\n        Frame.__init__(self,parent)\n        self.pack(fill=BOTH)\n\n        self.create_widgets()\n\n   def create_widgets(self):\n        self.tfr = Frame(self)\n        self.tfr.pack(side=TOP)\n\n    self.title = Label(self.tfr, font=(\"Arial\", 20), text=\"Image Resizer\")\n    self.title.pack(side=TOP, fill=X, padx=40)\n\n    self.spacer = Frame(self.tfr, bg=\"black\")\n    self.spacer.pack(side=TOP, fill=X)\n\n    self.mfr = Frame(self)\n    self.mfr.pack(side=TOP)\n\n    self.brButton = ttk.Button(self.mfr, text=\"Browse\", command=self.browse)\n    self.brButton.pack(side=LEFT, padx=(0, 2), pady=2)\n\n    self.diField = Label(self.mfr, text=\"File Path...\", relief=SOLID, bd=1, width=25, anchor=W)\n    self.diField.pack(side=LEFT)\n\n    self.spacer2 = Frame(self, bg=\"black\")\n    self.spacer2.pack(side=TOP, fill=X)\n\n    self.bfr = Frame(self)\n    self.bfr.pack(side=TOP)\n\n    self.rButton = ttk.Button(self.bfr, text=\"Resize\", width=41, command=self.resize)\n    self.rButton.pack(side=TOP, pady=2)\n\ndef browse(self):\n    supportedFiles = [(\"PNG\", \"*.png\"), (\"JPEG\", \"*.jpg,*.jpeg,*.jpe,*.jfif\"), (\"GIF\", \"*.gif\")]\n\n    filePath = tkFileDialog.askopenfile(filetypes=supportedFiles, defaultextension=\".png\", mode=\"rb\")\n\n    if filePath != None:\n        photo = Image.open(filePath, \"rb\")\n        size = photo.size\n        print(size)\n    else:\n        pass\n\ndef resize(self):\n    print(\"Resize\")\n\nroot = Tk()\nroot.title(\"Image Resizer\")\nroot.resizable(0,0)\n\napp = Application(root)\n\nroot.mainloop()\n</code></pre>\n\n<p>Can anyone shed light on why I am getting this error. Any help is greatly appreciated..</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver", "selenium-ide"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4476068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e26389a60ed54245fe784d433588651c?s=128&d=identicon&r=PG&f=1", "display_name": "edszr", "link": "https://stackoverflow.com/users/4476068/edszr"}, "edited": false, "score": 0, "creation_date": 1421969288, "post_id": 28079264, "comment_id": 44576660, "body": "Thanks again alecxe.  I just instantiated a new driver."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1421885558, "last_edit_date": 1495541569, "creation_date": 1421885558, "answer_id": 28079264, "question_id": 28078246, "link": "https://stackoverflow.com/questions/28078246/is-there-an-equivalent-selenium-python-webdriver-command-for-the-selenium-ide-co/28079264#28079264", "title": "Is there an equivalent selenium python webdriver command for the selenium IDE command &#39;openWindow&#39;?", "body": "<p>I am afraid there is <strong>no direct alternative</strong> in the webdriver API, no way to work with browser tabs reliably (except switching between open tabs through <a href=\"http://selenium-python.readthedocs.org/en/latest/api.html#selenium.webdriver.remote.webdriver.WebDriver.switch_to_window\" rel=\"nofollow noreferrer\"><code>switch_to.window()</code></a>). Even to open a tab, keyboard shortcuts is the only way, see:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/17547473/how-to-open-a-new-tab-using-selenium-webdriver\">How to open a new tab using Selenium WebDriver with Java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23174329/i-cant-open-the-new-tab-in-google-chrome-using-selenium\">I can&#39;t open the NEW TAB in google Chrome Using selenium</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12729265/switch-tabs-using-selenium-webdriver\">switch tabs using Selenium WebDriver with Java</a></li>\n</ul>\n\n<p>Just instantiate a new driver if you need to open a \"new window\" and use <code>driver.get()</code> to navigate to a URL.</p>\n"}], "owner": {"reputation": 63, "user_id": 4476068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e26389a60ed54245fe784d433588651c?s=128&d=identicon&r=PG&f=1", "display_name": "edszr", "link": "https://stackoverflow.com/users/4476068/edszr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 28079264, "answer_count": 1, "score": 1, "last_activity_date": 1421958359, "creation_date": 1421880291, "last_edit_date": 1421958359, "question_id": 28078246, "link": "https://stackoverflow.com/questions/28078246/is-there-an-equivalent-selenium-python-webdriver-command-for-the-selenium-ide-co", "title": "Is there an equivalent selenium python webdriver command for the selenium IDE command &#39;openWindow&#39;?", "body": "<p>We have a selenium IDE script we're converting to python webdriver.  The following command did not convert:</p>\n\n<pre><code>[openWindow | http://mywebsite.com/index.php | window1]]\n</code></pre>\n\n<p>I've searched for the equivalent webdriver command for openWindow, but I haven't found anything.  Can someone tell me what the best way is to deal with this command in webdriver?</p>\n\n<p>thanks for any help.</p>\n\n<p>Ed</p>\n"}, {"tags": ["python", "sorting", "namedtuple"], "answers": [{"comments": [{"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 2, "creation_date": 1421880400, "post_id": 28078232, "comment_id": 44535372, "body": "would it not be <code>key=restaurant_price</code> without parenthesis?"}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421880514, "post_id": 28078232, "comment_id": 44535421, "body": "When i do RC.sort(key=restaurant_price()) and then print(RC), I get an error message of: restaurant_price() missing 1 required positional argument: &#39;restaurant&#39;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421880568, "post_id": 28078232, "comment_id": 44535445, "body": "@anonymousfox, no parens on restaurant_price"}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421880722, "post_id": 28078232, "comment_id": 44535513, "body": "Ok, but how do i get it to print out just the list of restaurant names in order of least expensive dish to most expensive dish, not the list of all attributes with that restaurant?"}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421881018, "post_id": 28078232, "comment_id": 44535644, "body": "how do you do it without using for loops or if statements?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421881057, "post_id": 28078232, "comment_id": 44535663, "body": "there are no if&#39;s, what do you mean by no for loop?"}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421881107, "post_id": 28078232, "comment_id": 44535689, "body": "how do you do it without &quot;for x in&quot;?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421881397, "post_id": 28078232, "comment_id": 44535811, "body": "@anonymousfox, I cannot think of any way without using some kind of loop, is that a requirement?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421881550, "post_id": 28078232, "comment_id": 44535888, "body": "You could <code>list(zip(*sorted(RC,key=restaurant_price)))[0]</code> but I would not recommend it."}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421881729, "post_id": 28078232, "comment_id": 44535952, "body": "yeah that&#39;s a requirement, and I can&#39;t use the zip."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 4, "last_activity_date": 1421882498, "last_edit_date": 1421882498, "creation_date": 1421880253, "answer_id": 28078232, "question_id": 28078213, "link": "https://stackoverflow.com/questions/28078213/coding-in-python-with-a-namedtuple-using-sort/28078232#28078232", "title": "Coding in python with a namedtuple using sort", "body": "<p><code>sort</code> is an inplace method that operates on the original list and returns None, you can use sorted:</p>\n\n<pre><code>print(sorted(RC,key=restaurant_price)) # creates new list\n</code></pre>\n\n<p>Using sorted:</p>\n\n<pre><code>In [23]: sorted(RC,key=restaurant_price)\nOut[23]: \n[Restaurant(name='Nobu', cuisine='Japanese', phone='335-4433', dish='Natto Temaki', price=5.5),\n Restaurant(name='Thai Dishes', cuisine='Thai', phone='334-4433', dish='Mee Krob', price=12.5),\n Restaurant(name='Nonna', cuisine='Italian', phone='355-4433', dish='Stracotto', price=25.5)]\n</code></pre>\n\n<p>Or call .sort on the list:</p>\n\n<pre><code>RC.sort(key=restaurant_price) # sort original list \nprint(RC) \n</code></pre>\n\n<p>.sort:</p>\n\n<pre><code>In [20]: RC.sort(key=restaurant_price)\n\nIn [21]: RC\nOut[21]: \n[Restaurant(name='Nobu', cuisine='Japanese', phone='335-4433', dish='Natto Temaki', price=5.5),\n Restaurant(name='Thai Dishes', cuisine='Thai', phone='334-4433', dish='Mee Krob', price=12.5),\n Restaurant(name='Nonna', cuisine='Italian', phone='355-4433', dish='Stracotto', price=25.5)]\n</code></pre>\n\n<p>To just get the names:</p>\n\n<pre><code>In [24]: [x.name for x in sorted(RC,key=restaurant_price)]\nOut[24]: ['Nobu', 'Thai Dishes', 'Nonna']\n</code></pre>\n\n<p>without using an explicit for loop loop or zip:</p>\n\n<pre><code>from operator import itemgetter\nprint(list(map(itemgetter(0),sorted(RC,key=restaurant_price)))\n['Nobu', 'Thai Dishes', 'Nonna']\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421882498, "creation_date": 1421880152, "question_id": 28078213, "link": "https://stackoverflow.com/questions/28078213/coding-in-python-with-a-namedtuple-using-sort", "title": "Coding in python with a namedtuple using sort", "body": "<p>Write a sequence of statements that prints out the list of Restaurants RC in order from least expensive to most expensive (best dish). it should use the sort(), and key=restaurant_price as an argument to sort()</p>\n\n<p>Given this code:</p>\n\n<pre><code>from collections import namedtuple \nRestaurant = namedtuple('Restaurant', 'name cuisine phone dish price')\nRC = [\n    Restaurant(\"Thai Dishes\", \"Thai\", \"334-4433\", \"Mee Krob\", 12.50),\n    Restaurant(\"Nobu\", \"Japanese\", \"335-4433\", \"Natto Temaki\", 5.50),\n    Restaurant(\"Nonna\", \"Italian\", \"355-4433\", \"Stracotto\", 25.50)]\n\ndef restaurant_price (restaurant:Restaurant)-&gt; float:\n    return restaurant.price\n</code></pre>\n\n<p>I wrote:</p>\n\n<pre><code>print(sort(RC,key=restaurant_price()))\n</code></pre>\n\n<p>My code gets an error statement of \"name 'sort' is not defined\"</p>\n"}, {"tags": ["python", "cursor", "odbc", "hive"], "answers": [{"comments": [{"owner": {"reputation": 4516, "user_id": 1350796, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/11dad08c4a88c491ccfb6ae3d91fdcb4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1350796/andrew"}, "edited": false, "score": 0, "creation_date": 1422155683, "post_id": 28130185, "comment_id": 44638111, "body": "Not sure what you mean by the first statement, but the second two options did not work."}], "tags": [], "owner": {"reputation": 392, "user_id": 1179861, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ce7c85023090e6054b9a5e3a32e04519?s=128&d=identicon&r=PG", "display_name": "Eitan H.S.", "link": "https://stackoverflow.com/users/1179861/eitan-h-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1422133105, "last_edit_date": 1592644375, "creation_date": 1422133105, "answer_id": 28130185, "question_id": 28078174, "link": "https://stackoverflow.com/questions/28078174/python-odbc-cursor-keeping-persistent-state-after-executing-a-query/28130185#28130185", "title": "Python odbc cursor: keeping persistent state after executing a query", "body": "<p>I suggests that you try few things:</p>\n<ol>\n<li><p>I think that in most cases, if not all of them, you can specify the database that you want to work with using the connection string.</p>\n</li>\n<li><p>I see in <a href=\"https://code.google.com/p/pyodbc/wiki/Cursor#execute\" rel=\"nofollow noreferrer\">the documentation</a> that the 'execute' command returns the cursor itself, even though I would try:</p>\n</li>\n</ol>\n<blockquote>\n<p>cursor.execute(&quot;USE database_1&quot;).execute(&quot;SELECT * FROM table_1&quot;)</p>\n</blockquote>\n<p>(Just in case that the docmentation is wrong)</p>\n<ol start=\"3\">\n<li>This may actually work:</li>\n</ol>\n<blockquote>\n<p>cursor.execute(&quot;USE database_1&quot;)</p>\n<p>cursor.commit()</p>\n<p>cursor.execute(&quot;SELECT * FROM table_1&quot;)</p>\n</blockquote>\n<p>Plese update if any if this worked.</p>\n"}, {"tags": [], "owner": {"reputation": 4692, "user_id": 4289293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d437940933d37d70f44e4091659c39?s=128&d=identicon&r=PG&f=1", "display_name": "rchang", "link": "https://stackoverflow.com/users/4289293/rchang"}, "is_accepted": false, "score": 1, "last_activity_date": 1422327897, "creation_date": 1422327897, "answer_id": 28162548, "question_id": 28078174, "link": "https://stackoverflow.com/questions/28078174/python-odbc-cursor-keeping-persistent-state-after-executing-a-query/28162548#28162548", "title": "Python odbc cursor: keeping persistent state after executing a query", "body": "<p>From what I can tell of <code>pyodbc</code> documentation there doesn't appear to be specific support for Hive.  If you are willing to entertain a different library, <a href=\"https://github.com/BradRuderman/pyhs2\" rel=\"nofollow\">pyhs2</a> specifically supports connections with HiveServer2 (Hive 0.11 or newer, I think).  It can be installed with pip (<code>pip install pyhs2</code>), but at least on my Mint Linux 17 box I also had to install <code>libpython-dev</code> and <code>libsasl2-dev</code> first.</p>\n\n<p>I mocked up a trivial approximation of your scenario in Hive (<code>table_1</code> inside <code>database_1</code> but not <code>default</code>):</p>\n\n<pre><code>hive&gt; use default;\nOK\nTime taken: 0.324 seconds\nhive&gt; select * from table_1;\nFAILED: SemanticException [Error 10001]: Line 1:14 Table not found 'table_1'\nhive&gt; use database_1;\nOK\nTime taken: 0.333 seconds\nhive&gt; describe table_1;\nOK\ncontent                     string                              \nTime taken: 0.777 seconds, Fetched: 1 row(s)\nhive&gt; select * from table_1;\nOK\nthis\nis\nsome\nsample\ndata\nTime taken: 0.23 seconds, Fetched: 5 row(s)\n</code></pre>\n\n<p>So then this is a rudimentary script leveraging <code>pyhs2</code> to connect to Hive:</p>\n\n<pre><code># Python 2.7\nimport pyhs2\nfrom pyhs2.error import Pyhs2Exception\n\nhql = \"SELECT * FROM table_1\"\nwith pyhs2.connect(\n  host='localhost', port=10000, authMechanism=\"PLAIN\", user=\"root\",\n  database=\"default\"  # Of course it's possible just to specify database_1 here\n) as db:\n  with db.cursor() as cursor:\n\n    try:\n      print \"Trying default database\"\n      cursor.execute(hql)\n      for row in cursor.fetch(): print row\n    except Pyhs2Exception as error:\n      print(str(error))\n\n    print \"Switching databases to database_1\"\n    cursor.execute(\"use database_1\")\n    cursor.execute(hql)\n    for row in cursor.fetch(): print row\n</code></pre>\n\n<p>This is the resulting output:</p>\n\n<pre><code>Trying default database\n\"Error while compiling statement: FAILED: SemanticException [Error 10001]: Line 1:14 Table not found 'table_1'\"\nSwitching databases to database_1\n['this']\n['is']\n['some']\n['sample']\n['data']\n</code></pre>\n\n<p>As I noted in a comment line of the code, it is entirely possible to have just initiated the connection directly with <code>database_1</code> instead of <code>default</code>, but I wanted to try to emulate what you were doing with the code you posted in the question (and demonstrate the capability to switch databases after the connection has been initiated).</p>\n\n<p>Anyway, hopefully food for thought if you're willing to entertain a non-<code>pyodbc</code> solution.</p>\n"}, {"tags": [], "owner": {"reputation": 4516, "user_id": 1350796, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/11dad08c4a88c491ccfb6ae3d91fdcb4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1350796/andrew"}, "is_accepted": true, "score": 1, "last_activity_date": 1426724480, "creation_date": 1426724480, "answer_id": 29135112, "question_id": 28078174, "link": "https://stackoverflow.com/questions/28078174/python-odbc-cursor-keeping-persistent-state-after-executing-a-query/29135112#29135112", "title": "Python odbc cursor: keeping persistent state after executing a query", "body": "<p>I learned that you can set things like the number of reducers in the ODBC connection string, e.g. </p>\n\n<pre><code>string = 'dsn=hive/driver/path;mapred.reduce.tasks=100;....'\nconnection = pyodbc.connect(string, autocommit=True)\n</code></pre>\n\n<p>This lets you use the specific setting you want in the connection; this doesn't solve the issue of switching database but it solves the other situations where you introduce settings into Hive, which was the bulk of my question.</p>\n"}], "owner": {"reputation": 4516, "user_id": 1350796, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/11dad08c4a88c491ccfb6ae3d91fdcb4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1350796/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "accepted_answer_id": 29135112, "answer_count": 3, "score": 1, "last_activity_date": 1426724480, "creation_date": 1421879991, "last_edit_date": 1422061642, "question_id": 28078174, "link": "https://stackoverflow.com/questions/28078174/python-odbc-cursor-keeping-persistent-state-after-executing-a-query", "title": "Python odbc cursor: keeping persistent state after executing a query", "body": "<p>Lets say we have table_1 living in database_1.</p>\n\n<pre><code>import pyodbc\nconnection =  pyodbc.connect(dsn='hive', autocommit=True)\ncursor = connection.cursor()\ncursor.execute(\"USE database_1\")\ncursor.execute(\"SELECT * FROM table_1\")\n</code></pre>\n\n<p>This will give a table not found error, because we have reset the database we were using back to the default when the cursor executes the next query. Is there a way to keep consistent state/bundle multiple queries into an execute statement in order to avoid this? I'm particularly interested in being able to set the number of mappers/reducers and be able to keep this state when I execute my next query. I know an alternative is just using Python to make the shell connect to Hive and execute an hql file but I'd rather not do that.</p>\n"}, {"tags": ["python", "django", "typeerror", "python-docx"], "comments": [{"owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "edited": false, "score": 0, "creation_date": 1421880495, "post_id": 28078163, "comment_id": 44535413, "body": "Where is get_risk_issue_severity_display()  defined?"}, {"owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "reply_to_user": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "edited": false, "score": 0, "creation_date": 1421880569, "post_id": 28078163, "comment_id": 44535446, "body": "so i was going off this other post, i thought it was defined in django. <a href=\"http://stackoverflow.com/questions/4274243/django-print-choices-value\" title=\"django print choices value\">stackoverflow.com/questions/4274243/django-print-choices-val&zwnj;&#8203;ue</a>"}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421880988, "post_id": 28078163, "comment_id": 44535629, "body": "<a href=\"https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/dev/ref/models/instances/&hellip;</a> This document is from the question in your comment.  it should be Model.get_FOO_display() where FOO is fieldname your field name seems wrong."}, {"owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "edited": false, "score": 0, "creation_date": 1421881145, "post_id": 28078163, "comment_id": 44535703, "body": "Did you miss &#39;objects&#39;? activitylist.objects.values_list(&#39;activityStatus&#39;, flat=True)"}, {"owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "edited": false, "score": 0, "creation_date": 1421883888, "post_id": 28078163, "comment_id": 44536705, "body": "activitylist is a unicode object."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "edited": false, "score": 0, "creation_date": 1421882342, "post_id": 28078505, "comment_id": 44536166, "body": "that makes sense, however I am still receiving this error: &#39;unicode&#39; object has no attribute &#39;get_projectRiskIssueSeverity_display&#39;"}, {"owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "edited": false, "score": 0, "creation_date": 1421882415, "post_id": 28078505, "comment_id": 44536196, "body": "astatus is a unicode object from my valuelistqueryset. If i just put that into the paragraph text, it comes out at &quot;M&quot; and not &quot;Medium&quot;"}, {"owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "edited": false, "score": 0, "creation_date": 1421884234, "post_id": 28078505, "comment_id": 44536818, "body": "also, when I add objects to the activity list, i get the error: &#39;QuerySet&#39; object has no attribute &#39;objects&#39;  I know this is correct because i implemented that later with formatted_dates = [date.strftime(&quot;%B %d,%Y&quot;) for date in activitylist.values_list(&#39;activityPlannedStartDate&#39;, flat=True)] \tcell.paragraphs[0].text = &#39;, &#39;.join(formatted_dates) and it worked."}], "tags": [], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421882194, "last_edit_date": 1421882194, "creation_date": 1421881351, "answer_id": 28078505, "question_id": 28078163, "link": "https://stackoverflow.com/questions/28078163/django-choices-reference-in-view/28078505#28078505", "title": "Django Choices Reference in View", "body": "<p>Model.get_FOO_display() in the documentation says should have FOO as the field name as FOO in your case field name is projectRiskIssueSeverity not risk_issue_severity.</p>\n\n<p>and objects seems to be missing from the activitylist.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display</a></p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values_list\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values_list</a></p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 4015036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def47408de3d8040df7e8bbf52600b9f?s=128&d=identicon&r=PG&f=1", "display_name": "Leticia", "link": "https://stackoverflow.com/users/4015036/leticia"}, "is_accepted": true, "score": 1, "last_activity_date": 1421922533, "creation_date": 1421922533, "answer_id": 28086488, "question_id": 28078163, "link": "https://stackoverflow.com/questions/28078163/django-choices-reference-in-view/28086488#28086488", "title": "Django Choices Reference in View", "body": "<p>You can't use get_FOO_display() with a string value as you are trying to do. You would need an instance of the model for it to work. As you have it, what your code is translating to is something like:</p>\n\n<pre><code>'L'.get_projectRiskIssueSeverity_display()\n</code></pre>\n\n<p>That's where the \"no attribute\" error comes from.</p>\n\n<p>If you just want a list of the possible values you would be better off using <code>RiskIssue.RISK_ISSUE_SEVERITY</code> directly from the view and transforming it to a list or whatever you need.</p>\n"}], "owner": {"reputation": 53, "user_id": 3850876, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a58d4d32665d1f4dd22944d4c6e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Lehrkind", "link": "https://stackoverflow.com/users/3850876/john-lehrkind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "accepted_answer_id": 28086488, "answer_count": 2, "score": 2, "last_activity_date": 1421922533, "creation_date": 1421879955, "question_id": 28078163, "link": "https://stackoverflow.com/questions/28078163/django-choices-reference-in-view", "title": "Django Choices Reference in View", "body": "<p>Model.py:</p>\n\n<pre><code>class RiskIssue(models.Model):\nRISK_ISSUE_SEVERITY = (\n    ('L', 'Low'),\n    ('M', 'Medium'),\n    ('H', 'High'),\n)\nprojectRiskIssueSeverity = models.CharField(\"Risk/Issue Severity\", max_length=1, choices=RISK_ISSUE_SEVERITY, default='L')\n</code></pre>\n\n<p>View.py code:</p>\n\n<pre><code>cell = table.rows[2].cells[0]\nformatted_status = [astatus.get_risk_issue_severity_display() for astatus in activitylist.values_list('activityStatus', flat=True)]\ncell.paragraphs[0].text = ', '.join(formatted_status)\n</code></pre>\n\n<p>I am getting the error code: 'unicode' object has no attribute 'get_risk_issue_severity_display'</p>\n\n<p>What am I doing wrong? I have tried everything except the correct answer. \nVery small TypeError problem here I assume</p>\n"}, {"tags": ["python", "json", "serialization", "pandas", "concat"], "answers": [{"comments": [{"owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421913315, "post_id": 28083164, "comment_id": 44545272, "body": "Thanks for your answer @Skorp.  From my goals and objectives, you can see that I&#39;m trying to &quot;merge the json streams created from invoking <code>to_json()</code> into an aggregated json stream&quot;  I was going to put that that simply using <code>replace(&quot;\\\\&quot;, &quot;&quot;)</code> didn&#39;t accomplish what I was looking for, but I thought that was clear from my goals and objectives.    Thanks for the response!"}, {"owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "reply_to_user": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421913883, "post_id": 28083164, "comment_id": 44545497, "body": "have you considered merging the dataframes and then &quot;to_json&quot; that frame? you could use pd.merge(masterdf, panel[item], how=&quot;outer&quot;).  Just a thought, I haven&#39;t worked with panels so not sure if the json representation would be accurate.  You could also try  pd.concat([masterdf, panel[item]], axis = 1, keys =[list(masterdf.columns, item) and then make that into a json"}, {"owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "reply_to_user": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421914308, "post_id": 28083164, "comment_id": 44545685, "body": "pd.concat([masterdf, panel[item]], axis = 1, keys =[list(masterdf.columns.values), item])"}, {"owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1422122258, "post_id": 28083164, "comment_id": 44629818, "body": "FYI @Skorp, <code>json_string.replace(&quot;\\\\&quot;, &quot;&quot;)</code> does not result in a valid <code>json</code> string, FYI.  If you remove this answer, and then make your final <code>loads(df.to_json())</code> your answer, I&#39;ll give you an upvote because it&#39;s the second fastest solution to the problem."}], "tags": [], "owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1421910973, "creation_date": 1421910973, "answer_id": 28083164, "question_id": 28078118, "link": "https://stackoverflow.com/questions/28078118/merge-many-json-strings-with-python-pandas-inputs/28083164#28083164", "title": "Merge Many json strings with python pandas inputs", "body": "<p>if all you need to do is get rid of \"\\\\\" you could use<br>\n    <code>.str.strip(\"\\\\\") #or</code> </p>\n\n<pre><code>`.str.replace(\"\\\\\",\"\") `\n</code></pre>\n\n<p>you should read up on string methods, vectorized string methods and regular expressions.  Here's pandas specific info link:</p>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/text.html#text-string-methods\" rel=\"nofollow\">http://pandas.pydata.org/pandas-docs/stable/text.html#text-string-methods</a></p>\n"}, {"comments": [{"owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421934168, "post_id": 28084120, "comment_id": 44556970, "body": "please see the <b>NOTE</b> Section &quot;I&#39;m doing this with more complicated objects, but the overall logic of looping over keys and generating json data for each key is the same,&quot; so the <code>(key, frame) &#47; </code>(key, series)` / <code>(key, frame)</code> is part of the structure I&#39;m working with (and therefore can&#39;t just <code>pandas.concat</code> everything"}, {"owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "reply_to_user": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421950646, "post_id": 28084120, "comment_id": 44567609, "body": "Have you tried using json.loads(tmp) instead of eval?"}], "tags": [], "owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1421915123, "creation_date": 1421915123, "answer_id": 28084120, "question_id": 28078118, "link": "https://stackoverflow.com/questions/28078118/merge-many-json-strings-with-python-pandas-inputs/28084120#28084120", "title": "Merge Many json strings with python pandas inputs", "body": "<p>Have you considered merging the dataframes and then \"to_json\" that frame? you could use pd.merge(masterdf, panel[item], how=\"outer\"). Just a thought, I haven't worked with panels so not sure if the json representation would be accurate. You could also try using this in your loop.  You should also consider using the iteritems() method.</p>\n\n<pre><code>masterdf = pd.concat([masterdf, panel[item]], axis = 1, keys =[list(masterdf.columns.values), item]) and then make that into a json.  \n</code></pre>\n\n<p>You may be even able to do something sexier like:</p>\n\n<pre><code>pd.concat([lamda x: x for panel.items], axis = 1, keys = list(panel.keys())).to_json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "is_accepted": true, "score": 1, "last_activity_date": 1422124721, "creation_date": 1422124721, "answer_id": 28128890, "question_id": 28078118, "link": "https://stackoverflow.com/questions/28078118/merge-many-json-strings-with-python-pandas-inputs/28128890#28128890", "title": "Merge Many json strings with python pandas inputs", "body": "<p>In the end, the fastest way was to write a simple string <code>concat</code>-er.  Here were the two best solutions, (one provided by @Skorp)) and their respective <code>%timeit</code> times in graphical form</p>\n\n<h3>Method 1. String-Merge</h3>\n\n<pre><code>def panel_to_json_string(panel):\n    def __merge_stream(key, stream):\n        return '\"' + key + '\"' + ': ' + stream + ', '\n\n    try:\n        stream = '{ \"__type__\": \"panel\", '\n        for item in panel.items:\n            stream += __merge_stream(item, panel.loc[item, :, :].to_json()) \n\n        # take out extra last comma\n        stream = stream[:-2] \n\n        # add the final paren\n        stream += '}'\n    except:\n        logging.exception('Panel Encoding did not work')\nreturn stream\n</code></pre>\n\n<h3>Method 2. Loads-Dumps</h3>\n\n<pre><code>def panel_to_json_loads(panel):\n    try:\n        d = {'__type__' : 'panel'}\n\n        for item in panel.items:\n            d[item] = json.loads(panel.loc[item ,: , :].to_json())\n        return json.dumps(d)\n    except:\n        logging.exception('Panel Encoding did not work')\n</code></pre>\n\n<h3>Problem Setup</h3>\n\n<pre><code>import timeit\nimport pandas\nimport numpy\n\nsetup = (\"import strat_check.io as sio; import pandas; import numpy;\" \n     \"panel = pandas.Panel(numpy.random.randn(5, {0}, 4), \"\n     \"items = ['a', 'b', 'c', 'd', 'e'], \" \n     \"major_axis = pandas.DatetimeIndex(start = '01/01/1990',\"\n                                        \"freq = 's', \"\n                                        \"periods = {0}), \"\n                                        \"minor_axis = numpy.arange(4))\")\n\nvals = [10, 100, 1000, 10000, 100000]\n\nd = {'string-merge': [], \n     'loads-dumps': []\n     }\n\nfor n in vals:\n    number = 10\n\nd['string-merge'].append(\n    timeit.timeit(stmt = 'panel_to_json_string(panel)', \n                  setup = setup.format(n), \n                  number = number)\n)\n\nd['loads-dumps'].append(\n    timeit.timeit(stmt = 'sio.panel_to_json_loads(panel)', \n                  setup = setup.format(n), \n                  number = number)\n)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/37Q8r.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 1, "accepted_answer_id": 28128890, "answer_count": 3, "score": 2, "last_activity_date": 1422124721, "creation_date": 1421879735, "question_id": 28078118, "link": "https://stackoverflow.com/questions/28078118/merge-many-json-strings-with-python-pandas-inputs", "title": "Merge Many json strings with python pandas inputs", "body": "<h2>Summary</h2>\n\n<p>I have created data objects that are comprised of (among other things), of <code>pandas</code> objects like <code>DataFrame</code>s and <code>Panel</code>s.  I'm looking to serialize these objects into <code>json</code>, and speed is a primary consideration.</p>\n\n<h2>Example using a <code>pandas.Panel</code></h2>\n\n<p>Say for instance I have a panel like so:</p>\n\n<pre><code>In [54]: panel = pandas.Panel( \n             numpy.random.randn(5, 100, 10), \n             items = ['a', 'b', 'c', 'd', 'e'], \n             major_axis = pandas.DatetimeIndex(start = '01/01/2000', \n                                               freq = 'b', \n                                               periods = 100\n             ), \n             minor_axis = ['z', 'y', 'x', 'v', 'u', 't', 's', 'r', 'q', 'o']\n          )\nIn [64]: panel\nOut[64]: \n&lt;class 'pandas.core.panel.Panel'&gt;\nDimensions: 5 (items) x 100 (major_axis) x 10 (minor_axis)\nItems axis: a to e\nMajor_axis axis: 2000-01-03 00:00:00 to 2000-05-19 00:00:00\nMinor_axis axis: z to o\n</code></pre>\n\n<p>And I'd like to turn this <code>panel</code> into flattened <code>json</code> </p>\n\n<p><strong>NOTE:</strong> I'm doing this with more complicated objects, but the overall logic of looping over keys and generating <code>json</code> data for each key is the same</p>\n\n<p>I can write a quick and dirty <code>panel_to_json()</code> function like so:</p>\n\n<pre><code>def panel_to_json(panel):\n\n    d = {'__type__' : 'panel'}\n    for item in panel.items:\n        tmp = panel.loc[item ,: , :].to_json()\n        d[item] = eval(tmp)\n    return json.dumps(d)\n\nIn [58]: tmp = panel_to_json(panel)\nIn [59]: tmp[:100]\nOut[59]: '{\"a\": {\"q\": {\"948931200000\": -0.5586319118, \"951955200000\": 0.6820748888, \"949363200000\": -0.0153867'\n</code></pre>\n\n<p>Which gets me the correct result, the problem is the <code>eval</code> usage is <strong>very</strong> costly. For example, if I remove the <code>eval</code> and just deal with the smattering of <code>\\\\</code> that result from <code>panel_no_eval_to_json</code> function here:</p>\n\n<pre><code>def panel_no_eval_to_json(panel):\n    d = {'__type__' : 'panel'}\n    for item in panel.items:\n        d[item] = panel.loc[item ,: , :].to_json()\n    return json.dumps(d)\n\nIn [60]: tmp = panel_no_eval_to_json(panel)\n\nIn [61]: tmp[:100]\nOut[61]: '{\"a\": \"{\\\\\"z\\\\\":{\\\\\"946857600000\\\\\":1.0233515965,\\\\\"946944000000\\\\\":-1.1333560575,\\\\\"947030400000\\\\\":-0.0072'\n</code></pre>\n\n<p>The difference in speed is substantial, checkout their <code>%timeit</code> values!!:</p>\n\n<pre><code>In [62]: %timeit panel_no_eval_to_json(panel)\n100 loops, best of 3: 3.55 ms per loop\n\nIn [63]: %timeit panel_to_json(panel)\n10 loops, best of 3: 41.1 ms per loop\n</code></pre>\n\n<h2>End Goal</h2>\n\n<p>So my final goal would be to loop through the <code>Panel</code> (or my object, that has different keys / attributes, many of which are <code>Panel</code>'s and <code>DataFrame</code>s), and merge the <code>json</code> streams created from invoking <code>to_json()</code> into an aggregated <code>json</code> stream (which would actually be the flattening data representation of my data object) just as is performed by using the <code>panel_to_json</code> function above (the one <strong>with</strong> <code>eval</code>).  </p>\n\n<p>My key goals are:  </p>\n\n<ol>\n<li>Leverage existing <code>pandas to_json</code> functionality </li>\n<li>Leverage speedups and existing libraries (I could write my own <code>json_stream_merger</code>, but clearly this has already been done, right?)</li>\n</ol>\n"}, {"tags": ["python", "function", "python-3.x", "exec"], "comments": [{"owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421880010, "post_id": 28078114, "comment_id": 44535200, "body": "What you excatly want to do?"}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421880428, "post_id": 28078114, "comment_id": 44535384, "body": "Nevermind, I didn&#39;t test correctly, indeed it works in the global, but not in the local scope."}], "owner": {"reputation": 191, "user_id": 4208185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c303c1e338bd60f1e4f9bf5e9ba81c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Martin DLF", "link": "https://stackoverflow.com/users/4208185/martin-dlf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1421880030, "answer_count": 0, "score": 0, "last_activity_date": 1421881131, "creation_date": 1421879699, "last_edit_date": 1495541190, "question_id": 28078114, "link": "https://stackoverflow.com/questions/28078114/using-exec-inside-a-function-python-3", "closed_reason": "Duplicate", "title": "Using exec() inside a function Python 3", "body": "<p>I know, I know.. I shouldn't use exec() built-in function, it's not a good practice. However, I need to use it for a good reason (you can find the reason here: <a href=\"https://stackoverflow.com/questions/28073975/list-to-string-to-list-python-3\">List to String to List Python 3</a>. And you can suggest a better idea there). So, the problem is the following:</p>\n\n<pre><code>def function():\n    exec(\"l = [1, 2, 3]\")\n    for i in l:\n        print(i)\n\nfunction()\n</code></pre>\n\n<p>Raise:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"\", line 1, in\n  \n      function()   File \"\", line 3, in function\n      for i in l: NameError: name 'l' is not defined</p>\n</blockquote>\n\n<p>Note that this is a simplified version, in this example the use of exec() seems unnecessary but in the real case it's not. Any ideas? Thanks!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The answer can be found and very well discussed in <a href=\"https://stackoverflow.com/questions/15086040/behaviour-of-exec-function-in-python-2-and-python-3\">Behavior of exec function in Python 2 and Python 3</a></p>\n\n<p>A working code for the problem is the following:</p>\n\n<pre><code>def function():\n    d = locals()\n    exec(\"l = [1, 2, 3]\", globals(), d)\n    for i in d['l']:\n        print(i)\n\nfunction()\n</code></pre>\n\n<p>Thanks to  @Martijn Pieters</p>\n"}, {"tags": ["python", "python-2.7", "scrapy"], "comments": [{"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1421913174, "post_id": 28078113, "comment_id": 44545217, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20719263/write-to-a-csv-file-scrapy\" title=\"write to a csv file scrapy\">stackoverflow.com/questions/20719263/write-to-a-csv-file-scr&zwnj;&#8203;apy</a>"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 4472904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1565867802/picture?type=large", "display_name": "Nikhil Parmar", "link": "https://stackoverflow.com/users/4472904/nikhil-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1421932157, "creation_date": 1421932157, "answer_id": 28089613, "question_id": 28078113, "link": "https://stackoverflow.com/questions/28078113/scraping-site-and-creating-csv-file-with-scrapy/28089613#28089613", "title": "Scraping site and creating .csv file with Scrapy", "body": "<p>check if this works for you</p>\n\n<pre><code>import scrapy\nfrom scrapy.selector import Selector\n\nfrom megacritics.items import MegacriticsItem\n\nclass testspider(scrapy.Spider):\n    name = \"pupu\"\n    allowed_domains = [\"hltv.org\"]\n    start_urls = [\"http://www.hltv.org/?pageid=188&amp;eventid=0&amp;gameid=2\"]\n\n    def parse(self,response):\n        hxs = Selector(response)\n        sites = hxs.select('//div[@style=\"width:606px;height:22px;background-color:white\"]')\n        items = []\n        for site in sites:\n            item = MegacriticsItem()\n            item['date'] = site.select('.//div[@style=\"padding-left:5px;padding-top:5px;\"]/a/div/text()').extract()\n            # item['team1'] = site.select('.//div[@class=\"covSmallHeadline\"]/text()').extract()\n            # item['team2'] = site.select('.//div[@class=\"covSmallHeadline\"]/text()').extract()\n            # item['map'] = site.select('.//div[@class=\"covSmallHeadline\"]/text()').extract()\n            # item['event'] = site.select('.//div[@class=\"covSmallHeadline\"]/text()').extract()\n            items.append(item)\n        return items\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4480284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a535752560c7fa705ffc99c80381e2?s=128&d=identicon&r=PG", "display_name": "SHUTTEHFACE", "link": "https://stackoverflow.com/users/4480284/shuttehface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 940, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557583788, "creation_date": 1421879698, "last_edit_date": 1557583788, "question_id": 28078113, "link": "https://stackoverflow.com/questions/28078113/scraping-site-and-creating-csv-file-with-scrapy", "title": "Scraping site and creating .csv file with Scrapy", "body": "<p>I'm trying to run a spider which grabs certain pieces of information from <a href=\"http://www.hltv.org/?pageid=188&amp;eventid=0&amp;gameid=2\" rel=\"nofollow noreferrer\">http://www.hltv.org/?pageid=188&amp;eventid=0&amp;gameid=2</a> and creates a .csv file with the data. I'd like the spider to go through each date and scrape key pieces of information for each listed date: <a href=\"http://www.hltv.org/?pageid=188&amp;matchid=19029&amp;eventid=0&amp;gameid=2\" rel=\"nofollow noreferrer\">http://www.hltv.org/?pageid=188&amp;matchid=19029&amp;eventid=0&amp;gameid=2</a> </p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>import scrapy\n\nclass hltvspider(scrapy.Spider):\n    name = \"hltvspider\"\n    allowed_domains = [\"hltv.org\"]\n    start_urls = [\"http://www.hltv.org/?pageid=188&amp;eventid=0&amp;gameid=2\"]\n\n    def parse(self, response):\n        for sel in response.xpath('//ul/li'):\n            title = sel.xpath('a/text()').extract()\n            link = sel.xpath('a/@href').extract()\n            desc = sel.xpath('text()').extract()\n            print title, link, desc\n</code></pre>\n\n\n\n<p>Here is the output I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Users\\Michael\\PycharmProjects\\HLTV\\HLTV\\HLTV\\spiders\\hltv.py:5: ScrapyDeprecationWarning: HLTV.spiders.hltv.MySpider inherits from deprecated class scrapy.spider.BaseSpider, please inhe\nrit from scrapy.spider.Spider. (warning only on first subclass, there may be others)\n2015-01-21 16:20:22-0600 [scrapy] INFO: Scrapy 0.24.4 started (bot: HLTV)\n2015-01-21 16:20:22-0600 [scrapy] INFO: Optional features available: ssl, http11\n2015-01-21 16:20:22-0600 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'HLTV.spiders', 'SPIDER_MODULES': ['HLTV.spiders'], 'BOT_NAME': 'HLTV'}\n2015-01-21 16:20:22-0600 [scrapy] INFO: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState\n2015-01-21 16:20:22-0600 [scrapy] INFO: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaR\nefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats\n2015-01-21 16:20:22-0600 [scrapy] INFO: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware\n2015-01-21 16:20:22-0600 [scrapy] INFO: Enabled item pipelines:\n2015-01-21 16:20:22-0600 [hltvspider] INFO: Spider opened\n2015-01-21 16:20:22-0600 [hltvspider] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2015-01-21 16:20:22-0600 [scrapy] DEBUG: Telnet console listening on 127.0.0.1:6023\n2015-01-21 16:20:22-0600 [scrapy] DEBUG: Web service listening on 127.0.0.1:6080\n2015-01-21 16:20:23-0600 [hltvspider] DEBUG: Crawled (200) &lt;GET http://www.hltv.org/?pageid=188&amp;eventid=0&amp;gameid=2&gt; (referer: None)\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t']\n[] [] [u'\\n        ', u'\\n        ', u'\\n      ']\n[] [] [u'\\n\\t\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t']\n[] [] [u'\\n\\t\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t\\t', u'\\n\\t\\t\\t\\t']\n2015-01-21 16:20:23-0600 [hltvspider] INFO: Closing spider (finished)\n2015-01-21 16:20:23-0600 [hltvspider] INFO: Dumping Scrapy stats:\n        {'downloader/request_bytes': 241,\n         'downloader/request_count': 1,\n         'downloader/request_method_count/GET': 1,\n         'downloader/response_bytes': 13544,\n         'downloader/response_count': 1,\n         'downloader/response_status_count/200': 1,\n         'finish_reason': 'finished',\n         'finish_time': datetime.datetime(2015, 1, 21, 22, 20, 23, 432000),\n         'log_count/DEBUG': 3,\n         'log_count/INFO': 7,\n         'response_received_count': 1,\n         'scheduler/dequeued': 1,\n         'scheduler/dequeued/memory': 1,\n         'scheduler/enqueued': 1,\n         'scheduler/enqueued/memory': 1,\n         'start_time': datetime.datetime(2015, 1, 21, 22, 20, 22, 775000)}\n2015-01-21 16:20:23-0600 [hltvspider] INFO: Spider closed (finished)\n</code></pre>\n\n\n"}, {"tags": ["python", "django", "serialization", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 6970, "user_id": 1620792, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/473ae99ae56cd2ab4bd238ecb74e919b?s=128&d=identicon&r=PG", "display_name": "iankit", "link": "https://stackoverflow.com/users/1620792/iankit"}, "edited": false, "score": 0, "creation_date": 1444303886, "post_id": 28246994, "comment_id": 53852014, "body": "What do you do with ingredients_list?"}, {"owner": {"reputation": 4308, "user_id": 3466196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/680028743/picture?type=large", "display_name": "bobbyz", "link": "https://stackoverflow.com/users/3466196/bobbyz"}, "reply_to_user": {"reputation": 6970, "user_id": 1620792, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/473ae99ae56cd2ab4bd238ecb74e919b?s=128&d=identicon&r=PG", "display_name": "iankit", "link": "https://stackoverflow.com/users/1620792/iankit"}, "edited": false, "score": 0, "creation_date": 1444436256, "post_id": 28246994, "comment_id": 53918598, "body": "@iankit Whoops, I realized I had pasted in a snippet from my update() method instead. I&#39;ve fixed it to reflect the correct code. Thanks!"}, {"owner": {"reputation": 539, "user_id": 2426018, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e3aadf34a91b712af78e81a2f8735cf2?s=128&d=identicon&r=PG", "display_name": "ML.", "link": "https://stackoverflow.com/users/2426018/ml"}, "edited": false, "score": 0, "creation_date": 1470039821, "post_id": 28246994, "comment_id": 64766850, "body": "I am noticing when I try to do something similar to this, I am getting &quot;Lists are not currently supported in HTML input.&quot; on the browsable API. Any tips on how to work around this?"}, {"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1519542802, "post_id": 28246994, "comment_id": 84947526, "body": "@bobbyz would you please be so kind to share your <code>update()</code> method, too?"}], "tags": [], "owner": {"reputation": 4308, "user_id": 3466196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/680028743/picture?type=large", "display_name": "bobbyz", "link": "https://stackoverflow.com/users/3466196/bobbyz"}, "is_accepted": true, "score": 49, "last_activity_date": 1520570626, "last_edit_date": 1520570626, "creation_date": 1422665675, "answer_id": 28246994, "question_id": 28078092, "link": "https://stackoverflow.com/questions/28078092/django-rest-framework-writable-nested-serializers/28246994#28246994", "title": "Django Rest Framework writable nested serializers", "body": "<p>I figured out that ManyToMany relationships can't be established until all of the uncreated objects have been created. (See the Django Docs <a href=\"https://docs.djangoproject.com/en/1.7/topics/db/examples/many_to_many/#many-to-many-relationships\" rel=\"noreferrer\">page on many-to-many relationships</a>.)</p>\n\n<p>Here's the working code:</p>\n\n<p><strong>serializers.py</strong></p>\n\n<pre><code>class RecipeSerializer(serializers.ModelSerializer):\n    ingredients = IngredientSerializer(many=True)\n\n    class Meta:\n        model = Recipe\n\n    def create(self, validated_data):\n        ingredients_data = validated_data.pop('ingredients')\n        recipe = Recipe.objects.create(**validated_data)\n\n        for ingredient in ingredients_data:\n            ingredient, created = Ingredient.objects.get_or_create(name=ingredient['name'])\n            recipe.ingredients.add(ingredient)\n        return recipe\n</code></pre>\n\n<h2>UPDATE:</h2>\n\n<p>Per request of @StevePiercy, below is my <code>update()</code> code. <strong>However</strong>, I haven't looked at this in years and have no idea whatsoever if it is correct or good. I haven't been working in Python or Django for some time now, so take this with a grain of salt:</p>\n\n<pre><code>def update(self, instance, validated_data):\n    ingredients_data = validated_data.pop('ingredients')\n\n    instance.name = validated_data.get('name', instance.name)\n    instance.description = validated_data.get('description', instance.description)\n    instance.directions = validated_data.get('directions', instance.directions)\n    instance.photo = validated_data.get('photo', instance.photo)\n\n    ingredients_list = []\n\n    for ingredient in ingredients_data:\n        ingredient, created = Ingredient.objects.get_or_create(name=ingredient[\"name\"])\n        ingredients_list.append(ingredient)\n\n    instance.ingredients = ingredients_list\n    instance.save()\n    return instance\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9166, "user_id": 686016, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/YGjz2.jpg?s=128&g=1", "display_name": "wobbily_col", "link": "https://stackoverflow.com/users/686016/wobbily-col"}, "edited": false, "score": 1, "creation_date": 1469478713, "post_id": 33076951, "comment_id": 64543016, "body": "How did this get down voted when the code looks the same as the accepted answer?"}, {"owner": {"reputation": 4888, "user_id": 2689491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Yf3q.jpg?s=128&g=1", "display_name": "Th&#233;o T. Carranza", "link": "https://stackoverflow.com/users/2689491/th%c3%a9o-t-carranza"}, "edited": false, "score": 0, "creation_date": 1486990675, "post_id": 33076951, "comment_id": 71570421, "body": "I would suggest this small change for robustness:              <code>ingredient, created = ingredient.objects.get_or_create(**ingredients_data)</code>  That way the dictionary is passed as a **kwargs to the constructor, thus abstracting the actual class structure.   Otherwise, this answer helped me a lot! Thanks!"}], "tags": [], "owner": {"reputation": 129, "user_id": 3757978, "user_type": "registered", "profile_image": "https://graph.facebook.com/793921981/picture?type=large", "display_name": "fercreek", "link": "https://stackoverflow.com/users/3757978/fercreek"}, "is_accepted": false, "score": 12, "last_activity_date": 1587632252, "last_edit_date": 1587632252, "creation_date": 1444640027, "answer_id": 33076951, "question_id": 28078092, "link": "https://stackoverflow.com/questions/28078092/django-rest-framework-writable-nested-serializers/33076951#33076951", "title": "Django Rest Framework writable nested serializers", "body": "<p>Below is a helpful example for this question.</p>\n\n<p>Change that part of code like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def create(self, validated_data):\n    ingredients_data = validated_data.pop('ingredients')\n    recipe = Recipe.objects.create(**validated_data)\n\n    for ingredient in ingredients_data:\n        ingredient, created = Ingredient.objects.get_or_create(name=ingredient['name'])\n        recipe.ingredients.add(ingredient)\n    return recipe\n</code></pre>\n\n<p>And this is the method to edit, cause an error when you want to edit.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def update(self, instance, validated_data):\n    ingredients_data = validated_data.pop('ingredients')\n    instance.name = validated_data['name']\n    instance.description = validated_data['description']\n    instance.directions = validated_data['directions']\n\n    for ingredient in ingredients_data:\n        ingredient, created = Ingredient.objects.get_or_create(name=ingredient['name'])\n        recipe.ingredients.add(ingredient)\n    return instance\n</code></pre>\n\n<p>Here is a link with an example. This code is similar to another answer, but if you want to try the code without any problems, you can use this repo. Good luck!\n<a href=\"https://github.com/fercreek/DRFNestedSerializers\" rel=\"nofollow noreferrer\">DRF Nested serializers</a></p>\n"}], "owner": {"reputation": 4308, "user_id": 3466196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/680028743/picture?type=large", "display_name": "bobbyz", "link": "https://stackoverflow.com/users/3466196/bobbyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32674, "favorite_count": 21, "accepted_answer_id": 28246994, "answer_count": 2, "score": 45, "last_activity_date": 1587632252, "creation_date": 1421879585, "last_edit_date": 1562619534, "question_id": 28078092, "link": "https://stackoverflow.com/questions/28078092/django-rest-framework-writable-nested-serializers", "title": "Django Rest Framework writable nested serializers", "body": "<p>I'm writing a recipe organizer as a sample project for a class. I'm not very experienced with DRF other than using some very basic functionality. Here's the objective:</p>\n\n<p>Create a new Recipe with associated Ingredients. Create the Ingredient objects at the same time as creating the Recipe object.</p>\n\n<p><strong>models.py:</strong></p>\n\n<pre><code>class Ingredient(models.Model):\n    name = models.CharField(max_length=100)\n\n    def __str__(self):\n        return self.name\n\n\nclass Recipe(models.Model):\n    name = models.CharField(max_length=100)\n    description = models.TextField(blank=True, null=True, help_text=\"This is a quick description of your recipe\")\n    directions = models.TextField(help_text=\"How to make the recipe\")\n    ingredients = models.ManyToManyField(Ingredient)\n\n    def __str__(self):\n        return self.name\n</code></pre>\n\n<p><br>\n<strong>serializers.py</strong></p>\n\n<pre><code>class IngredientSerializer(serializers.ModelSerializer):\n\n    class Meta:\n        model = Ingredient\n\n\nclass RecipeSerializer(serializers.ModelSerializer):\n    ingredients = IngredientSerializer(many=True)\n\n    class Meta:\n        model = Recipe\n\n    def create(self, validated_data):\n        ingredients_data = validated_data.pop('ingredients')\n        recipe = Recipe.objects.create(**validated_data)\n        for ingredient_data in ingredients_data:\n            Ingredient.objects.create(**ingredient_data)\n        return recipe\n</code></pre>\n\n<p>This successfully creates the Recipe object AND the Ingredients objects in the database, but doesn't associate the list of Ingredients with the Recipe. I assume this is because when I run <code>ingredients_data = validated_data.pop('ingredients')</code>, the <code>validated_data</code> dictionary gets its Ingredients removed, so when I create a new Recipe using <code>validated_data</code>, there aren't associated ingredients.</p>\n\n<p>However I can't seem to figure out a way to keep ingredients associated with the recipe.</p>\n"}, {"tags": ["python", "nodes", "maya", "uv-mapping"], "comments": [{"owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "edited": false, "score": 1, "creation_date": 1421883409, "post_id": 28078056, "comment_id": 44536540, "body": "Are you getting the error before connecting something to the node? You&#39;re not null checking before proceeding, so it might be trying to run when inputData.asMesh() is returning <code>none</code>"}, {"owner": {"reputation": 2402, "user_id": 2502262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvS8O.jpg?s=128&g=1", "display_name": "kartikg3", "link": "https://stackoverflow.com/users/2502262/kartikg3"}, "edited": false, "score": 0, "creation_date": 1421887672, "post_id": 28078056, "comment_id": 44537829, "body": "@SKYnine Please do the check and update the status here"}, {"owner": {"reputation": 2528, "user_id": 2611897, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6a919cf0ee5994c3e86acf4a029e95f2?s=128&d=identicon&r=PG", "display_name": "SKYnine", "link": "https://stackoverflow.com/users/2611897/skynine"}, "edited": false, "score": 0, "creation_date": 1421888516, "post_id": 28078056, "comment_id": 44538084, "body": "unfortunately this doesn&#39;t help. I described results in an edit and get the same error message"}], "owner": {"reputation": 2528, "user_id": 2611897, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6a919cf0ee5994c3e86acf4a029e95f2?s=128&d=identicon&r=PG", "display_name": "SKYnine", "link": "https://stackoverflow.com/users/2611897/skynine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1294, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421888406, "creation_date": 1421879440, "last_edit_date": 1421888406, "question_id": 28078056, "link": "https://stackoverflow.com/questions/28078056/create-uv-set-with-openmaya-api-2-0", "title": "Create UV Set with openmaya API 2.0", "body": "<p>Im writing a custom reader node for maya (in python with openmaya API 2.0) and I would like to send my uv sets to a regular maya mesh node.</p>\n\n<p>Im wondering what would be the best way to push the uv sets in a mesh node? I wasn't able to find what data I have to create and how to send them to the mesh node.</p>\n\n<p>My reader is a <code>OpenMaya.MPxNode</code> who push custom data to a <code>OpenMaya.MPxSurfaceShape</code>. The shape is linked by out mesh / in mesh plugs to a regular maya mesh. I attempt to fill the uvSet plug of this shape using <code>compute</code> but without success. I expect the UVSets to be sent to the mesh. </p>\n\n<p>The following code sample is a limited test where my only goal is to create a new UVSet and attach it to the mesh. </p>\n\n<p>Any ideas or documentation which could help?\nI tried several things but I <strong>always</strong> get the error below.</p>\n\n<p><strong>The error:</strong></p>\n\n<pre><code>// Error: (kFailure): Object does not exist\n# Traceback (most recent call last):\n#   File \"/path/to/maya/plug-ins/test_create_uv_set.py\", line 60, in compute\n#     mesh.createUVSet(\"toto\")\n# RuntimeError: (kFailure): Object does not exist // \n</code></pre>\n\n<p><strong>The running code:</strong></p>\n\n<pre><code>\"\"\"\nusage\n\nimport maya.cmds as cmds\nimport pymel.core as pm\n\ncmds.loadPlugin(\"/path/to/maya/plug-ins/test_create_uv_set.py\")\n\ntransform_node = pm.polySphere(n='transform1', ch=1, o=1, r=4)[0]\nmesh1_node = transform_node.getShape()\npm.setAttr(mesh1_node + \".visibility\", False)\nuv_set_mod_node = pm.createNode(\"uvSetModifier\", name=\"uvsetmodifier1\")\nmesh2_node = pm.createNode(\"mesh\", name=\"mesh2\", parent=transform_node)\npm.hyperShade(assign=\"initialShadingGroup\")\n\npm.Attribute.connect(mesh1_node.attr(\"outMesh\"), uv_set_mod_node.attr(\"inMesh\"))\npm.Attribute.connect(uv_set_mod_node.attr(\"outMesh\"), mesh2_node.attr(\"inMesh\"))\n\"\"\"\n\nimport sys\nimport maya.api.OpenMaya as OpenMaya\n\n\ndef maya_useNewAPI():\n    pass\n\n\nclass uvSetModifier(OpenMaya.MPxNode):\n    typeName = \"uvSetModifier\"\n    id = OpenMaya.MTypeId(0xCCCCC)\n\n    inMesh = None\n    outMesh = None\n\n    @staticmethod\n    def creator():\n        return uvSetModifier()\n\n    @staticmethod\n    def initialize():\n        typedAttr = OpenMaya.MFnTypedAttribute()\n\n        uvSetModifier.inMesh = typedAttr.create(\"inMesh\", \"im\", OpenMaya.MFnData.kMesh)\n        typedAttr.writable = True\n        OpenMaya.MPxNode.addAttribute(uvSetModifier.inMesh)\n\n        uvSetModifier.outMesh = typedAttr.create(\"outMesh\", \"om\", OpenMaya.MFnData.kMesh)\n        typedAttr.writable = True\n        OpenMaya.MPxNode.addAttribute(uvSetModifier.outMesh)\n\n    def __init__(self):\n        OpenMaya.MPxNode.__init__(self)\n\n    def compute(self, plug, datablock):\n        if plug == uvSetModifier.outMesh:\n            inputData = datablock.inputValue(uvSetModifier.inMesh)\n            outputData = datablock.outputValue(uvSetModifier.outMesh)\n            outputData.setMObject(inputData.asMesh())\n            mesh = OpenMaya.MFnMesh(inputData.asMesh())\n            mesh.createUVSet(\"toto\")\n            datablock.setClean(plug)\n\n\ndef initializePlugin(obj):\n    plugin = OpenMaya.MFnPlugin(obj, \"Autodesk\", \"3.0\", \"Any\")\n\n    try:\n        plugin.registerNode(uvSetModifier.typeName, uvSetModifier.id, uvSetModifier.creator, uvSetModifier.initialize)\n    except:\n        sys.stderr.write(\"Failed to register node\\n\")\n        raise\n\n\ndef uninitializePlugin(obj):\n    plugin = OpenMaya.MFnPlugin(obj)\n\n    try:\n        plugin.deregisterNode(uvSetModifier.id)\n    except:\n        sys.stderr.write(\"Failed to deregister node\\n\")\n        pass\n</code></pre>\n\n<p><strong>UPDATE 1: THEODOX input</strong></p>\n\n<p>I added the following line (59)</p>\n\n<pre><code>if inputData.asMesh() is not None:\n   print \"test\"\n   mesh = OpenMaya.MFnMesh(inputData.asMesh())\n   mesh.createUVSet(\"toto\")\n</code></pre>\n\n<p><strong>results</strong>: I still get the same error message</p>\n"}, {"tags": ["python", "django", "postgresql", "csv"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1421879721, "post_id": 28078036, "comment_id": 44535080, "body": "Yes, use the <code>csv</code> module.  There are plenty of examples online on how to return a <code>.csv</code> file in Django (including in the Django docs)."}, {"owner": {"reputation": 1283, "user_id": 4064901, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c2f28b58ae6032b772c0e012525617f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4064901/jeremy"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1421880881, "post_id": 28078036, "comment_id": 44535574, "body": "How would I get those specific tables in the postgres table into the csv?"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1421886140, "post_id": 28078036, "comment_id": 44537371, "body": "What have you tried?  You haven&#39;t provided any model code (so we don&#39;t know if there is anything special about your models), you haven&#39;t shown that you&#39;ve made any effort reading the documentation or any of the online resources (which are bountiful).  I&#39;ll stretch pretty far to help someone that makes an effort, but it&#39;s not worth my time to do your work for you (sorry)."}, {"owner": {"reputation": 1283, "user_id": 4064901, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c2f28b58ae6032b772c0e012525617f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4064901/jeremy"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1421893017, "post_id": 28078036, "comment_id": 44539173, "body": "I have actually done a lot to learn this on my own @thebjorn . I have posted my updated code. And I am not asking you to do my job for me... I have refined my post to the last bit: figuring out how to add multiple tables to that csv file before returning from the view"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1421934474, "post_id": 28078036, "comment_id": 44557193, "body": "Congratulations on fixing your issue. I hope you understand that I wasn&#39;t trying to be mean with my comments, but the more information you put into your question the higher the likelihood of someone wanting to help you.  This is especially important regarding what you&#39;ve tried and what information you&#39;ve found, otherwise you&#39;ll get that exact information and everyone&#39;s time has been wasted: eg. with only the information in the original question I would have sent you to the first hit for &quot;django docs csv&quot;, and &quot;django model csv export&quot; (this comment is too long to fit the links)."}], "answers": [{"tags": [], "owner": {"reputation": 1283, "user_id": 4064901, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c2f28b58ae6032b772c0e012525617f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4064901/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1421894978, "creation_date": 1421894978, "answer_id": 28080520, "question_id": 28078036, "link": "https://stackoverflow.com/questions/28078036/django-download-csv-from-sql-db-and-render-template/28080520#28080520", "title": "Django download CSV from SQL DB and render template", "body": "<p>I solved my problem. I just had the code slightly in views.py. The most recent EDIT has the correct code</p>\n"}], "owner": {"reputation": 1283, "user_id": 4064901, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c2f28b58ae6032b772c0e012525617f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4064901/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421895062, "creation_date": 1421879381, "last_edit_date": 1421895062, "question_id": 28078036, "link": "https://stackoverflow.com/questions/28078036/django-download-csv-from-sql-db-and-render-template", "title": "Django download CSV from SQL DB and render template", "body": "<p>This is a bit of a fully loaded question... </p>\n\n<p>So I have a Django app with a PostgreSQL DB. I would like to offer an option where the user can download a specific set of tables from the DB as a csv file. </p>\n\n<pre><code>\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 admin.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 forms.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 models.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 templates\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 anthropometrics\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 form.html\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 urls.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 views.py\n</code></pre>\n\n<p>So here is an example app that I have. I would like to export pretty much everything in models.py (as a CSV). When I do so, however, I would like to reroute back to the original page.</p>\n\n<p>So I will have my index.html:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;nav class=\"navbar navbar-default\" role=\"navigation\"&gt;\n      &lt;div class=\"container-fluid\"&gt;\n          {% if user.is_authenticated %}\n              &lt;a href=\"{% url 'app:form' %}\"&gt;&lt;button type=\"button\" class=\"btn btn-default navbar-btn\"&gt;Enter Data&lt;/button&gt;&lt;/a&gt;\n              &lt;a href=\"{% url 'app:view' %}\"&gt;&lt;button type=\"button\" class=\"btn btn-default navbar-btn\"&gt;View Data&lt;/button&gt;&lt;/a&gt;\n              &lt;a href=\"{% url 'app:download' %}\"&gt;&lt;button type=\"button\" class=\"btn btn-default navbar-btn\"&gt;GET Data&lt;/button&gt;&lt;/a&gt;\n          {% endif %}\n      &lt;/div&gt;\n  &lt;/nav&gt;\n\n{% block next %}{% endblock %}\n</code></pre>\n\n<p></p>\n\n<p>EDIT:</p>\n\n<p>The app button will render this view in <code>views.py</code></p>\n\n<pre><code>def get_model_fields(model):\n    return model._meta.fields\ndef download(request):\n    BASE_DIR = os.path.dirname(os.path.dirname(__file__))+\"/anthropometrics\"\n    response = HttpResponse(content_type='text/csv')\n    response['Content-Disposition'] = 'attachment; filename=data.csv'\n    writer = csv.writer(response)\n    for model in [base,question1,question2,question3,question4]:\n        name = model.__name__\n        # Write headers to CSV file\n        fields = get_model_fields(model)\n        if fields:\n            headers = fields\n        else:\n            headers = []\n            for field in model._meta.fields:\n                headers.append(field.name)\n        writer.writerow(headers)\n        # Write data to CSV file\n        for obj in model.objects.all():\n            row = []\n            for field in headers:\n                if field in headers:\n                    val = getattr(obj, field.name)\n                    if callable(val):\n                        val = val()\n                    row.append(val)\n            writer.writerow(row)\n        # Return CSV file to browser as download\n    return response\n</code></pre>\n\n<p>The example code above is like for serving just a normal text file. I imagine it would be something close to this using <code>csv</code> from <code>import csv</code></p>\n\n<p>Any help?</p>\n\n<p>Here's my models.py:</p>\n\n<pre><code>class base(models.Model):\n    mothers_id = models.IntegerField(primary_key=True)\n    date = models.DateField()\n    data_collector = models.CharField(max_length=50)\n\nclass question1(models.Model):\n    question1_base = models.OneToOneField(base, primary_key=True)\n    question1_1a_in_cm  = models.IntegerField(default=False)\n    question1_1a_in_in  = models.IntegerField(default=False)\n    question1_1b_in_kg  = models.IntegerField(default=False)\n    question1_1b_in_lbs = models.IntegerField(default=False)\nclass question2(models.Model):\n    question2_base = models.OneToOneField(base, primary_key=True)\n    question2_2a = models.CharField(max_length=2, choices=get_choices(2, 'YES', 'NO'))\n    question2_2a_explanation = models.CharField(max_length=100, null=True, blank=True)\n    question2_2b = models.CharField(max_length=2, choices=get_choices(2, 'YES', 'NO'))\n    question2_2b_explanation = models.CharField(max_length=100, null=True, blank=True)\nclass question3(models.Model):\n    question3_base = models.OneToOneField(base, primary_key=True)\n    question3_3a_in_cm  = models.IntegerField(default=False)\n    question3_3a_in_in  = models.IntegerField(default=False)\n    question3_3b_in_kg  = models.IntegerField(default=False)\n    question3_3b_in_lbs = models.IntegerField(default=False)\nclass question4(models.Model):\n    question4_base = models.OneToOneField(base, primary_key=True)\n    question4_4a_in_cm = models.IntegerField(default=False)\n    question4_4a_in_in = models.IntegerField(default=False)\n    question4_4a_not_known = models.CharField(max_length=2, choices=get_choices(1, 'YES'), null=True, blank=True)\n    question4_4b_in_kg = models.IntegerField(default=False)\n    question4_4b_in_lbs = models.IntegerField(default=False)\n    question4_4b_not_known = models.CharField(max_length=2, choices=get_choices(1, 'YES'), null=True, blank=True)\n    question4_4c = models.CharField(max_length=2, choices=get_choices(3, 'Hospital/Clinic Health Card', 'Mother', 'Other'))\n    question4_4d = models.CharField(max_length=2, choices=get_choices(2, 'YES', 'NO'))\n    question4_4d_explanation = models.CharField(max_length=100, null=True, blank=True)\n    question4_4e = models.CharField(max_length=2, choices=get_choices(2, 'YES', 'NO'))\n    question4_4e_explanation = models.CharField(max_length=100, null=True, blank=True)\n</code></pre>\n\n<p>I am so freaking close, I just can't figure out how to add multiple classes from models.py (tables in SQL) to the same csv file</p>\n"}, {"tags": ["python", "undefined"], "comments": [{"owner": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "edited": false, "score": 9, "creation_date": 1421879136, "post_id": 28077946, "comment_id": 44534850, "body": "Something horrible happened to your code&#39;s indentation. Please fix it."}, {"owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "edited": false, "score": 1, "creation_date": 1421879233, "post_id": 28077946, "comment_id": 44534890, "body": "Hi, and welcome to stackoverflow.  This code won\u2019t work at all, as it is not indented correctly. Please provide a working code example and more detailed information about the error. Please also read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 4, "last_activity_date": 1421879214, "creation_date": 1421879214, "answer_id": 28077996, "question_id": 28077946, "link": "https://stackoverflow.com/questions/28077946/why-does-this-not-work-d-is-not-defined/28077996#28077996", "title": "Why does this not work? &quot;d is not defined&quot;", "body": "<p>It appears that you are using Python 2, in which <a href=\"https://docs.python.org/2.7/library/functions.html#input\" rel=\"nofollow\"><code>input</code></a> attempts to evaluate what the user types as though it were a Python statement.  You should instead use <a href=\"https://docs.python.org/2.7/library/functions.html#raw_input\" rel=\"nofollow\"><code>raw_input</code></a>, which does not.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 4073932, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d7b5576d7029db9b061eab7e74e8ffa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tiket_dev", "link": "https://stackoverflow.com/users/4073932/tiket-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1421880583, "creation_date": 1421880583, "answer_id": 28078297, "question_id": 28077946, "link": "https://stackoverflow.com/questions/28077946/why-does-this-not-work-d-is-not-defined/28078297#28078297", "title": "Why does this not work? &quot;d is not defined&quot;", "body": "<p>When the script ask you \"which option would you like?:\" you have to type \"D\" or 'D' and not D cause the input function, I think you should use <a href=\"https://docs.python.org/2.7/library/functions.html#raw_input\" rel=\"nofollow\">raw_input</a></p>\n\n<p>And you will have an other problem with the line:</p>\n\n<pre><code>total=amount+balance\n</code></pre>\n\n<p>you have to add () for call function</p>\n\n<pre><code>total=amount+balance()\n</code></pre>\n\n<p>And with this line:</p>\n\n<pre><code>if option ==\"D\":\n</code></pre>\n\n<p>Cause option is not define.</p>\n\n<pre><code>option = option()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2924, "user_id": 4052384, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2WuTl.jpg?s=128&g=1", "display_name": "Anthony Pham", "link": "https://stackoverflow.com/users/4052384/anthony-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1421881156, "creation_date": 1421881156, "answer_id": 28078448, "question_id": 28077946, "link": "https://stackoverflow.com/questions/28077946/why-does-this-not-work-d-is-not-defined/28078448#28078448", "title": "Why does this not work? &quot;d is not defined&quot;", "body": "<pre><code>def balance():\n    balance=7.52\n    return balance\n    print(\"Hi, Welcome to the Atm.\")\n    print(\"no need for pin numbers, we already know who you are\")\n    print(\"please selection one of the options given beneath\")\n    print(\"\"\"\n    D = Deposit\n    W = Withdrawal\n    T = Transfer\n    B = Balance check\n    Q = Quick cash of 20$\n    E = Exit\n    Please select in the next line.   \"\"\")\ndef option():\n    option=input(\"which option would you like?:\")\n    return option\n    input(\"which option would you like?:\")\n    if option ==\"D\":\n        print(\"How much would you like to deposit?\")\n        amount=(int(input(\"amount:\")))\n        total=amount+balance\n</code></pre>\n\n<p>You will need to indent your code <strong><em>correctly</em></strong> so it looks like this (look up):<br>\n<code>input</code> is only used in Python 3.x. The equivalent of the Python 3.x version is <code>raw_input</code>, the Python 2.x version. Using the same name for a variable and function is not recommended, due to the confusion to come. It is better to rename one of them. If you are using Python 3.x, then you need to fix your indention. Try the <a href=\"https://docs.python.org/2/\" rel=\"nofollow\">Python 2.7 Docs</a> or the <a href=\"https://docs.python.org/3/\" rel=\"nofollow\">Python 3.x Docs</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4480270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-apgJusVRe3o/AAAAAAAAAAI/AAAAAAAAAGU/gBZknU-lRrw/photo.jpg?sz=128", "display_name": "masterlook5", "link": "https://stackoverflow.com/users/4480270/masterlook5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 28077996, "answer_count": 3, "score": -6, "last_activity_date": 1421886032, "creation_date": 1421878999, "last_edit_date": 1421886032, "question_id": 28077946, "link": "https://stackoverflow.com/questions/28077946/why-does-this-not-work-d-is-not-defined", "title": "Why does this not work? &quot;d is not defined&quot;", "body": "<p>I'm currently doing python for recreational uses and this ATM script is not running correctly, please help.</p>\n\n<pre><code>def balance():\n    balance=7.52\n    return balance\n    print(\"Hi, Welcome to the Atm.\")\n    print(\"no need for pin numbers, we already know who you are\")\n    print(\"please selection one of the options given beneath\")\n    print(\"\"\"\n            D = Deposit\n            W = Withdrawal\n            T = Transfer\n            B = Balance check\n            Q = Quick cash of 20$\n            E = Exit\n            Please select in the next line.\"\"\")\n\ndef option():\n    option = input(\"which option would you like?:\")\n    return option\n    input(\"which option would you like?:\")\n    if option == \"D\":\n        print(\"How much would you like to deposit?\")\n        amount = (int(input(\"amount:\")))\n        total = amount + balance\n</code></pre>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421879256, "post_id": 28077849, "comment_id": 44534899, "body": "why is b before d? Also do you want the product or permutations?"}, {"owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "edited": false, "score": 0, "creation_date": 1421879998, "post_id": 28077849, "comment_id": 44535196, "body": "Should (b, c) really be in the list? My understanding was that you were mixing the two."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1421880192, "post_id": 28077849, "comment_id": 44535284, "body": "voting to close as it is not very clear what you expect as output"}, {"owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421882705, "post_id": 28077849, "comment_id": 44536295, "body": "@PadraicCunningham I am looking for the permutations. I fixed the example, looks clear now."}, {"owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "reply_to_user": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "edited": false, "score": 0, "creation_date": 1421882760, "post_id": 28077849, "comment_id": 44536315, "body": "@SlaterTyranus That was a typo, should have been c,f.  The lists are independent, should not mix."}], "answers": [{"comments": [{"owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "edited": false, "score": 0, "creation_date": 1421883556, "post_id": 28078336, "comment_id": 44536600, "body": "This sounds like the right direction to me as well.  What if a copy where made of each list and the copies would only contain the highest non-exhausted value-set (ie. all the 2&#39;s in this example) for that specific list.  In this case it would mean l1 = [a] and l2 = [d,e].  All permutations would be generated for these lists and then the list with the next lowest non-null value-set would be popped and populated. (arbitrarily choosing l1 over l2 in this case, giving l1=[b,c] and l2 = [d,e].  Permutations would then be generated for the new l1 and l2 etc."}, {"owner": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421888363, "post_id": 28078336, "comment_id": 44538032, "body": "I don&#39;t really understand how this works... What is the &quot;current entry of <code>l1</code>&quot; if we&#39;re iterating over <code>l2</code>? Also, why do we only have 3 possible actions at each point?"}, {"owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "reply_to_user": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421934419, "post_id": 28078336, "comment_id": 44557146, "body": "@quasiverse I think the solution is a bit more complicated even than this.  Anyhow, my understanding is that the the current entry of <code>l1</code> is the head of the recursion / the current stable member."}, {"owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "reply_to_user": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "edited": false, "score": 0, "creation_date": 1421949183, "post_id": 28078336, "comment_id": 44566794, "body": "@Colin That copying technique is relatively equivalent to the one I laid out, if slightly more storage-intensive. I imagine that approach would be better if the spread of values is relatively small compared to the number of values, but I think this would be more efficient if the spread is larger. Your understanding is accurate."}, {"owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "reply_to_user": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421949235, "post_id": 28078336, "comment_id": 44566823, "body": "@quasiverse There are only three possible actions because we&#39;ve assumed that the lists are sorted. The three options are basically: increment l1, increment l2, return to head. If the lists weren&#39;t sorted at the start this wouldn&#39;t be possible."}, {"owner": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421976749, "post_id": 28078336, "comment_id": 44578778, "body": "@SlaterTyranus So my understanding is that: given we currently are at indexes <code>i1</code>, <code>i2</code> in <code>l1</code> and <code>l2</code> respectively, your algorithm says the next pair must have index in <code>l1</code> that is either <code>i1</code>, <code>i1+1</code>, or we go back to the lowest lowest index of <code>l1</code> that still has pairs left. Here is a case I don&#39;t understand. (new comment because of character limit)"}, {"owner": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421976824, "post_id": 28078336, "comment_id": 44578796, "body": "Suppose the values in the lists are <code>l1 = (a,b,c) = (5,2,1)</code>, <code>l2 = (d,e,f) = (7,5,0)</code>. In this case the solution is <code>ad, ae, bd, cd, be, ce, af, bf, cf</code>. However when we are at <code>cd</code> (<code>i1 = 2</code> 0-indexed), the next best pair is <code>be</code> where <code>i1 = 1</code> which is not the lowest index with pairs left (which would be <code>i1 = 0</code> since we have not used <code>(i1, i2) =  (0, 2) = af</code>) and neither is it equal the previous <code>i1</code> or <code>i1+1</code>."}, {"owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "reply_to_user": {"reputation": 6753, "user_id": 622647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7ee97bafe2479b8d930c01d7e25f58?s=128&d=identicon&r=PG", "display_name": "flight", "link": "https://stackoverflow.com/users/622647/flight"}, "edited": false, "score": 0, "creation_date": 1421980472, "post_id": 28078336, "comment_id": 44579575, "body": "@quasiverse Thanks for pointing out that edge case, I made an assumption in my exploration that was honestly silly, small edit, but will make it now."}], "tags": [], "owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "is_accepted": false, "score": 1, "last_activity_date": 1421980569, "last_edit_date": 1421980569, "creation_date": 1421880731, "answer_id": 28078336, "question_id": 28077849, "link": "https://stackoverflow.com/questions/28077849/generate-all-permutations-of-several-lists-in-permutation-value-order/28078336#28078336", "title": "Generate All Permutations of Several Lists in Permutation-Value Order", "body": "<p>This should be pretty easily approachable with a simple greedy-style algorithm. That said, I'm assuming you have access to the specific values rather than just a sorted list of the values. Also assuming that it comes sorted.</p>\n\n<pre><code>l1 = [(a, 2), (b, 1), (c, 1)]\nl2 = [(d, 2), (e, 2), (f, 1)]\n</code></pre>\n\n<p>The truth is it's pretty non-trivial, but here's how you can approach the problem (code will probably come later, because as I said, it's actually non-trivial.)</p>\n\n<p>Assuming you have three possible actions at any given point:</p>\n\n<ol>\n<li>(highest in next_values (see below), highest remaining entry of l2 for l1)</li>\n<li>(Current entry of l1, next entry of l2) # Assumes you're iterating through l2</li>\n<li>(Next entry of l1, highest remaining entry of l2)</li>\n</ol>\n\n<p>Then you must simply keep track of the value of each of those three, over time and choose the optimal at each timestep. It's not entirely lazy as you have to update these three values at each timestep, it's pretty close.</p>\n\n<p>To actually implement this there's one data structure we have to keep around:</p>\n\n<pre><code>next_entries: {*l1: last entry of l2 explored}\nnext_values: {*l1: l1 entry + next l2 entry}\n</code></pre>\n\n<p>At which point the calculations for the three possible points above can be done. Again, can produce code, will probably do, but it's probably ~20 dense lines to do in a good readable way.</p>\n"}, {"comments": [{"owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "edited": false, "score": 0, "creation_date": 1422046907, "post_id": 28103853, "comment_id": 44611428, "body": "Nice analysis and solution!  I was trying to define the problem as a complex DFS of a custom tree but I&#39;ll have a closer look at this first."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "is_accepted": true, "score": 1, "last_activity_date": 1421995378, "last_edit_date": 1421995378, "creation_date": 1421992408, "answer_id": 28103853, "question_id": 28077849, "link": "https://stackoverflow.com/questions/28077849/generate-all-permutations-of-several-lists-in-permutation-value-order/28103853#28103853", "title": "Generate All Permutations of Several Lists in Permutation-Value Order", "body": "<p>For example, lets take l1={6,4,3,1} and l2={5,4,1}. Plot them as horizontal and vertical lines on 2D plane. </p>\n\n<p><img src=\"https://i.stack.imgur.com/PbkXf.png\" alt=\"Plot and swip line\"></p>\n\n<p>Then points of interest are all intersections. We should report those intersections in order an imaginary sweep line moving from (inf, inf) to (0, 0) touches them. Notice that a point lying on the horizontal line can't be reported earlier than another point on the same line which is righter. So for each horizontal line we must check only rightmost point. From all those points, we must choose one with the greatest sum of coordinates. This can be done with heap data structure.</p>\n\n<p>Initially, we place all points lying on the rightmost vertical line into the heap. Then we extract the top point from the heap, yield it and finally put its left neighbour into the heap (if it has one). So heap always contains at most len(l1) elements, and every new generated point cost us O(log(len(l1))). Solution can be improved if we choose l1 to be smallest list from two given.</p>\n\n<p>Here is example solution:</p>\n\n<pre><code>import heapq\n\na = [(\"a\", 6), (\"b\", 4), (\"c\", 3), (\"d\", 1)]\nb = [(\"e\", 5), (\"f\", 5), (\"g\", 4), (\"h\", 2)]\n\nclass Pair:\n    def __init__(self, i, j, value):\n        self.i = i\n        self.j = j\n        self.value = value\n    def __cmp__(self, other):\n        return other.value - self.value\n\ndef solution(a, b):\n    heap = []\n    for i in range(len(a)):\n        heapq.heappush(heap, Pair(i, 0, a[i][1] + b[0][1]))\n    while len(heap) &gt; 0:\n        pair = heapq.heappop(heap)\n        yield (a[pair.i], b[pair.j], pair.value)\n        if pair.j + 1 &lt; len(b):\n            heapq.heappush(heap, Pair(pair.i, pair.j + 1, a[pair.i][1] + b[pair.j + 1][1]))\n\nfor (a, b, value) in solution(a, b):\n    print (\"%s %s -&gt; %d\" % (a, b, value))\n</code></pre>\n\n<p>Things get worse when we are going into higher dimensions (more than 2 lists to combine). It can be solved on top of the 2D solution, with memoization, so we first build an answer for l1,l2 as lazy-list-like data structure, and then apply the same algorithm again, for this memoized list and l3 as arguments, and so on. One last step that must be taken - we should either always use array with smaller length as l1, or get rid of pushing all elements of l1 into heap in the beginning.</p>\n\n<p>Complete code example for N lists <a href=\"http://pastebin.com/xTJXT1Tv\" rel=\"nofollow noreferrer\">here</a>, as it too long.</p>\n"}], "owner": {"reputation": 1693, "user_id": 772803, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0c30901eae5122f369bcd5420216690?s=128&d=identicon&r=PG", "display_name": "Toaster", "link": "https://stackoverflow.com/users/772803/toaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "accepted_answer_id": 28103853, "answer_count": 2, "score": 1, "last_activity_date": 1421995378, "creation_date": 1421878465, "last_edit_date": 1421882669, "question_id": 28077849, "link": "https://stackoverflow.com/questions/28077849/generate-all-permutations-of-several-lists-in-permutation-value-order", "title": "Generate All Permutations of Several Lists in Permutation-Value Order", "body": "<p>I have looked at several other questions on permutations and this variant does not seem to appear.  I am looking for a simple way to generate a biased permutation.  Here's what I mean.</p>\n\n<p>Suppose I have two lists (though I need to solve for <em>N</em> lists):</p>\n\n<pre><code>l1 = [a, b, c]\nl2 = [d, e, f]\n</code></pre>\n\n<p>Permutations of these lists would look like [(a,d), (a,e), (a,f), (b,d), (b,e), (b,f) ...]. However, in my world the elements of permutations are scored and summed to value the arrangement.  Supposing <strong>a</strong>, <strong>d</strong> and <strong>e</strong> are worth 2 points and <strong>b</strong>, <strong>c</strong> and <strong>f</strong> are worth 1 point. The value of some sample permutations are then:</p>\n\n<pre><code>(a,d) = 4\n(a,e) = 4 \n(a,f) = 3\n(c,f) = 2\n</code></pre>\n\n<p>I need to generate all permutations but I would like to generate high value permutations before lower value permutations.  </p>\n\n<p>Assuming the elements of each list are sorted in descending value order, is there a nice way to generate the permutations in value-order?</p>\n\n<p>(Obviously I can generate all of the permutations and sort them but I would prefer to write a generator as the number of permutations can be large.)</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421878547, "post_id": 28077796, "comment_id": 44534623, "body": "Weird bug - I was trying to fix the lack of code blocks and the code-block wasn&#39;t working properly. thoughts?"}, {"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1421878567, "post_id": 28077796, "comment_id": 44534633, "body": "It&#39;s because of the list of shortcomings (1. , 2. , etc.)"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421878634, "post_id": 28077796, "comment_id": 44534667, "body": "@user3467349 -- markdown (or maybe just SO&#39;s variant) has some strange behaviors when dealing with code that immediately follows an unordered or ordered list.  The trick is to just insert some &quot;meaningful junk&quot; between the list and the code block."}, {"owner": {"reputation": 339, "user_id": 2415417, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f2e036c508237258dd6cce6b87977ee?s=128&d=identicon&r=PG", "display_name": "theHamburglar", "link": "https://stackoverflow.com/users/2415417/thehamburglar"}, "edited": false, "score": 0, "creation_date": 1421878726, "post_id": 28077796, "comment_id": 44534700, "body": "Sorry about the formatting, I&#39;m trying to fix it..."}, {"owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "edited": false, "score": 0, "creation_date": 1421878773, "post_id": 28077796, "comment_id": 44534716, "body": "You just needed another blank line at the end of your list."}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421878775, "post_id": 28077796, "comment_id": 44534717, "body": "From what I see so far you&#39;re recurrently generating large lists of tuples, if performance is an issue than you probably want to consider <code>numpy</code>"}, {"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1421879177, "post_id": 28077796, "comment_id": 44534869, "body": "what does this code do?"}, {"owner": {"reputation": 339, "user_id": 2415417, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f2e036c508237258dd6cce6b87977ee?s=128&d=identicon&r=PG", "display_name": "theHamburglar", "link": "https://stackoverflow.com/users/2415417/thehamburglar"}, "edited": false, "score": 0, "creation_date": 1421879355, "post_id": 28077796, "comment_id": 44534936, "body": "Thanks for the insight - that is definitely helpful.  This specific program is just a process that eats up time, though, and not necessarily meant to be efficient.  I was just using it to see how much improvement there was when using multiprocessing."}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421881767, "post_id": 28077796, "comment_id": 44535964, "body": "python will probably not improve that much from multiprocessing in terms of computational speeds- It&#39;s more useful for various tasks that need to be done concurrently from my experience."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 2415417, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f2e036c508237258dd6cce6b87977ee?s=128&d=identicon&r=PG", "display_name": "theHamburglar", "link": "https://stackoverflow.com/users/2415417/thehamburglar"}, "edited": false, "score": 0, "creation_date": 1421941777, "post_id": 28077958, "comment_id": 44562194, "body": "Thank you for providing some improvements on the setup as well as addressing the original questions."}, {"owner": {"reputation": 339, "user_id": 2415417, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f2e036c508237258dd6cce6b87977ee?s=128&d=identicon&r=PG", "display_name": "theHamburglar", "link": "https://stackoverflow.com/users/2415417/thehamburglar"}, "edited": false, "score": 0, "creation_date": 1421942399, "post_id": 28077958, "comment_id": 44562666, "body": "I actually wanted the sum of the time, so defining and printing elapsed within the if statement solved that."}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 0, "last_activity_date": 1421879852, "last_edit_date": 1421879852, "creation_date": 1421879046, "answer_id": 28077958, "question_id": 28077796, "link": "https://stackoverflow.com/questions/28077796/how-to-use-multiprocessing-in-python-using-pool/28077958#28077958", "title": "How to use multiprocessing in Python using Pool", "body": "<p>You are generating a lot of lists just to throw them away ... I'd change <code>all_combinations</code> into a generator:</p>\n\n<pre><code>def all_combinations(count_arg):\n    for i in range(1,count_arg+1):  # xrange on python2.x\n        # yield from itertools.combinations(...) on python3.3+\n        for comb in itertools.combinations(range(0,count_arg),i)):\n            yield comb\n</code></pre>\n\n<p>Now <code>worker</code> needs to change to get the number of items from the generator rather than a list...</p>\n\n<pre><code>def worker(num):\n    return sum(1 for _ in all_combinations(num))\n</code></pre>\n\n<p>These changes are mostly just aesthetic -- You'll likely not notice a large speedup one way or another (although I could be wrong, as with anything, you never know until you profile ...).</p>\n\n<p>Now that that's out of the way, on to your <em>real</em> questions...</p>\n\n<blockquote>\n  <p>1) It outputs information from each iteration ...</p>\n</blockquote>\n\n<p>Of course <code>multiprocessing.Pool.map</code> will give you one result per process in the pool.  In this case you'll get 24 (one for each <code>num_list</code>).  Fortunately, the \"reduce\" stage of this is really easy -- Since each element returned by the worker is just a partial sum, you can just get the sum of the output list:</p>\n\n<pre><code>print sum(output_list2)\n</code></pre>\n\n<blockquote>\n  <p>2) It only speeds things up a little bit...</p>\n</blockquote>\n\n<p>This is because your algorithm doesn't scale well.  You'll only ever be as fast as your slowest running worker -- And your workers don't all execute in similar times.  Note that as the numbers get higher you're doing more and more combinations in a given worker.  This makes the workers for higher numbers (e.g. 24) much more expensive to compute than the worker for lower numbers (e.g. 12).  To get better speedups, you need better load balancing.</p>\n"}], "owner": {"reputation": 339, "user_id": 2415417, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f2e036c508237258dd6cce6b87977ee?s=128&d=identicon&r=PG", "display_name": "theHamburglar", "link": "https://stackoverflow.com/users/2415417/thehamburglar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 28077958, "answer_count": 1, "score": 0, "last_activity_date": 1421879852, "creation_date": 1421878290, "last_edit_date": 1421878895, "question_id": 28077796, "link": "https://stackoverflow.com/questions/28077796/how-to-use-multiprocessing-in-python-using-pool", "title": "How to use multiprocessing in Python using Pool", "body": "<p>I am trying to speed up some processes and was trying to use multiple cores for a Python script.  I was trying to get the framework down before I applied it to what I was doing.  So far, I have something that works, but it has two shortcomings: \n1)It outputs information from each iteration - I just want the final value\n2)It only speeds things up a little bit (about 60% of the original time when I was testing it), which is better, but not a game changer.</p>\n\n<p>Code:  </p>\n\n<pre><code>import multiprocessing as mp\nimport time\nimport itertools\nstart = time.clock()\nprocesses = []\noutput_list = [] \n\ndef all_combinations(count_arg):\n    returns_list = []\n    for i in range(1,count_arg+1):\n        tmp_comb = list(itertools.combinations(range(0,count_arg),i))\n        for tmp_tup in tmp_comb:\n            returns_list.append(tmp_tup)\n    return returns_list\ndef worker(num):   \n    tmp_output = len(all_combinations(num))\n    return tmp_output\nif __name__ =='__main__':\n    pool = mp.Pool(8)\n    num_list = range(24)\n    output_list2 = pool.map(worker, num_list)   \n    pool.close()\n    pool.join       \nelapsed = (time.clock() - start)\nresults = output_list\nprint elapsed\n</code></pre>\n\n<p>This is what I was using as the non-multiprocessing case:</p>\n\n<pre><code>import time\nimport itertools\nstart = time.clock()\nprocesses = []\ndef all_combinations(count_arg):\n    returns_list = []\n    for i in range(1,count_arg+1):\n        tmp_comb = list(itertools.combinations(range(0,count_arg),i))\n        for tmp_tup in tmp_comb:\n            returns_list.append(tmp_tup)\n    return returns_list\n\ndef worker(num,output):\n    \"\"\"thread worker function\"\"\"\n    tmp_output = len(all_combinations(num))\n    return tmp_output\n\nfor i in range(24):\n    processes.append(worker(i,\"hi\"))\n\nelapsed = (time.clock() - start)\n\nprint len(processes)\nprint elapsed\n</code></pre>\n"}, {"tags": ["python", "plot", "sympy"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 8682728, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CXMvUpfcTbI/AAAAAAAAAAI/AAAAAAAAG4I/KiFM-TSb6PI/photo.jpg?sz=128", "display_name": "Dominique Fuchs", "link": "https://stackoverflow.com/users/8682728/dominique-fuchs"}, "is_accepted": true, "score": 3, "last_activity_date": 1509372065, "creation_date": 1509372065, "answer_id": 47017173, "question_id": 28077740, "link": "https://stackoverflow.com/questions/28077740/sympy-plotting-plot-strange-xlabel-position/47017173#47017173", "title": "sympy.plotting.plot strange xlabel position", "body": "<p>Sympy's implementation of matplotlib for plotting is convenient, but rather limited compared to the full matplotlib functionality. If you want to change the label location on the axis you need to access the backend <code>ax</code> object from your plot. Here's how to do that:</p>\n\n<pre><code>fig = p1._backend.fig\nax = p1._backend.ax\n\nax.xaxis.set_label_coords(0.5,0)\n\nfig.savefig('test.png')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qaGMI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qaGMI.png\" alt=\"image showing axis label centered below graph\"></a></p>\n\n<p>This will save your graph as <code>test.png</code> (see picture). If you are using a gui like jupyter you can also show the plot by calling <code>fig</code>, but in command line interfaces this will not work. I do not know any convenient way to show the plot (like <code>p1.show()</code> would) using only the sympy interface (so without importing <code>matplotlib.pyplot</code>). If you know how to use matplotlib however you can manipulate both the figure and axis objects in far more detail.</p>\n"}], "owner": {"reputation": 103, "user_id": 3538026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7eb1815d19c1add64c267222e405ff?s=128&d=identicon&r=PG&f=1", "display_name": "Milothicus", "link": "https://stackoverflow.com/users/3538026/milothicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "accepted_answer_id": 47017173, "answer_count": 1, "score": 4, "last_activity_date": 1509372065, "creation_date": 1421878011, "question_id": 28077740, "link": "https://stackoverflow.com/questions/28077740/sympy-plotting-plot-strange-xlabel-position", "title": "sympy.plotting.plot strange xlabel position", "body": "<p>When setting 'xlabel' to a string value in a plot statement in sympy, the label is placed at the far right of the graph. If the label is not set in the program, and i click on the checkmark and set the label there, it's positioned in the middle of the X axis.</p>\n\n<p>here's an example:</p>\n\n<pre><code>from sympy import sin\nfrom sympy import symbols\nfrom sympy.plotting import plot\n\nx = symbols('x')\ny = sin(x)\n\np1=plot(y,(x,0,7),xlabel=\"x data\")\np2=plot(y,(x,0,7))\n</code></pre>\n\n<p>figure 1 has the X-axis label to the far right. if you open figure 2, and click the checkmark at the top to set the label interactively, it places it correctly in the middle of the axis.</p>\n\n<p>any way to instruct the program to centre the label?</p>\n"}, {"tags": ["python", "math", "numpy", "trigonometry"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 68, "last_activity_date": 1421878158, "creation_date": 1421878158, "answer_id": 28077771, "question_id": 28077733, "link": "https://stackoverflow.com/questions/28077733/numpy-sin-function-in-degrees/28077771#28077771", "title": "numpy.sin function in degrees?", "body": "<p>You don't want to convert <em>to</em> degrees, because you already have your number (90) in degrees.  You need to convert 90 <em>from</em> degrees to radians, and you need to do it <em>before</em> you take the sine:</p>\n\n<pre><code>&gt;&gt;&gt; np.sin(np.deg2rad(90))\n1.0\n</code></pre>\n\n<p>(You can use either <code>deg2rad</code> or <code>radians</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 636, "user_id": 3255247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727fe5d4e747f49280bab38c29c69234?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Custer", "link": "https://stackoverflow.com/users/3255247/jon-custer"}, "edited": false, "score": 5, "creation_date": 1421883875, "post_id": 28077914, "comment_id": 44536699, "body": "One problem would be that it isn&#39;t vectorized while the numpy solution above is. But, that comes down to if you are using numpy or not..."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 636, "user_id": 3255247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727fe5d4e747f49280bab38c29c69234?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Custer", "link": "https://stackoverflow.com/users/3255247/jon-custer"}, "edited": false, "score": 1, "creation_date": 1421884033, "post_id": 28077914, "comment_id": 44536752, "body": "What do you mean vectorized? They both return the same number."}, {"owner": {"reputation": 636, "user_id": 3255247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727fe5d4e747f49280bab38c29c69234?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Custer", "link": "https://stackoverflow.com/users/3255247/jon-custer"}, "edited": false, "score": 6, "creation_date": 1421886710, "post_id": 28077914, "comment_id": 44537546, "body": "But the numpy functions will take a numpy array and return an array.  If you do lots of math, you should check out numpy..."}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "edited": false, "score": 2, "creation_date": 1497554124, "post_id": 28077914, "comment_id": 76139312, "body": "Yeah, NumPy is great, but sometimes it is better to avoid dependencies and go with the standard library. ^^"}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": false, "score": 16, "last_activity_date": 1421878791, "creation_date": 1421878791, "answer_id": 28077914, "question_id": 28077733, "link": "https://stackoverflow.com/questions/28077733/numpy-sin-function-in-degrees/28077914#28077914", "title": "numpy.sin function in degrees?", "body": "<p>Use the <code>math</code> module from the standard Python library:</p>\n\n<pre><code>&gt;&gt;&gt; math.sin(math.radians(90))\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 4254295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1013db655d291a4326ef931d11c1c95e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniil Ukhorskiy", "link": "https://stackoverflow.com/users/4254295/daniil-ukhorskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90572, "favorite_count": 3, "accepted_answer_id": 28077771, "answer_count": 2, "score": 47, "last_activity_date": 1421878791, "creation_date": 1421877988, "question_id": 28077733, "link": "https://stackoverflow.com/questions/28077733/numpy-sin-function-in-degrees", "title": "numpy.sin function in degrees?", "body": "<p>I'm working on a problem that has to do with calculating angles of refraction and what not. However, it seems that I'm unable to use the numpy.sin() function in degrees. I have tried to use numpy.degrees() and numpy.rad2deg().</p>\n\n<pre><code>numpy.sin(90)\n\nnumpy.degrees(numpy.sin(90))\n</code></pre>\n\n<p>Both return ~ 0.894 and ~ 51.2 respectively.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "excel", "sorting", "csv", "delimiter"], "answers": [{"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421879809, "post_id": 28077912, "comment_id": 44535122, "body": "if you think a question is a dupe you should mark it as one not use an answer from the dupe"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421879893, "post_id": 28077912, "comment_id": 44535159, "body": "How do I mark an answer as a duplicate?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421879948, "post_id": 28077912, "comment_id": 44535180, "body": "You hit close and select duplicate of .."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421880036, "post_id": 28077912, "comment_id": 44535214, "body": "just below the questin tags"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421880067, "post_id": 28077912, "comment_id": 44535226, "body": "I do not have enough points to do this."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421880103, "post_id": 28077912, "comment_id": 44535249, "body": "If you paste the link into the comments it will be linked, there is 10 more points!"}, {"owner": {"reputation": 13, "user_id": 4237580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da10777641fded933987261c5b64b32?s=128&d=identicon&r=PG&f=1", "display_name": "ImYu", "link": "https://stackoverflow.com/users/4237580/imyu"}, "edited": false, "score": 0, "creation_date": 1421880626, "post_id": 28077912, "comment_id": 44535474, "body": "@RobertJacobs Hello , I also tried that but it wouldnt sort the average and also the name at the same time."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1421879087, "last_edit_date": 1495542510, "creation_date": 1421878779, "answer_id": 28077912, "question_id": 28077690, "link": "https://stackoverflow.com/questions/28077690/sorting-2-columns-at-once/28077912#28077912", "title": "Sorting 2 columns at once", "body": "<p>Already asked an answered. See <a href=\"https://stackoverflow.com/questions/4233476/sort-a-list-by-multiple-attributes\">Sort a list by multiple attributes?</a></p>\n\n<p>Also Both list.sort() and sorted() accept a reverse parameter with a boolean value. </p>\n\n<p>One answer from the link</p>\n\n<pre><code>import operator\ns = sorted(file, key = operator.itemgetter(1, 2),reverse=True)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4237580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da10777641fded933987261c5b64b32?s=128&d=identicon&r=PG&f=1", "display_name": "ImYu", "link": "https://stackoverflow.com/users/4237580/imyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "closed_date": 1421879995, "answer_count": 1, "score": 0, "last_activity_date": 1421965297, "creation_date": 1421877764, "last_edit_date": 1421965297, "question_id": 28077690, "link": "https://stackoverflow.com/questions/28077690/sorting-2-columns-at-once", "closed_reason": "Duplicate", "title": "Sorting 2 columns at once", "body": "<p>Im trying to sort these data in :\n- in alphabetical order with each person's highest score for the tests\n- by the highest score</p>\n"}, {"tags": ["python", "ruby", "hadoop", "mapreduce", "hadoop-streaming"], "answers": [{"tags": [], "owner": {"reputation": 3667, "user_id": 4233586, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8936a9f028cde238474cfae506a7ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "yurgis", "link": "https://stackoverflow.com/users/4233586/yurgis"}, "is_accepted": true, "score": 0, "last_activity_date": 1421884817, "last_edit_date": 1421884817, "creation_date": 1421879116, "answer_id": 28077973, "question_id": 28077686, "link": "https://stackoverflow.com/questions/28077686/how-to-map-reduce-with-sum-and-max-date/28077973#28077973", "title": "How to map/reduce with sum and max date?", "body": "<p>All you need is to put date and count into a pair &lt;date,count&gt; and emit it as a value from your mapper. Then in the reducer extract date and count from the pair value. Sum counts as you did already, and track the max date across input values (per key).</p>\n"}], "owner": {"reputation": 1556, "user_id": 691816, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/07a1c91639f297f3dbe8cb82f87ac961?s=128&d=identicon&r=PG", "display_name": "Edward J. Stembler", "link": "https://stackoverflow.com/users/691816/edward-j-stembler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "accepted_answer_id": 28077973, "answer_count": 1, "score": 0, "last_activity_date": 1421940079, "creation_date": 1421877739, "last_edit_date": 1421940079, "question_id": 28077686, "link": "https://stackoverflow.com/questions/28077686/how-to-map-reduce-with-sum-and-max-date", "title": "How to map/reduce with sum and max date?", "body": "<p>I have a file I need map/reduced where the output needs the sum and the max of a date.  I have the sum part working, however, I'm not sure how to include the max date as part of the reduced output.</p>\n\n<p>The input data looks something like this:</p>\n\n<pre><code>ID1,  ID2, date,                count\n3000, 001, 2014-12-30 18:00:00, 2\n3000, 001, 2015-01-01 10:00:00, 1\n3000, 002, 2014-11-18 12:53:00, 5\n3000, 002, 2014-12-20 20:14:00, 3\n</code></pre>\n\n<p>My mapper concatenates ID1 + ID2 so that they're grouped. Its output looks like this:</p>\n\n<pre><code>key (ID1|ID2), value (count)\n3000|001,      2\n3000|001,      1\n3000|002,      5\n3000|002,      3\n</code></pre>\n\n<p>The reducer output looks like this:</p>\n\n<pre><code>key (ID1|ID2), value (sum)\n3000|001,      3\n3000|002,      8\n</code></pre>\n\n<p>What I really need, is output like this:</p>\n\n<pre><code>key (ID1|ID2), value (sum), date (max)\n3000|001,      3,           2015-01-01 10:00:00\n3000|002,      8,           2014-12-20 20:14:00\n</code></pre>\n\n<p>The mapper and reducer are written in Ruby, however, I'll take a working example written in Python (I'll translate it to Ruby).</p>\n\n<p>Here's mapper code:</p>\n\n<pre><code>require 'csv'\n\npattern = File.join(File.expand_path('data', File.dirname(__FILE__)), '*.txt')\n\nDir.glob(pattern).each do |file|\n  CSV.foreach(file, {col_sep: \"\\t\", headers: false}) do |row|\n    puts [\n           \"#{row[6]}|#{row[3].rjust(8, '0')}\", # key = ID1 | ID2\n           row[7] # value = count\n         ].join(\"\\t\")\n    end\nend\n</code></pre>\n\n<p>And the reducer:</p>\n\n<pre><code>prev_key  = nil\nkey_total = 0\n\nARGF.each do |line|\n  line = line.chomp\n  next unless line\n\n  (key, value) = line.split(\"\\t\")\n\n  # check for new key\n  if prev_key &amp;&amp; key != prev_key &amp;&amp; key_total &gt; 0\n\n    # output total for previous key\n    puts [prev_key, key_total].join(\"\\t\")\n\n    # reset key total for new key\n    prev_key  = key\n    key_total = 0\n\n  elsif !prev_key\n    prev_key = key\n\n  end\n\n  # add to count for this current key\n  key_total += value.to_i\n\nend\n\n# this is to catch the final counts after all records have been received\nputs [prev_key, key_total].join(\"\\t\")\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here's the new mapper and reducer based upon the suggestion from the accepted answer:</p>\n\n<p>mapper:</p>\n\n<pre><code>require 'csv'\n\npattern = File.join(File.expand_path('data', File.dirname(__FILE__)), '*.txt')\n\nDir.glob(pattern).each do |file|\n  CSV.foreach(file, {col_sep: \"\\t\", headers: false}) do |row|\n    date_time = \"#{row[0]} #{row[1]}:00:00#{row[2]}\" # %Y-%m-%d %H:%M:%S%z\n    puts [\n             \"#{row[6]}|#{row[3].rjust(8, '0')}\", # key = ID1 | ID2\n             \"#{row[7]}|#{date_time}\", # value = count | date_time\n         ].join(\"\\t\")\n  end\nend\n</code></pre>\n\n<p>reducer:</p>\n\n<pre><code>require 'date'\n\nprev_key  = nil\nkey_total = 0\ndates = []\n\nARGF.each do |line|\n  line = line.chomp\n  next unless line\n\n  (key, values) = line.split(\"\\t\")\n  (value, date_time) = values.split('|')\n\n  # check for new key\n  if prev_key &amp;&amp; key != prev_key &amp;&amp; key_total &gt; 0\n\n    # output total for previous key\n    puts [prev_key.split('|'), key_total, dates.max].join(\"\\t\")\n\n    # reset key total for new key\n    prev_key  = key\n    key_total = 0\n\n    # reset dates array for new key\n    dates.clear\n\n  elsif !prev_key\n    prev_key = key\n\n  end\n\n  # add date to array for this current key\n  dates &lt;&lt; DateTime.strptime(date_time, '%Y-%m-%d %H:%M:%S%z')\n\n  # add to count for this current key\n  key_total += value.to_i\n\nend\n\n# this is to catch the final counts after all records have been received\nputs [prev_key.split('|'), key_total, dates.max].join(\"\\t\") \n</code></pre>\n"}, {"tags": ["python", "artificial-intelligence", "genetic-algorithm"], "comments": [{"owner": {"reputation": 589, "user_id": 2560807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2Jok.jpg?s=128&g=1", "display_name": "OnABauer", "link": "https://stackoverflow.com/users/2560807/onabauer"}, "edited": false, "score": 0, "creation_date": 1421913942, "post_id": 28077630, "comment_id": 44545529, "body": "Just a minor note. You mention genetic programming a few times when I think you mean genetic algorithms. The two are quite different concepts and it doesn&#39;t look like you use genetic programming at all."}, {"owner": {"reputation": 589, "user_id": 2560807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2Jok.jpg?s=128&g=1", "display_name": "OnABauer", "link": "https://stackoverflow.com/users/2560807/onabauer"}, "edited": false, "score": 0, "creation_date": 1421914106, "post_id": 28077630, "comment_id": 44545598, "body": "How is your program not working? What results are you getting?"}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1421938048, "post_id": 28077630, "comment_id": 44559571, "body": "The most glaring problem is that your machine for operations (from_genome_to_ai) seems incapable of producing anything useful for any purpose. There are other things that severely limit readability: too few docstrings and the ordering of the functions which seems nearly random."}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1421958905, "post_id": 28077630, "comment_id": 44572185, "body": "@msw I added some docstrings, it would be nice of you to tell me how to order the functions better and how to improve  <code>from_genome_to_ai </code>."}, {"owner": {"reputation": 4282, "user_id": 1092746, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG", "display_name": "Novak", "link": "https://stackoverflow.com/users/1092746/novak"}, "edited": false, "score": 0, "creation_date": 1422219944, "post_id": 28077630, "comment_id": 44654580, "body": "Can you please describe in prose what your algorithm is trying to do?  In more detail than, &quot;Trying to play tic tac toe.&quot;  For instance, what is your chromosome meant to represent, what is your fitness function, how does your mutation work, etc?  I will be happy to try and help, because I have a good working knowledge of GAs and AI, but reading through a code dump is... inefficient."}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 4282, "user_id": 1092746, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG", "display_name": "Novak", "link": "https://stackoverflow.com/users/1092746/novak"}, "edited": false, "score": 0, "creation_date": 1422221033, "post_id": 28077630, "comment_id": 44654953, "body": "@Novak I added in the question the details you asked, I hope they are clear, if you need more informations fell free to ask."}, {"owner": {"reputation": 4282, "user_id": 1092746, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG", "display_name": "Novak", "link": "https://stackoverflow.com/users/1092746/novak"}, "edited": false, "score": 0, "creation_date": 1422223602, "post_id": 28077630, "comment_id": 44655781, "body": "And how is that reduce_by_all_functions() being used?  I see that it takes a board and a chromosome and returns a number.  How is that number used, what is it meant to represent, and... why is it being returned modulo 9?"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 4282, "user_id": 1092746, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG", "display_name": "Novak", "link": "https://stackoverflow.com/users/1092746/novak"}, "edited": false, "score": 0, "creation_date": 1422225000, "post_id": 28077630, "comment_id": 44656220, "body": "@Novak I tried to answer, perhaps the from_genome_to_ai functions is the broken part of the programme?"}], "answers": [{"comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1422286662, "post_id": 28142621, "comment_id": 44678089, "body": "Excellent answer, I really enjoyed reading it, thanks."}], "tags": [], "owner": {"reputation": 4282, "user_id": 1092746, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG", "display_name": "Novak", "link": "https://stackoverflow.com/users/1092746/novak"}, "is_accepted": true, "score": 6, "last_activity_date": 1422230783, "last_edit_date": 1495539834, "creation_date": 1422226981, "answer_id": 28142621, "question_id": 28077630, "link": "https://stackoverflow.com/questions/28077630/genetic-programming-for-simple-games-feasible-for-non-experts/28142621#28142621", "title": "Genetic programming for simple games, feasible for non-experts?", "body": "<p>First and foremost, I am obligated to say that Tic Tac Toe is really too simple a problem to reasonably attack with a genetic program.  You simply don't need the power of a GP to win Tic Tac Toe; you can solve it with a brute force lookup table, or a simple game tree.</p>\n\n<p>That said, if I understand correctly, your basic notion is this:</p>\n\n<p>1)  Create chromosomes of length 8, where each gene is an arithmetic operation, and the 8-gene chromosome acts on each board as a board evaluation function.  That is, a chromosome takes in a board representation, and spits out a number representing the goodness of that board. </p>\n\n<p>It's not perfectly clear that this is what you're doing, because your board representations are each 9 integers (1, 2, 3 only) but your examples are given in terms of the \"winning triples\" which are 2 integers (0 through 8).</p>\n\n<p>2)  Start the AI up and, on the AI's turn it should get a list of all legal moves, evaluate the board per its chromosome for each legal move and... take that number, modulo 9, and use that as the next move?  Surely there's some code in there to handle the case where that move is illegal....</p>\n\n<p>3)  Let a bunch of these chromosome representations either play a standard implementation, or play each other, and determine the fitness based on the number of wins. </p>\n\n<p>4)  Once a whole generation of chromosomes has been evaluated, create a new generation.  It's not clear to me how you are selecting the parents from the pool, but once the parents are selected, a child is produced by just taking individual genes from the parents by an 80-20 rule. </p>\n\n<p>Your overall high level strategy is sound, but there are a lot of conceptual and implementation flaws in the execution.  First, let's talk about fully observable games and simple ways to make AIs for them.  If the game is very simple (such as Tic Tac Toe) you can simply make a brute force minimax game tree, <a href=\"https://stackoverflow.com/questions/9388474/how-to-code-simple-ai-for-a-windows-phone-board-game/9388582#9388582\">such as this</a>.  TTT is simple enough that even your cell phone can go all the way to the bottom of the tree very quickly.  You can even solve it by brute force with a look up table:  Just make a list of all board positions and the response to each one. </p>\n\n<p>When the games get larger-- think checkers, chess, go-- that is no longer true, and one of the ways around this is to develop what's called a board evaluation function.  It is a function which takes a board position and returns a number, usually with higher being better for one player and lower being better for the other.  One then executes a search to certain acceptable depth and aims for the highest (say) board evaluation function.  </p>\n\n<p>This begs the question:  How do we come up with the board evaluation function?  Originally, one asked experts at the game to develop these function for you.  There is a great <a href=\"http://72.11.254.101/Library/1999/Evolving_NN_Checkers.pdf\" rel=\"nofollow noreferrer\">paper</a> by Chellapilla and Fogel which is similar to what you want to do for checkers-- they use neural networks to determine the board evaluation functions, and, critically, these neural networks are encoded as genomes and evolved.  They are then used in search depth 4 trees.  The end results are very competitive against human players.  </p>\n\n<p>You should read that paper.  </p>\n\n<p>What you are trying to do, I think, is very similar, except instead of coding a neural network as a chromosome, you're trying to code up a very restricted algebraic expression, always of the form:</p>\n\n<pre><code>((((((((arg1 op1 arg2) op2 arg3) op3 arg4) op4 arg5) op5 arg6) op6 arg7) op7 arg8) op8 arg)\n</code></pre>\n\n<p>... and then you're using it mod 9 to pick a move.  </p>\n\n<p>Now let's talk about genetic algorithms, genetic programs, and the creation of new children.  The whole idea in evolutionary techniques is to combine the best attributes of two hopefully-good solutions in the hopes that they will be even better, without getting stuck in a local maximum.  </p>\n\n<p>Generally, this is done by touranment selection, crossover, and mutation.  Tournament selection means selecting the parents proportionally to their fitness.  Crossover means dividing the chromosomes into two usually contiguous regions and taking one region from one parent and the other region from the other parent.  (Why contiguous?  Because <a href=\"http://en.wikipedia.org/wiki/Holland%27s_schema_theorem\" rel=\"nofollow noreferrer\">Holland's Schema Theorem</a>)  Mutation means occasionally changing a gene, as a means of maintaining population diversity. </p>\n\n<p>Now let's look at what you're doing:</p>\n\n<p>1)  Your board evaluation function-- the function that your chromosome turns into, which acts on the board positions-- is highly restricted and very arbitrary.  There's not much rhyme or reason to assigning 1, 2, and 3 as those numbers, but that might possibly be okay.  The bigger flaw is that your functions are a terribly restricted part of the overall space of functions.  They are always the same length, and the parse tree always looks the same. </p>\n\n<p>There's no reason to expect anything useful to be in this restrictive space.  What's needed is to come up with a scheme which allows for a much more general set of parse trees, including crossover and mutation schemes.  You should look up some papers or books by <a href=\"http://en.wikipedia.org/wiki/John_Koza\" rel=\"nofollow noreferrer\">John Koza</a> for ideas on this topic.    </p>\n\n<p>Note that Chellapilla and Fogel have fixed forms of functions as well, but their chromosomes are substantially larger than their board representations.  A checkers board has 32 playable spaces, and each space can have 5 states.  But their neural network had some 85 nodes, and the chromosome comprised the connection weights of those nodes-- hundreds, if not thousands, of values.  </p>\n\n<p>2)  Then there's this whole modulo 9 thing.  I don't understand why you're doing that.  Don't do that.  You're just scrambling whatever information might be in your chromosomes.  </p>\n\n<p>3)  Your function to make new children is bad.  Even as a genetic algorithm, you should be dividing the chromosomes in two (at random points) and taking part of one parent from one side, and the other part from the other parent on the other side.  For genetic programming, which is what you're doing, there are analogous strategies for doing crossovers on parse trees.  See Koza.  </p>\n\n<p>You must include mutation, or you will almost certainly get sub-optimal results. </p>\n\n<p>4a)  If you evaluate the fitness by playing against a competent AI, then realize that your chromosomes will never, ever win.  They will lose, or they will draw.  A competent AI will never lose.  Moreover, it is likely that your AIs will lose all the time and initial generations may all come out as equally (catastrophically) poor players.  It's not impossible to get yourelf out of that hole, but it will be hard. </p>\n\n<p>4b)  On the other hand, if, like Chellapilla and Fogel, you play the AIs against them selves, then you'd better make certain that the AIs can play either X or O.  Otherwise you're never going to make any progress at all.</p>\n\n<p>5)  Finally, even if all these concerns are addressed, I'm not convinced this will get great results.  Note that the checkers example searches to a depth of 4, which is not a big horizon in a game of checkers that might last 20 or 30 moves.  </p>\n\n<p>TTT can only ever last 9 moves.  </p>\n\n<p>If you don't do a search tree and just go for the highest board evaluation function, you might get something that works.  You might not.  I'm not sure.  If you search to depth 4, you might as well skip to a full search to level 9 and do this conventionally.  </p>\n"}], "owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 3, "closed_date": 1422286248, "accepted_answer_id": 28142621, "answer_count": 1, "score": 3, "last_activity_date": 1422230783, "creation_date": 1421877471, "last_edit_date": 1495540331, "question_id": 28077630, "link": "https://stackoverflow.com/questions/28077630/genetic-programming-for-simple-games-feasible-for-non-experts", "closed_reason": "Needs more focus", "title": "Genetic programming for simple games, feasible for non-experts?", "body": "<p>I have been seriously trying to create a <a href=\"http://en.wikipedia.org/wiki/Genetic_programming\" rel=\"nofollow noreferrer\">genetic program</a> that will evolve to play tic-tac-toe in an acceptable way. I'm using the genome to generate a function that will then take the board as input and output the result... But it's not working.</p>\n\n<p>Can this program be written in less than 500 lines of code (including blank lines and documentation)? Perhaps my problem is that I'm generating AIs that are too simple.</p>\n\n<h2>My research</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/5626778/a-genetic-algorithm-for-tic-tac-toe\">A Genetic Algorithm for Tic-Tac-Toe</a> (very different from my approach).</li>\n<li><a href=\"http://www.tropicalcoder.com/GeneticAlgorithm.htm\" rel=\"nofollow noreferrer\">http://www.tropicalcoder.com/GeneticAlgorithm.htm</a> (too abstract).</li>\n<li>In quite a good number of websites there are references to 'neural networks'. Are they really required?</li>\n</ul>\n\n<h2>Important disclaimers</h2>\n\n<ul>\n<li>This is NOT homework of any kind, just a personal project for the sake of learning something cool.</li>\n<li>This is NOT a 'give me the codz plz', I am looking for high level suggestions. I explicitly don't want ready-made solutions as the answers.</li>\n</ul>\n\n<p>Please give me some help and insight into this 'genetic programming' concept applied to this specific simple problem.</p>\n\n<p>@OnABauer: I think that I am using <strong>genetic programming</strong> because quoting Wikipedia</p>\n\n<blockquote>\n  <p>In artificial intelligence, genetic programming (GP) is an\n  evolutionary algorithm-based methodology inspired by biological\n  evolution to find computer programs that perform a user-defined task.</p>\n</blockquote>\n\n<p>And I am trying to generate a program (in this case function) that will perform the task of playing tic-tac-toe, you can see it because the output of the most important <code>genetic_process</code> function is a genome that will then be converted to a function, thus if I understood correctly this is genetic programming because the output is a function.</p>\n\n<h2>Program introspection and possible bugs/problems</h2>\n\n<p>The code runs with no errors nor crashes. The problem is that in the end what I get is an incompetent AI, that will attempt to make illegal move and be punished with losing each and every time. It is no better than random.</p>\n\n<p>Possibly it is because my AI function is so simple: just making calculations on the stored values of the squares with no conditionals.</p>\n\n<h2>High level description</h2>\n\n<ul>\n<li>What is your chromosome meant to represent?</li>\n</ul>\n\n<p>My cromosome rapresents a list of functions that will then be used to reduce over the array of the board stored as trinary. OK let me make an example:\n* Cromosome is: amMMMdsa (length of cromosome must be 8). \n   1. The first step is converting this to functions following the lookup at the top called <code>LETTERS_TO_FUNCTIONS</code>, this give the functions: <code>[op.add,op.mul,op.mod,op.mod,op.mod,op.floordiv,op.sub,op.add]</code></p>\n\n<ol start=\"2\">\n<li><p>The second step is converting the board to a trinary rapresentation. So let's say the board is <code>\"OX  XOX  \"</code> we will get [2, 3, 1, 1, 3, 2, 3, 1, 1]</p></li>\n<li><p>The third step is reducing the trinary raprentation using the functions obtained above. That is best explained by the function down below:</p>\n\n<pre><code>def reduce_by_all_functions(numbers_list,functions_list):\n    \"\"\"\n    Applies all the functions in a list to a list of numbers.\n\n    &gt;&gt;&gt; reduce_by_all_functions([3,4,6],[op.add,op.sub])\n    1\n\n    &gt;&gt;&gt; reduce_by_all_functions([6,2,4],[op.mul,op.floordiv])\n    3\n    \"\"\"\n\n    if len(functions_list) != len(numbers_list) - 1:\n        raise ValueError(\"The functions must be exactly one less than the numbers\")\n    result = numbers_list[0]\n    for index,n in enumerate(numbers_list[1:]):\n        result = functions_list[index](result,n)\n    return result\n</code></pre>\n\n<p>Thus yielding the result of: <code>0</code> that means that the ai decided to go in the first square</p>\n\n<ul>\n<li>What is your fitness function?</li>\n</ul></li>\n</ol>\n\n<p>Luckly this is easy to answer.</p>\n\n<pre><code>def ai_fitness(genome,accuracy):\n    \"\"\"\n    Returns how good an ai is by letting it play against a random ai many times.\n    The higher the value, the best the ai\n    \"\"\"\n    ai = from_genome_to_ai(genome)\n    return decide_best_ai(ai,random_ai,accuracy)\n</code></pre>\n\n<ul>\n<li>How does your mutation work?</li>\n</ul>\n\n<p>The son ereditates 80% of the genes from the father and 20% of genes from the mother. There is no kind of random mutation besides that.</p>\n\n<blockquote>\n  <p>And how is that reduce_by_all_functions() being used? I see that it\n  takes a board and a chromosome and returns a number. How is that\n  number used, what is it meant to represent, and... why is it being\n  returned modulo 9?</p>\n</blockquote>\n\n<p><code>reduce_by_all_functions()</code> is used to actually apply the functions previously obtained by the cromosome. The number is the square the ai wants to take. It is modulo 9 because it must be between 0 and 8 because the board is 9 spaces.</p>\n\n<p>My code so far:</p>\n\n<pre><code>import doctest\nimport random\nimport operator as op\n\nSPACE = ' '\nMARK_OF_PLAYER_1 = \"X\"\nMARK_OF_PLAYER_2 = \"O\"\nEMPTY_MARK = SPACE\n\nBOARD_NUMBERS = \"\"\"\nThe moves are numbered as follows:\n\n         0 | 1 | 2\n         ---------\n         3 | 4 | 5\n         ---------\n         6 | 7 | 8\n\"\"\"\n\nWINNING_TRIPLETS = [ (0,1,2), (3,4,5), (6,7,8),\n                     (0,3,6), (1,4,7), (2,5,8),\n                     (0,4,8), (2,4,6) ]\n\nLETTERS_TO_FUNCTIONS = {\n    'a': op.add,\n    'm': op.mul,\n    'M': op.mod,\n    's': op.sub,\n    'd': op.floordiv\n}\n\ndef encode_board_as_trinary(board):\n    \"\"\"\n    Given a board, replaces the symbols with the numbers\n    1,2,3 in order to make further processing easier.\n\n    &gt;&gt;&gt; encode_board_as_trinary(\"OX  XOX  \")\n    [2, 3, 1, 1, 3, 2, 3, 1, 1]\n\n    &gt;&gt;&gt; encode_board_as_trinary(\"   OOOXXX\")\n    [1, 1, 1, 2, 2, 2, 3, 3, 3]\n    \"\"\"\n    board = ''.join(board)\n    board = board.replace(MARK_OF_PLAYER_1,'3')\n    board = board.replace(MARK_OF_PLAYER_2,'2')\n    board = board.replace(EMPTY_MARK,'1')\n    return list((int(square) for square in board))\n\ndef create_random_genome(length):\n    \"\"\"\n    Creates a random genome (that is a sequences of genes, from which\n    the ai will be generated. It consists of randoom letters taken\n    from the keys of LETTERS_TO_FUNCTIONS\n\n    &gt;&gt;&gt; random.seed(\"EXAMPLE\")\n\n    # Test is not possible because even with the same\n    # seed it gives different results each run...\n    \"\"\"\n    letters = [letter for letter in LETTERS_TO_FUNCTIONS]\n    return [random.choice(letters) for _ in range(length)]\n\ndef reduce_by_all_functions(numbers_list,functions_list):\n    \"\"\"\n    Applies all the functions in a list to a list of numbers.\n\n    &gt;&gt;&gt; reduce_by_all_functions([3,4,6],[op.add,op.sub])\n    1\n\n    &gt;&gt;&gt; reduce_by_all_functions([6,2,4],[op.mul,op.floordiv])\n    3\n    \"\"\"\n\n    if len(functions_list) != len(numbers_list) - 1:\n        raise ValueError(\"The functions must be exactly one less than the numbers\")\n    result = numbers_list[0]\n    for index,n in enumerate(numbers_list[1:]):\n        result = functions_list[index](result,n)\n    return result\n\ndef from_genome_to_ai(genome):\n    \"\"\"\n    Creates an AI following the rules written in the genome (the same as DNA does).\n    Each letter corresponds to a function as written in LETTERS_TO_FUNCTIONS.\n    The resulting ai will reduce the board using the functions obtained.\n\n    &gt;&gt;&gt; ai = from_genome_to_ai(\"amMaMMss\")\n\n    &gt;&gt;&gt; ai(\"XOX   OXO\")\n    4\n    \"\"\"\n    functions = [LETTERS_TO_FUNCTIONS[gene] for gene in genome]\n    def ai(board):\n        return reduce_by_all_functions(encode_board_as_trinary(board),functions) % 9\n    return ai\n\ndef take_first_empty_ai(board):\n    \"\"\"\n    Very simple example ai for tic-tac-toe\n    that takes the first empty square.\n\n    &gt;&gt;&gt; take_first_empty_ai(' OX O XXO')\n    0\n\n    &gt;&gt;&gt; take_first_empty_ai('XOX O XXO')\n    3\n    \"\"\"\n    return board.index(SPACE)\n\ndef get_legal_moves(board):\n    \"\"\"\n    Given a tic-tac-toe board returns the indexes of all\n    the squares in which it is possible to play, i.e.\n    the empty squares.\n\n    &gt;&gt;&gt; list(get_legal_moves('XOX O XXO'))\n    [3, 5]\n\n    &gt;&gt;&gt; list(get_legal_moves('X   O XXO'))\n    [1, 2, 3, 5]\n    \"\"\"\n    for index,square in enumerate(board):\n        if square == SPACE:\n            yield index\n\ndef random_ai(board):\n    \"\"\"\n    The simplest possible tic-tac-toe 'ai', just\n    randomly choses a random move.\n\n    &gt;&gt;&gt; random.seed(\"EXAMPLE\")\n\n    &gt;&gt;&gt; random_ai('X   O XXO')\n    3\n    \"\"\"\n    legal_moves = list(get_legal_moves(board))\n    return random.choice(legal_moves)\n\n\ndef printable_board(board):\n    \"\"\"\n    User Interface function:\n    returns an easy to understand representation\n    of the board.\n\n    \"\"\"\n    return \"\"\"\n               {} | {} | {}\n               ---------\n               {} | {} | {}\n               ---------\n               {} | {} | {}\"\"\".format(*board)\n\n\ndef human_interface(board):\n    \"\"\"\n    Allows the user to play tic-tac-toe.\n    Shows him the board, the board numbers and then asks\n    him to select a move.\n    \"\"\"\n    print(\"The board is:\")\n    print(printable_board(board))\n    print(BOARD_NUMBERS)\n    return(int(input(\"Your move is: \")))\n\ndef end_result(board):\n    \"\"\"\n    Evaluates a board returning:\n\n    0.5 if it is a tie\n    1 if MARK_OF_PLAYER_1 won # default to 'X'\n    0 if MARK_OF_PLAYER_2 won # default to 'O'\n\n    else if nothing of the above applies return None\n\n    &gt;&gt;&gt; end_result('XXX   OXO')\n    1\n\n    &gt;&gt;&gt; end_result(' O X X  O')\n    None\n\n    &gt;&gt;&gt; end_result('OXOXXOXOO')\n    0.5\n\n    \"\"\"\n\n    if SPACE not in board:\n        return 0.5\n    for triplet in WINNING_TRIPLETS:\n        if all(board[square] == 'X'  for square in triplet):\n            return 1\n        elif all(board[square] == 'O'  for square in triplet):\n            return 0\n\ndef game_ended(board):\n    \"\"\"\n    Small syntactic sugar function to if the game is ended\n    i.e. no tie nor win occured\n    \"\"\"\n    return end_result(board) is not None\n\ndef play_ai_tic_tac_toe(ai_1,ai_2):\n    \"\"\"\n    Plays a game between two different ai-s, returning the result.\n    It should be noted that this function can be used also to let the user\n    play against an ai, just call it like: play_ai_tic_tac_toe(random_ai,human_interface)\n\n    &gt;&gt;&gt; play_ai_tic_tac_toe(take_first_empty_ai,take_first_empty_ai)\n    1\n    \"\"\"\n\n    board = [SPACE for _ in range(9)]\n    PLAYER_1_WIN = 1\n    PLAYER_1_LOSS = 0\n    while True:\n        for ai,check in ( (ai_1,MARK_OF_PLAYER_1), (ai_2,MARK_OF_PLAYER_2) ):\n            move = ai(board)\n\n            # If move is invalid you lose\n            if board[move] != EMPTY_MARK:\n                if check == MARK_OF_PLAYER_1:\n                    return PLAYER_1_LOSS\n                else:\n                    return PLAYER_1_WIN\n\n            board[move] = check\n            if game_ended(board):\n                return end_result(board)\n\ndef loop_play_ai_tic_tac_toe(ai_1,ai_2,games_number):\n    \"\"\"\n    Plays games number games between ai_1 and ai_2\n    \"\"\"\n    return sum(( play_ai_tic_tac_toe(ai_1,ai_2)) for _ in range(games_number))\n\ndef decide_best_ai(ai_1,ai_2,accuracy):\n    \"\"\"\n    Returns the number of times the first ai is better than the second:\n    ex. if the ouput is 1.4, the first ai is 1.4 times better than the second.\n\n    &gt;&gt;&gt; decide_best_ai(take_first_empty_ai,random_ai,100) &gt; 0.80\n    True\n    \"\"\"\n    return sum((loop_play_ai_tic_tac_toe(ai_1,ai_2,accuracy//2),\n               loop_play_ai_tic_tac_toe(ai_2,ai_1,accuracy//2))) / (accuracy // 2)\n\ndef ai_fitness(genome,accuracy):\n    \"\"\"\n    Returns how good an ai is by lettting it play against a random ai many times.\n    The higher the value, the best the ai\n    \"\"\"\n    ai = from_genome_to_ai(genome)\n    return decide_best_ai(ai,random_ai,accuracy)\n\ndef sort_by_fitness(genomes,accuracy):\n    \"\"\"\n    Syntactic sugar for sorting a list of genomes based on the fitness.\n    High accuracy will yield a more accurate ordering but at the cost of more\n    computation time.\n    \"\"\"\n    def fit(genome):\n        return ai_fitness(genome,accuracy)\n\n    return list(sorted(genomes, key=fit, reverse=True))\n    # probable bug-fix because high fitness means better individual\n\ndef make_child(a,b):\n    \"\"\"\n    Returns a mix of cromosome a and cromosome b.\n    There is a bias towards cromosome a because I think that\n    a too weird soon is going to be bad.\n    \"\"\"\n    result = []\n    for index,char_a in enumerate(a):\n        char_b = b[index]\n        if random.random() &gt; 0.8:\n            result.append(char_a)\n        else:\n            result.append(char_b)\n    return result\n\ndef genetic_process(population_size,generation_number,accuracy,elite_number):\n    \"\"\"\n    A full genetic process yielding a good tic-tac-toe ai. # not yet\n\n    @ Parameters:\n         @ population_size: the number of ai-s that you allow to be alive\n              at once\n         @ generation_number: the number of generations of the gentetic\n         @ accuracy: how well the ai-s are ordered,\n              low accuracy means that a good ai may be considered bad or\n              viceversa. High accuarcy is computationally costly\n         @ elite_number: the number of best programmes that get to reproduce\n              at each generation.\n\n    @ Return:\n          @ A genome for a tic-tac-toe ai\n    \"\"\"\n    pool = [create_random_genome(9-1) for _ in range(population_size)]\n    for generation in range(generation_number):\n        best_individuals = sort_by_fitness(pool,accuracy)[:elite_number]\n        the_best = best_individuals[0]\n        for good_individual in best_individuals:\n            pool.append(make_child(the_best,good_individual))\n        pool = sort_by_fitness(pool,accuracy)[:population_size]\n    return the_best\n\ndef _test():\n    \"\"\"\n    Tests all the script by running the\n\n    &gt;&gt;&gt; 2 + 2 # code formatted like this\n    4\n    \"\"\"\n    doctest.testmod()\n\ndef main():\n    \"\"\"\n    A simple demo to let the user play against a genetic opponent.\n    \"\"\"\n    print(\"The genetic ai is being created... please wait.\")\n    genetic_ai = from_genome_to_ai(genetic_process(50,4,40,25))\n    play_ai_tic_tac_toe(genetic_ai,human_interface)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 2, "creation_date": 1421877696, "post_id": 28077623, "comment_id": 44534233, "body": "Can you include the file content and also the expected output?"}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 1, "creation_date": 1421877703, "post_id": 28077623, "comment_id": 44534237, "body": "Can you provide an example, of the line format? No one can help you without knowing anything about the data."}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 4, "creation_date": 1421877734, "post_id": 28077623, "comment_id": 44534252, "body": "You haven&#39;t even tried reading from the file yet ... what problem have you run into that can&#39;t be solved by reading the documentation?"}, {"owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "edited": false, "score": 0, "creation_date": 1421877856, "post_id": 28077623, "comment_id": 44534309, "body": "<code>next(g); second_line = next(g); for char in second_line: ...</code>"}, {"owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 5, "creation_date": 1421878146, "post_id": 28077623, "comment_id": 44534462, "body": "Have you read <a href=\"https://docs.python.org/3.4/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">the tutorial on reading files in Python</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1421880543, "last_edit_date": 1421880543, "creation_date": 1421879204, "answer_id": 28077992, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems/28077992#28077992", "title": "Python reading file problems", "body": "<p>To count the occurrences of each letter I used a dictionary instead of a list. With a dictionary, you can access each letter count later on.</p>\n\n<pre><code>d = {}\ng = open(\"grades_single.txt\", \"r\")\nfor i,line in enumerate(g):\n    if i == 1:\n        holder = list(line.strip()) \ng.close()\n\nfor letter in holder:\n    d[letter] = holder.count(letter)\n\nfor key,value in d.iteritems():\n    print(\"{},{}\").format(key,value)\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>A,9\nC,15\nB,15\nE,4\nD,5\nG,1\nF,1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "is_accepted": false, "score": 0, "last_activity_date": 1421880349, "last_edit_date": 1421880349, "creation_date": 1421879356, "answer_id": 28078027, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems/28078027#28078027", "title": "Python reading file problems", "body": "<pre><code>import re\n\n\n# opens the file in read mode (and closes it automatically when done)\nwith open('my_file.txt', 'r') as opened_file:\n\n    # Temporarily stores all lines of the file here.\n    all_lines_list = []\n\n    for line in opened_file.readlines():\n        all_lines_list.append(line)\n\n    # This is the selected pattern.\n    # It basically means \"match a single character from a to g\"\n    # and ignores upper or lower case\n    pattern = re.compile(r'[a-g]', re.IGNORECASE)\n\n    # Which line i want to choose (assuming you only need one line chosen)\n    line_num_i_need = 2\n\n    # (1 is deducted since the first element in python has index 0)\n    matches = re.findall(pattern, all_lines_list[line_num_i_need-1])\n\n    print('\\nMatches found:')\n    print(matches)\n    print('\\nTotal matches:')\n    print(len(matches))\n</code></pre>\n\n<p>You might want to check <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow\">regular expressions</a> in case you need some more complex pattern.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 3161417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c239c787db1c1bc555d87d3f4d71673?s=128&d=identicon&r=PG", "display_name": "RvdBerg", "link": "https://stackoverflow.com/users/3161417/rvdberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1421880387, "last_edit_date": 1421880387, "creation_date": 1421879387, "answer_id": 28078040, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems/28078040#28078040", "title": "Python reading file problems", "body": "<p>You do not read the contents of the file. To do so use the <code>.read()</code> or <code>.readlines()</code> method on your opened file. <code>.readlines()</code> reads each line in a file seperately like so: </p>\n\n<pre><code>g = open(\"grades_single.txt\",\"r\")\nfilecontent = g.readlines()\n</code></pre>\n\n<p>since it is good practice to directly close your file after opening it and reading its contents, directly follow with:</p>\n\n<pre><code>g.close()\n</code></pre>\n\n<p>another option would be:</p>\n\n<pre><code>with open(\"grades_single.txt\",\"r\") as g:\n    content = g.readlines()\n</code></pre>\n\n<p>the <code>with</code>-statement closes the file for you (so you don't need to use the <code>.close()</code>-method this way. \nSince you need the contents of the second line only you can choose that one directly:</p>\n\n<pre><code>    content = g.readlines()[1]\n</code></pre>\n\n<p><code>.readlines()</code> doesn't strip a line of is newline(which usually is: <code>\\n</code>), so you still have to do so:</p>\n\n<pre><code>    content = g.readlines()[1].strip('\\n')\n</code></pre>\n\n<p>The <code>.count()</code>-method lets you count items in a list or in a string. So you could do:</p>\n\n<pre><code>dct = {}\nfor item in content:\n    dct[item] = content.count(item)\n</code></pre>\n\n<p>this can be made more efficient by using a dictionary-comprehension:</p>\n\n<pre><code>dct = {item:content.count(item) for item in content}\n</code></pre>\n\n<p>at last you can get the highest score and print it:</p>\n\n<pre><code>highest_score = max(dct.values())\nprint(highest_score)\n</code></pre>\n\n<p><code>.values()</code> returns the values of a dictionary and max, well, returns the maximum value in a list. </p>\n\n<p>Thus the code that does what you're looking for could be:</p>\n\n<pre><code>with open(\"grades_single.txt\",\"r\") as g:\n    content = g.readlines()[1].strip('\\n')\n\ndct = {item:content.count(item) for item in content}\n\nhighest_score = max(dct.values())\nprint(highest_score)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": 0, "last_activity_date": 1421879873, "creation_date": 1421879873, "answer_id": 28078147, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems/28078147#28078147", "title": "Python reading file problems", "body": "<pre><code>highest_score = 0\narrayList = []\nwith open(\"grades_single.txt\") as f:\n    arraylist.extend(f[1])\nprint (arrayList)\n</code></pre>\n\n<p>This will show you the second line of that file. It will extend <code>arrayList</code> then you can do whatever you want with that list.</p>\n"}, {"tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1421881885, "creation_date": 1421881885, "answer_id": 28078622, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems/28078622#28078622", "title": "Python reading file problems", "body": "<p>One can treat the first line specially (and in this case ignore it) with <code>next</code> inside <code>try: except StopIteration:</code>.  In this case, where you only want the second line, follow with another <code>next</code> instead of a <code>for</code> loop.</p>\n\n<pre><code>with open(\"grades_single.txt\") as f:\n    try:\n        next(f)  # discard 1st line\n        line = next(f)\n    except StopIteration:\n        raise ValueError('file does not even have two lines')\n\n# now use line\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4480173, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100002099471946/picture?type=large", "display_name": "Jurgen van Vossen", "link": "https://stackoverflow.com/users/4480173/jurgen-van-vossen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1421881885, "creation_date": 1421877449, "last_edit_date": 1421877896, "question_id": 28077623, "link": "https://stackoverflow.com/questions/28077623/python-reading-file-problems", "title": "Python reading file problems", "body": "<pre><code>highest_score = 0\ng = open(\"grades_single.txt\",\"r\")\narrayList = []\nfor line in highest_score:\n    if float(highest_score) &gt; highest_score:\n       arrayList.extend(line.split())\ng.close()\n\nprint(highest_score)\n</code></pre>\n\n<p>Hello, wondered if anyone could help me , I'm having problems here. I have to read in a file of which contains 3 lines. First line is no use and nor is the 3rd. The second contains a list of letters, to which I have to pull them out (for instance all the As all the Bs all the Cs all the way upto G) there are multiple letters of each. I have to be able to count how many off each through this program. I'm very new to this so please bear with me if the coding created is wrong. Just wondered if anyone could point me in the right direction of how to pull out these letters on the second line and count them. I then have to do a mathamatical function with these letters but I hope to work that out for myself. </p>\n\n<p>Sample of the data:</p>\n\n<pre><code>GTSDF60000\nADCBCBBCADEBCCBADGAACDCCBEDCBACCFEABBCBBBCCEAABCBB\n*\n</code></pre>\n"}, {"tags": ["python", "append", "pickle"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4480134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87dbf04e5020c77ab0571adcfb63038?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4480134/charlie"}, "edited": false, "score": 0, "creation_date": 1421881364, "post_id": 28078157, "comment_id": 44535795, "body": "Thank you also for the extra explanation you have provided with the code."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1421882105, "post_id": 28078157, "comment_id": 44536083, "body": "@dogwynn: Why check if the file exists if you just load to a new variable, and avoid the real issue?"}, {"owner": {"reputation": 388, "user_id": 1869370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775b33613f9c610ea2609f4473fa8d1?s=128&d=identicon&r=PG", "display_name": "dogwynn", "link": "https://stackoverflow.com/users/1869370/dogwynn"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1421885205, "post_id": 28078157, "comment_id": 44537107, "body": "@MikeMcKerns: I guess I don&#39;t know how to call pickle.load from a non-existent file. I know you can do this with DBv2 API modules (e.g. shelve), but I&#39;m not aware of a file-like object (which pickle.load requires) that can be opened in a &quot;create&quot; mode (without creating one).  Otherwise, my goal was to have a script that can be executed repeatedly from the command line, each time adding a new (name,score) tuple."}, {"owner": {"reputation": 388, "user_id": 1869370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775b33613f9c610ea2609f4473fa8d1?s=128&d=identicon&r=PG", "display_name": "dogwynn", "link": "https://stackoverflow.com/users/1869370/dogwynn"}, "reply_to_user": {"reputation": 123, "user_id": 4480134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87dbf04e5020c77ab0571adcfb63038?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4480134/charlie"}, "edited": false, "score": 0, "creation_date": 1421885455, "post_id": 28078157, "comment_id": 44537176, "body": "@Charlie: My pleasure. Always good to see another Python hacker on the books. :-)"}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 1, "creation_date": 1421888968, "post_id": 28078157, "comment_id": 44538193, "body": "@dogwynn: mode <code>ab</code> instead of <code>wb</code> will create a file if one doesn&#39;t exist, and append if one does.  Besides, I wasn&#39;t suggesting you should try to <code>load</code> from a nonexistent file -- merely pointing out that the OP&#39;s issue is more generally one of unpicking into an object that has the same name as the existing list -- and thus destroying any edits to the existing list that were made after the <code>dump</code>."}, {"owner": {"reputation": 388, "user_id": 1869370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775b33613f9c610ea2609f4473fa8d1?s=128&d=identicon&r=PG", "display_name": "dogwynn", "link": "https://stackoverflow.com/users/1869370/dogwynn"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1422018351, "post_id": 28078157, "comment_id": 44594848, "body": "@MikeMcKerns I&#39;m not sure how &#39;ab&#39; is any better than &#39;wb&#39;. They both create a file if none exists, and you can&#39;t append to a pickled object/list the way you would append to a file. The object has to be unpickled, appended to, and re-pickled. The OP&#39;s problem was that they were &quot;running the code&quot; (i.e. the whole set of code as a script), and it wasn&#39;t behaving correctly. That was because they weren&#39;t loading the extant scores before appending new scores. I addressed that."}, {"owner": {"reputation": 388, "user_id": 1869370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775b33613f9c610ea2609f4473fa8d1?s=128&d=identicon&r=PG", "display_name": "dogwynn", "link": "https://stackoverflow.com/users/1869370/dogwynn"}, "reply_to_user": {"reputation": 312, "user_id": 8932411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1462212680553448/picture?type=large", "display_name": "M. D. P", "link": "https://stackoverflow.com/users/8932411/m-d-p"}, "edited": false, "score": 0, "creation_date": 1545418103, "post_id": 28078157, "comment_id": 94625848, "body": "@M.D.P Not sure why. That error is usually associated with reading a file object open for writing. <a href=\"https://stackoverflow.com/a/44901902/1869370\">See this answer</a> for more details."}], "tags": [], "owner": {"reputation": 388, "user_id": 1869370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775b33613f9c610ea2609f4473fa8d1?s=128&d=identicon&r=PG", "display_name": "dogwynn", "link": "https://stackoverflow.com/users/1869370/dogwynn"}, "is_accepted": true, "score": 11, "last_activity_date": 1421885535, "last_edit_date": 1421885535, "creation_date": 1421879900, "answer_id": 28078157, "question_id": 28077573, "link": "https://stackoverflow.com/questions/28077573/python-appending-to-a-pickled-list/28078157#28078157", "title": "Python - appending to a pickled list", "body": "<p>You need to pull the list from your database (i.e. your pickle file) first before appending to it.</p>\n\n<pre><code>import pickle\nimport os\n\nhigh_scores_filename = 'high_scores.dat'\n\nscores = []\n\n# first time you run this, \"high_scores.dat\" won't exist\n#   so we need to check for its existence before we load \n#   our \"database\"\nif os.path.exists(high_scores_filename):\n    # \"with\" statements are very handy for opening files. \n    with open(high_scores_filename,'rb') as rfp: \n        scores = pickle.load(rfp)\n    # Notice that there's no \"rfp.close()\"\n    #   ... the \"with\" clause calls close() automatically! \n\nfirst_name = input(\"Please enter your name:\")\nscore = input(\"Please enter your score:\")\n\nhigh_scores = first_name, score\nscores.append(high_scores)\n\n# Now we \"sync\" our database\nwith open(high_scores_filename,'wb') as wfp:\n    pickle.dump(scores, wfp)\n\n# Re-load our database\nwith open(high_scores_filename,'rb') as rfp:\n    scores = pickle.load(rfp)\n\nprint(scores)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 4480134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87dbf04e5020c77ab0571adcfb63038?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4480134/charlie"}, "edited": false, "score": 0, "creation_date": 1421904546, "post_id": 28078606, "comment_id": 44542087, "body": "Thanks also for your input.  dogwynn&#39;s solution worked very well but will take on board what you&#39;ve said."}, {"owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "edited": false, "score": 0, "creation_date": 1541149891, "post_id": 28078606, "comment_id": 93125563, "body": "WHy is pickle dill here?"}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "reply_to_user": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "edited": false, "score": 1, "creation_date": 1541268406, "post_id": 28078606, "comment_id": 93161554, "body": "@DheerajMPai: because I use <code>dill</code> instead of <code>pickle</code>, so that&#39;s what I used for my solution. <code>pickle</code> also works, so instead of editing my code, I just changed the import.  It&#39;s all picking... <code>dill</code> is just better at it."}, {"owner": {"reputation": 321, "user_id": 7124174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w36uS.png?s=128&g=1", "display_name": "def_init_", "link": "https://stackoverflow.com/users/7124174/def-init"}, "edited": false, "score": 0, "creation_date": 1609232373, "post_id": 28078606, "comment_id": 115782613, "body": "@MikeMcKerns lololol"}], "tags": [], "owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "is_accepted": false, "score": 13, "last_activity_date": 1421882202, "last_edit_date": 1421882202, "creation_date": 1421881831, "answer_id": 28078606, "question_id": 28077573, "link": "https://stackoverflow.com/questions/28077573/python-appending-to-a-pickled-list/28078606#28078606", "title": "Python - appending to a pickled list", "body": "<p>If you want to write and read to the pickled file, you can call dump multiple times for each entry in your list.  Each time you dump, you append a score to the pickled file, and each time you load you read the next score.</p>\n\n<pre><code>&gt;&gt;&gt; import pickle as dill\n&gt;&gt;&gt; \n&gt;&gt;&gt; scores = [('joe', 1), ('bill', 2), ('betty', 100)]\n&gt;&gt;&gt; nscores = len(scores)\n&gt;&gt;&gt; \n&gt;&gt;&gt; with open('high.pkl', 'ab') as f:\n\u2026   _ = [dill.dump(score, f) for score in scores]\n... \n&gt;&gt;&gt; \n&gt;&gt;&gt; with open('high.pkl', 'ab') as f:\n...   dill.dump(('mary', 1000), f)\n... \n&gt;&gt;&gt; # we added a score on the fly, so load nscores+1\n&gt;&gt;&gt; with open('high.pkl', 'rb') as f:\n...     _scores = [dill.load(f) for i in range(nscores + 1)]\n... \n&gt;&gt;&gt; _scores\n[('joe', 1), ('bill', 2), ('betty', 100), ('mary', 1000)]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The reason your code was failing most likely is that you are replacing the original <code>scores</code> with the unpickled list of scores.  So if there were any new scores added, you'd blow them away in memory.</p>\n\n<pre><code>&gt;&gt;&gt; scores\n[('joe', 1), ('bill', 2), ('betty', 100)]\n&gt;&gt;&gt; f = open('high.pkl', 'wb')\n&gt;&gt;&gt; dill.dump(scores, f)\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt; \n&gt;&gt;&gt; scores.append(('mary',1000))\n&gt;&gt;&gt; scores\n[('joe', 1), ('bill', 2), ('betty', 100), ('mary', 1000)]\n&gt;&gt;&gt; \n&gt;&gt;&gt; f = open('high.pkl', 'rb')\n&gt;&gt;&gt; _scores = dill.load(f)\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt; _scores\n[('joe', 1), ('bill', 2), ('betty', 100)]\n&gt;&gt;&gt; blow away the old scores list, by pointing to _scores\n&gt;&gt;&gt; scores = _scores\n&gt;&gt;&gt; scores\n[('joe', 1), ('bill', 2), ('betty', 100)]\n</code></pre>\n\n<p>So it's more of a python name reference issue for <code>scores</code>, than it is a <code>pickle</code> issue.  <code>Pickle</code> is just instantiating a new list and calling it <code>scores</code> (in your case), and then it garbage collects whatever thing <code>scores</code> was pointed to before that.</p>\n\n<pre><code>&gt;&gt;&gt; scores = 1\n&gt;&gt;&gt; f = open('high.pkl', 'rb')\n&gt;&gt;&gt; scores = dill.load(f)\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt; scores\n[('joe', 1), ('bill', 2), ('betty', 100)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "reply_to_user": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "edited": false, "score": 1, "creation_date": 1541215929, "post_id": 48217112, "comment_id": 93150793, "body": "As denoted by the first 5 words of the post."}, {"owner": {"reputation": 67, "user_id": 14713550, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RMkQ4g6bWLM/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnketmgOsYl7kuOuzsHSqvorgXUEw/s96-c/photo.jpg?sz=128", "display_name": "user4599", "link": "https://stackoverflow.com/users/14713550/user4599"}, "edited": false, "score": 0, "creation_date": 1619240268, "post_id": 48217112, "comment_id": 118850797, "body": "<a href=\"https://stackoverflow.com/q/67239225/14713550\">stackoverflow.com/q/67239225/14713550</a>"}], "tags": [], "owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "is_accepted": false, "score": 0, "last_activity_date": 1515711223, "creation_date": 1515711223, "answer_id": 48217112, "question_id": 28077573, "link": "https://stackoverflow.com/questions/28077573/python-appending-to-a-pickled-list/48217112#48217112", "title": "Python - appending to a pickled list", "body": "<p>Doesnt actually answer the question, but if anyone would like to add a single item at a time to a pickle, you can do it by...</p>\n\n<pre><code>import pickle\nimport os\n\nhigh_scores_filename = '/home/ubuntu-dev/Desktop/delete/high_scores.dat'\n\nscores = []\n\n# first time you run this, \"high_scores.dat\" won't exist\n#   so we need to check for its existence before we load\n#   our \"database\"\nif os.path.exists(high_scores_filename):\n    # \"with\" statements are very handy for opening files.\n    with open(high_scores_filename,'rb') as rfp:\n        scores = pickle.load(rfp)\n    # Notice that there's no \"rfp.close()\"\n    #   ... the \"with\" clause calls close() automatically!\n\nnames = [\"mike\", \"bob\", \"joe\"]\n\nfor name in names:\n    high_score = name\n    print(name)\n    scores.append(high_score)\n\n# Now we \"sync\" our database\nwith open(high_scores_filename,'wb') as wfp:\n    pickle.dump(scores, wfp)\n\n# Re-load our database\nwith open(high_scores_filename,'rb') as rfp:\n    scores = pickle.load(rfp)\n\nprint(scores)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 2, "creation_date": 1541268720, "post_id": 53115700, "comment_id": 93161643, "body": "Why not use <code>hickle</code> or <code>klepto</code> instead?  They are both built to give you a simple <code>dump</code> and <code>load</code> pickle-equivalent syntax for HDF5. If you replace <code>dill</code> in my answer with <code>hickle</code>, I believe it should work, and store as HDF5."}, {"owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1541354506, "post_id": 53115700, "comment_id": 93179064, "body": "Yes, it works. Thanks for the info. I did not know about hickle."}], "tags": [], "owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "is_accepted": false, "score": 0, "last_activity_date": 1541150219, "creation_date": 1541150219, "answer_id": 53115700, "question_id": 28077573, "link": "https://stackoverflow.com/questions/28077573/python-appending-to-a-pickled-list/53115700#53115700", "title": "Python - appending to a pickled list", "body": "<p>Don't use pickle but use h5py which also solves your purpose</p>\n\n<pre><code>with h5py.File('.\\PreprocessedData.h5', 'a') as hf:\n    hf[\"X_train\"].resize((hf[\"X_train\"].shape[0] + X_train_data.shape[0]), axis = 0)\n    hf[\"X_train\"][-X_train_data.shape[0]:] = X_train_data\n\n    hf[\"X_test\"].resize((hf[\"X_test\"].shape[0] + X_test_data.shape[0]), axis = 0)\n    hf[\"X_test\"][-X_test_data.shape[0]:] = X_test_data\n\n\n    hf[\"Y_train\"].resize((hf[\"Y_train\"].shape[0] + Y_train_data.shape[0]), axis = 0)\n    hf[\"Y_train\"][-Y_train_data.shape[0]:] = Y_train_data\n\n    hf[\"Y_test\"].resize((hf[\"Y_test\"].shape[0] + Y_test_data.shape[0]), axis = 0)\n    hf[\"Y_test\"][-Y_test_data.shape[0]:] = Y_test_data\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/47074545/9789097\">source</a></p>\n"}], "owner": {"reputation": 123, "user_id": 4480134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87dbf04e5020c77ab0571adcfb63038?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4480134/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27458, "favorite_count": 4, "accepted_answer_id": 28078157, "answer_count": 4, "score": 12, "last_activity_date": 1541150219, "creation_date": 1421877291, "last_edit_date": 1426390282, "question_id": 28077573, "link": "https://stackoverflow.com/questions/28077573/python-appending-to-a-pickled-list", "title": "Python - appending to a pickled list", "body": "<p>I'm struggling to append a list in a pickled file.\nThis is the code:</p>\n\n<pre><code>#saving high scores to a pickled file\n\nimport pickle\n\nfirst_name = input(\"Please enter your name:\")\nscore = input(\"Please enter your score:\")\n\nscores = []\nhigh_scores = first_name, score\nscores.append(high_scores)\n\nfile = open(\"high_scores.dat\", \"ab\")\npickle.dump(scores, file)\nfile.close()\n\nfile = open(\"high_scores.dat\", \"rb\")\nscores = pickle.load(file)\nprint(scores)\nfile.close()\n</code></pre>\n\n<p>The first time I run the code, it prints the name and score.</p>\n\n<p>The second time I run the code, it prints the 2 names and 2 scores.</p>\n\n<p>The third time I run the code, it prints the first name and score, but it overwrites the second name and score with the third name and score I entered.  I just want it to keep adding the names and scores.  I don't understand why it is saving the first name and overwriting the second one. </p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1421905029, "post_id": 28077499, "comment_id": 44542244, "body": "Are you looking for log-scaling?"}], "answers": [{"comments": [{"owner": {"reputation": 2968, "user_id": 1593180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7572ebac13481e2e9f2790c070ed9ca?s=128&d=identicon&r=PG", "display_name": "Peng Zhang", "link": "https://stackoverflow.com/users/1593180/peng-zhang"}, "edited": false, "score": 0, "creation_date": 1421878498, "post_id": 28077746, "comment_id": 44534607, "body": "Thanks. I agree your comment about confusion. In my use-case for now, the X-axis are just vary too much. For example, from [0,5,10,15,....100, 200, 300, 500, 1000,1500,...10000,20000,30000]. I tried to split the x-axis and plot into several figures. But then was asked to put in one figure."}, {"owner": {"reputation": 42508, "user_id": 3005188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48b649e55e0fa2444aedea34dd32c3b?s=128&d=identicon&r=PG", "display_name": "Ffisegydd", "link": "https://stackoverflow.com/users/3005188/ffisegydd"}, "reply_to_user": {"reputation": 2968, "user_id": 1593180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7572ebac13481e2e9f2790c070ed9ca?s=128&d=identicon&r=PG", "display_name": "Peng Zhang", "link": "https://stackoverflow.com/users/1593180/peng-zhang"}, "edited": false, "score": 0, "creation_date": 1421878569, "post_id": 28077746, "comment_id": 44534634, "body": "@Peng yeah that&#39;s fair enough, I&#39;d suggest that if you have some form of caption with the figure that you draw attention to it though maybe?"}, {"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "reply_to_user": {"reputation": 2968, "user_id": 1593180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7572ebac13481e2e9f2790c070ed9ca?s=128&d=identicon&r=PG", "display_name": "Peng Zhang", "link": "https://stackoverflow.com/users/1593180/peng-zhang"}, "edited": false, "score": 0, "creation_date": 1421905204, "post_id": 28077746, "comment_id": 44542303, "body": "I would make that caveat much much larger and put it at the top.  @PengZhang from your description I would go with either log-scale or a broken axis.  What you are asking for is very mis-leading."}, {"owner": {"reputation": 2968, "user_id": 1593180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7572ebac13481e2e9f2790c070ed9ca?s=128&d=identicon&r=PG", "display_name": "Peng Zhang", "link": "https://stackoverflow.com/users/1593180/peng-zhang"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1421939405, "post_id": 28077746, "comment_id": 44560509, "body": "@tcaswell Thanks. I will make the description less misleading. I am quite new to plot figures. Maybe I don&#39;t even use the write terminology in desription. Could you show me how to use broken axis? I used to split it into several figures, each figure with reasonable x range."}], "tags": [], "owner": {"reputation": 42508, "user_id": 3005188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48b649e55e0fa2444aedea34dd32c3b?s=128&d=identicon&r=PG", "display_name": "Ffisegydd", "link": "https://stackoverflow.com/users/3005188/ffisegydd"}, "is_accepted": true, "score": 5, "last_activity_date": 1421939807, "last_edit_date": 1421939807, "creation_date": 1421878034, "answer_id": 28077746, "question_id": 28077499, "link": "https://stackoverflow.com/questions/28077499/matplotlib-pyplot-plot-x-axis-ticks-in-equal-range/28077746#28077746", "title": "matplotlib.pyplot plot x-axis ticks in equal range", "body": "<p><strong>For the record, I think this is a bad design choice for a graphic. Having non-regular (be them linear or log) ticks at regular intervals is confusing to the reader.</strong></p>\n\n<p>Okay what you simply have to do is plot against <code>0, 1, 2, 3, ...</code> but then set the ticks to be your values of <code>x</code> at the same position using <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xticks\" rel=\"nofollow noreferrer\"><code>plt.xticks()</code></a></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx=[1,2,10,100,1000]\ny=[5,10,6,7,9]\n\nN = len(x)\nx2 = np.arange(N)\n\nplt.plot(x2, y)\n\nplt.xticks(x2, x)\n\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/20GTu.png\" alt=\"Example\"></p>\n"}], "owner": {"reputation": 2968, "user_id": 1593180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7572ebac13481e2e9f2790c070ed9ca?s=128&d=identicon&r=PG", "display_name": "Peng Zhang", "link": "https://stackoverflow.com/users/1593180/peng-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5828, "favorite_count": 0, "accepted_answer_id": 28077746, "answer_count": 1, "score": 4, "last_activity_date": 1421939807, "creation_date": 1421877007, "question_id": 28077499, "link": "https://stackoverflow.com/questions/28077499/matplotlib-pyplot-plot-x-axis-ticks-in-equal-range", "title": "matplotlib.pyplot plot x-axis ticks in equal range", "body": "<p>I need to plot a sequence of y values against a sequence of x values. The x values varies in a very large range. pyplot seems using a linear x-axis. So the following code gives me a bad figure.</p>\n\n<pre><code>def bad_plot():\n    x=[1,2,10,100,1000]\n    y=[5,10,6,7,9]\n    plt.plot(x,y,'rs')\n    plt.show()                \n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/m4hDk.jpg\" alt=\"enter image description here\"></p>\n\n<p>The first three points (1,5), (2,10), (10,6) are so close. I want the x-axis only have 5 ticks [1,2,10,100,100] and they are <strong>uniformly scattered in the x-axis</strong>. How can I achieve that? Thanks a lot.</p>\n"}, {"tags": ["python", "arrays", "list", "search"], "comments": [{"owner": {"reputation": 78, "user_id": 4475403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/429bfaf2ee80684303661e5f2517b4a5?s=128&d=identicon&r=PG&f=1", "display_name": "Jordy19", "link": "https://stackoverflow.com/users/4475403/jordy19"}, "edited": false, "score": 0, "creation_date": 1421876983, "post_id": 28077444, "comment_id": 44533881, "body": "Take a look at this post: <a href=\"http://stackoverflow.com/questions/1156087/python-search-in-lists-of-lists\" title=\"python search in lists of lists\">stackoverflow.com/questions/1156087/&hellip;</a>"}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1421877055, "post_id": 28077444, "comment_id": 44533919, "body": "Basically do the same thing as mentioned in the duplicate apart from using <code>1</code> instead of <code>&#39;&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1421876964, "creation_date": 1421876964, "answer_id": 28077481, "question_id": 28077444, "link": "https://stackoverflow.com/questions/28077444/python-checking-if-element-is-in-list-of-lists-pythonic-way/28077481#28077481", "title": "Python - checking if element is in list of lists (pythonic way)", "body": "<p>You can use <code>any</code> with a generator expression.</p>\n\n<pre><code>any(1 in g for g in graph)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": true, "score": 1, "last_activity_date": 1421876997, "creation_date": 1421876997, "answer_id": 28077492, "question_id": 28077444, "link": "https://stackoverflow.com/questions/28077444/python-checking-if-element-is-in-list-of-lists-pythonic-way/28077492#28077492", "title": "Python - checking if element is in list of lists (pythonic way)", "body": "<p>Try </p>\n\n<pre><code>any(x in row for row in graph)\n</code></pre>\n\n<p>where <code>x</code> is the element you are looking for.</p>\n"}], "owner": {"reputation": 16, "user_id": 4406974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31bb21aa993c2dc03b65f1faf3e29151?s=128&d=identicon&r=PG&f=1", "display_name": "bobhob314", "link": "https://stackoverflow.com/users/4406974/bobhob314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "closed_date": 1421876987, "accepted_answer_id": 28077492, "answer_count": 2, "score": -1, "last_activity_date": 1421876997, "creation_date": 1421876810, "question_id": 28077444, "link": "https://stackoverflow.com/questions/28077444/python-checking-if-element-is-in-list-of-lists-pythonic-way", "closed_reason": "Duplicate", "title": "Python - checking if element is in list of lists (pythonic way)", "body": "<p>suppose that I have a list \"graph\" initialised as follows.</p>\n\n<pre><code>graph = [[1, 2, 3], [2, 3, 4], [3, 5, 7]]\n</code></pre>\n\n<p>How would I then determine if 1 was in graph?</p>\n\n<p>Is there a simpler, more optimized way than doing something like,</p>\n\n<pre><code>in_graph = False\nfor row in graph:\n    if 1 in row:\n        in_graph = True\n        break\n</code></pre>\n\n<p>?</p>\n\n<p>Thank you,</p>\n\n<p>hob</p>\n"}, {"tags": ["python", "nltk", "sentiment-analysis"], "comments": [{"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 2, "creation_date": 1421876622, "post_id": 28077383, "comment_id": 44533678, "body": "Could you cut down your code to specifically the lines which are not working? (By the way doing so will often enable you to debug it yourself)"}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421877634, "post_id": 28077383, "comment_id": 44534204, "body": "Also from your code it&#39;s not clear what arguments are supposed to be passed as <code>document</code>, <code>all_words</code> etc. You should specify what you&#39;re trying to pass, and how you expect your program to behave."}, {"owner": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "reply_to_user": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421877970, "post_id": 28077383, "comment_id": 44534372, "body": "for now document is a list words used in  tweet such as [&#39;love&#39;,&#39;this&#39;,&#39;movie&#39;]. all_words is a list of total words in the tweet, and tweets is a list of tuple having tweets with  sentiments(positive or negative)"}, {"owner": {"reputation": 2337, "user_id": 3827850, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/rCU6z.jpg?s=128&g=1", "display_name": "Ezio", "link": "https://stackoverflow.com/users/3827850/ezio"}, "edited": false, "score": 0, "creation_date": 1527922617, "post_id": 28077383, "comment_id": 88318906, "body": "Were you able to find the solution to this?"}], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "edited": false, "score": 0, "creation_date": 1421877847, "post_id": 28077530, "comment_id": 44534302, "body": "get_features is giving me correct output as expected. Only when I am trying to used the output of get_features(which is a dictionary-features) in train_set function. I am getting the said error."}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "reply_to_user": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "edited": false, "score": 0, "creation_date": 1421878087, "post_id": 28077530, "comment_id": 44534432, "body": "because <code>apply_features</code> will call <code>get_features</code> for every <code>tweet</code> in <code>tweets</code> like this: <code>get_features(tweets[index])</code>  - can you see why that doesn&#39;t work for you?"}, {"owner": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "edited": false, "score": 0, "creation_date": 1422241549, "post_id": 28077530, "comment_id": 44660231, "body": "I have done some changes to the program and I am getting the features(from get_features function) but when I am passing this to create a training set,  my training set is &#39;None&#39;.                                                            training_set=nltk.classify.apply_features(extract_features,t&zwnj;&#8203;weets)                 output - [(None, &#39;positive&#39;), (None, &#39;positive&#39;), ...]"}], "tags": [], "owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "is_accepted": false, "score": 0, "last_activity_date": 1421877126, "creation_date": 1421877126, "answer_id": 28077530, "question_id": 28077383, "link": "https://stackoverflow.com/questions/28077383/getting-error-while-using-nltk-classify-apply-features/28077530#28077530", "title": "Getting error while using nltk.classify.apply_features", "body": "<p>Here is from the <code>nltk.classify.util.apply_features</code> source code (reading the source usually helps!) </p>\n\n<pre><code>  \"\"\"\ndef apply_features(feature_func, toks, labeled=None):\n    Use the ``LazyMap`` class to construct a lazy list-like\n    object that is analogous to ``map(feature_func, toks)``.  In\n    particular, if ``labeled=False``, then the returned list-like\n    object's values are equal to::\n\n        [feature_func(tok) for tok in toks]\n\n    If ``labeled=True``, then the returned list-like object's values\n    are equal to::\n\n        [(feature_func(tok), label) for (tok, label) in toks]\"\"\"\n</code></pre>\n\n<p>You'll notice that the <code>get_features</code> function you implemented takes 3 inputs, but <code>apply_features</code> accepts only 2 (and labeled=True/None).</p>\n\n<p>I don't know exactly what results you're trying to extract, but you probably want to pass some default arguments to <code>get_features</code> or have it call <code>self</code> methods. </p>\n"}], "owner": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1025, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421877126, "creation_date": 1421876496, "last_edit_date": 1421877088, "question_id": 28077383, "link": "https://stackoverflow.com/questions/28077383/getting-error-while-using-nltk-classify-apply-features", "title": "Getting error while using nltk.classify.apply_features", "body": "<p>I am new to NLTK library of Python and writing my first  program using it. The program is about analysis of tweets. The below get_feature function returns features(which is a dictionary). Using these feature I have to create a training set. However in the training set , when I am passing the get_feature function and tweets(list of tuples), its giving me error as 'dict' object is not callable'.\nThere is some issue while creating the training set.</p>\n\n<p>Am I passing the right type of values to <code>nltk.classify.apply_features()</code>?</p>\n\n<p>I tried using <code>nltk.classify.util.apply_features()</code> but no use. Can someone please let me know as in where I am getting wrong.</p>\n\n<pre><code>Error:\nTraceback (most recent call last):\n  File \"C:/Users/sanjiv/PycharmProjects/NLP/twitterAnalysis.py\", line 98, in &lt;module&gt;\n    ta.train_set(store_features,ta.twitter())\n  File \"C:/Users/sanjiv/PycharmProjects/NLP/twitterAnalysis.py\", line 88, in train_set\n    print train_set\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\compat.py\", line 487, in wrapper\n    return method(self).encode('ascii', 'backslashreplace')\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\compat.py\", line 475, in wrapper\n    return transliterate(method(self))\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\compat.py\", line 487, in wrapper\n    return method(self).encode('ascii', 'backslashreplace')\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\util.py\", line 664, in __repr__\n    for elt in self:\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\util.py\", line 845, in iterate_from\n    try: yield self._func(self._lists[0][index])\n  File \"C:\\Python27\\lib\\site-packages\\nltk\\classify\\util.py\", line 65, in lazy_func\n    return (feature_func(labeled_token[0]), labeled_token[1])\nTypeError: 'dict' object is not callable\n</code></pre>\n\n<p>The code is:</p>\n\n<pre><code>import nltk\nimport operator\nfrom nltk.classify.util import apply_features\n\nclass TwitterAnalysis:\ndef __init__(self):\n    pass\n\n    @staticmethod\n    def twitter():\n        tweets = []\n        tweets_word = []\n        new_words = []\n        # Positive tweets\n        pos_tweets = [('I love this movie', 'positive'), ('This view is amazing', 'positive'),\n                      ('Loving this morning', 'positive'),\n                      ('he is my best friend', 'positive')]\n\n        #Negative tweets\n        neg_tweets = [('I do not like this car', 'negative'), ('This view is horrible', 'negative'),\n                      ('I am feeling lazy this morning', 'negative'), ('He is my enemy', 'negative')]\n\n        #Combining both type of tweets into single list and eliminating words less then size of 2\n\n        combined_lst = [pos_tweets + neg_tweets]\n        #list comprehension\n\n        for (words, sentiment) in pos_tweets + neg_tweets:\n            new_words = []\n\n            for each in words.split():\n                if len(each) &gt;= 3:\n                    new_words.append(each.lower())\n            #print new_words\n            tweets.append((new_words, sentiment))\n        #contains tweet with sentiment\n        return tweets\n\n\n    def get_features(self, document, all_words,tweets):\n        document_features = set(document)\n        features = {}\n        for each in all_words:\n            features['contains(%s)' % each] = (each in document_features)\n        #feature set\n        return features\n\n    def train_set(self,get_features,tweets):\n        train_set = nltk.classify.util.apply_features(get_features,tweets)\n        print train_set\n</code></pre>\n"}, {"tags": ["python", "web-services", "user-interface", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1421876484, "post_id": 28077328, "comment_id": 44533607, "body": "I can&#39;t imagine why it wouldn&#39;t be possible. What have you tried? What part is giving you difficulty?"}, {"owner": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "reply_to_user": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1421876547, "post_id": 28077328, "comment_id": 44533639, "body": "@dylrei I haven&#39;t been able to try anything. I am currently learning Python and don&#39;t know what modules can do what. I have done some research on what I asked, but haven&#39;t found anything useful."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421876662, "post_id": 28077328, "comment_id": 44533700, "body": "<code>urllib.urlretrieve()</code>"}, {"owner": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1421876803, "post_id": 28077328, "comment_id": 44533770, "body": "Sounds like you want to be able to use python to browse to a page where your video/image/text is presented for streaming etc. rather than downloading and displaying from a hard drive(which would obviously take much longer). Is that right? Or do you want to actually download the info for use?"}, {"owner": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "reply_to_user": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1421877252, "post_id": 28077328, "comment_id": 44534031, "body": "@Totem Yes, that&#39;s correct! I just want to stream it to their PC. The total size of the information and pictures would be to large to distribute in a file."}, {"owner": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1421877525, "post_id": 28077328, "comment_id": 44534162, "body": "Perhaps you could simply browse the correct page, and stream a video or view the image etc. with the browser full screened. There are python modules for dealing with browsers in detail, such as mechanize"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 3015767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f80c483bb1b36d70312ab354af096e?s=128&d=identicon&r=PG&f=1", "display_name": "eszeikial", "link": "https://stackoverflow.com/users/3015767/eszeikial"}, "is_accepted": false, "score": -2, "last_activity_date": 1421876546, "creation_date": 1421876546, "answer_id": 28077394, "question_id": 28077328, "link": "https://stackoverflow.com/questions/28077328/how-can-i-access-pictures-text-on-a-website-and-display-them-with-tkinter/28077394#28077394", "title": "How can I access pictures/text on a website and display them with Tkinter?", "body": "<p><a href=\"https://pypi.python.org/pypi/wget\" rel=\"nofollow\">https://pypi.python.org/pypi/wget</a></p>\n\n<p>Try wget! It is a simple web scraper that should do just what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1421882195, "post_id": 28077821, "comment_id": 44536114, "body": "For 3.x, use the pillow fork of PIL.  (It is not a bad choice for 2.7 either.)  3.4 on Windows comes with tcl/tk 8.6, whose PhotoImage class can handle .png (as well as .bmp and .jpg usable in earlier versions also).  Pillow is compatible with PIL and imported as &#39;PIL&#39;, so the code posted should work."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1421882521, "post_id": 28077821, "comment_id": 44536233, "body": "Yes, I&#39;m using Pillow."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1421883732, "post_id": 28077821, "comment_id": 44536661, "body": "My comment should say .gif, not .jpg.  One can use the latter by converting with pillow.  For 3.x, <code>urllib</code> should be <code>urllib.request</code>.  If one wants to use a .png exactly as downloaded, <code>tkinter.PhotoImage</code> can be used instead of PIL.ImageTk (with tcl/tk 8.6) but for tcl/tk 8.5 or for any other format (such as .jpg or .tiff) or for.png modification (resizing), PIL(low) or the equivalent is needed."}, {"owner": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "edited": false, "score": 0, "creation_date": 1422141485, "post_id": 28077821, "comment_id": 44635358, "body": "@MalikBrahimi Where can I get PIL? I tried using &quot;pip install PIL and it&quot; didn&#39;t work. I am not sure if I am doing this wrong or not."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "edited": false, "score": 0, "creation_date": 1422144309, "post_id": 28077821, "comment_id": 44636034, "body": "@AustinHargis You can install <code>Pillow</code> a more functional port of <code>PIL</code> with <code>pip install Pillow</code>."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1422144338, "post_id": 28077821, "comment_id": 44636041, "body": "Be sure to upvote and mark as answer Austin if you can."}, {"owner": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "edited": false, "score": 0, "creation_date": 1422399069, "post_id": 28077821, "comment_id": 44732265, "body": "@MalikBrahimi When I run this code, I get this error: &#39;module&#39; object has no attribute &#39;urlopen&#39;"}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1422400926, "post_id": 28077821, "comment_id": 44733017, "body": "I don&#39;t know what to tell you. Python&#39;s <code>urllib</code> does have <code>urlopen</code>."}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1421882556, "last_edit_date": 1421882556, "creation_date": 1421878386, "answer_id": 28077821, "question_id": 28077328, "link": "https://stackoverflow.com/questions/28077328/how-can-i-access-pictures-text-on-a-website-and-display-them-with-tkinter/28077821#28077821", "title": "How can I access pictures/text on a website and display them with Tkinter?", "body": "<p>Try downloading with <code>urllib</code> and use the <code>Pillow</code> fork of <code>PIL</code> to process images:</p>\n\n<pre><code>from Tkinter import *\nfrom PIL import ImageTk\nimport urllib\n\n# initialize window\n\nroot = Tk()\nroot.geometry('640x480')\n\n# retrieve and download image\n\nlocation = 'https://www.python.org/static/community_logos/python-logo.png'\nimage = open('image.png', 'wb')\nimage.write(urllib.urlopen(location).read())\nimage.close()\n\n# create canvas for drawing\n\ncanvas = Canvas(root, width = 640, height = 480)\ncanvas.place_configure(x = 0, y = 0, width = 640, height = 480)\n\n# load image with PIL and draw to canvas\n\nimage = ImageTk.PhotoImage(file = 'image.png')\ncanvas.create_image(10, 10, image = image, anchor = NW)\n\n# start program\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 4375841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-ohrcyv0n4Pw/AAAAAAAAAAI/AAAAAAAAAA8/Js-sIlYy19w/photo.jpg?sz=128", "display_name": "Austin Hargis", "link": "https://stackoverflow.com/users/4375841/austin-hargis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "accepted_answer_id": 28077821, "answer_count": 2, "score": -4, "last_activity_date": 1421882556, "creation_date": 1421876288, "last_edit_date": 1421877312, "question_id": 28077328, "link": "https://stackoverflow.com/questions/28077328/how-can-i-access-pictures-text-on-a-website-and-display-them-with-tkinter", "title": "How can I access pictures/text on a website and display them with Tkinter?", "body": "<p>I am trying to write a Python 3.x program that accesses data (pictures, text, etc.) from a website. I'd also like to display that data in a Tkinter GUI. </p>\n\n<p>BTW, I'm using Python 3.4 on Windows. </p>\n"}, {"tags": ["python", "variables", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 2345, "user_id": 2348290, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b56fe07ccae6b4215b14ff7825a15cac?s=128&d=identicon&r=PG", "display_name": "jeffpkamp", "link": "https://stackoverflow.com/users/2348290/jeffpkamp"}, "edited": false, "score": 1, "creation_date": 1421877640, "post_id": 28077641, "comment_id": 44534208, "body": "Thank you, you just gave me an epiphany about using lambda with tkinter!"}, {"owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "reply_to_user": {"reputation": 2345, "user_id": 2348290, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b56fe07ccae6b4215b14ff7825a15cac?s=128&d=identicon&r=PG", "display_name": "jeffpkamp", "link": "https://stackoverflow.com/users/2348290/jeffpkamp"}, "edited": false, "score": 0, "creation_date": 1421877978, "post_id": 28077641, "comment_id": 44534381, "body": "You&#39;re welcome, and as a side note... It is generally not a good idea to create the Tkinter object and use <code>pack()</code> on the same expression.  This means that <code>bport</code> refers to the <code>pack()</code> method rather than the button object itself."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "edited": false, "score": 1, "creation_date": 1421916303, "post_id": 28077641, "comment_id": 44546581, "body": "Small correction: when using <code>pack()</code> (or <code>grid</code> or <code>place</code> for that matter) on the same line as the creation of the button, the variable will not refer to the <code>pack()</code> method, but it will contain whatever <code>pack()</code> returns, which is always <code>None</code>."}], "tags": [], "owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "is_accepted": true, "score": 3, "last_activity_date": 1421940212, "last_edit_date": 1421940212, "creation_date": 1421877525, "answer_id": 28077641, "question_id": 28077197, "link": "https://stackoverflow.com/questions/28077197/evaluation-of-dynamic-variable-for-tkinter-button-command-function/28077641#28077641", "title": "Evaluation of Dynamic Variable for Tkinter Button command function", "body": "<p>Change </p>\n\n<pre><code>bport=Button(test,text=port+\": \"+desc,command=lambda: pget(i[k])).pack()\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>bport=Button(test,text=port+\": \"+desc,command=lambda port = i[k]: pget(port))\nbport.pack()\n</code></pre>\n\n<p>This forces the value to be sent in to <code>pget()</code> to be set at creation of the Button rather than when <code>mainloop()</code> is initiated.</p>\n\n<p>I also moved <code>pack()</code> to another line (this is a rare case of saving lines not being a good practice).  If you were to try to refer back to <code>bport</code> it would be referencing the what the method <code>pack()</code> returns, which is always <code>None</code>.  </p>\n\n<p>Separating the method call and the object creation will prevent this.</p>\n"}], "owner": {"reputation": 2345, "user_id": 2348290, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b56fe07ccae6b4215b14ff7825a15cac?s=128&d=identicon&r=PG", "display_name": "jeffpkamp", "link": "https://stackoverflow.com/users/2348290/jeffpkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 28077641, "answer_count": 1, "score": 1, "last_activity_date": 1421940212, "creation_date": 1421875798, "last_edit_date": 1421876913, "question_id": 28077197, "link": "https://stackoverflow.com/questions/28077197/evaluation-of-dynamic-variable-for-tkinter-button-command-function", "title": "Evaluation of Dynamic Variable for Tkinter Button command function", "body": "<p>I am making  an interface to display available com ports as buttons and, when pressed to pass the com name to a variable.  Currently I can make dynamic buttons but I am having trouble passing the values to an outside function.</p>\n\n<p>The code creates two buttons for com7 and com8 (current ports on my system) with a dictionary in which i[1]=com7 and i[2]=com8.  When I press the button for i[1] I get a Keyerror because the current value of K is now 3, which is not a key in the dictionary. Obviously I want the button to reference the value of K when it was created, not the current value of K.   </p>\n\n<p>Essentially I want python to evaluate i[k] at the moment of button creation, not at the moment the button is pressed.</p>\n\n<pre><code>import serial, sys, os, Tkinter\nfrom Tkinter import *\n\ndef com():\n    global ser\n    global p\n\n    def pget(inport):\n        print inport\n        test.destroy()\n\n\n    test=Tk()\n\n    try:\n        from serial.tools.list_ports import comports\n    except ImportError:\n        comports = None\n        V = \"\"\n        while V is \"\" :\n            for port, desc, hwid in sorted(comports()):\n                print \"\\nAvailable Ports:\\n\"\n                V =sys.stderr.write(' %-10s %s\\n' % (port, desc))\n            if V is \"\":\n                print \"No ports available, plug in COM port and hit ENTER\"\n                raw_input()\n    def Port():\n        i={}\n        k=1\n        if comports:\n            l=Label(test, text=\"Available ports:\").pack(side=TOP)\n            sys.stderr.write('\\n Available ports:\\n')\n        for port, desc, hwid in sorted(comports()):\n            print port\n            i[k]=port\n            bport=Button(test,text=port+\": \"+desc,command=lambda: pget(i[k])).pack()\n            print k, i[k]\n            k+=1\n        test.mainloop()\n    Port()\n\n\ncom()\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "python-3.4"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1421876538, "post_id": 28077180, "comment_id": 44533631, "body": "What is the <code>wrap</code> function?"}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1421877155, "post_id": 28077180, "comment_id": 44533980, "body": "Since you&#39;re only moving to 1.6, I&#39;d suggest looking into South to create this migration. Better to make a clean separation between your old model code and your new model code and leave the migrating up to South. <a href=\"http://south.aeracode.org/\" rel=\"nofollow noreferrer\">south.aeracode.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4480014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd269f883303b72fa5207a2aba782c1?s=128&d=identicon&r=PG&f=1", "display_name": "fd8323", "link": "https://stackoverflow.com/users/4480014/fd8323"}, "is_accepted": false, "score": 0, "last_activity_date": 1421878344, "creation_date": 1421878344, "answer_id": 28077814, "question_id": 28077180, "link": "https://stackoverflow.com/questions/28077180/django-model-cannot-resolve-keyword-username-into-field/28077814#28077814", "title": "django model Cannot resolve keyword &#39;username&#39; into field", "body": "<p>There is an indent error in the wrap() function. The correctly indented code should be like this</p>\n\n<pre><code>def wrap(obj, widget=None, clean=None, format=None, grp=3, header='',**attrs):\n    def formfield(**kwargs):\n        \"This makes sure the right properties get sent to form generator\"\n        form_class=obj.__class__.formfield(obj, **kwargs)\n        if widget:\n            defaults=dict(attrs=attrs)\n        if obj.choices: defaults.update(choices=obj.choices)\n        if format: defaults.update(format=format)\n        form_class.widget=widget(**defaults)\n        if hasattr(widget,'clean'):\n            form_class.clean=widget.clean\n        else:\n            form_class.widget.attrs.update(**attrs)\n        if clean:   form_class.clean=clean\n        form_class.grp=grp\n        form_class.header=header\n        return form_class\n    if widget or clean or attrs:\n        obj.formfield=formfield\n    return obj\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4480014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd269f883303b72fa5207a2aba782c1?s=128&d=identicon&r=PG&f=1", "display_name": "fd8323", "link": "https://stackoverflow.com/users/4480014/fd8323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421879809, "creation_date": 1421875731, "last_edit_date": 1421879809, "question_id": 28077180, "link": "https://stackoverflow.com/questions/28077180/django-model-cannot-resolve-keyword-username-into-field", "title": "django model Cannot resolve keyword &#39;username&#39; into field", "body": "<p>I am upgrading one of my Django project from 1.2 to 1.6.6. I encountered <code>Cannot resolve keyword 'username' into field</code> error when I trying to call Model Member. It seems like that all fields wrapped with a \"wrap_model\" are not recognized. Here is the code for <code>wrap_model()</code></p>\n\n<pre><code>def wrap_model(o):\n    from django.conf import settings\n    FIELD_LABELS=getattr(settings,'MODEL_FIELDS',{})\n    object_name=o._meta.object_name\n    if FIELD_LABELS:\n        for f in o._meta.local_fields:\n            fl=None\n            full_field_name='%s__%s' % (object_name,f.name)  \n            if full_field_name in FIELD_LABELS:\n                fl=FIELD_LABELS[full_field_name]\n            elif f.name in FIELD_LABELS:\n                fl=FIELD_LABELS[f.name]\n            if fl:\n                if isinstance(fl,dict):\n                    for k,v in list(fl.items()):\n                        setattr(f,k,v)\n            else:\n                f.verbose_name=fl\n    return o\n</code></pre>\n\n<p>And here is the code for my model</p>\n\n<pre><code>@wrap_model\nclass Member(models.Model):\n    username = wrap(\n        models.EmailField(\n            _('Email:'), unique=True), size='50'\n    )\n    password = PasswordField(\n        _('Password:'),\n        max_length=50,\n        help_text='(type and retype password to change)'\n    )\n    title = wrap(\n        models.CharField(\n            _('Title'),\n            max_length=50,\n            null=True,\n            default='',\n            blank=True\n        ),\n        size='50'\n    )\n    fname = wrap(\n        models.CharField(\n            _('First Name:'),\n            max_length=50,\n            null=False,\n            default=''\n        ),\n        size='25',\n        grp=1\n    )\n    lname = wrap(\n        models.CharField(\n            _('Last Name:'),\n            max_length=50,\n            null=False,\n            default=''\n        ),\n        size='25',\n        grp=2\n    )    \n    created = models.DateTimeField(\n        auto_now_add=True\n    )\n    modified = models.DateTimeField(\n        editable=False,\n        blank=True,\n        null=True,\n        auto_now=True\n    )\n    accessed = models.DateTimeField(blank=True, null=True)\n</code></pre>\n\n<p>Apparently those fields wrapped with <code>wrap_model()</code> function are not recognized while fields without wrapper (such as created, modified, accessed) are normal. \nAny help is greatly appreciated!</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1432801016, "post_id": 28076999, "comment_id": 49077916, "body": "I couldn&#39;t reproduce this behaviour in Python 2.6 and 2.7; all elements of <code>__path__</code> are searched there on python 2.6.9 and 2.7.9."}, {"owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1432806621, "post_id": 28076999, "comment_id": 49081711, "body": "@AnttiHaapala, you&#39;re correct and I&#39;ve written the answer for this question."}], "answers": [{"tags": [], "owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "is_accepted": true, "score": 1, "last_activity_date": 1432806489, "creation_date": 1432806489, "answer_id": 30503002, "question_id": 28076999, "link": "https://stackoverflow.com/questions/28076999/why-path-0-in-reqular-packages-is-the-only-index-searched/30503002#30503002", "title": "Why __path__[0] in reqular packages is the only index searched?", "body": "<p><code>__path__[0]</code> is not only the path that Python searched for relative imports within packages. At least this is a true behavior for what I tested in Cpython 2.7 and Python 3.3. Python traverses <code>__path__[0]</code> from left-to right when using relative imports. The role that <code>__path__[0]</code> list plays is the same role of <code>sys.path</code>. Both of them contains system paths (prefixes of directories) that lead to a package or a module which Python gleans automatically when using any of the import statement (e.g. <code>import</code>, <code>from</code>)</p>\n\n<p>Indeed, you can extend the <code>__path__[0]</code> using <code>pkgutil.extend_path</code> function to let the relative package imports, import from different directories other than the package's directory. For example: </p>\n\n<pre><code>C:\n  \\dir0        #container directory\n     \\pkg      #package \n       __init__.py \n       spam.py\n    \\dir1 \n        ham.py\n&gt;&gt;&gt; __path__ \n   ['C:\\\\dir0'] \n</code></pre>\n\n<p>Assume that the <code>__init__.py</code> file (the initialization file) contain the following piece of code: </p>\n\n<pre><code>__path__.append(r'C:\\\\dir1')    #Or pkgutil.extend_path function\nfrom . import spam,ham          #Relative import(relative to pkg dir)  \n</code></pre>\n\n<p><code>spam</code> will be imported from the package's directory since this is a <strong>relative import</strong> in both 2.X and 3.X. But, note how <code>ham</code> will also be imported successfully, even though it doesn't live within the package's home directory like <code>spam</code> module does, it still can be imported as the directory of the module <code>ham</code> in the <code>__path__</code> list of the package <code>pkg</code>. </p>\n\n<p>Since <code>ham</code> was imported automatically without any error this is an indication that Python traverses the <code>__path__</code> list for packages from left-right. </p>\n\n<p>Though, you can think of <code>__path__</code> as <code>sys.path</code>, but <code>__path__</code> is used only for imports within packages.Python 2.X searches <code>__path__</code>, before <code>sys.path</code>. That's <em>relative-then absolute</em>. Python 3.X changed this to, <em>absolute-only</em>, unless you use the dot in <code>from</code> import statement, <code>from . import ...</code>, Python 3.X will always search the module search path. </p>\n"}], "owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 1, "accepted_answer_id": 30503002, "answer_count": 1, "score": 2, "last_activity_date": 1432806489, "creation_date": 1421875051, "last_edit_date": 1421920948, "question_id": 28076999, "link": "https://stackoverflow.com/questions/28076999/why-path-0-in-reqular-packages-is-the-only-index-searched", "title": "Why __path__[0] in reqular packages is the only index searched?", "body": "<p>When I create a regular package in Python I get an object with <code>__path__</code> method which is considered a special type of module according to Python documentation. My question is why in <code>pack.__path__</code> list only the first item is searched and the others are omitted and why it's a list rather than a normal string since the other items aren't scanned ? </p>\n\n<p>Example: \nSuppose we have a directory names C:\\code which contains a package name pkg. and another path which contains spam.py: </p>\n\n<pre><code>    C\\\n     pkg\\                #Regular package\n         .__init__.py\n     another\\ \n         spam.py  #print('spam')          \n</code></pre>\n\n<h1> </h1>\n\n<pre><code>&gt;&gt;&gt; import pkg\n\n&gt;&gt;&gt; pkg.__path__    #Only __path__[0] searched\n   ['C:\\\\code\\\\pkg']    \n\n&gt;&gt;&gt; pkg.path.append(r'C:\\another')\n\n&gt;&gt;&gt; pkg.__path__ \n   ['C:\\\\code\\\\pkg', 'C:\\\\another']   # __path__[1] omitted\n\n&gt;&gt;&gt; import pkg.spam                  # Fails! \n   ImportError:... \n\n&gt;&gt;&gt; pkg.__path__.pop(0)              # Works!\n&gt;&gt;&gt; pkg.spam\n    spam\n</code></pre>\n\n<p>So I'm wondering why Python only traverses <code>__path__[0]</code> rather than the whole list as it does in 3.X for namespace packages? It doesn't make sense to have <code>__path__</code> as list if it's not traversed fully. I know regular packages are different from namespace packages, but why bother having a list here and allowing only singe search path! However, Python 3.3 traverses the whole list which in some forms it emulates the behavior of namespace packages by adding directories in <code>__path__</code> attribute for a regular package. </p>\n"}, {"tags": ["python", "django", "ccavenue"], "comments": [{"owner": {"reputation": 940, "user_id": 2688090, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d76d0f1519418780c3934365084c3c64?s=128&d=identicon&r=PG&f=1", "display_name": "ancho", "link": "https://stackoverflow.com/users/2688090/ancho"}, "edited": false, "score": 1, "creation_date": 1429796409, "post_id": 28076958, "comment_id": 47776781, "body": "Did you find the solution for that ?"}, {"owner": {"reputation": 2074, "user_id": 3632705, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/407645bbc6166e2ad0422628eb2bdd17?s=128&d=identicon&r=PG&f=1", "display_name": "django-renjith", "link": "https://stackoverflow.com/users/3632705/django-renjith"}, "edited": false, "score": 0, "creation_date": 1432448963, "post_id": 28076958, "comment_id": 48927192, "body": "you have any document for ccavenue payment gateway integration?"}, {"owner": {"reputation": 812, "user_id": 451263, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db64adc9fc03bca5ec4ec6f4cb60740e?s=128&d=identicon&r=PG", "display_name": "Hitesh Dharamdasani", "link": "https://stackoverflow.com/users/451263/hitesh-dharamdasani"}, "edited": false, "score": 2, "creation_date": 1433058676, "post_id": 28076958, "comment_id": 49182077, "body": "Have you looked at <code>https:&#47;&#47;github.com&#47;amitu&#47;dcavenue</code> ?"}], "owner": {"reputation": 111, "user_id": 3480718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzFyh.jpg?s=128&g=1", "display_name": "Bharat Kotwani", "link": "https://stackoverflow.com/users/3480718/bharat-kotwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2648, "favorite_count": 1, "closed_date": 1442528112, "answer_count": 0, "score": 10, "last_activity_date": 1421877672, "creation_date": 1421874927, "last_edit_date": 1421877672, "question_id": 28076958, "link": "https://stackoverflow.com/questions/28076958/implement-ccavenue-payment-gateway", "closed_reason": "Needs more focus", "title": "Implement CCAvenue payment gateway", "body": "<p>I want to integrate CCAvenue payment gateway into my website using the Django framework in Python.</p>\n\n<p>I have a checkout page showing the calculated total amount and a \"Pay Now\" button. When the user clicks on the button, it should redirect to the CCAvenue payment gateway.</p>\n\n<p>Can anyone help me get started?</p>\n"}, {"tags": ["python", "tkinter", "python-3.4"], "comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1421875937, "post_id": 28076957, "comment_id": 44533329, "body": "<code>&#39;global&#39; overflow error</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 1, "creation_date": 1421875891, "post_id": 28077096, "comment_id": 44533304, "body": "Although the above answers the OP&#39;s question, I didn&#39;t fix the boolean logic and you should look carefully at Padraic&#39;s answer too."}], "tags": [], "owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "is_accepted": false, "score": -1, "last_activity_date": 1421875414, "creation_date": 1421875414, "answer_id": 28077096, "question_id": 28076957, "link": "https://stackoverflow.com/questions/28076957/what-can-i-assign-num1-in-order-that-it-updates-that-the-program-continues-pyt/28077096#28077096", "title": "What can I assign num1, in order that it updates that the program continues? Python Calculator", "body": "<p>StringVar is not a string, exactly. But you can get its string value with get(). Give this a try instead:</p>\n\n<pre><code>while num1.get()[g] is not \"+\"or\"-\"or\"*\"or\"/\":\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1421876304, "last_edit_date": 1421876304, "creation_date": 1421875565, "answer_id": 28077143, "question_id": 28076957, "link": "https://stackoverflow.com/questions/28076957/what-can-i-assign-num1-in-order-that-it-updates-that-the-program-continues-pyt/28077143#28077143", "title": "What can I assign num1, in order that it updates that the program continues? Python Calculator", "body": "<p>Firstly don't use <code>is</code> to compare strings, <code>while num1[g] is not \"+\"or\"-\"or\"*\"or\"/\":</code> will always evaluate to <code>True</code> as <code>+</code> as a boolean check will always be <code>True</code>:</p>\n\n<pre><code>In [5]: bool(\"+\")\nOut[5]: True\nIn [6]: i = 3    \nIn [7]: if i is not 4 or 3: # i is 3 but still we print 6 \n             print 6\n   ...:     \n6\n</code></pre>\n\n<p>Use something like:</p>\n\n<pre><code> while num1.get()[g]  not in {\"+\",\"-\",\"*\",\"/\"}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4471454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ujgN.png?s=128&g=1", "display_name": "JPott99", "link": "https://stackoverflow.com/users/4471454/jpott99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1423390246, "creation_date": 1421874919, "last_edit_date": 1422194172, "question_id": 28076957, "link": "https://stackoverflow.com/questions/28076957/what-can-i-assign-num1-in-order-that-it-updates-that-the-program-continues-pyt", "title": "What can I assign num1, in order that it updates that the program continues? Python Calculator", "body": "<p>I am trying to make a calculator in Python 3.4.2. The issue I am having, is that I am using:</p>\n\n<pre><code>StringVar()\n</code></pre>\n\n<p>You can see by the error message that this in inappropriate for my purposes.\nIs there an alternative?</p>\n\n<p>Here is the program:</p>\n\n<pre><code>import sys\nfrom tkinter import *\nroot=Tk()\nroot.title(\"Calculator\")\nframe=Frame(root)\nframe.pack()\ntopframe=Frame(root)\ntopframe.pack()\ns=1\n\ndef clear():\n    txtDisplay.delete(0,END)\n    return\n\ndef one():\n    global s\n    txtDisplay.insert(s,\"1\")\n    s+=1\ndef two():\n    global s\n    txtDisplay.insert(s,\"2\")\n    s+=1\ndef three():\n    global s\n    txtDisplay.insert(s,\"3\")\n    s+=1\ndef four():\n    global s\n    txtDisplay.insert(s,\"4\")\n    s+=1\ndef five():\n    global s\n    txtDisplay.insert(s,\"5\")\n    s+=1\ndef six():\n    global s\n    txtDisplay.insert(s,\"6\")\n    s+=1\ndef seven():\n    global s \n    txtDisplay.insert(s,\"7\")\n    s+=1\ndef eight():\n    global s\n    txtDisplay.insert(s,\"8\")\n    s+=1\ndef nine():\n    global s \n    txtDisplay.insert(s,\"9\")\n    s+=1\ndef zero():\n    global s\n    txtDisplay.insert(s,\"0\")\n    s+=1\ndef plus():\n    global s \n    txtDisplay.insert(s,\"+\")\n    s+=1\ndef minus():\n    global s  \n    txtDisplay.insert(s,\"-\")\n    s+=1\ndef times():\n    global s \n    txtDisplay.insert(s,\"*\")\n    s+=1\ndef divide():\n    global s \n    txtDisplay.insert(s,\"/\")\n    s+=1\ndef equals():\n    global num1\n    print(num1)\n    g=0\n    num2=str(num1)\n    number1=str(\"\")\n    while num1[g] is not \"+\"or\"-\"or\"*\"or\"/\":\n        number1=str(number1)+str(num2[g])\n        print(number1)\n        g=+1\n\n\n\n\nOne= Button(topframe, bd=20, text=\"1\",bg=\"green\", command=one)\nOne.grid(row=1, column=0)\nTwo= Button(topframe, bd=20, text=\"2\", bg=\"green\", command=two)\nTwo.grid(row=1, column=1)\nThree= Button(topframe, bd=20, text=\"3\", bg=\"green\", command=three)\nThree.grid(row=1, column=2)\nFour= Button(topframe, bd=20, text=\"4\", bg=\"green\", command=four)\nFour.grid(row=2, column=0)\nFive= Button(topframe, bd=20, text=\"5\", bg=\"green\", command=five)\nFive.grid(row=2, column=1)\nSix= Button(topframe, bd=20, text=\"6\", bg=\"green\", command=six)\nSix.grid(row=2, column=2)\nSeven= Button(topframe, bd=20, text=\"7\", bg=\"green\", command=seven)\nSeven.grid(row=3, column=0)\nEight= Button(topframe, bd=20, text=\"8\", bg=\"green\", command=eight)\nEight.grid(row=3, column=1)\nNine= Button(topframe, bd=20, text=\"9\",bg=\"green\", command=nine)\nNine.grid(row=3, column=2)\nZero= Button(topframe, bd=20, text=\"0\", bg=\"green\", command=zero)\nZero.grid(row=4, column=0)\nnum1=StringVar(\"\")\ntxtDisplay=Entry(frame, textvariable=num1, insertwidth=1, font=30, bg=\"Dark Orange\")\ntxtDisplay.grid(columnspan=3)\nEquals= Button(topframe, bd=20, text=\"=\", bg=\"green\", command=equals)\nEquals.grid(row=4, column=2)\nClear= Button(topframe, bd=20, text=\"C\", bg=\"green\", command=clear)\nClear.grid(row=4, column=1)\nPlus= Button(topframe, bd=20, text=\"+\", bg=\"green\", command=plus)\nPlus.grid(row=1, column=3)\nMinus= Button(topframe, bd=20, text=\"-\", bg=\"green\", command=minus)\nMinus.grid(row=2, column=3)\nTimes= Button(topframe, bd=20, text=\"*\", bg=\"green\", command=times)\nTimes.grid(row=3, column=3)\nDivide= Button(topframe, bd=20, text=\"/\", bg=\"green\", command=divide)\nDivide.grid(row=4, column=3)\n\n\nroot.mainloop()\n</code></pre>\n\n<p>The program is unfinished, but the error message I received was:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/tkinter/__init__.py\", line 1533, in __call__\n    return self.func(*args)\n  File \"/Users/JackPottage/Documents/Python Projects/Calculator/Calculator.py\", line 77, in equals\n    while num1[g] is not \"+\"or\"-\"or\"*\"or\"/\":\nTypeError: 'StringVar' object does not support indexing\n</code></pre>\n\n<p>Thanks for any help you can give.</p>\n"}, {"tags": ["python", "c", "windows-ce"], "answers": [{"tags": [], "owner": {"reputation": 2566, "user_id": 114265, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/AxupL.jpg?s=128&g=1", "display_name": "GR Envoy", "link": "https://stackoverflow.com/users/114265/gr-envoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1422023397, "creation_date": 1422023397, "answer_id": 28112067, "question_id": 28076918, "link": "https://stackoverflow.com/questions/28076918/having-problems-running-python-on-old-ce-device/28112067#28112067", "title": "Having Problems running Python on old CE device", "body": "<p>I found that the problem was the attributes on the CreateFile calls. For some reason on our device the '\\' directory needs different attributes then the '\\Application\\' folder.  mainly I needed to add the FILE_FLAG_BACKUP_SEMANTICS bit to the FlagAndAttributes field.</p>\n"}], "owner": {"reputation": 2566, "user_id": 114265, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/AxupL.jpg?s=128&g=1", "display_name": "GR Envoy", "link": "https://stackoverflow.com/users/114265/gr-envoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 28112067, "answer_count": 1, "score": -1, "last_activity_date": 1422023397, "creation_date": 1421874804, "last_edit_date": 1421951871, "question_id": 28076918, "link": "https://stackoverflow.com/questions/28076918/having-problems-running-python-on-old-ce-device", "title": "Having Problems running Python on old CE device", "body": "<p>I have a Python interpreter that runs on a CE device and is a C application. Currently the device comes configure with a root '\\' folder and a '\\Application' folder. If I install and run python on the '\\' drive everything is fine, but if I try to put it on the '\\Application' drive it will not run.</p>\n\n<p>In digging further, the problem is with the CreateFileW call. When trying to access '\\PythonLib' I get a normal error code of 80 saying the file exists, when I try to access '\\Application\\PythonLib' I get an error code of 5, or Access is Denied.</p>\n\n<p>Has anyone had any experience with this?  Any C++ app we develop in Visual Studio 2008 and run on the device has no problem accessing '\\Application', but anything we try with Python can not seem to resolve that path.</p>\n"}, {"tags": ["python", "python-2.7", "path", "pip"], "comments": [{"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 3, "creation_date": 1421874789, "post_id": 28076802, "comment_id": 44532748, "body": "Instead of attempting to answer the question, I&#39;ll offer some advice: Stop what you&#39;re doing and go read about virtualenvs: <a href=\"http://docs.python-guide.org/en/latest/dev/virtualenvs/\" rel=\"nofollow noreferrer\">docs.python-guide.org/en/latest/dev/virtualenvs</a>"}, {"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1421874869, "post_id": 28076802, "comment_id": 44532796, "body": "<code>pip</code> and <code>python</code> belong together as well as <code>pip3</code> and <code>python3</code>. Depending on what version you have installed, <code>pip</code>, <code>pip2</code>, <code>pip2.7</code> <code>python</code>, <code>python2</code> and <code>python2.7</code> all belong together. The same holds for <code>pip3</code>, <code>python3</code> and <code>python3.4</code>. When you install a new Python version, let&#39;s say 3.5, it&#39;ll install <code>python3.5</code> and update <code>python3</code> to use that version."}], "owner": {"reputation": 10194, "user_id": 3291506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fr49T.png?s=128&g=1", "display_name": "Startec", "link": "https://stackoverflow.com/users/3291506/startec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1421874382, "creation_date": 1421874382, "question_id": 28076802, "link": "https://stackoverflow.com/questions/28076802/understanding-the-different-versions-of-python-and-how-their-paths-operate", "title": "Understanding the different versions of Python and how their paths operate", "body": "<p>This question arises from the fact that I have multiple versions of Python installed, and therefore I believe multiple versions of <code>pip</code> as well as multiple places that Python packages could be installed.</p>\n\n<p>For instance, in the command line, typing <code>Python</code> and then <code>tab tab</code> produces the following output:</p>\n\n<pre><code>python             python2.7-32       python3.3m-config  pythonw2-32\npython-32          python2.7-config   python3.4          pythonw2.6\npython-config      python3            python3.4-32       pythonw2.7\npython2            python3-32         python3.4-config   pythonw2.7-32\npython2-32         python3-config     python3.4m         pythonw3\npython2-config     python3.3          python3.4m-config  pythonw3-32\npython2.6          python3.3-32       pythonw            pythonw3.3\npython2.6-config   python3.3-config   pythonw-32         pythonw3.3-32\npython2.7          python3.3m         pythonw2  \n</code></pre>\n\n<p>I have noticed that when running certain versions of <code>IDLE</code>, some packages I thought I installed, such as <code>requests</code> are not available.</p>\n\n<p>Am I correct that each time I use <code>pip</code> to install a package, I should specify which version of <code>pip</code> to use (in my case I have <code>pip     pip2    pip2.7  pip3    pip3.4</code> installed), and that will only install the package to it's corresponding Python version?</p>\n\n<p>Also, here both plain <code>python</code> and <code>pip</code> show up as possible commands. The first lines of my <code>$PATH</code> are <code>/Library/Frameworks/Python.framework/Versions/3.4/bin:/Library/Frameworks/Python.framework/Versions/2.7/</code> but <code>python</code> defaults to version 2.7 and <code>pip</code> defaults to an older version. Why is this? I thought that as soon as my OS finds the command available in the <code>PATH</code> it uses that version.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1421874491, "post_id": 28076796, "comment_id": 44532605, "body": "Is it required to do this in python?"}, {"owner": {"reputation": 2402, "user_id": 2502262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvS8O.jpg?s=128&g=1", "display_name": "kartikg3", "link": "https://stackoverflow.com/users/2502262/kartikg3"}, "edited": false, "score": 2, "creation_date": 1421874642, "post_id": 28076796, "comment_id": 44532663, "body": "This question seems pretty broad. It will be better if you can share some logic/code/research that you&#39;ve come up with that you are having troubles implementing in Python."}, {"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1421875027, "post_id": 28076796, "comment_id": 44532871, "body": "Are there more entries in the file? What&#39;s the reason the first Sarah needs to be removed but not the last Sarah?"}, {"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1421875040, "post_id": 28076796, "comment_id": 44532882, "body": "I see three main parts: reading the file, keeping track of names (a dictionary would do the trick) and storing at most three pieces of information about them (I would use a queue for that). Do you have specific questions? Own code?"}, {"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "reply_to_user": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1421875071, "post_id": 28076796, "comment_id": 44532895, "body": "@Daniel &quot;keep the last three entries&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 2, "last_activity_date": 1421876543, "last_edit_date": 1421876543, "creation_date": 1421875091, "answer_id": 28077008, "question_id": 28076796, "link": "https://stackoverflow.com/questions/28076796/write-last-three-entries-per-name-in-a-file/28077008#28077008", "title": "Write last three entries per name in a file", "body": "<p>Since this looks like csv data, use the <code>csv</code> module to read and write it.  As you read each line, store the rows grouped by the first column.  Store the line number along with the row so that they can be written out maintaining the same order as the input.  Use a bound deque to keep only the last three rows for each name.  Finally, sort the rows and write them out.</p>\n\n<pre><code>import csv\n\nby_name = defaultdict(lambda x: deque(x, maxlen=3))\n\nwith open('my_data.csv') as f_in\n    for i, row in enumerate(csv.reader(f_in)):\n        by_name[row[0]].append((i, row))\n\n# sort the rows for each name by line number, discarding the number\nrows = sorted(row[1] for value in by_name.values() for row in value, key=lambda row: row[0])\n\nwith open('out_data.csv', 'w') as f_out:\n    csv.writer(f_out).writerows(rows)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4078905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IpGmJe2issI/AAAAAAAAAAI/AAAAAAAAAA4/xIDbq8LTEng/photo.jpg?sz=128", "display_name": "Paul Williams", "link": "https://stackoverflow.com/users/4078905/paul-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 28077008, "answer_count": 1, "score": 1, "last_activity_date": 1430421651, "creation_date": 1421874353, "last_edit_date": 1421956018, "question_id": 28076796, "link": "https://stackoverflow.com/questions/28076796/write-last-three-entries-per-name-in-a-file", "title": "Write last three entries per name in a file", "body": "<p>I have the following data in a file:</p>\n\n<pre><code>Sarah,10\nJohn,5\nSarah,7\nSarah,8\nJohn,4\nSarah,2\n</code></pre>\n\n<p>I would like to keep the last three rows for each person.  The output would be:</p>\n\n<pre><code>John,5\nSarah,7\nSarah,8\nJohn,4\nSarah,2\n</code></pre>\n\n<p>In the example, the first row for Sarah was removed since there where three later rows.  The rows in the output also maintain the same order as the rows in the input.  How can I do this?</p>\n\n<p>Additional Information\nYou are all amazing - Thank you so much. Final code which seems to have been deleted from this post is -</p>\n\n<pre><code>import collections\n\nwith open(\"Class2.txt\", mode=\"r\",encoding=\"utf-8\") as fp:\n    count = collections.defaultdict(int)\n    rev = reversed(fp.readlines())\n    rev_out = []\n\n    for line in rev:\n        name, value = line.split(',')\n        if count[name] &gt;= 3:\n            continue\n        count[name] += 1\n        rev_out.append((name, value))\n\nout = list(reversed(rev_out))\n\nprint (out)\n</code></pre>\n"}, {"tags": ["python", "heroku", "flask", "upload"], "answers": [{"tags": [], "owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "is_accepted": true, "score": 3, "last_activity_date": 1490937057, "last_edit_date": 1495541379, "creation_date": 1490934008, "answer_id": 43132396, "question_id": 28076684, "link": "https://stackoverflow.com/questions/28076684/unable-to-upload-files-with-flask-on-heroku/43132396#43132396", "title": "Unable to upload files with Flask on Heroku", "body": "<p>Heroku is interrupting the request to store data at <code>uploads/</code> because  they prefer you <a href=\"https://stackoverflow.com/questions/12416738/how-to-use-herokus-ephemeral-filesystem\">use temporary storage</a> at <code>tmp/</code></p>\n\n<p>Any <code>tmp/</code> files will <strong>not</strong> be there when the dyno restarts because Heroku filesystems are <a href=\"https://stackoverflow.com/a/12418985/6085135\">ephemeral</a>. </p>\n\n<p>Following the <a href=\"https://12factor.net/\" rel=\"nofollow noreferrer\">12-factor</a> app principles, Heroku expects that if your app needs storage you'll use a storage service -- the popular solution is <a href=\"https://aws.amazon.com/s3/\" rel=\"nofollow noreferrer\">AWS S3</a> also available as an <a href=\"https://elements.heroku.com/addons/bucketeer\" rel=\"nofollow noreferrer\">add-on</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 9666595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b0eb27d3320d5f52bbb6f4acd9cb35?s=128&d=identicon&r=PG&f=1", "display_name": "cfactoid", "link": "https://stackoverflow.com/users/9666595/cfactoid"}, "is_accepted": false, "score": 3, "last_activity_date": 1572298162, "creation_date": 1572298162, "answer_id": 58598647, "question_id": 28076684, "link": "https://stackoverflow.com/questions/28076684/unable-to-upload-files-with-flask-on-heroku/58598647#58598647", "title": "Unable to upload files with Flask on Heroku", "body": "<p>This is incorrect, Heroku does not actually interrupt requests at <code>/uploads</code>. You are hitting the issue described <a href=\"https://help.heroku.com/N5O6E5XP/debugging-h18-server-request-interrupted-errors-in-python-applications\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The other answer is correct that any files not checked into git will be gone after a dyno cycle or rebuild, and that 12 factor principles should be followed, and if you need to keep the files for any length of time after upload, they should be sent to S3.</p>\n\n<p>However, the H18 error code most often means that the socket successfully connected, some data was sent as part of a response by the app, but then the socket was destroyed without completing the response.</p>\n\n<p>There aren't any tracebacks in your logs, so (from the linked help article above): </p>\n\n<blockquote>\n  <p>you'll need to look more closely at the handlers for the specific\n  request that's failing. Logging each step of the response, including\n  the x-request-id header, can help.</p>\n</blockquote>\n\n<p>Here are the docs on request routing on Heroku: <a href=\"https://devcenter.heroku.com/articles/http-routing\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/http-routing</a></p>\n"}], "owner": {"reputation": 663, "user_id": 2843275, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/90f66c4ae9513776e570d9ff3d68cfda?s=128&d=identicon&r=PG&f=1", "display_name": "T.J.", "link": "https://stackoverflow.com/users/2843275/t-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2391, "favorite_count": 1, "accepted_answer_id": 43132396, "answer_count": 2, "score": 6, "last_activity_date": 1572298162, "creation_date": 1421873923, "last_edit_date": 1490943521, "question_id": 28076684, "link": "https://stackoverflow.com/questions/28076684/unable-to-upload-files-with-flask-on-heroku", "title": "Unable to upload files with Flask on Heroku", "body": "<p>I'm attempting to add a file addition button that uploads a file to a folder on my Flask Heroku app but I get an application error when I hit the submit button.</p>\n\n<pre><code>class PhotoForm(Form):\n    photo = FileField('Your photo')\n    submit = SubmitField('Submit')\n\n@app.route('/upload', methods=('GET', 'POST'))\ndef upload():\n    form = PhotoForm()\n    if form.validate_on_submit():\n        filename = secure_filename(form.photo.data.filename)\n        form.photo.data.save(\"uploads/\" + filename)\n    else:\n        filename = None\n    return render_template('upload.html', form=form, filename=filename)\n</code></pre>\n\n<p>Here is the upload.html:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% import \"bootstrap/wtf.html\" as wtf %}\n{% block page_content %}\n&lt;form action=\"uploads/\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n    {{ wtf.quick_form(form)}}\n&lt;/form&gt;\n\n{{filename}}\n{% endblock %}\n</code></pre>\n\n<p>Here is the error it throws:</p>\n\n<pre><code>2015-01-21T20:52:24.834249+00:00 heroku[router]: sock=backend at=error code=H18\ndesc=\"Request Interrupted\" method=POST path=\"/uploads/\" host=xxxx.h\nerokuapp.com request_id=18dabdc3-400e-4c8b-ba8a-8d52d4cc1cb5 fwd=\"8.34.183.2\" dy\nno=web.1 connect=3ms service=6ms status=503 bytes=568\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "troposphere"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4237459"}, "is_accepted": false, "score": 0, "last_activity_date": 1421874040, "creation_date": 1421874040, "answer_id": 28076714, "question_id": 28076640, "link": "https://stackoverflow.com/questions/28076640/in-python-module-troposphere-i-am-getting-an-error-attributeerror-module-obj/28076714#28076714", "title": "In python module troposphere I am getting an error &quot;AttributeError: &#39;module&#39; object has no attribute &#39;EBSBlockDeviceMapping&#39;&quot;", "body": "<p>The <code>AttributeError</code> happens only when you have a class (in this case a module) and refer to an attribute that doesn't exist. It is like a <code>NameError</code> but for attributes of objects.</p>\n\n<p>You have imported a module like <code>import ... as ec2</code>. The module marked <code>...</code> does not have a function called <code>EBSBlockDeviceMapping</code>, so when you call it in your code, it gives an <code>AttributeError</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 243, "user_id": 4396468, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/4UOoT.jpg?s=128&g=1", "display_name": "efreedom", "link": "https://stackoverflow.com/users/4396468/efreedom"}, "is_accepted": false, "score": 0, "last_activity_date": 1424532981, "creation_date": 1424532981, "answer_id": 28647556, "question_id": 28076640, "link": "https://stackoverflow.com/questions/28076640/in-python-module-troposphere-i-am-getting-an-error-attributeerror-module-obj/28647556#28647556", "title": "In python module troposphere I am getting an error &quot;AttributeError: &#39;module&#39; object has no attribute &#39;EBSBlockDeviceMapping&#39;&quot;", "body": "<p>Here is what works:</p>\n\n<pre><code>        lc.BlockDeviceMappings.append(ec2.BlockDeviceMapping(\n                DeviceName = blockname,\n                Ebs=ec2.EBSBlockDevice(\n                    VolumeSize = deviceSize,\n                    DeleteOnTermination = DOT\n                    )\n                )\n        )\n</code></pre>\n\n<p>As pointed out by Reticality, EBSBlockDeviceMapping does not exist. Instead, I just needed to use BlockDeviceMapping and the ec2.EBSBlockDevice takes care of the EBS setup.</p>\n\n<p>Oh yeah, and the argument for DOT needs to be a boolean and not a string so\nuse 'DOT = False' and 'DOT = True' rather than 'DOT = \"false\"' and 'DOT = \"true\"'</p>\n"}], "owner": {"reputation": 243, "user_id": 4396468, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/4UOoT.jpg?s=128&g=1", "display_name": "efreedom", "link": "https://stackoverflow.com/users/4396468/efreedom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1424532981, "creation_date": 1421873740, "question_id": 28076640, "link": "https://stackoverflow.com/questions/28076640/in-python-module-troposphere-i-am-getting-an-error-attributeerror-module-obj", "title": "In python module troposphere I am getting an error &quot;AttributeError: &#39;module&#39; object has no attribute &#39;EBSBlockDeviceMapping&#39;&quot;", "body": "<p>I'm following the example of some other code that has been written. The code in question looks like this:</p>\n\n<pre><code>   if virtualname == \"ebs\":\n        if deviceSize == None:\n            deviceSize = 8\n\n            if delOnTerminate == None or delOnTerminate == \"true\":\n                DOT = \"true\"\n            else:\n                DOT = \"false\"\n\n        lc.BlockDeviceMappings.append(ec2.EBSBlockDeviceMapping(\n                                            DeviceName=blockname,\n                                            Ebs=ec2.EBSBlockDevice(VolumeSize=deviceSize,\n                                                                   DeleteOnTermination=DOT)))\n    else:\n        lc.BlockDeviceMappings.append(ec2.BlockDeviceMapping(DeviceName=blockname,\n                                                             VirtualName=virtualname))\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 149, "user_id": 55255, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/685f34bc99ee6d12c6f6966250a2e4e6?s=128&d=identicon&r=PG", "display_name": "tRi11", "link": "https://stackoverflow.com/users/55255/tri11"}, "edited": false, "score": 0, "creation_date": 1422287969, "post_id": 28076639, "comment_id": 44678910, "body": "Can anyone confirm whether this is a bug or not?  Even when I make the sub_items serializer read only it still deletes it.  This cannot be the designed behavior."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 55255, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/685f34bc99ee6d12c6f6966250a2e4e6?s=128&d=identicon&r=PG", "display_name": "tRi11", "link": "https://stackoverflow.com/users/55255/tri11"}, "edited": false, "score": 0, "creation_date": 1421952261, "post_id": 28094357, "comment_id": 44568472, "body": "Thanks for the suggestion, I wasn&#39;t aware that serializers had a create.  I&#39;ve updated my original question with the views.py, it&#39;s just a rest framework viewset."}], "tags": [], "owner": {"reputation": 867, "user_id": 2147732, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d9410ef13b93727ee523977ce8869227?s=128&d=identicon&r=PG", "display_name": "Scofield77", "link": "https://stackoverflow.com/users/2147732/scofield77"}, "is_accepted": false, "score": 0, "last_activity_date": 1421945620, "creation_date": 1421945620, "answer_id": 28094357, "question_id": 28076639, "link": "https://stackoverflow.com/questions/28076639/how-do-i-write-a-django-rest-framework-serializer-to-save-a-nested-hierarchy-con/28094357#28094357", "title": "How do I write a django-rest-framework serializer to save a nested hierarchy containing a generic model?", "body": "<p>Could you please give more details about your <code>views.py</code>? Or you can have a try to override your <code>create(self, validated_data)</code> in your <code>GenericItemSerializer</code> as follow:</p>\n\n<pre><code>class GenericItemSerializer(serializers.ModelSerializer):\n    sub_items = GenericSubItemSerializer(many=True, required=False, allow_add_remove=True)\n\n    class Meta:\n        model = models.GenericItem\n        fields = ('id', 'details', 'sub_items', )\n\n    def create(self, validate_data):\n        subitemdata = validate_data.pop('sub_items')\n        subitemobj = GenericSubItem.objects.create(**subitemdata)\n        GenericItem.objects.create(sub_items=subitemobj, **validate_data)\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 55255, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/685f34bc99ee6d12c6f6966250a2e4e6?s=128&d=identicon&r=PG", "display_name": "tRi11", "link": "https://stackoverflow.com/users/55255/tri11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421952056, "creation_date": 1421873733, "last_edit_date": 1421952056, "question_id": 28076639, "link": "https://stackoverflow.com/questions/28076639/how-do-i-write-a-django-rest-framework-serializer-to-save-a-nested-hierarchy-con", "title": "How do I write a django-rest-framework serializer to save a nested hierarchy containing a generic model?", "body": "<p>I am using django 1.6 and django-rest-framework 2.4.  I have a generic model that has a foreign key relationship to another model.  The generic model can obviously be associated with any other host model.  I want to be able to save the host model and the generic model with all its associations in one go.</p>\n\n<p>For example:</p>\n\n<p>models.py:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.contenttypes.generic import GenericForeignKey, GenericRelation\nfrom django.contrib.contenttypes.models import ContentType\n\n\nclass GenericItem(models.Model):\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = GenericForeignKey('content_type', 'object_id')\n\n    details = models.TextField(blank=True)\n\n\nclass GenericSubItem(models.Model):\n    generic_item = models.ForeignKey(GenericItem, null=True, blank=True, related_name=\"sub_items\")\n\n    details = models.TextField(blank=True)\n\n\nclass Host(models.Model):\n    details = models.TextField(blank=True)\n\n    generic_items = GenericRelation(GenericItem, content_type_field='content_type', object_id_field='object_id')\n</code></pre>\n\n<p>serializers.py:</p>\n\n<pre><code>from rest_framework import serializers\nfrom . import models\n\n\nclass GenericSubItemSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = models.GenericSubItem\n        fields = ('id', 'details', )\n\n\nclass GenericItemSerializer(serializers.ModelSerializer):\n    sub_items = GenericSubItemSerializer(many=True, required=False, allow_add_remove=True)\n\n    class Meta:\n        model = models.GenericItem\n        fields = ('id', 'details', 'sub_items', )\n\n\nclass HostSerializer(serializers.ModelSerializer):\n    generic_items = GenericItemSerializer(many=True, required=False, allow_add_remove=True)\n\n    class Meta:\n        model = models.Host\n        fields = ('id', 'details', 'generic_items', )\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>from rest_framework import viewsets\nfrom . import serializers, models\n\n\nclass HostView(viewsets.ModelViewSet):\n    queryset = models.Host.objects.all()\n    serializer_class = serializers.HostSerializer\n</code></pre>\n\n<p>The problem here is that the sub_items don't get saved, even though they are posted.  Even worse, if you add a sub item through the shell, it will display it fine but when you save, the sub item is deleted.</p>\n\n<p>How should the serializer be written so that saving the host will save everything else?</p>\n\n<p>Thanks,</p>\n\n<p>Paul</p>\n"}, {"tags": ["python", "variables", "transfer"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1421873565, "post_id": 28076561, "comment_id": 44532166, "body": "you probably need <code>if __name__ == &quot;__main__&quot;</code> and put any  functions calls  after that <a href=\"http://stackoverflow.com/questions/419163/what-does-if-name-main-do\" title=\"what does if name main do\">stackoverflow.com/questions/419163/what-does-if-name-main-do</a>"}, {"owner": {"reputation": 29178, "user_id": 206720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/394087ac877df47e3b54f03fe97df063?s=128&d=identicon&r=PG", "display_name": "Ondrej Slint&#225;k", "link": "https://stackoverflow.com/users/206720/ondrej-slint%c3%a1k"}, "edited": false, "score": 0, "creation_date": 1421873567, "post_id": 28076561, "comment_id": 44532167, "body": "Could you edit your post with code from both files?"}, {"owner": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "edited": false, "score": 0, "creation_date": 1421874208, "post_id": 28076561, "comment_id": 44532470, "body": "Also, Padraic, I am only a beginner, and sorry, but I have no idea what you meant by that :("}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421874329, "post_id": 28076561, "comment_id": 44532534, "body": "@AlexCarr, check out the link but to be honest I think you are going to have a problem if you think you can share a variable among wo scipts"}, {"owner": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "edited": false, "score": 0, "creation_date": 1421874449, "post_id": 28076561, "comment_id": 44532585, "body": "Ok, now I understand, but I still don&#39;t understand what the function after it should be..."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421874572, "post_id": 28076561, "comment_id": 44532635, "body": "You would have to put your code in functions, as it is now it is going to run anytime you import or run the script yourself"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421874688, "post_id": 28076561, "comment_id": 44532687, "body": "also you cannot increase or decrease health etc.. if they are strings.You should keep them as ints, type is a builtin function so best  not use that as a variable name"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421874907, "post_id": 28076561, "comment_id": 44532813, "body": "it is pretty pointless trying to import money. You may as well just declare it in sandy.py. Also you should use <code>if&#47;elifs&#39;s</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "edited": false, "score": 0, "creation_date": 1421874316, "post_id": 28076732, "comment_id": 44532521, "body": "What should the function after &#39;if <b>name</b> == &#39;<b>main</b>&#39;&#39; be? All I want to do is transfer it so that at a later date I can print it."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "edited": false, "score": 0, "creation_date": 1421874371, "post_id": 28076732, "comment_id": 44532552, "body": "It&#39;s all the statements you don&#39;t want to execute on import."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "edited": false, "score": 0, "creation_date": 1421874585, "post_id": 28076732, "comment_id": 44532644, "body": "Does it work as you like? Be sure to mark as answer."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421874796, "post_id": 28076732, "comment_id": 44532754, "body": "@MalikBrahimi. there is way more to be done to actually get anywhere near what the OP wants to do"}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1421875008, "post_id": 28076732, "comment_id": 44532864, "body": "OP actually changed his question after the time of my response."}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421874558, "last_edit_date": 1421874558, "creation_date": 1421874103, "answer_id": 28076732, "question_id": 28076561, "link": "https://stackoverflow.com/questions/28076561/how-to-transfer-a-variable-from-one-file-to-another-in-python/28076732#28076732", "title": "How to transfer a variable from one file to another in Python", "body": "<p>You need to check for the main running file:</p>\n\n<p><code>gold.py</code></p>\n\n<pre><code>money = 1000000\n\nif __name__ == '__main__':\n    money = 100 # never actually called\n</code></pre>\n\n<p><code>sandy1.py</code></p>\n\n<pre><code>from gold import money \n\nif __name__ == '__main__':\n    print money # outputs 1000000\n</code></pre>\n\n<p>Basically, these statements allow them to run on their own or with one another. The main file imports <code>money</code> without changing it's value to 100. This is because it is not the main file due to the nature of the import. However, in <code>sandy1.py</code> the money will be printed because it is the main file.</p>\n"}, {"comments": [{"owner": {"reputation": 23517, "user_id": 287976, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8cf3090cda1c829f3f8df0a3796fc60c?s=128&d=identicon&r=PG", "display_name": "brandizzi", "link": "https://stackoverflow.com/users/287976/brandizzi"}, "edited": false, "score": 0, "creation_date": 1421874936, "post_id": 28076956, "comment_id": 44532824, "body": "Your code has many other problems, but I believe you are going to explore it a bit more so I&#39;ll not annoy you trying to solve them before you discover them :)"}], "tags": [], "owner": {"reputation": 23517, "user_id": 287976, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8cf3090cda1c829f3f8df0a3796fc60c?s=128&d=identicon&r=PG", "display_name": "brandizzi", "link": "https://stackoverflow.com/users/287976/brandizzi"}, "is_accepted": false, "score": -1, "last_activity_date": 1421875331, "last_edit_date": 1421875331, "creation_date": 1421874917, "answer_id": 28076956, "question_id": 28076561, "link": "https://stackoverflow.com/questions/28076561/how-to-transfer-a-variable-from-one-file-to-another-in-python/28076956#28076956", "title": "How to transfer a variable from one file to another in Python", "body": "<p>The name of an imported module does not include the <code>.py</code> extension. You should import from <code>gold</code>, not from <code>gold.py</code>:</p>\n\n<pre><code>from gold import money\nimport os\nhealth = '100'\n# etc. etc.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 3985039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jl7ZJ.png?s=128&g=1", "display_name": "Jacob Silverman", "link": "https://stackoverflow.com/users/3985039/jacob-silverman"}, "is_accepted": false, "score": -1, "last_activity_date": 1421875149, "creation_date": 1421875149, "answer_id": 28077016, "question_id": 28076561, "link": "https://stackoverflow.com/questions/28076561/how-to-transfer-a-variable-from-one-file-to-another-in-python/28077016#28077016", "title": "How to transfer a variable from one file to another in Python", "body": "<p>Like said above you can use\n<code>if __name__ == \"__main__\":</code> this goes at the bottom of your file and with this you can call what ever functions you want to be run. So just make your money variable a function.\nAnother solution would to just call you function using bash from python.</p>\n\n<p><code>import os, sys<br>\nos.system(python gold.py)</code></p>\n\n<p>don't forget to change your directory to the path that you saved your gold.py. Although this will not be a variable so the best solution is this. </p>\n\n<p><code>import subprocess\noutput = subprocess.check_output(\"python (directorypath)/gold.py\", shell=True)\nprint output[:-1]</code></p>\n\n<p>This will assign the output of your bash command to the variable output. I did print output[:-1] because usually the variable will have \"\\n\" at the end for some reason so I just excluded that.</p>\n"}], "owner": {"reputation": 1, "user_id": 4479976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVPmc.jpg?s=128&g=1", "display_name": "Alex Carr", "link": "https://stackoverflow.com/users/4479976/alex-carr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1291, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1421875331, "creation_date": 1421873394, "last_edit_date": 1421874606, "question_id": 28076561, "link": "https://stackoverflow.com/questions/28076561/how-to-transfer-a-variable-from-one-file-to-another-in-python", "title": "How to transfer a variable from one file to another in Python", "body": "<p>I'm trying to get the variable 'money' from the file 'gold.py' to the file 'sandy1.py', but it seems impossible to get it over. I've tried <code>from gold.py import money</code> but that just imports the whole thing and runs it.</p>\n\n<p>Code from Sandy1.py:</p>\n\n<pre><code>from gold.py import money\nimport os\nhealth = '100'\nprint 'Welcome to Sandy, the modern day text-based RPG! Type help to view commands.'\nwhile 1 + 1 == 2:\n    main = raw_input('')    \n    if main == 'suicide':\n        print 'Goodbye cruel world...'\n        health = '0'\n        print 'You died, type respawn to reset your health.'\n        main\n\n    if main == 'respawn':\n        print '*Your soul re-enters your body and you come back to life*'\n        health = '100'\n        main\n\n    if main == 'health':\n        print 'Your health is %r' % (health) \n        main = raw_input('')\n\n    if main == 'quests':\n        print 'Quest List: Gold, The Creep'\n        main\n\n    if main == 'Gold':\n        os.system('gold.bat')\n        main\n\n    if main == 'money':\n        print 'You have %d coins' % (money)\n        main\n\n    if main == 'help':\n        print 'Commands: suicide, respawn, health, quests, money'\n</code></pre>\n\n<p>Code from gold.py:</p>\n\n<pre><code>import os\n\nmoney = '0'\nhealth = '100'\n\n print 'You are at home waiting for the mail, when the mailman comes rushing up to you'\n print 'Mailman: Oi, you, on the way up a bear attacked me and I lost all my gold, could you go get it?'\ntype = raw_input('')\nif type == 'ok':\n    print 'Mailman: Thanks so much!'\n    print 'Quest started: Gold'\n    print 'You begin to venture out of your garden and down the lane, when you encounter the bear. Do you fight it, hide from it, or run back home?'\n    part1 = raw_input('')\n    if part1 == 'fight it':\n        print 'You ready your fist to fight the bear, when it leaps on you and rips your head off in one. GAME OVER!'\n        health = '0'\n        os.system('sandy1.bat')\n    if part1 == 'run back home':\n        print 'You escaped with your life... But you failed the quest. GAME OVER!'\n        os.system('sandy1.bat')\n    if part1 == 'hide from it':\n        print 'You run and hide from it. It only just misses you. Whew, that was a close one.'\n        print 'As you carry on walking, you see a stream. Do you jump it, swim it, or go around it?'\n        part2 = raw_input('')\n    if part2 == 'swim it':\n        print 'You try to swim across but get eaten by a crocodile. GAME OVER!'\n        health = '0'\n        os.system('sandy1.bat')\n    if part2 == 'go around it':\n        print 'You start to run around it, but you run into another bear on the way. GAME OVER!'\n        health = '0'\n        os.system('sandy1.bat')\n    if part2 == 'jump it':\n        print 'You successfully jump over the stream and land safely on the other side.'\n        print 'There it is, the gold! You run over and grab the sack, then go back home, where you return it to the mailman.'\n        print 'You: Here you go, sir.'\n        print 'Mailman: Thank you. Here is some money for your deeds.'\n        print 'You gain 5 coins'\n        money = '5'\n        print 'Quest Completed: Gold'\n        os.system('sandy1.bat')\n</code></pre>\n\n<p>Sorry if it's messy, it's the best way I could transfer it.</p>\n"}, {"tags": ["python", "performance", "python-internals", "slots"], "comments": [{"owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "edited": false, "score": 0, "creation_date": 1421873750, "post_id": 28076537, "comment_id": 44532262, "body": "what is the purpose of the program? I&#39;m sorry, but since I have no idea what it does, the code is rather ... difficult to understand. Thanks!"}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1421873847, "post_id": 28076537, "comment_id": 44532295, "body": "Probably won&#39;t get you more performance - but it would be more beautiful (&quot;Pythonic&quot;) to do: <code>for  attr, element in zip(o.__slots__, l): setattr(o, attr, l)</code>"}, {"owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "edited": false, "score": 1, "creation_date": 1421874121, "post_id": 28076537, "comment_id": 44532423, "body": "My guess is that your problem is too specific.  I think it requires a lot more context (probably too much for SO?) to give you a good answer."}, {"owner": {"reputation": 6168, "user_id": 435460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2d224ddec1592dc623f013100685da0?s=128&d=identicon&r=PG", "display_name": "JesseBuesking", "link": "https://stackoverflow.com/users/435460/jessebuesking"}, "reply_to_user": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1421874461, "post_id": 28076537, "comment_id": 44532588, "body": "@jsbueno I do like your &quot;Pythonic&quot; method as it is easier to read, but the performance is a bit worse (roughly 5% from a quick benchmark)."}, {"owner": {"reputation": 1383, "user_id": 4467874, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U1H-e8ce8oE/AAAAAAAAAAI/AAAAAAAABzM/KnTPsb6fkXY/photo.jpg?sz=128", "display_name": "bav", "link": "https://stackoverflow.com/users/4467874/bav"}, "edited": false, "score": 0, "creation_date": 1421877936, "post_id": 28076537, "comment_id": 44534358, "body": "Why you need an object (instance of <code>A</code>) at first place? Python can do heavy processing with plain data structures. And &quot;oop&quot; way often is a source of unnecessary complexity."}], "answers": [{"comments": [{"owner": {"reputation": 6168, "user_id": 435460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2d224ddec1592dc623f013100685da0?s=128&d=identicon&r=PG", "display_name": "JesseBuesking", "link": "https://stackoverflow.com/users/435460/jessebuesking"}, "edited": false, "score": 1, "creation_date": 1422041648, "post_id": 28087582, "comment_id": 44608842, "body": "I&#39;ll try and give this a shot today and report back. For the <code>l</code> name issue, I actually use more descriptive names, however I slimmed them for demo usage in my question; good call on that either way."}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 2, "last_activity_date": 1421925921, "creation_date": 1421925921, "answer_id": 28087582, "question_id": 28076537, "link": "https://stackoverflow.com/questions/28076537/create-slots-object-instance-performance/28087582#28087582", "title": "Create slots object instance performance", "body": "<p>So, I can have some ideas there, but they'd be more or less speculative.\nOne idea is to use named tuples, instead of direct object attributes.</p>\n\n<p>The downside is that, unless your classes themselves inherit from namedtuples (and there would be some hacking needed), you will have an extra component in the path to the attributes.</p>\n\n<p>But them, something along:</p>\n\n<pre><code>from collections import namedtuple\n\nclass MyClass42(object):\n    __slots__ = [\"attrs\"]\n    scheme = namedtuple(\"attrs\", \"attr1 attr2 attr3 attr4\")\n\n    def __init__(self, attrs):\n        self.attrs = self.scheme(*attrs)\n\n# and to create the classes:\no = cls(attrs)\n\n# the downsides are that you have to access attributes like\n\no.attrs.attr1\n# and all such attributes are imutable :-/\n</code></pre>\n\n<p>Note that you can just use the \"cls\" var as a callable to build\nan instance in Python - unlike some languages \n in which you need the literal class name. \n no need to call <code>cls.__new__</code> and populate the attributes\n\"manually\". This will move </p>\n\n<p>(on a side note, avoiding 1 letter variable names improves readability a lot,\nbut if you prefer to do so, you should really  avoid the name <code>'l'</code> as it just looks like <code>'1'</code> - I've used <code>'attrs'</code> above)</p>\n"}, {"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 1, "last_activity_date": 1421926610, "creation_date": 1421926610, "answer_id": 28087845, "question_id": 28076537, "link": "https://stackoverflow.com/questions/28076537/create-slots-object-instance-performance/28087845#28087845", "title": "Create slots object instance performance", "body": "<p>Another try would be to assign the values as a list to the objects, and handle access to them lazily in a <code>__getattribute__</code> methods. While this will almost certainly spare you time in object creation, it will transfer that time to first attribute usage (but them, I don't know if you really have to access all attributes on all objects - you could fine tune your strategy) - and you will have a huge impact in memory usage, if that is an issue.</p>\n\n<pre><code>class MyClass42(object):\n    __slots__ = [\"raw_attrs\", \"attr1\", \"attr2\", ...]\n\n\n    def __init__(self, attrs):\n        self.raw_attrs = attrs\n\n    def __getattr__(self, attr_name):\n        attr = self.raw_attrs[self.__slots__.index(attr_name) - 1]\n        setattr(self, attr_name, attr)\n        return attr\n</code></pre>\n"}], "owner": {"reputation": 6168, "user_id": 435460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2d224ddec1592dc623f013100685da0?s=128&d=identicon&r=PG", "display_name": "JesseBuesking", "link": "https://stackoverflow.com/users/435460/jessebuesking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1421926610, "creation_date": 1421873296, "last_edit_date": 1421877420, "question_id": 28076537, "link": "https://stackoverflow.com/questions/28076537/create-slots-object-instance-performance", "title": "Create slots object instance performance", "body": "<p>I have a piece of code that generates an instance of an object using a list of values. For example:</p>\n\n<p>Given a simple class implementing <code>__slots__</code></p>\n\n<pre><code>class A(object):\n  __slots__ = ('a', 'b')\n</code></pre>\n\n<p>and a list of values</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 2]\n</code></pre>\n\n<p>we create a new instance of the object via</p>\n\n<pre><code>&gt;&gt;&gt; o = A.__new__(A)\n&gt;&gt;&gt; o\n&lt;__main__.A object at 0x0617AE70&gt;\n</code></pre>\n\n<p>we then fill in the attributes of the object using the elements in the list</p>\n\n<pre><code>&gt;&gt;&gt; for idx, element in enumerate(l):\n...   setattr(o, o.__slots__[idx], element)\n&gt;&gt;&gt; o.a\n1\n&gt;&gt;&gt; o.b\n2\n</code></pre>\n\n<p>I'm performing this in a loop over many lists of values, and after profiling my program this is where it spends a lot of it's time. I'm wondering if there's a better way to do this that's faster using plain python (no pypy or cython).</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>My program actually calls <code>cls.__new__(cls)</code> from a method that's inherited by my <code>__slots__</code> object. Since I don't know the class that's calling the method, this was the only way I found to create the new instance of that particular class type.</li>\n<li>I'm creating these objects from a file containing values, but this is a requirement of the program.</li>\n</ul>\n"}, {"tags": ["python", "exception", "flask"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 7, "last_activity_date": 1421874016, "creation_date": 1421874016, "answer_id": 28076710, "question_id": 28076503, "link": "https://stackoverflow.com/questions/28076503/catch-an-exception-and-displaying-a-custom-error-page/28076710#28076710", "title": "Catch an exception and displaying a custom error page", "body": "<p>You need to register an error handler for the exception.  The error handler behaves like a normal view, it should return a response (or response-like data).  In this case, I'm assuming you want to ultimately send a 500 status code, so that's why there's a <code>, 500</code> along with the return.  The handler receives the exception instance as the first argument, so you can use that when rendering a template if it has special information.</p>\n\n<pre><code>class SpecificException(Exception):\n    pass\n\n@app.errorhandler(SpecificException)\ndef handle_specific_exception(e):\n    return render_template('errors/specific_exception.html', e=e), 500\n</code></pre>\n"}], "owner": {"reputation": 3970, "user_id": 1352749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3d72b87946369cced309b80d7653d76?s=128&d=identicon&r=PG", "display_name": "clifgray", "link": "https://stackoverflow.com/users/1352749/clifgray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 28076710, "answer_count": 1, "score": 4, "last_activity_date": 1422636154, "creation_date": 1421873187, "last_edit_date": 1422636154, "question_id": 28076503, "link": "https://stackoverflow.com/questions/28076503/catch-an-exception-and-displaying-a-custom-error-page", "title": "Catch an exception and displaying a custom error page", "body": "<p>I have a Flask app.  I made a custom exception in one of my libraries related to a very specific error that I would like to notify the user about.</p>\n\n<p>What I would like to happen is whenever this exception is thrown have Flask go to a default page for this exception with a short explanation of what the user needs to do.</p>\n\n<p>I have</p>\n\n<pre><code>class SpecificException(Exceptions):\n    pass\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>def __verify_compatible_version(self):\n    if self.version != VERSION:\n        raise SpecificException (\"detected incompatible version\")\n</code></pre>\n\n<p>I am not certain how to do that. The <a href=\"http://flask.pocoo.org/docs/0.10/patterns/errorpages/#error-handlers\" rel=\"nofollow\">docs</a> seem to make clear it is possible but I don't see any good examples nor advice for how to do it.  How can I display a custom page to handle my custom exception?</p>\n"}, {"tags": ["python", "iterator", "generator"], "comments": [{"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1421873299, "post_id": 28076460, "comment_id": 44532032, "body": "If you need to consume a value more than once, it is probably better to have them in a persistent data structure, like <code>list</code> instead of trying to force a generator to handle it. In fact, the need for a value more than one time is one of the overriding considerations described when people write polemics about when to use a list vs. when to use a generator. So, in short, why not also store your values to a list as you consume them? If only a small subset needs to be stored (based on known-in-advance, or easily computable, properties) then just store those specific generator outputs."}, {"owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1421873508, "post_id": 28076460, "comment_id": 44532133, "body": "I thought about it, but if I create a list of all those values,  memory consumption would be a problem because I&#39;m dealing with arrays of images."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1421873699, "post_id": 28076460, "comment_id": 44532239, "body": "It isn&#39;t important that it is images, it could be just a stream of integers if it was large enough. The point is that you are running into a fundamental problem. How do you repeatedly consume values from a data supply that is too big to fit into memory? There are many answers: split your data up into segments that don&#39;t have to be processed together, such that for each segment the data is small enough to fit in memory, possibly distributing to many processors. Or you can simulate swapping by loading just some of the data, saving what you need, then continuing."}, {"owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1421873795, "post_id": 28076460, "comment_id": 44532276, "body": "@Eithos Well, I&#39;m using one value (an iterator of arrays) in another generator after a few steps in the pipeline. Other than that, the generators consume previous iterators without requiring other values."}, {"owner": {"reputation": 1607, "user_id": 2626001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9221b03e2845c2c5689cc153349aaf?s=128&d=identicon&r=PG", "display_name": "swstephe", "link": "https://stackoverflow.com/users/2626001/swstephe"}, "edited": false, "score": 1, "creation_date": 1421873867, "post_id": 28076460, "comment_id": 44532302, "body": "Yield can return tuples, so you can have your second generator yield &quot;i,i**2&quot;, then the third generator gets both values instead of just the result of the second generator."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 1607, "user_id": 2626001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9221b03e2845c2c5689cc153349aaf?s=128&d=identicon&r=PG", "display_name": "swstephe", "link": "https://stackoverflow.com/users/2626001/swstephe"}, "edited": false, "score": 0, "creation_date": 1421874035, "post_id": 28076460, "comment_id": 44532376, "body": "@swstephe But, for anything beyond a trivial problem, you&#39;ll be building in a dependence on chaining a computed value, and all the args that went into its computation, all the time. You&#39;ll be passing an increasingly complicated set of values to each function in the sequence. In this example it&#39;s simple, an index and the square of the index. But for image processing, this would be quite a bit worse."}, {"owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "reply_to_user": {"reputation": 1607, "user_id": 2626001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9221b03e2845c2c5689cc153349aaf?s=128&d=identicon&r=PG", "display_name": "swstephe", "link": "https://stackoverflow.com/users/2626001/swstephe"}, "edited": false, "score": 0, "creation_date": 1421874070, "post_id": 28076460, "comment_id": 44532393, "body": "@swstephe Oh, yes, I tried that approach, but I think there is a problem because I&#39;m not sure the second generator contains both arrays I need in the third generator. I will check that again."}, {"owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "reply_to_user": {"reputation": 1607, "user_id": 2626001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9221b03e2845c2c5689cc153349aaf?s=128&d=identicon&r=PG", "display_name": "swstephe", "link": "https://stackoverflow.com/users/2626001/swstephe"}, "edited": false, "score": 0, "creation_date": 1421874542, "post_id": 28076460, "comment_id": 44532621, "body": "@swstephe Yes, I just confirmed the second generator doesn&#39;t contain the arrays I need in the third generator."}, {"owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1421874889, "post_id": 28076460, "comment_id": 44532805, "body": "@prpl.mnky.dshwshr Well, this case is fundamentally a pipeline and I would be able to process everything in a single machine in a reasonable amount of time. Therefore, I don&#39;t want to give up that simplicity by splitting the data if I don&#39;t have to. However, you can also argue that the data is already split in very manageable units."}], "owner": {"reputation": 8098, "user_id": 460147, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/odDrA.png?s=128&g=1", "display_name": "Robert Smith", "link": "https://stackoverflow.com/users/460147/robert-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421880560, "creation_date": 1421873037, "last_edit_date": 1421880560, "question_id": 28076460, "link": "https://stackoverflow.com/questions/28076460/how-can-i-obtain-previous-values-in-a-pipeline-using-generators", "title": "How can I obtain previous values in a pipeline using generators?", "body": "<p>I'm using some generators to build a processing pipeline in Python. However, I noticed that after several processing steps, I need a value that was computed previously (in a previous generator.) As an example:</p>\n\n<pre><code>from itertools import izip, tee\n\n# first generator\ndef gen():\n    for i in range(10):\n        yield i\n# second generator that uses gen's values\ndef gen2(x):\n    for i in x:\n        yield i**2\n\n# third generator that requires values from gen and gen2\ndef gen3(iter_, iter_2):\n    for iter1, iter2 in izip(iter_, iter_2):\n        yield iter1*iter2\n</code></pre>\n\n<p>I would use it like this:</p>\n\n<pre><code>x, x_2 = tee(gen())\ny = gen2(x)\nz = gen3(x_2, y)\n\nnext(z)\n</code></pre>\n\n<p>There are a couple of issues, though. </p>\n\n<ol>\n<li><p>I need to create a copy of <code>gen</code>'s values because the second generator consumes the values that also need to be used by <code>gen3</code>. </p></li>\n<li><p>It is a bit awkward to try to obtain previous values in a pipeline. It doesn't seem to be something that generators are suitable for. </p></li>\n</ol>\n\n<p>The pipeline I have requires previous values only once, so I'm a bit hesitant to use OOP for this situation. I can't really use a list instead of a generator in most steps, because memory consumption would be too high. What is a good way to address this issue?</p>\n"}, {"tags": ["python", "sorting", "namedtuple"], "comments": [{"owner": {"reputation": 13285, "user_id": 157770, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/870524e51f7b2cf270f9053abea676d5?s=128&d=identicon&r=PG", "display_name": "AlG", "link": "https://stackoverflow.com/users/157770/alg"}, "edited": false, "score": 0, "creation_date": 1421872702, "post_id": 28076331, "comment_id": 44531734, "body": "Welcome to SO! Only one question at a time please. Please add the complete error message and where in your code it is indicating."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421872745, "post_id": 28076331, "comment_id": 44531764, "body": "@howaboutNO nothing in his code appears to be incorrect syntax to me."}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421872833, "post_id": 28076331, "comment_id": 44531805, "body": "It&#39;s correct syntax, refer the guy to the faq about how to post questions and errors (but give him a chance), and yes his order of declarations is incorrect."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "edited": false, "score": 0, "creation_date": 1421872838, "post_id": 28076331, "comment_id": 44531809, "body": "@howaboutNO that&#39;s a <a href=\"https://www.python.org/dev/peps/pep-3107/\" rel=\"nofollow noreferrer\">function annotation</a>"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421873007, "post_id": 28076331, "comment_id": 44531898, "body": "As an aside: can you use <code>namedtuple</code>s that way? I thought <code>fields</code> had to be an iterable, so it would have to be <code>[&#39;name&#39;,&#39;cuisine&#39;,&#39;phone&#39;,&#39;dish&#39;,&#39;price&#39;]</code>"}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421873576, "post_id": 28076331, "comment_id": 44532173, "body": "@AdamSmith re:aside It seems so, I presume its because it&#39;s not possible to create a key with a space in it i.e. [&quot;dish price&quot;] would not be a valid namedtuple field, even though it&#39;s a valid dict field."}], "answers": [{"comments": [{"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421873985, "post_id": 28076390, "comment_id": 44532352, "body": "What I still don&#39;t understand is what the point of annotations without assertions is, or compiler optimization for that matter..."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421874113, "post_id": 28076390, "comment_id": 44532419, "body": "It&#39;s a bit like building hardware for something without any software support for that hardware. You can &quot;bolt on&quot; introspection later on, especially automatically in your IDE or etc. <a href=\"https://www.python.org/dev/peps/pep-3107/\" rel=\"nofollow noreferrer\">the PEP</a> has more info under the header <a href=\"https://www.python.org/dev/peps/pep-3107/#use-cases\" rel=\"nofollow noreferrer\">Use Cases</a>"}, {"owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421874355, "post_id": 28076390, "comment_id": 44532542, "body": "It seems to me if one can write a func <code>def restaurant_price (Restaurant: Restaurant) -&gt; float</code>  - and then pass a completely different object and have it return a string, then it&#39;s kind of self defeating clarity. Why not at least enforce annotations for whoever uses them?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "edited": false, "score": 0, "creation_date": 1421874546, "post_id": 28076390, "comment_id": 44532622, "body": "@user3467349 I expect that things like <code>pylint</code> <i>will</i> throw warnings at you if you try to pass a string to a function annotated to expect an int. As for why the core Python compiler doesn&#39;t throw an error in these cases, you&#39;d have to ask the BDFL :P"}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421879056, "post_id": 28076390, "comment_id": 44534827, "body": "Ok. You guy were spot on with changing the order of my statements and getting rid of the capitalization. Can anyone suggest how to write the code for: Write a sequence of statements that prints out the list of Restaurants RC in order from least expensive to most expensive (best dish), it should use the sort(), and key=restaurant_price as an argument to sort()."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421879231, "post_id": 28076390, "comment_id": 44534887, "body": "@anonymousfox what have you tried? This sounds like a separate question, however."}, {"owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "edited": false, "score": 0, "creation_date": 1421879876, "post_id": 28076390, "comment_id": 44535154, "body": "Yes, your right. I&#39;ll post a new question for that. Thanks."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1421873583, "last_edit_date": 1421873583, "creation_date": 1421872726, "answer_id": 28076390, "question_id": 28076331, "link": "https://stackoverflow.com/questions/28076331/why-doesnt-this-code-work-in-python-3-4/28076390#28076390", "title": "why doesn&#39;t this code work in python 3.4?", "body": "<p>Your first line uses a function annotation that requires the definition of <code>Restaurant</code> to be known. You don't define your <code>namedtuple</code> <code>Restaurant</code> until several lines later.</p>\n\n<p>Either invert those lines, or just use a string for your function annotation, e.g.:</p>\n\n<pre><code>def restaurant_price (Restaurant:'Restaurant')-&gt; float:\n    return Restaurant.price\n# note that for style purposes, you shouldn't capitalize that since you're\n#    treating it as an object not a class. Use instead:\n# # def restaurant_price(restaurant:'Restaurant') -&gt; float:\n# #     return restaurant.price\n# note also that this is just operator.attrgetter('price')\n</code></pre>\n\n<p>Here's some more detail, since even experienced Python users seem to be getting tripped up on the function annotation.</p>\n\n<p>A function annotation describes the parameter being referenced, but must be a <em>valid expression</em>. <code>Restaurant</code> is not a valid Python expression until you defined in as a <code>namedtuple</code> a bit later in your code, but <code>'Restaurant'</code> is a string constant, which is of course just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1422136958, "last_edit_date": 1422136958, "creation_date": 1421881196, "answer_id": 28078459, "question_id": 28076331, "link": "https://stackoverflow.com/questions/28076331/why-doesnt-this-code-work-in-python-3-4/28078459#28078459", "title": "why doesn&#39;t this code work in python 3.4?", "body": "<pre><code>def restaurant_price (resant:Restaurant)-&gt; float:\n    return restaurant.price\n\n\nassert restant_price(RC[1]) == 5.50\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4479961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a2e56c9b19a88cc0d41a948b302cb4?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous fox", "link": "https://stackoverflow.com/users/4479961/anonymous-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1422141340, "creation_date": 1421872523, "last_edit_date": 1422141340, "question_id": 28076331, "link": "https://stackoverflow.com/questions/28076331/why-doesnt-this-code-work-in-python-3-4", "title": "why doesn&#39;t this code work in python 3.4?", "body": "<p>Define a function called restaurant_price that takes one argument, a Restaurant, and returns the value of the price field of that Restaurant. So define a list containing a few Restaurants</p>\n\n<p>I keep getting the error of Restaurant not defined.</p>\n\n<p>This is my code: </p>\n\n<pre><code>def restaurant_price (Restaurant:Restaurant)-&gt; float:\n    return Restaurant.price\n\nfrom collections import namedtuple \nRestaurant = namedtuple('Restaurant', 'name cuisine phone dish price')\nRC = [\n    Restaurant(\"Thai Dishes\", \"Thai\", \"334-4433\", \"Mee Krob\", 12.50),\n    Restaurant(\"Nobu\", \"Japanese\", \"335-4433\", \"Natto Temaki\", 5.50),\n    Restaurant(\"Nonna\", \"Italian\", \"355-4433\", \"Stracotto\", 25.50),\n    Restaurant(\"Jitlada\", \"Thai\", \"324-4433\", \"Paht Woon Sen\", 15.50),\n    Restaurant(\"Nola\", \"New Orleans\", \"336-4433\", \"Jambalaya\", 5.50),\n    Restaurant(\"Noma\", \"Modern Danish\", \"337-4433\", \"Birch Sap\", 35.50),\n    Restaurant(\"Addis Ababa\", \"Ethiopian\", \"337-4453\", \"Yesiga Tibs\", 10.50) ]\nassert restaurant_price(RC[1]) == 5.50\n</code></pre>\n\n<p>Then I need help on this second question: Write a sequence of statements that prints out the list of Restaurants RC in order from least expensive to most expensive (best dish).</p>\n\n<pre><code>print(RC.sort(key=restaurant_price))\n</code></pre>\n"}, {"tags": ["python", "pydicom"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4237459"}, "is_accepted": false, "score": 0, "last_activity_date": 1421874701, "creation_date": 1421874701, "answer_id": 28076880, "question_id": 28076321, "link": "https://stackoverflow.com/questions/28076321/bug-in-pydicom-function/28076880#28076880", "title": "Bug in pydicom function", "body": "<p>I'm assuming the code is meant to be formatted like this:</p>\n\n<pre><code>try:\n    numpy_format = numpy.dtype(format_str)\n    print numpy_format\nexcept TypeError:\n    print \"Data type not understood by NumPy!\"\n    print format_str\n    msg = (\"Data type not understood by NumPy: \"\n           \"format='%s', PixelRepresentation=%d, BitsAllocated=%d\")\n    raise TypeError(msg % (numpy_format, self.PixelRepresentation,\n                    self.BitsAllocated))\n</code></pre>\n\n<p>In the <code>try</code> block, <code>numpy_format</code> is assigned a value. If <code>numpy.dtype(format_str)</code> throws a <code>TypeError</code>, it goes straight to the <code>except</code> block without binding a value to <code>numpy_format</code>. This means when <code>numpy_format</code> is referenced again when raising the <code>TypeError</code>, it throws a <code>UnboundLocalError</code> as it was never bound in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 953, "user_id": 1987276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7e43c535f732c309bdca3c50629788d?s=128&d=identicon&r=PG", "display_name": "darcymason", "link": "https://stackoverflow.com/users/1987276/darcymason"}, "is_accepted": true, "score": 2, "last_activity_date": 1421933581, "creation_date": 1421933581, "answer_id": 28090072, "question_id": 28076321, "link": "https://stackoverflow.com/questions/28076321/bug-in-pydicom-function/28090072#28090072", "title": "Bug in pydicom function", "body": "<p>There are two problems here.  First, a bug in pydicom: in raising the error, it is incorrectly using <code>numpy_format</code>, which is undefined.  It should use <code>format_str</code>.  I'll add an issue to correct this.</p>\n\n<p>The second problem is that the file claims to have BitsAllocated of 12, which is very unusual. DICOM files typically have 12-bit pixels values but use 16-bits per pixel in the file.</p>\n\n<p>You can check what it is really allocating by comparing the <code>Rows</code> and <code>Columns</code> to the size of the pixel data.  For a single frame image (below example uses pydicom's CT_small.dcm sample file):</p>\n\n<pre><code>&gt;&gt;&gt; len(ds.PixelData)\n32768\n&gt;&gt;&gt; ds.Rows * ds.Columns * 2  # 2 bytes for 16-bit allocation\n32768\n</code></pre>\n\n<p>If the image has multiple frames then you would have to multiply the number of frames as well. Similarly for <code>SamplesPerPixel</code>.</p>\n\n<p>If the size of pixel data matches as above using 2 bytes per pixel, then you can correct your problem by setting <code>ds.BitsAllocated</code> to 16 before asking for <code>pixel_array</code>.</p>\n"}], "owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "accepted_answer_id": 28090072, "answer_count": 2, "score": 0, "last_activity_date": 1492111567, "creation_date": 1421872499, "last_edit_date": 1492111567, "question_id": 28076321, "link": "https://stackoverflow.com/questions/28076321/bug-in-pydicom-function", "title": "Bug in pydicom function", "body": "<p>I wanted to work with pydicom for processing dicom images. Unfortunately I get the error </p>\n\n<pre><code>File \"/usr/local/lib/python2.7/dist-packages/dicom/dataset.py\", line 372, in _pixel_data_numpy\n    raise TypeError(msg % (numpy_format, self.PixelRepresentation,\nUnboundLocalError: local variable 'numpy_format' referenced before assignment\n</code></pre>\n\n<p>in the function</p>\n\n<pre><code>def _pixel_data_numpy(self):\n\"\"\"Return a NumPy array of the pixel data.\n\nNumPy is a numerical package for python. It is used if available.\n\n:raises TypeError: if no pixel data in this dataset.\n:raises ImportError: if cannot import numpy.\n\n\"\"\"\nif 'PixelData' not in self:\n    raise TypeError(\"No pixel data found in this dataset.\")\n\nif not have_numpy:\n    msg = \"The Numpy package is required to use pixel_array, and numpy could not be imported.\\n\"\n    raise ImportError(msg)\n\n# determine the type used for the array\nneed_byteswap = (self.is_little_endian != sys_is_little_endian)\n\n# Make NumPy format code, e.g. \"uint16\", \"int32\" etc\n# from two pieces of info:\n#    self.PixelRepresentation -- 0 for unsigned, 1 for signed;\n#    self.BitsAllocated -- 8, 16, or 32\nformat_str = '%sint%d' % (('u', '')[self.PixelRepresentation],\n                          self.BitsAllocated)\ntry:\n    numpy_format = numpy.dtype(format_str)\nprint numpy_format\nexcept TypeError:\nprint \"Data type not understood by NumPy!\"\nprint format_str\n    msg = (\"Data type not understood by NumPy: \"\n           \"format='%s', PixelRepresentation=%d, BitsAllocated=%d\")\n    raise TypeError(msg % (numpy_format, self.PixelRepresentation,\n                    self.BitsAllocated))\n\n# Have correct Numpy format, so create the NumPy array\narr = numpy.fromstring(self.PixelData, numpy_format)\n\n# XXX byte swap - may later handle this in read_file!!?\nif need_byteswap:\n    arr.byteswap(True)  # True means swap in-place, don't make a new copy\n# Note the following reshape operations return a new *view* onto arr, but don't copy the data\nif 'NumberOfFrames' in self and self.NumberOfFrames &gt; 1:\n    if self.SamplesPerPixel &gt; 1:\n        arr = arr.reshape(self.SamplesPerPixel, self.NumberOfFrames, self.Rows, self.Columns)\n    else:\n        arr = arr.reshape(self.NumberOfFrames, self.Rows, self.Columns)\nelse:\n    if self.SamplesPerPixel &gt; 1:\n        if self.BitsAllocated == 8:\n            arr = arr.reshape(self.SamplesPerPixel, self.Rows, self.Columns)\n        else:\n            raise NotImplementedError(\"This code only handles SamplesPerPixel &gt; 1 if Bits Allocated = 8\")\n    else:\n        arr = arr.reshape(self.Rows, self.Columns)\nreturn arr\n</code></pre>\n\n<p>When I print the variable <code>format_str</code>, I get <code>uint12</code>. Unfortunately I am not able to solve this bug. Is there anything I can do for solving that?<br>\nEven if I remove all <code>print</code> commands (I added them for debug) I get the same error.</p>\n"}, {"tags": ["python", "django", "scheduled-tasks", "celery", "django-celery"], "answers": [{"comments": [{"owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "edited": false, "score": 0, "creation_date": 1421872828, "post_id": 28076358, "comment_id": 44531802, "body": "IMO, thread based approach is a resource hog - management commands or some schedulers like redis, etc are better."}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": false, "score": -1, "last_activity_date": 1421872617, "creation_date": 1421872617, "answer_id": 28076358, "question_id": 28076316, "link": "https://stackoverflow.com/questions/28076316/how-do-i-make-my-django-application-perform-a-job-at-a-fixed-time-everyday/28076358#28076358", "title": "How do I make my django application perform a job at a fixed time everyday?", "body": "<p>Use a <code>threading.Thread</code> to schedule a continuous event loop. In your thread, use <code>time.sleep</code> to create a gap before the next occurrence of the event.</p>\n"}, {"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 2, "last_activity_date": 1421872646, "creation_date": 1421872646, "answer_id": 28076369, "question_id": 28076316, "link": "https://stackoverflow.com/questions/28076316/how-do-i-make-my-django-application-perform-a-job-at-a-fixed-time-everyday/28076369#28076369", "title": "How do I make my django application perform a job at a fixed time everyday?", "body": "<p>Use a simple cron job to trigger a custom Django management command.</p>\n"}], "owner": {"reputation": 333, "user_id": 1643436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7a4faeedc878c13225db45fa1ce0fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Buggy Coder", "link": "https://stackoverflow.com/users/1643436/buggy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1421872716, "answer_count": 2, "score": 0, "last_activity_date": 1421872646, "creation_date": 1421872485, "question_id": 28076316, "link": "https://stackoverflow.com/questions/28076316/how-do-i-make-my-django-application-perform-a-job-at-a-fixed-time-everyday", "closed_reason": "Duplicate", "title": "How do I make my django application perform a job at a fixed time everyday?", "body": "<p>Some tuples in my database need to be erased after a given time. I need my django app to check if the rows have expired.</p>\n\n<p>While I can definitely write the function, how do I make Django run at everyday at a fixed time?</p>\n\n<p>I have heard about Task Queues like Celery. Are they too much powerful for this? Is their anything simpler? May be something build-in? </p>\n"}, {"tags": ["python", "django", "youtube-data-api"], "answers": [{"comments": [{"owner": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 0, "creation_date": 1421873746, "post_id": 28076521, "comment_id": 44532260, "body": "Excuse my stupidity but can you give me a hint about what should be the service object I should pass. Thanks."}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "reply_to_user": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 1, "creation_date": 1421874136, "post_id": 28076521, "comment_id": 44532430, "body": "In the example, it&#39;s youtube = get_authenticated_service(args). In the example, args is populated from the command line that calls the script. You&#39;ll need to look closely at the code under if __ name __ == &#39;__ main __&#39; to see what kind of args you&#39;ll need to pass in here."}, {"owner": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 0, "creation_date": 1421874792, "post_id": 28076521, "comment_id": 44532750, "body": "I&#39;m not sure about the 1st argument for initialize_upload(youtube, options): I&#39;ve added the path to the file but probably it needs to go with the options. But in that case what is the argument youtube? Also I&#39;ve looked at the args under the <b>name</b> and I&#39;ve provided them all."}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "reply_to_user": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 0, "creation_date": 1421875037, "post_id": 28076521, "comment_id": 44532879, "body": "It comes from the line just above it in the example: youtube = get_authenticated_service(args)"}, {"owner": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 0, "creation_date": 1421875694, "post_id": 28076521, "comment_id": 44533202, "body": "But what argument do I need to send from my view.py for the youtube arg. As of now I have the following: initialize_upload(uploaded_video.file_on_server.path, uploaded_video)"}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "reply_to_user": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "edited": false, "score": 0, "creation_date": 1421876337, "post_id": 28076521, "comment_id": 44533530, "body": "Yes... I see what you have. You need to pass these arguments to get_authenticated_service() and then pass the results into initialize_upload(). You don&#39;t pass a copy of the file, the path to the file is one of the arguments passed to get_authenticated_service(). Again, the naming and elements you need to provide is demonstrated in the code under <code>if __name__ == &#39;__main__&#39;</code> in the example."}], "tags": [], "owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "is_accepted": true, "score": 1, "last_activity_date": 1421873235, "creation_date": 1421873235, "answer_id": 28076521, "question_id": 28076311, "link": "https://stackoverflow.com/questions/28076311/issue-with-implementing-youtube-api-v3-on-python-for-django-error-unicode-ob/28076521#28076521", "title": "Issue with implementing Youtube API v3 on Python for Django (error: &#39;unicode&#39; object has no attribute &#39;video&#39;)", "body": "<p>The traceback is telling you that you're trying to call an unsupported method on a unicode (string) object. That appears to be the result of this line in views.py:</p>\n\n<pre><code>initialize_upload(uploaded_video.file_on_server.path, uploaded_video)\n</code></pre>\n\n<p>Here's what the example shows:</p>\n\n<pre><code> youtube = get_authenticated_service(args)\n try:\n    initialize_upload(youtube, args)\n</code></pre>\n\n<p>It appears you'll want to pass this function an instance of your service object, not the path of an uploaded video.</p>\n"}], "owner": {"reputation": 3243, "user_id": 490570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac16c13a12eddfce65b123e5d6118a89?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/490570/yannick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 28076521, "answer_count": 1, "score": 1, "last_activity_date": 1421873235, "creation_date": 1421872472, "question_id": 28076311, "link": "https://stackoverflow.com/questions/28076311/issue-with-implementing-youtube-api-v3-on-python-for-django-error-unicode-ob", "title": "Issue with implementing Youtube API v3 on Python for Django (error: &#39;unicode&#39; object has no attribute &#39;video&#39;)", "body": "<p>I'm trying to upload a file to my youtube channel using the <a href=\"https://developers.google.com/youtube/v3/code_samples/python\" rel=\"nofollow\">youtube Data API</a></p>\n\n<p>This is my upload action </p>\n\n<p><strong>videos/views.py</strong></p>\n\n<pre><code>def upload(request):\n    \"\"\"\n    Upload video\n    :param request:\n    \"\"\"\n\n    context = RequestContext(request)\n\n    if request.method == 'POST':\n        # do the following\n        form_upload = VideoForm(request.POST, request.FILES)\n\n        if form_upload.is_valid():\n            uploaded_video = form_upload.save(commit=True)\n            uploaded_video.category = 23\n            uploaded_video.privacyStatus = 'public'\n\n            # send this file to youtube\n            initialize_upload(uploaded_video.file_on_server.path, uploaded_video)\n\n            messages.success(request, 'Video saved.')\n        else:\n            messages.error(request, 'Ooops.')\n\n    else:\n        form_upload = VideoForm(instance=request.user)\n\n    context_dict = {'form_upload': form_upload}\n\n    return render_to_response('videos/upload.html', context_dict, context)\n</code></pre>\n\n<p>And this is the Python example <a href=\"https://developers.google.com/youtube/v3/code_samples/python#upload_a_video\" rel=\"nofollow\">provide by google.</a></p>\n\n<pre><code>#!/usr/bin/python\n\nimport httplib\nimport httplib2\nimport os\nimport random\nimport sys\nimport time\n\nfrom apiclient.discovery import build\nfrom apiclient.errors import HttpError\nfrom apiclient.http import MediaFileUpload\nfrom oauth2client.client import flow_from_clientsecrets\nfrom oauth2client.file import Storage\nfrom oauth2client.tools import argparser, run_flow\n\n\n# Explicitly tell the underlying HTTP transport library not to retry, since\n# we are handling retry logic ourselves.\nhttplib2.RETRIES = 1\n\n# Maximum number of times to retry before giving up.\nMAX_RETRIES = 10\n\n# Always retry when these exceptions are raised.\nRETRIABLE_EXCEPTIONS = (httplib2.HttpLib2Error, IOError, httplib.NotConnected,\n  httplib.IncompleteRead, httplib.ImproperConnectionState,\n  httplib.CannotSendRequest, httplib.CannotSendHeader,\n  httplib.ResponseNotReady, httplib.BadStatusLine)\n\n# Always retry when an apiclient.errors.HttpError with one of these status\n# codes is raised.\nRETRIABLE_STATUS_CODES = [500, 502, 503, 504]\n\n# The CLIENT_SECRETS_FILE variable specifies the name of a file that contains\n# the OAuth 2.0 information for this application, including its client_id and\n# client_secret. You can acquire an OAuth 2.0 client ID and client secret from\n# the Google Developers Console at\n# https://console.developers.google.com/.\n# Please ensure that you have enabled the YouTube Data API for your project.\n# For more information about using OAuth2 to access the YouTube Data API, see:\n#   https://developers.google.com/youtube/v3/guides/authentication\n# For more information about the client_secrets.json file format, see:\n#   https://developers.google.com/api-client-library/python/guide/aaa_client_secrets\nCLIENT_SECRETS_FILE = \"client_secrets.json\"\n\n# This OAuth 2.0 access scope allows an application to upload files to the\n# authenticated user's YouTube channel, but doesn't allow other types of access.\nYOUTUBE_UPLOAD_SCOPE = \"https://www.googleapis.com/auth/youtube.upload\"\nYOUTUBE_API_SERVICE_NAME = \"youtube\"\nYOUTUBE_API_VERSION = \"v3\"\n\n# This variable defines a message to display if the CLIENT_SECRETS_FILE is\n# missing.\nMISSING_CLIENT_SECRETS_MESSAGE = \"\"\"\nWARNING: Please configure OAuth 2.0\n\nTo make this sample run you will need to populate the client_secrets.json file\nfound at:\n\n   %s\n\nwith information from the Developers Console\nhttps://console.developers.google.com/\n\nFor more information about the client_secrets.json file format, please visit:\nhttps://developers.google.com/api-client-library/python/guide/aaa_client_secrets\n\"\"\" % os.path.abspath(os.path.join(os.path.dirname(__file__),\n                                   CLIENT_SECRETS_FILE))\n\nVALID_PRIVACY_STATUSES = (\"public\", \"private\", \"unlisted\")\n\n\ndef get_authenticated_service(args):\n  flow = flow_from_clientsecrets(CLIENT_SECRETS_FILE,\n    scope=YOUTUBE_UPLOAD_SCOPE,\n    message=MISSING_CLIENT_SECRETS_MESSAGE)\n\n  storage = Storage(\"%s-oauth2.json\" % sys.argv[0])\n  credentials = storage.get()\n\n  if credentials is None or credentials.invalid:\n    credentials = run_flow(flow, storage, args)\n\n  return build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION,\n    http=credentials.authorize(httplib2.Http()))\n\ndef initialize_upload(youtube, options):\n  tags = None\n  if options.keywords:\n    tags = options.keywords.split(\",\")\n\n  body=dict(\n    snippet=dict(\n      title=options.title,\n      description=options.description,\n      tags=tags,\n      categoryId=options.category\n    ),\n    status=dict(\n      privacyStatus=options.privacyStatus\n    )\n  )\n\n  # Call the API's videos.insert method to create and upload the video.\n  insert_request = youtube.videos().insert(\n    part=\",\".join(body.keys()),\n    body=body,\n    # The chunksize parameter specifies the size of each chunk of data, in\n    # bytes, that will be uploaded at a time. Set a higher value for\n    # reliable connections as fewer chunks lead to faster uploads. Set a lower\n    # value for better recovery on less reliable connections.\n    #\n    # Setting \"chunksize\" equal to -1 in the code below means that the entire\n    # file will be uploaded in a single HTTP request. (If the upload fails,\n    # it will still be retried where it left off.) This is usually a best\n    # practice, but if you're using Python older than 2.6 or if you're\n    # running on App Engine, you should set the chunksize to something like\n    # 1024 * 1024 (1 megabyte).\n    media_body=MediaFileUpload(options.file, chunksize=-1, resumable=True)\n  )\n\n  resumable_upload(insert_request)\n\n# This method implements an exponential backoff strategy to resume a\n# failed upload.\ndef resumable_upload(insert_request):\n  response = None\n  error = None\n  retry = 0\n  while response is None:\n    try:\n      print \"Uploading file...\"\n      status, response = insert_request.next_chunk()\n      if 'id' in response:\n        print \"Video id '%s' was successfully uploaded.\" % response['id']\n      else:\n        exit(\"The upload failed with an unexpected response: %s\" % response)\n    except HttpError, e:\n      if e.resp.status in RETRIABLE_STATUS_CODES:\n        error = \"A retriable HTTP error %d occurred:\\n%s\" % (e.resp.status,\n                                                             e.content)\n      else:\n        raise\n    except RETRIABLE_EXCEPTIONS, e:\n      error = \"A retriable error occurred: %s\" % e\n\n    if error is not None:\n      print error\n      retry += 1\n      if retry &gt; MAX_RETRIES:\n        exit(\"No longer attempting to retry.\")\n\n      max_sleep = 2 ** retry\n      sleep_seconds = random.random() * max_sleep\n      print \"Sleeping %f seconds and then retrying...\" % sleep_seconds\n      time.sleep(sleep_seconds)\n\nif __name__ == '__main__':\n  argparser.add_argument(\"--file\", required=True, help=\"Video file to upload\")\n  argparser.add_argument(\"--title\", help=\"Video title\", default=\"Test Title\")\n  argparser.add_argument(\"--description\", help=\"Video description\",\n    default=\"Test Description\")\n  argparser.add_argument(\"--category\", default=\"22\",\n    help=\"Numeric video category. \" +\n      \"See https://developers.google.com/youtube/v3/docs/videoCategories/list\")\n  argparser.add_argument(\"--keywords\", help=\"Video keywords, comma separated\",\n    default=\"\")\n  argparser.add_argument(\"--privacyStatus\", choices=VALID_PRIVACY_STATUSES,\n    default=VALID_PRIVACY_STATUSES[0], help=\"Video privacy status.\")\n  args = argparser.parse_args()\n\n  if not os.path.exists(args.file):\n    exit(\"Please specify a valid file using the --file= parameter.\")\n\n  youtube = get_authenticated_service(args)\n  try:\n    initialize_upload(youtube, args)\n  except HttpError, e:\n    print \"An HTTP error %d occurred:\\n%s\" % (e.resp.status, e.content)\n</code></pre>\n\n<p><strong>But I get the following error message:</strong></p>\n\n<pre><code>  AttributeError at /videos/upload\n'unicode' object has no attribute 'videos'\nRequest Method: POST\nRequest URL:    http://127.0.0.1:8000/videos/upload\nDjango Version: 1.7.2\nException Type: AttributeError\nException Value:    \n'unicode' object has no attribute 'videos'\nException Location: /home/ymorin007/workspace/sites/humor15.com/src/videos/upload_video.py in initialize_upload, line 108\nPython Executable:  /home/ymorin007/.virtualenvs/humor15/bin/python2.7\nPython Version: 2.7.6\nPython Path:    \n['/home/ymorin007/workspace/sites/humor15.com/src',\n '/home/ymorin007/Softwares/pycharm-4.0/helpers/pydev',\n '/home/ymorin007/workspace/sites/humor15.com/src',\n '/home/ymorin007/.virtualenvs/humor15/lib/python2.7',\n '/home/ymorin007/.virtualenvs/humor15/lib/python2.7/plat-x86_64-linux-gnu',\n '/home/ymorin007/.virtualenvs/humor15/lib/python2.7/lib-tk',\n '/home/ymorin007/.virtualenvs/humor15/lib/python2.7/lib-old',\n '/home/ymorin007/.virtualenvs/humor15/lib/python2.7/lib-dynload',\n '/usr/lib/python2.7',\n '/usr/lib/python2.7/plat-x86_64-linux-gnu',\n '/usr/lib/python2.7/lib-tk',\n '/home/ymorin007/.virtualenvs/humor15/local/lib/python2.7/site-packages']\nServer time:    Wed, 21 Jan 2015 15:33:22 -0400\nTraceback Switch to copy-and-paste view\n\n/home/ymorin007/.virtualenvs/humor15/local/lib/python2.7/site-packages/django/core/handlers/base.py in get_response\n                    response = wrapped_callback(request, *callback_args, **callback_kwargs) ...\n\u25b6 Local vars\n/home/ymorin007/.virtualenvs/humor15/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py in _wrapped_view\n                return view_func(request, *args, **kwargs) ...\n\u25b6 Local vars\n/home/ymorin007/workspace/sites/humor15.com/src/videos/views.py in upload\n            initialize_upload(uploaded_video.file_on_server.path, uploaded_video) ...\n\u25b6 Local vars\n/home/ymorin007/workspace/sites/humor15.com/src/videos/upload_video.py in initialize_upload\n  insert_request = youtube.videos().insert( ...\n\u25b6 Local vars\n</code></pre>\n\n<p>I couldn't find any explanation for this error.  Any help would be appreciated.  Thanks.</p>\n\n<p>BTW. This is my 1st experience with Python and youtube Data API.</p>\n"}, {"tags": ["python", "django", "string"], "comments": [{"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1421872089, "post_id": 28076169, "comment_id": 44531460, "body": "Write a custom template tag."}], "answers": [{"comments": [{"owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "edited": false, "score": 0, "creation_date": 1421874725, "post_id": 28076261, "comment_id": 44532709, "body": "by doing this, you are replacing the existing data, which is probably not what OP wants. Did you mean to store it into another list ?"}], "tags": [], "owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1421872262, "creation_date": 1421872262, "answer_id": 28076261, "question_id": 28076169, "link": "https://stackoverflow.com/questions/28076169/django-check-a-last-character-in-string/28076261#28076261", "title": "Django: check a last character in string", "body": "<p>You're better off doing this in your view code than in a template. For example:</p>\n\n<pre><code>for doc in doc_records:\n    if doc.specialization.name.endswith('s'):\n        doc.specialization.name = doc.specialization.name[:-1]\n</code></pre>\n\n<p>But don't save the record, assuming this is just for display purposes</p>\n"}, {"tags": [], "owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "is_accepted": false, "score": 2, "last_activity_date": 1421873295, "last_edit_date": 1421873295, "creation_date": 1421872392, "answer_id": 28076292, "question_id": 28076169, "link": "https://stackoverflow.com/questions/28076169/django-check-a-last-character-in-string/28076292#28076292", "title": "Django: check a last character in string", "body": "<p>You cannot run python code in a django template. You can use a builtin filter for this:</p>\n\n<pre><code>{% ifequal doc.specialization.name|default:\"\"|slice:\"-1\" \"s\" %}\n    {# do your stuff #}\n{% endifequal %}\n</code></pre>\n\n<p>The <code>default</code> is only a fallback for <code>None</code> values</p>\n\n<p>Documentation on <a href=\"https://docs.djangoproject.com/en/1.7/ref/templates/builtins/#slice\" rel=\"nofollow\"><code>slice</code> here</a></p>\n\n<p>You could even use the <a href=\"https://docs.djangoproject.com/en/1.7/ref/templates/builtins/#with\" rel=\"nofollow\"><code>with</code> tag</a> to avoid computing the same thing multiple times</p>\n"}, {"comments": [{"owner": {"reputation": 1297, "user_id": 1029469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NzOk0.jpg?s=128&g=1", "display_name": "benzkji", "link": "https://stackoverflow.com/users/1029469/benzkji"}, "edited": false, "score": 0, "creation_date": 1556702065, "post_id": 35203607, "comment_id": 98520656, "body": "This is the up to date answer that works in django 2.2. Note the &quot;you also need to add a &quot;:&quot; after the &quot;-1&quot;!"}], "tags": [], "owner": {"reputation": 101, "user_id": 4267370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cb94fb81d2de215e3e695e8ffc4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "sv_rancher", "link": "https://stackoverflow.com/users/4267370/sv-rancher"}, "is_accepted": false, "score": 4, "last_activity_date": 1454596039, "creation_date": 1454596039, "answer_id": 35203607, "question_id": 28076169, "link": "https://stackoverflow.com/questions/28076169/django-check-a-last-character-in-string/35203607#35203607", "title": "Django: check a last character in string", "body": "<p>Karthikr's answer is close.  Ifequal is scheduled to be deprecated in future versions of Django, so you may want to use the method below.  You also need to add a ':' after the '-1'.</p>\n\n<pre><code>{% if doc.specialization.name|default:\"\"|slice:\"-1:\" == \"s\" %}\n  &lt;h3&gt; {{ doc.specialization.name|slice:\":-1\" }} &lt;/h3&gt;\n{% else %}\n  &lt;h3&gt; {{ doc.specialization.name }} &lt;/h3&gt;\n{% endif %}\n</code></pre>\n"}], "owner": {"reputation": 1083, "user_id": 3473635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d2f095b11d7d1014d36ccfdea50dded8?s=128&d=identicon&r=PG&f=1", "display_name": "James L.", "link": "https://stackoverflow.com/users/3473635/james-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3415, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1556703938, "creation_date": 1421871835, "last_edit_date": 1556703938, "question_id": 28076169, "link": "https://stackoverflow.com/questions/28076169/django-check-a-last-character-in-string", "title": "Django: check a last character in string", "body": "<p>I have this string <code>doc.specalization.name</code> from my views. If it does end with an <code>s</code>, I want to remove the <code>s</code>.</p>\n\n<p>I tried this code but i get <code>Could not parse the remainder: '('s')' from 'doc.specialization.name.endswith('s')'</code></p>\n\n<pre><code> {% if doc.specialization.name.endswith('s') %}\n        &lt;h3&gt; {{doc.specialization.name|slice:\":-1\"}} &lt;/h3&gt;   \n {% endif %}\n</code></pre>\n"}, {"tags": ["python", "vlc", "libvlc"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 3468055, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93942037fda118de8adcaa89ac062638?s=128&d=identicon&r=PG&f=1", "display_name": "user3468055", "link": "https://stackoverflow.com/users/3468055/user3468055"}, "edited": false, "score": 0, "creation_date": 1421878012, "post_id": 28077477, "comment_id": 44534396, "body": "this is h.264. After 190 ms i can jump to each frame"}], "tags": [], "owner": {"reputation": 1383, "user_id": 4467874, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U1H-e8ce8oE/AAAAAAAAAAI/AAAAAAAABzM/KnTPsb6fkXY/photo.jpg?sz=128", "display_name": "bav", "link": "https://stackoverflow.com/users/4467874/bav"}, "is_accepted": true, "score": 0, "last_activity_date": 1421876944, "creation_date": 1421876944, "answer_id": 28077477, "question_id": 28076149, "link": "https://stackoverflow.com/questions/28076149/python-bindings-for-vlc-dont-working-propetly/28077477#28077477", "title": "Python bindings for vlc don&#39;t working propetly", "body": "<p>I guess VLC may jump between key frames only for specific media types.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 5585043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60fdac2fabb5b0130d2d1a41aadcc11e?s=128&d=identicon&r=PG", "display_name": "Angrod", "link": "https://stackoverflow.com/users/5585043/angrod"}, "is_accepted": false, "score": 0, "last_activity_date": 1461580649, "creation_date": 1461580649, "answer_id": 36838156, "question_id": 28076149, "link": "https://stackoverflow.com/questions/28076149/python-bindings-for-vlc-dont-working-propetly/36838156#36838156", "title": "Python bindings for vlc don&#39;t working propetly", "body": "<p>It's not python bindings who don't work properly but VLC, I don't know why, but is VLC who is jumping those extra 190ms.\nYou can download some plugins that allow yo to see the ms, the one I'm using i go to the fourth second, then ask the plugin to get the time and it gives 4.190...</p>\n"}], "owner": {"reputation": 253, "user_id": 3468055, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93942037fda118de8adcaa89ac062638?s=128&d=identicon&r=PG&f=1", "display_name": "user3468055", "link": "https://stackoverflow.com/users/3468055/user3468055"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 1, "accepted_answer_id": 28077477, "answer_count": 2, "score": 0, "last_activity_date": 1461580649, "creation_date": 1421871766, "question_id": 28076149, "link": "https://stackoverflow.com/questions/28076149/python-bindings-for-vlc-dont-working-propetly", "title": "Python bindings for vlc don&#39;t working propetly", "body": "<p>If i jump to miliseconds, vlc jump to miliseconds + 190</p>\n\n<pre><code>    # VLC player controls\n    self.Instance = vlc.Instance()\n    self.player = self.Instance.media_player_new()\n\n\n    # OpenFile\n    self.OnStop(None)\n    # Creation\n    self.Media = self.Instance.media_new(unicode(\"10min.mp4\"))\n    self.player.set_media(self.Media)\n    # Report the title of the file chosen\n\n\n    # set the window id where to render VLC's video output\n    self.player.set_hwnd(self.videopanel.GetHandle())\n\n\n   self.player.set_time(200)\n</code></pre>\n\n<p>It jumps to 390 etc, so i made simple walkaround: \n    self.player.set_time(time - 190) </p>\n\n<p>but if time is &lt; 190 i have exception....\nSomebody had this problem with vlc bindings?</p>\n"}, {"tags": ["python", "python-2.7", "dictionary", "indices"], "comments": [{"owner": {"reputation": 3385, "user_id": 2250036, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/v0Z2w.png?s=128&g=1", "display_name": "logc", "link": "https://stackoverflow.com/users/2250036/logc"}, "edited": false, "score": 1, "creation_date": 1421871925, "post_id": 28076097, "comment_id": 44531401, "body": "It wouldn&#39;t hurt if you stated your problem in a more structured fashion.  This is more a stream of consciousness ..."}], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 1966868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kUAMO.png?s=128&g=1", "display_name": "Michiel Kauw-A-Tjoe", "link": "https://stackoverflow.com/users/1966868/michiel-kauw-a-tjoe"}, "reply_to_user": {"reputation": 11, "user_id": 4479862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1Zo.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4479862/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1421965175, "post_id": 28076190, "comment_id": 44575124, "body": "Not sure what you mean but it seems like you figured it out already."}], "tags": [], "owner": {"reputation": 725, "user_id": 1966868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kUAMO.png?s=128&g=1", "display_name": "Michiel Kauw-A-Tjoe", "link": "https://stackoverflow.com/users/1966868/michiel-kauw-a-tjoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1421873162, "last_edit_date": 1421873162, "creation_date": 1421871961, "answer_id": 28076190, "question_id": 28076097, "link": "https://stackoverflow.com/questions/28076097/list-indices-error-in-python-2-7-please-suggest-solution-for-option-1-in-code/28076190#28076190", "title": "LIST INDICES ERROR In Python 2.7, Please suggest solution for OPTION 1 in code", "body": "<p>It means that you are passing something other than an integer as a list index. From the look of it, <code>compute_bill()</code> is called with a string called <code>'pear'</code> inside a list. The list is then passed as the parameter <code>food</code>. Then the <code>for</code> statement takes the <code>'pear'</code> string as a key, which is correct if you apply it to the dictionary <code>stock</code>. However, <code>food</code> is still a list, so calling <code>food['pear']</code> will give the error. It should be <code>food[0]</code>. You could substitute the loop with this one:</p>\n\n<pre><code>    for i in range(len(food)):\n        key = food[i]\n</code></pre>\n\n<p>After that you're able to access both the list and the dictionary with the index <code>i</code> and the key <code>key</code> respectively. In that case <code>food[0]</code> doesn't result in an integer value but with the string <code>'pear'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4479862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1Zo.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4479862/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1421960481, "post_id": 28076308, "comment_id": 44572987, "body": "Voilla!! It works!! So, basically we need to define two functions separately to check them. Thanks logc!! :) Now I got the logic."}, {"owner": {"reputation": 725, "user_id": 1966868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kUAMO.png?s=128&g=1", "display_name": "Michiel Kauw-A-Tjoe", "link": "https://stackoverflow.com/users/1966868/michiel-kauw-a-tjoe"}, "edited": false, "score": 0, "creation_date": 1421965356, "post_id": 28076308, "comment_id": 44575199, "body": "<code>type(food) == list</code> and <code>type(food) == dict</code> should also work by the way, although using <code>isinstance()</code> is recommended."}, {"owner": {"reputation": 3385, "user_id": 2250036, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/v0Z2w.png?s=128&g=1", "display_name": "logc", "link": "https://stackoverflow.com/users/2250036/logc"}, "reply_to_user": {"reputation": 725, "user_id": 1966868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kUAMO.png?s=128&g=1", "display_name": "Michiel Kauw-A-Tjoe", "link": "https://stackoverflow.com/users/1966868/michiel-kauw-a-tjoe"}, "edited": false, "score": 0, "creation_date": 1422014135, "post_id": 28076308, "comment_id": 44592561, "body": "@MichielKauw-A-Tjoe thanks for your comment!  I was writing off the top of my head and did not take the time to look for the recommended way to check types.  I edited the answer to improve it based on your suggestion."}, {"owner": {"reputation": 11, "user_id": 4479862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1Zo.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4479862/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1422055734, "post_id": 28076308, "comment_id": 44614998, "body": "Thank You guys for helping me out!! :)"}], "tags": [], "owner": {"reputation": 3385, "user_id": 2250036, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/v0Z2w.png?s=128&g=1", "display_name": "logc", "link": "https://stackoverflow.com/users/2250036/logc"}, "is_accepted": true, "score": 0, "last_activity_date": 1422014045, "last_edit_date": 1422014045, "creation_date": 1421872460, "answer_id": 28076308, "question_id": 28076097, "link": "https://stackoverflow.com/questions/28076097/list-indices-error-in-python-2-7-please-suggest-solution-for-option-1-in-code/28076308#28076308", "title": "LIST INDICES ERROR In Python 2.7, Please suggest solution for OPTION 1 in code", "body": "<p>You need to check whether the passed in object is a dictionary (an <code>order</code>) or a list (an <code>item</code>) ... You also need to decide exactly what behavior you want in the second case, but let me guess you want to answer with the total price for the available stock:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def compute_bill(food):\n    if isinstance(food, dict):\n        compute_bill_for_order(food)\n    if isinstance(food, list):\n        compute_bill_for_items(food)\n\ndef compute_bill_for_order(order):\n    for key in order.keys():  ## You also have to call the `keys` method\n      # Here goes the exact same code you have for the cases\n      # count &gt; 0 and count &lt;= 0\n      # Basically, the `compute_bill` method\n      pass\n\ndef compute_bill_for_items(items):\n    total = 0\n    for item in items:\n        total += prices[item] * stock[item]\n    return total\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4479862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1Zo.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4479862/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1421960616, "post_id": 28076478, "comment_id": 44573066, "body": "Basically the problem was in for loop!! as it was iterating key in my function. So, I need to change it according to the input given i.e whether it is a dictionary or list. Anyways, I got the solution. Thanks for your help! :)"}], "tags": [], "owner": {"reputation": 1827, "user_id": 1280582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4120a9170729c4baed14c21734c492bf?s=128&d=identicon&r=PG", "display_name": "Micka&#235;l Le Baillif", "link": "https://stackoverflow.com/users/1280582/micka%c3%abl-le-baillif"}, "is_accepted": false, "score": 0, "last_activity_date": 1421873104, "creation_date": 1421873104, "answer_id": 28076478, "question_id": 28076097, "link": "https://stackoverflow.com/questions/28076097/list-indices-error-in-python-2-7-please-suggest-solution-for-option-1-in-code/28076478#28076478", "title": "LIST INDICES ERROR In Python 2.7, Please suggest solution for OPTION 1 in code", "body": "<p>As the start of each iteration when looping through your food items, in the <code>compute_bill</code> function, I would extract the quantity of desired food :</p>\n\n<pre><code>try:\n  quantity = food[key]  # get only how much was asked\nexcept TypeError:\n  quantity = stock[key] # get all remaining food from the stock !\n</code></pre>\n\n<p>Then, wherever you have used <code>food[key]</code>, use the new variable <code>quantity</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4479862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1Zo.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4479862/ankit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 28076308, "answer_count": 3, "score": 1, "last_activity_date": 1422014045, "creation_date": 1421871544, "question_id": 28076097, "link": "https://stackoverflow.com/questions/28076097/list-indices-error-in-python-2-7-please-suggest-solution-for-option-1-in-code", "title": "LIST INDICES ERROR In Python 2.7, Please suggest solution for OPTION 1 in code", "body": "<p>Hi I have a doubt in calling a function with string name as it is showing error: LIST INDICES MUST BE AN INTEGER</p>\n\n<p>I agree with the error statement but don't have the clue what to do. As when I am giving function argument parameter as a Dictionary , (option 2), its function is accepting it and running the code smoothly.\nBut on giving it just the name of the key (as a I did in option 1), it is showing Indices error because I am accessing key which is a string not integer &amp; it doesn't have the key with value (which is an error of unhashable key).\nSo,</p>\n\n<p>Please explain me following:</p>\n\n<p>How to create a dictionary with key name but empty value.\nHow to compare whether it is a list name is given in arguments of the function or a dictionary key. Please suggest code.\nSolution of my code. FOR OPTION 1</p>\n\n<p>Code:</p>\n\n<pre><code> # CODE FOR DETRMINING PRICE AS PER STOCK\n#PYTHON 2.7 SCRIPT \nstock = {\n    \"banana\": 6,\n    \"apple\": 0,\n    \"orange\": 32,\n    \"pear\": 15\n}\n\nprices = {\n    \"banana\": 4,\n    \"apple\": 2,\n    \"orange\": 1.5,\n    \"pear\": 3\n}\n\ndef compute_bill(food):\n    x = 0\n    total1 = 0\n    total2 = 0\n    z=0\n\n    for key in food: # I KNOW I AM DOING ERROR HERE, BUT NO CLUE WHAT TO DO!!\n\n        count = stock[key] #INTIAL COUNT\n        print \"this is the stock of %s : %d \" % (key,count)\n\n        count = stock[key] - food[key] # STOCK REMAINING\n        print \"this is the stock remaining of %s : %d \" % (key,count)\n\n        if count &gt; 0: # CHECKING WHETHER IT IS IN STOCK OR NOT\n            z = prices[key] * food[key] # FINDING TOTAL\n            total1 = z + total1 # ACCUMLATING TOTAL\n            print \"this is the total1 of %s : %f \\n\" % (key,z)\n\n        elif count &lt;= 0: # OVER-STOCK OR EMPTY STOCK\n            z = prices[key] * stock[key]\n            total2 = z + total2\n            print \"this is the total2 of %s : %f \\n\" % (key,z)\n\n        x = total1 + total2 #COMPUTING WHOLE TOTAL\n\n\n\n    print \"\\n this is the whole total : %f \\n\" % x\n\n    return x\n\n\n\n # JST WANT ALL PEAR\ncompute_bill(['pear']) #OPTION 1: NOT WORKING!! NEED SOLUTION\n\n#OPTION 2 : WORKING : \norder = {'apple' : 1, 'banana' : 3, 'pear' : 3, 'orange' : 3}\n    compute_bill(order)\n</code></pre>\n\n<p>Advance Thanks &amp; Cheers!!</p>\n"}, {"tags": ["python", "ipython", "ipython-notebook"], "comments": [{"owner": {"reputation": 23800, "user_id": 882918, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fIjw9.jpg?s=128&g=1", "display_name": "J0HN", "link": "https://stackoverflow.com/users/882918/j0hn"}, "edited": false, "score": 0, "creation_date": 1421871141, "post_id": 28075958, "comment_id": 44531010, "body": "Uhm, because matrix row indices are zero based, so ` mat[2,:]+=1` reads as &quot;add one to evey element in 3rd row&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4479065, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q7Txc8Kj9VI/AAAAAAAAAAI/AAAAAAAAAJU/pQAZYngepZI/photo.jpg?sz=128", "display_name": "Oscar Campo", "link": "https://stackoverflow.com/users/4479065/oscar-campo"}, "edited": false, "score": 0, "creation_date": 1421872124, "post_id": 28075999, "comment_id": 44531476, "body": "Yes Oliver, that line says that, so only <b>must</b> update the array that is input in function <code>ifsin</code>, and not update another array"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 1, "user_id": 4479065, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q7Txc8Kj9VI/AAAAAAAAAAI/AAAAAAAAAJU/pQAZYngepZI/photo.jpg?sz=128", "display_name": "Oscar Campo", "link": "https://stackoverflow.com/users/4479065/oscar-campo"}, "edited": false, "score": 0, "creation_date": 1421872360, "post_id": 28075999, "comment_id": 44531577, "body": "@OscarCampo and which array are you passing to that function then? Please have a look at <a href=\"https://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference\">this famous SO thread</a>. Then when you understand it, and you want to solve it, you could pass a copy of <code>q</code> to <code>ifsin</code>: <code>V = ifsin(q.copy())</code>. Or change the logic in the function, either way works."}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 1, "user_id": 4479065, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q7Txc8Kj9VI/AAAAAAAAAAI/AAAAAAAAAJU/pQAZYngepZI/photo.jpg?sz=128", "display_name": "Oscar Campo", "link": "https://stackoverflow.com/users/4479065/oscar-campo"}, "edited": false, "score": 0, "creation_date": 1421872514, "post_id": 28075999, "comment_id": 44531641, "body": "Also, you might want to remember that the reason <code>q</code> still gets updated in that last call to <code>ifsin</code> is because <code>V</code> and <code>q</code> (and eventually <code>M</code>) all refer to the same object. These are merely aliases, bound to the same object in memory (which you can check by asking for their <code>id</code>)."}], "tags": [], "owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1421871132, "creation_date": 1421871132, "answer_id": 28075999, "question_id": 28075958, "link": "https://stackoverflow.com/questions/28075958/wrong-result-in-a-simple-ipython-script/28075999#28075999", "title": "Wrong result in a simple ipython script", "body": "<p>You are literally asking for that update on this line:</p>\n\n<pre><code>mat[2,:]+=1\n</code></pre>\n\n<p>In numpy syntax, this means \"update row 2 of the array named <code>mat</code> by incrementing each value by 1\".</p>\n"}], "owner": {"reputation": 1, "user_id": 4479065, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q7Txc8Kj9VI/AAAAAAAAAAI/AAAAAAAAAJU/pQAZYngepZI/photo.jpg?sz=128", "display_name": "Oscar Campo", "link": "https://stackoverflow.com/users/4479065/oscar-campo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 28075999, "answer_count": 1, "score": 0, "last_activity_date": 1422030297, "creation_date": 1421870970, "question_id": 28075958, "link": "https://stackoverflow.com/questions/28075958/wrong-result-in-a-simple-ipython-script", "title": "Wrong result in a simple ipython script", "body": "<p>I defined a simple function that operates on 1st and 3rd rows of a 3x3 matrix:</p>\n\n<pre><code>In [1]: from numpy import *    \n     from sympy import Symbol\n\nIn [2]: def ifsin(mat): \n     mat[2,:]+=1\n     mat[0,:]=mat[0,:]/pow(mat[2,:],mat[2,:]&gt;0)\n     return mat\n\nIn [3]:Ay=Symbol('Ay')\n     By=Symbol('By')\n     q=array([[Ay,-10 ,By],[0,0.4,1],[-1 ,-1, -1]])\n     q\n\nOut[3]:\n\n array([[Ay, -10, By],\n        [0, 0.4, 1],\n        [-1, -1, -1]], dtype=object)\n\nIn [4]:V=ifsin(q)\n        q\n\nOut[4]: array([[Ay, -10.0, By],\n        [0, 0.4, 1],\n        [0, 0, 0]], dtype=object)\n</code></pre>\n\n<p>Why was updated 3rd row of matrix q?</p>\n\n<p>Also if I eval following:</p>\n\n<pre><code>In [5]:M=ifsin(V)\n       q\n\nOut[5]: array([[Ay, -10.0, By],\n            [0, 0.4, 1],\n            [1, 1, 1]], dtype=object)\n</code></pre>\n\n<p>Again 3rd row of q is updated!!</p>\n\n<p>I tried this script on \"Computable\" (ipad app) and ipython notebook on ubuntu 14.04 (python 2.7.6) with the same results</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["python", "tkinter", "calculator"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1421871156, "post_id": 28075866, "comment_id": 44531017, "body": "Have you entered a valid Python expression? This is exactly the error you&#39;ll get if you don&#39;t. You probably want to catch it and throw up an error message."}, {"owner": {"reputation": 67, "user_id": 4479849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-MqJvTaCXkIs/AAAAAAAAAAI/AAAAAAAAADo/dhVgdVcDmBo/photo.jpg?sz=128", "display_name": "EVDE KSP", "link": "https://stackoverflow.com/users/4479849/evde-ksp"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1421965206, "post_id": 28075866, "comment_id": 44575140, "body": "yes is just type math but thank you for making me remeber to write a function to deal with errors :)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4479849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-MqJvTaCXkIs/AAAAAAAAAAI/AAAAAAAAADo/dhVgdVcDmBo/photo.jpg?sz=128", "display_name": "EVDE KSP", "link": "https://stackoverflow.com/users/4479849/evde-ksp"}, "edited": false, "score": 0, "creation_date": 1421966069, "post_id": 28084354, "comment_id": 44575479, "body": "Hi, i did what you said (and i understand what you said and it was very helpful) but my = button still doesnt work, here is the whole error message:The Python REPL process has exited Exception in Tkinter callback Traceback (most recent call last):   File &quot;C:\\Python34\\lib\\tkinter_<i>init_</i>.py&quot;, line 1533, in <b>call</b>     return self.func(*args)   File &quot;C:\\Users\\Ian\\Documents\\Programming\\Python 3.4.2\\CalfoWin\\CalfoWin Demo v0.01\\CalfoWin Demo v0_01.pyw&quot;, line 43, in Coutcome     answer = eval(calc)   File &quot;&lt;string&gt;&quot;, line 0          ^ SyntaxError: unexpected EOF while parsing"}], "tags": [], "owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "is_accepted": false, "score": 1, "last_activity_date": 1421927982, "last_edit_date": 1421927982, "creation_date": 1421916079, "answer_id": 28084354, "question_id": 28075866, "link": "https://stackoverflow.com/questions/28075866/syntaxerror-unexpected-eof-while-parsing-python-calculator/28084354#28084354", "title": "SyntaxError: unexpected EOF while parsing Python Calculator", "body": "<p>You use <code>command = Coutcome()</code> which passes the return value of <code>Coutcome</code> as the funtion to call when the button is pressed. So what happens now is that <code>Coutcome</code> is called when the button is created, and <code>caltext</code> is still empty. This means that you are running <code>eval('')</code>, which gives you the error you are seeing.</p>\n\n<p>This is not what you want, you want <code>Coutcome</code> to be called when the button is pressed. So You should pass the function name, without parentheses, as the command</p>\n\n<pre><code>sm_buttEsign = Button(b_frame, text=\"=\", command=Coutcome)\n</code></pre>\n\n<hr>\n\n<p>For your quit and clear buttons you should do the same thing, get rid of the parentheses and the lambda. The reason you need to use lambda sometimes is because when you have to leave out the parentheses, you can't pass variables to the command. When you don't need to pass variables, the lambda is superfluous. </p>\n\n<hr>\n\n<p>In addition, you should be careful using <code>eval</code>. With the wrong input, it can <a href=\"http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html\" rel=\"nofollow\">be dangerous</a>. So watch out with letting users input stuff to <code>eval</code> without proper restrictions.</p>\n"}], "owner": {"reputation": 67, "user_id": 4479849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-MqJvTaCXkIs/AAAAAAAAAAI/AAAAAAAAADo/dhVgdVcDmBo/photo.jpg?sz=128", "display_name": "EVDE KSP", "link": "https://stackoverflow.com/users/4479849/evde-ksp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "closed_date": 1422462804, "answer_count": 1, "score": -1, "last_activity_date": 1421927982, "creation_date": 1421870626, "last_edit_date": 1421870955, "question_id": 28075866, "link": "https://stackoverflow.com/questions/28075866/syntaxerror-unexpected-eof-while-parsing-python-calculator", "closed_reason": "Duplicate", "title": "SyntaxError: unexpected EOF while parsing Python Calculator", "body": "<p>I have a calculator in Python 3 but for some reason my code doesn't work. It works fine until I press the \"=\" button to calculate my thing (using tkinter for the gui). Here is my code (it is quite long, sorry for that, it is just a part from my code)</p>\n\n<hr>\n\n<pre><code>from tkinter import *\n\nfrom tkinter.ttk import *\n\n    def SMATH():\n\n        #PUT TEXT IN ENTRY FUNCTION\n\n        def puttext(text):\n            sm_ent.insert(0,text)\n            return\n\n        #CLEAR THE ENTRY FUNCTION\n\n        def cleartext():\n            sm_ent.delete(0, END)\n            return\n\n        #GET THE OUTCOME FUNCTION\n\n        def Coutcome():\n            calc = caltext.get()\n            answer = eval(calc)\n            sm_ent = Entry(e_frame, textvariable=caltext, text=answer)\n\n        smathW = Tk()\n        smathW.title(\"Simple Math\")\n        smathW.resizable(0,0)\n        smathW.wm_iconbitmap('icon.ico')\n\n        def quitSmath():\n            smathW.destroy()\n\n        #ENTRY FRAME\n        e_frame = Frame(smathW)\n        e_frame.pack()\n\n        #BUTTONS FRAME\n\n        b_frame = Frame(smathW)\n        b_frame.pack()\n\n        #ENTRY\n        caltext= StringVar()\n        sm_ent = Entry(e_frame, textvariable=caltext)\n        sm_ent.pack(fill=Y)\n\n        #LABEL\n\n        sm_inf = Label(smathW, text=\"Here is the Simple Math mode from CalfoWin\")\n        sm_inf.pack()\n\n        #BUTTON 7\n\n        sm_butt0 = Button(b_frame, text=\"7\", command=lambda: puttext('7'))\n        sm_butt0.grid(row=1, column=0)\n\n        #BUTTON 8\n\n        sm_butt1 = Button(b_frame, text=\"8\", command=lambda: puttext('8'))\n        sm_butt1.grid(row=1, column=1)\n\n        #BUTTON 9\n\n        sm_butt2 = Button(b_frame, text=\"9\", command=lambda: puttext('9'))\n        sm_butt2.grid(row=1, column=2)\n\n        #BUTTON 4\n\n        sm_butt3 = Button(b_frame, text=\"4\", command=lambda: puttext('4'))\n        sm_butt3.grid(row=2, column=0)\n\n        #BUTTON 5\n\n        sm_butt4 = Button(b_frame, text=\"5\", command=lambda: puttext('5'))\n        sm_butt4.grid(row=2, column=1)\n\n        #BUTTON 6\n\n        sm_butt5 = Button(b_frame, text=\"6\", command=lambda: puttext('6'))\n        sm_butt5.grid(row=2, column=2)\n\n        #BUTTON 1\n\n        sm_butt6 = Button(b_frame, text=\"1\", command=lambda: puttext('1'))\n        sm_butt6.grid(row=3, column=0)\n\n        #BUTTON 2\n\n        sm_butt7 = Button(b_frame, text=\"2\", command=lambda: puttext('2'))\n        sm_butt7.grid(row=3, column=1)\n\n        #BUTTON 3\n\n        sm_butt8 = Button(b_frame, text=\"3\", command=lambda: puttext('3'))\n        sm_butt8.grid(row=3, column=2)\n\n        #BUTTON 0\n        sm_butt9 = Button(b_frame, text=\"0\", command=lambda: puttext('0'))\n        sm_butt9.grid(row=4, column=0)\n\n        #BUTTON KOMMA\n\n        sm_buttKomma = Button(b_frame, text=\".\", command=lambda: puttext('.'))\n        sm_buttKomma.grid(row=4, column=1)\n\n        #BUTTON EQUALSIGN!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n        sm_buttEsign = Button(b_frame, text=\"=\", command=Coutcome())\n        sm_buttEsign.grid(row=4, column=2)\n\n        #BUTTON ADDITION\n\n        sm_buttPlus = Button(b_frame, text=\"+\", command=lambda: puttext('+'))\n        sm_buttPlus.grid(row=2, column=3)\n\n        #BUTTON SUBTRACKTION\n\n        sm_buttMin = Button(b_frame, text=\"-\", command=lambda: puttext('-'))\n        sm_buttMin.grid(row=3, column=3)\n\n        #BUTTON DIVISION\n\n        sm_buttDiv = Button(b_frame, text=\"/\", command=lambda: puttext('/'))\n        sm_buttDiv.grid(row=3, column=4)\n\n        #BUTTON MULTIPLICATION\n\n        sm_buttMult = Button(b_frame, text='x', command=lambda: puttext('*'))\n        sm_buttMult.grid(row=2, column=4)\n\n        #BUTTON CLEAR\n\n        sm_buttClear = Button(b_frame, text=\"Clear\", command=lambda: cleartext())\n        sm_buttClear.grid(row=1, column=3)\n\n        #BUTTON QUIT\n\n        sm_buttquit = Button(b_frame, text=\"Quit\", command=lambda: quitSmath())\n        sm_buttquit.grid(row=1, column=4)\n</code></pre>\n"}, {"tags": ["python", "gtk", "filechooser"], "comments": [{"owner": {"reputation": 678, "user_id": 6094756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-hQ5QCAvBEoE/AAAAAAAAAAI/AAAAAAAAABE/sAfws5YX9HQ/photo.jpg?sz=128", "display_name": "piegames", "link": "https://stackoverflow.com/users/6094756/piegames"}, "edited": false, "score": 0, "creation_date": 1598822316, "post_id": 28075809, "comment_id": 112575294, "body": "Alternatively, setting the <code>do_overwrite_confirmation</code> property of the save dialog to <code>true</code> should automatically prompt the user for confirmation without further code needed."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 2634543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e969f0256ed7f66433c2783d7d4b3a?s=128&d=identicon&r=PG", "display_name": "atarax42", "link": "https://stackoverflow.com/users/2634543/atarax42"}, "edited": false, "score": 0, "creation_date": 1421900542, "post_id": 28078857, "comment_id": 44541076, "body": "Thanks so much. This works. Only colon missing after &#39;def handle_file_dialog(self, dialog)&#39;"}, {"owner": {"reputation": 5535, "user_id": 697819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NiANL.jpg?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/697819/iain"}, "reply_to_user": {"reputation": 63, "user_id": 2634543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e969f0256ed7f66433c2783d7d4b3a?s=128&d=identicon&r=PG", "display_name": "atarax42", "link": "https://stackoverflow.com/users/2634543/atarax42"}, "edited": false, "score": 0, "creation_date": 1421945997, "post_id": 28078857, "comment_id": 44564973, "body": "Of course, sorry. Not sure why your edit was rejected, but I&#39;ve fixed it myself"}, {"owner": {"reputation": 1747, "user_id": 1300654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b62089e23b87f97fbf1a3f9de9afb983?s=128&d=identicon&r=PG", "display_name": "yktoo", "link": "https://stackoverflow.com/users/1300654/yktoo"}, "edited": false, "score": 0, "creation_date": 1530875950, "post_id": 28078857, "comment_id": 89399145, "body": "<code>if cansave == True</code> must be <code>if cansave</code>, the same for <code>if os.path.exists(dialog.get_filename()) == True</code> \u21d2 <code>if os.path.exists(dialog.get_filename())</code>"}], "tags": [], "owner": {"reputation": 5535, "user_id": 697819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NiANL.jpg?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/697819/iain"}, "is_accepted": true, "score": 2, "last_activity_date": 1421945968, "last_edit_date": 1421945968, "creation_date": 1421883146, "answer_id": 28078857, "question_id": 28075809, "link": "https://stackoverflow.com/questions/28075809/python-gtk-confirm-overwrite-dialog-blocks-filechooser-dialog/28078857#28078857", "title": "Python GTK: confirm overwrite dialog blocks filechooser dialog", "body": "<p>Once you've left the <code>response = dialog.run()</code> run loop, you need to either recreate the file dialog, or call <code>dialog.run()</code> again to put the file dialog back into a run loop so you can find out what buttons have been pressed.</p>\n\n<p>Restructuring it so the file dialog handler is in a separate function should do the trick (not tested, but you'll get the idea)</p>\n\n<pre><code>def on_button_clicked(self, widget):\n    dialog = Gtk.FileChooserDialog(\"Save file\", self,\n        Gtk.FileChooserAction.SAVE,\n        (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,\n         Gtk.STOCK_SAVE, Gtk.ResponseType.OK))\n    self.handle_file_dialog(dialog)\n\ndef handle_file_dialog(self, dialog):\n    response = dialog.run()\n    if response == Gtk.ResponseType.OK:  # OK button was pressed or existing file was double clicked\n        cansave = False\n        if os.path.exists(dialog.get_filename()) == True:  # does file already exists?\n            dialog2 = DialogSaveFile(self, dialog.get_filename())  # ask to confirm overwrite\n            response = dialog2.run()\n            if response == Gtk.ResponseType.OK:\n                cansave = True\n                dialog2.destroy()\n            else:\n                dialog2.destroy()\n                # We need to re-run the file dialog to detect the buttons\n                self.handle_file_dialog(dialog)\n                return\n        else:\n            cansave = True\n        if cansave == True:  # save new file\n            open(dialog.get_filename(), \"w\").close\n            dialog.destroy()\n        else:\n            pass\n    else:\n        dialog.destroy()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14395643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gK22E-F4-6s/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnjxt8f6Vo-KTRZXXs3sDthtCYHRg/photo.jpg?sz=128", "display_name": "JEAN-PAUL Thiel", "link": "https://stackoverflow.com/users/14395643/jean-paul-thiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1601913253, "creation_date": 1601913253, "answer_id": 64212079, "question_id": 28075809, "link": "https://stackoverflow.com/questions/28075809/python-gtk-confirm-overwrite-dialog-blocks-filechooser-dialog/64212079#64212079", "title": "Python GTK: confirm overwrite dialog blocks filechooser dialog", "body": "<p>You can use :\n<em><strong>dialog.set_do_overwrite_confirmation(True)</strong></em>\nThis mode will present a confirmation dialog if the user types a file name that already exists !</p>\n<hr />\n<pre><code>import os\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        Gtk.Window.__init__(self, title=&quot;demo&quot;)\n        self.set_position(Gtk.WindowPosition.CENTER)\n        self.button = Gtk.Button()\n        self.button.set_image(Gtk.Image(stock=Gtk.STOCK_SAVE))\n        self.button.connect('clicked', self.on_button_clicked)\n        self.add(self.button)\n\n    def on_button_clicked(self, widget):\n        dialog = Gtk.FileChooserDialog(parent=self,title=&quot;Save file&quot;,\n            action=Gtk.FileChooserAction.SAVE)\n        dialog.add_buttons(Gtk.STOCK_CANCEL,Gtk.ResponseType.CANCEL)\n        dialog.add_buttons(Gtk.STOCK_OK,Gtk.ResponseType.OK)\n        \n        dialog.set_do_overwrite_confirmation(True)\n        # This mode will present a confirmation dialog if the user types a file name that already exists.\n        response = dialog.run()\n        print(response)\n        \n        if response == Gtk.ResponseType.OK:  # save new file\n                open(dialog.get_filename(), &quot;w&quot;).close\n                dialog.destroy()\n        if response == Gtk.ResponseType.CANCEL:  \n                dialog.destroy()\n        dialog.destroy()\n\nwin = MainWindow()\nwin.connect(&quot;delete-event&quot;, Gtk.main_quit)\nwin.show_all()\nGtk.main()\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2634543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e969f0256ed7f66433c2783d7d4b3a?s=128&d=identicon&r=PG", "display_name": "atarax42", "link": "https://stackoverflow.com/users/2634543/atarax42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 1, "accepted_answer_id": 28078857, "answer_count": 2, "score": 1, "last_activity_date": 1601913253, "creation_date": 1421870388, "question_id": 28075809, "link": "https://stackoverflow.com/questions/28075809/python-gtk-confirm-overwrite-dialog-blocks-filechooser-dialog", "title": "Python GTK: confirm overwrite dialog blocks filechooser dialog", "body": "<p>I have a Gtk.Button that opens a Gtk.FileChooserDialog to save a file. I implemented a Gtk.Dialog for confirmation that pops up when the chosen file name already exists in the target folder to save the file in. If I click on 'cancel' in this dialog the confirmation dialog is destroyed but I cannot use the 'cancel' or 'save' buttons of the Gtk.FileChooserDialog any longer.\nAny help is appreciated. Thanks.</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport os\nfrom gi.repository import Gtk\n\nclass MainWindow(Gtk.Window):\n    def __init__(self):\n        Gtk.Window.__init__(self, title=\"demo\")\n        self.set_position(Gtk.WindowPosition.CENTER)\n        self.button = Gtk.Button()\n        self.button.set_image(Gtk.Image(stock=Gtk.STOCK_SAVE))\n        self.button.connect('clicked', self.on_button_clicked)\n        self.add(self.button)\n\n    def on_button_clicked(self, widget):\n        dialog = Gtk.FileChooserDialog(\"Save file\", self,\n            Gtk.FileChooserAction.SAVE,\n            (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,\n             Gtk.STOCK_SAVE, Gtk.ResponseType.OK))\n        response = dialog.run()\n        if response == Gtk.ResponseType.OK:  # OK button was pressed or existing file was double clicked\n            cansave = False\n            if os.path.exists(dialog.get_filename()) == True:  # does file already exists?\n                dialog2 = DialogSaveFile(self, dialog.get_filename())  # ask to confirm overwrite\n                response = dialog2.run()\n                if response == Gtk.ResponseType.OK:\n                    cansave = True\n                else:\n                    pass\n                dialog2.destroy()\n            else:\n                cansave = True\n            if cansave == True:  # save new file\n                open(dialog.get_filename(), \"w\").close\n                dialog.destroy()\n            else:\n                pass\n        else:\n            dialog.destroy()\n\nclass DialogSaveFile(Gtk.Dialog):\n    def __init__(self, parent, db):\n        Gtk.Dialog.__init__(self, \"Confirm overwrite\", parent, 0,\n            (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,\n             Gtk.STOCK_OK, Gtk.ResponseType.OK))\n        self.box = self.get_content_area()\n        self.label = Gtk.Label(\"The file `\" + db + \"` exists.\\nDo you want it to be overwritten?\")\n        self.box.add(self.label)\n        self.show_all()\n\nwin = MainWindow()\nwin.connect(\"delete-event\", Gtk.main_quit)\nwin.show_all()\nGtk.main()\n</code></pre>\n"}, {"tags": ["python", "numpy", "pip"], "comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1421870634, "post_id": 28075776, "comment_id": 44530768, "body": "While this may not work for you, I&#39;ve noticed that I can get issues where numpy/pandas/scikit-learn even with pip don&#39;t build right on a machine, then I go ahead and use a package manager like canopy and viola they just work.  It there any possibility you might switch to Canopy isntead of system python?"}, {"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1421875079, "post_id": 28075776, "comment_id": 44532898, "body": "can you please add the output of <code>which pip</code> to your question?"}, {"owner": {"reputation": 799, "user_id": 1989682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ada10fce3c8e5612ced84097547a8fdf?s=128&d=identicon&r=PG", "display_name": "statBeginner", "link": "https://stackoverflow.com/users/1989682/statbeginner"}, "edited": false, "score": 0, "creation_date": 1421876356, "post_id": 28075776, "comment_id": 44533538, "body": "output of which pip has been added."}, {"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1421925167, "post_id": 28075776, "comment_id": 44551703, "body": "okay, there is something going on here. Can you also add <code>sudo which pip</code>?"}], "owner": {"reputation": 799, "user_id": 1989682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ada10fce3c8e5612ced84097547a8fdf?s=128&d=identicon&r=PG", "display_name": "statBeginner", "link": "https://stackoverflow.com/users/1989682/statbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421876735, "creation_date": 1421870263, "last_edit_date": 1421876325, "question_id": 28075776, "link": "https://stackoverflow.com/questions/28075776/error-installing-scikit-learn-on-mac", "title": "error installing scikit learn on mac", "body": "<p>I get the following error while trying to install scikit learn on mac. I do not seem to find any solution to this problem. Can somebody help?</p>\n\n<pre><code>xxxx-MacBook-Pro:site-packages xxxx$ sudo pip install -U numpy scipy scikit-     learn\nDownloading/unpacking numpy from    https://pypi.python.org/packages/source/n/numpy/numpy- 1.9.1.tar.gz#md5=78842b73560ec378142665e712ae4ad9\n  Downloading numpy-1.9.1.tar.gz (4.0Mb): 4.0Mb downloaded\n  Running setup.py egg_info for package numpy\n    /Library/Python/2.7/site-packages/build/numpy/setup.py:160: Warning:      'with' will become a reserved keyword in Python 2.6\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 14, in &lt;module&gt;\n  File \"/Library/Python/2.7/site-packages/build/numpy/setup.py\", line 160\n    with open('.gitmodules') as f:\n            ^\nSyntaxError: invalid syntax\nComplete output from command python setup.py egg_info:\n/Library/Python/2.7/site-packages/build/numpy/setup.py:160: Warning: 'with' will become a reserved keyword in Python 2.6\n\nTraceback (most recent call last):\n\n  File \"&lt;string&gt;\", line 14, in &lt;module&gt;\n\n  File \"/Library/Python/2.7/site-packages/build/numpy/setup.py\", line 160\n\nwith open('.gitmodules') as f:\n\n        ^\n\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>Output of which pip:</p>\n\n<pre><code>//anaconda/bin/pip\n</code></pre>\n"}, {"tags": ["python", "performance", "optimization", "graph", "cython"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 3479119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f63332be88595b0eedcab5de53fb37?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Morse", "link": "https://stackoverflow.com/users/3479119/matt-morse"}, "edited": false, "score": 0, "creation_date": 1421881929, "post_id": 28078197, "comment_id": 44536023, "body": "Awesome thank you! I was looking for less terrible ways to do that bit and I couldn&#39;t think of much off hand. I&#39;ll add them in now."}, {"owner": {"reputation": 51, "user_id": 3479119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f63332be88595b0eedcab5de53fb37?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Morse", "link": "https://stackoverflow.com/users/3479119/matt-morse"}, "edited": false, "score": 0, "creation_date": 1422220577, "post_id": 28078197, "comment_id": 44654768, "body": "Those two optimizations brought a 60% speed up! Down to 4 seconds from 12! You&#39;re the man!"}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 0, "last_activity_date": 1421880102, "creation_date": 1421880102, "answer_id": 28078197, "question_id": 28075755, "link": "https://stackoverflow.com/questions/28075755/python-recursive-depth-first-search-performance-tips-is-cython-an-option/28078197#28078197", "title": "Python Recursive Depth First Search Performance Tips (Is Cython an option?)", "body": "<p>I would recommend two optimizations for <code>path_is_valid</code>. Of course, your main problem is in <code>cycle_dfs</code>, and you probably just need a better algorithm.</p>\n\n<p>1) Avoid creating extra data structures:</p>\n\n<pre><code> for i in xrange(length-2):\n   for face in self.non_fourgons:\n      if (path[i] in face &amp;&amp; path[i+1] in face &amp;&amp; path[i+2] in face):\n        return False\n</code></pre>\n\n<p>2) Create a dictionary mapping points to the non_fourgons they are members of:</p>\n\n<pre><code> for i in xrange(length-2):\n   for face in self.non_fourgons[ path[i] ]:\n      if (path[i+1] in face &amp;&amp; path[i+2] in face):\n        return False\n</code></pre>\n\n<p>The expression <code>self.non_fourgons[ p ]</code> should return a list of the non-fourgons\nwhich contain <code>p</code> as a member. This reduces the number of polygons you have to check.</p>\n"}], "owner": {"reputation": 51, "user_id": 3479119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f63332be88595b0eedcab5de53fb37?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Morse", "link": "https://stackoverflow.com/users/3479119/matt-morse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1422288198, "creation_date": 1421870187, "last_edit_date": 1422288198, "question_id": 28075755, "link": "https://stackoverflow.com/questions/28075755/python-recursive-depth-first-search-performance-tips-is-cython-an-option", "title": "Python Recursive Depth First Search Performance Tips (Is Cython an option?)", "body": "<p>I have a project that relies on finding all cycles in a graph that pass through a vertex at most k times. Naturally, I'm sticking with the case of k=1 for the sake of development right now. I've come to the conclusion that this algorithm as a depth first search is at worst O((kn)^(kn)) for a complete graph, but I rarely approach this upper bound in the context of the problem, so I would still like to give this approach a try.</p>\n\n<p>I've implemented the following as a part of the project to achieve this end:</p>\n\n<pre><code>class Graph(object):\n\n...\n\ndef path_is_valid(self, current_path):\n    \"\"\"\n    :param current_path:\n    :return: Boolean indicating a whether the given path is valid\n    \"\"\"\n    length = len(current_path)\n    if length &lt; 3:\n        # The path is too short\n        return False\n\n    # Passes through vertex twice... sketchy for general case\n    if len(set(current_path)) != len(current_path):\n        return False\n\n    # The idea here is take a moving window of width three along the path\n    # and see if it's contained entirely in a polygon.\n    arc_triplets = (current_path[i:i+3] for i in xrange(length-2))\n    for triplet in arc_triplets:\n        for face in self.non_fourgons:\n            if set(triplet) &lt;= set(face):\n                return False\n\n    # This is all kinds of unclear when looking at. There is an edge case\n    # pertaining to the beginning and end of a path existing inside of a\n    # polygon. The previous filter will not catch this, so we cycle the path\n    # and recheck moving window filter.\n    path_copy = list(current_path)\n    for i in xrange(length):\n        path_copy = path_copy[1:] + path_copy[:1]  # wtf\n        arc_triplets = (path_copy[i:i+3] for i in xrange(length-2))\n        for triplet in arc_triplets:\n            for face in self.non_fourgons:\n                if set(triplet) &lt;= set(face):\n                    return False\n\n    return True\n\ndef cycle_dfs(self, current_node,  start_node,  graph, current_path):\n    \"\"\"\n\n    :param current_node:\n    :param start_node:\n    :param graph:\n    :param current_path:\n    :return:\n    \"\"\"\n    if len(current_path) &gt;= 3:\n        last_three_vertices = current_path[-3:]\n        previous_three_faces = [set(self.faces_containing_arcs[vertex])\n                                for vertex in last_three_vertices]\n        intersection_all = set.intersection(*previous_three_faces)\n        if len(intersection_all) == 2:\n            return []\n\n    if current_node == start_node:\n        if self.path_is_valid(current_path):\n            return [tuple(shift(list(current_path)))]\n        else:\n            return []\n\n    else:\n        loops = []\n        for adjacent_node in set(graph[current_node]):\n            current_path.append(adjacent_node)\n            graph[current_node].remove(adjacent_node)\n            graph[adjacent_node].remove(current_node)\n            loops += list(self.cycle_dfs(adjacent_node, start_node,\n                                         graph, current_path))\n            graph[current_node].append(adjacent_node)\n            graph[adjacent_node].append(current_node)\n            current_path.pop()\n        return loops\n</code></pre>\n\n<p><code>path_is_valid()</code> aims to cut down on the number of paths produced by the depth first search as they are found, based upon filtering criteria that are specific to the problem. I tried to explain the purpose of each one reasonably, but everything is clearer in one's own head; I'd be happy to improve the comments if needed.</p>\n\n<p>I'm open to any and all suggestions to improve performance, since, as the profile below shows, this is what is taking all my time. </p>\n\n<p>Also, I'm about to turn to Cython, but my code heavily relies on Python objects and I don't know if that's a smart move. Can anyone shed some light as to whether or not this route is even beneficial with this many native Python data structures involved? I can't seem to find much information on this and any help would be appreciated.</p>\n\n<p>Since I know people will ask, I have profiled my entire project and this is the source of the problem:</p>\n\n<pre><code>   311         1     18668669 18668669.0     99.6              cycles = self.graph.find_cycles()\n</code></pre>\n\n<p>Here's the line-profiled output of the <code>self.graph.find_cycles()</code> and <code>self.path_is_valid()</code>:</p>\n\n<pre><code>Function: cycle_dfs at line 106\nTotal time: 11.9584 s \n\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n   106                                               def cycle_dfs(self, current_node,  start_node,  graph, current_path):\n   107                                                   \"\"\"\n   108                                                   Naive depth first search applied to the pseudo-dual graph of the\n   109                                                   reference curve. This sucker is terribly inefficient. More to come.\n   110                                                   :param current_node:\n   111                                                   :param start_node:\n   112                                                   :param graph:\n   113                                                   :param current_path:\n   114                                                   :return:\n   115                                                   \"\"\"\n   116    437035       363181      0.8      3.6          if len(current_path) &gt;= 3:\n   117    436508       365213      0.8      3.7              last_three_vertices = current_path[-3:]\n   118    436508       321115      0.7      3.2              previous_three_faces = [set(self.faces_containing_arcs[vertex])\n   119   1746032      1894481      1.1     18.9                                      for vertex in last_three_vertices]\n   120    436508       539400      1.2      5.4              intersection_all = set.intersection(*previous_three_faces)\n   121    436508       368725      0.8      3.7              if len(intersection_all) == 2:\n   122                                                           return []\n   123                                           \n   124    437035       340937      0.8      3.4          if current_node == start_node:\n   125     34848      1100071     31.6     11.0              if self.path_is_valid(current_path):\n   126       486         3400      7.0      0.0                  return [tuple(shift(list(current_path)))]\n   127                                                       else:\n   128     34362        27920      0.8      0.3                  return []\n   129                                           \n   130                                                   else:\n   131    402187       299968      0.7      3.0              loops = []\n   132    839160       842350      1.0      8.4              for adjacent_node in set(graph[current_node]):\n   133    436973       388646      0.9      3.9                  current_path.append(adjacent_node)\n   134    436973       438763      1.0      4.4                  graph[current_node].remove(adjacent_node)\n   135    436973       440220      1.0      4.4                  graph[adjacent_node].remove(current_node)\n   136    436973       377422      0.9      3.8                  loops += list(self.cycle_dfs(adjacent_node, start_node,\n   137    436973       379207      0.9      3.8                                               graph, current_path))\n   138    436973       422298      1.0      4.2                  graph[current_node].append(adjacent_node)\n   139    436973       388651      0.9      3.9                  graph[adjacent_node].append(current_node)\n   140    436973       412489      0.9      4.1                  current_path.pop()\n   141    402187       285471      0.7      2.9              return loops\n\nFunction: path_is_valid at line 65\nTotal time: 1.6726 s\n\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n65                                               def path_is_valid(self, current_path):\n66                                                   \"\"\"\n67                                                   Aims to implicitly filter during dfs to decrease output size. Observe\n68                                                   that more complex filters are applied further along in the function.\n69                                                   We'd rather do less work to show the path is invalid rather than more,\n70                                                   so filters are applied in order of increasing complexity.\n71                                                   :param current_path:\n72                                                   :return: Boolean indicating a whether the given path is valid\n73                                                   \"\"\"\n74     34848        36728      1.1      2.2          length = len(current_path)\n75     34848        33627      1.0      2.0          if length &lt; 3:\n76                                                       # The path is too short\n77        99           92      0.9      0.0              return False\n78                                           \n79                                                   # Passes through arcs twice... Sketchy for later.\n80     34749        89536      2.6      5.4          if len(set(current_path)) != len(current_path):\n81     31708        30402      1.0      1.8              return False\n82                                           \n83                                                   # The idea here is take a moving window of width three along the path\n84                                                   # and see if it's contained entirely in a polygon.\n85      3041         6287      2.1      0.4          arc_triplets = (current_path[i:i+3] for i in xrange(length-2))\n86     20211        33255      1.6      2.0          for triplet in arc_triplets:\n87     73574        70670      1.0      4.2              for face in self.non_fourgons:\n88     56404        94019      1.7      5.6                  if set(triplet) &lt;= set(face):\n89      2477         2484      1.0      0.1                      return False\n90                                           \n91                                                   # This is all kinds of unclear when looking at. There is an edge case\n92                                                   # pertaining to the beginning and end of a path existing inside of a\n93                                                   # polygon. The previous filter will not catch this, so we cycle the path\n94                                                   # a reasonable amount and recheck moving window filter.\n95       564          895      1.6      0.1          path_copy = list(current_path)\n96      8028         7771      1.0      0.5          for i in xrange(length):\n97      7542        14199      1.9      0.8              path_copy = path_copy[1:] + path_copy[:1]  # wtf\n98      7542        11867      1.6      0.7              arc_triplets = (path_copy[i:i+3] for i in xrange(length-2))\n99    125609       199100      1.6     11.9              for triplet in arc_triplets:\n100    472421       458030      1.0     27.4                  for face in self.non_fourgons:\n101    354354       583106      1.6     34.9                      if set(triplet) &lt;= set(face):\n102        78           83      1.1      0.0                          return False\n103                                           \n104       486          448      0.9      0.0          return True\n</code></pre>\n\n<p>Thanks! </p>\n\n<p>EDIT: Well, after a lot of merciless profiling, I was able to bring the run time down from 12 seconds to ~1.5.</p>\n\n<p>I changed this portion of <code>cycle_dfs()</code></p>\n\n<pre><code>    last_three_vertices = current_path[-3:]\n    previous_three_faces = [set(self.faces_containing_arcs[vertex])\n                            for vertex in last_three_vertices]\n    intersection_all = set.intersection(*previous_three_faces)\n    if len(intersection_all) == 2: ...\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>        # Count the number of times each face appears by incrementing values\n        # of face_id's\n        containing_faces = defaultdict(lambda: 0)\n        for face in (self.faces_containing_arcs[v]\n                     for v in current_path[-3:]):\n            for f in face:\n                containing_faces[f] += 1\n        # If there's any face_id f that has a value of three, that means that\n        # there is one face that all three arcs bound. This is a trivial path\n        # so we discard it.\n        if 3 in containing_faces.values(): ...\n</code></pre>\n\n<p>This was motivated by another post I saw benchmarking Python dictionary assignment; turns out assigning and editing values in a dict is a tiny bit slower than adding integers (which still blows my mind). Along with the two additions to <code>self.path_is_valid()</code>, I squeaked out a 12x speedup. However, further suggestions would be appreciated since better performance overall will only make harder problems easier as the input complexity grows.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 2008, "user_id": 916945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e9eba57c4fec016320a2376e511e0735?s=128&d=identicon&r=PG", "display_name": "Andrew Fount", "link": "https://stackoverflow.com/users/916945/andrew-fount"}, "edited": false, "score": 0, "creation_date": 1421871510, "post_id": 28075919, "comment_id": 44531194, "body": "This doesn&#39;t work, because media=property(_media) makes it execute immediately."}, {"owner": {"reputation": 3237, "user_id": 1352745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VV5jF.png?s=128&g=1", "display_name": "Daniel Robinson", "link": "https://stackoverflow.com/users/1352745/daniel-robinson"}, "reply_to_user": {"reputation": 2008, "user_id": 916945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e9eba57c4fec016320a2376e511e0735?s=128&d=identicon&r=PG", "display_name": "Andrew Fount", "link": "https://stackoverflow.com/users/916945/andrew-fount"}, "edited": false, "score": 0, "creation_date": 1421872575, "post_id": 28075919, "comment_id": 44531670, "body": "It does? I wouldn&#39;t think that it would... defining a property doesn&#39;t ordinarily call the getter immediately."}, {"owner": {"reputation": 2008, "user_id": 916945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e9eba57c4fec016320a2376e511e0735?s=128&d=identicon&r=PG", "display_name": "Andrew Fount", "link": "https://stackoverflow.com/users/916945/andrew-fount"}, "edited": false, "score": 0, "creation_date": 1421872704, "post_id": 28075919, "comment_id": 44531736, "body": "I tested. It doesn&#39;t work. _media is called earlier than MiddleWare"}, {"owner": {"reputation": 2008, "user_id": 916945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e9eba57c4fec016320a2376e511e0735?s=128&d=identicon&r=PG", "display_name": "Andrew Fount", "link": "https://stackoverflow.com/users/916945/andrew-fount"}, "edited": false, "score": 0, "creation_date": 1421873034, "post_id": 28075919, "comment_id": 44531908, "body": "Sorry, just forgot to restart server. Evertyhing works. Thank you:)"}, {"owner": {"reputation": 1455, "user_id": 646732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IPBfM.jpg?s=128&g=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/646732/miranda"}, "edited": false, "score": 0, "creation_date": 1512385958, "post_id": 28075919, "comment_id": 82221697, "body": "this version is outdated"}], "tags": [], "owner": {"reputation": 3237, "user_id": 1352745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VV5jF.png?s=128&g=1", "display_name": "Daniel Robinson", "link": "https://stackoverflow.com/users/1352745/daniel-robinson"}, "is_accepted": true, "score": 2, "last_activity_date": 1471252572, "last_edit_date": 1471252572, "creation_date": 1421870815, "answer_id": 28075919, "question_id": 28075742, "link": "https://stackoverflow.com/questions/28075742/set-media-dynamically-for-django-widget/28075919#28075919", "title": "Set Media dynamically for Django widget", "body": "<p>You need to <a href=\"https://docs.djangoproject.com/en/1.7/topics/forms/media/#dynamic-property\" rel=\"nofollow\">set media as a dynamic property</a>:</p>\n\n<pre><code>class MyWidget(Widget):    \n    def _media(self):\n        return forms.Media(js=(\n            '//some source&amp;language='+translation.get_language(),\n        ))\n    media = property(_media)\n</code></pre>\n"}], "owner": {"reputation": 2008, "user_id": 916945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e9eba57c4fec016320a2376e511e0735?s=128&d=identicon&r=PG", "display_name": "Andrew Fount", "link": "https://stackoverflow.com/users/916945/andrew-fount"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 28075919, "answer_count": 1, "score": 2, "last_activity_date": 1471252572, "creation_date": 1421870147, "last_edit_date": 1421873767, "question_id": 28075742, "link": "https://stackoverflow.com/questions/28075742/set-media-dynamically-for-django-widget", "title": "Set Media dynamically for Django widget", "body": "<p>Is it possible to add media inside <code>__init__</code> in a <code>Widget</code>?</p>\n\n<p>I need to find language of page and pass it to widget, but it appears that middleware for processing request works after the media initialization.</p>\n\n<p>So, basically what I have:</p>\n\n<pre><code>class SimpleMiddleware():\n    # some code for getting language...\n\n\nclass MyWidget(Widget):\n\n    class Media:\n        js = (\n            '//some source&amp;language='+translation.get_language(),\n        )\n</code></pre>\n\n<p><code>translation.get_language</code> gives incorrect language, since the middleware didn't execute code before media.</p>\n"}, {"tags": ["python", "google-cloud-messaging"], "comments": [{"owner": {"reputation": 2209, "user_id": 2421933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea039aaa30fc556421d0ddfefa78a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Jun", "link": "https://stackoverflow.com/users/2421933/jun"}, "edited": false, "score": 0, "creation_date": 1478590264, "post_id": 28075708, "comment_id": 68206440, "body": "Any luck on this?"}, {"owner": {"reputation": 817, "user_id": 1776544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2936eb2c957bc740e52308c1d6158f9?s=128&d=identicon&r=PG", "display_name": "weemattisnot", "link": "https://stackoverflow.com/users/1776544/weemattisnot"}, "reply_to_user": {"reputation": 2209, "user_id": 2421933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea039aaa30fc556421d0ddfefa78a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Jun", "link": "https://stackoverflow.com/users/2421933/jun"}, "edited": false, "score": 0, "creation_date": 1478590706, "post_id": 28075708, "comment_id": 68206651, "body": "I did eventually figure it out, but I am sorry to say that I don&#39;t remember how, nor do I have the code around. It was involved. Sorry I can&#39;t be more help. Check out my response to the so_jin_ee below for a small hint, but you&#39;ve probably already seen that..."}, {"owner": {"reputation": 2209, "user_id": 2421933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea039aaa30fc556421d0ddfefa78a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Jun", "link": "https://stackoverflow.com/users/2421933/jun"}, "edited": false, "score": 0, "creation_date": 1478590888, "post_id": 28075708, "comment_id": 68206754, "body": "Yea I saw that. But I don&#39;t wanna use java methods. and the link in the answer is expired. Thanks for the reply :)"}], "answers": [{"comments": [{"owner": {"reputation": 817, "user_id": 1776544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2936eb2c957bc740e52308c1d6158f9?s=128&d=identicon&r=PG", "display_name": "weemattisnot", "link": "https://stackoverflow.com/users/1776544/weemattisnot"}, "edited": false, "score": 0, "creation_date": 1421962635, "post_id": 28099124, "comment_id": 44573979, "body": "Thanks, but none of the libraries I linked to above provide a way to call that function. I have resorted to using pyjnius to call the java methods (such as the one you mentioned)."}], "tags": [], "owner": {"reputation": 764, "user_id": 4338280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyhEp.jpg?s=128&g=1", "display_name": "so_jin_ee", "link": "https://stackoverflow.com/users/4338280/so-jin-ee"}, "is_accepted": false, "score": 0, "last_activity_date": 1421962510, "creation_date": 1421962510, "answer_id": 28099124, "question_id": 28075708, "link": "https://stackoverflow.com/questions/28075708/how-do-you-register-a-python-based-client-with-gcm-google-cloud-messenger-to-g/28099124#28099124", "title": "How do you register a python-based client with GCM (Google Cloud Messenger) to get a registration_id for the device?", "body": "<p>Each client application has to call the <code>getRegistrationId()</code> to get the registration id once. Then they can receive messages. A more detailed function call is <a href=\"https://developer.android.com/google/gcm/client.html\" rel=\"nofollow\"><strong>here</strong></a></p>\n\n<p>I hope this give you an idea on client devices. :)</p>\n"}], "owner": {"reputation": 817, "user_id": 1776544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2936eb2c957bc740e52308c1d6158f9?s=128&d=identicon&r=PG", "display_name": "weemattisnot", "link": "https://stackoverflow.com/users/1776544/weemattisnot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421962510, "creation_date": 1421870037, "question_id": 28075708, "link": "https://stackoverflow.com/questions/28075708/how-do-you-register-a-python-based-client-with-gcm-google-cloud-messenger-to-g", "title": "How do you register a python-based client with GCM (Google Cloud Messenger) to get a registration_id for the device?", "body": "<p>I have been trying to figure out how to use one of the following python packages to create a python-based client that is capable of <strong>receiving</strong> XMPP-based messages via Google Cloud Messenging.</p>\n\n<ul>\n<li><p><a href=\"https://github.com/geeknam/python-gcm\" rel=\"nofollow\">https://github.com/geeknam/python-gcm</a></p></li>\n<li><p><a href=\"https://github.com/daftshady/py-gcm\" rel=\"nofollow\">https://github.com/daftshady/py-gcm</a></p></li>\n<li><p><a href=\"https://pypi.python.org/pypi/gcm-client/\" rel=\"nofollow\">https://pypi.python.org/pypi/gcm-client/</a></p></li>\n<li><p><a href=\"https://github.com/pennersr/pulsus\" rel=\"nofollow\">https://github.com/pennersr/pulsus</a></p></li>\n</ul>\n\n<p>From all I can see, (<a href=\"http://gcm-client.readthedocs.org/en/latest/\" rel=\"nofollow\">e.g., the documentation for gcm-client</a>), these packages can send messages to other clients that are identified by <code>registration_id</code>. But how do I get a registration IDs for each client in the first place? In other words, how do I register the client-app that I am creating so that it can receive messages?</p>\n\n<p>It is starting to seem to me that these are not clients per-se, but just libraries that can be used to push messages to clients. I hope that I am wrong about that and just missing a key concept.</p>\n"}, {"tags": ["python", "pandas", "ipython"], "comments": [{"owner": {"reputation": 283, "user_id": 4417394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-W5zA9VYgfaU/AAAAAAAAAAI/AAAAAAAASxY/lEQDpCJ9sSI/photo.jpg?sz=128", "display_name": "Rahul Wadhwani", "link": "https://stackoverflow.com/users/4417394/rahul-wadhwani"}, "reply_to_user": {"reputation": 33681, "user_id": 1330293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76742a2b36b2e174181679118274e2e7?s=128&d=identicon&r=PG", "display_name": "elyase", "link": "https://stackoverflow.com/users/1330293/elyase"}, "edited": false, "score": 0, "creation_date": 1421870662, "post_id": 28075699, "comment_id": 44530783, "body": "Which library should I be using for it then?"}, {"owner": {"reputation": 33681, "user_id": 1330293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76742a2b36b2e174181679118274e2e7?s=128&d=identicon&r=PG", "display_name": "elyase", "link": "https://stackoverflow.com/users/1330293/elyase"}, "edited": false, "score": 0, "creation_date": 1421871131, "post_id": 28075699, "comment_id": 44531003, "body": "<a href=\"http://www.python-excel.org\" rel=\"nofollow noreferrer\">xlwt</a> or <a href=\"http://pythonhosted.org/xlutils/index.html\" rel=\"nofollow noreferrer\">xlutils</a>. May be also <a href=\"http://xlwings.org\" rel=\"nofollow noreferrer\">xlwings.org</a> (free) or <a href=\"https://datanitro.com\" rel=\"nofollow noreferrer\">datanitro.com</a> (paid) for controlling excel directly. Pandas is not designed to manipulate excel files, it just reads from them and makes easy to make calculations."}, {"owner": {"reputation": 6217, "user_id": 1257953, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/afb18b489df58f20beabaa5dc268a8cb?s=128&d=identicon&r=PG", "display_name": "nitin", "link": "https://stackoverflow.com/users/1257953/nitin"}, "edited": false, "score": 0, "creation_date": 1421871335, "post_id": 28075699, "comment_id": 44531099, "body": "openpyxl is well maintained and has seen many recent update"}, {"owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1421880127, "post_id": 28075699, "comment_id": 44535258, "body": "Are you looking to generate hexadecimal colors based on the values pulled from the spreadsheet, or <b>actually color the cells in the Excel Workbook</b>?  Sorry, I wasn&#39;t clear on that point from your question."}, {"owner": {"reputation": 283, "user_id": 4417394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-W5zA9VYgfaU/AAAAAAAAAAI/AAAAAAAASxY/lEQDpCJ9sSI/photo.jpg?sz=128", "display_name": "Rahul Wadhwani", "link": "https://stackoverflow.com/users/4417394/rahul-wadhwani"}, "edited": false, "score": 0, "creation_date": 1421901123, "post_id": 28075699, "comment_id": 44541229, "body": "I would like to colour the cells in the Excel Workbook."}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 1, "creation_date": 1421930624, "post_id": 28075699, "comment_id": 44554786, "body": "You can use the <code>xlsxwriter</code> engine from Pandas to apply a conditional format to data in an Excel worksheet. See this answer to <a href=\"http://stackoverflow.com/questions/26265403/easiest-way-to-create-a-color-gradient-on-excel-using-python-pandas/26268303#26268303\">Easiest way to create a color gradient on excel using python/pandas?</a>. That may be close to what you want to do."}], "answers": [{"tags": [], "owner": {"reputation": 1512, "user_id": 4473236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20d351c5a948848452322ca19c741310?s=128&d=identicon&r=PG&f=1", "display_name": "Skorpeo", "link": "https://stackoverflow.com/users/4473236/skorpeo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421915663, "creation_date": 1421915663, "answer_id": 28084244, "question_id": 28075699, "link": "https://stackoverflow.com/questions/28075699/coloring-cells-in-pandas/28084244#28084244", "title": "Coloring Cells in Pandas", "body": "<p>try something like this:</p>\n\n<pre><code>with pandas.io.excel.ExcelWriter(path=Path, engine=\"xlsxwriter\") as writer:\n   sheet = writer.book.worksheets()[0]\n   sheet.write(x, y, value, format) #format is what determines the color etc.\n</code></pre>\n\n<p>More info here: <a href=\"https://xlsxwriter.readthedocs.org/format.html\" rel=\"nofollow\">https://xlsxwriter.readthedocs.org/format.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1519, "user_id": 7227627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKpfo.jpg?s=128&g=1", "display_name": "pyano", "link": "https://stackoverflow.com/users/7227627/pyano"}, "is_accepted": false, "score": 1, "last_activity_date": 1482356758, "creation_date": 1482356758, "answer_id": 41272418, "question_id": 28075699, "link": "https://stackoverflow.com/questions/28075699/coloring-cells-in-pandas/41272418#41272418", "title": "Coloring Cells in Pandas", "body": "<p>There are quite a few ideas  about styling the cells on the <a href=\"http://pandas.pydata.org/pandas-docs/stable/style.html\" rel=\"nofollow noreferrer\">Pandas website</a>.\nHowever it ist mentioned: <em>This is a new feature and still under development. We'll be adding features and possibly making breaking changes in future releases</em></p>\n"}, {"comments": [{"owner": {"reputation": 340, "user_id": 6828137, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SERVd.jpg?s=128&g=1", "display_name": "p_sutherland", "link": "https://stackoverflow.com/users/6828137/p-sutherland"}, "edited": false, "score": 0, "creation_date": 1523033510, "post_id": 41272883, "comment_id": 86408087, "body": "Exporting Styler objects back to Excel is supported as of Pandas 0.20.0 --<a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.formats.style.Styler.to_excel.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}, {"owner": {"reputation": 162, "user_id": 5132432, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bc6244b8ce9020e83f090f19856e405b?s=128&d=identicon&r=PG&f=1", "display_name": "trock2000", "link": "https://stackoverflow.com/users/5132432/trock2000"}, "edited": false, "score": 0, "creation_date": 1569418022, "post_id": 41272883, "comment_id": 102590832, "body": "@wkzhu when I attempt to run your code I get &quot;&lt;pandas.core.style.Styler at 0x259e2be0&gt; instead of the table displaying, any ideas?"}, {"owner": {"reputation": 1186, "user_id": 7327411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211446482337148/picture?type=large", "display_name": "wkzhu", "link": "https://stackoverflow.com/users/7327411/wkzhu"}, "reply_to_user": {"reputation": 162, "user_id": 5132432, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bc6244b8ce9020e83f090f19856e405b?s=128&d=identicon&r=PG&f=1", "display_name": "trock2000", "link": "https://stackoverflow.com/users/5132432/trock2000"}, "edited": false, "score": 0, "creation_date": 1569507277, "post_id": 41272883, "comment_id": 102626470, "body": "@trock2000 <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html#Building-styles\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/user_guide/&hellip;</a> have you tried with this example? Are you running on Jupyter notebook?"}, {"owner": {"reputation": 162, "user_id": 5132432, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bc6244b8ce9020e83f090f19856e405b?s=128&d=identicon&r=PG&f=1", "display_name": "trock2000", "link": "https://stackoverflow.com/users/5132432/trock2000"}, "edited": false, "score": 0, "creation_date": 1569515017, "post_id": 41272883, "comment_id": 102630647, "body": "@wkzhu as you inferred, the issue was I was running this in Spyder - have it working in Jupyter now, thx"}], "tags": [], "owner": {"reputation": 1186, "user_id": 7327411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211446482337148/picture?type=large", "display_name": "wkzhu", "link": "https://stackoverflow.com/users/7327411/wkzhu"}, "is_accepted": true, "score": 38, "last_activity_date": 1482359844, "last_edit_date": 1482359844, "creation_date": 1482358829, "answer_id": 41272883, "question_id": 28075699, "link": "https://stackoverflow.com/questions/28075699/coloring-cells-in-pandas/41272883#41272883", "title": "Coloring Cells in Pandas", "body": "<p>Pandas has a relatively new <code>Styler</code> feature where you can apply conditional formatting type manipulations to dataframes.\n<a href=\"http://pandas.pydata.org/pandas-docs/stable/style.html\" rel=\"noreferrer\">http://pandas.pydata.org/pandas-docs/stable/style.html</a></p>\n\n<p>You can use some of their built-in functions like <code>background_gradient</code> or <code>bar</code> to replicate excel-like features like conditional formatting and data bars. You can also format cells to display percentages, floats, ints, etc. without changing the original dataframe.</p>\n\n<p>Here's an example of the type of chart you can make using <code>Styler</code> (this is a nonsense chart but just meant to demonstrate features):</p>\n\n<p><a href=\"https://i.stack.imgur.com/qLb0Q.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qLb0Q.png\" alt=\"enter image description here\"></a></p>\n\n<p>To harness the full functionality of <code>Styler</code> you should get comfortable with the <code>Styler.apply()</code> and <code>Styler.applymap()</code> APIs. These allow you to create custom functions and apply them to the table's columns, rows or elements. For example, if I wanted to color a +ive cell green and a -ive cell red, I'd create a function </p>\n\n<pre><code>def _color_red_or_green(val):\n    color = 'red' if val &lt; 0 else 'green'\n    return 'color: %s' % color\n</code></pre>\n\n<p>and call it on my <code>Styler</code> object, i.e., <code>df.style.applymap(_color_red_or_green)</code>.</p>\n\n<p>With respect to exporting back to Excel, as far as I'm aware this is not supported in <code>Styler</code> yet so I'd probably go the xlsxwriter route if you NEED Excel for some reason. However, in my experience this is a great pure Python alternative, for example along with matplotlib charts and in emails/reports.</p>\n"}, {"tags": [], "owner": {"reputation": 2108, "user_id": 6452438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39b05bbabf6a3ead4e3f6079f9802d5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuchao Jiang", "link": "https://stackoverflow.com/users/6452438/yuchao-jiang"}, "is_accepted": false, "score": 0, "last_activity_date": 1597325812, "creation_date": 1597325812, "answer_id": 63396427, "question_id": 28075699, "link": "https://stackoverflow.com/questions/28075699/coloring-cells-in-pandas/63396427#63396427", "title": "Coloring Cells in Pandas", "body": "<p>The most simple way is to use applymap and lambda if you only want to highlight certain values:</p>\n<pre><code>df.style.applymap(lambda x: &quot;background-color: red&quot; if x&gt;0 else &quot;background-color: white&quot;)\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 4417394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-W5zA9VYgfaU/AAAAAAAAAAI/AAAAAAAASxY/lEQDpCJ9sSI/photo.jpg?sz=128", "display_name": "Rahul Wadhwani", "link": "https://stackoverflow.com/users/4417394/rahul-wadhwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52824, "favorite_count": 9, "accepted_answer_id": 41272883, "answer_count": 4, "score": 14, "last_activity_date": 1597325812, "creation_date": 1421870021, "question_id": 28075699, "link": "https://stackoverflow.com/questions/28075699/coloring-cells-in-pandas", "title": "Coloring Cells in Pandas", "body": "<p>I am able to import data from an excel file using Pandas by using:</p>\n\n<pre><code>xl = read_excel('path_to_file.xls', 'Sheet1', index_col=None, na_values=['NA'])    \n</code></pre>\n\n<p>Now that I have all the data in xl as DataFrame. I would like to colour  some cells in that data based on conditions defined in another function and export the same (with colour coding) to an Excel file. </p>\n\n<p>Can someone tell me how should I go about this?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["javascript", "python", "dygraphs"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 3739177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad3f330eb5a6c067d4aeb06b069cbfca?s=128&d=identicon&r=PG&f=1", "display_name": "Tsung-Han Yang", "link": "https://stackoverflow.com/users/3739177/tsung-han-yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1447564773, "creation_date": 1447564773, "answer_id": 33716697, "question_id": 28075695, "link": "https://stackoverflow.com/questions/28075695/python-and-dygraph-no-len/33716697#33716697", "title": "Python and dygraph - no len", "body": "<p>You need to have a, b, c, lc and hc as pandas series. Insert these lines after the last import.</p>\n\n<pre><code>a = pd.Series([1,2,3,4,5,6,7,9,10])\nb = pd.Series([1,3,5,9,2,8,5,5,15])\nlc= pd.Series([1,3,4,5,6,7,9,3,2])\nc = pd.Series([2,4,5,7,8,8,9,4,3])\nhc= pd.Series([3,5,7,7,9,11,9,5,8])\n</code></pre>\n\n<p>Check <a href=\"http://dyplot.readthedocs.org/en/latest/tutorials.html\" rel=\"nofollow\">http://dyplot.readthedocs.org/en/latest/tutorials.html</a></p>\n"}], "owner": {"reputation": 147, "user_id": 4213235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1045a52313a56a3eb089ff0c11e66df?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/4213235/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447564773, "creation_date": 1421870004, "question_id": 28075695, "link": "https://stackoverflow.com/questions/28075695/python-and-dygraph-no-len", "title": "Python and dygraph - no len", "body": "<p>I am completely new to Python and dygraph but trying to reproduce the first example mentioned here:\n<a href=\"https://pypi.python.org/pypi/dyplot\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/dyplot</a></p>\n\n<p>I downloaded the package and copied it into the Anaconda directory, so it is acually recognized by my IPython code. However, the copied code throws an error:</p>\n\n<pre><code>import pandas as pd\nfrom dyplot.dygraphs import Dygraphs\ndg = Dygraphs(a.index, \"index\")\ndg.plot(series=\"a\", mseries=a)\ndg.plot(series=\"b\", mseries=b)\ndg.plot(series=\"c\", mseries=c,lseries=lc, hseries=hc)\ndg.set_options(title=\"Test\")\ndiv = dg.savefig(csv_file=\"tutorial.csv\", html_file=\"tutorial1.html\")\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/rzGiB.jpg\" alt=\"enter image description here\"></p>\n\n<p>Does anybody has a clue about this problem?\nI use Python 3.4</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["python", "django", "pdb"], "answers": [{"comments": [{"owner": {"reputation": 2814, "user_id": 2773013, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b5666acb4000d90c055a47d93b49421a?s=128&d=identicon&r=PG&f=1", "display_name": "user2773013", "link": "https://stackoverflow.com/users/2773013/user2773013"}, "edited": false, "score": 0, "creation_date": 1421879232, "post_id": 28076037, "comment_id": 44534889, "body": "that seems to work. now when i press &quot;c&quot; it tells me the program finished and will be restarted. how do i invoke a view.py in from certain directory, which i think looks like a package"}, {"owner": {"reputation": 3302, "user_id": 2714733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7504fae09ab00aac17a6fbcb02d199d2?s=128&d=identicon&r=PG", "display_name": "Nostalg.io", "link": "https://stackoverflow.com/users/2714733/nostalg-io"}, "reply_to_user": {"reputation": 2814, "user_id": 2773013, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b5666acb4000d90c055a47d93b49421a?s=128&d=identicon&r=PG&f=1", "display_name": "user2773013", "link": "https://stackoverflow.com/users/2773013/user2773013"}, "edited": false, "score": 0, "creation_date": 1421895277, "post_id": 28076037, "comment_id": 44539704, "body": "<code>views.py</code> files are part of the MVC layout in Django. Some people refer to it as MVT (Model-View-Template) in Django. The model, which describes the data and generates the database table, is in <code>models.py</code>. The views are in <code>views.py</code>. And the templates are usually <code>.html</code> files in a templates folder. The magic that takes an http request and coordinates everything is usually found in <code>urls.py</code>. Look for a <code>urls.py</code> config file. It should have a URL regex that points to your view. Then load that URL with the server running. E.g. <code>localhost:8000&#47;app_name&#47;index&#47;</code>"}], "tags": [], "owner": {"reputation": 3302, "user_id": 2714733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7504fae09ab00aac17a6fbcb02d199d2?s=128&d=identicon&r=PG", "display_name": "Nostalg.io", "link": "https://stackoverflow.com/users/2714733/nostalg-io"}, "is_accepted": true, "score": 2, "last_activity_date": 1421872234, "last_edit_date": 1421872234, "creation_date": 1421871278, "answer_id": 28076037, "question_id": 28075648, "link": "https://stackoverflow.com/questions/28075648/pdb-error-in-django-code/28076037#28076037", "title": "pdb error in django code", "body": "<p>Python is installed in almost every environment, but the packages required for each project tend to vary widely. E.g. some projects only work with Django version 1.6, while others are designed for Django version 1.7.</p>\n\n<p>For this reason, some ingenious person created <a href=\"http://virtualenv.readthedocs.org/en/latest/\" rel=\"nofollow\">virtual environments</a>. And this is the <a href=\"http://developerblog.redhat.com/2014/02/27/using-pythons-virtualenv-with-rhscl/\" rel=\"nofollow\">helpful tutorial done on Red Hat</a>.</p>\n\n<p>Your project is most likely meant to run from within such a virtual environment. The fact that Python can't import <code>django.http</code> suggests that your default environment doesn't even have Django installed. </p>\n\n<p>Developers put the environment folders in different places. Your previous developer may have put it within the project folder, or in another place where other virtual environments are stored.</p>\n\n<p>Look for a folder name with a structure like <code>[name_for_env]/bin/activate</code>.</p>\n\n<p>You would activate this with:\n<code>source [name_for_env]/bin/activate</code></p>\n\n<p>Then deactivate with:\n<code>deactivate</code></p>\n\n<p>When you are in a virtual environment, you can install missing packages with:</p>\n\n<pre><code>pip install [name_of_package]\n</code></pre>\n\n<p><strong><em>OR</em></strong></p>\n\n<p>You're also using PDB wrong. And that will also give you the import error message. You <strong><em>must</em></strong> run the server with <code>manage.py</code>. This is necessary to setup various Django settings.\nRun it like so:</p>\n\n<pre><code>python -m pdb manage.py runserver\n</code></pre>\n\n<p>You can enter in PDB breakpoints in your views.py by <a href=\"https://mike.tig.as/blog/2010/09/14/pdb/\" rel=\"nofollow\">following this tutorial</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 1, "last_activity_date": 1421875166, "creation_date": 1421875166, "answer_id": 28077023, "question_id": 28075648, "link": "https://stackoverflow.com/questions/28075648/pdb-error-in-django-code/28077023#28077023", "title": "pdb error in django code", "body": "<p>You don't need to start your server via pdb. You can simply import pdb in your code and set a breakpoint wherever you like: </p>\n\n<pre><code>import pdb; pdb.set_trace()\n</code></pre>\n\n<p>and you will be dumped into the debugger in the console whenever Django reaches that point.</p>\n"}], "owner": {"reputation": 2814, "user_id": 2773013, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b5666acb4000d90c055a47d93b49421a?s=128&d=identicon&r=PG&f=1", "display_name": "user2773013", "link": "https://stackoverflow.com/users/2773013/user2773013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 28076037, "answer_count": 2, "score": 0, "last_activity_date": 1421875166, "creation_date": 1421869830, "question_id": 28075648, "link": "https://stackoverflow.com/questions/28075648/pdb-error-in-django-code", "title": "pdb error in django code", "body": "<p>I'm new to django environment. I need to debug inherited project. The functionI need to debug is in views.py. Let's call it function x. My environment is redhat, apache, django. How do i debug it using pdb. I tried looking at tutorials, but can't seem to help me. </p>\n\n<p>this is what I run on my redhat command line</p>\n\n<pre><code>python -m pdb /opt/django/projectx/views.py runserver \n</code></pre>\n\n<p>when i hit \"c\" to continue, i'm presented with </p>\n\n<pre><code>ImportError: No module named django.http\n</code></pre>\n\n<p>Which is the second line of code in views.py. There are 2 functions in view(let's call them x and y), but I need to get to the function x. </p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 8, "creation_date": 1421869807, "post_id": 28075619, "comment_id": 44530323, "body": "Hello, welcome to StackOverflow! Could you please tell us what your code is suppose to do and what is the issue that you are having? We need to know more than &quot;what is wrong with my .py code&quot; :)"}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1421870075, "post_id": 28075619, "comment_id": 44530468, "body": "Step 1. Save the file as <code>test.py</code> in <code>~</code> (Home) folder. Step 2. Press <code>Ctrl</code>+<code>Alt</code>+<code>T</code> Step 3. Type <code>python test.py</code> and press <code>enter</code> ... <i>Voila</i> , your program executes"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421870260, "post_id": 28075619, "comment_id": 44530568, "body": "Tell me if I&#39;m right: as an end result, you want to be able to open your terminal as normal and type <code>WCTemp(any, numbers)</code> and get the result printed to stdout?"}, {"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1421870324, "post_id": 28075619, "comment_id": 44530600, "body": "<code>Ctrl+Alt+T</code> can do anything, e.g. for me it does nothing..."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421870387, "post_id": 28075619, "comment_id": 44530646, "body": "your code does output what you want"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421871364, "post_id": 28075619, "comment_id": 44531115, "body": "Your edit just totally changed your question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4479829"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421871488, "post_id": 28075619, "comment_id": 44531186, "body": "@PadraicCunningham that&#39;s because I have to return the answer 23.44 instead of printing it."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421871848, "post_id": 28075619, "comment_id": 44531359, "body": "@JaredLail, if you do what you are saying it will work. Have you saved it in  file test.py?"}], "answers": [{"comments": [{"owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1421870250, "post_id": 28075731, "comment_id": 44530562, "body": "Yeah, that&#39;s because you need to pass values for arguments in your print statement."}], "tags": [], "owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "is_accepted": false, "score": 0, "last_activity_date": 1421870127, "creation_date": 1421870127, "answer_id": 28075731, "question_id": 28075619, "link": "https://stackoverflow.com/questions/28075619/what-is-wrong-with-my-py-code-and-how-do-i-get-this-to-run-in-a-linux-terminal/28075731#28075731", "title": "What is wrong with my .py code and how do I get this to run in a linux terminal?", "body": "<p>In order to run this code from the command-line (i.e >>> python3 file.py), you'll need to save it as a module (file.py), and refactor it to the following:</p>\n\n<pre><code>def WCTemp(temp,velocity):\n    '''\n    &gt;&gt;&gt; WCTemp(32,10)\n    23.44\n    &gt;&gt;&gt; WCTemp(80,30)\n    82.07\n    '''\n    #place code here\n    v = velocity**0.16\n    return 35.74 + 0.6125 * temp - 35.75 * v + 0.4275 * temp * v\n\nif __name__ == \"__main__\":\n    print (\"%.2f\" % WCTemp(32, 10))\n</code></pre>\n\n<p>But first, you'll need to pass values for your <code>temp</code> and <code>velocity</code> arguments in your print statement. Otherwise, your function has nothing to calculate!</p>\n"}, {"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 0, "last_activity_date": 1421870171, "creation_date": 1421870171, "answer_id": 28075751, "question_id": 28075619, "link": "https://stackoverflow.com/questions/28075619/what-is-wrong-with-my-py-code-and-how-do-i-get-this-to-run-in-a-linux-terminal/28075751#28075751", "title": "What is wrong with my .py code and how do I get this to run in a linux terminal?", "body": "<p>Just change the <code>print</code> line to:</p>\n\n<pre><code>print (\"%.2f\" % WCTemp(32,10))\n</code></pre>\n\n<p>and run your program with: <code>python file.py</code></p>\n\n<p>where <code>file.py</code> is the name of file containing the code.</p>\n"}, {"tags": [], "owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "is_accepted": false, "score": -2, "last_activity_date": 1421870304, "creation_date": 1421870304, "answer_id": 28075787, "question_id": 28075619, "link": "https://stackoverflow.com/questions/28075619/what-is-wrong-with-my-py-code-and-how-do-i-get-this-to-run-in-a-linux-terminal/28075787#28075787", "title": "What is wrong with my .py code and how do I get this to run in a linux terminal?", "body": "<p>I guess you are trying to do this.</p>\n\n<pre><code>def WCTemp(temp,velocity):\n    v = velocity**0.16\n    r = 35.74 + 0.6125 * temp - 35.75 * v + 0.4275 * temp * v\n    print (\"%.2f\" % r)\n\n\nWCTemp(32,10) \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4479829"}, "edited": false, "score": 0, "creation_date": 1421872489, "post_id": 28075894, "comment_id": 44531631, "body": "I ran the doctests and it said that it failed. it expected 23.44 and got &#39;23.44&#39; instead, how do I get rid of the quotes?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421872878, "post_id": 28075894, "comment_id": 44531836, "body": "one is a float and the other is a string , I edited the answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4479829"}, "edited": false, "score": 0, "creation_date": 1421873117, "post_id": 28075894, "comment_id": 44531945, "body": "Is there a way I can keep it as a float?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421873166, "post_id": 28075894, "comment_id": 44531972, "body": "don&#39;t cast it to a string using <code>a = &quot;%.2f&quot; % r</code> or return <code>float(a)</code>"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1421872744, "last_edit_date": 1421872744, "creation_date": 1421870720, "answer_id": 28075894, "question_id": 28075619, "link": "https://stackoverflow.com/questions/28075619/what-is-wrong-with-my-py-code-and-how-do-i-get-this-to-run-in-a-linux-terminal/28075894#28075894", "title": "What is wrong with my .py code and how do I get this to run in a linux terminal?", "body": "<p>To run the doctests:</p>\n\n<pre><code>def WCTemp(temp,velocity):\n    '''\n    &gt;&gt;&gt; WCTemp(32,10)\n    '23.44'\n    &gt;&gt;&gt; WCTemp(80,30)\n    '82.07'\n    '''\n    #place code here\n    v = velocity**0.16\n    r = 35.74 + 0.6125 * temp - 35.75 * v + 0.4275 * temp * v\n    a = \"%.2f\" % r\n    return (a)\n\nif __name__ == \"__main__\":\n    import doctest\n    doctest.testmod()\n</code></pre>\n\n<p>pass the -v flag to see the output:</p>\n\n<pre><code>~$ python   test.py  -v\nTrying:\n    WCTemp(32,10)\nExpecting:\n    '23.44'\nok\nTrying:\n    WCTemp(80,30)\nExpecting:\n    '82.07'\nok\n1 items had no tests:\n    __main__\n1 items passed all tests:\n   2 tests in __main__.WCTemp\n2 tests in 2 items.\n2 passed and 0 failed.\n</code></pre>\n\n<p>If you have saved it in a file as you have in your question python -i <code>test.py</code>  will work exactly how you want:</p>\n\n<p>test.py:</p>\n\n<pre><code>def WCTemp(temp,velocity):\n    '''\n    &gt;&gt;&gt; WCTemp(32,10)\n    23.44\n    &gt;&gt;&gt; WCTemp(80,30)\n    82.07\n    '''\n    #place code here\n    v = velocity**0.16\n    r = 35.74 + 0.6125 * temp - 35.75 * v + 0.4275 * temp * v\n    a = \"%.2f\" % r\n    return (a)\n\n~$ python -i v.py\n&gt;&gt;&gt; WCTemp(32,10)\n'23.44'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4479829"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 28075894, "answer_count": 4, "score": -1, "last_activity_date": 1421872744, "creation_date": 1421869724, "last_edit_date": 1421871050, "question_id": 28075619, "link": "https://stackoverflow.com/questions/28075619/what-is-wrong-with-my-py-code-and-how-do-i-get-this-to-run-in-a-linux-terminal", "title": "What is wrong with my .py code and how do I get this to run in a linux terminal?", "body": "<pre><code>def WCTemp(temp,velocity):\n    '''\n    &gt;&gt;&gt; WCTemp(32,10)\n    23.44\n    &gt;&gt;&gt; WCTemp(80,30)\n    82.07\n    '''\n    #place code here\n    v = velocity**0.16\n    r = 35.74 + 0.6125 * temp - 35.75 * v + 0.4275 * temp * v\n    a = \"%.2f\" % r\n    return (a)\n</code></pre>\n\n<p>I want to be able to open terminal, go to the directory this test.py file is in, type \"python -i test.py\", then be able to type \"WCTemp(32,10)\", and get the answer of 23.44.</p>\n\n<p>However, I keep getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"hw1.py\", line 15, in &lt;module&gt;\nprint (\"%.2f\" % WCTemp(temp,velocity))\nNameError: name 'temp' is not defined\n</code></pre>\n"}, {"tags": ["python", "blender", "bpy"], "answers": [{"comments": [{"owner": {"reputation": 1102, "user_id": 3684240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05f5b5980c5eebbd2e200dc5157f094?s=128&d=identicon&r=PG&f=1", "display_name": "user3684240", "link": "https://stackoverflow.com/users/3684240/user3684240"}, "edited": false, "score": 0, "creation_date": 1421914153, "post_id": 28083541, "comment_id": 44545617, "body": "How do I then open the file? The error stays as it is. I think you just solved my next problem after opening, but right now it even fails opening the file."}, {"owner": {"reputation": 796, "user_id": 3287820, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9dc8f8a32d82941eb2b64fd7d0451f2f?s=128&d=identicon&r=PG&f=1", "display_name": "ComputerScientist", "link": "https://stackoverflow.com/users/3287820/computerscientist"}, "edited": false, "score": 0, "creation_date": 1591816488, "post_id": 28083541, "comment_id": 110203928, "body": "@sambler the link to &quot;open and render each file&quot; is dead"}, {"owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "reply_to_user": {"reputation": 796, "user_id": 3287820, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9dc8f8a32d82941eb2b64fd7d0451f2f?s=128&d=identicon&r=PG&f=1", "display_name": "ComputerScientist", "link": "https://stackoverflow.com/users/3287820/computerscientist"}, "edited": false, "score": 0, "creation_date": 1591905121, "post_id": 28083541, "comment_id": 110240823, "body": "@ComputerScientist that should be the 2.79 page of what the old link was."}], "tags": [], "owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "is_accepted": true, "score": 15, "last_activity_date": 1591904926, "last_edit_date": 1591904926, "creation_date": 1421912565, "answer_id": 28083541, "question_id": 28075599, "link": "https://stackoverflow.com/questions/28075599/opening-blend-files-using-blenders-python-api/28083541#28083541", "title": "Opening .blend files using Blender&#39;s Python API", "body": "<p>The issue with your operator call is that it doesn't accept positional arguments, you need to name each argument -</p>\n\n<pre><code>bpy.ops.wm.open_mainfile(filepath=\"file_path\")\n</code></pre>\n\n<p>Blender only allows one open file at a time, when you open another blend file the existing data is flushed out of ram, this normally includes the script you are running.</p>\n\n<p>If you have a look at <a href=\"http://www.blender.org/api/blender_python_api_2_73_release/bpy.app.handlers.html\" rel=\"nofollow noreferrer\">bpy.app.handlers</a>, you can setup a handler to be persistent, in that it will remain in memory after loading a new blend file. This can allow you to run your code after the new blend file is opened.</p>\n\n<pre><code>import bpy\nfrom bpy.app.handlers import persistent\n\n@persistent\ndef load_handler(dummy):\n    print(\"Load Handler:\", bpy.data.filepath)\n\nbpy.app.handlers.load_post.append(load_handler)\n</code></pre>\n\n<p>You may also want to consider doing the main work outside of blender, loop through each file and tell blender to <a href=\"https://docs.blender.org/manual/en/2.79/advanced/command_line/arguments.html\" rel=\"nofollow noreferrer\">open and render each file</a>. </p>\n\n<pre><code>blender --background thefile.blend -a\n</code></pre>\n\n<p>will render an animation based on settings in the blend file.</p>\n\n<p>For more control you can also specify a python script to be run once the blend file is opened. <a href=\"https://blender.stackexchange.com/q/6817\">This question</a> can expand on that for you.</p>\n"}], "owner": {"reputation": 1102, "user_id": 3684240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05f5b5980c5eebbd2e200dc5157f094?s=128&d=identicon&r=PG&f=1", "display_name": "user3684240", "link": "https://stackoverflow.com/users/3684240/user3684240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12274, "favorite_count": 2, "accepted_answer_id": 28083541, "answer_count": 1, "score": 9, "last_activity_date": 1591904926, "creation_date": 1421869674, "question_id": 28075599, "link": "https://stackoverflow.com/questions/28075599/opening-blend-files-using-blenders-python-api", "title": "Opening .blend files using Blender&#39;s Python API", "body": "<p>I'm trying to make an automated build system for Blender 2.73 which reads XML files with lots of paths, opens the files one by another and then renders them.</p>\n\n<p>I'm using the following code in order to open:</p>\n\n<pre><code>bpy.ops.wm.open_mainfile(\"file_path\")\n</code></pre>\n\n<p>My problem is that I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;blender_console&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;BLENDER_PATH&gt;/scripts/modules/bpy/ops.py\", line 186, in __call__\n    ret = op_call(self.idname_py(), C_dict, kw, C_exec, C_undo)\nTypeError: Calling operator \"bpy.ops.wm.open_mainfile\" error, expected a string enum in ('INVOKE_DEFAULT', 'INVOKE_REGION_WIN', 'INVOKE_REGION_CHANNELS', 'INVOKE_REGION_PREVIEW', 'INVOKE_AREA', 'INVOKE_SCREEN', 'EXEC_DEFAULT', 'EXEC_REGION_WIN', 'EXEC_REGION_CHANNELS', 'EXEC_REGION_PREVIE)\n</code></pre>\n"}, {"tags": ["python", "batch-file", "cmd"], "comments": [{"owner": {"reputation": 7030, "user_id": 3536342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGovx.png?s=128&g=1", "display_name": "DavidPostill", "link": "https://stackoverflow.com/users/3536342/davidpostill"}, "edited": false, "score": 0, "creation_date": 1421876412, "post_id": 28075597, "comment_id": 44533571, "body": "The second one has <code>&quot;</code> around <code>C:\\cygwin\\bin\\TIP\\srcpython\\TIP.py</code>. The first one doesn&#39;t."}, {"owner": {"reputation": 25586, "user_id": 30447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/LlF5u.jpg?s=128&g=1", "display_name": "PA.", "link": "https://stackoverflow.com/users/30447/pa"}, "edited": false, "score": 1, "creation_date": 1421876773, "post_id": 28075597, "comment_id": 44533758, "body": "Also, the first one has C:\\Users\\BTO-user as current directory; the second one may be not.."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4412570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b68699747f7f86f6d4afe4a613e81c?s=128&d=identicon&r=PG&f=1", "display_name": "tim_p", "link": "https://stackoverflow.com/users/4412570/tim-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1421959647, "creation_date": 1421959647, "answer_id": 28098397, "question_id": 28075597, "link": "https://stackoverflow.com/questions/28075597/incoherence-between-execution-in-cmd-and-batch-file/28098397#28098397", "title": "Incoherence between execution in cmd and batch file", "body": "<p>The answer of PA is correct.His correction makes it work. Althought I'm not sure why works as my commands and my argument are indicated by their full path reference. I don't see why I need to be in that repository before it works.</p>\n"}], "owner": {"reputation": 31, "user_id": 4412570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b68699747f7f86f6d4afe4a613e81c?s=128&d=identicon&r=PG&f=1", "display_name": "tim_p", "link": "https://stackoverflow.com/users/4412570/tim-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28098397, "answer_count": 1, "score": 0, "last_activity_date": 1421959647, "creation_date": 1421869661, "question_id": 28075597, "link": "https://stackoverflow.com/questions/28075597/incoherence-between-execution-in-cmd-and-batch-file", "title": "Incoherence between execution in cmd and batch file", "body": "<p>During the execution of a command in the cmd my written application runs fine :</p>\n\n<pre><code>C:\\Users\\BTO-user&gt;C:\\Python33\\python.exe C:\\cygwin\\bin\\TIP\\srcpython\\TIP.py\n</code></pre>\n\n<p>But when I doubleclick the python an error popups \"python.exe has stopped working\"\nWhen I try to bypass this via a .bat file for automatic launching, the same error occurs.</p>\n\n<pre><code>@echo off\nC:\\Python33\\python.exe \"C:\\cygwin\\bin\\TIP\\srcpython\\TIP.py\"\nexit\n</code></pre>\n\n<p>So I my opinion the python interpreter should be different for both cases, so I verified the command assoc and ftype to see the what the doubleclick exactly does.</p>\n\n<pre><code>C:\\Users\\BTO-user&gt;assoc .py\n.py=Python.File\n\nC:\\Users\\BTO-user&gt;ftype Python.file\nPython.file=\"C:\\Python33\\python.exe\" \"%1\" %*\n</code></pre>\n\n<p>But as you can see the execution path is the same. Why is there a difference in execution between first and second execution methods? The first one is succesful the second fails. </p>\n"}, {"tags": ["python", "arrays", "numpy", "traversal"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1421870105, "post_id": 28075561, "comment_id": 44530480, "body": "Have you tried Anything? If so please post it."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1421870290, "post_id": 28075561, "comment_id": 44530586, "body": "Your process does not seem to work for <code>a[9]</code>."}, {"owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1421871392, "post_id": 28075561, "comment_id": 44531132, "body": "@wwii: a[9] --&gt; a[10] --&gt; a[5] --&gt; a[3] --&gt; -1"}], "answers": [{"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1421902699, "post_id": 28075898, "comment_id": 44541599, "body": "Each hop modifies elements/items, When a modified element is <i>referenced</i> in subsequent hops would it be guaranteed to contain the correct value at that point?  It seems like it should and works for this example but I just couldn&#39;t see my way through it."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1421934595, "post_id": 28075898, "comment_id": 44557268, "body": "@wwii: I&#39;ve added above some words of explanation. The values referenced in subsequent hops are guaranteed to contain values from the same sequence <code>G</code>."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 6, "last_activity_date": 1421938054, "last_edit_date": 1421938054, "creation_date": 1421870735, "answer_id": 28075898, "question_id": 28075561, "link": "https://stackoverflow.com/questions/28075561/traversing-a-1d-numpy-array-for-clustering/28075898#28075898", "title": "Traversing a 1D Numpy Array for Clustering", "body": "<p>We don't know <em>a priori</em> how many \"hops\" it takes to find a cluster center. So we'll have to do some iteration and check if we've landed on a cluster center:</p>\n\n<pre><code>import numpy as np\na = np.array([6, 8, 1, -1, 0, 3, -2, 4, -3, 10, 5])\n\nfor i in a:\n    mask = a&gt;=0\n    # We can stop when all the values in `a` are negative\n    if not mask.any(): break\n    # perform a hop\n    a[mask] = a[a[mask]]\n\nprint(a)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>[-2 -3 -3 -1 -2 -1 -2 -2 -3 -1 -1]\n</code></pre>\n\n<hr>\n\n<p>To see what's going on, it might be clearer to look at a simpler value of <code>a</code>:</p>\n\n<pre><code>a = np.arange(-1, 10)\nprint(a)\nfor i in a:\n    mask = a&gt;=0\n    # We can stop when all the values in `a` are negative\n    if not mask.any(): break\n    # perform a hop\n    a[mask] = a[a[mask]]\n    print(a)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>[-1  0  1  2  3  4  5  6  7  8  9]\n[-1 -1  0  1  2  3  4  5  6  7  8]\n[-1 -1 -1 -1  0  1  2  3  4  5  6]\n[-1 -1 -1 -1 -1 -1 -1 -1  0  1  2]\n[-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]\n</code></pre>\n\n<p>Here we can clearly see that the values at each index (i.e. a column in the\noutput) are decreasing. You might have expected the values to decrease by 1, but\nin fact they decrease by more than one in subsequent iterations because of the\neffect of previous hops.</p>\n\n<p>More generally, let <code>G</code> be a sequence of indices that hop to the same cluster\nvalue.  <em>An invariant of the loop is that values in G map to values in G</em>.\nAlso, at each index, with each iteration the distance (i.e. number of hops) to a\ncluster value decreases (or is zero). These two facts together imply by the <a href=\"http://en.wikipedia.org/wiki/Banach_fixed-point_theorem\" rel=\"nofollow\">Banach fixed point theorem</a> that the\nalgorithm converges to a fixed point.</p>\n\n<p>Also with each iteration the number of locations filled with cluster values\ngrows exponentially. If before an iteration there are <code>n</code> locations filled with cluster values, then after a hop there will be <code>2n</code> locations filled with cluster values. So the convergence is exponential.</p>\n\n<hr>\n\n<p>Following the OP's lead, I changed the <code>while True</code> loop to a <code>for-loop</code>. The fixed point will be found in fewer than <code>len(a)</code> steps, but nevertheless <code>for i in a</code> suffices.</p>\n\n<p>Note that the code above <em>assumes</em> that every index converges to a cluster value. If that is not true, then the original <code>while True</code> loop could loop forever. The <code>for i in a</code> will end, but maybe not at all cluster values. A simple example which illustrates the problem is <code>a = np.array([1,0])</code>. </p>\n\n<hr>\n\n<p>Interestingly, the \"simple example\" <code>np.arange(-1, 10)</code> is also the worst-case\nscenario in terms of maximum iterations required for an array of length 11.\nSince the number of cluster values grows as 2**n, the loop requires at most on the order of <code>log2(len(a))</code> iterations. Therefore, we can write a function will either return the cluster values or raise a ValueError when <code>a</code> contains infinite cycles:</p>\n\n<pre><code>def converge(a):\n    for i in range(int(np.log2(len(a)))+1):\n        mask = a&gt;=0\n        # We can stop when all the values in `a` are negative\n        if not mask.any(): break\n        # perform a hop\n        a[mask] = a[a[mask]]\n    else:\n        # for-loop completed without reaching break\n        mask = a&gt;=0\n        if mask.any(): \n            raise ValueError('{!r} contains infinite cycles'.format(a))\n    return a\n</code></pre>\n"}], "owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 28075898, "answer_count": 1, "score": 1, "last_activity_date": 1421938054, "creation_date": 1421869506, "last_edit_date": 1421871588, "question_id": 28075561, "link": "https://stackoverflow.com/questions/28075561/traversing-a-1d-numpy-array-for-clustering", "title": "Traversing a 1D Numpy Array for Clustering", "body": "<p>I have a 1-dimensional numpy array where the value for each element, <em>i</em>, points to another index in the array. Each cluster center has a unique negative (integer) value. The goal is to assign each element to a cluster.</p>\n\n<p>Example</p>\n\n<pre><code># Generated/pre-computed elsewhere\na = np.array([6, 8, 1, -1, 0, 3, -2, 4, -3, 10, 5])\n</code></pre>\n\n<p>Thus, the cluster centers are elements 3, 6, and 8 (since they have a negative value) and they are labeled as clusters -1, -2, and -3, respectively. So, since </p>\n\n<pre><code>a[0] = 6 --&gt; a[6] = -2, \n</code></pre>\n\n<p>then a[0] can be assigned as -2. Similarly, since </p>\n\n<pre><code>a[5] = 3 --&gt; a[3] = -1,\n</code></pre>\n\n<p>then a[5] can be assigned as -1. Following this logic then all elements can be assigned to a cluster center. The resulting array would be:</p>\n\n<pre><code>[-2, -3, -3, -1, -2, -1, -2, -2, -3, -1, -1]\n</code></pre>\n\n<p>I know how to achieve this on paper but I don't see how to accomplish this in code or using vectorized code in numpy.</p>\n\n<p><strong>Update:</strong> Based on unutbu's answer below, I replaced the while loop with a for loop in order to avoid an endless while loop:</p>\n\n<pre><code>a = np.array([6, 8, 1, -1, 0, 3, -2, 4, -3, 10, 5])\nfor i in range(len(a)):\n    mask = a &gt;= 0\n    if not mask.any(): break\n    a[mask] = a[a[mask]]\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 8261, "user_id": 245173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c6145047e62b215306e1a3e6d6800f?s=128&d=identicon&r=PG", "display_name": "jpkotta", "link": "https://stackoverflow.com/users/245173/jpkotta"}, "edited": false, "score": 0, "creation_date": 1421869940, "post_id": 28075549, "comment_id": 44530402, "body": "Possibly a better way to do this is to make the key a tuple, like <code>test[&quot;ID1&quot;, &quot;End Date&quot;] = None</code>, then <code>test.get((&quot;ID1&quot;, &quot;End Date&quot;), None)</code>."}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1421870148, "post_id": 28075549, "comment_id": 44530507, "body": "to be clear: the key for your dictionary does NOT have multiple values; rather there are nested dicts in your data structure and you need one key for each level."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421870178, "post_id": 28075549, "comment_id": 44530525, "body": "just check if the key exists"}], "answers": [{"comments": [{"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1421869775, "post_id": 28075614, "comment_id": 44530306, "body": "<code>None</code> is the default to <code>get</code>. in other words, just call <code>d.get(key1)</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421870201, "post_id": 28075614, "comment_id": 44530534, "body": "what is key2 does not exist? It is probably easier check if the key exists"}, {"owner": {"reputation": 1993, "user_id": 623949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf441bdd92dabf1b772104901c78cf99?s=128&d=identicon&r=PG", "display_name": "tgrosinger", "link": "https://stackoverflow.com/users/623949/tgrosinger"}, "edited": false, "score": 0, "creation_date": 1421870364, "post_id": 28075614, "comment_id": 44530626, "body": "Updated comment to be more explicit, showing what key1 and key2 are with an example."}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 1, "creation_date": 1421870430, "post_id": 28075614, "comment_id": 44530677, "body": "This can just be simplified to <code>return d.get(key1, {}).get(key2, default)</code>"}], "tags": [], "owner": {"reputation": 1993, "user_id": 623949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf441bdd92dabf1b772104901c78cf99?s=128&d=identicon&r=PG", "display_name": "tgrosinger", "link": "https://stackoverflow.com/users/623949/tgrosinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1421870338, "last_edit_date": 1421870338, "creation_date": 1421869717, "answer_id": 28075614, "question_id": 28075549, "link": "https://stackoverflow.com/questions/28075549/dictionary-get-with-multiple-values-per-key-no-match/28075614#28075614", "title": "Dictionary.get with multiple values per key - no match", "body": "<p>You have a nested dictionary and will need to perform two lookups. You could create a function that does what you are looking for though.</p>\n\n<pre><code>def getNestedDict(d, key1, key2, default):\n    result1 = d.get(key1)\n    if result1 is None:\n        return default\n    else:\n        return result1.get(key2, default)\n\nprint getNestedDict(test, 'ID1', 'Start Date', None)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1421870428, "post_id": 28075718, "comment_id": 44530675, "body": "I really like the first start date, but don&#39;t see why it returns None. Could it return a string to? Do you know of any documentation for this?"}, {"owner": {"reputation": 42840, "user_id": 17875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9589a0b8efc6bb869bedfa51e7d28f16?s=128&d=identicon&r=PG", "display_name": "Eevee", "link": "https://stackoverflow.com/users/17875/eevee"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1421871487, "post_id": 28075718, "comment_id": 44531183, "body": "<code>None</code> is the default return value for <code>.get()</code> when the key isn&#39;t present.  if you don&#39;t want <code>None</code>, just use whatever else you want.  <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.get\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#dict.get</a>"}], "tags": [], "owner": {"reputation": 42840, "user_id": 17875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9589a0b8efc6bb869bedfa51e7d28f16?s=128&d=identicon&r=PG", "display_name": "Eevee", "link": "https://stackoverflow.com/users/17875/eevee"}, "is_accepted": false, "score": 1, "last_activity_date": 1421870080, "creation_date": 1421870080, "answer_id": 28075718, "question_id": 28075549, "link": "https://stackoverflow.com/questions/28075549/dictionary-get-with-multiple-values-per-key-no-match/28075718#28075718", "title": "Dictionary.get with multiple values per key - no match", "body": "<pre><code>test.get('ID1', {}).get('Start Date')\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>try:\n    return test['ID1']['Start Date']\nexcept KeyError:\n    return None\n</code></pre>\n"}], "owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1421870338, "creation_date": 1421869442, "question_id": 28075549, "link": "https://stackoverflow.com/questions/28075549/dictionary-get-with-multiple-values-per-key-no-match", "title": "Dictionary.get with multiple values per key - no match", "body": "<p>I would like to retrieve a value from a dictionary in which the key has multiple values. In some instances, there is no key match so I want to return <code>None</code>. This is easy with single value keys as <code>dictionary.get(key,None)</code>, but what is an easy way to do this with multiple values per key?</p>\n\n<pre><code>import datetime\ntest = {\n    u'ID1': {'End Date': None, 'Start Date': datetime.datetime(2014, 9, 22, 0, 0)},\n    u'ID2': {'End Date': None, 'Start Date': datetime.datetime(2014, 9, 18, 0, 0)}\n}\n\n\nprint test.get('ID1','Start Date',None)\nprint test.get('ID3','Start Date',None)\n</code></pre>\n"}, {"tags": ["python", "pip", "setuptools", "python-wheel"], "owner": {"reputation": 5829, "user_id": 1154610, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe52b3d3928f49a5057987549d39d1cb?s=128&d=identicon&r=PG", "display_name": "Remco Haszing", "link": "https://stackoverflow.com/users/1154610/remco-haszing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1421869386, "creation_date": 1421869386, "question_id": 28075530, "link": "https://stackoverflow.com/questions/28075530/why-doesnt-special-extra-requires-test-work", "title": "Why doesn&#39;t special extra requires :test: work?", "body": "<p>I am trying to implement the special <code>:test:</code> extras using <code>pip</code> and <code>setuptools</code> as specified in <a href=\"https://www.python.org/dev/peps/pep-0426/#extras-optional-dependencies\" rel=\"nofollow\">PEP 426</a>.</p>\n\n<p>I have created the following <code>setup.py</code>:</p>\n\n<pre><code>#!/usr/bin/env python3\nfrom setuptools import setup\n\nsetup(\n    name='spam',\n    version='0.0.0',\n    tests_require=['requests'])\n</code></pre>\n\n<p>Running <code>./setup.py bdist_wheel</code> gives me a wheel with the following <code>metadata.json</code>:</p>\n\n<pre><code>{\n  \"name\": \"spam\",\n  \"test_requires\": [\n    {\n      \"requires\": [\n        \"requests\"\n      ]\n    }\n  ],\n  \"extensions\": {\n    \"python.details\": {\n      \"document_names\": {\n        \"description\": \"DESCRIPTION.rst\"\n      }\n    }\n  },\n  \"summary\": \"UNKNOWN\",\n  \"generator\": \"bdist_wheel (0.24.0)\",\n  \"version\": \"0.0.0\",\n  \"metadata_version\": \"2.0\"\n}\n</code></pre>\n\n<p>I expected to be able to install the <code>test_requires</code> by specifying the extra <code>:test:</code>. However, this gets me the following output:</p>\n\n<pre><code>$ pip install spam-0.0.0-cp34-cp34m-linux_x86_64.whl\\[:test:\\]\nException:\nTraceback (most recent call last):\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/basecommand.py\", line 232, in main\n    status = self.run(options, args)\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/commands/install.py\", line 305, in run\n    name, None, isolated=options.isolated_mode,\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/req/req_install.py\", line 179, in from_line\n    isolated=isolated)\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/req/req_install.py\", line 52, in __init__\n    req = pkg_resources.Requirement.parse(req)\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/_vendor/pkg_resources/__init__.py\", line 2873, in parse\n    reqs = list(parse_requirements(s))\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/_vendor/pkg_resources/__init__.py\", line 2816, in parse_requirements\n    DISTRO, CBRACKET, line, p, (1,), \"'extra' name\"\n  File \"/tmp/5221/lib/python3.4/site-packages/pip/_vendor/pkg_resources/__init__.py\", line 2785, in scan_list\n    raise ValueError(msg, line, \"at\", line[p:])\nValueError: (\"Expected 'extra' name in\", 'spam-0.0.0-cp34-cp34m-linux_x86_64.whl[:test:]', 'at', ':test:]')\n</code></pre>\n\n<p>The same happens when trying to install the project using <code>pip install -e .\\[:test:\\]</code></p>\n\n<p>It doesn't matter whether I use Python 2.7 or 3.4. I did everything using an up-to-date virtualenv (<code>pip == 6.0.6</code>, <code>setuptools == 12.0.4</code>, <code>wheel == 0.24.0</code>)</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1421869643, "post_id": 28075472, "comment_id": 44530233, "body": "Be sure to save these records, otherwise there is no primary key value to establish a relationship. Also, if you intend for membre to be a proxy for Scribe instead of a separate type of record, you should use proxy=True in the model Meta. See: <a href=\"https://docs.djangoproject.com/en/1.7/ref/models/options/#proxy\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.7/ref/models/options/#proxy</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421871573, "post_id": 28075544, "comment_id": 44531232, "body": "No I don&#39;t want get proxy functionality. I want the membre have the same attributes than Scribe and display this attributes"}, {"owner": {"reputation": 39782, "user_id": 548165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMkYl.jpg?s=128&g=1", "display_name": "catavaran", "link": "https://stackoverflow.com/users/548165/catavaran"}, "reply_to_user": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421874991, "post_id": 28075544, "comment_id": 44532854, "body": "With you models <code>Scribe</code> will be automatically created when you will create <code>membre</code>. Is it desired behaviour or these models should be totally independent from each other?"}, {"owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421875139, "post_id": 28075544, "comment_id": 44532926, "body": "Totally independent ( I performed tests and the problem is in the OneToOneField...)"}, {"owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421877205, "post_id": 28075544, "comment_id": 44534010, "body": "I&#39;m sorry but I want membre have Scribe in attribute and not always write the same attribute than Scribe. I think I put Scribe foreign key in membre"}, {"owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421877640, "post_id": 28075544, "comment_id": 44534206, "body": "I dont understand because the error message is Scribe has no user and when I do this : m.scribe.user = User.objects.create_... , it&#39;s clean ! (m is instance of membre)"}, {"owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "edited": false, "score": 0, "creation_date": 1421879373, "post_id": 28075544, "comment_id": 44534951, "body": "Ok but it&#39;s sad because I don&#39;t use heritage.. Thank&#39;s"}], "tags": [], "owner": {"reputation": 39782, "user_id": 548165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMkYl.jpg?s=128&g=1", "display_name": "catavaran", "link": "https://stackoverflow.com/users/548165/catavaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1421877432, "last_edit_date": 1421877432, "creation_date": 1421869429, "answer_id": 28075544, "question_id": 28075472, "link": "https://stackoverflow.com/questions/28075472/django-relatedobjectdoesnotexist/28075544#28075544", "title": "DJANGO - RelatedObjectDoesNotExist", "body": "<p>Add <code>Scribe</code> as a foreign key to <code>membre</code>:</p>\n\n<pre><code>class Scribe(models.Model):\n    user = models.OneToOneField(User)\n    def __str__(self):\n        return \"{ \" + self.user.username + \" } \"\n\nclass membre(models.Model):\n    scribe = models.ForeignKey(Scribe)\n    def __str__(self):\n        return \"{ pseudo :\" + self.scribe.user.username + \" } \"\n</code></pre>\n\n<p>And then you can instantiate both models with <code>create</code> method:</p>\n\n<pre><code>u = User.objects.create_user(username=\"lala\")\ns = Scribe.objects.create(user=u)\nm = membre.objects.create(scribe=s)\n\nprint s\nprint m\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4385232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20e15be3b83a6e7f6cb3286173cd2002?s=128&d=identicon&r=PG&f=1", "display_name": "YassVegas", "link": "https://stackoverflow.com/users/4385232/yassvegas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2521, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421877432, "creation_date": 1421869180, "question_id": 28075472, "link": "https://stackoverflow.com/questions/28075472/django-relatedobjectdoesnotexist", "title": "DJANGO - RelatedObjectDoesNotExist", "body": "<p>I have a problem with classic heritages :</p>\n\n<p><strong>my models :</strong> </p>\n\n<pre><code>class Scribe(models.Model):\n    user = models.OneToOneField(User)\n\n    def __str__(self):\n        return \"{ \"+self.user.username+\" } \"\n\nclass membre(Scribe): \n    def __str__(self):\n        return \"{ pseudo :\"+self.user.username+\" } \"\n</code></pre>\n\n<p>In shell I do this : </p>\n\n<ul>\n<li>u=User.objects.create_user(username=\"lala\")</li>\n<li>s=Scribe(u)</li>\n<li>m=membre(s)</li>\n</ul>\n\n<p>But when I do this in the shell : m or m.user.username I have this error :</p>\n\n<p><strong>RelatedObjectDoesNotExist : Scribe has no user</strong></p>\n"}, {"tags": ["python", "import"], "answers": [{"comments": [{"owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "edited": false, "score": 0, "creation_date": 1421871880, "post_id": 28075643, "comment_id": 44531369, "body": "To add to the answer, try changing up mod2 a bit.  Have it <code>from mod1 import *</code> and then do <code>test()</code>.  Then add a line to <code>import mod1</code>, followed by <code>print mod1.var1</code>.  You&#39;ll see that <code>mod1.var1</code> reflects the new value."}, {"owner": {"reputation": 5, "user_id": 4479738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5da83f34de4a9fd34c9dd3801b0d86c?s=128&d=identicon&r=PG&f=1", "display_name": "alwaysalearner", "link": "https://stackoverflow.com/users/4479738/alwaysalearner"}, "edited": false, "score": 0, "creation_date": 1421892290, "post_id": 28075643, "comment_id": 44539021, "body": "Thanks for the explanation guys. With &quot;from mod1 import *&quot;, if after calling test(), I do &quot;from mod1 import *&quot; again, var1 in mod2 gets set to the updated value of mod1.var1 which is 1 (not None). This all makes sense to me."}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 0, "last_activity_date": 1421869822, "creation_date": 1421869822, "answer_id": 28075643, "question_id": 28075450, "link": "https://stackoverflow.com/questions/28075450/how-does-variable-scoping-work-with-python-imports/28075643#28075643", "title": "How does variable scoping work with python imports", "body": "<p>One common analogy for this is to think of strings tied to balloons.  Think of every assignment statement as tying a string to a balloon.  e.g.</p>\n\n<pre><code>a = 1  # tie a string \"a\" to the `1` balloon\nb = a  # tie a string to the same balloon that \"a\" is tied to.\n</code></pre>\n\n<p>Assigning a new thing to an existing variable is akin to cutting the current string and tying it to something else:</p>\n\n<pre><code>a = 2  # cut string tying \"a\" to 1 and tie it to the `2` balloon\n</code></pre>\n\n<p>In the first version (<code>from mod1 import *</code>) you basically do a whole bunch of assignment statements:</p>\n\n<pre><code>var1 = mod1.var1\n...\n</code></pre>\n\n<p>Now, you have 2 strings tied to the 1 balloon -- <code>mod1.var1</code> and <code>mod2.var1</code>.  After you call the <code>test</code> function, you cut the string of <code>mod1.var1</code> and tie it to the \"2\" balloon.</p>\n\n<p>In the second example (<code>import mod1</code>), you have a string (<code>mod2.mod1</code>) tied to the <code>mod1</code> <em>module</em>, but no explicit string tied to <code>mod1.var1</code>.  So now when you re-tie the <code>mod1.var1</code> string, you can still look it up the same way -- The string tied to <code>mod1</code> hasn't change, only the string from <code>mod1</code> to <code>mod1.var1</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 4479738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5da83f34de4a9fd34c9dd3801b0d86c?s=128&d=identicon&r=PG&f=1", "display_name": "alwaysalearner", "link": "https://stackoverflow.com/users/4479738/alwaysalearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 28075643, "answer_count": 1, "score": 0, "last_activity_date": 1421869822, "creation_date": 1421869133, "question_id": 28075450, "link": "https://stackoverflow.com/questions/28075450/how-does-variable-scoping-work-with-python-imports", "title": "How does variable scoping work with python imports", "body": "<p>I am having difficulty understanding how global variables from a module are actually imported in another module. Suppose we have a module mod1.py coded as below:</p>\n\n<pre><code>#mod1.py\nvar1 = None\ndef test():\n    global var1\n    var1=1\n</code></pre>\n\n<hr>\n\n<p>and, another module mod2.py that intends to use mod1.py, as below:</p>\n\n<hr>\n\n<pre><code>#mod2.py\nfrom mod1 import *  #This may not be a good coding practice, but it's relevant to my question\nprint \"var1=\"+str(var1)\ntest()\nprint \"var1=\"+str(var1)\n</code></pre>\n\n<hr>\n\n<p>When executing mod2, the print statements print:</p>\n\n<pre><code>var1=None\nvar1=None\n</code></pre>\n\n<hr>\n\n<p>which means that the value of var1 that was imported as a result of \"from mod1 import *\" did not bear any change in mod2 by calling test(). On the other hand, if I code mod2 as below:</p>\n\n<hr>\n\n<pre><code>#mod2.py\nimport mod1\nprint \"var1=\"+str(mod1.var1)\nmod1.test()\nprint \"var1=\"+str(mod1.var1)\n</code></pre>\n\n<hr>\n\n<p>The first and second print statements print:</p>\n\n<pre><code>var1=None\nvar1=1\n</code></pre>\n\n<hr>\n\n<p>which means that the value of var1 was changed by a call to mod1.test().</p>\n\n<p>Why is that so?</p>\n"}, {"tags": ["python", "function", "return"], "answers": [{"tags": [], "owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "is_accepted": true, "score": 0, "last_activity_date": 1421869160, "creation_date": 1421869160, "answer_id": 28075460, "question_id": 28075392, "link": "https://stackoverflow.com/questions/28075392/return-and-print-in-functions/28075460#28075460", "title": "Return and print in functions", "body": "<p>When you write </p>\n\n<pre><code>print X(2)\n</code></pre>\n\n<p>then the function <code>X</code> gets called with 2 as a parameter, let's go inside it:</p>\n\n<pre><code>a=1\nprint a,2,\nreturn a\n</code></pre>\n\n<p>it'll print 1 and 2, then it returns <code>a</code> which has the value 1.</p>\n\n<p>The returned value (1) gets printed since you wrote <code>print X(2)</code>.</p>\n\n<p>If you have wrote <code>X(2)</code> (without <code>print</code>), you would get <code>1</code> and <code>2</code> printed, and the returned value will be unused.</p>\n"}, {"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 0, "last_activity_date": 1421869172, "creation_date": 1421869172, "answer_id": 28075466, "question_id": 28075392, "link": "https://stackoverflow.com/questions/28075392/return-and-print-in-functions/28075466#28075466", "title": "Return and print in functions", "body": "<pre><code>def x(n):\n    print n+1\n</code></pre>\n\n<p>Now, when <code>x(5)</code> is called, it will print <code>6</code> to the console. However, if you did <code>y=x(5)</code>, the value of <code>y</code> would be <code>None</code>.</p>\n\n<p>Now:</p>\n\n<pre><code>def x(n):\n    return x+1\n</code></pre>\n\n<p>If you called <code>x(5)</code>, it would still print <code>6</code> to the console. But, if you did <code>y=x(5)</code>, the value of <code>y</code> would be <code>6</code>, not <code>None</code></p>\n"}, {"tags": [], "owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "is_accepted": false, "score": 0, "last_activity_date": 1421871332, "creation_date": 1421871332, "answer_id": 28076052, "question_id": 28075392, "link": "https://stackoverflow.com/questions/28075392/return-and-print-in-functions/28076052#28076052", "title": "Return and print in functions", "body": "<p>The two appear to do similar things, but are quite different.</p>\n\n<p>Most of the time, you'll be using return as an output for a function. Using print implies just that: printing something as a string (perhaps to a file or interpretor, etc).</p>\n\n<p>Also, you can't do anything with a value printed by a function. Returning a value provides you more in this regard since it isn't \"garbage collected\" like a printed value.</p>\n\n<p>Return also allows you to break out of a function.</p>\n\n<pre><code>&gt;&gt;&gt; def x(y):\n...     squared = y ** 2\n...     return squared\n... \n&gt;&gt;&gt; x(2)\n4\n&gt;&gt;&gt; z = x(2)\n&gt;&gt;&gt; z\n4\n&gt;&gt;&gt; def a(b):\n...     squared = b ** 2\n...     print(squared)\n... \n&gt;&gt;&gt; a(2)\n4\n&gt;&gt;&gt; c = a(2)\n4\n&gt;&gt;&gt; c\n&gt;&gt;&gt;\n</code></pre>\n\n<p>In this example, I have two functions: x and a. Both take one positional argument and either return or print that valued squared.</p>\n\n<p>Notice that if I assign the function with an argument to a variable, I can return that value by calling the variable with the function returning a value but not with a function printing the value.</p>\n"}], "owner": {"reputation": 41, "user_id": 4342717, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-hKHkGN4yVAs/AAAAAAAAAAI/AAAAAAAAAFM/iJvGafdkMSA/photo.jpg?sz=128", "display_name": "Harr Tou", "link": "https://stackoverflow.com/users/4342717/harr-tou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 28075460, "answer_count": 3, "score": 0, "last_activity_date": 1421871332, "creation_date": 1421868966, "last_edit_date": 1421870019, "question_id": 28075392, "link": "https://stackoverflow.com/questions/28075392/return-and-print-in-functions", "title": "Return and print in functions", "body": "<p>I would like to ask the difference between return and print.</p>\n\n<pre><code>def x(n):\n    a=1\n    print a,n,\n    return a\nprint x(2)\n</code></pre>\n\n<p>If I type <code>x(2)</code> it will output on the console: <code>1 2</code> right?<br>\nIs the variable a printed a second time only when I type <code>print x(2)</code>?</p>\n"}, {"tags": ["python", "logging"], "answers": [{"comments": [{"owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "edited": false, "score": 0, "creation_date": 1544066325, "post_id": 28075522, "comment_id": 94147204, "body": "With py3.6.4 on macOS, I added many handlers with their own log levels. However, <code>logging.basicConfig(level=logging.DEBUG)</code> is still required for my handlers to show INFO/DEBUG level messages."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 3, "last_activity_date": 1421870013, "last_edit_date": 1421870013, "creation_date": 1421869352, "answer_id": 28075522, "question_id": 28075381, "link": "https://stackoverflow.com/questions/28075381/logger-setlevellogging-info-does-not-make-logger-info-visible/28075522#28075522", "title": "logger.setLevel(logging.INFO) does not make logger.info() visible", "body": "<p>You need to add a Handler to the logger. The call to <code>basicConfig</code> is one way to do that.</p>\n\n<p>There are <a href=\"https://docs.python.org/2/library/logging.handlers.html\" rel=\"nofollow\">many kinds of Handlers</a>. A StreamHandler prints to the console, but there are also FileHandlers, SocketHandlers, and SMTPHandlers for instance. If you don't specify any handlers, the records aren't handled and nothing gets emitted.</p>\n\n<hr>\n\n<p>To add a StreamHandler (without calling basicConfig) you could use:</p>\n\n<pre><code>import logging\n\nlogger = logging.getLogger('logger')\nlogger.setLevel(logging.INFO)\nconsole = logging.StreamHandler()\nlogger.addHandler(console)\nlogger.info('test')\n</code></pre>\n\n<p>This adds the StreamHandler to the logger named <code>logger</code>. To add the handler to the root logger, use</p>\n\n<pre><code>logging.root.addHandler(console)\n</code></pre>\n\n<p>By setting the Handler on the root logger, the StreamHandler may handle records generated by other loggers than just <code>logger</code>. Consult <a href=\"https://docs.python.org/2/howto/logging.html#logging-flow\" rel=\"nofollow\">the logging flow diagram</a> for a picture of when that happens.</p>\n\n<hr>\n"}], "owner": {"reputation": 3554, "user_id": 688080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9ee8890c431e4689f29f73fb36d58610?s=128&d=identicon&r=PG", "display_name": "ziyuang", "link": "https://stackoverflow.com/users/688080/ziyuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 28075522, "answer_count": 1, "score": 3, "last_activity_date": 1421870013, "creation_date": 1421868918, "question_id": 28075381, "link": "https://stackoverflow.com/questions/28075381/logger-setlevellogging-info-does-not-make-logger-info-visible", "title": "logger.setLevel(logging.INFO) does not make logger.info() visible", "body": "<p>I am working on Python 3.4.2 under Windows. In my case,</p>\n\n<pre><code>import logging\n\nlogger = logging.getLogger('logger')\nlogger.setLevel(logging.INFO)\nlogger.info('test')\n</code></pre>\n\n<p>shows nothing on the console. But</p>\n\n<pre><code>import logging\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger('logger')\nlogger.info('test')\n</code></pre>\n\n<p>sucessfully shows</p>\n\n<pre><code>INFO:logger:test\n</code></pre>\n\n<p>I expected <code>logger.setLevel(logging.INFO)</code> would allow the same printout as in the second code snippet where the logger level is controlled by the root logger but it doesn't. So where's the problem? Thank you.</p>\n"}, {"tags": ["python", "matlab", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": true, "score": 2, "last_activity_date": 1421869946, "last_edit_date": 1421869946, "creation_date": 1421869499, "answer_id": 28075560, "question_id": 28075365, "link": "https://stackoverflow.com/questions/28075365/python-how-to-make-legend-after-twinx/28075560#28075560", "title": "Python: how to make legend after twinx", "body": "<p>You can use a label for each <code>plot()</code> statement you have. For example:</p>\n\n<pre><code>ax1.plot(x,y1,'go-', label='A')\nax1.plot(x,y2,'ro-', label='B')\nax1.plot(x,y3,'g*--', label='C')\nax1.plot(x,y4,'r*--', label='D')\n</code></pre>\n\n<p>Then, calling </p>\n\n<pre><code>ax1.legend()\n</code></pre>\n\n<p>will automatically create the legend you want, because calling <code>legend()</code> with no arguments fetches handlers and their respective labels automatically.</p>\n\n<p>If you want separate legends, you can also specify different locations for them via the <code>loc</code> argument. Check the <a href=\"http://matplotlib.org/users/legend_guide.html\" rel=\"nofollow\">guide</a> for more details.</p>\n"}], "owner": {"reputation": 35, "user_id": 3677902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b06878e09135d3f39943899e2f1e708?s=128&d=identicon&r=PG&f=1", "display_name": "user3677902", "link": "https://stackoverflow.com/users/3677902/user3677902"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 28075560, "answer_count": 1, "score": 2, "last_activity_date": 1421869946, "creation_date": 1421868845, "question_id": 28075365, "link": "https://stackoverflow.com/questions/28075365/python-how-to-make-legend-after-twinx", "title": "Python: how to make legend after twinx", "body": "<pre><code>fig, ax1 = plt.subplots()\nax2 = ax1.twinx()\n\nax1.plot(x,y1,'go-')\nax1.plot(x,y2,'ro-')\nax1.plot(x,y3,'g*--')\nax1.plot(x,y4,'r*--')\nax2.plot(x,y5,'bo-')\nax2.plot(x,y6,'b*--')\n\nax1.set_xlabel('cluster size')\nax1.set_ylabel('number of nodes', color='g')\nax2.set_ylabel('error rate', color='b')\n</code></pre>\n\n<p>I want to plot 6 curves as above. There are two Y-axis.\nI don't know how to make legend for these 6 curves.\nWhat I want to get is like</p>\n\n<pre><code>legend([y1,y2,y3,y4],['A','B','C','D'])\nlegend([y5,Y6],['e','f'])\n</code></pre>\n"}, {"tags": ["python", "powershell", "subprocess", "popen"], "comments": [{"owner": {"reputation": 15822, "user_id": 36429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hbOz9.jpg?s=128&g=1", "display_name": "Mike Shepard", "link": "https://stackoverflow.com/users/36429/mike-shepard"}, "edited": false, "score": 0, "creation_date": 1421873537, "post_id": 28075216, "comment_id": 44532157, "body": "You&#39;re not wanting the PowerShell.exe process, you want the PowerShell object.  I don&#39;t think you can use the executable like this unless you are pushing keystrokes and scraping the screen output."}, {"owner": {"reputation": 269, "user_id": 1181594, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ae57187742f91cdc26f7145a8592bda2?s=128&d=identicon&r=PG", "display_name": "learningKnight", "link": "https://stackoverflow.com/users/1181594/learningknight"}, "reply_to_user": {"reputation": 15822, "user_id": 36429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hbOz9.jpg?s=128&g=1", "display_name": "Mike Shepard", "link": "https://stackoverflow.com/users/36429/mike-shepard"}, "edited": false, "score": 0, "creation_date": 1421875522, "post_id": 28075216, "comment_id": 44533099, "body": "So you&#39;re telling me that the concept of opening a process and having Python pass data to stdin, and then keeping that process open for future stdin calls from the Python program, is impossible?  It seems to me this would be a very basic use-case... opening a process and then communicating back and forth with it."}, {"owner": {"reputation": 15822, "user_id": 36429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hbOz9.jpg?s=128&g=1", "display_name": "Mike Shepard", "link": "https://stackoverflow.com/users/36429/mike-shepard"}, "edited": false, "score": 0, "creation_date": 1421875729, "post_id": 28075216, "comment_id": 44533224, "body": "I don&#39;t know that it&#39;s impossible in general, just that I don&#39;t think you can use the PowerShell.exe executable that way."}, {"owner": {"reputation": 269, "user_id": 1181594, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ae57187742f91cdc26f7145a8592bda2?s=128&d=identicon&r=PG", "display_name": "learningKnight", "link": "https://stackoverflow.com/users/1181594/learningknight"}, "reply_to_user": {"reputation": 15822, "user_id": 36429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hbOz9.jpg?s=128&g=1", "display_name": "Mike Shepard", "link": "https://stackoverflow.com/users/36429/mike-shepard"}, "edited": false, "score": 0, "creation_date": 1421875981, "post_id": 28075216, "comment_id": 44533356, "body": "Ah I see.. but why would that be?  It&#39;s a console application so it should accept input from stdin.  Is powershell unique in some way?"}, {"owner": {"reputation": 8310, "user_id": 1851986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/17l5p.jpg?s=128&g=1", "display_name": "Vasili Syrakis", "link": "https://stackoverflow.com/users/1851986/vasili-syrakis"}, "edited": false, "score": 0, "creation_date": 1423494931, "post_id": 28075216, "comment_id": 45159253, "body": "try adding <code>shell=True</code> to the arguments of <code>Popen</code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1423499197, "post_id": 28075216, "comment_id": 45162160, "body": "<code>Popen()</code> does <i>not</i> wait the powershell to finish therefore the issue is in the code that is not shown in your question. Create a <a href=\"http://stackoverflow.com/help/mcve\">minimal but complete code example</a> -- start powershell, pass several commands, read their output. You should know the answer to the following questions: 1. does powershell write to stdout or console directly? 2. Can you force line-buffering (so that powershell would flush its stdout on newline)? 3. How do you know where an individual command&#39;s output ends e.g., where is eof for file1 if you pass two commands: <code>cat file1</code>, cat f2"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1423499504, "post_id": 28075216, "comment_id": 45162361, "body": "here&#39;s <a href=\"http://stackoverflow.com/a/23795689/4279\">code example that shows how <code>subprocess.Popen</code> could be used interactively</a> -- there are many gotchas (I&#39;ve mentioned three in the previous comment)."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1423500471, "post_id": 28075216, "comment_id": 45163024, "body": "You could try <a href=\"https://pexpect.readthedocs.org/en/latest/FAQ.html#whynotpipe\" rel=\"nofollow noreferrer\">pexpect&#39;s analog</a> for Windows such <code>winpexpect</code> (it is not maintained but it might work in your case), see <a href=\"http://stackoverflow.com/a/12606327/4279\">ftp example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3366, "user_id": 1563472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72204c5e8156cc8ec1dd9fc212671f2b?s=128&d=identicon&r=PG&f=1", "display_name": "James McCalden", "link": "https://stackoverflow.com/users/1563472/james-mccalden"}, "is_accepted": false, "score": 0, "last_activity_date": 1423492863, "creation_date": 1423492863, "answer_id": 28412297, "question_id": 28075216, "link": "https://stackoverflow.com/questions/28075216/python-powershell-and-popen/28412297#28412297", "title": "Python, Powershell, and Popen", "body": "<p>Take a look at Twisted: <a href=\"https://twistedmatrix.com/documents/14.0.0/core/howto/process.html\" rel=\"nofollow\">https://twistedmatrix.com/documents/14.0.0/core/howto/process.html</a></p>\n\n<p>I wasn't using it for the PowerShell.exe, but it completely changed the way I interacted with child processes.</p>\n"}], "owner": {"reputation": 269, "user_id": 1181594, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ae57187742f91cdc26f7145a8592bda2?s=128&d=identicon&r=PG", "display_name": "learningKnight", "link": "https://stackoverflow.com/users/1181594/learningknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1066, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1423492863, "creation_date": 1421868385, "question_id": 28075216, "link": "https://stackoverflow.com/questions/28075216/python-powershell-and-popen", "title": "Python, Powershell, and Popen", "body": "<p>I'm trying to write a Python program that will open a powershell process, then keep it open while passing commands to it and getting the output.  I don't want to open a new powershell process for each command because the powershell session must authenticate with a remote system, and I don't want to constantly go through the not-super-fast authentication process with every command.</p>\n\n<p>What's happening though is that the powershell process is taking over and blocking continued execution of the Python code... as soon as powershell process starts, the Python process halts and waits for it to exit.  Obviously this is no good because as soon as powershell launches I can't pass any commands to it.</p>\n\n<p>The relevant portion of my code is:</p>\n\n<pre><code>import subprocess as sp\n\ndef _open_powershell_session():\n\n    ps_path = r\"C:\\Windows\\SysWOW64\\WindowsPowerShell\\v1.0\\powershell.exe\"\n    azure_path = r\"C:\\Program Files (x86)\\Microsoft SDKs\\Azure\\PowerShell\\ServiceManagement\\Azure\\Services\\ShortcutStartup.ps1\"\n    flags = [\"-NoExit\", \"-ExecutionPolicy\", \"Bypass\", \"-File\"]\n    launch_str = [ps_path] + flags + [azure_path]\n\n    ps_session = sp.Popen(args=launch_str, stdin=sp.PIPE, stdout=sp.PIPE, stderr=sp.PIPE)\n\n    return ps_session\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "ubuntu-14.04", "pyqtgraph"], "comments": [{"owner": {"reputation": 1219, "user_id": 431033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/847f3f4282d7fa43c368219840c123ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lack", "link": "https://stackoverflow.com/users/431033/lack"}, "edited": false, "score": 0, "creation_date": 1421879345, "post_id": 28075205, "comment_id": 44534929, "body": "Can you provide a <a href=\"http://stackoverflow.com/help/mcve\">minimal example</a>? If what you&#39;re saying is the button works, and <code>mouseCollect</code> is called, then the problem is just in <code>mouseCollect</code> - none of the buttons are needed at all in this example. Also, make sure your indentation is correct."}, {"owner": {"reputation": 141, "user_id": 3759978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abe9dc816e9deb73faf3b59a052ece2?s=128&d=identicon&r=PG&f=1", "display_name": "user3759978", "link": "https://stackoverflow.com/users/3759978/user3759978"}, "reply_to_user": {"reputation": 1219, "user_id": 431033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/847f3f4282d7fa43c368219840c123ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lack", "link": "https://stackoverflow.com/users/431033/lack"}, "edited": false, "score": 0, "creation_date": 1421917383, "post_id": 28075205, "comment_id": 44547146, "body": "Edited. I dont know where to cut of more and still  be complete :) Tested it and has the same problem. Thx."}, {"owner": {"reputation": 240, "user_id": 1495259, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0b904ce5fa44b18cdd97df2bea58398b?s=128&d=identicon&r=PG", "display_name": "Echocage", "link": "https://stackoverflow.com/users/1495259/echocage"}, "edited": false, "score": 0, "creation_date": 1421917950, "post_id": 28075205, "comment_id": 44547480, "body": "Ok so I think you problem is that you&#39;re running mouseCollect in the same thread. Because you&#39;re waiting forever in the loop, when the mouse event handler doesn&#39;t return it freezes the GUI. Try running mouseCollect in a new thread to avoid this, though I can&#39;t tell you how PyQT handles multithreaded calls.   You can do that by importing Thread from the threading module, and calling  <code>Thread(target=mouseCollect).start()</code>  You only have to do this once, you could probably even do it in the main body of the program"}, {"owner": {"reputation": 141, "user_id": 3759978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abe9dc816e9deb73faf3b59a052ece2?s=128&d=identicon&r=PG&f=1", "display_name": "user3759978", "link": "https://stackoverflow.com/users/3759978/user3759978"}, "edited": false, "score": 0, "creation_date": 1421918874, "post_id": 28075205, "comment_id": 44548011, "body": "nice. this kinda helped. when it was a skript without gui i made it threaded (with the help of the nice people in stackoverflow^^), but i thought it would break somehow the gui thread. so i left it out. as i said it kinda worked: its not freezing now just saying: &quot;QPixmap: It is not safe to use pixmaps outside the GUI thread&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 3759978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abe9dc816e9deb73faf3b59a052ece2?s=128&d=identicon&r=PG&f=1", "display_name": "user3759978", "link": "https://stackoverflow.com/users/3759978/user3759978"}, "edited": false, "score": 0, "creation_date": 1422308887, "post_id": 28125938, "comment_id": 44690077, "body": "Thanks for your opinion. I got now both versions running(threaded and timer). the timer version runs fine, but it freezes, when i try to use another input device to click buttons and such. so i think since the threded version has no problems at the moment i&#39;ll stick with that solution^^"}], "tags": [], "owner": {"reputation": 10367, "user_id": 643629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b702578d1cde726a755e822fbc96d2a?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/643629/luke"}, "is_accepted": false, "score": 2, "last_activity_date": 1422106007, "creation_date": 1422106007, "answer_id": 28125938, "question_id": 28075205, "link": "https://stackoverflow.com/questions/28075205/python-realtime-mousedata-with-pyqtgraph/28125938#28125938", "title": "Python realtime mousedata with pyqtgraph", "body": "<p>The best approach for repetitive updates is to use a QTimer. In this way you allow program control to go back to the Qt event loop after every update (no infinite loops allowed), and Qt periodically invokes your update function for you.</p>\n\n<p>For example, see one of the many the updating plot examples included with pyqtgraph: <a href=\"https://github.com/pyqtgraph/pyqtgraph/blob/develop/examples/Plotting.py#L58\" rel=\"nofollow\">https://github.com/pyqtgraph/pyqtgraph/blob/develop/examples/Plotting.py#L58</a></p>\n\n<p>Threading is very difficult to do correctly and when it's done wrong you usually end up with crashing that is difficult to debug. I recommend to avoid threading until you are very confident with the event system and familiar with the pitfalls of threading.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 3759978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abe9dc816e9deb73faf3b59a052ece2?s=128&d=identicon&r=PG&f=1", "display_name": "user3759978", "link": "https://stackoverflow.com/users/3759978/user3759978"}, "is_accepted": true, "score": 0, "last_activity_date": 1422309378, "creation_date": 1422309378, "answer_id": 28159472, "question_id": 28075205, "link": "https://stackoverflow.com/questions/28075205/python-realtime-mousedata-with-pyqtgraph/28159472#28159472", "title": "Python realtime mousedata with pyqtgraph", "body": "<p>I finally found it. I somehow never realized, that you HAVE to use numpy arrays. also i didnt use curve.setdata for plotting.</p>\n\n<p>the more or less final code(not full code) now looks like this:</p>\n\n<pre><code>class mouseCollect(QtCore.QThread):\n    def __init__(self):\n\n      QtCore.QThread.__init__(self)\n\n    def run (self):\n      global e, curve, curve2, data1, data2  \n      while e.wait():\n        tmp = getMouseEvent() #returns tuples in form of  (x,y)\n        data1 = np.append(data1, tmp[0] )\n        data2 = np.append(data2, tmp[1] )  \n        sum1= np.cumsum(data1)\n        sum2= np.cumsum(data2)     \n\n        curve.setData(y=sum1)\n        curve2.setData(y=sum2)\n        guiPE # process event thingy\n\n    def stop(self):\n      e.clear()\n</code></pre>\n\n<p>well, it is a not really written efficiently, but it works :)</p>\n"}], "owner": {"reputation": 141, "user_id": 3759978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abe9dc816e9deb73faf3b59a052ece2?s=128&d=identicon&r=PG&f=1", "display_name": "user3759978", "link": "https://stackoverflow.com/users/3759978/user3759978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 0, "accepted_answer_id": 28159472, "answer_count": 2, "score": 1, "last_activity_date": 1422309378, "creation_date": 1421868361, "last_edit_date": 1421919073, "question_id": 28075205, "link": "https://stackoverflow.com/questions/28075205/python-realtime-mousedata-with-pyqtgraph", "title": "Python realtime mousedata with pyqtgraph", "body": "<p>In my epic struggle to process raw mouse data on my ubuntu (14.04) OS with python, with alot help from here i am stuck again. It seems very hard for me to understand the \"easyness\" of pyqtgraph. all i want to do is to wrap the code i have now into a nice little gui with a start/pause/stop button, a list widget to show the numbers and a plot to let me see whats happening. I guess the main problem for me is, that i dont quite understand this whole event thing in pyqt.\nanyway taking a \"easy\" example which has the widgets i want, i fail to implement my code(edited more minimalistic):</p>\n\n<pre><code>#!/usr/bin/python\nimport threading\nimport struct\nimport time\nimport numpy as np\n\nfrom PyQt4 import QtGui  # (the example applies equally well to PySide)\nfrom PyQt4 import QtCore\nimport pyqtgraph as pg\n##\ndata =[(0,0)]\nsum_data = [(0,0)]\nfile = open(\"/dev/input/mouse2\", \"rb\") \n\ndef getMouseEvent():\n  buf = file.read(3);\n  #python 2 &amp; 3 compatibility \n  button = buf[0] if isinstance(buf[0], int) else ord(buf[0])\n  x,y = struct.unpack( \"bb\", buf[1:] );\n  print x,y\n  return x, y\n\ndef mouseCollect():\n  while True:        \n   data.append(getMouseEvent())\n   sum_data.append(tuple(map(sum,zip(sum_data[-1],data[-1]))))\n   plot.plot(sum_data[0], clear=True)\n   pg.QtGui.QApplication.processEvents()\n   print sum_data[-1]       \n\n## Always start by initializing Qt (only once per application)\napp = QtGui.QApplication([])\n\n## Define a top-level widget to hold everything\nw = QtGui.QWidget()\n\n## Create some widgets to be placed inside\nbtn1 = QtGui.QPushButton('Start')\n\nlistw = QtGui.QListWidget()\nplot = pg.PlotWidget()\n\ndef start_btn():\n  print 'test'\n  threading.Thread(target=mouseCollect).start()  \n\nbtn1.clicked.connect(start_btn)  \n\n## Create a grid layout to manage the widgets size and position\nlayout = QtGui.QGridLayout()\nw.setLayout(layout)    \n## Add widgets to the layout in their proper positions\nlayout.addWidget(btn1, 0, 0)   # button goes in upper-left   \nlayout.addWidget(plot, 0, 1, 4, 1)      \n## Display the widget as a new window\nw.show()    \n## Start the Qt event loop\napp.exec_()\n##------------------------------------------------------------------\n</code></pre>\n\n<p>when i press the start button, the window just freezes and nothing happens. my thought was, if i press the button, it connects to the methot state there and it just doing its stuff. okay i have an infinite loop, but at least i thought i should see something. any help is apreciated, also any tips for a good reading about the matter is very welcome.</p>\n\n<p>regards\nEdit: inserted a thread as suggested by echocage</p>\n"}, {"tags": ["python", "pyqt", "signals", "pyside", "slot"], "answers": [{"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": true, "score": 2, "last_activity_date": 1421868659, "creation_date": 1421868659, "answer_id": 28075305, "question_id": 28075203, "link": "https://stackoverflow.com/questions/28075203/pyside-how-can-i-know-which-thread-emitted-the-signal-finished/28075305#28075305", "title": "Pyside: How can i know which thread emitted the signal &quot;finished&quot;?", "body": "<p>For the lambda, try:</p>\n\n<pre><code>lambda k=k: self.print_finished(\"WorkerThread %d finished\" % k)\n       ^^^\n</code></pre>\n\n<p>With this syntax the value of <code>k</code> at the time the lambda was created will be captured and used by the lambda.</p>\n"}], "owner": {"reputation": 318, "user_id": 4111174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MEpD0.jpg?s=128&g=1", "display_name": "Igor", "link": "https://stackoverflow.com/users/4111174/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 28075305, "answer_count": 1, "score": 1, "last_activity_date": 1421868659, "creation_date": 1421868355, "question_id": 28075203, "link": "https://stackoverflow.com/questions/28075203/pyside-how-can-i-know-which-thread-emitted-the-signal-finished", "title": "Pyside: How can i know which thread emitted the signal &quot;finished&quot;?", "body": "<p>I start some threads und would like to know which thread is finished:</p>\n\n<pre><code>...\n...\ndef start_ten_threads(self):\n    self.workers = []\n\n    for i in range(0, 10):\n        self.workers.append(thread_worker(i, self))\n\n        ...    \n        ...\n\n    for k in range(0, 10):\n        self.workers[k].finished.connect(lambda: self.print_finished(\"WorkerThread %d finished\" % k))\n        self.workers[k].start()\n\n@Slot(str)\ndef print_finished(self, str):\n    print(str)\n</code></pre>\n\n<p>I get for each thread the same number 9 (last value of k). Why? Can i use parameters on this way with signal \"finished\"? I have already read some stuff about QSignalMapper. Is there another way here?</p>\n\n<p>If i use self.sender() i get the point to the thread, but i don't know which thread number it is. </p>\n"}, {"tags": ["python", "python-2.7", "popen", "bzip2"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1421868535, "post_id": 28075193, "comment_id": 44529599, "body": "Quite aside from the bzip2 problem, <code>Popen((&#39;tcpdump&#39;, &#39;-l -n -s 0 -r -&#39;))</code> is the same as <code>tcpdump &quot;-l -n -s 0 -r -&quot;</code>, which wouldn&#39;t work on a command line either; you can&#39;t pass all your unrelated options in one big single argument."}, {"owner": {"reputation": 15461, "user_id": 9642, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5c5f08d92e1ce6b99fc90e365c9b0261?s=128&d=identicon&r=PG", "display_name": "Neil C. Obremski", "link": "https://stackoverflow.com/users/9642/neil-c-obremski"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1421868979, "post_id": 28075193, "comment_id": 44529862, "body": "@CharlesDuffy Thanks -- fixed!"}], "answers": [{"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 2, "last_activity_date": 1421944783, "last_edit_date": 1421944783, "creation_date": 1421868413, "answer_id": 28075224, "question_id": 28075193, "link": "https://stackoverflow.com/questions/28075193/how-to-decompress-bz2-directly-into-popen-stdin-in-python-2-7/28075224#28075224", "title": "How to decompress BZ2 directly into Popen stdin in Python 2.7?", "body": "<p>Use two different Popen objects:</p>\n\n<pre><code>p1 = subprocess.Popen(['bunzip2', '-c', filename],\n    stdout=subprocess.PIPE)\np2 = subprocess.Popen(['tcpdump', '-lnr', '-s', '0', '-'],\n    stdin=p1.stdout,\n    stdout=subprocess.PIPE)\np1.stdout.close()\nfor row in iter(p2.stdout.readline, b''):\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 2, "last_activity_date": 1421945145, "last_edit_date": 1421945145, "creation_date": 1421918733, "answer_id": 28085133, "question_id": 28075193, "link": "https://stackoverflow.com/questions/28075193/how-to-decompress-bz2-directly-into-popen-stdin-in-python-2-7/28085133#28085133", "title": "How to decompress BZ2 directly into Popen stdin in Python 2.7?", "body": "<p>To avoid <code>bunzip2</code> dependency, you could pump the input manually:</p>\n\n<pre><code>import subprocess\nimport threading\nfrom contextlib import closing\n\np = subprocess.Popen(['tcpdump', '-lnr', '-s', '0', '-'],\n                     stdin=subprocess.PIPE, stdout=subprocess.PIPE, bufsize=-1)\nthreading.Thread(target=pump, args=[filename, p.stdin]).start()\nwith closing(p.stdout):\n     for line in iter(p.stdout.readline, b''):\n         print line,\np.wait()\n</code></pre>\n\n<p>where <code>pump()</code> is:</p>\n\n<pre><code>from shutil import copyfileobj\n\ndef pump(filename, pipe):\n    \"\"\"Decompress *filename* and write it to *pipe*.\"\"\"\n    with closing(pipe), bz2.BZ2File(filename) as input_file:\n         copyfileobj(input_file, pipe)\n</code></pre>\n"}], "owner": {"reputation": 15461, "user_id": 9642, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5c5f08d92e1ce6b99fc90e365c9b0261?s=128&d=identicon&r=PG", "display_name": "Neil C. Obremski", "link": "https://stackoverflow.com/users/9642/neil-c-obremski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 28075224, "answer_count": 2, "score": 2, "last_activity_date": 1421945145, "creation_date": 1421868278, "last_edit_date": 1421868963, "question_id": 28075193, "link": "https://stackoverflow.com/questions/28075193/how-to-decompress-bz2-directly-into-popen-stdin-in-python-2-7", "title": "How to decompress BZ2 directly into Popen stdin in Python 2.7?", "body": "<p>Scenario: <code>PCAP</code> file compressed with <code>BZIP2</code> that I would like to parse with <code>tcpdump</code> and list the results line by line, within Python 2.7. Here's what I came up with off the top of my head:</p>\n\n<pre><code>def tcpdump(filename):\n    import subprocess\n    import bz2\n\n    p = subprocess.Popen(\n        ('tcpdump', '-lnr', '-s', '0', '-'),\n        stdin=bz2.BZ2File(filename),\n        stdout=subprocess.PIPE)\n\n    try:\n        for row in p.stdout:\n            yield row.rstrip()\n    except KeyboardInterrupt:\n        p.terminate()\n</code></pre>\n\n<p>The problem  with this is that the <code>stdin</code> parameter of <code>Popen</code> expects an actual file handle and throws this exception:</p>\n\n<p><strong>AttributeError: 'bz2.BZ2File' object has no attribute 'fileno'</strong></p>\n\n<p>I could easily make this a 2-step process, but I'd like to avoid an intermediate temporary file.</p>\n\n<p>Thoughts or suggestions?</p>\n"}, {"tags": ["python", "mysql", "sql"], "answers": [{"tags": [], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "is_accepted": true, "score": 0, "last_activity_date": 1421868798, "creation_date": 1421868798, "answer_id": 28075350, "question_id": 28075163, "link": "https://stackoverflow.com/questions/28075163/string-encoding-sql-statement/28075350#28075350", "title": "String-encoding SQL statement", "body": "<p>This seemed to be an issue with an outdated version of <code>MySQLdb</code>, which was not properly encoding the string. </p>\n\n<p>I was able to solve this by uninstalling MySQLdb and then reinstalling the newer version, (<code>MySQL-python==1.2.5</code>).</p>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 28075350, "answer_count": 1, "score": 0, "last_activity_date": 1421868983, "creation_date": 1421868198, "last_edit_date": 1421868983, "question_id": 28075163, "link": "https://stackoverflow.com/questions/28075163/string-encoding-sql-statement", "title": "String-encoding SQL statement", "body": "<p>I have a very strange issue. I have a SQL statement that works locally, but the same statement does not work on a remote ubuntu machine (same mysql version). I think it has to do with how the SQL string is being encoded by the driver. Here is the statement I have:</p>\n\n<pre><code>group_ids = ('43ede7a1e1f048872c025867602dc54d', '43ede7a1e1f048872c025867602dc54d', '7a8ec12901c43606aee041f1e6d5b2d4', '0f57f4ad\ncursor = connection.cursor()\ncursor.execute( '''\n    SELECT\n        DISTINCT c.group_id\n    FROM\n        main_cue c\n            LEFT OUTER JOIN\n        main_passongroup p\n            ON\n        (c.group_id=p.group_id AND p.user_id=%s)\n    WHERE \n        c.group_id in %s\n    ORDER BY\n        p.timestamp ASC, c.id DESC''',  (user.pk, group_ids))\n\nresults = cursor.fetchall()\nprint '&gt;&gt;&gt; 1', results\n</code></pre>\n\n<p>On my local machine, it seems to be properly SQL-encoding the statement, but on the remote server, it is only working if I hard code the <strong>exact</strong> sql statement.</p>\n\n<p>Is there a better way to encode the SQL statement?</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup", "html-parsing"], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 1913137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae59b40d06a8b06c115b6f598bb4044?s=128&d=identicon&r=PG&f=1", "display_name": "learnerX", "link": "https://stackoverflow.com/users/1913137/learnerx"}, "edited": false, "score": 0, "creation_date": 1421870251, "post_id": 28075454, "comment_id": 44530564, "body": "Thanks, but I&#39;m getting an error executing this: &quot;Traceback (most recent call last):   File &quot;./all_.py&quot;, line 11, in &lt;module&gt;     link = soup.find(&#39;div&#39;, class_=&#39;c_logo_box&#39;).find(&#39;a&#39;, href=re.compile(r&#39;ria-money-transfer&#39;)) AttributeError: &#39;NoneType&#39; object has no attribute &#39;find&#39;&quot;"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 932, "user_id": 1913137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae59b40d06a8b06c115b6f598bb4044?s=128&d=identicon&r=PG&f=1", "display_name": "learnerX", "link": "https://stackoverflow.com/users/1913137/learnerx"}, "edited": false, "score": 0, "creation_date": 1421870866, "post_id": 28075454, "comment_id": 44530890, "body": "@intellikid ok, what if you replace <code>BeautifulSoup(response.content)</code> with <code>BeautifulSoup(response.content, &quot;html.parser&quot;)</code>?"}, {"owner": {"reputation": 932, "user_id": 1913137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae59b40d06a8b06c115b6f598bb4044?s=128&d=identicon&r=PG&f=1", "display_name": "learnerX", "link": "https://stackoverflow.com/users/1913137/learnerx"}, "edited": false, "score": 0, "creation_date": 1421871938, "post_id": 28075454, "comment_id": 44531406, "body": "Nope, still an error: &quot;Traceback (most recent call last):   File &quot;delnow.py&quot;, line 9, in &lt;module&gt;     link = soup.find(&#39;div&#39;, class_=&#39;c_logo_box&#39;).find(&#39;a&#39;, href=re.compile(r&#39;ria-money-transfer&#39;)) AttributeError: &#39;NoneType&#39; object has no attribute &#39;find&#39;&quot;"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 1, "last_activity_date": 1421869143, "creation_date": 1421869143, "answer_id": 28075454, "question_id": 28075119, "link": "https://stackoverflow.com/questions/28075119/python-scraping-beautiful-soup-to-obtain-data-from-this-html/28075454#28075454", "title": "Python scraping (Beautiful Soup) to obtain data from this HTML", "body": "<p>There are multiple ways to reach the element. One option is to rely on the <code>a</code> tag, <code>href</code> of which contains the <code>ria-money-transfer</code> part, then get the <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-next-siblings-and-find-next-sibling\" rel=\"nofollow\">following <code>span</code> element</a> containing the rate:</p>\n\n<pre><code>import re\n\nfrom bs4 import BeautifulSoup\nimport requests\n\nresponse = requests.get('http://www.compareremit.com')\nsoup = BeautifulSoup(response.content)\n\nlink = soup.find('div', class_='c_logo_box').find('a', href=re.compile(r'ria-money-transfer'))\nprint(link.img.get('alt'))\n\nrate = link.find_next_sibling('span').text.split(' ')[-1]\nprint(rate)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>RIA Money Transfer\n61.24\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "is_accepted": true, "score": 1, "last_activity_date": 1421869825, "creation_date": 1421869825, "answer_id": 28075646, "question_id": 28075119, "link": "https://stackoverflow.com/questions/28075119/python-scraping-beautiful-soup-to-obtain-data-from-this-html/28075646#28075646", "title": "Python scraping (Beautiful Soup) to obtain data from this HTML", "body": "<p>Your code is logically not correct. You can do this in multiple ways, try this code</p>\n\n<p>#!/usr/bin/python</p>\n\n<pre><code>import requests\nimport re\nfrom bs4 import BeautifulSoup\n\nr = requests.get('http://www.compareremit.com')\ndata = r.text\n\nsoup = BeautifulSoup(data)\nfor rate in soup.find_all('div',{\"class\":\"c_logo_box\"}):\n    print rate.a.img['alt'] \n    print rate.span.text\n</code></pre>\n"}], "owner": {"reputation": 932, "user_id": 1913137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae59b40d06a8b06c115b6f598bb4044?s=128&d=identicon&r=PG&f=1", "display_name": "learnerX", "link": "https://stackoverflow.com/users/1913137/learnerx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 1, "accepted_answer_id": 28075646, "answer_count": 2, "score": 3, "last_activity_date": 1421869825, "creation_date": 1421868076, "last_edit_date": 1421869346, "question_id": 28075119, "link": "https://stackoverflow.com/questions/28075119/python-scraping-beautiful-soup-to-obtain-data-from-this-html", "title": "Python scraping (Beautiful Soup) to obtain data from this HTML", "body": "<pre><code> &lt;ul&gt;\n  &lt;li&gt;\n    &lt;div class=\"c_logo_box\"&gt;\n     &lt;a href=\"money-transfer-companies/ria-money-transfer/\"&gt;&lt;img src=\"http://www.compareremit.com/uploads/ria-logo11.png\" style=\"height:57px;width:147px;\" alt=\"RIA Money Transfer\"&gt;&lt;/a&gt;\n     &lt;span class=\"rs\"&gt; &lt;span class=\"txt13\"&gt;&amp;#8377;&lt;/span&gt; 61.24&lt;/span&gt;\n       &lt;/div&gt;\n  &lt;/li&gt;\n ...\n</code></pre>\n\n<p>I wish to scrap the <strong>name</strong> from 'alt = Ria Money Transfer' and <strong>rate</strong> from span 61.24.</p>\n\n<p>So far I have this Python code:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport requests\nimport re\nfrom bs4 import BeautifulSoup\n\nr = requests.get('http://www.compareremit.com')\ndata = r.text\n\nsoup = BeautifulSoup(data)\nfor rate in soup.find_all('li', re.compile('money')):\nprint rate.text\n</code></pre>\n\n<p>It gives me nothing. Could someone tell me what am I missing? Also, I'm having trouble visualizing which element I'm support to look for in the for loop search, could you clarify in general how to know what to specify as a condition in for loop in such cases?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 2, "creation_date": 1421868252, "post_id": 28075108, "comment_id": 44529450, "body": "You want an incremental json parser, e.g. see this answer: <a href=\"http://stackoverflow.com/a/10715686/866915\">(link)</a> Another possibility is this: <a href=\"https://github.com/nigelsmall/jsonstream\" rel=\"nofollow noreferrer\">(link)</a>"}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1421868298, "post_id": 28075108, "comment_id": 44529467, "body": "since <code>BZ2File</code> has a <code>read</code> method that returns an arbitrary number of bytes, I would probably consider trying to read the json as a stream, with something like <a href=\"https://pypi.python.org/pypi/ijson/\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/ijson</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3237, "user_id": 1352745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VV5jF.png?s=128&g=1", "display_name": "Daniel Robinson", "link": "https://stackoverflow.com/users/1352745/daniel-robinson"}, "edited": false, "score": 3, "creation_date": 1421868599, "post_id": 28075231, "comment_id": 44529639, "body": "It would be easier and safer to use an incremental JSON parser like <a href=\"http://pykler.github.io/yajl-py/\" rel=\"nofollow noreferrer\">pykler.github.io/yajl-py</a>, rather than figuring it out yourself."}, {"owner": {"reputation": 34145, "user_id": 52551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e93a372e263490e0cf273ede0a1393ed?s=128&d=identicon&r=PG", "display_name": "Spencer Ruport", "link": "https://stackoverflow.com/users/52551/spencer-ruport"}, "reply_to_user": {"reputation": 3237, "user_id": 1352745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VV5jF.png?s=128&g=1", "display_name": "Daniel Robinson", "link": "https://stackoverflow.com/users/1352745/daniel-robinson"}, "edited": false, "score": 0, "creation_date": 1421868664, "post_id": 28075231, "comment_id": 44529672, "body": "Ah, I was unaware of that library."}], "tags": [], "owner": {"reputation": 34145, "user_id": 52551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e93a372e263490e0cf273ede0a1393ed?s=128&d=identicon&r=PG", "display_name": "Spencer Ruport", "link": "https://stackoverflow.com/users/52551/spencer-ruport"}, "is_accepted": false, "score": 1, "last_activity_date": 1421868439, "creation_date": 1421868439, "answer_id": 28075231, "question_id": 28075108, "link": "https://stackoverflow.com/questions/28075108/python-parse-large-json-file/28075231#28075231", "title": "Python: Parse large json file", "body": "<p>In the absence of any other suggestions or existing code I would recommend opening a stream and manually parsing the braces and brackets (<code>{</code> and <code>[</code> respectively) until you have a complete object <code>{ ... }</code> and run deserialization on that. This will allow you to chunk the JSON while leveraging existing JSON libraries.</p>\n\n<p>This is not a solution I would typically recommend but it's the quickest and most reliable solution I can think of if existing libraries don't suit your needs.</p>\n"}, {"comments": [{"owner": {"reputation": 2868, "user_id": 142605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea0662af98f5642193079ebbb7e78fd5?s=128&d=identicon&r=PG", "display_name": "dzieciou", "link": "https://stackoverflow.com/users/142605/dzieciou"}, "edited": false, "score": 0, "creation_date": 1603291251, "post_id": 55299715, "comment_id": 113991487, "body": "And the magic -2 stands for white endline character <code>\\n\\r</code>?"}, {"owner": {"reputation": 6819, "user_id": 140837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e6470f08d90f2d62f514b5b71ca5ca3f?s=128&d=identicon&r=PG", "display_name": "amirouche", "link": "https://stackoverflow.com/users/140837/amirouche"}, "reply_to_user": {"reputation": 2868, "user_id": 142605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea0662af98f5642193079ebbb7e78fd5?s=128&d=identicon&r=PG", "display_name": "dzieciou", "link": "https://stackoverflow.com/users/142605/dzieciou"}, "edited": false, "score": 1, "creation_date": 1603559019, "post_id": 55299715, "comment_id": 114078245, "body": "The <code>-2</code> stands for comma <code>,</code> and the end of the line. The fatest performance wise, would be to parse with a json streaming parser."}], "tags": [], "owner": {"reputation": 6819, "user_id": 140837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e6470f08d90f2d62f514b5b71ca5ca3f?s=128&d=identicon&r=PG", "display_name": "amirouche", "link": "https://stackoverflow.com/users/140837/amirouche"}, "is_accepted": false, "score": 1, "last_activity_date": 1553258073, "creation_date": 1553258073, "answer_id": 55299715, "question_id": 28075108, "link": "https://stackoverflow.com/questions/28075108/python-parse-large-json-file/55299715#55299715", "title": "Python: Parse large json file", "body": "<p>If someone is looking for a way to parse wikidata json dump compressed in bz2 here is a snippet of code:</p>\n\n<pre><code>import bz2\nimport json\n\nf = bz2.BZ2File(\"latest-all.json.bz2\", \"r\")\nnext(f)  # skip the first line\nfor line in f:\n    print(json.loads(line[:-2]))\n</code></pre>\n"}], "owner": {"reputation": 14714, "user_id": 200317, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/90ca39c2ec77b9727567834bdaacd72d?s=128&d=identicon&r=PG", "display_name": "add-semi-colons", "link": "https://stackoverflow.com/users/200317/add-semi-colons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3633, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1553258073, "creation_date": 1421868003, "question_id": 28075108, "link": "https://stackoverflow.com/questions/28075108/python-parse-large-json-file", "title": "Python: Parse large json file", "body": "<p>I have a large json file. Its log data and I have compressed it to bz2 format (myfile.json.bz2). Size of the bz2 file is 90MB. I searched to find a good solution or a blog post that explain parsing compressed bz2 json file efficiently but was not able to find any. </p>\n\n<p>Since the file is large doing something like is impossible.</p>\n\n<pre><code>with open('data.json') as data_file:    \n    data = json.load(data_file)\n</code></pre>\n\n<p>what is the best approach?</p>\n\n<p>After some digging around I found there is a python package to read bz2</p>\n\n<pre><code>input_file = bz2.BZ2File(filename, 'r')\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 1812711, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/tD1jG.jpg?s=128&g=1", "display_name": "RossGK", "link": "https://stackoverflow.com/users/1812711/rossgk"}, "is_accepted": true, "score": 5, "last_activity_date": 1421868153, "creation_date": 1421868153, "answer_id": 28075147, "question_id": 28075061, "link": "https://stackoverflow.com/questions/28075061/django-send-mail-fails-in-1-7-says-no-django-smtp-ssl/28075147#28075147", "title": "Django send_mail fails in 1.7 Says no django_smtp_ssl", "body": "<p>Nothing like putting together a question to help yourself find the answer. </p>\n\n<p>Looks like the EMAIL_BACKEND location has changed in this version of Django.  So the answer (for others who google like me without finding the solution) is simply the updated backend pointer in your settings.py file. </p>\n\n<p>It is now:</p>\n\n<pre><code>EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\n</code></pre>\n\n<p>Cheers,\nRoss.</p>\n"}], "owner": {"reputation": 454, "user_id": 1812711, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/tD1jG.jpg?s=128&g=1", "display_name": "RossGK", "link": "https://stackoverflow.com/users/1812711/rossgk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2532, "favorite_count": 1, "accepted_answer_id": 28075147, "answer_count": 1, "score": 2, "last_activity_date": 1421868153, "creation_date": 1421867847, "question_id": 28075061, "link": "https://stackoverflow.com/questions/28075061/django-send-mail-fails-in-1-7-says-no-django-smtp-ssl", "title": "Django send_mail fails in 1.7 Says no django_smtp_ssl", "body": "<p>I'm porting some Django 1.5 to 1.7, and a send_mail() call is failing for me. I checked <a href=\"https://docs.djangoproject.com/en/1.7/topics/email/\" rel=\"nofollow\">the docs</a> and they seem to suggest my syntax is still okay. </p>\n\n<p>I tried in the Django shell mode, to get a trace to share here, and it still fails in the same manner. I'm simply calling send_mail() with:</p>\n\n<pre><code>from django.core.mail import send_mail\nsend_mail('Test mail', 'This is a test', 'addr@site.ca' ['addr2@site.ca'], fail_silently=False)\n</code></pre>\n\n<p>and I get a traceback with </p>\n\n<pre><code>ImportError: No module named django_smtp_ssl\n</code></pre>\n\n<p>Now, that smtp_ssl looks like from smtplib.  I tried importing smtplib along with send_mail, but that didn't help either. </p>\n\n<p>In my settings.py, I have the usual PORT and HOST details and</p>\n\n<pre><code>EMAIL_BACKEND = 'django_smtp_ssl.SSLEmailBackend'\n</code></pre>\n\n<p>Any suggestions? </p>\n\n<p>-Thx, Ross.</p>\n"}, {"tags": ["python", "performance", "numpy"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1421867801, "post_id": 28075016, "comment_id": 44529238, "body": "This question is more appropriate for <a href=\"http://codereview.stackexchange.com\">Code Review</a>"}, {"owner": {"reputation": 8261, "user_id": 245173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c6145047e62b215306e1a3e6d6800f?s=128&d=identicon&r=PG", "display_name": "jpkotta", "link": "https://stackoverflow.com/users/245173/jpkotta"}, "edited": false, "score": 0, "creation_date": 1421872641, "post_id": 28075016, "comment_id": 44531707, "body": "Since you&#39;re only interested in the number of labels, try using a defaultdict with int instead of list, and just increment instead of append."}, {"owner": {"reputation": 53, "user_id": 3513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1da4728b49aa99242aad5f9e95a4051?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/3513103/jesse"}, "reply_to_user": {"reputation": 8261, "user_id": 245173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c6145047e62b215306e1a3e6d6800f?s=128&d=identicon&r=PG", "display_name": "jpkotta", "link": "https://stackoverflow.com/users/245173/jpkotta"}, "edited": false, "score": 0, "creation_date": 1421884713, "post_id": 28075016, "comment_id": 44536947, "body": "@jpkotta: I&#39;m not only interested in the number of labels per context.  I need all labels per context, so I can compute stuff like mean and stdev of the labels per context."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1421910366, "post_id": 28076216, "comment_id": 44544017, "body": "For <code>labels</code> of length 100, your 2 changes improve the speed by about 10%."}, {"owner": {"reputation": 53, "user_id": 3513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1da4728b49aa99242aad5f9e95a4051?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/3513103/jesse"}, "edited": false, "score": 0, "creation_date": 1421946253, "post_id": 28076216, "comment_id": 44565099, "body": "Thanks.  I&#39;d vote up your answer but I don&#39;t have enough reputation!  I am more of a lurker on SO than a rep collector.  :)"}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 2, "last_activity_date": 1421872067, "creation_date": 1421872067, "answer_id": 28076216, "question_id": 28075016, "link": "https://stackoverflow.com/questions/28075016/improve-performance-of-this-python-function/28076216#28076216", "title": "Improve performance of this python function", "body": "<p>Try replacing</p>\n\n<pre><code>    for i, label in enumerate(labels):\n        by_context[contexts[i]].append(label)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>for context, label in zip(contexts, labels):\n    by_context[context].append(label)\n</code></pre>\n\n<p>and instead of using <code>keys_to_remove</code>, try</p>\n\n<pre><code>n = self._min_samples_context\nreturn {c:ls for c,ls in by_context.items() if len(ls) &gt;= n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1421910830, "creation_date": 1421910830, "answer_id": 28083124, "question_id": 28075016, "link": "https://stackoverflow.com/questions/28075016/improve-performance-of-this-python-function/28083124#28083124", "title": "Improve performance of this python function", "body": "<p>Looks like something like these 2 arrays would make a good test case:</p>\n\n<pre><code>N = 100\nlabels=np.arange(N)\ncontexts=np.random.randint(0,len(labels)/10,len(labels))\n</code></pre>\n\n<p>With these arrays, @Hugh's improvements gain about 10% in speed.</p>\n\n<p>My experience with other problems indicates that a <code>defaultdict</code> is a pretty good way of collecting values like this.  The only thing that might be faster is to convert this into some sort of <code>numpy</code> indexing problem.</p>\n"}], "owner": {"reputation": 53, "user_id": 3513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1da4728b49aa99242aad5f9e95a4051?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/3513103/jesse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 28076216, "answer_count": 2, "score": -2, "last_activity_date": 1421910830, "creation_date": 1421867702, "last_edit_date": 1421868960, "question_id": 28075016, "link": "https://stackoverflow.com/questions/28075016/improve-performance-of-this-python-function", "title": "Improve performance of this python function", "body": "<pre><code>def _partition_by_context(self, labels, contexts):\n    # partition the labels by context\n    assert len(labels) == len(contexts)\n    by_context = collections.defaultdict(list)\n    for i, label in enumerate(labels):\n        by_context[contexts[i]].append(label)\n\n    # now remove any that don't have enough samples\n    keys_to_remove = []\n    for key, value in by_context.iteritems():\n        if len(value) &lt; self._min_samples_context:\n            keys_to_remove.append(key)\n    for key in keys_to_remove:\n        del by_context[key]\n\n    return by_context\n</code></pre>\n\n<ol>\n<li>labels is a numpy array of floats.</li>\n<li>contexts is a python list of tuples.  each tuple is of form <code>(unicode, int)</code>: example <code>(u'ffcd6881167b47d492adf3f542af94c6', 2)</code>.  context values are often repeated.  For example there may be 10000 values in the contexts list, but only 100 distinct values.</li>\n<li><code>len(labels) == len(contexts)</code> is true, as asserted in first line</li>\n<li>label at index i is associated with context at index i.  that is, <code>labels[i]</code> and <code>contexts[i]</code> \"go together\"</li>\n</ol>\n\n<p>Point of this function is to partition the values in the labels by context value.  Then at the end, remove dictionary entries if the label count is too low.</p>\n\n<p>So if all context values were the same, return value would be a dictionary with a single entry, key=context, value=list of all labels.</p>\n\n<p>If there were N distinct context values, return value would have N keys (one for each context) and value of each would be a list of labels associated with a particular context.  Ordering of labels in the list is not important.</p>\n\n<p>This function is called millions of times with different args.  I've determined it's the bottleneck using <a href=\"https://pypi.python.org/pypi/gprof2dot\" rel=\"nofollow\" title=\"gprof2dot\">gprof2dot</a>.  Much of the cost is in the list append() calls in the first for loop.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "oauth", "http-status-code-400", "service-accounts"], "comments": [{"owner": {"reputation": 119, "user_id": 4472689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJZHr.jpg?s=128&g=1", "display_name": "JA Arce", "link": "https://stackoverflow.com/users/4472689/ja-arce"}, "edited": false, "score": 0, "creation_date": 1421868766, "post_id": 28074991, "comment_id": 44529743, "body": "I think the grant should be authorization_code or something similar in here. <a href=\"https://developers.google.com/accounts/docs/OAuth2WebServer#offline\" rel=\"nofollow noreferrer\">developers.google.com/accounts/docs/OAuth2WebServer#offline</a>  Seeing that your grant_type is &#39;grant_type&#39;: &#39;urn:ietf:params:oauth:grant-type:jwt-bearer&#39;, which is why it&#39;s having an error"}, {"owner": {"reputation": 21, "user_id": 1237011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec263cdc13d30558195a9bded2a45fe4?s=128&d=identicon&r=PG", "display_name": "r3tic3nc3", "link": "https://stackoverflow.com/users/1237011/r3tic3nc3"}, "reply_to_user": {"reputation": 119, "user_id": 4472689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJZHr.jpg?s=128&g=1", "display_name": "JA Arce", "link": "https://stackoverflow.com/users/4472689/ja-arce"}, "edited": false, "score": 0, "creation_date": 1421887823, "post_id": 28074991, "comment_id": 44537871, "body": "Thanks for the prompt reply.  However the suggestion and accompanying link included in your reply are for access requests from web server applications not service accounts. Making the suggested change results in the script throwing a different error that states <code>{u&#39;error_description&#39;: u&#39;Missing required parameter: code&#39;, u&#39;error&#39;: u&#39;invalid_request&#39;}</code>"}, {"owner": {"reputation": 21, "user_id": 1237011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec263cdc13d30558195a9bded2a45fe4?s=128&d=identicon&r=PG", "display_name": "r3tic3nc3", "link": "https://stackoverflow.com/users/1237011/r3tic3nc3"}, "reply_to_user": {"reputation": 119, "user_id": 4472689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJZHr.jpg?s=128&g=1", "display_name": "JA Arce", "link": "https://stackoverflow.com/users/4472689/ja-arce"}, "edited": false, "score": 0, "creation_date": 1423874172, "post_id": 28074991, "comment_id": 45340975, "body": "The error message was the result of me using <code>params</code> instead of <code>data</code>. The former is to be used with get requests while the latter is to be used with post. However, I am now getting an error message that states <code>{u&#39;error_description&#39;: u&#39;Required parameter is missing: grant_type&#39;, u&#39;error&#39;: u&#39;invalid_request&#39;}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1237011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec263cdc13d30558195a9bded2a45fe4?s=128&d=identicon&r=PG", "display_name": "r3tic3nc3", "link": "https://stackoverflow.com/users/1237011/r3tic3nc3"}, "edited": false, "score": 0, "creation_date": 1423873762, "post_id": 28207985, "comment_id": 45340884, "body": "Thanks for the suggestion and the useful info. However, I don&#39;t think this is a viable solution for this particular scenario. The account that will be used for this is a service account and it is entirely possible that there will be future service accounts.  Having to log in to a Google site with each to create an encrypted cookie which will then need to be decrypted is not practical or scalable. If Google changes their cookies, as the author on that page mentions was the inspiration for his script, that will need to be done again."}], "tags": [], "owner": {"reputation": 178, "user_id": 765954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49dfb18fe5055c89a4f187c8d2b6f62?s=128&d=identicon&r=PG&f=1", "display_name": "astrok", "link": "https://stackoverflow.com/users/765954/astrok"}, "is_accepted": false, "score": 0, "last_activity_date": 1422512452, "last_edit_date": 1422512452, "creation_date": 1422511657, "answer_id": 28207985, "question_id": 28074991, "link": "https://stackoverflow.com/questions/28074991/python-oauth-error-invalid-grant/28207985#28207985", "title": "Python OAuth Error &quot;Invalid Grant&quot;", "body": "<p>I would look at the output http and url to make sure, but it does seem like you are having authentication issues.  </p>\n\n<p>I ran into a similar, albeit less complicated problem, and couldn't get my Google Developer credentials in through a python script.  I ended up using my Chrome browser cookies with this script to get through that part: <a href=\"http://n8henrie.com/2014/05/decrypt-chrome-cookies-with-python/\" rel=\"nofollow\">http://n8henrie.com/2014/05/decrypt-chrome-cookies-with-python/</a></p>\n\n<p>Makes everything pretty simple:</p>\n\n<pre><code>url = 'http://www.example.com'\ns = requests.Session()\ncookies = pyCookieCheat.chrome_cookies(url)\ns.get(url, cookies = cookies)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1237011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec263cdc13d30558195a9bded2a45fe4?s=128&d=identicon&r=PG", "display_name": "r3tic3nc3", "link": "https://stackoverflow.com/users/1237011/r3tic3nc3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1448, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1422512452, "creation_date": 1421867569, "question_id": 28074991, "link": "https://stackoverflow.com/questions/28074991/python-oauth-error-invalid-grant", "title": "Python OAuth Error &quot;Invalid Grant&quot;", "body": "<p>I work at a small company whose mail is hosted through Google. As one of the administrators responsible for managing employee accounts I'm attempting to automate some tasks using Google APIs and one or more dedicated service accounts. I wrote the short Python script below to request an access token according to the documentation Google provides but I continue to get an \"invalid_grant\" error.</p>\n\n<p>I've done the following:</p>\n\n<ul>\n<li>Logged into the Google Developers Console as the service account and created a project</li>\n<li>Created a client ID of type service account</li>\n<li>Logged into the Google Admin Console and added client email address and scope URLs I wish the account to have access to</li>\n</ul>\n\n<p>Searches online have yielded answers indicating that either the system time of the machine is off, the limit for refresh tokens has been exceeded or that the client ID instead of the client email has been used.  I've synchronized the time on a Windows machine and a Linux machine prior to running the script and the same error appears. I'm not even getting an access token so I doubt the refresh limit has been exceeded. As can be seen below, the iss value is set to the client email address ending with \"@developer.gserviceaccount.com\".</p>\n\n<p>I suspect that there is something else I am missing and, as I'm new to Python, I suspect it's something embarrassingly simple.  Perhaps someone can assist?</p>\n\n<pre><code>import json\nimport time\nimport base64\nimport requests\nfrom datetime import datetime\n\nutc = datetime.utcnow()\niat = time.mktime(utc.timetuple())\nexp = iat + 3600\n\njwt_header = {\n    \"alg\":\"RS256\",\n    \"typ\":\"JWT\"\n}\n\njwt_claim_set = {\n    \"iss\":\"pleasehelpme@developer.gserviceaccount.com\",\n    \"scope\":\"https://www.googleapis.com/auth/admin.directory.user\",\n    \"aud\":\"https://www.googleapis.com/oauth2/v3/token\",\n    \"iat\":int(iat),\n    \"exp\":int(exp),\n    \"sub\":\"someadminfrustrated@googleoauth.com\"\n}\n\njwt_jws = bytearray(str(jwt_header) + '.' + str(jwt_claim_set))\n\njwt_unencoded = str(jwt_header) + '.' + str(jwt_claim_set) + '.' +     str(jwt_jws)\njwt_encoded = base64.urlsafe_b64encode(str(jwt_unencoded))\n\nurl = 'https://www.googleapis.com/oauth2/v3/token'\nheaders = {\n    'content-type': 'application/x-www-form-urlencoded'\n}\n\npayload = {\n    'grant_type': 'urn:ietf:params:oauth:grant-type:jwt-bearer',\n    'assertion': jwt_encoded\n}\n\nresponse = requests.post(url, headers=headers, params=payload)\n\nprint response\nprint response.json()\n</code></pre>\n\n<p>The output is the following:</p>\n\n<pre><code>&lt;Response [400]&gt;\n{u'error_description': u'Bad Request', u'error': u'invalid_grant'}\n</code></pre>\n"}, {"tags": ["python", "string", "dictionary"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1421867700, "post_id": 28074976, "comment_id": 44529183, "body": "Could you provide an example of a string you want to convert and what it should convert to?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1421868026, "post_id": 28074976, "comment_id": 44529341, "body": "Where is there conversion of any string to any dictionary in this question at all?"}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421868121, "post_id": 28074976, "comment_id": 44529380, "body": "I want to convert the &#39;backpack&#39; in example dictionary to a nonstring, so that my code recognizes &#39;backpack&#39; as a dictionary and not a string. Right now it&#39;s giving me a &quot;TypeError: string indices must be integers&quot;."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1421868315, "post_id": 28074976, "comment_id": 44529482, "body": "@AdamAgnello: <code>backpack</code> is a dictionary. Your code must be doing something else wrong, why not show the code that throws the exception?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1421868387, "post_id": 28074976, "comment_id": 44529517, "body": "@AdamAgnello: are you trying to turn the value of <code>exampleDictionary[&#39;thing on ground&#39;]</code>, which is a string, to resolve the variable? Don&#39;t do that, create another dictionary (<code>objects = {&#39;backpack&#39;: {...}}</code> for example) and look items up in that."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1421868431, "post_id": 28074976, "comment_id": 44529541, "body": "Also see <a href=\"http://stackoverflow.com/q/1373164\">How do I do variable variables in Python?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1421867787, "post_id": 28075021, "comment_id": 44529227, "body": "You&#39;re probably right, but this certainly isn&#39;t what I would call &quot;converting&quot; a string."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1421868486, "post_id": 28075021, "comment_id": 44529569, "body": "Correct, but more to the point: <b><i>don&#39;t do this</i></b>"}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 0, "last_activity_date": 1421867721, "creation_date": 1421867721, "answer_id": 28075021, "question_id": 28074976, "link": "https://stackoverflow.com/questions/28074976/python-converting-string-into-directory/28075021#28075021", "title": "Python. Converting string into directory", "body": "<p>You're looking for <a href=\"https://docs.python.org/2/library/functions.html#globals\" rel=\"nofollow\"><code>globals()</code></a>.</p>\n\n<pre><code>def openBackpack():\n    backpack= globals()[exampleDictionary['thing on ground']]\n    print(backpack['tea'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1421868545, "post_id": 28075191, "comment_id": 44529609, "body": "correct way to do it"}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421868553, "post_id": 28075191, "comment_id": 44529613, "body": "I didn&#39;t realize you could nest dictionaries. Thank you."}], "tags": [], "owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "is_accepted": true, "score": 3, "last_activity_date": 1421868275, "creation_date": 1421868275, "answer_id": 28075191, "question_id": 28074976, "link": "https://stackoverflow.com/questions/28074976/python-converting-string-into-directory/28075191#28075191", "title": "Python. Converting string into directory", "body": "<p>This is a very weird way to handle data. </p>\n\n<p>I would use a nested dicts:</p>\n\n<pre><code>exampleDictionary = {'thing on ground': {'backpack': {'tea': 'Earl Grey'}}}\n\nprint exampleDictionary['thing on ground']\nprint exampleDictionary['thing on ground']['backpack']\nprint exampleDictionary['thing on ground']['backpack']['tea']\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>{'backpack': {'tea': 'Earl Grey'}}\n{'tea': 'Earl Grey'}\nEarl Grey\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421868604, "post_id": 28075256, "comment_id": 44529640, "body": "Unless of course any of that is user input, in which case <code>exampleDictionary</code> may look like <code>{&#39;thing on ground&#39;: &quot;os.system.do_something_terribly_irreversible_to_your_system&zwnj;&#8203;(&#39;now&#39;)&quot;}</code>. <code>eval</code> isn&#39;t safe."}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421868707, "post_id": 28075256, "comment_id": 44529703, "body": "@AdamSmith I realize its not good form but his question was he wants a string to reference an object."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1421868773, "post_id": 28075256, "comment_id": 44529747, "body": "Right, but the correct thing to do when a novice asks how to build a house of Styrofoam is to <i>strongly recommend that he use wood instead</i>, not teach him how to glue it together"}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421868949, "post_id": 28075256, "comment_id": 44529845, "body": "@AdamSmith Why should I not do the above example?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421869138, "post_id": 28075256, "comment_id": 44529950, "body": "@AdamAgnello <code>eval</code> turns any string into a Python command. Many strings are UNSAFE PYTHON COMMANDS, such as <code>&quot;[os.remove(file) for file in glob.glob(&#39;C:\\windows\\system32\\*&#39;)]&quot;</code> (<b><i>do not run that</i></b>). Most questions of this type are based on using user input to look for a variable name, which means you&#39;re allowing a user to run arbitrary code in your program. That&#39;s a Bad Thing."}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1421869224, "post_id": 28075256, "comment_id": 44529988, "body": "load the gun @AdamSmith ... he could blow his leg off."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421869573, "post_id": 28075256, "comment_id": 44530196, "body": "@corn3lius in my defense, my first example was not only a placeholder method, but <i>inside a module that doesn&#39;t exist</i>. Since he asked, though...."}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1421869636, "post_id": 28075256, "comment_id": 44530229, "body": "@AdamSmith would you mind if I sent you my project that I&#39;m working on? I&#39;ve never actually been critiqued before an I could use a learning experience.  Because you know, I&#39;d rather not blow my leg off as corn3lius suggests might happen."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421869716, "post_id": 28075256, "comment_id": 44530266, "body": "@AdamAgnello I don&#39;t mind looking at it when I have time, but I&#39;m not big on sharing my personal contact info. Toss it in a <code>codepad.org</code> doc (or pick your favorite textdump) and link it"}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "edited": false, "score": 1, "creation_date": 1421869787, "post_id": 28075256, "comment_id": 44530312, "body": "or better yet <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421869827, "post_id": 28075256, "comment_id": 44530336, "body": "<a href=\"http://codepad.org/HkQBzjhU\" rel=\"nofollow noreferrer\">codepad.org/HkQBzjhU</a> Here ya go. This is my first project past 50 lines of code, so I&#39;m sure it&#39;s a nightmare to you more experienced people."}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421869893, "post_id": 28075256, "comment_id": 44530371, "body": "@corn3lius Thanks. I&#39;ll post it there too."}, {"owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "edited": false, "score": 0, "creation_date": 1421870526, "post_id": 28075256, "comment_id": 44530718, "body": "Here&#39;s a link to the codereview for all interested. <a href=\"http://codereview.stackexchange.com/questions/78255/newbies-first-project\" title=\"newbies first project\">codereview.stackexchange.com/questions/78255/&hellip;</a>"}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1421872682, "post_id": 28075256, "comment_id": 44531725, "body": "As mentioned above, there is absolutely nothing wrong with using eval, if you aren&#39;t evaluating user input, beyond the fact there are much better alternatives to achieving dynamic code (assuming this is the intent here)."}], "tags": [], "owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "is_accepted": false, "score": 0, "last_activity_date": 1421869181, "last_edit_date": 1421869181, "creation_date": 1421868511, "answer_id": 28075256, "question_id": 28074976, "link": "https://stackoverflow.com/questions/28074976/python-converting-string-into-directory/28075256#28075256", "title": "Python. Converting string into directory", "body": "<p>This approach looks up the string for and already existing object in the code. </p>\n\n<pre><code>exampleDictionary = {'thing on ground': 'backpack'}\nbackpack = {'tea': 'Earl Grey'}\nprint( eval(exampleDictionary['thing on ground']) ) \n</code></pre>\n\n<p><strong>edit</strong></p>\n\n<p>to Adam Smith 's point eval isn't a safe and you shouldn't do this </p>\n\n<p>... but it can be done and here is how. </p>\n\n<p>eval <a href=\"https://docs.python.org/2/library/functions.html#eval\" rel=\"nofollow\">https://docs.python.org/2/library/functions.html#eval</a></p>\n\n<p>takes a string and interprets it as code. </p>\n\n<pre><code>x = eval(\"1+2\") \nx = 3 \n</code></pre>\n\n<p>if you eval user input the likelyhood you know all of what a user can input or 'inject' into your code is unknown.</p>\n"}], "owner": {"reputation": 1, "user_id": 4479690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de0ee62fdf091736c40be223b9ca6c1?s=128&d=identicon&r=PG", "display_name": "Adam Agnello", "link": "https://stackoverflow.com/users/4479690/adam-agnello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "closed_date": 1421868608, "accepted_answer_id": 28075191, "answer_count": 3, "score": -6, "last_activity_date": 1421869181, "creation_date": 1421867538, "question_id": 28074976, "link": "https://stackoverflow.com/questions/28074976/python-converting-string-into-directory", "closed_reason": "Needs details or clarity", "title": "Python. Converting string into directory", "body": "<p>In python, I understand it's possible to convert many types of data to a string using str(). Is there any way to reverse this? Let me show you what I mean.</p>\n\n<pre><code>exampleDictionary = {'thing on ground': 'backpack'}\nbackpack = {'tea': 'Earl Grey'}\n\ndef openBackpack():\n     #code to grab backpack from exampleDictionary\n     #code to convert 'backpack' to backpack\n     #code to access backpack and look at the tea\n</code></pre>\n\n<p>This is oversimplified of my code in progress, but it should be easy to see basically where I'm stuck at. If it's not clear I'm happy to clarify further.</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 815, "user_id": 1047069, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/11a6be9599c362f766d928ce2eecd872?s=128&d=identicon&r=PG", "display_name": "user1047069", "link": "https://stackoverflow.com/users/1047069/user1047069"}, "edited": false, "score": 0, "creation_date": 1421958181, "post_id": 28075861, "comment_id": 44571797, "body": "hi, yes  decided to use concurrent.futures, but because i&#39;m using python 2.7 this modul need to be installed. I tried installing it using: sudo pip install futures but it still gives me : ImportError: No module named concurrent.futures. Do you know what&#39;s the solution ?"}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "reply_to_user": {"reputation": 815, "user_id": 1047069, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/11a6be9599c362f766d928ce2eecd872?s=128&d=identicon&r=PG", "display_name": "user1047069", "link": "https://stackoverflow.com/users/1047069/user1047069"}, "edited": false, "score": 0, "creation_date": 1421959949, "post_id": 28075861, "comment_id": 44572754, "body": "Seems I was wrong about <code>concurrent.futures</code>. See this API reference on how to spawn threads that persist after after a request. <a href=\"https://cloud.google.com/appengine/docs/python/modules/background_thread\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/python/modules/&hellip;</a>"}], "tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1421871357, "last_edit_date": 1421871357, "creation_date": 1421870615, "answer_id": 28075861, "question_id": 28074935, "link": "https://stackoverflow.com/questions/28074935/importerror-no-module-named-multiprocessing-on-python-2-7-3/28075861#28075861", "title": "ImportError: No module named _multiprocessing on python 2.7.3", "body": "<p>You are running in a sand-boxed environment that will not allow you to import certain modules in the standard library (<code>multiprocessing</code>) in this case.</p>\n\n<p>Why do you need <code>multiprocessing</code>? It may be that you can get away with using <code>threading</code>, though that may come with a performance hit depending on what you are trying to achieve. I've also noticed that <code>concurrent.futures</code> is also recommended for use with App Engine.</p>\n\n<p>See the sections on \"The Sandbox\" and \"Pure Python\". <a href=\"https://cloud.google.com/appengine/docs/python/\" rel=\"nofollow\">https://cloud.google.com/appengine/docs/python/</a></p>\n"}], "owner": {"reputation": 815, "user_id": 1047069, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/11a6be9599c362f766d928ce2eecd872?s=128&d=identicon&r=PG", "display_name": "user1047069", "link": "https://stackoverflow.com/users/1047069/user1047069"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421871357, "creation_date": 1421867432, "last_edit_date": 1421867666, "question_id": 28074935, "link": "https://stackoverflow.com/questions/28074935/importerror-no-module-named-multiprocessing-on-python-2-7-3", "title": "ImportError: No module named _multiprocessing on python 2.7.3", "body": "<p>I'm trying to do:</p>\n\n<pre><code>import multiprocessing \n</code></pre>\n\n<p>but get the error:</p>\n\n<pre><code>ERROR    2015-01-21 18:40:49,457 wsgi.py:263] \nTraceback (most recent call last):\n  File \"/home/nir/google_appengine/google/appengine/runtime/wsgi.py\", line 240, in Handle\n    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\n  File \"/home/nir/google_appengine/google/appengine/runtime/wsgi.py\", line 299, in _LoadHandler\n    handler, path, err = LoadObject(self._handler)\n  File \"/home/nir/google_appengine/google/appengine/runtime/wsgi.py\", line 85, in LoadObject\n    obj = __import__(path[0])\n  File \"/root/workspace/spring-nova-827/Main.py\", line 2, in &lt;module&gt;\n    import multiprocessing\n  File \"/usr/lib/python2.7/multiprocessing/__init__.py\", line 84, in &lt;module&gt;\n    import _multiprocessing\n  File \"/home/nir/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py\", line 898, in load_module\n    raise ImportError('No module named %s' % fullname)\nImportError: No module named _multiprocessing\n</code></pre>\n\n<p>I looked this problem up, but could not find a solution</p>\n"}, {"tags": ["python", "colors", "themes", "editor", "aptana"], "answers": [{"comments": [{"owner": {"reputation": 904, "user_id": 3313410, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/S23yE.png?s=128&g=1", "display_name": "Breaker222", "link": "https://stackoverflow.com/users/3313410/breaker222"}, "edited": false, "score": 0, "creation_date": 1421949822, "post_id": 28075375, "comment_id": 44567141, "body": "I installed the two plug ins. The described options appeared in the preferences and worked as intended :) Thank you very much."}, {"owner": {"reputation": 214, "user_id": 2128554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c4f9f1047510374882567fd796c8ebc?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/2128554/learner"}, "edited": false, "score": 0, "creation_date": 1450771544, "post_id": 28075375, "comment_id": 56563286, "body": "Perfect solution so far. But small change is, in Aptana 3, look for &quot;Color theme&quot; inside, Windows-&gt; Preferences-&gt; General-&gt; Appearance-&gt; Color theme. Thank you for the solution @user12321."}], "tags": [], "owner": {"reputation": 2406, "user_id": 4089859, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fad1d93d6c12fcf85e212af3eab0de99?s=128&d=identicon&r=PG&f=1", "display_name": "user 12321", "link": "https://stackoverflow.com/users/4089859/user-12321"}, "is_accepted": true, "score": 4, "last_activity_date": 1421868889, "creation_date": 1421868889, "answer_id": 28075375, "question_id": 28074933, "link": "https://stackoverflow.com/questions/28074933/aptana-studio-3-how-to-apply-themes-to-python-editor/28075375#28075375", "title": "Aptana Studio 3: How to apply themes to python editor", "body": "<p>Install Eclipse Market Place on Aptana Studio\nFrom Eclipse Market Place install Eclipse Color theme Plugin\nYou will find out most of the popular themes after installing plugin.(In Aptana Studio -> Window->Preferences->Appearance->Color Theme). You can also install themes from <a href=\"http://eclipsecolorthemes.org/\" rel=\"nofollow\">here</a> by importing themes.</p>\n\n<p>To install Eclipse market place on Aptana Studio 3. go to the help tab->install new software then click on the availible sources link then add the kelper site. Back on the previous screen you should wait to see the kelper packages loading. Wait for it to finish loading and then find search for marketplace it should be listed under general tools. Then accept and market will be listed under the help tab</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6757719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zHbe.png?s=128&g=1", "display_name": "goat1123", "link": "https://stackoverflow.com/users/6757719/goat1123"}, "is_accepted": false, "score": 0, "last_activity_date": 1491418296, "creation_date": 1491418296, "answer_id": 43239357, "question_id": 28074933, "link": "https://stackoverflow.com/questions/28074933/aptana-studio-3-how-to-apply-themes-to-python-editor/43239357#43239357", "title": "Aptana Studio 3: How to apply themes to python editor", "body": "<p><strong>My Problem:</strong> Standard theme change in Aptana Studio 3 (Window->Preferences->Aptana Studio->Theme) resulted in background color change but awkward script color which either blended with background or provided visual work space discomfort.</p>\n\n<p><strong>My Solution:</strong> \nOpen Aptana Studio 3 then navigate to the following:\nHelp->Install New Software->Click on expand button next to \"Add\" button->Choose Eclipse Kepler Update Site option-> Check the Eclipse Market Place install box and download the Market Place software.</p>\n\n<p>Access the Eclipse Market Place: Help->Eclipse Market Place-> Search for Eclipse Color Theme Plug-In and follow download steps. </p>\n\n<p><strong>!IMPORTANT!</strong>: You must then navigate to: Window->Preference->Aptana Studio->Theme-> Check the box \"Apply to all(non-Studio) editors\". If you don't the Eclipse Color Theme Plug-In won't work properly (this is what I discovered when I tried other peoples solutions in this community).</p>\n\n<p>Finally, navigate to Window->Preference->General->Appearance->Color Theme-> and choose your theme! (Obsidian is my favorite). Have fun!</p>\n"}], "owner": {"reputation": 904, "user_id": 3313410, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/S23yE.png?s=128&g=1", "display_name": "Breaker222", "link": "https://stackoverflow.com/users/3313410/breaker222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4253, "favorite_count": 0, "accepted_answer_id": 28075375, "answer_count": 2, "score": 4, "last_activity_date": 1491418296, "creation_date": 1421867411, "last_edit_date": 1421869332, "question_id": 28074933, "link": "https://stackoverflow.com/questions/28074933/aptana-studio-3-how-to-apply-themes-to-python-editor", "title": "Aptana Studio 3: How to apply themes to python editor", "body": "<p>How can I change the colors <strong>with a theme(*)</strong> in Aptana Studio 3 (3.6.0.201407100658 on Ubuntu) for python editors? For other editors (like for js-files or html-files) it works, as seen in the reference picture (left = python, right = js w/ \"aptana-studio\" theme):</p>\n\n<p><img src=\"https://i.stack.imgur.com/dyVLA.png\" alt=\"http://i.stack.imgur.com/dyVLA.png\"></p>\n\n<p>So far I couldn't find any answers on the web to this problem.</p>\n\n<p>*I have found out, that I can change the colors for a python editor in the preferences under <em>preferences > PyDev > Editor</em> , but this this is more like a workaround </p>\n"}, {"tags": ["python", "if-statement", "undefined"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 3, "creation_date": 1421867345, "post_id": 28074897, "comment_id": 44528981, "body": "If you&#39;re using python 2, use <code>raw_input</code> instead of <code>input</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4462461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdca6f293171f1c6c3e3ebd3ab647aa6?s=128&d=identicon&r=PG&f=1", "display_name": "hahman", "link": "https://stackoverflow.com/users/4462461/hahman"}, "edited": false, "score": 0, "creation_date": 1421868165, "post_id": 28074919, "comment_id": 44529402, "body": "Thank you very much, that really helped :)"}], "tags": [], "owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "is_accepted": true, "score": 1, "last_activity_date": 1421867348, "last_edit_date": 1495540763, "creation_date": 1421867348, "answer_id": 28074919, "question_id": 28074897, "link": "https://stackoverflow.com/questions/28074897/python-if-statement-definition-error/28074919#28074919", "title": "Python If Statement definition error", "body": "<p>You are using <code>input</code> function in python2, it should be <code>raw_input()</code> instead.</p>\n\n<pre><code>ppp=raw_input('Enter a, or b. or exit to exit')\n</code></pre>\n\n<p>Check <a href=\"https://stackoverflow.com/a/3800862/4099593\">this</a> answer for more information</p>\n"}], "owner": {"reputation": 13, "user_id": 4462461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdca6f293171f1c6c3e3ebd3ab647aa6?s=128&d=identicon&r=PG&f=1", "display_name": "hahman", "link": "https://stackoverflow.com/users/4462461/hahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1421867407, "accepted_answer_id": 28074919, "answer_count": 1, "score": -2, "last_activity_date": 1421867503, "creation_date": 1421867268, "last_edit_date": 1421867503, "question_id": 28074897, "link": "https://stackoverflow.com/questions/28074897/python-if-statement-definition-error", "closed_reason": "Duplicate", "title": "Python If Statement definition error", "body": "<p>I'm trying to test out if statements with the use of letters instead of numbers. I'm not sure what the error in my code is, can someone please help out</p>\n\n<pre><code>ppp=input('Enter a, or b. or exit to exit')\n\nwhile ppp!='exit':\n\n    if ppp=='a' or ppp=='A':\n        print('You Picked A')\n        ppp=input('a,b, or c?: ')\n\n    elif ppp=='b' or ppp=='B':\n        print('You Picked B')\n        ppp==input('a,b, or c?: ')\n\n    else:\n        print ('please choose a, or b')\n</code></pre>\n\n<p>When running it, it prints \"Enter a, or b. or exit to exit\" but when entering anything whether a, A, b, B, exit, or any random word or letter or number I get </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"temp.py\", line 1, in &lt;module&gt;\n   ppp=input('Enter a, or b. or exit to exit')\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nNameError: name 'a' is not defined\n</code></pre>\n\n<p>Please someone tell me what's wrong with my code.</p>\n"}]