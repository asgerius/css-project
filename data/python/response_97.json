[{"tags": ["python", "encoding", "web-scraping"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1479341789, "post_id": 40644494, "comment_id": 68521253, "body": "maybe decode data to <code>utf-8</code> before you use in <code>BS</code> <code>c.read().decode(&#39;utf-8&#39;)</code> (if this page uses <code>utf-8</code>) because problem is in BS. As I know <code>sys.setdefaultencoding</code> works with <code>print()</code> problems."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479341931, "post_id": 40644494, "comment_id": 68521294, "body": "Or use <code>requests</code> module which can find encoding used on page and gives decoded string in <code>r.text</code> (or not-decoded bytes in <code>r.content</code>)"}], "owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479340699, "creation_date": 1479340699, "last_edit_date": 1495535428, "question_id": 40644494, "link": "https://stackoverflow.com/questions/40644494/python-set-encoding-for-scraping-in-many-languages", "title": "Python - set encoding for scraping in many languages", "body": "<p>While scraping web data, I am having <code>'ascii'</code> encoding issues such as:</p>\n\n<p><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 20-22: ordinal not in range(128)</code>, </p>\n\n<p>and I came across this controversial solution which some say is dangerous:</p>\n\n<pre><code>import sys\nreload(sys)\nsys.setdefaultencoding('utf-8')\n</code></pre>\n\n<p>please see here:\n<a href=\"https://stackoverflow.com/questions/3828723/why-should-we-not-use-sys-setdefaultencodingutf-8-in-a-py-script\">Why should we NOT use sys.setdefaultencoding(&quot;utf-8&quot;) in a py script?</a></p>\n\n<p>I am using <code>Beautiful Soup</code>, and my app indexes text collected in different languages, such as german and french, besides english. </p>\n\n<p>This is the snippet generating ocasional errors:</p>\n\n<pre><code>for page in pages:\n                try:\n                    c = urllib2.urlopen(page)\n                except:\n                    print \"Could not open %s\" % page\n                    continue\n                soup = BeautifulSoup(c.read())\n</code></pre>\n\n<p>traceback:</p>\n\n<p><code>soup = BeautifulSoup(c.read()) \n  File \"/Library/Python/2.7/site-packages/BeautifulSoup.py\", line 1522, in __init__\n    BeautifulStoneSoup.__init__(self, *args, **kwargs)\n  File \"/Library/Python/2.7/site-packages/BeautifulSoup.py\", line 1147, in __init__\n    self._feed(isHTML=isHTML)\n  File \"/Library/Python/2.7/site-packages/BeautifulSoup.py\", line 1189, in _feed\n    SGMLParser.feed(self, markup)</code></p>\n\n<p>what is the safest way of scraping my data here without enconding issues?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "edited": false, "score": 4, "creation_date": 1479340898, "post_id": 40644492, "comment_id": 68520966, "body": "It&#39;s ok that this is a hw question, but please show us your attempt to answer this question first."}, {"owner": {"reputation": 7, "user_id": 7170253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83518135a851a78fad24a6da18447b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Potter", "link": "https://stackoverflow.com/users/7170253/harry-potter"}, "reply_to_user": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "edited": false, "score": 0, "creation_date": 1479341071, "post_id": 40644492, "comment_id": 68521023, "body": "@rbierman This is some of the code that was trying to work with: gradingScale = [&quot;F&quot;,&quot;F&quot;,&quot;F&quot;,&quot;F&quot;,&quot;F&quot;,&quot;F&quot;,&quot;F&quot;,&quot;D&quot;,&quot;C&quot;,&quot;B&quot;,&quot;A&quot;] What I was trying to do was somehow use rounding to access the characters in the list. It wasn&#39;t working too well, so I scrapped that idea"}, {"owner": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 0, "creation_date": 1479341163, "post_id": 40644492, "comment_id": 68521062, "body": "Please edit your question to include actual code that you&#39;ve written. (and please don&#39;t post this code as a comment)"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1479341365, "post_id": 40644492, "comment_id": 68521125, "body": "You might want to look into <code>range</code> and <code>dict</code> objects, if you can&#39;t use <code>if</code>, <code>elif</code>, and <code>else</code> statements. A <code>dict</code> value --&gt; key lookup looks like what you need."}, {"owner": {"reputation": 7, "user_id": 7170253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83518135a851a78fad24a6da18447b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Potter", "link": "https://stackoverflow.com/users/7170253/harry-potter"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1479341776, "post_id": 40644492, "comment_id": 68521249, "body": "@not_a_robot I can only use the skills that we&#39;ve learned in class so far (loops, graphics, lists, strings, some of the math library, and other extremely basic things like print statements) and range and dict are not some of the things that we have learned. Thanks for the advice thought"}], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "edited": false, "score": 1, "creation_date": 1479341886, "post_id": 40644614, "comment_id": 68521279, "body": "creative, but certainly not the best way around the problem. It has next to no flexibility. I would think that this answer could be improved significantly."}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 1, "creation_date": 1479346734, "post_id": 40644614, "comment_id": 68522610, "body": "I like this --- a more precise variant of <a href=\"https://stackoverflow.com/questions/40644736/4116239\">kindall&#39;s answer</a>.  It could easily be adapted to in-between grades like C- and B+ by varying the <code>grades</code> string.  You might want to rename <code>eval</code> to something that&#39;s not already a builtin, though...  I get queasy when I see <code>eval(anything)</code>, even though I know <i>your</i> <code>eval</code> is some other function.  Maybe call it <code>grade_score</code> or <code>graded</code>?  (It&#39;s frustrating that the verb and noun forms of &quot;grade&quot; are the same.)"}], "tags": [], "owner": {"reputation": 3144, "user_id": 102022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pO8em.jpg?s=128&g=1", "display_name": "eric.christensen", "link": "https://stackoverflow.com/users/102022/eric-christensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479347175, "last_edit_date": 1479347175, "creation_date": 1479341399, "answer_id": 40644614, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements/40644614#40644614", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>You could use a string and just look up the grade by index.</p>\n\n<pre><code>grades = (\"F\" * 60) + (\"D\" * 10) + (\"C\" * 10) + (\"B\" * 10) + (\"A\" * 11)\n\ndef get_grade(score):\n    return grades[score]\n\ndef main():\n    print(\"This program takes a percent score and tells the user what letter grade it is based on the grading scale\")\n    grade = get_grade(input(\"Please enter the percent score: \"))\n    print(grade)\n\nmain()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1479341783, "post_id": 40644650, "comment_id": 68521252, "body": "There&#39;s an <code>if</code> in that thar list comprehension... I think that would violate the spirit of the assignment if not the letter."}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1479341878, "post_id": 40644650, "comment_id": 68521276, "body": "Fair enough. Didn&#39;t notice. Will have to think of something else. That would probably require just a dictionary of 101 key: value pairs... One for each percentage."}], "tags": [], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "is_accepted": false, "score": 0, "last_activity_date": 1479342201, "last_edit_date": 1479342201, "creation_date": 1479341606, "answer_id": 40644650, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements/40644650#40644650", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>Edit:</p>\n\n<p>Okay, since this is apparently a homework assignment, and you have only learned these topics so far (\"loops, graphics, lists, strings, some of the math library, and other extremely basic things like print statements\"), we will try something else. </p>\n\n<p><strong>I will leave this answer here in case you want to come back and study it once you've learned about dictionaries, but see the answers of @kindall and @Yevhen Kuzmovych below! Good work thus far.</strong></p>\n\n<p>As I alluded to in the comments, since you can't use <code>if</code>, <code>elif</code>, or <code>else</code> control flow statements, it looks like a <code>dict</code> lookup should suit you:</p>\n\n<pre><code>def main():\n    grades = {'A': range(90, 101), 'B': range(80, 90), 'C': range(70, 80), 'D': range(60, 70), 'F': range(0, 60)}\n    grade = eval(input(\"Please enter the percent score: \"))\n    return [letter for letter, rnge in grades.items() if grade in rnge][0]\n</code></pre>\n\n<p>Breaking it down:</p>\n\n<pre><code>grades = {'A': range(90, 101), 'B': range(80, 90), 'C': range(70, 80), 'D': range(60, 70), 'F': range(0, 60)}\n</code></pre>\n\n<p>This is a dictionary, in which your designated letter grades are keys and their respective upper and lower bounds are <code>range</code> objects.</p>\n\n<pre><code>[letter for letter, rnge in grades.items() if grade in rnge][0]\n</code></pre>\n\n<p>This is a list comprehension, in which we iterate through each (key, value) tuple in the list returned by <code>grades.items()</code> and see if the submitted grade falls in the range of a given letter grade. Since there is no overlap in the ranges, this list will have one element. The <code>[0]</code> indexing at the end allows us to return <code>str</code> instead of a <code>list</code>.</p>\n\n<p>Try it:</p>\n\n<pre><code>&gt;&gt;&gt; main()\nPlease enter the percent score: 80\n'B'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1479342573, "post_id": 40644728, "comment_id": 68521472, "body": "Could you supply an explanation of what&#39;s going on in line 3 for future readers?"}, {"owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 1, "creation_date": 1479343813, "post_id": 40644728, "comment_id": 68521802, "body": "@not_a_robot hope this will help."}], "tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": true, "score": 1, "last_activity_date": 1479396481, "last_edit_date": 1479396481, "creation_date": 1479342108, "answer_id": 40644728, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements/40644728#40644728", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>Sorry for using magic out of Hogwarts but:</p>\n\n<pre><code>grades = 'FEDCBA'\nscore = int(input('Enter your score: '))\ngrade = ((score // 10) - 4) * (score // 50) * (100 // (score + 1)) + (score // 100) * 5\nprint('Grade is', grades[grade])\n</code></pre>\n\n<p>works from 0 to 199 (90-199 is an A)</p>\n\n<p>I'll try to explain 3rd line.</p>\n\n<p><code>(score // 10) - 4)</code> helps us find grade from 50 to 99 as index in <code>grades</code> string.</p>\n\n<p><code>* (score // 50)</code> makes all scores from 0 to 49 evaluate to <code>0</code> (index of 'F')</p>\n\n<p><code>* (100 // (score + 1)) + (score // 100) * 5</code> makes all scores from 100 to 199 evaluate to 5 (index of 'A')</p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1479412555, "last_edit_date": 1479412555, "creation_date": 1479342184, "answer_id": 40644736, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements/40644736#40644736", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>You've got a great start:</p>\n\n<pre><code>gradingScale = [\"F\", \"F\", \"F\" , \"F\" , \"F\" , \"F\", \"F\", \"D\", \"C\", \"B\", \"A\"]\n</code></pre>\n\n<p>This is a list of 11 letter grades. Your scores range from 0 to 100. How might you map a range of 101 possible grades (0 to 100) to those items? Maybe by dividing by 10 and throwing away the remainder:</p>\n\n<pre><code>print(gradingScale[grade // 10])\n</code></pre>\n\n<p>This doesn't work quite right though: 70 should be a C but comes out as D. 99 should be an A but comes out as B. Only 100 comes out as A when 90-100 should be A.</p>\n\n<p>The answer here is that there are two \"bins\" of 10 that should be an A. 90-99, and 100-109 (although we will only use 100 out of that bin). So, we just need to shift things down: take one of the Fs off the start and add an A to the end of the grading scale:</p>\n\n<pre><code>gradingScale = [\"F\", \"F\" , \"F\" , \"F\" , \"F\", \"F\", \"D\", \"C\", \"B\", \"A\", \"A\"]\n</code></pre>\n\n<p>And now it works!</p>\n\n<p>To simplify the code a little, we can take advantage of the fact that the letter grades are single characters, and also that strings can be indexed like lists (you get a single character) and so <code>gradingScale</code> can just be a simple string:</p>\n\n<pre><code>gradingScale = \"FFFFFFDCBAA\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8233380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff57b0eab02464a6fdd00a38d62486c?s=128&d=identicon&r=PG&f=1", "display_name": "rbazigar", "link": "https://stackoverflow.com/users/8233380/rbazigar"}, "is_accepted": false, "score": 0, "last_activity_date": 1498759599, "last_edit_date": 1498759599, "creation_date": 1498759425, "answer_id": 44832117, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements/44832117#44832117", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>Illustrating a program that provides a grade for a score:</p>\n\n<pre><code>def main():\n    print \"Provides a grade as per the range of marks\"\n    score=input(\"Enter the exam score: \")\n\n    gr=\"FFFFFFDCBAA\"\n    pos=gr[score/10]\n    print \"The grade obtained is: \",pos\n\nmain()    \n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7170253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83518135a851a78fad24a6da18447b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Potter", "link": "https://stackoverflow.com/users/7170253/harry-potter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "accepted_answer_id": 40644728, "answer_count": 5, "score": -3, "last_activity_date": 1498759599, "creation_date": 1479340684, "last_edit_date": 1479341335, "question_id": 40644492, "link": "https://stackoverflow.com/questions/40644492/grading-scale-in-python-without-decision-statements", "title": "Grading Scale in Python Without Decision Statements", "body": "<p>I am trying to create a program in python 3 that will take a percentage score and print out the letter grade based on the grading scale 90-100:A,80-89:B,70-79:C,60-69:D,&lt;60:F using strings and lists</p>\n\n<pre><code>#gradeScale.py\n#This program takes a percent score and tells the user what letter grade it is based on the grading scale\n\ndef main():\n    print(\"This program takes a percent score and tells the user what letter grade it is based on the grading scale\")\n    gradingScale = [\"F\",\"F\",\"F\",\"F\",\"F\",\"F\",\"F\",\"D\",\"C\",\"B\",\"A\"]\n    grade = eval(input(\"Please enter the percent score: \"))\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "c++", "c", "jupyter-notebook", "jupyterhub"], "answers": [{"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1479376554, "post_id": 40651615, "comment_id": 68534692, "body": "Oh, thanks for the good news! I would really appreciate it if you could backup your answer with some reference that supports it."}], "tags": [], "owner": {"reputation": 26037, "user_id": 542190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bb1f122c476561bb9a98a1523e8b5e?s=128&d=identicon&r=PG", "display_name": "filmor", "link": "https://stackoverflow.com/users/542190/filmor"}, "is_accepted": true, "score": 1, "last_activity_date": 1479377181, "last_edit_date": 1479377181, "creation_date": 1479376300, "answer_id": 40651615, "question_id": 40644469, "link": "https://stackoverflow.com/questions/40644469/is-jupyterhub-kernel-safe-across-users/40651615#40651615", "title": "Is JupyterHub kernel safe across users?", "body": "<p>Even if you were using straight Jupyter Notebook instead of JupyterHub, each kernel is a single process, that runs kind of independent of the notebook server. Crashes of individual kernels will not take down the notebook server.</p>\n\n<p>Check out the <a href=\"http://jupyter.readthedocs.io/en/latest/architecture/how_jupyter_ipython_work.html\" rel=\"nofollow noreferrer\">architecture documentation</a>. We've been running a setup with a single Jupyter Notebook instance (not even JupyterHub, because Windows :/) for about 3 years now. The only problems occuring are due to resource constraints (e.g. single kernel takes up a lot of memory), but that's solvable on both the OS and organisational level.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 40651615, "answer_count": 1, "score": 1, "last_activity_date": 1479377181, "creation_date": 1479340597, "last_edit_date": 1479376082, "question_id": 40644469, "link": "https://stackoverflow.com/questions/40644469/is-jupyterhub-kernel-safe-across-users", "title": "Is JupyterHub kernel safe across users?", "body": "<p>I'm using JupyterHub to share computational power of a big computer among some users. The software that's primarily used is a <code>ctypes</code> extension Python script that uses a sophisticated C/C++ code. This code isn't invulnerable to memory problems and crashes.</p>\n\n<p><strong>My question is:</strong> If a low-level problem happens with one user and his kernel gets, say, a segmentation fault, will that crash the main server by design and get all users to lose their kernel information? Or is it designed to create a new server for every user that logs in, so that such problems don't happen?</p>\n"}, {"tags": ["python", "sql", "ssh", "sqlalchemy", "paramiko"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 238274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f8232964b0477df7a071574b449046?s=128&d=identicon&r=PG", "display_name": "agonen", "link": "https://stackoverflow.com/users/238274/agonen"}, "edited": false, "score": 0, "creation_date": 1542851279, "post_id": 44739471, "comment_id": 93720058, "body": "take look here <a href=\"https://github.com/pahaz/sshtunnel/issues/92\" rel=\"nofollow noreferrer\">github.com/pahaz/sshtunnel/issues/92</a> it might help you to do via python"}, {"owner": {"reputation": 2009, "user_id": 7756971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfeb91faf8bd3097e6f2a65de234b5f?s=128&d=identicon&r=PG&f=1", "display_name": "gamechanger17", "link": "https://stackoverflow.com/users/7756971/gamechanger17"}, "edited": false, "score": 0, "creation_date": 1572631053, "post_id": 44739471, "comment_id": 103630793, "body": "@blep: does it worked. i am facing the same issue as mentioned here. <a href=\"https://www.reddit.com/r/mongodb/comments/dq6kwt/how_to_do_ssh_forwarding_in_compassmongodb_client/\" rel=\"nofollow noreferrer\">reddit.com/r/mongodb/comments/dq6kwt/&hellip;</a>"}], "tags": [], "owner": {"reputation": 115, "user_id": 6412017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b71b3337a1f219aec8e0841bc74f2d?s=128&d=identicon&r=PG&f=1", "display_name": "blep", "link": "https://stackoverflow.com/users/6412017/blep"}, "is_accepted": true, "score": 6, "last_activity_date": 1498327797, "creation_date": 1498327797, "answer_id": 44739471, "question_id": 40644407, "link": "https://stackoverflow.com/questions/40644407/ssh-tunnel-forwarding-with-jump-host-and-remote-database/44739471#44739471", "title": "SSH tunnel forwarding with jump host and remote database", "body": "<p>I figured it out. It works with a combination of ssh config settings and the SSHTunnelForwarder context manager from the <a href=\"https://sshtunnel.readthedocs.io/en/latest/\" rel=\"noreferrer\">sshtunnel</a> library.</p>\n\n<p><a href=\"https://i.stack.imgur.com/94xHh.png\" rel=\"noreferrer\">Using the following model and naming conventions</a>:</p>\n\n<p><code>[A: local host] -&gt; [B: jump host] -&gt; [C: target host] =&gt; [D: RDS MySQL host]</code></p>\n\n<p>I set up my ~/.ssh/config to get from A to C through B:</p>\n\n<pre><code>Host C_ssh_shortcut\n    HostName C_host\n    User C_user\n    Port 22\n    ForwardAgent yes\n    ProxyCommand ssh B_user@B_host -W %h:%p\n</code></pre>\n\n<p>I added the key/keys I used to log in to B and C to my ssh-agent:</p>\n\n<pre><code>ssh-add\n</code></pre>\n\n<p>And finally I set up SSHTunnelForwarder:</p>\n\n<pre><code>import sqlalchemy\nfrom sshtunnel import SSHTunnelForwarder\n\nwith SSHTunnelForwarder(\n    \"C_ssh_shortcut\",                     # The SSHTunnelForwarder \"ssh_address_or_host\" argument, which takes care of bypassing B through the ProxyCommand set up in ~/.ssh/config\n    remote_bind_address=(D_host, 3306),   # Points to your desired destination, ie. database host on 3306, which is the MySQL port\n    local_bind_address=('', 1111)         # Gives a local way to access this host and port on your machine. '' is localhost / 127.0.0.1, 1111 is an unused port\n) as server:\n    connection_string = \"mysql+pymysql://D_user:D_password@localhost:1111/D_dbname\"  # note that D_host and D_port were replaced by the host and port defined in \"local_bind_address\"\n    engine = sqlalchemy.create_engine(connection_string)\n    # do your thing\n</code></pre>\n\n<p>From here, I am able to use my engine as usual to interact with my database. </p>\n"}, {"tags": [], "owner": {"reputation": 2909, "user_id": 2828176, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/alwkx.png?s=128&g=1", "display_name": "Ferdous Wahid", "link": "https://stackoverflow.com/users/2828176/ferdous-wahid"}, "is_accepted": false, "score": 1, "last_activity_date": 1599112510, "last_edit_date": 1599112510, "creation_date": 1579631435, "answer_id": 59847170, "question_id": 40644407, "link": "https://stackoverflow.com/questions/40644407/ssh-tunnel-forwarding-with-jump-host-and-remote-database/59847170#59847170", "title": "SSH tunnel forwarding with jump host and remote database", "body": "<p>This code work for me</p>\n<pre><code>import pymysql\nimport paramiko\nfrom paramiko import SSHClient\nfrom sshtunnel import SSHTunnelForwarder\nfrom sqlalchemy import create_engine\n\n#ssh config\nmypkey = paramiko.RSAKey.from_private_key_file('your/user/location/.ssh/id_rsa')             \nssh_host = 'your_ssh_host'\nssh_user = 'ssh_host_username'\nssh_port = 22  \n\n#mysql config         \nsql_hostname = 'your_mysql_host name'\nsql_username = 'mysql_user'\nsql_password = 'mysql_password'\nsql_main_database = 'your_database_name'\nsql_port = 3306\nhost = '127.0.0.1'\n\n\n\nwith SSHTunnelForwarder(\n        (ssh_host, ssh_port),\n        ssh_username=ssh_user,\n        ssh_pkey=mypkey,\n        remote_bind_address=(sql_hostname, sql_port)) as tunnel:              \n\n    engine = create_engine('mysql+pymysql://'+sql_username+':'+sql_password+'@'+host+':'+str(tunnel.local_bind_port)+'/'+sql_main_database)\n    connection = engine.connect()\n    print('engine creating...')\n    sql = text(&quot;&quot;&quot; select * from nurse_profiles np limit 50&quot;&quot;&quot;)\n    nurseData = connection.execute(sql)\n    connection.close()\n\n\n    nurseList = []\n    for row in nurseData:\n        nurseList.append(dict(row))\n    print('nurseList len: ', len(nurseList))\n    print('nurseList: ', nurseList)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 10517290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ED9Go-pXxnU/AAAAAAAAAAI/AAAAAAAAAIo/iGhzb-V3LV0/photo.jpg?sz=128", "display_name": "Wanderational", "link": "https://stackoverflow.com/users/10517290/wanderational"}, "is_accepted": false, "score": 0, "last_activity_date": 1593793237, "creation_date": 1593793237, "answer_id": 62719276, "question_id": 40644407, "link": "https://stackoverflow.com/questions/40644407/ssh-tunnel-forwarding-with-jump-host-and-remote-database/62719276#62719276", "title": "SSH tunnel forwarding with jump host and remote database", "body": "<p>I use this code for PostgreSQL database and it works. I am sure it will work too if use MySQL database. I change the PostgreSQL database part here to MySQL, here is the code:</p>\n<pre><code>import pymysql\nimport paramiko\nimport sqlalchemy\nfrom sshtunnel import SSHTunnelForwarder\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\nimport pandas as pd\n\n#SSH config\nmypkey = paramiko.RSAKey.from_private_key_file('id_rsa_file', password = 'id_rsa_password')\nssh_host = 'your_ssh_host'\nssh_user = 'your_ssh_host_username'\nssh_port = 22\n\n#SQL config         \nsql_hostname = 'your_sql_host_name'\nsql_username = 'sql_user'\nsql_password = 'sql_password'\nsql_main_database = 'your_database_name'\nsql_port = 3306\nhost = '127.0.0.1'\n\nwith SSHTunnelForwarder((ssh_host, ssh_port),\n                        ssh_username=ssh_user,\n                        ssh_pkey=mypkey,\n                        remote_bind_address=(sql_hostname, sql_port)) as tunnel:\n    #Connect to SQL\n    local_port = str(tunnel.local_bind_port)\n    engine = create_engine(f'mysql+pymysql://{sql_username}:{sql_password}@127.0.0.1:' + local_port +f'/{sql_main_database}')\n    Session = sessionmaker(bind = engine)\n    session = Session()\n    print('Database session created!')\n\n    #To inspect the schemas and tables in your database\n    inspector = inspect(engine)\n    schemas = inspector.get_schema_names()\n    for schema in schemas:\n        print(f'schema:{schema}')\n        for table_name in inspector.get_table_names(schema = schema):\n            print(f'table: {table_name}')\n\n    query_code = &quot;your query code from SQL here&quot;\n\n    #Execute query code\n    exec_database = session.execute(query_code)\n    df = pd.DataFrame(exec_database.fetchall())\n    df.columns = exec_database.keys()\n    \n    print('Dataframe created from database!')\n    session.close()\n    engine.dispose()\n</code></pre>\n<p>You can also change the part below:</p>\n<pre><code>#Execute query code    \nexec_database = session.execute(query_code)\ndf = pd.DataFrame(exec_database.fetchall())\ndf.columns = exec_database.keys()\n</code></pre>\n<p>to read SQL query directly using pandas using code below:</p>\n<pre><code>df = pd.read_sql_query(query_code, engine)\n</code></pre>\n<p>Additionally, part of code below:</p>\n<pre><code>#To inspect the schemas and tables in your database\ninspector = inspect(engine)\nschemas = inspector.get_schema_names()\nfor schema in schemas:\n    print(f'schema:{schema}')\n    for table_name in inspector.get_table_names(schema = schema):\n        print(f'table: {table_name}')\n</code></pre>\n<p>is only necessary when you don't have any idea what schemas and tables are in your database. You can use those codes above to inspect and show them.</p>\n"}], "owner": {"reputation": 115, "user_id": 6412017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b71b3337a1f219aec8e0841bc74f2d?s=128&d=identicon&r=PG&f=1", "display_name": "blep", "link": "https://stackoverflow.com/users/6412017/blep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6529, "favorite_count": 4, "accepted_answer_id": 44739471, "answer_count": 3, "score": 4, "last_activity_date": 1599112510, "creation_date": 1479340306, "last_edit_date": 1498328614, "question_id": 40644407, "link": "https://stackoverflow.com/questions/40644407/ssh-tunnel-forwarding-with-jump-host-and-remote-database", "title": "SSH tunnel forwarding with jump host and remote database", "body": "<p>I have a remote MySQL database hosted on Amazon RDS (\"D\"). For security purposes, it is only accessible through a remote server (\"C\"). C is accessible via ssh through a jump host \"B\". I need a double ssh tunnel to then access a remote SQL host.</p>\n\n<pre><code>[A: local host] -&gt; [B: jump host] -&gt; [C: target host] =&gt; [D: RDS MySQL host]\n</code></pre>\n\n<p>I would like to access D through Python, using paramiko and/or sshtunnel. All of the information I can find involves:</p>\n\n<ul>\n<li>a single ssh tunnel and a remote SQL host (ex. A -> C => D, no jump host)\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/31890160/6412017\">ssh first with mysqldb in python</a></li>\n<li><a href=\"https://stackoverflow.com/a/33016779/6412017\">python mysql connectivity via ssh</a></li>\n</ul></li>\n<li>a double ssh tunnel to an SQL host (ex. A -> B -> C, D is hosted on C). \n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/31890133/6412017\">Connecting to remote Postgresql database over ssh tunnel using python</a></li>\n<li><a href=\"https://stackoverflow.com/a/19039769/6412017\">Paramiko: Port Forwarding Around A NAT Router</a></li>\n<li><a href=\"https://stackoverflow.com/a/10432669/6412017\">Nested SSH session with Paramiko</a></li>\n</ul></li>\n</ul>\n\n<p>So far, I'm using paramiko with a proxy command to get from A to C. I can access D by executing a command on C, but not by connecting with mysqldb or sqlalchemy (my ultimate goal).</p>\n\n<p>My current code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import paramiko\n\nssh = paramiko.SSHClient()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nproxy = paramiko.ProxyCommand(\"ssh -A B_username@B_host -W C_host:12345\")\nssh.connect(\"C_host\", username=\"C_username\", sock=proxy)\n\nstdin, stdout, stderr = ssh.exec_command(\"mysql -u D_username -p D_password -h D_host_rds\")\nprint(\"STDOUT:\\n{}\\n\\nSTDERR:\\n{}\\n\".format(stdout.read(), stderr.read()))\n# successfully prints out MySQL welcome screen\n</code></pre>\n\n<p>I'm looking for something like this (modified from example 2 in the <a href=\"https://pypi.python.org/pypi/sshtunnel\" rel=\"nofollow noreferrer\">sshtunnel docs</a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import paramiko\nfrom sshtunnel import SSHTunnelForwarder\n\nwith SSHTunnelForwarder(\n    intermediate = {\n        (\"B_host\", 22),\n        ssh_username = \"B_username\",\n        ssh_password = \"B_password\")},\n    remote = {\n        (\"C_host\", 12345),\n        ssh_username = \"C_username\",\n        ssh_password = \"C_password\")},\n    remote_bind_address=(\"D_host_rds\", 3306),\n    local_bind_address=(\"0.0.0.0\", 3307)) as server:\n\n    conn = MySQLdb.connect(\n        user = \"D_username\",\n        passwd = \"D_password\",\n        db = \"my_database\",\n        host = \"127.0.0.1\",\n        port = 3307)\n</code></pre>\n\n<p><strong>tl;dr:</strong> How do I forward a port through two ssh jumps in Python?</p>\n"}, {"tags": ["python", "python-3.x", "average"], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1479340747, "creation_date": 1479340747, "answer_id": 40644503, "question_id": 40644397, "link": "https://stackoverflow.com/questions/40644397/create-a-python-function-that-calculates-the-average-of-3-numbers/40644503#40644503", "title": "Create a Python function that calculates the average of 3 numbers", "body": "<pre><code>\"%0.1f\"%my_float\n#or\n\"{0:0.1f}\".format(my_float)\n#or\n\"{my_float:0.1f}\".format(my_float=my_float)\n</code></pre>\n\n<p>will print a float with 1 decimal place see also <a href=\"https://docs.python.org/2/library/string.html#format-specification-mini-language\" rel=\"nofollow noreferrer\">python format strings</a></p>\n"}, {"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1479342126, "post_id": 40644706, "comment_id": 68521355, "body": "good solid answer ... to bad you wont be available during the test :P +1"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1479342276, "post_id": 40644706, "comment_id": 68521390, "body": "No? We used to have open internet exams :D maybe not in SD1, though"}, {"owner": {"reputation": 17, "user_id": 7170164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f26ee816fa245ee23887f339b0a811?s=128&d=identicon&r=PG&f=1", "display_name": "Victoria", "link": "https://stackoverflow.com/users/7170164/victoria"}, "edited": false, "score": 0, "creation_date": 1479343642, "post_id": 40644706, "comment_id": 68521749, "body": "So my new code is...     &gt;def average(temp_one, temp_two, temp_three):       &gt;&gt;return (temp_one, temp_two, temp_three) / 3      &gt;&gt;&gt;avg= average(temp_one, temp_two, temp_three)  But it gives me an invalid syntax error highlighting the &quot;avg&quot; above."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479343773, "post_id": 40644706, "comment_id": 68521789, "body": "Do the three temp variables exist at that point, i.e. have you stored your input in under those names? Have you checked your code indentation, it must be consistent throughtout your file."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1479344566, "post_id": 40644706, "comment_id": 68522007, "body": "or us <code>+</code> instead of <code>,</code> in your return ... :P"}, {"owner": {"reputation": 17, "user_id": 7170164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f26ee816fa245ee23887f339b0a811?s=128&d=identicon&r=PG&f=1", "display_name": "Victoria", "link": "https://stackoverflow.com/users/7170164/victoria"}, "edited": false, "score": 0, "creation_date": 1479352865, "post_id": 40644706, "comment_id": 68524055, "body": "I figured it out! Thank you all for your help :)"}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": true, "score": 2, "last_activity_date": 1479342435, "last_edit_date": 1479342435, "creation_date": 1479341950, "answer_id": 40644706, "question_id": 40644397, "link": "https://stackoverflow.com/questions/40644397/create-a-python-function-that-calculates-the-average-of-3-numbers/40644706#40644706", "title": "Create a Python function that calculates the average of 3 numbers", "body": "<p><strong>1.</strong> Your calculation is doing unnecessary casts to <code>int</code> which loses some precision. In fact, it truncates decimal places, thus lowers your average artificially.</p>\n\n<p><strong>2.</strong> You are not using the function you have written. Instead you repeat your calculation code with integer division <code>//</code>. Note that:     </p>\n\n<pre><code>5 /  2 == 2.5  # floating point division\n5 // 2 == 2    # integer division\n</code></pre>\n\n<p>so here, you are losing information as well.</p>\n\n<p><strong>3.</strong> You should format your output to one decimal place. This is best done using <a href=\"https://docs.python.org/3.4/library/string.html#format-specification-mini-language\" rel=\"nofollow noreferrer\">string formatting</a></p>\n\n<p><strong>Thus:</strong></p>\n\n<pre><code>def average(temp_one, temp_two, temp_three): \n  return (temp_one + temp_two + temp_three) / 3  \n  # why cast to int and lose precision\n\n# read your 3 float inputs  ...\n\navg = average(temp_one, temp_two, temp_three)  # actually use your function\nprint('{:.1f}'.format(avg))  # format output\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7170164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f26ee816fa245ee23887f339b0a811?s=128&d=identicon&r=PG&f=1", "display_name": "Victoria", "link": "https://stackoverflow.com/users/7170164/victoria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6299, "favorite_count": 0, "accepted_answer_id": 40644706, "answer_count": 2, "score": 1, "last_activity_date": 1479342435, "creation_date": 1479340230, "question_id": 40644397, "link": "https://stackoverflow.com/questions/40644397/create-a-python-function-that-calculates-the-average-of-3-numbers", "title": "Create a Python function that calculates the average of 3 numbers", "body": "<p>I am trying to create a Python function that calculates the average of 3 temperatures. I am a beginner at Python so I wanted to make sure I am on the right track.<br>\nThis is what I have so far:  </p>\n\n<pre><code>def average(temp_one, temp_two, temp_three): \n  avg = (int(temp_one) + int(temp_two) + int(temp_three))/3\n  return avg\n</code></pre>\n\n<p>Then I have to use the function created that prompts for 3 temperatures and calculates the average. The average output must include one decimal place.</p>\n\n<pre><code>def average(temp_one, temp_two, temp_three): \n  avg = (int(temp_one) + int(temp_two) + int(temp_three))/3\n  return (avg)\n\ntemp_one = float(input(\u201cEnter temperature one:\u201d))\ntemp_two = float(input(\u201cEnter temperature two:\u201d))\ntemp_three = float(input(\u201cEnter temperature three:\u201d))\naverage = ( temp_one+ temp_two + temp_three ) // 3\nprint (average(temp_one, temp_two, temp_three))\n</code></pre>\n\n<p>For this part I am not very sure of.. Any help is appreciated, thank you!</p>\n"}, {"tags": ["python", "list", "dictionary", "tuples"], "comments": [{"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 2, "creation_date": 1479340522, "post_id": 40644393, "comment_id": 68520849, "body": "why not instead of a tuple use a counter dic and you can add the new values a lot easier"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 4, "creation_date": 1479340535, "post_id": 40644393, "comment_id": 68520854, "body": "Must that really be &quot;a list of tuples&quot;? Your job would be easier if that were a dictionary, such as <code>{&#39;New York&#39;: 546, &#39;Chicago&#39;: 675}</code>."}, {"owner": {"reputation": 1200, "user_id": 2898989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e5e2681a07ec790e1de3c65a5757e72c?s=128&d=identicon&r=PG&f=1", "display_name": "Xodarap777", "link": "https://stackoverflow.com/users/2898989/xodarap777"}, "edited": false, "score": 0, "creation_date": 1479341870, "post_id": 40644393, "comment_id": 68521271, "body": "But it is a dictionary.  Or do you mean I should have a dictionary of dictionaries instead of a dictionary of tuple lists?  I get confused at creating {&#39;Apples&#39;: {City1: Number1, City2: Number2}}.  In fact, later in the code, I am  making a dictionary out of the tuples, but only in a way where I can digest one at a time."}], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 1, "last_activity_date": 1479341041, "creation_date": 1479341041, "answer_id": 40644555, "question_id": 40644393, "link": "https://stackoverflow.com/questions/40644393/adding-values-or-adding-new-tuples-in-python/40644555#40644555", "title": "Adding values or adding new tuples in Python", "body": "<p>You want to check for the case where the city is in the list of cities:</p>\n\n<pre><code>city in [x[0] for x in city_fruitd[fruit]]\n</code></pre>\n\n<p>Then find this city index</p>\n\n<pre><code>index = [city_fruitd[fruit].index(x) for x in city_fruitd[fruit] if city == x[0]][0]\n</code></pre>\n\n<p>And assign it the added value</p>\n\n<pre><code>city_fruitd[fruit][index] = [(city, city_fruitd[fruit][index][1] + count)]\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>if fruit not in city_fruitd:\n    city_fruitd[fruit] = [(city, count)]\nelif city in [x[0] for x in city_fruitd[fruit]]:\n    index = [city_fruitd[fruit].index(x) for x in city_fruitd[fruit] if city == x[0]][0]\n    city_fruitd[fruit][index] = [(city, city_fruitd[fruit][index][1] + count)]\nelse:\n    city_fruitd[fruit] += [(city, count)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "is_accepted": false, "score": 1, "last_activity_date": 1479342340, "creation_date": 1479342340, "answer_id": 40644751, "question_id": 40644393, "link": "https://stackoverflow.com/questions/40644393/adding-values-or-adding-new-tuples-in-python/40644751#40644751", "title": "Adding values or adding new tuples in Python", "body": "<p>Here is an approach using defaultdict as discussed in the comments:</p>\n\n<pre><code>from collections import defaultdict\n\n#Initialize the defualt dict\ntupdict = defaultdict(int)\n\n#Add existing tuple list to default dict\ntuplist = [('New York', 546), ('Chicago', 675)]\ntupdict.update(tuplist)\n\n#Add tuples one at a time to tupdict\ntup3 = ('New York', 655)\ntup4 = ('Los Angeles', 1273)\n\n#Simple function to make it easier to add tuples\ndef add_tup(tupdict, to_add):\n    k,v = to_add\n    tupdict[k] += v\n\nadd_tup(tupdict, tup3)\nadd_tup(tupdict, tup4)\n\n#Convert dict back to tuples\ntuplist = tupdict.items()\nprint(tuplist)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[('New York', 1201), ('Los Angeles', 1273), ('Chicago', 675)]\n</code></pre>\n"}], "owner": {"reputation": 1200, "user_id": 2898989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e5e2681a07ec790e1de3c65a5757e72c?s=128&d=identicon&r=PG&f=1", "display_name": "Xodarap777", "link": "https://stackoverflow.com/users/2898989/xodarap777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 40644555, "answer_count": 2, "score": 0, "last_activity_date": 1479342340, "creation_date": 1479340216, "question_id": 40644393, "link": "https://stackoverflow.com/questions/40644393/adding-values-or-adding-new-tuples-in-python", "title": "Adding values or adding new tuples in Python", "body": "<p>I have a list of tuples such as:</p>\n\n<pre><code>tuplist = [('New York', 546), ('Chicago', 675)]\n</code></pre>\n\n<p>And new tuples to either add to the list or sum, according to the [0] index:</p>\n\n<pre><code>tup3 = ('New York', 655)\ntup4 = ('Los Angeles', 1273)\n</code></pre>\n\n<p>To get:</p>\n\n<pre><code>[('New York', 1201), ('Chicago', 675), ('Los Angeles', 1273)]\n</code></pre>\n\n<p>I'm creating these lists as growing values in a dict as I loop through a CSV.  So if the above represents <code>{'Apples': [(City1, Number1), (City2, Number2)]}</code>,  I currently use:</p>\n\n<pre><code>if fruit not in city_fruitd:\n    city_fruitd[fruit] = [(city, count)]\nelse:\n    city_fruitd[fruit] += [(city, count)]\n</code></pre>\n\n<p>How do I instead check for existing cities and sum accordingly if the city already exists?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1479340302, "post_id": 40644386, "comment_id": 68520776, "body": "Why are you defining a method inside of a loop? There&#39;s no way that efficient."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1479340407, "post_id": 40644386, "comment_id": 68520811, "body": "That&#39;s illegible. Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> and please edit that code into your question."}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1479348968, "post_id": 40644386, "comment_id": 68523183, "body": "Those tiny, inscrutable variable names remind me of the TI BASIC programs I hand-copied from magazines into my <a href=\"https://en.wikipedia.org/wiki/Texas_Instruments_TI-99/4A\" rel=\"nofollow noreferrer\">TI-99/4A</a> back in the 1980s.  Self-documenting names really are worth the extra keystrokes, especially if you ever have to do more work on the code later."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1479342536, "creation_date": 1479342536, "answer_id": 40644773, "question_id": 40644386, "link": "https://stackoverflow.com/questions/40644386/variable-values-not-getting-into-inner-for-loop/40644773#40644773", "title": "Variable values not getting into inner for loop", "body": "<p>I deleted my earlier answer; it's not the main problem you're having.</p>\n\n<p>You traced the wrong values: <strong>d</strong> and <strong>dnew</strong> do, indeed, change.  However, they are not part of the data flow for the values you're worried about.</p>\n\n<p>In the upper program, <strong>d</strong> depends exclusively on its starting value and increment value, both of them 0.1, and <strong>dd</strong> doesn't change.  <strong>p</strong> depends exclusively on the values of <strong>a</strong> and <strong>b</strong>, which also don't change.</p>\n\n<p>Yes, you do some nice work to compute FA, FB, FP -- but then you hit the bottom of the loop, you don't save them anywhere, and then you overwrite tehm on the next loop.</p>\n\n<p>If the lower program, you have the same problem with <strong>As</strong> and <strong>E</strong>: you never change the parameters on which they depend (that's all in <strong>yvs</strong>, which you never print out), so the outputs are the same on every loop.</p>\n\n<p>Since you are using one- and two-letter variables and haven't documented your code, I don't have a good idea of how to fix this: I have little idea what your program is supposed to do, although it appears to want to converge some computational series.</p>\n"}], "owner": {"reputation": 3, "user_id": 7170211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fb99187da725712c72c1c579a9a777?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Carvajal", "link": "https://stackoverflow.com/users/7170211/jose-carvajal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 40644773, "answer_count": 1, "score": -3, "last_activity_date": 1479342619, "creation_date": 1479340183, "last_edit_date": 1479342619, "question_id": 40644386, "link": "https://stackoverflow.com/questions/40644386/variable-values-not-getting-into-inner-for-loop", "title": "Variable values not getting into inner for loop", "body": "<p>My inner for loop is not using new values from the outer loop.\nWhat's wrong, and how do I fix it?</p>\n\n<pre><code>import numpy as np\na = 0.0000001\nb = 15.\nd = 0.1\nTOL = 1.0e-6\na1 = []\ndd = 0.1\nda1 = []\nfor i in range(0,10):\n    def f(v):\n        return np.cosh(d * v) - (1./v) * np.sinh(d * v) - 1.\n    FA = f(a)\n    FB = f(b)\n    for I in range(0,1000):\n        p = a + (b - a) / 2.0\n        FP = f(p)\n        if FA == 0 or (b - a)/2.0 &lt; TOL:\n            break        \n        I = I + 1\n        if FA * FP &gt; 0:\n            a = p\n            FA = FP\n        if FA * FP &lt; 0:\n            b = p\n    a1.append(p) \n    da1.append(d)\n    d = d + dd\nprint a1\nprint da1\n</code></pre>\n\n<p>Here is a second implementation.  Variable <strong>d</strong> shows new values, but the inner loop keeps giving me the same result result, like it is not registering the new <strong>d</strong> value.</p>\n\n<pre><code>import numpy as np\na = 0.00001\na1 = []\ndd = 0.1\nda = 1.e-5\nd = 0.1\nyvs=[]\nds = []\nEE = []\nwhile d &lt;= 1.:\n    dnew = d\n    print dnew\n    for i in range(0,1000000):\n        dnew = d\n        yv = np.cosh(dnew * a) - (1./a) * np.sinh(dnew * a) - 1.\n        yvs.append(yv)\n        a = a + da\n        a1.append(a)\n        i = i + 1\n    for ii in range(0,999999):\n        As = (a1[ii]+a1[ii+1])/2.\n        E = -1. * As**2    \n        if yvs[ii]*yvs[ii+1] &lt; 0:\n            EE.append(E)\n            print As, E\n        ii = ii + 1\n    d = dnew + dd\n</code></pre>\n"}, {"tags": ["python", "websocket", "tornado"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1479393059, "post_id": 40644333, "comment_id": 68546143, "body": "Seem you figured this out, seeing your answer in <a href=\"http://stackoverflow.com/a/40655053/794749\">this question</a>. You should answer your own question here and then accept it."}, {"owner": {"reputation": 82, "user_id": 7166286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a278551d889a0a1197d79ac43fdd316d?s=128&d=identicon&r=PG&f=1", "display_name": "Kjub", "link": "https://stackoverflow.com/users/7166286/kjub"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1479436572, "post_id": 40644333, "comment_id": 68567774, "body": "Yes, but it&#39;s a bit more tricky, because the method should be executed only once; independently of how many clients are connected."}], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 7166286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a278551d889a0a1197d79ac43fdd316d?s=128&d=identicon&r=PG&f=1", "display_name": "Kjub", "link": "https://stackoverflow.com/users/7166286/kjub"}, "is_accepted": true, "score": 1, "last_activity_date": 1479442284, "creation_date": 1479442284, "answer_id": 40669230, "question_id": 40644333, "link": "https://stackoverflow.com/questions/40644333/access-tornado-websocket-class-method-from-another-class/40669230#40669230", "title": "Access tornado websocket class method from another class", "body": "<p>Alright, I used <code>connections = []</code> (instead of <code>connections = set()</code>, because it's accessible through indexing) outside the WebsocketHandler. To add client connections on open to the list I use <code>connections.append(self)</code>, to remove them on close <code>connections.remove(self)</code>.</p>\n\n<p>Calling the method:</p>\n\n<pre><code>if len(connections) &gt; 0:\n    connections[0].toggle()\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 7166286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a278551d889a0a1197d79ac43fdd316d?s=128&d=identicon&r=PG&f=1", "display_name": "Kjub", "link": "https://stackoverflow.com/users/7166286/kjub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 40669230, "answer_count": 1, "score": 0, "last_activity_date": 1479442284, "creation_date": 1479339854, "question_id": 40644333, "link": "https://stackoverflow.com/questions/40644333/access-tornado-websocket-class-method-from-another-class", "title": "Access tornado websocket class method from another class", "body": "<p>I'm new to stack overflow, because I regularly found here what I've been looking for. But this time, I don't know how to handle it. I set up a tornado websocket server and would like to access the websocket thread out of another class, but unfortunately, the websocket class requires three different arguments and isn't accessable the usual way. </p>\n\n<pre><code>class WebSocketHandler(tornado.websocket.WebSocketHandler):\n    def open(self):      \n        self.loop()\n\n    def on_message(self, message):\n        #do something\n\n    def on_close(self):\n        #do something else\n\n    def loop(self):\n        pass\n\n    def toggle(self):\n        #execute\n\nclass EventHandler: \n    def __init__(self):\n        self.listener()\n\n    def listener(self):        \n        def callback(channel):\n            wsHandler = WebSocketHandler()\n            wsHandler.toggle()\n\n        GPIO.add_event_detect(channel, GPIO.RISING, callback = callback, bouncetime = 1000)\n\ndef main():\n    EventHandler()\n\n    application = tornado.web.Application([\n        (r\"/\", WebSocketHandler),\n    ])\n    server = tornado.httpserver.HTTPServer(application)\n    server.listen(8888)\n    io_loop = tornado.ioloop.IOLoop.current()\n    io_loop.start()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>The reason why I have multiple classes is that the server should listen to input events, even if there is no client connected. But I have to transfer the input data via websocket, if there is one. I read about the add_callback method, but I'm not sure whether it's a useful way.</p>\n\n<p>I'm glad about any solution.\nThanks a lot!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479340716, "post_id": 40644297, "comment_id": 68520916, "body": "use <code>print()</code> to display values in variables and some comments to see what&#39;s going on in code when run it."}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 1, "last_activity_date": 1479340711, "creation_date": 1479340711, "answer_id": 40644497, "question_id": 40644297, "link": "https://stackoverflow.com/questions/40644297/simple-python-game-doesnt-work-no-matter-what/40644497#40644497", "title": "simple Python game doesn&#39;t work no matter what", "body": "<p><code>random.sample</code> returns a list, so it will never be equal to the string the user enters.</p>\n\n<p>The lines <code>(cows.append(i)...</code> and <code>(bulls.append(i)...</code> are generators, meaning that they do nothing unless and until they are evaluated. You could technically turn them into list comprehensions by swapping the enclosing parentheses for square brackets, but you would be building up a list for its side effects, which is frowned upon. Instead of putting a <code>list.append</code> in a generator or comprehension, make a comprehension that actually builds the list you want, as they're intended to do. Additionally, since you only want the unique items in the first place, there's no reason to use lists at any point.</p>\n\n<p>There's also no reason to build lists or sets at all, since all you want to do is count up each instance.</p>\n\n<pre><code>import random\n\ndef cb():\n    pc = ''.join(random.sample('123456789',4))\n    while True:\n        guess = input('please enter a 4 digit num: ')\n        if pc==guess:\n            print ('You win!')\n            break\n        bulls = 0\n        cows = 0\n        for character in guess:\n            if character in pc:\n                if guess.index(character) == pc.index(character):\n                    bulls += 1\n                else:\n                    cows += 1\n        print(cows, 'cows and', bulls, 'bulls')\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 7076016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UcEgd.jpg?s=128&g=1", "display_name": "scripter", "link": "https://stackoverflow.com/users/7076016/scripter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 40644497, "answer_count": 1, "score": 0, "last_activity_date": 1479341126, "creation_date": 1479339657, "last_edit_date": 1479340071, "question_id": 40644297, "link": "https://stackoverflow.com/questions/40644297/simple-python-game-doesnt-work-no-matter-what", "title": "simple Python game doesn&#39;t work no matter what", "body": "<p>I been trying to write a Python program that implements the cows bulls game, here's my code:</p>\n\n<pre><code>import random\ndef cb():\n  pc = random.sample('123456789',4)\n  cows = []\n  bulls = []\n  while True:\n    guess = input('please enter a 4 digit num: ')\n    cows = rmd(cows)\n    bulls = rmd(bulls)\n    if pc == guess:\n      print('You win!')\n      break\n    (cows.append(i) for i in pc if i in guess and guess.index(i) == pc.index(i))\n    (bulls.append(i) for i in pc if i in guess and guess.index(i) != pc.index(i))\n    print ('{} cows and {} bulls'.format(len(cows), len(bulls))\n    continue\n</code></pre>\n\n<p>Just the last approach I tried before giving up, before that I wrote more than 50 programs and nothing would work, it would always return 0 cows 0 bulls. I have tried for loops while guess!=pc among hundreds of ideas.. Nothing would work.</p>\n\n<p>rmd is a function that removes duplicate items from a given list by converting it to a set and then converting that set to a list and returns the final list.</p>\n\n<p>It's just a silly game but the fact that nothing works is very depressing..</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 4, "last_activity_date": 1479339703, "creation_date": 1479339703, "answer_id": 40644308, "question_id": 40644291, "link": "https://stackoverflow.com/questions/40644291/how-passing-an-argument-to-a-function/40644308#40644308", "title": "How passing an argument to a function", "body": "<p>The <strong>call</strong> inside your function and <strong>call</strong> outside your function are utterly independent variables.  You have to pass things through the parameter list.</p>\n\n<pre><code>call = 'Duster'\ndef text(call):\n    print(call)\n\ntext(call)\n</code></pre>\n\n<p>Actually, you <em>can</em> use a <em>global</em> variable, but please avoid those.</p>\n\n<p>To illustrate this better, move the lines of your main program together and change the names:</p>\n\n<pre><code>def text(phrase):\n    print(phrase)\n\nname = 'Duster'\ntext(name)\n</code></pre>\n\n<p>Also, the main program of two lines could be just one line:</p>\n\n<pre><code>text('Duster')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3363, "user_id": 2876504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f861d39e1561dc8147fc6442d1235e8?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro C.", "link": "https://stackoverflow.com/users/2876504/alejandro-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1479339787, "creation_date": 1479339787, "answer_id": 40644321, "question_id": 40644291, "link": "https://stackoverflow.com/questions/40644291/how-passing-an-argument-to-a-function/40644321#40644321", "title": "How passing an argument to a function", "body": "<p>It doesn't work because the argument named <code>call</code> takes precedence over the variable named <code>call</code> due to scoping. </p>\n\n<p>You could make this work by using your code and just changing the last line</p>\n\n<pre><code>text(call)\n</code></pre>\n\n<p>Or you could use the variable directly and not an argument</p>\n\n<pre><code>call = 'Duster'\ndef text():\n    print(call)\n\ntext()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6812766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/U8NSo.png?s=128&g=1", "display_name": "Gabriel Moreno", "link": "https://stackoverflow.com/users/6812766/gabriel-moreno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479339944, "creation_date": 1479339618, "last_edit_date": 1479339944, "question_id": 40644291, "link": "https://stackoverflow.com/questions/40644291/how-passing-an-argument-to-a-function", "title": "How passing an argument to a function", "body": "<p>Why doesn't this work?\nWhat would it take for this to work?</p>\n\n<pre><code>call = 'Duster'\ndef text(call):\n    print(call)\n\ntext()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 2, "creation_date": 1479339733, "post_id": 40644288, "comment_id": 68520644, "body": "You are aware of <code>(1&#47;2)^10</code>?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1479339847, "post_id": 40644288, "comment_id": 68520669, "body": "<code>odds = sum &#47; n</code> should probably not be indented there. And you overwrote the <code>n</code> variable with the loop counter"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479340044, "post_id": 40644288, "comment_id": 68520713, "body": "@schwobaseggl: I think OP needs to simulate the flips, not compute the <i>expected</i> value."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1479340266, "post_id": 40644288, "comment_id": 68520767, "body": "@Prune You are probably right. Irhad, Do 10 flips a large number (&gt;10**5) of times. Then divide the number of times you got all 10 heads by that number."}, {"owner": {"reputation": 5, "user_id": 6504780, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xQ1HgfNhl3o/AAAAAAAAAAI/AAAAAAAAANE/7bq-jSFanSM/photo.jpg?sz=128", "display_name": "Irhad Fejzic", "link": "https://stackoverflow.com/users/6504780/irhad-fejzic"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1479340676, "post_id": 40644288, "comment_id": 68520903, "body": "@cricket_007 You are right. Shouldn&#39;t have indented the sum / n"}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1479340705, "post_id": 40644434, "comment_id": 68520914, "body": "In the first snippet, when <code>number != 0</code>, not only should <code>all_heads</code> be set to <code>False</code>, you should also exit the <code>for</code> loop early\u2014especially if you going to simulate doing it a very larger number of times."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1479340784, "post_id": 40644434, "comment_id": 68520935, "body": "You&#39;re correct.  I left that out for simplicity, and a little consistency with the <b>all</b> method later."}, {"owner": {"reputation": 5, "user_id": 6504780, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xQ1HgfNhl3o/AAAAAAAAAAI/AAAAAAAAANE/7bq-jSFanSM/photo.jpg?sz=128", "display_name": "Irhad Fejzic", "link": "https://stackoverflow.com/users/6504780/irhad-fejzic"}, "edited": false, "score": 0, "creation_date": 1479340832, "post_id": 40644434, "comment_id": 68520944, "body": "Didn&#39;t think about using the reverse logic, but seems to be working after I added the part of the code you mentioned. Thanks for the help :D"}, {"owner": {"reputation": 15633, "user_id": 2091169, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/MT8tZ.jpg?s=128&g=1", "display_name": "Jivan", "link": "https://stackoverflow.com/users/2091169/jivan"}, "edited": false, "score": 0, "creation_date": 1479341222, "post_id": 40644434, "comment_id": 68521081, "body": "@Prune the <code>all</code> method <a href=\"https://github.com/python/cpython/blob/master/Python/bltinmodule.c#L275\" rel=\"nofollow noreferrer\">exits the for loop as soon as one element does not satisfy the condition</a>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1479341356, "post_id": 40644434, "comment_id": 68521120, "body": "I&#39;m aware of that.  I&#39;m trying to keep the steps intellectually accessible to the OP."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1479340948, "last_edit_date": 1479340948, "creation_date": 1479340413, "answer_id": 40644434, "question_id": 40644288, "link": "https://stackoverflow.com/questions/40644288/odds-of-coin-flipping-heads-10-times-in-a-row/40644434#40644434", "title": "Odds of coin flipping heads 10 times in a row", "body": "<p>You need to flip the coin 10 times, but only report success if they <em>all</em> come up heads.  Do this with reverse logic: if any one comes up tails, set your flag to False.</p>\n\n<pre><code>all_heads = True\nfor i in range(10):\n    number = random.randrange(0,2)\n    if number != 0:\n        all_heads = False\n</code></pre>\n\n<p>Or, more succinctly</p>\n\n<pre><code>all_heads = True\nfor i in range(10):\n    all_heads &amp;= random.randrange(0,2) == 0\n</code></pre>\n\n<p>... and even more pythonic</p>\n\n<pre><code>all_heads = all(random.randrange(0,2) == 0 for i in range(10))\n</code></pre>\n\n<p>Whichever you choose, you'll need to do it enough times to approximate a statistical universe.  Since you expect only one success in 1024 trials, you'll want on the order of 10,000 - 100,000 trials.  Count the number of successes, divide by the number of trials.  You already know how to do that part.</p>\n\n<hr>\n\n<p><strong>SPOILER:</strong></p>\n\n<p>Given the length of the run of heads, <strong>n</strong>, and the number of trials, this reduces to</p>\n\n<pre><code>print (sum(all(random.randrange(0,2) for _ in range(n)) \\\n          for _ in range(trials))                       \\\n       / float(trials) )\n</code></pre>\n\n<p>Welcome to Python.  :-)</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6504780, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xQ1HgfNhl3o/AAAAAAAAAAI/AAAAAAAAANE/7bq-jSFanSM/photo.jpg?sz=128", "display_name": "Irhad Fejzic", "link": "https://stackoverflow.com/users/6504780/irhad-fejzic"}, "edited": false, "score": 0, "creation_date": 1479342154, "post_id": 40644489, "comment_id": 68521362, "body": "Looks like a really easy and nice way to do this. Thanks"}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 0, "last_activity_date": 1479340677, "creation_date": 1479340677, "answer_id": 40644489, "question_id": 40644288, "link": "https://stackoverflow.com/questions/40644288/odds-of-coin-flipping-heads-10-times-in-a-row/40644489#40644489", "title": "Odds of coin flipping heads 10 times in a row", "body": "<p>One experiment would now amount to ten flips. You have to repeat that often enough to get your desired outcome (10 heads) sufficiently often:</p>\n\n<pre><code>import random\n\nn = int(input(\"Enter the number of tries: \"))  # 1 try = 10 flips\nten_head_count = 0\n\nfor _ in range(n):\n    if all(x==0 for x in (random.randrange(0,2) for _ in range(10))):\n        ten_head_count += 1\n\nprint(\"No. of ten heads: \", ten_head_count)\nprint(\"No. of tries: \", n)\nprint(\"Odds: \", ten_head_count/n)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6504780, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xQ1HgfNhl3o/AAAAAAAAAAI/AAAAAAAAANE/7bq-jSFanSM/photo.jpg?sz=128", "display_name": "Irhad Fejzic", "link": "https://stackoverflow.com/users/6504780/irhad-fejzic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "accepted_answer_id": 40644434, "answer_count": 2, "score": 0, "last_activity_date": 1479340948, "creation_date": 1479339609, "last_edit_date": 1479340504, "question_id": 40644288, "link": "https://stackoverflow.com/questions/40644288/odds-of-coin-flipping-heads-10-times-in-a-row", "title": "Odds of coin flipping heads 10 times in a row", "body": "<p>I can easily find the number of heads out of 100 and the chances of coin flipping heads out of 100 flips. That code is below.  However, I can't figure out how to easily get the odds of coin flipping heads 10 times <em>in a row</em>.</p>\n\n<pre><code>import random\n\nn = int(input(\"Enter the number of flips: \"))\n\nsum = 0\nheads = 0\ntails = 0\nfor n in range(1, n + 1):\n    number = random.randrange(0,2)\n    if number == 0:\n        heads += 1\n    else:\n        tails += 1\n    sum += number\n    odds = sum / n\n\n\nprint(\"No. of heads: \", heads)\nprint(\"No. of tails: \", tails)\nprint(\"Odds: \", odds)\n</code></pre>\n"}, {"tags": ["python", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479420152, "post_id": 40648069, "comment_id": 68562880, "body": "I am getting this error .TypeError: &#39;NoneType&#39; object is not callable"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "reply_to_user": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479420227, "post_id": 40648069, "comment_id": 68562906, "body": "In what function. Does your my_map_partitions return iterable variable (like a list?)"}, {"owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479420600, "post_id": 40648069, "comment_id": 68563098, "body": "Mariusz .. i have added code in original post.. for each partition i will convert list of rows to list of list and apply julia lme then return the list of rows back to caller"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "reply_to_user": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479420874, "post_id": 40648069, "comment_id": 68563236, "body": "There is missing <code>return my_map_partitions</code> in your code. Function test is used to &quot;generate&quot; my_map_partitions function so it needs to return it."}, {"owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479421644, "post_id": 40648069, "comment_id": 68563591, "body": "Thank Mariusz .. that worked. But i see lot of empty partitions, how can we get ride of it. Do you want me to check length of list and ignore empty? or any other solution?"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "reply_to_user": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479447733, "post_id": 40648069, "comment_id": 68570540, "body": "After <code>mapPartitions</code> you will have as many partitions as before running this transformation, because it maps old partition to the new partition. To get rid of empty partitions run <code>.coalesce(1)</code> at the end."}, {"owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479487937, "post_id": 40648069, "comment_id": 68594707, "body": "When you say at the end is it after repartition i have to coalesce? I dont want to call python function for empty partitions. Is there any way to filter that before i  call <code>df.rdd.mapPartitions(test(abc))</code>"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "reply_to_user": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "edited": false, "score": 0, "creation_date": 1479488313, "post_id": 40648069, "comment_id": 68594944, "body": "I didn&#39;t notice repartition before mapPartitions. Are you sure you have empty partitions after repartitioning by column? Partitioning will be the same after calling mapPartitions"}, {"owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "reply_to_user": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "edited": false, "score": 0, "creation_date": 1479491833, "post_id": 40648069, "comment_id": 68596871, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128480/discussion-between-harish-and-mariusz\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "is_accepted": false, "score": 0, "last_activity_date": 1479364058, "creation_date": 1479364058, "answer_id": 40648069, "question_id": 40644275, "link": "https://stackoverflow.com/questions/40644275/map-partition-with-extra-parameters-pyspark/40648069#40648069", "title": "map-partition with extra parameters pyspark", "body": "<p>Try creating function that returns function, for example:</p>\n\n<pre><code>def test(abc):\n    def my_map_partitions(partition):\n        ...do something with partition and abc...\n    return my_map_partitions\n\ndf.rdd.mapPartitions(test(abc))\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 6079441, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/614e18336a600a7cf4b660fbfc665242?s=128&d=identicon&r=PG&f=1", "display_name": "Harish", "link": "https://stackoverflow.com/users/6079441/harish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3030, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1479421441, "creation_date": 1479339508, "last_edit_date": 1479421441, "question_id": 40644275, "link": "https://stackoverflow.com/questions/40644275/map-partition-with-extra-parameters-pyspark", "title": "map-partition with extra parameters pyspark", "body": "<p>I want to pass few extra parameters to the python function from the mappartition. Any suggestions..</p>\n\n<p>My sample code looks like this</p>\n\n<pre><code> def test(x,abc):\n   &lt;&lt;code&gt;&gt;\n\n abc =1234\n df = df.repartition(\"key\")\n res= df.rdd.mapPartitions(test, abc)\n</code></pre>\n\n<p>If i pass abc as parameter and use it inside the test funtion i am getting below error</p>\n\n<p>Exception: It appears that you are attempting to broadcast an RDD or reference an RDD from an action or transformation. RDD transformations and actions can only be invoked by the driver, not inside of other transformations; for example, rdd1.map(lambda x: rdd2.values.count() * x) is invalid because the values transformation and count action cannot be performed inside of the rdd1.map transformation. For more information, see SPARK-5063.</p>\n\n<p>Mariusz please find the change</p>\n\n<pre><code>from pyspark.sql import Row\ndef test(abc):\n    def my_map_partitions(x):\n       print(\"----------start-----------\")\n       cnt=1\n       ret = []\n       for i in x:\n         cnt=cnt+1\n         val = Row(key1=i.key1, key2=i.key2, cnt=cnt)\n         ret.append(val)\n       return ret \n    return my_map_partitions\ndf = df.repartition(\"key1key2\").sortWithinPartitions(\"key1key2\")  \nabc123 = df .rdd.mapPartitions(test(abc)) \n</code></pre>\n"}, {"tags": ["python", "asynchronous", "web-scraping"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1479339284, "post_id": 40644215, "comment_id": 68520515, "body": "You might be interested in <a href=\"https://docs.python.org/3/library/asyncio.html\" rel=\"nofollow noreferrer\">asyncio</a>."}, {"owner": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 1, "creation_date": 1479345003, "post_id": 40644215, "comment_id": 68522134, "body": "<a href=\"https://scrapy.org/\" rel=\"nofollow noreferrer\">Scrapy</a> is already asynchronous, a lot more powerful than you could handroll in the near future, and production-ready. A single <a href=\"https://doc.scrapy.org/en/latest/topics/benchmarking.html\" rel=\"nofollow noreferrer\">benchmark</a> may offer you some insight."}], "answers": [{"tags": [], "owner": {"reputation": 6872, "user_id": 2753095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AAZgP.png?s=128&g=1", "display_name": "mguijarr", "link": "https://stackoverflow.com/users/2753095/mguijarr"}, "is_accepted": false, "score": 0, "last_activity_date": 1479339596, "creation_date": 1479339596, "answer_id": 40644285, "question_id": 40644215, "link": "https://stackoverflow.com/questions/40644215/scraping-a-large-number-of-urls-in-python/40644285#40644285", "title": "Scraping a large number of urls in Python", "body": "<p>Use <a href=\"http://www.gevent.org\" rel=\"nofollow noreferrer\">gevent</a>. Enable monkey-patching of Python standard library, and just use your favourite scrapping library - replace the threads by 1000 greenlets doing the same thing. And you're done.</p>\n"}], "owner": {"reputation": 644, "user_id": 5125206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-DWclhD0mhws/AAAAAAAAAAI/AAAAAAAABwU/Gurbwp-_k30/photo.jpg?sz=128", "display_name": "lostsoul29", "link": "https://stackoverflow.com/users/5125206/lostsoul29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479411743, "creation_date": 1479339153, "last_edit_date": 1479411743, "question_id": 40644215, "link": "https://stackoverflow.com/questions/40644215/scraping-a-large-number-of-urls-in-python", "title": "Scraping a large number of urls in Python", "body": "<p>I have 630,220 urls that I need to open and scrape. These urls themselves have been scraped, and scraping them was much easier because every single scraped page would return around 3,500 urls.</p>\n\n<p>To scrape these 630,220 urls, I'm currently doing parallel scraping in Python using threads. Using 16 threads, it takes 51 seconds to scrape 200 urls. Thus, it would take me 44 hours to scrape all 630,220 urls which seems to be an unnecessarily time consuming and grossly inefficient way to handle this problem.</p>\n\n<p>Assuming that the server will not be overloaded, is there a way to asynchronously send something like 1000 requests per second? That would bring down the total scraping time to about 10 minutes, which is pretty reasonable.</p>\n"}, {"tags": ["python", "constraints", "multiplication", "pulp"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7154080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566e86e862f3555b2fdedd669b25b9f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatTheShrimp", "link": "https://stackoverflow.com/users/7154080/whattheshrimp"}, "edited": false, "score": 0, "creation_date": 1479364719, "post_id": 40644343, "comment_id": 68527790, "body": "Thanks, but when I do that it says: &#39;float() argument must be a string or a number, not &#39;NoneType&#39; and if I remove the float() declarations it says &#39;a float is required&#39;. I don&#39;t think taking the log of an LpVariable is possible."}, {"owner": {"reputation": 111, "user_id": 7170238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd5004b35d3c228f8cca68752ea963b7?s=128&d=identicon&r=PG&f=1", "display_name": "huma474", "link": "https://stackoverflow.com/users/7170238/huma474"}, "reply_to_user": {"reputation": 1, "user_id": 7154080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566e86e862f3555b2fdedd669b25b9f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatTheShrimp", "link": "https://stackoverflow.com/users/7154080/whattheshrimp"}, "edited": false, "score": 0, "creation_date": 1479432302, "post_id": 40644343, "comment_id": 68566765, "body": "Dug into their source code for the module, getting the value is a different call sorry. from their code over here - <a href=\"https://github.com/coin-or/pulp/blob/master/src/pulp/pulp.py\" rel=\"nofollow noreferrer\">github.com/coin-or/pulp/blob/master/src/pulp/pulp.py</a> - in the LpVariable Class :      def value(self): return self.varValue  so to get the value of a variable is x.value() and not value(x), that should give you your value, assuming the variable had a value assigned to it. you will need to keep the float() part though, internally there&#39;s no assignment of the value to a float type in the LpVariable class."}], "tags": [], "owner": {"reputation": 111, "user_id": 7170238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd5004b35d3c228f8cca68752ea963b7?s=128&d=identicon&r=PG&f=1", "display_name": "huma474", "link": "https://stackoverflow.com/users/7170238/huma474"}, "is_accepted": false, "score": 0, "last_activity_date": 1479339904, "creation_date": 1479339904, "answer_id": 40644343, "question_id": 40644200, "link": "https://stackoverflow.com/questions/40644200/multiplication-in-the-constraint-solving-with-pulp/40644343#40644343", "title": "Multiplication in the constraint - solving with pulp", "body": "<p>Based on the documentation on their PyPi page it looks like what you may need is to just call the value of your LpVariable. That will give you the number value that you can then use in your calculations</p>\n\n<p><a href=\"https://pypi.python.org/pypi/PuLP\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/PuLP</a></p>\n\n<p>You can get the value of the variables using value(). ex:</p>\n\n<p>value(x) : \n2.0</p>\n\n<p>So your function may be able to be re-written as </p>\n\n<pre><code>prob += math.log(float(value(A))) = math.log(float(value(X))) + math.log(float(value(y)))\n</code></pre>\n\n<p>The float() declarations may also be unnecessary as well since it looks like LpVariables store their internal numbers as floats normally</p>\n"}], "owner": {"reputation": 1, "user_id": 7154080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566e86e862f3555b2fdedd669b25b9f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatTheShrimp", "link": "https://stackoverflow.com/users/7154080/whattheshrimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565115655, "creation_date": 1479339058, "last_edit_date": 1565115655, "question_id": 40644200, "link": "https://stackoverflow.com/questions/40644200/multiplication-in-the-constraint-solving-with-pulp", "title": "Multiplication in the constraint - solving with pulp", "body": "<p>I'm trying to linearize a multiplication constraint I have in pulp.</p>\n\n<p>It looks something like this:</p>\n\n<pre><code>prob += (1 - Y) * (3 - X)\n</code></pre>\n\n<p>Which is equal to:</p>\n\n<pre><code>prob += 3 - 3*Y - X + X*Y\n</code></pre>\n\n<p>Where Y is a binary variable, In the formula everything is linear except for the following part: <code>Y*X</code>. I tried to solve this by using the formula I found in another question:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mtMBY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mtMBY.png\" alt=\"Link to the picture\"></a></p>\n\n<p><a href=\"https://stackoverflow.com/q/22298991\">Link to the question</a></p>\n\n<p>So I tried using <code>X1*X2 = Y</code>, Using my code this gives <code>X*Y = A</code>. I used the log substitution method. This gave me the following code:</p>\n\n<pre><code>prob += math.log(float(A)) = math.log(float(X)) + math.log(float(y))\n</code></pre>\n\n<p>And the other constraint:</p>\n\n<pre><code>prob += 3 - 3*Y - X + A\n</code></pre>\n\n<p>Only this doesn't seem to work because a float can only be a string or a number and not a <code>LpVariable</code>. Is there a way to solve this problem using the first substitution method given in the image of the formula?</p>\n"}, {"tags": ["python", "for-loop", "synchronization", "multiprocessing"], "comments": [{"owner": {"reputation": 369, "user_id": 1255918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ccf4e4e368f8670759c69914df0fa8?s=128&d=identicon&r=PG", "display_name": "PeteyPii", "link": "https://stackoverflow.com/users/1255918/peteypii"}, "edited": false, "score": 1, "creation_date": 1479340800, "post_id": 40644139, "comment_id": 68520938, "body": "Seems like you want a <a href=\"https://docs.python.org/3/library/threading.html#barrier-objects\" rel=\"nofollow noreferrer\">barrier</a> (requires Python 3.2 however)."}, {"owner": {"reputation": 131, "user_id": 2475758, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a98fec10410df65d6e78eca2e63628cb?s=128&d=identicon&r=PG", "display_name": "Alec Tarashansky", "link": "https://stackoverflow.com/users/2475758/alec-tarashansky"}, "reply_to_user": {"reputation": 369, "user_id": 1255918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ccf4e4e368f8670759c69914df0fa8?s=128&d=identicon&r=PG", "display_name": "PeteyPii", "link": "https://stackoverflow.com/users/1255918/peteypii"}, "edited": false, "score": 0, "creation_date": 1479412928, "post_id": 40644139, "comment_id": 68559112, "body": "@PeteyPii - I got Barrier to work for a for loop. How would I do it for a while loop with a variable number of iterations? If one loop ends earlier than another loop then the entire program deadlocks because the barriers in the other processes are waiting for a process that exited the loop to hit the barrier.wait()."}, {"owner": {"reputation": 369, "user_id": 1255918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ccf4e4e368f8670759c69914df0fa8?s=128&d=identicon&r=PG", "display_name": "PeteyPii", "link": "https://stackoverflow.com/users/1255918/peteypii"}, "edited": false, "score": 0, "creation_date": 1479414151, "post_id": 40644139, "comment_id": 68559733, "body": "If the separate threads have distinct iteration counts then you can simply add another loop after the first while loop that only calls barrier.wait() n times where n is the max iteration count minus the particular thread&#39;s iteration count."}, {"owner": {"reputation": 131, "user_id": 2475758, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a98fec10410df65d6e78eca2e63628cb?s=128&d=identicon&r=PG", "display_name": "Alec Tarashansky", "link": "https://stackoverflow.com/users/2475758/alec-tarashansky"}, "reply_to_user": {"reputation": 369, "user_id": 1255918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ccf4e4e368f8670759c69914df0fa8?s=128&d=identicon&r=PG", "display_name": "PeteyPii", "link": "https://stackoverflow.com/users/1255918/peteypii"}, "edited": false, "score": 0, "creation_date": 1479417270, "post_id": 40644139, "comment_id": 68561390, "body": "They are variable iteration counts. I solved the issue by using a shared memory flag. Thanks for your help!"}], "owner": {"reputation": 131, "user_id": 2475758, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a98fec10410df65d6e78eca2e63628cb?s=128&d=identicon&r=PG", "display_name": "Alec Tarashansky", "link": "https://stackoverflow.com/users/2475758/alec-tarashansky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479340509, "creation_date": 1479338734, "last_edit_date": 1479340509, "question_id": 40644139, "link": "https://stackoverflow.com/questions/40644139/synchronizing-parallel-loops-in-python-multiprocessing", "title": "Synchronizing parallel loops in python multiprocessing", "body": "<p>How would I get for loops in parallel processes to execute such that each process waits until all other loops in the other processes have finished one iteration before incrementing <code>i</code> to the next iteration? In this case, each iteration will take a different amount of time depending on the size of vector you are generating, and I want all the loops to step through the iterations synchronously.</p>\n\n<pre><code>    import multiprocessing\n    import numpy as np;\n    def calc(num):\n        for i in range(0,10):\n            x=np.random.rand(int(num));\n            y=np.random.poisson(x)\n            print(\"NUM: \"+str(int(num))+\" IT: \" +str(i)+\"\\n\")\n        return 0;\n\n    if __name__=='__main__':  \n        pool = multiprocessing.Pool(processes=3) \n        for output in pool.map(calc, [1,2e3,3e6]):\n            print 'output:',output\n</code></pre>\n\n<p>Thanks!</p>\n\n<p>EDIT: The output I'm looking for should be something like...</p>\n\n<pre><code>NUM: 1 IT: 0\nNUM: 2000 IT: 0\nNUM: 3000000 IT: 0\nNUM: 1 IT: 1\nNUM: 2000 IT: 1\nNUM: 3000000 IT: 1\nNUM: 1 IT: 2\nNUM: 2000 IT: 2\nNUM: 3000000 IT: 2\nNUM: 1 IT: 3\nNUM: 2000 IT: 3\nNUM: 3000000 IT: 3\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479339340, "post_id": 40644130, "comment_id": 68520533, "body": "Have you tried the following change to include: <code>url(r&#39;^tech&#47;&#39;, include(&#39;person.urls&#39;, namespace=&#39;person&#39;)),</code>?"}, {"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 1, "creation_date": 1479340533, "post_id": 40644130, "comment_id": 68520853, "body": "Why do you include <code>person.urls</code> twice? The first include uses <code>^$</code>, which causes the error you&#39;re seeing."}, {"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479340592, "post_id": 40644130, "comment_id": 68520875, "body": "@schwobaseggl <code>namespace</code> defaults to the <code>app_name</code> used, so that would have absolutely no effect."}, {"owner": {"reputation": 39, "user_id": 2089450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/be183db89581e0a9cb4cc8c4100e5827?s=128&d=identicon&r=PG", "display_name": "Rob Peterson", "link": "https://stackoverflow.com/users/2089450/rob-peterson"}, "reply_to_user": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1479347601, "post_id": 40644130, "comment_id": 68522817, "body": "@knbk - That was definitely my problem. I need to figure out another solution for the unadorned url (the ^$ usecase). Removing that line allowed the reverse match to work."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6140865"}, "is_accepted": false, "score": 0, "last_activity_date": 1479345202, "creation_date": 1479345202, "answer_id": 40645136, "question_id": 40644130, "link": "https://stackoverflow.com/questions/40644130/getting-noreversematch-error/40645136#40645136", "title": "Getting NoReverseMatch Error", "body": "<p>Could it be the additional / at the end of the URL?</p>\n\n<pre><code>url(r'^(?P&lt;pk&gt;[0-9]+)/$', views.DetailView.as_view(), name='specialist')\n</code></pre>\n\n<p>The one after your primary key modifier.  When you click the URL (with the (% url ':' model.name %)) what URL comes up in your browser?</p>\n"}, {"comments": [{"owner": {"reputation": 5173, "user_id": 1981088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Iicg.png?s=128&g=1", "display_name": "help-info.de", "link": "https://stackoverflow.com/users/1981088/help-info-de"}, "edited": false, "score": 0, "creation_date": 1485975898, "post_id": 41987107, "comment_id": 71152845, "body": "Please have a look at <a href=\"http://stackoverflow.com/help/self-answer\">Can I answer my own question?</a> and come back two days later and check as answered."}], "tags": [], "owner": {"reputation": 39, "user_id": 2089450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/be183db89581e0a9cb4cc8c4100e5827?s=128&d=identicon&r=PG", "display_name": "Rob Peterson", "link": "https://stackoverflow.com/users/2089450/rob-peterson"}, "is_accepted": false, "score": 0, "last_activity_date": 1485974020, "creation_date": 1485974020, "answer_id": 41987107, "question_id": 40644130, "link": "https://stackoverflow.com/questions/40644130/getting-noreversematch-error/41987107#41987107", "title": "Getting NoReverseMatch Error", "body": "<p>I ended up scrapping this implementation, and going with a flatter structure whereby all models, views and templates are in the same application. I have not had this problem in the new design.</p>\n"}], "owner": {"reputation": 39, "user_id": 2089450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/be183db89581e0a9cb4cc8c4100e5827?s=128&d=identicon&r=PG", "display_name": "Rob Peterson", "link": "https://stackoverflow.com/users/2089450/rob-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485974020, "creation_date": 1479338695, "last_edit_date": 1495540889, "question_id": 40644130, "link": "https://stackoverflow.com/questions/40644130/getting-noreversematch-error", "title": "Getting NoReverseMatch Error", "body": "<p>I have an app that is going to display some information about people in my group. I'm getting a NoReverseMatch error when trying to use the url tag in my index.html. If I do not use the url tag, but specify the root, I do not receive the error. </p>\n\n<p>The error says:</p>\n\n<blockquote>\n  <p>NoReverseMatch at /\n  Reverse for 'specialist' with arguments '(1,)' and keyword arguments '{}' not found. 1 pattern(s) tried: ['$(?P[0-9]+)/']</p>\n</blockquote>\n\n<p>Here is are the urls.py files.</p>\n\n<p>From the main wi_tech urls.py:</p>\n\n<pre><code>from django.conf.urls import include, url\nfrom django.contrib import admin\nurlpatterns = [\n    url(r'^$', include('person.urls')),\n    url(r'^tech/', include('person.urls')),\n    url(r'^admin/', admin.site.urls),\n]\n</code></pre>\n\n<p>From the 'person' app urls.py:</p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\napp_name = 'person'\nurlpatterns = [\n     url(r'^$', views.IndexView.as_view(), name='index'),\n     url(r'^(?P&lt;pk&gt;[0-9]+)/$', views.DetailView.as_view(), name='specialist'),\n]\n</code></pre>\n\n<p>My views.py file looks like this:</p>\n\n<pre><code>from django.views import generic\nfrom .models import Specialist\nclass IndexView(generic.ListView):\n    template_name = 'person/index.html'\n    context_object_name = 'person_list'\n\n    def get_queryset(self):\n        \"\"\"Return all specialists\"\"\"\n        return Specialist.objects.order_by('id')\nclass DetailView(generic.DetailView):\n    model = Specialist\n    template_name = 'person/detail.html'\n</code></pre>\n\n<p>And my index.html page looks like this:</p>\n\n<pre><code>{% if person_list %}\n    &lt;ul&gt;\n    {% for specialist in person_list %}\n        &lt;li&gt;&lt;a href=\"{% url 'person:specialist' specialist.id %}\"&gt; {{ specialist }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n{% else %}\n    &lt;p&gt;No specialists are available.&lt;/p&gt;\n{% endif %}\n</code></pre>\n\n<p>If I change my  tag in index.html to this, it works:</p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"/tech/{{specialist.id}}\"&gt; {{ specialist }}&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Obviously this isn't an ideal situation in case the web root ever changes. I've reviewed a lot of SO questions on this, and nothing seems to match. I <em>think</em> the issue is the \"$\" in the beginning of the regex, but I don't see where that's coming from.</p>\n\n<p>Specifically, I used this link as a really good reference point, but came up empty looking through my code.\n<a href=\"https://stackoverflow.com/questions/38390177/what-is-a-noreversematch-error-and-how-do-i-fix-it\">what is NoReverseMatch and how do i fix it</a></p>\n\n<p>Clearly there's something I'm missing.</p>\n"}, {"tags": ["python", "stocks", "quantitative-finance", "ta-lib", "pyalgotrade"], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479391692, "post_id": 40647132, "comment_id": 68545122, "body": "I replaced feed[self.__instrument] with self.__prices, now its spitting out data. However,  I have no idea what the data is.  I&#39;m trying to get the 3 day slope of the PPO Histogram.  <a href=\"http://stockcharts.com/articles/chartwatchers/2011/04/using-the-ppo-indicator.html\" rel=\"nofollow noreferrer\">stockcharts.com/articles/chartwatchers/2011/04/&hellip;</a>"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479396879, "post_id": 40647132, "comment_id": 68549112, "body": "See update. You want to save <code>feed</code> in <code>__init__</code> and use it in <code>onBars</code>."}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479397006, "post_id": 40647132, "comment_id": 68549200, "body": "thanks. any ideas about the 3 day slope of the PPO Histogram??"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479398124, "post_id": 40647132, "comment_id": 68550029, "body": "PPO is based on EMA. Since PPO in talib is a bit different from what you want, I think you can implement one by yourself."}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479401908, "post_id": 40647132, "comment_id": 68552619, "body": "Also, why is it that for each date I get a whole list of data? How can I just get the corresponding data per date? I also realized the data coming out is the black line of the PPO when I use ma=1.   I&#39;m trying to use this in the onbars but still no luck(I need either the angle or the slope):  self.__Slope = talibext.indicator.LINEARREG_ANGLE(self.__PPO,3)"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479404607, "post_id": 40647132, "comment_id": 68554321, "body": "Because talib indicators don&#39;t have interface to feed bars one by one, It accept whole array and output whole array. You just get <code>self.__PPO[-1]</code> per date. For slope, try <code>talibext.indicator.LINEARREG_ANGLE(self.__PPO, len(self.__PPO), 3)</code>. And you need to clarify how to pass parameters to talib indicators before using them, refer <a href=\"https://github.com/gbeced/pyalgotrade/blob/master/pyalgotrade/talibext/indicator.py\" rel=\"nofollow noreferrer\">talib wrapper</a>"}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479405474, "post_id": 40647132, "comment_id": 68554802, "body": "the self.__PPO[-1] works like a charm. Small problem, the talibext.indicator.LINEARREG_ANGLE(self.__PPO, len(self.__PPO), 3) returns the error: &quot;Exceptions: all inputs are nan&quot;   (appreciate all the help btw)"}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479406236, "post_id": 40647132, "comment_id": 68555235, "body": "I found this in the link you provided:  def LINEARREG_ANGLE(ds, count, timeperiod=-2**31):     &quot;&quot;&quot;Linear Regression Angle&quot;&quot;&quot;     return call_talib_with_ds(ds, count, talib.LINEARREG_ANGLE, timeperiod)  What you suggested I input seems like it matches the criteria for the inputs...data,#periods, time period)."}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479416714, "post_id": 40647132, "comment_id": 68561084, "body": "do i need to put the ppo output into a dataseries before i put it into the linear angle ?? If so, how would I do that?"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479479618, "post_id": 40647132, "comment_id": 68588976, "body": "Yes. You can use <code>talib.LINEARREG_ANGLE(self.__PPO, 3)</code> directly, which you can avoid extra convertion."}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479480133, "post_id": 40647132, "comment_id": 68589343, "body": "Strange because I know there is something in self.__PPO"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479480513, "post_id": 40647132, "comment_id": 68589638, "body": "In first several days, self.__PPO output are all nan. Just wrap this in try-catch statement."}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479481826, "post_id": 40647132, "comment_id": 68590543, "body": "&quot;Just wrap this in try-catch statement&quot;. can you explain this?"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479481944, "post_id": 40647132, "comment_id": 68590631, "body": "<code>try: slope = talib.LINEARREG_ANGLE(self.__PPO, 3)[-1] except Exception: slope = numpy.nan</code>"}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479483611, "post_id": 40647132, "comment_id": 68591823, "body": "dude it works!!!! Thank you! Thank you! The only thing is that when I use   self.info(&quot;%s,%s&quot; % (bar.getClose(),self.__PPO[-1], slope)) to see the printout  i get the error &quot;TypeError: not all arguments converted during string formatting&quot;. It works when I remove self.__PPO[-1], I suspect its because since their are nan&#39;s in &quot;slope&quot; it bugs. Any idea? THANK YOU!"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479483830, "post_id": 40647132, "comment_id": 68591975, "body": "Congratulations! And please accept my answer by clicking <b>\u221a</b>."}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479483911, "post_id": 40647132, "comment_id": 68592038, "body": "You lose a <code>%s</code>"}, {"owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479485555, "post_id": 40647132, "comment_id": 68593259, "body": "Can&#39;t believe i missed that. Thanks! Any chance you would be interested in swapping emails?"}, {"owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "reply_to_user": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "edited": false, "score": 0, "creation_date": 1479485876, "post_id": 40647132, "comment_id": 68593444, "body": "Of course. You can contact me via zhecong123@126.com"}], "tags": [], "owner": {"reputation": 6064, "user_id": 1090791, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ls3wG.png?s=128&g=1", "display_name": "gzc", "link": "https://stackoverflow.com/users/1090791/gzc"}, "is_accepted": true, "score": 1, "last_activity_date": 1479396803, "last_edit_date": 1479396803, "creation_date": 1479359307, "answer_id": 40647132, "question_id": 40644122, "link": "https://stackoverflow.com/questions/40644122/pyalgotrade-ta-lib-indicator-returns-none/40647132#40647132", "title": "Pyalgotrade - TA-LIB - Indicator Returns &quot;NONE&quot;", "body": "<p>The parameters you passed are wrong. This is PPO function signature:</p>\n\n<pre><code>def PPO(ds, count, fastperiod=-2**31, slowperiod=-2**31, matype=0):\n</code></pre>\n\n<p><code>ds</code> type is <code>BarDataSeries</code>, <code>count</code> specify how long data from tail do you want to calculate. It will return a <code>numpy array</code> if calculation succeed.</p>\n\n<p>And talibext indicators calculate only once, it won't calculate new result when new bar is fed.</p>\n\n<p>So you need to calculate PPO in every <code>onBars</code> call.</p>\n\n<pre><code>def __init__(self, feed, instrument):\n    ...\n\n    self.__feed = feed\n\ndef onBars(self, bars):\n    feed = self.__feed\n    self.__PPO = talibext.indicator.PPO(feed[self.__instrument], len(feed[self.__instrument]),12,26, matype=0)\n    bar = bars[self.__instrument]\n    self.info(\"%s,%s\" % (bar.getClose(),self.__PPO[-1]))\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 5651960, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bbf2c02f85628348dbfa1b62a722c9cc?s=128&d=identicon&r=PG&f=1", "display_name": "RageAgainstheMachine", "link": "https://stackoverflow.com/users/5651960/rageagainsthemachine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 1, "accepted_answer_id": 40647132, "answer_count": 1, "score": 0, "last_activity_date": 1479396803, "creation_date": 1479338652, "question_id": 40644122, "link": "https://stackoverflow.com/questions/40644122/pyalgotrade-ta-lib-indicator-returns-none", "title": "Pyalgotrade - TA-LIB - Indicator Returns &quot;NONE&quot;", "body": "<p>I'm working with Pyalgotrade to test a trading strategy in python. Pyalgotrade allows for the use of a library called TA-LIB,which is a technical analysis library. For some reason, when I use the PPO indicator it returns \"None\". The indicator takes in a few arguments:(<a href=\"http://gbeced.github.io/pyalgotrade/docs/v0.12/html/talib.html\" rel=\"nofollow noreferrer\">http://gbeced.github.io/pyalgotrade/docs/v0.12/html/talib.html</a>)</p>\n\n<p>I provided a snippet of the output which for now is only the closing stock price of the day and what was supposed to be the output from this indicator. 'DDD' is the ticker I've been testing with.</p>\n\n<p>I've been trying to get this to work for longer than I would like to admit. \nHow can I fix this?</p>\n\n<p>OUTPUT:</p>\n\n<pre><code>2016-11-08 00:00:00 strategy [INFO] 13.56,None\n2016-11-09 00:00:00 strategy [INFO] 13.77,None\n2016-11-10 00:00:00 strategy [INFO] 14.06,None\n2016-11-11 00:00:00 strategy [INFO] 14.71,None\n2016-11-14 00:00:00 strategy [INFO] 14.3,None\n2016-11-15 00:00:00 strategy [INFO] 13.91,None\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>from pyalgotrade import strategy\nfrom pyalgotrade.tools import yahoofinance\nfrom pyalgotrade import talibext\nfrom pyalgotrade.talibext import indicator\nimport talib\nimport numpy\n\nclass MyStrategy(strategy.BacktestingStrategy):\n    def __init__(self, feed, instrument):\n        super(MyStrategy, self).__init__(feed, 1000)\n        self.__position = None\n        self.__instrument = instrument\n        self.setUseAdjustedValues(True) \n        self.__prices = feed[instrument].getPriceDataSeries()\n\n        self.__PPO = talibext.indicator.PPO(feed,0,12,26,9)\n\n    def onEnterOk(self, position):\n        execInfo = position.getEntryOrder().getExecutionInfo()\n        self.info(\"BUY at $%.2f\" % (execInfo.getPrice()))\n\n    def onEnterCanceled(self, position):\n        self.__position = None\n\n    def onExitOk(self, position):\n        execInfo = position.getExitOrder().getExecutionInfo()\n        self.info(\"SELL at $%.2f\" % (execInfo.getPrice()))\n        self.__position = None\n\n    def onExitCanceled(self, position):\n        # If the exit was canceled, re-submit it.\n        self.__position.exitMarket()\n\n    def onBars(self, bars):\n\n        bar = bars[self.__instrument]\n        self.info(\"%s,%s\" % (bar.getClose(),self.__PPO))\n\n    def run_strategy(inst):\n    # Load the yahoo feed from the CSV file\n\n    feed = yahoofinance.build_feed([inst],2015,2016, \".\")\n\n    # Evaluate the strategy with the feed.\n    myStrategy = MyStrategy(feed, inst)\n    myStrategy.run()\n    print \"Final portfolio value: $%.2f\" % myStrategy.getBroker().getEquity()\n\n\ndef main():\n    instruments = ['ddd']\n    for inst in instruments:\n            run_strategy(inst)\n\n\nif __name__ == '__main__':\n        main()\n</code></pre>\n"}, {"tags": ["python", "argparse"], "answers": [{"comments": [{"owner": {"reputation": 2465, "user_id": 2308300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zs5xn.jpg?s=128&g=1", "display_name": "Locane", "link": "https://stackoverflow.com/users/2308300/locane"}, "edited": false, "score": 0, "creation_date": 1479339688, "post_id": 40644240, "comment_id": 68520629, "body": "This is what I needed!  Thank you @mwchase"}], "tags": [], "owner": {"reputation": 746, "user_id": 2117569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cece70bb49a0e25727764344de657904?s=128&d=identicon&r=PG", "display_name": "mwchase", "link": "https://stackoverflow.com/users/2117569/mwchase"}, "is_accepted": true, "score": 5, "last_activity_date": 1479339265, "creation_date": 1479339265, "answer_id": 40644240, "question_id": 40644096, "link": "https://stackoverflow.com/questions/40644096/argparse-differentiate-between-no-options-option-invoked-and-option-invoked/40644240#40644240", "title": "Argparse - differentiate between no options, option invoked, and option invoked with argument?", "body": "<p>Use the <code>const</code> kwarg. If the option is not specified, <code>default</code> will be used. If the option is provided on its own, <code>const</code> will be used. If the option is provided with a value, the value will be used.</p>\n\n<p>Copying from the documentation:</p>\n\n<pre><code>&gt;&gt;&gt; parser = argparse.ArgumentParser()\n&gt;&gt;&gt; parser.add_argument('--foo', nargs='?', const='c', default='d')\n&gt;&gt;&gt; parser.add_argument('bar', nargs='?', default='d')\n&gt;&gt;&gt; parser.parse_args(['XX', '--foo', 'YY'])\nNamespace(bar='XX', foo='YY')\n&gt;&gt;&gt; parser.parse_args(['XX', '--foo'])\nNamespace(bar='XX', foo='c')\n&gt;&gt;&gt; parser.parse_args([])\nNamespace(bar='d', foo='d')\n</code></pre>\n"}], "owner": {"reputation": 2465, "user_id": 2308300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zs5xn.jpg?s=128&g=1", "display_name": "Locane", "link": "https://stackoverflow.com/users/2308300/locane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 40644240, "answer_count": 1, "score": 2, "last_activity_date": 1479339265, "creation_date": 1479338522, "last_edit_date": 1479338955, "question_id": 40644096, "link": "https://stackoverflow.com/questions/40644096/argparse-differentiate-between-no-options-option-invoked-and-option-invoked", "title": "Argparse - differentiate between no options, option invoked, and option invoked with argument?", "body": "<p>As an example:</p>\n\n<pre><code>#thing.py\nimport argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"--show\", nargs='?', action=\"store\")\nargs = parser.parse_args()\n</code></pre>\n\n<p>How do I differentiate between the following usages:</p>\n\n<pre><code>python thing.py\n\npython thing.py --show\n\npython thing.py --show all\n</code></pre>\n\n<p>Essentially, I want to do different things if: </p>\n\n<ul>\n<li>The user specifies no options</li>\n<li>The user specifies the \"--show\" option by itself</li>\n<li>The user specifies \"--show all\" - with a string / argument.</li>\n</ul>\n\n<p>Using <code>default=\"foo\"</code> in add_argument doesn't work because it is always there when tested - I have no way to know if the user actually specified the option \"--show\" or not.</p>\n"}, {"tags": ["python", "numpy", "theano"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 5693681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddffacdb658f064755c695f1a6fb66b6?s=128&d=identicon&r=PG&f=1", "display_name": "BenJ", "link": "https://stackoverflow.com/users/5693681/benj"}, "is_accepted": false, "score": 2, "last_activity_date": 1479340472, "creation_date": 1479340472, "answer_id": 40644447, "question_id": 40644013, "link": "https://stackoverflow.com/questions/40644013/adding-a-row-of-ones-to-a-tensor-in-theano/40644447#40644447", "title": "Adding a row of ones to a tensor in Theano", "body": "<p>So in answering my own question ;)  I hope this helps anyone else!</p>\n\n<pre><code>A = T.matrix('A')\nB = T.ones_like(A[:,0])\nC = T.concatenate([T.shape_padright(B), A], axis=1)\n\nC.eval({A:np.zeros((2,2))})\n\n&gt;&gt; array([[1., 0., 0.],\n          [1., 0., 0.]])\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 5693681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddffacdb658f064755c695f1a6fb66b6?s=128&d=identicon&r=PG&f=1", "display_name": "BenJ", "link": "https://stackoverflow.com/users/5693681/benj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479340472, "creation_date": 1479338073, "question_id": 40644013, "link": "https://stackoverflow.com/questions/40644013/adding-a-row-of-ones-to-a-tensor-in-theano", "title": "Adding a row of ones to a tensor in Theano", "body": "<p>I am new to theano and am trying to figure out how to add a row of ones to a matrix tensor where the first shape of the input tensor will vary slightly e.g. (50000, 784), (10000, 784) using MNIST.  Taking a numpy example; this is what I would like to achieve in theano, where array would be a tensor:</p>\n\n<pre><code>array = np.zeros((2,2))\narray = np.hstack((np.ones((2,1)), array))\n</code></pre>\n\n<p>I have looked at <a href=\"http://deeplearning.net/software/theano/library/tensor/basic.html#shape_padleft\" rel=\"nofollow noreferrer\">shape_padleft</a> as well as pad_right and padaxis but have been unable to achieve the desired result.  </p>\n\n<p>Thanks very much for any help!\nBen</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "scrapy", "boto"], "comments": [{"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 1, "creation_date": 1479381722, "post_id": 40643938, "comment_id": 68538312, "body": "I do not think Scrapy&#39;s S3 upload handler does retries. I&#39;m not sure there&#39;s a simple fix other than migrating to boto3 (there&#39;s <a href=\"https://github.com/scrapy/scrapy/issues/1866\" rel=\"nofollow noreferrer\">an open issue for this</a>)"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1479382610, "post_id": 40643938, "comment_id": 68538894, "body": "You can also try installing <code>botocore</code> (scrapy will use <code>botocore</code> instead of <code>boto</code> if it&#39;s available). It seems botocore does some retries (I can&#39;t find much detail about it though)"}, {"owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "reply_to_user": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1479383413, "post_id": 40643938, "comment_id": 68539374, "body": "Thanks! <code>boto3</code> solves it!"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 1, "creation_date": 1479390120, "post_id": 40643938, "comment_id": 68543865, "body": "This is probably because <code>boto3</code> depends on <code>botocore</code> so installing it installed <code>botocore</code> also. (Scrapy does not use <code>boto3</code>.)"}], "answers": [{"tags": [], "owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "is_accepted": true, "score": 0, "last_activity_date": 1479383456, "creation_date": 1479383456, "answer_id": 40654168, "question_id": 40643938, "link": "https://stackoverflow.com/questions/40643938/retry-unhandled-error-in-deferred-in-scrapy/40654168#40654168", "title": "Retry Unhandled error in Deferred: in scrapy", "body": "<p>Thanks to @paul! Based on his answer, I solve it by uninstalling package <code>boto</code> and install package <code>boto3</code> instead.</p>\n"}], "owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 40654168, "answer_count": 1, "score": 0, "last_activity_date": 1541684049, "creation_date": 1479337663, "last_edit_date": 1541684049, "question_id": 40643938, "link": "https://stackoverflow.com/questions/40643938/retry-unhandled-error-in-deferred-in-scrapy", "title": "Retry Unhandled error in Deferred: in scrapy", "body": "<p>I got <code>BotoServerError</code> in Scrapy when uploading images to AWS S3 because it happens to be a server down. How can I handle those errors so I can set the item pipeline to sleep for a while and retry uploading again?</p>\n\n<pre><code>2016-11-17 05:59:55 [twisted] CRITICAL: \nTraceback (most recent call last):\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\twisted\\python\\threadpool.py\", line 246, in inContext\n    result = inContext.theWork()\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\twisted\\python\\threadpool.py\", line 262, in &lt;lambda&gt;\n    inContext.theWork = lambda: context.call(ctx, func, *args, **kw)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\twisted\\python\\context.py\", line 118, in callWithContext\n    return self.currentContext().callWithContext(ctx, func, *args, **kw)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\twisted\\python\\context.py\", line 81, in callWithContext\n    return func(*args,**kw)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\s3\\key.py\", line 1426, in set_contents_from_string\n    encrypt_key=encrypt_key)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\s3\\key.py\", line 1293, in set_contents_from_file\n    chunked_transfer=chunked_transfer, size=size)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\s3\\key.py\", line 750, in send_file\n    chunked_transfer=chunked_transfer, size=size)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\s3\\key.py\", line 951, in _send_file_internal\n    query_args=query_args\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\s3\\connection.py\", line 668, in make_request\n    retry_handler=retry_handler\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\connection.py\", line 1071, in make_request\n    retry_handler=retry_handler)\n  File \"D:\\Kerja\\HIT\\PYTHON~1\\&lt;project_name&gt;\\&lt;project_name&gt;\\lib\\site-packages\\boto\\connection.py\", line 1028, in _mexe\n    raise BotoServerError(response.status, response.reason, body)\nBotoServerError: BotoServerError: 503 Service Unavailable\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 4, "creation_date": 1479337829, "post_id": 40643936, "comment_id": 68520053, "body": "Discard the string from <code>.</code> on, and then put it in a set."}], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338325, "creation_date": 1479338325, "answer_id": 40644060, "question_id": 40643936, "link": "https://stackoverflow.com/questions/40643936/delete-slightly-repeating-items-from-list-python/40644060#40644060", "title": "Delete slightly repeating items from list Python", "body": "<p>Test for matching regex for the character <code>.</code> (represented by <code>\\.</code> since <code>.</code> is reserved for <code>any char</code>):</p>\n\n<pre><code>import re\nwithout_dot = []\nfor x in open('file.txt').read().split('\\n'):\n    if not re.match('\\.', x):\n        without_dot.append(x)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7143811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48585223855ff629a0beb134fe45030?s=128&d=identicon&r=PG&f=1", "display_name": "Future Hundri", "link": "https://stackoverflow.com/users/7143811/future-hundri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479338325, "creation_date": 1479337647, "question_id": 40643936, "link": "https://stackoverflow.com/questions/40643936/delete-slightly-repeating-items-from-list-python", "title": "Delete slightly repeating items from list Python", "body": "<p>I have a list. It's Random. I would like to delete items from the list whenever they're repeated.</p>\n\n<p>I would only want these urls(items) in my list.</p>\n\n<pre><code>/watch?v=iOpJywrdCuQ&amp;lc=z13ohzibgwq3yjw4u04cglzhxmioy5phrn00k\n</code></pre>\n\n<p>I would only delete these urls(items) from my list.</p>\n\n<pre><code>/watch?v=iOpJywrdCuQ&amp;lc=z13ohzibgwq3yjw4u04cglzhxmioy5phrn00k.1479303517063659\n</code></pre>\n\n<p><code>urlList</code> is the variable which holds it all.</p>\n\n<pre><code>/watch?v=iOpJywrdCuQ&amp;lc=z12ntbeg5nvptj2pv04chz5roqfpyxpp1to0k\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohzibgwq3yjw4u04cglzhxmioy5phrn00k\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohzibgwq3yjw4u04cglzhxmioy5phrn00k.1479303517063659\n/watch?v=iOpJywrdCuQ&amp;lc=z12zt3fagtymh3nta23dhpsohmjocfwqd04\n/watch?v=iOpJywrdCuQ&amp;lc=z12mv3rgatfcf3jvq22tuzgzcmfadbtvi\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohrfy3mb5xphyh04cd3shfq2bzhr5up00k\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohrfy3mb5xphyh04cd3shfq2bzhr5up00k.1475086029972480\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohrfy3mb5xphyh04cd3shfq2bzhr5up00k.1475086070389366\n/watch?v=iOpJywrdCuQ&amp;lc=z13qulw4jvafgxo1322hdfnitwv5u35d0\n/watch?v=iOpJywrdCuQ&amp;lc=z13qulw4jvafgxo1322hdfnitwv5u35d0.1478197028336117\n/watch?v=iOpJywrdCuQ&amp;lc=z12xxv3r3py3jv5en23vjft4gxb3jhnkx\n/watch?v=iOpJywrdCuQ&amp;lc=z12xxv3r3py3jv5en23vjft4gxb3jhnkx.1478703511076217\n/watch?v=iOpJywrdCuQ&amp;lc=z12fzxwqwlr4xdkao04cflhbawivd1gq2jc\n/watch?v=iOpJywrdCuQ&amp;lc=z12oczcbksudef3cq23psfd4cqjycro5e04\n/watch?v=iOpJywrdCuQ&amp;lc=z12oczcbksudef3cq23psfd4cqjycro5e04.1478790261949273\n/watch?v=iOpJywrdCuQ&amp;lc=z135h1sxqprthvfdl23hsh2qdrmggpzsc\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>/watch?v=iOpJywrdCuQ&amp;lc=z12ntbeg5nvptj2pv04chz5roqfpyxpp1to0k\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohzibgwq3yjw4u04cglzhxmioy5phrn00k\n/watch?v=iOpJywrdCuQ&amp;lc=z12zt3fagtymh3nta23dhpsohmjocfwqd04\n/watch?v=iOpJywrdCuQ&amp;lc=z12mv3rgatfcf3jvq22tuzgzcmfadbtvi\n/watch?v=iOpJywrdCuQ&amp;lc=z13ohrfy3mb5xphyh04cd3shfq2bzhr5up00k\n/watch?v=iOpJywrdCuQ&amp;lc=z13qulw4jvafgxo1322hdfnitwv5u35d0\n/watch?v=iOpJywrdCuQ&amp;lc=z12xxv3r3py3jv5en23vjft4gxb3jhnkx\n/watch?v=iOpJywrdCuQ&amp;lc=z12fzxwqwlr4xdkao04cflhbawivd1gq2jc\n/watch?v=iOpJywrdCuQ&amp;lc=z12oczcbksudef3cq23psfd4cqjycro5e04\n/watch?v=iOpJywrdCuQ&amp;lc=z135h1sxqprthvfdl23hsh2qdrmggpzsc\n</code></pre>\n\n<p>How would I go about this?</p>\n"}, {"tags": ["python", "list", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 1, "last_activity_date": 1479337677, "creation_date": 1479337677, "answer_id": 40643941, "question_id": 40643929, "link": "https://stackoverflow.com/questions/40643929/why-the-new-list-has-to-be-put-inside-the-for-loop-to-prevent-global-change/40643941#40643941", "title": "why the new_list has to be put inside the for loop to prevent global change?", "body": "<p>Because inside the <code>for</code> loop, <code>new_list</code> get's <em>redefined</em>, effectively refering to a different list object for every iteration.</p>\n\n<p>Printing the <code>id</code>s for the second case reveals this:</p>\n\n<pre><code>print(*map(id, my_list))  # Notice the different ids\n140609203176456 140609194670088 140609194608840 140609212158216 140609194670152\n</code></pre>\n\n<p>Outside the loop, you append the same list object, <em>the same reference</em>. Changes will be visible througout all references.</p>\n\n<p>Printing the <code>id</code>s for this case shows the same <code>id</code> (i.e, same list) is present:</p>\n\n<pre><code>print(*map(id, my_list))  # same id.\n140609194670088 140609194670088 140609194670088 140609194670088 140609194670088\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 4780732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c49e0c0f53ab8bc7db19aec5abb0d?s=128&d=identicon&r=PG&f=1", "display_name": "DSL", "link": "https://stackoverflow.com/users/4780732/dsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 40643941, "answer_count": 1, "score": 0, "last_activity_date": 1479337859, "creation_date": 1479337572, "last_edit_date": 1479337859, "question_id": 40643929, "link": "https://stackoverflow.com/questions/40643929/why-the-new-list-has-to-be-put-inside-the-for-loop-to-prevent-global-change", "title": "why the new_list has to be put inside the for loop to prevent global change?", "body": "<p>Would any one tell me the difference between these two blocks? I have hard time figuring out why the second one only changes the nested list locally, while the first changes it globally. it seems to me they do the same thing. </p>\n\n<pre><code>my_list = [ ] \nnew_list = [0, 0, 0 ]## outside the loop\nfor index in range(5):\n    my_list.append(new_list)\nmy_list[0][1] = 5\nprint(my_list)\n\n## result\n[[0, 5, 0], [0, 5, 0], [0, 5, 0], [0, 5, 0], [0, 5, 0]]\n\n\nmy_list = [ ] \nfor index in range(5):\n    new_list = [0, 0, 0 ] ## inside the loop\n    my_list.append(new_list)\nmy_list[0][1] = 5\nprint(my_list)\n## result\n[[0, 5, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]\n</code></pre>\n"}, {"tags": ["python", "operator-keyword"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 4, "creation_date": 1479337647, "post_id": 40643927, "comment_id": 68519985, "body": "<code>i =+ 1</code> is the same thing as <code>i = 1</code>. <code>+</code> is the unary operator here."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1479338278, "post_id": 40643927, "comment_id": 68520177, "body": "See the <a href=\"https://docs.python.org/3/reference/expressions.html#grammar-token-u_expr\" rel=\"nofollow noreferrer\">language reference on unary expressions</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320805, "user_id": 14343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/75e9a11371cbe1566607180863efdf4c?s=128&d=identicon&r=PG", "display_name": "Ned Batchelder", "link": "https://stackoverflow.com/users/14343/ned-batchelder"}, "is_accepted": false, "score": 4, "last_activity_date": 1479337685, "creation_date": 1479337685, "answer_id": 40643943, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and/40643943#40643943", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p><code>i =+ 1</code> is the same as <code>i = +1</code>, or <code>i = 1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 6, "creation_date": 1479338230, "post_id": 40643947, "comment_id": 68520161, "body": "OP seems to understand that. The question was, why <code>+1</code> is not illegal syntax."}], "tags": [], "owner": {"reputation": 1909, "user_id": 4876196, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4368b76bec0fddbb8e507521ee69c7da?s=128&d=identicon&r=PG", "display_name": "Kittsil", "link": "https://stackoverflow.com/users/4876196/kittsil"}, "is_accepted": true, "score": 38, "last_activity_date": 1521476360, "last_edit_date": 1521476360, "creation_date": 1479337694, "answer_id": 40643947, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and/40643947#40643947", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p><code>i+=1</code> is the same as <code>i=i+1</code>, whereas\n<code>i=+1</code> just means <code>i=(+1)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 2, "creation_date": 1479338386, "post_id": 40643967, "comment_id": 68520209, "body": "<code>!--</code> has also been the source of some confusion in <a href=\"http://stackoverflow.com/q/34323527/1547004\">javascript</a>"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 5, "last_activity_date": 1479337813, "creation_date": 1479337813, "answer_id": 40643967, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and/40643967#40643967", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p>Tokenizers don't typically require spaces unless it's necessary to disambiguate (e.g. you need a space, or punctuation of some form between a variable name and a language keyword so the keyword can be recognized).</p>\n\n<p>Thus, <code>x=+y</code>, <code>x =+ y</code> and <code>x = +y</code> are all equivalent, in all cases invoking the unary <code>+</code> operator on <code>y</code> and assigning to <code>x</code>. The unary plus operator isn't commonly used, but just because it's uncommon doesn't mean it's not recognized and accepted.</p>\n\n<p>For comparison, the <code>--&gt;</code> \"operator\" in C/C++ etc. is <a href=\"https://stackoverflow.com/questions/1642028/what-is-the-name-of-the-operator-in-c\">another example where humans looking for spaces and tokenizers ignoring them causes confusion</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338823, "last_edit_date": 1479338823, "creation_date": 1479337869, "answer_id": 40643978, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and/40643978#40643978", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p>There is no syntax error because the expression <code>i =+ 1</code> is the same as <code>i = (+1)</code> and <code>+1</code> is perfectly legitimate. It is a unary operator, not the addition operator. </p>\n"}, {"tags": [], "owner": {"reputation": 4705, "user_id": 3263659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZOJKc.png?s=128&g=1", "display_name": "Mercury", "link": "https://stackoverflow.com/users/3263659/mercury"}, "is_accepted": false, "score": 1, "last_activity_date": 1479757914, "last_edit_date": 1479757914, "creation_date": 1479338066, "answer_id": 40644011, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and/40644011#40644011", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p><code>x=+1</code> is treated as:  <code>x=(+1)</code> <br>\nwhile <code>x+=1</code> is treated as: <code>x=x+1</code></p>\n\n<p>There are binary operators which operates on their left-handside operand and their right-hand side operand (e.g. * multiplication).\n<br>And there are unary operators which takes only right-hand side operand (e.g. ~/! negation).\nThere are operators which can be unary and binary.</p>\n\n<p>The plus sign in python can be used also as right-hand side operator just as minus.</p>\n\n<p>Python Docs:</p>\n\n<blockquote>\n  <p>The unary - (minus) operator yields the negation of its numeric\n  argument.</p>\n  \n  <p>The unary + (plus) operator yields its numeric argument unchanged.</p>\n</blockquote>\n"}], "owner": {"reputation": 307, "user_id": 5728673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/riOaX.jpg?s=128&g=1", "display_name": "faceless", "link": "https://stackoverflow.com/users/5728673/faceless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36112, "favorite_count": 1, "closed_date": 1479338285, "accepted_answer_id": 40643947, "answer_count": 5, "score": 15, "last_activity_date": 1536267223, "creation_date": 1479337561, "last_edit_date": 1536267223, "question_id": 40643927, "link": "https://stackoverflow.com/questions/40643927/the-difference-between-and", "closed_reason": "Duplicate", "title": "The difference between &#39;+=&#39; and &#39;=+&#39;?", "body": "<p>So I have a simple piece of code that prints out the integers 1-10:</p>\n\n<pre><code>i = 0\nwhile i &lt; 10:\n        i += 1\n        print(i)\n</code></pre>\n\n<p>Then if you just change one operator around on line 3, it prints out an infinite amount of 1 integers(which i understand why it does that). Why isn't a syntax error occurring when running this second program? Wouldn't it call a syntax error in the event of an assignment operator being followed by an addition operator??</p>\n\n<pre><code>i = 0\nwhile i &lt; 10:\n        i =+ 1\n        print(i)\n</code></pre>\n"}, {"tags": ["python", "pandas", "sparse-matrix"], "comments": [{"owner": {"reputation": 8174, "user_id": 2319844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886739627f42f94f4e05159428a265fa?s=128&d=identicon&r=PG", "display_name": "Sumner Evans", "link": "https://stackoverflow.com/users/2319844/sumner-evans"}, "edited": false, "score": 0, "creation_date": 1479337389, "post_id": 40643867, "comment_id": 68519897, "body": "So you tried using <code>pivot_table</code>, what went wrong in your attempt? Did it throw an error, was it just too slow? Please elaborate on why it didn&#39;t work for you."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7034104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d699aa9dbf956821afb911e8389d85?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Liu", "link": "https://stackoverflow.com/users/7034104/y-liu"}, "edited": false, "score": 0, "creation_date": 1479338150, "post_id": 40643959, "comment_id": 68520137, "body": "I want to create a matrix with customer as row, and item_id as column."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 1, "user_id": 7034104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d699aa9dbf956821afb911e8389d85?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Liu", "link": "https://stackoverflow.com/users/7034104/y-liu"}, "edited": false, "score": 0, "creation_date": 1479338825, "post_id": 40643959, "comment_id": 68520363, "body": "@Y.Liu I&#39;ve updated my post.  If this isn&#39;t what you want, then you need to show us what you want because telling us isn&#39;t working."}, {"owner": {"reputation": 1, "user_id": 7034104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d699aa9dbf956821afb911e8389d85?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Liu", "link": "https://stackoverflow.com/users/7034104/y-liu"}, "edited": false, "score": 0, "creation_date": 1479396932, "post_id": 40643959, "comment_id": 68549148, "body": "Thank you very much.  I tested on my data. This is exactly what I wanted. Now my customer/item matrix looks like this after I remove the NaN:"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338757, "last_edit_date": 1479338757, "creation_date": 1479337767, "answer_id": 40643959, "question_id": 40643867, "link": "https://stackoverflow.com/questions/40643867/how-to-efficiently-populate-a-matrix-given-a-very-large-table-using-python/40643959#40643959", "title": "How to efficiently populate a matrix given a very large table using python?", "body": "<p>you said <code>'item_id'</code> in the columns and <code>'customer'</code> in the rows.</p>\n\n<pre><code>d_pivt = dt.pivot_table(values='ct_id', index='customer',\n                        columns='item_id', aggfunc='count')\n</code></pre>\n\n<hr>\n\n<p><strong><em>demonstration</em></strong>  </p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(0, 10, (1000, 3)),\n                  columns=['customer', 'item_id', 'ct_id'])\n\ndf.pivot_table('ct_id', 'customer', 'item_id', 'count')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OqTeM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OqTeM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7034104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d699aa9dbf956821afb911e8389d85?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Liu", "link": "https://stackoverflow.com/users/7034104/y-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1479398759, "creation_date": 1479398759, "answer_id": 40659635, "question_id": 40643867, "link": "https://stackoverflow.com/questions/40643867/how-to-efficiently-populate-a-matrix-given-a-very-large-table-using-python/40659635#40659635", "title": "How to efficiently populate a matrix given a very large table using python?", "body": "<p>@piRSquared  Your method works just as I wanted.  Now my customer/item matrix looks like this:\n<a href=\"https://i.stack.imgur.com/iD1Ax.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I was not allowed to add pictures yet. :-(</p>\n\n<p>But i got the matrix I want, whose dimension is 2485x20350. \n You can see by the image link above, there are lots of zeros because a custmer may only buy several hundreds of the total items. \nI tried to compute the item correlation matrix using:</p>\n\n<pre><code>sall_pvtb = sales_all.pivot_table(values='cm_id', index='cstm_num',  \ncolumns = 'it_num', aggfunc='count')\n\nsall_pvtb.fillna(0, inplace = True)\n\nsall_corr = sall_pvtb.corr()\n</code></pre>\n\n<p>But the item correlation computation takes really long time because it is a 20350x20350 size matrix. Correlation computation done sparsely?</p>\n"}], "owner": {"reputation": 1, "user_id": 7034104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d699aa9dbf956821afb911e8389d85?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Liu", "link": "https://stackoverflow.com/users/7034104/y-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479398759, "creation_date": 1479337216, "question_id": 40643867, "link": "https://stackoverflow.com/questions/40643867/how-to-efficiently-populate-a-matrix-given-a-very-large-table-using-python", "title": "How to efficiently populate a matrix given a very large table using python?", "body": "<p>I have a table of three columns 'customer', 'item_id', 'ct_id', but the rows are about 3 million.   The unique 'item_id' has 20350 entries, and the 'customer' has \n2485 entries.  Each customer may buy any number of items among the 20350 kinds of items</p>\n\n<p>The goal is to build a recommend system based on the table.  First I want to construct a matrix of 2485x20350,  whose row is 'custmer' and column is 'item_id'.\nEach element is the occurrence count of the 'customer' &amp; 'item_id' pair in the table.  THen I can build similarity matrix based on this customer/item matrix.</p>\n\n<p>I tried to use pivot_table in pandas, like this:\nd_pivt = dt.pivot_table(index=['cstm_num','it_num'], aggfunc='count'),</p>\n\n<p>I just wondering, with this information, what is the most efficient way to build the matrix I wanted. </p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "scikit-learn", "ipython", "feature-selection"], "answers": [{"tags": [], "owner": {"reputation": 2189, "user_id": 4313064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a3169edbfa182bfcb5981445b46c3473?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4313064/simon"}, "is_accepted": true, "score": 5, "last_activity_date": 1479339735, "creation_date": 1479339735, "answer_id": 40644310, "question_id": 40643831, "link": "https://stackoverflow.com/questions/40643831/value-error-could-not-convert-string-to-float-while-using-sklearn-feature-relev/40644310#40644310", "title": "Value: Error Could not Convert string to float while using Sklearn Feature Relevance", "body": "<p>You need to convert categorical variables to dummies.</p>\n\n<pre><code> df = pd.get_dummies(df)\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2043, "favorite_count": 0, "accepted_answer_id": 40644310, "answer_count": 1, "score": 1, "last_activity_date": 1479339735, "creation_date": 1479337006, "question_id": 40643831, "link": "https://stackoverflow.com/questions/40643831/value-error-could-not-convert-string-to-float-while-using-sklearn-feature-relev", "title": "Value: Error Could not Convert string to float while using Sklearn Feature Relevance", "body": "<p>Hello I have trained and tested data. I am trying to use sklearn's feature relevance Seelct K Best to choose relevant features and draw a bar graph after. However i get this error:</p>\n\n<pre><code>ValueError: could not convert string to float: B\n</code></pre>\n\n<p>But i am starting to think I do have a column in my dataset looking like this which may be the issue:</p>\n\n<pre><code>CancellationCode:\nA\nB\nC\nD\n</code></pre>\n\n<p>If this column is causing a problem how do I resolve this error \nHere is my code below:</p>\n\n<pre><code>import numpy as np\nfrom sklearn.feature_selection import SelectKBest, f_classif\nimport matplotlib.pyplot as plt\n\nselector = SelectKBest(f_classif, k=13)\nselector.fit(X_train, y_train)\n\nscores_select = selector.pvalues_\nprint scores_select\n\n\n# Plotting the bar Graph to visually see the weight of each feature\nplt.bar(range(len(scores_select)), scores_select, align='center')\nplt.xticks(range(len(features_columns)), features_columns, rotation='vertical')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479398812, "post_id": 40644759, "comment_id": 68550542, "body": "I&#39;m trying to apply your solution to the shingling example I added to my original question. Can you provide guidance? If you like, I can post it as a separate question."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 1, "creation_date": 1479399186, "post_id": 40644759, "comment_id": 68550815, "body": "@DanceParty2 I actually had this in mind when I wrote this up.  It&#39;s a very simple modification.  I&#39;ve updated my post."}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479399222, "post_id": 40644759, "comment_id": 68550840, "body": "Wow, this is great. Thank you so much!"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479400099, "post_id": 40644759, "comment_id": 68551417, "body": "One more thing, I notice with a large data frame it takes a while. I ultimately need a list of lists to pass into sci-kit learn&#39;s LSHForest like this: [[1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0],  [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]] ...I know I can wrap np.array().tolist() around it but is there a way to by-pass putting it into a data frame (if that will save time)?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479400241, "post_id": 40644759, "comment_id": 68551505, "body": "I struggled with that as well.  The only way I can improve it (that I can think of) is to use cython.  But I wouldn&#39;t expect dramatic improvements.  I&#39;ll update the post."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479400695, "post_id": 40644759, "comment_id": 68551835, "body": "@DanceParty2 Yeah, not even worth posting.  I&#39;m still figuring out how to use cython, so it could be user error.  Sorry.  If I think of anything, I&#39;ll let you know."}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479401198, "post_id": 40644759, "comment_id": 68552184, "body": "No problem. Thanks for trying!"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1479401707, "post_id": 40644759, "comment_id": 68552497, "body": "By the way, a colleague suggested Scipy&#39;s sparse arrays, which I&#39;m looking into and will update if I find what I need."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1479399151, "last_edit_date": 1479399151, "creation_date": 1479342408, "answer_id": 40644759, "question_id": 40643819, "link": "https://stackoverflow.com/questions/40643819/pandas-n-grams-to-columns/40644759#40644759", "title": "Pandas N-Grams to Columns", "body": "<pre><code>def str_chunk(s, k):\n    i, j = 0, k\n    while j &lt;= len(s):\n        yield s[i:j]\n        i, j = j, j + k\n\ndef chunkit(s, k):\n    return [_ for _ in str_chunk(s, k)]\n\ndef count_chunks(s, k):\n    return pd.value_counts(chunkit(s, k))\n</code></pre>\n\n<hr>\n\n<p><strong><em>demonstration</em></strong>  </p>\n\n<pre><code>f.strings.apply(chunkit, k=3)\n\n0              [Hel]\n1    [Hel, low, orl]\nName: strings, dtype: object\n\nf.strings.apply(count_chunks, k=3).fillna(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HorsK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HorsK.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>shingling</em></strong>  </p>\n\n<pre><code>def str_shingle(s, k):\n    i, j = 0, k\n    while j &lt;= len(s):\n        yield s[i:j]\n        i, j = i + 1, j + 1\n\ndef shingleit(s, k):\n    return [_ for _ in str_shingle(s, k)]\n\ndef count_shingles(s, k):\n    return pd.value_counts(shingleit(s, k))\n\nf.strings.apply(count_shingles, k=3).fillna(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/53pX8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53pX8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 1, "accepted_answer_id": 40644759, "answer_count": 1, "score": 2, "last_activity_date": 1479399151, "creation_date": 1479336904, "last_edit_date": 1479397055, "question_id": 40643819, "link": "https://stackoverflow.com/questions/40643819/pandas-n-grams-to-columns", "title": "Pandas N-Grams to Columns", "body": "<p>Given the following data frame:</p>\n\n<pre><code>import pandas as pd\nd=['Hello', 'Helloworld']\nf=pd.DataFrame({'strings':d})\nf\n    strings\n0   Hello\n1   Helloworld\n</code></pre>\n\n<p>I'd like to split each string into chunks of 3 characters and use those as headers to create a matrix of 1s or 0s, depending on if a given row has the chunk of 3 characters. </p>\n\n<p>Like this:</p>\n\n<pre><code>    Strings     Hel     low     orl\n0   Hello         1       0       0\n1   Helloworld    1       1       1\n</code></pre>\n\n<p>Notice that the string \"Hello\" has a 0 for the \"low\" column as it is only assigning a 1 for exact partial matches. If there is more than 1 match (i.e. if the string were \"HelHel\", it would still only assign a 1 (though it would also be nice to know how to count it and thus assign a 2 instead).</p>\n\n<p>Ultimately, I'm trying to prepare my data for us in an LSHForest via SKLearn.\nTherefore, I anticipate many different string values.</p>\n\n<p>Here's what I've tried so far:</p>\n\n<pre><code>#Split into chunks of exactly 3\ndef split(s, chunk_size):\n    a = zip(*[s[i::chunk_size] for i in range(chunk_size)])\n    return [''.join(t) for t in a]\ncols=[split(s,3) for s in f['strings']]\ncols\n\n[['Hel'], ['Hel', 'low', 'orl']]\n\n#Get all elements into one list:\nimport itertools\ncolsunq=list(itertools.chain.from_iterable(cols))\n#Remove duplicates:\ncolsunq=list(set(colsunq))\ncolsunq\n\n['orl', 'Hel', 'low']\n</code></pre>\n\n<p>So now, all I need to do is create a column in <strong>f</strong> for each element in <strong>colsunq</strong> and add 1 if the string in the 'strings' column has a match with the chunk for each given column header.</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Note:</strong>\nIn case shingling is preferred:</p>\n\n<pre><code>#Shingle into strings of exactly 3\ndef shingle(word):\n    a = [word[i:i + 3] for i in range(len(word) - 3 + 1)]\n    return [''.join(t) for t in a]\n#Shingle (i.e. \"hello\" -&gt; \"hel\",\"ell\",'llo')\na=[shingle(w) for w in f['strings']]\n#Get all elements into one list:\nimport itertools\ncolsunq=list(itertools.chain.from_iterable(a))\n#Remove duplicates:\ncolsunq=list(set(colsunq))\ncolsunq\n['wor', 'Hel', 'ell', 'owo', 'llo', 'rld', 'orl', 'low']\n</code></pre>\n"}, {"tags": ["python", "factorial"], "comments": [{"owner": {"reputation": 369, "user_id": 1255918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ccf4e4e368f8670759c69914df0fa8?s=128&d=identicon&r=PG", "display_name": "PeteyPii", "link": "https://stackoverflow.com/users/1255918/peteypii"}, "edited": false, "score": 0, "creation_date": 1479336890, "post_id": 40643769, "comment_id": 68519695, "body": "What happens to the number of trailing zeros on the iteration where i = 25?"}, {"owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "edited": false, "score": 0, "creation_date": 1479336963, "post_id": 40643769, "comment_id": 68519724, "body": "there are two 5s in 25, one is unaccounted"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1479337022, "post_id": 40643769, "comment_id": 68519747, "body": "Isn&#39;t this program actually just calculating <code>n&#47;&#47;5</code>?"}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1479337411, "post_id": 40643769, "comment_id": 68519901, "body": "this smells of hw. your test case is given by <code>&gt;&gt;&gt; import math &gt;&gt;&gt; math.factorial(30) 265252859812191058636308480000000</code>. You will then get more help if you provide your <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>"}, {"owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1479340028, "post_id": 40643769, "comment_id": 68520710, "body": "@tobias_k no :) check this link for trailing zeroes of factorial <a href=\"http://www.mytechinterviews.com/how-many-trailing-zeros-in-100-factorial\" rel=\"nofollow noreferrer\">mytechinterviews.com/how-many-trailing-zeros-in-100-factoria&zwnj;&#8203;l</a> or <a href=\"https://en.wikipedia.org/wiki/Trailing_zero#Factorial\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Trailing_zero#Factorial</a>"}, {"owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "reply_to_user": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1479344843, "post_id": 40643769, "comment_id": 68522080, "body": "@ShawnMehan why else would anyone count the trailing zeros of a factorial?"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "edited": false, "score": 2, "creation_date": 1479340149, "post_id": 40644006, "comment_id": 68520731, "body": "two for loops is inefficient."}], "tags": [], "owner": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338040, "creation_date": 1479338040, "answer_id": 40644006, "question_id": 40643769, "link": "https://stackoverflow.com/questions/40643769/python-count-the-trailing-zeros-within-a-factorial/40644006#40644006", "title": "Python, count the trailing zeros within a factorial", "body": "<p>Your algorithm has problem:</p>\n\n<pre><code>import math\n\ndef count_zeroes(x):\n    zeroes = 0\n    if x &lt;= 0:\n        return zeroes\n    for i in range(5, x+1, 5):\n        for base in range(int(math.log(i, 5)), 0, -1):\n            if i % pow(5, base) == 0:\n                zeroes += base\n                break\n    return zeroes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2096, "user_id": 6732794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xH8SY.gif?s=128&g=1", "display_name": "lazy dog", "link": "https://stackoverflow.com/users/6732794/lazy-dog"}, "is_accepted": false, "score": 3, "last_activity_date": 1479338112, "creation_date": 1479338112, "answer_id": 40644022, "question_id": 40643769, "link": "https://stackoverflow.com/questions/40643769/python-count-the-trailing-zeros-within-a-factorial/40644022#40644022", "title": "Python, count the trailing zeros within a factorial", "body": "<p>Wikipedia has a <a href=\"https://en.wikipedia.org/wiki/Trailing_zero#Factorial\" rel=\"nofollow noreferrer\">short article</a> on this specific topic, which says that this can be computed with a straight-forward summation that counts factors of 5. </p>\n\n<pre><code>def trailing_zeros_of_factorial(n):\n    assert n &gt;= 0, n\n    zeros = 0\n    q = n\n\n    while q:\n        q //= 5\n        zeros += q\n\n    return zeros\n\n# 32! = 263130836933693530167218012160000000\nprint(trailing_zeros_of_factorial(32)) # =&gt; 7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "edited": false, "score": 0, "creation_date": 1479339143, "post_id": 40644044, "comment_id": 68520473, "body": "This works thanks, could you explain your code a little if its not a problem?"}, {"owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "reply_to_user": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "edited": false, "score": 1, "creation_date": 1479339825, "post_id": 40644044, "comment_id": 68520663, "body": "this link helps <a href=\"http://www.mytechinterviews.com/how-many-trailing-zeros-in-100-factorial\" rel=\"nofollow noreferrer\">mytechinterviews.com/how-many-trailing-zeros-in-100-factoria&zwnj;&#8203;l</a>  basically do while loop as long as x &gt;= i, the <code>zeros += x &#47;&#47; i</code> is this <code>Number of 5\u2019s = 100&#47;5 + 100&#47;25 + 100&#47;125 + \u2026 = 24 (Integer values only)</code> and just multiply by 5 to get the next multiple of 5 :)"}, {"owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "edited": false, "score": 0, "creation_date": 1479346139, "post_id": 40644044, "comment_id": 68522454, "body": "all has become clear! thank you my friend. it took me a while my brain hurts but I finally understand"}, {"owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "edited": false, "score": 0, "creation_date": 1479394377, "post_id": 40644044, "comment_id": 68547142, "body": "would you say the o notation of this code is o log(n)?"}], "tags": [], "owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "is_accepted": true, "score": 5, "last_activity_date": 1479339693, "last_edit_date": 1479339693, "creation_date": 1479338259, "answer_id": 40644044, "question_id": 40643769, "link": "https://stackoverflow.com/questions/40643769/python-count-the-trailing-zeros-within-a-factorial/40644044#40644044", "title": "Python, count the trailing zeros within a factorial", "body": "<pre><code>def count (x):\n    i = 5\n    zeros = 0\n    while x &gt;= i:\n        zeros += x // i\n        i *= 5\n    return zeros\n\nprint(count(30))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11162897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sD430OKnfgE/AAAAAAAAAAI/AAAAAAAAAGo/nZxbh7oWlZs/photo.jpg?sz=128", "display_name": "Dheeraj Joshi", "link": "https://stackoverflow.com/users/11162897/dheeraj-joshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1551923521, "creation_date": 1551923521, "answer_id": 55034865, "question_id": 40643769, "link": "https://stackoverflow.com/questions/40643769/python-count-the-trailing-zeros-within-a-factorial/55034865#55034865", "title": "Python, count the trailing zeros within a factorial", "body": "<p>We would first count the number of multiples of 5 between 1 and n (which is X ), then the number of multiples of 25 ( ~s ), then 125, and so on.\nTo count how many multiples of mare in n, we can just divide n by m</p>\n\n<pre><code>def countFactZeros(num):\n    count = 0\n    i = 5\n    if num &lt; 0:\n        return False\n    while num//i &gt; 0:\n        count = count + num//i\n        i = i * 5\n    return count\n\ncountFactZeros(10) # output should be 2\ncountFactZeros(100) # output should be 24\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5436876, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/154fe3f97ab5a48cf04cd326527fed54?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Dolloway", "link": "https://stackoverflow.com/users/5436876/oscar-dolloway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4860, "favorite_count": 2, "accepted_answer_id": 40644044, "answer_count": 4, "score": 4, "last_activity_date": 1551923521, "creation_date": 1479336646, "last_edit_date": 1479343600, "question_id": 40643769, "link": "https://stackoverflow.com/questions/40643769/python-count-the-trailing-zeros-within-a-factorial", "title": "Python, count the trailing zeros within a factorial", "body": "<p>I am trying to calculate the number of trailing zeros in a factorial.</p>\n\n<pre><code>def count(x):\n    zeros = 0                     \n    for i in range (2,x+1): \n        print(i)\n        if x &gt; 0:\n            if i % 5 == 0:       \n                print(\"count\")    \n                zeros +=1       \n        else:\n            (\"False\")\n    print(zeros)        \n\ncount(30)\n</code></pre>\n\n<p>I think the number of trailing zeros is incorrect. </p>\n\n<p>When using <code>count(30)</code>, there are 7 trailing <code>0</code>'s in 30. However it is returning 6.</p>\n"}, {"tags": ["python", "sublimerepl"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6215798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/270493103289119/picture?type=large", "display_name": "jeaks", "link": "https://stackoverflow.com/users/6215798/jeaks"}, "edited": false, "score": 0, "creation_date": 1479337095, "post_id": 40643805, "comment_id": 68519778, "body": "I don&#39;t know. How do I check?"}, {"owner": {"reputation": 67, "user_id": 6215798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/270493103289119/picture?type=large", "display_name": "jeaks", "link": "https://stackoverflow.com/users/6215798/jeaks"}, "edited": false, "score": 0, "creation_date": 1479337398, "post_id": 40643805, "comment_id": 68519899, "body": "I did that and nothing happend"}, {"owner": {"reputation": 3144, "user_id": 102022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pO8em.jpg?s=128&g=1", "display_name": "eric.christensen", "link": "https://stackoverflow.com/users/102022/eric-christensen"}, "reply_to_user": {"reputation": 67, "user_id": 6215798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/270493103289119/picture?type=large", "display_name": "jeaks", "link": "https://stackoverflow.com/users/6215798/jeaks"}, "edited": false, "score": 0, "creation_date": 1479337552, "post_id": 40643805, "comment_id": 68519947, "body": "Try changing the tab width to 8 and execute your commands again in the SublimeREPL"}], "tags": [], "owner": {"reputation": 3144, "user_id": 102022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pO8em.jpg?s=128&g=1", "display_name": "eric.christensen", "link": "https://stackoverflow.com/users/102022/eric-christensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479337433, "last_edit_date": 1479337433, "creation_date": 1479336828, "answer_id": 40643805, "question_id": 40643730, "link": "https://stackoverflow.com/questions/40643730/sublimerepl-not-showing-correctly/40643805#40643805", "title": "SublimeREPL not showing correctly", "body": "<p>Is your SublimeREPL perhaps configured to display tabs as spaces? At the bottom right of your screen, does it show something like below? </p>\n\n<p><a href=\"https://i.stack.imgur.com/gvsCd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvsCd.png\" alt=\"enter image description here\"></a></p>\n\n<p>If so, click where it says \"Spaces\". That should bring up the following context menu.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AiPhW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AiPhW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Just unselect \"Indent Using Spaces\" and going forward your SublimeREPL should show tabs correctly.</p>\n"}], "owner": {"reputation": 67, "user_id": 6215798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/270493103289119/picture?type=large", "display_name": "jeaks", "link": "https://stackoverflow.com/users/6215798/jeaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479337433, "creation_date": 1479336477, "last_edit_date": 1479337207, "question_id": 40643730, "link": "https://stackoverflow.com/questions/40643730/sublimerepl-not-showing-correctly", "title": "SublimeREPL not showing correctly", "body": "<p>I'm using Sublime3 to write and compile python code.<br>\nFor some reason SublimeREPL doesn't show tabs correctly but cmd does. Why's that and how can I fix it?</p>\n\n<pre><code>    parantezeDeschise=0 # counts '('\n    locatieParanteze=[] # location of '('\n    for i in range(len(self.Propozitie)):\n        print str(i+1)+'.',\n        if self.Propozitie[i]=='(': # for every '(' there should be a TAB\n            print (parantezeDeschise * '\\t'),self.Propozitie[i],'cere formula compusa'\n            parantezeDeschise+=1\n            locatieParanteze.append(i)\n        elif self.Propozitie[i]==')': # every ')' removes a TAB\n            parantezeDeschise-=1\n            print (parantezeDeschise * '\\t'),self.Propozitie[i],'rezolva formula compusa [',locatieParanteze.pop()+1,']'\n        else:\n            print (parantezeDeschise * '\\t'),self.Propozitie[i]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2PVR2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2PVR2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "numpy", "machine-learning"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 3, "last_activity_date": 1479338750, "creation_date": 1479338750, "answer_id": 40644143, "question_id": 40643639, "link": "https://stackoverflow.com/questions/40643639/creating-numpy-array-from-list-gives-wrong-shape/40644143#40644143", "title": "Creating numpy array from list gives wrong shape", "body": "<p>The items in <code>x_seqs</code> vary in length.  When they are all the same length, <code>np.array</code> can make a 3d array from them; when they differ it makes an object array of lists.  Look at the <code>dtype</code> of <code>x_test</code>.  Look at the <code>[len(i) for i in x_test]</code>.</p>\n\n<p>I took your code, added:</p>\n\n<pre><code>x=np.zeros((2000,10))\ny=x.copy()\n...\nprint([len(i) for i in x_seqs])\nprint(x_train.shape)\nprint(x_valid.shape)\nprint(x_test.shape)\n</code></pre>\n\n<p>and got:</p>\n\n<pre><code>1520:~/mypy$ python3 stack40643639.py \n[1500, 1500, 1500, 1400, 1200, 1000, 800, 600, 400, 200]\n(7,)\n(1, 600, 10)\n(2,)\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 3697202, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5Ld9B.jpg?s=128&g=1", "display_name": "tao_oat", "link": "https://stackoverflow.com/users/3697202/tao-oat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3384, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1479338750, "creation_date": 1479335990, "question_id": 40643639, "link": "https://stackoverflow.com/questions/40643639/creating-numpy-array-from-list-gives-wrong-shape", "title": "Creating numpy array from list gives wrong shape", "body": "<p>I'm creating several numpy arrays from a list of numpy arrays, like so:</p>\n\n<pre><code>seq_length = 1500\nseq_diff = 200  # difference between start of two sequences\n# x and y are 2D numpy arrays\nx_seqs = [x[i:i+seq_length,:] for i in range(0, seq_diff*(len(x) // seq_diff), seq_diff)]\ny_seqs = [y[i:i+seq_length,:] for i in range(0, seq_diff*(len(y) // seq_diff), seq_diff)]\nboundary1 = int(0.7 * len(x_seqs))   # 70% is training set\nboundary2 = int(0.85 * len(x_seqs))  # 15% validation, 15% test\nx_train = np.array(x_seqs[:boundary1])\ny_train = np.array(y_seqs[:boundary1])\nx_valid = np.array(x_seqs[boundary1:boundary2])\ny_valid = np.array(y_seqs[boundary1:boundary2])\nx_test = np.array(x_seqs[boundary2:])\ny_test = np.array(y_seqs[boundary2:])\n</code></pre>\n\n<p>I'd like to end up with 6 arrays of shape (n, 1500, 300) where n is either 70%, 15% or 15% of my data for the training, validation and test arrays, respectively.</p>\n\n<p>This is where it goes wrong: the <code>_train</code> and <code>_valid</code> arrays turn out fine, but the <code>_test</code> arrays are one-dimensional arrays of arrays. That is:</p>\n\n<ul>\n<li><code>x_train.shape</code> is <code>(459, 1500, 300)</code></li>\n<li><code>x_valid.shape</code> is <code>(99, 1500, 300)</code></li>\n<li><code>x_test.shape</code> is <code>(99,)</code></li>\n</ul>\n\n<p>But printing <code>x_test</code> verifies that it contains the correct elements - i.e. it's a 99-element long array of <code>(1500, 300)</code> arrays.</p>\n\n<p>Why do the <code>_test</code> matrices get the wrong shape, while the <code>_train</code> and <code>_valid</code> matrices don't?</p>\n"}, {"tags": ["python", "performance", "sockets", "opencv", "video"], "comments": [{"owner": {"reputation": 673, "user_id": 4520565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0qisO.jpg?s=128&g=1", "display_name": "al-eax", "link": "https://stackoverflow.com/users/4520565/al-eax"}, "edited": false, "score": 0, "creation_date": 1479345556, "post_id": 40643594, "comment_id": 68522282, "body": "struct.pack converts your data into a string, right? This string is much larger than your frame data. You should send the raw data."}, {"owner": {"reputation": 63, "user_id": 7156748, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0256bc8eb785d316868624eea55ad1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Eyal S", "link": "https://stackoverflow.com/users/7156748/eyal-s"}, "reply_to_user": {"reputation": 673, "user_id": 4520565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0qisO.jpg?s=128&g=1", "display_name": "al-eax", "link": "https://stackoverflow.com/users/4520565/al-eax"}, "edited": false, "score": 0, "creation_date": 1479384182, "post_id": 40643594, "comment_id": 68539861, "body": "How would i know i got the all frame? my pack makes sure all my data arrives"}, {"owner": {"reputation": 15103, "user_id": 97651, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3bc29819bf2d80bf995666f2bdffa20f?s=128&d=identicon&r=PG", "display_name": "Biranchi", "link": "https://stackoverflow.com/users/97651/biranchi"}, "edited": false, "score": 0, "creation_date": 1567035476, "post_id": 40643594, "comment_id": 101846195, "body": "I ran the server code on python3 and it gave me the following error &quot;Traceback (most recent call last):   File &quot;server.py&quot;, line 22, in &lt;module&gt;     data += conn.recv(131072) TypeError: must be str, not bytes&quot; . And the client code gave me the following error &quot;Traceback (most recent call last):   File &quot;client.py&quot;, line 13, in &lt;module&gt;     clientsocket.sendall(struct.pack(&quot;L&quot;, len(data)) + data) BrokenPipeError: [Errno 32] Broken pipe&quot;"}], "owner": {"reputation": 63, "user_id": 7156748, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0256bc8eb785d316868624eea55ad1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Eyal S", "link": "https://stackoverflow.com/users/7156748/eyal-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479335693, "creation_date": 1479335693, "question_id": 40643594, "link": "https://stackoverflow.com/questions/40643594/speeding-up-program-video-stream", "title": "Speeding up program video stream", "body": "<p>I'm writing a server-client video stream, The server gets the video captured by the clients camera. </p>\n\n<p>My program is working, but my problem is that the video is very slow, with 9+- sec of delay, I wonder how I can speed it up to get better performance?</p>\n\n<p>This is my server:</p>\n\n<pre><code>import socket\nimport cv2\nimport pickle\nimport struct\n\nHOST = '0.0.0.0'\nPORT = 8765\n\ns=socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nprint 'Socket created'\n\ns.bind((HOST, PORT))\nprint 'Socket bind complete'\ns.listen(1)\nprint 'Socket now listening'\n\nconn, addr = s.accept()\ndata = \"\"\npayload_size = struct.calcsize(\"L\")\nwhile True:\n    while len(data) &lt; payload_size:\n        data += conn.recv(131072)\n    packed_msg_size = data[:payload_size]\n\n    data = data[payload_size:]\n    msg_size = struct.unpack(\"L\", packed_msg_size)[0]\n\n    while len(data) &lt; msg_size:\n        data += conn.recv(131072)\n    frame_data = data[:msg_size]\n    data = data[msg_size:]\n\n    frame=pickle.loads(frame_data)\n    #print frame.size\n    cv2.imshow('frame', frame)\n    cv2.waitKey(1)\n</code></pre>\n\n<p>And this is my client:</p>\n\n<pre><code>import cv2\nimport socket\nimport pickle\nimport struct\n\ncap = cv2.VideoCapture(0)\nclientsocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nclientsocket.connect(('localhost', 8765))\n\nwhile True:\n    ret,frame = cap.read()\n    data = pickle.dumps(frame)\n    clientsocket.sendall(struct.pack(\"L\", len(data)) + data)\n</code></pre>\n\n<p>Thanks for helping!</p>\n"}, {"tags": ["python", "datetime", "pandas", "datetime-format"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1479335924, "post_id": 40643565, "comment_id": 68519314, "body": "This is a difficult question and requires fuzzy logic and far more data that you&#39;ve provided.  Using what you have, I can determine that I should convert <code>&#39;2015-12-08&#39;</code> to <code>&#39;2015-08-12&#39;</code> but that is only in the context of what&#39;s next to it.  Point is, this isn&#39;t a pandas question.  Rather, it&#39;s a who do you yell at for messing up the data question."}, {"owner": {"reputation": 39, "user_id": 5792480, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7e5a86722af4194a12842fcbeeec394d?s=128&d=identicon&r=PG&f=1", "display_name": "johndaniel", "link": "https://stackoverflow.com/users/5792480/johndaniel"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1479337129, "post_id": 40643565, "comment_id": 68519793, "body": "I&#39;ve full month data starting from Aug/01 to Aug/31. The problem is that the dateformat of the data from Aug/01 to Aug/12 is in yy-dd-mm and from Aug/13 to Aug/31 is in yy-mm-dd. I just need a consistent datetime format without changing the values column."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1479345785, "post_id": 40643565, "comment_id": 68522347, "body": "How do you know its August data? And not December data? Answer to this question can provide logic in cleanup process."}], "answers": [{"tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": false, "score": 1, "last_activity_date": 1479355744, "creation_date": 1479355744, "answer_id": 40646554, "question_id": 40643565, "link": "https://stackoverflow.com/questions/40643565/inconsistent-datetime-format-in-pandas/40646554#40646554", "title": "Inconsistent Datetime format in Pandas", "body": "<p>First, convert the strings to datatime, starting in the expected correct format, and ask to ignore errors:</p>\n\n<pre><code>df['Correct'] = pd.to_datetime(df.Timestamp,\n                               format='%Y-%d-%m %H:%M:%S',\n                               errors='coerce')\n\n\ndf.Correct\nOut[34]: \n0   2015-08-12 23:58:00\n1   2015-08-12 23:59:00\n2                   NaT\n3                   NaT\nName: Correct, dtype: datetime64[ns]\n</code></pre>\n\n<p>Now you know where to apply the second format:</p>\n\n<pre><code>df.Correct.update(pd.to_datetime(df[df.Correct.isnull()].Timestamp,\n                                 format='%Y-%m-%d %H:%M:%S',\n                                 errors='coerce'))\ndf\nOut[36]: \n             Timestamp  Val             Correct\n0  2015-12-08 23:58:00  3.4 2015-08-12 23:58:00\n1  2015-12-08 23:59:00  3.2 2015-08-12 23:59:00\n2  2015-08-13 00:00:00  1.1 2015-08-13 00:00:00\n3  2015-08-13 00:01:00  0.9 2015-08-13 00:01:00\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5792480, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7e5a86722af4194a12842fcbeeec394d?s=128&d=identicon&r=PG&f=1", "display_name": "johndaniel", "link": "https://stackoverflow.com/users/5792480/johndaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479355744, "creation_date": 1479335590, "question_id": 40643565, "link": "https://stackoverflow.com/questions/40643565/inconsistent-datetime-format-in-pandas", "title": "Inconsistent Datetime format in Pandas", "body": "<p>I've some data for the month of August/2015 in dataframe in the following format:</p>\n\n<pre><code>Timestamp                  Value\n\n2015-12-08 23:58:00          3.4 \n2015-12-08 23:59:00          3.2\n2015-08-13 00:00:00          1.1\n2015-08-13 00:01:00          0.9\n</code></pre>\n\n<p>There are two formats available yy-dd-mm and yy-mm-dd (starting from 13 Aug). I am struggling to convert these to a common format. Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479335514, "post_id": 40643518, "comment_id": 68519157, "body": "And why did you think <code>disksdescription</code> <i>would</i> be accessible in <code>touch_sides</code>?"}, {"owner": {"reputation": 916, "user_id": 579416, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6YLPQ.png?s=128&g=1", "display_name": "ebolyen", "link": "https://stackoverflow.com/users/579416/ebolyen"}, "edited": false, "score": 1, "creation_date": 1479335875, "post_id": 40643518, "comment_id": 68519300, "body": "Python is lexically scoped, that means that a variables existence depends on where it was written, not where it was called (dynamic scope). You should allow <code>disksdescription</code> to be passed into <code>touch_sides</code> as a parameter. You should also avoid assigning over the loop variable <code>left</code> and <code>right</code> as those values will be overwritten by the next iteration of the loop, which typically isn&#39;t super useful."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1479336345, "post_id": 40643518, "comment_id": 68519491, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  Most notably, there should be a driver program to test your code, and the full text of your error messages."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1479336744, "post_id": 40643518, "comment_id": 68519644, "body": "Hmmm ... will a single line <b>run_code()</b> do what you want for running the program?  If so, don&#39;t worry about writing a new test case."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338368, "creation_date": 1479338368, "answer_id": 40644067, "question_id": 40643518, "link": "https://stackoverflow.com/questions/40643518/circles-touching-edges/40644067#40644067", "title": "Circles touching edges", "body": "<p><strong>Overview</strong></p>\n\n<p>You have quite a few basic problems in this code.  I'm going to back off and try to solve a couple of your process problems.</p>\n\n<p>Most of all, I strongly recommend that you adopt incremental programming: write a few lines of code, just a single step or two of logic.  Then test that until you're sure it does what you want.  Only then do you write more code.</p>\n\n<p>The advantage of this is that problems are usually easy to debug: only the new 2-5 lines are suspect.  Contrast this with your current situation: you have several errors; fixing any one of them won't give you an appreciably better result, so it's hard for you to learn what you did wrong until you get all of them at once.</p>\n\n<p><strong>What is a function?</strong></p>\n\n<p>Think of it like some sort of security set-up, perhaps like the pass-through window to a diner's kitchen.  The server sticks an order (slip of paper) through the window.  When the cook is done, plates of food come back.  <em>All</em> of the communication goes through that window.  When we ask for an omelet, for all we know, the cook is slicing meat bits off a full side of beef on a rotisserie ... or nuking some frozen stuff.  Can't see it, can't tell; that's a separate room with opaque walls.</p>\n\n<p><strong>Which means what to me?</strong></p>\n\n<p>You have three \"rooms\" in your program: the (trivial) main program, <strong>run_code</strong>, and <strong>touch_sides</strong>.  None of them can see inside the others.  The variable <strong>left</strong> in <strong>run_code</strong> has no relation to the variable <strong>left</strong> in <strong>touch_sides</strong>.  These are entirely separate entities, no more connected than, say, <strong>Kim</strong> Jong Il and <strong>Kim</strong> Kardashian.</p>\n\n<p>In particular, the first line of <strong>touch_sides</strong> is an ultimate <em>huh?</em> moment for the Python compiler.  There is no defined thing called diskdescription.  Farther down, you spend work to get values for <strong>left</strong> and <strong>right</strong>, but then you don't slide them back through the window.  <strong>run_code</strong> has no idea that you did anything useful in there.</p>\n\n<p><strong>What to fix</strong></p>\n\n<ol>\n<li>Go back and do the simple exercises that you skipped.  Their purpose was to keep you from making all these mistakes at once.  Write trivial functions and trivial calls.  Learn to use the input parameters and return values.</li>\n<li>Practice incremental programming.  Comment out the bodies of your functions.  Now, run the program, a simple call to <strong>run_code()</strong>.  It won't do anything, but it does so without error.</li>\n<li>Next, put \"stub\" code into <strong>touch_sides</strong>: don't compute anything, but print the parameter values.  Ignore the input parameters and return False for left and right.  Add code to <strong>run_code</strong> that calls <strong>touch_sides</strong> and prints the results.</li>\n</ol>\n\n<p>At this point, you know that you can reliably pass values between the functions.  <em>Now</em> you can add the actual code.</p>\n\n<hr>\n\n<p><strong>What else?</strong></p>\n\n<p>Get comfortable with the concept of a boolean expression.  Learn that your original code</p>\n\n<pre><code>if x &lt;= radius:\n    left = True\nelse:\n    left = False\n</code></pre>\n\n<p>Reduces directly to</p>\n\n<pre><code>left = (x &lt;= radius)    # the parentheses aren't necessary\n</code></pre>\n\n<ul>\n<li>Note that you have two variables, left and right, which are trying to describe properties of a list of disks.</li>\n<li>Note that these are the same variables that you're using to iterate through a list of coordinates.  They can't do both at once -- make a couple more storage areas, such as <strong>left_touches</strong> and <strong>right_touches</strong>.</li>\n</ul>\n\n<p>That should be enough for now.  Live Long, And Program.</p>\n"}], "owner": {"reputation": 87, "user_id": 7153217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1abdf00bef9e3b5b60f31de7f66c1da0?s=128&d=identicon&r=PG&f=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7153217/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479338853, "creation_date": 1479335378, "last_edit_date": 1479338853, "question_id": 40643518, "link": "https://stackoverflow.com/questions/40643518/circles-touching-edges", "title": "Circles touching edges", "body": "<p>I am struggling with a program to tell whether a created disk touches the edge of a predefined box.  The parser keeps saying things such as</p>\n\n<pre><code>NameError: global name 'disksdescription' is not defined\nWarning: variable 'left' is assigned to, but never used\n</code></pre>\n\n<p>The code so far is:</p>\n\n<pre><code>import numpy.random as nr\n\ndef touch_sides(disk, radius, x, y):\n    for disk in disksdescription:\n        for left in disk.values()[2]:\n            if x &lt;= radius:\n                left = True\n            else:\n                left = False\n        for right in disk.values()[3]:\n            if x &gt;= 1-radius:\n                right = True\n            else:\n                right = False        \n\n\ndef run_code():\n\n    radius = 0.1\n\n    coordinates = nr.uniform(size=(1,2))\n    print coordinates\n    disksdescription = []\n\n    for row in range(0, coordinates):\n\n        x = coordinates[row, 0]\n        y = coordinates[row, 1]\n\n        disksdescription.append({'x': x, 'y': y, 'left': left, 'right': right})\n        touch_sides(coordinates, radius, x, y)\n\n        print disksdescription\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 4, "creation_date": 1479335393, "post_id": 40643500, "comment_id": 68519106, "body": "You didn&#39;t ask a question. What do you need help with? Also, your indentation is broken."}, {"owner": {"reputation": 1887, "user_id": 6510101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GlJwX.png?s=128&g=1", "display_name": "D3181", "link": "https://stackoverflow.com/users/6510101/d3181"}, "edited": false, "score": 0, "creation_date": 1479335498, "post_id": 40643500, "comment_id": 68519150, "body": "I believe he is asking about threading his program essentially but its a little unclear from the description, do you wish to run other code outside of your loop?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479339771, "post_id": 40643500, "comment_id": 68520655, "body": "use <code>threading</code> module or <code>root.after(miliseconds, function_name)</code> to execute function with delay - so you will no need <code>while</code> loops."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1479355088, "creation_date": 1479355088, "answer_id": 40646467, "question_id": 40643500, "link": "https://stackoverflow.com/questions/40643500/tkinter-try-to-keep-using-the-program-on-while-executing/40646467#40646467", "title": "Tkinter, try to keep using the program on while executing", "body": "<p>You can use <code>root.after(miliseconds, function_name, argument)</code> to execute function with delay and <code>root.mainloop()</code> (and program) will work normally.</p>\n\n<p>You can use <code>datetime</code> to convert text to datetime object, substract two dates and get difference in milliseconds.</p>\n\n<pre><code>try:\n    import tkinter as tk\n    import tkinter.messagebox as tkMessageBox\n    print(\"Python 3\")\nexcept:\n    import Tkinter as tk\n    import tkMessageBox\n    print(\"Python 2\")\n\nfrom datetime import datetime as dt\n\n# --- functions ---\n\ndef callback():\n    var_open = open_hour.get()\n    var_close = close_hour.get()\n\n    if not validateDate(var_open, var_close):\n        tkMessageBox.showinfo(\"Error\", \"Incorrect times\")\n    else:\n        # current date and time \n        current = dt.now()\n        print('current:', current)\n\n        # convert strings to `time` object\n        time_open = dt.strptime(var_open, '%H:%M').time()\n        time_close = dt.strptime(var_close, '%H:%M').time()\n\n        print('time_open:', time_open)\n        print('time_close:', time_close)\n\n        # combine `current date` with `time`\n        today_open = dt.combine(current, time_open)\n        today_close = dt.combine(current, time_close)\n\n        print('today_open:', today_open)\n        print('today_close:', today_close)\n\n        # substract dates and get milliseconds\n        milliseconds_open = (today_open - current).seconds * 1000\n        milliseconds_close = (today_close - current).seconds * 1000\n\n        print('milliseconds_open:', milliseconds_open)\n        print('milliseconds_close:', milliseconds_close)\n\n        # run functions with delay\n        root.after(milliseconds_open, show_open_message, var_open)\n        root.after(milliseconds_close, show_close_message, var_close)\n\ndef validateDate(time1, time2):\n    # TODO: check dates\n    return True\n\ndef show_open_message(arg):\n    tkMessageBox.showinfo(\"Info\", \"Open time: \" + arg)\n\ndef show_close_message(arg):\n    tkMessageBox.showinfo(\"Info\", \"Close time: \" + arg)\n\n# --- main ---\n\nroot = tk.Tk()\n\nopen_hour = tk.StringVar()\nclose_hour = tk.StringVar()\n\ne1 = tk.Entry(root, textvariable=open_hour)\ne1.pack()\ne2 = tk.Entry(root, textvariable=close_hour)\ne2.pack()\n\nb = tk.Button(root, text=\"Start\", command=callback)\nb.pack()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7141866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bc6b1b391c4d6015b5c2e0f45d22da3?s=128&d=identicon&r=PG&f=1", "display_name": "Rasimus.84", "link": "https://stackoverflow.com/users/7141866/rasimus-84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 40646467, "answer_count": 1, "score": -5, "last_activity_date": 1479355088, "creation_date": 1479335252, "last_edit_date": 1479338523, "question_id": 40643500, "link": "https://stackoverflow.com/questions/40643500/tkinter-try-to-keep-using-the-program-on-while-executing", "title": "Tkinter, try to keep using the program on while executing", "body": "<p>How can I maintain the execution of my program whilst the following loop is executing?</p>\n\n<pre><code>def callback():\n    var=OpenHour.get()\n    var1=CloseHour.get()\n    actual = 0\n    if not validateDate(var, var1):\n        tkMessageBox.showinfo(\"Error\",\"Datos o formato incorrecto, deberia ser hh:mm\")\n    else:\n        while var != actual:\n            actual = datetime.datetime.now().time().strftime('%H:%M')\n        print \"ya acabe voy al second while\"\n        while var1 != actual:\n            actual = datetime.datetime.now().time().strftime('%H:%M')\n        tkMessageBox.showinfo(\"Exito\",\"Se ha terminado el ciclo\")\n\n        #tkMessageBox.showinfo(\"Exito\",\"La programacion se ha \\nrealizado de la manera correcta\")\n\nb = Button(VentanaPersiana, text=\"Programar\", width=10, command=callback)\nb.pack()\n</code></pre>\n"}, {"tags": ["python", "sql-server", "excel", "odbc", "xlsxwriter"], "answers": [{"tags": [], "owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "is_accepted": false, "score": 2, "last_activity_date": 1479338078, "creation_date": 1479338078, "answer_id": 40644014, "question_id": 40643462, "link": "https://stackoverflow.com/questions/40643462/from-sql-database-to-excel-with-python/40644014#40644014", "title": "From SQL Database to Excel with Python", "body": "<p><code>pandas</code> is the easiest bet for this. Here's an example using sqlite as the database backend:</p>\n\n<pre><code>In [38]: import pandas as pd\n\nIn [39]: df\nOut[39]:\n          0         1         2         3         4\n0  0.092719  0.664147  0.677834  0.605845  0.569223\n1  0.656272  0.321661  0.294219  0.818676  0.010610\n2  0.041692  0.721683  0.163525  0.175113  0.580234\n3  0.852775  0.106076  0.049080  0.649362  0.265763\n4  0.481842  0.942276  0.462951  0.386705  0.205302\n\nIn [40]: df.to_sql(\"tbl\", sqlite3.connect(\"test.sqlite\"), index=False)\n\nIn [41]: new_df = pd.read_sql(\"select * from tbl\", sqlite3.connect(\"test.sqlite\"))\n\nIn [42]: new_df\nOut[42]:\n          0         1         2         3         4\n0  0.092719  0.664147  0.677834  0.605845  0.569223\n1  0.656272  0.321661  0.294219  0.818676  0.010610\n2  0.041692  0.721683  0.163525  0.175113  0.580234\n3  0.852775  0.106076  0.049080  0.649362  0.265763\n4  0.481842  0.942276  0.462951  0.386705  0.205302\n\nIn [43]: new_df.to_excel(\"out.xlsx\")\n</code></pre>\n\n<p>Lines 41 and 43 are the main ones, and this results in a single sheet Excel doc named <code>out.xlsx</code> in the current folder.</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 7170136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa2749902dbe2d72aabfe09ceb1a023?s=128&d=identicon&r=PG&f=1", "display_name": "iUknwn", "link": "https://stackoverflow.com/users/7170136/iuknwn"}, "is_accepted": false, "score": 1, "last_activity_date": 1479338115, "creation_date": 1479338115, "answer_id": 40644024, "question_id": 40643462, "link": "https://stackoverflow.com/questions/40643462/from-sql-database-to-excel-with-python/40644024#40644024", "title": "From SQL Database to Excel with Python", "body": "<p>Since you already have your data, it seems like your question is simply how to get your data into Excel. Let's say you have data in an object named <code>rows</code>, which is a list of result rows.</p>\n\n<pre><code>import xlsxwriter\nworkbook = xlsxwriter.Workbook('YourResults.xlsx')\nworksheet = workbook.add_worksheet()\n\nrow = 0\ncol = 0\n\nfor row_data in rows:\n  worksheet.write(row, col, row_data.1)\n  worksheet.write(row, col+1, row_data.2)\n  worksheet.write(row, col+2, row_data.3)\n  row += 1\n\nworkbook.close()\n</code></pre>\n\n<p>This should write rows of data to your spreadsheet. You can view the xlsxwriter tutorial here: <a href=\"https://xlsxwriter.readthedocs.io/tutorial01.html\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/tutorial01.html</a></p>\n\n<p>Just as an aside, you can also access SQL and Excel via ADO (using COM), however, if you're just beginning with Python, that might be a bit more challenging. If you're interested in looking at that later, here's a primer on ADO in python: <a href=\"http://mayukhbose.com/python/ado/index.php\" rel=\"nofollow noreferrer\">http://mayukhbose.com/python/ado/index.php</a></p>\n"}, {"tags": [], "owner": {"reputation": 3302, "user_id": 1672826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oHzb8.jpg?s=128&g=1", "display_name": "skytaker", "link": "https://stackoverflow.com/users/1672826/skytaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1479765111, "last_edit_date": 1479765111, "creation_date": 1479338197, "answer_id": 40644033, "question_id": 40643462, "link": "https://stackoverflow.com/questions/40643462/from-sql-database-to-excel-with-python/40644033#40644033", "title": "From SQL Database to Excel with Python", "body": "<p>If the <a href=\"http://pandas.pydata.org/\" rel=\"nofollow noreferrer\">Pandas</a> package is available to you, you can easily dump a DataFrame to an Excel spreadsheet. Formatting is also accessible. You'll need to get the data into a DataFrame by appending rows to a list (not sure how pyodbc works). Something like:</p>\n\n<pre><code>import pandas as pd\n\ndata = []\n...\nfor rows in cursor:\n    for row in rows:\n        data.append(row)\n\ndf = pd.DataFrame(data)\n</code></pre>\n\n<p>Then dump to Excel.</p>\n\n<pre><code>def df_to_excel(path,data_frame):\n    writer = pd.ExcelWriter(path, engine='xlsxwriter')\n    data_frame.to_excel(writer, index=False, sheet_name='SHEET0')    # sheet 0\n    writer.save()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4625042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2156eab0e24e62fadbd8daac6d6fe0b5?s=128&d=identicon&r=PG", "display_name": "Erinna00", "link": "https://stackoverflow.com/users/4625042/erinna00"}, "edited": false, "score": 0, "creation_date": 1479403141, "post_id": 40644034, "comment_id": 68553396, "body": "Hi when I try to run this I get the following error: TypeError: Unsupported type &lt;type &#39;pyodbc.Row&#39;&gt; in write()"}, {"owner": {"reputation": 4624, "user_id": 1873758, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d7a34bb736e9c2143c1d4a9c7f141dad?s=128&d=identicon&r=PG&f=1", "display_name": "ipinak", "link": "https://stackoverflow.com/users/1873758/ipinak"}, "reply_to_user": {"reputation": 63, "user_id": 4625042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2156eab0e24e62fadbd8daac6d6fe0b5?s=128&d=identicon&r=PG", "display_name": "Erinna00", "link": "https://stackoverflow.com/users/4625042/erinna00"}, "edited": false, "score": 0, "creation_date": 1479418698, "post_id": 40644034, "comment_id": 68562114, "body": "Use <code>row.column</code> where <code>column</code> is the name of the column in your table. So if you have a table with columns <code>username</code>, <code>password</code> then you will substitute that with the value. The Row object is apparently not supported. The types supported are: <code>string</code>, <code>number</code>, <code>formula</code>, <code>None</code>. <a href=\"https://xlsxwriter.readthedocs.io/worksheet.html#write\" rel=\"nofollow noreferrer\">xlsxwriter.readthedocs.io/worksheet.html#write</a>"}], "tags": [], "owner": {"reputation": 4624, "user_id": 1873758, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d7a34bb736e9c2143c1d4a9c7f141dad?s=128&d=identicon&r=PG&f=1", "display_name": "ipinak", "link": "https://stackoverflow.com/users/1873758/ipinak"}, "is_accepted": false, "score": 1, "last_activity_date": 1479338198, "creation_date": 1479338198, "answer_id": 40644034, "question_id": 40643462, "link": "https://stackoverflow.com/questions/40643462/from-sql-database-to-excel-with-python/40644034#40644034", "title": "From SQL Database to Excel with Python", "body": "<pre><code>import xlsxwriter\n\nworkbook = xlsxwriter.Workbook('your_excel.xlsx')\nworksheet = workbook.add_worksheet()\n</code></pre>\n\n<p>The first version writes one value (i.e. <code>row</code>) in each column sequentially.</p>\n\n<pre><code>for index, row in enumerate(cursor):\n    worksheet.write(0, index, row)\nworkbook.close()\n</code></pre>\n\n<p>The second version writes one value (i.e. <code>row</code>) in each row sequentially.</p>\n\n<pre><code>for index, row in enumerate(cursor):\n   worksheet.write(index, 0, row)\nworkbook.close()\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4625042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2156eab0e24e62fadbd8daac6d6fe0b5?s=128&d=identicon&r=PG", "display_name": "Erinna00", "link": "https://stackoverflow.com/users/4625042/erinna00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7215, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1479765111, "creation_date": 1479335036, "last_edit_date": 1479337697, "question_id": 40643462, "link": "https://stackoverflow.com/questions/40643462/from-sql-database-to-excel-with-python", "title": "From SQL Database to Excel with Python", "body": "<p>I am new to Python. I've successfully connected to my SQL database via an odbc connection and I am pulling data from a table. How do I then get that data into a Excel workbook. Preferably using the xlsxwriter module. </p>\n\n<pre><code>import pyodbc\ncnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=SQLSERVER;PORT=XX;DATABASE=dbname;UID=sa;PWD=##')\ncursor = cnxn.cursor()\ncursor.execute(\"select * from T1 where C2 not like '%text%'\")\nfor row in cursor:\n        print row.1, row.2, row3\n\ncursor.close()\ncnxn.close()\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479335169, "post_id": 40643461, "comment_id": 68519017, "body": "What do you mean <i>&quot;not permissible&quot;</i>? Why are you checking <code>k in n</code> - what would you expect from e.g. <code>27 in 27</code>? Did you mean <code>k in l</code>?"}, {"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1479335215, "post_id": 40643461, "comment_id": 68519041, "body": "<code>n</code> is an integer, so <code>k</code> can&#39;t be &quot;in&quot; it. Do you want <code>d2 = {k:v for k,v in d.items() if k in l}</code> (without the <code>for</code> loop) instead?"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 1893110, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ddf68e7ef9381133d112edb8e2ed538?s=128&d=identicon&r=PG", "display_name": "user1893110", "link": "https://stackoverflow.com/users/1893110/user1893110"}, "edited": false, "score": 0, "creation_date": 1479335262, "post_id": 40643493, "comment_id": 68519058, "body": "Printing d2 just returns:     {31: 0} for some reason"}, {"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "reply_to_user": {"reputation": 211, "user_id": 1893110, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ddf68e7ef9381133d112edb8e2ed538?s=128&d=identicon&r=PG", "display_name": "user1893110", "link": "https://stackoverflow.com/users/1893110/user1893110"}, "edited": false, "score": 0, "creation_date": 1479335365, "post_id": 40643493, "comment_id": 68519095, "body": "@user1893110 Use the exact code above ... your <code>for</code> loop is causing the problem."}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1479335717, "post_id": 40643493, "comment_id": 68519243, "body": "Simple enough. For performance purposes, I&#39;d use a set instead of a list, but this is tiny enough for it to not make a difference."}], "tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": true, "score": 7, "last_activity_date": 1492718183, "last_edit_date": 1492718183, "creation_date": 1479335189, "answer_id": 40643493, "question_id": 40643461, "link": "https://stackoverflow.com/questions/40643461/filtering-key-values-from-a-dict-using-values-from-a-list/40643493#40643493", "title": "Filtering key,values from a dict using values from a list", "body": "<p>It would be enough to get a filtered dict in this way:</p>\n\n<pre><code>d = {27: 32, 28: 41, 29: 29, 30: 29, 31: 67, 32: 65}\nl = set([27, 30, 31])\nd2 = {k:v for k,v in d.items() if k in l}\n\nprint(d2)\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>{27: 32, 30: 29, 31: 67}\n</code></pre>\n\n<p>The expression <code>... if k in n</code> within your list comprehension while iterating through <code>for n in l:</code> means that you are searching a numerical key within a digit(number) - it's like we are searching <code>27 in 27</code> which is pointless in this case.<br>\nAlso, <code>set</code> object would be preferable in case of large sequences. </p>\n\n<blockquote>\n  <p>Membership testing with sets and dictionaries is much faster, O(1), than searching sequences, O(n)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 211, "user_id": 1893110, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ddf68e7ef9381133d112edb8e2ed538?s=128&d=identicon&r=PG", "display_name": "user1893110", "link": "https://stackoverflow.com/users/1893110/user1893110"}, "edited": false, "score": 0, "creation_date": 1479335375, "post_id": 40643495, "comment_id": 68519100, "body": "But I&#39;d also expect it to produce the key:value pairs for 27 and 30"}, {"owner": {"reputation": 7897, "user_id": 5091346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/MEVJT.jpg?s=128&g=1", "display_name": "Andrii Abramov", "link": "https://stackoverflow.com/users/5091346/andrii-abramov"}, "reply_to_user": {"reputation": 211, "user_id": 1893110, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ddf68e7ef9381133d112edb8e2ed538?s=128&d=identicon&r=PG", "display_name": "user1893110", "link": "https://stackoverflow.com/users/1893110/user1893110"}, "edited": false, "score": 0, "creation_date": 1479335464, "post_id": 40643495, "comment_id": 68519131, "body": "@user1893110 than you shouldn&#39;t reassign in each iteration, but add to dictionary instead"}], "tags": [], "owner": {"reputation": 7897, "user_id": 5091346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/MEVJT.jpg?s=128&g=1", "display_name": "Andrii Abramov", "link": "https://stackoverflow.com/users/5091346/andrii-abramov"}, "is_accepted": false, "score": 0, "last_activity_date": 1479335215, "creation_date": 1479335215, "answer_id": 40643495, "question_id": 40643461, "link": "https://stackoverflow.com/questions/40643461/filtering-key-values-from-a-dict-using-values-from-a-list/40643495#40643495", "title": "Filtering key,values from a dict using values from a list", "body": "<p>Well, there is a typo in your code:</p>\n\n<pre><code>d2 = {k:v for k,v in d.items() if k in n}\n</code></pre>\n\n<p><code>if k in n</code> produces </p>\n\n<blockquote>\n  <p>TypeError: argument of type 'int' is not iterable</p>\n</blockquote>\n\n<p>because <code>in</code> can be applied only to an iterable object.\nIf you change it to </p>\n\n<pre><code> d2 = {k:v for k,v in d.items() if k == n}\n</code></pre>\n\n<p>it will work properly and produce</p>\n\n<blockquote>\n  <p>d2<br>\n  {31: 67}</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1479335745, "post_id": 40643502, "comment_id": 68519256, "body": "Would result in a <code>KeyError</code> being raised if anythin in <code>l</code> is not also in <code>d</code>."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 2, "last_activity_date": 1479335865, "last_edit_date": 1479335865, "creation_date": 1479335268, "answer_id": 40643502, "question_id": 40643461, "link": "https://stackoverflow.com/questions/40643461/filtering-key-values-from-a-dict-using-values-from-a-list/40643502#40643502", "title": "Filtering key,values from a dict using values from a list", "body": "<p>The most efficient way to do what you want is:</p>\n\n<pre><code>d2 = {k:d[k] for k in l}\n</code></pre>\n\n<p>If it's possible that <code>l</code> contains items that aren't keys in <code>d</code>:</p>\n\n<pre><code>d2 = {k:d[k] for k in l if k in d}\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 1893110, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ddf68e7ef9381133d112edb8e2ed538?s=128&d=identicon&r=PG", "display_name": "user1893110", "link": "https://stackoverflow.com/users/1893110/user1893110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 40643493, "answer_count": 3, "score": 1, "last_activity_date": 1492718183, "creation_date": 1479335036, "question_id": 40643461, "link": "https://stackoverflow.com/questions/40643461/filtering-key-values-from-a-dict-using-values-from-a-list", "title": "Filtering key,values from a dict using values from a list", "body": "<p>Suppose I have a dict like so:</p>\n\n<pre><code>d = {27: 32, 28: 41, 29: 29, 30: 29, 31: 67, 32: 65}\n</code></pre>\n\n<p>And a list:</p>\n\n<pre><code>l = [27, 30, 31]\n\nfor n in l:\n            d2 = {k:v for k,v in d.items() if k in n}\n</code></pre>\n\n<p>Why is this not permissible? What can I do instead?</p>\n"}, {"tags": ["python", "sqlite", "insert"], "answers": [{"tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": true, "score": 2, "last_activity_date": 1479335122, "creation_date": 1479335122, "answer_id": 40643479, "question_id": 40643456, "link": "https://stackoverflow.com/questions/40643456/insert-does-not-work-in-sqlite-with-python/40643479#40643479", "title": "Insert does not work in Sqlite with Python", "body": "<p><code>INDEX</code> is a reserved word in SQL. You must escape it appropriately in order to use it.</p>\n\n<pre><code>'''..., `index`, ...'''\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 4500260, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-IEcr5sTJMdI/AAAAAAAAAAI/AAAAAAAABDc/Y54_uTV6R5Q/photo.jpg?sz=128", "display_name": "\u015eansal Birba\u015f", "link": "https://stackoverflow.com/users/4500260/%c5%9eansal-birba%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 40643479, "answer_count": 1, "score": 1, "last_activity_date": 1479335737, "creation_date": 1479335010, "last_edit_date": 1479335737, "question_id": 40643456, "link": "https://stackoverflow.com/questions/40643456/insert-does-not-work-in-sqlite-with-python", "title": "Insert does not work in Sqlite with Python", "body": "<p>I wrote the following code:</p>\n\n<pre><code>for device_index in range(total_devices):\n    slave_address = device_index+1\n    offset = device_index * 10\n    for i in range(registers_per_device):\n        register = offset + i\n        if i==0 :\n            values = ('h', register, 85)\n        elif i==1 :\n            values = ['h', register, 170]\n        elif i==2 :\n            values = ['h', register, 34]\n        elif i==3 :\n            values = ['h', register, 1]\n        elif i==4 :\n            values = ['h', register, 0]\n        elif i==5 :\n            values = ['h', register, 200]\n        elif i==6 :\n            values = ['h', register, 200]\n        elif i==7 :\n            values = ['h', register, slave_address]\n        elif i==8 :\n            values = ['h', register, 0]\n        elif i==9 :\n            values = ['h', register, 0]\n\n        c.execute('''INSERT INTO deneme(type, index, value) VALUES(?,?,?)''', values)\n\n        conn.commit()\n</code></pre>\n\n<p>When I run this code, I get an error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"C:\\Users\\SanKontrol\\Desktop\\initialize_db.py\", line 41, in \n      c.execute('''INSERT INTO deneme(type, index, value) VALUES(?,?,?)''', values) OperationalError: near \"index\": syntax error</p>\n</blockquote>\n\n<p>I tried many variations but still can't figure out the problem. </p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 2289, "user_id": 3142347, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Tbfqk.jpg?s=128&g=1", "display_name": "tupan", "link": "https://stackoverflow.com/users/3142347/tupan"}, "edited": false, "score": 0, "creation_date": 1479336237, "post_id": 40643447, "comment_id": 68519436, "body": "It seems you are passing an object <code>Friend2</code> to your serializer which cannot interpret correct since your <code>Friend2</code> model does not have the attributes your <code>User</code> model has such as <code>username</code>. I know what I said seems pretty obvious. I&#39;m trying to think in a way to fix that..."}, {"owner": {"reputation": 2289, "user_id": 3142347, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Tbfqk.jpg?s=128&g=1", "display_name": "tupan", "link": "https://stackoverflow.com/users/3142347/tupan"}, "edited": false, "score": 0, "creation_date": 1479336950, "post_id": 40643447, "comment_id": 68519714, "body": "<code>Friend2Serializer</code> expects a <code>queryset</code> which should contain all the fields, but it only has <code>user</code>, and <code>add_field</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1794, "user_id": 5688175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33bc30bff78bd69ebff12290b52f49a7?s=128&d=identicon&r=PG&f=1", "display_name": "floflo29", "link": "https://stackoverflow.com/users/5688175/floflo29"}, "edited": false, "score": 0, "creation_date": 1479370576, "post_id": 40644780, "comment_id": 68530845, "body": "I totally agree with you that my Friend2 model has only user and add_field as attributes. However, as mentionned in this post: <a href=\"http://stackoverflow.com/questions/18517438/django-rest-framework-make-onetoone-relation-ship-feel-like-it-is-one-model\" title=\"django rest framework make onetoone relation ship feel like it is one model\">stackoverflow.com/questions/18517438/&hellip;</a>, Django should be able to &quot;guess&quot; that the username attributes is an attribute of my User model, no?"}], "tags": [], "owner": {"reputation": 1968, "user_id": 1718122, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/doEsD.jpg?s=128&g=1", "display_name": "denvaar", "link": "https://stackoverflow.com/users/1718122/denvaar"}, "is_accepted": true, "score": 0, "last_activity_date": 1479342570, "creation_date": 1479342570, "answer_id": 40644780, "question_id": 40643447, "link": "https://stackoverflow.com/questions/40643447/missing-field-in-a-django-user-custom-model/40644780#40644780", "title": "Missing field in a Django User custom model", "body": "<p>The <code>Friend2</code> model has a <code>user</code> field, not <code>username</code>. Replace <code>username</code> with <code>user</code> in your serializer class.</p>\n"}], "owner": {"reputation": 1794, "user_id": 5688175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33bc30bff78bd69ebff12290b52f49a7?s=128&d=identicon&r=PG&f=1", "display_name": "floflo29", "link": "https://stackoverflow.com/users/5688175/floflo29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 40644780, "answer_count": 1, "score": 1, "last_activity_date": 1479573983, "creation_date": 1479334961, "last_edit_date": 1495541626, "question_id": 40643447, "link": "https://stackoverflow.com/questions/40643447/missing-field-in-a-django-user-custom-model", "title": "Missing field in a Django User custom model", "body": "<p>After experimenting with classical serializers in Django REST, I am currently trying to work with custom models i.e. my model has a <code>OneToOneField</code> field.</p>\n\n<p>My model (in <code>models.py</code>) is a custom <code>User</code>:</p>\n\n<pre><code>class Friend2(models.Model):\n    user = models.OneToOneField(User)\n    add_field = models.CharField(max_length=15)\n</code></pre>\n\n<p>And I serialize it (in <code>serializers.py</code>) with (based on <a href=\"https://stackoverflow.com/questions/18517438/django-rest-framework-make-onetoone-relation-ship-feel-like-it-is-one-model\">this SO topic</a>):</p>\n\n<pre><code>class Friend2Serializer(serializers.HyperlinkedModelSerializer):\n\n    add_field = serializers.CharField(source='friend2.add_field')\n\n    class Meta:\n        model = User\n        fields = ('id', 'username', 'password', 'email', 'add_field')\n\n    def create(self, validated_data):\n        profile_data = validated_data.pop('friend2', None)\n        user = super(Friend2Serializer, self).create(validated_data)\n        self.create_or_update_user(user, profile_data)\n        return user\n\n    def update(self, instance, validated_data):\n        profile_data = validated_data.pop('friend2', None)\n        self.create_or_update_profile(instance, profile_data)\n        return super(Friend2Serializer, self).update(instance, validated_data)\n\n    def create_or_update_user(self, user, profile_data):\n        profile, created = Friend2.objects.get_or_create(user=user, defaults=profile_data)\n        if not created and profile_data is not None:\n            super(Friend2Serializer, self).update(profile, profile_data)\n</code></pre>\n\n<p>To POST data to register a new user, I use the following code snippet:</p>\n\n<pre><code>import requests\nimport json\n\njson_data = {'username': 'mylogin12', 'password': 'mypassword', 'email': 'mymail12@wanadoo.fr', 'add_field' : 'myaddfield'}\nr = requests.post('http://127.0.0.1:8000/register_new_user', json=json_data)\n</code></pre>\n\n<p>And in my <code>views.py</code>:</p>\n\n<pre><code>@api_view(['POST'])\ndef register_new_user(request):\n\n    if request.method == 'POST':\n        print('POST request !')\n\n        print(request.data)\n        serializer = Friend2Serializer(data=request.data)\n\n        if serializer.is_valid():\n\n            serializer.save()\n            print('save friend!')\n            return HttpResponse(status.HTTP_201_CREATED)\n\n        else:\n            print(serializer.errors)\n            return HttpResponse(status.HTTP_403_FORBIDDEN)\n</code></pre>\n\n<p>So far, it works.</p>\n\n<p>However, when I try to retrieve all the registered users with:</p>\n\n<pre><code>def get_all_users(request):\n\n    all_friends = Friend2.objects.all()\n\n    serial = Friend2Serializer(all_friends, many=True)\n    json_data = JSONRenderer().render(serial.data)\n\n    return HttpResponse(json_data, content_type='application/json')\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Got AttributeError when attempting to get a value for field `username` on serializer `Friend2Serializer`.\nThe serializer field might be named incorrectly and not match any attribute or key on the `Friend2` instance.\nOriginal exception text was: 'Friend2' object has no attribute 'username'.\n</code></pre>\n\n<p>But I do not understand why the <code>username</code> field does not exist has it is an attribute of the <code>User</code> model.</p>\n\n<p><strong>EDIT:</strong>:</p>\n\n<p>I have tried to modify my serializer based on :</p>\n\n<pre><code>class Friend2Serializer(serializers.ModelSerializer):\n\nusername = serializers.CharField(source='user.username')\npassword = serializers.CharField(source='user.password')\nemail = serializers.CharField(source='user.email')\nadd_field = serializers.CharField(allow_blank=True)\n\nclass Meta:\n    model = Friend2\n    fields = ('username', 'password', 'email', 'add_field')\n    depth = 1\n\ndef create(self, validated_data):\n    profile_data = validated_data.pop('friend2', None)\n    user = super(Friend2Serializer, self).create(validated_data)\n    self.create_or_update_user(user, profile_data)\n    return user\n\ndef update(self, instance, validated_data):\n    profile_data = validated_data.pop('friend2', None)\n    self.create_or_update_profile(instance, profile_data)\n    return super(Friend2Serializer, self).update(instance, validated_data)\n\ndef create_or_update_user(self, user, profile_data):\n    profile, created = Friend2.objects.get_or_create(user=user, defaults=profile_data)\n    if not created and profile_data is not None:\n        super(Friend2Serializer, self).update(profile, profile_data)\n</code></pre>\n\n<p>But now, I get the following error:</p>\n\n<pre><code>raise TypeError(\"'%s' is an invalid keyword argument for this function\" % list(kwargs)[0])\n</code></pre>\n\n<p>TypeError: 'user' is an invalid keyword argument for this function</p>\n"}, {"tags": ["python", "pandas", "split", "reshape"], "comments": [{"owner": {"reputation": 83, "user_id": 7169922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b72d883c1c51510370e1098bcc8718?s=128&d=identicon&r=PG&f=1", "display_name": "JDS", "link": "https://stackoverflow.com/users/7169922/jds"}, "edited": false, "score": 0, "creation_date": 1484143718, "post_id": 40643445, "comment_id": 70389039, "body": "Thank you for the editing!"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7169922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b72d883c1c51510370e1098bcc8718?s=128&d=identicon&r=PG&f=1", "display_name": "JDS", "link": "https://stackoverflow.com/users/7169922/jds"}, "edited": false, "score": 1, "creation_date": 1484143931, "post_id": 40643522, "comment_id": 70389157, "body": "This worked really well and help me start understanding Pandas multiline indexing.  Thank you!"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 9, "last_activity_date": 1479335392, "creation_date": 1479335392, "answer_id": 40643522, "question_id": 40643445, "link": "https://stackoverflow.com/questions/40643445/python-pandas-wide-to-long-format-change-with-column-titles-spliting/40643522#40643522", "title": "Python Pandas Wide to Long Format Change with Column Titles Spliting", "body": "<p>You can split your columns into a multi-index column and then reshape your data frame:</p>\n\n<pre><code>df.set_index('Subject', inplace=True)\ndf.columns = df.columns.str.split(\"-\", expand=True)\ndf.stack(level=0).rename_axis(['Subject', 'Test']).reset_index()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3Z9u8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3Z9u8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 83, "user_id": 7169922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b72d883c1c51510370e1098bcc8718?s=128&d=identicon&r=PG&f=1", "display_name": "JDS", "link": "https://stackoverflow.com/users/7169922/jds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1594558781, "creation_date": 1479334952, "last_edit_date": 1594558781, "question_id": 40643445, "link": "https://stackoverflow.com/questions/40643445/python-pandas-wide-to-long-format-change-with-column-titles-spliting", "title": "Python Pandas Wide to Long Format Change with Column Titles Spliting", "body": "<p>I have a table with the following columns titles and a row example:</p>\n\n<pre><code>  Subject  Test1-Result1  Test1-Result2  Test2-Result1  Test2-Result2\n0    John             10            0.5             20            0.3\n</code></pre>\n\n<p>I would like to transform it to:</p>\n\n<pre><code>  Subject level_1  Result1  Result2\n0    John   Test1       10      0.5\n1    John   Test2       20      0.3\n</code></pre>\n\n<p>With the subjects list repeated once for Test1 and then again for Test2.</p>\n\n<p>I think I can do this using for loops, but it's there a more pythonic way?</p>\n\n<p>For extra complexity, I need to add an extra column of information for each test.  I suppose I can use a dictionary, but how can I insert the information about, say Test1, in each corresponding row?</p>\n"}, {"tags": ["python", "parsing", "exception", "action", "argparse"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1479335072, "post_id": 40643439, "comment_id": 68518975, "body": "You could provide a <code>type</code> function that throws an error if anything is supplied to it. Or yes, just check after the parsing if there&#39;s anything in that argument."}, {"owner": {"reputation": 139, "user_id": 4152369, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-B0naAqfA_S8/AAAAAAAAAAI/AAAAAAAADEY/frGUz30UI9g/photo.jpg?sz=128", "display_name": "Joseph Song", "link": "https://stackoverflow.com/users/4152369/joseph-song"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479336443, "post_id": 40643439, "comment_id": 68519531, "body": "but what if I want to have &quot;action=throwexception&quot; or something?  Where would I be providing the type function to do so?  Thanks for the fast response!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1479336625, "post_id": 40643439, "comment_id": 68519605, "body": "No, there are <a href=\"https://docs.python.org/3/library/argparse.html#action\" rel=\"nofollow noreferrer\">predefined actions</a>. Demo of using <code>type</code>: <a href=\"http://stackoverflow.com/a/25470943/3001761\">stackoverflow.com/a/25470943/3001761</a>"}, {"owner": {"reputation": 139, "user_id": 4152369, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-B0naAqfA_S8/AAAAAAAAAAI/AAAAAAAADEY/frGUz30UI9g/photo.jpg?sz=128", "display_name": "Joseph Song", "link": "https://stackoverflow.com/users/4152369/joseph-song"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479337016, "post_id": 40643439, "comment_id": 68519744, "body": "That works!  Thanks a lot @jonrsharpe :) If you wanna answer it, i&#39;ll give you the check!"}], "owner": {"reputation": 139, "user_id": 4152369, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-B0naAqfA_S8/AAAAAAAAAAI/AAAAAAAADEY/frGUz30UI9g/photo.jpg?sz=128", "display_name": "Joseph Song", "link": "https://stackoverflow.com/users/4152369/joseph-song"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 757, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479334941, "creation_date": 1479334941, "question_id": 40643439, "link": "https://stackoverflow.com/questions/40643439/while-using-pythons-add-argument-in-argparse-how-can-i-throw-an-exception-if-a", "title": "While using Python&#39;s add_argument in argparse, how can I throw an exception if a particular deprecated flag is called?", "body": "<p>Basically imagine that I have argparser that has multiple arguments.\nI have a particular function definition that looks like this:</p>\n\n<pre><code>    def add_to_parser(self, parser):\n        group = parser.add_argument_group('')\n        group.add_argument( '--deprecateThis', action='throw exception', help='Stop using this. this is deprecated')\n</code></pre>\n\n<p>Whether I can try and create that action to throw an exception and stop the code or if I can wrap it to check for the <code>deprecateThis</code> flag and then throw an exception, I'd like to know how to do it and which is best!  Thanks.</p>\n"}, {"tags": ["python", "flask", "socket.io"], "comments": [{"owner": {"reputation": 334, "user_id": 11388343, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8dutjKCXVV8/AAAAAAAAAAI/AAAAAAAAAA4/83LMKIt3x9I/photo.jpg?sz=128", "display_name": "Nv7", "link": "https://stackoverflow.com/users/11388343/nv7"}, "edited": false, "score": 0, "creation_date": 1567014030, "post_id": 40643412, "comment_id": 101839269, "body": "I need this too!"}, {"owner": {"reputation": 334, "user_id": 11388343, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8dutjKCXVV8/AAAAAAAAAAI/AAAAAAAAAA4/83LMKIt3x9I/photo.jpg?sz=128", "display_name": "Nv7", "link": "https://stackoverflow.com/users/11388343/nv7"}, "edited": false, "score": 0, "creation_date": 1567014502, "post_id": 40643412, "comment_id": 101839463, "body": "After some searching, I found <a href=\"https://stackoverflow.com/questions/23835432/render-a-new-template-with-socketio-on-in-flask\">this question</a>. Is it what you wanted?"}], "answers": [{"comments": [{"owner": {"reputation": 636, "user_id": 4135399, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6eaaf8c5106207b5492f2318160cd2a9?s=128&d=identicon&r=PG&f=1", "display_name": "Zwierzak", "link": "https://stackoverflow.com/users/4135399/zwierzak"}, "edited": false, "score": 1, "creation_date": 1479338478, "post_id": 40643802, "comment_id": 68520238, "body": "I don&#39;t think that&#39;s the case, because return statement in socket.io context will return acknowledgement to the client, not the rendered page to the browser. I need something like artificial get request maybe? Or something like app.navigate_to(url)"}, {"owner": {"reputation": 636, "user_id": 4135399, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6eaaf8c5106207b5492f2318160cd2a9?s=128&d=identicon&r=PG&f=1", "display_name": "Zwierzak", "link": "https://stackoverflow.com/users/4135399/zwierzak"}, "edited": false, "score": 0, "creation_date": 1479394327, "post_id": 40643802, "comment_id": 68547105, "body": "Also I was thinking that switching context to app might help, but I don&#39;t really know how to do it."}], "tags": [], "owner": {"reputation": 4624, "user_id": 1873758, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d7a34bb736e9c2143c1d4a9c7f141dad?s=128&d=identicon&r=PG&f=1", "display_name": "ipinak", "link": "https://stackoverflow.com/users/1873758/ipinak"}, "is_accepted": false, "score": 0, "last_activity_date": 1479336805, "creation_date": 1479336805, "answer_id": 40643802, "question_id": 40643412, "link": "https://stackoverflow.com/questions/40643412/flask-socket-io-redirect-to-template-after-socket-io-event-finishes/40643802#40643802", "title": "Flask socket.io redirect to template after socket.io event finishes", "body": "<p>I think you are missing the <code>return</code> statement.</p>\n\n<pre><code>return redirect(url_for('index'))\n</code></pre>\n"}], "owner": {"reputation": 636, "user_id": 4135399, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6eaaf8c5106207b5492f2318160cd2a9?s=128&d=identicon&r=PG&f=1", "display_name": "Zwierzak", "link": "https://stackoverflow.com/users/4135399/zwierzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 665, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1479336805, "creation_date": 1479334839, "question_id": 40643412, "link": "https://stackoverflow.com/questions/40643412/flask-socket-io-redirect-to-template-after-socket-io-event-finishes", "title": "Flask socket.io redirect to template after socket.io event finishes", "body": "<p>I am receiving some socket.io event. After the event is handled I would like to redirect the user to some page. However, the redirection doesn't work. I don't know what is wrong. Below is my code:</p>\n\n<pre><code>from flask import Flask, render_template, send_from_directory, redirect, url_for\nfrom flask_socketio import SocketIO, emit\nimport base64\nimport os\nimport random, string\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\nsocketio = SocketIO(app)\n\n@app.route('/')\ndef index():\n    try:\n        image_names = os.listdir('./images')\n        print image_names\n        return render_template(\"gallery.html\", image_names=image_names)\n    except Exception as ex:\n        print ex\n\n@socketio.on('takephoto')\ndef takePhoto(*args): \n    try:\n        decoded = base64.b64decode(args[0])\n        filename = ''.join(random.choice(string.lowercase) for x in range(6)) + '.jpg'\n        with open(\"./images/\" + filename, \"wb\") as fh:\n            fh.write(args[0].decode('base64'))\n    except Exception, ex:\n        print ex\n\n    redirect(url_for('index')) #This doesnt work\n    #how can i go to index from this point?\n\nif __name__ == '__main__':\n    from gevent import pywsgi\n    from geventwebsocket.handler import WebSocketHandler\n    app.debug = True\n    server = pywsgi.WSGIServer(('', 5001), app, handler_class=WebSocketHandler)\n    server.serve_forever()\n</code></pre>\n"}, {"tags": ["python", "rename"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1479334881, "post_id": 40643397, "comment_id": 68518875, "body": "You realize that <code>rain2014-01-01.dat</code> is not <code>mypath&#47;rain2014-01-01.dat</code>, right?"}], "answers": [{"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 0, "last_activity_date": 1479334942, "creation_date": 1479334942, "answer_id": 40643440, "question_id": 40643397, "link": "https://stackoverflow.com/questions/40643397/python-how-to-rename-file-in-python/40643440#40643440", "title": "Python: how to rename file in python?", "body": "<p>Since you got the file from <code>os.listdir('mypath')</code>, its full name is <code>mypath/rain2014-01-01.dat</code>, not <code>rain2014-01-01.dat</code>.</p>\n\n<p>If the directory name is not prefixed, and no file with the same name exists in the current directory, the error given is entirely to be expected.</p>\n\n<p>Use <code>os.path.join('mypath', string)</code> or <code>os.path.join('mypath', stringnew)</code> to get names relative to <code>mypath</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1479336213, "creation_date": 1479336213, "answer_id": 40643681, "question_id": 40643397, "link": "https://stackoverflow.com/questions/40643397/python-how-to-rename-file-in-python/40643681#40643681", "title": "Python: how to rename file in python?", "body": "<p><code>os.listdir</code> only returns the filename, not the full path. Use <code>glob</code> instead, so you can use patterns:</p>\n\n<pre><code>import glob\npattern = \"./mypath/*rain2014-01-01.dat\"\nfor filename in glob.iglob(pattern):\n    stringnew = 'rain%d%d.dat' % (year, i)\n    os.rename(string,stringnew)\n</code></pre>\n"}], "owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 40643440, "answer_count": 2, "score": 0, "last_activity_date": 1479336213, "creation_date": 1479334784, "question_id": 40643397, "link": "https://stackoverflow.com/questions/40643397/python-how-to-rename-file-in-python", "title": "Python: how to rename file in python?", "body": "<p>I have a file in a folder called <code>rain2014-01-01.dat</code> and want to rename it as <code>rain201401.dat</code></p>\n\n<p>First I check if find the file;</p>\n\n<pre><code>import os\npath = \"./mypath\"\nstring = \"rain2014-01-01.dat\"\nfor filename in os.listdir(path):\n    if filename.endswith(string):\n        print (filename)\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>rain2013-01-01.dat\n</code></pre>\n\n<p>Then I try to rename it</p>\n\n<pre><code>i = 0\nfor filename in os.listdir(path):\n    if filename.endswith(string):\n        stringnew = 'rain%d%d.dat'%(year,i)\n        os.rename(string,stringnew)\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n&lt;ipython-input-57-709ba44fed3d&gt; in &lt;module&gt;()\n      7     if filename.endswith(string):\n      8         stringnew = 'rain%d%d.dat'%(year,i)\n----&gt; 9         os.rename(string,stringnew)\n     10         print (filename)\n\nOSError: [Errno 2] No such file or directory\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 94, "user_id": 1519642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d68ac17a1a221cdb47bf7370bbd0c9?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/1519642/akshay"}, "edited": false, "score": 1, "creation_date": 1479334892, "post_id": 40643380, "comment_id": 68518879, "body": "Can you show how the output should look like?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1479335376, "post_id": 40643380, "comment_id": 68519101, "body": "Iterate over the file; check if each line is empty (newline only); if not empty save the line; if empty skip the line."}, {"owner": {"reputation": 43, "user_id": 7103235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9390ce0ad8bf24e170b57887de0d935a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7103235/raj"}, "reply_to_user": {"reputation": 94, "user_id": 1519642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d68ac17a1a221cdb47bf7370bbd0c9?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/1519642/akshay"}, "edited": false, "score": 0, "creation_date": 1479343554, "post_id": 40643380, "comment_id": 68521718, "body": "@Akshay : Included my desired output in question."}], "answers": [{"comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1479335464, "post_id": 40643513, "comment_id": 68519132, "body": "I don&#39;t think this puts <code>Boy: I am boy</code>, which is what the question wants"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1479335518, "post_id": 40643513, "comment_id": 68519162, "body": "You don&#39;t have to call <code>readlines()</code> - a file object is an iterator that returns lines. <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 7103235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9390ce0ad8bf24e170b57887de0d935a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7103235/raj"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1479343705, "post_id": 40643513, "comment_id": 68521767, "body": "@cricket_007 : yes you are right. I have included my desired output in my question."}], "tags": [], "owner": {"reputation": 485, "user_id": 6352629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1e0cafc84ff11db79fd51ccb5a1a3?s=128&d=identicon&r=PG", "display_name": "Toni Piza", "link": "https://stackoverflow.com/users/6352629/toni-piza"}, "is_accepted": false, "score": 0, "last_activity_date": 1479456048, "last_edit_date": 1479456048, "creation_date": 1479335308, "answer_id": 40643513, "question_id": 40643380, "link": "https://stackoverflow.com/questions/40643380/how-remove-line-space-from-file-python/40643513#40643513", "title": "How remove line space from file python", "body": "<p>Read the file, and just print those lines that aren't empty.</p>\n\n<pre><code>with open('test', 'r') as fd:\n    for l in fd:\n        if l != '\\n':\n            print(l.strip())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1479346607, "creation_date": 1479346607, "answer_id": 40645331, "question_id": 40643380, "link": "https://stackoverflow.com/questions/40643380/how-remove-line-space-from-file-python/40645331#40645331", "title": "How remove line space from file python", "body": "<p>Regex should get close. Unfortunately, has to read the whole file content to a string. </p>\n\n<pre><code>import re\n\ntest_str = '''Girl: I am girl.\n\nBoy:\n\nI am boy\n\nDog: Bark\n\nCat: \n\nMeow'''\n\nregex = r':\\s*\\n+'\nsubst = \": \"\n\nfor line in re.sub(regex, subst, test_str, 0, re.MULTILINE).split('\\n'):\n    if line != '':\n        print (line.strip())\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Girl: I am girl.\nBoy: I am boy\nDog: Bark\nCat: Meow\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7103235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9390ce0ad8bf24e170b57887de0d935a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7103235/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2296, "favorite_count": 0, "accepted_answer_id": 40645331, "answer_count": 2, "score": -1, "last_activity_date": 1479456048, "creation_date": 1479334716, "last_edit_date": 1479343500, "question_id": 40643380, "link": "https://stackoverflow.com/questions/40643380/how-remove-line-space-from-file-python", "title": "How remove line space from file python", "body": "<p>I have a file like this.</p>\n\n<pre><code>Girl: I am girl.\n\nBoy:\n\nI am boy\n</code></pre>\n\n<p>I am using this code to remove line space.</p>\n\n<pre><code>import string\nfrom itertools import ifilter, imap\nprint '\\n'.join(ifilter(None, imap(string.strip, open('doc1.txt'))))\n</code></pre>\n\n<p>Using this it is giving me this output. </p>\n\n<pre><code>Girl: I am girl.\nBoy:\nI am boy\n</code></pre>\n\n<p>It is not removing space between <code>Boy:</code> and <code>I am boy</code>. How I can remove that line space? I want output in this format. </p>\n\n<pre><code>Girl: I am girl.\nBoy:  I am boy.\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 5, "last_activity_date": 1479335013, "creation_date": 1479335013, "answer_id": 40643457, "question_id": 40643308, "link": "https://stackoverflow.com/questions/40643308/how-do-i-select-row-columns-with-more-than-certain-number-of-missing-data-in-p/40643457#40643457", "title": "How do I select row / columns with more than certain number of missing data in Pandas?", "body": "<p>first off, you're much better off using things that represent <code>NaN</code></p>\n\n<pre><code>df3 = df3.replace('NA', np.nan).astype(float)\n</code></pre>\n\n<p>Then you can use built in methods to do what you want</p>\n\n<pre><code>df3.dropna(axis=1, thresh=2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cR4wB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cR4wB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1479335697, "creation_date": 1479335697, "answer_id": 40643595, "question_id": 40643308, "link": "https://stackoverflow.com/questions/40643308/how-do-i-select-row-columns-with-more-than-certain-number-of-missing-data-in-p/40643595#40643595", "title": "How do I select row / columns with more than certain number of missing data in Pandas?", "body": "<p>Here's one approach -</p>\n\n<pre><code>df3.columns[(df3.values == 'NA').sum(0) &gt; 2]\n</code></pre>\n\n<p>Alternatively and probably a bit slower, but compact one -</p>\n\n<pre><code>df3.columns[(df3 == 'NA').sum(0) &gt; 2]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [292]: df3\nOut[292]: \n    0    1   2\n0   1  6.5   3\n1   1   NA  NA\n2   3   NA  NA\n3  NA  6.5  NA\n\nIn [293]: df3.columns[(df3.values == 'NA').sum(0) &gt; 2]\nOut[293]: Int64Index([2], dtype='int64')\n</code></pre>\n"}], "owner": {"reputation": 1403, "user_id": 3562812, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/33783c0144d6ea611bad11205567c7ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3562812", "link": "https://stackoverflow.com/users/3562812/user3562812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479335697, "creation_date": 1479334394, "question_id": 40643308, "link": "https://stackoverflow.com/questions/40643308/how-do-i-select-row-columns-with-more-than-certain-number-of-missing-data-in-p", "title": "How do I select row / columns with more than certain number of missing data in Pandas?", "body": "<p>I am trying to learn how to select rows or columns with more than certain number of missing data. Using value_counts, I can find the column that meets the condition, but I can't figure out how to retrieve index in int form so that I can access and remove the corresponding column from the dataframe.</p>\n\n<p>How can I convert / retrieve index in int? And, is there easier / simpler way to do this?</p>\n\n<pre><code>  df3 = pandas.DataFrame([[1,6.5,3],[1,'NA','NA'],[3,'NA','NA'],['NA',6.5,'NA']])\n    df3_value_counts = df3.apply(pandas.value_counts).fillna(0).ix['NA']\n    df3_missing_data_index = df3_value_counts[df3_value_counts &gt; 2].index\n</code></pre>\n"}, {"tags": ["python", "sympy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479334990, "post_id": 40643297, "comment_id": 68518942, "body": "I think you might have to subclass <code>Function</code> and define an <code>_eval_is_real</code> method. The docs are pretty lacking, but they do happen to have an example of defining a function whose value is real when its argument is real, and that&#39;s what the example does."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 1, "creation_date": 1479409492, "post_id": 40643297, "comment_id": 68557083, "body": "I would consider this to be a bug. Derivative should be smart enough to know that the derivative of a real function is real."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 1, "creation_date": 1479409735, "post_id": 40643297, "comment_id": 68557225, "body": "Opened <a href=\"https://github.com/sympy/sympy/issues/11868\" rel=\"nofollow noreferrer\">github.com/sympy/sympy/issues/11868</a>"}], "owner": {"reputation": 157, "user_id": 3077233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6579333314d971db9f7a474443b5a152?s=128&d=identicon&r=PG", "display_name": "iiqof", "link": "https://stackoverflow.com/users/3077233/iiqof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479412386, "creation_date": 1479334341, "last_edit_date": 1479412386, "question_id": 40643297, "link": "https://stackoverflow.com/questions/40643297/assumptions-in-sympy-arbitrary-functions", "title": "Assumptions in sympy arbitrary functions", "body": "<p>With SymPy we can set assumptions on variables:</p>\n\n<pre><code>from sympy import *\nx = Symbol('x', real=True)\nx, re(x), im(x)\n</code></pre>\n\n<p>the result is :</p>\n\n<pre><code>(x,x,0)\n</code></pre>\n\n<p>as expected. But if we try to do the same for a function:</p>\n\n<pre><code>from sympy import *\nx = Symbol('x', real=True)\nf = Function('f', real=True)(x)\n\nf, re(f), im(f)\n</code></pre>\n\n<p>the result is :</p>\n\n<pre><code>(f(x),re(f(x)),im(f(x)))\n</code></pre>\n\n<p>but I expected something as </p>\n\n<pre><code>(f(x),f(x),0)\n</code></pre>\n\n<p>The question is then: Is there a way to make python assume the range of the function to be real, i.e.</p>\n\n<p>In this previous <a href=\"https://stackoverflow.com/questions/40298497/sympy-arbitrary-function-range\">question</a> it is partially answered, but if the we take the derivative we get again the same problem:</p>\n\n<pre><code>from sympy import *\nx = Symbol('x', real=True)\nclass f(Function):\n    is_positive = True\ndf = f(x).diff(x)\n\n\ndf, re(df), im(df)\n</code></pre>\n\n<p>with result:</p>\n\n<pre><code>(f(x).diff(x),re(f(x).diff(x)),im(f(x).diff(x)))\n</code></pre>\n\n<p>wanting it to be like</p>\n\n<pre><code>(f(x).diff(x),f(x).diff(x),0)\n</code></pre>\n\n<p>is there a way?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-elastic-beanstalk"], "answers": [{"comments": [{"owner": {"reputation": 4686, "user_id": 3118956, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae0f0f74eac8ee50c673d70f89f07437?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Brax", "link": "https://stackoverflow.com/users/3118956/robert-brax"}, "edited": false, "score": 0, "creation_date": 1479400195, "post_id": 40643700, "comment_id": 68551474, "body": "Thanks for your answer. As the author of mod wsgi, how many process you think I should run on a single cpu core aws EC2 ? Should I always restrict the number of processes so they are equal to the number of core ? Is there ANY advantage to have processes &gt; cpu cores ?"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "reply_to_user": {"reputation": 4686, "user_id": 3118956, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae0f0f74eac8ee50c673d70f89f07437?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Brax", "link": "https://stackoverflow.com/users/3118956/robert-brax"}, "edited": false, "score": 0, "creation_date": 1479412580, "post_id": 40643700, "comment_id": 68558873, "body": "As I said, one needs to know about the requirements your application has. So how many requests per second will you get. How long requests run for. Are they I/O bound of doing CPU intensive tasks. How much memory you have available. How much memory your application uses. There are two many variables that go into trying to work it out and one can&#39;t just guess."}, {"owner": {"reputation": 4686, "user_id": 3118956, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae0f0f74eac8ee50c673d70f89f07437?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Brax", "link": "https://stackoverflow.com/users/3118956/robert-brax"}, "edited": false, "score": 0, "creation_date": 1479768588, "post_id": 40643700, "comment_id": 68688856, "body": "I understand your point. Let&#39;s forget this specific case for a moment... as a general rule, is it true that there should never be more than 1 process (not talking about threads) per Cpu core, as 2 process can&#39;t benefit from any concurrency on a same core ?"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "reply_to_user": {"reputation": 4686, "user_id": 3118956, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae0f0f74eac8ee50c673d70f89f07437?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Brax", "link": "https://stackoverflow.com/users/3118956/robert-brax"}, "edited": false, "score": 0, "creation_date": 1479771312, "post_id": 40643700, "comment_id": 68689769, "body": "No, the suggestion that you should only ever have at most one process per core is wrong. Similarly, the suggestion by many (coming from gunicorn), that a good general rule is that you have twice the number of processes as cores is wrong as well. It really depends on whether your application is I/O bound vs CPU bound, or to what degree. That video I pointed out in the question tries to explain some of these issues."}], "tags": [], "owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "is_accepted": true, "score": 3, "last_activity_date": 1479336325, "creation_date": 1479336325, "answer_id": 40643700, "question_id": 40643263, "link": "https://stackoverflow.com/questions/40643263/aws-beanstalk-mod-wsgi-python-process-and-threads/40643700#40643700", "title": "Aws beanstalk, mod_wsgi, python, process and threads", "body": "<p>A file upload is generally going to be I/O bound. The upload shouldn't cause any undue affects on the operation of the server and should not trigger any thread switching or Python global interpreter lock problems. What you need to worry about is how many long running uploads you might have running at the same time as the number of threads is limited by the configuration.</p>\n\n<p>Overall, it is impossible for anyone to give you advice because how you set up the process/threads mix depends on your very specific application and only you know what the requirements are for your application. If you don't know yet, then you are worrying too early about how you may need to set it up. So write your application, run it, add monitoring so you know what it is doing and then you will have a better idea of how you might need to tune the server.</p>\n\n<p>For some background on the various issues, go watch:</p>\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=SGleKfigMsk\" rel=\"nofollow noreferrer\">Using benchmarks to understand how WSGI servers work.</a></li>\n</ul>\n"}], "owner": {"reputation": 4686, "user_id": 3118956, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae0f0f74eac8ee50c673d70f89f07437?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Brax", "link": "https://stackoverflow.com/users/3118956/robert-brax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 40643700, "answer_count": 1, "score": 1, "last_activity_date": 1479336325, "creation_date": 1479334180, "question_id": 40643263, "link": "https://stackoverflow.com/questions/40643263/aws-beanstalk-mod-wsgi-python-process-and-threads", "title": "Aws beanstalk, mod_wsgi, python, process and threads", "body": "<p>I had a look at aws beanstalk app for Python and learned it uses Apache and mod_wsgi with a default setting of 1 process and 15 threads.</p>\n\n<p>1) Does it mean that if a user upload a long file on the system, it will keep 1 thread busy, and context switch rapidly between the other threads so 1 user uploading a file will not block the entire app ?</p>\n\n<p>2) If I have 2 cpus, should I increase the number of process = number of cpus ?</p>\n\n<p>3) What's your personal experience with this aws beanstalk setup, do you feel your site is fast and responsive ? How much traffic does it handle on which type of aws BS EC2 ? I have no clue what such a mod_wsgi aws setup can deliver.</p>\n"}, {"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "edited": false, "score": 2, "creation_date": 1479334301, "post_id": 40643256, "comment_id": 68518626, "body": "What exactly is the meaning of <code>i</code> in your code? You set it to zero and then add 1 to it."}, {"owner": {"reputation": 4338, "user_id": 1061193, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ffbfe3211751d0cfe8c9fcda306c2b?s=128&d=identicon&r=PG", "display_name": "drum", "link": "https://stackoverflow.com/users/1061193/drum"}, "edited": false, "score": 0, "creation_date": 1479334321, "post_id": 40643256, "comment_id": 68518632, "body": "Put an <code>if-statement</code> at the end that checks whether your column is more than 5. If yes, break."}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1479335087, "post_id": 40643256, "comment_id": 68518985, "body": "What is the purpose of the first two statements inside else? You first set <code>i = 0</code>, then increment it, but the next time you enter <code>else</code> again, <code>i</code> would be reset to 0 first."}, {"owner": {"reputation": 54678, "user_id": 232593, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9873090a2db3b128c7d01d673351565a?s=128&d=identicon&r=PG", "display_name": "Merlyn Morgan-Graham", "link": "https://stackoverflow.com/users/232593/merlyn-morgan-graham"}, "edited": false, "score": 0, "creation_date": 1479335455, "post_id": 40643256, "comment_id": 68519127, "body": "One problem might be that lists in python have a zero-based index, not a one-based index. <code>board_row = [0, 0, 0, 0, 0]</code> has valid indices <code>board_row[0]</code> through <code>board_row[4]</code>. <code>board_row[5]</code> is out of range. So, while you ask for <code>column</code> and accept <code>1</code>, you&#39;re probably going to need to translate that to <code>0</code> at some place in your code."}, {"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "edited": false, "score": 0, "creation_date": 1479335606, "post_id": 40643256, "comment_id": 68519190, "body": "It would be nice if you will provide the <b>real</b> code as the code you provided <b>doesn&#39;t behave as you write</b>, e. g. the prompt for user input is <code>Please choose a column (1-5</code> (without <code>)</code> and <code>:</code> at the end) - so how we may trust you that some important parts are not changed, too?"}, {"owner": {"reputation": 45, "user_id": 7150780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e40c7f1943540eed998b628eddcbd39?s=128&d=identicon&r=PG&f=1", "display_name": "naraemee", "link": "https://stackoverflow.com/users/7150780/naraemee"}, "edited": false, "score": 0, "creation_date": 1479366658, "post_id": 40643256, "comment_id": 68528747, "body": "I figured it out! thanks all"}], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 7108103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/894bea7194ec1fd6b637321a059e145d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Goodwin", "link": "https://stackoverflow.com/users/7108103/michael-goodwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479334552, "creation_date": 1479334552, "answer_id": 40643340, "question_id": 40643256, "link": "https://stackoverflow.com/questions/40643256/stop-while-loop-from-going-over-and-over-python/40643340#40643340", "title": "Stop while loop from going over and over? Python", "body": "<p>The issue here is that you are not checking that the number is in the range of 1-X, you are just checking that the number is >= 1.</p>\n\n<p>You would want to update the while statement to read <code>while x &gt;= 1 and x &lt;= columns:</code></p>\n\n<p>You may also want to use the a try/except block for your prompted input, <code>mycol = input(\"Please..</code>. I bring this up because currently your script will fail if someone enters A-Z or any other special character.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 7150780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e40c7f1943540eed998b628eddcbd39?s=128&d=identicon&r=PG&f=1", "display_name": "naraemee", "link": "https://stackoverflow.com/users/7150780/naraemee"}, "edited": false, "score": 0, "creation_date": 1479335467, "post_id": 40643435, "comment_id": 68519135, "body": "Okay I see what you&#39;re saying! How would I assign PONE to that element?Also i put the #Check for win function comment there because I was going to add my function that checks if a player won or not after making sure my current code was working!"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "reply_to_user": {"reputation": 45, "user_id": 7150780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e40c7f1943540eed998b628eddcbd39?s=128&d=identicon&r=PG&f=1", "display_name": "naraemee", "link": "https://stackoverflow.com/users/7150780/naraemee"}, "edited": false, "score": 0, "creation_date": 1479421284, "post_id": 40643435, "comment_id": 68563424, "body": "The assignment operator is <code>=</code>, the comparison one is <code>==</code>."}], "tags": [], "owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "is_accepted": false, "score": 0, "last_activity_date": 1479334923, "creation_date": 1479334923, "answer_id": 40643435, "question_id": 40643256, "link": "https://stackoverflow.com/questions/40643256/stop-while-loop-from-going-over-and-over-python/40643435#40643435", "title": "Stop while loop from going over and over? Python", "body": "<p>From the example input/output that you show, it seems like you always end up in the inner most <code>if</code> clause.\nHere, <code>board[x][coluser] == PONE</code> is performing a comparison, not an assignment, so it evaluates to true or false, but doesn't change anything in the rest of your program. So <code>emptySp()</code> always returns true, because nothing has changed.\nSecondly, what is \"#Check for any win with win function\"? What is the win function? Again, inside that <code>if</code> clause, no part of the code is being changed, so whatever caused <code>emptySp()</code> to evaluate to true the first time, continues to stay the same.</p>\n"}], "owner": {"reputation": 45, "user_id": 7150780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e40c7f1943540eed998b628eddcbd39?s=128&d=identicon&r=PG&f=1", "display_name": "naraemee", "link": "https://stackoverflow.com/users/7150780/naraemee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1479366739, "creation_date": 1479334147, "last_edit_date": 1479366739, "question_id": 40643256, "link": "https://stackoverflow.com/questions/40643256/stop-while-loop-from-going-over-and-over-python", "title": "Stop while loop from going over and over? Python", "body": "<p>I have an issue where my code keeps repeating a statement over and over when I don't want it to. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>def gameMake():\n\n    while emptySp(): #already written (checks if the space is available for the user to put in their token)\n\n\n        print(\"Player 1\")\n        mycol = input(\"Please choose a column (1-\" + str(columns))\n\n        if coluser == columns:\n            mycol = input(\"Please choose a column to place your piece in (1-\" + str(columns))\n\n        elif:\n            rowuse = rows\n\n\n            while x &gt;= 1:\n                if board[x][coluser] == board[r][c]\n                    board[x][coluser] == PONE #PONE = \"o\" (the token)\n\n\n                else:\n\n                    i = 0\n                    i = i + 1\n</code></pre>\n\n<p>Example of the output and what I'm getting: (the board inputted is 5x5)</p>\n\n<pre><code>Player 1 \nPlease choose a column (1-5): 1\nPlayer 1 \nPlease choose a column (1-5): 2\nPlayer 1 \nPlease choose a column (1-5):3\nPlayer 1 \nPlease choose a column (1-5): 4\nPlayer 1 \nPlease choose a column (1-5): 5\n\n\nIndexError: list index out of range\n</code></pre>\n\n<p>The code is supposed to accept numbers 1-5 as a valid column number and then print out the current board using the board function I already created! If its any number other than 1-5 it is supposed to re-prompt the user! What is going wrong with my code? Why is there an Index error? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-sphinx"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479334641, "post_id": 40643237, "comment_id": 68518772, "body": "That&#39;s not the behaviour I see, e.g. <a href=\"http://pythonhosted.org/aslack/aslack.html#aslack.slack_api.api_subclass_factory\" rel=\"nofollow noreferrer\">pythonhosted.org/aslack/&hellip;</a>"}, {"owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479335368, "post_id": 40643237, "comment_id": 68519097, "body": "ho... I think it might come from the bootstrap banner I have at the top of the window hiding the actual line referenced. See <a href=\"http://cerfacs.fr/antares/doc_1.8.2/src/api/zone.html#antares.Zone.cell_to_node\" rel=\"nofollow noreferrer\">cerfacs.fr/antares/doc_1.8.2/src/api/&hellip;</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479335450, "post_id": 40643237, "comment_id": 68519125, "body": "Looks like, yep; if you set the header to <code>display: none</code> the appropriate line is at the top of the page."}, {"owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1479401007, "post_id": 40643237, "comment_id": 68552043, "body": "Indeed! I misdiagnosed my problem! Thank you for your help"}], "owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479362584, "creation_date": 1479334057, "last_edit_date": 1479362584, "question_id": 40643237, "link": "https://stackoverflow.com/questions/40643237/is-it-possible-to-change-the-line-of-the-link-when-referencing-to-a-function-wit", "title": "Is it possible to change the line of the link when referencing to a function with sphinx", "body": "<p>When I use <code>:func:`MyClass.myfunc`</code> to reference an existing method of <code>MyClass</code> the link when you click on it send you to the line under the actual function declaration :</p>\n\n<pre><code>class MyClass()\n\n  myfunc(input)                 # 1\n    This function do something  # 2\n</code></pre>\n\n<p>The link send me to line 2. Is it possible to get the link to lead you to line 1?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479334229, "post_id": 40643226, "comment_id": 68518591, "body": "Why are you trying to split on underscores when your example data is separated by spaces? Why are you doing <code>grades = line[-1]</code>?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1479334240, "post_id": 40643226, "comment_id": 68518597, "body": "Show us an actual sample of the text file."}, {"owner": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 0, "creation_date": 1479334315, "post_id": 40643226, "comment_id": 68518631, "body": "Sorry, I&#39;ve posted the actual file I am putting in. Will make sense now, I hope..."}], "answers": [{"comments": [{"owner": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 0, "creation_date": 1479335316, "post_id": 40643416, "comment_id": 68519075, "body": "Ah, so the list I had with the numbers, was a string in that case? What is the reason it didn&#39;t say that when I&#39;d use type()? Thanks for helping by the way, this looks like it&#39;s working now!"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 0, "creation_date": 1479336268, "post_id": 40643416, "comment_id": 68519456, "body": "@Siyah - you must have made a mistake, it is definitely a string."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 1, "creation_date": 1479336563, "post_id": 40643416, "comment_id": 68519575, "body": "@Siyah your first <code>split</code> produced a list of strings, and you were using <code>[-1]</code> to get the last string from that list."}, {"owner": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 0, "creation_date": 1479338648, "post_id": 40643416, "comment_id": 68520294, "body": "Thank you Mark, but still wondering why type() didn&#39;t work in that case... can you explain that too?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 1, "creation_date": 1479339556, "post_id": 40643416, "comment_id": 68520595, "body": "@Siyah <code>type(line)</code> is <code>list</code>, <code>type(line[-1])</code> is <code>str</code>."}, {"owner": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 0, "creation_date": 1479398948, "post_id": 40643416, "comment_id": 68550648, "body": "Thanks Mark, I appreciate it, but why is line[-1] a string? Because everything in a list is a string by default?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "edited": false, "score": 1, "creation_date": 1479399329, "post_id": 40643416, "comment_id": 68550907, "body": "@Siyah <code>split</code> produces a list of strings, and you did <code>line = line.split(&quot;_&quot;)</code>. Using a subscript <code>[-1]</code> on a list (if you don&#39;t use <code>:</code> to get slicing) produces a single element of the list, and <i>each</i> element of this list is a string. I hope you understand this now, because I don&#39;t think I can describe it any more clearly."}], "tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 1, "last_activity_date": 1479334850, "creation_date": 1479334850, "answer_id": 40643416, "question_id": 40643226, "link": "https://stackoverflow.com/questions/40643226/why-cant-i-convert-the-list-that-i-fetched-with-readlines-to-floats/40643416#40643416", "title": "Why can&#39;t I convert the list that I fetched with readlines(), to floats?", "body": "<p>Your <code>map</code> is operating on each <em>character</em> of the string, because when you iterate over a string you get individual characters. You want to use another <code>split</code> to get each number into separate strings.</p>\n\n<pre><code>grades = map(float, line[-1].split())\n</code></pre>\n"}], "owner": {"reputation": 2676, "user_id": 2485889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/010cbd483b2b6470f9bfb8edab6c2923?s=128&d=identicon&r=PG", "display_name": "Siyah", "link": "https://stackoverflow.com/users/2485889/siyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40643416, "answer_count": 1, "score": 0, "last_activity_date": 1479334850, "creation_date": 1479334015, "last_edit_date": 1479334357, "question_id": 40643226, "link": "https://stackoverflow.com/questions/40643226/why-cant-i-convert-the-list-that-i-fetched-with-readlines-to-floats", "title": "Why can&#39;t I convert the list that I fetched with readlines(), to floats?", "body": "<p>I've opened a new file via my IDE and turned it into a list via readlines. Why? Because I want to print them underneath each other. When I use <code>read()</code>, it just prints one item, while I need the whole list to be printed.</p>\n\n<p>The actual file:</p>\n\n<pre><code>['Some name__________1.5 6.5 6.5\\n', 'Another name________6.3 1.2 1.5\\n']\n</code></pre>\n\n<p>Right now, I have managed to fetch the last part of the list which looks likes this:</p>\n\n<pre><code>1.5 3.5 4.5\n2.5 3.5 4.5\n5.5 3.5 4.5\n</code></pre>\n\n<p><strong>What I want to do now, is to calculate the average of these numbers, but: Python does not recognize them as numbers (ints, floats) at all.</strong></p>\n\n<p>When I'd use <code>type(TheVariableThatContainsMyList)</code>, it doesn't show the type of it. Therefore, I don't think they are ints, strings or floats.</p>\n\n<p>What I think I need to do, is to convert the items in this list, into floats, because they are supposed to be floats. But to do so, I need to know what I am doing wrong and how I could fix that.</p>\n\n<p><strong>This is my code:</strong></p>\n\n<pre><code>def zopenFile():\n    fileFolder = open('TEXTFILE', 'r')\n\n    readFile = fileFolder.readlines()\n\n    for line in readFile:\n        line = line.split(\"_\")\n\n        grades = line[-1]\n\n        print grades\n\nzopenFile()\n</code></pre>\n\n<p>I tried doing <code>grades = map(float,line[-1])</code></p>\n\n<p>But in that case, the console says: <code>could not convert string to float: .</code></p>\n\n<p>The weird part is, that if I would use <code>type(grades)</code>, it wouldn't say it has the type of a string in the console. I am confused right now... is it a string? Is it a float already? If so, why can't I just map it into a float?</p>\n\n<p>Can someone point me in the right direction please?</p>\n\n<p>And I know I can use <code>read()</code>, but I don't want to. Can someone show me how to do it with <code>readlines()</code> instead?</p>\n"}, {"tags": ["python", "matplotlib", "axes", "mplot3d"], "owner": {"reputation": 485, "user_id": 7150108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6275ac0064e7ad3bebdd8eaa196b0a5?s=128&d=identicon&r=PG&f=1", "display_name": "Emily Beth", "link": "https://stackoverflow.com/users/7150108/emily-beth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479335871, "creation_date": 1479333945, "last_edit_date": 1479335871, "question_id": 40643214, "link": "https://stackoverflow.com/questions/40643214/shift-individual-axes-within-a-subplot-of-a-matplotlib-figure", "title": "Shift individual axes within a subplot of a matplotlib figure", "body": "<p>I have a python matplotlib figure with four subplots.  If I plot the individual axes individually, they fit fine in the canvas.  But for some reason when they are in the subplots they are shifted pretty far to the right, and it cuts off some of their labels.  How can I keep everything scaled just as it is, but just shift each of the four axes over to the left a bit?  My code is below if that helps.  </p>\n\n<p>I'll attach an image of the figure that I'm getting also.  I just noticed that this particular figure doesn't have any labels cut off, because they are short.  (Here I only have labels in the first subplot.)  But they do get cut off when I use a long labels.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GWOlT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GWOlT.png\" alt=\"Figure\"></a></p>\n\n<p>I've done a lot of searching on the web, but haven't identified the answer to this yet.  Hopefully something easy.</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nfrom matplotlib import cm\nfrom matplotlib.ticker import LinearLocator, FormatStrFormatter\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport matplotlib as mpl\n\n@np.vectorize\ndef ImbalPenSQ(ImbalPercent, IncCost):\n\n    if np.abs(ImbalPercent) &lt;= 1.5:\n        TieredPen = 0\n    elif 1.5 &lt; np.abs(ImbalPercent) &lt;= 7.5:\n        TieredPen = 0.10\n    else:\n        TieredPen = 0.25\n\n    PenFloor = 10\n\n    Penalty = TieredPen * IncCost\n\n    return Penalty\n\n\n@np.vectorize\ndef ImbalPS(ImbalPercent, IncCost):\n\n    if np.abs(ImbalPercent) &lt;= 1.5:\n        TieredPen = 0\n    elif 1.5 &lt; np.abs(ImbalPercent) &lt;= 7.5:\n        TieredPen = 0.10\n    else:\n        TieredPen = 0.25\n\n    PenFloor = 10\n\n    Penalty = TieredPen * np.abs(IncCost)\n\n    return Penalty\n\n@np.vectorize\ndef Simple(ImbalPercent, IncCost):\n\n    if np.abs(ImbalPercent) &lt;= 1.5:\n        TieredPen = 0\n    elif 1.5 &lt; np.abs(ImbalPercent) &lt;= 7.5:\n        TieredPen = 0.10\n    else:\n        TieredPen = 0.25\n\n    PenFloor1 = 10\n    PenFloor2 = 20\n\n    Penalty = TieredPen * np.abs(IncCost)\n\n    if np.sign(ImbalPercent) == np.sign(IncCost):\n        Penalty = 0\n\n    if TieredPen == 0.10 and Penalty &lt; PenFloor1:\n        Penalty = PenFloor1\n    elif TieredPen == 0.25 and Penalty &lt; PenFloor2:\n        Penalty = PenFloor2\n\n    return Penalty\n\n@np.vectorize\ndef Smooth(ImbalPercent, IncCost):\n\n    if np.abs(ImbalPercent) &lt;= 1.5:\n        Penalty = 0\n    else:\n        Penalty = 3*(np.abs(ImbalPercent)-1.5)\n\n    if (np.sign(ImbalPercent) != np.sign(IncCost)) and np.abs(ImbalPercent) &gt;= 1.5:\n        Penalty = Penalty + 0.02*np.abs(IncCost)*(np.abs(ImbalPercent)-1.5)\n\n    return Penalty\n\n\n# Set up general layout of figure\nfig = plt.figure(figsize=(20,20))\n\nmy_elev = 36\nmy_azim = -59\n\nmy_zmin = -80.\nmy_zmax = 160.\n\nmy_norm = mpl.colors.Normalize(vmin=my_zmin,vmax=my_zmax)\n\nmy_cmap = cm.cubehelix\n\n\n# X is vector of imbalance percentages\nX = np.arange(-20,20,.2)\n# Y is vector of incremental costs\nY = np.arange(-200,500,5)\nX, Y = np.meshgrid(X, Y)\n\n\n# Create status quo axis\nax1 = fig.add_subplot(2,2,1, projection='3d')\n\nZ = ImbalPenSQ(X,Y)\nsurf1 = ax1.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=my_cmap, norm=my_norm, linewidth=0, antialiased=False)\nax1.set_zlim(my_zmin,my_zmax)\n\nax1.zaxis.set_major_locator(LinearLocator(7))\nax1.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\nax1.set_xlabel('imbalance %', labelpad=10)\nax1.set_ylabel('incremental cost', labelpad=10)\nax1.set_zlabel('effective penalty', labelpad=20)\nax1.set_title('Status quo')\nax1.view_init(elev=my_elev, azim=my_azim)\n\nax1.tick_params(pad=5)\nax1.tick_params(axis='z',pad=15)\n\n# Create PS policy axis\nax2 = fig.add_subplot(2,2,2, projection='3d')\n\nZ = ImbalPS(X,Y)\nsurf2 = ax2.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=my_cmap, norm=my_norm, linewidth=0, antialiased=False)\nax2.set_zlim(my_zmin,my_zmax)\n\nax2.zaxis.set_major_locator(LinearLocator(7))\nax2.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\nax2.set_title('PS policy')\nax2.view_init(elev=my_elev, azim=my_azim)\n\nax2.tick_params(pad=5)\nax2.tick_params(axis='z',pad=15)\nax2.tick_params(labelcolor='w',labelsize=0)\n\n\n\n# Create simple alternative policy axis\nax3 = fig.add_subplot(2,2,3, projection='3d')\n\nZ = Simple(X,Y)\nsurf3 = ax3.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=my_cmap, norm=my_norm, linewidth=0, antialiased=False)\nax3.set_zlim(my_zmin,my_zmax)\n\nax3.zaxis.set_major_locator(LinearLocator(7))\nax3.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\nax3.set_title('Simple alternative policy')\nax3.view_init(elev=my_elev, azim=my_azim)\n\nax3.tick_params(pad=5)\nax3.tick_params(axis='z',pad=15)\nax3.tick_params(labelcolor='w',labelsize=0)\n\n# Create amooth alternative policy axis\nax4 = fig.add_subplot(2,2,4, projection='3d')\n\nZ = Smooth(X,Y)\nsurf4 = ax4.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=my_cmap, norm=my_norm, linewidth=0, antialiased=False)\nax4.set_zlim(my_zmin,my_zmax)\n\nax4.zaxis.set_major_locator(LinearLocator(7))\nax4.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\nax4.set_title('Smooth alternative policy')\nax4.view_init(elev=my_elev, azim=my_azim)\n\nax4.tick_params(pad=5)\nax4.tick_params(axis='z',pad=15)\nax4.tick_params(labelcolor='w',labelsize=0)\n\n\n\nplt.tight_layout()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["php", "python", "bcrypt", "password-encryption"], "comments": [{"owner": {"reputation": 22927, "user_id": 468592, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/24c893062f94d0e60db020e9e3163a2c?s=128&d=identicon&r=PG", "display_name": "Jeremy Harris", "link": "https://stackoverflow.com/users/468592/jeremy-harris"}, "edited": false, "score": 0, "creation_date": 1479334140, "post_id": 40643196, "comment_id": 68518550, "body": "Out of curiousity, what versions of PHP and Python did you test this in?"}, {"owner": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "edited": false, "score": 1, "creation_date": 1479334383, "post_id": 40643196, "comment_id": 68518653, "body": "If you output <code>secret</code> in PHP and in Python before hashing, are they the same?"}, {"owner": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "edited": false, "score": 2, "creation_date": 1479334595, "post_id": 40643196, "comment_id": 68518747, "body": "PHP is using <code>$2y$</code> as the &quot;bcrypt&quot; algorithm identifier. Apparently python uses a different identifier. Also, the next value is the cost. Different costs means a different number of cycles that the hash will repeat. Try changing the php cost to <code>11</code> like the python hash (can be set as one of the options to password_hash) and see if it lines up with the python hash minus the algorithm."}, {"owner": {"reputation": 868, "user_id": 1268154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee1f6238a2196a9a80e88e51d605c00?s=128&d=identicon&r=PG", "display_name": "richardhsu", "link": "https://stackoverflow.com/users/1268154/richardhsu"}, "edited": false, "score": 1, "creation_date": 1479335135, "post_id": 40643196, "comment_id": 68519004, "body": "Looks like you can interchange them <a href=\"http://stackoverflow.com/questions/21329871/python-and-php-bcrypt\" title=\"python and php bcrypt\">stackoverflow.com/questions/21329871/python-and-php-bcrypt</a>"}, {"owner": {"reputation": 7368, "user_id": 4982088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wlrq2.png?s=128&g=1", "display_name": "Xorifelse", "link": "https://stackoverflow.com/users/4982088/xorifelse"}, "edited": false, "score": 0, "creation_date": 1479335223, "post_id": 40643196, "comment_id": 68519044, "body": "Play around with <code>$options[&#39;cost&#39;] = 11;</code> in PHP as they don&#39;t seem to match."}, {"owner": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "edited": false, "score": 0, "creation_date": 1479335468, "post_id": 40643196, "comment_id": 68519136, "body": "Also, they will never come back with the same string, unless you used the same salt on both. The salt is the first 22 characters after the third <code>$</code>. If you overwrote the php salt with the same one as python, it would come back with the same result (with the exception of the algorithm identifier). Example: <a href=\"https://3v4l.org/JijAe\" rel=\"nofollow noreferrer\">3v4l.org/JijAe</a>"}, {"owner": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "edited": false, "score": 1, "creation_date": 1479335472, "post_id": 40643196, "comment_id": 68519138, "body": "Different costs shouldn&#39;t matter, right? The <code>password_verify()</code> sees the cost in the has and validates it accordingly..What exactly are you comparing?"}, {"owner": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "edited": false, "score": 0, "creation_date": 1479335557, "post_id": 40643196, "comment_id": 68519176, "body": "password_verify will just hash the password string you pass in using the algorithm, cost and salt taken from the hash passed in. Then compare the two results. If you are comparing the output of both the python/php yourself, the cost will matter as the different cost will produce a different output."}, {"owner": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "edited": false, "score": 3, "creation_date": 1479335653, "post_id": 40643196, "comment_id": 68519217, "body": "But the hashes will never be equal, regardless? I mean, you can&#39;t compare two hashes to see if they are equal (since the same string will produce different hashes every time). You can only compare the raw value with a hash, and then it will look at the hash and get the cost from it."}, {"owner": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "reply_to_user": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "edited": false, "score": 0, "creation_date": 1479335773, "post_id": 40643196, "comment_id": 68519266, "body": "@MagnusEriksson unless you specifically set the salt to be the same. While deprecated in the most recent version, php&#39;s password_hash does allow for setting the salt."}, {"owner": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "reply_to_user": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "edited": false, "score": 0, "creation_date": 1479335827, "post_id": 40643196, "comment_id": 68519287, "body": "@JonathanKuhn - So if you set the salt yourself, it will produce the same hash? I did not know that."}, {"owner": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "reply_to_user": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "edited": false, "score": 1, "creation_date": 1479335852, "post_id": 40643196, "comment_id": 68519293, "body": "@MagnusEriksson I posted a link to an example above (<a href=\"https://3v4l.org/JijAe\" rel=\"nofollow noreferrer\">3v4l.org/JijAe</a>) that shows this."}, {"owner": {"reputation": 11132, "user_id": 2453432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8316bb81f12a04897cd36169fdadfbd9?s=128&d=identicon&r=PG", "display_name": "Magnus Eriksson", "link": "https://stackoverflow.com/users/2453432/magnus-eriksson"}, "reply_to_user": {"reputation": 14599, "user_id": 333074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6825a369234ffd708b9f4446c8f6653f?s=128&d=identicon&r=PG", "display_name": "Jonathan Kuhn", "link": "https://stackoverflow.com/users/333074/jonathan-kuhn"}, "edited": false, "score": 0, "creation_date": 1479336034, "post_id": 40643196, "comment_id": 68519357, "body": "@JonathanKuhn - Thanks. You live and you learn! :)"}, {"owner": {"reputation": 193, "user_id": 2643225, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/558c373c211f9dff9ff842ab95f2ff3b?s=128&d=identicon&r=PG", "display_name": "kdougan", "link": "https://stackoverflow.com/users/2643225/kdougan"}, "reply_to_user": {"reputation": 868, "user_id": 1268154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee1f6238a2196a9a80e88e51d605c00?s=128&d=identicon&r=PG", "display_name": "richardhsu", "link": "https://stackoverflow.com/users/1268154/richardhsu"}, "edited": false, "score": 0, "creation_date": 1479336888, "post_id": 40643196, "comment_id": 68519694, "body": "@richardhsu lol, that is totally cheating but it works"}, {"owner": {"reputation": 706, "user_id": 7127733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66560a0b68c370723e68512371bbc97?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Gaud", "link": "https://stackoverflow.com/users/7127733/amit-gaud"}, "edited": false, "score": 0, "creation_date": 1584629819, "post_id": 40643196, "comment_id": 107500346, "body": "hey @kdougan, did you find solution for this?"}], "answers": [{"comments": [{"owner": {"reputation": 21225, "user_id": 575765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877fab7e16fb4639a88aa48496b5e8cb?s=128&d=identicon&r=PG", "display_name": "martinstoeckli", "link": "https://stackoverflow.com/users/575765/martinstoeckli"}, "edited": false, "score": 1, "creation_date": 1481108073, "post_id": 41007395, "comment_id": 69238374, "body": "The BCrypt algorithm is based on the blowfish cypher, both platforms use the same algorithm BCrypt though. A different cost factor does not make the hashes incompatible, the design of BCrypt allows to verify with different cost factors."}], "tags": [], "owner": {"reputation": 351, "user_id": 5618323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38c248d8cd0a2e9d63b333442b51606?s=128&d=identicon&r=PG&f=1", "display_name": "Walt Sorensen", "link": "https://stackoverflow.com/users/5618323/walt-sorensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1481070603, "creation_date": 1481070603, "answer_id": 41007395, "question_id": 40643196, "link": "https://stackoverflow.com/questions/40643196/php-password-verify-vs-python-bcrypt-hashpw/41007395#41007395", "title": "PHP password_verify() vs Python bcrypt.hashpw()", "body": "<p>Technically they are both different versions of bcrypt or crypt-blowfish</p>\n\n<p>in php the prefix is $2y$10$\nin python the prefix is $2b$11$</p>\n\n<p>This means the cost factors are slightly different 10 vs 11 respectively\nin your update you have fixed the cost factors to both be 11</p>\n\n<p>The other part of the prefix indicates php is using the CRYPT_BLOWFISH hashing where python is using bcrypt which is based on the Blowfish cipher.</p>\n\n<p>Because of those differences the 2 passwords are not interchangeable.</p>\n"}], "owner": {"reputation": 193, "user_id": 2643225, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/558c373c211f9dff9ff842ab95f2ff3b?s=128&d=identicon&r=PG", "display_name": "kdougan", "link": "https://stackoverflow.com/users/2643225/kdougan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3262, "favorite_count": 3, "answer_count": 1, "score": 7, "last_activity_date": 1481070603, "creation_date": 1479333839, "last_edit_date": 1479337879, "question_id": 40643196, "link": "https://stackoverflow.com/questions/40643196/php-password-verify-vs-python-bcrypt-hashpw", "title": "PHP password_verify() vs Python bcrypt.hashpw()", "body": "<p>So, right to it.</p>\n\n<p>I have setup a [simple] PHP REST API where I am receiving a hashed password via the X-API-KEY header key. This works great when interfacing with another PHP script and the phrase is hashed via PHP's password_hash() method. However, when i try to interface with the API via Python and the Requests library, the key is rejected. Here are some samples:</p>\n\n<p>PHP:</p>\n\n<pre><code>&lt;?php\n$usrid = '123456';\n$dt     = new DateTime();\n$secret = \"secret{$usrid}{$dt-&gt;format('Ymd')}\";\n$hashed = password_hash($secret, PASSWORD_BCRYPT);\necho $secret.\"\\n\";\necho $hashed.\"\\n\";\necho(phpversion());\n?&gt;\n</code></pre>\n\n<p>Python:</p>\n\n<pre><code>#!/usr/bin/python\nimport bcrypt, datetime, sys\nusrid = '123456' # user id\nt = datetime.datetime.now().strftime('%Y%m%d')\nsecret = \"secret{usrid}{t}\".format(usrid=usrid,t=t)\nhashed = bcrypt.hashpw(secret, bcrypt.gensalt())\nprint secret\nprint hashed\nprint '%d.%d.%d' % (sys.version_info[:3])\n</code></pre>\n\n<p>The output of each of these is as follows:</p>\n\n<pre><code>PHP:\n    secret12345620161116\n    $2y$10$/WUBS2RkTlfcgPxvmqYRI.EkBD/CPgnpE9rYvOqweERgSwFeENUDO\n    5.6.24\n\nPython: \n    secret12345620161116\n    $2b$11$9v/l6KglHiNgOybw1Y8jWeCFHiAfv.cguO1Qmc7Noe4azSluoBeHO\n    2.7.11\n</code></pre>\n\n<p>Now, obviously they are different, that is the point, but when you pass the Python output to the PHP password_verify() function, it returns False. The PHP output verifies just fine.</p>\n\n<p>There has to be something I'm missing here but, for the life of me, I cant find it. I have tried using different salt options with no success. What am I missing? Are the two just not compatible? That seems silly, if it's true.</p>\n\n<p>Thank you in advanced,  you intelligent internet peoples.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>[I have updated the scripts with the following 2 lines for the tests]</p>\n\n<pre><code>PHP: $hashed = password_hash($secret, PASSWORD_BCRYPT, ['cost'=&gt;11]);\nPython: hashed = bcrypt.hashpw(secret, bcrypt.gensalt(11))\n</code></pre>\n\n<p>And I have used this [PHP] to verify the above:</p>\n\n<pre><code>&lt;?php\n$secret = 'secret12345620161116';\n\n$php    = '$2y$11$rMqK7PhWtYd3E6yqqor0K.p2XEOJqbxJSrknLLWfhqZKsbYRa1YRa'; // output from php script\n$python = '$2b$11$yWzCNB4dfIIVH2FLWWEQ/efSmN/KlVmLq.MGJ54plgedE1OSQgvPu'; // putput from python script\n\n$php_needs_rehash    = password_needs_rehash($php, PASSWORD_BCRYPT);\n$python_needs_rehash = password_needs_rehash($python, PASSWORD_BCRYPT);\n\necho 'php_needs_rehash: '.$php_needs_rehash.\"\\n\";\necho 'python_needs_rehash: '.$python_needs_rehash.\"\\n\";\necho \"\\n\";\n\necho \"php_info:\\n\";\nprint_r(password_get_info($php));\necho \"\\n\";\n\necho \"python_info:\\n\";\nprint_r(password_get_info($python));\necho \"\\n\";\n\necho \"php_verified: \".password_verify($secret, $php).\"\\n\";\necho \"python_verified: \".password_verify($secret, $python).\"\\n\";\necho \"\\n\";\n?&gt;\n</code></pre>\n\n<p>With the following output:</p>\n\n<pre><code>php_needs_rehash: 1\npython_needs_rehash: 1\n\nphp_info:\nArray\n(\n    [algo] =&gt; 1\n    [algoName] =&gt; bcrypt\n    [options] =&gt; Array\n        (\n            [cost] =&gt; 11\n        )\n\n)\n\npython_info:\nArray\n(\n    [algo] =&gt; 0\n    [algoName] =&gt; unknown\n    [options] =&gt; Array\n        (\n        )\n\n)\n\nphp_verified: 1\npython_verified: 1\n</code></pre>\n\n<p>So, now I'm really confused as the server still doesn't recognize my python hashed key, if I don't replace the \"$2b\" with \"$2y\" as suggested by richardhsu in the comments, that is.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 7087165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785f1f6a8aa4cb3ace65151ec354a165?s=128&d=identicon&r=PG&f=1", "display_name": "FireFume", "link": "https://stackoverflow.com/users/7087165/firefume"}, "edited": false, "score": 0, "creation_date": 1479333971, "post_id": 40643201, "comment_id": 68518484, "body": "def calc_average(scores):   y = min(scores)   list.remove(y)   x = scores[1:]   return (sum(x) / float(len(x)))"}, {"owner": {"reputation": 156, "user_id": 7159238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d65a30d877877590e03ad70f0ead4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Noah Christopher", "link": "https://stackoverflow.com/users/7159238/noah-christopher"}, "reply_to_user": {"reputation": 59, "user_id": 7087165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785f1f6a8aa4cb3ace65151ec354a165?s=128&d=identicon&r=PG&f=1", "display_name": "FireFume", "link": "https://stackoverflow.com/users/7087165/firefume"}, "edited": false, "score": 0, "creation_date": 1479334113, "post_id": 40643201, "comment_id": 68518537, "body": "For list.remove you need to put the actual name of your list variable.  So if your list is named x you would do x.remove(#) where # is the integer (i&#39;m assuming) you want to remove."}], "tags": [], "owner": {"reputation": 156, "user_id": 7159238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d65a30d877877590e03ad70f0ead4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Noah Christopher", "link": "https://stackoverflow.com/users/7159238/noah-christopher"}, "is_accepted": false, "score": 1, "last_activity_date": 1479333885, "creation_date": 1479333885, "answer_id": 40643201, "question_id": 40643184, "link": "https://stackoverflow.com/questions/40643184/how-would-i-have-my-code-remove-the-lowest-integer/40643201#40643201", "title": "How would I have my code remove the lowest integer?", "body": "<p>You can use the min() function to find the smallest value of a list, and then you can remove the value with the list.remove() function.</p>\n\n<p>Check this out for reference <a href=\"https://docs.python.org/2/library/functions.html#min\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/functions.html#min</a> or <a href=\"https://docs.python.org/3.6/library/functions.html#min\" rel=\"nofollow noreferrer\">https://docs.python.org/3.6/library/functions.html#min</a></p>\n"}, {"tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1479334015, "creation_date": 1479334015, "answer_id": 40643225, "question_id": 40643184, "link": "https://stackoverflow.com/questions/40643184/how-would-i-have-my-code-remove-the-lowest-integer/40643225#40643225", "title": "How would I have my code remove the lowest integer?", "body": "<p>You could use</p>\n\n<pre><code>return float((sum(scores) - min(scores))) / (len(scores) - 1)\n</code></pre>\n\n<p>That finds the sum of all the scores, then removes the smallest score, before dividing by the number of scores after the removal.</p>\n\n<p>Note there is no error-checking here, so this will not work properly for a list of length zero or one. That <code>float()</code> is there to ensure floating point division in Python 2.x. This uses the full speed of Python functions, but it does loop over the scores twice. A hand-coded function would be faster in looping only once but would slow down again in executing multiple commands.</p>\n"}, {"tags": [], "owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "is_accepted": false, "score": 2, "last_activity_date": 1479334200, "last_edit_date": 1479334200, "creation_date": 1479334038, "answer_id": 40643231, "question_id": 40643184, "link": "https://stackoverflow.com/questions/40643184/how-would-i-have-my-code-remove-the-lowest-integer/40643231#40643231", "title": "How would I have my code remove the lowest integer?", "body": "<p>I would sort the list then romove the first element.</p>\n\n<pre><code>a = [ 3,2,6,3,8,7,2,1]\na.sort()\na = a[1:]\nprint a\nprint float(sum(a))/len(a)\n</code></pre>\n\n<p>The benefit of doing it this way, even though it is more work for just removing the single lowest value is that it is salable. Let's say you wanted to remove the lowest 2 or three values, that would be easy once you have the list sorted.</p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 3, "last_activity_date": 1479334038, "creation_date": 1479334038, "answer_id": 40643232, "question_id": 40643184, "link": "https://stackoverflow.com/questions/40643184/how-would-i-have-my-code-remove-the-lowest-integer/40643232#40643232", "title": "How would I have my code remove the lowest integer?", "body": "<p>You don't have to literally remove the item from the list; you can just remove it from the calculation.</p>\n\n<pre><code>def calc_average(scores)\n    return (sum(scores) - min(scores)) / float(len(x) - 1)\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7087165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785f1f6a8aa4cb3ace65151ec354a165?s=128&d=identicon&r=PG&f=1", "display_name": "FireFume", "link": "https://stackoverflow.com/users/7087165/firefume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1479334200, "creation_date": 1479333766, "question_id": 40643184, "link": "https://stackoverflow.com/questions/40643184/how-would-i-have-my-code-remove-the-lowest-integer", "title": "How would I have my code remove the lowest integer?", "body": "<pre><code>def calc_average(scores)\n  x = scores[1:]\n  return (sum(x) / float(len(x)))\n</code></pre>\n\n<p>Here is some code that is supposed to find the average of a list of numbers, but not count the lowest. I'm not sure how to find the lowest number in the list, remove it from it, and then find the average of that. Can anyone help? Thanks! (The lowest number isn't always the first number in the list, that's the mistake I made...)</p>\n"}, {"tags": ["python", "html", "email", "alerts"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479334064, "post_id": 40643173, "comment_id": 68518520, "body": "create function with code sending mail and import this function into first script and use it."}, {"owner": {"reputation": 3386, "user_id": 2596103, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EteGP.png?s=128&g=1", "display_name": "Mike Zavarello", "link": "https://stackoverflow.com/users/2596103/mike-zavarello"}, "edited": false, "score": 0, "creation_date": 1479401293, "post_id": 40643173, "comment_id": 68552232, "body": "Moved the paragraph that explains the question to the beginning for better context."}, {"owner": {"reputation": 1137, "user_id": 1116842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572fbd137311b1043a354d0de1f582da?s=128&d=identicon&r=PG", "display_name": "moi", "link": "https://stackoverflow.com/users/1116842/moi"}, "edited": false, "score": 0, "creation_date": 1600874937, "post_id": 40643173, "comment_id": 113228025, "body": "I still see no question..."}], "owner": {"reputation": 1, "user_id": 7011545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120d5553c56661b7a7b859d9c339f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/7011545/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1474, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479401293, "creation_date": 1479333727, "last_edit_date": 1479401293, "question_id": 40643173, "link": "https://stackoverflow.com/questions/40643173/python-and-email-alerts", "title": "Python and Email Alerts", "body": "<p>I want to create a script that sends an email if anything that my application is monitoring changes (for example, if a user's game score changes from 89 to 75). I want to place that script in the Scripts directory. It will be called as part of a daily update that happens for the site.</p>\n\n<p>Here is the part of my code and where I want to place the email alert:</p>\n\n<pre><code>      !/usr/bin/env python\n\n      import sys\n      from subprocess import call\n      from pymomgo import MongoClinet\n      from bson import ObjectId\n      from datetime import datetime\n\n       prog_list= ['network-to-ips.py',\n        'ips-to-scope.py',\n        'update-ip-scope-staus',\n        'gamer-profile-score.py']\n        if len(sys.argv) &lt; 2:\n            raise SystemExit('usage: %s PROFILE-ID' % sys.argv[0])\n        profile_id = sys.argv[1]\n\n       print 'Begin Gamer-Profile-Update: %s  : %s ' % (profile_id,     dateime.now())\n       timestame = datetime.utcnow()\n\n       Client = MongoClient('mongodb://localhost:29812/')\n       db = client.gamer\n\n       db.porgile.update({'_id: BjectId9profile_id)},\n               {'$set': {'update_start': datetime.now(), 'status; :   'updating'}})\n\n           # Start Update\n            gstdout=open('/opt/log/gamer/profile-updates/%s.log'  % (profile_id), 'w')\n            gstderr=open('/opt/log/gamer/profile-update%s-err.log' % (profile_id), 'w')\n         count=1\n    for prog in prog_lost:\n               call(['opt/gamer/scripts/%s' % prog, progile_id], stdout=gstout,  stderr=gstderr)\ncount = count +1                         \nprogess= int((100/len(prog_list))*count)\nprint \"Progess\", progess\ndb.profile.update({'_id': ObjectID9profile_id)},\n               {'%set': {'update_progress': progress }})         \n       db.profile.update({'_id': ObjectId(profile_id)},\n              {'%set': {'update_end': dateime.now(), 'status': 'idle',             'update_progress':0}})\n       print 'End Gamer-Profile-Update %s : %s ' % 9profile_id,      dateime.now()\n</code></pre>\n\n<p>I want to place this in the Prog_list:</p>\n\n<pre><code>      import smtplib\n      from email.MIMEMultipart import MIMEMultipart\n      from email.MIMEText import MIMEText\n\n\n      fromaddr = \"YOUR ADDRESS\"\n      toaddr = \"ADDRESS YOU WANT TO SEND TO\"\n      msg = MIMEMultipart()\n      msg['From'] = fromaddr\n      msg['To'] = toaddr\n      msg['Subject'] = \"SUBJECT OF THE MAIL\"\n\n      body = \"YOUR MESSAGE HERE\"\n      msg.attach(MIMEText(body, 'plain'))\n\n     server = smtplib.SMTP('smtp.gmail.com', 587)\n     server.starttls()\n     server.login(fromaddr, \"YOUR PASSWORD\")\n     text = msg.as_string()\n     server.sendmail(fromaddr, toaddr, text)\n     server.quit()\n</code></pre>\n"}, {"tags": ["python", "publish-subscribe", "mqtt", "paho"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 7117056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/298a9382d40090414d134a684d94f3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Javier S&#225;nchez Buitrago", "link": "https://stackoverflow.com/users/7117056/javier-s%c3%a1nchez-buitrago"}, "is_accepted": false, "score": -1, "last_activity_date": 1479418569, "creation_date": 1479418569, "answer_id": 40665460, "question_id": 40643165, "link": "https://stackoverflow.com/questions/40643165/error-when-try-send-a-file-using-paho-mqtt-python/40665460#40665460", "title": "Error when try send a file using paho.mqtt.python", "body": "<p>Error using: bytes(filecontent).decode()  </p>\n\n<pre><code> Traceback (most recent call last):\n      File \"/home/pi/Desktop/Device1/Scripts/mqtt_publish.py\", line 37, in &lt;module&gt;\n        byteArr = bytes(filecontent).decode()\n    UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 7117056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/298a9382d40090414d134a684d94f3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Javier S&#225;nchez Buitrago", "link": "https://stackoverflow.com/users/7117056/javier-s%c3%a1nchez-buitrago"}, "is_accepted": true, "score": 0, "last_activity_date": 1479640590, "creation_date": 1479640590, "answer_id": 40703359, "question_id": 40643165, "link": "https://stackoverflow.com/questions/40643165/error-when-try-send-a-file-using-paho-mqtt-python/40703359#40703359", "title": "Error when try send a file using paho.mqtt.python", "body": "<p>The solution is the following:</p>\n\n<p>replace:</p>\n\n<pre><code>byteArr = bytes(filecontent)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>byteArr = bytearray(filecontent)\n</code></pre>\n\n<p>and replace: </p>\n\n<pre><code>connack_string(rc)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>mqtt.connack_string(rc)\n</code></pre>\n\n<p>Because I've imported the module: import paho.mqtt.client as mqtt</p>\n"}], "owner": {"reputation": 35, "user_id": 7117056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/298a9382d40090414d134a684d94f3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Javier S&#225;nchez Buitrago", "link": "https://stackoverflow.com/users/7117056/javier-s%c3%a1nchez-buitrago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1315, "favorite_count": 0, "accepted_answer_id": 40703359, "answer_count": 2, "score": 0, "last_activity_date": 1479640590, "creation_date": 1479333687, "last_edit_date": 1479336966, "question_id": 40643165, "link": "https://stackoverflow.com/questions/40643165/error-when-try-send-a-file-using-paho-mqtt-python", "title": "Error when try send a file using paho.mqtt.python", "body": "<p>I'm using paho.mqtt.python in python 2.7 and when I try to send a file (image), I see the next error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/home/pi/Desktop/Device1/Scripts/mqtt_publish.py\", line 39, in \nmqttc.publish(MQTT_TOPIC,byteArr,0,True)\nFile \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 980, in publish\nrc = self._send_publish(local_mid, topic, local_payload, qos, retain, False, info)\nFile \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1988, in _send_publish\nupayload = payload.encode('utf-8')\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128)\n</code></pre>\n\n<p>The publish script is the next:</p>\n\n<pre><code># Import package\nimport paho.mqtt.client as mqtt\n\n# Define Variables\nMQTT_HOST = \"192.168.1.39\" #iot.eclipse.org\nMQTT_PORT = 1883\nMQTT_KEEPALIVE_INTERVAL = 45\nMQTT_TOPIC = \"Device1\"\n#MQTT_MSG = 25\n\ndef on_connect(mqttc, userdata, flags, rc):\n        #Subscribe to a Topic\n    mqttc.subscribe(MQTT_TOPIC, 0)\n    print(\"Connection returned result: \"+connack_string(rc))\n\n    # Define on_publish event function\ndef on_publish(mqttc, userdata, mid):\n    print \"Message Published...\"\n    print(\"mid: \" +str(mid))\n    mqttc.disconect()\n\n    # Initiate MQTT Client\nmqttc = mqtt.Client(client_id=\"LCESS\", clean_session=False)\n\n    # Register publish callback function\nmqttc.on_publish = on_publish\nmqttc.on_connect = on_connect\n    # Connect with MQTT Broker\n    # probar mqttc.username_pw_set(username, password)\nmqttc.connect(MQTT_HOST, MQTT_PORT, MQTT_KEEPALIVE_INTERVAL)        \n\n    # Publish message to MQTT Broker\nf= open(\"/home/pi/Desktop/images/image.jpg\")\nfilecontent = f.read()\nbyteArr = bytes(filecontent)\n\nmqttc.publish(MQTT_TOPIC,byteArr,0,True)\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 9929, "user_id": 2125392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4fd030c5c39984fab1a4fb57d72a144?s=128&d=identicon&r=PG", "display_name": "CivFan", "link": "https://stackoverflow.com/users/2125392/civfan"}, "edited": false, "score": 0, "creation_date": 1479333860, "post_id": 40643147, "comment_id": 68518422, "body": "What&#39;s the type of <code>soup</code> after you call <code>findAll()</code>? Run <code>type(soup)</code>."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1479333900, "post_id": 40643147, "comment_id": 68518445, "body": "&quot;the output is messy and includes linebreaks &quot;\\n&quot;&quot; - which output? Where are you getting this output that you&#39;re not happy with? The only thing that could output anything in the code you&#39;ve given is <code>print soup.prettify()</code> which can&#39;t be it since you say it throws an error. What are you ultimately trying to do? What if you use the <code>.text</code> property on each element?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 9929, "user_id": 2125392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4fd030c5c39984fab1a4fb57d72a144?s=128&d=identicon&r=PG", "display_name": "CivFan", "link": "https://stackoverflow.com/users/2125392/civfan"}, "edited": false, "score": 0, "creation_date": 1479333932, "post_id": 40643147, "comment_id": 68518466, "body": "@CivFan surely it&#39;s <code>ResultSet</code>?"}, {"owner": {"reputation": 9929, "user_id": 2125392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4fd030c5c39984fab1a4fb57d72a144?s=128&d=identicon&r=PG", "display_name": "CivFan", "link": "https://stackoverflow.com/users/2125392/civfan"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1479334644, "post_id": 40643147, "comment_id": 68518774, "body": "@AlexHall just trying to lead Eric to his own answer. <code>alecxe</code> nailed it in his answer."}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 3, "last_activity_date": 1479334097, "creation_date": 1479334097, "answer_id": 40643244, "question_id": 40643147, "link": "https://stackoverflow.com/questions/40643147/python-beautifulsoup-cant-prettify/40643244#40643244", "title": "python beautifulsoup can&#39;t prettify", "body": "<p>You are reassigning the <code>soup</code> variable to the result of <code>.findAll()</code>, which is a <code>ResultSet</code> object (basically, a list of tags) which does not have the <code>prettify()</code> method.</p>\n\n<p>The solution is to keep the <code>soup</code> variable pointing to the <code>BeautifulSoup</code> instance.</p>\n"}, {"tags": [], "owner": {"reputation": 10600, "user_id": 6856342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10020e210dd11a731c13627b306d83d9?s=128&d=identicon&r=PG", "display_name": "\u5b8f\u6770\u674e", "link": "https://stackoverflow.com/users/6856342/%e5%ae%8f%e6%9d%b0%e6%9d%8e"}, "is_accepted": false, "score": 0, "last_activity_date": 1479342963, "creation_date": 1479342963, "answer_id": 40644836, "question_id": 40643147, "link": "https://stackoverflow.com/questions/40643147/python-beautifulsoup-cant-prettify/40644836#40644836", "title": "python beautifulsoup can&#39;t prettify", "body": "<p><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#output\" rel=\"nofollow noreferrer\">You can call prettify() on the top-level BeautifulSoup object, or on any of its Tag objects:</a></p>\n\n<p>findAll return a list of match tags, so your code equal to <code>[tag1,tag2..].prettify()</code>\nand it will not work.</p>\n"}], "owner": {"reputation": 27, "user_id": 7169904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211290075154045/picture?type=large", "display_name": "Eric S.", "link": "https://stackoverflow.com/users/7169904/eric-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4384, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479342963, "creation_date": 1479333604, "question_id": 40643147, "link": "https://stackoverflow.com/questions/40643147/python-beautifulsoup-cant-prettify", "title": "python beautifulsoup can&#39;t prettify", "body": "<p>I seem to be doing something wrong. I have an HTML source that I pull using urllib. Based on this HTML file I use beautifulsoup to findAll elements with an ID based on a specified array. This works for me, however the output is messy and includes linebreaks \"\\n\". </p>\n\n<ul>\n<li><strong>Python:</strong> 2.7.12</li>\n<li><strong>BeautifulSoup:</strong> bs4</li>\n</ul>\n\n<p>I have tried to use prettify() to correct the output but always get an error: </p>\n\n<p><strong>AttributeError:</strong> 'ResultSet' object has no attribute 'prettify'</p>\n\n<pre><code>import urllib\nimport re\nfrom bs4 import BeautifulSoup\n\ncfile = open(\"test.txt\")\nclist = cfile.read()\nclist = clist.split('\\n')\n\ni=0\n\nwhile i&lt;len (clist):\n    url = \"https://example.com/\"+clist[i]\n    htmlfile = urllib.urlopen (url)\n    htmltext = htmlfile.read()\n\n    soup = BeautifulSoup (htmltext, \"html.parser\")\n    soup = soup.findAll (id=[\"id1\", \"id2\", \"id3\"])\n\nprint soup.prettify()\ni+=1\n</code></pre>\n\n<p>I'm sure there is something simple I am overlooking with this line: </p>\n\n<pre><code>soup = soup.findAll (id=[\"id1\", \"id2\", \"id3\"])\n</code></pre>\n\n<p>I'm just not sure what. Sorry if this is a stupid question. I've only been using Python and Beautiful Soup for a few days.</p>\n"}, {"tags": ["python", "python-2.7", "arcpy"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 6618225, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c8ef2caf307327415deb918762b76b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6618225/kai"}, "edited": false, "score": 0, "creation_date": 1479334192, "post_id": 40643133, "comment_id": 68518572, "body": "Yeah for a shapefile it&#39;s clear. The point is to do it with an MXD and point to the layer from there. Something like <code>arcpy.ListFields(mxd, Layer)</code>, but that doesn&#39;t work. Any idea?"}, {"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "reply_to_user": {"reputation": 159, "user_id": 6618225, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c8ef2caf307327415deb918762b76b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6618225/kai"}, "edited": false, "score": 0, "creation_date": 1479339250, "post_id": 40643133, "comment_id": 68520504, "body": "@Khaled ok i added the option to iterate the shapefiles from the mxd"}, {"owner": {"reputation": 159, "user_id": 6618225, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c8ef2caf307327415deb918762b76b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6618225/kai"}, "edited": false, "score": 0, "creation_date": 1479377428, "post_id": 40643133, "comment_id": 68535366, "body": "that other solution then gives me only the layers of the MXD. I want Python to open the MXD, present me a list of all layers from which I choose one (GUI) and then get the fields of that layer back. But I found a solution (see below). Had to trick some. Anyone has a better solution, is welcome to post it!"}], "tags": [], "owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1479339194, "last_edit_date": 1479339194, "creation_date": 1479333569, "answer_id": 40643133, "question_id": 40643094, "link": "https://stackoverflow.com/questions/40643094/list-field-names-of-layer-in-mxd-file/40643133#40643133", "title": "List field names of layer in MXD file", "body": "<p>Access the mxd through the <code>arcpy.mapping.MapDocument</code> method. Then get the name and open the attributes table</p>\n\n<pre><code>mxd = arcpy.mapping.MapDocument(r\"path/Project.mxd\")\nfor df in arcpy.mapping.ListLayers(mxd):\n    print df.name\n</code></pre>\n\n<p>You can use <code>arcpy</code> and run a python script to show the table fileds by using the <code>ListFileds</code> method</p>\n\n<pre><code>import arcpy\nfieldList = arcpy.ListFields(\"path/shapefile.shp\")    \nfor field in fieldList:    \n    print field.baseName\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 11178099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX3cj.jpg?s=128&g=1", "display_name": "Jacob Helfman", "link": "https://stackoverflow.com/users/11178099/jacob-helfman"}, "edited": false, "score": 0, "creation_date": 1591854010, "post_id": 40651418, "comment_id": 110214762, "body": "How exactly are you implementing this in a GUI? Do you use selecteditem var as a param or prompt that then is a drop down of the layers to choose from?"}], "tags": [], "owner": {"reputation": 159, "user_id": 6618225, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c8ef2caf307327415deb918762b76b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6618225/kai"}, "is_accepted": false, "score": 1, "last_activity_date": 1479375769, "creation_date": 1479375769, "answer_id": 40651418, "question_id": 40643094, "link": "https://stackoverflow.com/questions/40643094/list-field-names-of-layer-in-mxd-file/40651418#40651418", "title": "List field names of layer in MXD file", "body": "<p>Ok I found a good solution. I first get all the layers from the MXD file, then save each layers' name and source into a dictionary. Then I will choose the layer I want from a GUI and have that checked with the layer names in the dictionary through which I can then access the field names:</p>\n\n<pre><code>import arcpy\nmxd = arcpy.mapping.MapDocument(r\"C:\\MyMap.mxd\") # loads my map\ndf = arcpy.mapping.ListDataFrames(mxd) # checks out the dataframes\n\nlayersources = {} # creates an empty dictionary\n\nfor d in df:\n    layers = arcpy.mapping.ListLayers(mxd, \"\", d) # lists all available layers\n\n    for lyr in layers:\n        layersources[lyr.name] = lyr.dataSource # fills keys and values of the layers (names and sources) into the dictionary\n\nselecteditem = \"the wanted layer\"  # this I choose from a GUI then, just defined it here as a variable for testing purposes\n\nfields = arcpy.ListFields(layersources[selecteditem]) # creates a list with all the fields from that layer\n\nfor field in fields: # iterates through the list of fields\n    print field.name # and prints them one by one :-)\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6618225, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c8ef2caf307327415deb918762b76b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6618225/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1893, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479375769, "creation_date": 1479333400, "question_id": 40643094, "link": "https://stackoverflow.com/questions/40643094/list-field-names-of-layer-in-mxd-file", "title": "List field names of layer in MXD file", "body": "<p>I have an ArcMap file (.MXD) that I want to search for its layers and then pick a layer and have Python show me the field names of the attribute table of that layer.</p>\n\n<p>I have gotten so far that Python (ArcPy) lists me the layer names of the mxd but I cannot figure out how to get the field names.</p>\n\n<p>In ArcMap itself I can easily do it this way:</p>\n\n<pre><code>fields = arcpy.ListFields(Layer)\nfor field in fields:\n    print field.name\n</code></pre>\n\n<p>but how do I accomplish that outside of ArcMap through an MXD file? I have searched a lot and came up with nothing, so I am looking forward to your help! Thanks a lot!</p>\n"}, {"tags": ["python", "python-2.7", "typeerror", "iterable", "gensim"], "comments": [{"owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 0, "creation_date": 1479333834, "post_id": 40643082, "comment_id": 68518408, "body": "Try wrapping <code>json.dumps</code> around your list in the uploads chunked function. This will convert your list to a string and make it compatible for upload."}, {"owner": {"reputation": 2400, "user_id": 1831518, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/38cd07441e861b59dba41d842f81cab2?s=128&d=identicon&r=PG", "display_name": "Abdelrahman Shoman", "link": "https://stackoverflow.com/users/1831518/abdelrahman-shoman"}, "reply_to_user": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 0, "creation_date": 1479335434, "post_id": 40643082, "comment_id": 68519120, "body": "@kpie I still got the same error"}], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 1831518, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/38cd07441e861b59dba41d842f81cab2?s=128&d=identicon&r=PG", "display_name": "Abdelrahman Shoman", "link": "https://stackoverflow.com/users/1831518/abdelrahman-shoman"}, "is_accepted": true, "score": 0, "last_activity_date": 1479911818, "creation_date": 1479911818, "answer_id": 40767273, "question_id": 40643082, "link": "https://stackoverflow.com/questions/40643082/python-gensim-typeerror-coercing-to-unicode-need-string-or-buffer-list-found/40767273#40767273", "title": "python gensim TypeError: coercing to Unicode: need string or buffer, list found", "body": "<p>The line below is expecting an iterable object .. where the <code>readCorpus</code> function was supposed to be a generator using the keyword <code>yield</code></p>\n\n<pre><code>self.readCorpus()\n</code></pre>\n\n<p>However the <code>readCorpus</code> function was not behaving the way a generator is supposed to be because of a poor implementation of the <code>yield</code> keyword. </p>\n\n<p>The current implementation yield an array of items every 1000 loop iterations while the correct way is yield item by item.</p>\n\n<p>Hence the readCorpus needs to be modified as following</p>\n\n<pre><code>def readCorpus(self):\n        path = '../data/reuters'\n        doc=''\n        docStart=False\n\n        fileCount=0\n\n        print 'Reading Corpus'\n        for name in glob.glob(os.path.join(path, '*.sgm')):\n            print 'Reading File| ' + name\n            docCount=0\n            for line in open(name):\n                if(len(re.findall(r'&lt;BODY&gt;', line)) &gt; 0 ): \n                    docStart = True\n                    pattern = re.search(r'&lt;BODY&gt;.*', line)\n                    doc+= pattern.group()[6:]\n\n                if(len(re.findall(r'&lt;/BODY&gt;\\w*', line)) &gt; 0 ):\n                    docStart = False\n                    #docs.append(doc)\n                    yield doc\n                    doc=''\n                    docCount+=1\n                    continue\n                    #break\n                if(docStart):\n                    doc += line\n\n            fileCount+=1\n            print 'docuemnt[%d][%d]'%(fileCount,docCount)\n</code></pre>\n"}], "owner": {"reputation": 2400, "user_id": 1831518, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/38cd07441e861b59dba41d842f81cab2?s=128&d=identicon&r=PG", "display_name": "Abdelrahman Shoman", "link": "https://stackoverflow.com/users/1831518/abdelrahman-shoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 40767273, "answer_count": 1, "score": 0, "last_activity_date": 1479911900, "creation_date": 1479333353, "last_edit_date": 1479911900, "question_id": 40643082, "link": "https://stackoverflow.com/questions/40643082/python-gensim-typeerror-coercing-to-unicode-need-string-or-buffer-list-found", "title": "python gensim TypeError: coercing to Unicode: need string or buffer, list found", "body": "<p>So I believe despite this being a common issue with many similar questions (especially on stackoverflow), the main reason behind this issue varies in each case</p>\n\n<p>In my case I have a method named <code>readCorpus</code> (<strong>find code below</strong>) it reads a list of 21 files, extract docs from each file then yield them</p>\n\n<p>The yield operation occurs at the end of reading each file</p>\n\n<p>I have another method named <code>uploadCorpus</code> (<strong>find code below</strong>). The main aim of this method is to upload that corpus. </p>\n\n<p>Obviously the main reason behind using yield is that the corpus can be very large and I only need to read it once.</p>\n\n<p>Once I run the method <code>uploadCorpus</code> I receive the error below</p>\n\n<p><code>TypeError: coercing to Unicode: need string or buffer, list found</code></p>\n\n<p>The erros occurs at the line <code>self.readCorpus()])</code>. </p>\n\n<p>Reading similar problems I came to understand that it happens when a list is misplaced .. I tried to uplate the line of question here to <code>docs for docs in self.readCorpus()])</code> but I ended with the same issue</p>\n\n<p><strong>My code (uploadCorpus)</strong></p>\n\n<pre><code>def uploadCorpus(self):\n        #convert docs to corpus\n        print \"uploading\"\n\n        utils.upload_chunked(\n            self.service,\n            [{'id': 'doc_%i' % num, 'tokens': utils.simple_preprocess(doc)}\n            for num, doc in enumerate([ \n                self.readCorpus()])\n                ],\n            chunksize=1000) # send 1k docs at a time\n</code></pre>\n\n<p><strong>My code readCorpus()</strong></p>\n\n<pre><code>def readCorpus(self):\n    path = '../data/reuters'\n    doc=''\n    docs = []\n    docStart=False\n\n    fileCount=0\n\n    print 'Reading Corpus'\n    for name in glob.glob(os.path.join(path, '*.sgm')):\n        print 'Reading File| ' + name\n        docCount=0\n        for line in open(name):\n            if(len(re.findall(r'&lt;BODY&gt;', line)) &gt; 0 ): \n                docStart = True\n                pattern = re.search(r'&lt;BODY&gt;.*', line)\n                doc+= pattern.group()[6:]\n\n            if(len(re.findall(r'&lt;/BODY&gt;\\w*', line)) &gt; 0 ):\n                docStart = False\n                docs.append(doc)\n                doc=''\n                docCount+=1\n                continue\n                #break\n            if(docStart):\n                doc += line\n\n        fileCount+=1\n        print 'docuemnt[%d][%d]'%(fileCount,docCount)\n        yield docs\n        docs = []\n</code></pre>\n"}, {"tags": ["python", "testing", "mocking"], "owner": {"reputation": 135, "user_id": 5050351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9c8f73add3df0e29bd00fc8f7582003?s=128&d=identicon&r=PG", "display_name": "Paul Morris", "link": "https://stackoverflow.com/users/5050351/paul-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1479333263, "creation_date": 1479333263, "question_id": 40643063, "link": "https://stackoverflow.com/questions/40643063/mocked-method-claims-it-has-more-calls-than-expected", "title": "Mocked method claims it has more calls than expected", "body": "<p>I have a class, <code>QueryBuilder</code>, which sends the message <code>build</code> to an instance of another class, <code>Query</code>. The method that sends that message is called <code>build_query</code>. For the purpose of this question, I'm only concerned with what values <code>QueryBuilder</code> sends to <code>Query</code>'s <code>build</code> method. </p>\n\n<p>My test for <code>QueryBuilder</code> asserts that <code>Query</code>'s <code>build</code> method is called once for each set of \"grouped params\" sorted by <code>QueryBuilder</code>.</p>\n\n<pre><code>def test_groups_queries_based_on_config(self):\n    params = {'metatag_attr': 'name', 'metatag_val': 'description', 'robots': True}\n    with patch.object(Query, 'build') as mock_query_build:\n        self.query_builder.build_queries(params)\n        calls = [call({'metatag_attr': 'name', 'metatag_val': 'description'}),\n                 call({'robots': True})]\n        mock_query_build.assert_has_calls(calls)\n</code></pre>\n\n<p>Here is the code for <code>QueryBuilder</code>.</p>\n\n<pre><code>class QueryBuilder(object):\n    def __init__(self, config=None):\n        self._queries = []\n        self._collected_params = None\n        self._config = config or {}\n\n    ...\n\n    def build_queries(self, params):\n        # should return an iterator of built queries\n        self._collected_params = params\n        for param_set in self._group_params():\n            query = self.build_query(param_set)\n            self._append_query(query)\n        return self._queries\n\n    def build_query(self, param_set):\n        query = self._new_query()\n        return query.build(param_set)\n\n    ### Private ###\n    def _new_query(self):\n        return Query(shortcuts=self.shortcuts, option_groups=self.options)\n\n    def _append_query(self, query):\n        valid_query = {k: v for k, v in query.items() if not k == 'seo_attr'}\n        if not valid_query:\n            return\n        self._queries.append(query)\n\n    def _group_params(self):\n        # initialize list to collect all params\n        grouped_params = []\n        # add the option params to the list\n        options = self._get_options()\n        grouped_params.extend(options)\n        # add the shortcut params to the list\n        shortcuts = self._get_shortcuts()\n        grouped_params.extend(shortcuts)\n        return grouped_params\n\n    ...\n</code></pre>\n\n<p>Some private methods and public properties have been left out because I don't believe they pertain to the question.</p>\n\n<p>The issue is that after I added this line to <code>QueryBuilder</code>'s private <code>_append_query</code> method... </p>\n\n<pre><code>valid_query = {k: v for k, v in query.items() if not k == 'seo_attr'}\nif not valid_query:\n    return\n</code></pre>\n\n<p>...I'm now getting several extra calls to the <code>build</code> method, causing my test to fail. These are the extra calls to <code>build</code>:</p>\n\n<pre><code>E       Expected: [call({'metatag_val': 'description', 'metatag_attr': 'name'}), call({'robots': True})]\nE       Actual: [call({'metatag_val': 'description', 'metatag_attr': 'name'}),\nE       call().items(),\nE       call().items().__iter__(),\nE       call({'robots': True}),\nE       call().items(),\nE       call().items().__iter__()]\n</code></pre>\n\n<p>I don't see how sending <code>items</code> to <code>query</code> in the dict comprehension is treated as a call to <code>build</code> again. What would explain this?</p>\n"}, {"tags": ["python", "python-3.x", "optimization"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479334753, "post_id": 40643056, "comment_id": 68518817, "body": "Will there be more than the two <code>testx</code> eventually? That would have some influence on whether to make sets out of lists or not. Also, do the <code>testx</code> values occur very often in <code>values</code> or very rarely? Are <code>values</code> gonna be sorted?"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479335614, "post_id": 40643056, "comment_id": 68519195, "body": "Are <code>values</code> gonna be sorted? Are there, on average, more <code>testx</code> variables than <code>values</code> per ker key?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1479336986, "post_id": 40643056, "comment_id": 68519734, "body": "How many other methods have you eliminated as not satisfactory - so we can avoid duplication of effort."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1479339867, "post_id": 40643056, "comment_id": 68520675, "body": "Magnitude of <code>values</code>?  How much time is your current solution taking?"}], "answers": [{"tags": [], "owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "is_accepted": false, "score": 2, "last_activity_date": 1479334034, "creation_date": 1479334034, "answer_id": 40643229, "question_id": 40643056, "link": "https://stackoverflow.com/questions/40643056/whats-the-most-efficient-way-to-perform-a-multiple-match-lookup-in-a-python-dic/40643229#40643229", "title": "What&#39;s the most efficient way to perform a multiple match lookup in a python dictionary?", "body": "<p>For starters, there is no reason to use <code>map</code> when you are already using a list comprehension, so you can remove that, as well as the outer <code>list</code> call:</p>\n\n<pre><code>rests = [Resp(key=key) for key, values in aDictionary.items()\n         if (test1 in values or test2 in values)]\n</code></pre>\n\n<p>A second possible optimization might be to turn each list of values into a set. That would take up time initially, but it would change your lookups (<code>in</code> uses) from linear time to constant time. You might need to create a separate helper function for that. Something like:</p>\n\n<pre><code>def anyIn(checking, checkingAgainst):\n    checkingAgainst = set(checkingAgainst)\n    for val in checking:\n        if val in checkingAgainst:\n            return True\n    return False\n</code></pre>\n\n<p>Then you could change the end of your list comprehension to read</p>\n\n<pre><code>...if anyIn([test1, test2], values)]\n</code></pre>\n\n<p>But again, this would probably only be worth it if you had more than two values you were checking, or if the list of values in <code>values</code> is very long.</p>\n"}, {"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1479337271, "post_id": 40643830, "comment_id": 68519847, "body": "How about <code>if not tests.isdisjoint(set(values))</code> for the filter - or just <code>if not tests.isdisjoint(values)</code>??"}, {"owner": {"reputation": 35385, "user_id": 173773, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e09251f97ace7198ecf804f79b602885?s=128&d=identicon&r=PG", "display_name": "blueberryfields", "link": "https://stackoverflow.com/users/173773/blueberryfields"}, "edited": false, "score": 0, "creation_date": 1479337536, "post_id": 40643830, "comment_id": 68519942, "body": "I can definitely transform the values into a set in advance. the key to set conversion might not be worth it since it&#39;s likely at runtime"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1479337545, "post_id": 40643830, "comment_id": 68519945, "body": "@wwii That would improve performance, but only if you can make <code>values</code> sets from the get-go. Otherwise, the conversion <code>list</code>-<code>set</code> would outweigh the gain."}, {"owner": {"reputation": 35385, "user_id": 173773, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e09251f97ace7198ecf804f79b602885?s=128&d=identicon&r=PG", "display_name": "blueberryfields", "link": "https://stackoverflow.com/users/173773/blueberryfields"}, "edited": false, "score": 0, "creation_date": 1479337623, "post_id": 40643830, "comment_id": 68519977, "body": "*the test to set conversion might not be worth it since it&#39;s at runtime and the len(tests) are relatively low"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479337889, "post_id": 40643830, "comment_id": 68520068, "body": "But you only have one set of tests, no. So, unless you have less then 3 tests, it is definitely worth it, as you will reuse this set for every value for every key in your dict, and the set&#39;s contains-check is much faster than the list&#39;s."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1479338134, "post_id": 40643830, "comment_id": 68520133, "body": "I just did some timing and <code>...isdisjoint(values)</code> with values as a list is faster than the comprehension and scales better than converting <code>values</code> to a set beforehand."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1479338463, "post_id": 40643830, "comment_id": 68520234, "body": "That makes sense. As you need to iterate one of the two,disjoint for a set and a list should be as performant as for two sets. I will update..."}, {"owner": {"reputation": 35385, "user_id": 173773, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e09251f97ace7198ecf804f79b602885?s=128&d=identicon&r=PG", "display_name": "blueberryfields", "link": "https://stackoverflow.com/users/173773/blueberryfields"}, "edited": false, "score": 0, "creation_date": 1479344741, "post_id": 40643830, "comment_id": 68522051, "body": "maybe i&#39;ve misnamed - length of tests doesn&#39;t change, but the contents are new each time. length of values changes more frequently; the contents are precomputed and relatively static"}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 2, "last_activity_date": 1479338608, "last_edit_date": 1495535558, "creation_date": 1479337002, "answer_id": 40643830, "question_id": 40643056, "link": "https://stackoverflow.com/questions/40643056/whats-the-most-efficient-way-to-perform-a-multiple-match-lookup-in-a-python-dic/40643830#40643830", "title": "What&#39;s the most efficient way to perform a multiple match lookup in a python dictionary?", "body": "<p>If <code>tests</code> are sufficiently numerous, it will surely pay off to switch to set operations:</p>\n\n<pre><code>tests = set([test1, test2, ...])\nresps = map(Resp, (k for k, values in dic.items() if not tests.isdisjoint(values)))  \n# resps this is a lazy iterable, not a list, and it uses a \n# generator inside, thus saving the overhead of building \n# the inner list.\n</code></pre>\n\n<p>Turning the <code>dict</code> values into sets would not gain anything as the conversion would be <code>O(N)</code> with <code>N</code> being the added size of all <code>values</code>-lists, while the above disjoint operation will only iterate each <code>values</code> until it encounters a <code>testx</code> with <code>O(1)</code> lookup.</p>\n\n<p><code>map</code> is possibly more performant compared to a comprehension if you do not have to use lambda, e.g. if <code>key</code> can be used as the first positional argument in <code>Resp</code>'s <code>__init__</code>, but certainly not with the lambda! (<a href=\"https://stackoverflow.com/questions/1247486/python-list-comprehension-vs-map\">Python List Comprehension Vs. Map</a>). Otherwise, a generator or comprehension will be better:</p>\n\n<pre><code>resps = (Resp(key=k) for k, values in dic.items() if not tests.isdisjoint(values))\n#resps = [Resp(key=k) for k, values in dic.items() if not tests.isdisjoint(values)]\n</code></pre>\n"}], "owner": {"reputation": 35385, "user_id": 173773, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e09251f97ace7198ecf804f79b602885?s=128&d=identicon&r=PG", "display_name": "blueberryfields", "link": "https://stackoverflow.com/users/173773/blueberryfields"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1479344681, "creation_date": 1479333219, "last_edit_date": 1479344681, "question_id": 40643056, "link": "https://stackoverflow.com/questions/40643056/whats-the-most-efficient-way-to-perform-a-multiple-match-lookup-in-a-python-dic", "title": "What&#39;s the most efficient way to perform a multiple match lookup in a python dictionary?", "body": "<p>I'm looking to maximally optimize the runtime for this chunk of code:</p>\n\n<pre><code>aDictionary= {\"key\":[\"value\", \"value2\", ...\n\nrests = \\\n         list(map((lambda key: Resp(key=key)),\n                     [key for key, values in\n                      aDictionary.items() if (test1 in values or test2 in values)]))\n</code></pre>\n\n<p>using python3. willing to throw as much memory at it as possible.</p>\n\n<p>considering throwing the two dictionary lookups on separate processes for speedup (does that make sense?). any other optimization ideas welcome</p>\n\n<hr>\n\n<ul>\n<li>values can definitely be sorted and turned into a set; it is precomputed, very very large.</li>\n<li>always len(values) >>>> len(tests), though they're both growing over time</li>\n<li>len(tests) grows very very slowly, and has new values for each execution</li>\n<li>currently looking at strings (considering doing a string->integer mapping)</li>\n</ul>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 1, "creation_date": 1479333274, "post_id": 40643043, "comment_id": 68518142, "body": "You should include your code"}, {"owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 0, "creation_date": 1479333401, "post_id": 40643043, "comment_id": 68518187, "body": "If there is a blank line between each group you can start by splitting your text by <code>text.split(&quot;\\n\\n&quot;)</code>. That way instead of processing your whole file you will process a list of chunks where each chunk can be processed by a similar method. Also often times there will be a blank line at the end of the file that can throw off parsing. Beware of that."}, {"owner": {"reputation": 649, "user_id": 4979237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh4.googleusercontent.com/-IhkrApjwfYo/AAAAAAAAAAI/AAAAAAAAABA/g7-CQDdB2BI/photo.jpg?sz=128", "display_name": "Albert Rothman", "link": "https://stackoverflow.com/users/4979237/albert-rothman"}, "edited": false, "score": 0, "creation_date": 1479335923, "post_id": 40643043, "comment_id": 68519312, "body": "Perhaps it would be best to use a list of dictionary to get each group of nine lines. You can then use the beginning of the line as a dictionary key, eg <code>my_dict[&quot;review&#47;time&quot;]= #the line of text you want</code>"}], "owner": {"reputation": 75, "user_id": 6883283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101547893925653/picture?type=large", "display_name": "Christopher Flach", "link": "https://stackoverflow.com/users/6883283/christopher-flach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479333488, "creation_date": 1479333168, "last_edit_date": 1479333488, "question_id": 40643043, "link": "https://stackoverflow.com/questions/40643043/python-skip-certain-lines-in-large-text-file", "title": "Python Skip Certain Lines in Large Text File", "body": "<p>I have a very large text file that I'm reading. When I run my code, I get a 'list index out of range' error. I noticed that certain lines need to be ignored in my data. Each set of 9 lines should look like the 1st example below. Some sets have a random line (see second set). How do I ignore or delete certain lines so that my count isn't thrown off? I need all the data to be in sets of 9 lines. Could I perhaps require line 1 to begin with product, lines 2-8 being with review, and line 9 be blank?</p>\n\n<pre><code>product/productId: B001E4KFG0\nreview/userId: A3SGXH7AUHU8GW\nreview/profileName: delmartian\nreview/helpfulness: 1/1\nreview/score: 5.0\nreview/time: 1303862400\nreview/summary: Good Quality Dog Food\nreview/text: I have bought several of the Vitality canned dog food products and have\nfound them all to be of good quality. The product looks more like a stew than a\nprocessed meat and it smells better. My Labrador is finicky and she appreciates this\nproduct better than most.\n\nproduct/productId: B001E4KFG0\nreview/userId: A3SGXH7AUHU8GW\nreview/profileName: delmartian\nreview/helpfulness: 1/1\nerror error error\nreview/score: 5.0\nreview/time: 1303862400\nreview/summary: Good Quality Dog Food\nreview/text: I have bought several of the Vitality canned dog food products and have\nfound them all to be of good quality. The product looks more like a stew than a\nprocessed meat and it smells better. My Labrador is finicky and she appreciates this\nproduct better than most.\n</code></pre>\n\n<p>Code</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport collections\n\n%time\nwith open('foods.txt',encoding='ISO-8859-1') as food_file:\n\n    dict_list = []\n    column_names = ('Product ID', 'Number of people who voted this review helpful', 'Total number of people who rated this review', 'Rating of product', 'Text of the review')\n\n    line_num = 1\n    while line_num &lt;20000000:  \n        #Read Lines\n        line1 = food_file.readline()\n        line2 = food_file.readline()\n        line3 = food_file.readline()\n        line4 = food_file.readline()\n        line5 = food_file.readline()\n        line6 = food_file.readline()\n        line7 = food_file.readline()\n        line8 = food_file.readline()\n        line9 = food_file.readline()\n\n        #Break out of the loop if we hit the end of the file\n        if not line1:\n            break\n\n        #This code when in use tells me the last successful line. I then searched the text file to make corrections.\n        #Manual process - not desirable\n        #if len(line9) &gt; 1:\n            #print(line9)\n            #break\n\n        #Split Lines for Dataframe\n        prod = line1.split(':')[1].strip()\n        helpful = line4.split(':')[1].strip()\n        helpful = helpful.split('/')[0] #More efficient approach?\n        review_total = \"/\".join(line4.split(\"/\",2)[2:]).strip()\n        rating = line5.split(':')[1].strip()\n        review_text = line8.split(':')[1].strip()    \n\n        dict_list.append(collections.OrderedDict(zip(column_names, [prod, helpful, review_total, rating, review_text])))\n\n        line_num += 9\n\namazon_df = pd.DataFrame(dict_list)\namazon_df\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "plot", "cdf"], "owner": {"reputation": 63, "user_id": 4085126, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dnrIcMoNQtQ/AAAAAAAAAAI/AAAAAAAAAdY/nUIjpAsXKfA/photo.jpg?sz=128", "display_name": "GUANGYUAN PIAO", "link": "https://stackoverflow.com/users/4085126/guangyuan-piao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479333059, "creation_date": 1479333059, "question_id": 40643019, "link": "https://stackoverflow.com/questions/40643019/python-matplotlib-add-additional-information-to-cdf-plot", "title": "Python matplotlib add additional information to CDF plot", "body": "<p>I'm able to plot a CDF plot (My CDF) using </p>\n\n<pre><code>import numpy as np\nimport matplotlib\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import FuncFormatter\n\n\ndef to_percent(y, position):\n# Ignore the passed in position. This has the effect of scaling the default\n# tick locations.\ns = str(y)\n\n# The percent symbol needs escaping in latex\nif matplotlib.rcParams['text.usetex'] is True:\n    return s + r'$\\%$'\nelse:\n    return s + '%'\n\n\ndata = np.loadtxt('histogram.txt')\nlogdata = np.log(data+1)\nnum_bins = 50000\ncounts, bin_edges = np.histogram(logdata, bins=num_bins)\ncdf = (np.cumsum(counts)/77824) * 100 \nplt.plot(bin_edges[1:], cdf)\nformatter = FuncFormatter(to_percent)          \nplt.gca().yaxis.set_major_formatter(formatter)\n\n\nplt.xlabel('log(No. of ListMemberships + 1)')\nplt.ylabel('Cumulative Percentage')\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dgsxT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dgsxT.png\" alt=\"My CDF\"></a></p>\n\n<p>What I'd like to do is adding additional information like CDF below with some texts (90%, 10% in y-axis) and additional red dotted lines within the plotted figure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aNx4v.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aNx4v.jpg\" alt=\"CDF with additional information\"></a></p>\n"}, {"tags": ["python", "pandas", "psycopg2"], "comments": [{"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479333196, "post_id": 40642976, "comment_id": 68518096, "body": "What is the problem with using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_sql.html\" rel=\"nofollow noreferrer\"><code>df.to_sql</code></a>? It will take care of everything for you, instead of that roundabout way you are using. Also, why are you assigning <code>df.to_csv</code> to a variable?"}, {"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "reply_to_user": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479333541, "post_id": 40642976, "comment_id": 68518256, "body": "@Kartik sorry, forget to mention, can&#39;t use to_sql method of dataframe, doing bulk copying here, to_sql is too slow.."}], "answers": [{"comments": [{"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479333906, "post_id": 40643048, "comment_id": 68518451, "body": "You cleared one point of confusion for me (that number is float). I just update the question to add in a few constraints. If you could update the answer, I would accept it as the best:)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479334083, "post_id": 40643048, "comment_id": 68518525, "body": ":) let me tell you that I learned about integer exponentation in python only a year ago. Before I was just doing stupid <code>int(1.5637e+07)</code>. But <code>int(1.5637e+22) = 15637000000000000786432</code>"}, {"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479334375, "post_id": 40643048, "comment_id": 68518651, "body": "thanks for your effort, but sadly, I am getting those data through api call, and can&#39;t do int() to convert them..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479334566, "post_id": 40643048, "comment_id": 68518739, "body": "thanks for accepting, but I&#39;m not quite satisfied: I won&#39;t accept your acceptance :) You mean <code>test.csv</code> isn&#39;t yours to create right? that&#39;s very fixable you know. I&#39;m not getting the &quot;API call&quot; part. Your reproducer creates a file and then reads it. What&#39;s the real case?"}, {"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479395696, "post_id": 40643048, "comment_id": 68548168, "body": "haha, let&#39;s see whether we can figure this out.   I get the dataframe this way:    df = DataFrame.from_records(list(  my_api_call()   ))"}, {"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479397018, "post_id": 40643048, "comment_id": 68549212, "body": "I want to find a format that could achieve:   1.0 -&gt; 1  and 9.87e+7 -&gt; 98700000"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "edited": false, "score": 0, "creation_date": 1479397307, "post_id": 40643048, "comment_id": 68549433, "body": "could you just tell me what <code>my_api_call()</code> returns (a simplified example). Is it a python list, an iterable? can you post an example of that?"}, {"owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1479397646, "post_id": 40643048, "comment_id": 68549696, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128365/discussion-between-user2628641-and-jean-francois-fabre\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1479333964, "last_edit_date": 1479333964, "creation_date": 1479333191, "answer_id": 40643048, "question_id": 40642976, "link": "https://stackoverflow.com/questions/40642976/psycopg2-copy-expert-csv-file-containing-e-integer-number/40643048#40643048", "title": "psycopg2: copy_expert csv file containing e+ integer number", "body": "<p><code>1.5637e+07</code> isn't an integer. It's a float</p>\n\n<pre><code>&gt;&gt;&gt; 1.5637e+07\n15637000.0\n&gt;&gt;&gt; type(1.5637e+07)\n&lt;class 'float'&gt;\n</code></pre>\n\n<p>If you want an integer, just do <code>15637*10**3</code> or simply <code>15637000</code>. That will be an integer.</p>\n\n<pre><code>pd.Series([1, 0.0, 15637000])\n</code></pre>\n\n<p>Note: doing <code>int(1.5637e+07)</code> would also work here, but would fail with loss of precision for highest 10th powers: (<code>int(1.5637e+22) = 15637000000000000786432</code>) so better stick to integer exponentiation, unlike C integers, python integers can handle unlimited values, well memory-limited at most)</p>\n"}], "owner": {"reputation": 1613, "user_id": 2628641, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a596253032b20c4825604b9e3e7cd09e?s=128&d=identicon&r=PG", "display_name": "user2628641", "link": "https://stackoverflow.com/users/2628641/user2628641"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 40643048, "answer_count": 1, "score": 0, "last_activity_date": 1479395808, "creation_date": 1479332917, "last_edit_date": 1479395808, "question_id": 40642976, "link": "https://stackoverflow.com/questions/40642976/psycopg2-copy-expert-csv-file-containing-e-integer-number", "title": "psycopg2: copy_expert csv file containing e+ integer number", "body": "<p>First, let me show how to reproduce the problem. It's simple setup.</p>\n\n<p>here is my simple test csv file</p>\n\n<pre><code>a;b\n1;1\n0;2\n1.5637e+07;3\n</code></pre>\n\n<p>the test csv file is generated by pandas dataframe's to_csv method</p>\n\n<pre><code>import csv, pandas as pd\n\nd = {'a' : pd.Series([1, 0.0, 1.5637e+07]),'b' : pd.Series([1, 2, 3])}\n\ndf = pd.DataFrame(d)\n\ndf_csv = df.to_csv('test.csv', encoding=\"utf-8\", index=False,\n                   sep=';', quotechar='\"', float_format=\"%g\", quoting=csv.QUOTE_MINIMAL)    \n</code></pre>\n\n<p>then, let's create a test table in db</p>\n\n<pre><code>create table testtb (\n    a integer,\n    b integer\n)\n</code></pre>\n\n<p>Finally, I tried to export the csv file into that table, some set up code here</p>\n\n<pre><code>def parse_column(header):\n    column_str = \",\".join(header[0].split(\";\"))\n    return column_str\n\nconn = psycopg2.connect(\"dbname=test1 \" +\n                            \" user=postgres\" +\n                            \" host=localhost\" +\n                            \" password=password\")\n\ncur = conn.cursor()\n\nwith open('test.csv', \"r\") as f:\n    reader = csv.reader(f)\n    header = next(reader)\n    f.seek(0)\n\n    copy_sql = \"\"\"\n            COPY {}.{}({}) FROM STDIN CSV HEADER DELIMITER ';'\n            \"\"\".format(\"public\", \"simplew\", parse_column(header))\n    cur.copy_expert(sql=copy_sql, file=f)\n\nconn.commit()\n</code></pre>\n\n<p>The problem is, now I get </p>\n\n<pre><code>invalid input syntax for integer: \"1.5637e+07\"\n</code></pre>\n\n<p>There are few constraints for solution here</p>\n\n<ol>\n<li>I can't use to_sql method of dataframe, I am doing bulk copying here, to_sql is too slow..</li>\n<li>because of No.1, I have to follow the procedure I laid out above, to_csv, then copy the csv to DB, which means I can't use any code to format \"1.5637e+07\", except setting float_format in the to_csv method..</li>\n<li>about the float_format, I need to get rid of trailing zero of float number, so I set it to %g currently</li>\n</ol>\n\n<p>Finally, I get the input dataframe this way: </p>\n\n<pre><code>df = DataFrame.from_records(list(  my_api_call()   ))\n</code></pre>\n\n<p>the example I made up above was just to show the case</p>\n"}, {"tags": ["python", "sentry", "luigi"], "answers": [{"tags": [], "owner": {"reputation": 5400, "user_id": 3219121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3b3decf3a49e94f49172034f5df598?s=128&d=identicon&r=PG", "display_name": "matagus", "link": "https://stackoverflow.com/users/3219121/matagus"}, "is_accepted": true, "score": 4, "last_activity_date": 1481022958, "last_edit_date": 1495540904, "creation_date": 1479390102, "answer_id": 40656485, "question_id": 40642949, "link": "https://stackoverflow.com/questions/40642949/can-i-route-luigi-pipeline-errors-to-sentry/40656485#40656485", "title": "Can I route Luigi pipeline errors to Sentry?", "body": "<p>I think it should be possible if you declare a <a href=\"http://luigi.readthedocs.io/en/stable/tasks.html?highlight=failure#events-and-callbacks\" rel=\"nofollow noreferrer\">callback to the failure event</a> and do the sentry tracking stuff there:</p>\n\n<pre><code>import luigi\n\n@luigi.Task.event_handler(luigi.Event.FAILURE)\ndef mourn_failure(task, exception):\n    client = Client(\n        ***\n    )\n    # we also include extra context for the current task\n    client.captureException(\n       (type(e), e.message, e.traceback),\n       extra=dict(task=repr(task))\n    )\n    logger.critical('Error occurred: {e}'.format(e=exception))\n\n\nif __name__ == '__main__':\n    luigi.run()\n</code></pre>\n\n<p><strong>NOTICE</strong> that <code>e.traceback</code> will only work on python 3+ <a href=\"https://stackoverflow.com/a/14564261/3219121\">as explained in this answer</a>.</p>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 1, "accepted_answer_id": 40656485, "answer_count": 1, "score": 2, "last_activity_date": 1481022958, "creation_date": 1479332797, "question_id": 40642949, "link": "https://stackoverflow.com/questions/40642949/can-i-route-luigi-pipeline-errors-to-sentry", "title": "Can I route Luigi pipeline errors to Sentry?", "body": "<p>My team uses <code>Sentry</code> to track errors, and so I would prefer to not use Luigi's built-in email capabilities to keep all our reporting in one place.  </p>\n\n<p>This is how I have it currently set up, and it seems to be skipping Sentry entirely:</p>\n\n<pre><code>if __name__ == '__main__':\n    try:\n        luigi.run()\n    except Exception as e:\n        client = Client(\n            ***\n        )\n        client.captureException(tags={\n            sys.argv[0]\n        })\n        logger.critical('Error occurred: {e}'.format(e=e))\n        raise\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "scrapy", "image-uploading"], "comments": [{"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1479381825, "post_id": 40642911, "comment_id": 68538381, "body": "Do your items contains the S3 URLs?"}], "answers": [{"tags": [], "owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "is_accepted": true, "score": 1, "last_activity_date": 1479382957, "creation_date": 1479382957, "answer_id": 40654009, "question_id": 40642911, "link": "https://stackoverflow.com/questions/40642911/how-to-export-aws-s3-url-to-csv-for-images-i-uploaded-there-via-scrapy/40654009#40654009", "title": "How to export AWS S3 URL to CSV for images I uploaded there via Scrapy?", "body": "<p>I found out the solution myself! It turns out I forget to add a simple setting. I don't want to use the default image field name. I want to use <code>Images</code> instead of <code>images</code>, so I have to put this setting in <code>settings.py</code>:</p>\n\n<pre><code>IMAGES_RESULT_FIELD = 'Images'\n</code></pre>\n"}], "owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 40654009, "answer_count": 1, "score": 0, "last_activity_date": 1543069432, "creation_date": 1479332638, "last_edit_date": 1543069432, "question_id": 40642911, "link": "https://stackoverflow.com/questions/40642911/how-to-export-aws-s3-url-to-csv-for-images-i-uploaded-there-via-scrapy", "title": "How to export AWS S3 URL to CSV for images I uploaded there via Scrapy?", "body": "<p>I have successfully uploaded images to AWS S3 via Scrapy using the <code>ImagesPipeline</code>. Now the problem is, the AWS S3 image URLs are not showing up when I export the scraped info to CSV.</p>\n\n<p>How can I make sure the AWS S3 image URLs to be exported to the CSV?</p>\n"}, {"tags": ["python", "google-chrome", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "edited": false, "score": 0, "creation_date": 1512026259, "post_id": 47567555, "comment_id": 82093178, "body": "add explanation to your solution"}], "tags": [], "owner": {"reputation": 43, "user_id": 3751111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001045038233/picture?type=large", "display_name": "user3751111", "link": "https://stackoverflow.com/users/3751111/user3751111"}, "is_accepted": false, "score": 0, "last_activity_date": 1512024957, "creation_date": 1512024957, "answer_id": 47567555, "question_id": 40642863, "link": "https://stackoverflow.com/questions/40642863/webdriver-chrome-errno-10054/47567555#47567555", "title": "webdriver.Chrome ERRNO 10054", "body": "<p>try</p>\n\n<pre><code>chrome_options = webdriver.ChromeOptions()\nchrome_options.add_argument('--no-sandbox')\nchrome_options.add_argument('--screen-size=1920X1080')\ndriver = webdriver.Chrome('your_chrome_patch/chromedriver',chrome_options=chrome_options)\ndriver.get(url)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6787038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RU93oabYFLc/AAAAAAAAAAI/AAAAAAAAAec/RYUZVZeeDf0/photo.jpg?sz=128", "display_name": "M. Heinl", "link": "https://stackoverflow.com/users/6787038/m-heinl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512024957, "creation_date": 1479332430, "last_edit_date": 1479337259, "question_id": 40642863, "link": "https://stackoverflow.com/questions/40642863/webdriver-chrome-errno-10054", "title": "webdriver.Chrome ERRNO 10054", "body": "<p>I have some web scraping script but now it doesn't work. I get an error on just these lines:</p>\n\n<pre><code>from selenium import webdriver\ndriver = webdriver.Chrome()\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>socket.error: [Errno 10054] An existing connection was forcibly closed by the remote host\n</code></pre>\n\n<p>I tried to reinstall Chrome, use last version of chromedriver but it still doesn't work.\nCould somebody help me?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "algorithm", "sorting", "graph"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1479332183, "post_id": 40642750, "comment_id": 68517602, "body": "For graph algorithms, try the library NetworkX."}], "owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1479332016, "creation_date": 1479332016, "question_id": 40642750, "link": "https://stackoverflow.com/questions/40642750/topologically-sort-dag-into-batches", "title": "Topologically sort DAG into batches", "body": "<p>I'm looking for an algorithm to sort a DAG into batches of vertices, such that no vertices in a batch have an edge between them, and the batches are sorted in an order such that no vertex in a batch has an edge to a batch after it in the sorting order. I can't seem to come up with an efficient modification of a generic topological sort, because to discover what batch to put a vertex in, you must fill all batches before the one it belongs in. Effectively:</p>\n\n<pre><code>batches = []\nwhile vertices:\n    batch = []\n    for v in vertices.copy():\n        for v' in v.edges:\n            if v' in vertices:\n                break\n        else:\n            batch.append(v)\n            vertices.remove(v)\n    batches.append(batch)\n</code></pre>\n\n<p>However, this algorithm is <code>O(n^2)</code> for a reverse sorted 'linear' graph <em>with</em> a hash table for vertex lookup.</p>\n\n<p>Sorry for the pythonic pseudocode.</p>\n"}, {"tags": ["python", "python-2.7", "tensorflow", "raspberry-pi2", "tensorboard"], "comments": [{"owner": {"reputation": 3088, "user_id": 2595935, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a22d69896720e425ec5b29d1f466c998?s=128&d=identicon&r=PG", "display_name": "yuefengz", "link": "https://stackoverflow.com/users/2595935/yuefengz"}, "edited": false, "score": 0, "creation_date": 1479336063, "post_id": 40642663, "comment_id": 68519366, "body": "The <code>Tdim</code> attribute was added recently, try using the latest version of TensorFlow."}, {"owner": {"reputation": 3088, "user_id": 2595935, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a22d69896720e425ec5b29d1f466c998?s=128&d=identicon&r=PG", "display_name": "yuefengz", "link": "https://stackoverflow.com/users/2595935/yuefengz"}, "edited": false, "score": 0, "creation_date": 1479336563, "post_id": 40642663, "comment_id": 68519576, "body": "Make sure your laptop and pi have same version of tensorflow."}, {"owner": {"reputation": 75, "user_id": 7040568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1c0d006b1160ea5971429c55d491fe86?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Khoi", "link": "https://stackoverflow.com/users/7040568/nguyen-khoi"}, "reply_to_user": {"reputation": 3088, "user_id": 2595935, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a22d69896720e425ec5b29d1f466c998?s=128&d=identicon&r=PG", "display_name": "yuefengz", "link": "https://stackoverflow.com/users/2595935/yuefengz"}, "edited": false, "score": 0, "creation_date": 1479384979, "post_id": 40642663, "comment_id": 68540364, "body": "seems legit. Cause I just upgrade tensorflow 0.11.0-cp27 recently on my laptop and the pi 2 version is 0.10.0-cp27."}], "owner": {"reputation": 75, "user_id": 7040568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1c0d006b1160ea5971429c55d491fe86?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Khoi", "link": "https://stackoverflow.com/users/7040568/nguyen-khoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479331680, "creation_date": 1479331680, "question_id": 40642663, "link": "https://stackoverflow.com/questions/40642663/pi-2-get-error-when-run-image-retraining-tensorflow", "title": "pi 2 get error when run image_retraining tensorflow", "body": "<p>I successfully installed tensorflow to my raspberry pi 2 by followed \"Installing from Pip\" in this tutorial <a href=\"https://github.com/samjabrahams/tensorflow-on-raspberry-pi\" rel=\"nofollow noreferrer\">https://github.com/samjabrahams/tensorflow-on-raspberry-pi</a></p>\n\n<p>I train the image_retraining project with object images(car, chair, table,bicycle) on may laptop and run it on pi 2. It work correctly on pi 2</p>\n\n<pre><code>pi@raspberrypi:~/copy $ python label_image.py car.jpg\nW tensorflow/core/framework/op_def_util.cc:332] Op BatchNormWithGlobalNormalization is deprecated. It will cease to work in GraphDef version 9. Use tf.nn.batch_normalization().\ncar (score = 0.99672)\nbicycle (score = 0.00122)\nchair (score = 0.00109)\ntable (score = 0.00097)\n</code></pre>\n\n<p>but when I run the code I train with alphabet images on my laptop. I got errors</p>\n\n<pre><code>pi@raspberrypi:~/luanvan $ python label_image.py 9_9.jpg \nE tensorflow/core/common_runtime/executor.cc:334] Executor failed to create kernel. Invalid argument: NodeDef mentions attr 'Tdim' not in Op&lt;name=ExpandDims; signature=input:T, dim:int32 -&gt; output:T; attr=T:type&gt;; NodeDef: ExpandDims = ExpandDims[T=DT_FLOAT, Tdim=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Cast, ExpandDims/dim)\n     [[Node: ExpandDims = ExpandDims[T=DT_FLOAT, Tdim=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Cast, ExpandDims/dim)]]\nTraceback (most recent call last):\n  File \"label_image.py\", line 25, in &lt;module&gt;\n    {'DecodeJpeg/contents:0': image_data})\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 710, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 908, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 958, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 978, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: NodeDef mentions attr 'Tdim' not in Op&lt;name=ExpandDims; signature=input:T, dim:int32 -&gt; output:T; attr=T:type&gt;; NodeDef: ExpandDims = ExpandDims[T=DT_FLOAT, Tdim=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Cast, ExpandDims/dim)\n     [[Node: ExpandDims = ExpandDims[T=DT_FLOAT, Tdim=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Cast, ExpandDims/dim)]]\nCaused by op u'ExpandDims', defined at:\n  File \"label_image.py\", line 18, in &lt;module&gt;\n    _ = tf.import_graph_def(graph_def, name='')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 279, in import_graph_def\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2317, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1239, in __init__\n    self._traceback = _extract_stack()\n</code></pre>\n\n<p>I really don't understand. This command  <code>\"python new.py 9_9.jpg\"</code> run correctly on my laptop but get those errors when I run on Pi 2.</p>\n\n<p>Would you mind helping me</p>\n\n<p>thank you </p>\n"}, {"tags": ["python", "pandas", "dataframe", "natsort"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1479331801, "post_id": 40642595, "comment_id": 68517409, "body": "Please show sample data.  It sounds like your data is being read as strings rather than numbers.  Incidentally, often you will be better off using a plaintext format like CSV, rather than Excel."}, {"owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1479332670, "post_id": 40642595, "comment_id": 68517822, "body": "Done. If you need more info tell me :)"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479332837, "post_id": 40642595, "comment_id": 68517912, "body": "That is odd, as long as your index is integers, pandas should sort correctly. Have you tried <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_index.html\" rel=\"nofollow noreferrer\"><code>sort_index</code></a>?"}, {"owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "edited": false, "score": 0, "creation_date": 1479333308, "post_id": 40642595, "comment_id": 68518156, "body": "My indexes are definitely integers. I did try sort_index, but unsuccessfully. May I ask you how you&#39;d use it?"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479333760, "post_id": 40642595, "comment_id": 68518368, "body": "Wait a minute, <code>&#39;subject&#39;</code> is not your index."}, {"owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "edited": false, "score": 0, "creation_date": 1479333867, "post_id": 40642595, "comment_id": 68518430, "body": "It is in my xlsx file."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1479351929, "post_id": 40642595, "comment_id": 68523835, "body": "@AndreaD&#39;Agostino: There isn&#39;t any such thing as an index in an Excel file."}, {"owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "edited": false, "score": 0, "creation_date": 1479371020, "post_id": 40642595, "comment_id": 68531076, "body": "If you save your dataframe to an .xlsx file, then the index of your dataframe will become the &quot;index&quot; of the excel file (basically the first column, which now has 10 - 12 coming before 1 - 9). I know there isn&#39;t any index as python in excel, but give it a try."}, {"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "edited": false, "score": 0, "creation_date": 1479437202, "post_id": 40642595, "comment_id": 68567895, "body": "What are the datatypes of the numeric columns?  Are they strings or floats/ints?"}, {"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "edited": false, "score": 0, "creation_date": 1479437807, "post_id": 40642595, "comment_id": 68567993, "body": "Also, have you seen <a href=\"http://stackoverflow.com/a/29582718/1399279\">this answer about using natsort with pandas</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "edited": false, "score": 0, "creation_date": 1479334876, "post_id": 40643194, "comment_id": 68518872, "body": "&#39;subject&#39; is already my index. I save my dataframe to a new xlsx file when creating the master file with the code <code>writerFlat = pd.ExcelWriter(&#39;MASTER_FILE_FLAT.xlsx&#39;)</code> <code>writerFlat.save()</code>  In excel the dataframe index is simply the first column."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "edited": false, "score": 0, "creation_date": 1479342086, "post_id": 40643194, "comment_id": 68521345, "body": "Run my answer before saving your excel file. Your work flow is to read individual subject files, merge them to a single dataframe, set the subject number as index, sort on index, then save to the master excel file."}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 0, "last_activity_date": 1479333828, "creation_date": 1479333828, "answer_id": 40643194, "question_id": 40642595, "link": "https://stackoverflow.com/questions/40642595/natsort-with-pandas-dataframe/40643194#40643194", "title": "natsort with pandas dataframe", "body": "<p>I realized that <code>'subject'</code> is not your index. So this should fix your problem:</p>\n\n<pre><code>df.set_index('subject', inplace=True)\ndf.sort_index(inplace=True)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6459417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u15u.jpg?s=128&g=1", "display_name": "AndrewDAG", "link": "https://stackoverflow.com/users/6459417/andrewdag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "closed_date": 1479594198, "answer_count": 1, "score": 1, "last_activity_date": 1479370921, "creation_date": 1479331418, "last_edit_date": 1479370921, "question_id": 40642595, "link": "https://stackoverflow.com/questions/40642595/natsort-with-pandas-dataframe", "closed_reason": "Duplicate", "title": "natsort with pandas dataframe", "body": "<p>I'd like to have your help on the following issue:</p>\n\n<p>I have run two psychology experiments and I have retrieved reaction times from my subjects. All of this data is submitted to various .xlsx files in dataframes (one file per experiment) and with Python I created a single .xlsx file that contains all of them (through .append)\nThe index of my master file is the subject ID which starts from 1.</p>\n\n<p>The problem that I have now is that I have 12 subjects, and Python does not seem to follow the natural sorting rules...What I have is that subject 10, 11, 12 come before subject 1 - 9 (which messes up the way I retrieve my data). \nI have used natsort in such a way:</p>\n\n<pre><code>MASTER_DF_FLAT.index = natsorted(MASTER_DF_FLAT.index)\nMASTER_DF_FV.index = natsorted(MASTER_DF_FV.index)\n</code></pre>\n\n<p>This fixes the problem with the indexes, but the data on the rows won't follow the new order (on excel you can \"extend the selection\" and you get away with it). Any idea how I can fix this? </p>\n\n<p>EDIT: here is how the data is formatted with 10+ subjects:</p>\n\n<pre><code>subject block   trial   condition   RT\n10  1   1   1   0,677044666\n10  1   2   12  0,556960872\n10  1   3   2   0,51685685\n10  1   4   5   0,766190078\n</code></pre>\n\n<p>And here is the data from subject 1:</p>\n\n<pre><code>subject block   trial   condition   RT\n1   1   1   1   0,677044666\n1   1   2   12  0,556960872\n1   1   3   2   0,51685685\n1   1   4   5   0,766190078\n</code></pre>\n\n<p>As you can see the RTs have not changed (and so did not the other values)</p>\n\n<p>Thanks for your help!</p>\n\n<p>EDIT1: here is how i save my files:</p>\n\n<p>I do that :) Here is my code exactly:</p>\n\n<pre><code>for f in files:\n    data = os.path.join(data_dir,f)\n    df = pd.read_excel(data)\n\n    df.set_index('subject', inplace = True)\n\n\nconcatenated = pd.concat([block, trial, condition, RT, SOA, acc, ISI], axis=1)\n\n    if 'FV' not in f:\n        flatDFs.append(concatenated)\n    else:\n        fvDFs.append(concatenated)\n\n\nMASTER_DF_FLAT = pd.concat(flatDFs)\nwriterFlat = pd.ExcelWriter('MASTER_FILE_FLAT.xlsx')\nMASTER_DF_FLAT.to_excel(writerFlat,'Sheet1')\nwriterFlat.save()\n</code></pre>\n\n<p>As you can see, the index in my .xlsx file is indeed subject. Everything works fine, it's just the order of elements!</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 18554, "user_id": 368772, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Mbf6g.png?s=128&g=1", "display_name": "tcooc", "link": "https://stackoverflow.com/users/368772/tcooc"}, "edited": false, "score": 0, "creation_date": 1479332470, "post_id": 40642575, "comment_id": 68517734, "body": "You&#39;re using way too much memory! Look into shared memory for values that don&#39;t need to be copied (<a href=\"https://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a>)."}, {"owner": {"reputation": 1835, "user_id": 1202745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e91a64a6dc64dacabffb36634ad055?s=128&d=identicon&r=PG", "display_name": "robyschek", "link": "https://stackoverflow.com/users/1202745/robyschek"}, "edited": false, "score": 0, "creation_date": 1479333861, "post_id": 40642575, "comment_id": 68518423, "body": "Related: <a href=\"https://stackoverflow.com/questions/7894791/use-numpy-array-in-shared-memory-for-multiprocessing\">Use numpy array in shared memory for multiprocessing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479344942, "post_id": 40642719, "comment_id": 68522116, "body": "Thanks MisterMiyagi. Yes, each matrix I pass has more than 2GB. This data is needed though. Will try your suggestion of reading the data in each process, it actually can be done. It will make increase the time needed for each iteration, as instead one reading at the beginning of the process I will need to read every time I do one evaluation (thousands of times). Probably the increased time is ~25%, kind of acceptable."}, {"owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479345000, "post_id": 40642719, "comment_id": 68522132, "body": "btw, do you know if there is any other parallel processing framework that can work with this amount of data (e.g. scoop)?"}, {"owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479357830, "post_id": 40642719, "comment_id": 68525277, "body": "follow up question - can it be a problem having 20 parallel processes reading the same file at the same time?"}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "reply_to_user": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479372162, "post_id": 40642719, "comment_id": 68531734, "body": "@Joe You might be better off not having a pool of fire-and-forget processes, but individual processes each strictly working on a chunk. Then you can avoid having to re-read the data. If your data may grow even larger, you might want to look at batch processing, though."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "reply_to_user": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479372710, "post_id": 40642719, "comment_id": 68532017, "body": "@Joe I/O is mainly dictated by the media you are reading from. A modern, consumer grade HDD is suitable for only two parallel readers. An SSD can go to 20 or more concurrent readers. RAID with mirroring practically scales linearly with number of devices. Distributed, parallel file systems in a cluster are the way to go if you are in the TB range or above."}, {"owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479373349, "post_id": 40642719, "comment_id": 68532389, "body": "How about creating global variables for the input (read only) data before launching the pool and map it? This should eliminate the need of passing the large matrixes..."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "reply_to_user": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479379754, "post_id": 40642719, "comment_id": 68536978, "body": "@Joe Global variables are <i>process global</i>. They are not shared across processes, only the threads of a single process. If you have global variables, each process creates its own &quot;copy&quot; of the variable. You can look at shared memory, but then each process has to actually <i>read</i> that, and you must manage. You&#39;re better off having the OS use the memory to cache your I/O - it knows what it does."}, {"owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "edited": false, "score": 0, "creation_date": 1479523849, "post_id": 40642719, "comment_id": 68607710, "body": "Thanks for your answers. I implemented your suggestion. I found additional problems. See post here and let me know if you have any suggestion"}], "tags": [], "owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "is_accepted": true, "score": 0, "last_activity_date": 1479331878, "creation_date": 1479331878, "answer_id": 40642719, "question_id": 40642575, "link": "https://stackoverflow.com/questions/40642575/overcome-memory-constraints-while-using-multiprocessing/40642719#40642719", "title": "Overcome memory constraints while using multiprocessing", "body": "<p>Your objects are too big to pass between processes. You're passing along more than 2147483647 bytes - that's over 2GB! The protocol isn't made for this, and the sheer overhead of serializing and deserializing such large chunks of data can be a serious performance overhead.</p>\n\n<p>Reduce the size of data passed to each process. If you workflow allows it, read in the data in the separate process, and pass along only the results.</p>\n"}], "owner": {"reputation": 183, "user_id": 7169642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72f787c643aaf1bfa12fce9da6ad18a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7169642/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "accepted_answer_id": 40642719, "answer_count": 1, "score": 6, "last_activity_date": 1479335641, "creation_date": 1479331305, "last_edit_date": 1479335641, "question_id": 40642575, "link": "https://stackoverflow.com/questions/40642575/overcome-memory-constraints-while-using-multiprocessing", "title": "Overcome memory constraints while using multiprocessing", "body": "<p>I am doing a function optimization using an evolutionary algorithm (CMAES). To run it faster I am using the multiprocessing module. The function I need to optimize takes large matrices as inputs <code>(input_A_Opt, and input_B_Opt)</code> in the code below. </p>\n\n<p>They are several GBs of size. When I run the function without multiprocessing, it works well. When I use multiprocessing there seems to be a problem with memory. If I run it with small inputs it works well, but when I run with the full input, I get the following error:</p>\n\n<pre><code>File \"&lt;ipython-input-2-bdbae5b82d3c&gt;\", line 1, in &lt;module&gt;\nopt.myFuncOptimization()\n\nFile \"/home/joe/Desktop/optimization_folder/Python/Optimization.py\", line 45, in myFuncOptimization\n**f_values = pool.map_async(partial_function_to_optmize, solutions).get()**\nFile \"/usr/lib/python3.5/multiprocessing/pool.py\", line 608, in get\nraise self._value\n  File \"/usr/lib/python3.5/multiprocessing/pool.py\", line 385, in _handle_tasks\nput(task)\nFile \"/usr/lib/python3.5/multiprocessing/connection.py\", line 206, in send\nself._send_bytes(ForkingPickler.dumps(obj))\n\nFile \"/usr/lib/python3.5/multiprocessing/connection.py\", line 393, in _send_bytes\nheader = struct.pack(\"!i\", n)\n\nerror: 'i' format requires -2147483648 &lt;= number &lt;= 2147483647\n</code></pre>\n\n<p>And here's a simplified version of the code (again, if I run it with the input 10 times smaller, all works fine):</p>\n\n<pre><code>import numpy as np\nimport cma\nimport multiprocessing as mp\nimport functools\nimport myFuncs\nimport hdf5storage\n\n\n\ndef myFuncOptimization ():\n\n    temp = hdf5storage.loadmat('/home/joe/Desktop/optimization_folder/matlab_workspace_for_optimization')    \n\n    input_A_Opt  = temp[\"input_A\"]\n    input_B_Opt  = temp[\"input_B\"]\n\n    del temp\n\n    numCores = 20\n\n    # Inputs\n   #________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________\n    P0 = np.array([            4.66666667, 2.5,    2.66666667, 4.16666667, 0.96969697,     1.95959596,     0.44088176,     0.04040404,     6.05210421,     0.58585859,     0.46464646,         8.75751503,         0.16161616,             1.24248497,         1.61616162,                 1.56312625,         5.85858586,                 0.01400841, 1.0,            2.4137931,      0.38076152, 2.5,    1.99679872      ])\n    LBOpt = np.array([         0.0,        0.0,    0.0,        0.0,        0.0,            0.0,            0.0,            0.0,            0.0,            0.0,            0.0,                0.0,                0.0,                    0.0,                0.0,                        0.0,                0.0,                        0.0,        0.0,            0.0,            0.0,        0.0,    0.0,            ])\n    UBOpt = np.array([         10.0,       10.0,   10.0,       10.0,       10.0,           10.0,           10.0,           10.0,           10.0,           10.0,           10.0,               10.0,               10.0,                   10.0,               10.0,                       10.0,               10.0,                       10.0,       10.0,           10.0,           10.0,       10.0,   10.0,           ])\n    initialStdsOpt = np.array([2.0,        2.0,    2.0,        2.0,        2.0,            2.0,            2.0,            2.0,            2.0,            2.0,            2.0,                2.0,                2.0,                    2.0,                2.0,                        2.0,                2.0,                        2.0,        2.0,            2.0,            2.0,        2.0,    2.0,            ])\n    minStdsOpt = np.array([    0.030,      0.40,   0.030,      0.40,       0.020,          0.020,          0.020,          0.020,          0.020,          0.020,          0.020,              0.020,              0.020,                  0.020,              0.020,                      0.020,              0.020,                      0.020,      0.050,          0.050,          0.020,      0.40,   0.020,          ]) \n\n    options = {'bounds':[LBOpt,UBOpt], 'CMA_stds':initialStdsOpt, 'minstd':minStdsOpt, 'popsize':numCores}\n    es = cma.CMAEvolutionStrategy(P0, 1, options)\n\n    pool = mp.Pool(numCores)\n\n    partial_function_to_optmize = functools.partial(myFuncs.func1, input_A=input_A_Opt, input_B=input_B_Opt)\n\n    while not es.stop():\n        solutions = es.ask(es.popsize)            \n        f_values = pool.map_async(partial_function_to_optmize, solutions).get()   \n        es.tell(solutions, f_values)\n        es.disp(1)\n        es.logger.add()\n\n    return es.result_pretty()\n</code></pre>\n\n<p>Any suggestions on how to solve this issue? am I not coding properly (new to python) or should I use other multiprocessing package like scoop?</p>\n"}, {"tags": ["python", "crash", "encode", "bots", "twitch"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1479331586, "post_id": 40642547, "comment_id": 68517288, "body": "you could try that to filter out those characters: <a href=\"http://stackoverflow.com/questions/40614653/ignoring-certain-characters-while-looping-through-csv-rows\" title=\"ignoring certain characters while looping through csv rows\">stackoverflow.com/questions/40614653/&hellip;</a>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1479331770, "post_id": 40642547, "comment_id": 68517392, "body": "You could wrap your <code>.encode()</code> calls in a try/except block, and if you get a <code>UnicodeEncodeError</code> exception, just skip that message."}, {"owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "edited": false, "score": 0, "creation_date": 1479332726, "post_id": 40642547, "comment_id": 68517851, "body": "you tried running that with python 3?"}, {"owner": {"reputation": 11, "user_id": 7165681, "user_type": "registered", "profile_image": "https://graph.facebook.com/976112185836271/picture?type=large", "display_name": "Victor Hugo", "link": "https://stackoverflow.com/users/7165681/victor-hugo"}, "edited": false, "score": 0, "creation_date": 1479333971, "post_id": 40642547, "comment_id": 68518483, "body": "Didn&#39;t even thinked of that, the try/except solution worked. Thank you very much!"}], "owner": {"reputation": 11, "user_id": 7165681, "user_type": "registered", "profile_image": "https://graph.facebook.com/976112185836271/picture?type=large", "display_name": "Victor Hugo", "link": "https://stackoverflow.com/users/7165681/victor-hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479331463, "creation_date": 1479331205, "last_edit_date": 1479331463, "question_id": 40642547, "link": "https://stackoverflow.com/questions/40642547/twitch-bot-crashes-every-time-someone-uses-emoji-like-flushed-in-chat", "title": "Twitch bot crashes every time someone uses emoji like :flushed: in chat", "body": "<p>I created a twitch chat bot and added some simple commands, but everytime someone uses an emoji like <code>:flushed:</code> or <code>:speak_no_evil:</code> the bot simply crashes. I guess it understands it as a word and crashes because of that. </p>\n\n<p><img src=\"https://i.stack.imgur.com/yZMGP.png\" alt=\"This is the message that I get whenever it crashes.\"> </p>\n\n<p>My main code is like this: </p>\n\n<pre><code>import cfg\nimport utils\nimport socket\nimport re\nimport time, thread\nfrom time import sleep\nimport os\n\ndef main():\n    s = socket.socket()\n    s.connect((cfg.HOST, cfg.PORT))\n    s.send(\"PASS {}\\r\\n\".format(cfg.PASS).encode(\"utf-8\"))\n    s.send(\"NICK {}\\r\\n\".format(cfg.NICK).encode(\"utf-8\"))\n    s.send(\"JOIN #{}\\r\\n\".format(cfg.CHAN).encode(\"utf-8\"))\n\n    CHAT_MSG = re.compile(r\"^:\\w+!\\w+@\\w+\\.tmi\\.twitch\\.tv PRIVMSG #\\w+ :\")\n\n    utils.chat(s, \"HeyGuys\")\n\n    thread.start_new_thread(utils.threadFillOpList, ())\n\n    while True:\n        response = s.recv(1024).decode(\"utf-8\")\n        if response == \"PING :tmi.twitch.tv\\r\\n\":\n            s.send(\"PONG :tmi.twitch.tv\\r\\n\".encode(\"utf-8\"))\n        else:\n            username = re.search(r\"\\w+\", response).group(0)\n            message = CHAT_MSG.sub(\"\", response)\n            print(response)\n\n\n            if message.strip() == \"!time\":\n                utils.chat(s, \"It currently \" + time.strftime(\"%I:%M %p %Z\"))\n\n\n            if \"Kappa\" in message and not \"PogChamp\" in message:\n                utils.chat(s, \"Kappa\")\n\n\n\n            if \"PogChamp\" in message and not \"Kappa\" in message:\n                utils.chat(s, \"PogChamp\")\n\n\n\n            if message.strip() == \"!kb\":\n                utils.chat(s, \"Razer Blackwidow Tournament Edition.\")\n\n\n\n            if message.strip() == \"!skin\":\n                utils.chat(s, \"https://puu.sh/sjE7I/58820f8c10.osk\")\n\n\n\n            if message.strip() == \"!tablet\":\n                utils.chat(s, \"Wacom CTH490AK\")\n\n\n\n            if message.strip() == \"!area\":\n                utils.chat(s, \"https://puu.sh/sfr9E/1abc132c23.png\")\n\n\n\n            if message.strip() == \"!oldskin\":\n                utils.chat(s, \"https://puu.sh/sjEOD/5923cfabc0.osk\")\n\n\n\n            if message.strip() == \"!profile\":\n                utils.chat(s, \"https://osu.ppy.sh/u/3892208\")\n\n\n\n            if message.strip() == \"!np\":\n                f = open(\"C:/Users/Grellheist/Desktop/osu stream/Files/np_playing_DL.txt\", \"r\")\n                if(os.stat(\"C:/Users/Grellheist/Desktop/osu stream/Files/np_playing_DL.txt\").st_size == 0):\n                    utils.chat(s, \"There is no map being played right now!\")\n\n            else:\n                f = open(\"C:/Users/Grellheist/Desktop/osu stream/Files/np_playing_DL.txt\", \"r\")\n                utils.chat(s, f.read())\n\n\n\n            if message.strip() == \"!bot\":\n                utils.chat(s, \"I was created by Grellheist and was coded using Python 3.\")\n\n\n        sleep(1)\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>How do I get the bot to ignore these types of emoji? </p>\n"}, {"tags": ["python", "shared-libraries"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 3551690, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000467569248/picture?type=large", "display_name": "diegopso", "link": "https://stackoverflow.com/users/3551690/diegopso"}, "is_accepted": true, "score": 3, "last_activity_date": 1491517130, "creation_date": 1491517130, "answer_id": 43266653, "question_id": 40642544, "link": "https://stackoverflow.com/questions/40642544/cannot-import-shapely-geometry-in-python/43266653#43266653", "title": "Cannot import shapely.geometry in Python", "body": "<p>I had this OSError that I found in your output:</p>\n\n<pre><code>Could not find library geos_c or load any of its variants ['libgeos_c.so.1', 'libgeos_c.so']\n</code></pre>\n\n<p>To solve that I installed the lib-geos, by running:</p>\n\n<p><code>$ sudo apt-get install libgeos-dev</code></p>\n"}], "owner": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1753, "favorite_count": 0, "accepted_answer_id": 43266653, "answer_count": 1, "score": 0, "last_activity_date": 1491517130, "creation_date": 1479331182, "question_id": 40642544, "link": "https://stackoverflow.com/questions/40642544/cannot-import-shapely-geometry-in-python", "title": "Cannot import shapely.geometry in Python", "body": "<p>I am trying to import Multipoint from shapely.geometry in IPython notebook.</p>\n\n<p>When I do \"from shapely.geometry import MultiPoint\", I get the error \"No module named shapely.geometry\".</p>\n\n<p>So, I tried doing \"!pip install --upgrade shapely\", for this I get the error </p>\n\n<pre><code>Running setup.py (path:/tmp/pip-build-NyZFjW/shapely/setup.py) egg_info for package shapely\nFailed `CDLL(libgeos_c.so.1)`\nFailed `CDLL(libgeos_c.so)`\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 17, in &lt;module&gt;\n  File \"/tmp/pip-build-NyZFjW/shapely/setup.py\", line 38, in &lt;module&gt;\n    from shapely._buildcfg import geos_version_string, geos_version, \\\n  File \"shapely/_buildcfg.py\", line 167, in &lt;module&gt;\n    fallbacks=['libgeos_c.so.1', 'libgeos_c.so'])\n  File \"shapely/_buildcfg.py\", line 161, in load_dll\n    libname, fallbacks or []))\nOSError: Could not find library geos_c or load any of its variants ['libgeos_c.so.1', 'libgeos_c.so']\nComplete output from command python setup.py egg_info:\nFailed `CDLL(libgeos_c.so.1)`\n</code></pre>\n\n<p>I need to find my cluster centroids of each cluster that's formed using DBSCAN Algorithm. That can be done only if this issue is resolved.</p>\n\n<p>Any help would be greatly appreciated. </p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1261273"}, "is_accepted": true, "score": 1, "last_activity_date": 1479332352, "creation_date": 1479332352, "answer_id": 40642838, "question_id": 40642515, "link": "https://stackoverflow.com/questions/40642515/matching-data-from-2-csv-files-and-saving-the-newly-generated-data-to-a-new-csv/40642838#40642838", "title": "Matching data from 2 csv files and saving the newly generated data to a new csv", "body": "<p>This is a classic match-merge. You can use pd.merge from pandas.\nIn this case, you would do an inner join on column date.\nInner join means: in the result table are only dates that are in both input tables.</p>\n"}], "owner": {"reputation": 655, "user_id": 5183031, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ea1e2e43efd4e65f4b06cff36e36f1f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Riply", "link": "https://stackoverflow.com/users/5183031/mr-riply"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 40642838, "answer_count": 1, "score": 0, "last_activity_date": 1479335719, "creation_date": 1479331073, "last_edit_date": 1479331482, "question_id": 40642515, "link": "https://stackoverflow.com/questions/40642515/matching-data-from-2-csv-files-and-saving-the-newly-generated-data-to-a-new-csv", "title": "Matching data from 2 csv files and saving the newly generated data to a new csv", "body": "<p>I have two csv files with financial data that i need to sort into a third csv file, financial data needs to correspond to dates, meaning date I need the price for each financial instrument on a specific date.</p>\n\n<p>csv1 data</p>\n\n<pre><code>             Open   High    Low   Last  Change  Settle  Volume  Open Interest\nDate                                                                         \n1974-12-31  191.0  191.5  182.7  183.9     NaN   183.9   512.0          237.0\n1975-01-02  184.0  184.8  173.9  175.1     NaN   175.1   294.0          209.0\n1975-01-03  173.0  175.5  170.5  174.7     NaN   174.7   174.0          216.0\n1975-01-06  172.0  174.5  167.5  174.4     NaN   174.4   197.0          225.0\n1975-01-07  171.0  174.0  168.5  173.4     NaN   173.4    98.0          240.0\n</code></pre>\n\n<p>csv2 data</p>\n\n<pre><code>             Open   High    Low   Last  Change  Settle   Volume  Open Interest\nDate                                                                          \n1997-09-09  934.0  942.0  933.0  934.0     NaN   934.0   7034.0         1109.0\n1997-09-10  934.0  935.0  915.0  915.0     NaN   915.0  11387.0         2325.0\n1997-09-11  916.0  918.0  900.0  908.0     NaN   908.0   2523.0         2549.0\n1997-09-12  908.0  926.0  904.0  924.0     NaN   924.0    928.0         2163.0\n1997-09-15  925.0  930.0  920.0  922.0     NaN   922.0    208.0         2107.0\n</code></pre>\n\n<p>the first problem I encountered is that the dates on csv1 start in 1975 and on csv2 in 1997, so I would need to eliminate the extra dates in csv1.</p>\n\n<p>second problem is that dates do not match exactly further in the files</p>\n\n<p>csv1</p>\n\n<pre><code>             Open   High    Low   Last  Change  Settle  Volume  Open Interest\nDate                                                                         \n1997-09-08  191.0  191.5  182.7  183.9     NaN   183.9   512.0          237.0\n1997-09-09  184.0  184.8  173.9  175.1     NaN   175.1   294.0          209.0\n1997-09-10  173.0  175.5  170.5  174.7     NaN   174.7   174.0          216.0*******\n1997-09-11  172.0  174.5  167.5  174.4     NaN   174.4   197.0          225.0\n1997-09-12  171.0  174.0  168.5  173.4     NaN   173.4    98.0          240.0\n</code></pre>\n\n<p>date 1997-09-10 does not exist in the csv2 file, there fore the date 1997-09-10 should be deleted in the csv1 file</p>\n\n<p>csv2</p>\n\n<pre><code>             Open   High    Low   Last  Change  Settle   Volume  Open Interest\nDate                                                                          \n1997-09-08  934.0  942.0  933.0  934.0     NaN   934.0   7034.0         1109.0\n1997-09-09  934.0  935.0  915.0  915.0     NaN   915.0  11387.0         2325.0\n1997-09-11  916.0  918.0  900.0  908.0     NaN   908.0   2523.0         2549.0\n1997-09-12  908.0  926.0  904.0  924.0     NaN   924.0    928.0         2163.0\n1997-09-13  925.0  930.0  920.0  922.0     NaN   922.0    208.0         2107.0\n</code></pre>\n\n<p>the output should look like this (I have eliminated Change,  Settle,  Volume and  Open Interest columns so the table can fit properly, this should not occur in code)</p>\n\n<p>csv3</p>\n\n<pre><code>             Open   High    Low   Last   Open   High    Low   Last\nDate                                                                         \n1997-09-08  191.0  191.5  182.7  183.9   934.0  942.0  933.0  934.0   \n1997-09-09  184.0  184.8  173.9  175.1   934.0  935.0  915.0  915.0   \n1997-09-11  172.0  174.5  167.5  174.4   916.0  918.0  900.0  908.0  \n1997-09-12  171.0  174.0  168.5  173.4   925.0  930.0  920.0  922.0  \n</code></pre>\n\n<p>Here is my code for the data so far and the sources of the data</p>\n\n<p>PS new to python :)</p>\n\n<pre><code>from pandas import ExcelWriter \nimport pandas as pd\nimport quandl\nimport unicodecsv\nimport datetime as dt\n\n\n#reading in the csv files\ndef read_csv(filename):\n    with open(filename, 'rb') as f:\n        reader = unicodecsv.DictReader(f)\n        return list(reader)\n\n#data for the SnP https://www.quandl.com/data/CHRIS/CME_ES1-E-mini-S-P-500-Futures-Continuous-Contract-1-ES1-Front-Month\n#data for the Gld https://www.quandl.com/data/CHRIS/CME_GC1-Gold-Futures-Continuous-Contract-1-GC1-Front-Month\nSnP = read_csv('C:/Users/L/Desktop/python/CHRIS-CME_ES1.csv')\nGld = read_csv('C:/Users/L/Desktop/python/CHRIS-CME_GC1.csv')\nfinancialInstruments = [SnP, Gld]\n\n#parsing the date into datetime\ndef parse_date(date):\n    if date == '':\n        return None\n    else:\n        return dt.datetime.strptime(date, '%Y-%m-%d')\n\n#converting strings(numbers) into floats\ndef stock_data(data):\n    if data == '' or data == 'NaN':\n        return None\n    else:\n        return float(data)\n\n#looping through financial data for parsing\ndef define_data(finInst):\n    for data in finInst:\n        data['Date'] = parse_date(data['Date'])\n        data['Volume'] = stock_data(data['Volume'])\n        data['Open'] = stock_data(data['Open'])\n        data['High'] = stock_data(data['High'])\n        data['Low'] = stock_data(data['Low'])\n        data['Last'] = stock_data(data['Last'])\n        data['Change'] = stock_data(data['Change'])\n        data['Settle'] = stock_data(data['Settle'])\n        data['Open Interest'] = stock_data(data['Open Interest'])\n\n#looping through financial instruments and forwarding to define_data function\nfor symbol in financialInstruments:\n    symbol = define_data(symbol)     \n\nprint (SnP[0])    \nprint (Gld[0])\n</code></pre>\n"}, {"tags": ["python", "qml", "pyqt5"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1479331331, "post_id": 40642480, "comment_id": 68517153, "body": "You need to get the <code>ListModel</code> not the <code>ListView</code>, then you can use the <code>insert</code> oder <code>append</code>-function to insert new ListElements (you would insert JSON-Objects instead) <a href=\"http://doc.qt.io/qt-5/qml-qtqml-models-listmodel.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qml-qtqml-models-listmodel.html</a>"}, {"owner": {"reputation": 203, "user_id": 4833003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UHNr_8FTQgs/AAAAAAAAAAI/AAAAAAAAAII/qzNU1ai2SEc/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u043e\u0442\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/4833003/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d0%be%d1%82%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1479332616, "post_id": 40642480, "comment_id": 68517799, "body": "Now i have this error: <code>TypeError: unable to convert argument 0 of QAbstractListModel.insert from &#39;dict&#39; to &#39;QQmlV4Function*&#39;</code>"}, {"owner": {"reputation": 4799, "user_id": 6842725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d760417ddd74d615520fcdabd6c42ef?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Krammer", "link": "https://stackoverflow.com/users/6842725/kevin-krammer"}, "edited": false, "score": 0, "creation_date": 1479553643, "post_id": 40642480, "comment_id": 68613778, "body": "Wouldn&#39;t it be better if you had the model in Python and just exposed it to QML for use there? That is how one would do that when using C++ as the main application language"}], "owner": {"reputation": 203, "user_id": 4833003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UHNr_8FTQgs/AAAAAAAAAAI/AAAAAAAAAII/qzNU1ai2SEc/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u043e\u0442\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/4833003/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d0%be%d1%82%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 600, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479330992, "creation_date": 1479330992, "question_id": 40642480, "link": "https://stackoverflow.com/questions/40642480/how-to-insert-listelement-to-qml-listmodel-from-pyqt5-code", "title": "How to insert listElement to QML listModel from pyqt5 code?", "body": "<p>I want to dynamically create data with python code. I have this qml code:</p>\n\n<p><strong>messages.qml</strong></p>\n\n<pre><code>import QtQuick 2.4\nimport \"src/variables/fontawesome.js\" as FontAwesome\nimport \"src/lists\"\n\nItem {\n    width: parent.width\n    height: parent.height\n    AvatarListView{\n        anchors.fill: parent\n        objectName: \"messages_list\"\n        model: ListModel {\n            ListElement{\n                avatar: \"qrc:/src/examples/images/venkman.jpg\"\n                title:\"Sergiy Giba\"\n                detail: \"C\u0435\u043a\u0441 \u0431\u0443\u0448?\"\n            }\n            ListElement{\n                avatar: \"qrc:/src/examples/images/spengler.jpg\"\n                title:\"Vasya Nikorich\"\n                detail: \"C\u0435\u043a\u0441 \u0431\u0443\u0448?\"\n            }\n            ListElement{\n                avatar: \"qrc:/src/examples/images/stantz.jpg\"\n                title:\"Jester Sunborn\"\n                detail: \"C\u0435\u043a\u0441 \u0431\u0443\u0448?\"\n            }\n        }\n}\n</code></pre>\n\n<p>And my <strong>main.py:</strong></p>\n\n<pre><code>class Vamblr(QQuickView):\n    def __init__(self, parent=None):\n        super().__init__(parent)\n\n        self.setSource(QUrl('messages.qml'))\n\n        messages_list = self.rootObject().findChild(QObject, 'messages_list')\n</code></pre>\n\n<p>How can i use Pyqt5 to insert new ListElement?</p>\n"}, {"tags": ["python", "string", "replace", "io"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1479330873, "post_id": 40642402, "comment_id": 68516931, "body": "<code>file</code> is a file, not a string. Given that you named it <code>file</code>, it&#39;s not clear why this appears unexpected!"}, {"owner": {"reputation": 1313, "user_id": 2128362, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5cafa422780635664d84e3f0bba392cf?s=128&d=identicon&r=PG", "display_name": "jackarms", "link": "https://stackoverflow.com/users/2128362/jackarms"}, "edited": false, "score": 1, "creation_date": 1479330952, "post_id": 40642402, "comment_id": 68516965, "body": "Several issues, &quot;A1&quot; is not defined, and you&#39;re trying to do a string replace on a file object. Not sure how you&#39;re storing the data in your file, but you could read your file by lines/tokens, and replace the username at the desired line to the new username."}], "answers": [{"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1479330986, "post_id": 40642460, "comment_id": 68516976, "body": "Once you successfully call <code>replace()</code>, you&#39;ll still need to rewrite the file to contain the new contents."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1479331305, "post_id": 40642460, "comment_id": 68517142, "body": "@JohnGordon Very true, i elaborated some.  The OP would have encountered (and maybe tried to solve) that issue on his own, once the initial bug was gone :)"}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 2, "last_activity_date": 1479331097, "last_edit_date": 1479331097, "creation_date": 1479330927, "answer_id": 40642460, "question_id": 40642402, "link": "https://stackoverflow.com/questions/40642402/can-someone-help-me-with-this-python-replacing-string-in-txt-file/40642460#40642460", "title": "Can someone help me with this Python. Replacing string in txt file", "body": "<p><code>file</code> is a <code>file</code> object, not a string! If you want the contents of the file, do:</p>\n\n<pre><code>s = file.read()\n</code></pre>\n\n<p>which will give you its content as a string (which has a method <code>replace</code>).</p>\n\n<p>To write it back to the same file, you would have to open it again in writing mode:</p>\n\n<pre><code>file = open(\"Info.txt\", 'w')\nfile.write(s.replace(A1, C2))\nfile.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "is_accepted": false, "score": 0, "last_activity_date": 1479331096, "creation_date": 1479331096, "answer_id": 40642521, "question_id": 40642402, "link": "https://stackoverflow.com/questions/40642402/can-someone-help-me-with-this-python-replacing-string-in-txt-file/40642521#40642521", "title": "Can someone help me with this Python. Replacing string in txt file", "body": "<p><code>file</code> should be replaced for a string.</p>\n\n<pre><code>variable = file.read()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3144, "user_id": 102022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pO8em.jpg?s=128&g=1", "display_name": "eric.christensen", "link": "https://stackoverflow.com/users/102022/eric-christensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479331482, "creation_date": 1479331482, "answer_id": 40642611, "question_id": 40642402, "link": "https://stackoverflow.com/questions/40642402/can-someone-help-me-with-this-python-replacing-string-in-txt-file/40642611#40642611", "title": "Can someone help me with this Python. Replacing string in txt file", "body": "<p>You are trying call <code>replace</code> on a <code>file</code> object. You are getting that error because the file object has no attribute named <code>replace</code>.</p>\n\n<p>If you read the contents of the file into a string, you can replace the values and rewrite the file.</p>\n\n<pre><code>print(\"What would you like your username to be changed to?\")\n\nC2 = input()\n\ncontents = \"\"\nwith open(\"Info.txt\", 'r') as blah:\n    contents = blah.read()\n\nwith open(\"Info.txt\", 'w') as blah:\n    blah.write(contents.replace(A1, C2))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7169747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58004d83b31e1e827254c13093859d96?s=128&d=identicon&r=PG&f=1", "display_name": "Joelt0105", "link": "https://stackoverflow.com/users/7169747/joelt0105"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "closed_date": 1479337693, "answer_count": 3, "score": -2, "last_activity_date": 1479332000, "creation_date": 1479330709, "last_edit_date": 1479332000, "question_id": 40642402, "link": "https://stackoverflow.com/questions/40642402/can-someone-help-me-with-this-python-replacing-string-in-txt-file", "closed_reason": "Not suitable for this site", "title": "Can someone help me with this Python. Replacing string in txt file", "body": "<p>I'm quite new to python and I'm trying to create a Login system where you are able to change your username. I have been through multiple forums but cannot find anything that works. Can you please tell me what is going wrong with  the code. The error that it comes up with is this: AttributeError: '_io.TextIOWrapper' object has no attribute 'replace'. If that helps. The following is the code: </p>\n\n<pre><code>print(\"What would you like your username to be changed to?\")\nC2 = input()\nfile = open(\"Info.txt\", 'r+')\nfile.write(file.replace(A1, C2))\n</code></pre>\n"}, {"tags": ["python", "regex", "street-address"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1479332827, "post_id": 40642376, "comment_id": 68517909, "body": "See <a href=\"https://regex101.com/r/Am033H/1\" rel=\"nofollow noreferrer\">regex101.com/r/Am033H/1</a> and <a href=\"http://ideone.com/UNgnAy\" rel=\"nofollow noreferrer\">ideone.com/UNgnAy</a>."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4221094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20afee8e234b7478871847a16f3e99a0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Garland", "link": "https://stackoverflow.com/users/4221094/stephan-garland"}, "edited": false, "score": 0, "creation_date": 1479391198, "post_id": 40643138, "comment_id": 68544763, "body": "Wonderful! I&#39;m still trying to get groups down; re.sub is quite powerful.  I also tried this out on non-conforming addresses to make sure it didn&#39;t mess them up, and it worked fine."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 145, "user_id": 4221094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20afee8e234b7478871847a16f3e99a0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Garland", "link": "https://stackoverflow.com/users/4221094/stephan-garland"}, "edited": false, "score": 0, "creation_date": 1479391272, "post_id": 40643138, "comment_id": 68544815, "body": "Glad it worked for you. Please also consider upvoting if my answer proved helpful to you (see <a href=\"http://meta.stackexchange.com/questions/173399/how-to-upvote-on-stack-overflow\">How to upvote on Stack Overflow?</a>)."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 145, "user_id": 4221094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20afee8e234b7478871847a16f3e99a0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Garland", "link": "https://stackoverflow.com/users/4221094/stephan-garland"}, "edited": false, "score": 0, "creation_date": 1479391293, "post_id": 40643138, "comment_id": 68544832, "body": "Let me know what &quot;get groups down&quot; mean, do you mean you need to also return a list of the groups? It can easily be done with a callback inside <code>re.sub</code>."}, {"owner": {"reputation": 145, "user_id": 4221094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20afee8e234b7478871847a16f3e99a0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Garland", "link": "https://stackoverflow.com/users/4221094/stephan-garland"}, "edited": false, "score": 0, "creation_date": 1479410231, "post_id": 40643138, "comment_id": 68557511, "body": "No, I meant just gaining proficiency at splitting out a string into groups and using them. I&#39;ve figured out the rest of what I needed to do. Again, many thanks."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1479333577, "creation_date": 1479333577, "answer_id": 40643138, "question_id": 40642376, "link": "https://stackoverflow.com/questions/40642376/use-regex-and-python-to-move-city-in-address-block-add-ampersand/40643138#40643138", "title": "Use regex and python to move city in address block, add ampersand", "body": "<p>You may use</p>\n\n<pre><code>rx = re.compile(r\"(Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St)\\s+(\\S+)\\s*(.*)\", re.I)\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/Am033H/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p>The addition is <code>\\s+(\\S+)\\s*(.*)</code>: 1+ whitespaces, 1+ non-whitespaces (<code>(\\S+)</code>, Group 2), 0+ whitespaces (<code>\\s*</code>) and any 0+ chars other than line break chars (<code>.*</code>, Group 3).</p>\n\n<p><a href=\"http://ideone.com/UNgnAy\" rel=\"nofollow noreferrer\">Python demo</a>:</p>\n\n<pre><code>import re\nrx = re.compile(r\"(Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St)\\s+(\\S+)\\s*(.*)\", re.I)\ns = \"N MONON AVE FRANCESVILLE W YELLOW ST\"\nresult = re.sub(rx, r'\\1 &amp; \\3 \\2', s)\nprint(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3144, "user_id": 102022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pO8em.jpg?s=128&g=1", "display_name": "eric.christensen", "link": "https://stackoverflow.com/users/102022/eric-christensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1479334211, "creation_date": 1479334211, "answer_id": 40643272, "question_id": 40642376, "link": "https://stackoverflow.com/questions/40642376/use-regex-and-python-to-move-city-in-address-block-add-ampersand/40643272#40643272", "title": "Use regex and python to move city in address block, add ampersand", "body": "<pre><code>import re\ns = \"N MONON AVE FRANCESVILLE W YELLOW ST\"\nregex = r\"(.*) (Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St) ([A-Za-z]*) (.*)\"\nresult = re.sub(regex, r\"\\1 \\2 &amp; \\4 \\3\", s, flags=re.I)\nprint(result)\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 4221094, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20afee8e234b7478871847a16f3e99a0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Garland", "link": "https://stackoverflow.com/users/4221094/stephan-garland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 40643138, "answer_count": 2, "score": 3, "last_activity_date": 1479334211, "creation_date": 1479330619, "question_id": 40642376, "link": "https://stackoverflow.com/questions/40642376/use-regex-and-python-to-move-city-in-address-block-add-ampersand", "title": "Use regex and python to move city in address block, add ampersand", "body": "<p>I have spreadsheets with poorly-formed addresses in them, and I need them to be reasonably good to use for geocoding. I've tried some of the Python libraries for parsing addresses, but they aren't able to figure out some of them. As an example,</p>\n\n<p>\"N MONON AVE FRANCESVILLE W YELLOW ST\"</p>\n\n<p>The state for all of them is Indiana, which I have no problem concatenating into the submitted string. In the above example, it is an intersection, which the geocoder does accept as:</p>\n\n<p>\"N MONON AVE &amp; W YELLOW ST FRANCESVILLE\"</p>\n\n<p>My thinking is that the easiest way is to find the first word after a street type (Ave, Dr, Ct, etc.), move it to the end, and add an ampersand in its place. </p>\n\n<p>I have this code, which is probably horribly inefficient, but it does capture only the first street type; in the above example, it will output AVE.</p>\n\n<pre><code>/(Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St)[^(Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St)]/i\n</code></pre>\n\n<p>What I'm not sure how to do is tell it to grab whatever word is immediately after the first instance of a street type. From there, I should be able to use re.search and .group[n] to extract the city, and throw into the parsed string.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 2, "creation_date": 1479330704, "post_id": 40642340, "comment_id": 68516858, "body": "Do you really have those lines in your file? Get rid of everything except the <code>print &#39;hello&#39;</code>"}, {"owner": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1479330989, "post_id": 40642340, "comment_id": 68516981, "body": "yes I just have one line"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1479331095, "post_id": 40642340, "comment_id": 68517031, "body": "So what is your command you use to start the py-file?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479331142, "post_id": 40642340, "comment_id": 68517050, "body": "how do you run this script? maybe system think you run script in different language and you get error."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479331250, "post_id": 40642340, "comment_id": 68517113, "body": "put in file only <code>print &quot;hello&quot;</code> without <code>Python 2.7.12 ... &gt;&gt;&gt;</code> because it is not Python code but text displayed by Python Shell only for information."}, {"owner": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "edited": false, "score": 0, "creation_date": 1479331295, "post_id": 40642340, "comment_id": 68517135, "body": "1 .    right click-&gt; edit with IDLE-&gt; press (F5)"}, {"owner": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "edited": false, "score": 0, "creation_date": 1479331698, "post_id": 40642340, "comment_id": 68517356, "body": "Is there any other way to run the .py file which I save by IDLE?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479331834, "post_id": 40642340, "comment_id": 68517424, "body": "you can&#39;t run code with <code>Python 2.7.12 ... &gt;&gt;&gt; </code> (and <code>&gt;&gt;&gt;</code>) in any way. Python Shell (in IDLE) is only for testing single line. You have Editor in IDLE to create longer script and save it in file and run in Shell in IDLE or with command <code>python script.py</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 3, "creation_date": 1479332761, "post_id": 40642340, "comment_id": 68517878, "body": "Don&#39;t include input, output and code as a screenshot! Ever. The least you can do to help others who are willing to donate their free time is to write the question as clearly as it is now (thanks to @Wayne Werner)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "edited": false, "score": 0, "creation_date": 1479331818, "post_id": 40642596, "comment_id": 68517416, "body": "Is there any other way to run the .py file which I save by IDLE?  sry i am a novice."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "edited": false, "score": 0, "creation_date": 1479331930, "post_id": 40642596, "comment_id": 68517470, "body": "IDLE has two elements - &quot;Shell&quot; to test single lines of code and &quot;Editor&quot;  to create longer script, save it in file and run in IDLE or with command <code>python script.py</code>"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1479331424, "creation_date": 1479331424, "answer_id": 40642596, "question_id": 40642340, "link": "https://stackoverflow.com/questions/40642340/when-i-run-my-py-files-it-gave-me-an-invalid-syntax-error/40642596#40642596", "title": "When I Run my .py files, It gave me an invalid syntax error", "body": "<p>Put in file only </p>\n\n<pre><code>print \"hello\" \n</code></pre>\n\n<p>without </p>\n\n<pre><code>Python 2.7.12 ... \n&gt;&gt;&gt; \n</code></pre>\n\n<p>because <code>Python ... &gt;&gt;&gt;</code> is not Python code but text displayed by Python Shell only for your information</p>\n"}], "owner": {"reputation": 11, "user_id": 7169669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a105de41690f924cb3a1bbf2960e7553?s=128&d=identicon&r=PG&f=1", "display_name": "Qiushi Nian", "link": "https://stackoverflow.com/users/7169669/qiushi-nian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1479332347, "creation_date": 1479330475, "last_edit_date": 1479332347, "question_id": 40642340, "link": "https://stackoverflow.com/questions/40642340/when-i-run-my-py-files-it-gave-me-an-invalid-syntax-error", "title": "When I Run my .py files, It gave me an invalid syntax error", "body": "<p>I use the python 2.7.12. My .py file contains the following:</p>\n\n<pre><code>Python 2.7.10 (default, Oct 23 2015, 19:19:21) \n[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; print \"hello\"\n</code></pre>\n\n<p>When I try to run the file I get the following error:</p>\n\n<pre><code>  File \"/private/tmp/fun.py\", line 1\n    Python 2.7.10 (default, Oct 23 2015, 19:19:21) \n             ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I just use the <code>print \"hello\"</code>, so I don't think it's a code problem\nWho can tell me what's wrong?</p>\n"}, {"tags": ["python", "pandas", "memory"], "comments": [{"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479332539, "post_id": 40642294, "comment_id": 68517764, "body": "Are you able to form the groups successfully? As is, if you run <code>grouped = df.groupby(&#39;KEY&#39;)</code> does it complete without throwing memory error? If yes, then you can simply compute max on a subset of groups, and store the result on disk, appending to the file as you move along the groups. The issue seems to be insufficient memory to store both the df and the max results together."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479332700, "post_id": 40642294, "comment_id": 68517836, "body": "You also say that your <code>df</code> is likely to grow. How are you creating the <code>df</code>? Are you reading a set of csv files, scraping from the web, or querying from a database? If it is csv or database, you can chunk your <code>df</code> such that you will only have manageable size chunks in memory at any given time. I don&#39;t use web services, so I don&#39;t know how that would work. Well, if you are reading from a database, perform the groupby in the database itself!"}, {"owner": {"reputation": 1577, "user_id": 522477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E9g68.jpg?s=128&g=1", "display_name": "Savage Henry", "link": "https://stackoverflow.com/users/522477/savage-henry"}, "reply_to_user": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1479389729, "post_id": 40642294, "comment_id": 68543580, "body": "Added info above. Hope it helps to clarify. Thanks!"}], "owner": {"reputation": 1577, "user_id": 522477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E9g68.jpg?s=128&g=1", "display_name": "Savage Henry", "link": "https://stackoverflow.com/users/522477/savage-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479390305, "creation_date": 1479330303, "last_edit_date": 1479390305, "question_id": 40642294, "link": "https://stackoverflow.com/questions/40642294/how-can-i-efficiently-run-groupby-over-subsets-of-a-dataframe-to-avoid-memorye", "title": "How can I efficiently run groupby() over subsets of a dataframe to avoid MemoryError", "body": "<p>I have a decent sized dataframe (roughly: <code>df.shape = (4000000, 2000)</code>) that I want to use <code>.groupby().max()</code> on. Unfortunately, neither my laptop nor the server I have access to can do this without throwing a MemoryError (The laptop has 16G of RAM, the server has 64.) This is likely due to the datatypes in a lot of the columns. Right now, I'm considering those are fixed and immutable (many, many dates, large integers, etc), though perhaps that could be part of the solution.</p>\n\n<p>The command I would like is simply <code>new_df = df.groupby('KEY').max()</code>. </p>\n\n<p>What is the most efficient way to break down this problem to prevent running into memory problems? Some things I've tried, to varying success: </p>\n\n<ol>\n<li><p>Break the <code>df</code> into subsets and run <code>.groupby().max</code> on those subsets, then concatenating. Issue: the size of the full <code>df</code> can vary, and is likely to grow. I'm not sure the best way to break the <code>df</code> apart so that the subsets are definitely not going to throw the MemoryError. </p></li>\n<li><p>Include a subset set of columns on which to run the <code>.groupby()</code> in a new <code>df</code>, then merge this with the original. Issue: the number of columns in this subset can vary (much smaller or larger than current), though the names of the columns all include the prefix <code>ind_</code>. </p></li>\n<li>Look for out-of-memory management tools. As of yet, I've not found anything useful. </li>\n</ol>\n\n<p>Thanks for any insight or help you can provide. </p>\n\n<p><strong>EDIT TO ADD INFO</strong></p>\n\n<p>The data is for a predictive modeling exercise, and the number of columns stems from making binary variables from a column of discrete (non-continuous/categorical) values. The <code>df</code> will grow in column size if another column of values goes through the same process. Also, data is originally pulled from a SQL query; the set of items the query finds is likely to grow over time, meaning both the number of rows will grow, and (since the number of distinct values in one or more columns may grow, so will the number of columns after making binary indicator variables). The data pulled goes through extensive transformation, and gets merged with other datasets, making it implausible to run the grouping in the database itself.</p>\n\n<p>There are repeated observations by <code>KEY</code>, which have the the same value except for the column I turn into indicators (this is just to show shape/value samples: actual df has dates, integers 16 digits or longer, etc):</p>\n\n<pre><code>KEY    Col1  Col2   Col3\n A      1    blue   car\n A      1    blue   bike\n A      1    blue   train\n B      2    green  car\n B      2    green  plane\n B      2    green  bike \n</code></pre>\n\n<p>This should become, with dummied Col3: </p>\n\n<pre><code>KEY    Col1  Col2   ind_car ind_bike ind_train ind_plane\n A      1    blue      1        1        1         0\n B      2    green     1        1        0         1   \n</code></pre>\n\n<p>So the <code>.groupby('KEY')</code> gets me the groups, and the .max() gets the new indicator columns with the right values. I know the `.max()' process might be bogged down by getting a \"max\" for a string or date column.  </p>\n"}, {"tags": ["python", "command-line-arguments"], "answers": [{"tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": false, "score": 1, "last_activity_date": 1479331341, "last_edit_date": 1479331341, "creation_date": 1479330957, "answer_id": 40642467, "question_id": 40642263, "link": "https://stackoverflow.com/questions/40642263/error-while-installing-package-developed-with-cliff/40642467#40642467", "title": "Error while installing package developed with cliff", "body": "<p>It looks like your server may have a (much) older version of the <code>setuptools</code> package installed (which provides the <code>pkg_resources</code> module).  The <code>evaluate_marker</code> method looks as if it first showed up at the end of 2014, so if you're using an older system it is possible that method is not available.</p>\n\n<p>Depending on your environment, you may be able to simply <code>pip install -U setuptools</code>, or you may need to see if your distribution has a newer isntallable package available.</p>\n\n<p>If you can update your question to include details about your server's operating environment (what distribution and version are you running? What version of Python? What version of <code>setuptools</code>?), we can probably provide a more complete answer.</p>\n\n<p><strong>Update</strong></p>\n\n<p>For example, Ubuntu 12.04 only has setuptools 0.6, and the <code>pkg_resources</code> module (which is packaged in the <code>python-pkg-resources</code> package) does not have the <code>evaluate_marker</code> method:</p>\n\n<pre><code># python\nPython 2.7.3 (default, Jun 22 2015, 19:33:41) \n[GCC 4.6.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import pkg_resources\n&gt;&gt;&gt; pkg_resources.evaluate_marker\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'module' object has no attribute 'evaluate_marker'\n</code></pre>\n\n<p>In this environment, I can install <code>pip</code>:</p>\n\n<pre><code># apt-get install python-pip\n</code></pre>\n\n<p>And then upgrade the installed version of <code>setuptools</code>:</p>\n\n<pre><code># pip install -U setuptools\n</code></pre>\n\n<p>And now:</p>\n\n<pre><code># python\nPython 2.7.3 (default, Jun 22 2015, 19:33:41) \n[GCC 4.6.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import pkg_resources\n&gt;&gt;&gt; pkg_resources.evaluate_marker\n&lt;function evaluate_marker at 0x1535050&gt;\n&gt;&gt;&gt; \n</code></pre>\n\n<p><strong>NB</strong> Upgrading distribution packages (e.g., things installed by <code>apt-get</code> in this example) using <code>pip</code> can often lead to sadness and heartache, and you are much better off if you are able to upgrade the underlying environment to one where such workarounds are not necessary.  Alternatively, running your code from a Python virtual environment (so that your upgraded packages do not override system packages) is also a technically better solution.</p>\n"}], "owner": {"reputation": 81, "user_id": 4638930, "user_type": "registered", "profile_image": "https://graph.facebook.com/1836873039/picture?type=large", "display_name": "DiHeng Zhang", "link": "https://stackoverflow.com/users/4638930/diheng-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479332408, "creation_date": 1479330197, "last_edit_date": 1479332408, "question_id": 40642263, "link": "https://stackoverflow.com/questions/40642263/error-while-installing-package-developed-with-cliff", "title": "Error while installing package developed with cliff", "body": "<p>I wrote a command line tool with cliff 2.3.0, tested on my laptop (Mac, Python 2.7.12). When I was tried to install it (<code>python setup.py install</code>) on a server (Linux, Python 2.7.2), I encountered this error:</p>\n\n<pre><code>Installed /private/tmp/easy_install-EGMO15/cliff-2.3.0/pbr-1.10.0-py2.7.egg\n\nERROR:root:Error parsing\n\nTraceback (most recent call last):   File \"/private/tmp/easy_install-EGMO15/cliff-2.3.0/pbr-1.10.0-&gt; py2.7.egg/pbr/core.py\", line 111, in pbr\n    attrs = util.cfg_to_args(path, dist.script_args)   File \"/private/tmp/easy_install-EGMO15/cliff-2.3.0/pbr-1.10.0-py2.7.egg/pbr/util.py\", line 248, in cfg_to_args\n    kwargs = setup_cfg_to_setup_kwargs(config, script_args)   File \"/private/tmp/easy_install-EGMO15/cliff-2.3.0/pbr-1.10.0-py2.7.egg/pbr/util.py\", line 431, in setup_cfg_to_setup_kwargs\n    if pkg_resources.evaluate_marker('(%s)' % env_marker):\n\nAttributeError: 'module' object has no attribute 'evaluate_marker' error: Setup script exited with error in setup command: Error parsing /private/tmp/easy_install-EGMO15/cliff-2.3.0/setup.cfg: AttributeError: 'module' object has no attribute 'evaluate_marker'\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["python", "arrays", "numpy", "vector", "filter"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479331621, "post_id": 40642253, "comment_id": 68517313, "body": "Could you add a sample case?"}, {"owner": {"reputation": 339, "user_id": 3120870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f2f1ecdbdb687bfe16f334c879b98942?s=128&d=identicon&r=PG&f=1", "display_name": "Corey J. Nolet", "link": "https://stackoverflow.com/users/3120870/corey-j-nolet"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479331951, "post_id": 40642253, "comment_id": 68517479, "body": "I want to filter out each element where is_true(element) == False efficiently."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479332026, "post_id": 40642253, "comment_id": 68517525, "body": "And <code>is_true</code> is some custom function?"}, {"owner": {"reputation": 339, "user_id": 3120870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f2f1ecdbdb687bfe16f334c879b98942?s=128&d=identicon&r=PG&f=1", "display_name": "Corey J. Nolet", "link": "https://stackoverflow.com/users/3120870/corey-j-nolet"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479332124, "post_id": 40642253, "comment_id": 68517579, "body": "Correct. I am implementing a non-maximal suppression but the difference between my use case and others that I&#39;ve seen on stack overflow is that I need the overlap to be between both bounding boxes.  In other words- implementations i see on stackoverflow only take one side into account. I care about the actual intersection between the two bounding boxes, not just whether one is bigger and swallows the other by more than some ratio."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479332262, "post_id": 40642253, "comment_id": 68517645, "body": "I see, so for true vectorization that is meant for performance, we would need to vectorize that func implementation itself."}, {"owner": {"reputation": 339, "user_id": 3120870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f2f1ecdbdb687bfe16f334c879b98942?s=128&d=identicon&r=PG&f=1", "display_name": "Corey J. Nolet", "link": "https://stackoverflow.com/users/3120870/corey-j-nolet"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479332331, "post_id": 40642253, "comment_id": 68517681, "body": "I&#39;ve tried that out as well:  <code>code</code> f = np.vectorize(myfunc) f(arr) <code>code</code>  The problem I&#39;m running into now is that my array has a shape of (x,4) where 4 are the coordinates of the bounding box. The function seems to be getting run over over single coordinate separately and I don&#39;t see a way to specify the axis anywhere."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1479332704, "post_id": 40642253, "comment_id": 68517838, "body": "<code>np.vectorize</code> isn&#39;t true vectorization and isn&#39;t meant for performance. See if you can use ufuncs and since you are talking about overlaps, <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.strides.html\" rel=\"nofollow noreferrer\"><code>numpy strides</code></a> could help too if you decide to vectorize the func itself so that it works on larger chunks of data if not entire data."}], "owner": {"reputation": 339, "user_id": 3120870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f2f1ecdbdb687bfe16f334c879b98942?s=128&d=identicon&r=PG&f=1", "display_name": "Corey J. Nolet", "link": "https://stackoverflow.com/users/3120870/corey-j-nolet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479330414, "creation_date": 1479330170, "last_edit_date": 1479330414, "question_id": 40642253, "link": "https://stackoverflow.com/questions/40642253/selecting-rows-from-2d-numpy-array-given-a-condition-from-a-function", "title": "Selecting rows from 2d numpy array given a condition from a function", "body": "<p>I see a lot of examples using <code>np.where()</code> that work well when given the following:</p>\n\n<pre><code>x = np.array([...])\nw = np.where(x &gt; 5)\n</code></pre>\n\n<p>What if I need to filter the elements based on a function, like this?</p>\n\n<pre><code>a = [..]\nb = filter(lambda x: is_true(x), a)\n</code></pre>\n\n<p>I would like to be able to do this filter function directly in numpy, but i can't seem to figure out a way to do it.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479330047, "post_id": 40642201, "comment_id": 68516505, "body": "<code>guessed_letters.append(letter)</code>"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479330076, "post_id": 40642201, "comment_id": 68516529, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/252703/append-vs-extend\">append vs. extend</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1479330645, "post_id": 40642201, "comment_id": 68516828, "body": "@PeterWood You&#39;d have to sort both sides before comparing."}, {"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1479330722, "post_id": 40642201, "comment_id": 68516866, "body": "How would I convert the list to be in the order that the word is? So how would I make this list [&#39;c&#39;, &#39;a&#39;, &#39;t&#39;]"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1479330778, "post_id": 40642400, "comment_id": 68516895, "body": "It used to be a different question, but I changed that. However since then it&#39;s still been going down. Not sure why, too. Thanks for the help tho. :)"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 2, "creation_date": 1479331116, "post_id": 40642400, "comment_id": 68517041, "body": "I did not personally downvote, but I believe others may have done so because you did not show that you attempted anything before asking the question."}, {"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1479331205, "post_id": 40642400, "comment_id": 68517091, "body": "+ Elliot Roberts Makes sense I guess."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1479331284, "post_id": 40642400, "comment_id": 68517131, "body": "People should really comment when they downvote, it&#39;s polite and helpful. Otherwise you&#39;re missing the point of stackexchange, helping (IMO)."}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 1, "creation_date": 1479331702, "post_id": 40642400, "comment_id": 68517358, "body": "@kabanus people also tend to downvote answers to lazy questions, to discourage users from answering them. I guess this is what happened here."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1480600860, "post_id": 40642400, "comment_id": 69037227, "body": "@HughChalmers if this answers your question you should mark it accepted with the check mark to the left <code>&lt;------</code>"}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": true, "score": 0, "last_activity_date": 1479330708, "creation_date": 1479330708, "answer_id": 40642400, "question_id": 40642201, "link": "https://stackoverflow.com/questions/40642201/check-if-letters-in-list-add-up-to-a-variable/40642400#40642400", "title": "Check if letters in list add up to a variable", "body": "<p>Not sure why your question is drawing so much bad attention. <code>permutations</code> are what you need:</p>\n\n<pre><code>from itertools import permutations\n\ndef is_perm(letters,word):\n    for p in permutations(letters):\n        if ''.join(p) == word: return True\n    return False\nletters = [\"a\", \"c\", \"t\"]\nword = 'cat'\nprint is_perm(letters,word)\n</code></pre>\n\n<p>Letters may of course be any list of strings, not just letters.</p>\n"}, {"tags": [], "owner": {"reputation": 863, "user_id": 7090605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/750e3faddd4e6efe01820a875b6e3b26?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Conway", "link": "https://stackoverflow.com/users/7090605/jake-conway"}, "is_accepted": false, "score": 0, "last_activity_date": 1479330884, "creation_date": 1479330884, "answer_id": 40642446, "question_id": 40642201, "link": "https://stackoverflow.com/questions/40642201/check-if-letters-in-list-add-up-to-a-variable/40642446#40642446", "title": "Check if letters in list add up to a variable", "body": "<p>This would do the job. It checks to see if all of the letters are in the word, and all of the word letters are in the list. </p>\n\n<pre><code>letters = ['c', 'a', 't']\nword = \"cat\"\n\ndef check_word(lst, word):\n    for letter in lst:\n        if letter not in word:\n            return False # \"this series does not work\"\n\n    for letter in list(word):\n        if letter not in lst:\n            return False # \"this series does not work\"\n\n\n    return True # \"this works\"\n\ncheck_word(letters, word) # returns True\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 40642400, "answer_count": 2, "score": -4, "last_activity_date": 1479330884, "creation_date": 1479329978, "last_edit_date": 1479330357, "question_id": 40642201, "link": "https://stackoverflow.com/questions/40642201/check-if-letters-in-list-add-up-to-a-variable", "title": "Check if letters in list add up to a variable", "body": "<p>Lets say I have a list <code>letters = [\"a\", \"c\", \"t\"]</code>, how would I check if those letters could make the word \"cat\"?</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 2939, "user_id": 4711754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c25453f6a114ebb66aefcc27b0ab44d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Allen", "link": "https://stackoverflow.com/users/4711754/andrew-allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1504847228, "creation_date": 1504847228, "answer_id": 46109011, "question_id": 40642152, "link": "https://stackoverflow.com/questions/40642152/set-matplotlib-backend-on-jupyter-for-plots-that-change-over-the-time/46109011#46109011", "title": "set matplotlib backend on jupyter for plots that change over the time", "body": "<p>This code at least get you an external window in which to do stuff.\nTaken from pythonspot.com. I'm sure there'll be a way to add movement etc. but I'm 8 hours past my bedtime zzzzz</p>\n\n<pre><code>import sys\n\nfrom PyQt5.QtWidgets import QApplication, QMainWindow, QMenu, QVBoxLayout, QSizePolicy, QMessageBox, QWidget, QPushButton\nfrom PyQt5.QtGui import QIcon\n\n\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nfrom matplotlib.figure import Figure\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nimport random\n\nclass App(QMainWindow):\n\n    def __init__(self):\n        super().__init__()\n        self.left = 10\n        self.top = 10\n        self.title = 'PyQt5 matplotlib example - pythonspot.com'\n        self.width = 640\n        self.height = 400\n        self.initUI()\n\n    def initUI(self):\n        self.setWindowTitle(self.title)\n        self.setGeometry(self.left, self.top, self.width, self.height)\n\n        m = PlotCanvas(self, width=5, height=4)\n        m.move(0,0)\n        self.show()\n\n\nclass PlotCanvas(FigureCanvas):\n\n    def __init__(self, parent=None, width=5, height=4, dpi=100):\n        fig = Figure(figsize=(width, height), dpi=dpi)\n        self.axes = fig.add_subplot(111)\n\n        FigureCanvas.__init__(self, fig)\n        self.setParent(parent)\n\n        FigureCanvas.setSizePolicy(self,\n                QSizePolicy.Expanding,\n                QSizePolicy.Expanding)\n        FigureCanvas.updateGeometry(self)\n        self.plot()\n\n\n    def plot(self):\n\n        x = np.arange(-3, 3, 0.01)\n        ax = self.figure.add_subplot(111)\n        ax.set_title('PyQt Matplotlib Example')\n        for j in range(1, 10):\n            y = np.sin(np.pi*x*j)/(np.pi*x*j)\n            line, = ax.plot(x, y, 'b')\n            self.draw()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    ex = App()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 4773, "user_id": 5013143, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10153282800975700/picture?type=large", "display_name": "Stefano Fedele", "link": "https://stackoverflow.com/users/5013143/stefano-fedele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1475, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1504847228, "creation_date": 1479329814, "question_id": 40642152, "link": "https://stackoverflow.com/questions/40642152/set-matplotlib-backend-on-jupyter-for-plots-that-change-over-the-time", "title": "set matplotlib backend on jupyter for plots that change over the time", "body": "<p>I would like to draw my plots out of the Jupyter notebook page. As I remember \"%matplotlib qt\" should be the right command to type at the beginning of the script </p>\n\n<pre><code>%matplotlib qt\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nx = np.arange(-3, 3, 0.01)\ny = np.sin(np.pi*x)/(np.pi*x)\nplt.figure() \nplt.plot(x, y)\nplt.show()\n</code></pre>\n\n<p>But it doesn't work as I get an inline plot and the following warning</p>\n\n<pre><code>Warning: Cannot change to a different GUI toolkit: qt. Using notebook instead.\n</code></pre>\n\n<p>Could you help me understanding what's wrong with my jupyter?</p>\n\n<p>The reason for which I would like to plot outside the browser is that it looks the only way to have a plot that changes over the time on Jupyter, in fact I can easily do this job on spyder with the following code</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nx = np.arange(-3, 3, 0.01)\nfig = plt.figure()\nax = fig.add_subplot(111)\nfor j in range(1, 10):\n    y = np.sin(np.pi*x*j)/(np.pi*x*j)\n    line, = ax.plot(x, y, 'b')\n    plt.pause(0.3)\n    plt.draw()\n    line.remove()\n</code></pre>\n\n<p>But at this stage this code doesn't properly work on Jupyter. Is there any alternative and interesting way to provide plots that change over the time on Jupyter?</p>\n"}, {"tags": ["python", "machine-learning", "statistics", "cross-validation", "data-science"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1479329912, "post_id": 40642132, "comment_id": 68516438, "body": "Did you look at <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.VotingClassifier.html\" rel=\"nofollow noreferrer\">VotingClassifier</a>?"}, {"owner": {"reputation": 999, "user_id": 2433565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb625af992913f59392324fbec7964e?s=128&d=identicon&r=PG", "display_name": "Hellboy", "link": "https://stackoverflow.com/users/2433565/hellboy"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1479333486, "post_id": 40642132, "comment_id": 68518230, "body": "No. I have looked at Adaboost and Random Forests."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 2433565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb625af992913f59392324fbec7964e?s=128&d=identicon&r=PG", "display_name": "Hellboy", "link": "https://stackoverflow.com/users/2433565/hellboy"}, "edited": false, "score": 0, "creation_date": 1479333454, "post_id": 40642637, "comment_id": 68518216, "body": "Is it fair to assign weights in linear combination according to the accuracy of the individual classifiers?"}, {"owner": {"reputation": 910, "user_id": 5538787, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/baedebd79b91d3d32b57163a706c86ce?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/5538787/rob"}, "reply_to_user": {"reputation": 999, "user_id": 2433565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb625af992913f59392324fbec7964e?s=128&d=identicon&r=PG", "display_name": "Hellboy", "link": "https://stackoverflow.com/users/2433565/hellboy"}, "edited": false, "score": 0, "creation_date": 1479333967, "post_id": 40642637, "comment_id": 68518481, "body": "You need the output of the classifiers befores deciding 0 or 1 (for example in a linear model output=x*w+b) and you can create a new model whose output is output=w1*output1+w2*output2+w3*output3+w4*output4+b. Then you choose W1,W2,W3,W4 and b using different data from the data used to train the individual models."}, {"owner": {"reputation": 229, "user_id": 12136050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NGFXYZIXyAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reHKIR32-CAMAz_IyMjND4XRMTU_w/photo.jpg?sz=128", "display_name": "mayaaa", "link": "https://stackoverflow.com/users/12136050/mayaaa"}, "edited": false, "score": 0, "creation_date": 1579600438, "post_id": 40642637, "comment_id": 105811147, "body": "can you tell me how to make this in python , i have six feature subset , for each of them i try multiple classifiers , reach to the most suitable algorithm for each one ... my question now how to combine them using ensemble classifier like bagging, adaboost, voting ,etc"}], "tags": [], "owner": {"reputation": 910, "user_id": 5538787, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/baedebd79b91d3d32b57163a706c86ce?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/5538787/rob"}, "is_accepted": true, "score": 1, "last_activity_date": 1479331576, "creation_date": 1479331576, "answer_id": 40642637, "question_id": 40642132, "link": "https://stackoverflow.com/questions/40642132/ensembles-in-python/40642637#40642637", "title": "Ensembles in Python", "body": "<p>You have different ways to create an ensemble using your weak classifiers:</p>\n\n<p>-Bagging: You can average the output of the 4 classifiers.</p>\n\n<p>-Stacking: Your final output could be a linear combination of the 4 individual outputs. You can use the output of your 4 models as the input of a another algorithm or you can directly use different weights by choose the ones with better accuracy.</p>\n"}], "owner": {"reputation": 999, "user_id": 2433565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb625af992913f59392324fbec7964e?s=128&d=identicon&r=PG", "display_name": "Hellboy", "link": "https://stackoverflow.com/users/2433565/hellboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 40642637, "answer_count": 1, "score": 1, "last_activity_date": 1606495931, "creation_date": 1479329760, "question_id": 40642132, "link": "https://stackoverflow.com/questions/40642132/ensembles-in-python", "title": "Ensembles in Python", "body": "<p>I have implemented 4 classifiers using scikit-learn in Python. But, the performance on all of them is not very good. I want to implement an ensemble of these classifiers. I looked up the ensembles on scikit-learn but it has Random Forests and Adaboost. How should I create an ensemble of my weak classifiers?</p>\n"}, {"tags": ["python", "django", "apache2"], "comments": [{"owner": {"reputation": 1401, "user_id": 939183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7069d42b4b6458dab926b580c69dcfac?s=128&d=identicon&r=PG", "display_name": "Jesuisme", "link": "https://stackoverflow.com/users/939183/jesuisme"}, "edited": false, "score": 0, "creation_date": 1479329762, "post_id": 40642074, "comment_id": 68516353, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11223597/django-wsgirequest-object-has-no-attribute-user-on-some-pages\">Django: WSGIRequest&#39; object has no attribute &#39;user&#39; on some pages?</a>"}, {"owner": {"reputation": 12706, "user_id": 3627387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7aebf92f21ecf6e2ce9bb25a113886?s=128&d=identicon&r=PG", "display_name": "Sardorbek Imomaliev", "link": "https://stackoverflow.com/users/3627387/sardorbek-imomaliev"}, "edited": false, "score": 0, "creation_date": 1479356752, "post_id": 40642074, "comment_id": 68524985, "body": "Did you alter wsgi.py? Are you using customized admin?"}, {"owner": {"reputation": 309, "user_id": 7162499, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/454b7f3ad4fb38b617c4c1e26b3ea0bd?s=128&d=identicon&r=PG&f=1", "display_name": "Mike IT", "link": "https://stackoverflow.com/users/7162499/mike-it"}, "reply_to_user": {"reputation": 12706, "user_id": 3627387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7aebf92f21ecf6e2ce9bb25a113886?s=128&d=identicon&r=PG", "display_name": "Sardorbek Imomaliev", "link": "https://stackoverflow.com/users/3627387/sardorbek-imomaliev"}, "edited": false, "score": 0, "creation_date": 1479370467, "post_id": 40642074, "comment_id": 68530801, "body": "@SardorbekImomaliev I don&#39;t think so ... I inherited the application but when I compare with a sample  django project I don&#39;t see much difference."}], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 1941390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7fcf9b6c55b5d5b04aecab7f7d7abe1?s=128&d=identicon&r=PG", "display_name": "user1941390", "link": "https://stackoverflow.com/users/1941390/user1941390"}, "is_accepted": true, "score": 1, "last_activity_date": 1479373571, "creation_date": 1479373571, "answer_id": 40650636, "question_id": 40642074, "link": "https://stackoverflow.com/questions/40642074/django-1-7-attributeerror-wsgirequest-object-has-no-attribute-user/40650636#40650636", "title": "Django 1.7 AttributeError: &#39;WSGIRequest&#39; object has no attribute &#39;user&#39;", "body": "<p>I had the same problem and I fixed by:</p>\n\n<p>1) changing MIDDLEWARE to MIDDLEWARE_CLASSES\n2) commenting out SecurityMiddleware</p>\n\n<p>like below:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = [\n    # 'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 7162499, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/454b7f3ad4fb38b617c4c1e26b3ea0bd?s=128&d=identicon&r=PG&f=1", "display_name": "Mike IT", "link": "https://stackoverflow.com/users/7162499/mike-it"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1405, "favorite_count": 0, "accepted_answer_id": 40650636, "answer_count": 1, "score": 1, "last_activity_date": 1479373571, "creation_date": 1479329525, "last_edit_date": 1479370338, "question_id": 40642074, "link": "https://stackoverflow.com/questions/40642074/django-1-7-attributeerror-wsgirequest-object-has-no-attribute-user", "title": "Django 1.7 AttributeError: &#39;WSGIRequest&#39; object has no attribute &#39;user&#39;", "body": "<p>I have read some similar posts but none helped me plus I was recommended to create a new question. </p>\n\n<p>I try to reach to admin page of an inherited web-site and I created a user for that matter but I reach to the admin page I get the below stack trace. I have also added the settings.py in case it helps.</p>\n\n<p>Any input is much appreciate it.</p>\n\n<p>M</p>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>import os\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/1.10/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = 'XXXXX'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\n# ALLOWED_HOSTS = ['0.0.0.0', 'localhost']\nALLOWED_HOSTS = ['192.168.1.36',  'localhost']\n\n\n# Application definition\n\nINSTALLED_APPS = [\n\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # 'south',\n    'CordeliaHanelBackend',\n    'tastypie',\n    'StudioHanel',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\n\nROOT_URLCONF = 'CordeliaHanelBackend.urls'\n\nPROJECT_ROOT = os.path.dirname(os.path.dirname(__file__))\nTEMPLATE_DIRS = (\n    '/var/www/CordeliaHanelBackend-master/StudioHanel/templates2',\n)\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        # 'DIRS': ['/var/www/CordeliaHanelBackend-master/StudioHanel/templates2'],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'CordeliaHanelBackend.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/1.10/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/1.10/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/1.10/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/1.10/howto/static-files/\n\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = (\n    # os.path.join(BASE_DIR, \"static\"),\n    # '/var/www/CordeliaHanelBackend-master/StudioHanel/templates2',\n    '/var/www/CordeliaHanelFrontend-master/www/dist/',\n        # '/var/www/CordeliaHanelFrontend-master/www/app',\n        # '/var/www/CordeliaHanelBackend-master/StudioHanel/static',\n    )\n\n# STATIC_ROOT = '/var/www/CordeliaHanelFrontend-master/www/app'\n\n\nSTATICFILES_FINDERS = [\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n]\n\n# DEFAULT_FILE_STORAGE = '/var/www/CordeliaHanelFrontend-master/www/app'\n\n\nSOUTH_DATABASE_ADAPTER = {\n'default': 'south.db.sqlite3'\n}\n</code></pre>\n\n<p><strong>Stack-trace / Error log</strong></p>\n\n<pre><code>[Wed Nov 16 20:50:07.826886 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644] Internal Server Error: /admin/\n[Wed Nov 16 20:50:07.826923 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644] Traceback (most recent call last):\n[Wed Nov 16 20:50:07.826927 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/core/handlers/base.py\", line 111, in get_response\n[Wed Nov 16 20:50:07.826930 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     response = wrapped_callback(request, *callback_args, **callback_kwargs)\n[Wed Nov 16 20:50:07.826932 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/contrib/admin/sites.py\", line 225, in wrapper\n[Wed Nov 16 20:50:07.826934 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     return self.admin_view(view, cacheable)(*args, **kwargs)\n[Wed Nov 16 20:50:07.826937 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/utils/decorators.py\", line 105, in _wrapped_view\n[Wed Nov 16 20:50:07.826939 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     response = view_func(request, *args, **kwargs)\n[Wed Nov 16 20:50:07.826941 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/views/decorators/cache.py\", line 52, in _wrapped_view_func\n[Wed Nov 16 20:50:07.826944 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     response = view_func(request, *args, **kwargs)\n[Wed Nov 16 20:50:07.826946 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/contrib/admin/sites.py\", line 193, in inner\n[Wed Nov 16 20:50:07.826948 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     if not self.has_permission(request):\n[Wed Nov 16 20:50:07.826951 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]   File \"/var/www/CordeliaHanelBackend-master/env/lib/python2.7/site-packages/django/contrib/admin/sites.py\", line 150, in has_permission\n[Wed Nov 16 20:50:07.826953 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644]     return request.user.is_active and request.user.is_staff\n[Wed Nov 16 20:50:07.826955 2016] [wsgi:error] [pid 30866:tid 139796884670208] [remote 127.0.0.1:59644] AttributeError: 'WSGIRequest' object has no attribute 'user'\n</code></pre>\n\n<p><strong>WSGI file</strong></p>\n\n<pre><code>import os\n\nmaster/env/lib/python2.7/site-packages/')\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"CordeliaHanelBackend.settings\")\n\nfrom django.core.wsgi import get_wsgi_application\napplication = get_wsgi_application()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot", "axis-labels"], "comments": [{"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1479336310, "post_id": 40642061, "comment_id": 68519473, "body": "It&#39;s not resolved because there aren&#39;t enough points in linspace. Try <code>x=np.linspace(-10*np.pi, 10*np.pi,1001)</code> where 1001 should be large enough that it looks smooth."}, {"owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "reply_to_user": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1479337096, "post_id": 40642061, "comment_id": 68519779, "body": "@EL_DON, yes, thanks, that did it!"}, {"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 1, "creation_date": 1544122402, "post_id": 40642061, "comment_id": 94174136, "body": "There is a better answer available now. I recommend changing the accepted answer to @ScottCentoni&#39;s answer."}, {"owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "reply_to_user": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1544613011, "post_id": 40642061, "comment_id": 94335938, "body": "@EL_DON thanks, done"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1564182047, "post_id": 40642061, "comment_id": 100959961, "body": "There is a solution in the <a href=\"https://matplotlib.org/3.1.0/gallery/units/radian_demo.html\" rel=\"nofollow noreferrer\">matplotlib docs</a>."}, {"owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "reply_to_user": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1564484551, "post_id": 40642061, "comment_id": 101038397, "body": "@Dan nice! That should be the preferred solution, then?"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1564489459, "post_id": 40642061, "comment_id": 101041201, "body": "@Zubo I think so. Although, I don&#39;t know they have it as a separate file though instead of incorporating the function into the package. Weird. Also, it&#39;s not so nice to be forced to use their <code>cos</code> implementation rather then numpy&#39;s..."}], "answers": [{"comments": [{"owner": {"reputation": 1368, "user_id": 754175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8a920134d6efbfb5af0eb35f1c903a9d?s=128&d=identicon&r=PG", "display_name": "scicalculator", "link": "https://stackoverflow.com/users/754175/scicalculator"}, "reply_to_user": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "edited": false, "score": 0, "creation_date": 1479331682, "post_id": 40642200, "comment_id": 68517344, "body": "@Zubo if this answers your question, you should accept it as the answer"}, {"owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "reply_to_user": {"reputation": 1368, "user_id": 754175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8a920134d6efbfb5af0eb35f1c903a9d?s=128&d=identicon&r=PG", "display_name": "scicalculator", "link": "https://stackoverflow.com/users/754175/scicalculator"}, "edited": false, "score": 0, "creation_date": 1479332392, "post_id": 40642200, "comment_id": 68517699, "body": "@scicalculator yeah it actually shows some errors at the moment, so I&#39;m looking into it"}, {"owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "edited": false, "score": 0, "creation_date": 1479332848, "post_id": 40642200, "comment_id": 68517918, "body": "Ok so I tried it with some slight modifications and there&#39;s some weird behaviour - I don&#39;t know where that&#39;s coming from. Posted it in the edit."}, {"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1479338042, "post_id": 40642200, "comment_id": 68520103, "body": "Does anyone have a way to do it where I don&#39;t have to divide x by pi first?"}, {"owner": {"reputation": 678, "user_id": 2327973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e899e756bc43920159099553885700ae?s=128&d=identicon&r=PG", "display_name": "Scott Centoni", "link": "https://stackoverflow.com/users/2327973/scott-centoni"}, "edited": false, "score": 0, "creation_date": 1543805677, "post_id": 40642200, "comment_id": 94037078, "body": "@EL_DON I found a way to do this without dividing x first, and wrote it up as another answer."}, {"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "reply_to_user": {"reputation": 678, "user_id": 2327973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e899e756bc43920159099553885700ae?s=128&d=identicon&r=PG", "display_name": "Scott Centoni", "link": "https://stackoverflow.com/users/2327973/scott-centoni"}, "edited": false, "score": 0, "creation_date": 1543899580, "post_id": 40642200, "comment_id": 94073902, "body": "@ScottCentoni Not dividing <code>x</code> first is definitely an advantage. The fractions are also nice. The only things better about my answer are that it&#39;s more compact and it doesn&#39;t have a while loop, which I&#39;m not sure is actually a problem. @Zubo you might want to change the accepted answer."}], "tags": [], "owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "is_accepted": false, "score": 17, "last_activity_date": 1479336381, "last_edit_date": 1495542749, "creation_date": 1479329975, "answer_id": 40642200, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/40642200#40642200", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<pre><code>f,ax=plt.subplots(1)\nx=linspace(0,3*pi,1001)\ny=sin(x)\nax.plot(x/pi,y)\nax.xaxis.set_major_formatter(FormatStrFormatter('%g $\\pi$'))\nax.xaxis.set_major_locator(matplotlib.ticker.MultipleLocator(base=1.0))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ibVoD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ibVoD.png\" alt=\"enter image description here\"></a></p>\n\n<p>I used info from these answers:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/19972993/6605826\">https://stackoverflow.com/a/19972993/6605826</a></li>\n<li><a href=\"https://stackoverflow.com/a/29188910/6605826\">https://stackoverflow.com/a/29188910/6605826</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1543899831, "post_id": 53586826, "comment_id": 94073957, "body": "Does the while loop cause trouble if the user accidentally plots out to some huge number? It&#39;s presumably calling the tick formatter more than once, and if the ticks are at like 1e16, 2e16, etc. or something because it was accidentally used on the wrong plot, could this choke up for a minute?"}, {"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 0, "creation_date": 1543900036, "post_id": 53586826, "comment_id": 94074021, "body": "No, it&#39;s fine. The major and minor locator have to be disabled to go out to large x (otherwise the exception will hit before you can get to the formatter, so you can go back and fix your code that tried to use this on a huge x range). Then the execution time is less than 100 ms on my laptop even out to 3e16. The last tick is at 95492965855137200 pi/3. :)"}, {"owner": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 1, "creation_date": 1544122345, "post_id": 53586826, "comment_id": 94174110, "body": "There is a limitation if you try to do small increments in the major ticks. That is, instead of <code>ax.xaxis.set_major_locator(plt.MultipleLocator(np.pi &#47; 4))</code>, change the 4 to 18 or something. Since <code>den = 12</code>, it will not format well. Maybe <code>den</code> could be changed to 60 to support more choices of tick increments. (I want this because I made a function that takes major and minor tick increments as arguments instead of setting to just pi/4 and pi/12)"}, {"owner": {"reputation": 678, "user_id": 2327973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e899e756bc43920159099553885700ae?s=128&d=identicon&r=PG", "display_name": "Scott Centoni", "link": "https://stackoverflow.com/users/2327973/scott-centoni"}, "reply_to_user": {"reputation": 1114, "user_id": 6605826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dQzs2.jpg?s=128&g=1", "display_name": "EL_DON", "link": "https://stackoverflow.com/users/6605826/el-don"}, "edited": false, "score": 2, "creation_date": 1544307323, "post_id": 53586826, "comment_id": 94231462, "body": "Yes, that was also bothering me, so I&#39;ve made it more general. Now you can choose the denominator you want, or pick something other than pi."}], "tags": [], "owner": {"reputation": 678, "user_id": 2327973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e899e756bc43920159099553885700ae?s=128&d=identicon&r=PG", "display_name": "Scott Centoni", "link": "https://stackoverflow.com/users/2327973/scott-centoni"}, "is_accepted": true, "score": 29, "last_activity_date": 1544307216, "last_edit_date": 1544307216, "creation_date": 1543805481, "answer_id": 53586826, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/53586826#53586826", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<p>This is inspired by <a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/04.10-customizing-ticks.html\" rel=\"noreferrer\">Python Data Science Handbook</a>, although Sage attempts to do <a href=\"https://trac.sagemath.org/ticket/1431\" rel=\"noreferrer\">without explicit parameters</a>.</p>\n\n<p>EDIT: I've generalized this to allow you to supply as optional parameters the denominator, the value of the unit, and the LaTeX label for the unit. A class definition is included if you find that helpful.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef multiple_formatter(denominator=2, number=np.pi, latex='\\pi'):\n    def gcd(a, b):\n        while b:\n            a, b = b, a%b\n        return a\n    def _multiple_formatter(x, pos):\n        den = denominator\n        num = np.int(np.rint(den*x/number))\n        com = gcd(num,den)\n        (num,den) = (int(num/com),int(den/com))\n        if den==1:\n            if num==0:\n                return r'$0$'\n            if num==1:\n                return r'$%s$'%latex\n            elif num==-1:\n                return r'$-%s$'%latex\n            else:\n                return r'$%s%s$'%(num,latex)\n        else:\n            if num==1:\n                return r'$\\frac{%s}{%s}$'%(latex,den)\n            elif num==-1:\n                return r'$\\frac{-%s}{%s}$'%(latex,den)\n            else:\n                return r'$\\frac{%s%s}{%s}$'%(num,latex,den)\n    return _multiple_formatter\n\u200b\nclass Multiple:\n    def __init__(self, denominator=2, number=np.pi, latex='\\pi'):\n        self.denominator = denominator\n        self.number = number\n        self.latex = latex\n\u200b\n    def locator(self):\n        return plt.MultipleLocator(self.number / self.denominator)\n\u200b\n    def formatter(self):\n        return plt.FuncFormatter(multiple_formatter(self.denominator, self.number, self.latex))\n</code></pre>\n\n<p>This can be used very simply, without any parameters:</p>\n\n<pre><code>x = np.linspace(-np.pi, 3*np.pi,500)\nplt.plot(x, np.cos(x))\nplt.title(r'Multiples of $\\pi$')\nax = plt.gca()\nax.grid(True)\nax.set_aspect(1.0)\nax.axhline(0, color='black', lw=2)\nax.axvline(0, color='black', lw=2)\nax.xaxis.set_major_locator(plt.MultipleLocator(np.pi / 2))\nax.xaxis.set_minor_locator(plt.MultipleLocator(np.pi / 12))\nax.xaxis.set_major_formatter(plt.FuncFormatter(multiple_formatter()))\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iln8c.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iln8c.png\" alt=\"plot of cos(x)\"></a></p>\n\n<p>Or it can be used in a more sophisticated way:</p>\n\n<pre><code>tau = np.pi*2\nden = 60\nmajor = Multiple(den, tau, r'\\tau')\nminor = Multiple(den*4, tau, r'\\tau')\nx = np.linspace(-tau/60, tau*8/60,500)\nplt.plot(x, np.exp(-x)*np.cos(60*x))\nplt.title(r'Multiples of $\\tau$')\nax = plt.gca()\nax.grid(True)\nax.axhline(0, color='black', lw=2)\nax.axvline(0, color='black', lw=2)\nax.xaxis.set_major_locator(major.locator())\nax.xaxis.set_minor_locator(minor.locator())\nax.xaxis.set_major_formatter(major.formatter())\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Smvs6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Smvs6.png\" alt=\"plot of exp(-x)*cos(60*x)\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "is_accepted": false, "score": 4, "last_activity_date": 1554355135, "creation_date": 1554355135, "answer_id": 55508377, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/55508377#55508377", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<p>If you want to avoid dividing x by pi in the plot command, <a href=\"https://stackoverflow.com/a/40642200/2454357\">this answer</a> can be adjusted slightly using a <a href=\"https://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FuncFormatter\" rel=\"noreferrer\">FuncFormatter</a> instead of a FormatStrFormatter:</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\nfrom matplotlib.ticker import FuncFormatter, MultipleLocator\n\nfig,ax = plt.subplots()\n\nx = np.linspace(-5*np.pi,5*np.pi,100)\ny = np.sin(x)/x\nax.plot(x,y)\n#ax.xaxis.set_major_formatter(FormatStrFormatter('%g $\\pi$'))\nax.xaxis.set_major_formatter(FuncFormatter(\n   lambda val,pos: '{:.0g}$\\pi$'.format(val/np.pi) if val !=0 else '0'\n))\nax.xaxis.set_major_locator(MultipleLocator(base=np.pi))\n\nplt.show()\n</code></pre>\n\n<p>gives the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7n1fQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7n1fQ.png\" alt=\"result of the above code\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 6933377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c0cc7fefb41c02257eb891f0a3411e?s=128&d=identicon&r=PG&f=1", "display_name": "Kolibril", "link": "https://stackoverflow.com/users/6933377/kolibril"}, "is_accepted": false, "score": 0, "last_activity_date": 1578836765, "creation_date": 1578836765, "answer_id": 59704432, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/59704432#59704432", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\nx=np.linspace(0,3*np.pi,1001)\nplt.ylim(-3,3)\nplt.xlim(0, 4*np.pi)\nplt.plot(x, np.sin(x))\ntick_pos= [0, np.pi , 2*np.pi]\nlabels = ['0', '$\\pi$', '$2\\pi$']\nplt.xticks(tick_pos, labels)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AWJho.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AWJho.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 9552118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449e388294e52426fdcacf8af12443a2?s=128&d=identicon&r=PG&f=1", "display_name": "kabhel", "link": "https://stackoverflow.com/users/9552118/kabhel"}, "is_accepted": false, "score": 1, "last_activity_date": 1589224311, "last_edit_date": 1589224311, "creation_date": 1589223937, "answer_id": 61737382, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/61737382#61737382", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<p><strong>Solution for pi fractions:</strong></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nfrom matplotlib import rc\nrc('text', usetex=True) # Use LaTeX font\n\nimport seaborn as sns\nsns.set(color_codes=True)\n</code></pre>\n\n<ol>\n<li>Plot your function:</li>\n</ol>\n\n<pre><code>fig, ax = plt.subplots(1)\nx = np.linspace(0, 2*np.pi, 1001)\ny = np.cos(x)\nax.plot(x, y)\nplt.xlim(0, 2*np.pi)\n</code></pre>\n\n<ol start=\"2\">\n<li>Modify the range of the grid so that it corresponds to the pi values:</li>\n</ol>\n\n<pre><code>ax.set_xticks(np.arange(0, 2*np.pi+0.01, np.pi/4))\n</code></pre>\n\n<ol start=\"3\">\n<li>Change axis labels:</li>\n</ol>\n\n<pre><code>labels = ['$0$', r'$\\pi/4$', r'$\\pi/2$', r'$3\\pi/4$', r'$\\pi$',\n          r'$5\\pi/4$', r'$3\\pi/2$', r'$7\\pi/4$', r'$2\\pi$']\nax.set_xticklabels(labels)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/t4C6G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t4C6G.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13340441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f051c259478da416f54326c8b60bd040?s=128&d=identicon&r=PG&f=1", "display_name": "donn", "link": "https://stackoverflow.com/users/13340441/donn"}, "is_accepted": false, "score": 1, "last_activity_date": 1595614607, "last_edit_date": 1595614607, "creation_date": 1591046917, "answer_id": 62141293, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib/62141293#62141293", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<p>I created a <a href=\"https://pypi.org/project/matplot-fmt-pi/\" rel=\"nofollow noreferrer\">PyPi Package</a> that creates formatter and locator instances like Scott Centoni's answer.</p>\n<pre><code>&quot;&quot;&quot;Show a simple example of using MultiplePi.&quot;&quot;&quot;\n\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nfrom matplot_fmt_pi import MultiplePi\n\nfig = plt.figure(figsize=(4*np.pi, 2.4))\naxes = fig.add_subplot(111)\nx = np.linspace(-2*np.pi, 2*np.pi, 512)\naxes.plot(x, np.sin(x))\n\naxes.grid(True)\naxes.axhline(0, color='black', lw=2)\naxes.axvline(0, color='black', lw=2)\naxes.set_title(&quot;MultiplePi formatting&quot;)\n\npi_manager = MultiplePi(2)\naxes.xaxis.set_major_locator(pi_manager.locator())\naxes.xaxis.set_major_formatter(pi_manager.formatter())\n\nplt.tight_layout()\nplt.savefig(&quot;./pi_graph.png&quot;, dpi=120)\n</code></pre>\n"}], "owner": {"reputation": 1098, "user_id": 2143578, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7cfb98ea957d0c10697ea721726c7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zubo", "link": "https://stackoverflow.com/users/2143578/zubo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28392, "favorite_count": 12, "accepted_answer_id": 53586826, "answer_count": 6, "score": 27, "last_activity_date": 1595614607, "creation_date": 1479329485, "last_edit_date": 1479337274, "question_id": 40642061, "link": "https://stackoverflow.com/questions/40642061/how-to-set-axis-ticks-in-multiples-of-pi-python-matplotlib", "title": "How to set axis ticks in multiples of pi (Python) (matplotlib)", "body": "<p>I'd like to make a plot in Python and have x range display ticks in multiples of pi. </p>\n\n<p>Is there a good way to do this, not manually? </p>\n\n<p>I'm thinking of using matplotlib, but other options are fine. </p>\n\n<p>EDIT 3: EL_DON's solution worked for me like this: </p>\n\n<pre><code>import matplotlib.ticker as tck\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nf,ax=plt.subplots(figsize=(20,10))\nx=np.linspace(-10*np.pi, 10*np.pi,1000)\ny=np.sin(x)\n\nax.plot(x/np.pi,y)\n\nax.xaxis.set_major_formatter(tck.FormatStrFormatter('%g $\\pi$'))\nax.xaxis.set_major_locator(tck.MultipleLocator(base=1.0))\n\nplt.style.use(\"ggplot\")\n\n\nplt.show()\n</code></pre>\n\n<p>giving:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bl2D3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bl2D3.png\" alt=\"nice sine graph\"></a></p>\n\n<p>EDIT 2 (solved in EDIT 3!): EL_DON's answer doesn't seem to work right for me: </p>\n\n<pre><code>import matplotlib.ticker as tck\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nf,ax=plt.subplots(figsize=(20,10))\nx=np.linspace(-10*np.pi, 10*np.pi)\ny=np.sin(x)\n\nax.plot(x/np.pi,y)\n\nax.xaxis.set_major_formatter(tck.FormatStrFormatter('%g $\\pi$'))\nax.xaxis.set_major_locator(tck.MultipleLocator(base=1.0))\n\nplt.style.use(\"ggplot\")\n\nplt.show()\n</code></pre>\n\n<p>gives me </p>\n\n<p><a href=\"https://i.stack.imgur.com/OwvCq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OwvCq.png\" alt=\"plot\"></a></p>\n\n<p>which really doesn't look right</p>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "edited": false, "score": 0, "creation_date": 1479329721, "post_id": 40642039, "comment_id": 68516324, "body": "It is something very similar to <a href=\"http://stackoverflow.com/questions/9322796/keep-a-subprocess-alive-and-keep-giving-it-commands-python\">this one</a>. Starting from that answer, you should use the command to open a &quot;shell&quot; in windows instead of <code>&#47;usr&#47;bin&#47;cat</code>. Probably the command you should use is similar to <code>C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe</code>. BTW, this is not an easy task, you should deepen the problem reading the documentation:"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "edited": false, "score": 0, "creation_date": 1479330074, "post_id": 40642039, "comment_id": 68516527, "body": "<a href=\"http://stackoverflow.com/documentation/python/1393/subprocess-library#t=201611162059578672205\">This is a start...</a>"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7037642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/02dc487c0934c2c6904d58dbd072da26?s=128&d=identicon&r=PG&f=1", "display_name": "Rony Cohen", "link": "https://stackoverflow.com/users/7037642/rony-cohen"}, "edited": false, "score": 0, "creation_date": 1479332031, "post_id": 40642249, "comment_id": 68517527, "body": "Thanks you ! But I don&#39;t understand what is the newdir = shlex.split(command)[1] can you explain this. Moreover I don&#39;t understand how you do that the code is based on the previous result to give the result with cd and dir ? ( The code work but I want to understand what you do)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 87, "user_id": 7037642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/02dc487c0934c2c6904d58dbd072da26?s=128&d=identicon&r=PG&f=1", "display_name": "Rony Cohen", "link": "https://stackoverflow.com/users/7037642/rony-cohen"}, "edited": false, "score": 0, "creation_date": 1479332383, "post_id": 40642249, "comment_id": 68517696, "body": "code improved. link to shlex documentation (parses command line &amp; quotes). <code>cd somedir</code> is a special case that triggers an internal python <code>os.chdir()</code>, so next <code>subprocess.Popen</code> command executes in that new directory."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1479332220, "last_edit_date": 1479332220, "creation_date": 1479330163, "answer_id": 40642249, "question_id": 40642039, "link": "https://stackoverflow.com/questions/40642039/subprocess-python-without-closing-the-cmd/40642249#40642249", "title": "Subprocess python without closing the cmd", "body": "<p>I'm afraid that you'll have to do better than that.</p>\n\n<p>Each <code>subprocess.Popen</code> command is executed in a separate process, so the change directory command you're issuing in the first call has only a local effect and has no effect on the others.</p>\n\n<p>For other commands it would work, though. You would \"just\" have to handle the built-in commands separately.</p>\n\n<p>I wrote a simple loop to get you started. For proper quote parsing, I have used the convenient <a href=\"https://docs.python.org/3.1/library/shlex.html\" rel=\"nofollow noreferrer\">shlex module</a></p>\n\n<pre><code>import subprocess,os,shlex\n\nwhile True:\n    command = input(\"&gt; \").strip()\n    if command:\n        # tokenize the command, double quotes taken into account\n        toks = shlex.split(command)\n        if toks[0] == \"cd\" and len(toks)==2:\n            newdir = toks[1]\n            try:\n                os.chdir(newdir)\n            except Exception as e:\n                print(\"Failed {}\".format(str(e)))\n            else:\n                print(\"changed directory to '{}'\".format(newdir))\n        else:\n            p = subprocess.Popen(command,shell=True)\n            rc=p.wait()\n            if rc:\n                print(\"Command failed returncode {}\".format(rc))\n</code></pre>\n\n<p>Features:\n- <code>cd</code> command is handled in a special way. Performs an <code>os.chdir</code> so you can use relative paths. You can also check the path and forbid cd'ing in some directories if you want.\n- since <code>os.chdir</code> is performed, the next call to <code>subprocess.Popen</code> is done in the changed directory, retaining the previous <code>cd</code> command, as opposed to your attempt.\n- handles quotes (using shlex module, maybe has its differences with windows cmd!)\n- failed commands print return code\n- if directory doesn't exist, prints an error instead of crashing :)</p>\n\n<p>Of course it is very limited, no env. variable set, no cmd emulation, that's not the point.</p>\n\n<p>small test:</p>\n\n<pre><code>&gt; cd ..\nchanging directory to ..\n&gt; cd skdsj\nchanging directory to skdsj\nFailed [WinError 2] Le fichier sp\u00e9cifi\u00e9 est introuvable: 'skdsj'\n&gt; dir\n Le volume dans le lecteur C s\u2019appelle Windows\n Le num\u00e9ro de s\u00e9rie du volume est F08E-C20D\n\n R\u00e9pertoire de C:\\DATA\\jff\\data\\python\\stackoverflow\n\n12/10/2016  21:28    &lt;DIR&gt;          .\n12/10/2016  21:28    &lt;DIR&gt;          ..\n12/10/2016  21:28    &lt;DIR&gt;          ada\n08/10/2016  11:11               902 getopt.sh\n09/10/2016  20:14               493 iarray.sh\n19/08/2016  12:28    &lt;DIR&gt;          java\n16/11/2016  21:57    &lt;DIR&gt;          python\n08/10/2016  22:24                51 toto.txt\n              10 fichier(s)            2,268 octets\n              10 R\u00e9p(s)  380,134,719,488 octets libres\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7037642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/02dc487c0934c2c6904d58dbd072da26?s=128&d=identicon&r=PG&f=1", "display_name": "Rony Cohen", "link": "https://stackoverflow.com/users/7037642/rony-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 0, "accepted_answer_id": 40642249, "answer_count": 1, "score": 1, "last_activity_date": 1480023933, "creation_date": 1479329370, "question_id": 40642039, "link": "https://stackoverflow.com/questions/40642039/subprocess-python-without-closing-the-cmd", "title": "Subprocess python without closing the cmd", "body": "<p>I want to create a function that have entire access to the cmd of my windows pc. So for example like in windows I can do <em>cd C:\\Users\\Rony\\Documents\\Hello</em> and after that run a <em>dir</em> in order to view the files in the current folder and until I run the command exit the cmd doesn't exit. I want to be able to do the same thing in python, I see that I have to use the function popen of the subprocess. But I don't understand how to this in the documentation of python. I try do do something but I don't success to do this.</p>\n\n<pre><code>def run_cmd():\nsubprocess.Popen(\"cd C:\\Users\\Rony\\Documents\\Apple\", shell=True)\nsubprocess.Popen(\"dir\\n\")\n</code></pre>\n\n<p>Thanks for your help !</p>\n"}, {"tags": ["python", "config", "python-2.6"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7077382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6e4c9bb0fde63008171909f3be9c84?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek ", "link": "https://stackoverflow.com/users/7077382/vivek"}, "edited": false, "score": 0, "creation_date": 1479330933, "post_id": 40642380, "comment_id": 68516954, "body": "Thanks for your reply Ginko. But my question is based on a variable in the config file, I should call above given py file in another py file."}], "tags": [], "owner": {"reputation": 307, "user_id": 5596559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1b64685556a6d2d5e647e64f10fb36f?s=128&d=identicon&r=PG&f=1", "display_name": "Ginko", "link": "https://stackoverflow.com/users/5596559/ginko"}, "is_accepted": false, "score": 0, "last_activity_date": 1479332313, "last_edit_date": 1479332313, "creation_date": 1479330637, "answer_id": 40642380, "question_id": 40642011, "link": "https://stackoverflow.com/questions/40642011/how-can-i-call-another-python-script-in-a-python-script-based-on-a-variable-in/40642380#40642380", "title": "How can I call another python script, in a python script, based on a variable in a config file?", "body": "<p>You could simply use:</p>\n\n<blockquote>\n  <p>import os</p>\n  \n  <p>os.system(\"script_path\")</p>\n</blockquote>\n\n<p>to execute the script file. But there should be a line called shebang in the very top of that script file, you want to execute. If your python interpreter would be in /usr/bin/python this would be:</p>\n\n<blockquote>\n  <p>#!/usr/bin/python</p>\n</blockquote>\n\n<p>Assuming you are a Linux user.\nIn Windows shebang isn't supported. It determines what program to use running *.py file itself.</p>\n\n<p>//Edit:\nTo call that two scripts depending on a property config value you could just make another script called for example runthis.py which contains instruction like:</p>\n\n<pre><code>protocol = Config.get('main', 'protocol')\nif protocol == 'localcopy':\n  os.system('path_to_localcopy_script)\nif protocol == 'antifactory':\n  os.system('path_to_other_script')\n</code></pre>\n\n<p>Dont forgot to import needed modules in that new script.</p>\n\n<p>Then you just run script you just made.</p>\n\n<p>That is one way to do this.</p>\n\n<p>If you dont want to create additional script, then put that code you wrote in a function, like:</p>\n\n<pre><code>def main():\n  ...\n  Your code\n  ...\n</code></pre>\n\n<p>And on the very bottom of your script file write:</p>\n\n<pre><code>if __name__ = '__main__':\n  protocol = Config.get('main', 'app_version')\n  if protocol == 'localcopy':\n    main()\n  if protocol == 'antifactory':\n    os.system('path_to_other_script')\n</code></pre>\n\n<p><code>if __name__ = '__main__'</code> would execute only if you run that script by yourself (not by call from an other sctipt for example)</p>\n"}], "owner": {"reputation": 1, "user_id": 7077382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6e4c9bb0fde63008171909f3be9c84?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek ", "link": "https://stackoverflow.com/users/7077382/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479332638, "creation_date": 1479329259, "last_edit_date": 1479332638, "question_id": 40642011, "link": "https://stackoverflow.com/questions/40642011/how-can-i-call-another-python-script-in-a-python-script-based-on-a-variable-in", "title": "How can I call another python script, in a python script, based on a variable in a config file?", "body": "<p>I have below py script to download the files from artifactory.</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport os\nimport tarfile\nimport urllib\nfrom urllib import urlretrieve\nimport ConfigParser\n\nConfig = ConfigParser.ConfigParser()\nConfig.read('/vivek/release.conf')\ncode_version = Config.get('main', 'app_version')\n\nos.chdir('/tmp/')\narti_st_url='http://repo.com/artifactory/libs-release-  local/com/name/tgz/abc.ear/{0}/abc.ear-{0}.tar.gz'.format(code_version)\narti_st_name='abc.ear-{0}.tar.gz'.format(code_version)\narti_sl_url='http://repo.com/artifactory/libs-release-  local/com/name/tgz/def.ear/{0}/def.ear-{0}.tar.gz'.format(code_version)\narti_sl_name='def.ear-{0}.tar.gz'.format(code_version)\nurllib.urlretrieve(arti_st_url, arti_st_name)\nurllib.urlretrieve(arti_sl_url, arti_sl_name)\noneEAR = 'abc.ear-{0}.tar.gz'.format(code_version)\ntwoEAR = 'def.ear-{0}.tar.gz'.format(code_version)\ntar = tarfile.open(oneEAR)\ntar.extractall()\ntar.close()\ntar1 = tarfile.open(twoEAR)\ntar1.extractall()\ntar1.close()\nos.remove(oneEAR)\nos.remove(twoEAR)\n</code></pre>\n\n<p>This script works perfectly, thanks to stackoverflow. </p>\n\n<p>Here's the next question. There's a variable \"protocol\" in release.conf. If it's equal to \"localcopy\", there's an existing py script that does something. If the \"protocol\" is equal to \"artifactory\", \nabove script should be called and executed. How can I achieve it?</p>\n\n<p>Note: I am a beginner in Python, but my tasks are not. So, please help me out guys.</p>\n"}, {"tags": ["python", "django", "choicefield"], "comments": [{"owner": {"reputation": 7694, "user_id": 4859910, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-juTEf22w0kM/AAAAAAAAAAI/AAAAAAAAAM4/flPY0PSE0z4/photo.jpg?sz=128", "display_name": "anjaneyulubatta505", "link": "https://stackoverflow.com/users/4859910/anjaneyulubatta505"}, "edited": false, "score": 0, "creation_date": 1479364944, "post_id": 40642000, "comment_id": 68527888, "body": "I think form fields are like generators in python, they can be used only once. I&#39;m not sure. check it once."}, {"owner": {"reputation": 163, "user_id": 705239, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36531a88ea2eff9036b4e6a298964837?s=128&d=identicon&r=PG", "display_name": "jefpadfi", "link": "https://stackoverflow.com/users/705239/jefpadfi"}, "reply_to_user": {"reputation": 7694, "user_id": 4859910, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-juTEf22w0kM/AAAAAAAAAAI/AAAAAAAAAM4/flPY0PSE0z4/photo.jpg?sz=128", "display_name": "anjaneyulubatta505", "link": "https://stackoverflow.com/users/4859910/anjaneyulubatta505"}, "edited": false, "score": 0, "creation_date": 1479395336, "post_id": 40642000, "comment_id": 68547877, "body": "@AnjaneyuluBatta I&#39;ve used pure html as well with select tags. It renders just fine but won&#39;t click while inside the for loop."}], "owner": {"reputation": 163, "user_id": 705239, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36531a88ea2eff9036b4e6a298964837?s=128&d=identicon&r=PG", "display_name": "jefpadfi", "link": "https://stackoverflow.com/users/705239/jefpadfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479329913, "creation_date": 1479329227, "last_edit_date": 1479329913, "question_id": 40642000, "link": "https://stackoverflow.com/questions/40642000/django-choicefield-not-working-insed-for-sub-in-subs", "title": "Django ChoiceField not working insed {% for sub in subs %}", "body": "<p>Inside my django project i have a template called formquestions.html. Inside the template I am looping through all sub categories from my database (right now it is only 1 for testing purposes). My issue is that my <code>ChoiceField</code> is not dropping down so you may select other options. If I move outside of the for loop it works just fine.</p>\n\n<pre><code># form.py\nDATA_DISPLAY_TYPE = (\n    ('input', 'Input'),\n    ('select', 'Select'),\n    ('checkbox', 'CheckBox'),\n)    \nclass EditSubInfo(forms.Form):\n    help_text = forms.CharField(widget=forms.Textarea)\n    data_display_type = forms.ChoiceField(choices=DATA_DISPLAY_TYPE)\n\n\n# formquestions.html\n{% for sub in subs %}\n    Name: sub.name\n    Choices: {{form.data_display_type}}\n{% endfor %}\n</code></pre>\n\n<p>The <code>ChoiceField</code> renders just fine. But when you try to click on it, nothing happens. If I move it outside of the for loop, it will work just fine. Any ideas of what is going wrong?</p>\n"}, {"tags": ["python", "xslt", "pycharm", "lxml"], "comments": [{"owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "edited": false, "score": 0, "creation_date": 1479330189, "post_id": 40641916, "comment_id": 68516580, "body": "I would suggest to use scrapy package (<a href=\"https://scrapy.org/\" rel=\"nofollow noreferrer\">scrapy.org</a>) for scraping websites. Installing package through pip install scrapy will install all required packages for scraping including libxml (not libxml2)"}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1479332858, "creation_date": 1479332858, "answer_id": 40642963, "question_id": 40641916, "link": "https://stackoverflow.com/questions/40641916/failing-to-load-packages-with-pycharm/40642963#40642963", "title": "Failing to load packages with pycharm", "body": "<p><code>lxml</code> needs C/C++ libraries <code>libxml</code>, <code>libxstl</code> so you have to install it first. But they are not Python modules but standard libraries - probably <code>libxml.dll</code>, <code>libxstl.dll</code>. </p>\n\n<p><code>lxml</code> may need also source code for this libraries or C/C++ header files <code>*.h</code> and C/C++ compiler to compile <code>lxml</code></p>\n\n<p>For Windows exists <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">Unofficial Windows Binaries for Python Extension Packages</a> with precompiled modules and there is <code>lxml</code></p>\n\n<p>But much easier (for Windows user) is use <a href=\"https://www.continuum.io/downloads\" rel=\"nofollow noreferrer\">Anaconda distribution</a> which installs the same Python from Python.org but with extra, precompiled modules like <code>lxml</code>. See <a href=\"https://docs.continuum.io/anaconda/pkg-docs\" rel=\"nofollow noreferrer\">list of modules</a>.</p>\n\n<p>PyCharm can use different Python with different project so you can have installed current Python and Anaconda and use them both in PyCharm.</p>\n"}], "owner": {"reputation": 57, "user_id": 1246229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/469c5fae8e0d07f2c14502ca336f861a?s=128&d=identicon&r=PG", "display_name": "George Gomes", "link": "https://stackoverflow.com/users/1246229/george-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "accepted_answer_id": 40642963, "answer_count": 1, "score": 1, "last_activity_date": 1613570163, "creation_date": 1479328904, "last_edit_date": 1613570163, "question_id": 40641916, "link": "https://stackoverflow.com/questions/40641916/failing-to-load-packages-with-pycharm", "title": "Failing to load packages with pycharm", "body": "<p>I am trying to do some web scraping using python with PyCharm on a windows 10 machine. Some sites suggest using lxml library and it sounds good. I am trying to load the package but am having trouble. What should I do?</p>\n<p>OK great. I go to add lxml 3.6.4 in the package installer and it fails with the message(s):</p>\n<pre><code>ERROR: b&quot;'xslt-config' is not recognized as an internal or external command,\\r\\noperable program or batch file.\\r\\n&quot;\n</code></pre>\n<p>and</p>\n<pre><code>Could not find function xmlCheckVersion in library libxml2. Is libxml2 installed?\n</code></pre>\n<p>I installed libxml2dom via the package installer but that does not do the trick</p>\n<p>xslt-config is not one of the available packages in the available packages installer\nlibxml2 is also not an available package</p>\n<p>I do not see &quot;libxml2&quot; from the options of available packages.  But I do see &quot;libxml2-python&quot; 2.6.21\nI tried to install it, but it fails with the message:</p>\n<pre><code>Collecting libxml2-python==2.6.21\nCould not find a version that satisfies the requirement libxml2-python==2.6.21 (from versions: )\n\nNo matching distribution found for libxml2-python==2.6.21\n</code></pre>\n<p>I have been able to load other packages\nUsing python interpreter 3.5.2\nUsing PyCharm Community Edition 2016.2.3</p>\n"}, {"tags": ["python", "templates", "jinja2"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1479329107, "post_id": 40641910, "comment_id": 68515974, "body": "In what way does it not behave correctly?  It looks mostly okay, although inside your innermost <code>for</code> loop you&#39;re not referencing either <code>key_1</code> or <code>value_2</code>."}, {"owner": {"reputation": 425, "user_id": 2472009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f65a6527053c974f5ecc518cf42a0ce?s=128&d=identicon&r=PG", "display_name": "Luisito", "link": "https://stackoverflow.com/users/2472009/luisito"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1479329278, "post_id": 40641910, "comment_id": 68516076, "body": "sorry should be data.value_2"}, {"owner": {"reputation": 2292, "user_id": 6754140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7bd518bf683e48b801f3005f0ac9f17b?s=128&d=identicon&r=PG&f=1", "display_name": "dizzyf", "link": "https://stackoverflow.com/users/6754140/dizzyf"}, "edited": false, "score": 0, "creation_date": 1479329690, "post_id": 40641910, "comment_id": 68516304, "body": "Can you post a snippet of your &#39;data&#39; variable?"}, {"owner": {"reputation": 425, "user_id": 2472009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f65a6527053c974f5ecc518cf42a0ce?s=128&d=identicon&r=PG", "display_name": "Luisito", "link": "https://stackoverflow.com/users/2472009/luisito"}, "edited": false, "score": 0, "creation_date": 1479329784, "post_id": 40641910, "comment_id": 68516368, "body": "{   &quot;assignedUser&quot;: {     &quot;username&quot;: &quot;name@email.com&quot;   },}"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1479333238, "post_id": 40641910, "comment_id": 68518117, "body": "what is <code>data.values_2()</code> ???  You need <code>{{ value_2 }}</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1479333473, "post_id": 40641910, "comment_id": 68518223, "body": "BTW: it can be without <code>{% for key in data %}</code> - but <code>{% if &#39;assignedUser&#39; in data %} {% for key_1, value_2 in data[&#39;assignedUser&#39;].items() %}</code>"}], "owner": {"reputation": 425, "user_id": 2472009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f65a6527053c974f5ecc518cf42a0ce?s=128&d=identicon&r=PG", "display_name": "Luisito", "link": "https://stackoverflow.com/users/2472009/luisito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1728, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479329941, "creation_date": 1479328883, "last_edit_date": 1479329941, "question_id": 40641910, "link": "https://stackoverflow.com/questions/40641910/nested-for-loop-in-jinja2-template", "title": "nested for loop in jinja2 template", "body": "<pre><code>{% for key in data %}\n{% if 'assignedUser' in key %}\n    {% for key_1, value_2 in data[key].items() %}\n    &lt;li&gt;Assigned User: data.values_2()&lt;/li&gt;\n    {% endfor %}\n{% endif %}\n{% endfor %}\n</code></pre>\n\n<p>I'm trying to make the jinja template behave like this python statement:</p>\n\n<pre><code>for key in data:\nif key == 'assignedUser':\n    for key_1, value_2  in data[key].items():\n        print('Assigned User: ' + str(value)) \n</code></pre>\n\n<p>'data' object:</p>\n\n<pre><code>{\n  \"assignedUser\": {\n    \"username\": \"name@email.com\"\n}, \n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib", "histogram"], "comments": [{"owner": {"reputation": 2749, "user_id": 6066528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269311b2d12b388718e754c27680e69f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Becker", "link": "https://stackoverflow.com/users/6066528/nick-becker"}, "edited": false, "score": 0, "creation_date": 1479329123, "post_id": 40641895, "comment_id": 68515985, "body": "Couldn&#39;t there be multiple pairs of horizontal and vertical histograms that could result in a given 2d histogram matrix?"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 2749, "user_id": 6066528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269311b2d12b388718e754c27680e69f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Becker", "link": "https://stackoverflow.com/users/6066528/nick-becker"}, "edited": false, "score": 0, "creation_date": 1479330364, "post_id": 40641895, "comment_id": 68516665, "body": "Not sure I follow Nick. I need to <i>project</i> the 2D histogram to the x,y axis. This is, to stack the values in all columns (ie: sum all bin values for a given column or x value, and repeat for all columns),  to produce the horizontal histogram (x axis), and the values in all lines to produce the vertical histogram (y axis)."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1479330989, "post_id": 40641895, "comment_id": 68516980, "body": "It seems you already have the solution ( <i>&quot;sum all bin values for a given column or x value, and repeat for all columns&quot;</i> ), so where exactly is the problem?"}, {"owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "edited": false, "score": 0, "creation_date": 1479332340, "post_id": 40641895, "comment_id": 68517685, "body": "Are you asking how to project the data, i.e. <code>hx, hy = h.sum(axis=0), h.sum(axis=1)</code> or how to plot it?"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1479339279, "post_id": 40641895, "comment_id": 68520513, "body": "Yes, I&#39;m asking how to perform that sum so that the result is a 1D histogram for each dimension. <code>hx, hy = h.sum(axis=0), h.sum(axis=1)</code> does not give the expected results."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1479339497, "post_id": 40641895, "comment_id": 68520577, "body": "Sorry, <code>hx, hy = h.sum(axis=0), h.sum(axis=1)</code> does work, only it does not produce a histogram, rather a series of points which is still good. Could you post your comment as an answer 545424?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1479373880, "post_id": 40641895, "comment_id": 68532739, "body": "You really need to distinguish between data and visualization. Since <code>h</code> already <b>is</b> a histogram, <code>hx,hy</code> will be marginal histograms as well. When it comes to visualization you can plot any histogram either as dots or bars or whatever you like using the method of your choice from the matplotlib gallery."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1479390227, "post_id": 40641895, "comment_id": 68543971, "body": "The data obtention part is more or less solved with <code>hx, hy = h.sum(axis=0), h.sum(axis=1)</code>, but the visualization is not. Using <code>imshow</code> (instead of <code>scatter</code> as in the example) messes up the alignment of the plots."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1479390799, "post_id": 40641895, "comment_id": 68544425, "body": "@ImportanceOfBeingErnest I&#39;ve updated the question using 545424&#39;s way of obtaining the projected histograms. As you can see, the issue that remains is the visualization."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1479392561, "post_id": 40641895, "comment_id": 68545771, "body": "Indeed, so now that you know which data to plot, you can use any of the examples you find to plot the marginals, like <a href=\"http://matplotlib.org/examples/pylab_examples/scatter_hist.html\" rel=\"nofollow noreferrer\">the original one</a> or <a href=\"http://stackoverflow.com/questions/20525983/matplotlib-imshow-a-2d-array-with-plots-of-its-marginal-densities/20527817\">this nice one</a>."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1479393842, "post_id": 40641895, "comment_id": 68546744, "body": "The original plot doesn&#39;t use <code>gridspec</code>, so it&#39;s no good. The example you provide uses <code>gridspec</code> but it affects the entire image with the width and height ratios, so I can&#39;t use that or it would affect the rest of the plots in the figure. This last example did give me the idea to force the aspect in <code>imshow</code> to <code>auto</code>, and that seems to work. If you want, you can use that  to post an answer and I&#39;ll accept it. Thank you!"}], "owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5551, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1479391707, "creation_date": 1479328848, "last_edit_date": 1479391707, "question_id": 40641895, "link": "https://stackoverflow.com/questions/40641895/plot-aligned-x-y-1d-histograms-from-projected-2d-histogram", "title": "Plot aligned x,y 1d histograms from projected 2d histogram", "body": "<p>I need to generate an image similar to the one shown in <a href=\"http://matplotlib.org/examples/pylab_examples/scatter_hist.html\" rel=\"nofollow noreferrer\">this example</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VSw1z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VSw1z.png\" alt=\"enter image description here\"></a></p>\n\n<p>The difference is that, instead of having the scattered points in two dimensions, I have a two-dimensional histogram generated with numpy's histogram2d and plotted using with <code>imshow</code> and <code>gridspec</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YsZGS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YsZGS.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I project this 2D histogram into a horizontal and a vertical histogram (or curves) so that it looks aligned, like the first image?</p>\n\n<hr>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\n\ndata = # Uploaded to http://pastebin.com/tjLqM9gQ\n\n# Create a meshgrid of coordinates (0,1,...,N) times (0,1,...,N)\ny, x = np.mgrid[:len(data[0, :, 0]), :len(data[0, 0, :])]\n# duplicating the grids\nxcoord, ycoord = np.array([x] * len(data)), np.array([y] * len(data))\n# compute histogram with coordinates as x,y\nh, xe, ye = np.histogram2d(\n    xcoord.ravel(), ycoord.ravel(),\n    bins=[len(data[0, 0, :]), len(data[0, :, 0])],\n    weights=stars.ravel())\n\n# Projected histograms inx and y\nhx, hy = h.sum(axis=0), h.sum(axis=1)\n\n# Define size of figure\nfig = plt.figure(figsize=(20, 15))\ngs = gridspec.GridSpec(10, 12)\n\n# Define the positions of the subplots.\nax0 = plt.subplot(gs[6:10, 5:9])\naxx = plt.subplot(gs[5:6, 5:9])\naxy = plt.subplot(gs[6:10, 9:10])\n\nax0.imshow(h, cmap=plt.cm.viridis, interpolation='nearest',\n           origin='lower', vmin=0.)\n\n# Remove tick labels\nnullfmt = NullFormatter()\naxx.xaxis.set_major_formatter(nullfmt)\naxx.yaxis.set_major_formatter(nullfmt)\naxy.xaxis.set_major_formatter(nullfmt)\naxy.yaxis.set_major_formatter(nullfmt)\n\n# Top plot\naxx.plot(hx)\naxx.set_xlim(ax0.get_xlim())\n# Right plot\naxy.plot(hy, range(len(hy)))\naxy.set_ylim(ax0.get_ylim())\n\nfig.tight_layout()\nplt.savefig('del.png')\n</code></pre>\n"}, {"tags": ["python", "xml", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 24922, "user_id": 1312080, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ORKi0.jpg?s=128&g=1", "display_name": "amphibient", "link": "https://stackoverflow.com/users/1312080/amphibient"}, "edited": false, "score": 0, "creation_date": 1479329322, "post_id": 40641986, "comment_id": 68516101, "body": "funny, i just came up with the same solution simultaneously"}, {"owner": {"reputation": 24922, "user_id": 1312080, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ORKi0.jpg?s=128&g=1", "display_name": "amphibient", "link": "https://stackoverflow.com/users/1312080/amphibient"}, "edited": false, "score": 0, "creation_date": 1479403793, "post_id": 40641986, "comment_id": 68553808, "body": "unfortunately, the only soup parser that works on my system (Win7) is <code>html.parser</code> (xml does not work as per <a href=\"http://stackoverflow.com/questions/40640026/how-to-install-module-for-beautifulsoup-xml-parsing?noredirect=1#comment68512605_40640026\" title=\"how to install module for beautifulsoup xml parsing\">stackoverflow.com/questions/40640026/&hellip;</a>) converts all tags to lower case and my REST API is case sensitive"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1479329185, "creation_date": 1479329185, "answer_id": 40641986, "question_id": 40641889, "link": "https://stackoverflow.com/questions/40641889/how-to-replace-remove-xml-tag-with-beautifulsoup/40641986#40641986", "title": "How to replace/remove XML tag with BeautifulSoup?", "body": "<p>You can use <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#replace-with\" rel=\"nofollow noreferrer\"><code>.replace_with()</code></a> and <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigablestring-and-new-tag\" rel=\"nofollow noreferrer\"><code>.new_tag()</code></a> methods:</p>\n\n<pre><code>for repElem in repElemList:\n    print(\"Processing repElem...\")\n    repElemID = repElem.get('id')\n    repElemName = repElem.get('name')\n\n    repElem.replace_with(xmlSoup.new_tag(\"somenewtag\"))\n</code></pre>\n\n<p>Then, you can dump the \"soup\" using <code>str(soup)</code> or <code>soup.prettify()</code>.</p>\n"}], "owner": {"reputation": 24922, "user_id": 1312080, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ORKi0.jpg?s=128&g=1", "display_name": "amphibient", "link": "https://stackoverflow.com/users/1312080/amphibient"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 1, "accepted_answer_id": 40641986, "answer_count": 1, "score": 1, "last_activity_date": 1479329648, "creation_date": 1479328821, "last_edit_date": 1495541624, "question_id": 40641889, "link": "https://stackoverflow.com/questions/40641889/how-to-replace-remove-xml-tag-with-beautifulsoup", "title": "How to replace/remove XML tag with BeautifulSoup?", "body": "<p>I have XML in a local file that is a template for a final message that gets <code>POST</code>ed to a <code>REST</code> service. The script pre processes the template data before it gets posted.</p>\n\n<p>So the template looks something like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;root&gt;\n    &lt;singleElement&gt;\n        &lt;subElementX&gt;XYZ&lt;/subElementX&gt;\n    &lt;/singleElement&gt;\n    &lt;repeatingElement id=\"11\" name=\"Joe\"/&gt;\n    &lt;repeatingElement id=\"12\" name=\"Mary\"/&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>The message XML should look the same except that the <code>repeatingElement</code> tags need to be replaced with something else (XML generated by the script based on the attributes in the existing tag).</p>\n\n<p>Here is my script so far:</p>\n\n<pre><code>xmlData = None\n\nwith open('conf//test1.xml', 'r') as xmlFile:\n    xmlData = xmlFile.read()\n\nxmlSoup = BeautifulSoup(xmlData, 'html.parser')\n\nrepElemList = xmlSoup.find_all('repeatingelement')\n\nfor repElem in repElemList:\n    print(\"Processing repElem...\")\n    repElemID = repElem.get('id')\n    repElemName = repElem.get('name')\n\n    # now I do something with repElemID and repElemName\n    # and no longer need it. I would like to replace it with &lt;somenewtag/&gt;\n    # and dump what is in the soup object back into a string.\n    # is it possible with BeautifulSoup?\n</code></pre>\n\n<p>Can I replace the repeating elements with something else and then dump the soup object into a new string that I can post to my REST API?</p>\n\n<p><strong>NOTE:</strong>  I am using <code>html.parser</code> because I <a href=\"https://stackoverflow.com/questions/40640026/how-to-install-module-for-beautifulsoup-xml-parsing\">can't get the xml parser to work</a> but it works alright, understanding HTML is more permissive than XML parsing.</p>\n"}, {"tags": ["python", "python-3.x", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 10245, "user_id": 4086177, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/032eab83ad219f13bbc21714d55438f3?s=128&d=identicon&r=PG&f=1", "display_name": "Beri", "link": "https://stackoverflow.com/users/4086177/beri"}, "edited": false, "score": 1, "creation_date": 1479329111, "post_id": 40641884, "comment_id": 68515976, "body": "Could you show your code?"}, {"owner": {"reputation": 7251, "user_id": 6214222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYplt.png?s=128&g=1", "display_name": "Keiwan", "link": "https://stackoverflow.com/users/6214222/keiwan"}, "edited": false, "score": 3, "creation_date": 1479329115, "post_id": 40641884, "comment_id": 68515980, "body": "why does your first string end with <code>..</code> but the second one doesn&#39;t?"}], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1479329274, "creation_date": 1479329274, "answer_id": 40642014, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642014#40642014", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<pre><code>def nested_increasing_additions(n):\n    l=['']\n    for i in range(1, n+1):\n        l.append(l[-1]+str(i)+'+')\n    return '..'.join(l[1:])\n</code></pre>\n\n<p>This returns a string without the <code>..</code> at the end.  If you want that, just do <code>return '..'.join(l[1:]) + '..'</code></p>\n"}, {"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479329722, "post_id": 40642063, "comment_id": 68516325, "body": "&quot;the function should return the <i>string</i>&quot; emphasis mine"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1479333212, "post_id": 40642063, "comment_id": 68518103, "body": "A whole new level of getting nerd-sniped, congratulations!"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 4, "last_activity_date": 1479334267, "last_edit_date": 1479334267, "creation_date": 1479329491, "answer_id": 40642063, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642063#40642063", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>Consecutive evaluations of these strings results in a sequence of <em>tetrahedral numbers</em>.  For example, for input 5, the output evaluates to 35.  This is the number of spheres you would need to build a tetrahedron of side length 5.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/sjFFN.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sjFFN.gif\" alt=\"tetrahedron\"></a></p>\n\n<p>To see how it relates to the sum in the question, note that the discrete \"volume\" of the tetrahedron would be equal to the sum of the triangle \"slices\" from top to bottom.</p>\n\n<pre><code>35 = 1 + 3 + 6 + 10 + 15\n   = 1 + (1+2) + (1+2+3) + (1+2+3+4) + (1+2+3+4+5)\n</code></pre>\n\n<p>By a similar argument, the triangular numbers are made up of slices of consecutive integers.  </p>\n\n<hr>\n\n<p>Please excuse the maths, it was difficult (but not impossible) to adapt a closed-form solution into the desired output format.</p>\n\n<pre><code>def tetrahedral(n): \n    return n*(n+1)*(n+2)//6\n\n\ndef string_generator(n):\n    x = tetrahedral(n)\n    n = N = 1\n    while x &gt; 0:\n        while n &lt;= N:\n            yield str(n) + '+'\n            n += 1\n        x -= N*(N+1)//2\n        n = 1\n        N += 1\n        yield '..'\n\n\ndef nested_increasing_additions(n):\n    return ''.join(string_generator(n))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3499, "user_id": 7010554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ef9191cdd3d7c23e5195e359709c7?s=128&d=identicon&r=PG&f=1", "display_name": "maij", "link": "https://stackoverflow.com/users/7010554/maij"}, "is_accepted": true, "score": 1, "last_activity_date": 1479329576, "creation_date": 1479329576, "answer_id": 40642090, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642090#40642090", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>You can build the complete string step by step, and remember at each step what you have added last:</p>\n\n<pre><code>def nested_increasing_additions(n):\n    complete_string = \"\"\n    add_string = \"\"\n    for i in range(1,n+1):\n        add_string += str(i) + \"+\"\n        complete_string += add_string + \"..\"\n    return complete_string\n\nprint(nested_increasing_additions(1))\nprint(nested_increasing_additions(3))\nprint(nested_increasing_additions(5))\n</code></pre>\n\n<p>The output with python3 is: </p>\n\n<pre><code>1+..\n1+..1+2+..1+2+3+..\n1+..1+2+..1+2+3+..1+2+3+4+..1+2+3+4+5+..\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7137558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823de389e9271fc775ff51a7bcbda0e6?s=128&d=identicon&r=PG&f=1", "display_name": "Hiskel Kelemework", "link": "https://stackoverflow.com/users/7137558/hiskel-kelemework"}, "is_accepted": false, "score": 0, "last_activity_date": 1479330630, "last_edit_date": 1479330630, "creation_date": 1479330230, "answer_id": 40642272, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642272#40642272", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>you can use something like this.</p>\n\n<pre><code>def nested_increasing_additions(n):\n    string = \"\"\n    for i in range(1,n+1): #1\n        for j in range(1,i+1): #2\n            string += str(j)+\"+\" #4\n        string += \"..\" #5\n    print(string)\n</code></pre>\n\n<p>here is a printout of nested_increasing_additions(4)\n1+..1+2+..1+2+3+..1+2+3+4+..\ni think it's self explanatory, nothing complicated.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4279832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50b19fcfcb664722e3765b6d27ac723?s=128&d=identicon&r=PG&f=1", "display_name": "Anton S.", "link": "https://stackoverflow.com/users/4279832/anton-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1479333486, "last_edit_date": 1479333486, "creation_date": 1479330491, "answer_id": 40642345, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642345#40642345", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>Assuming you did want the <code>\"..\"</code> at the end of each returned string and that recursion is OK, here's a solution:</p>\n\n<pre><code>def nested_increasing_additions(n):\n    if n == 1:\n        return \"1+..\"\n    else:\n        return nested_increasing_additions(n-1) + '%s+..' % '+'.join(str(i) for i in range(1, n+1))\n\nprint(nested_increasing_additions(3))\nprint(nested_increasing_additions(5))\ntype(nested_increasing_additions(1))\n</code></pre>\n\n<p><strong>Prints</strong>:</p>\n\n<pre><code>1+..1+2+..1+2+3+..\n1+..1+2+..1+2+3+..1+2+3+4+..1+2+3+4+5+..\n&lt;type 'str'&gt;\n</code></pre>\n\n<p><br/>\n<strong>Explanation</strong>:</p>\n\n<ul>\n<li>The first return and if (true) block ends the recursive call when the passed in argument value reaches 1 via subtraction from the other half.</li>\n<li>The second half (else block) calls the next iteration with <code>n</code> subtracted by 1 and the string build of the current iteration (if <code>n!=1</code>).</li>\n<li>The complicated looking code <code>'%s+..' % '+'.join(str(i) for i in range(1, n+1))</code> is just concatenation of a list of numbers generated by the <code>range</code> function, turned into strings and <code>\"+..\"</code>\n\n<ul>\n<li><code>range(1, n+1)</code> returns a list of integers starting with 1 until <code>n+1</code> so <code>range(1,3)</code> yields <code>[1,2]</code>. This is passed to join which places a <code>+</code> between each number.</li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7082060, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6201cc754a8cdbd254051d4b53ea1960?s=128&d=identicon&r=PG&f=1", "display_name": "neerbasu", "link": "https://stackoverflow.com/users/7082060/neerbasu"}, "is_accepted": false, "score": 0, "last_activity_date": 1479331982, "last_edit_date": 1479331982, "creation_date": 1479331240, "answer_id": 40642561, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123/40642561#40642561", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>How's this:</p>\n\n<pre><code>def nested_increasing_additions(n):\n\n    string = \"\"\n    new_string = \"\"\n    dot = \"..\"\n\n    for i in range(1, n+1):\n        new_string+=('{}+'.format(i))\n        string = string+new_string+dot\n        print(string)\n\n    return (string)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>nested_increasing_additions(3)    \n\n'1+..1+2+..1+2+3+..'\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7087083, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c2eb7f30d6b84efa53f9885e7000f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Yu", "link": "https://stackoverflow.com/users/7087083/rui-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "accepted_answer_id": 40642090, "answer_count": 6, "score": -2, "last_activity_date": 1479339657, "creation_date": 1479328801, "last_edit_date": 1479339657, "question_id": 40641884, "link": "https://stackoverflow.com/questions/40641884/how-do-i-do-this-if-n-is-3-return-1-12-123", "title": "How do I do this &quot;If n is 3, return `1+..1+2+..1+2+3+..`&quot;", "body": "<p>Define a function named <code>nested_increasing_additions(n)</code> which receives one positive integer <code>(n)</code> and <strong>returns a string</strong> as illustrated in the following examples:</p>\n\n<p>If <code>n</code> is <code>3</code>, the function should return the string:\n<code>1+..1+2+..1+2+3+..</code></p>\n\n<p>If <code>n</code> is <code>5</code>, the function should return the string:\n<code>1+..1+2+..1+2+3+..1+2+3+4+..1+2+3+4+5..+</code></p>\n\n<p>What I think is, I can make <code>n</code> to a list <code>[1,2,3]</code> and use while loop or for loop to repeat <code>n</code> times. For the first loop it returns <code>1+..</code>, for the second loop it returns <code>1+2..</code> somehow (which i don't know) it stops at <code>2</code> which is the same as the repeating time.</p>\n\n<p>I don't know if I'm thinking it right. Need some help and explanations! Thank you!</p>\n"}, {"tags": ["python", "ipython", "sublimetext3"], "comments": [{"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1479329857, "post_id": 40641861, "comment_id": 68516410, "body": "<a href=\"http://stackoverflow.com/questions/8551735/how-do-i-run-python-code-from-sublime-text-2\" title=\"how do i run python code from sublime text 2\">stackoverflow.com/questions/8551735/&hellip;</a>  to run from Sublime, or you can do <code>exec(open(&#39;&#47;path&#47;to&#47;your_file.py&#39;).read())</code> from the iPython command line."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1479332394, "post_id": 40641861, "comment_id": 68517700, "body": "That link is about running the code in a new python session, not an existing one."}, {"owner": {"reputation": 491, "user_id": 5608122, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9663280a11ad10efec26c4fa646484f5?s=128&d=identicon&r=PG&f=1", "display_name": "fossekall", "link": "https://stackoverflow.com/users/5608122/fossekall"}, "edited": false, "score": 0, "creation_date": 1490737570, "post_id": 40641861, "comment_id": 73244171, "body": "Did you solve your problem. Want to do the same thing"}, {"owner": {"reputation": 41, "user_id": 7169570, "user_type": "registered", "profile_image": "https://graph.facebook.com/835040856635917/picture?type=large", "display_name": "Yitong  Ma", "link": "https://stackoverflow.com/users/7169570/yitong-ma"}, "reply_to_user": {"reputation": 491, "user_id": 5608122, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9663280a11ad10efec26c4fa646484f5?s=128&d=identicon&r=PG&f=1", "display_name": "fossekall", "link": "https://stackoverflow.com/users/5608122/fossekall"}, "edited": false, "score": 0, "creation_date": 1490833288, "post_id": 40641861, "comment_id": 73293999, "body": "@fossekall No... Unfortunately. I haven&#39;t figured out a way to even starting a new ipython console and run my codes. I will just stick to spyder."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1479330605, "last_edit_date": 1479330605, "creation_date": 1479330278, "answer_id": 40642283, "question_id": 40641861, "link": "https://stackoverflow.com/questions/40641861/is-is-possible-to-send-code-from-text-editor-to-existing-ipython-console/40642283#40642283", "title": "Is is possible to send code from text editor to existing ipython console", "body": "<p>I edit in <code>geany</code> and use, in <code>ipthon</code>:</p>\n\n<pre><code>run myfile\n</code></pre>\n\n<p>to load and run <code>myfile.py</code>.  <code>ls</code> and <code>cd</code> and <code>pwd</code> are available to check and change the directory.</p>\n\n<p>I save the file from the editor, but I control the run from the <code>ipython</code> console.   </p>\n\n<p>If I just need to run the script, I could do a <code>python myfile.py</code> in the editor's terminal window, or maybe via the editor's <code>execute</code> shortcut.  But the value in running the code in an existing <code>ipython</code> console is that I can interact with the newly loaded code and variables.  I can examine variables, rerun functions with new values, etc.  </p>\n"}, {"tags": [], "owner": {"reputation": 7867, "user_id": 5032941, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6VGGH.jpg?s=128&g=1", "display_name": "anon01", "link": "https://stackoverflow.com/users/5032941/anon01"}, "is_accepted": false, "score": 0, "last_activity_date": 1505970650, "creation_date": 1505970650, "answer_id": 46335899, "question_id": 40641861, "link": "https://stackoverflow.com/questions/40641861/is-is-possible-to-send-code-from-text-editor-to-existing-ipython-console/46335899#46335899", "title": "Is is possible to send code from text editor to existing ipython console", "body": "<p>There is a plugin to do this called <a href=\"https://github.com/randy3k/SendCode\" rel=\"nofollow noreferrer\">SendCode</a>; you can install it directly through the package manager.  </p>\n\n<p>As another answer mentioned, you can run some set of shell commands from within ipython, including execution of a file with <code>run python_file.py</code>, as well as other shell commands including <code>cd, mkdir, rm, mv</code>, etc.</p>\n"}], "owner": {"reputation": 41, "user_id": 7169570, "user_type": "registered", "profile_image": "https://graph.facebook.com/835040856635917/picture?type=large", "display_name": "Yitong  Ma", "link": "https://stackoverflow.com/users/7169570/yitong-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1505970650, "creation_date": 1479328717, "question_id": 40641861, "link": "https://stackoverflow.com/questions/40641861/is-is-possible-to-send-code-from-text-editor-to-existing-ipython-console", "title": "Is is possible to send code from text editor to existing ipython console", "body": "<p>I am starting to learn python with sublime and ipython. They are cool tools and but I want a way to connect them.\nI normally have a sublime and a IPython console open. Is there any command that I can run in sublime just send:</p>\n\n<pre><code>runfile('~\\someExample.py', wdir='~\\myDir')\n</code></pre>\n\n<p>to the running IPython console?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 4337, "user_id": 649727, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1cb3b3d7e0ccce5f039c37f9bd85de11?s=128&d=identicon&r=PG", "display_name": "phynfo", "link": "https://stackoverflow.com/users/649727/phynfo"}, "edited": false, "score": 0, "creation_date": 1479330557, "post_id": 40641850, "comment_id": 68516768, "body": "The structure of the graph is not clear. I would have expected that a node is associated with a list of neighbors or a set of neighbors. But what does <code>&#39;b&#39;: [{&#39;c&#39;,&#39;d&#39;}, set()]</code> mean ??"}, {"owner": {"reputation": 2096, "user_id": 6732794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xH8SY.gif?s=128&g=1", "display_name": "lazy dog", "link": "https://stackoverflow.com/users/6732794/lazy-dog"}, "reply_to_user": {"reputation": 4337, "user_id": 649727, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1cb3b3d7e0ccce5f039c37f9bd85de11?s=128&d=identicon&r=PG", "display_name": "phynfo", "link": "https://stackoverflow.com/users/649727/phynfo"}, "edited": false, "score": 0, "creation_date": 1479331108, "post_id": 40641850, "comment_id": 68517036, "body": "@phynfo It&#39;s a directed graph, so, presumably, each node is associated with a pair of outgoing/incoming arcs. <code>&#39;b&#39;: [{&#39;c&#39;,&#39;d&#39;}, set()]</code> means that <code>b</code> has an arc to <code>c</code> and <code>d</code>, and no incoming arcs, which matches the picture on the right."}], "answers": [{"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1479329655, "creation_date": 1479329655, "answer_id": 40642097, "question_id": 40641850, "link": "https://stackoverflow.com/questions/40641850/how-to-fix-the-le-method/40642097#40642097", "title": "how to fix the le method", "body": "<p><strong><em>right</em></strong> is <strong>Graph</strong> object, therefore it has no items attribute to call. It would fix your code bug,once you add edges, but it may not fix logic issue. Thank you.    </p>\n\n<pre><code>def __le__(self,right):\n   for key, value in self.edges.items():\n      if key not in  right.edges.items() or value not in right.edges.items():\n         return False\n   return True\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7055908, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d55c23b350baa44118360c2692a7e864?s=128&d=identicon&r=PG&f=1", "display_name": "jiahuiding", "link": "https://stackoverflow.com/users/7055908/jiahuiding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479329655, "creation_date": 1479328681, "question_id": 40641850, "link": "https://stackoverflow.com/questions/40641850/how-to-fix-the-le-method", "title": "how to fix the le method", "body": "<pre><code> {'a': [{'c','d'},  {'d'}        ],\n 'b': [{'c','d'},  set()        ],\n 'c': [set(),      {'a','b','d'}],\n 'd': [{'a','c'},  {'a','b'}    ],\n 'e': [set(),      set()        ]}\n\nclass Graph:\n    def __init__(self,*args):\n        self.edges = {}\n\n    def __le__(self,right):\n        for key, value in self.edges.items():\n            if key not in  right.items() or value not in right.items():\n                return False\n        return True\n</code></pre>\n\n<p>Define the &lt;= operator for comparing two Graphs. We define the meaning of g1 &lt;= g2 as g1 is a subgraph of g2, which means that\nall the nodes present in g1 are present in g2, and\nall the edges prsent in g1 (origin node, destination node) are present in g2.\nTrivially, for any Graph g, g &lt;= g evaluates to True.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bamhv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bamhv.png\" alt=\"enter image description here\"></a></p>\n\n<p>when I run my le function, it produces the following error:</p>\n\n<pre><code>g1.edges = {'a': [{'c'},{'d'}], 'b': [{'c','d'}, set()], 'c': [set(),{'a','b'}], 'd': [{'a'},{'b'}]}\n\ng2.edges = {'a': [{'c'},{'d'}], 'b': [{'c','d'}, set()], 'c': [set(),{'a','b','d'}], 'd': [{'a','c'},{'b'}]}\n\ng3.edges = {'a': [{'c','d'},{'d'}], 'b': [{'c','d'}, set()], 'c': [set(),{'a','b','d'}], 'd': [{'a','c'},{'a','b'}], 'e': [set(),set()]}\n\n\n104 # Test &lt;=\n111 *Error: g1 &lt;= g1 and g2 &lt;= g2 and g3 &lt;= g3 raised exception; unevaluated: True\n112 *Error: g1 &lt;= g2 raised exception; unevaluated: True\n113 *Error: g2 &lt;= g3 raised exception; unevaluated: True\n115 *Error: g1 &lt;= g2 raised exception; unevaluated: False\n117 *Error: g2 &lt;= g3 raised exception; unevaluated: False\n</code></pre>\n\n<p>can someone help me to fix my le function? thanks. </p>\n"}, {"tags": ["python", "csv", "ms-access", "pyodbc"], "comments": [{"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479328922, "post_id": 40641820, "comment_id": 68515876, "body": "Have you searched for previous questions like this? There is one that is identical, with a Python 2.x solution, here <a href=\"http://stackoverflow.com/q/40619675/4451406\">stackoverflow.com/q/40619675/4451406</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6727547"}, "reply_to_user": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479329319, "post_id": 40641820, "comment_id": 68516100, "body": "I have edited my snippet to show the suggestion. I tried the suggestion on the link Irmen but it gave another message. rest_array = [text.encode(&quot;utf8&quot;) for text in cursor] AttributeError: &#39;pyodbc.Row&#39; object has no attribute &#39;encode&#39;"}, {"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479329558, "post_id": 40641820, "comment_id": 68516237, "body": "First convert the result row into the appropriate str type(s). You&#39;re attempting to write a Row result object directly into the csv"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6727547"}, "reply_to_user": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479329741, "post_id": 40641820, "comment_id": 68516338, "body": "Irmen, sorry if this may sound amateur (I am a beginner Python user),how can I do what you are suggesting."}, {"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479330567, "post_id": 40641820, "comment_id": 68516772, "body": "You&#39;re selecting stuff from a table in your database. The result from the select query is some database <i>rows</i> (of type <code>pyodbc.Row</code> apparently). You&#39;ll have to extract the columns from them and turn those values into strings first, before you can encode them properly into your csv file (which is essentially just string values separated by comma).     I don&#39;t know what&#39;s in your table so I can&#39;t tell you how to get the columns from the rows, that is a different question entirely than the problem you asked about here. Look up the documentation of pyodbc and look at your database schema."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6640983"}, "edited": false, "score": 1, "creation_date": 1479332326, "post_id": 40641820, "comment_id": 68517678, "body": "@ Learner, Have you tried the unicodecsv module?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6640983"}, "is_accepted": true, "score": 0, "last_activity_date": 1479332289, "creation_date": 1479332289, "answer_id": 40642824, "question_id": 40641820, "link": "https://stackoverflow.com/questions/40641820/ascii-codec-cant-encode-character-error/40642824#40642824", "title": "&#39;ascii&#39; codec can&#39;t encode character error", "body": "<p>You should probably install and use the unicodecsv module.</p>\n\n<p><a href=\"https://pypi.python.org/pypi/unicodecsv/0.14.1\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/unicodecsv/0.14.1</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6727547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 40642824, "answer_count": 1, "score": 1, "last_activity_date": 1479332289, "creation_date": 1479328593, "last_edit_date": 1479329276, "question_id": 40641820, "link": "https://stackoverflow.com/questions/40641820/ascii-codec-cant-encode-character-error", "title": "&#39;ascii&#39; codec can&#39;t encode character error", "body": "<p>I request your kind assistance in tackling an error. I am trying to save MS Access database tables as CSV files using Python. I seem to be running into an error I do not know how to fix. I have looked through different posts on Stack overflow and tried them but nothing fulfilling. Please provide your kind assistance.</p>\n\n<pre><code>import pyodbc\nimport csv\n\nconn_string = (\"DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\\\Access\\\\permissions.accdb\") \n\nconn = pyodbc.connect(conn_string)\n\ncursor = conn.cursor()\n\ncursor.execute(\"select * from [Perm_Site Info];\")\n\nwith open('C:\\\\Desktop\\\\Python Files\\\\Perms_Site_Info.csv','wb') as csvfile:\n    writer = csv.writer(csvfile)\n    rest_array = [text.encode(\"utf8\") for text in cursor]\n    writer.writerow(rest_array)\n    writer.writerow([i[0] for i in cursor.description])\n    writer.writerows(cursor)\n\ncursor.close()\nconn.close()\n\nprint 'All done for now'\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>writer.writerows(cursor)\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u2013' in position 4: ordinal not in range(128)\n</code></pre>\n"}, {"tags": ["python", "time", "geospatial"], "comments": [{"owner": {"reputation": 4901, "user_id": 6485881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDn3.jpg?s=128&g=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6485881/maurice"}, "edited": false, "score": 0, "creation_date": 1479330081, "post_id": 40641797, "comment_id": 68516531, "body": "Some questions and remarks: 1) Consider using <a href=\"https://docs.python.org/3/library/os.path.html#os.path.join\" rel=\"nofollow noreferrer\">os.path.join</a> to build the path to you file, it&#39;s more robus than your solution. 2) Where is the variable <code>year</code> coming from? 3) What is the <code>Dataset</code> Class doing? 4) Have you tried using <a href=\"http://pandas.pydata.org/\" rel=\"nofollow noreferrer\">pandas</a> for this? - It&#39;s usually the right tool for this kind of job and faster in most cases. 5) You can remove the last three lines, they have no effect."}, {"owner": {"reputation": 11171, "user_id": 4967110, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hB02M.jpg?s=128&g=1", "display_name": "AZhao", "link": "https://stackoverflow.com/users/4967110/azhao"}, "edited": false, "score": 0, "creation_date": 1479330088, "post_id": 40641797, "comment_id": 68516534, "body": "consider turning this into a multi thread process? You are processing each file individually, so you could run 50+ of those simultaneously. look at the threading module"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1479330521, "post_id": 40641797, "comment_id": 68516751, "body": "If your code is otherwise working without any errors, a better place to ask could be <a href=\"https://codereview.stackexchange.com\">Code Review</a>. Stack Overflow specializes in not-working code."}, {"owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "edited": false, "score": 0, "creation_date": 1479330530, "post_id": 40641797, "comment_id": 68516756, "body": "You could define your <code>fh</code> variable before your loops. You may want to look into python generators and possibly some multi-threading. If you profile your code, you can find non-performant areas and write them in c++ instead. <a href=\"https://docs.python.org/3.4/extending/extending.html\" rel=\"nofollow noreferrer\">docs.python.org/3.4/extending/extending.html</a>"}, {"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 0, "creation_date": 1479332569, "post_id": 40641797, "comment_id": 68517778, "body": "You can replace your loops with a nested list comprehension"}], "answers": [{"tags": [], "owner": {"reputation": 1864, "user_id": 3087570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001598571942/picture?type=large", "display_name": "Ajk_P", "link": "https://stackoverflow.com/users/3087570/ajk-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1479329907, "creation_date": 1479329907, "answer_id": 40642178, "question_id": 40641797, "link": "https://stackoverflow.com/questions/40641797/how-do-i-improve-execution-time-in-my-script-in-python/40642178#40642178", "title": "How do I improve execution time in my script in python?", "body": "<p>Are you going to do this kind of work many times (with different values), or just once?</p>\n\n<p>If the former, you can try to put your files data in a database (such as <a href=\"https://www.mysql.com/\" rel=\"nofollow noreferrer\">MySQL</a>, which is simple to setup) and create indexes on the start and end time. This would make your reads mighty faster, as you would not need to do a full table scan (which is pretty much what you are doing by reading the whole file).</p>\n\n<p>If you are doing it just once, then I just suggest you wait it out. There is no trivial way to make I/O (which is your bottleneck) less expensive and it seems like to make your checks / compare the data, you actually need to go through the whole dataset.</p>\n"}], "owner": {"reputation": 31, "user_id": 7164729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3aab192f4e489aa82efcfd4718798f?s=128&d=identicon&r=PG&f=1", "display_name": "C. Tals", "link": "https://stackoverflow.com/users/7164729/c-tals"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479329907, "creation_date": 1479328522, "last_edit_date": 1479329492, "question_id": 40641797, "link": "https://stackoverflow.com/questions/40641797/how-do-i-improve-execution-time-in-my-script-in-python", "title": "How do I improve execution time in my script in python?", "body": "<p>I'm trying to remove values from files containing 3 dimensional arrays corresponding with the dimensions corresponding to <code>[time][long][lat]</code>.</p>\n\n<p>I have separate files for each years worth of data.  I have a list of observed data points <code>T_obs</code> for a duration of time <code>start_time_index</code> to <code>end_time_index</code> that I want to compare to the mean value over that time period in the file data.</p>\n\n<p>The data sets contained in the files are sufficiently large that my code is running very slowly and I want to optimize my execution time. The code I have currently is below. Are there any ways I could significantly save time?</p>\n\n<pre><code>T_obs = [1.5, 3.6, 4.5]\nstart_time_index = [20, 300, 10]\nend_time_index = [40, 328, 200]\nlong_obs = [45, 54, 180]\nlat_obs = [34, 65, 32]\nLE = np.zeros(len(T_obs))\nt = 1984\n\nfor filename in os.listdir(\"C:\\\\Directory\"):\n    if filename.endswith(\".nc\"):\n        print(filename)\n        fh = Dataset(\"C:\\\\Directory %s\"\n                     % filename, 'r').variables['matrix']\n        for i in range(0, len(long_obs)):\n            if year[i] == t and start_time_index[i] &gt; 0:\n                LE_t = []\n                for x in range(int(start_time_index[i]), int(end_time_index[i])):\n                    LE_t = np.append(LE_t,float(fh[x][long_obs[i]+180][lat_obs[i]*-1+90])/10)\n                LE[i] = np.mean(LE_t)\n        t += 1\n        continue\n    else:\n        continue \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 2, "creation_date": 1479328352, "post_id": 40641727, "comment_id": 68515531, "body": "Look at the line: <code>students = (input(&quot;Enter Student&#39;s Name Please: &quot;))</code> - you are re-assigning it every time through the loop. You have the same assignment problem with <code>numStudents</code> as well. This would also be a good a time as any to learn to <a href=\"https://pymotw.com/2/pdb/\" rel=\"nofollow noreferrer\">debug python</a>, as from a quick glance there are multiple logic errors that will end up giving you incorrect results."}, {"owner": {"reputation": 2173, "user_id": 1804656, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/47ea159b5819a724a31a95f8dd1fc037?s=128&d=identicon&r=PG", "display_name": "kyle", "link": "https://stackoverflow.com/users/1804656/kyle"}, "edited": false, "score": 1, "creation_date": 1479328436, "post_id": 40641727, "comment_id": 68515591, "body": "You assign <code>winner = students</code>, so look at the value of students, and it is assigned <code>students = (input(&quot;Enter Student&#39;s Name Please: &quot;))</code> you never actually assign correct student resulting in the logic error."}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479328481, "post_id": 40641727, "comment_id": 68515615, "body": "There may be a good question in here, but your question title is inappropriate. Please review <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>."}, {"owner": {"reputation": 145, "user_id": 6389257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af32454b97f1491ac029fe83033d39b?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Paz Sedano", "link": "https://stackoverflow.com/users/6389257/javier-paz-sedano"}, "edited": false, "score": 0, "creation_date": 1479328494, "post_id": 40641727, "comment_id": 68515627, "body": "In this kind of situations, the debugger is your friend. To use pdb, execute <code>python -m pdb yourprogram.py</code>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6780184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0036dbac2f4413ccaf0e6b4513f12ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/6780184/doug"}, "edited": false, "score": 0, "creation_date": 1479329995, "post_id": 40642001, "comment_id": 68516479, "body": "Thank you so much for taking the time to help solve the problem. I tried my best to answer this myself before posting, but I was left with no choice here. Of course, I am a python noob and I am still learning. Your answer was way better than some of the comments above (in fact the comments above discourage people from asking questions). Thanks again!"}, {"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "reply_to_user": {"reputation": 71, "user_id": 6780184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0036dbac2f4413ccaf0e6b4513f12ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/6780184/doug"}, "edited": false, "score": 1, "creation_date": 1479330335, "post_id": 40642001, "comment_id": 68516646, "body": "Sure thing, I thought the zealous downvoting was a little harsh, but SO does have standards to adhere to.  We all were noobs once, IMO a decent question with a vague title is still a decent question.  Regardless, welcome to SO!"}], "tags": [], "owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "is_accepted": true, "score": 1, "last_activity_date": 1479329231, "creation_date": 1479329231, "answer_id": 40642001, "question_id": 40641727, "link": "https://stackoverflow.com/questions/40641727/running-into-some-logical-errors-with-my-code/40642001#40642001", "title": "Running into some logical errors with my code", "body": "<p>You're not far off.  Take a look here:</p>\n\n<pre><code>for i in range (1, numStudents+1):\n    students = (input(\"Enter Student's Name Please: \"))\n    score = (midTerm()+ final())\n    total += score\navg = total/numStudents\nif (highest &lt; avg):\n    highest = avg\n    winner = students\n</code></pre>\n\n<p>Besides the indentation error (hopefully just clumsy copy-pasting)  You're not actually calculating each student's average score anywhere.  Try something like this:</p>\n\n<pre><code>for i in range (numStudents):\n    student_name = (input(\"Enter Student's Name Please: \")) \n    student_avg = (midTerm() + final()) / 2 # 2 scores, summed and divided by 2 is their average score\n    if (highest &lt; student_avg):\n        highest = student_avg\n        winner = student_name  # save student name for later\n\nprint (\"The Student with the higgest average is: \", winner, \"With the highest average of: \", highest)\n</code></pre>\n\n<p>It looks like you were originally trying to calculate the total class average, which is not what's described by the problem statement.  Hope this helps!</p>\n"}], "owner": {"reputation": 71, "user_id": 6780184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0036dbac2f4413ccaf0e6b4513f12ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/6780184/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 40642001, "answer_count": 1, "score": -3, "last_activity_date": 1479330041, "creation_date": 1479328221, "last_edit_date": 1479330041, "question_id": 40641727, "link": "https://stackoverflow.com/questions/40641727/running-into-some-logical-errors-with-my-code", "title": "Running into some logical errors with my code", "body": "<p>I am the given the following problem and asked to write a solution algorithm for it using python. </p>\n\n<p>problem: \nWrite a Python program to determine the student with the highest average.  Each student takes a midterm and a final. The grades should be validated to be between 0 and 100 inclusive. Input each student\u2019s name and grades and calculate the student\u2019s average. Output the name of the student with the best average and their average.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>def midTerm():\n    midtermScore = int(input(\"What is the midterm Score: \"))\n    while (midtermScore &lt;= 0 or midtermScore &gt;= 100):\n        midtermScore = int(input(\"Please enter a number between 0 and 100: \"))\n    return midtermScore\ndef final():\n    finalScore = int(input(\"What is the final Score: \"))\n    while (finalScore &lt; 0 or finalScore &gt; 100):\n        finalScore = int(input(\"Please enter a number between 0 and 100: \"))\n    return finalScore\n\ntotal = 0\nhighest = 0\nnumStudents = int (input(\"How Many Students are there? \"))\nwhile numStudents &lt; 0 or numStudents &gt; 100:\n    numStudents = int (input(\"Please enter a number between 0 and 100? \"))\nfor i in range (1, numStudents+1):\n    students = (input(\"Enter Student's Name Please: \"))\n    score = (midTerm()+ final())\n    total += score\navg = total/numStudents\nif (highest &lt; avg):\n    highest = avg\n    winner = students\nprint (\"The Student with the higgest average is: \", winner, \"With the highest average of: \", avg)\n</code></pre>\n\n<p>The issue I am running into is the last part. The program does not print the name of the person with the highest average, but the name of the person that was entered at the very last. I am very confused on how to go forward from here. Can you please help? Thanks in advance for any help.</p>\n"}, {"tags": ["python", "list", "pandas", "numpy"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1479328223, "post_id": 40641711, "comment_id": 68515447, "body": "Can you post your attempts please?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1479328450, "post_id": 40641711, "comment_id": 68515598, "body": "Seems relevant : <a href=\"http://stackoverflow.com/questions/38619143/\"><code>Convert Python sequence to NumPy array, filling missing values</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1479329504, "post_id": 40641841, "comment_id": 68516215, "body": "<code>maxlen=len(max(a,key=len))</code> looks a little odd.  Any reason to do it this way over <code>maxlen=max(len(sublist) for sublist in a)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479331311, "post_id": 40641841, "comment_id": 68517145, "body": "no, it was just the most complicated one-liner I could think of :). I <i>know</i> I have to avoid <code>filter</code>, <code>map</code> and a lot of complex constructs which are best replaced by listcomps/gencomps most of the time, but I continue doing so...  edited with your alternative."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479331561, "post_id": 40641841, "comment_id": 68517276, "body": "I know what you mean.  I did nothing but functional programming for a few years and sometimes I feel like I&#39;ve come back and am trying to tell everyone that it&#39;s all just shadows on a wall."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1479331847, "post_id": 40641841, "comment_id": 68517430, "body": "very philosophical :) I lost a good answer the other day over those functional artifacts. And in python 3 when you need a list from those you have to explicitly convert it, making it even more complex. That&#39;s decided: I&#39;m stopping :) thanks for getting me out of the cave."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1479335643, "post_id": 40641841, "comment_id": 68519210, "body": "With <code>itertools.zip_longest</code> you don&#39;t need to figure out the max length yourself."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1479336740, "post_id": 40641841, "comment_id": 68519642, "body": "Yes but you have to transpose the data afterwards."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 5, "last_activity_date": 1479331257, "last_edit_date": 1479331257, "creation_date": 1479328650, "answer_id": 40641841, "question_id": 40641711, "link": "https://stackoverflow.com/questions/40641711/python-add-elements-to-lists-within-list-if-missing/40641841#40641841", "title": "Python Add Elements to Lists within List if Missing", "body": "<p>First, compute the maximum length of your elements:</p>\n\n<pre><code>maxlen=len(max(a,key=len))  # max element using sublist len criterion\n</code></pre>\n\n<p>or as Patrick suggested do it using generator comprehension on sublist lengths, probably a tad faster:</p>\n\n<pre><code>maxlen=max(len(sublist) for sublist in a)  # max of all sublist lengths\n</code></pre>\n\n<p>then create a new list with 0 padding:</p>\n\n<pre><code>b = [sl+[0]*(maxlen-len(sl)) for sl in a]  # list comp for padding\n</code></pre>\n\n<p>result with <code>a = [[2,3],[1,2,3],[1]]</code>:</p>\n\n<pre><code>[[2, 3, 0], [1, 2, 3], [1, 0, 0]]\n</code></pre>\n\n<p>Note: could be done in one line but would not be very performant because of the recomputation of maxlen. One-liners are not always the best solution.</p>\n\n<pre><code>b = [sl+[0]*(len(max(a,key=len))-len(sl)) for sl in a]  # not very performant\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "edited": false, "score": 1, "creation_date": 1479330436, "post_id": 40641851, "comment_id": 68516711, "body": "slow... avoid for-loops and most importantly appends :)"}, {"owner": {"reputation": 77, "user_id": 6918086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d5c2f69ab25f12ca8a890112679407?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6918086/eric"}, "reply_to_user": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "edited": false, "score": 2, "creation_date": 1479331556, "post_id": 40641851, "comment_id": 68517270, "body": "@JohnSmith Thank you for pointing that out, I actually wasn&#39;t aware especially regarding appends, that&#39;s good to know :)"}], "tags": [], "owner": {"reputation": 77, "user_id": 6918086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d5c2f69ab25f12ca8a890112679407?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6918086/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1479328685, "creation_date": 1479328685, "answer_id": 40641851, "question_id": 40641711, "link": "https://stackoverflow.com/questions/40641711/python-add-elements-to-lists-within-list-if-missing/40641851#40641851", "title": "Python Add Elements to Lists within List if Missing", "body": "<pre><code>for i in a: \n    while len(i) &lt; 3:\n        i.append(0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1061, "user_id": 4720148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96b17cf333822006d27760b7a7bc2851?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/4720148/john-smith"}, "edited": false, "score": 0, "creation_date": 1479330384, "post_id": 40642273, "comment_id": 68516677, "body": "would be my goto solution"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 5, "last_activity_date": 1479330615, "last_edit_date": 1495535558, "creation_date": 1479330232, "answer_id": 40642273, "question_id": 40641711, "link": "https://stackoverflow.com/questions/40641711/python-add-elements-to-lists-within-list-if-missing/40642273#40642273", "title": "Python Add Elements to Lists within List if Missing", "body": "<p>How about</p>\n\n<pre><code>pd.DataFrame(a).fillna(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/O0YaB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O0YaB.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>to get exactly what you asked for</p>\n\n<pre><code>pd.Series(pd.DataFrame(a).fillna(0).astype(int).values.tolist()).to_frame('column')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/30bj3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/30bj3.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>this is also related to <a href=\"https://stackoverflow.com/q/40569220/2336654\">this question</a> </p>\n\n<p>where you can get much better performance with</p>\n\n<pre><code>def box(v):\n    lens = np.array([len(item) for item in v])\n    mask = lens[:,None] &gt; np.arange(lens.max())\n    out = np.full(mask.shape, 0, dtype=int)\n    out[mask] = np.concatenate(v)\n    return out\n\npd.DataFrame(dict(columns=box(a).tolist()))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/30bj3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/30bj3.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>timing</em></strong><br>\n<a href=\"https://i.stack.imgur.com/PEMat.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PEMat.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 2, "accepted_answer_id": 40642273, "answer_count": 3, "score": 5, "last_activity_date": 1479331257, "creation_date": 1479328171, "last_edit_date": 1479330816, "question_id": 40641711, "link": "https://stackoverflow.com/questions/40641711/python-add-elements-to-lists-within-list-if-missing", "title": "Python Add Elements to Lists within List if Missing", "body": "<p>Given the following list of lists:</p>\n\n<pre><code>a = [[2,3],[1,2,3],[1]]\n</code></pre>\n\n<p>I need each list within a to have the same number of elements.\nFirst, I need to get the longest length of any list in a.\nThen, I need to ensure all lists are at least that long.\nIf not, I want to add a zero (0) to the end until that is true. \nThe desired result is:</p>\n\n<pre><code>b = [[2,3,0],[1,2,3],[1,0,0]]\n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p>P.S. I also need to apply this to a Pandas Data Frame like this one:</p>\n\n<pre><code>import pandas as pd\nb = [[2,3,0],[1,2,3],[1,0,0]]\nf=pd.DataFrame({'column':b})\n</code></pre>\n"}, {"tags": ["python", "sockets", "polling"], "comments": [{"owner": {"reputation": 4287, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "edited": false, "score": 2, "creation_date": 1479328263, "post_id": 40641686, "comment_id": 68515476, "body": "<code>select</code> does not wait for all sockets to be readable, it returns once one of them is readable."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1479328665, "post_id": 40641686, "comment_id": 68515728, "body": "Whatever you do, don&#39;t forget to set the sockets non-blocking if you don&#39;t ever want to block. Every function that you use will be a status reporting function that cannot be used to predict the future. A blocking read <i>can</i> block, no matter what <code>select</code> said."}], "answers": [{"tags": [], "owner": {"reputation": 4287, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1479328511, "creation_date": 1479328511, "answer_id": 40641795, "question_id": 40641686, "link": "https://stackoverflow.com/questions/40641686/how-to-wait-for-any-socket-to-have-data/40641795#40641795", "title": "How to wait for any socket to have data?", "body": "<p>If you are on POSIX, take a look at <code>select.poll</code>:</p>\n\n<pre><code>import socket\nimport select\np = select.poll()\ns1 = socket.socket()\ns2 = socket.socket()\n# call connect on sockets here...\np.register(s1, select.POLLIN)\np.register(s2, select.POLLIN)\np.poll()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479328618, "post_id": 40641819, "comment_id": 68515698, "body": "Just don&#39;t forget to set the sockets non-blocking."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479328663, "post_id": 40641819, "comment_id": 68515726, "body": "The OP wants blocking, since he removes the socket after doing stuff."}, {"owner": {"reputation": 1597, "user_id": 2990266, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e641d91fa38ae987d8a28b158db0ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Aage Torleif", "link": "https://stackoverflow.com/users/2990266/aage-torleif"}, "edited": false, "score": 0, "creation_date": 1479328748, "post_id": 40641819, "comment_id": 68515784, "body": "True, i do want blocking. Also, thanks Daniel, I think I just made a mistake with my attempt I was able to implement exactly what i wanted with select! :)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479328762, "post_id": 40641819, "comment_id": 68515789, "body": "Then why use <code>select</code>? If you want blocking, just call <code>do_stuff</code> on each socket."}, {"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1479329468, "post_id": 40641819, "comment_id": 68516196, "body": "@DavidSchwartz if you do that, your sockets will be dealt with in a strict sequence. Using a selector (select, poll) even with blocking sockets, allows you to react on any of the sockets becoming in readable state"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 0, "creation_date": 1479332757, "post_id": 40641819, "comment_id": 68517875, "body": "@IrmendeJong No, it doesn&#39;t. As soon as one socket blocks, you won&#39;t check any of the others. If you want to ensure a socket operation doesn&#39;t block, you must set the socket non-blocking. This is an extremely common mistake that has caused huge pain many times in the past. It&#39;s equivalent to checking if there&#39;s enough disk space and then assuming that a subsequent write won&#39;t fail. The <code>select</code> function and its analogs are instantaneous status-reporting functions that don&#39;t guarantee that a future operation will not block."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479332809, "post_id": 40641819, "comment_id": 68517900, "body": "(If you think that a read hit from <code>select</code> guarantees that a future read will not block, please explain the contours of that guarantee and what standard you found it in. It cannot be done. And then I can cite specific examples where that assumption failed and caused serious bugs, such as the old Linux inetd denial of service attack. Status-reporting functions like <code>select</code> and <code>stat</code> don&#39;t give future guarantees.)"}, {"owner": {"reputation": 1858, "user_id": 3939512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/151419a72bc96e2b52de539fa524fbc4?s=128&d=identicon&r=PG&f=1", "display_name": "kicken", "link": "https://stackoverflow.com/users/3939512/kicken"}, "edited": false, "score": 0, "creation_date": 1479333570, "post_id": 40641819, "comment_id": 68518275, "body": "<code>select</code> will indicate a socket is readable if only one byte is available.  If you then try and read 10 bytes your read <b>will block</b>.   To avoid this you have to use non-blocking sockets and check how much you&#39;ve read each time."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1858, "user_id": 3939512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/151419a72bc96e2b52de539fa524fbc4?s=128&d=identicon&r=PG&f=1", "display_name": "kicken", "link": "https://stackoverflow.com/users/3939512/kicken"}, "edited": false, "score": 0, "creation_date": 1479333644, "post_id": 40641819, "comment_id": 68518308, "body": "@kicken That&#39;s not true for most protocols. For TCP, for example, a read operation will not block if at least one byte can be read immediately, regardless of how many bytes you try to read. However, your claim that &quot;select will indicate a socket is readable if only one byte is available&quot; is wrong for another reason -- <code>select</code> is protocol neutral and a comment like that only makes sense for some protocols. So that <i>cannot</i> be a property of the <code>select</code> operation."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479333867, "post_id": 40641819, "comment_id": 68518429, "body": "It may seem like I&#39;m nitpicking and these edge cases almost never happen, but the fact is, they <i>do</i> happen and they do cause real bugs and problems. And if you&#39;re going to educate people about what these functions do, you should spend the time and effort to get it exactly right. These functions are specified in standards, so we don&#39;t have to wing it."}, {"owner": {"reputation": 1597, "user_id": 2990266, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e641d91fa38ae987d8a28b158db0ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Aage Torleif", "link": "https://stackoverflow.com/users/2990266/aage-torleif"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1479388023, "post_id": 40641819, "comment_id": 68542416, "body": "@DavidSchwartz Could you cite the standards? I&#39;d like to do it right because if it only appears to work but there is a potential to block on one socket while ten others complete that would be a huge issue."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1597, "user_id": 2990266, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e641d91fa38ae987d8a28b158db0ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Aage Torleif", "link": "https://stackoverflow.com/users/2990266/aage-torleif"}, "edited": false, "score": 0, "creation_date": 1479405592, "post_id": 40641819, "comment_id": 68554871, "body": "@MatUtter Just set the sockets non-blocking and you are assured that they won&#39;t block. That&#39;s what setting the sockets non-blocking does. I&#39;m not sure what you want a citation for exactly. The claim that a read hit on <code>select</code> guarantees that a future <code>read</code> will not block is a claim not found in the standards, and it&#39;s not difficult to construct practical scenarios in which that guarantee fails. Nobody has a citation to a standard where that guarantee can be found because that guarantee is not in the standards."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1597, "user_id": 2990266, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e641d91fa38ae987d8a28b158db0ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Aage Torleif", "link": "https://stackoverflow.com/users/2990266/aage-torleif"}, "edited": false, "score": 0, "creation_date": 1479405677, "post_id": 40641819, "comment_id": 68554918, "body": "@MatUtter <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pselect.html\" rel=\"nofollow noreferrer\">Here</a> is the standard that specifies what <code>select</code> does. You will notice that it&#39;s a status-reporting function, just like <code>stat</code>, that tells you about the past, not the future."}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1479328592, "creation_date": 1479328592, "answer_id": 40641819, "question_id": 40641686, "link": "https://stackoverflow.com/questions/40641686/how-to-wait-for-any-socket-to-have-data/40641819#40641819", "title": "How to wait for any socket to have data?", "body": "<p>You can use <code>select.select</code> for your problem:</p>\n\n<pre><code>sockets = [sock1, sock2, sock3]\nwhile sockets:\n    rlist, _, _ = select.select(sockets, [], [])\n    for sock in rlist:\n        do_stuff(sock)\n        sockets.remove(sock)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "is_accepted": false, "score": 1, "last_activity_date": 1479329329, "creation_date": 1479329329, "answer_id": 40642029, "question_id": 40641686, "link": "https://stackoverflow.com/questions/40641686/how-to-wait-for-any-socket-to-have-data/40642029#40642029", "title": "How to wait for any socket to have data?", "body": "<p>If you're using Python 3.4 or newer there is the <code>selectors</code> module in the standard library. It will use the \"best\" I/O multiplexing implementation that your system offers (select, poll, kqueue...) There's a simple echo server example at the end of the documentation page <a href=\"https://docs.python.org/3/library/selectors.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/selectors.html</a></p>\n\n<p>There's a <a href=\"https://pypi.python.org/pypi/selectors34\" rel=\"nofollow noreferrer\">backport</a> of this for older Python versions available as well.</p>\n"}], "owner": {"reputation": 1597, "user_id": 2990266, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e641d91fa38ae987d8a28b158db0ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Aage Torleif", "link": "https://stackoverflow.com/users/2990266/aage-torleif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 40641819, "answer_count": 3, "score": 0, "last_activity_date": 1479329329, "creation_date": 1479328091, "question_id": 40641686, "link": "https://stackoverflow.com/questions/40641686/how-to-wait-for-any-socket-to-have-data", "title": "How to wait for any socket to have data?", "body": "<p>I'm implementing a socket-client which opens several sockets at the same time. Any socket may have data at a different time and I want to execute code when any socket has data and is readable.</p>\n\n<p>I'm not sure how to implement this, I was looking at <a href=\"https://docs.python.org/2/library/select.html#select.select\" rel=\"nofollow noreferrer\">select.select</a> but it seems to wait for all the sockets to be readable.</p>\n\n<p>I'd like to avoid using multiprocessing to handle data on the sockets, I would like it to be serial in reading from each socket but read when there is data available.</p>\n\n<p>How do I wait for any socket to be readable?</p>\n\n<pre><code># psudo code\n\nsockets = [sock1, sock2, sock3]\n\nwhile True:\n  if len(sockets) == 0:\n    break\n  for sock in sockets:\n    if sock.has_data():\n      do_stuff(sock)\n      sockets.remove(sock)\n  sleep(0.1)\n</code></pre>\n"}, {"tags": ["python", "xml", "xml-parsing"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 1, "creation_date": 1479328116, "post_id": 40641664, "comment_id": 68515384, "body": "you are opening this with an XML parser. XML requires <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code> to be escaped."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 1, "creation_date": 1479328146, "post_id": 40641664, "comment_id": 68515403, "body": "you may want to use an HTML parser instead."}, {"owner": {"reputation": 134, "user_id": 3364446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb6837de9f202195e15a8fbb7f7059fc?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Lee", "link": "https://stackoverflow.com/users/3364446/aleks-lee"}, "reply_to_user": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1480236802, "post_id": 40641664, "comment_id": 68872547, "body": "Thank you! I didn&#39;t think to use not xml parser)"}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1479328603, "creation_date": 1479328603, "answer_id": 40641827, "question_id": 40641664, "link": "https://stackoverflow.com/questions/40641664/xml-etree-elementtree-parseerror-not-well-formed-invalid-token-due-to-sym/40641827#40641827", "title": "xml.etree.ElementTree.ParseError: not well-formed (invalid token) due to &quot;&lt;&quot; symbol in script", "body": "<p><em>You are trying to parse HTML with an XML parser.</em> Use a proper tool, an HTML Parser, instead: <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\"><code>BeautifulSoup</code></a> or <a href=\"http://lxml.de/lxmlhtml.html\" rel=\"nofollow noreferrer\"><code>lxml.html</code></a> are the most popular.</p>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n&gt;&gt;&gt; import urllib.request\n&gt;&gt;&gt; \n&gt;&gt;&gt; url = \"http://rusdrama.com/afisha\"\n&gt;&gt;&gt; response = urllib.request.urlopen(url)\n&gt;&gt;&gt;\n&gt;&gt;&gt; soup = BeautifulSoup(response, \"html.parser\")\n&gt;&gt;&gt; print(soup.title.get_text())\n\u0410\u0444\u0438\u0448\u0430 \u0425\u0430\u0440\u044c\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0443\u0441\u0441\u043a\u043e\u0433\u043e \u0434\u0440\u0430\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0442\u0435\u0430\u0442\u0440\u0430 \u041f\u0443\u0448\u043a\u0438\u043d\u0430\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 3364446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb6837de9f202195e15a8fbb7f7059fc?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Lee", "link": "https://stackoverflow.com/users/3364446/aleks-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 1, "accepted_answer_id": 40641827, "answer_count": 1, "score": 2, "last_activity_date": 1479329465, "creation_date": 1479328009, "question_id": 40641664, "link": "https://stackoverflow.com/questions/40641664/xml-etree-elementtree-parseerror-not-well-formed-invalid-token-due-to-sym", "title": "xml.etree.ElementTree.ParseError: not well-formed (invalid token) due to &quot;&lt;&quot; symbol in script", "body": "<p>I'm trying to parse web page to save some data from it in excel or csv file.</p>\n\n<pre><code>import urllib.request\nimport xml.etree.ElementTree as ET\n\nurl = \"http://rusdrama.com/afisha\"\nresponse = urllib.request.urlopen(url)\ncontent = response.read()\nroot = ET.fromstring(content)\n</code></pre>\n\n<p>When parsing page using fromstring method ElementTree I got the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"D:/PythonProjects/PythonMisc/theater_reader.py\", line 7, in &lt;module&gt;\n    root = ET.fromstring(content)\n  File \"D:\\Python\\Python35\\lib\\xml\\etree\\ElementTree.py\", line 1333, in XML\n    parser.feed(text)\nxml.etree.ElementTree.ParseError: not well-formed (invalid token): line 49, column 14\n</code></pre>\n\n<p>The part of received page is the following:</p>\n\n<pre><code>    &lt;script&gt;\n    jQuery(document).ready(function(){\n    jQuery(window).scroll(function() {\n        var scroll = jQuery(window).scrollTop();\n        if (scroll &gt;= 100) {\n            jQuery(\".t3-header\").addClass(\"solid\");\n        }\n        if (scroll &lt;= 100) {\n            jQuery(\".t3-header\").removeClass(\"solid\");\n        }\n    });\n    })\n&lt;/script&gt;\n</code></pre>\n\n<p>And specifically line 49:</p>\n\n<pre><code>    if (scroll &lt;= 100) {\n</code></pre>\n\n<p>So the problem is in opening angle bracket that seems to be processed as opening tag symbol.\nI saw several similar questions but can't understand how to handle this situation.</p>\n"}, {"tags": ["python", "python-3.x", "object", "dataframe"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 4, "creation_date": 1479328566, "post_id": 40641615, "comment_id": 68515660, "body": "If we&#39;re talking about the call stack, a <a href=\"https://en.wikipedia.org/wiki/Call_stack#STACK-FRAME\" rel=\"nofollow noreferrer\">frame</a> is the thing that contains all of the locally created objects of your most immediate scope. In your screenshot, the whole blue box is one frame, and contains the objects associated to the names <code>l1</code>, <code>l2</code>, and <code>item</code>. You don&#39;t have direct control over the frame; you only have control over objects and their names."}], "answers": [{"comments": [{"owner": {"reputation": 2548, "user_id": 7154924, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f6cd8cb539f1e58daf05f5e6e4f749e2?s=128&d=identicon&r=PG&f=1", "display_name": "flow2k", "link": "https://stackoverflow.com/users/7154924/flow2k"}, "edited": false, "score": 1, "creation_date": 1514544658, "post_id": 40642650, "comment_id": 83011810, "body": "Very instructive answer. Follow-up question: do all objects live on the heap?"}], "tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": true, "score": 21, "last_activity_date": 1479331619, "last_edit_date": 1495535428, "creation_date": 1479331619, "answer_id": 40642650, "question_id": 40641615, "link": "https://stackoverflow.com/questions/40641615/what-is-the-difference-between-a-frame-and-object-and-when-should-i-modify-one/40642650#40642650", "title": "What is the difference between a frame and object, and when should I modify one over the other?", "body": "<p><code>frame</code> and <code>object</code> don't mean what you think they mean.</p>\n\n<p>In programming you have something called a <strong>stack</strong>. In Python, when you call a function you create something called a <strong>stack frame</strong>. This frame is (as you see in your example) basically just a table of all of the variables that are local to your function.</p>\n\n<p>Note that <em>defining</em> a function doesn't create a new stack frame, it's the <em>calling</em> a function. For instance something like this:</p>\n\n<pre><code>def say_hello():\n    name = input('What is your name?')\n    print('Hello, {}'.format(name))\n</code></pre>\n\n<p>Your global frame is just going to hold one reference: <code>say_hello</code>. You can see that by checking out what's in the local namespace (in Python you pretty much have a 1:1 relationship between namespace, scope, and stack frames):</p>\n\n<pre><code>print(locals())\n</code></pre>\n\n<p>You'll see something that looks like this:</p>\n\n<pre><code>{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': &lt;_frozen_importlib_external.SourceFileLoader object at 0x1019bb320&gt;, '__spec__': None, '__annotations__': {}, '__builtins__': &lt;module 'builtins' (built-in)&gt;, '__file__': '/private/tmp/fun.py', '__cached__': None, 'say_hello': &lt;function say_hello at 0x101962d90&gt;}\n</code></pre>\n\n<p>Note the dunder (short for double underscore  double underscore) names - those are automagically provided, and for the purposes of our discussion you can ignore them. That leaves us with:</p>\n\n<pre><code>{'say_hello': &lt;function say_hello at 0x101962d90&gt;}\n</code></pre>\n\n<p>That <code>0x</code> bit is the memory address where the function itself lives. So here, our global stack/frame contains just that one value. If you call your function and then check <code>locals()</code> again, you'll see that <code>name</code> isn't there. That's because when you call the function you create a new stack frame and the variable is assigned there. You can prove this by adding <code>print(locals())</code> at the end of your function. Then you'll see something like this:</p>\n\n<pre><code>{'name': 'Arthur, King of the Brits'}\n</code></pre>\n\n<p>No dunder names here. You'll also note that this doesn't show a memory address. If you want to know where this value lives, there's a function for that.</p>\n\n<pre><code>def say_hello():\n    name = input('What is your name?')\n    print('hello {}'.format(name))\n    print(locals())\n    print(id(name))\n    return name\n\nprint(id(say_hello()))\n</code></pre>\n\n<p>That's what the example means when it's talking about a <strong>frame</strong>.</p>\n\n<p>But what about objects? Well, in Python, <em>everything</em> is an object. Just try it:</p>\n\n<pre><code>&gt;&gt;&gt; isinstance(3, object)\nTrue\n&gt;&gt;&gt; isinstance(None, object)\nTrue\n&gt;&gt;&gt; isinstance('hello', object)\nTrue\n&gt;&gt;&gt; isinstance(13.2, object)\nTrue\n&gt;&gt;&gt; isinstance(3j, object)\nTrue\n&gt;&gt;&gt; def fun():\n...  print('hello')\n... \n&gt;&gt;&gt; isinstance(fun, object)\nTrue\n&gt;&gt;&gt; class Cool: pass\n... \n&gt;&gt;&gt; isinstance(Cool, object)\nTrue\n&gt;&gt;&gt; isinstance(Cool(), object)\nTrue\n&gt;&gt;&gt; isinstance(object, object)\nTrue\n&gt;&gt;&gt; isinstance(isinstance, object)\nTrue\n&gt;&gt;&gt; isinstance(True, object)\nTrue\n</code></pre>\n\n<p>They're <em>all</em> objects. But they may be different objects. And how can you tell? With <code>id</code>:</p>\n\n<pre><code>&gt;&gt;&gt; id(3)\n4297619904\n&gt;&gt;&gt; id(None)\n4297303920\n&gt;&gt;&gt; id('hello')\n4325843048\n&gt;&gt;&gt; id('hello')\n4325843048\n&gt;&gt;&gt; id(13.2)\n4322300216\n&gt;&gt;&gt; id(3j)\n4325518960\n&gt;&gt;&gt; id(13.2)\n4322300216\n&gt;&gt;&gt; id(fun)\n4322635152\n&gt;&gt;&gt; id(isinstance)\n4298988640\n&gt;&gt;&gt; id(True)\n4297228640\n&gt;&gt;&gt; id(False)\n4297228608\n&gt;&gt;&gt; id(None)\n4297303920\n&gt;&gt;&gt; id(Cool)\n4302561896\n</code></pre>\n\n<p>Note that you also can compare whether or not two objects are the <em>same</em> object by using <code>is</code>.</p>\n\n<pre><code>&gt;&gt;&gt; True is False\nFalse\n&gt;&gt;&gt; True is True\nTrue\n&gt;&gt;&gt; 'hello world' is 'hello world'\nTrue\n&gt;&gt;&gt; 'hello world' is ('hello ' + 'world')\nFalse\n&gt;&gt;&gt; 512 is (500+12)\nFalse\n&gt;&gt;&gt; 23 is (20+3)\nTrue\n</code></pre>\n\n<p>Ehhhhh...? Wait a minute, what happened there? Well, as it turns out, <code>python</code>(that is, CPython) <a href=\"https://stackoverflow.com/questions/306313/is-operator-behaves-unexpectedly-with-integers\">caches small integers</a>. So the object <code>512</code> is different from the object that is the result of the object <code>500</code> added to the object <code>12</code>.</p>\n\n<p>One important thing to note is that the assignment operator <code>=</code> <em>always</em> assigns a new name to the <em>same object</em>. For example:</p>\n\n<pre><code>&gt;&gt;&gt; x = 592\n&gt;&gt;&gt; y = 592\n&gt;&gt;&gt; x is y\nFalse\n&gt;&gt;&gt; x == y\nTrue\n&gt;&gt;&gt; x = y\n&gt;&gt;&gt; x is y\nTrue\n&gt;&gt;&gt; x == y\nTrue\n</code></pre>\n\n<p>And it doesn't matter how many other names you give an object, or even if you pass the <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument\">object around to different frames</a>, you still have the same object.</p>\n\n<p>But as you're starting to gather, it's important to understand the difference between operations that <em>change</em> an object and operations that produce a <em>new</em> object. Generally speaking you have a <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"noreferrer\">few immutable types</a> in Python, and operations on them will produce a new object.</p>\n\n<p>As for your question, when do you want to change objects and when do you want to keep them the same is actually looking at it the wrong way. You want to use a mutable type when you want to change things, and you want to use an immutable type if you don't want things to change.</p>\n\n<p>For instance, say you've got a group, and you want to add members to the group. You might use a mutable type like a list to keep track of the group, and an immutable type like strings to represent the members. Like this:</p>\n\n<pre><code>&gt;&gt;&gt; group = []\n&gt;&gt;&gt; id(group)\n4325836488\n&gt;&gt;&gt; group.append('Sir Lancelot')\n&gt;&gt;&gt; group.append('Sir Gallahad')\n&gt;&gt;&gt; group.append('Sir Robin')\n&gt;&gt;&gt; group.append(\"Robin's Minstrels\")\n&gt;&gt;&gt; group.append('King Arthur')\n&gt;&gt;&gt; group\n['Sir Lancelot', 'Sir Gallahad', 'Sir Robin', \"Robin's Minstrels\", 'King Arthur']\n</code></pre>\n\n<p>What happens when a member of the group is eaten?</p>\n\n<pre><code>&gt;&gt;&gt; del group[-2]  # And there was much rejoicing\n&gt;&gt;&gt; id(group)\n4325836488\n&gt;&gt;&gt; group\n['Sir Lancelot', 'Sir Gallahad', 'Sir Robin', 'King Arthur']\n</code></pre>\n\n<p>You'll notice that you still have the same group, just the members have changed.</p>\n"}], "owner": {"reputation": 433, "user_id": 7143036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4fcf9de1bd0dfb57b0230f29f266ca2?s=128&d=identicon&r=PG&f=1", "display_name": "thleo", "link": "https://stackoverflow.com/users/7143036/thleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6317, "favorite_count": 7, "accepted_answer_id": 40642650, "answer_count": 1, "score": 4, "last_activity_date": 1479331619, "creation_date": 1479327802, "last_edit_date": 1495535428, "question_id": 40641615, "link": "https://stackoverflow.com/questions/40641615/what-is-the-difference-between-a-frame-and-object-and-when-should-i-modify-one", "title": "What is the difference between a frame and object, and when should I modify one over the other?", "body": "<p>I started reading about python's += syntax and stumbled onto the following post/answer:\n<a href=\"https://stackoverflow.com/a/13329969/7143036\">Interactive code about +=</a></p>\n\n<p>So what I noticed was that there seems to be a difference between frames and objects.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0YVoy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0YVoy.png\" alt=\"Frames and Objects\"></a></p>\n\n<p>In the global frame, they point to the same object even though they're different variables; if the line</p>\n\n<pre><code>l2 += [item]\n</code></pre>\n\n<p>was instead</p>\n\n<pre><code>l2 = l2 + [item]\n</code></pre>\n\n<p>then 'l2' becomes a separate object when that line runs. My biggest question is when would you want a variable to point to a separate object? Also, why and when would you want to keep them pointed at the same object?</p>\n\n<p>Any explanation or use cases would be greatly appreciated! Extra thanks if you can mention anything relevant to data science :)</p>\n"}]