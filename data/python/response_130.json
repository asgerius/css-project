[{"tags": ["python", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8196770, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zKkW-Clw0G0/AAAAAAAAAAI/AAAAAAAAAj4/FhMfdEvbZyk/photo.jpg?sz=128", "display_name": "Jayakumar M", "link": "https://stackoverflow.com/users/8196770/jayakumar-m"}, "edited": false, "score": 0, "creation_date": 1499365855, "post_id": 44937929, "comment_id": 76888418, "body": "Can you suggest me how to do that? I am trying to figure out."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 8196770, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zKkW-Clw0G0/AAAAAAAAAAI/AAAAAAAAAj4/FhMfdEvbZyk/photo.jpg?sz=128", "display_name": "Jayakumar M", "link": "https://stackoverflow.com/users/8196770/jayakumar-m"}, "edited": false, "score": 0, "creation_date": 1499381116, "post_id": 44937929, "comment_id": 76895389, "body": "What part is giving you trouble?  There are several steps to this, and SO is not a code-writing or tutorial service.  Your code shows that you know how to extract a value from a dictionary entry.  Searching a list for a value is the <code>index</code> method.  <code>Reverse dictionary</code> is a simple browser search."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1499300497, "creation_date": 1499300497, "answer_id": 44937929, "question_id": 44937726, "link": "https://stackoverflow.com/questions/44937726/how-to-match-list-of-dictionaries-to-another-list-of-dictionaries-value-where-ke/44937929#44937929", "title": "how to match list of dictionaries to another list of dictionaries value where key is different?", "body": "<p>It matches per the list index, because that's exactly what you told it to do.  Computers are annoying in this respect.</p>\n\n<p>Don't use the index for choosing the needed <code>listDict2</code> entry.  Instead, fetch the date from <code>listIndex1[i]</code> and search <code>listDict2[&lt;all&gt;]['measurementTime']</code> for that value.  If the lists are large, you might want to build a reverse dictionary of <code>&lt;time stamp&gt; : index</code> to make your work easier.</p>\n\n<p>Does that get you moving?</p>\n"}], "owner": {"reputation": 1, "user_id": 8196770, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zKkW-Clw0G0/AAAAAAAAAAI/AAAAAAAAAj4/FhMfdEvbZyk/photo.jpg?sz=128", "display_name": "Jayakumar M", "link": "https://stackoverflow.com/users/8196770/jayakumar-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 2, "answer_count": 1, "score": -1, "last_activity_date": 1499300497, "creation_date": 1499298869, "last_edit_date": 1499299879, "question_id": 44937726, "link": "https://stackoverflow.com/questions/44937726/how-to-match-list-of-dictionaries-to-another-list-of-dictionaries-value-where-ke", "title": "how to match list of dictionaries to another list of dictionaries value where key is different?", "body": "<p>I have an issue where matching two list of dictionaries. Below the code i tried to match.</p>\n\n<pre><code>listDict1= [\n    '{\"weightMax\":150, \"weightMin\":100, \"date\":\"2017-07-05 12:16:06\"}',\n    '{\"weightMax\":150, \"weightMin\":100, \"date\":\"2017-07-05 12:17:06\"}',\n    '{\"weightMax\":0, \"weightMin\":0, \"date\":\"0\"}']\n\nlistDict2= [\n    '{\"Weight\":\"138.0\",\"unit\":\"Kg\",\n      \"measurementTime\":\"2017-07-05 12:15:06\",\n      \"receiptTime\":\"2017-06-30T15:16:09.009-07:00\",\n      \"date\":1498860969000,\"model\":\"2011\",\n      \"manufacturer\":\"CONTINUA\",\"serialnumber\":\"SN_WEIGHT082\"}',\n    '{\"Weight\":\"138.0\",\"unit\":\"Kg\",\n      \"measurementTime\":\"2017-07-05 12:16:06\",\n      \"receiptTime\":\"2017-06-30T15:16:09.009-07:00\",\n      \"date\":1498860969000,\"model\":\"2011\",\n      \"manufacturer\":\"CONTINUA\",\"serialnumber\":\"SN_WEIGHT082\"}',\n    '{\"Weight\":\"188.0\",\"unit\":\"Kg\",\n      \"measurementTime\":\"2017-07-05 12:17:06\",\n      \"receiptTime\":\"2017-06-30T15:16:09.009-07:00\",\n      \"date\":1498860969000,\"model\":\"2011\",\n      \"manufacturer\":\"CONTINUA\",\"serialnumber\":\"SN_WEIGHT082\"}']\n</code></pre>\n\n<p>I need to match listDict1['date'] value with listDict2['measurementTime'] </p>\n\n<p>I tried the code below, but it matches as per the list index</p>\n\n<pre><code>def matchValValues(listDict1, listDict2):\n    val1 = []\n    rpm = []\n\n\n    for i in range(len(listDict1)):\n        j = dict((k, v) for k, v in ast.literal_eval(listDict1[i]).iteritems())\n        k = dict((k, v) for k, v in ast.literal_eval(listDict2[i]).iteritems())\n        #for i in j.keys():\n        val = j['date']\n        we = k['measurementTime']\n        if val in we :\n            val2 = float(k['Weight'])\n            max=  float(j['weightMax'])\n            min = float(j['weightMin'])\n            print \"True\"\n            if val2 &lt;= max and val2 &gt;= min:\n                print \"pass\"\n                val1.append(str(j['weightMax'])+'|'+str(j['weightMin']))\n                rpm.append(k['Weight'])\n            else:\n                val1.append(j.copy())\n                rpm.append(k.copy())\n        else:\n            val1.append(j.copy())\n            rpm.append(k.copy())\n    print val1  \n    print rpm\n</code></pre>\n\n<p>expected output:\nif there is a match append only weight and measurementTime value in rpm\nif there is a match append only weightmax, weightmin and date value in val1\nelse append whole unmatched dict in rpm and val1 corresponding.</p>\n\n<p>current output:</p>\n\n<pre><code>[{'date': '2017-07-05 12:16:06', 'weightMax': 150, 'weightMin': 100},\n {'date': '2017-07-05 12:17:06', 'weightMax': 150, 'weightMin': 100},\n {'date': '0', 'weightMax': 0, 'weightMin': 0}]\n\n[{'Weight': '138.0', 'measurementTime': '2017-07-05 12:15:06',\n  'serialnumber': 'SN_WEIGHT082', 'date': 1498860969000L,\n  'model': '2011', 'receiptTime': '2017-06-30T15:16:09.009-07:00',\n  'unit': 'Kg', 'manufacturer': 'CONTINUA'},\n {'Weight': '138.0', 'measurementTime': '2017-07-05 12:15:06',\n  'serialnumber': 'SN_WEIGHT082', 'date': 1498860969000L,\n  'model': '2011', 'receiptTime': '2017-06-30T15:16:09.009-07:00',\n  'unit': 'Kg', 'manufacturer': 'CONTINUA'},\n {'Weight': '188.0', 'measurementTime': '2017-07-05 12:16:06',\n  'serialnumber': 'SN_WEIGHT082', 'date': 1498860969000L,\n  'model': '2011', 'receiptTime': '2017-06-30T15:16:09.009-07:00',\n  'unit': 'Kg', 'manufacturer': 'CONTINUA'}]\n</code></pre>\n"}, {"tags": ["python", "nagios", "check-mk"], "answers": [{"tags": [], "owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "is_accepted": false, "score": 0, "last_activity_date": 1499368326, "last_edit_date": 1499368326, "creation_date": 1499366594, "answer_id": 44956660, "question_id": 44937705, "link": "https://stackoverflow.com/questions/44937705/how-to-write-check-mk-manual-checks/44956660#44956660", "title": "How to write check_mk manual checks", "body": "<p>First of all I'm assuming the node you want to check is MS Windows based, in which case I cannot help you much because my expertise is about UNIX and Linux.</p>\n\n<p>This <a href=\"http://mathias-kettner.com/checkmk_windows.html\" rel=\"nofollow noreferrer\">web link</a> will help you to check your Windows based nodes, especially the paragrah <code>10. Extending the Windows agent</code>.</p>\n\n<p>In Linux, once the check_mk_agent is installed, there are three ways according to how deep you want to get into the check_mk guts. In Windows I think there are the same methods.</p>\n\n<ol>\n<li><p>As a local service: you copy your python code into the <code>local</code> folder, whatever it is located in Windows, and edits the <code>[global]</code> section of the <code>check_mk.ini</code> configuration file to make run the <code>py</code> and <code>pyc</code> file name extensions.</p></li>\n<li><p>As a MRPE check: you make your python program print its output according to the <a href=\"https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/3/en/pluginapi.html\" rel=\"nofollow noreferrer\">Nagios output check format</a> and edit the <code>[mrpe]</code> section of the <code>check_ini</code> configuration file according to <a href=\"http://mathias-kettner.com/checkmk_windows.html\" rel=\"nofollow noreferrer\">the notes in the paragraph 10.2</a>. As a disadvantage, the WARNING and CRITICAL values/ranges are fixed in the <code>check_ini</code> file -- they cannot be changed in WATO.</p></li>\n<li><p>As a check_mk agent: you turn your python program into a <strong>check_mk agent</strong>. I think this is the most difficult way because each check_mk agent has to have a counterpart definition/declaration/inventory file in the check_mk server in order to be used in WATO and to configure its parameters. I never wrote down one, but if you are keen on, you should read <a href=\"http://mathias-kettner.com/checkmk_devel_agentbased.html\" rel=\"nofollow noreferrer\">this guidelines</a>.</p></li>\n</ol>\n\n<p>Best regards.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8796391"}, "is_accepted": false, "score": 0, "last_activity_date": 1552558131, "creation_date": 1552558131, "answer_id": 55159780, "question_id": 44937705, "link": "https://stackoverflow.com/questions/44937705/how-to-write-check-mk-manual-checks/55159780#55159780", "title": "How to write check_mk manual checks", "body": "<p>If you want to execute such script you just need to put it (with the correct rights, chmod +755) in the ~/local/lib/nagios/plugins directory. </p>\n\n<p>Then you have to create a rule from the \"host and services parameters -> active checks -> Classical active &amp; passive checks\" </p>\n\n<p>Once done, you need to enter the command line \"python ~/local/lib/nagios/plugins/nameofyourscript.py\" </p>\n\n<p>I am not sure about the output though, still working on it for python scripts.</p>\n"}], "owner": {"reputation": 257, "user_id": 5785886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83d2f478c0baae65087ae7a7c5de68ca?s=128&d=identicon&r=PG&f=1", "display_name": "Dheeraj", "link": "https://stackoverflow.com/users/5785886/dheeraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1342, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552558131, "creation_date": 1499298707, "question_id": 44937705, "link": "https://stackoverflow.com/questions/44937705/how-to-write-check-mk-manual-checks", "title": "How to write check_mk manual checks", "body": "<p>I have a python scripts which checks for the processes \n    import subprocess</p>\n\n<pre><code>s = subprocess.check_output('tasklist', shell=True)\nif \"cmd.exe\" in s:\n    if \"java.exe\" not in str(s):\n        print \"selenium server is not up\"  \n    if \"FreeSSHDService.exe\" not in str(s):\n        print \"SSH is not up\"\n    else:\n        print \"Everything is awesome\"\n</code></pre>\n\n<p>I want to add a check on check_mk dashboard, what are the steps to add this check and where I have to up this script.</p>\n\n<pre><code>import subprocess\n\ns = subprocess.check_output('tasklist', shell=True)\nif \"cmd.exe\" in s:\n    if \"java.exe\" not in str(s):\n       return 2, \"selenium server is not up\") \n    if \"FreeSSHDService.exe\" not in str(s):\n       return 2, \"SSH is not  up\"\n    else:\n        return 0, \"Everything is awesome\"\n</code></pre>\n"}, {"tags": ["python", "macos", "lightgbm"], "answers": [{"comments": [{"owner": {"reputation": 5399, "user_id": 360853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/995c48bb7b81d0aa3c6b804284a6c722?s=128&d=identicon&r=PG", "display_name": "ecodan", "link": "https://stackoverflow.com/users/360853/ecodan"}, "edited": false, "score": 4, "creation_date": 1507806447, "post_id": 44967912, "comment_id": 80362447, "body": "FWIW, my HighSierra Mac prefers AppleCLang over GCC, so I had to force the path as such:  cmake -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/gcc-6 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/g++-6 .."}, {"owner": {"reputation": 4825, "user_id": 1899010, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/6d8b9b48d0b008273eb8b21417d0e19d?s=128&d=identicon&r=PG", "display_name": "HHH", "link": "https://stackoverflow.com/users/1899010/hhh"}, "edited": false, "score": 1, "creation_date": 1512177876, "post_id": 44967912, "comment_id": 82166084, "body": "can I do pip install lightgbm? I did that I got the same error message that the library doesn&#39;t load."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 1, "creation_date": 1532197007, "post_id": 44967912, "comment_id": 89887092, "body": "The folder name is python-package (without the s) (in LightGBM version 2.1.2)"}], "tags": [], "owner": {"reputation": 546, "user_id": 7990199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f27c2c679002cbc6a22ee5cdd9ff36?s=128&d=identicon&r=PG&f=1", "display_name": "demianzhang", "link": "https://stackoverflow.com/users/7990199/demianzhang"}, "is_accepted": true, "score": 13, "last_activity_date": 1525813859, "last_edit_date": 1525813859, "creation_date": 1499421436, "answer_id": 44967912, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/44967912#44967912", "title": "Lightgbm OSError, Library not loaded", "body": "\n\n<p>I find a similar problem here <a href=\"https://stackoverflow.com/questions/44506921/unable-to-import-lightgbm-after-install\">LightGBM</a><br>\nThe answer and comment may help you.  </p>\n\n<p>Build LightGBM in Mac:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>brew install cmake  \nbrew install gcc --without-multilib  \ngit clone --recursive https://github.com/Microsoft/LightGBM ; cd LightGBM  \nmkdir build ; cd build  \ncmake ..   \nmake -j  \n</code></pre>\n\n<p>Then install:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>cd ../python-packages  \nsudo python setup.py install --precompile\n</code></pre>\n\n<p>As stated by @ecodan, you might need to force Mac to use GCC and G++ instead of the default compiler. So instead of building with <code>cmake ..</code>, try:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>cmake -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/gcc-6 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/g++-6 ..\n</code></pre>\n\n<p>ajusting the versions to match yours.</p>\n"}, {"comments": [{"owner": {"reputation": 289, "user_id": 4250159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/851c3033aaefd1d34a4b67bd879f27aa?s=128&d=identicon&r=PG&f=1", "display_name": "Yukun", "link": "https://stackoverflow.com/users/4250159/yukun"}, "edited": false, "score": 0, "creation_date": 1518069792, "post_id": 46064150, "comment_id": 84354602, "body": "Yep, had the same problem. Check out <a href=\"https://github.com/Microsoft/LightGBM/blob/master/docs/Installation-Guide.rst#macos\" rel=\"nofollow noreferrer\">github.com/Microsoft/LightGBM/blob/master/docs/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4415, "user_id": 832188, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b0380e2f3955f88f8fda269dfcfcf97?s=128&d=identicon&r=PG", "display_name": "Emre", "link": "https://stackoverflow.com/users/832188/emre"}, "is_accepted": false, "score": 1, "last_activity_date": 1507807200, "last_edit_date": 1507807200, "creation_date": 1504650304, "answer_id": 46064150, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/46064150#46064150", "title": "Lightgbm OSError, Library not loaded", "body": "<p>For users with macports, replace the beginning of the brew solution with:</p>\n\n<ol>\n<li><code>port install gcc7 cmake</code></li>\n<li><code>export CXX=g++-mp-7 CC=gcc-mp-7</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1295, "user_id": 1093448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bf993dcf4ae027577fa9d0612021d84a?s=128&d=identicon&r=PG", "display_name": "Vladislavs Dovgalecs", "link": "https://stackoverflow.com/users/1093448/vladislavs-dovgalecs"}, "is_accepted": false, "score": 1, "last_activity_date": 1518140419, "creation_date": 1518140419, "answer_id": 48697514, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/48697514#48697514", "title": "Lightgbm OSError, Library not loaded", "body": "<p>On MacOS High Sierra with MacPorts installed, I did the following:</p>\n\n<ol>\n<li>Install <code>clang-5.0</code> using MacPorts</li>\n<li>Inside the <code>/build</code> directory, run\n<code>cmake -DCMAKE_CXX_COMPILER=clang++-mp-5.0 -DCMAKE_C_COMPILER=clang-mp-5.0 ..</code></li>\n<li>To build the python package, go to <code>/python_package</code> directory and modify the <code>setup.py</code> script.\nYou need to modify the function <code>compile_cpp()</code> at the very end that checks the case for other OS (including Mac). Before the <code>silent_call(...)</code>, add the following two lines:\n<code>\ncmake_cmd.append(\"-DCMAKE_CXX_COMPILER=clang++-mp-5.0\")\ncmake_cmd.append(\"-DCMAKE_C_COMPILER=clang-mp-5.0\")\n</code></li>\n<li>Run <code>sudo python setup.py install</code>. Enjoy</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 5456760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTRSk.jpg?s=128&g=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/5456760/khaled"}, "is_accepted": false, "score": 3, "last_activity_date": 1524601068, "creation_date": 1524601068, "answer_id": 50010139, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/50010139#50010139", "title": "Lightgbm OSError, Library not loaded", "body": "<p>On MAC you need to install open-mpi:</p>\n\n<pre><code>brew install open-mpi\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4459, "user_id": 4373432, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70d76d466a16af48cca9972a3a2c8017?s=128&d=identicon&r=PG&f=1", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/4373432/happycoding"}, "edited": false, "score": 0, "creation_date": 1529421178, "post_id": 50276387, "comment_id": 88862284, "body": "hi I met exactly the same problem and use gcc8. I&#39;d like to try out your suggestion. However, <code>brew switch gcc 7.3.0_1</code> does not work as it doesn&#39;t have this version installed. Do you know how to install this version?"}, {"owner": {"reputation": 786, "user_id": 9444831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSuqu.png?s=128&g=1", "display_name": "MJeremy", "link": "https://stackoverflow.com/users/9444831/mjeremy"}, "edited": false, "score": 0, "creation_date": 1539491579, "post_id": 50276387, "comment_id": 92518313, "body": "How to <code>install gcc 7</code> while keep <code>gcc 8</code>"}], "tags": [], "owner": {"reputation": 318, "user_id": 1651817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb5d508cf2177f5091d835b0e8108e7?s=128&d=identicon&r=PG", "display_name": "Benoit R", "link": "https://stackoverflow.com/users/1651817/benoit-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1525965915, "creation_date": 1525965915, "answer_id": 50276387, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/50276387#50276387", "title": "Lightgbm OSError, Library not loaded", "body": "<p>Same error, different source: seems like I had the <strong>gcc 8</strong> version installed, and it needs gcc 7.</p>\n\n<p>It worked by switching it back to last gcc 7 version:</p>\n\n<pre><code>brew switch gcc 7.3.0_1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 8501949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e76fbba4a75b6d17b3ea01efb6978003?s=128&d=identicon&r=PG&f=1", "display_name": "Angela Roux", "link": "https://stackoverflow.com/users/8501949/angela-roux"}, "edited": false, "score": 1, "creation_date": 1556938197, "post_id": 55958281, "comment_id": 98608127, "body": "This worked for me. Thanks. The above stuff didn&#39;t work!"}, {"owner": {"reputation": 131, "user_id": 2392794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e9381300e75b9f32a5834c58f89b25ab?s=128&d=identicon&r=PG", "display_name": "daze", "link": "https://stackoverflow.com/users/2392794/daze"}, "edited": false, "score": 2, "creation_date": 1582149484, "post_id": 55958281, "comment_id": 106682726, "body": "This should be the updated answer. I didn&#39;t need any of the steps stated in the accepted answer."}, {"owner": {"reputation": 85, "user_id": 2001480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c3950f8a5d5146b0fc1ce0fec61ef2f?s=128&d=identicon&r=PG", "display_name": "kannandreams", "link": "https://stackoverflow.com/users/2001480/kannandreams"}, "edited": false, "score": 1, "creation_date": 1611732795, "post_id": 55958281, "comment_id": 116542161, "body": "Works for me as well. simple solution."}], "tags": [], "owner": {"reputation": 3305, "user_id": 4873295, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GTi0A.jpg?s=128&g=1", "display_name": "ShellZero", "link": "https://stackoverflow.com/users/4873295/shellzero"}, "is_accepted": false, "score": 39, "last_activity_date": 1556821949, "creation_date": 1556821949, "answer_id": 55958281, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/55958281#55958281", "title": "Lightgbm OSError, Library not loaded", "body": "<p>All the above answers didn't work for me.\nOn Mac, if I installed the libomp using brew fixed the problem: Refer: <a href=\"https://medium.com/@naramsciot/installing-lightgbm-in-macos-mojave-issue-sorted-4f2b81d27a8f\" rel=\"noreferrer\">link</a> <br> </p>\n\n<pre><code>brew install libomp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 3813416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qo9kC.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3813416/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1586699963, "creation_date": 1586699963, "answer_id": 61172592, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded/61172592#61172592", "title": "Lightgbm OSError, Library not loaded", "body": "<p>I used this command generated from PyCharm and it worked for me.  </p>\n\n<p><strong>conda install -p { &lt; =replace with USER_HOME_DIR>}/anaconda3 lightgbm -y</strong></p>\n\n<p>Note : i tried Brew and pip install but they didn't work for me as Azure ML studio already downloaded other versions of LightGBM that were causing conflict in upgrading to correct packages. </p>\n"}], "owner": {"reputation": 2201, "user_id": 1558119, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a51f3c9095a351322eceb97aba6279ae?s=128&d=identicon&r=PG", "display_name": "LampShade", "link": "https://stackoverflow.com/users/1558119/lampshade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11091, "favorite_count": 3, "accepted_answer_id": 44967912, "answer_count": 7, "score": 16, "last_activity_date": 1586699963, "creation_date": 1499298664, "question_id": 44937698, "link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded", "title": "Lightgbm OSError, Library not loaded", "body": "<p>If I simply do:</p>\n\n<pre><code>import lightgbm as lgb\n</code></pre>\n\n<p>I'm getting</p>\n\n<pre><code>python script.py \nTraceback (most recent call last):\nFile \"script.py\", line 4, in &lt;module&gt;\nimport lightgbm as lgb\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/__init__.py\", line 8, in &lt;module&gt;\nfrom .basic import Booster, Dataset\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/basic.py\", line 31, in &lt;module&gt;\n_LIB = _load_lib()\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/basic.py\", line 26, in _load_lib\nlib = ctypes.cdll.LoadLibrary(lib_path[0])\nFile \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py\", line 440, in LoadLibrary\nreturn self._dlltype(name)\nFile \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py\", line 362, in __init__\nself._handle = _dlopen(self._name, mode)\nOSError: dlopen(/usr/local/lib/python2.7/site-packages/lightgbm/lib_lightgbm.so, 6): Library not loaded: /usr/local/opt/gcc/lib/gcc/7/libgomp.1.dylib\nReferenced from: /usr/local/lib/python2.7/site-packages/lightgbm/lib_lightgbm.so\nReason: image not found\n</code></pre>\n\n<p>I seem to have everything installed correct:</p>\n\n<pre><code>python -m pip install lightgbm\nRequirement already satisfied: lightgbm in /usr/local/lib/python2.7/site-packages\nRequirement already satisfied: wheel in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: scikit-learn in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: scipy in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: numpy in /usr/local/lib/python2.7/site-packages (from lightgbm)\n</code></pre>\n\n<p>I do have a 6 folder in my GCC folder.  Should I need to install another version of GCC for this to work?  </p>\n\n<p><a href=\"https://i.stack.imgur.com/Wl9Ld.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Wl9Ld.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "windows", "bash"], "answers": [{"tags": [], "owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 7, "last_activity_date": 1499298515, "creation_date": 1499298515, "answer_id": 44937675, "question_id": 44937658, "link": "https://stackoverflow.com/questions/44937658/python-typeerror-while-using-os-environ-get/44937675#44937675", "title": "Python: TypeError while using os.environ.get", "body": "<p><code>get()</code> is a method on the <code>environ</code> object; use parentheses instead of brackets:</p>\n\n<pre><code>print os.environ.get('HOME')\n</code></pre>\n\n<p>or brackets without <code>get</code>, which <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__getitem__\" rel=\"noreferrer\">implicitly calls <code>__getitem__()</code></a>:</p>\n\n<pre><code>print os.environ['HOME']\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7045148, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6665b4e391583207445d4ecdfe960fa6?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousTechie", "link": "https://stackoverflow.com/users/7045148/curioustechie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2993, "favorite_count": 0, "accepted_answer_id": 44937675, "answer_count": 1, "score": 2, "last_activity_date": 1499298515, "creation_date": 1499298386, "question_id": 44937658, "link": "https://stackoverflow.com/questions/44937658/python-typeerror-while-using-os-environ-get", "title": "Python: TypeError while using os.environ.get", "body": "<p>I want to access a shell environment variable in my python script.\nI am trying this </p>\n\n<pre><code>import os\nprint os.environ.get[\"HOME\"]\n</code></pre>\n\n<p>I get this error when I am executing in python \n(I am getting the same error in bash also)</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\sraparim\\Desktop\\GitHub issues\\issue #1187\\test.py\", line 54, in &lt;module&gt;\n    print os.environ.get[\"HOME\"]\nTypeError: 'instancemethod' object has no attribute '__getitem__'\n[Finished in 0.2s with exit code 1]\n[shell_cmd: python -u \"C:\\Users\\sraparim\\Desktop\\GitHub issues\\issue #1187\\test.py\"]\n[dir: C:\\Users\\sraparim\\Desktop\\GitHub issues\\issue #1187]\n[path: C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\WebEx\\Productivity Tools;C:\\Program Files (x86)\\Cisco\\OSD-ShellApplications;C:\\Program Files (x86)\\Sennheiser\\SoftphoneSDK\\;C:\\Program Files\\PuTTY\\;C:\\Python27\\Scripts;C:\\Python27;C:\\Python27]\n</code></pre>\n\n<p>Please help...</p>\n"}, {"tags": ["python", "python-2.7", "syntax"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1499299653, "post_id": 44937637, "comment_id": 76851944, "body": "<code>print</code> in Python 2 is not a function, so even if you <i>could</i> somehow bind a Python 2 function and use it in Python 3, that wouldn&#39;t help."}], "answers": [{"tags": [], "owner": {"reputation": 1636, "user_id": 5424833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2198b92f31ea537e71189423aee16b3?s=128&d=identicon&r=PG&f=1", "display_name": "Software2", "link": "https://stackoverflow.com/users/5424833/software2"}, "is_accepted": false, "score": 0, "last_activity_date": 1499298693, "creation_date": 1499298693, "answer_id": 44937702, "question_id": 44937637, "link": "https://stackoverflow.com/questions/44937637/can-i-import-and-bind-python-2-7s-function-to-another-function-in-python-3-x/44937702#44937702", "title": "Can I import and bind python-2.7&#39;s function to another function in python-3.x?", "body": "<p>The real solution is to configure your IDE, rather than try and hack your way around those configuration problems. </p>\n\n<p>That said, the Python 2 <code>print</code> statement with a space and no parenthesis does not exist in Python 3. While you can find ways to use the function from Python 2, the syntax cannot be used.</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1499301517, "post_id": 44937830, "comment_id": 76852362, "body": "You would have to write <code>def funcName(arg): return anotherFunc(arg)</code>, although it&#39;s much simpler (and more efficient) to just write <code>funcName = anotherFunc</code>, since functions are first-class objects."}], "tags": [], "owner": {"reputation": 1062, "user_id": 6723642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/O4s3s.jpg?s=128&g=1", "display_name": "heather", "link": "https://stackoverflow.com/users/6723642/heather"}, "is_accepted": false, "score": 0, "last_activity_date": 1499302541, "last_edit_date": 1499302541, "creation_date": 1499299714, "answer_id": 44937830, "question_id": 44937637, "link": "https://stackoverflow.com/questions/44937637/can-i-import-and-bind-python-2-7s-function-to-another-function-in-python-3-x/44937830#44937830", "title": "Can I import and bind python-2.7&#39;s function to another function in python-3.x?", "body": "<p>If your real problem is with the parentheses in <code>print()</code> for python 3, then no, as far as I know there's not really a solution. If it's a different function, you could always do</p>\n\n<pre><code>def funcName(arg):\n    return anotherFunc(arg)\n</code></pre>\n\n<p>or as chepner comments</p>\n\n<pre><code>funcName = anotherFunc\n</code></pre>\n\n<p>effectively renaming <code>anotherFunc()</code>.</p>\n\n<p>As for your IDE specific issues, there's probably a way to turn off the automatic parentheses (or you could just use the arrow keys  on your keyboard) and the more you use the parentheses, the faster you'll get using them, which is probably a good thing, as they're used in basically every function you'll ever use.</p>\n\n<p>Finally, it's best not to force a language to do a specific thing that it doesn't really provide for. You don't use GOTOs in Python - they're not built in for a reason. You can write them using other methods. You use parentheses in python 3 - don't try to change that! There's another reason not to alter a language in the way you're describing - it decreases the readability of your code. Everyone will know what you mean when you write</p>\n\n<pre><code>''.join(something)\n</code></pre>\n\n<p>but not when you write</p>\n\n<pre><code>randomFuncName(something)\n</code></pre>\n\n<p>and then in some obscure spot you have a function like the one described above that renames <code>''.join</code>.</p>\n"}], "owner": {"reputation": 149, "user_id": 8255562, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2guDV.jpg?s=128&g=1", "display_name": "Courtney Kristensen", "link": "https://stackoverflow.com/users/8255562/courtney-kristensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499378238, "creation_date": 1499298264, "question_id": 44937637, "link": "https://stackoverflow.com/questions/44937637/can-i-import-and-bind-python-2-7s-function-to-another-function-in-python-3-x", "title": "Can I import and bind python-2.7&#39;s function to another function in python-3.x?", "body": "<p>Some python-2.7 and python-3.x functions have the same name, but perform differently. Can I import use a py2.7 function in python-3.x one, by changing its name?</p>\n\n<p>The motivating example is python-2.7's \"print\", i.e. <code>print \"TEXT\"</code> which does not use without parenthesis, compared to <code>print(\"TEXT\")</code> in python 3. Can I keep the python 2 \"print\" by binding it to something like <code>pr</code>?</p>\n\n<p><em>(By the way, the issue for me is typing and escaping the brackets. The keys <code>(</code> and <code>)</code> are harder to press than a space bar. Also, because my IDE puts them in automatically, I then need to move my cursor out of it.)</em></p>\n\n<blockquote>\n  <p>Note: I asked this previously, yet has been wrongly marked as a duplicate. \n   Again, to be clear, I'm specifically asking if I can bind a python 2 function to a new name in order to use its functionality in python-3.x.</p>\n  \n  <p><a href=\"https://stackoverflow.com/questions/44914032/can-i-bind-python-2-7s-print-in-python-3-x-allowing-me-to-use-print-withou\">Can I bind python-2.7&#39;s `print` in python-3.x, allowing me to use `print` without parenthesis in python-3.x?</a></p>\n  \n  <p>I do not know how to contact moderators via internal message or correct this wrongful flag.</p>\n</blockquote>\n"}, {"tags": ["python", "tensorflow", "tensor", "rnn"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 1261726, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/26232eeca51d06d6a9bbbe8a9f936b6d?s=128&d=identicon&r=PG", "display_name": "alan turing", "link": "https://stackoverflow.com/users/1261726/alan-turing"}, "edited": false, "score": 0, "creation_date": 1499355612, "post_id": 44938155, "comment_id": 76881993, "body": "Thank you, it solved the problem, but syntax is like following: for i in range(inputs.get_shape()[0])"}], "tags": [], "owner": {"reputation": 36, "user_id": 8251737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f40c5324bec2006e7438f8376a628f3?s=128&d=identicon&r=PG&f=1", "display_name": "ycd", "link": "https://stackoverflow.com/users/8251737/ycd"}, "is_accepted": true, "score": 0, "last_activity_date": 1499303383, "last_edit_date": 1499303383, "creation_date": 1499302444, "answer_id": 44938155, "question_id": 44937626, "link": "https://stackoverflow.com/questions/44937626/tensorflow-recurrent-neural-network-batch-training/44938155#44938155", "title": "Tensorflow: Recurrent Neural Network Batch Training", "body": "<p>The problem may fall in the size of the ys, ys should have the size of  [32, 48, 145], but the output ys only have the size of [48,145], so if the batchsize is 1, the taget size is [1, 48, 145], which just have the same size of [48,145] after dimensionality reduction.</p>\n\n<p>To solve the problem you can add a loop to deal with the batchsize ( inputs[0] ) :</p>\n\n<p>such as :</p>\n\n<pre><code>for i in range(inputs.getshape(0)):\n   for t, xs_t in enumerate(tf.split(inputs[i], self.seq_length, axis=0)):\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 1261726, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/26232eeca51d06d6a9bbbe8a9f936b6d?s=128&d=identicon&r=PG", "display_name": "alan turing", "link": "https://stackoverflow.com/users/1261726/alan-turing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 1, "accepted_answer_id": 44938155, "answer_count": 1, "score": 2, "last_activity_date": 1499303383, "creation_date": 1499298169, "question_id": 44937626, "link": "https://stackoverflow.com/questions/44937626/tensorflow-recurrent-neural-network-batch-training", "title": "Tensorflow: Recurrent Neural Network Batch Training", "body": "<p>I am trying to implement RNN in Tensorflow. I am writing my own functions instead of using RNN cells to practice. </p>\n\n<p>The problem is sequence tagging, input size is [32, 48, 900] where 32 is batch size, 48 is time steps and 900 is vocab size which is one-hot encoded vector. Output is [32, 48, 145] where first two dimensions are same as input, but the last dimension is output vocabulary size (one-hot). Basically this is a NLP tagging problem.</p>\n\n<p>I am getting following error: </p>\n\n<blockquote>\n  <p>InvalidArgumentError (see above for traceback): logits and labels must\n  be same size: logits_size=[48,145] labels_size=[1536,145]</p>\n</blockquote>\n\n<p>The actual labels_size is [32, 48, 145] but it merges first two dimensions without my control. FYI 32*48 = 1536</p>\n\n<p>If I run my RNN with batch size 1, it works fine as expected. I could not figure out how to solve the issue. I am getting the problem in the last line of the code.</p>\n\n<p>I pasted the related part of the code:</p>\n\n<pre><code>    inputs = tf.placeholder(shape=[None, self.seq_length, self.vocab_size], dtype=tf.float32, name=\"inputs\")\n    targets = tf.placeholder(shape=[None, self.seq_length, self.output_vocab_size], dtype=tf.float32, name=\"targets\")\n    init_state = tf.placeholder(shape=[1, self.hidden_size], dtype=tf.float32, name=\"state\")\n\n    initializer = tf.random_normal_initializer(stddev=0.1)\n\n    with tf.variable_scope(\"RNN\") as scope:\n        hs_t = init_state\n        ys = []\n        for t, xs_t in enumerate(tf.split(inputs[0], self.seq_length, axis=0)):\n            if t &gt; 0: scope.reuse_variables()\n            Wxh = tf.get_variable(\"Wxh\", [self.vocab_size, self.hidden_size], initializer=initializer)\n            Whh = tf.get_variable(\"Whh\", [self.hidden_size, self.hidden_size], initializer=initializer)\n            Why = tf.get_variable(\"Why\", [self.hidden_size, self.output_vocab_size], initializer=initializer)\n            bh = tf.get_variable(\"bh\", [self.hidden_size], initializer=initializer)\n            by = tf.get_variable(\"by\", [self.output_vocab_size], initializer=initializer)\n\n            hs_t = tf.tanh(tf.matmul(xs_t, Wxh) + tf.matmul(hs_t, Whh) + bh)\n            ys_t = tf.matmul(hs_t, Why) + by\n            ys.append(ys_t)\n\n    hprev = hs_t\n    output_softmax = tf.nn.softmax(ys)  # Get softmax for sampling\n\n    #outputs = tf.concat(ys, axis=0)\n    loss = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(labels=targets, logits=ys))\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 107, "user_id": 7589736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0781d4b0c93ac1ccceee175f6aa8167d?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Coder", "link": "https://stackoverflow.com/users/7589736/anonymous-coder"}, "reply_to_user": {"reputation": 1636, "user_id": 5424833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2198b92f31ea537e71189423aee16b3?s=128&d=identicon&r=PG&f=1", "display_name": "Software2", "link": "https://stackoverflow.com/users/5424833/software2"}, "edited": false, "score": 0, "creation_date": 1499298388, "post_id": 44937608, "comment_id": 76851668, "body": "Tried that....its not duplicate"}, {"owner": {"reputation": 373, "user_id": 3022044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1219391f788235ad42e5e3bc1fdb3a8f?s=128&d=identicon&r=PG&f=1", "display_name": "herokingsley", "link": "https://stackoverflow.com/users/3022044/herokingsley"}, "edited": false, "score": 0, "creation_date": 1499307282, "post_id": 44937608, "comment_id": 76853776, "body": "can you show the dbase.py and <b>init</b>.py or give us more info?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7589736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0781d4b0c93ac1ccceee175f6aa8167d?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Coder", "link": "https://stackoverflow.com/users/7589736/anonymous-coder"}, "edited": false, "score": 0, "creation_date": 1499310554, "post_id": 44938321, "comment_id": 76854529, "body": "Yes this is circular import and that&#39;s the reason I was trying to import it in end of the file. It worked. Thanks"}, {"owner": {"reputation": 26, "user_id": 5219736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Lhpedvqr1I0/AAAAAAAAAAI/AAAAAAAAAMs/AgzgXhFjBuc/photo.jpg?sz=128", "display_name": "YSunLL", "link": "https://stackoverflow.com/users/5219736/ysunll"}, "reply_to_user": {"reputation": 107, "user_id": 7589736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0781d4b0c93ac1ccceee175f6aa8167d?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Coder", "link": "https://stackoverflow.com/users/7589736/anonymous-coder"}, "edited": false, "score": 0, "creation_date": 1499310660, "post_id": 44938321, "comment_id": 76854558, "body": "@Anonymous Coder, No thanks."}], "tags": [], "owner": {"reputation": 26, "user_id": 5219736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Lhpedvqr1I0/AAAAAAAAAAI/AAAAAAAAAMs/AgzgXhFjBuc/photo.jpg?sz=128", "display_name": "YSunLL", "link": "https://stackoverflow.com/users/5219736/ysunll"}, "is_accepted": true, "score": 1, "last_activity_date": 1499303842, "creation_date": 1499303842, "answer_id": 44938321, "question_id": 44937608, "link": "https://stackoverflow.com/questions/44937608/python-import-failing/44938321#44938321", "title": "Python Import failing", "body": "<p>I think this is <code>circular import</code>.</p>\n\n<p>First, when <code>from FlaskFolder import dbase</code> in <code>__init__.py</code>\uff0cprogram will \nexecute <code>dbase.py</code> file. The file will execute <code>from FlaskFolder import db</code>.\nThis will go to <code>__init__.py</code>, execute the <code>from FlaskFolder import dbase</code>.\nAnd balalala....</p>\n\n<p>This has 2 solutions.</p>\n\n<ol>\n<li><p>in <code>__init__.py</code>, let <code>from FlaskFolder import dbase</code> after flask SqlAlchemy db define.</p></li>\n<li><p>define flask SqlAlchemy db in <code>dbbase.py</code>. and import it in <code>__init__.py</code></p></li>\n</ol>\n"}], "owner": {"reputation": 107, "user_id": 7589736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0781d4b0c93ac1ccceee175f6aa8167d?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Coder", "link": "https://stackoverflow.com/users/7589736/anonymous-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1499323180, "accepted_answer_id": 44938321, "answer_count": 1, "score": 0, "last_activity_date": 1499303842, "creation_date": 1499297991, "question_id": 44937608, "link": "https://stackoverflow.com/questions/44937608/python-import-failing", "closed_reason": "Duplicate", "title": "Python Import failing", "body": "<p>I have a simple structure of my Flask application and couldn't make imports.</p>\n\n<pre><code>FlaskFolder\n__init__.py (includes db parameters for flask SqlAlchemy)\ndbase.py (Trying to import DB variable from __init__.py and its failing.\n</code></pre>\n\n<p>In my <code>__init__.py</code> I am trying to import like <code>\"from FlaskFolder import dbase\"</code> within the same folder and I couldn't do it.</p>\n\n<p>In my dbase.py I am trying to import like <code>\"from FlaskFolder import db\"</code> (db is a class in <code>__init__.py</code>) but couldn't do it. </p>\n\n<pre><code>Error: No module named FlaskFolder\n</code></pre>\n\n<p>Please advise how to resolve this issue.</p>\n"}, {"tags": ["python", "python-3.x", "flask", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1499318962, "post_id": 44937601, "comment_id": 76856716, "body": "Having to have hundreds of repetitive columns in a table sounds like an antipattern. Could you instead have a separate sensor table, such as <i>(name, machine_id, value)</i> etc.? Would be interesting to see what relevant questions you found. For example <a href=\"https://stackoverflow.com/questions/2768607/dynamic-class-creation-in-sqlalchemy\">this</a> has the building blocks you need, if you continue on this path."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1499322726, "post_id": 44937601, "comment_id": 76858392, "body": "Alternatively you might be interested in using some other type of DB instead of a relational/SQL DB, if you just want to store log/document items as a whole, and perhaps not care so much about transactions etc."}], "answers": [{"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": false, "score": 2, "last_activity_date": 1499331501, "last_edit_date": 1499331501, "creation_date": 1499321897, "answer_id": 44941144, "question_id": 44937601, "link": "https://stackoverflow.com/questions/44937601/creating-table-from-dictionary-in-sqlalchemy/44941144#44941144", "title": "Creating Table from dictionary in SQLAlchemy", "body": "<p>Instead of cramming all the sensor values in to <a href=\"https://stackoverflow.com/questions/36549354/a-large-one-table-with-100-column-vs-a-lot-of-little-tables\">a single row of hundred or more columns</a>, you could split your design to machine and sensor tables:</p>\n\n<pre><code>from datetime import datetime\n\nfrom sqlalchemy.orm.collections import attribute_mapped_collection\nfrom sqlalchemy.ext.associationproxy import association_proxy\n\nclass Machine(db.Model):\n    \"\"\"The Machine Info table\"\"\"\n    __tablename__ = 'machine'\n    id = db.Column(db.Integer, primary_key=True)\n    machine_name = db.Column(db.String(32))\n    datetime = db.Column(db.DateTime, default=datetime.utcnow)\n    sensors = db.relationship(\n        'Sensor',\n        collection_class=attribute_mapped_collection('name'),\n        cascade='all, delete-orphan')\n    sensor_values = association_proxy(\n        'sensors', 'value',\n        creator=lambda k, v: Sensor(name=k, value=v))\n\nclass Sensor(db.Model):\n    \"\"\"The Sensor table\"\"\"\n    __tablename__ = 'sensor'\n    machine_id = db.Column(db.Integer, db.ForeignKey('machine.id'),\n                           primary_key=True)\n    # Note that this could be a numeric ID as well\n    name = db.Column(db.String(16), primary_key=True)\n    value = db.Column(db.String(32))\n</code></pre>\n\n<p>The <a href=\"http://docs.sqlalchemy.org/en/latest/orm/collections.html#dictionary-collections\" rel=\"nofollow noreferrer\">dictionary collection relationship</a> combined with the <a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html#proxying-to-dictionary-based-collections\" rel=\"nofollow noreferrer\">association proxy</a> allow you to handle the sensor values like so:</p>\n\n<pre><code>In [10]: m = Machine(machine_name='Steam Machine')\n\nIn [11]: m.sensor_values['sensor1'] = 'some interesting value'\n\nIn [12]: db.session.add(m)\n\nIn [13]: db.session.commit()\n\nIn [14]: m.sensor_values\nOut[14]: {'sensor1': 'some interesting value'}\n\nIn [16]: m.sensor_values['sensor1']\nOut[16]: 'some interesting value'\n</code></pre>\n\n<p>An added benefit of having separate tables instead of a fixed schema is that if you add sensors later in life, you don't need to migrate your schema to accommodate that \u2013 in other words no need to alter the table to add columns. Just add the new sensor values to the sensor table like before.</p>\n\n<p>Finally, some RDBMS support different kinds of document types, such as Postgresql's hstore, json, and jsonb columns that you could use, since the sensor table is essentially a key/value store.</p>\n"}], "owner": {"reputation": 21, "user_id": 8055803, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kTNoITG6FFc/AAAAAAAAAAI/AAAAAAAAAwI/tZdMJU-530c/photo.jpg?sz=128", "display_name": "Connor Schentag", "link": "https://stackoverflow.com/users/8055803/connor-schentag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528971446, "creation_date": 1499297942, "last_edit_date": 1528971446, "question_id": 44937601, "link": "https://stackoverflow.com/questions/44937601/creating-table-from-dictionary-in-sqlalchemy", "title": "Creating Table from dictionary in SQLAlchemy", "body": "<p>I'm trying to create a table from dictionary values in SQLAlchemy. I'm using Flask, and currently my class looks like this:</p>\n\n<pre><code>class Machine(db.Model):\n    \"\"\"Template for the Machine Info table\"\"\"\n    __tablename__ = 'machine'\n    id = db.Column(db.Integer, primary_key=True)\n    machine_name = db.Column(db.String(32))\n    date = db.Column(db.String(32))\n    time = db.Column(db.String(32))\n    sensor1 = db.Column(db.String(32))\n    sensor2 = db.Column(db.String(32))\n</code></pre>\n\n<p>This works fine, but my issue is that I will eventually have many columns in this table, possibly +100. I would rather not fill up my models.py file with 100 lines of this kind of stuff. I wanted to have it in its own dictionary in its own file, the dictionary looks like this:</p>\n\n<pre><code>SENSOR_LOOKUP_DICT = {\n    \"machine_name\":\"machine_name\",\n    \"date\":\"date\",\n    \"time\":\"time\",\n    \"sensor1\":\"sensor1\",\n    \"sensor2\":\"sensor2\"\n}\n</code></pre>\n\n<p>A list would probably work here too.</p>\n\n<p>I was thinking I could use some kind of loop, like this:</p>\n\n<pre><code>class Machine(db.Model):\n    \"\"\"Template for the Machine Info table\"\"\"\n    __tablename__ = 'machine'\n    id = db.Column(db.Integer, primary_key=True)\n    for sensor in SENSOR_LOOKUP_DICT:\n        sensor = db.Column(db.String(32))\n</code></pre>\n\n<p>But this just gives me a column called sensor. I found a couple sort of relevant questions with sqlalchemy but they didn't use this structure for creating tables. I would very much prefer a method if possible that continues to use the db.Model structure, rather than a structure that uses create_engine, due to some JSON serialization later which is easier with this structure (as well as some app structure stuff). Is there any way to do this?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499297847, "post_id": 44937573, "comment_id": 76851539, "body": "Strange. I barely ever use those..."}], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 3, "last_activity_date": 1499299600, "creation_date": 1499299600, "answer_id": 44937815, "question_id": 44937573, "link": "https://stackoverflow.com/questions/44937573/what-are-use-cases-for-not-resetting-a-groupby-index-in-pandas/44937815#44937815", "title": "What are use cases for *not* resetting a groupby index in pandas", "body": "<p>When you perform a <code>groupby/agg</code> operation, it is natural to think of the result as a mapping from the groupby keys to the aggregated scalar values. If we were using plain Python, a dict would be the natural data structure to hold such a mapping from keys to values. Since we are using Pandas, a Series is the natural data structure. Its index would hold the keys, and the Series values would be the aggregrated scalars. If there is more than one aggregated value for each key, then the natural data structure to use would be a DataFrame. </p>\n\n<p>The advantage of holding the keys in an index rather than a column is that looking up values based on index labels is an O(1) operation, whereas looking up values based on a value in a column is an O(n) operation. </p>\n\n<p>Since the result of a <code>groupby/agg</code> operation fits naturally into a Series or DataFrame with groupby keys as the index, and since indexes have this special fast lookup property, it is better to return the result in this form by default.</p>\n"}], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 44937815, "answer_count": 1, "score": 1, "last_activity_date": 1499299600, "creation_date": 1499297726, "question_id": 44937573, "link": "https://stackoverflow.com/questions/44937573/what-are-use-cases-for-not-resetting-a-groupby-index-in-pandas", "title": "What are use cases for *not* resetting a groupby index in pandas", "body": "<p>When working with <code>groupby</code> on a pandas <code>DataFrame</code> instance, I have never <em>not</em> used either <code>as_index=False</code> or <code>reset_index()</code>. I cannot actually think of any reason why I <em>wouldn't</em> do so. Because my behavior is not the pandas default (indeed, because the <code>groupby</code> index exists at all), I suspect that there is some functionality of pandas that I am not taking advantage of.</p>\n\n<p>Can anyone describe cases where it would be advantageous to not reset the index?</p>\n"}, {"tags": ["python", "date", "timedelta"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1499297862, "post_id": 44937556, "comment_id": 76851544, "body": "I think it&#39;s worth asking what it means to add/subtract <i>hours</i> to a <code>date</code>.  If the hours are 24, then it&#39;s pretty easy to decide that you&#39;re supposed to add 1 day.  If it&#39;s less than 24 hours, do you upgrade the result to a <code>datetime</code> when you started with a <code>date</code>, or do you keep working with <code>date</code> and truncate?"}, {"owner": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1499298173, "post_id": 44937556, "comment_id": 76851614, "body": "Yes, that is a good question, and one that can&#39;t be answered easily. But what I wanted to highlight is, that normal maths operation like <i>a - b == a + (-b)</i> do not work as expected."}, {"owner": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1499299066, "post_id": 44937556, "comment_id": 76851818, "body": "Yes, fixed that. thanks."}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "edited": false, "score": 0, "creation_date": 1499368336, "post_id": 44938589, "comment_id": 76889712, "body": "Agreed. However using datetime will be a hard option. Which time of the day should you pick? (There are many discussions about this here on Stack Overflow). Maybe date/timedelta operations should throw an error if anything but days (in timedalta) is non zero? It is using a wrong type after all."}, {"owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "reply_to_user": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "edited": false, "score": 0, "creation_date": 1499368431, "post_id": 44938589, "comment_id": 76889756, "body": "I agree that it&#39;s hard, but hard in the sense of &quot;you have to figure out what you really mean&quot;, not hard in the sense of &quot;it&#39;s behaving incorrectly&quot;. If you&#39;re subtracting times from dates, you really do need to tell me what time you&#39;re starting from on that date."}], "tags": [], "owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "is_accepted": false, "score": 2, "last_activity_date": 1499306001, "creation_date": 1499306001, "answer_id": 44938589, "question_id": 44937556, "link": "https://stackoverflow.com/questions/44937556/surprising-behaviour-of-python-date-and-timedelta-subtraction/44938589#44938589", "title": "Surprising behaviour of Python date and timedelta subtraction", "body": "<blockquote>\n  <p>Should this be considered a bug in the python datetime module? Or is\n  this rather some 'normal' behaviour which needs to be taken into\n  account when doing things like that?</p>\n</blockquote>\n\n<p>No, this should not be considered a bug. A <code>date</code> does not track its state in terms of hours, minutes, and seconds, which is what would be needed for it to behave in the way you suggest it ought to. </p>\n\n<p>I would consider the code you've presented to be a bug: the programmer is using the wrong datatype for the work they're trying to accomplish. If you want to keep track of time in days, hours, minutes and seconds, then you need a <code>datetime</code> object. (which will happily provide you with a <code>date</code> once you've done all of the arithmetic you care to do)</p>\n"}, {"comments": [{"owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "edited": false, "score": 0, "creation_date": 1499307375, "post_id": 44938702, "comment_id": 76853795, "body": "Maybe I&#39;m missing something, but the issue doesn&#39;t seem to be about whether the <code>timedelta</code> is negative or positive. Note that when the minuend is a <code>datetime</code> instead of a <code>date</code>, <code>timedelta</code> arithmetic works as expected with both positive and negative values, and the unexpected behavior is observed when <code>timedelta</code>s of positive and negative value are added to or subtracted from <code>date</code>s."}, {"owner": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "edited": false, "score": 0, "creation_date": 1499311067, "post_id": 44938702, "comment_id": 76854658, "body": "This answer adds some clarity why it happens, but it also suggests that the datetime.timedelta implementation is the cause for this unforeseen behaviour."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "edited": false, "score": 0, "creation_date": 1499316259, "post_id": 44938702, "comment_id": 76855914, "body": "@JonKiparsky: as you rightly mentioned, a semantic type mismatch, together with duck typing and (likely) backwards compatibility considerations leads to <code>date</code> objects accepting <code>timedelta</code> with non-zero time, and unexpected results. By the same token, <code>1 &lt; &#39;1&#39;</code> in Python 2. Python 3 somehow alleviates this, and <code>1 &lt; &#39;1&#39;</code> becomes a <code>TypeError</code>;  the <code>date</code> and <code>timedelta</code> behavior remains the same, though."}], "tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1499306812, "creation_date": 1499306812, "answer_id": 44938702, "question_id": 44937556, "link": "https://stackoverflow.com/questions/44937556/surprising-behaviour-of-python-date-and-timedelta-subtraction/44938702#44938702", "title": "Surprising behaviour of Python date and timedelta subtraction", "body": "<p>This is because of the way how <em>negative</em> <code>timedelta</code>s are represented.</p>\n\n<pre><code>import datetime\ntd = datetime.timedelta(days=1, hours=1)\nprint (td.days, td.seconds)\n# prints 1 3600\nminus_td = -td\nprint (minus_td.days, minus_td.seconds)\n# prints -2 82800\n</code></pre>\n\n<p>I hope you now better understand why <code>days</code> were affected.</p>\n\n<p>Seconds in a <code>timedelta</code> are always normalized to a positive amount between 0 and 86399:</p>\n\n<pre><code>&gt;&gt;&gt; print (datetime.timedelta(seconds=-10).seconds)\n86390\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 6867496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-78lb9ZB_2EE/AAAAAAAAAAI/AAAAAAAAAAA/-L1cKdEhpq4/photo.jpg?sz=128", "display_name": "gweis", "link": "https://stackoverflow.com/users/6867496/gweis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1499306812, "creation_date": 1499297627, "last_edit_date": 1499304759, "question_id": 44937556, "link": "https://stackoverflow.com/questions/44937556/surprising-behaviour-of-python-date-and-timedelta-subtraction", "title": "Surprising behaviour of Python date and timedelta subtraction", "body": "<p>I am trying to do some Python <em>date</em> and <em>timedelta</em> maths and stumbled upon this.</p>\n\n<pre><code>&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; dt = datetime.date(2000, 4, 20)\n&gt;&gt;&gt; td = datetime.timedelta(days=1)\n&gt;&gt;&gt; dt - td\ndatetime.date(2000, 4, 19)\n&gt;&gt;&gt; -(td) + dt\ndatetime.date(2000, 4, 19)\n&gt;&gt;&gt; dt - td == dt + (-td)\nTrue\n</code></pre>\n\n<p>So far so good, but when the <em>timedelta</em> also includes some hours it gets interesting.</p>\n\n<pre><code>&gt;&gt;&gt; td = datetime.timedelta(days=1, hours=1)\n&gt;&gt;&gt; dt - td\ndatetime.date(2000, 4, 19)\n&gt;&gt;&gt; -(td) + dt\ndatetime.date(2000, 4, 18)\n</code></pre>\n\n<p>or in a comparison:</p>\n\n<pre><code>&gt;&gt;&gt; dt - td == dt + (-td)\nFalse\n</code></pre>\n\n<p>I would have expected that <em>a - b == a + (-b)</em>, but this doesn't seem to work for <em>date</em> and <em>timedelta</em>. As far as I was able to track that down, this happens because adding/subtracting <em>date</em> and <em>timedelta</em> only considers the days field of <em>timedelta</em>, which is probably correct. However negating a <em>timedelta</em> considers all fields and may change the days field as well.</p>\n\n<pre><code>&gt;&gt;&gt; -datetime.timedelta(days=1)\ndatetime.timedelta(-1)\n&gt;&gt;&gt; -datetime.timedelta(days=1, hours=1)\ndatetime.timedelta(-2, 82800)\n</code></pre>\n\n<p>As can be seen in the second example, days=-2 after the negation, and therefore <em>date + timedelta</em> will actually subtract 2 days.</p>\n\n<p>Should this be considered a bug in the python <em>datetime</em> module? Or is this rather some 'normal' behaviour which needs to be taken into account when doing things like that?</p>\n\n<p>Internally the <em>datetime</em> module creates a new <em>timedelta</em>, with just the days field of the original <em>timedelta</em> object passed in, when subtracting a <em>timedelta</em> to a <em>date</em> object. Which equates to following, code that seems to be quite odd.</p>\n\n<pre><code>&gt;&gt;&gt; dt + datetime.timedelta(-(-(-dt).days))\ndatetime.date(2000, 4, 18)\n</code></pre>\n\n<p>I can't really sea a reason for just using the negated days field when doing <em>date - timedelta</em> subtractions.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Here is the relevant code path in python <em>datetime</em> module:</p>\n\n<pre><code>class date:\n\n    ...\n\n    def __sub__(self, other):\n        \"\"\"Subtract two dates, or a date and a timedelta.\"\"\"\n        if isinstance(other, timedelta):\n           return self + timedelta(-other.days)\n        ...\n</code></pre>\n\n<p>If it would just pass on <em>-other</em> then the condition <em>a - b == a + (-b)</em> would hold true. (It would change current behaviour though).</p>\n\n<pre><code>class date:\n\n    ...\n\n    def __sub__(self, other):\n        \"\"\"Subtract two dates, or a date and a timedelta.\"\"\"\n        if isinstance(other, timedelta):\n           return self - other  # timedelta.__rsub__ would take care of negating other\n        ...\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499298156, "post_id": 44937542, "comment_id": 76851612, "body": "It&#39;s elementwise division..."}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 9932220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0llds.png?s=128&g=1", "display_name": "onofricamila", "link": "https://stackoverflow.com/users/9932220/onofricamila"}, "edited": false, "score": 0, "creation_date": 1587499038, "post_id": 44937714, "comment_id": 108535001, "body": "Note: another difference with <code>&#47;</code> is that <code>div</code> allows you to provide a fill_value for missing data in one of the inputs <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.div.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 12, "last_activity_date": 1499298762, "creation_date": 1499298762, "answer_id": 44937714, "question_id": 44937542, "link": "https://stackoverflow.com/questions/44937542/what-does-div-do-in-pandas-python/44937714#44937714", "title": "What does .div do in Pandas (Python)", "body": "<p>You can divide one dataframe by another and pandas will automagically aligned the index and columns and subsequently divide the appropriate values. EG <code>df1 / df2</code></p>\n\n<p>If you divide a dataframe by series, pandas automatically aligns the series index with the columns of the dataframe.  It maybe that you want to align the index of the series with the index of the dataframe instead.  If this is the case, then you will have to use the <code>div</code> method.</p>\n\n<p>So instead of:</p>\n\n<pre><code>df / s\n</code></pre>\n\n<p>You use</p>\n\n<pre><code>df.div(s, axis=0)\n</code></pre>\n\n<p>Which says to align the index of <code>s</code> with the index of <code>df</code> then perform the division while broadcasting over the other dimension, in this case columns.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13397792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjsRG4MdG1OlCSRXLtcZKlgvDjV-aK5iW2RnVDk8g=k-s128", "display_name": "Geetika Singla", "link": "https://stackoverflow.com/users/13397792/geetika-singla"}, "is_accepted": false, "score": 1, "last_activity_date": 1615122510, "last_edit_date": 1615122510, "creation_date": 1588792202, "answer_id": 61643389, "question_id": 44937542, "link": "https://stackoverflow.com/questions/44937542/what-does-div-do-in-pandas-python/61643389#61643389", "title": "What does .div do in Pandas (Python)", "body": "<p>In the above example, what it is essentially doing is dividing pclass_xt on axis 0, by the array/series which <code>pclass_xt.sum(0)</code> has generated. In <code>pclass_xt.sum(0)</code>, <code>.sum</code> is summing up values along the <code>axis=1</code>, which gives you the total of both survived and not survived along all the pclasses. Then, <code>.div</code> is simply dividing the entire dataframe along 0 axis with the sum generated i.e. a row is divided by the sum of that row.</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 9724968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52466bc95d2416f5bff4a06cb00dd082?s=128&d=identicon&r=PG&f=1", "display_name": "sameer_nubia", "link": "https://stackoverflow.com/users/9724968/sameer-nubia"}, "is_accepted": false, "score": 0, "last_activity_date": 1615724607, "creation_date": 1615724607, "answer_id": 66624493, "question_id": 44937542, "link": "https://stackoverflow.com/questions/44937542/what-does-div-do-in-pandas-python/66624493#66624493", "title": "What does .div do in Pandas (Python)", "body": "<pre><code>    import pandas as pd,numpy as np\n    \n    data={&quot;A&quot;:np.arange(10),&quot;B&quot;:np.random.randint(1,10,10),&quot;C&quot;:np.random.random(10)}\n    #print(data)\n    df2=pd.DataFrame(data=data)\n    print(&quot;DataFrame values:\\n&quot;,df2)\n    s1=pd.Series(np.arange(1,11))\n    print(&quot;s1 series values:\\n&quot;,s1)\n    \n    print(&quot;Result of Division:\\n&quot;,df2.div(s1,axis=0))\n    \n    **#So here, How the div is working as mention below:-\n    #df Row1/s1 Row1 -0/1 4/1 0.305/1\n    #df Row2/s1 Row2 -1/2 9/2  0.821/2**\n    \n#################Output###########################\nDataFrame values:\n    A  B         C\n0  0  2  0.265396\n1  1  2  0.055646\n2  2  7  0.963006\n3  3  9  0.958677\n4  4  6  0.256558\n5  5  6  0.859066\n6  6  8  0.818831\n7  7  4  0.656055\n8  8  6  0.885797\n9  9  4  0.412497\ns1 series values:\n 0     1\n1     2\n2     3\n3     4\n4     5\n5     6\n6     7\n7     8\n8     9\n9    10\ndtype: int64\nResult of Division:\n           A         B         C\n0  0.000000  2.000000  0.265396\n1  0.500000  1.000000  0.027823\n2  0.666667  2.333333  0.321002\n3  0.750000  2.250000  0.239669\n4  0.800000  1.200000  0.051312\n5  0.833333  1.000000  0.143178\n6  0.857143  1.142857  0.116976\n7  0.875000  0.500000  0.082007\n8  0.888889  0.666667  0.098422\n9  0.900000  0.400000  0.041250\n</code></pre>\n"}], "owner": {"reputation": 4144, "user_id": 3594588, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3bdbd93bbb9a84d9635d498d9a50e08b?s=128&d=identicon&r=PG&f=1", "display_name": "bugsyb", "link": "https://stackoverflow.com/users/3594588/bugsyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6733, "favorite_count": 0, "accepted_answer_id": 44937714, "answer_count": 3, "score": 6, "last_activity_date": 1615724607, "creation_date": 1499297529, "question_id": 44937542, "link": "https://stackoverflow.com/questions/44937542/what-does-div-do-in-pandas-python", "title": "What does .div do in Pandas (Python)", "body": "<p>I'm confused as to the highlighted line. What exactly is this line doing. What does .div do? I tried to look through the documentation which said </p>\n\n<p>\"Floating division of dataframe and other, element-wise (binary operator truediv)\"</p>\n\n<p>I'm not exactly sure what this means. Any help would be appreciated!</p>\n\n<p><a href=\"https://i.stack.imgur.com/x2Vw2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/x2Vw2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "naming-conventions"], "answers": [{"tags": [], "owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "is_accepted": false, "score": 3, "last_activity_date": 1499298253, "last_edit_date": 1499298253, "creation_date": 1499297875, "answer_id": 44937594, "question_id": 44937538, "link": "https://stackoverflow.com/questions/44937538/recommended-word-order-of-names/44937594#44937594", "title": "Recommended word order of names?", "body": "<p>While this question is hard to answer objectively, I think you should go to my favorite python standard library module for this, courtesy of <a href=\"https://www.python.org/dev/peps/pep-0020/\" rel=\"nofollow noreferrer\">Tim Peters</a>.</p>\n\n<pre><code>&gt;&gt;&gt; import this\n</code></pre>\n\n<blockquote>\n  <p>The Zen of Python, by Tim Peters</p>\n  \n  <p>Beautiful is better than ugly. Explicit is better than implicit.\n  Simple is better than complex. Complex is better than complicated.\n  Flat is better than nested. Sparse is better than dense. Readability\n  counts. Special cases aren't special enough to break the rules.\n  Although practicality beats purity. Errors should never pass silently.\n  Unless explicitly silenced. In the face of ambiguity, refuse the\n  temptation to guess. There should be one-- and preferably only one\n  --obvious way to do it. Although that way may not be obvious at first unless you're Dutch. Now is better than never. Although never is often\n  better than <em>right</em> now. If the implementation is hard to explain,\n  it's a bad idea. If the implementation is easy to explain, it may be a\n  good idea. Namespaces are one honking great idea -- let's do more of\n  those!</p>\n</blockquote>\n\n<p>I believe <code>Readability counts.</code> is the most relevant here. With little exception, code is to be written and maintained by other humans, not machines. It should be \"readable for humans\" as you suggested.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 7511830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UyT5LrxBqIA/AAAAAAAAAAI/AAAAAAAAC3Y/OUbykdnXKEU/photo.jpg?sz=128", "display_name": "Maffey", "link": "https://stackoverflow.com/users/7511830/maffey"}, "is_accepted": false, "score": 1, "last_activity_date": 1499298107, "creation_date": 1499298107, "answer_id": 44937621, "question_id": 44937538, "link": "https://stackoverflow.com/questions/44937538/recommended-word-order-of-names/44937621#44937621", "title": "Recommended word order of names?", "body": "<p>I think there isn't really any preferred order out there and you should use the one that makes working easy and more smooth. For example, if you had a lot of variables/classes/functions with the key word \"history\" and \"cache\", with repeatable words (like \"history_add\" and \"cache_add\") using the structured version would probably be better. But in any other cases, the readable version is going to be good solution.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1499299639, "creation_date": 1499299639, "answer_id": 44937822, "question_id": 44937538, "link": "https://stackoverflow.com/questions/44937538/recommended-word-order-of-names/44937822#44937822", "title": "Recommended word order of names?", "body": "<p>For this one issue, the approach I learned has served me well as abstract data types evolved to OOP, in designs from projects of 250K lines down to student exercises.</p>\n\n<ul>\n<li>Objects are nouns or noun phrases</li>\n<li>Functions are verbs or verb phrases</li>\n</ul>\n\n<p>When I'm programming, each line of code is a command, a verb.  I want to write it as a verb.  Thus, I prefer your option 2: <code>clear_history</code> is more easily understood than <code>history_clear</code>.</p>\n\n<p>Beyond this, if you name your variables (objects) well, then your organizational wants will follow, since the object will imply the way you're using the variable.  For instance, you'll write something like</p>\n\n<pre><code>symbiont_browser.trim_window(x_size, y_size)\n</code></pre>\n"}], "owner": {"reputation": 1641, "user_id": 1232660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3843a2bbd046589aeba450315a996d8d?s=128&d=identicon&r=PG", "display_name": "Jeyekomon", "link": "https://stackoverflow.com/users/1232660/jeyekomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "closed_date": 1499311089, "answer_count": 3, "score": 5, "last_activity_date": 1499299639, "creation_date": 1499297503, "last_edit_date": 1499297787, "question_id": 44937538, "link": "https://stackoverflow.com/questions/44937538/recommended-word-order-of-names", "closed_reason": "Opinion-based", "title": "Recommended word order of names?", "body": "<p>From my perspective there can be (at least) two aproaches how to create a name for a variable, function, class etc.</p>\n\n<ol>\n<li><p>Structured:</p>\n\n<pre><code>history_clear()\nhistory_save_to_file()\ncache_remove_entry()\ncache_find()\nbrowser_window_url_trim()\n</code></pre></li>\n<li><p>Readable for humans:</p>\n\n<pre><code>clear_history()\nsave_history_to_file()\nremove_entry_from_cache()\nfind_in_cache()\ncheck_for_updates()\n</code></pre></li>\n</ol>\n\n<p>What is the preferred word order? Is there any?\nI'm quite new to the programming but I'd like to acquire the good coding habits from the beginning. I've briefly read the <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"noreferrer\">PEP 8</a> Style Guide but I didn't find the answer there.</p>\n"}, {"tags": ["python", "ternary-operator"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1499297533, "post_id": 44937520, "comment_id": 76851454, "body": "You can only write <i>expressions</i> in ternary operators, not <i>statements</i>."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 3, "creation_date": 1499297555, "post_id": 44937520, "comment_id": 76851460, "body": "Because <code>bob += 1</code> is a <i>statement</i>, not an <i>expression</i>."}, {"owner": {"reputation": 151, "user_id": 2272447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/XITFh.jpg?s=128&g=1", "display_name": "d00medman", "link": "https://stackoverflow.com/users/2272447/d00medman"}, "edited": false, "score": 0, "creation_date": 1499297624, "post_id": 44937520, "comment_id": 76851474, "body": "How can I go about rendering <code>bob+=1</code> an expression? And why is <code>alice+=1</code> an expression, but <code>bob+=1</code> a statement?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1499298345, "post_id": 44937520, "comment_id": 76851658, "body": "Both of those are augmented assignment statements, not expressions. It is unclear what you want."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499298844, "post_id": 44937520, "comment_id": 76851777, "body": "Assignment can <i>never be an expression in Python</i>. You can wrap the logic in a function and call that, though (a function call is an expression)"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 2272447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/XITFh.jpg?s=128&g=1", "display_name": "d00medman", "link": "https://stackoverflow.com/users/2272447/d00medman"}, "edited": false, "score": 0, "creation_date": 1499297937, "post_id": 44937555, "comment_id": 76851565, "body": "Alright this makes sense. So the ternary in Python is quite different from that of ruby? It seems more useful for the assignment of variables rather than the assessment of statements. Does python simply lack the ability to execute boolean logic like this in a streamlined fashion?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 151, "user_id": 2272447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/XITFh.jpg?s=128&g=1", "display_name": "d00medman", "link": "https://stackoverflow.com/users/2272447/d00medman"}, "edited": false, "score": 0, "creation_date": 1499298239, "post_id": 44937555, "comment_id": 76851638, "body": "Right.  Most languages with something called a &quot;ternary&quot; operator use the legacy <a href=\"https://en.wikipedia.org/wiki/Ternary_operation\" rel=\"nofollow noreferrer\">definition</a>.  An expression-oriented language, such as C or Ruby, has the option of allowing a full statement as an expression.  Python and C chose not to go that far; Ruby did."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 151, "user_id": 2272447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/XITFh.jpg?s=128&g=1", "display_name": "d00medman", "link": "https://stackoverflow.com/users/2272447/d00medman"}, "edited": false, "score": 0, "creation_date": 1499298533, "post_id": 44937555, "comment_id": 76851706, "body": "Python is quite capable of the logic path.  There is likely something in the rationale documents that explains why the ternary operator works this way.  I just haven&#39;t looked for it."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1499298712, "post_id": 44937555, "comment_id": 76851747, "body": "Right ... but I&#39;m pretty sure that C doesn&#39;t allow an assignment in a ternary expression.  Neither does Python -- which allows <code>a = b = c = -1</code>, for example."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499298790, "post_id": 44937555, "comment_id": 76851768, "body": "@Prune check out <a href=\"https://repl.it/JPW8/1\" rel=\"nofollow noreferrer\">repl.it/JPW8/1</a> Personally, I hate allowing assignment as an expression."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1499298907, "post_id": 44937555, "comment_id": 76851793, "body": "However, an assignment in Python does <i>not</i> return a value; that cascaded assignment is simply syntactic convenience.  <code>print (bob = 1)</code> gets a syntax error, rather than <code>1</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499298928, "post_id": 44937555, "comment_id": 76851798, "body": "@juanpa.arrivillaga Thanks for finding such a pithy <code>C</code> reference."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1499299078, "post_id": 44937555, "comment_id": 76851820, "body": "@Prune OK, point taken, I realize C is notorious for empirical results not being necessarily indicative of the standard... But I&#39;m not well read on the C standards, so perhaps it <i>is</i> written somewhere &quot;Assignment statements cannot be used in the ternary operator&quot;."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 4, "last_activity_date": 1499297619, "creation_date": 1499297619, "answer_id": 44937555, "question_id": 44937520, "link": "https://stackoverflow.com/questions/44937520/why-is-this-ternary-operator-syntax-invalid/44937555#44937555", "title": "Why is this ternary operator syntax invalid?", "body": "<p>Ternary syntax is an <em>expression</em>; you've tried to use it as a one-line <code>if-then-else</code>.  You can pick the increment value, that comes from the RHS of the equation, such as:</p>\n\n<pre><code>alice += 1 if bob &gt; 1 else 0\n</code></pre>\n\n<p>... but you can't change the assignment's target like this.  If you <em>really</em> need to do that, you can assign a custom tuple to the LHS <code>alice, bob</code>, but that seems overkill.  Just use the natural <code>if</code> statement</p>\n\n<pre><code>if 0 &gt; 1:\n    alice += 1\nelse:\n    bob += 1\n</code></pre>\n\n<p>The final execution code will be that same, and the source stays more readable.</p>\n"}], "owner": {"reputation": 151, "user_id": 2272447, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/XITFh.jpg?s=128&g=1", "display_name": "d00medman", "link": "https://stackoverflow.com/users/2272447/d00medman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 0, "accepted_answer_id": 44937555, "answer_count": 1, "score": 2, "last_activity_date": 1499297619, "creation_date": 1499297397, "question_id": 44937520, "link": "https://stackoverflow.com/questions/44937520/why-is-this-ternary-operator-syntax-invalid", "title": "Why is this ternary operator syntax invalid?", "body": "<p>I am trying to write a simple ternary operator which would look like this in ruby:</p>\n\n<p><code>0 &gt; 1 ? alice+=1 : bob+=1</code></p>\n\n<p>I have it written in python like this: </p>\n\n<p><code>alice += 1 if 0 &gt; 1 else bob += 1</code></p>\n\n<p>This ternary operator throws an invalid syntax at <code>bob+=1</code>. Why is this happening, and how can I make the second operator execute along the same lines as the first? </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy", "matrix-multiplication"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499297497, "post_id": 44937482, "comment_id": 76851443, "body": "There is a <code>nan</code> in your first vector, that at some point gets multiplied in the matrix product, making the entire result <code>nan</code>. .. the behavior you are expecting is that it return <code>nan * something</code> gives you 0?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499297614, "post_id": 44937482, "comment_id": 76851470, "body": "Also, your last operation isn&#39;t matrix multiplication, but elementwise multiplication... it would seem you want <code>x.T.dot(y).dot(x)</code>. So I&#39;m not sure you why you are expecting that, but a 1X5*5X1 matrix multiplication gives you a 1X1 &quot;matrix&quot;"}, {"owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499305662, "post_id": 44937482, "comment_id": 76853370, "body": "Yes, the nan is intentional . I don&#39;t want a 1x1, but a 1x5 which would account for the nan as shown in the example.  I&#39;ve edited the original prompt to make that more clear."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1499310678, "post_id": 44937482, "comment_id": 76854565, "body": "Expecting that operation not to produce more NaNs is roughly like expecting infinity - infinity to be 0. Properties like &quot;multiplying a matrix by an identity matrix leaves it unchanged&quot; depend on real-number axioms that don&#39;t hold for infinities or NaN."}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "edited": false, "score": 0, "creation_date": 1499310301, "post_id": 44938694, "comment_id": 76854475, "body": "This is helpful, but I DO want to retain the nan, which is why I included it in the example.  Is there another way to do matrix alegbra, aside from np.dot, that does retain nans?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "edited": false, "score": 0, "creation_date": 1499314211, "post_id": 44938694, "comment_id": 76855419, "body": "You can use a mask to set the desired element to <code>np.nan</code>. See my edits.  One way or other <code>nan</code> has to treated as a special case.   Otherwise it propagates:  <a href=\"https://en.wikipedia.org/wiki/NaN\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/NaN</a>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1499310191, "last_edit_date": 1499310191, "creation_date": 1499306725, "answer_id": 44938694, "question_id": 44937482, "link": "https://stackoverflow.com/questions/44937482/pandas-matrix-multiplication/44938694#44938694", "title": "Pandas: Matrix Multiplication", "body": "<p><code>numpy</code>has several functions that handle matrix products - <code>np.dot</code>, <code>np.einsum</code> and <code>np.matmul</code> (and the <code>@</code> operator).  <code>*</code> is defined as element wise multiplication (except for <code>np.matrix</code> class).  All are optimized for speed.  But they also propagate <code>nan</code>.</p>\n\n<p>Using numpy arrays instead of pandas:</p>\n\n<pre><code>In [314]: y = np.eye(5)\nIn [316]: y\nOut[316]: \narray([[ 1.,  0.,  0.,  0.,  0.],\n       [ 0.,  1.,  0.,  0.,  0.],\n       [ 0.,  0.,  1.,  0.,  0.],\n       [ 0.,  0.,  0.,  1.,  0.],\n       [ 0.,  0.,  0.,  0.,  1.]])\n</code></pre>\n\n<p>To do transpose on <code>x</code> we need to make it 2d; and to assign <code>nan</code> it has to be float.</p>\n\n<pre><code>In [320]: x = np.arange(1,6).astype(float).reshape(1,5)\nIn [321]: x[0,1]=np.nan\nIn [322]: x\nOut[322]: array([[  1.,  nan,   3.,   4.,   5.]])\nIn [323]: x.T       # column vector\nOut[323]: \narray([[  1.],\n       [ nan],\n       [  3.],\n       [  4.],\n       [  5.]])\nIn [324]: np.dot(y, x.T)\nOut[324]: \narray([[ nan],\n       [ nan],\n       [ nan],\n       [ nan],\n       [ nan]])\n</code></pre>\n\n<p>Why this <code>dot</code> result?  It multiplies each row of <code>y</code> by the column of <code>x.T</code>, and sums the values.  Because of the <code>nan</code> one of those products for each row of <code>y</code> is <code>1*nan</code> or <code>0*nan</code>; any product or sum involving <code>nan</code> produces <code>nan</code>, to the result is all <code>nan</code>.</p>\n\n<p>I suspect you were hoping that <code>0*nan == 0</code>.  Like:</p>\n\n<pre><code>In [329]: x[0,1]=100\nIn [330]: np.dot(y, x.T)\nOut[330]: \narray([[   1.],\n       [ 100.],\n       [   3.],\n       [   4.],\n       [   5.]])\n</code></pre>\n\n<p>There are some <code>numpy</code> functions that skip <code>nan</code>. <code>np.dot</code> isn't one of them.</p>\n\n<pre><code>In [333]: x[0,1]=np.nan\nIn [336]: y*x\nOut[336]: \narray([[  1.,  nan,   0.,   0.,   0.],\n       [  0.,  nan,   0.,   0.,   0.],\n       [  0.,  nan,   3.,   0.,   0.],\n       [  0.,  nan,   0.,   4.,   0.],\n       [  0.,  nan,   0.,   0.,   5.]])\nIn [339]: np.nansum(y*x, axis=1, keepdims=True)\nOut[339]: \narray([[ 1.],\n       [ 0.],\n       [ 3.],\n       [ 4.],\n       [ 5.]])\n</code></pre>\n\n<p>This sort of works.  It skipped the <code>nan</code> when summing across rows; but the 2nd value is 0, not <code>nan</code>.</p>\n\n<hr>\n\n<p>The <code>np.nan...</code> functions work by temporarily replacing the <code>nan</code> with something innocuous like 0 or 1.  I could do that in your case with:</p>\n\n<pre><code>In [369]: x\nOut[369]: array([[  1.,  nan,   3.,   4.,   5.]])\nIn [370]: x1, mask = np.lib.nanfunctions._replace_nan(x.T,1)\nIn [371]: x1\nOut[371]: \narray([[ 1.],\n       [ 1.],\n       [ 3.],\n       [ 4.],\n       [ 5.]])\nIn [372]: mask\nOut[372]: \narray([[False],\n       [ True],\n       [False],\n       [False],\n       [False]], dtype=bool)\nIn [373]: x2 = np.dot(y, x1)\nIn [374]: x2[mask] = np.nan\nIn [375]: x2\nOut[375]: \narray([[  1.],\n       [ nan],\n       [  3.],\n       [  4.],\n       [  5.]])\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499314078, "creation_date": 1499297079, "last_edit_date": 1499314078, "question_id": 44937482, "link": "https://stackoverflow.com/questions/44937482/pandas-matrix-multiplication", "title": "Pandas: Matrix Multiplication", "body": "<p>I am attempting to find the best method for matrix multiplication using pandas.  Suppose I want to do a simple exercise: xyx' ...[1x5][5x5][5x1]'.</p>\n\n<pre><code>in:\n\nydates = pd.date_range('20170101',periods=5)\ny = pd.DataFrame(np.identity(5),index=['f','o','b','a','r'],columns=['f','o','b','a','r'])\nxdata = list(range(1,6))\nx = pd.DataFrame(xdata,index=['f','o','b','a','r'])\nx.loc['o'] = np.nan\nmm = x.T.dot(y)*x.T  \n\n\n\nout: \n\n        f   o   b   a   r\n    0 NaN NaN NaN NaN NaN\n</code></pre>\n\n<p>I would expect to get: </p>\n\n<pre><code>     0\nf  1.0\no  NaN\nb  3.0\na  4.0\nr  5.0\n</code></pre>\n\n<p>My questions are: </p>\n\n<p>1) How do I align these? Is there a better way than doing the double transpose?</p>\n\n<p>2) Is there a way to account for nans?</p>\n\n<p>2) Is there a more efficient way to do matrix algebra using python/pandas?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "merge", "outer-join"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499297548, "post_id": 44937462, "comment_id": 76851456, "body": "Are you even sure avoiding copies is possible? There&#39;s a <code>copy</code> kwarg that <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">&quot;<i>If False, do not copy data unnecessarily</i>&quot;</a>, but playing around with it and <code>np.share_memory</code> suggests that in your example the result is always copied. Which is not that surprising, considering that the resulting dataframe is quite different from the originals. But I&#39;m not very experienced with pandas so my impressions might be way off."}, {"owner": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1499298501, "post_id": 44937462, "comment_id": 76851696, "body": "What do you mean &quot;it isn&#39;t in place&quot;? What are you trying to achieve?"}, {"owner": {"reputation": 61870, "user_id": 395857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Z99mk.jpg?s=128&g=1", "display_name": "Franck Dernoncourt", "link": "https://stackoverflow.com/users/395857/franck-dernoncourt"}, "reply_to_user": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1499298766, "post_id": 44937462, "comment_id": 76851761, "body": "@AndrewL I&#39;d like the merged data frame to replace s1 in memory."}, {"owner": {"reputation": 2146, "user_id": 8231181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJgPD.jpg?s=128&g=1", "display_name": "Rayhane Mama", "link": "https://stackoverflow.com/users/8231181/rayhane-mama"}, "edited": false, "score": 2, "creation_date": 1499299129, "post_id": 44937462, "comment_id": 76851834, "body": "well since there isn&#39;t any <code>inplace</code> parameter i think the most you can do here is <code>s1 = pd.merge(s1,s2,how=&#39;outer&#39;)</code>, other than that, there&#39;s not much left to do i think.. sorry"}, {"owner": {"reputation": 61870, "user_id": 395857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Z99mk.jpg?s=128&g=1", "display_name": "Franck Dernoncourt", "link": "https://stackoverflow.com/users/395857/franck-dernoncourt"}, "reply_to_user": {"reputation": 2146, "user_id": 8231181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJgPD.jpg?s=128&g=1", "display_name": "Rayhane Mama", "link": "https://stackoverflow.com/users/8231181/rayhane-mama"}, "edited": false, "score": 0, "creation_date": 1499351463, "post_id": 44937462, "comment_id": 76878820, "body": "@RayhaneMama Thanks. You&#39;re welcome to convert the comment into an answer."}, {"owner": {"reputation": 61870, "user_id": 395857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Z99mk.jpg?s=128&g=1", "display_name": "Franck Dernoncourt", "link": "https://stackoverflow.com/users/395857/franck-dernoncourt"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1499542807, "post_id": 44937462, "comment_id": 76954955, "body": "@AndrasDeak FYI <a href=\"https://stackoverflow.com/q/32330490/395857\">What are the exact downsides of copy=False in DataFrame.merge()?</a>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1499543512, "post_id": 44937462, "comment_id": 76955164, "body": "Thanks for the link. I&#39;m probably not qualified to answer, though:) My hunch is that copying can only be avoided in very special cases (considering that <code>.merge</code> is a very general workhorse that provides all sorts of operations), when the result verbatim contains columns of the original dataframe(s)."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1499565658, "post_id": 44937462, "comment_id": 76959487, "body": "Franck FYI <a href=\"https://stackoverflow.com/a/44992292/5067311\">I tried to investigate anyway</a>. I convinced myself that the <code>copy</code> kwarg is mostly for show unless one&#39;s doing something trivial/weird. In your case I suspect there are bunch of actual concatenations going on, so no skipping copies for you :("}], "answers": [{"comments": [{"owner": {"reputation": 8346, "user_id": 6573902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nplar.jpg?s=128&g=1", "display_name": "sophros", "link": "https://stackoverflow.com/users/6573902/sophros"}, "edited": false, "score": 2, "creation_date": 1580733003, "post_id": 44951908, "comment_id": 106182190, "body": "It is really a pity that there is no in-place merge or join (even with restriction that indices must match)."}], "tags": [], "owner": {"reputation": 2146, "user_id": 8231181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJgPD.jpg?s=128&g=1", "display_name": "Rayhane Mama", "link": "https://stackoverflow.com/users/8231181/rayhane-mama"}, "is_accepted": true, "score": 11, "last_activity_date": 1499351614, "creation_date": 1499351614, "answer_id": 44951908, "question_id": 44937462, "link": "https://stackoverflow.com/questions/44937462/outer-merging-two-data-frames-in-place-in-pandas/44951908#44951908", "title": "Outer merging two data frames in place in pandas", "body": "<p>Since there is not <code>inplace</code> parameter in <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html\" rel=\"noreferrer\">pandas.merge</a> i think the most you can do is:</p>\n\n<pre><code>s1 = pd.merge(s1,s2,how='outer')\n</code></pre>\n\n<p>other than that, i don't think there's much left to do.<br>\nHope that was helpful somehow.</p>\n"}], "owner": {"reputation": 61870, "user_id": 395857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Z99mk.jpg?s=128&g=1", "display_name": "Franck Dernoncourt", "link": "https://stackoverflow.com/users/395857/franck-dernoncourt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10579, "favorite_count": 2, "accepted_answer_id": 44951908, "answer_count": 1, "score": 11, "last_activity_date": 1499351614, "creation_date": 1499296944, "last_edit_date": 1499298795, "question_id": 44937462, "link": "https://stackoverflow.com/questions/44937462/outer-merging-two-data-frames-in-place-in-pandas", "title": "Outer merging two data frames in place in pandas", "body": "<p>How can I outer merge two data frames in place in pandas?</p>\n\n<p>For example, assume we have these two data frames:</p>\n\n<pre><code>import pandas as pd\n\ns1 = pd.DataFrame({\n    'time':[1234567000,1234567005,1234567009],\n    'X1':[96.32,96.01,96.05]\n},columns=['time','X1'])  # to keep columns order\n\ns2 = pd.DataFrame({\n    'time':[1234567001,1234567005],\n    'X2':[23.88,23.96]\n},columns=['time','X2'])  # to keep columns order\n</code></pre>\n\n<p>They could be merged with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html\" rel=\"noreferrer\">pandas.DataFrame.merge</a> (<code>s3 = pd.merge(s1,s2,how='outer')</code>) or with  <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html?highlight=merge#pandas.merge\" rel=\"noreferrer\">pandas.merge</a> (<code>s3=s1.merge(s2,how='outer')</code>), but it isn't in place. Instead, I'd like the merged data frame to replace s1 in memory.</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1499296861, "post_id": 44937447, "comment_id": 76851283, "body": "Are you sure those are json objects and not python dicts? You can just loop over the list, check the type first, and get the date if you found what type you were looking for."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499296978, "post_id": 44937447, "comment_id": 76851316, "body": "JSON is a text serialization format. What you have there is some Python object, a list of dicts. Please do not conflate the two."}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499296980, "post_id": 44937447, "comment_id": 76851319, "body": "thanks @AndrasDeak, I get them as outputs from call to the <code>requests</code> python API which returns a json-encoded content of a response."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1499297019, "post_id": 44937447, "comment_id": 76851326, "body": "@user308827 you probably use the <code>response.json()</code> method, which <i>deserializes the JSON text</i> into a Python object. Again, please do not conflate the two."}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499297040, "post_id": 44937447, "comment_id": 76851331, "body": "@juanpa.arrivillaga, thanks! wasn&#39;t aware of that, will update query"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1499297086, "creation_date": 1499297086, "answer_id": 44937483, "question_id": 44937447, "link": "https://stackoverflow.com/questions/44937447/extracting-element-from-list-of-dictionaries-in-python/44937483#44937483", "title": "Extracting element from list of dictionaries in python", "body": "<p>Just check the type and return the corresponding date like so:</p>\n\n<pre><code>input = [{'Id': 46, 'Date': '2016-05-09T00:00:00', 'Type': 1, 'PId': None, 'Ct': None}, {'Id': 108, 'Date': '2017-07-01T00:00:00', 'Type': 10, 'PId': None, 'Ct': None}]\n\ndef example(input):\n\n    for element in input:\n        if element['Type'] == 10:\n            return element['Date']\n\n    return None\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1499297298, "post_id": 44937490, "comment_id": 76851393, "body": "thanks @foslock, I get this error <code>*** AttributeError: &#39;filter&#39; object has no attribute &#39;get&#39;</code>. I am using python 3.6"}, {"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "reply_to_user": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1499297419, "post_id": 44937490, "comment_id": 76851420, "body": "@user308827 Ah, if you are using Python 3, you will need to turn the <code>filter</code> object into a list before you can <code>[0]</code> index into it. I will update."}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1499297485, "post_id": 44937490, "comment_id": 76851439, "body": "thanks! also, do you know if your soln will work if lst is empty? i.e. will it return None or will it return error?"}, {"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "reply_to_user": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1499297547, "post_id": 44937490, "comment_id": 76851455, "body": "@user308827 If the list is empty, neither will throw an exception, <code>type_10_date</code> will be None in the first example, and <code>type_10_objs</code> will be an empty list in the second."}], "tags": [], "owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "is_accepted": true, "score": 1, "last_activity_date": 1499297467, "last_edit_date": 1499297467, "creation_date": 1499297142, "answer_id": 44937490, "question_id": 44937447, "link": "https://stackoverflow.com/questions/44937447/extracting-element-from-list-of-dictionaries-in-python/44937490#44937490", "title": "Extracting element from list of dictionaries in python", "body": "<h2>Simple Loop</h2>\n\n<p>You can use a simple loop, getting the first dictionary with <code>Type</code> set to <code>10</code>.</p>\n\n<pre><code>lst = [\n    {'Id': 46, 'Date': '2016-05-09T00:00:00', 'Type': 1, 'PId': None, 'Ct': None},\n    {'Id': 108, 'Date': '2017-07-01T00:00:00', 'Type': 10, 'PId': None, 'Ct': None},\n]\ntype_10_date = None\nfor obj in lst:\n    if obj.get('Type') == 10:\n        type_10_date = obj.get('Date')\n\nprint(type_10_date)\n# 2017-07-01T00:00:00\n</code></pre>\n\n<h2>Using Filter</h2>\n\n<p>You can also use the built-in <code>filter</code> function if you choose, which takes a predicate function that determines what values in an iterable (the <code>list</code> in this case) should be returned. <strong>Note</strong>: I've included a conversion to a <code>list</code> for Python 3 users who get a <code>filter</code> object back from the built-in filter function.</p>\n\n<pre><code>type_10_objs = list(filter(lambda d: d.get('Type') == 10, lst))\nif type_10_objs:  # This could be an empty list!\n    print(type_10_objs[0].get('Date'))\n# 2017-07-01T00:00:00\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 44937490, "answer_count": 2, "score": 1, "last_activity_date": 1499297467, "creation_date": 1499296822, "last_edit_date": 1499297094, "question_id": 44937447, "link": "https://stackoverflow.com/questions/44937447/extracting-element-from-list-of-dictionaries-in-python", "title": "Extracting element from list of dictionaries in python", "body": "<p>I have a list of dictionary objects like this:</p>\n\n<pre><code>[{'Id': 46, 'Date': '2016-05-09T00:00:00', 'Type': 1, 'PId': None, 'Ct': None},\n{'Id': 108, 'Date': '2017-07-01T00:00:00', 'Type': 10, 'PId': None, 'Ct': None}]\n</code></pre>\n\n<p>I can do this to extract <code>Date</code> from the first element of this list:</p>\n\n<p><code>list_dict[0].get('Date')</code></p>\n\n<p>How can I get the <code>Date</code> corresponding to <code>Type</code> 10 (without hardcoding that it is the 2nd element in the list)? The solution should return None if <code>Type</code> 10 does not exist.</p>\n\n<p>--EDIT:</p>\n\n<p>Previous version of question was assuming that the list was of json objects, they are actually dictionaries</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499296823, "post_id": 44937440, "comment_id": 76851268, "body": "I don&#39;t see any arrays, only tuples. And what&#39;s the question again?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499297218, "post_id": 44937440, "comment_id": 76851374, "body": "I don&#39;t see any code either... just 3 variables..."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499297259, "post_id": 44937440, "comment_id": 76851385, "body": "@AndrasDeak Sorry, I meant tuples. If I need to change them to arrays for something to work, then I could do that too.  The original question is that each time I run it I need a new item chosen from those variables, and they have to correspond to each other"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1499297413, "post_id": 44937440, "comment_id": 76851415, "body": "Do you need post-level uniqueness, or post component level uniqueness? That is, if you post components, A, B and C in week 1, can week 2&#39;s post be components X, B and Z, where B is the same as week 1? Or are the values linked, so you&#39;re selecting matched elements in each <code>tuple</code>?"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 1, "creation_date": 1499297441, "post_id": 44937440, "comment_id": 76851425, "body": "I would recommend instead of having 3 arrays, create a list of dicts instead. Each dict can have keys of topics, description and user with respective values. Will make your life easier. Or maybe just a list of tuples instead."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499297603, "post_id": 44937440, "comment_id": 76851467, "body": "@HunkDivine I was thinking that it might be the way to go, but the python docs acted like it had to be a string and a number. Can you possibly elaborate and give me an example in my use case?"}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1499297680, "post_id": 44937440, "comment_id": 76851484, "body": "@ShadowRanger In my example, Command line, The best command-line....., and -Tilde should all be selected"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1499297815, "post_id": 44937440, "comment_id": 76851527, "body": "It sounds like you need to store the list index in a file. Every time the script runs, it reads the file, increments the index, gets that element of the list, and writes the new index to the file."}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499297817, "post_id": 44937440, "comment_id": 76851529, "body": "@AlexBracken redditDict = [{&#39;topic&#39;:&#39;random topic 1&#39;, &#39;description&#39;:&#39;random description 1&#39;, &#39;user&#39;: &#39;random user 1&#39;}, {&#39;topic&#39;:&#39;random topic 2&#39;, &#39;description&#39;:&#39;random description 2&#39;, &#39;user&#39;: &#39;random user 2&#39;}]  Similarly, instead of the dicts, you can have tuple directly with values like [(&#39;random topic 1&#39;, &#39;random desc 1&#39;, &#39;random user 1&#39;), (&#39;random topic 2&#39;, &#39;random desc 2&#39;, &#39;random user 2&#39;)]"}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298190, "post_id": 44937440, "comment_id": 76851619, "body": "@Barmar Can you give me instructions on how I would go about doing that?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298236, "post_id": 44937440, "comment_id": 76851637, "body": "@AlexBracken Which part of it is confusing you? They&#39;re all pretty simple steps."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499298384, "post_id": 44937440, "comment_id": 76851667, "body": "@HunkDivine That makes a little more sense, but how would I go about choosing a different dict each time?"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298497, "post_id": 44937440, "comment_id": 76851694, "body": "As @Barmar mentioned, an number in a file somewhere. read a number from a file. use at as the index for the list and you have your three things. Also update your number in the file. Make sure to reset the number if it reaches the end of the list."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298533, "post_id": 44937440, "comment_id": 76851705, "body": "@Barmar I understand that it may be simple to you, but I don&#39;t even know where to begin, so in my eyes that answer was vague and not helpful in and of itself"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298605, "post_id": 44937440, "comment_id": 76851720, "body": "Just take it step by step. Do you know how to open a file and read the contents? Do you know how to convert a string to a number? Do you know how to add 1 to a number? Do you know how to use a number as the index into a list or tuple? Do you know how to write a number to a file?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298660, "post_id": 44937440, "comment_id": 76851737, "body": "I don&#39;t know how I can be more helpful without actually writing the script for you. Each of those steps is just 1 or two lines of Python code."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298684, "post_id": 44937440, "comment_id": 76851741, "body": "@Barmar Okay, well as a testament to my knowledge (or lack thereof), the only thing on that list I am confident I can do is add 1 to a number. I&#39;m not sure how much more helpful you can be either without writing a script unless you would like to baby me through it"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298720, "post_id": 44937440, "comment_id": 76851750, "body": "SO is not a tutoring service. You need to read a tutorial that explains how to use files from Python."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298779, "post_id": 44937440, "comment_id": 76851763, "body": "Okay. Thank you for getting me started at least @Barmar"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499299284, "post_id": 44937721, "comment_id": 76851867, "body": "What would count.txt need to look like?"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "reply_to_user": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499299592, "post_id": 44937721, "comment_id": 76851932, "body": "just a number, create it and put a 0 in it to start"}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499299937, "post_id": 44937721, "comment_id": 76851997, "body": "Okay, I&#39;ve got that done. Now how do I reference the data in a variable?"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "reply_to_user": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499300123, "post_id": 44937721, "comment_id": 76852036, "body": "the function returns a dict, you can get the things inside like &gt;&gt;&gt;result = example() &gt;&gt;&gt; result[&quot;topic&quot;] &gt;&gt;&gt; result[&quot;description&quot;]  You probably want to structure the function in a different way according to your other reddit code."}, {"owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499309439, "post_id": 44937721, "comment_id": 76854259, "body": "One last thing: whenever i run it, it says, &quot;TypeError: must be str, not int&quot;"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "reply_to_user": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "edited": false, "score": 0, "creation_date": 1499358868, "post_id": 44937721, "comment_id": 76884249, "body": "@AlexBracken change f1.write(&quot;%s&quot; % index+1) to f1.write(&quot;%s&quot; % str(index+1)) . Also make sure to accept the answer if it works."}], "tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1499298848, "creation_date": 1499298848, "answer_id": 44937721, "question_id": 44937440, "link": "https://stackoverflow.com/questions/44937440/i-need-my-script-to-cycle-through-3-corresponding-arrays/44937721#44937721", "title": "I need my script to cycle through 3 corresponding arrays", "body": "<p>Some thing along these lines, you can change your data to dicts or tuples however you like.</p>\n\n<pre><code>def example():\n    f1 = open(\"count.txt\",\"r+\")\n    index = int(f1.read())\n    data = [{'topic':'random topic 1', 'description':'random description 1', 'user': 'random user 1'}, {'topic':'random topic 2', 'description':'random description 2', 'user': 'random user 2'}]\n\n    f1.seek(0,0)\n    f1.write(\"%s\" % index+1)\n    f1.close()\n    return data[index]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4535073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9acb72d22cba44ac4083051be66ccab?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Bracken", "link": "https://stackoverflow.com/users/4535073/alex-bracken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499298848, "creation_date": 1499296760, "last_edit_date": 1499297286, "question_id": 44937440, "link": "https://stackoverflow.com/questions/44937440/i-need-my-script-to-cycle-through-3-corresponding-arrays", "title": "I need my script to cycle through 3 corresponding arrays", "body": "<p>Okay, this is going to need a little bit of explanation...</p>\n\n<p>I'm making a reddit bot with praw, and I am storing topics, descriptions for the topic, and the user who submitted the top in a variable via an array. </p>\n\n<p>Each week, the bot will post a new reddit thread which should contain 1 topic, and it's respective description and submitter. </p>\n\n<p>What I need the script to do is cycle through the arrays without repeating any of the data, so that I don't get any repeat posts.</p>\n\n<p>The bot will be on a scheduler that runs it every week, which is the part that is tripping me up, since normal methods won't permanently clear the options.</p>\n\n<p>Optimally, I would want to store the code in another variable for each data type that I could use to put in the preset messages</p>\n\n<p>Here's the variables:</p>\n\n<pre><code>#Question Databank\nchallengeTopicData = ('Command line', 'Choose your own theme', 'Memes', 'Glitch','No app drawer','Not minimal')\nchallengeDescriptionData = ('The best command-line/vintage computer theme','Choose a theme from given pool of choices and they will have to stick to it completely.','Make a theme from a meme. It\\'s literally wide open - make the crappiest, low effort theme you can for 1 week only','Create a theme based around a glitch effect, whether it be the wallpaper, widget, or both','In this challenge you must create a homescreen with all of your icons on it, and show off your homescreen organization skills','Literally anything that can\\'t be considered minimal')\nchallengeSubmitterData = ('-Tilde','thetinygoat','SuperScientistOfDoom','hallowaslosdu','inaforestgump','ssyynnxx')\n</code></pre>\n"}, {"tags": ["python", "uuid"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1499296798, "post_id": 44937406, "comment_id": 76851261, "body": "Although not mutable in your case, the principle is the same - the default argument value is evaluated <i>once</i>, when the method is defined. And the solution is the same - set <code>None</code> as the default, and generate a UUID inside the method <code>if this_uuid is None:</code>."}, {"owner": {"reputation": 906, "user_id": 2391352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9314d1df00ec60f0bab75d9084a1aa95?s=128&d=identicon&r=PG", "display_name": "UnitasBrooks", "link": "https://stackoverflow.com/users/2391352/unitasbrooks"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1499357359, "post_id": 44937406, "comment_id": 76883203, "body": "Thanks, I think the most confusing part for me is that this was executed in a AWS lambda, and I was getting the same UUID each time the lambda was executed, not each time the object was instantiated. I&#39;m still confused by that behavior, but I&#39;ll probably have to rephrase the question."}], "owner": {"reputation": 906, "user_id": 2391352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9314d1df00ec60f0bab75d9084a1aa95?s=128&d=identicon&r=PG", "display_name": "UnitasBrooks", "link": "https://stackoverflow.com/users/2391352/unitasbrooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1499296724, "answer_count": 0, "score": 0, "last_activity_date": 1499296769, "creation_date": 1499296520, "question_id": 44937406, "link": "https://stackoverflow.com/questions/44937406/uuids-created-in-the-class-constructors-default-parameters-are-not-unique", "closed_reason": "Duplicate", "title": "UUIDs created in the class constructors default parameters are not unique", "body": "<p>I have created a class like this:</p>\n\n<pre><code>class test:\ndef __init__(self, this_uuid=uuid.uuid4().hex):\n    self.this_uuid = this_uuid\n</code></pre>\n\n<p>When I instantiate it without parameters and print the this_uuid value like this:</p>\n\n<pre><code>t = test()\nprint t.this_uuid\n</code></pre>\n\n<p>The values I get are not random, in fact if I do it two or three times in a row spaced several seconds apart I get the same one. Can someone explain this behavior to me? If the uuid is not made in the constructor parameters it is random. This is on python 2.7.</p>\n"}, {"tags": ["python", "multithreading", "popen", "py4j"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4806659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12231d38fd68db0520d5f06d5cba1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargava Sharma", "link": "https://stackoverflow.com/users/4806659/bhargava-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1499447998, "creation_date": 1499447998, "answer_id": 44976479, "question_id": 44937395, "link": "https://stackoverflow.com/questions/44937395/running-mvn-in-background-from-python-popen-and-thread-function/44976479#44976479", "title": "Running mvn in background from Python Popen and thread function", "body": "<p>I found the answer to the question.</p>\n\n<p>I have created a thread which will take the Popen command taking a small shell script as input and passing stdout params as kwargs so that the output is not displayed.\nThe server was invoked and could be used from other functions.</p>\n\n<p>Hope that helps</p>\n"}], "owner": {"reputation": 111, "user_id": 4806659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12231d38fd68db0520d5f06d5cba1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargava Sharma", "link": "https://stackoverflow.com/users/4806659/bhargava-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499447998, "creation_date": 1499296418, "question_id": 44937395, "link": "https://stackoverflow.com/questions/44937395/running-mvn-in-background-from-python-popen-and-thread-function", "title": "Running mvn in background from Python Popen and thread function", "body": "<p>I am implementing a gateway server automation using Py4j module.The gateway server needs to be initiated every-time the user invokes the function.The issue I am facing is that I am unable to run the function in background.\nHere is the code:</p>\n\n<pre><code>def mvn():\nlogger = open(\"log.txt\", 'w')\nlogger.seek(0)\nthread1 = Thread(target=Popen, args=(\"./runJVM.sh\"),kwargs=\n                {\"stdout\":logger})\nthread1.daemon = True\nthread1.start()\n# stdout, error = proc.communicate()\n# logger.write(stdout)\nlogger.close()\n</code></pre>\n\n<p>There are two issues I am facing here\n1)If I specify the kwargs stdout to logger (a log file to check output),it throws me an error saying that stdout has multiple arguments specified.</p>\n\n<p>2)If I dont specify the stdout option, the output of the thread is displayed onto ipython terminal which is not I wanted.</p>\n\n<p>All i want is to invoke the server in the background so that other functions can access the java gateway server and access the methods from the same which can be used from ipython.</p>\n\n<p>You can safely assume that the mvn functions are working fine when run through the terminal directly.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt4", "qgraphicsitem"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499297747, "post_id": 44937358, "comment_id": 76851507, "body": "What do you mean when you say it is not updated, I see that if you move the QEdgeGraphicItem"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301299, "post_id": 44937358, "comment_id": 76852316, "body": "It is that you have implemented it in a wrong way, the position is the center of the rectangle in which the item is drawn, and you have not worked with them. Exactly what do you want to get in your project?"}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301312, "post_id": 44937358, "comment_id": 76852319, "body": "I edited the question to be more clear. I mean the value of getPos()  and getScenePos() of the QEdgeGraphicItem. I print those values on the output for the Nodes and the Edge on every repain to see any change. Node position are updated, edge podition don&#39;t."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301377, "post_id": 44937358, "comment_id": 76852330, "body": "This is not changing because you&#39;ve never moved it."}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301517, "post_id": 44937358, "comment_id": 76852361, "body": "I want to get the current position of the Edge. If its not updated any child item is draw at 0,0. As you said the position should be the center of the bounding rect, but getScenePos return 0,0. And I don&#39;t know how to get it right."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301563, "post_id": 44937358, "comment_id": 76852371, "body": "That you use the paint function does not imply that the figure has moved, but you have drawn it elsewhere."}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301639, "post_id": 44937358, "comment_id": 76852387, "body": "The movement of the edge always depend on the node position. I got this from the QT Elastic Node example. Maybe I missed something. Do you have any solution for this?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301643, "post_id": 44937358, "comment_id": 76852388, "body": "What I can do is create classes differently and print those data, would that be okay?"}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499301978, "post_id": 44937358, "comment_id": 76852476, "body": "I know  that paint() only draw. The changes on the edge are computed on the adjust() method. It call prepareGeometryChange() that I guessed it should also update the position, but it don&#39;t."}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499302482, "post_id": 44937358, "comment_id": 76852605, "body": "Thank you but What I really need is the QEdgeGraphicItem label, that is set as a child item, to be drawn in the middle of the edge. But as you can see it&#39;s drawn on the middel of the scene. It&#39;s because the position of its father is 0,0."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499302899, "post_id": 44937358, "comment_id": 76852703, "body": "Okay, so wait, please."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499303164, "post_id": 44937358, "comment_id": 76852752, "body": "How do you want the text, aligned with the line?"}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499303608, "post_id": 44937358, "comment_id": 76852850, "body": "It would be alwais horizontal."}, {"owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499347408, "post_id": 44937358, "comment_id": 76875364, "body": "@eyllanesc, any clue?"}], "owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499302653, "creation_date": 1499296099, "last_edit_date": 1499302653, "question_id": 44937358, "link": "https://stackoverflow.com/questions/44937358/qgraphicsitem-position-not-updated-pyqt4", "title": "QGraphicsItem position not updated (PyQt4)", "body": "<p>I'm trying to guess how to update the position of the edge when the nodes are moved or why it's not been automatically updated. I have found that the position of the nodes is not updated if I remove the self.update() from the mouseReleaseEvent but I don't know which is the mecanism to get the same on the edge class. Can anybody help me with this?\nEDIT: With \"position\"  I mean the value got by getPos()  or getScenePos() for the QEdgeGraphicItem. It's printed on the output for the nodes and the Edge. </p>\n\n<pre><code>#!/usr/bin/env python\n\nimport math\n\nfrom PyQt4 import QtCore, QtGui\nfrom PyQt4.QtGui import QGraphicsView, QGraphicsTextItem\n\n\nclass QEdgeGraphicItem(QtGui.QGraphicsItem):\n    Type = QtGui.QGraphicsItem.UserType + 2\n\n    def __init__(self, sourceNode, destNode, label=None):\n        super(QEdgeGraphicItem, self).__init__()\n\n        self.sourcePoint = QtCore.QPointF()\n        self.destPoint = QtCore.QPointF()\n\n        self.setAcceptedMouseButtons(QtCore.Qt.NoButton)\n        self.setFlag(QtGui.QGraphicsItem.ItemIsMovable)\n        self.setFlag(QtGui.QGraphicsItem.ItemSendsGeometryChanges)\n        # self.setCacheMode(QtGui.QGraphicsItem.DeviceCoordinateCache)\n        self.source = sourceNode\n        self.dest = destNode\n\n        self.label = QGraphicsTextItem(\"WHY IN THE HELL IS IT IN 0,0\", self)\n        self.label.setParentItem(self)\n        self.label.setDefaultTextColor(QtCore.Qt.black)\n        self.source.addEdge(self)\n        self.dest.addEdge(self)\n        self.adjust()\n\n    def adjust(self):\n        if not self.source or not self.dest:\n            return\n\n        line = QtCore.QLineF(self.mapFromItem(self.source, 0, 0),\n                             self.mapFromItem(self.dest, 0, 0))\n        self.prepareGeometryChange()\n        self.sourcePoint = line.p1()\n        self.destPoint = line.p2()\n\n    def boundingRect(self):\n        if not self.source or not self.dest:\n            return QtCore.QRectF()\n        extra = 2\n        return QtCore.QRectF(self.sourcePoint,\n                             QtCore.QSizeF(self.destPoint.x() - self.sourcePoint.x(),\n                                           self.destPoint.y() - self.sourcePoint.y())).normalized().adjusted(-extra,\n                                                                                                             -extra,\n                                                                                                             extra,\n                                                                                                             extra)\n    def paint(self, painter, option, widget):\n        if not self.source or not self.dest:\n            return\n\n        # Draw the line itself.\n        line = QtCore.QLineF(self.sourcePoint, self.destPoint)\n\n        if line.length() == 0.0:\n            return\n\n        painter.setPen(QtGui.QPen(QtCore.Qt.black, 1, QtCore.Qt.SolidLine,\n                                  QtCore.Qt.RoundCap, QtCore.Qt.RoundJoin))\n        painter.drawLine(line)\n\n        painter.setBrush(QtCore.Qt.NoBrush)\n        painter.setPen(QtCore.Qt.red)\n        painter.drawRect(self.boundingRect())\n        print \"Edge:\"+str(self.scenePos().x()) + \" \" + str(self.scenePos().y())\n\n\nclass QNodeGraphicItem(QtGui.QGraphicsItem):\n    Type = QtGui.QGraphicsItem.UserType + 1\n\n    def __init__(self, label):\n        super(QNodeGraphicItem, self).__init__()\n\n        # self.graph = graphWidget\n        self.edgeList = []\n        self.newPos = QtCore.QPointF()\n\n        self.setFlag(QtGui.QGraphicsItem.ItemIsMovable)\n        self.setFlag(QtGui.QGraphicsItem.ItemSendsGeometryChanges)\n        # self.setCacheMode(QtGui.QGraphicsItem.DeviceCoordinateCache)\n        # self.setZValue(1)\n        self.size = 40\n        self.border_width = 4\n\n    def type(self):\n        return QNodeGraphicItem.Type\n\n    def addEdge(self, edge):\n        self.edgeList.append(edge)\n        edge.adjust()\n\n    def boundingRect(self):\n        x_coord = y_coord = (-1*(self.size/2)) - self.border_width\n        width = height = self.size+23+self.border_width\n        return QtCore.QRectF(x_coord, y_coord , width,\n                             height)\n\n    def paint(self, painter, option, widget):\n        x_coord = y_coord = -(self.size / 2)\n        width = height = self.size\n        painter.save()\n\n        painter.setBrush(QtGui.QBrush(QtGui.QColor(100, 0, 200, 127)))\n        painter.setPen(QtCore.Qt.black)\n        painter.drawEllipse(x_coord, y_coord, width, height)\n\n        painter.restore()\n        print \"Node: \" + str(self.scenePos().x()) + \" \" + str(self.scenePos().y())\n\n    def itemChange(self, change, value):\n        if change == QtGui.QGraphicsItem.ItemPositionHasChanged:\n            for edge in self.edgeList:\n                edge.adjust()\n        return super(QNodeGraphicItem, self).itemChange(change, value)\n\n    def mousePressEvent(self, event):\n        self.update()\n        super(QNodeGraphicItem, self).mousePressEvent(event)\n\n    def mouseReleaseEvent(self, event):\n        self.update()\n        super(QNodeGraphicItem, self).mouseReleaseEvent(event)\n\n\nif __name__ == '__main__':\n    import sys\n\n    app = QtGui.QApplication(sys.argv)\n    QtCore.qsrand(QtCore.QTime(0, 0, 0).secsTo(QtCore.QTime.currentTime()))\n    node1 = QNodeGraphicItem(\"Node1\")\n    node2 = QNodeGraphicItem(\"Node2\")\n    edge  = QEdgeGraphicItem(node1,node2)\n    view = QGraphicsView()\n    view.setCacheMode(QtGui.QGraphicsView.CacheBackground)\n    view.setViewportUpdateMode(QtGui.QGraphicsView.BoundingRectViewportUpdate)\n    view.setRenderHint(QtGui.QPainter.Antialiasing)\n    view.setTransformationAnchor(QtGui.QGraphicsView.AnchorUnderMouse)\n    view.setResizeAnchor(QtGui.QGraphicsView.AnchorViewCenter)\n\n    view.scale(0.8, 0.8)\n    view.setMinimumSize(400, 400)\n    view.setWindowTitle(\"Example\")\n    scene = QtGui.QGraphicsScene(view)\n    scene.setItemIndexMethod(QtGui.QGraphicsScene.NoIndex)\n    scene.setSceneRect(-400, -400, 800, 800)\n    view.setScene(scene)\n    scene.addItem(node1)\n    scene.addItem(node2)\n    scene.addItem(edge)\n    view.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pandas", "data-structures"], "owner": {"reputation": 135, "user_id": 8206319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9f9f5ca68967143334dbd5964673ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Rai", "link": "https://stackoverflow.com/users/8206319/prashant-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499295887, "creation_date": 1499295887, "question_id": 44937329, "link": "https://stackoverflow.com/questions/44937329/sort-a-multi-indexed-list-in-pandas-dataframe", "title": "sort a multi indexed list in pandas dataframe", "body": "<p>I have multi indexed survey data in pandas dataframe in a list format. One subset of it is given below. I am trying to sort the columns first in ascending order and than take the count of value for each rank. </p>\n\n<p><code>rank these items on a scale of 1-5</code>   <code>rank these items on a scale of 1-3</code>                                           </p>\n\n<pre><code>                                               A   B   C                     \nX   Y   Z\n                                               1   2   1\n1   2   1                                      2   3   2\n2   1   3                                      1   2   3\n3   1   1                                      1   1   2\n5   3   2                                      2   1   3\n1   1   2                                      3   1   1\nNA  5   3                                      3   2   NA\n4   NA  NA                                     1   3   1\n1   4   4                                      2   NA  2\n3   3   5`\n</code></pre>\n\n<p>I used the following code to drop NA from the data frame and take the count of values but i am not able to sort the values in ascending order before doing the count.</p>\n\n<pre><code>`def find_column_with_max_length(df):\n    n = ''\n    count = 0\n    for name, values in df.iteritems():\n        df[name] = pd.to_numeric(df[name], errors='coerce')\n        c = len(df[name].value_counts().values.tolist())\n        if c &gt; count:\n            count = c\n            n = name\n    return n`\n\n    df1 = pd.DataFrame()\n    df1 = df1.sort_values('n', ascending=True)\n    n = find_column_with_max_length(df)\n    df1[n] = pd.DataFrame(df[n].value_counts().values.tolist(), columns=[n])\n    for name, values in df.iteritems():\n        if name != n:\n            df1[name] = pd.DataFrame(df[name].value_counts().values.tolist(),\n                                        columns=[name])`    \n</code></pre>\n\n<p>Any help in this regard would be greatly appreciated.</p>\n"}, {"tags": ["python", "mysql", "angularjs", "tornado"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1499296714, "post_id": 44937314, "comment_id": 76851240, "body": "Isolated transactions?"}, {"owner": {"reputation": 127, "user_id": 3115720, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/cb3dc068a4d55428817675055e725248?s=128&d=identicon&r=PG&f=1", "display_name": "savinay narendra", "link": "https://stackoverflow.com/users/3115720/savinay-narendra"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1499298259, "post_id": 44937314, "comment_id": 76851644, "body": "yes, they are isolated. The data is updated from another script not handled by the tornado api."}, {"owner": {"reputation": 10401, "user_id": 681044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWZ3c.jpg?s=128&g=1", "display_name": "kwarunek", "link": "https://stackoverflow.com/users/681044/kwarunek"}, "edited": false, "score": 0, "creation_date": 1499327319, "post_id": 44937314, "comment_id": 76861191, "body": "Do you confirm that frontend part (angular) makes the ajax request? Show some code, it might help"}, {"owner": {"reputation": 127, "user_id": 3115720, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/cb3dc068a4d55428817675055e725248?s=128&d=identicon&r=PG&f=1", "display_name": "savinay narendra", "link": "https://stackoverflow.com/users/3115720/savinay-narendra"}, "edited": false, "score": 0, "creation_date": 1499357094, "post_id": 44937314, "comment_id": 76883021, "body": "I have added the code. Please have a look."}, {"owner": {"reputation": 1018, "user_id": 1643900, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Pb8O6.jpg?s=128&g=1", "display_name": "desertkun", "link": "https://stackoverflow.com/users/1643900/desertkun"}, "edited": false, "score": 0, "creation_date": 1499382174, "post_id": 44937314, "comment_id": 76895653, "body": "How do you update the <code>db.table</code>? Do you commit changes? If not, do you have auto commit enabled?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 2382905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50bb1ea4ac079fe2aedd62d3df0ed90?s=128&d=identicon&r=PG", "display_name": "Dany Flores", "link": "https://stackoverflow.com/users/2382905/dany-flores"}, "is_accepted": false, "score": 0, "last_activity_date": 1499812462, "creation_date": 1499812462, "answer_id": 45045512, "question_id": 44937314, "link": "https://stackoverflow.com/questions/44937314/tornado-updated-data-from-mysql-not-showing-in-frontend-served-by-tornado-only/45045512#45045512", "title": "Tornado: Updated data from mysql not showing in frontend served by tornado. Only shows after restarting the server", "body": "<p>You don't said what mysql connector are you using, but if you are using mysqldb try something like this:</p>\n\n<pre><code>class ApiRequestHandler(web.RequestHandler):\n    def get(self):\n       cur = conn.cursor(MySQLdb.cursors.DictCursor) \n       cur.execute(\"SELECT * from db.table\")\n       rows = cur.fetchall()\n       self.write(json.dumps(rows))\n</code></pre>\n\n<p>Also I recommend you to start using asyncio calls, for example using python 3.5 or up, you can use the aiomysql</p>\n\n<pre><code>class ApiRequestHandler(web.RequestHandler):\n    async def get(self):\n       cur = await conn.cursor() \n       await cur.execute(\"SELECT * from db.table\")\n       rows = await cur.fetchall()\n       self.write(json.dumps(rows))\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 3115720, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/cb3dc068a4d55428817675055e725248?s=128&d=identicon&r=PG&f=1", "display_name": "savinay narendra", "link": "https://stackoverflow.com/users/3115720/savinay-narendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499812462, "creation_date": 1499295803, "last_edit_date": 1499357036, "question_id": 44937314, "link": "https://stackoverflow.com/questions/44937314/tornado-updated-data-from-mysql-not-showing-in-frontend-served-by-tornado-only", "title": "Tornado: Updated data from mysql not showing in frontend served by tornado. Only shows after restarting the server", "body": "<p>I have a tornado backend which serves an Angular frontend. On updating the database, the updated data is not being fetched by the tornado api. It only appears after I restart the server. Can someone please help me with this? I want the data fetched to be updated real-time.</p>\n\n<p>AngularJS ajax request:</p>\n\n<pre><code>   $http({\n            method: \"GET\",\n            url: \"http://localhost:9915/api/\"\n        }).then(function mySuccess(response) {\n            console.log(response);\n            $scope.data = response.data;\n            sharedData.set(response.data);\n            for (var i = $scope.data.length - 1; i &gt;= 0; i--) {\n\n                var coverageVal = $scope.data[i].Coverage;\n                var coverageHealth = $scope.data[i].Health;\n\n                if (coverageVal &gt;= 95.00) {\n                    $scope.data[i][\"colorCoverage\"] = \"cyan\";\n                } else if (coverageVal &gt;= 90.00 &amp;&amp; coverageVal &lt; 95.00) {\n                    $scope.data[i][\"colorCoverage\"] = \"warning\";\n                } else {\n                    $scope.data[i][\"colorCoverage\"] = \"danger\";\n                }\n\n                if (coverageHealth &gt;= 95.00) {\n                    $scope.data[i][\"colorHealth\"] = \"cyan\";\n                } else if (coverageHealth &gt;= 90.00 &amp;&amp; coverageHealth &lt; 95.00) {\n                    $scope.data[i][\"colorHealth\"] = \"warning\";\n                } else {\n                    $scope.data[i][\"colorHealth\"] = \"danger\";\n                }\n\n            }\n        }, function myError(err) {\n            console.log(\"error\");\n            console.log(err);\n        });\n</code></pre>\n\n<p>Tornado api to fetch data:</p>\n\n<pre><code>     class ApiRequestHandler(web.RequestHandler):\n        def get(self):\n           cur = conn.cursor()\n           cur.execute(\"SELECT * from db.table\")\n           res = []\n           for row in cur:\n              res.append(row)\n           self.write(json.dumps(res))\n</code></pre>\n"}, {"tags": ["python", "screenshot", "blender"], "comments": [{"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 1, "creation_date": 1499301964, "post_id": 44937262, "comment_id": 76852468, "body": "The --background option runs with no UI...so how do you expect to iterate through UI elements to take a screenshot?"}, {"owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 1, "creation_date": 1499351806, "post_id": 44937262, "comment_id": 76879098, "body": "Blender <b>process</b> is launched in background with the UI just <b>not showed</b> but still it&#39;s available (on purpose, so tasks / rendering can be scripted / automated). UI components, even not displayed, are just considered as objects like other ones so you can use / modify / create them or manipulate them with operators like bpy.ops.someObject.doSomething. Try <code>blender --background --python screenshot.py</code> and you&#39;ll see the script iterating through each components of UI tree (Window &gt; Screen &gt; Scene &gt; Area). By the way, try <code>blender --python screenshot.py</code>  and you&#39;ll get an &quot;empty&quot; screenshot."}, {"owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 1, "creation_date": 1499354340, "post_id": 44937262, "comment_id": 76881039, "body": "For a better comprehension / full explanation : <a href=\"https://docs.blender.org/api/blender_python_api_current/info_tips_and_tricks.html#don-t-use-blender\" rel=\"nofollow noreferrer\">Blender Official tips and tricks</a> This feature could be very useful for people who are interested in controlling (thanks to multiview / step by step screenshots) programmatic modeling / manipulations (using open source software : Blender instead of other limited tools, like OpenScad), let&#39;s say in a 3D printing context. Instead of seeing only final result, being able to programmatically take screenshots can <b>really</b> help &quot;debugging&quot; !"}, {"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1499357994, "post_id": 44937262, "comment_id": 76883673, "body": "from the tips and tricks page:  &quot;scripts that are not interactive it can end up being more efficient not to use Blenders interface at all and instead execute the script on the command line.&quot;  the key words are &quot;not interactive&quot; - you can render out to a file, but you can&#39;t take a <i>screen</i> shot of something that isn&#39;t on the screen.  The UI isn&#39;t rendered at all.  The Blender <i>objects</i> and scene graph are available, but the UI elements are not.  In order for your screenshot to work, you would need to render the UI out to a file, and I don&#39;t know of any UIs that work that way."}, {"owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1499364568, "post_id": 44937262, "comment_id": 76887715, "body": "Thanks Dale for your help but call the same command line (point 3) <b>without &quot;--background&quot;</b>, so you now have a &quot;full&quot; Blender UI running and still screenshot is not doing what is expected ! (while you can see the interface modified by the script itself if you uncomment the lines indicated before). You can even set <b>Full = True</b> in <b>bpy.ops.screen.screenshot</b> (so <b>all</b> the UI should be captured) ... same result ! I&#39;m actually able to render a lot of things from python with blender in background but this approach is limited since you have to render view by view and cannot see selections"}, {"owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1499364629, "post_id": 44937262, "comment_id": 76887754, "body": "While I should be able to customize the UI to have a multiaxis view a make a screenshot of the full window. By the way, since you seem well understanding the rendering process, I&#39;m quite interested in how you can programmatically render a selection (actually one of my main concern, being able to &quot;see&quot; / check if the selected edge loop is the good one before extrusion), and by &quot;selection&quot; I mean the edges highligthed (selected) before manipulation. Thanks"}, {"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1499366892, "post_id": 44937262, "comment_id": 76888934, "body": "I&#39;m not sure this is possible.  I played around with it a bit and it seems like the python script runs <i>before</i> the UI shows.  Try it!  Add <code>print(&quot;DONE!&quot;)</code> right after the call to <code>bpy.ops.screen.screenshot</code> and then add <code>time.delay(5)</code> after that (of course, <code>import time</code> at the top as well).  You will see that the script prints &quot;DONE&quot; (meaning the screenshot is already taken) and then five seconds later the UI will appear.  So, the screenshot script happens before the UI appears, and there doesn&#39;t seem to be any way to make the script execute afterwards."}, {"owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1499371387, "post_id": 44937262, "comment_id": 76891199, "body": "I&#39;ve also tried many tests like those ones: delaying script, looking for events with application handlers, using a dummy/empty blend file, etc. That&#39;s why I wrote <i>the problem seems coming from calling Blender with &quot;--python somescript.py&quot; directly from the command line</i> I think we can call that <b>a bug since this feature is not usable because scripts are only interpreted before UI is ready</b>, and that&#39;s probably why the context is incorrect no matter Blender is running in background or not ! Thanks for your help, I&#39;m filling a bug unless you find a workaround, feel free to write an answer."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1688285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cb1f000073fa4e933ed072929c8fb5?s=128&d=identicon&r=PG", "display_name": "trippeljojo", "link": "https://stackoverflow.com/users/1688285/trippeljojo"}, "edited": false, "score": 0, "creation_date": 1598018288, "post_id": 44971998, "comment_id": 112329592, "body": "is this still an issue in blender 2.8?"}], "tags": [], "owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "is_accepted": true, "score": 1, "last_activity_date": 1499505065, "last_edit_date": 1499505065, "creation_date": 1499434041, "answer_id": 44971998, "question_id": 44937262, "link": "https://stackoverflow.com/questions/44937262/blender-creates-screenshot-using-python-script-but-not-when-running-in-backgroun/44971998#44971998", "title": "Blender creates screenshot using python script but not when running in background", "body": "<p>Got the answer from a Blender guy (thanks sergey). Bottom line : <strong>it's a limitation since all the scripts passed via command line argument are executed at command line processing time, prior to any OpenGL draw is done</strong> !</p>\n\n<blockquote>\n  <p>The warning is caused by script trying to trick the system and\n  override the context, that context is likely in inconsistent state.\n  When running screenshot from the interface you don't need to override\n  any of the contexts.</p>\n  \n  <p>All the scripts passed via command line argument are executed at\n  command line processing time, prior to any OpenGL draw is done. The\n  screenshot operator itself is just reading OpenGL buffer,m without\n  doing any actual drawing (it can't draw anything since that'd be\n  unsafe).</p>\n  \n  <p>When running blender in background mode, there is no window created,\n  which also means there is no OpenGL context. You can;t use screenshot\n  in such configuration.</p>\n  \n  <p>So thanks for the report, but it's just limitation which can not be\n  easily bypassed.</p>\n</blockquote>\n\n<p><strong>Precision</strong> : (since the provided code do not show all the attempts made trying to \"trick\" Blender)</p>\n\n<p>Sadly, if you are also / still interested in such feature, you'll have to think outside (Blender) box ! Don't waste your time trying to \"trick\" Blender, like delaying script execution, playing with application handlers, faking script import in a Text editor, etc. ... I've done it for you : it doesn't work, probably for a very similar reason.</p>\n"}], "owner": {"reputation": 21, "user_id": 8261673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtKAX5Qzfn0/AAAAAAAAAAI/AAAAAAAAABE/pPhKMK5SJzE/photo.jpg?sz=128", "display_name": "Another Tux User", "link": "https://stackoverflow.com/users/8261673/another-tux-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "accepted_answer_id": 44971998, "answer_count": 1, "score": 1, "last_activity_date": 1499505065, "creation_date": 1499295462, "last_edit_date": 1499433954, "question_id": 44937262, "link": "https://stackoverflow.com/questions/44937262/blender-creates-screenshot-using-python-script-but-not-when-running-in-backgroun", "title": "Blender creates screenshot using python script but not when running in background", "body": "<p>Am I crazy or is there some bug with this feature (using python script with blender running in background) ?</p>\n\n<p>1/ Copy / paste the following code (from screenshot.py) inside Blender (switch to Scripting view) and it will take a screenshot but ...</p>\n\n<p>2/ Call this script from command line : (so you can automatize screenshots while you're modifying the scene with your script(s) ... for your blog, a tutorial, etc.)</p>\n\n<pre><code>blender --background --python screenshot.py\n</code></pre>\n\n<p>And it will crash without giving informations about what is \"incorrect\" in the context</p>\n\n<p>screenshot.py :</p>\n\n<pre><code>import os, sys\n\n#FIXME: Blender creates screenshot using python but not when running in background\n#\n# Same result from Ubuntu stock version (2.76) and from ppa (2.78)\n#\n# Within Blender : unable to fix this last warning but screenshot is generated !\n#\n#Traceback (most recent call last):\n#  File \"/usr/share/blender/2.78/scripts/startup/bl_ui/space_text.py\", line 32, in draw\n#    text = st.text\n#AttributeError: 'SpaceView3D' object has no attribute 'text'\n#\n# From command line (crash) : blender --background --python screenshot.py\n# Unable to determine what's wrong in the context\n#\n#Traceback (most recent call last):\n#(...)\n#File \"/usr/share/blender/2.78/scripts/modules/bpy/ops.py\", line 187, in __call__\n#    ret = op_call(self.idname_py(), C_dict, kw, C_exec, C_undo)\n#RuntimeError: Operator bpy.ops.screen.screenshot.poll() failed, context is incorrect\n\ndef screenshot(P_filename, P_path = None):\n  import bpy\n\n  L_saveAs = P_filename\n  L_saveAs = os.path.join(P_path, L_saveAs) if P_path else os.path.join(\"/tmp\", L_saveAs)\n  print(\"Scene saved in \" + L_saveAs)\n\n  #XXX: switching to 3D full view = maximize scene in main window\n  #bpy.context.window.screen = bpy.data.screens['3D View Full']\n  for window in bpy.context.window_manager.windows:\n    screen = window.screen\n    print(\"Window : \" + str(window.width) + \"x\" + str(window.height) + \":\" + str(window.x) + \",\" + str(window.y))\n    print(\"Screen : \" + str(screen.name) + \", Scene : \" + str(screen.scene.name))\n    #for area in bpy.context.screen.areas:\n    for area in screen.areas:\n      print(\"Area   : \" + str(area.type))\n      if area.type == 'VIEW_3D':\n        for space in area.spaces:\n          print(\"Space  : \" + str(space.type))\n          if space.type == 'VIEW_3D':\n            #space.viewport_shade = 'RENDERED'\n            for region in area.regions:\n              print(\"Region  : \" + str(region.type))\n              if region.type == 'WINDOW':\n                L_altBpyCtx = {                        # defining alternative context (allowing modifications without altering real one)\n                  'area'      : area                   # our 3D View (first found)\n                , 'blend_data': bpy.context.blend_data # just to suppress PyContext warning, doesn't seem to have any effect\n                #, 'edit_text' : bpy.context.edit_text  # just to suppress PyContext warning, doesn't seem to have any effect\n                , 'region'    : None                   # just to suppress PyContext warning, doesn't seem to have any effect\n                #, 'scene'     : bpy.context.scene\n                , 'scene'     : screen.scene\n                , 'space'     : space\n                , 'screen'    : window.screen\n                #, 'window'    : bpy.context.window     # current window, could also copy context\n                , 'window'    : window                 # current window, could also copy context\n                }\n                bpy.ops.screen.screenshot(L_altBpyCtx, filepath = L_saveAs, full = False)\n                break #XXX: limit to the window of the 3D View\n            break #XXX: limit to the corresponding space (3D View)\n        break #XXX: limit to the first 3D View (area)\n\nscreenshot(\"screenshot.png\", \".\")\n</code></pre>\n\n<p>3/ By the way, call it without the \"--background\" argument and it will generate an empty screenshot (size of your window, full of gray). In the meantime, uncomment</p>\n\n<pre><code>#bpy.context.window.screen = bpy.data.screens['3D View Full']\n</code></pre>\n\n<p>and/or</p>\n\n<pre><code>#space.viewport_shade = 'RENDERED'\n</code></pre>\n\n<p>And you'll see your Blender interface being affected (switching layout of your views from 'Default' to '3D Full View' and/or your viewport shading from 'Solid', by default, to 'Rendered') ... so the script is actually interpreted but it does not generate the screenshot !</p>\n\n<p>No matter what, the problem seems coming from calling Blender with \"--python somescript.py\" directly from the command line</p>\n\n<p>I'm probably missing something ?! Thanks for your help</p>\n"}, {"tags": ["python", "dbf"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1499295746, "post_id": 44937237, "comment_id": 76850969, "body": "Are you absolutely certain that the table is coded in <code>cp437</code>? Your result is more consistent with <a href=\"https://en.wikipedia.org/wiki/ISO/IEC_8859-1\" rel=\"nofollow noreferrer\">ISO-8859-1</a>."}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1499297804, "post_id": 44937237, "comment_id": 76851522, "body": "Why are you overriding the code page?  The correct code page <i>should</i> be in the table itself."}, {"owner": {"reputation": 1, "user_id": 4771630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0752c63513ed73be3b0cb98c69a9589b?s=128&d=identicon&r=PG&f=1", "display_name": "Edy Gomez", "link": "https://stackoverflow.com/users/4771630/edy-gomez"}, "edited": false, "score": 0, "creation_date": 1499298000, "post_id": 44937237, "comment_id": 76851578, "body": "i dont know which code page to use, if i dont use any i get an error &#39;ascii&#39; codec can&#39;t decode byte 0xd1. ive recently found that it is indeed ISO-8859-1 how do i setup the table to use that ? edit: using Db.codepage gives me plain ol&#39; ascii"}, {"owner": {"reputation": 86, "user_id": 5260595, "user_type": "registered", "profile_image": "https://graph.facebook.com/1201195443240795/picture?type=large", "display_name": "Wagner Wesner", "link": "https://stackoverflow.com/users/5260595/wagner-wesner"}, "edited": false, "score": 0, "creation_date": 1499305484, "post_id": 44937237, "comment_id": 76853316, "body": "@EdyGomez, I think is something with your environment, because I used your code in creating one template dbf table, and then I added char &#241; in the field.  After that I readed the field and everything was like it was recorded, the char &#241; was printed correctely.  I\u2019m using here a Mac OS X  with pt br language."}, {"owner": {"reputation": 1, "user_id": 4771630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0752c63513ed73be3b0cb98c69a9589b?s=128&d=identicon&r=PG&f=1", "display_name": "Edy Gomez", "link": "https://stackoverflow.com/users/4771630/edy-gomez"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1499353459, "post_id": 44937237, "comment_id": 76880377, "body": "@MarkRansom it was indeed the codepage changed it to cp1252 and now it&#39;s working fine. thanks for the help"}], "owner": {"reputation": 1, "user_id": 4771630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0752c63513ed73be3b0cb98c69a9589b?s=128&d=identicon&r=PG&f=1", "display_name": "Edy Gomez", "link": "https://stackoverflow.com/users/4771630/edy-gomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499295235, "creation_date": 1499295235, "question_id": 44937237, "link": "https://stackoverflow.com/questions/44937237/using-dbf-library-in-python-%c3%91-replaced-by", "title": "using dbf library in python &#209; replaced by \u2564", "body": "<p>so im using a dbf library to read a file</p>\n\n<pre><code>import dbf \nDb = dbf.Table ('sometable.dbf',codepage='cp437')\nDb.open ()\nfor record in Db:\n    print(record.somefield)\n</code></pre>\n\n<p>it totally works but im having trouble with certain characters for example all the \u00f1 are being shown as \u2564. how can i fix this ?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499295431, "post_id": 44937234, "comment_id": 76850881, "body": "So, I&#39;m assuming you are on Python 2?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1499295585, "post_id": 44937234, "comment_id": 76850922, "body": "This seems like a really convoluted way to implement that functionality."}, {"owner": {"reputation": 111, "user_id": 6670365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/203203380012481/picture?type=large", "display_name": "Harry Su", "link": "https://stackoverflow.com/users/6670365/harry-su"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499295656, "post_id": 44937234, "comment_id": 76850939, "body": "@juanpa.arrivillaga Right, I am using python 2."}], "answers": [{"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 3, "last_activity_date": 1499295465, "creation_date": 1499295465, "answer_id": 44937263, "question_id": 44937234, "link": "https://stackoverflow.com/questions/44937234/object-does-not-support-indexing-when-overriding-getitem/44937263#44937263", "title": "object does not support indexing when overriding __getitem__", "body": "<p>When you inherit from <code>object</code>, you create a new-style class rather than an old style class.  For new-style classes, <code>__getitem__</code> is looked up on the <em>class</em>, not on the <em>instance</em> of the class.  Even though you've added a <code>__getitem__</code> method to a class <em>instance</em> (<code>self</code>), you haven't added that method to the class and therefore the lookup fails (for new style classes).  </p>\n\n<p>For old style classes, presumably the lookup still happens on the instance which is why the code works when you don't inherit from <code>object</code>.  Careful though -- In python3.x, <strong>all classes are new style whether you inherit from <code>object</code> explicitly or not</strong>. </p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1499295842, "creation_date": 1499295842, "answer_id": 44937322, "question_id": 44937234, "link": "https://stackoverflow.com/questions/44937234/object-does-not-support-indexing-when-overriding-getitem/44937322#44937322", "title": "object does not support indexing when overriding __getitem__", "body": "<p>You need to do it like something this:</p>\n\n<pre><code>import bisect\n\nclass Solution(object):\n    __getitem__ = lambda self, i: self.nums[i] &lt;= self.nums[-1]\n\n    def findMin(self, nums):\n        self.nums = nums\n        return nums[bisect.bisect(self, False, 0, len(nums))]\n\nsol = Solution()\nsol.findMin([42, 1, 13])\n</code></pre>\n\n<p><code>__getitem__</code> needs to be defined at the class, not instance, level in new-style classes (those whose base-class is <code>object</code> in Python 2, and all classes in Python 3\u2014whether explicitly specified or not).</p>\n"}], "owner": {"reputation": 111, "user_id": 6670365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/203203380012481/picture?type=large", "display_name": "Harry Su", "link": "https://stackoverflow.com/users/6670365/harry-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 44937263, "answer_count": 2, "score": 0, "last_activity_date": 1499295842, "creation_date": 1499295215, "question_id": 44937234, "link": "https://stackoverflow.com/questions/44937234/object-does-not-support-indexing-when-overriding-getitem", "title": "object does not support indexing when overriding __getitem__", "body": "<p>The Solution class inherits from object class, TypeError occurs: 'Solution' object does not support indexing? But if Solution class does not inherit from object, the code works find. My question is why Solution class does not support indexing when it inherits from object, even though it override <strong>getitem</strong> method.</p>\n\n<pre><code>class Solution(object):\n    def findMin(self, nums):\n        self.__getitem__ = lambda i: nums[i] &lt;= nums[-1]\n        return nums[bisect.bisect(self, False, 0, len(nums))]\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1499296620, "post_id": 44937197, "comment_id": 76851212, "body": "Remove everything and start adding back lines one by one until you reproduce the error. Then yiu&#39;ll know what line is the culprit."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8261774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab8580991a912372031f30f8637b61?s=128&d=identicon&r=PG&f=1", "display_name": "user37821", "link": "https://stackoverflow.com/users/8261774/user37821"}, "edited": false, "score": 0, "creation_date": 1499329757, "post_id": 44938452, "comment_id": 76862775, "body": "there is a block called {% block main_wrapper %} which 8 or 9 template usese that block.So \u0131 mnot sure it might easy to solv .But i want to ask that isin&#39;t there any way to see that this error comes from a spesific block inside spesific template?It give general error like i explained above."}, {"owner": {"reputation": 49, "user_id": 7037855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360889d5e2783cad9a099557c3a49c7f?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep135", "link": "https://stackoverflow.com/users/7037855/sandeep135"}, "reply_to_user": {"reputation": 11, "user_id": 8261774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab8580991a912372031f30f8637b61?s=128&d=identicon&r=PG&f=1", "display_name": "user37821", "link": "https://stackoverflow.com/users/8261774/user37821"}, "edited": false, "score": 0, "creation_date": 1499404416, "post_id": 44938452, "comment_id": 76900944, "body": "In the trackback section of your error page there will be the highlighted portion of code.it is were the error is"}, {"owner": {"reputation": 11, "user_id": 8261774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab8580991a912372031f30f8637b61?s=128&d=identicon&r=PG&f=1", "display_name": "user37821", "link": "https://stackoverflow.com/users/8261774/user37821"}, "edited": false, "score": 0, "creation_date": 1499415955, "post_id": 44938452, "comment_id": 76906846, "body": "Yes.but it only shows the filter and django files,no code we wrote."}], "tags": [], "owner": {"reputation": 49, "user_id": 7037855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360889d5e2783cad9a099557c3a49c7f?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep135", "link": "https://stackoverflow.com/users/7037855/sandeep135"}, "is_accepted": false, "score": -1, "last_activity_date": 1499305032, "creation_date": 1499305032, "answer_id": 44938452, "question_id": 44937197, "link": "https://stackoverflow.com/questions/44937197/what-does-template-error-at-line-0-mean-in-django/44938452#44938452", "title": "What does &#39;Template error at line 0&#39; mean in django?", "body": "<p>Exception ZeroDivisionError is raised when the second argument of a division or modulo operation is zero.There must be such expression in your \"main.html\" file or other files that link it.Post your main.html code so that I could figure out.</p>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 6709630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cxitI.png?s=128&g=1", "display_name": "freezed", "link": "https://stackoverflow.com/users/6709630/freezed"}, "is_accepted": false, "score": 1, "last_activity_date": 1539287996, "creation_date": 1539287996, "answer_id": 52768040, "question_id": 44937197, "link": "https://stackoverflow.com/questions/44937197/what-does-template-error-at-line-0-mean-in-django/52768040#52768040", "title": "What does &#39;Template error at line 0&#39; mean in django?", "body": "<p>IMHO, this has nothing to deal with <em>divide by zero</em>, this is a <em>reverse URL</em> misfunction.</p>\n\n<p>While debugging, I had different line numbers : 0, 13, 15, etc\u2026 each time the line mentioned had no bad reverse URL call.</p>\n\n<p>I had this message :</p>\n\n<pre><code>Error during template rendering\nIn template \u2026project/templates/base.html, error at line 0\n\nReverse for 'search' not found. 'search' is not a valid view function or pattern name.\n</code></pre>\n\n<p>How I solve it :</p>\n\n<ol>\n<li>Open all templates concerned by the URL which gives me this message</li>\n<li>Search over files where I use <code>search</code>, specially in a <code>{% url 'search' %}</code> tag</li>\n<li>Rename tag by the good URL\u00a0name (defined in the app <code>url.py</code>), in my case it was <code>foo-search</code>)</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8261774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab8580991a912372031f30f8637b61?s=128&d=identicon&r=PG&f=1", "display_name": "user37821", "link": "https://stackoverflow.com/users/8261774/user37821"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2937, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1539295139, "creation_date": 1499294900, "last_edit_date": 1539295139, "question_id": 44937197, "link": "https://stackoverflow.com/questions/44937197/what-does-template-error-at-line-0-mean-in-django", "title": "What does &#39;Template error at line 0&#39; mean in django?", "body": "<p>I have got an error on a django site that i am working on which is a zero division error. I couldn't find the source of the error which I am thinking that is because of likely mathfilter but still not sure.</p>\n\n<p>What I am asking here is that django gives that error with saying it occurs at line 0 which I don't know what that exactly mean.</p>\n\n<p>This is the beginning of the template file:</p>\n\n<pre><code>1   {% extends \"main.html\" %}\n2   {% include \"ru.html\" %}\n3   {% load staticfiles %}\n4   {% load mathfilters %}\n5   {% load humanize %}\n</code></pre>\n\n<p>Only thing that occurs to me when I see this (error at line 0) is that to look at the main.html file. But I couldn't find anything that might cause this zero division error.</p>\n\n<ul>\n<li>How to debug?</li>\n<li>What might cause this error?</li>\n<li>What does error at line 0 means and which file should i debug then?</li>\n<li>Which filters might cause this?</li>\n<li>Any possible version problem?</li>\n</ul>\n"}, {"tags": ["python", "html", "caching", "flask"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8260984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04145304c6b165c0775f48d19c69809?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8260984/learner"}, "edited": false, "score": 0, "creation_date": 1499360389, "post_id": 44937990, "comment_id": 76885174, "body": "The Ctrl + F5 trick worked!  Ideally, I would want to have a programatic solution, and the issue is that even if the cache is cleared for <code>dashboard.html</code>, it will not be cleared for <code>figure.html</code>, which is what matters."}], "tags": [], "owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1499300999, "creation_date": 1499300999, "answer_id": 44937990, "question_id": 44937171, "link": "https://stackoverflow.com/questions/44937171/flask-doesnt-render-srcs-within-static-html/44937990#44937990", "title": "Flask doesn&#39;t render src&#39;s within static HTML?", "body": "<p>Try doing a page refresh which ignores cached content doing <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>F5</kbd> if you're using a browser like Google Chrome. </p>\n\n<p>If you never want the page to be cached or to futher control how caching works, you can view this answer <a href=\"https://stackoverflow.com/questions/49547/how-to-control-web-page-caching-across-all-browsers\">here</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 8260984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04145304c6b165c0775f48d19c69809?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/8260984/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499300999, "creation_date": 1499294738, "last_edit_date": 1499295093, "question_id": 44937171, "link": "https://stackoverflow.com/questions/44937171/flask-doesnt-render-srcs-within-static-html", "title": "Flask doesn&#39;t render src&#39;s within static HTML?", "body": "<p>I have a very simple flask script below that is supposed to display a dashboard containing some figures that are independent HTML files.  </p>\n\n<pre><code>from flask import Flask, send_from_directory\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n\n    return send_from_directory('.', 'dashboard.html')\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>The HTML file <code>figure.html</code> displays within the dashboard, but is MASSIVELY outdated.  I can open <code>figure.html</code> manually and see that the up-to-date pie chart is different than the one being displayed.</p>\n\n<p>A sample of the HTML from <code>dashboard.html</code> that is supposed to display the figure in <code>figure.html</code> is below: </p>\n\n<pre><code>  &lt;div class=\"col-sm-4\"&gt;\n    &lt;div class=\"chart-wrapper\"&gt;\n      &lt;div class=\"chart-stage\"&gt;\n        &lt;iframe width=\"100%\" height=\"480px\" frameborder=\"0\" scrolling=\"no\" src=\"static/figure.html\"&gt;&lt;/iframe&gt;\n      &lt;/div&gt;\n      &lt;div class=\"chart-notes\"&gt;\n        Display Figure #1.\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt; \n</code></pre>\n\n<p>I suspect that this is caused by a caching issue. </p>\n\n<p>Does anyone know how to make the correct <code>figure.html</code> file display?</p>\n"}, {"tags": ["python", "machine-learning", "cluster-analysis", "dbscan", "unsupervised-learning"], "comments": [{"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1499321332, "post_id": 44937157, "comment_id": 76857662, "body": "I don&#39;t remember anything like this from the HDBSCAN* paper... what is the theoretical support of this?"}, {"owner": {"reputation": 300, "user_id": 2461980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WxvNm.jpg?s=128&g=1", "display_name": "Andrew Ng", "link": "https://stackoverflow.com/users/2461980/andrew-ng"}, "reply_to_user": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1499379236, "post_id": 44937157, "comment_id": 76894793, "body": "I think it&#39;s a relatively new feature. An example is here: <a href=\"http://hdbscan.readthedocs.io/en/latest/soft_clustering.html\" rel=\"nofollow noreferrer\">hdbscan.readthedocs.io/en/latest/soft_clustering.html</a> and an explanation for how it works is here: <a href=\"http://hdbscan.readthedocs.io/en/latest/soft_clustering_explanation.html\" rel=\"nofollow noreferrer\">hdbscan.readthedocs.io/en/latest/&hellip;</a>"}, {"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1499409509, "post_id": 44937157, "comment_id": 76902997, "body": "I&#39;m referring to published, theoretical support for the approach. It&#39;s easy to hack up some &quot;fuzzy&quot; variation of HDBSCAN*, but that doesn&#39;t mean it is statistically sound."}, {"owner": {"reputation": 89, "user_id": 1901037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35324240a34f20e3770141c1a1dee87?s=128&d=identicon&r=PG", "display_name": "gmjonker", "link": "https://stackoverflow.com/users/1901037/gmjonker"}, "edited": false, "score": 0, "creation_date": 1525097612, "post_id": 44937157, "comment_id": 87240149, "body": "This is probably due to this bug: <a href=\"https://github.com/scikit-learn-contrib/hdbscan/issues/123\" rel=\"nofollow noreferrer\">github.com/scikit-learn-contrib/hdbscan/issues/123</a>"}, {"owner": {"reputation": 300, "user_id": 2461980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WxvNm.jpg?s=128&g=1", "display_name": "Andrew Ng", "link": "https://stackoverflow.com/users/2461980/andrew-ng"}, "edited": false, "score": 0, "creation_date": 1525198757, "post_id": 44937157, "comment_id": 87261098, "body": "Yes, I raised the issue after asking this question\u2014I did a re-mapping based on my findings and it worked for me but based on some of the other comments the behavior doesn&#39;t seem to be consistent."}, {"owner": {"reputation": 2259, "user_id": 1974964, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d2f0937b47d849368d8bfc0d908eee73?s=128&d=identicon&r=PG", "display_name": "Isopycnal Oscillation", "link": "https://stackoverflow.com/users/1974964/isopycnal-oscillation"}, "edited": false, "score": 0, "creation_date": 1525909786, "post_id": 44937157, "comment_id": 87545145, "body": "Just ran into this issue. Doesn&#39;t seem to have been fixed yet..."}], "answers": [{"tags": [], "owner": {"reputation": 2259, "user_id": 1974964, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d2f0937b47d849368d8bfc0d908eee73?s=128&d=identicon&r=PG", "display_name": "Isopycnal Oscillation", "link": "https://stackoverflow.com/users/1974964/isopycnal-oscillation"}, "is_accepted": false, "score": 1, "last_activity_date": 1528495297, "creation_date": 1528495297, "answer_id": 50768927, "question_id": 44937157, "link": "https://stackoverflow.com/questions/44937157/comparing-hdbscan-labels-with-soft-cluster-results/50768927#50768927", "title": "Comparing HDBSCAN labels with soft cluster results", "body": "<p>The author of HDBSCAN has attempted to fix this problem but it seems that, as it stands, it is simply how it works and there is no way to fix it without some major restructuring. Here is his comment:</p>\n\n<blockquote>\n  <p>Digging in to this I think the answer (unfortunately?) is that this is \"just how it works\". The soft clustering considers the distance from exemplars, and the merge height in the tree between the point and each of the clusters. These points that end up \"wrong\" are points that sit on a split in the tree -- they have the same merge height to their own cluster (perhaps that is a bug, I'll look into it further). That means tree-wise we don't distinguish them, and in terms of pure ambient distance to exemplars they are closer to the \"wrong\" cluster, and so get misclassified. This is a little weird, but the soft clustering is ultimately a little different that the hard clustering, so corner cases like this can theoretically occur.</p>\n</blockquote>\n"}], "owner": {"reputation": 300, "user_id": 2461980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WxvNm.jpg?s=128&g=1", "display_name": "Andrew Ng", "link": "https://stackoverflow.com/users/2461980/andrew-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1528495297, "creation_date": 1499294669, "question_id": 44937157, "link": "https://stackoverflow.com/questions/44937157/comparing-hdbscan-labels-with-soft-cluster-results", "title": "Comparing HDBSCAN labels with soft cluster results", "body": "<p>I'm getting the soft clusters from a dataset using HDBSCAN as follows:</p>\n\n<pre><code>clusterer = hdbscan.HDBSCAN(min_cluster_size=10, prediction_data=True)\nclusterer.fit(data)\nsoft_clusters = hdbscan.all_points_membership_vectors(clusterer)\nclosest_clusters = [np.argmax(x) for x in soft_clusters]\n</code></pre>\n\n<p><code>soft_clusters</code> is a 2D array of the probabilities that a data point belongs to each cluster, so <code>closest_clusters</code> should be an array with the label that the data point is most likely to belong to. However, when I compare <code>closest_clusters</code> with <code>clusterer.labels_</code> (the label that HDBSCAN assigns the data point), I find that almost none of the clusters match up for the data points that have a label, i.e. a data point with label 3 has 4 as its closest cluster.</p>\n\n<p>I'm not sure if I'm misunderstanding how soft clustering works or if something is wrong with the code. Any help is appreciated!</p>\n"}, {"tags": ["python", "pyqt", "virtual-desktop", "mate-desktop"], "answers": [{"tags": [], "owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "is_accepted": true, "score": 0, "last_activity_date": 1501369270, "last_edit_date": 1501369270, "creation_date": 1499379986, "answer_id": 44959820, "question_id": 44937111, "link": "https://stackoverflow.com/questions/44937111/qmainwindow-visibility-issue-when-switching-virtual-desktop/44959820#44959820", "title": "QMainWindow visibility issue when switching virtual desktop", "body": "<p>It appears the window is minimized when hidden then shown from another desktop, but I could not see that because it does not appear in the taskbar, as it has following flags:</p>\n\n<pre><code>self.setWindowFlags(QtCore.Qt.Tool |\n                    QtCore.Qt.FramelessWindowHint |\n                    QtCore.Qt.WindowStaysOnTopHint)\n</code></pre>\n\n<p>I fixed the issue by unminimizing it explicitly on show event:</p>\n\n<pre><code>def showEvent(self, event):\n    super().showEvent(event)\n    # Ensure the window is not minimized on virtual desktop change\n    self.showNormal()\n</code></pre>\n"}], "owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 44959820, "answer_count": 1, "score": 0, "last_activity_date": 1501369270, "creation_date": 1499294390, "last_edit_date": 1501349975, "question_id": 44937111, "link": "https://stackoverflow.com/questions/44937111/qmainwindow-visibility-issue-when-switching-virtual-desktop", "title": "QMainWindow visibility issue when switching virtual desktop", "body": "<p>My application has a <code>QSystemTrayIcon</code> that toggles the <code>QMainWindow</code> visibility when left-clicked.</p>\n\n<pre><code>   def tray_icon_activated_cb(reason):\n        if reason == QtWidgets.QSystemTrayIcon.Trigger:\n            self.main_window.setVisible(not self.main_window.isVisible())\n    self.activated.connect(tray_icon_activated_cb)\n</code></pre>\n\n<p>It works correctly, except if I switch virtual desktop while the <code>QMainWindow</code> is visible.</p>\n\n<p>For instance:</p>\n\n<pre><code>On virtual desktop 1, window hidden\nClick\nOn virtual desktop 1, window visible\nClick\nOn virtual desktop 1, window hidden\nChange desktop\nOn virtual desktop 2, window hidden\nClick\nOn virtual desktop 2, window visible\nClick\nOn virtual desktop 2, window hidden\nChange desktop\nOn virtual desktop 1, window hidden\nClick\nOn virtual desktop 1, window visible\nChange desktop\nOn virtual desktop 2, window hidden\nClick\nOn virtual desktop 2, window hidden  &lt;- wrong\nChange desktop\nOn virtual desktop 1, window hidden\nClick\nOn virtual desktop 1, window hidden  &lt;-- still wrong\n</code></pre>\n\n<p>I only get the QMainWindow back by restarting the application.</p>\n\n<p>I added <code>print</code>s in method above and could check that we go through</p>\n\n<pre><code>self.main_window.setVisible(not self.main_window.isVisible())\n</code></pre>\n\n<p>because <code>self.main_window.isVisible()</code> returns <code>True</code> and <code>False</code> alternatively.</p>\n\n<p>I just don't know <em>where</em> that <code>QMainWindow</code> is visible.</p>\n\n<p>Debian Stretch, Mate 1.16.2, Python 3.5.3. I can reproduce with both PyQt4 and PyQt5.</p>\n"}, {"tags": ["python", "matplotlib", "legend"], "answers": [{"comments": [{"owner": {"reputation": 2214, "user_id": 2864250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/svmFB.jpg?s=128&g=1", "display_name": "dubbbdan", "link": "https://stackoverflow.com/users/2864250/dubbbdan"}, "edited": false, "score": 1, "creation_date": 1499295359, "post_id": 44937210, "comment_id": 76850861, "body": "It mush have been the <code>hatch=[&#39;\\\\\\\\&#39;]</code>.  Now things seem to be behaving.  Thanks!"}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 3, "last_activity_date": 1499294994, "creation_date": 1499294994, "answer_id": 44937210, "question_id": 44937101, "link": "https://stackoverflow.com/questions/44937101/matplotlib-custom-legend-with-hatching/44937210#44937210", "title": "matplotlib custom legend with hatching", "body": "<p>Either I can't reproduce your issue, or you're missing a huge error. When I run your code above, I get an error about a <code>list</code> not being hashable, which seems to originate in the first <code>Patch</code> call's <code>hatch=['\\\\\\\\']</code> kwarg. Removing the list syntax (and using a raw string with 4 backslashes for extra effect) seems to work for me on matplotlib 2.0.2:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n\n\na_val = 0.6\ncolors = ['#EA5739','#FEFFBE','#4BB05C']\n\n\ncirc1 = mpatches.Patch( facecolor=colors[0],alpha=a_val,hatch=r'\\\\\\\\',label='Label1')\ncirc2= mpatches.Patch( facecolor=colors[1],alpha=a_val,hatch='o',label='Label2')\ncirc3 = mpatches.Patch(facecolor=colors[2],alpha=a_val,hatch='+',label='Label3')\n\nfig,(ax) = plt.subplots()\n\nax.legend(handles = [circ1,circ2,circ3],loc=2)\nplt.tight_layout()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/at21j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/at21j.png\" alt=\"result of the above\"></a></p>\n\n<p>Is this what you're seeing?</p>\n"}], "owner": {"reputation": 2214, "user_id": 2864250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/svmFB.jpg?s=128&g=1", "display_name": "dubbbdan", "link": "https://stackoverflow.com/users/2864250/dubbbdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3881, "favorite_count": 1, "accepted_answer_id": 44937210, "answer_count": 1, "score": 3, "last_activity_date": 1499294994, "creation_date": 1499294335, "question_id": 44937101, "link": "https://stackoverflow.com/questions/44937101/matplotlib-custom-legend-with-hatching", "title": "matplotlib custom legend with hatching", "body": "<p>I can seem to figure out how to pass the handles and labels from <code>matplotlib.patches.Patch</code> to the legend. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n\n\na_val = 0.6\ncolors = ['#EA5739','#FEFFBE','#4BB05C']\n\n\ncirc1 = mpatches.Patch( facecolor=colors[0],alpha=a_val,hatch=['\\\\\\\\'],label='Label1')\ncirc2= mpatches.Patch( facecolor=colors[1],alpha=a_val,hatch='o',label='Label2')\ncirc3 = mpatches.Patch(facecolor=colors[2],alpha=a_val,hatch='+',label='Label3')\n\nfig,(ax) = plt.subplots()\n\nax.legend(handles = [circ1,circ2,circ3],loc=2)\nplt.tight_layout()\n</code></pre>\n\n<p>Why is the legend blank in the above example?</p>\n"}, {"tags": ["python", "json", "xml"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499294435, "post_id": 44937092, "comment_id": 76850562, "body": "You&#39;ll need to 1) decode it to str 2) look up JSON 3) JSON decode 4) index"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1499294461, "post_id": 44937092, "comment_id": 76850568, "body": "Have you tried searching using a popular search engine for, maybe, <i>python decode json</i>? The first result for me is a StackOverflow q/a about exactly what you are asking. I&#39;ll let you find it yourself."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1499294690, "post_id": 44937092, "comment_id": 76850642, "body": "You&#39;re using <code>requests</code>, so try <code>req.json()</code>, then <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">read the docs</a>, where that&#39;s literally in the first eaxmple."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5625170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205520832521892/picture?type=large", "display_name": "Tyler Dunn", "link": "https://stackoverflow.com/users/5625170/tyler-dunn"}, "edited": false, "score": 0, "creation_date": 1499305566, "post_id": 44937245, "comment_id": 76853343, "body": "when I add the line soup = bs(req.text, &quot;xml), I get this error: bs4.FeatureNotFound: Couldn&#39;t find a tree builder with the features you requested: xml. Do you need to install a parser library?"}, {"owner": {"reputation": 7061, "user_id": 839338, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12639eb17fa99d25a271a54f031feb67?s=128&d=identicon&r=PG", "display_name": "Dan-Dev", "link": "https://stackoverflow.com/users/839338/dan-dev"}, "reply_to_user": {"reputation": 31, "user_id": 5625170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205520832521892/picture?type=large", "display_name": "Tyler Dunn", "link": "https://stackoverflow.com/users/5625170/tyler-dunn"}, "edited": false, "score": 0, "creation_date": 1499333418, "post_id": 44937245, "comment_id": 76865195, "body": "run &quot;pip3 install lxml&quot; to install lxml or change the line &#39;soup = bs(req.text, &quot;xml&quot;)&#39; to &#39;soup = bs(req.text, &quot;html.parser&quot;)&#39; to use the default parser which would be a quick fix but not as good."}], "tags": [], "owner": {"reputation": 7061, "user_id": 839338, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12639eb17fa99d25a271a54f031feb67?s=128&d=identicon&r=PG", "display_name": "Dan-Dev", "link": "https://stackoverflow.com/users/839338/dan-dev"}, "is_accepted": true, "score": 0, "last_activity_date": 1499298900, "last_edit_date": 1499298900, "creation_date": 1499295301, "answer_id": 44937245, "question_id": 44937092, "link": "https://stackoverflow.com/questions/44937092/need-to-print-specific-items-in-xml-and-json-response-using-python/44937245#44937245", "title": "Need to print specific items in XML and JSON response using python", "body": "<p>Read the JSON like this:</p>\n\n<pre><code>if funCall == \"-j\":\n    origin = sys.argv[2]\n    dest = sys.argv[3]\n    url = \"https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&amp;origins=\"+origin+\"&amp;destinations=\"+dest+\"&amp;key=\"+key\n    req = requests.get(url, headers={}, params={})\n    distance = req.json()['rows'][0]['elements'][0][ 'distance']['text']\n    print (distance)\n</code></pre>\n\n<p>Outputs </p>\n\n<pre><code>24.2 mi\n</code></pre>\n\n<p>And the XML like this:</p>\n\n<pre><code>elif funCall == \"-x\":\n    origin = sys.argv[2]\n    dest = sys.argv[3]\n    url = \"https://maps.googleapis.com/maps/api/distancematrix/xml?units=imperial&amp;origins=\"+origin+\"&amp;destinations=\"+dest+\"&amp;key=\"+key\n    req = requests.get(url, headers={}, params={})\n    soup = bs(req.text, \"xml\")\n    distance = soup.find('distance').findNext('text').text\n    print (distance)\n</code></pre>\n\n<p>Outputs </p>\n\n<pre><code>24.2 mi\n</code></pre>\n\n<p>But you are duplicating 2 (nearly 4) lines of code in the if and elif statements, if you move them to before the statements your code will be better.</p>\n"}], "owner": {"reputation": 31, "user_id": 5625170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205520832521892/picture?type=large", "display_name": "Tyler Dunn", "link": "https://stackoverflow.com/users/5625170/tyler-dunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 44937245, "answer_count": 1, "score": -2, "last_activity_date": 1499859036, "creation_date": 1499294298, "last_edit_date": 1499294358, "question_id": 44937092, "link": "https://stackoverflow.com/questions/44937092/need-to-print-specific-items-in-xml-and-json-response-using-python", "title": "Need to print specific items in XML and JSON response using python", "body": "<p>I am getting a response from the google maps api and I just need to get the distance from the Json response and the XML response. I am having trouble finding good examples on how to do this. I am supposed to be using requests and bs4 modules to do this. </p>\n\n<p>The program needs 3 arguments when ran the first being -j for json or -x for XML.</p>\n\n<p>The second is an origin city and state. Example: Nashville,TN</p>\n\n<p>The third is destination city or state. Example: Smynra,TN</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\nimport sys\nimport json\n\nfunCall = sys.argv[1]\nkey = \"AIzaSyD6-37WvsoTYvlgXKdquv5TRFFwgARvq4w\"\n\ndef Xfunction():\n    x = 4\ndef aFunction():\n    x = 3\n\nif funCall == \"-j\":\n    origin = sys.argv[2]\n    dest = sys.argv[3]\n\n    url = \"https://maps.googleapis.com/maps/api/distancematrix/json?\n           units=imperial&amp;origins=\"+origin+\"&amp;destinations=\"+dest+\"&amp;key=\"+key\n    req = requests.get(url, headers={}, params={})\n\n\nelif funCall == \"-x\":\n    origin = sys.argv[2]\n    dest = sys.argv[3]\n\n    url = \"https://maps.googleapis.com/maps/api/distancematrix/xml?\n           units=imperial&amp;origins=\"+origin+\"&amp;destinations=\"+dest+\"&amp;key=\"+key\n    req = requests.get(url, headers={}, params={})\n\n\nelif funCall == \"-a\":\n    aFunction()\n</code></pre>\n\n<p>Ignore the functions at the top I am getting responses within the if statement the -j is jason and the -x is XML. </p>\n\n<p>If i print after my jason req using print(req.content) I get:</p>\n\n<pre><code>b'{\\n   \"destination_addresses\" : [ \"Smyrna, TN, USA\" ],\\n   \"origin_addresses\" : [ \"Nashville, TN, USA\" ],\\n   \"rows\" : [\\n      {\\n         \"elements\" : [\\n            {\\n               \"distance\" : {\\n                  \"text\" : \"24.2 mi\",\\n                  \"value\" : 39005\\n               },\\n               \"duration\" : {\\n                  \"text\" : \"31 mins\",\\n                  \"value\" : 1873\\n               },\\n               \"status\" : \"OK\"\\n            }\\n         ]\\n      }\\n   ],\\n   \"status\" : \"OK\"\\n}\\n'\n</code></pre>\n\n<p>I just need the distance text value and I do not know how to parse it from the json or xml. </p>\n"}, {"tags": ["python", "django", "urlconf"], "comments": [{"owner": {"reputation": 341, "user_id": 1673590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5d6342d5a7c82aa40b142999e70dca?s=128&d=identicon&r=PG", "display_name": "KePe", "link": "https://stackoverflow.com/users/1673590/kepe"}, "edited": false, "score": 1, "creation_date": 1499294626, "post_id": 44937071, "comment_id": 76850620, "body": "try to replace url(r&#39;$&#39;, views.index, name=&#39;index&#39;) with: url(r&#39;^$&#39;, views.index, name=&#39;index&#39;)"}, {"owner": {"reputation": 297, "user_id": 1296237, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/38bbb07ed77a1a6ffdc90e731327c1a2?s=128&d=identicon&r=PG", "display_name": "AirieFenix", "link": "https://stackoverflow.com/users/1296237/airiefenix"}, "reply_to_user": {"reputation": 341, "user_id": 1673590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5d6342d5a7c82aa40b142999e70dca?s=128&d=identicon&r=PG", "display_name": "KePe", "link": "https://stackoverflow.com/users/1673590/kepe"}, "edited": false, "score": 0, "creation_date": 1499294897, "post_id": 44937071, "comment_id": 76850711, "body": "It worked. Thanks! Could you explain what was happening?"}, {"owner": {"reputation": 341, "user_id": 1673590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5d6342d5a7c82aa40b142999e70dca?s=128&d=identicon&r=PG", "display_name": "KePe", "link": "https://stackoverflow.com/users/1673590/kepe"}, "edited": false, "score": 1, "creation_date": 1499326038, "post_id": 44937071, "comment_id": 76860366, "body": "@pythad explanation is correct."}], "answers": [{"tags": [], "owner": {"reputation": 3938, "user_id": 3832802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k0Hxl.jpg?s=128&g=1", "display_name": "pythad", "link": "https://stackoverflow.com/users/3832802/pythad"}, "is_accepted": true, "score": 2, "last_activity_date": 1499294975, "creation_date": 1499294975, "answer_id": 44937207, "question_id": 44937071, "link": "https://stackoverflow.com/questions/44937071/django-doesnt-render-the-requested-view/44937207#44937207", "title": "Django doesn&#39;t render the requested view", "body": "<p><code>url(r'$', views.index, name='index')</code> matches the end of the string, so basically it will match any url, that's why your code isn't working. You need to replace <code>url(r'$', views.index, name='index')</code> with <code>url(r'^$', views.index, name='index')</code> so that it will match only empty url</p>\n\n<p><code>^</code> asserts position at start of the string</p>\n\n<p><code>$</code> asserts position at the end of the string, or before the line terminator right at the end of the string (if any)</p>\n"}], "owner": {"reputation": 297, "user_id": 1296237, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/38bbb07ed77a1a6ffdc90e731327c1a2?s=128&d=identicon&r=PG", "display_name": "AirieFenix", "link": "https://stackoverflow.com/users/1296237/airiefenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 44937207, "answer_count": 1, "score": 1, "last_activity_date": 1499294975, "creation_date": 1499294187, "question_id": 44937071, "link": "https://stackoverflow.com/questions/44937071/django-doesnt-render-the-requested-view", "title": "Django doesn&#39;t render the requested view", "body": "<p>people. I'm a beginner Django developer so sorry if it's a basic question.</p>\n\n<p>I have a webpage that shows a list of movies and each movie has a details view, but for some reason, the details view is never rendered.</p>\n\n<pre><code>#views.py\n\ndef index(request):\n    latest_movies = Movie.objects.order_by('-movie_id')[:5]\n\n    template = loader.get_template('ytsmirror/index.html')\n    context = {\n        'latest_movies' : latest_movies,\n    }\n\n    return HttpResponse(template.render(context, request))\n\ndef detail(request, movie_id):\n\n    movie = Movie.objects.get(movie_id=movie_id)\n    template = loader.get_template('ytsmirror/details.html')\n\n    context = {\n        'movie' : movie,\n        'plot': 'Lorem impsum',\n    }\n\n    return HttpResponse(template.render(context, request))\n</code></pre>\n\n<p>And my urls.py</p>\n\n<pre><code>#urls.py\n\nfrom django.conf.urls import url\n\nfrom . import views\n\napp_name = 'ytsmirror'\nurlpatterns = [\n  url(r'$', views.index, name='index'),\n  url(r'^(?P&lt;movie_id&gt;\\d{4})$', views.detail, name='detail'),\n]\n</code></pre>\n\n<p>When I try to reach /ytsmirror/4200/ for example, I don't get any error and Django apparently reaches the correct URL pattern but doesn't render the details view, it stays on the index view, without any change.</p>\n\n<p>What am I doing wrong? Thanks.</p>\n"}, {"tags": ["python", "python-2.7", "python-unittest", "nose"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1499294220, "post_id": 44937048, "comment_id": 76850482, "body": "A question for you: why <i>would</i> <code>self</code> be defined there?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1499294244, "post_id": 44937048, "comment_id": 76850491, "body": "Why did you think it would be defined? The decorator is <i>outside</i> the method, it runs at class definition time before an instance could ever have been created."}, {"owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "edited": false, "score": 0, "creation_date": 1499294618, "post_id": 44937048, "comment_id": 76850617, "body": "Ah!. Makes sense. Thanks guys"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1499295518, "post_id": 44937048, "comment_id": 76850908, "body": "@Gaara Thanks for letting people know you problem was solved. But the usually way you should indicate that your problem was solved to your satisfaction, it to select the check mark to a user&#39;s answer. This marks the answer as &quot;accepted&quot;. More info on this can be found in the <a href=\"https://stackoverflow.com/help/someone-answers\">help center</a>. I recommend selecting <a href=\"https://stackoverflow.com/questions/44937048/python-unittest-self-is-not-defined/44937134#44937134\">Alex Hall&#39;s</a> answer since he answered first and went more in-depth."}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 4, "last_activity_date": 1499294534, "creation_date": 1499294534, "answer_id": 44937134, "question_id": 44937048, "link": "https://stackoverflow.com/questions/44937048/python-unittest-self-is-not-defined/44937134#44937134", "title": "Python unittest: &#39;self&#39; is not defined", "body": "<p><code>self</code> is not a magic variable like <code>this</code> in Java and Javascript. That is why you have to define it as the first parameter in methods. If <code>self</code> isn't defined as a parameter or some other kind of variable, it's just not defined, like any other variable. Its name is purely conventional.</p>\n\n<p>(Although if <code>self</code> was equivalent to <code>this</code> it still wouldn't make sense because there's no instance in question, just the class)</p>\n\n<p>When you're at the class level, you can use other variables at the class level normally. For example:</p>\n\n<pre><code>class A:\n    x = 1\n    y = 2\n    z = x + y  # 3\n</code></pre>\n\n<p>So you can remove the <code>self</code> and just say <code>'0' not in testcases</code>.</p>\n\n<p>Also, you have some weird stuff going on:</p>\n\n<pre><code>global testcases_exec_list\ntestcases = []\ntestcases = testcases_exec_list\n</code></pre>\n\n<ol>\n<li>The line <code>testcases = []</code> is completely redundant because you immediately override it.</li>\n<li>The line <code>global testcases_exec_list</code> is probably useless (depending on the rest of the class definition) because <code>global</code> is for assignment, not access.</li>\n<li>Why are you defining <code>testcases</code> if you already have <code>testcases_exec_list</code>? Do you understand that this makes them the same list, rather than making a copy?</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": false, "score": 1, "last_activity_date": 1499294970, "last_edit_date": 1499294970, "creation_date": 1499294546, "answer_id": 44937137, "question_id": 44937048, "link": "https://stackoverflow.com/questions/44937048/python-unittest-self-is-not-defined/44937137#44937137", "title": "Python unittest: &#39;self&#39; is not defined", "body": "<p><code>self</code> is not defined because <code>self</code> doesn't exist. At class definition time, <code>self</code> has not been created yet. The only time Python creates <code>self</code>, is when you are calling a bound method on an instance of your class. <code>self</code> is still a normal variable Python implicitly passes to bound methods. </p>\n\n<p>So in your case, you don't need <code>self</code>, just use <code>testcase</code> as is:</p>\n\n<pre><code>@unittest.skipIf('0' not in testcases, \"Testcase input not given\")\n</code></pre>\n\n<p>When inside of a class's namespace, variables defined there can be used normally as if they were global:</p>\n\n<pre><code>&gt;&gt;&gt; class Class:\n    attr1 = 0\n    print(attr1)\n\n\n0\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 44937134, "answer_count": 2, "score": 0, "last_activity_date": 1499295544, "creation_date": 1499294081, "last_edit_date": 1499295544, "question_id": 44937048, "link": "https://stackoverflow.com/questions/44937048/python-unittest-self-is-not-defined", "title": "Python unittest: &#39;self&#39; is not defined", "body": "<p>I am new to <code>unittest</code>. I am trying to skip test cases based on values in a list.</p>\n\n<pre><code>class UESpecTest(unittest.TestCase):\n    global testcases_exec_list\n    testcases = []\n    testcases = testcases_exec_list\n    @unittest.skipIf('0' not in self.testcases, \"Testcase input not given\")\n    def test_retrieve_spec_info(self):\n        read_spec_info.open_csv(self.spec_info)\n        assert (bool(self.spec_info) == True) #Raise assertion if dictionary is empty\n</code></pre>\n\n<p>I am getting the below error</p>\n\n<pre><code>  File \"test_ue_cap_main.py\", line 39, in UESpecTest\n    @unittest.skipIf('0' not in self.testcases, \"Testcase input not given\") \nNameError: name 'self' is not defined\n</code></pre>\n\n<p>I am not sure why self is undefined here.</p>\n"}, {"tags": ["python", "matplotlib", "colorbar"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499294300, "post_id": 44937041, "comment_id": 76850512, "body": "How did you try changing the formatting? That should work."}, {"owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499294611, "post_id": 44937041, "comment_id": 76850611, "body": "I tried using the module <code>LogFormatter </code> from <code>matplotlib.ticker</code>, but the best I could get was scientific notation formatting."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499294723, "post_id": 44937041, "comment_id": 76850652, "body": "Have you read <a href=\"https://stackoverflow.com/questions/17201172/a-logarithmic-colorbar-in-matplotlib-scatter-plot\">this Q&amp;A</a> and docs/links therein?"}, {"owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499295184, "post_id": 44937041, "comment_id": 76850808, "body": "Yes, my <code>norm</code> argument is set to <code>LogNorm</code> and the <code>wieght</code> is set to the value being analyzed <code>gas_Temp</code>. I would think that that links setup would be similar to using <code>histogram2D</code>, but I do not know what I am doing wrong."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499295432, "post_id": 44937041, "comment_id": 76850882, "body": "The linked documentation has <a href=\"https://matplotlib.org/users/colormapnorms.html#logarithmic\" rel=\"nofollow noreferrer\">an example</a> where one plot has <code>10^x</code> labels, and the other logarithmic ones. Isn&#39;t the latter what you want to achieve?"}, {"owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499301683, "post_id": 44937041, "comment_id": 76852395, "body": "Tried out what they did, still not getting any results. I&#39;ll edit my code."}], "answers": [{"tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 3, "last_activity_date": 1499346309, "creation_date": 1499346309, "answer_id": 44949787, "question_id": 44937041, "link": "https://stackoverflow.com/questions/44937041/colorbar-tick-labels-as-log-outputs/44949787#44949787", "title": "Colorbar tick labels as log outputs", "body": "<p>The idiomatic thing to do is use a <a href=\"https://matplotlib.org/api/ticker_api.html#matplotlib.ticker.LogFormatterExponent\" rel=\"nofollow noreferrer\">LogFormatterExponent</a> to do the formatting of your colorbar. That's exactly what you need: to display <code>10**x</code> values as <code>x</code>, or in other words, to display <code>y</code> values as <code>log10(x)</code>.</p>\n\n<p>Proof using dummy data:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.colors import LogNorm\nfrom matplotlib.ticker import LogFormatterExponent # &lt;-- one new import here\n\n# generate dummy data\nhistdata = 10**(np.random.rand(200,200)*4 + 1)  # 10^1 -&gt; 10^5\n\n# plot\nfig = plt.figure()\nax = fig.add_subplot(111)\n\nax.tick_params(axis=u'both', which=u'both',length=0)\nax.get_xaxis().set_visible(False)\nax.get_yaxis().set_visible(False)\n\nim = plt.imshow(histdata,cmap='viridis',norm=LogNorm())\ncb = fig.colorbar(im, ax=ax, shrink=0.8, pad=0.01,\n                  orientation=\"horizontal\", label=r'$\\log T\\ [\\mathrm{K}]$')\n\n# v-- one new line here\ncb.formatter = LogFormatterExponent(base=10) # 10 is the default\ncb.update_ticks()\n</code></pre>\n\n<p>Compare the result of your original (left) with the modified version (right):</p>\n\n<p><a href=\"https://i.stack.imgur.com/XcL7J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XcL7Jm.png\" alt=\"original\"></a> <a href=\"https://i.stack.imgur.com/LKdxO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LKdxOm.png\" alt=\"new formatted\"></a></p>\n"}], "owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2250, "favorite_count": 0, "accepted_answer_id": 44949787, "answer_count": 1, "score": 1, "last_activity_date": 1499346309, "creation_date": 1499294034, "last_edit_date": 1499301877, "question_id": 44937041, "link": "https://stackoverflow.com/questions/44937041/colorbar-tick-labels-as-log-outputs", "title": "Colorbar tick labels as log outputs", "body": "<p>I am playing around with <code>histogram2d</code> and I am trying incorporate a color bar logarithmic values.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nfrom matplotlib.colors import LinearSegmentedColormap\n\n\ncmap = LinearSegmentedColormap.from_list('mycmap', ['black', 'maroon', \n                                                'crimson', 'orange', 'white'])\n\nfig = plt.figure()\nax = fig.add_subplot(111)\nH = ax.hist2d(gas_pos[:,0]/0.7, gas_pos[:,1]/0.7, cmap=cmap, \n            norm=matplotlib.colors.LogNorm(), bins=350, weights=np.log(gas_Temp))\n\nax.tick_params(axis=u'both', which=u'both',length=0)\nax.get_xaxis().set_visible(False)\nax.get_yaxis().set_visible(False)\n\ncb = fig.colorbar(H[3], ax=ax, shrink=0.8, pad=0.01, \n                orientation=\"horizontal\", label=r'$\\log T\\ [\\mathrm{K}]$')\ncb.ax.set_xticklabels([1,2,3,4])\ncb.update_ticks()\n\nempty = Rectangle((0,0 ), 0, 0, alpha=0.0)\nredshift = fig.legend([empty], [r'$z = 127$'], \n        loc='upper right', frameon=False, handlelength=0, handletextpad=0)\nredshift.get_texts()[0].set_color('white')\n#fig.add_artist(redshift)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fvVNa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fvVNa.png\" alt=\"enter image description here\"></a></p>\n\n<p>The weights are values not passed through <code>np.log()</code> and are currently being normalized through <code>LogNorm()</code>.</p>\n\n<p>What I am trying to get is to have the colorbar tic labels to be the logarithmic values of what is currently there eg. <code>10**4 --&gt; 4</code>, <code>10**6 --&gt; 6</code>, etc.</p>\n\n<p>I have tried changing the formatting and also passing through the logarithmic values of <code>np.log(gas_Temp)</code>, but nothing is really working.</p>\n"}, {"tags": ["python", "string", "pandas", "operators"], "answers": [{"tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": true, "score": 2, "last_activity_date": 1499320672, "creation_date": 1499320672, "answer_id": 44940834, "question_id": 44937009, "link": "https://stackoverflow.com/questions/44937009/parse-string-as-conditions-to-filter-pandas-dataframe/44940834#44940834", "title": "parse string as conditions to filter pandas dataframe", "body": "<p>While there may be efficient ways to do it, one possible way might be to use <code>eval</code> function.</p>\n\n<p>Creating input <code>df</code>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndata = pd.DataFrame()\ndata['A']= [np.random.choice([1,2,3,4,5,6]) for i in range(10)]\nprint(data)\n</code></pre>\n\n<p>Input <code>df</code>:</p>\n\n<pre><code>   A\n0  4\n1  3\n2  3\n3  1\n4  1\n5  2\n6  3\n7  6\n8  2\n9  1\n</code></pre>\n\n<p>Now, a function is created such that it <code>iterates</code> through each row of <code>dataframe</code> and <code>condition_dict</code> and when <code>row</code> evaluation matches <code>value</code> is stored in list for corresponding row which is updated for <code>new column</code>. If none of the condition matches then with default it will <code>None</code>:</p>\n\n<pre><code>def add_column(df, condition_dict, NewColumnName):\n    new_values = []\n    for index, row in df.iterrows():\n        # if none of the condition matches then put default value\n        default_value = None\n        # iterate through each condition to check if any matches\n        for key, value in condition_dict.items():\n            expression = 'row.' + key\n            if(eval(expression)):\n                default_value = value\n        # add corresponding rows new value for new column        \n        new_values.append(default_value)\n\n    df[NewColumnName] = new_values\n</code></pre>\n\n<p>Now, to call the function:</p>\n\n<pre><code>add_column(data, {'A==1':0, 'A&gt;5':1}, 'B')\nprint(data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   A    B\n0  4  NaN\n1  3  NaN\n2  3  NaN\n3  1  0.0\n4  1  0.0\n5  2  NaN\n6  3  NaN\n7  6  1.0\n8  2  NaN\n9  1  0.0\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 5920904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cef11672b1f6b5b1c85e5644fee407f9?s=128&d=identicon&r=PG&f=1", "display_name": "yabchexu", "link": "https://stackoverflow.com/users/5920904/yabchexu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 44940834, "answer_count": 1, "score": 3, "last_activity_date": 1499320672, "creation_date": 1499293884, "question_id": 44937009, "link": "https://stackoverflow.com/questions/44937009/parse-string-as-conditions-to-filter-pandas-dataframe", "title": "parse string as conditions to filter pandas dataframe", "body": "<p>Hi I have a pandas dataframe, I have a column A.</p>\n\n<pre><code>data = pandas.DataFrame()\ndata['A']= [numpy.random.choice([1,2,3,4,5,6]) for i in range(10)]\n</code></pre>\n\n<p>I want to add a column B condition on A (when A =1 then B=0, when A>5 then B=1) instead of using:</p>\n\n<pre><code>data.loc[data['A']==1,'B']=0\ndata.loc[data['A']&gt;5, 'B']=1\n</code></pre>\n\n<p>Here I want to create a function to do this given the condition as a dict: {'A=1':0,'A>5':1} so I could use add_column({'A=1':0,'A>5':1}, 'B') to do the code above. I am thinking it is tricky to deal with the operators, any good idea?</p>\n\n<pre><code>def add_column(condition_dict, NewColumnName):\n    pass\n</code></pre>\n"}, {"tags": ["python", "flask", "machine-learning", "tensorflow", "logistic-regression"], "answers": [{"tags": [], "owner": {"reputation": 1000, "user_id": 1454804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277ceaeef3d035930fbf3729e4c50d4d?s=128&d=identicon&r=PG", "display_name": "user1454804", "link": "https://stackoverflow.com/users/1454804/user1454804"}, "is_accepted": true, "score": 0, "last_activity_date": 1499422832, "creation_date": 1499422832, "answer_id": 44968367, "question_id": 44937007, "link": "https://stackoverflow.com/questions/44937007/tensorflow-linearclassifier-always-guesses-negative-class/44968367#44968367", "title": "Tensorflow LinearClassifier() always guesses negative class", "body": "<p>I guess, you need to add cross_columns to make our linear model works better.</p>\n"}], "owner": {"reputation": 738, "user_id": 5540936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1dd3dddc6a02d1bc6143801ee58e3242?s=128&d=identicon&r=PG&f=1", "display_name": "Allen More", "link": "https://stackoverflow.com/users/5540936/allen-more"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 44968367, "answer_count": 1, "score": 0, "last_activity_date": 1499422832, "creation_date": 1499293876, "question_id": 44937007, "link": "https://stackoverflow.com/questions/44937007/tensorflow-linearclassifier-always-guesses-negative-class", "title": "Tensorflow LinearClassifier() always guesses negative class", "body": "<p>I'm currently implementing a logistic regressor using tensorflow according to their 'wide' tutorial: <a href=\"https://www.tensorflow.org/tutorials/wide\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tutorials/wide</a><br>\nMy code pretty much matches the tutorial, however, when I run predict() on the model, it guesses the negative class every time, which is about 77% of the data.  How can I get my model to venture some positive guesses? I am not regularizing so variance should be at a max. The documentation boasted 84 percent accuracy and I am using exactly the same dataset.  What could be going wrong? Here is the training code:</p>\n\n<pre><code>def train_logistic_model(training_path, response, predictors, num_labels):\n\n    # Get csv\n    df_train = pd.read_csv(training_path, header=0)\n\n    # Sanitize column names\n    unsanitized_column_names = df_train.columns.values\n    column_names = []\n    for col in unsanitized_column_names:\n        column_names.append(re.sub('[^A-Za-z0-9]+', '', col))\n\n    # Update dataframe with sanitized column names\n    df_train = pd.read_csv(training_path, names=column_names, skiprows=1)\n\n    # Slice off %10 of training data to test with\n    df_test = df_train.loc[(len(df_train.index) * .9):]\n    df_train = df_train.loc[:(len(df_train.index) * .9)]\n\n    response_name = column_names[response]\n\n    LABEL_COLUMN = \"label\"\n    df_train[LABEL_COLUMN] = (df_train[response_name].apply(lambda x: \"&gt;50K\" in x)).astype(int)\n    df_test[LABEL_COLUMN] = (df_test[response_name].apply(lambda x: \"&gt;50K\" in x)).astype(int)\n\n    del df_train[response_name]\n    del df_test[response_name]\n\n    # remove NaN elements\n    df_train = df_train.dropna(how='any', axis=0)\n    df_test = df_test.dropna(how='any', axis=0)\n\n    CATEGORICAL_COLUMNS = []\n    CONTINUOUS_COLUMNS = []\n    for key, value in predictors.items():\n        if value == 'Categorical':\n            CATEGORICAL_COLUMNS.append(column_names[key])\n        elif value == 'Continuous':\n            CONTINUOUS_COLUMNS.append(column_names[key])\n\n    # Input bulder function\n    def input_fn(df):\n        continuous_cols = {k: tf.constant(df[k].values) for k in CONTINUOUS_COLUMNS}\n\n        categorical_cols = {\n            k: tf.SparseTensor(\n                indices=[[i, 0] for i in range(df[k].size)],\n                values=df[k].values,\n                dense_shape=[df[k].size, 1]) for k in CATEGORICAL_COLUMNS\n            }\n\n        # Merges the two dictionaries into one.\n        feature_cols = {**continuous_cols, **categorical_cols}\n\n        label = tf.constant(df[LABEL_COLUMN].values)\n\n        return feature_cols, label\n\n    def train_input_fn():\n        return input_fn(df_train)\n\n    def eval_input_fn_test():\n        return input_fn(df_test)\n\n    cat_tensors = []\n    for col in CATEGORICAL_COLUMNS:\n        cat_tensors.append(tf.contrib.layers.sparse_column_with_hash_bucket(\n            column_name=col, hash_bucket_size=100))\n\n    cont_tensors = []\n    for cont in CONTINUOUS_COLUMNS:\n        cont_tensors.append(tf.contrib.layers.real_valued_column(cont))\n\n    feature_columns = cat_tensors + cont_tensors\n\n    model_dir = tempfile.mkdtemp()\n\n    logistic_model = tf.contrib.learn.LinearClassifier(feature_columns=feature_columns, n_classes=num_labels, model_dir=model_dir)\n\n    logistic_model.fit(input_fn=train_input_fn, steps=200)\n\n    # Test the model on reserve data\n    eval_result_test = logistic_model.evaluate(input_fn=eval_input_fn_test, steps=1)\n\n    # Test the model on training data\n    eval_result_train = logistic_model.evaluate(input_fn=eval_input_fn_train, steps=1)\n\n    for key in sorted(eval_result_train):\n        print(\"%s: %s\" % (key, eval_result_train[key]))\n\n    return eval_result_test, model_dir\n</code></pre>\n"}, {"tags": ["python", "mysql", "pymysql"], "comments": [{"owner": {"reputation": 43134, "user_id": 1726343, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55744f355c4714fd473c50e799165a70?s=128&d=identicon&r=PG", "display_name": "Asad Saeeduddin", "link": "https://stackoverflow.com/users/1726343/asad-saeeduddin"}, "edited": false, "score": 0, "creation_date": 1499294005, "post_id": 44937003, "comment_id": 76850403, "body": "Try adding <code>print cursor._last_executed</code>, see what query is actually being executed."}], "answers": [{"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 1, "last_activity_date": 1499294208, "creation_date": 1499294208, "answer_id": 44937077, "question_id": 44937003, "link": "https://stackoverflow.com/questions/44937003/could-not-format-sql-correctly-in-pymysql/44937077#44937077", "title": "Could not format sql correctly in pymysql", "body": "<p>You can't set a column name like a parameter where you're doing <code>where %s like %s</code>.  To dynamically set the column name you need to do actual string manipulation like:</p>\n\n<pre><code>sql = 'select * from articles where '+ sql_identifier('author') +' like %s'\ncursor.execute(sql, ('%steven%',))\n</code></pre>\n\n<p>Where <code>sql_identifier</code> is your lib's function for making an identifier safe for SQL injection.  Something like:</p>\n\n<pre><code># don't actually use this!\ndef sql_identifier(s):\n  return '\"%s\"' % s.replace('\"','')\n</code></pre>\n\n<p>But with actual testing and knowledge of the DB engine you're using.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 5817139, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b723e8f6af066bff585817a3ba309ed?s=128&d=identicon&r=PG&f=1", "display_name": "zhangzhimin", "link": "https://stackoverflow.com/users/5817139/zhangzhimin"}, "is_accepted": false, "score": 1, "last_activity_date": 1499294318, "creation_date": 1499294318, "answer_id": 44937097, "question_id": 44937003, "link": "https://stackoverflow.com/questions/44937003/could-not-format-sql-correctly-in-pymysql/44937097#44937097", "title": "Could not format sql correctly in pymysql", "body": "<p>The problem here is fact a minor mistake. Thanks to @Asad Saeeduddin, when I try to use <code>print cursor._last_executed</code> to check what has happened. I found that what is in fact executed is \n<code>SELECT * FROM articles WHERE 'title' LIKE '%steven%'</code>, look the quotation mark around the title, that's the reason why I got empty set.\nSo always remember <strong>the string after formatting will have a quotation around</strong></p>\n"}], "owner": {"reputation": 111, "user_id": 5817139, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b723e8f6af066bff585817a3ba309ed?s=128&d=identicon&r=PG&f=1", "display_name": "zhangzhimin", "link": "https://stackoverflow.com/users/5817139/zhangzhimin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499294318, "creation_date": 1499293857, "question_id": 44937003, "link": "https://stackoverflow.com/questions/44937003/could-not-format-sql-correctly-in-pymysql", "title": "Could not format sql correctly in pymysql", "body": "<p>What I want is execute the sql \n<code>select * from articles where author like \"%steven%\"</code>.</p>\n\n<p>For the sake of safety, i used like this way :</p>\n\n<p><code>\ncursor.execute('select * from articles where %s like %s', ('author', '%steven%')\n</code></p>\n\n<p>Then the result is just empty, not get a syntax error, but just empty set.\nBut I am pretty sure there is some thing inside, I can get result use the first sql. Is there anything run with my code ?</p>\n"}, {"tags": ["python", "tensorflow", "svm"], "answers": [{"tags": [], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "is_accepted": false, "score": 0, "last_activity_date": 1499319578, "creation_date": 1499319578, "answer_id": 44940578, "question_id": 44937001, "link": "https://stackoverflow.com/questions/44937001/feature-are-incompatible-with-given-information-in-evaluate-using-tf-contrib-l/44940578#44940578", "title": "Feature are incompatible with given information in evaluate() using tf.contrib.learn.SVM", "body": "<p>In your <code>test_input</code> function, replace <code>features</code> with <code>multi_dim_features</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 8168139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413b52854cd9c7b2813b4e9d37815d6e?s=128&d=identicon&r=PG&f=1", "display_name": "A.Yan", "link": "https://stackoverflow.com/users/8168139/a-yan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499319578, "creation_date": 1499293846, "question_id": 44937001, "link": "https://stackoverflow.com/questions/44937001/feature-are-incompatible-with-given-information-in-evaluate-using-tf-contrib-l", "title": "Feature are incompatible with given information in evaluate() using tf.contrib.learn.SVM", "body": "<p>Code is as follows:</p>\n\n<pre><code>def svm_tf(file):\n    X,Y,training_size, index = process_data(file)\n    def input_fn():\n        return {\n              'example_id': tf.constant(index[:training_size]),\n              'multi_dim_feature': tf.constant(X[:training_size].values.tolist()),\n        }, tf.constant(Y[:training_size])\n\n    feature_columns = [tf.contrib.layers.real_valued_column(\"multi_dim_feature\",dimension=4)]\n    svm = learn.SVM(feature_columns=feature_columns,\n                    l1_regularization=0.0,\n                    l2_regularization=1.0,\n                    example_id_column='example_id') \n    svm.fit(input_fn=input_fn,steps=50)\n\n    def test_input():\n        return{\n        'example_id': tf.constant(index[training_size:]),\n        'features': tf.constant(X[training_size:].values.tolist())\n        }, tf.constant(Y[training_size:])\n\n\n    accuracy = svm.evaluate(input_fn=test_input,steps=1)['accuracy']\n    print('\\nAccuracy :{0:f}\\n'.format(accuracy))\n</code></pre>\n\n<p>However, when I run the program, it runs into error as follows:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"subscriber.py\", line 84, in &lt;module&gt;\n    svm_tf(file)\n  File \"subscriber.py\", line 75, in svm_tf\n    accuracy = svm.evaluate(input_fn=test_input,steps=1)['accuracy']\n  File \"/home/annie/.local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 289, in new_func\n    return func(*args, **kwargs)\n  File \"/home/annie/.local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 543, in evaluate\n    log_progress=log_progress)\n  File \"/home/annie/.local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 827, in _evaluate_model\n    self._check_inputs(features, labels)\n  File \"/home/annie/.local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 757, in _check_inputs\n    (str(features), str(self._features_info)))\nValueError: Features are incompatible with given information. Given features: {'example_id': &lt;tf.Tensor 'Const:0' shape=(1000,) dtype=string&gt;, 'features': &lt;tf.Tensor 'Const_1:0' shape=(1000, 4) dtype=float32&gt;}, required signatures: {'example_id': TensorSignature(dtype=tf.string, shape=TensorShape([Dimension(4000)]), is_sparse=False), 'multi_dim_feature': TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(4000), Dimension(4)]), is_sparse=False)}.\n</code></pre>\n\n<p>I cannot find any relevant questions online and therefore is very lost\nPlease help! Thanks in advance</p>\n"}, {"tags": ["python", "arrays", "list", "math", "iteration"], "comments": [{"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1499669335, "post_id": 44936996, "comment_id": 76984343, "body": "do you know <a href=\"http://pandas.pydata.org\" rel=\"nofollow noreferrer\">pandas</a>? I think it could help you a lot."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499350425, "post_id": 44941624, "comment_id": 76877919, "body": "Thank you! This makes sense, however I am still receiving the error: &quot;unsupported operand type(s) for /: &#39;str&#39; and &#39;int&#39;&quot;."}, {"owner": {"reputation": 81, "user_id": 8263013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430c0be92d0a94f0d33b735e893d1994?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Jaras", "link": "https://stackoverflow.com/users/8263013/ed-jaras"}, "reply_to_user": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499411692, "post_id": 44941624, "comment_id": 76904268, "body": "I have edited the reply and have managed to test it as well. Hope that helps."}, {"owner": {"reputation": 81, "user_id": 8263013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430c0be92d0a94f0d33b735e893d1994?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Jaras", "link": "https://stackoverflow.com/users/8263013/ed-jaras"}, "reply_to_user": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499518281, "post_id": 44941624, "comment_id": 76946938, "body": "The simplest change would be <code>power_a = 10**(int(item)&#47;10)</code>."}, {"owner": {"reputation": 81, "user_id": 8263013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430c0be92d0a94f0d33b735e893d1994?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Jaras", "link": "https://stackoverflow.com/users/8263013/ed-jaras"}, "reply_to_user": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499726403, "post_id": 44941624, "comment_id": 77019721, "body": "No problem. If this is all fixed, it would be great if you could accept an answer to &quot;close&quot; this."}], "tags": [], "owner": {"reputation": 81, "user_id": 8263013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430c0be92d0a94f0d33b735e893d1994?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Jaras", "link": "https://stackoverflow.com/users/8263013/ed-jaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1499411642, "last_edit_date": 1499411642, "creation_date": 1499323693, "answer_id": 44941624, "question_id": 44936996, "link": "https://stackoverflow.com/questions/44936996/how-to-do-math-operation-on-imported-csv-data/44941624#44941624", "title": "How to do math operation on imported csv data?", "body": "<p>In your for loop, item is the iterator, so you need to use that. So instead of:</p>\n\n<pre><code>power_a = 10**(dB_a/10)\n</code></pre>\n\n<p>use:</p>\n\n<pre><code>power_a = 10**(item/10)\n</code></pre>\n\n<p>A nicer way to create a new list with that data could be:</p>\n\n<pre><code>power_a = [10**(db/10) for db in dB_a]\n</code></pre>\n\n<p>EDIT: The other issue as pointed out in the comment, is that the values are strings. The .csv file is essentially a text file, so a collection of string, rather than integers. What you can do is convert them to numeric values using <code>int(db)</code> or <code>float(db)</code>, depending whether you have whole or floating point numbers.</p>\n\n<p>EDIT2: As pointed out by @J. Meijers, I was using multiplication instead of exponentiation - this has been fixed in the answer.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499350475, "post_id": 44947823, "comment_id": 76877962, "body": "Thank you! This makes sense, however I am still receiving the error: &quot;unsupported operand type(s) for /: &#39;str&#39; and &#39;int&#39;&quot;."}, {"owner": {"reputation": 841, "user_id": 7001235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f93b69eef63bb82d16ab2d38568d50?s=128&d=identicon&r=PG&f=1", "display_name": "J. Meijers", "link": "https://stackoverflow.com/users/7001235/j-meijers"}, "reply_to_user": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "edited": false, "score": 0, "creation_date": 1499668841, "post_id": 44947823, "comment_id": 76984105, "body": "@K.Schneider I added an answer to that problem to my post"}], "tags": [], "owner": {"reputation": 841, "user_id": 7001235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f93b69eef63bb82d16ab2d38568d50?s=128&d=identicon&r=PG&f=1", "display_name": "J. Meijers", "link": "https://stackoverflow.com/users/7001235/j-meijers"}, "is_accepted": true, "score": 0, "last_activity_date": 1499668822, "last_edit_date": 1499668822, "creation_date": 1499341114, "answer_id": 44947823, "question_id": 44936996, "link": "https://stackoverflow.com/questions/44936996/how-to-do-math-operation-on-imported-csv-data/44947823#44947823", "title": "How to do math operation on imported csv data?", "body": "<p>To build on the answer @ed Jaras posted. </p>\n\n<p><code>power_a = [10*(db/10) for db in dB_a]</code> \nis not correct, since this divides by 10, and then multiplies by the same. </p>\n\n<p>It should be: \n<code>power_a = [10**(db/10) for db in dB_a]</code></p>\n\n<p>Credits still go to @Ed Jaras though</p>\n\n<p>Note: \nIf you're wondering what this [something for something in a list] is, it is a list comprehension. They are amazingly elegant constructs that python allows. </p>\n\n<p>What is basically means is [..Add this element to the result.. for ..my element.. in ..a list..]. </p>\n\n<p>You can even add conditionals to them if you want.</p>\n\n<p>If you want to read more about them, I suggest checking out: \n<a href=\"http://www.secnetix.de/olli/Python/list_comprehensions.hawk\" rel=\"nofollow noreferrer\">http://www.secnetix.de/olli/Python/list_comprehensions.hawk</a></p>\n\n<p>Addition:\n@k-schneider: You are probably doing numerical operations (dividing, power, etc. ) on a string, this is because when importing a csv, it is possible for fields to be imported as a string. \nTo make sure that you are working with integers, you can cast db to a string by doing: \n<code>str(db)</code></p>\n"}], "owner": {"reputation": 21, "user_id": 8232809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4eb98efef91bdad7808998663cdbc09e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Schneider", "link": "https://stackoverflow.com/users/8232809/k-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 44947823, "answer_count": 2, "score": 0, "last_activity_date": 1499668822, "creation_date": 1499293812, "last_edit_date": 1499350214, "question_id": 44936996, "link": "https://stackoverflow.com/questions/44936996/how-to-do-math-operation-on-imported-csv-data", "title": "How to do math operation on imported csv data?", "body": "<p>I have read in a csv file ('Air.csv') and have performed some operations to get rid of the header (not important). Then, I used dB_a.append(row[1]) to put this column of the csv data into an array which I could later plot. </p>\n\n<p>This data is dB data, and I want to convert this to power using the simple equation P = 10^(dB/10) for every value. I am new to Python, so I don't quite understand how operations within arrays, lists, etc. works. I think there is something I need to do to iterate over that full data set, which was my attempt at a for loop, but I am still receiving errors. Any suggestions?</p>\n\n<p>Thank you!   </p>\n\n<pre><code>frequency_a=[]\ndB_a=[]\n\na = csv.reader(open('Air.csv'))\n\nfor row in itertools.islice(a, 18, 219):\n       frequency_a.append(row[0])\n       dB_a.append(row[1])\n       #print(frequency_a)\n       print(dB_a)\n\nfor item in dB_a:\n    power_a = 10**(dB_a/10)\n    print(power_a)\n</code></pre>\n"}, {"tags": ["python", "list", "loops"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1499293549, "post_id": 44936928, "comment_id": 76850199, "body": "<i>Never</i> delete items from a list while iterating over it. That invalidates your iterator."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1499293834, "post_id": 44936928, "comment_id": 76850334, "body": "This answer - <a href=\"https://stackoverflow.com/a/34238688/2823755\">stackoverflow.com/a/34238688/2823755</a> - to the question you referenced gives an explanation of why."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1499293908, "post_id": 44936928, "comment_id": 76850365, "body": "Think about what happens when you <code>.remove(i)</code> when <code>i</code> is <code>1</code>, so you are at <code>a[0]</code>. Your list now becomes <code>[2,3,4,5]</code>. Your iterator moves on to position <code>a[1]</code>, which is now the value 3..."}, {"owner": {"reputation": 1, "user_id": 6134637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e75147b91d015fac8c9b2a8299d6ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Shore Shi", "link": "https://stackoverflow.com/users/6134637/shore-shi"}, "edited": false, "score": 0, "creation_date": 1499304006, "post_id": 44936928, "comment_id": 76852940, "body": "Got it! Thanks for your time!"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1499293969, "creation_date": 1499293969, "answer_id": 44937026, "question_id": 44936928, "link": "https://stackoverflow.com/questions/44936928/remove-a-specific-item-from-a-list-by-iterating/44937026#44937026", "title": "Remove a specific item from a list by iterating", "body": "<p>lets try to print the values of i and a while iterating.</p>\n\n<pre><code>for i in a:\n     print i, a\n     a.remove(i)\n</code></pre>\n\n<p>the output will be: </p>\n\n<pre><code>1 [1, 2, 3, 4, 5]\n3 [2, 3, 4, 5]\n5 [2, 4, 5]\n</code></pre>\n\n<p>so when you remove an element, the indices will change, so while value at index 1 was 2 earlier, now it is 3. This will be the value of i.</p>\n"}, {"tags": [], "owner": {"reputation": 6442, "user_id": 10452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fcbed0b3168e95ca616f886bca3d464d?s=128&d=identicon&r=PG", "display_name": "DonGar", "link": "https://stackoverflow.com/users/10452/dongar"}, "is_accepted": false, "score": -1, "last_activity_date": 1499294164, "creation_date": 1499294164, "answer_id": 44937065, "question_id": 44936928, "link": "https://stackoverflow.com/questions/44936928/remove-a-specific-item-from-a-list-by-iterating/44937065#44937065", "title": "Remove a specific item from a list by iterating", "body": "<p>The reason your solution doesn't work as expected is because the iterator doesn't behave the way you'd expect if the list is modified. If you're example was rewritten this way, you'd get the result you expect.</p>\n\n<pre><code>&gt;&gt;&gt; a=[1,2,3,4,5]\n&gt;&gt;&gt; b = a[:]\n&gt;&gt;&gt; for i in b:\n...     a.remove(i)\n... \n&gt;&gt;&gt; a\n[]\n</code></pre>\n\n<p>This is because 'b' is a copy of 'a', so be doesn't get modified when a does. This means the iterator doesn't have the data structure modified underneath it.</p>\n\n<p>A more efficient solution is:</p>\n\n<pre><code>a = [1,2,3,4,5]\na = [i for i in a if not condition(i)]\n</code></pre>\n\n<p>This list comprehension copies as it goes through the source list, and only bothers to copy the elements that aren't being removed.</p>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 2193308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ec2808f90c1334796a7923a4ec6442?s=128&d=identicon&r=PG", "display_name": "djcrabhat", "link": "https://stackoverflow.com/users/2193308/djcrabhat"}, "is_accepted": false, "score": 0, "last_activity_date": 1499294841, "last_edit_date": 1499294841, "creation_date": 1499294480, "answer_id": 44937124, "question_id": 44936928, "link": "https://stackoverflow.com/questions/44936928/remove-a-specific-item-from-a-list-by-iterating/44937124#44937124", "title": "Remove a specific item from a list by iterating", "body": "<p>So you've exposed a little of the python implementation. Basically, an array powers the python list, and it is simply incrementing the array index by 1.  So it'll go to <code>a[0]</code>, <code>a[1]</code>, <code>a[2]</code>... and check before each iteration that it's not gonna run off the end of the array.  As you remove the first item '1' from the list, '2' moves to <code>a[0]</code>.  The array now looks like <code>[2,3,4,5]</code>.  The iterator is now pointing to <code>a[1]</code>, so now  '3' gets removed.  Finally, skipping over '4', '5' gets removed.</p>\n\n<pre><code>a = [1,2,3,4,5]\n\nfor i in a:\n  print(\"a:%s i=%s\"%(a,i))\n  a.remove(i)\n\nprint(\"final a: %s\"%a)\n</code></pre>\n\n<p>Gives the output</p>\n\n<pre><code>a:[1, 2, 3, 4, 5] i=1\na:[2, 3, 4, 5] i=3\na:[2, 4, 5] i=5\nfinal a: [2, 4]\n</code></pre>\n\n<p>Here's the real nuts and bolts if you're interested.\n<a href=\"https://github.com/python/cpython/blob/master/Objects/listobject.c#L2832\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/master/Objects/listobject.c#L2832</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6134637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e75147b91d015fac8c9b2a8299d6ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Shore Shi", "link": "https://stackoverflow.com/users/6134637/shore-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "closed_date": 1499294410, "answer_count": 3, "score": -2, "last_activity_date": 1499297002, "creation_date": 1499293395, "last_edit_date": 1499297002, "question_id": 44936928, "link": "https://stackoverflow.com/questions/44936928/remove-a-specific-item-from-a-list-by-iterating", "closed_reason": "Duplicate", "title": "Remove a specific item from a list by iterating", "body": "<p>I want to remove specific items from python list by iterating and checking if it meet some requirements. At first, I just operate on a list of customized class objects, but it actually meet some errors, and I experiment on a python list of primitive type int, just to find strange result!</p>\n\n<p>Here is some code excerpts:</p>\n\n<pre><code>&gt;&gt;&gt; a=[1,2,3,4,5]\n&gt;&gt;&gt; for i in a:\n...     a.remove(i)\n... \n&gt;&gt;&gt; a\n[2, 4]\n</code></pre>\n\n<p>I expect the <code>a</code> should be <code>[]</code> after the loop, but it proves to be <code>[2,4]</code>, I wonder why actually. I found a related question in <a href=\"https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating\">Remove items from a list while iterating</a>, but it only gives a solution on how to remove specific items, not concerning the mechanism actually. I really want to know the reason of this strange result. </p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "background-image", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499294155, "post_id": 44936911, "comment_id": 76850454, "body": "try with my answer"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499294844, "post_id": 44937046, "comment_id": 76850692, "body": "the <code>QPainter(self)</code> is complaining with the <code>self</code> argument, then I don&#39;t know if it didn&#39;t work because of this or anything else. Warning: Expected QPaintDevice, got StackedWidget instead"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499295044, "post_id": 44937046, "comment_id": 76850750, "body": "I think you implemented it wrong, you could share your code through github, drive or similar to show you how to do it please"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499295376, "post_id": 44937046, "comment_id": 76850866, "body": "@MatheusFernando Look at the example I&#39;ve placed."}, {"owner": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499295478, "post_id": 44937046, "comment_id": 76850893, "body": "here&#39;s the drive link: <a href=\"https://drive.google.com/open?id=0B17RZyeHhRfZZTNiZ1N1cFhfdG8\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B17RZyeHhRfZZTNiZ1N1cFhfdG8</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499296103, "post_id": 44937046, "comment_id": 76851076, "body": "Please the code you are missing certain classes or functions, you could share that too. One question, the QStackedWidget is never displayed, that widget is used to display other widgets, maybe you want QMainWindow to have that background?"}, {"owner": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499296704, "post_id": 44937046, "comment_id": 76851237, "body": "I uploaded the whole code, here&#39;s a picture of where I want to change: <a href=\"https://drive.google.com/open?id=0B17RZyeHhRfZM0VoNEx1cjNWNFE\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B17RZyeHhRfZM0VoNEx1cjNWNFE</a>"}, {"owner": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "edited": false, "score": 0, "creation_date": 1499298322, "post_id": 44937046, "comment_id": 76851656, "body": "It&#39;s working perfectly now, thank you very much @eyllanesc"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1499296776, "last_edit_date": 1499296776, "creation_date": 1499294068, "answer_id": 44937046, "question_id": 44936911, "link": "https://stackoverflow.com/questions/44936911/how-to-change-the-background-image-of-a-qmainwindow-central-widget/44937046#44937046", "title": "How to change the background image of a QMainWindow central widget?", "body": "<p>To change the background image of a QWidget you should override the paintEvent method, in your case yours in a QStackedWidget, we create a class that inherits from this:</p>\n\n<pre><code>class StackedWidget(QStackedWidget):\n    def __init__(self, parent=None):\n        QStackedWidget.__init__(self, parent=parent)\n\n    def paintEvent(self, event):\n        painter = QPainter(self)\n        painter.drawPixmap(self.rect(), QPixmap(\"ninja.png\"))\n        QStackedWidget.paintEvent(self, event)\n</code></pre>\n\n<p>And then you change:</p>\n\n<pre><code>self.central_widget = QStackedWidget()\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>self.central_widget = StackedWidget()\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtGui import *\n\nclass StackedWidget(QStackedWidget):\n    def __init__(self, parent=None):\n        QStackedWidget.__init__(self, parent=parent)\n\n    def paintEvent(self, event):\n        painter = QPainter(self)\n        painter.drawPixmap(self.rect(), QPixmap(\"image.png\"))\n        QStackedWidget.paintEvent(self, event)\n\nclass MainWindow(QMainWindow):\n    def __init__(self, parent=None):\n        QMainWindow.__init__(self, parent=parent)\n        self.setCentralWidget(StackedWidget())\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    w = MainWindow()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7N4Nr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7N4Nr.png\" alt=\"enter image description here\"></a></p>\n\n<p>The case of QStackedWidget is a special case since this is not shown, this serves to show other widgets, to those widgets you must change the background image.</p>\n\n<p>From your code, the first widget they attach is a <code>QMdiArea</code>, this is also a special case since it has a viewport and this should be changed.</p>\n\n<pre><code>class MdiArea(QMdiArea):\n    def __init__(self, parent=None):\n        QMdiArea.__init__(self, parent=parent)\n\n    def paintEvent(self, event):\n        QMdiArea.paintEvent(self, event)\n        painter = QPainter(self.viewport())\n        painter.drawPixmap(self.rect(), QPixmap(\"image.png\"))\n</code></pre>\n\n<p>In your code change:</p>\n\n<pre><code>self.mdi = QMdiArea()\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>self.mdi = MdiArea()\n</code></pre>\n\n<p>Screenshots:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Epzc3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Epzc3.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2JDrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2JDrt.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 117, "user_id": 5327340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20549eab426833cd786334085a062fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Fernando", "link": "https://stackoverflow.com/users/5327340/matheus-fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 0, "accepted_answer_id": 44937046, "answer_count": 1, "score": 1, "last_activity_date": 1499296776, "creation_date": 1499293309, "question_id": 44936911, "link": "https://stackoverflow.com/questions/44936911/how-to-change-the-background-image-of-a-qmainwindow-central-widget", "title": "How to change the background image of a QMainWindow central widget?", "body": "<p>I'm trying to change the background image of the <code>QMainWindow</code> central widget. The <code>QMainWindow</code>'s background is fairly easy to change but I can't get the same result with it's central widget. What I tried is the code</p>\n\n<pre><code>self.mdi = QMdiArea()\nself.options_window = Options()\nself.central_widget = QStackedWidget()\nself.mdi.setStyleSheet(\"{background-image: url(ninja.png);}\")\nself.setCentralWidget(self.central_widget)\nself.central_widget.addWidget(self.mdi)\nself.central_widget.addWidget(self.options_window)\nself.central_widget.setCurrentWidget(self.mdi)\n</code></pre>\n\n<p>I also tried with this one</p>\n\n<pre><code>self.mdi = QMdiArea()\nself.options_window = Options()\nself.central_widget = QStackedWidget()\nself.central_widget.setStyleSheet(\"{background-image: url(ninja.png);}\")\nself.setCentralWidget(self.central_widget)\nself.central_widget.addWidget(self.mdi)\nself.central_widget.addWidget(self.options_window)\nself.central_widget.setCurrentWidget(self.mdi)\n</code></pre>\n\n<p>Could anyone give me a light in this problem?</p>\n"}, {"tags": ["python", "algorithm", "lego"], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 6745646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb8ca39bccf9bbbf60d7e0fef703f82?s=128&d=identicon&r=PG&f=1", "display_name": "cbolles", "link": "https://stackoverflow.com/users/6745646/cbolles"}, "is_accepted": false, "score": 1, "last_activity_date": 1499305808, "creation_date": 1499305808, "answer_id": 44938562, "question_id": 44936906, "link": "https://stackoverflow.com/questions/44936906/mindstorms-ev3-path-finding-algorithm/44938562#44938562", "title": "Mindstorms EV3 Path-Finding Algorithm", "body": "<p>Depending on the number of ports left on your robot, I would configure your robot as below<a href=\"https://i.stack.imgur.com/kv5sJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kv5sJ.png\" alt=\"enter image description here\"></a>. Here is a high level example of how I would go about the algorithm</p>\n\n<pre><code>while True:\n    if touch_pressed:\n        drive backwards\n        if right_ultra1 and right ultra2 clear:\n            turnRight()\n        else:\n            turnLeft()\n    drive_forward\n</code></pre>\n\n<p>Basically the robot drives forward until it hits on object. Then it backs up just enough to make a turn without hitting the wall. Next, it checks the sensors. Since the sensors are positioned to be as close to the length of the robot as possible, the narrowness of the passage can be estimated. If both sensors read an arbitrarily large value, the passage is wide enough else, the passage is not wide enough. After turning/if sensor was not pressed, it drives forward. Hope this helps!</p>\n"}], "owner": {"reputation": 31, "user_id": 2592565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a873c053b0b86f118fad77df17226082?s=128&d=identicon&r=PG", "display_name": "Vlad Pro", "link": "https://stackoverflow.com/users/2592565/vlad-pro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499305808, "creation_date": 1499293271, "question_id": 44936906, "link": "https://stackoverflow.com/questions/44936906/mindstorms-ev3-path-finding-algorithm", "title": "Mindstorms EV3 Path-Finding Algorithm", "body": "<p>I'm trying to find a way to write a path-finding algorithm for the Lego Mindstorms ev3 using Python (EV3DEV).</p>\n\n<p>I am allowed to use the following sensors:\n-Touch\n-Gyro\n-Ultrasonic\n-Color</p>\n\n<p>I want it to run through a \"corridor\" where it may hit a wall and it has to turn left or right (depending if there is room).\nHow would I use the sensors to determine if it should turn left or right? (and not end up going backwards)</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "is_accepted": false, "score": 4, "last_activity_date": 1499296823, "creation_date": 1499296823, "answer_id": 44937448, "question_id": 44936863, "link": "https://stackoverflow.com/questions/44936863/when-django-models-field-is-empty-set-value-to-the-default-value/44937448#44937448", "title": "When Django models field is empty, set value to the Default value", "body": "<p>you can set up your form  with a default function like: </p>\n\n<pre><code>class YourForm(forms.Form):    \n.....\ndef clean_field(self):\n        data = self.cleaned_data['not_before']\n        if not data:\n            data = '00:00:00'\n</code></pre>\n\n<p>or write a function in your model like:</p>\n\n<pre><code>class Molde(models.Model):\n  not_before = models.TimeField(blank=True, null=True, default='00:00:00')\n  def time(self):\n    if self.not_before:\n        return self.not_before\n    else:\n        return '00:00:00'\n</code></pre>\n\n<p>In this case you would call the function instead of the model field itself. You can also take a look at <a href=\"https://stackoverflow.com/questions/28290998/return-a-default-value-for-empty-field-on-a-django-model\">this</a>.</p>\n\n<p>Hope that helps. </p>\n"}, {"comments": [{"owner": {"reputation": 1415, "user_id": 6312478, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef72bf9f76a3b255aee6686057c7a612?s=128&d=identicon&r=PG&f=1", "display_name": "theGirrafish", "link": "https://stackoverflow.com/users/6312478/thegirrafish"}, "edited": false, "score": 0, "creation_date": 1499349873, "post_id": 44939496, "comment_id": 76877439, "body": "That&#39;s exactly want I wanted, but now when I try, it throws me a 400 Error with <code>&quot;not_before&quot;: [{&quot;message&quot;: &quot;This field is required.&quot;, &quot;code&quot;: &quot;required&quot;}], &quot;max_num_per_day&quot;: [{&quot;message&quot;: &quot;This field is required.&quot;, &quot;code&quot;: &quot;required&quot;</code>"}, {"owner": {"reputation": 2088, "user_id": 5118273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd39cde324935f761ce4201e1f632cb?s=128&d=identicon&r=PG&f=1", "display_name": "badiya", "link": "https://stackoverflow.com/users/5118273/badiya"}, "reply_to_user": {"reputation": 1415, "user_id": 6312478, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef72bf9f76a3b255aee6686057c7a612?s=128&d=identicon&r=PG&f=1", "display_name": "theGirrafish", "link": "https://stackoverflow.com/users/6312478/thegirrafish"}, "edited": false, "score": 0, "creation_date": 1499350739, "post_id": 44939496, "comment_id": 76878170, "body": "have you made the changes at the database level ?"}, {"owner": {"reputation": 1415, "user_id": 6312478, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef72bf9f76a3b255aee6686057c7a612?s=128&d=identicon&r=PG&f=1", "display_name": "theGirrafish", "link": "https://stackoverflow.com/users/6312478/thegirrafish"}, "edited": false, "score": 0, "creation_date": 1499351284, "post_id": 44939496, "comment_id": 76878683, "body": "Yea, I did the migrations, and I also tried it with <code>blank=True</code> just to see, but it would throw me <code>IntegrityError: stp_stp.not_before may not be NULL</code> as an error"}, {"owner": {"reputation": 91, "user_id": 9308731, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--nLamPSHUTM/AAAAAAAAAAI/AAAAAAAARFE/p0Ibbyhb5-4/photo.jpg?sz=128", "display_name": "CrackerKSR", "link": "https://stackoverflow.com/users/9308731/crackerksr"}, "edited": false, "score": 0, "creation_date": 1587915790, "post_id": 44939496, "comment_id": 108691600, "body": "but the default value is editable so still it can be blank if user delete the default value saved."}, {"owner": {"reputation": 209, "user_id": 11870293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-77ZKmHXYCt8/AAAAAAAAAAI/AAAAAAAAAXE/GZcnhiaw0BQ/photo.jpg?sz=128", "display_name": "Coffee inTime", "link": "https://stackoverflow.com/users/11870293/coffee-intime"}, "edited": false, "score": 0, "creation_date": 1591878478, "post_id": 44939496, "comment_id": 110226417, "body": "(1048, &quot;Column &#39;username&#39; cannot be null&quot;)"}], "tags": [], "owner": {"reputation": 2088, "user_id": 5118273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd39cde324935f761ce4201e1f632cb?s=128&d=identicon&r=PG&f=1", "display_name": "badiya", "link": "https://stackoverflow.com/users/5118273/badiya"}, "is_accepted": true, "score": 3, "last_activity_date": 1499313008, "creation_date": 1499313008, "answer_id": 44939496, "question_id": 44936863, "link": "https://stackoverflow.com/questions/44936863/when-django-models-field-is-empty-set-value-to-the-default-value/44939496#44939496", "title": "When Django models field is empty, set value to the Default value", "body": "<p>from what I understood from your question is you just want to set it to default. you can use:\n<a href=\"https://code.djangoproject.com/ticket/6754\" rel=\"nofollow noreferrer\">https://code.djangoproject.com/ticket/6754</a></p>\n\n<p>don't </p>\n\n<pre><code>not_before = models.TimeField(blank=True, null=True, default='00:00:00')\n</code></pre>\n\n<p>instead,</p>\n\n<pre><code>import datetime\nnot_before = models.TimeField(default=datetime.time(0,0))\nmax_num_per_day = models.IntegerField(default=0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 398, "user_id": 1754049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3f513cd3f9c1b7fee4496129bb91c99?s=128&d=identicon&r=PG", "display_name": "Daniel Coelho", "link": "https://stackoverflow.com/users/1754049/daniel-coelho"}, "is_accepted": false, "score": 1, "last_activity_date": 1503002553, "creation_date": 1503002553, "answer_id": 45744651, "question_id": 44936863, "link": "https://stackoverflow.com/questions/44936863/when-django-models-field-is-empty-set-value-to-the-default-value/45744651#45744651", "title": "When Django models field is empty, set value to the Default value", "body": "<p>It seems you are using a <a href=\"https://docs.djangoproject.com/en/1.11/topics/forms/modelforms/\" rel=\"nofollow noreferrer\">ModelForm</a> to grab the data from the user.</p>\n\n<p>In this case, the solution proposed by sasuke will not work. First, you would have to set the <code>required</code> param to <code>False</code> in your form fields, so you would stop seing those \"This field is required\" messages. Still, you would see errors when saving the form. Even if your model instance is initialized with the default value, the form will replace it with <code>None</code>, since there is an existing field in the form matching the field in the model and its value is <code>None</code>. </p>\n\n<p>My solution is to override the values in the model instance before saving them:</p>\n\n<pre><code>model_instance = myform.save(commit=False)\nif not model_instance.not_before:\n    model_instance.not_before = '00:00:00'\nif not model_instance.max_num_per_day:\n    model_instance.max_num_per_day = 0\nmodel_instance.save()\n</code></pre>\n"}], "owner": {"reputation": 1415, "user_id": 6312478, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef72bf9f76a3b255aee6686057c7a612?s=128&d=identicon&r=PG&f=1", "display_name": "theGirrafish", "link": "https://stackoverflow.com/users/6312478/thegirrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5138, "favorite_count": 1, "accepted_answer_id": 44939496, "answer_count": 3, "score": 6, "last_activity_date": 1503002553, "creation_date": 1499293026, "question_id": 44936863, "link": "https://stackoverflow.com/questions/44936863/when-django-models-field-is-empty-set-value-to-the-default-value", "title": "When Django models field is empty, set value to the Default value", "body": "<p>Whenever the user doesn't add a value, I need my Django models to replace the otherwise empty field with the value set in <code>default</code>.<br>\nMy models looks like this:</p>\n\n<pre><code>not_before = models.TimeField(blank=True, null=True, default='00:00:00')\nmax_num_per_day = models.IntegerField(blank=True, null=True, default=0)\n</code></pre>\n\n<p>I tried every combination of <code>null</code>, <code>blank</code> and <code>default</code> but no matter what I do, the fields gets replaced by <code>null</code> instead of <code>'00:00:00'</code> and <code>0</code>.</p>\n\n<p>Is there anyway I can force it to the <code>default</code> value whenever the field is empty?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 2, "creation_date": 1499292997, "post_id": 44936848, "comment_id": 76849997, "body": "You should look into <a href=\"https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">strftime() and strptime()</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1499297415, "post_id": 44936848, "comment_id": 76851419, "body": "You can use <a href=\"https://docs.python.org/3/library/calendar.html#calendar.month_name\" rel=\"nofollow noreferrer\"><code>calendar.month_name</code></a> instead of defining your own. It&#39;s an array indexed by integers, not a <code>dict</code> with keys that are strings, however."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747d87e7716cccc88389f411ba517dd7?s=128&d=identicon&r=PG&f=1", "display_name": "ffnna21", "link": "https://stackoverflow.com/users/8213566/ffnna21"}, "edited": false, "score": 1, "creation_date": 1499293663, "post_id": 44936888, "comment_id": 76850253, "body": "Exactly what I was looking for. Thank you!"}, {"owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "reply_to_user": {"reputation": 71, "user_id": 8213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747d87e7716cccc88389f411ba517dd7?s=128&d=identicon&r=PG&f=1", "display_name": "ffnna21", "link": "https://stackoverflow.com/users/8213566/ffnna21"}, "edited": false, "score": 0, "creation_date": 1499293778, "post_id": 44936888, "comment_id": 76850309, "body": "np!  not sure why people are downvoting your question - it&#39;s basic but legit.  that sucks, sorry."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 71, "user_id": 8213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747d87e7716cccc88389f411ba517dd7?s=128&d=identicon&r=PG&f=1", "display_name": "ffnna21", "link": "https://stackoverflow.com/users/8213566/ffnna21"}, "edited": false, "score": 0, "creation_date": 1499294007, "post_id": 44936888, "comment_id": 76850404, "body": "@FinnaBoi I thought it was meant to be <code>May 20th, 2018</code>?"}, {"owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "edited": false, "score": 0, "creation_date": 1499294432, "post_id": 44936888, "comment_id": 76850559, "body": "There is no strftime option for the ordinal of the date (th/st/nd).  You&#39;ll have to write your own function for that, but you won&#39;t have to brute force it.  Example: <a href=\"https://stackoverflow.com/questions/739241/date-ordinal-output\">stackoverflow.com/questions/739241/date-ordinal-output</a>"}, {"owner": {"reputation": 71, "user_id": 8213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747d87e7716cccc88389f411ba517dd7?s=128&d=identicon&r=PG&f=1", "display_name": "ffnna21", "link": "https://stackoverflow.com/users/8213566/ffnna21"}, "edited": false, "score": 1, "creation_date": 1499294954, "post_id": 44936888, "comment_id": 76850727, "body": "@keredson Appreciate the link. And yeah I&#39;m just starting out with Python, so extra thanks to people who have your patience!"}], "tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": true, "score": 1, "last_activity_date": 1499293189, "creation_date": 1499293189, "answer_id": 44936888, "question_id": 44936848, "link": "https://stackoverflow.com/questions/44936848/whats-the-best-way-to-convert-a-date-in-the-form-yyyy-mm-dd-to-a-date-using-eng/44936888#44936888", "title": "What&#39;s the best way to convert a date in the form yyyy-mm-dd to a date using English month names?", "body": "<p>You have to parse it in the existing format, and output the new.  There is an output <code>%B</code> that represents the full month.  Example:</p>\n\n<pre><code>import datetime\ns = '2018-05-20'\ndt = datetime.datetime.strptime(s, '%Y-%m-%d')\nprint dt.strftime('%B %d, %Y')\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$ python test.py \nMay 20, 2018\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747d87e7716cccc88389f411ba517dd7?s=128&d=identicon&r=PG&f=1", "display_name": "ffnna21", "link": "https://stackoverflow.com/users/8213566/ffnna21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 44936888, "answer_count": 1, "score": 0, "last_activity_date": 1499293189, "creation_date": 1499292928, "question_id": 44936848, "link": "https://stackoverflow.com/questions/44936848/whats-the-best-way-to-convert-a-date-in-the-form-yyyy-mm-dd-to-a-date-using-eng", "title": "What&#39;s the best way to convert a date in the form yyyy-mm-dd to a date using English month names?", "body": "<p>What I mean is, let's say I have the date '2018-05-20'. I want it in the form of 'May 20th, 2018'. What is the best way to do this without brute-forcing (below, for example) so that you don't have to create a bunch of dictionary entries and then deal with mapping all the numbers for months and dates to their English representation? </p>\n\n<pre><code>monthDict = {}\nmonthDict['01'] = 'January'\nmonthDict['02'] = 'February'\nmonthDict['03'] = 'March'\nmonthDict['04'] = 'April'\nmonthDict['05'] = 'May'\nmonthDict['06'] = 'June'\nmonthDict['07'] = 'July'\nmonthDict['08'] = 'August'\nmonthDict['09'] = 'September'\nmonthDict['10'] = 'October'\nmonthDict['11'] = 'November'\nmonthDict['12'] = 'December'\n</code></pre>\n"}, {"tags": ["python", "shell", "jenkins", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": true, "score": 1, "last_activity_date": 1499292828, "creation_date": 1499292828, "answer_id": 44936831, "question_id": 44936798, "link": "https://stackoverflow.com/questions/44936798/running-jupyter-program-using-shell-script/44936831#44936831", "title": "Running Jupyter program using shell script", "body": "<p>This appears to be covered in the <a href=\"http://nbconvert.readthedocs.io/en/latest/execute_api.html\" rel=\"nofollow noreferrer\">docs</a>.  Example:</p>\n\n<pre><code>jupyter nbconvert --to notebook --execute mynotebook.ipynb\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 6557659, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8e4ea0412d63a1f411da8ea9c8093196?s=128&d=identicon&r=PG&f=1", "display_name": "Shabina Rayan", "link": "https://stackoverflow.com/users/6557659/shabina-rayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 44936831, "answer_count": 1, "score": 0, "last_activity_date": 1499293004, "creation_date": 1499292644, "question_id": 44936798, "link": "https://stackoverflow.com/questions/44936798/running-jupyter-program-using-shell-script", "title": "Running Jupyter program using shell script", "body": "<p>I am trying to run my Jupyter program using shell script. However I am unsure of how to do so. I want to run my program on Jenkins, which is a platform that will require my code to be run in shell script in order to test it.</p>\n"}, {"tags": ["python", "pyqt", "pylint"], "comments": [{"owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "edited": false, "score": 0, "creation_date": 1535100141, "post_id": 44936781, "comment_id": 90950236, "body": "I switched from vim-syntastic to <a href=\"https://github.com/w0rp/ale\" rel=\"nofollow noreferrer\">vim ALE</a> so the calls to pylint/flake8 are not blocking anymore."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 4708913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc1cfa396adc631d5ae5460a593a2d0?s=128&d=identicon&r=PG", "display_name": "Mape", "link": "https://stackoverflow.com/users/4708913/mape"}, "is_accepted": false, "score": 1, "last_activity_date": 1508663944, "last_edit_date": 1508663944, "creation_date": 1508663019, "answer_id": 46872304, "question_id": 44936781, "link": "https://stackoverflow.com/questions/44936781/pylint-painfully-slow-when-using-extension-pkg-whitelist-pyqt5/46872304#46872304", "title": "pylint painfully slow when using extension-pkg-whitelist=PyQt5", "body": "<p>I am having the same problem. As a workaround, for my own small project, instead of</p>\n\n<pre><code>from PyQt5.QtWidgets import QMainWindow, etc, etc\n</code></pre>\n\n<p>I have used</p>\n\n<pre><code>from PyQt5 import QtWidgets\n</code></pre>\n\n<p>Then the whitelisting directive is not needed.</p>\n\n<p>Another workaround would be to not use the whitelisting directive and to disable that warning from pylint. But this has the unwanted side-effect of\nhiding all those errors, even the real ones.</p>\n\n<pre><code># pylint: disable=no-name-in-module \n</code></pre>\n"}], "owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1871, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508663944, "creation_date": 1499292536, "last_edit_date": 1499292641, "question_id": 44936781, "link": "https://stackoverflow.com/questions/44936781/pylint-painfully-slow-when-using-extension-pkg-whitelist-pyqt5", "title": "pylint painfully slow when using extension-pkg-whitelist=PyQt5", "body": "<p>I'd like to set</p>\n\n<pre><code>[MASTER]\nextension-pkg-whitelist=PyQt5\n</code></pre>\n\n<p>in <code>pylintrc</code> to avoid all those false positives.</p>\n\n<p>Unfortunately, it makes pylint run much slower.</p>\n\n<p>I'm using vim/syntastic to call pylint on each file write. Without this line, <code>pylint</code> runs in about 2-3 seconds. Not ideal but I can live with it. Using <code>extension-pkg-whitelist=PyQt5</code>, it takes about 15 seconds, which makes it practically unusable.</p>\n\n<p>There is nothing else in <code>pylintrc</code>.</p>\n\n<p>Is this a known issue? I couldn't find any reference to it.</p>\n\n<p>Am I missing something in the config? Is there any workaround?</p>\n"}, {"tags": ["python", "tor"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499294432, "post_id": 44936755, "comment_id": 76850560, "body": "Is this unrelated to your earlier problem in chat where two processes were trying to bind to the same port?"}, {"owner": {"reputation": 1160, "user_id": 488019, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/YqT4e.png?s=128&g=1", "display_name": "Daniel Garc&#237;a Baena", "link": "https://stackoverflow.com/users/488019/daniel-garc%c3%ada-baena"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499295132, "post_id": 44936755, "comment_id": 76850787, "body": "It keeps failing even when you use different ports so it seems like that&#39;s not the problem"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499295223, "post_id": 44936755, "comment_id": 76850821, "body": "Googling the exception you got (custom one, thrown by the tor lib) leads here: <a href=\"https://tor.stackexchange.com/questions/14457/how-many-local-concurrent-tor-connections-can-i-run\" title=\"how many local concurrent tor connections can i run\">tor.stackexchange.com/questions/14457/&hellip;</a>"}, {"owner": {"reputation": 1160, "user_id": 488019, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/YqT4e.png?s=128&g=1", "display_name": "Daniel Garc&#237;a Baena", "link": "https://stackoverflow.com/users/488019/daniel-garc%c3%ada-baena"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499368313, "post_id": 44936755, "comment_id": 76889700, "body": "I added <code>&#39;DataDirectory&#39;: &#39;~&#47;.tor&#47;custom1&#39;</code> and set different ports for each script and it keeps returning the same error message: <code>OSError: Process terminated: No, it&#39;s still there.  Exiting.</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499368514, "post_id": 44936755, "comment_id": 76889791, "body": "I suspect that you need to have different ports and data directories on every running instance. In any case, <a href=\"https://stackoverflow.com/posts/44936755/edit\">edit</a> your question with relevant updates instead of adding info in comments."}, {"owner": {"reputation": 1160, "user_id": 488019, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/YqT4e.png?s=128&g=1", "display_name": "Daniel Garc&#237;a Baena", "link": "https://stackoverflow.com/users/488019/daniel-garc%c3%ada-baena"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499708062, "post_id": 44936755, "comment_id": 77010544, "body": "This is driving me nuts... Just uploaded it to my server and got this new error message: <code>File &quot;test_1.py&quot;, line 25, in &lt;module&gt; &#39;DataDirectory&#39;: &#39;~&#47;.tor&#47;custom1&#39;,</code> (...) <code>raise OSError(&#39;reached a %i second timeout without success&#39; % timeout)</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1499710230, "post_id": 44936755, "comment_id": 77011846, "body": "But does it work interactively? Updates like this in comments with no context about what you changed in between doesn&#39;t help much. Not that I know any of the tech you&#39;re using. I&#39;m just trying to google. Have you considered using tor.SE instead?"}, {"owner": {"reputation": 64787, "user_id": 892493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxAIF.png?s=128&g=1", "display_name": "drew010", "link": "https://stackoverflow.com/users/892493/drew010"}, "edited": false, "score": 0, "creation_date": 1499726386, "post_id": 44936755, "comment_id": 77019711, "body": "Do you really want to keep launching two different Tor instances?  Why not just run one Tor daemon on the system and have the code use it&#39;s SOCKS proxy.  Or are you trying to have multiple daemons running so you can have multiple IPs at once?"}], "answers": [{"tags": [], "owner": {"reputation": 4798, "user_id": 80766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/191y8.jpg?s=128&g=1", "display_name": "Jorjon", "link": "https://stackoverflow.com/users/80766/jorjon"}, "is_accepted": true, "score": 0, "last_activity_date": 1504002332, "last_edit_date": 1504002332, "creation_date": 1503995084, "answer_id": 45934162, "question_id": 44936755, "link": "https://stackoverflow.com/questions/44936755/tor-fails-when-i-run-two-scripts-simultaneously/45934162#45934162", "title": "Tor Fails when I Run Two Scripts Simultaneously", "body": "<p>You need to change the <code>DataDirectory</code> setting, there's an example in <a href=\"https://stackoverflow.com/a/24592862/80766\">this answer</a>.</p>\n\n<pre><code>tor_process = stem.process.launch_tor_with_config(\n    config = {\n        'SocksPort': '7001',\n        'ExitNodes': '{ru}',\n        'StrictNodes': '1',\n        'DataDirectory': r'C:\\Tor\\Data2',\n    },\n)\n</code></pre>\n\n<p>I tested with the same <code>SocksPort</code> but different <code>DataDirectory</code> and I'm able to get different Exit Nodes.</p>\n\n<p>Note that your error mostly have to do with the presence of the <code>lock</code> file in the data folder. Don't copy that file.</p>\n"}], "owner": {"reputation": 1160, "user_id": 488019, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/YqT4e.png?s=128&g=1", "display_name": "Daniel Garc&#237;a Baena", "link": "https://stackoverflow.com/users/488019/daniel-garc%c3%ada-baena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 45934162, "answer_count": 1, "score": 1, "last_activity_date": 1504002332, "creation_date": 1499292419, "question_id": 44936755, "link": "https://stackoverflow.com/questions/44936755/tor-fails-when-i-run-two-scripts-simultaneously", "title": "Tor Fails when I Run Two Scripts Simultaneously", "body": "<p>I'm getting the following error message when I try to run two equal scripts at the same time:</p>\n\n<pre><code>$ python test_1.py\nTraceback (most recent call last):\n  File \"test_1.py\", line 23, in &lt;module&gt;\n    'ERR file /tmp/tor_error_log',\n  File \"/usr/local/lib/python2.7/site-packages/stem/process.py\", line 255, in launch_tor_with_config\n    return launch_tor(tor_cmd, ['-f', '-'], None, completion_percent, init_msg_handler, timeout, take_ownership, stdin = config_str)\n  File \"/usr/local/lib/python2.7/site-packages/stem/process.py\", line 143, in launch_tor\n    raise OSError('Process terminated: %s' % last_problem)\nOSError: Process terminated: No, it's still there.  Exiting.\n</code></pre>\n\n<p>Please find the code for both scripts below. Does anybody knows how can I set up Tor in order to run this two equal scripts simultaneously? Thanks in advance!</p>\n\n<pre><code>from selenium import webdriver\nimport stem.process\nfrom stem import Signal\nfrom stem.control import Controller\nimport os\n\ntor_process = stem.process.launch_tor_with_config(\n    config = {\n        'SocksPort' : '9150',\n        'ControlPort' : '9051',\n        'Log' : [\n            'NOTICE stdout',\n            'ERR file /tmp/tor_error_log',\n            ],\n    },)\n\nservice_args = [\n    '--proxy=localhost:9150',\n    '--proxy-type=socks5',\n    ]\n\ndriver = webdriver.PhantomJS(service_log_path=os.path.devnull, service_args=service_args)\ndriver.get('https://check.torproject.org')\nprint(driver.find_element_by_tag_name('h1').text)\ndriver.quit()\ntor_process.kill()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499292469, "post_id": 44936743, "comment_id": 76849805, "body": "Have you imported the logging module by any change? Also, have you looked at the docs?"}, {"owner": {"reputation": 2510, "user_id": 139781, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IWtCS.jpg?s=128&g=1", "display_name": "razeh", "link": "https://stackoverflow.com/users/139781/razeh"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499355120, "post_id": 44936743, "comment_id": 76881644, "body": "No, I have not imported the logging module. Yes, I have looked at the docs. The code is from an example in the docs."}], "answers": [{"tags": [], "owner": {"reputation": 1181, "user_id": 3161120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef04fc6d56e1d0d0cd4661afe041d69c?s=128&d=identicon&r=PG", "display_name": "gbajson", "link": "https://stackoverflow.com/users/3161120/gbajson"}, "is_accepted": true, "score": 2, "last_activity_date": 1546000422, "last_edit_date": 1546000422, "creation_date": 1546000046, "answer_id": 53958625, "question_id": 44936743, "link": "https://stackoverflow.com/questions/44936743/using-the-sh-python-module-avoid-exception-logging-when-killing-a-background-pr/53958625#53958625", "title": "Using the sh Python module, avoid exception logging when killing a background process", "body": "<p>In order to catch this exception execute your process with <a href=\"http://amoffat.github.io/sh/sections/special_arguments.html#bg-exc\" rel=\"nofollow noreferrer\"><code>_bg_exec=False</code></a> and execute p.wait().</p>\n\n<pre><code>In [21]: p = sh.sleep(100, _bg=True, _bg_exc=False)\n    ...: try:\n    ...:     p.kill()\n    ...:     p.wait()\n    ...: except sh.SignalException_SIGKILL as err:\n    ...:     print(\"foo\")\n    ...:\nfoo\n</code></pre>\n"}], "owner": {"reputation": 2510, "user_id": 139781, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IWtCS.jpg?s=128&g=1", "display_name": "razeh", "link": "https://stackoverflow.com/users/139781/razeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 53958625, "answer_count": 1, "score": 2, "last_activity_date": 1546000422, "creation_date": 1499292361, "question_id": 44936743, "link": "https://stackoverflow.com/questions/44936743/using-the-sh-python-module-avoid-exception-logging-when-killing-a-background-pr", "title": "Using the sh Python module, avoid exception logging when killing a background process", "body": "<p>The following Python:</p>\n\n<pre><code>p=sh.sleep(100, _bg=True)\n\ntry:\n  p.kill()\nexcept sh.SignalException_SIGKILL:\n  print('foo')\n</code></pre>\n\n<p>Gives me:</p>\n\n<pre><code>&gt;&gt;&gt; Exception in thread background thread for pid 14892:\nTraceback (most recent call last):\n\n&lt;blah blah blag, long stack trace elided&gt; \n\nsh.SignalException_SIGKILL: \n\nRAN: /usr/bin/sleep 100\n\nSTDOUT:\n\nSTDERR:\n</code></pre>\n\n<p>How can I avoid the background thread logging an error for something I expect to happen?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 2, "creation_date": 1499292468, "post_id": 44936720, "comment_id": 76849803, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7409780/reading-entire-file-in-python\">Reading entire file in Python</a>"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 3, "creation_date": 1499292469, "post_id": 44936720, "comment_id": 76849806, "body": "Do -&gt; <code>print(text_file.read())</code> and read the link provided. It will explain everything."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1499294149, "post_id": 44936720, "comment_id": 76850452, "body": "<a href=\"https://docs.python.org/3.6/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">7.2 Reading and Writing Files</a> from the Tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7637946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1261599910584382/picture?type=large", "display_name": "poisonishere", "link": "https://stackoverflow.com/users/7637946/poisonishere"}, "edited": false, "score": 0, "creation_date": 1499293315, "post_id": 44936828, "comment_id": 76850118, "body": "It keeps giving me this                                                                           Traceback (most recent call last):   File &quot;main.py&quot;, line 1, in &lt;module&gt;     text_file = open(&quot;files.txt&quot;) FileNotFoundError: [Errno 2] No such file or directory: &#39;files.txt&#39; exited with non-zero status"}, {"owner": {"reputation": 43, "user_id": 6406803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256e272bc5e636160806abf056a06c9?s=128&d=identicon&r=PG&f=1", "display_name": "jhwang", "link": "https://stackoverflow.com/users/6406803/jhwang"}, "reply_to_user": {"reputation": 29, "user_id": 7637946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1261599910584382/picture?type=large", "display_name": "poisonishere", "link": "https://stackoverflow.com/users/7637946/poisonishere"}, "edited": false, "score": 1, "creation_date": 1499293687, "post_id": 44936828, "comment_id": 76850264, "body": "@poisonishere You&#39;re probably not in the same directory that &#39;files.txt&#39; is located in. Open your terminal there or <code>import os</code> and use <code>os.chdir(path)</code>"}], "tags": [], "owner": {"reputation": 43, "user_id": 6406803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256e272bc5e636160806abf056a06c9?s=128&d=identicon&r=PG&f=1", "display_name": "jhwang", "link": "https://stackoverflow.com/users/6406803/jhwang"}, "is_accepted": false, "score": 1, "last_activity_date": 1499292806, "creation_date": 1499292806, "answer_id": 44936828, "question_id": 44936720, "link": "https://stackoverflow.com/questions/44936720/why-isnt-it-printing-file-handling/44936828#44936828", "title": "Why isn&#39;t it printing (file handling)?", "body": "<p>Take a look at the <a href=\"https://docs.python.org/2/library/stdtypes.html#bltin-file-objects\" rel=\"nofollow noreferrer\">file objects documentation</a>. An example of iterating over the file includes:</p>\n\n<pre><code>for line in text_file:\n    print(line)\n</code></pre>\n\n<p>Or use <code>text_file.readlines()</code> to receive a list of lines:</p>\n\n<pre><code>['If you fell down yesterday, stand up today']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 7347169, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-44dJ2yAupF0/AAAAAAAAAAI/AAAAAAAAAB8/yIL2R8MZIko/photo.jpg?sz=128", "display_name": "Sam Carpenter", "link": "https://stackoverflow.com/users/7347169/sam-carpenter"}, "is_accepted": false, "score": 0, "last_activity_date": 1499293082, "creation_date": 1499293082, "answer_id": 44936872, "question_id": 44936720, "link": "https://stackoverflow.com/questions/44936720/why-isnt-it-printing-file-handling/44936872#44936872", "title": "Why isn&#39;t it printing (file handling)?", "body": "<p>The way this works in Python is that it takes the file and stores it as just a file in that variable. Thus, you're trying to print a literal file, not the contents. There are a few ways to read things, assuming fvar as the file object for a text doc.</p>\n\n<pre><code>fulltext = fvar.read()\n</code></pre>\n\n<p>That will put the full text as a string.</p>\n\n<pre><code>oneline = fvar.readline()\n</code></pre>\n\n<p>Puts one line as the string oneline. Best used in loops. It will read the next line each time it runs - when it hits the end, it will return an empty string.</p>\n\n<pre><code>linelist = fvar.readlines()\n</code></pre>\n\n<p>This takes every line, as read with readline, and puts it into a list. Performs the same as a loop that reads each line with readline and appends each line to a list.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 29, "user_id": 7637946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1261599910584382/picture?type=large", "display_name": "poisonishere", "link": "https://stackoverflow.com/users/7637946/poisonishere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499293082, "creation_date": 1499292252, "last_edit_date": 1499292494, "question_id": 44936720, "link": "https://stackoverflow.com/questions/44936720/why-isnt-it-printing-file-handling", "title": "Why isn&#39;t it printing (file handling)?", "body": "<p>I am not very sure where I have gone wrong.</p>\n\n<p>I am trying to print the contents from the page in files.</p>\n\n<p>Here is the code</p>\n\n<pre><code>File&gt;&gt;&gt; If you fell down yesterday, stand up today\n</code></pre>\n\n<hr>\n\n<pre><code>text_file = open(\"files.txt\", \"r\")\nprint(text_file)\n</code></pre>\n"}, {"tags": ["python", "vim", "jedi-vim"], "comments": [{"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "edited": false, "score": 0, "creation_date": 1499299232, "post_id": 44936699, "comment_id": 76851856, "body": "It&#39;s not jedi in charge of the feature. nerdtree or something others."}, {"owner": {"reputation": 13374, "user_id": 552671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41f1c0d7e5cde46eda0db610b0933613?s=128&d=identicon&r=PG", "display_name": "Dave Halter", "link": "https://stackoverflow.com/users/552671/dave-halter"}, "edited": false, "score": 0, "creation_date": 1499299743, "post_id": 44936699, "comment_id": 76851959, "body": "No, at the moment this is not a Jedi feature."}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 0, "creation_date": 1499456762, "post_id": 44943080, "comment_id": 76932415, "body": "I wonder, is it possible to set automatically a mark at every of these points?"}, {"owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "reply_to_user": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 1, "creation_date": 1499497066, "post_id": 44943080, "comment_id": 76941769, "body": "It should be possible to put a mark on the 26 first matches with a bit of vimscript, yes. How would you use those marks?"}, {"owner": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 0, "creation_date": 1499500581, "post_id": 44943080, "comment_id": 76942604, "body": "Well, my thought wasn&#39;t exactly about Python (where you can use <code>gd</code> and the likes) but more about other kind of structured text. And in general, how can this be achieved? Collecting these &quot;points of interest&quot; into a list, and then assigning marks to list elements? Or is there some other way around, what do you think?"}, {"owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "reply_to_user": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 1, "creation_date": 1499503030, "post_id": 44943080, "comment_id": 76943214, "body": "The technical part doesn&#39;t sound hard at all. It&#39;s the &quot;business&quot; part that needs a bit of thinking. For example, it will be impossible for anyone to remember 26 mark \u2194\ufe0e symbol mappings. An obvious workaround would be to use signs but that introduces complexity. A lightweight, on-demand, actionable TOC seems enough to me."}, {"owner": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 0, "creation_date": 1499504115, "post_id": 44943080, "comment_id": 76943504, "body": "In my particular case it&#39;s kinda 8-10 marks at the <b>very</b> maximum :) (more like 5). Also, since I&#39;m not a programmer, the technical part doesn&#39;t seem extremely obvious to me :). For example, how to actually collect those &quot;points of interest&quot;?"}, {"owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "reply_to_user": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "edited": false, "score": 1, "creation_date": 1499505412, "post_id": 44943080, "comment_id": 76943783, "body": "I would <code>:help :redir</code> the output of the command I posted to a variable, <code>:help map()</code> lines to letters and <code>:help :mark</code> every line with its corresponding letter in a <code>:help :for</code> loop."}, {"owner": {"reputation": 1036, "user_id": 1068046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f0cbc24895a6ff9d057f2fa869b8a41?s=128&d=identicon&r=PG", "display_name": "A S", "link": "https://stackoverflow.com/users/1068046/a-s"}, "reply_to_user": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "edited": false, "score": 0, "creation_date": 1499510040, "post_id": 44943080, "comment_id": 76945025, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/148677/discussion-between-a-s-and-romainl\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "is_accepted": false, "score": 4, "last_activity_date": 1499328177, "creation_date": 1499328177, "answer_id": 44943080, "question_id": 44936699, "link": "https://stackoverflow.com/questions/44936699/showing-structure-view-for-python-files-using-jedi-vim/44943080#44943080", "title": "showing structure view for python files using jedi-vim", "body": "<p>This very simple command gives you an actionable outline of your document:</p>\n\n<pre><code>:g/def\\|class/#\n</code></pre>\n\n<p>You can map it if you don't want to type it all the time; and make it a bit cleaner in the same move:</p>\n\n<pre><code>augroup PythonStuff\n    autocmd!\n    autocmd FileType python nnoremap &lt;buffer&gt; &lt;F12&gt; :&lt;C-u&gt;g/\\&lt;def\\&gt;\\\\|\\&lt;class\\&gt;/#&lt;CR&gt;\naugroup END\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 457928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bd929cc59f0a38ccd27391e59379c86b?s=128&d=identicon&r=PG", "display_name": "Raghuram Onti Srinivasan", "link": "https://stackoverflow.com/users/457928/raghuram-onti-srinivasan"}, "is_accepted": true, "score": 0, "last_activity_date": 1499369769, "creation_date": 1499369769, "answer_id": 44957478, "question_id": 44936699, "link": "https://stackoverflow.com/questions/44936699/showing-structure-view-for-python-files-using-jedi-vim/44957478#44957478", "title": "showing structure view for python files using jedi-vim", "body": "<p>Found <a href=\"https://github.com/majutsushi/tagbar\" rel=\"nofollow noreferrer\">majutsushi/tagbar</a> which does this pretty well actually. <a href=\"https://www.youtube.com/watch?v=PJiOYNMOQ8M\" rel=\"nofollow noreferrer\">This video</a> explains how it works with ruby too.</p>\n"}], "owner": {"reputation": 685, "user_id": 457928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bd929cc59f0a38ccd27391e59379c86b?s=128&d=identicon&r=PG", "display_name": "Raghuram Onti Srinivasan", "link": "https://stackoverflow.com/users/457928/raghuram-onti-srinivasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 44957478, "answer_count": 2, "score": 0, "last_activity_date": 1499369769, "creation_date": 1499292156, "question_id": 44936699, "link": "https://stackoverflow.com/questions/44936699/showing-structure-view-for-python-files-using-jedi-vim", "title": "showing structure view for python files using jedi-vim", "body": "<p>Does jedi vim support anything like intellijs <a href=\"https://www.jetbrains.com/help/idea/structure-tool-window-file-structure-popup.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/structure-tool-window-file-structure-popup.html</a> ? </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "edited": false, "score": 0, "creation_date": 1499299836, "post_id": 44936931, "comment_id": 76851976, "body": "This doesn&#39;t work if you need z as a variable, see more specific example in my question. Thanks!"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1499302274, "post_id": 44936931, "comment_id": 76852556, "body": "IMHO you are changing the scope of the question. @mrry was spot on---I was to write the exact same answer. How about accepting his answer and create another question? I believe both would be relevant and useful."}, {"owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "edited": false, "score": 0, "creation_date": 1499307049, "post_id": 44936931, "comment_id": 76853718, "body": "The answer is wrong because tf.multiply still gets executed you just don&#39;t see it anymore because the intermediate value isn&#39;t stored anywhere. If the execution isn&#39;t a problem you could just as well store it in variable z and you&#39;re back where we started."}, {"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1499318853, "post_id": 44936931, "comment_id": 76856685, "body": "I think you might be confusing the execution of the function <code>tf.multiply()</code> (which is called during graph construction) with the execution of the op (which only executes when <code>x &lt; y</code>). Either way, I&#39;ve updated the answer to cover the modified question."}, {"owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "edited": false, "score": 0, "creation_date": 1499323792, "post_id": 44936931, "comment_id": 76859026, "body": "Whooha, that works! thanks! Still, for it to make sense,.. you say <code>tf.multiply()</code> get&#39;s called during construction only, then how comes in my example the update function gets called at each <code>tf.cond</code> evaluation (for both True and False cases)? And doesn&#39;t get evaluated in the &#39;manual&#39; version?"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 5, "last_activity_date": 1499318832, "last_edit_date": 1499318832, "creation_date": 1499293426, "answer_id": 44936931, "question_id": 44936698, "link": "https://stackoverflow.com/questions/44936698/conditional-evaluation-in-tensorflow-graph/44936931#44936931", "title": "conditional evaluation in TensorFlow graph", "body": "<p>The general solution is as follows: move the code that you want to execute conditionally <strong>into the body of the <code>lambda</code></strong> (or&mdash;in general&mdash;the callable object) for the appropriate branch of the <code>tf.cond()</code>. For example, to ensure that <code>tf.multiply(a, b)</code> only executes when <code>x &lt; y</code>, you move it into the <code>true_fn</code> lambda:</p>\n\n<pre><code>result = tf.cond(x &lt; y, lambda: tf.add(x, tf.multiply(a, b)), lambda: tf.square(y))\n</code></pre>\n\n<p>The same principle can be applied to variable update ops, such as <code>tf.assign()</code>. The important detail is that you must create the <code>tf.assign()</code> op <strong>inside the body of the function</strong> used for one of the branches. Here's how you'd modify your second example:</p>\n\n<pre><code>var1 = tf.Variable(tf.zeros(4), trainable=False, name='var1')\ntraining = tf.placeholder(tf.bool)\n\ndef f1():\n  with tf.control_dependencies([tf.assign(var1, var1 + 1)]):\n    return var1 * 1.1\n\ndef f2():\n  return var1 * 1.1\n\nfinal = tf.cond(training, f1, f2)\nsess.run(final, feed_dict={training: False})\n</code></pre>\n\n<p>The control dependencies for the assignment are a little fiddly, so alternatively you could write <code>f1()</code> as:</p>\n\n<pre><code>def f1():\n  return tf.assign(var1, var1 + 1) * 1.1\n</code></pre>\n\n<p>...or put the whole thing on one line as:</p>\n\n<pre><code>final = tf.cond(training, lambda: tf.assign(var1, var1 + 1) * 1.1, lambda: var1 * 1.1)\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 44936931, "answer_count": 1, "score": 2, "last_activity_date": 1499318832, "creation_date": 1499292155, "last_edit_date": 1499312709, "question_id": 44936698, "link": "https://stackoverflow.com/questions/44936698/conditional-evaluation-in-tensorflow-graph", "title": "conditional evaluation in TensorFlow graph", "body": "<p>This can be done with <code>tf.cond</code>, however it will update both branches of the graph, from the <a href=\"https://www.tensorflow.org/api_docs/python/tf/cond\" rel=\"nofollow noreferrer\">manual</a>:</p>\n\n<blockquote>\n  <p>Note that the conditional execution applies only to the operations\n  defined in true_fn and false_fn. Consider the following simple\n  program:</p>\n</blockquote>\n\n<pre><code>z = tf.multiply(a, b)\nresult = tf.cond(x &lt; y, lambda: tf.add(x, z), lambda: tf.square(y))\n</code></pre>\n\n<blockquote>\n  <p>If <code>x &lt; y</code>, the <code>tf.add</code> operation will be executed and tf.square\n  operation will not be executed. Since z is needed for at least one\n  branch of the cond, the <code>tf.multiply</code> operation is <strong>always executed,\n  unconditionally</strong>.</p>\n</blockquote>\n\n<p>How can I implement this such that <code>tf.multiply</code> is executed conditionally (i.e. only when <code>x &gt; Y</code>)?</p>\n\n<p>More specifically, what I'm trying to do:</p>\n\n<pre><code>var1 = tf.Variable(tf.zeros(4), trainable=False, name='var1')\nupdate_var1 = tf.assign(var1,var1 +1)\ntraining = tf.placeholder(tf.bool)\n\ndef f1():\n  with tf.control_dependencies([update_var1]):\n    return var1*1.1\n\ndef f2():\n  return var1 * 1.1\n\nfinal = tf.cond(training, f1, f2)\nsess.run(final, feed_dict={training:False})\n</code></pre>\n\n<p>This will increase var1 with 1 each time you evaluate final, regardless the value of <code>training</code>, and the problem lays in <code>tf.cond</code>, because manually it works:</p>\n\n<pre><code>var1 = tf.Variable(tf.zeros(4), trainable=False, name='var1')\nupdate_var1 = tf.assign(var1,var1 +1)\ntraining = tf.placeholder(tf.bool)\n\nwith tf.control_dependencies([update_var1]):\n  f1 = var1 * 1.1\n\nf2 = var1 * 1.1\n\nsess.run(f1)\n&gt;&gt; array([1.1,1.1,1.1,1.1])\nsess.run(f1)\n&gt;&gt; array([2.2,2.2,2.2,2.2])\n# var1 gets updated every call\nsess.run(f2)\n&gt;&gt; array([2.2,2.2,2.2,2.2])\nsess.run(f2)\n&gt;&gt; array([2.2,2.2,2.2,2.2])\n# var1 does not get updated\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "mpi", "mpi4py"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7938583"}, "edited": false, "score": 0, "creation_date": 1499292201, "post_id": 44936681, "comment_id": 76849695, "body": "isn&#39;t comm.bcast supposed to send data,indices,indptr to all procs ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7938583"}, "edited": false, "score": 0, "creation_date": 1499292340, "post_id": 44936681, "comment_id": 76849753, "body": "your code works, but it doesn&#39;t do what i want, the print should atleast be outside the if block to check if all procs got received data,indices,indptr. And in general comm.bcast don&#39;t need to be in the if block since its supposed to broadcast from rank = 0 to all available procs"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499292421, "post_id": 44936681, "comment_id": 76849781, "body": "you could define the data, indices, indptr outside (above the if block) as an empty list."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7938583"}, "edited": false, "score": 0, "creation_date": 1499292504, "post_id": 44936681, "comment_id": 76849817, "body": "that works!!! without actually putting comm.bcast and print inside the if block. seems like they should be initialised ...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7938583"}, "edited": false, "score": 0, "creation_date": 1499292565, "post_id": 44936681, "comment_id": 76849835, "body": "not very pythonic .. can you edit your answer so i can accept it ?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1499326289, "post_id": 44936681, "comment_id": 76860514, "body": "You can (and IMHO should) initialize the variables with <code>None</code>."}], "tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1499292597, "last_edit_date": 1499292597, "creation_date": 1499292074, "answer_id": 44936681, "question_id": 44936652, "link": "https://stackoverflow.com/questions/44936652/comm-bcast-not-working-properly/44936681#44936681", "title": "comm.bcast not working properly", "body": "<p>you are defining <code>data</code> in the <code>if</code> block. What happens when the <code>if</code> block is <code>false</code>? the variable <code>data</code> is not defined.</p>\n\n<pre><code>from scipy.sparse import csr_matrix\nfrom mpi4py import MPI\n\ncomm=MPI.COMM_WORLD\nrank=comm.Get_rank()\nsize=comm.Get_size()\n\ndata = []\nindices = []\nindptr = []\n\nif rank == 0:\n    data = [1, 2, 3, 4, 5]\n    indices = [1, 3, 2, 1, 0]\n    indptr = [0, 2, 3, 4, 5]\n    #A=csr_matrix((data,indices,indptr),shape=(4,4))                                                                                                              \n\ndata=comm.bcast(data, root=0)\nindices=comm.bcast(indices, root=0)\nindptr=comm.bcast(indptr, root=0)\n\nprint rank,data,indices,indptr\n</code></pre>\n\n<p>This should now work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7938583"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 44936681, "answer_count": 1, "score": 0, "last_activity_date": 1499292597, "creation_date": 1499291924, "question_id": 44936652, "link": "https://stackoverflow.com/questions/44936652/comm-bcast-not-working-properly", "title": "comm.bcast not working properly", "body": "<p>I am trying to test a simple mpi code on python with the following code :</p>\n\n<pre><code>from scipy.sparse import csr_matrix\nfrom mpi4py import MPI\n\ncomm=MPI.COMM_WORLD\nrank=comm.Get_rank()\nsize=comm.Get_size()\n\nif rank == 0:\n    data = [1, 2, 3, 4, 5]\n    indices = [1, 3, 2, 1, 0]\n    indptr = [0, 2, 3, 4, 5]\n    #A=csr_matrix((data,indices,indptr),shape=(4,4))                                                                                                              \n\ndata=comm.bcast(data, root=0)\nindices=comm.bcast(indices, root=0)\nindptr=comm.bcast(indptr, root=0)\n\nprint rank,data,indices,indptr\n</code></pre>\n\n<p>which returns the following error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 14, in &lt;module&gt;\n    data=comm.bcast(data, root=0)\nNameError: name 'data' is not defined\nTraceback (most recent call last):\n  File \"test.py\", line 14, in &lt;module&gt;\n    data=comm.bcast(data, root=0)\nNameError: name 'data' is not defined\nTraceback (most recent call last):\n  File \"test.py\", line 14, in &lt;module&gt;\n    data=comm.bcast(data, root=0)\nNameError: name 'data' is not defined\n0 [1, 2, 3, 4, 5] [1, 3, 2, 1, 0] [0, 2, 3, 4, 5]\n-------------------------------------------------------\nPrimary job  terminated normally, but 1 process returned\na non-zero exit code.. Per user-direction, the job has been aborted.\n-------------------------------------------------------\n--------------------------------------------------------------------------\nmpirun detected that one or more processes exited with non-zero status, thus causing\nthe job to be terminated. The first process to do so was:\n\n  Process name: [[10263,1],1]\n  Exit code:    1\n</code></pre>\n\n<p>It seems like the error is due to me not using comm.bcast properly, but that is exactly how its used in the docs.</p>\n"}, {"tags": ["python", "grobid"], "comments": [{"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 1, "creation_date": 1499291898, "post_id": 44936621, "comment_id": 76849565, "body": "it&#39;s returning a 500 status code, there must be an error generated on the server which can give more information."}, {"owner": {"reputation": 3339, "user_id": 1428728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0f015a959f3ad34941a5f58f72b932?s=128&d=identicon&r=PG", "display_name": "kworr", "link": "https://stackoverflow.com/users/1428728/kworr"}, "edited": false, "score": 0, "creation_date": 1499292018, "post_id": 44936621, "comment_id": 76849611, "body": "Please also add an example on how you are using curl to upload a file."}, {"owner": {"reputation": 433, "user_id": 7650427, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a523829b5e774272d5ad35dcd45b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "fatah", "link": "https://stackoverflow.com/users/7650427/fatah"}, "edited": false, "score": 0, "creation_date": 1499292068, "post_id": 44936621, "comment_id": 76849639, "body": "<code>curl -v --form input=@.&#47;file.pdf localhost:8080&#47;processHeaderDocument</code>"}, {"owner": {"reputation": 433, "user_id": 7650427, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a523829b5e774272d5ad35dcd45b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "fatah", "link": "https://stackoverflow.com/users/7650427/fatah"}, "edited": false, "score": 0, "creation_date": 1499292751, "post_id": 44936621, "comment_id": 76849908, "body": "org.grobid.service.process.GrobidRestProcessFiles: An unexpected exception occured: java.lang.NullPointerException [ERROR] org.grobid.core.utilities.IOUtilities: Error while deleting the temporary file:  java.lang.NullPointerException"}, {"owner": {"reputation": 3339, "user_id": 1428728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0f015a959f3ad34941a5f58f72b932?s=128&d=identicon&r=PG", "display_name": "kworr", "link": "https://stackoverflow.com/users/1428728/kworr"}, "edited": false, "score": 0, "creation_date": 1499292789, "post_id": 44936621, "comment_id": 76849921, "body": "I see that with curl you are submitting form with a <code>input</code> field, while in code you are submitting file under <code>file</code>. You should really consult server logs on what Grobid thinks on your form."}], "answers": [{"tags": [], "owner": {"reputation": 14350, "user_id": 125617, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c6202c2569ebda32705040fae1380396?s=128&d=identicon&r=PG", "display_name": "Renaud", "link": "https://stackoverflow.com/users/125617/renaud"}, "is_accepted": false, "score": 1, "last_activity_date": 1517844253, "creation_date": 1517844253, "answer_id": 48625809, "question_id": 44936621, "link": "https://stackoverflow.com/questions/44936621/grobid-returning-500-type-error/48625809#48625809", "title": "Grobid returning 500 type error", "body": "<p>That works for me:</p>\n\n<pre><code>import requests\n\nurl = 'http://localhost:8080/api/processHeaderDocument'\nmultipart_form_data = {\n    'input': open('file.pdf', 'rb')\n}\nr = requests.post(url, files=multipart_form_data)\n\nassert response.status_code == 200, response.content\nprint(response.content)\n\n\n# extracting xml\nfrom lxml import objectify\nroot = objectify.fromstring(response.content)\ntitle = root.teiHeader.fileDesc.titleStmt.title\n</code></pre>\n"}], "owner": {"reputation": 433, "user_id": 7650427, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a523829b5e774272d5ad35dcd45b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "fatah", "link": "https://stackoverflow.com/users/7650427/fatah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1610124448, "creation_date": 1499291756, "last_edit_date": 1610124448, "question_id": 44936621, "link": "https://stackoverflow.com/questions/44936621/grobid-returning-500-type-error", "title": "Grobid returning 500 type error", "body": "<p>I am trying to use Grobid which is built in my local machine, but this script is print a 500 error. Whereas it works fine when I do it from the CLI using Curl. Help please!</p>\n\n<pre><code>    import requests\n\n    url = 'http://localhost:8080/processHeaderDocument'\n    files={'file': open('file.pdf', 'rb')}\n    r = requests.post(url,files=files)\n    print r.status_code\n</code></pre>\n"}, {"tags": ["python", "multithreading", "kivy"], "comments": [{"owner": {"reputation": 183, "user_id": 8536248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnYA6.jpg?s=128&g=1", "display_name": "parovelb", "link": "https://stackoverflow.com/users/8536248/parovelb"}, "edited": false, "score": 0, "creation_date": 1594642972, "post_id": 44936619, "comment_id": 111187481, "body": "Perhaps call the popup and run your method in a parallel thread like I did for my problem:  <a href=\"https://stackoverflow.com/questions/62691704/kivy-automatically-start-a-method-from-popup\" title=\"kivy automatically start a method from popup\">stackoverflow.com/questions/62691704/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8504109, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kHeFS3yCIcs/AAAAAAAAAAI/AAAAAAAAAJM/4go3CNX5Ft0/photo.jpg?sz=128", "display_name": "nitin philip", "link": "https://stackoverflow.com/users/8504109/nitin-philip"}, "is_accepted": false, "score": -1, "last_activity_date": 1511946524, "last_edit_date": 1511946524, "creation_date": 1511945857, "answer_id": 47548669, "question_id": 44936619, "link": "https://stackoverflow.com/questions/44936619/kivy-popup-running-in-separate-thread/47548669#47548669", "title": "Kivy popup running in separate thread", "body": "<p>Were you able to get this sorted?</p>\n\n<p>I think it works if you use the thread for populating the tree rather than using it for showing the popup. After populating the tree, in the same thread you can close the pop up using Popup.dismiss()</p>\n\n<p>main.py file</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.popup import Popup\nfrom kivy.uix.label import Label\nfrom kivy.uix.boxlayout import BoxLayout\nimport time, threading\n\nclass popupTestApp(App):\n    def waitSec(self):\n        time.sleep(5)\n        self.p.dismiss()\n\n    def popUpFunc(self):\n        self.p = Popup(title='Test Popup', content=Label(text='This is a test'), size_hint=(None,None), size=(400,400))\n        self.p.open()\n        popUpThread = threading.Thread(target=self.waitSec)\n        popUpThread.start()\n\nif __name__ == '__main__':\n    popupTestApp().run()\n</code></pre>\n\n<p>popuptest.kv file</p>\n\n<pre><code>BoxLayout:\n    BoxLayout:\n        id:LeftPane\n        Button:\n            id:MyButton\n            text:'Pop it up!'\n            on_release:app.popUpFunc()\n    BoxLayout:\n        id:RightPane\n        Label:\n            text: 'Another Pane'\n</code></pre>\n\n<p>Take a look at the below link where this is explained well.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30595908/building-a-simple-progress-bar-or-loading-animation-in-kivy\">Building a simple progress bar or loading animation in Kivy</a></p>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 10881573, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iHazXnor2I8/AAAAAAAAAAI/AAAAAAAAC_o/iSpyKguxPVg/photo.jpg?sz=128", "display_name": "Michael Green", "link": "https://stackoverflow.com/users/10881573/michael-green"}, "is_accepted": false, "score": 0, "last_activity_date": 1564691752, "creation_date": 1564691752, "answer_id": 57316645, "question_id": 44936619, "link": "https://stackoverflow.com/questions/44936619/kivy-popup-running-in-separate-thread/57316645#57316645", "title": "Kivy popup running in separate thread", "body": "<p>I built an app which does something similar to what you're doing (different computation, but as you said the point was it was time-consuming and you want to thread a popup that shows the app isn't crashed - it's just crankin' the numbers). What ended up working for me was to set up a button to execute a dummy function which toggles both the popup and the calculation. Run the popup first and then thread the calculation through the 'from threading import Thread' module to execute the computation on a separate thread.</p>\n\n<p>Here's a working example. It's just sleeping for 5 seconds but you can stick your computation into that function and it should work just fine. What it does is opens the popup before the computation and closes the popup when the calculation is done. Also, you can stick a 'Loading.gif' file into the folder and it'll import that as your loading gif if you want to use something other than what kivy pulls up (which is essentially a loading gif for loading your Loading.gif which isn't loading because it's not there... haha). Also added an 'ABORT' button if your user gets tired of waiting.</p>\n\n<p>Finally just as a side note, I've had difficulties getting the .kv file to build into the pyinstaller application bundeler, so just as a heads up, using the builder.load_string(KV) function is a good alternative for that.</p>\n\n<pre><code>from threading import Thread\nfrom sys import exit\nfrom kivy.app import App\nfrom kivy.uix.gridlayout import GridLayout\nfrom kivy.uix.popup import Popup\nfrom kivy.lang import Builder\n\nKV = '''\n&lt;Pop&gt;:\n    id:pop\n    title: ''\n    auto_dismiss: False\n    padding: 10\n    spacing: 10\n\n    BoxLayout:\n        BoxLayout:\n            padding: 10\n            spacing: 10\n            orientation: 'vertical'\n            Label:\n                font_size: 22\n                size_hint_y: None\n                text_size: self.width, None\n                height: self.texture_size[1]\n                text: \"Process is currently running.\"\n            Label:\n                id: error_msg\n                size_hint_x: 0.3\n                text: ''\n\n            BoxLayout:\n                orientation: 'vertical'\n                Button:\n                    background_color: (1,0,0,1)\n                    text: \"ABORT\"\n                    on_press: root.sysex()\n\n        AsyncImage:\n            source: 'Loading.gif'\n\n&lt;MetaLevel&gt;:\n    rows: 1\n    cols: 1\n    Button:\n        text: 'RUN'\n        on_release: root.dummy()\n\n'''\n\nBuilder.load_string(KV)\n\nclass MetaLevel(GridLayout):\n\n    def dummy(self, *args):\n        App.get_running_app().pop.open()\n        Thread(target=self.calculate, args=(args,), daemon=True).start()\n\n    def calculate(self, *args):\n        import time\n        time.sleep(5)\n        App.get_running_app().pop.dismiss()\n\n\nclass Pop(Popup):\n    def sysex(self):\n        exit()\n\n\nclass Cruncher(App):\n    def build(self):\n        self.pop = Pop()\n        return MetaLevel()\n\n\nif __name__ == \"__main__\":\n    Cruncher().run()\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4825476, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d30884c989e0e1125344d6bbcff35721?s=128&d=identicon&r=PG&f=1", "display_name": "jGraves", "link": "https://stackoverflow.com/users/4825476/jgraves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 621, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1564691752, "creation_date": 1499291746, "question_id": 44936619, "link": "https://stackoverflow.com/questions/44936619/kivy-popup-running-in-separate-thread", "title": "Kivy popup running in separate thread", "body": "<p>I am populating a treeview in Kivy that takes some time depending on how large it is. </p>\n\n<p>In the case the tree is large and takes awhile, I would like to display a popup while it is populating so the user is aware the program has not frozen, and close this popup when the logic for populating the tree finishes. </p>\n\n<p>Here is what I have come up with through some research on the topic, but the popup still seems to only come once the tree is finished populating:</p>\n\n<pre><code>def show(self, *args):\n        self.error_popup.open()\n\ndef populate_tree(self, model):\n        #Clock.schedule_once(self.error_popup.open())\n        popup_thread = threading.Thread(target=self.show())\n        popup_thread.start()\n\n        # order the dictionary for better user experience \n        ordered_data = collections.OrderedDict(sorted(model.items()))\n\n        # logic to populate tree\n        for county, value in ordered_data.items():\n\n            if county != \"model_name\":\n                # set initial county dropdowns in tree\n                county_label = self.treeview.add_node(TreeViewButton(text=str(county), on_press=self.edit_node))\n                i = 0 # keep count of rules\n\n                # add rules children to county\n                for rule_obj, rule_list in value.items():\n                    for rule in rule_list:\n                        i += 1\n                        # set rule number in tree\n                        rule_label = self.treeview.add_node(TreeViewButton(text='Rule ' + str(i), on_press=self.edit_node), county_label)\n                        # add conditions children to rule\n                        for condition in rule:\n                           self.treeview.add_node(TreeViewButton(text=condition, on_press=self.edit_node), rule_label)\n\n        #Clock.schedule_once(self.error_popup.dismiss())\n        #somehow close popup_thread\n</code></pre>\n\n<p>I included a kivy Clock attempt in case that is more on the right track of what I am looking for, however currently it will just open the popup and never populate the tree. I am new to GUI programming and event callbacks, so any help is greatly appreciated.</p>\n\n<p>I tried keeping the code short, if more is needed please let me know.</p>\n"}, {"tags": ["python", "google-app-engine"], "comments": [{"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "edited": false, "score": 0, "creation_date": 1499292911, "post_id": 44936591, "comment_id": 76849970, "body": "We need to see your <code>app.yaml</code> file."}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1499315442, "post_id": 44936591, "comment_id": 76855723, "body": "Is that your actual indentation in the code? If so <code>def get()</code> needs to be further indented vs <code>class DisplayProduct()</code>"}, {"owner": {"reputation": 5946, "user_id": 1179958, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UFa2d.jpg?s=128&g=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/1179958/sriram"}, "edited": false, "score": 0, "creation_date": 1499327211, "post_id": 44936591, "comment_id": 76861128, "body": "show your class BaseHandler"}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 2377174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tmnNb.png?s=128&g=1", "display_name": "kxtronic", "link": "https://stackoverflow.com/users/2377174/kxtronic"}, "edited": false, "score": 0, "creation_date": 1499376169, "post_id": 44940084, "comment_id": 76893570, "body": "Hi GAEfan: I tried the logging you suggested and couldn&#39;t get it to work. However you gave me an idea: instead of programmatically generating a POST request I create a GET request like: url_str = &#39;/products_display?find_id_txt=&#39; + prod_id_txt and then  self.redirect(url_str). I have two methods in display_product a post and a get. It now works.  This allowed me to find out that I had not installed the requests module. I&#39;m looking into that now, but at least the app works."}, {"owner": {"reputation": 10484, "user_id": 3524613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71de987671a207271720d862fa4caafb?s=128&d=identicon&r=PG&f=1", "display_name": "GAEfan", "link": "https://stackoverflow.com/users/3524613/gaefan"}, "reply_to_user": {"reputation": 293, "user_id": 2377174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tmnNb.png?s=128&g=1", "display_name": "kxtronic", "link": "https://stackoverflow.com/users/2377174/kxtronic"}, "edited": false, "score": 0, "creation_date": 1499391106, "post_id": 44940084, "comment_id": 76897769, "body": "Yes, this was the next step in troubleshooting."}, {"owner": {"reputation": 293, "user_id": 2377174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tmnNb.png?s=128&g=1", "display_name": "kxtronic", "link": "https://stackoverflow.com/users/2377174/kxtronic"}, "edited": false, "score": 0, "creation_date": 1499495406, "post_id": 44940084, "comment_id": 76941381, "body": "Installing the requests module hits against other packages being needed: chardet, idfa etc. What would be the simplest way to send a post to the page displaying the newly stored product? As mentioned, I can do the trick with get, but I also call the same product display page from a find_product form elsewhere and the form submit button sends a post. As much as possible I would like to avoid code duplication by having identical get and get functions in the same handler."}], "tags": [], "owner": {"reputation": 10484, "user_id": 3524613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71de987671a207271720d862fa4caafb?s=128&d=identicon&r=PG&f=1", "display_name": "GAEfan", "link": "https://stackoverflow.com/users/3524613/gaefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1499316934, "creation_date": 1499316934, "answer_id": 44940084, "question_id": 44936591, "link": "https://stackoverflow.com/questions/44936591/405-method-not-allowed-the-method-get-is-not-allowed-for-this-resource-appengin/44940084#44940084", "title": "405 Method Not Allowed The method GET is not allowed for this resource (AppEngine, Python)", "body": "<p>Try this to troubleshoot:</p>\n\n<pre><code>import logging\n\nclass DisplayProduct(BaseHandler):\n    def get:\n        logging.info(\"this is a GET\")\n\n    def post:\n        logging.info(\"this is a POST\")\n</code></pre>\n\n<p>Then, send your current POST.  Next, send a request to: <code>http://localhost:8080/products_display?find_id_txt=test</code>.  Hopefully, you'll see what is happening.</p>\n"}], "owner": {"reputation": 293, "user_id": 2377174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tmnNb.png?s=128&g=1", "display_name": "kxtronic", "link": "https://stackoverflow.com/users/2377174/kxtronic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 44940084, "answer_count": 1, "score": 0, "last_activity_date": 1499376809, "creation_date": 1499291586, "last_edit_date": 1499376809, "question_id": 44936591, "link": "https://stackoverflow.com/questions/44936591/405-method-not-allowed-the-method-get-is-not-allowed-for-this-resource-appengin", "title": "405 Method Not Allowed The method GET is not allowed for this resource (AppEngine, Python)", "body": "<p>NOTE: I think I have found what's wrong in my code, I had not installed the request module. I'm investigating this now.</p>\n\n<p>I'm banging my head against the wall with this appengine application. Tried the remedies given for similar questions to no avail. Maybe someone can spot what the issue is?</p>\n\n<p>Here's what I'm doing:</p>\n\n<p>1) I create a product in the app based on the user's input. Once written to the ndb I call a page to display the recently created product:</p>\n\n<pre><code>import requests\n....\nr = requests.post('products_display', data = {'find_id_txt':prod_id_txt})\n</code></pre>\n\n<p>The request is routed through:</p>\n\n<pre><code>application = webapp2.WSGIApplication([\n    ('/products_add', AddProduct),      \n    ('/products_display', DisplayProduct),    \n    ...\n], config = session_params, debug = True) \n</code></pre>\n\n<p>It then arrives at the correct handler and I get the 405 error (405 Method Not Allowed The method GET is not allowed for this resource). The browser shows this url:</p>\n\n<pre><code>http://localhost:8080/products_display\n</code></pre>\n\n<p>This is the code of the handler (for the moment I just display a page to tell if the product was found or not).</p>\n\n<pre><code>class DisplayProduct(BaseHandler):\n    # Finds a product on exact Prod_ID property\n    def get(self):\n        user = usermgmt.get_user(self)\n        logout_url = users.create_logout_url(self.request.uri)\n        access = usermgmt.get_auth(\"Products\")  \n        client_name = usermgmt.get_client_subdomain()\n        search_key = self.request.get('find_id_txt')\n        find_query = models.Product.query(models.Product.prod_id == search_key, ancestor = get_products_key()).get()\n        # Check if query returned a value\n        if find_query:      \n            template_values = {\n                'client_name': client_name,              \n                'user': user,\n                'logout_url': logout_url,\n                'alert_message': \"Product1: \" + search_key + \" was found.\"\n            }\n            template = JINJA_ENVIRONMENT.get_template('alert-blue.html')\n            self.response.write(template.render(template_values))               \n        else:\n            template_values = {\n                'client_name': client_name,              \n                'user': user,\n                'logout_url': logout_url,\n                'alert_message': \"Product1: \" + search_key + \" could not be found.\"\n            }\n            template = JINJA_ENVIRONMENT.get_template('alert-yellow.html')\n            self.response.write(template.render(template_values))            \n</code></pre>\n\n<p>I tried all possible combinations of sending a get, then a post request and changing get for post on the handler. Each time I logged out of the browser or use another one and still I get the error.</p>\n\n<p>Here's the content of my app.yaml file:</p>\n\n<pre><code>#application: fpp-system\n#version: 1\nruntime: python27\napi_version: 1\nthreadsafe: true\n\nhandlers:\n\n- url: /categories.*\n  script: categories.application\n  login: required\n\n- url: /calendar.*\n  script: calendars.application\n  login: required\n\n- url: /images\n  static_dir: images\n\n- url: /products.*\n  script: products.application\n  login: required\n\n- url: /signin.*\n  script: signin.application\n\n- url: /stylesheets\n  static_dir: stylesheets\n\n- url: /test.*\n  script: test.application\n\n- url: /units.*\n  script: units.application\n  login: required \n\n- url: /.*\n  script: main.application\n\nlibraries:\n- name: webapp2\n  version: latest\n- name: jinja2\n  version: latest\n</code></pre>\n\n<p>The code is written using pydev on eclipse neon on Linux Ubuntu 16.04. Once it's debugged I can upload it to Google's cloud.</p>\n\n<p>Thanks in advance for any tips!</p>\n\n<p>ADDED AFTER 1ST COMMENTS:</p>\n\n<p>a) Copied indentation correctly: def get(self) and following are now indented correctly.</p>\n\n<p>b) Added contents of app.yaml</p>\n\n<p>c) The get function works well when I call it from an html page to find a product, here's the code snippet with the form to ask for required info:</p>\n\n<pre><code> &lt;form action=\"/products_display\" method=\"post\"&gt;\n   &lt;div&gt;&lt;input value=\"\" name=\"find_id_txt\" size=\"15\"&gt;&lt;/div&gt;\n   &lt;div&gt;&lt;input type=\"submit\" value=\"Find\"&gt;&lt;/div&gt;\n &lt;/form&gt;&lt;br&gt;\n</code></pre>\n\n<p>but it gives the 405 error when I call it programmatically with:</p>\n\n<pre><code>r = requests.post('products_display', data = {'find_id_txt':prod_id_txt})\n</code></pre>\n"}, {"tags": ["python", "flask", "request", "put", "flask-restful"], "comments": [{"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "edited": false, "score": 0, "creation_date": 1499298752, "post_id": 44936589, "comment_id": 76851758, "body": "The <code>400</code> response is because you are sending a payload with no <code>data</code> key. When you attempt to get it via <code>request.form[&#39;data&#39;]</code> I believe Flask-RESTful will automatically respond with that error since that key (<code>data</code>) does not exist in the payload."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499293732, "post_id": 44936791, "comment_id": 76850286, "body": "I tired that, in fact I even commented out the return line all together. I am still getting the same error. It seems like the problem is here put(&#39;<a href=\"http://localhost:5000/newcustomer\" rel=\"nofollow noreferrer\">localhost:5000/newcustomer</a>&#39;, data={&#39;data&#39;:data2}) I HAVE UPDATED THE CODE:"}, {"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "edited": false, "score": 0, "creation_date": 1499293924, "post_id": 44936791, "comment_id": 76850373, "body": "@eleazarolivera When you call <code>.json()</code> on the requests <code>Response</code> object, it attempts to convert <code>response.content</code> into JSON, which would fail if the response was not valid JSON. Your server is likely returning an error string, in a 500 response, due to the <code>put</code> method signature."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499294376, "post_id": 44936791, "comment_id": 76850542, "body": "the server is responding   500"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499294507, "post_id": 44936791, "comment_id": 76850584, "body": "&gt;&gt;&gt; put(&#39;<a href=\"http://localhost:5000/newcustomer\" rel=\"nofollow noreferrer\">localhost:5000/newcustomer</a>&#39;, data={&#39;data&#39;:data2}) returns : &lt;Response [500]&gt;  AND &gt;&gt;&gt; put(&#39;<a href=\"http://localhost:5000/newcustomer\" rel=\"nofollow noreferrer\">localhost:5000/newcustomer</a>&#39;, data={&#39;data&#39;:data2}).json()  returns:     return self.scan_once(s, idx=_w(s, idx).end()) simplejson.scanner.JSONDecodeError: Expecting value: line 1 column 1 (char 0) &gt;&gt;&gt;"}, {"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "edited": false, "score": 0, "creation_date": 1499294552, "post_id": 44936791, "comment_id": 76850597, "body": "@eleazarolivera See my updates about the <code>put</code> method on your <code>New_Customer</code> resource class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499298351, "post_id": 44936791, "comment_id": 76851659, "body": "I am getting the put command to work, I cannot seem to get the entire data2 to pass. It is printing CUSTTYPE which is one of my fields in the DB."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499299096, "post_id": 44936791, "comment_id": 76851827, "body": "Here is the api.py <code>class New_Customer(Resource): \tdef put(self): \t\tq = PHQuery() \t\tdata = request.form[&#39;data&#39;] \t\tprint(data) \t\treturn data</code>     and the request <code>print put(&#39;http:&#47;&#47;localhost:5000&#47;newcustomer&#39;, json=data2).json()</code> I know the syntax will not work untill i change for[&#39;data&#39;] to retrive the correct data2. I am not sure how to write it. ]"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499300926, "post_id": 44936791, "comment_id": 76852236, "body": "I have updated the question. I am going to look into post instead. I used put since i was just following the example. How would I write the method to retrive the data2 object ? once I can obtain this in the API, I know how to send it to my DB with my Query object. But I first want to at least print the data2 in the api.py server side file to know that it is being retrieved in here: <code>data = request.form[&#39;data&#39;]         print(data)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499301022, "post_id": 44936791, "comment_id": 76852262, "body": "There are many resources for Flask Restful, but they dont show the call that would be executed on the server sending the info."}, {"owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "edited": false, "score": 0, "creation_date": 1499365065, "post_id": 44936791, "comment_id": 76887963, "body": "@eleazarolivera I have updated the answer, it should be enough to get you going."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "edited": false, "score": 0, "creation_date": 1499375407, "post_id": 44936791, "comment_id": 76893174, "body": "Thank you. The data on the requesting server will be in a form, but it is good to be able to test it out this way initially."}], "tags": [], "owner": {"reputation": 2969, "user_id": 416500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56bb1302c2674f9c0ea2c3a1233e92?s=128&d=identicon&r=PG", "display_name": "foslock", "link": "https://stackoverflow.com/users/416500/foslock"}, "is_accepted": true, "score": 1, "last_activity_date": 1499364860, "last_edit_date": 1499364860, "creation_date": 1499292600, "answer_id": 44936791, "question_id": 44936589, "link": "https://stackoverflow.com/questions/44936589/flask-restful-api-not-able-to-add-using-put/44936791#44936791", "title": "FLASK Restful API not able to add using PUT", "body": "<h2>Returning JSON, not <code>str</code></h2>\n\n<p>It looks like your API routes are returning raw string casted versions of the resource objects. You instead want to return them as JSON, which flask can do for you with the <code>jsonify</code> method.</p>\n\n<pre><code>import flask\n\nclass New_Customer(Resource):\n    def put(self):\n        q = PHQuery()\n        data = request.get_json()\n        new_cust = q.create_cust(data)\n        return flask.jsonify(new_cust)\n</code></pre>\n\n<p>Notice how in Python, the string representation of a native dictionary is not exactly equivalent to the JSON version:</p>\n\n<pre><code>&gt;&gt;&gt; dct = {'Hey': 'some value'}\n&gt;&gt;&gt; print(dct)\n{'Hey': 'some value'}\n&gt;&gt;&gt; print(json.dumps(dct))\n{\"Hey\": \"some value\"}\n</code></pre>\n\n<h2>Sending JSON with <code>PUT/POST</code></h2>\n\n<p>When using the <code>requests</code> library to send a PUT/POST request, you are by default sending the body of the request in a form-encoded (<code>application/x-www-form-urlencoded</code> to be specific) format, <a href=\"https://stackoverflow.com/a/14551320/416500\">which is explained here</a>. This format is not great for nested structured data like what you are attempting to send. Instead, you can send the data JSON encoded (<code>application/json</code>) using the <code>json</code> keyword argument.</p>\n\n<pre><code>requests.put(url, json=data2)\n</code></pre>\n\n<p><strong>Side note</strong>: If you are attempting to create a new customer, you may want to use <strong>POST</strong> instead as it may be considered more RESTful, as <strong>PUT</strong>s are generally for <em>updating</em> an existing resource, <a href=\"http://www.restapitutorial.com/lessons/httpmethods.html\" rel=\"nofollow noreferrer\">but this is up to you</a>.</p>\n\n<h2>Pulling values from <code>PUT/POST</code> Data</h2>\n\n<p>Since we are sending the body of the request as JSON now, we need to deserialize it as such in the API server. You can see this happening above in the following line:</p>\n\n<pre><code>data = request.get_json()\n</code></pre>\n\n<p>You can refer to <a href=\"https://stackoverflow.com/a/16664376/416500\">this answer for more information</a> about properly pulling data out of a HTTP request in Flask.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8022517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3833, "favorite_count": 0, "accepted_answer_id": 44936791, "answer_count": 1, "score": 1, "last_activity_date": 1499364860, "creation_date": 1499291581, "last_edit_date": 1499300256, "question_id": 44936589, "link": "https://stackoverflow.com/questions/44936589/flask-restful-api-not-able-to-add-using-put", "title": "FLASK Restful API not able to add using PUT", "body": "<p>I am using this documentation: from FLASK Restful </p>\n\n<pre><code>from flask import Flask, request\nfrom flask_restful import Resource, Api\n\napp = Flask(__name__)\napi = Api(app)\n\ntodos = {}\n\nclass TodoSimple(Resource):\n    def get(self, todo_id):\n        return {todo_id: todos[todo_id]}\n\n    def put(self, todo_id):\n        todos[todo_id] = request.form['data']\n        return {todo_id: todos[todo_id]}\n\napi.add_resource(TodoSimple, '/&lt;string:todo_id&gt;')\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>In order to add\nthe new todo, they call the following command on python: </p>\n\n<pre><code>from requests import put, get\nput('http://localhost:5000/todo1', data={'data': 'Remember the milk'}).json()\n</code></pre>\n\n<p>The data comes from the json object  {'data': '.....}\nand it retrieved here: <code>request.form['data']</code></p>\n\n<p>I want to replace 'Remember the milk' with my data2 object:</p>\n\n<pre><code>data2 = {'ALTNUM':'noalt', 'CUSTTYPE': 'O',\n'LASTNAME':'lnamedata2', 'FIRSTNAME':'fndata2', 'ADDR':'1254 data 2 address',\n'ADDR2':'apt 3', 'CITY':'los angeles', \n'COUNTY':'011', 'STATE':'CA', \n'ZIPCODE':'90293', 'COUNTRY':'001', \n'ADDR_TYPE':'O','PHONE':'4254658029',\n'PHONE2':'3442567777', \n'EMAIL':'test2@test2.com'}\n</code></pre>\n\n<p>and call: <code>print put('http://localhost:5000/newcustomer', data={'data':data2}).json()</code></p>\n\n<p>MY API resource: </p>\n\n<pre><code>class New_Customer(Resource):\n    def put(self):\n        q = PHQuery()\n        data = request.form['data']\n        print(data)\n        return data\n</code></pre>\n\n<p>I get the following errors when calling these:</p>\n\n<pre><code>print put('http://localhost:5000/newcustomer', data=data2).json()\nprint put('http://localhost:5000/newcustomer', data={'data':data2}).json()\nprint put('http://localhost:5000/newcustomer', data=data2).json()\nprint put('http://localhost:5000/newcustomer', data=data2)\n\n\n\n{u'message': u'The browser (or proxy) sent a request that this server could not understand.'}\nCUSTTYPE\n{u'message': u'The browser (or proxy) sent a request that this server could not understand.'}\n&lt;Response [400]&gt;\n</code></pre>\n\n<p>What am I doing wrong?\n@foslock should it be data = request.json['data'] ? since it is an object and not form data?</p>\n"}, {"tags": ["python", "interface"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1499294378, "post_id": 44936578, "comment_id": 76850543, "body": "Maybe use sockets?? <a href=\"https://docs.python.org/3/library/ipc.html#interprocess-communication-and-networking\" rel=\"nofollow noreferrer\">docs.python.org/3/library/&hellip;</a>"}, {"owner": {"reputation": 378, "user_id": 8180138, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1c912c699a4cf0f6c21c58204c2b15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell Faas", "link": "https://stackoverflow.com/users/8180138/mitchell-faas"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1499295523, "post_id": 44936578, "comment_id": 76850909, "body": "Both programs run on the same machine, and the protocol is expected to talk over stdin/out, so that&#39;s almost certainly what the third party program does. Note that I&#39;m pretty new to programming and python in particular, so I may require a little more hand holding than usual when trying to explain things, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 8180138, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1c912c699a4cf0f6c21c58204c2b15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell Faas", "link": "https://stackoverflow.com/users/8180138/mitchell-faas"}, "edited": false, "score": 0, "creation_date": 1499297927, "post_id": 44937313, "comment_id": 76851560, "body": "I totally missed the =... (was looking at 3.4 instead) But it works great like this! I did have 2 questions though: you use line.strip() in the if statements, is that to increase readability, or does it have some more important use too? And you use elif statements as opposed to if statements. Now this may be a very theoretical question, but my reasoning for using if statements was that only one equality would have to be checked, as opposed to multiple; which would increase efficiency. Does this reasoning have any merit, or what benefits does elif have?"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "reply_to_user": {"reputation": 378, "user_id": 8180138, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1c912c699a4cf0f6c21c58204c2b15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell Faas", "link": "https://stackoverflow.com/users/8180138/mitchell-faas"}, "edited": false, "score": 0, "creation_date": 1499333903, "post_id": 44937313, "comment_id": 76865540, "body": "@MitchellFaas - <code>str.strip()</code> clears out the whitespace on both ends. However, if the caller sent a command like: <code>14 name\\n</code> (a perfectly valid command) it wouldn&#39;t work as it doesn&#39;t deal with the case when an ID is present - check the update above as an example on how to properly deal with the case described in the docs. As for the <code>if</code> statements, you got it the wrong way around - <code>elif&#47;else</code> statements evaluate only if the previous ones in the same chain didn&#39;t evaluate as <code>True</code>. Your approach would have all of them evaluate on each loop whether some of them evaluated as <code>True</code> or not."}, {"owner": {"reputation": 378, "user_id": 8180138, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1c912c699a4cf0f6c21c58204c2b15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell Faas", "link": "https://stackoverflow.com/users/8180138/mitchell-faas"}, "edited": false, "score": 0, "creation_date": 1499342339, "post_id": 44937313, "comment_id": 76871460, "body": "The code you&#39;ve written currently goes above my head. What my plan was is was to use a command parsing module (all the code can be found in the original post), and use a dictionary to recognise which command needs to be executed, then run that  function. Today I&#39;ll be working on getting arguments set up, which I&#39;ll be attempting to split out in pre-processing."}], "tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": true, "score": 1, "last_activity_date": 1499333533, "last_edit_date": 1499333533, "creation_date": 1499295783, "answer_id": 44937313, "question_id": 44936578, "link": "https://stackoverflow.com/questions/44936578/how-to-interface-a-python-program-with-a-third-party-program-over-a-known-protoc/44937313#44937313", "title": "How to interface a python program with a third party program over a known protocol?", "body": "<p>You're not flushing your response so nothing gets sent back to the caller (as the command is not big enough to trigger auto buffer flush). Also, strolling through the protocol document it clearly says that your response should be in the form of <code>= response\\n\\n</code> so even if you were flushing it probably still wouldn't work.</p>\n\n<p>Try with something like:</p>\n\n<pre><code>import sys\n\nfor line in sys.stdin:\n    if line.strip() == 'name':\n        sys.stdout.write('= Muizz-Bot\\n\\n')\n        sys.stdout.flush()\n    elif line.strip() == 'protocol_version':\n        sys.stdout.write('= 2\\n\\n')\n        sys.stdout.flush()\n    elif line.strip() == 'version':\n        sys.stdout.write('=\\n\\n')\n        sys.stdout.flush()\n</code></pre>\n\n<p>You might want to create a simple function for parsing commands / responding back instead of repeating the code, tho. Also, this probably won't (fully) work either as the protocol document states that you need to implement quite a number of commands (<code>6.1 Required Commands</code>) but it should get you started.</p>\n\n<p><strong>UPDATE</strong> - Here's one way to make it more manageable and in line with the specs - you can create a function for each command so you can easily add/remove them as you please, for example:</p>\n\n<pre><code>def cmd_name(*args):\n    return \"Muizz-Bot\"\n\ndef cmd_protocol_version(*args):\n    return 2\n\ndef cmd_version(*args):\n    return \"\"\n\ndef cmd_list_commands(*args):\n    return \" \".join(x[4:] for x in globals() if x[:4] == \"cmd_\")\n\ndef cmd_known_command(*args):\n    commands = {x[4:] for x in globals() if x[:4] == \"cmd_\"}\n    return \"true\" if args and args[0] in commands else \"false\"\n\n# etc.\n</code></pre>\n\n<p>Here all the command functions are prefixed with \"cmd_\" (and <code>cmd_list_commands()</code> and <code>cmd_known_command()</code> use that fact to check for the command functions in the global namespace) but you can also move them to a different module and then 'scan' the module instead. With such structure it's very easy to add a new command, for example to add the required <code>quit</code> command all you need is to define it:</p>\n\n<pre><code>def cmd_quit(*args):\n    raise EOFError()  # we'll use EOFError to denote an exit state bellow\n</code></pre>\n\n<p>Also, we'll deal bellow with the situation when a command needs to return an error - all you need to do from your functions is to <code>raise ValueError(\"error response\")</code> and it will be sent back as an error.</p>\n\n<p>Once you have your set of commands added as functions all you need is to parse the input command, call the right function with the right arguments and print back the response:</p>\n\n<pre><code>def call_command(command):\n    command = \"\".join(x for x in command if 31 &lt; ord(x) &lt; 127 or x == \"\\t\")  # 3.1.1\n    command = command.strip()  # 3.1.4\n    if not command:  # ... return if there's nothing to do\n        return\n    command = command.split()  # split to get the [id], cmd, [arg1, arg2, ...] structure\n    try:  # try to convert to int the first slice to check for command ID\n        command_id = int(command[0])\n        command_args = command[2:] if len(command) &gt; 2 else []  # args or an empty list\n        command = command[1]  # command name\n    except ValueError:  # failed, no command ID present\n        command_id = \"\"  # set it to blank\n        command_args = command[1:] if len(command) &gt; 1 else []  # args or an empty list\n        command = command[0]  # command name\n    # now, lets try to call our command as cmd_&lt;command name&gt; function and get its response\n    try:\n        response = globals()[\"cmd_\" + command](*command_args)\n        if response != \"\":  # response not empty, prepend it with space as per 3.4\n            response = \" {}\".format(response)\n        sys.stdout.write(\"={}{}\\n\\n\".format(command_id, response))\n    except KeyError:  # unknown command, return standard error as per 3.6\n        sys.stdout.write(\"?{} unknown command\\n\\n\".format(command_id))\n    except ValueError as e:  # the called function raised a ValueError\n        sys.stdout.write(\"?{} {}\\n\\n\".format(command_id, e))\n    except EOFError:  # a special case when we need to quit\n        sys.stdout.write(\"={}\\n\\n\".format(command_id))\n        sys.stdout.flush()\n        sys.exit(0)\n    sys.stdout.flush()  # flush the STDOUT\n</code></pre>\n\n<p>Finally, all you need is to listen to your STDIN and forward the command lines to this function to do the heavy lifting. In that regard, I'd actually explicitly read line-by-line from your STDIN rather than trying to iterate over it as it's a safer approach so:</p>\n\n<pre><code>if __name__ == \"__main__\":  # make sure we're executing instead of importing this script\n    while True:  # main loop\n        try:\n            line = sys.stdin.readline()  # read a line from STDIN\n            if not line:  # reached the end of STDIN\n                break  # exit the main loop\n            call_command(line)  # call our command\n        except Exception:  # too broad, but we don't care at this point as we're exiting\n            break  # exit the main loop\n</code></pre>\n\n<p>Of course, as I mentioned earlier, it might be a better idea to pack your commands in a separate module, but this should at least give you an idea how to do 'separation of concerns' so you worry about responding to your commands rather than on how they get called and how they respond back to the caller.</p>\n"}], "owner": {"reputation": 378, "user_id": 8180138, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1c912c699a4cf0f6c21c58204c2b15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell Faas", "link": "https://stackoverflow.com/users/8180138/mitchell-faas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44937313, "answer_count": 1, "score": 0, "last_activity_date": 1499339729, "creation_date": 1499291539, "last_edit_date": 1499339729, "question_id": 44936578, "link": "https://stackoverflow.com/questions/44936578/how-to-interface-a-python-program-with-a-third-party-program-over-a-known-protoc", "title": "How to interface a python program with a third party program over a known protocol?", "body": "<p>I'm trying to interface with a program (GoGui - <a href=\"https://sourceforge.net/projects/gogui/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/gogui/</a>) using the Go Text Protocol (GTP - <a href=\"http://www.lysator.liu.se/~gunnar/gtp/\" rel=\"nofollow noreferrer\">http://www.lysator.liu.se/~gunnar/gtp/</a>) which has its documentation <a href=\"http://www.lysator.liu.se/~gunnar/gtp/gtp2-spec-draft2.pdf\" rel=\"nofollow noreferrer\">here</a>. (Link can also be found on the previous website.)</p>\n\n<p>So I've written a bit of code to at least get GoGui to acknowledge the existence of my program:</p>\n\n<pre><code>import sys\nimport engine\nimport input_processing\n\nfor line in sys.stdin:\n    if line == 'name\\n':\n        sys.stdout.write(' Muizz-Bot\\n\\n')\n    if line == 'protocol_version\\n':\n        sys.stdout.write('2\\n\\n')\n    if line == 'version\\n':\n        sys.stdout.write('')\n</code></pre>\n\n<p>Now this doesn't seem unreasonable per se, but results in GoGui giving me the following error:\n<a href=\"https://i.stack.imgur.com/Jt1S0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jt1S0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Which is of course a problem. So I figured that I made a mistake somewhere in my programming, but when I simply run the program through visual studio, everything works as expected:\n<a href=\"https://i.stack.imgur.com/RN17i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RN17i.png\" alt=\"http://i.imgur.com/JjDWgVD.png\"></a></p>\n\n<p>This makes me think that the problem lies in interfacing the two applications, and maybe I should be looking at other functions than stdin and stdout. Does anyone know what may be going wrong here?</p>\n\n<p><strong>EDIT FOR COMMENTS:</strong> The code I'm currently working on for command parsing (in its entirety) looks like this: </p>\n\n<pre><code>import sys\n\ncommands = ['protocol_version', 'name', 'version', 'list_commands', 'known_command', 'quit', 'boardsize', \n            'clear_board', 'komi', 'play', 'genmove']\n\npre_game_out = ['2','Muizz-Bot','']\n\n# Define all output functions\ndef list_commands():\n    out = '\\n'.join(commands)\n    return(out)\ndef known():\n    return(True)\ndef quit():\n    return(None)\ndef boardsize():\n    return(None)\ndef clear_board():\n    return(None)\ndef komi():\n    return(None)\ndef play():\n    return(None)\ndef genmove():\n    return(\"A1\")\n\n# Create dictionary to point to all functions.\noutput = {'list_commands':list_commands, 'known_command':known, 'quit':quit, 'boardsize':boardsize, \n            'clear_board':clear_board, 'komi':komi, 'play':play, 'genmove':genmove}\n\n# Define the function that will pass the commands and write outputs.\ndef parse(line):\n    if line.strip() in commands:\n        i = commands.index(line.strip())\n        if i&lt;3:\n            sys.stdout.write('= '+ pre_game_out[i]+'\\n\\n')\n            sys.stdout.flush()\n        else:\n            sys.stdout.write('= ' + output[line.strip()]() + '\\n\\n')\n            sys.stdout.flush()\n</code></pre>\n\n<p>For pre processing:</p>\n\n<pre><code>def input(inp):\n    # Remove control characters\n    inp = inp.replace('\\r', '')\n    inp = inp.replace(' ', '')\n    inp = inp.split('#', 1)[0]\n    inp = inp.replace('\\t', ' ')\n\n    # Check if empty\n    if inp.isspace() or inp==None or inp=='':\n        return\n    else:\n        return(inp)\n</code></pre>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 1188938, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b62525c10b89fdf758d21b6e865e0a13?s=128&d=identicon&r=PG", "display_name": "Dilip", "link": "https://stackoverflow.com/users/1188938/dilip"}, "edited": false, "score": 0, "creation_date": 1546423623, "post_id": 44936982, "comment_id": 94845505, "body": "I&#39;m not able to do this with mysql. I can&#39;t find anywhere in the mysql documents about statement timeout."}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 1020, "user_id": 1188938, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b62525c10b89fdf758d21b6e865e0a13?s=128&d=identicon&r=PG", "display_name": "Dilip", "link": "https://stackoverflow.com/users/1188938/dilip"}, "edited": false, "score": 0, "creation_date": 1546490669, "post_id": 44936982, "comment_id": 94869635, "body": "@Dilip MySQL is much more limited in functionality, but the closest equivalent (that only works on read-only <code>SELECT</code> statements) is <a href=\"https://dev.mysql.com/doc/refman/5.7/en/optimizer-hints.html#optimizer-hints-execution-time\" rel=\"nofollow noreferrer\"><code>max_execution_time</code></a>."}], "tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": true, "score": 14, "last_activity_date": 1499293752, "creation_date": 1499293752, "answer_id": 44936982, "question_id": 44936527, "link": "https://stackoverflow.com/questions/44936527/configure-query-command-timeout-with-sqlalchemy-create-engine/44936982#44936982", "title": "Configure query/command timeout with sqlalchemy create_engine?", "body": "<p>You can set configuration values like <a href=\"https://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-STATEMENT-TIMEOUT\" rel=\"noreferrer\"><code>statement_timeout</code></a> via the <a href=\"https://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-CONNECT-OPTIONS\" rel=\"noreferrer\"><code>options</code> parameter in <code>libpq</code></a>. You can access this parameter in <code>psycopg2</code> as part of the <a href=\"http://initd.org/psycopg/docs/module.html#psycopg2.connect\" rel=\"noreferrer\"><code>connect</code></a> call. You can pass additional parameters to the <code>connect</code> call from SQLAlchemy via the <a href=\"http://docs.sqlalchemy.org/en/latest/core/engines.html#custom-dbapi-args\" rel=\"noreferrer\"><code>connect_args</code></a> parameter. So, putting it all together:</p>\n\n<pre><code>engine = create_engine(..., connect_args={\"options\": \"-c statement_timeout=1000\"})\n</code></pre>\n"}], "owner": {"reputation": 12790, "user_id": 1767106, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0065eca502a4a798607e38cefc1ca2ed?s=128&d=identicon&r=PG", "display_name": "clay", "link": "https://stackoverflow.com/users/1767106/clay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9282, "favorite_count": 3, "accepted_answer_id": 44936982, "answer_count": 1, "score": 7, "last_activity_date": 1568253227, "creation_date": 1499291283, "last_edit_date": 1568253227, "question_id": 44936527, "link": "https://stackoverflow.com/questions/44936527/configure-query-command-timeout-with-sqlalchemy-create-engine", "title": "Configure query/command timeout with sqlalchemy create_engine?", "body": "<p>The following Python code snippet illustrates the issue:</p>\n\n<pre><code>print(\"starting\")\n\n# I am trying to configure a query/command timeout of one second.\n# sqlalchemy docs suggest execution_options but the documented list of options doesn't include a timeout:\n# http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.Connection.execution_options\n# Below, I am guessing at several likely timeout parameter names:\ndb_engine = create_engine(\"postgresql://user:pass@server/catalog\",\n                          execution_options={\"timeout\": 1.0,\n                                             \"statement_timeout\": 1.0,\n                                             \"query_timeout\": 1.0,\n                                             \"execution_timeout\": 1.0})\n\nwith db_engine.connect() as db_connection:\n    print(\"got db_connection\")\n\n    # Artificially force a two second query time with pg_sleep.\n    # This is designed to guarantee timeout conditions and trigger an exception.\n    result_proxy = db_connection.execute(\"SELECT pg_sleep(2);\")\n\n    # If the timeout worked, this statement will not execute.\n    # Currently, it does execute, which means my timeout isn't working.\n    print(\"Query successfully complete. Got result_proxy\")\n</code></pre>\n"}, {"tags": ["python", "json", "webhooks", "jsonpath", "dialogflow-es"], "comments": [{"owner": {"reputation": 79883, "user_id": 205608, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/61eE0.png?s=128&g=1", "display_name": "O. Jones", "link": "https://stackoverflow.com/users/205608/o-jones"}, "edited": false, "score": 2, "creation_date": 1499291825, "post_id": 44936501, "comment_id": 76849528, "body": "Welcome to SO. You&#39;ll get better results here if you format your question more carefully than you did, and if you show some code examples. You can <a href=\"https://stackoverflow.com/posts/44936501/edit\">edit</a> your question."}, {"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1499293004, "post_id": 44936501, "comment_id": 76850004, "body": "Also, please read how to create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> and also check <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask Good Questions</a> so you increase your chances to get feedback and useful answers."}], "owner": {"reputation": 1, "user_id": 8261579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtL9m.jpg?s=128&g=1", "display_name": "Frank Didier", "link": "https://stackoverflow.com/users/8261579/frank-didier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1585158241, "creation_date": 1499291147, "last_edit_date": 1585158241, "question_id": 44936501, "link": "https://stackoverflow.com/questions/44936501/using-jsonpath-in-api-ai-in-case-we-have-already-our-json-file-to-query-in", "title": "Using jsonpath in api.ai in case we have already our json file to query in?", "body": "<pre><code>import json\n\n\ndef makeWebhookResult(req):\n    if req.get(\"result\").get(\"action\") != \"Phdapp\":\n        return {}\n    result = req.get(\"result\")\n    parameters = result.get(\"parameters\")\n\n    Progr = parameters.get(\"PhDsubjects\")\n    time = parameters.get(\"PhdTime\")\n    Levp = parameters.get(\"PhDDegLevp\")\n\n    with open('Sheet1.json') as f:\n        data = f.read()\n        jsondata = json.loads(data)\n\n\n\n\n    match = jsonpath.jsonpath(jsondata,\n                              '$.features[[?(@.ProgramName == Progr &amp;&amp; @.Level == Levp &amp;&amp; @.StartDate == time)]].UniversityName')\n\n\n    speech = \"This is the universities you were looking for \" + match\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nlvm4.jpg\" rel=\"nofollow noreferrer\">This is the part of my python code which have errors i can't figure it out, I have an intent with action which is \"Phdapp\" with three parameters that i need to use their values in my jsonpath querying from \"sheet1.json\" file in the same repository on GitHub in json format. But i can't get data from my intent neither accessing my son file for querying...is it because api.ai is not compatible with jsonpath or it is the problem of my code! or if there is a best to use which easier it can be my pleasure to know it. Thanks</a></p>\n"}, {"tags": ["python", "logging", "error-handling", "try-except"], "comments": [{"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 1, "creation_date": 1499291355, "post_id": 44936500, "comment_id": 76849346, "body": "can you paste at least the code which handle the exception ?"}, {"owner": {"reputation": 873, "user_id": 4509355, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31648f80ef66006febaecde7c76b7319?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Roy", "link": "https://stackoverflow.com/users/4509355/nishant-roy"}, "reply_to_user": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1499291500, "post_id": 44936500, "comment_id": 76849406, "body": "@PRMoureu updated."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499291713, "post_id": 44936500, "comment_id": 76849475, "body": "@NishantRoy Can you modify util&#39;s code?"}, {"owner": {"reputation": 873, "user_id": 4509355, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31648f80ef66006febaecde7c76b7319?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Roy", "link": "https://stackoverflow.com/users/4509355/nishant-roy"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499291829, "post_id": 44936500, "comment_id": 76849532, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 Yes I can. Would you advise removing the <code>try, except</code> from <code>util</code> and adding it to <code>main</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1499292300, "creation_date": 1499292300, "answer_id": 44936733, "question_id": 44936500, "link": "https://stackoverflow.com/questions/44936500/prevent-traceback-in-main/44936733#44936733", "title": "Prevent traceback in main", "body": "<p>This is a matter of design principle, but the general idea is to catch exceptions <em>only when you know what to do with it</em>. </p>\n\n<p>Swallowing exceptions is not a good idea, because it makes debugging that much harder. Especially when you have critical code written like this with multiple calling points. Exceptions as generated inside the function should be re-thrown/re-raised to be handled by the code that called that function.</p>\n\n<p>For example, you could consider modifying <code>utils.py</code> like this:</p>\n\n<pre><code>def get_token(token_name):\n    token_handler = Tokens(token_name)\n    try:\n        token = token_handler.get()\n    except TokenException  as e:\n        # write to some log file if needed\n        raise e\n\n    return token\n</code></pre>\n\n<p>Similarly, your <code>main.py</code> would look something like this:</p>\n\n<pre><code>try:\n    token = get_token(token_name)\nexcept TokenException:\n    ... # handle TokenException\nexcept Exception:\n    ... # handle any other Exception\n</code></pre>\n\n<p>This certainly makes for more robust code since you as the caller have control over the function you call.</p>\n"}], "owner": {"reputation": 873, "user_id": 4509355, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31648f80ef66006febaecde7c76b7319?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Roy", "link": "https://stackoverflow.com/users/4509355/nishant-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 44936733, "answer_count": 1, "score": 0, "last_activity_date": 1499292300, "creation_date": 1499291143, "last_edit_date": 1499291490, "question_id": 44936500, "link": "https://stackoverflow.com/questions/44936500/prevent-traceback-in-main", "title": "Prevent traceback in main", "body": "<p>In my <code>main.py</code> module, I call a function <code>myFunc()</code> from <code>util.py</code>. In <code>util.py</code>, I handle the exception that <code>myFunc()</code> may throw, and call <code>sys.exit(1)</code>. However, I still get a Traceback print in my <code>main.py</code> module. Is there a way to simply catch the exception in <code>util</code> and not have to deal with any output in <code>main</code>, or is it better for me to catch the exception in <code>main</code> rather than in <code>util</code> ?</p>\n\n<pre><code>def get_token(token_name):\n\n    token_handler = Tokens(token_name)\n    try:\n        token = token_handler.get()\n    except TokenException  as e:\n        logging.error(\"{error}\".format(error=e))\n        sys.exit(1)\n\n    return token\n</code></pre>\n"}, {"tags": ["python", "scipy", "scikit-learn", "sparse-matrix"], "answers": [{"comments": [{"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 0, "creation_date": 1499293930, "post_id": 44936719, "comment_id": 76850379, "body": "It&#39;s a shame, because most metrics (e.g. <code>cosine_similarity</code>) can be calculated rather efficiently on sparse matrices"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 0, "creation_date": 1499294347, "post_id": 44936719, "comment_id": 76850533, "body": "<code>sklearn</code> has a pairwise distance function that works with sparse."}, {"owner": {"reputation": 2012, "user_id": 7127519, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1slUcgYvfqQ/AAAAAAAAAAI/AAAAAAAABC0/_dYlpOFI_K4/photo.jpg?sz=128", "display_name": "Rafael Valero", "link": "https://stackoverflow.com/users/7127519/rafael-valero"}, "edited": false, "score": 0, "creation_date": 1532704012, "post_id": 44936719, "comment_id": 90088381, "body": "I believe @hpaulj refers to [sklearn.metrics.pairwise.euclidean_distances](<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.euclidean_distances.html#sklearn.metrics.pairwise.euclidean_distances\" rel=\"nofollow noreferrer\">scikit-learn.&zwnj;&#8203;org/stable/modules/g&zwnj;&#8203;enerated/&hellip;</a> ) as in  <a href=\"https://stackoverflow.com/a/8960292/7127519\">stackoverflow.com/a/8960292/7127519</a>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1499294386, "last_edit_date": 1499294386, "creation_date": 1499292251, "answer_id": 44936719, "question_id": 44936494, "link": "https://stackoverflow.com/questions/44936494/pairwise-distance-fails-on-a-sparse-matrix-with-an-uninformative-error-message/44936719#44936719", "title": "pairwise distance fails on a sparse matrix with an uninformative error message", "body": "<p><code>pdist</code> starts with:</p>\n\n<pre><code>def pdist(X, metric='euclidean', p=2, w=None, V=None, VI=None):\n    ....\n    X = np.asarray(X, order='c')\n\n    # The C code doesn't do striding.\n    X = _copy_array_if_base_present(X)\n\n    s = X.shape\n    if len(s) != 2:\n        raise ValueError('A 2-dimensional array must be passed.')\n</code></pre>\n\n<p>But if I make a <code>scipy.sparse</code> matrix, and apply <code>asarray</code> I don't get a 2d array:</p>\n\n<pre><code>In [258]: from scipy import sparse\nIn [259]: M = sparse.random(100,100, format='csr')\nIn [260]: M\nOut[260]: \n&lt;100x100 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 100 stored elements in Compressed Sparse Row format&gt;\nIn [263]: np.asarray(M)\nOut[263]: \narray(&lt;100x100 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 100 stored elements in Compressed Sparse Row format&gt;, dtype=object)\nIn [264]: _.shape\nOut[264]: ()\n</code></pre>\n\n<p><code>pdist</code> is not designed to accept a sparse matrix.  A sparse matrix is not a subclass of <code>ndarray</code>.  You have to make it dense first.</p>\n\n<pre><code>In [266]: np.asarray(M.toarray()).shape\nOut[266]: (100, 100)\n</code></pre>\n\n<p><a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html\" rel=\"nofollow noreferrer\">http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html</a></p>\n"}], "owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "accepted_answer_id": 44936719, "answer_count": 1, "score": 2, "last_activity_date": 1519406945, "creation_date": 1499291118, "last_edit_date": 1519406945, "question_id": 44936494, "link": "https://stackoverflow.com/questions/44936494/pairwise-distance-fails-on-a-sparse-matrix-with-an-uninformative-error-message", "title": "pairwise distance fails on a sparse matrix with an uninformative error message", "body": "<pre><code>from sklearn.feature_extraction.text import CountVectorizer, TfidfTransformer\nfrom scipy.spatial import distance\n\nX = CountVectorizer().fit_transform(docs)\nX = TfidfTransformer(use_idf=False).fit_transform(X)\nprint (X.shape) #prints (100, 1760)\n</code></pre>\n\n<p>However when I try to calculate the pair-distance I get this error:</p>\n\n<pre><code>distance.pdist(X, metric='cosine')\n</code></pre>\n\n<blockquote>\n  <p>ValueError: A 2-dimensional array must be passed.</p>\n</blockquote>\n\n<p>The shape indicates that X is a 2-dimensional array, what could be the issue ?</p>\n\n<p><strong>=====Update July 6th 2017======</strong></p>\n\n<p>This is a bug in scipy, sklearn has the correct implementation for sparse matrices.</p>\n\n<p>I have proposed a code-change to the scipy repository here:</p>\n\n<p><a href=\"https://github.com/scipy/scipy/pull/7566\" rel=\"nofollow noreferrer\">https://github.com/scipy/scipy/pull/7566</a></p>\n\n<p><strong>=====Update Feb 23rd 2018======</strong></p>\n\n<p>If you got here, you probably encountered that issue as well.</p>\n\n<p>It's been more than 8 months since a one-line fix I proposed was pushed to the scipy repository.</p>\n\n<p>Please comment <a href=\"https://github.com/scipy/scipy/pull/7566\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://github.com/scipy/scipy/issues/7565\" rel=\"nofollow noreferrer\">here</a>, to get some attention from the scipy maintainers.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "colors"], "answers": [{"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": true, "score": 0, "last_activity_date": 1499291864, "creation_date": 1499291864, "answer_id": 44936641, "question_id": 44936488, "link": "https://stackoverflow.com/questions/44936488/weird-colormap-when-map-the-scalar-value-to-rgb-using-matplotlib-colors-colormap/44936641#44936641", "title": "weird colormap when map the scalar value to RGB using matplotlib.colors.Colormap", "body": "<p>In your format function, you're left aligning, not right aligning, causing the weird value jumps.  See this line:</p>\n\n<pre><code>curr_cstr = '#{:0&lt;2}{:0&lt;2}{:0&lt;2}'.format(hex(r)[2:], hex(g)[2:], hex(b)[2:])\n</code></pre>\n\n<p>And the docs for <a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\"><code>format</code></a>.  Fixed version:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nplt.ioff()\n\ncmap = 'RdBu_r'\ncmap = plt.get_cmap(cmap)\n\nf = plt.figure(figsize=(8, 4))\nax1 = f.add_subplot(121)\nax2 = f.add_subplot(122)\nplot_arr = np.arange(100).reshape((10, 10)) / 99.\nax1.imshow(plot_arr, vmin=0., vmax=1., cmap=cmap, interpolation='nearest')\n\nfor i in range(10):\n    for j in range(10):\n        curr_rgb = cmap(plot_arr[i, j])[0:3]\n        curr_rgb = tuple([int(x * 255) for x in curr_rgb])\n        r, g, b = curr_rgb\n        curr_cstr = '#{:0&gt;2}{:0&gt;2}{:0&gt;2}'.format(hex(r)[2:], hex(g)[2:], hex(b)[2:])\n        ax2.plot(j, i, 'o', mfc=curr_cstr, lw=0, mec='none', ms=20)\n\nax2.set_xlim([-0.5, 9.5])\nax2.set_ylim([9.5, -0.5])\nplt.show()\n</code></pre>\n\n<p>Note the incorrect RGB to hex conversions in your original:</p>\n\n<pre><code>if i==9: print i ,j, curr_rgb, curr_cstr\n\n9 0 (170, 21, 41) #001500\n9 1 (161, 18, 40) #001200\n9 2 (155, 16, 39) #001000\n9 3 (147, 14, 38) #00e000\n9 4 (138, 11, 36) #00b000\n9 5 (132, 9, 35) #009000\n9 6 (123, 6, 34) #006000\n9 7 (117, 4, 33) #004000\n9 8 (108, 1, 31) #001000\n9 9 (103, 0, 31) #000000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8261601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35a4d1533aa9e3b0b6ca32aa3e1ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "Jun", "link": "https://stackoverflow.com/users/8261601/jun"}, "edited": false, "score": 0, "creation_date": 1499625954, "post_id": 44943864, "comment_id": 76973529, "body": "Thank you for providing this comment. It can simplify my code a lot!"}, {"owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "edited": false, "score": 0, "creation_date": 1499697060, "post_id": 44943864, "comment_id": 77003271, "body": "agreed, +1 from me!"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 1, "last_activity_date": 1499330510, "creation_date": 1499330510, "answer_id": 44943864, "question_id": 44936488, "link": "https://stackoverflow.com/questions/44936488/weird-colormap-when-map-the-scalar-value-to-rgb-using-matplotlib-colors-colormap/44943864#44943864", "title": "weird colormap when map the scalar value to RGB using matplotlib.colors.Colormap", "body": "<p>While the other answer explain well why the code from the question fails, I would like to note that there is no need to convert colors to hex at all and you may directly use the colormap to colorize the points in the plot.</p>\n\n<p>You may either decide to loop over the points and directly supply the applied colormap value to the <code>color</code> argument of the plot. (middle plot)</p>\n\n<p>Or you may use a scatter plot and supply the <code>plot_arr</code> to its <code>c</code> argument, together with the colormap, and, if needed, a normalization. (right plot)</p>\n\n<p><a href=\"https://i.stack.imgur.com/pWin0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pWin0.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ncmapname = 'RdBu_r'\ncmap = plt.get_cmap(cmapname)\n\nplot_arr = np.arange(100).reshape((10, 10)) / 99.\n\nfig, (ax1,ax2,ax3) = plt.subplots(ncols=3, figsize=(9, 3.5),subplot_kw={\"aspect\":\"equal\"})\n\nax1.set_title(\"image\")\nax1.imshow(plot_arr, vmin=0., vmax=1., cmap=cmap, interpolation='nearest')\n\nax2.set_title(\"plot in loop\")\nfor i in range(10):\n    for j in range(10):\n        ax2.plot(j, i, 'o', color=cmap(plot_arr[i, j]), lw=0, mec='none', ms=10)\n\nax2.set_ylim([9.5, -0.5])\n\nax3.set_title(\"scatter\")\nx = np.arange(0,10)\nX,Y = np.meshgrid(x,x)\nax3.scatter(X,Y,c=plot_arr, s=100, vmin=0., vmax=1., cmap='RdBu_r', edgecolors=\"none\")\nax3.set_ylim([9.5, -0.5])\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8261601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35a4d1533aa9e3b0b6ca32aa3e1ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "Jun", "link": "https://stackoverflow.com/users/8261601/jun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 44936641, "answer_count": 2, "score": 2, "last_activity_date": 1499330510, "creation_date": 1499291084, "question_id": 44936488, "link": "https://stackoverflow.com/questions/44936488/weird-colormap-when-map-the-scalar-value-to-rgb-using-matplotlib-colors-colormap", "title": "weird colormap when map the scalar value to RGB using matplotlib.colors.Colormap", "body": "<p>I am trying to get RGB hex strings from a input scalar given a specific matplot lib colormap. I use matplotlib.get_cmap() to get the matplotlib.colors.Colormap object, and pass a scalar withing range (0, 1) to this map to get the RGBA value then plot that color. But sometimes the colors gets plotted are different from those plotted by imshow(). Am I doing something stupid here?</p>\n\n<p><strong>Code for reproduction</strong></p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nplt.ioff()\n\ncmap = 'RdBu_r'\ncmap = plt.get_cmap(cmap)\n\nf = plt.figure(figsize=(8, 4))\nax1 = f.add_subplot(121)\nax2 = f.add_subplot(122)\nplot_arr = np.arange(100).reshape((10, 10)) / 99.\nax1.imshow(plot_arr, vmin=0., vmax=1., cmap=cmap, interpolation='nearest')\n\nfor i in range(10):\n    for j in range(10):\n        curr_rgb = cmap(plot_arr[i, j])[0:3]\n        curr_rgb = tuple([int(x * 255) for x in curr_rgb])\n        r, g, b = curr_rgb\n        curr_cstr = '#{:0&lt;2}{:0&lt;2}{:0&lt;2}'.format(hex(r)[2:], hex(g)[2:], hex(b)[2:])\n        ax2.plot(j, i, 'o', mfc=curr_cstr, lw=0, mec='none', ms=20)\n\nax2.set_xlim([-0.5, 9.5])\nax2.set_ylim([9.5, -0.5])\nplt.show()\n</code></pre>\n\n<p><strong>Actual outcome</strong><br>\n<a href=\"https://i.stack.imgur.com/k4QQc.png\" rel=\"nofollow noreferrer\">output image</a></p>\n\n<p><strong>Expected outcome</strong>\nAs implemented in the code, the left plot is plotted as imshow(). Right plot is plotted dots with the color from the colormap object according to the input scalar. If my understanding is right, the colors at the same grid cell should be identical. But clearly different at high and low values. </p>\n\n<p><strong>Matplotlib version</strong><br>\n    Operating System: windows 7 64-bit<br>\n    Matplotlib Version: 2.0.2<br>\n    Python Version: 3.5.3<br>\n    numpy: 1.13.0  </p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "owner": {"reputation": 758, "user_id": 4179714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1d073e3d0b8ec9746d876a0e091dc21?s=128&d=identicon&r=PG&f=1", "display_name": "PR102012", "link": "https://stackoverflow.com/users/4179714/pr102012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499290882, "creation_date": 1499290882, "question_id": 44936448, "link": "https://stackoverflow.com/questions/44936448/pyspark-1-5-and-sqoop-to-export-dataframe-to-sql-server", "title": "PySpark 1.5 and Sqoop to export dataframe to SQL Server", "body": "<p>I am using PySpark 1.5 via YARN (cloudera) to create a final dataframe called 'final_table'. I have successfully exported this 'final_table' dataframe to MySQL db instance on another server via the following command. </p>\n\n<pre><code>final_table.write.mode('append').jdbc(url=\"jdbc:mysql://112.54.158.32/sys_perf?user=userbob&amp;password=secrets\",table=\"tps\")\n</code></pre>\n\n<p>...by keeping the following commands in my .bashrc file on the Machine that I use to launch PySpark.</p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--conf spark.executor.extraClassPath=/var/lib/sqoop2/mysql-connector-java.jar --driver-class-path /var/lib/sqoop2/mysql-connector-java.jar --jars /var/lib/sqoop2/mysql-connector-java.jar --master yarn --deploy-mode client\"\n</code></pre>\n\n<p>However, I have not had success exporting to a SQL Server using the sql4jdbc.jar. So, I'd like to try Sqoop to export my Dataframe after I have saved it to HDFS (dir='/user/hdfs_dir1/'). I would like to just use Python subprocess to call the Sqoop command, much like I did in the bottom of my PySpark script to call this HDFS command. What would I need to pipe into the call, for sqoop? Is there anything else I need in my .bashrc, or when I launch PySpark? SEE below for example of how I used 'call' to use HDFS commands in PySpark.</p>\n\n<pre><code>from subprocess import call\ncmd = ['hdfs','dfs','-getmerge','/user/hdfs_dir1/','/home/local_node_dir/newcsv.csv']\ncall(cmd)\n</code></pre>\n"}, {"tags": ["javascript", "python", "python-3.x", "xmlhttprequest", "cgi"], "comments": [{"owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1499291029, "post_id": 44936414, "comment_id": 76849205, "body": "Try opening the file handler as a binary file. <code>fd = open(&#39;filename&#39;, &#39;wb&#39;)</code>"}, {"owner": {"reputation": 478, "user_id": 3408158, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pdoaZ.png?s=128&g=1", "display_name": "Joe Platano", "link": "https://stackoverflow.com/users/3408158/joe-platano"}, "reply_to_user": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1499291846, "post_id": 44936414, "comment_id": 76849538, "body": "@Dan does not make any difference. What do you expect with the file opening? Would i have the chance there to see the fieldStorage Object? Or I am totally misunderstand here?"}, {"owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1499293764, "post_id": 44936414, "comment_id": 76850303, "body": "After you call write you get this error: <code>TypeError: must be str, not bytes</code> So change the file handle to expect bytes."}, {"owner": {"reputation": 478, "user_id": 3408158, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pdoaZ.png?s=128&g=1", "display_name": "Joe Platano", "link": "https://stackoverflow.com/users/3408158/joe-platano"}, "reply_to_user": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1499377321, "post_id": 44936414, "comment_id": 76894048, "body": "thanks that worked"}], "owner": {"reputation": 478, "user_id": 3408158, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pdoaZ.png?s=128&g=1", "display_name": "Joe Platano", "link": "https://stackoverflow.com/users/3408158/joe-platano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499290737, "creation_date": 1499290737, "question_id": 44936414, "link": "https://stackoverflow.com/questions/44936414/xmlhttprequest-fileimage-upload-with-vanillia-javascript-to-python", "title": "XMLHttpRequest File(Image) Upload with Vanillia Javascript to Python", "body": "<p>I have a form in a HTML document with and input field for images. If a picture has been selected, it will be previewed and uploaded. Now i am kind of stupid for uploading the file and run into errors. The Webserver respond 500 Internal Server Error and in the logfile i have following error:</p>\n\n<pre><code>form = cgi.FieldStorage(), referer: referer: mysite.wft/test\nself.file.write(data), referer: mysite.wft/test\nTypeError: must be str, not bytes, referer: mysite.wft/test\nPremature end of script headers: ajcgi.py, referer: mysite.wft/test\n</code></pre>\n\n<p>Maybe someone can help me to see where my mistake is?\nThe HTML Form looks like this:  </p>\n\n<pre><code>&lt;form&gt;\n      &lt;input id=\"cam\" name=\"cam\" type=\"file\" accept=\"image/*\" onchange=\"myfunc()\"&gt;\n&lt;/form&gt;\n&lt;div id=\"preview\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The Javascript looks like this:</p>\n\n<pre><code>  function myfunc() {\n\n      var file = document.getElementById('cam').files[0];\n      var reader  = new FileReader();\n      reader.onload = function(e)  {\n          var image = document.createElement(\"img\");          \n          image.src = e.target.result;\n          document.getElementById('preview').appendChild(image);\n\n          var fxhr = new XMLHttpRequest();\n          fxhr.onreadystatechange = function() {\n              if (fxhr.readyState === 4 &amp;&amp; fxhr.status === 200) {\n\n                  console.log(fxhr.responseText); \n              } else if(fxhr.readyState == 4){\n\n            console.log(fxhr.responseText); \n              }\n          };         \n\n          fxhr.open(\"post\", \"mysite.wft/ajcgi.py\", true);\n\n          fxhr.setRequestHeader(\"Content-Type\", \"multipart/form-data\");\n          fxhr.setRequestHeader(\"X-File-Name\", file.name);\n          fxhr.setRequestHeader(\"X-File-Size\", file.size);\n          fxhr.setRequestHeader(\"X-File-Type\", file.type);\n\n          fxhr.send(e.target.result);                 \n       }\n\n       reader.readAsDataURL(file);\n\n   }\n</code></pre>\n\n<p>The Python 3.6 Formhandler should in the first step just return the fiedlstorage object. But just fails. The code looks like this:</p>\n\n<pre><code>#!/usr/bin/env python3\n# -*- coding: UTF-8 -*-    \nimport cgi\nimport os    \nimport sys     \nform = cgi.FieldStorage()\nprint('Content-Type: text/html')\nprint('')\nprint(form)\n</code></pre>\n\n<p>The idea is to store the file later in a database as BLOB but this is future at this time. At the moment i would be happy to UNDERSTAND where is my mistake and how i can write this correctly.</p>\n\n<p>Thanks</p>\n\n<p>By the way I just want to use plain JavaScript NO Jquery</p>\n"}, {"tags": ["python", "python-2.x"], "comments": [{"owner": {"reputation": 731, "user_id": 7521949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thsDQ.jpg?s=128&g=1", "display_name": "RompePC", "link": "https://stackoverflow.com/users/7521949/rompepc"}, "edited": false, "score": 0, "creation_date": 1499290797, "post_id": 44936398, "comment_id": 76849097, "body": "You never assign a value to <code>max</code>."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1499290849, "post_id": 44936398, "comment_id": 76849120, "body": "Why would you even compare numbers to <code>None</code> in the first place?"}, {"owner": {"reputation": 13431, "user_id": 7051394, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/035a36a4ffaec4c1c1efd85e34181ace?s=128&d=identicon&r=PG&f=1", "display_name": "Right leg", "link": "https://stackoverflow.com/users/7051394/right-leg"}, "edited": false, "score": 3, "creation_date": 1499291516, "post_id": 44936398, "comment_id": 76849410, "body": "By the way, by assigning values to <code>min</code>, <code>max</code> and <code>input</code>, you overwrite three builtin functions."}], "answers": [{"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499291069, "post_id": 44936437, "comment_id": 76849225, "body": "It should also be noted that both <code>min</code> and <code>max</code> are reserved names in Python, and should avoid being used as variable names."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499291453, "post_id": 44936437, "comment_id": 76849390, "body": "@ChristianDean: they are <b>not</b> reserved. There are built-in functions that are masked by using the names, but that&#39;s not disallowed."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499291883, "post_id": 44936437, "comment_id": 76849555, "body": "I know that. When I said &quot;reserved&quot;, I meant &quot;reserved&quot; as in <i>&quot;reserved for specific values&quot;</i>, not that it&#39;s disallowed to use them. But I agree, my wording was confusing. I&#39;ll use builtin instead."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499292012, "post_id": 44936437, "comment_id": 76849607, "body": "@ChristianDean: &#39;reserved&#39; is usually used for <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#keywords\" rel=\"nofollow noreferrer\">keywords</a>, of which there thankfully are not many."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 4, "last_activity_date": 1499290843, "creation_date": 1499290843, "answer_id": 44936437, "question_id": 44936398, "link": "https://stackoverflow.com/questions/44936398/conditional-wont-execute-properly/44936437#44936437", "title": "Conditional won&#39;t execute properly", "body": "<p><code>None &gt; number</code> is never true, because Python 2 sorts <code>None</code> before any other type. Don't compare numbers with <code>None</code>.</p>\n\n<p>Either test for <code>None</code> explicitly, or replace <code>None</code> with an infinity value.</p>\n\n<p>Testing for <code>None</code>:</p>\n\n<pre><code>if max is None or max &lt; input:\n    max = input\nelif min is None or min &gt; input:\n    min = input\n</code></pre>\n\n<p>Setting the values to positive or negative infinity:</p>\n\n<pre><code>min = float('inf')\nmax = float('-inf')\n</code></pre>\n\n<p>By setting <code>min</code> to positive infinity, <em>any other number</em> is guaranteed to be smaller; the same applies to <code>max</code> negative infinity.</p>\n"}, {"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 0, "last_activity_date": 1499290975, "creation_date": 1499290975, "answer_id": 44936462, "question_id": 44936398, "link": "https://stackoverflow.com/questions/44936398/conditional-wont-execute-properly/44936462#44936462", "title": "Conditional won&#39;t execute properly", "body": "<p>Your <code>min &gt; input</code> is always going to be false if <code>min</code> is <code>None</code>, hence why it never gets set.</p>\n\n<p>Also you don't want the <code>elif</code>.  The first number is both the min and the max.</p>\n\n<p>Fixed:</p>\n\n<pre><code>min = None\nmax = None\nwhile True:\n    input = raw_input(\"Please enter number: \")\n    if input == \"done\":\n        break\n    else:\n        try:\n            input = float(input)\n        except:\n            continue\n\n\n\n    if max is None or max &lt; input:\n        max = input\n    if min is None or min &gt; input:\n        min = input\n\n    print min\n    print max\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 31, "user_id": 8261614, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uB0p_el0aBs/AAAAAAAAAAI/AAAAAAAAAB0/2Xy0ZG27yfQ/photo.jpg?sz=128", "display_name": "Chrysoula Kaloumenou", "link": "https://stackoverflow.com/users/8261614/chrysoula-kaloumenou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499291471, "creation_date": 1499290647, "last_edit_date": 1499291471, "question_id": 44936398, "link": "https://stackoverflow.com/questions/44936398/conditional-wont-execute-properly", "title": "Conditional won&#39;t execute properly", "body": "<p>I wonder if you could help me with the code below:</p>\n\n<pre><code>min = None\nmax = None\nwhile True:\n    input = raw_input(\"Please enter number: \")\n    if input == \"done\":\n        break\n    else:\n        try:\n            input = float(input)\n        except:\n            continue\n\n\n\n    if max &lt; input:\n        max = input\n    elif min &gt; input:\n        min = input\n\n    print min\n    print max\n</code></pre>\n\n<p>It looks right to me, but the elif statement which gives a value to min always prints <code>None</code>. Could you please explain why?</p>\n"}, {"tags": ["python", "django", "backend"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1499290733, "post_id": 44936351, "comment_id": 76849071, "body": "<i>What</i> keeps returning 404? What url are you going to?"}, {"owner": {"reputation": 2793, "user_id": 1293222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PrtZW.jpg?s=128&g=1", "display_name": "Withnail", "link": "https://stackoverflow.com/users/1293222/withnail"}, "edited": false, "score": 0, "creation_date": 1499290863, "post_id": 44936351, "comment_id": 76849130, "body": "Are you going to <code>&#47;hello</code> or to <code>&#47;hello&#47;</code>? - it can be important depending on whether the <code>APPEND_SLASH</code> settings is on - it <a href=\"https://docs.djangoproject.com/en/1.11/ref/settings/#append-slash\" rel=\"nofollow noreferrer\">should be on by default</a> but if you&#39;re working through another resource, it may have done something different. Can you post your settings.py file (minus the secret key)?"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1499291263, "creation_date": 1499291263, "answer_id": 44936522, "question_id": 44936351, "link": "https://stackoverflow.com/questions/44936351/cant-get-url-request-to-show-404/44936522#44936522", "title": "Can&#39;t get url request to show, 404", "body": "<p>You need to change the URL's in two places. One in your app like you did, and the other in the django directory. <a href=\"http://dfpp.readthedocs.io/en/latest/chapter_01.html#writing-the-code\" rel=\"nofollow noreferrer\">This link</a> has more information on how to do it.</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\n\nurlpatterns = patterns(\n    '',\n\n    url(r'', include('hello.urls')),\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 8161306, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/379ee0f785024f402f1ee5f20311a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Fullmetal7777", "link": "https://stackoverflow.com/users/8161306/fullmetal7777"}, "is_accepted": false, "score": -1, "last_activity_date": 1499291946, "creation_date": 1499291946, "answer_id": 44936658, "question_id": 44936351, "link": "https://stackoverflow.com/questions/44936351/cant-get-url-request-to-show-404/44936658#44936658", "title": "Can&#39;t get url request to show, 404", "body": "<p>It was at <a href=\"http://127.0.0.1:8000/hello/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/hello/</a>, also used HunkDivine's answer as another option</p>\n"}], "owner": {"reputation": 35, "user_id": 8161306, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/379ee0f785024f402f1ee5f20311a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Fullmetal7777", "link": "https://stackoverflow.com/users/8161306/fullmetal7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499291946, "creation_date": 1499290415, "question_id": 44936351, "link": "https://stackoverflow.com/questions/44936351/cant-get-url-request-to-show-404", "title": "Can&#39;t get url request to show, 404", "body": "<p>I'm completely new to backend, working through the djangobook tutorial. If I'm missing any vital information, let me know. The first task is to get 'Hello World' to show up on your development server, and it keeps returning 404. The two files in question being the views.py (my hello world file) and urls.py</p>\n\n<p>this is the views.py:</p>\n\n<pre><code>from django.http import HttpResponse\n\ndef hello(request):\n    return HttpResponse(\"Hello world\")\n</code></pre>\n\n<p>this is the urls.py:</p>\n\n<pre><code>from django.conf.urls import url\nfrom django.contrib import admin\n\nfrom mysite.views import hello\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^hello/$', hello),\n]\n</code></pre>\n\n<p>I feel like its not finding the views file correctly? This is how there set up, exactly as he said to do it in the tutorial </p>\n"}, {"tags": ["python", "plotly", "bokeh", "freeze"], "comments": [{"owner": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499290357, "post_id": 44936312, "comment_id": 76848911, "body": "Plotly will work offline, but it generates an html/js document or a &lt;div&gt; element."}, {"owner": {"reputation": 113, "user_id": 8238288, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cee1810c3a16c5bd049e97f6c953a242?s=128&d=identicon&r=PG&f=1", "display_name": "Markus T.", "link": "https://stackoverflow.com/users/8238288/markus-t"}, "reply_to_user": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499347564, "post_id": 44936312, "comment_id": 76875490, "body": "Is it possible to package html/js into an executable and pack it on my GUI window? Sorry not familiar with html enough."}, {"owner": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499366527, "post_id": 44936312, "comment_id": 76888752, "body": "There are some modules out there that will wrap the html/js into a tkinter element for you"}], "answers": [{"tags": [], "owner": {"reputation": 1553, "user_id": 5010285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8FDWV0L2JMA/AAAAAAAAAAI/AAAAAAAABW0/9mt8ZzSWOmQ/photo.jpg?sz=128", "display_name": "Petronella", "link": "https://stackoverflow.com/users/5010285/petronella"}, "is_accepted": false, "score": 0, "last_activity_date": 1510578643, "creation_date": 1510578643, "answer_id": 47265136, "question_id": 44936312, "link": "https://stackoverflow.com/questions/44936312/will-bokeh-or-plotly-libraries-work-offline-in-a-executable-desktop-application/47265136#47265136", "title": "Will bokeh or plotly libraries work offline in a executable desktop application?", "body": "<p>you can use for sure plotly offline:\ne.g.:</p>\n\n<pre><code>import plotly\nfrom plotly.graph_objs import Scatter, Layout\n\nprint(help(plotly.offline.plot))\n\nplotly.offline.plot([Scatter(x=[1, 2, 3], y=[3, 2, 6])], filename='my-\ngraph.html')\n</code></pre>\n\n<p>then save the plot in a html file and use this file in PyQt:\n<a href=\"https://stackoverflow.com/questions/33697952/how-do-i-rerender-html-pyqt4\">How do I rerender HTML PyQt4</a></p>\n"}], "owner": {"reputation": 113, "user_id": 8238288, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cee1810c3a16c5bd049e97f6c953a242?s=128&d=identicon&r=PG&f=1", "display_name": "Markus T.", "link": "https://stackoverflow.com/users/8238288/markus-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510578643, "creation_date": 1499290223, "question_id": 44936312, "link": "https://stackoverflow.com/questions/44936312/will-bokeh-or-plotly-libraries-work-offline-in-a-executable-desktop-application", "title": "Will bokeh or plotly libraries work offline in a executable desktop application?", "body": "<p>I'm trying to create an executable in python using either pyqt4 or tkinter and I want my GUI to be able to be interactive. I found bokeh and it seems like it can do everything I want.</p>\n\n<p>However I was reading into bokeh and it seems that its main purpose is to make figures for embedding online using html. I'm not really familiar with html and I want my GUI to be able to pull up all the graphical data within my UI window rather than open an external link. </p>\n\n<p>Is there a way to freeze my python scripts that utilize bokeh or plotly for a desktop application without embedding them online or using html?</p>\n"}, {"tags": ["python", "https", "request"], "comments": [{"owner": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499290301, "post_id": 44936252, "comment_id": 76848889, "body": "<a href=\"http://docs.python-requests.org/en/master/user/advanced/#client-side-certificates\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master/user/advanced/&hellip;</a> Looks like requests doesn&#39;t think your cert is complete. Is it encrypted? Is it both the public and private keys? It may not like having just 1 path in a 1-tuple."}, {"owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "reply_to_user": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499290495, "post_id": 44936252, "comment_id": 76848973, "body": "<a href=\"https://stackoverflow.com/questions/32884500/ssl-with-self-signed-certificate-using-python\" title=\"ssl with self signed certificate using python\">stackoverflow.com/questions/32884500/&hellip;</a> i found this and i don&#39;t think it has all the parts it needs :( since the cert is only .cer and not pem, i assume the pem has more information in it"}, {"owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "reply_to_user": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499290532, "post_id": 44936252, "comment_id": 76848985, "body": "i am not sure what my path would be &#39;/path/client.key&#39; if im on windows"}, {"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499290603, "post_id": 44936252, "comment_id": 76849004, "body": "from the documentation, it looks like the tuple requires the cert and the key.  requests.get(&#39;<a href=\"https://kennethreitz.org\" rel=\"nofollow noreferrer\">kennethreitz.org</a>&#39;, cert=(&#39;/path/client.cert&#39;, &#39;/path/client.key&#39;))"}, {"owner": {"reputation": 695, "user_id": 1184062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba9537d1878174fd04765f2ec77a739b?s=128&d=identicon&r=PG&f=1", "display_name": "ZuluDeltaNiner", "link": "https://stackoverflow.com/users/1184062/zuludeltaniner"}, "edited": false, "score": 0, "creation_date": 1499290631, "post_id": 44936252, "comment_id": 76849022, "body": "the key file should be the one used to generate the cer file."}, {"owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "reply_to_user": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499291398, "post_id": 44936252, "comment_id": 76849360, "body": "@HunkDivine how do i do that in dinwos? it specifically says that in the documentation..."}], "owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499289875, "creation_date": 1499289875, "question_id": 44936252, "link": "https://stackoverflow.com/questions/44936252/how-can-i-reference-a-cert-in-my-python-2-7-script", "title": "How can i reference a cert in my python 2.7 script?", "body": "<p>I am trying to connect to my symantec antivirus, using a post request, but python is throwing an errorw</p>\n\n<pre><code>import requests, json\nimport certifi, urllib3, httplib\n\n## Setup username/password ##\n\ndata = {'username': 'username',\n        'password': 'password',\n        'domain': ''}\n\nurl = 'https://myurlthatuseshttps'\n\nheaders = {'Content-Type: application/json'}\n\nr = requests.post(url, cert=('C:\\SymantecScriptPython\\PythonApplication1\\PythonApplication1\\symantec1.cer'))\n\n\nprint(r.status_code)\n\n\n\nconn.close()\n</code></pre>\n\n<p>Error: [SSL] PEM lib (_ssl.c:2600)</p>\n\n<p>I am not sure what to do at this point, unless i should use a cert that ends in .pem</p>\n"}, {"tags": ["python", "matplotlib", "fonts", "size", "font-size"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 3376325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad211b40b21b114f09b5efb1c05f30?s=128&d=identicon&r=PG&f=1", "display_name": "W. Alpha", "link": "https://stackoverflow.com/users/3376325/w-alpha"}, "edited": false, "score": 0, "creation_date": 1499318599, "post_id": 44936881, "comment_id": 76856597, "body": "Thanks! That works as it should and I also appreciate your comment regarding the imports."}, {"owner": {"reputation": 167, "user_id": 3376325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad211b40b21b114f09b5efb1c05f30?s=128&d=identicon&r=PG&f=1", "display_name": "W. Alpha", "link": "https://stackoverflow.com/users/3376325/w-alpha"}, "edited": false, "score": 1, "creation_date": 1499323738, "post_id": 44936881, "comment_id": 76858996, "body": "I improved the solution a little bit by also increasing the font size for the legend: <code>for text in ax.get_legend().get_texts():                 text.set_fontsize(_displayFontSize)</code>"}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 0, "last_activity_date": 1499293142, "creation_date": 1499293142, "answer_id": 44936881, "question_id": 44936249, "link": "https://stackoverflow.com/questions/44936249/different-plot-size-for-plt-show-and-fig-savefig/44936881#44936881", "title": "Different plot size for plt.show() and fig.savefig()", "body": "<p>Tangential note: you shouldn't <code>from pylab import *</code>, that will clutter your namespace with all sorts of needless things:</p>\n\n<pre><code>&gt;&gt;&gt; len(globals())\n6\n&gt;&gt;&gt; from pylab import *\n&gt;&gt;&gt; len(globals())\n988\n</code></pre>\n\n<p>As you noticed, I don't think that setting any of the <code>rc</code> parameters affects <em>existing</em> plots. You might have to get your hands dirty, although only a bit: there is only a handful of children of your <code>Axes</code> that you need to modify:</p>\n\n<pre><code>import matplotlib as mpl\nimport matplotlib.pyplot as plt # &lt;-- all you need here\n\nparams = {\n    'text.usetex': True,\n    'font.size': 6,\n}\nmpl.rcParams.update(params)\n\nfig = plt.figure(figsize=(3,2))\nax = fig.add_subplot(111)\n\nx = [1, 2, 3]\ny = [2, 2, 2]\n\nax.plot(x,y, label='label')\n\nplt.tight_layout()\nfig.savefig('plot.pdf')\n\nfig.set_size_inches(10, 8, forward=True)\n# v--- change title and axeslabel font sizes manually\nfor item in ([ax.title, ax.xaxis.label, ax.yaxis.label] +\n             ax.get_xticklabels() + ax.get_yticklabels()):\n    item.set_fontsize(20)\nplt.show()\n</code></pre>\n\n<p>Saved (left) and shown (right) version:</p>\n\n<p><a href=\"https://i.stack.imgur.com/D37nF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D37nF.png\" alt=\"saved version\"></a> <a href=\"https://i.stack.imgur.com/C51DN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C51DNm.png\" alt=\"shown version\"></a></p>\n\n<p>Arguably, it might be more elegant (or a different kind of messy) to just close your saved plots, modify your <code>rcParams</code>, and redraw the versions you want to <code>show</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1499332829, "last_edit_date": 1499332829, "creation_date": 1499324639, "answer_id": 44941906, "question_id": 44936249, "link": "https://stackoverflow.com/questions/44936249/different-plot-size-for-plt-show-and-fig-savefig/44941906#44941906", "title": "Different plot size for plt.show() and fig.savefig()", "body": "<p>I think you don't want to change anything in the plot if showing it on a larger scale is for debugging or magnifying reasons. That's why you may not want to change any of the rc paramters, nor would you want to change the figure size. </p>\n\n<p>Instead you'd just prepare the figure the way it should be saved for your publication and after saving, <strong>change its dpi</strong> (dots per inch), <code>fig.set_dpi(xxx)</code>. </p>\n\n<pre><code>import matplotlib as mpl\nimport matplotlib.pyplot as plt\n\nparams = {\n    'text.usetex': True,\n    'font.size': 6,\n}\nplt.rcParams.update(params)\n\nfig = plt.figure(figsize=(3,2))\nax = fig.add_subplot(111)\n\nx = [1, 2, 3]\ny = [2, 2, 2]\n\nax.plot(x,y, label='label')\nplt.legend()\nplt.tight_layout()\nfig.savefig('plot.pdf')\n\nfig.set_dpi(300)\n\nplt.show()\n</code></pre>\n\n<p>saved figure:<br>\n<a href=\"https://i.stack.imgur.com/8SrEo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8SrEo.png\" alt=\"enter image description here\"></a></p>\n\n<p>shown figure (with 300 dpi):</p>\n\n<p><a href=\"https://i.stack.imgur.com/JdqV1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JdqV1.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 167, "user_id": 3376325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad211b40b21b114f09b5efb1c05f30?s=128&d=identicon&r=PG&f=1", "display_name": "W. Alpha", "link": "https://stackoverflow.com/users/3376325/w-alpha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2742, "favorite_count": 0, "accepted_answer_id": 44936881, "answer_count": 2, "score": 2, "last_activity_date": 1499332829, "creation_date": 1499289848, "last_edit_date": 1499293226, "question_id": 44936249, "link": "https://stackoverflow.com/questions/44936249/different-plot-size-for-plt-show-and-fig-savefig", "title": "Different plot size for plt.show() and fig.savefig()", "body": "<p>I have to create some plots that I want to integrate into a scientific document. Due to space limitations the size of the plot as well as the font size is rather small.\nFor debugging/convenience reasons it would be nice to interactively show the plot using <code>plt.show()</code> with a larger size for the plot and fonts, before storing it as a PDF file using <code>fig.savefig(...)</code> with smaller sizes.</p>\n\n<p>I achieved to set a different plot size before displaying it. However, I was not able to update the font size. Any ideas how this would be possible?</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport matplotlib as mpl\nfrom pylab import *\n\nparams = {\n    'text.usetex': True,\n    'font.size': 6,\n}\nmpl.rcParams.update(params)\n\nfig = plt.figure(figsize=(3,2))\nax = fig.add_subplot(111)\n\nx = [1, 2, 3]\ny = [2, 2, 2]\n\nax.plot(x,y, label='label')\n\nplt.tight_layout()\nfig.savefig('plot.pdf')\n\nfig.set_size_inches(10, 8, forward=True)\nparams = {'font.size': 20}\nmpl.rcParams.update(params)\nplt.show()\n</code></pre>\n\n<p>I am using Matplotlib 2.0.2, but also tried 1.5.3.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt4", "pyqt5"], "comments": [{"owner": {"reputation": 154, "user_id": 5800420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcf2af0299eaa2e1c758955e0c613c?s=128&d=identicon&r=PG&f=1", "display_name": "MOVZBL", "link": "https://stackoverflow.com/users/5800420/movzbl"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1499290874, "post_id": 44936202, "comment_id": 76849137, "body": "@eyllanesc It&#39;s pretty long and is loaded from some .ui file. If it is really needed I can share it using gist."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1560402873, "last_edit_date": 1560402873, "creation_date": 1499290768, "answer_id": 44936420, "question_id": 44936202, "link": "https://stackoverflow.com/questions/44936202/to-pyqt5-connect-conversion/44936420#44936420", "title": "To PyQt5 &#39;connect&#39; conversion", "body": "<p>The new connection style is as follows:</p>\n\n<pre><code>sender.signal.connect(slot)\n</code></pre>\n\n<p>In your case change:</p>\n\n<pre><code>self.connect(btnlist[i], QtCore.SIGNAL(\"clicked()\"), sigmap, QtCore.SLOT(\"map()\"))\n\nself.connect(sigmap, QtCore.SIGNAL(\"mapped(int)\"), self.paint.handleScaleBtn)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>btnlist[i].clicked.connect(sigmap.map)\n\nsigmap.mapped.connect(self.paint.handleScaleBtn)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 5394184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YVb3yKsmTrE/AAAAAAAAAAI/AAAAAAAAVGk/gQMLxbMCz8k/photo.jpg?sz=128", "display_name": "Esteban Martinena Guerrero", "link": "https://stackoverflow.com/users/5394184/esteban-martinena-guerrero"}, "is_accepted": false, "score": 2, "last_activity_date": 1499304549, "creation_date": 1499304549, "answer_id": 44938397, "question_id": 44936202, "link": "https://stackoverflow.com/questions/44936202/to-pyqt5-connect-conversion/44938397#44938397", "title": "To PyQt5 &#39;connect&#39; conversion", "body": "<p>Here you have all the information needed for the new signal slot style: <a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html\" rel=\"nofollow noreferrer\">pyqt new-style signal/slots</a>\nTry and if you have any particular problem let me know. </p>\n"}], "owner": {"reputation": 154, "user_id": 5800420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcf2af0299eaa2e1c758955e0c613c?s=128&d=identicon&r=PG&f=1", "display_name": "MOVZBL", "link": "https://stackoverflow.com/users/5800420/movzbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 1, "accepted_answer_id": 44936420, "answer_count": 2, "score": 3, "last_activity_date": 1560402873, "creation_date": 1499289671, "last_edit_date": 1499291055, "question_id": 44936202, "link": "https://stackoverflow.com/questions/44936202/to-pyqt5-connect-conversion", "title": "To PyQt5 &#39;connect&#39; conversion", "body": "<p>I try to make a conversion of some code from PyQt4 to PyQt5, however I have not ever worked with PyQt, that is why I have some problems with this. I failed to convert some code with .connect, because as I understand in PyQt5 work with signals and slots changed. Here is the code.</p>\n\n<pre><code>class Gui(QWidget.QMainWindow, Ui_MainWindow):\n\n    def __init__(self, cfgpath):\n        QWidget.QMainWindow.__init__(self)\n        Ui_MainWindow.__init__(self)\n\n        self.configpath = cfgpath\n        self.paint = Viewer(self)\n        self.setupUi(self)\n\n        self.loadButton.clicked.connect(self.loadImage)\n        self.maskClearButton.clicked.connect(self.paint.clearMask)\n        self.brushSizeSB.valueChanged.connect(self.brushSizeChange)\n        btnlist = [self.horDownBtn, self.horDownLargeBtn, self.horUpBtn, self.horUpLargeBtn,\n                   self.vertDownBtn, self.vertDownLargeBtn, self.vertUpBtn, self.vertUpLargeBtn]\n        sigmap = QtCore.QSignalMapper(self)\n        for i in range(len(btnlist)):\n            # Here it falls\n            self.connect(btnlist[i], QtCore.SIGNAL(\"clicked()\"), sigmap, QtCore.SLOT(\"map()\"))\n            btnlist[i].clicked\n            sigmap.setMapping(btnlist[i], i)\n        # And here\n        self.connect(sigmap, QtCore.SIGNAL(\"mapped(int)\"), self.paint.handleScaleBtn)\n</code></pre>\n\n<p>So how can I change this code to make it work?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 6, "last_activity_date": 1499294354, "creation_date": 1499294354, "answer_id": 44937106, "question_id": 44936162, "link": "https://stackoverflow.com/questions/44936162/incorrect-usage-of-hyperopt-with-tensorflow/44937106#44937106", "title": "Incorrect: usage of hyperopt with tensorflow", "body": "<p>This problem is most likely arising because each call to <code>build_and_optimize()</code> is adding nodes to the same TensorFlow graph, and the <code>tf.train.AdamOptimizer</code> is attempting to optimize variables from <strong>all of the previous graphs</strong> in addition to the current graph. To work around this problem, modify <code>build_and_optimize()</code> so that it runs <code>main()</code> in a different TensorFlow graph, using the following change:</p>\n\n<pre><code>def build_and_optimize(hp_space):\n    global Flags2\n    Flags2 = {}\n    Flags2['dp'] = hp_space['dropout_global']\n    Flags2['wd'] = hp_space['wd']\n\n    # Create a new, empty graph for each trial to avoid interference from\n    # previous trials.\n    with tf.Graph().as_default():\n        res = main(Flags2)\n\n    results = {\n        'loss': res,\n        'status': STATUS_OK\n    }\n    return results\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 8078446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c0f966870f73d9c9e241673aead6a4b8?s=128&d=identicon&r=PG&f=1", "display_name": "Su JK", "link": "https://stackoverflow.com/users/8078446/su-jk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "accepted_answer_id": 44937106, "answer_count": 1, "score": 2, "last_activity_date": 1524526126, "creation_date": 1499289505, "last_edit_date": 1524526126, "question_id": 44936162, "link": "https://stackoverflow.com/questions/44936162/incorrect-usage-of-hyperopt-with-tensorflow", "title": "Incorrect: usage of hyperopt with tensorflow", "body": "<p>In the following code, I have modified the Deep MNIST example from the tensorflow tutorials (official). </p>\n\n<p>Modifications -- Added weight decay into the loss function and also modifying the weights as well. (If its incorrect please do let me know).</p>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport argparse\nimport sys\n\nfrom tensorflow.examples.tutorials.mnist import input_data\n\nimport tensorflow as tf\n\nfrom hyperopt import STATUS_OK, STATUS_FAIL\n\nFlags2=None\n\ndef build_and_optimize(hp_space):\n    global Flags2\n    Flags2 = {}\n    Flags2['dp'] = hp_space['dropout_global']\n    Flags2['wd'] = hp_space['wd']\n\n    res = main(Flags2)\n\n    results = {\n        'loss': res,\n        'status': STATUS_OK\n    }\n    return results\n\ndef deepnn(x):\n    \"\"\"deepnn builds the graph for a deep net for classifying digits.\n        args:\n            x: an input tensor with the dimensions (N_examples, 784), where 784 is the number of piexs in a standard MNIST image.\n\n        returns:\n            a tuple (y, keep_prob). y is a tensor of shape (N_examples, 10), with values equal to the logits of classifying the digit into one of classes (the digits 0-9). keep_prob is a scalar placeholder for the probability of dropout.\n    \"\"\"\n\n    # reshape to use within a convolutional neural net\n    # last dimension is for \"features\" - there is only one here, since images are\n    # grayscale -- it would be 3 for RGB, 4 for RGBA, etc.\n    x_image = tf.reshape(x, [-1, 28, 28, 1])\n    wd = tf.placeholder(tf.float32)\n\n    # first convolutional layer - maps one grayscale image to 32 feature maps\n    W_conv1 = weight_variable([5, 5, 1, 32], wd)\n    b_conv1 = bias_variable([32])\n    h_conv1 = tf.nn.relu(conv2d(x_image, W_conv1) + b_conv1)\n\n    # pooling layer - downsamples by 2X\n    h_pool1 = max_pool_2X2(h_conv1)\n\n    # second convolutional layer --maps 32 feature maps to 64\n    W_conv2 = weight_variable([5, 5, 32, 64], wd)\n    b_conv2 = bias_variable([64])\n    h_conv2 = tf.nn.relu(conv2d(h_pool1, W_conv2) + b_conv2)\n\n    # second pooling layer - downsamples by 2X\n    h_pool2 = max_pool_2X2(h_conv2)\n\n    # fully connected layer 1 -- after 2 round of downsampleing, our 28x28 image\n    # is done to 7x7x64 feature maps --maps this to 1025 features.\n    W_fc1 = weight_variable([7*7*64, 1024], wd)\n    b_fc1 = bias_variable([1024])\n\n    h_pool2_flat = tf.reshape(h_pool2, [-1, 7*7*64])\n    h_fc1 = tf.nn.relu(tf.matmul(h_pool2_flat, W_fc1) + b_fc1)\n\n    # dropout - controls the complexity of the model, prevents co-adaptation of features.\n    keep_prob = tf.placeholder(tf.float32)\n    h_fc1_drop = tf.nn.dropout(h_fc1, keep_prob)\n\n    # map the 1024 features to 10 classes, one for each digit\n    W_fc2 = weight_variable([1024, 10], wd)\n    b_fc2 = bias_variable([10])\n\n    y_conv = tf.matmul(h_fc1_drop, W_fc2) + b_fc2\n    return y_conv, keep_prob, wd\n\ndef conv2d(x, W):\n    \"\"\"conv2d returns a 2d convolution layer with full stride.\"\"\"\n    return tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding='SAME')\n\ndef max_pool_2X2(x):\n    \"\"\"max_pool_2x2 downsamples a feature map by 2X.\"\"\"\n    return tf.nn.max_pool(x, ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1], padding='SAME')\n\ndef weight_variable(shape, wd = None):\n    \"\"\"weight_variable generates a weight variable of a given shape.\"\"\"\n    initial = tf.truncated_normal(shape, stddev=0.1)\n    # weight decay\n    if wd is not None:\n        weight_decay = tf.multiply(tf.nn.l2_loss(initial), wd, name = 'weight_loss')\n        tf.add_to_collection('losses', weight_decay)\n    return tf.Variable(initial)\n\ndef bias_variable(shape):\n    \"\"\"bias_variable generates a bias variable of a given shape.\"\"\"\n    initial = tf.constant(0.1, shape=shape)\n    return tf.Variable(initial)\n\n\ndef main(_):\n    global Flags2\n    if Flags2 is None:\n        Flags2 = {}\n    if 'keep_prob' not in Flags2:\n        Flags2 = {}\n        Flags2['dp'] = 1.0\n        Flags2['wd'] = 0.0\n\n    print(Flags2)\n\n    # import data\n    mnist = input_data.read_data_sets('/tmp/tensorflow/mnist/input_data', one_hot=True)\n\n    # create the model\n    x = tf.placeholder(tf.float32, [None, 784])\n    y_ = tf.placeholder(tf.float32, [None, 10])\n\n    # build the graph for the deep net\n    y_conv, keep_prob, wd = deepnn(x)\n\n    cross_entropy = tf.reduce_mean(\n        tf.nn.softmax_cross_entropy_with_logits(labels=y_, logits=y_conv))\n    # adding weight decay\n    tf.add_to_collection('losses', cross_entropy)\n    total_loss = tf.add_n(tf.get_collection('losses'), name='total_loss')\n\n    train_step = tf.train.AdamOptimizer(1e-4).minimize(total_loss)\n    correct_prediction = tf.equal(tf.argmax(y_conv, 1), tf.argmax(y_, 1))\n    accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))\n\n\n    with tf.Session() as sess:\n        sess.run(tf.global_variables_initializer())\n\n\n        for i in range(1000):\n            batch =mnist.train.next_batch(200)\n\n            if i % 100 == 0:\n                train_accuracy = accuracy.eval(feed_dict={\n                    x: batch[0], y_:batch[1], keep_prob: Flags2['dp'], wd: Flags2['wd']})\n                print('step %d, training accuracy %g' %(i, train_accuracy))\n            train_step.run(feed_dict={x: batch[0], y_: batch[1], keep_prob: Flags2['dp'], wd: Flags2['wd']})\n\n        test_accuracy = accuracy.eval(feed_dict={x:mnist.test.images, y_:mnist.test.labels, keep_prob:1.0, wd: Flags2['wd']})\n        print('test accuracy %g' % test_accuracy)\n\n    return  test_accuracy\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser()\n    parser.add_argument('--data_dir', type=str,\n                        default='/tmp/tensorflow/mnist/input_data',\n                        help='directory for storing input data')\n    FLAGS, unparsed = parser.parse_known_args()\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n</code></pre>\n\n<p>Hyperopt is used to tune the hyper-parameters (weight decay factor and dropout probability).</p>\n\n<pre><code>from hyperopt import fmin, tpe, hp, Trials\n\nimport pickle\nimport traceback\n\nfrom my_mnist_convnet import build_and_optimize\n\nspace = {\n    'dropout_global': hp.uniform('conv_dropout_prob', 0.4, 0.6),\n    'wd': hp.uniform('wd', 0.0, 0.01)\n}\n\ndef run_a_trail():\n    \"\"\"Run one TPE meta optimisation step and save its results.\"\"\"\n    max_evals = nb_evals = 3\n\n    print(\"Attempt to resume a past training if it exists:\")\n\n    try:\n        trials = pickle.load(open(\"results.pkl\", \"rb\"))\n        print(\"Found saved Trials! Loading...\")\n        max_evals = len(trials.trials) + nb_evals\n        print(\"Rerunning from {} trials to add another one.\".format(\n            len(trials.trials)))\n    except:\n        trials = Trials()\n        print(\"Starting from scratch: new trials.\")\n\n    best = fmin(\n        build_and_optimize,\n        space,\n        algo=tpe.suggest,\n        trials=trials,\n        max_evals=max_evals\n    )\n    pickle.dump(trials, open(\"results.pkl\", \"wb\"))\n\n    print(best)\n\n    return\n\ndef plot_base_and_best_models():\n    return\n\nif __name__ == \"__main__\":\n    \"\"\"plot the model and run the optimisation forever (and save results).\"\"\"\n    run_a_trail()\n</code></pre>\n\n<p>When hyperopt code is used, the code runs fine for only one TPE run, however, if the number of trails is increased then it reports the following error.</p>\n\n<pre><code>self._traceback = _extract_stack()\n\nInvalidArgumentError (see above for traceback): Shape [-1,784] has negative dimensions\n         [[Node: Placeholder = Placeholder[dtype=DT_FLOAT, shape=[?,784], _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n</code></pre>\n"}, {"tags": ["python", "string", "partition"], "comments": [{"owner": {"reputation": 1964, "user_id": 2124529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de9665b83b86459dd950f5bd90255aba?s=128&d=identicon&r=PG", "display_name": "EvgenyKolyakov", "link": "https://stackoverflow.com/users/2124529/evgenykolyakov"}, "edited": false, "score": 0, "creation_date": 1499289443, "post_id": 44936113, "comment_id": 76848475, "body": "Try printing your variables... maybe it&#39;ll give you a clue on what&#39;s going on and how to proceed..."}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1499289522, "post_id": 44936113, "comment_id": 76848509, "body": "what returns <code>file_to_set</code> ?"}, {"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 1, "creation_date": 1499289678, "post_id": 44936113, "comment_id": 76848587, "body": "try running <code>strip()</code> on your text strings. <a href=\"https://www.tutorialspoint.com/python/string_strip.htm\" rel=\"nofollow noreferrer\">Tutorial</a>"}, {"owner": {"reputation": 97, "user_id": 5910659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f0666e29882680a9c956214d0de042?s=128&d=identicon&r=PG&f=1", "display_name": "Ilumtics", "link": "https://stackoverflow.com/users/5910659/ilumtics"}, "edited": false, "score": 0, "creation_date": 1499290061, "post_id": 44936113, "comment_id": 76848778, "body": "I tried strip() but it didn&#39;t work."}, {"owner": {"reputation": 97, "user_id": 5910659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f0666e29882680a9c956214d0de042?s=128&d=identicon&r=PG&f=1", "display_name": "Ilumtics", "link": "https://stackoverflow.com/users/5910659/ilumtics"}, "edited": false, "score": 0, "creation_date": 1499290195, "post_id": 44936113, "comment_id": 76848842, "body": "Ah ok, I think I figured out the problem. The strip() must be done before I do partition. Thanks!!"}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 3, "last_activity_date": 1499290003, "last_edit_date": 1499290003, "creation_date": 1499289597, "answer_id": 44936181, "question_id": 44936113, "link": "https://stackoverflow.com/questions/44936113/python-extract-parts-of-a-string-somehow-got-pushed-down-to-a-new-line/44936181#44936181", "title": "Python: Extract parts of a string somehow got pushed down to a new line", "body": "<p>That's because <code>link</code> is a line and therefore has a trailing new line character which you need to strip using <code>str.rstrip</code>:</p>\n\n<pre><code>for link in file_to_set('links.txt'):\n    link = link.rstrip()\n    path_parts = link.rpartition('/')[2]\n    outfile.write(link + ',' + path_parts + '\\n')\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5910659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f0666e29882680a9c956214d0de042?s=128&d=identicon&r=PG&f=1", "display_name": "Ilumtics", "link": "https://stackoverflow.com/users/5910659/ilumtics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 44936181, "answer_count": 1, "score": 1, "last_activity_date": 1499290003, "creation_date": 1499289292, "question_id": 44936113, "link": "https://stackoverflow.com/questions/44936113/python-extract-parts-of-a-string-somehow-got-pushed-down-to-a-new-line", "title": "Python: Extract parts of a string somehow got pushed down to a new line", "body": "<p>I use this code to extract the part after the final \"/\" of an html. I want to have that partition right after the link itself, separated by a comma. However, in the output file, the partition always got pushed down to a new line, not continuously attached to the associated link line. </p>\n\n<pre><code> with open('links_parts.txt', mode='wt') as outfile:\n   for link in file_to_set('links.txt'):\n     path_parts = link.rpartition('/')[2]\n     outfile.write(link + ','+ path_parts + '\\n')\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 5, "last_activity_date": 1499290033, "last_edit_date": 1499290033, "creation_date": 1499289381, "answer_id": 44936129, "question_id": 44936088, "link": "https://stackoverflow.com/questions/44936088/inequalities-on-pandas-column/44936129#44936129", "title": "Inequalities on pandas column", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.cut.html#pandas-cut\" rel=\"nofollow noreferrer\"><code>pd.cut</code></a>:</p>\n\n<pre><code>df['res'] = pd.cut(df.a,[-np.inf,2,4,np.inf],labels=[0,1,2],right=False)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   a  b res\n0  1  3   0\n1  2  6   1\n2  3  4   1\n3  4  2   2\n4  5  7   2\n5  6  7   2\n6  7  1   2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 4, "last_activity_date": 1499289881, "creation_date": 1499289881, "answer_id": 44936253, "question_id": 44936088, "link": "https://stackoverflow.com/questions/44936088/inequalities-on-pandas-column/44936253#44936253", "title": "Inequalities on pandas column", "body": "<p>For just a few values, you can also use <code>numpy.where</code> as a vectorized solution:</p>\n\n<pre><code>df['res'] = pd.np.where(df.a &lt; 2, 0, pd.np.where((df.a &gt;= 2) &amp; (df.a &lt; 4), 1, 2))\ndf\n#   a   b   res\n#0  1   3   0\n#1  2   6   1\n#2  3   4   1\n#3  4   2   2\n#4  5   7   2\n#5  6   7   2\n#6  7   1   2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1499291120, "last_edit_date": 1499291120, "creation_date": 1499290811, "answer_id": 44936431, "question_id": 44936088, "link": "https://stackoverflow.com/questions/44936088/inequalities-on-pandas-column/44936431#44936431", "title": "Inequalities on pandas column", "body": "<p><strong><code>searchsorted</code></strong><br>\nShould give you more performant results.  Similar to <code>pd.cut</code>, you need specify the break points.</p>\n\n<p><em><code>pandas</code></em><br>\n<em><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.searchsorted.html\" rel=\"nofollow noreferrer\"><code>pd.Series.searchsorted</code></a></em></p>\n\n<pre><code>df.assign(res=pd.Series([2, 4]).searchsorted(df.a, side='right'))\n\n   a  b  res\n0  1  3    0\n1  2  6    1\n2  3  4    1\n3  4  2    2\n4  5  7    2\n5  6  7    2\n6  7  1    2\n</code></pre>\n\n<hr>\n\n<p><em><code>numpy</code></em><br>\n<em><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html\" rel=\"nofollow noreferrer\"><code>ndarray.searchsorted</code></a></em></p>\n\n<pre><code>df.assign(res=np.array([2, 4]).searchsorted(df.a.values, side='right'))\n\n   a  b  res\n0  1  3    0\n1  2  6    1\n2  3  4    1\n3  4  2    2\n4  5  7    2\n5  6  7    2\n6  7  1    2\n</code></pre>\n\n<hr>\n\n<p><strong>Timing</strong>  </p>\n\n<pre><code>%timeit df.assign(res=pd.Series([2, 4]).searchsorted(df.a, side='right'))\n%timeit df.assign(res=np.array([2, 4]).searchsorted(df.a.values, side='right'))\n%timeit df.assign(res=pd.np.where(df.a &lt; 2, 0, pd.np.where((df.a &gt;= 2) &amp; (df.a &lt; 4), 1, 2)))\n%timeit df.assign(res=pd.cut(df.a, [-np.inf,2,4,np.inf], labels=[0,1,2], right=False))\n\n1000 loops, best of 3: 443 \u00b5s per loop\n1000 loops, best of 3: 337 \u00b5s per loop\n1000 loops, best of 3: 1.06 ms per loop\n1000 loops, best of 3: 530 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 0, "accepted_answer_id": 44936129, "answer_count": 3, "score": 3, "last_activity_date": 1499291120, "creation_date": 1499289211, "last_edit_date": 1499289766, "question_id": 44936088, "link": "https://stackoverflow.com/questions/44936088/inequalities-on-pandas-column", "title": "Inequalities on pandas column", "body": "<p>I have a pandas dataframe, and I would like to create a new column based on an existing column and certain inequalities. For example, let</p>\n\n<pre><code>df=pd.DataFrame({'a':[1,2,3,4,5,6,7],'b':[3,6,4,2,7,7,1]})\n</code></pre>\n\n<p>so <code>df</code> looks like </p>\n\n<pre><code>    a   b\n0   1   3\n1   2   6\n2   3   4\n3   4   2\n4   5   7\n5   6   7\n6   7   1\n</code></pre>\n\n<p>I would like to add a new column, <code>res</code>, that equals 0 if the corresponding value in <code>a</code> is smaller than 2, 1 if the corresponding value in <code>a</code> is at least 2 and smaller than 4, and 2 otherwise. So I would like to get</p>\n\n<pre><code>    a   b   res\n0   1   3   0\n1   2   6   1\n2   3   4   1\n3   4   2   2\n4   5   7   2\n5   6   7   2\n6   7   1   2\n</code></pre>\n\n<p>So far I have been doing this by using <code>apply</code> as follows:</p>\n\n<pre><code>def f(x):\n    if x['a']&lt;2:\n        return 0\n    elif x['a']&gt;=2 and x['a']&lt;4:\n        return 1\n    else:\n        return 2\ndf['res']=df.apply(f,axis=1)\n</code></pre>\n\n<p>but I was wondering if there is a more direct way, or some specific pandas method that can enable me to do that.</p>\n"}, {"tags": ["python", "vpython"], "answers": [{"tags": [], "owner": {"reputation": 1074, "user_id": 8013091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q808N6FXFaI/AAAAAAAAAAI/AAAAAAAAAgU/ltoAtDxvv4w/photo.jpg?sz=128", "display_name": "Solvalou", "link": "https://stackoverflow.com/users/8013091/solvalou"}, "is_accepted": true, "score": 0, "last_activity_date": 1499291221, "creation_date": 1499291221, "answer_id": 44936512, "question_id": 44936072, "link": "https://stackoverflow.com/questions/44936072/constructing-a-simple-atomic-lattice-with-vpython-python-3-6-1/44936512#44936512", "title": "Constructing a simple atomic lattice with VPython (Python 3.6.1)", "body": "<p>You need to create a vector:\n<a href=\"http://vpython.org/contents/docs/vector.html\" rel=\"nofollow noreferrer\">http://vpython.org/contents/docs/vector.html</a></p>\n\n<p>First, you have to import it via</p>\n\n<pre><code>from vpython import vector\n</code></pre>\n\n<p>Now you change your last line to</p>\n\n<pre><code>sphere(pos=vector(i,j,k),radius=R)\n</code></pre>\n\n<p>and it hopefully should work!</p>\n"}], "owner": {"reputation": 3, "user_id": 8261469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e159bdabde5d5cc650e99e6d3cfe170?s=128&d=identicon&r=PG&f=1", "display_name": "user8261469", "link": "https://stackoverflow.com/users/8261469/user8261469"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 44936512, "answer_count": 1, "score": 0, "last_activity_date": 1499427583, "creation_date": 1499289155, "last_edit_date": 1499427583, "question_id": 44936072, "link": "https://stackoverflow.com/questions/44936072/constructing-a-simple-atomic-lattice-with-vpython-python-3-6-1", "title": "Constructing a simple atomic lattice with VPython (Python 3.6.1)", "body": "<p>I am currently working my way through Mark Newman's <em>Computational Physics</em> and I've encountered some trouble doing the exercises on 3D modelling using the VPython module.</p>\n\n<p>I'm attempting to construct a simple L*L lattice and display it using the VPython module. I'm running Python 3.6.1.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>from vpython import sphere\n\nL = 5 # lattice size\nR = 0.3 # atom radius\n\nfor i in range(-L,L+1):\n    for j in range(-L,L+1):\n        for k in range(-L,L+1):\n            sphere(pos=[i,j,k],radius=R)\n</code></pre>\n\n<p>I get the following attribute error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\xxx\\Desktop\\python\\computational physics\\web resources\\lattice.py\", line 7, in &lt;module&gt;\n    sphere(pos=[i,j,k],radius=R)\n  File \"C:\\Users\\xxx\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\vpython\\vpython.py\", line 1168, in __init__\n    super(sphere, self).setup(args)\n  File \"C:\\Users\\xxx\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\vpython\\vpython.py\", line 631, in setup\n    else: raise AttributeError(a+' must be a vector')\nAttributeError: pos must be a vector\n</code></pre>\n\n<p>The examples in the book use the <em>visual</em> module so I suspect that my problem is due to some compatibility issues between my version of Python and VPython.</p>\n\n<p>Is there any way to fix my code so it displays the lattice using VPython? If not, is there an alternative to VPython?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 1, "creation_date": 1499289038, "post_id": 44936018, "comment_id": 76848298, "body": "<code>if  len([v for v in trmode_data.values() if v ==1]) &gt; 1</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "edited": false, "score": 0, "creation_date": 1499290238, "post_id": 44936055, "comment_id": 76848859, "body": "@ Rawing, perfect answer! Worked like a charm. Thanks much!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499327016, "post_id": 44936055, "comment_id": 76861011, "body": "the first approach also works for more than 2 items right?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499327605, "post_id": 44936055, "comment_id": 76861372, "body": "@Jean-Fran&#231;oisFabre The <code>all</code> solution will have a different behavior if there are more than 2 items - because it checks if <i>all</i> values are 1, not if there&#39;s <i>more than one</i> 1."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499328389, "post_id": 44936055, "comment_id": 76861884, "body": "right! in that case <code>all</code> may be slightly overkill. but solutions with <code>or</code> aren&#39;t better."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 1, "last_activity_date": 1506418335, "last_edit_date": 1506418335, "creation_date": 1499289108, "answer_id": 44936055, "question_id": 44936018, "link": "https://stackoverflow.com/questions/44936018/how-to-check-if-the-dictionary-has-only-one-key-with-value-1/44936055#44936055", "title": "How to check if the dictionary has only one key with value &quot;1&quot;", "body": "<p>Since you know your dict has exactly 2 items, you can use <a href=\"https://docs.python.org/3/library/functions.html#all\" rel=\"nofollow noreferrer\"><code>all</code></a> in combination with a <a href=\"https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">comprehension</a>:</p>\n\n<pre><code>if all(val==1 for val in trmode_data.values()):\n    print('unexpected')\n</code></pre>\n\n<hr>\n\n<p>Alternatively, a more generic approach would be to use <a href=\"https://docs.python.org/3/library/functions.html#sum\" rel=\"nofollow noreferrer\"><code>sum</code></a>:</p>\n\n<pre><code>if sum(val==1 for val in trmode_data.values()) &gt; 1:\n    print('unexpected')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1499289810, "post_id": 44936093, "comment_id": 76848655, "body": "@Rawing You&#39;re right. My bad. I forgot it returned a list in Py2"}], "tags": [], "owner": {"reputation": 1074, "user_id": 8013091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q808N6FXFaI/AAAAAAAAAAI/AAAAAAAAAgU/ltoAtDxvv4w/photo.jpg?sz=128", "display_name": "Solvalou", "link": "https://stackoverflow.com/users/8013091/solvalou"}, "is_accepted": false, "score": 2, "last_activity_date": 1499289229, "creation_date": 1499289229, "answer_id": 44936093, "question_id": 44936018, "link": "https://stackoverflow.com/questions/44936018/how-to-check-if-the-dictionary-has-only-one-key-with-value-1/44936093#44936093", "title": "How to check if the dictionary has only one key with value &quot;1&quot;", "body": "<pre><code>if trmode_data.values().count(1) == 2:\n    print \"unexpected\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 0, "last_activity_date": 1499289654, "creation_date": 1499289654, "answer_id": 44936194, "question_id": 44936018, "link": "https://stackoverflow.com/questions/44936018/how-to-check-if-the-dictionary-has-only-one-key-with-value-1/44936194#44936194", "title": "How to check if the dictionary has only one key with value &quot;1&quot;", "body": "<p>Given your statement:</p>\n\n<blockquote>\n  <p>Whichever key has value 1, that key is to be used further.</p>\n</blockquote>\n\n<p>It sounds like you want to continue using your dictionary, just w/o the dup key(s) with the value of <code>1</code>.  (And I'm going to assume you want uniqueness for all values, not just <code>1</code>.)</p>\n\n<p>You can achive this by inverting the dictionary.  Example:</p>\n\n<pre><code>x = {'a':1, 'b':1, 'c':2}\n\nx_ = {v:k for k,v in x.items()}\nx = {v:k for k,v in x_.items()}\n\nprint x\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>$ python test2.py \n{'c': 2, 'b': 1}\n</code></pre>\n\n<p>BTW, you almost certainty want to use an <a href=\"https://docs.python.org/2/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\">OrderedDict</a> when reading in from wherever you're reading from, otherwise which key \"wins\" will be effectively random.  But with some sort of ordered dictionary implementation, the last will always win, which is what you specified.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2711, "favorite_count": 0, "accepted_answer_id": 44936055, "answer_count": 3, "score": 2, "last_activity_date": 1506418335, "creation_date": 1499288933, "question_id": 44936018, "link": "https://stackoverflow.com/questions/44936018/how-to-check-if-the-dictionary-has-only-one-key-with-value-1", "title": "How to check if the dictionary has only one key with value &quot;1&quot;", "body": "<p>I have a dictionary with 2 keys. Only one key can have value 1. If both keys have value 1, it should give the error message.</p>\n\n<p>Here is the working code which I tried, but want to know if there is any way to optimize the same?</p>\n\n<pre><code>&gt;&gt;&gt; trmode_data = {'continuous': 1, 'fixed': 1}\n\n&gt;&gt;&gt; new = []\n&gt;&gt;&gt; for k, v in trmode_data.items():\n...  if v == 1:\n...   new.append(k)\n\n&gt;&gt;&gt; if len(new) &gt; 1:\n...  print \"unexpected\"\n...\nunexpected\n</code></pre>\n\n<p>Whichever key has value 1, that key is to be used further. So basically above code is needed to verify that the dictionary has expected values for the keys or not.</p>\n"}, {"tags": ["python", "scikit-learn", "cross-validation"], "answers": [{"comments": [{"owner": {"reputation": 4144, "user_id": 3594588, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3bdbd93bbb9a84d9635d498d9a50e08b?s=128&d=identicon&r=PG&f=1", "display_name": "bugsyb", "link": "https://stackoverflow.com/users/3594588/bugsyb"}, "edited": false, "score": 1, "creation_date": 1499289636, "post_id": 44936133, "comment_id": 76848562, "body": "I understand that part, but how do I get it to perform StratifiedKFold? In the documentation it states that the StratifiedKFold strategy is used when the estimator derives from &#39;ClassifierMixin&#39;. What exactly does that mean?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 4144, "user_id": 3594588, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3bdbd93bbb9a84d9635d498d9a50e08b?s=128&d=identicon&r=PG&f=1", "display_name": "bugsyb", "link": "https://stackoverflow.com/users/3594588/bugsyb"}, "edited": false, "score": 2, "creation_date": 1499289864, "post_id": 44936133, "comment_id": 76848683, "body": "@bugsyb: The estimator is the first argument passed to <code>cross_val_score</code>. In the example, <code>clf</code> is the estimator.  &quot;The estimator derives from ClassifierMixin&quot; is True when <code>isinstance(clf, sklearn.base.ClassifierMixin)</code>. You can see all the bases (i.e. classes) from which <code>type(clf)</code> is derived by looking at <code>type(clf).mro()</code>. You&#39;ll see <code>ClassifierMixin</code> is the second-to-last class listed there."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1499290101, "post_id": 44936133, "comment_id": 76848798, "body": "For a little more on where the terminology &quot;derived&quot; comes from, see <a href=\"https://docs.python.org/3.6/tutorial/classes.html#inheritance\" rel=\"nofollow noreferrer\">the tutorial</a>. For more on <code>mro</code> see <a href=\"https://stackoverflow.com/q/2010692/190597\">this SO question</a>."}], "tags": [], "owner": {"reputation": 416, "user_id": 5633320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6832ff88ef1c94efc0dadf17b7827263?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/5633320/chirag"}, "is_accepted": false, "score": 2, "last_activity_date": 1499290714, "last_edit_date": 1499290714, "creation_date": 1499289391, "answer_id": 44936133, "question_id": 44935999, "link": "https://stackoverflow.com/questions/44935999/stratified-k-fold-in-python/44936133#44936133", "title": "Stratified K Fold in Python", "body": "<p>When you are performing cross-fold validation, you are splitting up your training set into multiple validation sets. StratifiedKFold ensures that each of your validation sets contains an equal proportion of the labels from your original training set.</p>\n\n<p>For example, let's say you are training a classifier on spam and not spam. Your training set contains 50k samples with 10k spam samples. If you perform 5-fold cross-fold validation, you will split up your training set into 5 validations of size 10k samples each. With stratification, each of your validation sets will be selected in a manner to maintain the 4:1 distribution of not spam to spam.</p>\n\n<p>EDIT: I'm sorry I misunderstood your original question. To expand upon user @unutbu's comments below, you want to confirm that the classifier you are using is a subclass of the base class <code>ClassifierMixin</code>. You can do so using a <code>Method Resolution Order</code>.</p>\n\n<p>Suppose you were using the classifier <code>KNeighborsClassifier</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from sklearn.neighbors import KNeighborsClassifier\n&gt;&gt;&gt; clf = KNeighborsClassifier()\n&gt;&gt;&gt; type(clf)\n&lt;class 'sklearn.neighbors.classification.KNeighborsClassifier'&gt;\n&gt;&gt;&gt; type(clf).mro()\n[&lt;class 'sklearn.neighbors.classification.KNeighborsClassifier'&gt;, ..., &lt;class 'sklearn.base.ClassifierMixin'&gt;, &lt;type 'object'&gt;]\n</code></pre>\n\n<p>Notice that the second to last class in the resolution order is <code>ClassifierMixin</code>.</p>\n"}], "owner": {"reputation": 4144, "user_id": 3594588, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3bdbd93bbb9a84d9635d498d9a50e08b?s=128&d=identicon&r=PG&f=1", "display_name": "bugsyb", "link": "https://stackoverflow.com/users/3594588/bugsyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1499290714, "creation_date": 1499288854, "question_id": 44935999, "link": "https://stackoverflow.com/questions/44935999/stratified-k-fold-in-python", "title": "Stratified K Fold in Python", "body": "<p>I'm trying to perform Stratified K Fold Validation in python, and I read the following in the documentation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NITpE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NITpE.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm not exactly sure what this means. Could someone explain to me when exactly does cross_val_score use the StratifiedKFold strategy?</p>\n"}, {"tags": ["python", "python-3.x", "tensorflow", "traceback"], "comments": [{"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1499292373, "post_id": 44935966, "comment_id": 76849762, "body": "did you try <code>tf.Variable(tf.random_normal([n_classes])</code> in your output_layer biases? it seems to be missing the brackets in your code"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 8260604, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-lozXFGwwH80/AAAAAAAAAAI/AAAAAAAAAWk/kPeaoY302Bk/photo.jpg?sz=128", "display_name": "Osiris.N", "link": "https://stackoverflow.com/users/8260604/osiris-n"}, "edited": false, "score": 0, "creation_date": 1499353845, "post_id": 44937034, "comment_id": 76880663, "body": "That definitely resolved the error. But a new one has come up. Instead of an issue with the rank, I&#39;m getting one with dimensions. The error is    &quot;ValueError: Dimensions must be equal, but are 784 and 500 for &#39;MatMul_1&#39; (op: &#39;MatMul&#39;) with input shapes: [?,784], [500,500].&quot;"}, {"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "reply_to_user": {"reputation": 117, "user_id": 8260604, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-lozXFGwwH80/AAAAAAAAAAI/AAAAAAAAAWk/kPeaoY302Bk/photo.jpg?sz=128", "display_name": "Osiris.N", "link": "https://stackoverflow.com/users/8260604/osiris-n"}, "edited": false, "score": 0, "creation_date": 1499354039, "post_id": 44937034, "comment_id": 76880816, "body": "I think the problem is that one this line: <code>l2 = tf.add(tf.matmul(data, hidden_2_layer[&#39;weights&#39;])</code>, you&#39;re multiplying <code>data</code> by the weights of layer 2, but instead you should be multiplying <code>l1</code> by the weights of layer 2 (the definition of layer 3 has the same bug)."}, {"owner": {"reputation": 117, "user_id": 8260604, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-lozXFGwwH80/AAAAAAAAAAI/AAAAAAAAAWk/kPeaoY302Bk/photo.jpg?sz=128", "display_name": "Osiris.N", "link": "https://stackoverflow.com/users/8260604/osiris-n"}, "edited": false, "score": 0, "creation_date": 1499355688, "post_id": 44937034, "comment_id": 76882049, "body": "I don&#39;t believe that is the issue. Instead, I replaced the layers &quot;,&quot; between the weights and biases with a plus sign. The giant traceback issue was solved. Now I&#39;m getting a type error: l1 = tf.add(tf.matmul(data, hidden_1_layer[&#39;weights&#39;]) + hidden_1_layer[&#39;biases&#39;]) TypeError: add() missing 1 required positional argument: &#39;y&#39;"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": false, "score": 0, "last_activity_date": 1499294004, "creation_date": 1499294004, "answer_id": 44937034, "question_id": 44935966, "link": "https://stackoverflow.com/questions/44935966/how-do-you-change-rank-of-tf-random-normal-as-a-shape/44937034#44937034", "title": "How do you change rank of tf.random_normal as a shape", "body": "<p>The first argument to <a href=\"https://www.tensorflow.org/api_docs/python/tf/random_normal\" rel=\"nofollow noreferrer\"><code>tf.random_normal()</code></a> (the <code>shape</code>) must be a one-dimensional tensor or a list of integers, representing length of each dimension of the random tensor. Assuming that <code>n_classes</code> is an integer, replacing <code>tf.random_normal(n_classes)</code> with <code>tf.random_normal([n_classes])</code> should fix the error.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9085287, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2QN-ny805o4/AAAAAAAAAAI/AAAAAAAAAFc/hOqiAzb9hWw/photo.jpg?sz=128", "display_name": "Ranjith Gowda", "link": "https://stackoverflow.com/users/9085287/ranjith-gowda"}, "is_accepted": false, "score": 0, "last_activity_date": 1571394092, "creation_date": 1571394092, "answer_id": 58448872, "question_id": 44935966, "link": "https://stackoverflow.com/questions/44935966/how-do-you-change-rank-of-tf-random-normal-as-a-shape/58448872#58448872", "title": "How do you change rank of tf.random_normal as a shape", "body": "<p>you must make connection from Layer 1 to Layer 2, seems like you passing data to all the layer without connecting them, \nyour code</p>\n\n<pre><code>l1 = tf.add(tf.matmul(data, hidden_1_layer['weights']), \nhidden_1_layer['biases'])\nl1 = tf.nn.relu(l1)\n\nl2 = tf.add(tf.matmul(data, hidden_2_layer['weights']), \nhidden_2_layer['biases'])\nl2 = tf.nn.relu(l2)\n\nl3 = tf.add(tf.matmul(data, hidden_3_layer['weights']), \nhidden_3_layer['biases'])\nl3 = tf.nn.relu(l3)\n\noutput = tf.matmul(l3, output_layer['weights']) + \noutput_layer['biases']\n</code></pre>\n\n<p>Corrected code:</p>\n\n<pre><code>l1 = tf.add(tf.matmul(data, hidden_1_layer['weights']), \nhidden_1_layer['biases'])\nl1 = tf.nn.relu(l1)\n\nl2 = tf.add(tf.matmul(l1, hidden_2_layer['weights']), \nhidden_2_layer['biases'])\nl2 = tf.nn.relu(l2)\n\nl3 = tf.add(tf.matmul(l2, hidden_3_layer['weights']), \nhidden_3_layer['biases'])\nl3 = tf.nn.relu(l3)\n\noutput = tf.matmul(l3, output_layer['weights']) + \noutput_layer['biases']\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 8260604, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-lozXFGwwH80/AAAAAAAAAAI/AAAAAAAAAWk/kPeaoY302Bk/photo.jpg?sz=128", "display_name": "Osiris.N", "link": "https://stackoverflow.com/users/8260604/osiris-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 987, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571394092, "creation_date": 1499288707, "question_id": 44935966, "link": "https://stackoverflow.com/questions/44935966/how-do-you-change-rank-of-tf-random-normal-as-a-shape", "title": "How do you change rank of tf.random_normal as a shape", "body": "<p>I'm new to tensorflow and I'm following a tutorial by sentdex.\nNo matter how many syntax issues I resolve, I keep on getting the same error. </p>\n\n<pre><code>ValueError: Shape must be rank 1 but is rank 0 for \n'random_normal_7/RandomStandardNormal' (op: 'RandomStandardNormal') \nwith input shapes: []\n</code></pre>\n\n<p>I believe the issue is here, but I have no idea how to fix it.</p>\n\n<pre><code>def neural_network_model(data):\nhidden_1_layer = {'weights': tf.Variable(tf.random_normal([784, \nn_nodes_hl1])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl1]))}\n\nhidden_2_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl1, \nn_nodes_hl2])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl2]))}\n\nhidden_3_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl2, \nn_nodes_hl3])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl3]))}\n\noutput_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl3, \nn_classes])),\n                'biases': tf.Variable(tf.random_normal(n_classes))}\n</code></pre>\n\n<p>My entire code is </p>\n\n<pre><code>import tensorflow as tf\nfrom tensorflow.examples.tutorials.mnist import input_data\n\nmnist = input_data.read_data_sets(\"/tmp/ data/\", one_hot=True)\n\nn_nodes_hl1 = 500\nn_nodes_hl2 = 500\nn_nodes_hl3 = 500\n\nn_classes = 10\nbatch_size = 100\n\nx = tf.placeholder('float', [None, 784])\ny = tf.placeholder('float')\n\n\ndef neural_network_model(data):\nhidden_1_layer = {'weights': tf.Variable(tf.random_normal([784, \nn_nodes_hl1])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl1]))}\n\nhidden_2_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl1, \nn_nodes_hl2])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl2]))}\n\nhidden_3_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl2, \nn_nodes_hl3])),\n                  'biases': \ntf.Variable(tf.random_normal([n_nodes_hl3]))}\n\noutput_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl3, \nn_classes])),\n                'biases': tf.Variable(tf.random_normal(n_classes))}\n\nl1 = tf.add(tf.matmul(data, hidden_1_layer['weights']), \nhidden_1_layer['biases'])\nl1 = tf.nn.relu(l1)\n\nl2 = tf.add(tf.matmul(data, hidden_2_layer['weights']), \nhidden_2_layer['biases'])\nl2 = tf.nn.relu(l2)\n\nl3 = tf.add(tf.matmul(data, hidden_3_layer['weights']), \nhidden_3_layer['biases'])\nl3 = tf.nn.relu(l3)\n\noutput = tf.matmul(l3, output_layer['weights']) + \noutput_layer['biases']\n\nreturn output\n\n\ndef train_neural_network(x):\nprediction = neural_network_model(x)\ncost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits\n(logits=prediction, labels=y))\noptimizer = tf.train.AdamOptimizer().minimize(cost)\n\nhm_epochs = 10\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n\n    for epoch in range(hm_epochs):\n        epoch_loss = 0\n        for _ in range(int(mnist.train.num_examples / batch_size)):\n            epoch_x, epoch_y = mnist.train.next_batch(batch_size)\n            _, c = sess.run([optimizer, cost], feed_dict={x: epoch_x,\ny: epoch_y})\n            epoch_loss += c\n        print('Epoch', epoch, 'completed out of', hm_epochs, 'loss:', \nepoch_loss)\n\n    correct = tf.equal(tf.argmax(prediction, 1), tf.argmax(y, 1))\n    accuracy = tf.reduce_mean(tf.cast(correct, 'float'))\n    print('Accuracy:', accuracy.eval({x: mnist.test.images, y: \nmnist.test.labels}))\n\n\ntrain_neural_network(x)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "edited": false, "score": 3, "creation_date": 1499288880, "post_id": 44935955, "comment_id": 76848235, "body": "Can you add the code you wrote so we can see where to improve it?"}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "reply_to_user": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1499289202, "post_id": 44935955, "comment_id": 76848362, "body": "Sure! I have just uploaded it, thanks!"}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 1, "creation_date": 1499289524, "post_id": 44935955, "comment_id": 76848510, "body": "Oh, sorry for the typo. It should be l.sort(). Thanks."}, {"owner": {"reputation": 3367, "user_id": 3671397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee012426897a4e53e39de64efce42fd8?s=128&d=identicon&r=PG", "display_name": "miindlek", "link": "https://stackoverflow.com/users/3671397/miindlek"}, "edited": false, "score": 0, "creation_date": 1499321386, "post_id": 44935955, "comment_id": 76857684, "body": "@pokfung No comment on my solution? Cannot help without feedback"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1499289555, "post_id": 44936151, "comment_id": 76848522, "body": "Ooh this is much nicer. This is just a DFS from here."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1499290037, "post_id": 44936151, "comment_id": 76848767, "body": "You&#39;re still looking at n^2 in the worst case after the sort, since the list might be a whole list of triples (where every number must compare to every other)"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1499292999, "post_id": 44936151, "comment_id": 76849999, "body": "See my answer, particularly the implementation in my edit."}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499295904, "post_id": 44936151, "comment_id": 76851018, "body": "Thanks a great approach! Let me try it later!"}], "tags": [], "owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "is_accepted": false, "score": 4, "last_activity_date": 1499290075, "last_edit_date": 1499290075, "creation_date": 1499289464, "answer_id": 44936151, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list/44936151#44936151", "title": "Code challenge: finding the divisible in a list", "body": "<p>You can use additional space to help yourself. After you sort the input list you should make a <code>map/dict</code> where the key is each element in the list and  value is a list of elements which are divisible by that in the list so you would have something like this \nassume sorted list is <code>list = [1,2,3,4,5,6]</code> your map would be</p>\n\n<pre><code> 1 -&gt; [2,3,4,5,6]\n 2-&gt; [4,6]\n 3-&gt;[6]\n 4-&gt;[]\n 5-&gt;[]\n 6-&gt;[]\n</code></pre>\n\n<p>now for every key in the map you find what it can divide and then you find what that divides, for example you know that</p>\n\n<pre><code>1 divides 2 and 2 divides 4 and 6, similarly 1 divides 3 and 3 divides 6\n</code></pre>\n\n<p>the complexity of sorting should be <code>O(nlogn)</code> and that of constructing the list should be better than <code>O(n^2)</code> (but I am not sure about this part) and then I am not sure about the complexity of when you are actually checking for multiples but I think this should be much much faster than a brute force <code>O(n^3)</code></p>\n\n<p>If someone could help me figure out the time complexity of this I would really appreciate it</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>You can make the <code>map</code> creation part faster by incrementing by <code>X</code> (and not 1) where <code>X</code> is the number in the list you are currently on since it is sorted.</p>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1499290135, "post_id": 44936285, "comment_id": 76848814, "body": "That&#39;s what his current code is doing. It&#39;s working correctly, just too slowly."}, {"owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1499290249, "post_id": 44936285, "comment_id": 76848865, "body": "It is not. The complexity is better than n&#178;, not n&#179;."}], "tags": [], "owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "is_accepted": false, "score": 0, "last_activity_date": 1499290055, "creation_date": 1499290055, "answer_id": 44936285, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list/44936285#44936285", "title": "Code challenge: finding the divisible in a list", "body": "<p>I'll give you just an idea, the implementation should be up to you:</p>\n\n<ol>\n<li>Initialize the global counter to zero.</li>\n<li>Sort the list, starting with smallest number.</li>\n<li>Create a list of integers (one entry per number with same index).</li>\n<li>Iterate through each number (index i), and do the following:</li>\n<li>Check for dividers at positions 0 to i-1.</li>\n<li>Store the number of dividers in the list at the position i.</li>\n<li>Fetch the number of dividers from the list for each divider, and add each number to the global counter.</li>\n<li>Unless you finished, go to 3rd.</li>\n<li>Your result should be in the global counter.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3367, "user_id": 3671397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee012426897a4e53e39de64efce42fd8?s=128&d=identicon&r=PG", "display_name": "miindlek", "link": "https://stackoverflow.com/users/3671397/miindlek"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1499291308, "post_id": 44936485, "comment_id": 76849332, "body": "@AdamSmith Sry, right ... I meant sum. I just updated the answer."}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499291402, "post_id": 44936485, "comment_id": 76849363, "body": "removing primes might not help that much if the list is long enough"}, {"owner": {"reputation": 3367, "user_id": 3671397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee012426897a4e53e39de64efce42fd8?s=128&d=identicon&r=PG", "display_name": "miindlek", "link": "https://stackoverflow.com/users/3671397/miindlek"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499291500, "post_id": 44936485, "comment_id": 76849405, "body": "@pyjg The solution is not removing just primes. It keeps all numbers that have a divisor."}, {"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1499295182, "post_id": 44936485, "comment_id": 76850807, "body": "Am I missing something here? You claim that sorting, which is <code>O(n log n)</code> is inefficient, then you propose to go through all combinations, which is <code>O(n^2)</code>. I get that the number of elements is small, so that the invisible constant term will be of great importance, but even with that in mind, this sounds like the wrong way to go."}, {"owner": {"reputation": 3367, "user_id": 3671397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee012426897a4e53e39de64efce42fd8?s=128&d=identicon&r=PG", "display_name": "miindlek", "link": "https://stackoverflow.com/users/3671397/miindlek"}, "reply_to_user": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1499295517, "post_id": 44936485, "comment_id": 76850905, "body": "@JohanL Well, you miss the fact that sorting the list is not the aim of this task. You still have to go to through the combinations, so you still have a complexity of <code>O(n^2)</code>."}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499363662, "post_id": 44936485, "comment_id": 76887195, "body": "Thanks for your suggestion! Sorry for overlooking your comment. I guess sorting is not a big problem. I tried on my computer. It can sort the worst case in the order of milliseconds but the algorithm to count takes roughly the order of seconds (even more with duplicated elements)."}], "tags": [], "owner": {"reputation": 3367, "user_id": 3671397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee012426897a4e53e39de64efce42fd8?s=128&d=identicon&r=PG", "display_name": "miindlek", "link": "https://stackoverflow.com/users/3671397/miindlek"}, "is_accepted": false, "score": 2, "last_activity_date": 1499291260, "last_edit_date": 1499291260, "creation_date": 1499291076, "answer_id": 44936485, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list/44936485#44936485", "title": "Code challenge: finding the divisible in a list", "body": "<p>I guess sorting the list is pretty inefficient. I would rather try to iteratively reduce the number of candidates. You could do that in two steps.</p>\n\n<p>At first filter all numbers that do not have a divisor.</p>\n\n<pre><code>from itertools import combinations\ncandidates = [max(pair) for pair in combinations(l, 2) if max(pair)%min(pair) == 0]\n</code></pre>\n\n<p>After that, count the number of remaining candidates, that do have a divisor.</p>\n\n<pre><code>result = sum(max(pair)%min(pair) == 0 for pair in combinations(candidates, 2))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499295868, "post_id": 44936497, "comment_id": 76851004, "body": "Thanks for the detailed reply! That lets me learn a lot. Sadly, the first one doesn&#39;t pass the speed test. For the second one, it runs incredibly fast on my computer! However, the numbers given in the list can repeat. Therefore, using the set function will eliminate them. I am still digesting the second one."}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499297521, "post_id": 44936497, "comment_id": 76851452, "body": "Oh, I also have some doubts regarding your first solution. I only learnt to use enumerate as &quot; list(enumerate(xx,xx))&quot;. What is the difference without list()?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499297987, "post_id": 44936497, "comment_id": 76851576, "body": "@pokfung <code>enumerate</code> produces an object of class <code>enumerate</code> which is an iterable (it defines <code>__iter__</code>, so you can loop over it). Lists are also iterable, so this is a Square vs Rectangle analogy (all squares are rects, but not all rects are squares...). <code>enumerate</code> objects cannot use list methods (<code>list.sort</code>, <code>list.insert</code>, <code>list.remove</code>, etc) because they&#39;re not lists, but you can iterate over them in a <code>for</code> loop the same way. Like all generator iterables, they are exhausted once you use them once, but that&#39;s all we need here."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499298609, "post_id": 44936497, "comment_id": 76851722, "body": "@pokfung try my <code>answer3</code> found <a href=\"https://repl.it/JPWc\" rel=\"nofollow noreferrer\">here</a>, it should correctly handle duplicate elements at the cost of a little speed."}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499298970, "post_id": 44936497, "comment_id": 76851803, "body": "Thank you for the information the code, Adam. But it seems that it didn&#39;t work well. I tried the case [1,1,1] and I should expect 1 as the output but it turns out to be 0. Let me dig into the details of the code later"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499299215, "post_id": 44936497, "comment_id": 76851849, "body": "@pokfung this answer expects a lucky triple <code>(j, k, l)</code> to be <code>l % k == 0 and k &amp; j == 0 and j &lt; k &lt; l</code>. If that isn&#39;t true, it breaks the logic of the rest of the function."}, {"owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "edited": false, "score": 0, "creation_date": 1499318029, "post_id": 44936497, "comment_id": 76856389, "body": "I don&#39;t quite understand. But the problem requires me to count [1,1,1] as a valid combination"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1499292805, "last_edit_date": 1499292805, "creation_date": 1499291133, "answer_id": 44936497, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list/44936497#44936497", "title": "Code challenge: finding the divisible in a list", "body": "<p>Your original code, for reference.</p>\n\n<pre><code>def answer(l):\n    l.sort()\n    cnt = 0\n    if len(l) == 2:\n        return cnt\n    for i in range(len(l)-2):\n        for j in range(1,len(l)-1-i):\n            if (l[i+j]%l[i] == 0):\n                for k in range(1,len(l)-j-i):\n                    if (l[i+j+k]%l[i+j] == 0):\n                        cnt += 1\n\n    return cnt\n</code></pre>\n\n<p>There are a number of misimplementations here, and with just a few tweaks we can probably get this running much faster. Let's start:</p>\n\n<pre><code>def answer(lst):  # I prefer not to use `l` because it looks like `1`\n    lst.sort()\n    count = 0  # use whole words here. No reason not to.\n    if len(lst) == 2:\n        return count\n    for i, first in enumerate(lst):\n        # using `enumerate` here means you can avoid ugly ranges and\n        # saves you from a look up on the list afterwards. Not really a\n        # performance hit, but definitely looks and feels nicer.\n        for j, second in enumerate(lst[i+1:], start=i+1):\n            # this is the big savings. You know since you sorted the list that\n            # lst[1] can't divide lst[n] if n&gt;1, but your code still starts\n            # searching from lst[1] every time! Enumerating over `l[i+1:]`\n            # cuts out a lot of unnecessary burden.\n            if second % first == 0:\n                # see how using enumerate makes that look nicer?\n                for third in lst[j+1:]:\n                    if third % second == 0:\n                        count += 1\n    return count\n</code></pre>\n\n<p>I bet that on its own will pass your speed test, but if not, you can check for membership instead. In fact, using a set here is probably a great idea!</p>\n\n<pre><code>def answer2(lst):\n    s = set(lst)\n    limit = max(s)  # we'll never have a valid product higher than this\n    multiples = {}  # accumulator for our mapping\n    for n in sorted(s):\n        max_prod = limit // n  # n * (max_prod+1) &gt; limit\n        multiples[n] = [n*k for k in range(2, max_prod+1) if n*k in s]\n        # in [1,2,3,4,5,6]:\n        # multiples = {1: [2, 3, 4, 5, 6],\n        #              2: [4, 6],\n        #              3: [6],\n        #              4: [],\n        #              5: [],\n        #              6: []}\n\n    # multiples is now a mapping you can use a Depth- or Breadth-first-search on\n    triples = sum(1 for j in multiples\n                    for k in multiples.get(j, [])\n                    for l in multiples.get(k, []))\n    # This basically just looks up each starting value as j, then grabs\n    # each valid multiple and assigns it to k, then grabs each valid\n    # multiple of k and assigns it to l. For every possible combination there,\n    # it adds 1 more to the result of `triples`\n    return triples\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4550, "user_id": 573420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd977ec3fe1f515ad6f496a17eed88de?s=128&d=identicon&r=PG", "display_name": "Peter Taylor", "link": "https://stackoverflow.com/users/573420/peter-taylor"}, "edited": false, "score": 1, "creation_date": 1499416201, "post_id": 44955971, "comment_id": 76907003, "body": "There&#39;s no need to sort, and the counts can be memoised. <a href=\"https://tio.run/##bVBLDoMgEN17itk0gdYm4LKJJzEuNGKL2tEgxnp6OvhrjH0r3oc3DN1kXy1GzhWqhAz7URnW8EcABIQYGoXEZ1qORQh5TWIiUrgChtthsVsDGjSCyfCpGK4lHh9flOh0F3y2@p/1mOZ8lR5EXVLPxXsxiGN@fR1NgFsM8uTlNZX9LKPsYBD64c0YW@/dQXJahVF0Y6eFOA@Czmi0@0fp3rLFlSFEQkjKOPcF\" rel=\"nofollow noreferrer\">This</a> is an implementation I wrote before seeing your answer."}], "tags": [], "owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "is_accepted": false, "score": 3, "last_activity_date": 1499366693, "last_edit_date": 1499366693, "creation_date": 1499364029, "answer_id": 44955971, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list/44955971#44955971", "title": "Code challenge: finding the divisible in a list", "body": "<p>Thank you guys for all your suggestions. They are brilliant. But it seems that I still can't pass the speed test or I cannot handle with duplicated elements.</p>\n\n<p>After discussing with my friend, I have just come up with another solution. It should be O(n^2) and I passed the speed test. Thanks all!!</p>\n\n<pre><code>def answer(lst):\n    lst.sort()\n    count = 0\n    if len(lst) == 2:\n        return count\n\n    #for each middle element, count the divisors at the front and the multiples at the back. Then multiply them.\n    for i, middle in enumerate(lst[1:len(lst)-1], start = 1):\n        countfirst = 0\n        countthird = 0\n        for first in (lst[0:i]):\n            if middle % first == 0:\n                countfirst += 1\n        for third in (lst[i+1:]):\n            if third % middle == 0:\n                countthird += 1\n        count += countfirst*countthird\n\n    return count\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 8261448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cacc686f992dcf73fed50b25620b1a2?s=128&d=identicon&r=PG&f=1", "display_name": "pokfung", "link": "https://stackoverflow.com/users/8261448/pokfung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 5, "score": 5, "last_activity_date": 1499366693, "creation_date": 1499288674, "last_edit_date": 1499289492, "question_id": 44935955, "link": "https://stackoverflow.com/questions/44935955/code-challenge-finding-the-divisible-in-a-list", "title": "Code challenge: finding the divisible in a list", "body": "<p>I am playing a code challenge. Simply speaking, the problem is:</p>\n\n<blockquote>\n  <p>Given a list L (max length is of the order of 1000) containing positive integers. \n  Find the number of \"Lucky Triples\", which is <code>L[i]</code> divides <code>L[j]</code>, and <code>L[j]</code> divides <code>L[k]</code>.</p>\n</blockquote>\n\n<p>for example, <code>[1,2,3,4,5,6]</code> should give the answer <code>3</code> because <code>[1,2,4]</code>, <code>[1,2,6]</code>,<code>[1,3,6]</code></p>\n\n<p><strong>My attempt:</strong></p>\n\n<ol>\n<li>Sort the list. (let say there are n elements)</li>\n<li>3 For loops: <code>i</code>, <code>j</code>, <code>k</code> (<code>i</code> from <code>1</code> to <code>n-2</code>), (<code>j</code> from <code>i+1</code> to <code>n-1</code>), (<code>k</code> from <code>j+1</code> to n)</li>\n<li>only if <code>L[j] % L[i] == 0</code>, the k <code>for loop</code> will be executed</li>\n</ol>\n\n<p>The algorithm seems to give the correct answer. But the challenge said that my code exceeded the time limit. I tried on my computer for the list <code>[1,2,3,...,2000]</code>, count = 40888(I guess it is correct). The time is around 5 second.</p>\n\n<p>Is there any faster way to do that?</p>\n\n<p>This is the code I have written in python.</p>\n\n<pre><code>def answer(l):\n    l.sort()\n    cnt = 0\n    if len(l) == 2:\n        return cnt\n    for i in range(len(l)-2):\n        for j in range(1,len(l)-1-i):\n            if (l[i+j]%l[i] == 0):\n                for k in range(1,len(l)-j-i):\n                    if (l[i+j+k]%l[i+j] == 0):\n                        cnt += 1\n\n    return cnt\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "svg", "xml-parsing", "beautifulsoup"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1499290406, "post_id": 44935930, "comment_id": 76848938, "body": "Try <code>with open(&#39;worldHigh.svg&#39;,&#39;rb&#39;) as f:</code>. If it works, I&#39;ll add an explanation why, later."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "edited": false, "score": 0, "creation_date": 1499291026, "post_id": 44936457, "comment_id": 76849203, "body": "Oh, you glorious and amazing human being. It does now load, and the prettify() prints properly. However, the SVG file doesn&#39;t work entirely, it now fails wherever there is a special character (e.g. line 61, title=&quot;C&#244;te d&#39;Ivoire&quot; or line 70, title=&quot;Cura&#231;ao&quot;). It works if I remove the special characters, which I can do -- but oddly, they&#39;re present in the low-res map which works fine. Happy to rest here, and I am extremely thankful, but if there&#39;s a quick fix you know of for this I&#39;d love it too."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "edited": false, "score": 0, "creation_date": 1499291203, "post_id": 44936457, "comment_id": 76849289, "body": "In my download of <code>worldHigh.svg</code>, I get different line numbers. I suspect that you have edited your copy. Try again with a fresh download."}, {"owner": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "edited": false, "score": 0, "creation_date": 1499291813, "post_id": 44936457, "comment_id": 76849520, "body": "Re-downloaded, and made a simple script that reads (as above), then prints to a new file. <code>with open(&#39;pyParsedWorldHigh.svg&#39;,&#39;w+&#39;) as f:      f.write(soup.prettify()) </code> (including the necessary line break). Indeed the line numbers are different by one, but it still results in an error."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "edited": false, "score": 0, "creation_date": 1499359577, "post_id": 44936457, "comment_id": 76884710, "body": "That is a separate error, worthy of its own question, but the solution might be: <code>with open(&#39;pyParsedWorldHigh.svg&#39;,&#39;w&#39;, encoding=&quot;utf8&quot;) as f: f.write(soup.prettify())</code> @RobertRedelmeier"}, {"owner": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "edited": false, "score": 0, "creation_date": 1499392544, "post_id": 44936457, "comment_id": 76898122, "body": "I&#39;ll check it out, but definitely not vital. Thanks again for all your help, it was really generous and deeply deeply appreciated."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1499290934, "creation_date": 1499290934, "answer_id": 44936457, "question_id": 44935930, "link": "https://stackoverflow.com/questions/44935930/failing-to-parse-1-mb-xml-file-with-bs4/44936457#44936457", "title": "Failing to parse 1 MB XML File with BS4", "body": "<p>The XML parser needs the raw sequence of unencoded bytes. Use <code>open(...,'rb')</code> when parsing XML.</p>\n\n<p>The reason why one worked and the other didn't is <code>worldHigh.svg</code> has a BOM at the beginning of the file.</p>\n"}], "owner": {"reputation": 63, "user_id": 7463465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6cad7eac46ea71e503e80c514f2b9c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Redelmeier", "link": "https://stackoverflow.com/users/7463465/robert-redelmeier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 44936457, "answer_count": 1, "score": 0, "last_activity_date": 1499290934, "creation_date": 1499288570, "last_edit_date": 1499289239, "question_id": 44935930, "link": "https://stackoverflow.com/questions/44935930/failing-to-parse-1-mb-xml-file-with-bs4", "title": "Failing to parse 1 MB XML File with BS4", "body": "<p>I have two SVG maps of the world, downloaded <a href=\"https://www.amcharts.com/svg-maps/?map=world\" rel=\"nofollow noreferrer\">here</a>. My goal is to do some editing of these maps in python, working with them via BeautifulSoup4. This works perfectly with the low-res file (132.5 Kb). However, the BS4 parser (using lxml) fails entirely when I attempt to use it with the high-res file (1.2 Mb).</p>\n\n<p>The code is as such:</p>\n\n<pre><code>    import lxml\n    from bs4 import BeautifulSoup as Soup\n    with open('worldHigh.svg','r') as f:\n        handler = f.read()\n        soup = Soup(handler,'xml')\n        print(soup.prettify())\n</code></pre>\n\n<p>When I run that with the worldHigh.svg fifle, the only thing that is printed is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p>When I run the equivalent, but changing worldHigh.svg for worldLow.svg, it prints the XML correctly (as desired). </p>\n\n<p>Both SVG files work fine when opened by themselves (i.e., they show the map). However, one fails when I try to parse it, the other succeeds. I am at a loss for what is going wrong. I would understand if the parser fails at large sizes, but 1.2 MB does not seem large. </p>\n"}, {"tags": ["python", "python-2.7", "unit-testing", "mocking"], "answers": [{"tags": [], "owner": {"reputation": 1968, "user_id": 4378118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8D5PM.jpg?s=128&g=1", "display_name": "Enrique Saez", "link": "https://stackoverflow.com/users/4378118/enrique-saez"}, "is_accepted": false, "score": 0, "last_activity_date": 1499624120, "creation_date": 1499624120, "answer_id": 44999562, "question_id": 44935867, "link": "https://stackoverflow.com/questions/44935867/using-magicmock-to-test-the-inner-components-of-a-method/44999562#44999562", "title": "Using MagicMock to test the inner components of a method", "body": "<p>If you are making use of <a href=\"https://docs.pytest.org/en/latest/contents.html\" rel=\"nofollow noreferrer\">pytest</a> you can <a href=\"https://docs.pytest.org/en/latest/assert.html#assertions-about-expected-exceptions\" rel=\"nofollow noreferrer\">assert about expected exceptions</a> as follows:</p>\n\n<pre><code>@patch('Foo._getBars', return_value=[])\ndef test_addFoo_exception(self):\n    foo = Foo()\n    with pytest.raises(SomeException):\n        foo.addFoo(Mock(), Mock())\n</code></pre>\n\n<p>As snippet above shows, by mocking <code>_getBars</code> you are in control of what it is returned and can therefore force the condition that triggers the exception in your code, in this case an empty list.</p>\n\n<p>I have written a short <a href=\"https://esaezgil.com/post/unittesting_pitfalls/\" rel=\"nofollow noreferrer\">post with common unit testing pitfalls in Python</a> that you might find useful.</p>\n"}], "owner": {"reputation": 5322, "user_id": 1492471, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42d6fb74208dc859b1f128268d6229cd?s=128&d=identicon&r=PG", "display_name": "hax0r_n_code", "link": "https://stackoverflow.com/users/1492471/hax0r-n-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499624120, "creation_date": 1499288269, "question_id": 44935867, "link": "https://stackoverflow.com/questions/44935867/using-magicmock-to-test-the-inner-components-of-a-method", "title": "Using MagicMock to test the inner components of a method", "body": "<p>I'm new to using the mock library and unit testing in general.  I think I understand how the mock library works, but I think there is something wrong with my approach.</p>\n\n<p>Lets say I have a class <code>Foo</code> that has a method <code>addFoo(bar1, bar2)</code> and <code>addFoo</code> calls other 'private' methods within foo, but can also raise exceptions at various parts in the code... i.e.</p>\n\n<pre><code>class Foo:\n    def __init__(self):\n         # This creates lots of dependencies\n\n    def _inner1(self, bar):\n        if this_doesnt_work:\n           return None\n        return modified_bar1\n\n    def _inner2(self, bar2):\n        if this_doesnt_work:\n           return None\n        return modified_bar2\n\n    def addFoo(bar1, bar2):\n        if self._inner1(bar1) and self._inner2(bar2):\n           #do something\n        else:\n           raise SomeException\n</code></pre>\n\n<p>When I unit test, what I currently do is mock out <code>Foo.__init__</code> in my unit test setup and set <code>return_value</code> to None.  This works and allows me to run tests against my methods in the class without all the external dependencies and just mock any class attributes with my mocked <code>Foo.__init__</code> instance. </p>\n\n<p>After that is done if I wanted to unit test <code>addFoo</code> I would do the following (skipping a bunch of steps):</p>\n\n<pre><code>@patch.object(Foo, '_inner2')\n@patch.object(Foo, '_inner1')\ndef test_inner1_exception(self, mock_inner1, mock_inner2):\n    mock_inner1.side_effect = Exception\n    # then do some asserts to make sure it worked\n</code></pre>\n\n<p><strong>QUESTION</strong>\nHow do I test an exception in <code>addFoo</code> if the code looks like this:</p>\n\n<pre><code>def addFoo(bar1, bar2):\n    bars = self._getBars() #something that returns a list\n    my_modified_bar_list = []\n    for bar in bars:\n        my_modified_bar_list.append(self._inner1(bar))\n\n    if len(my_modified_bar_list) == 0:\n        raise SomeException\n</code></pre>\n\n<p>In this instance how do I test <code>SomeException</code> when it is dependent upon the values produced by some array within my method?</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 5134, "user_id": 1134881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k4bte.jpg?s=128&g=1", "display_name": "SpeedCoder5", "link": "https://stackoverflow.com/users/1134881/speedcoder5"}, "edited": false, "score": 0, "creation_date": 1553089263, "post_id": 44935842, "comment_id": 97255583, "body": "<code>import</code> must be run from a python prompt, not the Linux command prompt.  Try opening a Linux terminal command prompt in the folder where you pulled the repo then  <code>python -c &quot;import mnist_loader;print(len(mnist_loader.load_data()))&quot;</code>.  Or type <code>python</code> to start a python prompt, then try <code>import mnist_loader</code>."}], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 3105277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc048784bd7d4ef2b56b75763914c40?s=128&d=identicon&r=PG&f=1", "display_name": "jon5477", "link": "https://stackoverflow.com/users/3105277/jon5477"}, "is_accepted": false, "score": 0, "last_activity_date": 1499290738, "creation_date": 1499290738, "answer_id": 44936415, "question_id": 44935842, "link": "https://stackoverflow.com/questions/44935842/attributeerror-modulespec-object-has-no-attribute-load-data-wrapper/44936415#44936415", "title": "AttributeError: &#39;ModuleSpec&#39; object has no attribute &#39;load_data_wrapper&#39;", "body": "<p>Been a while since I have worked with Python, but I have some ideas as to what would cause the specific errors you are seeing. First I would suggest setting a <code>PYTHON_PATH</code> environment variable with the path you have that contains the module you want to import, this does not require administrator privileges fortunately. As for the load_data_wrapper attribute, you might have to do a from <code>from mnist_loader import *</code> to import all the functions inside the mnist_loader module.</p>\n"}], "owner": {"reputation": 31, "user_id": 8261429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a1814e39a7550b295dc9c4d2c41589?s=128&d=identicon&r=PG&f=1", "display_name": "Devon.C", "link": "https://stackoverflow.com/users/8261429/devon-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499290738, "creation_date": 1499288178, "last_edit_date": 1499288672, "question_id": 44935842, "link": "https://stackoverflow.com/questions/44935842/attributeerror-modulespec-object-has-no-attribute-load-data-wrapper", "title": "AttributeError: &#39;ModuleSpec&#39; object has no attribute &#39;load_data_wrapper&#39;", "body": "<p>This is a bit long so bear with me.</p>\n\n<p>I am trying to learn both Python and Linux and am very new to both. I am currently doing some reading on deep learning from the following:</p>\n\n<p><a href=\"http://neuralnetworksanddeeplearning.com/chap1.html\" rel=\"nofollow noreferrer\">http://neuralnetworksanddeeplearning.com/chap1.html</a></p>\n\n<p>I am attempting to import the <code>mnist_loader</code> package to use the associated data for testing the script that was previously written. However, upon typing <code>import mnist_loader</code> into the Linux command line, I was given the following:</p>\n\n<p>\"the program 'import' can be found in the following packages:\" </p>\n\n<p>at which point it listed some packages. Because I'm new to Linux and I don't have admin privileges, I decided to go a route that I understood better; that is to create a new python script and simply use the import command within (which has worked in all previous attempts).</p>\n\n<p>I created a python script and tried <code>import mnist_loader</code> and received the following error:</p>\n\n<blockquote>\n  <p>\"ModuleNotFoundError: No module named 'mnist_loader'\"</p>\n</blockquote>\n\n<p>I then checked my C drive and found that the file was indeed there. Here is a link to the Git repository where the files may be found:</p>\n\n<p><a href=\"https://github.com/MichalDanielDobrzanski/DeepLearningPython35\" rel=\"nofollow noreferrer\">https://github.com/MichalDanielDobrzanski/DeepLearningPython35</a></p>\n\n<p>Next I moved on to trying to directly input the path to the file as follows:</p>\n\n<pre><code>import importlib.util\n\nmnist_loader = importlib.util.spec_from_file_location(\"mnist_loader\",r\"C:\\Users\\XXXXXX\\Documents\\neural-networks-and-deep-learning-master\\neural-networks-and-deep-learning-master\\src\\mnist_loader.py\")\n\ntraining_data, validation_data, test_data = mnist_loader.load_data_wrapper()\n</code></pre>\n\n<p>However, this produced the following error:</p>\n\n<blockquote>\n  <p>\"AttributeError: 'ModuleSpec' object has no attribute 'load_data_wrapper'\"</p>\n</blockquote>\n\n<p>Note: the last line is used to collect the necessary data from the nist files.</p>\n\n<p>I am running out of thoughts at this point and would love some feedback on all my \"wrongdoings\" up till now.</p>\n\n<p>Thanks in advance!</p>\n\n<p>P.S. It is worth noting that the book uses a package designed for Python 2.X whereas I am using 3.6. The readme provided by the book file location mentioned a different location where a Python 3.6 version could be found which is what I am going with.</p>\n"}, {"tags": ["python", "c++", "c++11", "memory-leaks", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 5, "creation_date": 1499445807, "post_id": 44935830, "comment_id": 76926900, "body": "You need to show a <i>minimal</i> complete example we can try with a debugger on our own computers that reproduces the issue and not random incomplete fragments of a large fragment."}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1499454800, "post_id": 44935830, "comment_id": 76931451, "body": "@Flexo Sorry, the complete setup is pretty extensive and likely overkill. I&#39;ve updated my question with the source files for the <code>Matrix</code> class and how they&#39;re being utilized by the python module. I&#39;ve also spent a lot of time reading about pointers and dynamic memory allocation and updated my question with related concerns. Thanks for your time."}, {"owner": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499786647, "post_id": 44935830, "comment_id": 77051341, "body": "I am not sure how your <code>Matrix.cpp</code> compiles without error. In <code>Matrix::lookForPvalue</code> you do <code>map&lt;long long, double&gt; nbocc = calcDistribWithMapMinMax(min,max);</code> which should cause compilation error since LHS <code>nbocc</code> is not a type of <code>map&lt;long long, double&gt; *</code> which is what <code>calcDistribWithMapMinMax</code> returns."}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 0, "creation_date": 1499786795, "post_id": 44935830, "comment_id": 77051475, "body": "That&#39;s a typo, my mistake, I will edit the code."}, {"owner": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499786970, "post_id": 44935830, "comment_id": 77051612, "body": "@JaredAndrews I am no expert in SWIG, but, could you try removing <code>%nodefaultdtor Matrix;</code> and see if you can still reproduce the memory leak?"}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "reply_to_user": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499787181, "post_id": 44935830, "comment_id": 77051786, "body": "@Griffin Yes, it will still be there. I added that after trying to explicitely define a destructor, but the problem existed prior to that. None of the <code>Matrix</code> attributes themselves consume much memory and appear properly cleaned up on the Python side."}, {"owner": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 1, "creation_date": 1499787797, "post_id": 44935830, "comment_id": 77052295, "body": "@JaredAndrews How have you checked memory is properly cleaned up on Pythod side? Can you try tracing the leak with <a href=\"http://tech.labs.oliverwyman.com/blog/2008/11/14/tracing-python-memory-leaks/\" rel=\"nofollow noreferrer\">this suggested tool</a>?"}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "reply_to_user": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499788134, "post_id": 44935830, "comment_id": 77052520, "body": "@Griffin. This looks useful and I&#39;ll test it out. I used <a href=\"https://pythonhosted.org/Pympler/\" rel=\"nofollow noreferrer\">Pympler</a> to check out the size of objects while debugging. I will try tracing it will this tool as well."}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "reply_to_user": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499793773, "post_id": 44935830, "comment_id": 77056022, "body": "@Griffin So using both that tool and Pympler yield basically the same result. <code>Matrix</code> objects themselves have a very small memory footprint and are deleted properly, <i>at least</i> as can be seen from the python side. <a href=\"http://i.imgur.com/jLyXwwU.png\" rel=\"nofollow noreferrer\">This Pympler image</a> shows all <code>Matrix</code> objects right after instantiation and then deletion. I think it&#39;s going to be difficult to assay the leak from the python side, so I&#39;m trying to get Valgrind to play nice and see what it yields."}, {"owner": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499851130, "post_id": 44935830, "comment_id": 77080298, "body": "@JaredAndrews could you share what you have with Valgrind found with us?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1499904194, "post_id": 44935830, "comment_id": 77111853, "body": "This can/ <b>should</b> be debugged outside <i>Python</i>. Simply add a <i>main.cpp</i> file to the &quot;project&quot;, that instantiates the <code>Matrix</code> class and call its methods. The rule is simple: for every <code>new</code> call there should be one <code>delete[]</code> counterpart (brackets might not be necessary). E.g. all matrix type (double pointer - <code>**</code>) variables that are allocated must be freed (like <code>matInt</code> from destructor). <code>mattemp</code> on the other hand, produces such a memory leak (there might be more)."}, {"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1499930277, "post_id": 44935830, "comment_id": 77120214, "body": "A general comment: you could avoid the use of <code>new</code>/<code>delete</code> here, and use <code>std::vector</code> or <code>std::array</code> instead, then you are likely to avoid memory leaks."}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "reply_to_user": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1499962760, "post_id": 44935830, "comment_id": 77144740, "body": "@Griffin Valgrind confirmed the memory leak, but also yielded a ton of noise even with the python suppressions. I&#39;m creating a purely c++ example as suggested so that I can test the solution in Some Who Call Me Tim&#39;s answer below."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1499985866, "post_id": 44935830, "comment_id": 77156664, "body": "You say it was written in 2007 so doesn\u2019t have C++11 tricks, but is there a reason you couldn\u2019t write it to use those now? You could get rid of almost all the explicit <code>new</code>s and <code>delete</code>s if you did that, and the fewer of those you have the fewer chances there are for memory leaks to sneak in."}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 0, "creation_date": 1499786648, "post_id": 45020696, "comment_id": 77051343, "body": "Thanks for the first answer. I actually did just what you suggested, but the <code>Matrix</code> object isn&#39;t actually the issue, but rather the extensive use of pointers to maps of maps and issues dereferencing them properly.  I looked at other options (Boost, Cython, ctypes among them), but Swig seemed like the most straightforward one."}], "tags": [], "owner": {"reputation": 398, "user_id": 459189, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d785e58e02fb88fd844b38467fd0cd3?s=128&d=identicon&r=PG", "display_name": "Fruch", "link": "https://stackoverflow.com/users/459189/fruch"}, "is_accepted": false, "score": 1, "last_activity_date": 1499717195, "creation_date": 1499717195, "answer_id": 45020696, "question_id": 44935830, "link": "https://stackoverflow.com/questions/44935830/c-memory-leak-in-swig-python-module/45020696#45020696", "title": "C++ Memory Leak in Swig Python Module", "body": "<p>to answer your question, yes you can use delete on diffrent function or method. and you should, any memory you allocate in c/c++ you need to free (delete in c++ lingo)</p>\n\n<p>python isn't aware of this memory, it's not a python object, so gc.collect() won't help.\nyou should add a c function that would take a Matrix struct and free/delete the memory use on that struct. and call it from python, swig in not handling memory allocation (only for the objects swig creates)</p>\n\n<p>I would recommended looking into newer packages other then swig, like cython or cffi (or even NumPy matrix handling, I've heard he's good at)</p>\n"}, {"comments": [{"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 0, "creation_date": 1499962421, "post_id": 45081898, "comment_id": 77144546, "body": "Thanks. Yes, SWIG does just that, and at this point, I&#39;m quite certain the <code>Matrix</code> class is being cleaned up properly.  I had contemplated your first approach and think it&#39;s likely the best solution. I had come across shared pointers previously, but this isn&#39;t c++11, so it&#39;s not an option unless I use something like <code>boost</code>, which I&#39;m less inclined to do.  The vector usage is also a good idea and something I will try to implement."}], "tags": [], "owner": {"reputation": 991, "user_id": 7472328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ddbe555b433ddd61621c5b5697f421?s=128&d=identicon&r=PG&f=1", "display_name": "Some Who Call Me Tim", "link": "https://stackoverflow.com/users/7472328/some-who-call-me-tim"}, "is_accepted": false, "score": 2, "last_activity_date": 1499952115, "creation_date": 1499952115, "answer_id": 45081898, "question_id": 44935830, "link": "https://stackoverflow.com/questions/44935830/c-memory-leak-in-swig-python-module/45081898#45081898", "title": "C++ Memory Leak in Swig Python Module", "body": "<p>Two questions are in play here: managing memory in C++, and then nudging the C++ side from the Python side to clean up. I'm guessing SWIG is generating a wrapper for the Matrix destructor and calling the destructor at some useful time. (I might convince myself of that by having the dtor make some noise.) That should handle the second question.</p>\n\n<p>So let's focus on the C++ side. Passing around a bare <code>map *</code> is a well-known invitation to mischief. Here are two alternatives. </p>\n\n<p>Alternative one: make the map a member of <code>Matrix</code>. Then it gets cleaned up automatically by <code>~Matrix()</code>. This is the easiest thing. If the lifetime of the map does not exceed the lifetime of the Matrix, then this route will work.</p>\n\n<p>Alternative two: if the map needs to persist after the Matrix object, then instead of passing around <code>map *</code>, use a shared pointer, <code>std::shared_ptr&lt;map&gt;</code>. The shared pointer reference counts the pointee (i.e. the dynamically allocated Matrix). When the ref count goes to zero, it deletes the underlying object. </p>\n\n<p>They both build on the rule to allocate resources (memory in this case) in constructors and deallocate in destructors. This is called RAII (Resource Allocation Is Initialization). Another application of RAII in your code would be to use <code>std::vector&lt;long long&gt; offsets</code> instead of <code>long long *offsets</code> etc. Then you just resize the vectors as needed. When the Matrix is destroyed, the vectors are deleted with no intervention on your part. For the matrix, you could use a vector of vectors, and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 1, "creation_date": 1504293150, "post_id": 45091990, "comment_id": 78974280, "body": "Though all of these comments and answers were helpful, this one was the one that ultimately best addressed the issues I was facing.  As previously suggested by @Flexo and others, I created a minimal example in c++ that still had the issue and used <code>valgrind</code> to find where the leaks were. This allowed me to systematically remove/fix all <code>new</code> and <code>delete</code> statements that we causing the leaks. Thanks again to everyone for your help. The source code for the corrected program can be seen here: <a href=\"https://github.com/j-andrews7/pytfmpval\" rel=\"nofollow noreferrer\">github.com/j-andrews7/pytfmpval</a>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 0, "creation_date": 1504294207, "post_id": 45091990, "comment_id": 78974686, "body": "@JaredAndrews I\u2019m glad I could help! One tip which I forgot to mention here is that it&#39;s often easier and less error-prone to use C++ classes like <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> instead of trying to do memory management yourself; unfortunately, I don\u2019t know if those play nicely with SWIG."}, {"owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "edited": false, "score": 1, "creation_date": 1504294482, "post_id": 45091990, "comment_id": 78974791, "body": "Yeah, they&#39;re supported (supposedly, though I read plenty of threads that had issues) but I really wasn&#39;t looking forward to reworking everything with the different pointers - this was my first contact with C++ and this was meant to be a quick task that turned into something that was much more of a headache. If I ever wrote anything from scratch, I&#39;d be sure to utilize the features of C++11 though. Thanks again!"}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1500066682, "last_edit_date": 1500066682, "creation_date": 1499985669, "answer_id": 45091990, "question_id": 44935830, "link": "https://stackoverflow.com/questions/44935830/c-memory-leak-in-swig-python-module/45091990#45091990", "title": "C++ Memory Leak in Swig Python Module", "body": "<p>It\u2019s hard to follow what\u2019s happening, but I\u2019m pretty sure your matrices are not being cleaned up correctly.</p>\n\n<p>In <code>readMatrix</code>, you have a loop over <code>j</code> which contains the line <code>this-&gt;mat[j] = new double[this-&gt;length];</code>. This allocates memory, which <code>mat[j]</code> points to. This memory needs to be freed at some point, by calling <code>delete[] mat[j]</code> (or some other loop variable). However, in the destructor, you just call <code>delete[] mat</code>, which leaks all of the arrays inside it.</p>\n\n<p>Some general suggestions on cleaning this up:</p>\n\n<ol>\n<li>If you know the bounds of an array, such as that <code>matInt</code> will always have a length of 4, you should declare it with that fixed length (<code>long long* matInt[4]</code> will make an array of four pointers to <code>long long</code>, each of which could be a pointer to an array); this will mean you don\u2019t need to either <code>new</code> or <code>delete</code> it.</li>\n<li>If you have a double pointer like <code>double ** mat</code>, and you allocate both the first and second layers of pointers with <code>new[]</code>, you need to deallocate the inner layer with <code>delete[]</code> (and you need to do it before you <code>delete[]</code> the outer layer).</li>\n<li>If you still have trouble, more of your code will be clear if you remove the methods which don\u2019t seem relevant to the problem. For example, <code>toLogOddRatio</code> doesn\u2019t allocate or deallocate memory at all; it almost certainly isn\u2019t contributing to the problem and you can remove it from the code you post here (once you\u2019ve removed the parts which you think don\u2019t contribute, test again to make sure the problem\u2019s still there; if not then you know that it was one of those parts somehow causing the leak).</li>\n</ol>\n"}], "owner": {"reputation": 232, "user_id": 4438552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbf7db222a1b26ef78becec9676969a2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Andrews", "link": "https://stackoverflow.com/users/4438552/jared-andrews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 2, "accepted_answer_id": 45091990, "answer_count": 3, "score": 2, "last_activity_date": 1504294909, "creation_date": 1499288147, "last_edit_date": 1504294909, "question_id": 44935830, "link": "https://stackoverflow.com/questions/44935830/c-memory-leak-in-swig-python-module", "title": "C++ Memory Leak in Swig Python Module", "body": "<h2>Background</h2>\n\n<p>I have created a <code>python</code> module that wraps a <code>c++</code> program using <code>SWIG</code>. It works just fine, but it has a pretty serious memory leak issue that I think is a result of poorly handled pointers to large <code>map</code> objects. I have very little experience with <code>c++</code>, and I have questions as to whether <code>delete[]</code> can be used on an object created with <code>new</code> in a different function or method.</p>\n\n<p>The program was written in 2007, so excuse the lack of useful <code>c++11</code> tricks. </p>\n\n<hr>\n\n<p>The <code>swig</code> extension basically just wraps a single c++ class (<code>Matrix</code>) and a few functions.</p>\n\n<p><strong>Matrix.h</strong></p>\n\n<pre><code>#ifndef __MATRIX__\n#define __MATRIX__\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;cmath&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n#include \"FileException.h\"\n#include \"ParseException.h\"\n\n#define ROUND_TO_INT(n) ((long long)floor(n))\n#define MIN(a,b) ((a)&lt;(b)?(a):(b))\n#define MAX(a,b) ((a)&gt;(b)?(a):(b))\n\nusing namespace std;\n\nclass Matrix {\n\nprivate:\n\n\n  /**\n  * Split a string following delimiters\n   */\n  void tokenize(const string&amp; str, vector&lt;string&gt;&amp; tokens, const string&amp; delimiters) {\n\n    // Skip delimiters at beginning.\n    string::size_type lastPos = str.find_first_not_of(delimiters, 0);\n    // Find first \"non-delimiter\".\n    string::size_type pos     = str.find_first_of(delimiters, lastPos);\n\n    while (string::npos != pos || string::npos != lastPos)\n    {\n      // Found a token, add it to the vector.\n      tokens.push_back(str.substr(lastPos, pos - lastPos));\n      // Skip delimiters.  Note the \"not_of\"\n      lastPos = str.find_first_not_of(delimiters, pos);\n      // Find next \"non-delimiter\"\n      pos = str.find_first_of(delimiters, lastPos);\n    }\n  }\n\n\npublic:\n\n\n  // used for efficiency tests\n  long long totalMapSize;\n  long long totalOp;\n\n  double ** mat; // the matrix as it is stored in the matrix file\n  int length;\n  double granularity; // the real granularity used, greater than 1\n  long long ** matInt; // the discrete matrix with offset\n  double errorMax;\n  long long *offsets; // offset of each column\n  long long offset; // sum of offsets\n  long long *minScoreColumn; // min discrete score at each column\n  long long *maxScoreColumn; // max discrete score at each column\n  long long *sum;\n  long long minScore;  // min total discrete score (normally 0)\n  long long maxScore;  // max total discrete score\n  long long scoreRange;  // score range = max - min + 1\n  long long *bestScore;\n  long long *worstScore;\n  double background[4];\n\n  Matrix() {\n    granularity = 1.0;\n    offset = 0;\n    background[0] = background[1] = background[2] = background[3] = 0.25;\n  }\n\n  Matrix(double pA, double pC, double pG, double pT) {\n    granularity = 1.0;\n    offset = 0;\n    background[0] = pA;\n    background[1] = pC;\n    background[2] = pG;\n    background[3] = pT;  \n  }\n\n  ~Matrix() {\n      for (int k = 0; k &lt; 4; k++ ) {\n        delete[] matInt[k];\n      }\n      delete[] matInt;\n      delete[] mat;\n      delete[] offsets;\n      delete[] minScoreColumn;\n      delete[] maxScoreColumn;\n      delete[] sum;\n      delete[] bestScore;\n      delete[] worstScore;\n  }\n\n\n  void toLogOddRatio () {\n    for (int p = 0; p &lt; length; p++) {\n      double sum = mat[0][p] + mat[1][p] + mat[2][p] + mat[3][p];\n      for (int k = 0; k &lt; 4; k++) {\n        mat[k][p] = log((mat[k][p] + 0.25) /(sum + 1)) - log (background[k]); \n      }\n    }\n  }\n\n  void toLog2OddRatio () {\n    for (int p = 0; p &lt; length; p++) {\n      double sum = mat[0][p] + mat[1][p] + mat[2][p] + mat[3][p];\n      for (int k = 0; k &lt; 4; k++) {\n        mat[k][p] = log2((mat[k][p] + 0.25) /(sum + 1)) - log2 (background[k]); \n      }\n    }\n  }\n\n  /**\n    * Transforms the initial matrix into an integer and offseted matrix.\n   */\n  void computesIntegerMatrix (double granularity, bool sortColumns = true);\n\n  // computes the complete score distribution between score min and max\n  void showDistrib (long long min, long long max) {\n    map&lt;long long, double&gt; *nbocc = calcDistribWithMapMinMax(min,max); \n    map&lt;long long, double&gt;::iterator iter;\n\n    // computes p values and stores them in nbocc[length] \n    double sum = 0;\n    map&lt;long long, double&gt;::reverse_iterator riter = nbocc[length-1].rbegin();\n    while (riter != nbocc[length-1].rend()) {\n      sum += riter-&gt;second;\n      nbocc[length][riter-&gt;first] = sum;\n      riter++;      \n    }\n\n    iter = nbocc[length].begin();\n    while (iter != nbocc[length].end() &amp;&amp; iter-&gt;first &lt;= max) {\n      //cout &lt;&lt; (((iter-&gt;first)-offset)/granularity) &lt;&lt; \" \" &lt;&lt; (iter-&gt;second) &lt;&lt; \" \" &lt;&lt; nbocc[length-1][iter-&gt;first] &lt;&lt; endl;\n      iter ++;\n    }\n  }\n\n  /**\n    * Computes the pvalue associated with the threshold score requestedScore.\n    */\n  void lookForPvalue (long long requestedScore, long long min, long long max, double *pmin, double *pmax);\n\n  /**\n    * Computes the score associated with the pvalue requestedPvalue.\n    */\n  long long lookForScore (long long min, long long max, double requestedPvalue, double *rpv, double *rppv);\n\n  /** \n    * Computes the distribution of scores between score min and max as the DP algrithm proceeds \n    * but instead of using a table we use a map to avoid computations for scores that cannot be reached\n    */\n  map&lt;long long, double&gt; *calcDistribWithMapMinMax (long long min, long long max); \n\n  void readMatrix (string matrix) {\n\n    vector&lt;string&gt; str;\n    tokenize(matrix, str, \" \\t|\");\n    this-&gt;length = 0;\n    this-&gt;length = str.size() / 4;\n    mat = new double*[4];\n    int idx = 0;\n\n    for (int j = 0; j &lt; 4; j++) {\n      this-&gt;mat[j] = new double[this-&gt;length];\n      for (int i = 0; i &lt; this-&gt;length; i++) {\n        mat[j][i] = atof(str.at(idx).data());\n        idx++;\n      }\n    }\n\n    str.clear();\n\n  }\n\n}; /* Matrix */\n\n#endif\n</code></pre>\n\n<p><strong>Matrix.cpp</strong></p>\n\n<pre><code>#include \"Matrix.h\"\n\n#define MEMORYCOUNT\n\nvoid Matrix::computesIntegerMatrix (double granularity, bool sortColumns) {\n  double minS = 0, maxS = 0;\n  double scoreRange;\n\n  // computes precision\n  for (int i = 0; i &lt; length; i++) {\n    double min = mat[0][i];\n    double max = min;\n    for (int k = 1; k &lt; 4; k++ )  {\n      min = ((min &lt; mat[k][i])?min:(mat[k][i]));\n      max = ((max &gt; mat[k][i])?max:(mat[k][i]));\n    }\n    minS += min;\n    maxS += max;\n  } \n\n  // score range\n  scoreRange = maxS - minS + 1;\n\n  if (granularity &gt; 1.0) {\n    this-&gt;granularity = granularity / scoreRange;\n  } else if (granularity &lt; 1.0) {\n    this-&gt;granularity = 1.0 / granularity;\n  } else {\n    this-&gt;granularity = 1.0;\n  }\n\n  matInt = new long long *[length];\n  for (int k = 0; k &lt; 4; k++ ) {\n    matInt[k] = new long long[length];\n    for (int p = 0 ; p &lt; length; p++) {\n      matInt[k][p] = ROUND_TO_INT((double)(mat[k][p]*this-&gt;granularity)); \n    }\n  }\n\n  this-&gt;errorMax = 0.0;\n  for (int i = 1; i &lt; length; i++) {\n    double maxE = mat[0][i] * this-&gt;granularity - (matInt[0][i]);\n    for (int k = 1; k &lt; 4; k++) {\n      maxE = ((maxE &lt; mat[k][i] * this-&gt;granularity - matInt[k][i])?(mat[k][i] * this-&gt;granularity - (matInt[k][i])):(maxE));\n    }\n    this-&gt;errorMax += maxE;\n  }\n\n  if (sortColumns) {\n    // sort the columns : the first column is the one with the greatest value\n    long long min = 0;\n    for (int i = 0; i &lt; length; i++) {\n      for (int k = 0; k &lt; 4; k++) {\n        min = MIN(min,matInt[k][i]);\n      }\n    }\n    min --;\n    long long *maxs = new long long [length];\n    for (int i = 0; i &lt; length; i++) {\n      maxs[i] = matInt[0][i];\n      for (int k = 1; k &lt; 4; k++) {\n        if (maxs[i] &lt; matInt[k][i]) {\n          maxs[i] = matInt[k][i];\n        }\n      }\n    }\n    long long **mattemp = new long long *[4];\n    for (int k = 0; k &lt; 4; k++) {        \n      mattemp[k] = new long long [length];\n    }\n    for (int i = 0; i &lt; length; i++) {\n      long long max = maxs[0];\n      int p = 0;\n      for (int j = 1; j &lt; length; j++) {\n        if (max &lt; maxs[j]) {\n          max = maxs[j];\n          p = j;\n        }\n      }\n      maxs[p] = min;\n      for (int k = 0; k &lt; 4; k++) {        \n        mattemp[k][i] = matInt[k][p];\n      }\n    }\n\n    for (int k = 0; k &lt; 4; k++)  {\n      for (int i = 0; i &lt; length; i++) {\n        matInt[k][i] = mattemp[k][i];\n      }\n    }\n\n    for (int k = 0; k &lt; 4; k++) {        \n      delete[] mattemp[k];\n    }\n    delete[] mattemp;\n    delete[] maxs;\n  }\n\n  // computes offsets\n  this-&gt;offset = 0;\n  offsets = new long long [length];\n  for (int i = 0; i &lt; length; i++) {\n    long long min = matInt[0][i];\n    for (int k = 1; k &lt; 4; k++ )  {\n      min = ((min &lt; matInt[k][i])?min:(matInt[k][i]));\n    }\n    offsets[i] = -min;\n    for (int k = 0; k &lt; 4; k++ )  {\n      matInt[k][i] += offsets[i];  \n    }\n    this-&gt;offset += offsets[i];\n  }\n\n  // look for the minimum score of the matrix for each column\n  minScoreColumn = new long long [length];\n  maxScoreColumn = new long long [length];\n  sum            = new long long [length];\n  minScore = 0;\n  maxScore = 0;\n  for (int i = 0; i &lt; length; i++) {\n    minScoreColumn[i] = matInt[0][i];\n    maxScoreColumn[i] = matInt[0][i];\n    sum[i] = 0;\n    for (int k = 1; k &lt; 4; k++ )  {\n      sum[i] = sum[i] + matInt[k][i];\n      if (minScoreColumn[i] &gt; matInt[k][i]) {\n        minScoreColumn[i] = matInt[k][i];\n      }\n      if (maxScoreColumn[i] &lt; matInt[k][i]) {\n        maxScoreColumn[i] = matInt[k][i];\n      }\n    }\n    minScore = minScore + minScoreColumn[i];\n    maxScore = maxScore + maxScoreColumn[i];\n    //cout &lt;&lt; \"minScoreColumn[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; minScoreColumn[i] &lt;&lt; endl;\n    //cout &lt;&lt; \"maxScoreColumn[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; maxScoreColumn[i] &lt;&lt; endl;\n  }\n  this-&gt;scoreRange = maxScore - minScore + 1;\n\n  bestScore = new long long[length];\n  worstScore = new long long[length];\n  bestScore[length-1] = maxScore;\n  worstScore[length-1] = minScore;\n  for (int i = length - 2; i &gt;= 0; i--) {\n    bestScore[i]  = bestScore[i+1]  - maxScoreColumn[i+1];\n    worstScore[i] = worstScore[i+1] - minScoreColumn[i+1];\n  }\n\n\n}\n\n\n\n\n/**\n* Computes the pvalue associated with the threshold score requestedScore.\n */\nvoid Matrix::lookForPvalue (long long requestedScore, long long min, long long max, double *pmin, double *pmax) {\n\n  map&lt;long long, double&gt; *nbocc = calcDistribWithMapMinMax(min,max); \n  map&lt;long long, double&gt;::iterator iter;\n\n\n  // computes p values and stores them in nbocc[length] \n  double sum = nbocc[length][max+1];\n  long long s = max + 1;\n  map&lt;long long, double&gt;::reverse_iterator riter = nbocc[length-1].rbegin();\n  while (riter != nbocc[length-1].rend()) {\n    sum += riter-&gt;second;\n    if (riter-&gt;first &gt;= requestedScore) s = riter-&gt;first;\n    nbocc[length][riter-&gt;first] = sum;\n    riter++;      \n  }\n  //cout &lt;&lt; \"   s found : \" &lt;&lt; s &lt;&lt; endl;\n\n  iter = nbocc[length].find(s);\n  while (iter != nbocc[length].begin() &amp;&amp; iter-&gt;first &gt;= s - errorMax) {\n    iter--;      \n  }\n  //cout &lt;&lt; \"   s - E found : \" &lt;&lt; iter-&gt;first &lt;&lt; endl;\n\n#ifdef MEMORYCOUNT\n  // for tests, store the number of memory bloc necessary\n  for (int pos = 0; pos &lt;= length; pos++) {\n    totalMapSize += nbocc[pos].size();\n  }\n#endif\n\n  *pmax = nbocc[length][s];\n  *pmin = iter-&gt;second;\n\n}\n\n\n\n/**\n* Computes the score associated with the pvalue requestedPvalue.\n */\nlong long Matrix::lookForScore (long long min, long long max, double requestedPvalue, double *rpv, double *rppv) {\n\n  map&lt;long long, double&gt; *nbocc = calcDistribWithMapMinMax(min,max); \n  map&lt;long long, double&gt;::iterator iter;\n\n  // computes p values and stores them in nbocc[length] \n  double sum = 0.0;\n  map&lt;long long, double&gt;::reverse_iterator riter = nbocc[length-1].rbegin();\n  long long alpha = riter-&gt;first+1;\n  long long alpha_E = alpha;\n  nbocc[length][alpha] = 0.0;\n  while (riter != nbocc[length-1].rend()) {\n    sum += riter-&gt;second;\n    nbocc[length][riter-&gt;first] = sum;\n    if (sum &gt;= requestedPvalue) { \n      break;\n    }\n    riter++;      \n  }\n  if (sum &gt; requestedPvalue) {\n    alpha_E = riter-&gt;first;\n    riter--;\n    alpha = riter-&gt;first; \n  } else {\n    if (riter == nbocc[length-1].rend()) { // path following the remark of the mail\n      riter--;\n      alpha = alpha_E = riter-&gt;first;\n    } else {\n      alpha = riter-&gt;first;\n      riter++;\n      sum += riter-&gt;second;\n      alpha_E = riter-&gt;first;\n    }\n    nbocc[length][alpha_E] = sum;  \n    //cout &lt;&lt; \"Pv(S) \" &lt;&lt; riter-&gt;first &lt;&lt; \" \" &lt;&lt; sum &lt;&lt; endl;   \n  } \n\n#ifdef MEMORYCOUNT\n  // for tests, store the number of memory bloc necessary\n  for (int pos = 0; pos &lt;= length; pos++) {\n    totalMapSize += nbocc[pos].size();\n  }\n#endif\n\n  if (alpha - alpha_E &gt; errorMax) alpha_E = alpha;\n\n  *rpv = nbocc[length][alpha];\n  *rppv = nbocc[length][alpha_E];   \n\n  delete[] nbocc;\n  return alpha;\n\n}\n\n\n// computes the distribution of scores between score min and max as the DP algrithm proceeds \n// but instead of using a table we use a map to avoid computations for scores that cannot be reached\nmap&lt;long long, double&gt; *Matrix::calcDistribWithMapMinMax (long long min, long long max) { \n\n  // maps for each step of the computation\n  // nbocc[length] stores the pvalue\n  // nbocc[pos] for pos &lt; length stores the qvalue\n  map&lt;long long, double&gt; *nbocc = new map&lt;long long, double&gt; [length+1];\n  map&lt;long long, double&gt;::iterator iter;\n\n  long long *maxs = new long long[length+1]; // @ pos i maximum score reachable with the suffix matrix from i to length-1\n\n  maxs[length] = 0;\n  for (int i = length-1; i &gt;= 0; i--) {\n    maxs[i] = maxs[i+1] + maxScoreColumn[i];\n  }\n\n  // initializes the map at position 0\n  for (int k = 0; k &lt; 4; k++) {\n    if (matInt[k][0]+maxs[1] &gt;= min) {\n      nbocc[0][matInt[k][0]] += background[k];\n    }\n  }\n\n  // computes q values for scores greater or equal than min\n  nbocc[length-1][max+1] = 0.0;\n  for (int pos = 1; pos &lt; length; pos++) {\n    iter = nbocc[pos-1].begin();\n    while (iter != nbocc[pos-1].end()) {\n      for (int k = 0; k &lt; 4; k++) {\n        long long sc = iter-&gt;first + matInt[k][pos];\n        if (sc+maxs[pos+1] &gt;= min) {\n          // the score min can be reached\n          if (sc &gt; max) {\n            // the score will be greater than max for all suffixes\n            nbocc[length-1][max+1] += nbocc[pos-1][iter-&gt;first] * background[k]; //pow(4,length-pos-1) ;\n            totalOp++;\n          } else {              \n            nbocc[pos][sc] += nbocc[pos-1][iter-&gt;first] * background[k];\n            totalOp++;\n          }\n        } \n      }\n      iter++;      \n    }      \n    //cerr &lt;&lt; \"        map size for \" &lt;&lt; pos &lt;&lt; \" \" &lt;&lt; nbocc[pos].size() &lt;&lt; endl;\n  }\n\n  delete[] maxs;\n\n  return nbocc;\n\n\n}\n</code></pre>\n\n<p><strong>pytfmpval.i</strong></p>\n\n<pre><code>%module pytfmpval\n%{\n#include \"../src/Matrix.h\"\n#define SWIG_FILE_WITH_INIT\n%}\n\n%include \"cpointer.i\"\n%include \"std_string.i\"\n%include \"std_vector.i\"\n%include \"typemaps.i\"\n%include \"../src/Matrix.h\"\n\n%pointer_class(double, doublep)\n%pointer_class(int, intp)\n\n%nodefaultdtor Matrix;\n</code></pre>\n\n<p>The <code>c++</code> functions are called in a <code>python</code> module.</p>\n\n<hr>\n\n<p>I worry that <code>nbocc</code> in <code>Matrix.cpp</code> is not being properly dereferenced or deleted. <strong>Is this use valid?</strong> </p>\n\n<p>I have tried using <code>gc.collect()</code> and I am using the <code>multiprocessing</code> module as recommended in this <a href=\"https://stackoverflow.com/questions/15455048/releasing-memory-in-python\">question</a> to call these functions from my python program. I've also tried deleting the <code>Matrix</code> object from within python to no avail. </p>\n\n<p>I'm out of characters, but will provide any additional needed info in the comments as well as I can.</p>\n\n<p><strong>UPDATE</strong>: I've removed all of the python code, as it wasn't the issue and made for an absurdly long post. As I stated in the comments below, this was ultimately solved by taking the suggestion of many users and creating a <strong>minimal example</strong> that exhibited the issue in pure C++. I then used <code>valgrind</code> to identify the problematic pointers created with <code>new</code> and made sure that they were properly dereferenced. This fixed <em>almost</em> all memory leaks. One remains, but it leaks only a few hundred bytes over thousands of iterations and would require refactoring the entire <code>Matrix</code> class, which simply isn't worth the time for what it is. Bad practice, I know. To any other newbie in C++ out there, seriously try to avoid dynamic memory allocation or utilize <code>std::unique_ptr</code> or <code>std::shared_ptr</code>.</p>\n\n<p>Thanks again to everyone who provided input and suggestions.</p>\n"}, {"tags": ["python", "arrays", "numpy", "matrix", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 501347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2198339882a895a4a9ca877987cac1?s=128&d=identicon&r=PG", "display_name": "rbedi100", "link": "https://stackoverflow.com/users/501347/rbedi100"}, "is_accepted": false, "score": 0, "last_activity_date": 1499289118, "creation_date": 1499289118, "answer_id": 44936059, "question_id": 44935828, "link": "https://stackoverflow.com/questions/44935828/is-there-a-better-way-to-produce-a-membership-matrix-one-hot-array-for-an-arra/44936059#44936059", "title": "Is there a better way to produce a membership matrix (one-hot array) for an array of cluster assignments in Python?", "body": "<p>Here's a method that's agnostic to the number of clusters you have (with your method, you'll have to \"stack\" more things if you have more clusters).</p>\n\n<p>This code sample assumes you have six data points and 3 clusters:</p>\n\n<pre><code>NUM_DATA_POINTS = 6\nNUM_CLUSTERS = 3\nclusters = np.array([2,1,2,2,0,1]) # hard-coded as an example, but this is your KMeans output\n\n# create your empty membership matrix\nmembership = np.zeros((NUM_DATA_POINTS, NUM_CLUSTERS)) \nmembership[np.arange(NUM_DATA_POINTS), clusters] = 1\n</code></pre>\n\n<p>The key feature being used here is 2D array indexing - in the last line of code above, we index into the rows of membership sequentially (<code>np.arange</code> creates an incrementing sequence from 0 to <code>NUM_DATA_POINTS-1</code>) and into the columns of membership using the cluster assignments. Here's the <a href=\"https://docs.scipy.org/doc/numpy/user/basics.indexing.html#indexing-multi-dimensional-arrays\" rel=\"nofollow noreferrer\">relevant numpy reference</a>.</p>\n\n<p>It would produce the following membership matrix:</p>\n\n<pre><code>&gt;&gt;&gt; membership\narray([[ 0.,  0.,  1.],\n       [ 0.,  1.,  0.],\n       [ 0.,  0.,  1.],\n       [ 0.,  0.,  1.],\n       [ 1.,  0.,  0.],\n       [ 0.,  1.,  0.]])   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 1, "creation_date": 1499320748, "post_id": 44936349, "comment_id": 76857416, "body": "Don&#39;t just copy the answer from an obvious duplicate.  Flag it!"}, {"owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1499323338, "post_id": 44936349, "comment_id": 76858740, "body": "Ah, alright, sorry about that."}], "tags": [], "owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "is_accepted": true, "score": 0, "last_activity_date": 1499320568, "last_edit_date": 1499320568, "creation_date": 1499290400, "answer_id": 44936349, "question_id": 44935828, "link": "https://stackoverflow.com/questions/44935828/is-there-a-better-way-to-produce-a-membership-matrix-one-hot-array-for-an-arra/44936349#44936349", "title": "Is there a better way to produce a membership matrix (one-hot array) for an array of cluster assignments in Python?", "body": "<p>So you can create 'one-hot array' which is equivalent to your membership array from array of cluster according to <a href=\"https://stackoverflow.com/questions/29831489/numpy-1-hot-array\">this question</a>. Here is how you do it using <code>np.eye</code></p>\n\n<pre><code>import numpy as np\n\nclusters = np.array([2,1,2,2,0,1])\nn_clusters = max(clusters) + 1\nmembership_matrix = np.eye(n_clusters)[clusters]\n</code></pre>\n\n<p>Output is as follows</p>\n\n<pre><code>array([[ 0.,  0.,  1.],\n       [ 0.,  1.,  0.],\n       [ 0.,  0.,  1.],\n       [ 0.,  0.,  1.],\n       [ 1.,  0.,  0.],\n       [ 0.,  1.,  0.]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": false, "score": 0, "last_activity_date": 1499331103, "last_edit_date": 1499331103, "creation_date": 1499295998, "answer_id": 44937343, "question_id": 44935828, "link": "https://stackoverflow.com/questions/44935828/is-there-a-better-way-to-produce-a-membership-matrix-one-hot-array-for-an-arra/44937343#44937343", "title": "Is there a better way to produce a membership matrix (one-hot array) for an array of cluster assignments in Python?", "body": "<p>You are looking for <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelBinarizer.html#sklearn.preprocessing.LabelBinarizer\" rel=\"nofollow noreferrer\"><code>LabelBinarizer</code></a>. Give this code a try:</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>from sklearn import preprocessing\nlb = preprocessing.LabelBinarizer()\nmembership_matrix = lb.fit_transform(km.labels_)\n</code></pre>\n\n<p>In contrast to other solutions proposed here, this approach:  </p>\n\n<ul>\n<li>Generates a compact membership matrix when the labels are <strong>not consecutive numbers</strong>.</li>\n<li>Is able to deal with <strong>categorical labels</strong>.</li>\n</ul>\n\n<p><strong>Sample run:</strong></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>In [9]: lb.fit_transform([0, 1, 2, 0, 2, 2])\nOut[9]: \narray([[1, 0, 0],\n       [0, 1, 0],\n       [0, 0, 1],\n       [1, 0, 0],\n       [0, 0, 1],\n       [0, 0, 1]])\n\nIn [10]: lb.fit_transform([0, 1, 9, 0, 9, 9])\nOut[10]: \narray([[1, 0, 0],\n       [0, 1, 0],\n       [0, 0, 1],\n       [1, 0, 0],\n       [0, 0, 1],\n       [0, 0, 1]])\n\nIn [11]: lb.fit_transform(['first', 'second', 'third', 'first', 'third', 'third'])\nOut[11]: \narray([[1, 0, 0],\n       [0, 1, 0],\n       [0, 0, 1],\n       [1, 0, 0],\n       [0, 0, 1],\n       [0, 0, 1]])\n</code></pre>\n"}], "owner": {"reputation": 24, "user_id": 1537136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e650274e0b4d6c61906fc16800240f0?s=128&d=identicon&r=PG", "display_name": "Oli4", "link": "https://stackoverflow.com/users/1537136/oli4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1499353625, "accepted_answer_id": 44936349, "answer_count": 3, "score": 0, "last_activity_date": 1499331103, "creation_date": 1499288136, "last_edit_date": 1499320858, "question_id": 44935828, "link": "https://stackoverflow.com/questions/44935828/is-there-a-better-way-to-produce-a-membership-matrix-one-hot-array-for-an-arra", "closed_reason": "Duplicate", "title": "Is there a better way to produce a membership matrix (one-hot array) for an array of cluster assignments in Python?", "body": "<p>After running kmeans I can easily get an array with the assigned clusters for ever data point. Now I want to get a membership matrix (one-hot array) which has the different clusters as columns and indicates the cluster assignment by either 1 or 0 in the matrix for each data point. </p>\n\n<p>My code is shown below and it works but I am wondering if there is a more elegant way to do the same.</p>\n\n<pre><code>km = KMeans(n_clusters=3).fit(data)\nmembership_matrix = np.stack([np.where(km.labels_ == 0, 1,0),\n                              np.where(km.labels_ == 1, 1,0),\n                              np.where(km.labels_ == 2, 1,0)]\n                              axis = 1)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1499288180, "post_id": 44935814, "comment_id": 76847894, "body": "<code>input</code> returns an <code>str</code> and <code>99</code> is an <code>int</code>, so they are not the same."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5424729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3750632b31ebf1e9bf20bf5066d4d5ff?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAdvent", "link": "https://stackoverflow.com/users/5424729/darkadvent"}, "edited": false, "score": 1, "creation_date": 1499355985, "post_id": 44935824, "comment_id": 76882256, "body": "Thank you that helped out a lot."}], "tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": true, "score": 7, "last_activity_date": 1499288131, "creation_date": 1499288131, "answer_id": 44935824, "question_id": 44935814, "link": "https://stackoverflow.com/questions/44935814/why-did-my-while-loop-fail-when-i-defined-the-break-code/44935824#44935824", "title": "Why did my while loop fail when I defined the break code?", "body": "<p>You forgot to convert the input to <code>int</code>:</p>\n\n<pre><code>age = int(input())\n</code></pre>\n\n<p>If you don't do that explicitly, <code>age</code> will be a string, and naturally <code>'99' != 99</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 5424729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3750632b31ebf1e9bf20bf5066d4d5ff?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAdvent", "link": "https://stackoverflow.com/users/5424729/darkadvent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44935824, "answer_count": 1, "score": 2, "last_activity_date": 1499288195, "creation_date": 1499288074, "last_edit_date": 1499288195, "question_id": 44935814, "link": "https://stackoverflow.com/questions/44935814/why-did-my-while-loop-fail-when-i-defined-the-break-code", "title": "Why did my while loop fail when I defined the break code?", "body": "<p>I am new to Python and was exploring a simple side project to understand how functions and loops work. </p>\n\n<p>I have this code right here</p>\n\n<pre><code>age = 0\n\ndef ageInMonths (age):\n    months =  int(age) * 12\n    return print('You are ' + str(months) + ' months old!')\n\ndef ageInDays(age):\n     days = int(age)*365\n     return print('You are ' + str(days) + ' days old!')\n\ndef ageInHrs(age):\n    hrs = int(age)* 8765.81\n    return print('You are ' + str(hrs) + ' hours old!')\n\n    def ageinMin(age):\n       minutes = int(age)* 525948.8\n       return print('You are ' + str(minutes) + ' minutes old!')\n\n    def ageinSec(age):\n       sec= int(age)* 31556926\n       return print('You are ' + str(sec) + ' seconds old!')\n\n\ndef agePrint(age):\n    age=age\n    ageInMonths(age)\n    ageInDays(age)\n    ageInHrs(age)\n    ageinMin(age)\n    ageinSec(age)\n      print('Done')\n    return \n\nwhile age != 99:\n\n    print( 'Please enter your age?')\n\n    age = input()\n    if age == 99:\n     break\n\n\n    print('You are ' + age + ' years old!')\n\n\n    agePrint(age)\n</code></pre>\n\n<p>Every time I enter 99 the while loop does not break.  Any suggestions to where I went wrong..</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1499287895, "post_id": 44935735, "comment_id": 76847740, "body": "<a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Modulo_operation</a>"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1499289824, "post_id": 44935735, "comment_id": 76848666, "body": "There is reading PHP language documentation, probably a good thing to do if one is writing PHP code. If the quesstion is why is it used in this case: think. Hint: how many letters are there in the English language, how many letters in ASCII?"}], "answers": [{"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1499288405, "post_id": 44935866, "comment_id": 76847997, "body": "Note however that the modulo operator is overloaded differently for different objects. In the case of integers, it returns the remainder. The behavior could be completely different for other objects though. Such as string formatting for strings."}, {"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1499288779, "post_id": 44935866, "comment_id": 76848187, "body": "@Christian - You are totally right but if OP has problem with the <i>base meaning</i> (and in his code it is obviously the integer operation), giving him the complicated answer would be less efective (IMHO)."}, {"owner": {"reputation": 35, "user_id": 7569298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3nGN-0scl8/AAAAAAAAAAI/AAAAAAAALQY/XTgUu35972w/photo.jpg?sz=128", "display_name": "Areef Syed", "link": "https://stackoverflow.com/users/7569298/areef-syed"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499289049, "post_id": 44935866, "comment_id": 76848301, "body": "@ChristianDean I understand the role that modulo plays but I want to know why exactly there is a need to use it here."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "reply_to_user": {"reputation": 35, "user_id": 7569298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3nGN-0scl8/AAAAAAAAAAI/AAAAAAAALQY/XTgUu35972w/photo.jpg?sz=128", "display_name": "Areef Syed", "link": "https://stackoverflow.com/users/7569298/areef-syed"}, "edited": false, "score": 0, "creation_date": 1499290131, "post_id": 44935866, "comment_id": 76848812, "body": "@AreefSyed That is not the question you asked."}, {"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "edited": false, "score": 0, "creation_date": 1499290648, "post_id": 44935866, "comment_id": 76849030, "body": "Your comment was probably addressed to me - English alphabet has <code>26</code> letters and your encryption method uses the simple mono-alphabetic substitution cipher, so called <i>shift cipher</i> - substituting every letter in the plain text with a letter obtained by the constant shift (=key) in the alphabet. (Continues...)"}, {"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "edited": false, "score": 0, "creation_date": 1499290668, "post_id": 44935866, "comment_id": 76849037, "body": "Supposing A=0, B=1, ... Z=25. If the shifted position is greater than 25, you wanted to continue again from the <i>start</i> of the alphabet. For example if key is 2, you want to substitute the <code>Z</code> character (=25) with the <code>B</code> character (=1). But <code>25 + 2 = 27</code> - out of the bounds. So you take <code>27 % 26</code> (as the remainder after division by 26 is always from 0 to 25) and you obtain the right number (1) for <code>B</code>."}], "tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": true, "score": 3, "last_activity_date": 1499288410, "last_edit_date": 1499288410, "creation_date": 1499288267, "answer_id": 44935866, "question_id": 44935735, "link": "https://stackoverflow.com/questions/44935735/what-exactly-is-the-sign-used-for-in-python/44935866#44935866", "title": "What exactly is the &#39;%&#39; sign used for in python?", "body": "<p>The <code>%</code> sign in your code is a <em>modulo</em> operator - the remainder after integer division. E. g.</p>\n\n<pre><code>    13 % 5\n</code></pre>\n\n<p>gives the result <code>3</code></p>\n\n<p>(as <code>13</code> divided by <code>5</code> is <code>2</code>, and the remainder is <code>3</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 7569298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3nGN-0scl8/AAAAAAAAAAI/AAAAAAAALQY/XTgUu35972w/photo.jpg?sz=128", "display_name": "Areef Syed", "link": "https://stackoverflow.com/users/7569298/areef-syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "closed_date": 1499310425, "accepted_answer_id": 44935866, "answer_count": 1, "score": -2, "last_activity_date": 1499288410, "creation_date": 1499287669, "last_edit_date": 1499287847, "question_id": 44935735, "link": "https://stackoverflow.com/questions/44935735/what-exactly-is-the-sign-used-for-in-python", "closed_reason": "Duplicate", "title": "What exactly is the &#39;%&#39; sign used for in python?", "body": "<p>This is a code for a simple encryption method. </p>\n\n<pre><code>if character in alphabet:\n    position=alphabet.find(character)\n    newPosition=(position-key)%26  # here \n    newCharacter=alphabet[newPosition]\n    print(\"The encrypted character is: \" + newCharacter)\n    newMessage += newCharacter\n    print(newMessage)\n</code></pre>\n"}, {"tags": ["python", "pytest", "fixtures"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1499288267, "post_id": 44935717, "comment_id": 76847943, "body": "By &quot;whether this fixture is installed,&quot; do you mean &quot;whether the version of pytest in use provides the fixture&quot; (i.e., whether pytest is 2.8 or higher) or something else?  If this is just a dependency versioning issue, why can&#39;t you just specify <code>pytest&gt;=2.8</code> in your <code>test-requirements.txt</code> or equivalent?"}, {"owner": {"reputation": 59, "user_id": 8261364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UBO75bc2pvk/AAAAAAAAAAI/AAAAAAAAAAA/AEiDBl5hTPs/photo.jpg?sz=128", "display_name": "KenB", "link": "https://stackoverflow.com/users/8261364/kenb"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1499371923, "post_id": 44935717, "comment_id": 76891467, "body": "yes.  I want it to be version independent. (reason being is that some test case environs are fixed to a particular Os release and python version)"}, {"owner": {"reputation": 59, "user_id": 8261364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UBO75bc2pvk/AAAAAAAAAAI/AAAAAAAAAAA/AEiDBl5hTPs/photo.jpg?sz=128", "display_name": "KenB", "link": "https://stackoverflow.com/users/8261364/kenb"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1499374359, "post_id": 44935717, "comment_id": 76892667, "body": "any test function (<b>def test_whatever(...</b>  ) is capable of referencing any pytest fixtures that it wants, e.g.  { def test_mytest( record_xml_property, parm1, parm2):     record_xml_property( parm1, parm2) }  so I guess all I really need to know is how can I reference a pytest fixture from within my own function which is not itself a standalone test function?  (ie. no <b>test_</b> in it&#39;s name)"}], "owner": {"reputation": 59, "user_id": 8261364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UBO75bc2pvk/AAAAAAAAAAI/AAAAAAAAAAA/AEiDBl5hTPs/photo.jpg?sz=128", "display_name": "KenB", "link": "https://stackoverflow.com/users/8261364/kenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499287603, "creation_date": 1499287603, "question_id": 44935717, "link": "https://stackoverflow.com/questions/44935717/chicken-or-the-egg-with-pytest-fixtures", "title": "Chicken or the egg with pytest fixtures", "body": "<p>I want to use the <code>record_xml_property</code> fixture.\nNo problem.  It works perfectly when it is presently available.\nHowever, I want my tests to run smoothly whether this fixture is installed or not.  When I create a 'wrapper' fixture, \n(something like this)</p>\n\n<pre><code>//this one works nicely when record_xml_property is there\n@pytest.fixture()   \ndef real_property_handler( record_xml_property, mykey, myval):\n    record_xml_property( mykey, myval)\n\n//this does a harmless print instead\n@pytest.fixture()  \ndef fallback_property_handler( mykey, myval):\n    print('{0}={1}].format( mykey, myval))\n\ndef MyXMLWrapper( mykey, myval):  \n    try:      # I want to use the REAL one if I can\n        real_property_handler( record_xml_property, mykey, myval)\n    except:   # but still do something nice if it's not\n        fallback_property_handler( mykey, myval)\n</code></pre>\n\n<p><strong>My test should not have to be cognizant</strong>\n<strong>of any fixture(s) that may or may not underlie my wrapper function</strong></p>\n\n<pre><code>def test_simple():  \n    MyXMLWrapper( 'mykeyname', 'mykeyvalue')\n    assert True\n</code></pre>\n\n<p>I'm stuck because in order for my tests to ever work properly it appears that I have to pass the <code>record_xml_property</code> fixture as a parameter which I can never do in environments that don't have this fixture installed.\nI've tried several things.<br>\nIf I make <code>MyXMLWrapper</code> a fixture itself then I have to pass it the <code>record_xml_fixture</code>, but if I define <code>MyXMLWrapper</code> as a function (above) then I have no way to reference the <code>record_xml_property</code> in case it DOES exist.</p>\n\n<p>What am I not understanding here about how fixtures work?\nThanks.</p>\n"}, {"tags": ["python", "excel"], "answers": [{"tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 2, "last_activity_date": 1499287386, "creation_date": 1499287386, "answer_id": 44935666, "question_id": 44935582, "link": "https://stackoverflow.com/questions/44935582/add-new-rows-to-existing-column-of-excel-in-python/44935666#44935666", "title": "Add new rows to existing column of excel in python", "body": "<p>The lib you're using looks like it only reads, not edits.  Here's an example in <code>openpyxl</code>:</p>\n\n<pre><code>from openpyxl import Workbook, load_workbook\n\n# create the file\nwb = Workbook()\nws = wb.active\nws.append([1, 2, 3])\nwb.save(\"sample.xlsx\")\n\n# re-open and append\nwb = load_workbook(\"sample.xlsx\")\nws = wb.active\nws.append([4, 5, 6])\nwb.save(\"sample.xlsx\")\n</code></pre>\n\n<p>Run that and you'll have a file <code>sample.xlsx</code> with both rows.</p>\n"}, {"tags": [], "owner": {"reputation": 404, "user_id": 7757150, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209525383365200/picture?type=large", "display_name": "Aman Raparia", "link": "https://stackoverflow.com/users/7757150/aman-raparia"}, "is_accepted": true, "score": 1, "last_activity_date": 1499287704, "creation_date": 1499287704, "answer_id": 44935745, "question_id": 44935582, "link": "https://stackoverflow.com/questions/44935582/add-new-rows-to-existing-column-of-excel-in-python/44935745#44935745", "title": "Add new rows to existing column of excel in python", "body": "<pre><code>xlrd \n</code></pre>\n\n<p>is for reading operations only. Since you want perform a write operation use\n    xlwt \npython module.</p>\n\n<p>Refer to xlwt docs for the same</p>\n"}], "owner": {"reputation": 107, "user_id": 6422795, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/655bbb8bcfc3264dd85e40f572ed1c09?s=128&d=identicon&r=PG&f=1", "display_name": "Analyst", "link": "https://stackoverflow.com/users/6422795/analyst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3463, "favorite_count": 0, "accepted_answer_id": 44935745, "answer_count": 2, "score": 0, "last_activity_date": 1584528415, "creation_date": 1499287050, "question_id": 44935582, "link": "https://stackoverflow.com/questions/44935582/add-new-rows-to-existing-column-of-excel-in-python", "title": "Add new rows to existing column of excel in python", "body": "<p><a href=\"https://i.stack.imgur.com/DSh87.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DSh87.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to add new records every week to this existing file without creating a new one. </p>\n\n<p>For example, Next I want to add record on date 6/13/2016 </p>\n\n<p>Randy->(13,23,13)</p>\n\n<p>Shaw->(13,15,13)</p>\n\n<p>and many such entries next two months. How do I do that? I am beginner so having trouble to put it in syntax. </p>\n\n<p>I could do only this much </p>\n\n<pre><code>import xlrd\n\n#Opening the excel file\nfile_location= \"C:/Users/agodgh1a/Desktop/Apurva/EPSON.xlsx\"\nworkbook= xlrd.open_workbook(file_location)\nsheet=workbook.sheet_by_index(0)\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "django", "authentication", "authorization"], "answers": [{"comments": [{"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1499287847, "post_id": 44935568, "comment_id": 76847716, "body": "See the docs for more details if needed: <a href=\"https://docs.djangoproject.com/en/1.11/topics/class-based-views/intro/#decorating-class-based-views\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.11/topics/class-based-views/intr&zwnj;&#8203;o/&hellip;</a> - or <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/default/#the-loginrequired-mixin\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.11/topics/auth/default/&hellip;</a> for the mixin, which is new to me."}], "tags": [], "owner": {"reputation": 3938, "user_id": 3832802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k0Hxl.jpg?s=128&g=1", "display_name": "pythad", "link": "https://stackoverflow.com/users/3832802/pythad"}, "is_accepted": false, "score": 1, "last_activity_date": 1499288153, "last_edit_date": 1499288153, "creation_date": 1499287000, "answer_id": 44935568, "question_id": 44935522, "link": "https://stackoverflow.com/questions/44935522/how-to-use-login-reuqired-on-update-create-delete-views-in-django/44935568#44935568", "title": "How to use login_reuqired on Update/Create/Delete Views in Django", "body": "<p>You need to decorate the <code>dispatch</code> method:</p>\n\n<pre><code>from django.contrib.auth.decorators import login_required\nfrom django.utils.decorators import method_decorator\n\nclass RoomUpdate(UpdateView):\n    model = Room\n    fields = ['Name', 'RoomTypeID']\n    template_name='WebApp/room_form.html'\n\n    @method_decorator(login_required)\n    def dispatch(self, *args, **kwargs):\n        return super(RoomUpdate, self).dispatch(*args, **kwargs)\n</code></pre>\n\n<p>or you can use <code>login_required</code> as a function in your <code>urls.py</code> like this:</p>\n\n<pre><code>from django.contrib.auth.decorators import login_required\n\nurl(r'^roomList/updateRoom/(?P&lt;pk&gt;[0-9]+)/$', login_required(views.RoomUpdate.as_view()), name='room_update'),\n</code></pre>\n\n<p>Since Django 1.9+ you also can use a mixin:</p>\n\n<pre><code>from django.contrib.auth.mixins import LoginRequiredMixin\n\nclass RoomUpdate(LoginRequiredMixin, UpdateView):\n    fields = ['Name', 'RoomTypeID']\n    template_name='WebApp/room_form.html'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 3083788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d1e1fcb6ad7389acbbe21b489c9305?s=128&d=identicon&r=PG", "display_name": "laidibug", "link": "https://stackoverflow.com/users/3083788/laidibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1499287585, "creation_date": 1499287585, "answer_id": 44935710, "question_id": 44935522, "link": "https://stackoverflow.com/questions/44935522/how-to-use-login-reuqired-on-update-create-delete-views-in-django/44935710#44935710", "title": "How to use login_reuqired on Update/Create/Delete Views in Django", "body": "<p>For Django 1.9+ you can use a mixin:</p>\n\n<pre><code>from django.contrib.auth.mixins import LoginRequiredMixin\n\nclass RoomUpdate(LoginRequiredMixin, UpdateView):\n    fields = ['Name', 'RoomTypeID']\n    template_name='WebApp/room_form.html'`\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7379144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fb1c067f588b9d882e4e54b5debda2?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7379144/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499288153, "creation_date": 1499286851, "last_edit_date": 1499287141, "question_id": 44935522, "link": "https://stackoverflow.com/questions/44935522/how-to-use-login-reuqired-on-update-create-delete-views-in-django", "title": "How to use login_reuqired on Update/Create/Delete Views in Django", "body": "<p>I am trying to use <code>@login_reuqired</code> decorator. For normal functions it is working fine, but when i try to use it in my UpdateView i am getting this error <code>\"AttributeError: 'function' object has no attribute 'as_view'\"</code></p>\n\n<p>This is my <code>view.py</code></p>\n\n<pre><code>@login_required\nclass RoomUpdate(UpdateView):\n    model = Room\n    fields = ['Name', 'RoomTypeID']\n    template_name='WebApp/room_form.html'`\n</code></pre>\n\n<p>This is in my <code>urls.py</code></p>\n\n<pre><code> url(r'^roomList/updateRoom/(?P&lt;pk&gt;[0-9]+)/$', views.RoomUpdate.as_view(), name='room_update'),\n</code></pre>\n\n<p>Any suggestions ? </p>\n"}, {"tags": ["python", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499288219, "post_id": 44935519, "comment_id": 76847918, "body": "@ikegami I  do mention that file one has millions of columns. I just realized that I don&#39;t actually have to reorganise file one, which would be the hard operation, so I can in fact do this in python, so I&#39;m going to edit the question for my future use."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1499288252, "post_id": 44935519, "comment_id": 76847935, "body": "Put your data in SQLite, use the appropriate <code>JOIN</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499292218, "post_id": 44935519, "comment_id": 76849706, "body": "Re &quot;<i>I do mention that file one has millions of columns.</i>&quot;, That&#39;s interesting, but not enough. Your edit probably provides enough information, though. If the file is in the order of GB, and you have 3 million columns of data, you have a very small number of lines."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "edited": false, "score": 1, "creation_date": 1499292009, "post_id": 44935873, "comment_id": 76849603, "body": "Amazing answer! Thanks!"}], "tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 1, "last_activity_date": 1499288327, "creation_date": 1499288327, "answer_id": 44935873, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44935873#44935873", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>3 million columns of data, eh?  It sounds like you're doing some NLP work.</p>\n\n<p>Assuming this is true, and your matrix is sparse, python can handle it just fine (just not with <code>pandas</code>).  Look at <code>scipy.sparse</code>.  Example:</p>\n\n<pre><code>from scipy.sparse import dok_matrix\n\nA = dok_matrix((10,10))\nA[1,1] = 1\n\nB = dok_matrix((10,10))\nB[2,2] = 2\n\nprint A+B\n</code></pre>\n\n<p>DOK stands for \"dictionary of keys\", which is typically used to build the sparse matrix, then it's usually converted to CSR, etc. depending on use.  See <a href=\"https://docs.scipy.org/doc/scipy/reference/sparse.html\" rel=\"nofollow noreferrer\">available sparse matrix types</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499293658, "post_id": 44936551, "comment_id": 76850249, "body": "That doesn&#39;t output the line in the desired order (the order they are found in <code>file2</code>)."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499293873, "post_id": 44936551, "comment_id": 76850353, "body": "@ikegami Ah, I had missed that. I might be have time to fix this in a few hours."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1499291376, "creation_date": 1499291376, "answer_id": 44936551, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44936551#44936551", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>The important thing is <a href=\"https://www.nu42.com/2013/02/splitting-long-lines-is-slow.html\" rel=\"nofollow noreferrer\">not to split</a> any more than necessary. If you have enough memory, putting the smaller file in a hash, and then reading through the second file ought to work.</p>\n\n<p>Consider the following example (note the run time of this script includes the time it takes to create sample data):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n# This is a string containing 10 lines corresponding to your \"file one\"\n# Second column has the record ID\n# Normally, you'd be reading this from a file\n\nmy $big_file = join \"\\n\",\n    map join(\"\\t\", 'x', $_, ('x') x 3_000_000),\n    1 .. 10\n;\n\n# This is a string containing 10 lines corresponding to your \"file two\"\n# Second column has the record ID\n\nmy $small_file = join \"\\n\",\n    map join(\"\\t\", 'y', $_, ('y') x 10),\n    1 .. 10\n;\n\n# You would normally pass file names as arguments\n\njoin_with_big_file(\n    \\$small_file,\n    \\$big_file,\n);\n\nsub join_with_big_file {\n    my $small_records = load_small_file(shift);\n    my $big_file = shift;\n\n    open my $fh, '&lt;', $big_file\n        or die \"Cannot open '$big_file': $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        my ($first, $id, $rest) = split /\\t/, $line, 3;\n        print join(\"\\t\", $first, $id, $rest, $small_records-&gt;{$id}), \"\\n\";\n    }\n\n    return;\n}\n\nsub load_small_file {\n    my $file = shift;\n    my %records;\n\n    open my $fh, '&lt;', $file\n        or die \"Cannot open '$file' for reading: $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        # limit the split\n        my ($first, $id, $rest) = split /\\t/, $line, 3;\n        # I drop the id field here so it is not duplicated in the joined\n        # file. If that is not a problem, $records{$id} = $line\n        # would be better.\n        $records{$id} = join(\"\\t\", $first, $rest);\n    }\n\n    return \\%records;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1499294269, "last_edit_date": 1499294269, "creation_date": 1499293219, "answer_id": 44936893, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44936893#44936893", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>If the size of <code>file1</code> is in the order of GB, and you have 3 million columns of data, you have a tiny number of lines (no more than 200). While you can't load all of the lines themselves into memory, you could easily load all of their <em>locations</em>.</p>\n\n<pre><code>use feature qw( say );\n\nuse Fcntl qw( SEEK_SET );\n\nopen(my $fh1, '&lt;', $qfn1) or die(\"Can't open \\\"$qfn1\\\": $!\\n\");\nopen(my $fh2, '&lt;', $qfn2) or die(\"Can't open \\\"$qfn2\\\": $!\\n\");\n\nmy %offsets;\nwhile (1) {\n   my $offset = tell($fh1);\n   my $row1 = &lt;$fh1&gt;;\n   last if !defined($row1);\n\n   chomp($row1);\n   my @fields1 = split(/\\t/, $row1);\n   my $key = $fields1[1];\n   $offsets{$key} = $offset;\n}\n\nwhile (my $row2 = &lt;$fh2&gt;) {\n   chomp($row2);\n   my @fields2 = split(/\\t/, $row2);\n   my $key = $fields2[1];\n   my $offset = $offsets{$key};\n   if (!defined($offset)) {\n      warn(\"Key $key not found.\\n\");\n      next;\n   }\n\n   seek($fh1, $offset, SEEK_SET);\n   my $row1 = &lt;$fh1&gt;;\n   chomp($row1);\n   my @fields1 = split(/\\t/, $row1);\n\n   say join \"\\t\", @fields2, @fields1[6..$#fields1];\n}\n</code></pre>\n\n<p>This approach can be taken in Python as well.</p>\n\n<p>Note: There exists a much simpler solution if the order is more flexible (i.e. if you're ok with the output being ordered as the records are ordered in <code>file1</code>). This assuming <code>file2</code> easily fits in memory.</p>\n"}], "owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 44936893, "answer_count": 3, "score": 2, "last_activity_date": 1499294269, "creation_date": 1499286848, "last_edit_date": 1499288484, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>I want to join two tab separated files, but they are in a different order. I know that it is doable with awk, but I don't know how. Here is the equivalent toy python code (python is too memory inefficient for this task without crazy workarounds):</p>\n\n<pre><code>import pandas as pd\nfrom random import shuffle\n\na = ['bar','qux','baz','foo','spam']\ndf = pd.DataFrame({'nam':a,'asc':[1,2,3,4,5],'desc':[5,4,3,2,1]})\n\nshuffle(a)\nprint(a)\n\ndex = pd.DataFrame({'dex' : a})\ndf_b = pd.DataFrame({'VAL1' :[0,1,2,3,4,5,6]})\n\npd.merge(dex, df,left_on='dex',right_on='nam')[['asc','desc','nam']]\n</code></pre>\n\n<p>I have two files:\nFor file one, column 2 holds the identifier for each row, there 5 columns I don't need, and then there are about 3 million columns of data.</p>\n\n<p>For file two, There are 12 columns, with the second column containing the same identifiers in a different order, along with additional ids.</p>\n\n<p>I want to sort file one to have the same identifiers and order as file two, with the other columns appropriately rearranged.</p>\n\n<p>File one is potentially multiple gigabytes.</p>\n\n<p>Is this easier with awk and/or other GNU tools, or should I use perl?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499286433, "post_id": 44935376, "comment_id": 76847005, "body": "Did you mean <code>time.time()</code> in the last line of your <code>day</code> function?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 7, "creation_date": 1499286710, "post_id": 44935376, "comment_id": 76847140, "body": "You <code>import time</code> <i>inside a function named <code>time</code></i>? It&#39;s not surprising you&#39;re confused about what&#39;s in scope."}, {"owner": {"reputation": 195, "user_id": 8217911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/332e92bfbe1cf59160fcb20ac1994131?s=128&d=identicon&r=PG&f=1", "display_name": "T. Licht", "link": "https://stackoverflow.com/users/8217911/t-licht"}, "edited": false, "score": 0, "creation_date": 1499290317, "post_id": 44935376, "comment_id": 76848893, "body": "That&#39;s right jonrsharpe"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "is_accepted": false, "score": 4, "last_activity_date": 1499286669, "creation_date": 1499286669, "answer_id": 44935480, "question_id": 44935376, "link": "https://stackoverflow.com/questions/44935376/typeerror-module-object-is-not-callable-using-datetime/44935480#44935480", "title": "TypeError: &#39;module&#39; object is not callable - using datetime", "body": "<p>replace your <code>import time</code> to <code>from time import time</code></p>\n"}, {"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499288683, "post_id": 44935563, "comment_id": 76848138, "body": "Read the exception carefully. The <code>datetime</code> module <i>is not</i> his problem. He <i>is</i> using <code>datetime.datetime</code> by doing <code>from datetime import datetime</code>. As Jonrsharpe already said, he&#39;s calling the <code>time</code> module inside of his function also named <code>time</code>."}, {"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1499289518, "post_id": 44935563, "comment_id": 76848507, "body": "@Christian - You are partially right - my answer fixes just the OP <code>time()</code> function. Importing the <code>time</code> module inside its <code>time()</code> function is definitely a bad idea - but <i>without</i> bad consequences for executing it as the <code>import</code> statement imports names into <i>its own</i> name space."}, {"owner": {"reputation": 195, "user_id": 8217911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/332e92bfbe1cf59160fcb20ac1994131?s=128&d=identicon&r=PG&f=1", "display_name": "T. Licht", "link": "https://stackoverflow.com/users/8217911/t-licht"}, "edited": false, "score": 0, "creation_date": 1499290180, "post_id": 44935563, "comment_id": 76848836, "body": "Renaming <code>time()</code> to <code>my_time()</code> and changing <code>datetime.now()</code> to <code>datetime.datetime()</code> fixed it now. Thank you all!"}], "tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 5, "last_activity_date": 1499287755, "last_edit_date": 1499287755, "creation_date": 1499286973, "answer_id": 44935563, "question_id": 44935376, "link": "https://stackoverflow.com/questions/44935376/typeerror-module-object-is-not-callable-using-datetime/44935563#44935563", "title": "TypeError: &#39;module&#39; object is not callable - using datetime", "body": "<p>In your command</p>\n\n<pre><code>nowTime = datetime.now()\n</code></pre>\n\n<p><code>datetime</code> is the <em>module</em> which has no method <code>now()</code>.</p>\n\n<p>You probably wanted</p>\n\n<pre><code>nowTime = datetime.datetime.now()\n</code></pre>\n\n<p>where the first <code>datetime</code> is the <code>module</code>, and the second one is the <code>class</code> in it - with the classmethod <code>now()</code> which creates an <code>object</code> with current local date and time.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 8217911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/332e92bfbe1cf59160fcb20ac1994131?s=128&d=identicon&r=PG&f=1", "display_name": "T. Licht", "link": "https://stackoverflow.com/users/8217911/t-licht"}, "edited": false, "score": 0, "creation_date": 1499290263, "post_id": 44935649, "comment_id": 76848874, "body": "Thanks! Renaming <code>my_time()</code> and changing <code>datetime.now()</code> to <code>datetime.datetime.now</code> fixed the problem. Thanks again!"}], "tags": [], "owner": {"reputation": 169, "user_id": 355034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f18bbe6aabfa5cb7451c9491653e79f5?s=128&d=identicon&r=PG", "display_name": "Bruno Romano", "link": "https://stackoverflow.com/users/355034/bruno-romano"}, "is_accepted": true, "score": 6, "last_activity_date": 1499287321, "creation_date": 1499287321, "answer_id": 44935649, "question_id": 44935376, "link": "https://stackoverflow.com/questions/44935376/typeerror-module-object-is-not-callable-using-datetime/44935649#44935649", "title": "TypeError: &#39;module&#39; object is not callable - using datetime", "body": "<p>It worked for me, try to not create your own time() method, I renamed it to \"my_time()\".</p>\n\n<p>The time module defines a lot of functions so, or you just \"import time\" or you need to specify each function you wanna import like \"from time import sleep\"</p>\n\n<pre><code>from datetime import datetime\nfrom time import time, sleep\nimport random\nimport sys\n\ndef questions():\n    print ('Some things you can ask me:')\n    sleep(1)\n    print ('\u2022 What day is today? (qdh)')\n    sleep(1)\n    print ('\u2022 What time is it? (qhs)')\n    sleep(1)\n    print ('\u2022 I want to play a game! (qjj)')\n    sleep(1)\n    print ('\u2022 How many days till my birthday? (qda)')\n    sleep(1)\n    questionsAnswer = input()\n    if questionsAnswer == 'qdh':\n        day()\n    elif questionsAnswer == 'qhs':\n        my_time()\n    elif questionsAnswer == 'qjj':\n        my_game()\n    else:\n        my_birthday()\n\ndef day():\n    sleep(1)\n    nowDay = datetime.now()\n    print ('Today is %s/%s/%s' % (nowDay.day,nowDay.month,nowDay.year))\n    sleep(2)\n    dayAnswer = input('Want to know what time it is? \"Y\" for yes and \"N\" for no: ').lower()\n    if dayAnswer == 'n':\n        questions()\n    else:\n        my_time()\n\ndef my_time():\n    sleep(1)\n    nowTime = datetime.now()\n    print ('Right now it\\'s %s hours, %s minutes and %s seconds.' % (nowTime.hour, nowTime.minute, nowTime.second))\n    sleep(5)\n    questions()\n\ndef my_game():\n    pass\n\ndef my_birthday():\n    pass\n\n#def start():\nname = input('Hi. What is your name? ')\nprint ('Nice to meet you, ' + str(name) + '.')\nsleep(1)\nprint ('How old are you?')\nage = input()\nsleep(1)\nprint (age + '! Cool.')\nsleep(2)\nquestions()\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 8217911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/332e92bfbe1cf59160fcb20ac1994131?s=128&d=identicon&r=PG&f=1", "display_name": "T. Licht", "link": "https://stackoverflow.com/users/8217911/t-licht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13679, "favorite_count": 1, "accepted_answer_id": 44935649, "answer_count": 3, "score": 4, "last_activity_date": 1535553748, "creation_date": 1499286298, "last_edit_date": 1535553748, "question_id": 44935376, "link": "https://stackoverflow.com/questions/44935376/typeerror-module-object-is-not-callable-using-datetime", "title": "TypeError: &#39;module&#39; object is not callable - using datetime", "body": "<p>Sorry didn't find any other fix, so I created a new question.\nI'm trying to run a code that prints to the screen the current hour, minute and second. The piece of code I'm using to do this is:</p>\n\n<pre><code>def time():\n    import datetime\n    import time\n    time.sleep(1)\n    nowTime = datetime.now()\n    print ('Right now it's %s hours, %s minutes and %s seconds.' % (nowTime.hour,nowTime.minute,nowTime.second))\n    time.sleep(5)\n</code></pre>\n\n<p>I get the following error when this piece of code tries to execute:</p>\n\n<blockquote>\n<pre><code>Traceback (most recent call last):\n  File \"/Users/Teolicht/Desktop/Python/testy.py\", line 219, in &lt;module&gt;\n    start()\n  File \"/Users/Teolicht/Desktop/Python/testy.py\", line 18, in start\n    questions()\n  File \"/Users/Teolicht/Desktop/Python/testy.py\", line 34, in questions\n    day()\n  File \"/Users/Teolicht/Desktop/Python/testy.py\", line 52, in day\n    time()\nTypeError: 'module' object is not callable\n</code></pre>\n</blockquote>\n\n<p><code>start()</code>, <code>questions()</code> and <code>day()</code> are some other functions the program went through before going through <code>time()</code>. If I try executing <code>time()</code> directly, it works! So, here's the entire code from the start till the end of the <code>time()</code> function:</p>\n\n<pre><code>from datetime import datetime\nimport time\nimport random\nimport sys\n\ndef start():\n    import time\n    name = input('Hi. What is your name? ')\n    print ('Nice to meet you, ' + str(name) + '.')\n    time.sleep(1)\n    print ('How old are you?')\n    age = input()\n    time.sleep(1)\n    print (age + '! Cool.')\n    time.sleep(2)\n    questions()\n\ndef questions():\n    import time\n    print ('Some things you can ask me:')\n    time.sleep(1)\n    print ('\u2022 What day is today? (qdh)')\n    time.sleep(1)\n    print ('\u2022 What time is it? (qhs)')\n    time.sleep(1)\n    print ('\u2022 I want to play a game! (qjj)')\n    time.sleep(1)\n    print ('\u2022 How many days till my birthday? (qda)')\n    time.sleep(1)\n    questionsAnswer = input()\n    if questionsAnswer == 'qdh':\n        day()\n    elif questionsAnswer == 'qhs':\n        time()\n    elif questionsAnswer == 'qjj':\n        game()\n    else:\n        birthday()\n\ndef day():\n    import time\n    time.sleep(1)\n    nowDay = datetime.now()\n    print ('Today is %s/%s/%s' % (nowDay.day,nowDay.month,nowDay.year))\n    time.sleep(2)\n    dayAnswer = input('Want to know what time it is? \"Y\" for yes and \"N\" for no: ').lower()\n    if dayAnswer == 'n':\n        questions()\n    else:\n        time()\n\ndef time():\n    import time\n    time.sleep(1)\n    nowTime = datetime.now()\n    print ('Right now it's %s hours, %s minutes and %s seconds.' % (nowTime.hour,nowTime.minute,nowTime.second))\n    time.sleep(5)\n        questions()\n       ...\n</code></pre>\n\n<p>It might be something in <code>start()</code>, <code>questions()</code> or <code>day()</code> causing the error. Any ideas? Thanks a bunch!</p>\n"}, {"tags": ["python", "pandas", "dataframe", "comparison"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6894914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc349c7783e62d272443ba60c88fc11?s=128&d=identicon&r=PG&f=1", "display_name": "eyeweiss", "link": "https://stackoverflow.com/users/6894914/eyeweiss"}, "edited": false, "score": 0, "creation_date": 1499289423, "post_id": 44935454, "comment_id": 76848455, "body": "Wow, this is genius. Thanks a lot!"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 1, "last_activity_date": 1499287086, "last_edit_date": 1499287086, "creation_date": 1499286564, "answer_id": 44935454, "question_id": 44935332, "link": "https://stackoverflow.com/questions/44935332/dynamic-selection-of-dataframe-fields-by-value-comparison/44935454#44935454", "title": "Dynamic selection of dataframe fields by value comparison", "body": "<p>You can put the columns' names to query on in a <strong>list</strong>, and the target values in a <strong>tuple</strong>; Set the columns as index on the data frame and then query with values:</p>\n\n<pre><code>columns = ['column_1', 'column_2']\nvalues = ('value_1', 'value_2')\n\ndf.set_index(columns).loc[values, columnWithValues].sum()\n</code></pre>\n\n<p><em>Example</em>:</p>\n\n<pre><code>df = pd.DataFrame({\n        \"A\": [1,1,1,1,2,2,2,2],\n        \"B\": [1,1,2,2,3,3,4,4],\n        \"C\": [2,1,2,3,4,3,5,6],\n        \"D\": [5,3,2,1,6,7,8,9]\n    })\n\ncolumns = ['A', 'B']\nvalues = (2,4)\ndf.set_index(columns).loc[values, ['C','D']].sum()\n\n#C    11\n#D    17\n#dtype: int64\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6894914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc349c7783e62d272443ba60c88fc11?s=128&d=identicon&r=PG&f=1", "display_name": "eyeweiss", "link": "https://stackoverflow.com/users/6894914/eyeweiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 44935454, "answer_count": 1, "score": 1, "last_activity_date": 1499287086, "creation_date": 1499286130, "last_edit_date": 1499286570, "question_id": 44935332, "link": "https://stackoverflow.com/questions/44935332/dynamic-selection-of-dataframe-fields-by-value-comparison", "title": "Dynamic selection of dataframe fields by value comparison", "body": "<p>I can get the sum of all values in a dataframe meeting specified conditions by typing</p>\n\n<pre><code>df.loc[(df[column_1] == value_1) &amp; (df[column_2] == value_2), columnWithValues].sum()\n</code></pre>\n\n<p>I am looking for an easy solution which uses a set with columns and values specified.\nIs there something like the following?</p>\n\n<pre><code>set_columns = set([column_1, column_2])\nset_values = set([value_1, value_2])\ndf.loc[set_col == set_val, columnWithValues].sum()\n</code></pre>\n\n<p>This way, the input could have any number of arguments.</p>\n"}, {"tags": ["python", "flask", "urllib2"], "comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499286367, "post_id": 44935328, "comment_id": 76846973, "body": "Try to use a <code>process</code> and not a <code>thread</code> and see if that works"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 1, "creation_date": 1499286424, "post_id": 44935328, "comment_id": 76846999, "body": "where are you creating the thread in your <code>app.py</code>?"}, {"owner": {"reputation": 635, "user_id": 997235, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/2c9Bi.jpg?s=128&g=1", "display_name": "pbx", "link": "https://stackoverflow.com/users/997235/pbx"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499298830, "post_id": 44935328, "comment_id": 76851775, "body": "right after the app is created...  app = Flask(_<i>name_</i>)"}, {"owner": {"reputation": 373, "user_id": 3022044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1219391f788235ad42e5e3bc1fdb3a8f?s=128&d=identicon&r=PG&f=1", "display_name": "herokingsley", "link": "https://stackoverflow.com/users/3022044/herokingsley"}, "edited": false, "score": 0, "creation_date": 1499307523, "post_id": 44935328, "comment_id": 76853832, "body": "before the app.run()?   try  use app.run(threaded=True), before in default server (when you debug using werkzeug), there is only one thread."}, {"owner": {"reputation": 635, "user_id": 997235, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/2c9Bi.jpg?s=128&g=1", "display_name": "pbx", "link": "https://stackoverflow.com/users/997235/pbx"}, "edited": false, "score": 0, "creation_date": 1499311359, "post_id": 44935328, "comment_id": 76854721, "body": "I tried what you suggest and initialized the threads after the app.run.  Same problem.  The strange thing is that is seems to happen in opener = urllib2.build_opener(handler).  I looked at the source code here and its just straight initialization it seems, no comm stuff or locking, etc.  No obvious suspects."}, {"owner": {"reputation": 3170, "user_id": 1008681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61d390f373d185083712b99e541ebee7?s=128&d=identicon&r=PG", "display_name": "Joe Doherty", "link": "https://stackoverflow.com/users/1008681/joe-doherty"}, "edited": false, "score": 0, "creation_date": 1499328615, "post_id": 44935328, "comment_id": 76862036, "body": "Please remember that Python has a GIL so there is no real parallelism. You may want to use a worker queue like Celery. Also which version of Python are you using?"}], "owner": {"reputation": 635, "user_id": 997235, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/2c9Bi.jpg?s=128&g=1", "display_name": "pbx", "link": "https://stackoverflow.com/users/997235/pbx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499286123, "creation_date": 1499286123, "question_id": 44935328, "link": "https://stackoverflow.com/questions/44935328/why-does-a-flask-apps-main-thread-block-another-thread-from-sending-data", "title": "Why does a Flask apps main thread block another thread from sending data?", "body": "<p>I have a Flask app that spawns an internal thread to send data to another server periodically.</p>\n\n<p>When the Flask app is initialized, the new thread is spawned:</p>\n\n<pre><code>sthread = Thread(target=DataPush, args=())\nsthread.start()\n</code></pre>\n\n<p>Then inside sthread:</p>\n\n<pre><code>def DataPush():\n\n    while True:\n\n            # data contains the POST data\n\n            method = \"POST\"\n            handler = urllib2.HTTPHandler()\n            opener = urllib2.build_opener(handler)\n            request = urllib2.Request(server_url, data=data)\n            request.add_header(\"Content-Type\",'application/json')\n            request.get_method = lambda: method\n            try:\n                connection = opener.open(request)\n            except urllib2.HTTPError,e:\n                connection = e\n\n            if connection.code == 200:\n                ndata = connection.read()\n                print(ndata)\n            else:\n                print('error:' + str(connection.code))\n\n        time.sleep(5)\n</code></pre>\n\n<p>The send is blocked (blocked at build_opener) apparently by the Flask apps main thread.  If I ctrl-C, the main flask app thread is killed, and suddenly the data send works (of course now the Flask app functionally is killed).</p>\n\n<p>What is blocking the send?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1499286381, "post_id": 44935324, "comment_id": 76846980, "body": "By panel do you mean the pandas data structure (i.e. pd.Panel)? Or a collection of DataFrames? If it is a collection of DataFrames, how do you store them? In a list?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1499286418, "post_id": 44935324, "comment_id": 76846998, "body": "@ayhan a pandas panel, I&#39;ll clarify on the question"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1499287329, "post_id": 44935324, "comment_id": 76847448, "body": "I am not sure about the structure of your panel but something like  <code>pn.minor_xs(&#39;time&#39;).T</code> should work."}, {"owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "edited": false, "score": 2, "creation_date": 1499287632, "post_id": 44935324, "comment_id": 76847599, "body": "You should be able to convert from panel to multi-index dataframe with <code>to_frame()</code>:  <a href=\"https://pandas.pydata.org/pandas-docs/stable/dsintro.html#conversion-to-dataframe\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/&hellip;</a>  Can&#39;t test as you didn&#39;t provide sample data.  More generally if you read the other things at that link you&#39;ll find that panel is deprecated in favor of either multi-indexed dataframes or xarrays."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 2, "creation_date": 1499287805, "post_id": 44935324, "comment_id": 76847699, "body": "PlusOne4AsciiDiagram"}, {"owner": {"reputation": 3333, "user_id": 1115377, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/25160914a37b80148786c38bfef89012?s=128&d=identicon&r=PG", "display_name": "tagoma", "link": "https://stackoverflow.com/users/1115377/tagoma"}, "edited": false, "score": 0, "creation_date": 1499288535, "post_id": 44935324, "comment_id": 76848074, "body": "BTW it is a good idea to start forgetting pandas.Panel() as it is now deprecated. <a href=\"http://pandas.pydata.org/pandas-docs/version/0.20/whatsnew.html#deprecate-panel\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/version/0.20/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1499290498, "last_edit_date": 1499290498, "creation_date": 1499288932, "answer_id": 44936017, "question_id": 44935324, "link": "https://stackoverflow.com/questions/44935324/transform-pandas-panel-into-dataframe/44936017#44936017", "title": "Transform pandas panel into dataframe", "body": "<p><strong>Option 1</strong><br>\n<em><code>pd.concat</code></em>  </p>\n\n<pre><code>pd.concat({i: d.set_index('context').time for i, d in pn.iteritems()}).unstack()\n\ncontext  foo  bar  baz\n0         21   37   53\n1         36   42   76\n2         24   56   83\n3         17   32   45\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\n<em><code>pd.DataFrame</code></em>  </p>\n\n<pre><code>pd.DataFrame([d.set_index('context').time for i, d in pn.iteritems()], pn.items)\n\ncontext  foo  bar  baz\n0         21   37   53\n1         36   42   76\n2         24   56   83\n3         17   32   45\n</code></pre>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 44936017, "answer_count": 1, "score": 3, "last_activity_date": 1499290498, "creation_date": 1499286117, "last_edit_date": 1499286448, "question_id": 44935324, "link": "https://stackoverflow.com/questions/44935324/transform-pandas-panel-into-dataframe", "title": "Transform pandas panel into dataframe", "body": "<p>I have a <strong><code>pandas.Panel</code></strong>, and I want to create a <strong><code>pandas.DataFrame</code></strong> with the column headers coming from one column, the data from another column, and the number of rows is the number of items in the panel.</p>\n\n<p>If diagrams will help describe what I'm looking for...</p>\n\n<p>My panel looks somewhat like the following:</p>\n\n<pre><code>      +---+---------+------------+------+\n    +---+---------+------------+------+ |\n  +---+---------+------------+------+ |-+\n+---+---------+------------+------+ |-+ |\n|   | context | iterations | time |-+ |-+\n+---+---------+------------+------+ |-+ |\n| 0 | foo     |          1 |   21 |-+ |-+\n+---+---------+------------+------+ |-+ |\n| 1 | bar     |          2 |   37 |-+ |-+\n+---+---------+------------+------+ |-+\n| 2 | baz     |          1 |   53 |-+\n+---+---------+------------+------+\n</code></pre>\n\n<p>I would like to transform the panel into a dataframe:</p>\n\n<ul>\n<li>The dataframe column headers are the <strong>\"context\" column</strong></li>\n<li>The dataframe values are the <strong>\"time\" column</strong></li>\n<li>The number of rows in the dataframe is the <strong>number of items in the panel</strong></li>\n</ul>\n\n<p>The result would look something like this:</p>\n\n<pre><code>+---+-----+-----+-----+\n|   | foo | bar | baz |\n+---+-----+-----+-----+\n| 0 |  21 |  37 |  53 |\n+---+-----+-----+-----+\n| 1 |  36 |  42 |  76 |\n+---+-----+-----+-----+\n| 2 |  24 |  56 |  83 |\n+---+-----+-----+-----+\n| 3 |  17 |  32 |  45 |\n+---+-----+-----+-----+\n</code></pre>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "owner": {"reputation": 81, "user_id": 1826935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4796d074f714b6d9ce172098d1ea0e09?s=128&d=identicon&r=PG", "display_name": "Vladislav Vasyuk", "link": "https://stackoverflow.com/users/1826935/vladislav-vasyuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1499286036, "creation_date": 1499286036, "question_id": 44935307, "link": "https://stackoverflow.com/questions/44935307/error-with-flask-sqlalchemy-models-committed-signal", "title": "Error with Flask-SQLAlchemy models_committed signal", "body": "<p>I want to do some database manipulations after model inserted into the database. So I made a hook for this:</p>\n\n<pre><code>@models_committed.connect\ndef on_models_committed(sender, changes):\n    for obj, change in changes:\n        if change == 'delete' and hasattr(obj, '__commit_delete__'):\n            obj.__commit_delete__()\n        elif change == 'insert' and hasattr(obj, '__commit_insert__'):\n            obj.__commit_insert__()\n        elif change == 'update' and hasattr(obj, '__commit_update__'):\n            obj.__commit_update__()\n</code></pre>\n\n<p>In model I have:</p>\n\n<pre><code>def __commit_insert__(self):\n    result = Model.query.filter(...).one()\n</code></pre>\n\n<p>And when this code is executed, the following error occurs:</p>\n\n<pre><code>sqlalchemy.exc.InvalidRequestError: This session is in 'committed' state; no further SQL can be emitted within this transaction.\n</code></pre>\n\n<p>How to avoid this? In the method __commit_insert__ I need the primary key of the inserted record, so for this case the native events \"after_insert\" and \"after_flush\" of SQLAlchemy is not suitable</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "technical-indicator"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1499288708, "post_id": 44935269, "comment_id": 76848149, "body": "Please add fomatting to your question."}, {"owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1499318868, "post_id": 44935269, "comment_id": 76856689, "body": "Sure, I will add formatting next time. Looks like this time some did it on my behalf. Thanks"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1499348929, "post_id": 44935269, "comment_id": 76876646, "body": "Great @arkochhar!! and welcome to SO."}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503678807, "post_id": 44935269, "comment_id": 78730607, "body": "check out <code>shift</code>. it should put you on the right track."}, {"owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "reply_to_user": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503692360, "post_id": 44935269, "comment_id": 78737173, "body": "Thanks for your inputs @acushner. I have tried <code>shift</code>. I replaced above with <code>df[&#39;final_ub&#39;] = np.where(np.logical_or(df[&#39;basic_ub&#39;] &lt; df[&#39;final_ub&#39;].shift(), df[&#39;close&#39;].shift() &gt; df[&#39;final_ub&#39;].shift()), df[&#39;basic_ub&#39;], df[&#39;final_ub&#39;].shift())</code> and <code>df[&#39;final_lb&#39;] = np.where(np.logical_or(df[&#39;basic_lb&#39;] &gt; df[&#39;final_lb&#39;].shift(), df[&#39;close&#39;].shift() &lt; df[&#39;final_lb&#39;].shift()), df[&#39;basic_lb&#39;], df[&#39;final_lb&#39;].shift())</code>. However I need to initialise <code>df[&#39;final_ub&#39;] = 0.00</code> and <code>df[&#39;final_lb&#39;] = 0.00</code>, else I get <code>KeyError</code> exception.Yet the results are totally off. I am still debugging Any idea?"}, {"owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "edited": false, "score": 0, "creation_date": 1503692923, "post_id": 44935269, "comment_id": 78737406, "body": "You could checkout my code from my <a href=\"https://github.com/arkochhar/Technical-Indicators\" rel=\"nofollow noreferrer\">Git</a>"}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503699462, "post_id": 44935269, "comment_id": 78739675, "body": "in this case, you&#39;re going to have to use apply for this. you can&#39;t vectorize the operation because upperband depends on its previous value."}, {"owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "reply_to_user": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503751628, "post_id": 44935269, "comment_id": 78749862, "body": "Thanks @acushner. Would <code>apply</code> not have same issue because we will need to refer to the previous value of the new column that is being added? Could you share a more an example that refers to a previous value on the web, if possible?"}, {"owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "reply_to_user": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503759733, "post_id": 44935269, "comment_id": 78752276, "body": "@acushner, I am added a new question at <a href=\"https://stackoverflow.com/questions/45896726/access-previous-value-in-same-dataframe-column\">link</a>. Please look into it, if you can. Thanks"}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1503765334, "post_id": 44935269, "comment_id": 78753929, "body": "you would have to create an externally scoped list for final upperband that apply can append to at first, then add that as a column to the df, then run the bottom part of your algo."}], "answers": [{"comments": [{"owner": {"reputation": 1441, "user_id": 11680578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z9YaX.jpg?s=128&g=1", "display_name": "Catalina Chircu", "link": "https://stackoverflow.com/users/11680578/catalina-chircu"}, "edited": false, "score": 0, "creation_date": 1590217442, "post_id": 61968065, "comment_id": 109601903, "body": "You can also use for comprehensions or an applymap or apply (on the row). In your for loop you never use <code>row</code>, you can delete it."}], "tags": [], "owner": {"reputation": 1, "user_id": 12937449, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDdmLQVwfIi2MEWH9UrFYgMHVFBoDBFvPwuFkgP9g=k-s128", "display_name": "Bibeesh Y S", "link": "https://stackoverflow.com/users/12937449/bibeesh-y-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1590213261, "creation_date": 1590213261, "answer_id": 61968065, "question_id": 44935269, "link": "https://stackoverflow.com/questions/44935269/supertrend-code-using-pandas-python/61968065#61968065", "title": "SuperTrend code using pandas python", "body": "<p>Use this complete code </p>\n\n<pre><code>import numpy as np\nimport yfinance as yf\nimport pandas_datareader as pdr\nimport pandas as pd\n\ndata =yf.download(\"ACC.NS\", period=\"1d\",interval=\"5m\")\ndata=data.reset_index(drop=True)\n\ndata['tr0'] = abs(data[\"High\"] - data[\"Low\"])\ndata['tr1'] = abs(data[\"High\"] - data[\"Close\"].shift(1))\ndata['tr2'] = abs(data[\"Low\"]- data[\"Close\"].shift(1))\ndata[\"TR\"] = round(data[['tr0', 'tr1', 'tr2']].max(axis=1),2)\ndata[\"ATR\"]=0.00\ndata['BUB']=0.00\ndata[\"BLB\"]=0.00\ndata[\"FUB\"]=0.00\ndata[\"FLB\"]=0.00\ndata[\"ST\"]=0.00\n\n# Calculating ATR \nfor i, row in data.iterrows():\n    if i == 0:\n        data.loc[i,'ATR'] = 0.00#data['ATR'].iat[0]\n    else:\n        data.loc[i,'ATR'] = ((data.loc[i-1,'ATR'] * 13)+data.loc[i,'TR'])/14\n\ndata['BUB'] = round(((data[\"High\"] + data[\"Low\"]) / 2) + (2 * data[\"ATR\"]),2)\ndata['BLB'] = round(((data[\"High\"] + data[\"Low\"]) / 2) - (2 * data[\"ATR\"]),2)\n\n\n# FINAL UPPERBAND = IF( (Current BASICUPPERBAND &lt; Previous FINAL UPPERBAND) or (Previous Close &gt; Previous FINAL UPPERBAND))\n#                     THEN (Current BASIC UPPERBAND) ELSE Previous FINALUPPERBAND)\n\n\nfor i, row in data.iterrows():\n    if i==0:\n        data.loc[i,\"FUB\"]=0.00\n    else:\n        if (data.loc[i,\"BUB\"]&lt;data.loc[i-1,\"FUB\"])|(data.loc[i-1,\"Close\"]&gt;data.loc[i-1,\"FUB\"]):\n            data.loc[i,\"FUB\"]=data.loc[i,\"BUB\"]\n        else:\n            data.loc[i,\"FUB\"]=data.loc[i-1,\"FUB\"]\n\n# FINAL LOWERBAND = IF( (Current BASIC LOWERBAND &gt; Previous FINAL LOWERBAND) or (Previous Close &lt; Previous FINAL LOWERBAND)) \n#                     THEN (Current BASIC LOWERBAND) ELSE Previous FINAL LOWERBAND)\n\nfor i, row in data.iterrows():\n    if i==0:\n        data.loc[i,\"FLB\"]=0.00\n    else:\n        if (data.loc[i,\"BLB\"]&gt;data.loc[i-1,\"FLB\"])|(data.loc[i-1,\"Close\"]&lt;data.loc[i-1,\"FLB\"]):\n            data.loc[i,\"FLB\"]=data.loc[i,\"BLB\"]\n        else:\n            data.loc[i,\"FLB\"]=data.loc[i-1,\"FLB\"]\n\n\n\n# SUPERTREND = IF((Previous SUPERTREND = Previous FINAL UPPERBAND) and (Current Close &lt;= Current FINAL UPPERBAND)) THEN\n#                 Current FINAL UPPERBAND\n#             ELSE\n#                 IF((Previous SUPERTREND = Previous FINAL UPPERBAND) and (Current Close &gt; Current FINAL UPPERBAND)) THEN\n#                     Current FINAL LOWERBAND\n#                 ELSE\n#                     IF((Previous SUPERTREND = Previous FINAL LOWERBAND) and (Current Close &gt;= Current FINAL LOWERBAND)) THEN\n#                         Current FINAL LOWERBAND\n#                     ELSE\n#                         IF((Previous SUPERTREND = Previous FINAL LOWERBAND) and (Current Close &lt; Current FINAL LOWERBAND)) THEN\n#                             Current FINAL UPPERBAND\n\n\nfor i, row in data.iterrows():\n    if i==0:\n        data.loc[i,\"ST\"]=0.00\n    elif (data.loc[i-1,\"ST\"]==data.loc[i-1,\"FUB\"]) &amp; (data.loc[i,\"Close\"]&lt;=data.loc[i,\"FUB\"]):\n        data.loc[i,\"ST\"]=data.loc[i,\"FUB\"]\n    elif (data.loc[i-1,\"ST\"]==data.loc[i-1,\"FUB\"])&amp;(data.loc[i,\"Close\"]&gt;data.loc[i,\"FUB\"]):\n        data.loc[i,\"ST\"]=data.loc[i,\"FLB\"]\n    elif (data.loc[i-1,\"ST\"]==data.loc[i-1,\"FLB\"])&amp;(data.loc[i,\"Close\"]&gt;=data.loc[i,\"FLB\"]):\n        data.loc[i,\"ST\"]=data.loc[i,\"FLB\"]\n    elif (data.loc[i-1,\"ST\"]==data.loc[i-1,\"FLB\"])&amp;(data.loc[i,\"Close\"]&lt;data.loc[i,\"FLB\"]):\n        data.loc[i,\"ST\"]=data.loc[i,\"FUB\"]\n\n# Buy Sell Indicator\nfor i, row in data.iterrows():\n    if i==0:\n        data[\"ST_BUY_SELL\"]=\"NA\"\n    elif (data.loc[i,\"ST\"]&lt;data.loc[i,\"Close\"]) :\n        data.loc[i,\"ST_BUY_SELL\"]=\"BUY\"\n    else:\n        data.loc[i,\"ST_BUY_SELL\"]=\"SELL\"\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 249, "user_id": 8261343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb765443cf7c20cb71e0ba142cc3014?s=128&d=identicon&r=PG&f=1", "display_name": "arkochhar", "link": "https://stackoverflow.com/users/8261343/arkochhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7471, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1614132485, "creation_date": 1499285890, "last_edit_date": 1503692538, "question_id": 44935269, "link": "https://stackoverflow.com/questions/44935269/supertrend-code-using-pandas-python", "title": "SuperTrend code using pandas python", "body": "<p>I am trying to code the following algorithm for SuperTrend indicator in python using pandas.</p>\n\n<pre><code>BASIC UPPERBAND = (HIGH + LOW) / 2 + Multiplier * ATR\nBASIC LOWERBAND = (HIGH + LOW) / 2 - Multiplier * ATR\n\nFINAL UPPERBAND = IF( (Current BASICUPPERBAND &lt; Previous FINAL UPPERBAND) or (Previous Close &gt; Previous FINAL UPPERBAND))\n                    THEN (Current BASIC UPPERBAND) ELSE Previous FINALUPPERBAND)\nFINAL LOWERBAND = IF( (Current BASIC LOWERBAND &gt; Previous FINAL LOWERBAND) or (Previous Close &lt; Previous FINAL LOWERBAND)) \n                    THEN (Current BASIC LOWERBAND) ELSE Previous FINAL LOWERBAND)\n\nSUPERTREND = IF((Previous SUPERTREND = Previous FINAL UPPERBAND) and (Current Close &lt;= Current FINAL UPPERBAND)) THEN\n                Current FINAL UPPERBAND\n            ELSE\n                IF((Previous SUPERTREND = Previous FINAL UPPERBAND) and (Current Close &gt; Current FINAL UPPERBAND)) THEN\n                    Current FINAL LOWERBAND\n                ELSE\n                    IF((Previous SUPERTREND = Previous FINAL LOWERBAND) and (Current Close &gt;= Current FINAL LOWERBAND)) THEN\n                        Current FINAL LOWERBAND\n                    ELSE\n                        IF((Previous SUPERTREND = Previous FINAL LOWERBAND) and (Current Close &lt; Current FINAL LOWERBAND)) THEN\n                            Current FINAL UPPERBAND\n</code></pre>\n\n<p>Here is the code that I wrote and tested:</p>\n\n<pre><code># Compute basic upper and lower bands\ndf['basic_ub'] = (df['high'] + df['low']) / 2 + multiplier * df[atr]\ndf['basic_lb'] = (df['high'] + df['low']) / 2 - multiplier * df[atr]\n\n# Compute final upper and lower bands\nfor i in range(0, len(df)):\n    if i &lt; period:\n        df.set_value(i, 'basic_ub', 0.00)\n        df.set_value(i, 'basic_lb', 0.00)\n        df.set_value(i, 'final_ub', 0.00)\n        df.set_value(i, 'final_lb', 0.00)\n    else:\n        df.set_value(i, 'final_ub', (df.get_value(i, 'basic_ub') \n                                     if df.get_value(i, 'basic_ub') &lt; df.get_value(i-1, 'final_ub') or df.get_value(i-1, 'close') &gt; df.get_value(i-1, 'final_ub') \n                                     else df.get_value(i-1, 'final_ub')))\n        df.set_value(i, 'final_lb', (df.get_value(i, 'basic_lb') \n                                     if df.get_value(i, 'basic_lb') &gt; df.get_value(i-1, 'final_lb') or df.get_value(i-1, 'close') &lt; df.get_value(i-1, 'final_lb') \n                                     else df.get_value(i-1, 'final_lb')))\n\n# Set the Supertrend value\nfor i in range(0, len(df)):\n    if i &lt; period:\n        df.set_value(i, st, 0.00)\n    else:\n        df.set_value(i, 'st', (df.get_value(i, 'final_ub')\n                             if ((df.get_value(i-1, 'st') == df.get_value(i-1, 'final_ub')) and (df.get_value(i, 'close') &lt;= df.get_value(i, 'final_ub')))\n                             else (df.get_value(i, 'final_lb')\n                                   if ((df.get_value(i-1, 'st') == df.get_value(i-1, 'final_ub')) and (df.get_value(i, 'close') &gt; df.get_value(i, 'final_ub')))\n                                   else (df.get_value(i, 'final_lb')\n                                         if ((df.get_value(i-1, 'st') == df.get_value(i-1, 'final_lb')) and (df.get_value(i, 'close') &gt;= df.get_value(i, 'final_lb')))\n                                         else (df.get_value(i, 'final_ub')\n                                               if((df.get_value(i-1, 'st') == df.get_value(i-1, 'final_lb')) and (df.get_value(i, 'close') &lt; df.get_value(i, 'final_lb')))\n                                               else 0.00\n                                              )\n                                        )\n                                  ) \n                            )\n                    )\n\n\n# Mark the trend direction up/down\ndf['stx'] = np.where((df['st'] &gt; 0.00), np.where((df['close'] &lt; df['st']), 'down',  'up'), np.NaN)\n</code></pre>\n\n<p>I works, but I am not happy with the for loop. Can anyone help optimise it?</p>\n\n<p>You can find the released code on <a href=\"https://github.com/arkochhar/Technical-Indicators/blob/master/indicator/__init__.py\" rel=\"nofollow noreferrer\">Github</a>!</p>\n"}, {"tags": ["python", "output", "python-unicode"], "comments": [{"owner": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499286089, "post_id": 44935219, "comment_id": 76846822, "body": "with open(&quot;C:/output/result.txt&quot;, &quot;w&quot;, encoding=&quot;utf8&quot;) as r:  did you try this?"}, {"owner": {"reputation": 23, "user_id": 8261326, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d87d1de53237de2eb501b6aa758c496d?s=128&d=identicon&r=PG&f=1", "display_name": "Gator", "link": "https://stackoverflow.com/users/8261326/gator"}, "reply_to_user": {"reputation": 601, "user_id": 3748325, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/521cb5308e4bfea8b84cee777c01d00d?s=128&d=identicon&r=PG&f=1", "display_name": "Salmaan P", "link": "https://stackoverflow.com/users/3748325/salmaan-p"}, "edited": false, "score": 0, "creation_date": 1499286616, "post_id": 44935219, "comment_id": 76847086, "body": "Yes, I&#39;ve tried &quot;utf8&quot; and &quot;latin-1&quot; just to see if either would fix it. I actually placed the encoding=&#39;code&#39; in the open.read() statement, is that incorrect? IE:  with open(&#39;C:/output/&#39; + filename, encoding=&#39;code&#39;) as file:"}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1499291168, "post_id": 44935219, "comment_id": 76849273, "body": "try &quot;mbcs&quot;, helped me quite some times"}, {"owner": {"reputation": 23, "user_id": 8261326, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d87d1de53237de2eb501b6aa758c496d?s=128&d=identicon&r=PG&f=1", "display_name": "Gator", "link": "https://stackoverflow.com/users/8261326/gator"}, "edited": false, "score": 0, "creation_date": 1499344979, "post_id": 44935219, "comment_id": 76873438, "body": "Thank you HunkDivine ! I find it strange that the encoding didn&#39;t work with the other code I had... Nonetheless, I&#39;m a step closer to the finish line! Thanks again."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 8113271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa593b8c4b42e7d1bdc0a6c74231cda7?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Garcia", "link": "https://stackoverflow.com/users/8113271/jos%c3%a9-garcia"}, "is_accepted": false, "score": 0, "last_activity_date": 1499285979, "creation_date": 1499285979, "answer_id": 44935294, "question_id": 44935219, "link": "https://stackoverflow.com/questions/44935219/how-to-search-a-folder-of-text-files-to-see-if-a-specific-string-exists-and-then/44935294#44935294", "title": "How to search a folder of text files to see if a specific string exists and then extract a string between two words using Python?", "body": "<p>if you are working with windows try using double \"\\\" instead of  single\"/\" in path names</p>\n"}], "owner": {"reputation": 23, "user_id": 8261326, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d87d1de53237de2eb501b6aa758c496d?s=128&d=identicon&r=PG&f=1", "display_name": "Gator", "link": "https://stackoverflow.com/users/8261326/gator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499362541, "creation_date": 1499285762, "last_edit_date": 1499362541, "question_id": 44935219, "link": "https://stackoverflow.com/questions/44935219/how-to-search-a-folder-of-text-files-to-see-if-a-specific-string-exists-and-then", "title": "How to search a folder of text files to see if a specific string exists and then extract a string between two words using Python?", "body": "<p>Currently, I'm just trying to figure out why this code won't work.</p>\n\n<p>EDIT: wrote some new code</p>\n\n<p>EDIT 2: SOLVED (reading through comments reminded me to encode the with.open() so it looks like this now,</p>\n\n<p>EDIT 3: New code for pulling the \"string\" (date) I need between two words. </p>\n\n<pre><code>import os\nitems=os.listdir(\"C:/output\")\n\n\nfor names in items:\n  if names.endswith(\".txt\"):\n    with open('C:/output/' + names, encoding=\"utf8\") as currentFile:\n      text = currentFile.read()\n      if ('Date Released' in text):\n           a = 'Released'\n           b = 'Description'\n           startpos = text.find(a) + len(a)\n           endpos = text.find(b, startpos)\n           print('Date Released ' + text[startpos:endpos] + names + '\\n')\n           #print ('Found in ' + names[:-4] + '\\n')\n      else:\n          print ('Not in ' + names[:-4] + '\\n')\n</code></pre>\n\n<p>I'm now getting the output:</p>\n\n<pre><code>Date Released :  12/14/2016\n\n\n\n1393-004IP_ B_ C2  filename\n\nDate Released :  4/11/2017\n\n\n\n1476-002 IP, filename\n\nDate Released :  9/25/2015\n\n\n\n1987-XXX IP filename\n</code></pre>\n\n<p>Is there a way to get the Date Released : #/##/#### line on the same line as the file name? Also, some output I get when I run this right now is garbage. I'm assuming it could be from checking for Date Released more than once or a possible flaw with the if condition?</p>\n"}, {"tags": ["python", "subclass", "immutability"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499285846, "post_id": 44935204, "comment_id": 76846673, "body": "You can not make the integer itself mutable (unless you write an extension in C), but you can certainly use it instead of extending it."}], "answers": [{"comments": [{"owner": {"reputation": 2094, "user_id": 2069572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96d9436269fcd61678ca4543145cb1f1?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2069572/stephen"}, "edited": false, "score": 0, "creation_date": 1499289157, "post_id": 44935281, "comment_id": 76848340, "body": "works like a champ, and yes, the most important thing is that it can be used with <code>struct.pack</code>."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1499297029, "last_edit_date": 1499297029, "creation_date": 1499285938, "answer_id": 44935281, "question_id": 44935204, "link": "https://stackoverflow.com/questions/44935204/how-to-subclass-int-and-make-it-mutable/44935281#44935281", "title": "How to subclass int and make it mutable", "body": "<blockquote>\n  <p>Is it possible to subclass int and make it mutable?</p>\n</blockquote>\n\n<p>Sort of. You can add all the mutable parts you want, but you can't touch the int parts, so the degree of mutability you can add won't help you.</p>\n\n<p>Instead, don't use an int subclass. Use a regular object that stores an int. If you want to be able to pass it to <code>struct.pack</code> like an int, implement an <code>__index__</code> method to define how to interpret your object as an int:</p>\n\n<pre><code>class IntLike(object): # not IntLike(int):\n    def __init__(self, value=0):\n        self.value = value\n    def __index__(self):\n        return self.value\n    ...\n</code></pre>\n\n<p>You can implement additional methods like <code>__or__</code> for <code>|</code> and <code>__ior__</code> for in-place, mutative <code>|=</code>. Don't try to push too hard for complete interoperability with ints, though; for example, don't try to make your objects usable as dict keys. They're mutable, after all.</p>\n\n<p>If it's really important to you that your class is an <code>int</code> subclass, you're going to have to sacrifice the <code>c.sixth_property = True</code> syntax you want. You'll have to pick an alternative like <code>c = c.with_sixth_property(True)</code>, and implement things non-mutatively.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6243895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd98fec5f247697bdcbcce7bd2b075b?s=128&d=identicon&r=PG", "display_name": "hevangel", "link": "https://stackoverflow.com/users/6243895/hevangel"}, "is_accepted": false, "score": 0, "last_activity_date": 1560297186, "creation_date": 1560297186, "answer_id": 56553004, "question_id": 44935204, "link": "https://stackoverflow.com/questions/44935204/how-to-subclass-int-and-make-it-mutable/56553004#56553004", "title": "How to subclass int and make it mutable", "body": "<p>Here is my solution.  It also make an integer iteratable too.</p>\n\n<pre><code>import ctypes\n\nclass MutableInt(int):\n    def __init__(self, val = 0):\n        self._val = val\n\n    def __int__(self):\n        return self._val\n\n    def __index__(self):\n        return self._val\n\n    def __str__(self):\n        return str(self._val)\n\n    def __repr__(self):\n        return repr(self._val)\n\n    def __iter__(self):\n        self._iter_cnt = 0\n        return self\n\n    def __next__(self):\n        if self._iter_cnt == 0:\n            self._iter_cnt = 1\n            return self._val\n        else:\n            raise StopIteration\n\n    def set(self, val):\n        self._val = val\n        ob_digit = ctypes.c_long.from_address(id(self)+24)\n        ob_digit.value = val\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6243895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd98fec5f247697bdcbcce7bd2b075b?s=128&d=identicon&r=PG", "display_name": "hevangel", "link": "https://stackoverflow.com/users/6243895/hevangel"}, "is_accepted": false, "score": 1, "last_activity_date": 1573608011, "creation_date": 1573608011, "answer_id": 58828998, "question_id": 44935204, "link": "https://stackoverflow.com/questions/44935204/how-to-subclass-int-and-make-it-mutable/58828998#58828998", "title": "How to subclass int and make it mutable", "body": "<p>I just package up my proof-of-concept code and upload a mutableint package to PyPi.</p>\n\n<p><a href=\"https://pypi.org/project/mutableint/\" rel=\"nofollow noreferrer\">https://pypi.org/project/mutableint/</a></p>\n\n<p>Here is the usage.</p>\n\n<pre><code>from mutableint import MutableInt\n\n# create a mutable integer with value 10 \na = MutableInt(10)\n\n# change the value of a to 11\na.set(11)\n</code></pre>\n"}], "owner": {"reputation": 2094, "user_id": 2069572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96d9436269fcd61678ca4543145cb1f1?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2069572/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2552, "favorite_count": 2, "accepted_answer_id": 44935281, "answer_count": 3, "score": 1, "last_activity_date": 1573608011, "creation_date": 1499285692, "last_edit_date": 1592644375, "question_id": 44935204, "link": "https://stackoverflow.com/questions/44935204/how-to-subclass-int-and-make-it-mutable", "title": "How to subclass int and make it mutable", "body": "<p>Is it possible to subclass <code>int</code> and make it mutable?</p>\n<p>Consider the following class:</p>\n<pre><code>class CustomBitVector(int):\n\n    # bit 7\n    @property\n    def seventh_property(self):\n        return bool(self &amp; (1 &lt;&lt; 7))\n\n    @seventh_property.setter\n    def seventh_property(self, val):\n        self |= bool(val) &lt;&lt; 7\n\n    # bit 6\n    @property\n    def sixth_property(self):\n        return bool(self &amp; (1 &lt;&lt; 6))\n\n    @sixth_property.setter\n    def sixth_property(self, val):\n        self |= bool(val) &lt;&lt; 6\n\n\n    # ... a few more of these ...\n\n    # bit 0\n    @property\n    def zeroth_property(self):\n        return bool(self &amp; (1 &lt;&lt; 0))\n\n    @zeroth_property.setter\n    def zeroth_property(self, val):\n        self |= bool(val) &lt;&lt; 0\n</code></pre>\n<p>I trying to make a nice interface to a bit vector. I'm reading a proprietary protocol off of a socket and I've made classes to represent the messages I'm sending/receiving. Often these messages include bit vectors and it would be nice to deal with them like this.</p>\n<p>This already works great for reading the bit vector values, but setting them doesn't work because <code>int</code> is immutable.</p>\n<p>If I rewrite one of the setters like:</p>\n<pre><code>@sixth_property.setter\ndef sixth_property(self, val):\n    print 'before:', self\n    self |= bool(val) &lt;&lt; 6\n    print 'after:', self\n</code></pre>\n<p>Then I get this behavior:</p>\n<pre><code>In [2]: c = CustomBitVector()\n\nIn [3]: c.sixth_property\nOut[3]: False\n\nIn [4]: c.sixth_property = True\nbefore: 0\nafter: 64\n\nIn [5]: c\nOut[5]: 0\n\nIn [6]: c.sixth_property\nOut[6]: False\n</code></pre>\n<p>I can see my folly ... I'm assigning to <code>self</code> instead of modifying it. How can I modify <code>self</code> in this case?</p>\n<p>Any crazy hack to make this happen? Maybe using a metaclass or something?</p>\n<hr />\nUPDATE\n<p>I forgot to mention a requirement:</p>\n<p>Instances of <code>CustomBitVector</code> must behave like <code>int</code>. In particular, I need to be able to pass them to <code>struct.pack</code></p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1499285994, "post_id": 44935203, "comment_id": 76846764, "body": "Look at <code>map</code> rather than <code>merge</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1499286656, "creation_date": 1499286656, "answer_id": 44935476, "question_id": 44935203, "link": "https://stackoverflow.com/questions/44935203/python-pandas-merge-multiple-tables-according-to-a-index-table/44935476#44935476", "title": "python: pandas: Merge multiple tables according to a index table", "body": "<p>Let's try:</p>\n\n<pre><code>table_d['value1'] = table_d['Table_A'].map(table_a.set_index('id1')['value1'])\n\ntable_d['value2'] = table_d['Table_B'].map(table_b.set_index('id2')['value2'])\n\ntable_d.merge(table_c, left_on='Table_C', right_on='id3')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   Table_A  Table_B  Table_C  value1  value2  id3  value3        value4\n0      1.0      3.0        2    23.0   berry    2   green      superman\n1      3.0      NaN        4  2342.0     NaN    4    gray       aquaman\n2      2.0      2.0        3    34.0  banana    3   white  wonder woman\n3      4.0      1.0        1   333.0   apple    1     red        batman\n4      NaN      NaN        5     NaN     NaN    5  yellow         flash\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 7274830, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/36de22b80bbbe913bb9c68b0d68b98b2?s=128&d=identicon&r=PG&f=1", "display_name": "kkjoe", "link": "https://stackoverflow.com/users/7274830/kkjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499286656, "creation_date": 1499285691, "question_id": 44935203, "link": "https://stackoverflow.com/questions/44935203/python-pandas-merge-multiple-tables-according-to-a-index-table", "title": "python: pandas: Merge multiple tables according to a index table", "body": "<p>For example, I have three tables A, B, C</p>\n\n<p>Table A:</p>\n\n<pre><code>id1   value1\n1     23\n2     34\n3     2342\n4     333\n</code></pre>\n\n<p>Table B:</p>\n\n<pre><code>id2   value2\n1     apple\n2     banana\n3     berry\n</code></pre>\n\n<p>Table C:</p>\n\n<pre><code>id3   value3   value4\n1     red      batman\n2     green    superman\n3     white    wonder woman\n4     gray     aquaman\n5     yellow   flash\n</code></pre>\n\n<p>I want to merge these three tables according to an index table D</p>\n\n<p>Table D:</p>\n\n<pre><code>Table_A    Table_B    Table_C\n1          3           2\n3                      4       \n2          2           3\n4          1           1\n                       5 \n</code></pre>\n\n<p>And my resulting table should like:</p>\n\n<pre><code>id1   value1    id2   value2    id3   value3  value4\n1     23        3     berry     2     green    superman\n3     2342                      4     gray     aquaman\n2     34        2     banana    3     white    wonder woman\n4     333       1     apple     1     red      batman\n                                5     yellow   flash\n</code></pre>\n\n<p>Can I do it via Python Pandas or I need do it in Spark?</p>\n"}, {"tags": ["python", "pytorch"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1499286043, "post_id": 44935176, "comment_id": 76846796, "body": "should it be <code>tensor</code> obligatory?"}, {"owner": {"reputation": 26717, "user_id": 5352399, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-Rk_dLwN-xPY/AAAAAAAAAAI/AAAAAAAAAC8/DtCya1W9lX4/photo.jpg?sz=128", "display_name": "Wasi Ahmad", "link": "https://stackoverflow.com/users/5352399/wasi-ahmad"}, "reply_to_user": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1499300680, "post_id": 44935176, "comment_id": 76852170, "body": "yes. I want the final result as a tensor. I want to avoid conversion, say from tensor to numpy, do swapping and then again back to tensor."}], "answers": [{"comments": [{"owner": {"reputation": 6485, "user_id": 9067615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkgqA.jpg?s=128&g=1", "display_name": "iacob", "link": "https://stackoverflow.com/users/9067615/iacob"}, "edited": false, "score": 0, "creation_date": 1617792941, "post_id": 44944540, "comment_id": 118403862, "body": "This will raise an error: <code>RuntimeError: unsupported operation: some elements of the input tensor and the written-to tensor refer to a single memory location. Please clone() the tensor before performing the operation.</code>"}], "tags": [], "owner": {"reputation": 5503, "user_id": 7042758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e8ee7e87b8b3f636141ad7a9260296f?s=128&d=identicon&r=PG&f=1", "display_name": "mbpaulus", "link": "https://stackoverflow.com/users/7042758/mbpaulus"}, "is_accepted": false, "score": 0, "last_activity_date": 1499332246, "creation_date": 1499332246, "answer_id": 44944540, "question_id": 44935176, "link": "https://stackoverflow.com/questions/44935176/how-two-rows-can-be-swapped-in-a-torch-tensor/44944540#44944540", "title": "How two rows can be swapped in a torch tensor?", "body": "<p>Generate the permutation index you desire: </p>\n\n<pre><code>index = torch.LongTensor([1,0,2])\n</code></pre>\n\n<p>Apply the permutation:</p>\n\n<pre><code>var[index] = var\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 4901005, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1IgA2AlHmtQ/AAAAAAAAAAI/AAAAAAAABRU/E9LgXoUQm-Q/photo.jpg?sz=128", "display_name": "shaneb", "link": "https://stackoverflow.com/users/4901005/shaneb"}, "is_accepted": true, "score": 1, "last_activity_date": 1617799699, "last_edit_date": 1617799699, "creation_date": 1549318305, "answer_id": 54525088, "question_id": 44935176, "link": "https://stackoverflow.com/questions/44935176/how-two-rows-can-be-swapped-in-a-torch-tensor/54525088#54525088", "title": "How two rows can be swapped in a torch tensor?", "body": "<p>The <a href=\"https://stackoverflow.com/a/44944540/4901005\">other answer</a> does not work, as some dimensions get overwritten before they are copied:</p>\n<pre><code>&gt;&gt;&gt; var = [[0, 1, -4, 8],\n       [2, -3, 2, 1],\n       [5, -8, 7, 1]]\n&gt;&gt;&gt; x = torch.tensor(var)\n&gt;&gt;&gt; index = torch.LongTensor([1, 0, 2])\n&gt;&gt;&gt; x[index] = x\n&gt;&gt;&gt; x\ntensor([[ 0,  1, -4,  8],\n        [ 0,  1, -4,  8],\n        [ 5, -8,  7,  1]])\n</code></pre>\n<p>For me, it suffices to create a new tensor (with separate underlying storage) to hold the result:</p>\n<pre><code>&gt;&gt;&gt; x = torch.tensor(var)\n&gt;&gt;&gt; index = torch.LongTensor([1, 0, 2])\n&gt;&gt;&gt; y = torch.zeros_like(x)\n&gt;&gt;&gt; y[index] = x\n</code></pre>\n<p>Alternatively, you can use <a href=\"https://pytorch.org/docs/stable/tensors.html#torch.Tensor.index_copy_\" rel=\"nofollow noreferrer\"><code>index_copy_</code></a> (following this explanation in <a href=\"https://discuss.pytorch.org/t/moving-rows-in-tensor/4389\" rel=\"nofollow noreferrer\">discuss.pytorch.org</a>), although I don't see an advantage for either way at the moment.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 8739732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d1da6ab60fbec9e0174472700a4bf8?s=128&d=identicon&r=PG&f=1", "display_name": "warriorUSP", "link": "https://stackoverflow.com/users/8739732/warriorusp"}, "is_accepted": false, "score": 0, "last_activity_date": 1601839995, "last_edit_date": 1601839995, "creation_date": 1601839425, "answer_id": 64198929, "question_id": 44935176, "link": "https://stackoverflow.com/questions/44935176/how-two-rows-can-be-swapped-in-a-torch-tensor/64198929#64198929", "title": "How two rows can be swapped in a torch tensor?", "body": "<p>As other answers suggested that your permutation index should be a tensor itself, but it is not necessary. You can swap 1st and 2nd row like this:</p>\n<pre><code>&gt;&gt;&gt; var\ntensor([[ 0,  1, -4,  8],\n        [ 2, -3,  2,  1],\n        [ 5, -8,  7,  1]])\n\n&gt;&gt;&gt; var[[0, 1]] = var[[1, 0]]\n\n&gt;&gt;&gt; var\ntensor([[ 2, -3,  2,  1],\n        [ 0,  1, -4,  8],\n        [ 5, -8,  7,  1]])\n</code></pre>\n<p><code>var</code> can be a NumPy array or PyTorch tensor.</p>\n"}, {"tags": [], "owner": {"reputation": 6485, "user_id": 9067615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkgqA.jpg?s=128&g=1", "display_name": "iacob", "link": "https://stackoverflow.com/users/9067615/iacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1617792794, "creation_date": 1617792794, "answer_id": 66984608, "question_id": 44935176, "link": "https://stackoverflow.com/questions/44935176/how-two-rows-can-be-swapped-in-a-torch-tensor/66984608#66984608", "title": "How two rows can be swapped in a torch tensor?", "body": "<p>You can use <a href=\"https://discuss.pytorch.org/t/how-to-exchange-pytorch-tensor-column-position/8002/4\" rel=\"nofollow noreferrer\"><code>index_select</code></a> for this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; idx = torch.LongTensor([1,0,2])\n&gt;&gt;&gt; var.index_select(0, idx)\n\ntensor([[ 2, -3,  2,  1],\n        [ 0,  1, -4,  8],\n        [ 5, -8,  7,  1]])\n</code></pre>\n"}], "owner": {"reputation": 26717, "user_id": 5352399, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-Rk_dLwN-xPY/AAAAAAAAAAI/AAAAAAAAAC8/DtCya1W9lX4/photo.jpg?sz=128", "display_name": "Wasi Ahmad", "link": "https://stackoverflow.com/users/5352399/wasi-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4410, "favorite_count": 0, "accepted_answer_id": 54525088, "answer_count": 4, "score": 3, "last_activity_date": 1618842947, "creation_date": 1499285542, "last_edit_date": 1618842947, "question_id": 44935176, "link": "https://stackoverflow.com/questions/44935176/how-two-rows-can-be-swapped-in-a-torch-tensor", "title": "How two rows can be swapped in a torch tensor?", "body": "<pre><code>var = [[0, 1, -4, 8],\n       [2, -3, 2, 1],\n       [5, -8, 7, 1]]\n\nvar = torch.Tensor(var)\n</code></pre>\n\n<p>Here, <code>var</code> is a 3 x 4 (2d) tensor. How the first and second row can be swapped to get the following 2d tensor?</p>\n\n<pre><code>2, -3, 2, 1 \n0, 1, -4, 8\n5, -8, 7, 1\n</code></pre>\n"}, {"tags": ["python", "ubuntu", "cron", "gnu-screen"], "comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499285652, "post_id": 44935144, "comment_id": 76846551, "body": "It would be better if you added the command to a <code>bash</code> script and then called that from within <code>cron</code>"}, {"owner": {"reputation": 41, "user_id": 4498217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-xRI68GoUL9w/AAAAAAAAAAI/AAAAAAAAAuo/oXTE4TboNEM/photo.jpg?sz=128", "display_name": "Haroon Baig", "link": "https://stackoverflow.com/users/4498217/haroon-baig"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499285840, "post_id": 44935144, "comment_id": 76846670, "body": "@pyjg How could I identify whether the Screen session was still open/cron job still running?"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1499285948, "post_id": 44935144, "comment_id": 76846733, "body": "you need to set a variable with your script and check that variable every time you run the script. when the script finishes you just toggle the variable. for instance you will only run when your variable is <code>True</code> if it is <code>False</code> you can exit. You can store this in a database/ write it to a file from your script etc."}], "answers": [{"tags": [], "owner": {"reputation": 1780, "user_id": 3560603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af154ed81c5079b43572d501beb6a89b?s=128&d=identicon&r=PG&f=1", "display_name": "fhossfel", "link": "https://stackoverflow.com/users/3560603/fhossfel"}, "is_accepted": false, "score": 0, "last_activity_date": 1499288764, "creation_date": 1499288764, "answer_id": 44935982, "question_id": 44935144, "link": "https://stackoverflow.com/questions/44935144/ubuntu-cron-job-screen/44935982#44935982", "title": "Ubuntu Cron Job Screen", "body": "<p>You should definitely remove screen. screen is used to make terminal session resumable from another TTY. Since a cron job is not interactive by definition you won't need it.</p>\n\n<p>In order to prevent cron from starting two instances of the job at the same time you can use flock. flock will create a semaphore file on the first run. If such a file is found it will either wait for the semaphore to be removed or terminate immediately if you specify the nonblack option. The later is probably what you want.</p>\n"}], "owner": {"reputation": 41, "user_id": 4498217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-xRI68GoUL9w/AAAAAAAAAAI/AAAAAAAAAuo/oXTE4TboNEM/photo.jpg?sz=128", "display_name": "Haroon Baig", "link": "https://stackoverflow.com/users/4498217/haroon-baig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499288764, "creation_date": 1499285434, "question_id": 44935144, "link": "https://stackoverflow.com/questions/44935144/ubuntu-cron-job-screen", "title": "Ubuntu Cron Job Screen", "body": "<p>I am trying to run a program that runs this line of code in </p>\n\n<p>screen livestream_dl -u \"...\" \"...\"</p>\n\n<p>And it then starts a process of checking if an Instagram Live video is being active then Downloads it if it can find it and if not the screen terminates.</p>\n\n<p>My issue is I have placed this into the cron job by adding this</p>\n\n<pre><code>*/1   *    *    *    *     screen livestream_dl \"name\" \"igname\" -p \"pass\"\n</code></pre>\n\n<p>Firstly, should I leave it as screen or without screen which would work to get the result if I were to do the same through SSH command line</p>\n\n<p>Secondly, how can I improve this cron job to make sure if the Cronjob is already running then to ignore the command and check again in a minute?</p>\n\n<p>Thanks very much! :)</p>\n"}]